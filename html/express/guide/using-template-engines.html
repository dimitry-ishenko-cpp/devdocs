<h1 id="using-template-engines-with-express" data-level="5">Using template engines with Express</h1> <p>A <em>template engine</em> enables you to use static template files in your application. At runtime, the template engine replaces variables in a template file with actual values, and transforms the template into an HTML file sent to the client. This approach makes it easier to design an HTML page.</p> <p>The <a href="../starter/generator.html">Express application generator</a> uses <a href="https://pugjs.org/api/getting-started.html">Pug</a> as its default, but it also supports <a href="https://www.npmjs.com/package/handlebars">Handlebars</a>, and <a href="https://www.npmjs.com/package/ejs">EJS</a>, among others.</p> <p>To render template files, set the following <a href="../index.html#app.set">application setting properties</a>, in the default <code class="language-plaintext highlighter-rouge">app.js</code> created by the generator:</p> <ul> <li>
<code class="language-plaintext highlighter-rouge">views</code>, the directory where the template files are located. Eg: <code class="language-plaintext highlighter-rouge">app.set('views', './views')</code>. This defaults to the <code class="language-plaintext highlighter-rouge">views</code> directory in the application root directory.</li> <li>
<code class="language-plaintext highlighter-rouge">view engine</code>, the template engine to use. For example, to use the Pug template engine: <code class="language-plaintext highlighter-rouge">app.set('view engine', 'pug')</code>.</li> </ul> <p>Then install the corresponding template engine npm package; for example to install Pug:</p> <div class="highlight"><pre class="highlight">$ npm install pug --save
</pre></div> <div class="doc-box doc-notice"> <p>Express-compliant template engines such as Pug export a function named <code class="language-plaintext highlighter-rouge">__express(filePath, options, callback)</code>, which <code class="language-plaintext highlighter-rouge">res.render()</code> calls to render the template code.</p> <p>Some template engines do not follow this convention. The <a href="https://www.npmjs.com/package/@ladjs/consolidate">@ladjs/consolidate</a> library follows this convention by mapping all of the popular Node.js template engines, and therefore works seamlessly within Express.</p> </div> <p>After the view engine is set, you don’t have to specify the engine or load the template engine module in your app; Express loads the module internally, for example:</p> <div class="highlight"><pre class="highlight">app.set('view engine', 'pug')
</pre></div> <p>Then, create a Pug template file named <code class="language-plaintext highlighter-rouge">index.pug</code> in the <code class="language-plaintext highlighter-rouge">views</code> directory, with the following content:</p> <pre data-language="pug">html
  head
    title= title
  body
    h1= message
</pre> <p>Create a route to render the <code class="language-plaintext highlighter-rouge">index.pug</code> file. If the <code class="language-plaintext highlighter-rouge">view engine</code> property is not set, you must specify the extension of the <code class="language-plaintext highlighter-rouge">view</code> file. Otherwise, you can omit it.</p> <div class="highlight"><pre class="highlight">app.get('/', (req, res) =&gt; {
  res.render('index', { title: 'Hey', message: 'Hello there!' })
})
</pre></div> <p>When you make a request to the home page, the <code class="language-plaintext highlighter-rouge">index.pug</code> file will be rendered as HTML.</p> <p>The view engine cache does not cache the contents of the template’s output, only the underlying template itself. The view is still re-rendered with every request even when the cache is on.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2017 StrongLoop, IBM, and other expressjs.com contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v3.0.<br>
    <a href="https://expressjs.com/en/guide/using-template-engines.html" class="_attribution-link">https://expressjs.com/en/guide/using-template-engines.html</a>
  </p>
</div>
