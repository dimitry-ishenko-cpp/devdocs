<header> <h1 class="my-3">ol/expr/expression </h1> <br>  </header> <article>  <h3 class="subsection-title">Type Definitions</h3> <dl> <dt class=""> <div class="nameContainer">  <h4 class="name" id="~ArgValidator"> ArgValidator<span class="signature">()</span> </h4> <div class="tag-source"> <a href="https://github.com/openlayers/openlayers/blob/v10.4.0/src/ol/expr/expression.js">expr/expression.js</a>, <a href="https://github.com/openlayers/openlayers/blob/v10.4.0/src/ol/expr/expression.js#L601">line 601</a> </div> </div> </dt> <dd class=""> <div class="description"> <p>An argument validator applies various checks to an encoded expression arguments and returns the parsed arguments if any. The second argument is the return type of the call expression.</p> </div>  </dd> <dt class=""> <div class="nameContainer">  <h4 class="name" id="~EncodedExpression"> EncodedExpression<span class="type-signature type module:ol/expr/expression~literalvalue">{<a href="module-ol_expr_expression.html#~LiteralValue">LiteralValue</a>}</span> <span class="type-signature type array">{Array}</span> </h4> </div> </dt>  <dt class=""> <div class="nameContainer">  <h4 class="name" id="~Expression"> Expression<span class="type-signature type module:ol/expr/expression.literalexpression">{LiteralExpression}</span> <span class="type-signature type module:ol/expr/expression.callexpression">{CallExpression}</span> </h4> </div> </dt>  <dt class=""> <div class="nameContainer">  <h4 class="name" id="~ExpressionValue"> ExpressionValue<span class="type-signature type array.&lt;*&gt;">{Array.&lt;*&gt;}</span> <span class="type-signature type module:ol/color~color">{<a href="module-ol_color.html#~Color">Color</a>}</span> <span class="type-signature type string">{string}</span> <span class="type-signature type number">{number}</span> <span class="type-signature type boolean">{boolean}</span> </h4> </div> </dt> <dd class=""> <div class="description"> <p>Base type used for literal style parameters; can be a number literal or the output of an operator, which in turns takes <a href="module-ol_expr_expression.html#~ExpressionValue"><code>ExpressionValue</code></a> arguments.</p> <p>See below for details on the available operators (with notes for those that are WebGL or Canvas only).</p> <p>Reading operators: <code>['band', bandIndex, xOffset, yOffset]</code> For tile layers only. Fetches pixel values from band <code>bandIndex</code> of the source's data. The first <code>bandIndex</code> of the source data is <code>1</code>. Fetched values are in the 0..1 range. <a href="module-ol_source_tileimage-tileimage.html"><code>TileImage</code></a> sources have 4 bands: red, green, blue and alpha. <a href="module-ol_source_datatile-datatilesource.html"><code>DataTileSource</code></a> sources can have any number of bands, depending on the underlying data source and <a href="module-ol_source_geotiff.html#~Options"><code>configuration</code></a>. <code>xOffset</code> and <code>yOffset</code> are optional and allow specifying pixel offsets for x and y. This is used for sampling data from neighboring pixels (WebGL only). <code>['get', attributeName]</code> fetches a feature property value, similar to <code>feature.get('attributeName')</code>. <code>['get', attributeName, keyOrArrayIndex, ...]</code> (Canvas only) Access nested properties and array items of a feature property. The result is <code>undefined</code> when there is nothing at the specified key or index. <code>['geometry-type']</code> returns a feature's geometry type as string, either: 'LineString', 'Point' or 'Polygon' <code>Multi*</code> values are returned as their singular equivalent <code>Circle</code> geometries are returned as 'Polygon' <code>GeometryCollection</code> geometries are returned as the type of the first geometry found in the collection (WebGL only). <code>['resolution']</code> returns the current resolution <code>['time']</code> The time in seconds since the creation of the layer (WebGL only). <code>['var', 'varName']</code> fetches a value from the style variables; will throw an error if that variable is undefined <code>['zoom']</code> The current zoom level (WebGL only). <code>['line-metric']</code> returns the M component of the current point on a line (WebGL only); in case where the geometry layout of the line does not contain an M component (e.g. XY or XYZ), 0 is returned; 0 is also returned for geometries other than lines. Please note that the M component will be linearly interpolated between the two points composing a segment.</p> <p>Math operators: <code>['*', value1, value2, ...]</code> multiplies the values (either numbers or colors) <code>['/', value1, value2]</code> divides <code>value1</code> by <code>value2</code> <code>['+', value1, value2, ...]</code> adds the values <code>['-', value1, value2]</code> subtracts <code>value2</code> from <code>value1</code> <code>['clamp', value, low, high]</code> clamps <code>value</code> between <code>low</code> and <code>high</code> <code>['%', value1, value2]</code> returns the result of <code>value1 % value2</code> (modulo) <code>['^', value1, value2]</code> returns the value of <code>value1</code> raised to the <code>value2</code> power <code>['abs', value1]</code> returns the absolute value of <code>value1</code> <code>['floor', value1]</code> returns the nearest integer less than or equal to <code>value1</code></p> <ul> <li>
<p><code>['round', value1]</code> returns the nearest integer to <code>value1</code></p> </li> <li>
<p><code>['ceil', value1]</code> returns the nearest integer greater than or equal to <code>value1</code></p> </li> <li>
<p><code>['sin', value1]</code> returns the sine of <code>value1</code></p> </li> <li>
<p><code>['cos', value1]</code> returns the cosine of <code>value1</code></p> </li> <li>
<p><code>['atan', value1, value2]</code> returns <code>atan2(value1, value2)</code>. If <code>value2</code> is not provided, returns <code>atan(value1)</code></p> </li> <li>
<p><code>['sqrt', value1]</code> returns the square root of <code>value1</code></p> </li> <li>
<p>Transform operators:</p> <ul> <li>
<code>['case', condition1, output1, ...conditionN, outputN, fallback]</code> selects the first output whose corresponding condition evaluates to <code>true</code>. If no match is found, returns the <code>fallback</code> value. All conditions should be <code>boolean</code>, output and fallback can be any kind.</li> <li>
<code>['match', input, match1, output1, ...matchN, outputN, fallback]</code> compares the <code>input</code> value against all provided <code>matchX</code> values, returning the output associated with the first valid match. If no match is found, returns the <code>fallback</code> value. <code>input</code> and <code>matchX</code> values must all be of the same type, and can be <code>number</code> or <code>string</code>. <code>outputX</code> and <code>fallback</code> values must be of the same type, and can be of any kind.</li> <li>
<code>['interpolate', interpolation, input, stop1, output1, ...stopN, outputN]</code> returns a value by interpolating between pairs of inputs and outputs; <code>interpolation</code> can either be <code>['linear']</code> or <code>['exponential', base]</code> where <code>base</code> is the rate of increase from stop A to stop B (i.e. power to which the interpolation ratio is raised); a value of 1 is equivalent to <code>['linear']</code>. <code>input</code> and <code>stopX</code> values must all be of type <code>number</code>. <code>outputX</code> values can be <code>number</code> or <code>color</code> values. Note: <code>input</code> will be clamped between <code>stop1</code> and <code>stopN</code>, meaning that all output values will be comprised between <code>output1</code> and <code>outputN</code>.</li> <li>
<code>['string', value1, value2, ...]</code> returns the first value in the list that evaluates to a string. An example would be to provide a default value for get: <code>['string', ['get', 'propertyname'], 'default value']]</code> (Canvas only).</li> <li>
<code>['number', value1, value2, ...]</code> returns the first value in the list that evaluates to a number. An example would be to provide a default value for get: <code>['string', ['get', 'propertyname'], 42]]</code> (Canvas only).</li> <li>
<code>['coalesce', value1, value2, ...]</code> returns the first value in the list which is not null or undefined. An example would be to provide a default value for get: <code>['coalesce', ['get','propertyname'], 'default value']]</code> (Canvas only).</li> </ul> </li> <li>
<p>Logical operators:</p> <ul> <li>
<code>['&lt;', value1, value2]</code> returns <code>true</code> if <code>value1</code> is strictly lower than <code>value2</code>, or <code>false</code> otherwise.</li> <li>
<code>['&lt;=', value1, value2]</code> returns <code>true</code> if <code>value1</code> is lower than or equals <code>value2</code>, or <code>false</code> otherwise.</li> <li>
<code>['&gt;', value1, value2]</code> returns <code>true</code> if <code>value1</code> is strictly greater than <code>value2</code>, or <code>false</code> otherwise.</li> <li>
<code>['&gt;=', value1, value2]</code> returns <code>true</code> if <code>value1</code> is greater than or equals <code>value2</code>, or <code>false</code> otherwise.</li> <li>
<code>['==', value1, value2]</code> returns <code>true</code> if <code>value1</code> equals <code>value2</code>, or <code>false</code> otherwise.</li> <li>
<code>['!=', value1, value2]</code> returns <code>true</code> if <code>value1</code> does not equal <code>value2</code>, or <code>false</code> otherwise.</li> <li>
<code>['!', value1]</code> returns <code>false</code> if <code>value1</code> is <code>true</code> or greater than <code>0</code>, or <code>true</code> otherwise.</li> <li>
<code>['all', value1, value2, ...]</code> returns <code>true</code> if all the inputs are <code>true</code>, <code>false</code> otherwise.</li> <li>
<code>['any', value1, value2, ...]</code> returns <code>true</code> if any of the inputs are <code>true</code>, <code>false</code> otherwise.</li> <li>
<code>['has', attributeName, keyOrArrayIndex, ...]</code> returns <code>true</code> if feature properties include the (nested) key <code>attributeName</code>, <code>false</code> otherwise.</li> <li>
<code>['between', value1, value2, value3]</code> returns <code>true</code> if <code>value1</code> is contained between <code>value2</code> and <code>value3</code> (inclusively), or <code>false</code> otherwise.</li> <li>
<code>['in', needle, haystack]</code> returns <code>true</code> if <code>needle</code> is found in <code>haystack</code>, and <code>false</code> otherwise. This operator has the following limitations:<ul> <li>
<code>haystack</code> has to be an array of numbers or strings (searching for a substring in a string is not supported yet)</li> <li>Only literal arrays are supported as <code>haystack</code> for now; this means that <code>haystack</code> cannot be the result of an expression. If <code>haystack</code> is an array of strings, use the <code>literal</code> operator to disambiguate from an expression: <code>['literal', ['abc', 'def', 'ghi']]</code>
</li> </ul> </li> </ul> </li> <li>
<p>Conversion operators:</p> <ul> <li>
<code>['array', value1, ...valueN]</code> creates a numerical array from <code>number</code> values; please note that the amount of values can currently only be 2, 3 or 4 (WebGL only).</li> <li>
<code>['color', red, green, blue, alpha]</code> or <code>['color', shade, alpha]</code> creates a <code>color</code> value from <code>number</code> values; the <code>alpha</code> parameter is optional; if not specified, it will be set to 1 (WebGL only). Note: <code>red</code>, <code>green</code> and <code>blue</code> or <code>shade</code> components must be values between 0 and 255; <code>alpha</code> between 0 and 1.</li> <li>
<code>['palette', index, colors]</code> picks a <code>color</code> value from an array of colors using the given index; the <code>index</code> expression must evaluate to a number; the items in the <code>colors</code> array must be strings with hex colors (e.g. <code>'#86A136'</code>), colors using the rgba[a] functional notation (e.g. <code>'rgb(134, 161, 54)'</code> or <code>'rgba(134, 161, 54, 1)'</code>), named colors (e.g. <code>'red'</code>), or array literals with 3 ([r, g, b]) or 4 ([r, g, b, a]) values (with r, g, and b in the 0-255 range and a in the 0-1 range) (WebGL only).</li> <li>
<code>['to-string', value]</code> converts the input value to a string. If the input is a boolean, the result is "true" or "false". If the input is a number, it is converted to a string as specified by the "NumberToString" algorithm of the ECMAScript Language Specification. If the input is a color, it is converted to a string of the form "rgba(r,g,b,a)". (Canvas only)</li> </ul> </li> </ul> <p>Values can either be literals or another operator, as they will be evaluated recursively. Literal values can be of the following types:</p> <ul> <li><code>boolean</code></li> <li><code>number</code></li> <li>
<code>number[]</code> (number arrays can only have a length of 2, 3 or 4)</li> <li><code>string</code></li> <li><a href="module-ol_color.html#~Color"><code>Color</code></a></li> </ul> </div>  </dd> <dt class=""> <div class="nameContainer">  <h4 class="name" id="~LiteralValue"> LiteralValue<span class="type-signature type boolean">{boolean}</span> <span class="type-signature type number">{number}</span> <span class="type-signature type string">{string}</span> <span class="type-signature type array.&lt;number&gt;">{Array.&lt;number&gt;}</span> </h4> </div> </dt>  <dt class=""> <div class="nameContainer">  <h4 class="name" id="~Parser"> Parser<span class="signature">()</span> </h4> <div class="tag-source"> <a href="https://github.com/openlayers/openlayers/blob/v10.4.0/src/ol/expr/expression.js">expr/expression.js</a>, <a href="https://github.com/openlayers/openlayers/blob/v10.4.0/src/ol/expr/expression.js#L428">line 428</a> </div> </div> </dt> <dd class=""> <div class="description"> <p>Second argument is the expected type.</p> </div>  </dd> <dt class=""> <div class="nameContainer">  <h4 class="name" id="~ParsingContext"> ParsingContext<span class="type-signature type object">{Object}</span> </h4> </div> </dt> <dd class=""> <dl class="details"> <h5 class="subsection-title">Properties:</h5> <dl> <table class="props"> <thead> <tr> <th>Name</th> <th>Type</th> <th class="last">Description</th> </tr> </thead> <tbody> <tr> <td class="name"><code>variables</code></td> <td class="type"> <span class="param-type">Set.&lt;string&gt;</span> </td> <td class="description last"> <p>Variables referenced with the 'var' operator.</p> </td> </tr> <tr> <td class="name"><code>properties</code></td> <td class="type"> <span class="param-type">Set.&lt;string&gt;</span> </td> <td class="description last"> <p>Properties referenced with the 'get' operator.</p> </td> </tr> <tr> <td class="name"><code>featureId</code></td> <td class="type"> <span class="param-type">boolean</span> </td> <td class="description last"> <p>The style uses the feature id.</p> </td> </tr> <tr> <td class="name"><code>geometryType</code></td> <td class="type"> <span class="param-type">boolean</span> </td> <td class="description last"> <p>The style uses the feature geometry type.</p> </td> </tr> <tr> <td class="name"><code>mapState</code></td> <td class="type"> <span class="param-type">boolean</span> </td> <td class="description last"> <p>The style uses the map state (view state or time elapsed).</p> </td> </tr> </tbody> </table>
</dl> </dl> </dd> </dl> </article><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005-present, OpenLayers Contributors All rights reserved.Licensed under the BSD 2-Clause License.<br>
    <a href="https://openlayers.org/en/latest/apidoc/module-ol_expr_expression.html" class="_attribution-link">https://openlayers.org/en/latest/apidoc/module-ol_expr_expression.html</a>
  </p>
</div>
