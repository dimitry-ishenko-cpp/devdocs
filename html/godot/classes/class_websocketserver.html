<h1 id="class-websocketserver">WebSocketServer</h1> <p><strong>Inherits:</strong> <a href="class_websocketmultiplayerpeer.html#class-websocketmultiplayerpeer"><span class="std std-ref">WebSocketMultiplayerPeer</span></a> <strong>&lt;</strong> <a href="class_networkedmultiplayerpeer.html#class-networkedmultiplayerpeer"><span class="std std-ref">NetworkedMultiplayerPeer</span></a> <strong>&lt;</strong> <a href="class_packetpeer.html#class-packetpeer"><span class="std std-ref">PacketPeer</span></a> <strong>&lt;</strong> <a href="class_reference.html#class-reference"><span class="std std-ref">Reference</span></a> <strong>&lt;</strong> <a href="class_object.html#class-object"><span class="std std-ref">Object</span></a></p> <p>A WebSocket server implementation.</p> <section id="description"> <h2>Description</h2> <p>This class implements a WebSocket server that can also support the high-level multiplayer API.</p> <p>After starting the server (<a href="#class-websocketserver-method-listen"><span class="std std-ref">listen</span></a>), you will need to <a href="class_networkedmultiplayerpeer.html#class-networkedmultiplayerpeer-method-poll"><span class="std std-ref">NetworkedMultiplayerPeer.poll</span></a> it at regular intervals (e.g. inside <a href="class_node.html#class-node-method-process"><span class="std std-ref">Node._process</span></a>). When clients connect, disconnect, or send data, you will receive the appropriate signal.</p> <p><strong>Note:</strong> Not available in HTML5 exports.</p> </section> <section id="properties"> <h2>Properties</h2> <table class="docutils align-default">   <tr>
<td><p><a href="class_string.html#class-string"><span class="std std-ref">String</span></a></p></td> <td><p><a href="#class-websocketserver-property-bind-ip"><span class="std std-ref">bind_ip</span></a></p></td> <td><p><code>"*"</code></p></td> </tr> <tr>
<td><p><a href="class_x509certificate.html#class-x509certificate"><span class="std std-ref">X509Certificate</span></a></p></td> <td><p><a href="#class-websocketserver-property-ca-chain"><span class="std std-ref">ca_chain</span></a></p></td> <td></td> </tr> <tr>
<td><p><a href="class_float.html#class-float"><span class="std std-ref">float</span></a></p></td> <td><p><a href="#class-websocketserver-property-handshake-timeout"><span class="std std-ref">handshake_timeout</span></a></p></td> <td><p><code>3.0</code></p></td> </tr> <tr>
<td><p><a href="class_cryptokey.html#class-cryptokey"><span class="std std-ref">CryptoKey</span></a></p></td> <td><p><a href="#class-websocketserver-property-private-key"><span class="std std-ref">private_key</span></a></p></td> <td></td> </tr> <tr>
<td><p><a href="class_x509certificate.html#class-x509certificate"><span class="std std-ref">X509Certificate</span></a></p></td> <td><p><a href="#class-websocketserver-property-ssl-certificate"><span class="std std-ref">ssl_certificate</span></a></p></td> <td></td> </tr>  </table> </section> <section id="methods"> <h2>Methods</h2> <table class="docutils align-default">   <tr>
<td><p>void</p></td> <td><p><a href="#class-websocketserver-method-disconnect-peer"><span class="std std-ref">disconnect_peer</span></a> <strong>(</strong> <a href="class_int.html#class-int"><span class="std std-ref">int</span></a> id, <a href="class_int.html#class-int"><span class="std std-ref">int</span></a> code=1000, <a href="class_string.html#class-string"><span class="std std-ref">String</span></a> reason="" <strong>)</strong></p></td> </tr> <tr>
<td><p><a href="class_string.html#class-string"><span class="std std-ref">String</span></a></p></td> <td><p><a href="#class-websocketserver-method-get-peer-address"><span class="std std-ref">get_peer_address</span></a> <strong>(</strong> <a href="class_int.html#class-int"><span class="std std-ref">int</span></a> id <strong>)</strong> <abbr title="This method has no side effects. It doesn't modify any of the instance's member variables.">const</abbr></p></td> </tr> <tr>
<td><p><a href="class_int.html#class-int"><span class="std std-ref">int</span></a></p></td> <td><p><a href="#class-websocketserver-method-get-peer-port"><span class="std std-ref">get_peer_port</span></a> <strong>(</strong> <a href="class_int.html#class-int"><span class="std std-ref">int</span></a> id <strong>)</strong> <abbr title="This method has no side effects. It doesn't modify any of the instance's member variables.">const</abbr></p></td> </tr> <tr>
<td><p><a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a></p></td> <td><p><a href="#class-websocketserver-method-has-peer"><span class="std std-ref">has_peer</span></a> <strong>(</strong> <a href="class_int.html#class-int"><span class="std std-ref">int</span></a> id <strong>)</strong> <abbr title="This method has no side effects. It doesn't modify any of the instance's member variables.">const</abbr></p></td> </tr> <tr>
<td><p><a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a></p></td> <td><p><a href="#class-websocketserver-method-is-listening"><span class="std std-ref">is_listening</span></a> <strong>(</strong> <strong>)</strong> <abbr title="This method has no side effects. It doesn't modify any of the instance's member variables.">const</abbr></p></td> </tr> <tr>
<td><p><a href="class_%40globalscope.html#enum-globalscope-error"><span class="std std-ref">Error</span></a></p></td> <td><p><a href="#class-websocketserver-method-listen"><span class="std std-ref">listen</span></a> <strong>(</strong> <a href="class_int.html#class-int"><span class="std std-ref">int</span></a> port, <a href="class_poolstringarray.html#class-poolstringarray"><span class="std std-ref">PoolStringArray</span></a> protocols=PoolStringArray( ), <a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> gd_mp_api=false <strong>)</strong></p></td> </tr> <tr>
<td><p>void</p></td> <td><p><a href="#class-websocketserver-method-set-extra-headers"><span class="std std-ref">set_extra_headers</span></a> <strong>(</strong> <a href="class_poolstringarray.html#class-poolstringarray"><span class="std std-ref">PoolStringArray</span></a> headers=PoolStringArray( ) <strong>)</strong></p></td> </tr> <tr>
<td><p>void</p></td> <td><p><a href="#class-websocketserver-method-stop"><span class="std std-ref">stop</span></a> <strong>(</strong> <strong>)</strong></p></td> </tr>  </table> </section> <section id="signals"> <h2>Signals</h2> <h3 id="class-websocketserver-signal-client-close-request"><p>client_close_request ( <a href="class_int.html#class-int"><span class="std std-ref">int</span></a> id, <a href="class_int.html#class-int"><span class="std std-ref">int</span></a> code, <a href="class_string.html#class-string"><span class="std std-ref">String</span></a> reason )</p></h3> <p>Emitted when a client requests a clean close. You should keep polling until you get a <a href="#class-websocketserver-signal-client-disconnected"><span class="std std-ref">client_disconnected</span></a> signal with the same <code>id</code> to achieve the clean close. See <a href="class_websocketpeer.html#class-websocketpeer-method-close"><span class="std std-ref">WebSocketPeer.close</span></a> for more details.</p>  <h3 id="class-websocketserver-signal-client-connected"><p>client_connected ( <a href="class_int.html#class-int"><span class="std std-ref">int</span></a> id, <a href="class_string.html#class-string"><span class="std std-ref">String</span></a> protocol )</p></h3> <p>Emitted when a new client connects. "protocol" will be the sub-protocol agreed with the client.</p>  <h3 id="class-websocketserver-signal-client-disconnected"><p>client_disconnected ( <a href="class_int.html#class-int"><span class="std std-ref">int</span></a> id, <a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> was_clean_close )</p></h3> <p>Emitted when a client disconnects. <code>was_clean_close</code> will be <code>true</code> if the connection was shutdown cleanly.</p>  <h3 id="class-websocketserver-signal-data-received"><p>data_received ( <a href="class_int.html#class-int"><span class="std std-ref">int</span></a> id )</p></h3> <p>Emitted when a new message is received.</p> <p><strong>Note:</strong> This signal is <em>not</em> emitted when used as high-level multiplayer peer.</p> </section> <section id="property-descriptions"> <h2>Property Descriptions</h2> <h3 id="class-websocketserver-property-bind-ip"><p><a href="class_string.html#class-string"><span class="std std-ref">String</span></a> bind_ip</p></h3> <table class="docutils align-default">   <tr>
<td><p><em>Default</em></p></td> <td><p><code>"*"</code></p></td> </tr> <tr>
<td><p><em>Setter</em></p></td> <td><p>set_bind_ip(value)</p></td> </tr> <tr>
<td><p><em>Getter</em></p></td> <td><p>get_bind_ip()</p></td> </tr>  </table> <p>When not set to <code>*</code> will restrict incoming connections to the specified IP address. Setting <code>bind_ip</code> to <code>127.0.0.1</code> will cause the server to listen only to the local host.</p>  <h3 id="class-websocketserver-property-ca-chain"><p><a href="class_x509certificate.html#class-x509certificate"><span class="std std-ref">X509Certificate</span></a> ca_chain</p></h3> <table class="docutils align-default">   <tr>
<td><p><em>Setter</em></p></td> <td><p>set_ca_chain(value)</p></td> </tr> <tr>
<td><p><em>Getter</em></p></td> <td><p>get_ca_chain()</p></td> </tr>  </table> <p>When using SSL (see <a href="#class-websocketserver-property-private-key"><span class="std std-ref">private_key</span></a> and <a href="#class-websocketserver-property-ssl-certificate"><span class="std std-ref">ssl_certificate</span></a>), you can set this to a valid <a href="class_x509certificate.html#class-x509certificate"><span class="std std-ref">X509Certificate</span></a> to be provided as additional CA chain information during the SSL handshake.</p>  <h3 id="class-websocketserver-property-handshake-timeout"><p><a href="class_float.html#class-float"><span class="std std-ref">float</span></a> handshake_timeout</p></h3> <table class="docutils align-default">   <tr>
<td><p><em>Default</em></p></td> <td><p><code>3.0</code></p></td> </tr> <tr>
<td><p><em>Setter</em></p></td> <td><p>set_handshake_timeout(value)</p></td> </tr> <tr>
<td><p><em>Getter</em></p></td> <td><p>get_handshake_timeout()</p></td> </tr>  </table> <p>The time in seconds before a pending client (i.e. a client that has not yet finished the HTTP handshake) is considered stale and forcefully disconnected.</p>  <h3 id="class-websocketserver-property-private-key"><p><a href="class_cryptokey.html#class-cryptokey"><span class="std std-ref">CryptoKey</span></a> private_key</p></h3> <table class="docutils align-default">   <tr>
<td><p><em>Setter</em></p></td> <td><p>set_private_key(value)</p></td> </tr> <tr>
<td><p><em>Getter</em></p></td> <td><p>get_private_key()</p></td> </tr>  </table> <p>When set to a valid <a href="class_cryptokey.html#class-cryptokey"><span class="std std-ref">CryptoKey</span></a> (along with <a href="#class-websocketserver-property-ssl-certificate"><span class="std std-ref">ssl_certificate</span></a>) will cause the server to require SSL instead of regular TCP (i.e. the <code>wss://</code> protocol).</p>  <h3 id="class-websocketserver-property-ssl-certificate"><p><a href="class_x509certificate.html#class-x509certificate"><span class="std std-ref">X509Certificate</span></a> ssl_certificate</p></h3> <table class="docutils align-default">   <tr>
<td><p><em>Setter</em></p></td> <td><p>set_ssl_certificate(value)</p></td> </tr> <tr>
<td><p><em>Getter</em></p></td> <td><p>get_ssl_certificate()</p></td> </tr>  </table> <p>When set to a valid <a href="class_x509certificate.html#class-x509certificate"><span class="std std-ref">X509Certificate</span></a> (along with <a href="#class-websocketserver-property-private-key"><span class="std std-ref">private_key</span></a>) will cause the server to require SSL instead of regular TCP (i.e. the <code>wss://</code> protocol).</p> </section> <section id="method-descriptions"> <h2>Method Descriptions</h2> <h3 id="class-websocketserver-method-disconnect-peer"><p>void disconnect_peer ( <a href="class_int.html#class-int"><span class="std std-ref">int</span></a> id, <a href="class_int.html#class-int"><span class="std std-ref">int</span></a> code=1000, <a href="class_string.html#class-string"><span class="std std-ref">String</span></a> reason="" )</p></h3> <p>Disconnects the peer identified by <code>id</code> from the server. See <a href="class_websocketpeer.html#class-websocketpeer-method-close"><span class="std std-ref">WebSocketPeer.close</span></a> for more information.</p>  <h3 id="class-websocketserver-method-get-peer-address"><p><a href="class_string.html#class-string"><span class="std std-ref">String</span></a> get_peer_address ( <a href="class_int.html#class-int"><span class="std std-ref">int</span></a> id ) <abbr title="This method has no side effects. It doesn't modify any of the instance's member variables.">const</abbr></p></h3> <p>Returns the IP address of the given peer.</p>  <h3 id="class-websocketserver-method-get-peer-port"><p><a href="class_int.html#class-int"><span class="std std-ref">int</span></a> get_peer_port ( <a href="class_int.html#class-int"><span class="std std-ref">int</span></a> id ) <abbr title="This method has no side effects. It doesn't modify any of the instance's member variables.">const</abbr></p></h3> <p>Returns the remote port of the given peer.</p>  <h3 id="class-websocketserver-method-has-peer"><p><a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> has_peer ( <a href="class_int.html#class-int"><span class="std std-ref">int</span></a> id ) <abbr title="This method has no side effects. It doesn't modify any of the instance's member variables.">const</abbr></p></h3> <p>Returns <code>true</code> if a peer with the given ID is connected.</p>  <h3 id="class-websocketserver-method-is-listening"><p><a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> is_listening ( ) <abbr title="This method has no side effects. It doesn't modify any of the instance's member variables.">const</abbr></p></h3> <p>Returns <code>true</code> if the server is actively listening on a port.</p>  <h3 id="class-websocketserver-method-listen"><p><a href="class_%40globalscope.html#enum-globalscope-error"><span class="std std-ref">Error</span></a> listen ( <a href="class_int.html#class-int"><span class="std std-ref">int</span></a> port, <a href="class_poolstringarray.html#class-poolstringarray"><span class="std std-ref">PoolStringArray</span></a> protocols=PoolStringArray( ), <a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> gd_mp_api=false )</p></h3> <p>Starts listening on the given port.</p> <p>You can specify the desired subprotocols via the "protocols" array. If the list empty (default), no sub-protocol will be requested.</p> <p>If <code>true</code> is passed as <code>gd_mp_api</code>, the server will behave like a network peer for the <a href="class_multiplayerapi.html#class-multiplayerapi"><span class="std std-ref">MultiplayerAPI</span></a>, connections from non-Godot clients will not work, and <a href="#class-websocketserver-signal-data-received"><span class="std std-ref">data_received</span></a> will not be emitted.</p> <p>If <code>false</code> is passed instead (default), you must call <a href="class_packetpeer.html#class-packetpeer"><span class="std std-ref">PacketPeer</span></a> functions (<code>put_packet</code>, <code>get_packet</code>, etc.), on the <a href="class_websocketpeer.html#class-websocketpeer"><span class="std std-ref">WebSocketPeer</span></a> returned via <code>get_peer(id)</code> to communicate with the peer with given <code>id</code> (e.g. <code>get_peer(id).get_available_packet_count</code>).</p>  <h3 id="class-websocketserver-method-set-extra-headers"><p>void set_extra_headers ( <a href="class_poolstringarray.html#class-poolstringarray"><span class="std std-ref">PoolStringArray</span></a> headers=PoolStringArray( ) )</p></h3> <p>Sets additional headers to be sent to clients during the HTTP handshake.</p>  <h3 id="class-websocketserver-method-stop"><p>void stop ( )</p></h3> <p>Stops the server and clear its state.</p> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2014&ndash;2022 Juan Linietsky, Ariel Manzur, Godot Engine contributors<br>Licensed under the MIT License.<br>
    <a href="https://docs.godotengine.org/en/3.5/classes/class_websocketserver.html" class="_attribution-link">https://docs.godotengine.org/en/3.5/classes/class_websocketserver.html</a>
  </p>
</div>
