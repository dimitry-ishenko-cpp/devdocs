<section id="skeletonik3d"> <h1 id="class-skeletonik3d">SkeletonIK3D</h1> <p><strong>Inherits:</strong> <a href="class_node.html#class-node"><span class="std std-ref">Node</span></a> <strong>&lt;</strong> <a href="class_object.html#class-object"><span class="std std-ref">Object</span></a></p> <p>A node used to rotate all bones of a <a href="class_skeleton3d.html#class-skeleton3d"><span class="std std-ref">Skeleton3D</span></a> bone chain a way that places the end bone at a desired 3D position.</p> <section class="classref-introduction-group" id="description"> <h2>Description</h2> <p>SkeletonIK3D is used to rotate all bones of a <a href="class_skeleton3d.html#class-skeleton3d"><span class="std std-ref">Skeleton3D</span></a> bone chain a way that places the end bone at a desired 3D position. A typical scenario for IK in games is to place a character's feet on the ground or a character's hands on a currently held object. SkeletonIK uses FabrikInverseKinematic internally to solve the bone chain and applies the results to the <a href="class_skeleton3d.html#class-skeleton3d"><span class="std std-ref">Skeleton3D</span></a> <code>bones_global_pose_override</code> property for all affected bones in the chain. If fully applied, this overwrites any bone transform from <a href="class_animation.html#class-animation"><span class="std std-ref">Animation</span></a>s or bone custom poses set by users. The applied amount can be controlled with the <a href="#class-skeletonik3d-property-interpolation"><span class="std std-ref">interpolation</span></a> property.</p> <pre data-language="gdscript"># Apply IK effect automatically on every new frame (not the current)
skeleton_ik_node.start()

# Apply IK effect only on the current frame
skeleton_ik_node.start(true)

# Stop IK effect and reset bones_global_pose_override on Skeleton
skeleton_ik_node.stop()

# Apply full IK effect
skeleton_ik_node.set_interpolation(1.0)

# Apply half IK effect
skeleton_ik_node.set_interpolation(0.5)

# Apply zero IK effect (a value at or below 0.01 also removes bones_global_pose_override on Skeleton)
skeleton_ik_node.set_interpolation(0.0)
</pre> <p><em>Deprecated.</em> This class is deprecated, and might be removed in a future release.</p> </section> <section class="classref-introduction-group" id="tutorials"> <h2>Tutorials</h2> <ul class="simple"> <li><a href="https://godotengine.org/asset-library/asset/523">3D Inverse Kinematics Demo</a></li> </ul> </section> <section class="classref-reftable-group" id="properties"> <h2>Properties</h2> <table class="colwidths-auto docutils align-default">  <tr>
<td><p><a href="class_float.html#class-float"><span class="std std-ref">float</span></a></p></td> <td><p><a href="#class-skeletonik3d-property-interpolation"><span class="std std-ref">interpolation</span></a></p></td> <td><p><code>1.0</code></p></td> </tr> <tr>
<td><p><a href="class_vector3.html#class-vector3"><span class="std std-ref">Vector3</span></a></p></td> <td><p><a href="#class-skeletonik3d-property-magnet"><span class="std std-ref">magnet</span></a></p></td> <td><p><code>Vector3(0, 0, 0)</code></p></td> </tr> <tr>
<td><p><a href="class_int.html#class-int"><span class="std std-ref">int</span></a></p></td> <td><p><a href="#class-skeletonik3d-property-max-iterations"><span class="std std-ref">max_iterations</span></a></p></td> <td><p><code>10</code></p></td> </tr> <tr>
<td><p><a href="class_float.html#class-float"><span class="std std-ref">float</span></a></p></td> <td><p><a href="#class-skeletonik3d-property-min-distance"><span class="std std-ref">min_distance</span></a></p></td> <td><p><code>0.01</code></p></td> </tr> <tr>
<td><p><a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a></p></td> <td><p><a href="#class-skeletonik3d-property-override-tip-basis"><span class="std std-ref">override_tip_basis</span></a></p></td> <td><p><code>true</code></p></td> </tr> <tr>
<td><p><a href="class_stringname.html#class-stringname"><span class="std std-ref">StringName</span></a></p></td> <td><p><a href="#class-skeletonik3d-property-root-bone"><span class="std std-ref">root_bone</span></a></p></td> <td><p><code>&amp;""</code></p></td> </tr> <tr>
<td><p><a href="class_transform3d.html#class-transform3d"><span class="std std-ref">Transform3D</span></a></p></td> <td><p><a href="#class-skeletonik3d-property-target"><span class="std std-ref">target</span></a></p></td> <td><p><code>Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0)</code></p></td> </tr> <tr>
<td><p><a href="class_nodepath.html#class-nodepath"><span class="std std-ref">NodePath</span></a></p></td> <td><p><a href="#class-skeletonik3d-property-target-node"><span class="std std-ref">target_node</span></a></p></td> <td><p><code>NodePath("")</code></p></td> </tr> <tr>
<td><p><a href="class_stringname.html#class-stringname"><span class="std std-ref">StringName</span></a></p></td> <td><p><a href="#class-skeletonik3d-property-tip-bone"><span class="std std-ref">tip_bone</span></a></p></td> <td><p><code>&amp;""</code></p></td> </tr> <tr>
<td><p><a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a></p></td> <td><p><a href="#class-skeletonik3d-property-use-magnet"><span class="std std-ref">use_magnet</span></a></p></td> <td><p><code>false</code></p></td> </tr>  </table> </section> <section class="classref-reftable-group" id="methods"> <h2>Methods</h2> <table class="colwidths-auto docutils align-default">  <tr>
<td><p><a href="class_skeleton3d.html#class-skeleton3d"><span class="std std-ref">Skeleton3D</span></a></p></td> <td><p><a href="#class-skeletonik3d-method-get-parent-skeleton"><span class="std std-ref">get_parent_skeleton</span></a> <strong>(</strong> <strong>)</strong> <abbr title="This method has no side effects. It doesn't modify any of the instance's member variables.">const</abbr></p></td> </tr> <tr>
<td><p><a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a></p></td> <td><p><a href="#class-skeletonik3d-method-is-running"><span class="std std-ref">is_running</span></a> <strong>(</strong> <strong>)</strong></p></td> </tr> <tr>
<td><p>void</p></td> <td><p><a href="#class-skeletonik3d-method-start"><span class="std std-ref">start</span></a> <strong>(</strong> <a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> one_time=false <strong>)</strong></p></td> </tr> <tr>
<td><p>void</p></td> <td><p><a href="#class-skeletonik3d-method-stop"><span class="std std-ref">stop</span></a> <strong>(</strong> <strong>)</strong></p></td> </tr>  </table> </section>  <section class="classref-descriptions-group" id="property-descriptions"> <h2>Property Descriptions</h2> <h3 id="class-skeletonik3d-property-interpolation">
<a href="class_float.html#class-float"><span class="std std-ref">float</span></a> interpolation = <code>1.0</code>
</h3> <ul class="classref-property-setget simple"> <li>void <strong>set_interpolation</strong> <strong>(</strong> <a href="class_float.html#class-float"><span class="std std-ref">float</span></a> value <strong>)</strong>
</li> <li>
<a href="class_float.html#class-float"><span class="std std-ref">float</span></a> <strong>get_interpolation</strong> <strong>(</strong> <strong>)</strong>
</li> </ul> <p>Interpolation value for how much the IK results are applied to the current skeleton bone chain. A value of <code>1.0</code> will overwrite all skeleton bone transforms completely while a value of <code>0.0</code> will visually disable the SkeletonIK. A value at or below <code>0.01</code> also calls <a href="class_skeleton3d.html#class-skeleton3d-method-clear-bones-global-pose-override"><span class="std std-ref">Skeleton3D.clear_bones_global_pose_override</span></a>.</p>  <h3 id="class-skeletonik3d-property-magnet">
<a href="class_vector3.html#class-vector3"><span class="std std-ref">Vector3</span></a> magnet = <code>Vector3(0, 0, 0)</code>
</h3> <ul class="classref-property-setget simple"> <li>void <strong>set_magnet_position</strong> <strong>(</strong> <a href="class_vector3.html#class-vector3"><span class="std std-ref">Vector3</span></a> value <strong>)</strong>
</li> <li>
<a href="class_vector3.html#class-vector3"><span class="std std-ref">Vector3</span></a> <strong>get_magnet_position</strong> <strong>(</strong> <strong>)</strong>
</li> </ul> <p>Secondary target position (first is <a href="#class-skeletonik3d-property-target"><span class="std std-ref">target</span></a> property or <a href="#class-skeletonik3d-property-target-node"><span class="std std-ref">target_node</span></a>) for the IK chain. Use magnet position (pole target) to control the bending of the IK chain. Only works if the bone chain has more than 2 bones. The middle chain bone position will be linearly interpolated with the magnet position.</p>  <h3 id="class-skeletonik3d-property-max-iterations">
<a href="class_int.html#class-int"><span class="std std-ref">int</span></a> max_iterations = <code>10</code>
</h3> <ul class="classref-property-setget simple"> <li>void <strong>set_max_iterations</strong> <strong>(</strong> <a href="class_int.html#class-int"><span class="std std-ref">int</span></a> value <strong>)</strong>
</li> <li>
<a href="class_int.html#class-int"><span class="std std-ref">int</span></a> <strong>get_max_iterations</strong> <strong>(</strong> <strong>)</strong>
</li> </ul> <p>Number of iteration loops used by the IK solver to produce more accurate (and elegant) bone chain results.</p>  <h3 id="class-skeletonik3d-property-min-distance">
<a href="class_float.html#class-float"><span class="std std-ref">float</span></a> min_distance = <code>0.01</code>
</h3> <ul class="classref-property-setget simple"> <li>void <strong>set_min_distance</strong> <strong>(</strong> <a href="class_float.html#class-float"><span class="std std-ref">float</span></a> value <strong>)</strong>
</li> <li>
<a href="class_float.html#class-float"><span class="std std-ref">float</span></a> <strong>get_min_distance</strong> <strong>(</strong> <strong>)</strong>
</li> </ul> <p>The minimum distance between bone and goal target. If the distance is below this value, the IK solver stops further iterations.</p>  <h3 id="class-skeletonik3d-property-override-tip-basis">
<a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> override_tip_basis = <code>true</code>
</h3> <ul class="classref-property-setget simple"> <li>void <strong>set_override_tip_basis</strong> <strong>(</strong> <a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> value <strong>)</strong>
</li> <li>
<a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> <strong>is_override_tip_basis</strong> <strong>(</strong> <strong>)</strong>
</li> </ul> <p>If <code>true</code> overwrites the rotation of the tip bone with the rotation of the <a href="#class-skeletonik3d-property-target"><span class="std std-ref">target</span></a> (or <a href="#class-skeletonik3d-property-target-node"><span class="std std-ref">target_node</span></a> if defined).</p>  <h3 id="class-skeletonik3d-property-root-bone">
<a href="class_stringname.html#class-stringname"><span class="std std-ref">StringName</span></a> root_bone = <code>&amp;""</code>
</h3> <ul class="classref-property-setget simple"> <li>void <strong>set_root_bone</strong> <strong>(</strong> <a href="class_stringname.html#class-stringname"><span class="std std-ref">StringName</span></a> value <strong>)</strong>
</li> <li>
<a href="class_stringname.html#class-stringname"><span class="std std-ref">StringName</span></a> <strong>get_root_bone</strong> <strong>(</strong> <strong>)</strong>
</li> </ul> <p>The name of the current root bone, the first bone in the IK chain.</p>  <h3 id="class-skeletonik3d-property-target">
<a href="class_transform3d.html#class-transform3d"><span class="std std-ref">Transform3D</span></a> target = <code>Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0)</code>
</h3> <ul class="classref-property-setget simple"> <li>void <strong>set_target_transform</strong> <strong>(</strong> <a href="class_transform3d.html#class-transform3d"><span class="std std-ref">Transform3D</span></a> value <strong>)</strong>
</li> <li>
<a href="class_transform3d.html#class-transform3d"><span class="std std-ref">Transform3D</span></a> <strong>get_target_transform</strong> <strong>(</strong> <strong>)</strong>
</li> </ul> <p>First target of the IK chain where the tip bone is placed and, if <a href="#class-skeletonik3d-property-override-tip-basis"><span class="std std-ref">override_tip_basis</span></a> is <code>true</code>, how the tip bone is rotated. If a <a href="#class-skeletonik3d-property-target-node"><span class="std std-ref">target_node</span></a> path is available the nodes transform is used instead and this property is ignored.</p>  <h3 id="class-skeletonik3d-property-target-node">
<a href="class_nodepath.html#class-nodepath"><span class="std std-ref">NodePath</span></a> target_node = <code>NodePath("")</code>
</h3> <ul class="classref-property-setget simple"> <li>void <strong>set_target_node</strong> <strong>(</strong> <a href="class_nodepath.html#class-nodepath"><span class="std std-ref">NodePath</span></a> value <strong>)</strong>
</li> <li>
<a href="class_nodepath.html#class-nodepath"><span class="std std-ref">NodePath</span></a> <strong>get_target_node</strong> <strong>(</strong> <strong>)</strong>
</li> </ul> <p>Target node <a href="class_nodepath.html#class-nodepath"><span class="std std-ref">NodePath</span></a> for the IK chain. If available, the node's current <a href="class_transform3d.html#class-transform3d"><span class="std std-ref">Transform3D</span></a> is used instead of the <a href="#class-skeletonik3d-property-target"><span class="std std-ref">target</span></a> property.</p>  <h3 id="class-skeletonik3d-property-tip-bone">
<a href="class_stringname.html#class-stringname"><span class="std std-ref">StringName</span></a> tip_bone = <code>&amp;""</code>
</h3> <ul class="classref-property-setget simple"> <li>void <strong>set_tip_bone</strong> <strong>(</strong> <a href="class_stringname.html#class-stringname"><span class="std std-ref">StringName</span></a> value <strong>)</strong>
</li> <li>
<a href="class_stringname.html#class-stringname"><span class="std std-ref">StringName</span></a> <strong>get_tip_bone</strong> <strong>(</strong> <strong>)</strong>
</li> </ul> <p>The name of the current tip bone, the last bone in the IK chain placed at the <a href="#class-skeletonik3d-property-target"><span class="std std-ref">target</span></a> transform (or <a href="#class-skeletonik3d-property-target-node"><span class="std std-ref">target_node</span></a> if defined).</p>  <h3 id="class-skeletonik3d-property-use-magnet">
<a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> use_magnet = <code>false</code>
</h3> <ul class="classref-property-setget simple"> <li>void <strong>set_use_magnet</strong> <strong>(</strong> <a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> value <strong>)</strong>
</li> <li>
<a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> <strong>is_using_magnet</strong> <strong>(</strong> <strong>)</strong>
</li> </ul> <p>If <code>true</code>, instructs the IK solver to consider the secondary magnet target (pole target) when calculating the bone chain. Use the magnet position (pole target) to control the bending of the IK chain.</p> </section>  <section class="classref-descriptions-group" id="method-descriptions"> <h2>Method Descriptions</h2> <h3 id="class-skeletonik3d-method-get-parent-skeleton">
<a href="class_skeleton3d.html#class-skeleton3d"><span class="std std-ref">Skeleton3D</span></a> get_parent_skeleton ( ) <abbr title="This method has no side effects. It doesn't modify any of the instance's member variables.">const</abbr>
</h3> <p>Returns the parent <a href="class_skeleton3d.html#class-skeleton3d"><span class="std std-ref">Skeleton3D</span></a> Node that was present when SkeletonIK entered the <a href="class_scenetree.html#class-scenetree"><span class="std std-ref">SceneTree</span></a>. Returns null if the parent node was not a <a href="class_skeleton3d.html#class-skeleton3d"><span class="std std-ref">Skeleton3D</span></a> Node when SkeletonIK3D entered the <a href="class_scenetree.html#class-scenetree"><span class="std std-ref">SceneTree</span></a>.</p>  <h3 id="class-skeletonik3d-method-is-running">
<a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> is_running ( )</h3> <p>Returns <code>true</code> if SkeletonIK is applying IK effects on continues frames to the <a href="class_skeleton3d.html#class-skeleton3d"><span class="std std-ref">Skeleton3D</span></a> bones. Returns <code>false</code> if SkeletonIK is stopped or <a href="#class-skeletonik3d-method-start"><span class="std std-ref">start</span></a> was used with the <code>one_time</code> parameter set to <code>true</code>.</p>  <h3 id="class-skeletonik3d-method-start">void start ( <a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> one_time=false )</h3> <p>Starts applying IK effects on each frame to the <a href="class_skeleton3d.html#class-skeleton3d"><span class="std std-ref">Skeleton3D</span></a> bones but will only take effect starting on the next frame. If <code>one_time</code> is <code>true</code>, this will take effect immediately but also reset on the next frame.</p>  <h3 id="class-skeletonik3d-method-stop">void stop ( )</h3> <p>Stops applying IK effects on each frame to the <a href="class_skeleton3d.html#class-skeleton3d"><span class="std std-ref">Skeleton3D</span></a> bones and also calls <a href="class_skeleton3d.html#class-skeleton3d-method-clear-bones-global-pose-override"><span class="std std-ref">Skeleton3D.clear_bones_global_pose_override</span></a> to remove existing overrides on all bones.</p> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2014&ndash;present Juan Linietsky, Ariel Manzur and the Godot community<br>Licensed under the Creative Commons Attribution Unported License v3.0.<br>
    <a href="https://docs.godotengine.org/en/4.2/classes/class_skeletonik3d.html" class="_attribution-link">https://docs.godotengine.org/en/4.2/classes/class_skeletonik3d.html</a>
  </p>
</div>
