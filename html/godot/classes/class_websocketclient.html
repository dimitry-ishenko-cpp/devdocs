<h1 id="class-websocketclient">WebSocketClient</h1> <p><strong>Inherits:</strong> <a href="class_websocketmultiplayerpeer.html#class-websocketmultiplayerpeer"><span class="std std-ref">WebSocketMultiplayerPeer</span></a> <strong>&lt;</strong> <a href="class_networkedmultiplayerpeer.html#class-networkedmultiplayerpeer"><span class="std std-ref">NetworkedMultiplayerPeer</span></a> <strong>&lt;</strong> <a href="class_packetpeer.html#class-packetpeer"><span class="std std-ref">PacketPeer</span></a> <strong>&lt;</strong> <a href="class_reference.html#class-reference"><span class="std std-ref">Reference</span></a> <strong>&lt;</strong> <a href="class_object.html#class-object"><span class="std std-ref">Object</span></a></p> <p>A WebSocket client implementation.</p> <section id="description"> <h2>Description</h2> <p>This class implements a WebSocket client compatible with any RFC 6455-compliant WebSocket server.</p> <p>This client can be optionally used as a network peer for the <a href="class_multiplayerapi.html#class-multiplayerapi"><span class="std std-ref">MultiplayerAPI</span></a>.</p> <p>After starting the client (<a href="#class-websocketclient-method-connect-to-url"><span class="std std-ref">connect_to_url</span></a>), you will need to <a href="class_networkedmultiplayerpeer.html#class-networkedmultiplayerpeer-method-poll"><span class="std std-ref">NetworkedMultiplayerPeer.poll</span></a> it at regular intervals (e.g. inside <a href="class_node.html#class-node-method-process"><span class="std std-ref">Node._process</span></a>).</p> <p>You will receive appropriate signals when connecting, disconnecting, or when new data is available.</p> </section> <section id="properties"> <h2>Properties</h2> <table class="docutils align-default">   <tr>
<td><p><a href="class_x509certificate.html#class-x509certificate"><span class="std std-ref">X509Certificate</span></a></p></td> <td><p><a href="#class-websocketclient-property-trusted-ssl-certificate"><span class="std std-ref">trusted_ssl_certificate</span></a></p></td> </tr> <tr>
<td><p><a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a></p></td> <td><p><a href="#class-websocketclient-property-verify-ssl"><span class="std std-ref">verify_ssl</span></a></p></td> </tr>  </table> </section> <section id="methods"> <h2>Methods</h2> <table class="docutils align-default">   <tr>
<td><p><a href="class_%40globalscope.html#enum-globalscope-error"><span class="std std-ref">Error</span></a></p></td> <td><p><a href="#class-websocketclient-method-connect-to-url"><span class="std std-ref">connect_to_url</span></a> <strong>(</strong> <a href="class_string.html#class-string"><span class="std std-ref">String</span></a> url, <a href="class_poolstringarray.html#class-poolstringarray"><span class="std std-ref">PoolStringArray</span></a> protocols=PoolStringArray( ), <a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> gd_mp_api=false, <a href="class_poolstringarray.html#class-poolstringarray"><span class="std std-ref">PoolStringArray</span></a> custom_headers=PoolStringArray( ) <strong>)</strong></p></td> </tr> <tr>
<td><p>void</p></td> <td><p><a href="#class-websocketclient-method-disconnect-from-host"><span class="std std-ref">disconnect_from_host</span></a> <strong>(</strong> <a href="class_int.html#class-int"><span class="std std-ref">int</span></a> code=1000, <a href="class_string.html#class-string"><span class="std std-ref">String</span></a> reason="" <strong>)</strong></p></td> </tr> <tr>
<td><p><a href="class_string.html#class-string"><span class="std std-ref">String</span></a></p></td> <td><p><a href="#class-websocketclient-method-get-connected-host"><span class="std std-ref">get_connected_host</span></a> <strong>(</strong> <strong>)</strong> <abbr title="This method has no side effects. It doesn't modify any of the instance's member variables.">const</abbr></p></td> </tr> <tr>
<td><p><a href="class_int.html#class-int"><span class="std std-ref">int</span></a></p></td> <td><p><a href="#class-websocketclient-method-get-connected-port"><span class="std std-ref">get_connected_port</span></a> <strong>(</strong> <strong>)</strong> <abbr title="This method has no side effects. It doesn't modify any of the instance's member variables.">const</abbr></p></td> </tr>  </table> </section> <section id="signals"> <h2>Signals</h2> <h3 id="class-websocketclient-signal-connection-closed"><p>connection_closed ( <a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> was_clean_close )</p></h3> <p>Emitted when the connection to the server is closed. <code>was_clean_close</code> will be <code>true</code> if the connection was shutdown cleanly.</p>  <h3 id="class-websocketclient-signal-connection-error"><p>connection_error ( )</p></h3> <p>Emitted when the connection to the server fails.</p>  <h3 id="class-websocketclient-signal-connection-established"><p>connection_established ( <a href="class_string.html#class-string"><span class="std std-ref">String</span></a> protocol )</p></h3> <p>Emitted when a connection with the server is established, <code>protocol</code> will contain the sub-protocol agreed with the server.</p>  <h3 id="class-websocketclient-signal-data-received"><p>data_received ( )</p></h3> <p>Emitted when a WebSocket message is received.</p> <p><strong>Note:</strong> This signal is <em>not</em> emitted when used as high-level multiplayer peer.</p>  <h3 id="class-websocketclient-signal-server-close-request"><p>server_close_request ( <a href="class_int.html#class-int"><span class="std std-ref">int</span></a> code, <a href="class_string.html#class-string"><span class="std std-ref">String</span></a> reason )</p></h3> <p>Emitted when the server requests a clean close. You should keep polling until you get a <a href="#class-websocketclient-signal-connection-closed"><span class="std std-ref">connection_closed</span></a> signal to achieve the clean close. See <a href="class_websocketpeer.html#class-websocketpeer-method-close"><span class="std std-ref">WebSocketPeer.close</span></a> for more details.</p> </section> <section id="property-descriptions"> <h2>Property Descriptions</h2> <h3 id="class-websocketclient-property-trusted-ssl-certificate"><p><a href="class_x509certificate.html#class-x509certificate"><span class="std std-ref">X509Certificate</span></a> trusted_ssl_certificate</p></h3> <table class="docutils align-default">   <tr>
<td><p><em>Setter</em></p></td> <td><p>set_trusted_ssl_certificate(value)</p></td> </tr> <tr>
<td><p><em>Getter</em></p></td> <td><p>get_trusted_ssl_certificate()</p></td> </tr>  </table> <p>If specified, this <a href="class_x509certificate.html#class-x509certificate"><span class="std std-ref">X509Certificate</span></a> will be the only one accepted when connecting to an SSL host. Any other certificate provided by the server will be regarded as invalid.</p> <p><strong>Note:</strong> Specifying a custom <code>trusted_ssl_certificate</code> is not supported in HTML5 exports due to browsers restrictions.</p>  <h3 id="class-websocketclient-property-verify-ssl"><p><a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> verify_ssl</p></h3> <table class="docutils align-default">   <tr>
<td><p><em>Setter</em></p></td> <td><p>set_verify_ssl_enabled(value)</p></td> </tr> <tr>
<td><p><em>Getter</em></p></td> <td><p>is_verify_ssl_enabled()</p></td> </tr>  </table> <p>If <code>true</code>, SSL certificate verification is enabled.</p> <p><strong>Note:</strong> You must specify the certificates to be used in the Project Settings for it to work when exported.</p> </section> <section id="method-descriptions"> <h2>Method Descriptions</h2> <h3 id="class-websocketclient-method-connect-to-url"><p><a href="class_%40globalscope.html#enum-globalscope-error"><span class="std std-ref">Error</span></a> connect_to_url ( <a href="class_string.html#class-string"><span class="std std-ref">String</span></a> url, <a href="class_poolstringarray.html#class-poolstringarray"><span class="std std-ref">PoolStringArray</span></a> protocols=PoolStringArray( ), <a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> gd_mp_api=false, <a href="class_poolstringarray.html#class-poolstringarray"><span class="std std-ref">PoolStringArray</span></a> custom_headers=PoolStringArray( ) )</p></h3> <p>Connects to the given URL requesting one of the given <code>protocols</code> as sub-protocol. If the list empty (default), no sub-protocol will be requested.</p> <p>If <code>true</code> is passed as <code>gd_mp_api</code>, the client will behave like a network peer for the <a href="class_multiplayerapi.html#class-multiplayerapi"><span class="std std-ref">MultiplayerAPI</span></a>, connections to non-Godot servers will not work, and <a href="#class-websocketclient-signal-data-received"><span class="std std-ref">data_received</span></a> will not be emitted.</p> <p>If <code>false</code> is passed instead (default), you must call <a href="class_packetpeer.html#class-packetpeer"><span class="std std-ref">PacketPeer</span></a> functions (<code>put_packet</code>, <code>get_packet</code>, etc.) on the <a href="class_websocketpeer.html#class-websocketpeer"><span class="std std-ref">WebSocketPeer</span></a> returned via <code>get_peer(1)</code> and not on this object directly (e.g. <code>get_peer(1).put_packet(data)</code>).</p> <p>You can optionally pass a list of <code>custom_headers</code> to be added to the handshake HTTP request.</p> <p><strong>Note:</strong> To avoid mixed content warnings or errors in HTML5, you may have to use a <code>url</code> that starts with <code>wss://</code> (secure) instead of <code>ws://</code>. When doing so, make sure to use the fully qualified domain name that matches the one defined in the server's SSL certificate. Do not connect directly via the IP address for <code>wss://</code> connections, as it won't match with the SSL certificate.</p> <p><strong>Note:</strong> Specifying <code>custom_headers</code> is not supported in HTML5 exports due to browsers restrictions.</p>  <h3 id="class-websocketclient-method-disconnect-from-host"><p>void disconnect_from_host ( <a href="class_int.html#class-int"><span class="std std-ref">int</span></a> code=1000, <a href="class_string.html#class-string"><span class="std std-ref">String</span></a> reason="" )</p></h3> <p>Disconnects this client from the connected host. See <a href="class_websocketpeer.html#class-websocketpeer-method-close"><span class="std std-ref">WebSocketPeer.close</span></a> for more information.</p>  <h3 id="class-websocketclient-method-get-connected-host"><p><a href="class_string.html#class-string"><span class="std std-ref">String</span></a> get_connected_host ( ) <abbr title="This method has no side effects. It doesn't modify any of the instance's member variables.">const</abbr></p></h3> <p>Return the IP address of the currently connected host.</p>  <h3 id="class-websocketclient-method-get-connected-port"><p><a href="class_int.html#class-int"><span class="std std-ref">int</span></a> get_connected_port ( ) <abbr title="This method has no side effects. It doesn't modify any of the instance's member variables.">const</abbr></p></h3> <p>Return the IP port of the currently connected host.</p> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2014&ndash;2022 Juan Linietsky, Ariel Manzur, Godot Engine contributors<br>Licensed under the MIT License.<br>
    <a href="https://docs.godotengine.org/en/3.5/classes/class_websocketclient.html" class="_attribution-link">https://docs.godotengine.org/en/3.5/classes/class_websocketclient.html</a>
  </p>
</div>
