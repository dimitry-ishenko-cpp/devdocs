<h1 id="class-httprequest">HTTPRequest</h1> <p><strong>Inherits:</strong> <a href="class_node.html#class-node"><span class="std std-ref">Node</span></a> <strong>&lt;</strong> <a href="class_object.html#class-object"><span class="std std-ref">Object</span></a></p> <p>A node with the ability to send HTTP(S) requests.</p> <section id="description"> <h2>Description</h2> <p>A node with the ability to send HTTP requests. Uses <a href="class_httpclient.html#class-httpclient"><span class="std std-ref">HTTPClient</span></a> internally.</p> <p>Can be used to make HTTP requests, i.e. download or upload files or web content via HTTP.</p> <p><strong>Warning:</strong> See the notes and warnings on <a href="class_httpclient.html#class-httpclient"><span class="std std-ref">HTTPClient</span></a> for limitations, especially regarding SSL security.</p> <p><strong>Example of contacting a REST API and printing one of its returned fields:</strong></p> <pre data-language="gdscript">func _ready():
    # Create an HTTP request node and connect its completion signal.
    var http_request = HTTPRequest.new()
    add_child(http_request)
    http_request.connect("request_completed", self, "_http_request_completed")

    # Perform a GET request. The URL below returns JSON as of writing.
    var error = http_request.request("https://httpbin.org/get")
    if error != OK:
        push_error("An error occurred in the HTTP request.")

    # Perform a POST request. The URL below returns JSON as of writing.
    # Note: Don't make simultaneous requests using a single HTTPRequest node.
    # The snippet below is provided for reference only.
    var body = to_json({"name": "Godette"})
    error = http_request.request("https://httpbin.org/post", [], true, HTTPClient.METHOD_POST, body)
    if error != OK:
        push_error("An error occurred in the HTTP request.")


# Called when the HTTP request is completed.
func _http_request_completed(result, response_code, headers, body):
    var response = parse_json(body.get_string_from_utf8())

    # Will print the user agent string used by the HTTPRequest node (as recognized by httpbin.org).
    print(response.headers["User-Agent"])
</pre> <p><strong>Example of loading and displaying an image using HTTPRequest:</strong></p> <pre data-language="gdscript">func _ready():
    # Create an HTTP request node and connect its completion signal.
    var http_request = HTTPRequest.new()
    add_child(http_request)
    http_request.connect("request_completed", self, "_http_request_completed")

    # Perform the HTTP request. The URL below returns a PNG image as of writing.
    var error = http_request.request("https://via.placeholder.com/512")
    if error != OK:
        push_error("An error occurred in the HTTP request.")


# Called when the HTTP request is completed.
func _http_request_completed(result, response_code, headers, body):
    var image = Image.new()
    var error = image.load_png_from_buffer(body)
    if error != OK:
        push_error("Couldn't load the image.")

    var texture = ImageTexture.new()
    texture.create_from_image(image)

    # Display the image in a TextureRect node.
    var texture_rect = TextureRect.new()
    add_child(texture_rect)
    texture_rect.texture = texture
</pre> </section> <section id="tutorials"> <h2>Tutorials</h2> <ul class="simple"> <li><a href="https://docs.godotengine.org/en/3.5/tutorials/networking/http_request_class.html"><span class="doc">Making HTTP requests</span></a></li> <li><a href="https://docs.godotengine.org/en/3.5/tutorials/networking/ssl_certificates.html"><span class="doc">SSL certificates</span></a></li> </ul> </section> <section id="properties"> <h2>Properties</h2> <table class="docutils align-default">   <tr>
<td><p><a href="class_int.html#class-int"><span class="std std-ref">int</span></a></p></td> <td><p><a href="#class-httprequest-property-body-size-limit"><span class="std std-ref">body_size_limit</span></a></p></td> <td><p><code>-1</code></p></td> </tr> <tr>
<td><p><a href="class_int.html#class-int"><span class="std std-ref">int</span></a></p></td> <td><p><a href="#class-httprequest-property-download-chunk-size"><span class="std std-ref">download_chunk_size</span></a></p></td> <td><p><code>65536</code></p></td> </tr> <tr>
<td><p><a href="class_string.html#class-string"><span class="std std-ref">String</span></a></p></td> <td><p><a href="#class-httprequest-property-download-file"><span class="std std-ref">download_file</span></a></p></td> <td><p><code>""</code></p></td> </tr> <tr>
<td><p><a href="class_int.html#class-int"><span class="std std-ref">int</span></a></p></td> <td><p><a href="#class-httprequest-property-max-redirects"><span class="std std-ref">max_redirects</span></a></p></td> <td><p><code>8</code></p></td> </tr> <tr>
<td><p><a href="class_float.html#class-float"><span class="std std-ref">float</span></a></p></td> <td><p><a href="#class-httprequest-property-timeout"><span class="std std-ref">timeout</span></a></p></td> <td><p><code>0.0</code></p></td> </tr> <tr>
<td><p><a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a></p></td> <td><p><a href="#class-httprequest-property-use-threads"><span class="std std-ref">use_threads</span></a></p></td> <td><p><code>false</code></p></td> </tr>  </table> </section> <section id="methods"> <h2>Methods</h2> <table class="docutils align-default">   <tr>
<td><p>void</p></td> <td><p><a href="#class-httprequest-method-cancel-request"><span class="std std-ref">cancel_request</span></a> <strong>(</strong> <strong>)</strong></p></td> </tr> <tr>
<td><p><a href="class_int.html#class-int"><span class="std std-ref">int</span></a></p></td> <td><p><a href="#class-httprequest-method-get-body-size"><span class="std std-ref">get_body_size</span></a> <strong>(</strong> <strong>)</strong> <abbr title="This method has no side effects. It doesn't modify any of the instance's member variables.">const</abbr></p></td> </tr> <tr>
<td><p><a href="class_int.html#class-int"><span class="std std-ref">int</span></a></p></td> <td><p><a href="#class-httprequest-method-get-downloaded-bytes"><span class="std std-ref">get_downloaded_bytes</span></a> <strong>(</strong> <strong>)</strong> <abbr title="This method has no side effects. It doesn't modify any of the instance's member variables.">const</abbr></p></td> </tr> <tr>
<td><p><a href="class_httpclient.html#enum-httpclient-status"><span class="std std-ref">Status</span></a></p></td> <td><p><a href="#class-httprequest-method-get-http-client-status"><span class="std std-ref">get_http_client_status</span></a> <strong>(</strong> <strong>)</strong> <abbr title="This method has no side effects. It doesn't modify any of the instance's member variables.">const</abbr></p></td> </tr> <tr>
<td><p><a href="class_%40globalscope.html#enum-globalscope-error"><span class="std std-ref">Error</span></a></p></td> <td><p><a href="#class-httprequest-method-request"><span class="std std-ref">request</span></a> <strong>(</strong> <a href="class_string.html#class-string"><span class="std std-ref">String</span></a> url, <a href="class_poolstringarray.html#class-poolstringarray"><span class="std std-ref">PoolStringArray</span></a> custom_headers=PoolStringArray( ), <a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> ssl_validate_domain=true, <a href="class_httpclient.html#enum-httpclient-method"><span class="std std-ref">Method</span></a> method=0, <a href="class_string.html#class-string"><span class="std std-ref">String</span></a> request_data="" <strong>)</strong></p></td> </tr> <tr>
<td><p><a href="class_%40globalscope.html#enum-globalscope-error"><span class="std std-ref">Error</span></a></p></td> <td><p><a href="#class-httprequest-method-request-raw"><span class="std std-ref">request_raw</span></a> <strong>(</strong> <a href="class_string.html#class-string"><span class="std std-ref">String</span></a> url, <a href="class_poolstringarray.html#class-poolstringarray"><span class="std std-ref">PoolStringArray</span></a> custom_headers=PoolStringArray( ), <a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> ssl_validate_domain=true, <a href="class_httpclient.html#enum-httpclient-method"><span class="std std-ref">Method</span></a> method=0, <a href="class_poolbytearray.html#class-poolbytearray"><span class="std std-ref">PoolByteArray</span></a> request_data_raw=PoolByteArray( ) <strong>)</strong></p></td> </tr> <tr>
<td><p>void</p></td> <td><p><a href="#class-httprequest-method-set-http-proxy"><span class="std std-ref">set_http_proxy</span></a> <strong>(</strong> <a href="class_string.html#class-string"><span class="std std-ref">String</span></a> host, <a href="class_int.html#class-int"><span class="std std-ref">int</span></a> port <strong>)</strong></p></td> </tr> <tr>
<td><p>void</p></td> <td><p><a href="#class-httprequest-method-set-https-proxy"><span class="std std-ref">set_https_proxy</span></a> <strong>(</strong> <a href="class_string.html#class-string"><span class="std std-ref">String</span></a> host, <a href="class_int.html#class-int"><span class="std std-ref">int</span></a> port <strong>)</strong></p></td> </tr>  </table> </section> <section id="signals"> <h2>Signals</h2> <h3 id="class-httprequest-signal-request-completed"><p>request_completed ( <a href="class_int.html#class-int"><span class="std std-ref">int</span></a> result, <a href="class_int.html#class-int"><span class="std std-ref">int</span></a> response_code, <a href="class_poolstringarray.html#class-poolstringarray"><span class="std std-ref">PoolStringArray</span></a> headers, <a href="class_poolbytearray.html#class-poolbytearray"><span class="std std-ref">PoolByteArray</span></a> body )</p></h3> <p>Emitted when a request is completed.</p> </section> <section id="enumerations"> <h2>Enumerations</h2> <p id="class-httprequest-constant-result-timeout">enum <strong id="enum-httprequest-result">Result</strong>:</p> <ul class="simple"> <li>
<strong>RESULT_SUCCESS</strong> = <strong>0</strong> --- Request successful.</li> <li>
<strong>RESULT_CHUNKED_BODY_SIZE_MISMATCH</strong> = <strong>1</strong>
</li> <li>
<strong>RESULT_CANT_CONNECT</strong> = <strong>2</strong> --- Request failed while connecting.</li> <li>
<strong>RESULT_CANT_RESOLVE</strong> = <strong>3</strong> --- Request failed while resolving.</li> <li>
<strong>RESULT_CONNECTION_ERROR</strong> = <strong>4</strong> --- Request failed due to connection (read/write) error.</li> <li>
<strong>RESULT_SSL_HANDSHAKE_ERROR</strong> = <strong>5</strong> --- Request failed on SSL handshake.</li> <li>
<strong>RESULT_NO_RESPONSE</strong> = <strong>6</strong> --- Request does not have a response (yet).</li> <li>
<strong>RESULT_BODY_SIZE_LIMIT_EXCEEDED</strong> = <strong>7</strong> --- Request exceeded its maximum size limit, see <a href="#class-httprequest-property-body-size-limit"><span class="std std-ref">body_size_limit</span></a>.</li> <li>
<strong>RESULT_REQUEST_FAILED</strong> = <strong>8</strong> --- Request failed (currently unused).</li> <li>
<strong>RESULT_DOWNLOAD_FILE_CANT_OPEN</strong> = <strong>9</strong> --- HTTPRequest couldn't open the download file.</li> <li>
<strong>RESULT_DOWNLOAD_FILE_WRITE_ERROR</strong> = <strong>10</strong> --- HTTPRequest couldn't write to the download file.</li> <li>
<strong>RESULT_REDIRECT_LIMIT_REACHED</strong> = <strong>11</strong> --- Request reached its maximum redirect limit, see <a href="#class-httprequest-property-max-redirects"><span class="std std-ref">max_redirects</span></a>.</li> <li>
<strong>RESULT_TIMEOUT</strong> = <strong>12</strong>
</li> </ul> </section> <section id="property-descriptions"> <h2>Property Descriptions</h2> <h3 id="class-httprequest-property-body-size-limit"><p><a href="class_int.html#class-int"><span class="std std-ref">int</span></a> body_size_limit</p></h3> <table class="docutils align-default">   <tr>
<td><p><em>Default</em></p></td> <td><p><code>-1</code></p></td> </tr> <tr>
<td><p><em>Setter</em></p></td> <td><p>set_body_size_limit(value)</p></td> </tr> <tr>
<td><p><em>Getter</em></p></td> <td><p>get_body_size_limit()</p></td> </tr>  </table> <p>Maximum allowed size for response bodies (<code>-1</code> means no limit). When only small files are expected, this can be used to prevent disallow receiving files that are too large, preventing potential denial of service attacks.</p>  <h3 id="class-httprequest-property-download-chunk-size"><p><a href="class_int.html#class-int"><span class="std std-ref">int</span></a> download_chunk_size</p></h3> <table class="docutils align-default">   <tr>
<td><p><em>Default</em></p></td> <td><p><code>65536</code></p></td> </tr> <tr>
<td><p><em>Setter</em></p></td> <td><p>set_download_chunk_size(value)</p></td> </tr> <tr>
<td><p><em>Getter</em></p></td> <td><p>get_download_chunk_size()</p></td> </tr>  </table> <p>The size of the buffer used and maximum bytes to read per iteration. See <a href="class_httpclient.html#class-httpclient-property-read-chunk-size"><span class="std std-ref">HTTPClient.read_chunk_size</span></a>.</p> <p>Set this to a lower value (e.g. 4096 for 4 KiB) when downloading small files to decrease memory usage at the cost of download speeds.</p>  <h3 id="class-httprequest-property-download-file"><p><a href="class_string.html#class-string"><span class="std std-ref">String</span></a> download_file</p></h3> <table class="docutils align-default">   <tr>
<td><p><em>Default</em></p></td> <td><p><code>""</code></p></td> </tr> <tr>
<td><p><em>Setter</em></p></td> <td><p>set_download_file(value)</p></td> </tr> <tr>
<td><p><em>Getter</em></p></td> <td><p>get_download_file()</p></td> </tr>  </table> <p>The file to download into. If set to a non-empty string, the request output will be written to the file located at the path. If a file already exists at the specified location, it will be overwritten as soon as body data begins to be received.</p> <p><strong>Note:</strong> Folders are not automatically created when the file is created. If <a href="#class-httprequest-property-download-file"><span class="std std-ref">download_file</span></a> points to a subfolder, it's recommended to create the necessary folders beforehand using <a href="class_directory.html#class-directory-method-make-dir-recursive"><span class="std std-ref">Directory.make_dir_recursive</span></a> to ensure the file can be written.</p>  <h3 id="class-httprequest-property-max-redirects"><p><a href="class_int.html#class-int"><span class="std std-ref">int</span></a> max_redirects</p></h3> <table class="docutils align-default">   <tr>
<td><p><em>Default</em></p></td> <td><p><code>8</code></p></td> </tr> <tr>
<td><p><em>Setter</em></p></td> <td><p>set_max_redirects(value)</p></td> </tr> <tr>
<td><p><em>Getter</em></p></td> <td><p>get_max_redirects()</p></td> </tr>  </table> <p>Maximum number of allowed redirects. This is used to prevent endless redirect loops.</p>  <h3 id="class-httprequest-property-timeout"><p><a href="class_float.html#class-float"><span class="std std-ref">float</span></a> timeout</p></h3> <table class="docutils align-default">   <tr>
<td><p><em>Default</em></p></td> <td><p><code>0.0</code></p></td> </tr> <tr>
<td><p><em>Setter</em></p></td> <td><p>set_timeout(value)</p></td> </tr> <tr>
<td><p><em>Getter</em></p></td> <td><p>get_timeout()</p></td> </tr>  </table> <p>If set to a value greater than <code>0.0</code> before the request starts, the HTTP request will time out after <code>timeout</code> seconds have passed and the request is not <em>completed</em> yet. For small HTTP requests such as REST API usage, set <a href="#class-httprequest-property-timeout"><span class="std std-ref">timeout</span></a> to a value between <code>10.0</code> and <code>30.0</code> to prevent the application from getting stuck if the request fails to get a response in a timely manner. For file downloads, leave this to <code>0.0</code> to prevent the download from failing if it takes too much time.</p>  <h3 id="class-httprequest-property-use-threads"><p><a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> use_threads</p></h3> <table class="docutils align-default">   <tr>
<td><p><em>Default</em></p></td> <td><p><code>false</code></p></td> </tr> <tr>
<td><p><em>Setter</em></p></td> <td><p>set_use_threads(value)</p></td> </tr> <tr>
<td><p><em>Getter</em></p></td> <td><p>is_using_threads()</p></td> </tr>  </table> <p>If <code>true</code>, multithreading is used to improve performance.</p> </section> <section id="method-descriptions"> <h2>Method Descriptions</h2> <h3 id="class-httprequest-method-cancel-request"><p>void cancel_request ( )</p></h3> <p>Cancels the current request.</p>  <h3 id="class-httprequest-method-get-body-size"><p><a href="class_int.html#class-int"><span class="std std-ref">int</span></a> get_body_size ( ) <abbr title="This method has no side effects. It doesn't modify any of the instance's member variables.">const</abbr></p></h3> <p>Returns the response body length.</p> <p><strong>Note:</strong> Some Web servers may not send a body length. In this case, the value returned will be <code>-1</code>. If using chunked transfer encoding, the body length will also be <code>-1</code>.</p>  <h3 id="class-httprequest-method-get-downloaded-bytes"><p><a href="class_int.html#class-int"><span class="std std-ref">int</span></a> get_downloaded_bytes ( ) <abbr title="This method has no side effects. It doesn't modify any of the instance's member variables.">const</abbr></p></h3> <p>Returns the amount of bytes this HTTPRequest downloaded.</p>  <h3 id="class-httprequest-method-get-http-client-status"><p><a href="class_httpclient.html#enum-httpclient-status"><span class="std std-ref">Status</span></a> get_http_client_status ( ) <abbr title="This method has no side effects. It doesn't modify any of the instance's member variables.">const</abbr></p></h3> <p>Returns the current status of the underlying <a href="class_httpclient.html#class-httpclient"><span class="std std-ref">HTTPClient</span></a>. See <a href="class_httpclient.html#enum-httpclient-status"><span class="std std-ref">Status</span></a>.</p>  <h3 id="class-httprequest-method-request"><p><a href="class_%40globalscope.html#enum-globalscope-error"><span class="std std-ref">Error</span></a> request ( <a href="class_string.html#class-string"><span class="std std-ref">String</span></a> url, <a href="class_poolstringarray.html#class-poolstringarray"><span class="std std-ref">PoolStringArray</span></a> custom_headers=PoolStringArray( ), <a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> ssl_validate_domain=true, <a href="class_httpclient.html#enum-httpclient-method"><span class="std std-ref">Method</span></a> method=0, <a href="class_string.html#class-string"><span class="std std-ref">String</span></a> request_data="" )</p></h3> <p>Creates request on the underlying <a href="class_httpclient.html#class-httpclient"><span class="std std-ref">HTTPClient</span></a>. If there is no configuration errors, it tries to connect using <a href="class_httpclient.html#class-httpclient-method-connect-to-host"><span class="std std-ref">HTTPClient.connect_to_host</span></a> and passes parameters onto <a href="class_httpclient.html#class-httpclient-method-request"><span class="std std-ref">HTTPClient.request</span></a>.</p> <p>Returns <a href="class_%40globalscope.html#class-globalscope-constant-ok"><span class="std std-ref">@GlobalScope.OK</span></a> if request is successfully created. (Does not imply that the server has responded), <a href="class_%40globalscope.html#class-globalscope-constant-err-unconfigured"><span class="std std-ref">@GlobalScope.ERR_UNCONFIGURED</span></a> if not in the tree, <a href="class_%40globalscope.html#class-globalscope-constant-err-busy"><span class="std std-ref">@GlobalScope.ERR_BUSY</span></a> if still processing previous request, <a href="class_%40globalscope.html#class-globalscope-constant-err-invalid-parameter"><span class="std std-ref">@GlobalScope.ERR_INVALID_PARAMETER</span></a> if given string is not a valid URL format, or <a href="class_%40globalscope.html#class-globalscope-constant-err-cant-connect"><span class="std std-ref">@GlobalScope.ERR_CANT_CONNECT</span></a> if not using thread and the <a href="class_httpclient.html#class-httpclient"><span class="std std-ref">HTTPClient</span></a> cannot connect to host.</p> <p><strong>Note:</strong> When <code>method</code> is <a href="class_httpclient.html#class-httpclient-constant-method-get"><span class="std std-ref">HTTPClient.METHOD_GET</span></a>, the payload sent via <code>request_data</code> might be ignored by the server or even cause the server to reject the request (check <a href="https://datatracker.ietf.org/doc/html/rfc7231#section-4.3.1">RFC 7231 section 4.3.1</a> for more details). As a workaround, you can send data as a query string in the URL. See <a href="class_string.html#class-string-method-http-escape"><span class="std std-ref">String.http_escape</span></a> for an example.</p>  <h3 id="class-httprequest-method-request-raw"><p><a href="class_%40globalscope.html#enum-globalscope-error"><span class="std std-ref">Error</span></a> request_raw ( <a href="class_string.html#class-string"><span class="std std-ref">String</span></a> url, <a href="class_poolstringarray.html#class-poolstringarray"><span class="std std-ref">PoolStringArray</span></a> custom_headers=PoolStringArray( ), <a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> ssl_validate_domain=true, <a href="class_httpclient.html#enum-httpclient-method"><span class="std std-ref">Method</span></a> method=0, <a href="class_poolbytearray.html#class-poolbytearray"><span class="std std-ref">PoolByteArray</span></a> request_data_raw=PoolByteArray( ) )</p></h3> <p>Creates request on the underlying <a href="class_httpclient.html#class-httpclient"><span class="std std-ref">HTTPClient</span></a> using a raw array of bytes for the request body. If there is no configuration errors, it tries to connect using <a href="class_httpclient.html#class-httpclient-method-connect-to-host"><span class="std std-ref">HTTPClient.connect_to_host</span></a> and passes parameters onto <a href="class_httpclient.html#class-httpclient-method-request"><span class="std std-ref">HTTPClient.request</span></a>.</p> <p>Returns <a href="class_%40globalscope.html#class-globalscope-constant-ok"><span class="std std-ref">@GlobalScope.OK</span></a> if request is successfully created. (Does not imply that the server has responded), <a href="class_%40globalscope.html#class-globalscope-constant-err-unconfigured"><span class="std std-ref">@GlobalScope.ERR_UNCONFIGURED</span></a> if not in the tree, <a href="class_%40globalscope.html#class-globalscope-constant-err-busy"><span class="std std-ref">@GlobalScope.ERR_BUSY</span></a> if still processing previous request, <a href="class_%40globalscope.html#class-globalscope-constant-err-invalid-parameter"><span class="std std-ref">@GlobalScope.ERR_INVALID_PARAMETER</span></a> if given string is not a valid URL format, or <a href="class_%40globalscope.html#class-globalscope-constant-err-cant-connect"><span class="std std-ref">@GlobalScope.ERR_CANT_CONNECT</span></a> if not using thread and the <a href="class_httpclient.html#class-httpclient"><span class="std std-ref">HTTPClient</span></a> cannot connect to host.</p>  <h3 id="class-httprequest-method-set-http-proxy"><p>void set_http_proxy ( <a href="class_string.html#class-string"><span class="std std-ref">String</span></a> host, <a href="class_int.html#class-int"><span class="std std-ref">int</span></a> port )</p></h3> <p>Sets the proxy server for HTTP requests.</p> <p>The proxy server is unset if <code>host</code> is empty or <code>port</code> is -1.</p>  <h3 id="class-httprequest-method-set-https-proxy"><p>void set_https_proxy ( <a href="class_string.html#class-string"><span class="std std-ref">String</span></a> host, <a href="class_int.html#class-int"><span class="std std-ref">int</span></a> port )</p></h3> <p>Sets the proxy server for HTTPS requests.</p> <p>The proxy server is unset if <code>host</code> is empty or <code>port</code> is -1.</p> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2014&ndash;2022 Juan Linietsky, Ariel Manzur, Godot Engine contributors<br>Licensed under the MIT License.<br>
    <a href="https://docs.godotengine.org/en/3.5/classes/class_httprequest.html" class="_attribution-link">https://docs.godotengine.org/en/3.5/classes/class_httprequest.html</a>
  </p>
</div>
