<h1>Scalar::Util</h1>   <h2><a id="toc">CONTENTS</a></h2> <ul> <li> <a class="text-decoration-none" href="#NAME">NAME</a> </li> <li> <a class="text-decoration-none" href="#SYNOPSIS">SYNOPSIS</a> </li> <li> <a class="text-decoration-none" href="#DESCRIPTION">DESCRIPTION</a> <ul> <li> <a class="text-decoration-none" href="#Core-Perl-builtin-Functions">Core Perl builtin Functions</a> </li> </ul> </li> <li> <a class="text-decoration-none" href="#FUNCTIONS-FOR-REFERENCES">FUNCTIONS FOR REFERENCES</a> <ul> <li> <a class="text-decoration-none" href="#blessed">blessed</a> </li> <li> <a class="text-decoration-none" href="#refaddr">refaddr</a> </li> <li> <a class="text-decoration-none" href="#reftype">reftype</a> </li> <li> <a class="text-decoration-none" href="#weaken">weaken</a> </li> <li> <a class="text-decoration-none" href="#unweaken">unweaken</a> </li> <li> <a class="text-decoration-none" href="#isweak">isweak</a> </li> </ul> </li> <li> <a class="text-decoration-none" href="#OTHER-FUNCTIONS">OTHER FUNCTIONS</a> <ul> <li> <a class="text-decoration-none" href="#dualvar">dualvar</a> </li> <li> <a class="text-decoration-none" href="#isdual">isdual</a> </li> <li> <a class="text-decoration-none" href="#isvstring">isvstring</a> </li> <li> <a class="text-decoration-none" href="#looks_like_number">looks_like_number</a> </li> <li> <a class="text-decoration-none" href="#openhandle">openhandle</a> </li> <li> <a class="text-decoration-none" href="#readonly">readonly</a> </li> <li> <a class="text-decoration-none" href="#set_prototype">set_prototype</a> </li> <li> <a class="text-decoration-none" href="#tainted">tainted</a> </li> </ul> </li> <li> <a class="text-decoration-none" href="#DIAGNOSTICS">DIAGNOSTICS</a> </li> <li> <a class="text-decoration-none" href="#KNOWN-BUGS">KNOWN BUGS</a> </li> <li> <a class="text-decoration-none" href="#SEE-ALSO">SEE ALSO</a> </li> <li> <a class="text-decoration-none" href="#COPYRIGHT">COPYRIGHT</a> </li> </ul> <h2 id="NAME">NAME</h2> <p>Scalar::Util - A selection of general-utility scalar subroutines</p> <h2 id="SYNOPSIS">SYNOPSIS</h2> <pre data-language="perl"><code>use Scalar::Util qw(blessed dualvar isdual readonly refaddr reftype
                    tainted weaken isweak isvstring looks_like_number
                    set_prototype);
                    # and other useful utils appearing below</code></pre> <h2 id="DESCRIPTION">DESCRIPTION</h2> <p><code>Scalar::Util</code> contains a selection of subroutines that people have expressed would be nice to have in the perl core, but the usage would not really be high enough to warrant the use of a keyword, and the size would be so small that being individual extensions would be wasteful.</p> <p>By default <code>Scalar::Util</code> does not export any subroutines.</p> <h3 id="Core-Perl-builtin-Functions">
Core Perl <code>builtin</code> Functions</h3> <p>Many functions in this module have served as the inspiration for a new experimental facility in recent versions of Perl. From various development versions, starting at 5.35.7, equivalent functions to many of these utilities are available in the <code>builtin::</code> package.</p> <pre data-language="perl"><code>use Scalar::Util qw(blessed);

$class = blessed $obj;

$class = builtin::blessed $obj;  # equivalent</code></pre> <p>For more information, see the documentation on <a href="builtin.html">builtin</a>.</p> <h2 id="FUNCTIONS-FOR-REFERENCES">
FUNCTIONS FOR REFERENCES</h2> <p>The following functions all perform some useful activity on reference values.</p> <h3 id="blessed">blessed</h3> <pre data-language="perl"><code>my $pkg = blessed( $ref );</code></pre> <p>If <code>$ref</code> is a blessed reference, the name of the package that it is blessed into is returned. Otherwise <code>undef</code> is returned.</p> <pre data-language="perl"><code>$scalar = "foo";
$class  = blessed $scalar;           # undef

$ref    = [];
$class  = blessed $ref;              # undef

$obj    = bless [], "Foo";
$class  = blessed $obj;              # "Foo"</code></pre> <p>Take care when using this function simply as a truth test (such as in <code>if(blessed $ref)...</code>) because the package name <code>"0"</code> is defined yet false.</p> <p><i>Since Perl version 5.35.7</i> an equivalent function is available as <code>builtin::blessed</code>.</p> <h3 id="refaddr">refaddr</h3> <pre data-language="perl"><code>my $addr = refaddr( $ref );</code></pre> <p>If <code>$ref</code> is reference, the internal memory address of the referenced value is returned as a plain integer. Otherwise <code>undef</code> is returned.</p> <pre data-language="perl"><code>$addr = refaddr "string";           # undef
$addr = refaddr \$var;              # eg 12345678
$addr = refaddr [];                 # eg 23456784

$obj  = bless {}, "Foo";
$addr = refaddr $obj;               # eg 88123488</code></pre> <p><i>Since Perl version 5.35.7</i> an equivalent function is available as <code>builtin::refaddr</code>.</p> <h3 id="reftype">reftype</h3> <pre data-language="perl"><code>my $type = reftype( $ref );</code></pre> <p>If <code>$ref</code> is a reference, the basic Perl type of the variable referenced is returned as a plain string (such as <code>ARRAY</code> or <code>HASH</code>). Otherwise <code>undef</code> is returned.</p> <pre data-language="perl"><code>$type = reftype "string";           # undef
$type = reftype \$var;              # SCALAR
$type = reftype [];                 # ARRAY

$obj  = bless {}, "Foo";
$type = reftype $obj;               # HASH</code></pre> <p>Note that for internal reasons, all precompiled regexps (<code>qr/.../</code>) are blessed references; thus <code>ref()</code> returns the package name string <code>"Regexp"</code> on these but <code>reftype()</code> will return the underlying C structure type of <code>"REGEXP"</code> in all capitals.</p> <p><i>Since Perl version 5.35.7</i> an equivalent function is available as <code>builtin::reftype</code>.</p> <h3 id="weaken">weaken</h3> <pre data-language="perl"><code>weaken( $ref );</code></pre> <p>The lvalue <code>$ref</code> will be turned into a weak reference. This means that it will not hold a reference count on the object it references. Also, when the reference count on that object reaches zero, the reference will be set to undef. This function mutates the lvalue passed as its argument and returns no value.</p> <p>This is useful for keeping copies of references, but you don't want to prevent the object being DESTROY-ed at its usual time.</p> <pre data-language="perl"><code>{
  my $var;
  $ref = \$var;
  weaken($ref);                     # Make $ref a weak reference
}
# $ref is now undef</code></pre> <p>Note that if you take a copy of a scalar with a weakened reference, the copy will be a strong reference.</p> <pre data-language="perl"><code>my $var;
my $foo = \$var;
weaken($foo);                       # Make $foo a weak reference
my $bar = $foo;                     # $bar is now a strong reference</code></pre> <p>This may be less obvious in other situations, such as <code>grep()</code>, for instance when grepping through a list of weakened references to objects that may have been destroyed already:</p> <pre data-language="perl"><code>@object = grep { defined } @object;</code></pre> <p>This will indeed remove all references to destroyed objects, but the remaining references to objects will be strong, causing the remaining objects to never be destroyed because there is now always a strong reference to them in the @object array.</p> <p><i>Since Perl version 5.35.7</i> an equivalent function is available as <code>builtin::weaken</code>.</p> <h3 id="unweaken">unweaken</h3> <pre data-language="perl"><code>unweaken( $ref );</code></pre> <p><i>Since version 1.36.</i></p> <p>The lvalue <code>REF</code> will be turned from a weak reference back into a normal (strong) reference again. This function mutates the lvalue passed as its argument and returns no value. This undoes the action performed by <a href="#weaken">"weaken"</a>.</p> <p>This function is slightly neater and more convenient than the otherwise-equivalent code</p> <pre data-language="perl"><code>my $tmp = $REF;
undef $REF;
$REF = $tmp;</code></pre> <p>(because in particular, simply assigning a weak reference back to itself does not work to unweaken it; <code>$REF = $REF</code> does not work).</p> <p><i>Since Perl version 5.35.7</i> an equivalent function is available as <code>builtin::unweaken</code>.</p> <h3 id="isweak">isweak</h3> <pre data-language="perl"><code>my $weak = isweak( $ref );</code></pre> <p>Returns true if <code>$ref</code> is a weak reference.</p> <pre data-language="perl"><code>$ref  = \$foo;
$weak = isweak($ref);               # false
weaken($ref);
$weak = isweak($ref);               # true</code></pre> <p><b>NOTE</b>: Copying a weak reference creates a normal, strong, reference.</p> <pre data-language="perl"><code>$copy = $ref;
$weak = isweak($copy);              # false</code></pre> <p><i>Since Perl version 5.35.7</i> an equivalent function is available as <code>builtin::is_weak</code>.</p> <h2 id="OTHER-FUNCTIONS">
OTHER FUNCTIONS</h2> <h3 id="dualvar">dualvar</h3> <pre data-language="perl"><code>my $var = dualvar( $num, $string );</code></pre> <p>Returns a scalar that has the value <code>$num</code> in a numeric context and the value <code>$string</code> in a string context.</p> <pre data-language="perl"><code>$foo = dualvar 10, "Hello";
$num = $foo + 2;                    # 12
$str = $foo . " world";             # Hello world</code></pre> <h3 id="isdual">isdual</h3> <pre data-language="perl"><code>my $dual = isdual( $var );</code></pre> <p><i>Since version 1.26.</i></p> <p>If <code>$var</code> is a scalar that has both numeric and string values, the result is true.</p> <pre data-language="perl"><code>$foo = dualvar 86, "Nix";
$dual = isdual($foo);               # true</code></pre> <p>Note that a scalar can be made to have both string and numeric content through standard operations:</p> <pre data-language="perl"><code>$foo = "10";
$dual = isdual($foo);               # false
$bar = $foo + 0;
$dual = isdual($foo);               # true</code></pre> <p>The <code>$!</code> variable is commonly dual-valued, though it is also magical in other ways:</p> <pre data-language="perl"><code>$! = 1;
$dual = isdual($!);                 # true
print("$!\n");                      # "Operation not permitted"</code></pre> <p><b>CAUTION</b>: This function is not as useful as it may seem. Dualvars are not a distinct concept in Perl, but a standard internal construct of all scalar values. Almost any value could be considered as a dualvar by this function through the course of normal operations.</p> <h3 id="isvstring">isvstring</h3> <pre data-language="perl"><code>my $vstring = isvstring( $var );</code></pre> <p>If <code>$var</code> is a scalar which was coded as a vstring, the result is true.</p> <pre data-language="perl"><code>$vs   = v49.46.48;
$fmt  = isvstring($vs) ? "%vd" : "%s"; #true
printf($fmt,$vs);</code></pre> <h3 id="looks_like_number">looks_like_number</h3> <pre data-language="perl"><code>my $isnum = looks_like_number( $var );</code></pre> <p>Returns true if perl thinks <code>$var</code> is a number. See <a href="perlapi.html#looks_like_number">"looks_like_number" in perlapi</a>.</p> <h3 id="openhandle">openhandle</h3> <pre data-language="perl"><code>my $fh = openhandle( $fh );</code></pre> <p>Returns <code>$fh</code> itself, if <code>$fh</code> may be used as a filehandle and is open, or if it is a tied handle. Otherwise <code>undef</code> is returned.</p> <pre data-language="perl"><code>$fh = openhandle(*STDIN);           # \*STDIN
$fh = openhandle(\*STDIN);          # \*STDIN
$fh = openhandle(*NOTOPEN);         # undef
$fh = openhandle("scalar");         # undef</code></pre> <h3 id="readonly">readonly</h3> <pre data-language="perl"><code>my $ro = readonly( $var );</code></pre> <p>Returns true if <code>$var</code> is readonly.</p> <pre data-language="perl"><code>sub foo { readonly($_[0]) }

$readonly = foo($bar);              # false
$readonly = foo(0);                 # true</code></pre> <h3 id="set_prototype">set_prototype</h3> <pre data-language="perl"><code>my $code = set_prototype( $code, $prototype );</code></pre> <p>Sets the prototype of the function given by the <code>$code</code> reference, or deletes it if <code>$prototype</code> is <code>undef</code>. Returns the <code>$code</code> reference itself.</p> <pre data-language="perl"><code>set_prototype \&amp;foo, '$$';</code></pre> <h3 id="tainted">tainted</h3> <pre data-language="perl"><code>my $t = tainted( $var );</code></pre> <p>Return true if <code>$var</code> is tainted.</p> <pre data-language="perl"><code>$taint = tainted("constant");       # false
$taint = tainted($ENV{PWD});        # true if running under -T</code></pre> <h2 id="DIAGNOSTICS">DIAGNOSTICS</h2> <p>Module use may give one of the following errors during import.</p> <dl> <dt id="Vstrings-are-not-implemented-in-this-version-of-perl">
Vstrings are not implemented in this version of perl</dt> <dd> <p>The version of perl that you are using does not implement Vstrings, to use <a href="#isvstring">"isvstring"</a> you will need to use a newer release of perl.</p> </dd> </dl> <h2 id="KNOWN-BUGS">
KNOWN BUGS</h2> <p>There is a bug in perl5.6.0 with UV's that are &gt;= 1&lt;&lt;31. This will show up as tests 8 and 9 of dualvar.t failing</p> <h2 id="SEE-ALSO">
SEE ALSO</h2> <p><a href="List::Util.html">List::Util</a></p> <h2 id="COPYRIGHT">COPYRIGHT</h2> <p>Copyright (c) 1997-2007 Graham Barr &lt;gbarr@pobox.com&gt;. All rights reserved. This program is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p> <p>Additionally <a href="#weaken">"weaken"</a> and <a href="#isweak">"isweak"</a> which are</p> <p>Copyright (c) 1999 Tuomas J. Lukka &lt;lukka@iki.fi&gt;. All rights reserved. This program is free software; you can redistribute it and/or modify it under the same terms as perl itself.</p> <p>Copyright (C) 2004, 2008 Matthijs van Duin. All rights reserved. Copyright (C) 2014 cPanel Inc. All rights reserved. This program is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1993&ndash;2023 Larry Wall and others<br>Licensed under the GNU General Public License version 1 or later, or the Artistic License.<br>The Perl logo is a trademark of the Perl Foundation.<br>
    <a href="https://perldoc.perl.org/5.38.0/Scalar::Util" class="_attribution-link">https://perldoc.perl.org/5.38.0/Scalar::Util</a>
  </p>
</div>
