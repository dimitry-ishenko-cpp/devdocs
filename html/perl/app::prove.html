<h1>App::Prove</h1>   <h2><a id="toc">CONTENTS</a></h2> <ul> <li> <a class="text-decoration-none" href="#NAME">NAME</a> </li> <li> <a class="text-decoration-none" href="#VERSION">VERSION</a> </li> <li> <a class="text-decoration-none" href="#DESCRIPTION">DESCRIPTION</a> </li> <li> <a class="text-decoration-none" href="#SYNOPSIS">SYNOPSIS</a> </li> <li> <a class="text-decoration-none" href="#METHODS">METHODS</a> <ul> <li> <a class="text-decoration-none" href="#Class-Methods">Class Methods</a> <ul> <li> <a class="text-decoration-none" href="#new">new</a> </li> <li> <a class="text-decoration-none" href="#state_class">state_class</a> </li> <li> <a class="text-decoration-none" href="#state_manager">state_manager</a> </li> <li> <a class="text-decoration-none" href="#add_rc_file">add_rc_file</a> </li> <li> <a class="text-decoration-none" href="#process_args">process_args</a> </li> <li> <a class="text-decoration-none" href="#run">run</a> </li> <li> <a class="text-decoration-none" href="#require_harness">require_harness</a> </li> <li> <a class="text-decoration-none" href="#print_version">print_version</a> </li> </ul> </li> <li> <a class="text-decoration-none" href="#Attributes">Attributes</a> </li> </ul> </li> <li> <a class="text-decoration-none" href="#PLUGINS">PLUGINS</a> <ul> <li> <a class="text-decoration-none" href="#Sample-Plugin">Sample Plugin</a> </li> </ul> </li> <li> <a class="text-decoration-none" href="#SEE-ALSO">SEE ALSO</a> </li> </ul> <h2 id="NAME">NAME</h2> <p>App::Prove - Implements the <code>prove</code> command.</p> <h2 id="VERSION">VERSION</h2> <p>Version 3.44</p> <h2 id="DESCRIPTION">DESCRIPTION</h2> <p><a href="Test::Harness.html">Test::Harness</a> provides a command, <code>prove</code>, which runs a TAP based test suite and prints a report. The <code>prove</code> command is a minimal wrapper around an instance of this module.</p> <h2 id="SYNOPSIS">SYNOPSIS</h2> <pre data-language="perl"><code>use App::Prove;

my $app = App::Prove-&gt;new;
$app-&gt;process_args(@ARGV);
$app-&gt;run;</code></pre> <h2 id="METHODS">METHODS</h2> <h3 id="Class-Methods">
Class Methods</h3> <h4 id="new"><code>new</code></h4> <p>Create a new <code>App::Prove</code>. Optionally a hash ref of attribute initializers may be passed.</p> <h4 id="state_class"><code>state_class</code></h4> <p>Getter/setter for the name of the class used for maintaining state. This class should either subclass from <code>App::Prove::State</code> or provide an identical interface.</p> <h4 id="state_manager"><code>state_manager</code></h4> <p>Getter/setter for the instance of the <code>state_class</code>.</p> <h4 id="add_rc_file"><code>add_rc_file</code></h4> <pre data-language="perl"><code>$prove-&gt;add_rc_file('myproj/.proverc');</code></pre> <p>Called before <code>process_args</code> to prepend the contents of an rc file to the options.</p> <h4 id="process_args"><code>process_args</code></h4> <pre data-language="perl"><code>$prove-&gt;process_args(@args);</code></pre> <p>Processes the command-line arguments. Attributes will be set appropriately. Any filenames may be found in the <code>argv</code> attribute.</p> <p>Dies on invalid arguments.</p> <h4 id="run"><code>run</code></h4> <p>Perform whatever actions the command line args specified. The <code>prove</code> command line tool consists of the following code:</p> <pre data-language="perl"><code>use App::Prove;

my $app = App::Prove-&gt;new;
$app-&gt;process_args(@ARGV);
exit( $app-&gt;run ? 0 : 1 );  # if you need the exit code</code></pre> <h4 id="require_harness"><code>require_harness</code></h4> <p>Load a harness replacement class.</p> <pre data-language="perl"><code>$prove-&gt;require_harness($for =&gt; $class_name);</code></pre> <h4 id="print_version"><code>print_version</code></h4> <p>Display the version numbers of the loaded <a href="TAP::Harness.html">TAP::Harness</a> and the current Perl.</p> <h3 id="Attributes">Attributes</h3> <p>After command line parsing the following attributes reflect the values of the corresponding command line switches. They may be altered before calling <code>run</code>.</p> <dl> <dt id="archive"><code>archive</code></dt>  <dt id="argv"><code>argv</code></dt>  <dt id="backwards"><code>backwards</code></dt>  <dt id="blib"><code>blib</code></dt>  <dt id="color"><code>color</code></dt>  <dt id="directives"><code>directives</code></dt>  <dt id="dry"><code>dry</code></dt>  <dt id="exec"><code>exec</code></dt>  <dt id="extensions"><code>extensions</code></dt>  <dt id="failures"><code>failures</code></dt>  <dt id="comments"><code>comments</code></dt>  <dt id="formatter"><code>formatter</code></dt>  <dt id="harness"><code>harness</code></dt>  <dt id="ignore_exit"><code>ignore_exit</code></dt>  <dt id="includes"><code>includes</code></dt>  <dt id="jobs"><code>jobs</code></dt>  <dt id="lib"><code>lib</code></dt>  <dt id="merge"><code>merge</code></dt>  <dt id="modules"><code>modules</code></dt>  <dt id="parse"><code>parse</code></dt>  <dt id="plugins"><code>plugins</code></dt>  <dt id="quiet"><code>quiet</code></dt>  <dt id="really_quiet"><code>really_quiet</code></dt>  <dt id="recurse"><code>recurse</code></dt>  <dt id="rules"><code>rules</code></dt>  <dt id="show_count"><code>show_count</code></dt>  <dt id="show_help"><code>show_help</code></dt>  <dt id="show_man"><code>show_man</code></dt>  <dt id="show_version"><code>show_version</code></dt>  <dt id="shuffle"><code>shuffle</code></dt>  <dt id="state"><code>state</code></dt>  <dt id="state_class1"><code>state_class</code></dt>  <dt id="taint_fail"><code>taint_fail</code></dt>  <dt id="taint_warn"><code>taint_warn</code></dt>  <dt id="test_args"><code>test_args</code></dt>  <dt id="timer"><code>timer</code></dt>  <dt id="verbose"><code>verbose</code></dt>  <dt id="warnings_fail"><code>warnings_fail</code></dt>  <dt id="warnings_warn"><code>warnings_warn</code></dt>  <dt id="tapversion"><code>tapversion</code></dt>  <dt id="trap"><code>trap</code></dt>  </dl> <h2 id="PLUGINS">PLUGINS</h2> <p><code>App::Prove</code> provides support for 3rd-party plugins. These are currently loaded at run-time, <i>after</i> arguments have been parsed (so you can not change the way arguments are processed, sorry), typically with the <code>-P<i>plugin</i></code> switch, eg:</p> <pre data-language="perl"><code class="plaintext">prove -PMyPlugin</code></pre> <p>This will search for a module named <code>App::Prove::Plugin::MyPlugin</code>, or failing that, <code>MyPlugin</code>. If the plugin can't be found, <code>prove</code> will complain &amp; exit.</p> <p>You can pass an argument to your plugin by appending an <code>=</code> after the plugin name, eg <code>-PMyPlugin=foo</code>. You can pass multiple arguments using commas:</p> <pre data-language="perl"><code class="plaintext">prove -PMyPlugin=foo,bar,baz</code></pre> <p>These are passed in to your plugin's <code>load()</code> class method (if it has one), along with a reference to the <code>App::Prove</code> object that is invoking your plugin:</p> <pre data-language="perl"><code>sub load {
    my ($class, $p) = @_;

    my @args = @{ $p-&gt;{args} };
    # @args will contain ( 'foo', 'bar', 'baz' )
    $p-&gt;{app_prove}-&gt;do_something;
    ...
}</code></pre> <p>Note that the user's arguments are also passed to your plugin's <code>import()</code> function as a list, eg:</p> <pre data-language="perl"><code>sub import {
    my ($class, @args) = @_;
    # @args will contain ( 'foo', 'bar', 'baz' )
    ...
}</code></pre> <p>This is for backwards compatibility, and may be deprecated in the future.</p> <h3 id="Sample-Plugin">
Sample Plugin</h3> <p>Here's a sample plugin, for your reference:</p> <pre data-language="perl"><code>package App::Prove::Plugin::Foo;

# Sample plugin, try running with:
# prove -PFoo=bar -r -j3
# prove -PFoo -Q
# prove -PFoo=bar,My::Formatter

use strict;
use warnings;

sub load {
    my ($class, $p) = @_;
    my @args = @{ $p-&gt;{args} };
    my $app  = $p-&gt;{app_prove};

    print "loading plugin: $class, args: ", join(', ', @args ), "\n";

    # turn on verbosity
    $app-&gt;verbose( 1 );

    # set the formatter?
    $app-&gt;formatter( $args[1] ) if @args &gt; 1;

    # print some of App::Prove's state:
    for my $attr (qw( jobs quiet really_quiet recurse verbose )) {
        my $val = $app-&gt;$attr;
        $val    = 'undef' unless defined( $val );
        print "$attr: $val\n";
    }

    return 1;
}

1;</code></pre> <h2 id="SEE-ALSO">
SEE ALSO</h2> <p><a href="prove.html">prove</a>, <a href="TAP::Harness.html">TAP::Harness</a></p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1993&ndash;2023 Larry Wall and others<br>Licensed under the GNU General Public License version 1 or later, or the Artistic License.<br>The Perl logo is a trademark of the Perl Foundation.<br>
    <a href="https://perldoc.perl.org/5.38.0/App::Prove" class="_attribution-link">https://perldoc.perl.org/5.38.0/App::Prove</a>
  </p>
</div>
