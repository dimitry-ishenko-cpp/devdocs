<h1> Class Client  </h1> <div class="description"> <p>The end user interface for doing HTTP requests.</p> <h3>Scoped clients</h3> <p>If you're doing multiple requests to the same hostname it's often convenient to use the constructor arguments to create a scoped client. This allows you to keep your code DRY and not repeat hostnames, authentication, and other options.</p> <h3>Doing requests</h3> <p>Once you've created an instance of Client you can do requests using several methods. Each corresponds to a different HTTP method.</p> <ul> <li>get()</li> <li>post()</li> <li>put()</li> <li>delete()</li> <li>patch()</li> </ul> <h3>Cookie management</h3> <p>Client will maintain cookies from the responses done with a client instance. These cookies will be automatically added to future requests to matching hosts. Cookies will respect the <code>Expires</code>, <code>Path</code> and <code>Domain</code> attributes. You can get the client's CookieCollection using cookies()</p> <p>You can use the 'cookieJar' constructor option to provide a custom cookie jar instance you've restored from cache/disk. By default, an empty instance of {@link \Cake\Http\Client\CookieCollection} will be created.</p> <h3>Sending request bodies</h3> <p>By default, any POST/PUT/PATCH/DELETE request with $data will send their data as <code>application/x-www-form-urlencoded</code> unless there are attached files. In that case <code>multipart/form-data</code> will be used.</p> <p>When sending request bodies you can use the <code>type</code> option to set the Content-Type for the request:</p> <pre data-language="php">$http-&gt;get('/users', [], ['type' =&gt; 'json']);</pre> <p>The <code>type</code> option sets both the <code>Content-Type</code> and <code>Accept</code> header, to the same mime type. When using <code>type</code> you can use either a full mime type or an alias. If you need different types in the Accept and Content-Type headers you should set them manually and not use <code>type</code></p> <h3>Using authentication</h3> <p>By using the <code>auth</code> key you can use authentication. The type sub option can be used to specify which authentication strategy you want to use. CakePHP comes with a few built-in strategies:</p> <ul> <li>Basic</li> <li>Digest</li> <li>Oauth</li> </ul> <h3>Using proxies</h3> <p>By using the <code>proxy</code> key you can set authentication credentials for a proxy if you need to use one. The type sub option can be used to specify which authentication strategy you want to use. CakePHP comes with built-in support for basic authentication.</p> </div> <div class="info"> <b>Namespace:</b> <a href="namespace-cake.http.html">Cake\Http</a><br> </div> <div class="section"> <h2>Property Summary</h2> <ul class="member-summary properties"> <li class="clearfix"> <div class="name"> <a href="#%24_adapter">$_adapter</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>Cake\Http\Client\AdapterInterface</code></div> <div class="description"> <p>Adapter for sending requests.</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_config">$_config</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>array&lt;string, mixed&gt;</code></div> <div class="description"> <p>Runtime config</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_configInitialized">$_configInitialized</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>bool</code></div> <div class="description"> <p>Whether the config property has already been configured with defaults</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_cookies">$_cookies</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>Cake\Http\Cookie\CookieCollection</code></div> <div class="description"> <p>List of cookies from responses made with this client.</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_defaultConfig">$_defaultConfig</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>array&lt;string, mixed&gt;</code></div> <div class="description"> <p>Default configuration for the client.</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_mockAdapter">$_mockAdapter</a> <span class="attributes"> <span class="label">protected</span> <span class="label">static</span> </span> </div> <div class="property-type"><code>Cake\Http\Client\Adapter\Mock|null</code></div> <div class="description"> <p>Mock adapter for stubbing requests in tests.</p> </div> </li> </ul> </div> <div class="section"> <h2>Method Summary</h2> <ul class="member-summary"> <li class="clearfix"> <h5 class="function-name"> <a href="#__construct()">__construct()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Create a new HTTP Client.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_addAuthentication()">_addAuthentication()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Add authentication headers to the request.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_addProxy()">_addProxy()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Add proxy authentication headers.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_configDelete()">_configDelete()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Deletes a single config key.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_configRead()">_configRead()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Reads a config key.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_configWrite()">_configWrite()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Writes a config key.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_createAuth()">_createAuth()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Create the authentication strategy.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_createRequest()">_createRequest()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Creates a new request object based on the parameters.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_doRequest()">_doRequest()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Helper method for doing non-GET requests.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_mergeOptions()">_mergeOptions()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Does a recursive merge of the parameter with the scope config.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_sendRequest()">_sendRequest()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Send a request without redirection.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_typeHeaders()">_typeHeaders()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Returns headers for Accept/Content-Type based on a short type or full mime-type.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#addCookie()">addCookie()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Adds a cookie to the Client collection.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#addMockResponse()">addMockResponse()</a> <span class="label">public</span> <span class="label">static</span> </h5> <div class="description detailed"> <p>Add a mocked response.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#buildUrl()">buildUrl()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Generate a URL based on the scoped client options.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#clearMockResponses()">clearMockResponses()</a> <span class="label">public</span> <span class="label">static</span> </h5> <div class="description detailed"> <p>Clear all mocked responses</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#configShallow()">configShallow()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Merge provided config with existing config. Unlike <code>config()</code> which does a recursive merge for nested keys, this method does a simple merge.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#cookies()">cookies()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Get the cookies stored in the Client.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#createFromUrl()">createFromUrl()</a> <span class="label">public</span> <span class="label">static</span> </h5> <div class="description detailed"> <p>Client instance returned is scoped to the domain, port, and scheme parsed from the passed URL string. The passed string must have a scheme and a domain. Optionally, if a port is included in the string, the port will be scoped too. If a path is included in the URL, the client instance will build urls with it prepended. Other parts of the url string are ignored.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#delete()">delete()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Do a DELETE request.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#get()">get()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Do a GET request.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#getConfig()">getConfig()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Returns the config.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#getConfigOrFail()">getConfigOrFail()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Returns the config for this specific key.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#head()">head()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Do a HEAD request.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#options()">options()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Do an OPTIONS request.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#patch()">patch()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Do a PATCH request.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#post()">post()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Do a POST request.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#put()">put()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Do a PUT request.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#send()">send()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Send a request.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#sendRequest()">sendRequest()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Sends a PSR-7 request and returns a PSR-7 response.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#setConfig()">setConfig()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Sets the config.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#trace()">trace()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Do a TRACE request.</p> </div> </li> </ul> <div class="section"> <h2>Method Detail</h2> <div class="method-detail">  <h3 class="method-name" id="__construct()"> __construct()   <span class="label">public</span> </h3> <pre data-language="php">__construct(array&lt;string, mixed&gt; $config = [])</pre> <div class="description detailed"> <p>Create a new HTTP Client.</p> <h3>Config options</h3> <p>You can set the following options when creating a client:</p> <ul> <li>host - The hostname to do requests on.</li> <li>port - The port to use.</li> <li>scheme - The default scheme/protocol to use. Defaults to http.</li> <li>basePath - A path to append to the domain to use. (/api/v1/)</li> <li>timeout - The timeout in seconds. Defaults to 30</li> <li>ssl_verify_peer - Whether SSL certificates should be validated. Defaults to true.</li> <li>ssl_verify_peer_name - Whether peer names should be validated. Defaults to true.</li> <li>ssl_verify_depth - The maximum certificate chain depth to traverse. Defaults to 5.</li> <li>ssl_verify_host - Verify that the certificate and hostname match. Defaults to true.</li> <li>redirect - Number of redirects to follow. Defaults to false.</li> <li>adapter - The adapter class name or instance. Defaults to \Cake\Http\Client\Adapter\Curl if <code>curl</code> extension is loaded else \Cake\Http\Client\Adapter\Stream.</li> <li>protocolVersion - The HTTP protocol version to use. Defaults to 1.1</li> <li>auth - The authentication credentials to use. If a <code>username</code> and <code>password</code> key are provided without a <code>type</code> key Basic authentication will be assumed. You can use the <code>type</code> key to define the authentication adapter classname to use. Short class names are resolved to the <code>Http\Client\Auth</code> namespace.</li> </ul> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>array&lt;string, mixed&gt;</code> <var>$config</var> <span class="label">optional</span> </dt> <dd><p>Config options for scoped clients.</p></dd> </dl> </div> <h4>Throws</h4> <div class="list"> <code>InvalidArgumentException</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_addAuthentication()"> _addAuthentication()   <span class="label">protected</span> </h3> <pre data-language="php">_addAuthentication(Cake\Http\Client\Request $request, array&lt;string, mixed&gt; $options): Cake\Http\Client\Request</pre> <div class="description detailed"> <p>Add authentication headers to the request.</p> <p>Uses the authentication type to choose the correct strategy and use its methods to add headers.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>Cake\Http\Client\Request</code> <var>$request</var> </dt> <dd><p>The request to modify.</p></dd> <dt> <code>array&lt;string, mixed&gt;</code> <var>$options</var> </dt> <dd><p>Array of options containing the 'auth' key.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>Cake\Http\Client\Request</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_addProxy()"> _addProxy()   <span class="label">protected</span> </h3> <pre data-language="php">_addProxy(Cake\Http\Client\Request $request, array&lt;string, mixed&gt; $options): Cake\Http\Client\Request</pre> <div class="description detailed"> <p>Add proxy authentication headers.</p> <p>Uses the authentication type to choose the correct strategy and use its methods to add headers.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>Cake\Http\Client\Request</code> <var>$request</var> </dt> <dd><p>The request to modify.</p></dd> <dt> <code>array&lt;string, mixed&gt;</code> <var>$options</var> </dt> <dd><p>Array of options containing the 'proxy' key.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>Cake\Http\Client\Request</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_configDelete()"> _configDelete()   <span class="label">protected</span> </h3> <pre data-language="php">_configDelete(string $key): void</pre> <div class="description detailed"> <p>Deletes a single config key.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$key</var> </dt> <dd><p>Key to delete.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> <h4>Throws</h4> <div class="list"> <code>Cake\Core\Exception\CakeException</code><br> if attempting to clobber existing config </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_configRead()"> _configRead()   <span class="label">protected</span> </h3> <pre data-language="php">_configRead(string|null $key): mixed</pre> <div class="description detailed"> <p>Reads a config key.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string|null</code> <var>$key</var> </dt> <dd><p>Key to read.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>mixed</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_configWrite()"> _configWrite()   <span class="label">protected</span> </h3> <pre data-language="php">_configWrite(array&lt;string, mixed&gt;|string $key, mixed $value, string|bool $merge = false): void</pre> <div class="description detailed"> <p>Writes a config key.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>array&lt;string, mixed&gt;|string</code> <var>$key</var> </dt> <dd><p>Key to write to.</p></dd> <dt> <code>mixed</code> <var>$value</var> </dt> <dd><p>Value to write.</p></dd> <dt> <code>string|bool</code> <var>$merge</var> <span class="label">optional</span> </dt> <dd><p>True to merge recursively, 'shallow' for simple merge, false to overwrite, defaults to false.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> <h4>Throws</h4> <div class="list"> <code>Cake\Core\Exception\CakeException</code><br> if attempting to clobber existing config </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_createAuth()"> _createAuth()   <span class="label">protected</span> </h3> <pre data-language="php">_createAuth(array $auth, array&lt;string, mixed&gt; $options): object</pre> <div class="description detailed"> <p>Create the authentication strategy.</p> <p>Use the configuration options to create the correct authentication strategy handler.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>array</code> <var>$auth</var> </dt> <dd><p>The authentication options to use.</p></dd> <dt> <code>array&lt;string, mixed&gt;</code> <var>$options</var> </dt> <dd><p>The overall request options to use.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>object</code><br> </div> <h4>Throws</h4> <div class="list"> <code>Cake\Core\Exception\CakeException</code><br> when an invalid strategy is chosen. </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_createRequest()"> _createRequest()   <span class="label">protected</span> </h3> <pre data-language="php">_createRequest(string $method, string $url, mixed $data, array&lt;string, mixed&gt; $options): Cake\Http\Client\Request</pre> <div class="description detailed"> <p>Creates a new request object based on the parameters.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$method</var> </dt> <dd><p>HTTP method name.</p></dd> <dt> <code>string</code> <var>$url</var> </dt> <dd><p>The url including query string.</p></dd> <dt> <code>mixed</code> <var>$data</var> </dt> <dd><p>The request body.</p></dd> <dt> <code>array&lt;string, mixed&gt;</code> <var>$options</var> </dt> <dd><p>The options to use. Contains auth, proxy, etc.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>Cake\Http\Client\Request</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_doRequest()"> _doRequest()   <span class="label">protected</span> </h3> <pre data-language="php">_doRequest(string $method, string $url, mixed $data, array&lt;string, mixed&gt; $options): Cake\Http\Client\Response</pre> <div class="description detailed"> <p>Helper method for doing non-GET requests.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$method</var> </dt> <dd><p>HTTP method.</p></dd> <dt> <code>string</code> <var>$url</var> </dt> <dd><p>URL to request.</p></dd> <dt> <code>mixed</code> <var>$data</var> </dt> <dd><p>The request body.</p></dd> <dt> <code>array&lt;string, mixed&gt;</code> <var>$options</var> </dt> <dd><p>The options to use. Contains auth, proxy, etc.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>Cake\Http\Client\Response</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_mergeOptions()"> _mergeOptions()   <span class="label">protected</span> </h3> <pre data-language="php">_mergeOptions(array&lt;string, mixed&gt; $options): array</pre> <div class="description detailed"> <p>Does a recursive merge of the parameter with the scope config.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>array&lt;string, mixed&gt;</code> <var>$options</var> </dt> <dd><p>Options to merge.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>array</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_sendRequest()"> _sendRequest()   <span class="label">protected</span> </h3> <pre data-language="php">_sendRequest(Psr\Http\Message\RequestInterface $request, array&lt;string, mixed&gt; $options): Cake\Http\Client\Response</pre> <div class="description detailed"> <p>Send a request without redirection.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>Psr\Http\Message\RequestInterface</code> <var>$request</var> </dt> <dd><p>The request to send.</p></dd> <dt> <code>array&lt;string, mixed&gt;</code> <var>$options</var> </dt> <dd><p>Additional options to use.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>Cake\Http\Client\Response</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_typeHeaders()"> _typeHeaders()   <span class="label">protected</span> </h3> <pre data-language="php">_typeHeaders(string $type): array&lt;string, string&gt;</pre> <div class="description detailed"> <p>Returns headers for Accept/Content-Type based on a short type or full mime-type.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$type</var> </dt> <dd><p>short type alias or full mimetype.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>array&lt;string, string&gt;</code><br> </div> <h4>Throws</h4> <div class="list"> <code>Cake\Core\Exception\CakeException</code><br> When an unknown type alias is used. </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="addCookie()"> addCookie()   <span class="label">public</span> </h3> <pre data-language="php">addCookie(Cake\Http\Cookie\CookieInterface $cookie): $this</pre> <div class="description detailed"> <p>Adds a cookie to the Client collection.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>Cake\Http\Cookie\CookieInterface</code> <var>$cookie</var> </dt> <dd><p>Cookie object.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>$this</code><br> </div> <h4>Throws</h4> <div class="list"> <code>InvalidArgumentException</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="addMockResponse()"> addMockResponse()   <span class="label">public</span> <span class="label">static</span> </h3> <pre data-language="php">addMockResponse(string $method, string $url, Cake\Http\Client\Response $response, array&lt;string, mixed&gt; $options = []): void</pre> <div class="description detailed"> <p>Add a mocked response.</p> <p>Mocked responses are stored in an adapter that is called <em>before</em> the network adapter is called.</p> <h3>Matching Requests</h3> <p>TODO finish this.</p> <h3>Options</h3> <ul> <li>
<code>match</code> An additional closure to match requests with.</li> </ul> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$method</var> </dt> <dd><p>The HTTP method being mocked.</p></dd> <dt> <code>string</code> <var>$url</var> </dt> <dd><p>The URL being matched. See above for examples.</p></dd> <dt> <code>Cake\Http\Client\Response</code> <var>$response</var> </dt> <dd><p>The response that matches the request.</p></dd> <dt> <code>array&lt;string, mixed&gt;</code> <var>$options</var> <span class="label">optional</span> </dt> <dd><p>See above.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="buildUrl()"> buildUrl()   <span class="label">public</span> </h3> <pre data-language="php">buildUrl(string $url, array|string $query = [], array&lt;string, mixed&gt; $options = []): string</pre> <div class="description detailed"> <p>Generate a URL based on the scoped client options.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$url</var> </dt> <dd><p>Either a full URL or just the path.</p></dd> <dt> <code>array|string</code> <var>$query</var> <span class="label">optional</span> </dt> <dd><p>The query data for the URL.</p></dd> <dt> <code>array&lt;string, mixed&gt;</code> <var>$options</var> <span class="label">optional</span> </dt> <dd><p>The config options stored with Client::config()</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>string</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="clearMockResponses()"> clearMockResponses()   <span class="label">public</span> <span class="label">static</span> </h3> <pre data-language="php">clearMockResponses(): void</pre> <div class="description detailed"> <p>Clear all mocked responses</p> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="configShallow()"> configShallow()   <span class="label">public</span> </h3> <pre data-language="php">configShallow(array&lt;string, mixed&gt;|string $key, mixed|null $value = null): $this</pre> <div class="description detailed"> <p>Merge provided config with existing config. Unlike <code>config()</code> which does a recursive merge for nested keys, this method does a simple merge.</p> <p>Setting a specific value:</p> <pre data-language="php">$this-&gt;configShallow('key', $value);</pre> <p>Setting a nested value:</p> <pre data-language="php">$this-&gt;configShallow('some.nested.key', $value);</pre> <p>Updating multiple config settings at the same time:</p> <pre data-language="php">$this-&gt;configShallow(['one' =&gt; 'value', 'another' =&gt; 'value']);</pre> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>array&lt;string, mixed&gt;|string</code> <var>$key</var> </dt> <dd><p>The key to set, or a complete array of configs.</p></dd> <dt> <code>mixed|null</code> <var>$value</var> <span class="label">optional</span> </dt> <dd><p>The value to set.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>$this</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="cookies()"> cookies()   <span class="label">public</span> </h3> <pre data-language="php">cookies(): Cake\Http\Cookie\CookieCollection</pre> <div class="description detailed"> <p>Get the cookies stored in the Client.</p> <h4>Returns</h4> <div class="list"> <code>Cake\Http\Cookie\CookieCollection</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="createFromUrl()"> createFromUrl()   <span class="label">public</span> <span class="label">static</span> </h3> <pre data-language="php">createFromUrl(string $url): static</pre> <div class="description detailed"> <p>Client instance returned is scoped to the domain, port, and scheme parsed from the passed URL string. The passed string must have a scheme and a domain. Optionally, if a port is included in the string, the port will be scoped too. If a path is included in the URL, the client instance will build urls with it prepended. Other parts of the url string are ignored.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$url</var> </dt> <dd><p>A string URL e.g. <a href="https://example.com">https://example.com</a></p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>static</code><br> </div> <h4>Throws</h4> <div class="list"> <code>InvalidArgumentException</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="delete()"> delete()   <span class="label">public</span> </h3> <pre data-language="php">delete(string $url, mixed $data = [], array&lt;string, mixed&gt; $options = []): Cake\Http\Client\Response</pre> <div class="description detailed"> <p>Do a DELETE request.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$url</var> </dt> <dd><p>The url or path you want to request.</p></dd> <dt> <code>mixed</code> <var>$data</var> <span class="label">optional</span> </dt> <dd><p>The request data you want to send.</p></dd> <dt> <code>array&lt;string, mixed&gt;</code> <var>$options</var> <span class="label">optional</span> </dt> <dd><p>Additional options for the request.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>Cake\Http\Client\Response</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="get()"> get()   <span class="label">public</span> </h3> <pre data-language="php">get(string $url, array|string $data = [], array&lt;string, mixed&gt; $options = []): Cake\Http\Client\Response</pre> <div class="description detailed"> <p>Do a GET request.</p> <p>The $data argument supports a special <code>_content</code> key for providing a request body in a GET request. This is generally not used, but services like ElasticSearch use this feature.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$url</var> </dt> <dd><p>The url or path you want to request.</p></dd> <dt> <code>array|string</code> <var>$data</var> <span class="label">optional</span> </dt> <dd><p>The query data you want to send.</p></dd> <dt> <code>array&lt;string, mixed&gt;</code> <var>$options</var> <span class="label">optional</span> </dt> <dd><p>Additional options for the request.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>Cake\Http\Client\Response</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="getConfig()"> getConfig()   <span class="label">public</span> </h3> <pre data-language="php">getConfig(string|null $key = null, mixed $default = null): mixed</pre> <div class="description detailed"> <p>Returns the config.</p> <h3>Usage</h3> <p>Reading the whole config:</p> <pre data-language="php">$this-&gt;getConfig();</pre> <p>Reading a specific value:</p> <pre data-language="php">$this-&gt;getConfig('key');</pre> <p>Reading a nested value:</p> <pre data-language="php">$this-&gt;getConfig('some.nested.key');</pre> <p>Reading with default value:</p> <pre data-language="php">$this-&gt;getConfig('some-key', 'default-value');</pre> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string|null</code> <var>$key</var> <span class="label">optional</span> </dt> <dd><p>The key to get or null for the whole config.</p></dd> <dt> <code>mixed</code> <var>$default</var> <span class="label">optional</span> </dt> <dd><p>The return value when the key does not exist.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>mixed</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="getConfigOrFail()"> getConfigOrFail()   <span class="label">public</span> </h3> <pre data-language="php">getConfigOrFail(string $key): mixed</pre> <div class="description detailed"> <p>Returns the config for this specific key.</p> <p>The config value for this key must exist, it can never be null.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$key</var> </dt> <dd><p>The key to get.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>mixed</code><br> </div> <h4>Throws</h4> <div class="list"> <code>InvalidArgumentException</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="head()"> head()   <span class="label">public</span> </h3> <pre data-language="php">head(string $url, array $data = [], array&lt;string, mixed&gt; $options = []): Cake\Http\Client\Response</pre> <div class="description detailed"> <p>Do a HEAD request.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$url</var> </dt> <dd><p>The url or path you want to request.</p></dd> <dt> <code>array</code> <var>$data</var> <span class="label">optional</span> </dt> <dd><p>The query string data you want to send.</p></dd> <dt> <code>array&lt;string, mixed&gt;</code> <var>$options</var> <span class="label">optional</span> </dt> <dd><p>Additional options for the request.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>Cake\Http\Client\Response</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="options()"> options()   <span class="label">public</span> </h3> <pre data-language="php">options(string $url, mixed $data = [], array&lt;string, mixed&gt; $options = []): Cake\Http\Client\Response</pre> <div class="description detailed"> <p>Do an OPTIONS request.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$url</var> </dt> <dd><p>The url or path you want to request.</p></dd> <dt> <code>mixed</code> <var>$data</var> <span class="label">optional</span> </dt> <dd><p>The request data you want to send.</p></dd> <dt> <code>array&lt;string, mixed&gt;</code> <var>$options</var> <span class="label">optional</span> </dt> <dd><p>Additional options for the request.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>Cake\Http\Client\Response</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="patch()"> patch()   <span class="label">public</span> </h3> <pre data-language="php">patch(string $url, mixed $data = [], array&lt;string, mixed&gt; $options = []): Cake\Http\Client\Response</pre> <div class="description detailed"> <p>Do a PATCH request.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$url</var> </dt> <dd><p>The url or path you want to request.</p></dd> <dt> <code>mixed</code> <var>$data</var> <span class="label">optional</span> </dt> <dd><p>The request data you want to send.</p></dd> <dt> <code>array&lt;string, mixed&gt;</code> <var>$options</var> <span class="label">optional</span> </dt> <dd><p>Additional options for the request.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>Cake\Http\Client\Response</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="post()"> post()   <span class="label">public</span> </h3> <pre data-language="php">post(string $url, mixed $data = [], array&lt;string, mixed&gt; $options = []): Cake\Http\Client\Response</pre> <div class="description detailed"> <p>Do a POST request.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$url</var> </dt> <dd><p>The url or path you want to request.</p></dd> <dt> <code>mixed</code> <var>$data</var> <span class="label">optional</span> </dt> <dd><p>The post data you want to send.</p></dd> <dt> <code>array&lt;string, mixed&gt;</code> <var>$options</var> <span class="label">optional</span> </dt> <dd><p>Additional options for the request.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>Cake\Http\Client\Response</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="put()"> put()   <span class="label">public</span> </h3> <pre data-language="php">put(string $url, mixed $data = [], array&lt;string, mixed&gt; $options = []): Cake\Http\Client\Response</pre> <div class="description detailed"> <p>Do a PUT request.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$url</var> </dt> <dd><p>The url or path you want to request.</p></dd> <dt> <code>mixed</code> <var>$data</var> <span class="label">optional</span> </dt> <dd><p>The request data you want to send.</p></dd> <dt> <code>array&lt;string, mixed&gt;</code> <var>$options</var> <span class="label">optional</span> </dt> <dd><p>Additional options for the request.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>Cake\Http\Client\Response</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="send()"> send()   <span class="label">public</span> </h3> <pre data-language="php">send(Psr\Http\Message\RequestInterface $request, array&lt;string, mixed&gt; $options = []): Cake\Http\Client\Response</pre> <div class="description detailed"> <p>Send a request.</p> <p>Used internally by other methods, but can also be used to send handcrafted Request objects.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>Psr\Http\Message\RequestInterface</code> <var>$request</var> </dt> <dd><p>The request to send.</p></dd> <dt> <code>array&lt;string, mixed&gt;</code> <var>$options</var> <span class="label">optional</span> </dt> <dd><p>Additional options to use.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>Cake\Http\Client\Response</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="sendRequest()"> sendRequest()   <span class="label">public</span> </h3> <pre data-language="php">sendRequest(RequestInterface $request): Psr\Http\Message\ResponseInterface</pre> <div class="description detailed"> <p>Sends a PSR-7 request and returns a PSR-7 response.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>RequestInterface</code> <var>$request</var> </dt> <dd><p>Request instance.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>Psr\Http\Message\ResponseInterface</code><br> </div> <h4>Throws</h4> <div class="list"> <code>Psr\Http\Client\ClientExceptionInterface</code><br> If an error happens while processing the request. </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="setConfig()"> setConfig()   <span class="label">public</span> </h3> <pre data-language="php">setConfig(array&lt;string, mixed&gt;|string $key, mixed|null $value = null, bool $merge = true): $this</pre> <div class="description detailed"> <p>Sets the config.</p> <h3>Usage</h3> <p>Setting a specific value:</p> <pre data-language="php">$this-&gt;setConfig('key', $value);</pre> <p>Setting a nested value:</p> <pre data-language="php">$this-&gt;setConfig('some.nested.key', $value);</pre> <p>Updating multiple config settings at the same time:</p> <pre data-language="php">$this-&gt;setConfig(['one' =&gt; 'value', 'another' =&gt; 'value']);</pre> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>array&lt;string, mixed&gt;|string</code> <var>$key</var> </dt> <dd><p>The key to set, or a complete array of configs.</p></dd> <dt> <code>mixed|null</code> <var>$value</var> <span class="label">optional</span> </dt> <dd><p>The value to set.</p></dd> <dt> <code>bool</code> <var>$merge</var> <span class="label">optional</span> </dt> <dd><p>Whether to recursively merge or overwrite existing config, defaults to true.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>$this</code><br> </div> <h4>Throws</h4> <div class="list"> <code>Cake\Core\Exception\CakeException</code><br> When trying to set a key that is invalid. </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="trace()"> trace()   <span class="label">public</span> </h3> <pre data-language="php">trace(string $url, mixed $data = [], array&lt;string, mixed&gt; $options = []): Cake\Http\Client\Response</pre> <div class="description detailed"> <p>Do a TRACE request.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$url</var> </dt> <dd><p>The url or path you want to request.</p></dd> <dt> <code>mixed</code> <var>$data</var> <span class="label">optional</span> </dt> <dd><p>The request data you want to send.</p></dd> <dt> <code>array&lt;string, mixed&gt;</code> <var>$options</var> <span class="label">optional</span> </dt> <dd><p>Additional options for the request.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>Cake\Http\Client\Response</code><br> </div> </div> </div> </div> <div class="section"> <h2>Property Detail</h2> <div class="property-detail">  <h3 class="property-name" id="$_adapter"> <var>$_adapter</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>Adapter for sending requests.</p> <h4>Type</h4> <div class="list"> <code>Cake\Http\Client\AdapterInterface</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_config"> <var>$_config</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>Runtime config</p> <h4>Type</h4> <div class="list"> <code>array&lt;string, mixed&gt;</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_configInitialized"> <var>$_configInitialized</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>Whether the config property has already been configured with defaults</p> <h4>Type</h4> <div class="list"> <code>bool</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_cookies"> <var>$_cookies</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>List of cookies from responses made with this client.</p> <p>Cookies are indexed by the cookie's domain or request host name.</p> <h4>Type</h4> <div class="list"> <code>Cake\Http\Cookie\CookieCollection</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_defaultConfig"> <var>$_defaultConfig</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>Default configuration for the client.</p> <h4>Type</h4> <div class="list"> <code>array&lt;string, mixed&gt;</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_mockAdapter"> <var>$_mockAdapter</var>   <span class="label">protected</span> <span class="label">static</span> </h3> <div class="description detailed"> <p>Mock adapter for stubbing requests in tests.</p> <h4>Type</h4> <div class="list"> <code>Cake\Http\Client\Adapter\Mock|null</code><br> </div> </div> </div> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;present The Cake Software Foundation, Inc.<br>Licensed under the MIT License.<br>CakePHP is a registered trademark of Cake Software Foundation, Inc.<br>We are not endorsed by or affiliated with CakePHP.<br>
    <a href="https://api.cakephp.org/4.4/class-Cake.Http.Client.html" class="_attribution-link">https://api.cakephp.org/4.4/class-Cake.Http.Client.html</a>
  </p>
</div>
