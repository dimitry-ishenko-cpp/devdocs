<h1> Class ConnectionManager  </h1> <div class="description"> <p>Manages and loads instances of Connection</p> <p>Provides an interface to loading and creating connection objects. Acts as a registry for the connections defined in an application.</p> <p>Provides an interface for loading and enumerating connections defined in config/app.php</p> </div> <div class="info"> <b>Namespace:</b> <a href="namespace-cake.datasource.html">Cake\Datasource</a><br> </div> <div class="section"> <h2>Property Summary</h2> <ul class="member-summary properties"> <li class="clearfix"> <div class="name"> <a href="#%24_aliasMap">$_aliasMap</a> <span class="attributes"> <span class="label">protected</span> <span class="label">static</span> </span> </div> <div class="property-type"><code>array&lt;string&gt;</code></div> <div class="description"> <p>A map of connection aliases.</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_config">$_config</a> <span class="attributes"> <span class="label">protected</span> <span class="label">static</span> </span> </div> <div class="property-type"><code>array&lt;string, mixed&gt;</code></div> <div class="description"> <p>Configuration sets.</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_dsnClassMap">$_dsnClassMap</a> <span class="attributes"> <span class="label">protected</span> <span class="label">static</span> </span> </div> <div class="property-type"><code>array&lt;string, string&gt;</code></div> <div class="description"> <p>An array mapping url schemes to fully qualified driver class names</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_registry">$_registry</a> <span class="attributes"> <span class="label">protected</span> <span class="label">static</span> </span> </div> <div class="property-type"><code>Cake\Datasource\ConnectionRegistry</code></div> <div class="description"> <p>The ConnectionRegistry used by the manager.</p> </div> </li> </ul> </div> <div class="section"> <h2>Method Summary</h2> <ul class="member-summary"> <li class="clearfix"> <h5 class="function-name"> <a href="#alias()">alias()</a> <span class="label">public</span> <span class="label">static</span> </h5> <div class="description detailed"> <p>Set one or more connection aliases.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#configured()">configured()</a> <span class="label">public</span> <span class="label">static</span> </h5> <div class="description detailed"> <p>Returns an array containing the named configurations</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#drop()">drop()</a> <span class="label">public</span> <span class="label">static</span> </h5> <div class="description detailed"> <p>Drops a constructed adapter.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#dropAlias()">dropAlias()</a> <span class="label">public</span> <span class="label">static</span> </h5> <div class="description detailed"> <p>Drop an alias.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#get()">get()</a> <span class="label">public</span> <span class="label">static</span> </h5> <div class="description detailed"> <p>Get a connection.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#getConfig()">getConfig()</a> <span class="label">public</span> <span class="label">static</span> </h5> <div class="description detailed"> <p>Reads existing configuration.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#getConfigOrFail()">getConfigOrFail()</a> <span class="label">public</span> <span class="label">static</span> </h5> <div class="description detailed"> <p>Reads existing configuration for a specific key.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#getDsnClassMap()">getDsnClassMap()</a> <span class="label">public</span> <span class="label">static</span> </h5> <div class="description detailed"> <p>Returns the DSN class map for this class.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#parseDsn()">parseDsn()</a> <span class="label">public</span> <span class="label">static</span> </h5> <div class="description detailed"> <p>Parses a DSN into a valid connection configuration</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#setConfig()">setConfig()</a> <span class="label">public</span> <span class="label">static</span> </h5> <div class="description detailed"> <p>Configure a new connection object.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#setDsnClassMap()">setDsnClassMap()</a> <span class="label">public</span> <span class="label">static</span> </h5> <div class="description detailed"> <p>Updates the DSN class map for this class.</p> </div> </li> </ul> <div class="section"> <h2>Method Detail</h2> <div class="method-detail">  <h3 class="method-name" id="alias()"> alias()   <span class="label">public</span> <span class="label">static</span> </h3> <pre data-language="php">alias(string $source, string $alias): void</pre> <div class="description detailed"> <p>Set one or more connection aliases.</p> <p>Connection aliases allow you to rename active connections without overwriting the aliased connection. This is most useful in the test-suite for replacing connections with their test variant.</p> <p>Defined aliases will take precedence over normal connection names. For example, if you alias 'default' to 'test', fetching 'default' will always return the 'test' connection as long as the alias is defined.</p> <p>You can remove aliases with ConnectionManager::dropAlias().</p> <h3>Usage</h3> <pre data-language="php">// Make 'things' resolve to 'test_things' connection
ConnectionManager::alias('test_things', 'things');</pre> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$source</var> </dt> <dd><p>The existing connection to alias.</p></dd> <dt> <code>string</code> <var>$alias</var> </dt> <dd><p>The alias name that resolves to <code>$source</code>.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="configured()"> configured()   <span class="label">public</span> <span class="label">static</span> </h3> <pre data-language="php">configured(): array&lt;string&gt;</pre> <div class="description detailed"> <p>Returns an array containing the named configurations</p> <h4>Returns</h4> <div class="list"> <code>array&lt;string&gt;</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="drop()"> drop()   <span class="label">public</span> <span class="label">static</span> </h3> <pre data-language="php">drop(string $config): bool</pre> <div class="description detailed"> <p>Drops a constructed adapter.</p> <p>If you wish to modify an existing configuration, you should drop it, change configuration and then re-add it.</p> <p>If the implementing objects supports a <code>$_registry</code> object the named configuration will also be unloaded from the registry.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$config</var> </dt> <dd><p>An existing configuration you wish to remove.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>bool</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="dropAlias()"> dropAlias()   <span class="label">public</span> <span class="label">static</span> </h3> <pre data-language="php">dropAlias(string $alias): void</pre> <div class="description detailed"> <p>Drop an alias.</p> <p>Removes an alias from ConnectionManager. Fetching the aliased connection may fail if there is no other connection with that name.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$alias</var> </dt> <dd><p>The connection alias to drop</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="get()"> get()   <span class="label">public</span> <span class="label">static</span> </h3> <pre data-language="php">get(string $name, bool $useAliases = true): Cake\Datasource\ConnectionInterface</pre> <div class="description detailed"> <p>Get a connection.</p> <p>If the connection has not been constructed an instance will be added to the registry. This method will use any aliases that have been defined. If you want the original unaliased connections pass <code>false</code> as second parameter.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$name</var> </dt> <dd><p>The connection name.</p></dd> <dt> <code>bool</code> <var>$useAliases</var> <span class="label">optional</span> </dt> <dd><p>Set to false to not use aliased connections.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>Cake\Datasource\ConnectionInterface</code><br> </div> <h4>Throws</h4> <div class="list"> <code>Cake\Datasource\Exception\MissingDatasourceConfigException</code><br> When config data is missing. </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="getConfig()"> getConfig()   <span class="label">public</span> <span class="label">static</span> </h3> <pre data-language="php">getConfig(string $key): mixed|null</pre> <div class="description detailed"> <p>Reads existing configuration.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$key</var> </dt> <dd><p>The name of the configuration.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>mixed|null</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="getConfigOrFail()"> getConfigOrFail()   <span class="label">public</span> <span class="label">static</span> </h3> <pre data-language="php">getConfigOrFail(string $key): mixed</pre> <div class="description detailed"> <p>Reads existing configuration for a specific key.</p> <p>The config value for this key must exist, it can never be null.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$key</var> </dt> <dd><p>The name of the configuration.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>mixed</code><br> </div> <h4>Throws</h4> <div class="list"> <code>InvalidArgumentException</code><br> If value does not exist. </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="getDsnClassMap()"> getDsnClassMap()   <span class="label">public</span> <span class="label">static</span> </h3> <pre data-language="php">getDsnClassMap(): array&lt;string, string&gt;</pre> <div class="description detailed"> <p>Returns the DSN class map for this class.</p> <h4>Returns</h4> <div class="list"> <code>array&lt;string, string&gt;</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="parseDsn()"> parseDsn()   <span class="label">public</span> <span class="label">static</span> </h3> <pre data-language="php">parseDsn(string $config): array&lt;string, mixed&gt;</pre> <div class="description detailed"> <p>Parses a DSN into a valid connection configuration</p> <p>This method allows setting a DSN using formatting similar to that used by PEAR::DB. The following is an example of its usage:</p> <pre data-language="php">$dsn = 'mysql://user:pass@localhost/database';
$config = ConnectionManager::parseDsn($dsn);

$dsn = 'Cake\Database\Driver\Mysql://localhost:3306/database?className=Cake\Database\Connection';
$config = ConnectionManager::parseDsn($dsn);

$dsn = 'Cake\Database\Connection://localhost:3306/database?driver=Cake\Database\Driver\Mysql';
$config = ConnectionManager::parseDsn($dsn);</pre> <p>For all classes, the value of <code>scheme</code> is set as the value of both the <code>className</code> and <code>driver</code> unless they have been otherwise specified.</p> <p>Note that query-string arguments are also parsed and set as values in the returned configuration.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$config</var> </dt> <dd><p>The DSN string to convert to a configuration array</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>array&lt;string, mixed&gt;</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="setConfig()"> setConfig()   <span class="label">public</span> <span class="label">static</span> </h3> <pre data-language="php">setConfig(array&lt;string, mixed&gt;|string $key, object|array&lt;string, mixed&gt;|null $config = null): void</pre> <div class="description detailed"> <p>Configure a new connection object.</p> <p>The connection will not be constructed until it is first used.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>array&lt;string, mixed&gt;|string</code> <var>$key</var> </dt> <dd><p>The name of the connection config, or an array of multiple configs.</p></dd> <dt> <code>object|array&lt;string, mixed&gt;|null</code> <var>$config</var> <span class="label">optional</span> </dt> <dd><p>An array of name =&gt; config data for adapter.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> <h4>Throws</h4> <div class="list"> <code>Cake\Core\Exception\CakeException</code><br> When trying to modify an existing config. </div> <h4>See Also</h4> <div class="list"> \Cake\Core\StaticConfigTrait::config() </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="setDsnClassMap()"> setDsnClassMap()   <span class="label">public</span> <span class="label">static</span> </h3> <pre data-language="php">setDsnClassMap(array&lt;string, string&gt; $map): void</pre> <div class="description detailed"> <p>Updates the DSN class map for this class.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>array&lt;string, string&gt;</code> <var>$map</var> </dt> <dd><p>Additions/edits to the class map to apply.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> </div> <div class="section"> <h2>Property Detail</h2> <div class="property-detail">  <h3 class="property-name" id="$_aliasMap"> <var>$_aliasMap</var>   <span class="label">protected</span> <span class="label">static</span> </h3> <div class="description detailed"> <p>A map of connection aliases.</p> <h4>Type</h4> <div class="list"> <code>array&lt;string&gt;</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_config"> <var>$_config</var>   <span class="label">protected</span> <span class="label">static</span> </h3> <div class="description detailed"> <p>Configuration sets.</p> <h4>Type</h4> <div class="list"> <code>array&lt;string, mixed&gt;</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_dsnClassMap"> <var>$_dsnClassMap</var>   <span class="label">protected</span> <span class="label">static</span> </h3> <div class="description detailed"> <p>An array mapping url schemes to fully qualified driver class names</p> <h4>Type</h4> <div class="list"> <code>array&lt;string, string&gt;</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_registry"> <var>$_registry</var>   <span class="label">protected</span> <span class="label">static</span> </h3> <div class="description detailed"> <p>The ConnectionRegistry used by the manager.</p> <h4>Type</h4> <div class="list"> <code>Cake\Datasource\ConnectionRegistry</code><br> </div> </div> </div> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;present The Cake Software Foundation, Inc.<br>Licensed under the MIT License.<br>CakePHP is a registered trademark of Cake Software Foundation, Inc.<br>We are not endorsed by or affiliated with CakePHP.<br>
    <a href="https://api.cakephp.org/4.4/class-Cake.Datasource.ConnectionManager.html" class="_attribution-link">https://api.cakephp.org/4.4/class-Cake.Datasource.ConnectionManager.html</a>
  </p>
</div>
