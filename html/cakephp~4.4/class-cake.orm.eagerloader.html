<h1> Class EagerLoader  </h1> <div class="description"> <p>Exposes the methods for storing the associations that should be eager loaded for a table once a query is provided and delegates the job of creating the required joins and decorating the results so that those associations can be part of the result set.</p> </div> <div class="info"> <b>Namespace:</b> <a href="namespace-cake.orm.html">Cake\ORM</a><br> </div> <div class="section"> <h2>Property Summary</h2> <ul class="member-summary properties"> <li class="clearfix"> <div class="name"> <a href="#%24_aliasList">$_aliasList</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>array</code></div> <div class="description"> <p>Contains a list of the association names that are to be eagerly loaded</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_autoFields">$_autoFields</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>bool</code></div> <div class="description"> <p>Controls whether fields from associated tables will be eagerly loaded. When set to false, no fields will be loaded from associations.</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_containOptions">$_containOptions</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>array&lt;string, int&gt;</code></div> <div class="description"> <p>List of options accepted by associations in contain() index by key for faster access</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_containments">$_containments</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>array&lt;string, mixed&gt;</code></div> <div class="description"> <p>Nested array describing the association to be fetched and the options to apply for each of them, if any</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_joinsMap">$_joinsMap</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>array&lt;string,Cake\ORM\EagerLoadable&gt;</code></div> <div class="description"> <p>A map of table aliases pointing to the association objects they represent for the query.</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_loadExternal">$_loadExternal</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>arrayCake\ORM\EagerLoadable&gt;</code></div> <div class="description"> <p>A list of associations that should be loaded with a separate query</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_matching">$_matching</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>Cake\ORM\EagerLoader|null</code></div> <div class="description"> <p>Another EagerLoader instance that will be used for 'matching' associations.</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_normalized">$_normalized</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>Cake\ORM\EagerLoadable|arrayCake\ORM\EagerLoadable&gt;|null</code></div> <div class="description"> <p>Contains a nested array with the compiled containments tree This is a normalized version of the user provided containments array.</p> </div> </li> </ul> </div> <div class="section"> <h2>Method Summary</h2> <ul class="member-summary"> <li class="clearfix"> <h5 class="function-name"> <a href="#__clone()">__clone()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Handles cloning eager loaders and eager loadables.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_buildAssociationsMap()">_buildAssociationsMap()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>An internal method to build a map which is used for the return value of the associationsMap() method.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_collectKeys()">_collectKeys()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Helper function used to return the keys from the query records that will be used to eagerly load associations.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_correctStrategy()">_correctStrategy()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Changes the association fetching strategy if required because of duplicate under the same direct associations chain</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_fixStrategies()">_fixStrategies()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Iterates over the joinable aliases list and corrects the fetching strategies in order to avoid aliases collision in the generated queries.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_groupKeys()">_groupKeys()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Helper function used to iterate a statement and extract the columns defined in $collectKeys</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_normalizeContain()">_normalizeContain()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Auxiliary function responsible for fully normalizing deep associations defined using <code>contain()</code></p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_reformatContain()">_reformatContain()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Formats the containments array so that associations are always set as keys in the array. This function merges the original associations array with the new associations provided</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_resolveJoins()">_resolveJoins()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Helper function used to compile a list of all associations that can be joined in the query.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#addToJoinsMap()">addToJoinsMap()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Registers a table alias, typically loaded as a join in a query, as belonging to an association. This helps hydrators know what to do with the columns coming from such joined table.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#associationsMap()">associationsMap()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Returns an array having as keys a dotted path of associations that participate in this eager loader. The values of the array will contain the following keys</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#attachAssociations()">attachAssociations()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Modifies the passed query to apply joins or any other transformation required in order to eager load the associations described in the <code>contain</code> array. This method will not modify the query for loading external associations, i.e. those that cannot be loaded without executing a separate query.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#attachableAssociations()">attachableAssociations()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Returns an array with the associations that can be fetched using a single query, the array keys are the association aliases and the values will contain an array with Cake\ORM\EagerLoadable objects.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#clearContain()">clearContain()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Remove any existing non-matching based containments.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#contain()">contain()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Sets the list of associations that should be eagerly loaded along for a specific table using when a query is provided. The list of associated tables passed to this method must have been previously set as associations using the Table API.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#disableAutoFields()">disableAutoFields()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Disable auto loading fields of contained associations.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#enableAutoFields()">enableAutoFields()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Sets whether contained associations will load fields automatically.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#externalAssociations()">externalAssociations()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Returns an array with the associations that need to be fetched using a separate query, each array value will contain a {@link \Cake\ORM\EagerLoadable} object.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#getContain()">getContain()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Gets the list of associations that should be eagerly loaded along for a specific table using when a query is provided. The list of associated tables passed to this method must have been previously set as associations using the Table API.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#getMatching()">getMatching()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Returns the current tree of associations to be matched.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#isAutoFieldsEnabled()">isAutoFieldsEnabled()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Gets whether contained associations will load fields automatically.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#loadExternal()">loadExternal()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Decorates the passed statement object in order to inject data from associations that cannot be joined directly.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#normalized()">normalized()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Returns the fully normalized array of associations that should be eagerly loaded for a table. The normalized array will restructure the original array by sorting all associations under one key and special options under another.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#setMatching()">setMatching()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Adds a new association to the list that will be used to filter the results of any given query based on the results of finding records for that association. You can pass a dot separated path of associations to this method as its first parameter, this will translate in setting all those associations with the <code>matching</code> option.</p> </div> </li> </ul> <div class="section"> <h2>Method Detail</h2> <div class="method-detail">  <h3 class="method-name" id="__clone()"> __clone()   <span class="label">public</span> </h3> <pre data-language="php">__clone(): void</pre> <div class="description detailed"> <p>Handles cloning eager loaders and eager loadables.</p> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_buildAssociationsMap()"> _buildAssociationsMap()   <span class="label">protected</span> </h3> <pre data-language="php">_buildAssociationsMap(array $map, arrayCake\ORM\EagerLoadable&gt; $level, bool $matching = false): array</pre> <div class="description detailed"> <p>An internal method to build a map which is used for the return value of the associationsMap() method.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>array</code> <var>$map</var> </dt> <dd><p>An initial array for the map.</p></dd> <dt> <code>arrayCake\ORM\EagerLoadable&gt;</code> <var>$level</var> </dt> <dd><p>An array of EagerLoadable instances.</p></dd> <dt> <code>bool</code> <var>$matching</var> <span class="label">optional</span> </dt> <dd><p>Whether it is an association loaded through <code>matching()</code>.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>array</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_collectKeys()"> _collectKeys()   <span class="label">protected</span> </h3> <pre data-language="php">_collectKeys(arrayCake\ORM\EagerLoadable&gt; $external, Cake\ORM\Query $query, Cake\Database\StatementInterface $statement): array</pre> <div class="description detailed"> <p>Helper function used to return the keys from the query records that will be used to eagerly load associations.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>arrayCake\ORM\EagerLoadable&gt;</code> <var>$external</var> </dt> <dd><p>the list of external associations to be loaded</p></dd> <dt> <code>Cake\ORM\Query</code> <var>$query</var> </dt> <dd><p>The query from which the results where generated</p></dd> <dt> <code>Cake\Database\StatementInterface</code> <var>$statement</var> </dt> <dd><p>The statement to work on</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>array</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_correctStrategy()"> _correctStrategy()   <span class="label">protected</span> </h3> <pre data-language="php">_correctStrategy(Cake\ORM\EagerLoadable $loadable): void</pre> <div class="description detailed"> <p>Changes the association fetching strategy if required because of duplicate under the same direct associations chain</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>Cake\ORM\EagerLoadable</code> <var>$loadable</var> </dt> <dd><p>The association config</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_fixStrategies()"> _fixStrategies()   <span class="label">protected</span> </h3> <pre data-language="php">_fixStrategies(): void</pre> <div class="description detailed"> <p>Iterates over the joinable aliases list and corrects the fetching strategies in order to avoid aliases collision in the generated queries.</p> <p>This function operates on the array references that were generated by the _normalizeContain() function.</p> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_groupKeys()"> _groupKeys()   <span class="label">protected</span> </h3> <pre data-language="php">_groupKeys(Cake\Database\Statement\BufferedStatement $statement, array&lt;string, array&gt; $collectKeys): array</pre> <div class="description detailed"> <p>Helper function used to iterate a statement and extract the columns defined in $collectKeys</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>Cake\Database\Statement\BufferedStatement</code> <var>$statement</var> </dt> <dd><p>The statement to read from.</p></dd> <dt> <code>array&lt;string, array&gt;</code> <var>$collectKeys</var> </dt> <dd><p>The keys to collect</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>array</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_normalizeContain()"> _normalizeContain()   <span class="label">protected</span> </h3> <pre data-language="php">_normalizeContain(Cake\ORM\Table $parent, string $alias, array&lt;string, mixed&gt; $options, array&lt;string, mixed&gt; $paths): Cake\ORM\EagerLoadable</pre> <div class="description detailed"> <p>Auxiliary function responsible for fully normalizing deep associations defined using <code>contain()</code></p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>Cake\ORM\Table</code> <var>$parent</var> </dt> <dd><p>owning side of the association</p></dd> <dt> <code>string</code> <var>$alias</var> </dt> <dd><p>name of the association to be loaded</p></dd> <dt> <code>array&lt;string, mixed&gt;</code> <var>$options</var> </dt> <dd><p>list of extra options to use for this association</p></dd> <dt> <code>array&lt;string, mixed&gt;</code> <var>$paths</var> </dt> <dd><p>An array with two values, the first one is a list of dot separated strings representing associations that lead to this <code>$alias</code> in the chain of associations to be loaded. The second value is the path to follow in entities' properties to fetch a record of the corresponding association.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>Cake\ORM\EagerLoadable</code><br> </div> <h4>Throws</h4> <div class="list"> <code>InvalidArgumentException</code><br> When containments refer to associations that do not exist. </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_reformatContain()"> _reformatContain()   <span class="label">protected</span> </h3> <pre data-language="php">_reformatContain(array $associations, array $original): array</pre> <div class="description detailed"> <p>Formats the containments array so that associations are always set as keys in the array. This function merges the original associations array with the new associations provided</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>array</code> <var>$associations</var> </dt> <dd><p>user provided containments array</p></dd> <dt> <code>array</code> <var>$original</var> </dt> <dd><p>The original containments array to merge with the new one</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>array</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_resolveJoins()"> _resolveJoins()   <span class="label">protected</span> </h3> <pre data-language="php">_resolveJoins(arrayCake\ORM\EagerLoadable&gt; $associations, arrayCake\ORM\EagerLoadable&gt; $matching = []): arrayCake\ORM\EagerLoadable&gt;</pre> <div class="description detailed"> <p>Helper function used to compile a list of all associations that can be joined in the query.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>arrayCake\ORM\EagerLoadable&gt;</code> <var>$associations</var> </dt> <dd><p>list of associations from which to obtain joins.</p></dd> <dt> <code>arrayCake\ORM\EagerLoadable&gt;</code> <var>$matching</var> <span class="label">optional</span> </dt> <dd><p>list of associations that should be forcibly joined.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>arrayCake\ORM\EagerLoadable&gt;</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="addToJoinsMap()"> addToJoinsMap()   <span class="label">public</span> </h3> <pre data-language="php">addToJoinsMap(string $alias, Cake\ORM\Association $assoc, bool $asMatching = false, string|null $targetProperty = null): void</pre> <div class="description detailed"> <p>Registers a table alias, typically loaded as a join in a query, as belonging to an association. This helps hydrators know what to do with the columns coming from such joined table.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$alias</var> </dt> <dd><p>The table alias as it appears in the query.</p></dd> <dt> <code>Cake\ORM\Association</code> <var>$assoc</var> </dt> <dd><p>The association object the alias represents; will be normalized</p></dd> <dt> <code>bool</code> <var>$asMatching</var> <span class="label">optional</span> </dt> <dd><p>Whether this join results should be treated as a 'matching' association.</p></dd> <dt> <code>string|null</code> <var>$targetProperty</var> <span class="label">optional</span> </dt> <dd><p>The property name where the results of the join should be nested at. If not passed, the default property for the association will be used.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="associationsMap()"> associationsMap()   <span class="label">public</span> </h3> <pre data-language="php">associationsMap(Cake\ORM\Table $table): array</pre> <div class="description detailed"> <p>Returns an array having as keys a dotted path of associations that participate in this eager loader. The values of the array will contain the following keys</p> <ul> <li>alias: The association alias</li> <li>instance: The association instance</li> <li>canBeJoined: Whether the association will be loaded using a JOIN</li> <li>entityClass: The entity that should be used for hydrating the results</li> <li>nestKey: A dotted path that can be used to correctly insert the data into the results.</li> <li>matching: Whether it is an association loaded through <code>matching()</code>.</li> </ul> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>Cake\ORM\Table</code> <var>$table</var> </dt> <dd><p>The table containing the association that will be normalized</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>array</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="attachAssociations()"> attachAssociations()   <span class="label">public</span> </h3> <pre data-language="php">attachAssociations(Cake\ORM\Query $query, Cake\ORM\Table $repository, bool $includeFields): void</pre> <div class="description detailed"> <p>Modifies the passed query to apply joins or any other transformation required in order to eager load the associations described in the <code>contain</code> array. This method will not modify the query for loading external associations, i.e. those that cannot be loaded without executing a separate query.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>Cake\ORM\Query</code> <var>$query</var> </dt> <dd><p>The query to be modified</p></dd> <dt> <code>Cake\ORM\Table</code> <var>$repository</var> </dt> <dd><p>The repository containing the associations</p></dd> <dt> <code>bool</code> <var>$includeFields</var> </dt> <dd><p>whether to append all fields from the associations to the passed query. This can be overridden according to the settings defined per association in the containments array</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="attachableAssociations()"> attachableAssociations()   <span class="label">public</span> </h3> <pre data-language="php">attachableAssociations(Cake\ORM\Table $repository): arrayCake\ORM\EagerLoadable&gt;</pre> <div class="description detailed"> <p>Returns an array with the associations that can be fetched using a single query, the array keys are the association aliases and the values will contain an array with Cake\ORM\EagerLoadable objects.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>Cake\ORM\Table</code> <var>$repository</var> </dt> <dd><p>The table containing the associations to be attached</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>arrayCake\ORM\EagerLoadable&gt;</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="clearContain()"> clearContain()   <span class="label">public</span> </h3> <pre data-language="php">clearContain(): void</pre> <div class="description detailed"> <p>Remove any existing non-matching based containments.</p> <p>This will reset/clear out any contained associations that were not added via matching().</p> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="contain()"> contain()   <span class="label">public</span> </h3> <pre data-language="php">contain(array|string $associations, callable|null $queryBuilder = null): array</pre> <div class="description detailed"> <p>Sets the list of associations that should be eagerly loaded along for a specific table using when a query is provided. The list of associated tables passed to this method must have been previously set as associations using the Table API.</p> <p>Associations can be arbitrarily nested using dot notation or nested arrays, this allows this object to calculate joins or any additional queries that must be executed to bring the required associated data.</p> <p>Accepted options per passed association:</p> <ul> <li>foreignKey: Used to set a different field to match both tables, if set to false no join conditions will be generated automatically</li> <li>fields: An array with the fields that should be fetched from the association</li> <li>queryBuilder: Equivalent to passing a callable instead of an options array</li> <li>matching: Whether to inform the association class that it should filter the main query by the results fetched by that class.</li> <li>joinType: For joinable associations, the SQL join type to use.</li> <li>strategy: The loading strategy to use (join, select, subquery)</li> </ul> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>array|string</code> <var>$associations</var> </dt> <dd><p>list of table aliases to be queried. When this method is called multiple times it will merge previous list with the new one.</p></dd> <dt> <code>callable|null</code> <var>$queryBuilder</var> <span class="label">optional</span> </dt> <dd><p>The query builder callable</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>array</code><br> </div> <h4>Throws</h4> <div class="list"> <code>InvalidArgumentException</code><br> When using $queryBuilder with an array of $associations </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="disableAutoFields()"> disableAutoFields()   <span class="label">public</span> </h3> <pre data-language="php">disableAutoFields(): $this</pre> <div class="description detailed"> <p>Disable auto loading fields of contained associations.</p> <h4>Returns</h4> <div class="list"> <code>$this</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="enableAutoFields()"> enableAutoFields()   <span class="label">public</span> </h3> <pre data-language="php">enableAutoFields(bool $enable = true): $this</pre> <div class="description detailed"> <p>Sets whether contained associations will load fields automatically.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>bool</code> <var>$enable</var> <span class="label">optional</span> </dt> <dd><p>The value to set.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>$this</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="externalAssociations()"> externalAssociations()   <span class="label">public</span> </h3> <pre data-language="php">externalAssociations(Cake\ORM\Table $repository): arrayCake\ORM\EagerLoadable&gt;</pre> <div class="description detailed"> <p>Returns an array with the associations that need to be fetched using a separate query, each array value will contain a {@link \Cake\ORM\EagerLoadable} object.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>Cake\ORM\Table</code> <var>$repository</var> </dt> <dd><p>The table containing the associations to be loaded</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>arrayCake\ORM\EagerLoadable&gt;</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="getContain()"> getContain()   <span class="label">public</span> </h3> <pre data-language="php">getContain(): array</pre> <div class="description detailed"> <p>Gets the list of associations that should be eagerly loaded along for a specific table using when a query is provided. The list of associated tables passed to this method must have been previously set as associations using the Table API.</p> <h4>Returns</h4> <div class="list"> <code>array</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="getMatching()"> getMatching()   <span class="label">public</span> </h3> <pre data-language="php">getMatching(): array</pre> <div class="description detailed"> <p>Returns the current tree of associations to be matched.</p> <h4>Returns</h4> <div class="list"> <code>array</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="isAutoFieldsEnabled()"> isAutoFieldsEnabled()   <span class="label">public</span> </h3> <pre data-language="php">isAutoFieldsEnabled(): bool</pre> <div class="description detailed"> <p>Gets whether contained associations will load fields automatically.</p> <h4>Returns</h4> <div class="list"> <code>bool</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="loadExternal()"> loadExternal()   <span class="label">public</span> </h3> <pre data-language="php">loadExternal(Cake\ORM\Query $query, Cake\Database\StatementInterface $statement): Cake\Database\StatementInterface</pre> <div class="description detailed"> <p>Decorates the passed statement object in order to inject data from associations that cannot be joined directly.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>Cake\ORM\Query</code> <var>$query</var> </dt> <dd><p>The query for which to eager load external associations</p></dd> <dt> <code>Cake\Database\StatementInterface</code> <var>$statement</var> </dt> <dd><p>The statement created after executing the $query</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>Cake\Database\StatementInterface</code><br> </div> <h4>Throws</h4> <div class="list"> <code>RuntimeException</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="normalized()"> normalized()   <span class="label">public</span> </h3> <pre data-language="php">normalized(Cake\ORM\Table $repository): array</pre> <div class="description detailed"> <p>Returns the fully normalized array of associations that should be eagerly loaded for a table. The normalized array will restructure the original array by sorting all associations under one key and special options under another.</p> <p>Each of the levels of the associations tree will be converted to a {@link \Cake\ORM\EagerLoadable} object, that contains all the information required for the association objects to load the information from the database.</p> <p>Additionally, it will set an 'instance' key per association containing the association instance from the corresponding source table</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>Cake\ORM\Table</code> <var>$repository</var> </dt> <dd><p>The table containing the association that will be normalized</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>array</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="setMatching()"> setMatching()   <span class="label">public</span> </h3> <pre data-language="php">setMatching(string $associationPath, callable|null $builder = null, array&lt;string, mixed&gt; $options = []): $this</pre> <div class="description detailed"> <p>Adds a new association to the list that will be used to filter the results of any given query based on the results of finding records for that association. You can pass a dot separated path of associations to this method as its first parameter, this will translate in setting all those associations with the <code>matching</code> option.</p> <h3>Options</h3> <ul> <li>
<code>joinType</code>: INNER, OUTER, ... <ul> <li>
<code>fields</code>: Fields to contain</li> <li>
<code>negateMatch</code>: Whether to add conditions negate match on target association</li> </ul>
</li> </ul> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$associationPath</var> </dt> <dd><p>Dot separated association path, 'Name1.Name2.Name3'</p></dd> <dt> <code>callable|null</code> <var>$builder</var> <span class="label">optional</span> </dt> <dd><p>the callback function to be used for setting extra options to the filtering query</p></dd> <dt> <code>array&lt;string, mixed&gt;</code> <var>$options</var> <span class="label">optional</span> </dt> <dd><p>Extra options for the association matching.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>$this</code><br> </div> </div> </div> </div> <div class="section"> <h2>Property Detail</h2> <div class="property-detail">  <h3 class="property-name" id="$_aliasList"> <var>$_aliasList</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>Contains a list of the association names that are to be eagerly loaded</p> <h4>Type</h4> <div class="list"> <code>array</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_autoFields"> <var>$_autoFields</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>Controls whether fields from associated tables will be eagerly loaded. When set to false, no fields will be loaded from associations.</p> <h4>Type</h4> <div class="list"> <code>bool</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_containOptions"> <var>$_containOptions</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>List of options accepted by associations in contain() index by key for faster access</p> <h4>Type</h4> <div class="list"> <code>array&lt;string, int&gt;</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_containments"> <var>$_containments</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>Nested array describing the association to be fetched and the options to apply for each of them, if any</p> <h4>Type</h4> <div class="list"> <code>array&lt;string, mixed&gt;</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_joinsMap"> <var>$_joinsMap</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>A map of table aliases pointing to the association objects they represent for the query.</p> <h4>Type</h4> <div class="list"> <code>array&lt;string,Cake\ORM\EagerLoadable&gt;</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_loadExternal"> <var>$_loadExternal</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>A list of associations that should be loaded with a separate query</p> <h4>Type</h4> <div class="list"> <code>arrayCake\ORM\EagerLoadable&gt;</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_matching"> <var>$_matching</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>Another EagerLoader instance that will be used for 'matching' associations.</p> <h4>Type</h4> <div class="list"> <code>Cake\ORM\EagerLoader|null</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_normalized"> <var>$_normalized</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>Contains a nested array with the compiled containments tree This is a normalized version of the user provided containments array.</p> <h4>Type</h4> <div class="list"> <code>Cake\ORM\EagerLoadable|arrayCake\ORM\EagerLoadable&gt;|null</code><br> </div> </div> </div> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;present The Cake Software Foundation, Inc.<br>Licensed under the MIT License.<br>CakePHP is a registered trademark of Cake Software Foundation, Inc.<br>We are not endorsed by or affiliated with CakePHP.<br>
    <a href="https://api.cakephp.org/4.4/class-Cake.ORM.EagerLoader.html" class="_attribution-link">https://api.cakephp.org/4.4/class-Cake.ORM.EagerLoader.html</a>
  </p>
</div>
