<h1> Class RulesChecker  </h1> <div class="description"> <p>ORM flavoured rules checker.</p> <p>Adds ORM related features to the RulesChecker class.</p> </div> <div class="info"> <b>Namespace:</b> <a href="namespace-cake.orm.html">Cake\ORM</a><br> <b>See:</b> \Cake\Datasource\RulesChecker<br> </div> <div class="section"> <h2>Constants</h2> <ul class="member-summary constants"> <li class="clearfix">  <div class="attributes col-md-2 col-sm-2 p0"> <code>string</code> </div> <div class="name col-md-10 col-sm-10"> <b>CREATE</b>   </div> <div class="col-md-10 col-md-offset-2"> <pre data-language="php">'create'</pre> </div> <div class="col-md-10 col-md-offset-2"> <p>Indicates that the checking rules to apply are those used for creating entities</p> </div> </li> <li class="clearfix">  <div class="attributes col-md-2 col-sm-2 p0"> <code>string</code> </div> <div class="name col-md-10 col-sm-10"> <b>DELETE</b>   </div> <div class="col-md-10 col-md-offset-2"> <pre data-language="php">'delete'</pre> </div> <div class="col-md-10 col-md-offset-2"> <p>Indicates that the checking rules to apply are those used for deleting entities</p> </div> </li> <li class="clearfix">  <div class="attributes col-md-2 col-sm-2 p0"> <code>string</code> </div> <div class="name col-md-10 col-sm-10"> <b>UPDATE</b>   </div> <div class="col-md-10 col-md-offset-2"> <pre data-language="php">'update'</pre> </div> <div class="col-md-10 col-md-offset-2"> <p>Indicates that the checking rules to apply are those used for updating entities</p> </div> </li> </ul> </div> <div class="section"> <h2>Property Summary</h2> <ul class="member-summary properties"> <li class="clearfix"> <div class="name"> <a href="#%24_createRules">$_createRules</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>arrayCake\Datasource\RuleInvoker&gt;</code></div> <div class="description"> <p>The list of rules to check during create operations</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_deleteRules">$_deleteRules</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>arrayCake\Datasource\RuleInvoker&gt;</code></div> <div class="description"> <p>The list of rules to check during delete operations</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_options">$_options</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>array</code></div> <div class="description"> <p>List of options to pass to every callable rule</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_rules">$_rules</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>arrayCake\Datasource\RuleInvoker&gt;</code></div> <div class="description"> <p>The list of rules to be checked on both create and update operations</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_updateRules">$_updateRules</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>arrayCake\Datasource\RuleInvoker&gt;</code></div> <div class="description"> <p>The list of rules to check during update operations</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_useI18n">$_useI18n</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>bool</code></div> <div class="description"> <p>Whether to use I18n functions for translating default error messages</p> </div> </li> </ul> </div> <div class="section"> <h2>Method Summary</h2> <ul class="member-summary"> <li class="clearfix"> <h5 class="function-name"> <a href="#__construct()">__construct()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Constructor. Takes the options to be passed to all rules.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_addError()">_addError()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Utility method for decorating any callable so that if it returns false, the correct property in the entity is marked as invalid.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_addLinkConstraintRule()">_addLinkConstraintRule()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Adds a link constraint rule.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_checkRules()">_checkRules()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Used by top level functions checkDelete, checkCreate and checkUpdate, this function iterates an array containing the rules to be checked and checks them all.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#add()">add()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Adds a rule that will be applied to the entity both on create and update operations.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#addCreate()">addCreate()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Adds a rule that will be applied to the entity on create operations.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#addDelete()">addDelete()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Adds a rule that will be applied to the entity on delete operations.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#addUpdate()">addUpdate()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Adds a rule that will be applied to the entity on update operations.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#check()">check()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Runs each of the rules by passing the provided entity and returns true if all of them pass. The rules to be applied are depended on the $mode parameter which can only be RulesChecker::CREATE, RulesChecker::UPDATE or RulesChecker::DELETE</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#checkCreate()">checkCreate()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Runs each of the rules by passing the provided entity and returns true if all of them pass. The rules selected will be only those specified to be run on 'create'</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#checkDelete()">checkDelete()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Runs each of the rules by passing the provided entity and returns true if all of them pass. The rules selected will be only those specified to be run on 'delete'</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#checkUpdate()">checkUpdate()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Runs each of the rules by passing the provided entity and returns true if all of them pass. The rules selected will be only those specified to be run on 'update'</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#existsIn()">existsIn()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Returns a callable that can be used as a rule for checking that the values extracted from the entity to check exist as the primary key in another table.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#isLinkedTo()">isLinkedTo()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Validates whether links to the given association exist.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#isNotLinkedTo()">isNotLinkedTo()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Validates whether links to the given association do not exist.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#isUnique()">isUnique()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Returns a callable that can be used as a rule for checking the uniqueness of a value in the table.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#validCount()">validCount()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Validates the count of associated records.</p> </div> </li> </ul> <div class="section"> <h2>Method Detail</h2> <div class="method-detail">  <h3 class="method-name" id="__construct()"> __construct()   <span class="label">public</span> </h3> <pre data-language="php">__construct(array&lt;string, mixed&gt; $options = [])</pre> <div class="description detailed"> <p>Constructor. Takes the options to be passed to all rules.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>array&lt;string, mixed&gt;</code> <var>$options</var> <span class="label">optional</span> </dt> <dd><p>The options to pass to every rule</p></dd> </dl> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_addError()"> _addError()   <span class="label">protected</span> </h3> <pre data-language="php">_addError(callableCake\Datasource\RuleInvoker $rule, array|string|null $name = null, array&lt;string, mixed&gt; $options = []): Cake\Datasource\RuleInvoker</pre> <div class="description detailed"> <p>Utility method for decorating any callable so that if it returns false, the correct property in the entity is marked as invalid.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>callableCake\Datasource\RuleInvoker</code> <var>$rule</var> </dt> <dd><p>The rule to decorate</p></dd> <dt> <code>array|string|null</code> <var>$name</var> <span class="label">optional</span> </dt> <dd><p>The alias for a rule or an array of options</p></dd> <dt> <code>array&lt;string, mixed&gt;</code> <var>$options</var> <span class="label">optional</span> </dt> <dd><p>The options containing the error message and field.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>Cake\Datasource\RuleInvoker</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_addLinkConstraintRule()"> _addLinkConstraintRule()   <span class="label">protected</span> </h3> <pre data-language="php">_addLinkConstraintRule(Cake\ORM\Association|string $association, string|null $errorField, string|null $message, string $linkStatus, string $ruleName): Cake\Datasource\RuleInvoker</pre> <div class="description detailed"> <p>Adds a link constraint rule.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>Cake\ORM\Association|string</code> <var>$association</var> </dt> <dd><p>The association to check for links.</p></dd> <dt> <code>string|null</code> <var>$errorField</var> </dt> <dd><p>The name of the property to use for setting possible errors. When absent, the name is inferred from <code>$association</code>.</p></dd> <dt> <code>string|null</code> <var>$message</var> </dt> <dd><p>The error message to show in case the rule does not pass.</p></dd> <dt> <code>string</code> <var>$linkStatus</var> </dt> <dd><p>The ink status required for the check to pass.</p></dd> <dt> <code>string</code> <var>$ruleName</var> </dt> <dd><p>The alias/name of the rule.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>Cake\Datasource\RuleInvoker</code><br> </div> <h4>Throws</h4> <div class="list"> <code>InvalidArgumentException</code><br> In case the `$association` argument is of an invalid type. </div> <h4>See Also</h4> <div class="list"> \Cake\ORM\RulesChecker::isLinkedTo()<br> \Cake\ORM\RulesChecker::isNotLinkedTo()<br> \Cake\ORM\Rule\LinkConstraint::STATUS_LINKED<br> \Cake\ORM\Rule\LinkConstraint::STATUS_NOT_LINKED </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_checkRules()"> _checkRules()   <span class="label">protected</span> </h3> <pre data-language="php">_checkRules(Cake\Datasource\EntityInterface $entity, array&lt;string, mixed&gt; $options = [], arrayCake\Datasource\RuleInvoker&gt; $rules = []): bool</pre> <div class="description detailed"> <p>Used by top level functions checkDelete, checkCreate and checkUpdate, this function iterates an array containing the rules to be checked and checks them all.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>Cake\Datasource\EntityInterface</code> <var>$entity</var> </dt> <dd><p>The entity to check for validity.</p></dd> <dt> <code>array&lt;string, mixed&gt;</code> <var>$options</var> <span class="label">optional</span> </dt> <dd><p>Extra options to pass to checker functions.</p></dd> <dt> <code>arrayCake\Datasource\RuleInvoker&gt;</code> <var>$rules</var> <span class="label">optional</span> </dt> <dd><p>The list of rules that must be checked.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>bool</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="add()"> add()   <span class="label">public</span> </h3> <pre data-language="php">add(callable $rule, array|string|null $name = null, array&lt;string, mixed&gt; $options = []): $this</pre> <div class="description detailed"> <p>Adds a rule that will be applied to the entity both on create and update operations.</p> <h3>Options</h3> <p>The options array accept the following special keys:</p> <ul> <li>
<code>errorField</code>: The name of the entity field that will be marked as invalid if the rule does not pass.</li> <li>
<code>message</code>: The error message to set to <code>errorField</code> if the rule does not pass.</li> </ul> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>callable</code> <var>$rule</var> </dt> <dd><p>A callable function or object that will return whether the entity is valid or not.</p></dd> <dt> <code>array|string|null</code> <var>$name</var> <span class="label">optional</span> </dt> <dd><p>The alias for a rule, or an array of options.</p></dd> <dt> <code>array&lt;string, mixed&gt;</code> <var>$options</var> <span class="label">optional</span> </dt> <dd><p>List of extra options to pass to the rule callable as second argument.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>$this</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="addCreate()"> addCreate()   <span class="label">public</span> </h3> <pre data-language="php">addCreate(callable $rule, array|string|null $name = null, array&lt;string, mixed&gt; $options = []): $this</pre> <div class="description detailed"> <p>Adds a rule that will be applied to the entity on create operations.</p> <h3>Options</h3> <p>The options array accept the following special keys:</p> <ul> <li>
<code>errorField</code>: The name of the entity field that will be marked as invalid if the rule does not pass.</li> <li>
<code>message</code>: The error message to set to <code>errorField</code> if the rule does not pass.</li> </ul> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>callable</code> <var>$rule</var> </dt> <dd><p>A callable function or object that will return whether the entity is valid or not.</p></dd> <dt> <code>array|string|null</code> <var>$name</var> <span class="label">optional</span> </dt> <dd><p>The alias for a rule or an array of options.</p></dd> <dt> <code>array&lt;string, mixed&gt;</code> <var>$options</var> <span class="label">optional</span> </dt> <dd><p>List of extra options to pass to the rule callable as second argument.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>$this</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="addDelete()"> addDelete()   <span class="label">public</span> </h3> <pre data-language="php">addDelete(callable $rule, array|string|null $name = null, array&lt;string, mixed&gt; $options = []): $this</pre> <div class="description detailed"> <p>Adds a rule that will be applied to the entity on delete operations.</p> <h3>Options</h3> <p>The options array accept the following special keys:</p> <ul> <li>
<code>errorField</code>: The name of the entity field that will be marked as invalid if the rule does not pass.</li> <li>
<code>message</code>: The error message to set to <code>errorField</code> if the rule does not pass.</li> </ul> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>callable</code> <var>$rule</var> </dt> <dd><p>A callable function or object that will return whether the entity is valid or not.</p></dd> <dt> <code>array|string|null</code> <var>$name</var> <span class="label">optional</span> </dt> <dd><p>The alias for a rule, or an array of options.</p></dd> <dt> <code>array&lt;string, mixed&gt;</code> <var>$options</var> <span class="label">optional</span> </dt> <dd><p>List of extra options to pass to the rule callable as second argument.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>$this</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="addUpdate()"> addUpdate()   <span class="label">public</span> </h3> <pre data-language="php">addUpdate(callable $rule, array|string|null $name = null, array&lt;string, mixed&gt; $options = []): $this</pre> <div class="description detailed"> <p>Adds a rule that will be applied to the entity on update operations.</p> <h3>Options</h3> <p>The options array accept the following special keys:</p> <ul> <li>
<code>errorField</code>: The name of the entity field that will be marked as invalid if the rule does not pass.</li> <li>
<code>message</code>: The error message to set to <code>errorField</code> if the rule does not pass.</li> </ul> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>callable</code> <var>$rule</var> </dt> <dd><p>A callable function or object that will return whether the entity is valid or not.</p></dd> <dt> <code>array|string|null</code> <var>$name</var> <span class="label">optional</span> </dt> <dd><p>The alias for a rule, or an array of options.</p></dd> <dt> <code>array&lt;string, mixed&gt;</code> <var>$options</var> <span class="label">optional</span> </dt> <dd><p>List of extra options to pass to the rule callable as second argument.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>$this</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="check()"> check()   <span class="label">public</span> </h3> <pre data-language="php">check(Cake\Datasource\EntityInterface $entity, string $mode, array&lt;string, mixed&gt; $options = []): bool</pre> <div class="description detailed"> <p>Runs each of the rules by passing the provided entity and returns true if all of them pass. The rules to be applied are depended on the $mode parameter which can only be RulesChecker::CREATE, RulesChecker::UPDATE or RulesChecker::DELETE</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>Cake\Datasource\EntityInterface</code> <var>$entity</var> </dt> <dd><p>The entity to check for validity.</p></dd> <dt> <code>string</code> <var>$mode</var> </dt> <dd><p>Either 'create, 'update' or 'delete'.</p></dd> <dt> <code>array&lt;string, mixed&gt;</code> <var>$options</var> <span class="label">optional</span> </dt> <dd><p>Extra options to pass to checker functions.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>bool</code><br> </div> <h4>Throws</h4> <div class="list"> <code>InvalidArgumentException</code><br> if an invalid mode is passed. </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="checkCreate()"> checkCreate()   <span class="label">public</span> </h3> <pre data-language="php">checkCreate(Cake\Datasource\EntityInterface $entity, array&lt;string, mixed&gt; $options = []): bool</pre> <div class="description detailed"> <p>Runs each of the rules by passing the provided entity and returns true if all of them pass. The rules selected will be only those specified to be run on 'create'</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>Cake\Datasource\EntityInterface</code> <var>$entity</var> </dt> <dd><p>The entity to check for validity.</p></dd> <dt> <code>array&lt;string, mixed&gt;</code> <var>$options</var> <span class="label">optional</span> </dt> <dd><p>Extra options to pass to checker functions.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>bool</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="checkDelete()"> checkDelete()   <span class="label">public</span> </h3> <pre data-language="php">checkDelete(Cake\Datasource\EntityInterface $entity, array&lt;string, mixed&gt; $options = []): bool</pre> <div class="description detailed"> <p>Runs each of the rules by passing the provided entity and returns true if all of them pass. The rules selected will be only those specified to be run on 'delete'</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>Cake\Datasource\EntityInterface</code> <var>$entity</var> </dt> <dd><p>The entity to check for validity.</p></dd> <dt> <code>array&lt;string, mixed&gt;</code> <var>$options</var> <span class="label">optional</span> </dt> <dd><p>Extra options to pass to checker functions.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>bool</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="checkUpdate()"> checkUpdate()   <span class="label">public</span> </h3> <pre data-language="php">checkUpdate(Cake\Datasource\EntityInterface $entity, array&lt;string, mixed&gt; $options = []): bool</pre> <div class="description detailed"> <p>Runs each of the rules by passing the provided entity and returns true if all of them pass. The rules selected will be only those specified to be run on 'update'</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>Cake\Datasource\EntityInterface</code> <var>$entity</var> </dt> <dd><p>The entity to check for validity.</p></dd> <dt> <code>array&lt;string, mixed&gt;</code> <var>$options</var> <span class="label">optional</span> </dt> <dd><p>Extra options to pass to checker functions.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>bool</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="existsIn()"> existsIn()   <span class="label">public</span> </h3> <pre data-language="php">existsIn(array&lt;string&gt;|string $field, Cake\ORM\TableCake\ORM\Association|string $table, array&lt;string, mixed&gt;|string|null $message = null): Cake\Datasource\RuleInvoker</pre> <div class="description detailed"> <p>Returns a callable that can be used as a rule for checking that the values extracted from the entity to check exist as the primary key in another table.</p> <p>This is useful for enforcing foreign key integrity checks.</p> <h3>Example:</h3> <pre data-language="php">$rules-&gt;add($rules-&gt;existsIn('author_id', 'Authors', 'Invalid Author'));

$rules-&gt;add($rules-&gt;existsIn('site_id', new SitesTable(), 'Invalid Site'));</pre> <p>Available $options are error 'message' and 'allowNullableNulls' flag. 'message' sets a custom error message. Set 'allowNullableNulls' to true to accept composite foreign keys where one or more nullable columns are null.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>array&lt;string&gt;|string</code> <var>$field</var> </dt> <dd><p>The field or list of fields to check for existence by primary key lookup in the other table.</p></dd> <dt> <code>Cake\ORM\TableCake\ORM\Association|string</code> <var>$table</var> </dt> <dd><p>The table name where the fields existence will be checked.</p></dd> <dt> <code>array&lt;string, mixed&gt;|string|null</code> <var>$message</var> <span class="label">optional</span> </dt> <dd><p>The error message to show in case the rule does not pass. Can also be an array of options. When an array, the 'message' key can be used to provide a message.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>Cake\Datasource\RuleInvoker</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="isLinkedTo()"> isLinkedTo()   <span class="label">public</span> </h3> <pre data-language="php">isLinkedTo(Cake\ORM\Association|string $association, string|null $field = null, string|null $message = null): Cake\Datasource\RuleInvoker</pre> <div class="description detailed"> <p>Validates whether links to the given association exist.</p> <h3>Example:</h3> <pre data-language="php">$rules-&gt;addUpdate($rules-&gt;isLinkedTo('Articles', 'article'));</pre> <p>On a <code>Comments</code> table that has a <code>belongsTo Articles</code> association, this check would ensure that comments can only be edited as long as they are associated to an existing article.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>Cake\ORM\Association|string</code> <var>$association</var> </dt> <dd><p>The association to check for links.</p></dd> <dt> <code>string|null</code> <var>$field</var> <span class="label">optional</span> </dt> <dd><p>The name of the association property. When supplied, this is the name used to set possible errors. When absent, the name is inferred from <code>$association</code>.</p></dd> <dt> <code>string|null</code> <var>$message</var> <span class="label">optional</span> </dt> <dd><p>The error message to show in case the rule does not pass.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>Cake\Datasource\RuleInvoker</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="isNotLinkedTo()"> isNotLinkedTo()   <span class="label">public</span> </h3> <pre data-language="php">isNotLinkedTo(Cake\ORM\Association|string $association, string|null $field = null, string|null $message = null): Cake\Datasource\RuleInvoker</pre> <div class="description detailed"> <p>Validates whether links to the given association do not exist.</p> <h3>Example:</h3> <pre data-language="php">$rules-&gt;addDelete($rules-&gt;isNotLinkedTo('Comments', 'comments'));</pre> <p>On a <code>Articles</code> table that has a <code>hasMany Comments</code> association, this check would ensure that articles can only be deleted when no associated comments exist.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>Cake\ORM\Association|string</code> <var>$association</var> </dt> <dd><p>The association to check for links.</p></dd> <dt> <code>string|null</code> <var>$field</var> <span class="label">optional</span> </dt> <dd><p>The name of the association property. When supplied, this is the name used to set possible errors. When absent, the name is inferred from <code>$association</code>.</p></dd> <dt> <code>string|null</code> <var>$message</var> <span class="label">optional</span> </dt> <dd><p>The error message to show in case the rule does not pass.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>Cake\Datasource\RuleInvoker</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="isUnique()"> isUnique()   <span class="label">public</span> </h3> <pre data-language="php">isUnique(array&lt;string&gt; $fields, array&lt;string, mixed&gt;|string|null $message = null): Cake\Datasource\RuleInvoker</pre> <div class="description detailed"> <p>Returns a callable that can be used as a rule for checking the uniqueness of a value in the table.</p> <h3>Example</h3> <pre data-language="php">$rules-&gt;add($rules-&gt;isUnique(['email'], 'The email should be unique'));</pre> <h3>Options</h3> <ul> <li>
<code>allowMultipleNulls</code> Allows any field to have multiple null values. Defaults to false.</li> </ul> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>array&lt;string&gt;</code> <var>$fields</var> </dt> <dd><p>The list of fields to check for uniqueness.</p></dd> <dt> <code>array&lt;string, mixed&gt;|string|null</code> <var>$message</var> <span class="label">optional</span> </dt> <dd><p>The error message to show in case the rule does not pass. Can also be an array of options. When an array, the 'message' key can be used to provide a message.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>Cake\Datasource\RuleInvoker</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="validCount()"> validCount()   <span class="label">public</span> </h3> <pre data-language="php">validCount(string $field, int $count = 0, string $operator = '&gt;', string|null $message = null): Cake\Datasource\RuleInvoker</pre> <div class="description detailed"> <p>Validates the count of associated records.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$field</var> </dt> <dd><p>The field to check the count on.</p></dd> <dt> <code>int</code> <var>$count</var> <span class="label">optional</span> </dt> <dd><p>The expected count.</p></dd> <dt> <code>string</code> <var>$operator</var> <span class="label">optional</span> </dt> <dd><p>The operator for the count comparison.</p></dd> <dt> <code>string|null</code> <var>$message</var> <span class="label">optional</span> </dt> <dd><p>The error message to show in case the rule does not pass.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>Cake\Datasource\RuleInvoker</code><br> </div> </div> </div> </div> <div class="section"> <h2>Property Detail</h2> <div class="property-detail">  <h3 class="property-name" id="$_createRules"> <var>$_createRules</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>The list of rules to check during create operations</p> <h4>Type</h4> <div class="list"> <code>arrayCake\Datasource\RuleInvoker&gt;</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_deleteRules"> <var>$_deleteRules</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>The list of rules to check during delete operations</p> <h4>Type</h4> <div class="list"> <code>arrayCake\Datasource\RuleInvoker&gt;</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_options"> <var>$_options</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>List of options to pass to every callable rule</p> <h4>Type</h4> <div class="list"> <code>array</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_rules"> <var>$_rules</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>The list of rules to be checked on both create and update operations</p> <h4>Type</h4> <div class="list"> <code>arrayCake\Datasource\RuleInvoker&gt;</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_updateRules"> <var>$_updateRules</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>The list of rules to check during update operations</p> <h4>Type</h4> <div class="list"> <code>arrayCake\Datasource\RuleInvoker&gt;</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_useI18n"> <var>$_useI18n</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>Whether to use I18n functions for translating default error messages</p> <h4>Type</h4> <div class="list"> <code>bool</code><br> </div> </div> </div> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;present The Cake Software Foundation, Inc.<br>Licensed under the MIT License.<br>CakePHP is a registered trademark of Cake Software Foundation, Inc.<br>We are not endorsed by or affiliated with CakePHP.<br>
    <a href="https://api.cakephp.org/4.4/class-Cake.ORM.RulesChecker.html" class="_attribution-link">https://api.cakephp.org/4.4/class-Cake.ORM.RulesChecker.html</a>
  </p>
</div>
