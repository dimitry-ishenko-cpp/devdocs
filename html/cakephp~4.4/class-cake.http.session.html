<h1> Class Session  </h1> <div class="description"> <p>This class is a wrapper for the native PHP session functions. It provides several defaults for the most common session configuration via external handlers and helps with using session in CLI without any warnings.</p> <p>Sessions can be created from the defaults using <code>Session::create()</code> or you can get an instance of a new session by just instantiating this class and passing the complete options you want to use.</p> <p>When specific options are omitted, this class will take its defaults from the configuration values from the <code>session.*</code> directives in php.ini. This class will also alter such directives when configuration values are provided.</p> </div> <div class="info"> <b>Namespace:</b> <a href="namespace-cake.http.html">Cake\Http</a><br> </div> <div class="section"> <h2>Property Summary</h2> <ul class="member-summary properties"> <li class="clearfix"> <div class="name"> <a href="#%24_engine">$_engine</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>SessionHandlerInterface</code></div> <div class="description"> <p>The Session handler instance used as an engine for persisting the session data.</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_isCLI">$_isCLI</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>bool</code></div> <div class="description"> <p>Whether this session is running under a CLI environment</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_lifetime">$_lifetime</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>int</code></div> <div class="description"> <p>The time in seconds the session will be valid for</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_started">$_started</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>bool</code></div> <div class="description"> <p>Indicates whether the sessions has already started</p> </div> </li> </ul> </div> <div class="section"> <h2>Method Summary</h2> <ul class="member-summary"> <li class="clearfix"> <h5 class="function-name"> <a href="#__construct()">__construct()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Constructor.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_defaultConfig()">_defaultConfig()</a> <span class="label">protected</span> <span class="label">static</span> </h5> <div class="description detailed"> <p>Get one of the prebaked default session configurations.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_hasSession()">_hasSession()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Returns whether a session exists</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_overwrite()">_overwrite()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Used to write new data to _SESSION, since PHP doesn't like us setting the _SESSION var itself.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_timedOut()">_timedOut()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Returns true if the session is no longer valid because the last time it was accessed was after the configured timeout.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#check()">check()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Returns true if given variable name is set in session.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#clear()">clear()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Clears the session.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#close()">close()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Write data and close the session</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#consume()">consume()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Reads and deletes a variable from session.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#create()">create()</a> <span class="label">public</span> <span class="label">static</span> </h5> <div class="description detailed"> <p>Returns a new instance of a session after building a configuration bundle for it. This function allows an options array which will be used for configuring the session and the handler to be used. The most important key in the configuration array is <code>defaults</code>, which indicates the set of configurations to inherit from, the possible defaults are:</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#delete()">delete()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Removes a variable from session.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#destroy()">destroy()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Helper method to destroy invalid sessions.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#engine()">engine()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Sets the session handler instance to use for this session. If a string is passed for the first argument, it will be treated as the class name and the second argument will be passed as the first argument in the constructor.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#id()">id()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Returns the session id. Calling this method will not auto start the session. You might have to manually assert a started session.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#options()">options()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Calls ini_set for each of the keys in <code>$options</code> and set them to the respective value in the passed array.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#read()">read()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Returns given session variable, or all of them, if no parameters given.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#readOrFail()">readOrFail()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Returns given session variable, or throws Exception if not found.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#renew()">renew()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Restarts this session.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#setEngine()">setEngine()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Set the engine property and update the session handler in PHP.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#start()">start()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Starts the Session.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#started()">started()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Determine if Session has already been started.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#write()">write()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Writes value to given session variable name.</p> </div> </li> </ul> <div class="section"> <h2>Method Detail</h2> <div class="method-detail">  <h3 class="method-name" id="__construct()"> __construct()   <span class="label">public</span> </h3> <pre data-language="php">__construct(array&lt;string, mixed&gt; $config = [])</pre> <div class="description detailed"> <p>Constructor.</p> <h3>Configuration:</h3> <ul> <li>timeout: The time in minutes the session should be valid for.</li> <li>cookiePath: The url path for which session cookie is set. Maps to the <code>session.cookie_path</code> php.ini config. Defaults to base path of app.</li> <li>ini: A list of php.ini directives to change before the session start.</li> <li>handler: An array containing at least the <code>engine</code> key. To be used as the session engine for persisting data. The rest of the keys in the array will be passed as the configuration array for the engine. You can set the <code>engine</code> key to an already instantiated session handler object.</li> </ul> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>array&lt;string, mixed&gt;</code> <var>$config</var> <span class="label">optional</span> </dt> <dd><p>The Configuration to apply to this session object</p></dd> </dl> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_defaultConfig()"> _defaultConfig()   <span class="label">protected</span> <span class="label">static</span> </h3> <pre data-language="php">_defaultConfig(string $name): array|false</pre> <div class="description detailed"> <p>Get one of the prebaked default session configurations.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$name</var> </dt> <dd><p>Config name.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>array|false</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_hasSession()"> _hasSession()   <span class="label">protected</span> </h3> <pre data-language="php">_hasSession(): bool</pre> <div class="description detailed"> <p>Returns whether a session exists</p> <h4>Returns</h4> <div class="list"> <code>bool</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_overwrite()"> _overwrite()   <span class="label">protected</span> </h3> <pre data-language="php">_overwrite(array $old, array $new): void</pre> <div class="description detailed"> <p>Used to write new data to _SESSION, since PHP doesn't like us setting the _SESSION var itself.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>array</code> <var>$old</var> </dt> <dd><p>Set of old variables =&gt; values</p></dd> <dt> <code>array</code> <var>$new</var> </dt> <dd><p>New set of variable =&gt; value</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_timedOut()"> _timedOut()   <span class="label">protected</span> </h3> <pre data-language="php">_timedOut(): bool</pre> <div class="description detailed"> <p>Returns true if the session is no longer valid because the last time it was accessed was after the configured timeout.</p> <h4>Returns</h4> <div class="list"> <code>bool</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="check()"> check()   <span class="label">public</span> </h3> <pre data-language="php">check(string|null $name = null): bool</pre> <div class="description detailed"> <p>Returns true if given variable name is set in session.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string|null</code> <var>$name</var> <span class="label">optional</span> </dt> <dd><p>Variable name to check for</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>bool</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="clear()"> clear()   <span class="label">public</span> </h3> <pre data-language="php">clear(bool $renew = false): void</pre> <div class="description detailed"> <p>Clears the session.</p> <p>Optionally it also clears the session id and renews the session.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>bool</code> <var>$renew</var> <span class="label">optional</span> </dt> <dd><p>If session should be renewed, as well. Defaults to false.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="close()"> close()   <span class="label">public</span> </h3> <pre data-language="php">close(): true</pre> <div class="description detailed"> <p>Write data and close the session</p> <h4>Returns</h4> <div class="list"> <code>true</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="consume()"> consume()   <span class="label">public</span> </h3> <pre data-language="php">consume(string $name): mixed|null</pre> <div class="description detailed"> <p>Reads and deletes a variable from session.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$name</var> </dt> <dd><p>The key to read and remove (or a path as sent to Hash.extract).</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>mixed|null</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="create()"> create()   <span class="label">public</span> <span class="label">static</span> </h3> <pre data-language="php">create(array $sessionConfig = []): static</pre> <div class="description detailed"> <p>Returns a new instance of a session after building a configuration bundle for it. This function allows an options array which will be used for configuring the session and the handler to be used. The most important key in the configuration array is <code>defaults</code>, which indicates the set of configurations to inherit from, the possible defaults are:</p> <ul> <li>php: just use session as configured in php.ini</li> <li>cache: Use the CakePHP caching system as an storage for the session, you will need to pass the <code>config</code> key with the name of an already configured Cache engine.</li> <li>database: Use the CakePHP ORM to persist and manage sessions. By default this requires a table in your database named <code>sessions</code> or a <code>model</code> key in the configuration to indicate which Table object to use.</li> <li>cake: Use files for storing the sessions, but let CakePHP manage them and decide where to store them.</li> </ul> <p>The full list of options follows:</p> <ul> <li>defaults: either 'php', 'database', 'cache' or 'cake' as explained above.</li> <li>handler: An array containing the handler configuration</li> <li>ini: A list of php.ini directives to set before the session starts.</li> <li>timeout: The time in minutes the session should stay active</li> </ul> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>array</code> <var>$sessionConfig</var> <span class="label">optional</span> </dt> <dd><p>Session config.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>static</code><br> </div> <h4>See Also</h4> <div class="list"> \Cake\Http\Session::__construct() </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="delete()"> delete()   <span class="label">public</span> </h3> <pre data-language="php">delete(string $name): void</pre> <div class="description detailed"> <p>Removes a variable from session.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$name</var> </dt> <dd><p>Session variable to remove</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="destroy()"> destroy()   <span class="label">public</span> </h3> <pre data-language="php">destroy(): void</pre> <div class="description detailed"> <p>Helper method to destroy invalid sessions.</p> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="engine()"> engine()   <span class="label">public</span> </h3> <pre data-language="php">engine(SessionHandlerInterface|string|null $class = null, array&lt;string, mixed&gt; $options = []): SessionHandlerInterface|null</pre> <div class="description detailed"> <p>Sets the session handler instance to use for this session. If a string is passed for the first argument, it will be treated as the class name and the second argument will be passed as the first argument in the constructor.</p> <p>If an instance of a SessionHandlerInterface is provided as the first argument, the handler will be set to it.</p> <p>If no arguments are passed it will return the currently configured handler instance or null if none exists.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>SessionHandlerInterface|string|null</code> <var>$class</var> <span class="label">optional</span> </dt> <dd><p>The session handler to use</p></dd> <dt> <code>array&lt;string, mixed&gt;</code> <var>$options</var> <span class="label">optional</span> </dt> <dd><p>the options to pass to the SessionHandler constructor</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>SessionHandlerInterface|null</code><br> </div> <h4>Throws</h4> <div class="list"> <code>InvalidArgumentException</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="id()"> id()   <span class="label">public</span> </h3> <pre data-language="php">id(string|null $id = null): string</pre> <div class="description detailed"> <p>Returns the session id. Calling this method will not auto start the session. You might have to manually assert a started session.</p> <p>Passing an id into it, you can also replace the session id if the session has not already been started. Note that depending on the session handler, not all characters are allowed within the session id. For example, the file session handler only allows characters in the range a-z A-Z 0-9 , (comma) and - (minus).</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string|null</code> <var>$id</var> <span class="label">optional</span> </dt> <dd><p>Id to replace the current session id</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>string</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="options()"> options()   <span class="label">public</span> </h3> <pre data-language="php">options(array&lt;string, mixed&gt; $options): void</pre> <div class="description detailed"> <p>Calls ini_set for each of the keys in <code>$options</code> and set them to the respective value in the passed array.</p> <h3>Example:</h3> <pre data-language="php">$session-&gt;options(['session.use_cookies' =&gt; 1]);</pre> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>array&lt;string, mixed&gt;</code> <var>$options</var> </dt> <dd><p>Ini options to set.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> <h4>Throws</h4> <div class="list"> <code>RuntimeException</code><br> if any directive could not be set </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="read()"> read()   <span class="label">public</span> </h3> <pre data-language="php">read(string|null $name = null, mixed $default = null): mixed|null</pre> <div class="description detailed"> <p>Returns given session variable, or all of them, if no parameters given.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string|null</code> <var>$name</var> <span class="label">optional</span> </dt> <dd><p>The name of the session variable (or a path as sent to Hash.extract)</p></dd> <dt> <code>mixed</code> <var>$default</var> <span class="label">optional</span> </dt> <dd><p>The return value when the path does not exist</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>mixed|null</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="readOrFail()"> readOrFail()   <span class="label">public</span> </h3> <pre data-language="php">readOrFail(string $name): mixed|null</pre> <div class="description detailed"> <p>Returns given session variable, or throws Exception if not found.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$name</var> </dt> <dd><p>The name of the session variable (or a path as sent to Hash.extract)</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>mixed|null</code><br> </div> <h4>Throws</h4> <div class="list"> <code>RuntimeException</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="renew()"> renew()   <span class="label">public</span> </h3> <pre data-language="php">renew(): void</pre> <div class="description detailed"> <p>Restarts this session.</p> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="setEngine()"> setEngine()   <span class="label">protected</span> </h3> <pre data-language="php">setEngine(SessionHandlerInterface $handler): SessionHandlerInterface</pre> <div class="description detailed"> <p>Set the engine property and update the session handler in PHP.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>SessionHandlerInterface</code> <var>$handler</var> </dt> <dd><p>The handler to set</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>SessionHandlerInterface</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="start()"> start()   <span class="label">public</span> </h3> <pre data-language="php">start(): bool</pre> <div class="description detailed"> <p>Starts the Session.</p> <h4>Returns</h4> <div class="list"> <code>bool</code><br> </div> <h4>Throws</h4> <div class="list"> <code>RuntimeException</code><br> if the session was already started </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="started()"> started()   <span class="label">public</span> </h3> <pre data-language="php">started(): bool</pre> <div class="description detailed"> <p>Determine if Session has already been started.</p> <h4>Returns</h4> <div class="list"> <code>bool</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="write()"> write()   <span class="label">public</span> </h3> <pre data-language="php">write(array|string $name, mixed $value = null): void</pre> <div class="description detailed"> <p>Writes value to given session variable name.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>array|string</code> <var>$name</var> </dt> <dd><p>Name of variable</p></dd> <dt> <code>mixed</code> <var>$value</var> <span class="label">optional</span> </dt> <dd><p>Value to write</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> </div> <div class="section"> <h2>Property Detail</h2> <div class="property-detail">  <h3 class="property-name" id="$_engine"> <var>$_engine</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>The Session handler instance used as an engine for persisting the session data.</p> <h4>Type</h4> <div class="list"> <code>SessionHandlerInterface</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_isCLI"> <var>$_isCLI</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>Whether this session is running under a CLI environment</p> <h4>Type</h4> <div class="list"> <code>bool</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_lifetime"> <var>$_lifetime</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>The time in seconds the session will be valid for</p> <h4>Type</h4> <div class="list"> <code>int</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_started"> <var>$_started</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>Indicates whether the sessions has already started</p> <h4>Type</h4> <div class="list"> <code>bool</code><br> </div> </div> </div> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;present The Cake Software Foundation, Inc.<br>Licensed under the MIT License.<br>CakePHP is a registered trademark of Cake Software Foundation, Inc.<br>We are not endorsed by or affiliated with CakePHP.<br>
    <a href="https://api.cakephp.org/4.4/class-Cake.Http.Session.html" class="_attribution-link">https://api.cakephp.org/4.4/class-Cake.Http.Session.html</a>
  </p>
</div>
