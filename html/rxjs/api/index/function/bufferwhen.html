   <h1 id="bufferwhen">bufferWhen</h1> <p><code class="api-type-label function">function</code> <code class="api-status-label stable">stable</code> <code class="api-status-label operator">operator</code></p>    <aio-toc class="embedded"></aio-toc> <div class="api-body"> 
<p>Buffers the source Observable values, using a factory function of closing Observables to determine when to close, emit, and reset the buffer.</p>  <h3 data-language="typescript"><code>bufferWhen&lt;T&gt;(closingSelector: () =&gt; ObservableInput&lt;any&gt;): OperatorFunction&lt;T, T[]&gt;</code></h3> <h4 class="no-anchor" id="parameters">Parameters</h4> <table> <tbody> <tr class="function-overload-parameter"> <td class="param-name">  <code>closingSelector</code> </td> <td class="param-type"><code>() =&gt; <a href="../type-alias/observableinput.html" class="code-anchor">ObservableInput</a>&lt;any&gt;</code></td> <td class="param-description"> <p> A function that takes no arguments and returns an Observable that signals buffer closure.</p> </td> </tr> </tbody> </table> <h4 class="no-anchor" id="returns">Returns</h4> <p><code><a href="../interface/operatorfunction.html" class="code-anchor">OperatorFunction</a>&lt;T, T[]&gt;</code>: A function that returns an Observable of arrays of buffered values.</p>  <h2 id="description">Description</h2> <p><span class="informal">Collects values from the past as an array. When it starts collecting values, it calls a function that returns an Observable that tells when to close the buffer and restart collecting.</span></p> <p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA4MzAgNDMwIiB3aWR0aD0iODMwIiBoZWlnaHQ9IjQzMCI+PHBhdGggZmlsbD0icmdiYSgyNTUsIDI1NSwgMjU1LCAwLjApIiBkPSJNMCAwaDgzMHY0MzBIMHoiLz48ZyBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiI+PHBhdGggZD0iTTI1IDY1aDc3MCIvPjxwYXRoIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik03OTUgNTkuMjI2TDgwNSA2NWwtMTAgNS43NzR6Ii8+PC9nPjxwYXRoIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNNzI0IDI1djgwIi8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjEyIDI1KSI+PGNpcmNsZSBjeD0iMzMiIGN5PSI0MCIgZmlsbD0iaHNsKDEwMiwgNjAlLCA4MCUpIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcj0iMzIiLz48dGV4dCBmb250LWZhbWlseT0iQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzMgNDApIj5oPC90ZXh0PjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MzIgMjUpIj48Y2lyY2xlIGN4PSIzMyIgY3k9IjQwIiBmaWxsPSJoc2woMzIsIDYwJSwgODAlKSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHI9IjMyIi8+PHRleHQgZm9udC1mYW1pbHk9IkFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTgiIGRvbWluYW50LWJhc2VsaW5lPSJtaWRkbGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMzIDQwKSI+ZzwvdGV4dD48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDUyIDI1KSI+PGNpcmNsZSBjeD0iMzMiIGN5PSI0MCIgZmlsbD0iaHNsKDM1LCA2MCUsIDgwJSkiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByPSIzMiIvPjx0ZXh0IGZvbnQtZmFtaWx5PSJBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjE4IiBkb21pbmFudC1iYXNlbGluZT0ibWlkZGxlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMyA0MCkiPmY8L3RleHQ+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM3MiAyNSkiPjxjaXJjbGUgY3g9IjMzIiBjeT0iNDAiIGZpbGw9ImhzbCgyNTMsIDYwJSwgODAlKSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHI9IjMyIi8+PHRleHQgZm9udC1mYW1pbHk9IkFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTgiIGRvbWluYW50LWJhc2VsaW5lPSJtaWRkbGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMzIDQwKSI+ZTwvdGV4dD48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjkyIDI1KSI+PGNpcmNsZSBjeD0iMzMiIGN5PSI0MCIgZmlsbD0iaHNsKDc5LCA2MCUsIDgwJSkiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByPSIzMiIvPjx0ZXh0IGZvbnQtZmFtaWx5PSJBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjE4IiBkb21pbmFudC1iYXNlbGluZT0ibWlkZGxlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMyA0MCkiPmQ8L3RleHQ+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIxMiAyNSkiPjxjaXJjbGUgY3g9IjMzIiBjeT0iNDAiIGZpbGw9ImhzbCgzMiwgNjAlLCA4MCUpIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcj0iMzIiLz48dGV4dCBmb250LWZhbWlseT0iQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzMgNDApIj5jPC90ZXh0PjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzIgMjUpIj48Y2lyY2xlIGN4PSIzMyIgY3k9IjQwIiBmaWxsPSJoc2woNDQsIDYwJSwgODAlKSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHI9IjMyIi8+PHRleHQgZm9udC1mYW1pbHk9IkFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTgiIGRvbWluYW50LWJhc2VsaW5lPSJtaWRkbGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMzIDQwKSI+YjwvdGV4dD48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTIgMjUpIj48Y2lyY2xlIGN4PSIzMyIgY3k9IjQwIiBmaWxsPSJoc2woMzIxLCA2MCUsIDgwJSkiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByPSIzMiIvPjx0ZXh0IGZvbnQtZmFtaWx5PSJBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjE4IiBkb21pbmFudC1iYXNlbGluZT0ibWlkZGxlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMyA0MCkiPmE8L3RleHQ+PC9nPjxnPjxnIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIj48cGF0aCBkPSJNMjUgMTY1aDMzMCIvPjxwYXRoIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0zNTUgMTU5LjIyNkwzNjUgMTY1bC0xMCA1Ljc3NHoiLz48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjUyIDEyNSkiPjxjaXJjbGUgY3g9IjMzIiBjeT0iNDAiIGZpbGw9ImhzbCgxMDMsIDYwJSwgODAlKSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHI9IjMyIi8+PHRleHQgZm9udC1mYW1pbHk9IkFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTgiIGRvbWluYW50LWJhc2VsaW5lPSJtaWRkbGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMzIDQwKSI+czwvdGV4dD48L2c+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI1IDIyNSkiPjxyZWN0IHk9IjEwIiB3aWR0aD0iNzgwIiBoZWlnaHQ9IjU4IiBmaWxsPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMCkiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMCIvPjx0ZXh0IHg9IjM5MCIgeT0iNDAiIGZvbnQtZmFtaWx5PSJBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjI0IiBkb21pbmFudC1iYXNlbGluZT0ibWlkZGxlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5idWZmZXJXaGVuKCk8L3RleHQ+PC9nPjxnPjxnIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIj48cGF0aCBkPSJNMjUgMzY1aDc3MCIvPjxwYXRoIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik03OTUgMzU5LjIyNkw4MDUgMzY1bC0xMCA1Ljc3NHoiLz48L2c+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik03MjQgMzI1djgwIi8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjkyIDMyNSkiPjxjaXJjbGUgY3g9IjMzIiBjeT0iNDAiIGZpbGw9ImhzbCg1OCwgNjAlLCA4MCUpIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcj0iMzIiLz48dGV4dCBmb250LWZhbWlseT0iQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzMgNDApIj5bZywgaF08L3RleHQ+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUxMiAzMjUpIj48Y2lyY2xlIGN4PSIzMyIgY3k9IjQwIiBmaWxsPSJoc2woMTIxLCA2MCUsIDgwJSkiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByPSIzMiIvPjx0ZXh0IGZvbnQtZmFtaWx5PSJBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjE4IiBkb21pbmFudC1iYXNlbGluZT0ibWlkZGxlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMyA0MCkiPltkLCBlLCBmXTwvdGV4dD48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjUyIDMyNSkiPjxjaXJjbGUgY3g9IjMzIiBjeT0iNDAiIGZpbGw9ImhzbCgzMDMsIDYwJSwgODAlKSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHI9IjMyIi8+PHRleHQgZm9udC1mYW1pbHk9IkFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTgiIGRvbWluYW50LWJhc2VsaW5lPSJtaWRkbGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMzIDQwKSI+W2EsIGIsIGNdPC90ZXh0PjwvZz48L2c+PC9zdmc+" width="100%" alt="bufferWhen marble diagram"></p> <p>Opens a buffer immediately, then closes the buffer when the observable returned by calling <code>closingSelector</code> function emits a value. When it closes the buffer, it immediately opens a new buffer and repeats the process.</p> <h2 id="example">Example</h2> <p>Emit an array of the last clicks every [1-5] random seconds</p> <pre data-language="typescript">import { fromEvent, bufferWhen, interval } from 'rxjs';

const clicks = fromEvent(document, 'click');
const buffered = clicks.pipe(
  bufferWhen(() =&gt; interval(1000 + Math.random() * 4000))
);
buffered.subscribe(x =&gt; console.log(x));</pre>   <h2 id="see-also">See Also</h2> <ul> <li>
<a href="buffer.html"><code>buffer</code></a> </li> <li>
<a href="buffercount.html"><code>bufferCount</code></a> </li> <li>
<a href="buffertime.html"><code>bufferTime</code></a> </li> <li>
<a href="buffertoggle.html"><code>bufferToggle</code></a> </li> <li>
<a href="windowwhen.html"><code>windowWhen</code></a> </li> </ul>  </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2015&ndash;2022 Google, Inc., Netflix, Inc., Microsoft Corp. and contributors.<br>Code licensed under an Apache-2.0 License. Documentation licensed under CC BY 4.0.<br>
    <a href="https://rxjs.dev/api/index/function/bufferWhen" class="_attribution-link">https://rxjs.dev/api/index/function/bufferWhen</a>
  </p>
</div>
