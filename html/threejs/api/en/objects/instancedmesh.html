[page:Mesh] → <h1 id="instancedmesh" class=" section-header"><span class="descname">InstancedMesh</span></h1> <p class="section-desc"> A special version of <a class="reference internal" href="mesh.html"><code class="xref js js-mesh">Mesh</code></a> with instanced rendering support. Use [name] if you have to render a large number of objects with the same geometry and material(s) but with different world transformations. The usage of [name] will help you to reduce the number of draw calls and thus improve the overall rendering performance in your application. </p> <div class="section">
<h2 class="section-title section-header" id="examples">Examples</h2>
<p> <a class="reference external" href="https://threejs.org/examples/#webgl_instancing_dynamic">WebGL / instancing / dynamic</a><br> <a class="reference external" href="https://threejs.org/examples/#webgl_instancing_performance">WebGL / instancing / performance</a><br> <a class="reference external" href="https://threejs.org/examples/#webgl_instancing_scatter">WebGL / instancing / scatter</a><br> <a class="reference external" href="https://threejs.org/examples/#webgl_instancing_raycast">WebGL / instancing / raycast</a> </p> </div> <div class="section">
<h2 class="section-title section-header" id="constructor">Constructor</h2>
<h3 id="instancedmesh-buffergeometry-geometry-material-material-integer-count-" class=" section-header"> <span class="descname">InstancedMesh</span>( <span class="sig-param"><span class="sig-type">BufferGeometry</span> <code class="sig-name">geometry</code></span>, <span class="sig-param"><span class="sig-type">Material</span> <code class="sig-name">material</code></span>, <span class="sig-param"><span class="sig-type">Integer</span> <code class="sig-name">count</code></span> ) </h3> <p> <a class="reference internal" href="buffergeometry.html"><code class="xref js js-buffergeometry">geometry</code></a> - an instance of <a class="reference internal" href="buffergeometry.html"><code class="xref js js-buffergeometry">BufferGeometry</code></a>.<br> <a class="reference internal" href="material.html"><code class="xref js js-material">material</code></a> — a single or an array of <a class="reference internal" href="material.html"><code class="xref js js-material">Material</code></a>. Default is a new <a class="reference internal" href="meshbasicmaterial.html"><code class="xref js js-meshbasicmaterial">MeshBasicMaterial</code></a>.<br> <a class="reference internal" href="integer.html"><code class="xref js js-integer">count</code></a> - the number of instances.<br> </p> </div> <div class="section">
<h2 class="section-title section-header" id="properties">Properties</h2>
<p>See the base <a class="reference internal" href="mesh.html"><code class="xref js js-mesh">Mesh</code></a> class for common properties.</p> <h3 id="boundingbox-box3" class=" section-header"><dt class="sig sig-object js">
<span class="sig-name descname">boundingBox</span><span class="sig-colon">:</span> <span class="sig-type">Box3</span>
</dt></h3> <p> This bounding box encloses all instances of the [name]. Can be calculated with <a class="reference internal" href=".computeboundingbox.html"><code class="xref js js-.computeboundingbox">.computeBoundingBox</code></a>(). Default is <code class="docutils literal notranslate"><span class="pre">null</span></code>. </p> <h3 id="boundingsphere-sphere" class=" section-header"><dt class="sig sig-object js">
<span class="sig-name descname">boundingSphere</span><span class="sig-colon">:</span> <span class="sig-type">Sphere</span>
</dt></h3> <p> This bounding sphere encloses all instances of the [name]. Can be calculated with <a class="reference internal" href=".computeboundingsphere.html"><code class="xref js js-.computeboundingsphere">.computeBoundingSphere</code></a>(). Default is <code class="docutils literal notranslate"><span class="pre">null</span></code>. </p> <h3 id="count-integer" class=" section-header"><dt class="sig sig-object js">
<span class="sig-name descname">count</span><span class="sig-colon">:</span> <span class="sig-type">Integer</span>
</dt></h3> <p> The number of instances. The <code class="docutils literal notranslate"><span class="pre">count</span></code> value passed into the constructor represents the maximum number of instances of this mesh. You can change the number of instances at runtime to an integer value in the range [0, count]. </p> <p> If you need more instances than the original count value, you have to create a new [name]. </p> <h3 id="instancecolor-instancedbufferattribute" class=" section-header"><dt class="sig sig-object js">
<span class="sig-name descname">instanceColor</span><span class="sig-colon">:</span> <span class="sig-type">InstancedBufferAttribute</span>
</dt></h3> <p> Represents the colors of all instances. <code class="docutils literal notranslate"><span class="pre">null</span></code> by default. You have to set its <a class="reference internal" href="bufferattribute.needsupdate.html"><code class="xref js js-bufferattribute.needsupdate">needsUpdate</code></a> flag to true if you modify instanced data via <a class="reference internal" href=".setcolorat.html"><code class="xref js js-.setcolorat">.setColorAt</code></a>(). </p> <h3 id="instancematrix-instancedbufferattribute" class=" section-header"><dt class="sig sig-object js">
<span class="sig-name descname">instanceMatrix</span><span class="sig-colon">:</span> <span class="sig-type">InstancedBufferAttribute</span>
</dt></h3> <p> Represents the local transformation of all instances. You have to set its <a class="reference internal" href="bufferattribute.needsupdate.html"><code class="xref js js-bufferattribute.needsupdate">needsUpdate</code></a> flag to true if you modify instanced data via <a class="reference internal" href=".setmatrixat.html"><code class="xref js js-.setmatrixat">.setMatrixAt</code></a>(). </p> <h3 id="morphtexture-datatexture" class=" section-header"><dt class="sig sig-object js">
<span class="sig-name descname">morphTexture</span><span class="sig-colon">:</span> <span class="sig-type">DataTexture</span>
</dt></h3> <p> Represents the morph target weights of all instances. You have to set its <a class="reference internal" href="texture.needsupdate.html"><code class="xref js js-texture.needsupdate">needsUpdate</code></a> flag to true if you modify instanced data via <a class="reference internal" href=".setmorphat.html"><code class="xref js js-.setmorphat">.setMorphAt</code></a>(). </p> <h3 id="isinstancedmesh-boolean" class=" section-header"><dt class="sig sig-object js">
<span class="sig-name descname">isInstancedMesh</span><span class="sig-colon">:</span> <span class="sig-type">Boolean</span>
</dt></h3> <p>Read-only flag to check if a given object is of type [name].</p> </div> <div class="section">
<h2 class="section-title section-header" id="methods">Methods</h2>
<p>See the base <a class="reference internal" href="mesh.html"><code class="xref js js-mesh">Mesh</code></a> class for common methods.</p> <h3 id="computeboundingbox-undefined" class=" section-header"><dt class="sig sig-object js" id="computeBoundingBox">
<span class="sig-name descname">computeBoundingBox</span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="sig-returns"><span class="sig-colon">:</span> <span class="sig-type">undefined</span></span>
</dt></h3> <p> Computes the bounding box of the instanced mesh, and updates the <a class="reference internal" href=".boundingbox.html"><code class="xref js js-.boundingbox">.boundingBox</code></a> attribute. The bounding box is not computed by the engine; it must be computed by your app. You may need to recompute the bounding box if an instance is transformed via <a class="reference internal" href=".setmatrixat.html"><code class="xref js js-.setmatrixat">.setMatrixAt</code></a>(). </p> <h3 id="computeboundingsphere-undefined" class=" section-header"><dt class="sig sig-object js" id="computeBoundingSphere">
<span class="sig-name descname">computeBoundingSphere</span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="sig-returns"><span class="sig-colon">:</span> <span class="sig-type">undefined</span></span>
</dt></h3> <p> Computes the bounding sphere of the instanced mesh, and updates the <a class="reference internal" href=".boundingsphere.html"><code class="xref js js-.boundingsphere">.boundingSphere</code></a> attribute. The engine automatically computes the bounding sphere when it is needed, e.g., for ray casting or view frustum culling. You may need to recompute the bounding sphere if an instance is transformed via <a class="reference internal" href=".setmatrixat.html"><code class="xref js js-.setmatrixat">.setMatrixAt</code></a>(). </p> <h3 id="dispose-undefined" class=" section-header"><dt class="sig sig-object js" id="dispose">
<span class="sig-name descname">dispose</span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="sig-returns"><span class="sig-colon">:</span> <span class="sig-type">undefined</span></span>
</dt></h3> <p> Frees the GPU-related resources allocated by this instance. Call this method whenever this instance is no longer used in your app. </p> <h3 id="getcolorat-integer-index-color-color-undefined" class=" section-header"> <dt class="sig sig-object js" id="getColorAt">
<span class="sig-name descname">getColorAt</span><span class="sig-paren">(</span><span class="sig-param"><span class="sig-type"><span class="sig-param"><span class="sig-type">Integer</span></span> <code class="sig-name"><span class="sig-name">index</span></code></span></span><span class="sig-paren">, </span><span class="sig-param"><span class="sig-type"><span class="sig-param"><span class="sig-type">Color</span></span> <code class="sig-name"><span class="sig-name">color</span></code></span></span><span class="sig-paren">)</span><span class="sig-returns"><span class="sig-colon">:</span> <span class="sig-type">undefined</span></span>
</dt> </h3> <p> <a class="reference internal" href="integer.html"><code class="xref js js-integer">index</code></a>: The index of an instance. Values have to be in the range [0, count]. </p> <p> <a class="reference internal" href="color.html"><code class="xref js js-color">color</code></a>: This color object will be set to the color of the defined instance. </p> <p>Get the color of the defined instance.</p> <h3 id="getmatrixat-integer-index-matrix4-matrix-undefined" class=" section-header"> <dt class="sig sig-object js" id="getMatrixAt">
<span class="sig-name descname">getMatrixAt</span><span class="sig-paren">(</span><span class="sig-param"><span class="sig-type"><span class="sig-param"><span class="sig-type">Integer</span></span> <code class="sig-name"><span class="sig-name">index</span></code></span></span><span class="sig-paren">, </span><span class="sig-param"><span class="sig-type"><span class="sig-param"><span class="sig-type">Matrix4</span></span> <code class="sig-name"><span class="sig-name">matrix</span></code></span></span><span class="sig-paren">)</span><span class="sig-returns"><span class="sig-colon">:</span> <span class="sig-type">undefined</span></span>
</dt> </h3> <p> <a class="reference internal" href="integer.html"><code class="xref js js-integer">index</code></a>: The index of an instance. Values have to be in the range [0, count]. </p> <p> <a class="reference internal" href="matrix4.html"><code class="xref js js-matrix4">matrix</code></a>: This 4x4 matrix will be set to the local transformation matrix of the defined instance. </p> <p>Get the local transformation matrix of the defined instance.</p> <h3 id="getmorphat-integer-index-mesh-mesh-undefined" class=" section-header"> <dt class="sig sig-object js" id="getMorphAt">
<span class="sig-name descname">getMorphAt</span><span class="sig-paren">(</span><span class="sig-param"><span class="sig-type"><span class="sig-param"><span class="sig-type">Integer</span></span> <code class="sig-name"><span class="sig-name">index</span></code></span></span><span class="sig-paren">, </span><span class="sig-param"><span class="sig-type"><span class="sig-param"><span class="sig-type">Mesh</span></span> <code class="sig-name"><span class="sig-name">mesh</span></code></span></span><span class="sig-paren">)</span><span class="sig-returns"><span class="sig-colon">:</span> <span class="sig-type">undefined</span></span>
</dt> </h3> <p> <a class="reference internal" href="integer.html"><code class="xref js js-integer">index</code></a>: The index of an instance. Values have to be in the range [0, count]. </p> <p> <a class="reference internal" href="mesh.html"><code class="xref js js-mesh">mesh</code></a>: The <a class="reference internal" href="mesh.morphtargetinfluences.html"><code class="xref js js-mesh.morphtargetinfluences">.morphTargetInfluences</code></a> property of this mesh will be filled with the morph target weights of the defined instance. </p> <p>Get the morph target weights of the defined instance.</p> <h3 id="setcolorat-integer-index-color-color-undefined" class=" section-header"> <dt class="sig sig-object js" id="setColorAt">
<span class="sig-name descname">setColorAt</span><span class="sig-paren">(</span><span class="sig-param"><span class="sig-type"><span class="sig-param"><span class="sig-type">Integer</span></span> <code class="sig-name"><span class="sig-name">index</span></code></span></span><span class="sig-paren">, </span><span class="sig-param"><span class="sig-type"><span class="sig-param"><span class="sig-type">Color</span></span> <code class="sig-name"><span class="sig-name">color</span></code></span></span><span class="sig-paren">)</span><span class="sig-returns"><span class="sig-colon">:</span> <span class="sig-type">undefined</span></span>
</dt> </h3> <p> <a class="reference internal" href="integer.html"><code class="xref js js-integer">index</code></a>: The index of an instance. Values have to be in the range [0, count]. </p> <p><a class="reference internal" href="color.html"><code class="xref js js-color">color</code></a>: The color of a single instance.</p> <p> Sets the given color to the defined instance. Make sure you set <a class="reference internal" href=".instancecolor.html"><code class="xref js js-.instancecolor">.instanceColor</code></a><a class="reference internal" href="bufferattribute.needsupdate.html"><code class="xref js js-bufferattribute.needsupdate">.needsUpdate</code></a> to true after updating all the colors. </p> <h3 id="setmatrixat-integer-index-matrix4-matrix-undefined" class=" section-header"> <dt class="sig sig-object js" id="setMatrixAt">
<span class="sig-name descname">setMatrixAt</span><span class="sig-paren">(</span><span class="sig-param"><span class="sig-type"><span class="sig-param"><span class="sig-type">Integer</span></span> <code class="sig-name"><span class="sig-name">index</span></code></span></span><span class="sig-paren">, </span><span class="sig-param"><span class="sig-type"><span class="sig-param"><span class="sig-type">Matrix4</span></span> <code class="sig-name"><span class="sig-name">matrix</span></code></span></span><span class="sig-paren">)</span><span class="sig-returns"><span class="sig-colon">:</span> <span class="sig-type">undefined</span></span>
</dt> </h3> <p> <a class="reference internal" href="integer.html"><code class="xref js js-integer">index</code></a>: The index of an instance. Values have to be in the range [0, count]. </p> <p> <a class="reference internal" href="matrix4.html"><code class="xref js js-matrix4">matrix</code></a>: A 4x4 matrix representing the local transformation of a single instance. </p> <p> Sets the given local transformation matrix to the defined instance. Make sure you set <a class="reference internal" href=".instancematrix.html"><code class="xref js js-.instancematrix">.instanceMatrix</code></a><a class="reference internal" href="bufferattribute.needsupdate.html"><code class="xref js js-bufferattribute.needsupdate">.needsUpdate</code></a> to true after updating all the matrices. </p> <p> Negatively scaled matrices are not supported. </p> <h3 id="setmorphat-integer-index-mesh-mesh-undefined" class=" section-header"> <dt class="sig sig-object js" id="setMorphAt">
<span class="sig-name descname">setMorphAt</span><span class="sig-paren">(</span><span class="sig-param"><span class="sig-type"><span class="sig-param"><span class="sig-type">Integer</span></span> <code class="sig-name"><span class="sig-name">index</span></code></span></span><span class="sig-paren">, </span><span class="sig-param"><span class="sig-type"><span class="sig-param"><span class="sig-type">Mesh</span></span> <code class="sig-name"><span class="sig-name">mesh</span></code></span></span><span class="sig-paren">)</span><span class="sig-returns"><span class="sig-colon">:</span> <span class="sig-type">undefined</span></span>
</dt> </h3> <p> <a class="reference internal" href="integer.html"><code class="xref js js-integer">index</code></a>: The index of an instance. Values have to be in the range [0, count]. </p> <p> <a class="reference internal" href="mesh.html"><code class="xref js js-mesh">mesh</code></a>: A mesh with <a class="reference internal" href="mesh.morphtargetinfluences.html"><code class="xref js js-mesh.morphtargetinfluences">.morphTargetInfluences</code></a> property containing the morph target weights of a single instance. </p> <p> Sets the morph target weights to the defined instance. Make sure you set <a class="reference internal" href=".morphtexture.html"><code class="xref js js-.morphtexture">.morphTexture</code></a><a class="reference internal" href="texture.needsupdate.html"><code class="xref js js-texture.needsupdate">.needsUpdate</code></a> to true after updating all the influences. </p>   </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010&ndash;2025 Three.js Authors<br>Licensed under the MIT License.<br>
    <a href="https://threejs.org/docs/api/en/objects/InstancedMesh.html" class="_attribution-link">https://threejs.org/docs/api/en/objects/InstancedMesh.html</a>
  </p>
</div>
