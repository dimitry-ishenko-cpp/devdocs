<h1 id="keyframetrack" class=" section-header"><span class="descname">KeyframeTrack</span></h1> <p class="section-desc"> A KeyframeTrack is a timed sequence of <a class="reference external" href="https://en.wikipedia.org/wiki/Key_frame">keyframes</a>, which are composed of lists of times and related values, and which are used to animate a specific property of an object. </p> <p> For an overview of the different elements of the three.js animation system see the "Animation System" article in the "Next Steps" section of the manual. </p> <p> In contrast to the animation hierarchy of the <a class="reference external" href="https://github.com/mrdoob/three.js/wiki/JSON-Model-format-3">JSON model format</a> a <code class="docutils literal notranslate"><span class="pre">KeyframeTrack</span></code> doesn't store its single keyframes as objects in a "keys" array (holding the times and the values for each frame together in one place). </p> <p> Instead of this there are always two arrays in a <code class="docutils literal notranslate"><span class="pre">KeyframeTrack</span></code>: the <a class="reference internal" href=".times.html"><code class="xref js js-.times">times</code></a> array stores the time values for all keyframes of this track in sequential order, and the <a class="reference internal" href=".values.html"><code class="xref js js-.values">values</code></a> array contains the corresponding changing values of the animated property. </p> <p> A single value, belonging to a certain point of time, can not only be a simple number, but (for example) a vector (if a position is animated) or a quaternion (if a rotation is animated). For this reason the values array (which is a flat array, too) might be three or four times as long as the times array. </p> <p> Corresponding to the different possible types of animated values there are several subclasses of <code class="docutils literal notranslate"><span class="pre">KeyframeTrack</span></code>, inheriting the most properties and methods: </p> <ul> <li><a class="reference internal" href="booleankeyframetrack.html"><code class="xref js js-booleankeyframetrack">BooleanKeyframeTrack</code></a></li> <li><a class="reference internal" href="colorkeyframetrack.html"><code class="xref js js-colorkeyframetrack">ColorKeyframeTrack</code></a></li> <li><a class="reference internal" href="numberkeyframetrack.html"><code class="xref js js-numberkeyframetrack">NumberKeyframeTrack</code></a></li> <li><a class="reference internal" href="quaternionkeyframetrack.html"><code class="xref js js-quaternionkeyframetrack">QuaternionKeyframeTrack</code></a></li> <li><a class="reference internal" href="stringkeyframetrack.html"><code class="xref js js-stringkeyframetrack">StringKeyframeTrack</code></a></li> <li><a class="reference internal" href="vectorkeyframetrack.html"><code class="xref js js-vectorkeyframetrack">VectorKeyframeTrack</code></a></li> </ul> <p> Some examples of how to manually create <a class="reference internal" href="animationclip.html"><code class="xref js js-animationclip">AnimationClips</code></a> with different sorts of KeyframeTracks can be found in the <a class="reference external" href="https://threejs.org/examples/jsm/animation/AnimationClipCreator.js">AnimationClipCreator</a> file. </p> <p> Since explicit values are only specified for the discrete points of time stored in the times array, all values in between have to be interpolated. </p> <p> The track's name is important for the connection of this track with a specific property of the animated node (done by <a class="reference internal" href="propertybinding.html"><code class="xref js js-propertybinding">PropertyBinding</code></a>). </p> <div class="section">
<h2 class="section-title section-header" id="constructor">Constructor</h2>
<h3 id="keyframetrack-string-name-array-times-array-values-constant-interpolation-" class=" section-header">
<span class="descname">KeyframeTrack</span>( <span class="sig-param"><span class="sig-type">String</span> <code class="sig-name">name</code></span>, <span class="sig-param"><span class="sig-type">Array</span> <code class="sig-name">times</code></span>, <span class="sig-param"><span class="sig-type">Array</span> <code class="sig-name">values</code></span>, <span class="sig-param"><span class="sig-type">Constant</span> <code class="sig-name">interpolation</code></span> ) </h3> <p> <a class="reference internal" href="string.html"><code class="xref js js-string">name</code></a> - the identifier for the <code class="docutils literal notranslate"><span class="pre">KeyframeTrack</span></code>.<br> <a class="reference internal" href="array.html"><code class="xref js js-array">times</code></a> - an array of keyframe times, converted internally to a <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float32Array">Float32Array</a>.<br> <a class="reference internal" href="array.html"><code class="xref js js-array">values</code></a> - an array with the values related to the times array, converted internally to a <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float32Array">Float32Array</a>.<br> <a class="reference internal" href="constant.html"><code class="xref js js-constant">interpolation</code></a> - the type of interpolation to use. See <a class="reference internal" href="animation.html"><code class="xref js js-animation">Animation Constants</code></a> for possible values. Default is <a class="reference internal" href="animation.html"><code class="xref js js-animation">InterpolateLinear</code></a>. </p> </div> <div class="section">
<h2 class="section-title section-header" id="properties">Properties</h2>
<h3 id="name-string" class=" section-header"><dt class="sig sig-object js">
<span class="sig-name descname">name</span><span class="sig-colon">:</span> <span class="sig-type">String</span>
</dt></h3> <p> The track's name can refer to morph targets or <a class="reference internal" href="skinnedmesh.html"><code class="xref js js-skinnedmesh">bones</code></a> or possibly other values within an animated object. See <a class="reference internal" href="propertybinding.parsetrackname.html"><code class="xref js js-propertybinding.parsetrackname">PropertyBinding.parseTrackName</code></a> for the forms of strings that can be parsed for property binding: </p> <p> The name can specify the node either using its name or its uuid (although it needs to be in the subtree of the scene graph node passed into the mixer). Or, if the track name starts with a dot, the track applies to the root node that was passed into the mixer. </p> <p> Usually after the node a property will be specified directly. But you can also specify a subproperty, such as .rotation[x], if you just want to drive the X component of the rotation via a float track. </p> <p> You can also specify bones or multimaterials by using an object name, for example: .bones[R_hand].scale; the red channel of the diffuse color of the fourth material in a materials array - as a further example - can be accessed with .materials[3].diffuse[r]. </p> <p> PropertyBinding will also resolve morph target names, for example: .morphTargetInfluences[run]. </p> <p> Note: The track's name does not necessarily have to be unique. Multiple tracks can drive the same property. The result should be based on a weighted blend between the multiple tracks according to the weights of their respective actions. </p> <h3 id="times-float32array" class=" section-header"><dt class="sig sig-object js">
<span class="sig-name descname">times</span><span class="sig-colon">:</span> <span class="sig-type">Float32Array</span>
</dt></h3> <p> A <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float32Array">Float32Array</a>, converted from the times array which is passed in the constructor. </p> <h3 id="values-float32array" class=" section-header"><dt class="sig sig-object js">
<span class="sig-name descname">values</span><span class="sig-colon">:</span> <span class="sig-type">Float32Array</span>
</dt></h3> <p> A <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float32Array">Float32Array</a>, converted from the values array which is passed in the constructor. </p> <h3 id="defaultinterpolation-constant" class=" section-header"><dt class="sig sig-object js">
<span class="sig-name descname">DefaultInterpolation</span><span class="sig-colon">:</span> <span class="sig-type">Constant</span>
</dt></h3> <p>The default interpolation type: <a class="reference internal" href="animation.html"><code class="xref js js-animation">InterpolateLinear</code></a>.</p> <h3 id="timebuffertype-constant" class=" section-header"><dt class="sig sig-object js">
<span class="sig-name descname">TimeBufferType </span><span class="sig-colon">:</span> <span class="sig-type">Constant</span>
</dt></h3> <p> <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float32Array">Float32Array</a>, the type of the buffer internally used for the times. </p> <h3 id="valuebuffertype-constant" class=" section-header"><dt class="sig sig-object js">
<span class="sig-name descname">ValueBufferType </span><span class="sig-colon">:</span> <span class="sig-type">Constant</span>
</dt></h3> <p> <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float32Array">Float32Array</a>, the type of the buffer internally used for the values. </p> </div> <div class="section">
<h2 class="section-title section-header" id="methods">Methods</h2>
<h3 id="clone-keyframetrack" class=" section-header"><dt class="sig sig-object js" id="clone">
<span class="sig-name descname">clone</span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="sig-returns"><span class="sig-colon">:</span> <span class="sig-type">KeyframeTrack</span></span>
</dt></h3> <p>Returns a copy of this track.</p> <h3 id="createinterpolant-interpolant" class=" section-header"><dt class="sig sig-object js" id="createInterpolant">
<span class="sig-name descname">createInterpolant</span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="sig-returns"><span class="sig-colon">:</span> <span class="sig-type">Interpolant</span></span>
</dt></h3> <p> Creates a <a class="reference internal" href="linearinterpolant.html"><code class="xref js js-linearinterpolant">LinearInterpolant</code></a>, <a class="reference internal" href="cubicinterpolant.html"><code class="xref js js-cubicinterpolant">CubicInterpolant</code></a> or <a class="reference internal" href="discreteinterpolant.html"><code class="xref js js-discreteinterpolant">DiscreteInterpolant</code></a>, depending on the value of the interpolation parameter passed in the constructor. </p> <h3 id="getinterpolation-interpolant" class=" section-header"><dt class="sig sig-object js" id="getInterpolation">
<span class="sig-name descname">getInterpolation</span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="sig-returns"><span class="sig-colon">:</span> <span class="sig-type">Interpolant</span></span>
</dt></h3> <p>Returns the interpolation type.</p> <h3 id="getvaluesize-number" class=" section-header"><dt class="sig sig-object js" id="getValueSize">
<span class="sig-name descname">getValueSize</span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="sig-returns"><span class="sig-colon">:</span> <span class="sig-type">Number</span></span>
</dt></h3> <p> Returns the size of each value (that is the length of the <a class="reference internal" href=".values.html"><code class="xref js js-.values">values</code></a> array divided by the length of the <a class="reference internal" href=".times.html"><code class="xref js js-.times">times</code></a> array). </p> <h3 id="interpolantfactorymethoddiscrete-result-discreteinterpolant" class=" section-header"> <dt class="sig sig-object js" id="InterpolantFactoryMethodDiscrete">
<span class="sig-name descname">InterpolantFactoryMethodDiscrete</span><span class="sig-paren">(</span><span class="sig-param"><span class="sig-type"><a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float32Array&lt;/span&gt;"><span class="sig-name">result</span></a></span></span><span class="sig-paren">)</span><span class="sig-returns"><span class="sig-colon">:</span> <span class="sig-type">DiscreteInterpolant</span></span>
</dt> </h3> <p> Creates a new <a class="reference internal" href="discreteinterpolant.html"><code class="xref js js-discreteinterpolant">DiscreteInterpolant</code></a> from the <a class="reference internal" href="keyframetrack.times.html"><code class="xref js js-keyframetrack.times">times</code></a> and <a class="reference internal" href="keyframetrack.times.html"><code class="xref js js-keyframetrack.times">values</code></a>. A Float32Array can be passed which will receive the results. Otherwise a new array with the appropriate size will be created automatically. </p> <h3 id="interpolantfactorymethodlinear-result-linearinterpolant" class=" section-header"> <dt class="sig sig-object js" id="InterpolantFactoryMethodLinear">
<span class="sig-name descname">InterpolantFactoryMethodLinear</span><span class="sig-paren">(</span><span class="sig-param"><span class="sig-type"><a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float32Array&lt;/span&gt;"><span class="sig-name">result</span></a></span></span><span class="sig-paren">)</span><span class="sig-returns"><span class="sig-colon">:</span> <span class="sig-type">LinearInterpolant</span></span>
</dt> </h3> <p> Creates a new <a class="reference internal" href="linearinterpolant.html"><code class="xref js js-linearinterpolant">LinearInterpolant</code></a> from the <a class="reference internal" href="keyframetrack.times.html"><code class="xref js js-keyframetrack.times">times</code></a> and <a class="reference internal" href="keyframetrack.times.html"><code class="xref js js-keyframetrack.times">values</code></a>. A Float32Array can be passed which will receive the results. Otherwise a new array with the appropriate size will be created automatically. </p> <h3 id="interpolantfactorymethodsmooth-result-cubicinterpolant" class=" section-header"> <dt class="sig sig-object js" id="InterpolantFactoryMethodSmooth">
<span class="sig-name descname">InterpolantFactoryMethodSmooth</span><span class="sig-paren">(</span><span class="sig-param"><span class="sig-type"><a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float32Array&lt;/span&gt;"><span class="sig-name">result</span></a></span></span><span class="sig-paren">)</span><span class="sig-returns"><span class="sig-colon">:</span> <span class="sig-type">CubicInterpolant</span></span>
</dt> </h3> <p> Create a new <a class="reference internal" href="cubicinterpolant.html"><code class="xref js js-cubicinterpolant">CubicInterpolant</code></a> from the <a class="reference internal" href="keyframetrack.times.html"><code class="xref js js-keyframetrack.times">times</code></a> and <a class="reference internal" href="keyframetrack.times.html"><code class="xref js js-keyframetrack.times">values</code></a>. A Float32Array can be passed which will receive the results. Otherwise a new array with the appropriate size will be created automatically. </p> <h3 id="this-optimize-" class=" section-header"><dt class="sig sig-object js" id="optimize">
<span class="property"><span class="pre">this</span></span>.<span class="sig-name descname">optimize</span><span class="sig-paren">(</span><span class="sig-paren">)</span>
</dt></h3> <p> Removes equivalent sequential keys, which are common in morph target sequences. </p> <h3 id="this-scale-" class=" section-header"><dt class="sig sig-object js" id="scale">
<span class="property"><span class="pre">this</span></span>.<span class="sig-name descname">scale</span><span class="sig-paren">(</span><span class="sig-paren">)</span>
</dt></h3> <p> Scales all keyframe times by a factor.<br><br> Note: This is useful, for example, for conversions to a certain rate of frames per seconds (as it is done internally by <a class="reference internal" href="animationclip.createfrommorphtargetsequence.html"><code class="xref js js-animationclip.createfrommorphtargetsequence">animationClip.CreateFromMorphTargetSequence</code></a>). </p> <h3 id="this-setinterpolation-constant-interpolationtype-" class=" section-header"> <dt class="sig sig-object js" id="setInterpolation">
<span class="property"><span class="pre">this</span></span>.<span class="sig-name descname">setInterpolation</span><span class="sig-paren">(</span><span class="sig-param"><span class="sig-type"><span class="sig-param"><span class="sig-type">Constant</span></span> <code class="sig-name"><span class="sig-name">interpolationType</span></code></span></span><span class="sig-paren">)</span>
</dt> </h3> <p> Sets the interpolation type. See <a class="reference internal" href="animation.html"><code class="xref js js-animation">Animation Constants</code></a> for choices. </p> <h3 id="this-shift-number-timeoffsetinseconds-" class=" section-header"><dt class="sig sig-object js" id="shift">
<span class="property"><span class="pre">this</span></span>.<span class="sig-name descname">shift</span><span class="sig-paren">(</span><span class="sig-param"><span class="sig-type"><span class="sig-param"><span class="sig-type">Number</span></span> <code class="sig-name"><span class="sig-name">timeOffsetInSeconds</span></code></span></span><span class="sig-paren">)</span>
</dt></h3> <p>Moves all keyframes either forward or backward in time.</p> <h3 id="this-trim-number-starttimeinseconds-number-endtimeinseconds-" class=" section-header"> <dt class="sig sig-object js" id="trim">
<span class="property"><span class="pre">this</span></span>.<span class="sig-name descname">trim</span><span class="sig-paren">(</span><span class="sig-param"><span class="sig-type"><span class="sig-param"><span class="sig-type">Number</span></span> <code class="sig-name"><span class="sig-name">startTimeInSeconds</span></code></span></span><span class="sig-paren">, </span><span class="sig-param"><span class="sig-type"><span class="sig-param"><span class="sig-type">Number</span></span> <code class="sig-name"><span class="sig-name">endTimeInSeconds</span></code></span></span><span class="sig-paren">)</span>
</dt> </h3> <p> Removes keyframes before <code class="docutils literal notranslate"><span class="pre">startTime</span></code> and after <code class="docutils literal notranslate"><span class="pre">endTime</span></code>, without changing any values within the range [<code class="docutils literal notranslate"><span class="pre">startTime</span></code>, <code class="docutils literal notranslate"><span class="pre">endTime</span></code>]. </p> <h3 id="validate-boolean" class=" section-header"><dt class="sig sig-object js" id="validate">
<span class="sig-name descname">validate</span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="sig-returns"><span class="sig-colon">:</span> <span class="sig-type">Boolean</span></span>
</dt></h3> <p>Performs minimal validation on the tracks. Returns true if valid.</p> <p> This method logs errors to the console, if a track is empty, if the <a class="reference internal" href=".valuesize.html"><code class="xref js js-.valuesize">value size</code></a> is not valid, if an item in the <a class="reference internal" href=".times.html"><code class="xref js js-.times">times</code></a> or <a class="reference internal" href=".values.html"><code class="xref js js-.values">values</code></a> array is not a valid number or if the items in the <code class="docutils literal notranslate"><span class="pre">times</span></code> array are out of order. </p> </div> <div class="section">
<h2 class="section-title section-header" id="static-methods">Static Methods</h2>
<h3 id="tojson-keyframetrack-track-json" class=" section-header"><dt class="sig sig-object js" id="toJSON">
<span class="sig-name descname">toJSON</span><span class="sig-paren">(</span><span class="sig-param"><span class="sig-type"><span class="sig-param"><span class="sig-type">KeyframeTrack</span></span> <code class="sig-name"><span class="sig-name">track</span></code></span></span><span class="sig-paren">)</span><span class="sig-returns"><span class="sig-colon">:</span> <span class="sig-type">JSON</span></span>
</dt></h3> <p>Converts the track to JSON.</p>   </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010&ndash;2025 Three.js Authors<br>Licensed under the MIT License.<br>
    <a href="https://threejs.org/docs/api/en/animation/KeyframeTrack.html" class="_attribution-link">https://threejs.org/docs/api/en/animation/KeyframeTrack.html</a>
  </p>
</div>
