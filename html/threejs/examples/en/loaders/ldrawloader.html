[page:Loader] → <h1 id="ldrawloader" class=" section-header"><span class="descname">LDrawLoader</span></h1> <p class="section-desc"> A loader for <code class="docutils literal notranslate"><span class="pre">LDraw</span></code> resources. <br><br> <a class="reference external" href="https://ldraw.org">LDraw</a> (LEGO Draw) is an <a class="reference external" href="https://ldraw.org/article/218.html">open format specification</a> for describing LEGO and other construction set 3D models.</p> <p>An LDraw asset (a text file usually with extension .ldr, .dat or .txt) can describe just a single construction piece, or an entire model. In the case of a model the LDraw file can reference other LDraw files, which are loaded from a library path set with <a class="reference internal" href="function.html"><code class="xref js js-function">setPartsLibraryPath</code></a>. You usually download the LDraw official parts library, extract to a folder and point setPartsLibraryPath to it. </p> <p>Library parts will be loaded by trial and error in subfolders 'parts', 'p' and 'models'. These file accesses are not optimal for web environment, so a script tool has been made to pack an LDraw file with all its dependencies into a single file, which loads much faster. See section 'Packing LDraw models'. The LDrawLoader example loads several packed files. The official parts library is not included due to its large size.</p> <div class="section">
<h2 class="section-title section-header" id="import">Import</h2>
<p> [name] is an add-on, and must be imported explicitly. See <a class="reference internal" href="#manual/introduction/installation">Installation / Addons</a>. </p> <pre data-language="javascript"><code>
			import { LDrawLoader } from 'three/addons/loaders/LDrawLoader.js';
		</code></pre> </div> <div class="section">
<h2 class="section-title section-header" id="extensions">Extensions</h2>
<p> LDrawLoader supports the following extensions: </p> <ul> <li>!COLOUR: Color and surface finish declarations.</li> <li>BFC: Back Face Culling specification.</li> <li>!CATEGORY: Model/part category declarations.</li> <li>!KEYWORDS: Model/part keywords declarations.</li> </ul> </div> <div class="section">
<h2 class="section-title section-header" id="code-example">Code Example</h2>
<pre data-language="javascript"><code>
		// Instantiate a loader
		const loader = new LDrawLoader();

		// Optionally set library parts path
		// loader.setPartsLibraryPath( path to library );

		// Load a LDraw resource
		loader.load(
			// resource URL
			'models/car.ldr_Packed.mpd',
			// called when the resource is loaded
			function ( group ) {

				// Optionally, use LDrawUtils.mergeObject() from
				// 'examples/jsm/utils/LDrawUtils.js' to merge all
				// geometries by material (it gives better runtime
				// performance, but building steps are lost)
				// group = LDrawUtils.mergeObject( group );

				scene.add( group );

			},
			// called while loading is progressing
			function ( xhr ) {

				console.log( ( xhr.loaded / xhr.total * 100 ) + '% loaded' );

			},
			// called when loading has errors
			function ( error ) {

				console.log( 'An error happened' );

			}
		);
		</code></pre> </div> <div class="section">
<h2 class="section-title section-header" id="examples">Examples</h2>
<p> [example:webgl_loader_ldraw] </p> </div> <div class="section">
<h2 class="section-title section-header" id="packing-ldraw-models">Packing LDraw models</h2>
<p>To pack a model with all its referenced files, download the <a class="reference external" href="https://www.ldraw.org/parts/latest-parts.html">Official LDraw parts library</a> and use the following Node script: <a class="reference external" href="https://github.com/mrdoob/three.js/blob/master/utils/packLDrawModel.js">utils/packLDrawModel.js</a> It contains instructions on how to setup the files and execute it.</p> </div> <div class="section">
<h2 class="section-title section-header" id="metadata-in-userdata">Metadata in .userData</h2>
<p>LDrawLoader returns a <a class="reference internal" href="group.html"><code class="xref js js-group">Group</code></a> object which contains an object hierarchy. Depending of each subobject type, its .userData member will contain the following members: <br> In a <a class="reference internal" href="group.html"><code class="xref js js-group">Group</code></a>, the userData member will contain: <br> </p>
<ul> <li>.numBuildingSteps: Only in the root <a class="reference internal" href="group.html"><code class="xref js js-group">Group</code></a>, Indicates total number of building steps in the model. These can be used to set visibility of objects to show different building steps, which is done in the example.</li> <li>.buildingStep: Indicates the building index of this step.</li> <li>.category: Contains, if not null, the <a class="reference internal" href="string.html"><code class="xref js js-string">String</code></a> category for this piece or model.</li> <li>.keywords: Contains, if not null, an array of <a class="reference internal" href="string.html"><code class="xref js js-string">String</code></a> keywords for this piece or model.</li> </ul> <p>In a <a class="reference internal" href="material.html"><code class="xref js js-material">Material</code></a>, the userData member will contain: </p>
<ul> <li>.code: Indicates the LDraw code for this material.</li> <li>.edgeMaterial: Only in a <a class="reference internal" href="mesh.html"><code class="xref js js-mesh">Mesh</code></a> material, indicates the <a class="reference internal" href="linebasicmaterial.html"><code class="xref js js-linebasicmaterial">LineBasicMaterial</code></a> belonging to edges of the same color code (in the LDraw format, each surface material is also related to an edge material)</li> <li>.conditionalEdgeMaterial: Only in a <a class="reference internal" href="linesegments.html"><code class="xref js js-linesegments">LineSegments</code></a> material, indicates the <a class="reference internal" href="material.html"><code class="xref js js-material">Material</code></a> belonging to conditional edges of the same color code.</li> </ul> <br> <hr> </div> <div class="section">
<h2 class="section-title section-header" id="constructor">Constructor</h2>
<h3 id="ldrawloader-loadingmanager-manager-" class=" section-header">
<span class="descname">LDrawLoader</span>( <span class="sig-param"><span class="sig-type">LoadingManager</span> <code class="sig-name">manager</code></span> )</h3> <p> <a class="reference internal" href="loadingmanager.html"><code class="xref js js-loadingmanager">manager</code></a> — The <a class="reference internal" href="loadingmanager.html"><code class="xref js js-loadingmanager">loadingManager</code></a> for the loader to use. Default is <a class="reference internal" href="loadingmanager.html"><code class="xref js js-loadingmanager">THREE.DefaultLoadingManager</code></a>. </p> <p> Creates a new [name]. </p> </div> <div class="section">
<h2 class="section-title section-header" id="properties">Properties</h2>
<p>See the base <a class="reference internal" href="loader.html"><code class="xref js js-loader">Loader</code></a> class for common properties.</p> </div> <div class="section">
<h2 class="section-title section-header" id="methods">Methods</h2>
<p>See the base <a class="reference internal" href="loader.html"><code class="xref js js-loader">Loader</code></a> class for common methods.</p> <h3 id="load-string-url-function-onload-function-onprogress-function-onerror-undefined" class=" section-header"><dt class="sig sig-object js" id="load">
<span class="sig-name descname">load</span><span class="sig-paren">(</span><span class="sig-param"><span class="sig-type"><span class="sig-param"><span class="sig-type">String</span></span> <code class="sig-name"><span class="sig-name">url</span></code></span></span><span class="sig-paren">, </span><span class="sig-param"><span class="sig-type"><span class="sig-param"><span class="sig-type">Function</span></span> <code class="sig-name"><span class="sig-name">onLoad</span></code></span></span><span class="sig-paren">, </span><span class="sig-param"><span class="sig-type"><span class="sig-param"><span class="sig-type">Function</span></span> <code class="sig-name"><span class="sig-name">onProgress</span></code></span></span><span class="sig-paren">, </span><span class="sig-param"><span class="sig-type"><span class="sig-param"><span class="sig-type">Function</span></span> <code class="sig-name"><span class="sig-name">onError</span></code></span></span><span class="sig-paren">)</span><span class="sig-returns"><span class="sig-colon">:</span> <span class="sig-type">undefined</span></span>
</dt></h3> <p> <a class="reference internal" href="string.html"><code class="xref js js-string">url</code></a> — A string containing the path/URL of the LDraw file.<br> <a class="reference internal" href="function.html"><code class="xref js js-function">onLoad</code></a> — A function to be called after the loading is successfully completed. The function receives the loaded JSON response returned from <a class="reference internal" href="function.html"><code class="xref js js-function">parse</code></a>.<br> <a class="reference internal" href="function.html"><code class="xref js js-function">onProgress</code></a> — (optional) A function to be called while the loading is in progress. The argument will be the XMLHttpRequest instance, that contains .<a class="reference internal" href="integer.html"><code class="xref js js-integer">total</code></a> and .<a class="reference internal" href="integer.html"><code class="xref js js-integer">loaded</code></a> bytes. If the server does not set the Content-Length header; .<a class="reference internal" href="integer.html"><code class="xref js js-integer">total</code></a> will be 0.<br> <a class="reference internal" href="function.html"><code class="xref js js-function">onError</code></a> — (optional) A function to be called if an error occurs during loading. The function receives error as an argument.<br> </p> <p> Begin loading from url and call the callback function with the parsed response content. </p> <h3 id="this-setpartslibrarypath-string-path-" class=" section-header"><dt class="sig sig-object js" id="setPartsLibraryPath">
<span class="property"><span class="pre">this</span></span>.<span class="sig-name descname">setPartsLibraryPath</span><span class="sig-paren">(</span><span class="sig-param"><span class="sig-type"><span class="sig-param"><span class="sig-type">String</span></span> <code class="sig-name"><span class="sig-name">path</span></code></span></span><span class="sig-paren">)</span>
</dt></h3> <p> <a class="reference internal" href="string.html"><code class="xref js js-string">path</code></a> — Path to library parts files to load referenced parts from. This is different from <a class="reference internal" href="loader.setpath.html"><code class="xref js js-loader.setpath">Loader.setPath</code></a>, which indicates the path to load the main asset from.<br> </p> <p> This method must be called prior to <a class="reference internal" href=".load.html"><code class="xref js js-.load">.load</code></a> unless the model to load does not reference library parts (usually it will be a model with all its parts packed in a single file) </p> <h3 id="this-setfilemap-map-filemap-" class=" section-header"><dt class="sig sig-object js" id="setFileMap">
<span class="property"><span class="pre">this</span></span>.<span class="sig-name descname">setFileMap</span><span class="sig-paren">(</span><span class="sig-param"><span class="sig-type"><span class="sig-param"><span class="sig-type">Map</span></span> <code class="sig-name"><span class="sig-name">fileMap</span></code></span></span><span class="sig-paren">)</span>
</dt></h3> <p> <a class="reference internal" href="map.html"><code class="xref js js-map">map</code></a> — Set a map from <a class="reference internal" href="string.html"><code class="xref js js-string">String</code></a> to <a class="reference internal" href="string.html"><code class="xref js js-string">String</code></a> which maps referenced library filenames to new filenames. If a fileMap is not specified (the default), library parts will be accessed by trial and error in subfolders 'parts', 'p' and 'models'. </p> <h3 id="parse-string-text-string-path-function-onload-function-onerror-undefined" class=" section-header"><dt class="sig sig-object js" id="parse">
<span class="sig-name descname">parse</span><span class="sig-paren">(</span><span class="sig-param"><span class="sig-type"><span class="sig-param"><span class="sig-type">String</span></span> <code class="sig-name"><span class="sig-name">text</span></code></span></span><span class="sig-paren">, </span><span class="sig-param"><span class="sig-type"><span class="sig-param"><span class="sig-type">String</span></span> <code class="sig-name"><span class="sig-name">path</span></code></span></span><span class="sig-paren">, </span><span class="sig-param"><span class="sig-type"><span class="sig-param"><span class="sig-type">Function</span></span> <code class="sig-name"><span class="sig-name">onLoad</span></code></span></span><span class="sig-paren">, </span><span class="sig-param"><span class="sig-type"><span class="sig-param"><span class="sig-type">Function</span></span> <code class="sig-name"><span class="sig-name">onError</span></code></span></span><span class="sig-paren">)</span><span class="sig-returns"><span class="sig-colon">:</span> <span class="sig-type">undefined</span></span>
</dt></h3> <p> <a class="reference internal" href="string.html"><code class="xref js js-string">text</code></a> — LDraw asset to parse, as string.<br> <a class="reference internal" href="string.html"><code class="xref js js-string">path</code></a> — The base path from which to find other referenced LDraw asset files.<br> <a class="reference internal" href="function.html"><code class="xref js js-function">onLoad</code></a> — A function to be called when parse completes.<br> </p> <p> Parse a LDraw file contents as a String and fire <a class="reference internal" href="function.html"><code class="xref js js-function">onLoad</code></a> callback when complete. The argument to <a class="reference internal" href="function.html"><code class="xref js js-function">onLoad</code></a> will be an <a class="reference internal" href="group.html"><code class="xref js js-group">Group</code></a> that contains hierarchy of <a class="reference internal" href="group.html"><code class="xref js js-group">Group</code></a>, <a class="reference internal" href="mesh.html"><code class="xref js js-mesh">Mesh</code></a> and <a class="reference internal" href="linesegments.html"><code class="xref js js-linesegments">LineSegments</code></a> (with other part data in .userData fields). </p> <h3 id="getmaterial-string-colourcode-material" class=" section-header"><dt class="sig sig-object js" id="getMaterial">
<span class="sig-name descname">getMaterial</span><span class="sig-paren">(</span><span class="sig-param"><span class="sig-type"><span class="sig-param"><span class="sig-type">String</span></span> <code class="sig-name"><span class="sig-name">colourCode</span></code></span></span><span class="sig-paren">)</span><span class="sig-returns"><span class="sig-colon">:</span> <span class="sig-type">Material</span></span>
</dt></h3> <p> <a class="reference internal" href="string.html"><code class="xref js js-string">colourCode</code></a> — Color code to get the associated <a class="reference internal" href="material.html"><code class="xref js js-material">Material</code></a>. </p> <h3 id="getmainmaterial-string" class=" section-header"><dt class="sig sig-object js" id="getMainMaterial">
<span class="sig-name descname">getMainMaterial</span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="sig-returns"><span class="sig-colon">:</span> <span class="sig-type">String</span></span>
</dt></h3> <p> Returns the <a class="reference internal" href="material.html"><code class="xref js js-material">Material</code></a> for the main LDraw color. </p> <p>For an already loaded LDraw asset, returns the <a class="reference internal" href="material.html"><code class="xref js js-material">Material</code></a> associated with the main color code. This method can be useful to modify the main material of a model or part that exposes it. </p> <p> The main color code is the standard way to color an LDraw part. It is '16' for triangles and '24' for edges. Usually a complete model will not expose the main color (that is, no part uses the code '16' at the top level, because they are assigned other specific colors) An LDraw part file on the other hand will expose the code '16' to be colored, and can have additional fixed colors. </p> <h3 id="getmainedgematerial-string" class=" section-header"><dt class="sig sig-object js" id="getMainEdgeMaterial">
<span class="sig-name descname">getMainEdgeMaterial</span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="sig-returns"><span class="sig-colon">:</span> <span class="sig-type">String</span></span>
</dt></h3> <p> Returns the <a class="reference internal" href="material.html"><code class="xref js js-material">Material</code></a> for the edges main LDraw color. </p> <h3 id="preloadmaterials-string-path-void" class=" section-header"><dt class="sig sig-object js" id="preloadMaterials">
<span class="sig-name descname">preloadMaterials</span><span class="sig-paren">(</span><span class="sig-param"><span class="sig-type"><span class="sig-param"><span class="sig-type">String</span></span> <code class="sig-name"><span class="sig-name">path</span></code></span></span><span class="sig-paren">)</span><span class="sig-returns"><span class="sig-colon">:</span> <span class="sig-type">void</span></span>
</dt></h3> <p> <a class="reference internal" href="string.html"><code class="xref js js-string">path</code></a> — Path of the LDraw materials asset. </p> <p>This async method preloads materials from a single LDraw file. In the official parts library there is a special file which is loaded always the first (LDConfig.ldr) and contains all the standard color codes. This method is intended to be used with not packed files, for example in an editor where materials are preloaded and parts are loaded on demand.</p>   </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010&ndash;2025 Three.js Authors<br>Licensed under the MIT License.<br>
    <a href="https://threejs.org/docs/examples/en/loaders/LDrawLoader.html" class="_attribution-link">https://threejs.org/docs/examples/en/loaders/LDrawLoader.html</a>
  </p>
</div>
