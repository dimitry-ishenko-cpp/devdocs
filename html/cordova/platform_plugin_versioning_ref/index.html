<h1 id="platforms-and-plugins-version-management">Platforms and Plugins Version Management</h1> <p>Cordova provides the ability to save and restore platforms and plugins.</p> <p>This feature allows developers to save and restore their app to a known state without having to check in all of the platform and plugin source code.</p> <p>When adding a platform or plugin, details about the app's platform and plugin versions are automatically saved to the <code>package.json</code> file. It is also possible to add a platform or plugin by editing the <code>package.json</code> file directly, assuming you know the right tags and syntax. It is not possible to remove plugins or platforms in this manner. The recommended method of adding and removing plugins and platforms is with the Cordova CLI commands <code>cordova plugin add|remove ...</code> and <code>cordova platform add|remove ...</code> to avoid any out of sync issues.</p> <p>The <strong>restore</strong> step happens automatically when a <strong><code>cordova prepare</code></strong> is issued, making use of information previously saved in the <code>package.json</code> and <code>config.xml</code> files.</p> <p>One scenario where save/restore capabilities come in handy is in large teams that work on an app, with each team member focusing on a platform or plugin. This feature makes it easier to share the project and reduce the amount of redundant code that is checked in the repository.</p> <h2 id="platform-versioning">Platform Versioning</h2> <h3 id="saving-platforms">Saving Platforms</h3> <p>To save a platform, issue the following command:</p> <pre data-language="bash">cordova platform add &lt;platform[@&lt;version&gt;] | directory | git_url&gt;
</pre> <p>After running the above command, the <strong><code>package.json</code></strong> should contain something as seen below:</p> <pre data-language="json">"cordova": {
  "platforms": [
    "android"
  ]
},
"dependencies": {
  "cordova-android": "^8.0.0",
}
</pre> <p>The <code>--nosave</code> flag prevents adding and deleting specified platforms to the <code>package.json</code> file. To prevent saving a platform, issue the following command:</p> <pre data-language="bash">cordova platform add &lt;platform[@&lt;version&gt;] | directory | git_url&gt; --nosave
</pre> <p>Some Examples:</p> <ul> <li>
<strong><code>cordova platform add android</code></strong> </li> </ul> <p>Retrieves the pinned version of <code>cordova-android</code> platform from npm, adds it to the project and updates the <code>package.json</code> file.</p> <ul> <li><strong><code>cordova platform add android@7.1.4</code></strong></li> </ul> <p>Retrieves the <code>cordova-android</code> platform version <code>7.1.4</code> from npm, adds it to the project and updates the <code>package.json</code> file.</p> <ul> <li><strong><code>cordova platform add https://github.com/apache/cordova-android.git</code></strong></li> </ul> <p><strong><code>cordova platform add https://github.com/apache/cordova-android</code></strong></p> <p><strong><code>cordova platform add github:apache/cordova-android</code></strong></p> <p>npm retrieves the <code>cordova-android</code> platform from the git repository, adds it to the project and updates the <code>package.json</code>.</p> <ul> <li><strong><code>cordova platform add C:/path/to/android/platform</code></strong></li> </ul> <p>Retrieves the Android platform from the specified directory, adds it to the project, and updates the <code>package.json</code> file.</p> <ul> <li><strong><code>cordova platform add android --nosave</code></strong></li> </ul> <p>Retrieves the pinned version of <code>cordova-android</code> platform from npm, adds it to the project, but does not add it to the <code>package.json</code> file.</p> <h3 id="updating-or-removing-platforms">Updating or Removing Platforms</h3> <p>It is possible to update and delete a platform from <code>config.xml</code> and <code>package.json</code>.</p> <p>To update a platform, execute the following command:</p> <pre data-language="bash">cordova platform update &lt;platform[@&lt;version&gt;] | directory | git_url&gt;
</pre> <p>To remove a platform, execute one of the following commands:</p> <pre data-language="bash">cordova platform remove &lt;platform&gt;
cordova platform rm &lt;platform&gt;
</pre> <p>Some Examples:</p> <ul> <li><strong><code>cordova platform update android</code></strong></li> </ul> <p>In addition to updating the <code>cordova-android</code> platform to the pinned version, it updates the <code>package.json</code> file.</p> <ul> <li><strong><code>cordova platform update android@3.8.0</code></strong></li> </ul> <p>In addition to updating the <code>cordova-android</code> platform to version <code>3.8.0</code> it updates the <code>package.json</code> file.</p> <ul> <li><strong><code>cordova platform update /path/to/android/platform</code></strong></li> </ul> <p>In addition to updating the <code>cordova-android</code> platform to version found in the provided folder, it updates the <code>package.json</code> file.</p> <ul> <li><strong><code>cordova platform remove android</code></strong></li> </ul> <p>Removes the <code>cordova-android</code> platform from the project and removes it from the <code>package.json</code> file.</p> <p><em>Note: If the platform definition existed in <code>config.xml</code> from a previous version of Cordova CLI, it will also be removed from <code>config.xml</code>.</em></p> <ul> <li><strong><code>cordova platform remove android --nosave</code></strong></li> </ul> <p>Removes the <code>cordova-android</code> platform from the project, but does not remove it from the <code>package.json</code> file.</p> <h3 id="restoring-platforms">Restoring Platforms</h3> <p>Platforms are automatically restored from the <code>package.json</code> (and <code>config.xml</code>) when executing the <strong><code>cordova prepare</code></strong> command.</p> <p>If a platform is defined in both files, the information defined in <code>package.json</code> is used as the source of truth.</p> <p>After <code>prepare</code>, any platforms restored from <code>config.xml</code> will update the <code>package.json</code> file to reflect the values taken from <code>config.xml</code>.</p> <p>If you add a platform without specifying a <code>&lt;version | folder | git_url&gt;</code>, the version that will be installed is taken from <code>package.json</code> or <code>config.xml</code>.</p> <p><strong>If discovered</strong> in both files, <code>package.json</code> is given higher priority over <code>config.xml</code>.</p> <p>Example:</p> <p>Suppose your <code>config.xml</code> file contains the following entry:</p> <pre data-language="xml">&lt;?xml version='1.0' encoding='utf-8'?&gt;
    ...
    &lt;engine name="android" spec="7.1.4" /&gt;
    ...
&lt;/xml&gt;
</pre> <p>If you run the command <strong><code>cordova platform add android</code></strong> with no <code>&lt;version | folder | git_url&gt;</code> specified, the platform <code>android@7.1.4</code> will be retrieved and installed.</p> <p><strong>Example Order of Priority for Restoring Platforms:</strong></p> <p>Suppose you have defined in <code>config.xml</code> and <code>package.json</code> a platform and version as follows:</p> <p><strong><code>config.xml</code></strong>:</p> <pre data-language="xml">&lt;engine name="android" spec=“7.4.1” /&gt;
</pre> <p><strong><code>package.json</code></strong>:</p> <pre data-language="json">"cordova": {
  "platforms": [
    "android"
  ]
},
"dependencies": {
  "cordova-android": "^8.0.0"
}
</pre> <p>When <code>prepare</code> is executed, the version from <code>package.json</code> has higher priority over <code>config.xml</code> and version <code>^8.0.0</code> will be installed.</p>  <h2 id="plugin-versioning">Plugin Versioning</h2> <p>The plugin commands are a mirror of the platform commands:</p> <h3 id="saving-plugins">Saving Plugins</h3> <p>To save a plugin, you issue the following command:</p> <pre data-language="bash">cordova plugin add &lt;plugin[@&lt;version&gt;] | directory | git_url&gt;
</pre> <p>After running the above command, the <strong><code>package.json</code></strong> should contain something as seen below:</p> <pre data-language="json">"cordova": {
  "plugins": [
    "cordova-plugin-device"
  ]
},
"devDependencies": {
  "cordova-plugin-device": "^1.0.0"
}
</pre> <p>The <code>--nosave</code> flag prevents adding and deleting specified plugins from <code>package.json</code>. To prevent saving a plugin, you issue the following command:</p> <pre data-language="bash">cordova plugin add &lt;plugin[@&lt;version&gt;] | directory | git_url&gt; --nosave
</pre> <p>Some Examples:</p> <ul> <li><strong><code>cordova plugin add cordova-plugin-device</code></strong></li> </ul> <p>Retrieves the pinned version of the <code>cordova-plugin-device</code> plugin from npm, adds it to the project and updates the <code>package.json</code> file.</p> <ul> <li><strong><code>cordova plugin add cordova-plugin-device@2.0.1</code></strong></li> </ul> <p>Retrieves the <code>cordova-plugin-device</code> plugin at version <code>2.0.1</code> from npm, adds it to the project and updates the <code>package.json</code> file.</p> <ul> <li><strong><code>cordova plugin add https://github.com/apache/cordova-plugin-device.git</code></strong></li> </ul> <p><strong><code>cordova plugin add https://github.com/apache/cordova-plugin-device</code></strong></p> <p><strong><code>cordova plugin add github:apache/cordova-plugin-device</code></strong></p> <p>npm retrieves the <code>cordova-plugin-device</code> plugin from the git repository, adds it to the project and updates the <code>package.json</code>.</p> <ul> <li><strong><code>cordova plugin add C:/path/to/console/plugin</code></strong></li> </ul> <p>Retrieves the <code>cordova-plugin-device</code> plugin from the specified directory, adds it to the project, and updates the <code>package.json</code> file.</p> <h3 id="mass-saving-of-plugins-on-an-existing-project">Mass Saving of Plugins on an Existing Project</h3> <p>If you have a pre-existing project and you want to save all currently added plugins in the project, you can use:</p> <pre data-language="bash">cordova plugin save
</pre> <h3 id="removing-plugins">Removing Plugins</h3> <p>It is possible to delete a plugin from <code>config.xml</code> and <code>package.json</code> with one of the following commands:</p> <pre data-language="bash">cordova plugin remove &lt;plugin&gt;
cordova plugin rm &lt;plugin&gt;
</pre> <p>For Example:</p> <ul> <li><strong><code>cordova plugin remove cordova-plugin-device</code></strong></li> </ul> <p>Removes the <code>cordova-plugin-device</code> plugin from the project and deletes its entry from <code>package.json</code>.</p> <p><em>Note: If the plugin definition existed in <code>config.xml</code> from a previous version of Cordova CLI, it will also be removed from <code>config.xml</code>.</em></p> <h3 id="restoring-plugins">Restoring Plugins</h3> <p>Plugins are automatically restored from <code>package.json</code> and <code>config.xml</code> when executing the <strong><code>cordova prepare</code></strong> command.</p> <p>If a plugin is defined in both files, the information defined in <code>package.json</code> is used as the source of truth.</p> <p>After <code>prepare</code>, any plugins restored from <code>config.xml</code> will update the <code>package.json</code> file to reflect the values taken from <code>config.xml</code>.</p> <p>If you add a plugin without specifying a <code>&lt;version | folder | git_url&gt;</code>, the version that will be installed is taken from <code>package.json</code> or <code>config.xml</code>.</p> <p><strong>If discovered</strong> in both files, <code>package.json</code> is given higher priority over <code>config.xml</code>.</p> <p>Example:</p> <p>Suppose your <code>config.xml</code> file contains the following entry:</p> <pre data-language="xml">&lt;?xml version='1.0' encoding='utf-8'?&gt;
    ...
    &lt;plugin name="cordova-plugin-device" spec="2.0.1" /&gt;
    ...
&lt;/ xml&gt;
</pre> <p>If you run the command <strong><code>cordova plugin add cordova-plugin-device</code></strong> with no <code>&lt;version | folder | git_url&gt;</code> specified, the platform <code>cordova-plugin-device@2.0.1</code> will be retrieved and installed.</p> <p><strong>Example Order of Priority for Restoring Plugins:</strong></p> <p>Suppose you have defined in <code>config.xml</code> and <code>package.json</code> a plugin and version as follows:</p> <p><strong><code>config.xml</code></strong>:</p> <pre data-language="xml">&lt;plugin name="cordova-plugin-splashscreen"/&gt;
</pre> <p><strong><code>package.json</code></strong>:</p> <pre data-language="json">"cordova": {
  "plugins": [
    "cordova-plugin-splashscreen"
  ]
},
"devDependencies": {
  "cordova-plugin-splashscreen": "1.0.0"
}
</pre> <p>When <code>prepare</code> is executed, the version from <code>package.json</code> has higher priority over <code>config.xml</code> and version <code>1.0.0</code> will be installed.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012, 2013, 2015 The Apache Software Foundation<br>Licensed under the Apache License 2.0.<br>
    <a href="https://cordova.apache.org/docs/en/9.x/platform_plugin_versioning_ref/index.html" class="_attribution-link">https://cordova.apache.org/docs/en/9.x/platform_plugin_versioning_ref/index.html</a>
  </p>
</div>
