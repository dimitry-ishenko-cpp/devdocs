<h1>
Common Marionette Functionality</h1>
<p>Marionette has a few methods that are common to <a href="classes.html">all classes</a>.</p> <h2 id="documentation-index">
Documentation Index</h2>
<ul> <li><a href="#initialize">initialize</a></li> <li><a href="#extend">extend</a></li> <li><a href="#events-api">Events API</a></li> <li><a href="#triggermethod">triggerMethod</a></li> <li><a href="#bindevents">bindEvents</a></li> <li><a href="#unbindevents">unbindEvents</a></li> <li><a href="#bindrequests">bindRequests</a></li> <li><a href="#unbindrequests">unbindRequests</a></li> <li><a href="#normalizemethods">normalizeMethods</a></li> <li><a href="#getoption">getOption</a></li> <li><a href="#mergeoptions">mergeOptions</a></li> <li><a href="#the-options-property">The <code>options</code> Property</a></li> </ul> <h3 id="initialize">
<code>initialize</code>
</h3>
<p>Like the backbone classes, <code>initialize</code> is a method you can define on any Marionette class that will be called when the class is instantiated and will be passed any arguments passed at instantiation. The first argument may contain <a href="#getoption">options</a> the class attaches to the instance.</p> <pre data-language="js"><span class="hljs-keyword">import</span> { MnObject } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> MyObject = MnObject.extend({
  initialize(options, arg2) {
    <span class="hljs-built_in">console</span>.log(options.foo, <span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'foo'</span>), arg2);
  }
});

<span class="hljs-keyword">const</span> myObject = <span class="hljs-keyword">new</span> MyObject({ <span class="hljs-attr">foo</span>: <span class="hljs-string">'bar'</span> }, <span class="hljs-string">'baz'</span>); <span class="hljs-comment">// logs "bar" "bar" "baz"</span>
</pre> <p><a href="https://jsfiddle.net/marionettejs/1ytrwyog/" class="btn btn-action">Live example</a></p> <h3 id="extend">
<code>extend</code>
</h3>
<p>Borrowed from backbone, <code>extend</code> is available on all class definitions for <a href="basics.html#class-based-inheritance">class based inheritance</a></p> <h3 id="events-api">
Events API</h3>
<p>The <a href="http://backbonejs.org/#Events">Backbone.Events API</a> is available to all classes. Each Marionette class can both <code>listenTo</code> any object with this API and have events triggered on the instance.</p> <p><strong>Note</strong> The events API should not be confused with <a href="https://marionettejs.com/.dom.interactions.html#view-events">view <code>events</code></a> which capture DOM events.</p> <h3 id="triggermethod">
<code>triggerMethod</code>
</h3>
<p>Trigger an event and <a href="events.html#onevent-binding">a corresponding method</a> on the object. It is the same as <code>Backbone</code>'s <a href="http://backbonejs.org/#Events-trigger"><code>trigger</code></a> but with the additional method handler.</p> <p>When an event is triggered, the first letter of each section of the event name is capitalized, and the word "on" is prepended to the front of it. Examples:</p> <ul> <li>
<code>triggerMethod('foo')</code> fires the "onFoo" function</li> <li>
<code>triggerMethod('before:foo')</code> fires the "onBeforeFoo" function</li> </ul> <p>All arguments that are passed to the <code>triggerMethod</code> call are passed along to both the event and the method, with the exception of the event name not being passed to the corresponding method.</p> <p><code>triggerMethod('foo', bar)</code> will call <code>onFoo(bar){...})</code></p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { MnObject } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> MyObject = MnObject.extend({
  initialize(){
    <span class="hljs-keyword">this</span>.triggerMethod(<span class="hljs-string">'foo'</span>, <span class="hljs-string">'baz'</span>);
  },
  onFoo(bar){
    <span class="hljs-built_in">console</span>.log(bar);
  }
});

<span class="hljs-keyword">const</span> myObj = <span class="hljs-keyword">new</span> MyObject(); <span class="hljs-comment">// console.log "baz"</span>

myObj.triggerMethod(<span class="hljs-string">'foo'</span>, <span class="hljs-string">'qux'</span>); <span class="hljs-comment">// console.log "qux"</span>
</pre> <p>More information on <code>triggerMethod</code> can be found in the <a href="events.html#triggermethod">Marionette events documentation</a>.</p> <h3 id="bindevents">
<code>bindEvents</code>
</h3>
<p>This method is used to bind any object that works with the <a href="#events-api"><code>Backbone.Events</code> API</a>. This includes all Backbone classes, Marionette classes and <a href="backbone.radio.html">Radio</a> channels.</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> Radio <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.radio'</span>;
<span class="hljs-keyword">import</span> { View } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> MyView = View.extend({
  <span class="hljs-attr">fooEvents</span>: {
    <span class="hljs-string">'change:foo'</span>: <span class="hljs-string">'doSomething'</span>
  },
  initialize(){
    <span class="hljs-keyword">this</span>.fooChannel = Radio.channel(<span class="hljs-string">'foo'</span>);
    <span class="hljs-keyword">this</span>.bindEvents(<span class="hljs-keyword">this</span>.fooChannel, <span class="hljs-keyword">this</span>.fooEvents);
  },
  doSomething(){
    <span class="hljs-comment">// the "change:foo" event was fired from the radio channel</span>
    <span class="hljs-comment">// respond to it appropriately, here.</span>
  }
});
</pre> <p><a href="https://jsfiddle.net/marionettejs/L640ecac/" class="btn btn-action">Live example</a></p> <p>The first parameter is the <code>entity</code> (Backbone.Model, Backbone.Collection or any object that has Backbone.Events mixed in) to bind the events from.</p> <p>The second parameter is a hash of <code>{ 'event:name': 'eventHandler' }</code> configuration. A function can be supplied instead of a string handler name.</p> <p><strong>Errors</strong> An error will be thrown if the second parameter is not an object.</p> <h3 id="unbindevents">
<code>unbindEvents</code>
</h3>
<p>This method is used to unbind any object that works with the <a href="#events-api"><code>Backbone.Events</code> API</a>. This includes all Backbone classes, Marionette classes and <a href="backbone.radio.html">Radio</a> channels.</p> <p>Calling this method without a events hash will unbind all events from the channel.</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> Radio <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.radio'</span>;
<span class="hljs-keyword">import</span> { View } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> MyView = View.extend({
  <span class="hljs-attr">fooEvents</span>: {
    <span class="hljs-string">'change:foo'</span>: <span class="hljs-string">'onChangeFoo'</span>,
    <span class="hljs-string">'stop'</span>: <span class="hljs-string">'onStop'</span>
  },
  initialize(){
    <span class="hljs-keyword">this</span>.fooChannel = Radio.channel(<span class="hljs-string">'foo'</span>);
    <span class="hljs-keyword">this</span>.bindEvents(<span class="hljs-keyword">this</span>.fooChannel, <span class="hljs-keyword">this</span>.fooEvents);
  },
  onChangeFoo(){
    <span class="hljs-comment">// the "change:foo" event was fired from the radio channel</span>
    <span class="hljs-comment">// respond to it appropriately, here.</span>

    <span class="hljs-comment">// Doing something</span>
    <span class="hljs-keyword">this</span>.listenTo(<span class="hljs-keyword">this</span>.fooChannel, <span class="hljs-string">'adhoc'</span>, <span class="hljs-keyword">this</span>.render);
  },
  onStop() {
    <span class="hljs-comment">// Removes all fooEvents</span>
    <span class="hljs-keyword">this</span>.unbindEvents(<span class="hljs-keyword">this</span>.fooChannel, <span class="hljs-keyword">this</span>.fooEvents);

    <span class="hljs-comment">// Removes all bound fooChannel events including `adhoc`</span>
    <span class="hljs-keyword">this</span>.unbindEvents(<span class="hljs-keyword">this</span>.fooChannel);
  }
});
</pre> <p>The first parameter is the <code>entity</code> (Backbone.Model, Backbone.Collection or any object that has Backbone.Events mixed in) to bind the events from.</p> <p>The second parameter is a hash of <code>{ 'event:name': 'eventHandler' }</code> configuration. A function can be supplied instead of a string handler name. If the second paramater is not supplied, all listeners are removed.</p> <p><a href="https://jsfiddle.net/marionettejs/yvsfm65c/" class="btn btn-action">Live example</a></p> <h3 id="bindrequests">
<code>bindRequests</code>
</h3>
<p>This method is used to bind any object that works with the <a href="https://github.com/marionettejs/backbone.radio#backboneradiorequests"><code>Backbone.Radio</code> Request API</a>. This includes <a href="backbone.radio.html">Radio</a> channels.</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> Radio <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.radio'</span>;
<span class="hljs-keyword">import</span> { View } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> MyView = View.extend({
  <span class="hljs-attr">channelName</span>: <span class="hljs-string">'myChannelName'</span>,
  <span class="hljs-attr">radioRequests</span>: {
    <span class="hljs-string">'foo:bar'</span>: <span class="hljs-string">'doFooBar'</span>
  },
  initialize() {
    <span class="hljs-keyword">const</span> channel = Radio.channel(<span class="hljs-keyword">this</span>.channelName);
    <span class="hljs-keyword">this</span>.bindRequests(channel, <span class="hljs-keyword">this</span>.radioRequests);
  },
  doFooBar() {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'foo:bar'</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-string">'bar'</span>;
  }
 });

<span class="hljs-keyword">const</span> myView = <span class="hljs-keyword">new</span> MyView();
<span class="hljs-keyword">const</span> channel = Radio.channel(<span class="hljs-string">'myChannelName'</span>);
channel.request(<span class="hljs-string">'foo:bar'</span>); <span class="hljs-comment">// Logs 'foo:bar' and returns 'bar'</span>
</pre> <p><a href="https://jsfiddle.net/marionettejs/hmjgkg7w/" class="btn btn-action">Live example</a></p> <p>The first parameter, <code>channel</code>, is an instance from <code>Radio</code>.</p> <p>The second parameter is a hash of <code>{ 'request:name': 'replyHandler' }</code> configuration. A function can be supplied instead of a string handler name.</p> <p><strong>Errors</strong> An error will be thrown if the second parameter is not an object.</p> <h3 id="unbindrequests">
<code>unbindRequests</code>
</h3>
<p>This method is used to unbind any object that works with the <a href="https://github.com/marionettejs/backbone.radio#backboneradiorequests"><code>Backbone.Radio</code> Request API</a>.</p> <p>Calling this method without a radio requests hash will unbind all requests from the channel.</p> <p><strong>NOTE: To avoid memory leaks, <code>unbindRequests</code> should be called in or before <code>onBeforeDestroy</code>.</strong></p> <pre data-language="javascript"><span class="hljs-keyword">import</span> Radio <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.radio'</span>;
<span class="hljs-keyword">import</span> { View } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> MyView = View.extend({
  <span class="hljs-attr">channelName</span>: <span class="hljs-string">'myChannelName'</span>,
  <span class="hljs-attr">radioRequests</span>: {
    <span class="hljs-string">'foo:bar'</span>: <span class="hljs-string">'doFooBar'</span>
  },
  onAttach() {
    <span class="hljs-keyword">const</span> channel = Radio.channel(<span class="hljs-keyword">this</span>.channelName);
    <span class="hljs-keyword">this</span>.bindRequests(channel, <span class="hljs-keyword">this</span>.radioRequests);
  },
  onBeforeDetach() {
    <span class="hljs-keyword">const</span> channel = Radio.channel(<span class="hljs-keyword">this</span>.channelName);
    <span class="hljs-keyword">this</span>.unbindRequests(channel, <span class="hljs-keyword">this</span>.radioRequests);
  }
 });
</pre> <p><a href="https://jsfiddle.net/marionettejs/r5kmwwke/">Live examples</a></p> <p>The first parameter, <code>channel</code>, is an instance from <code>Radio</code>.</p> <p>The second parameter is a hash of <code>{ 'request:name': 'replyHandler' }</code> configuration. A function can be supplied instead of a string handler name. If the second paramater is not supplied, all handlers are removed.</p> <h3 id="normalizemethods">
<code>normalizeMethods</code>
</h3>
<p>Receives a hash of event names and functions and/or function names, and returns the same hash with the function names replaced with the function references themselves.</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { View } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> MyView = View.extend({
  initialize() {
    <span class="hljs-keyword">const</span> hash = {
      <span class="hljs-string">'action:one'</span>: <span class="hljs-string">'handleActionOne'</span>, <span class="hljs-comment">// This will become a reference to `this.handleActionOne`</span>
      <span class="hljs-string">'action:two'</span>: <span class="hljs-keyword">this</span>.handleActionTwo
    };

    <span class="hljs-keyword">this</span>.normalizedHash = <span class="hljs-keyword">this</span>.normalizeMethods(hash);
  },

  <span class="hljs-keyword">do</span>(action) {
    <span class="hljs-keyword">this</span>.normalizedHash[action]();
  },

  handleActionOne() {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'action:one was fired'</span>);
  },

  handleActionTwo() {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'action:two was fired'</span>);
  }

});

<span class="hljs-keyword">const</span> myView = <span class="hljs-keyword">new</span> MyView();
myView.do(<span class="hljs-string">'action:one'</span>);
myView.do(<span class="hljs-string">'action:two'</span>);
</pre> <p><a href="https://jsfiddle.net/marionettejs/zzjhm4p1/" class="btn btn-action">Live example</a></p> <h3 id="getoption">
<code>getOption</code>
</h3>
<p>To access an option, we use the <code>getOption</code> method. <code>getOption</code> will fall back to the value of the same name defined on the instance if not defined in the options.</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { View } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> View = View.extend({
  <span class="hljs-attr">classVal</span>: <span class="hljs-string">'class value'</span>,
  initialize(){
    <span class="hljs-keyword">this</span>.instanceVal = <span class="hljs-string">'instance value'</span>
  }
});

<span class="hljs-keyword">const</span> view = <span class="hljs-keyword">new</span> View({ <span class="hljs-attr">optVal</span>: <span class="hljs-string">'option value'</span> });

view.getOption(<span class="hljs-string">'instanceVal'</span>); <span class="hljs-comment">// instance value</span>
view.getOption(<span class="hljs-string">'classVal'</span>); <span class="hljs-comment">// class value</span>
view.getOption(<span class="hljs-string">'optVal'</span>); <span class="hljs-comment">// option value</span>

<span class="hljs-keyword">const</span> view2 = <span class="hljs-keyword">new</span> View({ <span class="hljs-attr">instanceVal</span>: <span class="hljs-string">'foo'</span>, <span class="hljs-attr">classVal</span>: <span class="hljs-string">'bar'</span>, <span class="hljs-attr">optVal</span>: <span class="hljs-string">'baz'</span> });

view.getOption(<span class="hljs-string">'instanceVal'</span>); <span class="hljs-comment">// foo</span>
view.getOption(<span class="hljs-string">'classVal'</span>); <span class="hljs-comment">// bar</span>
view.getOption(<span class="hljs-string">'optVal'</span>); <span class="hljs-comment">// baz</span>
</pre> <p><a href="https://jsfiddle.net/marionettejs/ekvb8wwa/" class="btn btn-action">Live example</a></p> <h4>
Falsey values</h4>
<p>The <code>getOption</code> function will return any falsey value from the <code>options</code>, other than <code>undefined</code>. If an object's options has an undefined value, it will attempt to read the value from the object directly.</p> <p>For example:</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { MnObject } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> MyObject = MnObject.extend({
  <span class="hljs-attr">foo</span>: <span class="hljs-string">'bar'</span>,

  initialize() {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'foo'</span>));
  }
});

<span class="hljs-keyword">const</span> model1 = <span class="hljs-keyword">new</span> MyObject(); <span class="hljs-comment">// =&gt; "bar"</span>

<span class="hljs-keyword">const</span> myObj = {};
<span class="hljs-built_in">console</span>.log(myObj.foo); <span class="hljs-comment">// undefined</span>
<span class="hljs-keyword">const</span> model2 = <span class="hljs-keyword">new</span> MyObject({ <span class="hljs-attr">foo</span>: myObj.foo }); <span class="hljs-comment">// =&gt; "bar"</span>
</pre> <p><a href="https://jsfiddle.net/marionettejs/2ddk28ap/" class="btn btn-action">Live example</a></p> <p>In this example, "bar" is returned both times because the second example has an undefined value for <code>f</code>.</p> <h3 id="mergeoptions">
<code>mergeOptions</code>
</h3>
<p>The <code>mergeOptions</code> method takes two arguments: an <code>options</code> object and <code>keys</code> to pull from the options object. Any matching <code>keys</code> will be merged onto the class instance. For example:</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { MnObject } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> MyObject = MnObject.extend({
  initialize(options) {
    <span class="hljs-keyword">this</span>.mergeOptions(options, [<span class="hljs-string">'model'</span>, <span class="hljs-string">'something'</span>]);
    <span class="hljs-comment">// this.model and this.something will now be available</span>
  }
});

<span class="hljs-keyword">const</span> myObject = <span class="hljs-keyword">new</span> MyObject({
  <span class="hljs-attr">model</span>: <span class="hljs-keyword">new</span> Backbone.Model(),
  <span class="hljs-attr">something</span>: <span class="hljs-string">'test'</span>,
  <span class="hljs-attr">another</span>: <span class="hljs-string">'value'</span>
});

<span class="hljs-built_in">console</span>.log(myObject.model);
<span class="hljs-built_in">console</span>.log(myObject.something);
<span class="hljs-built_in">console</span>.log(myObject.getOption(<span class="hljs-string">'another'</span>));
</pre> <p><a href="https://jsfiddle.net/marionettejs/ub510cbx/" class="btn btn-action">Live example</a></p> <p>In this example, <code>model</code> and <code>something</code> are directly available on the <code>MyObject</code> instance, while <code>another</code> must be accessed via <code>getOption</code>. This is handy when you want to add extra keys that will be used heavily throughout the defined class.</p> <h3 id="the-options-property">
The <code>options</code> Property</h3>
<p>The Marionette classes accept an <code>options</code> property in the class definition which is merged with the <code>options</code> argument passed at instantiation. The values from the passed in <code>options</code> overrides the property values.</p> <blockquote> <p>The <code>options</code> argument passed in <code>initialize</code> method is equal to the passed at class instantiation. To get the option inside initialize considering the <code>options</code> property is necessary to use <code>getOption</code></p> </blockquote> <pre data-language="javascript"><span class="hljs-keyword">import</span> { MnObject } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> MyObject = MnObject.extend({
  <span class="hljs-attr">options</span>: {
    <span class="hljs-attr">foo</span>: <span class="hljs-string">'bar'</span>,
    <span class="hljs-attr">another</span>: <span class="hljs-string">'thing'</span>
  },

  initialize(options) {
    <span class="hljs-built_in">console</span>.log(options.foo) <span class="hljs-comment">// undefined</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'foo'</span>)) <span class="hljs-comment">// 'bar'</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.getOption(<span class="hljs-string">'another'</span>)) <span class="hljs-comment">// 'value'</span>
  }
});

<span class="hljs-keyword">const</span> myObject = <span class="hljs-keyword">new</span> MyObject({
  <span class="hljs-attr">another</span>: <span class="hljs-string">'value'</span>
});
</pre> <h2 id="marionette-classes">
Marionette Classes</h2>
<p>Marionette provides a few classes for building your view tree and application structure.</p> <p><a href="classes.html" class="btn btn-action">Continue Reading...</a>.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2017 Muted Solutions, LLC<br>Licensed under the MIT License.<br>
    <a href="https://marionettejs.com/docs/v4.0.0/common.html" class="_attribution-link">https://marionettejs.com/docs/v4.0.0/common.html</a>
  </p>
</div>
