<h1>
Regions</h1>
<p>Regions provide consistent methods to manage, show and destroy views in your applications and views.</p> <p><code>Region</code> includes:</p> <ul> <li><a href="common.html">Common Marionette Functionality</a></li> <li><a href="events.class.html#region-events">Class Events</a></li> <li><a href="dom.api.html">The DOM API</a></li> </ul> <p>See the documentation for <a href="marionette.view.html#laying-out-views---regions">laying out views</a> for an introduction in managing regions throughout your application.</p> <p>Regions maintain the <a href="view.lifecycle.html">View's lifecycle</a> while showing or emptying a view.</p> <h2 id="documentation-index">
Documentation Index</h2>
<ul> <li><a href="#instantiating-a-region">Instantiating a Region</a></li> <li><a href="#defining-the-application-region">Defining the Application Region</a></li> <li>
<a href="#defining-regions">Defining Regions</a><ul> <li><a href="#string-selector">String Selector</a></li> <li><a href="#additional-options">Additional Options</a></li> <li><a href="#specifying-regions-as-a-function">Specifying <code>regions</code> as a Function</a></li> <li><a href="#using-a-regionclass">Using a RegionClass</a></li> <li><a href="#referencing-ui-in-regions">Referencing UI in <code>regions</code></a></li> </ul> </li> <li><a href="#adding-regions">Adding Regions</a></li> <li><a href="#removing-regions">Removing Regions</a></li> <li><a href="#using-regions-on-a-view">Using Regions on a view</a></li> <li>
<a href="#showing-a-view">Showing a View</a><ul> <li><a href="#checking-whether-a-region-is-showing-a-view">Checking whether a region is showing a view</a></li> <li>
<a href="#non-marionette-views">Non-Marionette Views</a><ul> <li><a href="#partially-rendered-views">Partially-rendered Views</a></li> </ul> </li> </ul> </li> <li><a href="#showing-a-template">Showing a Template</a></li> <li>
<a href="#emptying-a-region">Emptying a Region</a><ul> <li><a href="#preserving-existing-views">Preserving Existing Views</a></li> <li><a href="#detaching-existing-views">Detaching Existing Views</a></li> </ul> </li> <li><a href="#reset-a-region"><code>reset</code> A Region</a></li> <li><a href="#destroy-a-region"><code>destroy</code> A Region</a></li> <li><a href="#check-if-view-is-being-swapped-by-another">Check If View Is Being Swapped By Another</a></li> <li><a href="#set-how-views-el-is-attached">Set How View's <code>el</code> Is Attached</a></li> <li><a href="#configure-how-to-remove-view">Configure How To Remove View</a></li> </ul> <h2 id="instantiating-a-region">
Instantiating a Region</h2>
<p>When instantiating a <code>Region</code> there are two properties, if passed, that will be attached directly to the instance: <code>el</code>, and <code>replaceElement</code>.</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { Region } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> myRegion = <span class="hljs-keyword">new</span> Region({ ... });
</pre> <p>While regions may be instantiated and useful on their own, their primary use case is through the <a href="#defining-the-application-region"><code>Application</code></a> and <a href="#defining-regions"><code>View</code></a> classes.</p> <h2 id="defining-the-application-region">
Defining the Application Region</h2>
<p>The Application defines a single region <code>el</code> using the <code>region</code> attribute. This can be accessed through <code>getRegion()</code> or have a view displayed directly with <code>showView()</code>. Below is a short example:</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { Application } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;
<span class="hljs-keyword">import</span> SomeView <span class="hljs-keyword">from</span> <span class="hljs-string">'./view'</span>;

<span class="hljs-keyword">const</span> MyApp = Application.extend({
  <span class="hljs-attr">region</span>: <span class="hljs-string">'#main-content'</span>,

  onStart() {
    <span class="hljs-keyword">const</span> mainRegion = <span class="hljs-keyword">this</span>.getRegion();  <span class="hljs-comment">// Has all the properties of a `Region`</span>
    mainRegion.show(<span class="hljs-keyword">new</span> SomeView());
  }
});
</pre> <p><a href="http://jsfiddle.net/marionettejs/9fburmb8/" class="btn btn-action">Live example</a></p> <p>For more information, see the <a href="marionette.application.html#application-region">Application docs</a>.</p> <h2 id="defining-regions">
Defining Regions</h2>
<p>In Marionette you can define a region with a string selector or an object literal on your <code>Application</code> or <code>View</code>. This section will document the two types as applied to <code>View</code>, although they will work for <code>Application</code> as well - just replace <code>regions</code> with <code>region</code> in your definition.</p> <p><strong>Errors</strong> An error will be thrown for an incorrect region configuration.</p> <h3 id="string-selector">
String Selector</h3>
<p>You can use a jQuery string selector to define regions.</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { View } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> MyView = View.extend({
  <span class="hljs-attr">regions</span>: {
    <span class="hljs-attr">mainRegion</span>: <span class="hljs-string">'#main'</span>
  }
});
</pre> <h3 id="additional-options">
Additional Options</h3>
<p>You can define regions with an object literal. Object literal definitions expect an <code>el</code> property - the selector string to hook the region into. With this format is possible to define whether showing the region overwrites the <code>el</code> or just overwrites the content (the default behavior).</p> <p>To overwrite the parent <code>el</code> of the region with the rendered contents of the inner View, use <code>replaceElement</code> as so:</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { View } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> OverWriteView = View.extend({
  <span class="hljs-attr">className</span>: <span class="hljs-string">'.new-class'</span>
});

<span class="hljs-keyword">const</span> MyView = View.extend({
  <span class="hljs-attr">regions</span>: {
    <span class="hljs-attr">main</span>: {
      <span class="hljs-attr">el</span>: <span class="hljs-string">'.overwrite-me'</span>,
      <span class="hljs-attr">replaceElement</span>: <span class="hljs-literal">true</span>
    }
  }
});
<span class="hljs-keyword">const</span> view = <span class="hljs-keyword">new</span> MyView();
view.render();

<span class="hljs-built_in">console</span>.log(view.$(<span class="hljs-string">'.overwrite-me'</span>).length); <span class="hljs-comment">// 1</span>
<span class="hljs-built_in">console</span>.log(view.$(<span class="hljs-string">'.new-class'</span>).length); <span class="hljs-comment">// 0</span>

view.showChildView(<span class="hljs-string">'main'</span>, <span class="hljs-keyword">new</span> OverWriteView());

<span class="hljs-built_in">console</span>.log(view.$(<span class="hljs-string">'.overwrite-me'</span>).length); <span class="hljs-comment">// 0</span>
<span class="hljs-built_in">console</span>.log(view.$(<span class="hljs-string">'.new-class'</span>).length); <span class="hljs-comment">// 1</span>
</pre> <p>When the instance of <code>MyView</code> is rendered, the <code>.overwrite-me</code> element will be removed from the DOM and replaced with an element of <code>.new-class</code> - this lets us do things like rendering views inside <code>table</code> or <code>select</code> more easily - these elements are usually very strict on what content they will allow.</p> <pre data-language="js"><span class="hljs-keyword">import</span> { View } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> MyView = View.extend({
  <span class="hljs-attr">regions</span>: {
    <span class="hljs-attr">regionDefinition</span>: {
      <span class="hljs-attr">el</span>: <span class="hljs-string">'.bar'</span>,
      <span class="hljs-attr">replaceElement</span>: <span class="hljs-literal">true</span>
    }
  }
});
</pre> <p><strong>Errors</strong> An error will be thrown in the regions <code>el</code> is not specified, or if the <code>el</code> does not exist in the html.</p> <h3 id="specifying-regions-as-a-function">
Specifying <code>regions</code> as a Function</h3>
<p>On a <code>View</code> the <code>regions</code> attribute can also be a <a href="basics.html#functions-returning-values">function returning an object</a>:</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { View } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> MyView = View.extend({
  regions(){
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">firstRegion</span>: <span class="hljs-string">'#first-region'</span>
    };
  }
});
</pre> <h3 id="using-a-regionclass">
Using a RegionClass</h3>
<p>If you've created a custom region class, you can use it to define your region.</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { Application, Region, View } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> MyRegion = Region.extend({
  onShow(){
    <span class="hljs-comment">// Scroll to the middle</span>
    <span class="hljs-keyword">this</span>.$el.scrollTop(<span class="hljs-keyword">this</span>.currentView.$el.height() / <span class="hljs-number">2</span> - <span class="hljs-keyword">this</span>.$el.height() / <span class="hljs-number">2</span>);
  }
});

<span class="hljs-keyword">const</span> MyApp = Application.extend({
  <span class="hljs-attr">regionClass</span>: MyRegion,
  <span class="hljs-attr">region</span>: <span class="hljs-string">'#first-region'</span>
})

<span class="hljs-keyword">const</span> MyView = View.extend({
  <span class="hljs-attr">regionClass</span>: MyRegion,
  <span class="hljs-attr">regions</span>: {
    <span class="hljs-attr">firstRegion</span>: {
      <span class="hljs-attr">el</span>: <span class="hljs-string">'#first-region'</span>,
      <span class="hljs-attr">regionClass</span>: Region <span class="hljs-comment">// Don't scroll this to the top</span>
    },
    <span class="hljs-attr">secondRegion</span>: <span class="hljs-string">'#second-region'</span>
  }
});
</pre> <p><a href="https://jsfiddle.net/marionettejs/oLLrzx8g/" class="btn btn-action">Live example</a></p> <h3 id="referencing-ui-in-regions">
Referencing UI in <code>regions</code>
</h3>
<p>The UI attribute can be useful when setting region selectors - simply use the <code>@ui.</code> prefix:</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { View } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> MyView = View.extend({
  <span class="hljs-attr">ui</span>: {
    <span class="hljs-attr">region</span>: <span class="hljs-string">'#first-region'</span>
  },
  <span class="hljs-attr">regions</span>: {
    <span class="hljs-attr">firstRegion</span>: <span class="hljs-string">'@ui.region'</span>
  }
});
</pre> <p><a href="https://jsfiddle.net/marionettejs/ey1od1g8/" class="btn btn-action">Live example</a></p> <h2 id="adding-regions">
Adding Regions</h2>
<p>To add regions to a view after it has been instantiated, simply use the <code>addRegion</code> method:</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> MyView <span class="hljs-keyword">from</span> <span class="hljs-string">'./myview'</span>;

<span class="hljs-keyword">const</span> myView = <span class="hljs-keyword">new</span> MyView();
myView.addRegion(<span class="hljs-string">'thirdRegion'</span>, <span class="hljs-string">'#third-region'</span>);
</pre> <p>Now we can access <code>thirdRegion</code> as we would the others.</p> <p>You can also add multiple regions using <code>addRegions</code>.</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> MyView <span class="hljs-keyword">from</span> <span class="hljs-string">'./myview'</span>;

<span class="hljs-keyword">const</span> myView = <span class="hljs-keyword">new</span> MyView();
myView.addRegions({
  <span class="hljs-attr">main</span>: {
    <span class="hljs-attr">el</span>: <span class="hljs-string">'.overwrite-me'</span>,
    <span class="hljs-attr">replaceElement</span>: <span class="hljs-literal">true</span>
  },
  <span class="hljs-attr">sidebar</span>: <span class="hljs-string">'.sidebar'</span>
});
</pre> <p><a href="http://jsfiddle.net/marionettejs/kjvzdyd6/" class="btn btn-action">Live example</a></p> <h2 id="removing-regions">
Removing Regions</h2>
<p>You can remove all of the regions from a view by calling <code>removeRegions</code> or you can remove a region by name using <code>removeRegion</code>. When a region is removed the region will be destroyed.</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { View } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> MyView = View.extend({
  <span class="hljs-attr">regions</span>: {
    <span class="hljs-attr">main</span>: <span class="hljs-string">'.main'</span>,
    <span class="hljs-attr">sidebar</span>: <span class="hljs-string">'.sidebar'</span>,
    <span class="hljs-attr">header</span>: <span class="hljs-string">'.header'</span>
  }
});

<span class="hljs-keyword">const</span> myView = <span class="hljs-keyword">new</span> MyView();

<span class="hljs-comment">// remove only the main region</span>
<span class="hljs-keyword">const</span> mainRegion = myView.removeRegion(<span class="hljs-string">'main'</span>);

mainRegion.isDestroyed(); <span class="hljs-comment">// -&gt; true</span>

<span class="hljs-comment">// remove all regions</span>
myView.removeRegions();
</pre> <h2 id="using-regions-on-a-view">
Using Regions on a view</h2>
<p>In addition to adding and removing regions there are a few methods to help utilize regions. All of these methods will first render an unrendered view so that regions are properly initialized.</p> <ul> <li>
<code>getRegion(name)</code> - Request a region from a view by name.</li> <li>
<code>getRegions()</code> - Returns an object literal of all regions on the view organized by name.</li> <li>
<code>hasRegion(name)</code> - Check if a view has a region.</li> <li>
<code>emptyRegions()</code> - Empty all of the regions on a view.</li> </ul> <h2 id="showing-a-view">
Showing a View</h2>
<p>Once a region is defined, you can call its <code>show</code> method to display the view:</p> <pre data-language="javascript"><span class="hljs-keyword">const</span> myView = <span class="hljs-keyword">new</span> MyView();
<span class="hljs-keyword">const</span> childView = <span class="hljs-keyword">new</span> MyChildView();
<span class="hljs-keyword">const</span> mainRegion = myView.getRegion(<span class="hljs-string">'main'</span>);

<span class="hljs-comment">// render and display the view</span>
mainRegion.show(childView, { <span class="hljs-attr">fooOption</span>: <span class="hljs-string">'bar'</span> });
</pre> <p>This is equivalent to a view's <code>showChildView</code> which can be used as:</p> <pre data-language="javascript"><span class="hljs-keyword">const</span> myView = <span class="hljs-keyword">new</span> MyView();
<span class="hljs-keyword">const</span> childView = <span class="hljs-keyword">new</span> MyChildView();

<span class="hljs-comment">// render and display the view</span>
myView.showChildView(<span class="hljs-string">'main'</span>, childView, { <span class="hljs-attr">fooOption</span>: <span class="hljs-string">'bar'</span> });
</pre> <p>Both forms take an <code>options</code> object that will be passed to the <a href="events.class.html#show-and-beforeshow-events">events fired during <code>show</code></a>.</p> <p>For more information on <code>showChildView</code> and <code>getChildView</code>, see the <a href="marionette.view.html#managing-children">Documentation for Views</a></p> <p><strong>Errors</strong> An error will be thrown if the view is falsy or destroyed.</p> <h3 id="checking-whether-a-region-is-showing-a-view">
Checking whether a region is showing a view</h3>
<p>If you wish to check whether a region has a view, you can use the <code>hasView</code> function. This will return a boolean value depending whether or not the region is showing a view.</p> <pre data-language="javascript"><span class="hljs-keyword">const</span> myView = <span class="hljs-keyword">new</span> MyView();
<span class="hljs-keyword">const</span> mainRegion = myView.getRegion(<span class="hljs-string">'main'</span>);

mainRegion.hasView() <span class="hljs-comment">// false</span>
mainRegion.show(<span class="hljs-keyword">new</span> OtherView());
mainRegion.hasView() <span class="hljs-comment">// true</span>
</pre> <p>If you show a view in a region with an existing view, Marionette will <a href="#emptying-a-region">remove the existing View</a> before showing the new one.</p> <h3 id="non-marionette-views">
Non-Marionette Views</h3>
<p>Marionette Regions aren't just for showing Marionette Views - they can also display instances of a <a href="http://backbonejs.org/#View"><code>Backbone.View</code></a>. To do this, ensure your view defines a <code>render()</code> method and just treat it like a regular Marionette View:</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> _ <span class="hljs-keyword">from</span> <span class="hljs-string">'underscore'</span>;
<span class="hljs-keyword">import</span> Bb <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone'</span>;
<span class="hljs-keyword">import</span> { View } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> MyChildView = Bb.View.extend({
  render() {
    <span class="hljs-keyword">this</span>.$el.append(<span class="hljs-string">'&lt;p&gt;Some text&lt;/p&gt;'</span>);
  },

  onRender() {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Regions also fire Lifecycle events on Backbone.View!'</span>);
  }
});

<span class="hljs-keyword">const</span> MyParentView = View.extend({
  <span class="hljs-attr">regions</span>: {
    <span class="hljs-attr">child</span>: <span class="hljs-string">'.child-view'</span>
  },

  <span class="hljs-attr">template</span>: _.template(<span class="hljs-string">'&lt;div class="child-view"&gt;&lt;/div&gt;'</span>),

  onRender() {
    <span class="hljs-keyword">this</span>.showChildView(<span class="hljs-string">'child'</span>, <span class="hljs-keyword">new</span> MyChildView());
  }
});
</pre> <p>As you can see above, you can listen to <a href="view.lifecycle.html">Lifecycle Events</a> on <code>Backbone.View</code> and Marionette will fire the events for you.</p> <h2 id="showing-a-template">
Showing a Template</h2>
<p>You can show a template or a string directly into a region. Additionally you can pass an object literal containing a template and any other view options. Under the hood a <code>Marionette.View</code> is instantiated using the template.</p> <pre data-language="javascript"><span class="hljs-keyword">const</span> myView = <span class="hljs-keyword">new</span> MyView();

myView.showChildView(<span class="hljs-string">'main'</span>, {
  <span class="hljs-attr">template</span>: _.template(<span class="hljs-string">'This is the &lt;%- section %&gt; page'</span>),
  <span class="hljs-attr">templateContext</span>: { <span class="hljs-attr">section</span>: <span class="hljs-string">'main'</span> }
});

myView.showChildView(<span class="hljs-string">'header'</span>, _.template(<span class="hljs-string">'Welcome to the site'</span>));

myView.getRegion(<span class="hljs-string">'other'</span>).show(<span class="hljs-string">'This text is in another region'</span>);
</pre> <h2 id="emptying-a-region">
Emptying a Region</h2>
<p>You can remove a view from a region (effectively "unshowing" it) with <code>region.empty()</code> on a region:</p> <pre data-language="javascript"><span class="hljs-keyword">const</span> myView = <span class="hljs-keyword">new</span> MyView();

myView.showChildView(<span class="hljs-string">'main'</span>, <span class="hljs-keyword">new</span> OtherView());
<span class="hljs-keyword">const</span> mainRegion = myView.getRegion(<span class="hljs-string">'main'</span>);
mainRegion.empty();
</pre> <p>This will destroy the view, clean up any event handlers and remove it from the DOM. When a region is emptied <a href="events.class.html#empty-and-beforeempty-events">empty events are triggered</a>.</p> <p><strong>NOTE</strong> If the region does <em>not</em> currently contain a View it will detach any HTML inside the region when emptying. If the region <em>does</em> contain a View <a href="upgrade.html#changes-to-regionshow">any HTML that doesn't belong to the View will remain</a>.</p> <h3 id="preserving-existing-views">
Preserving Existing Views</h3>
<p>If you replace the current view with a new view by calling <code>show</code>, it will automatically destroy the previous view. You can prevent this behavior by <a href="#detaching-existing-views">detaching the view</a> before showing another one.</p> <h3 id="detaching-existing-views">
Detaching Existing Views</h3>
<p>If you want to detach an existing view from a region, use <code>detachView</code>.</p> <pre data-language="javascript"><span class="hljs-keyword">const</span> myView = <span class="hljs-keyword">new</span> MyView();

<span class="hljs-keyword">const</span> myOtherView = <span class="hljs-keyword">new</span> MyView();

<span class="hljs-keyword">const</span> childView = <span class="hljs-keyword">new</span> MyChildView();

<span class="hljs-comment">// render and display the view</span>
myView.showChildView(<span class="hljs-string">'main'</span>, childView);

<span class="hljs-comment">// ... somewhere down the line</span>
myOtherView.showChildView(<span class="hljs-string">'main'</span>, myView.getRegion(<span class="hljs-string">'main'</span>).detachView());
</pre> <p><strong>Note</strong> When detaching a view you must pass it to a new region so Marionette can handle its life cycle automatically or <code>destroy</code> it manually to prevent memory leaks.</p> <h2 id="reset-a-region">
<code>reset</code> A Region</h2>
<p>A region can be <code>reset</code> at any time. This destroys any existing view being displayed, and deletes the cached <code>el</code>. The next time the region shows a view, the region's <code>el</code> is queried from the DOM.</p> <pre data-language="javascript"><span class="hljs-keyword">const</span> myView = <span class="hljs-keyword">new</span> MyView();
myView.showChildView(<span class="hljs-string">'main'</span>, <span class="hljs-keyword">new</span> OtherView());
<span class="hljs-keyword">const</span> myRegion = myView.getRegion(<span class="hljs-string">'main'</span>);
myRegion.reset();
</pre> <p>This can be useful in unit testing your views.</p> <h2 id="destroy-a-region">
<code>destroy</code> A Region</h2>
<p>A region can be destroyed which will <code>reset</code> the region, remove it from any parent view, and stop any internal region listeners. A destroyed region should not be reused.</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { View } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> MyView = View.extend({
  <span class="hljs-attr">regions</span>: {
    <span class="hljs-attr">mainRegion</span>: <span class="hljs-string">'#main'</span>
  }
});

<span class="hljs-keyword">const</span> myView = <span class="hljs-keyword">new</span> MyView();

<span class="hljs-keyword">const</span> myRegion = myView.getRegion(<span class="hljs-string">'mainRegion'</span>);

myRegion.show(<span class="hljs-keyword">new</span> ChildView());

myRegion.destroy();

myRegion.isDestroyed(); <span class="hljs-comment">// true</span>
myRegion.hasView(); <span class="hljs-comment">// false</span>
myView.hasRegion(<span class="hljs-string">'mainRegion'</span>); <span class="hljs-comment">// false</span>
</pre> <h2 id="check-if-view-is-being-swapped-by-another">
Check If View Is Being Swapped By Another</h2>
<p>The <code>isSwappingView</code> method returns if a view is being swapped by another one. It's useful inside region lifecycle events / methods.</p> <p>The example will show an message when the region is empty:</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { Region } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> EmptyMsgRegion = Region.extend({
  onEmpty() {
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.isSwappingView()) {
      <span class="hljs-keyword">this</span>.$el.append(<span class="hljs-string">'Empty Region'</span>);
    }
  }
});
</pre> <p><a href="https://jsfiddle.net/marionettejs/c1nacq0c/" class="btn btn-action">Live example</a></p> <h2 id="set-how-views-el-is-attached-and-detached">
Set How View's <code>el</code> Is Attached and Detached</h2>
<p>Override the region's <code>attachHtml</code> method to change how the view is attached to the DOM (when not using <code>replaceElement: true</code>. This method receives one parameter - the view to show.</p> <p>The default implementation of <code>attachHtml</code> is essentially:</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { Region } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

Region.prototype.attachHtml = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">view</span>)</span>{
  <span class="hljs-keyword">this</span>.el.appendChild(view.el);
}
</pre> <p>Similar to <code>attachHtml</code>, override <code>detachHtml</code> to determine how the region detaches the contents from its <code>el</code>. This method receives no parameters.</p> <p>For most cases you will want to use the <a href="dom.api.html">DOM API</a> to determine how a region html is attached, but in some cases you may want to override a single Region class for situations like animation where you want to control both attaching and <a href="#configure-how-to-remove-view">view removal</a>.</p> <p>This example will make a view slide down from the top of the screen instead of just appearing in place:</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { Region, View } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> ModalRegion = Region.extend({
  attachHtml(view){
    <span class="hljs-comment">// Some effect to show the view:</span>
    <span class="hljs-keyword">this</span>.$el.empty().append(view.el);
    <span class="hljs-keyword">this</span>.$el.hide().slideDown(<span class="hljs-string">'fast'</span>);
  }
});

<span class="hljs-keyword">const</span> MyView = View.extend({
  <span class="hljs-attr">regions</span>: {
    <span class="hljs-attr">mainRegion</span>: <span class="hljs-string">'#main-region'</span>,
    <span class="hljs-attr">modalRegion</span>: {
      <span class="hljs-attr">regionClass</span>: ModalRegion,
      <span class="hljs-attr">el</span>: <span class="hljs-string">'#modal-region'</span>
    }
  }
});
</pre> <h2 id="configure-how-to-remove-view">
Configure How To Remove View</h2>
<p>Override the region's <code>removeView</code> method to change how and when the view is destroyed / removed from the DOM. This method receives one parameter - the view to remove.</p> <p>The default implementation of <code>removeView</code> is:</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { Region } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

Region.prototype.removeView = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">view</span>)</span>{
  <span class="hljs-keyword">this</span>.destroyView(view);
}
</pre> <blockquote> <p><code>destroyView</code> method destroys the view taking into consideration if is a Marionette.View descendant or vanilla Backbone view. It can be replaced by a <code>view.destroy()</code> call if is ensured that view descends from Marionette.View</p> </blockquote> <p>This example will animate with a fade effect showing and hiding the view:</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { Region, View } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> AnimatedRegion = Region.extend({
  attachHtml(view) {
    view.$el
      .css({<span class="hljs-attr">display</span>: <span class="hljs-string">'none'</span>})
      .appendTo(<span class="hljs-keyword">this</span>.$el);
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.isSwappingView()) view.$el.fadeIn(<span class="hljs-string">'slow'</span>);
  },

  removeView(view) {
    view.$el.fadeOut(<span class="hljs-string">'slow'</span>, () =&gt; {
      <span class="hljs-keyword">this</span>.destroyView(view);
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.currentView) <span class="hljs-keyword">this</span>.currentView.$el.fadeIn(<span class="hljs-string">'slow'</span>);
    });
  }
});

<span class="hljs-keyword">const</span> MyView = View.extend({
  <span class="hljs-attr">regions</span>: {
    <span class="hljs-attr">animatedRegion</span>: {
      <span class="hljs-attr">regionClass</span>: AnimatedRegion,
      <span class="hljs-attr">el</span>: <span class="hljs-string">'#animated-region'</span>
    }
  }
});
</pre> <p><a href="https://jsfiddle.net/marionettejs/qtvjLu70/" class="btn btn-action">Live example</a></p> <p>Using a similar approach is possible to create a region animated with CSS:</p> <p><a href="https://jsfiddle.net/marionettejs/8uoabg7c/" class="btn btn-action">Live example</a></p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2017 Muted Solutions, LLC<br>Licensed under the MIT License.<br>
    <a href="https://marionettejs.com/docs/v4.0.0/marionette.region.html" class="_attribution-link">https://marionettejs.com/docs/v4.0.0/marionette.region.html</a>
  </p>
</div>
