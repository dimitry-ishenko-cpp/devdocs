<h1 id="varnishstat-1">varnishstat</h1> <section id="varnish-cache-statistics"> <h2>Varnish Cache statistics</h2> <dl class="field-list simple"> <dt class="field-odd">Manual section<span class="colon">:</span>
</dt> <dd class="field-odd">
<p>1</p> </dd> </dl> <section id="synopsis"> <h3>SYNOPSIS</h3> <p>varnishstat [-1] [-f &lt;glob&gt;] [-h] [-I &lt;glob&gt;] [-j] [-l] [-n &lt;dir&gt;] [-r] [-t &lt;seconds|off&gt;] [-V] [-X &lt;glob&gt;] [-x]</p> </section> <section id="description"> <h3>DESCRIPTION</h3> <p>The varnishstat utility displays statistics from a running varnishd(1) instance.</p> <p>The following options are available:</p> <dl class="option-list"> <dt><kbd><span class="option">-1</span></kbd></dt> <dd>
<p>Instead of presenting a continuously updated display, print the statistics to stdout.</p> </dd> <dt><kbd><span class="option">-f <var>&lt;glob&gt;</var></span></kbd></dt> <dd>
<p>Legacy field filtering glob. Use backslash to escape characters. If the argument starts with ‘^’ it is used as an exclusive glob. Multiple -f arguments may be given. Legacy filtering globs are run along with inclusion globs (-I arguments) and exclusion globs (-X arguments) in order on a first-match basis.</p> </dd> <dt><kbd><span class="option">-h</span></kbd></dt> <dd>
<p>Print program usage and exit</p> </dd> <dt><kbd><span class="option">-I <var>&lt;glob&gt;</var></span></kbd></dt> <dd>
<p>Field inclusion glob. Use backslash to escape characters. Multiple -I arguments may be given. Exclusion globs are run in order along with exclusion globs (-X arguments) and legacy filtering globs (-f arguments) on a first-match basis.</p> </dd> <dt><kbd><span class="option">-j</span></kbd></dt> <dd>
<p>Print statistics to stdout as JSON.</p> </dd> <dt><kbd><span class="option">-l</span></kbd></dt> <dd>
<p>Lists the available fields to use with the -f option.</p> </dd> <dt><kbd><span class="option">-n <var>&lt;dir&gt;</var></span></kbd></dt> <dd>
<p>Specify the varnishd working directory (also known as instance name) to get logs from. If -n is not specified, the host name is used.</p> </dd> <dt><kbd><span class="option">-r</span></kbd></dt> <dd>
<p>Toggle raw or adjusted gauges, adjusted is the default.</p> </dd> <dt><kbd><span class="option">-t <var>&lt;seconds|off&gt;</var></span></kbd></dt> <dd>
<p>Timeout before returning error on initial VSM connection. If set the VSM connection is retried every 0.5 seconds for this many seconds. If zero the connection is attempted only once and will fail immediately if unsuccessful. If set to “off”, the connection will not fail, allowing the utility to start and wait indefinetely for the Varnish instance to appear. Defaults to 5 seconds.</p> </dd> <dt><kbd><span class="option">-V</span></kbd></dt> <dd>
<p>Print version information and exit.</p> </dd> <dt><kbd><span class="option">-X <var>&lt;glob&gt;</var></span></kbd></dt> <dd>
<p>Field exclusion glob. Use backslash to escape characters. Multiple -X arguments may be given. Exclusion globs are run in order along with inclusion globs (-I arguments) and legacy filtering globs (-f arguments) on a first-match basis.</p> </dd> <dt><kbd><span class="option">-x</span></kbd></dt> <dd>
<p>Print statistics to stdout as XML.</p> </dd> <dt><kbd><span class="option">--optstring</span></kbd></dt> <dd>
<p>Print the optstring parameter to <code>getopt(3)</code> to help writing wrapper scripts.</p> </dd> </dl> </section> <section id="curses-mode"> <h3>CURSES MODE</h3> <p>When neither -1, -j nor -x options are given, the application starts up in curses mode. This shows a continuously updated view of the counter values, along with their description.</p> <p>The top area shows process uptime information.</p> <p>The center area shows a list of counter values.</p> <p>The bottom area shows the description of the currently selected counter.</p> <p>On startup, only counters at INFO level are shown.</p> <section id="columns"> <h4>Columns</h4> <p>The following columns are displayed, from left to right:</p> <dl class="simple"> <dt>Name</dt>
<dd>
<p>The name of the counter</p> </dd> <dt>Current</dt>
<dd>
<p>The current value of the counter.</p> </dd> <dt>Change</dt>
<dd>
<p>The average per second change over the last update interval.</p> </dd> <dt>Average</dt>
<dd>
<p>The average value of this counter over the runtime of the Varnish daemon, or a period if the counter can’t be averaged.</p> </dd> <dt>Avg_10</dt>
<dd>
<p>The moving average over the last 10 update intervals.</p> </dd> <dt>Avg_100</dt>
<dd>
<p>The moving average over the last 100 update intervals.</p> </dd> <dt>Avg_1000</dt>
<dd>
<p>The moving average over the last 1000 update intervals.</p> </dd> </dl> </section> <section id="key-bindings"> <h4>Key bindings</h4> <dl class="simple"> <dt>&lt;h&gt;</dt>
<dd>
<p>Toggle the help screen.</p> </dd> <dt>&lt;UP&gt; or &lt;k&gt;</dt>
<dd>
<p>Navigate the counter list one line up.</p> </dd> <dt>&lt;DOWN&gt; or &lt;j&gt;</dt>
<dd>
<p>Navigate the counter list one line down.</p> </dd> <dt>&lt;PAGEUP&gt; or &lt;b&gt; or &lt;CTRL-B&gt;</dt>
<dd>
<p>Navigate the counter list one page up.</p> </dd> <dt>&lt;PAGEDOWN&gt; or &lt;SPACE&gt; or &lt;CTRL-F&gt;</dt>
<dd>
<p>Navigate the counter list one page down.</p> </dd> <dt>&lt;HOME&gt; or &lt;g&gt;</dt>
<dd>
<p>Navigate the counter list to the top.</p> </dd> <dt>&lt;END&gt; or &lt;G&gt;</dt>
<dd>
<p>Navigate the counter list to the bottom.</p> </dd> <dt>&lt;d&gt;</dt>
<dd>
<p>Toggle between showing and hiding unseen counters. Unseen counters are those that has been zero for the entire runtime of varnishstat. Defaults to hide unseen counters.</p> </dd> <dt>&lt;r&gt;</dt>
<dd>
<p>Toggle between showing raw and adjusted gauges. When a gauge is decremented faster than it is incremented, it may appear as a large integer with its most significant bit set. By default such values are adjusted to zero.</p> </dd> <dt>&lt;e&gt;</dt>
<dd>
<p>Toggle scaling of values.</p> </dd> <dt>&lt;v&gt;</dt>
<dd>
<p>Increase verbosity. Defaults to only showing informational counters.</p> </dd> <dt>&lt;V&gt;</dt>
<dd>
<p>Decrease verbosity. Defaults to only showing informational counters.</p> </dd> <dt>&lt;q&gt;</dt>
<dd>
<p>Quit.</p> </dd> <dt>&lt;CTRL+T&gt;</dt>
<dd>
<p>Sample now.</p> </dd> <dt>&lt;+&gt;</dt>
<dd>
<p>Increase refresh interval.</p> </dd> <dt>&lt;-&gt;</dt>
<dd>
<p>Decrease refresh interval.</p> </dd> </dl> </section> </section> <section id="outputs"> <h3>OUTPUTS</h3> <p>The XML output format is:</p> <pre data-language="python">&lt;varnishstat timestamp="YYYY-MM-DDTHH:mm:SS"&gt;
  &lt;stat&gt;
    &lt;name&gt;FIELD NAME&lt;/name&gt;
    &lt;value&gt;FIELD VALUE&lt;/value&gt;
    &lt;flag&gt;FIELD SEMANTICS&lt;/flag&gt;
    &lt;format&gt;FIELD DISPLAY FORMAT&lt;/format&gt;
    &lt;description&gt;FIELD DESCRIPTION&lt;/description&gt;
  &lt;/stat&gt;
  [..]
&lt;/varnishstat&gt;
</pre> <p>The JSON output format is:</p> <pre data-language="python">{
  "timestamp": "YYYY-MM-DDTHH:mm:SS",
  "FIELD NAME": {
    "description": "FIELD DESCRIPTION",
    "flag": "FIELD SEMANTICS", "format": "FIELD DISPLAY FORMAT",
    "value": FIELD VALUE
  },
  "FIELD NAME": {
    "description": "FIELD DESCRIPTION",
    "flag": "FIELD SEMANTICS", "format": "FIELD DISPLAY FORMAT",
    "value": FIELD VALUE
  },
  [..]
}
</pre> <p>Timestamp is the time when the report was generated by varnishstat.</p> </section> <section id="see-also"> <h3>SEE ALSO</h3> <ul class="simple"> <li><a class="reference internal" href="varnishd.html#varnishd-1"><span class="std std-ref">varnishd</span></a></li> <li><a class="reference internal" href="varnishhist.html#varnishhist-1"><span class="std std-ref">varnishhist</span></a></li> <li><a class="reference internal" href="varnishlog.html#varnishlog-1"><span class="std std-ref">varnishlog</span></a></li> <li><a class="reference internal" href="varnishncsa.html#varnishncsa-1"><span class="std std-ref">varnishncsa</span></a></li> <li><a class="reference internal" href="varnishtop.html#varnishtop-1"><span class="std std-ref">varnishtop</span></a></li> <li>curses(3)</li> <li><a class="reference internal" href="varnish-counters.html#varnish-counters-7"><span class="std std-ref">varnish-counters</span></a></li> </ul> </section> <section id="authors"> <h3>AUTHORS</h3> <p>This manual page was written by Dag-Erling Smørgrav, Per Buer, Lasse Karstensen and Martin Blix Grydeland.</p> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    Copyright &copy; 2006 Verdens Gang AS<br>Copyright &copy; 2006&ndash;2020 Varnish Software AS<br>Licensed under the BSD-2-Clause License.<br>
    <a href="https://varnish-cache.org/docs/7.4/reference/varnishstat.html" class="_attribution-link">https://varnish-cache.org/docs/7.4/reference/varnishstat.html</a>
  </p>
</div>
