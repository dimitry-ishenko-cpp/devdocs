<h1 id="homepage-contrib">How to contribute content to varnish-cache.org</h1> <p>This is where we walk you through the mechanics of adding content to varnish-cache.org (see phk’s note <a class="reference internal" href="homepage_dogfood.html#homepage-dogfood"><span class="std std-ref">How our website works</span></a> for an insight into the innards of site).</p> <section id="git-repository"> <h2>Git Repository</h2> <p>The web site contents live in github at:</p> <p><a class="reference external" href="https://github.com/varnishcache/homepage">https://github.com/varnishcache/homepage</a></p> <p>To offer your own contribution, fork the project and send us a pull request.</p> </section> <section id="sphinx-and-rst"> <h2>Sphinx and RST</h2> <p>The web site sources are written in <a class="reference external" href="http://docutils.sourceforge.net/rst.html">RST</a> – reStructuredText, the documentation format originally conceived for Python (and also used in the Varnish distribution, as well as for formatting VMOD docs). <a class="reference external" href="http://www.sphinx-doc.org/">Sphinx</a> is used to render web pages from the RST sources.</p> <p>So you’ll need to <a class="reference external" href="http://www.sphinx-doc.org/en/stable/markup/index.html">learn markup with RST and Sphinx</a>; and you will need to <a class="reference external" href="http://www.sphinx-doc.org/en/stable/install.html">install Sphinx</a> to test the rendering on your local system.</p> </section> <section id="makefile"> <h2>Makefile</h2> <p>Generation of web contents from the sources is driven by the <code>Makefile</code> in the <code>R1</code> directory of the repo:</p> <pre data-language="python">$ cd R1
$ make help
Please use `make &lt;target&gt;' where &lt;target&gt; is one of
html       to make standalone HTML files
dirhtml    to make HTML files named index.html in directories
singlehtml to make a single large HTML file
pickle     to make pickle files
json       to make JSON files
htmlhelp   to make HTML files and a HTML help project
qthelp     to make HTML files and a qthelp project
applehelp  to make an Apple Help Book
devhelp    to make HTML files and a Devhelp project
epub       to make an epub
latex      to make LaTeX files, you can set PAPER=a4 or PAPER=letter
latexpdf   to make LaTeX files and run them through pdflatex
latexpdfja to make LaTeX files and run them through platex/dvipdfmx
text       to make text files
man        to make manual pages
texinfo    to make Texinfo files
info       to make Texinfo files and run them through makeinfo
gettext    to make PO message catalogs
changes    to make an overview of all changed/added/deprecated items
xml        to make Docutils-native XML files
pseudoxml  to make pseudoxml-XML files for display purposes
linkcheck  to check all external links for integrity
doctest    to run all doctests embedded in the documentation (if enabled)
coverage   to run coverage check of the documentation (if enabled)
</pre> <p>Most of the time, you’ll just need <code>make html</code> to test the rendering of your contribution.</p> </section> <section id="alabaster-theme"> <h2>alabaster theme</h2> <p>We use the <a class="reference external" href="https://pypi.python.org/pypi/alabaster">alabaster theme</a>, which you may need to add to your local Python installation:</p> <pre data-language="python">$ sudo pip install alabaster
</pre> <p>We have found that you may need to link the alabaster package install directory to the directory where Sphinx expects to find themes. For example (on my machine), alabaster was installed into:</p> <pre data-language="python">/usr/local/lib/python2.7/dist-packages/alabaster
</pre> <p>And Sphinx expects to find themes in:</p> <pre data-language="python">/usr/share/sphinx/themes
</pre> <p>So to get the make targets to run successfully:</p> <pre data-language="python">$ cd /usr/share/sphinx/themes
$ ln -s /usr/local/lib/python2.7/dist-packages/alabaster
</pre> </section> <section id="test-the-rendering"> <h2>Test the rendering</h2> <p>Now you can edit contents in the website repo, and test the rendering by calling make targets in the <code>R1</code> directory:</p> <pre data-language="python">$ cd $REPO/R1
$ make html
sphinx-build -b html -d build/doctrees   source build/html
Running Sphinx v1.2.3
loading pickled environment... done
building [html]: targets for 1 source files that are out of date
updating environment: 0 added, 1 changed, 0 removed
reading sources... [100%] tips/contribdoc/index
looking for now-outdated files... none found
pickling environment... done
checking consistency... done
preparing documents... done
writing output... [100%] tips/index
writing additional files... genindex search
copying static files... done
copying extra files... done
dumping search index... done
dumping object inventory... done
build succeeded.
</pre> <p>After a successful build, the newly rendered contents are saved in the <code>R1/source/build</code> directory, so you can have a look with your browser.</p> </section> <section id="send-us-a-pull-request"> <h2>Send us a pull request</h2> <p>When you have your contribution building successfully, send us a PR, we’ll be happy to hear from you!</p> </section><div class="_attribution">
  <p class="_attribution-p">
    Copyright &copy; 2006 Verdens Gang AS<br>Copyright &copy; 2006&ndash;2020 Varnish Software AS<br>Licensed under the BSD-2-Clause License.<br>
    <a href="https://varnish-cache.org/docs/7.4/dev-guide/homepage_contrib.html" class="_attribution-link">https://varnish-cache.org/docs/7.4/dev-guide/homepage_contrib.html</a>
  </p>
</div>
