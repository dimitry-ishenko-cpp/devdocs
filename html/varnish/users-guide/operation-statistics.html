<h1 id="users-guide-statistics">Statistics</h1> <p>Varnish comes with a couple of nifty and very useful statistics generating tools that generates statistics in real time by constantly updating and presenting a specific dataset by aggregating and analyzing logdata from the shared memory logs.</p> <section id="varnishtop"> <h2>varnishtop</h2> <p>The <a class="reference internal" href="../reference/varnishtop.html#varnishtop-1"><span class="std std-ref">varnishtop</span></a> utility reads the shared memory logs and presents a continuously updated list of the most commonly occurring log entries.</p> <p>With suitable filtering using the -I, -i, -X and -x options, it can be used to display a ranking of requested documents, clients, user agents, or any other information which is recorded in the log.</p> <p><code>varnishtop -i ReqURL</code> will show you what URLs are being asked for by the client. <code>varnishtop -i BereqURL</code> will show you what your backend is being asked the most. <code>varnishtop -I ReqHeader:Accept-Encoding</code> will show the most popular Accept-Encoding header the client are sending you.</p> </section> <section id="varnishhist"> <h2>varnishhist</h2> <p>The <a class="reference internal" href="../reference/varnishhist.html#varnishhist-1"><span class="std std-ref">varnishhist</span></a> utility reads <a class="reference internal" href="../reference/varnishd.html#varnishd-1"><span class="std std-ref">varnishd</span></a> shared memory logs and presents a continuously updated histogram showing the distribution of the last N requests by their processing. The value of N and the vertical scale are displayed in the top left corner. The horizontal scale is logarithmic. Hits are marked with a pipe character (“|”), and misses are marked with a hash character (“#”).</p> </section> <section id="varnishstat"> <h2>varnishstat</h2> <p>Varnish has lots of counters. We count misses, hits, information about the storage, threads created, deleted objects. Just about everything. <a class="reference internal" href="../reference/varnishstat.html#varnishstat-1"><span class="std std-ref">varnishstat</span></a> will dump these counters. This is useful when tuning Varnish.</p> <p>There are programs that can poll <a class="reference internal" href="../reference/varnishstat.html#varnishstat-1"><span class="std std-ref">varnishstat</span></a> regularly and make nice graphs of these counters. One such program is Munin. Munin can be found at <a class="reference external" href="http://munin-monitoring.org/">http://munin-monitoring.org/</a> . There is a plugin for munin in the Varnish source code.</p> </section><div class="_attribution">
  <p class="_attribution-p">
    Copyright &copy; 2006 Verdens Gang AS<br>Copyright &copy; 2006&ndash;2020 Varnish Software AS<br>Licensed under the BSD-2-Clause License.<br>
    <a href="https://varnish-cache.org/docs/7.4/users-guide/operation-statistics.html" class="_attribution-link">https://varnish-cache.org/docs/7.4/users-guide/operation-statistics.html</a>
  </p>
</div>
