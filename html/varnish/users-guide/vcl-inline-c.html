<h1>Using inline C to extend Varnish</h1> <p>(Here there be dragons. Big and mean ones.)</p> <p>You can use <em>inline C</em> to extend Varnish. Please note that you can seriously mess up Varnish this way. The C code runs within the Varnish Cache process so if your code generates a segfault the cache will crash.</p> <p>One of the first uses of inline C was logging to <code>syslog</code>.:</p> <pre data-language="python"># The include statements must be outside the subroutines.
C{
        #include &lt;syslog.h&gt;
}C

sub vcl_something {
        C{
                syslog(LOG_INFO, "Something happened at VCL line XX.");
        }C
}
</pre> <p>To use inline C you need to enable it with the <code>vcc_allow_inline_c</code> parameter.</p><div class="_attribution">
  <p class="_attribution-p">
    Copyright &copy; 2006 Verdens Gang AS<br>Copyright &copy; 2006&ndash;2020 Varnish Software AS<br>Licensed under the BSD-2-Clause License.<br>
    <a href="https://varnish-cache.org/docs/7.4/users-guide/vcl-inline-c.html" class="_attribution-link">https://varnish-cache.org/docs/7.4/users-guide/vcl-inline-c.html</a>
  </p>
</div>
