<h1 id="users-vcl">VCL - Varnish Configuration Language</h1> <p>This section covers how to tell Varnish how to handle your HTTP traffic, using the Varnish Configuration Language (VCL).</p> <p>Varnish has a great configuration system. Most other systems use configuration directives, where you basically turn on and off lots of switches. We have instead chosen to use a domain specific language called VCL for this.</p> <p>Every inbound request flows through Varnish and you can influence how the request is being handled by altering the VCL code. You can direct certain requests to particular backends, you can alter the requests and the responses or have Varnish take various actions depending on arbitrary properties of the request or the response. This makes Varnish an extremely powerful HTTP processor, not just for caching.</p> <p>Varnish translates VCL into binary code which is then executed when requests arrive. The performance impact of VCL is negligible.</p> <p>The VCL files are organized into subroutines. The different subroutines are executed at different times. One is executed when we get the request, another when files are fetched from the backend server.</p> <p>If you don’t call an action in your subroutine and it reaches the end Varnish will execute some built-in VCL code. You will see this VCL code commented out in the file <code>builtin.vcl</code> that ships with Varnish Cache.</p>  <ul> <li class="toctree-l1"><a class="reference internal" href="vcl-syntax.html">VCL Syntax</a></li> <li class="toctree-l1"><a class="reference internal" href="vcl-built-in-code.html">Built-in VCL</a></li> <li class="toctree-l1"><a class="reference internal" href="vcl-variables.html">Request and response VCL objects</a></li> <li class="toctree-l1"><a class="reference internal" href="vcl-backends.html">Backend servers</a></li> <li class="toctree-l1"><a class="reference internal" href="vcl-backends.html#the-none-backend">The “none” backend</a></li> <li class="toctree-l1"><a class="reference internal" href="vcl-backends.html#multiple-backends">Multiple backends</a></li> <li class="toctree-l1"><a class="reference internal" href="vcl-backends.html#backends-and-virtual-hosts-in-varnish">Backends and virtual hosts in Varnish</a></li> <li class="toctree-l1"><a class="reference internal" href="vcl-backends.html#connecting-through-a-proxy">Connecting Through a Proxy</a></li> <li class="toctree-l1"><a class="reference internal" href="vcl-backends.html#directors">Directors</a></li> <li class="toctree-l1"><a class="reference internal" href="vcl-backends.html#health-checks">Health checks</a></li> <li class="toctree-l1"><a class="reference internal" href="vcl-backends.html#layering">Layering</a></li> <li class="toctree-l1"><a class="reference internal" href="vcl-backends.html#director-resolution">Director Resolution</a></li> <li class="toctree-l1"><a class="reference internal" href="vcl-backends.html#connection-pooling">Connection Pooling</a></li> <li class="toctree-l1"><a class="reference internal" href="vcl-hashing.html">Hashing</a></li> <li class="toctree-l1"><a class="reference internal" href="vcl-grace.html">Grace mode and keep</a></li> <li class="toctree-l1"><a class="reference internal" href="vcl-separate.html">Separate VCL files</a></li> <li class="toctree-l1"><a class="reference internal" href="vcl-inline-c.html">Using inline C to extend Varnish</a></li> <li class="toctree-l1"><a class="reference internal" href="vcl-examples.html">VCL Examples</a></li> <li class="toctree-l1"><a class="reference internal" href="devicedetection.html">Device detection</a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    Copyright &copy; 2006 Verdens Gang AS<br>Copyright &copy; 2006&ndash;2020 Varnish Software AS<br>Licensed under the BSD-2-Clause License.<br>
    <a href="https://varnish-cache.org/docs/7.4/users-guide/vcl.html" class="_attribution-link">https://varnish-cache.org/docs/7.4/users-guide/vcl.html</a>
  </p>
</div>
