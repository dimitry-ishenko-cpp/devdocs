<div class="sphx-glr-download-link-note admonition note"> <p class="admonition-title">Note</p> <p>Click <a class="reference internal" href="#sphx-glr-download-auto-examples-ensemble-plot-isolation-forest-py"><span class="std std-ref">here</span></a> to download the full example code or to run this example in your browser via Binder</p> </div> <section class="sphx-glr-example-title" id="isolationforest-example"> <h1 id="sphx-glr-auto-examples-ensemble-plot-isolation-forest-py">IsolationForest example</h1> <p>An example using <a class="reference internal" href="../../modules/generated/sklearn.ensemble.isolationforest.html#sklearn.ensemble.IsolationForest" title="sklearn.ensemble.IsolationForest"><code>IsolationForest</code></a> for anomaly detection.</p> <p>The IsolationForest ‘isolates’ observations by randomly selecting a feature and then randomly selecting a split value between the maximum and minimum values of the selected feature.</p> <p>Since recursive partitioning can be represented by a tree structure, the number of splittings required to isolate a sample is equivalent to the path length from the root node to the terminating node.</p> <p>This path length, averaged over a forest of such random trees, is a measure of normality and our decision function.</p> <p>Random partitioning produces noticeable shorter paths for anomalies. Hence, when a forest of random trees collectively produce shorter path lengths for particular samples, they are highly likely to be anomalies.</p> <img src="data:image/png;base64,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" srcset="../../_images/sphx_glr_plot_isolation_forest_001.png" alt="IsolationForest" class="sphx-glr-single-img"><pre data-language="python">import numpy as np
import matplotlib.pyplot as plt
from sklearn.ensemble import IsolationForest

rng = np.random.RandomState(42)

# Generate train data
X = 0.3 * rng.randn(100, 2)
X_train = np.r_[X + 2, X - 2]
# Generate some regular novel observations
X = 0.3 * rng.randn(20, 2)
X_test = np.r_[X + 2, X - 2]
# Generate some abnormal novel observations
X_outliers = rng.uniform(low=-4, high=4, size=(20, 2))

# fit the model
clf = IsolationForest(max_samples=100, random_state=rng)
clf.fit(X_train)
y_pred_train = clf.predict(X_train)
y_pred_test = clf.predict(X_test)
y_pred_outliers = clf.predict(X_outliers)

# plot the line, the samples, and the nearest vectors to the plane
xx, yy = np.meshgrid(np.linspace(-5, 5, 50), np.linspace(-5, 5, 50))
Z = clf.decision_function(np.c_[xx.ravel(), yy.ravel()])
Z = Z.reshape(xx.shape)

plt.title("IsolationForest")
plt.contourf(xx, yy, Z, cmap=plt.cm.Blues_r)

b1 = plt.scatter(X_train[:, 0], X_train[:, 1], c="white", s=20, edgecolor="k")
b2 = plt.scatter(X_test[:, 0], X_test[:, 1], c="green", s=20, edgecolor="k")
c = plt.scatter(X_outliers[:, 0], X_outliers[:, 1], c="red", s=20, edgecolor="k")
plt.axis("tight")
plt.xlim((-5, 5))
plt.ylim((-5, 5))
plt.legend(
    [b1, b2, c],
    ["training observations", "new regular observations", "new abnormal observations"],
    loc="upper left",
)
plt.show()
</pre> <p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes 0.337 seconds)</p> <div class="sphx-glr-footer sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-examples-ensemble-plot-isolation-forest-py"> <div class="binder-badge docutils container"> <a class="reference external image-reference" href="https://mybinder.org/v2/gh/scikit-learn/scikit-learn/1.1.X?urlpath=lab/tree/notebooks/auto_examples/ensemble/plot_isolation_forest.ipynb"><img alt="Launch binder" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTA5IiBoZWlnaHQ9IjIwIj48bGluZWFyR3JhZGllbnQgaWQ9ImIiIHgyPSIwIiB5Mj0iMTAwJSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjYmJiIiBzdG9wLW9wYWNpdHk9Ii4xIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLW9wYWNpdHk9Ii4xIi8+PC9saW5lYXJHcmFkaWVudD48Y2xpcFBhdGggaWQ9ImEiPjxyZWN0IHdpZHRoPSIxMDkiIGhlaWdodD0iMjAiIHJ4PSIzIiBmaWxsPSIjZmZmIi8+PC9jbGlwUGF0aD48ZyBjbGlwLXBhdGg9InVybCgjYSkiPjxwYXRoIGZpbGw9IiM1NTUiIGQ9Ik0wIDBoNjR2MjBIMHoiLz48cGF0aCBmaWxsPSIjNTc5YWNhIiBkPSJNNjQgMGg0NXYyMEg2NHoiLz48cGF0aCBmaWxsPSJ1cmwoI2IpIiBkPSJNMCAwaDEwOXYyMEgweiIvPjwvZz48ZyBmaWxsPSIjZmZmIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iRGVqYVZ1IFNhbnMsVmVyZGFuYSxHZW5ldmEsc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMTAiPjxpbWFnZSB4PSI1IiB5PSIzIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHhsaW5rOmhyZWY9ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBRmtBQUFCWkNBTUFBQUJpMVhpZEFBQUI4bEJNVkVYLy8vOVhtc3JtWllIMW9sSlhtc3Ixb2xKWG1zcm1aWUgxb2xKWG1zcjFvbEpYbXNybVpZSDFvbEwxb2xKWG1zcjFvbEpYbXNybVpZSDFvbEwxb2xKWG1zcm1aWUgxb2xKWG1zcjFvbEwxb2xKWG1zcm1aWUgxb2xMMW9sSlhtc3JtWllIMW9sTDFvbEwwbkZmMW9sSlhtc3JtWllIMW9sSlhtc3E4ZFpiMW9sSlhtc3JtWllIMW9sSlhtc3BYbXNwWG1zcjFvbEwxb2xKWG1zcm1aWUgxb2xKWG1zcjFvbEwxb2xKWG1zcm1aWUgxb2xMMW9sTGVhSVZYbXNybVpZSDFvbEwxb2xMMW9sSlhtc3JtWllIMW9sTG5hMzFYbXNyMW9sSlhtc3Ixb2xKWG1zcm1aWUgxb2xMcW9WcjFvbEpYbXNyMW9sSlhtc3JtWllIMW9sTDFvbEtrZmFQb2JYdnZpR2FiZ2FkWG1zcVRoS3VvZktIbVo0RG9ibnIxb2xKWG1zcjFvbEpYbXNwWG1zcjFvbEpYbXNyZlo0VHVoV24xb2xMMW9sSlhtc3FCaTdYMW9sSlhtc3BabXNsYm1NaGJtc2RlbXNWZmw4Wmdtc05pbThKcGs4RjBtN1I0bTdGNW5MQjZqYmg3amJpRGlyT0VpYk9HbkthTWhxK1BuYUNWZzZxV2c2cWVnS2FmZjZXaG5wS29mS0d0bm9teGVaeTNub0c2ZFppK24zdkNjcFBEY3BQR24zYkxiNC9NYjQ3VWJJclZhNHJZb0dqZGFJYmVhSVhob1dIbVpZSG9iWHZwY0hqcWRIWHJlSExyb1Zyc2ZHL3VoR251aDJid2oySHhrMTd5bDF2em1sanptMWowbmxYMW9sTDNBSlhXQUFBQWJYUlNUbE1BRUJBUUh4OGdJQ0F1TGpBd01EdzlQVUJBUUVwUVVGQlhWMWhnWUdCa2NIQndjWGw4Z0lDQWdvaUlrSkNRbEppY25KMmdvS0NtcUsrd3NMQzR1c0RBd01qUDBORFExTmJXM056ZzRPRGk1KzN2OFBEdzgvVDA5UFgyOXZiMzkvZjUrZnI3Ky96OC9QejkvdjcremN6Q3hnQUFCQzVKUkVGVWVBSE4xdWwzazBVVUJ2Q2IxQ1RWcG1wYWl0QUdTTFNwU3VLQ0xXcGJUS05KRkdsY1NNQUZGNjNpVW1SY2NORzZnTGJ1eGtYVTY2SkFVZWYvOUxTcG1YbnlMcjNUNUFPL3J6bDV6ajEzN3AxMzZCSVN5NDRmS0pYdUdOL2QxOVBVZlllTzY3Wm5xdGYyS0gzM0lkMXBzWG9GZFczMHNQWjFzTXZzMkQwNjBBSHF3czRGSGVKb2pMWnFudzUzY21mdmcrWFI4bUMwT0VqdXhyWEVrWDV5ZGVWSkxWSWxWMGUxMFBYazVrN2RZZUh1N0NqMWorNDl1S2c3dUxVNjF0R0x3MWxxMjd1Z1FZbGNsSEM0Ymd2N1ZRK1RBeWo1WmMvVWpzUHZzMXNkNWNXcnlXT2J0dldUMkVQYTRydG5XVzNKa3BqZ2dFcGJPc1ByN0Y3RXlOZXd0cEJJc2xBN3A0M0hDc253b29YVEVjM1VtUG1DTm41bHJxVEp4eTZuUm1jYXZHWlZ0LzNEYTJwRDVOSHZzT0hKQ3JkYzFHMnIzRElUcFU3eWljN3cvN1J4bmpjMGt0NUdDNGRqaXYyU3ozRmIyaUVaZzQxL2Rkc0ZEb3l1WXJJa21GZWh6MEhSMnRoUGdRcU15UVliMk90QjBXeHNaM0JlRzMrd3BSYjF2emwyVVlCb2c4RmZHaHR0RktqdEFjbG5aWXJSbzlyeUc5dUcvRlpRVTRBRWc4WkU5TGpHTXpUbXFLWFBMbmxXVm5JbFFRVHZ4SmY4aXA3VmdqWmp5VlByancxdGU1b3RNN1JtUDd4bStzSzJHdjlJOEdpKytCUmJFa1I5RUJ3OHpSVWNLeHdwNzN4a2FMaXFRYitrR2R1SlROSEc3MnpjVzlMb0pncVF4cFAzL1RqLy9jM3lCMHRxemFtbDA1LytvckhMa3NWTys5NWtYNy83cWdKdm5qbHJmcjJHZ3N5eDBlb3k5dVB6TjVTUGQ4NmFYZ2dPc0VLVzJQcno3ZHUzVklEMy90enMvc1NSczJ3N292VkhLdGpyWDJwZDdaTWxUeEFZZkJBTDlqaUR3ZkxrcTU1VG03aWZoTWxUR1B5Q0FzN1JGUmhuNDdKbmxjQjlSTTVUOTdBU3VaWEljVk51VURJbmRwRGJkc2ZycXNPcHBlWGw1WStYVktkakZDVGgrekdhVnVqMGQ5enkwNVBQSzNRekJhbXhkd3RUQ3J6eWcvMlJ2ZjJFc3RVam9yZEd3YS9reDltU0pMcjhtTEx0Q1c4SEhHSmMyUjVoUzIxOUlpRjZQblR1c09xY01sNTdnbTBaOGthbktNQVFnMHFTeXVaZm43ekl0c2JHeU85UWxueFkwZUN1RDFYTDJ5cy9Nc3JRaGx0RTdVZzB1Rk96dWZKRkUyUHhCby9ZQXg4WFBQZER3V04wTXJEUllJWkYwbVNNS0NOSGdhSVZGb0JiTm9MSjd0RVFES3hHRjBrY0xRaW1vakNab3B2ME9rTk95V0NDZzlYTVZBaTdBUkp6UWRNMlFVaDBnbUJvempjM1NrZzZkU0JScURHWVNVT3U2NlpnK0kyZk5acy9NMy9mL0dybC9YbnlGMUd3M1ZLQ2V6MFBONUlVZkZMcXZnVU40QzBxTnFZczVZaFBMK2FWWllERTRJcFVrNTdvU0ZuSm00RnlDcXFPRTBqaFkyU015TEZvbzU2enlvNmJlY09TNVVWRGRqN1ZpaDB6cCt0Y01od1JwQmVMeXF0SWpsSktBSVpTYkk4U0dTRjNrMHBBM21SNXRIdXdQRm9hN043cmVvcTJicUNzQWsxSHFDdTV1dkkxbjZKdVJYSStTMU1jbzU0WW1ZVHdjbjZBZWljK2tzc1hpOFhwWEM0VjN0Ny9BRHVUTkthUUpkU2NBQUFBQUVsRlRrU3VRbUNDIi8+IDx0ZXh0IHg9IjQxNSIgeT0iMTUwIiBmaWxsPSIjMDEwMTAxIiBmaWxsLW9wYWNpdHk9Ii4zIiB0cmFuc2Zvcm09InNjYWxlKC4xKSIgdGV4dExlbmd0aD0iMzcwIj5sYXVuY2g8L3RleHQ+PHRleHQgeD0iNDE1IiB5PSIxNDAiIHRyYW5zZm9ybT0ic2NhbGUoLjEpIiB0ZXh0TGVuZ3RoPSIzNzAiPmxhdW5jaDwvdGV4dD48dGV4dCB4PSI4NTUiIHk9IjE1MCIgZmlsbD0iIzAxMDEwMSIgZmlsbC1vcGFjaXR5PSIuMyIgdHJhbnNmb3JtPSJzY2FsZSguMSkiIHRleHRMZW5ndGg9IjM1MCI+YmluZGVyPC90ZXh0Pjx0ZXh0IHg9Ijg1NSIgeT0iMTQwIiB0cmFuc2Zvcm09InNjYWxlKC4xKSIgdGV4dExlbmd0aD0iMzUwIj5iaW5kZXI8L3RleHQ+PC9nPiA8L3N2Zz4=" width="150px"></a> </div> <div class="sphx-glr-download sphx-glr-download-python docutils container"> <p><a class="reference download internal" download="" href="https://scikit-learn.org/1.1/_downloads/2108844cb1b17bae9a6b4c0b0fb3b211/plot_isolation_forest.py"><code>Download Python source code: plot_isolation_forest.py</code></a></p> </div> <div class="sphx-glr-download sphx-glr-download-jupyter docutils container"> <p><a class="reference download internal" download="" href="https://scikit-learn.org/1.1/_downloads/f39c19ddd9f1c49a604c054eff707568/plot_isolation_forest.ipynb"><code>Download Jupyter notebook: plot_isolation_forest.ipynb</code></a></p> </div> </div>  </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2007&ndash;2022 The scikit-learn developers<br>Licensed under the 3-clause BSD License.<br>
    <a href="https://scikit-learn.org/1.1/auto_examples/ensemble/plot_isolation_forest.html" class="_attribution-link">https://scikit-learn.org/1.1/auto_examples/ensemble/plot_isolation_forest.html</a>
  </p>
</div>
