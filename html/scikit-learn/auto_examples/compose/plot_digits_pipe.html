<div class="sphx-glr-download-link-note admonition note"> <p class="admonition-title">Note</p> <p>Click <a class="reference internal" href="#sphx-glr-download-auto-examples-compose-plot-digits-pipe-py"><span class="std std-ref">here</span></a> to download the full example code or to run this example in your browser via Binder</p> </div> <section class="sphx-glr-example-title" id="pipelining-chaining-a-pca-and-a-logistic-regression"> <h1 id="sphx-glr-auto-examples-compose-plot-digits-pipe-py">Pipelining: chaining a PCA and a logistic regression</h1> <p>The PCA does an unsupervised dimensionality reduction, while the logistic regression does the prediction.</p> <p>We use a GridSearchCV to set the dimensionality of the PCA</p> <img src="data:image/png;base64,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" srcset="../../_images/sphx_glr_plot_digits_pipe_001.png" alt="plot digits pipe" class="sphx-glr-single-img"><pre data-language="none">Best parameter (CV score=0.924):
{'logistic__C': 0.046415888336127774, 'pca__n_components': 60}
/home/runner/mambaforge/envs/testenv/lib/python3.9/site-packages/pandas/core/indexes/base.py:6982: FutureWarning: In a future version, the Index constructor will not infer numeric dtypes when passed object-dtype sequences (matching Series behavior)
  return Index(sequences[0], name=names)
</pre>  <pre data-language="python"># Code source: Gaël Varoquaux
# Modified for documentation by Jaques Grobler
# License: BSD 3 clause

import numpy as np
import matplotlib.pyplot as plt
import pandas as pd

from sklearn import datasets
from sklearn.decomposition import PCA
from sklearn.linear_model import LogisticRegression
from sklearn.pipeline import Pipeline
from sklearn.model_selection import GridSearchCV
from sklearn.preprocessing import StandardScaler

# Define a pipeline to search for the best combination of PCA truncation
# and classifier regularization.
pca = PCA()
# Define a Standard Scaler to normalize inputs
scaler = StandardScaler()

# set the tolerance to a large value to make the example faster
logistic = LogisticRegression(max_iter=10000, tol=0.1)
pipe = Pipeline(steps=[("scaler", scaler), ("pca", pca), ("logistic", logistic)])

X_digits, y_digits = datasets.load_digits(return_X_y=True)
# Parameters of pipelines can be set using '__' separated parameter names:
param_grid = {
    "pca__n_components": [5, 15, 30, 45, 60],
    "logistic__C": np.logspace(-4, 4, 4),
}
search = GridSearchCV(pipe, param_grid, n_jobs=2)
search.fit(X_digits, y_digits)
print("Best parameter (CV score=%0.3f):" % search.best_score_)
print(search.best_params_)

# Plot the PCA spectrum
pca.fit(X_digits)

fig, (ax0, ax1) = plt.subplots(nrows=2, sharex=True, figsize=(6, 6))
ax0.plot(
    np.arange(1, pca.n_components_ + 1), pca.explained_variance_ratio_, "+", linewidth=2
)
ax0.set_ylabel("PCA explained variance ratio")

ax0.axvline(
    search.best_estimator_.named_steps["pca"].n_components,
    linestyle=":",
    label="n_components chosen",
)
ax0.legend(prop=dict(size=12))

# For each number of components, find the best classifier results
results = pd.DataFrame(search.cv_results_)
components_col = "param_pca__n_components"
best_clfs = results.groupby(components_col).apply(
    lambda g: g.nlargest(1, "mean_test_score")
)

best_clfs.plot(
    x=components_col, y="mean_test_score", yerr="std_test_score", legend=False, ax=ax1
)
ax1.set_ylabel("Classification accuracy (val)")
ax1.set_xlabel("n_components")

plt.xlim(-1, 70)

plt.tight_layout()
plt.show()
</pre> <p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes 1.990 seconds)</p> <div class="sphx-glr-footer sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-examples-compose-plot-digits-pipe-py"> <div class="binder-badge docutils container"> <a class="reference external image-reference" href="https://mybinder.org/v2/gh/scikit-learn/scikit-learn/1.1.X?urlpath=lab/tree/notebooks/auto_examples/compose/plot_digits_pipe.ipynb"><img alt="Launch binder" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTA5IiBoZWlnaHQ9IjIwIj48bGluZWFyR3JhZGllbnQgaWQ9ImIiIHgyPSIwIiB5Mj0iMTAwJSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjYmJiIiBzdG9wLW9wYWNpdHk9Ii4xIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLW9wYWNpdHk9Ii4xIi8+PC9saW5lYXJHcmFkaWVudD48Y2xpcFBhdGggaWQ9ImEiPjxyZWN0IHdpZHRoPSIxMDkiIGhlaWdodD0iMjAiIHJ4PSIzIiBmaWxsPSIjZmZmIi8+PC9jbGlwUGF0aD48ZyBjbGlwLXBhdGg9InVybCgjYSkiPjxwYXRoIGZpbGw9IiM1NTUiIGQ9Ik0wIDBoNjR2MjBIMHoiLz48cGF0aCBmaWxsPSIjNTc5YWNhIiBkPSJNNjQgMGg0NXYyMEg2NHoiLz48cGF0aCBmaWxsPSJ1cmwoI2IpIiBkPSJNMCAwaDEwOXYyMEgweiIvPjwvZz48ZyBmaWxsPSIjZmZmIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iRGVqYVZ1IFNhbnMsVmVyZGFuYSxHZW5ldmEsc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMTAiPjxpbWFnZSB4PSI1IiB5PSIzIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHhsaW5rOmhyZWY9ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBRmtBQUFCWkNBTUFBQUJpMVhpZEFBQUI4bEJNVkVYLy8vOVhtc3JtWllIMW9sSlhtc3Ixb2xKWG1zcm1aWUgxb2xKWG1zcjFvbEpYbXNybVpZSDFvbEwxb2xKWG1zcjFvbEpYbXNybVpZSDFvbEwxb2xKWG1zcm1aWUgxb2xKWG1zcjFvbEwxb2xKWG1zcm1aWUgxb2xMMW9sSlhtc3JtWllIMW9sTDFvbEwwbkZmMW9sSlhtc3JtWllIMW9sSlhtc3E4ZFpiMW9sSlhtc3JtWllIMW9sSlhtc3BYbXNwWG1zcjFvbEwxb2xKWG1zcm1aWUgxb2xKWG1zcjFvbEwxb2xKWG1zcm1aWUgxb2xMMW9sTGVhSVZYbXNybVpZSDFvbEwxb2xMMW9sSlhtc3JtWllIMW9sTG5hMzFYbXNyMW9sSlhtc3Ixb2xKWG1zcm1aWUgxb2xMcW9WcjFvbEpYbXNyMW9sSlhtc3JtWllIMW9sTDFvbEtrZmFQb2JYdnZpR2FiZ2FkWG1zcVRoS3VvZktIbVo0RG9ibnIxb2xKWG1zcjFvbEpYbXNwWG1zcjFvbEpYbXNyZlo0VHVoV24xb2xMMW9sSlhtc3FCaTdYMW9sSlhtc3BabXNsYm1NaGJtc2RlbXNWZmw4Wmdtc05pbThKcGs4RjBtN1I0bTdGNW5MQjZqYmg3amJpRGlyT0VpYk9HbkthTWhxK1BuYUNWZzZxV2c2cWVnS2FmZjZXaG5wS29mS0d0bm9teGVaeTNub0c2ZFppK24zdkNjcFBEY3BQR24zYkxiNC9NYjQ3VWJJclZhNHJZb0dqZGFJYmVhSVhob1dIbVpZSG9iWHZwY0hqcWRIWHJlSExyb1Zyc2ZHL3VoR251aDJid2oySHhrMTd5bDF2em1sanptMWowbmxYMW9sTDNBSlhXQUFBQWJYUlNUbE1BRUJBUUh4OGdJQ0F1TGpBd01EdzlQVUJBUUVwUVVGQlhWMWhnWUdCa2NIQndjWGw4Z0lDQWdvaUlrSkNRbEppY25KMmdvS0NtcUsrd3NMQzR1c0RBd01qUDBORFExTmJXM056ZzRPRGk1KzN2OFBEdzgvVDA5UFgyOXZiMzkvZjUrZnI3Ky96OC9QejkvdjcremN6Q3hnQUFCQzVKUkVGVWVBSE4xdWwzazBVVUJ2Q2IxQ1RWcG1wYWl0QUdTTFNwU3VLQ0xXcGJUS05KRkdsY1NNQUZGNjNpVW1SY2NORzZnTGJ1eGtYVTY2SkFVZWYvOUxTcG1YbnlMcjNUNUFPL3J6bDV6ajEzN3AxMzZCSVN5NDRmS0pYdUdOL2QxOVBVZlllTzY3Wm5xdGYyS0gzM0lkMXBzWG9GZFczMHNQWjFzTXZzMkQwNjBBSHF3czRGSGVKb2pMWnFudzUzY21mdmcrWFI4bUMwT0VqdXhyWEVrWDV5ZGVWSkxWSWxWMGUxMFBYazVrN2RZZUh1N0NqMWorNDl1S2c3dUxVNjF0R0x3MWxxMjd1Z1FZbGNsSEM0Ymd2N1ZRK1RBeWo1WmMvVWpzUHZzMXNkNWNXcnlXT2J0dldUMkVQYTRydG5XVzNKa3BqZ2dFcGJPc1ByN0Y3RXlOZXd0cEJJc2xBN3A0M0hDc253b29YVEVjM1VtUG1DTm41bHJxVEp4eTZuUm1jYXZHWlZ0LzNEYTJwRDVOSHZzT0hKQ3JkYzFHMnIzRElUcFU3eWljN3cvN1J4bmpjMGt0NUdDNGRqaXYyU3ozRmIyaUVaZzQxL2Rkc0ZEb3l1WXJJa21GZWh6MEhSMnRoUGdRcU15UVliMk90QjBXeHNaM0JlRzMrd3BSYjF2emwyVVlCb2c4RmZHaHR0RktqdEFjbG5aWXJSbzlyeUc5dUcvRlpRVTRBRWc4WkU5TGpHTXpUbXFLWFBMbmxXVm5JbFFRVHZ4SmY4aXA3VmdqWmp5VlByancxdGU1b3RNN1JtUDd4bStzSzJHdjlJOEdpKytCUmJFa1I5RUJ3OHpSVWNLeHdwNzN4a2FMaXFRYitrR2R1SlROSEc3MnpjVzlMb0pncVF4cFAzL1RqLy9jM3lCMHRxemFtbDA1LytvckhMa3NWTys5NWtYNy83cWdKdm5qbHJmcjJHZ3N5eDBlb3k5dVB6TjVTUGQ4NmFYZ2dPc0VLVzJQcno3ZHUzVklEMy90enMvc1NSczJ3N292VkhLdGpyWDJwZDdaTWxUeEFZZkJBTDlqaUR3ZkxrcTU1VG03aWZoTWxUR1B5Q0FzN1JGUmhuNDdKbmxjQjlSTTVUOTdBU3VaWEljVk51VURJbmRwRGJkc2ZycXNPcHBlWGw1WStYVktkakZDVGgrekdhVnVqMGQ5enkwNVBQSzNRekJhbXhkd3RUQ3J6eWcvMlJ2ZjJFc3RVam9yZEd3YS9reDltU0pMcjhtTEx0Q1c4SEhHSmMyUjVoUzIxOUlpRjZQblR1c09xY01sNTdnbTBaOGthbktNQVFnMHFTeXVaZm43ekl0c2JHeU85UWxueFkwZUN1RDFYTDJ5cy9Nc3JRaGx0RTdVZzB1Rk96dWZKRkUyUHhCby9ZQXg4WFBQZER3V04wTXJEUllJWkYwbVNNS0NOSGdhSVZGb0JiTm9MSjd0RVFES3hHRjBrY0xRaW1vakNab3B2ME9rTk95V0NDZzlYTVZBaTdBUkp6UWRNMlFVaDBnbUJvempjM1NrZzZkU0JScURHWVNVT3U2NlpnK0kyZk5acy9NMy9mL0dybC9YbnlGMUd3M1ZLQ2V6MFBONUlVZkZMcXZnVU40QzBxTnFZczVZaFBMK2FWWllERTRJcFVrNTdvU0ZuSm00RnlDcXFPRTBqaFkyU015TEZvbzU2enlvNmJlY09TNVVWRGRqN1ZpaDB6cCt0Y01od1JwQmVMeXF0SWpsSktBSVpTYkk4U0dTRjNrMHBBM21SNXRIdXdQRm9hN043cmVvcTJicUNzQWsxSHFDdTV1dkkxbjZKdVJYSStTMU1jbzU0WW1ZVHdjbjZBZWljK2tzc1hpOFhwWEM0VjN0Ny9BRHVUTkthUUpkU2NBQUFBQUVsRlRrU3VRbUNDIi8+IDx0ZXh0IHg9IjQxNSIgeT0iMTUwIiBmaWxsPSIjMDEwMTAxIiBmaWxsLW9wYWNpdHk9Ii4zIiB0cmFuc2Zvcm09InNjYWxlKC4xKSIgdGV4dExlbmd0aD0iMzcwIj5sYXVuY2g8L3RleHQ+PHRleHQgeD0iNDE1IiB5PSIxNDAiIHRyYW5zZm9ybT0ic2NhbGUoLjEpIiB0ZXh0TGVuZ3RoPSIzNzAiPmxhdW5jaDwvdGV4dD48dGV4dCB4PSI4NTUiIHk9IjE1MCIgZmlsbD0iIzAxMDEwMSIgZmlsbC1vcGFjaXR5PSIuMyIgdHJhbnNmb3JtPSJzY2FsZSguMSkiIHRleHRMZW5ndGg9IjM1MCI+YmluZGVyPC90ZXh0Pjx0ZXh0IHg9Ijg1NSIgeT0iMTQwIiB0cmFuc2Zvcm09InNjYWxlKC4xKSIgdGV4dExlbmd0aD0iMzUwIj5iaW5kZXI8L3RleHQ+PC9nPiA8L3N2Zz4=" width="150px"></a> </div> <div class="sphx-glr-download sphx-glr-download-python docutils container"> <p><a class="reference download internal" download="" href="https://scikit-learn.org/1.1/_downloads/ba89a400c6902f85c10199ff86947d23/plot_digits_pipe.py"><code>Download Python source code: plot_digits_pipe.py</code></a></p> </div> <div class="sphx-glr-download sphx-glr-download-jupyter docutils container"> <p><a class="reference download internal" download="" href="https://scikit-learn.org/1.1/_downloads/898b30acf62919d918478efbe526195f/plot_digits_pipe.ipynb"><code>Download Jupyter notebook: plot_digits_pipe.ipynb</code></a></p> </div> </div>  </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2007&ndash;2022 The scikit-learn developers<br>Licensed under the 3-clause BSD License.<br>
    <a href="https://scikit-learn.org/1.1/auto_examples/compose/plot_digits_pipe.html" class="_attribution-link">https://scikit-learn.org/1.1/auto_examples/compose/plot_digits_pipe.html</a>
  </p>
</div>
