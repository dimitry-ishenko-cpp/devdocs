<h1 id="command:target_precompile_headers">target_precompile_headers</h1> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.16.</span></p> </div> <p>Add a list of header files to precompile.</p> <p>Precompiling header files can speed up compilation by creating a partially processed version of some header files, and then using that version during compilations rather than repeatedly parsing the original headers.</p>  <h2>Main Form</h2> <pre data-language="cmake">target_precompile_headers(&lt;target&gt;
  &lt;INTERFACE|PUBLIC|PRIVATE&gt; [header1...]
  [&lt;INTERFACE|PUBLIC|PRIVATE&gt; [header2...] ...])
</pre> <p>The command adds header files to the <a class="reference internal" href="../prop_tgt/precompile_headers.html#prop_tgt:PRECOMPILE_HEADERS" title="PRECOMPILE_HEADERS" id="index-0-prop_tgt:PRECOMPILE_HEADERS"><code>PRECOMPILE_HEADERS</code></a> and/or <a class="reference internal" href="../prop_tgt/interface_precompile_headers.html#prop_tgt:INTERFACE_PRECOMPILE_HEADERS" title="INTERFACE_PRECOMPILE_HEADERS" id="index-0-prop_tgt:INTERFACE_PRECOMPILE_HEADERS"><code>INTERFACE_PRECOMPILE_HEADERS</code></a> target properties of <code>&lt;target&gt;</code>. The named <code>&lt;target&gt;</code> must have been created by a command such as <a class="reference internal" href="add_executable.html#command:add_executable" title="add_executable" id="index-0-command:add_executable"><code>add_executable()</code></a> or <a class="reference internal" href="add_library.html#command:add_library" title="add_library" id="index-0-command:add_library"><code>add_library()</code></a> and must not be an <a class="reference internal" href="../manual/cmake-buildsystem.7.html#alias-targets"><span class="std std-ref">ALIAS target</span></a>.</p> <p>The <code>INTERFACE</code>, <code>PUBLIC</code> and <code>PRIVATE</code> keywords are required to specify the <a class="reference internal" href="../manual/cmake-buildsystem.7.html#target-usage-requirements"><span class="std std-ref">scope</span></a> of the following arguments. <code>PRIVATE</code> and <code>PUBLIC</code> items will populate the <a class="reference internal" href="../prop_tgt/precompile_headers.html#prop_tgt:PRECOMPILE_HEADERS" title="PRECOMPILE_HEADERS" id="index-1-prop_tgt:PRECOMPILE_HEADERS"><code>PRECOMPILE_HEADERS</code></a> property of <code>&lt;target&gt;</code>. <code>PUBLIC</code> and <code>INTERFACE</code> items will populate the <a class="reference internal" href="../prop_tgt/interface_precompile_headers.html#prop_tgt:INTERFACE_PRECOMPILE_HEADERS" title="INTERFACE_PRECOMPILE_HEADERS" id="index-1-prop_tgt:INTERFACE_PRECOMPILE_HEADERS"><code>INTERFACE_PRECOMPILE_HEADERS</code></a> property of <code>&lt;target&gt;</code> (<a class="reference internal" href="../manual/cmake-buildsystem.7.html#imported-targets"><span class="std std-ref">IMPORTED targets</span></a> only support <code>INTERFACE</code> items). Repeated calls for the same <code>&lt;target&gt;</code> will append items in the order called.</p> <p>Projects should generally avoid using <code>PUBLIC</code> or <code>INTERFACE</code> for targets that will be <a class="reference internal" href="install.html#install-export"><span class="std std-ref">exported</span></a>, or they should at least use the <a class="reference internal" href="../manual/cmake-generator-expressions.7.html#genex:BUILD_INTERFACE" title="BUILD_INTERFACE" id="index-0-genex:BUILD_INTERFACE"><code>$&lt;BUILD_INTERFACE:...&gt;</code></a> generator expression to prevent precompile headers from appearing in an installed exported target. Consumers of a target should typically be in control of what precompile headers they use, not have precompile headers forced on them by the targets being consumed (since precompile headers are not typically usage requirements). A notable exception to this is where an <a class="reference internal" href="../manual/cmake-buildsystem.7.html#interface-libraries"><span class="std std-ref">interface library</span></a> is created to define a commonly used set of precompile headers in one place and then other targets link to that interface library privately. In this case, the interface library exists specifically to propagate the precompile headers to its consumers and the consumer is effectively still in control, since it decides whether to link to the interface library or not.</p> <p>The list of header files is used to generate a header file named <code>cmake_pch.h|xx</code> which is used to generate the precompiled header file (<code>.pch</code>, <code>.gch</code>, <code>.pchi</code>) artifact. The <code>cmake_pch.h|xx</code> header file will be force included (<code>-include</code> for GCC, <code>/FI</code> for MSVC) to all source files, so sources do not need to have <code>#include "pch.h"</code>.</p> <p>Header file names specified with angle brackets (e.g. <code>&lt;unordered_map&gt;</code>) or explicit double quotes (escaped for the <a class="reference internal" href="../manual/cmake-language.7.html#manual:cmake-language(7)" title="cmake-language(7)" id="index-0-manual:cmake-language(7)"><code>cmake-language(7)</code></a>, e.g. <code>[["other_header.h"]]</code>) will be treated as is, and include directories must be available for the compiler to find them. Other header file names (e.g. <code>project_header.h</code>) are interpreted as being relative to the current source directory (e.g. <a class="reference internal" href="../variable/cmake_current_source_dir.html#variable:CMAKE_CURRENT_SOURCE_DIR" title="CMAKE_CURRENT_SOURCE_DIR" id="index-0-variable:CMAKE_CURRENT_SOURCE_DIR"><code>CMAKE_CURRENT_SOURCE_DIR</code></a>) and will be included by absolute path. For example:</p> <pre data-language="cmake">target_precompile_headers(myTarget
  PUBLIC
    project_header.h
  PRIVATE
    [["other_header.h"]]
    &lt;unordered_map&gt;
)
</pre>  <p>for more on defining buildsystem properties.</p>  <p>Arguments to <code>target_compile_features</code> may use generator expressions with the syntax <code>$&lt;...&gt;</code>. See the <a class="reference internal" href="../manual/cmake-generator-expressions.7.html#manual:cmake-generator-expressions(7)" title="cmake-generator-expressions(7)" id="index-0-manual:cmake-generator-expressions(7)"><code>cmake-generator-expressions(7)</code></a> manual for available expressions. The <a class="reference internal" href="../manual/cmake-generator-expressions.7.html#genex:COMPILE_LANGUAGE" title="COMPILE_LANGUAGE" id="index-1-genex:COMPILE_LANGUAGE"><code>$&lt;COMPILE_LANGUAGE:...&gt;</code></a> generator expression is particularly useful for specifying a language-specific header to precompile for only one language (e.g. <code>CXX</code> and not <code>C</code>). In this case, header file names that are not explicitly in double quotes or angle brackets must be specified by absolute path. Also, when specifying angle brackets inside a generator expression, be sure to encode the closing <code>&gt;</code> as <a class="reference internal" href="../manual/cmake-generator-expressions.7.html#genex:ANGLE-R" title="ANGLE-R" id="index-1-genex:ANGLE-R"><code>$&lt;ANGLE-R&gt;</code></a>. For example:</p> <pre data-language="cmake">target_precompile_headers(mylib PRIVATE
  "$&lt;$&lt;COMPILE_LANGUAGE:CXX&gt;:${CMAKE_CURRENT_SOURCE_DIR}/cxx_only.h&gt;"
  "$&lt;$&lt;COMPILE_LANGUAGE:C&gt;:&lt;stddef.h$&lt;ANGLE-R&gt;&gt;"
  "$&lt;$&lt;COMPILE_LANGUAGE:CXX&gt;:&lt;cstddef$&lt;ANGLE-R&gt;&gt;"
)
</pre>   <h2>Reusing Precompile Headers</h2> <p>The command also supports a second signature which can be used to specify that one target re-uses a precompiled header file artifact from another target instead of generating its own:</p> <pre data-language="cmake">target_precompile_headers(&lt;target&gt; REUSE_FROM &lt;other_target&gt;)
</pre> <p>This form sets the <a class="reference internal" href="../prop_tgt/precompile_headers_reuse_from.html#prop_tgt:PRECOMPILE_HEADERS_REUSE_FROM" title="PRECOMPILE_HEADERS_REUSE_FROM" id="index-0-prop_tgt:PRECOMPILE_HEADERS_REUSE_FROM"><code>PRECOMPILE_HEADERS_REUSE_FROM</code></a> property to <code>&lt;other_target&gt;</code> and adds a dependency such that <code>&lt;target&gt;</code> will depend on <code>&lt;other_target&gt;</code>. CMake will halt with an error if the <a class="reference internal" href="../prop_tgt/precompile_headers.html#prop_tgt:PRECOMPILE_HEADERS" title="PRECOMPILE_HEADERS" id="index-2-prop_tgt:PRECOMPILE_HEADERS"><code>PRECOMPILE_HEADERS</code></a> property of <code>&lt;target&gt;</code> is already set when the <code>REUSE_FROM</code> form is used.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>The <code>REUSE_FROM</code> form requires the same set of compiler options, compiler flags and compiler definitions for both <code>&lt;target&gt;</code> and <code>&lt;other_target&gt;</code>. Some compilers (e.g. GCC) may issue a warning if the precompiled header file cannot be used (<code>-Winvalid-pch</code>).</p> </div>   <h2>See Also</h2> <ul class="simple"> <li>To disable precompile headers for specific targets, see the <a class="reference internal" href="../prop_tgt/disable_precompile_headers.html#prop_tgt:DISABLE_PRECOMPILE_HEADERS" title="DISABLE_PRECOMPILE_HEADERS" id="index-0-prop_tgt:DISABLE_PRECOMPILE_HEADERS"><code>DISABLE_PRECOMPILE_HEADERS</code></a> target property.</li> <li>To prevent precompile headers from being used when compiling a specific source file, see the <a class="reference internal" href="../prop_sf/skip_precompile_headers.html#prop_sf:SKIP_PRECOMPILE_HEADERS" title="SKIP_PRECOMPILE_HEADERS" id="index-0-prop_sf:SKIP_PRECOMPILE_HEADERS"><code>SKIP_PRECOMPILE_HEADERS</code></a> source file property.</li> <li><a class="reference internal" href="target_compile_definitions.html#command:target_compile_definitions" title="target_compile_definitions" id="index-0-command:target_compile_definitions"><code>target_compile_definitions()</code></a></li> <li><a class="reference internal" href="target_compile_features.html#command:target_compile_features" title="target_compile_features" id="index-0-command:target_compile_features"><code>target_compile_features()</code></a></li> <li><a class="reference internal" href="target_compile_options.html#command:target_compile_options" title="target_compile_options" id="index-0-command:target_compile_options"><code>target_compile_options()</code></a></li> <li><a class="reference internal" href="target_include_directories.html#command:target_include_directories" title="target_include_directories" id="index-0-command:target_include_directories"><code>target_include_directories()</code></a></li> <li><a class="reference internal" href="target_link_libraries.html#command:target_link_libraries" title="target_link_libraries" id="index-0-command:target_link_libraries"><code>target_link_libraries()</code></a></li> <li><a class="reference internal" href="target_link_directories.html#command:target_link_directories" title="target_link_directories" id="index-0-command:target_link_directories"><code>target_link_directories()</code></a></li> <li><a class="reference internal" href="target_link_options.html#command:target_link_options" title="target_link_options" id="index-0-command:target_link_options"><code>target_link_options()</code></a></li> <li><a class="reference internal" href="target_sources.html#command:target_sources" title="target_sources" id="index-0-command:target_sources"><code>target_sources()</code></a></li> </ul>   <div class="_attribution">
  <p class="_attribution-p">
    &copy; 2000&ndash;2023 Kitware, Inc. and Contributors<br>Licensed under the BSD 3-clause License.<br>
    <a href="https://cmake.org/cmake/help/v3.26/command/target_precompile_headers.html" class="_attribution-link">https://cmake.org/cmake/help/v3.26/command/target_precompile_headers.html</a>
  </p>
</div>
