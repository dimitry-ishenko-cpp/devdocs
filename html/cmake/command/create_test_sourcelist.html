<h1 id="command:create_test_sourcelist">create_test_sourcelist</h1> <p>Create a test driver program that links together many small tests into a single executable. This is useful when building static executables with large libraries to shrink the total required size.</p> <dl class="cmake signature"> <dt class="sig sig-object cmake" id="original">
<code>create_test_sourcelist(&lt;sourceListName&gt; &lt;driverName&gt; &lt;test&gt;... &lt;options&gt;...)</code> </dt> <dd>
<p>Generate a test driver source file from a list of individual test sources and provide a combined list of sources that can be built as an executable.</p> <p>The options are:</p> <dl> <dt>
<code>&lt;sourceListName&gt;</code> </dt>
<dd>
<p>The name of a variable in which to store the list of source files needed to build the test driver. The list will contain the <code>&lt;test&gt;...</code> sources and the generated <code>&lt;driverName&gt;</code> source.</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.29: </span>The test driver source is listed by absolute path in the build tree. Previously it was listed only as <code>&lt;driverName&gt;</code>.</p> </div> </dd> <dt>
<code>&lt;driverName&gt;</code> </dt>
<dd>
<p>Name of the test driver source file to be generated into the build tree. The source file will contain a <code>main()</code> program entry point that dispatches to whatever test is named on the command line.</p> </dd> <dt>
<code>&lt;test&gt;...</code> </dt>
<dd>
<p>Test source files to be added to the driver binary. Each test source file must have a function in it that is the same name as the file with the extension removed. For example, a <code>foo.cxx</code> test source might contain:</p> <pre data-language="c++">int foo(int argc, char** argv)
</pre> </dd> <dt>
<code>EXTRA_INCLUDE &lt;header&gt;</code> </dt>
<dd>
<p>Specify a header file to <code>#include</code> in the generated test driver source.</p> </dd> <dt>
<code>FUNCTION &lt;function&gt;</code> </dt>
<dd>
<p>Specify a function to be called with pointers to <code>argc</code> and <code>argv</code>. The function may be provided in the <code>EXTRA_INCLUDE</code> header:</p> <pre data-language="c++">void function(int* pargc, char*** pargv)
</pre> <p>This can be used to add extra command line processing to each test.</p> </dd> </dl> </dd>
</dl> <p>Additionally, some CMake variables affect test driver generation:</p> <dl class="cmake variable"> <dt class="sig sig-object cmake" id="variable:CMAKE_TESTDRIVER_BEFORE_TESTMAIN">
<code>CMAKE_TESTDRIVER_BEFORE_TESTMAIN</code> </dt> <dd>
<p>Code to be placed directly before calling each test's function.</p> </dd>
</dl> <dl class="cmake variable"> <dt class="sig sig-object cmake" id="variable:CMAKE_TESTDRIVER_AFTER_TESTMAIN">
<code>CMAKE_TESTDRIVER_AFTER_TESTMAIN</code> </dt> <dd>
<p>Code to be placed directly after the call to each test's function.</p> </dd>
</dl>  <div class="_attribution">
  <p class="_attribution-p">
    &copy; 2000&ndash;2024 Kitware, Inc. and Contributors<br>Licensed under the BSD 3-clause License.<br>
    <a href="https://cmake.org/cmake/help/latest/command/create_test_sourcelist.html" class="_attribution-link">https://cmake.org/cmake/help/latest/command/create_test_sourcelist.html</a>
  </p>
</div>
