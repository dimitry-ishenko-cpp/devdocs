<h1 id="command:add_test">add_test</h1> <p>Add a test to the project to be run by <a class="reference internal" href="../manual/ctest.1.html#manual:ctest(1)" title="ctest(1)" id="index-0-manual:ctest(1)"><code>ctest(1)</code></a>.</p> <pre data-language="cmake">add_test(NAME &lt;name&gt; COMMAND &lt;command&gt; [&lt;arg&gt;...]
         [CONFIGURATIONS &lt;config&gt;...]
         [WORKING_DIRECTORY &lt;dir&gt;]
         [COMMAND_EXPAND_LISTS])
</pre> <p>Adds a test called <code>&lt;name&gt;</code>. The test name may contain arbitrary characters, expressed as a <a class="reference internal" href="../manual/cmake-language.7.html#quoted-argument"><span class="std std-ref">Quoted Argument</span></a> or <a class="reference internal" href="../manual/cmake-language.7.html#bracket-argument"><span class="std std-ref">Bracket Argument</span></a> if necessary. See policy <a class="reference internal" href="../policy/cmp0110.html#policy:CMP0110" title="CMP0110" id="index-0-policy:CMP0110"><code>CMP0110</code></a>.</p> <p>CMake only generates tests if the <a class="reference internal" href="enable_testing.html#command:enable_testing" title="enable_testing" id="index-0-command:enable_testing"><code>enable_testing()</code></a> command has been invoked. The <a class="reference internal" href="../module/ctest.html#module:CTest" title="CTest" id="index-0-module:CTest"><code>CTest</code></a> module invokes <code>enable_testing</code> automatically unless <code>BUILD_TESTING</code> is set to <code>OFF</code>.</p> <p>Tests added with the <code>add_test(NAME)</code> signature support using <a class="reference internal" href="../manual/cmake-generator-expressions.7.html#manual:cmake-generator-expressions(7)" title="cmake-generator-expressions(7)" id="index-0-manual:cmake-generator-expressions(7)"><code>generator expressions</code></a> in test properties set by <a class="reference internal" href="set_property.html#command:set_property" title="set_property(test)" id="index-0-command:set_property"><code>set_property(TEST)</code></a> or <a class="reference internal" href="set_tests_properties.html#command:set_tests_properties" title="set_tests_properties" id="index-0-command:set_tests_properties"><code>set_tests_properties()</code></a>. Test properties may only be set in the directory the test is created in.</p> <p><code>add_test</code> options are:</p> <dl> <dt>
<code>COMMAND</code> </dt>
<dd>
<p>Specify the test command-line.</p> <p>If <code>&lt;command&gt;</code> specifies an executable target created by <a class="reference internal" href="add_executable.html#command:add_executable" title="add_executable" id="index-0-command:add_executable"><code>add_executable()</code></a>:</p> <ul> <li>It will automatically be replaced by the location of the executable created at build time.</li> <li>
<div class="versionadded"> <p><span class="versionmodified added">Added in version 3.3: </span>The target's <a class="reference internal" href="../prop_tgt/crosscompiling_emulator.html#prop_tgt:CROSSCOMPILING_EMULATOR" title="CROSSCOMPILING_EMULATOR" id="index-0-prop_tgt:CROSSCOMPILING_EMULATOR"><code>CROSSCOMPILING_EMULATOR</code></a>, if set, will be used to run the command on the host:</p> <pre data-language="none">&lt;emulator&gt; &lt;command&gt;
</pre> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.29: </span>The emulator is used only when <a class="reference internal" href="../variable/cmake_crosscompiling.html#variable:CMAKE_CROSSCOMPILING" title="CMAKE_CROSSCOMPILING" id="index-0-variable:CMAKE_CROSSCOMPILING"><code>cross-compiling</code></a>. See policy <a class="reference internal" href="../policy/cmp0158.html#policy:CMP0158" title="CMP0158" id="index-0-policy:CMP0158"><code>CMP0158</code></a>.</p> </div> </div> </li> <li>
<div class="versionadded"> <p><span class="versionmodified added">Added in version 3.29: </span>The target's <a class="reference internal" href="../prop_tgt/test_launcher.html#prop_tgt:TEST_LAUNCHER" title="TEST_LAUNCHER" id="index-0-prop_tgt:TEST_LAUNCHER"><code>TEST_LAUNCHER</code></a>, if set, will be used to launch the command:</p> <pre data-language="none">&lt;launcher&gt; &lt;command&gt;
</pre> <p>If the <a class="reference internal" href="../prop_tgt/crosscompiling_emulator.html#prop_tgt:CROSSCOMPILING_EMULATOR" title="CROSSCOMPILING_EMULATOR" id="index-1-prop_tgt:CROSSCOMPILING_EMULATOR"><code>CROSSCOMPILING_EMULATOR</code></a> is also set, both are used:</p> <pre data-language="none">&lt;launcher&gt; &lt;emulator&gt; &lt;command&gt;
</pre> </div> </li> </ul> <p>The command may be specified using <a class="reference internal" href="../manual/cmake-generator-expressions.7.html#manual:cmake-generator-expressions(7)" title="cmake-generator-expressions(7)" id="index-1-manual:cmake-generator-expressions(7)"><code>generator expressions</code></a>.</p> </dd> <dt>
<code>CONFIGURATIONS</code> </dt>
<dd>
<p>Restrict execution of the test only to the named configurations.</p> </dd> <dt>
<code>WORKING_DIRECTORY</code> </dt>
<dd>
<p>Set the test property <a class="reference internal" href="../prop_test/working_directory.html#prop_test:WORKING_DIRECTORY" title="WORKING_DIRECTORY" id="index-0-prop_test:WORKING_DIRECTORY"><code>WORKING_DIRECTORY</code></a> in which to execute the test. If not specified, the test will be run in <a class="reference internal" href="../variable/cmake_current_binary_dir.html#variable:CMAKE_CURRENT_BINARY_DIR" title="CMAKE_CURRENT_BINARY_DIR" id="index-0-variable:CMAKE_CURRENT_BINARY_DIR"><code>CMAKE_CURRENT_BINARY_DIR</code></a>. The working directory may be specified using <a class="reference internal" href="../manual/cmake-generator-expressions.7.html#manual:cmake-generator-expressions(7)" title="cmake-generator-expressions(7)" id="index-2-manual:cmake-generator-expressions(7)"><code>generator expressions</code></a>.</p> </dd> <dt>
<code>COMMAND_EXPAND_LISTS</code> </dt>
<dd>
<div class="versionadded"> <p><span class="versionmodified added">Added in version 3.16.</span></p> </div> <p>Lists in <code>COMMAND</code> arguments will be expanded, including those created with <a class="reference internal" href="../manual/cmake-generator-expressions.7.html#manual:cmake-generator-expressions(7)" title="cmake-generator-expressions(7)" id="index-3-manual:cmake-generator-expressions(7)"><code>generator expressions</code></a>.</p> </dd> </dl> <p>If the test command exits with code <code>0</code> the test passes. Non-zero exit code is a "failed" test. The test property <a class="reference internal" href="../prop_test/will_fail.html#prop_test:WILL_FAIL" title="WILL_FAIL" id="index-0-prop_test:WILL_FAIL"><code>WILL_FAIL</code></a> inverts this logic. Note that system-level test failures such as segmentation faults or heap errors will still fail the test even if <code>WILL_FAIL</code> is true. Output written to stdout or stderr is captured by <a class="reference internal" href="../manual/ctest.1.html#manual:ctest(1)" title="ctest(1)" id="index-1-manual:ctest(1)"><code>ctest(1)</code></a> and only affects the pass/fail status via the <a class="reference internal" href="../prop_test/pass_regular_expression.html#prop_test:PASS_REGULAR_EXPRESSION" title="PASS_REGULAR_EXPRESSION" id="index-0-prop_test:PASS_REGULAR_EXPRESSION"><code>PASS_REGULAR_EXPRESSION</code></a>, <a class="reference internal" href="../prop_test/fail_regular_expression.html#prop_test:FAIL_REGULAR_EXPRESSION" title="FAIL_REGULAR_EXPRESSION" id="index-0-prop_test:FAIL_REGULAR_EXPRESSION"><code>FAIL_REGULAR_EXPRESSION</code></a>, or <a class="reference internal" href="../prop_test/skip_regular_expression.html#prop_test:SKIP_REGULAR_EXPRESSION" title="SKIP_REGULAR_EXPRESSION" id="index-0-prop_test:SKIP_REGULAR_EXPRESSION"><code>SKIP_REGULAR_EXPRESSION</code></a> test properties.</p> <div class="versionadded"> <p><span class="versionmodified added">Added in version 3.16: </span>Added <a class="reference internal" href="../prop_test/skip_regular_expression.html#prop_test:SKIP_REGULAR_EXPRESSION" title="SKIP_REGULAR_EXPRESSION" id="index-1-prop_test:SKIP_REGULAR_EXPRESSION"><code>SKIP_REGULAR_EXPRESSION</code></a> property.</p> </div> <p>Example usage:</p> <pre data-language="cmake">add_test(NAME mytest
         COMMAND testDriver --config $&lt;CONFIG&gt;
                            --exe $&lt;TARGET_FILE:myexe&gt;)
</pre> <p>This creates a test <code>mytest</code> whose command runs a <code>testDriver</code> tool passing the configuration name and the full path to the executable file produced by target <code>myexe</code>.</p>  <p>The command syntax above is recommended over the older, less flexible form:</p> <pre data-language="cmake">add_test(&lt;name&gt; &lt;command&gt; [&lt;arg&gt;...])
</pre> <p>Add a test called <code>&lt;name&gt;</code> with the given command-line.</p> <p>Unlike the above <code>NAME</code> signature, target names are not supported in the command-line. Furthermore, tests added with this signature do not support <a class="reference internal" href="../manual/cmake-generator-expressions.7.html#manual:cmake-generator-expressions(7)" title="cmake-generator-expressions(7)" id="index-4-manual:cmake-generator-expressions(7)"><code>generator expressions</code></a> in the command-line or test properties.</p>  <div class="_attribution">
  <p class="_attribution-p">
    &copy; 2000&ndash;2024 Kitware, Inc. and Contributors<br>Licensed under the BSD 3-clause License.<br>
    <a href="https://cmake.org/cmake/help/latest/command/add_test.html" class="_attribution-link">https://cmake.org/cmake/help/latest/command/add_test.html</a>
  </p>
</div>
