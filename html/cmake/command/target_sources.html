<h1 id="command:target_sources">target_sources</h1> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.1.</span></p> </div> <p>Add sources to a target.</p> <pre data-language="cmake">target_sources(&lt;target&gt;
  &lt;INTERFACE|PUBLIC|PRIVATE&gt; [items1...]
  [&lt;INTERFACE|PUBLIC|PRIVATE&gt; [items2...] ...])
</pre> <p>Specifies sources to use when building a target and/or its dependents. The named <code>&lt;target&gt;</code> must have been created by a command such as <a class="reference internal" href="add_executable.html#command:add_executable" title="add_executable" id="index-0-command:add_executable"><code>add_executable()</code></a> or <a class="reference internal" href="add_library.html#command:add_library" title="add_library" id="index-0-command:add_library"><code>add_library()</code></a> or <a class="reference internal" href="add_custom_target.html#command:add_custom_target" title="add_custom_target" id="index-0-command:add_custom_target"><code>add_custom_target()</code></a> and must not be an <a class="reference internal" href="../manual/cmake-buildsystem.7.html#alias-targets"><span class="std std-ref">ALIAS target</span></a>. The <code>&lt;items&gt;</code> may use <a class="reference internal" href="../manual/cmake-generator-expressions.7.html#manual:cmake-generator-expressions(7)" title="cmake-generator-expressions(7)" id="index-0-manual:cmake-generator-expressions(7)"><code>generator expressions</code></a>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.20: </span><code>&lt;target&gt;</code> can be a custom target.</p> </div> <p>The <code>INTERFACE</code>, <code>PUBLIC</code> and <code>PRIVATE</code> keywords are required to specify the <a class="reference internal" href="../manual/cmake-buildsystem.7.html#target-usage-requirements"><span class="std std-ref">scope</span></a> of the source file paths (<code>&lt;items&gt;</code>) that follow them. <code>PRIVATE</code> and <code>PUBLIC</code> items will populate the <a class="reference internal" href="../prop_tgt/sources.html#prop_tgt:SOURCES" title="SOURCES" id="index-0-prop_tgt:SOURCES"><code>SOURCES</code></a> property of <code>&lt;target&gt;</code>, which are used when building the target itself. <code>PUBLIC</code> and <code>INTERFACE</code> items will populate the <a class="reference internal" href="../prop_tgt/interface_sources.html#prop_tgt:INTERFACE_SOURCES" title="INTERFACE_SOURCES" id="index-0-prop_tgt:INTERFACE_SOURCES"><code>INTERFACE_SOURCES</code></a> property of <code>&lt;target&gt;</code>, which are used when building dependents. A target created by <a class="reference internal" href="add_custom_target.html#command:add_custom_target" title="add_custom_target" id="index-1-command:add_custom_target"><code>add_custom_target()</code></a> can only have <code>PRIVATE</code> scope.</p> <p>Repeated calls for the same <code>&lt;target&gt;</code> append items in the order called.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.3: </span>Allow exporting targets with <a class="reference internal" href="../prop_tgt/interface_sources.html#prop_tgt:INTERFACE_SOURCES" title="INTERFACE_SOURCES" id="index-1-prop_tgt:INTERFACE_SOURCES"><code>INTERFACE_SOURCES</code></a>.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.11: </span>Allow setting <code>INTERFACE</code> items on <a class="reference internal" href="../manual/cmake-buildsystem.7.html#imported-targets"><span class="std std-ref">IMPORTED targets</span></a>.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.13: </span>Relative source file paths are interpreted as being relative to the current source directory (i.e. <a class="reference internal" href="../variable/cmake_current_source_dir.html#variable:CMAKE_CURRENT_SOURCE_DIR" title="CMAKE_CURRENT_SOURCE_DIR" id="index-0-variable:CMAKE_CURRENT_SOURCE_DIR"><code>CMAKE_CURRENT_SOURCE_DIR</code></a>). See policy <a class="reference internal" href="../policy/cmp0076.html#policy:CMP0076" title="CMP0076" id="index-0-policy:CMP0076"><code>CMP0076</code></a>.</p> </div> <p>A path that begins with a generator expression is left unmodified. When a target's <a class="reference internal" href="../prop_tgt/source_dir.html#prop_tgt:SOURCE_DIR" title="SOURCE_DIR" id="index-0-prop_tgt:SOURCE_DIR"><code>SOURCE_DIR</code></a> property differs from <a class="reference internal" href="../variable/cmake_current_source_dir.html#variable:CMAKE_CURRENT_SOURCE_DIR" title="CMAKE_CURRENT_SOURCE_DIR" id="index-1-variable:CMAKE_CURRENT_SOURCE_DIR"><code>CMAKE_CURRENT_SOURCE_DIR</code></a>, use absolute paths in generator expressions to ensure the sources are correctly assigned to the target.</p> <pre data-language="cmake"># WRONG: starts with generator expression, but relative path used
target_sources(MyTarget PRIVATE "$&lt;$&lt;CONFIG:Debug&gt;:dbgsrc.cpp&gt;")

# CORRECT: absolute path used inside the generator expression
target_sources(MyTarget PRIVATE "$&lt;$&lt;CONFIG:Debug&gt;:${CMAKE_CURRENT_SOURCE_DIR}/dbgsrc.cpp&gt;")
</pre> <p>See the <a class="reference internal" href="../manual/cmake-buildsystem.7.html#manual:cmake-buildsystem(7)" title="cmake-buildsystem(7)" id="index-0-manual:cmake-buildsystem(7)"><code>cmake-buildsystem(7)</code></a> manual for more on defining buildsystem properties.</p>  <h2>File Sets</h2> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.23.</span></p> </div> <pre data-language="cmake">target_sources(&lt;target&gt;
  [&lt;INTERFACE|PUBLIC|PRIVATE&gt;
   [FILE_SET &lt;set&gt; [TYPE &lt;type&gt;] [BASE_DIRS &lt;dirs&gt;...] [FILES &lt;files&gt;...]]...
  ]...)
</pre> <p>Adds a file set to a target, or adds files to an existing file set. Targets have zero or more named file sets. Each file set has a name, a type, a scope of <code>INTERFACE</code>, <code>PUBLIC</code>, or <code>PRIVATE</code>, one or more base directories, and files within those directories. The acceptable types include:</p> <p><code>HEADERS</code></p>  <p>Sources intended to be used via a language's <code>#include</code> mechanism.</p>  <p><code>CXX_MODULES</code></p>  <div class="admonition note"> <p class="admonition-title">Note</p> <p>Experimental. Gated by <code>CMAKE_EXPERIMENTAL_CXX_MODULE_CMAKE_API</code></p> </div> <p>Sources which contain C++ interface module or partition units (i.e., those using the <code>export</code> keyword). This file set type may not have an <code>INTERFACE</code> scope except on <code>IMPORTED</code> targets.</p>  <p><code>CXX_MODULE_HEADER_UNITS</code></p>  <div class="admonition note"> <p class="admonition-title">Note</p> <p>Experimental. Gated by <code>CMAKE_EXPERIMENTAL_CXX_MODULE_CMAKE_API</code></p> </div> <p>C++ header sources which may be imported by other C++ source code. This file set type may not have an <code>INTERFACE</code> scope except on <code>IMPORTED</code> targets.</p>  <p>The optional default file sets are named after their type. The target may not be a custom target or <a class="reference internal" href="../prop_tgt/framework.html#prop_tgt:FRAMEWORK" title="FRAMEWORK" id="index-0-prop_tgt:FRAMEWORK"><code>FRAMEWORK</code></a> target.</p> <p>Files in a <code>PRIVATE</code> or <code>PUBLIC</code> file set are marked as source files for the purposes of IDE integration. Additionally, files in <code>HEADERS</code> file sets have their <a class="reference internal" href="../prop_sf/header_file_only.html#prop_sf:HEADER_FILE_ONLY" title="HEADER_FILE_ONLY" id="index-0-prop_sf:HEADER_FILE_ONLY"><code>HEADER_FILE_ONLY</code></a> property set to <code>TRUE</code>. Files in an <code>INTERFACE</code> or <code>PUBLIC</code> file set can be installed with the <a class="reference internal" href="install.html#command:install" title="install" id="index-0-command:install"><code>install(TARGETS)</code></a> command, and exported with the <a class="reference internal" href="install.html#command:install" title="install" id="index-1-command:install"><code>install(EXPORT)</code></a> and <a class="reference internal" href="export.html#command:export" title="export" id="index-0-command:export"><code>export()</code></a> commands.</p> <p>Each <code>target_sources(FILE_SET)</code> entry starts with <code>INTERFACE</code>, <code>PUBLIC</code>, or <code>PRIVATE</code> and accepts the following arguments:</p> <p><code>FILE_SET &lt;set&gt;</code></p>  <p>The name of the file set to create or add to. It must contain only letters, numbers and underscores. Names starting with a capital letter are reserved for built-in file sets predefined by CMake. The only predefined set names are those matching the acceptable types. All other set names must not start with a capital letter or underscore.</p>  <p><code>TYPE &lt;type&gt;</code></p>  <p>Every file set is associated with a particular type of file. Only types specified above may be used and it is an error to specify anything else. As a special case, if the name of the file set is one of the types, the type does not need to be specified and the <code>TYPE &lt;type&gt;</code> arguments can be omitted. For all other file set names, <code>TYPE</code> is required.</p>  <p><code>BASE_DIRS &lt;dirs&gt;...</code></p>  <p>An optional list of base directories of the file set. Any relative path is treated as relative to the current source directory (i.e. <a class="reference internal" href="../variable/cmake_current_source_dir.html#variable:CMAKE_CURRENT_SOURCE_DIR" title="CMAKE_CURRENT_SOURCE_DIR" id="index-2-variable:CMAKE_CURRENT_SOURCE_DIR"><code>CMAKE_CURRENT_SOURCE_DIR</code></a>). If no <code>BASE_DIRS</code> are specified when the file set is first created, the value of <a class="reference internal" href="../variable/cmake_current_source_dir.html#variable:CMAKE_CURRENT_SOURCE_DIR" title="CMAKE_CURRENT_SOURCE_DIR" id="index-3-variable:CMAKE_CURRENT_SOURCE_DIR"><code>CMAKE_CURRENT_SOURCE_DIR</code></a> is added. This argument supports <a class="reference internal" href="../manual/cmake-generator-expressions.7.html#manual:cmake-generator-expressions(7)" title="cmake-generator-expressions(7)" id="index-1-manual:cmake-generator-expressions(7)"><code>generator expressions</code></a>.</p> <p>No two base directories for a file set may be sub-directories of each other. This requirement must be met across all base directories added to a file set, not just those within a single call to <code>target_sources()</code>.</p>  <p><code>FILES &lt;files&gt;...</code></p>  <p>An optional list of files to add to the file set. Each file must be in one of the base directories, or a subdirectory of one of the base directories. This argument supports <a class="reference internal" href="../manual/cmake-generator-expressions.7.html#manual:cmake-generator-expressions(7)" title="cmake-generator-expressions(7)" id="index-2-manual:cmake-generator-expressions(7)"><code>generator expressions</code></a>.</p> <p>If relative paths are specified, they are considered relative to <a class="reference internal" href="../variable/cmake_current_source_dir.html#variable:CMAKE_CURRENT_SOURCE_DIR" title="CMAKE_CURRENT_SOURCE_DIR" id="index-4-variable:CMAKE_CURRENT_SOURCE_DIR"><code>CMAKE_CURRENT_SOURCE_DIR</code></a> at the time <code>target_sources()</code> is called. An exception to this is a path starting with <code>$&lt;</code>. Such paths are treated as relative to the target's source directory after evaluation of generator expressions.</p>  <p>The following target properties are set by <code>target_sources(FILE_SET)</code>, but they should not generally be manipulated directly:</p> <p>For file sets of type <code>HEADERS</code>:</p> <ul class="simple"> <li><a class="reference internal" href="../prop_tgt/header_sets.html#prop_tgt:HEADER_SETS" title="HEADER_SETS" id="index-0-prop_tgt:HEADER_SETS"><code>HEADER_SETS</code></a></li> <li><a class="reference internal" href="../prop_tgt/interface_header_sets.html#prop_tgt:INTERFACE_HEADER_SETS" title="INTERFACE_HEADER_SETS" id="index-0-prop_tgt:INTERFACE_HEADER_SETS"><code>INTERFACE_HEADER_SETS</code></a></li> <li><a class="reference internal" href="../prop_tgt/header_set.html#prop_tgt:HEADER_SET" title="HEADER_SET" id="index-0-prop_tgt:HEADER_SET"><code>HEADER_SET</code></a></li> <li><a class="reference internal" href="#" title="HEADER_SET_&lt;NAME&gt;" id="index-0-prop_tgt:HEADER_SET_&lt;NAME&gt;"><code>HEADER_SET_&lt;NAME&gt;</code></a></li> <li><a class="reference internal" href="../prop_tgt/header_dirs.html#prop_tgt:HEADER_DIRS" title="HEADER_DIRS" id="index-0-prop_tgt:HEADER_DIRS"><code>HEADER_DIRS</code></a></li> <li><a class="reference internal" href="#" title="HEADER_DIRS_&lt;NAME&gt;" id="index-0-prop_tgt:HEADER_DIRS_&lt;NAME&gt;"><code>HEADER_DIRS_&lt;NAME&gt;</code></a></li> </ul> <p>For file sets of type <code>CXX_MODULES</code>:</p> <ul class="simple"> <li><a class="reference internal" href="../prop_tgt/cxx_module_sets.html#prop_tgt:CXX_MODULE_SETS" title="CXX_MODULE_SETS" id="index-0-prop_tgt:CXX_MODULE_SETS"><code>CXX_MODULE_SETS</code></a></li> <li><a class="reference internal" href="../prop_tgt/interface_cxx_module_sets.html#prop_tgt:INTERFACE_CXX_MODULE_SETS" title="INTERFACE_CXX_MODULE_SETS" id="index-0-prop_tgt:INTERFACE_CXX_MODULE_SETS"><code>INTERFACE_CXX_MODULE_SETS</code></a></li> <li><a class="reference internal" href="../prop_tgt/cxx_module_set.html#prop_tgt:CXX_MODULE_SET" title="CXX_MODULE_SET" id="index-0-prop_tgt:CXX_MODULE_SET"><code>CXX_MODULE_SET</code></a></li> <li><a class="reference internal" href="#" title="CXX_MODULE_SET_&lt;NAME&gt;" id="index-0-prop_tgt:CXX_MODULE_SET_&lt;NAME&gt;"><code>CXX_MODULE_SET_&lt;NAME&gt;</code></a></li> <li><a class="reference internal" href="../prop_tgt/cxx_module_dirs.html#prop_tgt:CXX_MODULE_DIRS" title="CXX_MODULE_DIRS" id="index-0-prop_tgt:CXX_MODULE_DIRS"><code>CXX_MODULE_DIRS</code></a></li> <li><a class="reference internal" href="#" title="CXX_MODULE_DIRS_&lt;NAME&gt;" id="index-0-prop_tgt:CXX_MODULE_DIRS_&lt;NAME&gt;"><code>CXX_MODULE_DIRS_&lt;NAME&gt;</code></a></li> </ul> <p>For file sets of type <code>CXX_MODULE_HEADER_UNITS</code>:</p> <ul class="simple"> <li><a class="reference internal" href="../prop_tgt/cxx_module_header_unit_sets.html#prop_tgt:CXX_MODULE_HEADER_UNIT_SETS" title="CXX_MODULE_HEADER_UNIT_SETS" id="index-0-prop_tgt:CXX_MODULE_HEADER_UNIT_SETS"><code>CXX_MODULE_HEADER_UNIT_SETS</code></a></li> <li><a class="reference internal" href="../prop_tgt/interface_cxx_module_header_unit_sets.html#prop_tgt:INTERFACE_CXX_MODULE_HEADER_UNIT_SETS" title="INTERFACE_CXX_MODULE_HEADER_UNIT_SETS" id="index-0-prop_tgt:INTERFACE_CXX_MODULE_HEADER_UNIT_SETS"><code>INTERFACE_CXX_MODULE_HEADER_UNIT_SETS</code></a></li> <li><a class="reference internal" href="../prop_tgt/cxx_module_header_unit_set.html#prop_tgt:CXX_MODULE_HEADER_UNIT_SET" title="CXX_MODULE_HEADER_UNIT_SET" id="index-0-prop_tgt:CXX_MODULE_HEADER_UNIT_SET"><code>CXX_MODULE_HEADER_UNIT_SET</code></a></li> <li><a class="reference internal" href="#" title="CXX_MODULE_HEADER_UNIT_SET_&lt;NAME&gt;" id="index-0-prop_tgt:CXX_MODULE_HEADER_UNIT_SET_&lt;NAME&gt;"><code>CXX_MODULE_HEADER_UNIT_SET_&lt;NAME&gt;</code></a></li> <li><a class="reference internal" href="../prop_tgt/cxx_module_header_unit_dirs.html#prop_tgt:CXX_MODULE_HEADER_UNIT_DIRS" title="CXX_MODULE_HEADER_UNIT_DIRS" id="index-0-prop_tgt:CXX_MODULE_HEADER_UNIT_DIRS"><code>CXX_MODULE_HEADER_UNIT_DIRS</code></a></li> <li><a class="reference internal" href="#" title="CXX_MODULE_HEADER_UNIT_DIRS_&lt;NAME&gt;" id="index-0-prop_tgt:CXX_MODULE_HEADER_UNIT_DIRS_&lt;NAME&gt;"><code>CXX_MODULE_HEADER_UNIT_DIRS_&lt;NAME&gt;</code></a></li> </ul> <p>Target properties related to include directories are also modified by <code>target_sources(FILE_SET)</code> as follows:</p> <p><a class="reference internal" href="../prop_tgt/include_directories.html#prop_tgt:INCLUDE_DIRECTORIES" title="INCLUDE_DIRECTORIES" id="index-0-prop_tgt:INCLUDE_DIRECTORIES"><code>INCLUDE_DIRECTORIES</code></a></p>  <p>If the <code>TYPE</code> is <code>HEADERS</code> or <code>CXX_MODULE_HEADER_UNITS</code>, and the scope of the file set is <code>PRIVATE</code> or <code>PUBLIC</code>, all of the <code>BASE_DIRS</code> of the file set are wrapped in <a class="reference internal" href="../manual/cmake-generator-expressions.7.html#genex:BUILD_INTERFACE" title="BUILD_INTERFACE" id="index-0-genex:BUILD_INTERFACE"><code>$&lt;BUILD_INTERFACE&gt;</code></a> and appended to this property.</p>  <p><a class="reference internal" href="../prop_tgt/interface_include_directories.html#prop_tgt:INTERFACE_INCLUDE_DIRECTORIES" title="INTERFACE_INCLUDE_DIRECTORIES" id="index-0-prop_tgt:INTERFACE_INCLUDE_DIRECTORIES"><code>INTERFACE_INCLUDE_DIRECTORIES</code></a></p>  <p>If the <code>TYPE</code> is <code>HEADERS</code> or <code>CXX_MODULE_HEADER_UNITS</code>, and the scope of the file set is <code>INTERFACE</code> or <code>PUBLIC</code>, all of the <code>BASE_DIRS</code> of the file set are wrapped in <a class="reference internal" href="../manual/cmake-generator-expressions.7.html#genex:BUILD_INTERFACE" title="BUILD_INTERFACE" id="index-1-genex:BUILD_INTERFACE"><code>$&lt;BUILD_INTERFACE&gt;</code></a> and appended to this property.</p>    <h2>See Also</h2> <ul class="simple"> <li><a class="reference internal" href="add_executable.html#command:add_executable" title="add_executable" id="index-1-command:add_executable"><code>add_executable()</code></a></li> <li><a class="reference internal" href="add_library.html#command:add_library" title="add_library" id="index-1-command:add_library"><code>add_library()</code></a></li> <li><a class="reference internal" href="target_compile_definitions.html#command:target_compile_definitions" title="target_compile_definitions" id="index-0-command:target_compile_definitions"><code>target_compile_definitions()</code></a></li> <li><a class="reference internal" href="target_compile_features.html#command:target_compile_features" title="target_compile_features" id="index-0-command:target_compile_features"><code>target_compile_features()</code></a></li> <li><a class="reference internal" href="target_compile_options.html#command:target_compile_options" title="target_compile_options" id="index-0-command:target_compile_options"><code>target_compile_options()</code></a></li> <li><a class="reference internal" href="target_include_directories.html#command:target_include_directories" title="target_include_directories" id="index-0-command:target_include_directories"><code>target_include_directories()</code></a></li> <li><a class="reference internal" href="target_link_libraries.html#command:target_link_libraries" title="target_link_libraries" id="index-0-command:target_link_libraries"><code>target_link_libraries()</code></a></li> <li><a class="reference internal" href="target_link_directories.html#command:target_link_directories" title="target_link_directories" id="index-0-command:target_link_directories"><code>target_link_directories()</code></a></li> <li><a class="reference internal" href="target_link_options.html#command:target_link_options" title="target_link_options" id="index-0-command:target_link_options"><code>target_link_options()</code></a></li> <li><a class="reference internal" href="target_precompile_headers.html#command:target_precompile_headers" title="target_precompile_headers" id="index-0-command:target_precompile_headers"><code>target_precompile_headers()</code></a></li> </ul>   <div class="_attribution">
  <p class="_attribution-p">
    &copy; 2000&ndash;2023 Kitware, Inc. and Contributors<br>Licensed under the BSD 3-clause License.<br>
    <a href="https://cmake.org/cmake/help/v3.26/command/target_sources.html" class="_attribution-link">https://cmake.org/cmake/help/v3.26/command/target_sources.html</a>
  </p>
</div>
