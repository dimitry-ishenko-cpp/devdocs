<h1 id="variable:BUILD_SHARED_LIBS">BUILD_SHARED_LIBS</h1> <p>Tell <a class="reference internal" href="../command/add_library.html#command:add_library" title="add_library" id="index-0-command:add_library"><code>add_library()</code></a> to default to <code>SHARED</code> libraries, instead of <code>STATIC</code> libraries, when called with no explicit library type.</p> <p>Calls to <a class="reference internal" href="../command/add_library.html#command:add_library" title="add_library" id="index-1-command:add_library"><code>add_library()</code></a> without any explicit library type check the current <code>BUILD_SHARED_LIBS</code> variable value. If it is true, then the default library type is <code>SHARED</code>. Otherwise, the default is <code>STATIC</code>.</p> <p>For example, the code:</p> <pre data-language="cmake">add_library(example ${sources})
</pre> <p>behaves as if written</p> <pre data-language="cmake">if(BUILD_SHARED_LIBS)
  add_library(example SHARED ${sources})
else()
  add_library(example STATIC ${sources})
endif()
</pre> <p>CMake does not define <code>BUILD_SHARED_LIBS</code> by default, but projects often create a cache entry for it using the <a class="reference internal" href="../command/option.html#command:option" title="option" id="index-0-command:option"><code>option()</code></a> command:</p> <pre data-language="cmake">option(BUILD_SHARED_LIBS "Build using shared libraries" ON)
</pre> <p>This provides a switch that users can control, e.g., with <a class="reference internal" href="../manual/cmake.1.html#cmdoption-cmake-D"><code>cmake -D</code></a>. If adding such an option to the project, do so in the top level <code>CMakeLists.txt</code> file, before any <a class="reference internal" href="../command/add_library.html#command:add_library" title="add_library" id="index-2-command:add_library"><code>add_library()</code></a> calls. Note that if bringing external dependencies directly into the build, such as with <a class="reference internal" href="../module/fetchcontent.html#module:FetchContent" title="FetchContent" id="index-0-module:FetchContent"><code>FetchContent</code></a> or a direct call to <a class="reference internal" href="../command/add_subdirectory.html#command:add_subdirectory" title="add_subdirectory" id="index-0-command:add_subdirectory"><code>add_subdirectory()</code></a>, and one of those dependencies has such a call to <a class="reference internal" href="../command/option.html#command:option" title="option" id="index-1-command:option"><code>option(BUILD_SHARED_LIBS ...)</code></a>, the top level project must also call <a class="reference internal" href="../command/option.html#command:option" title="option" id="index-2-command:option"><code>option(BUILD_SHARED_LIBS ...)</code></a> before bringing in its dependencies. Failure to do so can lead to different behavior between the first and subsequent CMake runs.</p>  <div class="_attribution">
  <p class="_attribution-p">
    &copy; 2000&ndash;2024 Kitware, Inc. and Contributors<br>Licensed under the BSD 3-clause License.<br>
    <a href="https://cmake.org/cmake/help/latest/variable/BUILD_SHARED_LIBS.html" class="_attribution-link">https://cmake.org/cmake/help/latest/variable/BUILD_SHARED_LIBS.html</a>
  </p>
</div>
