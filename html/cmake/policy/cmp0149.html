<h1 id="policy:CMP0149">CMP0149</h1> <div class="versionadded"> <p><span class="versionmodified added">Added in version 3.27.</span></p> </div> <p><a class="reference internal" href="../manual/cmake-generators.7.html#visual-studio-generators"><span class="std std-ref">Visual Studio Generators</span></a> select latest Windows SDK by default.</p> <p>Visual Studio Generators select a Windows SDK version to put in the <code>WindowsTargetPlatformVersion</code> setting in <code>.vcxproj</code> files. CMake sets the <a class="reference internal" href="../variable/cmake_vs_windows_target_platform_version.html#variable:CMAKE_VS_WINDOWS_TARGET_PLATFORM_VERSION" title="CMAKE_VS_WINDOWS_TARGET_PLATFORM_VERSION" id="index-0-variable:CMAKE_VS_WINDOWS_TARGET_PLATFORM_VERSION"><code>CMAKE_VS_WINDOWS_TARGET_PLATFORM_VERSION</code></a> variable to the selected SDK version.</p> <p>Prior to CMake 3.27, the SDK version was always selected by the value of the <a class="reference internal" href="../variable/cmake_system_version.html#variable:CMAKE_SYSTEM_VERSION" title="CMAKE_SYSTEM_VERSION" id="index-0-variable:CMAKE_SYSTEM_VERSION"><code>CMAKE_SYSTEM_VERSION</code></a> variable. Users or toolchain files could set that variable to one of the exact Windows SDK versions available on the host system. Since <a class="reference internal" href="../variable/cmake_system_version.html#variable:CMAKE_SYSTEM_VERSION" title="CMAKE_SYSTEM_VERSION" id="index-1-variable:CMAKE_SYSTEM_VERSION"><code>CMAKE_SYSTEM_VERSION</code></a> defaults to <a class="reference internal" href="../variable/cmake_host_system_version.html#variable:CMAKE_HOST_SYSTEM_VERSION" title="CMAKE_HOST_SYSTEM_VERSION" id="index-0-variable:CMAKE_HOST_SYSTEM_VERSION"><code>CMAKE_HOST_SYSTEM_VERSION</code></a>, and it is not guaranteed that a matching Windows SDK version is available, CMake had to fall back to using the latest Windows SDK version if no exact match was available. This approach was problematic:</p> <ul class="simple"> <li>The latest Windows SDK might or might not be selected based on whether the host version of Windows happens to match an available SDK version.</li> <li>An old Windows SDK version might be selected that has not been updated for newer language standards such as C11.</li> </ul> <p>CMake 3.27 and higher prefer to ignore the exact value of <a class="reference internal" href="../variable/cmake_system_version.html#variable:CMAKE_SYSTEM_VERSION" title="CMAKE_SYSTEM_VERSION" id="index-2-variable:CMAKE_SYSTEM_VERSION"><code>CMAKE_SYSTEM_VERSION</code></a> and by default select the latest SDK version available. An exact SDK version may be specified explicitly using a <code>version=</code> field in the <a class="reference internal" href="../variable/cmake_generator_platform.html#variable:CMAKE_GENERATOR_PLATFORM" title="CMAKE_GENERATOR_PLATFORM" id="index-0-variable:CMAKE_GENERATOR_PLATFORM"><code>CMAKE_GENERATOR_PLATFORM</code></a> variable. See <a class="reference internal" href="../variable/cmake_generator_platform.html#visual-studio-platform-selection"><span class="std std-ref">Visual Studio Platform Selection</span></a>.</p> <p>This policy provides compatibility for projects, toolchain files, and build scripts that have not been ported away from using <a class="reference internal" href="../variable/cmake_system_version.html#variable:CMAKE_SYSTEM_VERSION" title="CMAKE_SYSTEM_VERSION" id="index-3-variable:CMAKE_SYSTEM_VERSION"><code>CMAKE_SYSTEM_VERSION</code></a> to specify an exact SDK version.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This policy must be set before the first <a class="reference internal" href="../command/project.html#command:project" title="project" id="index-0-command:project"><code>project()</code></a> or <a class="reference internal" href="../command/enable_language.html#command:enable_language" title="enable_language" id="index-0-command:enable_language"><code>enable_language()</code></a> command invocation at the top of the project. That is when <a class="reference internal" href="../manual/cmake-generators.7.html#visual-studio-generators"><span class="std std-ref">Visual Studio Generators</span></a> select a Windows SDK.</p> </div> <p>The <code>OLD</code> behavior for this policy is to use the exact value of <a class="reference internal" href="../variable/cmake_system_version.html#variable:CMAKE_SYSTEM_VERSION" title="CMAKE_SYSTEM_VERSION" id="index-4-variable:CMAKE_SYSTEM_VERSION"><code>CMAKE_SYSTEM_VERSION</code></a> if possible. The <code>NEW</code> behavior for this policy is to ignore it.</p> <p>This policy was introduced in CMake version 3.27. It may be set by <a class="reference internal" href="../command/cmake_policy.html#command:cmake_policy" title="cmake_policy" id="index-0-command:cmake_policy"><code>cmake_policy()</code></a> or <a class="reference internal" href="../command/cmake_minimum_required.html#command:cmake_minimum_required" title="cmake_minimum_required" id="index-0-command:cmake_minimum_required"><code>cmake_minimum_required()</code></a>. If it is not set, CMake does <em>not</em> warn, and uses <code>OLD</code> behavior.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>The <code>OLD</code> behavior of a policy is <a class="reference internal" href="../manual/cmake-policies.7.html#manual:cmake-policies(7)" title="cmake-policies(7)" id="index-0-manual:cmake-policies(7)"><code>deprecated by definition</code></a> and may be removed in a future version of CMake.</p> </div>  <div class="_attribution">
  <p class="_attribution-p">
    &copy; 2000&ndash;2024 Kitware, Inc. and Contributors<br>Licensed under the BSD 3-clause License.<br>
    <a href="https://cmake.org/cmake/help/latest/policy/CMP0149.html" class="_attribution-link">https://cmake.org/cmake/help/latest/policy/CMP0149.html</a>
  </p>
</div>
