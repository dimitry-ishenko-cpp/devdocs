<h1 id="policy:CMP0164">CMP0164</h1> <div class="versionadded"> <p><span class="versionmodified added">Added in version 3.30.</span></p> </div> <p><a class="reference internal" href="../command/add_library.html#command:add_library" title="add_library" id="index-0-command:add_library"><code>add_library()</code></a> rejects <code>SHARED</code> libraries when not supported by the platform.</p> <p>In CMake 3.29 and below, on platforms that do not support shared libraries (<a class="reference internal" href="../prop_gbl/target_supports_shared_libs.html#prop_gbl:TARGET_SUPPORTS_SHARED_LIBS" title="TARGET_SUPPORTS_SHARED_LIBS" id="index-0-prop_gbl:TARGET_SUPPORTS_SHARED_LIBS"><code>TARGET_SUPPORTS_SHARED_LIBS</code></a> is false), the <a class="reference internal" href="../command/add_library.html#command:add_library" title="add_library" id="index-1-command:add_library"><code>add_library()</code></a> command automatically converts <code>SHARED</code> libraries to <code>STATIC</code> libraries to help users build projects on such platforms. However, the semantics of shared and static libraries are different enough that such automatic conversion cannot work in general. Projects using shared libraries need to be ported to such platforms on a case-by-case basis.</p> <p>In CMake 3.30 and above, <a class="reference internal" href="../command/add_library.html#command:add_library" title="add_library" id="index-2-command:add_library"><code>add_library()</code></a> prefers to reject creation of shared libraries on platforms that do not support them, and fail with a fatal error message. This policy provides compatibility for projects that happened to work with the automatic conversion to static libraries and have not been updated with an explicit port.</p> <p>The <code>OLD</code> behavior for this policy is to implicitly create a static library with a developer warning. The <code>NEW</code> behavior for this policy is to fail.</p> <p>This policy was introduced in CMake version 3.30. It may be set by <a class="reference internal" href="../command/cmake_policy.html#command:cmake_policy" title="cmake_policy" id="index-0-command:cmake_policy"><code>cmake_policy()</code></a> or <a class="reference internal" href="../command/cmake_minimum_required.html#command:cmake_minimum_required" title="cmake_minimum_required" id="index-0-command:cmake_minimum_required"><code>cmake_minimum_required()</code></a>. If it is not set, CMake does <em>not</em> warn about the behavior change, and uses <code>OLD</code> behavior.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>The <code>OLD</code> behavior of a policy is <a class="reference internal" href="../manual/cmake-policies.7.html#manual:cmake-policies(7)" title="cmake-policies(7)" id="index-0-manual:cmake-policies(7)"><code>deprecated by definition</code></a> and may be removed in a future version of CMake.</p> </div>  <div class="_attribution">
  <p class="_attribution-p">
    &copy; 2000&ndash;2024 Kitware, Inc. and Contributors<br>Licensed under the BSD 3-clause License.<br>
    <a href="https://cmake.org/cmake/help/latest/policy/CMP0164.html" class="_attribution-link">https://cmake.org/cmake/help/latest/policy/CMP0164.html</a>
  </p>
</div>
