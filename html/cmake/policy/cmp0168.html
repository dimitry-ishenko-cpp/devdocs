<h1 id="policy:CMP0168">CMP0168</h1> <div class="versionadded"> <p><span class="versionmodified added">Added in version 3.30.</span></p> </div> <p>The <a class="reference internal" href="../module/fetchcontent.html#module:FetchContent" title="FetchContent" id="index-0-module:FetchContent"><code>FetchContent</code></a> module implements steps directly instead of through a sub-build.</p> <p>CMake 3.29 and below implement FetchContent as a separate sub-build. This required configuring that separate project and using a build tool. This approach can be very slow with some generators and operating systems. CMake 3.30 and above prefer to implement the download, update, and patch steps directly as part of the main project.</p> <p>The <code>NEW</code> behavior has the following characteristics:</p> <ul class="simple"> <li>No sub-build is used. All operations are implemented directly from the main project's CMake configure step. When running in CMake script mode, no build tool needs to be available.</li> <li>Generator expressions and GNU Make variables of the form <code>$(SOMEVAR)</code> are not supported. They should not be used in any argument to <a class="reference internal" href="../module/fetchcontent.html#command:fetchcontent_declare" title="fetchcontent_declare" id="index-0-command:fetchcontent_declare"><code>FetchContent_Declare()</code></a> or <a class="reference internal" href="../module/fetchcontent.html#command:fetchcontent_populate" title="fetchcontent_populate" id="index-0-command:fetchcontent_populate"><code>FetchContent_Populate()</code></a>.</li> <li>All <code>LOG_...</code> and <code>USES_TERMINAL_...</code> options, the <code>QUIET</code> option, and the <a class="reference internal" href="../module/fetchcontent.html#variable:FETCHCONTENT_QUIET" title="FETCHCONTENT_QUIET" id="index-0-variable:FETCHCONTENT_QUIET"><code>FETCHCONTENT_QUIET</code></a> variable are ignored. <a class="reference internal" href="../module/fetchcontent.html#module:FetchContent" title="FetchContent" id="index-1-module:FetchContent"><code>FetchContent</code></a> output is always part of the main project's configure output. This also means it now respects the message logging level (see <a class="reference internal" href="../variable/cmake_message_log_level.html#variable:CMAKE_MESSAGE_LOG_LEVEL" title="CMAKE_MESSAGE_LOG_LEVEL" id="index-0-variable:CMAKE_MESSAGE_LOG_LEVEL"><code>CMAKE_MESSAGE_LOG_LEVEL</code></a> and <a class="reference internal" href="../manual/cmake.1.html#cmdoption-cmake-log-level"><code>--log-level</code></a>). The default message log level should be comparable to using <code>QUIET</code> with the <code>OLD</code> policy setting, except that warnings will now be shown.</li> <li>The <code>PREFIX</code>, <code>TMP_DIR</code>, <code>STAMP_DIR</code>, <code>LOG_DIR</code>, and <code>DOWNLOAD_DIR</code> options and their associated directory properties are ignored. The <a class="reference internal" href="../module/fetchcontent.html#module:FetchContent" title="FetchContent" id="index-2-module:FetchContent"><code>FetchContent</code></a> module controls those locations internally.</li> <li>
<a class="reference internal" href="../manual/cmake.1.html#cmdoption-cmake-fresh"><code>cmake --fresh</code></a> will remove the stamp and script files used for tracking and populating the dependency. This will force the dependency's download, update, and patch steps to be re-executed. The directory used for downloads is not affected by <a class="reference internal" href="../manual/cmake.1.html#cmdoption-cmake-fresh"><code>cmake --fresh</code></a>, so any previously downloaded files for the <code>URL</code> download method can still be re-used.</li> </ul> <p>The <code>OLD</code> behavior has the following characteristics:</p> <ul class="simple"> <li>A sub-build is always used to implement the download, update, and patch steps. A build tool must be available, even when using <a class="reference internal" href="../module/fetchcontent.html#command:fetchcontent_populate" title="fetchcontent_populate" id="index-1-command:fetchcontent_populate"><code>FetchContent_Populate()</code></a> in CMake script mode.</li> <li>Generator expressions and GNU Make variables of the form <code>$(SOMEVAR)</code> can be used, although such use is almost always inappropriate. They are evaluated in the sub-build, so they do not see any information from the main build.</li> <li>All logging, terminal control, and directory options related to the download, update, or patch steps are supported.</li> <li>If the <code>QUIET</code> option is used, or the <a class="reference internal" href="../module/fetchcontent.html#variable:FETCHCONTENT_QUIET" title="FETCHCONTENT_QUIET" id="index-1-variable:FETCHCONTENT_QUIET"><code>FETCHCONTENT_QUIET</code></a> variable is set to true, warnings will not be shown in the output.</li> <li>
<a class="reference internal" href="../manual/cmake.1.html#cmdoption-cmake-fresh"><code>cmake --fresh</code></a> has no effect on the dependency's stamp or script files. Previously executed steps will only re-run if details about the dependency have changed.</li> </ul> <p>There's a reasonably good chance that users can set the <a class="reference internal" href="#" title="CMAKE_POLICY_DEFAULT_CMP&lt;NNNN&gt;" id="index-0-variable:CMAKE_POLICY_DEFAULT_CMP&lt;NNNN&gt;"><code>CMAKE_POLICY_DEFAULT_CMP0168</code></a> variable to <code>NEW</code> to globally switch to the <code>NEW</code> behavior while waiting for the project and its dependencies to be updated use the <code>NEW</code> policy setting by default. Projects don't typically make use of the features that the <code>NEW</code> behavior no longer supports, and even those projects that do will often still work fine when those options are ignored. Before setting this behavior globally, check whether any <a class="reference internal" href="../module/fetchcontent.html#command:fetchcontent_declare" title="fetchcontent_declare" id="index-1-command:fetchcontent_declare"><code>FetchContent_Declare()</code></a> or <a class="reference internal" href="../module/fetchcontent.html#command:fetchcontent_populate" title="fetchcontent_populate" id="index-2-command:fetchcontent_populate"><code>FetchContent_Populate()</code></a> calls use the ignored options in a way that would change observable behavior, other than putting temporary or internally-generated files in different locations.</p> <p>This policy was introduced in CMake version 3.30. It may be set by <a class="reference internal" href="../command/cmake_policy.html#command:cmake_policy" title="cmake_policy" id="index-0-command:cmake_policy"><code>cmake_policy()</code></a> or <a class="reference internal" href="../command/cmake_minimum_required.html#command:cmake_minimum_required" title="cmake_minimum_required" id="index-0-command:cmake_minimum_required"><code>cmake_minimum_required()</code></a>. If it is not set, CMake does <em>not</em> warn, and uses <code>OLD</code> behavior.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>The <code>OLD</code> behavior of a policy is <a class="reference internal" href="../manual/cmake-policies.7.html#manual:cmake-policies(7)" title="cmake-policies(7)" id="index-0-manual:cmake-policies(7)"><code>deprecated by definition</code></a> and may be removed in a future version of CMake.</p> </div>  <div class="_attribution">
  <p class="_attribution-p">
    &copy; 2000&ndash;2024 Kitware, Inc. and Contributors<br>Licensed under the BSD 3-clause License.<br>
    <a href="https://cmake.org/cmake/help/latest/policy/CMP0168.html" class="_attribution-link">https://cmake.org/cmake/help/latest/policy/CMP0168.html</a>
  </p>
</div>
