<h1 id="policy:CMP0156">CMP0156</h1> <div class="versionadded"> <p><span class="versionmodified added">Added in version 3.29.</span></p> </div> <p>De-duplicate libraries on link lines based on linker capabilities.</p> <p>Traditional linkers maintain a set of undefined symbols during linking. The linker processes each file in the order in which it appears on the command line, until the set of undefined symbols becomes empty. An object file is linked into the output object when it is encountered, with its undefined symbols added to the set. Upon encountering an archive file a traditional linker searches the objects contained therein, and processes those that satisfy symbols in the unresolved set.</p> <p>Handling mutually dependent archives may be awkward when using a traditional linker. Archive files may have to be specified multiple times.</p> <p>Some linkers (for instance Apple or Windows linkers, as well as <code>LLVM LLD</code>) record all symbols found in objects and archives as they iterate over command line arguments. When one of these linkers encounters an undefined symbol that can be resolved by an object file contained in a previously processed archive file, it immediately extracts and links it into the output object.</p> <p>CMake 3.28 and below may generate link lines that repeat static libraries as a traditional linker would need, even when using a linker that does not need it. They may also de-duplicate shared libraries by keeping their last occurrence, which on Windows platforms can change DLL load order.</p> <p>CMake 3.29 and above prefer to apply different strategies based on linker capabilities. So, when targeting Apple and Windows platforms, all libraries are de-duplicated. Moreover, on Windows platforms, libraries are de-duplicated by keeping their first occurrence, thus respecting the project-specified order. This policy provides compatibility with projects that have not been updated to expect the latter behavior.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>When this policy is set to <code>NEW</code>, the policy <a class="reference internal" href="cmp0179.html#policy:CMP0179" title="CMP0179" id="index-0-policy:CMP0179"><code>CMP0179</code></a> controls which occurrence of the static libraries is kept when they are de-duplicated.</p> </div> <p>The <code>OLD</code> behavior for this policy is to always repeat static libraries as if using a traditional linker, and always de-duplicate shared libraries by keeping the last occurrence of each. The <code>NEW</code> behavior for this policy is to apply different strategies based on linker capabilities.</p> <p>This policy was introduced in CMake version 3.29. It may be set by <a class="reference internal" href="../command/cmake_policy.html#command:cmake_policy" title="cmake_policy" id="index-0-command:cmake_policy"><code>cmake_policy()</code></a> or <a class="reference internal" href="../command/cmake_minimum_required.html#command:cmake_minimum_required" title="cmake_minimum_required" id="index-0-command:cmake_minimum_required"><code>cmake_minimum_required()</code></a>. If it is not set, CMake does <em>not</em> warn, and uses <code>OLD</code> behavior.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>The <code>OLD</code> behavior of a policy is <a class="reference internal" href="../manual/cmake-policies.7.html#manual:cmake-policies(7)" title="cmake-policies(7)" id="index-0-manual:cmake-policies(7)"><code>deprecated by definition</code></a> and may be removed in a future version of CMake.</p> </div>  <div class="_attribution">
  <p class="_attribution-p">
    &copy; 2000&ndash;2024 Kitware, Inc. and Contributors<br>Licensed under the BSD 3-clause License.<br>
    <a href="https://cmake.org/cmake/help/latest/policy/CMP0156.html" class="_attribution-link">https://cmake.org/cmake/help/latest/policy/CMP0156.html</a>
  </p>
</div>
