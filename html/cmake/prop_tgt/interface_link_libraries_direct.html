<h1 id="prop_tgt:INTERFACE_LINK_LIBRARIES_DIRECT">INTERFACE_LINK_LIBRARIES_DIRECT</h1> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.24.</span></p> </div> <p>List of libraries that consumers of this library should treat as direct link dependencies.</p> <p>This target property may be set to <em>include</em> items in a dependent target's final set of direct link dependencies. See the <a class="reference internal" href="interface_link_libraries_direct_exclude.html#prop_tgt:INTERFACE_LINK_LIBRARIES_DIRECT_EXCLUDE" title="INTERFACE_LINK_LIBRARIES_DIRECT_EXCLUDE" id="index-0-prop_tgt:INTERFACE_LINK_LIBRARIES_DIRECT_EXCLUDE"><code>INTERFACE_LINK_LIBRARIES_DIRECT_EXCLUDE</code></a> target property to exclude items.</p> <p>The initial set of a dependent target's direct link dependencies is specified by its <a class="reference internal" href="link_libraries.html#prop_tgt:LINK_LIBRARIES" title="LINK_LIBRARIES" id="index-0-prop_tgt:LINK_LIBRARIES"><code>LINK_LIBRARIES</code></a> target property. Indirect link dependencies are specified by the transitive closure of the direct link dependencies' <a class="reference internal" href="interface_link_libraries.html#prop_tgt:INTERFACE_LINK_LIBRARIES" title="INTERFACE_LINK_LIBRARIES" id="index-0-prop_tgt:INTERFACE_LINK_LIBRARIES"><code>INTERFACE_LINK_LIBRARIES</code></a> properties. Any link dependency may specify additional direct link dependencies using the <code>INTERFACE_LINK_LIBRARIES_DIRECT</code> target property. The set of direct link dependencies is then filtered to exclude items named by any dependency's <a class="reference internal" href="interface_link_libraries_direct_exclude.html#prop_tgt:INTERFACE_LINK_LIBRARIES_DIRECT_EXCLUDE" title="INTERFACE_LINK_LIBRARIES_DIRECT_EXCLUDE" id="index-1-prop_tgt:INTERFACE_LINK_LIBRARIES_DIRECT_EXCLUDE"><code>INTERFACE_LINK_LIBRARIES_DIRECT_EXCLUDE</code></a> target property.</p> <p>The value of <code>INTERFACE_LINK_LIBRARIES_DIRECT</code> may use <a class="reference internal" href="../manual/cmake-generator-expressions.7.html#manual:cmake-generator-expressions(7)" title="cmake-generator-expressions(7)" id="index-0-manual:cmake-generator-expressions(7)"><code>generator expressions</code></a>.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>The <code>INTERFACE_LINK_LIBRARIES_DIRECT</code> target property is intended for advanced use cases such as injection of static plugins into a consuming executable. It should not be used as a substitute for organizing normal calls to <a class="reference internal" href="../command/target_link_libraries.html#command:target_link_libraries" title="target_link_libraries" id="index-0-command:target_link_libraries"><code>target_link_libraries()</code></a>.</p> </div>  <h2>Direct Link Dependencies as Usage Requirements</h2> <p>The <code>INTERFACE_LINK_LIBRARIES_DIRECT</code> and <code>INTERFACE_LINK_LIBRARIES_DIRECT_EXCLUDE</code> target properties are <a class="reference internal" href="../manual/cmake-buildsystem.7.html#target-usage-requirements"><span class="std std-ref">usage requirements</span></a>. Their effects propagate to dependent targets transitively, and can therefore affect the direct link dependencies of every target in a chain of dependent libraries. Whenever some library target <code>X</code> links to another library target <code>Y</code> whose direct or transitive usage requirements contain <code>INTERFACE_LINK_LIBRARIES_DIRECT</code> or <code>INTERFACE_LINK_LIBRARIES_DIRECT_EXCLUDE</code>, the properties may affect <code>X</code>'s list of direct link dependencies:</p> <ul class="simple"> <li>If <code>X</code> is a shared library or executable, its dependencies are linked. They also affect the usage requirements with which <code>X</code>'s sources are compiled.</li> <li>If <code>X</code> is a static library or object library, it does not actually link, so its dependencies at most affect the usage requirements with which <code>X</code>'s sources are compiled.</li> </ul> <p>The properties may also affect the list of direct link dependencies on <code>X</code>'s dependents:</p> <ul> <li>
<p>If <code>X</code> links <code>Y</code> publicly:</p> <pre data-language="cmake">target_link_libraries(X PUBLIC Y)
</pre> <p>then <code>Y</code> is placed in <code>X</code>'s <a class="reference internal" href="interface_link_libraries.html#prop_tgt:INTERFACE_LINK_LIBRARIES" title="INTERFACE_LINK_LIBRARIES" id="index-1-prop_tgt:INTERFACE_LINK_LIBRARIES"><code>INTERFACE_LINK_LIBRARIES</code></a>, so <code>Y</code>'s usage requirements, including <code>INTERFACE_LINK_LIBRARIES_DIRECT</code>, <code>INTERFACE_LINK_LIBRARIES_DIRECT_EXCLUDE</code>, and the usage requirements declared by the direct link dependencies they add, are propagated to <code>X</code>'s dependents.</p> </li> <li>
<p>If <code>X</code> is a static library or object library, and links <code>Y</code> privately:</p> <pre data-language="cmake">target_link_libraries(X PRIVATE Y)
</pre> <p>then <code>$&lt;LINK_ONLY:Y&gt;</code> is placed in <code>X</code>'s <a class="reference internal" href="interface_link_libraries.html#prop_tgt:INTERFACE_LINK_LIBRARIES" title="INTERFACE_LINK_LIBRARIES" id="index-2-prop_tgt:INTERFACE_LINK_LIBRARIES"><code>INTERFACE_LINK_LIBRARIES</code></a>. <code>Y</code>'s linking requirements, including <code>INTERFACE_LINK_LIBRARIES_DIRECT</code>, <code>INTERFACE_LINK_LIBRARIES_DIRECT_EXCLUDE</code>, and the transitive link dependencies declared by the direct link dependencies they add, are propagated to <code>X</code>'s dependents. However, <code>Y</code>'s non-linking usage requirements are blocked by the <a class="reference internal" href="../manual/cmake-generator-expressions.7.html#genex:LINK_ONLY" title="LINK_ONLY" id="index-0-genex:LINK_ONLY"><code>LINK_ONLY</code></a> generator expression, and are not propagated to <code>X</code>'s dependents.</p> </li> <li>
<p>If <code>X</code> is a shared library or executable, and links <code>Y</code> privately:</p> <pre data-language="cmake">target_link_libraries(X PRIVATE Y)
</pre> <p>then <code>Y</code> is not placed in <code>X</code>'s <a class="reference internal" href="interface_link_libraries.html#prop_tgt:INTERFACE_LINK_LIBRARIES" title="INTERFACE_LINK_LIBRARIES" id="index-3-prop_tgt:INTERFACE_LINK_LIBRARIES"><code>INTERFACE_LINK_LIBRARIES</code></a>, so <code>Y</code>'s usage requirements, even <code>INTERFACE_LINK_LIBRARIES_DIRECT</code> and <code>INTERFACE_LINK_LIBRARIES_DIRECT_EXCLUDE</code>, are not propagated to <code>X</code>'s dependents.</p> </li> <li>In all cases, the content of <code>X</code>'s <a class="reference internal" href="interface_link_libraries.html#prop_tgt:INTERFACE_LINK_LIBRARIES" title="INTERFACE_LINK_LIBRARIES" id="index-4-prop_tgt:INTERFACE_LINK_LIBRARIES"><code>INTERFACE_LINK_LIBRARIES</code></a> is not affected by <code>Y</code>'s <code>INTERFACE_LINK_LIBRARIES_DIRECT</code> or <code>INTERFACE_LINK_LIBRARIES_DIRECT_EXCLUDE</code>.</li> </ul> <p>One may limit the effects of <code>INTERFACE_LINK_LIBRARIES_DIRECT</code> and <code>INTERFACE_LINK_LIBRARIES_DIRECT_EXCLUDE</code> to a subset of dependent targets by using the <a class="reference internal" href="../manual/cmake-generator-expressions.7.html#genex:TARGET_PROPERTY" title="TARGET_PROPERTY" id="index-0-genex:TARGET_PROPERTY"><code>TARGET_PROPERTY</code></a> generator expression. For example, to limit the effects to executable targets, use an entry of the form:</p> <pre data-language="none">"$&lt;$&lt;STREQUAL:$&lt;TARGET_PROPERTY:TYPE&gt;,EXECUTABLE&gt;:...&gt;"
</pre> <p>Similarly, to limit the effects to specific targets, use an entry of the form:</p> <pre data-language="none">"$&lt;$&lt;BOOL:$&lt;TARGET_PROPERTY:USE_IT&gt;&gt;:...&gt;"
</pre> <p>This entry will only affect targets that set their <code>USE_IT</code> target property to a true value.</p>   <h2>Direct Link Dependency Ordering</h2> <p>The list of direct link dependencies for a target is computed from an initial ordered list in its <a class="reference internal" href="link_libraries.html#prop_tgt:LINK_LIBRARIES" title="LINK_LIBRARIES" id="index-1-prop_tgt:LINK_LIBRARIES"><code>LINK_LIBRARIES</code></a> target property. For each item, additional direct link dependencies are discovered from its direct and transitive <code>INTERFACE_LINK_LIBRARIES_DIRECT</code> usage requirements. Each discovered item is injected before the item that specified it. However, a discovered item is added at most once, and only if it did not appear anywhere in the initial list. This gives <a class="reference internal" href="link_libraries.html#prop_tgt:LINK_LIBRARIES" title="LINK_LIBRARIES" id="index-2-prop_tgt:LINK_LIBRARIES"><code>LINK_LIBRARIES</code></a> control over ordering of those direct link dependencies that it explicitly specifies.</p> <p>Once all direct link dependencies have been collected, items named by all of their <a class="reference internal" href="interface_link_libraries_direct_exclude.html#prop_tgt:INTERFACE_LINK_LIBRARIES_DIRECT_EXCLUDE" title="INTERFACE_LINK_LIBRARIES_DIRECT_EXCLUDE" id="index-2-prop_tgt:INTERFACE_LINK_LIBRARIES_DIRECT_EXCLUDE"><code>INTERFACE_LINK_LIBRARIES_DIRECT_EXCLUDE</code></a> usage requirements are removed from the final list. This does not affect the order of the items that remain.</p>   <h2>Example: Static Plugins</h2> <p>Consider a static library <code>Foo</code> that provides a static plugin <code>FooPlugin</code> to consuming application executables, where the implementation of the plugin depends on <code>Foo</code> and other things. In this case, the application should link to <code>FooPlugin</code> directly, before <code>Foo</code>. However, the application author only knows about <code>Foo</code>. We can express this as follows:</p> <pre data-language="cmake"># Core library used by other components.
add_library(Core STATIC core.cpp)

# Foo is a static library for use by applications.
# Implementation of Foo depends on Core.
add_library(Foo STATIC foo.cpp foo_plugin_helper.cpp)
target_link_libraries(Foo PRIVATE Core)

# Extra parts of Foo for use by its static plugins.
# Implementation of Foo's extra parts depends on both Core and Foo.
add_library(FooExtras STATIC foo_extras.cpp)
target_link_libraries(FooExtras PRIVATE Core Foo)

# The Foo library has an associated static plugin
# that should be linked into the final executable.
# Implementation of the plugin depends on Core, Foo, and FooExtras.
add_library(FooPlugin STATIC foo_plugin.cpp)
target_link_libraries(FooPlugin PRIVATE Core Foo FooExtras)

# An app that links Foo should link Foo's plugin directly.
set_property(TARGET Foo PROPERTY INTERFACE_LINK_LIBRARIES_DIRECT FooPlugin)

# An app does not need to link Foo directly because the plugin links it.
set_property(TARGET Foo PROPERTY INTERFACE_LINK_LIBRARIES_DIRECT_EXCLUDE Foo)
</pre> <p>An application <code>app</code> only needs to specify that it links to <code>Foo</code>:</p> <pre data-language="cmake">add_executable(app main.cpp)
target_link_libraries(app PRIVATE Foo)
</pre> <p>The <code>INTERFACE_LINK_LIBRARIES_DIRECT</code> target property on <code>Foo</code> tells CMake to pretend that <code>app</code> also links directly to <code>FooPlugin</code>. The <code>INTERFACE_LINK_LIBRARIES_DIRECT_EXCLUDE</code> target property on <code>Foo</code> tells CMake to pretend that <code>app</code> did <em>not</em> link directly to <code>Foo</code>. Instead, <code>Foo</code> will be linked as a dependency of <code>FooPlugin</code>. The final link line for <code>app</code> will link the libraries in the following order:</p> <ul class="simple"> <li>
<code>FooPlugin</code> as a direct link dependency of <code>app</code> (via <code>Foo</code>'s usage requirements).</li> <li>
<code>FooExtras</code> as a dependency of <code>FooPlugin</code>.</li> <li>
<code>Foo</code> as a dependency of <code>FooPlugin</code> and <code>FooExtras</code>.</li> <li>
<code>Core</code> as a dependency of <code>FooPlugin</code>, <code>FooExtras</code>, and <code>Foo</code>.</li> </ul> <p>Note that without the <code>INTERFACE_LINK_LIBRARIES_DIRECT_EXCLUDE</code> target property, <code>Foo</code> would be linked twice: once as a direct dependency of <code>app</code>, and once as a dependency of <code>FooPlugin</code>.</p>   <h2>Example: Opt-In Static Plugins</h2> <p>In the above <a class="reference internal" href="#example-static-plugins">Example: Static Plugins</a>, the <code>app</code> executable specifies that it links directly to <code>Foo</code>. In a real application, there might be an intermediate library:</p> <pre data-language="cmake">add_library(app_impl STATIC app_impl.cpp)
target_link_libraries(app_impl PRIVATE Foo)

add_executable(app main.cpp)
target_link_libraries(app PRIVATE app_impl)
</pre> <p>In this case we do not want <code>Foo</code>'s <code>INTERFACE_LINK_LIBRARIES_DIRECT</code> and <code>INTERFACE_LINK_LIBRARIES_DIRECT_EXCLUDE</code> target properties to affect the direct dependencies of <code>app_impl</code>. To avoid this, we can revise the property values to make their effects opt-in:</p> <pre data-language="cmake"># An app that links Foo should link Foo's plugin directly.
set_property(TARGET Foo PROPERTY INTERFACE_LINK_LIBRARIES_DIRECT
  "$&lt;$&lt;BOOL:$&lt;TARGET_PROPERTY:FOO_STATIC_PLUGINS&gt;&gt;:FooPlugin&gt;"
)

# An app does not need to link Foo directly because the plugin links it.
set_property(TARGET Foo PROPERTY INTERFACE_LINK_LIBRARIES_DIRECT_EXCLUDE
  "$&lt;$&lt;BOOL:$&lt;TARGET_PROPERTY:FOO_STATIC_PLUGINS&gt;&gt;:Foo&gt;"
)
</pre> <p>Now, the <code>app</code> executable can opt-in to get <code>Foo</code>'s plugin(s):</p> <pre data-language="cmake">set_property(TARGET app PROPERTY FOO_STATIC_PLUGINS 1)
</pre> <p>The final link line for <code>app</code> will now link the libraries in the following order:</p> <ul class="simple"> <li>
<code>FooPlugin</code> as a direct link dependency of <code>app</code> (via <code>Foo</code>'s usage requirements).</li> <li>
<code>app_impl</code> as a direct link dependency of <code>app</code>.</li> <li>
<code>FooExtras</code> as a dependency of <code>FooPlugin</code>.</li> <li>
<code>Foo</code> as a dependency of <code>app_impl</code>, <code>FooPlugin</code>, and <code>FooExtras</code>.</li> <li>
<code>Core</code> as a dependency of <code>FooPlugin</code>, <code>FooExtras</code>, and <code>Foo</code>.</li> </ul>   <div class="_attribution">
  <p class="_attribution-p">
    &copy; 2000&ndash;2023 Kitware, Inc. and Contributors<br>Licensed under the BSD 3-clause License.<br>
    <a href="https://cmake.org/cmake/help/v3.26/prop_tgt/INTERFACE_LINK_LIBRARIES_DIRECT.html" class="_attribution-link">https://cmake.org/cmake/help/v3.26/prop_tgt/INTERFACE_LINK_LIBRARIES_DIRECT.html</a>
  </p>
</div>
