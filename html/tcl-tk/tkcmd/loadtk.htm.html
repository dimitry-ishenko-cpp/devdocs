<h1>loadTk</h1>  <h2 id="M2">Name</h2> safe::loadTk — Load Tk into a safe interpreter. <h2 id="M3">Synopsis</h2> <b>safe::loadTk </b><i>slave</i> ?<b>-use</b> <i>windowId</i>? ?<b>-display</b> <i>displayName</i>?<br> <h2 id="M4">Description</h2> Safe Tk is based on Safe Tcl, which provides a mechanism that allows restricted and mediated access to auto-loading and packages for safe interpreters. Safe Tk adds the ability to configure the interpreter for safe Tk operations and load Tk into safe interpreters. <p> The <b>safe::loadTk</b> command initializes the required data structures in the named safe interpreter and then loads Tk into it. The interpreter must have been created with <b>safe::interpCreate</b> or have been initialized with <b>safe::interpInit</b>. The command returns the name of the safe interpreter. If <b>-use</b> is specified, the window identified by the specified system dependent identifier <i>windowId</i> is used to contain the “.” window of the safe interpreter; it can be any valid id, eventually referencing a window belonging to another application. As a convenience, if the window you plan to use is a Tk Window of the application you can use the window name (e.g., “<b>.x.y</b>”) instead of its window Id (e.g., from <b><a href="winfo.htm.html">winfo id</a></b> <b>.x.y</b>). When <b>-use</b> is not specified, a new toplevel window is created for the “.” window of the safe interpreter. On X11 if you want the embedded window to use another display than the default one, specify it with <b>-display</b>. See the <b><a href="#M5">SECURITY ISSUES</a></b> section below for implementation details. </p>
<h2 id="M5">Security issues</h2> Please read the <b><a href="../tclcmd/safe.htm.html">safe</a></b> manual page for Tcl to learn about the basic security considerations for Safe Tcl. <p> <b>safe::loadTk</b> adds the value of <b><a href="tkvars.htm.html">tk_library</a></b> taken from the master interpreter to the virtual access path of the safe interpreter so that auto-loading will work in the safe interpreter. </p>
<p> Tk initialization is now safe with respect to not trusting the slave's state for startup. <b>safe::loadTk</b> registers the slave's name so when the Tk initialization (<b><a href="https://www.tcl.tk/man/tcl/TkLib/Tk_Init.htm">Tk_SafeInit</a></b>) is called and in turn calls the master's <b>safe::InitTk</b> it will return the desired <b><a href="../tclcmd/tclvars.htm.html">argv</a></b> equivalent (<b>-use</b> <i>windowId</i>, correct <b>-display</b>, etc.) </p>
<p> When <b>-use</b> is not used, the new toplevel created is specially decorated so the user is always aware that the user interface presented comes from a potentially unsafe code and can easily delete the corresponding interpreter. </p>
<p> On X11, conflicting <b>-use</b> and <b>-display</b> are likely to generate a fatal X error. </p>
<h2 id="M6">See also</h2> <b><a href="../tclcmd/safe.htm.html">safe</a></b>, <b><a href="../tclcmd/interp.htm.html">interp</a></b>, <b><a href="../tclcmd/library.htm.html">library</a></b>, <b><a href="../tclcmd/load.htm.html">load</a></b>, <b><a href="../tclcmd/package.htm.html">package</a></b>, <b><a href="../tclcmd/source.htm.html">source</a></b>, <b><a href="../tclcmd/unknown.htm.html">unknown</a></b>  <a href="#">safe interpreter</a>,  <div class="_attribution"><p class="_attribution-p">Copyright © 1995-1996 Sun Microsystems, Inc. </p></div><div class="_attribution">
  <p class="_attribution-p">
    Licensed under <a href="http://tcl.tk/software/tcltk/license.html">Tcl/Tk terms</a><br>
    <a href="https://www.tcl.tk/man/tcl/TkCmd/loadTk.htm" class="_attribution-link">https://www.tcl.tk/man/tcl/TkCmd/loadTk.htm</a>
  </p>
</div>
