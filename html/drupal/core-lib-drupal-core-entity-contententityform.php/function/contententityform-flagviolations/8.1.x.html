<h1 id="page-subtitle">protected function ContentEntityForm::flagViolations</h1>     <pre class="signature">protected <a href="../../class/contententityform/8.1.x.html">ContentEntityForm</a>::flagViolations(EntityConstraintViolationListInterface $violations, array $form, FormStateInterface $form_state)</pre> <p>Flags violations for the current form.</p> <p>If the entity form customly adds some fields to the form (i.e. without using the form display), it needs to add its fields to array returned by getEditedFieldNames() and overwrite this method in order to show any violations for those fields; e.g.:</p> <pre class="php" data-language="php">foreach ($violations-&gt;getByField('name') as $violation) {
  $form_state-&gt;setErrorByName('name', $violation-&gt;getMessage());
}
parent::flagViolations($violations, $form, $form_state);
</pre> <h3>Parameters</h3> <p> <strong><a href="../../../core-lib-drupal-core-entity-entityconstraintviolationlistinterface.php/interface/entityconstraintviolationlistinterface/8.1.x.html" title="Interface for the result of entity validation." class="local">\Drupal\Core\Entity\EntityConstraintViolationListInterface</a> $violations</strong>: The violations to flag.</p> <p><strong>array $form</strong>: A nested array of form elements comprising the form.</p> <p><strong><a href="../../../core-lib-drupal-core-form-formstateinterface.php/interface/formstateinterface/8.1.x.html" title="Provides an interface for an object containing the current state of a form." class="local">\Drupal\Core\Form\FormStateInterface</a> $form_state</strong>: The current state of the form.</p>  <h3>File</h3> 
<dl> <dt>core/lib/Drupal/Core/Entity/<a href="https://api.drupal.org/api/drupal/core%21lib%21Drupal%21Core%21Entity%21ContentEntityForm.php/8.1.x">ContentEntityForm.php</a>, line 150</dt>  </dl> <h3>Class</h3> 
<dl> <dt>
<a href="../../class/contententityform/8.1.x.html">ContentEntityForm</a> </dt> <dd>Entity form variant for content entity types.</dd> </dl> <h3>Namespace</h3> <a href="https://api.drupal.org/api/drupal/namespace/Drupal%21Core%21Entity/8.1.x">Drupal\Core\Entity</a> <h3>Code</h3> <pre class="php" data-language="php">protected function flagViolations(EntityConstraintViolationListInterface $violations, array $form, FormStateInterface $form_state) {
  // Flag entity level violations.
  foreach ($violations-&gt;getEntityViolations() as $violation) {
    /** @var \Symfony\Component\Validator\ConstraintViolationInterface $violation */
    $form_state-&gt;setErrorByName('', $violation-&gt;getMessage());
  }
  // Let the form display flag violations of its fields.
  $this-&gt;getFormDisplay($form_state)-&gt;flagWidgetsErrorsFromViolations($violations, $form, $form_state);
}
</pre><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2001&ndash;2016 by the original authors<br>Licensed under the GNU General Public License, version 2 and later.<br>Drupal is a registered trademark of Dries Buytaert.<br>
    <a href="https://api.drupal.org/api/drupal/core!lib!Drupal!Core!Entity!ContentEntityForm.php/function/ContentEntityForm::flagViolations/8.1.x" class="_attribution-link">https://api.drupal.org/api/drupal/core!lib!Drupal!Core!Entity!ContentEntityForm.php/function/ContentEntityForm::flagViolations/8.1.x</a>
  </p>
</div>
