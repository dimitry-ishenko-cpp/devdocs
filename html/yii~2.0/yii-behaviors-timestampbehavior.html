<h1>Class yii\behaviors\TimestampBehavior</h1> <div class="top-nav"> <a href="index.html">All Classes</a> | <a href="#properties">Properties</a> | <a href="#methods">Methods</a> </div> <table> <colgroup> <col class="col-name"> <col class="col-value"> </colgroup> <tr>
<th>Inheritance</th>
<td>
<a href="yii-behaviors-timestampbehavior.html">yii\behaviors\TimestampBehavior</a> » <a href="yii-behaviors-attributebehavior.html">yii\behaviors\AttributeBehavior</a> » <a href="yii-base-behavior.html">yii\base\Behavior</a> » <a href="yii-base-object.html">yii\base\Object</a>
</td>
</tr> <tr>
<th>Implements</th>
<td><a href="yii-base-configurable.html">yii\base\Configurable</a></td>
</tr> <tr>
<th>Available since version</th>
<td>2.0</td>
</tr> <tr> <th>Source Code</th> <td><a href="https://github.com/yiisoft/yii2/blob/master/framework/behaviors/TimestampBehavior.php">https://github.com/yiisoft/yii2/blob/master/framework/behaviors/TimestampBehavior.php</a></td> </tr> </table>  <p><strong>TimestampBehavior automatically fills the specified attributes with the current timestamp.</strong></p> <p>To use TimestampBehavior, insert the following code to your ActiveRecord class:</p> <pre data-language="php">use yii\behaviors\TimestampBehavior;

public function behaviors()
{
    return [
        TimestampBehavior::className(),
    ];
}
</pre> <p>By default, TimestampBehavior will fill the <code>created_at</code> and <code>updated_at</code> attributes with the current timestamp when the associated AR object is being inserted; it will fill the <code>updated_at</code> attribute with the timestamp when the AR object is being updated. The timestamp value is obtained by <code>time()</code>.</p> <p>Because attribute values will be set automatically by this behavior, they are usually not user input and should therefore not be validated, i.e. <code>created_at</code> and <code>updated_at</code> should not appear in the <a href="yii-base-model.html#rules()-detail">rules()</a> method of the model.</p> <p>For the above implementation to work with MySQL database, please declare the columns(<code>created_at</code>, <code>updated_at</code>) as int(11) for being UNIX timestamp.</p> <p>If your attribute names are different or you want to use a different way of calculating the timestamp, you may configure the <a href="yii-behaviors-timestampbehavior.html#%24createdAtAttribute-detail">$createdAtAttribute</a>, <a href="yii-behaviors-timestampbehavior.html#%24updatedAtAttribute-detail">$updatedAtAttribute</a> and <a href="yii-behaviors-timestampbehavior.html#%24value-detail">$value</a> properties like the following:</p> <pre data-language="php">use yii\db\Expression;

public function behaviors()
{
    return [
        [
            'class' =&gt; TimestampBehavior::className(),
            'createdAtAttribute' =&gt; 'create_time',
            'updatedAtAttribute' =&gt; 'update_time',
            'value' =&gt; new Expression('NOW()'),
        ],
    ];
}
</pre> <p>In case you use an <a href="yii-db-expression.html">yii\db\Expression</a> object as in the example above, the attribute will not hold the timestamp value, but the Expression object itself after the record has been saved. If you need the value from DB afterwards you should call the <a href="yii-db-baseactiverecord.html#refresh()-detail">refresh()</a> method of the record.</p> <p>TimestampBehavior also provides a method named <a href="yii-behaviors-timestampbehavior.html#touch()-detail">touch()</a> that allows you to assign the current timestamp to the specified attribute(s) and save them to the database. For example,</p> <pre data-language="php">$model-&gt;touch('creation_time');
</pre>    <h2 id="properties">Public Properties</h2>  <table> <colgroup> <col class="col-property"> <col class="col-type"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Property</th>
<th>Type</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="$attributes"> <td><a href="yii-behaviors-attributebehavior.html#%24attributes-detail">$attributes</a></td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>List of attributes that are to be automatically filled with the value specified via <a href="yii-behaviors-attributebehavior.html#%24value-detail">$value</a>.</td> <td><a href="yii-behaviors-attributebehavior.html">yii\behaviors\AttributeBehavior</a></td> </tr> <tr id="$createdAtAttribute"> <td><a href="yii-behaviors-timestampbehavior.html#%24createdAtAttribute-detail">$createdAtAttribute</a></td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>The attribute that will receive timestamp value Set this property to false if you do not want to record the creation time.</td> <td><a href="yii-behaviors-timestampbehavior.html">yii\behaviors\TimestampBehavior</a></td> </tr> <tr id="$owner"> <td><a href="yii-base-behavior.html#%24owner-detail">$owner</a></td> <td>
<a href="yii-base-component.html">yii\base\Component</a>|<a href="http://www.php.net/language.types.null">null</a>
</td> <td>The owner of this behavior</td> <td><a href="yii-base-behavior.html">yii\base\Behavior</a></td> </tr> <tr id="$preserveNonEmptyValues"> <td><a href="yii-behaviors-attributebehavior.html#%24preserveNonEmptyValues-detail">$preserveNonEmptyValues</a></td> <td><a href="http://www.php.net/language.types.boolean">boolean</a></td> <td>Whether to preserve non-empty attribute values.</td> <td><a href="yii-behaviors-attributebehavior.html">yii\behaviors\AttributeBehavior</a></td> </tr> <tr id="$skipUpdateOnClean"> <td><a href="yii-behaviors-attributebehavior.html#%24skipUpdateOnClean-detail">$skipUpdateOnClean</a></td> <td><a href="http://www.php.net/language.types.boolean">boolean</a></td> <td>Whether to skip this behavior when the <code>$owner</code> has not been modified</td> <td><a href="yii-behaviors-attributebehavior.html">yii\behaviors\AttributeBehavior</a></td> </tr> <tr id="$updatedAtAttribute"> <td><a href="yii-behaviors-timestampbehavior.html#%24updatedAtAttribute-detail">$updatedAtAttribute</a></td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>The attribute that will receive timestamp value.</td> <td><a href="yii-behaviors-timestampbehavior.html">yii\behaviors\TimestampBehavior</a></td> </tr> <tr id="$value"> <td><a href="yii-behaviors-timestampbehavior.html#%24value-detail">$value</a></td> <td>mixed</td> <td>The value that will be assigned to the current attributes.</td> <td><a href="yii-behaviors-timestampbehavior.html">yii\behaviors\TimestampBehavior</a></td> </tr> </table>    <h2 id="methods">Public Methods</h2>  <table> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="__call()"> <td><a href="yii-base-object.html#__call()-detail">__call()</a></td> <td>Calls the named method which is not a class method.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="__construct()"> <td><a href="yii-base-object.html#__construct()-detail">__construct()</a></td> <td>Constructor.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="__get()"> <td><a href="yii-base-object.html#__get()-detail">__get()</a></td> <td>Returns the value of an object property.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="__isset()"> <td><a href="yii-base-object.html#__isset()-detail">__isset()</a></td> <td>Checks if a property is set, i.e. defined and not null.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="__set()"> <td><a href="yii-base-object.html#__set()-detail">__set()</a></td> <td>Sets value of an object property.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="__unset()"> <td><a href="yii-base-object.html#__unset()-detail">__unset()</a></td> <td>Sets an object property to null.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="attach()"> <td><a href="yii-base-behavior.html#attach()-detail">attach()</a></td> <td>Attaches the behavior object to the component.</td> <td><a href="yii-base-behavior.html">yii\base\Behavior</a></td> </tr> <tr id="canGetProperty()"> <td><a href="yii-base-object.html#canGetProperty()-detail">canGetProperty()</a></td> <td>Returns a value indicating whether a property can be read.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="canSetProperty()"> <td><a href="yii-base-object.html#canSetProperty()-detail">canSetProperty()</a></td> <td>Returns a value indicating whether a property can be set.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="className()"> <td><a href="yii-base-object.html#className()-detail">className()</a></td> <td>Returns the fully qualified name of this class.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="detach()"> <td><a href="yii-base-behavior.html#detach()-detail">detach()</a></td> <td>Detaches the behavior object from the component.</td> <td><a href="yii-base-behavior.html">yii\base\Behavior</a></td> </tr> <tr id="evaluateAttributes()"> <td><a href="yii-behaviors-attributebehavior.html#evaluateAttributes()-detail">evaluateAttributes()</a></td> <td>Evaluates the attribute value and assigns it to the current attributes.</td> <td><a href="yii-behaviors-attributebehavior.html">yii\behaviors\AttributeBehavior</a></td> </tr> <tr id="events()"> <td><a href="yii-behaviors-attributebehavior.html#events()-detail">events()</a></td> <td>Declares event handlers for the <a href="yii-base-behavior.html#%24owner-detail">$owner</a>'s events.</td> <td><a href="yii-behaviors-attributebehavior.html">yii\behaviors\AttributeBehavior</a></td> </tr> <tr id="hasMethod()"> <td><a href="yii-base-object.html#hasMethod()-detail">hasMethod()</a></td> <td>Returns a value indicating whether a method is defined.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="hasProperty()"> <td><a href="yii-base-object.html#hasProperty()-detail">hasProperty()</a></td> <td>Returns a value indicating whether a property is defined.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="init()"> <td><a href="yii-behaviors-timestampbehavior.html#init()-detail">init()</a></td> <td>Initializes the object.</td> <td><a href="yii-behaviors-timestampbehavior.html">yii\behaviors\TimestampBehavior</a></td> </tr> <tr id="touch()"> <td><a href="yii-behaviors-timestampbehavior.html#touch()-detail">touch()</a></td> <td>Updates a timestamp attribute to the current timestamp.</td> <td><a href="yii-behaviors-timestampbehavior.html">yii\behaviors\TimestampBehavior</a></td> </tr> </table>   <h2>Protected Methods</h2>  <table> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="getValue()"> <td><a href="yii-behaviors-timestampbehavior.html#getValue()-detail">getValue()</a></td> <td>Returns the value for the current attributes.</td> <td><a href="yii-behaviors-timestampbehavior.html">yii\behaviors\TimestampBehavior</a></td> </tr> </table>    <h2 id="constants">Property Details</h2>  <h3 id="$createdAtAttribute-detail"> $createdAtAttribute <span class="detail-header-tag small"> public property </span> </h3>  <p>The attribute that will receive timestamp value Set this property to false if you do not want to record the creation time.</p>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="http://www.php.net/language.types.string">string</a></span> <a href="yii-behaviors-timestampbehavior.html#%24createdAtAttribute-detail">$createdAtAttribute</a> = 'created_at'</pre> <h3 id="$updatedAtAttribute-detail"> $updatedAtAttribute <span class="detail-header-tag small"> public property </span> </h3>  <p>The attribute that will receive timestamp value. Set this property to false if you do not want to record the update time.</p>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="http://www.php.net/language.types.string">string</a></span> <a href="yii-behaviors-timestampbehavior.html#%24updatedAtAttribute-detail">$updatedAtAttribute</a> = 'updated_at'</pre> <h3 id="$value-detail"> $value <span class="detail-header-tag small"> public property </span> </h3>  <p>The value that will be assigned to the current attributes. This can be an anonymous function, callable in array format (e.g. <code>[$this, 'methodName']</code>), an <a href="yii-db-expression.html">Expression</a> object representing a DB expression (e.g. <code>new Expression('NOW()')</code>), scalar, string or an arbitrary value. If the former, the return value of the function will be assigned to the attributes. The signature of the function should be as follows,</p> <pre data-language="php">function ($event)
{
    // return value will be assigned to the attribute
}
</pre> <p>In case, when the value is <code>null</code>, the result of the PHP function <a href="http://php.net/manual/en/function.time.php">time()</a> will be used as value.</p>  <pre><span class="signature-defs">public</span> <span class="signature-type">mixed</span> <a href="yii-behaviors-timestampbehavior.html#%24value-detail">$value</a> = null</pre>  <h2>Method Details</h2> <div class="method-doc"> <h3 id="getValue()-detail"> getValue() <span class="detail-header-tag small"> protected method </span> </h3>  <p><strong>Returns the value for the current attributes.</strong></p> <p>This method is called by <a href="yii-behaviors-attributebehavior.html#evaluateAttributes()-detail">evaluateAttributes()</a>. Its return value will be assigned to the attributes corresponding to the triggering event.</p> <p>In case, when the <a href="yii-behaviors-timestampbehavior.html#%24value-detail">$value</a> is <code>null</code>, the result of the PHP function <a href="http://php.net/manual/en/function.time.php">time()</a> will be used as value.</p>  <table> <tr><th colspan="3">protected mixed <strong><a href="yii-behaviors-timestampbehavior.html#getValue()-detail">getValue</a></strong> ( $event )</th></tr> <tr> <td>$event</td> <td><a href="yii-base-event.html">yii\base\Event</a></td> <td>
<p>The event that triggers the current attribute updating.</p> </td> </tr> <tr> <td>return</td> <td>mixed</td> <td>
<p>The attribute value</p> </td> </tr> </table>  <h3 id="init()-detail"> init() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Initializes the object.</strong></p> <p>This method is invoked at the end of the constructor after the object is initialized with the given configuration.</p>  <table> <tr><th colspan="3">public void <strong><a href="yii-behaviors-timestampbehavior.html#init()-detail">init</a></strong> ( )</th></tr> </table>  <h3 id="touch()-detail"> touch() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Updates a timestamp attribute to the current timestamp.</strong></p> <pre data-language="php">$model-&gt;touch('lastVisit');
</pre>  <table> <tr><th colspan="3">public void <strong><a href="yii-behaviors-timestampbehavior.html#touch()-detail">touch</a></strong> ( $attribute )</th></tr> <tr> <td>$attribute</td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>
<p>The name of the attribute to update.</p> </td> </tr> <tr> <td>throws</td> <td><a href="yii-base-invalidcallexception.html">yii\base\InvalidCallException</a></td> <td>
<p>if owner is a new record (since version 2.0.6).</p> </td> </tr> </table>  </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2008&ndash;2017 by Yii Software LLC<br>Licensed under the three clause BSD license.<br>
    <a href="http://www.yiiframework.com/doc-2.0/yii-behaviors-timestampbehavior.html" class="_attribution-link">http://www.yiiframework.com/doc-2.0/yii-behaviors-timestampbehavior.html</a>
  </p>
</div>
