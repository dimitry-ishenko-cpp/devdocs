<h1>Class yii\db\Query</h1> <div class="top-nav"> <a href="index.html">All Classes</a> | <a href="#properties">Properties</a> | <a href="#methods">Methods</a> </div> <table> <colgroup> <col class="col-name"> <col class="col-value"> </colgroup> <tr>
<th>Inheritance</th>
<td>
<a href="yii-db-query.html">yii\db\Query</a> » <a href="yii-base-component.html">yii\base\Component</a> » <a href="yii-base-object.html">yii\base\Object</a>
</td>
</tr> <tr>
<th>Implements</th>
<td>
<a href="yii-base-configurable.html">yii\base\Configurable</a>, <a href="yii-db-queryinterface.html">yii\db\QueryInterface</a>
</td>
</tr> <tr>
<th>Uses Traits</th>
<td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td>
</tr> <tr>
<th>Subclasses</th>
<td>
<a href="yii-db-activequery.html">yii\db\ActiveQuery</a>, <a href="yii-sphinx-activequery.html">yii\sphinx\ActiveQuery</a>, <a href="yii-sphinx-query.html">yii\sphinx\Query</a>
</td>
</tr> <tr>
<th>Available since version</th>
<td>2.0</td>
</tr> <tr> <th>Source Code</th> <td><a href="https://github.com/yiisoft/yii2/blob/master/framework/db/Query.php">https://github.com/yiisoft/yii2/blob/master/framework/db/Query.php</a></td> </tr> </table>  <p><strong>Query represents a SELECT SQL statement in a way that is independent of DBMS.</strong></p> <p>Query provides a set of methods to facilitate the specification of different clauses in a SELECT statement. These methods can be chained together.</p> <p>By calling <a href="yii-db-query.html#createCommand()-detail">createCommand()</a>, we can get a <a href="yii-db-command.html">yii\db\Command</a> instance which can be further used to perform/execute the DB query against a database.</p> <p>For example,</p> <pre data-language="php">$query = new Query;
// compose the query
$query-&gt;select('id, name')
    -&gt;from('user')
    -&gt;limit(10);
// build and execute the query
$rows = $query-&gt;all();
// alternatively, you can create DB command and execute it
$command = $query-&gt;createCommand();
// $command-&gt;sql returns the actual SQL
$rows = $command-&gt;queryAll();
</pre> <p>Query internally uses the <a href="yii-db-querybuilder.html">yii\db\QueryBuilder</a> class to generate the SQL statement.</p> <p>A more detailed usage guide on how to work with Query can be found in the <a href="guide-db-query-builder.html">guide article on Query Builder</a>.</p>    <h2 id="properties">Public Properties</h2>  <table> <colgroup> <col class="col-property"> <col class="col-type"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Property</th>
<th>Type</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="$behaviors"> <td><a href="yii-base-component.html#%24behaviors-detail">$behaviors</a></td> <td>
<a href="yii-base-behavior.html">yii\base\Behavior</a>[]</td> <td>List of behaviors attached to this component</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="$distinct"> <td><a href="yii-db-query.html#%24distinct-detail">$distinct</a></td> <td><a href="http://www.php.net/language.types.boolean">boolean</a></td> <td>Whether to select distinct rows of data only.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="$emulateExecution"> <td><a href="yii-db-querytrait.html#%24emulateExecution-detail">$emulateExecution</a></td> <td><a href="http://www.php.net/language.types.boolean">boolean</a></td> <td>Whether to emulate the actual query execution, returning empty or false results.</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="$from"> <td><a href="yii-db-query.html#%24from-detail">$from</a></td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>The table(s) to be selected from.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="$groupBy"> <td><a href="yii-db-query.html#%24groupBy-detail">$groupBy</a></td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>How to group the query results.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="$having"> <td><a href="yii-db-query.html#%24having-detail">$having</a></td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.array">array</a>|<a href="yii-db-expression.html">yii\db\Expression</a>
</td> <td>The condition to be applied in the GROUP BY clause.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="$indexBy"> <td><a href="yii-db-querytrait.html#%24indexBy-detail">$indexBy</a></td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.callable">callable</a>
</td> <td>The name of the column by which the query results should be indexed by.</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="$join"> <td><a href="yii-db-query.html#%24join-detail">$join</a></td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>How to join with other tables.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="$limit"> <td><a href="yii-db-querytrait.html#%24limit-detail">$limit</a></td> <td>
<a href="http://www.php.net/language.types.integer">integer</a>|<a href="yii-db-expression.html">yii\db\Expression</a>
</td> <td>Maximum number of records to be returned.</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="$offset"> <td><a href="yii-db-querytrait.html#%24offset-detail">$offset</a></td> <td>
<a href="http://www.php.net/language.types.integer">integer</a>|<a href="yii-db-expression.html">yii\db\Expression</a>
</td> <td>Zero-based offset from where the records are to be returned.</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="$orderBy"> <td><a href="yii-db-querytrait.html#%24orderBy-detail">$orderBy</a></td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>How to sort the query results.</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="$params"> <td><a href="yii-db-query.html#%24params-detail">$params</a></td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>List of query parameter values indexed by parameter placeholders.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="$select"> <td><a href="yii-db-query.html#%24select-detail">$select</a></td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>The columns being selected.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="$selectOption"> <td><a href="yii-db-query.html#%24selectOption-detail">$selectOption</a></td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>Additional option that should be appended to the 'SELECT' keyword.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="$union"> <td><a href="yii-db-query.html#%24union-detail">$union</a></td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>This is used to construct the UNION clause(s) in a SQL statement.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="$where"> <td><a href="yii-db-querytrait.html#%24where-detail">$where</a></td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.array">array</a>
</td> <td>Query condition.</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> </table>    <h2 id="methods">Public Methods</h2>  <table> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="__call()"> <td><a href="yii-base-component.html#__call()-detail">__call()</a></td> <td>Calls the named method which is not a class method.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="__clone()"> <td><a href="yii-base-component.html#__clone()-detail">__clone()</a></td> <td>This method is called after the object is created by cloning an existing one.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="__construct()"> <td><a href="yii-base-object.html#__construct()-detail">__construct()</a></td> <td>Constructor.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="__get()"> <td><a href="yii-base-component.html#__get()-detail">__get()</a></td> <td>Returns the value of a component property.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="__isset()"> <td><a href="yii-base-component.html#__isset()-detail">__isset()</a></td> <td>Checks if a property is set, i.e. defined and not null.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="__set()"> <td><a href="yii-base-component.html#__set()-detail">__set()</a></td> <td>Sets the value of a component property.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="__unset()"> <td><a href="yii-base-component.html#__unset()-detail">__unset()</a></td> <td>Sets a component property to be null.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="addGroupBy()"> <td><a href="yii-db-query.html#addGroupBy()-detail">addGroupBy()</a></td> <td>Adds additional group-by columns to the existing ones.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="addOrderBy()"> <td><a href="yii-db-querytrait.html#addOrderBy()-detail">addOrderBy()</a></td> <td>Adds additional ORDER BY columns to the query.</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="addParams()"> <td><a href="yii-db-query.html#addParams()-detail">addParams()</a></td> <td>Adds additional parameters to be bound to the query.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="addSelect()"> <td><a href="yii-db-query.html#addSelect()-detail">addSelect()</a></td> <td>Add more columns to the SELECT part of the query.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="all()"> <td><a href="yii-db-query.html#all()-detail">all()</a></td> <td>Executes the query and returns all results as an array.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="andFilterCompare()"> <td><a href="yii-db-query.html#andFilterCompare()-detail">andFilterCompare()</a></td> <td>Adds a filtering condition for a specific column and allow the user to choose a filter operator.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="andFilterHaving()"> <td><a href="yii-db-query.html#andFilterHaving()-detail">andFilterHaving()</a></td> <td>Adds an additional HAVING condition to the existing one but ignores <a href="yii-db-querytrait.html#isEmpty()-detail">empty operands</a>.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="andFilterWhere()"> <td><a href="yii-db-querytrait.html#andFilterWhere()-detail">andFilterWhere()</a></td> <td>Adds an additional WHERE condition to the existing one but ignores <a href="yii-db-querytrait.html#isEmpty()-detail">empty operands</a>.</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="andHaving()"> <td><a href="yii-db-query.html#andHaving()-detail">andHaving()</a></td> <td>Adds an additional HAVING condition to the existing one.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="andWhere()"> <td><a href="yii-db-query.html#andWhere()-detail">andWhere()</a></td> <td>Adds an additional WHERE condition to the existing one.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="attachBehavior()"> <td><a href="yii-base-component.html#attachBehavior()-detail">attachBehavior()</a></td> <td>Attaches a behavior to this component.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="attachBehaviors()"> <td><a href="yii-base-component.html#attachBehaviors()-detail">attachBehaviors()</a></td> <td>Attaches a list of behaviors to the component.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="average()"> <td><a href="yii-db-query.html#average()-detail">average()</a></td> <td>Returns the average of the specified column values.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="batch()"> <td><a href="yii-db-query.html#batch()-detail">batch()</a></td> <td>Starts a batch query.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="behaviors()"> <td><a href="yii-base-component.html#behaviors()-detail">behaviors()</a></td> <td>Returns a list of behaviors that this component should behave as.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="canGetProperty()"> <td><a href="yii-base-component.html#canGetProperty()-detail">canGetProperty()</a></td> <td>Returns a value indicating whether a property can be read.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="canSetProperty()"> <td><a href="yii-base-component.html#canSetProperty()-detail">canSetProperty()</a></td> <td>Returns a value indicating whether a property can be set.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="className()"> <td><a href="yii-base-object.html#className()-detail">className()</a></td> <td>Returns the fully qualified name of this class.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="column()"> <td><a href="yii-db-query.html#column()-detail">column()</a></td> <td>Executes the query and returns the first column of the result.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="count()"> <td><a href="yii-db-query.html#count()-detail">count()</a></td> <td>Returns the number of records.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="create()"> <td><a href="yii-db-query.html#create()-detail">create()</a></td> <td>Creates a new Query object and copies its property values from an existing one.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="createCommand()"> <td><a href="yii-db-query.html#createCommand()-detail">createCommand()</a></td> <td>Creates a DB command that can be used to execute this query.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="detachBehavior()"> <td><a href="yii-base-component.html#detachBehavior()-detail">detachBehavior()</a></td> <td>Detaches a behavior from the component.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="detachBehaviors()"> <td><a href="yii-base-component.html#detachBehaviors()-detail">detachBehaviors()</a></td> <td>Detaches all behaviors from the component.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="distinct()"> <td><a href="yii-db-query.html#distinct()-detail">distinct()</a></td> <td>Sets the value indicating whether to SELECT DISTINCT or not.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="each()"> <td><a href="yii-db-query.html#each()-detail">each()</a></td> <td>Starts a batch query and retrieves data row by row.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="emulateExecution()"> <td><a href="yii-db-querytrait.html#emulateExecution()-detail">emulateExecution()</a></td> <td>Sets whether to emulate query execution, preventing any interaction with data storage.</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="ensureBehaviors()"> <td><a href="yii-base-component.html#ensureBehaviors()-detail">ensureBehaviors()</a></td> <td>Makes sure that the behaviors declared in <a href="yii-base-component.html#behaviors()-detail">behaviors()</a> are attached to this component.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="exists()"> <td><a href="yii-db-query.html#exists()-detail">exists()</a></td> <td>Returns a value indicating whether the query result contains any row of data.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="filterHaving()"> <td><a href="yii-db-query.html#filterHaving()-detail">filterHaving()</a></td> <td>Sets the HAVING part of the query but ignores <a href="yii-db-querytrait.html#isEmpty()-detail">empty operands</a>.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="filterWhere()"> <td><a href="yii-db-querytrait.html#filterWhere()-detail">filterWhere()</a></td> <td>Sets the WHERE part of the query but ignores <a href="yii-db-querytrait.html#isEmpty()-detail">empty operands</a>.</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="from()"> <td><a href="yii-db-query.html#from()-detail">from()</a></td> <td>Sets the FROM part of the query.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="getBehavior()"> <td><a href="yii-base-component.html#getBehavior()-detail">getBehavior()</a></td> <td>Returns the named behavior object.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="getBehaviors()"> <td><a href="yii-base-component.html#getBehaviors()-detail">getBehaviors()</a></td> <td>Returns all behaviors attached to this component.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="groupBy()"> <td><a href="yii-db-query.html#groupBy()-detail">groupBy()</a></td> <td>Sets the GROUP BY part of the query.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="hasEventHandlers()"> <td><a href="yii-base-component.html#hasEventHandlers()-detail">hasEventHandlers()</a></td> <td>Returns a value indicating whether there is any handler attached to the named event.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="hasMethod()"> <td><a href="yii-base-component.html#hasMethod()-detail">hasMethod()</a></td> <td>Returns a value indicating whether a method is defined.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="hasProperty()"> <td><a href="yii-base-component.html#hasProperty()-detail">hasProperty()</a></td> <td>Returns a value indicating whether a property is defined for this component.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="having()"> <td><a href="yii-db-query.html#having()-detail">having()</a></td> <td>Sets the HAVING part of the query.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="indexBy()"> <td><a href="yii-db-querytrait.html#indexBy()-detail">indexBy()</a></td> <td>Sets the <a href="yii-db-querytrait.html#indexBy()-detail">indexBy()</a> property.</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="init()"> <td><a href="yii-base-object.html#init()-detail">init()</a></td> <td>Initializes the object.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="innerJoin()"> <td><a href="yii-db-query.html#innerJoin()-detail">innerJoin()</a></td> <td>Appends an INNER JOIN part to the query.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="join()"> <td><a href="yii-db-query.html#join()-detail">join()</a></td> <td>Appends a JOIN part to the query.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="leftJoin()"> <td><a href="yii-db-query.html#leftJoin()-detail">leftJoin()</a></td> <td>Appends a LEFT OUTER JOIN part to the query.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="limit()"> <td><a href="yii-db-querytrait.html#limit()-detail">limit()</a></td> <td>Sets the LIMIT part of the query.</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="max()"> <td><a href="yii-db-query.html#max()-detail">max()</a></td> <td>Returns the maximum of the specified column values.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="min()"> <td><a href="yii-db-query.html#min()-detail">min()</a></td> <td>Returns the minimum of the specified column values.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="off()"> <td><a href="yii-base-component.html#off()-detail">off()</a></td> <td>Detaches an existing event handler from this component.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="offset()"> <td><a href="yii-db-querytrait.html#offset()-detail">offset()</a></td> <td>Sets the OFFSET part of the query.</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="on()"> <td><a href="yii-base-component.html#on()-detail">on()</a></td> <td>Attaches an event handler to an event.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="one()"> <td><a href="yii-db-query.html#one()-detail">one()</a></td> <td>Executes the query and returns a single row of result.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="orFilterHaving()"> <td><a href="yii-db-query.html#orFilterHaving()-detail">orFilterHaving()</a></td> <td>Adds an additional HAVING condition to the existing one but ignores <a href="yii-db-querytrait.html#isEmpty()-detail">empty operands</a>.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="orFilterWhere()"> <td><a href="yii-db-querytrait.html#orFilterWhere()-detail">orFilterWhere()</a></td> <td>Adds an additional WHERE condition to the existing one but ignores <a href="yii-db-querytrait.html#isEmpty()-detail">empty operands</a>.</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="orHaving()"> <td><a href="yii-db-query.html#orHaving()-detail">orHaving()</a></td> <td>Adds an additional HAVING condition to the existing one.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="orWhere()"> <td><a href="yii-db-query.html#orWhere()-detail">orWhere()</a></td> <td>Adds an additional WHERE condition to the existing one.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="orderBy()"> <td><a href="yii-db-querytrait.html#orderBy()-detail">orderBy()</a></td> <td>Sets the ORDER BY part of the query.</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="params()"> <td><a href="yii-db-query.html#params()-detail">params()</a></td> <td>Sets the parameters to be bound to the query.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="populate()"> <td><a href="yii-db-query.html#populate()-detail">populate()</a></td> <td>Converts the raw query results into the format as specified by this query.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="prepare()"> <td><a href="yii-db-query.html#prepare()-detail">prepare()</a></td> <td>Prepares for building SQL.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="rightJoin()"> <td><a href="yii-db-query.html#rightJoin()-detail">rightJoin()</a></td> <td>Appends a RIGHT OUTER JOIN part to the query.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="scalar()"> <td><a href="yii-db-query.html#scalar()-detail">scalar()</a></td> <td>Returns the query result as a scalar value.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="select()"> <td><a href="yii-db-query.html#select()-detail">select()</a></td> <td>Sets the SELECT part of the query.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="sum()"> <td><a href="yii-db-query.html#sum()-detail">sum()</a></td> <td>Returns the sum of the specified column values.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="trigger()"> <td><a href="yii-base-component.html#trigger()-detail">trigger()</a></td> <td>Triggers an event.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="union()"> <td><a href="yii-db-query.html#union()-detail">union()</a></td> <td>Appends a SQL statement using UNION operator.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="where()"> <td><a href="yii-db-query.html#where()-detail">where()</a></td> <td>Sets the WHERE part of the query.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> </table>   <h2>Protected Methods</h2>  <table> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="filterCondition()"> <td><a href="yii-db-querytrait.html#filterCondition()-detail">filterCondition()</a></td> <td>Removes <a href="yii-db-querytrait.html#isEmpty()-detail">empty operands</a> from the given query condition.</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="isEmpty()"> <td><a href="yii-db-querytrait.html#isEmpty()-detail">isEmpty()</a></td> <td>Returns a value indicating whether the give value is "empty".</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="normalizeOrderBy()"> <td><a href="yii-db-querytrait.html#normalizeOrderBy()-detail">normalizeOrderBy()</a></td> <td>Normalizes format of ORDER BY data</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="queryScalar()"> <td><a href="yii-db-query.html#queryScalar()-detail">queryScalar()</a></td> <td>Queries a scalar value by setting <a href="yii-db-query.html#select()-detail">select()</a> first.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> </table>    <h2 id="constants">Property Details</h2>  <h3 id="$distinct-detail"> $distinct <span class="detail-header-tag small"> public property </span> </h3>  <p>Whether to select distinct rows of data only. If this is set true, the SELECT clause would be changed to SELECT DISTINCT.</p>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="http://www.php.net/language.types.boolean">boolean</a></span> <a href="yii-db-query.html#%24distinct-detail">$distinct</a> = null</pre> <h3 id="$from-detail"> $from <span class="detail-header-tag small"> public property </span> </h3>  <p>The table(s) to be selected from. For example, <code>['user', 'post']</code>. This is used to construct the FROM clause in a SQL statement.</p> <p>See also <a href="yii-db-query.html#from()-detail">from()</a>.</p>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="http://www.php.net/language.types.array">array</a></span> <a href="yii-db-query.html#%24from-detail">$from</a> = null</pre> <h3 id="$groupBy-detail"> $groupBy <span class="detail-header-tag small"> public property </span> </h3>  <p>How to group the query results. For example, <code>['company', 'department']</code>. This is used to construct the GROUP BY clause in a SQL statement.</p>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="http://www.php.net/language.types.array">array</a></span> <a href="yii-db-query.html#%24groupBy-detail">$groupBy</a> = null</pre> <h3 id="$having-detail"> $having <span class="detail-header-tag small"> public property </span> </h3>  <p>The condition to be applied in the GROUP BY clause. It can be either a string or an array. Please refer to <a href="yii-db-query.html#where()-detail">where()</a> on how to specify the condition.</p>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.array">array</a>|<a href="yii-db-expression.html">yii\db\Expression</a></span> <a href="yii-db-query.html#%24having-detail">$having</a> = null</pre> <h3 id="$join-detail"> $join <span class="detail-header-tag small"> public property </span> </h3>  <p>How to join with other tables. Each array element represents the specification of one join which has the following structure:</p> <pre data-language="php">[$joinType, $tableName, $joinCondition]
</pre> <p>For example,</p> <pre data-language="php">[
    ['INNER JOIN', 'user', 'user.id = author_id'],
    ['LEFT JOIN', 'team', 'team.id = team_id'],
]
</pre>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="http://www.php.net/language.types.array">array</a></span> <a href="yii-db-query.html#%24join-detail">$join</a> = null</pre> <h3 id="$params-detail"> $params <span class="detail-header-tag small"> public property </span> </h3>  <p>List of query parameter values indexed by parameter placeholders. For example, <code>[':name' =&gt; 'Dan', ':age' =&gt; 31]</code>.</p>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="http://www.php.net/language.types.array">array</a></span> <a href="yii-db-query.html#%24params-detail">$params</a> = []</pre> <h3 id="$select-detail"> $select <span class="detail-header-tag small"> public property </span> </h3>  <p>The columns being selected. For example, <code>['id', 'name']</code>. This is used to construct the SELECT clause in a SQL statement. If not set, it means selecting all columns.</p> <p>See also <a href="yii-db-query.html#select()-detail">select()</a>.</p>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="http://www.php.net/language.types.array">array</a></span> <a href="yii-db-query.html#%24select-detail">$select</a> = null</pre> <h3 id="$selectOption-detail"> $selectOption <span class="detail-header-tag small"> public property </span> </h3>  <p>Additional option that should be appended to the 'SELECT' keyword. For example, in MySQL, the option 'SQL_CALC_FOUND_ROWS' can be used.</p>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="http://www.php.net/language.types.string">string</a></span> <a href="yii-db-query.html#%24selectOption-detail">$selectOption</a> = null</pre> <h3 id="$union-detail"> $union <span class="detail-header-tag small"> public property </span> </h3>  <p>This is used to construct the UNION clause(s) in a SQL statement. Each array element is an array of the following structure:</p> <ul> <li>
<code>query</code>: either a string or a <a href="yii-db-query.html">yii\db\Query</a> object representing a query</li> <li>
<code>all</code>: boolean, whether it should be <code>UNION ALL</code> or <code>UNION</code>
</li> </ul>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="http://www.php.net/language.types.array">array</a></span> <a href="yii-db-query.html#%24union-detail">$union</a> = null</pre>  <h2>Method Details</h2> <div class="method-doc"> <h3 id="addGroupBy()-detail"> addGroupBy() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Adds additional group-by columns to the existing ones.</strong></p> <p>See also <a href="yii-db-query.html#groupBy()-detail">groupBy()</a>.</p>  <table> <tr><th colspan="3">public <a href="yii-db-query.html">$this</a> <strong><a href="yii-db-query.html#addGroupBy()-detail">addGroupBy</a></strong> ( $columns )</th></tr> <tr> <td>$columns</td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.array">array</a>
</td> <td>
<p>Additional columns to be grouped by. Columns can be specified in either a string (e.g. "id, name") or an array (e.g. ['id', 'name']). The method will automatically quote the column names unless a column contains some parenthesis (which means the column contains a DB expression).</p> <p>Note that if your group-by is an expression containing commas, you should always use an array to represent the group-by information. Otherwise, the method will not be able to correctly determine the group-by columns.</p> <p>Since version 2.0.7, an <a href="yii-db-expression.html">yii\db\Expression</a> object can be passed to specify the GROUP BY part explicitly in plain SQL.</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-db-query.html">$this</a></td> <td>
<p>The query object itself</p> </td> </tr> </table>  <h3 id="addParams()-detail"> addParams() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Adds additional parameters to be bound to the query.</strong></p> <p>See also <a href="yii-db-query.html#params()-detail">params()</a>.</p>  <table> <tr><th colspan="3">public <a href="yii-db-query.html">$this</a> <strong><a href="yii-db-query.html#addParams()-detail">addParams</a></strong> ( $params )</th></tr> <tr> <td>$params</td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>
<p>List of query parameter values indexed by parameter placeholders. For example, <code>[':name' =&gt; 'Dan', ':age' =&gt; 31]</code>.</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-db-query.html">$this</a></td> <td>
<p>The query object itself</p> </td> </tr> </table>  <h3 id="addSelect()-detail"> addSelect() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Add more columns to the SELECT part of the query.</strong></p> <p>Note, that if <a href="yii-db-query.html#select()-detail">select()</a> has not been specified before, you should include <code>*</code> explicitly if you want to select all remaining columns too:</p> <pre data-language="php">$query-&gt;addSelect(["*", "CONCAT(first_name, ' ', last_name) AS full_name"])-&gt;one();
</pre> <p>See also <a href="yii-db-query.html#select()-detail">select()</a>.</p>  <table> <tr><th colspan="3">public <a href="yii-db-query.html">$this</a> <strong><a href="yii-db-query.html#addSelect()-detail">addSelect</a></strong> ( $columns )</th></tr> <tr> <td>$columns</td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.array">array</a>|<a href="yii-db-expression.html">yii\db\Expression</a>
</td> <td>
<p>The columns to add to the select. See <a href="yii-db-query.html#select()-detail">select()</a> for more details about the format of this parameter.</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-db-query.html">$this</a></td> <td>
<p>The query object itself</p> </td> </tr> </table>  <h3 id="all()-detail"> all() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Executes the query and returns all results as an array.</strong></p>  <table> <tr><th colspan="3">public <a href="http://www.php.net/language.types.array">array</a> <strong><a href="yii-db-query.html#all()-detail">all</a></strong> ( $db = null )</th></tr> <tr> <td>$db</td> <td><a href="yii-db-connection.html">yii\db\Connection</a></td> <td>
<p>The database connection used to generate the SQL statement. If this parameter is not given, the <code>db</code> application component will be used.</p> </td> </tr> <tr> <td>return</td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>
<p>The query results. If the query results in nothing, an empty array will be returned.</p> </td> </tr> </table>  <h3 id="andFilterCompare()-detail"> andFilterCompare() <span class="detail-header-tag small"> public method (available since version 2.0.8) </span> </h3>  <p><strong>Adds a filtering condition for a specific column and allow the user to choose a filter operator.</strong></p> <p>It adds an additional WHERE condition for the given field and determines the comparison operator based on the first few characters of the given value. The condition is added in the same way as in <a href="yii-db-querytrait.html#andFilterWhere()-detail">andFilterWhere()</a> so <a href="yii-db-querytrait.html#isEmpty()-detail">empty values</a> are ignored. The new condition and the existing one will be joined using the <code>AND</code> operator.</p> <p>The comparison operator is intelligently determined based on the first few characters in the given value. In particular, it recognizes the following operators if they appear as the leading characters in the given value:</p> <ul> <li>
<code>&lt;</code>: the column must be less than the given value.</li> <li>
<code>&gt;</code>: the column must be greater than the given value.</li> <li>
<code>&lt;=</code>: the column must be less than or equal to the given value.</li> <li>
<code>&gt;=</code>: the column must be greater than or equal to the given value.</li> <li>
<code>&lt;&gt;</code>: the column must not be the same as the given value.</li> <li>
<code>=</code>: the column must be equal to the given value.</li> <li>If none of the above operators is detected, the <code>$defaultOperator</code> will be used.</li> </ul>  <table> <tr><th colspan="3">public <a href="yii-db-query.html">$this</a> <strong><a href="yii-db-query.html#andFilterCompare()-detail">andFilterCompare</a></strong> ( $name, $value, $defaultOperator = '=' )</th></tr> <tr> <td>$name</td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>
<p>The column name.</p> </td> </tr> <tr> <td>$value</td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>
<p>The column value optionally prepended with the comparison operator.</p> </td> </tr> <tr> <td>$defaultOperator</td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>
<p>The operator to use, when no operator is given in <code>$value</code>. Defaults to <code>=</code>, performing an exact match.</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-db-query.html">$this</a></td> <td>
<p>The query object itself</p> </td> </tr> </table>  <h3 id="andFilterHaving()-detail"> andFilterHaving() <span class="detail-header-tag small"> public method (available since version 2.0.11) </span> </h3>  <p><strong>Adds an additional HAVING condition to the existing one but ignores <a href="yii-db-querytrait.html#isEmpty()-detail">empty operands</a>.</strong></p> <p>The new condition and the existing one will be joined using the <code>AND</code> operator.</p> <p>This method is similar to <a href="yii-db-query.html#andHaving()-detail">andHaving()</a>. The main difference is that this method will remove <a href="yii-db-querytrait.html#isEmpty()-detail">empty query operands</a>. As a result, this method is best suited for building query conditions based on filter values entered by users.</p> <p>See also:</p>
<ul>
<li><a href="yii-db-query.html#filterHaving()-detail">filterHaving()</a></li>
<li><a href="yii-db-query.html#orFilterHaving()-detail">orFilterHaving()</a></li>
</ul>  <table> <tr><th colspan="3">public <a href="yii-db-query.html">$this</a> <strong><a href="yii-db-query.html#andFilterHaving()-detail">andFilterHaving</a></strong> ( <a href="http://www.php.net/language.types.array">array</a> $condition )</th></tr> <tr> <td>$condition</td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>
<p>The new HAVING condition. Please refer to <a href="yii-db-query.html#having()-detail">having()</a> on how to specify this parameter.</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-db-query.html">$this</a></td> <td>
<p>The query object itself</p> </td> </tr> </table>  <h3 id="andHaving()-detail"> andHaving() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Adds an additional HAVING condition to the existing one.</strong></p> <p>The new condition and the existing one will be joined using the <code>AND</code> operator.</p> <p>See also:</p>
<ul>
<li><a href="yii-db-query.html#having()-detail">having()</a></li>
<li><a href="yii-db-query.html#orHaving()-detail">orHaving()</a></li>
</ul>  <table> <tr><th colspan="3">public <a href="yii-db-query.html">$this</a> <strong><a href="yii-db-query.html#andHaving()-detail">andHaving</a></strong> ( $condition, $params = [] )</th></tr> <tr> <td>$condition</td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.array">array</a>|<a href="yii-db-expression.html">yii\db\Expression</a>
</td> <td>
<p>The new HAVING condition. Please refer to <a href="yii-db-query.html#where()-detail">where()</a> on how to specify this parameter.</p> </td> </tr> <tr> <td>$params</td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>
<p>The parameters (name =&gt; value) to be bound to the query.</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-db-query.html">$this</a></td> <td>
<p>The query object itself</p> </td> </tr> </table>  <h3 id="andWhere()-detail"> andWhere() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Adds an additional WHERE condition to the existing one.</strong></p> <p>The new condition and the existing one will be joined using the <code>AND</code> operator.</p> <p>See also:</p>
<ul>
<li><a href="yii-db-query.html#where()-detail">where()</a></li>
<li><a href="yii-db-query.html#orWhere()-detail">orWhere()</a></li>
</ul>  <table> <tr><th colspan="3">public <a href="yii-db-query.html">$this</a> <strong><a href="yii-db-query.html#andWhere()-detail">andWhere</a></strong> ( $condition, $params = [] )</th></tr> <tr> <td>$condition</td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.array">array</a>|<a href="yii-db-expression.html">yii\db\Expression</a>
</td> <td>
<p>The new WHERE condition. Please refer to <a href="yii-db-query.html#where()-detail">where()</a> on how to specify this parameter.</p> </td> </tr> <tr> <td>$params</td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>
<p>The parameters (name =&gt; value) to be bound to the query.</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-db-query.html">$this</a></td> <td>
<p>The query object itself</p> </td> </tr> </table>  <h3 id="average()-detail"> average() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Returns the average of the specified column values.</strong></p>  <table> <tr><th colspan="3">public mixed <strong><a href="yii-db-query.html#average()-detail">average</a></strong> ( $q, $db = null )</th></tr> <tr> <td>$q</td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>
<p>The column name or expression. Make sure you properly <a href="guide-db-dao.html#quoting-table-and-column-names">quote</a> column names in the expression.</p> </td> </tr> <tr> <td>$db</td> <td><a href="yii-db-connection.html">yii\db\Connection</a></td> <td>
<p>The database connection used to generate the SQL statement. If this parameter is not given, the <code>db</code> application component will be used.</p> </td> </tr> <tr> <td>return</td> <td>mixed</td> <td>
<p>The average of the specified column values.</p> </td> </tr> </table>  <h3 id="batch()-detail"> batch() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Starts a batch query.</strong></p> <p>A batch query supports fetching data in batches, which can keep the memory usage under a limit. This method will return a <a href="yii-db-batchqueryresult.html">yii\db\BatchQueryResult</a> object which implements the <a href="http://www.php.net/class.iterator">Iterator</a> interface and can be traversed to retrieve the data in batches.</p> <p>For example,</p> <pre data-language="php">$query = (new Query)-&gt;from('user');
foreach ($query-&gt;batch() as $rows) {
    // $rows is an array of 100 or fewer rows from user table
}
</pre>  <table> <tr><th colspan="3">public <a href="yii-db-batchqueryresult.html">yii\db\BatchQueryResult</a> <strong><a href="yii-db-query.html#batch()-detail">batch</a></strong> ( $batchSize = 100, $db = null )</th></tr> <tr> <td>$batchSize</td> <td><a href="http://www.php.net/language.types.integer">integer</a></td> <td>
<p>The number of records to be fetched in each batch.</p> </td> </tr> <tr> <td>$db</td> <td><a href="yii-db-connection.html">yii\db\Connection</a></td> <td>
<p>The database connection. If not set, the "db" application component will be used.</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-db-batchqueryresult.html">yii\db\BatchQueryResult</a></td> <td>
<p>The batch query result. It implements the <a href="http://www.php.net/class.iterator">Iterator</a> interface and can be traversed to retrieve the data in batches.</p> </td> </tr> </table>  <h3 id="column()-detail"> column() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Executes the query and returns the first column of the result.</strong></p>  <table> <tr><th colspan="3">public <a href="http://www.php.net/language.types.array">array</a> <strong><a href="yii-db-query.html#column()-detail">column</a></strong> ( $db = null )</th></tr> <tr> <td>$db</td> <td><a href="yii-db-connection.html">yii\db\Connection</a></td> <td>
<p>The database connection used to generate the SQL statement. If this parameter is not given, the <code>db</code> application component will be used.</p> </td> </tr> <tr> <td>return</td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>
<p>The first column of the query result. An empty array is returned if the query results in nothing.</p> </td> </tr> </table>  <h3 id="count()-detail"> count() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Returns the number of records.</strong></p>  <table> <tr><th colspan="3">public <a href="http://www.php.net/language.types.integer">integer</a>|<a href="http://www.php.net/language.types.string">string</a> <strong><a href="yii-db-query.html#count()-detail">count</a></strong> ( $q = '*', $db = null )</th></tr> <tr> <td>$q</td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>
<p>The COUNT expression. Defaults to '*'. Make sure you properly <a href="guide-db-dao.html#quoting-table-and-column-names">quote</a> column names in the expression.</p> </td> </tr> <tr> <td>$db</td> <td><a href="yii-db-connection.html">yii\db\Connection</a></td> <td>
<p>The database connection used to generate the SQL statement. If this parameter is not given (or null), the <code>db</code> application component will be used.</p> </td> </tr> <tr> <td>return</td> <td>
<a href="http://www.php.net/language.types.integer">integer</a>|<a href="http://www.php.net/language.types.string">string</a>
</td> <td>
<p>Number of records. The result may be a string depending on the underlying database engine and to support integer values higher than a 32bit PHP integer can handle.</p> </td> </tr> </table>  <h3 id="create()-detail"> create() <span class="detail-header-tag small"> public static method </span> </h3>  <p><strong>Creates a new Query object and copies its property values from an existing one.</strong></p> <p>The properties being copies are the ones to be used by query builders.</p>  <table> <tr><th colspan="3">public static <a href="yii-db-query.html">yii\db\Query</a> <strong><a href="yii-db-query.html#create()-detail">create</a></strong> ( $from )</th></tr> <tr> <td>$from</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> <td>
<p>The source query object</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> <td>
<p>The new Query object</p> </td> </tr> </table>  <h3 id="createCommand()-detail"> createCommand() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Creates a DB command that can be used to execute this query.</strong></p>  <table> <tr><th colspan="3">public <a href="yii-db-command.html">yii\db\Command</a> <strong><a href="yii-db-query.html#createCommand()-detail">createCommand</a></strong> ( $db = null )</th></tr> <tr> <td>$db</td> <td><a href="yii-db-connection.html">yii\db\Connection</a></td> <td>
<p>The database connection used to generate the SQL statement. If this parameter is not given, the <code>db</code> application component will be used.</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-db-command.html">yii\db\Command</a></td> <td>
<p>The created DB command instance.</p> </td> </tr> </table>  <h3 id="distinct()-detail"> distinct() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Sets the value indicating whether to SELECT DISTINCT or not.</strong></p>  <table> <tr><th colspan="3">public <a href="yii-db-query.html">$this</a> <strong><a href="yii-db-query.html#distinct()-detail">distinct</a></strong> ( $value = true )</th></tr> <tr> <td>$value</td> <td><a href="http://www.php.net/language.types.boolean">boolean</a></td> <td>
<p>Whether to SELECT DISTINCT or not.</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-db-query.html">$this</a></td> <td>
<p>The query object itself</p> </td> </tr> </table>  <h3 id="each()-detail"> each() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Starts a batch query and retrieves data row by row.</strong></p> <p>This method is similar to <a href="yii-db-query.html#batch()-detail">batch()</a> except that in each iteration of the result, only one row of data is returned. For example,</p> <pre data-language="php">$query = (new Query)-&gt;from('user');
foreach ($query-&gt;each() as $row) {
}
</pre>  <table> <tr><th colspan="3">public <a href="yii-db-batchqueryresult.html">yii\db\BatchQueryResult</a> <strong><a href="yii-db-query.html#each()-detail">each</a></strong> ( $batchSize = 100, $db = null )</th></tr> <tr> <td>$batchSize</td> <td><a href="http://www.php.net/language.types.integer">integer</a></td> <td>
<p>The number of records to be fetched in each batch.</p> </td> </tr> <tr> <td>$db</td> <td><a href="yii-db-connection.html">yii\db\Connection</a></td> <td>
<p>The database connection. If not set, the "db" application component will be used.</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-db-batchqueryresult.html">yii\db\BatchQueryResult</a></td> <td>
<p>The batch query result. It implements the <a href="http://www.php.net/class.iterator">Iterator</a> interface and can be traversed to retrieve the data in batches.</p> </td> </tr> </table>  <h3 id="exists()-detail"> exists() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Returns a value indicating whether the query result contains any row of data.</strong></p>  <table> <tr><th colspan="3">public <a href="http://www.php.net/language.types.boolean">boolean</a> <strong><a href="yii-db-query.html#exists()-detail">exists</a></strong> ( $db = null )</th></tr> <tr> <td>$db</td> <td><a href="yii-db-connection.html">yii\db\Connection</a></td> <td>
<p>The database connection used to generate the SQL statement. If this parameter is not given, the <code>db</code> application component will be used.</p> </td> </tr> <tr> <td>return</td> <td><a href="http://www.php.net/language.types.boolean">boolean</a></td> <td>
<p>Whether the query result contains any row of data.</p> </td> </tr> </table>  <h3 id="filterHaving()-detail"> filterHaving() <span class="detail-header-tag small"> public method (available since version 2.0.11) </span> </h3>  <p><strong>Sets the HAVING part of the query but ignores <a href="yii-db-querytrait.html#isEmpty()-detail">empty operands</a>.</strong></p> <p>This method is similar to <a href="yii-db-query.html#having()-detail">having()</a>. The main difference is that this method will remove <a href="yii-db-querytrait.html#isEmpty()-detail">empty query operands</a>. As a result, this method is best suited for building query conditions based on filter values entered by users.</p> <p>The following code shows the difference between this method and <a href="yii-db-query.html#having()-detail">having()</a>:</p> <pre data-language="php">// HAVING `age`=:age
$query-&gt;filterHaving(['name' =&gt; null, 'age' =&gt; 20]);
// HAVING `age`=:age
$query-&gt;having(['age' =&gt; 20]);
// HAVING `name` IS NULL AND `age`=:age
$query-&gt;having(['name' =&gt; null, 'age' =&gt; 20]);
</pre> <p>Note that unlike <a href="yii-db-query.html#having()-detail">having()</a>, you cannot pass binding parameters to this method.</p> <p>See also:</p>
<ul>
<li><a href="yii-db-query.html#having()-detail">having()</a></li>
<li><a href="yii-db-query.html#andFilterHaving()-detail">andFilterHaving()</a></li>
<li><a href="yii-db-query.html#orFilterHaving()-detail">orFilterHaving()</a></li>
</ul>  <table> <tr><th colspan="3">public <a href="yii-db-query.html">$this</a> <strong><a href="yii-db-query.html#filterHaving()-detail">filterHaving</a></strong> ( <a href="http://www.php.net/language.types.array">array</a> $condition )</th></tr> <tr> <td>$condition</td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>
<p>The conditions that should be put in the HAVING part. See <a href="yii-db-query.html#having()-detail">having()</a> on how to specify this parameter.</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-db-query.html">$this</a></td> <td>
<p>The query object itself</p> </td> </tr> </table>  <h3 id="from()-detail"> from() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Sets the FROM part of the query.</strong></p>  <table> <tr><th colspan="3">public <a href="yii-db-query.html">$this</a> <strong><a href="yii-db-query.html#from()-detail">from</a></strong> ( $tables )</th></tr> <tr> <td>$tables</td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.array">array</a>
</td> <td>
<p>The table(s) to be selected from. This can be either a string (e.g. <code>'user'</code>) or an array (e.g. <code>['user', 'profile']</code>) specifying one or several table names. Table names can contain schema prefixes (e.g. <code>'public.user'</code>) and/or table aliases (e.g. <code>'user u'</code>). The method will automatically quote the table names unless it contains some parenthesis (which means the table is given as a sub-query or DB expression).</p> <p>When the tables are specified as an array, you may also use the array keys as the table aliases (if a table does not need alias, do not use a string key).</p> <p>Use a Query object to represent a sub-query. In this case, the corresponding array key will be used as the alias for the sub-query.</p> <p>Here are some examples:</p> <pre data-language="php">// SELECT * FROM  `user` `u`, `profile`;
$query = (new \yii\db\Query)-&gt;from(['u' =&gt; 'user', 'profile']);

// SELECT * FROM (SELECT * FROM `user` WHERE `active` = 1) `activeusers`;
$subquery = (new \yii\db\Query)-&gt;from('user')-&gt;where(['active' =&gt; true])
$query = (new \yii\db\Query)-&gt;from(['activeusers' =&gt; $subquery]);

// subquery can also be a string with plain SQL wrapped in parenthesis
// SELECT * FROM (SELECT * FROM `user` WHERE `active` = 1) `activeusers`;
$subquery = "(SELECT * FROM `user` WHERE `active` = 1)";
$query = (new \yii\db\Query)-&gt;from(['activeusers' =&gt; $subquery]);
</pre> </td> </tr> <tr> <td>return</td> <td><a href="yii-db-query.html">$this</a></td> <td>
<p>The query object itself</p> </td> </tr> </table>  <h3 id="groupBy()-detail"> groupBy() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Sets the GROUP BY part of the query.</strong></p> <p>See also <a href="yii-db-query.html#addGroupBy()-detail">addGroupBy()</a>.</p>  <table> <tr><th colspan="3">public <a href="yii-db-query.html">$this</a> <strong><a href="yii-db-query.html#groupBy()-detail">groupBy</a></strong> ( $columns )</th></tr> <tr> <td>$columns</td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.array">array</a>|<a href="yii-db-expression.html">yii\db\Expression</a>
</td> <td>
<p>The columns to be grouped by. Columns can be specified in either a string (e.g. "id, name") or an array (e.g. ['id', 'name']). The method will automatically quote the column names unless a column contains some parenthesis (which means the column contains a DB expression).</p> <p>Note that if your group-by is an expression containing commas, you should always use an array to represent the group-by information. Otherwise, the method will not be able to correctly determine the group-by columns.</p> <p>Since version 2.0.7, an <a href="yii-db-expression.html">yii\db\Expression</a> object can be passed to specify the GROUP BY part explicitly in plain SQL.</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-db-query.html">$this</a></td> <td>
<p>The query object itself</p> </td> </tr> </table>  <h3 id="having()-detail"> having() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Sets the HAVING part of the query.</strong></p> <p>See also:</p>
<ul>
<li><a href="yii-db-query.html#andHaving()-detail">andHaving()</a></li>
<li><a href="yii-db-query.html#orHaving()-detail">orHaving()</a></li>
</ul>  <table> <tr><th colspan="3">public <a href="yii-db-query.html">$this</a> <strong><a href="yii-db-query.html#having()-detail">having</a></strong> ( $condition, $params = [] )</th></tr> <tr> <td>$condition</td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.array">array</a>|<a href="yii-db-expression.html">yii\db\Expression</a>
</td> <td>
<p>The conditions to be put after HAVING. Please refer to <a href="yii-db-query.html#where()-detail">where()</a> on how to specify this parameter.</p> </td> </tr> <tr> <td>$params</td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>
<p>The parameters (name =&gt; value) to be bound to the query.</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-db-query.html">$this</a></td> <td>
<p>The query object itself</p> </td> </tr> </table>  <h3 id="innerJoin()-detail"> innerJoin() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Appends an INNER JOIN part to the query.</strong></p>  <table> <tr><th colspan="3">public <a href="yii-db-query.html">$this</a> <strong><a href="yii-db-query.html#innerJoin()-detail">innerJoin</a></strong> ( $table, $on = '', $params = [] )</th></tr> <tr> <td>$table</td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.array">array</a>
</td> <td>
<p>The table to be joined.</p> <p>Use a string to represent the name of the table to be joined. The table name can contain a schema prefix (e.g. 'public.user') and/or table alias (e.g. 'user u'). The method will automatically quote the table name unless it contains some parenthesis (which means the table is given as a sub-query or DB expression).</p> <p>Use an array to represent joining with a sub-query. The array must contain only one element. The value must be a <a href="yii-db-query.html">yii\db\Query</a> object representing the sub-query while the corresponding key represents the alias for the sub-query.</p> </td> </tr> <tr> <td>$on</td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.array">array</a>
</td> <td>
<p>The join condition that should appear in the ON part. Please refer to <a href="yii-db-query.html#join()-detail">join()</a> on how to specify this parameter.</p> </td> </tr> <tr> <td>$params</td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>
<p>The parameters (name =&gt; value) to be bound to the query.</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-db-query.html">$this</a></td> <td>
<p>The query object itself</p> </td> </tr> </table>  <h3 id="join()-detail"> join() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Appends a JOIN part to the query.</strong></p> <p>The first parameter specifies what type of join it is.</p>  <table> <tr><th colspan="3">public <a href="yii-db-query.html">$this</a> <strong><a href="yii-db-query.html#join()-detail">join</a></strong> ( $type, $table, $on = '', $params = [] )</th></tr> <tr> <td>$type</td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>
<p>The type of join, such as INNER JOIN, LEFT JOIN.</p> </td> </tr> <tr> <td>$table</td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.array">array</a>
</td> <td>
<p>The table to be joined.</p> <p>Use a string to represent the name of the table to be joined. The table name can contain a schema prefix (e.g. 'public.user') and/or table alias (e.g. 'user u'). The method will automatically quote the table name unless it contains some parenthesis (which means the table is given as a sub-query or DB expression).</p> <p>Use an array to represent joining with a sub-query. The array must contain only one element. The value must be a <a href="yii-db-query.html">yii\db\Query</a> object representing the sub-query while the corresponding key represents the alias for the sub-query.</p> </td> </tr> <tr> <td>$on</td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.array">array</a>
</td> <td>
<p>The join condition that should appear in the ON part. Please refer to <a href="yii-db-query.html#where()-detail">where()</a> on how to specify this parameter.</p> <p>Note that the array format of <a href="yii-db-query.html#where()-detail">where()</a> is designed to match columns to values instead of columns to columns, so the following would <strong>not</strong> work as expected: <code>['post.author_id' =&gt; 'user.id']</code>, it would match the <code>post.author_id</code> column value against the string <code>'user.id'</code>. It is recommended to use the string syntax here which is more suited for a join:</p> <pre data-language="php">'post.author_id = user.id'
</pre> </td> </tr> <tr> <td>$params</td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>
<p>The parameters (name =&gt; value) to be bound to the query.</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-db-query.html">$this</a></td> <td>
<p>The query object itself</p> </td> </tr> </table>  <h3 id="leftJoin()-detail"> leftJoin() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Appends a LEFT OUTER JOIN part to the query.</strong></p>  <table> <tr><th colspan="3">public <a href="yii-db-query.html">$this</a> <strong><a href="yii-db-query.html#leftJoin()-detail">leftJoin</a></strong> ( $table, $on = '', $params = [] )</th></tr> <tr> <td>$table</td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.array">array</a>
</td> <td>
<p>The table to be joined.</p> <p>Use a string to represent the name of the table to be joined. The table name can contain a schema prefix (e.g. 'public.user') and/or table alias (e.g. 'user u'). The method will automatically quote the table name unless it contains some parenthesis (which means the table is given as a sub-query or DB expression).</p> <p>Use an array to represent joining with a sub-query. The array must contain only one element. The value must be a <a href="yii-db-query.html">yii\db\Query</a> object representing the sub-query while the corresponding key represents the alias for the sub-query.</p> </td> </tr> <tr> <td>$on</td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.array">array</a>
</td> <td>
<p>The join condition that should appear in the ON part. Please refer to <a href="yii-db-query.html#join()-detail">join()</a> on how to specify this parameter.</p> </td> </tr> <tr> <td>$params</td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>
<p>The parameters (name =&gt; value) to be bound to the query</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-db-query.html">$this</a></td> <td>
<p>The query object itself</p> </td> </tr> </table>  <h3 id="max()-detail"> max() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Returns the maximum of the specified column values.</strong></p>  <table> <tr><th colspan="3">public mixed <strong><a href="yii-db-query.html#max()-detail">max</a></strong> ( $q, $db = null )</th></tr> <tr> <td>$q</td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>
<p>The column name or expression. Make sure you properly <a href="guide-db-dao.html#quoting-table-and-column-names">quote</a> column names in the expression.</p> </td> </tr> <tr> <td>$db</td> <td><a href="yii-db-connection.html">yii\db\Connection</a></td> <td>
<p>The database connection used to generate the SQL statement. If this parameter is not given, the <code>db</code> application component will be used.</p> </td> </tr> <tr> <td>return</td> <td>mixed</td> <td>
<p>The maximum of the specified column values.</p> </td> </tr> </table>  <h3 id="min()-detail"> min() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Returns the minimum of the specified column values.</strong></p>  <table> <tr><th colspan="3">public mixed <strong><a href="yii-db-query.html#min()-detail">min</a></strong> ( $q, $db = null )</th></tr> <tr> <td>$q</td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>
<p>The column name or expression. Make sure you properly <a href="guide-db-dao.html#quoting-table-and-column-names">quote</a> column names in the expression.</p> </td> </tr> <tr> <td>$db</td> <td><a href="yii-db-connection.html">yii\db\Connection</a></td> <td>
<p>The database connection used to generate the SQL statement. If this parameter is not given, the <code>db</code> application component will be used.</p> </td> </tr> <tr> <td>return</td> <td>mixed</td> <td>
<p>The minimum of the specified column values.</p> </td> </tr> </table>  <h3 id="one()-detail"> one() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Executes the query and returns a single row of result.</strong></p>  <table> <tr><th colspan="3">public <a href="http://www.php.net/language.types.array">array</a>|<a href="http://www.php.net/language.types.boolean">boolean</a> <strong><a href="yii-db-query.html#one()-detail">one</a></strong> ( $db = null )</th></tr> <tr> <td>$db</td> <td><a href="yii-db-connection.html">yii\db\Connection</a></td> <td>
<p>The database connection used to generate the SQL statement. If this parameter is not given, the <code>db</code> application component will be used.</p> </td> </tr> <tr> <td>return</td> <td>
<a href="http://www.php.net/language.types.array">array</a>|<a href="http://www.php.net/language.types.boolean">boolean</a>
</td> <td>
<p>The first row (in terms of an array) of the query result. False is returned if the query results in nothing.</p> </td> </tr> </table>  <h3 id="orFilterHaving()-detail"> orFilterHaving() <span class="detail-header-tag small"> public method (available since version 2.0.11) </span> </h3>  <p><strong>Adds an additional HAVING condition to the existing one but ignores <a href="yii-db-querytrait.html#isEmpty()-detail">empty operands</a>.</strong></p> <p>The new condition and the existing one will be joined using the <code>OR</code> operator.</p> <p>This method is similar to <a href="yii-db-query.html#orHaving()-detail">orHaving()</a>. The main difference is that this method will remove <a href="yii-db-querytrait.html#isEmpty()-detail">empty query operands</a>. As a result, this method is best suited for building query conditions based on filter values entered by users.</p> <p>See also:</p>
<ul>
<li><a href="yii-db-query.html#filterHaving()-detail">filterHaving()</a></li>
<li><a href="yii-db-query.html#andFilterHaving()-detail">andFilterHaving()</a></li>
</ul>  <table> <tr><th colspan="3">public <a href="yii-db-query.html">$this</a> <strong><a href="yii-db-query.html#orFilterHaving()-detail">orFilterHaving</a></strong> ( <a href="http://www.php.net/language.types.array">array</a> $condition )</th></tr> <tr> <td>$condition</td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>
<p>The new HAVING condition. Please refer to <a href="yii-db-query.html#having()-detail">having()</a> on how to specify this parameter.</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-db-query.html">$this</a></td> <td>
<p>The query object itself</p> </td> </tr> </table>  <h3 id="orHaving()-detail"> orHaving() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Adds an additional HAVING condition to the existing one.</strong></p> <p>The new condition and the existing one will be joined using the <code>OR</code> operator.</p> <p>See also:</p>
<ul>
<li><a href="yii-db-query.html#having()-detail">having()</a></li>
<li><a href="yii-db-query.html#andHaving()-detail">andHaving()</a></li>
</ul>  <table> <tr><th colspan="3">public <a href="yii-db-query.html">$this</a> <strong><a href="yii-db-query.html#orHaving()-detail">orHaving</a></strong> ( $condition, $params = [] )</th></tr> <tr> <td>$condition</td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.array">array</a>|<a href="yii-db-expression.html">yii\db\Expression</a>
</td> <td>
<p>The new HAVING condition. Please refer to <a href="yii-db-query.html#where()-detail">where()</a> on how to specify this parameter.</p> </td> </tr> <tr> <td>$params</td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>
<p>The parameters (name =&gt; value) to be bound to the query.</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-db-query.html">$this</a></td> <td>
<p>The query object itself</p> </td> </tr> </table>  <h3 id="orWhere()-detail"> orWhere() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Adds an additional WHERE condition to the existing one.</strong></p> <p>The new condition and the existing one will be joined using the <code>OR</code> operator.</p> <p>See also:</p>
<ul>
<li><a href="yii-db-query.html#where()-detail">where()</a></li>
<li><a href="yii-db-query.html#andWhere()-detail">andWhere()</a></li>
</ul>  <table> <tr><th colspan="3">public <a href="yii-db-query.html">$this</a> <strong><a href="yii-db-query.html#orWhere()-detail">orWhere</a></strong> ( $condition, $params = [] )</th></tr> <tr> <td>$condition</td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.array">array</a>|<a href="yii-db-expression.html">yii\db\Expression</a>
</td> <td>
<p>The new WHERE condition. Please refer to <a href="yii-db-query.html#where()-detail">where()</a> on how to specify this parameter.</p> </td> </tr> <tr> <td>$params</td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>
<p>The parameters (name =&gt; value) to be bound to the query.</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-db-query.html">$this</a></td> <td>
<p>The query object itself</p> </td> </tr> </table>  <h3 id="params()-detail"> params() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Sets the parameters to be bound to the query.</strong></p> <p>See also <a href="yii-db-query.html#addParams()-detail">addParams()</a>.</p>  <table> <tr><th colspan="3">public <a href="yii-db-query.html">$this</a> <strong><a href="yii-db-query.html#params()-detail">params</a></strong> ( $params )</th></tr> <tr> <td>$params</td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>
<p>List of query parameter values indexed by parameter placeholders. For example, <code>[':name' =&gt; 'Dan', ':age' =&gt; 31]</code>.</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-db-query.html">$this</a></td> <td>
<p>The query object itself</p> </td> </tr> </table>  <h3 id="populate()-detail"> populate() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Converts the raw query results into the format as specified by this query.</strong></p> <p>This method is internally used to convert the data fetched from database into the format as required by this query.</p>  <table> <tr><th colspan="3">public <a href="http://www.php.net/language.types.array">array</a> <strong><a href="yii-db-query.html#populate()-detail">populate</a></strong> ( $rows )</th></tr> <tr> <td>$rows</td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>
<p>The raw query result from database</p> </td> </tr> <tr> <td>return</td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>
<p>The converted query result</p> </td> </tr> </table>  <h3 id="prepare()-detail"> prepare() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Prepares for building SQL.</strong></p> <p>This method is called by <a href="yii-db-querybuilder.html">yii\db\QueryBuilder</a> when it starts to build SQL from a query object. You may override this method to do some final preparation work when converting a query into a SQL statement.</p>  <table> <tr><th colspan="3">public <a href="yii-db-query.html">$this</a> <strong><a href="yii-db-query.html#prepare()-detail">prepare</a></strong> ( $builder )</th></tr> <tr> <td>$builder</td> <td><a href="yii-db-querybuilder.html">yii\db\QueryBuilder</a></td> <td></td> </tr> <tr> <td>return</td> <td><a href="yii-db-query.html">$this</a></td> <td>
<p>A prepared query instance which will be used by <a href="yii-db-querybuilder.html">yii\db\QueryBuilder</a> to build the SQL</p> </td> </tr> </table>  <h3 id="queryScalar()-detail"> queryScalar() <span class="detail-header-tag small"> protected method </span> </h3>  <p><strong>Queries a scalar value by setting <a href="yii-db-query.html#select()-detail">select()</a> first.</strong></p> <p>Restores the value of select to make this query reusable.</p>  <table> <tr><th colspan="3">protected <a href="http://www.php.net/language.types.boolean">boolean</a>|<a href="http://www.php.net/language.types.string">string</a> <strong><a href="yii-db-query.html#queryScalar()-detail">queryScalar</a></strong> ( $selectExpression, $db )</th></tr> <tr> <td>$selectExpression</td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="yii-db-expression.html">yii\db\Expression</a>
</td> <td></td> </tr> <tr> <td>$db</td> <td>
<a href="yii-db-connection.html">yii\db\Connection</a>|<a href="http://www.php.net/language.types.null">null</a>
</td> <td></td> </tr> </table>  <h3 id="rightJoin()-detail"> rightJoin() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Appends a RIGHT OUTER JOIN part to the query.</strong></p>  <table> <tr><th colspan="3">public <a href="yii-db-query.html">$this</a> <strong><a href="yii-db-query.html#rightJoin()-detail">rightJoin</a></strong> ( $table, $on = '', $params = [] )</th></tr> <tr> <td>$table</td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.array">array</a>
</td> <td>
<p>The table to be joined.</p> <p>Use a string to represent the name of the table to be joined. The table name can contain a schema prefix (e.g. 'public.user') and/or table alias (e.g. 'user u'). The method will automatically quote the table name unless it contains some parenthesis (which means the table is given as a sub-query or DB expression).</p> <p>Use an array to represent joining with a sub-query. The array must contain only one element. The value must be a <a href="yii-db-query.html">yii\db\Query</a> object representing the sub-query while the corresponding key represents the alias for the sub-query.</p> </td> </tr> <tr> <td>$on</td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.array">array</a>
</td> <td>
<p>The join condition that should appear in the ON part. Please refer to <a href="yii-db-query.html#join()-detail">join()</a> on how to specify this parameter.</p> </td> </tr> <tr> <td>$params</td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>
<p>The parameters (name =&gt; value) to be bound to the query</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-db-query.html">$this</a></td> <td>
<p>The query object itself</p> </td> </tr> </table>  <h3 id="scalar()-detail"> scalar() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Returns the query result as a scalar value.</strong></p> <p>The value returned will be the first column in the first row of the query results.</p>  <table> <tr><th colspan="3">public <a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.null">null</a>|<a href="http://www.php.net/language.types.boolean">false</a> <strong><a href="yii-db-query.html#scalar()-detail">scalar</a></strong> ( $db = null )</th></tr> <tr> <td>$db</td> <td><a href="yii-db-connection.html">yii\db\Connection</a></td> <td>
<p>The database connection used to generate the SQL statement. If this parameter is not given, the <code>db</code> application component will be used.</p> </td> </tr> <tr> <td>return</td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.null">null</a>|<a href="http://www.php.net/language.types.boolean">false</a>
</td> <td>
<p>The value of the first column in the first row of the query result. False is returned if the query result is empty.</p> </td> </tr> </table>  <h3 id="select()-detail"> select() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Sets the SELECT part of the query.</strong></p>  <table> <tr><th colspan="3">public <a href="yii-db-query.html">$this</a> <strong><a href="yii-db-query.html#select()-detail">select</a></strong> ( $columns, $option = null )</th></tr> <tr> <td>$columns</td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.array">array</a>|<a href="yii-db-expression.html">yii\db\Expression</a>
</td> <td>
<p>The columns to be selected. Columns can be specified in either a string (e.g. "id, name") or an array (e.g. ['id', 'name']). Columns can be prefixed with table names (e.g. "user.id") and/or contain column aliases (e.g. "user.id AS user_id"). The method will automatically quote the column names unless a column contains some parenthesis (which means the column contains a DB expression). A DB expression may also be passed in form of an <a href="yii-db-expression.html">yii\db\Expression</a> object.</p> <p>Note that if you are selecting an expression like <code>CONCAT(first_name, ' ', last_name)</code>, you should use an array to specify the columns. Otherwise, the expression may be incorrectly split into several parts.</p> <p>When the columns are specified as an array, you may also use array keys as the column aliases (if a column does not need alias, do not use a string key).</p> <p>Starting from version 2.0.1, you may also select sub-queries as columns by specifying each such column as a <code>Query</code> instance representing the sub-query.</p> </td> </tr> <tr> <td>$option</td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>
<p>Additional option that should be appended to the 'SELECT' keyword. For example, in MySQL, the option 'SQL_CALC_FOUND_ROWS' can be used.</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-db-query.html">$this</a></td> <td>
<p>The query object itself</p> </td> </tr> </table>  <h3 id="sum()-detail"> sum() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Returns the sum of the specified column values.</strong></p>  <table> <tr><th colspan="3">public mixed <strong><a href="yii-db-query.html#sum()-detail">sum</a></strong> ( $q, $db = null )</th></tr> <tr> <td>$q</td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>
<p>The column name or expression. Make sure you properly <a href="guide-db-dao.html#quoting-table-and-column-names">quote</a> column names in the expression.</p> </td> </tr> <tr> <td>$db</td> <td><a href="yii-db-connection.html">yii\db\Connection</a></td> <td>
<p>The database connection used to generate the SQL statement. If this parameter is not given, the <code>db</code> application component will be used.</p> </td> </tr> <tr> <td>return</td> <td>mixed</td> <td>
<p>The sum of the specified column values.</p> </td> </tr> </table>  <h3 id="union()-detail"> union() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Appends a SQL statement using UNION operator.</strong></p>  <table> <tr><th colspan="3">public <a href="yii-db-query.html">$this</a> <strong><a href="yii-db-query.html#union()-detail">union</a></strong> ( $sql, $all = false )</th></tr> <tr> <td>$sql</td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="yii-db-query.html">yii\db\Query</a>
</td> <td>
<p>The SQL statement to be appended using UNION</p> </td> </tr> <tr> <td>$all</td> <td><a href="http://www.php.net/language.types.boolean">boolean</a></td> <td>
<p>TRUE if using UNION ALL and FALSE if using UNION</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-db-query.html">$this</a></td> <td>
<p>The query object itself</p> </td> </tr> </table>  <h3 id="where()-detail"> where() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Sets the WHERE part of the query.</strong></p> <p>The method requires a <code>$condition</code> parameter, and optionally a <code>$params</code> parameter specifying the values to be bound to the query.</p> <p>The <code>$condition</code> parameter should be either a string (e.g. <code>'id=1'</code>) or an array.</p> <p>The <code>$condition</code> specified as an array can be in one of the following two formats:</p> <ul> <li>hash format: <code>['column1' =&gt; value1, 'column2' =&gt; value2, ...]</code>
</li> <li>operator format: <code>[operator, operand1, operand2, ...]</code>
</li> </ul> <p>A condition in hash format represents the following SQL expression in general: <code>column1=value1 AND column2=value2 AND ...</code>. In case when a value is an array, an <code>IN</code> expression will be generated. And if a value is <code>null</code>, <code>IS NULL</code> will be used in the generated expression. Below are some examples:</p> <ul> <li>
<code>['type' =&gt; 1, 'status' =&gt; 2]</code> generates <code>(type = 1) AND (status = 2)</code>.</li> <li>
<code>['id' =&gt; [1, 2, 3], 'status' =&gt; 2]</code> generates <code>(id IN (1, 2, 3)) AND (status = 2)</code>.</li> <li>
<code>['status' =&gt; null]</code> generates <code>status IS NULL</code>.</li> </ul> <p>A condition in operator format generates the SQL expression according to the specified operator, which can be one of the following:</p> <ul> <li>
<p><strong>and</strong>: the operands should be concatenated together using <code>AND</code>. For example, <code>['and', 'id=1', 'id=2']</code> will generate <code>id=1 AND id=2</code>. If an operand is an array, it will be converted into a string using the rules described here. For example, <code>['and', 'type=1', ['or', 'id=1', 'id=2']]</code> will generate <code>type=1 AND (id=1 OR id=2)</code>. The method will <em>not</em> do any quoting or escaping.</p> </li> <li>
<p><strong>or</strong>: similar to the <code>and</code> operator except that the operands are concatenated using <code>OR</code>. For example, <code>['or', ['type' =&gt; [7, 8, 9]], ['id' =&gt; [1, 2, 3]]]</code> will generate <code>(type IN (7, 8, 9) OR (id IN (1, 2, 3)))</code>.</p> </li> <li>
<p><strong>not</strong>: this will take only one operand and build the negation of it by prefixing the query string with <code>NOT</code>. For example <code>['not', ['attribute' =&gt; null]]</code> will result in the condition <code>NOT (attribute IS NULL)</code>.</p> </li> <li>
<p><strong>between</strong>: operand 1 should be the column name, and operand 2 and 3 should be the starting and ending values of the range that the column is in. For example, <code>['between', 'id', 1, 10]</code> will generate <code>id BETWEEN 1 AND 10</code>.</p> </li> <li>
<p><strong>not between</strong>: similar to <code>between</code> except the <code>BETWEEN</code> is replaced with <code>NOT BETWEEN</code> in the generated condition.</p> </li> <li>
<p><strong>in</strong>: operand 1 should be a column or DB expression, and operand 2 be an array representing the range of the values that the column or DB expression should be in. For example, <code>['in', 'id', [1, 2, 3]]</code> will generate <code>id IN (1, 2, 3)</code>. The method will properly quote the column name and escape values in the range.</p> <p>To create a composite <code>IN</code> condition you can use and array for the column name and value, where the values are indexed by the column name: <code>['in', ['id', 'name'], [['id' =&gt; 1, 'name' =&gt; 'foo'], ['id' =&gt; 2, 'name' =&gt; 'bar']] ]</code>.</p> <p>You may also specify a sub-query that is used to get the values for the <code>IN</code>-condition: <code>['in', 'user_id', (new Query())-&gt;select('id')-&gt;from('users')-&gt;where(['active' =&gt; 1])]</code></p> </li> <li>
<p><strong>not in</strong>: similar to the <code>in</code> operator except that <code>IN</code> is replaced with <code>NOT IN</code> in the generated condition.</p> </li> <li>
<p><strong>like</strong>: operand 1 should be a column or DB expression, and operand 2 be a string or an array representing the values that the column or DB expression should be like. For example, <code>['like', 'name', 'tester']</code> will generate <code>name LIKE '%tester%'</code>. When the value range is given as an array, multiple <code>LIKE</code> predicates will be generated and concatenated using <code>AND</code>. For example, <code>['like', 'name', ['test', 'sample']]</code> will generate <code>name LIKE '%test%' AND name LIKE '%sample%'</code>. The method will properly quote the column name and escape special characters in the values. Sometimes, you may want to add the percentage characters to the matching value by yourself, you may supply a third operand <code>false</code> to do so. For example, <code>['like', 'name', '%tester', false]</code> will generate <code>name LIKE '%tester'</code>.</p> </li> <li>
<p><strong>or like</strong>: similar to the <code>like</code> operator except that <code>OR</code> is used to concatenate the <code>LIKE</code> predicates when operand 2 is an array.</p> </li> <li>
<p><strong>not like</strong>: similar to the <code>like</code> operator except that <code>LIKE</code> is replaced with <code>NOT LIKE</code> in the generated condition.</p> </li> <li>
<p><strong>or not like</strong>: similar to the <code>not like</code> operator except that <code>OR</code> is used to concatenate the <code>NOT LIKE</code> predicates.</p> </li> <li>
<p><strong>exists</strong>: operand 1 is a query object that used to build an <code>EXISTS</code> condition. For example <code>['exists', (new Query())-&gt;select('id')-&gt;from('users')-&gt;where(['active' =&gt; 1])]</code> will result in the following SQL expression: <code>EXISTS (SELECT "id" FROM "users" WHERE "active"=1)</code>.</p> </li> <li>
<p><strong>not exists</strong>: similar to the <code>exists</code> operator except that <code>EXISTS</code> is replaced with <code>NOT EXISTS</code> in the generated condition.</p> </li> <li>
<p>Additionally you can specify arbitrary operators as follows: A condition of <code>['&gt;=', 'id', 10]</code> will result in the following SQL expression: <code>id &gt;= 10</code>.</p> </li> </ul> <p>See also:</p>
<ul>
<li><a href="yii-db-query.html#andWhere()-detail">andWhere()</a></li>
<li><a href="yii-db-query.html#orWhere()-detail">orWhere()</a></li>
<li><a href="yii-db-queryinterface.html#where()-detail">yii\db\QueryInterface::where()</a></li>
</ul>  <table> <tr><th colspan="3">public <a href="yii-db-query.html">$this</a> <strong><a href="yii-db-query.html#where()-detail">where</a></strong> ( $condition, $params = [] )</th></tr> <tr> <td>$condition</td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.array">array</a>|<a href="yii-db-expression.html">yii\db\Expression</a>
</td> <td>
<p>The conditions that should be put in the WHERE part.</p> </td> </tr> <tr> <td>$params</td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>
<p>The parameters (name =&gt; value) to be bound to the query.</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-db-query.html">$this</a></td> <td>
<p>The query object itself</p> </td> </tr> </table>  </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2008&ndash;2017 by Yii Software LLC<br>Licensed under the three clause BSD license.<br>
    <a href="http://www.yiiframework.com/doc-2.0/yii-db-query.html" class="_attribution-link">http://www.yiiframework.com/doc-2.0/yii-db-query.html</a>
  </p>
</div>
