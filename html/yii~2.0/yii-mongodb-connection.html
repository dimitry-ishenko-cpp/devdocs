<h1>Class yii\mongodb\Connection</h1> <div class="top-nav"> <a href="index.html">All Classes</a> | <a href="#properties">Properties</a> | <a href="#methods">Methods</a> | <a href="#events">Events</a> </div> <table> <colgroup> <col class="col-name"> <col class="col-value"> </colgroup> <tr>
<th>Inheritance</th>
<td>
<a href="yii-mongodb-connection.html">yii\mongodb\Connection</a> » <a href="yii-base-component.html">yii\base\Component</a> » <a href="yii-base-object.html">yii\base\Object</a>
</td>
</tr> <tr>
<th>Implements</th>
<td><a href="yii-base-configurable.html">yii\base\Configurable</a></td>
</tr> <tr>
<th>Available since version</th>
<td>2.0</td>
</tr> <tr> <th>Source Code</th> <td><a href="https://github.com/yiisoft/yii2-mongodb/blob/master/Connection.php">https://github.com/yiisoft/yii2-mongodb/blob/master/Connection.php</a></td> </tr> </table>  <p><strong>Connection represents a connection to a MongoDb server.</strong></p> <p>Connection works together with <a href="yii-mongodb-database.html">yii\mongodb\Database</a> and <a href="yii-mongodb-collection.html">yii\mongodb\Collection</a> to provide data access to the Mongo database. They are wrappers of the [[MongoDB PHP extension]](<a href="http://us1.php.net/manual/en/book.mongo.php">http://us1.php.net/manual/en/book.mongo.php</a>).</p> <p>To establish a DB connection, set <a href="yii-mongodb-connection.html#%24dsn-detail">$dsn</a> and then call <a href="yii-mongodb-connection.html#open()-detail">open()</a> to be true.</p> <p>The following example shows how to create a Connection instance and establish the DB connection:</p> <pre data-language="php">$connection = new \yii\mongodb\Connection([
    'dsn' =&gt; $dsn,
]);
$connection-&gt;open();
</pre> <p>After the Mongo connection is established, one can access Mongo databases and collections:</p> <pre data-language="php">$database = $connection-&gt;getDatabase('my_mongo_db');
$collection = $database-&gt;getCollection('customer');
$collection-&gt;insert(['name' =&gt; 'John Smith', 'status' =&gt; 1]);
</pre> <p>You can work with several different databases at the same server using this class. However, while it is unlikely your application will actually need it, the Connection class provides ability to use <a href="yii-mongodb-connection.html#%24defaultDatabaseName-detail">$defaultDatabaseName</a> as well as a shortcut method <a href="yii-mongodb-connection.html#getCollection()-detail">getCollection()</a> to retrieve a particular collection instance:</p> <pre data-language="php">// get collection 'customer' from default database:
$collection = $connection-&gt;getCollection('customer');
// get collection 'customer' from database 'mydatabase':
$collection = $connection-&gt;getCollection(['mydatabase', 'customer']);
</pre> <p>Connection is often used as an application component and configured in the application configuration like the following:</p> <pre data-language="php">[
     'components' =&gt; [
         'mongodb' =&gt; [
             'class' =&gt; '\yii\mongodb\Connection',
             'dsn' =&gt; 'mongodb://developer:password@localhost:27017/mydatabase',
         ],
     ],
]
</pre>    <h2 id="properties">Public Properties</h2>  <table> <colgroup> <col class="col-property"> <col class="col-type"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Property</th>
<th>Type</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="$behaviors"> <td><a href="yii-base-component.html#%24behaviors-detail">$behaviors</a></td> <td>
<a href="yii-base-behavior.html">yii\base\Behavior</a>[]</td> <td>List of behaviors attached to this component</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="$database"> <td><a href="yii-mongodb-connection.html#%24database-detail">$database</a></td> <td><a href="yii-mongodb-database.html">yii\mongodb\Database</a></td> <td>Database instance.</td> <td><a href="yii-mongodb-connection.html">yii\mongodb\Connection</a></td> </tr> <tr id="$defaultDatabaseName"> <td><a href="yii-mongodb-connection.html#%24defaultDatabaseName-detail">$defaultDatabaseName</a></td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>Default database name.</td> <td><a href="yii-mongodb-connection.html">yii\mongodb\Connection</a></td> </tr> <tr id="$driverOptions"> <td><a href="yii-mongodb-connection.html#%24driverOptions-detail">$driverOptions</a></td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>Options for the MongoDB driver.</td> <td><a href="yii-mongodb-connection.html">yii\mongodb\Connection</a></td> </tr> <tr id="$dsn"> <td><a href="yii-mongodb-connection.html#%24dsn-detail">$dsn</a></td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>Host:port Correct syntax is: mongodb://[username:password@]host1[:port1][,host2[:port2:],.</td> <td><a href="yii-mongodb-connection.html">yii\mongodb\Connection</a></td> </tr> <tr id="$enableLogging"> <td><a href="yii-mongodb-connection.html#%24enableLogging-detail">$enableLogging</a></td> <td><a href="http://www.php.net/language.types.boolean">boolean</a></td> <td>Whether to log command and query executions.</td> <td><a href="yii-mongodb-connection.html">yii\mongodb\Connection</a></td> </tr> <tr id="$enableProfiling"> <td><a href="yii-mongodb-connection.html#%24enableProfiling-detail">$enableProfiling</a></td> <td><a href="http://www.php.net/language.types.boolean">boolean</a></td> <td>Whether to enable profiling the commands and queries being executed.</td> <td><a href="yii-mongodb-connection.html">yii\mongodb\Connection</a></td> </tr> <tr id="$fileCollection"> <td><a href="yii-mongodb-connection.html#%24fileCollection-detail">$fileCollection</a></td> <td><a href="yii-mongodb-file-collection.html">yii\mongodb\file\Collection</a></td> <td>Mongo GridFS collection instance.</td> <td><a href="yii-mongodb-connection.html">yii\mongodb\Connection</a></td> </tr> <tr id="$fileStreamProtocol"> <td><a href="yii-mongodb-connection.html#%24fileStreamProtocol-detail">$fileStreamProtocol</a></td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>Name of the protocol, which should be used for the GridFS stream wrapper.</td> <td><a href="yii-mongodb-connection.html">yii\mongodb\Connection</a></td> </tr> <tr id="$fileStreamWrapperClass"> <td><a href="yii-mongodb-connection.html#%24fileStreamWrapperClass-detail">$fileStreamWrapperClass</a></td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>Name of the class, which should serve as a stream wrapper for <a href="yii-mongodb-connection.html#%24fileStreamProtocol-detail">$fileStreamProtocol</a> protocol.</td> <td><a href="yii-mongodb-connection.html">yii\mongodb\Connection</a></td> </tr> <tr id="$isActive"> <td><a href="yii-mongodb-connection.html#%24isActive-detail">$isActive</a></td> <td><a href="http://www.php.net/language.types.boolean">boolean</a></td> <td>Whether the Mongo connection is established</td> <td><a href="yii-mongodb-connection.html">yii\mongodb\Connection</a></td> </tr> <tr id="$logBuilder"> <td><a href="yii-mongodb-connection.html#%24logBuilder-detail">$logBuilder</a></td> <td><a href="yii-mongodb-logbuilder.html">yii\mongodb\LogBuilder</a></td> <td>The log builder for this connection.</td> <td><a href="yii-mongodb-connection.html">yii\mongodb\Connection</a></td> </tr> <tr id="$manager"> <td><a href="yii-mongodb-connection.html#%24manager-detail">$manager</a></td> <td>\MongoDB\Driver\Manager</td> <td>MongoDB driver manager.</td> <td><a href="yii-mongodb-connection.html">yii\mongodb\Connection</a></td> </tr> <tr id="$options"> <td><a href="yii-mongodb-connection.html#%24options-detail">$options</a></td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>Connection options.</td> <td><a href="yii-mongodb-connection.html">yii\mongodb\Connection</a></td> </tr> <tr id="$queryBuilder"> <td><a href="yii-mongodb-connection.html#%24queryBuilder-detail">$queryBuilder</a></td> <td><a href="yii-mongodb-querybuilder.html">yii\mongodb\QueryBuilder</a></td> <td>The query builder for the this MongoDB connection.</td> <td><a href="yii-mongodb-connection.html">yii\mongodb\Connection</a></td> </tr> <tr id="$typeMap"> <td><a href="yii-mongodb-connection.html#%24typeMap-detail">$typeMap</a></td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>Type map to use for BSON unserialization.</td> <td><a href="yii-mongodb-connection.html">yii\mongodb\Connection</a></td> </tr> </table>    <h2 id="methods">Public Methods</h2>  <table> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="__call()"> <td><a href="yii-base-component.html#__call()-detail">__call()</a></td> <td>Calls the named method which is not a class method.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="__clone()"> <td><a href="yii-base-component.html#__clone()-detail">__clone()</a></td> <td>This method is called after the object is created by cloning an existing one.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="__construct()"> <td><a href="yii-base-object.html#__construct()-detail">__construct()</a></td> <td>Constructor.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="__get()"> <td><a href="yii-base-component.html#__get()-detail">__get()</a></td> <td>Returns the value of a component property.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="__isset()"> <td><a href="yii-base-component.html#__isset()-detail">__isset()</a></td> <td>Checks if a property is set, i.e. defined and not null.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="__set()"> <td><a href="yii-base-component.html#__set()-detail">__set()</a></td> <td>Sets the value of a component property.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="__unset()"> <td><a href="yii-base-component.html#__unset()-detail">__unset()</a></td> <td>Sets a component property to be null.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="attachBehavior()"> <td><a href="yii-base-component.html#attachBehavior()-detail">attachBehavior()</a></td> <td>Attaches a behavior to this component.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="attachBehaviors()"> <td><a href="yii-base-component.html#attachBehaviors()-detail">attachBehaviors()</a></td> <td>Attaches a list of behaviors to the component.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="behaviors()"> <td><a href="yii-base-component.html#behaviors()-detail">behaviors()</a></td> <td>Returns a list of behaviors that this component should behave as.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="canGetProperty()"> <td><a href="yii-base-component.html#canGetProperty()-detail">canGetProperty()</a></td> <td>Returns a value indicating whether a property can be read.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="canSetProperty()"> <td><a href="yii-base-component.html#canSetProperty()-detail">canSetProperty()</a></td> <td>Returns a value indicating whether a property can be set.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="className()"> <td><a href="yii-base-object.html#className()-detail">className()</a></td> <td>Returns the fully qualified name of this class.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="close()"> <td><a href="yii-mongodb-connection.html#close()-detail">close()</a></td> <td>Closes the currently active DB connection.</td> <td><a href="yii-mongodb-connection.html">yii\mongodb\Connection</a></td> </tr> <tr id="createCommand()"> <td><a href="yii-mongodb-connection.html#createCommand()-detail">createCommand()</a></td> <td>Creates MongoDB command.</td> <td><a href="yii-mongodb-connection.html">yii\mongodb\Connection</a></td> </tr> <tr id="detachBehavior()"> <td><a href="yii-base-component.html#detachBehavior()-detail">detachBehavior()</a></td> <td>Detaches a behavior from the component.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="detachBehaviors()"> <td><a href="yii-base-component.html#detachBehaviors()-detail">detachBehaviors()</a></td> <td>Detaches all behaviors from the component.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="ensureBehaviors()"> <td><a href="yii-base-component.html#ensureBehaviors()-detail">ensureBehaviors()</a></td> <td>Makes sure that the behaviors declared in <a href="yii-base-component.html#behaviors()-detail">behaviors()</a> are attached to this component.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="getBehavior()"> <td><a href="yii-base-component.html#getBehavior()-detail">getBehavior()</a></td> <td>Returns the named behavior object.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="getBehaviors()"> <td><a href="yii-base-component.html#getBehaviors()-detail">getBehaviors()</a></td> <td>Returns all behaviors attached to this component.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="getCollection()"> <td><a href="yii-mongodb-connection.html#getCollection()-detail">getCollection()</a></td> <td>Returns the MongoDB collection with the given name.</td> <td><a href="yii-mongodb-connection.html">yii\mongodb\Connection</a></td> </tr> <tr id="getDatabase()"> <td><a href="yii-mongodb-connection.html#getDatabase()-detail">getDatabase()</a></td> <td>Returns the MongoDB database with the given name.</td> <td><a href="yii-mongodb-connection.html">yii\mongodb\Connection</a></td> </tr> <tr id="getDefaultDatabaseName()"> <td><a href="yii-mongodb-connection.html#getDefaultDatabaseName()-detail">getDefaultDatabaseName()</a></td> <td>Returns default database name, if it is not set, attempts to determine it from <a href="yii-mongodb-connection.html#%24dsn-detail">$dsn</a> value.</td> <td><a href="yii-mongodb-connection.html">yii\mongodb\Connection</a></td> </tr> <tr id="getFileCollection()"> <td><a href="yii-mongodb-connection.html#getFileCollection()-detail">getFileCollection()</a></td> <td>Returns the MongoDB GridFS collection.</td> <td><a href="yii-mongodb-connection.html">yii\mongodb\Connection</a></td> </tr> <tr id="getIsActive()"> <td><a href="yii-mongodb-connection.html#getIsActive()-detail">getIsActive()</a></td> <td>Returns a value indicating whether the Mongo connection is established.</td> <td><a href="yii-mongodb-connection.html">yii\mongodb\Connection</a></td> </tr> <tr id="getLogBuilder()"> <td><a href="yii-mongodb-connection.html#getLogBuilder()-detail">getLogBuilder()</a></td> <td>Returns log builder for this connection.</td> <td><a href="yii-mongodb-connection.html">yii\mongodb\Connection</a></td> </tr> <tr id="getQueryBuilder()"> <td><a href="yii-mongodb-connection.html#getQueryBuilder()-detail">getQueryBuilder()</a></td> <td>Returns the query builder for the this MongoDB connection.</td> <td><a href="yii-mongodb-connection.html">yii\mongodb\Connection</a></td> </tr> <tr id="hasEventHandlers()"> <td><a href="yii-base-component.html#hasEventHandlers()-detail">hasEventHandlers()</a></td> <td>Returns a value indicating whether there is any handler attached to the named event.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="hasMethod()"> <td><a href="yii-base-component.html#hasMethod()-detail">hasMethod()</a></td> <td>Returns a value indicating whether a method is defined.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="hasProperty()"> <td><a href="yii-base-component.html#hasProperty()-detail">hasProperty()</a></td> <td>Returns a value indicating whether a property is defined for this component.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="init()"> <td><a href="yii-base-object.html#init()-detail">init()</a></td> <td>Initializes the object.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="off()"> <td><a href="yii-base-component.html#off()-detail">off()</a></td> <td>Detaches an existing event handler from this component.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="on()"> <td><a href="yii-base-component.html#on()-detail">on()</a></td> <td>Attaches an event handler to an event.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="open()"> <td><a href="yii-mongodb-connection.html#open()-detail">open()</a></td> <td>Establishes a Mongo connection.</td> <td><a href="yii-mongodb-connection.html">yii\mongodb\Connection</a></td> </tr> <tr id="registerFileStreamWrapper()"> <td><a href="yii-mongodb-connection.html#registerFileStreamWrapper()-detail">registerFileStreamWrapper()</a></td> <td>Registers GridFS stream wrapper for the <a href="yii-mongodb-connection.html#%24fileStreamProtocol-detail">$fileStreamProtocol</a> protocol.</td> <td><a href="yii-mongodb-connection.html">yii\mongodb\Connection</a></td> </tr> <tr id="setDefaultDatabaseName()"> <td><a href="yii-mongodb-connection.html#setDefaultDatabaseName()-detail">setDefaultDatabaseName()</a></td> <td>Sets default database name.</td> <td><a href="yii-mongodb-connection.html">yii\mongodb\Connection</a></td> </tr> <tr id="setLogBuilder()"> <td><a href="yii-mongodb-connection.html#setLogBuilder()-detail">setLogBuilder()</a></td> <td>Sets log builder used for this connection.</td> <td><a href="yii-mongodb-connection.html">yii\mongodb\Connection</a></td> </tr> <tr id="setQueryBuilder()"> <td><a href="yii-mongodb-connection.html#setQueryBuilder()-detail">setQueryBuilder()</a></td> <td>Sets the query builder for the this MongoDB connection.</td> <td><a href="yii-mongodb-connection.html">yii\mongodb\Connection</a></td> </tr> <tr id="trigger()"> <td><a href="yii-base-component.html#trigger()-detail">trigger()</a></td> <td>Triggers an event.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> </table>   <h2>Protected Methods</h2>  <table> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="initConnection()"> <td><a href="yii-mongodb-connection.html#initConnection()-detail">initConnection()</a></td> <td>Initializes the DB connection.</td> <td><a href="yii-mongodb-connection.html">yii\mongodb\Connection</a></td> </tr> <tr id="selectDatabase()"> <td><a href="yii-mongodb-connection.html#selectDatabase()-detail">selectDatabase()</a></td> <td>Selects the database with given name.</td> <td><a href="yii-mongodb-connection.html">yii\mongodb\Connection</a></td> </tr> </table>    <h2 id="events">Events</h2>  <table> <colgroup> <col class="col-event"> <col class="col-type"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Event</th>
<th>Type</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="EVENT_AFTER_OPEN"> <td><a href="yii-mongodb-connection.html#EVENT_AFTER_OPEN-detail">EVENT_AFTER_OPEN</a></td> <td>\yii\mongodb\Event</td> <td> An event that is triggered after a DB connection is established </td> <td><a href="yii-mongodb-connection.html">yii\mongodb\Connection</a></td> </tr> </table>   <h2 id="constants">Property Details</h2>  <h3 id="$database-detail"> $database <span class="detail-header-tag small"> public <em>read-only</em> property </span> </h3>  <p>Database instance.</p>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="yii-mongodb-database.html">yii\mongodb\Database</a></span> <strong><a href="yii-mongodb-connection.html#getDatabase()-detail">getDatabase</a></strong> ( $name = null, $refresh = false )</pre> <h3 id="$defaultDatabaseName-detail"> $defaultDatabaseName <span class="detail-header-tag small"> public property </span> </h3>  <p>Default database name.</p>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="http://www.php.net/language.types.string">string</a></span> <strong><a href="yii-mongodb-connection.html#getDefaultDatabaseName()-detail">getDefaultDatabaseName</a></strong> ( )<br><span class="signature-defs">public</span> <span class="signature-type">void</span> <strong><a href="yii-mongodb-connection.html#setDefaultDatabaseName()-detail">setDefaultDatabaseName</a></strong> ( $name )</pre> <h3 id="$driverOptions-detail"> $driverOptions <span class="detail-header-tag small"> public property </span> </h3>  <p>Options for the MongoDB driver. Any driver-specific options not included in MongoDB connection string specification.</p> <p>See also <a href="http://php.net/manual/en/mongodb-driver-manager.construct.php">http://php.net/manual/en/mongodb-driver-manager.construct.php</a>.</p>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="http://www.php.net/language.types.array">array</a></span> <a href="yii-mongodb-connection.html#%24driverOptions-detail">$driverOptions</a> = []</pre> <h3 id="$dsn-detail"> $dsn <span class="detail-header-tag small"> public property </span> </h3>  <p>Host:port</p> <p>Correct syntax is: mongodb://[username:password@]host1[:port1][,host2[:port2:],...][/dbname] For example: mongodb://localhost:27017 mongodb://developer:password@localhost:27017 mongodb://developer:password@localhost:27017/mydatabase</p>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="http://www.php.net/language.types.string">string</a></span> <a href="yii-mongodb-connection.html#%24dsn-detail">$dsn</a> = null</pre> <h3 id="$enableLogging-detail"> $enableLogging <span class="detail-header-tag small"> public property (available since version 2.1) </span> </h3>  <p>Whether to log command and query executions. When enabled this option may reduce performance. MongoDB commands may contain large data, consuming both CPU and memory. It makes sense to disable this option in the production environment.</p>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="http://www.php.net/language.types.boolean">boolean</a></span> <a href="yii-mongodb-connection.html#%24enableLogging-detail">$enableLogging</a> = true</pre> <h3 id="$enableProfiling-detail"> $enableProfiling <span class="detail-header-tag small"> public property (available since version 2.1) </span> </h3>  <p>Whether to enable profiling the commands and queries being executed. This option will have no effect in case <a href="yii-mongodb-connection.html#%24enableLogging-detail">$enableLogging</a> is disabled.</p>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="http://www.php.net/language.types.boolean">boolean</a></span> <a href="yii-mongodb-connection.html#%24enableProfiling-detail">$enableProfiling</a> = true</pre> <h3 id="$fileCollection-detail"> $fileCollection <span class="detail-header-tag small"> public <em>read-only</em> property </span> </h3>  <p>Mongo GridFS collection instance.</p>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="yii-mongodb-file-collection.html">yii\mongodb\file\Collection</a></span> <strong><a href="yii-mongodb-connection.html#getFileCollection()-detail">getFileCollection</a></strong> ( $prefix = 'fs', $refresh = false )</pre> <h3 id="$fileStreamProtocol-detail"> $fileStreamProtocol <span class="detail-header-tag small"> public property (available since version 2.1) </span> </h3>  <p>Name of the protocol, which should be used for the GridFS stream wrapper. Only alphanumeric values are allowed: do not use any URL special characters, such as '/', '&amp;', ':' etc.</p> <p>See also <a href="yii-mongodb-file-streamwrapper.html">yii\mongodb\file\StreamWrapper</a>.</p>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="http://www.php.net/language.types.string">string</a></span> <a href="yii-mongodb-connection.html#%24fileStreamProtocol-detail">$fileStreamProtocol</a> = 'gridfs'</pre> <h3 id="$fileStreamWrapperClass-detail"> $fileStreamWrapperClass <span class="detail-header-tag small"> public property (available since version 2.1) </span> </h3>  <p>Name of the class, which should serve as a stream wrapper for <a href="yii-mongodb-connection.html#%24fileStreamProtocol-detail">$fileStreamProtocol</a> protocol.</p>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="http://www.php.net/language.types.string">string</a></span> <a href="yii-mongodb-connection.html#%24fileStreamWrapperClass-detail">$fileStreamWrapperClass</a> = 'yii\mongodb\file\StreamWrapper'</pre> <h3 id="$isActive-detail"> $isActive <span class="detail-header-tag small"> public <em>read-only</em> property </span> </h3>  <p>Whether the Mongo connection is established</p>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="http://www.php.net/language.types.boolean">boolean</a></span> <strong><a href="yii-mongodb-connection.html#getIsActive()-detail">getIsActive</a></strong> ( )</pre> <h3 id="$logBuilder-detail"> $logBuilder <span class="detail-header-tag small"> public property </span> </h3>  <p>The log builder for this connection.</p>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="yii-mongodb-logbuilder.html">yii\mongodb\LogBuilder</a></span> <strong><a href="yii-mongodb-connection.html#getLogBuilder()-detail">getLogBuilder</a></strong> ( )<br><span class="signature-defs">public</span> <span class="signature-type">void</span> <strong><a href="yii-mongodb-connection.html#setLogBuilder()-detail">setLogBuilder</a></strong> ( $logBuilder )</pre> <h3 id="$manager-detail"> $manager <span class="detail-header-tag small"> public property (available since version 2.1) </span> </h3>  <p>MongoDB driver manager.</p>  <pre><span class="signature-defs">public</span> <span class="signature-type">\MongoDB\Driver\Manager</span> <a href="yii-mongodb-connection.html#%24manager-detail">$manager</a> = null</pre> <h3 id="$options-detail"> $options <span class="detail-header-tag small"> public property </span> </h3>  <p>Connection options. For example:</p> <pre data-language="php">[
    'socketTimeoutMS' =&gt; 1000, // how long a send or receive on a socket can take before timing out
    'ssl' =&gt; true // initiate the connection with TLS/SSL
]
</pre> <p>See also <a href="https://docs.mongodb.com/manual/reference/connection-string/#connections-connection-options">https://docs.mongodb.com/manual/reference/connection-string/#connections-connection-options</a>.</p>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="http://www.php.net/language.types.array">array</a></span> <a href="yii-mongodb-connection.html#%24options-detail">$options</a> = []</pre> <h3 id="$queryBuilder-detail"> $queryBuilder <span class="detail-header-tag small"> public property </span> </h3>  <p>The query builder for the this MongoDB connection.</p>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="yii-mongodb-querybuilder.html">yii\mongodb\QueryBuilder</a></span> <strong><a href="yii-mongodb-connection.html#getQueryBuilder()-detail">getQueryBuilder</a></strong> ( )<br><span class="signature-defs">public</span> <span class="signature-type">void</span> <strong><a href="yii-mongodb-connection.html#setQueryBuilder()-detail">setQueryBuilder</a></strong> ( $queryBuilder )</pre> <h3 id="$typeMap-detail"> $typeMap <span class="detail-header-tag small"> public property (available since version 2.1) </span> </h3>  <p>Type map to use for BSON unserialization. Note: default type map will be automatically merged into this field, possibly overriding user-defined values.</p> <p>See also <a href="http://php.net/manual/en/mongodb-driver-cursor.settypemap.php">http://php.net/manual/en/mongodb-driver-cursor.settypemap.php</a>.</p>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="http://www.php.net/language.types.array">array</a></span> <a href="yii-mongodb-connection.html#%24typeMap-detail">$typeMap</a> = []</pre>  <h2>Method Details</h2> <div class="method-doc"> <h3 id="close()-detail"> close() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Closes the currently active DB connection.</strong></p> <p>It does nothing if the connection is already closed.</p>  <table> <tr><th colspan="3">public void <strong><a href="yii-mongodb-connection.html#close()-detail">close</a></strong> ( )</th></tr> </table>  <h3 id="createCommand()-detail"> createCommand() <span class="detail-header-tag small"> public method (available since version 2.1) </span> </h3>  <p><strong>Creates MongoDB command.</strong></p>  <table> <tr><th colspan="3">public <a href="yii-mongodb-command.html">yii\mongodb\Command</a> <strong><a href="yii-mongodb-connection.html#createCommand()-detail">createCommand</a></strong> ( $document = [], $databaseName = null )</th></tr> <tr> <td>$document</td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>
<p>Command document contents.</p> </td> </tr> <tr> <td>$databaseName</td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.null">null</a>
</td> <td>
<p>Database name, if not set <a href="yii-mongodb-connection.html#%24defaultDatabaseName-detail">$defaultDatabaseName</a> will be used.</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-mongodb-command.html">yii\mongodb\Command</a></td> <td>
<p>Command instance.</p> </td> </tr> </table>  <h3 id="getCollection()-detail"> getCollection() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Returns the MongoDB collection with the given name.</strong></p>  <table> <tr><th colspan="3">public <a href="yii-mongodb-collection.html">yii\mongodb\Collection</a> <strong><a href="yii-mongodb-connection.html#getCollection()-detail">getCollection</a></strong> ( $name, $refresh = false )</th></tr> <tr> <td>$name</td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.array">array</a>
</td> <td>
<p>Collection name. If string considered as the name of the collection inside the default database. If array - first element considered as the name of the database, second - as name of collection inside that database</p> </td> </tr> <tr> <td>$refresh</td> <td><a href="http://www.php.net/language.types.boolean">boolean</a></td> <td>
<p>Whether to reload the collection instance even if it is found in the cache.</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-mongodb-collection.html">yii\mongodb\Collection</a></td> <td>
<p>Mongo collection instance.</p> </td> </tr> </table>  <h3 id="getDatabase()-detail"> getDatabase() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Returns the MongoDB database with the given name.</strong></p>  <table> <tr><th colspan="3">public <a href="yii-mongodb-database.html">yii\mongodb\Database</a> <strong><a href="yii-mongodb-connection.html#getDatabase()-detail">getDatabase</a></strong> ( $name = null, $refresh = false )</th></tr> <tr> <td>$name</td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.null">null</a>
</td> <td>
<p>Database name, if null default one will be used.</p> </td> </tr> <tr> <td>$refresh</td> <td><a href="http://www.php.net/language.types.boolean">boolean</a></td> <td>
<p>Whether to reestablish the database connection even, if it is found in the cache.</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-mongodb-database.html">yii\mongodb\Database</a></td> <td>
<p>Database instance.</p> </td> </tr> </table>  <h3 id="getDefaultDatabaseName()-detail"> getDefaultDatabaseName() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Returns default database name, if it is not set, attempts to determine it from <a href="yii-mongodb-connection.html#%24dsn-detail">$dsn</a> value.</strong></p>  <table> <tr><th colspan="3">public <a href="http://www.php.net/language.types.string">string</a> <strong><a href="yii-mongodb-connection.html#getDefaultDatabaseName()-detail">getDefaultDatabaseName</a></strong> ( )</th></tr> <tr> <td>return</td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>
<p>Default database name</p> </td> </tr> <tr> <td>throws</td> <td><a href="yii-base-invalidconfigexception.html">yii\base\InvalidConfigException</a></td> <td>
<p>if unable to determine default database name.</p> </td> </tr> </table>  <h3 id="getFileCollection()-detail"> getFileCollection() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Returns the MongoDB GridFS collection.</strong></p>  <table> <tr><th colspan="3">public <a href="yii-mongodb-file-collection.html">yii\mongodb\file\Collection</a> <strong><a href="yii-mongodb-connection.html#getFileCollection()-detail">getFileCollection</a></strong> ( $prefix = 'fs', $refresh = false )</th></tr> <tr> <td>$prefix</td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.array">array</a>
</td> <td>
<p>Collection prefix. If string considered as the prefix of the GridFS collection inside the default database. If array - first element considered as the name of the database, second - as prefix of the GridFS collection inside that database, if no second element present default "fs" prefix will be used.</p> </td> </tr> <tr> <td>$refresh</td> <td><a href="http://www.php.net/language.types.boolean">boolean</a></td> <td>
<p>Whether to reload the collection instance even if it is found in the cache.</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-mongodb-file-collection.html">yii\mongodb\file\Collection</a></td> <td>
<p>Mongo GridFS collection instance.</p> </td> </tr> </table>  <h3 id="getIsActive()-detail"> getIsActive() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Returns a value indicating whether the Mongo connection is established.</strong></p>  <table> <tr><th colspan="3">public <a href="http://www.php.net/language.types.boolean">boolean</a> <strong><a href="yii-mongodb-connection.html#getIsActive()-detail">getIsActive</a></strong> ( )</th></tr> <tr> <td>return</td> <td><a href="http://www.php.net/language.types.boolean">boolean</a></td> <td>
<p>Whether the Mongo connection is established</p> </td> </tr> </table>  <h3 id="getLogBuilder()-detail"> getLogBuilder() <span class="detail-header-tag small"> public method (available since version 2.1) </span> </h3>  <p><strong>Returns log builder for this connection.</strong></p>  <table> <tr><th colspan="3">public <a href="yii-mongodb-logbuilder.html">yii\mongodb\LogBuilder</a> <strong><a href="yii-mongodb-connection.html#getLogBuilder()-detail">getLogBuilder</a></strong> ( )</th></tr> <tr> <td>return</td> <td><a href="yii-mongodb-logbuilder.html">yii\mongodb\LogBuilder</a></td> <td>
<p>The log builder for this connection.</p> </td> </tr> </table>  <h3 id="getQueryBuilder()-detail"> getQueryBuilder() <span class="detail-header-tag small"> public method (available since version 2.1) </span> </h3>  <p><strong>Returns the query builder for the this MongoDB connection.</strong></p>  <table> <tr><th colspan="3">public <a href="yii-mongodb-querybuilder.html">yii\mongodb\QueryBuilder</a> <strong><a href="yii-mongodb-connection.html#getQueryBuilder()-detail">getQueryBuilder</a></strong> ( )</th></tr> <tr> <td>return</td> <td><a href="yii-mongodb-querybuilder.html">yii\mongodb\QueryBuilder</a></td> <td>
<p>The query builder for the this MongoDB connection.</p> </td> </tr> </table>  <h3 id="initConnection()-detail"> initConnection() <span class="detail-header-tag small"> protected method </span> </h3>  <p><strong>Initializes the DB connection.</strong></p> <p>This method is invoked right after the DB connection is established. The default implementation triggers an <a href="yii-mongodb-connection.html#EVENT_AFTER_OPEN-detail">EVENT_AFTER_OPEN</a> event.</p>  <table> <tr><th colspan="3">protected void <strong><a href="yii-mongodb-connection.html#initConnection()-detail">initConnection</a></strong> ( )</th></tr> </table>  <h3 id="open()-detail"> open() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Establishes a Mongo connection.</strong></p> <p>It does nothing if a MongoDB connection has already been established.</p>  <table> <tr><th colspan="3">public void <strong><a href="yii-mongodb-connection.html#open()-detail">open</a></strong> ( )</th></tr> <tr> <td>throws</td> <td><a href="yii-mongodb-exception.html">yii\mongodb\Exception</a></td> <td>
<p>if connection fails</p> </td> </tr> </table>  <h3 id="registerFileStreamWrapper()-detail"> registerFileStreamWrapper() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Registers GridFS stream wrapper for the <a href="yii-mongodb-connection.html#%24fileStreamProtocol-detail">$fileStreamProtocol</a> protocol.</strong></p>  <table> <tr><th colspan="3">public <a href="http://www.php.net/language.types.string">string</a> <strong><a href="yii-mongodb-connection.html#registerFileStreamWrapper()-detail">registerFileStreamWrapper</a></strong> ( $force = false )</th></tr> <tr> <td>$force</td> <td><a href="http://www.php.net/language.types.boolean">boolean</a></td> <td>
<p>Whether to enforce registration even wrapper has been already registered.</p> </td> </tr> <tr> <td>return</td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>
<p>Registered stream protocol name.</p> </td> </tr> </table>  <h3 id="selectDatabase()-detail"> selectDatabase() <span class="detail-header-tag small"> protected method </span> </h3>  <p><strong>Selects the database with given name.</strong></p>  <table> <tr><th colspan="3">protected <a href="yii-mongodb-database.html">yii\mongodb\Database</a> <strong><a href="yii-mongodb-connection.html#selectDatabase()-detail">selectDatabase</a></strong> ( $name )</th></tr> <tr> <td>$name</td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>
<p>Database name.</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-mongodb-database.html">yii\mongodb\Database</a></td> <td>
<p>Database instance.</p> </td> </tr> </table>  <h3 id="setDefaultDatabaseName()-detail"> setDefaultDatabaseName() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Sets default database name.</strong></p>  <table> <tr><th colspan="3">public void <strong><a href="yii-mongodb-connection.html#setDefaultDatabaseName()-detail">setDefaultDatabaseName</a></strong> ( $name )</th></tr> <tr> <td>$name</td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>
<p>Default database name.</p> </td> </tr> </table>  <h3 id="setLogBuilder()-detail"> setLogBuilder() <span class="detail-header-tag small"> public method (available since version 2.1) </span> </h3>  <p><strong>Sets log builder used for this connection.</strong></p>  <table> <tr><th colspan="3">public void <strong><a href="yii-mongodb-connection.html#setLogBuilder()-detail">setLogBuilder</a></strong> ( $logBuilder )</th></tr> <tr> <td>$logBuilder</td> <td>
<a href="http://www.php.net/language.types.array">array</a>|<a href="http://www.php.net/language.types.string">string</a>|<a href="yii-mongodb-logbuilder.html">yii\mongodb\LogBuilder</a>
</td> <td>
<p>The log builder for this connection.</p> </td> </tr> </table>  <h3 id="setQueryBuilder()-detail"> setQueryBuilder() <span class="detail-header-tag small"> public method (available since version 2.1) </span> </h3>  <p><strong>Sets the query builder for the this MongoDB connection.</strong></p>  <table> <tr><th colspan="3">public void <strong><a href="yii-mongodb-connection.html#setQueryBuilder()-detail">setQueryBuilder</a></strong> ( $queryBuilder )</th></tr> <tr> <td>$queryBuilder</td> <td>
<a href="yii-mongodb-querybuilder.html">yii\mongodb\QueryBuilder</a>|<a href="http://www.php.net/language.types.array">array</a>|<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.null">null</a>
</td> <td>
<p>The query builder for this MongoDB connection.</p> </td> </tr> </table>  </div> <h2>Event Details</h2> <div class="event-doc"> <h3 id="EVENT_AFTER_OPEN-detail"> EVENT_AFTER_OPEN <span class="detail-header-tag small"> event of type \yii\mongodb\Event </span> </h3>  <p>An event that is triggered after a DB connection is established</p>  </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2008&ndash;2017 by Yii Software LLC<br>Licensed under the three clause BSD license.<br>
    <a href="http://www.yiiframework.com/doc-2.0/yii-mongodb-connection.html" class="_attribution-link">http://www.yiiframework.com/doc-2.0/yii-mongodb-connection.html</a>
  </p>
</div>
