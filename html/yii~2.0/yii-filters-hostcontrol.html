<h1>Class yii\filters\HostControl</h1> <div class="top-nav"> <a href="index.html">All Classes</a> | <a href="#properties">Properties</a> | <a href="#methods">Methods</a> </div> <table> <colgroup> <col class="col-name"> <col class="col-value"> </colgroup> <tr>
<th>Inheritance</th>
<td>
<a href="yii-filters-hostcontrol.html">yii\filters\HostControl</a> » <a href="yii-base-actionfilter.html">yii\base\ActionFilter</a> » <a href="yii-base-behavior.html">yii\base\Behavior</a> » <a href="yii-base-object.html">yii\base\Object</a>
</td>
</tr> <tr>
<th>Implements</th>
<td><a href="yii-base-configurable.html">yii\base\Configurable</a></td>
</tr> <tr>
<th>Available since version</th>
<td>2.0.11</td>
</tr> <tr> <th>Source Code</th> <td><a href="https://github.com/yiisoft/yii2/blob/master/framework/filters/HostControl.php">https://github.com/yiisoft/yii2/blob/master/framework/filters/HostControl.php</a></td> </tr> </table>  <p><strong>HostControl provides simple control over requested host name.</strong></p> <p>This filter provides protection against <a href="https://www.acunetix.com/vulnerabilities/web/host-header-attack">'host header' attacks</a>, allowing action execution only for specified host names.</p> <p>Application configuration example:</p> <pre data-language="php">return [
    'as hostControl' =&gt; [
        'class' =&gt; 'yii\filters\HostControl',
        'allowedHosts' =&gt; [
            'example.com',
            '*.example.com',
        ],
    ],
    // ...
];
</pre> <p>Controller configuration example:</p> <pre data-language="php">use yii\web\Controller;
use yii\filters\HostControl;

class SiteController extends Controller
{
    public function behaviors()
    {
        return [
            'hostControl' =&gt; [
                'class' =&gt; HostControl::className(),
                'allowedHosts' =&gt; [
                    'example.com',
                    '*.example.com',
                ],
            ],
        ];
    }

    // ...
}
</pre> <blockquote class="note">
<p><strong>Note: </strong>the best way to restrict allowed host names is usage of the web server 'virtual hosts' configuration. This filter should be used only if this configuration is not available or compromised.</p> </blockquote>    <h2 id="properties">Public Properties</h2>  <table> <colgroup> <col class="col-property"> <col class="col-type"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Property</th>
<th>Type</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="$allowedHosts"> <td><a href="yii-filters-hostcontrol.html#%24allowedHosts-detail">$allowedHosts</a></td> <td>
<a href="http://www.php.net/language.types.array">array</a>|<a href="http://www.php.net/class.closure">Closure</a>|<a href="http://www.php.net/language.types.null">null</a>
</td> <td>List of host names, which are allowed.</td> <td><a href="yii-filters-hostcontrol.html">yii\filters\HostControl</a></td> </tr> <tr id="$denyCallback"> <td><a href="yii-filters-hostcontrol.html#%24denyCallback-detail">$denyCallback</a></td> <td><a href="http://www.php.net/language.types.callable">callable</a></td> <td>A callback that will be called if the current host does not match <a href="yii-filters-hostcontrol.html#%24allowedHosts-detail">$allowedHosts</a>.</td> <td><a href="yii-filters-hostcontrol.html">yii\filters\HostControl</a></td> </tr> <tr id="$except"> <td><a href="yii-base-actionfilter.html#%24except-detail">$except</a></td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>List of action IDs that this filter should not apply to.</td> <td><a href="yii-base-actionfilter.html">yii\base\ActionFilter</a></td> </tr> <tr id="$fallbackHostInfo"> <td><a href="yii-filters-hostcontrol.html#%24fallbackHostInfo-detail">$fallbackHostInfo</a></td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.null">null</a>
</td> <td>Fallback host info (e.g. `<a href="http://www">http://www</a>.</td> <td><a href="yii-filters-hostcontrol.html">yii\filters\HostControl</a></td> </tr> <tr id="$only"> <td><a href="yii-base-actionfilter.html#%24only-detail">$only</a></td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>List of action IDs that this filter should apply to.</td> <td><a href="yii-base-actionfilter.html">yii\base\ActionFilter</a></td> </tr> <tr id="$owner"> <td><a href="yii-base-behavior.html#%24owner-detail">$owner</a></td> <td>
<a href="yii-base-component.html">yii\base\Component</a>|<a href="http://www.php.net/language.types.null">null</a>
</td> <td>The owner of this behavior</td> <td><a href="yii-base-behavior.html">yii\base\Behavior</a></td> </tr> </table>    <h2 id="methods">Public Methods</h2>  <table> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="__call()"> <td><a href="yii-base-object.html#__call()-detail">__call()</a></td> <td>Calls the named method which is not a class method.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="__construct()"> <td><a href="yii-base-object.html#__construct()-detail">__construct()</a></td> <td>Constructor.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="__get()"> <td><a href="yii-base-object.html#__get()-detail">__get()</a></td> <td>Returns the value of an object property.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="__isset()"> <td><a href="yii-base-object.html#__isset()-detail">__isset()</a></td> <td>Checks if a property is set, i.e. defined and not null.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="__set()"> <td><a href="yii-base-object.html#__set()-detail">__set()</a></td> <td>Sets value of an object property.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="__unset()"> <td><a href="yii-base-object.html#__unset()-detail">__unset()</a></td> <td>Sets an object property to null.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="afterAction()"> <td><a href="yii-base-actionfilter.html#afterAction()-detail">afterAction()</a></td> <td>This method is invoked right after an action is executed.</td> <td><a href="yii-base-actionfilter.html">yii\base\ActionFilter</a></td> </tr> <tr id="afterFilter()"> <td><a href="yii-base-actionfilter.html#afterFilter()-detail">afterFilter()</a></td> <td></td> <td><a href="yii-base-actionfilter.html">yii\base\ActionFilter</a></td> </tr> <tr id="attach()"> <td><a href="yii-base-behavior.html#attach()-detail">attach()</a></td> <td>Attaches the behavior object to the component.</td> <td><a href="yii-base-behavior.html">yii\base\Behavior</a></td> </tr> <tr id="beforeAction()"> <td><a href="yii-filters-hostcontrol.html#beforeAction()-detail">beforeAction()</a></td> <td>This method is invoked right before an action is to be executed (after all possible filters.) You may override this method to do last-minute preparation for the action.</td> <td><a href="yii-filters-hostcontrol.html">yii\filters\HostControl</a></td> </tr> <tr id="beforeFilter()"> <td><a href="yii-base-actionfilter.html#beforeFilter()-detail">beforeFilter()</a></td> <td></td> <td><a href="yii-base-actionfilter.html">yii\base\ActionFilter</a></td> </tr> <tr id="canGetProperty()"> <td><a href="yii-base-object.html#canGetProperty()-detail">canGetProperty()</a></td> <td>Returns a value indicating whether a property can be read.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="canSetProperty()"> <td><a href="yii-base-object.html#canSetProperty()-detail">canSetProperty()</a></td> <td>Returns a value indicating whether a property can be set.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="className()"> <td><a href="yii-base-object.html#className()-detail">className()</a></td> <td>Returns the fully qualified name of this class.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="detach()"> <td><a href="yii-base-behavior.html#detach()-detail">detach()</a></td> <td>Detaches the behavior object from the component.</td> <td><a href="yii-base-behavior.html">yii\base\Behavior</a></td> </tr> <tr id="events()"> <td><a href="yii-base-behavior.html#events()-detail">events()</a></td> <td>Declares event handlers for the <a href="yii-base-behavior.html#%24owner-detail">$owner</a>'s events.</td> <td><a href="yii-base-behavior.html">yii\base\Behavior</a></td> </tr> <tr id="hasMethod()"> <td><a href="yii-base-object.html#hasMethod()-detail">hasMethod()</a></td> <td>Returns a value indicating whether a method is defined.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="hasProperty()"> <td><a href="yii-base-object.html#hasProperty()-detail">hasProperty()</a></td> <td>Returns a value indicating whether a property is defined.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="init()"> <td><a href="yii-base-object.html#init()-detail">init()</a></td> <td>Initializes the object.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> </table>   <h2>Protected Methods</h2>  <table> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="denyAccess()"> <td><a href="yii-filters-hostcontrol.html#denyAccess()-detail">denyAccess()</a></td> <td>Denies the access.</td> <td><a href="yii-filters-hostcontrol.html">yii\filters\HostControl</a></td> </tr> <tr id="getActionId()"> <td><a href="yii-base-actionfilter.html#getActionId()-detail">getActionId()</a></td> <td>Returns an action ID by converting <a href="yii-base-action.html#%24uniqueId-detail">yii\base\Action::$uniqueId</a> into an ID relative to the module</td> <td><a href="yii-base-actionfilter.html">yii\base\ActionFilter</a></td> </tr> <tr id="isActive()"> <td><a href="yii-base-actionfilter.html#isActive()-detail">isActive()</a></td> <td>Returns a value indicating whether the filter is active for the given action.</td> <td><a href="yii-base-actionfilter.html">yii\base\ActionFilter</a></td> </tr> </table>    <h2 id="constants">Property Details</h2>  <h3 id="$allowedHosts-detail"> $allowedHosts <span class="detail-header-tag small"> public property </span> </h3>  <p>List of host names, which are allowed. Each host can be specified as a wildcard pattern. For example:</p> <pre data-language="php">[
    'example.com',
    '*.example.com',
]
</pre> <p>This field can be specified as a PHP callback of following signature:</p> <pre data-language="php">function (\yii\base\Action $action) {
    //return array of strings
}
</pre> <p>where <code>$action</code> is the current <a href="yii-base-action.html">action</a> object.</p> <p>If this field is not set - no host name check will be performed.</p>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="http://www.php.net/language.types.array">array</a>|<a href="http://www.php.net/class.closure">Closure</a>|<a href="http://www.php.net/language.types.null">null</a></span> <a href="yii-filters-hostcontrol.html#%24allowedHosts-detail">$allowedHosts</a> = null</pre> <h3 id="$denyCallback-detail"> $denyCallback <span class="detail-header-tag small"> public property </span> </h3>  <p>A callback that will be called if the current host does not match <a href="yii-filters-hostcontrol.html#%24allowedHosts-detail">$allowedHosts</a>. If not set, <a href="yii-filters-hostcontrol.html#denyAccess()-detail">denyAccess()</a> will be called.</p> <p>The signature of the callback should be as follows:</p> <pre data-language="php">function (\yii\base\Action $action)
</pre> <p>where <code>$action</code> is the current <a href="yii-base-action.html">action</a> object.</p> <blockquote class="note">
<p><strong>Note: </strong>while implementing your own host deny processing, make sure you avoid usage of the current requested host name, creation of absolute URL links, caching page parts and so on.</p> </blockquote>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="http://www.php.net/language.types.callable">callable</a></span> <a href="yii-filters-hostcontrol.html#%24denyCallback-detail">$denyCallback</a> = null</pre> <h3 id="$fallbackHostInfo-detail"> $fallbackHostInfo <span class="detail-header-tag small"> public property </span> </h3>  <p>Fallback host info (e.g. <code>http://www.yiiframework.com</code>) used when <a href="yii-web-request.html#%24hostInfo-detail">Request::$hostInfo</a> is invalid. This value will replace <a href="yii-web-request.html#%24hostInfo-detail">Request::$hostInfo</a> before <a href="yii-filters-hostcontrol.html#%24denyCallback-detail">$denyCallback</a> is called to make sure that an invalid host will not be used for further processing. You can set it to <code>null</code> to leave <a href="yii-web-request.html#%24hostInfo-detail">Request::$hostInfo</a> untouched. Default value is empty string (this will result creating relative URLs instead of absolute).</p> <p>See also <a href="yii-web-request.html#getHostInfo()-detail">yii\web\Request::getHostInfo()</a>.</p>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.null">null</a></span> <a href="yii-filters-hostcontrol.html#%24fallbackHostInfo-detail">$fallbackHostInfo</a> = ''</pre>  <h2>Method Details</h2> <div class="method-doc"> <h3 id="beforeAction()-detail"> beforeAction() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>This method is invoked right before an action is to be executed (after all possible filters.) You may override this method to do last-minute preparation for the action.</strong></p>  <table> <tr><th colspan="3">public <a href="http://www.php.net/language.types.boolean">boolean</a> <strong><a href="yii-filters-hostcontrol.html#beforeAction()-detail">beforeAction</a></strong> ( $action )</th></tr> <tr> <td>$action</td> <td><a href="yii-base-action.html">yii\base\Action</a></td> <td>
<p>The action to be executed.</p> </td> </tr> <tr> <td>return</td> <td><a href="http://www.php.net/language.types.boolean">boolean</a></td> <td>
<p>Whether the action should continue to be executed.</p> </td> </tr> </table>  <h3 id="denyAccess()-detail"> denyAccess() <span class="detail-header-tag small"> protected method </span> </h3>  <p><strong>Denies the access.</strong></p> <p>The default implementation will display 404 page right away, terminating the program execution. You may override this method, creating your own deny access handler. While doing so, make sure you avoid usage of the current requested host name, creation of absolute URL links, caching page parts and so on.</p>  <table> <tr><th colspan="3">protected void <strong><a href="yii-filters-hostcontrol.html#denyAccess()-detail">denyAccess</a></strong> ( $action )</th></tr> <tr> <td>$action</td> <td><a href="yii-base-action.html">yii\base\Action</a></td> <td>
<p>The action to be executed.</p> </td> </tr> <tr> <td>throws</td> <td><a href="yii-web-notfoundhttpexception.html">yii\web\NotFoundHttpException</a></td> <td></td> </tr> </table>  </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2008&ndash;2017 by Yii Software LLC<br>Licensed under the three clause BSD license.<br>
    <a href="http://www.yiiframework.com/doc-2.0/yii-filters-hostcontrol.html" class="_attribution-link">http://www.yiiframework.com/doc-2.0/yii-filters-hostcontrol.html</a>
  </p>
</div>
