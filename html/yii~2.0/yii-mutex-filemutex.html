<h1>Class yii\mutex\FileMutex</h1> <div class="top-nav"> <a href="index.html">All Classes</a> | <a href="#properties">Properties</a> | <a href="#methods">Methods</a> </div> <table> <colgroup> <col class="col-name"> <col class="col-value"> </colgroup> <tr>
<th>Inheritance</th>
<td>
<a href="yii-mutex-filemutex.html">yii\mutex\FileMutex</a> » <a href="yii-mutex-mutex.html">yii\mutex\Mutex</a> » <a href="yii-base-component.html">yii\base\Component</a> » <a href="yii-base-object.html">yii\base\Object</a>
</td>
</tr> <tr>
<th>Implements</th>
<td><a href="yii-base-configurable.html">yii\base\Configurable</a></td>
</tr> <tr>
<th>Available since version</th>
<td>2.0</td>
</tr> <tr> <th>Source Code</th> <td><a href="https://github.com/yiisoft/yii2/blob/master/framework/mutex/FileMutex.php">https://github.com/yiisoft/yii2/blob/master/framework/mutex/FileMutex.php</a></td> </tr> </table>  <p><strong>FileMutex implements mutex "lock" mechanism via local file system files.</strong></p> <p>This component relies on PHP <code>flock()</code> function.</p> <p>Application configuration example:</p> <pre data-language="php">[
    'components' =&gt; [
        'mutex' =&gt; [
            'class' =&gt; 'yii\mutex\FileMutex'
        ],
    ],
]
</pre> <p>Note: this component can maintain the locks only for the single web server, it probably will not suffice to your in case you are using cloud server solution.</p> <p>Warning: due to <code>flock()</code> function nature this component is unreliable when using a multithreaded server API like ISAPI.</p> <p>See also <a href="yii-mutex-mutex.html">yii\mutex\Mutex</a>.</p>   <h2 id="properties">Public Properties</h2>  <table> <colgroup> <col class="col-property"> <col class="col-type"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Property</th>
<th>Type</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="$autoRelease"> <td><a href="yii-mutex-mutex.html#%24autoRelease-detail">$autoRelease</a></td> <td><a href="http://www.php.net/language.types.boolean">boolean</a></td> <td>Whether all locks acquired in this process (i.e. local locks) must be released automatically before finishing script execution.</td> <td><a href="yii-mutex-mutex.html">yii\mutex\Mutex</a></td> </tr> <tr id="$behaviors"> <td><a href="yii-base-component.html#%24behaviors-detail">$behaviors</a></td> <td>
<a href="yii-base-behavior.html">yii\base\Behavior</a>[]</td> <td>List of behaviors attached to this component</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="$dirMode"> <td><a href="yii-mutex-filemutex.html#%24dirMode-detail">$dirMode</a></td> <td><a href="http://www.php.net/language.types.integer">integer</a></td> <td>The permission to be set for newly created directories.</td> <td><a href="yii-mutex-filemutex.html">yii\mutex\FileMutex</a></td> </tr> <tr id="$fileMode"> <td><a href="yii-mutex-filemutex.html#%24fileMode-detail">$fileMode</a></td> <td><a href="http://www.php.net/language.types.integer">integer</a></td> <td>The permission to be set for newly created mutex files.</td> <td><a href="yii-mutex-filemutex.html">yii\mutex\FileMutex</a></td> </tr> <tr id="$mutexPath"> <td><a href="yii-mutex-filemutex.html#%24mutexPath-detail">$mutexPath</a></td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>The directory to store mutex files.</td> <td><a href="yii-mutex-filemutex.html">yii\mutex\FileMutex</a></td> </tr> </table>    <h2 id="methods">Public Methods</h2>  <table> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="__call()"> <td><a href="yii-base-object.html#__call()-detail">__call()</a></td> <td>Calls the named method which is not a class method.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="__clone()"> <td><a href="yii-base-component.html#__clone()-detail">__clone()</a></td> <td>This method is called after the object is created by cloning an existing one.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="__construct()"> <td><a href="yii-base-object.html#__construct()-detail">__construct()</a></td> <td>Constructor.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="__get()"> <td><a href="yii-base-object.html#__get()-detail">__get()</a></td> <td>Returns the value of an object property.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="__isset()"> <td><a href="yii-base-object.html#__isset()-detail">__isset()</a></td> <td>Checks if a property is set, i.e. defined and not null.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="__set()"> <td><a href="yii-base-object.html#__set()-detail">__set()</a></td> <td>Sets value of an object property.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="__unset()"> <td><a href="yii-base-object.html#__unset()-detail">__unset()</a></td> <td>Sets an object property to null.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="acquire()"> <td><a href="yii-mutex-mutex.html#acquire()-detail">acquire()</a></td> <td>Acquires a lock by name.</td> <td><a href="yii-mutex-mutex.html">yii\mutex\Mutex</a></td> </tr> <tr id="attachBehavior()"> <td><a href="yii-base-component.html#attachBehavior()-detail">attachBehavior()</a></td> <td>Attaches a behavior to this component.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="attachBehaviors()"> <td><a href="yii-base-component.html#attachBehaviors()-detail">attachBehaviors()</a></td> <td>Attaches a list of behaviors to the component.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="behaviors()"> <td><a href="yii-base-component.html#behaviors()-detail">behaviors()</a></td> <td>Returns a list of behaviors that this component should behave as.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="canGetProperty()"> <td><a href="yii-base-object.html#canGetProperty()-detail">canGetProperty()</a></td> <td>Returns a value indicating whether a property can be read.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="canSetProperty()"> <td><a href="yii-base-object.html#canSetProperty()-detail">canSetProperty()</a></td> <td>Returns a value indicating whether a property can be set.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="className()"> <td><a href="yii-base-object.html#className()-detail">className()</a></td> <td>Returns the fully qualified name of this class.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="detachBehavior()"> <td><a href="yii-base-component.html#detachBehavior()-detail">detachBehavior()</a></td> <td>Detaches a behavior from the component.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="detachBehaviors()"> <td><a href="yii-base-component.html#detachBehaviors()-detail">detachBehaviors()</a></td> <td>Detaches all behaviors from the component.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="ensureBehaviors()"> <td><a href="yii-base-component.html#ensureBehaviors()-detail">ensureBehaviors()</a></td> <td>Makes sure that the behaviors declared in <a href="yii-base-component.html#behaviors()-detail">behaviors()</a> are attached to this component.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="getBehavior()"> <td><a href="yii-base-component.html#getBehavior()-detail">getBehavior()</a></td> <td>Returns the named behavior object.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="getBehaviors()"> <td><a href="yii-base-component.html#getBehaviors()-detail">getBehaviors()</a></td> <td>Returns all behaviors attached to this component.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="hasEventHandlers()"> <td><a href="yii-base-component.html#hasEventHandlers()-detail">hasEventHandlers()</a></td> <td>Returns a value indicating whether there is any handler attached to the named event.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="hasMethod()"> <td><a href="yii-base-object.html#hasMethod()-detail">hasMethod()</a></td> <td>Returns a value indicating whether a method is defined.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="hasProperty()"> <td><a href="yii-base-object.html#hasProperty()-detail">hasProperty()</a></td> <td>Returns a value indicating whether a property is defined.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="init()"> <td><a href="yii-mutex-filemutex.html#init()-detail">init()</a></td> <td>Initializes mutex component implementation dedicated for UNIX, GNU/Linux, Mac OS X, and other UNIX-like operating systems.</td> <td><a href="yii-mutex-filemutex.html">yii\mutex\FileMutex</a></td> </tr> <tr id="off()"> <td><a href="yii-base-component.html#off()-detail">off()</a></td> <td>Detaches an existing event handler from this component.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="on()"> <td><a href="yii-base-component.html#on()-detail">on()</a></td> <td>Attaches an event handler to an event.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="release()"> <td><a href="yii-mutex-mutex.html#release()-detail">release()</a></td> <td>Releases acquired lock. This method will return false in case the lock was not found.</td> <td><a href="yii-mutex-mutex.html">yii\mutex\Mutex</a></td> </tr> <tr id="trigger()"> <td><a href="yii-base-component.html#trigger()-detail">trigger()</a></td> <td>Triggers an event.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> </table>   <h2>Protected Methods</h2>  <table> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="acquireLock()"> <td><a href="yii-mutex-filemutex.html#acquireLock()-detail">acquireLock()</a></td> <td>Acquires lock by given name.</td> <td><a href="yii-mutex-filemutex.html">yii\mutex\FileMutex</a></td> </tr> <tr id="getLockFilePath()"> <td><a href="yii-mutex-filemutex.html#getLockFilePath()-detail">getLockFilePath()</a></td> <td>Generate path for lock file.</td> <td><a href="yii-mutex-filemutex.html">yii\mutex\FileMutex</a></td> </tr> <tr id="releaseLock()"> <td><a href="yii-mutex-filemutex.html#releaseLock()-detail">releaseLock()</a></td> <td>Releases lock by given name.</td> <td><a href="yii-mutex-filemutex.html">yii\mutex\FileMutex</a></td> </tr> </table>    <h2 id="constants">Property Details</h2>  <h3 id="$dirMode-detail"> $dirMode <span class="detail-header-tag small"> public property </span> </h3>  <p>The permission to be set for newly created directories. This value will be used by PHP chmod() function. No umask will be applied. Defaults to 0775, meaning the directory is read-writable by owner and group, but read-only for other users.</p>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="http://www.php.net/language.types.integer">integer</a></span> <a href="yii-mutex-filemutex.html#%24dirMode-detail">$dirMode</a> = 0775</pre> <h3 id="$fileMode-detail"> $fileMode <span class="detail-header-tag small"> public property </span> </h3>  <p>The permission to be set for newly created mutex files. This value will be used by PHP chmod() function. No umask will be applied. If not set, the permission will be determined by the current environment.</p>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="http://www.php.net/language.types.integer">integer</a></span> <a href="yii-mutex-filemutex.html#%24fileMode-detail">$fileMode</a> = null</pre> <h3 id="$mutexPath-detail"> $mutexPath <span class="detail-header-tag small"> public property </span> </h3>  <p>The directory to store mutex files. You may use <a href="guide-concept-aliases.html">path alias</a> here. Defaults to the "mutex" subdirectory under the application runtime path.</p>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="http://www.php.net/language.types.string">string</a></span> <a href="yii-mutex-filemutex.html#%24mutexPath-detail">$mutexPath</a> = '@runtime/mutex'</pre>  <h2>Method Details</h2> <div class="method-doc"> <h3 id="acquireLock()-detail"> acquireLock() <span class="detail-header-tag small"> protected method </span> </h3>  <p><strong>Acquires lock by given name.</strong></p>  <table> <tr><th colspan="3">protected <a href="http://www.php.net/language.types.boolean">boolean</a> <strong><a href="yii-mutex-filemutex.html#acquireLock()-detail">acquireLock</a></strong> ( $name, $timeout = 0 )</th></tr> <tr> <td>$name</td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>
<p>Of the lock to be acquired.</p> </td> </tr> <tr> <td>$timeout</td> <td><a href="http://www.php.net/language.types.integer">integer</a></td> <td>
<p>To wait for lock to become released.</p> </td> </tr> <tr> <td>return</td> <td><a href="http://www.php.net/language.types.boolean">boolean</a></td> <td>
<p>Acquiring result.</p> </td> </tr> </table>  <h3 id="getLockFilePath()-detail"> getLockFilePath() <span class="detail-header-tag small"> protected method (available since version 2.0.10) </span> </h3>  <p><strong>Generate path for lock file.</strong></p>  <table> <tr><th colspan="3">protected <a href="http://www.php.net/language.types.string">string</a> <strong><a href="yii-mutex-filemutex.html#getLockFilePath()-detail">getLockFilePath</a></strong> ( $name )</th></tr> <tr> <td>$name</td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td></td> </tr> </table>  <h3 id="init()-detail"> init() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Initializes mutex component implementation dedicated for UNIX, GNU/Linux, Mac OS X, and other UNIX-like operating systems.</strong></p>  <table> <tr><th colspan="3">public void <strong><a href="yii-mutex-filemutex.html#init()-detail">init</a></strong> ( )</th></tr> <tr> <td>throws</td> <td><a href="yii-base-invalidconfigexception.html">yii\base\InvalidConfigException</a></td> <td></td> </tr> </table>  <h3 id="releaseLock()-detail"> releaseLock() <span class="detail-header-tag small"> protected method </span> </h3>  <p><strong>Releases lock by given name.</strong></p>  <table> <tr><th colspan="3">protected <a href="http://www.php.net/language.types.boolean">boolean</a> <strong><a href="yii-mutex-filemutex.html#releaseLock()-detail">releaseLock</a></strong> ( $name )</th></tr> <tr> <td>$name</td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>
<p>Of the lock to be released.</p> </td> </tr> <tr> <td>return</td> <td><a href="http://www.php.net/language.types.boolean">boolean</a></td> <td>
<p>Release result.</p> </td> </tr> </table>  </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2008&ndash;2017 by Yii Software LLC<br>Licensed under the three clause BSD license.<br>
    <a href="http://www.yiiframework.com/doc-2.0/yii-mutex-filemutex.html" class="_attribution-link">http://www.yiiframework.com/doc-2.0/yii-mutex-filemutex.html</a>
  </p>
</div>
