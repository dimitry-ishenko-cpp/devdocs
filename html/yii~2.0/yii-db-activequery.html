<h1>Class yii\db\ActiveQuery</h1> <div class="top-nav"> <a href="index.html">All Classes</a> | <a href="#properties">Properties</a> | <a href="#methods">Methods</a> | <a href="#events">Events</a> </div> <table> <colgroup> <col class="col-name"> <col class="col-value"> </colgroup> <tr>
<th>Inheritance</th>
<td>
<a href="yii-db-activequery.html">yii\db\ActiveQuery</a> » <a href="yii-db-query.html">yii\db\Query</a> » <a href="yii-base-component.html">yii\base\Component</a> » <a href="yii-base-object.html">yii\base\Object</a>
</td>
</tr> <tr>
<th>Implements</th>
<td>
<a href="yii-base-configurable.html">yii\base\Configurable</a>, <a href="yii-db-activequeryinterface.html">yii\db\ActiveQueryInterface</a>, <a href="yii-db-queryinterface.html">yii\db\QueryInterface</a>
</td>
</tr> <tr>
<th>Uses Traits</th>
<td>
<a href="yii-db-activequerytrait.html">yii\db\ActiveQueryTrait</a>, <a href="yii-db-activerelationtrait.html">yii\db\ActiveRelationTrait</a>, <a href="yii-db-querytrait.html">yii\db\QueryTrait</a>
</td>
</tr> <tr>
<th>Available since version</th>
<td>2.0</td>
</tr> <tr> <th>Source Code</th> <td><a href="https://github.com/yiisoft/yii2/blob/master/framework/db/ActiveQuery.php">https://github.com/yiisoft/yii2/blob/master/framework/db/ActiveQuery.php</a></td> </tr> </table>  <p><strong>ActiveQuery represents a DB query associated with an Active Record class.</strong></p> <div class="toc"><ol>
<li><a href="#normal-query">Normal Query</a></li> <li><a href="#relational-query">Relational query</a></li>
</ol></div> <p>An ActiveQuery can be a normal query or be used in a relational context.</p> <p>ActiveQuery instances are usually created by <a href="yii-db-activerecord.html#find()-detail">yii\db\ActiveRecord::find()</a> and <a href="yii-db-activerecord.html#findBySql()-detail">yii\db\ActiveRecord::findBySql()</a>. Relational queries are created by <a href="yii-db-baseactiverecord.html#hasOne()-detail">yii\db\ActiveRecord::hasOne()</a> and <a href="yii-db-baseactiverecord.html#hasMany()-detail">yii\db\ActiveRecord::hasMany()</a>.</p> <h2>Normal Query 
</h2>
<p>ActiveQuery mainly provides the following methods to retrieve the query results:</p> <ul> <li>
<a href="yii-db-activequery.html#one()-detail">one()</a>: returns a single record populated with the first row of data.</li> <li>
<a href="yii-db-activequery.html#all()-detail">all()</a>: returns all records based on the query results.</li> <li>
<a href="yii-db-query.html#count()-detail">count()</a>: returns the number of records.</li> <li>
<a href="yii-db-query.html#sum()-detail">sum()</a>: returns the sum over the specified column.</li> <li>
<a href="yii-db-query.html#average()-detail">average()</a>: returns the average over the specified column.</li> <li>
<a href="yii-db-query.html#min()-detail">min()</a>: returns the min over the specified column.</li> <li>
<a href="yii-db-query.html#max()-detail">max()</a>: returns the max over the specified column.</li> <li>
<a href="yii-db-query.html#scalar()-detail">scalar()</a>: returns the value of the first column in the first row of the query result.</li> <li>
<a href="yii-db-query.html#column()-detail">column()</a>: returns the value of the first column in the query result.</li> <li>
<a href="yii-db-query.html#exists()-detail">exists()</a>: returns a value indicating whether the query result has data or not.</li> </ul> <p>Because ActiveQuery extends from <a href="yii-db-query.html">yii\db\Query</a>, one can use query methods, such as <a href="yii-db-querytrait.html#where()-detail">where()</a>, <a href="yii-db-querytrait.html#orderBy()-detail">orderBy()</a> to customize the query options.</p> <p>ActiveQuery also provides the following additional query options:</p> <ul> <li>
<a href="yii-db-activequerytrait.html#with()-detail">with()</a>: list of relations that this query should be performed with.</li> <li>
<a href="yii-db-activequery.html#joinWith()-detail">joinWith()</a>: reuse a relation query definition to add a join to a query.</li> <li>
<a href="yii-db-querytrait.html#indexBy()-detail">indexBy()</a>: the name of the column by which the query result should be indexed.</li> <li>
<a href="yii-db-activequerytrait.html#asArray()-detail">asArray()</a>: whether to return each record as an array.</li> </ul> <p>These options can be configured using methods of the same name. For example:</p> <pre data-language="php">$customers = Customer::find()-&gt;with('orders')-&gt;asArray()-&gt;all();
</pre> <h2>Relational query 
</h2>
<p>In relational context ActiveQuery represents a relation between two Active Record classes.</p> <p>Relational ActiveQuery instances are usually created by calling <a href="yii-db-baseactiverecord.html#hasOne()-detail">yii\db\ActiveRecord::hasOne()</a> and <a href="yii-db-baseactiverecord.html#hasMany()-detail">yii\db\ActiveRecord::hasMany()</a>. An Active Record class declares a relation by defining a getter method which calls one of the above methods and returns the created ActiveQuery object.</p> <p>A relation is specified by <a href="yii-db-activerelationtrait.html#%24link-detail">$link</a> which represents the association between columns of different tables; and the multiplicity of the relation is indicated by <a href="yii-db-activerelationtrait.html#%24multiple-detail">$multiple</a>.</p> <p>If a relation involves a junction table, it may be specified by <a href="yii-db-activerelationtrait.html#via()-detail">via()</a> or <a href="yii-db-activequery.html#viaTable()-detail">viaTable()</a> method. These methods may only be called in a relational context. Same is true for <a href="yii-db-activerelationtrait.html#inverseOf()-detail">inverseOf()</a>, which marks a relation as inverse of another relation and <a href="yii-db-activequery.html#onCondition()-detail">onCondition()</a> which adds a condition that is to be added to relational query join condition.</p>    <h2 id="properties">Public Properties</h2>  <table> <colgroup> <col class="col-property"> <col class="col-type"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Property</th>
<th>Type</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="$asArray"> <td><a href="yii-db-activequerytrait.html#%24asArray-detail">$asArray</a></td> <td><a href="http://www.php.net/language.types.boolean">boolean</a></td> <td>Whether to return each record as an array.</td> <td><a href="yii-db-activequerytrait.html">yii\db\ActiveQueryTrait</a></td> </tr> <tr id="$behaviors"> <td><a href="yii-base-component.html#%24behaviors-detail">$behaviors</a></td> <td>
<a href="yii-base-behavior.html">yii\base\Behavior</a>[]</td> <td>List of behaviors attached to this component</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="$distinct"> <td><a href="yii-db-query.html#%24distinct-detail">$distinct</a></td> <td><a href="http://www.php.net/language.types.boolean">boolean</a></td> <td>Whether to select distinct rows of data only.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="$emulateExecution"> <td><a href="yii-db-querytrait.html#%24emulateExecution-detail">$emulateExecution</a></td> <td><a href="http://www.php.net/language.types.boolean">boolean</a></td> <td>Whether to emulate the actual query execution, returning empty or false results.</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="$from"> <td><a href="yii-db-query.html#%24from-detail">$from</a></td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>The table(s) to be selected from.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="$groupBy"> <td><a href="yii-db-query.html#%24groupBy-detail">$groupBy</a></td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>How to group the query results.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="$having"> <td><a href="yii-db-query.html#%24having-detail">$having</a></td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.array">array</a>|<a href="yii-db-expression.html">yii\db\Expression</a>
</td> <td>The condition to be applied in the GROUP BY clause.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="$indexBy"> <td><a href="yii-db-querytrait.html#%24indexBy-detail">$indexBy</a></td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.callable">callable</a>
</td> <td>The name of the column by which the query results should be indexed by.</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="$inverseOf"> <td><a href="yii-db-activerelationtrait.html#%24inverseOf-detail">$inverseOf</a></td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>The name of the relation that is the inverse of this relation.</td> <td><a href="yii-db-activerelationtrait.html">yii\db\ActiveRelationTrait</a></td> </tr> <tr id="$join"> <td><a href="yii-db-query.html#%24join-detail">$join</a></td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>How to join with other tables.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="$joinWith"> <td><a href="yii-db-activequery.html#%24joinWith-detail">$joinWith</a></td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>A list of relations that this query should be joined with</td> <td><a href="yii-db-activequery.html">yii\db\ActiveQuery</a></td> </tr> <tr id="$limit"> <td><a href="yii-db-querytrait.html#%24limit-detail">$limit</a></td> <td>
<a href="http://www.php.net/language.types.integer">integer</a>|<a href="yii-db-expression.html">yii\db\Expression</a>
</td> <td>Maximum number of records to be returned.</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="$link"> <td><a href="yii-db-activerelationtrait.html#%24link-detail">$link</a></td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>The columns of the primary and foreign tables that establish a relation.</td> <td><a href="yii-db-activerelationtrait.html">yii\db\ActiveRelationTrait</a></td> </tr> <tr id="$modelClass"> <td><a href="yii-db-activequerytrait.html#%24modelClass-detail">$modelClass</a></td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>The name of the ActiveRecord class.</td> <td><a href="yii-db-activequerytrait.html">yii\db\ActiveQueryTrait</a></td> </tr> <tr id="$multiple"> <td><a href="yii-db-activerelationtrait.html#%24multiple-detail">$multiple</a></td> <td><a href="http://www.php.net/language.types.boolean">boolean</a></td> <td>Whether this query represents a relation to more than one record.</td> <td><a href="yii-db-activerelationtrait.html">yii\db\ActiveRelationTrait</a></td> </tr> <tr id="$offset"> <td><a href="yii-db-querytrait.html#%24offset-detail">$offset</a></td> <td>
<a href="http://www.php.net/language.types.integer">integer</a>|<a href="yii-db-expression.html">yii\db\Expression</a>
</td> <td>Zero-based offset from where the records are to be returned.</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="$on"> <td><a href="yii-db-activequery.html#%24on-detail">$on</a></td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.array">array</a>
</td> <td>The join condition to be used when this query is used in a relational context.</td> <td><a href="yii-db-activequery.html">yii\db\ActiveQuery</a></td> </tr> <tr id="$orderBy"> <td><a href="yii-db-querytrait.html#%24orderBy-detail">$orderBy</a></td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>How to sort the query results.</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="$params"> <td><a href="yii-db-query.html#%24params-detail">$params</a></td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>List of query parameter values indexed by parameter placeholders.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="$primaryModel"> <td><a href="yii-db-activerelationtrait.html#%24primaryModel-detail">$primaryModel</a></td> <td><a href="yii-db-activerecord.html">yii\db\ActiveRecord</a></td> <td>The primary model of a relational query.</td> <td><a href="yii-db-activerelationtrait.html">yii\db\ActiveRelationTrait</a></td> </tr> <tr id="$select"> <td><a href="yii-db-query.html#%24select-detail">$select</a></td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>The columns being selected.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="$selectOption"> <td><a href="yii-db-query.html#%24selectOption-detail">$selectOption</a></td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>Additional option that should be appended to the 'SELECT' keyword.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="$sql"> <td><a href="yii-db-activequery.html#%24sql-detail">$sql</a></td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>The SQL statement to be executed for retrieving AR records.</td> <td><a href="yii-db-activequery.html">yii\db\ActiveQuery</a></td> </tr> <tr id="$tablesUsedInFrom"> <td><a href="yii-db-activequery.html#%24tablesUsedInFrom-detail">$tablesUsedInFrom</a></td> <td>
<a href="http://www.php.net/language.types.string">string</a>[]</td> <td>Table names indexed by aliases</td> <td><a href="yii-db-activequery.html">yii\db\ActiveQuery</a></td> </tr> <tr id="$union"> <td><a href="yii-db-query.html#%24union-detail">$union</a></td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>This is used to construct the UNION clause(s) in a SQL statement.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="$via"> <td><a href="yii-db-activerelationtrait.html#%24via-detail">$via</a></td> <td>
<a href="http://www.php.net/language.types.array">array</a>|<a href="http://www.php.net/language.types.object">object</a>
</td> <td>The query associated with the junction table.</td> <td><a href="yii-db-activerelationtrait.html">yii\db\ActiveRelationTrait</a></td> </tr> <tr id="$where"> <td><a href="yii-db-querytrait.html#%24where-detail">$where</a></td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.array">array</a>
</td> <td>Query condition.</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="$with"> <td><a href="yii-db-activequerytrait.html#%24with-detail">$with</a></td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>A list of relations that this query should be performed with</td> <td><a href="yii-db-activequerytrait.html">yii\db\ActiveQueryTrait</a></td> </tr> </table>    <h2 id="methods">Public Methods</h2>  <table> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="__call()"> <td><a href="yii-base-component.html#__call()-detail">__call()</a></td> <td>Calls the named method which is not a class method.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="__clone()"> <td><a href="yii-db-activerelationtrait.html#__clone()-detail">__clone()</a></td> <td>Clones internal objects.</td> <td><a href="yii-db-activerelationtrait.html">yii\db\ActiveRelationTrait</a></td> </tr> <tr id="__construct()"> <td><a href="yii-db-activequery.html#__construct()-detail">__construct()</a></td> <td>Constructor.</td> <td><a href="yii-db-activequery.html">yii\db\ActiveQuery</a></td> </tr> <tr id="__get()"> <td><a href="yii-base-component.html#__get()-detail">__get()</a></td> <td>Returns the value of a component property.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="__isset()"> <td><a href="yii-base-component.html#__isset()-detail">__isset()</a></td> <td>Checks if a property is set, i.e. defined and not null.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="__set()"> <td><a href="yii-base-component.html#__set()-detail">__set()</a></td> <td>Sets the value of a component property.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="__unset()"> <td><a href="yii-base-component.html#__unset()-detail">__unset()</a></td> <td>Sets a component property to be null.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="addGroupBy()"> <td><a href="yii-db-query.html#addGroupBy()-detail">addGroupBy()</a></td> <td>Adds additional group-by columns to the existing ones.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="addOrderBy()"> <td><a href="yii-db-querytrait.html#addOrderBy()-detail">addOrderBy()</a></td> <td>Adds additional ORDER BY columns to the query.</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="addParams()"> <td><a href="yii-db-query.html#addParams()-detail">addParams()</a></td> <td>Adds additional parameters to be bound to the query.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="addSelect()"> <td><a href="yii-db-query.html#addSelect()-detail">addSelect()</a></td> <td>Add more columns to the SELECT part of the query.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="alias()"> <td><a href="yii-db-activequery.html#alias()-detail">alias()</a></td> <td>Define an alias for the table defined in <a href="yii-db-activequerytrait.html#%24modelClass-detail">$modelClass</a>.</td> <td><a href="yii-db-activequery.html">yii\db\ActiveQuery</a></td> </tr> <tr id="all()"> <td><a href="yii-db-activequery.html#all()-detail">all()</a></td> <td>Executes query and returns all results as an array.</td> <td><a href="yii-db-activequery.html">yii\db\ActiveQuery</a></td> </tr> <tr id="andFilterCompare()"> <td><a href="yii-db-query.html#andFilterCompare()-detail">andFilterCompare()</a></td> <td>Adds a filtering condition for a specific column and allow the user to choose a filter operator.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="andFilterHaving()"> <td><a href="yii-db-query.html#andFilterHaving()-detail">andFilterHaving()</a></td> <td>Adds an additional HAVING condition to the existing one but ignores <a href="yii-db-querytrait.html#isEmpty()-detail">empty operands</a>.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="andFilterWhere()"> <td><a href="yii-db-querytrait.html#andFilterWhere()-detail">andFilterWhere()</a></td> <td>Adds an additional WHERE condition to the existing one but ignores <a href="yii-db-querytrait.html#isEmpty()-detail">empty operands</a>.</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="andHaving()"> <td><a href="yii-db-query.html#andHaving()-detail">andHaving()</a></td> <td>Adds an additional HAVING condition to the existing one.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="andOnCondition()"> <td><a href="yii-db-activequery.html#andOnCondition()-detail">andOnCondition()</a></td> <td>Adds an additional ON condition to the existing one.</td> <td><a href="yii-db-activequery.html">yii\db\ActiveQuery</a></td> </tr> <tr id="andWhere()"> <td><a href="yii-db-querytrait.html#andWhere()-detail">andWhere()</a></td> <td>Adds an additional WHERE condition to the existing one.</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="asArray()"> <td><a href="yii-db-activequerytrait.html#asArray()-detail">asArray()</a></td> <td>Sets the <a href="yii-db-activequerytrait.html#asArray()-detail">asArray()</a> property.</td> <td><a href="yii-db-activequerytrait.html">yii\db\ActiveQueryTrait</a></td> </tr> <tr id="attachBehavior()"> <td><a href="yii-base-component.html#attachBehavior()-detail">attachBehavior()</a></td> <td>Attaches a behavior to this component.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="attachBehaviors()"> <td><a href="yii-base-component.html#attachBehaviors()-detail">attachBehaviors()</a></td> <td>Attaches a list of behaviors to the component.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="average()"> <td><a href="yii-db-query.html#average()-detail">average()</a></td> <td>Returns the average of the specified column values.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="batch()"> <td><a href="yii-db-query.html#batch()-detail">batch()</a></td> <td>Starts a batch query.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="behaviors()"> <td><a href="yii-base-component.html#behaviors()-detail">behaviors()</a></td> <td>Returns a list of behaviors that this component should behave as.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="canGetProperty()"> <td><a href="yii-base-component.html#canGetProperty()-detail">canGetProperty()</a></td> <td>Returns a value indicating whether a property can be read.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="canSetProperty()"> <td><a href="yii-base-component.html#canSetProperty()-detail">canSetProperty()</a></td> <td>Returns a value indicating whether a property can be set.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="className()"> <td><a href="yii-base-object.html#className()-detail">className()</a></td> <td>Returns the fully qualified name of this class.</td> <td><a href="yii-base-object.html">yii\base\Object</a></td> </tr> <tr id="column()"> <td><a href="yii-db-query.html#column()-detail">column()</a></td> <td>Executes the query and returns the first column of the result.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="count()"> <td><a href="yii-db-query.html#count()-detail">count()</a></td> <td>Returns the number of records.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="create()"> <td><a href="yii-db-query.html#create()-detail">create()</a></td> <td>Creates a new Query object and copies its property values from an existing one.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="createCommand()"> <td><a href="yii-db-activequery.html#createCommand()-detail">createCommand()</a></td> <td>Creates a DB command that can be used to execute this query.</td> <td><a href="yii-db-activequery.html">yii\db\ActiveQuery</a></td> </tr> <tr id="detachBehavior()"> <td><a href="yii-base-component.html#detachBehavior()-detail">detachBehavior()</a></td> <td>Detaches a behavior from the component.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="detachBehaviors()"> <td><a href="yii-base-component.html#detachBehaviors()-detail">detachBehaviors()</a></td> <td>Detaches all behaviors from the component.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="distinct()"> <td><a href="yii-db-query.html#distinct()-detail">distinct()</a></td> <td>Sets the value indicating whether to SELECT DISTINCT or not.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="each()"> <td><a href="yii-db-query.html#each()-detail">each()</a></td> <td>Starts a batch query and retrieves data row by row.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="emulateExecution()"> <td><a href="yii-db-querytrait.html#emulateExecution()-detail">emulateExecution()</a></td> <td>Sets whether to emulate query execution, preventing any interaction with data storage.</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="ensureBehaviors()"> <td><a href="yii-base-component.html#ensureBehaviors()-detail">ensureBehaviors()</a></td> <td>Makes sure that the behaviors declared in <a href="yii-base-component.html#behaviors()-detail">behaviors()</a> are attached to this component.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="exists()"> <td><a href="yii-db-query.html#exists()-detail">exists()</a></td> <td>Returns a value indicating whether the query result contains any row of data.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="filterHaving()"> <td><a href="yii-db-query.html#filterHaving()-detail">filterHaving()</a></td> <td>Sets the HAVING part of the query but ignores <a href="yii-db-querytrait.html#isEmpty()-detail">empty operands</a>.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="filterWhere()"> <td><a href="yii-db-querytrait.html#filterWhere()-detail">filterWhere()</a></td> <td>Sets the WHERE part of the query but ignores <a href="yii-db-querytrait.html#isEmpty()-detail">empty operands</a>.</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="findFor()"> <td><a href="yii-db-activerelationtrait.html#findFor()-detail">findFor()</a></td> <td>Finds the related records for the specified primary record.</td> <td><a href="yii-db-activerelationtrait.html">yii\db\ActiveRelationTrait</a></td> </tr> <tr id="findWith()"> <td><a href="yii-db-activequerytrait.html#findWith()-detail">findWith()</a></td> <td>Finds records corresponding to one or multiple relations and populates them into the primary models.</td> <td><a href="yii-db-activequerytrait.html">yii\db\ActiveQueryTrait</a></td> </tr> <tr id="from()"> <td><a href="yii-db-query.html#from()-detail">from()</a></td> <td>Sets the FROM part of the query.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="getBehavior()"> <td><a href="yii-base-component.html#getBehavior()-detail">getBehavior()</a></td> <td>Returns the named behavior object.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="getBehaviors()"> <td><a href="yii-base-component.html#getBehaviors()-detail">getBehaviors()</a></td> <td>Returns all behaviors attached to this component.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="getTablesUsedInFrom()"> <td><a href="yii-db-activequery.html#getTablesUsedInFrom()-detail">getTablesUsedInFrom()</a></td> <td>Returns table names used in <a href="yii-db-query.html#from()-detail">from()</a> indexed by aliases.</td> <td><a href="yii-db-activequery.html">yii\db\ActiveQuery</a></td> </tr> <tr id="groupBy()"> <td><a href="yii-db-query.html#groupBy()-detail">groupBy()</a></td> <td>Sets the GROUP BY part of the query.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="hasEventHandlers()"> <td><a href="yii-base-component.html#hasEventHandlers()-detail">hasEventHandlers()</a></td> <td>Returns a value indicating whether there is any handler attached to the named event.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="hasMethod()"> <td><a href="yii-base-component.html#hasMethod()-detail">hasMethod()</a></td> <td>Returns a value indicating whether a method is defined.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="hasProperty()"> <td><a href="yii-base-component.html#hasProperty()-detail">hasProperty()</a></td> <td>Returns a value indicating whether a property is defined for this component.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="having()"> <td><a href="yii-db-query.html#having()-detail">having()</a></td> <td>Sets the HAVING part of the query.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="indexBy()"> <td><a href="yii-db-querytrait.html#indexBy()-detail">indexBy()</a></td> <td>Sets the <a href="yii-db-querytrait.html#indexBy()-detail">indexBy()</a> property.</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="init()"> <td><a href="yii-db-activequery.html#init()-detail">init()</a></td> <td>Initializes the object.</td> <td><a href="yii-db-activequery.html">yii\db\ActiveQuery</a></td> </tr> <tr id="innerJoin()"> <td><a href="yii-db-query.html#innerJoin()-detail">innerJoin()</a></td> <td>Appends an INNER JOIN part to the query.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="innerJoinWith()"> <td><a href="yii-db-activequery.html#innerJoinWith()-detail">innerJoinWith()</a></td> <td>Inner joins with the specified relations.</td> <td><a href="yii-db-activequery.html">yii\db\ActiveQuery</a></td> </tr> <tr id="inverseOf()"> <td><a href="yii-db-activerelationtrait.html#inverseOf()-detail">inverseOf()</a></td> <td>Sets the name of the relation that is the inverse of this relation.</td> <td><a href="yii-db-activerelationtrait.html">yii\db\ActiveRelationTrait</a></td> </tr> <tr id="join()"> <td><a href="yii-db-query.html#join()-detail">join()</a></td> <td>Appends a JOIN part to the query.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="joinWith()"> <td><a href="yii-db-activequery.html#joinWith()-detail">joinWith()</a></td> <td>Joins with the specified relations.</td> <td><a href="yii-db-activequery.html">yii\db\ActiveQuery</a></td> </tr> <tr id="leftJoin()"> <td><a href="yii-db-query.html#leftJoin()-detail">leftJoin()</a></td> <td>Appends a LEFT OUTER JOIN part to the query.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="limit()"> <td><a href="yii-db-querytrait.html#limit()-detail">limit()</a></td> <td>Sets the LIMIT part of the query.</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="max()"> <td><a href="yii-db-query.html#max()-detail">max()</a></td> <td>Returns the maximum of the specified column values.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="min()"> <td><a href="yii-db-query.html#min()-detail">min()</a></td> <td>Returns the minimum of the specified column values.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="off()"> <td><a href="yii-base-component.html#off()-detail">off()</a></td> <td>Detaches an existing event handler from this component.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="offset()"> <td><a href="yii-db-querytrait.html#offset()-detail">offset()</a></td> <td>Sets the OFFSET part of the query.</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="on()"> <td><a href="yii-base-component.html#on()-detail">on()</a></td> <td>Attaches an event handler to an event.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="onCondition()"> <td><a href="yii-db-activequery.html#onCondition()-detail">onCondition()</a></td> <td>Sets the ON condition for a relational query.</td> <td><a href="yii-db-activequery.html">yii\db\ActiveQuery</a></td> </tr> <tr id="one()"> <td><a href="yii-db-activequery.html#one()-detail">one()</a></td> <td>Executes query and returns a single row of result.</td> <td><a href="yii-db-activequery.html">yii\db\ActiveQuery</a></td> </tr> <tr id="orFilterHaving()"> <td><a href="yii-db-query.html#orFilterHaving()-detail">orFilterHaving()</a></td> <td>Adds an additional HAVING condition to the existing one but ignores <a href="yii-db-querytrait.html#isEmpty()-detail">empty operands</a>.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="orFilterWhere()"> <td><a href="yii-db-querytrait.html#orFilterWhere()-detail">orFilterWhere()</a></td> <td>Adds an additional WHERE condition to the existing one but ignores <a href="yii-db-querytrait.html#isEmpty()-detail">empty operands</a>.</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="orHaving()"> <td><a href="yii-db-query.html#orHaving()-detail">orHaving()</a></td> <td>Adds an additional HAVING condition to the existing one.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="orOnCondition()"> <td><a href="yii-db-activequery.html#orOnCondition()-detail">orOnCondition()</a></td> <td>Adds an additional ON condition to the existing one.</td> <td><a href="yii-db-activequery.html">yii\db\ActiveQuery</a></td> </tr> <tr id="orWhere()"> <td><a href="yii-db-querytrait.html#orWhere()-detail">orWhere()</a></td> <td>Adds an additional WHERE condition to the existing one.</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="orderBy()"> <td><a href="yii-db-querytrait.html#orderBy()-detail">orderBy()</a></td> <td>Sets the ORDER BY part of the query.</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="params()"> <td><a href="yii-db-query.html#params()-detail">params()</a></td> <td>Sets the parameters to be bound to the query.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="populate()"> <td><a href="yii-db-activequery.html#populate()-detail">populate()</a></td> <td>Converts the raw query results into the format as specified by this query.</td> <td><a href="yii-db-activequery.html">yii\db\ActiveQuery</a></td> </tr> <tr id="populateRelation()"> <td><a href="yii-db-activerelationtrait.html#populateRelation()-detail">populateRelation()</a></td> <td>Finds the related records and populates them into the primary models.</td> <td><a href="yii-db-activerelationtrait.html">yii\db\ActiveRelationTrait</a></td> </tr> <tr id="prepare()"> <td><a href="yii-db-activequery.html#prepare()-detail">prepare()</a></td> <td>Prepares for building SQL.</td> <td><a href="yii-db-activequery.html">yii\db\ActiveQuery</a></td> </tr> <tr id="rightJoin()"> <td><a href="yii-db-query.html#rightJoin()-detail">rightJoin()</a></td> <td>Appends a RIGHT OUTER JOIN part to the query.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="scalar()"> <td><a href="yii-db-query.html#scalar()-detail">scalar()</a></td> <td>Returns the query result as a scalar value.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="select()"> <td><a href="yii-db-query.html#select()-detail">select()</a></td> <td>Sets the SELECT part of the query.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="sum()"> <td><a href="yii-db-query.html#sum()-detail">sum()</a></td> <td>Returns the sum of the specified column values.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="trigger()"> <td><a href="yii-base-component.html#trigger()-detail">trigger()</a></td> <td>Triggers an event.</td> <td><a href="yii-base-component.html">yii\base\Component</a></td> </tr> <tr id="union()"> <td><a href="yii-db-query.html#union()-detail">union()</a></td> <td>Appends a SQL statement using UNION operator.</td> <td><a href="yii-db-query.html">yii\db\Query</a></td> </tr> <tr id="via()"> <td><a href="yii-db-activerelationtrait.html#via()-detail">via()</a></td> <td>Specifies the relation associated with the junction table.</td> <td><a href="yii-db-activerelationtrait.html">yii\db\ActiveRelationTrait</a></td> </tr> <tr id="viaTable()"> <td><a href="yii-db-activequery.html#viaTable()-detail">viaTable()</a></td> <td>Specifies the junction table for a relational query.</td> <td><a href="yii-db-activequery.html">yii\db\ActiveQuery</a></td> </tr> <tr id="where()"> <td><a href="yii-db-querytrait.html#where()-detail">where()</a></td> <td>Sets the WHERE part of the query.</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="with()"> <td><a href="yii-db-activequerytrait.html#with()-detail">with()</a></td> <td>Specifies the relations with which this query should be performed.</td> <td><a href="yii-db-activequerytrait.html">yii\db\ActiveQueryTrait</a></td> </tr> </table>   <h2>Protected Methods</h2>  <table> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="createModels()"> <td><a href="yii-db-activequerytrait.html#createModels()-detail">createModels()</a></td> <td>Converts found rows into model instances</td> <td><a href="yii-db-activequerytrait.html">yii\db\ActiveQueryTrait</a></td> </tr> <tr id="filterCondition()"> <td><a href="yii-db-querytrait.html#filterCondition()-detail">filterCondition()</a></td> <td>Removes <a href="yii-db-querytrait.html#isEmpty()-detail">empty operands</a> from the given query condition.</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="getPrimaryTableName()"> <td><a href="yii-db-activequery.html#getPrimaryTableName()-detail">getPrimaryTableName()</a></td> <td></td> <td><a href="yii-db-activequery.html">yii\db\ActiveQuery</a></td> </tr> <tr id="isEmpty()"> <td><a href="yii-db-querytrait.html#isEmpty()-detail">isEmpty()</a></td> <td>Returns a value indicating whether the give value is "empty".</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="normalizeOrderBy()"> <td><a href="yii-db-querytrait.html#normalizeOrderBy()-detail">normalizeOrderBy()</a></td> <td>Normalizes format of ORDER BY data</td> <td><a href="yii-db-querytrait.html">yii\db\QueryTrait</a></td> </tr> <tr id="queryScalar()"> <td><a href="yii-db-activequery.html#queryScalar()-detail">queryScalar()</a></td> <td>Queries a scalar value by setting <a href="yii-db-query.html#select()-detail">select()</a> first.</td> <td><a href="yii-db-activequery.html">yii\db\ActiveQuery</a></td> </tr> </table>    <h2 id="events">Events</h2>  <table> <colgroup> <col class="col-event"> <col class="col-type"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Event</th>
<th>Type</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="EVENT_INIT"> <td><a href="yii-db-activequery.html#EVENT_INIT-detail">EVENT_INIT</a></td> <td>\yii\db\Event</td> <td> An event that is triggered when the query is initialized via <a href="yii-db-activequery.html#init()-detail">init()</a>. </td> <td><a href="yii-db-activequery.html">yii\db\ActiveQuery</a></td> </tr> </table>   <h2 id="constants">Property Details</h2>  <h3 id="$joinWith-detail"> $joinWith <span class="detail-header-tag small"> public property </span> </h3>  <p>A list of relations that this query should be joined with</p>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="http://www.php.net/language.types.array">array</a></span> <a href="yii-db-activequery.html#%24joinWith-detail">$joinWith</a> = null</pre> <h3 id="$on-detail"> $on <span class="detail-header-tag small"> public property </span> </h3>  <p>The join condition to be used when this query is used in a relational context. The condition will be used in the ON part when <a href="yii-db-activequery.html#joinWith()-detail">yii\db\ActiveQuery::joinWith()</a> is called. Otherwise, the condition will be used in the WHERE part of a query. Please refer to <a href="yii-db-query.html#where()-detail">yii\db\Query::where()</a> on how to specify this parameter.</p> <p>See also <a href="yii-db-activequery.html#onCondition()-detail">onCondition()</a>.</p>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.array">array</a></span> <a href="yii-db-activequery.html#%24on-detail">$on</a> = null</pre> <h3 id="$sql-detail"> $sql <span class="detail-header-tag small"> public property </span> </h3>  <p>The SQL statement to be executed for retrieving AR records. This is set by <a href="yii-db-activerecord.html#findBySql()-detail">yii\db\ActiveRecord::findBySql()</a>.</p>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="http://www.php.net/language.types.string">string</a></span> <a href="yii-db-activequery.html#%24sql-detail">$sql</a> = null</pre> <h3 id="$tablesUsedInFrom-detail"> $tablesUsedInFrom <span class="detail-header-tag small"> public <em>read-only</em> property </span> </h3>  <p>Table names indexed by aliases</p>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="http://www.php.net/language.types.string">string</a>[]</span> <strong><a href="yii-db-activequery.html#getTablesUsedInFrom()-detail">getTablesUsedInFrom</a></strong> ( )</pre>  <h2>Method Details</h2> <div class="method-doc"> <h3 id="__construct()-detail"> __construct() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Constructor.</strong></p>  <table> <tr><th colspan="3">public void <strong><a href="yii-db-activequery.html#__construct()-detail">__construct</a></strong> ( $modelClass, $config = [] )</th></tr> <tr> <td>$modelClass</td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>
<p>The model class associated with this query</p> </td> </tr> <tr> <td>$config</td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>
<p>Configurations to be applied to the newly created query object</p> </td> </tr> </table>  <h3 id="alias()-detail"> alias() <span class="detail-header-tag small"> public method (available since version 2.0.7) </span> </h3>  <p><strong>Define an alias for the table defined in <a href="yii-db-activequerytrait.html#%24modelClass-detail">$modelClass</a>.</strong></p> <p>This method will adjust <a href="yii-db-query.html#from()-detail">from()</a> so that an already defined alias will be overwritten. If none was defined, <a href="yii-db-query.html#from()-detail">from()</a> will be populated with the given alias.</p>  <table> <tr><th colspan="3">public <a href="yii-db-activequery.html">$this</a> <strong><a href="yii-db-activequery.html#alias()-detail">alias</a></strong> ( $alias )</th></tr> <tr> <td>$alias</td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>
<p>The table alias.</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-db-activequery.html">$this</a></td> <td>
<p>The query object itself</p> </td> </tr> </table>  <h3 id="all()-detail"> all() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Executes query and returns all results as an array.</strong></p>  <table> <tr><th colspan="3">public <a href="http://www.php.net/language.types.array">array</a>|<a href="yii-db-activerecord.html">yii\db\ActiveRecord</a>[] <strong><a href="yii-db-activequery.html#all()-detail">all</a></strong> ( $db = null )</th></tr> <tr> <td>$db</td> <td><a href="yii-db-connection.html">yii\db\Connection</a></td> <td>
<p>The DB connection used to create the DB command. If null, the DB connection returned by <a href="yii-db-activequerytrait.html#%24modelClass-detail">$modelClass</a> will be used.</p> </td> </tr> <tr> <td>return</td> <td>
<a href="http://www.php.net/language.types.array">array</a>|<a href="yii-db-activerecord.html">yii\db\ActiveRecord</a>[]</td> <td>
<p>The query results. If the query results in nothing, an empty array will be returned.</p> </td> </tr> </table>  <h3 id="andOnCondition()-detail"> andOnCondition() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Adds an additional ON condition to the existing one.</strong></p> <p>The new condition and the existing one will be joined using the 'AND' operator.</p> <p>See also:</p>
<ul>
<li><a href="yii-db-activequery.html#onCondition()-detail">onCondition()</a></li>
<li><a href="yii-db-activequery.html#orOnCondition()-detail">orOnCondition()</a></li>
</ul>  <table> <tr><th colspan="3">public <a href="yii-db-activequery.html">$this</a> <strong><a href="yii-db-activequery.html#andOnCondition()-detail">andOnCondition</a></strong> ( $condition, $params = [] )</th></tr> <tr> <td>$condition</td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.array">array</a>
</td> <td>
<p>The new ON condition. Please refer to <a href="yii-db-querytrait.html#where()-detail">where()</a> on how to specify this parameter.</p> </td> </tr> <tr> <td>$params</td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>
<p>The parameters (name =&gt; value) to be bound to the query.</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-db-activequery.html">$this</a></td> <td>
<p>The query object itself</p> </td> </tr> </table>  <h3 id="createCommand()-detail"> createCommand() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Creates a DB command that can be used to execute this query.</strong></p>  <table> <tr><th colspan="3">public <a href="yii-db-command.html">yii\db\Command</a> <strong><a href="yii-db-activequery.html#createCommand()-detail">createCommand</a></strong> ( $db = null )</th></tr> <tr> <td>$db</td> <td>
<a href="yii-db-connection.html">yii\db\Connection</a>|<a href="http://www.php.net/language.types.null">null</a>
</td> <td>
<p>The DB connection used to create the DB command. If <code>null</code>, the DB connection returned by <a href="yii-db-activequerytrait.html#%24modelClass-detail">$modelClass</a> will be used.</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-db-command.html">yii\db\Command</a></td> <td>
<p>The created DB command instance.</p> </td> </tr> </table>  <h3 id="getPrimaryTableName()-detail"> getPrimaryTableName() <span class="detail-header-tag small"> protected method (available since version 2.0.12) </span> </h3>    <table> <tr><th colspan="3">protected <a href="http://www.php.net/language.types.string">string</a> <strong><a href="yii-db-activequery.html#getPrimaryTableName()-detail">getPrimaryTableName</a></strong> ( )</th></tr> <tr> <td>return</td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>
<p>Primary table name</p> </td> </tr> </table>  <h3 id="getTablesUsedInFrom()-detail"> getTablesUsedInFrom() <span class="detail-header-tag small"> public method (available since version 2.0.12) </span> </h3>  <p><strong>Returns table names used in <a href="yii-db-query.html#from()-detail">from()</a> indexed by aliases.</strong></p> <p>Both aliases and names are enclosed into {{ and }}.</p>  <table> <tr><th colspan="3">public <a href="http://www.php.net/language.types.string">string</a>[] <strong><a href="yii-db-activequery.html#getTablesUsedInFrom()-detail">getTablesUsedInFrom</a></strong> ( )</th></tr> <tr> <td>return</td> <td>
<a href="http://www.php.net/language.types.string">string</a>[]</td> <td>
<p>Table names indexed by aliases</p> </td> </tr> <tr> <td>throws</td> <td><a href="yii-base-invalidconfigexception.html">yii\base\InvalidConfigException</a></td> <td></td> </tr> </table>  <h3 id="init()-detail"> init() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Initializes the object.</strong></p> <p>This method is called at the end of the constructor. The default implementation will trigger an <a href="yii-db-activequery.html#EVENT_INIT-detail">EVENT_INIT</a> event. If you override this method, make sure you call the parent implementation at the end to ensure triggering of the event.</p>  <table> <tr><th colspan="3">public void <strong><a href="yii-db-activequery.html#init()-detail">init</a></strong> ( )</th></tr> </table>  <h3 id="innerJoinWith()-detail"> innerJoinWith() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Inner joins with the specified relations.</strong></p> <p>This is a shortcut method to <a href="yii-db-activequery.html#joinWith()-detail">joinWith()</a> with the join type set as "INNER JOIN". Please refer to <a href="yii-db-activequery.html#joinWith()-detail">joinWith()</a> for detailed usage of this method.</p> <p>See also <a href="yii-db-activequery.html#joinWith()-detail">joinWith()</a>.</p>  <table> <tr><th colspan="3">public <a href="yii-db-activequery.html">$this</a> <strong><a href="yii-db-activequery.html#innerJoinWith()-detail">innerJoinWith</a></strong> ( $with, $eagerLoading = true )</th></tr> <tr> <td>$with</td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.array">array</a>
</td> <td>
<p>The relations to be joined with.</p> </td> </tr> <tr> <td>$eagerLoading</td> <td>
<a href="http://www.php.net/language.types.boolean">boolean</a>|<a href="http://www.php.net/language.types.array">array</a>
</td> <td>
<p>Whether to eager loading the relations.</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-db-activequery.html">$this</a></td> <td>
<p>The query object itself</p> </td> </tr> </table>  <h3 id="joinWith()-detail"> joinWith() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Joins with the specified relations.</strong></p> <p>This method allows you to reuse existing relation definitions to perform JOIN queries. Based on the definition of the specified relation(s), the method will append one or multiple JOIN statements to the current query.</p> <p>If the <code>$eagerLoading</code> parameter is true, the method will also perform eager loading for the specified relations, which is equivalent to calling <a href="yii-db-activequerytrait.html#with()-detail">with()</a> using the specified relations.</p> <p>Note that because a JOIN query will be performed, you are responsible to disambiguate column names.</p> <p>This method differs from <a href="yii-db-activequerytrait.html#with()-detail">with()</a> in that it will build up and execute a JOIN SQL statement for the primary table. And when <code>$eagerLoading</code> is true, it will call <a href="yii-db-activequerytrait.html#with()-detail">with()</a> in addition with the specified relations.</p>  <table> <tr><th colspan="3">public <a href="yii-db-activequery.html">$this</a> <strong><a href="yii-db-activequery.html#joinWith()-detail">joinWith</a></strong> ( $with, $eagerLoading = true, $joinType = 'LEFT JOIN' )</th></tr> <tr> <td>$with</td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.array">array</a>
</td> <td>
<p>The relations to be joined. This can either be a string, representing a relation name or an array with the following semantics:</p> <ul> <li>Each array element represents a single relation.</li> <li>You may specify the relation name as the array key and provide an anonymous functions that can be used to modify the relation queries on-the-fly as the array value.</li> <li>If a relation query does not need modification, you may use the relation name as the array value.</li> </ul> <p>The relation name may optionally contain an alias for the relation table (e.g. <code>books b</code>).</p> <p>Sub-relations can also be specified, see <a href="yii-db-activequerytrait.html#with()-detail">with()</a> for the syntax.</p> <p>In the following you find some examples:</p> <pre data-language="php">// find all orders that contain books, and eager loading "books"
Order::find()-&gt;joinWith('books', true, 'INNER JOIN')-&gt;all();
// find all orders, eager loading "books", and sort the orders and books by the book names.
Order::find()-&gt;joinWith([
    'books' =&gt; function (\yii\db\ActiveQuery $query) {
        $query-&gt;orderBy('item.name');
    }
])-&gt;all();
// find all orders that contain books of the category 'Science fiction', using the alias "b" for the books table
Order::find()-&gt;joinWith(['books b'], true, 'INNER JOIN')-&gt;where(['b.category' =&gt; 'Science fiction'])-&gt;all();
</pre> <p>The alias syntax is available since version 2.0.7.</p> </td> </tr> <tr> <td>$eagerLoading</td> <td>
<a href="http://www.php.net/language.types.boolean">boolean</a>|<a href="http://www.php.net/language.types.array">array</a>
</td> <td>
<p>Whether to eager load the relations specified in <code>$with</code>. When this is a boolean, it applies to all relations specified in <code>$with</code>. Use an array to explicitly list which relations in <code>$with</code> need to be eagerly loaded. Defaults to <code>true</code>.</p> </td> </tr> <tr> <td>$joinType</td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.array">array</a>
</td> <td>
<p>The join type of the relations specified in <code>$with</code>. When this is a string, it applies to all relations specified in <code>$with</code>. Use an array in the format of <code>relationName =&gt; joinType</code> to specify different join types for different relations.</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-db-activequery.html">$this</a></td> <td>
<p>The query object itself</p> </td> </tr> </table>  <h3 id="onCondition()-detail"> onCondition() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Sets the ON condition for a relational query.</strong></p> <p>The condition will be used in the ON part when <a href="yii-db-activequery.html#joinWith()-detail">yii\db\ActiveQuery::joinWith()</a> is called. Otherwise, the condition will be used in the WHERE part of a query.</p> <p>Use this method to specify additional conditions when declaring a relation in the <a href="yii-db-activerecord.html">yii\db\ActiveRecord</a> class:</p> <pre data-language="php">public function getActiveUsers()
{
    return $this-&gt;hasMany(User::className(), ['id' =&gt; 'user_id'])
                -&gt;onCondition(['active' =&gt; true]);
}
</pre> <p>Note that this condition is applied in case of a join as well as when fetching the related records. Thus only fields of the related table can be used in the condition. Trying to access fields of the primary record will cause an error in a non-join-query.</p>  <table> <tr><th colspan="3">public <a href="yii-db-activequery.html">$this</a> <strong><a href="yii-db-activequery.html#onCondition()-detail">onCondition</a></strong> ( $condition, $params = [] )</th></tr> <tr> <td>$condition</td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.array">array</a>
</td> <td>
<p>The ON condition. Please refer to <a href="yii-db-query.html#where()-detail">yii\db\Query::where()</a> on how to specify this parameter.</p> </td> </tr> <tr> <td>$params</td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>
<p>The parameters (name =&gt; value) to be bound to the query.</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-db-activequery.html">$this</a></td> <td>
<p>The query object itself</p> </td> </tr> </table>  <h3 id="one()-detail"> one() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Executes query and returns a single row of result.</strong></p>  <table> <tr><th colspan="3">public <a href="yii-db-activerecord.html">yii\db\ActiveRecord</a>|<a href="http://www.php.net/language.types.array">array</a>|<a href="http://www.php.net/language.types.null">null</a> <strong><a href="yii-db-activequery.html#one()-detail">one</a></strong> ( $db = null )</th></tr> <tr> <td>$db</td> <td>
<a href="yii-db-connection.html">yii\db\Connection</a>|<a href="http://www.php.net/language.types.null">null</a>
</td> <td>
<p>The DB connection used to create the DB command. If <code>null</code>, the DB connection returned by <a href="yii-db-activequerytrait.html#%24modelClass-detail">$modelClass</a> will be used.</p> </td> </tr> <tr> <td>return</td> <td>
<a href="yii-db-activerecord.html">yii\db\ActiveRecord</a>|<a href="http://www.php.net/language.types.array">array</a>|<a href="http://www.php.net/language.types.null">null</a>
</td> <td>
<p>A single row of query result. Depending on the setting of <a href="yii-db-activequerytrait.html#asArray()-detail">asArray()</a>, the query result may be either an array or an ActiveRecord object. <code>null</code> will be returned if the query results in nothing.</p> </td> </tr> </table>  <h3 id="orOnCondition()-detail"> orOnCondition() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Adds an additional ON condition to the existing one.</strong></p> <p>The new condition and the existing one will be joined using the 'OR' operator.</p> <p>See also:</p>
<ul>
<li><a href="yii-db-activequery.html#onCondition()-detail">onCondition()</a></li>
<li><a href="yii-db-activequery.html#andOnCondition()-detail">andOnCondition()</a></li>
</ul>  <table> <tr><th colspan="3">public <a href="yii-db-activequery.html">$this</a> <strong><a href="yii-db-activequery.html#orOnCondition()-detail">orOnCondition</a></strong> ( $condition, $params = [] )</th></tr> <tr> <td>$condition</td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="http://www.php.net/language.types.array">array</a>
</td> <td>
<p>The new ON condition. Please refer to <a href="yii-db-querytrait.html#where()-detail">where()</a> on how to specify this parameter.</p> </td> </tr> <tr> <td>$params</td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>
<p>The parameters (name =&gt; value) to be bound to the query.</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-db-activequery.html">$this</a></td> <td>
<p>The query object itself</p> </td> </tr> </table>  <h3 id="populate()-detail"> populate() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Converts the raw query results into the format as specified by this query.</strong></p> <p>This method is internally used to convert the data fetched from database into the format as required by this query.</p>  <table> <tr><th colspan="3">public <a href="http://www.php.net/language.types.array">array</a> <strong><a href="yii-db-activequery.html#populate()-detail">populate</a></strong> ( $rows )</th></tr> <tr> <td>$rows</td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>
<p>The raw query result from database</p> </td> </tr> <tr> <td>return</td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>
<p>The converted query result</p> </td> </tr> </table>  <h3 id="prepare()-detail"> prepare() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Prepares for building SQL.</strong></p> <p>This method is called by <a href="yii-db-querybuilder.html">yii\db\QueryBuilder</a> when it starts to build SQL from a query object. You may override this method to do some final preparation work when converting a query into a SQL statement.</p>  <table> <tr><th colspan="3">public <a href="yii-db-activequery.html">$this</a> <strong><a href="yii-db-activequery.html#prepare()-detail">prepare</a></strong> ( $builder )</th></tr> <tr> <td>$builder</td> <td><a href="yii-db-querybuilder.html">yii\db\QueryBuilder</a></td> <td></td> </tr> <tr> <td>return</td> <td><a href="yii-db-activequery.html">$this</a></td> <td>
<p>A prepared query instance which will be used by <a href="yii-db-querybuilder.html">yii\db\QueryBuilder</a> to build the SQL</p> </td> </tr> </table>  <h3 id="queryScalar()-detail"> queryScalar() <span class="detail-header-tag small"> protected method </span> </h3>  <p><strong>Queries a scalar value by setting <a href="yii-db-query.html#select()-detail">select()</a> first.</strong></p> <p>Restores the value of select to make this query reusable.</p>  <table> <tr><th colspan="3">protected <a href="http://www.php.net/language.types.boolean">boolean</a>|<a href="http://www.php.net/language.types.string">string</a> <strong><a href="yii-db-activequery.html#queryScalar()-detail">queryScalar</a></strong> ( $selectExpression, $db )</th></tr> <tr> <td>$selectExpression</td> <td>
<a href="http://www.php.net/language.types.string">string</a>|<a href="yii-db-expression.html">yii\db\Expression</a>
</td> <td></td> </tr> <tr> <td>$db</td> <td>
<a href="yii-db-connection.html">yii\db\Connection</a>|<a href="http://www.php.net/language.types.null">null</a>
</td> <td></td> </tr> </table>  <h3 id="viaTable()-detail"> viaTable() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Specifies the junction table for a relational query.</strong></p> <p>Use this method to specify a junction table when declaring a relation in the <a href="yii-db-activerecord.html">yii\db\ActiveRecord</a> class:</p> <pre data-language="php">public function getItems()
{
    return $this-&gt;hasMany(Item::className(), ['id' =&gt; 'item_id'])
                -&gt;viaTable('order_item', ['order_id' =&gt; 'id']);
}
</pre> <p>See also <a href="yii-db-activerelationtrait.html#via()-detail">via()</a>.</p>  <table> <tr><th colspan="3">public <a href="yii-db-activequery.html">$this</a> <strong><a href="yii-db-activequery.html#viaTable()-detail">viaTable</a></strong> ( $tableName, $link, <a href="http://www.php.net/language.types.callable">callable</a> $callable = null )</th></tr> <tr> <td>$tableName</td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>
<p>The name of the junction table.</p> </td> </tr> <tr> <td>$link</td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>
<p>The link between the junction table and the table associated with <a href="yii-db-activerelationtrait.html#%24primaryModel-detail">$primaryModel</a>. The keys of the array represent the columns in the junction table, and the values represent the columns in the <a href="yii-db-activerelationtrait.html#%24primaryModel-detail">$primaryModel</a> table.</p> </td> </tr> <tr> <td>$callable</td> <td><a href="http://www.php.net/language.types.callable">callable</a></td> <td>
<p>A PHP callback for customizing the relation associated with the junction table. Its signature should be <code>function($query)</code>, where <code>$query</code> is the query to be customized.</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-db-activequery.html">$this</a></td> <td>
<p>The query object itself</p> </td> </tr> </table>  </div> <h2>Event Details</h2> <div class="event-doc"> <h3 id="EVENT_INIT-detail"> EVENT_INIT <span class="detail-header-tag small"> event of type \yii\db\Event </span> </h3>  <p>An event that is triggered when the query is initialized via <a href="yii-db-activequery.html#init()-detail">init()</a>.</p>  </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2008&ndash;2017 by Yii Software LLC<br>Licensed under the three clause BSD license.<br>
    <a href="http://www.yiiframework.com/doc-2.0/yii-db-activequery.html" class="_attribution-link">http://www.yiiframework.com/doc-2.0/yii-db-activequery.html</a>
  </p>
</div>
