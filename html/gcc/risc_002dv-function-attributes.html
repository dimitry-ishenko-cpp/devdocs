<h1 class="subsection" id="RISC_002dV-Function-Attributes-1">6.33.25 RISC-V Function Attributes</h1> <div class="subsection-level-extent" id="RISC_002dV-Function-Attributes">    <p>These function attributes are supported by the RISC-V back end: </p> <dl class="table"> <dt>
<span><code class="code">naked</code></span>
</dt> <dd>
<p>This attribute allows the compiler to construct the requisite function declaration, while allowing the body of the function to be assembly code. The specified function will not have prologue/epilogue sequences generated by the compiler. Only basic <code class="code">asm</code> statements can safely be included in naked functions (see <a class="pxref" href="basic-asm.html">Basic Asm â€” Assembler Instructions Without Operands</a>). While using extended <code class="code">asm</code> or a mixture of basic <code class="code">asm</code> and C code may appear to work, they cannot be depended upon to work reliably and are not supported. </p> </dd> <dt>
<span><code class="code">interrupt</code></span>
</dt> <dd>
<p>Use this attribute to indicate that the specified function is an interrupt handler. The compiler generates function entry and exit sequences suitable for use in an interrupt handler when this attribute is present. </p> <p>You can specify the kind of interrupt to be handled by adding an optional parameter to the interrupt attribute like this: </p> <div class="example smallexample"> <pre class="example-preformatted" data-language="cpp">void f (void) __attribute__ ((interrupt ("user")));</pre>
</div> <p>Permissible values for this parameter are <code class="code">user</code>, <code class="code">supervisor</code>, and <code class="code">machine</code>. If there is no parameter, then it defaults to <code class="code">machine</code>. </p> </dd> <dt>
<span><code class="code">riscv_vector_cc</code></span>
</dt> <dd>
<p>Use this attribute to force the function to use the vector calling convention variant. </p> <div class="example smallexample"> <pre class="example-preformatted" data-language="cpp">void foo() __attribute__((riscv_vector_cc));
[[riscv::vector_cc]] void foo(); // For C++11 and C23</pre>
</div> </dd> </dl> <p>The following target-specific function attributes are available for the RISC-V target. For the most part, these options mirror the behavior of similar command-line options (see <a class="pxref" href="risc_002dv-options.html">RISC-V Options</a>), but on a per-function basis. </p> <dl class="table"> <dt>
<span><code class="code">arch=</code></span>
</dt> <dd>
<p>Specifies the architecture version and architectural extensions to use for this function. The behavior and permissible arguments are the same as for the <samp class="option">-march=</samp> command-line option, in addtion, it also support extension enablement list, a list of extension name and prefixed with <code class="code">+</code>, like <code class="code">arch=+zba</code> means enable <code class="code">zba</code> extension. Multiple extension can be enabled by separating them with a comma. For example: <code class="code">arch=+zba,+zbb</code>. </p> </dd> <dt>
<span><code class="code">tune=</code></span>
</dt> <dd>
<p>Specifies the core for which to tune the performance of this function. The behavior and permissible arguments are the same as for the <samp class="option">-mtune=</samp> command-line option. </p> </dd> <dt>
<span><code class="code">cpu=</code></span>
</dt> <dd>
<p>Specifies the core for which to tune the performance of this function and also whose architectural features to use. The behavior and valid arguments are the same as for the <samp class="option">-mcpu=</samp> command-line option. </p> </dd> </dl> <p>The above target attributes can be specified as follows: </p> <div class="example smallexample"> <pre class="example-preformatted" data-language="cpp">__attribute__((target("<var class="var">attr-string</var>")))
int
f (int a)
{
  return a + 5;
}</pre>
</div> <p>where <code class="code"><var class="var">attr-string</var></code> is one of the attribute strings specified above. </p> <p>Multiple target function attributes can be specified by separating them with a semicolon. For example: </p>
<div class="example smallexample"> <pre class="example-preformatted" data-language="cpp">__attribute__((target("arch=+zba,+zbb;tune=rocket")))
int
foo (int a)
{
  return a + 5;
}</pre>
</div> <p>is valid and compiles function <code class="code">foo</code> with <code class="code">zba</code> and <code class="code">zbb</code> extensions and tunes it for <code class="code">rocket</code>. </p> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Free Software Foundation<br>Licensed under the GNU Free Documentation License, Version 1.3.<br>
    <a href="https://gcc.gnu.org/onlinedocs/gcc-14.2.0/gcc/RISC_002dV-Function-Attributes.html" class="_attribution-link">https://gcc.gnu.org/onlinedocs/gcc-14.2.0/gcc/RISC_002dV-Function-Attributes.html</a>
  </p>
</div>
