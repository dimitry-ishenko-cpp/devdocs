<h1 class="devsite-page-title" tabindex="-1"> tf.experimental.RowPartition </h1> <devsite-feature-tooltip ack-key="AckCollectionsBookmarkTooltipDismiss" analytics-category="Site-Wide Custom Events" analytics-action-show="Callout Profile displayed" analytics-action-close="Callout Profile dismissed" analytics-label="Create Collection Callout" class="devsite-page-bookmark-tooltip nocontent" dismiss-button="true" id="devsite-collections-dropdown" dismiss-button-text="Dismiss" close-button-text="Got it">    </devsite-feature-tooltip> <div class="devsite-page-title-meta"><devsite-view-release-notes></devsite-view-release-notes></div>     <div itemscope itemtype="http://developers.google.com/ReferenceObject"> <meta itemprop="name" content="tf.experimental.RowPartition"> <meta itemprop="path" content="Stable"> <meta itemprop="property" content="__init__"> <meta itemprop="property" content="from_row_lengths"> <meta itemprop="property" content="from_row_limits"> <meta itemprop="property" content="from_row_splits"> <meta itemprop="property" content="from_row_starts"> <meta itemprop="property" content="from_uniform_row_length"> <meta itemprop="property" content="from_value_rowids"> <meta itemprop="property" content="is_uniform"> <meta itemprop="property" content="nrows"> <meta itemprop="property" content="nvals"> <meta itemprop="property" content="offsets_in_rows"> <meta itemprop="property" content="row_lengths"> <meta itemprop="property" content="row_limits"> <meta itemprop="property" content="row_splits"> <meta itemprop="property" content="row_starts"> <meta itemprop="property" content="uniform_row_length"> <meta itemprop="property" content="value_rowids"> <meta itemprop="property" content="with_dtype"> </div>   <p>Partitioning of a sequence of values into contiguous subsequences ("rows").</p> <section class="expandable"> <h4 class="showalways" id="view-aliases" data-text="View aliases" tabindex="-1">View aliases</h4> <p> <b>Compat aliases for migration</b> </p>
<p>See <a href="https://www.tensorflow.org/guide/migrate">Migration guide</a> for more details.</p> <p><a href="rowpartition.html"><code translate="no" dir="ltr">tf.compat.v1.experimental.RowPartition</code></a></p> </section> 
<devsite-code><pre class="devsite-click-to-copy tfo-signature-link" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">tf.experimental.RowPartition(
    row_splits,
    row_lengths=None,
    value_rowids=None,
    nrows=None,
    uniform_row_length=None,
    nvals=None,
    internal=False
)
</pre></devsite-code> <h3 id="used-in-the-notebooks" data-text="Used in the notebooks" tabindex="-1">Used in the notebooks</h3> <table class="vertical-rules"> <thead> <tr> <th>Used in the guide</th> </tr> </thead> <tbody> <tr> <td> <ul> <li><a href="https://www.tensorflow.org/guide/ragged_tensor">Ragged tensors</a></li> </ul> </td> </tr> </tbody> </table> <p>A <code translate="no" dir="ltr">RowPartition</code> describes how a sequence with <code translate="no" dir="ltr">nvals</code> items should be divided into <code translate="no" dir="ltr">nrows</code> contiguous subsequences ("rows"). For example, a <code translate="no" dir="ltr">RowPartition</code> could be used to partition the vector <code translate="no" dir="ltr">[1, 2, 3, 4, 5]</code> into subsequences <code translate="no" dir="ltr">[[1, 2], [3], [], [4, 5]]</code>. Note that <code translate="no" dir="ltr">RowPartition</code> stores information about how values are partitioned, but does not include the partitioned values themselves. <a href="../raggedtensor.html"><code translate="no" dir="ltr">tf.RaggedTensor</code></a> is used to pair a <code translate="no" dir="ltr">values</code> tensor with one or more <code translate="no" dir="ltr">RowPartition</code>s, providing a complete encoding for a ragged tensor (i.e. a tensor with variable-length dimensions).</p> <p><code translate="no" dir="ltr">RowPartition</code>s may be defined using several different schemes:</p> <ul> <li><p><code translate="no" dir="ltr">row_lengths</code>: an integer vector with shape <code translate="no" dir="ltr">[nrows]</code>, which specifies the length of each row.</p></li> <li><p><code translate="no" dir="ltr">row_splits</code>: an integer vector with shape <code translate="no" dir="ltr">[nrows+1]</code>, specifying the "split points" between each row.</p></li> <li><p><code translate="no" dir="ltr">row_starts</code>: an integer vector with shape <code translate="no" dir="ltr">[nrows]</code>, which specifies the start offset for each row. Equivalent to <code translate="no" dir="ltr">row_splits[:-1]</code>.</p></li> <li><p><code translate="no" dir="ltr">row_limits</code>: an integer vector with shape <code translate="no" dir="ltr">[nrows]</code>, which specifies the stop offset for each row. Equivalent to <code translate="no" dir="ltr">row_splits[1:]</code>.</p></li> <li><p><code translate="no" dir="ltr">value_rowids</code> is an integer vector with shape <code translate="no" dir="ltr">[nvals]</code>, corresponding one-to-one with sequence values, which specifies the row that each value belongs to. If the partition has empty trailing rows, then <code translate="no" dir="ltr">nrows</code> must also be specified.</p></li> <li><p><code translate="no" dir="ltr">uniform_row_length</code> is an integer scalar, specifying the length of every row. This scheme may only be used if all rows have the same length.</p></li> </ul> <p>For example, the following <code translate="no" dir="ltr">RowPartition</code>s all represent the partitioning of 8 values into 5 sublists as follows: <code translate="no" dir="ltr">[[*, *, *, *], [], [*, *, *], [*], []]</code>.</p> 
<devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">p1 = RowPartition.from_row_lengths([4, 0, 3, 1, 0])
p2 = RowPartition.from_row_splits([0, 4, 4, 7, 8, 8])
p3 = RowPartition.from_row_starts([0, 4, 4, 7, 8], nvals=8)
p4 = RowPartition.from_row_limits([4, 4, 7, 8, 8])
p5 = RowPartition.from_value_rowids([0, 0, 0, 0, 2, 2, 2, 3], nrows=5)</pre></devsite-code> <p>For more information about each scheme, see the documentation for the its factory method. For additional examples, see the documentation on <a href="../raggedtensor.html"><code translate="no" dir="ltr">tf.RaggedTensor</code></a>.</p> <h3 id="precomputed_encodings" data-text="Precomputed Encodings" tabindex="-1">Precomputed Encodings</h3> <p><code translate="no" dir="ltr">RowPartition</code> always stores at least one encoding of the partitioning, but it can be configured to cache additional encodings as well. This can avoid unnecessary recomputation in eager mode. (In graph mode, optimizations such as common subexpression elimination will typically prevent these unnecessary recomputations.) To check which encodings are precomputed, use <code translate="no" dir="ltr">RowPartition.has_precomputed_&lt;encoding&gt;</code>. To cache an additional encoding, use <code translate="no" dir="ltr">RowPartition.with_precomputed_&lt;encoding&gt;</code>.</p>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Args</th></tr> 
<tr> <td> <code translate="no" dir="ltr">row_splits</code> </td> <td> A 1-D integer tensor with shape <code translate="no" dir="ltr">[nrows+1]</code>. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">row_lengths</code> </td> <td> A 1-D integer tensor with shape <code translate="no" dir="ltr">[nrows]</code> </td> </tr>
<tr> <td> <code translate="no" dir="ltr">value_rowids</code> </td> <td> A 1-D integer tensor with shape <code translate="no" dir="ltr">[nvals]</code>. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">nrows</code> </td> <td> A 1-D integer scalar tensor. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">uniform_row_length</code> </td> <td> A scalar tensor. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">nvals</code> </td> <td> A scalar tensor. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">internal</code> </td> <td> Private key value, required to ensure that this private constructor is <em>only</em> called from the factory methods. </td> </tr> </table>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Raises</th></tr> 
<tr> <td> <code translate="no" dir="ltr">TypeError</code> </td> <td> If a row partitioning tensor has an inappropriate dtype. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">TypeError</code> </td> <td> If exactly one row partitioning argument was not specified. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">ValueError</code> </td> <td> If a row partitioning tensor has an inappropriate shape. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">ValueError</code> </td> <td> If multiple partitioning arguments are specified. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">ValueError</code> </td> <td> If nrows is specified but value_rowids is not None. </td> </tr> </table>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Attributes</th></tr> 
<tr> <td> <code translate="no" dir="ltr">dtype</code> </td> <td> The <code translate="no" dir="ltr">DType</code> used to encode the row partition (either int32 or int64). </td> </tr>
<tr> <td> <code translate="no" dir="ltr">static_nrows</code> </td> <td> The number of rows in this partition, if statically known. 
<devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">self.row_lengths().shape == [self.static_nrows]
self.row_starts().shape == [self.static_nrows]
self.row_limits().shape == [self.static_nrows]
self.row_splits().shape == [self.static_nrows + 1]
</pre></devsite-code> 
</td> </tr>
<tr> <td> <code translate="no" dir="ltr">static_nvals</code> </td> <td> The number of values in this partition, if statically known. 
<devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">self.value_rowids().shape == [self.static_vals]
</pre></devsite-code> 
</td> </tr>
<tr> <td> <code translate="no" dir="ltr">static_uniform_row_length</code> </td> <td> The number of values in each row of this partition, if statically known. </td> </tr> </table> <h2 id="methods" data-text="Methods" tabindex="-1">Methods</h2> <h3 id="from_row_lengths" data-text="from_row_lengths" tabindex="-1"><code translate="no" dir="ltr">from_row_lengths</code></h3> <p><a target="_blank" class="external" href="https://github.com/tensorflow/tensorflow/blob/v2.16.1/tensorflow/python/ops/ragged/row_partition.py#L378-L431">View source</a></p> 
<devsite-code><pre class="devsite-click-to-copy tfo-signature-link" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">@classmethod
from_row_lengths(
    row_lengths, validate=True, dtype=None, dtype_hint=None
)
</pre></devsite-code> <p>Creates a <code translate="no" dir="ltr">RowPartition</code> with rows partitioned by <code translate="no" dir="ltr">row_lengths</code>.</p> <p>This <code translate="no" dir="ltr">RowPartition</code> divides a sequence <code translate="no" dir="ltr">values</code> into rows by indicating the length of each row:</p> 
<devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">partitioned_rows = [[values.pop(0) for _ in range(length)]
                    for length in row_lengths]
</pre></devsite-code>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Args</th></tr> 
<tr> <td> <code translate="no" dir="ltr">row_lengths</code> </td> <td> A 1-D integer tensor with shape <code translate="no" dir="ltr">[nrows]</code>. Must be nonnegative. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">validate</code> </td> <td> If true, then use assertions to check that the arguments form a valid <code translate="no" dir="ltr">RowPartition</code>. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">dtype</code> </td> <td> Optional dtype for the RowPartition. If missing, the type is inferred from the type of <code translate="no" dir="ltr">row_lengths</code>, dtype_hint, or tf.int64. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">dtype_hint</code> </td> <td> Optional dtype for the RowPartition, used when dtype is None. In some cases, a caller may not have a dtype in mind when converting to a tensor, so dtype_hint can be used as a soft preference. If the conversion to <code translate="no" dir="ltr">dtype_hint</code> is not possible, this argument has no effect. </td> </tr> </table>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Returns</th></tr> <tr class="alt"> <td colspan="2"> A <code translate="no" dir="ltr">RowPartition</code>. </td> </tr> 
</table> <h3 id="from_row_limits" data-text="from_row_limits" tabindex="-1"><code translate="no" dir="ltr">from_row_limits</code></h3> <p><a target="_blank" class="external" href="https://github.com/tensorflow/tensorflow/blob/v2.16.1/tensorflow/python/ops/ragged/row_partition.py#L485-L529">View source</a></p> 
<devsite-code><pre class="devsite-click-to-copy tfo-signature-link" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">@classmethod
from_row_limits(
    row_limits, validate=True, dtype=None, dtype_hint=None
)
</pre></devsite-code> <p>Creates a <code translate="no" dir="ltr">RowPartition</code> with rows partitioned by <code translate="no" dir="ltr">row_limits</code>.</p> <p>Equivalent to: <code translate="no" dir="ltr">from_row_splits(values, concat([0, row_limits], axis=0))</code>.</p>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Args</th></tr> 
<tr> <td> <code translate="no" dir="ltr">row_limits</code> </td> <td> A 1-D integer tensor with shape <code translate="no" dir="ltr">[nrows]</code>. Must be sorted in ascending order. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">validate</code> </td> <td> If true, then use assertions to check that the arguments form a valid <code translate="no" dir="ltr">RowPartition</code>. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">dtype</code> </td> <td> Optional dtype for the RowPartition. If missing, the type is inferred from the type of <code translate="no" dir="ltr">row_limits</code>, dtype_hint, or tf.int64. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">dtype_hint</code> </td> <td> Optional dtype for the RowPartition, used when dtype is None. In some cases, a caller may not have a dtype in mind when converting to a tensor, so dtype_hint can be used as a soft preference. If the conversion to <code translate="no" dir="ltr">dtype_hint</code> is not possible, this argument has no effect. </td> </tr> </table>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Returns</th></tr> <tr class="alt"> <td colspan="2"> A <code translate="no" dir="ltr">RowPartition</code>. </td> </tr> 
</table> <h3 id="from_row_splits" data-text="from_row_splits" tabindex="-1"><code translate="no" dir="ltr">from_row_splits</code></h3> <p><a target="_blank" class="external" href="https://github.com/tensorflow/tensorflow/blob/v2.16.1/tensorflow/python/ops/ragged/row_partition.py#L315-L376">View source</a></p> 
<devsite-code><pre class="devsite-click-to-copy tfo-signature-link" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">@classmethod
from_row_splits(
    row_splits, validate=True, dtype=None, dtype_hint=None
)
</pre></devsite-code> <p>Creates a <code translate="no" dir="ltr">RowPartition</code> with rows partitioned by <code translate="no" dir="ltr">row_splits</code>.</p> <p>This <code translate="no" dir="ltr">RowPartition</code> divides a sequence <code translate="no" dir="ltr">values</code> into rows by indicating where each row begins and ends:</p> 
<devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">partitioned_rows = []
for i in range(len(row_splits) - 1):
  row_start = row_splits[i]
  row_end = row_splits[i + 1]
  partitioned_rows.append(values[row_start:row_end])
</pre></devsite-code>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Args</th></tr> 
<tr> <td> <code translate="no" dir="ltr">row_splits</code> </td> <td> A 1-D integer tensor with shape <code translate="no" dir="ltr">[nrows+1]</code>. Must not be empty, and must be sorted in ascending order. <code translate="no" dir="ltr">row_splits[0]</code> must be zero. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">validate</code> </td> <td> If true, then use assertions to check that the arguments form a valid <code translate="no" dir="ltr">RowPartition</code>. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">dtype</code> </td> <td> Optional dtype for the RowPartition. If missing, the type is inferred from the type of <code translate="no" dir="ltr">row_splits</code>, dtype_hint, or tf.int64. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">dtype_hint</code> </td> <td> Optional dtype for the RowPartition, used when dtype is None. In some cases, a caller may not have a dtype in mind when converting to a tensor, so dtype_hint can be used as a soft preference. If the conversion to <code translate="no" dir="ltr">dtype_hint</code> is not possible, this argument has no effect. </td> </tr> </table>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Returns</th></tr> <tr class="alt"> <td colspan="2"> A <code translate="no" dir="ltr">RowPartition</code>. </td> </tr> 
</table>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Raises</th></tr> 
<tr> <td> <code translate="no" dir="ltr">ValueError</code> </td> <td> If <code translate="no" dir="ltr">row_splits</code> is an empty list. </td> </tr> </table> <h3 id="from_row_starts" data-text="from_row_starts" tabindex="-1"><code translate="no" dir="ltr">from_row_starts</code></h3> <p><a target="_blank" class="external" href="https://github.com/tensorflow/tensorflow/blob/v2.16.1/tensorflow/python/ops/ragged/row_partition.py#L433-L483">View source</a></p> 
<devsite-code><pre class="devsite-click-to-copy tfo-signature-link" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">@classmethod
from_row_starts(
    row_starts, nvals, validate=True, dtype=None, dtype_hint=None
)
</pre></devsite-code> <p>Creates a <code translate="no" dir="ltr">RowPartition</code> with rows partitioned by <code translate="no" dir="ltr">row_starts</code>.</p> <p>Equivalent to: <code translate="no" dir="ltr">from_row_splits(concat([row_starts, nvals], axis=0))</code>.</p>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Args</th></tr> 
<tr> <td> <code translate="no" dir="ltr">row_starts</code> </td> <td> A 1-D integer tensor with shape <code translate="no" dir="ltr">[nrows]</code>. Must be nonnegative and sorted in ascending order. If <code translate="no" dir="ltr">nrows&gt;0</code>, then <code translate="no" dir="ltr">row_starts[0]</code> must be zero. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">nvals</code> </td> <td> A scalar tensor indicating the number of values. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">validate</code> </td> <td> If true, then use assertions to check that the arguments form a valid <code translate="no" dir="ltr">RowPartition</code>. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">dtype</code> </td> <td> Optional dtype for the RowPartition. If missing, the type is inferred from the type of <code translate="no" dir="ltr">row_starts</code>, dtype_hint, or tf.int64. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">dtype_hint</code> </td> <td> Optional dtype for the RowPartition, used when dtype is None. In some cases, a caller may not have a dtype in mind when converting to a tensor, so dtype_hint can be used as a soft preference. If the conversion to <code translate="no" dir="ltr">dtype_hint</code> is not possible, this argument has no effect. </td> </tr> </table>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Returns</th></tr> <tr class="alt"> <td colspan="2"> A <code translate="no" dir="ltr">RowPartition</code>. </td> </tr> 
</table> <h3 id="from_uniform_row_length" data-text="from_uniform_row_length" tabindex="-1"><code translate="no" dir="ltr">from_uniform_row_length</code></h3> <p><a target="_blank" class="external" href="https://github.com/tensorflow/tensorflow/blob/v2.16.1/tensorflow/python/ops/ragged/row_partition.py#L531-L667">View source</a></p> 
<devsite-code><pre class="devsite-click-to-copy tfo-signature-link" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">@classmethod
from_uniform_row_length(
    uniform_row_length,
    nvals=None,
    nrows=None,
    validate=True,
    dtype=None,
    dtype_hint=None
)
</pre></devsite-code> <p>Creates a <code translate="no" dir="ltr">RowPartition</code> with rows partitioned by <code translate="no" dir="ltr">uniform_row_length</code>.</p> <p>This <code translate="no" dir="ltr">RowPartition</code> divides a sequence <code translate="no" dir="ltr">values</code> into rows that all have the same length:</p> 
<devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">partitioned_rows = [[values.pop(0) for _ in range(uniform_row_length)]
         for _ in range(nrows)]
</pre></devsite-code> <p>Note that either or both of nvals and nrows must be specified.</p>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Args</th></tr> 
<tr> <td> <code translate="no" dir="ltr">uniform_row_length</code> </td> <td> A scalar integer tensor. Must be nonnegative. The size of the outer axis of <code translate="no" dir="ltr">values</code> must be evenly divisible by <code translate="no" dir="ltr">uniform_row_length</code>. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">nvals</code> </td> <td> a non-negative scalar integer tensor for the number of values. Must be specified if nrows is not specified. If not specified, defaults to uniform_row_length*nrows </td> </tr>
<tr> <td> <code translate="no" dir="ltr">nrows</code> </td> <td> The number of rows in the constructed RowPartition. If not specified, then it defaults to <code translate="no" dir="ltr">nvals/uniform_row_length</code> (or <code translate="no" dir="ltr">0</code> if <code translate="no" dir="ltr">uniform_row_length==0</code>). <code translate="no" dir="ltr">nrows</code> only needs to be specified if <code translate="no" dir="ltr">uniform_row_length</code> might be zero. <code translate="no" dir="ltr">uniform_row_length*nrows</code> must be <code translate="no" dir="ltr">nvals</code>. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">validate</code> </td> <td> If true, then use assertions to check that the arguments form a valid <code translate="no" dir="ltr">RowPartition</code>. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">dtype</code> </td> <td> Optional dtype for the RowPartition. If missing, the type is inferred from the type of <code translate="no" dir="ltr">uniform_row_length</code>, dtype_hint, or tf.int64. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">dtype_hint</code> </td> <td> Optional dtype for the RowPartition, used when dtype is None. In some cases, a caller may not have a dtype in mind when converting to a tensor, so dtype_hint can be used as a soft preference. If the conversion to <code translate="no" dir="ltr">dtype_hint</code> is not possible, this argument has no effect. </td> </tr> </table>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Returns</th></tr> <tr class="alt"> <td colspan="2"> A <code translate="no" dir="ltr">RowPartition</code>. </td> </tr> 
</table> <h3 id="from_value_rowids" data-text="from_value_rowids" tabindex="-1"><code translate="no" dir="ltr">from_value_rowids</code></h3> <p><a target="_blank" class="external" href="https://github.com/tensorflow/tensorflow/blob/v2.16.1/tensorflow/python/ops/ragged/row_partition.py#L195-L313">View source</a></p> 
<devsite-code><pre class="devsite-click-to-copy tfo-signature-link" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">@classmethod
from_value_rowids(
    value_rowids, nrows=None, validate=True, dtype=None, dtype_hint=None
)
</pre></devsite-code> <p>Creates a <code translate="no" dir="ltr">RowPartition</code> with rows partitioned by <code translate="no" dir="ltr">value_rowids</code>.</p> <p>This <code translate="no" dir="ltr">RowPartition</code> divides a sequence <code translate="no" dir="ltr">values</code> into rows by specifying which row each value should be added to:</p> 
<devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">partitioned_rows = [[] for _ in nrows]
for (value, rowid) in zip(values, value_rowids):
  partitioned_rows[rowid].append(value)
</pre></devsite-code>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Args</th></tr> 
<tr> <td> <code translate="no" dir="ltr">value_rowids</code> </td> <td> A 1-D integer tensor with shape <code translate="no" dir="ltr">[nvals]</code>, which corresponds one-to-one with <code translate="no" dir="ltr">values</code>, and specifies each value's row index. Must be nonnegative, and must be sorted in ascending order. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">nrows</code> </td> <td> An integer scalar specifying the number of rows. This should be specified if the <code translate="no" dir="ltr">RowPartition</code> may containing empty training rows. Must be greater than <code translate="no" dir="ltr">value_rowids[-1]</code> (or greater than or equal to zero if <code translate="no" dir="ltr">value_rowids</code> is empty). Defaults to <code translate="no" dir="ltr">value_rowids[-1] + 1</code> (or zero if <code translate="no" dir="ltr">value_rowids</code> is empty). </td> </tr>
<tr> <td> <code translate="no" dir="ltr">validate</code> </td> <td> If true, then use assertions to check that the arguments form a valid <code translate="no" dir="ltr">RowPartition</code>. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">dtype</code> </td> <td> Optional dtype for the RowPartition. If missing, the type is inferred from the type of <code translate="no" dir="ltr">value_rowids</code>, dtype_hint, or tf.int64. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">dtype_hint</code> </td> <td> Optional dtype for the RowPartition, used when dtype is None. In some cases, a caller may not have a dtype in mind when converting to a tensor, so dtype_hint can be used as a soft preference. If the conversion to <code translate="no" dir="ltr">dtype_hint</code> is not possible, this argument has no effect. </td> </tr> </table>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Returns</th></tr> <tr class="alt"> <td colspan="2"> A <code translate="no" dir="ltr">RowPartition</code>. </td> </tr> 
</table>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Raises</th></tr> 
<tr> <td> <code translate="no" dir="ltr">ValueError</code> </td> <td> If <code translate="no" dir="ltr">nrows</code> is incompatible with <code translate="no" dir="ltr">value_rowids</code>. </td> </tr> </table> <h4 id="example" data-text="Example:" tabindex="-1">Example:</h4> 
<devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">print(RowPartition.from_value_rowids(
    value_rowids=[0, 0, 0, 0, 2, 2, 2, 3],
    nrows=4))
tf.RowPartition(row_splits=[0 4 4 7 8])</pre></devsite-code> <h3 id="is_uniform" data-text="is_uniform" tabindex="-1"><code translate="no" dir="ltr">is_uniform</code></h3> <p><a target="_blank" class="external" href="https://github.com/tensorflow/tensorflow/blob/v2.16.1/tensorflow/python/ops/ragged/row_partition.py#L926-L937">View source</a></p> 
<devsite-code><pre class="devsite-click-to-copy tfo-signature-link" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">is_uniform()
</pre></devsite-code> <p>Returns true if the partition is known to be uniform statically.</p> <p>This is based upon the existence of self._uniform_row_length. For example: RowPartition.from_row_lengths([3,3,3]).is_uniform()<mark>false RowPartition.from_uniform_row_length(5, nvals=20).is_uniform()</mark>true RowPartition.from_row_lengths([2,0,2]).is_uniform()==false</p>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Returns</th></tr> <tr class="alt"> <td colspan="2"> Whether a RowPartition is known to be uniform statically. </td> </tr> 
</table> <h3 id="nrows" data-text="nrows" tabindex="-1"><code translate="no" dir="ltr">nrows</code></h3> <p><a target="_blank" class="external" href="https://github.com/tensorflow/tensorflow/blob/v2.16.1/tensorflow/python/ops/ragged/row_partition.py#L782-L794">View source</a></p> 
<devsite-code><pre class="devsite-click-to-copy tfo-signature-link" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">nrows()
</pre></devsite-code> <p>Returns the number of rows created by this <code translate="no" dir="ltr">RowPartition</code>.</p>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Returns</th></tr> <tr class="alt"> <td colspan="2"> scalar integer Tensor </td> </tr> 
</table> <h3 id="nvals" data-text="nvals" tabindex="-1"><code translate="no" dir="ltr">nvals</code></h3> <p><a target="_blank" class="external" href="https://github.com/tensorflow/tensorflow/blob/v2.16.1/tensorflow/python/ops/ragged/row_partition.py#L767-L780">View source</a></p> 
<devsite-code><pre class="devsite-click-to-copy tfo-signature-link" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">nvals()
</pre></devsite-code> <p>Returns the number of values partitioned by this <code translate="no" dir="ltr">RowPartition</code>.</p> <p>If the sequence partitioned by this <code translate="no" dir="ltr">RowPartition</code> is a tensor, then <code translate="no" dir="ltr">nvals</code> is the size of that tensor's outermost dimension -- i.e., <code translate="no" dir="ltr">nvals == values.shape[0]</code>.</p>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Returns</th></tr> <tr class="alt"> <td colspan="2"> scalar integer Tensor </td> </tr> 
</table> <h3 id="offsets_in_rows" data-text="offsets_in_rows" tabindex="-1"><code translate="no" dir="ltr">offsets_in_rows</code></h3> <p><a target="_blank" class="external" href="https://github.com/tensorflow/tensorflow/blob/v2.16.1/tensorflow/python/ops/ragged/row_partition.py#L908-L924">View source</a></p> 
<devsite-code><pre class="devsite-click-to-copy tfo-signature-link" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">offsets_in_rows()
</pre></devsite-code> <p>Return the offset of each value.</p> <p>RowPartition takes an array x and converts it into sublists. offsets[i] is the index of x[i] in its sublist. Given a shape, such as: [<em>,</em>,<em>],[</em>,<em>],[],[</em>,*] This returns: 0,1,2,0,1,0,1</p>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Returns</th></tr> <tr class="alt"> <td colspan="2"> an offset for every value. </td> </tr> 
</table> <h3 id="row_lengths" data-text="row_lengths" tabindex="-1"><code translate="no" dir="ltr">row_lengths</code></h3> <p><a target="_blank" class="external" href="https://github.com/tensorflow/tensorflow/blob/v2.16.1/tensorflow/python/ops/ragged/row_partition.py#L834-L845">View source</a></p> 
<devsite-code><pre class="devsite-click-to-copy tfo-signature-link" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">row_lengths()
</pre></devsite-code> <p>Returns the lengths of rows in this <code translate="no" dir="ltr">RowPartition</code>.</p>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Returns</th></tr> <tr class="alt"> <td colspan="2"> A 1-D integer Tensor with shape <code translate="no" dir="ltr">[self.nrows]</code>. The returned tensor is nonnegative. <code translate="no" dir="ltr">tf.reduce_sum(self.row_lengths) == self.nvals()</code>. </td> </tr> 
</table> <h3 id="row_limits" data-text="row_limits" tabindex="-1"><code translate="no" dir="ltr">row_limits</code></h3> <p><a target="_blank" class="external" href="https://github.com/tensorflow/tensorflow/blob/v2.16.1/tensorflow/python/ops/ragged/row_partition.py#L821-L832">View source</a></p> 
<devsite-code><pre class="devsite-click-to-copy tfo-signature-link" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">row_limits()
</pre></devsite-code> <p>Returns the limit indices for rows in this row partition.</p> <p>These indices specify where the values for each row end. <code translate="no" dir="ltr">partition.row_limits()</code> is equal to <code translate="no" dir="ltr">partition.row_splits()[:-1]</code>.</p>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Returns</th></tr> <tr class="alt"> <td colspan="2"> A 1-D integer Tensor with shape <code translate="no" dir="ltr">[self.nrows]</code>. The returned tensor is nonnegative, and is sorted in ascending order. <code translate="no" dir="ltr">self.row_limits()[-1] == self.nvals()</code>. </td> </tr> 
</table> <h3 id="row_splits" data-text="row_splits" tabindex="-1"><code translate="no" dir="ltr">row_splits</code></h3> <p><a target="_blank" class="external" href="https://github.com/tensorflow/tensorflow/blob/v2.16.1/tensorflow/python/ops/ragged/row_partition.py#L738-L751">View source</a></p> 
<devsite-code><pre class="devsite-click-to-copy tfo-signature-link" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">row_splits()
</pre></devsite-code> <p>Returns the row-split indices for this row partition.</p> <p><code translate="no" dir="ltr">row_splits</code> specifies where the values for each row begin and end. In particular, the values for row <code translate="no" dir="ltr">i</code> are stored in the slice <code translate="no" dir="ltr">values[row_splits[i]:row_splits[i+1]]</code>.</p>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Returns</th></tr> <tr class="alt"> <td colspan="2"> A 1-D integer <code translate="no" dir="ltr">Tensor</code> with shape <code translate="no" dir="ltr">[self.nrows+1]</code>. The returned tensor is non-empty, and is sorted in ascending order. <code translate="no" dir="ltr">self.row_splits()[0] == 0</code>. <code translate="no" dir="ltr">self.row_splits()[-1] == self.nvals()</code>. </td> </tr> 
</table> <h3 id="row_starts" data-text="row_starts" tabindex="-1"><code translate="no" dir="ltr">row_starts</code></h3> <p><a target="_blank" class="external" href="https://github.com/tensorflow/tensorflow/blob/v2.16.1/tensorflow/python/ops/ragged/row_partition.py#L807-L819">View source</a></p> 
<devsite-code><pre class="devsite-click-to-copy tfo-signature-link" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">row_starts()
</pre></devsite-code> <p>Returns the start indices for rows in this row partition.</p> <p>These indices specify where the values for each row begin. <code translate="no" dir="ltr">partition.row_starts()</code> is equal to <code translate="no" dir="ltr">partition.row_splits()[:-1]</code>.</p>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Returns</th></tr> <tr class="alt"> <td colspan="2"> A 1-D integer Tensor with shape <code translate="no" dir="ltr">[self.nrows()]</code>. The returned tensor is nonnegative, and is sorted in ascending order. <code translate="no" dir="ltr">self.row_starts()[0] == 0</code>. <code translate="no" dir="ltr">self.row_starts()[-1] &lt;= self.nvals()</code>. </td> </tr> 
</table> <h3 id="uniform_row_length" data-text="uniform_row_length" tabindex="-1"><code translate="no" dir="ltr">uniform_row_length</code></h3> <p><a target="_blank" class="external" href="https://github.com/tensorflow/tensorflow/blob/v2.16.1/tensorflow/python/ops/ragged/row_partition.py#L796-L805">View source</a></p> 
<devsite-code><pre class="devsite-click-to-copy tfo-signature-link" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">uniform_row_length()
</pre></devsite-code> <p>Returns the length of each row in this partition, if rows are uniform.</p> <p>If all rows in this <code translate="no" dir="ltr">RowPartition</code> have the same length, then this returns that length as a scalar integer <code translate="no" dir="ltr">Tensor</code>. Otherwise, it returns <code translate="no" dir="ltr">None</code>.</p>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Returns</th></tr> <tr class="alt"> <td colspan="2"> scalar Tensor with <code translate="no" dir="ltr">type=self.dtype</code>, or <code translate="no" dir="ltr">None</code>. </td> </tr> 
</table> <h3 id="value_rowids" data-text="value_rowids" tabindex="-1"><code translate="no" dir="ltr">value_rowids</code></h3> <p><a target="_blank" class="external" href="https://github.com/tensorflow/tensorflow/blob/v2.16.1/tensorflow/python/ops/ragged/row_partition.py#L753-L765">View source</a></p> 
<devsite-code><pre class="devsite-click-to-copy tfo-signature-link" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">value_rowids()
</pre></devsite-code> <p>Returns the row indices for this row partition.</p> <p><code translate="no" dir="ltr">value_rowids</code> specifies the row index fo reach value. In particular, <code translate="no" dir="ltr">value_rowids[i]</code> is the row index for <code translate="no" dir="ltr">values[i]</code>.</p>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Returns</th></tr> <tr class="alt"> <td colspan="2"> A 1-D integer <code translate="no" dir="ltr">Tensor</code> with shape <code translate="no" dir="ltr">[self.nvals()]</code>. The returned tensor is nonnegative, and is sorted in ascending order. </td> </tr> 
</table> <h3 id="with_dtype" data-text="with_dtype" tabindex="-1"><code translate="no" dir="ltr">with_dtype</code></h3> <p><a target="_blank" class="external" href="https://github.com/tensorflow/tensorflow/blob/v2.16.1/tensorflow/python/ops/ragged/row_partition.py#L968-L991">View source</a></p> 
<devsite-code><pre class="devsite-click-to-copy tfo-signature-link" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">with_dtype(
    dtype
)
</pre></devsite-code> <p>Returns a copy of this RowPartition with the given encoding dtype.</p>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Args</th></tr> 
<tr> <td> <code translate="no" dir="ltr">dtype</code> </td> <td> The dtype for encoding tensors, such as <code translate="no" dir="ltr">row_splits</code> and <code translate="no" dir="ltr">nrows</code>. One of <a href="../../tf.html#int32"><code translate="no" dir="ltr">tf.int32</code></a> or <a href="../../tf.html#int64"><code translate="no" dir="ltr">tf.int64</code></a>. </td> </tr> </table>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Returns</th></tr> <tr class="alt"> <td colspan="2"> A copy of this RowPartition, with the encoding tensors cast to the given type. </td> </tr> 
</table>  <devsite-thumb-rating position="footer"> </devsite-thumb-rating> <div class="_attribution">
  <p class="_attribution-p">
    &copy; 2022 The TensorFlow Authors. All rights reserved.<br>Licensed under the Creative Commons Attribution License 4.0.<br>Code samples licensed under the Apache 2.0 License.<br>
    <a href="https://www.tensorflow.org/api_docs/python/tf/experimental/RowPartition" class="_attribution-link">https://www.tensorflow.org/api_docs/python/tf/experimental/RowPartition</a>
  </p>
</div>
