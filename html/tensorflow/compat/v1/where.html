<h1 class="devsite-page-title">tf.compat.v1.where</h1> <devsite-bookmark></devsite-bookmark>       <p>Return the elements, either from <code translate="no" dir="ltr">x</code> or <code translate="no" dir="ltr">y</code>, depending on the <code translate="no" dir="ltr">condition</code>.</p> <pre class="devsite-click-to-copy prettyprint lang-py tfo-signature-link" translate="no" dir="ltr" data-language="cpp">
tf.compat.v1.where(
    condition, x=None, y=None, name=None
)
</pre> <p><section><devsite-expandable expanded> <h2 class="showalways" id="migrate-to-tf2" data-text="Migrate to TF2">Migrate to TF2</h2></devsite-expandable></section></p> <aside class="caution"><strong>Caution:</strong><span> This API was designed for TensorFlow v1. Continue reading for details on how to migrate from this API to a native TensorFlow v2 equivalent. See the <a href="https://www.tensorflow.org/guide/migrate">TensorFlow v1 to TensorFlow v2 migration guide</a> for instructions on how to migrate the rest of your code.</span></aside> <p>This API is compatible with eager execution and <a href="../../function.html"><code translate="no" dir="ltr">tf.function</code></a>. However, this is still a legacy API endpoint originally designed for TF1. To migrate to fully-native TF2, please replace its usage with <a href="../../where.html"><code translate="no" dir="ltr">tf.where</code></a> instead, which is directly backwards compatible with <a href="where.html"><code translate="no" dir="ltr">tf.compat.v1.where</code></a>.</p> <p>However,<a href="where.html"><code translate="no" dir="ltr">tf.compat.v1.where</code></a> is more restrictive than <a href="../../where.html"><code translate="no" dir="ltr">tf.where</code></a>, requiring <code translate="no" dir="ltr">x</code> and <code translate="no" dir="ltr">y</code> to have the same shape, and returning a <code translate="no" dir="ltr">Tensor</code> with the same type and shape as <code translate="no" dir="ltr">x</code>, <code translate="no" dir="ltr">y</code> (if they are both non-None).</p> <p><a href="../../where.html"><code translate="no" dir="ltr">tf.where</code></a> will accept <code translate="no" dir="ltr">x</code>, <code translate="no" dir="ltr">y</code> that are not the same shape as long as they are broadcastable with one another and with <code translate="no" dir="ltr">condition</code>, and will return a <code translate="no" dir="ltr">Tensor</code> with shape broadcast from <code translate="no" dir="ltr">condition</code>, <code translate="no" dir="ltr">x</code>, and <code translate="no" dir="ltr">y</code>.</p> <p>For example, the following works with <a href="../../where.html"><code translate="no" dir="ltr">tf.where</code></a> but not <a href="where.html"><code translate="no" dir="ltr">tf.compat.v1.where</code></a>:</p> <pre class="devsite-click-to-copy prettyprint lang-py" translate="no" dir="ltr" data-language="cpp">
tf.where([True, False, False, True], [1,2,3,4], [100])
&lt;tf.Tensor: shape=(4,), dtype=int32, numpy=array([  1, 100, 100,   4],
dtype=int32)&gt;
</pre> <pre class="devsite-click-to-copy prettyprint lang-py" translate="no" dir="ltr" data-language="cpp">
tf.where(True, [1,2,3,4], 100)
&lt;tf.Tensor: shape=(4,), dtype=int32, numpy=array([1, 2, 3, 4],
dtype=int32)&gt;
</pre>  <h2 id="description" data-text="Description">Description</h2>  <p>If both <code translate="no" dir="ltr">x</code> and <code translate="no" dir="ltr">y</code> are None, then this operation returns the coordinates of true elements of <code translate="no" dir="ltr">condition</code>. The coordinates are returned in a 2-D tensor where the first dimension (rows) represents the number of true elements, and the second dimension (columns) represents the coordinates of the true elements. Keep in mind, the shape of the output tensor can vary depending on how many true values there are in input. Indices are output in row-major order.</p> <p>If both non-None, <code translate="no" dir="ltr">x</code> and <code translate="no" dir="ltr">y</code> must have the same shape. The <code translate="no" dir="ltr">condition</code> tensor must be a scalar if <code translate="no" dir="ltr">x</code> and <code translate="no" dir="ltr">y</code> are scalar. If <code translate="no" dir="ltr">x</code> and <code translate="no" dir="ltr">y</code> are tensors of higher rank, then <code translate="no" dir="ltr">condition</code> must be either a vector with size matching the first dimension of <code translate="no" dir="ltr">x</code>, or must have the same shape as <code translate="no" dir="ltr">x</code>.</p> <p>The <code translate="no" dir="ltr">condition</code> tensor acts as a mask that chooses, based on the value at each element, whether the corresponding element / row in the output should be taken from <code translate="no" dir="ltr">x</code> (if true) or <code translate="no" dir="ltr">y</code> (if false).</p> <p>If <code translate="no" dir="ltr">condition</code> is a vector and <code translate="no" dir="ltr">x</code> and <code translate="no" dir="ltr">y</code> are higher rank matrices, then it chooses which row (outer dimension) to copy from <code translate="no" dir="ltr">x</code> and <code translate="no" dir="ltr">y</code>. If <code translate="no" dir="ltr">condition</code> has the same shape as <code translate="no" dir="ltr">x</code> and <code translate="no" dir="ltr">y</code>, then it chooses which element to copy from <code translate="no" dir="ltr">x</code> and <code translate="no" dir="ltr">y</code>.</p>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Args</th></tr> 
<tr> <td> <code translate="no" dir="ltr">condition</code> </td> <td> A <code translate="no" dir="ltr">Tensor</code> of type <code translate="no" dir="ltr">bool</code> </td> </tr>
<tr> <td> <code translate="no" dir="ltr">x</code> </td> <td> A Tensor which may have the same shape as <code translate="no" dir="ltr">condition</code>. If <code translate="no" dir="ltr">condition</code> is rank 1, <code translate="no" dir="ltr">x</code> may have higher rank, but its first dimension must match the size of <code translate="no" dir="ltr">condition</code>. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">y</code> </td> <td> A <code translate="no" dir="ltr">tensor</code> with the same shape and type as <code translate="no" dir="ltr">x</code>. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">name</code> </td> <td> A name of the operation (optional) </td> </tr> </table>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Returns</th></tr> <tr class="alt"> <td colspan="2"> A <code translate="no" dir="ltr">Tensor</code> with the same type and shape as <code translate="no" dir="ltr">x</code>, <code translate="no" dir="ltr">y</code> if they are non-None. Otherwise, a <code translate="no" dir="ltr">Tensor</code> with shape <code translate="no" dir="ltr">(num_true, rank(condition))</code>. </td> </tr> 
</table>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Raises</th></tr> 
<tr> <td> <code translate="no" dir="ltr">ValueError</code> </td> <td> When exactly one of <code translate="no" dir="ltr">x</code> or <code translate="no" dir="ltr">y</code> is non-None. </td> </tr> </table>  <devsite-thumb-rating position="footer"> </devsite-thumb-rating><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2022 The TensorFlow Authors. All rights reserved.<br>Licensed under the Creative Commons Attribution License 4.0.<br>Code samples licensed under the Apache 2.0 License.<br>
    <a href="https://www.tensorflow.org/versions/r2.9/api_docs/python/tf/compat/v1/where" class="_attribution-link">https://www.tensorflow.org/versions/r2.9/api_docs/python/tf/compat/v1/where</a>
  </p>
</div>
