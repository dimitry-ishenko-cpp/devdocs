<h1 class="devsite-page-title" tabindex="-1"> tf.compat.v1.experimental.output_all_intermediates </h1> <devsite-feature-tooltip ack-key="AckCollectionsBookmarkTooltipDismiss" analytics-category="Site-Wide Custom Events" analytics-action-show="Callout Profile displayed" analytics-action-close="Callout Profile dismissed" analytics-label="Create Collection Callout" class="devsite-page-bookmark-tooltip nocontent" dismiss-button="true" id="devsite-collections-dropdown" dismiss-button-text="Dismiss" close-button-text="Got it">    </devsite-feature-tooltip> <div class="devsite-page-title-meta"><devsite-view-release-notes></devsite-view-release-notes></div>     <div itemscope itemtype="http://developers.google.com/ReferenceObject"> <meta itemprop="name" content="tf.compat.v1.experimental.output_all_intermediates"> <meta itemprop="path" content="Stable"> </div>   <p>Whether to output all intermediates from functional control flow ops.</p> 
<devsite-code><pre class="devsite-click-to-copy tfo-signature-link" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">tf.compat.v1.experimental.output_all_intermediates(
    state
)
</pre></devsite-code>  <p>The "default" behavior to is to output all intermediates when using v2 control flow inside Keras models in graph mode. This is needed to support taking gradients of v2 control flow. In graph mode, Keras can sometimes freeze the forward graph before the gradient computation which does not work for v2 control flow since it requires updating the forward ops to output the needed intermediates. We work around this by proactively outputting the needed intermediates when building the forward pass itself. Ideally any such extra tensors should be pruned out at runtime. However, if for any reason this doesn't work for you or if you have an inference-only model you can turn this behavior off using <a href="output_all_intermediates.html"><code translate="no" dir="ltr">tf.compat.v1.experimental.output_all_intermediates(False)</code></a>.</p> <p>If with the default behavior you are still seeing errors of the form "Connecting to invalid output X of source node Y which has Z outputs" try setting <a href="output_all_intermediates.html"><code translate="no" dir="ltr">tf.compat.v1.experimental.output_all_intermediates(True)</code></a> and please file an issue at https://github.com/tensorflow/tensorflow/issues.</p>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Args</th></tr> 
<tr> <td> <code translate="no" dir="ltr">state</code> </td> <td> True, False or None. None restores the default behavior. </td> </tr> </table>  <devsite-thumb-rating position="footer"> </devsite-thumb-rating> <div class="_attribution">
  <p class="_attribution-p">
    &copy; 2022 The TensorFlow Authors. All rights reserved.<br>Licensed under the Creative Commons Attribution License 4.0.<br>Code samples licensed under the Apache 2.0 License.<br>
    <a href="https://www.tensorflow.org/api_docs/python/tf/compat/v1/experimental/output_all_intermediates" class="_attribution-link">https://www.tensorflow.org/api_docs/python/tf/compat/v1/experimental/output_all_intermediates</a>
  </p>
</div>
