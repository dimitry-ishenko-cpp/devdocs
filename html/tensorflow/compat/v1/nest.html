<h1 class="devsite-page-title">Module: tf.compat.v1.nest</h1> <devsite-bookmark></devsite-bookmark>       <p>Functions that work with structures.</p> <h4 id="a_structure_is_either" data-text="A structure is either:">A structure is either:</h4> <ul> <li>one of the recognized Python collections, holding <em>nested structures</em>;</li> <li>a value of any other type, typically a TensorFlow data type like Tensor, Variable, or of compatible types such as int, float, ndarray, etc. these are commonly referred to as <em>atoms</em> of the structure.</li> </ul> <p>A structure of type <code translate="no" dir="ltr">T</code> is a structure whose atomic items are of type <code translate="no" dir="ltr">T</code>. For example, a structure of <a href="../../tensor.html"><code translate="no" dir="ltr">tf.Tensor</code></a> only contains <a href="../../tensor.html"><code translate="no" dir="ltr">tf.Tensor</code></a> as its atoms.</p> <p>Historically a <em>nested structure</em> was called a <em>nested sequence</em> in TensorFlow. A nested structure is sometimes called a <em>nest</em> or a <em>tree</em>, but the formal name <em>nested structure</em> is preferred.</p> <p>Refer to <a href="https://en.wikipedia.org/wiki/Nesting_(computing)#Data_structures">Nesting Data Structures</a>.</p> <p>The following collection types are recognized by <a href="../../nest.html"><code translate="no" dir="ltr">tf.nest</code></a> as nested structures:</p> <ul> <li>
<code translate="no" dir="ltr">collections.abc.Sequence</code> (except <code translate="no" dir="ltr">string</code> and <code translate="no" dir="ltr">bytes</code>). This includes <code translate="no" dir="ltr">list</code>, <code translate="no" dir="ltr">tuple</code>, and <code translate="no" dir="ltr">namedtuple</code>.</li> <li>
<code translate="no" dir="ltr">collections.abc.Mapping</code> (with sortable keys). This includes <code translate="no" dir="ltr">dict</code> and <code translate="no" dir="ltr">collections.OrderedDict</code>.</li> <li>
<code translate="no" dir="ltr">collections.abc.MappingView</code> (with sortable keys).</li> <li>
<a href="https://www.attrs.org/"><code translate="no" dir="ltr">attr.s</code> classes</a>.</li> </ul> <p>Any other values are considered <strong>atoms</strong>. Not all collection types are considered nested structures. For example, the following types are considered atoms:</p> <ul> <li>
<code translate="no" dir="ltr">set</code>; <code translate="no" dir="ltr">{"a", "b"}</code> is an atom, while <code translate="no" dir="ltr">["a", "b"]</code> is a nested structure.</li> <li><a href="https://docs.python.org/library/dataclasses.html"><code translate="no" dir="ltr">dataclass</code> classes</a></li> <li><a href="../../tensor.html"><code translate="no" dir="ltr">tf.Tensor</code></a></li> <li><code translate="no" dir="ltr">numpy.array</code></li> </ul> <p><a href="../../nest/is_nested.html"><code translate="no" dir="ltr">tf.nest.is_nested</code></a> checks whether an object is a nested structure or an atom. For example:</p> <pre class="devsite-click-to-copy prettyprint lang-py" translate="no" dir="ltr" data-language="cpp">
tf.nest.is_nested("1234")
  False
tf.nest.is_nested([1, 3, [4, 5]])
  True
tf.nest.is_nested(((7, 8), (5, 6)))
  True
tf.nest.is_nested([])
  True
tf.nest.is_nested({"a": 1, "b": 2})
  True
tf.nest.is_nested({"a": 1, "b": 2}.keys())
  True
tf.nest.is_nested({"a": 1, "b": 2}.values())
  True
tf.nest.is_nested({"a": 1, "b": 2}.items())
  True
tf.nest.is_nested(set([1, 2]))
  False
ones = tf.ones([2, 3])
tf.nest.is_nested(ones)
  False
  
</pre> <blockquote class="note">
<strong>Note:</strong><span> A proper structure shall form a tree. The user shall ensure there is no cyclic references within the items in the structure, i.e., no references in the structure of the input of these functions should be recursive. The behavior is undefined if there is a cycle.</span>
</blockquote> <h2 id="functions" data-text="Functions">Functions</h2> <p><a href="../../nest/assert_same_structure.html"><code translate="no" dir="ltr">assert_same_structure(...)</code></a>: Asserts that two structures are nested in the same way.</p> <p><a href="../../nest/flatten.html"><code translate="no" dir="ltr">flatten(...)</code></a>: Returns a flat list from a given structure.</p> <p><a href="../../nest/is_nested.html"><code translate="no" dir="ltr">is_nested(...)</code></a>: Returns true if its input is a nested structure.</p> <p><a href="../../nest/map_structure.html"><code translate="no" dir="ltr">map_structure(...)</code></a>: Creates a new structure by applying <code translate="no" dir="ltr">func</code> to each atom in <code translate="no" dir="ltr">structure</code>.</p> <p><a href="../../nest/pack_sequence_as.html"><code translate="no" dir="ltr">pack_sequence_as(...)</code></a>: Returns a given flattened sequence packed into a given structure.</p>  <devsite-thumb-rating position="footer"> </devsite-thumb-rating><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2022 The TensorFlow Authors. All rights reserved.<br>Licensed under the Creative Commons Attribution License 4.0.<br>Code samples licensed under the Apache 2.0 License.<br>
    <a href="https://www.tensorflow.org/versions/r2.9/api_docs/python/tf/compat/v1/nest" class="_attribution-link">https://www.tensorflow.org/versions/r2.9/api_docs/python/tf/compat/v1/nest</a>
  </p>
</div>
