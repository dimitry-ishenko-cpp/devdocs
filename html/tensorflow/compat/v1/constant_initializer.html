<h1 class="devsite-page-title" tabindex="-1"> tf.compat.v1.constant_initializer </h1> <devsite-feature-tooltip ack-key="AckCollectionsBookmarkTooltipDismiss" analytics-category="Site-Wide Custom Events" analytics-action-show="Callout Profile displayed" analytics-action-close="Callout Profile dismissed" analytics-label="Create Collection Callout" class="devsite-page-bookmark-tooltip nocontent" dismiss-button="true" id="devsite-collections-dropdown" dismiss-button-text="Dismiss" close-button-text="Got it">    </devsite-feature-tooltip> <div class="devsite-page-title-meta"><devsite-view-release-notes></devsite-view-release-notes></div>     <div itemscope itemtype="http://developers.google.com/ReferenceObject"> <meta itemprop="name" content="tf.compat.v1.constant_initializer"> <meta itemprop="path" content="Stable"> <meta itemprop="property" content="__call__"> <meta itemprop="property" content="__init__"> <meta itemprop="property" content="from_config"> <meta itemprop="property" content="get_config"> </div>   <p>Initializer that generates tensors with constant values.</p> <section class="expandable"> <h4 class="showalways" id="view-aliases" data-text="View aliases" tabindex="-1">View aliases</h4> <p> <b>Compat aliases for migration</b> </p>
<p>See <a href="https://www.tensorflow.org/guide/migrate">Migration guide</a> for more details.</p> <p><a href="constant_initializer.html"><code translate="no" dir="ltr">tf.compat.v1.initializers.constant</code></a></p> </section> 
<devsite-code><pre class="devsite-click-to-copy tfo-signature-link" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">tf.compat.v1.constant_initializer(
    value=0,
    dtype=tf.dtypes.float32,
    verify_shape=False
)
</pre></devsite-code> <p><section><devsite-expandable expanded> <h2 class="showalways" id="migrate-to-tf2" data-text="Migrate to TF2" tabindex="-1">Migrate to TF2</h2></devsite-expandable></section></p> <aside class="caution"><strong>Caution:</strong><span> This API was designed for TensorFlow v1. Continue reading for details on how to migrate from this API to a native TensorFlow v2 equivalent. See the <a href="https://www.tensorflow.org/guide/migrate">TensorFlow v1 to TensorFlow v2 migration guide</a> for instructions on how to migrate the rest of your code.</span></aside> <p>Although it is a legacy API endpoint, <a href="constant_initializer.html"><code translate="no" dir="ltr">tf.compat.v1.constant_initializer</code></a> is compatible with eager execution and <a href="../../function.html"><code translate="no" dir="ltr">tf.function</code></a>.</p> <p>To migrate to a non-legacy TF2 API, please use <a href="../../constant_initializer.html"><code translate="no" dir="ltr">tf.constant_initializer</code></a> instead. The <code translate="no" dir="ltr">dtype</code> argument in <a href="constant_initializer.html#__init__"><code translate="no" dir="ltr">tf.compat.v1.constant<em>initializer.</em><em>init</em>_()</code></a> does not exist in <a href="../../constant_initializer.html#__init__"><code translate="no" dir="ltr">tf.constant<em>initializer.</em><em>init</em>_()</code></a>. However, you can specify the <code translate="no" dir="ltr">dtype</code> in <code translate="no" dir="ltr">__call__()</code> in both cases.</p> <p>In the <a href="../v1.html"><code translate="no" dir="ltr">compat.v1</code></a> symbol, if <code translate="no" dir="ltr">verify_shape</code> is set to <code translate="no" dir="ltr">True</code>, an exception is raised when initializing a variable with a different shape from <code translate="no" dir="ltr">value</code>. If set to <code translate="no" dir="ltr">False</code>, <code translate="no" dir="ltr">value</code> is reshaped to initialize the variable if necessary. An exception would only be raised when the number of elements are different.</p> <p>The <code translate="no" dir="ltr">verify_shape</code> argument is not supported in TF2. Using <a href="../../constant_initializer.html"><code translate="no" dir="ltr">tf.constant_initializer</code></a> is equivalent to setting <code translate="no" dir="ltr">verify_shape</code> to <code translate="no" dir="ltr">False</code>.</p> <h4 id="structural_mapping_to_tf2" data-text="Structural Mapping to TF2" tabindex="-1">Structural Mapping to TF2</h4> <p>Before:</p> 
<devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">value = [0, 1, 2, 3, 4, 5, 6, 7]
initializer = tf.compat.v1.constant_initializer(
    value=value,
    dtype=tf.float32,
    verify_shape=False)
variable = tf.Variable(initializer(shape=[2, 4]))
</pre></devsite-code> <p>After:</p> 
<devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">value = [0, 1, 2, 3, 4, 5, 6, 7]
initializer = tf.constant_initializer(value=value)
tf.Variable(initializer(shape=[2, 4], dtype=tf.float32))
</pre></devsite-code> <h4 id="how_to_map_arguments" data-text="How to Map Arguments" tabindex="-1">How to Map Arguments</h4> <table> <thead> <tr> <th style="text-align: left">TF1 Arg Name</th> <th style="text-align: left">TF2 Arg Name</th> <th style="text-align: left">Note</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><code translate="no" dir="ltr">value</code></td> <td style="text-align: left"><code translate="no" dir="ltr">value</code></td> <td style="text-align: left">In constructor</td> </tr> <tr> <td style="text-align: left"><code translate="no" dir="ltr">dtype</code></td> <td style="text-align: left"><code translate="no" dir="ltr">dtype</code></td> <td style="text-align: left">In <code translate="no" dir="ltr">__call__()</code> method</td> </tr> <tr> <td style="text-align: left"><code translate="no" dir="ltr">verify_shape</code></td> <td style="text-align: left">Not Supported</td> <td style="text-align: left">Equivalent to set to <code translate="no" dir="ltr">False</code>
</td> </tr> <tr> <td style="text-align: left"><code translate="no" dir="ltr">partition_info</code></td> <td style="text-align: left">-</td> <td style="text-align: left">(<code translate="no" dir="ltr">__call__</code> arg in TF1) Not supported</td> </tr> </tbody> </table> <h4 id="before_after_usage_example" data-text="Before &amp; After Usage Example" tabindex="-1">Before &amp; After Usage Example</h4> <p>Before:</p> 
<devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">value = [1., 2., 3., 4.]
initializer = tf.compat.v1.constant_initializer(
    value=value, dtype=tf.float32, verify_shape=True)
tf.Variable(initializer(shape=[2, 2])).numpy()
Traceback (most recent call last):

TypeError: Expected Tensor's shape: (2, 2), got (4,).
initializer = tf.compat.v1.constant_initializer(
    value=value, dtype=tf.float32, verify_shape=False)
tf.Variable(initializer(shape=[2, 2])).numpy()
array([[1., 2.],
       [3., 4.]], dtype=float32)</pre></devsite-code> <p>After:</p> 
<devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">value = [1., 2., 3., 4.]
initializer = tf.constant_initializer(value=value)
tf.Variable(initializer(shape=[2, 2], dtype=tf.float32)).numpy()
array([[1., 2.],
       [3., 4.]], dtype=float32)</pre></devsite-code>  <h2 id="description" data-text="Description" tabindex="-1">Description</h2> <h3 id="used-in-the-notebooks" data-text="Used in the notebooks" tabindex="-1">Used in the notebooks</h3> <table class="vertical-rules"> <thead> <tr> <th>Used in the guide</th> </tr> </thead> <tbody> <tr> <td> <ul> <li><a href="https://www.tensorflow.org/guide/migrate/migrating_checkpoints">Migrating model checkpoints</a></li> <li><a href="https://www.tensorflow.org/guide/migrate/model_mapping">Use TF1.x models in TF2 workflows</a></li> </ul> </td> </tr> </tbody> </table> <p>The resulting tensor is populated with values of type <code translate="no" dir="ltr">dtype</code>, as specified by arguments <code translate="no" dir="ltr">value</code> following the desired <code translate="no" dir="ltr">shape</code> of the new tensor (see examples below).</p> <p>The argument <code translate="no" dir="ltr">value</code> can be a constant value, or a list of values of type <code translate="no" dir="ltr">dtype</code>. If <code translate="no" dir="ltr">value</code> is a list, then the length of the list must be less than or equal to the number of elements implied by the desired shape of the tensor. In the case where the total number of elements in <code translate="no" dir="ltr">value</code> is less than the number of elements required by the tensor shape, the last element in <code translate="no" dir="ltr">value</code> will be used to fill the remaining entries. If the total number of elements in <code translate="no" dir="ltr">value</code> is greater than the number of elements required by the tensor shape, the initializer will raise a <code translate="no" dir="ltr">ValueError</code>.</p>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Args</th></tr> 
<tr> <td> <code translate="no" dir="ltr">value</code> </td> <td> A Python scalar, list or tuple of values, or a N-dimensional numpy array. All elements of the initialized variable will be set to the corresponding value in the <code translate="no" dir="ltr">value</code> argument. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">dtype</code> </td> <td> Default data type, used if no <code translate="no" dir="ltr">dtype</code> argument is provided when calling the initializer. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">verify_shape</code> </td> <td> Boolean that enables verification of the shape of <code translate="no" dir="ltr">value</code>. If <code translate="no" dir="ltr">True</code>, the initializer will throw an error if the shape of <code translate="no" dir="ltr">value</code> is not compatible with the shape of the initialized tensor. </td> </tr> </table>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Raises</th></tr> 
<tr> <td> <code translate="no" dir="ltr">TypeError</code> </td> <td> If the input <code translate="no" dir="ltr">value</code> is not one of the expected types. </td> </tr> </table>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Examples</th></tr> <tr class="alt"> <td colspan="2"> The following example can be rewritten using a numpy.ndarray instead of the <code translate="no" dir="ltr">value</code> list, even reshaped, as shown in the two commented lines below the <code translate="no" dir="ltr">value</code> list initialization. </td> </tr> 
</table> 
<devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">value = [0, 1, 2, 3, 4, 5, 6, 7]
init = tf.compat.v1.constant_initializer(value)
# fitting shape
with tf.compat.v1.Session():
  x = tf.compat.v1.get_variable('x', shape=[2, 4], initializer=init)
  x.initializer.run()
  print(x.eval())
[[0. 1. 2. 3.]
 [4. 5. 6. 7.]]
# Larger shape
with tf.compat.v1.Session():
  y = tf.compat.v1.get_variable('y', shape=[3, 4], initializer=init)
  y.initializer.run()
  print(y.eval())
[[0.  1.  2.  3.]
 [4.  5.  6.  7.]
 [7.  7.  7.  7.]]
# Smaller shape
with tf.compat.v1.Session():
  z = tf.compat.v1.get_variable('z', shape=[2, 3], initializer=init)
Traceback (most recent call last):

ValueError: Too many elements provided. Needed at most 6, but received 8
# Shape verification
init_verify = tf.compat.v1.constant_initializer(value, verify_shape=True)
with tf.compat.v1.Session():
 u = tf.compat.v1.get_variable('u', shape=[3, 4],
                               initializer=init_verify)
Traceback (most recent call last):

TypeError: Expected Tensor's shape: (3, 4), got (8,).</pre></devsite-code> <h2 id="methods" data-text="Methods" tabindex="-1">Methods</h2> <h3 id="from_config" data-text="from_config" tabindex="-1"><code translate="no" dir="ltr">from_config</code></h3> <p><a target="_blank" class="external" href="https://github.com/tensorflow/tensorflow/blob/v2.16.1/tensorflow/python/ops/init_ops.py#L75-L94">View source</a></p> 
<devsite-code><pre class="devsite-click-to-copy tfo-signature-link" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">@classmethod
from_config(
    config
)
</pre></devsite-code> <p>Instantiates an initializer from a configuration dictionary.</p> <h4 id="example" data-text="Example:" tabindex="-1">Example:</h4> 
<devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">initializer = RandomUniform(-1, 1)
config = initializer.get_config()
initializer = RandomUniform.from_config(config)
</pre></devsite-code>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Args</th></tr> 
<tr> <td> <code translate="no" dir="ltr">config</code> </td> <td> A Python dictionary. It will typically be the output of <code translate="no" dir="ltr">get_config</code>. </td> </tr> </table>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Returns</th></tr> <tr class="alt"> <td colspan="2"> An Initializer instance. </td> </tr> 
</table> <h3 id="get_config" data-text="get_config" tabindex="-1"><code translate="no" dir="ltr">get_config</code></h3> <p><a target="_blank" class="external" href="https://github.com/tensorflow/tensorflow/blob/v2.16.1/tensorflow/python/ops/init_ops.py#L389-L394">View source</a></p> 
<devsite-code><pre class="devsite-click-to-copy tfo-signature-link" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">get_config()
</pre></devsite-code> <p>Returns the configuration of the initializer as a JSON-serializable dict.</p>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Returns</th></tr> <tr class="alt"> <td colspan="2"> A JSON-serializable Python dict. </td> </tr> 
</table> <h3 id="__call__" data-text="__call__" tabindex="-1"><code translate="no" dir="ltr">__call__</code></h3> <p><a target="_blank" class="external" href="https://github.com/tensorflow/tensorflow/blob/v2.16.1/tensorflow/python/ops/init_ops.py#L381-L387">View source</a></p> 
<devsite-code><pre class="devsite-click-to-copy tfo-signature-link" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">__call__(
    shape, dtype=None, partition_info=None, verify_shape=None
)
</pre></devsite-code> <p>Returns a tensor object initialized as specified by the initializer.</p>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Args</th></tr> 
<tr> <td> <code translate="no" dir="ltr">shape</code> </td> <td> Shape of the tensor. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">dtype</code> </td> <td> Optional dtype of the tensor. If not provided use the initializer dtype. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">partition_info</code> </td> <td> Optional information about the possible partitioning of a tensor. </td> </tr> </table>  <devsite-thumb-rating position="footer"> </devsite-thumb-rating> <div class="_attribution">
  <p class="_attribution-p">
    &copy; 2022 The TensorFlow Authors. All rights reserved.<br>Licensed under the Creative Commons Attribution License 4.0.<br>Code samples licensed under the Apache 2.0 License.<br>
    <a href="https://www.tensorflow.org/api_docs/python/tf/compat/v1/constant_initializer" class="_attribution-link">https://www.tensorflow.org/api_docs/python/tf/compat/v1/constant_initializer</a>
  </p>
</div>
