<h1 class="devsite-page-title" tabindex="-1"> tf.tpu.experimental.embedding.QuantizationConfig </h1> <devsite-feature-tooltip ack-key="AckCollectionsBookmarkTooltipDismiss" analytics-category="Site-Wide Custom Events" analytics-action-show="Callout Profile displayed" analytics-action-close="Callout Profile dismissed" analytics-label="Create Collection Callout" class="devsite-page-bookmark-tooltip nocontent" dismiss-button="true" id="devsite-collections-dropdown" dismiss-button-text="Dismiss" close-button-text="Got it">    </devsite-feature-tooltip> <div class="devsite-page-title-meta"><devsite-view-release-notes></devsite-view-release-notes></div>     <div itemscope itemtype="http://developers.google.com/ReferenceObject"> <meta itemprop="name" content="tf.tpu.experimental.embedding.QuantizationConfig"> <meta itemprop="path" content="Stable"> <meta itemprop="property" content="__init__"> </div>   <p>Settings for simulated quantization of the tpu embedding table.</p> <section class="expandable"> <h4 class="showalways" id="view-aliases" data-text="View aliases" tabindex="-1">View aliases</h4> <p> <b>Compat aliases for migration</b> </p>
<p>See <a href="https://www.tensorflow.org/guide/migrate">Migration guide</a> for more details.</p> <p><a href="quantizationconfig.html"><code translate="no" dir="ltr">tf.compat.v1.tpu.experimental.embedding.QuantizationConfig</code></a></p> </section> 
<devsite-code><pre class="devsite-click-to-copy tfo-signature-link" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">tf.tpu.experimental.embedding.QuantizationConfig(
    num_buckets: int, lower: float, upper: float
)
</pre></devsite-code>  <p>When simulated quantization is enabled, the results of the embedding lookup are clipped and quantized according to the settings here before the combiner is applied.</p> <p>For example, to quantize <code translate="no" dir="ltr">input</code> the following is done:</p> 
<devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Python" data-language="cpp">if input &lt; lower
  input = lower
if input &gt; upper
  input = upper
quantum = (upper - lower) / (num_buckets - 1)
input = math.floor((input - lower) / quantum + 0.5) * quantium + lower
</pre></devsite-code> <p>See tensorflow/core/protobuf/tpu/optimization_parameters.proto for more details.</p> <blockquote class="note">
<strong>Note:</strong><span> This does not change the storage type of the embedding table, that will continue to be float32 as will the saved variable in the checkpoint. You will have to manually quantize the variable (typically with the same algorithm and settings as above) manually.</span>
</blockquote>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Args</th></tr> 
<tr> <td> <code translate="no" dir="ltr">num_buckets</code> </td> <td> The number of quantization buckets, must be atleast 2. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">lower</code> </td> <td> The lower bound for the quantization range. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">upper</code> </td> <td> The upper bound for the quantization range. </td> </tr> </table>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Raises</th></tr> 
<tr> <td> <code translate="no" dir="ltr">ValueError</code> </td> <td> if <code translate="no" dir="ltr">num_buckets</code> is less than 2. </td> </tr> </table>  <devsite-thumb-rating position="footer"> </devsite-thumb-rating> <div class="_attribution">
  <p class="_attribution-p">
    &copy; 2022 The TensorFlow Authors. All rights reserved.<br>Licensed under the Creative Commons Attribution License 4.0.<br>Code samples licensed under the Apache 2.0 License.<br>
    <a href="https://www.tensorflow.org/api_docs/python/tf/tpu/experimental/embedding/QuantizationConfig" class="_attribution-link">https://www.tensorflow.org/api_docs/python/tf/tpu/experimental/embedding/QuantizationConfig</a>
  </p>
</div>
