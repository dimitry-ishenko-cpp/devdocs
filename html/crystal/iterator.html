<h1 class="type-name"> module Iterator(T) </h1> <h2>  Overview </h2> <p>An <code><a href="iterator.html">Iterator</a></code> allows processing sequences lazily, as opposed to <code><a href="enumerable.html">Enumerable</a></code> which processes sequences eagerly and produces an <code><a href="array.html">Array</a></code> in most of its methods.</p> <p>As an example, let's compute the first three numbers in the range <code>1..10_000_000</code> that are even, multiplied by three. One way to do this is:</p> <pre data-language="crystal">(1..10_000_000).select(&amp;.even?).map { |x| x * 3 }.first(3) # =&gt; [6, 12, 18]</pre> <p>The above works, but creates many intermediate arrays: one for the <code><a href="iterator.html#select%28%26func%3AT-%3EU%29forallU-instance-method">#select</a></code> call, one for the <code><a href="iterator.html#map%28%26func%3AT-%3EU%29forallU-instance-method">#map</a></code> call and one for the <code><a href="iterator.html#first%28n%3AInt%29-instance-method">#first</a></code> call. A more efficient way is to invoke <code><a href="range.html#each%28%26%29%3ANil-instance-method">Range#each</a></code> without a block, which gives us an <code><a href="iterator.html">Iterator</a></code> so we can process the operations lazily:</p> <pre data-language="crystal">(1..10_000_000).each.select(&amp;.even?).map { |x| x * 3 }.first(3) # =&gt; #&lt; Iterator(T)::First...</pre> <p><code><a href="iterator.html">Iterator</a></code> redefines many of <code><a href="enumerable.html">Enumerable</a></code>'s method in a lazy way, returning iterators instead of arrays.</p> <p>At the end of the call chain we get back a new iterator: we need to consume it, either using <code><a href="iterator.html#each-instance-method">#each</a></code> or <code><a href="enumerable.html#to_a%3AArray%28T%29-instance-method">Enumerable#to_a</a></code>:</p> <pre data-language="crystal">(1..10_000_000).each.select(&amp;.even?).map { |x| x * 3 }.first(3).to_a # =&gt; [6, 12, 18]</pre> <p>Because iterators only go forward, when using methods that consume it entirely or partially – <code>to_a</code>, <code>any?</code>, <code>count</code>, <code>none?</code>, <code>one?</code> and <code>size</code> – subsequent calls will give a different result as there will be less elements to consume.</p> <pre data-language="crystal">iter = (0...100).each
iter.size # =&gt; 100
iter.size # =&gt; 0</pre> <h3>
Iterating step-by-step</h3> <p>An iterator returns its next element on the method <code><a href="iterator.html#next-instance-method">#next</a></code>. Its return type is a union of the iterator's element type and the <code><a href="iterator/stop.html">Stop</a></code> type: <code>T | <a href="iterator/stop.html">Iterator::Stop</a></code>. The stop type is a sentinel value which indicates that the iterator has reached its end. It usually needs to be handled and filtered out in order to use the element value for anything useful. Unlike <code><a href="nil.html">Nil</a></code> it's not an implicitly falsey type.</p> <pre data-language="crystal">iter = (1..5).each

# Unfiltered elements contain `Iterator::Stop` type
iter.next + iter.next # Error: expected argument #1 to 'Int32#+' to be Int32, not (Int32 | Iterator::Stop)

# Type filtering eliminates the stop type
a = iter.next
b = iter.next
unless a.is_a?(Iterator::Stop) || b.is_a?(Iterator::Stop)
  a + b # =&gt; 3
end</pre> <p><code><a href="iterator/stop.html">Iterator::Stop</a></code> is only present in the return type of <code><a href="iterator.html#next-instance-method">#next</a></code>. All other methods remove it from their return types.</p> <p>Iterators can be used to build a loop.</p> <pre data-language="crystal">iter = (1..5).each
sum = 0
while !(elem = iter.next).is_a?(Iterator::Stop)
  sum += elem
end
sum # =&gt; 15</pre> <h3>
Implementing an Iterator</h3> <p>To implement an <code><a href="iterator.html">Iterator</a></code> you need to define a <code><a href="iterator.html#next-instance-method">#next</a></code> method that must return the next element in the sequence or <code><a href="iterator/stop.html#INSTANCE">Iterator::Stop::INSTANCE</a></code>, which signals the end of the sequence (you can invoke <code><a href="iterator.html#stop-instance-method">#stop</a></code> inside an iterator as a shortcut).</p> <p>For example, this is an iterator that returns a sequence of <code>N</code> zeros:</p> <pre data-language="crystal">class Zeros
  include Iterator(Int32)

  def initialize(@size : Int32)
    @produced = 0
  end

  def next
    if @produced &lt; @size
      @produced += 1
      0
    else
      stop
    end
  end
end

zeros = Zeros.new(5)
zeros.to_a # =&gt; [0, 0, 0, 0, 0]</pre> <p>The standard library provides iterators for many classes, like <code><a href="array.html">Array</a></code>, <code><a href="hash.html">Hash</a></code>, <code><a href="range.html">Range</a></code>, <code><a href="string.html">String</a></code> and <code><a href="io.html">IO</a></code>. Usually to get an iterator you invoke a method that would usually yield elements to a block, but without passing a block: <code>Array#each</code>, <code>Array#each_index</code>, <code><a href="hash.html#each%28%26%3ATuple%28K%2CV%29-%3E%29%3ANil-instance-method">Hash#each</a></code>, <code><a href="string.html#each_char%28%26%29%3ANil-instance-method">String#each_char</a></code>, <code><a href="io.html#each_line%28%2Aargs%2C%2A%2Aoptions%2C%26block%3AString-%3E%29%3ANil-instance-method">IO#each_line</a></code>, etc.</p> <h2>  Included Modules </h2> <ul class="other-types-list"> <li class="other-type"><a href="enumerable.html">Enumerable(T)</a></li> </ul> <h2>  Direct including types </h2> <ul class="other-types-list"> <li class="other-type"><a href="steppable/stepiterator.html">Steppable::StepIterator(T, L, B)</a></li> </ul> <h2>  Defined in: </h2> <a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L114" target="_blank"> iterator.cr </a> <br> <a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/json/from_json.cr#L68" target="_blank"> json/from_json.cr </a> <br> <a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/json/to_json.cr#L125" target="_blank"> json/to_json.cr </a> <br> <a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/yaml/to_yaml.cr#L42" target="_blank"> yaml/to_yaml.cr </a> <br> <h2>  Constructors </h2> <ul class="list-summary"> <li class="entry-summary"> <a href="#new%28pull%3AJSON%3A%3APullParser%29-class-method" class="signature"><strong>.new</strong>(pull : JSON::PullParser)</a> <div class="summary"><p>Creates a new iterator which iterates over a JSON array.</p></div> </li> </ul> <h2>  Class Method Summary </h2> <ul class="list-summary"> <li class="entry-summary"> <a href="#chain%28iters%3AIterator%28Iter%29%29forallIter-class-method" class="signature"><strong>.chain</strong>(iters : Iterator(Iter)) forall Iter</a> <div class="summary"><p>The same as <code><a href="iterator.html#chain%28other%3AIterator%28U%29%29forallU-instance-method">#chain</a></code>, but have better performance when the quantity of iterators to chain is large (usually greater than 4) or undetermined.</p></div> </li> <li class="entry-summary"> <a href="#chain%28iters%3AIterable%28Iter%29%29forallIter-class-method" class="signature"><strong>.chain</strong>(iters : Iterable(Iter)) forall Iter</a> <div class="summary"><p>the same as <code><a href="iterator.html#chain%28iters%3AIterator%28Iter%29%29forallIter-class-method">.chain(Iterator(Iter)</a>)</code></p></div> </li> <li class="entry-summary"> <a href="#from_json%28string_or_io%29-class-method" class="signature"><strong>.from_json</strong>(string_or_io)</a> <div class="summary"><p>Reads the content of a JSON array into an iterator in a lazy way.</p></div> </li> <li class="entry-summary"> <a href="#of%28element%3AT%29-class-method" class="signature"><strong>.of</strong>(element : T)</a> </li> <li class="entry-summary"> <a href="#of%28%26block%3A-%3ET%29-class-method" class="signature"><strong>.of</strong>(&amp;block : -&gt; T)</a> </li> <li class="entry-summary"> <a href="#stop-class-method" class="signature"><strong>.stop</strong></a> <div class="summary"><p>Shortcut for <code><a href="iterator/stop.html#INSTANCE">Iterator::Stop::INSTANCE</a></code>, to signal that there are no more elements in an iterator.</p></div> </li> </ul> <h2>  Instance Method Summary </h2> <ul class="list-summary"> <li class="entry-summary"> <a href="#accumulate%28initial%3AU%29forallU-instance-method" class="signature"><strong>#accumulate</strong>(initial : U) forall U</a> <div class="summary"><p>Returns an iterator that returns <em>initial</em> and its prefix sums with the original iterator's elements.</p></div> </li> <li class="entry-summary"> <a href="#accumulate-instance-method" class="signature"><strong>#accumulate</strong></a> <div class="summary"><p>Returns an iterator that returns the prefix sums of the original iterator's elements.</p></div> </li> <li class="entry-summary"> <a href="#accumulate%28initial%3AU%2C%26block%3AU%2CT-%3EU%29forallU-instance-method" class="signature"><strong>#accumulate</strong>(initial : U, &amp;block : U, T -&gt; U) forall U</a> <div class="summary"><p>Returns an iterator that accumulates <em>initial</em> with the original iterator's elements by the given <em>block</em>.</p></div> </li> <li class="entry-summary"> <a href="#accumulate%28%26block%3AT%2CT-%3ET%29-instance-method" class="signature"><strong>#accumulate</strong>(&amp;block : T, T -&gt; T)</a> <div class="summary"><p>Returns an iterator that accumulates the original iterator's elements by the given <em>block</em>.</p></div> </li> <li class="entry-summary"> <a href="#chain%28other%3AIterator%28U%29%29forallU-instance-method" class="signature"><strong>#chain</strong>(other : Iterator(U)) forall U</a> <div class="summary"><p>Returns an iterator that returns elements from the original iterator until it is exhausted and then returns the elements of the second iterator.</p></div> </li> <li class="entry-summary"> <a href="#chunk%28reuse%3Dfalse%2C%26block%3AT-%3EU%29forallT%2CU-instance-method" class="signature"><strong>#chunk</strong>(reuse = false, &amp;block : T -&gt; U) forall T, U</a> <div class="summary"><p>Returns an Iterator that enumerates over the items, chunking them together based on the return value of the block.</p></div> </li> <li class="entry-summary"> <a href="#chunk_while%28reuse%3ABool%7CArray%28T%29%3Dfalse%2C%26block%3AT%2CT-%3EB%29forallB-instance-method" class="signature"><strong>#chunk_while</strong>(reuse : Bool | Array(T) = false, &amp;block : T, T -&gt; B) forall B</a> <div class="summary"><p>Returns an iterator for each chunked elements where elements are kept in a given chunk as long as the block's value over a pair of elements is <em>truthy</em>.</p></div> </li> <li class="entry-summary"> <a href="#compact_map%28%26func%3AT-%3E_%29-instance-method" class="signature"><strong>#compact_map</strong>(&amp;func : T -&gt; _)</a> <div class="summary"><p>Returns an iterator that applies the given function to the element and then returns it unless it is <code>nil</code>.</p></div> </li> <li class="entry-summary"> <a href="#cons%28n%3AInt%2Creuse%3Dfalse%29-instance-method" class="signature"><strong>#cons</strong>(n : Int, reuse = false)</a> <div class="summary"><p>Returns an iterator that returns consecutive chunks of the size <em>n</em>.</p></div> </li> <li class="entry-summary"> <a href="#cons_pair%3AIterator%28Tuple%28T%2CT%29%29-instance-method" class="signature"><strong>#cons_pair</strong> : Iterator(Tuple(T, T))</a> <div class="summary"><p>Returns an iterator that returns consecutive pairs of adjacent items.</p></div> </li> <li class="entry-summary"> <a href="#cycle%28n%3AInt%29-instance-method" class="signature"><strong>#cycle</strong>(n : Int)</a> <div class="summary"><p>Returns an iterator that repeatedly returns the elements of the original iterator starting back at the beginning when the end was reached, but only <em>n</em> times.</p></div> </li> <li class="entry-summary"> <a href="#cycle-instance-method" class="signature"><strong>#cycle</strong></a> <div class="summary"><p>Returns an iterator that repeatedly returns the elements of the original iterator forever starting back at the beginning when the end was reached.</p></div> </li> <li class="entry-summary"> <a href="#each-instance-method" class="signature"><strong>#each</strong></a> </li> <li class="entry-summary"> <a href="#each%28%26%3AT-%3E%29%3ANil-instance-method" class="signature"><strong>#each</strong>(&amp; : T -&gt; ) : Nil</a> <div class="summary"><p>Calls the given block once for each element, passing that element as a parameter.</p></div> </li> <li class="entry-summary"> <a href="#each_slice%28n%2Creuse%3Dfalse%29-instance-method" class="signature"><strong>#each_slice</strong>(n, reuse = false)</a> <div class="summary"><p>Returns an iterator that then returns slices of <em>n</em> elements of the initial iterator.</p></div> </li> <li class="entry-summary"> <a href="#first%28n%3AInt%29-instance-method" class="signature"><strong>#first</strong>(n : Int)</a> <div class="summary"><p>Returns an iterator that only returns the first <em>n</em> elements of the initial iterator.</p></div> </li> <li class="entry-summary"> <a href="#flat_map%28%26func%3AT-%3E_%29-instance-method" class="signature"><strong>#flat_map</strong>(&amp;func : T -&gt; _)</a> <div class="summary"><p>Returns a new iterator with the concatenated results of running the block once for every element in the collection.</p></div> </li> <li class="entry-summary"> <a href="#flatten-instance-method" class="signature"><strong>#flatten</strong></a> <div class="summary"><p>Returns an iterator that flattens nested iterators and arrays into a single iterator whose type is the union of the simple types of all of the nested iterators and arrays (and their nested iterators and arrays, and so on).</p></div> </li> <li class="entry-summary"> <a href="#in_groups_of%28size%3AInt%2Cfilled_up_with%3Dnil%2Creuse%3Dfalse%29-instance-method" class="signature"><strong>#in_groups_of</strong>(size : Int, filled_up_with = nil, reuse = false)</a> <div class="summary"><p>Returns an iterator that chunks the iterator's elements in arrays of <em>size</em> filling up the remaining elements if no element remains with <code>nil</code> or a given optional parameter.</p></div> </li> <li class="entry-summary"> <a href="#map%28%26func%3AT-%3EU%29forallU-instance-method" class="signature"><strong>#map</strong>(&amp;func : T -&gt; U) forall U</a> <div class="summary"><p>Returns an iterator that applies the given block to the next element and returns the result.</p></div> </li> <li class="entry-summary"> <a href="#next-instance-method" class="signature"><strong>#next</strong></a> <div class="summary"><p>Returns the next element in this iterator, or <code><a href="iterator/stop.html#INSTANCE">Iterator::Stop::INSTANCE</a></code> if there are no more elements.</p></div> </li> <li class="entry-summary"> <a href="#reject%28%26func%3AT-%3EU%29forallU-instance-method" class="signature"><strong>#reject</strong>(&amp;func : T -&gt; U) forall U</a> <div class="summary"><p>Returns an iterator that only returns elements for which the passed in block returns a falsey value.</p></div> </li> <li class="entry-summary"> <a href="#reject%28type%3AU.class%29forallU-instance-method" class="signature"><strong>#reject</strong>(type : U.class) forall U</a> <div class="summary"><p>Returns an iterator that only returns elements that are <strong>not</strong> of the given <em>type</em>.</p></div> </li> <li class="entry-summary"> <a href="#reject%28pattern%29-instance-method" class="signature"><strong>#reject</strong>(pattern)</a> <div class="summary"><p>Returns an iterator that only returns elements where <code>pattern === element</code> does not hold.</p></div> </li> <li class="entry-summary"> <a href="#select%28%26func%3AT-%3EU%29forallU-instance-method" class="signature"><strong>#select</strong>(&amp;func : T -&gt; U) forall U</a> <div class="summary"><p>Returns an iterator that only returns elements for which the passed in block returns a truthy value.</p></div> </li> <li class="entry-summary"> <a href="#select%28type%3AU.class%29forallU-instance-method" class="signature"><strong>#select</strong>(type : U.class) forall U</a> <div class="summary"><p>Returns an iterator that only returns elements of the given <em>type</em>.</p></div> </li> <li class="entry-summary"> <a href="#select%28pattern%29-instance-method" class="signature"><strong>#select</strong>(pattern)</a> <div class="summary"><p>Returns an iterator that only returns elements where <code>pattern === element</code>.</p></div> </li> <li class="entry-summary"> <a href="#skip%28n%3AInt%29-instance-method" class="signature"><strong>#skip</strong>(n : Int)</a> <div class="summary"><p>Returns an iterator that skips the first <em>n</em> elements and only returns the elements after that.</p></div> </li> <li class="entry-summary"> <a href="#skip_while%28%26func%3AT-%3EU%29forallU-instance-method" class="signature"><strong>#skip_while</strong>(&amp;func : T -&gt; U) forall U</a> <div class="summary"><p>Returns an iterator that only starts to return elements once the given block has returned falsey value for one element.</p></div> </li> <li class="entry-summary"> <a href="#slice%28n%3AInt%2Creuse%3Dfalse%29-instance-method" class="signature"><strong>#slice</strong>(n : Int, reuse = false)</a> <div class="summary"><p>Alias of <code><a href="iterator.html#each_slice%28n%2Creuse%3Dfalse%29-instance-method">#each_slice</a></code>.</p></div> </li> <li class="entry-summary"> <a href="#slice_after%28reuse%3ABool%7CArray%28T%29%3Dfalse%2C%26block%3AT-%3EB%29forallB-instance-method" class="signature"><strong>#slice_after</strong>(reuse : Bool | Array(T) = false, &amp;block : T -&gt; B) forall B</a> <div class="summary"><p>Returns an iterator over chunks of elements, where each chunk ends right <strong>after</strong> the given block's value is <em>truthy</em>.</p></div> </li> <li class="entry-summary"> <a href="#slice_after%28pattern%2Creuse%3ABool%7CArray%28T%29%3Dfalse%29-instance-method" class="signature"><strong>#slice_after</strong>(pattern, reuse : Bool | Array(T) = false)</a> <div class="summary"><p>Returns an iterator over chunks of elements, where each chunk ends right <strong>after</strong> the given pattern is matched with <code>pattern === element</code>.</p></div> </li> <li class="entry-summary"> <a href="#slice_before%28reuse%3ABool%7CArray%28T%29%3Dfalse%2C%26block%3AT-%3EB%29forallB-instance-method" class="signature"><strong>#slice_before</strong>(reuse : Bool | Array(T) = false, &amp;block : T -&gt; B) forall B</a> <div class="summary"><p>Returns an iterator over chunks of elements, where each chunk ends right <strong>before</strong> the given block's value is <em>truthy</em>.</p></div> </li> <li class="entry-summary"> <a href="#slice_before%28pattern%2Creuse%3ABool%7CArray%28T%29%3Dfalse%29-instance-method" class="signature"><strong>#slice_before</strong>(pattern, reuse : Bool | Array(T) = false)</a> <div class="summary"><p>Returns an iterator over chunks of elements, where each chunk ends right <strong>before</strong> the given pattern is matched with <code>pattern === element</code>.</p></div> </li> <li class="entry-summary"> <a href="#slice_when%28reuse%3ABool%7CArray%28T%29%3Dfalse%2C%26block%3AT%2CT-%3EB%29forallB-instance-method" class="signature"><strong>#slice_when</strong>(reuse : Bool | Array(T) = false, &amp;block : T, T -&gt; B) forall B</a> <div class="summary"><p>Returns an iterator for each chunked elements where the ends of chunks are defined by the block, when the block's value over a pair of elements is <em>truthy</em>.</p></div> </li> <li class="entry-summary"> <a href="#step%28n%3AInt%29-instance-method" class="signature"><strong>#step</strong>(n : Int)</a> <div class="summary"><p>Returns an iterator that only returns every <em>n</em>th element, starting with the first.</p></div> </li> <li class="entry-summary"> <a href="#stop-instance-method" class="signature"><strong>#stop</strong></a> <div class="summary"><p>Shortcut for <code><a href="iterator/stop.html#INSTANCE">Iterator::Stop::INSTANCE</a></code>, to signal that there are no more elements in an iterator.</p></div> </li> <li class="entry-summary"> <a href="#take_while%28%26func%3AT-%3EU%29forallU-instance-method" class="signature"><strong>#take_while</strong>(&amp;func : T -&gt; U) forall U</a> <div class="summary"><p>Returns an iterator that returns elements while the given block returns a truthy value.</p></div> </li> <li class="entry-summary"> <a href="#tap%28%26block%3AT-%3E%29-instance-method" class="signature"><strong>#tap</strong>(&amp;block : T -&gt; )</a> <div class="summary"><p>Returns an iterator that calls the given block with the next element of the iterator when calling <code><a href="iterator.html#next-instance-method">#next</a></code>, still returning the original element.</p></div> </li> <li class="entry-summary"> <a href="#to_json%28json%3AJSON%3A%3ABuilder%29-instance-method" class="signature"><strong>#to_json</strong>(json : JSON::Builder)</a> <div class="summary"><p>Converts the content of an iterator into a JSON array in lazy way.</p></div> </li> <li class="entry-summary"> <a href="#to_yaml%28yaml%3AYAML%3A%3ANodes%3A%3ABuilder%29-instance-method" class="signature"><strong>#to_yaml</strong>(yaml : YAML::Nodes::Builder)</a> <div class="summary"><p>Converts the content of an iterator to YAML.</p></div> </li> <li class="entry-summary"> <a href="#uniq-instance-method" class="signature"><strong>#uniq</strong></a> <div class="summary"><p>Returns an iterator that only returns unique values of the original iterator.</p></div> </li> <li class="entry-summary"> <a href="#uniq%28%26func%3AT-%3EU%29forallU-instance-method" class="signature"><strong>#uniq</strong>(&amp;func : T -&gt; U) forall U</a> <div class="summary"><p>Returns an iterator that only returns unique values of the original iterator.</p></div> </li> <li class="entry-summary"> <a href="#with_index%28offset%3AInt%3D0%29-instance-method" class="signature"><strong>#with_index</strong>(offset : Int = 0)</a> <div class="summary"><p>Returns an iterator that returns a <code><a href="tuple.html">Tuple</a></code> of the element and its index.</p></div> </li> <li class="entry-summary"> <a href="#with_index%28offset%3AInt%3D0%2C%26%29-instance-method" class="signature"><strong>#with_index</strong>(offset : Int = 0, &amp;)</a> <div class="summary"><p>Yields each element in this iterator together with its index.</p></div> </li> <li class="entry-summary"> <a href="#with_object%28obj%29-instance-method" class="signature"><strong>#with_object</strong>(obj)</a> <div class="summary"><p>Returns an iterator that returns a <code><a href="tuple.html">Tuple</a></code> of the element and a given object.</p></div> </li> <li class="entry-summary"> <a href="#with_object%28obj%2C%26%29-instance-method" class="signature"><strong>#with_object</strong>(obj, &amp;)</a> <div class="summary"><p>Yields each element in this iterator together with <em>obj</em>.</p></div> </li> <li class="entry-summary"> <a href="#zip%28%2Aothers%3AIterator%29%3AIterator-instance-method" class="signature"><strong>#zip</strong>(*others : Iterator) : Iterator</a> <div class="summary"><p>Returns an iterator that returns the elements of this iterator and <em>others</em> traversed in tandem as <code><a href="tuple.html">Tuple</a></code>s.</p></div> </li> </ul> <div class="methods-inherited"> <h3>Instance methods inherited from module <code><a href="enumerable.html">Enumerable(T)</a></code>
</h3> <a href="enumerable.html#accumulate%28initial%3AU%29%3AArray%28U%29forallU-instance-method" class="tooltip"> accumulate(initial : U) : Array(U) forall U<br>accumulate : Array(T)<br>accumulate(initial : U, &amp;block : U, T -&gt; U) : Array(U) forall U<br>accumulate(&amp;block : T, T -&gt; T) : Array(T) accumulate</a>, <a href="enumerable.html#all%3F%28%26%3AT-%3E%29%3ABool-instance-method" class="tooltip"> all?(&amp; : T -&gt; ) : Bool<br>all?(pattern) : Bool<br>all? : Bool all?</a>, <a href="enumerable.html#any%3F%28%26%3AT-%3E%29%3ABool-instance-method" class="tooltip"> any?(&amp; : T -&gt; ) : Bool<br>any?(pattern) : Bool<br>any? : Bool any?</a>, <a href="enumerable.html#chunks%28%26block%3AT-%3EU%29forallU-instance-method" class="tooltip"> chunks(&amp;block : T -&gt; U) forall U chunks</a>, <a href="enumerable.html#compact_map%28%26%3AT-%3E_%29-instance-method" class="tooltip"> compact_map(&amp; : T -&gt; _) compact_map</a>, <a href="enumerable.html#count%28%26%3AT-%3E%29%3AInt32-instance-method" class="tooltip"> count(&amp; : T -&gt; ) : Int32<br>count(item) : Int32 count</a>, <a href="enumerable.html#cycle%28n%2C%26%3AT-%3E%29%3ANil-instance-method" class="tooltip"> cycle(n, &amp; : T -&gt; ) : Nil<br>cycle(&amp; : T -&gt; ) : Nil cycle</a>, <a href="enumerable.html#each%28%26%3AT-%3E%29-instance-method" class="tooltip"> each(&amp; : T -&gt; ) each</a>, <a href="enumerable.html#each_cons%28count%3AInt%2Creuse%3Dfalse%2C%26%29-instance-method" class="tooltip"> each_cons(count : Int, reuse = false, &amp;) each_cons</a>, <a href="enumerable.html#each_cons_pair%28%26%3AT%2CT-%3E%29%3ANil-instance-method" class="tooltip"> each_cons_pair(&amp; : T, T -&gt; ) : Nil each_cons_pair</a>, <a href="enumerable.html#each_slice%28count%3AInt%2Creuse%3Dfalse%2C%26%29-instance-method" class="tooltip"> each_slice(count : Int, reuse = false, &amp;) each_slice</a>, <a href="enumerable.html#each_step%28n%3AInt%2C%2A%2Coffset%3AInt%3D0%2C%26%3AT-%3E%29%3ANil-instance-method" class="tooltip"> each_step(n : Int, *, offset : Int = 0, &amp; : T -&gt; ) : Nil each_step</a>, <a href="enumerable.html#each_with_index%28offset%3D0%2C%26%29-instance-method" class="tooltip"> each_with_index(offset = 0, &amp;) each_with_index</a>, <a href="enumerable.html#each_with_object%28obj%3AU%2C%26%3AT%2CU-%3E%29%3AUforallU-instance-method" class="tooltip"> each_with_object(obj : U, &amp; : T, U -&gt; ) : U forall U each_with_object</a>, <a href="enumerable.html#empty%3F%3ABool-instance-method" class="tooltip"> empty? : Bool empty?</a>, <a href="enumerable.html#find%28if_none%3Dnil%2C%26%3AT-%3E%29-instance-method" class="tooltip"> find(if_none = nil, &amp; : T -&gt; ) find</a>, <a href="enumerable.html#find%21%28%26%3AT-%3E%29%3AT-instance-method" class="tooltip"> find!(&amp; : T -&gt; ) : T find!</a>, <a href="enumerable.html#first%28%26%29-instance-method" class="tooltip"> first(&amp;)<br>first(count : Int) : Array(T)<br>first : T first</a>, <a href="enumerable.html#first%3F%3AT%7CNil-instance-method" class="tooltip"> first? : T | Nil first?</a>, <a href="enumerable.html#flat_map%28%26%3AT-%3E_%29-instance-method" class="tooltip"> flat_map(&amp; : T -&gt; _) flat_map</a>, <a href="enumerable.html#group_by%28%26%3AT-%3EU%29forallU-instance-method" class="tooltip"> group_by(&amp; : T -&gt; U) forall U group_by</a>, <a href="enumerable.html#in_groups_of%28size%3AInt%2Cfilled_up_with%3AU%3Dnil%29forallU-instance-method" class="tooltip"> in_groups_of(size : Int, filled_up_with : U = nil) forall U<br>in_groups_of(size : Int, filled_up_with : U = nil, reuse = false, &amp;) forall U in_groups_of</a>, <a href="enumerable.html#in_slices_of%28size%3AInt%29%3AArray%28Array%28T%29%29-instance-method" class="tooltip"> in_slices_of(size : Int) : Array(Array(T)) in_slices_of</a>, <a href="enumerable.html#includes%3F%28obj%29%3ABool-instance-method" class="tooltip"> includes?(obj) : Bool includes?</a>, <a href="enumerable.html#index%28%26%3AT-%3E%29%3AInt32%7CNil-instance-method" class="tooltip"> index(&amp; : T -&gt; ) : Int32 | Nil<br>index(obj) : Int32 | Nil index</a>, <a href="enumerable.html#index%21%28%26%3AT-%3E%29%3AInt32-instance-method" class="tooltip"> index!(&amp; : T -&gt; ) : Int32<br>index!(obj) : Int32 index!</a>, <a href="enumerable.html#index_by%28%26%3AT-%3EU%29%3AHash%28U%2CT%29forallU-instance-method" class="tooltip"> index_by(&amp; : T -&gt; U) : Hash(U, T) forall U index_by</a>, <a href="enumerable.html#join%28io%3AIO%2Cseparator%3D%22%22%29%3ANil-instance-method" class="tooltip"> join(io : IO, separator = "") : Nil<br>join(separator, io : IO) : Nil<br>join(separator = "") : String<br>join(io : IO, separator = "", &amp; : T, IO -&gt; )<br>join(separator, io : IO, &amp;)<br>join(separator = "", &amp; : T -&gt; ) join</a>, <a href="enumerable.html#map%28%26%3AT-%3EU%29%3AArray%28U%29forallU-instance-method" class="tooltip"> map(&amp; : T -&gt; U) : Array(U) forall U map</a>, <a href="enumerable.html#map_with_index%28offset%3D0%2C%26%3AT%2CInt32-%3EU%29%3AArray%28U%29forallU-instance-method" class="tooltip"> map_with_index(offset = 0, &amp; : T, Int32 -&gt; U) : Array(U) forall U map_with_index</a>, <a href="enumerable.html#max%28count%3AInt%29%3AArray%28T%29-instance-method" class="tooltip"> max(count : Int) : Array(T)<br>max : T max</a>, <a href="enumerable.html#max%3F%3AT%7CNil-instance-method" class="tooltip"> max? : T | Nil max?</a>, <a href="enumerable.html#max_by%28%26%3AT-%3EU%29%3ATforallU-instance-method" class="tooltip"> max_by(&amp; : T -&gt; U) : T forall U max_by</a>, <a href="enumerable.html#max_by%3F%28%26%3AT-%3EU%29%3AT%7CNilforallU-instance-method" class="tooltip"> max_by?(&amp; : T -&gt; U) : T | Nil forall U max_by?</a>, <a href="enumerable.html#max_of%28%26%3AT-%3EU%29%3AUforallU-instance-method" class="tooltip"> max_of(&amp; : T -&gt; U) : U forall U max_of</a>, <a href="enumerable.html#max_of%3F%28%26%3AT-%3EU%29%3AU%7CNilforallU-instance-method" class="tooltip"> max_of?(&amp; : T -&gt; U) : U | Nil forall U max_of?</a>, <a href="enumerable.html#min%28count%3AInt%29%3AArray%28T%29-instance-method" class="tooltip"> min(count : Int) : Array(T)<br>min : T min</a>, <a href="enumerable.html#min%3F%3AT%7CNil-instance-method" class="tooltip"> min? : T | Nil min?</a>, <a href="enumerable.html#min_by%28%26%3AT-%3EU%29%3ATforallU-instance-method" class="tooltip"> min_by(&amp; : T -&gt; U) : T forall U min_by</a>, <a href="enumerable.html#min_by%3F%28%26%3AT-%3EU%29%3AT%7CNilforallU-instance-method" class="tooltip"> min_by?(&amp; : T -&gt; U) : T | Nil forall U min_by?</a>, <a href="enumerable.html#min_of%28%26%3AT-%3EU%29%3AUforallU-instance-method" class="tooltip"> min_of(&amp; : T -&gt; U) : U forall U min_of</a>, <a href="enumerable.html#min_of%3F%28%26%3AT-%3EU%29%3AU%7CNilforallU-instance-method" class="tooltip"> min_of?(&amp; : T -&gt; U) : U | Nil forall U min_of?</a>, <a href="enumerable.html#minmax%3ATuple%28T%2CT%29-instance-method" class="tooltip"> minmax : Tuple(T, T) minmax</a>, <a href="enumerable.html#minmax%3F%3ATuple%28T%7CNil%2CT%7CNil%29-instance-method" class="tooltip"> minmax? : Tuple(T | Nil, T | Nil) minmax?</a>, <a href="enumerable.html#minmax_by%28%26%3AT-%3EU%29%3ATuple%28T%2CT%29forallU-instance-method" class="tooltip"> minmax_by(&amp; : T -&gt; U) : Tuple(T, T) forall U minmax_by</a>, <a href="enumerable.html#minmax_by%3F%28%26%3AT-%3EU%29%3ATuple%28T%2CT%29%7CTuple%28Nil%2CNil%29forallU-instance-method" class="tooltip"> minmax_by?(&amp; : T -&gt; U) : Tuple(T, T) | Tuple(Nil, Nil) forall U minmax_by?</a>, <a href="enumerable.html#minmax_of%28%26%3AT-%3EU%29%3ATuple%28U%2CU%29forallU-instance-method" class="tooltip"> minmax_of(&amp; : T -&gt; U) : Tuple(U, U) forall U minmax_of</a>, <a href="enumerable.html#minmax_of%3F%28%26%3AT-%3EU%29%3ATuple%28U%2CU%29%7CTuple%28Nil%2CNil%29forallU-instance-method" class="tooltip"> minmax_of?(&amp; : T -&gt; U) : Tuple(U, U) | Tuple(Nil, Nil) forall U minmax_of?</a>, <a href="enumerable.html#none%3F%28%26%3AT-%3E%29%3ABool-instance-method" class="tooltip"> none?(&amp; : T -&gt; ) : Bool<br>none?(pattern) : Bool<br>none? : Bool none?</a>, <a href="enumerable.html#one%3F%28%26%3AT-%3E%29%3ABool-instance-method" class="tooltip"> one?(&amp; : T -&gt; ) : Bool<br>one?(pattern) : Bool<br>one? : Bool one?</a>, <a href="enumerable.html#partition%28%26%3AT-%3E%29%3ATuple%28Array%28T%29%2CArray%28T%29%29-instance-method" class="tooltip"> partition(&amp; : T -&gt; ) : Tuple(Array(T), Array(T))<br>partition(type : U.class) forall U partition</a>, <a href="enumerable.html#present%3F%3ABool-instance-method" class="tooltip"> present? : Bool present?</a>, <a href="enumerable.html#product%28initial%3ANumber%29-instance-method" class="tooltip"> product(initial : Number)<br>product<br>product(initial : Number, &amp; : T -&gt; )<br>product(&amp; : T -&gt; _) product</a>, <a href="enumerable.html#reduce%28memo%2C%26%29-instance-method" class="tooltip"> reduce(memo, &amp;)<br>reduce(&amp;) reduce</a>, <a href="enumerable.html#reduce%3F%28%26%29-instance-method" class="tooltip"> reduce?(&amp;) reduce?</a>, <a href="enumerable.html#reject%28%26%3AT-%3E%29-instance-method" class="tooltip"> reject(&amp; : T -&gt; )<br>reject(type : U.class) forall U<br>reject(pattern) : Array(T) reject</a>, <a href="enumerable.html#sample%28n%3AInt%2Crandom%3ARandom%3DRandom%3A%3ADEFAULT%29%3AArray%28T%29-instance-method" class="tooltip"> sample(n : Int, random : Random = Random::DEFAULT) : Array(T)<br>sample(random : Random = Random::DEFAULT) : T sample</a>, <a href="enumerable.html#select%28%26%3AT-%3E%29-instance-method" class="tooltip"> select(&amp; : T -&gt; )<br>select(type : U.class) : Array(U) forall U<br>select(pattern) : Array(T) select</a>, <a href="enumerable.html#size%3AInt32-instance-method" class="tooltip"> size : Int32 size</a>, <a href="enumerable.html#skip%28count%3AInt%29-instance-method" class="tooltip"> skip(count : Int) skip</a>, <a href="enumerable.html#skip_while%28%26%3AT-%3E%29%3AArray%28T%29-instance-method" class="tooltip"> skip_while(&amp; : T -&gt; ) : Array(T) skip_while</a>, <a href="enumerable.html#sum%28initial%29-instance-method" class="tooltip"> sum(initial)<br>sum<br>sum(initial, &amp; : T -&gt; )<br>sum(&amp; : T -&gt; ) sum</a>, <a href="enumerable.html#take_while%28%26%3AT-%3E%29%3AArray%28T%29-instance-method" class="tooltip"> take_while(&amp; : T -&gt; ) : Array(T) take_while</a>, <a href="enumerable.html#tally%28hash%29-instance-method" class="tooltip"> tally(hash)<br>tally : Hash(T, Int32) tally</a>, <a href="enumerable.html#tally_by%28hash%2C%26%29-instance-method" class="tooltip"> tally_by(hash, &amp;)<br>tally_by(&amp;block : T -&gt; U) : Hash(U, Int32) forall U tally_by</a>, <a href="enumerable.html#to_a%3AArray%28T%29-instance-method" class="tooltip"> to_a : Array(T)<br>to_a(&amp; : T -&gt; U) : Array(U) forall U to_a</a>, <a href="enumerable.html#to_h-instance-method" class="tooltip"> to_h<br>to_h(&amp; : T -&gt; Tuple(K, V)) forall K, V to_h</a>, <a href="enumerable.html#to_set%3ASet%28T%29-instance-method" class="tooltip"> to_set : Set(T)<br>to_set(&amp;block : T -&gt; U) : Set(U) forall U to_set</a>, <a href="enumerable.html#zip%28%2Aothers%3AIndexable%7CIterable%7CIterator%2C%26%29-instance-method" class="tooltip"> zip(*others : Indexable | Iterable | Iterator, &amp;)<br>zip(*others : Indexable | Iterable | Iterator) zip</a>, <a href="enumerable.html#zip%3F%28%2Aothers%3AIndexable%7CIterable%7CIterator%2C%26%29-instance-method" class="tooltip"> zip?(*others : Indexable | Iterable | Iterator, &amp;)<br>zip?(*others : Indexable | Iterable | Iterator) zip?</a> <h3>Class methods inherited from module <code><a href="enumerable.html">Enumerable(T)</a></code>
</h3> <a href="enumerable.html#element_type%28x%29-class-method" class="tooltip"> element_type(x) element_type</a> </div> <h2>  Constructor Detail </h2> <div class="entry-detail" id="new(pull:JSON::PullParser)-class-method"> <h3 class="signature">def self.<strong>new</strong>(pull : <a href="json/pullparser.html">JSON::PullParser</a>)<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/json/from_json.cr#L93" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Creates a new iterator which iterates over a JSON array. See also <code><a href="iterator.html#from_json%28string_or_io%29-class-method">Iterator#from_json</a></code>.</p> <p>WARNING The <code><a href="json/pullparser.html">JSON::PullParser</a></code> can't be used by anything else until the iterator is fully consumed.</p> </div>   </div> <h2>  Class Method Detail </h2> <div class="entry-detail" id="chain(iters:Iterator(Iter))forallIter-class-method"> <h3 class="signature">def self.<strong>chain</strong>(iters : <a href="iterator.html">Iterator</a>(Iter)) forall Iter<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L343" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>The same as <code><a href="iterator.html#chain%28other%3AIterator%28U%29%29forallU-instance-method">#chain</a></code>, but have better performance when the quantity of iterators to chain is large (usually greater than 4) or undetermined.</p> <pre data-language="crystal">array_of_iters = [[1], [2, 3], [4, 5, 6]].each.map &amp;.each
iter = Iterator(Int32).chain array_of_iters
iter.next # =&gt; 1
iter.next # =&gt; 2
iter.next # =&gt; 3
iter.next # =&gt; 4</pre> </div>   </div> <div class="entry-detail" id="chain(iters:Iterable(Iter))forallIter-class-method"> <h3 class="signature">def self.<strong>chain</strong>(iters : <a href="iterable.html">Iterable</a>(Iter)) forall Iter<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L348" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>the same as <code><a href="iterator.html#chain%28iters%3AIterator%28Iter%29%29forallIter-class-method">.chain(Iterator(Iter)</a>)</code></p> </div>   </div> <div class="entry-detail" id="from_json(string_or_io)-class-method"> <h3 class="signature">def self.<strong>from_json</strong>(string_or_io)<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/json/from_json.cr#L86" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Reads the content of a JSON array into an iterator in a lazy way. With this method it should be possible to process a huge JSON array, without the requirement that the whole array fits into memory.</p> <p>The following example produces a huge file, uses a lot of CPU but should not require much memory.</p> <pre data-language="crystal">File.open("/tmp/test.json", "w+") do |f|
  (0..1_000_000_000).each.to_json(f)
end

File.open("/tmp/test.json", "r") do |f|
  p Iterator(Int32).from_json(f).skip(1_000_000_000).to_a
end</pre> <p>WARNING The <code>string_or_io</code> can't be used by anything else until the iterator is fully consumed.</p> </div>   </div> <div class="entry-detail" id="of(element:T)-class-method"> <h3 class="signature">def self.<strong>of</strong>(element : T)<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L147" target="_blank" class="view-source">Source</a>
</h3>   </div> <div class="entry-detail" id="of(&amp;block:-&gt;T)-class-method"> <h3 class="signature">def self.<strong>of</strong>(&amp;block : -&gt; T)<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L162" target="_blank" class="view-source">Source</a>
</h3>   </div> <div class="entry-detail" id="stop-class-method"> <h3 class="signature">def self.<strong>stop</strong><a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L143" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Shortcut for <code><a href="iterator/stop.html#INSTANCE">Iterator::Stop::INSTANCE</a></code>, to signal that there are no more elements in an iterator.</p> </div>   </div> <h2>  Instance Method Detail </h2> <div class="entry-detail" id="accumulate(initial:U)forallU-instance-method"> <h3 class="signature">def <strong>accumulate</strong>(initial : U) forall U<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L218" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an iterator that returns <em>initial</em> and its prefix sums with the original iterator's elements.</p> <p>Expects <code>U</code> to respond to the <code>#+</code> method.</p> <pre data-language="crystal">iter = (3..6).each.accumulate(7)
iter.next # =&gt; 7
iter.next # =&gt; 10
iter.next # =&gt; 14
iter.next # =&gt; 19
iter.next # =&gt; 25
iter.next # =&gt; Iterator::Stop::INSTANCE</pre> </div>   </div> <div class="entry-detail" id="accumulate-instance-method"> <h3 class="signature">def <strong>accumulate</strong><a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L200" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an iterator that returns the prefix sums of the original iterator's elements.</p> <p>Expects <code>T</code> to respond to the <code>#+</code> method.</p> <pre data-language="crystal">iter = (3..6).each.accumulate
iter.next # =&gt; 3
iter.next # =&gt; 7
iter.next # =&gt; 12
iter.next # =&gt; 18
iter.next # =&gt; Iterator::Stop::INSTANCE</pre> </div>   </div> <div class="entry-detail" id="accumulate(initial:U,&amp;block:U,T-&gt;U)forallU-instance-method"> <h3 class="signature">def <strong>accumulate</strong>(initial : U, &amp;block : U, T -&gt; U) forall U<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L257" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an iterator that accumulates <em>initial</em> with the original iterator's elements by the given <em>block</em>.</p> <p>Similar to <code>#accumulate(&amp;block : T, T -&gt; T)</code>, except the initial value is provided by an argument and needs not have the same type as the elements of the original iterator. This initial value is returned first.</p> <pre data-language="crystal">iter = [4, 3, 2].each.accumulate("X") { |x, y| x * y }
iter.next # =&gt; "X"
iter.next # =&gt; "XXXX"
iter.next # =&gt; "XXXXXXXXXXXX"
iter.next # =&gt; "XXXXXXXXXXXXXXXXXXXXXXXX"
iter.next # =&gt; Iterator::Stop::INSTANCE</pre> </div>   </div> <div class="entry-detail" id="accumulate(&amp;block:T,T-&gt;T)-instance-method"> <h3 class="signature">def <strong>accumulate</strong>(&amp;block : T, T -&gt; T)<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L238" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an iterator that accumulates the original iterator's elements by the given <em>block</em>.</p> <p>For each element of the original iterator the block is passed an accumulator value and the element. The result becomes the new value for the accumulator and is then returned. The initial value for the accumulator is the first element of the original iterator.</p> <pre data-language="crystal">iter = %w(the quick brown fox).each.accumulate { |x, y| "#{x}, #{y}" }
iter.next # =&gt; "the"
iter.next # =&gt; "the, quick"
iter.next # =&gt; "the, quick, brown"
iter.next # =&gt; "the, quick, brown, fox"
iter.next # =&gt; Iterator::Stop::INSTANCE</pre> </div>   </div> <div class="entry-detail" id="chain(other:Iterator(U))forallU-instance-method"> <h3 class="signature">def <strong>chain</strong>(other : <a href="iterator.html">Iterator</a>(U)) forall U<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L308" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an iterator that returns elements from the original iterator until it is exhausted and then returns the elements of the second iterator. Compared to <code><a href="iterator.html#chain%28iters%3AIterator%28Iter%29%29forallIter-class-method">.chain(Iterator(Iter)</a>)</code>, it has better performance when the quantity of iterators to chain is small (usually less than 4). This method also cannot chain iterators in a loop, for that see <code><a href="iterator.html#chain%28iters%3AIterator%28Iter%29%29forallIter-class-method">.chain(Iterator(Iter)</a>)</code>.</p> <pre data-language="crystal">iter = (1..2).each.chain(('a'..'b').each)
iter.next # =&gt; 1
iter.next # =&gt; 2
iter.next # =&gt; 'a'
iter.next # =&gt; 'b'
iter.next # =&gt; Iterator::Stop::INSTANCE</pre> </div>   </div> <div class="entry-detail" id="chunk(reuse=false,&amp;block:T-&gt;U)forallT,U-instance-method"> <h3 class="signature">def <strong>chunk</strong>(reuse = false, &amp;block : T -&gt; U) forall T, U<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L1493" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an Iterator that enumerates over the items, chunking them together based on the return value of the block.</p> <p>Consecutive elements which return the same block value are chunked together.</p> <p>For example, consecutive even numbers and odd numbers can be chunked as follows.</p> <pre data-language="crystal">[3, 1, 4, 1, 5, 9, 2, 6, 5, 3, 5].chunk(&amp;.even?).each do |even, ary|
  p [even, ary]
end

# =&gt; [false, [3, 1]]
#    [true, [4]]
#    [false, [1, 5, 9]]
#    [true, [2, 6]]
#    [false, [5, 3, 5]]</pre> <p>The following key values have special meaning:</p> <ul> <li>
<code><a href="enumerable/chunk/drop.html">Enumerable::Chunk::Drop</a></code> specifies that the elements should be dropped</li> <li>
<code><a href="enumerable/chunk/alone.html">Enumerable::Chunk::Alone</a></code> specifies that the element should be chunked by itself</li> </ul> <p>By default, a new array is created and yielded for each chunk when invoking <code><a href="iterator.html#next-instance-method">#next</a></code>.</p> <ul> <li>If <em>reuse</em> is given, the array can be reused</li> <li>If <em>reuse</em> is an <code><a href="array.html">Array</a></code>, this array will be reused</li> <li>If <em>reuse</em> is truthy, the method will create a new array and reuse it.</li> </ul> <p>This can be used to prevent many memory allocations when each slice of interest is to be used in a read-only fashion.</p> <p>See also: <code><a href="enumerable.html#chunks%28%26block%3AT-%3EU%29forallU-instance-method">Enumerable#chunks</a></code>.</p> </div>   </div> <div class="entry-detail" id="chunk_while(reuse:Bool|Array(T)=false,&amp;block:T,T-&gt;B)forallB-instance-method"> <h3 class="signature">def <strong>chunk_while</strong>(reuse : <a href="bool.html">Bool</a> | <a href="array.html">Array</a>(T) = false, &amp;block : T, T -&gt; B) forall B<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L1808" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an iterator for each chunked elements where elements are kept in a given chunk as long as the block's value over a pair of elements is <em>truthy</em>.</p> <p>For example, one-by-one increasing subsequences can be chunked as follows:</p> <pre data-language="crystal">ary = [1, 2, 4, 9, 10, 11, 12, 15, 16, 19, 20, 21]
iter = ary.chunk_while { |i, j| i + 1 == j }
iter.next # =&gt; [1, 2]
iter.next # =&gt; [4]
iter.next # =&gt; [9, 10, 11, 12]
iter.next # =&gt; [15, 16]
iter.next # =&gt; [19, 20, 21]
iter.next # =&gt; Iterator::Stop::INSTANCE</pre> <p>By default, a new array is created and yielded for each slice when invoking <code><a href="iterator.html#next-instance-method">#next</a></code>.</p> <ul> <li>If <em>reuse</em> is <code>false</code>, the method will create a new array for each chunk</li> <li>If <em>reuse</em> is <code>true</code>, the method will create a new array and reuse it.</li> <li>If <em>reuse</em> is an <code><a href="array.html">Array</a></code>, that array will be reused</li> </ul> <p>This can be used to prevent many memory allocations when each slice of interest is to be used in a read-only fashion.</p> <p>See also <code><a href="iterator.html#slice_when%28reuse%3ABool%7CArray%28T%29%3Dfalse%2C%26block%3AT%2CT-%3EB%29forallB-instance-method">#slice_when</a></code>, which works similarly but the block's condition is inverted.</p> </div>   </div> <div class="entry-detail" id="compact_map(&amp;func:T-&gt;_)-instance-method"> <h3 class="signature">def <strong>compact_map</strong>(&amp;func : T -&gt; _)<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L383" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an iterator that applies the given function to the element and then returns it unless it is <code>nil</code>. If the returned value would be <code>nil</code> it instead returns the next non <code>nil</code> value.</p> <pre data-language="crystal">iter = [1, nil, 2, nil].each.compact_map { |e| e.try &amp;.*(2) }
iter.next # =&gt; 2
iter.next # =&gt; 4
iter.next # =&gt; Iterator::Stop::INSTANCE</pre> </div>   </div> <div class="entry-detail" id="cons(n:Int,reuse=false)-instance-method"> <h3 class="signature">def <strong>cons</strong>(n : <a href="int.html">Int</a>, reuse = false)<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L426" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an iterator that returns consecutive chunks of the size <em>n</em>.</p> <pre data-language="crystal">iter = (1..5).each.cons(3)
iter.next # =&gt; [1, 2, 3]
iter.next # =&gt; [2, 3, 4]
iter.next # =&gt; [3, 4, 5]
iter.next # =&gt; Iterator::Stop::INSTANCE</pre> <p>By default, a new array is created and returned for each consecutive call of <code><a href="iterator.html#next-instance-method">#next</a></code>.</p> <ul> <li>If <em>reuse</em> is given, the array can be reused</li> <li>If <em>reuse</em> is <code>true</code>, the method will create a new array and reuse it.</li> <li>If <em>reuse</em> is an instance of <code><a href="array.html">Array</a></code>, <code><a href="deque.html">Deque</a></code> or a similar collection type (implementing <code>#&lt;&lt;</code>, <code>#shift</code> and <code>#size</code>) it will be used.</li> <li>If <em>reuse</em> is falsey, the array will not be reused.</li> </ul> <p>This can be used to prevent many memory allocations when each slice of interest is to be used in a read-only fashion.</p> <p>Chunks of two items can be iterated using <code><a href="iterator.html#cons_pair%3AIterator%28Tuple%28T%2CT%29%29-instance-method">#cons_pair</a></code>, an optimized implementation for the special case of <code>n == 2</code> which avoids heap allocations.</p> </div>   </div> <div class="entry-detail" id="cons_pair:Iterator(Tuple(T,T))-instance-method"> <h3 class="signature">def <strong>cons_pair</strong> : <a href="iterator.html">Iterator</a>(<a href="tuple.html">Tuple</a>(T, T))<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L476" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an iterator that returns consecutive pairs of adjacent items.</p> <pre data-language="crystal">iter = (1..5).each.cons_pair
iter.next # =&gt; {1, 2}
iter.next # =&gt; {2, 3}
iter.next # =&gt; {3, 4}
iter.next # =&gt; {4, 5}
iter.next # =&gt; Iterator::Stop::INSTANCE</pre> <p>Chunks of more than two items can be iterated using <code><a href="iterator.html#cons%28n%3AInt%2Creuse%3Dfalse%29-instance-method">#cons</a></code>. This method is just an optimized implementation for the special case of <code>n == 2</code> to avoid heap allocations.</p> </div>   </div> <div class="entry-detail" id="cycle(n:Int)-instance-method"> <h3 class="signature">def <strong>cycle</strong>(n : <a href="int.html">Int</a>)<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L574" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an iterator that repeatedly returns the elements of the original iterator starting back at the beginning when the end was reached, but only <em>n</em> times.</p> <pre data-language="crystal">iter = ["a", "b", "c"].each.cycle(2)
iter.next # =&gt; "a"
iter.next # =&gt; "b"
iter.next # =&gt; "c"
iter.next # =&gt; "a"
iter.next # =&gt; "b"
iter.next # =&gt; "c"
iter.next # =&gt; Iterator::Stop::INSTANCE</pre> </div>   </div> <div class="entry-detail" id="cycle-instance-method"> <h3 class="signature">def <strong>cycle</strong><a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L518" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an iterator that repeatedly returns the elements of the original iterator forever starting back at the beginning when the end was reached.</p> <pre data-language="crystal">iter = ["a", "b", "c"].each.cycle
iter.next # =&gt; "a"
iter.next # =&gt; "b"
iter.next # =&gt; "c"
iter.next # =&gt; "a"
iter.next # =&gt; "b"
iter.next # =&gt; "c"
iter.next # =&gt; "a"
# and so an and so on</pre> </div>   </div> <div class="entry-detail" id="each-instance-method"> <h3 class="signature">def <strong>each</strong><a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L623" target="_blank" class="view-source">Source</a>
</h3>   </div> <div class="entry-detail" id="each(&amp;:T-&gt;):Nil-instance-method"> <h3 class="signature">def <strong>each</strong>(&amp; : T -&gt; ) : <a href="nil.html">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L634" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Calls the given block once for each element, passing that element as a parameter.</p> <pre data-language="crystal">iter = ["a", "b", "c"].each
iter.each { |x| print x, " " } # Prints "a b c"</pre> </div>   </div> <div class="entry-detail" id="each_slice(n,reuse=false)-instance-method"> <h3 class="signature">def <strong>each_slice</strong>(n, reuse = false)<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L660" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an iterator that then returns slices of <em>n</em> elements of the initial iterator.</p> <pre data-language="crystal">iter = (1..9).each.each_slice(3)
iter.next # =&gt; [1, 2, 3]
iter.next # =&gt; [4, 5, 6]
iter.next # =&gt; [7, 8, 9]
iter.next # =&gt; Iterator::Stop::INSTANCE</pre> <p>By default, a new array is created and yielded for each consecutive when invoking <code><a href="iterator.html#next-instance-method">#next</a></code>.</p> <ul> <li>If <em>reuse</em> is given, the array can be reused</li> <li>If <em>reuse</em> is an <code><a href="array.html">Array</a></code>, this array will be reused</li> <li>If <em>reuse</em> is truthy, the method will create a new array and reuse it.</li> </ul> <p>This can be used to prevent many memory allocations when each slice of interest is to be used in a read-only fashion.</p> </div>   </div> <div class="entry-detail" id="first(n:Int)-instance-method"> <h3 class="signature">def <strong>first</strong>(n : <a href="int.html">Int</a>)<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L1206" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an iterator that only returns the first <em>n</em> elements of the initial iterator.</p> <pre data-language="crystal">iter = ["a", "b", "c"].each.first 2
iter.next # =&gt; "a"
iter.next # =&gt; "b"
iter.next # =&gt; Iterator::Stop::INSTANCE</pre> </div>   </div> <div class="entry-detail" id="flat_map(&amp;func:T-&gt;_)-instance-method"> <h3 class="signature">def <strong>flat_map</strong>(&amp;func : T -&gt; _)<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L756" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns a new iterator with the concatenated results of running the block once for every element in the collection. Only <code><a href="array.html">Array</a></code> and <code><a href="iterator.html">Iterator</a></code> results are concatenated; every other value is returned once in the new iterator.</p> <pre data-language="crystal">iter = [1, 2, 3].each.flat_map { |x| [x, x] }

iter.next # =&gt; 1
iter.next # =&gt; 1
iter.next # =&gt; 2

iter = [1, 2, 3].each.flat_map { |x| [x, x].each }

iter.to_a # =&gt; [1, 1, 2, 2, 3, 3]</pre> </div>   </div> <div class="entry-detail" id="flatten-instance-method"> <h3 class="signature">def <strong>flatten</strong><a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L676" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an iterator that flattens nested iterators and arrays into a single iterator whose type is the union of the simple types of all of the nested iterators and arrays (and their nested iterators and arrays, and so on).</p> <pre data-language="crystal">iter = [(1..2).each, ('a'..'b').each].each.flatten
iter.next # =&gt; 1
iter.next # =&gt; 2
iter.next # =&gt; 'a'
iter.next # =&gt; 'b'
iter.next # =&gt; Iterator::Stop::INSTANCE</pre> </div>   </div> <div class="entry-detail" id="in_groups_of(size:Int,filled_up_with=nil,reuse=false)-instance-method"> <h3 class="signature">def <strong>in_groups_of</strong>(size : <a href="int.html">Int</a>, filled_up_with = nil, reuse = false)<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L849" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an iterator that chunks the iterator's elements in arrays of <em>size</em> filling up the remaining elements if no element remains with <code>nil</code> or a given optional parameter.</p> <pre data-language="crystal">iter = (1..3).each.in_groups_of(2)
iter.next # =&gt; [1, 2]
iter.next # =&gt; [3, nil]
iter.next # =&gt; Iterator::Stop::INSTANCE</pre> <pre data-language="crystal">iter = (1..3).each.in_groups_of(2, 'z')
iter.next # =&gt; [1, 2]
iter.next # =&gt; [3, 'z']
iter.next # =&gt; Iterator::Stop::INSTANCE</pre> <p>By default, a new array is created and yielded for each group.</p> <ul> <li>If <em>reuse</em> is given, the array can be reused</li> <li>If <em>reuse</em> is an <code><a href="array.html">Array</a></code>, this array will be reused</li> <li>If <em>reuse</em> is truthy, the method will create a new array and reuse it.</li> </ul> <p>This can be used to prevent many memory allocations when each slice of interest is to be used in a read-only fashion.</p> </div>   </div> <div class="entry-detail" id="map(&amp;func:T-&gt;U)forallU-instance-method"> <h3 class="signature">def <strong>map</strong>(&amp;func : T -&gt; U) forall U<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L902" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an iterator that applies the given block to the next element and returns the result.</p> <pre data-language="crystal">iter = [1, 2, 3].each.map &amp;.*(2)
iter.next # =&gt; 2
iter.next # =&gt; 4
iter.next # =&gt; 6
iter.next # =&gt; Iterator::Stop::INSTANCE</pre> </div>   </div> <div class="entry-detail" id="next-instance-method"> <h3 class="signature">abstract def <strong>next</strong><a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L185" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns the next element in this iterator, or <code><a href="iterator/stop.html#INSTANCE">Iterator::Stop::INSTANCE</a></code> if there are no more elements.</p> </div>   </div> <div class="entry-detail" id="reject(&amp;func:T-&gt;U)forallU-instance-method"> <h3 class="signature">def <strong>reject</strong>(&amp;func : T -&gt; U) forall U<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L927" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an iterator that only returns elements for which the passed in block returns a falsey value.</p> <pre data-language="crystal">iter = [1, 2, 3].each.reject &amp;.odd?
iter.next # =&gt; 2
iter.next # =&gt; Iterator::Stop::INSTANCE</pre> </div>   </div> <div class="entry-detail" id="reject(type:U.class)forallU-instance-method"> <h3 class="signature">def <strong>reject</strong>(type : U.class) forall U<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L940" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an iterator that only returns elements that are <strong>not</strong> of the given <em>type</em>.</p> <pre data-language="crystal">iter = [1, false, 3, true].each.reject(Bool)
iter.next # =&gt; 1
iter.next # =&gt; 3
iter.next # =&gt; Iterator::Stop::INSTANCE</pre> </div>   </div> <div class="entry-detail" id="reject(pattern)-instance-method"> <h3 class="signature">def <strong>reject</strong>(pattern)<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L957" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an iterator that only returns elements where <code>pattern === element</code> does not hold.</p> <pre data-language="crystal">iter = [2, 3, 1, 5, 4, 6].each.reject(3..5)
iter.next # =&gt; 2
iter.next # =&gt; 1
iter.next # =&gt; 6
iter.next # =&gt; Iterator::Stop::INSTANCE</pre> </div>   </div> <div class="entry-detail" id="select(&amp;func:T-&gt;U)forallU-instance-method"> <h3 class="signature">def <strong>select</strong>(&amp;func : T -&gt; U) forall U<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L987" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an iterator that only returns elements for which the passed in block returns a truthy value.</p> <pre data-language="crystal">iter = [1, 2, 3].each.select &amp;.odd?
iter.next # =&gt; 1
iter.next # =&gt; 3
iter.next # =&gt; Iterator::Stop::INSTANCE</pre> </div>   </div> <div class="entry-detail" id="select(type:U.class)forallU-instance-method"> <h3 class="signature">def <strong>select</strong>(type : U.class) forall U<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L1000" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an iterator that only returns elements of the given <em>type</em>.</p> <pre data-language="crystal">iter = [1, false, 3, nil].each.select(Int32)
iter.next # =&gt; 1
iter.next # =&gt; 3
iter.next # =&gt; Iterator::Stop::INSTANCE</pre> </div>   </div> <div class="entry-detail" id="select(pattern)-instance-method"> <h3 class="signature">def <strong>select</strong>(pattern)<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L1014" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an iterator that only returns elements where <code>pattern === element</code>.</p> <pre data-language="crystal">iter = [1, 3, 2, 5, 4, 6].each.select(3..5)
iter.next # =&gt; 3
iter.next # =&gt; 5
iter.next # =&gt; 4
iter.next # =&gt; Iterator::Stop::INSTANCE</pre> </div>   </div> <div class="entry-detail" id="skip(n:Int)-instance-method"> <h3 class="signature">def <strong>skip</strong>(n : <a href="int.html">Int</a>)<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L1060" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an iterator that skips the first <em>n</em> elements and only returns the elements after that.</p> <pre data-language="crystal">iter = (1..3).each.skip(2)
iter.next # -&gt; 3
iter.next # -&gt; Iterator::Stop::INSTANCE</pre> </div>   </div> <div class="entry-detail" id="skip_while(&amp;func:T-&gt;U)forallU-instance-method"> <h3 class="signature">def <strong>skip_while</strong>(&amp;func : T -&gt; U) forall U<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L1092" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an iterator that only starts to return elements once the given block has returned falsey value for one element.</p> <pre data-language="crystal">iter = [1, 2, 3, 4, 0].each.skip_while { |i| i &lt; 3 }
iter.next # =&gt; 3
iter.next # =&gt; 4
iter.next # =&gt; 0
iter.next # =&gt; Iterator::Stop::INSTANCE</pre> </div>   </div> <div class="entry-detail" id="slice(n:Int,reuse=false)-instance-method"> <h3 class="signature">def <strong>slice</strong>(n : <a href="int.html">Int</a>, reuse = false)<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L1117" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Alias of <code><a href="iterator.html#each_slice%28n%2Creuse%3Dfalse%29-instance-method">#each_slice</a></code>.</p> </div>   </div> <div class="entry-detail" id="slice_after(reuse:Bool|Array(T)=false,&amp;block:T-&gt;B)forallB-instance-method"> <h3 class="signature">def <strong>slice_after</strong>(reuse : <a href="bool.html">Bool</a> | <a href="array.html">Array</a>(T) = false, &amp;block : T -&gt; B) forall B<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L1560" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an iterator over chunks of elements, where each chunk ends right <strong>after</strong> the given block's value is <em>truthy</em>.</p> <p>For example, to get chunks that end at each uppercase letter:</p> <pre data-language="crystal">ary = ['a', 'b', 'C', 'd', 'E', 'F', 'g', 'h']
#                   ^         ^    ^
iter = ary.slice_after(&amp;.uppercase?)
iter.next # =&gt; ['a', 'b', 'C']
iter.next # =&gt; ['d', 'E']
iter.next # =&gt; ['F']
iter.next # =&gt; ['g', 'h']
iter.next # =&gt; Iterator::Stop::INSTANCE</pre> <p>By default, a new array is created and yielded for each slice when invoking <code><a href="iterator.html#next-instance-method">#next</a></code>.</p> <ul> <li>If <em>reuse</em> is <code>false</code>, the method will create a new array for each chunk</li> <li>If <em>reuse</em> is <code>true</code>, the method will create a new array and reuse it.</li> <li>If <em>reuse</em> is an <code><a href="array.html">Array</a></code>, that array will be reused</li> </ul> <p>This can be used to prevent many memory allocations when each slice of interest is to be used in a read-only fashion.</p> </div>   </div> <div class="entry-detail" id="slice_after(pattern,reuse:Bool|Array(T)=false)-instance-method"> <h3 class="signature">def <strong>slice_after</strong>(pattern, reuse : <a href="bool.html">Bool</a> | <a href="array.html">Array</a>(T) = false)<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L1588" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an iterator over chunks of elements, where each chunk ends right <strong>after</strong> the given pattern is matched with <code>pattern === element</code>.</p> <p>For example, to get chunks that end at each ASCII uppercase letter:</p> <pre data-language="crystal">ary = ['a', 'b', 'C', 'd', 'E', 'F', 'g', 'h']
#                   ^         ^    ^
iter = ary.slice_after('A'..'Z')
iter.next # =&gt; ['a', 'b', 'C']
iter.next # =&gt; ['d', 'E']
iter.next # =&gt; ['F']
iter.next # =&gt; ['g', 'h']
iter.next # =&gt; Iterator::Stop::INSTANCE</pre> <p>By default, a new array is created and yielded for each slice when invoking <code><a href="iterator.html#next-instance-method">#next</a></code>.</p> <ul> <li>If <em>reuse</em> is <code>false</code>, the method will create a new array for each chunk</li> <li>If <em>reuse</em> is <code>true</code>, the method will create a new array and reuse it.</li> <li>If <em>reuse</em> is an <code><a href="array.html">Array</a></code>, that array will be reused</li> </ul> <p>This can be used to prevent many memory allocations when each slice of interest is to be used in a read-only fashion.</p> </div>   </div> <div class="entry-detail" id="slice_before(reuse:Bool|Array(T)=false,&amp;block:T-&gt;B)forallB-instance-method"> <h3 class="signature">def <strong>slice_before</strong>(reuse : <a href="bool.html">Bool</a> | <a href="array.html">Array</a>(T) = false, &amp;block : T -&gt; B) forall B<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L1665" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an iterator over chunks of elements, where each chunk ends right <strong>before</strong> the given block's value is <em>truthy</em>.</p> <p>For example, to get chunks that end just before each uppercase letter:</p> <pre data-language="crystal">ary = ['a', 'b', 'C', 'd', 'E', 'F', 'g', 'h']
#              ^         ^    ^
iter = ary.slice_before(&amp;.uppercase?)
iter.next # =&gt; ['a', 'b']
iter.next # =&gt; ['C', 'd']
iter.next # =&gt; ['E']
iter.next # =&gt; ['F', 'g', 'h']
iter.next # =&gt; Iterator::Stop::INSTANCE</pre> <p>By default, a new array is created and yielded for each slice when invoking <code><a href="iterator.html#next-instance-method">#next</a></code>.</p> <ul> <li>If <em>reuse</em> is <code>false</code>, the method will create a new array for each chunk</li> <li>If <em>reuse</em> is <code>true</code>, the method will create a new array and reuse it.</li> <li>If <em>reuse</em> is an <code><a href="array.html">Array</a></code>, that array will be reused</li> </ul> <p>This can be used to prevent many memory allocations when each slice of interest is to be used in a read-only fashion.</p> </div>   </div> <div class="entry-detail" id="slice_before(pattern,reuse:Bool|Array(T)=false)-instance-method"> <h3 class="signature">def <strong>slice_before</strong>(pattern, reuse : <a href="bool.html">Bool</a> | <a href="array.html">Array</a>(T) = false)<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L1693" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an iterator over chunks of elements, where each chunk ends right <strong>before</strong> the given pattern is matched with <code>pattern === element</code>.</p> <p>For example, to get chunks that end just before each ASCII uppercase letter:</p> <pre data-language="crystal">ary = ['a', 'b', 'C', 'd', 'E', 'F', 'g', 'h']
#              ^         ^    ^
iter = ary.slice_before('A'..'Z')
iter.next # =&gt; ['a', 'b']
iter.next # =&gt; ['C', 'd']
iter.next # =&gt; ['E']
iter.next # =&gt; ['F', 'g', 'h']
iter.next # =&gt; Iterator::Stop::INSTANCE</pre> <p>By default, a new array is created and yielded for each slice when invoking <code><a href="iterator.html#next-instance-method">#next</a></code>.</p> <ul> <li>If <em>reuse</em> is <code>false</code>, the method will create a new array for each chunk</li> <li>If <em>reuse</em> is <code>true</code>, the method will create a new array and reuse it.</li> <li>If <em>reuse</em> is an <code><a href="array.html">Array</a></code>, that array will be reused</li> </ul> <p>This can be used to prevent many memory allocations when each slice of interest is to be used in a read-only fashion.</p> </div>   </div> <div class="entry-detail" id="slice_when(reuse:Bool|Array(T)=false,&amp;block:T,T-&gt;B)forallB-instance-method"> <h3 class="signature">def <strong>slice_when</strong>(reuse : <a href="bool.html">Bool</a> | <a href="array.html">Array</a>(T) = false, &amp;block : T, T -&gt; B) forall B<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L1778" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an iterator for each chunked elements where the ends of chunks are defined by the block, when the block's value over a pair of elements is <em>truthy</em>.</p> <p>For example, one-by-one increasing subsequences can be chunked as follows:</p> <pre data-language="crystal">ary = [1, 2, 4, 9, 10, 11, 12, 15, 16, 19, 20, 21]
iter = ary.slice_when { |i, j| i + 1 != j }
iter.next # =&gt; [1, 2]
iter.next # =&gt; [4]
iter.next # =&gt; [9, 10, 11, 12]
iter.next # =&gt; [15, 16]
iter.next # =&gt; [19, 20, 21]
iter.next # =&gt; Iterator::Stop::INSTANCE</pre> <p>By default, a new array is created and yielded for each slice when invoking <code><a href="iterator.html#next-instance-method">#next</a></code>.</p> <ul> <li>If <em>reuse</em> is <code>false</code>, the method will create a new array for each chunk</li> <li>If <em>reuse</em> is <code>true</code>, the method will create a new array and reuse it.</li> <li>If <em>reuse</em> is an <code><a href="array.html">Array</a></code>, that array will be reused</li> </ul> <p>This can be used to prevent many memory allocations when each slice of interest is to be used in a read-only fashion.</p> <p>See also <code><a href="iterator.html#chunk_while%28reuse%3ABool%7CArray%28T%29%3Dfalse%2C%26block%3AT%2CT-%3EB%29forallB-instance-method">#chunk_while</a></code>, which works similarly but the block's condition is inverted.</p> </div>   </div> <div class="entry-detail" id="step(n:Int)-instance-method"> <h3 class="signature">def <strong>step</strong>(n : <a href="int.html">Int</a>)<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L1173" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an iterator that only returns every <em>n</em>th element, starting with the first.</p> <pre data-language="crystal">iter = (1..6).each.step(2)
iter.next # =&gt; 1
iter.next # =&gt; 3
iter.next # =&gt; 5
iter.next # =&gt; Iterator::Stop::INSTANCE</pre> </div>   </div> <div class="entry-detail" id="stop-instance-method"> <h3 class="signature">def <strong>stop</strong><a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L138" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Shortcut for <code><a href="iterator/stop.html#INSTANCE">Iterator::Stop::INSTANCE</a></code>, to signal that there are no more elements in an iterator.</p> </div>   </div> <div class="entry-detail" id="take_while(&amp;func:T-&gt;U)forallU-instance-method"> <h3 class="signature">def <strong>take_while</strong>(&amp;func : T -&gt; U) forall U<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L1238" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an iterator that returns elements while the given block returns a truthy value.</p> <pre data-language="crystal">iter = (1..5).each.take_while { |i| i &lt; 3 }
iter.next # =&gt; 1
iter.next # =&gt; 2
iter.next # =&gt; Iterator::Stop::INSTANCE</pre> </div>   </div> <div class="entry-detail" id="tap(&amp;block:T-&gt;)-instance-method"> <h3 class="signature">def <strong>tap</strong>(&amp;block : T -&gt; )<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L1276" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an iterator that calls the given block with the next element of the iterator when calling <code><a href="iterator.html#next-instance-method">#next</a></code>, still returning the original element.</p> <pre data-language="crystal">a = 0
iter = (1..3).each.tap { |x| a += x }
iter.next # =&gt; 1
a         # =&gt; 1
iter.next # =&gt; 2
a         # =&gt; 3
iter.next # =&gt; 3
a         # =&gt; 6
iter.next # =&gt; Iterator::Stop::INSTANCE</pre> </div>   </div> <div class="entry-detail" id="to_json(json:JSON::Builder)-instance-method"> <h3 class="signature">def <strong>to_json</strong>(json : <a href="json/builder.html">JSON::Builder</a>)<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/json/to_json.cr#L128" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Converts the content of an iterator into a JSON array in lazy way. See <code><a href="iterator.html#from_json%28string_or_io%29-class-method">Iterator#from_json</a></code> for an example.</p> </div>   </div> <div class="entry-detail" id="to_yaml(yaml:YAML::Nodes::Builder)-instance-method"> <h3 class="signature">def <strong>to_yaml</strong>(yaml : <a href="yaml/nodes/builder.html">YAML::Nodes::Builder</a>)<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/yaml/to_yaml.cr#L47" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Converts the content of an iterator to YAML. The conversion is done in a lazy way. In contrast to <code><a href="iterator.html#to_json%28json%3AJSON%3A%3ABuilder%29-instance-method">Iterator#to_json</a></code> this operation requires memory for the for the complete YAML document</p> </div>   </div> <div class="entry-detail" id="uniq-instance-method"> <h3 class="signature">def <strong>uniq</strong><a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L1303" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an iterator that only returns unique values of the original iterator.</p> <pre data-language="crystal">iter = [1, 2, 1].each.uniq
iter.next # =&gt; 1
iter.next # =&gt; 2
iter.next # =&gt; Iterator::Stop::INSTANCE</pre> </div>   </div> <div class="entry-detail" id="uniq(&amp;func:T-&gt;U)forallU-instance-method"> <h3 class="signature">def <strong>uniq</strong>(&amp;func : T -&gt; U) forall U<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L1317" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an iterator that only returns unique values of the original iterator. The provided block is applied to the elements to determine the value to be checked for uniqueness.</p> <pre data-language="crystal">iter = [["a", "a"], ["b", "a"], ["a", "c"]].each.uniq &amp;.first
iter.next # =&gt; ["a", "a"]
iter.next # =&gt; ["b", "a"]
iter.next # =&gt; Iterator::Stop::INSTANCE</pre> </div>   </div> <div class="entry-detail" id="with_index(offset:Int=0)-instance-method"> <h3 class="signature">def <strong>with_index</strong>(offset : <a href="int.html">Int</a> = 0)<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L1347" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an iterator that returns a <code><a href="tuple.html">Tuple</a></code> of the element and its index.</p> <pre data-language="crystal">iter = (1..3).each.with_index
iter.next # =&gt; {1, 0}
iter.next # =&gt; {2, 1}
iter.next # =&gt; {3, 2}
iter.next # =&gt; Iterator::Stop::INSTANCE</pre> </div>   </div> <div class="entry-detail" id="with_index(offset:Int=0,&amp;)-instance-method"> <h3 class="signature">def <strong>with_index</strong>(offset : <a href="int.html">Int</a> = 0, &amp;)<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L1352" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Yields each element in this iterator together with its index.</p> </div>   </div> <div class="entry-detail" id="with_object(obj)-instance-method"> <h3 class="signature">def <strong>with_object</strong>(obj)<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L1384" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an iterator that returns a <code><a href="tuple.html">Tuple</a></code> of the element and a given object.</p> <pre data-language="crystal">iter = (1..3).each.with_object("a")
iter.next # =&gt; {1, "a"}
iter.next # =&gt; {2, "a"}
iter.next # =&gt; {3, "a"}
iter.next # =&gt; Iterator::Stop::INSTANCE</pre> </div>   </div> <div class="entry-detail" id="with_object(obj,&amp;)-instance-method"> <h3 class="signature">def <strong>with_object</strong>(obj, &amp;)<a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L1389" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Yields each element in this iterator together with <em>obj</em>. Returns that object.</p> </div>   </div> <div class="entry-detail" id="zip(*others:Iterator):Iterator-instance-method"> <h3 class="signature">def <strong>zip</strong>(*others : <a href="iterator.html">Iterator</a>) : <a href="iterator.html">Iterator</a><a href="https://github.com/crystal-lang/crystal/blob/0cef61e51/src/iterator.cr#L1424" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Returns an iterator that returns the elements of this iterator and <em>others</em> traversed in tandem as <code><a href="tuple.html">Tuple</a></code>s.</p> <p>Iteration stops when any of the iterators runs out of elements.</p> <pre data-language="crystal">iter1 = [4, 5, 6].each
iter2 = [7, 8, 9].each
iter3 = ['a', 'b', 'c', 'd'].each
iter = iter1.zip(iter2, iter3)
iter.next # =&gt; {4, 7, 'a'}
iter.next # =&gt; {5, 8, 'b'}
iter.next # =&gt; {6, 9, 'c'}
iter.next # =&gt; Iterator::Stop::INSTANCE</pre> </div>   </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2024 Manas Technology Solutions.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://crystal-lang.org/api/1.13.1/Iterator.html" class="_attribution-link">https://crystal-lang.org/api/1.13.1/Iterator.html</a>
  </p>
</div>
