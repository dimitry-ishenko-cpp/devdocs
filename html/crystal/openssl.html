<h1 class="type-name"> module OpenSSL </h1> <h2>  Overview </h2> <p>NOTE To use <code><a href="openssl.html">OpenSSL</a></code>, you must explicitly import it with <code>require "openssl"</code></p> <h2>
OpenSSL Integration</h2> <ul> <li>TLS sockets need a context, potentially with keys (required for servers) and configuration.</li> <li>TLS sockets will wrap the underlying TCP socket, and any further communication must happen through the <code><a href="openssl/ssl/socket.html">OpenSSL::SSL::Socket</a></code> only.</li> </ul> <h2>
Usage Example</h2> <p>Recommended ciphers can be taken from:</p> <ul> <li><a href="https://www.owasp.org/index.php/Transport_Layer_Protection_Cheat_Sheet#Rule_-_Only_Support_Strong_Cryptographic_Ciphers">OWASP Wiki</a></li> <li><a href="https://cipherli.st/">Cipherli.st</a></li> <li>A full list is available at the <a href="https://www.openssl.org/docs/man1.1.0/apps/ciphers.html#CIPHER-STRINGS">OpenSSL Docs</a>
</li> </ul> <p>Do note that:</p> <ul> <li>Crystal does its best to provide sane configuration defaults (see <a href="https://wiki.mozilla.org/Security/Server_Side_TLS#Intermediate_compatibility_.28default.29">Mozilla-Intermediate</a>).</li> <li>Linked version of OpenSSL need to be checked for supporting specific protocols and ciphers.</li> <li>If any configurations or choices in Crystal regarding SSL settings and security are found to be lacking or need improvement please <a href="https://github.com/crystal-lang/crystal/issues/new">open an issue</a> and let us know.</li> </ul> <h3>
Server side</h3> <p>NOTE For the below example to work, a key pair should be attained.</p> <pre data-language="crystal">require "socket"
require "openssl"

def server
  # Bind new TCPSocket to port 5555
  socket = TCPServer.new(5555)

  context = OpenSSL::SSL::Context::Server.new
  context.private_key = "/path/to/private.key"
  context.certificate_chain = "/path/to/public.cert"

  puts "Server is up"

  socket.accept do |client|
    puts "Got client"

    bytes = Bytes.new(20)

    ssl_socket = OpenSSL::SSL::Socket::Server.new(client, context)
    ssl_socket.read(bytes)

    puts String.new(bytes)
  end
end</pre> <h3>
Client side</h3> <pre data-language="crystal">require "socket"
require "openssl"

def client
  socket = TCPSocket.new("127.0.0.1", 5555)
  context = OpenSSL::SSL::Context::Client.new

  ssl_socket = OpenSSL::SSL::Socket::Client.new(socket, context)
  ssl_socket &lt;&lt; "Testing"
end</pre> <h2>  Defined in: </h2> <a href="https://github.com/crystal-lang/crystal/blob/0aa30372c/src/openssl.cr#L69" target="_blank"> openssl.cr </a> <br> <a href="https://github.com/crystal-lang/crystal/blob/0aa30372c/src/openssl/algorithm.cr#L3" target="_blank"> openssl/algorithm.cr </a> <br> <a href="https://github.com/crystal-lang/crystal/blob/0aa30372c/src/openssl/digest.cr#L5" target="_blank"> openssl/digest.cr </a> <br> <a href="https://github.com/crystal-lang/crystal/blob/0aa30372c/src/openssl/error.cr#L4" target="_blank"> openssl/error.cr </a> <br> <div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2024 Manas Technology Solutions.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://crystal-lang.org/api/1.11.1/OpenSSL.html" class="_attribution-link">https://crystal-lang.org/api/1.11.1/OpenSSL.html</a>
  </p>
</div>
