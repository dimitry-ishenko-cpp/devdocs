<h1 class="type-name"> module Crystal </h1> <h2>  Defined in: </h2> <a href="https://github.com/crystal-lang/crystal/blob/89944bf17/src/crystal/datum.cr#L1" target="_blank"> crystal/datum.cr </a> <br> <a href="https://github.com/crystal-lang/crystal/blob/89944bf17/src/crystal/dwarf.cr#L6" target="_blank"> crystal/dwarf.cr </a> <br> <a href="https://github.com/crystal-lang/crystal/blob/89944bf17/src/crystal/dwarf/abbrev.cr#L3" target="_blank"> crystal/dwarf/abbrev.cr </a> <br> <a href="https://github.com/crystal-lang/crystal/blob/89944bf17/src/crystal/dwarf/info.cr#L4" target="_blank"> crystal/dwarf/info.cr </a> <br> <a href="https://github.com/crystal-lang/crystal/blob/89944bf17/src/crystal/dwarf/line_numbers.cr#L1" target="_blank"> crystal/dwarf/line_numbers.cr </a> <br> <a href="https://github.com/crystal-lang/crystal/blob/89944bf17/src/crystal/dwarf/strings.cr#L1" target="_blank"> crystal/dwarf/strings.cr </a> <br> <a href="https://github.com/crystal-lang/crystal/blob/89944bf17/src/crystal/elf.cr#L1" target="_blank"> crystal/elf.cr </a> <br> <a href="https://github.com/crystal-lang/crystal/blob/89944bf17/src/crystal/main.cr#L8" target="_blank"> crystal/main.cr </a> <br> <a href="https://github.com/crystal-lang/crystal/blob/89944bf17/src/crystal/small_deque.cr#L1" target="_blank"> crystal/small_deque.cr </a> <br> <a href="https://github.com/crystal-lang/crystal/blob/89944bf17/src/crystal/tracing.cr#L3" target="_blank"> crystal/tracing.cr </a> <br> <h2>  Constant Summary </h2> <dl> <dt class="entry-const" id="BUILD_COMMIT"> <strong>BUILD_COMMIT</strong> = <code>"89944bf17"</code> </dt> <dd class="entry-const-doc"> <p>The build commit identifier of the Crystal compiler.</p> </dd> <dt class="entry-const" id="BUILD_DATE"> <strong>BUILD_DATE</strong> = <code>"2025-02-04"</code> </dt> <dd class="entry-const-doc"> <p>The build date of the Crystal compiler.</p> </dd> <dt class="entry-const" id="CACHE_DIR"> <strong>CACHE_DIR</strong> = <code>"/root/.cache/crystal"</code> </dt> <dd class="entry-const-doc"> <p>The cache directory configured for the Crystal compiler.</p> <p>The value is defined by the environment variable <code>CRYSTAL_CACHE_DIR</code> and defaults to the user's configured cache directory.</p> </dd> <dt class="entry-const" id="DEFAULT_PATH"> <strong>DEFAULT_PATH</strong> = <code>"$ORIGIN/../share/crystal/src"</code> </dt> <dd class="entry-const-doc"> <p>The default Crystal path configured in the compiler. This value is baked into the compiler and usually points to the accompanying version of the standard library.</p> </dd> <dt class="entry-const" id="DESCRIPTION"> <strong>DESCRIPTION</strong> = <code>"Crystal 1.15.1 [89944bf17] (2025-02-04)\n\nLLVM: 18.1.6\nDefault target: x86_64-unknown-linux-gnu\n"</code> </dt> <dd class="entry-const-doc"> <p>Full version information of the Crystal compiler. Equivalent to <code>crystal --version</code>.</p> </dd> <dt class="entry-const" id="HOST_TRIPLE"> <strong>HOST_TRIPLE</strong> = <code>"x86_64-unknown-linux-gnu"</code> </dt> <dd class="entry-const-doc"> <p>The LLVM target triple of the host system (the machine that the compiler runs on).</p> </dd> <dt class="entry-const" id="LIBRARY_PATH"> <strong>LIBRARY_PATH</strong> = <code>"/usr/bin/../lib/crystal"</code> </dt> <dd class="entry-const-doc"> <p>Colon-separated paths where the compiler searches for (binary) libraries.</p> <p>The value is defined by the environment variables <code>CRYSTAL_LIBRARY_PATH</code>.</p> </dd> <dt class="entry-const" id="LLVM_VERSION"> <strong>LLVM_VERSION</strong> = <code>"18.1.6"</code> </dt> <dd class="entry-const-doc"> <p>The version of LLVM used by the Crystal compiler.</p> </dd> <dt class="entry-const" id="PATH"> <strong>PATH</strong> = <code>"./lib:/crystal/src"</code> </dt> <dd class="entry-const-doc"> <p>Colon-separated paths where the compiler searches for required source files.</p> <p>The value is defined by the environment variable <code>CRYSTAL_PATH</code> and defaults to <code><a href="crystal.html#DEFAULT_PATH">DEFAULT_PATH</a></code>.</p> </dd> <dt class="entry-const" id="TARGET_TRIPLE"> <strong>TARGET_TRIPLE</strong> = <code>"x86_64-unknown-linux-gnu"</code> </dt> <dd class="entry-const-doc"> <p>The LLVM target triple of the target system (the machine that the compiler builds for).</p> </dd> <dt class="entry-const" id="VERSION"> <strong>VERSION</strong> = <code>"1.15.1"</code> </dt> <dd class="entry-const-doc"> <p>The version of the Crystal compiler.</p> </dd> </dl> <h2>  Class Method Summary </h2> <ul class="list-summary"> <li class="entry-summary"> <a href="#main%28%26%29-class-method" class="signature"><strong>.main</strong>(&amp;)</a> <div class="summary"><p>Defines the main routine run by normal Crystal programs:</p></div> </li> <li class="entry-summary"> <a href="#main%28argc%3AInt32%2Cargv%3APointer%28Pointer%28UInt8%29%29%29-class-method" class="signature"><strong>.main</strong>(argc : Int32, argv : Pointer(Pointer(UInt8)))</a> <div class="summary"><p>Main method run by all Crystal programs at startup.</p></div> </li> <li class="entry-summary"> <a href="#main_user_code%28argc%3AInt32%2Cargv%3APointer%28Pointer%28UInt8%29%29%29-class-method" class="signature"><strong>.main_user_code</strong>(argc : Int32, argv : Pointer(Pointer(UInt8)))</a> <div class="summary"><p>Executes the main user code.</p></div> </li> <li class="entry-summary"> <a href="#trace%28section%3ATracing%3A%3ASection%2Coperation%3AString%2Ctime%3AUInt64%7CNil%3Dnil%2C%2A%2Ametadata%2C%26%29-class-method" class="signature"><strong>.trace</strong>(section : Tracing::Section, operation : String, time : UInt64 | Nil = nil, **metadata, &amp;)</a> </li> <li class="entry-summary"> <a href="#trace%28section%3ATracing%3A%3ASection%2Coperation%3AString%2Ctime%3AUInt64%7CNil%3Dnil%2C%2A%2Ametadata%29-class-method" class="signature"><strong>.trace</strong>(section : Tracing::Section, operation : String, time : UInt64 | Nil = nil, **metadata)</a> </li> </ul>  <h2>  Class Method Detail </h2> <div class="entry-detail" id="main(&amp;)-class-method"> <h3 class="signature">def self.<strong>main</strong>(&amp;)<a href="https://github.com/crystal-lang/crystal/blob/89944bf17/src/crystal/main.cr#L36" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Defines the main routine run by normal Crystal programs:</p> <ul> <li>Initializes the GC</li> <li>Invokes the given <em>block</em>
</li> <li>Handles unhandled exceptions</li> <li>Invokes <code>at_exit</code> handlers</li> <li>Flushes <code><a href="toplevel.html#STDOUT">STDOUT</a></code> and <code><a href="toplevel.html#STDERR">STDERR</a></code>
</li> </ul> <p>This method can be invoked if you need to define a custom main (as in C main) function, doing all the above steps.</p> <p>For example:</p> <pre data-language="crystal">fun main(argc : Int32, argv : UInt8**) : Int32
  Crystal.main do
    elapsed = Time.measure do
      Crystal.main_user_code(argc, argv)
    end
    puts "Time to execute program: #{elapsed}"
  end
end</pre> <p>Note that the above is really just an example, almost the same can be accomplished with <code>at_exit</code>. But in some cases redefinition of C's main is needed.</p> </div>   </div> <div class="entry-detail" id="main(argc:Int32,argv:Pointer(Pointer(UInt8)))-class-method"> <h3 class="signature">def self.<strong>main</strong>(argc : <a href="int32.html">Int32</a>, argv : <a href="pointer.html">Pointer</a>(<a href="pointer.html">Pointer</a>(<a href="uint8.html">UInt8</a>)))<a href="https://github.com/crystal-lang/crystal/blob/89944bf17/src/crystal/main.cr#L102" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Main method run by all Crystal programs at startup.</p> <p>This setups up the GC, invokes your program, rescuing any handled exception, and then runs <code>at_exit</code> handlers.</p> <p>This method is automatically invoked for you, so you don't need to invoke it.</p> <p>However, if you need to define a special main C function, you can redefine main and invoke <code><a href="crystal.html#main%28%26%29-class-method">Crystal.main</a></code> from it:</p> <pre data-language="crystal">fun main(argc : Int32, argv : UInt8**) : Int32
  # some setup before Crystal main
  Crystal.main(argc, argv)
  # some cleanup logic after Crystal main
end</pre> <p>The <code><a href="crystal.html#main%28%26%29-class-method">Crystal.main</a></code> can also be passed as a callback:</p> <pre data-language="crystal">fun main(argc : Int32, argv : UInt8**) : Int32
  LibFoo.init_foo_and_invoke_main(argc, argv, -&gt;Crystal.main(Int32, UInt8**))
end</pre> <p>Note that before <code><a href="crystal.html#main%28%26%29-class-method">Crystal.main</a></code> is invoked the GC is not setup yet, so nothing that allocates memory in Crystal (like <code>new</code> for classes) can be used.</p> </div>   </div> <div class="entry-detail" id="main_user_code(argc:Int32,argv:Pointer(Pointer(UInt8)))-class-method"> <h3 class="signature">def self.<strong>main_user_code</strong>(argc : <a href="int32.html">Int32</a>, argv : <a href="pointer.html">Pointer</a>(<a href="pointer.html">Pointer</a>(<a href="uint8.html">UInt8</a>)))<a href="https://github.com/crystal-lang/crystal/blob/89944bf17/src/crystal/main.cr#L117" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>Executes the main user code. This normally is executed after initializing the GC and before executing <code>at_exit</code> handlers.</p> <p>You should never invoke this method unless you need to redefine C's main function. See <code><a href="crystal.html#main%28%26%29-class-method">Crystal.main</a></code> for more details.</p> </div>   </div> <div class="entry-detail" id="trace(section:Tracing::Section,operation:String,time:UInt64|Nil=nil,**metadata,&amp;)-class-method"> <h3 class="signature">def self.<strong>trace</strong>(section : Tracing::Section, operation : <a href="string.html">String</a>, time : <a href="uint64.html">UInt64</a> | <a href="nil.html">Nil</a> = nil, **metadata, &amp;)<a href="https://github.com/crystal-lang/crystal/blob/89944bf17/src/crystal/tracing.cr#L40" target="_blank" class="view-source">Source</a>
</h3>   </div> <div class="entry-detail" id="trace(section:Tracing::Section,operation:String,time:UInt64|Nil=nil,**metadata)-class-method"> <h3 class="signature">def self.<strong>trace</strong>(section : Tracing::Section, operation : <a href="string.html">String</a>, time : <a href="uint64.html">UInt64</a> | <a href="nil.html">Nil</a> = nil, **metadata)<a href="https://github.com/crystal-lang/crystal/blob/89944bf17/src/crystal/tracing.cr#L40" target="_blank" class="view-source">Source</a>
</h3>   </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2025 Manas Technology Solutions.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://crystal-lang.org/api/1.15.1/Crystal.html" class="_attribution-link">https://crystal-lang.org/api/1.15.1/Crystal.html</a>
  </p>
</div>
