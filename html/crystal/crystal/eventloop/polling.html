<h1 class="type-name"> abstract class Crystal::<wbr>EventLoop::<wbr>Polling </wbr></wbr>
</h1> <ul class="superclass-hierarchy">
<li class="superclass"><a href="polling.html">Crystal::EventLoop::Polling</a></li>
<li class="superclass"><a href="../eventloop.html">Crystal::EventLoop</a></li>
<li class="superclass"><a href="../../reference.html">Reference</a></li>
<li class="superclass"><a href="../../object.html">Object</a></li>
</ul> <h2>  Overview </h2> <p>Polling EventLoop.</p> <p>This is the abstract interface that implements <code><a href="../eventloop.html">Crystal::EventLoop</a></code> for polling based UNIX targets, such as epoll (linux), kqueue (bsd), or poll (posix) syscalls. This class only implements the generic parts for the external world to interact with the loop. A specific implementation is required to handle the actual syscalls. See <code>Crystal::Epoll::EventLoop</code> and <code>Crystal::Kqueue::EventLoop</code>.</p> <p>The event loop registers the fd into the kernel data structures when an IO operation would block, then keeps it there until the fd is closed.</p> <p>NOTE the fds must have <code>O_NONBLOCK</code> set.</p> <p>It is possible to have multiple event loop instances, but an fd can only be in one instance at a time. When trying to block from another loop, the fd will be removed from its associated loop and added to the current one (this is automatic). Trying to move a fd to another loop with pending waiters is unsupported and will raise an exception. See <code><a href="polling/polldescriptor.html#remove%28fd%3AInt32%29%3ANil-instance-method">PollDescriptor#remove</a></code>.</p> <p>A timed event such as sleep or select timeout follows the following logic:</p> <ol> <li>create an <code><a href="polling/event.html">Event</a></code> (actually reuses it, see <code>FiberChannel</code>);</li> <li>register the event in <code>@timers</code>;</li> <li>supend the current fiber.</li> </ol> <p>The timer will eventually trigger and resume the fiber. When an IO operation on fd would block, the loop follows the following logic:</p> <ol> <li>register the fd (once);</li> <li>create an <code><a href="polling/event.html">Event</a></code>;</li> <li>suspend the current fiber;</li> </ol> <p>When the IO operation is ready, the fiber will eventually be resumed (one fiber at a time). If it's an IO operation, the operation is tried again which may block again, until the operation succeeds or an error occured (e.g. closed, broken pipe).</p> <p>If the IO operation has a timeout, the event is also registered into <code>@timers</code> before suspending the fiber, then after resume it will raise <code><a href="../../io/timeouterror.html">IO::TimeoutError</a></code> if the event timed out, and continue otherwise.</p> <h2>  Direct Known Subclasses </h2> <ul class="other-types-list"> <li class="other-type"><a href="epoll.html">Crystal::EventLoop::Epoll</a></li> </ul> <h2>  Defined in: </h2> <a href="https://github.com/crystal-lang/crystal/blob/89944bf17/src/crystal/event_loop/polling.cr#L2" target="_blank"> crystal/event_loop/polling.cr:2 </a> <br> <a href="https://github.com/crystal-lang/crystal/blob/89944bf17/src/crystal/event_loop/polling.cr#L58" target="_blank"> crystal/event_loop/polling.cr:58 </a> <br> <h2>  Instance Method Summary </h2> <ul class="list-summary"> <li class="entry-summary"> <a href="#accept%28socket%3A%3A%3ASocket%29%3A%3A%3ASocket%3A%3AHandle%7CNil-instance-method" class="signature"><strong>#accept</strong>(socket : ::Socket) : ::Socket::Handle | Nil</a> <div class="summary"><p>Accepts an incoming TCP connection on the socket.</p></div> </li> <li class="entry-summary"> <a href="#after_fork%3ANil-instance-method" class="signature"><strong>#after_fork</strong> : Nil</a> <div class="summary"><p>no parallelism issues, but let's clean-up anyway</p></div> </li> <li class="entry-summary"> <a href="#after_fork_before_exec%3ANil-instance-method" class="signature"><strong>#after_fork_before_exec</strong> : Nil</a> <div class="summary"><p>reset the mutexes since another thread may have acquired the lock of one event loop, which would prevent closing file descriptors for example.</p></div> </li> <li class="entry-summary"> <a href="#close%28file_descriptor%3ASystem%3A%3AFileDescriptor%29%3ANil-instance-method" class="signature"><strong>#close</strong>(file_descriptor : System::FileDescriptor) : Nil</a> <div class="summary"><p>Closes the file descriptor resource.</p></div> </li> <li class="entry-summary"> <a href="#close%28socket%3A%3A%3ASocket%29%3ANil-instance-method" class="signature"><strong>#close</strong>(socket : ::Socket) : Nil</a> <div class="summary"><p>Closes the socket.</p></div> </li> <li class="entry-summary"> <a href="#connect%28socket%3A%3A%3ASocket%2Caddress%3A%3A%3ASocket%3A%3AAddrinfo%7C%3A%3ASocket%3A%3AAddress%2Ctimeout%3ATime%3A%3ASpan%7CNil%29%3AIO%3A%3AError%7CNil-instance-method" class="signature"><strong>#connect</strong>(socket : ::Socket, address : ::Socket::Addrinfo | ::Socket::Address, timeout : Time::Span | Nil) : IO::Error | Nil</a> <div class="summary"><p>Opens a connection on <em>socket</em> to the target <em>address</em>.</p></div> </li> <li class="entry-summary"> <a href="#create_resume_event%28fiber%3AFiber%29%3AFiberEvent-instance-method" class="signature"><strong>#create_resume_event</strong>(fiber : Fiber) : FiberEvent</a> <div class="summary"><p>Create a new resume event for a fiber.</p></div> </li> <li class="entry-summary"> <a href="#create_timeout_event%28fiber%3AFiber%29%3AFiberEvent-instance-method" class="signature"><strong>#create_timeout_event</strong>(fiber : Fiber) : FiberEvent</a> <div class="summary"><p>Creates a timeout_event.</p></div> </li> <li class="entry-summary"> <a href="#read%28file_descriptor%3ASystem%3A%3AFileDescriptor%2Cslice%3ABytes%29%3AInt32-instance-method" class="signature"><strong>#read</strong>(file_descriptor : System::FileDescriptor, slice : Bytes) : Int32</a> <div class="summary"><p>Reads at least one byte from the file descriptor into <em>slice</em>.</p></div> </li> <li class="entry-summary"> <a href="#read%28socket%3A%3A%3ASocket%2Cslice%3ABytes%29%3AInt32-instance-method" class="signature"><strong>#read</strong>(socket : ::Socket, slice : Bytes) : Int32</a> <div class="summary"><p>Reads at least one byte from the socket into <em>slice</em>.</p></div> </li> <li class="entry-summary"> <a href="#receive_from%28socket%3A%3A%3ASocket%2Cslice%3ABytes%29%3ATuple%28Int32%2C%3A%3ASocket%3A%3AAddress%29-instance-method" class="signature"><strong>#receive_from</strong>(socket : ::Socket, slice : Bytes) : Tuple(Int32, ::Socket::Address)</a> <div class="summary"><p>Receives at least one byte from the socket into <em>slice</em>, capturing the source address.</p></div> </li> <li class="entry-summary"> <a href="#run%28blocking%3ABool%29%3ABool-instance-method" class="signature"><strong>#run</strong>(blocking : Bool) : Bool</a> <div class="summary"><p>NOTE thread unsafe</p></div> </li> <li class="entry-summary"> <a href="#send_to%28socket%3A%3A%3ASocket%2Cslice%3ABytes%2Caddress%3A%3A%3ASocket%3A%3AAddress%29%3AInt32-instance-method" class="signature"><strong>#send_to</strong>(socket : ::Socket, slice : Bytes, address : ::Socket::Address) : Int32</a> <div class="summary"><p>Sends at least one byte from <em>slice</em> to the socket with a target address <em>address</em>.</p></div> </li> <li class="entry-summary"> <a href="#write%28file_descriptor%3ASystem%3A%3AFileDescriptor%2Cslice%3ABytes%29%3AInt32-instance-method" class="signature"><strong>#write</strong>(file_descriptor : System::FileDescriptor, slice : Bytes) : Int32</a> <div class="summary"><p>Writes at least one byte from <em>slice</em> to the file descriptor.</p></div> </li> <li class="entry-summary"> <a href="#write%28socket%3A%3A%3ASocket%2Cslice%3ABytes%29%3AInt32-instance-method" class="signature"><strong>#write</strong>(socket : ::Socket, slice : Bytes) : Int32</a> <div class="summary"><p>Writes at least one byte from <em>slice</em> to the socket.</p></div> </li> </ul> <div class="methods-inherited"> <h3>Instance methods inherited from class <code><a href="../eventloop.html">Crystal::EventLoop</a></code>
</h3> <a href="../eventloop.html#create_resume_event%28fiber%3AFiber%29%3AEvent-instance-method" class="tooltip"> create_resume_event(fiber : Fiber) : Event create_resume_event</a>, <a href="../eventloop.html#create_timeout_event%28fiber%3AFiber%29%3AEvent-instance-method" class="tooltip"> create_timeout_event(fiber : Fiber) : Event create_timeout_event</a>, <a href="../eventloop.html#interrupt%3ANil-instance-method" class="tooltip"> interrupt : Nil interrupt</a>, <a href="../eventloop.html#run%28blocking%3ABool%29%3ABool-instance-method" class="tooltip"> run(blocking : Bool) : Bool run</a> <h3>Constructor methods inherited from class <code><a href="../eventloop.html">Crystal::EventLoop</a></code>
</h3> <a href="../eventloop.html#create%3Aself-class-method" class="tooltip"> create : self create</a>, <a href="../eventloop.html#current%3Aself-class-method" class="tooltip"> current : self current</a> <h3>Class methods inherited from class <code><a href="../eventloop.html">Crystal::EventLoop</a></code>
</h3> <a href="../eventloop.html#backend_class-class-method" class="tooltip"> backend_class backend_class</a>, <a href="../eventloop.html#current%3F%3Aself%7CNil-class-method" class="tooltip"> current? : self | Nil current?</a>, <a href="../eventloop.html#remove%28file_descriptor%3ACrystal%3A%3ASystem%3A%3AFileDescriptor%29%3ANil-class-method" class="tooltip"> remove(file_descriptor : Crystal::System::FileDescriptor) : Nil<br>remove(socket : ::Socket) : Nil remove</a> <h3>Instance methods inherited from module <code><a href="socket.html">Crystal::EventLoop::Socket</a></code>
</h3> <a href="socket.html#accept%28socket%3A%3A%3ASocket%29%3A%3A%3ASocket%3A%3AHandle%7CNil-instance-method" class="tooltip"> accept(socket : ::Socket) : ::Socket::Handle | Nil accept</a>, <a href="socket.html#close%28socket%3A%3A%3ASocket%29%3ANil-instance-method" class="tooltip"> close(socket : ::Socket) : Nil close</a>, <a href="socket.html#connect%28socket%3A%3A%3ASocket%2Caddress%3A%3A%3ASocket%3A%3AAddrinfo%7C%3A%3ASocket%3A%3AAddress%2Ctimeout%3ATime%3A%3ASpan%7CNil%29%3AIO%3A%3AError%7CNil-instance-method" class="tooltip"> connect(socket : ::Socket, address : ::Socket::Addrinfo | ::Socket::Address, timeout : Time::Span | Nil) : IO::Error | Nil connect</a>, <a href="socket.html#read%28socket%3A%3A%3ASocket%2Cslice%3ABytes%29%3AInt32-instance-method" class="tooltip"> read(socket : ::Socket, slice : Bytes) : Int32 read</a>, <a href="socket.html#receive_from%28socket%3A%3A%3ASocket%2Cslice%3ABytes%29%3ATuple%28Int32%2C%3A%3ASocket%3A%3AAddress%29-instance-method" class="tooltip"> receive_from(socket : ::Socket, slice : Bytes) : Tuple(Int32, ::Socket::Address) receive_from</a>, <a href="socket.html#send_to%28socket%3A%3A%3ASocket%2Cslice%3ABytes%2Caddress%3A%3A%3ASocket%3A%3AAddress%29%3AInt32-instance-method" class="tooltip"> send_to(socket : ::Socket, slice : Bytes, address : ::Socket::Address) : Int32 send_to</a>, <a href="socket.html#write%28socket%3A%3A%3ASocket%2Cslice%3ABytes%29%3AInt32-instance-method" class="tooltip"> write(socket : ::Socket, slice : Bytes) : Int32 write</a> <h3>Instance methods inherited from module <code><a href="filedescriptor.html">Crystal::EventLoop::FileDescriptor</a></code>
</h3> <a href="filedescriptor.html#close%28file_descriptor%3ACrystal%3A%3ASystem%3A%3AFileDescriptor%29%3ANil-instance-method" class="tooltip"> close(file_descriptor : Crystal::System::FileDescriptor) : Nil close</a>, <a href="filedescriptor.html#read%28file_descriptor%3ACrystal%3A%3ASystem%3A%3AFileDescriptor%2Cslice%3ABytes%29%3AInt32-instance-method" class="tooltip"> read(file_descriptor : Crystal::System::FileDescriptor, slice : Bytes) : Int32 read</a>, <a href="filedescriptor.html#write%28file_descriptor%3ACrystal%3A%3ASystem%3A%3AFileDescriptor%2Cslice%3ABytes%29%3AInt32-instance-method" class="tooltip"> write(file_descriptor : Crystal::System::FileDescriptor, slice : Bytes) : Int32 write</a> <h3>Instance methods inherited from class <code><a href="../../reference.html">Reference</a></code>
</h3> <a href="../../reference.html#%3D%3D%28other%3Aself%29-instance-method" class="tooltip"> ==(other : self)<br>==(other : JSON::Any)<br>==(other : YAML::Any)<br>==(other) ==</a>, <a href="../../reference.html#dup-instance-method" class="tooltip"> dup dup</a>, <a href="../../reference.html#hash%28hasher%29-instance-method" class="tooltip"> hash(hasher) hash</a>, <a href="../../reference.html#initialize-instance-method" class="tooltip"> initialize initialize</a>, <a href="../../reference.html#inspect%28io%3AIO%29%3ANil-instance-method" class="tooltip"> inspect(io : IO) : Nil inspect</a>, <a href="../../reference.html#object_id%3AUInt64-instance-method" class="tooltip"> object_id : UInt64 object_id</a>, <a href="../../reference.html#pretty_print%28pp%29%3ANil-instance-method" class="tooltip"> pretty_print(pp) : Nil pretty_print</a>, <a href="../../reference.html#same%3F%28other%3AReference%29%3ABool-instance-method" class="tooltip"> same?(other : Reference) : Bool<br>same?(other : Nil) same?</a>, <a href="../../reference.html#to_s%28io%3AIO%29%3ANil-instance-method" class="tooltip"> to_s(io : IO) : Nil to_s</a> <h3>Constructor methods inherited from class <code><a href="../../reference.html">Reference</a></code>
</h3> <a href="../../reference.html#new-class-method" class="tooltip"> new new</a>, <a href="../../reference.html#unsafe_construct%28address%3APointer%2C%2Aargs%2C%2A%2Aopts%29%3Aself-class-method" class="tooltip"> unsafe_construct(address : Pointer, *args, **opts) : self unsafe_construct</a> <h3>Class methods inherited from class <code><a href="../../reference.html">Reference</a></code>
</h3> <a href="../../reference.html#pre_initialize%28address%3APointer%29-class-method" class="tooltip"> pre_initialize(address : Pointer) pre_initialize</a> <h3>Instance methods inherited from class <code><a href="../../object.html">Object</a></code>
</h3> <a href="../../object.html#%21%3ABool-instance-method" class="tooltip"> ! : Bool !</a>, <a href="../../object.html#%21%3D%28other%29-instance-method" class="tooltip"> !=(other) !=</a>, <a href="../../object.html#%21~%28other%29-instance-method" class="tooltip"> !~(other) !~</a>, <a href="../../object.html#%3D%3D%28other%29-instance-method" class="tooltip"> ==(other) ==</a>, <a href="../../object.html#%3D%3D%3D%28other%3AJSON%3A%3AAny%29-instance-method" class="tooltip"> ===(other : JSON::Any)<br>===(other : YAML::Any)<br>===(other) ===</a>, <a href="../../object.html#%3D~%28other%29-instance-method" class="tooltip"> =~(other) =~</a>, <a href="../../object.html#as%28type%3AClass%29-instance-method" class="tooltip"> as(type : Class) as</a>, <a href="../../object.html#as%3F%28type%3AClass%29-instance-method" class="tooltip"> as?(type : Class) as?</a>, <a href="../../object.html#class-instance-method" class="tooltip"> class class</a>, <a href="../../object.html#dup-instance-method" class="tooltip"> dup dup</a>, <a href="../../object.html#hash%28hasher%29-instance-method" class="tooltip"> hash(hasher)<br>hash hash</a>, <a href="../../object.html#in%3F%28collection%3AObject%29%3ABool-instance-method" class="tooltip"> in?(collection : Object) : Bool<br>in?(*values : Object) : Bool in?</a>, <a href="../../object.html#inspect%28io%3AIO%29%3ANil-instance-method" class="tooltip"> inspect(io : IO) : Nil<br>inspect : String inspect</a>, <a href="../../object.html#is_a%3F%28type%3AClass%29%3ABool-instance-method" class="tooltip"> is_a?(type : Class) : Bool is_a?</a>, <a href="../../object.html#itself-instance-method" class="tooltip"> itself itself</a>, <a href="../../object.html#nil%3F%3ABool-instance-method" class="tooltip"> nil? : Bool nil?</a>, <a href="../../object.html#not_nil%21%28message%29-instance-method" class="tooltip"> not_nil!(message)<br>not_nil! not_nil!</a>, <a href="../../object.html#pretty_inspect%28width%3D79%2Cnewline%3D%22%5Cn%22%2Cindent%3D0%29%3AString-instance-method" class="tooltip"> pretty_inspect(width = 79, newline = "\n", indent = 0) : String pretty_inspect</a>, <a href="../../object.html#pretty_print%28pp%3APrettyPrint%29%3ANil-instance-method" class="tooltip"> pretty_print(pp : PrettyPrint) : Nil pretty_print</a>, <a href="../../object.html#responds_to%3F%28name%3ASymbol%29%3ABool-instance-method" class="tooltip"> responds_to?(name : Symbol) : Bool responds_to?</a>, <a href="../../object.html#tap%28%26%29-instance-method" class="tooltip"> tap(&amp;) tap</a>, <a href="../../object.html#to_json%28io%3AIO%29%3ANil-instance-method" class="tooltip"> to_json(io : IO) : Nil<br>to_json : String to_json</a>, <a href="../../object.html#to_pretty_json%28indent%3AString%3D%22%22%29%3AString-instance-method" class="tooltip"> to_pretty_json(indent : String = " ") : String<br>to_pretty_json(io : IO, indent : String = " ") : Nil to_pretty_json</a>, <a href="../../object.html#to_s%28io%3AIO%29%3ANil-instance-method" class="tooltip"> to_s(io : IO) : Nil<br>to_s : String to_s</a>, <a href="../../object.html#to_yaml%28io%3AIO%29%3ANil-instance-method" class="tooltip"> to_yaml(io : IO) : Nil<br>to_yaml : String to_yaml</a>, <a href="../../object.html#try%28%26%29-instance-method" class="tooltip"> try(&amp;) try</a>, <a href="../../object.html#unsafe_as%28type%3AT.class%29forallT-instance-method" class="tooltip"> unsafe_as(type : T.class) forall T unsafe_as</a> <h3>Class methods inherited from class <code><a href="../../object.html">Object</a></code>
</h3> <a href="../../object.html#from_json%28string_or_io%2Croot%3AString%29-class-method" class="tooltip"> from_json(string_or_io, root : String)<br>from_json(string_or_io) from_json</a>, <a href="../../object.html#from_yaml%28string_or_io%3AString%7CIO%29-class-method" class="tooltip"> from_yaml(string_or_io : String | IO) from_yaml</a> <h3>Macros inherited from class <code><a href="../../object.html">Object</a></code>
</h3> <a href="../../object.html#class_getter%28%2Anames%2C%26block%29-macro" class="tooltip"> class_getter(*names, &amp;block) class_getter</a>, <a href="../../object.html#class_getter%21%28%2Anames%29-macro" class="tooltip"> class_getter!(*names) class_getter!</a>, <a href="../../object.html#class_getter%3F%28%2Anames%2C%26block%29-macro" class="tooltip"> class_getter?(*names, &amp;block) class_getter?</a>, <a href="../../object.html#class_property%28%2Anames%2C%26block%29-macro" class="tooltip"> class_property(*names, &amp;block) class_property</a>, <a href="../../object.html#class_property%21%28%2Anames%29-macro" class="tooltip"> class_property!(*names) class_property!</a>, <a href="../../object.html#class_property%3F%28%2Anames%2C%26block%29-macro" class="tooltip"> class_property?(*names, &amp;block) class_property?</a>, <a href="../../object.html#class_setter%28%2Anames%29-macro" class="tooltip"> class_setter(*names) class_setter</a>, <a href="../../object.html#def_clone-macro" class="tooltip"> def_clone def_clone</a>, <a href="../../object.html#def_equals%28%2Afields%29-macro" class="tooltip"> def_equals(*fields) def_equals</a>, <a href="../../object.html#def_equals_and_hash%28%2Afields%29-macro" class="tooltip"> def_equals_and_hash(*fields) def_equals_and_hash</a>, <a href="../../object.html#def_hash%28%2Afields%29-macro" class="tooltip"> def_hash(*fields) def_hash</a>, <a href="../../object.html#delegate%28%2Amethods%2Ctoobject%29-macro" class="tooltip"> delegate(*methods, to object) delegate</a>, <a href="../../object.html#forward_missing_to%28delegate%29-macro" class="tooltip"> forward_missing_to(delegate) forward_missing_to</a>, <a href="../../object.html#getter%28%2Anames%2C%26block%29-macro" class="tooltip"> getter(*names, &amp;block) getter</a>, <a href="../../object.html#getter%21%28%2Anames%29-macro" class="tooltip"> getter!(*names) getter!</a>, <a href="../../object.html#getter%3F%28%2Anames%2C%26block%29-macro" class="tooltip"> getter?(*names, &amp;block) getter?</a>, <a href="../../object.html#property%28%2Anames%2C%26block%29-macro" class="tooltip"> property(*names, &amp;block) property</a>, <a href="../../object.html#property%21%28%2Anames%29-macro" class="tooltip"> property!(*names) property!</a>, <a href="../../object.html#property%3F%28%2Anames%2C%26block%29-macro" class="tooltip"> property?(*names, &amp;block) property?</a>, <a href="../../object.html#setter%28%2Anames%29-macro" class="tooltip"> setter(*names) setter</a> </div> <h2>  Instance Method Detail </h2> <div class="entry-detail" id="accept(socket:::Socket):::Socket::Handle|Nil-instance-method"> <h3 class="signature">def <strong>accept</strong>(socket : <a href="../../socket.html">::Socket</a>) : ::Socket::Handle | <a href="../../nil.html">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/89944bf17/src/crystal/event_loop/polling.cr#L185" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <div class="doc-inherited"> Description copied from module <a href="socket.html">Crystal::EventLoop::Socket</a> </div> <p>Accepts an incoming TCP connection on the socket.</p> <p>Blocks the current fiber if no connection is waiting, continuing when one becomes available. Otherwise returns immediately.</p> <p>Returns a handle to the socket for the new connection.</p> </div>   </div> <div class="entry-detail" id="after_fork:Nil-instance-method"> <h3 class="signature">def <strong>after_fork</strong> : <a href="../../nil.html">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/89944bf17/src/crystal/event_loop/polling.cr#L108" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>no parallelism issues, but let's clean-up anyway</p> </div>   </div> <div class="entry-detail" id="after_fork_before_exec:Nil-instance-method"> <h3 class="signature">def <strong>after_fork_before_exec</strong> : <a href="../../nil.html">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/89944bf17/src/crystal/event_loop/polling.cr#L104" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>reset the mutexes since another thread may have acquired the lock of one event loop, which would prevent closing file descriptors for example.</p> </div>   </div> <div class="entry-detail" id="close(file_descriptor:System::FileDescriptor):Nil-instance-method"> <h3 class="signature">def <strong>close</strong>(file_descriptor : System::FileDescriptor) : <a href="../../nil.html">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/89944bf17/src/crystal/event_loop/polling.cr#L163" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <div class="doc-inherited"> Description copied from module <a href="filedescriptor.html">Crystal::EventLoop::FileDescriptor</a> </div> <p>Closes the file descriptor resource.</p> </div>   </div> <div class="entry-detail" id="close(socket:::Socket):Nil-instance-method"> <h3 class="signature">def <strong>close</strong>(socket : <a href="../../socket.html">::Socket</a>) : <a href="../../nil.html">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/89944bf17/src/crystal/event_loop/polling.cr#L266" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <div class="doc-inherited"> Description copied from module <a href="socket.html">Crystal::EventLoop::Socket</a> </div> <p>Closes the socket.</p> </div>   </div> <div class="entry-detail" id="connect(socket:::Socket,address:::Socket::Addrinfo|::Socket::Address,timeout:Time::Span|Nil):IO::Error|Nil-instance-method"> <h3 class="signature">def <strong>connect</strong>(socket : <a href="../../socket.html">::Socket</a>, address : <a href="../../socket/addrinfo.html">::Socket::Addrinfo</a> | <a href="../../socket/address.html">::Socket::Address</a>, timeout : <a href="../../time/span.html">Time::Span</a> | <a href="../../nil.html">Nil</a>) : <a href="../../io/error.html">IO::Error</a> | <a href="../../nil.html">Nil</a><a href="https://github.com/crystal-lang/crystal/blob/89944bf17/src/crystal/event_loop/polling.cr#L218" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <div class="doc-inherited"> Description copied from module <a href="socket.html">Crystal::EventLoop::Socket</a> </div> <p>Opens a connection on <em>socket</em> to the target <em>address</em>.</p> <p>Blocks the current fiber and continues when the connection is established.</p> <p>Returns <code><a href="../../io/error.html">IO::Error</a></code> in case of an error. The caller is responsible for raising it as an exception if necessary.</p> </div>   </div> <div class="entry-detail" id="create_resume_event(fiber:Fiber):FiberEvent-instance-method"> <h3 class="signature">def <strong>create_resume_event</strong>(fiber : <a href="../../fiber.html">Fiber</a>) : <a href="polling/fiberevent.html">FiberEvent</a><a href="https://github.com/crystal-lang/crystal/blob/89944bf17/src/crystal/event_loop/polling.cr#L125" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <div class="doc-inherited"> Description copied from class <a href="../eventloop.html">Crystal::EventLoop</a> </div> <p>Create a new resume event for a fiber.</p> </div>   </div> <div class="entry-detail" id="create_timeout_event(fiber:Fiber):FiberEvent-instance-method"> <h3 class="signature">def <strong>create_timeout_event</strong>(fiber : <a href="../../fiber.html">Fiber</a>) : <a href="polling/fiberevent.html">FiberEvent</a><a href="https://github.com/crystal-lang/crystal/blob/89944bf17/src/crystal/event_loop/polling.cr#L129" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <div class="doc-inherited"> Description copied from class <a href="../eventloop.html">Crystal::EventLoop</a> </div> <p>Creates a timeout_event.</p> </div>   </div> <div class="entry-detail" id="read(file_descriptor:System::FileDescriptor,slice:Bytes):Int32-instance-method"> <h3 class="signature">def <strong>read</strong>(file_descriptor : System::FileDescriptor, slice : <a href="../../bytes.html">Bytes</a>) : <a href="../../int32.html">Int32</a><a href="https://github.com/crystal-lang/crystal/blob/89944bf17/src/crystal/event_loop/polling.cr#L135" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <div class="doc-inherited"> Description copied from module <a href="filedescriptor.html">Crystal::EventLoop::FileDescriptor</a> </div> <p>Reads at least one byte from the file descriptor into <em>slice</em>.</p> <p>Blocks the current fiber if no data is available for reading, continuing when available. Otherwise returns immediately.</p> <p>Returns the number of bytes read (up to <code>slice.size</code>). Returns 0 when EOF is reached.</p> </div>   </div> <div class="entry-detail" id="read(socket:::Socket,slice:Bytes):Int32-instance-method"> <h3 class="signature">def <strong>read</strong>(socket : <a href="../../socket.html">::Socket</a>, slice : <a href="../../bytes.html">Bytes</a>) : <a href="../../int32.html">Int32</a><a href="https://github.com/crystal-lang/crystal/blob/89944bf17/src/crystal/event_loop/polling.cr#L173" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <div class="doc-inherited"> Description copied from module <a href="socket.html">Crystal::EventLoop::Socket</a> </div> <p>Reads at least one byte from the socket into <em>slice</em>.</p> <p>Blocks the current fiber if no data is available for reading, continuing when available. Otherwise returns immediately.</p> <p>Returns the number of bytes read (up to <code>slice.size</code>). Returns 0 when the socket is closed and no data available.</p> <p>Use <code><a href="polling.html#receive_from%28socket%3A%3A%3ASocket%2Cslice%3ABytes%29%3ATuple%28Int32%2C%3A%3ASocket%3A%3AAddress%29-instance-method">#receive_from</a></code> for capturing the source address of a message.</p> </div>   </div> <div class="entry-detail" id="receive_from(socket:::Socket,slice:Bytes):Tuple(Int32,::Socket::Address)-instance-method"> <h3 class="signature">def <strong>receive_from</strong>(socket : <a href="../../socket.html">::Socket</a>, slice : <a href="../../bytes.html">Bytes</a>) : <a href="../../tuple.html">Tuple</a>(<a href="../../int32.html">Int32</a>, <a href="../../socket/address.html">::Socket::Address</a>)<a href="https://github.com/crystal-lang/crystal/blob/89944bf17/src/crystal/event_loop/polling.cr#L242" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <div class="doc-inherited"> Description copied from module <a href="socket.html">Crystal::EventLoop::Socket</a> </div> <p>Receives at least one byte from the socket into <em>slice</em>, capturing the source address.</p> <p>Blocks the current fiber if no data is available for reading, continuing when available. Otherwise returns immediately.</p> <p>Returns a tuple containing the number of bytes received (up to <code>slice.size</code>) and the source address.</p> </div>   </div> <div class="entry-detail" id="run(blocking:Bool):Bool-instance-method"> <h3 class="signature">def <strong>run</strong>(blocking : <a href="../../bool.html">Bool</a>) : <a href="../../bool.html">Bool</a><a href="https://github.com/crystal-lang/crystal/blob/89944bf17/src/crystal/event_loop/polling.cr#L116" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <p>NOTE thread unsafe</p> </div>   </div> <div class="entry-detail" id="send_to(socket:::Socket,slice:Bytes,address:::Socket::Address):Int32-instance-method"> <h3 class="signature">def <strong>send_to</strong>(socket : <a href="../../socket.html">::Socket</a>, slice : <a href="../../bytes.html">Bytes</a>, address : <a href="../../socket/address.html">::Socket::Address</a>) : <a href="../../int32.html">Int32</a><a href="https://github.com/crystal-lang/crystal/blob/89944bf17/src/crystal/event_loop/polling.cr#L236" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <div class="doc-inherited"> Description copied from module <a href="socket.html">Crystal::EventLoop::Socket</a> </div> <p>Sends at least one byte from <em>slice</em> to the socket with a target address <em>address</em>.</p> <p>Blocks the current fiber if the socket is not ready for writing, continuing when ready. Otherwise returns immediately.</p> <p>Returns the number of bytes sent (up to <code>slice.size</code>).</p> </div>   </div> <div class="entry-detail" id="write(file_descriptor:System::FileDescriptor,slice:Bytes):Int32-instance-method"> <h3 class="signature">def <strong>write</strong>(file_descriptor : System::FileDescriptor, slice : <a href="../../bytes.html">Bytes</a>) : <a href="../../int32.html">Int32</a><a href="https://github.com/crystal-lang/crystal/blob/89944bf17/src/crystal/event_loop/polling.cr#L149" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <div class="doc-inherited"> Description copied from module <a href="filedescriptor.html">Crystal::EventLoop::FileDescriptor</a> </div> <p>Writes at least one byte from <em>slice</em> to the file descriptor.</p> <p>Blocks the current fiber if the file descriptor isn't ready for writing, continuing when ready. Otherwise returns immediately.</p> <p>Returns the number of bytes written (up to <code>slice.size</code>).</p> </div>   </div> <div class="entry-detail" id="write(socket:::Socket,slice:Bytes):Int32-instance-method"> <h3 class="signature">def <strong>write</strong>(socket : <a href="../../socket.html">::Socket</a>, slice : <a href="../../bytes.html">Bytes</a>) : <a href="../../int32.html">Int32</a><a href="https://github.com/crystal-lang/crystal/blob/89944bf17/src/crystal/event_loop/polling.cr#L179" target="_blank" class="view-source">Source</a>
</h3> <div class="doc"> <div class="doc-inherited"> Description copied from module <a href="socket.html">Crystal::EventLoop::Socket</a> </div> <p>Writes at least one byte from <em>slice</em> to the socket.</p> <p>Blocks the current fiber if the socket is not ready for writing, continuing when ready. Otherwise returns immediately.</p> <p>Returns the number of bytes written (up to <code>slice.size</code>).</p> <p>Use <code><a href="polling.html#send_to%28socket%3A%3A%3ASocket%2Cslice%3ABytes%2Caddress%3A%3A%3ASocket%3A%3AAddress%29%3AInt32-instance-method">#send_to</a></code> for sending a message to a specific target address.</p> </div>   </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2025 Manas Technology Solutions.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://crystal-lang.org/api/1.15.1/Crystal/EventLoop/Polling.html" class="_attribution-link">https://crystal-lang.org/api/1.15.1/Crystal/EventLoop/Polling.html</a>
  </p>
</div>
