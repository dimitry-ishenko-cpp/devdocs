<h1>Initialization</h1>
<div class="refentry">  <div class="refnamediv"><p>Initialization — Library initialization and main loop</p></div> <div class="refsect1"> <h2 id="gtk4-General.functions">Functions</h2> <div class="informaltable"><table class="informaltable">  <tbody> <tr> <td class="function_type"> <span class="returnvalue">void</span> </td> <td class="function_name"> <a href="gtk4-general.html#gtk-disable-setlocale">gtk_disable_setlocale</a> <span class="c_punctuation">()</span> </td> </tr> <tr> <td class="function_type"> <a href="https://developer-old.gnome.org/pango/stable/pango-Scripts-and-Languages.html#PangoLanguage-struct"><span class="returnvalue">PangoLanguage</span></a> * </td> <td class="function_name"> <a href="gtk4-general.html#gtk-get-default-language">gtk_get_default_language</a> <span class="c_punctuation">()</span> </td> </tr> <tr> <td class="function_type"> <a href="gtkwidget.html#GtkTextDirection"><span class="returnvalue">GtkTextDirection</span></a> </td> <td class="function_name"> <a href="gtk4-general.html#gtk-get-locale-direction">gtk_get_locale_direction</a> <span class="c_punctuation">()</span> </td> </tr> <tr> <td class="function_type"> <span class="returnvalue">void</span> </td> <td class="function_name"> <a href="gtk4-general.html#gtk-init">gtk_init</a> <span class="c_punctuation">()</span> </td> </tr> <tr> <td class="function_type"> <span class="returnvalue">gboolean</span> </td> <td class="function_name"> <a href="gtk4-general.html#gtk-init-check">gtk_init_check</a> <span class="c_punctuation">()</span> </td> </tr> <tr> <td class="function_type"> <span class="returnvalue">gboolean</span> </td> <td class="function_name"> <a href="gtk4-general.html#gtk-is-initialized">gtk_is_initialized</a> <span class="c_punctuation">()</span> </td> </tr> <tr> <td class="function_type"> <a href="gtk4-general.html#GtkDebugFlags"><span class="returnvalue">GtkDebugFlags</span></a> </td> <td class="function_name"> <a href="gtk4-general.html#gtk-get-debug-flags">gtk_get_debug_flags</a> <span class="c_punctuation">()</span> </td> </tr> <tr> <td class="function_type"> <span class="returnvalue">void</span> </td> <td class="function_name"> <a href="gtk4-general.html#gtk-set-debug-flags">gtk_set_debug_flags</a> <span class="c_punctuation">()</span> </td> </tr> </tbody> </table></div> </div> <div class="refsect1"> <h2 id="gtk4-General.other">Types and Values</h2> <div class="informaltable"><table class="informaltable">  <tbody> <tr> <td class="define_keyword">#define</td> <td class="function_name"><a href="gtk4-general.html#GTK-PRIORITY-RESIZE:CAPS">GTK_PRIORITY_RESIZE</a></td> </tr> <tr> <td class="datatype_keyword">enum</td> <td class="function_name"><a href="gtk4-general.html#GtkDebugFlags">GtkDebugFlags</a></td> </tr> </tbody> </table></div> </div> <div class="refsect1"> <h2 id="gtk4-General.includes">Includes</h2> <pre class="synopsis" data-language="c">#include &lt;gtk/gtk.h&gt;
</pre> </div> <div class="refsect1"> <h2 id="gtk4-General.description">Description</h2> <p>Before using GTK, you need to initialize it using <a href="gtk4-general.html#gtk-init"><code class="function">gtk_init()</code></a>; this connects to the windowing system, sets up the locale and performs other initialization tasks. <a href="gtk4-general.html#gtk-init"><code class="function">gtk_init()</code></a> exits the application if errors occur; to avoid this, you can use <a href="gtk4-general.html#gtk-init-check"><code class="function">gtk_init_check()</code></a>, which allows you to recover from a failed GTK initialization - you might start up your application in text mode instead.</p> <p>Like all GUI toolkits, GTK uses an event-driven programming model. When the user is doing nothing, GTK sits in the “main loop” and waits for input. If the user performs some action - say, a mouse click - then the main loop “wakes up” and delivers an event to GTK. GTK forwards the event to one or more widgets.</p> <p>When widgets receive an event, they frequently emit one or more “signals”. Signals notify your program that "something interesting happened" by invoking functions you’ve connected to the signal with <code class="function">g_signal_connect()</code>. Functions connected to a signal are often called “callbacks”.</p> <p>When your callbacks are invoked, you would typically take some action - for example, when an Open button is clicked you might display a <a href="gtkfilechooserdialog.html#GtkFileChooserDialog-struct"><span class="type">GtkFileChooserDialog</span></a>. After a callback finishes, GTK will return to the main loop and await more user input.</p> <div class="refsect3"> <h4>Typical <code class="function">main()</code> function for a GTK application</h4>   <p>See <span class="type">GMainLoop</span> in the GLib documentation to learn more about main loops and their features.</p> </div> </div> <div class="refsect1"> <h2 id="gtk4-General.functions_details">Functions</h2> <div class="refsect2"> <h3 id="gtk-disable-setlocale">gtk_disable_setlocale ()</h3> <pre class="programlisting" data-language="c">void
gtk_disable_setlocale (void);</pre> <p>Prevents <a href="gtk4-general.html#gtk-init"><code class="function">gtk_init()</code></a>, <a href="gtk4-general.html#gtk-init-check"><code class="function">gtk_init_check()</code></a> and <code class="function">gtk_parse_args()</code> from automatically calling <code class="literal">setlocale (LC_ALL, "")</code>. You would want to use this function if you wanted to set the locale for your program to something other than the user’s locale, or if you wanted to set different values for different locale categories.</p> <p>Most programs should not need to call this function.</p> </div>  <div class="refsect2"> <h3 id="gtk-get-default-language">gtk_get_default_language ()</h3> <pre class="programlisting"><a href="https://developer-old.gnome.org/pango/stable/pango-Scripts-and-Languages.html#PangoLanguage-struct"><span class="returnvalue">PangoLanguage</span></a> *
gtk_get_default_language (<em class="parameter"><code><span class="type">void</span></code></em>);</pre> <p>Returns the <a href="https://developer-old.gnome.org/pango/stable/pango-Scripts-and-Languages.html#PangoLanguage-struct"><span class="type">PangoLanguage</span></a> for the default language currently in effect. (Note that this can change over the life of an application.) The default language is derived from the current locale. It determines, for example, whether GTK uses the right-to-left or left-to-right text direction.</p> <p>This function is equivalent to <a href="https://developer-old.gnome.org/pango/stable/pango-Scripts-and-Languages.html#pango-language-get-default"><code class="function">pango_language_get_default()</code></a>. See that function for details.</p> <div class="refsect3"> <h4>Returns</h4> <p>the default language as a <a href="https://developer-old.gnome.org/pango/stable/pango-Scripts-and-Languages.html#PangoLanguage-struct"><span class="type">PangoLanguage</span></a>, must not be freed. </p> <p><span class="annotation">[<acronym title="Don't free data after the code is done."><span class="acronym">transfer none</span></acronym>]</span></p> </div> </div>  <div class="refsect2"> <h3 id="gtk-get-locale-direction">gtk_get_locale_direction ()</h3> <pre class="programlisting"><a href="gtkwidget.html#GtkTextDirection"><span class="returnvalue">GtkTextDirection</span></a>
gtk_get_locale_direction (<em class="parameter"><code><span class="type">void</span></code></em>);</pre> <p>Get the direction of the current locale. This is the expected reading direction for text and UI.</p> <p>This function depends on the current locale being set with <code class="function">setlocale()</code> and will default to setting the <a href="gtkwidget.html#GTK-TEXT-DIR-LTR:CAPS"><code class="literal">GTK_TEXT_DIR_LTR</code></a> direction otherwise. <a href="gtkwidget.html#GTK-TEXT-DIR-NONE:CAPS"><code class="literal">GTK_TEXT_DIR_NONE</code></a> will never be returned.</p> <p>GTK sets the default text direction according to the locale during <a href="gtk4-general.html#gtk-init"><code class="function">gtk_init()</code></a>, and you should normally use <a href="gtkwidget.html#gtk-widget-get-direction"><code class="function">gtk_widget_get_direction()</code></a> or <a href="gtkwidget.html#gtk-widget-get-default-direction"><code class="function">gtk_widget_get_default_direction()</code></a> to obtain the current direction.</p> <p>This function is only needed rare cases when the locale is changed after GTK has already been initialized. In this case, you can use it to update the default text direction as follows:</p> <div class="informalexample"> <td class="listing_code"><pre class="programlisting" data-language="c">int
main (int argc, char **argv)
{
 GtkWidget *window;
  // Initialize i18n support with bindtextdomain(), etc.

  // ...

  // Initialize the widget set
  gtk_init ();

  // Create the main window
  window = gtk_window_new ();

  // Set up our GUI elements

  // ...

  // Show the application window
  gtk_widget_show (window);

  // Enter the main event loop, and wait for user interaction
  while (!done)
    g_main_context_iteration (NULL, TRUE);

  // The user lost interest
  return 0;
}</pre></td> </div>  <div class="refsect3"> <h4>Returns</h4> <p> the <a href="gtkwidget.html#GtkTextDirection"><span class="type">GtkTextDirection</span></a> of the current locale</p> </div> </div>  <div class="refsect2"> <h3 id="gtk-init">gtk_init ()</h3> <pre class="programlisting" data-language="c">void
gtk_init (void);</pre> <p>Call this function before using any other GTK functions in your GUI applications. It will initialize everything needed to operate the toolkit and parses some standard command line options.</p> <p>If you are using <a href="gtkapplication.html#GtkApplication-struct"><span class="type">GtkApplication</span></a>, you don't have to call <a href="gtk4-general.html#gtk-init"><code class="function">gtk_init()</code></a> or <a href="gtk4-general.html#gtk-init-check"><code class="function">gtk_init_check()</code></a>; the <span class="type">“startup”</span> handler does it for you.</p> <p>This function will terminate your program if it was unable to initialize the windowing system for some reason. If you want your program to fall back to a textual interface you want to call <a href="gtk4-general.html#gtk-init-check"><code class="function">gtk_init_check()</code></a> instead.</p> <p>GTK calls <code class="literal">signal (SIGPIPE, SIG_IGN)</code> during initialization, to ignore SIGPIPE signals, since these are almost never wanted in graphical applications. If you do need to handle SIGPIPE for some reason, reset the handler after <a href="gtk4-general.html#gtk-init"><code class="function">gtk_init()</code></a>, but notice that other libraries (e.g. libdbus or gvfs) might do similar things.</p> </div>  <div class="refsect2"> <h3 id="gtk-init-check">gtk_init_check ()</h3> <pre class="programlisting" data-language="c">gboolean
gtk_init_check (void);</pre> <p>This function does the same work as <a href="gtk4-general.html#gtk-init"><code class="function">gtk_init()</code></a> with only a single change: It does not terminate the program if the windowing system can’t be initialized. Instead it returns <code class="literal">FALSE</code> on failure.</p> <p>This way the application can fall back to some other means of communication with the user - for example a curses or command line interface.</p> <div class="refsect3"> <h4>Returns</h4> <p> <code class="literal">TRUE</code> if the windowing system has been successfully initialized, <code class="literal">FALSE</code> otherwise</p> </div> </div>  <div class="refsect2"> <h3 id="gtk-is-initialized">gtk_is_initialized ()</h3> <pre class="programlisting" data-language="c">gboolean
gtk_is_initialized (void);</pre> <p>Use this function to check if GTK has been initialized with <a href="gtk4-general.html#gtk-init"><code class="function">gtk_init()</code></a> or <a href="gtk4-general.html#gtk-init-check"><code class="function">gtk_init_check()</code></a>.</p> <div class="refsect3"> <h4>Returns</h4> <p> the initialization status</p> </div> </div>  <div class="refsect2"> <h3 id="gtk-get-debug-flags">gtk_get_debug_flags ()</h3> <pre class="programlisting"><a href="gtk4-general.html#GtkDebugFlags"><span class="returnvalue">GtkDebugFlags</span></a>
gtk_get_debug_flags (<em class="parameter"><code><span class="type">void</span></code></em>);</pre> <p>Returns the GTK debug flags that are currently active.</p> <p>This function is intended for GTK modules that want to adjust their debug output based on GTK debug flags.</p> <div class="refsect3"> <h4>Returns</h4> <p> the GTK debug flags.</p> </div> </div>  <div class="refsect2"> <h3 id="gtk-set-debug-flags">gtk_set_debug_flags ()</h3> <pre class="programlisting"><span class="returnvalue">void</span>
gtk_set_debug_flags (<em class="parameter"><code><a href="gtk4-general.html#GtkDebugFlags"><span class="type">GtkDebugFlags</span></a> flags</code></em>);</pre> <p>Sets the GTK debug flags.</p> <div class="refsect3"> <h4>Parameters</h4> <div class="informaltable"><table class="informaltable">  <tbody><tr> <td class="parameter_name"><p>flags</p></td> <td class="parameter_description"><p>the debug flags to set</p></td> <td class="parameter_annotations"> </td> </tr></tbody> </table></div> </div> </div> </div> <div class="refsect1"> <h2 id="gtk4-General.other_details">Types and Values</h2> <div class="refsect2"> <h3 id="GTK-PRIORITY-RESIZE:CAPS">GTK_PRIORITY_RESIZE</h3> <pre class="programlisting" data-language="c">#define GTK_PRIORITY_RESIZE (G_PRIORITY_HIGH_IDLE + 10)
</pre> <p>Use this priority for functionality related to size allocation.</p> <p>It is used internally by GTK+ to compute the sizes of widgets. This priority is higher than <a href="https://developer-old.gnome.org/gtk4/html/gdk4-Events.html#GDK-PRIORITY-REDRAW:CAPS"><code class="literal">GDK_PRIORITY_REDRAW</code></a> to avoid resizing a widget which was just redrawn.</p> </div>  <div class="refsect2"> <h3 id="GtkDebugFlags">enum GtkDebugFlags</h3> <div class="refsect3"> <h4>Members</h4> <div class="informaltable"><table class="informaltable">  <tbody> <tr> <td class="enum_member_name" id="GTK-DEBUG-TEXT:CAPS"><p>GTK_DEBUG_TEXT</p></td> <td> </td> <td> </td> </tr> <tr> <td class="enum_member_name" id="GTK-DEBUG-TREE:CAPS"><p>GTK_DEBUG_TREE</p></td> <td> </td> <td> </td> </tr> <tr> <td class="enum_member_name" id="GTK-DEBUG-KEYBINDINGS:CAPS"><p>GTK_DEBUG_KEYBINDINGS</p></td> <td> </td> <td> </td> </tr> <tr> <td class="enum_member_name" id="GTK-DEBUG-MODULES:CAPS"><p>GTK_DEBUG_MODULES</p></td> <td> </td> <td> </td> </tr> <tr> <td class="enum_member_name" id="GTK-DEBUG-GEOMETRY:CAPS"><p>GTK_DEBUG_GEOMETRY</p></td> <td> </td> <td> </td> </tr> <tr> <td class="enum_member_name" id="GTK-DEBUG-ICONTHEME:CAPS"><p>GTK_DEBUG_ICONTHEME</p></td> <td> </td> <td> </td> </tr> <tr> <td class="enum_member_name" id="GTK-DEBUG-PRINTING:CAPS"><p>GTK_DEBUG_PRINTING</p></td> <td> </td> <td> </td> </tr> <tr> <td class="enum_member_name" id="GTK-DEBUG-BUILDER:CAPS"><p>GTK_DEBUG_BUILDER</p></td> <td> </td> <td> </td> </tr> <tr> <td class="enum_member_name" id="GTK-DEBUG-SIZE-REQUEST:CAPS"><p>GTK_DEBUG_SIZE_REQUEST</p></td> <td> </td> <td> </td> </tr> <tr> <td class="enum_member_name" id="GTK-DEBUG-NO-CSS-CACHE:CAPS"><p>GTK_DEBUG_NO_CSS_CACHE</p></td> <td> </td> <td> </td> </tr> <tr> <td class="enum_member_name" id="GTK-DEBUG-INTERACTIVE:CAPS"><p>GTK_DEBUG_INTERACTIVE</p></td> <td> </td> <td> </td> </tr> <tr> <td class="enum_member_name" id="GTK-DEBUG-TOUCHSCREEN:CAPS"><p>GTK_DEBUG_TOUCHSCREEN</p></td> <td> </td> <td> </td> </tr> <tr> <td class="enum_member_name" id="GTK-DEBUG-ACTIONS:CAPS"><p>GTK_DEBUG_ACTIONS</p></td> <td> </td> <td> </td> </tr> <tr> <td class="enum_member_name" id="GTK-DEBUG-LAYOUT:CAPS"><p>GTK_DEBUG_LAYOUT</p></td> <td> </td> <td> </td> </tr> <tr> <td class="enum_member_name" id="GTK-DEBUG-SNAPSHOT:CAPS"><p>GTK_DEBUG_SNAPSHOT</p></td> <td> </td> <td> </td> </tr> <tr> <td class="enum_member_name" id="GTK-DEBUG-CONSTRAINTS:CAPS"><p>GTK_DEBUG_CONSTRAINTS</p></td> <td> </td> <td> </td> </tr> <tr> <td class="enum_member_name" id="GTK-DEBUG-BUILDER-OBJECTS:CAPS"><p>GTK_DEBUG_BUILDER_OBJECTS</p></td> <td> </td> <td> </td> </tr> <tr> <td class="enum_member_name" id="GTK-DEBUG-A11Y:CAPS"><p>GTK_DEBUG_A11Y</p></td> <td> </td> <td> </td> </tr> </tbody> </table></div> </div> </div> </div> <div class="refsect1"> <h2 id="gtk4-General.see-also">See Also</h2> <p>See the GLib manual, especially <span class="type">GMainLoop</span> and signal-related functions such as <code class="function">g_signal_connect()</code></p> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2020 The GNOME Project<br>Licensed under the GNU Lesser General Public License version 2.1 or later.<br>
    <a href="https://developer-old.gnome.org/gtk4/4.0/gtk4-General.html" class="_attribution-link">https://developer-old.gnome.org/gtk4/4.0/gtk4-General.html</a>
  </p>
</div>
