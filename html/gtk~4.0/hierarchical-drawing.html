<h1>Hierarchical drawing</h1>
<div class="sect1">  <p> During the Paint phase GTK receives a single <a href="https://developer-old.gnome.org/gtk4/html/GdkSurface.html#GdkSurface-render"><span class="type">“render”</span></a> signal on the toplevel surface. The signal handler will create a snapshot object (which is a helper for creating a scene graph) and call the <a href="gtkwidget.html#GtkWidget-struct"><span class="type">GtkWidget</span></a>::<code class="function">snapshot()</code> vfunc, which will propagate down the widget hierarchy. This lets each widget snapshot its content at the right place and time, correctly handling things like partial transparencies and overlapping widgets. </p> <p> During the snapshotting of each widget, GTK automatically handles the CSS rendering according to the CSS box model. It snapshots first the background, then the border, then the widget content itself, and finally the outline. </p> <p> To avoid excessive work when generating scene graphs, GTK caches render nodes. Each widget keeps a reference to its render node (which in turn, will refer to the render nodes of children, and grandchildren, and so on), and will reuse that node during the Paint phase. Invalidating a widget (by calling <a href="gtkwidget.html#gtk-widget-queue-draw"><code class="function">gtk_widget_queue_draw()</code></a>) discards the cached render node, forcing the widget to regenerate it the next time it needs to produce a snapshot. </p> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2020 The GNOME Project<br>Licensed under the GNU Lesser General Public License version 2.1 or later.<br>
    <a href="https://developer-old.gnome.org/gtk4/4.0/hierarchical-drawing.html" class="_attribution-link">https://developer-old.gnome.org/gtk4/4.0/hierarchical-drawing.html</a>
  </p>
</div>
