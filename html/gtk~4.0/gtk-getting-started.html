<h1>Getting Started with GTK</h1>
<div class="chapter">  <div class="toc"><dl class="toc"> <dt><span class="sect1"><a href="gtk-getting-started.html#id-1.2.3.5">Basics</a></span></dt> <dt><span class="sect1"><a href="ch01s02.html">Hello, World</a></span></dt> <dd><dl><dt><span class="sect2"><a href="ch01s02.html#gtk-getting-started-hello-world">Hello World in C</a></span></dt></dl></dd> <dt><span class="sect1"><a href="ch01s03.html">Packing</a></span></dt> <dd><dl><dt><span class="sect2"><a href="ch01s03.html#gtk-getting-started-grid-packing">Packing buttons</a></span></dt></dl></dd> <dt><span class="sect1"><a href="ch01s04.html">Custom Drawing</a></span></dt> <dd><dl><dt><span class="sect2"><a href="ch01s04.html#gtk-getting-started-drawing">Drawing in response to input</a></span></dt></dl></dd> <dt><span class="sect1"><a href="ch01s05.html">Building user interfaces</a></span></dt> <dd><dl><dt><span class="sect2"><a href="ch01s05.html#id-1.2.3.9.4">Packing buttons with GtkBuilder</a></span></dt></dl></dd> <dt><span class="sect1"><a href="ch01s06.html">Building applications</a></span></dt> <dd><dl> <dt><span class="sect2"><a href="ch01s06.html#id-1.2.3.10.7">A trivial application</a></span></dt> <dt><span class="sect2"><a href="ch01s06.html#id-1.2.3.10.8">Populating the window</a></span></dt> <dt><span class="sect2"><a href="ch01s06.html#id-1.2.3.10.9">Opening files</a></span></dt> <dt><span class="sect2"><a href="ch01s06.html#id-1.2.3.10.10">A menu</a></span></dt> <dt><span class="sect2"><a href="ch01s06.html#id-1.2.3.10.11">A preference dialog</a></span></dt> <dt><span class="sect2"><a href="ch01s06.html#id-1.2.3.10.12">Adding a search bar</a></span></dt> <dt><span class="sect2"><a href="ch01s06.html#id-1.2.3.10.13">Adding a side bar</a></span></dt> <dt><span class="sect2"><a href="ch01s06.html#id-1.2.3.10.14">Properties</a></span></dt> </dl></dd> </dl></div> <p> GTK is a <a class="ulink" href="http://en.wikipedia.org/wiki/Widget_toolkit" target="_top">widget toolkit</a>. Each user interface created by GTK consists of widgets. This is implemented in C using GObject, an object-oriented framework for C. Widgets are organized in a hierarchy. The window widget is the main container. The user interface is then built by adding buttons, drop-down menus, input fields, and other widgets to the window. If you are creating complex user interfaces it is recommended to use GtkBuilder and its GTK-specific markup description language, instead of assembling the interface manually. You can also use a visual user interface editor, like <a class="ulink" href="https://glade.gnome.org/" target="_top">glade</a>. </p> <p> GTK is event-driven. The toolkit listens for events such as a click on a button, and passes the event to your application. </p> <p> This chapter contains some tutorial information to get you started with GTK programming. It assumes that you have GTK, its dependencies and a C compiler installed and ready to use. If you need to build GTK itself first, refer to the Compiling the GTK libraries section in this reference. </p> <div class="sect1">  <p> To begin our introduction to GTK, we’ll start with a very simple application. This program will create an empty 200 × 200 pixel window. </p> <div class="figure"> <p class="title"><b>Figure 1. A window</b></p> <div class="figure-contents"><div class="mediaobject"><img alt="A window" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMoAAADpCAMAAABSg1gCAAAAGXRFWHRTb2Z0d2FyZQBnbm9tZS1zY3JlZW5zaG907wO/PgAAAJZQTFRFR3BM7e3tpqam8vLyqampt7e3rKyspqamqKiozs7O9fX17u7u/v7+7+/v/f398fHx+/v7+fn5+Pj49/f39PT09vb2////+vr6v7+/w8PDz8/PLjQ2x8fHy8vL1tbW09PTyMjIUFVW39/f5ubm4+Pj6urq2trarK2tOT9Btba2RUpMYWVnam5we36AgIOEnqGhlJSVi46PohcaLAAAAAp0Uk5TAP///2oaccrPBucXQTEAAAOqSURBVHja7dhrd6I6GIZhC53dlqlKDQj4egLUcPDU///nJuCpu9U1zt70A7PuJxCSNKvxEhG10+m8PD5ZLc/T40vH5MfzxBm2I4m1vJ4kev5hzslz/7XXkiRWurha0nT1/NL5Z9IaiaEsridZLMLHzpPjtiaJlVzJqq6nTx1r6PbaUhJrdTtWx+q16Kzo6e0Yitsmymw2qraPpY45VJSgNUn06Eom9TYylOCtNUn0ZDL/UqrNVIby1ibK/BTz2M/1IYYyaCRrWZl6JttTR+LPU76O/GkSPT5mPgim4/E0GMxPI2NDUY1QctmZ+l0K8+9SKd8G2bdSIicIZrMgcKKPFEc1kQcplXKKQqZK7UQrNex9niLx/11koaNjQj0IXDcY6PA0EhmK1wjFvKiWai6h7JSKs+7hgUtZZtk6VcrPY5FqxNdxFptn711CpbZVVbfuTJKfH7jWwfA10GdbTbH9RqJF+9vMKUt/JhvTl9jsUqwL2fpOLsX7phrRUupYdn5i5tiZ+ZNXFOruNT5QojB4HQaXc9IkZSkbO9v4O1m+y+REiV/dtGrEkrruodF/W5qGKjM7lE3hRcZ1dxZ5eMrocKcZnQdCQ+k7jcRfZ6GEzkryIvZNX+LDXldZ4V8afpE5jpZoEycy3mQPdy/hXSiRMteJuV5U9JHS9ZqJljizPacwr5+qK/Fhr6tYpqdG4qVVo5ttMsuPt9nWuX+JD2fFdrRlaccOv4OSimzMYSuy+ELZSbZZVw1LYquU3PMcMy/19lIZ/wtlv9dhqPf7f1F+2s3EKyU0h1DWXtWV+LDXlbLqdzDb9i3zDpb7ZnhSzZtK6fzBEovLZR+Gl/p82T/YXjPFHSqznD906+6wZ9f7oRr0zFfzY6Nnpnn1PNs5Tr6zpPn4dgxlabcmaX78vDWef03LKOHkdipKvzUxlNHNGErabU9Gv6P0W1MW0fEL8JW07Kx4q3A0u/0zRbdNUcvLJ5VPqW6RrYp98wfl1lFup7rb/yWBAgUKFChQoECBAgUKFChQoECBAgUKFChQoECBAgUKFChQoECBAgUKFChQoECBAgUKFChQoECBAgUKFChQoECBAgUKFChQoECBAgUKFChQoECBAgUKFChQoECBAgUKFChQoECBAgUKFChQoECBAgUKFChQoECBAgUKFChQoECBAgUKFChQoECBAgUKFChQoECBAgUKFChQoECBAgUKFChQoECBAgUKFChQoECBAgUKFCjfTvlr8gtToEABs2TwLwAAAABJRU5ErkJggg=="></div></div> </div> <p> Create a new file with the following content named <code class="literal">example-0.c</code>. </p> <pre class="programlisting" data-language="c">#include &lt;gtk/gtk.h&gt;

static void
activate (GtkApplication* app,
          gpointer        user_data)
{
  GtkWidget *window;

  window = gtk_application_window_new (app);
  gtk_window_set_title (GTK_WINDOW (window), "Window");
  gtk_window_set_default_size (GTK_WINDOW (window), 200, 200);
  gtk_widget_show (window);
}

int
main (int    argc,
      char **argv)
{
  GtkApplication *app;
  int status;

  app = gtk_application_new ("org.gtk.example", G_APPLICATION_FLAGS_NONE);
  g_signal_connect (app, "activate", G_CALLBACK (activate), NULL);
  status = g_application_run (G_APPLICATION (app), argc, argv);
  g_object_unref (app);

  return status;
}
</pre> <p> You can compile the program above with GCC using: </p> <pre class="programlisting" data-language="c">gcc `pkg-config --cflags gtk4` -o example-0 example-0.c `pkg-config --libs gtk4`
</pre> <p> For more information on how to compile a GTK application, please refer to the <gtkdoclink href="gtk-compiling.html">Compiling GTK Applications</gtkdoclink> section in this reference. </p> <p> All GTK applications will, of course, include <code class="literal">gtk/gtk.h</code>, which declares functions, types and macros required by GTK applications. </p> <p> Even if GTK installs multiple header files, only the top-level <code class="literal">gtk/gtk.h</code> header can be directly included by third-party code. The compiler will abort with an error if any other header is directly included. </p> <p> In a GTK application, the purpose of the <code class="function">main()</code> function is to create a GtkApplication object and run it. In this example a GtkApplication pointer named <code class="literal">app</code> is declared and then initialized using <a href="gtkapplication.html#gtk-application-new"><code class="function">gtk_application_new()</code></a>. </p> <p> When creating a GtkApplication, you need to pick an application identifier (a name) and pass it to <a href="gtkapplication.html#gtk-application-new"><code class="function">gtk_application_new()</code></a> as parameter. For this example <code class="literal">org.gtk.example</code> is used. For choosing an identifier for your application, see <a class="ulink" href="https://wiki.gnome.org/HowDoI/ChooseApplicationID" target="_top">this guide</a>. Lastly, <a href="gtkapplication.html#gtk-application-new"><code class="function">gtk_application_new()</code></a> takes GApplicationFlags as input for your application, if your application would have special needs. </p> <p> Next the <a class="ulink" href="https://wiki.gnome.org/HowDoI/GtkApplication" target="_top">activate signal</a> is connected to the <code class="function">activate()</code> function above the <code class="function">main()</code> function. The <code class="literal">activate</code> signal will be emitted when your application is launched with <code class="function">g_application_run()</code> on the line below. The <code class="function">g_application_run()</code> call also takes as arguments the command line arguments (the <code class="literal">argc</code> count and the <code class="literal">argv</code> string array). Your application can override the command line handling, e.g. to open files passed on the commandline. </p> <p> Within <code class="function">g_application_run()</code> the activate signal is sent and we then proceed into the <code class="function">activate()</code> function of the application. This is where we construct our GTK window, so that a window is shown when the application is launched. The call to <a href="gtkapplicationwindow.html#gtk-application-window-new"><code class="function">gtk_application_window_new()</code></a> will create a new GtkWindow and store it inside the <code class="literal">window</code> pointer. The window will have a frame, a title bar, and window controls depending on the platform. </p> <p> A window title is set using <a href="gtkwindow.html#gtk-window-set-title"><code class="function">gtk_window_set_title()</code></a>. This function takes a GtkWindow* pointer and a string as input. As our <code class="literal">window</code> pointer is a GtkWidget pointer, we need to cast it to GtkWindow*. But instead of casting <code class="literal">window</code> via <code class="literal">(GtkWindow*)</code>, <code class="literal">window</code> can be cast using the macro <code class="literal"><code class="function">GTK_WINDOW()</code></code>. <code class="literal"><code class="function">GTK_WINDOW()</code></code> will check if the pointer is an instance of the GtkWindow class, before casting, and emit a warning if the check fails. More information about this convention can be found <a class="ulink" href="https://developer-old.gnome.org/gobject/stable/gtype-conventions.html" target="_top">here</a>. </p> <p> Finally the window size is set using <a href="gtkwindow.html#gtk-window-set-default-size"><code class="function">gtk_window_set_default_size()</code></a> and the window is then shown by GTK via <a href="gtkwidget.html#gtk-widget-show"><code class="function">gtk_widget_show()</code></a>. </p> <p> When you close the window, by for example pressing the X, the <code class="function">g_application_run()</code> call returns with a number which is saved inside an integer variable named <code class="literal">status</code>. Afterwards, the GtkApplication object is freed from memory with <code class="function">g_object_unref()</code>. Finally the status integer is returned and the application exits. </p> <p> While the program is running, GTK is receiving <span class="emphasis"><em>events</em></span>. These are typically input events caused by the user interacting with your program, but also things like messages from the window manager or other applications. GTK processes these and as a result, <span class="emphasis"><em>signals</em></span> may be emitted on your widgets. Connecting handlers for these signals is how you normally make your program do something in response to user input. </p> <p> The following example is slightly more complex, and tries to showcase some of the capabilities of GTK. </p> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2020 The GNOME Project<br>Licensed under the GNU Lesser General Public License version 2.1 or later.<br>
    <a href="https://developer-old.gnome.org/gtk4/4.0/gtk-getting-started.html" class="_attribution-link">https://developer-old.gnome.org/gtk4/4.0/gtk-getting-started.html</a>
  </p>
</div>
