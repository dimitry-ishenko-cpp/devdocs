<h1>GtkLockButton</h1>
<div class="refentry">  <div class="refnamediv">
<p>GtkLockButton — A widget to unlock or lock privileged operations</p>
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAABbCAMAAACrkqvUAAAAolBMVEVHcEwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADt7e0AAACnq6cuNDbb3tvd393w8vDz9fPt8O3g4uDq7Ori5eLZ3Nrn6efm6Oby9PLs7uzk5+Tr7evv8e/e4N7p6+nLzsyIjIzEx8VCSEk0Ojx+goJrcHC5vLpTWFleY2SRlZXyYJo5AAAAFXRSTlMAXnttP08wCBQhhwQNGyo2SURnWHQ5ewHpAAADMElEQVR42u3c23KiQBCAYU08wAqoMRtas3EH3ZCQcQ4gvP+r7TSKYtzUXqgXk+m/Ek7KxXwJ5YVV3elQFEV1OqO6oTvtFjzaL//JuTwvCILhQeDpp2M9+WGIBsMdwMg9gCjy/dAIOAvQGw8iFBi6CjCZ9sa1gKsAs/4EBdwFeOgagYEfOgvwaASm4yj0aoChewB3jw+zSc88A64C/Li77/bNM0AABEAABEAABEAABEAABEAABEAA1yot4qtXMIsACv7868o988IigPj9z9V7j20CeL5BBGDVI9COlwpAlfz9sqwF4Gb5mOIOAby0KkFtqmqjoHy5KGsBFGjcaVAOAby2AqhwVwG8XpRVAG+tADa42wC8XZRVAL9bGQCzRYD21VzjlkPWXBAnL+9v5a0TqwA+WlVVgTsD0L6aa9wagOaCOHl5F/DWiVUAq5M+8NcAtK/lGrccFs0FoVZnAW+dWAxQ9wXAnEstlYx3AEkuZWlWvdxIVSYrECsuCxsB1ucZgPZprnGLAFDxZaUyodbrtMwXTMvFWpc8E+kahFl/c4edAEm+3ScBtnlyBpCYH/M24Agg8JjJeAm8fhPEx/XbBZA2beCk6vBCrnEraoA0zRAgTWOFF7cVB1a/CbRMDndYBcCaPgFsDi/oErexYgaAsQyEUIwJPF7KOAFRvwlEvs2aO74ZQAGaJ7HUO4CFedqh4Mw8JAst56zcCsYRYFHm3xSAFaVU22q5A5ibP3mujIb5FMjNyhNtPg0SA8ASubERYNn0GWD5j7LjITs9rU/Y/vD7ApyDZEeF46FVAFnTZ4Ds/+0BWme7nAH4KqsAFjeIAGwCmN8gqwCSG2QTQCGuvvy5sOm7wZt8O5xaBGBBBEAABEAABEAABEAABEAABEAABEAABEAABEAABEAAbgM4Vz1D5DBEZeSF0Xja7z483rlSM0VmP0YnCP1Bb2IE7l0J19+aIxR4fjQ2ArOuK81w/dFhlFbghSgwnfRdaYLr90NvP0xtWAsMxj1nGp9OkxsFKOBH0cCVoghHKjYDFfFfIPC80Bi4UlhPlBw2IzVxnmqABu6EI0WPM0Xdmyp7GCr7F55OvfStQUJlAAAAAElFTkSuQmCC">
</div> <div class="refsect1"> <h2 id="GtkLockButton.functions">Functions</h2> <div class="informaltable"><table class="informaltable">  <tbody> <tr> <td class="function_type"> <a href="gtkwidget.html#GtkWidget-struct"><span class="returnvalue">GtkWidget</span></a> * </td> <td class="function_name"> <a href="gtklockbutton.html#gtk-lock-button-new">gtk_lock_button_new</a> <span class="c_punctuation">()</span> </td> </tr> <tr> <td class="function_type"> <span class="returnvalue">GPermission</span> * </td> <td class="function_name"> <a href="gtklockbutton.html#gtk-lock-button-get-permission">gtk_lock_button_get_permission</a> <span class="c_punctuation">()</span> </td> </tr> <tr> <td class="function_type"> <span class="returnvalue">void</span> </td> <td class="function_name"> <a href="gtklockbutton.html#gtk-lock-button-set-permission">gtk_lock_button_set_permission</a> <span class="c_punctuation">()</span> </td> </tr> </tbody> </table></div> </div> <div class="refsect1"> <h2 id="GtkLockButton.properties">Properties</h2> <div class="informaltable"><table class="informaltable">  <tbody> <tr> <td class="property_type"> <span class="type">GPermission</span> *</td> <td class="property_name"><a href="gtklockbutton.html#GtkLockButton--permission">permission</a></td> <td class="property_flags">Read / Write</td> </tr> <tr> <td class="property_type"> <span class="type">char</span> *</td> <td class="property_name"><a href="gtklockbutton.html#GtkLockButton--text-lock">text-lock</a></td> <td class="property_flags">Read / Write / Construct</td> </tr> <tr> <td class="property_type"> <span class="type">char</span> *</td> <td class="property_name"><a href="gtklockbutton.html#GtkLockButton--text-unlock">text-unlock</a></td> <td class="property_flags">Read / Write / Construct</td> </tr> <tr> <td class="property_type"> <span class="type">char</span> *</td> <td class="property_name"><a href="gtklockbutton.html#GtkLockButton--tooltip-lock">tooltip-lock</a></td> <td class="property_flags">Read / Write / Construct</td> </tr> <tr> <td class="property_type"> <span class="type">char</span> *</td> <td class="property_name"><a href="gtklockbutton.html#GtkLockButton--tooltip-not-authorized">tooltip-not-authorized</a></td> <td class="property_flags">Read / Write / Construct</td> </tr> <tr> <td class="property_type"> <span class="type">char</span> *</td> <td class="property_name"><a href="gtklockbutton.html#GtkLockButton--tooltip-unlock">tooltip-unlock</a></td> <td class="property_flags">Read / Write / Construct</td> </tr> </tbody> </table></div> </div> <div class="refsect1"> <h2 id="GtkLockButton.other">Types and Values</h2> <div class="informaltable"><table class="informaltable">  <tbody><tr> <td class="datatype_keyword"> </td> <td class="function_name"><a href="gtklockbutton.html#GtkLockButton-struct">GtkLockButton</a></td> </tr></tbody> </table></div> </div> <div class="refsect1"> <h2 id="GtkLockButton.object-hierarchy">Object Hierarchy</h2> <pre class="screen">    GObject
    <span class="lineart">╰──</span> GInitiallyUnowned
        <span class="lineart">╰──</span> <a href="gtkwidget.html#GtkWidget-struct">GtkWidget</a>
            <span class="lineart">╰──</span> <a href="gtkbutton.html#GtkButton-struct">GtkButton</a>
                <span class="lineart">╰──</span> GtkLockButton
</pre> </div> <div class="refsect1"> <h2 id="GtkLockButton.implemented-interfaces">Implemented Interfaces</h2> <p> GtkLockButton implements <a href="gtkaccessible.html#GtkAccessible-struct">GtkAccessible</a>, <a href="gtkbuildable.html#GtkBuildable-struct">GtkBuildable</a>, <a href="gtkconstraint.html#GtkConstraintTarget-struct">GtkConstraintTarget</a> and <a href="gtkactionable.html#GtkActionable-struct">GtkActionable</a>.</p> </div> <div class="refsect1"> <h2 id="GtkLockButton.includes">Includes</h2> <pre class="synopsis" data-language="c">#include &lt;gtk/gtk.h&gt;
</pre> </div> <div class="refsect1"> <h2 id="GtkLockButton.description">Description</h2> <p>GtkLockButton is a widget that can be used in control panels or preference dialogs to allow users to obtain and revoke authorizations needed to operate the controls. The required authorization is represented by a <span class="type">GPermission</span> object. Concrete implementations of <span class="type">GPermission</span> may use PolicyKit or some other authorization framework. To obtain a PolicyKit-based <span class="type">GPermission</span>, use <a href="https://developer-old.gnome.org/usr/share/gtk-doc/html/polkit-1/PolkitPermission.html#polkit-permission-new"><code class="function">polkit_permission_new()</code></a>.</p> <p>If the user is not currently allowed to perform the action, but can obtain the permission, the widget looks like this:</p> <p><span class="inlinemediaobject"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGoAAAAsCAMAAAC6/t3UAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAJcEhZcwAACxMAAAsTAQCanBgAAACNUExURe3t7e/x7+zu7Ors6vDy8N/h3+3w7aisqN3g3fL08uzs7C40Ntrd2ubo5uHk4eTn5Nve29nc2fHz8eDj4Ojq6OPm4y81N8vOzDE3OcTIxtLV0zU7PZCUlImOjbu+vDA2OEJISVVaW2twcICEhISJiamtqlxiYkpPUdfa2GNoaTtAQnd8fHB1dbO2taapqeVJd7gAAAJISURBVFjD7ddbj6IwGIDhUaeKYktdhLYUsHI+qP//520LDlPq7rpGSebC10RtP+xzY4x8fLx79wPy4nw1UXmMRlRMluuJmpF4o1P5ZNJ6vcxH1Orz13StxtTsc7oMajkzInVDaVOTm8Hj3aEI922Zz19gGdR8Oa72eRqGGbcLc/J4dyhup4v5fJH6fPFqSp47itqR2gp9ez9/NpMyUpRMUYtnM6j9LbXvKajtnjK5uSEUX9dzxuHNyZzdoYzCMFYvkaS03SRTK3LYfm0wCs1P7ikzNgzK/ASEamchKUen0p7aDRR3HqfgfvS4pqjvEUxSuYKSCkRa8vICJQVh1QpREwhRVDZFACmDpIzhdwblwD8mKU9bflFVQENmhdxi3INOkexAJjBMa4aZIylSnp3/pILkeE3Y9jEJNMrrKXIIHBhQwjiCjMoLkFgBTrpTaD6WTMpztMKDf039NvnhMExSJJ9ZTzmAspgj59yozSIkB9BdRFsR6Kc5BoU8raj7/RuKhmFbqLcXDiTleZaiXI+p9664VDTuLqTsVGD9OJPSM6hsGMQ0JUEuWldSCEmKHM7EPSaVlYkK1UeG5DZluDgB7TiDcv9FDUM3LkRzDDHqKEyZmzQtICf5DWQuqtpSFJWk3KCM3L9SwNUyqe8hAMACamm5/ZNcql0L9FP1anXvtONMSu+Gei6DsvRZZlDWaym9G+q5DArrM7wdhV9MYWxpj5dmUFs8XWMq322na/zvNmbb3URhNv7PPumdiDe+69lM2Pue8t2P6DebLZDKkUMDcQAAAABJRU5ErkJggg=="></span></p> <p>and the user can click the button to request the permission. Depending on the platform, this may pop up an authentication dialog or ask the user to authenticate in some other way. Once the user has obtained the permission, the widget changes to this:</p> <p><span class="inlinemediaobject"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGoAAAAtCAMAAABxog5xAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAJcEhZcwAACxMAAAsTAQCanBgAAAB4UExURe3t7e3w7ers6uHk4fDy8PL08u/x76isqN7g3tve2+nr6S40Nuzs7Obp5uLl4trd2t3f3fHz8d/i3+zu7OTn5OPm4zA2OMfKyIyRkIiMjLe6uNPW1F9kZczPzXF1dqquq73AvUNISkpQUVZbXGZrbHd8fDxCRKerqtj9B3YAAAHKSURBVFjD7dddc6IwFIDhQqoCaQgb8QTChwKi//8fbiLVSY7F2tHM7kx9LzxIHB6YyYW8vb169bvK1cpbijiUaoKFp5aN+rCplTdpsQhWLvX+x1+IWr77C1HB0l/fUayoh6Eu2POpdeAW9UB10GfBw31DjUCHuh4oHcNnU+Ha7UDbJAzDlh6S9aNhCgW0NKOgNAkfDVHJFVUkE8WssxXwr64F8kcUSj+VGYayzjbAky8CmdwKUcxZlApoq3QtpUoyi6qeQNltwex0gM9xvCxo6jT52HV7yRgp+0NdMZBM9orNhajcXiuoU5kjKq/3XJRdzMZaxjLXlJbyuym7K+qcpsyQZpDuKECeTsNWS/MhamOvlYjaIGp7IPpzKBqIJmrsqvupdGOFqfNiqikzpRmiO3LYnZZg1w7ZZjZEkdQKU5dFCZJznolhX2Vlx9P9IEmVprCL61akcyFKECtMXRal2ZXQiqY1O5AQPuodyAnsRNUXziXsMGV3RV3KTJEQkc58n2ZmjsRsiHJ+qQrdWOtGc6RuXOaeblHmXqNseoLz/T+Pmq7pJ0TFmb/+HcVjf2HKYy6lpD9Juv/Zvb6JpO5bz4fHXu+Ur/6L/gInqIwE9T+bHwAAAABJRU5ErkJggg=="></span></p> <p>and the permission can be dropped again by clicking the button. If the user is not able to obtain the permission at all, the widget looks like this:</p> <p><span class="inlinemediaobject"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGsAAAAuCAMAAAAY9BfhAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAJcEhZcwAACxMAAAsTAQCanBgAAAA5UExURe3t7enq6Kuvq+bn5M7Qzezt7OLj4PT08qisqPPz8bG0sfHy78rMybq9ucPFwtXX1Nrb2b7Bvd7g3cWdzd4AAAFTSURBVFjD7ddhb4QgDAZgECilpYr+/x87EJ3nbVlu8zCXm+8HUWLyWK0Glbpy5UrjGMFmEdhbElVoFI7idhYq3yyMd1ZoZ/mXslyyOcmdYDm7xLW3BmsngMnaob2VqTKVsXCCBWWA/2H1sRzp7c033ddLQfNLC0A/ZOETrJXcWeFEa6tLU6SOUrVUTzRmgPOcuGIZgufVpXEwbDsuzyvIqDKjfBTDptSlaQqPWpyGNfllTvxNXZi/JwpNsUzZZ0rc1ZuHaU/9bIHdZbsf42yZxeJqTXMvitVYLwp7cv64FaWcl7pwa811BUoKYemNXvi4BRi1mqj/tDRObnle7EcxwRWLpQ+HLQ9jbjXLfrX82MXgtj6kXFGedXTbUn+0/LyEKKOvm/lonatj3T1e1/O/h+9q+f0K763WUQ0tPm/dK7EZxvZuPQ8n/qco1zDXL+eVV8oHIDJUCnRNHMMAAAAASUVORK5CYII="></span></p> <p>If the user has the permission and cannot drop it, the button is hidden.</p> <p>The text (and tooltips) that are shown in the various cases can be adjusted with the <a href="gtklockbutton.html#GtkLockButton--text-lock"><span class="type">“text-lock”</span></a>, <a href="gtklockbutton.html#GtkLockButton--text-unlock"><span class="type">“text-unlock”</span></a>, <a href="gtklockbutton.html#GtkLockButton--tooltip-lock"><span class="type">“tooltip-lock”</span></a>, <a href="gtklockbutton.html#GtkLockButton--tooltip-unlock"><span class="type">“tooltip-unlock”</span></a> and <a href="gtklockbutton.html#GtkLockButton--tooltip-not-authorized"><span class="type">“tooltip-not-authorized”</span></a> properties.</p> </div> <div class="refsect1"> <h2 id="GtkLockButton.functions_details">Functions</h2> <div class="refsect2"> <h3 id="gtk-lock-button-new">gtk_lock_button_new ()</h3> <pre class="programlisting"><a href="gtkwidget.html#GtkWidget-struct"><span class="returnvalue">GtkWidget</span></a> *
gtk_lock_button_new (<em class="parameter"><code><span class="type">GPermission</span> *permission</code></em>);</pre> <p>Creates a new lock button which reflects the <em class="parameter"><code>permission</code></em> .</p> <div class="refsect3"> <h4>Parameters</h4> <div class="informaltable"><table class="informaltable">  <tbody><tr> <td class="parameter_name"><p>permission</p></td> <td class="parameter_description"><p>a <span class="type">GPermission</span>. </p></td> <td class="parameter_annotations"><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td> </tr></tbody> </table></div> </div> <div class="refsect3"> <h4>Returns</h4> <p> a new <a href="gtklockbutton.html#GtkLockButton-struct"><span class="type">GtkLockButton</span></a></p> </div> </div>  <div class="refsect2"> <h3 id="gtk-lock-button-get-permission">gtk_lock_button_get_permission ()</h3> <pre class="programlisting"><span class="returnvalue">GPermission</span> *
gtk_lock_button_get_permission (<em class="parameter"><code><a href="gtklockbutton.html#GtkLockButton-struct"><span class="type">GtkLockButton</span></a> *button</code></em>);</pre> <p>Obtains the <span class="type">GPermission</span> object that controls <em class="parameter"><code>button</code></em> .</p> <div class="refsect3"> <h4>Parameters</h4> <div class="informaltable"><table class="informaltable">  <tbody><tr> <td class="parameter_name"><p>button</p></td> <td class="parameter_description"><p>a <a href="gtklockbutton.html#GtkLockButton-struct"><span class="type">GtkLockButton</span></a></p></td> <td class="parameter_annotations"> </td> </tr></tbody> </table></div> </div> <div class="refsect3"> <h4>Returns</h4> <p>the <span class="type">GPermission</span> of <em class="parameter"><code>button</code></em> . </p> <p><span class="annotation">[<acronym title="Don't free data after the code is done."><span class="acronym">transfer none</span></acronym>]</span></p> </div> </div>  <div class="refsect2"> <h3 id="gtk-lock-button-set-permission">gtk_lock_button_set_permission ()</h3> <pre class="programlisting"><span class="returnvalue">void</span>
gtk_lock_button_set_permission (<em class="parameter"><code><a href="gtklockbutton.html#GtkLockButton-struct"><span class="type">GtkLockButton</span></a> *button</code></em>,
                                <em class="parameter"><code><span class="type">GPermission</span> *permission</code></em>);</pre> <p>Sets the <span class="type">GPermission</span> object that controls <em class="parameter"><code>button</code></em> .</p> <div class="refsect3"> <h4>Parameters</h4> <div class="informaltable"><table class="informaltable">  <tbody> <tr> <td class="parameter_name"><p>button</p></td> <td class="parameter_description"><p>a <a href="gtklockbutton.html#GtkLockButton-struct"><span class="type">GtkLockButton</span></a></p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>permission</p></td> <td class="parameter_description"><p>a <span class="type">GPermission</span> object, or <code class="literal">NULL</code>. </p></td> <td class="parameter_annotations"><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td> </tr> </tbody> </table></div> </div> </div> </div> <div class="refsect1"> <h2 id="GtkLockButton.other_details">Types and Values</h2> <div class="refsect2"> <h3 id="GtkLockButton-struct">GtkLockButton</h3> <pre class="programlisting" data-language="c">typedef struct _GtkLockButton GtkLockButton;</pre> </div> </div> <div class="refsect1"> <h2 id="GtkLockButton.property-details">Property Details</h2> <div class="refsect2"> <h3 id="GtkLockButton--permission">The <code class="literal">“permission”</code> property</h3> <pre class="programlisting" data-language="c">  “permission”               GPermission *</pre> <p>The GPermission object controlling this button.</p> <p>Owner: GtkLockButton</p> <p>Flags: Read / Write</p> </div>  <div class="refsect2"> <h3 id="GtkLockButton--text-lock">The <code class="literal">“text-lock”</code> property</h3> <pre class="programlisting" data-language="c">  “text-lock”                char *</pre> <p>The text to display when prompting the user to lock.</p> <p>Owner: GtkLockButton</p> <p>Flags: Read / Write / Construct</p> <p>Default value: "Lock"</p> </div>  <div class="refsect2"> <h3 id="GtkLockButton--text-unlock">The <code class="literal">“text-unlock”</code> property</h3> <pre class="programlisting" data-language="c">  “text-unlock”              char *</pre> <p>The text to display when prompting the user to unlock.</p> <p>Owner: GtkLockButton</p> <p>Flags: Read / Write / Construct</p> <p>Default value: "Unlock"</p> </div>  <div class="refsect2"> <h3 id="GtkLockButton--tooltip-lock">The <code class="literal">“tooltip-lock”</code> property</h3> <pre class="programlisting" data-language="c">  “tooltip-lock”             char *</pre> <p>The tooltip to display when prompting the user to lock.</p> <p>Owner: GtkLockButton</p> <p>Flags: Read / Write / Construct</p> <p>Default value: "Dialog is unlocked.\nClick to prevent further changes"</p> </div>  <div class="refsect2"> <h3 id="GtkLockButton--tooltip-not-authorized">The <code class="literal">“tooltip-not-authorized”</code> property</h3> <pre class="programlisting" data-language="c">  “tooltip-not-authorized”   char *</pre> <p>The tooltip to display when prompting the user cannot obtain authorization.</p> <p>Owner: GtkLockButton</p> <p>Flags: Read / Write / Construct</p> <p>Default value: "System policy prevents changes.\nContact your system administrator"</p> </div>  <div class="refsect2"> <h3 id="GtkLockButton--tooltip-unlock">The <code class="literal">“tooltip-unlock”</code> property</h3> <pre class="programlisting" data-language="c">  “tooltip-unlock”           char *</pre> <p>The tooltip to display when prompting the user to unlock.</p> <p>Owner: GtkLockButton</p> <p>Flags: Read / Write / Construct</p> <p>Default value: "Dialog is locked.\nClick to make changes"</p> </div> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2020 The GNOME Project<br>Licensed under the GNU Lesser General Public License version 2.1 or later.<br>
    <a href="https://developer-old.gnome.org/gtk4/4.0/GtkLockButton.html" class="_attribution-link">https://developer-old.gnome.org/gtk4/4.0/GtkLockButton.html</a>
  </p>
</div>
