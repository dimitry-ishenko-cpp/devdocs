<h1>GtkDragSource</h1>
<div class="refentry">  <div class="refnamediv"><p>GtkDragSource — Event controller to initiate DND operations</p></div> <div class="refsect1"> <h2 id="GtkDragSource.functions">Functions</h2> <div class="informaltable"><table class="informaltable">  <tbody> <tr> <td class="function_type"> <a href="gtkdragsource.html#GtkDragSource-struct"><span class="returnvalue">GtkDragSource</span></a> * </td> <td class="function_name"> <a href="gtkdragsource.html#gtk-drag-source-new">gtk_drag_source_new</a> <span class="c_punctuation">()</span> </td> </tr> <tr> <td class="function_type"> <span class="returnvalue">void</span> </td> <td class="function_name"> <a href="gtkdragsource.html#gtk-drag-source-set-content">gtk_drag_source_set_content</a> <span class="c_punctuation">()</span> </td> </tr> <tr> <td class="function_type"> <a href="https://developer-old.gnome.org/gtk4/html/GdkContentProvider.html#GdkContentProvider-struct"><span class="returnvalue">GdkContentProvider</span></a> * </td> <td class="function_name"> <a href="gtkdragsource.html#gtk-drag-source-get-content">gtk_drag_source_get_content</a> <span class="c_punctuation">()</span> </td> </tr> <tr> <td class="function_type"> <span class="returnvalue">void</span> </td> <td class="function_name"> <a href="gtkdragsource.html#gtk-drag-source-set-actions">gtk_drag_source_set_actions</a> <span class="c_punctuation">()</span> </td> </tr> <tr> <td class="function_type"> <a href="https://developer-old.gnome.org/gtk4/html/gdk4-Drag-and-Drop.html#GdkDragAction"><span class="returnvalue">GdkDragAction</span></a> </td> <td class="function_name"> <a href="gtkdragsource.html#gtk-drag-source-get-actions">gtk_drag_source_get_actions</a> <span class="c_punctuation">()</span> </td> </tr> <tr> <td class="function_type"> <span class="returnvalue">void</span> </td> <td class="function_name"> <a href="gtkdragsource.html#gtk-drag-source-set-icon">gtk_drag_source_set_icon</a> <span class="c_punctuation">()</span> </td> </tr> <tr> <td class="function_type"> <span class="returnvalue">void</span> </td> <td class="function_name"> <a href="gtkdragsource.html#gtk-drag-source-drag-cancel">gtk_drag_source_drag_cancel</a> <span class="c_punctuation">()</span> </td> </tr> <tr> <td class="function_type"> <a href="https://developer-old.gnome.org/gtk4/html/gdk4-Drag-and-Drop.html#GdkDrag-struct"><span class="returnvalue">GdkDrag</span></a> * </td> <td class="function_name"> <a href="gtkdragsource.html#gtk-drag-source-get-drag">gtk_drag_source_get_drag</a> <span class="c_punctuation">()</span> </td> </tr> <tr> <td class="function_type"> <span class="returnvalue">gboolean</span> </td> <td class="function_name"> <a href="gtkdragsource.html#gtk-drag-check-threshold">gtk_drag_check_threshold</a> <span class="c_punctuation">()</span> </td> </tr> </tbody> </table></div> </div> <div class="refsect1"> <h2 id="GtkDragSource.properties">Properties</h2> <div class="informaltable"><table class="informaltable">  <tbody> <tr> <td class="property_type"><a href="https://developer-old.gnome.org/gtk4/html/gdk4-Drag-and-Drop.html#GdkDragAction"><span class="type">GdkDragAction</span></a></td> <td class="property_name"><a href="gtkdragsource.html#GtkDragSource--actions">actions</a></td> <td class="property_flags">Read / Write</td> </tr> <tr> <td class="property_type"> <a href="https://developer-old.gnome.org/gtk4/html/GdkContentProvider.html#GdkContentProvider-struct"><span class="type">GdkContentProvider</span></a> *</td> <td class="property_name"><a href="gtkdragsource.html#GtkDragSource--content">content</a></td> <td class="property_flags">Read / Write</td> </tr> </tbody> </table></div> </div> <div class="refsect1"> <h2 id="GtkDragSource.signals">Signals</h2> <div class="informaltable"><table class="informaltable">  <tbody> <tr> <td class="signal_type"><span class="returnvalue">void</span></td> <td class="signal_name"><a href="gtkdragsource.html#GtkDragSource-drag-begin">drag-begin</a></td> <td class="signal_flags">Run Last</td> </tr> <tr> <td class="signal_type"><span class="returnvalue">gboolean</span></td> <td class="signal_name"><a href="gtkdragsource.html#GtkDragSource-drag-cancel">drag-cancel</a></td> <td class="signal_flags">Run Last</td> </tr> <tr> <td class="signal_type"><span class="returnvalue">void</span></td> <td class="signal_name"><a href="gtkdragsource.html#GtkDragSource-drag-end">drag-end</a></td> <td class="signal_flags">Run Last</td> </tr> <tr> <td class="signal_type"> <a href="https://developer-old.gnome.org/gtk4/html/GdkContentProvider.html#GdkContentProvider-struct"><span class="returnvalue">GdkContentProvider</span></a>*</td> <td class="signal_name"><a href="gtkdragsource.html#GtkDragSource-prepare">prepare</a></td> <td class="signal_flags">Run Last</td> </tr> </tbody> </table></div> </div> <div class="refsect1"> <h2 id="GtkDragSource.other">Types and Values</h2> <div class="informaltable"><table class="informaltable">  <tbody><tr> <td class="datatype_keyword"> </td> <td class="function_name"><a href="gtkdragsource.html#GtkDragSource-struct">GtkDragSource</a></td> </tr></tbody> </table></div> </div> <div class="refsect1"> <h2 id="GtkDragSource.object-hierarchy">Object Hierarchy</h2> <pre class="screen">    GObject
    <span class="lineart">╰──</span> <a href="gtkeventcontroller.html#GtkEventController-struct">GtkEventController</a>
        <span class="lineart">╰──</span> <a href="gtkgesture.html#GtkGesture-struct">GtkGesture</a>
            <span class="lineart">╰──</span> <a href="gtkgesturesingle.html#GtkGestureSingle-struct">GtkGestureSingle</a>
                <span class="lineart">╰──</span> GtkDragSource
</pre> </div> <div class="refsect1"> <h2 id="GtkDragSource.includes">Includes</h2> <pre class="synopsis" data-language="c">#include &lt;gtk/gtk.h&gt;
</pre> </div> <div class="refsect1"> <h2 id="GtkDragSource.description">Description</h2> <p>GtkDragSource is an auxiliary object that is used to initiate Drag-And-Drop operations. It can be set up with the necessary ingredients for a DND operation ahead of time. This includes the source for the data that is being transferred, in the form of a <a href="https://developer-old.gnome.org/gtk4/html/GdkContentProvider.html#GdkContentProvider-struct"><span class="type">GdkContentProvider</span></a>, the desired action, and the icon to use during the drag operation. After setting it up, the drag source must be added to a widget as an event controller, using <a href="gtkwidget.html#gtk-widget-add-controller"><code class="function">gtk_widget_add_controller()</code></a>.</p>   <p>Setting up the content provider and icon ahead of time only makes sense when the data does not change. More commonly, you will want to set them up just in time. To do so, <a href="gtkdragsource.html#GtkDragSource-struct"><span class="type">GtkDragSource</span></a> has <a href="gtkdragsource.html#GtkDragSource-prepare"><span class="type">“prepare”</span></a> and <a href="gtkdragsource.html#GtkDragSource-drag-begin"><span class="type">“drag-begin”</span></a> signals.</p> <p>The ::prepare signal is emitted before a drag is started, and can be used to set the content provider and actions that the drag should be started with.</p>   <p>The ::drag-begin signal is emitted after the <a href="https://developer-old.gnome.org/gtk4/html/gdk4-Drag-and-Drop.html#GdkDrag-struct"><span class="type">GdkDrag</span></a> object has been created, and can be used to set up the drag icon.</p> <div class="informalexample"> <td class="listing_code"><pre class="programlisting" data-language="c">static void
my_widget_init (MyWidget *self)
{
  GtkDragSource *drag_source = gtk_drag_source_new ();

  g_signal_connect (drag_source, "prepare", G_CALLBACK (on_drag_prepare), self);
  g_signal_connect (drag_source, "drag-begin", G_CALLBACK (on_drag_begin), self);

  gtk_widget_add_controller (GTK_WIDGET (self), GTK_EVENT_CONTROLLER (drag_source));
}</pre></td> </div>  <p>During the DND operation, GtkDragSource emits signals that can be used to obtain updates about the status of the operation, but it is not normally necessary to connect to any signals, except for one case: when the supported actions include <a href="https://developer-old.gnome.org/gtk4/html/gdk4-Drag-and-Drop.html#GDK-ACTION-MOVE:CAPS"><code class="literal">GDK_ACTION_MOVE</code></a>, you need to listen for the <a href="gtkdragsource.html#GtkDragSource-drag-end"><span class="type">“drag-end”</span></a> signal and delete the data after it has been transferred.</p> </div> <div class="refsect1"> <h2 id="GtkDragSource.functions_details">Functions</h2> <div class="refsect2"> <h3 id="gtk-drag-source-new">gtk_drag_source_new ()</h3> <pre class="programlisting"><a href="gtkdragsource.html#GtkDragSource-struct"><span class="returnvalue">GtkDragSource</span></a> *
gtk_drag_source_new (<em class="parameter"><code><span class="type">void</span></code></em>);</pre> <p>Creates a new <a href="gtkdragsource.html#GtkDragSource-struct"><span class="type">GtkDragSource</span></a> object.</p> <div class="refsect3"> <h4>Returns</h4> <p> the new <a href="gtkdragsource.html#GtkDragSource-struct"><span class="type">GtkDragSource</span></a></p> </div> </div>  <div class="refsect2"> <h3 id="gtk-drag-source-set-content">gtk_drag_source_set_content ()</h3> <pre class="programlisting"><span class="returnvalue">void</span>
gtk_drag_source_set_content (<em class="parameter"><code><a href="gtkdragsource.html#GtkDragSource-struct"><span class="type">GtkDragSource</span></a> *source</code></em>,
                             <em class="parameter"><code><a href="https://developer-old.gnome.org/gtk4/html/GdkContentProvider.html#GdkContentProvider-struct"><span class="type">GdkContentProvider</span></a> *content</code></em>);</pre> <p>Sets a content provider on a <a href="gtkdragsource.html#GtkDragSource-struct"><span class="type">GtkDragSource</span></a>.</p> <p>When the data is requested in the cause of a DND operation, it will be obtained from the content provider.</p> <p>This function can be called before a drag is started, or in a handler for the <a href="gtkdragsource.html#GtkDragSource-prepare"><span class="type">“prepare”</span></a> signal.</p> <p>You may consider setting the content provider back to <code class="literal">NULL</code> in a <a href="gtkdragsource.html#GtkDragSource-drag-end"><span class="type">“drag-end”</span></a> signal handler.</p> <div class="refsect3"> <h4>Parameters</h4> <div class="informaltable"><table class="informaltable">  <tbody> <tr> <td class="parameter_name"><p>source</p></td> <td class="parameter_description"><p>a <a href="gtkdragsource.html#GtkDragSource-struct"><span class="type">GtkDragSource</span></a></p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>content</p></td> <td class="parameter_description"><p>a <a href="https://developer-old.gnome.org/gtk4/html/GdkContentProvider.html#GdkContentProvider-struct"><span class="type">GdkContentProvider</span></a>, or <code class="literal">NULL</code>. </p></td> <td class="parameter_annotations"><span class="annotation">[<acronym title="NULL may be passed as the value in, out, in-out; or as a return value."><span class="acronym">nullable</span></acronym>]</span></td> </tr> </tbody> </table></div> </div> </div>  <div class="refsect2"> <h3 id="gtk-drag-source-get-content">gtk_drag_source_get_content ()</h3> <pre class="programlisting"><a href="https://developer-old.gnome.org/gtk4/html/GdkContentProvider.html#GdkContentProvider-struct"><span class="returnvalue">GdkContentProvider</span></a> *
gtk_drag_source_get_content (<em class="parameter"><code><a href="gtkdragsource.html#GtkDragSource-struct"><span class="type">GtkDragSource</span></a> *source</code></em>);</pre> <p>Gets the current content provider of a <a href="gtkdragsource.html#GtkDragSource-struct"><span class="type">GtkDragSource</span></a>.</p> <div class="refsect3"> <h4>Parameters</h4> <div class="informaltable"><table class="informaltable">  <tbody><tr> <td class="parameter_name"><p>source</p></td> <td class="parameter_description"><p>a <a href="gtkdragsource.html#GtkDragSource-struct"><span class="type">GtkDragSource</span></a></p></td> <td class="parameter_annotations"> </td> </tr></tbody> </table></div> </div> <div class="refsect3"> <h4>Returns</h4> <p>the <a href="https://developer-old.gnome.org/gtk4/html/GdkContentProvider.html#GdkContentProvider-struct"><span class="type">GdkContentProvider</span></a> of <em class="parameter"><code>source</code></em> . </p> <p><span class="annotation">[<acronym title="NULL may be passed as the value in, out, in-out; or as a return value."><span class="acronym">nullable</span></acronym>][<acronym title="Don't free data after the code is done."><span class="acronym">transfer none</span></acronym>]</span></p> </div> </div>  <div class="refsect2"> <h3 id="gtk-drag-source-set-actions">gtk_drag_source_set_actions ()</h3> <pre class="programlisting"><span class="returnvalue">void</span>
gtk_drag_source_set_actions (<em class="parameter"><code><a href="gtkdragsource.html#GtkDragSource-struct"><span class="type">GtkDragSource</span></a> *source</code></em>,
                             <em class="parameter"><code><a href="https://developer-old.gnome.org/gtk4/html/gdk4-Drag-and-Drop.html#GdkDragAction"><span class="type">GdkDragAction</span></a> actions</code></em>);</pre> <p>Sets the actions on the <a href="gtkdragsource.html#GtkDragSource-struct"><span class="type">GtkDragSource</span></a>.</p> <p>During a DND operation, the actions are offered to potential drop targets. If <em class="parameter"><code>actions</code></em> include <a href="https://developer-old.gnome.org/gtk4/html/gdk4-Drag-and-Drop.html#GDK-ACTION-MOVE:CAPS"><code class="literal">GDK_ACTION_MOVE</code></a>, you need to listen to the <a href="gtkdragsource.html#GtkDragSource-drag-end"><span class="type">“drag-end”</span></a> signal and handle <em class="parameter"><code>delete_data</code></em> being <code class="literal">TRUE</code>.</p> <p>This function can be called before a drag is started, or in a handler for the <a href="gtkdragsource.html#GtkDragSource-prepare"><span class="type">“prepare”</span></a> signal.</p> <div class="refsect3"> <h4>Parameters</h4> <div class="informaltable"><table class="informaltable">  <tbody> <tr> <td class="parameter_name"><p>source</p></td> <td class="parameter_description"><p>a <a href="gtkdragsource.html#GtkDragSource-struct"><span class="type">GtkDragSource</span></a></p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>actions</p></td> <td class="parameter_description"><p>the actions to offer</p></td> <td class="parameter_annotations"> </td> </tr> </tbody> </table></div> </div> </div>  <div class="refsect2"> <h3 id="gtk-drag-source-get-actions">gtk_drag_source_get_actions ()</h3> <pre class="programlisting"><a href="https://developer-old.gnome.org/gtk4/html/gdk4-Drag-and-Drop.html#GdkDragAction"><span class="returnvalue">GdkDragAction</span></a>
gtk_drag_source_get_actions (<em class="parameter"><code><a href="gtkdragsource.html#GtkDragSource-struct"><span class="type">GtkDragSource</span></a> *source</code></em>);</pre> <p>Gets the actions that are currently set on the <a href="gtkdragsource.html#GtkDragSource-struct"><span class="type">GtkDragSource</span></a>.</p> <div class="refsect3"> <h4>Parameters</h4> <div class="informaltable"><table class="informaltable">  <tbody><tr> <td class="parameter_name"><p>source</p></td> <td class="parameter_description"><p>a <a href="gtkdragsource.html#GtkDragSource-struct"><span class="type">GtkDragSource</span></a></p></td> <td class="parameter_annotations"> </td> </tr></tbody> </table></div> </div> <div class="refsect3"> <h4>Returns</h4> <p> the actions set on <em class="parameter"><code>source</code></em> </p> </div> </div>  <div class="refsect2"> <h3 id="gtk-drag-source-set-icon">gtk_drag_source_set_icon ()</h3> <pre class="programlisting"><span class="returnvalue">void</span>
gtk_drag_source_set_icon (<em class="parameter"><code><a href="gtkdragsource.html#GtkDragSource-struct"><span class="type">GtkDragSource</span></a> *source</code></em>,
                          <em class="parameter"><code><a href="https://developer-old.gnome.org/gtk4/html/GdkPaintable.html#GdkPaintable-struct"><span class="type">GdkPaintable</span></a> *paintable</code></em>,
                          <em class="parameter"><code><span class="type">int</span> hot_x</code></em>,
                          <em class="parameter"><code><span class="type">int</span> hot_y</code></em>);</pre> <p>Sets a paintable to use as icon during DND operations.</p> <p>The hotspot coordinates determine the point on the icon that gets aligned with the hotspot of the cursor.</p> <p>If <em class="parameter"><code>paintable</code></em> is <code class="literal">NULL</code>, a default icon is used.</p> <p>This function can be called before a drag is started, or in a <a href="gtkdragsource.html#GtkDragSource-prepare"><span class="type">“prepare”</span></a> or <a href="gtkdragsource.html#GtkDragSource-drag-begin"><span class="type">“drag-begin”</span></a> signal handler.</p> <div class="refsect3"> <h4>Parameters</h4> <div class="informaltable"><table class="informaltable">  <tbody> <tr> <td class="parameter_name"><p>source</p></td> <td class="parameter_description"><p>a <a href="gtkdragsource.html#GtkDragSource-struct"><span class="type">GtkDragSource</span></a></p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>paintable</p></td> <td class="parameter_description"><p>the <a href="https://developer-old.gnome.org/gtk4/html/GdkPaintable.html#GdkPaintable-struct"><span class="type">GdkPaintable</span></a> to use as icon, or <code class="literal">NULL</code>. </p></td> <td class="parameter_annotations"><span class="annotation">[<acronym title="NULL may be passed as the value in, out, in-out; or as a return value."><span class="acronym">nullable</span></acronym>]</span></td> </tr> <tr> <td class="parameter_name"><p>hot_x</p></td> <td class="parameter_description"><p>the hotspot X coordinate on the icon</p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>hot_y</p></td> <td class="parameter_description"><p>the hotspot Y coordinate on the icon</p></td> <td class="parameter_annotations"> </td> </tr> </tbody> </table></div> </div> </div>  <div class="refsect2"> <h3 id="gtk-drag-source-drag-cancel">gtk_drag_source_drag_cancel ()</h3> <pre class="programlisting"><span class="returnvalue">void</span>
gtk_drag_source_drag_cancel (<em class="parameter"><code><a href="gtkdragsource.html#GtkDragSource-struct"><span class="type">GtkDragSource</span></a> *source</code></em>);</pre> <p>Cancels a currently ongoing drag operation.</p> <div class="refsect3"> <h4>Parameters</h4> <div class="informaltable"><table class="informaltable">  <tbody><tr> <td class="parameter_name"><p>source</p></td> <td class="parameter_description"><p>a <a href="gtkdragsource.html#GtkDragSource-struct"><span class="type">GtkDragSource</span></a></p></td> <td class="parameter_annotations"> </td> </tr></tbody> </table></div> </div> </div>  <div class="refsect2"> <h3 id="gtk-drag-source-get-drag">gtk_drag_source_get_drag ()</h3> <pre class="programlisting"><a href="https://developer-old.gnome.org/gtk4/html/gdk4-Drag-and-Drop.html#GdkDrag-struct"><span class="returnvalue">GdkDrag</span></a> *
gtk_drag_source_get_drag (<em class="parameter"><code><a href="gtkdragsource.html#GtkDragSource-struct"><span class="type">GtkDragSource</span></a> *source</code></em>);</pre> <p>Returns the underlying <a href="https://developer-old.gnome.org/gtk4/html/gdk4-Drag-and-Drop.html#GdkDrag-struct"><span class="type">GdkDrag</span></a> object for an ongoing drag.</p> <div class="refsect3"> <h4>Parameters</h4> <div class="informaltable"><table class="informaltable">  <tbody><tr> <td class="parameter_name"><p>source</p></td> <td class="parameter_description"><p>a <a href="gtkdragsource.html#GtkDragSource-struct"><span class="type">GtkDragSource</span></a></p></td> <td class="parameter_annotations"> </td> </tr></tbody> </table></div> </div> <div class="refsect3"> <h4>Returns</h4> <p>the <a href="https://developer-old.gnome.org/gtk4/html/gdk4-Drag-and-Drop.html#GdkDrag-struct"><span class="type">GdkDrag</span></a> of the current drag operation, or <code class="literal">NULL</code>. </p> <p><span class="annotation">[<acronym title="NULL may be passed as the value in, out, in-out; or as a return value."><span class="acronym">nullable</span></acronym>][<acronym title="Don't free data after the code is done."><span class="acronym">transfer none</span></acronym>]</span></p> </div> </div>  <div class="refsect2"> <h3 id="gtk-drag-check-threshold">gtk_drag_check_threshold ()</h3> <pre class="programlisting"><span class="returnvalue">gboolean</span>
gtk_drag_check_threshold (<em class="parameter"><code><a href="gtkwidget.html#GtkWidget-struct"><span class="type">GtkWidget</span></a> *widget</code></em>,
                          <em class="parameter"><code><span class="type">int</span> start_x</code></em>,
                          <em class="parameter"><code><span class="type">int</span> start_y</code></em>,
                          <em class="parameter"><code><span class="type">int</span> current_x</code></em>,
                          <em class="parameter"><code><span class="type">int</span> current_y</code></em>);</pre> <p>Checks to see if a mouse drag starting at (<em class="parameter"><code>start_x</code></em> , <em class="parameter"><code>start_y</code></em> ) and ending at (<em class="parameter"><code>current_x</code></em> , <em class="parameter"><code>current_y</code></em> ) has passed the GTK drag threshold, and thus should trigger the beginning of a drag-and-drop operation.</p> <p><span class="annotation">[<acronym title="This is a method"><span class="acronym">method</span></acronym>]</span></p> <div class="refsect3"> <h4>Parameters</h4> <div class="informaltable"><table class="informaltable">  <tbody> <tr> <td class="parameter_name"><p>widget</p></td> <td class="parameter_description"><p>a <a href="gtkwidget.html#GtkWidget-struct"><span class="type">GtkWidget</span></a></p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>start_x</p></td> <td class="parameter_description"><p>X coordinate of start of drag</p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>start_y</p></td> <td class="parameter_description"><p>Y coordinate of start of drag</p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>current_x</p></td> <td class="parameter_description"><p>current X coordinate</p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>current_y</p></td> <td class="parameter_description"><p>current Y coordinate</p></td> <td class="parameter_annotations"> </td> </tr> </tbody> </table></div> </div> <div class="refsect3"> <h4>Returns</h4> <p> <code class="literal">TRUE</code> if the drag threshold has been passed.</p> </div> </div> </div> <div class="refsect1"> <h2 id="GtkDragSource.other_details">Types and Values</h2> <div class="refsect2"> <h3 id="GtkDragSource-struct">GtkDragSource</h3> <pre class="programlisting" data-language="c">typedef struct _GtkDragSource GtkDragSource;</pre> </div> </div> <div class="refsect1"> <h2 id="GtkDragSource.property-details">Property Details</h2> <div class="refsect2"> <h3 id="GtkDragSource--actions">The <code class="literal">“actions”</code> property</h3> <pre class="programlisting">  “actions”                  <a href="https://developer-old.gnome.org/gtk4/html/gdk4-Drag-and-Drop.html#GdkDragAction"><span class="type">GdkDragAction</span></a></pre> <p>The actions that are supported by drag operations from the source.</p> <p>Note that you must handle the <a href="gtkdragsource.html#GtkDragSource-drag-end"><span class="type">“drag-end”</span></a> signal if the actions include <a href="https://developer-old.gnome.org/gtk4/html/gdk4-Drag-and-Drop.html#GDK-ACTION-MOVE:CAPS"><code class="literal">GDK_ACTION_MOVE</code></a>.</p> <p>Owner: GtkDragSource</p> <p>Flags: Read / Write</p> <p>Default value: GDK_ACTION_COPY</p> </div>  <div class="refsect2"> <h3 id="GtkDragSource--content">The <code class="literal">“content”</code> property</h3> <pre class="programlisting">  “content”                  <a href="https://developer-old.gnome.org/gtk4/html/GdkContentProvider.html#GdkContentProvider-struct"><span class="type">GdkContentProvider</span></a> *</pre> <p>The data that is offered by drag operations from this source, in the form of a <a href="https://developer-old.gnome.org/gtk4/html/GdkContentProvider.html#GdkContentProvider-struct"><span class="type">GdkContentProvider</span></a>.</p> <p>Owner: GtkDragSource</p> <p>Flags: Read / Write</p> </div> </div> <div class="refsect1"> <h2 id="GtkDragSource.signal-details">Signal Details</h2> <div class="refsect2"> <h3 id="GtkDragSource-drag-begin">The <code class="literal">“drag-begin”</code> signal</h3> <pre class="programlisting"><span class="returnvalue">void</span>
user_function (<a href="gtkdragsource.html#GtkDragSource-struct"><span class="type">GtkDragSource</span></a> *source,
               <a href="https://developer-old.gnome.org/gtk4/html/gdk4-Drag-and-Drop.html#GdkDrag-struct"><span class="type">GdkDrag</span></a>       *drag,
               <span class="type">gpointer</span>       user_data)</pre> <p>The ::drag-begin signal is emitted on the drag source when a drag is started. It can be used to e.g. set a custom drag icon with <a href="gtkdragsource.html#gtk-drag-source-set-icon"><code class="function">gtk_drag_source_set_icon()</code></a>.</p> <div class="refsect3"> <h4>Parameters</h4> <div class="informaltable"><table class="informaltable">  <tbody> <tr> <td class="parameter_name"><p>source</p></td> <td class="parameter_description"><p>the <a href="gtkdragsource.html#GtkDragSource-struct"><span class="type">GtkDragSource</span></a></p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>drag</p></td> <td class="parameter_description"><p>the <a href="https://developer-old.gnome.org/gtk4/html/gdk4-Drag-and-Drop.html#GdkDrag-struct"><span class="type">GdkDrag</span></a> object</p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>user_data</p></td> <td class="parameter_description"><p>user data set when the signal handler was connected.</p></td> <td class="parameter_annotations"> </td> </tr> </tbody> </table></div> </div> <p>Flags: Run Last</p> </div>  <div class="refsect2"> <h3 id="GtkDragSource-drag-cancel">The <code class="literal">“drag-cancel”</code> signal</h3> <pre class="programlisting"><span class="returnvalue">gboolean</span>
user_function (<a href="gtkdragsource.html#GtkDragSource-struct"><span class="type">GtkDragSource</span></a>      *source,
               <a href="https://developer-old.gnome.org/gtk4/html/gdk4-Drag-and-Drop.html#GdkDrag-struct"><span class="type">GdkDrag</span></a>            *drag,
               <a href="https://developer-old.gnome.org/gtk4/html/gdk4-Drag-and-Drop.html#GdkDragCancelReason"><span class="type">GdkDragCancelReason</span></a> reason,
               <span class="type">gpointer</span>            user_data)</pre> <p>The ::drag-cancel signal is emitted on the drag source when a drag has failed. The signal handler may handle a failed drag operation based on the type of error. It should return <code class="literal">TRUE</code> if the failure has been handled and the default "drag operation failed" animation should not be shown.</p> <div class="refsect3"> <h4>Parameters</h4> <div class="informaltable"><table class="informaltable">  <tbody> <tr> <td class="parameter_name"><p>source</p></td> <td class="parameter_description"><p>the <a href="gtkdragsource.html#GtkDragSource-struct"><span class="type">GtkDragSource</span></a></p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>drag</p></td> <td class="parameter_description"><p>the <a href="https://developer-old.gnome.org/gtk4/html/gdk4-Drag-and-Drop.html#GdkDrag-struct"><span class="type">GdkDrag</span></a> object</p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>reason</p></td> <td class="parameter_description"><p>information on why the drag failed</p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>user_data</p></td> <td class="parameter_description"><p>user data set when the signal handler was connected.</p></td> <td class="parameter_annotations"> </td> </tr> </tbody> </table></div> </div> <div class="refsect3"> <h4>Returns</h4> <p> <code class="literal">TRUE</code> if the failed drag operation has been already handled</p> </div> <p>Flags: Run Last</p> </div>  <div class="refsect2"> <h3 id="GtkDragSource-drag-end">The <code class="literal">“drag-end”</code> signal</h3> <pre class="programlisting"><span class="returnvalue">void</span>
user_function (<a href="gtkdragsource.html#GtkDragSource-struct"><span class="type">GtkDragSource</span></a> *source,
               <a href="https://developer-old.gnome.org/gtk4/html/gdk4-Drag-and-Drop.html#GdkDrag-struct"><span class="type">GdkDrag</span></a>       *drag,
               <span class="type">gboolean</span>       delete_data,
               <span class="type">gpointer</span>       user_data)</pre> <p>The ::drag-end signal is emitted on the drag source when a drag is finished. A typical reason to connect to this signal is to undo things done in <a href="gtkdragsource.html#GtkDragSource-prepare"><span class="type">“prepare”</span></a> or <a href="gtkdragsource.html#GtkDragSource-drag-begin"><span class="type">“drag-begin”</span></a>.</p> <div class="refsect3"> <h4>Parameters</h4> <div class="informaltable"><table class="informaltable">  <tbody> <tr> <td class="parameter_name"><p>source</p></td> <td class="parameter_description"><p>the <a href="gtkdragsource.html#GtkDragSource-struct"><span class="type">GtkDragSource</span></a></p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>drag</p></td> <td class="parameter_description"><p>the <a href="https://developer-old.gnome.org/gtk4/html/gdk4-Drag-and-Drop.html#GdkDrag-struct"><span class="type">GdkDrag</span></a> object</p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>delete_data</p></td> <td class="parameter_description"><p><code class="literal">TRUE</code> if the drag was performing <a href="https://developer-old.gnome.org/gtk4/html/gdk4-Drag-and-Drop.html#GDK-ACTION-MOVE:CAPS"><code class="literal">GDK_ACTION_MOVE</code></a>, and the data should be deleted</p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>user_data</p></td> <td class="parameter_description"><p>user data set when the signal handler was connected.</p></td> <td class="parameter_annotations"> </td> </tr> </tbody> </table></div> </div> <p>Flags: Run Last</p> </div>  <div class="refsect2"> <h3 id="GtkDragSource-prepare">The <code class="literal">“prepare”</code> signal</h3> <pre class="programlisting"><a href="https://developer-old.gnome.org/gtk4/html/GdkContentProvider.html#GdkContentProvider-struct"><span class="returnvalue">GdkContentProvider</span></a>*
user_function (<a href="gtkdragsource.html#GtkDragSource-struct"><span class="type">GtkDragSource</span></a> *source,
               <span class="type">double</span>         x,
               <span class="type">double</span>         y,
               <span class="type">gpointer</span>       user_data)</pre> <p>The ::prepare signal is emitted when a drag is about to be initiated. It returns the * <a href="https://developer-old.gnome.org/gtk4/html/GdkContentProvider.html#GdkContentProvider-struct"><span class="type">GdkContentProvider</span></a> to use for the drag that is about to start. The default handler for this signal returns the value of the <a href="gtkdragsource.html#GtkDragSource--content"><span class="type">“content”</span></a> property, so if you set up that property ahead of time, you don't need to connect to this signal.</p> <div class="refsect3"> <h4>Parameters</h4> <div class="informaltable"><table class="informaltable">  <tbody> <tr> <td class="parameter_name"><p>source</p></td> <td class="parameter_description"><p>the <a href="gtkdragsource.html#GtkDragSource-struct"><span class="type">GtkDragSource</span></a></p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>x</p></td> <td class="parameter_description"><p>the X coordinate of the drag starting point</p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>y</p></td> <td class="parameter_description"><p>the Y coordinate fo the drag starting point</p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>user_data</p></td> <td class="parameter_description"><p>user data set when the signal handler was connected.</p></td> <td class="parameter_annotations"> </td> </tr> </tbody> </table></div> </div> <div class="refsect3"> <h4>Returns</h4> <p>a <a href="https://developer-old.gnome.org/gtk4/html/GdkContentProvider.html#GdkContentProvider-struct"><span class="type">GdkContentProvider</span></a>, or <code class="literal">NULL</code>. </p> <p><span class="annotation">[<acronym title="Free data after the code is done."><span class="acronym">transfer full</span></acronym>][<acronym title="NULL may be passed as the value in, out, in-out; or as a return value."><span class="acronym">nullable</span></acronym>]</span></p> </div> <p>Flags: Run Last</p> </div> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2020 The GNOME Project<br>Licensed under the GNU Lesser General Public License version 2.1 or later.<br>
    <a href="https://developer-old.gnome.org/gtk4/4.0/GtkDragSource.html" class="_attribution-link">https://developer-old.gnome.org/gtk4/4.0/GtkDragSource.html</a>
  </p>
</div>
