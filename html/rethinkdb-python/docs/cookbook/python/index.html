<h1 class="title">Cookbook for Python</h1>  <div class="alg-content">
<blockquote class="infobox ">
<p><strong>Don’t see the recipe you’re looking for?</strong> Request or add a recipe by <a href="https://github.com/rethinkdb/docs/issues">opening an issue</a> on GitHub.</p> </blockquote> <div class="toc">  <ul id="markdown-toc"> <li><a href="#basic-commands" id="markdown-toc-basic-commands">Basic commands</a></li> <li><a href="#filtering" id="markdown-toc-filtering">Filtering</a></li> <li><a href="#manipulating-documents" id="markdown-toc-manipulating-documents">Manipulating documents</a></li> <li><a href="#pagination" id="markdown-toc-pagination">Pagination</a></li> <li><a href="#transformations" id="markdown-toc-transformations">Transformations</a></li> <li><a href="#miscellaneous" id="markdown-toc-miscellaneous">Miscellaneous</a></li> </ul> </div> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQQAAAESCAMAAAAsWVu+AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAK+UExURUdwTMTgm8Tfm9Tk7dPj7cXgnMTgncPem8TgnMTfm8TemsPfmsPfmtPk7sPfm9Tk79Tk7sXgncTem9Pk7dTj7cPgm8PemsTgm8nmnsrnn8XgncTfnNTk7szqoMfjndLnsdTk7sbincjjnX2BdoGMcWZqYNTk7sfjnXp8e8fjncXhm3F4Z9Tl78rnn9Tk7q3CjcvooIGFeXZ+apCagGpvYm1zZdbpupGge8XgnXuEbae7imRkX3J0a1laWKK1hrHIkLnSlNPptNTl7pqrgJalf4yZeMrnob7Yl1ZVVNbrt9jp9J6wg1lYVmFiY1JSU1JSUtzt9rbOktzt+G1ub7TMkYKGiFRTU9PptcTfm9fo8rvUlVRUVFZVVMHbmYaSdFRUVNXl7sacbdPj7YqXdmdoaJSjfFVWVcbU3HN2eLfOk1ZVVKa5iHt+gdvs9lFRUYiNfYuOkc3krcnjonB2aFRUVHd7caq+i5WbjpCXnKeyuL/Yl83kqtjl69Xk7tXqudzn53uEbbrGzoiUdk1MTsnio2VaT05NT9bl7uL0/mVnYK/CkVVVVNnvudfl68jX25ujqMrmnqWwqdjc2uPs7Z6vhI1qQZOjfd7ywdvs97K9xMvkp8zb5Nzs9tntvJmlimBfWa+wrcTS2tzs95hyTb7Xl5d5SrXCyaextoCBdLrKosbYrJeTccvoodTJuOPXxmdmX5+ti4yUiK+4vayCVoyTlnxxYLjFzbXGnMDZmbzHr5WTiJmip3N2aHlsVKOTX46YgIqAXbaNYX6CgnxrWMLO1Jiem////8Tfm8PemlVVVezfyv/68E5NUFBPUlhZWNXl71NTVFxdWlJRU0xMTO30+F9hXExKT8vnnklGTGJlXkZERf/++e7hzPj8/vPm0PT4++rs7b2/vpual8vMy6mmo/fq1OPk5P715L22qf3w2zTMxlIAAADGdFJOUwD49Pv+nJ32nv338vn4+vP2n+/6/fDt6vjzmObu+fX76vrx/vz+3+wG/vT95e3Y+ZP+/Pz9/tn8lfz7Dhkk+vvz8dD4/P2Y9Eb78fs1/s+j9fzq/vH6kMjbtPveVvf9aKibxPb+9H34/KK18vz9wv78wKnn9v6vMvj3/fg5l9Em3vfP5fr+9YTw8e3q+12A+N5N/g++/cD7v/i06s7h/PL+4uDU6/5x6Hn8+lSI/v7g5ai4vd6X49RyWPncufj75/2r2dm9rH1ddvEAACAASURBVHja7JvrTxvZGcbJVhQFpTFS2+0WORIp3ZW1m6Swn6JitlKqVpblMV5bRtqairKdGsMacIUTiJQqEGoaFikk3jTaiJUw+IORwKZASAlJVCVsnYyZGWZ8cGQGe3w3zn/RM7a5+IJxPvlCX76NLOH58by35xwqKv4fRRff3Lx548aNm98ITiqAJlGrdGSURhUoPTrS0tZ0AhEI2kcAGgxFfXa7fSsaUJIjrcKTxkAidWpDHIC98AfJkfaTxUANtEZ7WkS1oPsE5YSghQzYs4SJkDafGAgtqNGeNUKY9KQUhlY0aj8iQmTvyciINtJotx9NoeUkMBCOBOw5IkSdhB7RqrTnjMCoqOwZNE8ZcyHY2bGbRtuSmhEKB+4szs7OSsptqp7V5WSwsbGxEwSJ4fEf333/H8SFIiQpbS2r1imQhnIwgAQghY019/iz2bb/PlIgfTGbw2YN11NEdxktFxKFLyeERATdOEbR9TEby3ocHg/LWq8CarytbObloD0PCDthHATZtxGPx5EI1hPEKb2kTCD0BvKBsLETQolGKxth9yh4IpBCd5l4COPGvCBs7PiDmPtq2Grbp8A2Aro8pCBx+Y9rDvsYoqarLkTRt4eBtZJlMkeJkC17vhQ2dlnYGayOvWD73IvlsTcgvtzzYvzl9yB4uDiAEGP+JSwPCLmVkCKFXTaFgseKrz0pi3Sg/fbjpZAdgsNGlwcEidNot+ebELAmpFJA1gbKokXm3qNTpfCWdThSIKAlrwRBswRO/y3c/uT351UVOAgchkNKuFfiidDrdKpEsEdCAAHdsRB2s0J4WdpL1CyGra+T48KK3rDdbsxVHveVsJuAsB8eG71S0gzanWMvOl6YsfYKiT5g9zsDeUHwpEBgrWCplN2VZv1CR0fHi2VDN8cj7Ed0eVTG3YgjFUKYmC1lIbS4OjgIZkMvpwqAkApv/H19vuwQdg/q4iEIfaOl7C81jy4nIcSXYYnKSSaKQkDhPzIddiOetJKASEu6IsSF0LFsNiQOFZpVeMJk2yK1R5eEdCHE8JKuiy3rCQj/xNTJ6RmYkqePTOioKSFNCA62ES9pO0FqjkMwP6f2XkOarIxbtOYIBulC8FjJ3pKeFUfMyWxQ7bU4dbIyQikEsjWGTCFE1kBJH8oI9fG6aN7PBlgbqeQi5XfR0Wx7dLoQIrESdxib9S8SvUHVdCAOODjavUaTFgMaX+butMseMlM4BlbXSGmfv0jiEJafH7YIWxT+UBAFAEEJRunL8FMOhkWPI+Zg2TBZfH678J0cTxEdrwgpem6nSAYJBqJebwhltP5DOoivTm8jbDIfIuFt1tqIjxdfQRBh73IaxI0Jy2Zs6rCeJRRhStbGKMogodSCELHFGoOepMe8vUa6i/EajxpTvYPluTIFC0KanptHTQcX1zQMUBr3KOzseGKNLsCgnNfuifQBzE0tFtcKLYoX+BbsoNAf3yHXFzrMhjQ9q9FDjqtPBxhKGYLvv7MRjSlpHLi3w5CBBxZEigLIUpGZzC2YKAFhPO8vNkCvLxv0qfkjUKXukQHUzQBFMBauJwGgqO2gjeXMFNahwIHmT8VmtEsxqYCDMJK/FOaohSkqbewXgTRHwRe7SgKGYSABQBDBhL0YsdUDMPi3YmMgHKecsDO06mepvKWwQmDO9bQPt6Z7S1wihAKxgM1qDStwqs/qYVlbDAWEpYi8VVGvWhAf/sbG4Mijxu68xPOUQtMChWU0+V5tlr1ph6sJEQ/r6AMAU9TXIzjuWioia7UdcxLqCgHM7/4l52xFO7H0vTNPKYgwjGpNF9Ro+AifPRK3VhsBReC4ExufK6a2oHY+WyBmbwqfIOgXj8ab2vClb18CdZ6lFNOnd3kJETqaAUehD8dwAmsprulAhC+uOhdWV+/0I5e+RNRt4OnMNJmXFITjGJax+rSnHkkeTEmefQOFUs5Kisxgb37zYP6B+9b8nZfYtPzpaDcYnJHr8pJCO4ZljpdpdxnTGUAIIGhcVEnvCSqaUg1mYQHBCFRD85f78Wvzj8Bj+SRCAKVcPE2r8vhG3RiW+bGWcFYnJXJgLAPUxRBO5aMFlWrlXlOFQNIGU6OprVuvKmCKPBu73NClH5u/774uFk8AXMPnyQfB8XvUABRCa8bT3qDdZwyYwqaAcesAwtsD96ARB4hF6QQMgSicyMvFBZzQ93arCEKlby0chEWsq7bhvnvoAQehDgUKPh9KQXrsYQgcEjBRpq4UOhq2QZomcVIZ8ibyYfewgwIUk7ctbnLw8eQFCwKciqePKNigPrm/OlQ4k0147c21htqGoTdTYELGk024kcm4FI5bJoUqgyEzG4R6J6MLRf2+LX9nEGPQWPwOJ7t/US1GMhr+7Qmg6ZTL6+rkk4+nZ6Y1BP7hV3fv/nVIVbBTKGEX8aChtrZ2DAc6Ma+mDqWmxTwoheP+LHPEOraSZXQA8euMXp/P641O0MxV486+qcja1oBzUCzWMboaMZ/Pr4MYZiykm/zz+xff/9ndX44VbIoWrLqGIISGaxRXDWpkFsYi5/NmdMeZn90GMzWX8bQVaDgvwbvFhc/rD5PAlDQVPWzM5dZ23uZrmAlZDS9OQT6tdYNPv7748XtVP734l6kCQugfu1xZWdtw6w0JNfAjPgKLApTCMf+iMaA3P19oyjI6xG3WBIQ4hkGmL24lsY41t+Jhz+1OBFyXiWWdD+EvmbHQzIefXfzFe1Vnzp79+W/1BYRwi+yqrYTRzwzKeTyZxf1QzOPNKHMfD65MLRsys0ENk8EXMIW2fFv7GIYphSPiiVhREPxJT89DjB7ukfEnkAm5fFLpxn5Xde696jOnT59+/cGv9YXrkav38WsNkMHvuyh6Er5+HaqFtUH+2JmrYzWpzGZsLvMp7fdq4NqsiO5T2PIayW3b2zBBP9zc7JkAik6ZbBihrsvl12nm08/Pna+uqj77Gsb5X5GFO5p+0oXf5yBUNjyAUoB5agHD4hreBe1IDnXOkcvPM+tYO9DZTRpTIIwpvVsHFDoVCiWj6dzc/IGOUdb0yLjmcBvKYPuzv39wqrqq6szrOITfkP8uWD4M1NK34hAq4eD4eObCR5fGlDKYDxb8qIFJ0CzpXl82PMt4LgUBe3x1iOr8++kAfyYYt+7HmzKelhnc7OFpwYQYygCHmXCq6hSM069fvXp9+vwf6K8LdoWteb6/P14TKuHgqLny0ZXvLESnuIZ/Cc0+MAnapaPAbTYbMrJBRJHJMyevPwnBF1AqdRpAXhfXyDpRWBJ7hhFkmJPBJ5+f+7i6+tSZU2c4BpDCqz+6viqYxdC0eouurPwhR2H+AfP02ytfXkGhFPgzT7MOTMJehckYWDMYnBkZ3I0rkjvDflkMgP8Rc/Y/TeR5HLeTtGXa2SLkYFtEIgY8DnzgvPV8QD2jZyWslUlrvcOHW1IrLVq47rFCewmGQuTKmWyzxBgqZPFwE0zc5FYWHy5usjmPEyY3Mzvt2A02aRAl/h33+XxnWgqWn2eCQOIvzKvvz/vz8H2QoEL2PpmqdEZEESwxLLkro2GH+KnVakQCDAOGME8eJnVNu1lT322h024wAIeKb3u+mBvzTEwnfS2VOz2JAmuEdd0BXFX63z1pZP3ZttNqoZQH4dXo6HJiMTDuLHaGwRKjHwXFcHSHm685tVUHACzwQF5QIdCvTzzUrnAGZwQI8FQc6Bx+0XbcsxukULlzbFb+cIHsMwcZIWbep94Fh9f+9zlO3aDxMi81+FJyCAqjllA6UBwFhxx3PnGkDtm2mywKARo9UYVQe0U7CHXPxMFGQ5HBUIQBIc+MHZ8IgyvsbJspkCXPKK1yZpkfzQTXrKQ2XUhmByqrDCJJIcwCBHc61BKNO0LOHUGhptwGWZFGBoQATSsQ5j/5UcO9vQ8beuwEAhjDtz0jbcd3V7rc7I629p6h9TXhkWHlw84EpfdLS6H81aqLnBxcFw2ZuJyIA4NxF1giG3PEUQbXdtUbTQzWR8hgfoExqRB+te+yhhC+GpjUG4rwwQzBPx/b4YwLEYAw84E1NivbuDNvUl7w/6W3eYfAW7nsikOuaA6nvT62ko0kxEi02O0fn5rla7bsMuqAgYXkRZCBiTItZCEMargO0Xc72WkHBCUohcZBaW5iW4srMOVp73d0bwDhXjoAgb/0Mng1m0abbiWzB4BUS4DywA8G6wzzYIk+l3vqiVcEGRBHZBQ7XKB1UCupSrA2/KDhmLGvk++1K1KAJFExGRjb2RLnIxPt/Y/WW2Mzel9m6Y03/TYDDF5mAq2rTfSaaFh6FUq7i6ErJ5YYF0NTIX7vNzaoDCyQF+HFlVCAUkGXhXBQ02P1z8Q7AKGkBKRgMDT2yjMTlT+5Ak5P+0yyY70nxBBCUOaXM6+waX7lb61blxsyCoMgeKFiiWAHsvsfLvnKrnogQNICQxzRZAQcOp0aDtsParp/618jA6gEhYK+ccDh2cEqUuhZN+2puyCujL4LyEkHWIK6+t6NajlyS87uVkMIS12BdIwtdvrAEqMAwhGSXp+16XSQFGjIC1gp0xb0R4CQ9QRbjbYQBkb0hpwU7OCNE5Ws3+9sa//v+tlKqyRzSR7KIkUIqIWA3H2u9YLAZU++oFn85Id8UOyMQ5UIdiD7HT/XmG0MEgAEDDoCrTMRBpasEhZslzXd13r4DtepQFACYlCYQynEJ9r6E63rFxskieOEFPTK2bl6ZkWU5UXx3SqDzC9cXITF2bVrPBpPJKcD3AlbNRLAhwEd0DqFAAAxMQoEeuv+IS23ujf1Cr12zA7EGg36A5OB45Vdfv9UW/uj4bVpq4OblDgpuUxsMXeF0L3gSm67HjJwpHxsS7E77d7mjCUF0VELoaAisEBdsEAbIRSwWrJANKjhsAAQtFyqr3vG3VHTA4HQeHtxeqorglKYWdtQ150Z+f4/HI/jgg228y9BqZyA8oD1udIh5za3LEl8jdlqyTGA3xiKMimNA0AwZiFYT2i7170PnFGfS5JYNzo8xV1+1862/n92r22S7n9//6aQ8C1tdBR0KePj/MUsG0/w4SikBE4Q80IBCwTaQpkpkikBg85IGdVwsB4VNN3M10ec0YCVM4HQ2CnPEimMgTXm/2UXRdzMPTns3fCUTyYiBDZjUkxFouEEz/G1e2w6JmsH6IgWI7w4NtEkNxjNlNJB0dZDyWZtnVHUIwU9QYBSGOSfsF0B1+62L9dsQXjA/fv+Tenh48UN75CJy8EW9qNg2uVzhoSkxB88ZdWpOiBtM9aImBuJFHQgBLNxFYK2l0k8SvbaCQYDYaE/YEj5t3VF5PDY337I9+yH0s2bwuO6pjPyBmedwjLURj5/2t2CdiBwV6qqGTU1YrdIM0aSGREBTtZMVFm5WWmm6erfidqenX/G3UZTIADIt8bvFqdBCt7j7Y/yS4W6x5Jw9TD2EIVvCojJMRwmp0PEDvjXh2yqDJTRAWYFEgg6VIHOZKQoc3nZvArhWKJDUwhfTQ4SCOiLhMWBu9fFcZDCdNuXt9YMmPqaSePYKhe4PSTzFlvmcFIIQ3XAS/zeY8Ag64nYKuBcldghIYAMKPMWMw4YEcL5hLZ3cjUN9ORaKCVF2J8KbpSCp/8RXyBzHbklfnDNWibIx6MtsTRYYiwJz+XtVUwWAdbJDJEBdg46aJvAGhAC9TG1MK90lJdqNd7z/zhFpiqrFCo+/40cj6IUZgruZuuQV9YnR7cUiW4mlgh2wKeu2fBTp9XpCWSFbJVowW4acyMKwVxuVFoHsMx9Gp+AeSB15kuhyKAv2fLaW8y6HZ7+kUKz98ND2SMu2UoxAH1CZQAscdwPDBqOWZlsZiQMaNqkFMoW4glGs9mI/6hyKguhuuGCtkdEH4IzFuVDMFTc/ftiLOrjn7fNFlyhPrf2roA3rgSOTsASIw4ZQqG+atUNVAZqLAABHeZGCsLBbKLKTVkI1oNDTZo7I747+VJcwXDj10lf1J3wzHGFDOv0mnh473WMR3F5JRrmeDUUVhEAA4vJpFaJxBMVCBgSZUwOwp80PiPa1DNgV01BFYS+4vMt4nUWpeAv+Md15x13G3V4fVFcXomG+CSEAmYFi+KH88iAgdxo0llIJJiwaTIZjYozmsssWQhbT2p8NLBucIQ0DzkKIIWSG98trrBusW2m4Ja+jtX84BNdldG45PW1BGQhefmXVUqPSPIiMiCvjEIgMkAGUCZRJDuYS3MQrCd4je8feyB26g2rQiDTxru/vZ4YBSm0pwpZ42n1HGjm5TvJXxwN8wGcrSuhoC4u4buhDEwMRoAF3QB+UWRAYZ1ghuywCuGooPF1S6elXrWRNCjGgHXjH7ZIf2aDYntBa2wacisMInxgczQsu6ORlIxZQUdyAAkFeDWawc8dSwSlRMK4oOoBAqmVqNJSXS477OG0LRk3Hf7iTqO+SJmsqIowVPzlxtfy8rjwfE4oZI1XlSW5ZdndwsbSwWhYkqWT9VU6dYlRdQPy7oQCvD28PErh0ikIB1SD2VyaM8aF6rPiOW0hbDoz0KgOWxUtYPUMFPa5poLSnKuQNZ6T35GTsG6WDaVDbEj+OXVtq47JBgJGAk3GyRgFkA+MVYeO1WMPaf39fpuJMEAlqBDg+Sal9THR1oYKBYIyaDSoWngqxDzJ2eeFrPEz7B9W0kGWDaZjxQGZ33vKijXiqgwsysyAURsF28FPbSgFW8Nl+EmVlZaaqdJydagCzx9HtL5CoCOlVyEU5SAU6SvsP3KeWWGm0G7ni4JrCcKAbXGnQz5vmttfVY0ILLQ6L6OVSSpmBJIMKKr2aBUIoP68uB8hmMsBArTSdA5Cz5DGt4o0c712RQiKEtTqWX/3E7eHe/GiQPZqlkSokp2ggaQ3sVi7Z6s6TFURoAyQAaOrBiVAhVx/du+perAC29HFk1W2Kqrs41LIDmVmZl7Vwq6BYY1PRR0ZhsK5RDGFPC0U2Z8mp5/zLz482rDptCgBg0q/zEGRWPNXax6C+QWLogIsDc6fvKS0S2fP/p+563ttI7vCmQF5ohkjiEDSXIUZo4lU2RqmMqqEYymWVCSvsii1cdd1aBwpD47Nxi7ermOykL6U3bLQOC0UwnYJZUuglGYpLAshUFrYl5b1wIzQKGgi9a/pOffesZ1k+9CFVr0YIhSE5n5zfnznO+eODAVBSDv2eDFvxMESDDGqyExaOj4mXzkTPgwyu4nE+QL3hxBDAXu0B19l/u5tHtlvsLkvey/e/SFQA8DAa2spTpKZasqYAi4B0n9NFzETxLJxBQlCxh32fLdhRaNWtZ5VJP6pY23bmfSZ4d27Z0EIBSCcDx0Mn/3jxRtz/ZVfP39x+ztPbr+woWRc0wLVgFfF2HxnHbdptevWckgJIAjEwRLUvFPo1Kue18pa296NnCiHmcB2PLc3mPQjazcyoanTmMBMgbrG/CP7j1/0Xz80+pvfvWM/efIDxx70l+fmXsUg0BFQORD0ktdSOx0ICkoiASBo6V5d17UFv0y2RmldpCDQz83l7Uk/ofNm785bFzgKkBdweoc3pUK//NvOwH71Aj/49N3R8ydDx3aGZW4GPByEGVmiAzmAgl63S1o+3cGCMR4XRb1mV4moa9ujRnpkSpg9AxBSdW/SbOka68WdMQawDFpRzT/yN23bPlNAVH716U/6z5/3XNsp3NDCkVMz+Dowgwjrvgpq2y813SbNidEogGCmNWKsNYd9b2S2DBmo40kk6Ywn/eT/ysefnIAQtKJYYQmmAIZw9qDLBz/+0TvfBQwGg+WUPs0LxoAcTIcZXWBxkRRcG6xeZoWCojUzktQwe47relvxLAZK8QSEiQtsrxBnGhpDySQvqeY/dBCE09v0l2e3//pTe+B6VY23l3iWCwNJZl1G3mrUqv2+29VzYPVgCTGjNsznSr7r+sNGy8rGo6KkiCdGZBQm/tSp1WKShkJAgU5rhJKXk6wN8dYdu2+fOQpa+bL/5N1/9p3SGg5lniVIXFOn0yg0P9a8gbusIWcEd4gZSmZZy/v+ILNQJzklCkwBTCQYag1b6Y8mfWJyx7tD60jmDSEOAp/9dtEUeAExu/ri2bP+wO2mVIHJaFgrgDXTwQsh4AjgGKma57smMEZ4UxLjRs40daGznC53iIHVUyIRBS4pnICwNWnKCDT4Hhtd4kwB9n75MsUgyf2BqcGV3b7dc5xeQ0uBvZ+UCgLKJFQ1oMp6mIHQXnTKKortghKz6iXIjpJMVMKIQwxBEBU5HICwPfFnby05j+YDf2AgBKaQnL9HIyMNjZVdeNF3gSClJDy0wjeArWZUDXTcscx6LMJ06uXyMIJhYlrK5Ro9v0qoqgK+gdRRSVxEEKQgKBhtd9KUcfajD+df9QcIjUkGxh0PgwIWEEsr+GIw7qioFTJ3ZjIiymY5Nd8RuEugmBJJFQsqtQ1RKJv2gkrlNZlpzeAgCYyMUhAU9D134r9ysH93PhRYwnnepE/Sv8s8KBwuLW1Sk3AWLVGiBzYoCBHcF4YEfXl4IwWbloUIDQSptcGyRpUVstzW8b+QGMhMb0d/oOlB4KagP5g4ZTy3MQ6FaOV4IWg9IAAUhz+zoGDvMgwGTprg2JEcpnJyBF5SQZksj+yaLsOeU6lpBEFtjhoqmoa2kFFy+J4Ad555A+rt8SgiInMZRp+8wHbulh304qigMhXi1kAPSDnUH+jqu5lBVxMoN6Y6Is6lToMz6PlBwYM4KEjq2pqOyrpu+lUV/tUaEB+xDweGAPUDKq2s6xCT0DKEyDHnzRP/sahr7qP50KnojgPfJyDcc4e2y63A224N01AwHKMzQDhACBAD0TC9da+sT8uk0R9CHpCgUHDLqgQY+F2CnQcBOZMoGo16Dk0BtRb4IPgIledTrfGEVcbZ2WvuJ/OUI54M83FTmMLp9+89KLqO47jjrTpRTXOOyoiQFkQJLWEa7qy15zeVXlmX1LKTsdtElEjad8sa0Zv+ok5VZ9iyElWMulfTWXWtIAIQKSgIYTGz8j/b7exspXLlytLS0rWrV2/e2tnZWN3dX9ncPHJ+fgoCn1tJhlhsOLDf++3M02Z3odwiRlTrjunhLUAhImJfDW6xohglL1rv5QEEc9gpVXVFr/ds18xXzdGiQL1DplVUlGzZ9RxahCRxEAQGQq60WYGr++arruAVwzXjoq+Wriz955rkldX9/f0VWJuw4aPDw0P7teXexds+FUAQjHHhyaDH40sPZx7OqKqqC5Kotr37c/Syj8NIkWB7gEHe39LKvbqRq9vgMDVDIWmnXBg5o/42fIhiALuORbMtr6DT8QQkCTjKyEfdw2rBOdrchCvc39/dXV1d3aBrFe/Ryjdd8reIIH9yXt+1fXgEX4lfiN+1cvj7EM8PU2dQwC5E8v2S+fbMzAzV0GVRrfXW5ujRHTBhvruolR6sa9vjqKjv+eXqWImRvLOltbpmep3IHAPdgILBavh7ukT1Z4gHmE+nGQjHavrNS/x36/BoZedbVBqzS1fB/IMFr8GqKmcfbULTw4nQOsVCI80XyeuXiggCbbEJknB/WJ6jLXccxpKojgr31zRIYZGIpDlqpwskF8tAWsxZBjGQHuLS89tGLJ4rZmhAoImy04lgCmUgaN2PN26ih67urlB7oAYBN2hn59atW+yi8brRH/5bD2FBXWUqSJBTrBHFLCN5/b3MzMzbMylKBWVhrtTUaHo8DrOcL0lG2V8gLa9KFNL0zfE2sdLuuhGNKjGFbRcSY7Tormchfm5bIoNBUKtdmjrD/w/zzbx6YOmBmkAAAo2UyeufDQEDCgI21bR0l0QoCMcy5z5kwS9rjWEnp5C2O+jVra3RghWPQ7ks8qVYVcffsqyCXc8qCAEEA9UspgR2AgKW1pz8s7wrWD3wbmzo7AjT+eT75d7nFAQ2aqI2C+oxWwIbt1DIol0nxTQRRT1vO4X1wsjMgh2gwqzgnwJl5JbjFqwHwLmj9C0gEGU/raGLMUniZdud/MNKV3j1cP4Cm2ekgisF4fFTCsIv6AEeWUrVzNTXDAQkzDh6oReHRnmQNxTRqPf6nj0a1uF1HNtMMUAAMqNipZ1BMVtwHlhRfEuR1FYGGCWqLxEKwly+P/mnle5mUFHDGup8MKzAm5KPn9pPH3IQpiVRa47vn4LAppDGRWIWDTBzsue6vltatxQlnogBOYrG4/EEWATZcvrj7UGv8QfLMrI5Q2uZoyJtU8kchJo9+R/L2/DusBx5gc1pTAX+EDr4vPcZBYHO45Jqn+ZIPoyD6U+Wx4W83yAQ/nLF4l5jTzFiCrYbE4lYNnExEYV6kSywDOgOFxv5en29kfHtvIog8IOBqTVv8r8Nxkoo2pEMAJhiJ4gPvp/JQGSkGpFO2rbbz5+CgEsWMmah18qJhpG21y0CEIAzIAbZbH39IqYJiVRdLL8cx/f9vuf1/FGvTVjS5acj748nXkaeu3mSIy8E43wMiOQBKYwu/WxG1VOq1um6g0y//ZJHRhxNgz/dtN30v5g7v9e2sSyOrwWOG9sYRiBbirGCfwiNLYxrx8ZRdtZJsJ00ZJjBjCnBSzIPGS90AxumXfehfSmd6cKEeTDsdAf60L6ksPMDpvtUWLazfWsEkpAElq3/Zs+5unK6y77beioUAvr43HO+59eVUBL2VbdVJkeegyPAJuUd1dbqFzmOiYoVS7MsdTgsNCa4TDVRt3FFDhhEaHhI1Bf/zeGPIUaurFxPdfrzS0Q3jgu6LnXAiCtdz33y9KXRnM6rShjsGFHRtb6w35647XKMQc/HJjk2lbqUXMdyJ/sl4LRtWla7XC6jcVQq/X1ejBAIoUjUL9byyuLvNP/oL3i1SGAK14cBIXQN23Ed0zR0+83Ll0/cwvSdP5ByFWfIJFLdsNWaPYP0MYaBkWNZjkum5FNXc74DzSBEQ2LP1FWBY9NpppQTxVwJJQcKj3iEFlszbBHB8wAAIABJREFUhV8Wfk3hh189+jm8cuN6JywczGrclYf621/fvn3z5u3bly+fPtVcSKZ9S7hKoCYWd2xDn82cWl/g4P1ZiAjIIJWuO8a9cQ6UcjQKECCGMkyKxem1UITuf2B0CCB0//zREgiFn1eoZrxBlYI/3np3fKZPfiUPIHj6xJEkOqL/DoIk+ITMcNbongwruRyHURFsQc5BUJAvNEt/JQstrS9Gsz3NOy5BrgVAIiRxQumFjaoQhTBtO4tXS5++2CSJpJ9EUpmAFvHBswuIbBTBU8sZVsxBcd57gx95x6zvZwRBxGEMFuRgqrxzcSmnx23dMvs5BpIKHvInXeWjWESIk3H/RILPZLNFshnoQyieOYtXS7fNO35FgZyFuVTAtajXtqZrb4gZ6N6ZsGNWikETNhLNhhrSPk+LRfjIctN2pIsx+FPHw8BZb/KQLc26AlbmEyEe/SGf3Tpp1Ns8piN+qbXY15ZAKFj3b/rbgaSi5G8EIYfw5jO70PYM3TCMyclAkGMexMhgMCUr1rx9Hl8PITAcK7Oqaxgz72isQDhlOYgdTT6aac4OeaxF88fbQIDfUkBZOmYvCyIUkwcIN5f24oXCLay1hudFpaCsQA7EN4VdudLsNlsDXmS4XKM7DbrJoZ4iDQgDMqAVY2VZdc3Ds6H26mhiAQQmipYAUsLYFqOJOL8taY2tnuq4ppSvuyrWp2lTNyn9cSmEAl2IC89ra3Qr6p6yu74uCDwP2ibGllU1gHCV7SgDHld66OA6Vx7qkCrKcqN2JDkAoVQ6nrSE0r49OQZnmD2WdMuwTFf7Il/Na47Rgj/pF93f5ZRPlkMoEI/od13C4bl02nsk7e6uizF/Rp0tNxvFq/lsdjYLgc6fX2dYVt6xHedsnB4XvLRiWPaOKFbMbZGJqodiPJ7ItDGFsBxvVM1XPadhevtijN4gICy+O/+b33716Po4rJHxhBsrfod277G9e3DwkOQJkVhSbnnzedxVMscPEQ+1o28IjnSUTo+HdqpmaFZFzBQ8rLyEeGxYk0qiZdXBDKqKIVVHboFn6CU7maGx+IutP2mE34OwRiKF36vf+0778duDdey7RiNMUr6YDIoBBH/bMw5ZRBwgsHLD0NUxQGjbMryw3sz0nROBLH5g0x4hWJpSzcNj2vl8VdJbQsSHMD3Ul6Ci4KFOWLkRQPCra0hh776V/v5gnSg9bKpfTirF+TYfNt9xtQM8HIenwdJP5fTRuO2VwfSNGuQVlVyUzHAkAEJHt7TReR5fXxv5KHZyFEJlCT60TYSCf+cSjieskTk+f6jvjnURQIgCBFk6nAaWQLIg8JjwmhEwhAtN04fjo3T5tF7eMR3LVmaFXIRsviAFfstx1I0qHIbPnM/QHqojo0YhFHvmH5ZBKOyFqVRe29wkEOjoyl37FUAQyf4Ow6bLSnN6fRxA/nQhCEaj6BfPHE0/HadTEEHKQsfR3VkNkkgypoCJQqbjNjob59XqSJPImchXG24z40vG4yWoKNzSg6YsWgKBcMO/dSf8wYuN7w8OvsamWQSMXigU3rOEeKbpuqCEolhBAAiGAhCSk44QyYG2aDGlCEkUcIIlO5iYGwiBOAT6TCx6uLKNxQuF3+mP5xDCBAIZXkEIe/eqAOFhnIyixWJCR7m2hCi/ZUxURQyBX4SkydIgYUiVW1ZfZBiRFwQy0UEG/+OrvDrLP9/oVqsTc84gP7LqNDyoi/9c3ocYI0nB2R/cWgv6cuG1vUcKhYCjaAy/JQUh8gr1z6w5UELEZaIlwHkoM1Ijx3C0N4NDCGS6MbttTTodcAmeNqrOIVQVt0OYTrtL8AXNP93bnBcRfAgrAYR/ewcHB+s+hEgk2/OCGHkVEpqu3RMP4XUhfQaZADrA7p/M2gJpOmDlKYJ1aqSQ6c5UwsB6jwE8WoP8tWnnxeK//nDbW/tfCH4GFd57Za8DBAgBKA4jpQfS9hzCsecqWXI7SDrNlmuuBRQmeh1SqVgMlxwgopA1wdVEaLVubWyc5ymDOYeq7ZFGd3HrxeLV0ud4l/X/hXDzNVFLWXwfsPtEsdGiTuGKbxl6gQfByHDpVK5v1k3dsly7kuPAT6bIYfDtYDWR7WlSZyNvA4MqRslqNYBQ92Pk9mTx352/5dynC5J+ePDtgjjG19oPfowkGnl1qtIYeXWVOdH1Ux63wNl0slwwLy9qE7uG3RculU6ilo4GV+xk2m7t+cjUkME5xsmAglUgdlUcTH5afHgw/nZz7gsJBL9BDRS+tLcAwtegjRM4ZTTtzmNkFnTyCY9pRZKV+85QlnP7O7lcEs5COsVxETgQUboUUazphZFFGWxsBAxAL3WK9K7Wn5YgPDz+bwiBi1hZeyY99yGQQc3V6WGNWsK7B56jqwiB47hyzUunuVipFMN2bCqF3UgmSiEksg8mlmeZAQNiCgTCF2aF3tCp/H0ZwsN1Z3pzfh7ItIpyTi0Bs+bVYqVBXUKxZ1tGHW8MisUgWTiTWZzT41guCbEixcI/mEg82ARpuK41OqcM0EX6/lGr0VXZaeEfi4dwW1qjez/EKWxeQ7hbGAUQ4EdPvBvUiT9HCKZlmT0QRpHyhXEqJ1EZYB8a7AAogClEovGQf9NQdnBYMLzzc8qAHohq3WmJfmo+7f5r8RA+t+/M762de8YV0p7/pwQh8iFeGoZvCT8qjZEIQdNRFAh9U0mlsOsOtoCHIY0PoRCFtAH3BrOZTNetb8yfLvGNTo0tUQiHSwDhYzLx719bi3nk2lo4sIRXOK3ykGHIbSBMiK/5MZJYAmQLJSZTMaVLmcURTdBILPgDQHB0lE5hPSoUz24/wEMxzagzpTOngEfDs7ZlujRdrPzy1yWosOHEP/WFvlOgHmLvtfnjwe5DeL0QKa7zBRojiwMcgrcqQtvwdmQO/gsneBjQCIQBUODIoBp/cjJdza5WthINV722hfPzutsVY/ROwmLvmyX4hOLvH88hhH1LCG4d+tL84VsCAVd52JjQPAnUkmRoYArqrHGZY//D3NX1tJFe4cxEZGIbsGPW9gwwxp4dM/EXk/XauHY2tgE7bkDtLlu6QFQjBGW3W6RGkKa0ZJPdbiutGnWjoFYq2iZRG0VRk6u0N3vZS7BkW9jSzNiX7S/pOe87M9DeQzrGBl9w4cfn6znvOc/QBhwKCLGBJYLB0ojXJakpTsx25sViupsybmpN+dgWMt0cVJtM1DDQvXYjb75aOvfTL+wc2fe/hcIDAMHnc+F8ussnFVI0MB4aWR04k67LLrINjVybCGUE0BcAhEAyqZTqc9VUt2yUu7181FDrdTM0Pr0V6aZqYQfP5SvZeQNVrP8P7qL4UXrYXgsdNi2BFs5bv3v6+6kpyUWO3XG1LW4LQGS1Tj1dwLUejggIERBc3pEl9Afl+Yz8IBlva7qeM+ZVRxQKx0Kz/W4Z2ORK5kiXmTDPzET0brelGgdG6u+Xz11+wyzqR+1PL5jNVRsE6g6Lt29NAQjIiiAB+mI3MzRHQrkkVlWVE8hcHoutJ4ZO8kNmADvY0JobI8p6tzWXijjCdL1eLOvtO6m01uz25vhwOJ/WW6lspQ4EwliRH764t/rw4YsXL/be29m79t7lN5MezHUwmh76TFW24S35bQTB70UM4JWJFy0QHDEpGCMCISxniSj5kElAuZTr1jeVJWVTT4lzrV1Lkk7MHnX1Ris+sysyYbnblWu8YZSbxahRTk3vT8P1+PH0/vLy/vLqw529vTMOlld/88frVmMRV8GGTcEZAOF1BkAAGwCH8AEIfC5vUagDjoRLlqMYOKliSsCvKMpcS2stPFoKlOqyUCrXLBAcfDGbLZSCfLCfYbKyFueZQyOv5w0jn/7zxMT4+IR1TU+sre3f27t6pgbx/S+vW+IqfWaDjSKy/W0PQFCIAAZOqoorZSs9HPR76ZCqqaOE+xysEpAKG8lqVW1sPBoJKLmCFKN6ZNQcoqLIB2NBHJznxWy9FIYA2yhGo8XIXxMheAAMJhKAyPT+6lc7ZwjD+1+YIJAc2WeONmLJuKW9mpq668fIiEMIvJ0jDw76/VYbzWk5g6QuCIVWVZJ8kfgjKJwCih8o9bFOJe6W87FioaDWeF5tFARHNN07PIju9v416w6F3KFx85oA3wAkple/Pjun+DhNlRRoZCTnkZRLbG/1XqI/uEhgZDm+kLPdYdBHQHA6qSU4XT5WmMkJpfqMwOISgAIUgvQWnFSxdJeqC8xl6g29oZX5aksWIFiS8iv9l1k3XKOhRCIEVyKBRjGRmJh+/OJM08MxCMNEQoCAcGkx/QBAIPN5LrCEkznS4SLT/ORmBWTgG4hEuecKRlICq2xqCwowqRG/i5QRllAjgFBpdnqZdL27ImQiyXKnXgQQjPi/Z90DHrfHTW4lSEAYD4UAiLXlM6ujrtnpAQpnyxIQEsiRTzE9kCFFsATIkcfnkS4yw0YE5jgWV6ElMduuirIGMdT/nJAIAIGUz7Y/OPCEuiDG5uPdfOUo12k2exBqDfnWrMfjcQ8MoDmMEhjIM7F2dqaA6cFembZBgLd9W/+smCCwPpzgt3kk7gkTSTFyKhGrykVxJlfLajVxpl5SvBaR8vrIkgP4QTQM3oDHMXxaFlmh2o5vNhudXq/RmDGM7E9mPQMDHni6RwEGeHgQDzcAMb53eWfv6tmkhyuX7Eqhzzx/ISC8xkLht8QScFjf4pHkeJ7USDic6mRd6Ugp0u2l085gMfdcwclFUj37fSxVq3Vk58Ooat7v5Ms9zskK2c5mu/56e7fQbqrG3I9HB/AaAiDww7sJJPj36OiztX0wh72ds0gPpqyIObVjKmz0bX0bBxDuoiVAtQAgyHaOdBC1SYYI8bLSQl07ane6Kd7JKV7WFyAYjAS8GDqJ8oYmi4ODuDUcLLbUoEta6Gyk40tLjKE2ckZR+2SWoDBAAMDPPzQ0BG89JFqOT6w+Xn344r1TTw8nQED6ZBrG9lbmrgkCFEsAQsXmkYcOej7ndAaDEBMreqegpmWBwwFfv4UB/CPVq+Tl3iAzWAS7idW0rOBT/Nq6HFnachwc9CLAzH89i3YAP4iCB36fPz8wdB5ePDRnjCfGH+/vnfvD6aaHkyD0XbD0Zi4txrFQwDE9Ly4w8FavlSqJkC60WF1ZiMVcPa0mcCWW9eHAP+2sBGivEVV8+bmmKuZzQVyrTWUkn09JyzNHC4+gSGhnooe9X31g+wOGBgIAXmgQGBvGoX5KrK3e++z0YLhW/8X1E2ISF2wQthfvvCQ1oxdDPq5CZg6OLcHp7AczmNNa1ZhLKFR4LsbgFBc1hJGAnxgCEawcDM83syIYCiCUhNApsbFIbqGxkTwEpp01oulfUhDQHwgMQxSFt84P0UAxCjBMJ0ITq1+fAXsg483mjMKlS1uLk3IeQIhBavD5Ay42Nh+xeeQhDi0xakrXNwTWxbE1HOYAS8CTOciO3ueIGofTOkAkBwd7qYI+l/QBIV+AeipWba8wWkQx1KPebtRI/fAD/P4xHLhPGgIxBgIChgakF2ufnT57sPdD8c03i/efPCUdBfxSCQj2eSRuhEFMrGndyKZEqCRDWRSePYzgAaW8nvThCX1/JZLJ87zc0uoLCq4DKJGcEFQbZTGl5+eO6thRqPyAWAAWTP/tDgQEtA/Im1hCTSzf+/zU0sPtKyaPpPviNDAu3r//5MG7AEKMtlUgR4at80i6FscEy3JVcGGPkRIpFhegAAS/X9mYkVzOMMOvdLWjOpQRjUYccqffD/BATbXeKIpZXdPbKpaMM98LkcxoJcgh6g5v0bAwQLMlYJAAfrn8+amlh+ELx4IaNDJe3L4/Ofnk5TsAwl3gzSzpsvHWeeQB3YXiggJDNx45OuQrERD8Xq9XAgwG58M3WxlGPUqJxbq+Lnj9dGtYrbXSjFhp6Bnsrx0Y+dYnoyGweVoxut1WTDCDIzGF0RBlVsun5RDfbX96/aIt0kmk6ACEycnJG6/eHhubuksMHZsH/Ip8AgRbIoNyCPizuiABCD7Si3JxTDhVnm/OiOJKvcRGGpqa9EJ8lVS9st4ti/nm0Tpj0JPpo398mEDOAIx6FLHwWA5BywXbEsan107NH679nOqw2fvzpiU8uXHjzquxsbukY0DWYu2ZnUPHoNOSYyYkgiFIpQsS5VsAQQy+7HSho4Z5tbkpyo1mezMJ5FIptdudSI2vpDcFU7+42v7bPXfCJNLAGwgMaA5DljPQ0AiWsPbV5VNLD1SHzVIwJiB8A94w9qd3Xt4YG8MNQPyorqA9s0MWwsy+EtmTxMAIJDoj4agKpItw8SYTLrYi7ZtByAXrONurd9b9SUnyRxqdTYGLgcOY9zng0h+fW332Iemn4DORGCU10xBJmx4rLk5MTC/fO7308LMvr1ywBhjJqLMNwq08bguTlgHUx8GiNbNj7wbSyzSEZAGLgGAsFmT4uSzP9Ef0SC3GBTNxYaHellvd3saDkpTSswLDYc/OS/dI+NT7567u7K09AwymaWspFKL5wqQTJEWeLgbnPrr9nROy7qRuvrhFQHiKO6Jh3ODCLz12s3ecI/s5u7FECDX3H+au/qeN+4zvDoixzzGZ4d5K7og9X4ztOaSuHWOTGCe2ayWO0rlji3AaGoWyLmJRpmYpGy1ZJk2LQgMrqrSwKem0KWJKFGn9YfuhfwG2dD6wI9tn/po9z/d7xnTbrwEsAwIUKffheX/5PDbOnzYyspqJhcApJqMuRpkxY2A5ZXAIvFafmkpsm7rPO7XsZ5FdAvIR6xKQj0xvLXy7ujp94SmWlTBCPEn1AlEgqnATXMPKGwycP2yM76WY2aMOyTtkUdZhtViY3bnWMrUKDsKkhF9Yr+zm1FhEyTSbJjjFyQpYg1QzFgQByVTHZJ+ZCvuX5zIC6/Vaa5Qib7fuxH3RSZcnNlZvrD+9cOpk10KcAAjAGMB7aeVNZg+XK7fe3cup0fEO5x+/uEf2xumuvMMhhXKtbuSMjhF/RWKEYGrOa5PjtXS7kcw1E8piLaeAh9Q4PzgEPRPOmPHwsD8c5knUAWGVKAqCRStSqOxOb42OLixsTGPpfR3+9iAURDAu3FhaerjyZju32JXt6/AnWHStGCecv/gyNALuwWnpv0PyJbogQLwECbWLob1IecZMKupYxafHFSVSKUmxmIdRQ0baL/jTFV84XZvzizzmowADRB040EE5/stSsvLdWfe1tYWNjbXV6aWNh4DF+kPIGb56873rK3RL9Ei/tQMEokBBGImhj7QkwcZI8Vhgd6azjMvkyLlCQcia0cIYo9X1rARqUIDooKTKc835sCiKWsgvPieTC26BJYgKpAhJGTU8U8b/zOxMTIxOrC2cPXtubXVhPxAggfM4jvxbZEs0j7wKRuHik3uTF0c+YyiRHkjCnt2P8qakqhJOcCDLigMiwHp9EuIBPS6BGviUlJ5UIUmYDQ+L/tmoH6c3BDADSKThcjl4HGtx04MInnzj3wfflCWW8TsLYdQ9nDn/5G3qHixHoE7WipYoBFqL8Wg062FoB4q5rlWrMeSu1nMSo8aiUsmYlXmhreHTT31DMBCHOYaeE8XBeXGYZ8hmoIvXDsG4ClhGuhvY30EBi2sEhHfu7AHB4SmRlAcD/nK2ZtYMMythCskwUrJW0WcUtVRrzkgOCXRBiWh+0e8znuMUz5eQVblFwbF7T9RG5IIlm4Eub+ifowcPQscyWhkUySMpCCnqHqyOI4Q/GQQhEEi1m7HU9ZLWuM46GEmSPM7FMcMnMVLC9Mk2udBMKoXqsv/Lb2b9ZJIJfQHXrb073MMC7x7mKQiy79G5QyAKVx6c7rPmea08kqjDsycvtJGuj2RtUgjLjIFNnx5LBqSgkq1Oqur1wky8JHmkaBRy51QzouKG8Jws1GZJD4a8BIHdbcLgNVFIquE3NqoOUu4QzLXiJN8eo0BB+AuC8Phl+yWhFaFkgjbZR8qMCVNPtjbtrFyoT8lFzdRNrRiQEkbJw1xvR4MspAu+sH+u4HdTCMAv8J2bafCJYTgc+HO76MUgu5Q1DgMIH1Rune6A0AkUEISLI21IoT6j3IMAghTXMPc1IsZMq+xi5biRlxNmrphrhjxI2A7mIFGDdMEb01ABaCcKMGDp1TQCAVgEDnv9eGOXUDyWlez2YQCBEk9Za7L9/Z1AAWJGLYk+0mldbZFSjcXNzcViy6chL6Eciap5I6FIStbMKclmTmHkeL2ocoDOc2zJiqTOxDqcXTFw2VEOeJt9044nt5GnRU7UDwMIo9cevKIrsn2USIEGCmAZ770D7sEKFDjII43JQHnT0ypsFwP2YB7igeJ2QVGKIXAKJSPKMHKymZJZNr8sQJAkUimw7oVROWBYSJ1s9Dsk9LZvKoXK9uVDAML33mtQ1uYju5LQCRTefkwqCnQ7PJhvpALw3w+M6YWWXcmBE5isZ5SC0USugIQ+qajpyozs5v1eAgES9HbuB5bp/QMkoHF2zimyPCtxs9vm3dWVtbMH7iY/rH96usPgfYSyrBDL+OTrmFVRYHF0lw1qSDFT9pQqPgWCwpDqKVYiM81KQcFYoRlKpoOJiJcSTiHdEud0dk+qgjngwC3YrFOCuDrj9c9r5utf/O3kqfXppZWFgwXisv6nV2/RfqxFNUONwpNkG30k9hQQBJscQYqZsr3c1hbjejutgjuoNqOTigu5yBJms5bOp3keIyMB8iRb97YwaoKDEziH3WJssmMtaiqh7zz6xw8v0Tb00+mH3y4cHA4Tf3jwatwCgVbY+qllfFF7SUDAPReeZ+XZGKFmDETqDTOUVyFSipgJh4ScKY5gPtLOeIN+lAM31madexBAa8DxbOegJEaNXmHO2Kn868L7x44N9pB25MCJk+tLGwc21Xjl0XgXBNqYJpbxZQ185O8xWUTKYVbOYApVtrdyuh5TvRguZkyfgoYzqLLBIOfleTftwXE2Z9cWUOFHSn9LChwONTwfRU34+0C3+Uh6ce9PL0wcDA7vGbfGu0aBoIAgPBtpjJE8EiQB5/jUsVqJjPZmqvVGUmadDOhDpSjZWDmfyYPlJGsPPM79sbsjKnhxHv99xxjYnTjekvZVdz76zaUfDQ4MDA5ZvZaeHoRh68TT9Y2DmPv+WZVaRnry48hu4Pw4CnkkBgoWCJBCoT4ExraN7WoWmdulghnLy8H5tg/X4dAYCBAHuLsY2IkYcWznrihu13m9mcaO8euB20NDPQNEFBCHIXijNPQMHb30dHVj35cAPsCN4T7r9DoptvahezhDAwWSR/Ii6IO9nSHuoWhohQo6Ricj+cx2ItpERkZSK4EYGTDYhcDBIRcTpM1dMQiGl0Om/pOPb2/1DvX2kP7j0aHe3t6hIXgPEXEYHNy6dOPzfTaSl6t3x63nt5iM+z4hINz5gVVwtrlxySsQm2kRNnPNgLzRzEkeSKRn6qYem/KiJiAGgkjqBjinxJDFIEG0kbOiOLMDwYGcn93e+fGfAYJe8tBkQAOEobeX/MDSCvg4Ob3y2/0EYfQarkha19cpyw51D1+HaK0VrAKu+rQwhcKkJ1Ida022TR8DKqFOFpK8XyR7UPDEIkdvf9ATkXjcgiGnFMldGJuqpto7tT8O3u6lD707kDE4CNrwXz85Pv1w5av9U4ufoigcsXiG6J4sWMb7z8baNJmGvyDEenwLUyhMembMVEvKR8xQWoGESQ4L5BQiLsnyVh0K6bg4pOaz2UmJntB8BpVi4jXVBPLaM4tAjGJPBwWQjEHsOZy6eWNl30A49ytkJuzbRaEfjcL9+2detGmtFVAAfXBLydoizrlDypRtubzeuG5kOZlSMpJhcLo4T7i4cAhcxEpimU7w4eEHW7yCmnB7a2uLYjBELKL13INHO/MJg3Ro6Th23258vn+isF35lJLt0Fl/MAr34XW+QZNp0AcAQfQWIYWCBDAAOWPLzvnDY5qpzc7nWayj47iOjSacZEUOy6nEOpBTSQzjUZIaaEIvQkBQIM9PIcBPOJ6DzcdjR4mz6DlKmk83p/cPhbPXqn+99W4nTMCPT64CCM8+wn4kOYrqBtsfXGwUWqDfgeJ2omUXRD7MzVbM2HO/GykZCQQOshGFx0IFNzWQZLbH5VFKvtf6Lz+2INiiukA9Qm9HGBCDgRPHLWiO4VjCqTc3lfB/5hQq+t23rDCB9GG+f/Xq/avP7tGCM8R4HJaMA1GQAJzZbsQ89uFhNx+Up+YBAzcOs9g6Z7RxG0jgsW6CQ26IoEvxZI2dn/8OjIEFgYUBQkBwIGbhP+Rd7U9b5xW/5kItv1zure8FnHINdkaMGcakhJQAI3TW0BJY2sXSxiBNZNFlS5e0HSTtWmYwq0AWaU2TskxasmbrlKTqVinZPizdlC7VpAksXUOwZYPz1+w553mu7zVVpH3YwCZPoiRS+OKfz/v5nXOg+ehVJUHCKBI69iFiFWI7GDClMFjQryw/Q0AYHf34zecpCBYLcQ+NdZu9RAKIlWs7XHDaYDexw9XaAY7BRfe123UI6h21NrwzjT1rn6fz8OPcu8rrSnVREBQdBBQEBWwhaIMqwscXgc2I3N7wRGInHeXLKf3yBbYkayYBhKKPtMAQbN3mULcPhhc8LalxHxF4yBTgLwekmbQSabeS4LLOYmPHdYlztXhOn2GaoGPA7CJDQdHDA+CzKmAOyJ/EO6BNmEnuZLDQ/xIaR70hV3Md1OEyLTiTVBmOetVvjuROAwjunvRgmw4CsOCRnoGdKriNBy0GPKlaa7Fa5udHNlAT2MeHX9RBFhGgdhGIfAYqAhATvKHojgoCiRsvgXFkHYhnaqaIJMw25rDgDNUlYu0dbYO4UtHp7swf3cTtrC6kfzuq2EQQUYUqqCNAtxbOJ9p9nsH2xyfeXdd9wjpDAPVBKfoHxk/iMV7CyFEClk7o/8dTenLZWbuIprGmCMLHhUGaTBOjQD7+aZWnAAAKSklEQVSyb3yjzw3J0coIkYQGiAwcDiS3OShVx1UHOTSchqGHND3WIS39jmxAYGCgMNNI2avoGCRe/18eWGvEO8zs/DD1D1Pa3EF2AKbm2UkAoR3ySCcwuq2O+nrLyoEeN9yIW91sW7XDKATkjhAgIxO8gXZZ8EgQWAT3/NHc43PMLVavmyBgICiMwYvOUcC4mQkJpelEd2GgPPCzFK6qpLW262AZHz6PyTSC4Gqwb3a1uFlxZLW2zuWglD0IGWFpsctei8ky3VfONAEDRAaBAQL99FQceKS4y0UMqhUmCGNJbhfewKlHj94++Bw9FAf68MI9qLVa8II8yZWtxD242YG0ldo6nAKoQvoJSZ2oGDjtuG3LUuU5bWhCdYk5YB+dpUpMF3jFEBIe8gavP5yI7wYI3LFLmd+/dpCt6iT68ML9wi8xmYYcirgDcA8r7NKBDXKDOnrUgngOFxhEuoiRRNn7mkY2ti781AzB+jYEMEsguQJyu7djoHq9oV3CALb9a3fZxcCaqcnJ2cncZyxassOqCHQPTB1syL4BGLC2CrfT8IwkweCb+0h0xHxCCQTV9KNDUMAwkJGrZ4JAkSF2Bgx2sRMDxpFVHK9PTo4u9h2nFQUSAdQ3WqY3jlJ9WLWtwn5Sus6ehgZ2WD+CELzYks0QTaje7hR45G8DWZX9LaMuqILJYMogBmpoJ6Plr8dMb4BxpMcjp65Pzs4NkTySktSIUXC1dfd42KW/FafLRUcGaT3N7gA6n8W+r/7sGmpCNYuNDEWgbF066gJ4AASQOBomUYYgSfUnYru7aGTgfTSOGCs8OzX7sB1AwNm3KgICyR48GChAqYR6BuguElVwODCHbOo4fwA1gXykdSNfArcn87oUFAUCJ99McsDDlIcaSux6V+7YWhqNIx6RHL1f+DaCAIsSHA0Nmz0HYMIP3aQNiqrkN2DgwF0qVpJVdm1l3hGxfLZOcWBCQIyAIQiSQKUA6btKKQbhmSS3+48klBdh6RJoxCRaRjbe4mhsaOvLjfvY9UgbtQcWaLPXwUQsVlG3LvzqdVNQRCGgRSOZjfth6USgkbLAm34QxaAcIKDGEWvwAAJaxv1WuxP0oaHRN57r9NlYI8Ve30AcYy1JmSFoduzff7Tw+MSn6verSzGA0Ee3A5S6LtFZH0TCpAvEJIYSsUB5gND/RgY3vdfUHJmcvXiIuAcHDEI6SZZcZSuMuHVJsNc7gJqIPTpHawdqwo0IX4qBjF88iL0uBpL+hwQ6YsbAG05wZfMGTqU30Cw8d3324VsAAugDcPRbnbmhTaeTHlPFNRFWKDM7XK2NZ1NEEyLD2zUBEiOcfsWZN5yLBlgE6WtyoPrHEsvlAwL3vQ0SM6GXnL1XaIYFZMBpJ9/5figv1pq2Q1hh+46rtfVyN2jCsLwdAzq0wAbeBKoFokSnogXZ8I2KpE4kklxZvVdS+TkUhdH7a3/CBWQwEwtTQPnu1Vq4O49tNStNG67casmmiSaIJkvPzAGaACYN1BtIdPaN9RmKGPijuxYmP9lFZOjtg9HJtc7jzRZYxkyCwabvFrSNcZ/daoeL89hrJRD86B7UjiLw7ZZgQKf6cBicjv1RMZCoaEiyCSxxd0PEJ6XVD7RL0IoYHV1sOd7sgyqJ0+k73aUVUn1tdgu7l0fyhitXLkOeoA7DJ5PNUsDT8BitAVMJNtslwj9K5CBcfmKArYi7+cWag8RHzuUPNXvgdo3TN92V//L2Qs8mdliJYBCfcOV+b1b7+Y2IKm3/cmXWSoJ0SXeKFARcGyGbBEYcu7PMleUbWNyaO3JkavRhXusd97h9Ps90l/bl7WsLyFyCarK1ruPWqynQhGH6Pcu6pVMYAMVBVxoYMQ8pAEXHVEpTx37Blev780b+vc+PTN3TUvm1M30nB3ty6a9uX7uWhuNYEDrbOxrO5qgmgKaDpeNpXYAXWL3AIOJQFBgSZrfA85HEAFe+7y+Z9NufH7ycaf+qkEmnMloOMFjQCtOw3d/StP9891aaaALdiiIbA74yS5X05ioLkwQWG0C30eRDw3f6yxgDrv83+UuvffHrtbV/0jNpcCVtIZ3bONlmtzft62zfyoMmwIeTeblkypkaBNlUQROodwBvwZukQBgeK2sIwDg+yN+9+sWB9MJtfHAeK3/4ZOGom2SLvdrWud+qw7AfSJDZDhBDFPC7L6JAckZJtwYlGEiR6ABX7q//Je3B31s0RAEgWEi3TG92DW2+SOzhjz9VI5gVgOkz8y0Y14BCgJUD3UeK0F8xCuvy8O+uBrjyfwPva+/1ZrofaQsEAO3R4T6Pz3Om6zu5rbUPSYAoUntYIgWAAUsQwRbIdCMGixv5kjgisvQtriLeK6lMJjP42c2Wrvbens4mt6XWM6Sls+c+iRh7kWR5my4wb8C2pRBEYJWUaK4dKLwyHF4KcBXyXk6ltJsfHPc0ud3uJpyC7NWyP/BH2DQzjQ+YBChFFIqhkcRm30VzFQ28gr9SxACN46mU9g02IAnN99ZbueyFoIoY0KFuQSgxBzLbFyQVt2eJsCLDMAbIWQze4SrpHUtlNkgiCcwb6Dq3vpo9ceOPXlyUxnCgqk/9oiALptgId0CQHxR4c3rJK96ZWKCiQOB+ktbe/KB5fmXFVmtv7Tifyf4houK6OPZbMIdJzAiwTWLQRqHE3WomCNiBUhNcpb3+f2XTN483t62s+OY9I6mtQx95cSUOCIOqiqLJOehGkW0HUoNBFSAqqgGydMTQTLziQAgkL2bTb/VNz8/bBnuz2X98BGvRVERBDaoq5dwVSZnMJ6Ap8AdFoKoi8YJBIIs7zdf9X9nGpbl8Pp3rPlzQoK+yzvimuEQSNigam5FobEAx8AYJBJKslFQYpOBEIsZV4gvEkv9eTGez2tq5Dxknl5Et/V4WNTPSjVyEQPUG0VjoPoFRE8PRZICrzBeIx+NX7/z1b594I4a7l2HJbtBwkIqeNFNKpigpphAZciUx6B9binOV/eJL0TD56g0B5wXVK0qGcyhKAVEUkS8puiqy5PVPzMSWuUp/gdhSdIJYAdFURZON1IH1mGlkwBuRgQINGDUYmojGub3wAvFkNERgEEz0o2pzqghCAF7TlDAD80QN+sPR2N7AgCrFWDgoSsUaIbTezYoAsYM5QFQgYAiGoksxbi89sA1EGuQiCBQGxED1ByFEVMzdNS+BIBnn9tgDpSAwSNT2MU6Ogr0mbzhoJmGBJhCDmFzm9uKLJxNjfpH2GUzEdWIZt/Xk1WB4pmJDg/9GHGbComySfEDBMIcUAtE7EVvm9vILxBITomzmmpjYBkhK9YYTMW7Pv+Vk1GvqpJhcArDUvWNPAQRUHGaCAssUFWoTkasMcyszy9zT8gLxRBjqyBgzEWMg03MNwbEk9zQ9Ek9P+GUZugq8zJLs0FKAe9pePBb1C+v/GdD/4Cs7ZHQS6hlGIgDWFbWRTk5qOjqgOkGDYcSCye1OtQm1NTUMIxpo1E+erMEwCkbBKBgFo2AUDAAAAEsZAaO/6TEUAAAAAElFTkSuQmCC" class="api_command_illustration"></p> <h2 id="basic-commands">Basic commands</h2> <h3 id="creating-a-database">Creating a database</h3> <p>You can use the <code class="language-plaintext highlighter-rouge">db_create</code> method as follows:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.db_create("blog").run()
</pre></div></div> <p>Another way to create a database is through the web UI. You can reach the web UI at <code class="language-plaintext highlighter-rouge">http://HOST:8080</code>. Click on the <em>Tables</em> tab at the top and then use the <em>Add Database</em> button.</p> <h3 id="renaming-a-database">Renaming a database</h3> <p>The easiest way to rename a database is to use the <a href="../../../api/python/config/index.html">config</a> command to access the <code class="language-plaintext highlighter-rouge">db_config</code> <a href="../../system-tables/index.html">system table</a>, and then simply use the <code class="language-plaintext highlighter-rouge">update</code> command.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.db("old_db_name").config().update({"name": "new_db_name"}).run()
</pre></div></div> <h3 id="creating-a-table">Creating a table</h3> <p>You can select the database where you’d like to create the table with the <code class="language-plaintext highlighter-rouge">db</code> command and use the <code class="language-plaintext highlighter-rouge">table_create</code> command as follows:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.db("blog").table_create("posts").run()
</pre></div></div> <p>Note that you can omit the <code class="language-plaintext highlighter-rouge">db</code> command if you’re creating a table in the default database on your connection (set to <code class="language-plaintext highlighter-rouge">test</code> unless specified in <code class="language-plaintext highlighter-rouge">connect</code>).</p> <p>Another way to create a new table is to use the web UI. You can reach the web UI at <code class="language-plaintext highlighter-rouge">http://HOST:8080</code>. Click on the <em>Tables</em> tab at the top of the page and then use the <em>Add Table</em> button.</p> <h3 id="inserting-documents">Inserting documents</h3> <p>You can insert documents by calling the <code class="language-plaintext highlighter-rouge">insert</code> command on the appropriate table:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table("user").insert({
    "name": "Michel",
    "age": 26
}).run()
</pre></div></div> <p>You can insert multiple documents at once by passing an array of documents to <code class="language-plaintext highlighter-rouge">insert</code> as follows:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table("user").insert([
    {
        "name": "Michel",
        "age": 26
    },
    {
        "name": "Slava",
        "age": 30
    }
]).run()
</pre></div></div> <h3 id="deleting-documents">Deleting documents</h3> <p>To delete documents, select the documents you’d like to delete and use the <code class="language-plaintext highlighter-rouge">delete</code> command. For example, let’s delete all posts with the author “Michel”:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table("posts").filter(r.row["author"] == "Michel").delete().run()
</pre></div></div> <p>Or, let’s try to delete a single user:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table("posts").get("7644aaf2-9928-4231-aa68-4e65e31bf219").delete().run()
</pre></div></div> <p>Here is how we’d delete all documents in a table:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table("posts").delete().run()
</pre></div></div> <h3 id="retrieving-documents">Retrieving documents</h3> <p>To get all documents in a table, simply use the <code class="language-plaintext highlighter-rouge">table</code> command:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table("posts").run()
</pre></div></div> <p>The <code class="language-plaintext highlighter-rouge">table</code> command returns a cursor; use the <a href="../../../api/python/next/index.html">next</a> or <a href="../../../api/python/each/index.html">for</a> command to iterate through the result set, or <a href="../../../api/python/to_array/index.html">list</a> to retrieve the set as an array.</p> <p>To get a specific document by ID, use <code class="language-plaintext highlighter-rouge">get</code>:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table("posts").get(1).run()
</pre></div></div> <p>To retrieve documents by the value of a specific field, use <code class="language-plaintext highlighter-rouge">filter</code>:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table("posts").filter({"author": "Michel"}).run()
</pre></div></div> <p>To retrieve documents by the value of a specific <a href="../../secondary-indexes/index.html">index</a>, use <code class="language-plaintext highlighter-rouge">get_all</code>:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table("posts").get_all("review", index="category").run()
</pre></div></div> <p>(For more complex filtering recipes, read on.)</p> <h2 id="filtering">Filtering</h2> <h3 id="filtering-based-on-multiple-fields">Filtering based on multiple fields</h3> <p>Suppose you’d like to select all posts where the author’s name is “Michel” and the category is “Geek”. You can do it as follows:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table("posts").filter({
    "author": "Michel",
    "category": "Geek",
}).run()
</pre></div></div> <p>Alternatively, you can use the overloaded <code class="language-plaintext highlighter-rouge">&amp;</code> operator to build a predicate and pass it to <code class="language-plaintext highlighter-rouge">filter</code>:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table("posts").filter(
        (r.row["author"] == "Michel") &amp; (r.row["category"] == "Geek")
    ).run()
</pre></div></div> <p><strong>Note</strong>: RethinkDB overloads <code class="language-plaintext highlighter-rouge">&amp;</code> because Python doesn’t allow overloading the proper <em>and</em> operator. Since <code class="language-plaintext highlighter-rouge">&amp;</code> has high precedence, make sure to wrap the conditions around it in parentheses.</p> <p>You can also use the <code class="language-plaintext highlighter-rouge">r.and_</code> command, if you prefer not using overloaded <code class="language-plaintext highlighter-rouge">&amp;</code>:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table("posts").filter(r.and_(r.row["author"] == "Michel",
                             r.row["category"] == "Geek")).run()
</pre></div></div> <p>Similarly, you can use the overloaded <code class="language-plaintext highlighter-rouge">|</code> operator or the equivalent <code class="language-plaintext highlighter-rouge">r.or_</code> command to filter based on one of many conditions.</p> <h3 id="filtering-based-on-the-presence-of-a-value-in-an-array">Filtering based on the presence of a value in an array</h3> <p>Suppose we have a table <code class="language-plaintext highlighter-rouge">users</code> with documents of the following form:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">{
    name: "William Adama"
    emails: ["bill@bsg.com", "william@bsg.com"]
    ship: "Galactica"
}
</pre></div></div> <p>If we want to retrieve all users that have the email address <code class="language-plaintext highlighter-rouge">user@email.com</code>, we can write:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table("user").filter(r.row["emails"].contains("user@email.com")).run()
</pre></div></div> <p>If we want to retrieve all users on the Galactica and Pegasus, we can write:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table("user").filter(
    lambda user: r.expr(["Galactica", "Pegasus"]).contains(user["ship"])
).run()
</pre></div></div> <h3 id="filtering-based-on-nested-fields">Filtering based on nested fields</h3> <p>In Python you can use the operator <code class="language-plaintext highlighter-rouge">[]</code> to get the value of a field. This operator can be chained to retrieve values from nested fields.</p> <p>Suppose we have a table <code class="language-plaintext highlighter-rouge">users</code> with documents of the following form:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">{
    name: "William Adama"
    contact: {
        phone: "555-5555"
        email: "bill@bsg.com"
    }
}
</pre></div></div> <p>Let’s filter based on the nested field <code class="language-plaintext highlighter-rouge">email</code>:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table("user").filter(
    r.row["contact"]["email"] == "user@email.com"
).run()
</pre></div></div> <p>For many ReQL commands, you can also use a JSON-style nested syntax that allows considerably more flexibility. Read “<a href="../../nested-fields/index.html">Accessing nested fields</a>” for more information.</p> <h3 id="efficiently-retrieving-multiple-documents-by-primary-key">Efficiently retrieving multiple documents by primary key</h3> <p>If you want to retrieve all the posts with the primary keys <code class="language-plaintext highlighter-rouge">1</code>, <code class="language-plaintext highlighter-rouge">2</code>, or <code class="language-plaintext highlighter-rouge">3</code> you can use the <code class="language-plaintext highlighter-rouge">get_all</code> command:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table("posts").get_all(1, 2, 3).run()
</pre></div></div> <h3 id="efficiently-retrieving-multiple-documents-by-secondary-index">Efficiently retrieving multiple documents by secondary index</h3> <p>Suppose we have a table <code class="language-plaintext highlighter-rouge">posts</code> that links posts to authors via an <code class="language-plaintext highlighter-rouge">author_id</code> field. If we’ve created a secondary index on <code class="language-plaintext highlighter-rouge">author_id</code> and want to retrieve all the posts where <code class="language-plaintext highlighter-rouge">author_id</code> is <code class="language-plaintext highlighter-rouge">1</code>, <code class="language-plaintext highlighter-rouge">2</code>, or <code class="language-plaintext highlighter-rouge">3</code>, we can use the <code class="language-plaintext highlighter-rouge">get_all</code> command to do it as follows:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table("posts").get_all(1, 2, 3, index='author_id').run()
</pre></div></div> <blockquote class="infobox ">
<p>Read about <a href="../../secondary-indexes/python/index.html">creating secondary indexes in RethinkDB</a>.</p> </blockquote> <h3 id="retrieving-all-the-objects-in-a-stream-cursor-as-an-array">Retrieving all the objects in a stream (cursor) as an array</h3> <p>If you’re using a command that returns a stream and want to retrieve all of its results at once in an array rather than iterating through them with the cursor object, you can coerce it to an array using <code class="language-plaintext highlighter-rouge">list</code>.</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">posts = list(r.table('posts').run(conn))
</pre></div></div> <p>See the <a href="../../data-types/index.html">data type documentation</a> for more detail about streams.</p> <h3 id="returning-specific-fields-of-a-document">Returning specific fields of a document</h3> <p>If you need to retrieve only a few specific fields from your documents, you can use the <code class="language-plaintext highlighter-rouge">pluck</code> command. For example, here is how you’d return only the fields <code class="language-plaintext highlighter-rouge">name</code> and <code class="language-plaintext highlighter-rouge">age</code> from each row in table <code class="language-plaintext highlighter-rouge">users</code>:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table("users").pluck("name", "age").run()
</pre></div></div> <p>This is equivalent to calling <code class="language-plaintext highlighter-rouge">SELECT name, age FROM users</code> in SQL.</p> <p>The <code class="language-plaintext highlighter-rouge">pluck</code> command also supports selecting nested fields in a document. For example, suppose we’d like to select the fields <code class="language-plaintext highlighter-rouge">phone</code> and <code class="language-plaintext highlighter-rouge">email</code> from the following document:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">{
    name: "William Adama"
    contact: {
        phone: "555-5555"
        email: "bill@bsg.com"
    }
}
</pre></div></div> <p>We can use the following syntax:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table("users").pluck({"contact": {"phone": True, "email": True}}).run()
</pre></div></div> <h3 id="filtering-based-on-a-date-range">Filtering based on a date range</h3> <p>Suppose you want to retrieve all the posts whose date field is between January 1st, 2012 (included) and January 1st, 2013 (excluded), you could do:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table("posts").filter( lambda post:
    post.during(r.time(2012, 1, 1, 'Z'), r.time(2013, 1, 1, 'Z'))
).run(conn)
</pre></div></div> <p>You can also manually compare dates:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table("posts").filter( lambda post:
    (post["date"] &gt;= r.time(2012, 1, 1, 'Z')) &amp;
    (post["date"] &lt; r.time(2013, 1, 1, 'Z'))
).run(conn)
</pre></div></div> <h3 id="filtering-with-regex">Filtering with Regex</h3> <p>If you want to retrieve all users whose last name starts with “Ma”, you can use <code class="language-plaintext highlighter-rouge">r.match</code> this way:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight" data-language=""># Will return Martin, Martinez, Marshall etc.
r.table("users").filter( lambda user:
    user["lastName"].match("^Ma")
).run(conn)
</pre></div></div> <p>If you want to retrieve all users whose last name ends with an “s”, you can use <code class="language-plaintext highlighter-rouge">r.match</code> this way:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight" data-language=""># Will return Williams, Jones, Davis etc.
r.table("users").filter( lambda user:
    user["lastName"].match("s$")
).run(conn)
</pre></div></div> <p>If you want to retrieve all users whose last name contains “ll”, you can use <code class="language-plaintext highlighter-rouge">r.match</code> this way:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight" data-language=""># Will return Williams, Miller, Allen etc.
r.table("users").filter( lambda user:
    user["lastName"].match("ll")
).run(conn)
</pre></div></div> <h3 id="case-insensitive-filter">Case insensitive filter</h3> <p>Retrieve all users whose name is “William” (case insensitive).</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight" data-language=""># Will return william, William, WILLIAM, wiLLiam etc.
r.table("users").filter( lambda user:
    user["lastName"].match("(?i)^william$")
).run(conn)
</pre></div></div> <h3 id="performing-multiple-aggregations-simultaneously">Performing multiple aggregations simultaneously</h3> <p>If you want to perform a query that returns aggregations on different fields together, this is a canonical use case for <a href="../../map-reduce/index.html">map-reduce</a>.</p> <p>Suppose a data set that lists top movies, ranked by user vote. You’d like to get the total votes and the average age of the top 25 movies: the <code class="language-plaintext highlighter-rouge">avg()</code> of the <code class="language-plaintext highlighter-rouge">year</code> column and the <code class="language-plaintext highlighter-rouge">sum()</code> of the <code class="language-plaintext highlighter-rouge">votes</code> column, ordered by the <code class="language-plaintext highlighter-rouge">rank</code> column to get the range 1–25.</p> <p>To perform this, <a href="../../../api/python/map/index.html">map</a> the first 25 movies into a new result set, adding a <code class="language-plaintext highlighter-rouge">count</code> column, then <a href="../../../api/python/reduce/index.html">reduce</a> each row of the mapped result set into a total for each field (<code class="language-plaintext highlighter-rouge">votes</code>, <code class="language-plaintext highlighter-rouge">year</code> and <code class="language-plaintext highlighter-rouge">column</code>). Then use <a href="../../../api/python/do/index.html">do</a> to return a result set with the total votes and the average year, computed by dividing the sum of the years by their count.</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table('movies').order_by('rank').limit(25).map(lambda doc:
    { 'total_votes': doc['votes'], 'total_year': doc['year'], 'count': 1 }
).reduce(lambda left, right: {
    'total_votes': (left['total_votes'] + right['total_votes']),
    'total_year': (left['total_year'] + right['total_year']),
    'count': (left['count'] + right['count'])
}).do(lambda res: {
    'total_votes': res['total_votes'],
    'average_year': (res['total_year'] / res['count'])
}).run(conn)
</pre></div></div> <p>We’re working on an easier syntax for performing multiple aggregations after <code class="language-plaintext highlighter-rouge">group</code> commands. Follow <a href="https://github.com/rethinkdb/rethinkdb/issues/1725">issue 1725</a> to track progress on this.</p> <h2 id="manipulating-documents">Manipulating documents</h2> <h3 id="addingoverwriting-a-field-in-a-document">Adding/overwriting a field in a document</h3> <p>To add or overwrite a field, you can use the <code class="language-plaintext highlighter-rouge">update</code> command. For instance, if you would like to add the field <code class="language-plaintext highlighter-rouge">author</code> with the value “Michel” for all of the documents in the table <code class="language-plaintext highlighter-rouge">posts</code>, you would use:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table("posts").update({ "author": "Michel" }).run()
</pre></div></div> <h3 id="removing-a-field-from-a-document">Removing a field from a document</h3> <p>The <code class="language-plaintext highlighter-rouge">update</code> command lets you to overwrite fields, but not delete them. If you want to delete a field, use the <code class="language-plaintext highlighter-rouge">replace</code> command. The <code class="language-plaintext highlighter-rouge">replace</code> command replaces your entire document with the new document you pass as an argument. For example, if you want to delete the field <code class="language-plaintext highlighter-rouge">author</code> of the blog post with the id <code class="language-plaintext highlighter-rouge">1</code>, you would use:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table("posts").get("1").replace(r.row.without('author')).run()
</pre></div></div> <h3 id="atomically-updating-a-document-based-on-a-condition">Atomically updating a document based on a condition</h3> <p>All modifications made via the <code class="language-plaintext highlighter-rouge">update</code> and <code class="language-plaintext highlighter-rouge">replace</code> commands are always atomic with respect to a single document. For example, let’s say we’d like to atomically update a view count for a page if the field <code class="language-plaintext highlighter-rouge">countable</code> is set to true, and get back the old and new results in a single query. We can perform this operation as follows:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table("pages").update(lambda page:
    r.branch(page["countable"] == True,          # if the page is countable
             { "views": page["views"] + 1 },     # increment the view count
             {}                                  # else do nothing
    )), {"return_changes": True}).run()
</pre></div></div> <h3 id="performing-a-conditional-insert-or-replace">Performing a conditional insert or replace</h3> <p>Using a similar technique to the last recipe, we can use <code class="language-plaintext highlighter-rouge">branch</code> and <code class="language-plaintext highlighter-rouge">replace</code> to maintain a document’s <code class="language-plaintext highlighter-rouge">updated_at</code> and <code class="language-plaintext highlighter-rouge">created_at</code> fields by either inserting a new document or updating one depending on whether a document with a specified ID exists.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">def update_with_date(id, user_object):
    r.table('users').get(id).replace(
        lambda doc: r.branch(
            (doc == None),
            r.expr(user_object).merge({'id': id, 'created_at': r.now()}),
            doc.merge(user_object).merge({'updated_at': r.now()}))).run()
</pre></div></div> <h3 id="storing-timestamps-and-json-date-strings-as-time-data-types">Storing timestamps and JSON date strings as Time data types</h3> <p>You can use the <code class="language-plaintext highlighter-rouge">epoch_time</code> and <code class="language-plaintext highlighter-rouge">iso8601</code> commands to convert Unix timestamps (in seconds) and JSON date-time strings (which are in ISO 8601 format) to the ReQL time type. The ReQL driver will also convert Python datetime objects into ReQL time.</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">import time
from datetime import datetime
timezone = time.strftime("%z")
reql_tz = r.make_timezone(timezone[:3] + ":" + timezone[3:])
the_date = datetime.now(reql_tz)
timestamp = time.mktime(the_date.timetuple())
json_date = the_date.isoformat()
r.table("dates").insert({
    'from_object': the_date,
    'from_epoch': r.epoch_time(timestamp),
    'from_iso': r.iso8601(json_date)
}).run(conn)
</pre></div></div> <p>Use the commands <code class="language-plaintext highlighter-rouge">toEpochTime</code> and <code class="language-plaintext highlighter-rouge">toISO8601</code> to convert back.</p> <h3 id="incrementing-a-field-value">Incrementing a field value</h3> <p>It’s possible to increment a field value in a document—for example, a counter—in one step on the server.</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table('aggregated').get(id).update(
    { 'count': (r.row['count'].default(0)+1) }
).run(conn)
</pre></div></div> <p>Use <code class="language-plaintext highlighter-rouge">default</code> to ensure that if the <code class="language-plaintext highlighter-rouge">count</code> field doesn’t already exist in the document, it’s added correctly, rather than letting <code class="language-plaintext highlighter-rouge">add</code> throw an error.</p> <h2 id="pagination">Pagination</h2> <h3 id="limiting-the-number-of-returned-documents">Limiting the number of returned documents</h3> <p>You can limit the number of documents returned by your queries with the <code class="language-plaintext highlighter-rouge">limit</code> command. Let’s retrieve just the first 10 blog posts:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table("posts").order_by("date").limit(10).run()
</pre></div></div> <h3 id="implementing-pagination">Implementing pagination</h3> <p>There are multiple ways to paginate results in RethinkDB. The most straightforward way is using <code class="language-plaintext highlighter-rouge">skip</code> and <code class="language-plaintext highlighter-rouge">limit</code> (similar to the way SQL’s <code class="language-plaintext highlighter-rouge">OFFSET</code> and <code class="language-plaintext highlighter-rouge">LIMIT</code> work), but that’s also the least efficient. It’s more efficient to use <code class="language-plaintext highlighter-rouge">slice</code>, and even more efficient to use <code class="language-plaintext highlighter-rouge">between</code> with a secondary index.</p> <p>The <a href="../../../api/python/slice/index.html">slice</a> command returns a range from a given start value through but not including a given end value. This makes it easy to use as a <code class="language-plaintext highlighter-rouge">skip</code>/<code class="language-plaintext highlighter-rouge">limit</code> replacement: the start value is the first item to retrieve, and the end value is the first item plus the limit. To retrieve posts 11-20 from the database using <code class="language-plaintext highlighter-rouge">slice</code>:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table("posts").order_by("date").slice(11,21).run(conn)
</pre></div></div> <p>If you have a secondary index, you can use the <a href="../../../api/python/between/index.html">between</a> command in conjunction with <a href="../../../api/python/order_by/index.html">order_by</a> and <code class="language-plaintext highlighter-rouge">limit</code>. This is the most efficient way to paginate, but requires looking up values in the secondary index field to find the first record of each page.</p> <p>Suppose you wanted to paginate through a set of users, 25 at a time. You could get the first 25 records efficiently just with <code class="language-plaintext highlighter-rouge">limit</code>.</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table("users").order_by(index="name").limit(25).run(conn)
</pre></div></div> <p>For each successive page, start with the last name in the previous page.</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table("users").between(last_name, r.maxval, left_bound="open",
    index="name").order_by(index="name").limit(25).run(conn)
</pre></div></div> <p>We pass the <code class="language-plaintext highlighter-rouge">last_name</code> saved from the previous set to <code class="language-plaintext highlighter-rouge">between</code> as the start index. For the end index, we pass <code class="language-plaintext highlighter-rouge">None</code> to return documents from the start index to the table’s end. The <code class="language-plaintext highlighter-rouge">left_bound</code> parameter tells <code class="language-plaintext highlighter-rouge">between</code> not to include the first record, since it was already returned as part of the previous page.</p> <h2 id="transformations">Transformations</h2> <h3 id="counting-the-number-of-documents-in-a-table">Counting the number of documents in a table</h3> <p>You can count the number of documents with a <code class="language-plaintext highlighter-rouge">count</code> command:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table("posts").count().run()
</pre></div></div> <h3 id="computing-the-average-value-of-a-field">Computing the average value of a field</h3> <p>You can compute the average value of a field with the <code class="language-plaintext highlighter-rouge">avg</code> command.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table("posts").avg("num_comments").run()
</pre></div></div> <h3 id="using-subqueries-to-return-additional-fields">Using subqueries to return additional fields</h3> <p>Suppose we’d like to to retrieve all the posts in the table <code class="language-plaintext highlighter-rouge">post</code> and also return an additional field, <code class="language-plaintext highlighter-rouge">comments</code>, which is an array of all the comments for the relevant post retrieved from the <code class="language-plaintext highlighter-rouge">comments</code> table. We could do this using a subquery:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table("posts").merge(lambda post:
    {
        "comments": r.table("comments").filter(lambda comment:
            comment["id_post"] == post["id"]).coerce_to("ARRAY")
    }
).run()
</pre></div></div> <h3 id="performing-a-pivot-operation">Performing a pivot operation</h3> <p>Suppose the table <code class="language-plaintext highlighter-rouge">marks</code> stores the marks of every students per course:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">[
    {
        "name": "William Adama",
        "mark": 90,
        "id": 1,
        "course": "English"
    },
    {
        "name": "William Adama",
        "mark": 70,
        "id": 2,
        "course": "Mathematics"
    },
    {
        "name": "Laura Roslin",
        "mark": 80,
        "id": 3,
        "course": "English"
    },
    {
        "name": "Laura Roslin",
        "mark": 80,
        "id": 4,
        "course": "Mathematics"
    }
]
</pre></div></div> <p>You may be interested in retrieving the results in this format:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">[
    {
        "name": "Laura Roslin",
        "Mathematics": 80,
        "English": 80
    },
    {
        "name": "William Adama",
        "Mathematics": 70,
        "English": 90
    }
]
</pre></div></div> <p>In this case, you can do a pivot operation with the <code class="language-plaintext highlighter-rouge">group</code> and <code class="language-plaintext highlighter-rouge">coerce_to</code> commands:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.db('test').table('marks').group('name').map(
    lambda row: [row['course'], row['mark']]
).ungroup().map(
    lambda res: r.expr({'name': res['group']}).merge(
        res['reduction'].coerce_to('object'))
).run(conn)
</pre></div></div> <p><em>Note:</em> A nicer syntax will eventually be added. See the <a href="https://github.com/rethinkdb/rethinkdb/issues/838">Github issue 838</a> to track progress.</p> <h3 id="performing-an-unpivot-operation">Performing an unpivot operation</h3> <p>Doing an unpivot operation to “cancel” a pivot one can be done with the <code class="language-plaintext highlighter-rouge">concat_map</code>, <code class="language-plaintext highlighter-rouge">map</code> and <code class="language-plaintext highlighter-rouge">keys</code> commands:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table("pivoted_marks").concat_map(lambda doc:
    doc.without("id", "name").keys().map(lambda course:
        {
            "name": doc["name"],
            "course": course,
            "mark": doc[course]
        }
    )
)
</pre></div></div> <p><em>Note:</em> A nicer syntax will eventually be added. See the <a href="https://github.com/rethinkdb/rethinkdb/issues/838">Github issue 838</a> to track progress.</p> <h3 id="renaming-a-field-when-retrieving-documents">Renaming a field when retrieving documents</h3> <p>Suppose we want to rename the field <code class="language-plaintext highlighter-rouge">id</code> to <code class="language-plaintext highlighter-rouge">id_user</code> when retrieving documents from the table <code class="language-plaintext highlighter-rouge">users</code>. We could do:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table("users").map(
    # Add the field id_user that is equal to the id one
    r.row.merge(
        lambda doc: { "id_user": doc["id"] }
    ).without("id") # Remove the field id
)
</pre></div></div> <h3 id="grouping-query-results-by-datetime-periods">Grouping query results by date/time periods</h3> <p>ReQL has commands for extracting parts of <a href="../../dates-and-times/python/index.html">dates and times</a>, including <a href="https://rethinkdb.com/api/javascript/year">year</a>, <a href="https://rethinkdb.com/api/javascript/month">month</a>, <a href="https://rethinkdb.com/api/javascript/day">day</a>, <a href="https://rethinkdb.com/api/javascript/day_of_week">dayOfWeek</a> and more. You can use these with <a href="https://rethinkdb.com/api/javascript/group">group</a> to group by various intervals. Suppose you had a table of invoices and wanted to retrieve them in groups ordered by year and month:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table('invoices').group(
    [r.row['date'].year(), r.row['date'].month()]
).ungroup().merge(
    {'invoices': r.row['reduction'], 'month': r.row['group']}
).without('reduction', 'group').order_by('month').run(conn)
</pre></div></div> <p>(We also use the technique for renaming a field, described above, to give the names “reduction” and “group” more useful names of “invoices” and “month.”) You could use any combination of the ReQL date/time interval commands in the group, or work with the date/time as a native object.</p> <p>Currently, ReQL has a default limit of 100,000 elements in an array, and the implementation of <code class="language-plaintext highlighter-rouge">group</code> requires the total number of documents grouped to fit within that boundary, so you are limited to 100,000 invoices. This can be changed, however, by passing the <code class="language-plaintext highlighter-rouge">array_limit</code> option to <a href="../../../api/python/run/index.html">run</a>. (Also note that <code class="language-plaintext highlighter-rouge">ungroup</code> always returns an array, although this may change in a future version. Follow issue <a href="https://github.com/rethinkdb/rethinkdb/issues/2719">#2719</a> for progress on this.)</p> <p>You can also use this approach with a <a href="../../secondary-indexes/python/index.html">compound index</a> on the intervals you want to group:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table('invoices').index_create(
    'by_day', [r.row['date'].year(), r.row['date'].month(), r.row['date'].day()]
).run(conn)
</pre></div></div> <p>Then you can use that index in the <code class="language-plaintext highlighter-rouge">group</code> function. This query would return the highest-value invoice for each day.</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table('invoices').group(index='by_day').max('price').run(conn)
</pre></div></div> <h2 id="miscellaneous">Miscellaneous</h2> <h3 id="generating-monotonically-increasing-primary-key-values">Generating monotonically increasing primary key values</h3> <p>Efficiently generating monotonically increasing IDs in a distributed system is a surprisingly difficult problem. If an inserted document is missing a primary key, RethinkDB currently generates a random UUID. We will be supporting additional autogeneration schemes in the future (see <a href="https://github.com/rethinkdb/rethinkdb/issues/117">https://github.com/rethinkdb/rethinkdb/issues/117</a>), but in the meantime, you can use one of the available open-source libraries for distributed id generation (e.g. <a href="https://github.com/twitter/snowflake">twitter snowflake</a>).</p> <h3 id="parsing-rethinkdbs-response-to-a-write-query">Parsing RethinkDB’s response to a write query</h3> <p>When you issue a write query (<code class="language-plaintext highlighter-rouge">insert</code>, <code class="language-plaintext highlighter-rouge">delete</code>, <code class="language-plaintext highlighter-rouge">update</code>, or <code class="language-plaintext highlighter-rouge">replace</code>), RethinkDB returns a summary object that looks like this:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">{"deleted":0, "replaced":0, "unchanged":0, "errors":0, "skipped":0, "inserted":1}
</pre></div></div> <p>The most important field of this object is <code class="language-plaintext highlighter-rouge">errors</code>. Generally speaking, if no exceptions are thrown and <code class="language-plaintext highlighter-rouge">errors</code> is 0 then the write did what it was supposed to. (RethinkDB throws an exception when it isn’t even able to access the table; it sets the <code class="language-plaintext highlighter-rouge">errors</code> field if it can access the table but an error occurs during the write. This convention exists so that batched writes don’t abort halfway through when they encounter an error.)</p> <p>The following fields are always present in this object:</p> <ul> <li>
<code class="language-plaintext highlighter-rouge">inserted</code> – Number of new documents added to the database.</li> <li>
<code class="language-plaintext highlighter-rouge">deleted</code> – Number of documents deleted from the database.</li> <li>
<code class="language-plaintext highlighter-rouge">replaced</code> – Number of documents that were modified.</li> <li>
<code class="language-plaintext highlighter-rouge">unchanged</code> – Number of documents that would have been modified, except that the new value was the same as the old value.</li> <li>
<code class="language-plaintext highlighter-rouge">skipped</code> – Number of documents that were unmodified in a write operation, because the document is not available to be deleted or updated. The document might have been deleted by a different operation happening concurrently, or in the case of a <code class="language-plaintext highlighter-rouge">get</code> operation the key might not exist.</li> <li>
<code class="language-plaintext highlighter-rouge">errors</code> – Number of documents that were left unmodified due to an error.</li> </ul> <p>In addition, the following two fields are set as circumstances dictate:</p> <ul> <li>
<code class="language-plaintext highlighter-rouge">generated_keys</code> – If you issue an insert query where some or all of the rows lack primary keys, the server will generate primary keys for you and return an array of those keys in this field. (The order of this array will match the order of the rows in your insert query.)</li> <li>
<code class="language-plaintext highlighter-rouge">first_error</code> – If <code class="language-plaintext highlighter-rouge">errors</code> is positive, the text of the first error message encountered will be in this field. This is a very useful debugging aid. (We don’t return all of the errors because a single typo can result in millions of errors when operating on a large database.)</li> </ul> <h3 id="using-dynamic-keys-in-reql-commands">Using dynamic keys in ReQL commands</h3> <p>Sometimes you may want to write a ReQL document with a dynamic key—the field name is stored in a variable. You can do this with the <code class="language-plaintext highlighter-rouge">object</code> command, which takes a list of keys and values (<code class="language-plaintext highlighter-rouge">(key, value, key, value ...)</code>) and returns an object from them.</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table('users').get(1).update(r.object(property_name, value)).run(conn)
</pre></div></div> <p>The field name can be determined entirely on the server, too. For instance, to update a field whose name is drawn from the value of another field:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table('users').for_each(
    lambda doc: r.table('users').get(doc['id']).update(
        r.object(doc['field'], new_value))
).run(conn)
</pre></div></div> <p>For a practical example, imagine a data set like the one from the <a href="http://www.rethinkdb.com/docs/cookbook/python/#performing-a-pivot-operation">pivot example</a>, where each document represents a student’s course record.</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">[
    {
        "name": "John",
        "mark": 70,
        "id": 1,
        "course": "Mathematics"
    },
    {
        "name": "John",
        "mark": 90,
        "id": 2,
        "course": "English"
    }
]
</pre></div></div> <p>But you’d like to get a document more like a “report card”:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">{
    "Mathematics": 70,
    "English": 90
}
</pre></div></div> <p>You can accomplish this with <code class="language-plaintext highlighter-rouge">object</code> and a pivot.</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table('marks').filter({'student': 'John'}).map(
    lambda mark: r.object(mark['course'], mark['mark'])
).reduce(
    lambda left, right: left.merge(right)
)
</pre></div></div> <h3 id="returning-a-reql-query-as-a-string">Returning a ReQL query as a string</h3> <p>For testing or logging purposes, you might want to capture a created ReQL query as a string. (You can see an example of this in ReQL error messages.) While there is no ReQL command to do this, you can simply pass the query chain (without <code class="language-plaintext highlighter-rouge">run()</code>) as an argument to <code class="language-plaintext highlighter-rouge">str()</code>:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">str(r.table('users').filter(lambda user: user['groups'].contains('operators')))
</pre></div></div> <h3 id="building-reql-queries-on-multiple-lines">Building ReQL queries on multiple lines</h3> <p>It’s a common pattern in some query interfaces to “build” queries programmatically by instantiating a query object, calling it several times in succession to add query commands, then calling the execution command. This lets you dynamically change the query based on conditions at runtime. You might expect to do this in ReQL like so:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">query = r.table('posts')
if request.filter:
    query.filter(request.filter)
query.order_by('date')
query.run(conn)
</pre></div></div> <p>However, that won’t work! The reason is that the query object doesn’t store state. Each of the commands after the first one is simply running on the <em>original</em> value of <code class="language-plaintext highlighter-rouge">query</code> (in this case, the <code class="language-plaintext highlighter-rouge">posts</code> table). You can solve this by explicitly assigning the output of each new command to the <code class="language-plaintext highlighter-rouge">query</code> variable:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">query = r.table('posts')
if request.filter:
    query = query.filter(request.filter)
query = query.order_by('date')
query = query.run(conn)
</pre></div></div> <h3 id="joining-multiple-changefeeds-into-one">Joining multiple changefeeds into one</h3> <p>You might want to produce a “union” changefeed to watch multiple tables or queries on just one feed. Since the <code class="language-plaintext highlighter-rouge">union</code> command works with <code class="language-plaintext highlighter-rouge">changes</code>, ReQL makes this fairly straightforward. To monitor two tables at once:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table('table1').union(r.table('table2')).changes().run(conn)
</pre></div></div> <p>You might want to “tag” the tables to make it clear which changes belong to which table.</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table('table1').merge({"table": "table1"}).union(
    r.table('table2').merge({"table": 'table2'}).changes().run(conn)
</pre></div></div> <p>Also, you can use <code class="language-plaintext highlighter-rouge">changes</code> with each query rather than after the whole.</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">r.table("table1").filter({"flag": "blue"}).changes().union(
    r.table("table2").filter({"flag": "red"}).changes()
).run(conn)
</pre></div></div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; RethinkDB contributors<br>Licensed under the Creative Commons Attribution-ShareAlike 3.0 Unported License.<br>
    <a href="https://rethinkdb.com/docs/cookbook/python/" class="_attribution-link">https://rethinkdb.com/docs/cookbook/python/</a>
  </p>
</div>
