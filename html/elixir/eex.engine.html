<div id="top-content"> <h1> <a href="https://github.com/elixir-lang/elixir/blob/v1.17.2/lib/eex/lib/eex/engine.ex#L1" title="View Source" class="source" rel="help">Source</a> <span translate="no">EEx.Engine</span> <small>behaviour</small>  </h1> <section id="moduledoc"> <p>Basic EEx engine that ships with Elixir.</p>
<p>An engine needs to implement all callbacks below.</p>
<p>This module also ships with a default engine implementation you can delegate to. See <a href="eex.smartengine.html"><code class="inline">EEx.SmartEngine</code></a> as an example.</p> </section> </div> <section id="summary" class="details-list"> <h1 class="section-heading">  <span class="text">Summary</span> </h1> <h2> Types </h2>
<dl class="summary-types summary">  <div class="summary-row"> <dt class="summary-signature"> <a href="#t:state/0" data-no-tooltip translate="no">state()</a> </dt> </div> </dl> <h2> Callbacks </h2>
<dl class="summary-callbacks summary">  <div class="summary-row"> <dt class="summary-signature"> <a href="#c:handle_begin/1" data-no-tooltip translate="no">handle_begin(state)</a> </dt> <dd class="summary-synopsis"><p>Invoked at the beginning of every nesting.</p></dd> </div> <div class="summary-row"> <dt class="summary-signature"> <a href="#c:handle_body/1" data-no-tooltip translate="no">handle_body(state)</a> </dt> <dd class="summary-synopsis"><p>Called at the end of every template.</p></dd> </div> <div class="summary-row"> <dt class="summary-signature"> <a href="#c:handle_end/1" data-no-tooltip translate="no">handle_end(state)</a> </dt> <dd class="summary-synopsis"><p>Invokes at the end of a nesting.</p></dd> </div> <div class="summary-row"> <dt class="summary-signature"> <a href="#c:handle_expr/3" data-no-tooltip translate="no">handle_expr(state, marker, expr)</a> </dt> <dd class="summary-synopsis"><p>Called for the dynamic/code parts of a template.</p></dd> </div> <div class="summary-row"> <dt class="summary-signature"> <a href="#c:handle_text/3" data-no-tooltip translate="no">handle_text(state, list, text)</a> </dt> <dd class="summary-synopsis"><p>Called for the text/static parts of a template.</p></dd> </div> <div class="summary-row"> <dt class="summary-signature"> <a href="#c:init/1" data-no-tooltip translate="no">init(opts)</a> </dt> <dd class="summary-synopsis"><p>Called at the beginning of every template.</p></dd> </div> </dl> <h2> Functions </h2>
<dl class="summary-functions summary">  <div class="summary-row"> <dt class="summary-signature"> <a href="#handle_assign/1" data-no-tooltip translate="no">handle_assign(arg)</a> </dt> <dd class="summary-synopsis"><p>Handles assigns in quoted expressions.</p></dd> </div> <div class="summary-row"> <dt class="summary-signature"> <a href="#handle_begin/1" data-no-tooltip translate="no">handle_begin(state)</a> </dt> <dd class="summary-synopsis"><p>Default implementation for <a href="#c:handle_begin/1"><code class="inline">handle_begin/1</code></a>.</p></dd> </div> <div class="summary-row"> <dt class="summary-signature"> <a href="#handle_body/1" data-no-tooltip translate="no">handle_body(state)</a> </dt> <dd class="summary-synopsis"><p>Default implementation for <a href="#c:handle_body/1"><code class="inline">handle_body/1</code></a>.</p></dd> </div> <div class="summary-row"> <dt class="summary-signature"> <a href="#handle_end/1" data-no-tooltip translate="no">handle_end(quoted)</a> </dt> <dd class="summary-synopsis"><p>Default implementation for <a href="#c:handle_end/1"><code class="inline">handle_end/1</code></a>.</p></dd> </div> <div class="summary-row"> <dt class="summary-signature"> <a href="#handle_expr/3" data-no-tooltip translate="no">handle_expr(state, marker, ast)</a> </dt> <dd class="summary-synopsis"><p>Default implementation for <a href="#c:handle_expr/3"><code class="inline">handle_expr/3</code></a>.</p></dd> </div> <div class="summary-row"> <dt class="summary-signature"> <a href="#handle_text/3" data-no-tooltip translate="no">handle_text(state, meta, text)</a> </dt> <dd class="summary-synopsis"><p>Default implementation for <a href="#c:handle_text/3"><code class="inline">handle_text/3</code></a>.</p></dd> </div> <div class="summary-row"> <dt class="summary-signature"> <a href="#init/1" data-no-tooltip translate="no">init(opts)</a> </dt> <dd class="summary-synopsis"><p>Default implementation for <a href="#c:init/1"><code class="inline">init/1</code></a>.</p></dd> </div> </dl> </section> <section id="types" class="details-list"> <h1 class="section-heading">  <span class="text">Types</span> </h1> <div class="types-list"> <section class="detail"> <h3 class="detail-header" id="t:state/0">state()<a href="https://github.com/elixir-lang/elixir/blob/v1.17.2/lib/eex/lib/eex/engine.ex#L11" class="source">Source</a>
</h3> <section class="docstring"> <div class="specs"> <pre translate="no" data-language="elixir">@type state() :: term()</pre> </div> </section> </section> </div> </section> <section id="callbacks" class="details-list"> <h1 class="section-heading">  <span class="text">Callbacks</span> </h1> <div class="callbacks-list"> <section class="detail"> <h3 class="detail-header" id="c:handle_begin/1">handle_begin(state)<a href="https://github.com/elixir-lang/elixir/blob/v1.17.2/lib/eex/lib/eex/engine.ex#L61" class="source">Source</a>
</h3> <section class="docstring"> <div class="specs"> <pre translate="no" data-language="elixir">@callback handle_begin(state()) :: state()</pre> </div> <p>Invoked at the beginning of every nesting.</p>
<p>It must return a new state that is used only inside the nesting. Once the nesting terminates, the current <code class="inline">state</code> is resumed.</p> </section> </section> <section class="detail"> <h3 class="detail-header" id="c:handle_body/1">handle_body(state)<a href="https://github.com/elixir-lang/elixir/blob/v1.17.2/lib/eex/lib/eex/engine.ex#L25" class="source">Source</a>
</h3> <section class="docstring"> <div class="specs"> <pre translate="no" data-language="elixir">@callback handle_body(state()) :: Macro.t()</pre> </div> <p>Called at the end of every template.</p>
<p>It must return Elixir's quoted expressions for the template.</p> </section> </section> <section class="detail"> <h3 class="detail-header" id="c:handle_end/1">handle_end(state)<a href="https://github.com/elixir-lang/elixir/blob/v1.17.2/lib/eex/lib/eex/engine.ex#L68" class="source">Source</a>
</h3> <section class="docstring"> <div class="specs"> <pre translate="no" data-language="elixir">@callback handle_end(state()) :: Macro.t()</pre> </div> <p>Invokes at the end of a nesting.</p>
<p>It must return Elixir's quoted expressions for the nesting.</p> </section> </section> <section class="detail"> <h3 class="detail-header" id="c:handle_expr/3">handle_expr(state, marker, expr)<a href="https://github.com/elixir-lang/elixir/blob/v1.17.2/lib/eex/lib/eex/engine.ex#L53" class="source">Source</a>
</h3> <section class="docstring"> <div class="specs"> <pre translate="no" data-language="elixir">@callback handle_expr(state(), marker :: String.t(), expr :: Macro.t()) :: state()</pre> </div> <p>Called for the dynamic/code parts of a template.</p>
<p>The marker is what follows exactly after <code class="inline">&lt;%</code>. For example, <code class="inline">&lt;% foo %&gt;</code> has an empty marker, but <code class="inline">&lt;%= foo %&gt;</code> has <code class="inline">"="</code> as marker. The allowed markers so far are:</p>
<ul>
<li><code class="inline">""</code></li>
<li><code class="inline">"="</code></li>
<li><code class="inline">"/"</code></li>
<li><code class="inline">"|"</code></li>
</ul>
<p>Markers <code class="inline">"/"</code> and <code class="inline">"|"</code> are only for use in custom EEx engines and are not implemented by default. Using them without an appropriate implementation raises <a href="eex.syntaxerror.html"><code class="inline">EEx.SyntaxError</code></a>.</p>
<p>It must return the updated state.</p> </section> </section> <section class="detail"> <h3 class="detail-header" id="c:handle_text/3">handle_text(state, list, text)<a href="https://github.com/elixir-lang/elixir/blob/v1.17.2/lib/eex/lib/eex/engine.ex#L32" class="source">Source</a>
</h3> <section class="docstring"> <div class="specs"> <pre translate="no" data-language="elixir">@callback handle_text(
  state(),
  [line: pos_integer(), column: pos_integer()],
  text :: String.t()
) :: state()</pre> </div> <p>Called for the text/static parts of a template.</p>
<p>It must return the updated state.</p> </section> </section> <section class="detail"> <h3 class="detail-header" id="c:init/1">init(opts)<a href="https://github.com/elixir-lang/elixir/blob/v1.17.2/lib/eex/lib/eex/engine.ex#L18" class="source">Source</a>
</h3> <section class="docstring"> <div class="specs"> <pre translate="no" data-language="elixir">@callback init(opts :: keyword()) :: state()</pre> </div> <p>Called at the beginning of every template.</p>
<p>It must return the initial state.</p> </section> </section> </div> </section> <section id="functions" class="details-list"> <h1 class="section-heading">  <span class="text">Functions</span> </h1> <div class="functions-list"> <section class="detail"> <h3 class="detail-header" id="handle_assign/1">handle_assign(arg)<a href="https://github.com/elixir-lang/elixir/blob/v1.17.2/lib/eex/lib/eex/engine.ex#L120" class="source">Source</a>
</h3> <section class="docstring"> <div class="specs"> <pre translate="no" data-language="elixir">@spec handle_assign(Macro.t()) :: Macro.t()</pre> </div> <p>Handles assigns in quoted expressions.</p>
<p>A warning will be printed on missing assigns. Future versions will raise.</p>
<p>This can be added to any custom engine by invoking <a href="#handle_assign/1"><code class="inline">handle_assign/1</code></a> with <a href="https://hexdocs.pm/elixir/Macro.html#prewalk/2"><code class="inline">Macro.prewalk/2</code></a>:</p>
<pre data-language="elixir">def handle_expr(state, token, expr) do
  expr = Macro.prewalk(expr, &amp;EEx.Engine.handle_assign/1)
  super(state, token, expr)
end</pre> </section> </section> <section class="detail"> <h3 class="detail-header" id="handle_begin/1">handle_begin(state)<a href="https://github.com/elixir-lang/elixir/blob/v1.17.2/lib/eex/lib/eex/engine.ex#L160" class="source">Source</a>
</h3> <section class="docstring"> <p>Default implementation for <a href="#c:handle_begin/1"><code class="inline">handle_begin/1</code></a>.</p> </section> </section> <section class="detail"> <h3 class="detail-header" id="handle_body/1">handle_body(state)<a href="https://github.com/elixir-lang/elixir/blob/v1.17.2/lib/eex/lib/eex/engine.ex#L171" class="source">Source</a>
</h3> <section class="docstring"> <p>Default implementation for <a href="#c:handle_body/1"><code class="inline">handle_body/1</code></a>.</p> </section> </section> <section class="detail"> <h3 class="detail-header" id="handle_end/1">handle_end(quoted)<a href="https://github.com/elixir-lang/elixir/blob/v1.17.2/lib/eex/lib/eex/engine.ex#L166" class="source">Source</a>
</h3> <section class="docstring"> <p>Default implementation for <a href="#c:handle_end/1"><code class="inline">handle_end/1</code></a>.</p> </section> </section> <section class="detail"> <h3 class="detail-header" id="handle_expr/3">handle_expr(state, marker, ast)<a href="https://github.com/elixir-lang/elixir/blob/v1.17.2/lib/eex/lib/eex/engine.ex#L187" class="source">Source</a>
</h3> <section class="docstring"> <p>Default implementation for <a href="#c:handle_expr/3"><code class="inline">handle_expr/3</code></a>.</p> </section> </section> <section class="detail"> <h3 class="detail-header" id="handle_text/3">handle_text(state, meta, text)<a href="https://github.com/elixir-lang/elixir/blob/v1.17.2/lib/eex/lib/eex/engine.ex#L180" class="source">Source</a>
</h3> <section class="docstring"> <p>Default implementation for <a href="#c:handle_text/3"><code class="inline">handle_text/3</code></a>.</p> </section> </section> <section class="detail"> <h3 class="detail-header" id="init/1">init(opts)<a href="https://github.com/elixir-lang/elixir/blob/v1.17.2/lib/eex/lib/eex/engine.ex#L151" class="source">Source</a>
</h3> <section class="docstring"> <p>Default implementation for <a href="#c:init/1"><code class="inline">init/1</code></a>.</p> </section> </section> </div> </section> <footer class="footer"> <p> <span class="line"> <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages"> Search HexDocs </button> <a href="eex.epub.html" title="ePub version"> Download ePub version </a> </span> </p> <p class="built-using"> Built using <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.34.1) for the <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a> </p> </footer><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012-2024 The Elixir Team<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://hexdocs.pm/eex/1.17.2/EEx.Engine.html" class="_attribution-link">https://hexdocs.pm/eex/1.17.2/EEx.Engine.html</a>
  </p>
</div>
