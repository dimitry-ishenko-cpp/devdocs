<article class="devsite-article">  <devsite-feedback position="header" project-name="Bazel" product-id="5052038" bucket="https-bazel-build" context="" version="t-devsite-webserver-20250107-r00-rc00.466129660839327169" data-label="Send Feedback Button" track-type="feedback" track-name="sendFeedbackLink" track-metadata-position="header" class="nocontent" project-icon="https://www.gstatic.com/devrel-devsite/prod/vda41147226ae308b24384f785d31d739107d2716272d99cd11c490ff3892954d/bazel/images/touchicon-180.png"> <button> Send feedback </button> </devsite-feedback> <h1 class="devsite-page-title" tabindex="-1"> Shell Rules </h1>  <div class="devsite-page-title-meta"><devsite-view-release-notes></devsite-view-release-notes></div>  <div class="devsite-article-body clearfix
  ">       <h2 id="rules" data-text="Rules" tabindex="-1">Rules</h2> <ul> <li> <a href="#sh_binary"> sh_binary </a> </li> <li> <a href="#sh_library"> sh_library </a> </li> <li> <a href="#sh_test"> sh_test </a> </li> </ul> <h2 id="sh_binary" data-text="     sh_binary   " tabindex="-1"> sh_binary </h2>  
<devsite-code><pre class="rule-signature" translate="no" dir="ltr" is-upgraded>sh_binary(<a href="#sh_binary.name">name</a>, <a href="#sh_binary.deps">deps</a>, <a href="#sh_binary.srcs">srcs</a>, <a href="common-definitions.html#typical.data">data</a>, <a href="common-definitions.html#binary.args">args</a>, <a href="common-definitions.html#common.compatible_with">compatible_with</a>, <a href="common-definitions.html#common.deprecation">deprecation</a>, <a href="common-definitions.html#common.distribs">distribs</a>, <a href="common-definitions.html#binary.env">env</a>, <a href="#sh_binary.env_inherit">env_inherit</a>, <a href="common-definitions.html#common.exec_compatible_with">exec_compatible_with</a>, <a href="common-definitions.html#common.exec_properties">exec_properties</a>, <a href="common-definitions.html#common.features">features</a>, <a href="common-definitions.html#binary.output_licenses">output_licenses</a>, <a href="common-definitions.html#common.restricted_to">restricted_to</a>, <a href="common-definitions.html#common.tags">tags</a>, <a href="common-definitions.html#common.target_compatible_with">target_compatible_with</a>, <a href="common-definitions.html#common.testonly">testonly</a>, <a href="common-definitions.html#common.toolchains">toolchains</a>, <a href="common-definitions.html#common.visibility">visibility</a>)</pre></devsite-code> <p> The <code translate="no" dir="ltr">sh_binary</code> rule is used to declare executable shell scripts. (<code translate="no" dir="ltr">sh_binary</code> is a misnomer: its outputs aren't necessarily binaries.) This rule ensures that all dependencies are built, and appear in the <code translate="no" dir="ltr">runfiles</code> area at execution time. We recommend that you name your <code translate="no" dir="ltr">sh_binary()</code> rules after the name of the script minus the extension (e.g. <code translate="no" dir="ltr">.sh</code>); the rule name and the file name must be distinct. <code translate="no" dir="ltr">sh_binary</code> respects shebangs, so any available interpreter may be used (eg. <code translate="no" dir="ltr">#!/bin/zsh</code>) </p> <h4 id="sh_binary_examples" data-text="Example" tabindex="-1">Example</h4> <p>For a simple shell script with no dependencies and some data files: </p> 
<devsite-code><pre class="code" translate="no" dir="ltr" is-upgraded>
sh_binary(
    name = "foo",
    srcs = ["foo.sh"],
    data = glob(["datafiles/*.txt"]),
)
</pre></devsite-code> <h3 id="sh_binary_args" data-text="Arguments" tabindex="-1">Arguments</h3> <table class="table table-condensed table-bordered table-params"> <colgroup> <col class="col-param"> <col class="param-description"> </colgroup> <thead> <tr> <th colspan="2">Attributes</th> </tr> </thead> <tbody> <tr> <td id="sh_binary.name"><code translate="no" dir="ltr">name</code></td> <td> <p><a href="https://bazel.build/versions/8.0.0/concepts/labels#target-names">Name</a>; required</p> <p>A unique name for this target.</p> </td> </tr> <tr> <td id="sh_binary.deps"> <code translate="no" dir="ltr">deps</code> </td> <td> <p>List of <a href="https://bazel.build/versions/8.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> The list of "library" targets to be aggregated into this target. See general comments about <code translate="no" dir="ltr">deps</code> at <a href="common-definitions.html#typical.deps">Typical attributes defined by most build rules</a>. <p> This attribute should be used to list other <code translate="no" dir="ltr">sh_library</code> rules that provide interpreted program source code depended on by the code in <code translate="no" dir="ltr">srcs</code>. The files provided by these rules will be present among the <code translate="no" dir="ltr">runfiles</code> of this target. </p> </td> </tr> <tr> <td id="sh_binary.srcs"> <code translate="no" dir="ltr">srcs</code> </td> <td> <p>List of <a href="https://bazel.build/versions/8.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> The list of input files. <p> This attribute should be used to list shell script source files that belong to this library. Scripts can load other scripts using the shell's <code translate="no" dir="ltr">source</code> or <code translate="no" dir="ltr">.</code> command. </p> </td> </tr> <tr> <td id="sh_binary.env_inherit"> <code translate="no" dir="ltr">env_inherit</code> </td> <td> <p>List of strings; default is <code translate="no" dir="ltr">[]</code></p> </td> </tr> </tbody> </table> <h2 id="sh_library" data-text="     sh_library   " tabindex="-1"> sh_library </h2>  
<devsite-code><pre class="rule-signature" translate="no" dir="ltr" is-upgraded>sh_library(<a href="#sh_library.name">name</a>, <a href="#sh_library.deps">deps</a>, <a href="#sh_library.srcs">srcs</a>, <a href="common-definitions.html#typical.data">data</a>, <a href="common-definitions.html#common.compatible_with">compatible_with</a>, <a href="common-definitions.html#common.deprecation">deprecation</a>, <a href="common-definitions.html#common.distribs">distribs</a>, <a href="common-definitions.html#common.exec_compatible_with">exec_compatible_with</a>, <a href="common-definitions.html#common.exec_properties">exec_properties</a>, <a href="common-definitions.html#common.features">features</a>, <a href="common-definitions.html#common.restricted_to">restricted_to</a>, <a href="common-definitions.html#common.tags">tags</a>, <a href="common-definitions.html#common.target_compatible_with">target_compatible_with</a>, <a href="common-definitions.html#common.testonly">testonly</a>, <a href="common-definitions.html#common.toolchains">toolchains</a>, <a href="common-definitions.html#common.visibility">visibility</a>)</pre></devsite-code> <p> The main use for this rule is to aggregate together a logical "library" consisting of related scripts—programs in an interpreted language that does not require compilation or linking, such as the Bourne shell—and any data those programs need at run-time. Such "libraries" can then be used from the <code translate="no" dir="ltr">data</code> attribute of one or more <code translate="no" dir="ltr">sh_binary</code> rules. </p> <p> You can use the <a href="general.html#filegroup"><code translate="no" dir="ltr">filegroup</code></a> rule to aggregate data files. </p> <p> In interpreted programming languages, there's not always a clear distinction between "code" and "data": after all, the program is just "data" from the interpreter's point of view. For this reason this rule has three attributes which are all essentially equivalent: <code translate="no" dir="ltr">srcs</code>, <code translate="no" dir="ltr">deps</code> and <code translate="no" dir="ltr">data</code>. The current implementation does not distinguish between the elements of these lists. All three attributes accept rules, source files and generated files. It is however good practice to use the attributes for their usual purpose (as with other rules). </p> <h4 id="sh_library_examples" data-text="Examples" tabindex="-1">Examples</h4> 
<devsite-code><pre class="code" translate="no" dir="ltr" is-upgraded>
sh_library(
    name = "foo",
    data = [
        ":foo_service_script",  # an sh_binary with srcs
        ":deploy_foo",  # another sh_binary with srcs
    ],
)
</pre></devsite-code> <h3 id="sh_library_args" data-text="Arguments" tabindex="-1">Arguments</h3> <table class="table table-condensed table-bordered table-params"> <colgroup> <col class="col-param"> <col class="param-description"> </colgroup> <thead> <tr> <th colspan="2">Attributes</th> </tr> </thead> <tbody> <tr> <td id="sh_library.name"><code translate="no" dir="ltr">name</code></td> <td> <p><a href="https://bazel.build/versions/8.0.0/concepts/labels#target-names">Name</a>; required</p> <p>A unique name for this target.</p> </td> </tr> <tr> <td id="sh_library.deps"> <code translate="no" dir="ltr">deps</code> </td> <td> <p>List of <a href="https://bazel.build/versions/8.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> The list of "library" targets to be aggregated into this target. See general comments about <code translate="no" dir="ltr">deps</code> at <a href="common-definitions.html#typical.deps">Typical attributes defined by most build rules</a>. <p> This attribute should be used to list other <code translate="no" dir="ltr">sh_library</code> rules that provide interpreted program source code depended on by the code in <code translate="no" dir="ltr">srcs</code>. The files provided by these rules will be present among the <code translate="no" dir="ltr">runfiles</code> of this target. </p> </td> </tr> <tr> <td id="sh_library.srcs"> <code translate="no" dir="ltr">srcs</code> </td> <td> <p>List of <a href="https://bazel.build/versions/8.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> The list of input files. <p> This attribute should be used to list shell script source files that belong to this library. Scripts can load other scripts using the shell's <code translate="no" dir="ltr">source</code> or <code translate="no" dir="ltr">.</code> command. </p> </td> </tr> </tbody> </table> <h2 id="sh_test" data-text="     sh_test   " tabindex="-1"> sh_test </h2>  
<devsite-code><pre class="rule-signature" translate="no" dir="ltr" is-upgraded>sh_test(<a href="#sh_test.name">name</a>, <a href="#sh_test.deps">deps</a>, <a href="#sh_test.srcs">srcs</a>, <a href="common-definitions.html#typical.data">data</a>, <a href="common-definitions.html#test.args">args</a>, <a href="common-definitions.html#common.compatible_with">compatible_with</a>, <a href="common-definitions.html#common.deprecation">deprecation</a>, <a href="common-definitions.html#common.distribs">distribs</a>, <a href="common-definitions.html#test.env">env</a>, <a href="common-definitions.html#test.env_inherit">env_inherit</a>, <a href="common-definitions.html#common.exec_compatible_with">exec_compatible_with</a>, <a href="common-definitions.html#common.exec_properties">exec_properties</a>, <a href="common-definitions.html#common.features">features</a>, <a href="common-definitions.html#test.flaky">flaky</a>, <a href="common-definitions.html#test.local">local</a>, <a href="common-definitions.html#common.restricted_to">restricted_to</a>, <a href="common-definitions.html#test.shard_count">shard_count</a>, <a href="common-definitions.html#test.size">size</a>, <a href="common-definitions.html#common.tags">tags</a>, <a href="common-definitions.html#common.target_compatible_with">target_compatible_with</a>, <a href="common-definitions.html#common.testonly">testonly</a>, <a href="common-definitions.html#test.timeout">timeout</a>, <a href="common-definitions.html#common.toolchains">toolchains</a>, <a href="common-definitions.html#common.visibility">visibility</a>)</pre></devsite-code> <p> The <code translate="no" dir="ltr">sh_binary</code> rule is used to declare executable shell scripts. (<code translate="no" dir="ltr">sh_binary</code> is a misnomer: its outputs aren't necessarily binaries.) This rule ensures that all dependencies are built, and appear in the <code translate="no" dir="ltr">runfiles</code> area at execution time. We recommend that you name your <code translate="no" dir="ltr">sh_binary()</code> rules after the name of the script minus the extension (e.g. <code translate="no" dir="ltr">.sh</code>); the rule name and the file name must be distinct. <code translate="no" dir="ltr">sh_binary</code> respects shebangs, so any available interpreter may be used (eg. <code translate="no" dir="ltr">#!/bin/zsh</code>) </p> <h4 id="sh_binary_examples" data-text="Example" tabindex="-1">Example</h4> <p>For a simple shell script with no dependencies and some data files: </p> 
<devsite-code><pre class="code" translate="no" dir="ltr" is-upgraded>
sh_binary(
    name = "foo",
    srcs = ["foo.sh"],
    data = glob(["datafiles/*.txt"]),
)
</pre></devsite-code> <h3 id="sh_test_args" data-text="Arguments" tabindex="-1">Arguments</h3> <table class="table table-condensed table-bordered table-params"> <colgroup> <col class="col-param"> <col class="param-description"> </colgroup> <thead> <tr> <th colspan="2">Attributes</th> </tr> </thead> <tbody> <tr> <td id="sh_test.name"><code translate="no" dir="ltr">name</code></td> <td> <p><a href="https://bazel.build/versions/8.0.0/concepts/labels#target-names">Name</a>; required</p> <p>A unique name for this target.</p> </td> </tr> <tr> <td id="sh_test.deps"> <code translate="no" dir="ltr">deps</code> </td> <td> <p>List of <a href="https://bazel.build/versions/8.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> The list of "library" targets to be aggregated into this target. See general comments about <code translate="no" dir="ltr">deps</code> at <a href="common-definitions.html#typical.deps">Typical attributes defined by most build rules</a>. <p> This attribute should be used to list other <code translate="no" dir="ltr">sh_library</code> rules that provide interpreted program source code depended on by the code in <code translate="no" dir="ltr">srcs</code>. The files provided by these rules will be present among the <code translate="no" dir="ltr">runfiles</code> of this target. </p> </td> </tr> <tr> <td id="sh_test.srcs"> <code translate="no" dir="ltr">srcs</code> </td> <td> <p>List of <a href="https://bazel.build/versions/8.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> The list of input files. <p> This attribute should be used to list shell script source files that belong to this library. Scripts can load other scripts using the shell's <code translate="no" dir="ltr">source</code> or <code translate="no" dir="ltr">.</code> command. </p> </td> </tr> </tbody> </table>  </div>  <devsite-feedback position="footer" project-name="Bazel" product-id="5052038" bucket="https-bazel-build" context="" version="t-devsite-webserver-20250107-r00-rc00.466129660839327169" data-label="Send Feedback Button" track-type="feedback" track-name="sendFeedbackLink" track-metadata-position="footer" class="nocontent" project-icon="https://www.gstatic.com/devrel-devsite/prod/vda41147226ae308b24384f785d31d739107d2716272d99cd11c490ff3892954d/bazel/images/touchicon-180.png"> <button> Send feedback </button> </devsite-feedback>  </article> <devsite-content-footer class="nocontent"> <p>Except as otherwise noted, the content of this page is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 License</a>, and code samples are licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 License</a>. For details, see the <a href="https://developers.google.com/site-policies">Google Developers Site Policies</a>. Java is a registered trademark of Oracle and/or its affiliates.</p> <p>Last updated 2024-12-10 UTC.</p> </devsite-content-footer> <devsite-notification> </devsite-notification> <div class="devsite-content-data"> <template class="devsite-thumb-rating-feedback"> <devsite-feedback position="thumb-rating" project-name="Bazel" product-id="5052038" bucket="https-bazel-build" context="" version="t-devsite-webserver-20250107-r00-rc00.466129660839327169" data-label="Send Feedback Button" track-type="feedback" track-name="sendFeedbackLink" track-metadata-position="thumb-rating" class="nocontent" project-icon="https://www.gstatic.com/devrel-devsite/prod/vda41147226ae308b24384f785d31d739107d2716272d99cd11c490ff3892954d/bazel/images/touchicon-180.png"> <button> Need to tell us more? </button> </devsite-feedback> </template> <template class="devsite-content-data-template"> [[["Easy to understand","easyToUnderstand","thumb-up"],["Solved my problem","solvedMyProblem","thumb-up"],["Other","otherUp","thumb-up"]],[["Missing the information I need","missingTheInformationINeed","thumb-down"],["Too complicated / too many steps","tooComplicatedTooManySteps","thumb-down"],["Out of date","outOfDate","thumb-down"],["Samples / code issue","samplesCodeIssue","thumb-down"],["Other","otherDown","thumb-down"]],["Last updated 2024-12-10 UTC."],[],[]] </template> </div><div class="_attribution">
  <p class="_attribution-p">
    Licensed under the Creative Commons Attribution 4.0 License, and code samples are licensed under the Apache 2.0 License.<br>
    <a href="https://bazel.build/versions/8.0.0/reference/be/shell" class="_attribution-link">https://bazel.build/versions/8.0.0/reference/be/shell</a>
  </p>
</div>
