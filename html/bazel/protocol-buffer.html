<article class="devsite-article">  <devsite-feedback position="header" project-name="Bazel" product-id="5052038" bucket="https-bazel-build" context="" version="t-devsite-webserver-20250107-r00-rc00.466129660839327169" data-label="Send Feedback Button" track-type="feedback" track-name="sendFeedbackLink" track-metadata-position="header" class="nocontent" project-icon="https://www.gstatic.com/devrel-devsite/prod/vda41147226ae308b24384f785d31d739107d2716272d99cd11c490ff3892954d/bazel/images/touchicon-180.png"> <button> Send feedback </button> </devsite-feedback> <h1 class="devsite-page-title" tabindex="-1"> Protocol Buffer Rules </h1>  <div class="devsite-page-title-meta"><devsite-view-release-notes></devsite-view-release-notes></div>  <div class="devsite-article-body clearfix
  ">       <h2 id="rules" data-text="Rules" tabindex="-1">Rules</h2> <ul> <li> <a href="#cc_proto_library"> cc_proto_library </a> </li> <li> <a href="#java_lite_proto_library"> java_lite_proto_library </a> </li> <li> <a href="#java_proto_library"> java_proto_library </a> </li> <li> <a href="#proto_library"> proto_library </a> </li> <li> <a href="#py_proto_library"> py_proto_library </a> </li> <li> <a href="#proto_lang_toolchain"> proto_lang_toolchain </a> </li> <li> <a href="#proto_toolchain"> proto_toolchain </a> </li> </ul> <h2 id="cc_proto_library" data-text="     cc_proto_library   " tabindex="-1"> cc_proto_library </h2>  
<devsite-code><pre class="rule-signature" translate="no" dir="ltr" is-upgraded>cc_proto_library(<a href="#cc_proto_library.name">name</a>, <a href="#cc_proto_library.deps">deps</a>, <a href="common-definitions.html#common.compatible_with">compatible_with</a>, <a href="common-definitions.html#common.deprecation">deprecation</a>, <a href="common-definitions.html#common.distribs">distribs</a>, <a href="common-definitions.html#common.exec_compatible_with">exec_compatible_with</a>, <a href="common-definitions.html#common.exec_properties">exec_properties</a>, <a href="common-definitions.html#common.features">features</a>, <a href="common-definitions.html#common.restricted_to">restricted_to</a>, <a href="common-definitions.html#common.tags">tags</a>, <a href="common-definitions.html#common.target_compatible_with">target_compatible_with</a>, <a href="common-definitions.html#common.testonly">testonly</a>, <a href="common-definitions.html#common.toolchains">toolchains</a>, <a href="common-definitions.html#common.visibility">visibility</a>)</pre></devsite-code> <p> <code translate="no" dir="ltr">cc_proto_library</code> generates C++ code from <code translate="no" dir="ltr">.proto</code> files. </p> <p> <code translate="no" dir="ltr">deps</code> must point to <a href="protocol-buffer.html#proto_library"><code translate="no" dir="ltr">proto_library
</code></a> rules. </p> <p> Example: </p> 
<devsite-code><pre translate="no" dir="ltr" is-upgraded>
<code class="lang-starlark" translate="no" dir="ltr">
cc_library(
    name = "lib",
    deps = [":foo_cc_proto"],
)

cc_proto_library(
    name = "foo_cc_proto",
    deps = [":foo_proto"],
)

proto_library(
    name = "foo_proto",
)
</code>
</pre></devsite-code> <h3 id="cc_proto_library_args" data-text="Arguments" tabindex="-1">Arguments</h3> <table class="table table-condensed table-bordered table-params"> <colgroup> <col class="col-param"> <col class="param-description"> </colgroup> <thead> <tr> <th colspan="2">Attributes</th> </tr> </thead> <tbody> <tr> <td id="cc_proto_library.name"><code translate="no" dir="ltr">name</code></td> <td> <p><a href="https://bazel.build/versions/8.0.0/concepts/labels#target-names">Name</a>; required</p> <p>A unique name for this target.</p> </td> </tr> <tr> <td id="cc_proto_library.deps"> <code translate="no" dir="ltr">deps</code> </td> <td> <p>List of <a href="https://bazel.build/versions/8.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> The list of <a href="protocol-buffer.html#proto_library"><code translate="no" dir="ltr">proto_library</code></a> rules to generate C++ code for. </td> </tr> </tbody> </table> <h2 id="java_lite_proto_library" data-text="     java_lite_proto_library   " tabindex="-1"> java_lite_proto_library </h2>  
<devsite-code><pre class="rule-signature" translate="no" dir="ltr" is-upgraded>java_lite_proto_library(<a href="#java_lite_proto_library.name">name</a>, <a href="#java_lite_proto_library.deps">deps</a>, <a href="common-definitions.html#common.compatible_with">compatible_with</a>, <a href="common-definitions.html#common.deprecation">deprecation</a>, <a href="common-definitions.html#common.distribs">distribs</a>, <a href="common-definitions.html#common.exec_compatible_with">exec_compatible_with</a>, <a href="common-definitions.html#common.exec_properties">exec_properties</a>, <a href="common-definitions.html#common.features">features</a>, <a href="common-definitions.html#common.restricted_to">restricted_to</a>, <a href="common-definitions.html#common.tags">tags</a>, <a href="common-definitions.html#common.target_compatible_with">target_compatible_with</a>, <a href="common-definitions.html#common.testonly">testonly</a>, <a href="common-definitions.html#common.toolchains">toolchains</a>, <a href="common-definitions.html#common.visibility">visibility</a>)</pre></devsite-code> <p> <code translate="no" dir="ltr">java_lite_proto_library</code> generates Java code from <code translate="no" dir="ltr">.proto</code> files. </p> <p> <code translate="no" dir="ltr">deps</code> must point to <a href="protocol-buffer.html#proto_library"><code translate="no" dir="ltr">proto_library
</code></a> rules. </p> <p> Example: </p> 
<devsite-code><pre class="code" translate="no" dir="ltr" is-upgraded>
<code class="lang-starlark" translate="no" dir="ltr">
java_library(
    name = "lib",
    runtime_deps = [":foo"],
)

java_lite_proto_library(
    name = "foo",
    deps = [":bar"],
)

proto_library(
    name = "bar",
)
</code>
</pre></devsite-code> <h3 id="java_lite_proto_library_args" data-text="Arguments" tabindex="-1">Arguments</h3> <table class="table table-condensed table-bordered table-params"> <colgroup> <col class="col-param"> <col class="param-description"> </colgroup> <thead> <tr> <th colspan="2">Attributes</th> </tr> </thead> <tbody> <tr> <td id="java_lite_proto_library.name"><code translate="no" dir="ltr">name</code></td> <td> <p><a href="https://bazel.build/versions/8.0.0/concepts/labels#target-names">Name</a>; required</p> <p>A unique name for this target.</p> </td> </tr> <tr> <td id="java_lite_proto_library.deps"> <code translate="no" dir="ltr">deps</code> </td> <td> <p>List of <a href="https://bazel.build/versions/8.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> The list of <a href="protocol-buffer.html#proto_library"><code translate="no" dir="ltr">proto_library</code></a> rules to generate Java code for. </td> </tr> </tbody> </table> <h2 id="java_proto_library" data-text="     java_proto_library   " tabindex="-1"> java_proto_library </h2>  
<devsite-code><pre class="rule-signature" translate="no" dir="ltr" is-upgraded>java_proto_library(<a href="#java_proto_library.name">name</a>, <a href="#java_proto_library.deps">deps</a>, <a href="common-definitions.html#common.compatible_with">compatible_with</a>, <a href="common-definitions.html#common.deprecation">deprecation</a>, <a href="common-definitions.html#common.distribs">distribs</a>, <a href="common-definitions.html#common.exec_compatible_with">exec_compatible_with</a>, <a href="common-definitions.html#common.exec_properties">exec_properties</a>, <a href="common-definitions.html#common.features">features</a>, <a href="common-definitions.html#typical.licenses">licenses</a>, <a href="common-definitions.html#common.restricted_to">restricted_to</a>, <a href="common-definitions.html#common.tags">tags</a>, <a href="common-definitions.html#common.target_compatible_with">target_compatible_with</a>, <a href="common-definitions.html#common.testonly">testonly</a>, <a href="common-definitions.html#common.toolchains">toolchains</a>, <a href="common-definitions.html#common.visibility">visibility</a>)</pre></devsite-code> <p> <code translate="no" dir="ltr">java_proto_library</code> generates Java code from <code translate="no" dir="ltr">.proto</code> files. </p> <p> <code translate="no" dir="ltr">deps</code> must point to <a href="protocol-buffer.html#proto_library"><code translate="no" dir="ltr">proto_library
</code></a> rules. </p> <p> Example: </p> 
<devsite-code><pre class="code" translate="no" dir="ltr" is-upgraded>
<code class="lang-starlark" translate="no" dir="ltr">
java_library(
    name = "lib",
    runtime_deps = [":foo_java_proto"],
)

java_proto_library(
    name = "foo_java_proto",
    deps = [":foo_proto"],
)

proto_library(
    name = "foo_proto",
)
</code>
</pre></devsite-code> <h3 id="java_proto_library_args" data-text="Arguments" tabindex="-1">Arguments</h3> <table class="table table-condensed table-bordered table-params"> <colgroup> <col class="col-param"> <col class="param-description"> </colgroup> <thead> <tr> <th colspan="2">Attributes</th> </tr> </thead> <tbody> <tr> <td id="java_proto_library.name"><code translate="no" dir="ltr">name</code></td> <td> <p><a href="https://bazel.build/versions/8.0.0/concepts/labels#target-names">Name</a>; required</p> <p>A unique name for this target.</p> </td> </tr> <tr> <td id="java_proto_library.deps"> <code translate="no" dir="ltr">deps</code> </td> <td> <p>List of <a href="https://bazel.build/versions/8.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> The list of <a href="protocol-buffer.html#proto_library"><code translate="no" dir="ltr">proto_library</code></a> rules to generate Java code for. </td> </tr> </tbody> </table> <h2 id="proto_library" data-text="     proto_library   " tabindex="-1"> proto_library </h2>  
<devsite-code><pre class="rule-signature" translate="no" dir="ltr" is-upgraded>proto_library(<a href="#proto_library.name">name</a>, <a href="#proto_library.deps">deps</a>, <a href="#proto_library.srcs">srcs</a>, <a href="common-definitions.html#typical.data">data</a>, <a href="#proto_library.allow_exports">allow_exports</a>, <a href="common-definitions.html#common.compatible_with">compatible_with</a>, <a href="common-definitions.html#common.deprecation">deprecation</a>, <a href="common-definitions.html#common.distribs">distribs</a>, <a href="common-definitions.html#common.exec_compatible_with">exec_compatible_with</a>, <a href="common-definitions.html#common.exec_properties">exec_properties</a>, <a href="#proto_library.exports">exports</a>, <a href="common-definitions.html#common.features">features</a>, <a href="#proto_library.import_prefix">import_prefix</a>, <a href="common-definitions.html#typical.licenses">licenses</a>, <a href="common-definitions.html#common.restricted_to">restricted_to</a>, <a href="#proto_library.strip_import_prefix">strip_import_prefix</a>, <a href="common-definitions.html#common.tags">tags</a>, <a href="common-definitions.html#common.target_compatible_with">target_compatible_with</a>, <a href="common-definitions.html#common.testonly">testonly</a>, <a href="common-definitions.html#common.toolchains">toolchains</a>, <a href="common-definitions.html#common.visibility">visibility</a>)</pre></devsite-code> <p>If using Bazel, please load the rule from <a href="https://github.com/bazelbuild/rules_proto"> https://github.com/bazelbuild/rules_proto</a>. </p>
<p>Use <code translate="no" dir="ltr">proto_library</code> to define libraries of protocol buffers which may be used from multiple languages. A <code translate="no" dir="ltr">proto_library</code> may be listed in the <code translate="no" dir="ltr">deps</code> clause of supported rules, such as <code translate="no" dir="ltr">java_proto_library</code>. </p>
<p>When compiled on the command-line, a <code translate="no" dir="ltr">proto_library</code> creates a file named <code translate="no" dir="ltr">foo-descriptor-set.proto.bin</code>, which is the descriptor set for the messages the rule srcs. The file is a serialized <code translate="no" dir="ltr">FileDescriptorSet</code>, which is described in <a href="https://developers.google.com/protocol-buffers/docs/techniques#self-description"> https://developers.google.com/protocol-buffers/docs/techniques#self-description</a>. </p>
<p>It only contains information about the <code translate="no" dir="ltr">.proto</code> files directly mentioned by a <code translate="no" dir="ltr">proto_library</code> rule; the collection of transitive descriptor sets is available through the <code translate="no" dir="ltr">[ProtoInfo].transitive_descriptor_sets</code> Starlark provider. See documentation in <code translate="no" dir="ltr">proto_info.bzl</code>. </p>
<p>Recommended code organization: </p>
<ul> <li>One <code translate="no" dir="ltr">proto_library</code> rule per <code translate="no" dir="ltr">.proto</code> file. </li>
<li>A file named <code translate="no" dir="ltr">foo.proto</code> will be in a rule named <code translate="no" dir="ltr">foo_proto</code>, which is located in the same package. </li>
<li>A <code translate="no" dir="ltr">[language]_proto_library</code> that wraps a <code translate="no" dir="ltr">proto_library</code> named <code translate="no" dir="ltr">foo_proto</code> should be called <code translate="no" dir="ltr">foo_[language]_proto</code>, and be located in the same package. </li>
</ul> <h3 id="proto_library_args" data-text="Arguments" tabindex="-1">Arguments</h3> <table class="table table-condensed table-bordered table-params"> <colgroup> <col class="col-param"> <col class="param-description"> </colgroup> <thead> <tr> <th colspan="2">Attributes</th> </tr> </thead> <tbody> <tr> <td id="proto_library.name"><code translate="no" dir="ltr">name</code></td> <td> <p><a href="https://bazel.build/versions/8.0.0/concepts/labels#target-names">Name</a>; required</p> <p>A unique name for this target.</p> </td> </tr> <tr> <td id="proto_library.deps"> <code translate="no" dir="ltr">deps</code> </td> <td> <p>List of <a href="https://bazel.build/versions/8.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> The list of other <code translate="no" dir="ltr">proto_library</code> rules that the target depends upon. A <code translate="no" dir="ltr">proto_library</code> may only depend on other <code translate="no" dir="ltr">proto_library</code> targets. It may not depend on language-specific libraries. </td> </tr> <tr> <td id="proto_library.srcs"> <code translate="no" dir="ltr">srcs</code> </td> <td> <p>List of <a href="https://bazel.build/versions/8.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> The list of <code translate="no" dir="ltr">.proto</code> and <code translate="no" dir="ltr">.protodevel</code> files that are processed to create the target. This is usually a non empty list. One usecase where <code translate="no" dir="ltr">srcs</code> can be empty is an <i>alias-library</i>. This is a proto_library rule having one or more other proto_library in <code translate="no" dir="ltr">deps</code>. This pattern can be used to e.g. export a public api under a persistent name. </td> </tr> <tr> <td id="proto_library.allow_exports"> <code translate="no" dir="ltr">allow_exports</code> </td> <td> <p><a href="https://bazel.build/versions/8.0.0/concepts/labels">Label</a>; default is <code translate="no" dir="ltr">None</code></p> An optional allowlist that prevents proto library to be reexported or used in lang_proto_library that is not in one of the listed packages. </td> </tr> <tr> <td id="proto_library.exports"> <code translate="no" dir="ltr">exports</code> </td> <td> <p>List of <a href="https://bazel.build/versions/8.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> List of proto_library targets that can be referenced via "import public" in the proto source. It's an error if you use "import public" but do not list the corresponding library in the exports attribute. Note that you have list the library both in deps and exports since not all lang_proto_library implementations have been changed yet. </td> </tr> <tr> <td id="proto_library.import_prefix"> <code translate="no" dir="ltr">import_prefix</code> </td> <td> <p>String; default is <code translate="no" dir="ltr">""</code></p> The prefix to add to the paths of the .proto files in this rule. <p>When set, the .proto source files in the <code translate="no" dir="ltr">srcs</code> attribute of this rule are accessible at is the value of this attribute prepended to their repository-relative path. </p>
<p>The prefix in the <code translate="no" dir="ltr">strip_import_prefix</code> attribute is removed before this prefix is added. </p>
</td> </tr> <tr> <td id="proto_library.strip_import_prefix"> <code translate="no" dir="ltr">strip_import_prefix</code> </td> <td> <p>String; default is <code translate="no" dir="ltr">"/"</code></p> The prefix to strip from the paths of the .proto files in this rule. <p>When set, .proto source files in the <code translate="no" dir="ltr">srcs</code> attribute of this rule are accessible at their path with this prefix cut off. </p>
<p>If it's a relative path (not starting with a slash), it's taken as a package-relative one. If it's an absolute one, it's understood as a repository-relative path. </p>
<p>The prefix in the <code translate="no" dir="ltr">import_prefix</code> attribute is added after this prefix is stripped. </p>
</td> </tr> </tbody> </table> <h2 id="py_proto_library" data-text="     py_proto_library   " tabindex="-1"> py_proto_library </h2>  
<devsite-code><pre class="rule-signature" translate="no" dir="ltr" is-upgraded>py_proto_library(<a href="#py_proto_library.name">name</a>, <a href="#py_proto_library.deps">deps</a>, <a href="common-definitions.html#common.compatible_with">compatible_with</a>, <a href="common-definitions.html#common.deprecation">deprecation</a>, <a href="common-definitions.html#common.distribs">distribs</a>, <a href="common-definitions.html#common.exec_compatible_with">exec_compatible_with</a>, <a href="common-definitions.html#common.exec_properties">exec_properties</a>, <a href="common-definitions.html#common.features">features</a>, <a href="common-definitions.html#common.restricted_to">restricted_to</a>, <a href="common-definitions.html#common.tags">tags</a>, <a href="common-definitions.html#common.target_compatible_with">target_compatible_with</a>, <a href="common-definitions.html#common.testonly">testonly</a>, <a href="common-definitions.html#common.toolchains">toolchains</a>, <a href="common-definitions.html#common.visibility">visibility</a>)</pre></devsite-code> Use `py_proto_library` to generate Python libraries from `.proto` files. The convention is to name the `py_proto_library` rule `foo_py_pb2`, when it is wrapping `proto_library` rule `foo_proto`. `deps` must point to a `proto_library` rule. Example: ```starlark py_library( name = "lib", deps = [":foo_py_pb2"], ) py_proto_library( name = "foo_py_pb2", deps = [":foo_proto"], ) proto_library( name = "foo_proto", srcs = ["foo.proto"], ) ``` <h3 id="py_proto_library_args" data-text="Arguments" tabindex="-1">Arguments</h3> <table class="table table-condensed table-bordered table-params"> <colgroup> <col class="col-param"> <col class="param-description"> </colgroup> <thead> <tr> <th colspan="2">Attributes</th> </tr> </thead> <tbody> <tr> <td id="py_proto_library.name"><code translate="no" dir="ltr">name</code></td> <td> <p><a href="https://bazel.build/versions/8.0.0/concepts/labels#target-names">Name</a>; required</p> <p>A unique name for this target.</p> </td> </tr> <tr> <td id="py_proto_library.deps"> <code translate="no" dir="ltr">deps</code> </td> <td> <p>List of <a href="https://bazel.build/versions/8.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> The list of `proto_library` rules to generate Python libraries for. Usually this is just the one target: the proto library of interest. It can be any target providing `ProtoInfo`. </td> </tr> </tbody> </table> <h2 id="proto_lang_toolchain" data-text="     proto_lang_toolchain   " tabindex="-1"> proto_lang_toolchain </h2>  
<devsite-code><pre class="rule-signature" translate="no" dir="ltr" is-upgraded>proto_lang_toolchain(<a href="#proto_lang_toolchain.name">name</a>, <a href="#proto_lang_toolchain.allowlist_different_package">allowlist_different_package</a>, <a href="#proto_lang_toolchain.blacklisted_protos">blacklisted_protos</a>, <a href="#proto_lang_toolchain.command_line">command_line</a>, <a href="common-definitions.html#common.compatible_with">compatible_with</a>, <a href="common-definitions.html#common.deprecation">deprecation</a>, <a href="common-definitions.html#common.distribs">distribs</a>, <a href="common-definitions.html#common.exec_compatible_with">exec_compatible_with</a>, <a href="common-definitions.html#common.exec_properties">exec_properties</a>, <a href="common-definitions.html#common.features">features</a>, <a href="#proto_lang_toolchain.mnemonic">mnemonic</a>, <a href="#proto_lang_toolchain.output_files">output_files</a>, <a href="#proto_lang_toolchain.plugin">plugin</a>, <a href="#proto_lang_toolchain.plugin_format_flag">plugin_format_flag</a>, <a href="#proto_lang_toolchain.progress_message">progress_message</a>, <a href="#proto_lang_toolchain.protoc_minimal_do_not_use">protoc_minimal_do_not_use</a>, <a href="common-definitions.html#common.restricted_to">restricted_to</a>, <a href="#proto_lang_toolchain.runtime">runtime</a>, <a href="common-definitions.html#common.tags">tags</a>, <a href="common-definitions.html#common.target_compatible_with">target_compatible_with</a>, <a href="common-definitions.html#common.testonly">testonly</a>, <a href="#proto_lang_toolchain.toolchain_type">toolchain_type</a>, <a href="common-definitions.html#common.toolchains">toolchains</a>, <a href="common-definitions.html#common.visibility">visibility</a>)</pre></devsite-code> <p>If using Bazel, please load the rule from <a href="https://github.com/bazelbuild/rules_proto"> https://github.com/bazelbuild/rules_proto</a>. </p>
<p>Specifies how a LANG_proto_library rule (e.g., <code translate="no" dir="ltr">java_proto_library</code>) should invoke the proto-compiler. Some LANG_proto_library rules allow specifying which toolchain to use using command-line flags; consult their documentation. </p>
<p>Normally you should not write those kind of rules unless you want to tune your Java compiler. </p>
<p>There's no compiler. The proto-compiler is taken from the proto_library rule we attach to. It is passed as a command-line flag to Blaze. Several features require a proto-compiler to be invoked on the proto_library rule itself. It's beneficial to enforce the compiler that LANG_proto_library uses is the same as the one <code translate="no" dir="ltr">proto_library</code> does. </p>
<h4 id="examples" data-text="Examples" tabindex="-1">Examples</h4> <p>A simple example would be: </p>

<devsite-code><pre translate="no" dir="ltr" is-upgraded><code class="lang-starlark" translate="no" dir="ltr">
proto_lang_toolchain(
    name = "javalite_toolchain",
    command_line = "--javalite_out=shared,immutable:$(OUT)",
    plugin = ":javalite_plugin",
    runtime = ":protobuf_lite",
)
</code></pre></devsite-code> <h3 id="proto_lang_toolchain_args" data-text="Arguments" tabindex="-1">Arguments</h3> <table class="table table-condensed table-bordered table-params"> <colgroup> <col class="col-param"> <col class="param-description"> </colgroup> <thead> <tr> <th colspan="2">Attributes</th> </tr> </thead> <tbody> <tr> <td id="proto_lang_toolchain.name"><code translate="no" dir="ltr">name</code></td> <td> <p><a href="https://bazel.build/versions/8.0.0/concepts/labels#target-names">Name</a>; required</p> <p>A unique name for this target.</p> </td> </tr> <tr> <td id="proto_lang_toolchain.allowlist_different_package"> <code translate="no" dir="ltr">allowlist_different_package</code> </td> <td> <p><a href="https://bazel.build/versions/8.0.0/concepts/labels">Label</a>; default is <code translate="no" dir="ltr">None</code></p> </td> </tr> <tr> <td id="proto_lang_toolchain.blacklisted_protos"> <code translate="no" dir="ltr">blacklisted_protos</code> </td> <td> <p>List of <a href="https://bazel.build/versions/8.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> No code will be generated for files in the <code translate="no" dir="ltr">srcs</code> attribute of <code translate="no" dir="ltr">blacklisted_protos</code>. This is used for .proto files that are already linked into proto runtimes, such as <code translate="no" dir="ltr">any.proto</code>. </td> </tr> <tr> <td id="proto_lang_toolchain.command_line"> <code translate="no" dir="ltr">command_line</code> </td> <td> <p>String; required</p> This value will be passed to proto-compiler to generate the code. Only include the parts specific to this code-generator/plugin (e.g., do not include -I parameters) <ul> <li>
<code translate="no" dir="ltr">$(OUT)</code> is LANG_proto_library-specific. The rules are expected to define how they interpret this variable. For Java, for example, $(OUT) will be replaced with the src-jar filename to create.</li> </ul> </td> </tr> <tr> <td id="proto_lang_toolchain.mnemonic"> <code translate="no" dir="ltr">mnemonic</code> </td> <td> <p>String; default is <code translate="no" dir="ltr">"GenProto"</code></p> This value will be set as the mnemonic on protoc action. </td> </tr> <tr> <td id="proto_lang_toolchain.output_files"> <code translate="no" dir="ltr">output_files</code> </td> <td> <p>String; default is <code translate="no" dir="ltr">"legacy"</code></p> Controls how <code translate="no" dir="ltr">$(OUT)</code> in <code translate="no" dir="ltr">command_line</code> is formatted, either by a path to a single file or output directory in case of multiple files. Possible values are: "single", "multiple". </td> </tr> <tr> <td id="proto_lang_toolchain.plugin"> <code translate="no" dir="ltr">plugin</code> </td> <td> <p><a href="https://bazel.build/versions/8.0.0/concepts/labels">Label</a>; default is <code translate="no" dir="ltr">None</code></p> If provided, will be made available to the action that calls the proto-compiler, and will be passed to the proto-compiler: <code translate="no" dir="ltr">--plugin=protoc-gen-PLUGIN=&lt;executable&gt;.</code> </td> </tr> <tr> <td id="proto_lang_toolchain.plugin_format_flag"> <code translate="no" dir="ltr">plugin_format_flag</code> </td> <td> <p>String; default is <code translate="no" dir="ltr">""</code></p> If provided, this value will be passed to proto-compiler to use the plugin. The value must contain a single %s which is replaced with plugin executable. <code translate="no" dir="ltr">--plugin=protoc-gen-PLUGIN=&lt;executable&gt;.</code> </td> </tr> <tr> <td id="proto_lang_toolchain.progress_message"> <code translate="no" dir="ltr">progress_message</code> </td> <td> <p>String; default is <code translate="no" dir="ltr">"Generating proto_library %{label}"</code></p> This value will be set as the progress message on protoc action. </td> </tr> <tr> <td id="proto_lang_toolchain.protoc_minimal_do_not_use"> <code translate="no" dir="ltr">protoc_minimal_do_not_use</code> </td> <td> <p><a href="https://bazel.build/versions/8.0.0/concepts/labels">Label</a>; default is <code translate="no" dir="ltr">None</code></p> </td> </tr> <tr> <td id="proto_lang_toolchain.runtime"> <code translate="no" dir="ltr">runtime</code> </td> <td> <p><a href="https://bazel.build/versions/8.0.0/concepts/labels">Label</a>; default is <code translate="no" dir="ltr">None</code></p> A language-specific library that the generated code is compiled against. The exact behavior is LANG_proto_library-specific. Java, for example, should compile against the runtime. </td> </tr> <tr> <td id="proto_lang_toolchain.toolchain_type"> <code translate="no" dir="ltr">toolchain_type</code> </td> <td> <p><a href="https://bazel.build/versions/8.0.0/concepts/labels">Label</a>; default is <code translate="no" dir="ltr">None</code></p> </td> </tr> </tbody> </table> <h2 id="proto_toolchain" data-text="     proto_toolchain   " tabindex="-1"> proto_toolchain </h2>  
<devsite-code><pre class="rule-signature" translate="no" dir="ltr" is-upgraded>proto_toolchain(<a href="#proto_toolchain.name">name</a>, <a href="#proto_toolchain.command_line">command_line</a>, <a href="common-definitions.html#common.compatible_with">compatible_with</a>, <a href="common-definitions.html#common.deprecation">deprecation</a>, <a href="common-definitions.html#common.distribs">distribs</a>, <a href="common-definitions.html#common.exec_compatible_with">exec_compatible_with</a>, <a href="common-definitions.html#common.exec_properties">exec_properties</a>, <a href="common-definitions.html#common.features">features</a>, <a href="#proto_toolchain.mnemonic">mnemonic</a>, <a href="#proto_toolchain.output_files">output_files</a>, <a href="#proto_toolchain.progress_message">progress_message</a>, <a href="#proto_toolchain.proto_compiler">proto_compiler</a>, <a href="common-definitions.html#common.restricted_to">restricted_to</a>, <a href="common-definitions.html#common.tags">tags</a>, <a href="common-definitions.html#common.target_compatible_with">target_compatible_with</a>, <a href="common-definitions.html#common.testonly">testonly</a>, <a href="common-definitions.html#common.toolchains">toolchains</a>, <a href="common-definitions.html#common.visibility">visibility</a>)</pre></devsite-code> <h3 id="proto_toolchain_args" data-text="Arguments" tabindex="-1">Arguments</h3> <table class="table table-condensed table-bordered table-params"> <colgroup> <col class="col-param"> <col class="param-description"> </colgroup> <thead> <tr> <th colspan="2">Attributes</th> </tr> </thead> <tbody> <tr> <td id="proto_toolchain.name"><code translate="no" dir="ltr">name</code></td> <td> <p><a href="https://bazel.build/versions/8.0.0/concepts/labels#target-names">Name</a>; required</p> <p>A unique name for this target.</p> </td> </tr> <tr> <td id="proto_toolchain.command_line"> <code translate="no" dir="ltr">command_line</code> </td> <td> <p>String; default is <code translate="no" dir="ltr">"--descriptor_set_out=%s"</code></p> </td> </tr> <tr> <td id="proto_toolchain.mnemonic"> <code translate="no" dir="ltr">mnemonic</code> </td> <td> <p>String; default is <code translate="no" dir="ltr">"GenProtoDescriptorSet"</code></p> </td> </tr> <tr> <td id="proto_toolchain.output_files"> <code translate="no" dir="ltr">output_files</code> </td> <td> <p>String; default is <code translate="no" dir="ltr">"single"</code></p> </td> </tr> <tr> <td id="proto_toolchain.progress_message"> <code translate="no" dir="ltr">progress_message</code> </td> <td> <p>String; default is <code translate="no" dir="ltr">"Generating Descriptor Set proto_library %{label}"</code></p> </td> </tr> <tr> <td id="proto_toolchain.proto_compiler"> <code translate="no" dir="ltr">proto_compiler</code> </td> <td> <p><a href="https://bazel.build/versions/8.0.0/concepts/labels">Label</a>; default is <code translate="no" dir="ltr">None</code></p> </td> </tr> </tbody> </table>  </div>  <devsite-feedback position="footer" project-name="Bazel" product-id="5052038" bucket="https-bazel-build" context="" version="t-devsite-webserver-20250107-r00-rc00.466129660839327169" data-label="Send Feedback Button" track-type="feedback" track-name="sendFeedbackLink" track-metadata-position="footer" class="nocontent" project-icon="https://www.gstatic.com/devrel-devsite/prod/vda41147226ae308b24384f785d31d739107d2716272d99cd11c490ff3892954d/bazel/images/touchicon-180.png"> <button> Send feedback </button> </devsite-feedback>  </article> <devsite-content-footer class="nocontent"> <p>Except as otherwise noted, the content of this page is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 License</a>, and code samples are licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 License</a>. For details, see the <a href="https://developers.google.com/site-policies">Google Developers Site Policies</a>. Java is a registered trademark of Oracle and/or its affiliates.</p> <p>Last updated 2024-12-10 UTC.</p> </devsite-content-footer> <devsite-notification> </devsite-notification> <div class="devsite-content-data"> <template class="devsite-thumb-rating-feedback"> <devsite-feedback position="thumb-rating" project-name="Bazel" product-id="5052038" bucket="https-bazel-build" context="" version="t-devsite-webserver-20250107-r00-rc00.466129660839327169" data-label="Send Feedback Button" track-type="feedback" track-name="sendFeedbackLink" track-metadata-position="thumb-rating" class="nocontent" project-icon="https://www.gstatic.com/devrel-devsite/prod/vda41147226ae308b24384f785d31d739107d2716272d99cd11c490ff3892954d/bazel/images/touchicon-180.png"> <button> Need to tell us more? </button> </devsite-feedback> </template> <template class="devsite-content-data-template"> [[["Easy to understand","easyToUnderstand","thumb-up"],["Solved my problem","solvedMyProblem","thumb-up"],["Other","otherUp","thumb-up"]],[["Missing the information I need","missingTheInformationINeed","thumb-down"],["Too complicated / too many steps","tooComplicatedTooManySteps","thumb-down"],["Out of date","outOfDate","thumb-down"],["Samples / code issue","samplesCodeIssue","thumb-down"],["Other","otherDown","thumb-down"]],["Last updated 2024-12-10 UTC."],[],[]] </template> </div><div class="_attribution">
  <p class="_attribution-p">
    Licensed under the Creative Commons Attribution 4.0 License, and code samples are licensed under the Apache 2.0 License.<br>
    <a href="https://bazel.build/versions/8.0.0/reference/be/protocol-buffer" class="_attribution-link">https://bazel.build/versions/8.0.0/reference/be/protocol-buffer</a>
  </p>
</div>
