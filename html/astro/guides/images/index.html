<h1 class="content-title astro-j75b3yus" id="overview">Images</h1> <p>Astro provides several ways for you to use images on your site, whether they are stored locally inside your project, linked to from an external URL, or managed in a CMS or CDN!</p> <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="where-to-store-images">Where to store images</h2></div> <div tabindex="-1" class="heading-wrapper level-h3"><h3 id="src-vs-public">
<code>src/</code> vs <code>public/</code>
</h3></div> <p>We recommend that local images are kept in <code>src/</code> when possible so that Astro can transform, optimize and bundle them. Files in the <code>/public</code> directory are always served or copied into the build folder as-is, with no processing.</p> <p>Your local images stored in <code>src/</code> can be used by all files in your project: <code>.astro</code>, <code>.md</code>, <code>.mdx</code>, <code>.mdoc</code>, and other UI frameworks. Images can be stored in any folder, including alongside your content.</p> <p>Store your images in the <code>public/</code> folder if you want to avoid any processing or to have a direct public link to them.</p> <div tabindex="-1" class="heading-wrapper level-h3"><h3 id="remote-images">Remote images</h3></div> <p>You can also choose to store your images remotely, in a content management system (CMS) or digital asset management (DAM) platform.</p> <p>For extra protection when dealing with external sources, remote images will only be processed from <a href="#authorizing-remote-images">authorized image sources</a> specified in your configuration. However, any remote images can be displayed.</p> <p>Astro can fetch your data remotely using APIs or display images from their full URL path. See our <a href="../cms/index.html">CMS guides</a> for examples of integrating common services.</p> <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="images-in-astro-files">Images in <code>.astro</code> files</h2></div> <p>In <code>.astro</code> files, local images must be imported into the file in order to be used. Remote and <code>public/</code> images do not require importing.</p> <p>Import and use Astro’s built-in <code>&lt;Image /&gt;</code> component for optimized images using <code>astro:assets</code>. Alternatively, Astro syntax supports writing an HTML <code>&lt;img&gt;</code> tag directly, which skips image processing.</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/pages/blog/MyImages.astro</span></div>


</div> <div tabindex="-1" class="heading-wrapper level-h3"><h3 id="image--astroassets">
<code>&lt;Image /&gt;</code> (<code>astro:assets</code>)</h3></div> <p>Use the built-in <code>&lt;Image /&gt;</code> Astro component to display optimized versions of your local images and <a href="#authorizing-remote-images">configured remote images</a>.</p> <p>Images in the <code>public/</code> folder, as well as remote images not specifically configured in your project, can also be used with the Image component, but will not be processed.</p> <p><code>&lt;Image /&gt;</code> can transform a local or authorized remote image’s dimensions, file type, and quality for control over your displayed image. The resulting <code>&lt;img&gt;</code> tag includes <code>alt</code>, <code>loading</code>, and <code>decoding</code> attributes and infers image dimensions to avoid <strong>Cumulative Layout Shift (CLS)</strong>.</p> <aside class="content tip astro-duqfclob" aria-label="What is Cumulative Layout Shift?"> <p class="title astro-duqfclob" aria-hidden="true">  What is Cumulative Layout Shift? </p> <section class="astro-duqfclob"> <p><a href="https://web.dev/cls/">Cumulative Layout Shift (CLS)</a> is a Core Web Vital metric for measuring how much content shifted on your page during loading. The <code>&lt;Image /&gt;</code> component optimizes for CLS by automatically setting the correct <code>width</code> and <code>height</code> for your local images.</p> </section> </aside> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/components/MyComponent.astro</span></div>


</div>  <p>Currently, the built-in assets feature does not include a <code>&lt;Picture /&gt;</code> component.</p> <p>Instead, you can <a href="#generating-images-with-getimage">generate images or custom components using <code>getImage()</code></a> that use the HTML image attributes <code>srcset</code> and <code>sizes</code> or the <code>&lt;picture&gt;</code> tag <a href="https://developer.mozilla.org/en-US/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images#art_direction">for art direction or to create responsive images</a>.</p> <div tabindex="-1" class="heading-wrapper level-h4"><h4 id="properties">Properties</h4></div> <div tabindex="-1" class="heading-wrapper level-h5"><h5 id="src-required">src (required)</h5></div> <p>The format of the <code>src</code> value of your image file depends on where your image file is located:</p> <ul> <li> <p><strong>Local images in <code>src/</code></strong> - you must <strong>also import the image</strong> using a relative file path or configure and use an <a href="../aliases/index.html">import alias</a>. Then use the import name as the <code>src</code> value:</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/pages/index.astro</span></div>


</div> </li> <li> <p><strong>Images in the <code>public/</code> folder</strong> - use the image’s <strong>file path relative to the public folder</strong>:</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/pages/index.astro</span></div>


</div> </li> <li> <p><strong>Remote images</strong> - use the image’s <strong>full URL</strong> as the property value:</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/pages/index.astro</span></div>


</div> </li> </ul> <div tabindex="-1" class="heading-wrapper level-h5"><h5 id="alt-required">alt (required)</h5></div> <p>Use the required <code>alt</code> attribute to provide a string of <a href="https://www.w3.org/WAI/tutorials/images/">descriptive alt text</a> for images.</p> <p>If an image is merely decorative (i.e. doesn’t contribute to the understanding of the page), set <code>alt=""</code> so that screen readers and other assistive technologies know to ignore the image.</p> <div tabindex="-1" class="heading-wrapper level-h5"><h5 id="width-and-height-required-for-public-and-remote-images">width and height (required for <code>public/</code> and remote images)</h5></div> <p>These properties define the dimensions to use for the image.</p> <p>When using local images in their original aspect ratio, the <code>width</code> and <code>height</code> can be automatically inferred from the source file and are optional.</p> <p>However, both of these properties are required for remote images and images stored in your <code>public/</code> folder as Astro is unable to analyze these files.</p> <div tabindex="-1" class="heading-wrapper level-h5"><h5 id="format">format</h5></div> <p>You can optionally state the <a href="https://developer.mozilla.org/en-US/docs/Web/Media/Formats/Image_types#common_image_file_types">image file type</a> output to be used.</p> <p>By default, the <code>&lt;Image /&gt;</code> component will produce a <code>.webp</code> file.</p> <div tabindex="-1" class="heading-wrapper level-h5"><h5 id="quality">quality</h5></div> <p><code>quality</code> is an optional property that can either be:</p> <ul> <li>a preset (<code>low</code>, <code>mid</code>, <code>high</code>, <code>max</code>) that is automatically normalized between formats.</li> <li>a number from <code>0</code> to <code>100</code> (interpreted differently between formats).</li> </ul> <div tabindex="-1" class="heading-wrapper level-h5"><h5 id="additional-properties">Additional properties</h5></div> <p>In addition to the properties above, the <code>&lt;Image /&gt;</code> component accepts all properties accepted by the HTML <code>&lt;img&gt;</code> tag.</p> <p>For example, you can provide a <code>class</code> to the final <code>&lt;img&gt;</code> element.</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/pages/index.astro</span></div>


</div>  <div tabindex="-1" class="heading-wrapper level-h4"><h4 id="setting-default-values">Setting Default Values</h4></div> <p>Currently, there is no way to specify default values for all <code>&lt;Image /&gt;</code> components. Required attributes should be set on each individual component.</p> <p>As an alternative, you can wrap these components in another Astro component for reuse. For example, you could create a component for your blog post images:</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/components/BlogPostImage.astro</span></div>


</div> <div tabindex="-1" class="heading-wrapper level-h3"><h3 id="img"><code>&lt;img&gt;</code></h3></div> <p>The <a href="../../core-concepts/astro-syntax/index.html">Astro template syntax</a> also supports writing an <code>&lt;img&gt;</code> tag directly, with full control over its final output. These images will not be processed and optimized.</p> <p>It accepts all HTML <code>&lt;img&gt;</code> tag properties, and the only required property is <code>src</code>.</p> <div tabindex="-1" class="heading-wrapper level-h4"><h4 id="local-images-in-src">Local images in <code>src/</code>
</h4></div> <p>Local images must be <strong>imported from the relative path</strong> from the existing <code>.astro</code> file, or configure and use an <a href="../aliases/index.html">import alias</a>. Then, you can access the image’s <code>src</code> and other properties to use in the <code>&lt;img&gt;</code> tag.</p> <p>For example, use the image’s own <code>height</code> and <code>width</code> properties to avoid CLS and improve Core Web Vitals.</p>  <p>Imported image assets match the following signature:</p>  <div tabindex="-1" class="heading-wrapper level-h4"><h4 id="images-in-public">Images in <code>public/</code>
</h4></div> <p>For images located within <code>public/</code> use the image’s <strong>file path relative to the public folder</strong> as the <code>src</code> value:</p>  <div tabindex="-1" class="heading-wrapper level-h4"><h4 id="remote-images-1">Remote images</h4></div> <p>For remote images, use the image’s <strong>full URL</strong> as the <code>src</code> value:</p>  <div tabindex="-1" class="heading-wrapper level-h3"><h3 id="choosing-image--vs-img">Choosing <code>&lt;Image /&gt;</code> vs <code>&lt;img&gt;</code>
</h3></div> <p>The <code>&lt;Image /&gt;</code> component optimizes your image and infers width and height (of local images) based on the original aspect ratio to avoid CLS. But, it only works with certain formats and does not provide a <code>&lt;picture&gt;</code> element, nor does it support <code>srcset</code>.</p> <p>Use the HTML <code>&lt;img&gt;</code> element when you cannot use the <code>&lt;Image /&gt;</code> component, for example:</p> <ul> <li>for unsupported image formats</li> <li>when you do not want your image optimized by Astro</li> <li>to access and change the <code>src</code> attribute dynamically client-side</li> </ul> <div tabindex="-1" class="heading-wrapper level-h3"><h3 id="authorizing-remote-images">Authorizing remote images</h3></div> <p>You can configure lists of authorized image source URL domains and patterns for image optimization using <a href="../../reference/configuration-reference/index.html#imagedomains"><code>image.domains</code></a> and <a href="../../reference/configuration-reference/index.html#imageremotepatterns"><code>image.remotePatterns</code></a>. This configuration is an extra layer of safety to protect your site when showing images from an external source.</p> <p>Remote images from other sources will not be optimized, but using the <code>&lt;Image /&gt;</code> component for these images will prevent Cumulative Layout Shift (CLS).</p> <p>For example, the following configuration will only allow remote images from <code>astro.build</code> to be optimized:</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">astro.config.mjs</span></div>


</div> <p>The following configuration will only allow remote images from HTTPS hosts:</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">astro.config.mjs</span></div>


</div> <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="using-images-from-a-cms-or-cdn">Using Images from a CMS or CDN</h2></div> <p>Image CDNs work with all Astro image options. Use an image’s full URL as the <code>src</code> attribute in the <code>&lt;Image /&gt;</code> component, an <code>&lt;img&gt;</code> tag, or in Markdown notation. For image optimization with remote images, also <a href="#authorizing-remote-images">configure your authorized domains or URL patterns</a>.</p> <p>Alternatively, if the CDN provides a Node.js SDK, you can use that in your project. For example, <a href="https://cloudinary.com/documentation/node_integration">Cloudinary’s SDK</a> can generate an <code>&lt;img&gt;</code> tag with the appropriate <code>src</code> for you.</p> <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="images-in-markdown-files">Images in Markdown files</h2></div> <p>Use standard Markdown <code>![alt](src)</code> syntax in your <code>.md</code> files. This syntax works with Astro’s <a href="../../reference/image-service-reference/index.html">Image Service API</a> to optimize your local images and authorized remote images.</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/pages/post-1.md</span></div>


</div> <p>The <code>&lt;img&gt;</code> tag is not supported for local images, and the <code>&lt;Image /&gt;</code> component is unavailable in <code>.md</code> files.</p> <p>If you require more control over your image attributes, we recommend using the <code>.mdx</code> file format, which allows you to include Astro’s <code>&lt;Image /&gt;</code> component or a JSX <code>&lt;img /&gt;</code> tag in addition to the Markdown syntax. Use the <a href="../integrations-guide/mdx/index.html">MDX integration</a> to add support for MDX to Astro.</p> <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="images-in-mdx-files">Images in MDX files</h2></div> <p>You can use Astro’s <code>&lt;Image /&gt;</code> component and JSX <code>&lt;img /&gt;</code> tags in your <code>.mdx</code> files by importing both the component and your image. Use them just as they are <a href="#images-in-astro-files">used in <code>.astro</code> files</a>.</p> <p>Additionally, there is support for <a href="#images-in-markdown-files">standard Markdown <code>![alt](src)</code> syntax</a> with no import required.</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/pages/post-1.mdx</span></div>


</div> <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="images-in-content-collections">Images in Content Collections</h2></div> <p>You can declare an associated image for a content collections entry, such as a blog post’s cover image, in your frontmatter using its path relative to the current folder:</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/content/blog/my-post.md</span></div>


</div> <p>The <code>image</code> helper for the content collections schema lets you validate the image metadata using Zod.</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/content/config.ts</span></div>


</div> <p>The image will be imported and transformed into metadata, allowing you to pass it as a <code>src</code> to <code>&lt;Image/&gt;</code>, <code>&lt;img&gt;</code>, or <code>getImage()</code>.</p> <p>The example below shows a blog index page that renders the cover photo and title of each blog post from the schema above:</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/pages/blog.astro</span></div>


</div> <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="images-in-ui-framework-components">Images in UI framework components</h2></div> <p>When adding images in a UI framework component, use the framework’s own image syntax to render an image (e.g. <code>&lt;img /&gt;</code> in JSX, <code>&lt;img&gt;</code> in Svelte).</p> <p>Local images must <strong>first be imported</strong> to access their <a href="#local-images-in-src">image properties</a> such as <code>src</code>.</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/components/ReactImage.jsx</span></div>


</div> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/components/SvelteImage.svelte</span></div>


</div> <div tabindex="-1" class="heading-wrapper level-h4"><h4 id="passing-the-image-component">Passing the Image component</h4></div> <p>The <code>&lt;Image /&gt;</code> component, like any other Astro component, <strong>is unavailable to UI framework components</strong>.</p> <p>But, you can pass the static content generated by <code>&lt;Image /&gt;</code> to a framework component inside a <code>.astro</code> file as children or using a <a href="../../core-concepts/framework-components/index.html#can-i-use-astro-components-inside-my-framework-components">named <code>&lt;slot/&gt;</code></a>:</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">ImageWrapper.astro</span></div>


</div> <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="generating-images-with-getimage">Generating images with <code>getImage()</code>
</h2></div> <aside class="content caution astro-duqfclob" aria-label="Caution"> <p class="title astro-duqfclob" aria-hidden="true">  Caution </p> <section class="astro-duqfclob"> <p><code>getImage()</code> relies on server-only APIs and breaks the build when used on the client.</p> </section> </aside> <p>The <code>getImage()</code> function is intended for generating images destined to be used somewhere else than directly in HTML, for example in an <a href="../../core-concepts/endpoints/index.html#server-endpoints-api-routes">API Route</a>. It also allows you to create your own custom <code>&lt;Image /&gt;</code> component.</p> <p><code>getImage()</code> takes an options object with the <a href="#properties">same properties as the Image component</a> (except <code>alt</code>).</p>  <p>It returns an object with the following properties:</p>  <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="alt-text">Alt Text</h2></div> <p>Not all users can see images in the same way, so accessibility is an especially important concern when using images. Use the <code>alt</code> attribute to provide <a href="https://www.w3.org/WAI/tutorials/images/">descriptive alt text</a> for images.</p> <p>This attribute is required for the <code>&lt;Image /&gt;</code> component. <code>&lt;Image /&gt;</code> will throw an error if no alt text is provided.</p> <p>If the image is merely decorative (i.e. doesn’t contribute to the understanding of the page), set <code>alt=""</code> so that screen readers know to ignore the image.</p> <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="default-image-service">Default image service</h2></div> <p><a href="https://github.com/lovell/sharp">Sharp</a> is the default image service used for <code>astro:assets</code>.</p> <p>If you would prefer to use <a href="https://github.com/GoogleChromeLabs/squoosh">Squoosh</a> to transform your images, update your config with the following:</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">astro.config.mjs</span></div>


</div> <aside class="content note astro-duqfclob" aria-label="Note"> <p class="title astro-duqfclob" aria-hidden="true">  Note </p> <section class="astro-duqfclob"> <p>When using a <a href="https://pnpm.io/pnpm-vs-npm#npms-flat-tree">strict package manager</a> like <code>pnpm</code>, you may need to manually install Sharp into your project even though it is an Astro dependency:</p>
<div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading">
<span class="sr-only">Terminal window</span>
</div>


</div> </section> </aside> <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="community-integrations">Community Integrations</h2></div> <p>There are several third-party <a href="https://astro.build/integrations?search=images">community image integrations</a> for optimizing and working with images in your Astro project.</p> <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="upgrade-to-v30-from-v2x">Upgrade to v3.0 from v2.x</h2></div> <p><code>astro:assets</code> is no longer behind an experimental flag in Astro v3.0.</p> <p><code>&lt;Image /&gt;</code> is now a built-in component and the previous <code>@astrojs/image</code> integration has been removed.</p> <p>These and other accompanying changes to using images in Astro may cause some breaking changes when you upgrade your Astro project from an earlier version.</p> <p>Please follow the instructions below as appropriate to upgrade an Astro v2.x project to v3.0.</p> <div tabindex="-1" class="heading-wrapper level-h3"><h3 id="upgrade-from-experimentalassets">Upgrade from <code>experimental.assets</code>
</h3></div> <p>If you had previously enabled the experimental flag for <code>astro:assets</code>, you will need to update your project for Astro v3.0 which now includes assets features by default.</p> <div tabindex="-1" class="heading-wrapper level-h4"><h4 id="remove-experimentalassets-flag">Remove <code>experimental.assets</code> flag</h4></div> <p>Remove the experimental flag:</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">astro.config.mjs</span></div>


</div> <p>If necessary, also update your <code>src/env.d.ts</code> file to replace the <code>astro/client-image</code> reference with <code>astro/client</code>:</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/env.d.ts</span></div>


</div> <div tabindex="-1" class="heading-wrapper level-h4"><h4 id="remove-the-assets-import-alias">Remove the <code>~/assets</code> import alias</h4></div> <p>This import alias is no longer included by default with <code>astro:assets</code>. If you were using this alias with experimental assets, you must convert them to relative file paths, or <a href="../aliases/index.html">create your own import aliases</a>.</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/pages/posts/post-1.astro</span></div>


</div> <div tabindex="-1" class="heading-wrapper level-h4"><h4 id="add-simple-asset-support-for-cloudflare-deno-vercel-edge-and-netlify-edge">Add simple asset support for Cloudflare, Deno, Vercel Edge and Netlify Edge</h4></div> <p>Astro v3.0 allows <code>astro:assets</code> to work without errors in Cloudflare, Deno, Vercel Edge and Netlify Edge, which do not support Astro’s built-in Squoosh and Sharp image optimization. Note that Astro does not perform any image transformation and processing in these environments. However, you can still enjoy the other benefits of using <code>astro:assets</code>, including no Cumulative Layout Shift (CLS), the enforced <code>alt</code> attribute, and a consistent authoring experience.</p> <p>If you previously avoided using <code>astro:assets</code> because of these constraints, you can now use them without issues. You can configure the no-op image service to explicitly opt-in to this behavior:</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">astro.config.mjs</span></div>


</div> <div tabindex="-1" class="heading-wrapper level-h3"><h3 id="decide-where-to-store-your-images">Decide where to store your images</h3></div> <p>See the Images guide to help you decide <a href="#where-to-store-images">where to store your images</a>. You may wish to take advantage of new options for storing your images with the added flexibility <code>astro:assets</code> brings. For example, relative images from your project <code>src/</code> can now be referenced in Markdown, MDX, and Markdoc using standard Markdown <code>![alt](src)</code> syntax.</p> <div tabindex="-1" class="heading-wrapper level-h3"><h3 id="update-existing-img-tags">Update existing <code>&lt;img&gt;</code> tags</h3></div> <p>Previously, importing an image would return a simple <code>string</code> with the path of the image. Now, imported image assets match the following signature:</p>  <p>You must update the <code>src</code> attribute of any existing <code>&lt;img&gt;</code> tags (including any <a href="#images-in-ui-framework-components">images in UI framework components</a>) and you may also update other attributes that are now available to you from the imported image.</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/components/MyComponent.astro</span></div>


</div> <div tabindex="-1" class="heading-wrapper level-h3"><h3 id="update-your-markdown-mdx-and-markdoc-files">Update your Markdown, MDX, and Markdoc files</h3></div> <p>Relative images from your project <code>src/</code> can now be referenced in Markdown, MDX, and Markdoc using standard Markdown <code>![alt](src)</code> syntax.</p> <p>This allows you to move your images from the <code>public/</code> directory to your project <code>src/</code> where they will now be processed and optimized. Your existing images in <code>public/</code> and remote images are still valid but are not optimized by Astro’s build process.</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/pages/posts/post-1.md</span></div>


</div> <p>If you require more control over your image attributes, we recommend using the <code>.mdx</code> file format, which allows you to include Astro’s <code>&lt;Image /&gt;</code> component or a JSX <code>&lt;img /&gt;</code> tag in addition to the Markdown syntax. Use the <a href="../integrations-guide/mdx/index.html">MDX integration</a> to add support for MDX to Astro.</p> <div tabindex="-1" class="heading-wrapper level-h3"><h3 id="remove-astrojsimage">Remove <code>@astrojs/image</code>
</h3></div> <p>If you were using the image integration in Astro v2.x, complete the following steps:</p> <ol> <li> <p>Remove the <code>@astrojs/image</code> integration.</p> <p>You must <a href="../integrations-guide/index.html#removing-an-integration">remove the integration</a> by uninstalling and then removing it from your <code>astro.config.mjs</code> file.</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">astro.config.mjs</span></div>


</div> </li> <li> <p>Update types (if required).</p> <p>If you had special types configured for <code>@astrojs/image</code> in <code>src/env.d.ts</code>, you may need to change them back to the default Astro types if your upgrade to v3 did not complete this step for you.</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/env.d.ts</span></div>


</div> <p>Similarly, update <code>tsconfig.json</code> if necessary:</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">tsconfig.json</span></div>


</div> </li> <li> <p>Migrate any existing <code>&lt;Image /&gt;</code> components.</p> <p>Change all <code>import</code> statements from <code>@astrojs/image/components</code> to <code>astro:assets</code> in order to use the new built-in <code>&lt;Image /&gt;</code> component.</p> <p>Remove any component attributes that are not <a href="index.html#properties">currently supported image asset properties</a>.</p> <p>For example, <code>aspectRatio</code> is no longer supported, as it is now automatically inferred from the <code>width</code> and <code>height</code> attributes.</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/components/MyComponent.astro</span></div>


</div> </li> <li> <p>Remove any existing <code>&lt;Picture /&gt;</code> components.</p> <p>Currently, the built-in assets feature does not include a <code>&lt;Picture /&gt;</code> component.</p> <p>Instead, you can use the HTML image attributes <code>srcset</code> and <code>sizes</code> or the <code>&lt;picture&gt;</code> tag <a href="https://developer.mozilla.org/en-US/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images#art_direction">for art direction or to create responsive images</a>.</p> </li> <li> <p>Choose a default image service.</p> <p><a href="https://github.com/lovell/sharp">Sharp</a> is now the default image service used for <code>astro:assets</code>. If you would like to use Sharp, no configuration is required.</p> <p>If you would prefer to use <a href="https://github.com/GoogleChromeLabs/squoosh">Squoosh</a> to transform your images, update your config with the following <code>image.service</code> option:</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">astro.config.mjs</span></div>


</div> </li> </ol> <div tabindex="-1" class="heading-wrapper level-h3"><h3 id="update-content-collections-schemas">Update Content Collections schemas</h3></div> <p>You can now declare an associated image for a content collections entry, such as a blog post’s cover image, in your frontmatter using its path relative to the current folder.</p> <p>The new <code>image</code> helper for content collections lets you validate the image metadata using Zod. Learn more about <a href="index.html#images-in-content-collections">how to use images in content collections</a></p> <div tabindex="-1" class="heading-wrapper level-h3"><h3 id="navigating-image-imports-in-astro-v30">Navigating Image Imports in Astro v3.0</h3></div> <p>In Astro v3.0, if you have to preserve the old import behavior for images and require a string representation of the image’s URL, append <code>?url</code> to the end of your image path when importing it. For example:</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/pages/blog/MyImages.astro</span></div>


</div> <p>This approach ensures you obtain the URL string. Keep in mind that during development, Astro uses a <code>src/</code> path, but upon building, it generates hashed paths like <code>/_astro/cat.a6737dd3.png</code>.</p> <p>If you prefer to work directly with the image object itself, you can access the <code>.src</code> property. This approach is best for tasks like managing image dimensions for Core Web Vitals metrics and preventing CLS.</p> <p>If you are transitioning into the new import behavior, combining <code>?url</code> and <code>.src</code> methods might be the right method for seamless image handling.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 Fred K. Schott<br>Licensed under the MIT License.<br>
    <a href="https://docs.astro.build/en/guides/images/" class="_attribution-link">https://docs.astro.build/en/guides/images/</a>
  </p>
</div>
