<h1 class="content-title astro-j75b3yus" id="overview">Keystatic &amp; Astro</h1> <p><a href="https://keystatic.com/">Keystatic</a> is an open source, headless content-management system that allows you to structure your content and sync it with GitHub.</p> <aside class="content tip astro-duqfclob" aria-label="Tip"> <p class="title astro-duqfclob" aria-hidden="true">  Tip </p> <section class="astro-duqfclob"> <p>If you’re starting a <strong>new Astro + Keystatic project from scratch</strong>, you can use the <a href="https://keystatic.com/docs/quick-start#keystatic-cli">Keystatic CLI</a> to generate a new project in seconds:</p>
<div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading">
<span class="sr-only">Terminal window</span>
</div>


</div>
<p>Select the Astro template, and you’ll be ready to <a href="#deploying-keystatic--astro">deploy</a>!</p> </section> </aside> <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="prerequisites">Prerequisites</h2></div> <ul> <li>An existing Astro project <a href="../../server-side-rendering/index.html#enabling-ssr-in-your-project">with server-side rendering (SSR) and <code>output: 'hybrid'</code> configured</a>.</li> </ul> <aside class="content note astro-duqfclob" aria-label="Note"> <p class="title astro-duqfclob" aria-hidden="true">  Note </p> <section class="astro-duqfclob"> <p>If you intend to sync Keystatic’s data with GitHub, you will also need <strong>a GitHub account with <code>write</code> permissions</strong> on the repository for this project.</p> </section> </aside> <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="installing-dependencies">Installing dependencies</h2></div> <p>Add both the Markdoc (for content entries) and the React (for the Keystatic Admin UI Dashboard) integrations to your Astro project, using the <code>astro add</code> command for your package manager.</p> <astro-island uid="1UjbMx" component-url="/_astro/Tabs.3d721b18.js" component-export="default" renderer-url="/_astro/client.d87097da.js" props='{"sharedStore":[0,"package-managers"]}' ssr="" client="idle" opts='{"name":"Tabs","value":true}' await-children=""><div class="_container_1kkny_1">
<div class="_tab-scroll-overflow_1kkny_6"><div class="_tablist_1kkny_30 TabGroup no-flex" role="tablist">
<button aria-selected="true" tabindex="0" role="tab" type="button" class="_tab_1kkny_6" id="71-tab.npm"><astro-slot name="tab.npm">npm</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="71-tab.pnpm"><astro-slot name="tab.pnpm">pnpm</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="71-tab.yarn"><astro-slot name="tab.yarn">Yarn</astro-slot></button>
</div></div>
<div role="tabpanel" aria-labelledby="71-tab.npm" class="_tabpanel_1kkny_26"><astro-slot name="panel.npm"> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading">
<span class="sr-only">Terminal window</span>
</div>


</div> </astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="71-tab.pnpm" class="_tabpanel_1kkny_26"><astro-slot name="panel.pnpm"> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading">
<span class="sr-only">Terminal window</span>
</div>


</div> </astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="71-tab.yarn" class="_tabpanel_1kkny_26"><astro-slot name="panel.yarn"> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading">
<span class="sr-only">Terminal window</span>
</div>


</div> </astro-slot></div>
</div></astro-island> <p>You will also need two Keystatic packages:</p> <astro-island uid="Z193y8Y" component-url="/_astro/Tabs.3d721b18.js" component-export="default" renderer-url="/_astro/client.d87097da.js" props='{"sharedStore":[0,"package-managers"]}' ssr="" client="idle" opts='{"name":"Tabs","value":true}' await-children=""><div class="_container_1kkny_1">
<div class="_tab-scroll-overflow_1kkny_6"><div class="_tablist_1kkny_30 TabGroup no-flex" role="tablist">
<button aria-selected="true" tabindex="0" role="tab" type="button" class="_tab_1kkny_6" id="72-tab.npm"><astro-slot name="tab.npm">npm</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="72-tab.pnpm"><astro-slot name="tab.pnpm">pnpm</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="72-tab.yarn"><astro-slot name="tab.yarn">Yarn</astro-slot></button>
</div></div>
<div role="tabpanel" aria-labelledby="72-tab.npm" class="_tabpanel_1kkny_26"><astro-slot name="panel.npm"> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading">
<span class="sr-only">Terminal window</span>
</div>


</div> </astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="72-tab.pnpm" class="_tabpanel_1kkny_26"><astro-slot name="panel.pnpm"> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading">
<span class="sr-only">Terminal window</span>
</div>


</div> </astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="72-tab.yarn" class="_tabpanel_1kkny_26"><astro-slot name="panel.yarn"> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading">
<span class="sr-only">Terminal window</span>
</div>


</div> </astro-slot></div>
</div></astro-island> <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="creating-a-keystatic-config-file">Creating a Keystatic config file</h2></div> <p>A Keystatic config file is required to define your content schema. This file will also allow you to connect a project to a specific GitHub repository (if you decide to do so).</p> <p>Create a file called <code>keystatic.config.ts</code> in the root of the project and add the following code to define both your storage type (<code>local</code>) and a single content collection (<code>posts</code>):</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">keystatic.config.ts</span></div>


</div> <aside class="content note astro-duqfclob" aria-label="already using content collections?"> <p class="title astro-duqfclob" aria-hidden="true">  already using content collections? </p> <section class="astro-duqfclob"> <p>If you are already using <a href="../../content-collections/index.html#defining-collections">content collections</a> in your Astro project, then update the schema above to exactly match the collection(s) defined in your existing schema.</p> </section> </aside> <p>Keystatic is now configured to manage your content based on your schema.</p> <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="setting-up-the-keystatic-admin-ui-dashboard">Setting up the Keystatic Admin UI dashboard</h2></div> <p>The Keystatic Admin UI is a React app that runs in your Astro project.</p> <p>The following steps will create a dashboard that lives in <code>src/pages/keystatic/</code> for managing your site content.</p> <ol> <li> <p>Create a <code>keystatic.page.ts</code> in the project root, alongside your Keystatic config file.</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">keystatic.page.ts</span></div>


</div> </li> <li> <p>Create a new page called <code>src/pages/keystatic/[...params].astro</code> and mount the component on the client side only:</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/pages/keystatic/[...params].astro</span></div>


</div> </li> <li> <p>Create a new file called <code>src/pages/api/keystatic/[...params].ts</code> that will create <code>API routes</code> for Keystatic’s Admin UI.</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/pages/api/keystatic/[...params].ts</span></div>


</div> </li> <li> <p>To launch your Keystatic Admin UI dashboard, start Astro’s dev server:</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading">
<span class="sr-only">Terminal window</span>
</div>


</div> </li> <li> <p>Visit <code>http://127.0.0.1:4321/keystatic</code> in the browser to see the Keystatic Admin UI running.</p> </li> </ol> <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="creating-a-new-post">Creating a new post</h2></div> <ol> <li> <p>In the Keystatic Admin UI dashboard, click on the “Posts” collection.</p> </li> <li> <p>Use the button to create a new post. Add the title “My First Post” and some content, then save the post.</p> </li> <li> <p>This post should now be visible from your “Posts” collection. You can view and edit your individual posts from this dashboard page.</p> </li> <li> <p>Return to view your Astro project files. You will now find a new <code>.mdoc</code> file inside the <code>src/content/posts</code> directory for this new post:</p> <docs-file-tree><ul><li class="directory" data-filetype="dir"><details open><summary><span class="tree-entry"><span class=""><span><span class="sr-only">Directory</span></span>src/ </span> </span></summary><ul><li class="directory" data-filetype="dir"><details open><summary><span class="tree-entry"><span class=""><span><span class="sr-only">Directory</span></span>content/ </span> </span></summary><ul><li class="directory" data-filetype="dir"><details open><summary><span class="tree-entry"><span class=""><span><span class="sr-only">Directory</span></span>posts/ </span> </span></summary><ul><li class="file" data-filetype="mdoc"><span class="tree-entry"><span class="highlight"><strong>my-first-post.mdoc</strong></span></span></li></ul></details></li></ul></details></li></ul></details></li></ul></docs-file-tree> </li> <li> <p>Navigate to that file in your code editor and verify that you can see the Markdown content you entered. For example:</p>  </li> </ol> <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="rendering-keystatic-content">Rendering Keystatic content</h2></div> <p>Use Astro’s Content Collections API to <a href="../../content-collections/index.html#querying-collections">query and display your posts and collections</a>, just as you would in any Astro project.</p> <div tabindex="-1" class="heading-wrapper level-h3"><h3 id="displaying-a-collection-list">Displaying a collection list</h3></div> <p>The following example displays a list of each post title, with a link to an individual post page.</p>  <div tabindex="-1" class="heading-wrapper level-h3"><h3 id="displaying-a-single-entry">Displaying a single entry</h3></div> <p>To display content from an individual post, you can import and use the <code>&lt;Content /&gt;</code> component to <a href="../../content-collections/index.html#rendering-content-to-html">render your content to HTML</a>:</p>  <p>For more information on querying, filtering, displaying your collections content and more, see the full content <a href="../../content-collections/index.html">collections documentation</a>.</p> <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="deploying-keystatic--astro">Deploying Keystatic + Astro</h2></div> <p>To deploy your website, visit our <a href="../../deploy/index.html">deployment guides</a> and follow the instructions for your preferred hosting provider.</p> <p>You’ll also probably want to <a href="https://keystatic.com/docs/connect-to-github">connect Keystatic to GitHub</a> so you can manage content on the deployed instance of the project.</p> <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="official-resources">Official Resources</h2></div> <ul> <li>Check out <a href="https://keystatic.com/docs/installation-astro">the official Keystatic guide</a>
</li> <li><a href="https://github.com/Thinkmill/keystatic/tree/main/templates/astro">Keystatic starter template</a></li> </ul> <h2 class="astro-ngaa6bbg">More CMS guides</h2><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 Fred K. Schott<br>Licensed under the MIT License.<br>
    <a href="https://docs.astro.build/en/guides/cms/keystatic/" class="_attribution-link">https://docs.astro.build/en/guides/cms/keystatic/</a>
  </p>
</div>
