<h1 class="content-title astro-j75b3yus" id="overview">Payload CMS &amp; Astro</h1> <p><a href="https://payloadcms.com/">PayloadCMS</a> is a headless open-source content management system that can be used to provide content for your Astro project.</p> <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="integrating-with-astro">Integrating with Astro</h2></div> <div tabindex="-1" class="heading-wrapper level-h3"><h3 id="prerequisites">Prerequisites</h3></div> <ol> <li>
<strong>An Astro project</strong> - If you don’t have an Astro project yet, our <a href="../../../install/auto/index.html">Installation guide</a> will get you up and running in no time.</li> <li>
<strong>A MongoDB database</strong> - PayloadCMS will ask you for a MongoDB connection string when creating a new project. You can set one up locally or use <a href="https://www.mongodb.com/">MongoDBAtlas</a> to host a database on the web for free.</li> <li>
<strong>A PayloadCMS REST API</strong> - Create a <a href="https://payloadcms.com/docs/getting-started/installation">PayloadCMS</a> project and connect it to your MongoDB database during the setup.</li> </ol> <aside class="content note astro-duqfclob" aria-label="Choosing a template"> <p class="title astro-duqfclob" aria-hidden="true">  Choosing a template </p> <section class="astro-duqfclob"> <p>During the PayloadCMS installation, you will be asked if you want to use a template.</p>
<p>Choosing any of the available templates at this step (such as ‘blog’) automatically generates additional collections for you to use. Otherwise, you will need to manually create your PayloadCMS collections.</p> </section> </aside> <div tabindex="-1" class="heading-wrapper level-h3"><h3 id="configuring-astro-for-your-payloadcms-collection">Configuring Astro for your PayloadCMS collection</h3></div> <p>Your Payload project template will contain a file called Posts.ts in <code>src/collections/</code>. If you did not choose a template during installation that created a content collection for you, you can create a new Payload CMS Collection by adding this configuration file manually. The example below shows this file for a collection called <code>posts</code> that requires <code>title</code>, <code>content</code>, and <code>slug</code> fields:</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/collections/Posts.ts</span></div>


</div> <ol> <li>Import and add both <code>Users</code> (available in all PayloadCMS projects) and any other collections (e.g. <code>Posts</code>) to the available collections in the <code>payload.config.ts</code> file.</li> </ol> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/payload.config.ts</span></div>


</div> <p>This will make a new collection called “Posts” appear in your PayloadCMS Dashboard next to the “Users” collection.</p> <ol start="2"> <li> <p>Enter the “Posts” collection and create a new post. After saving it, you will notice the API URL appear in the bottom right corner.</p> </li> <li> <p>With the dev server running, open <code>http://localhost:4321/api/posts</code> in your browser. You should see a JSON file containing the post you have created as an object.</p> </li> </ol>  <aside class="content tip astro-duqfclob" aria-label="Tip"> <p class="title astro-duqfclob" aria-hidden="true">  Tip </p> <section class="astro-duqfclob"> <p>By default, both Astro and PayloadCMS will use port 4321. You might want to change the PayloadCMS port in the <code>src/server.ts</code> file. Don’t forget to update the <code>serverURL</code> in <code>src/payload.config.ts</code> as well.</p> </section> </aside> <div tabindex="-1" class="heading-wrapper level-h3"><h3 id="fetching-data">Fetching Data</h3></div> <p>Fetch your PayloadCMS data through your site’s unique REST API URL and the route for your content. (By default, PayloadCMS will mount all routes through <code>/api</code>.) Then, you can render your data properties using Astro’s <code>set:html=""</code> directive.</p> <p>Together with your post, PayloadCMS will return some top-level metadata. The actual documents are nested within the <code>docs</code> array.</p> <p>For example, to display a list of post titles and their content:</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/pages/index.astro</span></div>


</div> <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="building-a-blog-with-payloadcms-and-astro">Building a blog with PayloadCMS and Astro</h2></div> <p>Create a blog index page <code>src/pages/index.astro</code> to list each of your posts with a link to its own page.</p> <p>Fetching via the API returns an array of objects (posts) that include, among others, the following properties:</p> <ul> <li><code>title</code></li> <li><code>content</code></li> <li><code>slug</code></li> </ul> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/pages/index.astro</span></div>


</div> <div tabindex="-1" class="heading-wrapper level-h3"><h3 id="using-the-payloadcms-api-to-generate-pages">Using the PayloadCMS API to generate pages</h3></div> <p>Create a page <code>src/pages/posts/[slug].astro</code> to <a href="../../../core-concepts/routing/index.html#dynamic-routes">dynamically generate a page</a> for each post.</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/pages/posts/[slug].astro</span></div>


</div> <div tabindex="-1" class="heading-wrapper level-h3"><h3 id="publishing-your-site">Publishing your site</h3></div> <p>To deploy your site visit our <a href="../../deploy/index.html">deployment guide</a> and follow the instructions for your preferred hosting provider.</p> <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="community-resources">Community Resources</h2></div> <ul> <li>Try this <a href="https://github.com/Lambdo-Labs/payloadcms-astro-template">Payload CMS &amp; Astro Template</a>.</li> <li>Check out <a href="https://github.com/mooxl/astroad">Astroad</a> for easy development and VPS deployment with Docker.</li> </ul> <aside class="content note astro-duqfclob" aria-label="Expand this stub!"> <p class="title astro-duqfclob" aria-hidden="true">  Expand this stub! </p> <section class="astro-duqfclob"> This guide is a stub. <br class="astro-ngaa6bbg"> Know more about how to use this CMS with Astro? <a href="https://github.com/withastro/docs/blob/main/src/content/docs/en/guides/cms/payload.mdx" target="_blank" class="astro-ngaa6bbg"> Edit this page </a> </section> </aside><h2 class="astro-ngaa6bbg">More CMS guides</h2><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 Fred K. Schott<br>Licensed under the MIT License.<br>
    <a href="https://docs.astro.build/en/guides/cms/payload/" class="_attribution-link">https://docs.astro.build/en/guides/cms/payload/</a>
  </p>
</div>
