<h1 class="content-title astro-j75b3yus" id="overview">Headless WordPress &amp; Astro</h1> <p><a href="https://wordpress.org/">WordPress</a> is a content management system that includes its own frontend, but can also be used as a headless CMS to provide content to your Astro project.</p> <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="integrating-with-astro">Integrating with Astro</h2></div> <p>WordPress comes with a built-in <a href="https://developer.wordpress.org/rest-api/">WordPress REST API</a> to connect your WordPress data to Astro. You can optionally install <a href="https://wordpress.org/plugins/wp-graphql/">WPGraphQL</a> on your site to use GraphQL.</p> <div tabindex="-1" class="heading-wrapper level-h3"><h3 id="prerequisites">Prerequisites</h3></div> <p>To get started, you will need to have the following:</p> <ol> <li>
<strong>An Astro project</strong> - If you don’t have an Astro project yet, our <a href="../../../install/auto/index.html">Installation guide</a> will get you up and running in no time.</li> <li>
<strong>A WordPress site</strong> - Your site’s REST API is <code>[YOUR_SITE]/wp-json/wp/v2/</code> and is available by default with any WordPress site. It is also possible to <a href="https://wordpress.org/support/article/installing-wordpress-on-your-own-computer/">set up WordPress on a local environment</a>.</li> </ol> <div tabindex="-1" class="heading-wrapper level-h3"><h3 id="setting-up-credentials">Setting up Credentials</h3></div> <p>Your WordPress REST API is available to external requests for data fetching without authentication by default. This does not allow users to modify your data or site settings and allows you to use your data in your Astro project without any credentials.</p> <p>You may choose to <a href="https://developer.wordpress.org/rest-api/frequently-asked-questions/#require-authentication-for-all-requests">require authentication</a> if necessary.</p> <div tabindex="-1" class="heading-wrapper level-h3"><h3 id="fetching-data">Fetching Data</h3></div> <p>Fetch your WordPress data through your site’s unique REST API URL and the route for your content. (For a blog, this will commonly be <code>posts</code>.) Then, you can render your data properties using Astro’s <code>set:html={}</code> directive.</p> <p>For example, to display a list of post titles and their content:</p>  <p>The WordPress REST API includes <a href="https://developer.wordpress.org/rest-api/using-the-rest-api/global-parameters/">global parameters</a> such as <code>_fields</code> and <code>embed</code>.</p> <p>A large quantity of data is available to you via this API, so you may wish to only fetch certain fields. You can restrict your response by adding the <a href="https://developer.wordpress.org/rest-api/using-the-rest-api/global-parameters/#_fields"><code>_fields</code></a> parameter to the API URL, for example: <code>[YOUR-SITE]/wp/v2/posts?_fields=author,id,excerpt,title,link</code></p> <p>The API can also return content related to your post, such as a link to the parent post, or to comments on the post. You can add the <a href="https://developer.wordpress.org/rest-api/using-the-rest-api/global-parameters/#_embed"><code>_embed</code></a> parameter to the API URL (e.g. <code>[YOUR-SITE]/wp/v2/posts?_embed</code>) to indicate to the server that the response should include these embedded resources.</p> <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="building-a-blog-with-wordpress-and-astro">Building a blog with WordPress and Astro</h2></div> <p>This example fetches data from the public WordPress API of <a href="https://norian.studio/dinosaurs/">https://norian.studio/dinosaurs/</a>. This WordPress site stores information about individual dinosaurs under the <code>dinos</code> route, just as a blog would store individual blog posts under the <code>posts</code> route.</p> <p>This example shows how to reproduce this site structure in Astro: an index page that lists dinosaurs with links to dynamically-generated individual dinosaur pages.</p> <aside class="content note astro-duqfclob" aria-label="Note"> <p class="title astro-duqfclob" aria-hidden="true">  Note </p> <section class="astro-duqfclob"> <p>To use <a href="https://learn.wordpress.org/lesson-plan/custom-post-types/">Custom Post Types (CPT)</a> in your WordPress API (not just <code>post</code> and <code>page</code>), you will have to <a href="https://stackoverflow.com/questions/48536646/how-can-i-get-data-from-custom-post-type-using-wp-rest-api">configure them in your WordPress dashboard</a> or <a href="https://developer.wordpress.org/rest-api/extending-the-rest-api/adding-rest-api-support-for-custom-content-types/">add REST API Support For Custom Content Types</a> in WordPress.</p>
<p>This example fetches data from a WordPress site whose content types have already been configured and exposed to the REST API.</p> </section> </aside> <div tabindex="-1" class="heading-wrapper level-h3"><h3 id="displaying-a-list-of-wordpress-posts">Displaying a list of WordPress posts</h3></div> <p>The page <code>src/pages/index.astro</code> lists each dinosaur, with a description and link to its own page.</p> <docs-file-tree><ul>
<li class="directory" data-filetype="dir"><details open><summary><span class="tree-entry"><span class=""><span><span class="sr-only">Directory</span></span>src/ </span> </span></summary><ul><li class="directory" data-filetype="dir"><details open><summary><span class="tree-entry"><span class=""><span><span class="sr-only">Directory</span></span>pages/ </span> </span></summary><ul>
<li class="file" data-filetype="astro"><span class="tree-entry"><span class="highlight"><strong>index.astro</strong></span></span></li>
<li class="directory" data-filetype="dir"><details open><summary><span class="tree-entry"><span class=""><span><span class="sr-only">Directory</span></span>dinos/ </span> </span></summary><ul><li class="file" data-filetype="astro"><span class="tree-entry"><span class="">[slug].astro</span> </span></li></ul></details></li>
</ul></details></li></ul></details></li>
<li class="file" data-filetype="mjs"><span class="tree-entry"><span class="">astro.config.mjs</span> </span></li>
<li class="file" data-filetype="json"><span class="tree-entry"><span class="">package.json</span> </span></li>
</ul></docs-file-tree> <p>Fetching via the API returns an object that includes the properties:</p> <ul> <li>
<code>title.rendered</code> - Contains the HTML rendering of the title of the post.</li> <li>
<code>content.rendered</code> - Contains the HTML rendering of the content of the post.</li> <li>
<code>slug</code> - Contains the slug of the post. (This provides the link to the dynamically-generated individual dinosaur pages.)</li> </ul> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">/src/pages/index.astro</span></div>


</div> <div tabindex="-1" class="heading-wrapper level-h3"><h3 id="using-the-wordpress-api-to-generate-pages">Using the WordPress API to generate pages</h3></div> <p>The page <code>src/pages/dinos/[slug].astro</code> <a href="../../../core-concepts/routing/index.html#dynamic-routes">dynamically generates a page</a> for each dinosaur.</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">/src/pages/dinos/[slug].astro</span></div>


</div> <div tabindex="-1" class="heading-wrapper level-h3"><h3 id="returning-embedded-resources">Returning embedded resources</h3></div> <p>The <code>_embed</code> query parameter instructs the server to return related (embedded) resources.</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/pages/dinos/[slug].astro</span></div>


</div> <p>The <code>_embedded['wp:featuredmedia']['0'].media_details.sizes.medium.source_url</code> property is returned, and can be used to display the featured image on each dinosuar page. (Replace <code>medium</code> with your desired image size.)</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">/src/pages/dinos/[slug].astro</span></div>


</div> <div tabindex="-1" class="heading-wrapper level-h3"><h3 id="publishing-your-site">Publishing your site</h3></div> <p>To deploy your site visit our <a href="../../deploy/index.html">deployment guides</a> and follow the instructions for your preferred hosting provider.</p> <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="community-resources">Community Resources</h2></div> <ul> <li>
<a href="https://blog.openreplay.com/building-an-astro-website-with-wordpress-as-a-headless-cms/">Building An Astro Website With WordPress As A Headless CMS</a> by Chris Bongers.</li> <li>
<a href="https://www.youtube.com/watch?v=Jstqgklvfnc">Building with Astro x WordPress</a> on Ben Holmes’s stream.</li> <li>
<a href="https://developers.wpengine.com/blog/building-a-headless-wordpress-site-with-astro">Building a Headless WordPress Site with Astro</a> by Jeff Everhart</li> <li><a href="https://darko.io/posts/wp-as-an-api/">Astro and WordPress as an API</a></li> </ul> <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="production-sites">Production Sites</h2></div> <p>The following sites use Astro + WordPress in production:</p> <ul> <li>
<a href="https://softhardsystem.com/">Soft Hard System</a> by Rafid Muhymin Wafi — <a href="https://github.com/RafidMuhymin/softhardsystem">source code on GitHub</a>
</li> <li>
<a href="https://wc-dinos.netlify.app/">Dinos!</a> by Anindo Neel Dutta — <a href="https://github.com/leen-neel/astro-wordpress">source code on GitHub</a>
</li> </ul> <h2 class="astro-ngaa6bbg">More CMS guides</h2><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 Fred K. Schott<br>Licensed under the MIT License.<br>
    <a href="https://docs.astro.build/en/guides/cms/wordpress/" class="_attribution-link">https://docs.astro.build/en/guides/cms/wordpress/</a>
  </p>
</div>
