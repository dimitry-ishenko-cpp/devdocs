<h1 class="content-title astro-j75b3yus" id="overview">Share State Between Islands</h1> <p>When building an Astro website with <a href="../../concepts/islands/index.html">islands architecture / partial hydration</a>, you may have run into this problem: <strong>I want to share state between my components.</strong></p> <p>UI frameworks like React or Vue may encourage <a href="https://react.dev/learn/passing-data-deeply-with-context">‚Äúcontext‚Äù providers</a> for other components to consume. But when <a href="../framework-components/index.html#hydrating-interactive-components">partially hydrating components</a> within Astro or Markdown, you can‚Äôt use these context wrappers.</p> <p>Astro recommends a different solution for shared client-side storage: <a href="https://github.com/nanostores/nanostores"><strong>Nano Stores</strong></a>.</p> <div class="root astro-u7553m4s"> <div class="flex astro-u7553m4s"> <img src="data:image/webp;base64,UklGRuQEAABXRUJQVlA4WAoAAAAYAAAAMwAANQAAQUxQSGsCAAABoEZrmyFJeiMix7Zt27a9tm3btm3btm3bthVffO8iMyo7avZ/REwAVoo2y6zNnEnJOBS6dBzQdavzbr3ppFUaw5g0nEO94/9g7qebAZlzzpmaMQbo8SQpXsQLeRbyXU0YYNFdP9Mrc4PwkKG7HLD9FAdXA8CxJAOLVZn78hLY0hz2onhltKqIBHJnuJIsuv7KwFI9OQuuHIc16Vmy520wZW1DKUv5WV2YkubQl/dlWQZ13uRfJQkfhEG5DtOVXoJWpn9xI7iS4DDrXVYexJMXolzjsiyrg0abXPPoT9QYJcmjjKmVOVuRRewNlAjlCxfs2BX5rgILTN7/hOOOP/7E088++11q1K1HH374SSccf/xxW3WDMTEWHe5krDJWGfnb7og1aPw6JVIZH6TQk/vCFWU4in8wwUAOgi1Aw08ZUqDn/nBFXQPTFF4V0ztQE7klpldgmsKbq+KWqri5Aq2KNFcOWhVpVqJVEaj/D72VaQpviekZkrkZtU3BSCZzBwCbtwslDfKPB9cBXM7F9KmQfKA73H/upyQjnl8MgQMavM2QDPkX320Dg+bfUhPin7wQFi1/SksZBsO2+DEteu6HWo0/YUhK+DCAK6gimg4Dr2mITtf8SVLFS9Ak+CePtECP7W7/krHBF2qOBC3SIF7JNWAtgJbTdrngofd/FTIII+U//9UQJChzn10AADaz+G/Drq/Tk6+fdOYZZ5xx+tGHfkmv/PX6N/5g4V/v3nnoOMAg17gsc9iD5Fvb1kfhoOeo5Bh0HD5nlfU2WHX+6M4NAcAh0qK//+G69RoBtXKz2siOU+ENiDa1nAEAAFZQOCA8AgAAUA0AnQEqNAA2AD7lYqZPKSUjIiwVXZkgHIlkAMdkbc6KwKFXtoJpaNoyqLQ/FGN00F6wVZIfnXiVi1ZJjkcZ0nNZIsE90QHkgj4yGAjIg8GNR3g1bfXluGis9CqpEDIaIKQSEfuf2Uk/tJygs2T/CpkLOAD++90v7wUm4rf+3+Af0bFf9FDxRxPx/uyNmmuUn84N1S8oeCamnnI71i6f4UiRm8f9Hp1bg3B4DsRB5+mUgzo/4bnweeaxZgh0SL/aJJmVmzy9c8202SrAoix1gA9Mu6pJtpQzIzp5YuIDPxOw+qfShBsZNu7bs2FbLYm9QXO6KOogBnG8yukH0OwiE+DnM/TVmtkTBW16oDUc1kwDuwb2koEyJK3+nIi9vTEJbmgjzNy0hv2qQpmT8IGeGOmWASc8HdwGSXXiapinC4l4um2zabGEmrQWa8rLxGRQ/ZFsnmAvLdTLDk89DnLcpQ78xNMPbbKut8V2OvI0rPE6x/rStU9bxZRN+0T+Wa/kZPFrAtpeEMeI31JeMUUw7ki5RB5R3I4uviJ32A/q+PzE5/JGDVkn7vjHQboTyXOWWQI8qKDwRfPeR4/MHhDprmFlw7Qf/Y4VNXdX4X9DXrU1Dk02qM1tPVpcTLNneaESBYpH9S35JjhN7dD4DlrRVZjvdfI3Xa90VJCaBoCsRLS3lj97HXa2WoLFvBUR1hrmHn7KW+bQCefXaR8JfLC4VFMIDMFfZf8Lf7+0sF+p2hrsjrlHvC/Z1Mf4AABFWElGDgAAAE1NACoAAAAIAAAAAAAA" width="26" alt="" class="astro-u7553m4s"> <strong class="astro-u7553m4s">Related recipe:</strong> <a href="../../recipes/sharing-state/index.html" class="astro-u7553m4s"> Share State Between Astro Components </a> </div> </div> <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="why-nano-stores">Why Nano Stores?</h2></div> <p>The <a href="https://github.com/nanostores/nanostores">Nano Stores</a> library allows you to author stores that any component can interact with. We recommend Nano Stores because:</p> <ul> <li>
<strong>They‚Äôre lightweight.</strong> Nano Stores ship the bare minimum JS you‚Äôll need (less than 1 KB) with zero dependencies.</li> <li>
<strong>They‚Äôre framework-agnostic.</strong> This means sharing state between frameworks will be seamless! Astro is built on flexibility, so we love solutions that offer a similar developer experience no matter your preference.</li> </ul> <p>Still, there are a number of alternatives you can explore. These include:</p> <ul> <li><a href="https://svelte.dev/tutorial/writable-stores">Svelte‚Äôs built-in stores</a></li> <li>
<a href="https://www.solidjs.com/docs/latest">Solid signals</a> outside of a component context</li> <li><a href="https://vuejs.org/guide/scaling-up/state-management.html#simple-state-management-with-reactivity-api">Vue‚Äôs reactivity API</a></li> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/Events/Creating_and_triggering_events">Sending custom browser events</a> between components</li> </ul> <aside class="content note astro-duqfclob" aria-label="FAQ"> <p class="title astro-duqfclob" aria-hidden="true">  FAQ </p> <section class="astro-duqfclob"> <details><summary><strong>üôã Can I use Nano Stores in <code>.astro</code> files or other server-side components?</strong></summary><p>Nano Stores <em>can</em> be imported, written to, and read from in server-side components, <strong>but we don‚Äôt recommend it!</strong> This is due to a few restrictions:</p>
<ul> <li>Writing to a store from a <code>.astro</code> file or <a href="../framework-components/index.html#hydrating-interactive-components">non-hydrated component</a> will <em>not</em> affect the value received by <a href="../../reference/directives-reference/index.html#client-directives">client-side components</a>.</li> <li>You cannot pass a Nano Store as a ‚Äúprop‚Äù to client-side components.</li> <li>You cannot subscribe to store changes from a <code>.astro</code> file, since Astro components do not re-render.</li> </ul>
<p>If you understand these restrictions and still find a use case, you can give Nano Stores a try! Just remember that Nano Stores are built for reactivity to changes on the <strong>client</strong> specifically.</p></details><details><summary><strong>üôã How do Svelte stores compare to Nano Stores?</strong></summary><p><strong>Nano Stores and <a href="https://svelte.dev/tutorial/writable-stores">Svelte stores</a> are very similar!</strong> In fact, <a href="https://github.com/nanostores/nanostores#svelte">nanostores allow you to use the same <code>$</code> shortcut</a> for subscriptions that you might use with Svelte stores.</p>
<p>If you want to avoid third-party libraries, <a href="https://svelte.dev/tutorial/writable-stores">Svelte stores</a> are a great cross-island communication tool on their own. Still, you might prefer Nano Stores if a) you like their add-ons for <a href="https://github.com/nanostores/nanostores#maps">‚Äúobjects‚Äù</a> and <a href="https://github.com/nanostores/nanostores#lazy-stores">async state</a>, or b) you want to communicate between Svelte and other UI frameworks like Preact or Vue.</p></details><details><summary><strong>üôã How do Solid signals compare to Nano Stores?</strong></summary><p>If you‚Äôve used Solid for a while, you may have tried moving <a href="https://www.solidjs.com/docs/latest#createsignal">signals</a> or <a href="https://www.solidjs.com/docs/latest#createstore">stores</a> outside of your components. This is a great way to share state between Solid islands! Try exporting signals from a shared file:</p>
<div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">sharedStore.js</span></div>


</div>
<p>‚Ä¶and all components importing <code>sharedCount</code> will share the same state. Though this works well, you might prefer Nano Stores if a) you like their add-ons for <a href="https://github.com/nanostores/nanostores#maps">‚Äúobjects‚Äù</a> and <a href="https://github.com/nanostores/nanostores#lazy-stores">async state</a>, or b) you want to communicate between Solid and other UI frameworks like Preact or Vue.</p></details> </section> </aside> <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="installing-nano-stores">Installing Nano Stores</h2></div> <p>To get started, install Nano Stores alongside their helper package for your favorite UI framework:</p> <astro-island uid="Z2eqAUH" component-url="/_astro/Tabs.3d721b18.js" component-export="default" renderer-url="/_astro/client.d87097da.js" props='{"sharedStore":[0,"ui-frameworks"]}' ssr="" client="idle" opts='{"name":"Tabs","value":true}' await-children=""><div class="_container_1kkny_1">
<div class="_tab-scroll-overflow_1kkny_6"><div class="_tablist_1kkny_30 TabGroup no-flex" role="tablist">
<button aria-selected="true" tabindex="0" role="tab" type="button" class="_tab_1kkny_6" id="56-tab.preact"><astro-slot name="tab.preact">Preact</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="56-tab.react"><astro-slot name="tab.react">React</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="56-tab.solid"><astro-slot name="tab.solid">Solid</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="56-tab.svelte"><astro-slot name="tab.svelte">Svelte</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="56-tab.vue"><astro-slot name="tab.vue">Vue</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="56-tab.zLit"><astro-slot name="tab.zLit">Lit</astro-slot></button>
</div></div>
<div role="tabpanel" aria-labelledby="56-tab.preact" class="_tabpanel_1kkny_26"><astro-slot name="panel.preact"><div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading">
<span class="sr-only">Terminal window</span>
</div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="56-tab.react" class="_tabpanel_1kkny_26"><astro-slot name="panel.react"><div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading">
<span class="sr-only">Terminal window</span>
</div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="56-tab.solid" class="_tabpanel_1kkny_26"><astro-slot name="panel.solid"><div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading">
<span class="sr-only">Terminal window</span>
</div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="56-tab.vue" class="_tabpanel_1kkny_26"><astro-slot name="panel.vue"><div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading">
<span class="sr-only">Terminal window</span>
</div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="56-tab.zLit" class="_tabpanel_1kkny_26"><astro-slot name="panel.zLit"><div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading">
<span class="sr-only">Terminal window</span>
</div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="56-tab.svelte" class="_tabpanel_1kkny_26"><astro-slot name="panel.svelte"><div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading">
<span class="sr-only">Terminal window</span>
</div>


</div>
<aside class="content note astro-duqfclob" aria-label="Note"> <p class="title astro-duqfclob" aria-hidden="true">  Note </p> <section class="astro-duqfclob"> <p>No helper package here! Nano Stores can be used like standard Svelte stores.</p> </section> </aside></astro-slot></div>
</div></astro-island> <p>You can jump into the <a href="https://github.com/nanostores/nanostores#guide">Nano Stores usage guide</a> from here, or follow along with our example below!</p> <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="usage-example---ecommerce-cart-flyout">Usage example - ecommerce cart flyout</h2></div> <p>Let‚Äôs say we‚Äôre building a simple ecommerce interface with three interactive elements:</p> <ul> <li>An ‚Äúadd to cart‚Äù submission form</li> <li>A cart flyout to display those added items</li> <li>A cart flyout toggle</li> </ul>  <p><em><a href="https://github.com/withastro/astro/tree/main/examples/with-nanostores"><strong>Try the completed example</strong></a> on your machine or online via Stackblitz.</em></p> <p>Your base Astro file may look like this:</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/pages/index.astro</span></div>


</div> <div tabindex="-1" class="heading-wrapper level-h3"><h3 id="using-atoms">Using ‚Äúatoms‚Äù</h3></div> <p>Let‚Äôs start by opening our <code>CartFlyout</code> whenever <code>CartFlyoutToggle</code> is clicked.</p> <p>First, create a new JS or TS file to contain our store. We‚Äôll use an <a href="https://github.com/nanostores/nanostores#atoms">‚Äúatom‚Äù</a> for this:</p> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/cartStore.js</span></div>


</div> <p>Now, we can import this store into any file that needs to read or write. We‚Äôll start by wiring up our <code>CartFlyoutToggle</code>:</p> <astro-island uid="Z5KaOe" component-url="/_astro/Tabs.3d721b18.js" component-export="default" renderer-url="/_astro/client.d87097da.js" props='{"sharedStore":[0,"ui-frameworks"]}' ssr="" client="idle" opts='{"name":"Tabs","value":true}' await-children=""><div class="_container_1kkny_1">
<div class="_tab-scroll-overflow_1kkny_6"><div class="_tablist_1kkny_30 TabGroup no-flex" role="tablist">
<button aria-selected="true" tabindex="0" role="tab" type="button" class="_tab_1kkny_6" id="49-tab.preact"><astro-slot name="tab.preact">Preact</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="49-tab.react"><astro-slot name="tab.react">React</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="49-tab.solid"><astro-slot name="tab.solid">Solid</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="49-tab.svelte"><astro-slot name="tab.svelte">Svelte</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="49-tab.vue"><astro-slot name="tab.vue">Vue</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="49-tab.zLit"><astro-slot name="tab.zLit">Lit</astro-slot></button>
</div></div>
<div role="tabpanel" aria-labelledby="49-tab.preact" class="_tabpanel_1kkny_26"><astro-slot name="panel.preact"><div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/components/CartFlyoutToggle.jsx</span></div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="49-tab.react" class="_tabpanel_1kkny_26"><astro-slot name="panel.react"><div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/components/CartFlyoutToggle.jsx</span></div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="49-tab.solid" class="_tabpanel_1kkny_26"><astro-slot name="panel.solid"><div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/components/CartFlyoutToggle.jsx</span></div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="49-tab.svelte" class="_tabpanel_1kkny_26"><astro-slot name="panel.svelte"><div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/components/CartFlyoutToggle.svelte</span></div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="49-tab.vue" class="_tabpanel_1kkny_26"><astro-slot name="panel.vue"><div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/components/CartFlyoutToggle.vue</span></div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="49-tab.zLit" class="_tabpanel_1kkny_26"><astro-slot name="panel.zLit"><div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/components/CartFlyoutToggle.ts</span></div>


</div></astro-slot></div>
</div></astro-island> <p>Then, we can read <code>isCartOpen</code> from our <code>CartFlyout</code> component:</p> <astro-island uid="tWPE5" component-url="/_astro/Tabs.3d721b18.js" component-export="default" renderer-url="/_astro/client.d87097da.js" props='{"sharedStore":[0,"ui-frameworks"]}' ssr="" client="idle" opts='{"name":"Tabs","value":true}' await-children=""><div class="_container_1kkny_1">
<div class="_tab-scroll-overflow_1kkny_6"><div class="_tablist_1kkny_30 TabGroup no-flex" role="tablist">
<button aria-selected="true" tabindex="0" role="tab" type="button" class="_tab_1kkny_6" id="50-tab.preact"><astro-slot name="tab.preact">Preact</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="50-tab.react"><astro-slot name="tab.react">React</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="50-tab.solid"><astro-slot name="tab.solid">Solid</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="50-tab.svelte"><astro-slot name="tab.svelte">Svelte</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="50-tab.vue"><astro-slot name="tab.vue">Vue</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="50-tab.zLit"><astro-slot name="tab.zLit">Lit</astro-slot></button>
</div></div>
<div role="tabpanel" aria-labelledby="50-tab.preact" class="_tabpanel_1kkny_26"><astro-slot name="panel.preact"><div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/components/CartFlyout.jsx</span></div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="50-tab.react" class="_tabpanel_1kkny_26"><astro-slot name="panel.react"><div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/components/CartFlyout.jsx</span></div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="50-tab.solid" class="_tabpanel_1kkny_26"><astro-slot name="panel.solid"><div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/components/CartFlyout.jsx</span></div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="50-tab.svelte" class="_tabpanel_1kkny_26"><astro-slot name="panel.svelte"><div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/components/CartFlyout.svelte</span></div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="50-tab.vue" class="_tabpanel_1kkny_26"><astro-slot name="panel.vue"><div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/components/CartFlyout.vue</span></div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="50-tab.zLit" class="_tabpanel_1kkny_26"><astro-slot name="panel.zLit"><div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/components/CartFlyout.ts</span></div>


</div></astro-slot></div>
</div></astro-island> <div tabindex="-1" class="heading-wrapper level-h3"><h3 id="using-maps">Using ‚Äúmaps‚Äù</h3></div> <aside class="content tip astro-duqfclob" aria-label="Tip"> <p class="title astro-duqfclob" aria-hidden="true">  Tip </p> <section class="astro-duqfclob"> <p><strong><a href="https://github.com/nanostores/nanostores#maps">Maps</a> are a great choice for objects you write to regularly!</strong> Alongside the standard <code>get()</code> and <code>set()</code> helpers an <code>atom</code> provides, you‚Äôll also have a <code>.setKey()</code> function to efficiently update individual object keys.</p> </section> </aside> <p>Now, let‚Äôs keep track of the items inside your cart. To avoid duplicates and keep track of ‚Äúquantity,‚Äù we can store your cart as an object with the item‚Äôs ID as a key. We‚Äôll use a <a href="https://github.com/nanostores/nanostores#maps">Map</a> for this.</p> <p>Let‚Äôs add a <code>cartItem</code> store to our <code>cartStore.js</code> from earlier. You can also switch to a TypeScript file to define the shape if you‚Äôre so inclined.</p> <astro-island uid="28Pd5C" component-url="/_astro/Tabs.3d721b18.js" component-export="default" renderer-url="/_astro/client.d87097da.js" props='{"sharedStore":[0,"javascript-flavors"]}' ssr="" client="idle" opts='{"name":"Tabs","value":true}' await-children=""><div class="_container_1kkny_1">
<div class="_tab-scroll-overflow_1kkny_6"><div class="_tablist_1kkny_30 TabGroup no-flex" role="tablist">
<button aria-selected="true" tabindex="0" role="tab" type="button" class="_tab_1kkny_6" id="51-tab.js"><astro-slot name="tab.js">JavaScript</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="51-tab.ts"><astro-slot name="tab.ts">TypeScript</astro-slot></button>
</div></div>
<div role="tabpanel" aria-labelledby="51-tab.js" class="_tabpanel_1kkny_26"><astro-slot name="panel.js"> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/cartStore.js</span></div>


</div> </astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="51-tab.ts" class="_tabpanel_1kkny_26"><astro-slot name="panel.ts"> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/cartStore.ts</span></div>


</div> </astro-slot></div>
</div></astro-island> <p>Now, let‚Äôs export an <code>addCartItem</code> helper for our components to use.</p> <ul> <li>
<strong>If that item doesn‚Äôt exist in your cart</strong>, add the item with a starting quantity of 1.</li> <li>
<strong>If that item <em>does</em> already exist</strong>, bump the quantity by 1.</li> </ul> <astro-island uid="Z2gJy3W" component-url="/_astro/Tabs.3d721b18.js" component-export="default" renderer-url="/_astro/client.d87097da.js" props='{"sharedStore":[0,"javascript-flavors"]}' ssr="" client="idle" opts='{"name":"Tabs","value":true}' await-children=""><div class="_container_1kkny_1">
<div class="_tab-scroll-overflow_1kkny_6"><div class="_tablist_1kkny_30 TabGroup no-flex" role="tablist">
<button aria-selected="true" tabindex="0" role="tab" type="button" class="_tab_1kkny_6" id="52-tab.js"><astro-slot name="tab.js">JavaScript</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="52-tab.ts"><astro-slot name="tab.ts">TypeScript</astro-slot></button>
</div></div>
<div role="tabpanel" aria-labelledby="52-tab.js" class="_tabpanel_1kkny_26"><astro-slot name="panel.js"> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/cartStore.js</span></div>


</div> </astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="52-tab.ts" class="_tabpanel_1kkny_26"><astro-slot name="panel.ts"> <div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/cartStore.ts</span></div>


</div> </astro-slot></div>
</div></astro-island> <aside class="content note astro-duqfclob" aria-label="Note"> <p class="title astro-duqfclob" aria-hidden="true">  Note </p> <section class="astro-duqfclob"> <details><summary><strong>üôã Why use <code>.get()</code> here instead of a <code>useStore</code> helper?</strong></summary><p>You may have noticed we‚Äôre calling <code>cartItems.get()</code> here, instead of grabbing that <code>useStore</code> helper from our React / Preact / Solid / Vue examples. This is because <strong>useStore is meant to trigger component re-renders.</strong> In other words, <code>useStore</code> should be used whenever the store value is being rendered to the UI. Since we‚Äôre reading the value when an <strong>event</strong> is triggered (<code>addToCart</code> in this case), and we aren‚Äôt trying to render that value, we don‚Äôt need <code>useStore</code> here.</p></details> </section> </aside> <p>With our store in place, we can call this function inside our <code>AddToCartForm</code> whenever that form is submitted. We‚Äôll also open the cart flyout so you can see a full cart summary.</p> <astro-island uid="Z1PkmCS" component-url="/_astro/Tabs.3d721b18.js" component-export="default" renderer-url="/_astro/client.d87097da.js" props='{"sharedStore":[0,"ui-frameworks"]}' ssr="" client="idle" opts='{"name":"Tabs","value":true}' await-children=""><div class="_container_1kkny_1">
<div class="_tab-scroll-overflow_1kkny_6"><div class="_tablist_1kkny_30 TabGroup no-flex" role="tablist">
<button aria-selected="true" tabindex="0" role="tab" type="button" class="_tab_1kkny_6" id="53-tab.preact"><astro-slot name="tab.preact">Preact</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="53-tab.react"><astro-slot name="tab.react">React</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="53-tab.solid"><astro-slot name="tab.solid">Solid</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="53-tab.svelte"><astro-slot name="tab.svelte">Svelte</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="53-tab.vue"><astro-slot name="tab.vue">Vue</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="53-tab.zLit"><astro-slot name="tab.zLit">Lit</astro-slot></button>
</div></div>
<div role="tabpanel" aria-labelledby="53-tab.preact" class="_tabpanel_1kkny_26"><astro-slot name="panel.preact"><div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/components/AddToCartForm.jsx</span></div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="53-tab.react" class="_tabpanel_1kkny_26"><astro-slot name="panel.react"><div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/components/AddToCartForm.jsx</span></div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="53-tab.solid" class="_tabpanel_1kkny_26"><astro-slot name="panel.solid"><div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/components/AddToCartForm.jsx</span></div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="53-tab.svelte" class="_tabpanel_1kkny_26"><astro-slot name="panel.svelte"><div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/components/AddToCartForm.svelte</span></div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="53-tab.vue" class="_tabpanel_1kkny_26"><astro-slot name="panel.vue"><div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/components/AddToCartForm.vue</span></div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="53-tab.zLit" class="_tabpanel_1kkny_26"><astro-slot name="panel.zLit"><div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/components/AddToCartForm.ts</span></div>


</div></astro-slot></div>
</div></astro-island> <p>Finally, we‚Äôll render those cart items inside our <code>CartFlyout</code>:</p> <astro-island uid="Z1JDx2D" component-url="/_astro/Tabs.3d721b18.js" component-export="default" renderer-url="/_astro/client.d87097da.js" props='{"sharedStore":[0,"ui-frameworks"]}' ssr="" client="idle" opts='{"name":"Tabs","value":true}' await-children=""><div class="_container_1kkny_1">
<div class="_tab-scroll-overflow_1kkny_6"><div class="_tablist_1kkny_30 TabGroup no-flex" role="tablist">
<button aria-selected="true" tabindex="0" role="tab" type="button" class="_tab_1kkny_6" id="54-tab.preact"><astro-slot name="tab.preact">Preact</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="54-tab.react"><astro-slot name="tab.react">React</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="54-tab.solid"><astro-slot name="tab.solid">Solid</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="54-tab.svelte"><astro-slot name="tab.svelte">Svelte</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="54-tab.vue"><astro-slot name="tab.vue">Vue</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="54-tab.zLit"><astro-slot name="tab.zLit">Lit</astro-slot></button>
</div></div>
<div role="tabpanel" aria-labelledby="54-tab.preact" class="_tabpanel_1kkny_26"><astro-slot name="panel.preact"><div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/components/CartFlyout.jsx</span></div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="54-tab.react" class="_tabpanel_1kkny_26"><astro-slot name="panel.react"><div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/components/CartFlyout.jsx</span></div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="54-tab.solid" class="_tabpanel_1kkny_26"><astro-slot name="panel.solid"><div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/components/CartFlyout.jsx</span></div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="54-tab.svelte" class="_tabpanel_1kkny_26"><astro-slot name="panel.svelte"><div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/components/CartFlyout.svelte</span></div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="54-tab.vue" class="_tabpanel_1kkny_26"><astro-slot name="panel.vue"><div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/components/CartFlyout.vue</span></div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="54-tab.zLit" class="_tabpanel_1kkny_26"><astro-slot name="panel.zLit"><div class="expressive-code ec ec-s1gwf">
<div class="_pre-heading"><span class="title">src/components/CartFlyout.ts</span></div>


</div></astro-slot></div>
</div></astro-island> <p>Now, you should have a fully interactive ecommerce example with the smallest JS bundle in the galaxy üöÄ</p> <p><a href="https://github.com/withastro/astro/tree/main/examples/with-nanostores"><strong>Try the completed example</strong></a> on your machine or online via Stackblitz!</p> <hr class="astro-763jalmv"> <h2 class="astro-763jalmv">More recipes</h2> <div class="astro-t6xftchq"> <section class="cards-nav astro-t6xftchq astro-kq5jy4fu"> <ul class="fluid-grid astro-oxk5cgh7"> <li class="card card--maximal  astro-kq5jy4fu astro-har75nup"> <div class="stack astro-har75nup"> <h3 class="astro-har75nup"> <a href="index.html" aria-current="page" class="astro-har75nup"> Share State Between Islands </a> </h3> <p class="description astro-kq5jy4fu">Learn how to share state across framework components with Nano Stores.</p> </div> </li>
<li class="card card--maximal  astro-kq5jy4fu astro-har75nup"> <div class="stack astro-har75nup"> <h3 class="astro-har75nup"> <a href="../../guides/rss/index.html" aria-current="false" class="astro-har75nup"> Add an RSS feed </a> </h3> <p class="description astro-kq5jy4fu">Add an RSS feed to your Astro site to let users subscribe to your content.</p> </div> </li>
<li class="card card--maximal  astro-kq5jy4fu astro-har75nup"> <div class="stack astro-har75nup"> <h3 class="astro-har75nup"> <a href="../../recipes/add-yaml-support/index.html" aria-current="false" class="astro-har75nup"> Installing a Vite or Rollup plugin </a> </h3> <p class="description astro-kq5jy4fu">Learn how you can import YAML data by adding a Rollup plugin to your project.</p> </div> </li>
<li class="card card--maximal  astro-kq5jy4fu astro-har75nup"> <div class="stack astro-har75nup"> <h3 class="astro-har75nup"> <a href="../../recipes/build-forms-api/index.html" aria-current="false" class="astro-har75nup"> Build Forms With API Routes </a> </h3> <p class="description astro-kq5jy4fu">Learn how to use JavaScript to send form submissions to an API Route</p> </div> </li>
<li class="card card--maximal  astro-kq5jy4fu astro-har75nup"> <div class="stack astro-har75nup"> <h3 class="astro-har75nup"> <a href="../../recipes/build-forms/index.html" aria-current="false" class="astro-har75nup"> Build HTML Forms in Astro Pages </a> </h3> <p class="description astro-kq5jy4fu">Learn how to build HTML forms and handle submissions in your frontmatter</p> </div> </li>
<li class="card card--maximal  astro-kq5jy4fu astro-har75nup"> <div class="stack astro-har75nup"> <h3 class="astro-har75nup"> <a href="../../recipes/bun/index.html" aria-current="false" class="astro-har75nup"> Use Bun with Astro </a> </h3> <p class="description astro-kq5jy4fu">Learn how to use Bun with your Astro site.</p> </div> </li>
<li class="card card--maximal  astro-kq5jy4fu astro-har75nup"> <div class="stack astro-har75nup"> <h3 class="astro-har75nup"> <a href="../../recipes/call-endpoints/index.html" aria-current="false" class="astro-har75nup"> Call endpoints from the server </a> </h3> <p class="description astro-kq5jy4fu">Learn how to call endpoints from the server in Astro.</p> </div> </li>
<li class="card card--maximal  astro-kq5jy4fu astro-har75nup"> <div class="stack astro-har75nup"> <h3 class="astro-har75nup"> <a href="../../recipes/captcha/index.html" aria-current="false" class="astro-har75nup"> Verify a Captcha </a> </h3> <p class="description astro-kq5jy4fu">Learn how to create an API route and fetch it from the client.</p> </div> </li>
<li class="card card--maximal  astro-kq5jy4fu astro-har75nup"> <div class="stack astro-har75nup"> <h3 class="astro-har75nup"> <a href="../../recipes/docker/index.html" aria-current="false" class="astro-har75nup"> Build your Astro Site with Docker </a> </h3> <p class="description astro-kq5jy4fu">Learn how to build your Astro site using Docker.</p> </div> </li>
<li class="card card--maximal  astro-kq5jy4fu astro-har75nup"> <div class="stack astro-har75nup"> <h3 class="astro-har75nup"> <a href="../../recipes/external-links/index.html" aria-current="false" class="astro-har75nup"> Add icons to external links </a> </h3> <p class="description astro-kq5jy4fu">Learn how to install a rehype plugin to add icons to external links in your Markdown files</p> </div> </li>
<li class="card card--maximal  astro-kq5jy4fu astro-har75nup"> <div class="stack astro-har75nup"> <h3 class="astro-har75nup"> <a href="../../recipes/i18n/index.html" aria-current="false" class="astro-har75nup"> Add i18n features </a> </h3> <p class="description astro-kq5jy4fu">Use dynamic routing and content collections to add internationalization support to your Astro site.</p> </div> </li>
<li class="card card--maximal  astro-kq5jy4fu astro-har75nup"> <div class="stack astro-har75nup"> <h3 class="astro-har75nup"> <a href="../../recipes/modified-time/index.html" aria-current="false" class="astro-har75nup"> Add Last Modified Time </a> </h3> <p class="description astro-kq5jy4fu">Build a remark plugin to add the last modified time to your Markdown and MDX.</p> </div> </li>
<li class="card card--maximal  astro-kq5jy4fu astro-har75nup"> <div class="stack astro-har75nup"> <h3 class="astro-har75nup"> <a href="../../recipes/reading-time/index.html" aria-current="false" class="astro-har75nup"> Add Reading Time </a> </h3> <p class="description astro-kq5jy4fu">Build a remark plugin to add reading time to your Markdown or MDX files.</p> </div> </li>
<li class="card card--maximal  astro-kq5jy4fu astro-har75nup"> <div class="stack astro-har75nup"> <h3 class="astro-har75nup"> <a href="../../recipes/sharing-state/index.html" aria-current="false" class="astro-har75nup"> Share State Between Astro Components </a> </h3> <p class="description astro-kq5jy4fu">Learn how to share state across Astro components with Nano Stores.</p> </div> </li> </ul> </section> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 Fred K. Schott<br>Licensed under the MIT License.<br>
    <a href="https://docs.astro.build/en/core-concepts/sharing-state/" class="_attribution-link">https://docs.astro.build/en/core-concepts/sharing-state/</a>
  </p>
</div>
