<h1>Webapp Database Setup</h1> <p>You must tell Django to create the database tables used by the graphite webapp. This is very straight forward, especially if you are using the default SQLite setup.</p> <p>The following configures the Django database settings. Graphite uses the database for storing user profiles, dashboards, and for the Events functionality. Graphite uses an SQLite database file located at <code class="docutils literal notranslate"><span class="pre">STORAGE_DIR/graphite.db</span></code> by default. If running multiple Graphite-web instances, a database such as PostgreSQL or MySQL is required so that all instances may share the same data source.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">As of Django 1.2, the database configuration is specified by the DATABASES dictionary instead of the old <code class="docutils literal notranslate"><span class="pre">DATABASE_*</span></code> format. Users must use the new specification to have a working database.</p> </div> <p>See the <a class="reference external" href="https://docs.djangoproject.com/en/dev/ref/settings/#databases">Django documentation</a> for full documentation of the DATABASES setting.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">If you are using a custom database backend (other than SQLite) you must first create a $GRAPHITE_ROOT/webapp/graphite/local_settings.py file that overrides the database related settings from settings.py. Use $GRAPHITE_ROOT/webapp/graphite/local_settings.py.example as a template.</p> </div> <p>To set up a new database and create the initial schema, run:</p> <pre data-language="none">PYTHONPATH=$GRAPHITE_ROOT/webapp django-admin.py migrate --settings=graphite.settings --run-syncdb</pre> <p>If you are experiencing problems, uncomment the following line in /opt/graphite/webapp/graphite/local_settings.py:</p> <pre data-language="none"># DEBUG = True</pre> <p>and review your webapp logs. If you’re using the default graphite-example-vhost.conf, your logs will be found in /opt/graphite/storage/log/webapp/.</p> <p>If you’re using the default SQLite database, your webserver will need permissions to read and write to the database file. So, for example, if your webapp is running in Apache as the ‘nobody’ user, you will need to fix the permissions like this:</p> <pre data-language="none">sudo chown nobody:nobody /opt/graphite/storage/graphite.db</pre><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2008&ndash;2012 Chris Davis<br>&copy; 2011&ndash;2016 The Graphite Project<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://graphite.readthedocs.io/en/latest/config-database-setup.html" class="_attribution-link">https://graphite.readthedocs.io/en/latest/config-database-setup.html</a>
  </p>
</div>
