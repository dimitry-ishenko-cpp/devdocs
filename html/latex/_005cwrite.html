<div class="section" id="g_t_005cwrite">   <h3 class="section" id="g_t_005cwrite">\write</h3>  <p>Synopsis: </p>  <pre data-language="latex">\write <var>number</var>{<var>string</var>}
</pre> <p>Write <var>string</var> to the log file, to the terminal, or to a file opened by <code>\openout</code>. For instance, <code>\write6</code> writes to text stream number 6. </p> <p>If the following appears in <samp><var>basefile</var>.tex</samp> then it opens <samp><var>basefile</var>.jh</samp>, writes ‘<samp>Hello World!</samp>’ and a newline to it, and closes that file. </p>  <pre data-language="latex">\newwrite\myfile
\immediate\openout\myfile=\jobname.jh  % \jobname is root file basename
...
\immediate\write\myfile{Hello world!}
...
\immediate\closeout\myfile
</pre>  <p>The <code>\newwrite</code> allocates a stream number, giving it a symbolic name to make life easier, so that <code>stream
\newwrite\myfile\the\myfile</code> produces something like ‘<samp>stream 3</samp>’. Then <code>\openout</code> associates the stream number with the given file name. TeX ultimately executed <code>\write3</code> which puts the string in the file. </p>    <p>Typically <var>number</var> is between 0 and 15, because typically LaTeX authors follow the prior example and the number is allocated by the system. If <var>number</var> is outside the range from 0 to 15 or if it is not associated with an open file then LaTeX writes <var>string</var> to the log file. If <var>number</var> is positive then in addition LaTeX writes <var>string</var> to the terminal. </p> <p>Thus, <code>test \write-1{Hello World!}</code> puts ‘<samp>Hello World!</samp>’ followed by a newline in the log file. (This is what the <code>\wlog</code> command does; see <a href="_005cwlog.html"><code>\wlog</code></a>). And <code>\write100{Hello World!}</code> puts the same in the log file but also puts ‘<samp>Hello World!</samp>’ followed by a newline in the terminal output. (But 16, 17, and 18 are special as <var>number</var>; see below.) </p>  <p>In LuaTeX, instead of 16 output streams there are 256 (see <a href="tex-engines.html">TeX engines</a>). </p>   <p>Use <code>\write\@auxout{<var>string</var>}</code> to write to the current <samp>.aux</samp> file, which is associated with either the root file or with the current include file; and use <code>\write\@mainaux{<var>string</var>}</code> to write to the main <samp>.aux</samp>. These symbolic names are defined by LaTeX. </p> <p>By default LaTeX does not write <var>string</var> to the file right away. This is because, for example, you may need <code>\write</code> to save the current page number, but when TeX comes across a <code>\write</code> it typically does not know what the page number is, since it has not yet done the page breaking. So, you use <code>\write</code> in one of three contexts: </p>  <pre data-language="latex">\immediate\write\@auxout{<var>string</var>}      %1
\write\@auxout{<var>string</var>}                %2
\protected@write\@auxout{}{<var>string</var>}    %3
</pre> <ol> <li>   With the first, LaTeX writes <var>string</var> to the file immediately. Any macros in <var>string</var> are fully expanded (just as in <code>\edef</code>) so to prevent expansion you must use <code>\noexpand</code>, <code>toks</code>, etc., except that you should use <code>#</code> instead of <code>##</code>). </li>
<li>    With the second, <var>string</var> is stored on the current list of things (as a TeX “whatsit” item) and kept until the page is shipped out and likewise the macros are unexpanded until <code>\shipout</code>. At <code>\shipout</code>, <var>string</var> is fully expanded. </li>
<li>  The third, <code>\protected@write</code>, is like the second except that you can use <code>\protect</code> to avoid expansion. The extra first argument allows you to locally insert extra definitions to make more macros protected or to have some other special definition for the write. </li>
</ol> <p>As a simple example of expansion with <code>\write</code>, <var>string</var> here contains a control sequence <code>\triplex</code> which we’ve defined to be the text ‘<samp>XYZ</samp>’: </p>  <pre data-language="latex">\newwrite\jhfile
\openout\jhfile=test.jh
\newcommand{\triplex}{XYZ}
\write\jhfile{test \triplex test}
</pre> <p>This results in the file <samp>test.jh</samp> containing the text ‘<samp>test XYZtest</samp>’ followed by a newline. </p>  <p>The cases where <var>number</var> is 16, 17, or 18 are special. Because of <code>\write</code>’s behavior when <var>number</var> is outside the range from 0 to 15 described above, in Plain TeX <code>\write16</code> and <code>\write17</code> were sometimes used to write to the log file and the terminal; however, in LaTeX, the natural way to do that is with <code>\typeout</code> (see <a href="_005ctypeout.html"><code>\typeout</code></a>). The <code>\write18</code> command is even more special; modern TeX systems use it for giving commands to the operating system (see <a href="_005cwrite18.html"><code>\write18</code></a>). </p>   <p>Ordinarily <code>\write</code> outputs a single line. You can include a newline with <code>^^J</code>. Thus, this produces two lines in the log file: </p>  <pre data-language="latex">\wlog{Parallel lines have a lot in common.^^JBut they never meet.}
</pre>   <p>A common case where authors need to write their own file is for answers to exercises, or another situation where you want to write out verbatim, without expanding the macros. CTAN has a number of packages for this; one is <code>answers</code>. </p> <ul class="section-toc"> <li><a href="_005cwrite-and-security.html" accesskey="1"><code>\write</code> and security</a></li> <li><a href="_005cmessage.html" accesskey="2"><code>\message</code></a></li> <li><a href="_005cwlog.html" accesskey="3"><code>\wlog</code></a></li> <li><a href="_005cwrite18.html" accesskey="4"><code>\write18</code></a></li> </ul> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2007–2018 Karl Berry<br>Public Domain Software<br>
    <a href="http://latexref.xyz/_005cwrite.html" class="_attribution-link">http://latexref.xyz/_005cwrite.html</a>
  </p>
</div>
