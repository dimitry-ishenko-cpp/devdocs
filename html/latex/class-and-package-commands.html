<div class="subsection" id="Class-and-package-commands">   <h4 class="subsection" id="Class-and-package-commands">Class and package commands</h4>   <p>These are the commands designed to help writers of classes or packages. </p> <dl compact> <dt id="index-_005cAtBeginDvi"><span><code>\AtBeginDvi{specials}</code><a href="#index-_005cAtBeginDvi" class="copiable-anchor"> ¶</a></span></dt> <dd>
<p>Save in a box register things that are written to the <samp>.dvi</samp> file at the beginning of the shipout of the first page of the document. </p> </dd> <dt><span><code>\AtEndOfClass{<var>code</var>}</code></span></dt> <dt id="index-_005cAtEndOfClass"><span><code>\AtEndOfPackage{<var>code</var>}</code><a href="#index-_005cAtEndOfClass" class="copiable-anchor"> ¶</a></span></dt> <dd>
 <p>Hook to insert <var>code</var> to be executed when LaTeX finishes processing the current class or package. You can use these hooks multiple times; the <code>code</code> will be executed in the order that you called it. See also <a href="_005catbegindocument.html"><code>\AtBeginDocument</code></a>. </p> </dd> <dt><span><code>\CheckCommand{<var>cmd</var>}[<var>num</var>][<var>default</var>]{<var>definition</var>}</code></span></dt> <dt id="index-_005cCheckCommand"><span><code>\CheckCommand*{<var>cmd</var>}[<var>num</var>][<var>default</var>]{<var>definition</var>}</code><a href="#index-_005cCheckCommand" class="copiable-anchor"> ¶</a></span></dt> <dd>
  <p>Like <code>\newcommand</code> (see <a href="_005cnewcommand-_0026-_005crenewcommand.html"><code>\newcommand</code> &amp; <code>\renewcommand</code></a>) but does not define <var>cmd</var>; instead it checks that the current definition of <var>cmd</var> is exactly as given by <var>definition</var> and is or is not  <em>long</em> as expected. A long command is a command that accepts <code>\par</code> within an argument. The <var>cmd</var> command is expected to be long with the unstarred version of <code>\CheckCommand</code>. Raises an error when the check fails. This allows you to check before you start redefining <code>cmd</code> yourself that no other package has already redefined this command. </p> </dd> <dt><span><code>\ClassError{<var>class name</var>}{<var>error text</var>}{<var>help text</var>}</code></span></dt> <dt><span><code>\PackageError{<var>package name</var>}{<var>error text</var>}{<var>help text</var>}</code></span></dt> <dt><span><code>\ClassWarning{<var>class name</var>}{<var>warning text</var>}</code></span></dt> <dt><span><code>\PackageWarning{<var>package name</var>}{<var>warning text</var>}</code></span></dt> <dt><span><code>\ClassWarningNoLine{<var>class name</var>}{<var>warning text</var>}</code></span></dt> <dt><span><code>\PackageWarningNoLine{<var>package name</var>}{<var>warning text</var>}</code></span></dt> <dt><span><code>\ClassInfo{<var>class name</var>}{<var>info text</var>}</code></span></dt> <dt><span><code>\PackageInfo{<var>package name</var>}{<var>info text</var>}</code></span></dt> <dt><span><code>\ClassInfoNoLine{<var>class name</var>}{<var>info text</var>}</code></span></dt> <dt id="index-_005cClassError"><span><code>\PackageInfoNoLine{<var>package name</var>}{<var>info text</var>}</code><a href="#index-_005cClassError" class="copiable-anchor"> ¶</a></span></dt> <dd>
         <p>Produce an error message, or warning or informational messages. </p> <p>For <code>\ClassError</code> and <code>\PackageError</code> the message is <var>error text</var>, followed by TeX’s <code>?</code> error prompt. If the user then asks for help by typing <code>h</code>, they see the <var>help text</var>. </p> <p>The four warning commands are similar except that they write <var>warning text</var> on the screen with no error prompt. The four info commands write <var>info text</var> only in the transcript file. The <code>NoLine</code> versions do not show the number of the line generating the message, while the other versions do show that number. </p> <p>To format the messages, including the <var>help text</var>: use <code>\protect</code> to stop a command from expanding, get a line break with <code>\MessageBreak</code>, and get a space with <code>\space</code> when a space character does not allow it, like after a command. Note that LaTeX appends a period to the messages. </p> </dd> <dt id="index-_005cCurrentOption"><span><code>\CurrentOption</code><a href="#index-_005cCurrentOption" class="copiable-anchor"> ¶</a></span></dt> <dd>
<p>Expands to the name of the currently-being-processed option. Can only be used within the <var>code</var> argument of either <code>\DeclareOption</code> or <code>\DeclareOption*</code>. </p> </dd> <dt><span><code>\DeclareOption{<var>option</var>}{<var>code</var>}</code></span></dt> <dt id="index-_005cDeclareOption"><span><code>\DeclareOption*{<var>code</var>}</code><a href="#index-_005cDeclareOption" class="copiable-anchor"> ¶</a></span></dt> <dd>
     <p>Make an option available to a user to invoke in their <code>\documentclass</code> command. For example, the <code>smcmemo</code> class could have an option <code>\documentclass[logo]{smcmemo}</code> allowing users to put the institutional logo on the first page. The class file must contain <code>\DeclareOption{logo}{<var>code</var>}</code> (and later, <code>\ProcessOptions</code>). </p> <p>If you request an option that has not been declared, by default this will produce a warning like <code>Unused global option(s):
[badoption].</code> Change this behavior with the starred version <code>\DeclareOption*{<var>code</var>}</code>. For example, many classes extend an existing class, using a command such as <code>\LoadClass{article}</code>, and for passing extra options to the underlying class use code such as this. </p>  <pre data-language="latex">\DeclareOption*{%
\PassOptionsToClass{\CurrentOption}{article}%
}
</pre> <p>Another example is that the class <code>smcmemo</code> may allow users to keep lists of memo recipients in external files. Then the user could invoke <code>\documentclass[math]{smcmemo}</code> and it will read the file <code>math.memo</code>. This code handles the file if it exists and otherwise passes the option to the <code>article</code> class. </p>  <pre data-language="latex">\DeclareOption*{\InputIfFileExists{\CurrentOption.memo}{}{%
    \PassOptionsToClass{\CurrentOption}{article}}}
</pre> </dd> <dt><span><code>\DeclareRobustCommand{<var>cmd</var>}[<var>num</var>][<var>default</var>]{<var>definition</var>}</code></span></dt> <dt id="index-_005cDeclareRobustCommand"><span><code>\DeclareRobustCommand*{<var>cmd</var>}[<var>num</var>][<var>default</var>]{<var>definition</var>}</code><a href="#index-_005cDeclareRobustCommand" class="copiable-anchor"> ¶</a></span></dt> <dd>
  <p>Like <code>\newcommand</code> and <code>\newcommand*</code> (see <a href="_005cnewcommand-_0026-_005crenewcommand.html"><code>\newcommand</code> &amp; <code>\renewcommand</code></a>) but these declare a robust command, even if some code within the <var>definition</var> is fragile. (For a discussion of robust and fragile commands see <a href="_005cprotect.html"><code>\protect</code></a>.) Use this command to define new robust commands or to redefine existing commands and make them robust. Unlike <code>\newcommand</code> these do not give an error if macro <var>cmd</var> already exists; instead, a log message is put into the transcript file if a command is redefined. </p> <p>Commands defined this way are a bit less efficient than those defined using <code>\newcommand</code> so unless the command’s data is fragile and the command is used within a moving argument, use <code>\newcommand</code>. </p>   <p>The <code>etoolbox</code> package offers the commands <code>\newrobustcmd</code>, <code>\newrobustcmd*</code>, as well as the commands <code>\renewrobustcmd</code>, <code>\renewrobustcmd*</code>, and the commands <code>\providerobustcmd</code>, and <code>\providerobustcmd*</code>. These are similar to <code>\newcommand</code>, <code>\newcommand*</code>, <code>\renewcommand</code>, <code>\renewcommand*</code>, <code>\providecommand</code>, and <code>\providecommand*</code>, but define a robust <var>cmd</var> with two advantages as compared to <code>\DeclareRobustCommand</code>: </p>
<ol> <li> They use the low-level e-TeX protection mechanism rather than the higher level LaTeX <code>\protect</code> mechanism, so they do not incur the slight loss of performance mentioned above, and </li>
<li> They make the same distinction between <code>\new…</code>, <code>\renew…</code>, and <code>\provide…</code>, as the standard commands, so they do not just make a log message when you redefine <var>cmd</var> that already exists, in that case you need to use either <code>\renew…</code> or <code>\provide…</code> or you get an error. </li>
</ol> </dd> <dt><span><code>\IfFileExists{<var>filename</var>}{<var>true code</var>}{<var>false code</var>}</code></span></dt> <dt id="index-_005cIfFileExists"><span><code>\InputIfFileExists{<var>filename</var>}{<var>true code</var>}{<var>false code</var>}</code><a href="#index-_005cIfFileExists" class="copiable-anchor"> ¶</a></span></dt> <dd>
 <p>Execute <var>true code</var> if LaTeX finds the file <samp><var>file name</var></samp> or <var>false code</var> otherwise. In the first case it executing <var>true code</var> and then inputs the file. Thus the command </p>  <pre data-language="latex">\IfFileExists{img.pdf}{%
  \includegraphics{img.pdf}}{\typeout{!! img.pdf not found}
</pre> <p>will include the graphic <samp>img.pdf</samp> if it is found and otherwise give a warning. </p> <p>This command looks for the file in all search paths that LaTeX uses, not only in the current directory. To look only in the current directory do something like <code>\IfFileExists{./filename}{<var>true
code</var>}{<var>false code</var>}</code>. If you ask for a filename without a <code>.tex</code> extension then LaTeX will first look for the file by appending the <code>.tex</code>; for more on how LaTeX handles file extensions see <a href="_005cinput.html"><code>\input</code></a>. </p> </dd> <dt><span><code>\LoadClass[<var>options list</var>]{<var>class name</var>}[<var>release date</var>]</code></span></dt> <dt id="index-_005cLoadClass"><span><code>\LoadClassWithOptions{<var>class name</var>}[<var>release date</var>]</code><a href="#index-_005cLoadClass" class="copiable-anchor"> ¶</a></span></dt> <dd>
 <p>Load a class, as with <code>\documentclass[<var>options
list</var>]{<var>class name</var>}[<var>release info</var>]</code>. An example is <code>\LoadClass[twoside]{article}</code>. </p> <p>The <var>options list</var>, if present, is a comma-separated list. The <var>release date</var> is optional. If present it must have the form <var>YYYY/MM/DD</var>. </p> <p>If you request a <var>release date</var> and the date of the package installed on your system is earlier, then you get a warning on the screen and in the log like this. </p>  <pre data-language="latex">You have requested, on input line 4, version `2038/01/19' of
document class article, but only version `2014/09/29 v1.4h
Standard LaTeX document class' is available.
</pre> <p>The command version <code>\LoadClassWithOptions</code> uses the list of options for the current class. This means it ignores any options passed to it via <code>\PassOptionsToClass</code>. This is a convenience command that lets you build classes on existing ones, such as the standard <code>article</code> class, without having to track which options were passed. </p> </dd> <dt id="index-_005cExecuteOptions"><span><code>\ExecuteOptions{<var>options-list</var>}</code><a href="#index-_005cExecuteOptions" class="copiable-anchor"> ¶</a></span></dt> <dd>
<p>For each option <var>option</var> in the <var>options-list</var>, in order, this command executes the command <code>\ds@<var>option</var></code>. If this command is not defined then that option is silently ignored. </p> <p>It can be used to provide a default option list before <code>\ProcessOptions</code>. For example, if in a class file you want the default to be 11pt fonts then you could specify <code>\ExecuteOptions{11pt}\ProcessOptions\relax</code>. </p> </dd> <dt id="index-_005cNeedsTeXFormat"><span><code>\NeedsTeXFormat{<var>format</var>}[<var>format date</var>]</code><a href="#index-_005cNeedsTeXFormat" class="copiable-anchor"> ¶</a></span></dt> <dd>
<p>Specifies the format that this class must be run under. Often issued as the first line of a class file, and most often used as: <code>\NeedsTeXFormat{LaTeX2e}</code>. When a document using that class is processed, the format name given here must match the format that is actually being run (including that the <var>format</var> string is case sensitive). If it does not match then execution stops with an error like ‘<samp>This file needs format `LaTeX2e' but this is `xxx'.</samp>’ </p> <p>To specify a version of the format that you know to have certain features, include the optional <var>format date</var> on which those features were implemented. If present it must be in the form <code>YYYY/MM/DD</code>. If the format version installed on your system is earlier than <var>format date</var> then you get a warning like this. </p>  <pre data-language="latex">You have requested release `2038/01/20' of LaTeX, but only
release `2016/02/01' is available.
</pre> </dd> <dt id="index-_005cOptionNotUsed"><span><code>\OptionNotUsed</code><a href="#index-_005cOptionNotUsed" class="copiable-anchor"> ¶</a></span></dt> <dd>
<p>Adds the current option to the list of unused options. Can only be used within the <var>code</var> argument of either <code>\DeclareOption</code> or <code>\DeclareOption*</code>. </p> </dd> <dt><span><code>\PassOptionsToClass{<var>option list</var>}{<var>class name</var>}</code></span></dt> <dt id="index-_005cPassOptionsToClass"><span><code>\PassOptionsToPackage{<var>option list</var>}{<var>package name</var>}</code><a href="#index-_005cPassOptionsToClass" class="copiable-anchor"> ¶</a></span></dt> <dd>
 <p>Adds the options in the comma-separated list <var>option list</var> to the options used by any future <code>\RequirePackage</code> or <code>\usepackage</code> command for package <var>package name</var> or the class <var>class name</var>. </p> <p>The reason for these commands is: you may load a package any number of times with no options but if you want options then you may only supply them when you first load the package. Loading a package with options more than once will get you an error like <code>Option clash for package
foo.</code> (LaTeX throws an error even if there is no conflict between the options.) </p> <p>If your own code is bringing in a package twice then you can collapse that to once, for example replacing the two <code>\RequirePackage[landscape]{geometry}</code> and <code>\RequirePackage[margins=1in]{geometry}</code> with the single command <code>\RequirePackage[landscape,margins=1in]{geometry}</code>. </p> <p>However, imagine that you are loading <samp>firstpkg</samp> and inside that package it loads <samp>secondpkg</samp>, and you need the second package to be loaded with option <code>draft</code>. Then before doing the first package you must queue up the options for the second package, like this. </p>  <pre data-language="latex">\PassOptionsToPackage{draft}{secondpkg}
\RequirePackage{firstpkg}
</pre> <p>(If <code>firstpkg.sty</code> loads an option in conflict with what you want then you may have to alter its source.) </p> <p>These commands are useful for general users as well as class and package writers. For instance, suppose a user wants to load the <code>graphicx</code> package with the option <code>draft</code> and also wants to use a class <code>foo</code> that loads the <code>graphicx</code> package, but without that option. The user could start their LaTeX file with <code>\PassOptionsToPackage{draft}{graphicx}\documentclass{foo}</code>. </p> </dd> <dt><span><code>\ProcessOptions</code></span></dt> <dt id="index-_005cProcessOptions"><span><code>\ProcessOptions*<var>\@options</var></code><a href="#index-_005cProcessOptions" class="copiable-anchor"> ¶</a></span></dt> <dd>
 <p>Execute the code for each option that the user has invoked. Include it in the class file as <code>\ProcessOptions\relax</code> (because of the existence of the starred command). </p> <p>Options come in two types. <em>Local options</em> have been specified for this particular package in the <var>options</var> argument of <code>\PassOptionsToPackage{<var>options</var>}</code>, <code>\usepackage[<var>options</var>]</code>, or <code>\RequirePackage[<var>options</var>]</code>. <em>Global options</em> are those given by the class user in <code>\documentclass[<var>options</var>]</code> (If an option is specified both locally and globally then it is local.) </p> <p>When <code>\ProcessOptions</code> is called for a package <samp>pkg.sty</samp>, the following happens: </p>
<ol> <li> For each option <var>option</var> so far declared with <code>\DeclareOption</code>, it looks to see if that option is either a global or a local option for <code>pkg</code>. If so then it executes the declared code. This is done in the order in which these options were given in <samp>pkg.sty</samp>. </li>
<li> For each remaining local option, it executes the command <code>\ds@</code><var>option</var> if it has been defined somewhere (other than by a <code>\DeclareOption</code>); otherwise, it executes the default option code given in <code>\DeclareOption*</code>. If no default option code has been declared then it gives an error message. This is done in the order in which these options were specified. </li>
</ol> <p>When <code>\ProcessOptions</code> is called for a class it works in the same way except that all options are local, and the default <var>code</var> for <code>\DeclareOption*</code> is <code>\OptionNotUsed</code> rather than an error. </p> <p>The starred version <code>\ProcessOptions*</code> executes the options in the order specified in the calling commands, rather than in the order of declaration in the class or package. For a package this means that the global options are processed first. </p> </dd> <dt><span><code>\ProvidesClass{<var>class name</var>}[<var>release date</var> <var>brief additional information</var>]</code></span></dt> <dt><span><code>\ProvidesClass{<var>class name</var>}[<var>release date</var>]</code></span></dt> <dt><span><code>\ProvidesPackage{<var>package name</var>}[<var>release date</var> <var>brief additional information</var>]</code></span></dt> <dt id="index-_005cProvidesClass"><span><code>\ProvidesPackage{<var>package name</var>}[<var>release date</var>]</code><a href="#index-_005cProvidesClass" class="copiable-anchor"> ¶</a></span></dt> <dd>
 <p>Identifies the class or package, printing a message to the screen and the log file. </p> <p>When you load a class or package, for example with <code>\documentclass{smcmemo}</code> or <code>\usepackage{test}</code>, LaTeX inputs a file. If the name of the file does not match the class or package name declared in it then you get a warning. Thus, if you invoke <code>\documentclass{smcmemo}</code>, and the file <samp>smcmemo.cls</samp> has the statement <code>\ProvidesClass{xxx}</code> then you get a warning like <code>You have requested document class `smcmemo', but the document
class provides 'xxx'.</code> This warning does not prevent LaTeX from processing the rest of the class file normally. </p> <p>If you include the optional argument then you must include a date, before any spaces, of the form <code>YYYY/MM/DD</code>. The rest of the optional argument is free-form, although it traditionally identifies the class, and is written to the screen during compilation and to the log file. Thus, if your file <samp>smcmemo.cls</samp> contains the line <code>\ProvidesClass{smcmemo}[2008/06/01 v1.0 SMC memo class]</code> and your document’s first line is <code>\documentclass{smcmemo}</code> then you will see <code>Document Class: smcmemo 2008/06/01 v1.0 SMC memo class</code>. </p> <p>The date in the optional argument allows class and package users to ask to be warned if the version of the class or package is earlier than <var>release date</var>. For instance, a user could enter <code>\documentclass{smcmemo}[2018/10/12]</code> or <code>\usepackage{foo}[[2017/07/07]]</code> to require a class or package with certain features by specifying that it must be released no earlier than the given date. (Although, in practice package users only rarely include a date, and class users almost never do.) </p> </dd> <dt id="index-_005cProvidesFile"><span><code>\ProvidesFile{<var>filename</var>}[<var>additional information</var>]</code><a href="#index-_005cProvidesFile" class="copiable-anchor"> ¶</a></span></dt> <dd>
<p>Declare a file other than the main class and package files, such as configuration files or font definition files. Put this command in that file and you get in the log a string like <code>File: test.config
2017/10/12 config file for test.cls</code> for <var>filename</var> equal to ‘<samp>test.config</samp>’ and <var>additional information</var> equal to ‘<samp>2017/10/12 config file for test.cls</samp>’. </p> </dd> <dt><span><code>\RequirePackage[<var>option list</var>]{<var>package name</var>}[<var>release date</var>]</code></span></dt> <dt id="index-_005cRequirePackage"><span><code>\RequirePackageWithOptions{<var>package name</var>}[<var>release date</var>]</code><a href="#index-_005cRequirePackage" class="copiable-anchor"> ¶</a></span></dt> <dd>
 <p>Load a package, like the command <code>\usepackage</code> (see <a href="additional-packages.html">Additional packages</a>). The LaTeX development team strongly recommends use of these commands over Plain TeX’s <code>\input</code>; see the Class Guide. An example is <code>\RequirePackage[landscape,margin=1in]{geometry}</code>. </p> <p>The <var>option list</var>, if present, is a comma-separated list. The <var>release date</var>, if present, must have the form <var>YYYY/MM/DD</var>. If the release date of the package as installed on your system is earlier than <var>release date</var> then you get a warning like <code>You have
requested, on input line 9, version `2017/07/03' of package jhtest, but
only version `2000/01/01' is available</code>. </p> <p>The <code>\RequirePackageWithOptions</code> version uses the list of options for the current class. This means it ignores any options passed to it via <code>\PassOptionsToClass</code>. This is a convenience command to allow easily building classes on existing ones without having to track which options were passed. </p> <p>The difference between <code>\usepackage</code> and <code>\RequirePackage</code> is small. The <code>\usepackage</code> command is intended for the document file while <code>\RequirePackage</code> is intended for package and class files. Thus, using <code>\usepackage</code> before the <code>\documentclass</code> command causes LaTeX to give error like <code>\usepackage before
\documentclass</code>, but you can use <code>\RequirePackage</code> there. </p>
</dd> </dl> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2007–2018 Karl Berry<br>Public Domain Software<br>
    <a href="http://latexref.xyz/Class-and-package-commands.html" class="_attribution-link">http://latexref.xyz/Class-and-package-commands.html</a>
  </p>
</div>
