<h1 id="django-contrib-auth">django.contrib.auth</h1> <p id="s-django-contrib-auth">This document provides API reference material for the components of Django’s authentication system. For more details on the usage of these components or how to customize authentication and authorization see the <a class="reference internal" href="../../topics/auth/index.html"><span class="doc">authentication topic guide</span></a>.</p>  <h2 id="user-model">
<code>User</code> model</h2> <dl class="py class" id="s-user-model"> <dt class="sig sig-object py" id="django.contrib.auth.models.User">
<code>class models.User</code> </dt> 
</dl>  <h3 id="fields">Fields</h3> <dl class="py class" id="s-fields"> <dt class="sig sig-object py">
<code>class models.User</code> </dt> <dd>
<p><a class="reference internal" href="#django.contrib.auth.models.User" title="django.contrib.auth.models.User"><code>User</code></a> objects have the following fields:</p> <dl class="py attribute"> <dt class="sig sig-object py" id="django.contrib.auth.models.User.username">
<code>username</code> </dt> <dd>
<p>Required. 150 characters or fewer. Usernames may contain alphanumeric, <code>_</code>, <code>@</code>, <code>+</code>, <code>.</code> and <code>-</code> characters.</p> <p>The <code>max_length</code> should be sufficient for many use cases. If you need a longer length, please use a <a class="reference internal" href="../../topics/auth/customizing.html#specifying-custom-user-model"><span class="std std-ref">custom user model</span></a>. If you use MySQL with the <code>utf8mb4</code> encoding (recommended for proper Unicode support), specify at most <code>max_length=191</code> because MySQL can only create unique indexes with 191 characters in that case by default.</p> </dd>
</dl> <dl class="py attribute"> <dt class="sig sig-object py" id="django.contrib.auth.models.User.first_name">
<code>first_name</code> </dt> <dd>
<p>Optional (<a class="reference internal" href="../models/fields.html#django.db.models.Field.blank" title="django.db.models.Field.blank"><code>blank=True</code></a>). 150 characters or fewer.</p> </dd>
</dl> <dl class="py attribute"> <dt class="sig sig-object py" id="django.contrib.auth.models.User.last_name">
<code>last_name</code> </dt> <dd>
<p>Optional (<a class="reference internal" href="../models/fields.html#django.db.models.Field.blank" title="django.db.models.Field.blank"><code>blank=True</code></a>). 150 characters or fewer.</p> </dd>
</dl> <dl class="py attribute"> <dt class="sig sig-object py" id="django.contrib.auth.models.User.email">
<code>email</code> </dt> <dd>
<p>Optional (<a class="reference internal" href="../models/fields.html#django.db.models.Field.blank" title="django.db.models.Field.blank"><code>blank=True</code></a>). Email address.</p> </dd>
</dl> <dl class="py attribute"> <dt class="sig sig-object py" id="django.contrib.auth.models.User.password">
<code>password</code> </dt> <dd>
<p>Required. A hash of, and metadata about, the password. (Django doesn’t store the raw password.) Raw passwords can be arbitrarily long and can contain any character. See the <a class="reference internal" href="../../topics/auth/passwords.html"><span class="doc">password documentation</span></a>.</p> </dd>
</dl> <dl class="py attribute"> <dt class="sig sig-object py" id="django.contrib.auth.models.User.groups">
<code>groups</code> </dt> <dd>
<p>Many-to-many relationship to <a class="reference internal" href="#django.contrib.auth.models.Group" title="django.contrib.auth.models.Group"><code>Group</code></a></p> </dd>
</dl> <dl class="py attribute"> <dt class="sig sig-object py" id="django.contrib.auth.models.User.user_permissions">
<code>user_permissions</code> </dt> <dd>
<p>Many-to-many relationship to <a class="reference internal" href="#django.contrib.auth.models.Permission" title="django.contrib.auth.models.Permission"><code>Permission</code></a></p> </dd>
</dl> <dl class="py attribute"> <dt class="sig sig-object py" id="django.contrib.auth.models.User.is_staff">
<code>is_staff</code> </dt> <dd>
<p>Boolean. Allows this user to access the admin site.</p> </dd>
</dl> <dl class="py attribute"> <dt class="sig sig-object py" id="django.contrib.auth.models.User.is_active">
<code>is_active</code> </dt> <dd>
<p>Boolean. Marks this user account as active. We recommend that you set this flag to <code>False</code> instead of deleting accounts. That way, if your applications have any foreign keys to users, the foreign keys won’t break.</p> <p>This doesn’t necessarily control whether or not the user can log in. Authentication backends aren’t required to check for the <code>is_active</code> flag but the default backend (<a class="reference internal" href="#django.contrib.auth.backends.ModelBackend" title="django.contrib.auth.backends.ModelBackend"><code>ModelBackend</code></a>) and the <a class="reference internal" href="#django.contrib.auth.backends.RemoteUserBackend" title="django.contrib.auth.backends.RemoteUserBackend"><code>RemoteUserBackend</code></a> do. You can use <a class="reference internal" href="#django.contrib.auth.backends.AllowAllUsersModelBackend" title="django.contrib.auth.backends.AllowAllUsersModelBackend"><code>AllowAllUsersModelBackend</code></a> or <a class="reference internal" href="#django.contrib.auth.backends.AllowAllUsersRemoteUserBackend" title="django.contrib.auth.backends.AllowAllUsersRemoteUserBackend"><code>AllowAllUsersRemoteUserBackend</code></a> if you want to allow inactive users to login. In this case, you’ll also want to customize the <a class="reference internal" href="../../topics/auth/default.html#django.contrib.auth.forms.AuthenticationForm" title="django.contrib.auth.forms.AuthenticationForm"><code>AuthenticationForm</code></a> used by the <a class="reference internal" href="../../topics/auth/default.html#django.contrib.auth.views.LoginView" title="django.contrib.auth.views.LoginView"><code>LoginView</code></a> as it rejects inactive users. Be aware that the permission-checking methods such as <a class="reference internal" href="#django.contrib.auth.models.User.has_perm" title="django.contrib.auth.models.User.has_perm"><code>has_perm()</code></a> and the authentication in the Django admin all return <code>False</code> for inactive users.</p> </dd>
</dl> <dl class="py attribute"> <dt class="sig sig-object py" id="django.contrib.auth.models.User.is_superuser">
<code>is_superuser</code> </dt> <dd>
<p>Boolean. Treats this user as having all permissions without assigning any permission to it in particular.</p> </dd>
</dl> <dl class="py attribute"> <dt class="sig sig-object py" id="django.contrib.auth.models.User.last_login">
<code>last_login</code> </dt> <dd>
<p>A datetime of the user’s last login.</p> </dd>
</dl> <dl class="py attribute"> <dt class="sig sig-object py" id="django.contrib.auth.models.User.date_joined">
<code>date_joined</code> </dt> <dd>
<p>The date/time when the account was created.</p> </dd>
</dl> </dd>
</dl>   <h3 id="attributes">Attributes</h3> <dl class="py class" id="s-attributes"> <dt class="sig sig-object py">
<code>class models.User</code> </dt> <dd>
<dl class="py attribute"> <dt class="sig sig-object py" id="django.contrib.auth.models.User.is_authenticated">
<code>is_authenticated</code> </dt> <dd>
<p>Read-only attribute which is always <code>True</code> (as opposed to <code>AnonymousUser.is_authenticated</code> which is always <code>False</code>). This is a way to tell if the user has been authenticated. This does not imply any permissions and doesn’t check if the user is active or has a valid session. Even though normally you will check this attribute on <code>request.user</code> to find out whether it has been populated by the <a class="reference internal" href="../middleware.html#django.contrib.auth.middleware.AuthenticationMiddleware" title="django.contrib.auth.middleware.AuthenticationMiddleware"><code>AuthenticationMiddleware</code></a> (representing the currently logged-in user), you should know this attribute is <code>True</code> for any <a class="reference internal" href="#django.contrib.auth.models.User" title="django.contrib.auth.models.User"><code>User</code></a> instance.</p> </dd>
</dl> <dl class="py attribute"> <dt class="sig sig-object py" id="django.contrib.auth.models.User.is_anonymous">
<code>is_anonymous</code> </dt> <dd>
<p>Read-only attribute which is always <code>False</code>. This is a way of differentiating <a class="reference internal" href="#django.contrib.auth.models.User" title="django.contrib.auth.models.User"><code>User</code></a> and <a class="reference internal" href="#django.contrib.auth.models.AnonymousUser" title="django.contrib.auth.models.AnonymousUser"><code>AnonymousUser</code></a> objects. Generally, you should prefer using <a class="reference internal" href="#django.contrib.auth.models.User.is_authenticated" title="django.contrib.auth.models.User.is_authenticated"><code>is_authenticated</code></a> to this attribute.</p> </dd>
</dl> </dd>
</dl>   <h3 id="methods">Methods</h3> <dl class="py class" id="s-methods"> <dt class="sig sig-object py">
<code>class models.User</code> </dt> <dd>
<dl class="py method"> <dt class="sig sig-object py" id="django.contrib.auth.models.User.get_username">
<code>get_username()</code> </dt> <dd>
<p>Returns the username for the user. Since the <code>User</code> model can be swapped out, you should use this method instead of referencing the username attribute directly.</p> </dd>
</dl> <dl class="py method"> <dt class="sig sig-object py" id="django.contrib.auth.models.User.get_full_name">
<code>get_full_name()</code> </dt> <dd>
<p>Returns the <a class="reference internal" href="#django.contrib.auth.models.User.first_name" title="django.contrib.auth.models.User.first_name"><code>first_name</code></a> plus the <a class="reference internal" href="#django.contrib.auth.models.User.last_name" title="django.contrib.auth.models.User.last_name"><code>last_name</code></a>, with a space in between.</p> </dd>
</dl> <dl class="py method"> <dt class="sig sig-object py" id="django.contrib.auth.models.User.get_short_name">
<code>get_short_name()</code> </dt> <dd>
<p>Returns the <a class="reference internal" href="#django.contrib.auth.models.User.first_name" title="django.contrib.auth.models.User.first_name"><code>first_name</code></a>.</p> </dd>
</dl> <dl class="py method"> <dt class="sig sig-object py" id="django.contrib.auth.models.User.set_password">
<code>set_password(raw_password)</code> </dt> <dd>
<p>Sets the user’s password to the given raw string, taking care of the password hashing. Doesn’t save the <a class="reference internal" href="#django.contrib.auth.models.User" title="django.contrib.auth.models.User"><code>User</code></a> object.</p> <p>When the <code>raw_password</code> is <code>None</code>, the password will be set to an unusable password, as if <a class="reference internal" href="#django.contrib.auth.models.User.set_unusable_password" title="django.contrib.auth.models.User.set_unusable_password"><code>set_unusable_password()</code></a> were used.</p> </dd>
</dl> <dl class="py method"> <dt class="sig sig-object py" id="django.contrib.auth.models.User.check_password">
<code>check_password(raw_password)</code> </dt> 
</dl> <dl class="py method"> <dt class="sig sig-object py" id="django.contrib.auth.models.User.acheck_password">
<code>acheck_password(raw_password)</code> </dt> <dd>
<p><em>Asynchronous version</em>: <code>acheck_password()</code></p> <p>Returns <code>True</code> if the given raw string is the correct password for the user. (This takes care of the password hashing in making the comparison.)</p> <div class="versionchanged"> <span class="title">Changed in Django 5.0:</span> <p><code>acheck_password()</code> method was added.</p> </div> </dd>
</dl> <dl class="py method"> <dt class="sig sig-object py" id="django.contrib.auth.models.User.set_unusable_password">
<code>set_unusable_password()</code> </dt> <dd>
<p>Marks the user as having no password set. This isn’t the same as having a blank string for a password. <a class="reference internal" href="#django.contrib.auth.models.User.check_password" title="django.contrib.auth.models.User.check_password"><code>check_password()</code></a> for this user will never return <code>True</code>. Doesn’t save the <a class="reference internal" href="#django.contrib.auth.models.User" title="django.contrib.auth.models.User"><code>User</code></a> object.</p> <p>You may need this if authentication for your application takes place against an existing external source such as an LDAP directory.</p> <div class="admonition-password-reset-restriction admonition"> <p class="first admonition-title">Password reset restriction</p> <p class="last">Users having an unusable password will not able to request a password reset email via <a class="reference internal" href="../../topics/auth/default.html#django.contrib.auth.views.PasswordResetView" title="django.contrib.auth.views.PasswordResetView"><code>PasswordResetView</code></a>.</p> </div> </dd>
</dl> <dl class="py method"> <dt class="sig sig-object py" id="django.contrib.auth.models.User.has_usable_password">
<code>has_usable_password()</code> </dt> <dd>
<p>Returns <code>False</code> if <a class="reference internal" href="#django.contrib.auth.models.User.set_unusable_password" title="django.contrib.auth.models.User.set_unusable_password"><code>set_unusable_password()</code></a> has been called for this user.</p> </dd>
</dl> <dl class="py method"> <dt class="sig sig-object py" id="django.contrib.auth.models.User.get_user_permissions">
<code>get_user_permissions(obj=None)</code> </dt> <dd>
<p>Returns a set of permission strings that the user has directly.</p> <p>If <code>obj</code> is passed in, only returns the user permissions for this specific object.</p> </dd>
</dl> <dl class="py method"> <dt class="sig sig-object py" id="django.contrib.auth.models.User.get_group_permissions">
<code>get_group_permissions(obj=None)</code> </dt> <dd>
<p>Returns a set of permission strings that the user has, through their groups.</p> <p>If <code>obj</code> is passed in, only returns the group permissions for this specific object.</p> </dd>
</dl> <dl class="py method"> <dt class="sig sig-object py" id="django.contrib.auth.models.User.get_all_permissions">
<code>get_all_permissions(obj=None)</code> </dt> <dd>
<p>Returns a set of permission strings that the user has, both through group and user permissions.</p> <p>If <code>obj</code> is passed in, only returns the permissions for this specific object.</p> </dd>
</dl> <dl class="py method"> <dt class="sig sig-object py" id="django.contrib.auth.models.User.has_perm">
<code>has_perm(perm, obj=None)</code> </dt> <dd>
<p>Returns <code>True</code> if the user has the specified permission, where perm is in the format <code>"&lt;app label&gt;.&lt;permission codename&gt;"</code>. (see documentation on <a class="reference internal" href="../../topics/auth/default.html#topic-authorization"><span class="std std-ref">permissions</span></a>). If the user is inactive, this method will always return <code>False</code>. For an active superuser, this method will always return <code>True</code>.</p> <p>If <code>obj</code> is passed in, this method won’t check for a permission for the model, but for this specific object.</p> </dd>
</dl> <dl class="py method"> <dt class="sig sig-object py" id="django.contrib.auth.models.User.has_perms">
<code>has_perms(perm_list, obj=None)</code> </dt> <dd>
<p>Returns <code>True</code> if the user has each of the specified permissions, where each perm is in the format <code>"&lt;app label&gt;.&lt;permission codename&gt;"</code>. If the user is inactive, this method will always return <code>False</code>. For an active superuser, this method will always return <code>True</code>.</p> <p>If <code>obj</code> is passed in, this method won’t check for permissions for the model, but for the specific object.</p> </dd>
</dl> <dl class="py method"> <dt class="sig sig-object py" id="django.contrib.auth.models.User.has_module_perms">
<code>has_module_perms(package_name)</code> </dt> <dd>
<p>Returns <code>True</code> if the user has any permissions in the given package (the Django app label). If the user is inactive, this method will always return <code>False</code>. For an active superuser, this method will always return <code>True</code>.</p> </dd>
</dl> <dl class="py method"> <dt class="sig sig-object py" id="django.contrib.auth.models.User.email_user">
<code>email_user(subject, message, from_email=None, **kwargs)</code> </dt> <dd>
<p>Sends an email to the user. If <code>from_email</code> is <code>None</code>, Django uses the <a class="reference internal" href="../settings.html#std-setting-DEFAULT_FROM_EMAIL"><code>DEFAULT_FROM_EMAIL</code></a>. Any <code>**kwargs</code> are passed to the underlying <a class="reference internal" href="../../topics/email.html#django.core.mail.send_mail" title="django.core.mail.send_mail"><code>send_mail()</code></a> call.</p> </dd>
</dl> </dd>
</dl>   <h3 id="manager-methods">Manager methods</h3> <dl class="py class" id="s-manager-methods"> <dt class="sig sig-object py" id="django.contrib.auth.models.UserManager">
<code>class models.UserManager</code> </dt> <dd>
<p>The <a class="reference internal" href="#django.contrib.auth.models.User" title="django.contrib.auth.models.User"><code>User</code></a> model has a custom manager that has the following helper methods (in addition to the methods provided by <a class="reference internal" href="../../topics/auth/customizing.html#django.contrib.auth.models.BaseUserManager" title="django.contrib.auth.models.BaseUserManager"><code>BaseUserManager</code></a>):</p> <dl class="py method"> <dt class="sig sig-object py" id="django.contrib.auth.models.UserManager.create_user">
<code>create_user(username, email=None, password=None, **extra_fields)</code> </dt> <dd>
<p>Creates, saves and returns a <a class="reference internal" href="#django.contrib.auth.models.User" title="django.contrib.auth.models.User"><code>User</code></a>.</p> <p>The <a class="reference internal" href="#django.contrib.auth.models.User.username" title="django.contrib.auth.models.User.username"><code>username</code></a> and <a class="reference internal" href="#django.contrib.auth.models.User.password" title="django.contrib.auth.models.User.password"><code>password</code></a> are set as given. The domain portion of <a class="reference internal" href="#django.contrib.auth.models.User.email" title="django.contrib.auth.models.User.email"><code>email</code></a> is automatically converted to lowercase, and the returned <a class="reference internal" href="#django.contrib.auth.models.User" title="django.contrib.auth.models.User"><code>User</code></a> object will have <a class="reference internal" href="#django.contrib.auth.models.User.is_active" title="django.contrib.auth.models.User.is_active"><code>is_active</code></a> set to <code>True</code>.</p> <p>If no password is provided, <a class="reference internal" href="#django.contrib.auth.models.User.set_unusable_password" title="django.contrib.auth.models.User.set_unusable_password"><code>set_unusable_password()</code></a> will be called.</p> <p>The <code>extra_fields</code> keyword arguments are passed through to the <a class="reference internal" href="#django.contrib.auth.models.User" title="django.contrib.auth.models.User"><code>User</code></a>’s <code>__init__</code> method to allow setting arbitrary fields on a <a class="reference internal" href="../../topics/auth/customizing.html#auth-custom-user"><span class="std std-ref">custom user model</span></a>.</p> <p>See <a class="reference internal" href="../../topics/auth/default.html#topics-auth-creating-users"><span class="std std-ref">Creating users</span></a> for example usage.</p> </dd>
</dl> <dl class="py method"> <dt class="sig sig-object py" id="django.contrib.auth.models.UserManager.create_superuser">
<code>create_superuser(username, email=None, password=None, **extra_fields)</code> </dt> <dd>
<p>Same as <a class="reference internal" href="#django.contrib.auth.models.UserManager.create_user" title="django.contrib.auth.models.UserManager.create_user"><code>create_user()</code></a>, but sets <a class="reference internal" href="#django.contrib.auth.models.User.is_staff" title="django.contrib.auth.models.User.is_staff"><code>is_staff</code></a> and <a class="reference internal" href="#django.contrib.auth.models.User.is_superuser" title="django.contrib.auth.models.User.is_superuser"><code>is_superuser</code></a> to <code>True</code>.</p> </dd>
</dl> <dl class="py method"> <dt class="sig sig-object py" id="django.contrib.auth.models.UserManager.with_perm">
<code>with_perm(perm, is_active=True, include_superusers=True, backend=None, obj=None)</code> </dt> <dd>
<p>Returns users that have the given permission <code>perm</code> either in the <code>"&lt;app label&gt;.&lt;permission codename&gt;"</code> format or as a <a class="reference internal" href="#django.contrib.auth.models.Permission" title="django.contrib.auth.models.Permission"><code>Permission</code></a> instance. Returns an empty queryset if no users who have the <code>perm</code> found.</p> <p>If <code>is_active</code> is <code>True</code> (default), returns only active users, or if <code>False</code>, returns only inactive users. Use <code>None</code> to return all users irrespective of active state.</p> <p>If <code>include_superusers</code> is <code>True</code> (default), the result will include superusers.</p> <p>If <code>backend</code> is passed in and it’s defined in <a class="reference internal" href="../settings.html#std-setting-AUTHENTICATION_BACKENDS"><code>AUTHENTICATION_BACKENDS</code></a>, then this method will use it. Otherwise, it will use the <code>backend</code> in <a class="reference internal" href="../settings.html#std-setting-AUTHENTICATION_BACKENDS"><code>AUTHENTICATION_BACKENDS</code></a>, if there is only one, or raise an exception.</p> </dd>
</dl> </dd>
</dl>    <h2 id="anonymoususer-object">
<code>AnonymousUser</code> object</h2> <dl class="py class" id="s-anonymoususer-object"> <dt class="sig sig-object py" id="django.contrib.auth.models.AnonymousUser">
<code>class models.AnonymousUser</code> </dt> <dd>
<p><a class="reference internal" href="#django.contrib.auth.models.AnonymousUser" title="django.contrib.auth.models.AnonymousUser"><code>django.contrib.auth.models.AnonymousUser</code></a> is a class that implements the <a class="reference internal" href="#django.contrib.auth.models.User" title="django.contrib.auth.models.User"><code>django.contrib.auth.models.User</code></a> interface, with these differences:</p> <ul class="simple"> <li>
<a class="reference internal" href="../../topics/db/models.html#automatic-primary-key-fields"><span class="std std-ref">id</span></a> is always <code>None</code>.</li> <li>
<a class="reference internal" href="#django.contrib.auth.models.User.username" title="django.contrib.auth.models.User.username"><code>username</code></a> is always the empty string.</li> <li>
<a class="reference internal" href="#django.contrib.auth.models.User.get_username" title="django.contrib.auth.models.User.get_username"><code>get_username()</code></a> always returns the empty string.</li> <li>
<a class="reference internal" href="#django.contrib.auth.models.User.is_anonymous" title="django.contrib.auth.models.User.is_anonymous"><code>is_anonymous</code></a> is <code>True</code> instead of <code>False</code>.</li> <li>
<a class="reference internal" href="#django.contrib.auth.models.User.is_authenticated" title="django.contrib.auth.models.User.is_authenticated"><code>is_authenticated</code></a> is <code>False</code> instead of <code>True</code>.</li> <li>
<a class="reference internal" href="#django.contrib.auth.models.User.is_staff" title="django.contrib.auth.models.User.is_staff"><code>is_staff</code></a> and <a class="reference internal" href="#django.contrib.auth.models.User.is_superuser" title="django.contrib.auth.models.User.is_superuser"><code>is_superuser</code></a> are always <code>False</code>.</li> <li>
<a class="reference internal" href="#django.contrib.auth.models.User.is_active" title="django.contrib.auth.models.User.is_active"><code>is_active</code></a> is always <code>False</code>.</li> <li>
<a class="reference internal" href="#django.contrib.auth.models.User.groups" title="django.contrib.auth.models.User.groups"><code>groups</code></a> and <a class="reference internal" href="#django.contrib.auth.models.User.user_permissions" title="django.contrib.auth.models.User.user_permissions"><code>user_permissions</code></a> are always empty.</li> <li>
<a class="reference internal" href="#django.contrib.auth.models.User.set_password" title="django.contrib.auth.models.User.set_password"><code>set_password()</code></a>, <a class="reference internal" href="#django.contrib.auth.models.User.check_password" title="django.contrib.auth.models.User.check_password"><code>check_password()</code></a>, <a class="reference internal" href="../models/instances.html#django.db.models.Model.save" title="django.db.models.Model.save"><code>save()</code></a> and <a class="reference internal" href="../models/instances.html#django.db.models.Model.delete" title="django.db.models.Model.delete"><code>delete()</code></a> raise <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#NotImplementedError" title="(in Python v3.12)"><code>NotImplementedError</code></a>.</li> </ul> </dd>
</dl> <p>In practice, you probably won’t need to use <a class="reference internal" href="#django.contrib.auth.models.AnonymousUser" title="django.contrib.auth.models.AnonymousUser"><code>AnonymousUser</code></a> objects on your own, but they’re used by web requests, as explained in the next section.</p>   <h2 id="permission-model">
<code>Permission</code> model</h2> <dl class="py class" id="s-permission-model"> <dt class="sig sig-object py" id="django.contrib.auth.models.Permission">
<code>class models.Permission</code> </dt> 
</dl>  <h3 id="id1">Fields</h3> <p id="s-id1"><a class="reference internal" href="#django.contrib.auth.models.Permission" title="django.contrib.auth.models.Permission"><code>Permission</code></a> objects have the following fields:</p> <dl class="py class"> <dt class="sig sig-object py">
<code>class models.Permission</code> </dt> <dd>
<dl class="py attribute"> <dt class="sig sig-object py" id="django.contrib.auth.models.Permission.name">
<code>name</code> </dt> <dd>
<p>Required. 255 characters or fewer. Example: <code>'Can vote'</code>.</p> </dd>
</dl> <dl class="py attribute"> <dt class="sig sig-object py" id="django.contrib.auth.models.Permission.content_type">
<code>content_type</code> </dt> <dd>
<p>Required. A reference to the <code>django_content_type</code> database table, which contains a record for each installed model.</p> </dd>
</dl> <dl class="py attribute"> <dt class="sig sig-object py" id="django.contrib.auth.models.Permission.codename">
<code>codename</code> </dt> <dd>
<p>Required. 100 characters or fewer. Example: <code>'can_vote'</code>.</p> </dd>
</dl> </dd>
</dl>   <h3 id="id2">Methods</h3> <p id="s-id2"><a class="reference internal" href="#django.contrib.auth.models.Permission" title="django.contrib.auth.models.Permission"><code>Permission</code></a> objects have the standard data-access methods like any other <a class="reference internal" href="../models/instances.html"><span class="doc">Django model</span></a>.</p>    <h2 id="group-model">
<code>Group</code> model</h2> <dl class="py class" id="s-group-model"> <dt class="sig sig-object py" id="django.contrib.auth.models.Group">
<code>class models.Group</code> </dt> 
</dl>  <h3 id="id3">Fields</h3> <p id="s-id3"><a class="reference internal" href="#django.contrib.auth.models.Group" title="django.contrib.auth.models.Group"><code>Group</code></a> objects have the following fields:</p> <dl class="py class"> <dt class="sig sig-object py">
<code>class models.Group</code> </dt> <dd>
<dl class="py attribute"> <dt class="sig sig-object py" id="django.contrib.auth.models.Group.name">
<code>name</code> </dt> <dd>
<p>Required. 150 characters or fewer. Any characters are permitted. Example: <code>'Awesome Users'</code>.</p> </dd>
</dl> <dl class="py attribute"> <dt class="sig sig-object py" id="django.contrib.auth.models.Group.permissions">
<code>permissions</code> </dt> <dd>
<p>Many-to-many field to <a class="reference internal" href="#django.contrib.auth.models.Permission" title="django.contrib.auth.models.Permission"><code>Permission</code></a>:</p> <pre data-language="python">group.permissions.set([permission_list])
group.permissions.add(permission, permission, ...)
group.permissions.remove(permission, permission, ...)
group.permissions.clear()
</pre> </dd>
</dl> </dd>
</dl>    <h2 id="validators">Validators</h2> <dl class="py class" id="s-validators"> <dt class="sig sig-object py" id="django.contrib.auth.validators.ASCIIUsernameValidator">
<code>class validators.ASCIIUsernameValidator</code> </dt> <dd>
<p>A field validator allowing only ASCII letters and numbers, in addition to <code>@</code>, <code>.</code>, <code>+</code>, <code>-</code>, and <code>_</code>.</p> </dd>
</dl> <dl class="py class"> <dt class="sig sig-object py" id="django.contrib.auth.validators.UnicodeUsernameValidator">
<code>class validators.UnicodeUsernameValidator</code> </dt> <dd>
<p>A field validator allowing Unicode characters, in addition to <code>@</code>, <code>.</code>, <code>+</code>, <code>-</code>, and <code>_</code>. The default validator for <code>User.username</code>.</p> </dd>
</dl>   <h2 id="topics-auth-signals">Login and logout signals</h2> <p id="s-module-django.contrib.auth.signals">The auth framework uses the following <a class="reference internal" href="../../topics/signals.html"><span class="doc">signals</span></a> that can be used for notification when a user logs in or out.</p> <dl class="py data"> <dt class="sig sig-object py" id="django.contrib.auth.signals.user_logged_in">
<code>user_logged_in</code> </dt> <dd>
<p>Sent when a user logs in successfully.</p> <p>Arguments sent with this signal:</p> <dl class="docutils"> <dt>
<code>sender</code> </dt>
<dd>The class of the user that just logged in.</dd> <dt>
<code>request</code> </dt>
<dd>The current <a class="reference internal" href="../request-response.html#django.http.HttpRequest" title="django.http.HttpRequest"><code>HttpRequest</code></a> instance.</dd> <dt>
<code>user</code> </dt>
<dd>The user instance that just logged in.</dd> </dl> </dd>
</dl> <dl class="py data"> <dt class="sig sig-object py" id="django.contrib.auth.signals.user_logged_out">
<code>user_logged_out</code> </dt> <dd>
<p>Sent when the logout method is called.</p> <dl class="docutils"> <dt>
<code>sender</code> </dt>
<dd>As above: the class of the user that just logged out or <code>None</code> if the user was not authenticated.</dd> <dt>
<code>request</code> </dt>
<dd>The current <a class="reference internal" href="../request-response.html#django.http.HttpRequest" title="django.http.HttpRequest"><code>HttpRequest</code></a> instance.</dd> <dt>
<code>user</code> </dt>
<dd>The user instance that just logged out or <code>None</code> if the user was not authenticated.</dd> </dl> </dd>
</dl> <dl class="py data"> <dt class="sig sig-object py" id="django.contrib.auth.signals.user_login_failed">
<code>user_login_failed</code> </dt> <dd>
<p>Sent when the user failed to login successfully</p> <dl class="docutils"> <dt>
<code>sender</code> </dt>
<dd>The name of the module used for authentication.</dd> <dt>
<code>credentials</code> </dt>
<dd>A dictionary of keyword arguments containing the user credentials that were passed to <a class="reference internal" href="../../topics/auth/default.html#django.contrib.auth.authenticate" title="django.contrib.auth.authenticate"><code>authenticate()</code></a> or your own custom authentication backend. Credentials matching a set of ‘sensitive’ patterns, (including password) will not be sent in the clear as part of the signal.</dd> <dt>
<code>request</code> </dt>
<dd>The <a class="reference internal" href="../request-response.html#django.http.HttpRequest" title="django.http.HttpRequest"><code>HttpRequest</code></a> object, if one was provided to <a class="reference internal" href="../../topics/auth/default.html#django.contrib.auth.authenticate" title="django.contrib.auth.authenticate"><code>authenticate()</code></a>.</dd> </dl> </dd>
</dl>   <h2 id="authentication-backends-reference">Authentication backends</h2> <p id="s-module-django.contrib.auth.backends">This section details the authentication backends that come with Django. For information on how to use them and how to write your own authentication backends, see the <a class="reference internal" href="../../topics/auth/customizing.html#authentication-backends"><span class="std std-ref">Other authentication sources section</span></a> of the <a class="reference internal" href="../../topics/auth/index.html"><span class="doc">User authentication guide</span></a>.</p>  <h3 id="available-authentication-backends">Available authentication backends</h3> <p id="s-available-authentication-backends">The following backends are available in <a class="reference internal" href="#module-django.contrib.auth.backends" title="django.contrib.auth.backends: Django's built-in authentication backend classes."><code>django.contrib.auth.backends</code></a>:</p> <dl class="py class"> <dt class="sig sig-object py" id="django.contrib.auth.backends.BaseBackend">
<code>class BaseBackend</code> </dt> <dd>
<p>A base class that provides default implementations for all required methods. By default, it will reject any user and provide no permissions.</p> <dl class="py method"> <dt class="sig sig-object py" id="django.contrib.auth.backends.BaseBackend.get_user_permissions">
<code>get_user_permissions(user_obj, obj=None)</code> </dt> <dd>
<p>Returns an empty set.</p> </dd>
</dl> <dl class="py method"> <dt class="sig sig-object py" id="django.contrib.auth.backends.BaseBackend.get_group_permissions">
<code>get_group_permissions(user_obj, obj=None)</code> </dt> <dd>
<p>Returns an empty set.</p> </dd>
</dl> <dl class="py method"> <dt class="sig sig-object py" id="django.contrib.auth.backends.BaseBackend.get_all_permissions">
<code>get_all_permissions(user_obj, obj=None)</code> </dt> <dd>
<p>Uses <a class="reference internal" href="#django.contrib.auth.backends.BaseBackend.get_user_permissions" title="django.contrib.auth.backends.BaseBackend.get_user_permissions"><code>get_user_permissions()</code></a> and <a class="reference internal" href="#django.contrib.auth.backends.BaseBackend.get_group_permissions" title="django.contrib.auth.backends.BaseBackend.get_group_permissions"><code>get_group_permissions()</code></a> to get the set of permission strings the <code>user_obj</code> has.</p> </dd>
</dl> <dl class="py method"> <dt class="sig sig-object py" id="django.contrib.auth.backends.BaseBackend.has_perm">
<code>has_perm(user_obj, perm, obj=None)</code> </dt> <dd>
<p>Uses <a class="reference internal" href="#django.contrib.auth.backends.BaseBackend.get_all_permissions" title="django.contrib.auth.backends.BaseBackend.get_all_permissions"><code>get_all_permissions()</code></a> to check if <code>user_obj</code> has the permission string <code>perm</code>.</p> </dd>
</dl> </dd>
</dl> <dl class="py class"> <dt class="sig sig-object py" id="django.contrib.auth.backends.ModelBackend">
<code>class ModelBackend</code> </dt> <dd>
<p>This is the default authentication backend used by Django. It authenticates using credentials consisting of a user identifier and password. For Django’s default user model, the user identifier is the username, for custom user models it is the field specified by USERNAME_FIELD (see <a class="reference internal" href="../../topics/auth/customizing.html"><span class="doc">Customizing Users and authentication</span></a>).</p> <p>It also handles the default permissions model as defined for <a class="reference internal" href="#django.contrib.auth.models.User" title="django.contrib.auth.models.User"><code>User</code></a> and <a class="reference internal" href="../../topics/auth/customizing.html#django.contrib.auth.models.PermissionsMixin" title="django.contrib.auth.models.PermissionsMixin"><code>PermissionsMixin</code></a>.</p> <p><a class="reference internal" href="#django.contrib.auth.backends.ModelBackend.has_perm" title="django.contrib.auth.backends.ModelBackend.has_perm"><code>has_perm()</code></a>, <a class="reference internal" href="#django.contrib.auth.backends.ModelBackend.get_all_permissions" title="django.contrib.auth.backends.ModelBackend.get_all_permissions"><code>get_all_permissions()</code></a>, <a class="reference internal" href="#django.contrib.auth.backends.ModelBackend.get_user_permissions" title="django.contrib.auth.backends.ModelBackend.get_user_permissions"><code>get_user_permissions()</code></a>, and <a class="reference internal" href="#django.contrib.auth.backends.ModelBackend.get_group_permissions" title="django.contrib.auth.backends.ModelBackend.get_group_permissions"><code>get_group_permissions()</code></a> allow an object to be passed as a parameter for object-specific permissions, but this backend does not implement them other than returning an empty set of permissions if <code>obj is not None</code>.</p> <p><a class="reference internal" href="#django.contrib.auth.backends.ModelBackend.with_perm" title="django.contrib.auth.backends.ModelBackend.with_perm"><code>with_perm()</code></a> also allows an object to be passed as a parameter, but unlike others methods it returns an empty queryset if <code>obj is not None</code>.</p> <dl class="py method"> <dt class="sig sig-object py" id="django.contrib.auth.backends.ModelBackend.authenticate">
<code>authenticate(request, username=None, password=None, **kwargs)</code> </dt> <dd>
<p>Tries to authenticate <code>username</code> with <code>password</code> by calling <a class="reference internal" href="#django.contrib.auth.models.User.check_password" title="django.contrib.auth.models.User.check_password"><code>User.check_password</code></a>. If no <code>username</code> is provided, it tries to fetch a username from <code>kwargs</code> using the key <a class="reference internal" href="../../topics/auth/customizing.html#django.contrib.auth.models.CustomUser.USERNAME_FIELD" title="django.contrib.auth.models.CustomUser.USERNAME_FIELD"><code>CustomUser.USERNAME_FIELD</code></a>. Returns an authenticated user or <code>None</code>.</p> <p><code>request</code> is an <a class="reference internal" href="../request-response.html#django.http.HttpRequest" title="django.http.HttpRequest"><code>HttpRequest</code></a> and may be <code>None</code> if it wasn’t provided to <a class="reference internal" href="../../topics/auth/default.html#django.contrib.auth.authenticate" title="django.contrib.auth.authenticate"><code>authenticate()</code></a> (which passes it on to the backend).</p> </dd>
</dl> <dl class="py method"> <dt class="sig sig-object py" id="django.contrib.auth.backends.ModelBackend.get_user_permissions">
<code>get_user_permissions(user_obj, obj=None)</code> </dt> <dd>
<p>Returns the set of permission strings the <code>user_obj</code> has from their own user permissions. Returns an empty set if <a class="reference internal" href="../../topics/auth/customizing.html#django.contrib.auth.models.AbstractBaseUser.is_anonymous" title="django.contrib.auth.models.AbstractBaseUser.is_anonymous"><code>is_anonymous</code></a> or <a class="reference internal" href="../../topics/auth/customizing.html#django.contrib.auth.models.CustomUser.is_active" title="django.contrib.auth.models.CustomUser.is_active"><code>is_active</code></a> is <code>False</code>.</p> </dd>
</dl> <dl class="py method"> <dt class="sig sig-object py" id="django.contrib.auth.backends.ModelBackend.get_group_permissions">
<code>get_group_permissions(user_obj, obj=None)</code> </dt> <dd>
<p>Returns the set of permission strings the <code>user_obj</code> has from the permissions of the groups they belong. Returns an empty set if <a class="reference internal" href="../../topics/auth/customizing.html#django.contrib.auth.models.AbstractBaseUser.is_anonymous" title="django.contrib.auth.models.AbstractBaseUser.is_anonymous"><code>is_anonymous</code></a> or <a class="reference internal" href="../../topics/auth/customizing.html#django.contrib.auth.models.CustomUser.is_active" title="django.contrib.auth.models.CustomUser.is_active"><code>is_active</code></a> is <code>False</code>.</p> </dd>
</dl> <dl class="py method"> <dt class="sig sig-object py" id="django.contrib.auth.backends.ModelBackend.get_all_permissions">
<code>get_all_permissions(user_obj, obj=None)</code> </dt> <dd>
<p>Returns the set of permission strings the <code>user_obj</code> has, including both user permissions and group permissions. Returns an empty set if <a class="reference internal" href="../../topics/auth/customizing.html#django.contrib.auth.models.AbstractBaseUser.is_anonymous" title="django.contrib.auth.models.AbstractBaseUser.is_anonymous"><code>is_anonymous</code></a> or <a class="reference internal" href="../../topics/auth/customizing.html#django.contrib.auth.models.CustomUser.is_active" title="django.contrib.auth.models.CustomUser.is_active"><code>is_active</code></a> is <code>False</code>.</p> </dd>
</dl> <dl class="py method"> <dt class="sig sig-object py" id="django.contrib.auth.backends.ModelBackend.has_perm">
<code>has_perm(user_obj, perm, obj=None)</code> </dt> <dd>
<p>Uses <a class="reference internal" href="#django.contrib.auth.backends.ModelBackend.get_all_permissions" title="django.contrib.auth.backends.ModelBackend.get_all_permissions"><code>get_all_permissions()</code></a> to check if <code>user_obj</code> has the permission string <code>perm</code>. Returns <code>False</code> if the user is not <a class="reference internal" href="../../topics/auth/customizing.html#django.contrib.auth.models.CustomUser.is_active" title="django.contrib.auth.models.CustomUser.is_active"><code>is_active</code></a>.</p> </dd>
</dl> <dl class="py method"> <dt class="sig sig-object py" id="django.contrib.auth.backends.ModelBackend.has_module_perms">
<code>has_module_perms(user_obj, app_label)</code> </dt> <dd>
<p>Returns whether the <code>user_obj</code> has any permissions on the app <code>app_label</code>.</p> </dd>
</dl> <dl class="py method"> <dt class="sig sig-object py" id="django.contrib.auth.backends.ModelBackend.user_can_authenticate">
<code>user_can_authenticate()</code> </dt> <dd>
<p>Returns whether the user is allowed to authenticate. To match the behavior of <a class="reference internal" href="../../topics/auth/default.html#django.contrib.auth.forms.AuthenticationForm" title="django.contrib.auth.forms.AuthenticationForm"><code>AuthenticationForm</code></a> which <a class="reference internal" href="../../topics/auth/default.html#django.contrib.auth.forms.AuthenticationForm.confirm_login_allowed" title="django.contrib.auth.forms.AuthenticationForm.confirm_login_allowed"><code>prohibits inactive users from logging in</code></a>, this method returns <code>False</code> for users with <a class="reference internal" href="#django.contrib.auth.models.User.is_active" title="django.contrib.auth.models.User.is_active"><code>is_active=False</code></a>. Custom user models that don’t have an <a class="reference internal" href="../../topics/auth/customizing.html#django.contrib.auth.models.CustomUser.is_active" title="django.contrib.auth.models.CustomUser.is_active"><code>is_active</code></a> field are allowed.</p> </dd>
</dl> <dl class="py method"> <dt class="sig sig-object py" id="django.contrib.auth.backends.ModelBackend.with_perm">
<code>with_perm(perm, is_active=True, include_superusers=True, obj=None)</code> </dt> <dd>
<p>Returns all active users who have the permission <code>perm</code> either in the form of <code>"&lt;app label&gt;.&lt;permission codename&gt;"</code> or a <a class="reference internal" href="#django.contrib.auth.models.Permission" title="django.contrib.auth.models.Permission"><code>Permission</code></a> instance. Returns an empty queryset if no users who have the <code>perm</code> found.</p> <p>If <code>is_active</code> is <code>True</code> (default), returns only active users, or if <code>False</code>, returns only inactive users. Use <code>None</code> to return all users irrespective of active state.</p> <p>If <code>include_superusers</code> is <code>True</code> (default), the result will include superusers.</p> </dd>
</dl> </dd>
</dl> <dl class="py class"> <dt class="sig sig-object py" id="django.contrib.auth.backends.AllowAllUsersModelBackend">
<code>class AllowAllUsersModelBackend</code> </dt> <dd>
<p>Same as <a class="reference internal" href="#django.contrib.auth.backends.ModelBackend" title="django.contrib.auth.backends.ModelBackend"><code>ModelBackend</code></a> except that it doesn’t reject inactive users because <a class="reference internal" href="#django.contrib.auth.backends.ModelBackend.user_can_authenticate" title="django.contrib.auth.backends.ModelBackend.user_can_authenticate"><code>user_can_authenticate()</code></a> always returns <code>True</code>.</p> <p>When using this backend, you’ll likely want to customize the <a class="reference internal" href="../../topics/auth/default.html#django.contrib.auth.forms.AuthenticationForm" title="django.contrib.auth.forms.AuthenticationForm"><code>AuthenticationForm</code></a> used by the <a class="reference internal" href="../../topics/auth/default.html#django.contrib.auth.views.LoginView" title="django.contrib.auth.views.LoginView"><code>LoginView</code></a> by overriding the <a class="reference internal" href="../../topics/auth/default.html#django.contrib.auth.forms.AuthenticationForm.confirm_login_allowed" title="django.contrib.auth.forms.AuthenticationForm.confirm_login_allowed"><code>confirm_login_allowed()</code></a> method as it rejects inactive users.</p> </dd>
</dl> <dl class="py class"> <dt class="sig sig-object py" id="django.contrib.auth.backends.RemoteUserBackend">
<code>class RemoteUserBackend</code> </dt> <dd>
<p>Use this backend to take advantage of external-to-Django-handled authentication. It authenticates using usernames passed in <a class="reference internal" href="../request-response.html#django.http.HttpRequest.META" title="django.http.HttpRequest.META"><code>request.META['REMOTE_USER']</code></a>. See the <a class="reference internal" href="../../howto/auth-remote-user.html"><span class="doc">Authenticating against REMOTE_USER</span></a> documentation.</p> <p>If you need more control, you can create your own authentication backend that inherits from this class and override these attributes or methods:</p> <dl class="py attribute"> <dt class="sig sig-object py" id="django.contrib.auth.backends.RemoteUserBackend.create_unknown_user">
<code>create_unknown_user</code> </dt> <dd>
<p><code>True</code> or <code>False</code>. Determines whether or not a user object is created if not already in the database Defaults to <code>True</code>.</p> </dd>
</dl> <dl class="py method"> <dt class="sig sig-object py" id="django.contrib.auth.backends.RemoteUserBackend.authenticate">
<code>authenticate(request, remote_user)</code> </dt> <dd>
<p>The username passed as <code>remote_user</code> is considered trusted. This method returns the user object with the given username, creating a new user object if <a class="reference internal" href="#django.contrib.auth.backends.RemoteUserBackend.create_unknown_user" title="django.contrib.auth.backends.RemoteUserBackend.create_unknown_user"><code>create_unknown_user</code></a> is <code>True</code>.</p> <p>Returns <code>None</code> if <a class="reference internal" href="#django.contrib.auth.backends.RemoteUserBackend.create_unknown_user" title="django.contrib.auth.backends.RemoteUserBackend.create_unknown_user"><code>create_unknown_user</code></a> is <code>False</code> and a <code>User</code> object with the given username is not found in the database.</p> <p><code>request</code> is an <a class="reference internal" href="../request-response.html#django.http.HttpRequest" title="django.http.HttpRequest"><code>HttpRequest</code></a> and may be <code>None</code> if it wasn’t provided to <a class="reference internal" href="../../topics/auth/default.html#django.contrib.auth.authenticate" title="django.contrib.auth.authenticate"><code>authenticate()</code></a> (which passes it on to the backend).</p> </dd>
</dl> <dl class="py method"> <dt class="sig sig-object py" id="django.contrib.auth.backends.RemoteUserBackend.clean_username">
<code>clean_username(username)</code> </dt> <dd>
<p>Performs any cleaning on the <code>username</code> (e.g. stripping LDAP DN information) prior to using it to get or create a user object. Returns the cleaned username.</p> </dd>
</dl> <dl class="py method"> <dt class="sig sig-object py" id="django.contrib.auth.backends.RemoteUserBackend.configure_user">
<code>configure_user(request, user, created=True)</code> </dt> <dd>
<p>Configures the user on each authentication attempt. This method is called immediately after fetching or creating the user being authenticated, and can be used to perform custom setup actions, such as setting the user’s groups based on attributes in an LDAP directory. Returns the user object.</p> <p>The setup can be performed either once when the user is created (<code>created</code> is <code>True</code>) or on existing users (<code>created</code> is <code>False</code>) as a way of synchronizing attributes between the remote and the local systems.</p> <p><code>request</code> is an <a class="reference internal" href="../request-response.html#django.http.HttpRequest" title="django.http.HttpRequest"><code>HttpRequest</code></a> and may be <code>None</code> if it wasn’t provided to <a class="reference internal" href="../../topics/auth/default.html#django.contrib.auth.authenticate" title="django.contrib.auth.authenticate"><code>authenticate()</code></a> (which passes it on to the backend).</p> </dd>
</dl> <dl class="py method"> <dt class="sig sig-object py" id="django.contrib.auth.backends.RemoteUserBackend.user_can_authenticate">
<code>user_can_authenticate()</code> </dt> <dd>
<p>Returns whether the user is allowed to authenticate. This method returns <code>False</code> for users with <a class="reference internal" href="#django.contrib.auth.models.User.is_active" title="django.contrib.auth.models.User.is_active"><code>is_active=False</code></a>. Custom user models that don’t have an <a class="reference internal" href="../../topics/auth/customizing.html#django.contrib.auth.models.CustomUser.is_active" title="django.contrib.auth.models.CustomUser.is_active"><code>is_active</code></a> field are allowed.</p> </dd>
</dl> </dd>
</dl> <dl class="py class"> <dt class="sig sig-object py" id="django.contrib.auth.backends.AllowAllUsersRemoteUserBackend">
<code>class AllowAllUsersRemoteUserBackend</code> </dt> <dd>
<p>Same as <a class="reference internal" href="#django.contrib.auth.backends.RemoteUserBackend" title="django.contrib.auth.backends.RemoteUserBackend"><code>RemoteUserBackend</code></a> except that it doesn’t reject inactive users because <a class="reference internal" href="#django.contrib.auth.backends.RemoteUserBackend.user_can_authenticate" title="django.contrib.auth.backends.RemoteUserBackend.user_can_authenticate"><code>user_can_authenticate</code></a> always returns <code>True</code>.</p> </dd>
</dl>    <h2 id="utility-functions">Utility functions</h2> <dl class="py function" id="s-utility-functions"> <dt class="sig sig-object py" id="django.contrib.auth.get_user">
<code>get_user(request)</code> </dt> 
</dl> <dl class="py function"> <dt class="sig sig-object py" id="django.contrib.auth.aget_user">
<code>aget_user(request)</code> </dt> <dd>
<p><em>Asynchronous version</em>: <code>aget_user()</code></p> <p>Returns the user model instance associated with the given <code>request</code>’s session.</p> <p>It checks if the authentication backend stored in the session is present in <a class="reference internal" href="../settings.html#std-setting-AUTHENTICATION_BACKENDS"><code>AUTHENTICATION_BACKENDS</code></a>. If so, it uses the backend’s <code>get_user()</code> method to retrieve the user model instance and then verifies the session by calling the user model’s <a class="reference internal" href="../../topics/auth/customizing.html#django.contrib.auth.models.AbstractBaseUser.get_session_auth_hash" title="django.contrib.auth.models.AbstractBaseUser.get_session_auth_hash"><code>get_session_auth_hash()</code></a> method. If the verification fails and <a class="reference internal" href="../settings.html#std-setting-SECRET_KEY_FALLBACKS"><code>SECRET_KEY_FALLBACKS</code></a> are provided, it verifies the session against each fallback key using <a class="reference internal" href="../../topics/auth/customizing.html#django.contrib.auth.models.AbstractBaseUser.get_session_auth_fallback_hash" title="django.contrib.auth.models.AbstractBaseUser.get_session_auth_fallback_hash"><code>get_session_auth_fallback_hash()</code></a>.</p> <p>Returns an instance of <a class="reference internal" href="#django.contrib.auth.models.AnonymousUser" title="django.contrib.auth.models.AnonymousUser"><code>AnonymousUser</code></a> if the authentication backend stored in the session is no longer in <a class="reference internal" href="../settings.html#std-setting-AUTHENTICATION_BACKENDS"><code>AUTHENTICATION_BACKENDS</code></a>, if a user isn’t returned by the backend’s <code>get_user()</code> method, or if the session auth hash doesn’t validate.</p> <div class="versionchanged"> <span class="title">Changed in Django 4.1.8:</span> <p>Fallback verification with <a class="reference internal" href="../settings.html#std-setting-SECRET_KEY_FALLBACKS"><code>SECRET_KEY_FALLBACKS</code></a> was added.</p> </div> <div class="versionchanged"> <span class="title">Changed in Django 5.0:</span> <p><code>aget_user()</code> function was added.</p> </div> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; Django Software Foundation and individual contributors<br>Licensed under the BSD License.<br>
    <a href="https://docs.djangoproject.com/en/5.0/ref/contrib/auth/" class="_attribution-link">https://docs.djangoproject.com/en/5.0/ref/contrib/auth/</a>
  </p>
</div>
