<h1 id="the-staticfiles-app">The staticfiles app</h1> <p id="s-module-django.contrib.staticfiles"><code>django.contrib.staticfiles</code> collects static files from each of your applications (and any other places you specify) into a single location that can easily be served in production.</p> <div class="admonition seealso"> <p class="first admonition-title">See also</p> <p class="last">For an introduction to the static files app and some usage examples, see <a class="reference internal" href="../../howto/static-files/index.html"><span class="doc">How to manage static files (e.g. images, JavaScript, CSS)</span></a>. For guidelines on deploying static files, see <a class="reference internal" href="../../howto/static-files/deployment.html"><span class="doc">How to deploy static files</span></a>.</p> </div>  <h2 id="staticfiles-settings">Settings</h2> <p id="s-settings">See <a class="reference internal" href="../settings.html#settings-staticfiles"><span class="std std-ref">staticfiles settings</span></a> for details on the following settings:</p> <ul class="simple"> <li><a class="reference internal" href="../settings.html#std-setting-STORAGES"><code>STORAGES</code></a></li> <li><a class="reference internal" href="../settings.html#std-setting-STATIC_ROOT"><code>STATIC_ROOT</code></a></li> <li><a class="reference internal" href="../settings.html#std-setting-STATIC_URL"><code>STATIC_URL</code></a></li> <li><a class="reference internal" href="../settings.html#std-setting-STATICFILES_DIRS"><code>STATICFILES_DIRS</code></a></li> <li><a class="reference internal" href="../settings.html#std-setting-STATICFILES_STORAGE"><code>STATICFILES_STORAGE</code></a></li> <li><a class="reference internal" href="../settings.html#std-setting-STATICFILES_FINDERS"><code>STATICFILES_FINDERS</code></a></li> </ul>   <h2 id="management-commands">Management Commands</h2> <p id="s-management-commands"><code>django.contrib.staticfiles</code> exposes three management commands.</p>  <h3 id="collectstatic"><code>collectstatic</code></h3> <dl class="std django-admin" id="s-collectstatic"> <dt class="sig sig-object std" id="django-admin-collectstatic">
<code>django-admin collectstatic</code> </dt> 
</dl> <p>Collects the static files into <a class="reference internal" href="../settings.html#std-setting-STATIC_ROOT"><code>STATIC_ROOT</code></a>.</p> <p>Duplicate file names are by default resolved in a similar way to how template resolution works: the file that is first found in one of the specified locations will be used. If you’re confused, the <a class="reference internal" href="#django-admin-findstatic"><code>findstatic</code></a> command can help show you which files are found.</p> <p>On subsequent <code>collectstatic</code> runs (if <code>STATIC_ROOT</code> isn’t empty), files are copied only if they have a modified timestamp greater than the timestamp of the file in <code>STATIC_ROOT</code>. Therefore if you remove an application from <a class="reference internal" href="../settings.html#std-setting-INSTALLED_APPS"><code>INSTALLED_APPS</code></a>, it’s a good idea to use the <a class="reference internal" href="#cmdoption-collectstatic-clear"><code>collectstatic
--clear</code></a> option in order to remove stale static files.</p> <p>Files are searched by using the <a class="reference internal" href="../settings.html#std-setting-STATICFILES_FINDERS"><code>enabled finders</code></a>. The default is to look in all locations defined in <a class="reference internal" href="../settings.html#std-setting-STATICFILES_DIRS"><code>STATICFILES_DIRS</code></a> and in the <code>'static'</code> directory of apps specified by the <a class="reference internal" href="../settings.html#std-setting-INSTALLED_APPS"><code>INSTALLED_APPS</code></a> setting.</p> <p>The <a class="reference internal" href="#django-admin-collectstatic"><code>collectstatic</code></a> management command calls the <a class="reference internal" href="#django.contrib.staticfiles.storage.StaticFilesStorage.post_process" title="django.contrib.staticfiles.storage.StaticFilesStorage.post_process"><code>post_process()</code></a> method of the <code>staticfiles</code> storage backend from <a class="reference internal" href="../settings.html#std-setting-STORAGES"><code>STORAGES</code></a> after each run and passes a list of paths that have been found by the management command. It also receives all command line options of <a class="reference internal" href="#django-admin-collectstatic"><code>collectstatic</code></a>. This is used by the <a class="reference internal" href="#django.contrib.staticfiles.storage.ManifestStaticFilesStorage" title="django.contrib.staticfiles.storage.ManifestStaticFilesStorage"><code>ManifestStaticFilesStorage</code></a> by default.</p> <p>By default, collected files receive permissions from <a class="reference internal" href="../settings.html#std-setting-FILE_UPLOAD_PERMISSIONS"><code>FILE_UPLOAD_PERMISSIONS</code></a> and collected directories receive permissions from <a class="reference internal" href="../settings.html#std-setting-FILE_UPLOAD_DIRECTORY_PERMISSIONS"><code>FILE_UPLOAD_DIRECTORY_PERMISSIONS</code></a>. If you would like different permissions for these files and/or directories, you can subclass either of the <a class="reference internal" href="#staticfiles-storages"><span class="std std-ref">static files storage classes</span></a> and specify the <code>file_permissions_mode</code> and/or <code>directory_permissions_mode</code> parameters, respectively. For example:</p> <pre data-language="python">from django.contrib.staticfiles import storage


class MyStaticFilesStorage(storage.StaticFilesStorage):
    def __init__(self, *args, **kwargs):
        kwargs["file_permissions_mode"] = 0o640
        kwargs["directory_permissions_mode"] = 0o760
        super().__init__(*args, **kwargs)
</pre> <p>Then set the <code>staticfiles</code> storage backend in <a class="reference internal" href="../settings.html#std-setting-STORAGES"><code>STORAGES</code></a> setting to <code>'path.to.MyStaticFilesStorage'</code>.</p> <p>Some commonly used options are:</p> <dl class="django-admin-option"> <dt class="sig sig-object" id="cmdoption-collectstatic-noinput">
<code>--noinput, --no-input</code> </dt> <dd>
<p>Do NOT prompt the user for input of any kind.</p> </dd>
</dl> <dl class="django-admin-option"> <dt class="sig sig-object" id="cmdoption-collectstatic-ignore">
<code>--ignore PATTERN, -i PATTERN</code> </dt> <dd>
<p>Ignore files, directories, or paths matching this glob-style pattern. Use multiple times to ignore more. When specifying a path, always use forward slashes, even on Windows.</p> </dd>
</dl> <dl class="django-admin-option"> <dt class="sig sig-object" id="cmdoption-collectstatic-dry-run">
<code>--dry-run, -n</code> </dt> <dd>
<p>Do everything except modify the filesystem.</p> </dd>
</dl> <dl class="django-admin-option"> <dt class="sig sig-object" id="cmdoption-collectstatic-clear">
<code>--clear, -c</code> </dt> <dd>
<p>Clear the existing files before trying to copy or link the original file.</p> </dd>
</dl> <dl class="django-admin-option"> <dt class="sig sig-object" id="cmdoption-collectstatic-link">
<code>--link, -l</code> </dt> <dd>
<p>Create a symbolic link to each file instead of copying.</p> </dd>
</dl> <dl class="django-admin-option"> <dt class="sig sig-object" id="cmdoption-collectstatic-no-post-process">
<code>--no-post-process</code> </dt> <dd>
<p>Don’t call the <a class="reference internal" href="#django.contrib.staticfiles.storage.StaticFilesStorage.post_process" title="django.contrib.staticfiles.storage.StaticFilesStorage.post_process"><code>post_process()</code></a> method of the configured <code>staticfiles</code> storage backend from <a class="reference internal" href="../settings.html#std-setting-STORAGES"><code>STORAGES</code></a>.</p> </dd>
</dl> <dl class="django-admin-option"> <dt class="sig sig-object" id="cmdoption-collectstatic-no-default-ignore">
<code>--no-default-ignore</code> </dt> <dd>
<p>Don’t ignore the common private glob-style patterns <code>'CVS'</code>, <code>'.*'</code> and <code>'*~'</code>.</p> </dd>
</dl> <p>For a full list of options, refer to the commands own help by running:</p>       <pre data-language="console">$ python manage.py collectstatic --help
</pre>   <div class="highlight"><pre><span class="gp">...\&gt;</span> py manage.py collectstatic --help
</pre></div>    <h4 id="customize-staticfiles-ignore-patterns">Customizing the ignored pattern list</h4> <p id="s-customizing-the-ignored-pattern-list">The default ignored pattern list, <code>['CVS', '.*', '*~']</code>, can be customized in a more persistent way than providing the <code>--ignore</code> command option at each <code>collectstatic</code> invocation. Provide a custom <a class="reference internal" href="../applications.html#django.apps.AppConfig" title="django.apps.AppConfig"><code>AppConfig</code></a> class, override the <code>ignore_patterns</code> attribute of this class and replace <code>'django.contrib.staticfiles'</code> with that class path in your <a class="reference internal" href="../settings.html#std-setting-INSTALLED_APPS"><code>INSTALLED_APPS</code></a> setting:</p> <pre data-language="python">from django.contrib.staticfiles.apps import StaticFilesConfig


class MyStaticFilesConfig(StaticFilesConfig):
    ignore_patterns = [...]  # your custom ignore list
</pre>    <h3 id="findstatic"><code>findstatic</code></h3> <dl class="std django-admin" id="s-findstatic"> <dt class="sig sig-object std" id="django-admin-findstatic">
<code>django-admin findstatic staticfile [staticfile ...]</code> </dt> 
</dl> <p>Searches for one or more relative paths with the enabled finders.</p> <p>For example:</p>       <pre data-language="console">$ python manage.py findstatic css/base.css admin/js/core.js
Found 'css/base.css' here:
  /home/special.polls.com/core/static/css/base.css
  /home/polls.com/core/static/css/base.css
Found 'admin/js/core.js' here:
  /home/polls.com/src/django/contrib/admin/media/js/core.js
</pre>   <div class="highlight"><pre><span class="gp">...\&gt;</span> py manage.py findstatic css\base.css admin\js\core.js
<span class="go">Found 'css/base.css' here:</span>
<span class="go">  /home/special.polls.com/core/static/css/base.css</span>
<span class="go">  /home/polls.com/core/static/css/base.css</span>
<span class="go">Found 'admin/js/core.js' here:</span>
<span class="go">  /home/polls.com/src/django/contrib/admin/media/js/core.js</span>
</pre></div>   <dl class="django-admin-option"> <dt class="sig sig-object" id="cmdoption-findstatic-arg-findstatic">
<code>findstatic --first</code> </dt> 
</dl> <p>By default, all matching locations are found. To only return the first match for each relative path, use the <code>--first</code> option:</p>       <pre data-language="console">$ python manage.py findstatic css/base.css --first
Found 'css/base.css' here:
  /home/special.polls.com/core/static/css/base.css
</pre>   <div class="highlight"><pre><span class="gp">...\&gt;</span> py manage.py findstatic css\base.css --first
<span class="go">Found 'css/base.css' here:</span>
<span class="go">  /home/special.polls.com/core/static/css/base.css</span>
</pre></div>   <p>This is a debugging aid; it’ll show you exactly which static file will be collected for a given path.</p> <p>By setting the <code>--verbosity</code> flag to 0, you can suppress the extra output and just get the path names:</p>       <pre data-language="console">$ python manage.py findstatic css/base.css --verbosity 0
/home/special.polls.com/core/static/css/base.css
/home/polls.com/core/static/css/base.css
</pre>   <div class="highlight"><pre><span class="gp">...\&gt;</span> py manage.py findstatic css\base.css --verbosity 0
<span class="go">/home/special.polls.com/core/static/css/base.css</span>
<span class="go">/home/polls.com/core/static/css/base.css</span>
</pre></div>   <p>On the other hand, by setting the <code>--verbosity</code> flag to 2, you can get all the directories which were searched:</p>       <pre data-language="console">$ python manage.py findstatic css/base.css --verbosity 2
Found 'css/base.css' here:
  /home/special.polls.com/core/static/css/base.css
  /home/polls.com/core/static/css/base.css
Looking in the following locations:
  /home/special.polls.com/core/static
  /home/polls.com/core/static
  /some/other/path/static
</pre>   <div class="highlight"><pre><span class="gp">...\&gt;</span> py manage.py findstatic css\base.css --verbosity 2
<span class="go">Found 'css/base.css' here:</span>
<span class="go">  /home/special.polls.com/core/static/css/base.css</span>
<span class="go">  /home/polls.com/core/static/css/base.css</span>
<span class="go">Looking in the following locations:</span>
<span class="go">  /home/special.polls.com/core/static</span>
<span class="go">  /home/polls.com/core/static</span>
<span class="go">  /some/other/path/static</span>
</pre></div>     <h3 id="staticfiles-runserver"><code>runserver</code></h3> <dl class="std django-admin" id="s-runserver"> <dt class="sig sig-object std">
<code>django-admin runserver [addrport]</code> </dt> 
</dl> <p>Overrides the core <a class="reference internal" href="../django-admin.html#django-admin-runserver"><code>runserver</code></a> command if the <code>staticfiles</code> app is <a class="reference internal" href="../settings.html#std-setting-INSTALLED_APPS"><code>installed</code></a> and adds automatic serving of static files. File serving doesn’t run through <a class="reference internal" href="../settings.html#std-setting-MIDDLEWARE"><code>MIDDLEWARE</code></a>.</p> <p>The command adds these options:</p> <dl class="django-admin-option"> <dt class="sig sig-object" id="cmdoption-runserver-nostatic">
<code>--nostatic</code> </dt> 
</dl> <p>Use the <code>--nostatic</code> option to disable serving of static files with the <a class="reference internal" href="#"><span class="doc">staticfiles</span></a> app entirely. This option is only available if the <a class="reference internal" href="#"><span class="doc">staticfiles</span></a> app is in your project’s <a class="reference internal" href="../settings.html#std-setting-INSTALLED_APPS"><code>INSTALLED_APPS</code></a> setting.</p> <p>Example usage:</p>       <pre data-language="console">$ django-admin runserver --nostatic
</pre>   <div class="highlight"><pre><span class="gp">...\&gt;</span> django-admin runserver --nostatic
</pre></div>   <dl class="django-admin-option"> <dt class="sig sig-object" id="cmdoption-runserver-insecure">
<code>--insecure</code> </dt> 
</dl> <p>Use the <code>--insecure</code> option to force serving of static files with the <a class="reference internal" href="#"><span class="doc">staticfiles</span></a> app even if the <a class="reference internal" href="../settings.html#std-setting-DEBUG"><code>DEBUG</code></a> setting is <code>False</code>. By using this you acknowledge the fact that it’s <strong>grossly inefficient</strong> and probably <strong>insecure</strong>. This is only intended for local development, should <strong>never be used in production</strong> and is only available if the <a class="reference internal" href="#"><span class="doc">staticfiles</span></a> app is in your project’s <a class="reference internal" href="../settings.html#std-setting-INSTALLED_APPS"><code>INSTALLED_APPS</code></a> setting.</p> <p><code>--insecure</code> doesn’t work with <a class="reference internal" href="#django.contrib.staticfiles.storage.ManifestStaticFilesStorage" title="django.contrib.staticfiles.storage.ManifestStaticFilesStorage"><code>ManifestStaticFilesStorage</code></a>.</p> <p>Example usage:</p>       <pre data-language="console">$ django-admin runserver --insecure
</pre>   <div class="highlight"><pre><span class="gp">...\&gt;</span> django-admin runserver --insecure
</pre></div>      <h2 id="staticfiles-storages">Storages</h2>  <h3 id="staticfilesstorage"><code>StaticFilesStorage</code></h3> <dl class="py class" id="s-storages"> <dt class="sig sig-object py" id="django.contrib.staticfiles.storage.StaticFilesStorage">
<code>class storage.StaticFilesStorage</code> </dt> 
</dl> <p>A subclass of the <a class="reference internal" href="../files/storage.html#django.core.files.storage.FileSystemStorage" title="django.core.files.storage.FileSystemStorage"><code>FileSystemStorage</code></a> storage backend that uses the <a class="reference internal" href="../settings.html#std-setting-STATIC_ROOT"><code>STATIC_ROOT</code></a> setting as the base file system location and the <a class="reference internal" href="../settings.html#std-setting-STATIC_URL"><code>STATIC_URL</code></a> setting respectively as the base URL.</p> <dl class="py method"> <dt class="sig sig-object py" id="django.contrib.staticfiles.storage.StaticFilesStorage.post_process">
<code>storage.StaticFilesStorage.post_process(paths, **options)</code> </dt> 
</dl> <p>If this method is defined on a storage, it’s called by the <a class="reference internal" href="#django-admin-collectstatic"><code>collectstatic</code></a> management command after each run and gets passed the local storages and paths of found files as a dictionary, as well as the command line options. It yields tuples of three values: <code>original_path, processed_path, processed</code>. The path values are strings and <code>processed</code> is a boolean indicating whether or not the value was post-processed, or an exception if post-processing failed.</p> <p>The <a class="reference internal" href="#django.contrib.staticfiles.storage.ManifestStaticFilesStorage" title="django.contrib.staticfiles.storage.ManifestStaticFilesStorage"><code>ManifestStaticFilesStorage</code></a> uses this behind the scenes to replace the paths with their hashed counterparts and update the cache appropriately.</p>   <h3 id="manifeststaticfilesstorage"><code>ManifestStaticFilesStorage</code></h3> <dl class="py class" id="s-manifeststaticfilesstorage"> <dt class="sig sig-object py" id="django.contrib.staticfiles.storage.ManifestStaticFilesStorage">
<code>class storage.ManifestStaticFilesStorage</code> </dt> 
</dl> <p>A subclass of the <a class="reference internal" href="#django.contrib.staticfiles.storage.StaticFilesStorage" title="django.contrib.staticfiles.storage.StaticFilesStorage"><code>StaticFilesStorage</code></a> storage backend which stores the file names it handles by appending the MD5 hash of the file’s content to the filename. For example, the file <code>css/styles.css</code> would also be saved as <code>css/styles.55e7cbb9ba48.css</code>.</p> <p>The purpose of this storage is to keep serving the old files in case some pages still refer to those files, e.g. because they are cached by you or a 3rd party proxy server. Additionally, it’s very helpful if you want to apply <a class="reference external" href="https://developer.yahoo.com/performance/rules.html#expires">far future Expires headers</a> to the deployed files to speed up the load time for subsequent page visits.</p> <p>The storage backend automatically replaces the paths found in the saved files matching other saved files with the path of the cached copy (using the <a class="reference internal" href="#django.contrib.staticfiles.storage.StaticFilesStorage.post_process" title="django.contrib.staticfiles.storage.StaticFilesStorage.post_process"><code>post_process()</code></a> method). The regular expressions used to find those paths (<code>django.contrib.staticfiles.storage.HashedFilesMixin.patterns</code>) cover:</p> <ul class="simple"> <li>The <a class="reference external" href="https://www.w3.org/TR/CSS2/cascade.html#at-import">@import</a> rule and <a class="reference external" href="https://www.w3.org/TR/CSS2/syndata.html#uri">url()</a> statement of <a class="reference external" href="https://www.w3.org/Style/CSS/">Cascading Style Sheets</a>.</li> <li>
<a class="reference external" href="https://developer.mozilla.org/en-US/docs/Tools/Debugger/How_to/Use_a_source_map">Source map</a> comments in CSS and JavaScript files.</li> </ul> <p>Subclass <code>ManifestStaticFilesStorage</code> and set the <code>support_js_module_import_aggregation</code> attribute to <code>True</code>, if you want to use the experimental regular expressions to cover:</p> <ul class="simple"> <li>The <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules#importing_features_into_your_script">modules import</a> in JavaScript.</li> <li>The <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules#aggregating_modules">modules aggregation</a> in JavaScript.</li> </ul> <p>For example, the <code>'css/styles.css'</code> file with this content:</p> <pre data-language="css">@import url("../admin/css/base.css");
</pre> <p>…would be replaced by calling the <a class="reference internal" href="../files/storage.html#django.core.files.storage.Storage.url" title="django.core.files.storage.Storage.url"><code>url()</code></a> method of the <code>ManifestStaticFilesStorage</code> storage backend, ultimately saving a <code>'css/styles.55e7cbb9ba48.css'</code> file with the following content:</p> <pre data-language="css">@import url("../admin/css/base.27e20196a850.css");
</pre> <div class="admonition-usage-of-the-integrity-html-attribute-with-local-files admonition"> <p class="first admonition-title">Usage of the <code>integrity</code> HTML attribute with local files</p> <p class="last">When using the optional <code>integrity</code> attribute within tags like <code>&lt;script&gt;</code> or <code>&lt;link&gt;</code>, its value should be calculated based on the files as they are served, not as stored in the filesystem. This is particularly important because depending on how static files are collected, their checksum may have changed (for example when using <a class="reference internal" href="#django-admin-collectstatic"><code>collectstatic</code></a>). At the moment, there is no out-of-the-box tooling available for this.</p> </div> <p>You can change the location of the manifest file by using a custom <code>ManifestStaticFilesStorage</code> subclass that sets the <code>manifest_storage</code> argument. For example:</p> <pre data-language="python">from django.conf import settings
from django.contrib.staticfiles.storage import (
    ManifestStaticFilesStorage,
    StaticFilesStorage,
)


class MyManifestStaticFilesStorage(ManifestStaticFilesStorage):
    def __init__(self, *args, **kwargs):
        manifest_storage = StaticFilesStorage(location=settings.BASE_DIR)
        super().__init__(*args, manifest_storage=manifest_storage, **kwargs)
</pre> <div class="admonition-references-in-comments admonition"> <p class="first admonition-title">References in comments</p> <p class="last"><code>ManifestStaticFilesStorage</code> doesn’t ignore paths in statements that are commented out. This <a class="reference external" href="https://code.djangoproject.com/ticket/21080">may crash on the nonexistent paths</a>. You should check and eventually strip comments.</p> </div> <div class="versionchanged"> <span class="title">Changed in Django 4.2:</span> <p>Experimental optional support for finding paths to JavaScript modules in <code>import</code> and <code>export</code> statements was added.</p> </div> <dl class="py attribute"> <dt class="sig sig-object py" id="django.contrib.staticfiles.storage.ManifestStaticFilesStorage.manifest_hash">
<code>storage.ManifestStaticFilesStorage.manifest_hash</code> </dt> 
</dl> <div class="versionadded"> <span class="title">New in Django 4.2.</span> </div> <p>This attribute provides a single hash that changes whenever a file in the manifest changes. This can be useful to communicate to SPAs that the assets on the server have changed (due to a new deployment).</p> <dl class="py attribute"> <dt class="sig sig-object py" id="django.contrib.staticfiles.storage.ManifestStaticFilesStorage.max_post_process_passes">
<code>storage.ManifestStaticFilesStorage.max_post_process_passes</code> </dt> 
</dl> <p>Since static files might reference other static files that need to have their paths replaced, multiple passes of replacing paths may be needed until the file hashes converge. To prevent an infinite loop due to hashes not converging (for example, if <code>'foo.css'</code> references <code>'bar.css'</code> which references <code>'foo.css'</code>) there is a maximum number of passes before post-processing is abandoned. In cases with a large number of references, a higher number of passes might be needed. Increase the maximum number of passes by subclassing <code>ManifestStaticFilesStorage</code> and setting the <code>max_post_process_passes</code> attribute. It defaults to 5.</p> <p>To enable the <code>ManifestStaticFilesStorage</code> you have to make sure the following requirements are met:</p> <ul class="simple"> <li>the <code>staticfiles</code> storage backend in <a class="reference internal" href="../settings.html#std-setting-STORAGES"><code>STORAGES</code></a> setting is set to <code>'django.contrib.staticfiles.storage.ManifestStaticFilesStorage'</code>
</li> <li>the <a class="reference internal" href="../settings.html#std-setting-DEBUG"><code>DEBUG</code></a> setting is set to <code>False</code>
</li> <li>you’ve collected all your static files by using the <a class="reference internal" href="#django-admin-collectstatic"><code>collectstatic</code></a> management command</li> </ul> <p>Since creating the MD5 hash can be a performance burden to your website during runtime, <code>staticfiles</code> will automatically store the mapping with hashed names for all processed files in a file called <code>staticfiles.json</code>. This happens once when you run the <a class="reference internal" href="#django-admin-collectstatic"><code>collectstatic</code></a> management command.</p> <dl class="py attribute"> <dt class="sig sig-object py" id="django.contrib.staticfiles.storage.ManifestStaticFilesStorage.manifest_strict">
<code>storage.ManifestStaticFilesStorage.manifest_strict</code> </dt> 
</dl> <p>If a file isn’t found in the <code>staticfiles.json</code> manifest at runtime, a <code>ValueError</code> is raised. This behavior can be disabled by subclassing <code>ManifestStaticFilesStorage</code> and setting the <code>manifest_strict</code> attribute to <code>False</code> – nonexistent paths will remain unchanged.</p> <p>Due to the requirement of running <a class="reference internal" href="#django-admin-collectstatic"><code>collectstatic</code></a>, this storage typically shouldn’t be used when running tests as <code>collectstatic</code> isn’t run as part of the normal test setup. During testing, ensure that <code>staticfiles</code> storage backend in the <a class="reference internal" href="../settings.html#std-setting-STORAGES"><code>STORAGES</code></a> setting is set to something else like <code>'django.contrib.staticfiles.storage.StaticFilesStorage'</code> (the default).</p> <dl class="py method"> <dt class="sig sig-object py" id="django.contrib.staticfiles.storage.ManifestStaticFilesStorage.file_hash">
<code>storage.ManifestStaticFilesStorage.file_hash(name, content=None)</code> </dt> 
</dl> <p>The method that is used when creating the hashed name of a file. Needs to return a hash for the given file name and content. By default it calculates a MD5 hash from the content’s chunks as mentioned above. Feel free to override this method to use your own hashing algorithm.</p>   <h3 id="manifestfilesmixin"><code>ManifestFilesMixin</code></h3> <dl class="py class" id="s-manifestfilesmixin"> <dt class="sig sig-object py" id="django.contrib.staticfiles.storage.ManifestFilesMixin">
<code>class storage.ManifestFilesMixin</code> </dt> 
</dl> <p>Use this mixin with a custom storage to append the MD5 hash of the file’s content to the filename as <a class="reference internal" href="#django.contrib.staticfiles.storage.ManifestStaticFilesStorage" title="django.contrib.staticfiles.storage.ManifestStaticFilesStorage"><code>ManifestStaticFilesStorage</code></a> does.</p>    <h2 id="finders-module">Finders Module</h2> <p id="s-finders-module"><code>staticfiles</code> finders has a <code>searched_locations</code> attribute which is a list of directory paths in which the finders searched. Example usage:</p> <pre data-language="python">from django.contrib.staticfiles import finders

result = finders.find("css/base.css")
searched_locations = finders.searched_locations
</pre>   <h2 id="other-helpers">Other Helpers</h2> <p id="s-other-helpers">There are a few other helpers outside of the <a class="reference internal" href="#module-django.contrib.staticfiles" title="django.contrib.staticfiles: An app for handling static files."><code>staticfiles</code></a> app to work with static files:</p> <ul class="simple"> <li>The <a class="reference internal" href="../templates/api.html#django.template.context_processors.static" title="django.template.context_processors.static"><code>django.template.context_processors.static()</code></a> context processor which adds <a class="reference internal" href="../settings.html#std-setting-STATIC_URL"><code>STATIC_URL</code></a> to every template context rendered with <a class="reference internal" href="../templates/api.html#django.template.RequestContext" title="django.template.RequestContext"><code>RequestContext</code></a> contexts.</li> <li>The builtin template tag <a class="reference internal" href="../templates/builtins.html#std-templatetag-static"><code>static</code></a> which takes a path and urljoins it with the static prefix <a class="reference internal" href="../settings.html#std-setting-STATIC_URL"><code>STATIC_URL</code></a>. If <code>django.contrib.staticfiles</code> is installed, the tag uses the <code>url()</code> method of the <code>staticfiles</code> storage backend from <a class="reference internal" href="../settings.html#std-setting-STORAGES"><code>STORAGES</code></a> instead.</li> <li>The builtin template tag <a class="reference internal" href="../templates/builtins.html#std-templatetag-get_static_prefix"><code>get_static_prefix</code></a> which populates a template variable with the static prefix <a class="reference internal" href="../settings.html#std-setting-STATIC_URL"><code>STATIC_URL</code></a> to be used as a variable or directly.</li> <li>The similar template tag <a class="reference internal" href="../templates/builtins.html#std-templatetag-get_media_prefix"><code>get_media_prefix</code></a> which works like <a class="reference internal" href="../templates/builtins.html#std-templatetag-get_static_prefix"><code>get_static_prefix</code></a> but uses <a class="reference internal" href="../settings.html#std-setting-MEDIA_URL"><code>MEDIA_URL</code></a>.</li> <li>The <code>staticfiles</code> key in <a class="reference internal" href="../files/storage.html#django.core.files.storage.storages" title="django.core.files.storage.storages"><code>django.core.files.storage.storages</code></a> contains a ready-to-use instance of the staticfiles storage backend.</li> </ul>  <h3 id="staticfiles-development-view">Static file development view</h3> <p id="s-static-file-development-view">The static files tools are mostly designed to help with getting static files successfully deployed into production. This usually means a separate, dedicated static file server, which is a lot of overhead to mess with when developing locally. Thus, the <code>staticfiles</code> app ships with a <strong>quick and dirty helper view</strong> that you can use to serve files locally in development.</p> <dl class="py function"> <dt class="sig sig-object py" id="django.contrib.staticfiles.views.serve">
<code>views.serve(request, path)</code> </dt> 
</dl> <p>This view function serves static files in development.</p> <div class="admonition warning"> <p class="first admonition-title">Warning</p> <p>This view will only work if <a class="reference internal" href="../settings.html#std-setting-DEBUG"><code>DEBUG</code></a> is <code>True</code>.</p> <p class="last">That’s because this view is <strong>grossly inefficient</strong> and probably <strong>insecure</strong>. This is only intended for local development, and should <strong>never be used in production</strong>.</p> </div> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">To guess the served files’ content types, this view relies on the <a class="reference external" href="https://docs.python.org/3/library/mimetypes.html#module-mimetypes" title="(in Python v3.12)"><code>mimetypes</code></a> module from the Python standard library, which itself relies on the underlying platform’s map files. If you find that this view doesn’t return proper content types for certain files, it is most likely that the platform’s map files are incorrect or need to be updated. This can be achieved, for example, by installing or updating the <code>mailcap</code> package on a Red Hat distribution, <code>mime-support</code> on a Debian distribution, or by editing the keys under <code>HKEY_CLASSES_ROOT</code> in the Windows registry.</p> </div> <p>This view is automatically enabled by <a class="reference internal" href="../django-admin.html#django-admin-runserver"><code>runserver</code></a> (with a <a class="reference internal" href="../settings.html#std-setting-DEBUG"><code>DEBUG</code></a> setting set to <code>True</code>). To use the view with a different local development server, add the following snippet to the end of your primary URL configuration:</p> <pre data-language="python">from django.conf import settings
from django.contrib.staticfiles import views
from django.urls import re_path

if settings.DEBUG:
    urlpatterns += [
        re_path(r"^static/(?P&lt;path&gt;.*)$", views.serve),
    ]
</pre> <p>Note, the beginning of the pattern (<code>r'^static/'</code>) should be your <a class="reference internal" href="../settings.html#std-setting-STATIC_URL"><code>STATIC_URL</code></a> setting.</p> <p>Since this is a bit finicky, there’s also a helper function that’ll do this for you:</p> <dl class="py function"> <dt class="sig sig-object py" id="django.contrib.staticfiles.urls.staticfiles_urlpatterns">
<code>urls.staticfiles_urlpatterns()</code> </dt> 
</dl> <p>This will return the proper URL pattern for serving static files to your already defined pattern list. Use it like this:</p> <pre data-language="python">from django.contrib.staticfiles.urls import staticfiles_urlpatterns

# ... the rest of your URLconf here ...

urlpatterns += staticfiles_urlpatterns()
</pre> <p>This will inspect your <a class="reference internal" href="../settings.html#std-setting-STATIC_URL"><code>STATIC_URL</code></a> setting and wire up the view to serve static files accordingly. Don’t forget to set the <a class="reference internal" href="../settings.html#std-setting-STATICFILES_DIRS"><code>STATICFILES_DIRS</code></a> setting appropriately to let <code>django.contrib.staticfiles</code> know where to look for files in addition to files in app directories.</p> <div class="admonition warning"> <p class="first admonition-title">Warning</p> <p>This helper function will only work if <a class="reference internal" href="../settings.html#std-setting-DEBUG"><code>DEBUG</code></a> is <code>True</code> and your <a class="reference internal" href="../settings.html#std-setting-STATIC_URL"><code>STATIC_URL</code></a> setting is neither empty nor a full URL such as <code>http://static.example.com/</code>.</p> <p class="last">That’s because this view is <strong>grossly inefficient</strong> and probably <strong>insecure</strong>. This is only intended for local development, and should <strong>never be used in production</strong>.</p> </div>   <h3 id="specialized-test-case-to-support-live-testing">Specialized test case to support ‘live testing’</h3> <dl class="py class" id="s-specialized-test-case-to-support-live-testing"> <dt class="sig sig-object py" id="django.contrib.staticfiles.testing.StaticLiveServerTestCase">
<code>class testing.StaticLiveServerTestCase</code> </dt> 
</dl> <p>This unittest TestCase subclass extends <a class="reference internal" href="../../topics/testing/tools.html#django.test.LiveServerTestCase" title="django.test.LiveServerTestCase"><code>django.test.LiveServerTestCase</code></a>.</p> <p>Just like its parent, you can use it to write tests that involve running the code under test and consuming it with testing tools through HTTP (e.g. Selenium, PhantomJS, etc.), because of which it’s needed that the static assets are also published.</p> <p>But given the fact that it makes use of the <a class="reference internal" href="#django.contrib.staticfiles.views.serve" title="django.contrib.staticfiles.views.serve"><code>django.contrib.staticfiles.views.serve()</code></a> view described above, it can transparently overlay at test execution-time the assets provided by the <code>staticfiles</code> finders. This means you don’t need to run <a class="reference internal" href="#django-admin-collectstatic"><code>collectstatic</code></a> before or as a part of your tests setup.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; Django Software Foundation and individual contributors<br>Licensed under the BSD License.<br>
    <a href="https://docs.djangoproject.com/en/5.0/ref/contrib/staticfiles/" class="_attribution-link">https://docs.djangoproject.com/en/5.0/ref/contrib/staticfiles/</a>
  </p>
</div>
