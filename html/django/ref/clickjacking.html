<section id="s-module-django.middleware.clickjacking"> <h1 id="clickjacking-protection">Clickjacking Protection</h1> <p>The clickjacking middleware and decorators provide easy-to-use protection against <a class="reference external" href="https://en.wikipedia.org/wiki/Clickjacking">clickjacking</a>. This type of attack occurs when a malicious site tricks a user into clicking on a concealed element of another site which they have loaded in a hidden frame or iframe.</p> <section id="s-an-example-of-clickjacking"> <h2 id="an-example-of-clickjacking">An example of clickjacking</h2> <p>Suppose an online store has a page where a logged in user can click “Buy Now” to purchase an item. A user has chosen to stay logged into the store all the time for convenience. An attacker site might create an “I Like Ponies” button on one of their own pages, and load the store’s page in a transparent iframe such that the “Buy Now” button is invisibly overlaid on the “I Like Ponies” button. If the user visits the attacker’s site, clicking “I Like Ponies” will cause an inadvertent click on the “Buy Now” button and an unknowing purchase of the item.</p> </section> <section id="s-preventing-clickjacking"> <h2 id="clickjacking-prevention">Preventing clickjacking</h2> <p>Modern browsers honor the <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Frame-Options">X-Frame-Options</a> HTTP header that indicates whether or not a resource is allowed to load within a frame or iframe. If the response contains the header with a value of <code>SAMEORIGIN</code> then the browser will only load the resource in a frame if the request originated from the same site. If the header is set to <code>DENY</code> then the browser will block the resource from loading in a frame no matter which site made the request.</p> <p>Django provides a few ways to include this header in responses from your site:</p> <ol class="arabic simple"> <li>A middleware that sets the header in all responses.</li> <li>A set of view decorators that can be used to override the middleware or to only set the header for certain views.</li> </ol> <p>The <code>X-Frame-Options</code> HTTP header will only be set by the middleware or view decorators if it is not already present in the response.</p> </section> <section id="s-how-to-use-it"> <h2 id="how-to-use-it">How to use it</h2> <section id="s-setting-x-frame-options-for-all-responses"> <h3 id="setting-x-frame-options-for-all-responses">Setting <code>X-Frame-Options</code> for all responses</h3> <p>To set the same <code>X-Frame-Options</code> value for all responses in your site, put <code>'django.middleware.clickjacking.XFrameOptionsMiddleware'</code> to <a class="reference internal" href="settings.html#std-setting-MIDDLEWARE"><code>MIDDLEWARE</code></a>:</p> <pre data-language="python">MIDDLEWARE = [
    ...,
    "django.middleware.clickjacking.XFrameOptionsMiddleware",
    ...,
]
</pre> <p>This middleware is enabled in the settings file generated by <a class="reference internal" href="django-admin.html#django-admin-startproject"><code>startproject</code></a>.</p> <p>By default, the middleware will set the <code>X-Frame-Options</code> header to <code>DENY</code> for every outgoing <code>HttpResponse</code>. If you want any other value for this header instead, set the <a class="reference internal" href="settings.html#std-setting-X_FRAME_OPTIONS"><code>X_FRAME_OPTIONS</code></a> setting:</p> <pre data-language="python">X_FRAME_OPTIONS = "SAMEORIGIN"
</pre> <p>When using the middleware there may be some views where you do <strong>not</strong> want the <code>X-Frame-Options</code> header set. For those cases, you can use a view decorator that tells the middleware not to set the header:</p> <pre data-language="python">from django.http import HttpResponse
from django.views.decorators.clickjacking import xframe_options_exempt


@xframe_options_exempt
def ok_to_load_in_a_frame(request):
    return HttpResponse("This page is safe to load in a frame on any site.")
</pre> <div class="admonition note"> <p class="admonition-title">Note</p> <p>If you want to submit a form or access a session cookie within a frame or iframe, you may need to modify the <a class="reference internal" href="settings.html#std-setting-CSRF_COOKIE_SAMESITE"><code>CSRF_COOKIE_SAMESITE</code></a> or <a class="reference internal" href="settings.html#std-setting-SESSION_COOKIE_SAMESITE"><code>SESSION_COOKIE_SAMESITE</code></a> settings.</p> </div> </section> <section id="s-setting-x-frame-options-per-view"> <h3 id="setting-x-frame-options-per-view">Setting <code>X-Frame-Options</code> per view</h3> <p>To set the <code>X-Frame-Options</code> header on a per view basis, Django provides these decorators:</p> <pre data-language="python">from django.http import HttpResponse
from django.views.decorators.clickjacking import xframe_options_deny
from django.views.decorators.clickjacking import xframe_options_sameorigin


@xframe_options_deny
def view_one(request):
    return HttpResponse("I won't display in any frame!")


@xframe_options_sameorigin
def view_two(request):
    return HttpResponse("Display in a frame if it's from the same origin as me.")
</pre> <p>Note that you can use the decorators in conjunction with the middleware. Use of a decorator overrides the middleware.</p> </section> </section> <section id="s-limitations"> <h2 id="limitations">Limitations</h2> <p>The <code>X-Frame-Options</code> header will only protect against clickjacking in <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Frame-Options#browser_compatibility">modern browsers</a>.</p> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; Django Software Foundation and individual contributors<br>Licensed under the BSD License.<br>
    <a href="https://docs.djangoproject.com/en/5.2/ref/clickjacking/" class="_attribution-link">https://docs.djangoproject.com/en/5.2/ref/clickjacking/</a>
  </p>
</div>
