 <span id="id1"></span><h1>Upgrading optparse code</h1> <p>Originally, the <a class="reference internal" href="../library/argparse.html#module-argparse" title="argparse: Command-line option and argument parsing library."><code>argparse</code></a> module had attempted to maintain compatibility with <a class="reference internal" href="../library/optparse.html#module-optparse" title="optparse: Command-line option parsing library. (deprecated)"><code>optparse</code></a>. However, <a class="reference internal" href="../library/optparse.html#module-optparse" title="optparse: Command-line option parsing library. (deprecated)"><code>optparse</code></a> was difficult to extend transparently, particularly with the changes required to support <code>nargs=</code> specifiers and better usage messages. When most everything in <a class="reference internal" href="../library/optparse.html#module-optparse" title="optparse: Command-line option parsing library. (deprecated)"><code>optparse</code></a> had either been copy-pasted over or monkey-patched, it no longer seemed practical to try to maintain the backwards compatibility.</p> <p>The <a class="reference internal" href="../library/argparse.html#module-argparse" title="argparse: Command-line option and argument parsing library."><code>argparse</code></a> module improves on the <a class="reference internal" href="../library/optparse.html#module-optparse" title="optparse: Command-line option parsing library. (deprecated)"><code>optparse</code></a> module in a number of ways including:</p> <ul class="simple"> <li>Handling positional arguments.</li> <li>Supporting subcommands.</li> <li>Allowing alternative option prefixes like <code>+</code> and <code>/</code>.</li> <li>Handling zero-or-more and one-or-more style arguments.</li> <li>Producing more informative usage messages.</li> <li>Providing a much simpler interface for custom <code>type</code> and <code>action</code>.</li> </ul> <p>A partial upgrade path from <a class="reference internal" href="../library/optparse.html#module-optparse" title="optparse: Command-line option parsing library. (deprecated)"><code>optparse</code></a> to <a class="reference internal" href="../library/argparse.html#module-argparse" title="argparse: Command-line option and argument parsing library."><code>argparse</code></a>:</p> <ul class="simple"> <li>Replace all <a class="reference internal" href="../library/optparse.html#optparse.OptionParser.add_option" title="optparse.OptionParser.add_option"><code>optparse.OptionParser.add_option()</code></a> calls with <a class="reference internal" href="../library/argparse.html#argparse.ArgumentParser.add_argument" title="argparse.ArgumentParser.add_argument"><code>ArgumentParser.add_argument()</code></a> calls.</li> <li>Replace <code>(options, args) = parser.parse_args()</code> with <code>args =
parser.parse_args()</code> and add additional <a class="reference internal" href="../library/argparse.html#argparse.ArgumentParser.add_argument" title="argparse.ArgumentParser.add_argument"><code>ArgumentParser.add_argument()</code></a> calls for the positional arguments. Keep in mind that what was previously called <code>options</code>, now in the <a class="reference internal" href="../library/argparse.html#module-argparse" title="argparse: Command-line option and argument parsing library."><code>argparse</code></a> context is called <code>args</code>.</li> <li>Replace <a class="reference internal" href="../library/optparse.html#optparse.OptionParser.disable_interspersed_args" title="optparse.OptionParser.disable_interspersed_args"><code>optparse.OptionParser.disable_interspersed_args()</code></a> by using <a class="reference internal" href="../library/argparse.html#argparse.ArgumentParser.parse_intermixed_args" title="argparse.ArgumentParser.parse_intermixed_args"><code>parse_intermixed_args()</code></a> instead of <a class="reference internal" href="../library/argparse.html#argparse.ArgumentParser.parse_args" title="argparse.ArgumentParser.parse_args"><code>parse_args()</code></a>.</li> <li>Replace callback actions and the <code>callback_*</code> keyword arguments with <code>type</code> or <code>action</code> arguments.</li> <li>Replace string names for <code>type</code> keyword arguments with the corresponding type objects (e.g. int, float, complex, etc).</li> <li>Replace <a class="reference internal" href="../library/optparse.html#optparse.Values" title="optparse.Values"><code>optparse.Values</code></a> with <a class="reference internal" href="../library/argparse.html#argparse.Namespace" title="argparse.Namespace"><code>Namespace</code></a> and <a class="reference internal" href="../library/optparse.html#optparse.OptionError" title="optparse.OptionError"><code>optparse.OptionError</code></a> and <a class="reference internal" href="../library/optparse.html#optparse.OptionValueError" title="optparse.OptionValueError"><code>optparse.OptionValueError</code></a> with <a class="reference internal" href="../library/argparse.html#argparse.ArgumentError" title="argparse.ArgumentError"><code>ArgumentError</code></a>.</li> <li>Replace strings with implicit arguments such as <code>%default</code> or <code>%prog</code> with the standard Python syntax to use dictionaries to format strings, that is, <code>%(default)s</code> and <code>%(prog)s</code>.</li> <li>Replace the OptionParser constructor <code>version</code> argument with a call to <code>parser.add_argument('--version', action='version', version='&lt;the version&gt;')</code>.</li> </ul> <div class="_attribution">
  <p class="_attribution-p">
    &copy; 2001&ndash;2024 Python Software Foundation<br>Licensed under the PSF License.<br>
    <a href="https://docs.python.org/3.13/howto/argparse-optparse.html" class="_attribution-link">https://docs.python.org/3.13/howto/argparse-optparse.html</a>
  </p>
</div>
