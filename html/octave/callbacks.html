<div class="subsection" id="Callbacks">   <h1 class="subsection">15.4.4 Callbacks</h1>  <p>Callback functions can be associated with graphics objects and triggered after certain events occur. The basic structure of all callback function is </p> <pre class="example" data-language="matlab">function mycallback (hsrc, evt)
  …
endfunction</pre> <p>where <code>hsrc</code> is a handle to the source of the callback, and <code>evt</code> gives some event specific data. </p> <p>The function can be provided as a function handle to a plain Octave function, as an anonymous function, or as a string representing an Octave command. The latter syntax is not recommended since syntax errors will only occur when the string is evaluated. See <a href="function-handles-and-anonymous-functions.html">Function Handles section</a>. </p> <p>This can then be associated with an object either at the object’s creation, or later with the <code>set</code> function. For example, </p> <pre class="example" data-language="matlab">plot (x, "DeleteFcn", @(h, e) disp ("Window Deleted"))</pre> <p>where at the moment that the plot is deleted, the message <code>"Window Deleted"</code> will be displayed. </p> <p>Additional user arguments can be passed to callback functions, and will be passed after the two default arguments. For example: </p> <pre class="example" data-language="matlab">plot (x, "DeleteFcn", {@mycallback, "1"})
…
function mycallback (h, evt, arg1)
  fprintf ("Closing plot %d\n", arg1);
endfunction</pre> <p><strong>Caution:</strong> The second argument in callback functions—<code>evt</code>—is only partially implemented in the Qt graphics toolkit: </p> <ul> <li> Mouse click events: <code>evt</code> is a class <code>double</code> value: 1 for left, 2 for middle, and 3 for right click. </li>
<li> Key press events: <code>evt</code> is a structure with fields <code>Key</code> (string), <code>Character</code> (string), and <code>Modifier</code> (cell array of strings). </li>
<li> Other events: <code>evt</code> is a class <code>double</code> empty matrix. </li>
</ul> <p>The basic callback functions that are available for all graphics objects are </p> <ul> <li> CreateFcn: called at the moment of the objects creation. It is not called if the object is altered in any way, and so it only makes sense to define this callback in the function call that defines the object. Callbacks that are added to <code>CreateFcn</code> later with the <code>set</code> function will never be executed. </li>
<li> DeleteFcn: called at the moment an object is deleted. </li>
<li> ButtonDownFcn: called if a mouse button is pressed while the pointer is over this object. Note, that the gnuplot interface does not implement this callback. </li>
</ul> <p>By default callback functions are queued (they are executed one after the other in the event queue) unless the <code>drawnow</code>, <code>figure</code>, <code>waitfor</code>, <code>getframe</code>, or <code>pause</code> functions are used. If an executing callback invokes one of those functions, it causes Octave to flush the event queue, which results in the executing callback being interrupted. </p> <p>It is possible to specify that an object’s callbacks should not be interrupted by setting the object’s <code>interruptible</code> property to <code>"off"</code>. In this case, Octave decides what to do based on the <code>busyaction</code> property of the <strong>interrupting</strong> callback object: </p> <dl compact> <dt><span><code>queue</code> (the default)</span></dt> <dd>
<p>The interrupting callback is executed after the executing callback has returned. </p> </dd> <dt><span><code>cancel</code></span></dt> <dd><p>The interrupting callback is discarded. </p></dd> </dl> <p>The <code>interruptible</code> property has no effect when the interrupting callback is a <code>deletefcn</code>, or a figure <code>resizefcn</code> or <code>closerequestfcn</code>. Those callbacks always interrupt the executing callback. </p> <p>The handle to the object that holds the callback being executed can be obtained with the <code>gcbo</code> function. The handle to the ancestor figure of this object may be obtained using the <code>gcbf</code> function. </p> <dl class="def"> <dt id="index-gcbo">
<span class="category">: </span><span><em><var>h</var> =</em> <strong>gcbo</strong> <em>()</em><a href="#index-gcbo" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-gcbo-1">
<span class="category">: </span><span><em>[<var>h</var>, <var>fig</var>] =</em> <strong>gcbo</strong> <em>()</em><a href="#index-gcbo-1" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Return a handle to the object whose callback is currently executing. </p> <p>If no callback is executing, this function returns the empty matrix. This handle is obtained from the root object property <code>"CallbackObject"</code>. </p> <p>When called with a second output argument, return the handle of the figure containing the object whose callback is currently executing. If no callback is executing the second output is also set to the empty matrix. </p> <p><strong>See also:</strong> <a href="#XREFgcbf">gcbf</a>, <a href="graphics-objects.html#XREFgco">gco</a>, <a href="graphics-objects.html#XREFgca">gca</a>, <a href="graphics-objects.html#XREFgcf">gcf</a>, <a href="graphics-objects.html#XREFget">get</a>, <a href="graphics-objects.html#XREFset">set</a>. </p>
</dd>
</dl> <dl class="def"> <dt id="index-gcbf">
<span class="category">: </span><span><em><var>fig</var> =</em> <strong>gcbf</strong> <em>()</em><a href="#index-gcbf" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Return a handle to the figure containing the object whose callback is currently executing. </p> <p>If no callback is executing, this function returns the empty matrix. The handle returned by this function is the same as the second output argument of <code>gcbo</code>. </p> <p><strong>See also:</strong> <a href="#XREFgcbo">gcbo</a>, <a href="graphics-objects.html#XREFgcf">gcf</a>, <a href="graphics-objects.html#XREFgco">gco</a>, <a href="graphics-objects.html#XREFgca">gca</a>, <a href="graphics-objects.html#XREFget">get</a>, <a href="graphics-objects.html#XREFset">set</a>. </p>
</dd>
</dl> <p>Callbacks can equally be added to properties with the <code>addlistener</code> function described below. </p> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1996–2023 The Octave Project Developers<br>Permission is granted to make and distribute verbatim copies of this manual provided the copyright notice and this permission notice are preserved on all copies.<br/>Permission is granted to copy and distribute modified versions of this manual under the conditions for verbatim copying, provided that the entire resulting derived work is distributed under the terms of a permission notice identical to this one.</br>Permission is granted to copy and distribute translations of this manual into another language, under the above conditions for modified versions.<br>
    <a href="https://docs.octave.org/v8.1.0/Callbacks.html" class="_attribution-link">https://docs.octave.org/v8.1.0/Callbacks.html</a>
  </p>
</div>
