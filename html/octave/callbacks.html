<div class="subsection-level-extent" id="Callbacks"> <div class="nav-panel"> <p> Next: <a href="application_002ddefined-data.html" accesskey="n" rel="next">Application-defined Data</a>, Previous: <a href="marker-styles.html" accesskey="p" rel="prev">Marker Styles</a>, Up: <a href="advanced-plotting.html" accesskey="u" rel="up">Advanced Plotting</a> [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="concept-index.html" title="Index" rel="index">Index</a>]</p> </div>  <h1 class="subsection" id="Callbacks-1"><span>15.4.4 Callbacks<a class="copiable-link" href="#Callbacks-1"> ¶</a></span></h1>  <p>Callback functions can be associated with graphics objects and triggered after certain events occur. The basic structure of all callback function is </p> <pre class="example" data-language="matlab">function mycallback (hsrc, evt)
  ...
endfunction</pre> <p>where <code class="code">hsrc</code> is a handle to the source of the callback, and <code class="code">evt</code> gives some event specific data. </p> <p>The function can be provided as a function handle to a plain Octave function, as an anonymous function, or as a string representing an Octave command. The latter syntax is not recommended since syntax errors will only occur when the string is evaluated. See <a class="xref" href="function-handles-and-anonymous-functions.html">Function Handles section</a>. </p> <p>This can then be associated with an object either at the object’s creation, or later with the <code class="code">set</code> function. For example, </p> <pre class="example" data-language="matlab">plot (x, "DeleteFcn", @(h, e) disp ("Window Deleted"))</pre> <p>where at the moment that the plot is deleted, the message <code class="code">"Window Deleted"</code> will be displayed. </p> <p>Additional user arguments can be passed to callback functions, and will be passed after the two default arguments. For example: </p> <pre class="example" data-language="matlab">plot (x, "DeleteFcn", {@mycallback, "1"})
...
function mycallback (h, evt, arg1)
  fprintf ("Closing plot %d\n", arg1);
endfunction</pre> <p><strong class="strong">Caution:</strong> The second argument in callback functions—<code class="code">evt</code>—is only partially implemented in the Qt graphics toolkit: </p> <ul class="itemize mark-bullet"> <li>Mouse click events: <code class="code">evt</code> is a class <code class="code">double</code> value: 1 for left, 2 for middle, and 3 for right click. </li>
<li>Key press events: <code class="code">evt</code> is a structure with fields <code class="code">Key</code> (string), <code class="code">Character</code> (string), and <code class="code">Modifier</code> (cell array of strings). </li>
<li>Other events: <code class="code">evt</code> is a class <code class="code">double</code> empty matrix. </li>
</ul> <p>The basic callback functions that are available for all graphics objects are </p> <ul class="itemize mark-bullet"> <li>CreateFcn: called at the moment of the objects creation. It is not called if the object is altered in any way, and so it only makes sense to define this callback in the function call that defines the object. Callbacks that are added to <code class="code">CreateFcn</code> later with the <code class="code">set</code> function will never be executed. </li>
<li>DeleteFcn: called at the moment an object is deleted. </li>
<li>ButtonDownFcn: called if a mouse button is pressed while the pointer is over this object. Note, that the gnuplot interface does not implement this callback. </li>
</ul> <p>By default callback functions are queued (they are executed one after the other in the event queue) unless the <code class="code">drawnow</code>, <code class="code">figure</code>, <code class="code">waitfor</code>, <code class="code">getframe</code>, or <code class="code">pause</code> functions are used. If an executing callback invokes one of those functions, it causes Octave to flush the event queue, which results in the executing callback being interrupted. </p> <p>It is possible to specify that an object’s callbacks should not be interrupted by setting the object’s <code class="code">interruptible</code> property to <code class="code">"off"</code>. In this case, Octave decides what to do based on the <code class="code">busyaction</code> property of the <strong class="strong">interrupting</strong> callback object: </p> <dl class="table"> <dt>
<code class="code">queue</code> (the default)</dt> <dd>
<p>The interrupting callback is executed after the executing callback has returned. </p> </dd> <dt><code class="code">cancel</code></dt> <dd><p>The interrupting callback is discarded. </p></dd> </dl> <p>The <code class="code">interruptible</code> property has no effect when the interrupting callback is a <code class="code">deletefcn</code>, or a figure <code class="code">resizefcn</code> or <code class="code">closerequestfcn</code>. Those callbacks always interrupt the executing callback. </p> <p>The handle to the object that holds the callback being executed can be obtained with the <code class="code">gcbo</code> function. The handle to the ancestor figure of this object may be obtained using the <code class="code">gcbf</code> function. </p>  <dl class="first-deftypefn"> <dt class="deftypefn" id="index-gcbo">
<span class="category-def">: </span><span><code class="def-type"><var class="var">h</var> =</code> <strong class="def-name">gcbo</strong> <code class="def-code-arguments">()</code><a class="copiable-link" href="#index-gcbo"> ¶</a></span>
</dt> <dt class="deftypefnx def-cmd-deftypefn" id="index-gcbo-1">
<span class="category-def">: </span><span><code class="def-type">[<var class="var">h</var>, <var class="var">fig</var>] =</code> <strong class="def-name">gcbo</strong> <code class="def-code-arguments">()</code><a class="copiable-link" href="#index-gcbo-1"> ¶</a></span>
</dt> <dd>
<p>Return a handle to the object whose callback is currently executing. </p> <p>If no callback is executing, this function returns the empty matrix. This handle is obtained from the root object property <code class="code">"CallbackObject"</code>. </p> <p>When called with a second output argument, return the handle of the figure containing the object whose callback is currently executing. If no callback is executing the second output is also set to the empty matrix. </p> <p><strong class="strong">See also:</strong> <a class="ref" href="#XREFgcbf">gcbf</a>, <a class="ref" href="graphics-objects.html#XREFgco">gco</a>, <a class="ref" href="graphics-objects.html#XREFgca">gca</a>, <a class="ref" href="graphics-objects.html#XREFgcf">gcf</a>, <a class="ref" href="graphics-objects.html#XREFget">get</a>, <a class="ref" href="graphics-objects.html#XREFset">set</a>. </p>
</dd>
</dl>  <dl class="first-deftypefn"> <dt class="deftypefn" id="index-gcbf">
<span class="category-def">: </span><span><code class="def-type"><var class="var">fig</var> =</code> <strong class="def-name">gcbf</strong> <code class="def-code-arguments">()</code><a class="copiable-link" href="#index-gcbf"> ¶</a></span>
</dt> <dd>
<p>Return a handle to the figure containing the object whose callback is currently executing. </p> <p>If no callback is executing, this function returns the empty matrix. The handle returned by this function is the same as the second output argument of <code class="code">gcbo</code>. </p> <p><strong class="strong">See also:</strong> <a class="ref" href="#XREFgcbo">gcbo</a>, <a class="ref" href="graphics-objects.html#XREFgcf">gcf</a>, <a class="ref" href="graphics-objects.html#XREFgco">gco</a>, <a class="ref" href="graphics-objects.html#XREFgca">gca</a>, <a class="ref" href="graphics-objects.html#XREFget">get</a>, <a class="ref" href="graphics-objects.html#XREFset">set</a>. </p>
</dd>
</dl> <p>Callbacks can equally be added to properties with the <code class="code">addlistener</code> function described below. </p> </div>  <div class="nav-panel"> <p> Next: <a href="application_002ddefined-data.html">Application-defined Data</a>, Previous: <a href="marker-styles.html">Marker Styles</a>, Up: <a href="advanced-plotting.html">Advanced Plotting</a> [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="concept-index.html" title="Index" rel="index">Index</a>]</p> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1996–2023 The Octave Project Developers<br>Permission is granted to make and distribute verbatim copies of this manual provided the copyright notice and this permission notice are preserved on all copies.<br/>Permission is granted to copy and distribute modified versions of this manual under the conditions for verbatim copying, provided that the entire resulting derived work is distributed under the terms of a permission notice identical to this one.</br>Permission is granted to copy and distribute translations of this manual into another language, under the above conditions for modified versions.<br>
    <a href="https://docs.octave.org/v9.2.0/Callbacks.html" class="_attribution-link">https://docs.octave.org/v9.2.0/Callbacks.html</a>
  </p>
</div>
