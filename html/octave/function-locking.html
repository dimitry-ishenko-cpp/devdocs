<div class="subsection" id="Function-Locking">   <h1 class="subsection">11.10.6 Function Locking</h1> <p>It is sometime desirable to lock a function into memory with the <code>mlock</code> function. This is typically used for dynamically linked functions in oct-files or mex-files that contain some initialization, and it is desirable that calling <code>clear</code> does not remove this initialization. </p> <p>As an example, </p> <pre class="example" data-language="matlab">function my_function ()
  mlock ();
  …
endfunction</pre> <p>prevents <code>my_function</code> from being removed from memory after it is called, even if <code>clear</code> is called. It is possible to determine if a function is locked into memory with the <code>mislocked</code>, and to unlock a function with <code>munlock</code>, which the following code illustrates. </p> <pre class="example" data-language="matlab">my_function ();
mislocked ("my_function")
⇒ ans = 1
munlock ("my_function");
mislocked ("my_function")
⇒ ans = 0</pre> <p>A common use of <code>mlock</code> is to prevent persistent variables from being removed from memory, as the following example shows: </p> <pre class="example" data-language="matlab">function count_calls ()
  mlock ();
  persistent calls = 0;
  printf ("count_calls() has been called %d times\n", ++calls);
endfunction

count_calls ();
-| count_calls() has been called 1 times

clear count_calls
count_calls ();
-| count_calls() has been called 2 times</pre> <p><code>mlock</code> might also be used to prevent changes to an m-file, such as in an external editor, from having any effect in the current Octave session; A similar effect can be had with the <code>ignore_function_time_stamp</code> function. </p> <dl class="def"> <dt id="index-mlock">
<span class="category">: </span><span> <strong>mlock</strong> <em>()</em><a href="#index-mlock" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Lock the current function into memory so that it can’t be removed with <code>clear</code>. </p> <p><strong>See also:</strong> <a href="#XREFmunlock">munlock</a>, <a href="#XREFmislocked">mislocked</a>, <a href="persistent-variables.html#XREFpersistent">persistent</a>, <a href="status-of-variables.html#XREFclear">clear</a>. </p>
</dd>
</dl> <dl class="def"> <dt id="index-munlock">
<span class="category">: </span><span> <strong>munlock</strong> <em>()</em><a href="#index-munlock" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-munlock-1">
<span class="category">: </span><span> <strong>munlock</strong> <em>(<var>fcn</var>)</em><a href="#index-munlock-1" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Unlock the named function <var>fcn</var> so that it may be removed from memory with <code>clear</code>. </p> <p>If no function is named then unlock the current function. </p> <p><strong>See also:</strong> <a href="#XREFmlock">mlock</a>, <a href="#XREFmislocked">mislocked</a>, <a href="persistent-variables.html#XREFpersistent">persistent</a>, <a href="status-of-variables.html#XREFclear">clear</a>. </p>
</dd>
</dl> <dl class="def"> <dt id="index-mislocked">
<span class="category">: </span><span><em><var>tf</var> =</em> <strong>mislocked</strong> <em>()</em><a href="#index-mislocked" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-mislocked-1">
<span class="category">: </span><span><em><var>tf</var> =</em> <strong>mislocked</strong> <em>(<var>fcn</var>)</em><a href="#index-mislocked-1" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Return true if the named function <var>fcn</var> is locked in memory. </p> <p>If no function is named then return true if the current function is locked. </p> <p><strong>See also:</strong> <a href="#XREFmlock">mlock</a>, <a href="#XREFmunlock">munlock</a>, <a href="persistent-variables.html#XREFpersistent">persistent</a>, <a href="status-of-variables.html#XREFclear">clear</a>. </p>
</dd>
</dl> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1996–2023 The Octave Project Developers<br>Permission is granted to make and distribute verbatim copies of this manual provided the copyright notice and this permission notice are preserved on all copies.<br/>Permission is granted to copy and distribute modified versions of this manual under the conditions for verbatim copying, provided that the entire resulting derived work is distributed under the terms of a permission notice identical to this one.</br>Permission is granted to copy and distribute translations of this manual into another language, under the above conditions for modified versions.<br>
    <a href="https://docs.octave.org/v8.1.0/Function-Locking.html" class="_attribution-link">https://docs.octave.org/v8.1.0/Function-Locking.html</a>
  </p>
</div>
