<div class="subsection-level-extent" id="Parsing-Arguments"> <div class="nav-panel"> <p> Previous: <a href="validating-the-type-of-arguments.html" accesskey="p" rel="prev">Validating the type of Arguments</a>, Up: <a href="validating-arguments.html" accesskey="u" rel="up">Validating Arguments</a> [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="concept-index.html" title="Index" rel="index">Index</a>]</p> </div>  <h1 class="subsection" id="Parsing-Arguments-1"><span>11.9.3 Parsing Arguments<a class="copiable-link" href="#Parsing-Arguments-1"> ¶</a></span></h1> <p>If none of the preceding validation functions is sufficient there is also the class <code class="code">inputParser</code> which can perform extremely complex input checking for functions. </p>  <dl class="first-deftypefn"> <dt class="deftypefn" id="index-inputParser">
<span class="category-def">: </span><span><code class="def-type"><var class="var">p</var> =</code> <strong class="def-name">inputParser</strong> <code class="def-code-arguments">()</code><a class="copiable-link" href="#index-inputParser"> ¶</a></span>
</dt> <dd>
<p>Create object <var class="var">p</var> of the inputParser class. </p> <p>This class is designed to allow easy parsing of function arguments. The class supports four types of arguments: </p> <ol class="enumerate"> <li> mandatory (see <code class="code">addRequired</code>); </li>
<li> optional (see <code class="code">addOptional</code>); </li>
<li> named (see <code class="code">addParameter</code>); </li>
<li> switch (see <code class="code">addSwitch</code>). </li>
</ol> <p>After defining the function API with these methods, the supplied arguments can be parsed with the <code class="code">parse</code> method and the results accessed with the <code class="code">Results</code> accessor. </p>
</dd>
</dl> <dl class="first-deftypefn"> <dt class="deftypefn" id="index-inputParser_002eParameters">
<span class="category-def">: </span><span><strong class="def-name">inputParser.Parameters</strong><a class="copiable-link" href="#index-inputParser_002eParameters"> ¶</a></span>
</dt> <dd><p>Return the list of parameter names already defined. (read-only) </p></dd>
</dl> <dl class="first-deftypefn"> <dt class="deftypefn" id="index-inputParser_002eResults">
<span class="category-def">: </span><span><strong class="def-name">inputParser.Results</strong><a class="copiable-link" href="#index-inputParser_002eResults"> ¶</a></span>
</dt> <dd><p>Return a structure with argument names as fieldnames and corresponding values. (read-only) </p></dd>
</dl> <dl class="first-deftypefn"> <dt class="deftypefn" id="index-inputParser_002eUnmatched">
<span class="category-def">: </span><span><strong class="def-name">inputParser.Unmatched</strong><a class="copiable-link" href="#index-inputParser_002eUnmatched"> ¶</a></span>
</dt> <dd><p>Return a structure similar to <code class="code">Results</code>, but for unmatched parameters. (read-only) See the <code class="code">KeepUnmatched</code> property. </p></dd>
</dl> <dl class="first-deftypefn"> <dt class="deftypefn" id="index-inputParser_002eUsingDefaults">
<span class="category-def">: </span><span><strong class="def-name">inputParser.UsingDefaults</strong><a class="copiable-link" href="#index-inputParser_002eUsingDefaults"> ¶</a></span>
</dt> <dd><p>Return cell array with the names of arguments that are using default values. (read-only) </p></dd>
</dl> <dl class="first-deftypefn"> <dt class="deftypefn" id="index-inputParser_002eFunctionName">
<span class="category-def">: </span><span><strong class="def-name">inputParser.FunctionName</strong> <code class="def-code-arguments">= <var class="var">name</var></code><a class="copiable-link" href="#index-inputParser_002eFunctionName"> ¶</a></span>
</dt> <dd><p>Set function name to be used in error messages; Defaults to empty string. </p></dd>
</dl> <dl class="first-deftypefn"> <dt class="deftypefn" id="index-inputParser_002eCaseSensitive">
<span class="category-def">: </span><span><strong class="def-name">inputParser.CaseSensitive</strong> <code class="def-code-arguments">= <var class="var">boolean</var></code><a class="copiable-link" href="#index-inputParser_002eCaseSensitive"> ¶</a></span>
</dt> <dd><p>Set whether matching of argument names should be case sensitive; Defaults to false. </p></dd>
</dl> <dl class="first-deftypefn"> <dt class="deftypefn" id="index-inputParser_002eKeepUnmatched">
<span class="category-def">: </span><span><strong class="def-name">inputParser.KeepUnmatched</strong> <code class="def-code-arguments">= <var class="var">boolean</var></code><a class="copiable-link" href="#index-inputParser_002eKeepUnmatched"> ¶</a></span>
</dt> <dd><p>Set whether string arguments which do not match any Parameter are parsed and stored in the <code class="code">Unmatched</code> property; Defaults to false. If false, an error will be emitted at the first unrecognized argument and parsing will stop. Note that since <code class="code">Switch</code> and <code class="code">Parameter</code> arguments can be mixed, it is not possible to know the type of the unmatched argument. Octave assumes that all unmatched arguments are of the <code class="code">Parameter</code> type and therefore must be followed by a value. </p></dd>
</dl> <dl class="first-deftypefn"> <dt class="deftypefn" id="index-inputParser_002ePartialMatching">
<span class="category-def">: </span><span><strong class="def-name">inputParser.PartialMatching</strong> <code class="def-code-arguments">= <var class="var">boolean</var></code><a class="copiable-link" href="#index-inputParser_002ePartialMatching"> ¶</a></span>
</dt> <dd><p>Set whether argument names for <code class="code">Parameter</code> and <code class="code">Switch</code> options may be given in shortened form as long as the name uniquely identifies an option; Defaults to true. For example, the argument <code class="code">'opt'</code> will match a parameter <code class="code">'opt_color'</code>, but will fail if there is also a parameter <code class="code">'opt_case'</code>. </p></dd>
</dl> <dl class="first-deftypefn"> <dt class="deftypefn" id="index-inputParser_002eStructExpand">
<span class="category-def">: </span><span><strong class="def-name">inputParser.StructExpand</strong> <code class="def-code-arguments">= <var class="var">boolean</var></code><a class="copiable-link" href="#index-inputParser_002eStructExpand"> ¶</a></span>
</dt> <dd>
<p>Set whether a structure passed to the function is expanded into parameter/value pairs (parameter = fieldname); Defaults to true. </p> <p>The following example shows how to use this class: </p> <pre class="example" data-language="matlab">function check (varargin)
  p = inputParser ();                      # create object
  p.FunctionName = "check";                # set function name
  p.addRequired ("pack", @ischar);         # mandatory argument
  p.addOptional ("path", pwd(), @ischar);  # optional argument

  ## Create anonymous function handle for validators
  valid_vec = @(x) isvector (x) &amp;&amp; all (x &gt;= 0) &amp;&amp; all (x &lt;= 1);
  p.addOptional ("vec", [0 0], valid_vec);

  ## Create two arguments of type "Parameter"
  vld_type = @(x) any (strcmp (x, {"linear", "quadratic"}));
  p.addParameter ("type", "linear", vld_type);
  vld_tol = @(x) any (strcmp (x, {"low", "medium", "high"}));
  p.addParameter ("tolerance", "low", vld_tol);

  ## Create a switch type of argument
  p.addSwitch ("verbose");

  p.parse (varargin{:});  # Run created parser on inputs

  ## The rest of the function can access inputs by using p.Results.
  ## For example, get the tolerance input with p.Results.tolerance
endfunction</pre> <pre class="example" data-language="matlab">check ("mech");           # valid, use defaults for other arguments
check ();                 # error, one argument is mandatory
check (1);                # error, since ! ischar
check ("mech", "~/dev");  # valid, use defaults for other arguments

check ("mech", "~/dev", [0 1 0 0], "type", "linear");  # valid

## following is also valid.  Note how the Switch argument type can
## be mixed in with or before the Parameter argument type (but it
## must still appear after any Optional arguments).
check ("mech", "~/dev", [0 1 0 0], "verbose", "tolerance", "high");

## following returns an error since an Optional argument, 'path',
## was given after the Parameter argument 'type'.
check ("mech", "type", "linear", "~/dev");</pre> <p><em class="emph">Note 1</em>: A function can have any mixture of the four API types but they must appear in a specific order. <code class="code">Required</code> arguments must be first and can be followed by any <code class="code">Optional</code> arguments. Only the <code class="code">Parameter</code> and <code class="code">Switch</code> arguments may be mixed together and they must appear following the first two types. </p> <p><em class="emph">Note 2</em>: If both <code class="code">Optional</code> and <code class="code">Parameter</code> arguments are mixed in a function API then once a string Optional argument fails to validate it will be considered the end of the <code class="code">Optional</code> arguments. The remaining arguments will be compared against any <code class="code">Parameter</code> or <code class="code">Switch</code> arguments. </p> <p><strong class="strong">See also:</strong> <a class="ref" href="defining-functions.html#XREFnargin">nargin</a>, <a class="ref" href="validating-the-type-of-arguments.html#XREFvalidateattributes">validateattributes</a>, <a class="ref" href="validating-the-type-of-arguments.html#XREFvalidatestring">validatestring</a>, <a class="ref" href="variable_002dlength-argument-lists.html#XREFvarargin">varargin</a>. </p>
</dd>
</dl> </div>  <div class="nav-panel"> <p> Previous: <a href="validating-the-type-of-arguments.html">Validating the type of Arguments</a>, Up: <a href="validating-arguments.html">Validating Arguments</a> [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="concept-index.html" title="Index" rel="index">Index</a>]</p> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1996–2023 The Octave Project Developers<br>Permission is granted to make and distribute verbatim copies of this manual provided the copyright notice and this permission notice are preserved on all copies.<br/>Permission is granted to copy and distribute modified versions of this manual under the conditions for verbatim copying, provided that the entire resulting derived work is distributed under the terms of a permission notice identical to this one.</br>Permission is granted to copy and distribute translations of this manual into another language, under the above conditions for modified versions.<br>
    <a href="https://docs.octave.org/v9.2.0/Parsing-Arguments.html" class="_attribution-link">https://docs.octave.org/v9.2.0/Parsing-Arguments.html</a>
  </p>
</div>
