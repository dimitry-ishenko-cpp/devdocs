<div class="section" id="Loading-and-Saving-Images">   <h1 class="section">32.1 Loading and Saving Images</h1> <p>The first step in most image processing tasks is to load an image into Octave which is done with the <code>imread</code> function. The <code>imwrite</code> function is the corresponding function for writing images to the disk. </p> <p>In summary, most image processing code will follow the structure of this code </p> <pre class="example" data-language="matlab">I = imread ("my_input_image.img");
J = process_my_image (I);
imwrite (J, "my_output_image.img");</pre> <dl class="def"> <dt id="index-imread">
<span class="category">: </span><span><em>[<var>img</var>, <var>map</var>, <var>alpha</var>] =</em> <strong>imread</strong> <em>(<var>filename</var>)</em><a href="#index-imread" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-imread-1">
<span class="category">: </span><span><em>[…] =</em> <strong>imread</strong> <em>(<var>url</var>)</em><a href="#index-imread-1" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-imread-2">
<span class="category">: </span><span><em>[…] =</em> <strong>imread</strong> <em>(…, <var>ext</var>)</em><a href="#index-imread-2" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-imread-3">
<span class="category">: </span><span><em>[…] =</em> <strong>imread</strong> <em>(…, <var>idx</var>)</em><a href="#index-imread-3" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-imread-4">
<span class="category">: </span><span><em>[…] =</em> <strong>imread</strong> <em>(…, <var>param1</var>, <var>value1</var>, …)</em><a href="#index-imread-4" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Read images from various file formats. </p> <p>Read an image as a matrix from the file <var>filename</var> or from the online resource <var>url</var>. If neither is given, but <var>ext</var> was specified, look for a file with the extension <var>ext</var>. </p> <p>The size and class of the output depends on the format of the image. A color image is returned as an MxNx3 matrix. Grayscale and black-and-white images are of size MxN. Multipage images will have an additional 4th dimension. </p> <p>The bit depth of the image determines the class of the output: <code>"uint8"</code>, <code>"uint16"</code>, or <code>"single"</code> for grayscale and color, and <code>"logical"</code> for black-and-white. Note that indexed images always return the indexes for a colormap, independent of whether <var>map</var> is a requested output. To obtain the actual RGB image, use <code>ind2rgb</code>. When more than one indexed image is being read, <var>map</var> is obtained from the first. In some rare cases this may be incorrect and <code>imfinfo</code> can be used to obtain the colormap of each image. </p> <p>See the Octave manual for more information in representing images. (see <a href="representing-images.html">Representing Images</a>) </p> <p>Some file formats, such as TIFF and GIF, are able to store multiple images in a single file. <var>idx</var> can be a scalar or vector specifying the index of the images to read. By default, Octave will read only the first page. </p> <p>Depending on the file format, it is possible to configure the reading of images with <var>parameter</var>, <var>value</var> pairs. The following options are supported: </p> <dl compact> <dt><span><code>"Frames"</code> or <code>"Index"</code></span></dt> <dd>
<p>This is an alternative method to specify <var>idx</var>. When specifying it in this way, its value can also be the string <code>"all"</code>. </p> </dd> <dt><span><code>"Info"</code></span></dt> <dd>
<p>This option exists for <small>MATLAB</small> compatibility, but has no effect. For maximum performance when reading multiple images from a single file, use the <code>"Index"</code> option. </p> </dd> <dt><span><code>"PixelRegion"</code></span></dt> <dd>
<p>Controls the image region that is read. The value must be a cell array with two arrays of 3 elements <code>{[<var>rows</var>], [<var>cols</var>]}</code>. The elements in the array are the start, increment, and end pixel to be read. If the increment value is omitted it defaults to 1. For example, the following are all equivalent: </p> <pre class="example" data-language="matlab">imread (filename, "PixelRegion", {[200 600], [300 700]});
imread (filename, "PixelRegion", {[200 1 600], [300 1 700]});
imread (filename)(200:600, 300:700);</pre> </dd> </dl> <p><strong>See also:</strong> <a href="#XREFimwrite">imwrite</a>, <a href="#XREFimfinfo">imfinfo</a>, <a href="#XREFimformats">imformats</a>. </p>
</dd>
</dl> <dl class="def"> <dt id="index-imwrite">
<span class="category">: </span><span> <strong>imwrite</strong> <em>(<var>img</var>, <var>filename</var>)</em><a href="#index-imwrite" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-imwrite-1">
<span class="category">: </span><span> <strong>imwrite</strong> <em>(<var>img</var>, <var>filename</var>, <var>ext</var>)</em><a href="#index-imwrite-1" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-imwrite-2">
<span class="category">: </span><span> <strong>imwrite</strong> <em>(<var>img</var>, <var>map</var>, <var>filename</var>)</em><a href="#index-imwrite-2" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-imwrite-3">
<span class="category">: </span><span> <strong>imwrite</strong> <em>(…, <var>param1</var>, <var>val1</var>, …)</em><a href="#index-imwrite-3" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Write images in various file formats. </p> <p>The image <var>img</var> can be a binary, grayscale, RGB, or multi-dimensional image. The size and class of <var>img</var> should be the same as what should be expected when reading it with <code>imread</code>: the 3rd and 4th dimensions reserved for color space, and multiple pages respectively. If it’s an indexed image, the colormap <var>map</var> must also be specified. </p> <p>If <var>ext</var> is not supplied, the file extension of <var>filename</var> is used to determine the format. The actual supported formats are dependent on options made during the build of Octave. Use <code>imformats</code> to check the support of the different image formats. </p> <p>Depending on the file format, it is possible to configure the writing of images with <var>param</var>, <var>val</var> pairs. The following options are supported: </p> <dl compact> <dt><span>‘<samp>Alpha</samp>’</span></dt> <dd>
<p>Alpha (transparency) channel for the image. This must be a matrix with same class, and number of rows and columns of <var>img</var>. In case of a multipage image, the size of the 4th dimension must also match and the third dimension must be a singleton. By default, image will be completely opaque. </p> </dd> <dt><span>‘<samp>Compression</samp>’</span></dt> <dd>
<p>Compression to use one the image. Can be one of the following: "none" (default), "bzip", "fax3", "fax4", "jpeg", "lzw", "rle", or "deflate". Note that not all compression types are available for all image formats in which it defaults to your Magick library. </p> </dd> <dt><span>‘<samp>DelayTime</samp>’</span></dt> <dd>
<p>For formats that accept animations (such as GIF), controls for how long a frame is displayed until it moves to the next one. The value must be scalar (which will applied to all frames in <var>img</var>), or a vector of length equal to the number of frames in <var>im</var>. The value is in seconds, must be between 0 and 655.35, and defaults to 0.5. </p> </dd> <dt><span>‘<samp>DisposalMethod</samp>’</span></dt> <dd>
<p>For formats that accept animations (such as GIF), controls what happens to a frame before drawing the next one. Its value can be one of the following strings: "doNotSpecify" (default); "leaveInPlace"; "restoreBG"; and "restorePrevious", or a cell array of those string with length equal to the number of frames in <var>img</var>. </p> </dd> <dt><span>‘<samp>LoopCount</samp>’</span></dt> <dd>
<p>For formats that accept animations (such as GIF), controls how many times the sequence is repeated. A value of Inf means an infinite loop (default), a value of 0 or 1 that the sequence is played only once (loops zero times), while a value of 2 or above loops that number of times (looping twice means it plays the complete sequence 3 times). This option is ignored when there is only a single image at the end of writing the file. </p> </dd> <dt><span>‘<samp>Quality</samp>’</span></dt> <dd>
<p>Set the quality of the compression. The value should be an integer between 0 and 100, with larger values indicating higher visual quality and lower compression. Defaults to 75. </p> </dd> <dt><span>‘<samp>WriteMode</samp>’</span></dt> <dd>
<p>Some file formats, such as TIFF and GIF, are able to store multiple images in a single file. This option specifies if <var>img</var> should be appended to the file (if it exists) or if a new file should be created for it (possibly overwriting an existing file). The value should be the string <code>"Overwrite"</code> (default), or <code>"Append"</code>. </p> <p>Despite this option, the most efficient method of writing a multipage image is to pass a 4 dimensional <var>img</var> to <code>imwrite</code>, the same matrix that could be expected when using <code>imread</code> with the option <code>"Index"</code> set to <code>"all"</code>. </p> </dd> </dl> <p><strong>See also:</strong> <a href="#XREFimread">imread</a>, <a href="#XREFimfinfo">imfinfo</a>, <a href="#XREFimformats">imformats</a>. </p>
</dd>
</dl> <dl class="def"> <dt id="index-IMAGE_005fPATH">
<span class="category">: </span><span><em><var>val</var> =</em> <strong>IMAGE_PATH</strong> <em>()</em><a href="#index-IMAGE_005fPATH" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-IMAGE_005fPATH-1">
<span class="category">: </span><span><em><var>old_val</var> =</em> <strong>IMAGE_PATH</strong> <em>(<var>new_val</var>)</em><a href="#index-IMAGE_005fPATH-1" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-IMAGE_005fPATH-2">
<span class="category">: </span><span><em><var>old_val</var> =</em> <strong>IMAGE_PATH</strong> <em>(<var>new_val</var>, "local")</em><a href="#index-IMAGE_005fPATH-2" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Query or set the internal variable that specifies a colon separated list of directories in which to search for image files. </p> <p>When called from inside a function with the <code>"local"</code> option, the variable is changed locally for the function and any subroutines it calls. The original variable value is restored when exiting the function. </p> <p><strong>See also:</strong> <a href="controlling-subprocesses.html#XREFEXEC_005fPATH">EXEC_PATH</a>, <a href="system-information.html#XREFOCTAVE_005fHOME">OCTAVE_HOME</a>, <a href="system-information.html#XREFOCTAVE_005fEXEC_005fHOME">OCTAVE_EXEC_HOME</a>. </p>
</dd>
</dl> <p>It is possible to get information about an image file on disk, without actually reading it into Octave. This is done using the <code>imfinfo</code> function which provides read access to many of the parameters stored in the header of the image file. </p> <dl class="def"> <dt id="index-imfinfo">
<span class="category">: </span><span><em><var>info</var> =</em> <strong>imfinfo</strong> <em>(<var>filename</var>)</em><a href="#index-imfinfo" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-imfinfo-1">
<span class="category">: </span><span><em><var>info</var> =</em> <strong>imfinfo</strong> <em>(<var>url</var>)</em><a href="#index-imfinfo-1" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-imfinfo-2">
<span class="category">: </span><span><em><var>info</var> =</em> <strong>imfinfo</strong> <em>(…, <var>ext</var>)</em><a href="#index-imfinfo-2" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Read image information from a file. </p> <p><code>imfinfo</code> returns a structure containing information about the image stored in the file <var>filename</var>. If there is no file <var>filename</var>, and <var>ext</var> was specified, it will look for a file named <var>filename</var> and extension <var>ext</var>, i.e., a file named <var>filename</var>.<var>ext</var>. </p> <p>The output structure <var>info</var> contains the following fields: </p> <dl compact> <dt><span>‘<samp>Filename</samp>’</span></dt> <dd>
<p>The full name of the image file. </p> </dd> <dt><span>‘<samp>FileModDate</samp>’</span></dt> <dd>
<p>Date of last modification to the file. </p> </dd> <dt><span>‘<samp>FileSize</samp>’</span></dt> <dd>
<p>Number of bytes of the image on disk </p> </dd> <dt><span>‘<samp>Format</samp>’</span></dt> <dd>
<p>Image format (e.g., <code>"jpeg"</code>). </p> </dd> <dt><span>‘<samp>Height</samp>’</span></dt> <dd>
<p>Image height in pixels. </p> </dd> <dt><span>‘<samp>Width</samp>’</span></dt> <dd>
<p>Image Width in pixels. </p> </dd> <dt><span>‘<samp>BitDepth</samp>’</span></dt> <dd>
<p>Number of bits per channel per pixel. </p> </dd> <dt><span>‘<samp>ColorType</samp>’</span></dt> <dd>
<p>Image type. Value is <code>"grayscale"</code>, <code>"indexed"</code>, <code>"truecolor"</code>, <code>"CMYK"</code>, or <code>"undefined"</code>. </p> </dd> <dt><span>‘<samp>XResolution</samp>’</span></dt> <dd>
<p>X resolution of the image. </p> </dd> <dt><span>‘<samp>YResolution</samp>’</span></dt> <dd>
<p>Y resolution of the image. </p> </dd> <dt><span>‘<samp>ResolutionUnit</samp>’</span></dt> <dd>
<p>Units of image resolution. Value is <code>"Inch"</code>, <code>"Centimeter"</code>, or <code>"undefined"</code>. </p> </dd> <dt><span>‘<samp>DelayTime</samp>’</span></dt> <dd>
<p>Time in 1/100ths of a second (0 to 65535) which must expire before displaying the next image in an animated sequence. </p> </dd> <dt><span>‘<samp>LoopCount</samp>’</span></dt> <dd>
<p>Number of iterations to loop an animation. </p> </dd> <dt><span>‘<samp>ByteOrder</samp>’</span></dt> <dd>
<p>Endian option for formats that support it. Value is <code>"little-endian"</code>, <code>"big-endian"</code>, or <code>"undefined"</code>. </p> </dd> <dt><span>‘<samp>Gamma</samp>’</span></dt> <dd>
<p>Gamma level of the image. The same color image displayed on two different workstations may look different due to differences in the display monitor. </p> </dd> <dt><span>‘<samp>Quality</samp>’</span></dt> <dd>
<p>JPEG/MIFF/PNG compression level. Value is an integer in the range [0 100]. </p> </dd> <dt><span>‘<samp>DisposalMethod</samp>’</span></dt> <dd>
<p>Only valid for GIF images, control how successive frames are rendered (how the preceding frame is disposed of) when creating a GIF animation. Values can be <code>"doNotSpecify"</code>, <code>"leaveInPlace"</code>, <code>"restoreBG"</code>, or <code>"restorePrevious"</code>. For non-GIF files, value is an empty string. </p> </dd> <dt><span>‘<samp>Chromaticities</samp>’</span></dt> <dd>
<p>Value is a 1x8 Matrix with the x,y chromaticity values for white, red, green, and blue points, in that order. </p> </dd> <dt><span>‘<samp>Comment</samp>’</span></dt> <dd>
<p>Image comment. </p> </dd> <dt><span>‘<samp>Compression</samp>’</span></dt> <dd>
<p>Compression type. Value can be <code>"none"</code>, <code>"bzip"</code>, <code>"fax3"</code>, <code>"fax4"</code>, <code>"jpeg"</code>, <code>"lzw"</code>, <code>"rle"</code>, <code>"deflate"</code>, <code>"lzma"</code>, <code>"jpeg2000"</code>, <code>"jbig2"</code>, <code>"jbig2"</code>, or <code>"undefined"</code>. </p> </dd> <dt><span>‘<samp>Colormap</samp>’</span></dt> <dd>
<p>Colormap for each image. </p> </dd> <dt><span>‘<samp>Orientation</samp>’</span></dt> <dd>
<p>The orientation of the image with respect to the rows and columns. Value is an integer between 1 and 8 as defined in the TIFF 6 specifications, and for <small>MATLAB</small> compatibility. </p> </dd> <dt><span>‘<samp>Software</samp>’</span></dt> <dd>
<p>Name and version of the software or firmware of the camera or image input device used to generate the image. </p> </dd> <dt><span>‘<samp>Make</samp>’</span></dt> <dd>
<p>The manufacturer of the recording equipment. This is the manufacture of the DSC, scanner, video digitizer or other equipment that generated the image. </p> </dd> <dt><span>‘<samp>Model</samp>’</span></dt> <dd>
<p>The model name or model number of the recording equipment as mentioned on the field <code>"Make"</code>. </p> </dd> <dt><span>‘<samp>DateTime</samp>’</span></dt> <dd>
<p>The date and time of image creation as defined by the Exif standard, i.e., it is the date and time the file was changed. </p> </dd> <dt><span>‘<samp>ImageDescription</samp>’</span></dt> <dd>
<p>The title of the image as defined by the Exif standard. </p> </dd> <dt><span>‘<samp>Artist</samp>’</span></dt> <dd>
<p>Name of the camera owner, photographer or image creator. </p> </dd> <dt><span>‘<samp>Copyright</samp>’</span></dt> <dd>
<p>Copyright notice of the person or organization claiming rights to the image. </p> </dd> <dt><span>‘<samp>DigitalCamera</samp>’</span></dt> <dd>
<p>A struct with information retrieved from the Exif tag. </p> </dd> <dt><span>‘<samp>GPSInfo</samp>’</span></dt> <dd><p>A struct with geotagging information retrieved from the Exif tag. </p></dd> </dl> <p><strong>See also:</strong> <a href="#XREFimread">imread</a>, <a href="#XREFimwrite">imwrite</a>, <a href="displaying-images.html#XREFimshow">imshow</a>, <a href="#XREFimformats">imformats</a>. </p>
</dd>
</dl> <p>By default, Octave’s image IO functions (<code>imread</code>, <code>imwrite</code>, and <code>imfinfo</code>) use the <code>GraphicsMagick</code> library for their operations. This means a vast number of image formats is supported but considering the large amount of image formats in science and its commonly closed nature, it is impossible to have a library capable of reading them all. Because of this, the function <code>imformats</code> keeps a configurable list of available formats, their extensions, and what functions should the image IO functions use. This allows one to expand Octave’s image IO capabilities by creating functions aimed at acting on specific file formats. </p> <p>While it would be possible to call the extra functions directly, properly configuring Octave with <code>imformats</code> allows one to keep a consistent code that is abstracted from file formats. </p> <p>It is important to note that a file format is not actually defined by its file extension and that <code>GraphicsMagick</code> is capable to read and write more file formats than the ones listed by <code>imformats</code>. What this means is that even with an incorrect or missing extension the image may still be read correctly, and that even unlisted formats are not necessarily unsupported. </p> <dl class="def"> <dt id="index-imformats">
<span class="category">: </span><span> <strong>imformats</strong> <em>()</em><a href="#index-imformats" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-imformats-1">
<span class="category">: </span><span><em><var>formats</var> =</em> <strong>imformats</strong> <em>(<var>ext</var>)</em><a href="#index-imformats-1" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-imformats-2">
<span class="category">: </span><span><em><var>formats</var> =</em> <strong>imformats</strong> <em>(<var>format</var>)</em><a href="#index-imformats-2" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-imformats-3">
<span class="category">: </span><span><em><var>formats</var> =</em> <strong>imformats</strong> <em>("add", <var>format</var>)</em><a href="#index-imformats-3" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-imformats-4">
<span class="category">: </span><span><em><var>formats</var> =</em> <strong>imformats</strong> <em>("remove", <var>ext</var>)</em><a href="#index-imformats-4" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-imformats-5">
<span class="category">: </span><span><em><var>formats</var> =</em> <strong>imformats</strong> <em>("update", <var>ext</var>, <var>format</var>)</em><a href="#index-imformats-5" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-imformats-6">
<span class="category">: </span><span><em><var>formats</var> =</em> <strong>imformats</strong> <em>("factory")</em><a href="#index-imformats-6" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Manage supported image formats. </p> <p><var>formats</var> is a structure with information about each supported file format, or from a specific format <var>ext</var>, the value displayed on the field <var>ext</var>. It contains the following fields: </p> <dl compact> <dt><span>ext</span></dt> <dd>
<p>The name of the file format. This may match the file extension but Octave will automatically detect the file format. </p> </dd> <dt><span>description</span></dt> <dd>
<p>A long description of the file format. </p> </dd> <dt><span>isa</span></dt> <dd>
<p>A function handle to confirm if a file is of the specified format. </p> </dd> <dt><span>write</span></dt> <dd>
<p>A function handle to write if a file is of the specified format. </p> </dd> <dt><span>read</span></dt> <dd>
<p>A function handle to open files the specified format. </p> </dd> <dt><span>info</span></dt> <dd>
<p>A function handle to obtain image information of the specified format. </p> </dd> <dt><span>alpha</span></dt> <dd>
<p>Logical value if format supports alpha channel (transparency or matte). </p> </dd> <dt><span>multipage</span></dt> <dd><p>Logical value if format supports multipage (multiple images per file). </p></dd> </dl> <p>It is possible to change the way Octave manages file formats with the options <code>"add"</code>, <code>"remove"</code>, and <code>"update"</code>, and supplying a structure <var>format</var> with the required fields. The option <code>"factory"</code> resets the configuration to the default. </p> <p>This can be used by Octave packages to extend the image reading capabilities Octave, through use of the PKG_ADD and PKG_DEL commands. </p> <p><strong>See also:</strong> <a href="#XREFimfinfo">imfinfo</a>, <a href="#XREFimread">imread</a>, <a href="#XREFimwrite">imwrite</a>. </p>
</dd>
</dl> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1996–2023 The Octave Project Developers<br>Permission is granted to make and distribute verbatim copies of this manual provided the copyright notice and this permission notice are preserved on all copies.<br/>Permission is granted to copy and distribute modified versions of this manual under the conditions for verbatim copying, provided that the entire resulting derived work is distributed under the terms of a permission notice identical to this one.</br>Permission is granted to copy and distribute translations of this manual into another language, under the above conditions for modified versions.<br>
    <a href="https://docs.octave.org/v8.1.0/Loading-and-Saving-Images.html" class="_attribution-link">https://docs.octave.org/v8.1.0/Loading-and-Saving-Images.html</a>
  </p>
</div>
