<div class="section-level-extent" id="Defining-Functions"> <div class="nav-panel"> <p> Next: <a href="returning-from-a-function.html" accesskey="n" rel="next">Returning from a Function</a>, Previous: <a href="introduction-to-function-and-script-files.html" accesskey="p" rel="prev">Introduction to Function and Script Files</a>, Up: <a href="functions-and-scripts.html" accesskey="u" rel="up">Functions and Scripts</a> [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="concept-index.html" title="Index" rel="index">Index</a>]</p> </div>  <h1 class="section" id="Defining-Functions-1"><span>11.2 Defining Functions<a class="copiable-link" href="#Defining-Functions-1"> ¶</a></span></h1>   <p>In its simplest form, the definition of a function named <var class="var">name</var> looks like this: </p> <pre class="example" data-language="matlab">function name
  body
endfunction</pre> <p>A valid function name is like a valid variable name: a sequence of letters, digits and underscores, not starting with a digit. Functions share the same pool of names as variables. </p> <p>The function <var class="var">body</var> consists of Octave statements. It is the most important part of the definition, because it says what the function should actually <em class="emph">do</em>. </p> <p>For example, here is a function that, when executed, will ring the bell on your terminal (assuming that it is possible to do so): </p> <pre class="example" data-language="matlab">function wakeup
  printf ("\a");
endfunction</pre> <p>The <code class="code">printf</code> statement (see <a class="pxref" href="input-and-output.html">Input and Output</a>) simply tells Octave to print the string <code class="code">"\a"</code>. The special character ‘<samp class="samp">\a</samp>’ stands for the alert character (ASCII 7). See <a class="xref" href="strings.html">Strings</a>. </p> <p>Once this function is defined, you can ask Octave to evaluate it by typing the name of the function. </p> <p>Normally, you will want to pass some information to the functions you define. The syntax for passing parameters to a function in Octave is </p> <pre class="example" data-language="matlab">function name (arg-list)
  body
endfunction</pre> <p>where <var class="var">arg-list</var> is a comma-separated list of the function’s arguments. When the function is called, the argument names are used to hold the argument values given in the call. The list of arguments may be empty, in which case this form is equivalent to the one shown above. </p> <p>To print a message along with ringing the bell, you might modify the <code class="code">wakeup</code> to look like this: </p> <pre class="example" data-language="matlab">function wakeup (message)
  printf ("\a%s\n", message);
endfunction</pre> <p>Calling this function using a statement like this </p> <pre class="example" data-language="matlab">wakeup ("Rise and shine!");</pre> <p>will cause Octave to ring your terminal’s bell and print the message ‘<samp class="samp">Rise and shine!</samp>’, followed by a newline character (the ‘<samp class="samp">\n</samp>’ in the first argument to the <code class="code">printf</code> statement). </p> <p>In most cases, you will also want to get some information back from the functions you define. Here is the syntax for writing a function that returns a single value: </p> <pre class="example" data-language="matlab">function ret-var = name (arg-list)
  body
endfunction</pre> <p>The symbol <var class="var">ret-var</var> is the name of the variable that will hold the value to be returned by the function. This variable must be defined before the end of the function body in order for the function to return a value. </p> <p>Variables used in the body of a function are local to the function. Variables named in <var class="var">arg-list</var> and <var class="var">ret-var</var> are also local to the function. See <a class="xref" href="global-variables.html">Global Variables</a>, for information about how to access global variables inside a function. </p> <p>For example, here is a function that computes the average of the elements of a vector: </p> <pre class="example" data-language="matlab">function retval = avg (v)
  retval = sum (v) / length (v);
endfunction</pre> <p>If we had written <code class="code">avg</code> like this instead, </p> <pre class="example" data-language="matlab">function retval = avg (v)
  if (isvector (v))
    retval = sum (v) / length (v);
  endif
endfunction</pre> <p>and then called the function with a matrix instead of a vector as the argument, Octave would have printed an error message like this: </p> <pre class="example" data-language="matlab">error: value on right hand side of assignment is undefined</pre> <p>because the body of the <code class="code">if</code> statement was never executed, and <code class="code">retval</code> was never defined. To prevent obscure errors like this, it is a good idea to always make sure that the return variables will always have values, and to produce meaningful error messages when problems are encountered. For example, <code class="code">avg</code> could have been written like this: </p> <pre class="example" data-language="matlab">function retval = avg (v)
  retval = 0;
  if (isvector (v))
    retval = sum (v) / length (v);
  else
    error ("avg: expecting vector argument");
  endif
endfunction</pre> <p>There is still one remaining problem with this function. What if it is called without an argument? Without additional error checking, Octave will probably print an error message that won’t really help you track down the source of the error. To allow you to catch errors like this, Octave provides each function with an automatic variable called <code class="code">nargin</code>. Each time a function is called, <code class="code">nargin</code> is automatically initialized to the number of arguments that have actually been passed to the function. For example, we might rewrite the <code class="code">avg</code> function like this: </p> <pre class="example" data-language="matlab">function retval = avg (v)
  retval = 0;
  if (nargin != 1)
    usage ("avg (vector)");
  endif
  if (isvector (v))
    retval = sum (v) / length (v);
  else
    error ("avg: expecting vector argument");
  endif
endfunction</pre> <p>Octave automatically reports an error for functions written in .m file code if they are called with more arguments than expected. Octave does not automatically report an error if a function is called with too few arguments, since functions in general may have default arguments, but any attempt to use a variable that has not been given a value will result in an error. Functions can check the arguments they are called with to avoid such problems and to provide more context-specific error messages. </p>  <dl class="first-deftypefn"> <dt class="deftypefn" id="index-nargin">
<span class="category-def">: </span><span><code class="def-type"><var class="var">n</var> =</code> <strong class="def-name">nargin</strong> <code class="def-code-arguments">()</code><a class="copiable-link" href="#index-nargin"> ¶</a></span>
</dt> <dt class="deftypefnx def-cmd-deftypefn" id="index-nargin-1">
<span class="category-def">: </span><span><code class="def-type"><var class="var">n</var> =</code> <strong class="def-name">nargin</strong> <code class="def-code-arguments">(<var class="var">fcn</var>)</code><a class="copiable-link" href="#index-nargin-1"> ¶</a></span>
</dt> <dd>
<p>Report the number of input arguments to a function. </p> <p>Called from within a function, return the number of arguments passed to the function. At the top level, return the number of command line arguments passed to Octave. </p> <p>If called with the optional argument <var class="var">fcn</var>—a function name or handle—return the declared number of arguments that the function can accept. </p> <p>If the last argument to <var class="var">fcn</var> is <var class="var">varargin</var> the returned value is negative. For example, the function <code class="code">union</code> for sets is declared as </p> <pre class="example" data-language="matlab">function [y, ia, ib] = union (a, b, varargin)

and

nargin ("union")
⇒ -3</pre> <p>Programming Note: <code class="code">nargin</code> does not work on compiled functions (<samp class="file">.oct</samp> files) such as built-in or dynamically loaded functions. </p> <p><strong class="strong">See also:</strong> <a class="ref" href="multiple-return-values.html#XREFnargout">nargout</a>, <a class="ref" href="validating-the-number-of-arguments.html#XREFnarginchk">narginchk</a>, <a class="ref" href="variable_002dlength-argument-lists.html#XREFvarargin">varargin</a>, <a class="ref" href="#XREFinputname">inputname</a>. </p>
</dd>
</dl>  <dl class="first-deftypefn"> <dt class="deftypefn" id="index-inputname">
<span class="category-def">: </span><span><code class="def-type"><var class="var">namestr</var> =</code> <strong class="def-name">inputname</strong> <code class="def-code-arguments">(<var class="var">n</var>)</code><a class="copiable-link" href="#index-inputname"> ¶</a></span>
</dt> <dt class="deftypefnx def-cmd-deftypefn" id="index-inputname-1">
<span class="category-def">: </span><span><code class="def-type"><var class="var">namestr</var> =</code> <strong class="def-name">inputname</strong> <code class="def-code-arguments">(<var class="var">n</var>, <var class="var">ids_only</var>)</code><a class="copiable-link" href="#index-inputname-1"> ¶</a></span>
</dt> <dd>
<p>Return the name of the <var class="var">n</var>-th argument to the calling function. </p> <p>If the argument is not a simple variable name, return an empty string. Examples which will return <code class="code">""</code> are numbers (<code class="code">5.1</code>), expressions (<code class="code"><var class="var">y</var>/2</code>), and cell or structure indexing (<code class="code"><var class="var">c</var>{1}</code> or <code class="code"><var class="var">s</var>.<var class="var">field</var></code>). </p> <p><code class="code">inputname</code> is only useful within a function. When used at the command line or within a script it always returns an empty string. </p> <p>By default, return an empty string if the <var class="var">n</var>-th argument is not a valid variable name. If the optional argument <var class="var">ids_only</var> is false, return the text of the argument even if it is not a valid variable name. This is an Octave extension that allows the programmer to view exactly how the function was invoked even when the inputs are complex expressions. </p> <p><strong class="strong">See also:</strong> <a class="ref" href="#XREFnargin">nargin</a>, <a class="ref" href="validating-the-number-of-arguments.html#XREFnarginchk">narginchk</a>. </p>
</dd>
</dl>  <dl class="first-deftypefn"> <dt class="deftypefn" id="index-silent_005ffunctions">
<span class="category-def">: </span><span><code class="def-type"><var class="var">val</var> =</code> <strong class="def-name">silent_functions</strong> <code class="def-code-arguments">()</code><a class="copiable-link" href="#index-silent_005ffunctions"> ¶</a></span>
</dt> <dt class="deftypefnx def-cmd-deftypefn" id="index-silent_005ffunctions-1">
<span class="category-def">: </span><span><code class="def-type"><var class="var">old_val</var> =</code> <strong class="def-name">silent_functions</strong> <code class="def-code-arguments">(<var class="var">new_val</var>)</code><a class="copiable-link" href="#index-silent_005ffunctions-1"> ¶</a></span>
</dt> <dt class="deftypefnx def-cmd-deftypefn" id="index-silent_005ffunctions-2">
<span class="category-def">: </span><span><code class="def-type"><var class="var">old_val</var> =</code> <strong class="def-name">silent_functions</strong> <code class="def-code-arguments">(<var class="var">new_val</var>, "local")</code><a class="copiable-link" href="#index-silent_005ffunctions-2"> ¶</a></span>
</dt> <dd>
<p>Query or set the internal variable that controls whether internal output from a function is suppressed. </p> <p>If this option is disabled, Octave will display the results produced by evaluating expressions within a function body that are not terminated with a semicolon. </p> <p>When called from inside a function with the <code class="code">"local"</code> option, the variable is changed locally for the function and any subroutines it calls. The original variable value is restored when exiting the function. </p>
</dd>
</dl> </div>  <div class="nav-panel"> <p> Next: <a href="returning-from-a-function.html">Returning from a Function</a>, Previous: <a href="introduction-to-function-and-script-files.html">Introduction to Function and Script Files</a>, Up: <a href="functions-and-scripts.html">Functions and Scripts</a> [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="concept-index.html" title="Index" rel="index">Index</a>]</p> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1996–2023 The Octave Project Developers<br>Permission is granted to make and distribute verbatim copies of this manual provided the copyright notice and this permission notice are preserved on all copies.<br/>Permission is granted to copy and distribute modified versions of this manual under the conditions for verbatim copying, provided that the entire resulting derived work is distributed under the terms of a permission notice identical to this one.</br>Permission is granted to copy and distribute translations of this manual into another language, under the above conditions for modified versions.<br>
    <a href="https://docs.octave.org/v9.2.0/Defining-Functions.html" class="_attribution-link">https://docs.octave.org/v9.2.0/Defining-Functions.html</a>
  </p>
</div>
