<div class="subsection-level-extent" id="Set-up-the-JVM"> <div class="nav-panel"> <p> Next: <a href="java-interface-functions.html" accesskey="n" rel="next">Java Interface Functions</a>, Previous: <a href="how-to-use-java-from-within-octave.html" accesskey="p" rel="prev">How to use Java from within Octave</a>, Up: <a href="java-interface.html" accesskey="u" rel="up">Java Interface</a> [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="concept-index.html" title="Index" rel="index">Index</a>]</p> </div>  <h1 class="subsection" id="Set-up-the-JVM-1"><span>A.4.3 Set up the JVM<a class="copiable-link" href="#Set-up-the-JVM-1"> ¶</a></span></h1>   <p>In order to execute Java code Octave creates a Java Virtual Machine (JVM). By default the version of the JVM is used that was detected during configuration on Unix-like systems or that is pointed to from the registry keys at <samp class="file">HKEY_LOCAL_MACHINE\SOFTWARE\JavaSoft\JRE</samp> or <samp class="file">HKEY_LOCAL_MACHINE\SOFTWARE\JavaSoft\Java Runtime Environment</samp> on Windows. The default path to the JVM can be overridden by setting the environment variable <code class="env">JAVA_HOME</code> to the path where the JVM is installed. On Windows that might be, for example, <samp class="file">C:\Program Files\Java\jre-10.0.2</samp>. Make sure that you select a directory that contains the JVM with a bit-ness that matches Octave’s. </p> <p>The JVM is only loaded once per Octave session. Thus, to change the used version of the JVM, you might have to re-start Octave. To check which version of the JVM is currently being used, run <code class="code">version -java</code>. </p> <p>The JVM allocates a fixed amount of initial memory and may expand this pool up to a fixed maximum memory limit. The default values depend on the Java version (see <a class="pxref" href="java-interface-functions.html#XREFjavamem">javamem</a>). The memory pool is shared by all Java objects running in the JVM. This strict memory limit is intended mainly to avoid runaway applications inside web browsers or in enterprise servers which can consume all memory and crash the system. When the maximum memory limit is hit, Java code will throw exceptions so that applications will fail or behave unexpectedly. </p> <p>You can specify options for the creation of the JVM inside a file named <samp class="file">java.opts</samp>. This is a text file where enter you enter lines containing <samp class="option">-X</samp> and <samp class="option">-D</samp> options that are then passed to the JVM during initialization. </p> <p>The directory where the Java options file is located is specified by the environment variable <code class="env">OCTAVE_JAVA_DIR</code>. If unset the directory where <samp class="file">javaclasspath.m</samp> resides is used instead (typically <samp class="file"><code class="env">OCTAVE_HOME</code>/share/octave/<code class="env">OCTAVE_VERSION</code>/m/java/</samp>). You can find this directory by executing </p> <pre class="example" data-language="matlab">which javaclasspath</pre> <p>The <samp class="option">-X</samp> options allow you to increase the maximum amount of memory available to the JVM. The following example allows up to 256 Megabytes to be used by adding the following line to the <samp class="file">java.opts</samp> file: </p> <pre class="example" data-language="matlab">-Xmx256m</pre> <p>The maximum possible amount of memory depends on your system. On a Windows system with 2 Gigabytes main memory you should be able to set this maximum to about 1 Gigabyte. </p> <p>If your application requires a large amount of memory from the beginning, you can also specify the initial amount of memory allocated to the JVM. Adding the following line to the <samp class="file">java.opts</samp> file starts the JVM with 64 Megabytes of initial memory: </p> <pre class="example" data-language="matlab">-Xms64m</pre> <p>For more details on the available <samp class="option">-X</samp> options of your Java Virtual Machine issue the command ‘<samp class="samp">java -X</samp>’ at the operating system command prompt and consult the Java documentation. </p> <p>The <samp class="option">-D</samp> options can be used to define system properties which can then be used by Java classes inside Octave. System properties can be retrieved by using the <code class="code">getProperty()</code> methods of the <code class="code">java.lang.System</code> class. The following example line defines the property <var class="var">MyProperty</var> and assigns it the string <code class="code">12.34</code>. </p> <pre class="example" data-language="matlab">-DMyProperty=12.34</pre> <p>The value of this property can then be retrieved as a string by a Java object or in Octave: </p> <pre class="example" data-language="matlab">octave&gt; javaMethod ("getProperty", "java.lang.System", "MyProperty");
ans = 12.34</pre> </div>  <div class="nav-panel"> <p> Next: <a href="java-interface-functions.html">Java Interface Functions</a>, Previous: <a href="how-to-use-java-from-within-octave.html">How to use Java from within Octave</a>, Up: <a href="java-interface.html">Java Interface</a> [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="concept-index.html" title="Index" rel="index">Index</a>]</p> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1996–2023 The Octave Project Developers<br>Permission is granted to make and distribute verbatim copies of this manual provided the copyright notice and this permission notice are preserved on all copies.<br/>Permission is granted to copy and distribute modified versions of this manual under the conditions for verbatim copying, provided that the entire resulting derived work is distributed under the terms of a permission notice identical to this one.</br>Permission is granted to copy and distribute translations of this manual into another language, under the above conditions for modified versions.<br>
    <a href="https://docs.octave.org/v9.2.0/Set-up-the-JVM.html" class="_attribution-link">https://docs.octave.org/v9.2.0/Set-up-the-JVM.html</a>
  </p>
</div>
