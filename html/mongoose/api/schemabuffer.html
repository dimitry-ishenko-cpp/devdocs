<h1>SchemaBuffer</h1>

<div class="api-content">
<h3 id="SchemaBuffer()">SchemaBuffer()</h3>
<h5>Parameters:</h5>
<ul class="params">
<li class="param">
<code>key</code> <span class="method-type">«String»</span> </li>
<li class="param">
<code>options</code> <span class="method-type">«Object»</span> </li>
</ul>
<h5>Inherits:</h5>
<ul><li><span class="method-type"><a href="schematype.html">«SchemaType»</a></span></li></ul>
<div>
<p>Buffer SchemaType constructor</p> </div>
<h3 id="SchemaBuffer.checkRequired()">SchemaBuffer.checkRequired()</h3>
<h5>Parameters:</h5>
<ul class="params"><li class="param">
<code>fn</code> <span class="method-type">«Function»</span> </li></ul>
<h5>Returns:</h5>
<ul><li>
<span class="method-type">«Function»</span> </li></ul>
<h5>Type:</h5>
<ul><li><span class="method-type">«property»</span></li></ul>
<div>
<p>Override the function the required validator uses to check whether a string passes the <code>required</code> check.</p> <h4 id="example"> <a href="#example"> Example: </a> </h4> <pre data-language="javascript"><span class="hljs-comment">// Allow empty strings to pass `required` check</span>
mongoose.<span class="hljs-property">Schema</span>.<span class="hljs-property">Types</span>.<span class="hljs-property">String</span>.<span class="hljs-title function_">checkRequired</span>(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> v != <span class="hljs-literal">null</span>);

<span class="hljs-keyword">const</span> M = mongoose.<span class="hljs-title function_">model</span>({ <span class="hljs-attr">buf</span>: { <span class="hljs-attr">type</span>: <span class="hljs-title class_">Buffer</span>, <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span> } });
<span class="hljs-keyword">new</span> <span class="hljs-title function_">M</span>({ <span class="hljs-attr">buf</span>: <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(<span class="hljs-string">''</span>) }).<span class="hljs-title function_">validateSync</span>(); <span class="hljs-comment">// validation passes!</span>
</pre> </div>
<h3 id="SchemaBuffer.get()">SchemaBuffer.get()</h3>
<h5>Parameters:</h5>
<ul class="params"><li class="param">
<code>getter</code> <span class="method-type">«Function»</span> </li></ul>
<h5>Returns:</h5>
<ul><li>
<span class="method-type">«this»</span> </li></ul>
<h5>Type:</h5>
<ul><li><span class="method-type">«property»</span></li></ul>
<div>
<p>Attaches a getter for all Buffer instances</p> <h4 id="example"> <a href="#example"> Example: </a> </h4> <pre data-language="javascript"><span class="hljs-comment">// Always convert to string when getting an ObjectId</span>
mongoose.<span class="hljs-property">Schema</span>.<span class="hljs-property">Types</span>.<span class="hljs-property">Buffer</span>.<span class="hljs-title function_">get</span>(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> v.<span class="hljs-title function_">toString</span>(<span class="hljs-string">'hex'</span>));

<span class="hljs-keyword">const</span> <span class="hljs-title class_">Model</span> = mongoose.<span class="hljs-title function_">model</span>(<span class="hljs-string">'Test'</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({ <span class="hljs-attr">buf</span>: <span class="hljs-title class_">Buffer</span> } }));
<span class="hljs-keyword">typeof</span> (<span class="hljs-keyword">new</span> <span class="hljs-title class_">Model</span>({ <span class="hljs-attr">buf</span>: <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">fromString</span>(<span class="hljs-string">'hello'</span>) }).<span class="hljs-property">buf</span>); <span class="hljs-comment">// 'string'</span>
</pre> </div>
<h3 id="SchemaBuffer.prototype.checkRequired()">SchemaBuffer.prototype.checkRequired()</h3>
<h5>Parameters:</h5>
<ul class="params">
<li class="param">
<code>value</code> <span class="method-type">«Any»</span> </li>
<li class="param">
<code>doc</code> <span class="method-type">«Document»</span> </li>
</ul>
<h5>Returns:</h5>
<ul><li>
<span class="method-type">«Boolean»</span> </li></ul>
<div>
<p>Check if the given value satisfies a required validator. To satisfy a required validator, a buffer must not be null or undefined and have non-zero length.</p> </div>
<h3 id="SchemaBuffer.prototype.subtype()">SchemaBuffer.prototype.subtype()</h3>
<h5>Parameters:</h5>
<ul class="params"><li class="param">
<code>subtype</code> <span class="method-type">«Number»</span> the default subtype </li></ul>
<h5>Returns:</h5>
<ul><li>
<span class="method-type">«SchemaType»</span> this</li></ul>
<div>
<p>Sets the default <a href="https://studio3t.com/whats-new/best-practices-uuid-mongodb/">subtype</a> for this buffer. You can find a <a href="https://api.mongodb.com/python/current/api/bson/binary.html">list of allowed subtypes here</a>.</p> <h4 id="example"> <a href="#example"> Example: </a> </h4> <pre data-language="javascript"><span class="hljs-keyword">const</span> s = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({ <span class="hljs-attr">uuid</span>: { <span class="hljs-attr">type</span>: <span class="hljs-title class_">Buffer</span>, <span class="hljs-attr">subtype</span>: <span class="hljs-number">4</span> });
<span class="hljs-keyword">const</span> M = db.<span class="hljs-title function_">model</span>(<span class="hljs-string">'M'</span>, s);
<span class="hljs-keyword">const</span> m = <span class="hljs-keyword">new</span> <span class="hljs-title function_">M</span>({ <span class="hljs-attr">uuid</span>: <span class="hljs-string">'test string'</span> });
m.<span class="hljs-property">uuid</span>.<span class="hljs-property">_subtype</span>; <span class="hljs-comment">// 4</span>
</pre> </div>
<h3 id="SchemaBuffer.schemaName">SchemaBuffer.schemaName</h3>
<h5>Type:</h5>
<ul><li><span class="method-type">«property»</span></li></ul>
<div>
<p>This schema type's name, to defend against minifiers that mangle function names.</p> </div>
<h3 id="SchemaBuffer.set()">SchemaBuffer.set()</h3>
<h5>Parameters:</h5>
<ul class="params">
<li class="param">
<code>option</code> <span class="method-type">«String»</span> The option you'd like to set the value for </li>
<li class="param">
<code>value</code> <span class="method-type">«Any»</span> value for option </li>
</ul>
<h5>Returns:</h5>
<ul><li>
<span class="method-type">«undefined,void»</span> </li></ul>
<h5>Type:</h5>
<ul><li><span class="method-type">«property»</span></li></ul>
<div>
<p>Sets a default option for all Buffer instances.</p> <h4 id="example"> <a href="#example"> Example: </a> </h4> <pre data-language="javascript"><span class="hljs-comment">// Make all buffers have `required` of true by default.</span>
mongoose.<span class="hljs-property">Schema</span>.<span class="hljs-property">Buffer</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'required'</span>, <span class="hljs-literal">true</span>);

<span class="hljs-keyword">const</span> <span class="hljs-title class_">User</span> = mongoose.<span class="hljs-title function_">model</span>(<span class="hljs-string">'User'</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({ <span class="hljs-attr">test</span>: <span class="hljs-title class_">Buffer</span> }));
<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>({ }).<span class="hljs-title function_">validateSync</span>().<span class="hljs-property">errors</span>.<span class="hljs-property">test</span>.<span class="hljs-property">message</span>; <span class="hljs-comment">// Path `test` is required.</span>
</pre> </div>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010 LearnBoost<br>Licensed under the MIT License.<br>
    <a href="https://mongoosejs.com/docs/api/schemabuffer.html" class="_attribution-link">https://mongoosejs.com/docs/api/schemabuffer.html</a>
  </p>
</div>
