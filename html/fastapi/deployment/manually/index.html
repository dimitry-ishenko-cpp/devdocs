<h1 id="run-a-server-manually">Run a Server Manually</h1> <h2 id="use-the-fastapi-run-command">Use the <code>fastapi run</code> Command</h2> <p>In short, use <code>fastapi run</code> to serve your FastAPI application:</p> <div class="termy"> <div class="highlight"><pre class="language-python" data-language="python">$ &lt;font color="#4E9A06"&gt;fastapi&lt;/font&gt; run &lt;u style="text-decoration-style:solid"&gt;main.py&lt;/u&gt;

  &lt;span style="background-color:#009485"&gt;&lt;font color="#D3D7CF"&gt; FastAPI &lt;/font&gt;&lt;/span&gt;  Starting production server üöÄ

             Searching for package file structure from directories
             with &lt;font color="#3465A4"&gt;__init__.py&lt;/font&gt; files
             Importing from &lt;font color="#75507B"&gt;/home/user/code/&lt;/font&gt;&lt;font color="#AD7FA8"&gt;awesomeapp&lt;/font&gt;

   &lt;span style="background-color:#007166"&gt;&lt;font color="#D3D7CF"&gt; module &lt;/font&gt;&lt;/span&gt;  üêç main.py

     &lt;span style="background-color:#007166"&gt;&lt;font color="#D3D7CF"&gt; code &lt;/font&gt;&lt;/span&gt;  Importing the FastAPI app object from the module with
             the following code:

             &lt;u style="text-decoration-style:solid"&gt;from &lt;/u&gt;&lt;u style="text-decoration-style:solid"&gt;&lt;b&gt;main&lt;/b&gt;&lt;/u&gt;&lt;u style="text-decoration-style:solid"&gt; import &lt;/u&gt;&lt;u style="text-decoration-style:solid"&gt;&lt;b&gt;app&lt;/b&gt;&lt;/u&gt;

      &lt;span style="background-color:#007166"&gt;&lt;font color="#D3D7CF"&gt; app &lt;/font&gt;&lt;/span&gt;  Using import string: &lt;font color="#3465A4"&gt;main:app&lt;/font&gt;

   &lt;span style="background-color:#007166"&gt;&lt;font color="#D3D7CF"&gt; server &lt;/font&gt;&lt;/span&gt;  Server started at &lt;font color="#729FCF"&gt;&lt;u style="text-decoration-style:solid"&gt;http://0.0.0.0:8000&lt;/u&gt;&lt;/font&gt;
   &lt;span style="background-color:#007166"&gt;&lt;font color="#D3D7CF"&gt; server &lt;/font&gt;&lt;/span&gt;  Documentation at &lt;font color="#729FCF"&gt;&lt;u style="text-decoration-style:solid"&gt;http://0.0.0.0:8000/docs&lt;/u&gt;&lt;/font&gt;

             Logs:

     &lt;span style="background-color:#007166"&gt;&lt;font color="#D3D7CF"&gt; INFO &lt;/font&gt;&lt;/span&gt;  Started server process &lt;b&gt;[&lt;/b&gt;&lt;font color="#34E2E2"&gt;&lt;b&gt;2306215&lt;/b&gt;&lt;/font&gt;&lt;b&gt;]&lt;/b&gt;
     &lt;span style="background-color:#007166"&gt;&lt;font color="#D3D7CF"&gt; INFO &lt;/font&gt;&lt;/span&gt;  Waiting for application startup.
     &lt;span style="background-color:#007166"&gt;&lt;font color="#D3D7CF"&gt; INFO &lt;/font&gt;&lt;/span&gt;  Application startup complete.
     &lt;span style="background-color:#007166"&gt;&lt;font color="#D3D7CF"&gt; INFO &lt;/font&gt;&lt;/span&gt;  Uvicorn running on &lt;font color="#729FCF"&gt;&lt;u style="text-decoration-style:solid"&gt;http://0.0.0.0:8000&lt;/u&gt;&lt;/font&gt; &lt;b&gt;(&lt;/b&gt;Press CTRL+C
             to quit&lt;b&gt;)&lt;/b&gt;
</pre></div> </div> <p>That would work for most of the cases. üòé</p> <p>You could use that command for example to start your <strong>FastAPI</strong> app in a container, in a server, etc.</p> <h2 id="asgi-servers">ASGI Servers</h2> <p>Let's go a little deeper into the details.</p> <p>FastAPI uses a standard for building Python web frameworks and servers called <abbr title="Asynchronous Server Gateway Interface">ASGI</abbr>. FastAPI is an ASGI web framework.</p> <p>The main thing you need to run a <strong>FastAPI</strong> application (or any other ASGI application) in a remote server machine is an ASGI server program like <strong>Uvicorn</strong>, this is the one that comes by default in the <code>fastapi</code> command.</p> <p>There are several alternatives, including:</p> <ul> <li>
<a href="https://www.uvicorn.org/" class="external-link" target="_blank">Uvicorn</a>: a high performance ASGI server.</li> <li>
<a href="https://hypercorn.readthedocs.io/" class="external-link" target="_blank">Hypercorn</a>: an ASGI server compatible with HTTP/2 and Trio among other features.</li> <li>
<a href="https://github.com/django/daphne" class="external-link" target="_blank">Daphne</a>: the ASGI server built for Django Channels.</li> <li>
<a href="https://github.com/emmett-framework/granian" class="external-link" target="_blank">Granian</a>: A Rust HTTP server for Python applications.</li> <li>
<a href="https://unit.nginx.org/howto/fastapi/" class="external-link" target="_blank">NGINX Unit</a>: NGINX Unit is a lightweight and versatile web application runtime.</li> </ul> <h2 id="server-machine-and-server-program">Server Machine and Server Program</h2> <p>There's a small detail about names to keep in mind. üí°</p> <p>The word "<strong>server</strong>" is commonly used to refer to both the remote/cloud computer (the physical or virtual machine) and also the program that is running on that machine (e.g. Uvicorn).</p> <p>Just keep in mind that when you read "server" in general, it could refer to one of those two things.</p> <p>When referring to the remote machine, it's common to call it <strong>server</strong>, but also <strong>machine</strong>, <strong>VM</strong> (virtual machine), <strong>node</strong>. Those all refer to some type of remote machine, normally running Linux, where you run programs.</p> <h2 id="install-the-server-program">Install the Server Program</h2> <p>When you install FastAPI, it comes with a production server, Uvicorn, and you can start it with the <code>fastapi run</code> command.</p> <p>But you can also install an ASGI server manually.</p> <p>Make sure you create a <a class="internal-link" data-preview="" href="https://fastapi.tiangolo.com/virtual-environments/" target="_blank">virtual environment</a>, activate it, and then you can install the server application.</p> <p>For example, to install Uvicorn:</p> <div class="termy"> <div class="highlight"><pre class="language-python" data-language="python">$ pip install "uvicorn[standard]"

---&gt; 100%
</pre></div> </div> <p>A similar process would apply to any other ASGI server program.</p> <div class="admonition tip"> <p class="admonition-title">Tip</p> <p>By adding the <code>standard</code>, Uvicorn will install and use some recommended extra dependencies.</p> <p>That including <code>uvloop</code>, the high-performance drop-in replacement for <code>asyncio</code>, that provides the big concurrency performance boost.</p> <p>When you install FastAPI with something like <code>pip install "fastapi[standard]"</code> you already get <code>uvicorn[standard]</code> as well.</p> </div> <h2 id="run-the-server-program">Run the Server Program</h2> <p>If you installed an ASGI server manually, you would normally need to pass an import string in a special format for it to import your FastAPI application:</p> <div class="termy"> <div class="highlight"><pre class="language-python" data-language="python">$ uvicorn main:app --host 0.0.0.0 --port 80

&lt;span style="color: green;"&gt;INFO&lt;/span&gt;:     Uvicorn running on http://0.0.0.0:80 (Press CTRL+C to quit)
</pre></div> </div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>The command <code>uvicorn main:app</code> refers to:</p> <ul> <li>
<code>main</code>: the file <code>main.py</code> (the Python "module").</li> <li>
<code>app</code>: the object created inside of <code>main.py</code> with the line <code>app = FastAPI()</code>.</li> </ul> <p>It is equivalent to:</p> <div class="highlight"><pre class="language-python" data-language="python">from main import app
</pre></div> </div> <p>Each alternative ASGI server program would have a similar command, you can read more in their respective documentation.</p> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>Uvicorn and other servers support a <code>--reload</code> option that is useful during development.</p> <p>The <code>--reload</code> option consumes much more resources, is more unstable, etc.</p> <p>It helps a lot during <strong>development</strong>, but you <strong>shouldn't</strong> use it in <strong>production</strong>.</p> </div> <h2 id="deployment-concepts">Deployment Concepts</h2> <p>These examples run the server program (e.g Uvicorn), starting <strong>a single process</strong>, listening on all the IPs (<code>0.0.0.0</code>) on a predefined port (e.g. <code>80</code>).</p> <p>This is the basic idea. But you will probably want to take care of some additional things, like:</p> <ul> <li>Security - HTTPS</li> <li>Running on startup</li> <li>Restarts</li> <li>Replication (the number of processes running)</li> <li>Memory</li> <li>Previous steps before starting</li> </ul> <p>I'll tell you more about each of these concepts, how to think about them, and some concrete examples with strategies to handle them in the next chapters. üöÄ</p> <form class="md-feedback" name="feedback" hidden> <fieldset> <legend class="md-feedback__title"> Was this page helpful? </legend> <div class="md-feedback__inner">  <div class="md-feedback__note"> <div data-md-value="1" hidden> Thanks for your feedback! </div> <div data-md-value="0" hidden> Thanks for your feedback! </div> </div> </div> </fieldset> </form><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2018 Sebasti√°n Ram√≠rez<br>Licensed under the MIT License.<br>
    <a href="https://fastapi.tiangolo.com/deployment/manually/" class="_attribution-link">https://fastapi.tiangolo.com/deployment/manually/</a>
  </p>
</div>
