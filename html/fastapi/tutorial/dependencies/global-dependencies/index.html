<h1 id="global-dependencies">Global Dependencies</h1> <p>For some types of applications you might want to add dependencies to the whole application.</p> <p>Similar to the way you can <a class="internal-link" href="../dependencies-in-path-operation-decorators/index.html" target="_blank">add <code>dependencies</code> to the <em>path operation decorators</em></a>, you can add them to the <code>FastAPI</code> application.</p> <p>In that case, they will be applied to all the <em>path operations</em> in the application:</p> <div class="tabbed-set tabbed-alternate" data-tabs="1:3"> <div class="tabbed-content"> <div class="tabbed-block">
<label for="__tabbed_1_1">Python 3.9+</label> <div class="highlight"><pre class="language-python" data-language="python">from fastapi import Depends, FastAPI, Header, HTTPException
from typing_extensions import Annotated


async def verify_token(x_token: Annotated[str, Header()]):
    if x_token != "fake-super-secret-token":
        raise HTTPException(status_code=400, detail="X-Token header invalid")


async def verify_key(x_key: Annotated[str, Header()]):
    if x_key != "fake-super-secret-key":
        raise HTTPException(status_code=400, detail="X-Key header invalid")
    return x_key


app = FastAPI(dependencies=[Depends(verify_token), Depends(verify_key)])


@app.get("/items/")
async def read_items():
    return [{"item": "Portal Gun"}, {"item": "Plumbus"}]


@app.get("/users/")
async def read_users():
    return [{"username": "Rick"}, {"username": "Morty"}]
</pre></div> </div> <div class="tabbed-block">
<label for="__tabbed_1_2">Python 3.6+</label> <div class="highlight"><pre class="language-python" data-language="python">from fastapi import Depends, FastAPI, Header, HTTPException
from typing_extensions import Annotated


async def verify_token(x_token: Annotated[str, Header()]):
    if x_token != "fake-super-secret-token":
        raise HTTPException(status_code=400, detail="X-Token header invalid")


async def verify_key(x_key: Annotated[str, Header()]):
    if x_key != "fake-super-secret-key":
        raise HTTPException(status_code=400, detail="X-Key header invalid")
    return x_key


app = FastAPI(dependencies=[Depends(verify_token), Depends(verify_key)])


@app.get("/items/")
async def read_items():
    return [{"item": "Portal Gun"}, {"item": "Plumbus"}]


@app.get("/users/")
async def read_users():
    return [{"username": "Rick"}, {"username": "Morty"}]
</pre></div> </div> <div class="tabbed-block">
<label for="__tabbed_1_3">Python 3.6 non-Annotated</label> <div class="admonition tip"> <p class="admonition-title">Tip</p> <p>Prefer to use the <code>Annotated</code> version if possible.</p> </div> <div class="highlight"><pre class="language-python" data-language="python">from fastapi import Depends, FastAPI, Header, HTTPException


async def verify_token(x_token: str = Header()):
    if x_token != "fake-super-secret-token":
        raise HTTPException(status_code=400, detail="X-Token header invalid")


async def verify_key(x_key: str = Header()):
    if x_key != "fake-super-secret-key":
        raise HTTPException(status_code=400, detail="X-Key header invalid")
    return x_key


app = FastAPI(dependencies=[Depends(verify_token), Depends(verify_key)])


@app.get("/items/")
async def read_items():
    return [{"item": "Portal Gun"}, {"item": "Plumbus"}]


@app.get("/users/")
async def read_users():
    return [{"username": "Rick"}, {"username": "Morty"}]
</pre></div> </div> </div> </div> <p>And all the ideas in the section about <a class="internal-link" href="../dependencies-in-path-operation-decorators/index.html" target="_blank">adding <code>dependencies</code> to the <em>path operation decorators</em></a> still apply, but in this case, to all of the <em>path operations</em> in the app.</p> <h2 id="dependencies-for-groups-of-path-operations">Dependencies for groups of <em>path operations</em>
</h2> <p>Later, when reading about how to structure bigger applications (<a class="internal-link" href="../../bigger-applications/index.html" target="_blank">Bigger Applications - Multiple Files</a>), possibly with multiple files, you will learn how to declare a single <code>dependencies</code> parameter for a group of <em>path operations</em>.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2018 Sebastián Ramírez<br>Licensed under the MIT License.<br>
    <a href="https://fastapi.tiangolo.com/tutorial/dependencies/global-dependencies/" class="_attribution-link">https://fastapi.tiangolo.com/tutorial/dependencies/global-dependencies/</a>
  </p>
</div>
