<h1 id="handling-multiple-environments">Handling Multiple Environments</h1> <p>Developers often desire different system behavior depending on whether an application is running in a development or production environment. For example, verbose error output is something that would be useful while developing an application, but it may also pose a security issue when “live”. In development environments, you might want additional tools loaded that you don’t in production environments, etc.</p>  <h2 id="the-environment-constant">The ENVIRONMENT Constant</h2> <p>By default, CodeIgniter comes with the environment constant set to use the value provided in <code>$_SERVER['CI_ENVIRONMENT']</code>, otherwise defaulting to ‘production’. This can be set in several ways depending on your server setup.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">The environment <code>testing</code> is the special one for PHPUnit testing. It has special conditions built into the framework at various places to assist with that. You can’t use it for your development.</p> </div>  <h3 id="env">.env</h3> <p>The simplest method to set the variable is in your <a class="reference internal" href="configuration.html"><span class="doc">.env file</span></a>.</p> <pre data-language="ini">CI_ENVIRONMENT = development
</pre>   <h3 id="apache">Apache</h3> <p>This server variable can be set in your <code>.htaccess</code> file or Apache config using <a class="reference external" href="https://httpd.apache.org/docs/2.2/mod/mod_env.html#setenv">SetEnv</a>.</p> <pre data-language="apache">SetEnv CI_ENVIRONMENT development
</pre>   <h3 id="nginx">nginx</h3> <p>Under nginx, you must pass the environment variable through the <code>fastcgi_params</code> in order for it to show up under the <code>$_SERVER</code> variable. This allows it to work on the virtual-host level, instead of using <code>env</code> to set it for the entire server, though that would work fine on a dedicated server. You would then modify your server config to something like:</p> <pre data-language="nginx">server {
    server_name localhost;
    include     conf/defaults.conf;
    root        /var/www;

    location    ~* \.php$ {
        fastcgi_param CI_ENVIRONMENT "production";
        include conf/fastcgi-php.conf;
    }
}
</pre> <p>Alternative methods are available for nginx and other servers, or you can remove this logic entirely and set the constant based on the server’s IP address (for instance).</p> <p>In addition to affecting some basic framework behavior (see the next section), you may use this constant in your own development to differentiate between which environment you are running in.</p>   <h3 id="boot-files">Boot Files</h3> <p>CodeIgniter requires that a PHP script matching the environment’s name is located under <strong>APPPATH/Config/Boot</strong>. These files can contain any customizations that you would like to make for your environment, whether it’s updating the error display settings, loading additional developer tools, or anything else. These are automatically loaded by the system. The following files are already created in a fresh install:</p> <ul class="simple"> <li>development.php</li> <li>production.php</li> <li>testing.php</li> </ul>    <h2 id="effects-on-default-framework-behavior">Effects On Default Framework Behavior</h2> <p>There are some places in the CodeIgniter system where the ENVIRONMENT constant is used. This section describes how default framework behavior is affected.</p>  <h3 id="error-reporting">Error Reporting</h3> <p>Setting the ENVIRONMENT constant to a value of ‘development’ will cause all PHP errors to be rendered to the browser when they occur. Conversely, setting the constant to ‘production’ will disable all error output. Disabling error reporting in production is a <a class="reference internal" href="../concepts/security.html"><span class="doc">good security practice</span></a>.</p>   <h3 id="configuration-files">Configuration Files</h3> <p>Optionally, you can have CodeIgniter load environment-specific configuration files. This may be useful for managing things like differing API keys across multiple environments. This is described in more detail in the Handling Different Environments section of the <a class="reference internal" href="configuration.html"><span class="doc">Working with Configuration Files</span></a> documentation.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2014&ndash;2020 British Columbia Institute of Technology<br>Licensed under the MIT License.<br>
    <a href="https://codeigniter.com/user_guide/general/environments.html" class="_attribution-link">https://codeigniter.com/user_guide/general/environments.html</a>
  </p>
</div>
