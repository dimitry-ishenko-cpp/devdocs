<h1 id="database-events">Database Events</h1> <p>The Database classes contain a few <a class="reference internal" href="../extending/events.html"><span class="doc">Events</span></a> that you can tap into in order to learn more about what is happening during the database execution. These events can be used to collect data for analysis and reporting. The <a class="reference internal" href="../testing/debugging.html"><span class="doc">Debug Toolbar</span></a> uses this to collect the queries to display in the Toolbar.</p>     <h2 id="the-events">The Events</h2> <p><strong>DBQuery</strong></p> <p>This event is triggered whenever a new query has been run, whether successful or not. The only parameter is a <a class="reference internal" href="queries.html"><span class="doc">Query</span></a> instance of the current query. You could use this to display all queries in STDOUT, or logging to a file, or even creating tools to do automatic query analysis to help you spot potentially missing indexes, slow queries, etc. An example usage might be:</p> <pre data-language="php">// In Config\Events.php
Events::on('DBQuery', 'CodeIgniter\Debug\Toolbar\Collectors\Database::collect');

// Collect the queries so something can be done with them later.
public static function collect(CodeIgniter\Database\Query $query)
{
    static::$queries[] = $query;
}
</pre><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2014&ndash;2020 British Columbia Institute of Technology<br>Licensed under the MIT License.<br>
    <a href="https://codeigniter.com/user_guide/database/events.html" class="_attribution-link">https://codeigniter.com/user_guide/database/events.html</a>
  </p>
</div>
