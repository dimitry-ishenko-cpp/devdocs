<h1>apply_filters( 'pre_comment_user_ip', string $comment_author_ip )</h1>  <section> <p>Filters the comment author’s IP address before it is set.</p> </section>   <section> <header class="toc-header"><h2 id="parameters">Parameters</h2></header> <dl> <dt> <code>$comment_author_ip</code> <span class="type"><span class="string">string</span></span> </dt> <dd> <div class="desc"> <span class="description">The comment author's IP address.</span> </div> </dd> </dl> </section>  <section> <header class="toc-header"><h2 id="more-information">More Information</h2></header> <p>With this filter, we can change the comment author’s IP before it’s recorded. Example use case can be when a client submits a comment through a proxy server.</p> <p>The general format of the header is:<br> <code>X-Forwarded-For: client1, proxy1, proxy2</code></p> <p>where the value is a comma+space separated list of IP addresses, the left-most being the original client, and each successive proxy that passed the request adding the IP address where it received the request from. In this example, the request goes through the IPs: client1 -&gt; proxy1 -&gt; proxy2 -&gt; proxy3. Proxy3 is not shown in the <code>X-Forwarded-For</code> header here and appears as the remote address of the request.</p> <p>Since it is easy to forge an <code>X-Forwarded-For</code> header, the given information should be used with care.</p> <p><code>X-Forwarded-For</code>, <code>X-Forwarded-By</code>, and <code>X-Forwarded-Proto</code> are non-standard header fields and in increasing cases, have been superseded by the standard <code>Forwarded</code> header defined in RFC 7239. Example of a <code>Forwarded</code> header:<br> <code>Forwarded: for=192.0.2.60;proto=http;by=203.0.113.43</code></p> </section>  <section> <header class="toc-header"><h2 id="source">Source</h2></header> <p> File: <code>wp-includes/comment.php</code>. <a href="https://developer.wordpress.org/reference/files/wp-includes/comment.php/">View all references</a> </p> <pre class="wp-block-code" data-start="2130" aria-label="Function source code" data-language="php"><code lang="php" class="language-php line-numbers">$commentdata['comment_author_IP'] = apply_filters( 'pre_comment_user_ip', $commentdata['comment_author_IP'] );
</code></pre>  </section>  <section> <header class="toc-header"><h2 id="related">Related</h2></header> <article class="used-by"> <header class="toc-header"><h3 id="used-by">Used By</h3></header> <table id="used-by-table" data-show="5">  <thead> <tr> <th>Used By</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="../functions/wp_filter_comment.html">wp_filter_comment()</a> <span>wp-includes/comment.php</span> </td> <td class="related-desc"> <p>Filters and sanitizes comment data.</p> </td> </tr> </tbody>

</table> </article> </section>  <section> <header class="toc-header"><h2 id="changelog">Changelog</h2></header> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/1.5.0/" alt="WordPress 1.5.0">1.5.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2003&ndash;2022 WordPress Foundation<br>Licensed under the GNU GPLv2+ License.<br>
    <a href="https://developer.wordpress.org/reference/hooks/pre_comment_user_ip" class="_attribution-link">https://developer.wordpress.org/reference/hooks/pre_comment_user_ip</a>
  </p>
</div>
