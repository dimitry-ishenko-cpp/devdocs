<h1>wp_tempnam( string $filename = '', string $dir = '' ): string</h1>  <section> <p>Returns a filename of a temporary unique file.</p> </section>   <section> <header class="toc-header"><h2 id="description">Description</h2></header> <p>Please note that the calling function must unlink() this itself.</p> <p>The filename is based off the passed parameter or defaults to the current unix timestamp, while the directory can either be passed as well, or by leaving it blank, default to a writable temporary directory.</p> </section>  <section> <header class="toc-header"><h2 id="parameters">Parameters</h2></header> <dl> <dt> <code>$filename</code> <span class="type"><span class="string">string</span></span> <span class="required">Optional</span> </dt> <dd> <div class="desc"> <span class="description"> Filename to base the Unique file off. </span> </div> <p class="default">Default: <code>''</code></p> </dd> <dt> <code>$dir</code> <span class="type"><span class="string">string</span></span> <span class="required">Optional</span> </dt> <dd> <div class="desc"> <span class="description"> Directory to store the file in. </span> </div> <p class="default">Default: <code>''</code></p> </dd> </dl> </section>  <section> <header class="toc-header"><h2 id="return">Return</h2></header> <p><span class="return-type">string</span> A writable filename.</p> </section>  <section> <header class="toc-header"><h2 id="source">Source</h2></header> <p> File: <code>wp-admin/includes/file.php</code>. <a href="https://developer.wordpress.org/reference/files/wp-admin/includes/file.php/">View all references</a> </p> <pre class="wp-block-code" data-start="659" aria-label="Function source code" data-language="php"><code lang="php" class="language-php line-numbers">function wp_tempnam( $filename = '', $dir = '' ) {
	if ( empty( $dir ) ) {
		$dir = get_temp_dir();
	}

	if ( empty( $filename ) || in_array( $filename, array( '.', '/', '\\' ), true ) ) {
		$filename = uniqid();
	}

	// Use the basename of the given file without the extension as the name for the temporary directory.
	$temp_filename = basename( $filename );
	$temp_filename = preg_replace( '|\.[^.]*$|', '', $temp_filename );

	// If the folder is falsey, use its parent directory name instead.
	if ( ! $temp_filename ) {
		return wp_tempnam( dirname( $filename ), $dir );
	}

	// Suffix some random data to avoid filename conflicts.
	$temp_filename .= '-' . wp_generate_password( 6, false );
	$temp_filename .= '.tmp';
	$temp_filename  = $dir . wp_unique_filename( $dir, $temp_filename );

	$fp = @fopen( $temp_filename, 'x' );

	if ( ! $fp &amp;&amp; is_writable( $dir ) &amp;&amp; file_exists( $temp_filename ) ) {
		return wp_tempnam( $filename, $dir );
	}

	if ( $fp ) {
		fclose( $fp );
	}

	return $temp_filename;
}
</code></pre>  </section>  <section> <header class="toc-header"><h2 id="related">Related</h2></header> <article class="uses"> <header class="toc-header"><h3 id="uses">Uses</h3></header> <table id="uses-table" data-show="4">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="wp_tempnam.html">wp_tempnam()</a> <span>wp-admin/includes/file.php</span> </td> <td class="related-desc"> <p>Returns a filename of a temporary unique file.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_generate_password.html">wp_generate_password()</a> <span>wp-includes/pluggable.php</span> </td> <td class="related-desc"> <p>Generates a random password drawn from the defined set of characters.</p> </td> </tr> <tr> <td class="related-title"> <a href="get_temp_dir.html">get_temp_dir()</a> <span>wp-includes/functions.php</span> </td> <td class="related-desc"> <p>Determines a writable directory for temporary files.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_unique_filename.html">wp_unique_filename()</a> <span>wp-includes/functions.php</span> </td> <td class="related-desc"> <p>Gets a filename that is sanitized and unique for the given directory.</p> </td> </tr> </tbody>

</table> </article> <article class="used-by"> <header class="toc-header"><h3 id="used-by">Used By</h3></header> <table id="used-by-table" data-show="5">  <thead> <tr> <th>Used By</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="../classes/wp_customize_manager/import_theme_starter_content.html">WP_Customize_Manager::import_theme_starter_content()</a> <span>wp-includes/class-wp-customize-manager.php</span> </td> <td class="related-desc"> <p>Imports theme starter content into the customized state.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wp_rest_attachments_controller/upload_from_data.html">WP_REST_Attachments_Controller::upload_from_data()</a> <span>wp-includes/rest-api/endpoints/class-wp-rest-attachments-controller.php</span> </td> <td class="related-desc"> <p>Handles an upload via raw POST data.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wp_filesystem_ftpext/get_contents.html">WP_Filesystem_FTPext::get_contents()</a> <span>wp-admin/includes/class-wp-filesystem-ftpext.php</span> </td> <td class="related-desc"> <p>Reads entire file into a string.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wp_filesystem_ftpext/put_contents.html">WP_Filesystem_FTPext::put_contents()</a> <span>wp-admin/includes/class-wp-filesystem-ftpext.php</span> </td> <td class="related-desc"> <p>Writes a string to a file.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wp_filesystem_ftpsockets/get_contents.html">WP_Filesystem_ftpsockets::get_contents()</a> <span>wp-admin/includes/class-wp-filesystem-ftpsockets.php</span> </td> <td class="related-desc"> <p>Reads entire file into a string.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wp_filesystem_ftpsockets/put_contents.html">WP_Filesystem_ftpsockets::put_contents()</a> <span>wp-admin/includes/class-wp-filesystem-ftpsockets.php</span> </td> <td class="related-desc"> <p>Writes a string to a file.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_tempnam.html">wp_tempnam()</a> <span>wp-admin/includes/file.php</span> </td> <td class="related-desc"> <p>Returns a filename of a temporary unique file.</p> </td> </tr> <tr> <td class="related-title"> <a href="download_url.html">download_url()</a> <span>wp-admin/includes/file.php</span> </td> <td class="related-desc"> <p>Downloads a URL to a local temporary file using the WordPress HTTP API.</p> </td> </tr> </tbody>

</table>   </article> </section>  <section> <header class="toc-header"><h2 id="changelog">Changelog</h2></header> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/2.6.0/" alt="WordPress 2.6.0">2.6.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2003&ndash;2022 WordPress Foundation<br>Licensed under the GNU GPLv2+ License.<br>
    <a href="https://developer.wordpress.org/reference/functions/wp_tempnam" class="_attribution-link">https://developer.wordpress.org/reference/functions/wp_tempnam</a>
  </p>
</div>
