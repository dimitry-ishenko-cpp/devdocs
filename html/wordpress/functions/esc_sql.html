<h1 class="wp-block-wporg-code-reference-title">esc_sql( <span class="arg-type">string|array</span> <span class="arg-name">$data</span> ): <span class="return-type">string|array</span>
</h1> <section><p>Escapes data for use in a MySQL query.</p> </section> <section><h2 id="description">Description</h2> <p>Usually you should prepare queries using wpdb::prepare().<br>Sometimes, spot-escaping is required or useful. One example is preparing an array for use in an IN clause.</p> <p>NOTE: Since 4.8.3, ‘%’ characters will be replaced with a placeholder string, this prevents certain SQLi attacks from taking place. This change in behavior may cause issues for code that expects the return value of <a href="esc_sql.html" rel="function">esc_sql()</a> to be usable for other purposes.</p> </section> <section><h2 id="parameters">Parameters</h2> <dl>
<dt>
<code>$data</code><span class="type"><span class="string">string</span>|<span class="array">array</span></span><span class="required">required</span>
</dt>
<dd><div class="desc"><span class="description">Unescaped data.</span></div></dd>
</dl></section> <section><h2 id="return">Return</h2> <span class="return-type">string|array</span> Escaped data, in the same type as supplied.</section> <section><h2 id="more-information">More Information</h2> <ul class="wp-block-list"> <li>Be careful in using this function correctly. <strong>It will only escape values to be used in strings in the query</strong>. That is, it only provides escaping for values that will be within quotes in the SQL (as in <code>field = '{$escaped_value}'</code>). If your value is not going to be within quotes, your code will still be vulnerable to SQL injection. For example, this is vulnerable, because the escaped value is not surrounded by quotes in the SQL query: <code>ORDER BY {$escaped_value}</code>. As such, <strong>this function does not escape unquoted numeric values, field names, or SQL keywords</strong>.</li> <li>
<a href="../classes/wpdb/prepare.html"><code>$wpdb-&gt;prepare()</code></a> is generally preferred as it corrects some common formatting errors.</li> <li>This function was formerly just an alias for <a href="../classes/wpdb/escape.html"><code>$wpdb-&gt;escape()</code></a>, but that function has now been deprecated.</li> </ul> </section> <section><h2 id="source">Source</h2> <pre class="wp-block-code" data-start="4438" aria-label="Function source code" data-language="php"><code id="wporg-source-code" lang="php" class="language-php line-numbers">function esc_sql( $data ) {
	global $wpdb;
	return $wpdb-&gt;_escape( $data );
}
</code></pre>
<p class="wporg-dot-link-list"><a href="https://developer.wordpress.org/reference/files/wp-includes/formatting.php/">View all references</a> <a href="https://core.trac.wordpress.org/browser/tags/6.7/src/wp-includes/formatting.php#L4438">View on Trac</a> <a href="https://github.com/WordPress/wordpress-develop/blob/6.7/src/wp-includes/formatting.php#L4438-L4441">View on GitHub</a></p></section>  <section><h2 id="changelog">Changelog</h2> <section style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table "><table>
<thead><tr>
<th scope="col">Version</th>
<th scope="col">Description</th>
</tr></thead>
<tbody><tr class="">
<td><a href="https://developer.wordpress.org/reference/since/2.8.0/">2.8.0</a></td>
<td>Introduced.</td>
</tr></tbody>
</table></figure></section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2003&ndash;2024 WordPress Foundation<br>Licensed under the GNU GPLv2+ License.<br>
    <a href="https://developer.wordpress.org/reference/functions/esc_sql" class="_attribution-link">https://developer.wordpress.org/reference/functions/esc_sql</a>
  </p>
</div>
