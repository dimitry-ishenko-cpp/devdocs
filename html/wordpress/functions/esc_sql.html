<h1>esc_sql( string|array $data ): string|array</h1>  <section> <p>Escapes data for use in a MySQL query.</p> </section>   <section> <header class="toc-header"><h2 id="description">Description</h2></header> <p>Usually you should prepare queries using <a href="../classes/wpdb/prepare.html" rel="method">wpdb::prepare()</a>.<br>Sometimes, spot-escaping is required or useful. One example is preparing an array for use in an IN clause.</p> <p>NOTE: Since 4.8.3, ‘%’ characters will be replaced with a placeholder string, this prevents certain SQLi attacks from taking place. This change in behaviour may cause issues for code that expects the return value of <a href="esc_sql.html" rel="function">esc_sql()</a> to be useable for other purposes.</p> </section>  <section> <header class="toc-header"><h2 id="parameters">Parameters</h2></header> <dl> <dt> <code>$data</code> <span class="type"><span class="string">string</span>|<span class="array">array</span></span> <span class="required">Required</span> </dt> <dd> <div class="desc"> <span class="description">Unescaped data.</span> </div> </dd> </dl> </section>  <section> <header class="toc-header"><h2 id="return">Return</h2></header> <p><span class="return-type">string|array</span> Escaped data, in the same type as supplied.</p> </section>  <section> <header class="toc-header"><h2 id="more-information">More Information</h2></header> <ul> <li>Be careful in using this function correctly. <strong>It will only escape values to be used in strings in the query</strong>. That is, it only provides escaping for values that will be within quotes in the SQL (as in <code>field = '{$escaped_value}'</code>). If your value is not going to be within quotes, your code will still be vulnerable to SQL injection. For example, this is vulnerable, because the escaped value is not surrounded by quotes in the SQL query: <code>ORDER BY {$escaped_value}</code>. As such, <strong>this function does not escape unquoted numeric values, field names, or SQL keywords</strong>.</li> <li>
<a href="../classes/wpdb/prepare.html"><code>$wpdb-&gt;prepare()</code></a> is generally preferred as it corrects some common formatting errors.</li> <li>This function was formerly just an alias for <a href="../classes/wpdb/escape.html"><code>$wpdb-&gt;escape()</code></a>, but that function has now been deprecated.</li> </ul> </section>  <section> <header class="toc-header"><h2 id="source">Source</h2></header> <p> File: <code>wp-includes/formatting.php</code>. <a href="https://developer.wordpress.org/reference/files/wp-includes/formatting.php/">View all references</a> </p> <pre class="wp-block-code" data-start="4348" aria-label="Function source code" data-language="php"><code lang="php" class="language-php line-numbers">function esc_sql( $data ) {
	global $wpdb;
	return $wpdb-&gt;_escape( $data );
}
</code></pre>  </section>  <section> <header class="toc-header"><h2 id="related">Related</h2></header> <article class="uses"> <header class="toc-header"><h3 id="uses">Uses</h3></header> <table id="uses-table" data-show="2">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="../classes/wpdb/_escape.html">wpdb::_escape()</a> <span>wp-includes/class-wpdb.php</span> </td> <td class="related-desc"> <p>Escapes data. Works on arrays.</p> </td> </tr> </tbody>

</table> </article> <article class="used-by"> <header class="toc-header"><h3 id="used-by">Used By</h3></header> <table id="used-by-table" data-show="5">  <thead> <tr> <th>Used By</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="../classes/wp_user_query/parse_orderby.html">WP_User_Query::parse_orderby()</a> <span>wp-includes/class-wp-user-query.php</span> </td> <td class="related-desc"> <p>Parses and sanitizes ‘orderby’ keys passed to the user query.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wp_comment_query/parse_orderby.html">WP_Comment_Query::parse_orderby()</a> <span>wp-includes/class-wp-comment-query.php</span> </td> <td class="related-desc"> <p>Parse and sanitize ‘orderby’ keys passed to the comment query.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wp_date_query/get_sql_for_clause.html">WP_Date_Query::get_sql_for_clause()</a> <span>wp-includes/class-wp-date-query.php</span> </td> <td class="related-desc"> <p>Turns a first-order date query into SQL for a WHERE clause.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wp_query/get_posts.html">WP_Query::get_posts()</a> <span>wp-includes/class-wp-query.php</span> </td> <td class="related-desc"> <p>Retrieves an array of posts based on query variables.</p> </td> </tr> <tr> <td class="related-title"> <a href="_pad_term_counts.html">_pad_term_counts()</a> <span>wp-includes/taxonomy.php</span> </td> <td class="related-desc"> <p>Adds count of children to parent count.</p> </td> </tr> <tr> <td class="related-title"> <a href="_update_post_term_count.html">_update_post_term_count()</a> <span>wp-includes/taxonomy.php</span> </td> <td class="related-desc"> <p>Updates term count based on object types of the current taxonomy.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wp_date_query/__construct.html">WP_Date_Query::__construct()</a> <span>wp-includes/class-wp-date-query.php</span> </td> <td class="related-desc"> <p>Constructor.</p> </td> </tr> <tr> <td class="related-title"> <a href="get_page_by_path.html">get_page_by_path()</a> <span>wp-includes/post.php</span> </td> <td class="related-desc"> <p>Retrieves a page given its path.</p> </td> </tr> <tr> <td class="related-title"> <a href="redirect_guess_404_permalink.html">redirect_guess_404_permalink()</a> <span>wp-includes/canonical.php</span> </td> <td class="related-desc"> <p>Attempts to guess the correct URL for a 404 request based on query vars.</p> </td> </tr> </tbody>

</table>   </article> </section>  <section> <header class="toc-header"><h2 id="changelog">Changelog</h2></header> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/2.8.0/" alt="WordPress 2.8.0">2.8.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2003&ndash;2022 WordPress Foundation<br>Licensed under the GNU GPLv2+ License.<br>
    <a href="https://developer.wordpress.org/reference/functions/esc_sql" class="_attribution-link">https://developer.wordpress.org/reference/functions/esc_sql</a>
  </p>
</div>
