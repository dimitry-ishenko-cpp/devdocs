<h1>wp_kses_bad_protocol( string $string, string[] $allowed_protocols ): string</h1>  <section> <p>Sanitizes a string and removed disallowed URL protocols.</p> </section>   <section> <header class="toc-header"><h2 id="description">Description</h2></header> <p>This function removes all non-allowed protocols from the beginning of the string. It ignores whitespace and the case of the letters, and it does understand HTML entities. It does its work recursively, so it wonâ€™t be fooled by a string like <code>javascript:javascript:alert(57)</code>.</p> </section>  <section> <header class="toc-header"><h2 id="parameters">Parameters</h2></header> <dl> <dt> <code>$string</code> <span class="type"><span class="string">string</span></span> <span class="required">Required</span> </dt> <dd> <div class="desc"> <span class="description">Content to filter bad protocols from.</span> </div> </dd> <dt> <code>$allowed_protocols</code> <span class="type"><span class="string[]">string[]</span></span> <span class="required">Required</span> </dt> <dd> <div class="desc"> <span class="description">Array of allowed URL protocols.</span> </div> </dd> </dl> </section>  <section> <header class="toc-header"><h2 id="return">Return</h2></header> <p><span class="return-type">string</span> Filtered content.</p> </section>  <section> <header class="toc-header"><h2 id="source">Source</h2></header> <p> File: <code>wp-includes/kses.php</code>. <a href="https://developer.wordpress.org/reference/files/wp-includes/kses.php/">View all references</a> </p> <pre class="wp-block-code" data-start="1654" aria-label="Function source code" data-language="php"><code lang="php" class="language-php line-numbers">function wp_kses_bad_protocol( $string, $allowed_protocols ) {
	$string     = wp_kses_no_null( $string );
	$iterations = 0;

	do {
		$original_string = $string;
		$string          = wp_kses_bad_protocol_once( $string, $allowed_protocols );
	} while ( $original_string != $string &amp;&amp; ++$iterations &lt; 6 );

	if ( $original_string != $string ) {
		return '';
	}

	return $string;
}
</code></pre>  </section>  <section> <header class="toc-header"><h2 id="related">Related</h2></header> <article class="uses"> <header class="toc-header"><h3 id="uses">Uses</h3></header> <table id="uses-table" data-show="2">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="wp_kses_no_null.html">wp_kses_no_null()</a> <span>wp-includes/kses.php</span> </td> <td class="related-desc"> <p>Removes any invalid control characters in a text string.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_kses_bad_protocol_once.html">wp_kses_bad_protocol_once()</a> <span>wp-includes/kses.php</span> </td> <td class="related-desc"> <p>Sanitizes content from bad protocols and other characters.</p> </td> </tr> </tbody>

</table> </article> <article class="used-by"> <header class="toc-header"><h3 id="used-by">Used By</h3></header> <table id="used-by-table" data-show="5">  <thead> <tr> <th>Used By</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="wp_kses_one_attr.html">wp_kses_one_attr()</a> <span>wp-includes/kses.php</span> </td> <td class="related-desc"> <p>Filters one HTML attribute and ensures its value is allowed.</p> </td> </tr> <tr> <td class="related-title"> <a href="esc_url.html">esc_url()</a> <span>wp-includes/formatting.php</span> </td> <td class="related-desc"> <p>Checks and cleans a URL.</p> </td> </tr> <tr> <td class="related-title"> <a href="safecss_filter_attr.html">safecss_filter_attr()</a> <span>wp-includes/kses.php</span> </td> <td class="related-desc"> <p>Filters an inline style attribute and removes disallowed rules.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_kses_hair.html">wp_kses_hair()</a> <span>wp-includes/kses.php</span> </td> <td class="related-desc"> <p>Builds an attribute list from string containing attributes.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wp_http/request.html">WP_Http::request()</a> <span>wp-includes/class-wp-http.php</span> </td> <td class="related-desc"> <p>Send an HTTP request to a URI.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_http_validate_url.html">wp_http_validate_url()</a> <span>wp-includes/http.php</span> </td> <td class="related-desc"> <p>Validate a URL for safe use in the HTTP API.</p> </td> </tr> </tbody>

</table>   </article> </section>  <section> <header class="toc-header"><h2 id="changelog">Changelog</h2></header> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/1.0.0/" alt="WordPress 1.0.0">1.0.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2003&ndash;2022 WordPress Foundation<br>Licensed under the GNU GPLv2+ License.<br>
    <a href="https://developer.wordpress.org/reference/functions/wp_kses_bad_protocol" class="_attribution-link">https://developer.wordpress.org/reference/functions/wp_kses_bad_protocol</a>
  </p>
</div>
