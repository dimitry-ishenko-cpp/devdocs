<h1>image_constrain_size_for_editor( int $width, int $height, string|int[] $size = 'medium', string $context = null ): int[]</h1>  <section> <p>Scales down the default size of an image.</p> </section>   <section> <header class="toc-header"><h2 id="description">Description</h2></header> <p>This is so that the image is a better fit for the editor and theme.</p> <p>The <code>$size</code> parameter accepts either an array or a string. The supported string values are ‘thumb’ or ‘thumbnail’ for the given thumbnail size or defaults at 128 width and 96 height in pixels. Also supported for the string value is ‘medium’, ‘medium_large’ and ‘full’. The ‘full’ isn’t actually supported, but any value other than the supported will result in the content_width size or 500 if that is not set.</p> <p>Finally, there is a filter named <a href="../hooks/editor_max_image_size.html">‘editor_max_image_size’</a>, that will be called on the calculated array for width and height, respectively.</p> </section>  <section> <header class="toc-header"><h2 id="parameters">Parameters</h2></header> <dl> <dt> <code>$width</code> <span class="type"><span class="int">int</span></span> <span class="required">Required</span> </dt> <dd> <div class="desc"> <span class="description">Width of the image in pixels.</span> </div> </dd> <dt> <code>$height</code> <span class="type"><span class="int">int</span></span> <span class="required">Required</span> </dt> <dd> <div class="desc"> <span class="description">Height of the image in pixels.</span> </div> </dd> <dt> <code>$size</code> <span class="type"><span class="string">string</span>|<span class="int[]">int[]</span></span> <span class="required">Optional</span> </dt> <dd> <div class="desc"> <span class="description"> Image size. Accepts any registered image size name, or an array of width and height values in pixels (in that order). Default <code>'medium'</code>.</span> </div> <p class="default">Default: <code>'medium'</code></p> </dd> <dt> <code>$context</code> <span class="type"><span class="string">string</span></span> <span class="required">Optional</span> </dt> <dd> <div class="desc"> <span class="description"> Could be <code>'display'</code> (like in a theme) or <code>'edit'</code> (like inserting into an editor). </span> </div> <p class="default">Default: <code>null</code></p> </dd> </dl> </section>  <section> <header class="toc-header"><h2 id="return">Return</h2></header> <p><span class="return-type">int[]</span> An array of width and height values.<br> </p>
<ul class="param-hash">
<li>
<span class="type">int</span><div class="desc">The maximum width in pixels.</div>
</li> <li>
<code>1</code><span class="type">int</span><div class="desc">The maximum height in pixels.</div>
</li> </ul> </section>  <section> <header class="toc-header"><h2 id="source">Source</h2></header> <p> File: <code>wp-includes/media.php</code>. <a href="https://developer.wordpress.org/reference/files/wp-includes/media.php/">View all references</a> </p> <pre class="wp-block-code" data-start="60" aria-label="Function source code" data-language="php"><code lang="php" class="language-php line-numbers">function image_constrain_size_for_editor( $width, $height, $size = 'medium', $context = null ) {
	global $content_width;

	$_wp_additional_image_sizes = wp_get_additional_image_sizes();

	if ( ! $context ) {
		$context = is_admin() ? 'edit' : 'display';
	}

	if ( is_array( $size ) ) {
		$max_width  = $size[0];
		$max_height = $size[1];
	} elseif ( 'thumb' === $size || 'thumbnail' === $size ) {
		$max_width  = (int) get_option( 'thumbnail_size_w' );
		$max_height = (int) get_option( 'thumbnail_size_h' );
		// Last chance thumbnail size defaults.
		if ( ! $max_width &amp;&amp; ! $max_height ) {
			$max_width  = 128;
			$max_height = 96;
		}
	} elseif ( 'medium' === $size ) {
		$max_width  = (int) get_option( 'medium_size_w' );
		$max_height = (int) get_option( 'medium_size_h' );

	} elseif ( 'medium_large' === $size ) {
		$max_width  = (int) get_option( 'medium_large_size_w' );
		$max_height = (int) get_option( 'medium_large_size_h' );

		if ( (int) $content_width &gt; 0 ) {
			$max_width = min( (int) $content_width, $max_width );
		}
	} elseif ( 'large' === $size ) {
		/*
		 * We're inserting a large size image into the editor. If it's a really
		 * big image we'll scale it down to fit reasonably within the editor
		 * itself, and within the theme's content width if it's known. The user
		 * can resize it in the editor if they wish.
		 */
		$max_width  = (int) get_option( 'large_size_w' );
		$max_height = (int) get_option( 'large_size_h' );

		if ( (int) $content_width &gt; 0 ) {
			$max_width = min( (int) $content_width, $max_width );
		}
	} elseif ( ! empty( $_wp_additional_image_sizes ) &amp;&amp; in_array( $size, array_keys( $_wp_additional_image_sizes ), true ) ) {
		$max_width  = (int) $_wp_additional_image_sizes[ $size ]['width'];
		$max_height = (int) $_wp_additional_image_sizes[ $size ]['height'];
		// Only in admin. Assume that theme authors know what they're doing.
		if ( (int) $content_width &gt; 0 &amp;&amp; 'edit' === $context ) {
			$max_width = min( (int) $content_width, $max_width );
		}
	} else { // $size === 'full' has no constraint.
		$max_width  = $width;
		$max_height = $height;
	}

	/**
	 * Filters the maximum image size dimensions for the editor.
	 *
	 * @since 2.5.0
	 *
	 * @param int[]        $max_image_size {
	 *     An array of width and height values.
	 *
	 *     @type int $0 The maximum width in pixels.
	 *     @type int $1 The maximum height in pixels.
	 * }
	 * @param string|int[] $size     Requested image size. Can be any registered image size name, or
	 *                               an array of width and height values in pixels (in that order).
	 * @param string       $context  The context the image is being resized for.
	 *                               Possible values are 'display' (like in a theme)
	 *                               or 'edit' (like inserting into an editor).
	 */
	list( $max_width, $max_height ) = apply_filters( 'editor_max_image_size', array( $max_width, $max_height ), $size, $context );

	return wp_constrain_dimensions( $width, $height, $max_width, $max_height );
}
</code></pre>  </section>  <section> <header class="toc-header"><h2 id="hooks">Hooks</h2></header> <article class="hooks"> <dl> <dt class="signature-highlight"> <a href="../hooks/editor_max_image_size.html" style="text-decoration: none"> <span class="hook-func">apply_filters</span>( 'editor_max_image_size', <nobr><span class="arg-type">int[]</span> <span class="arg-name">$max_image_size</span></nobr>, <nobr><span class="arg-type">string|int[]</span> <span class="arg-name">$size</span></nobr>, <nobr><span class="arg-type">string</span> <span class="arg-name">$context</span></nobr> ) </a> </dt> <dd class="hook-desc"> 
<p>Filters the maximum image size dimensions for the editor.</p> </dd> </dl> </article> </section>  <section> <header class="toc-header"><h2 id="related">Related</h2></header> <article class="uses"> <header class="toc-header"><h3 id="uses">Uses</h3></header> <table id="uses-table" data-show="2">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="wp_get_additional_image_sizes.html">wp_get_additional_image_sizes()</a> <span>wp-includes/media.php</span> </td> <td class="related-desc"> <p>Retrieves additional image sizes.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_constrain_dimensions.html">wp_constrain_dimensions()</a> <span>wp-includes/media.php</span> </td> <td class="related-desc"> <p>Calculates the new dimensions for a down-sampled image.</p> </td> </tr> <tr> <td class="related-title"> <a href="is_admin.html">is_admin()</a> <span>wp-includes/load.php</span> </td> <td class="related-desc"> <p>Determines whether the current request is for an administrative interface page.</p> </td> </tr> <tr> <td class="related-title"> <a href="apply_filters.html">apply_filters()</a> <span>wp-includes/plugin.php</span> </td> <td class="related-desc"> <p>Calls the callback functions that have been added to a filter hook.</p> </td> </tr> <tr> <td class="related-title"> <a href="get_option.html">get_option()</a> <span>wp-includes/option.php</span> </td> <td class="related-desc"> <p>Retrieves an option value based on an option name.</p> </td> </tr> </tbody>

</table>   </article>  <article class="used-by"> <header class="toc-header"><h3 id="used-by">Used By</h3></header> <table id="used-by-table" data-show="5">  <thead> <tr> <th>Used By</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="wp_prepare_attachment_for_js.html">wp_prepare_attachment_for_js()</a> <span>wp-includes/media.php</span> </td> <td class="related-desc"> <p>Prepares an attachment post object for JS, where it is expected to be JSON-encoded and fit into an Attachment model.</p> </td> </tr> <tr> <td class="related-title"> <a href="image_get_intermediate_size.html">image_get_intermediate_size()</a> <span>wp-includes/media.php</span> </td> <td class="related-desc"> <p>Retrieves the image’s intermediate size (resized) path, width, and height.</p> </td> </tr> <tr> <td class="related-title"> <a href="image_downsize.html">image_downsize()</a> <span>wp-includes/media.php</span> </td> <td class="related-desc"> <p>Scales an image to fit a particular size (such as ‘thumb’ or ‘medium’).</p> </td> </tr> </tbody>

</table> </article> </section>  <section> <header class="toc-header"><h2 id="changelog">Changelog</h2></header> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/2.5.0/" alt="WordPress 2.5.0">2.5.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2003&ndash;2022 WordPress Foundation<br>Licensed under the GNU GPLv2+ License.<br>
    <a href="https://developer.wordpress.org/reference/functions/image_constrain_size_for_editor" class="_attribution-link">https://developer.wordpress.org/reference/functions/image_constrain_size_for_editor</a>
  </p>
</div>
