<h1>wp_filter_comment( array $commentdata ): array</h1>  <section> <p>Filters and sanitizes comment data.</p> </section>   <section> <header class="toc-header"><h2 id="description">Description</h2></header> <p>Sets the comment data ‘filtered’ field to true when finished. This can be checked as to whether the comment should be filtered and to keep from filtering the same comment more than once.</p> </section>  <section> <header class="toc-header"><h2 id="parameters">Parameters</h2></header> <dl> <dt> <code>$commentdata</code> <span class="type"><span class="array">array</span></span> <span class="required">Required</span> </dt> <dd> <div class="desc"> <span class="description">Contains information on the comment.</span> </div> </dd> </dl> </section>  <section> <header class="toc-header"><h2 id="return">Return</h2></header> <p><span class="return-type">array</span> Parsed comment information.</p> </section>  <section> <header class="toc-header"><h2 id="source">Source</h2></header> <p> File: <code>wp-includes/comment.php</code>. <a href="https://developer.wordpress.org/reference/files/wp-includes/comment.php/">View all references</a> </p> <pre class="wp-block-code" data-start="2087" aria-label="Function source code" data-language="php"><code lang="php" class="language-php line-numbers">function wp_filter_comment( $commentdata ) {
	if ( isset( $commentdata['user_ID'] ) ) {
		/**
		 * Filters the comment author's user ID before it is set.
		 *
		 * The first time this filter is evaluated, `user_ID` is checked
		 * (for back-compat), followed by the standard `user_id` value.
		 *
		 * @since 1.5.0
		 *
		 * @param int $user_id The comment author's user ID.
		 */
		$commentdata['user_id'] = apply_filters( 'pre_user_id', $commentdata['user_ID'] );
	} elseif ( isset( $commentdata['user_id'] ) ) {
		/** This filter is documented in wp-includes/comment.php */
		$commentdata['user_id'] = apply_filters( 'pre_user_id', $commentdata['user_id'] );
	}

	/**
	 * Filters the comment author's browser user agent before it is set.
	 *
	 * @since 1.5.0
	 *
	 * @param string $comment_agent The comment author's browser user agent.
	 */
	$commentdata['comment_agent'] = apply_filters( 'pre_comment_user_agent', ( isset( $commentdata['comment_agent'] ) ? $commentdata['comment_agent'] : '' ) );
	/** This filter is documented in wp-includes/comment.php */
	$commentdata['comment_author'] = apply_filters( 'pre_comment_author_name', $commentdata['comment_author'] );
	/**
	 * Filters the comment content before it is set.
	 *
	 * @since 1.5.0
	 *
	 * @param string $comment_content The comment content.
	 */
	$commentdata['comment_content'] = apply_filters( 'pre_comment_content', $commentdata['comment_content'] );
	/**
	 * Filters the comment author's IP address before it is set.
	 *
	 * @since 1.5.0
	 *
	 * @param string $comment_author_ip The comment author's IP address.
	 */
	$commentdata['comment_author_IP'] = apply_filters( 'pre_comment_user_ip', $commentdata['comment_author_IP'] );
	/** This filter is documented in wp-includes/comment.php */
	$commentdata['comment_author_url'] = apply_filters( 'pre_comment_author_url', $commentdata['comment_author_url'] );
	/** This filter is documented in wp-includes/comment.php */
	$commentdata['comment_author_email'] = apply_filters( 'pre_comment_author_email', $commentdata['comment_author_email'] );

	$commentdata['filtered'] = true;

	return $commentdata;
}
</code></pre>  </section>  <section> <header class="toc-header"><h2 id="hooks">Hooks</h2></header> <article class="hooks"> <dl> <dt class="signature-highlight"> <a href="../hooks/pre_comment_author_email.html" style="text-decoration: none"> <span class="hook-func">apply_filters</span>( 'pre_comment_author_email', <nobr><span class="arg-type">string</span> <span class="arg-name">$author_email_cookie</span></nobr> ) </a> </dt> <dd class="hook-desc"> 
<p>Filters the comment author’s email cookie before it is set.</p> </dd> </dl> <dl> <dt class="signature-highlight"> <a href="../hooks/pre_comment_author_name.html" style="text-decoration: none"> <span class="hook-func">apply_filters</span>( 'pre_comment_author_name', <nobr><span class="arg-type">string</span> <span class="arg-name">$author_cookie</span></nobr> ) </a> </dt> <dd class="hook-desc"> 
<p>Filters the comment author’s name cookie before it is set.</p> </dd> </dl> <dl> <dt class="signature-highlight"> <a href="../hooks/pre_comment_author_url.html" style="text-decoration: none"> <span class="hook-func">apply_filters</span>( 'pre_comment_author_url', <nobr><span class="arg-type">string</span> <span class="arg-name">$author_url_cookie</span></nobr> ) </a> </dt> <dd class="hook-desc"> 
<p>Filters the comment author’s URL cookie before it is set.</p> </dd> </dl> <dl> <dt class="signature-highlight"> <a href="../hooks/pre_comment_content.html" style="text-decoration: none"> <span class="hook-func">apply_filters</span>( 'pre_comment_content', <nobr><span class="arg-type">string</span> <span class="arg-name">$comment_content</span></nobr> ) </a> </dt> <dd class="hook-desc"> 
<p>Filters the comment content before it is set.</p> </dd> </dl> <dl> <dt class="signature-highlight"> <a href="../hooks/pre_comment_user_agent.html" style="text-decoration: none"> <span class="hook-func">apply_filters</span>( 'pre_comment_user_agent', <nobr><span class="arg-type">string</span> <span class="arg-name">$comment_agent</span></nobr> ) </a> </dt> <dd class="hook-desc"> 
<p>Filters the comment author’s browser user agent before it is set.</p> </dd> </dl> <dl> <dt class="signature-highlight"> <a href="../hooks/pre_comment_user_ip.html" style="text-decoration: none"> <span class="hook-func">apply_filters</span>( 'pre_comment_user_ip', <nobr><span class="arg-type">string</span> <span class="arg-name">$comment_author_ip</span></nobr> ) </a> </dt> <dd class="hook-desc"> 
<p>Filters the comment author’s IP address before it is set.</p> </dd> </dl> <dl> <dt class="signature-highlight"> <a href="../hooks/pre_user_id.html" style="text-decoration: none"> <span class="hook-func">apply_filters</span>( 'pre_user_id', <nobr><span class="arg-type">int</span> <span class="arg-name">$user_id</span></nobr> ) </a> </dt> <dd class="hook-desc"> 
<p>Filters the comment author’s user ID before it is set.</p> </dd> </dl> </article> </section>  <section> <header class="toc-header"><h2 id="related">Related</h2></header> <article class="uses"> <header class="toc-header"><h3 id="uses">Uses</h3></header> <table id="uses-table" data-show="2">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="apply_filters.html">apply_filters()</a> <span>wp-includes/plugin.php</span> </td> <td class="related-desc"> <p>Calls the callback functions that have been added to a filter hook.</p> </td> </tr> </tbody>

</table> </article> <article class="used-by"> <header class="toc-header"><h3 id="used-by">Used By</h3></header> <table id="used-by-table" data-show="5">  <thead> <tr> <th>Used By</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="../classes/wp_rest_comments_controller/create_item.html">WP_REST_Comments_Controller::create_item()</a> <span>wp-includes/rest-api/endpoints/class-wp-rest-comments-controller.php</span> </td> <td class="related-desc"> <p>Creates a comment.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_new_comment.html">wp_new_comment()</a> <span>wp-includes/comment.php</span> </td> <td class="related-desc"> <p>Adds a new comment to the database.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_update_comment.html">wp_update_comment()</a> <span>wp-includes/comment.php</span> </td> <td class="related-desc"> <p>Updates an existing comment in the database.</p> </td> </tr> </tbody>

</table> </article> </section>  <section> <header class="toc-header"><h2 id="changelog">Changelog</h2></header> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/2.0.0/" alt="WordPress 2.0.0">2.0.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2003&ndash;2022 WordPress Foundation<br>Licensed under the GNU GPLv2+ License.<br>
    <a href="https://developer.wordpress.org/reference/functions/wp_filter_comment" class="_attribution-link">https://developer.wordpress.org/reference/functions/wp_filter_comment</a>
  </p>
</div>
