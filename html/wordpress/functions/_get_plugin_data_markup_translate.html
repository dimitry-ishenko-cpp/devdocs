<h1>_get_plugin_data_markup_translate( string $plugin_file, array $plugin_data, bool $markup = true, bool $translate = true ): array</h1> <div class="callout callout-alert">
<p> This function’s access is marked private. This means it is not intended for use by plugin or theme developers, only in other core functions. It is listed here for completeness. Use <a href="get_plugin_data.html" rel="function">get_plugin_data()</a> instead.</p> </div>  <section> <p>Sanitizes plugin data, optionally adds markup, optionally translates.</p> </section>   <section> <header class="toc-header"><h2 id="description">Description</h2></header> <header class="toc-header"><h3 id="see-also">See also</h3></header> <ul> <li>
<a href="get_plugin_data.html" rel="function">get_plugin_data()</a> </li> </ul> </section>  <section> <header class="toc-header"><h2 id="parameters">Parameters</h2></header> <dl> <dt> <code>$plugin_file</code> <span class="type"><span class="string">string</span></span> <span class="required">Required</span> </dt> <dd> <div class="desc"> <span class="description">Path to the main plugin file.</span> </div> </dd> <dt> <code>$plugin_data</code> <span class="type"><span class="array">array</span></span> <span class="required">Required</span> </dt> <dd> <div class="desc"> <span class="description">An array of plugin data. See <a href="get_plugin_data.html" rel="function">get_plugin_data()</a> .</span> </div> </dd> <dt> <code>$markup</code> <span class="type"><span class="bool">bool</span></span> <span class="required">Optional</span> </dt> <dd> <div class="desc"> <span class="description"> If the returned data should have HTML markup applied.<br> </span> </div> <p class="default">Default: <code>true</code></p> </dd> <dt> <code>$translate</code> <span class="type"><span class="bool">bool</span></span> <span class="required">Optional</span> </dt> <dd> <div class="desc"> <span class="description"> If the returned data should be translated. </span> </div> <p class="default">Default: <code>true</code></p> </dd> </dl> </section>  <section> <header class="toc-header"><h2 id="return">Return</h2></header> <p><span class="return-type">array</span> Plugin data. Values will be empty if not supplied by the plugin.<br> See <a href="get_plugin_data.html" rel="function">get_plugin_data()</a> for the list of possible values.</p> </section>  <section> <header class="toc-header"><h2 id="source">Source</h2></header> <p> File: <code>wp-admin/includes/plugin.php</code>. <a href="https://developer.wordpress.org/reference/files/wp-admin/includes/plugin.php/">View all references</a> </p> <pre class="wp-block-code" data-start="137" aria-label="Function source code" data-language="php"><code lang="php" class="language-php line-numbers">function _get_plugin_data_markup_translate( $plugin_file, $plugin_data, $markup = true, $translate = true ) {

	// Sanitize the plugin filename to a WP_PLUGIN_DIR relative path.
	$plugin_file = plugin_basename( $plugin_file );

	// Translate fields.
	if ( $translate ) {
		$textdomain = $plugin_data['TextDomain'];
		if ( $textdomain ) {
			if ( ! is_textdomain_loaded( $textdomain ) ) {
				if ( $plugin_data['DomainPath'] ) {
					load_plugin_textdomain( $textdomain, false, dirname( $plugin_file ) . $plugin_data['DomainPath'] );
				} else {
					load_plugin_textdomain( $textdomain, false, dirname( $plugin_file ) );
				}
			}
		} elseif ( 'hello.php' === basename( $plugin_file ) ) {
			$textdomain = 'default';
		}
		if ( $textdomain ) {
			foreach ( array( 'Name', 'PluginURI', 'Description', 'Author', 'AuthorURI', 'Version' ) as $field ) {
				if ( ! empty( $plugin_data[ $field ] ) ) {
					// phpcs:ignore WordPress.WP.I18n.LowLevelTranslationFunction,WordPress.WP.I18n.NonSingularStringLiteralText,WordPress.WP.I18n.NonSingularStringLiteralDomain
					$plugin_data[ $field ] = translate( $plugin_data[ $field ], $textdomain );
				}
			}
		}
	}

	// Sanitize fields.
	$allowed_tags_in_links = array(
		'abbr'    =&gt; array( 'title' =&gt; true ),
		'acronym' =&gt; array( 'title' =&gt; true ),
		'code'    =&gt; true,
		'em'      =&gt; true,
		'strong'  =&gt; true,
	);

	$allowed_tags      = $allowed_tags_in_links;
	$allowed_tags['a'] = array(
		'href'  =&gt; true,
		'title' =&gt; true,
	);

	// Name is marked up inside &lt;a&gt; tags. Don't allow these.
	// Author is too, but some plugins have used &lt;a&gt; here (omitting Author URI).
	$plugin_data['Name']   = wp_kses( $plugin_data['Name'], $allowed_tags_in_links );
	$plugin_data['Author'] = wp_kses( $plugin_data['Author'], $allowed_tags );

	$plugin_data['Description'] = wp_kses( $plugin_data['Description'], $allowed_tags );
	$plugin_data['Version']     = wp_kses( $plugin_data['Version'], $allowed_tags );

	$plugin_data['PluginURI'] = esc_url( $plugin_data['PluginURI'] );
	$plugin_data['AuthorURI'] = esc_url( $plugin_data['AuthorURI'] );

	$plugin_data['Title']      = $plugin_data['Name'];
	$plugin_data['AuthorName'] = $plugin_data['Author'];

	// Apply markup.
	if ( $markup ) {
		if ( $plugin_data['PluginURI'] &amp;&amp; $plugin_data['Name'] ) {
			$plugin_data['Title'] = '&lt;a href="' . $plugin_data['PluginURI'] . '.html"&gt;' . $plugin_data['Name'] . '&lt;/a&gt;';
		}

		if ( $plugin_data['AuthorURI'] &amp;&amp; $plugin_data['Author'] ) {
			$plugin_data['Author'] = '&lt;a href="' . $plugin_data['AuthorURI'] . '.html"&gt;' . $plugin_data['Author'] . '&lt;/a&gt;';
		}

		$plugin_data['Description'] = wptexturize( $plugin_data['Description'] );

		if ( $plugin_data['Author'] ) {
			$plugin_data['Description'] .= sprintf(
				/* translators: %s: Plugin author. */
				' &lt;cite&gt;' . __( 'By %s.' ) . '&lt;/cite&gt;',
				$plugin_data['Author']
			);
		}
	}

	return $plugin_data;
}
</code></pre>  </section>  <section> <header class="toc-header"><h2 id="related">Related</h2></header> <article class="uses"> <header class="toc-header"><h3 id="uses">Uses</h3></header> <table id="uses-table" data-show="5">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="is_textdomain_loaded.html">is_textdomain_loaded()</a> <span>wp-includes/l10n.php</span> </td> <td class="related-desc"> <p>Determines whether there are translations for the text domain.</p> </td> </tr> <tr> <td class="related-title"> <a href="load_plugin_textdomain.html">load_plugin_textdomain()</a> <span>wp-includes/l10n.php</span> </td> <td class="related-desc"> <p>Loads a plugin’s translated strings.</p> </td> </tr> <tr> <td class="related-title"> <a href="translate.html">translate()</a> <span>wp-includes/l10n.php</span> </td> <td class="related-desc"> <p>Retrieves the translation of $text.</p> </td> </tr> <tr> <td class="related-title"> <a href="wptexturize.html">wptexturize()</a> <span>wp-includes/formatting.php</span> </td> <td class="related-desc"> <p>Replaces common plain text characters with formatted entities.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_kses.html">wp_kses()</a> <span>wp-includes/kses.php</span> </td> <td class="related-desc"> <p>Filters text content and strips out disallowed HTML.</p> </td> </tr> <tr> <td class="related-title"> <a href="plugin_basename.html">plugin_basename()</a> <span>wp-includes/plugin.php</span> </td> <td class="related-desc"> <p>Gets the basename of a plugin.</p> </td> </tr> <tr> <td class="related-title"> <a href="__.html">__()</a> <span>wp-includes/l10n.php</span> </td> <td class="related-desc"> <p>Retrieves the translation of $text.</p> </td> </tr> <tr> <td class="related-title"> <a href="esc_url.html">esc_url()</a> <span>wp-includes/formatting.php</span> </td> <td class="related-desc"> <p>Checks and cleans a URL.</p> </td> </tr> </tbody>

</table>   </article>  <article class="used-by"> <header class="toc-header"><h3 id="used-by">Used By</h3></header> <table id="used-by-table" data-show="5">  <thead> <tr> <th>Used By</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="../classes/wp_rest_plugins_controller/prepare_item_for_response.html">WP_REST_Plugins_Controller::prepare_item_for_response()</a> <span>wp-includes/rest-api/endpoints/class-wp-rest-plugins-controller.php</span> </td> <td class="related-desc"> <p>Prepares the plugin for the REST response.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wp_plugins_list_table/prepare_items.html">WP_Plugins_List_Table::prepare_items()</a> <span>wp-admin/includes/class-wp-plugins-list-table.php</span> </td> <td class="related-desc"> </td> </tr> <tr> <td class="related-title"> <a href="get_plugin_data.html">get_plugin_data()</a> <span>wp-admin/includes/plugin.php</span> </td> <td class="related-desc"> <p>Parses the plugin contents to retrieve plugin’s metadata.</p> </td> </tr> <tr> <td class="related-title"> <a href="list_plugin_updates.html">list_plugin_updates()</a> <span>wp-admin/update-core.php</span> </td> <td class="related-desc"> <p>Display the upgrade plugins form.</p> </td> </tr> </tbody>

</table> </article> </section>  <section> <header class="toc-header"><h2 id="changelog">Changelog</h2></header> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/2.7.0/" alt="WordPress 2.7.0">2.7.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2003&ndash;2022 WordPress Foundation<br>Licensed under the GNU GPLv2+ License.<br>
    <a href="https://developer.wordpress.org/reference/functions/_get_plugin_data_markup_translate" class="_attribution-link">https://developer.wordpress.org/reference/functions/_get_plugin_data_markup_translate</a>
  </p>
</div>
