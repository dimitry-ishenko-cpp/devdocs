<h1>_get_term_children( int $term_id, array $terms, string $taxonomy, array $ancestors = array() ): array|WP_Error</h1> <div class="callout callout-alert">
<p> This functionâ€™s access is marked private. This means it is not intended for use by plugin or theme developers, only in other core functions. It is listed here for completeness.</p> </div>  <section> <p>Gets the subset of $terms that are descendants of $term_id.</p> </section>   <section> <header class="toc-header"><h2 id="description">Description</h2></header> <p>If <code>$terms</code> is an array of objects, then <a href="_get_term_children.html" rel="function">_get_term_children()</a> returns an array of objects.<br>If <code>$terms</code> is an array of IDs, then <a href="_get_term_children.html" rel="function">_get_term_children()</a> returns an array of IDs.</p> </section>  <section> <header class="toc-header"><h2 id="parameters">Parameters</h2></header> <dl> <dt> <code>$term_id</code> <span class="type"><span class="int">int</span></span> <span class="required">Required</span> </dt> <dd> <div class="desc"> <span class="description">The ancestor term: all returned terms should be descendants of <code>$term_id</code>.</span> </div> </dd> <dt> <code>$terms</code> <span class="type"><span class="array">array</span></span> <span class="required">Required</span> </dt> <dd> <div class="desc"> <span class="description">The set of terms - either an array of term objects or term IDs - from which those that are descendants of $term_id will be chosen.</span> </div> </dd> <dt> <code>$taxonomy</code> <span class="type"><span class="string">string</span></span> <span class="required">Required</span> </dt> <dd> <div class="desc"> <span class="description">The taxonomy which determines the hierarchy of the terms.</span> </div> </dd> <dt> <code>$ancestors</code> <span class="type"><span class="array">array</span></span> <span class="required">Optional</span> </dt> <dd> <div class="desc"> <span class="description"> Term ancestors that have already been identified. Passed by reference, to keep track of found terms when recursing the hierarchy. The array of located ancestors is used to prevent infinite recursion loops. For performance, <code>term_ids</code> are used as array keys, with 1 as value. </span> </div> <p class="default">Default: <code>array()</code></p> </dd> </dl> </section>  <section> <header class="toc-header"><h2 id="return">Return</h2></header> <p><span class="return-type">array|<a href="../classes/wp_error.html" rel="class">WP_Error</a></span> The subset of $terms that are descendants of $term_id.</p> </section>  <section> <header class="toc-header"><h2 id="source">Source</h2></header> <p> File: <code>wp-includes/taxonomy.php</code>. <a href="https://developer.wordpress.org/reference/files/wp-includes/taxonomy.php/">View all references</a> </p> <pre class="wp-block-code" data-start="3871" aria-label="Function source code" data-language="php"><code lang="php" class="language-php line-numbers">function _get_term_children( $term_id, $terms, $taxonomy, &amp;$ancestors = array() ) {
	$empty_array = array();
	if ( empty( $terms ) ) {
		return $empty_array;
	}

	$term_id      = (int) $term_id;
	$term_list    = array();
	$has_children = _get_term_hierarchy( $taxonomy );

	if ( $term_id &amp;&amp; ! isset( $has_children[ $term_id ] ) ) {
		return $empty_array;
	}

	// Include the term itself in the ancestors array, so we can properly detect when a loop has occurred.
	if ( empty( $ancestors ) ) {
		$ancestors[ $term_id ] = 1;
	}

	foreach ( (array) $terms as $term ) {
		$use_id = false;
		if ( ! is_object( $term ) ) {
			$term = get_term( $term, $taxonomy );
			if ( is_wp_error( $term ) ) {
				return $term;
			}
			$use_id = true;
		}

		// Don't recurse if we've already identified the term as a child - this indicates a loop.
		if ( isset( $ancestors[ $term-&gt;term_id ] ) ) {
			continue;
		}

		if ( (int) $term-&gt;parent === $term_id ) {
			if ( $use_id ) {
				$term_list[] = $term-&gt;term_id;
			} else {
				$term_list[] = $term;
			}

			if ( ! isset( $has_children[ $term-&gt;term_id ] ) ) {
				continue;
			}

			$ancestors[ $term-&gt;term_id ] = 1;

			$children = _get_term_children( $term-&gt;term_id, $terms, $taxonomy, $ancestors );
			if ( $children ) {
				$term_list = array_merge( $term_list, $children );
			}
		}
	}

	return $term_list;
}
</code></pre>  </section>  <section> <header class="toc-header"><h2 id="related">Related</h2></header> <article class="uses"> <header class="toc-header"><h3 id="uses">Uses</h3></header> <table id="uses-table" data-show="2">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="_get_term_hierarchy.html">_get_term_hierarchy()</a> <span>wp-includes/taxonomy.php</span> </td> <td class="related-desc"> <p>Retrieves children of taxonomy as term IDs.</p> </td> </tr> <tr> <td class="related-title"> <a href="_get_term_children.html">_get_term_children()</a> <span>wp-includes/taxonomy.php</span> </td> <td class="related-desc"> <p>Gets the subset of $terms that are descendants of $term_id.</p> </td> </tr> <tr> <td class="related-title"> <a href="get_term.html">get_term()</a> <span>wp-includes/taxonomy.php</span> </td> <td class="related-desc"> <p>Gets all term data from database by term ID.</p> </td> </tr> <tr> <td class="related-title"> <a href="is_wp_error.html">is_wp_error()</a> <span>wp-includes/load.php</span> </td> <td class="related-desc"> <p>Checks whether the given variable is a WordPress Error.</p> </td> </tr> </tbody>

</table>   </article>  <article class="used-by"> <header class="toc-header"><h3 id="used-by">Used By</h3></header> <table id="used-by-table" data-show="5">  <thead> <tr> <th>Used By</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="../classes/wp_term_query/get_terms.html">WP_Term_Query::get_terms()</a> <span>wp-includes/class-wp-term-query.php</span> </td> <td class="related-desc"> <p>Retrieves the query results.</p> </td> </tr> <tr> <td class="related-title"> <a href="_get_term_children.html">_get_term_children()</a> <span>wp-includes/taxonomy.php</span> </td> <td class="related-desc"> <p>Gets the subset of $terms that are descendants of $term_id.</p> </td> </tr> </tbody>

</table> </article> </section>  <section> <header class="toc-header"><h2 id="changelog">Changelog</h2></header> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/2.3.0/" alt="WordPress 2.3.0">2.3.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2003&ndash;2022 WordPress Foundation<br>Licensed under the GNU GPLv2+ License.<br>
    <a href="https://developer.wordpress.org/reference/functions/_get_term_children" class="_attribution-link">https://developer.wordpress.org/reference/functions/_get_term_children</a>
  </p>
</div>
