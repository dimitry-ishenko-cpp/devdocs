<h1>network_step1( false|WP_Error $errors = false )</h1>  <section> <p>Prints step 1 for Network installation process.</p> </section>   <section> <header class="toc-header"><h2 id="parameters">Parameters</h2></header> <dl> <dt> <code>$errors</code> <span class="type"><span class="false">false</span>|<span class="WP_Error"><a href="../classes/wp_error.html" rel="class">WP_Error</a></span></span> <span class="required">Optional</span> </dt> <dd> <div class="desc"> <span class="description"> Error object. </span> </div> <p class="default">Default: <code>false</code></p> </dd> </dl> </section>  <section> <header class="toc-header"><h2 id="source">Source</h2></header> <p> File: <code>wp-admin/includes/network.php</code>. <a href="https://developer.wordpress.org/reference/files/wp-admin/includes/network.php/">View all references</a> </p> <pre class="wp-block-code" data-start="112" aria-label="Function source code" data-language="php"><code lang="php" class="language-php line-numbers">function network_step1( $errors = false ) {
	global $is_apache;

	if ( defined( 'DO_NOT_UPGRADE_GLOBAL_TABLES' ) ) {
		echo '&lt;div class="error"&gt;&lt;p&gt;&lt;strong&gt;' . __( 'Error:' ) . '&lt;/strong&gt; ' . sprintf(
			/* translators: %s: DO_NOT_UPGRADE_GLOBAL_TABLES */
			__( 'The constant %s cannot be defined when creating a network.' ),
			'&lt;code&gt;DO_NOT_UPGRADE_GLOBAL_TABLES&lt;/code&gt;'
		) . '&lt;/p&gt;&lt;/div&gt;';
		echo '&lt;/div&gt;';
		require_once ABSPATH . 'wp-admin/admin-footer.php';
		die();
	}

	$active_plugins = get_option( 'active_plugins' );
	if ( ! empty( $active_plugins ) ) {
		echo '&lt;div class="notice notice-warning"&gt;&lt;p&gt;&lt;strong&gt;' . __( 'Warning:' ) . '&lt;/strong&gt; ' . sprintf(
			/* translators: %s: URL to Plugins screen. */
			__( 'Please &lt;a href="%s.html"&gt;deactivate your plugins&lt;/a&gt; before enabling the Network feature.' ),
			admin_url( 'plugins.php?plugin_status=active' )
		) . '&lt;/p&gt;&lt;/div&gt;';
		echo '&lt;p&gt;' . __( 'Once the network is created, you may reactivate your plugins.' ) . '&lt;/p&gt;';
		echo '&lt;/div&gt;';
		require_once ABSPATH . 'wp-admin/admin-footer.php';
		die();
	}

	$hostname  = get_clean_basedomain();
	$has_ports = strstr( $hostname, ':' );
	if ( ( false !== $has_ports &amp;&amp; ! in_array( $has_ports, array( ':80', ':443' ), true ) ) ) {
		echo '&lt;div class="error"&gt;&lt;p&gt;&lt;strong&gt;' . __( 'Error:' ) . '&lt;/strong&gt; ' . __( 'You cannot install a network of sites with your server address.' ) . '&lt;/p&gt;&lt;/div&gt;';
		echo '&lt;p&gt;' . sprintf(
			/* translators: %s: Port number. */
			__( 'You cannot use port numbers such as %s.' ),
			'&lt;code&gt;' . $has_ports . '&lt;/code&gt;'
		) . '&lt;/p&gt;';
		echo '&lt;a href="' . esc_url( admin_url() ) . '.html"&gt;' . __( 'Go to Dashboard' ) . '&lt;/a&gt;';
		echo '&lt;/div&gt;';
		require_once ABSPATH . 'wp-admin/admin-footer.php';
		die();
	}

	echo '&lt;form method="post"&gt;';

	wp_nonce_field( 'install-network-1' );

	$error_codes = array();
	if ( is_wp_error( $errors ) ) {
		echo '&lt;div class="error"&gt;&lt;p&gt;&lt;strong&gt;' . __( 'Error: The network could not be created.' ) . '&lt;/strong&gt;&lt;/p&gt;';
		foreach ( $errors-&gt;get_error_messages() as $error ) {
			echo "&lt;p&gt;$error&lt;/p&gt;";
		}
		echo '&lt;/div&gt;';
		$error_codes = $errors-&gt;get_error_codes();
	}

	if ( ! empty( $_POST['sitename'] ) &amp;&amp; ! in_array( 'empty_sitename', $error_codes, true ) ) {
		$site_name = $_POST['sitename'];
	} else {
		/* translators: %s: Default network title. */
		$site_name = sprintf( __( '%s Sites' ), get_option( 'blogname' ) );
	}

	if ( ! empty( $_POST['email'] ) &amp;&amp; ! in_array( 'invalid_email', $error_codes, true ) ) {
		$admin_email = $_POST['email'];
	} else {
		$admin_email = get_option( 'admin_email' );
	}
	?&gt;
	&lt;p&gt;&lt;?php _e( 'Welcome to the Network installation process!' ); ?&gt;&lt;/p&gt;
	&lt;p&gt;&lt;?php _e( 'Fill in the information below and you&amp;#8217;ll be on your way to creating a network of WordPress sites. Configuration files will be created in the next step.' ); ?&gt;&lt;/p&gt;
	&lt;?php

	if ( isset( $_POST['subdomain_install'] ) ) {
		$subdomain_install = (bool) $_POST['subdomain_install'];
	} elseif ( apache_mod_loaded( 'mod_rewrite' ) ) { // Assume nothing.
		$subdomain_install = true;
	} elseif ( ! allow_subdirectory_install() ) {
		$subdomain_install = true;
	} else {
		$subdomain_install = false;
		$got_mod_rewrite   = got_mod_rewrite();
		if ( $got_mod_rewrite ) { // Dangerous assumptions.
			echo '&lt;div class="updated inline"&gt;&lt;p&gt;&lt;strong&gt;' . __( 'Note:' ) . '&lt;/strong&gt; ';
			printf(
				/* translators: %s: mod_rewrite */
				__( 'Please make sure the Apache %s module is installed as it will be used at the end of this installation.' ),
				'&lt;code&gt;mod_rewrite&lt;/code&gt;'
			);
			echo '&lt;/p&gt;';
		} elseif ( $is_apache ) {
			echo '&lt;div class="error inline"&gt;&lt;p&gt;&lt;strong&gt;' . __( 'Warning:' ) . '&lt;/strong&gt; ';
			printf(
				/* translators: %s: mod_rewrite */
				__( 'It looks like the Apache %s module is not installed.' ),
				'&lt;code&gt;mod_rewrite&lt;/code&gt;'
			);
			echo '&lt;/p&gt;';
		}

		if ( $got_mod_rewrite || $is_apache ) { // Protect against mod_rewrite mimicry (but ! Apache).
			echo '&lt;p&gt;';
			printf(
				/* translators: 1: mod_rewrite, 2: mod_rewrite documentation URL, 3: Google search for mod_rewrite. */
				__( 'If %1$s is disabled, ask your administrator to enable that module, or look at the &lt;a href="%2$s.html"&gt;Apache documentation&lt;/a&gt; or &lt;a href="%3$s.html"&gt;elsewhere&lt;/a&gt; for help setting it up.' ),
				'&lt;code&gt;mod_rewrite&lt;/code&gt;',
				'https://httpd.apache.org/docs/mod/mod_rewrite.html',
				'https://www.google.com/search?q=apache+mod_rewrite'
			);
			echo '&lt;/p&gt;&lt;/div&gt;';
		}
	}

	if ( allow_subdomain_install() &amp;&amp; allow_subdirectory_install() ) :
		?&gt;
		&lt;h3&gt;&lt;?php esc_html_e( 'Addresses of Sites in your Network' ); ?&gt;&lt;/h3&gt;
		&lt;p&gt;&lt;?php _e( 'Please choose whether you would like sites in your WordPress network to use sub-domains or sub-directories.' ); ?&gt;
			&lt;strong&gt;&lt;?php _e( 'You cannot change this later.' ); ?&gt;&lt;/strong&gt;&lt;/p&gt;
		&lt;p&gt;&lt;?php _e( 'You will need a wildcard DNS record if you are going to use the virtual host (sub-domain) functionality.' ); ?&gt;&lt;/p&gt;
		&lt;?php // @todo Link to an MS readme? ?&gt;
		&lt;table class="form-table" role="presentation"&gt;
			&lt;tr&gt;
				&lt;th&gt;&lt;label&gt;&lt;input type="radio" name="subdomain_install" value="1"&lt;?php checked( $subdomain_install ); ?&gt; /&gt; &lt;?php _e( 'Sub-domains' ); ?&gt;&lt;/label&gt;&lt;/th&gt;
				&lt;td&gt;
				&lt;?php
				printf(
					/* translators: 1: Host name. */
					_x( 'like &lt;code&gt;site1.%1$s&lt;/code&gt; and &lt;code&gt;site2.%1$s&lt;/code&gt;', 'subdomain examples' ),
					$hostname
				);
				?&gt;
				&lt;/td&gt;
			&lt;/tr&gt;
			&lt;tr&gt;
				&lt;th&gt;&lt;label&gt;&lt;input type="radio" name="subdomain_install" value="0"&lt;?php checked( ! $subdomain_install ); ?&gt; /&gt; &lt;?php _e( 'Sub-directories' ); ?&gt;&lt;/label&gt;&lt;/th&gt;
				&lt;td&gt;
				&lt;?php
				printf(
					/* translators: 1: Host name. */
					_x( 'like &lt;code&gt;%1$s/site1&lt;/code&gt; and &lt;code&gt;%1$s/site2&lt;/code&gt;', 'subdirectory examples' ),
					$hostname
				);
				?&gt;
				&lt;/td&gt;
			&lt;/tr&gt;
		&lt;/table&gt;

		&lt;?php
	endif;

	if ( WP_CONTENT_DIR !== ABSPATH . 'wp-content' &amp;&amp; ( allow_subdirectory_install() || ! allow_subdomain_install() ) ) {
		echo '&lt;div class="error inline"&gt;&lt;p&gt;&lt;strong&gt;' . __( 'Warning:' ) . '&lt;/strong&gt; ' . __( 'Subdirectory networks may not be fully compatible with custom wp-content directories.' ) . '&lt;/p&gt;&lt;/div&gt;';
	}

	$is_www = ( 0 === strpos( $hostname, 'www.' ) );
	if ( $is_www ) :
		?&gt;
		&lt;h3&gt;&lt;?php esc_html_e( 'Server Address' ); ?&gt;&lt;/h3&gt;
		&lt;p&gt;
		&lt;?php
		printf(
			/* translators: 1: Site URL, 2: Host name, 3: www. */
			__( 'You should consider changing your site domain to %1$s before enabling the network feature. It will still be possible to visit your site using the %3$s prefix with an address like %2$s but any links will not have the %3$s prefix.' ),
			'&lt;code&gt;' . substr( $hostname, 4 ) . '&lt;/code&gt;',
			'&lt;code&gt;' . $hostname . '&lt;/code&gt;',
			'&lt;code&gt;www&lt;/code&gt;'
		);
		?&gt;
		&lt;/p&gt;
		&lt;table class="form-table" role="presentation"&gt;
			&lt;tr&gt;
			&lt;th scope='row'&gt;&lt;?php esc_html_e( 'Server Address' ); ?&gt;&lt;/th&gt;
			&lt;td&gt;
				&lt;?php
					printf(
						/* translators: %s: Host name. */
						__( 'The internet address of your network will be %s.' ),
						'&lt;code&gt;' . $hostname . '&lt;/code&gt;'
					);
				?&gt;
				&lt;/td&gt;
			&lt;/tr&gt;
		&lt;/table&gt;
		&lt;?php endif; ?&gt;

		&lt;h3&gt;&lt;?php esc_html_e( 'Network Details' ); ?&gt;&lt;/h3&gt;
		&lt;table class="form-table" role="presentation"&gt;
		&lt;?php if ( 'localhost' === $hostname ) : ?&gt;
			&lt;tr&gt;
				&lt;th scope="row"&gt;&lt;?php esc_html_e( 'Sub-directory Installation' ); ?&gt;&lt;/th&gt;
				&lt;td&gt;
				&lt;?php
					printf(
						/* translators: 1: localhost, 2: localhost.localdomain */
						__( 'Because you are using %1$s, the sites in your WordPress network must use sub-directories. Consider using %2$s if you wish to use sub-domains.' ),
						'&lt;code&gt;localhost&lt;/code&gt;',
						'&lt;code&gt;localhost.localdomain&lt;/code&gt;'
					);
					// Uh oh:
				if ( ! allow_subdirectory_install() ) {
					echo ' &lt;strong&gt;' . __( 'Warning:' ) . ' ' . __( 'The main site in a sub-directory installation will need to use a modified permalink structure, potentially breaking existing links.' ) . '&lt;/strong&gt;';
				}
				?&gt;
				&lt;/td&gt;
			&lt;/tr&gt;
		&lt;?php elseif ( ! allow_subdomain_install() ) : ?&gt;
			&lt;tr&gt;
				&lt;th scope="row"&gt;&lt;?php esc_html_e( 'Sub-directory Installation' ); ?&gt;&lt;/th&gt;
				&lt;td&gt;
				&lt;?php
					_e( 'Because your installation is in a directory, the sites in your WordPress network must use sub-directories.' );
					// Uh oh:
				if ( ! allow_subdirectory_install() ) {
					echo ' &lt;strong&gt;' . __( 'Warning:' ) . ' ' . __( 'The main site in a sub-directory installation will need to use a modified permalink structure, potentially breaking existing links.' ) . '&lt;/strong&gt;';
				}
				?&gt;
				&lt;/td&gt;
			&lt;/tr&gt;
		&lt;?php elseif ( ! allow_subdirectory_install() ) : ?&gt;
			&lt;tr&gt;
				&lt;th scope="row"&gt;&lt;?php esc_html_e( 'Sub-domain Installation' ); ?&gt;&lt;/th&gt;
				&lt;td&gt;
				&lt;?php
				_e( 'Because your installation is not new, the sites in your WordPress network must use sub-domains.' );
					echo ' &lt;strong&gt;' . __( 'The main site in a sub-directory installation will need to use a modified permalink structure, potentially breaking existing links.' ) . '&lt;/strong&gt;';
				?&gt;
				&lt;/td&gt;
			&lt;/tr&gt;
		&lt;?php endif; ?&gt;
		&lt;?php if ( ! $is_www ) : ?&gt;
			&lt;tr&gt;
				&lt;th scope='row'&gt;&lt;?php esc_html_e( 'Server Address' ); ?&gt;&lt;/th&gt;
				&lt;td&gt;
					&lt;?php
					printf(
						/* translators: %s: Host name. */
						__( 'The internet address of your network will be %s.' ),
						'&lt;code&gt;' . $hostname . '&lt;/code&gt;'
					);
					?&gt;
				&lt;/td&gt;
			&lt;/tr&gt;
		&lt;?php endif; ?&gt;
			&lt;tr&gt;
				&lt;th scope='row'&gt;&lt;label for="sitename"&gt;&lt;?php esc_html_e( 'Network Title' ); ?&gt;&lt;/label&gt;&lt;/th&gt;
				&lt;td&gt;
					&lt;input name='sitename' id='sitename' type='text' size='45' value='&lt;?php echo esc_attr( $site_name ); ?&gt;' /&gt;
					&lt;p class="description"&gt;
						&lt;?php _e( 'What would you like to call your network?' ); ?&gt;
					&lt;/p&gt;
				&lt;/td&gt;
			&lt;/tr&gt;
			&lt;tr&gt;
				&lt;th scope='row'&gt;&lt;label for="email"&gt;&lt;?php esc_html_e( 'Network Admin Email' ); ?&gt;&lt;/label&gt;&lt;/th&gt;
				&lt;td&gt;
					&lt;input name='email' id='email' type='text' size='45' value='&lt;?php echo esc_attr( $admin_email ); ?&gt;' /&gt;
					&lt;p class="description"&gt;
						&lt;?php _e( 'Your email address.' ); ?&gt;
					&lt;/p&gt;
				&lt;/td&gt;
			&lt;/tr&gt;
		&lt;/table&gt;
		&lt;?php submit_button( __( 'Install' ), 'primary', 'submit' ); ?&gt;
	&lt;/form&gt;
	&lt;?php
}
</code></pre>  </section>  <section> <header class="toc-header"><h2 id="related">Related</h2></header> <article class="uses"> <header class="toc-header"><h3 id="uses">Uses</h3></header> <table id="uses-table" data-show="5">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="get_clean_basedomain.html">get_clean_basedomain()</a> <span>wp-admin/includes/network.php</span> </td> <td class="related-desc"> <p>Get base domain of network.</p> </td> </tr> <tr> <td class="related-title"> <a href="checked.html">checked()</a> <span>wp-includes/general-template.php</span> </td> <td class="related-desc"> <p>Outputs the HTML checked attribute.</p> </td> </tr> <tr> <td class="related-title"> <a href="allow_subdomain_install.html">allow_subdomain_install()</a> <span>wp-admin/includes/network.php</span> </td> <td class="related-desc"> <p>Allow subdomain installation</p> </td> </tr> <tr> <td class="related-title"> <a href="got_mod_rewrite.html">got_mod_rewrite()</a> <span>wp-admin/includes/misc.php</span> </td> <td class="related-desc"> <p>Returns whether the server is running Apache with the mod_rewrite module loaded.</p> </td> </tr> <tr> <td class="related-title"> <a href="submit_button.html">submit_button()</a> <span>wp-admin/includes/template.php</span> </td> <td class="related-desc"> <p>Echoes a submit button, with provided text and appropriate class(es).</p> </td> </tr> <tr> <td class="related-title"> <a href="esc_html_e.html">esc_html_e()</a> <span>wp-includes/l10n.php</span> </td> <td class="related-desc"> <p>Displays translated text that has been escaped for safe use in HTML output.</p> </td> </tr> <tr> <td class="related-title"> <a href="allow_subdirectory_install.html">allow_subdirectory_install()</a> <span>wp-admin/includes/network.php</span> </td> <td class="related-desc"> <p>Allow subdirectory installation.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_nonce_field.html">wp_nonce_field()</a> <span>wp-includes/functions.php</span> </td> <td class="related-desc"> <p>Retrieves or display nonce hidden field for forms.</p> </td> </tr> <tr> <td class="related-title"> <a href="apache_mod_loaded.html">apache_mod_loaded()</a> <span>wp-includes/functions.php</span> </td> <td class="related-desc"> <p>Determines whether the specified module exist in the Apache config.</p> </td> </tr> <tr> <td class="related-title"> <a href="get_option.html">get_option()</a> <span>wp-includes/option.php</span> </td> <td class="related-desc"> <p>Retrieves an option value based on an option name.</p> </td> </tr> <tr> <td class="related-title"> <a href="admin_url.html">admin_url()</a> <span>wp-includes/link-template.php</span> </td> <td class="related-desc"> <p>Retrieves the URL to the admin area for the current site.</p> </td> </tr> <tr> <td class="related-title"> <a href="_x.html">_x()</a> <span>wp-includes/l10n.php</span> </td> <td class="related-desc"> <p>Retrieves translated string with gettext context.</p> </td> </tr> <tr> <td class="related-title"> <a href="esc_attr.html">esc_attr()</a> <span>wp-includes/formatting.php</span> </td> <td class="related-desc"> <p>Escaping for HTML attributes.</p> </td> </tr> <tr> <td class="related-title"> <a href="esc_url.html">esc_url()</a> <span>wp-includes/formatting.php</span> </td> <td class="related-desc"> <p>Checks and cleans a URL.</p> </td> </tr> <tr> <td class="related-title"> <a href="_e.html">_e()</a> <span>wp-includes/l10n.php</span> </td> <td class="related-desc"> <p>Displays translated text.</p> </td> </tr> <tr> <td class="related-title"> <a href="__.html">__()</a> <span>wp-includes/l10n.php</span> </td> <td class="related-desc"> <p>Retrieves the translation of $text.</p> </td> </tr> <tr> <td class="related-title"> <a href="is_wp_error.html">is_wp_error()</a> <span>wp-includes/load.php</span> </td> <td class="related-desc"> <p>Checks whether the given variable is a WordPress Error.</p> </td> </tr> </tbody>

</table>   </article> </section>  <section> <header class="toc-header"><h2 id="changelog">Changelog</h2></header> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/3.0.0/" alt="WordPress 3.0.0">3.0.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2003&ndash;2022 WordPress Foundation<br>Licensed under the GNU GPLv2+ License.<br>
    <a href="https://developer.wordpress.org/reference/functions/network_step1" class="_attribution-link">https://developer.wordpress.org/reference/functions/network_step1</a>
  </p>
</div>
