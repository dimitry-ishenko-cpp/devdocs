<h1 class="wp-block-wporg-code-reference-title">register_post_type( <span class="arg-type">string</span> <span class="arg-name">$post_type</span>, <span class="arg-type">array|string</span> <span class="arg-name">$args</span> = <span class="arg-default">array()</span> ): <span class="return-type"><a href="../classes/wp_post_type.html" rel="class">WP_Post_Type</a>|<a href="../classes/wp_error.html" rel="class">WP_Error</a></span>
</h1> <section><p>Registers a post type.</p> </section> <section><h2 id="description">Description</h2> <p>Note: Post type registrations should not be hooked before the <a href="../hooks/init.html">‘init’</a> action. Also, any taxonomy connections should be registered via the <code>$taxonomies</code> argument to ensure consistency when hooks such as <a href="../hooks/parse_query.html">‘parse_query’</a> or <a href="../hooks/pre_get_posts.html">‘pre_get_posts’</a> are used.</p> <p>Post types can support any number of built-in core features such as meta boxes, custom fields, post thumbnails, post statuses, comments, and more. See the <code>$supports</code> argument for a complete list of supported features.</p> </section> <section><h2 id="parameters">Parameters</h2> <dl>
<dt>
<code>$post_type</code><span class="type"><span class="string">string</span></span><span class="required">required</span>
</dt>
<dd><div class="desc"><span class="description">Post type key. Must not exceed 20 characters and may only contain lowercase alphanumeric characters, dashes, and underscores. See <a href="sanitize_key.html" rel="function">sanitize_key()</a> .</span></div></dd>
<dt>
<code>$args</code><span class="type"><span class="array">array</span>|<span class="string">string</span></span><span class="required">optional</span>
</dt>
<dd>
<div class="desc"><span class="description">Array or string of arguments for registering a post type.<br> <ul class="param-hash">
<li>
<code>label</code> <span class="type">string</span><div class="desc">Name of the post type shown in the menu. Usually plural.<br> Default is value of $labels[<code>'name'</code>].</div>
</li> <li>
<code>labels</code> <span class="type">string[]</span><div class="desc">An array of labels for this post type. If not set, post labels are inherited for non-hierarchical types and page labels for hierarchical ones. See <a href="get_post_type_labels.html" rel="function">get_post_type_labels()</a> for a full list of supported labels.</div>
</li> <li>
<code>description</code> <span class="type">string</span><div class="desc">A short descriptive summary of what the post type is.<br> </div>
</li> <li>
<code>public</code> <span class="type">bool</span><div class="desc">Whether a post type is intended for use publicly either via the admin interface or by front-end users. While the default settings of $exclude_from_search, $publicly_queryable, $show_ui, and $show_in_nav_menus are inherited from $public, each does not rely on this relationship and controls a very specific intention.<br> Default false.</div>
</li> <li>
<code>hierarchical</code> <span class="type">bool</span><div class="desc">Whether the post type is hierarchical (e.g. page). Default false.</div>
</li> <li>
<code>exclude_from_search</code> <span class="type">bool</span><div class="desc">Whether to exclude posts with this post type from front end search results. Default is the opposite value of $public.</div>
</li> <li>
<code>publicly_queryable</code> <span class="type">bool</span><div class="desc">Whether queries can be performed on the front end for the post type as part of parse_request(). Endpoints would include: * ?post_type={post_type_key} * ?{post_type_key}={single_post_slug} * ?{post_type_query_var}={single_post_slug} If not set, the default is inherited from $public.</div>
</li> <li>
<code>show_ui</code> <span class="type">bool</span><div class="desc">Whether to generate and allow a UI for managing this post type in the admin. Default is value of $public.</div>
</li> <li>
<code>show_in_menu</code> <span class="type">bool|string</span><div class="desc">Where to show the post type in the admin menu. To work, $show_ui must be true. If true, the post type is shown in its own top level menu. If false, no menu is shown. If a string of an existing top level menu (<code>'tools.php'</code> or <code>'edit.php?post_type=page'</code>, for example), the post type will be placed as a sub-menu of that.<br> Default is value of $show_ui.</div>
</li> <li>
<code>show_in_nav_menus</code> <span class="type">bool</span><div class="desc">Makes this post type available for selection in navigation menus.<br> Default is value of $public.</div>
</li> <li>
<code>show_in_admin_bar</code> <span class="type">bool</span><div class="desc">Makes this post type available via the admin bar. Default is value of $show_in_menu.</div>
</li> <li>
<code>show_in_rest</code> <span class="type">bool</span><div class="desc">Whether to include the post type in the REST API. Set this to true for the post type to be available in the block editor.</div>
</li> <li>
<code>rest_base</code> <span class="type">string</span><div class="desc">To change the base URL of REST API route. Default is $post_type.</div>
</li> <li>
<code>rest_namespace</code> <span class="type">string</span><div class="desc">To change the namespace URL of REST API route. Default is wp/v2.</div>
</li> <li>
<code>rest_controller_class</code> <span class="type">string</span><div class="desc">REST API controller class name. Default is ‘<a href="../classes/wp_rest_posts_controller.html" rel="class">WP_REST_Posts_Controller</a>‘.</div>
</li> <li>
<code>autosave_rest_controller_class</code> <span class="type">string|bool</span><div class="desc">REST API controller class name. Default is ‘<a href="../classes/wp_rest_autosaves_controller.html" rel="class">WP_REST_Autosaves_Controller</a>‘.</div>
</li> <li>
<code>revisions_rest_controller_class</code> <span class="type">string|bool</span><div class="desc">REST API controller class name. Default is ‘<a href="../classes/wp_rest_revisions_controller.html" rel="class">WP_REST_Revisions_Controller</a>‘.</div>
</li> <li>
<code>late_route_registration</code> <span class="type">bool</span><div class="desc">A flag to direct the REST API controllers for autosave / revisions should be registered before/after the post type controller.</div>
</li> <li>
<code>menu_position</code> <span class="type">int</span><div class="desc">The position in the menu order the post type should appear. To work, $show_in_menu must be true. Default null (at the bottom).</div>
</li> <li>
<code>menu_icon</code> <span class="type">string</span><div class="desc">The URL to the icon to be used for this menu. Pass a base64-encoded SVG using a data URI, which will be colored to match the color scheme — this should begin with <code>'data:image/svg+xml;base64,'</code>. Pass the name of a Dashicons helper class to use a font icon, e.g.<br> <code>'dashicons-chart-pie'</code>. Pass <code>'none'</code> to leave div.wp-menu-image empty so an icon can be added via CSS. Defaults to use the posts icon.</div>
</li> <li>
<code>capability_type</code> <span class="type">string|array</span><div class="desc">The string to use to build the read, edit, and delete capabilities.<br> May be passed as an array to allow for alternative plurals when using this argument as a base to construct the capabilities, e.g.<br> array(<code>'story'</code>, <code>'stories'</code>). Default <code>'post'</code>.</div>
</li> <li>
<code>capabilities</code> <span class="type">string[]</span><div class="desc">Array of capabilities for this post type. $capability_type is used as a base to construct capabilities by default.<br> See <a href="get_post_type_capabilities.html" rel="function">get_post_type_capabilities()</a> .</div>
</li> <li>
<code>map_meta_cap</code> <span class="type">bool</span><div class="desc">Whether to use the internal default meta capability handling.<br> Default false.</div>
</li> <li>
<code>supports</code> <span class="type">array|false</span><div class="desc">Core feature(s) the post type supports. Serves as an alias for calling <a href="add_post_type_support.html" rel="function">add_post_type_support()</a> directly. Core features include <code>'title'</code>, <code>'editor'</code>, <code>'comments'</code>, <code>'revisions'</code>, <code>'trackbacks'</code>, <code>'author'</code>, <code>'excerpt'</code>, <code>'page-attributes'</code>, <code>'thumbnail'</code>, <code>'custom-fields'</code>, and <code>'post-formats'</code>.<br> Additionally, the <code>'revisions'</code> feature dictates whether the post type will store revisions, the <code>'autosave'</code> feature dictates whether the post type will be autosaved, and the <code>'comments'</code> feature dictates whether the comments count will show on the edit screen. For backward compatibility reasons, adding <code>'editor'</code> support implies <code>'autosave'</code> support too. A feature can also be specified as an array of arguments to provide additional information about supporting that feature.<br> Example: <code>array( 'my_feature', array( 'field' =&gt; 'value' ) )</code>.<br> If false, no features will be added.<br> Default is an array containing <code>'title'</code> and <code>'editor'</code>.</div>
</li> <li>
<code>register_meta_box_cb</code> <span class="type">callable</span><div class="desc">Provide a callback function that sets up the meta boxes for the edit form. Do <a href="remove_meta_box.html" rel="function">remove_meta_box()</a> and <a href="add_meta_box.html" rel="function">add_meta_box()</a> calls in the callback. Default null.</div>
</li> <li>
<code>taxonomies</code> <span class="type">string[]</span><div class="desc">An array of taxonomy identifiers that will be registered for the post type. Taxonomies can be registered later with <a href="register_taxonomy.html" rel="function">register_taxonomy()</a> or <a href="register_taxonomy_for_object_type.html" rel="function">register_taxonomy_for_object_type()</a> .<br> </div>
</li> <li>
<code>has_archive</code> <span class="type">bool|string</span><div class="desc">Whether there should be post type archives, or if a string, the archive slug to use. Will generate the proper rewrite rules if $rewrite is enabled. Default false.</div>
</li> <li>
<code>rewrite</code> <span class="type">bool|array</span><div class="desc"> Triggers the handling of rewrites for this post type. To prevent rewrite, set to false.<br> Defaults to true, using $post_type as slug. To specify rewrite rules, an array can be passed with any of these keys:<ul class="param-hash"> <li>
<code>slug</code> <span class="type">string</span><div class="desc">Customize the permastruct slug. Defaults to $post_type key.</div>
</li> <li>
<code>with_front</code> <span class="type">bool</span><div class="desc">Whether the permastruct should be prepended with WP_Rewrite::$front.<br> Default true.</div>
</li> <li>
<code>feeds</code> <span class="type">bool</span><div class="desc">Whether the feed permastruct should be built for this post type.<br> Default is value of $has_archive.</div>
</li> <li>
<code>pages</code> <span class="type">bool</span><div class="desc">Whether the permastruct should provide for pagination. Default true.</div>
</li> <li>
<code>ep_mask</code> <span class="type">int</span><div class="desc">Endpoint mask to assign. If not specified and permalink_epmask is set, inherits from $permalink_epmask. If not specified and permalink_epmask is not set, defaults to EP_PERMALINK.<br> </div>
</li> <li>
<code>query_var</code> <span class="type">string|bool</span><div class="desc">Sets the query_var key for this post type. Defaults to $post_type key. If false, a post type cannot be loaded at ?{query_var}={post_slug}. If specified as a string, the query ?{query_var_string}={post_slug} will be valid.</div>
</li> <li>
<code>can_export</code> <span class="type">bool</span><div class="desc">Whether to allow this post type to be exported. Default true.</div>
</li> <li>
<code>delete_with_user</code> <span class="type">bool</span><div class="desc">Whether to delete posts of this type when deleting a user.<br> <ul>
<li>If true, posts of this type belonging to the user will be moved to Trash when the user is deleted.</li> <li>If false, posts of this type belonging to the user will *not* be trashed or deleted.</li> <li>If not set (the default), posts are trashed if post type supports the <code>'author'</code> feature. Otherwise posts are not trashed or deleted.</li>
</ul> Default null.</div>
</li> <li>
<code>template</code> <span class="type">array</span><div class="desc">Array of blocks to use as the default initial state for an editor session. Each item should be an array containing block name and optional attributes. </div>
</li> <li>
<code>template_lock</code> <span class="type">string|false</span><div class="desc">Whether the block template should be locked if $template is set.<br> <ul>
<li>If set to <code>'all'</code>, the user is unable to insert new blocks, move existing blocks and delete blocks.</li> <li>If set to <code>'insert'</code>, the user is able to move existing blocks but is unable to insert new blocks and delete blocks.</li>
</ul> Default false.</div>
</li> <li>
<code>_builtin</code> <span class="type">bool</span><div class="desc">FOR INTERNAL USE ONLY! True if this post type is a native or "built-in" post_type. Default false.</div>
</li> <li>
<code>_edit_link</code> <span class="type">string</span><div class="desc">FOR INTERNAL USE ONLY! URL segment to use for edit link of this post type. Default <code>'post.php?post=%d'</code>.</div>
</li> </ul> <details class="extended-description"><summary>More Arguments from get_post_type_capabilities( … $args )</summary><span class="description">Post type registration arguments.</span></details>
</div>
<p class="default">Default:<code>array()</code></p> <section><h2 id="return">Return</h2> <span class="return-type"><a href="../classes/wp_post_type.html" rel="class">WP_Post_Type</a>|<a href="../classes/wp_error.html" rel="class">WP_Error</a></span> The registered post type object on success, <a href="../classes/wp_error.html" rel="class">WP_Error</a> object on failure.</section> <section><h2 id="more-information">More Information</h2> <p>You can use this function in themes and plugins. However, if you use it in a theme, your post type will disappear from the admin if a user switches away from your theme. See <a title="Must Use Plugins" href="https://wordpress.org/support/article/must-use-plugins/">Must Use Plugins</a> If you want to keep your changes e.g. post type, even if you switch between your themes.</p> <h3 id="taxonomies">Taxonomies</h3> <p>When registering a post type, always register your taxonomies using the <code>taxonomies</code> argument. If you do not, the taxonomies and post type will not be recognized as connected when using filters such as <code>parse_query</code> or <code>pre_get_posts</code>. This can lead to unexpected results and failures.</p> <p>Even if you register a taxonomy while creating the post type, you must still explicitly register and define the taxonomy using <a title="Function Reference/register taxonomy" href="register_taxonomy.html">register_taxonomy()</a>.</p> <h4 class="wp-block-heading">Reserved Post Types</h4> <p>The following post types are reserved and are already used by WordPress.</p> <ul class="wp-block-list"> <li>post</li> <li>page</li> <li>attachment</li> <li>revision</li> <li>nav_menu_item</li> <li>custom_css</li> <li>customize_changeset</li> <li>oembed_cache</li> <li>user_request</li> <li>wp_block</li> <li>wp_global_styles</li> <li>wp_navigation</li> <li>wp_template</li> <li>wp_template_part</li> </ul> <p>In addition, the following post types should not be used as they interfere with other WordPress functions.</p> <ul class="wp-block-list"> <li>action</li> <li>author</li> <li>order</li> <li>theme</li> </ul> <p>In general, you should always prefix your post types, or specify a custom `query_var`, to avoid conflicting with existing WordPress query variables.</p> <p>More information: <a title="Post Types" href="https://wordpress.org/support/article/post-types/">Post Types</a>.</p> <h3 id="parameter-detail-information">Parameter detail information</h3> <div> <dl> <dt> <h4><tt>description</tt></h4> </dt> <dd>(<i>string</i>) (<i>optional</i>) A short descriptive summary of what the post type is. <dl> <dd>Default: blank</dd> </dl> </dd> </dl> <p>The only way to read that field is using this code:</p> <pre data-language="php">$obj = get_post_type_object( 'your_post_type_name' ); 
echo esc_html( $obj-&gt;description );</pre> </div> <div> <dl> <dt> <h4><tt>public</tt></h4> </dt> <dd>(<i>boolean</i>) (<i>optional</i>) Controls how the type is visible to authors (<code>show_in_nav_menus</code>, <code>show_ui</code>) and readers (<code>exclude_from_search</code>, <code>publicly_queryable</code>). <dl> <dd>Default: false</dd> </dl> <ul> <li>‘<b>true’</b> – Implies <code>exclude_from_search: false</code>, <code>publicly_queryable: true</code>, <code>show_in_nav_menus: true</code>, and <code>show_ui:true</code>. The built-in types <i>attachment</i>, <i>page</i>, and <i>post</i> are similar to this.</li> <li>‘<b>false’</b> – Implies <code>exclude_from_search: true</code>, <code>publicly_queryable: false</code>, <code>show_in_nav_menus: false</code>, and <code>show_ui: false</code>. The built-in types <i>nav_menu_item</i> and <i>revision</i> are similar to this. Best used if you’ll provide your own editing and viewing interfaces (or none at all).</li> </ul> </dd> </dl> <dl> <dd>If no value is specified for <code>exclude_from_search</code>, <code>publicly_queryable</code>, <code>show_in_nav_menus</code>, or <code>show_ui</code>, they inherit their values from <code>public</code>.</dd> </dl> </div> <div> <dl> <dt> <h4><tt>exclude_from_search</tt></h4> </dt> <dd>(<i>boolean</i>) (<i>importance</i>) Whether to exclude posts with this post type from front end search results. <dl> <dd>Default: value of the <b>opposite</b> of <i>public</i> argument</dd> </dl> <ul> <li>‘true’ – site/?s=search-term will <b>not</b> include posts of this post type.</li> <li>‘false’ – site/?s=search-term will include posts of this post type.</li> </ul> </dd>  <dd>
<b>Note:</b> If you want to show the posts’s list that are associated to taxonomy’s terms, you must set exclude_from_search to false (ie : for call site_domaine/?taxonomy_slug=term_slug or site_domaine/taxonomy_slug/term_slug). If you set to true, on the taxonomy page (ex: taxonomy.php) WordPress will not find your posts and/or pagination will make 404 error…</dd> </dl> </div> <div> <dl> <dt> <h4><tt>publicly_queryable</tt></h4> </dt> <dd>(<i>boolean</i>) (<i>optional</i>) Whether queries can be performed on the front end as part of parse_request(). <dl> <dd>Default: value of <i>public</i> argument</dd> </dl> </dd> <dd>
<b>Note:</b> The queries affected include the following (also initiated when rewrites are handled) <ul> <li> ?post_type={post_type_key}</li> <li> ?{post_type_key}={single_post_slug}</li> <li> ?{post_type_query_var}={single_post_slug}</li> </ul> </dd> </dl> <dl> <dd>
<b>Note:</b> If query_var is empty, null, or a boolean FALSE, WordPress will still attempt to interpret it (4.2.2) and previews/views of your custom post will return 404s.</dd> </dl> </div> <div> <dl> <dt> <h4><tt>show_ui</tt></h4> </dt> <dd>(<i>boolean</i>) (<i>optional</i>) Whether to generate a default UI for managing this post type in the admin. <dl> <dd>Default: value of <i>public</i> argument</dd> </dl> <ul> <li>‘false’ – do not display a user-interface for this post type</li> <li>‘true’ – display a user-interface (admin panel) for this post type</li> </ul> </dd> <dd>Note: <tt>_built-in</tt> post types, such as post and page, are intentionally set to false.</dd> </dl> </div> <div> <dl> <dt> <h4><tt>show_in_nav_menus</tt></h4> </dt> <dd>(<i>boolean</i>) (<i>optional</i>) Whether post_type is available for selection in navigation menus. <dl> <dd>Default: value of <i>public</i> argument</dd> </dl> </dd> </dl> </div> <div> <dl> <dt> <h4><tt>show_in_menu</tt></h4> </dt> <dd>(<i>boolean or string</i>) (<i>optional</i>) Where to show the post type in the admin menu. <tt>show_ui</tt> must be <tt>true</tt>. <dl> <dd>Default: value of show_ui argument</dd> </dl> <ul> <li>‘false’ – do not display in the admin menu</li> <li>‘true’ – display as a top level menu</li> <li>‘some string’ – If an existing top level page such as ‘tools.php’ or ‘edit.php?post_type=page’, the post type will be placed as a sub menu of that.</li> </ul> </dd> <dd>Note: When using ‘some string’ to show as a submenu of a menu page created by a plugin, this item will become the first submenu item, and replace the location of the top-level link. If this isn’t desired, the plugin that creates the menu page needs to set the add_action priority for admin_menu to 9 or lower.</dd> <dd>Note: As this one inherits its value from <tt>show_ui</tt>, which inherits its value from <tt>public</tt>, it seems to be the most reliable property to determine, if a post type is meant to be publicly useable. At least this works for <tt>_builtin</tt> post types and only gives back <tt>post</tt> and <tt>page</tt>.</dd> </dl> </div> <div> <dl> <dt> <h4><tt>show_in_admin_bar</tt></h4> </dt> <dd>(<i>boolean</i>) (<i>optional</i>) Whether to make this post type available in the WordPress admin bar. <dl> <dd>Default: value of the show_in_menu argument</dd> </dl> </dd> </dl> </div> <div> <dl> <dt> <h4><tt>menu_position</tt></h4> </dt> <dd>(<i>integer</i>) (<i>optional</i>) The position in the menu order the post type should appear. <tt>show_in_menu</tt> must be <tt>true</tt>. <dl> <dd>Default: null – defaults to below Comments</dd> </dl> <ul> <li>5 – below Posts</li> <li>10 – below Media</li> <li>15 – below Links</li> <li>20 – below Pages</li> <li>25 – below comments</li> <li>60 – below first separator</li> <li>65 – below Plugins</li> <li>70 – below Users</li> <li>75 – below Tools</li> <li>80 – below Settings</li> <li>100 – below second separator</li> </ul> </dd> </dl> </div> <div> <dl> <dt> <h4><tt>menu_icon</tt></h4> </dt> <dd>(<i>string</i>) (<i>optional</i>) The url to the icon to be used for this menu or the name of the icon from the iconfont <a class="external autonumber" href="https://github.com/WordPress/dashicons" rel="nofollow">[1]</a> <dl> <dd>Default: null – defaults to the posts icon</dd> </dl> </dd> </dl> <dl> <dd>Examples <ul> <li>‘dashicons-video-alt’ (Uses the video icon from Dashicons<a class="external autonumber" href="https://developer.wordpress.org/resource/dashicons/" rel="nofollow">[2]</a>)</li> <li>‘<a href="get_template_directory_uri.html" rel="function">get_template_directory_uri()</a> . “/images/cutom-posttype-icon.png”‘ (Use a image located in the current theme)</li> <li>‘data:image/svg+xml;base64,’ . base64_encode( “&lt;svg version=”1.1″ xmlns=”<a class="external free" href="http://www.w3.org/2000/svg" rel="nofollow">http://www.w3.org/2000/svg</a>” xmlns:xlink=”<a class="external free" href="http://www.w3.org/1999/xlink" rel="nofollow">http://www.w3.org/1999/xlink</a>” x=”0px” y=”0px” width=”20px” height=”20px” viewBox=”0 0 459 459″&gt; &lt;path fill=”black” d=”POINTS”/&gt;&lt;/svg&gt;” )’ (directly embedding a svg with ‘fill=”black”‘ will allow correct colors. Also see <a class="external autonumber" href="https://stackoverflow.com/a/42265057/933065" rel="nofollow">[3]</a>)</li> </ul> </dd> </dl> </div> <div> <dl> <dt> <h4><tt>capability_type</tt></h4> </dt> <dd>(<i>string or array</i>) (<i>optional</i>) The string to use to build the read, edit, and delete capabilities. May be passed as an array to allow for alternative plurals when using this argument as a base to construct the capabilities, e.g. array(‘story’, ‘stories’) the first array element will be used for the singular capabilities and the second array element for the plural capabilities, this is instead of the auto generated version if no array is given which would be “storys”. The ‘capability_type’ parameter is used as a base to construct capabilities unless they are explicitly set with the ‘capabilities’ parameter. It seems that `map_meta_cap` needs to be set to false or null, to make this work (see note 2 below). <dl> <dd>Default: “post”</dd> </dl> </dd> </dl> <dl> <dd>
<b>Example</b> with “book” or “array( ‘book’, ‘books’ )” value, it will generate the 7 capabilities equal to set capabilities parameter to this :</dd> </dl> <pre data-language="php">'capabilities' =&gt; array(
  'edit_post'          =&gt; 'edit_book', 
  'read_post'          =&gt; 'read_book', 
  'delete_post'        =&gt; 'delete_book', 
  'edit_posts'         =&gt; 'edit_books', 
  'edit_others_posts'  =&gt; 'edit_others_books', 
  'publish_posts'      =&gt; 'publish_books',       
  'read_private_posts' =&gt; 'read_private_books', 
  'create_posts'       =&gt; 'edit_books', 
),
</pre> <dl> <dd>
<b>Note 1:</b> The “create_posts” capability correspond to “edit_books” so it become equal to “edit_posts”.</dd> <dd>
<b>Note 2:</b> See capabilities note 2 about meta capabilities mapping for custom post type.</dd> </dl> <dl> <dd>You can take a look into the <tt>$GLOBALS['wp_post_types']['your_cpt_name']</tt> array, then you’ll see the following:</dd> </dl> <pre data-language="php">[cap] =&gt; stdClass Object
	(
		// Meta capabilities
		[edit_post] =&gt; edit_book
		[read_post] =&gt; read_book
		[delete_post] =&gt; delete_book

		// Primitive capabilities used outside of map_meta_cap():
		[edit_posts] =&gt; edit_books
		[edit_others_posts] =&gt; edit_others_books
		[publish_posts] =&gt; publish_books
		[read_private_posts] =&gt; read_private_books

		// Primitive capabilities used within map_meta_cap():
		[create_posts] =&gt; edit_books
	)
</pre> <dl> <dd>Some of the capability types that can be used (probably not exhaustive list): <ul> <li>post (default)</li> <li>page</li> </ul> </dd> </dl> <dl> <dd>These built-in types cannot be used: <ul> <li>attachment</li> <li>mediapage</li> </ul> </dd> </dl> <dl> <dd>
<b>Note 3:</b> If you use capabilities parameter, capability_type complete your capabilities.</dd> </dl> </div> <div> <dl> <dt> <h4><tt>capabilities</tt></h4> </dt> <dd>(<i>array</i>) (<i>optional</i>) An array of the capabilities for this post type. <dl> <dd>Default: capability_type is used to construct</dd> </dl> </dd> <dd>By default, eight keys are accepted as part of the capabilities array: <ul> <li>edit_post, read_post, and delete_post – These three are <b>meta capabilities</b>, which are then generally mapped to corresponding <b>primitive capabilities</b> depending on the context, for example the post being edited/read/deleted and the user or role being checked. Thus these capabilities would generally not be granted directly to users or roles.</li> <li>edit_posts – Controls whether objects of this post type can be edited.</li> <li>edit_others_posts – Controls whether objects of this type owned by other users can be edited. If the post type does not support an author, then this will behave like edit_posts.</li> <li>delete_posts – Controls whether objects of this post type can be deleted.</li> <li>publish_posts – Controls publishing objects of this post type.</li> <li>read_private_posts – Controls whether private objects can be read.</li> </ul> </dd> <dd>
<b>Note:</b> 1.) those last four <b>primitive capabilities</b> are checked in core in various locations. 2.) <code>create_posts</code> is automatically mapped to <code>edit_posts</code> by default.</dd> </dl> <dl> <dd>There are also six other <b>primitive capabilities</b> which are not referenced directly in core, except in <a href="map_meta_cap.html" rel="function">map_meta_cap()</a> , which takes the three aforementioned <b>meta capabilities</b> and translates them into one or more <b>primitive capabilities</b> that must then be checked against the user or role, depending on the context. These additional capabilities are only used in <a href="map_meta_cap.html" rel="function">map_meta_cap()</a> . Thus, they are only assigned by default if the post type is registered with <b>the ‘<code>map_meta_cap</code>‘ argument set to true</b> (default is false). <ul> <li>read – Controls whether objects of this post type can be read.</li> <li>delete_private_posts – Controls whether private objects can be deleted.</li> <li>delete_published_posts – Controls whether published objects can be deleted.</li> <li>delete_others_posts – Controls whether objects owned by other users can be can be deleted. If the post type does not support an author, then this will behave like delete_posts.</li> <li>edit_private_posts – Controls whether private objects can be edited.</li> <li>edit_published_posts – Controls whether published objects can be edited.</li> </ul> </dd> </dl> <p>If you assign a <tt>'capability_type'</tt> and then take a look into the <tt>$GLOBALS['wp_post_types']['your_cpt_name']</tt> array, then you’ll see the following:</p> <pre data-language="php">[cap] =&gt; stdClass Object
(
	// Meta capabilities

	[edit_post]		 =&gt; "edit_{$capability_type}"
	[read_post]		 =&gt; "read_{$capability_type}"
	[delete_post]		 =&gt; "delete_{$capability_type}"

	// Primitive capabilities used outside of map_meta_cap():

	[edit_posts]		 =&gt; "edit_{$capability_type}s"
	[edit_others_posts]	 =&gt; "edit_others_{$capability_type}s"
	[publish_posts]		 =&gt; "publish_{$capability_type}s"
	[read_private_posts]	 =&gt; "read_private_{$capability_type}s"

	// Primitive capabilities used within map_meta_cap():

	[read]                   =&gt; "read",
	[delete_posts]           =&gt; "delete_{$capability_type}s"
	[delete_private_posts]   =&gt; "delete_private_{$capability_type}s"
	[delete_published_posts] =&gt; "delete_published_{$capability_type}s"
	[delete_others_posts]    =&gt; "delete_others_{$capability_type}s"
	[edit_private_posts]     =&gt; "edit_private_{$capability_type}s"
	[edit_published_posts]   =&gt; "edit_published_{$capability_type}s"
	[create_posts]           =&gt; "edit_{$capability_type}s"
)
</pre> <p><i>Note the “s” at the end of plural capabilities.</i></p> </div> <div> <dl> <dt> <h4><tt>map_meta_cap</tt></h4> </dt> <dd>(<i>boolean</i>) (<i>optional</i>) Whether to use the internal default meta capability handling. <dl> <dd>Default: null</dd> </dl> </dd> </dl> <dl> <dd>
<b>Note:</b> If set it to false then standard admin role can’t edit the posts types. Then the edit_post capability must be added to all roles to add or edit the posts types.</dd> </dl> </div> <div id="hierarchical"> <dl> <dt> <h4><tt>hierarchical</tt></h4> </dt> <dd>(<i>boolean</i>) (<i>optional</i>) Whether the post type is hierarchical (e.g. page). Allows Parent to be specified. The ‘supports’ parameter should contain ‘page-attributes’ to show the parent select box on the editor page. <dl> <dd>Default: false</dd> </dl> </dd> </dl> <dl> <dd>
<b>Note:</b> this parameter was intended for <a title="Pages" href="https://codex.wordpress.org/Pages">Pages</a>. Be careful when choosing it for your custom post type – if you are planning to have very many entries (say – over 2-3 thousand), you will run into load time issues. With this parameter set to <i>true</i> WordPress will fetch all IDs of that particular post type on each administration page load for your post type. Servers with limited memory resources may also be challenged by this parameter being set to <i>true</i>.</dd> </dl> </div> <div> <dl> <dt> <h4><tt>supports</tt></h4> </dt> <dd>(<i>array/boolean</i>) (<i>optional</i>) An alias for calling <a title="Function Reference/add post type support" href="add_post_type_support.html">add_post_type_support()</a> directly. As of <a title="Version 3.5" href="https://codex.wordpress.org/Version_3.5">3.5</a>, boolean <strong>false</strong> can be passed as value instead of an array to prevent default (title and editor) behavior. <dl> <dd>Default: title and editor</dd> </dl> <ul> <li>‘title’</li> <li>‘editor’ (content)</li> <li>‘author’</li> <li>‘thumbnail’ (featured image, current theme must also support <a title="Post Thumbnails" href="https://codex.wordpress.org/Post_Thumbnails">post-thumbnails</a>)</li> <li>‘excerpt’</li> <li>‘trackbacks’</li> <li>‘custom-fields’</li> <li>‘comments’ (also will see comment count balloon on edit screen)</li> <li>‘revisions’ (will store revisions)</li> <li>‘page-attributes’ (menu order, hierarchical must be true to show Parent option)</li> <li>‘post-formats’ add post formats, see <a title="Post Formats" href="https://codex.wordpress.org/Post_Formats">Post Formats</a>
</li> </ul> </dd> </dl> <dl> <dd>
<b>Note:</b> When you use custom post type that use thumbnails remember to check that the theme also supports thumbnails or use <a class="mw-redirect" title="add theme support" href="add_theme_support.html">add_theme_support()</a> function.</dd> </dl> </div> <div> <dl> <dt> <h4><tt>register_meta_box_cb</tt></h4> </dt> <dd>(<i>callback </i>) (<i>optional</i>) Provide a callback function that will be called when setting up the meta boxes for the edit form. The callback function takes one argument <tt>$post</tt>, which contains the <tt><a href="../classes/wp_post.html" rel="class">WP_Post</a></tt> object for the currently edited post. Do <a title="Function Reference/remove meta box" href="remove_meta_box.html">remove_meta_box()</a> and <a title="Function Reference/add meta box" href="add_meta_box.html">add_meta_box()</a> calls in the callback. <dl> <dd>Default: <i>None</i>
</dd> </dl> </dd> </dl> </div> <div> <dl> <dt> <h4><tt>taxonomies</tt></h4> </dt> <dd>(<i>array</i>) (<i>optional</i>) An array of registered taxonomies like <code>category</code> or <code>post_tag</code> that will be used with this post type. This can be used in lieu of calling <a title="Function Reference/register taxonomy for object type" href="register_taxonomy_for_object_type.html">register_taxonomy_for_object_type()</a> directly. Custom taxonomies still need to be registered with <a title="Function Reference/register taxonomy" href="register_taxonomy.html">register_taxonomy()</a>. <dl> <dd>Default: no taxonomies</dd> </dl> </dd> </dl> </div> <div> <dl> <dt> <h4><tt>has_archive</tt></h4> </dt> <dd>(<i>boolean or string</i>) (<i>optional</i>) Enables post type archives. Will use <tt>$post_type</tt> as archive slug by default. <dl> <dd>Default: false</dd> </dl> </dd> <dd>Note: Will generate the proper rewrite rules if <tt>rewrite</tt> is enabled. Also use <tt>rewrite</tt> to change the slug used. If string, it should be translatable.</dd> </dl> </div> <div> <dl> <dt> <h4><tt>rewrite</tt></h4> </dt> <dd>(<i>boolean or array</i>) (<i>optional</i>) Triggers the handling of rewrites for this post type. To prevent rewrites, set to false. <dl> <dd>Default: true and use $post_type as slug</dd> </dl> </dd> <dd>$args array <ul> <li>
<tt>'slug' =&gt; string</tt> Customize the permalink structure slug. Defaults to the <tt>$post_type</tt> value. Should be translatable.</li> <li>
<tt>'with_front' =&gt; bool</tt> Should the permalink structure be prepended with the front base. (example: if your permalink structure is /blog/, then your links will be: false-&gt;/news/, true-&gt;/blog/news/). Defaults to true</li> <li>
<tt>'feeds' =&gt; bool</tt> Should a feed permalink structure be built for this post type. Defaults to <tt>has_archive</tt> value.</li> <li>
<tt>'pages' =&gt; bool</tt> Should the permalink structure provide for pagination. Defaults to true</li> <li>
<tt>'ep_mask' =&gt; const</tt> <i>As of 3.4</i> Assign an endpoint mask for this post type. For more info see <a title="Rewrite API/add rewrite endpoint" href="add_rewrite_endpoint.html">Rewrite API/add_rewrite_endpoint</a>, and <a class="external text" href="https://make.wordpress.org/plugins/2012/06/07/rewrite-endpoints-api/" rel="nofollow">Make WordPress Plugins summary of endpoints</a>. <ul> <li>If not specified, then it inherits from <tt>permalink_epmask</tt>(if <tt>permalink_epmask</tt> is set), otherwise defaults to <tt>EP_PERMALINK</tt>.</li> </ul> </li> </ul> </dd> <dd>
<b>Note:</b> If registering a post type inside of a plugin, call <a title="Function Reference/flush rewrite rules" href="https://codex.wordpress.org/Function_Reference/flush_rewrite_rules">flush_rewrite_rules()</a> in your activation and deactivation hook (see Flushing Rewrite on Activation below). If <a href="flush_rewrite_rules.html" rel="function">flush_rewrite_rules()</a> is not used, then you will have to manually go to Settings &gt; Permalinks and refresh your permalink structure before your custom post type will show the correct structure.</dd> </dl> </div> <div> <dl> <dt> <h4><tt>permalink_epmask</tt></h4> </dt> <dd>(<i>string</i>) (<i>optional</i>) The default rewrite endpoint bitmasks. For more info see <a class="external text" href="https://core.trac.wordpress.org/ticket/12605" rel="nofollow">Trac Ticket 12605</a> and this – <a class="external text" href="https://make.wordpress.org/plugins/2012/06/07/rewrite-endpoints-api/" rel="nofollow">Make WordPress Plugins summary of endpoints</a>. <dl> <dd>Default: EP_PERMALINK</dd> </dl> </dd> <dd>
<b>Note:</b> In 3.4, this argument is effectively replaced by the <tt>'ep_mask'</tt> argument under <tt>rewrite</tt>.</dd> </dl> </div> <div> <dl> <dt> <h4><tt>query_var</tt></h4> </dt> <dd>(<i>boolean or string</i>) (<i>optional</i>) Sets the <tt>query_var</tt> key for this post type. <dl> <dd>Default: true – set to $post_type</dd> </dl> <ul> <li>‘false’ – Disables <tt>query_var</tt> key use. A post type cannot be loaded at /?{query_var}={single_post_slug}</li> <li>‘string’ – /?{query_var_string}={single_post_slug} will work as intended.</li> </ul> </dd> </dl> <dl> <dd>
<b>Note:</b> The query_var parameter has no effect if the ‘publicly_queryable’ parameter is set to false. query_var adds the custom post type’s query var to the built-in query_vars array so that WordPress will recognize it. WordPress removes any query var not included in that array.</dd> </dl> <dl> <dd>If set to true it allows you to request a custom posts type (book) using this: example.com/?book=life-of-pi</dd> <dd>If set to a string rather than true (for example ‘publication’), you can do: example.com/?publication=life-of-pi</dd> </dl> </div> <div> <dl> <dt> <h4><tt>can_export</tt></h4> </dt> <dd>(<i>boolean</i>) (<i>optional</i>) Can this post_type be exported. <dl> <dd>Default: true</dd> </dl> </dd> </dl> </div> <div> <dl> <dt> <h4><tt>delete_with_user</tt></h4> </dt> <dd>(<i>boolean</i>) (<i>optional</i>) Whether to delete posts of this type when deleting a user. If true, posts of this type belonging to the user will be moved to trash when then user is deleted. If false, posts of this type belonging to the user will <b>not</b> be trashed or deleted. If not set (the default), posts are trashed if <tt>post_type_supports('author')</tt>. Otherwise posts are not trashed or deleted. <dl> <dd>Default: null</dd> </dl> </dd> </dl> </div> <div> <dl> <dt> <h4><tt>show_in_rest</tt></h4> </dt> <dd>(<i>boolean</i>) (<i>optional</i>) Whether to expose this post type in the REST API. Must be true to enable the Gutenberg editor. <dl> <dd>Default: false</dd> </dl> </dd> </dl> </div> <div> <dl> <dt> <h4><tt>rest_base</tt></h4> </dt> <dd>(<i>string</i>) (<i>optional</i>) The base slug that this post type will use when accessed using the REST API. <dl> <dd>Default: $post_type</dd> </dl> </dd> </dl> </div> <div> <dl> <dt> <h4><tt>rest_controller_class</tt></h4> </dt> <dd>(<i>string</i>) (<i>optional</i>) An optional custom controller to use instead of <a href="../classes/wp_rest_posts_controller.html" rel="class">WP_REST_Posts_Controller</a>. Must be a subclass of <a href="../classes/wp_rest_controller.html" rel="class">WP_REST_Controller</a>. <dl> <dd>Default: <a href="../classes/wp_rest_posts_controller.html" rel="class">WP_REST_Posts_Controller</a>
</dd> </dl> </dd> </dl> </div> <div> <dl> <dt> <h4><tt>_builtin</tt></h4> </dt> <dd>(<i>boolean</i>) (<i>not for general use</i>) Whether this post type is a native or “built-in” post_type. <b>Note: this entry is for documentation – core developers recommend you don’t use this when registering your own post type</b> <dl> <dd>Default: false</dd> </dl> <ul> <li>‘false’ – default this is a custom post type</li> <li>‘true’ – this is a built-in native post type (post, page, attachment, revision, nav_menu_item)</li> </ul> </dd> </dl> </div> <div> <dl> <dt> <h4><tt>_edit_link</tt></h4> </dt> <dd>(<i>boolean</i>) (<i>not for general use</i>) Link to edit an entry with this post type. <b>Note: this entry is for documentation – core developers recommend you don’t use this when registering your own post type</b> <dl> <dd>Default:</dd> </dl> <ul> <li>‘post.php?post=%d’</li> </ul> </dd> </dl> </div> <h3 id="flushing-rewrite-on-activation">Flushing Rewrite on Activation</h3> <p>To get permalinks to work when you activate the plugin use the following example, paying attention to how <code>my_cpt_init()</code> is called in the register_activation_hook callback:<br> </p> <pre class="wp-block-code" data-language="php"><code lang="php" class="language-php line-numbers">add_action( 'init', 'my_cpt_init' );
function my_cpt_init() {
register_post_type( ... );
}

register_activation_hook( __FILE__, 'my_rewrite_flush' );
function my_rewrite_flush() {
// First, we "add" the custom post type via the above written function.
// Note: "add" is written with quotes, as CPTs don't get added to the DB,
// They are only referenced in the post_type column with a post entry,
// when you add a post of this CPT.
my_cpt_init();

// ATTENTION: This is *only* done during plugin activation hook in this example!
// You should *NEVER EVER* do this on every page load!!
flush_rewrite_rules();
}</code></pre> <p> For themes, you’ll need to use the <code>after_switch_theme</code> hook instead. Like so:<br></p> <pre class="wp-block-code" data-language="php"><code lang="php" class="language-php line-numbers">add_action( 'init', 'my_cpt_init' );
function my_cpt_init() {
register_post_type( ... );
}

add_action( 'after_switch_theme', 'my_rewrite_flush' );
function my_rewrite_flush() {
my_cpt_init();
flush_rewrite_rules();
}</code></pre> <p>Note that although the <b>$public</b> attribute is optional, the inputs passed to the <b><a href="register_post_type.html" rel="function">register_post_type()</a> </b> function are <i>exactly</i> what is queried by the <tt><a title="Function Reference/get post types" href="get_post_types.html"> get_post_types()</a></tt> function. So if you verbosely set the equivalent options for <b>publicly_queriable</b>, <b>show_ui</b>, <b>show_in_nav_menus</b>, and <b>exclude_from_search</b>, this will not be handled the same as if you had set the <b>$public</b> attribute. See <a class="external text" href="https://core.trac.wordpress.org/ticket/18950" rel="nofollow">bug 18950</a>.</p> </section> <section><h2 id="source">Source</h2> <pre class="wp-block-code" data-start="1790" aria-label="Function source code" data-language="php"><code id="wporg-source-code" lang="php" class="language-php line-numbers">function register_post_type( $post_type, $args = array() ) {
	global $wp_post_types;

	if ( ! is_array( $wp_post_types ) ) {
		$wp_post_types = array();
	}

	// Sanitize post type name.
	$post_type = sanitize_key( $post_type );

	if ( empty( $post_type ) || strlen( $post_type ) &gt; 20 ) {
		_doing_it_wrong( __FUNCTION__, __( 'Post type names must be between 1 and 20 characters in length.' ), '4.2.0' );
		return new WP_Error( 'post_type_length_invalid', __( 'Post type names must be between 1 and 20 characters in length.' ) );
	}

	$post_type_object = new WP_Post_Type( $post_type, $args );
	$post_type_object-&gt;add_supports();
	$post_type_object-&gt;add_rewrite_rules();
	$post_type_object-&gt;register_meta_boxes();

	$wp_post_types[ $post_type ] = $post_type_object;

	$post_type_object-&gt;add_hooks();
	$post_type_object-&gt;register_taxonomies();

	/**
	 * Fires after a post type is registered.
	 *
	 * @since 3.3.0
	 * @since 4.6.0 Converted the `$post_type` parameter to accept a `WP_Post_Type` object.
	 *
	 * @param string       $post_type        Post type.
	 * @param WP_Post_Type $post_type_object Arguments used to register the post type.
	 */
	do_action( 'registered_post_type', $post_type, $post_type_object );

	/**
	 * Fires after a specific post type is registered.
	 *
	 * The dynamic portion of the filter name, `$post_type`, refers to the post type key.
	 *
	 * Possible hook names include:
	 *
	 *  - `registered_post_type_post`
	 *  - `registered_post_type_page`
	 *
	 * @since 6.0.0
	 *
	 * @param string       $post_type        Post type.
	 * @param WP_Post_Type $post_type_object Arguments used to register the post type.
	 */
	do_action( "registered_post_type_{$post_type}", $post_type, $post_type_object );

	return $post_type_object;
}
</code></pre>
<p class="wporg-dot-link-list"><a href="https://developer.wordpress.org/reference/files/wp-includes/post.php/">View all references</a> <a href="https://core.trac.wordpress.org/browser/tags/6.7/src/wp-includes/post.php#L1790">View on Trac</a> <a href="https://github.com/WordPress/wordpress-develop/blob/6.7/src/wp-includes/post.php#L1790-L1844">View on GitHub</a></p></section> <section><h2 id="hooks">Hooks</h2> <dl>
<dt class="wp-block-wporg-code-reference-title has-normal-font-size"><a href="../hooks/registered_post_type.html"><span class="hook-func">do_action</span>( ‘registered_post_type’, <nobr><span class="arg-type">string</span> <span class="arg-name">$post_type</span></nobr>, <nobr><span class="arg-type">WP_Post_Type</span> <span class="arg-name">$post_type_object</span></nobr> )</a></dt>
<dd>
<p>Fires after a post type is registered.</p> </dd>
<dt class="wp-block-wporg-code-reference-title has-normal-font-size"><a href="../hooks/registered_post_type_post_type.html"><span class="hook-func">do_action</span>( “registered_post_type_{$post_type}”, <nobr><span class="arg-type">string</span> <span class="arg-name">$post_type</span></nobr>, <nobr><span class="arg-type">WP_Post_Type</span> <span class="arg-name">$post_type_object</span></nobr> )</a></dt>
<dd>
<p>Fires after a specific post type is registered.</p> </dd>
</dl></section>  <section><h2 id="changelog">Changelog</h2> <section style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table "><table>
<thead><tr>
<th scope="col">Version</th>
<th scope="col">Description</th>
</tr></thead>
<tbody>
<tr class="">
<td><a href="https://developer.wordpress.org/reference/since/5.9.0/">5.9.0</a></td>
<td><span class="since-description">The <code>rest_namespace</code> argument was added.</span></td>
</tr>
<tr class="">
<td><a href="https://developer.wordpress.org/reference/since/5.3.0/">5.3.0</a></td>
<td><span class="since-description">The <code>supports</code> argument will now accept an array of arguments for a feature.</span></td>
</tr>
<tr class="">
<td><a href="https://developer.wordpress.org/reference/since/5.0.0/">5.0.0</a></td>
<td><span class="since-description">The <code>template</code> and <code>template_lock</code> arguments were added.</span></td>
</tr>
<tr class="">
<td><a href="https://developer.wordpress.org/reference/since/4.7.0/">4.7.0</a></td>
<td><span class="since-description">Introduced <code>show_in_rest</code>, <code>rest_base</code> and <code>rest_controller_class</code> arguments to register the post type in REST API.</span></td>
</tr>
<tr class="">
<td><a href="https://developer.wordpress.org/reference/since/4.6.0/">4.6.0</a></td>
<td><span class="since-description">Post type object returned is now an instance of <code>WP_Post_Type</code>.</span></td>
</tr>
<tr class="wporg-hidden">
<td><a href="https://developer.wordpress.org/reference/since/4.4.0/">4.4.0</a></td>
<td><span class="since-description">The <code>show_ui</code> argument is now enforced on the post type listing screen and post editing screen.</span></td>
</tr>
<tr class="wporg-hidden">
<td><a href="https://developer.wordpress.org/reference/since/3.0.0/">3.0.0</a></td>
<td><span class="since-description">The <code>show_ui</code> argument is now enforced on the new post screen.</span></td>
</tr>
<tr class="wporg-hidden">
<td><a href="https://developer.wordpress.org/reference/since/2.9.0/">2.9.0</a></td>
<td>Introduced.</td>
</tr>
</tbody>
</table></figure><a class="wp-block-wporg-code-table-show-more" href="#">Show 3 more</a><a class="wp-block-wporg-code-table-show-less" href="#">Show less</a></section> </section>  </li>
</ul></span></div> <section> <p>You must <a href="https://login.wordpress.org/?redirect_to=https%3A%2F%2Fdeveloper.wordpress.org%2Freference%2Ffunctions%2Fregister_post_type%2F">log in</a> before being able to contribute a note or feedback.</p></section> </dd>
</dl></section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2003&ndash;2024 WordPress Foundation<br>Licensed under the GNU GPLv2+ License.<br>
    <a href="https://developer.wordpress.org/reference/functions/register_post_type" class="_attribution-link">https://developer.wordpress.org/reference/functions/register_post_type</a>
  </p>
</div>
