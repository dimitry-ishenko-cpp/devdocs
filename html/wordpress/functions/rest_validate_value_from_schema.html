<h1>rest_validate_value_from_schema( mixed $value, array $args, string $param = '' ): true|WP_Error</h1>  <section> <p>Validate a value based on a schema.</p> </section>   <section> <header class="toc-header"><h2 id="parameters">Parameters</h2></header> <dl> <dt> <code>$value</code> <span class="type"><span class="mixed">mixed</span></span> <span class="required">Required</span> </dt> <dd> <div class="desc"> <span class="description">The value to validate.</span> </div> </dd> <dt> <code>$args</code> <span class="type"><span class="array">array</span></span> <span class="required">Required</span> </dt> <dd> <div class="desc"> <span class="description">Schema array to use for validation.</span> </div> </dd> <dt> <code>$param</code> <span class="type"><span class="string">string</span></span> <span class="required">Optional</span> </dt> <dd> <div class="desc"> <span class="description">The parameter name, used in error messages.</span> </div> <p class="default">Default: <code>''</code></p> </dd> </dl> </section>  <section> <header class="toc-header"><h2 id="return">Return</h2></header> <p><span class="return-type">true|<a href="../classes/wp_error.html" rel="class">WP_Error</a></span> </p> </section>  <section> <header class="toc-header"><h2 id="source">Source</h2></header> <p> File: <code>wp-includes/rest-api.php</code>. <a href="https://developer.wordpress.org/reference/files/wp-includes/rest-api.php/">View all references</a> </p> <pre class="wp-block-code" data-start="2089" aria-label="Function source code" data-language="php"><code lang="php" class="language-php line-numbers">function rest_validate_value_from_schema( $value, $args, $param = '' ) {
	if ( isset( $args['anyOf'] ) ) {
		$matching_schema = rest_find_any_matching_schema( $value, $args, $param );
		if ( is_wp_error( $matching_schema ) ) {
			return $matching_schema;
		}

		if ( ! isset( $args['type'] ) &amp;&amp; isset( $matching_schema['type'] ) ) {
			$args['type'] = $matching_schema['type'];
		}
	}

	if ( isset( $args['oneOf'] ) ) {
		$matching_schema = rest_find_one_matching_schema( $value, $args, $param );
		if ( is_wp_error( $matching_schema ) ) {
			return $matching_schema;
		}

		if ( ! isset( $args['type'] ) &amp;&amp; isset( $matching_schema['type'] ) ) {
			$args['type'] = $matching_schema['type'];
		}
	}

	$allowed_types = array( 'array', 'object', 'string', 'number', 'integer', 'boolean', 'null' );

	if ( ! isset( $args['type'] ) ) {
		/* translators: %s: Parameter. */
		_doing_it_wrong( __FUNCTION__, sprintf( __( 'The "type" schema keyword for %s is required.' ), $param ), '5.5.0' );
	}

	if ( is_array( $args['type'] ) ) {
		$best_type = rest_handle_multi_type_schema( $value, $args, $param );

		if ( ! $best_type ) {
			return new WP_Error(
				'rest_invalid_type',
				/* translators: 1: Parameter, 2: List of types. */
				sprintf( __( '%1$s is not of type %2$s.' ), $param, implode( ',', $args['type'] ) ),
				array( 'param' =&gt; $param )
			);
		}

		$args['type'] = $best_type;
	}

	if ( ! in_array( $args['type'], $allowed_types, true ) ) {
		_doing_it_wrong(
			__FUNCTION__,
			/* translators: 1: Parameter, 2: The list of allowed types. */
			wp_sprintf( __( 'The "type" schema keyword for %1$s can only be one of the built-in types: %2$l.' ), $param, $allowed_types ),
			'5.5.0'
		);
	}

	switch ( $args['type'] ) {
		case 'null':
			$is_valid = rest_validate_null_value_from_schema( $value, $param );
			break;
		case 'boolean':
			$is_valid = rest_validate_boolean_value_from_schema( $value, $param );
			break;
		case 'object':
			$is_valid = rest_validate_object_value_from_schema( $value, $args, $param );
			break;
		case 'array':
			$is_valid = rest_validate_array_value_from_schema( $value, $args, $param );
			break;
		case 'number':
			$is_valid = rest_validate_number_value_from_schema( $value, $args, $param );
			break;
		case 'string':
			$is_valid = rest_validate_string_value_from_schema( $value, $args, $param );
			break;
		case 'integer':
			$is_valid = rest_validate_integer_value_from_schema( $value, $args, $param );
			break;
		default:
			$is_valid = true;
			break;
	}

	if ( is_wp_error( $is_valid ) ) {
		return $is_valid;
	}

	if ( ! empty( $args['enum'] ) ) {
		$enum_contains_value = rest_validate_enum( $value, $args, $param );
		if ( is_wp_error( $enum_contains_value ) ) {
			return $enum_contains_value;
		}
	}

	// The "format" keyword should only be applied to strings. However, for backward compatibility,
	// we allow the "format" keyword if the type keyword was not specified, or was set to an invalid value.
	if ( isset( $args['format'] )
		&amp;&amp; ( ! isset( $args['type'] ) || 'string' === $args['type'] || ! in_array( $args['type'], $allowed_types, true ) )
	) {
		switch ( $args['format'] ) {
			case 'hex-color':
				if ( ! rest_parse_hex_color( $value ) ) {
					return new WP_Error( 'rest_invalid_hex_color', __( 'Invalid hex color.' ) );
				}
				break;

			case 'date-time':
				if ( ! rest_parse_date( $value ) ) {
					return new WP_Error( 'rest_invalid_date', __( 'Invalid date.' ) );
				}
				break;

			case 'email':
				if ( ! is_email( $value ) ) {
					return new WP_Error( 'rest_invalid_email', __( 'Invalid email address.' ) );
				}
				break;
			case 'ip':
				if ( ! rest_is_ip_address( $value ) ) {
					/* translators: %s: IP address. */
					return new WP_Error( 'rest_invalid_ip', sprintf( __( '%s is not a valid IP address.' ), $param ) );
				}
				break;
			case 'uuid':
				if ( ! wp_is_uuid( $value ) ) {
					/* translators: %s: The name of a JSON field expecting a valid UUID. */
					return new WP_Error( 'rest_invalid_uuid', sprintf( __( '%s is not a valid UUID.' ), $param ) );
				}
				break;
		}
	}

	return true;
}
</code></pre>  </section>  <section> <header class="toc-header"><h2 id="related">Related</h2></header> <article class="uses"> <header class="toc-header"><h3 id="uses">Uses</h3></header> <table id="uses-table" data-show="5">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="rest_validate_integer_value_from_schema.html">rest_validate_integer_value_from_schema()</a> <span>wp-includes/rest-api.php</span> </td> <td class="related-desc"> <p>Validates an integer value based on a schema.</p> </td> </tr> <tr> <td class="related-title"> <a href="rest_validate_null_value_from_schema.html">rest_validate_null_value_from_schema()</a> <span>wp-includes/rest-api.php</span> </td> <td class="related-desc"> <p>Validates a null value based on a schema.</p> </td> </tr> <tr> <td class="related-title"> <a href="is_email.html">is_email()</a> <span>wp-includes/formatting.php</span> </td> <td class="related-desc"> <p>Verifies that an email is valid.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_sprintf.html">wp_sprintf()</a> <span>wp-includes/formatting.php</span> </td> <td class="related-desc"> <p>WordPress implementation of PHP sprintf() with filters.</p> </td> </tr> <tr> <td class="related-title"> <a href="rest_parse_date.html">rest_parse_date()</a> <span>wp-includes/rest-api.php</span> </td> <td class="related-desc"> <p>Parses an RFC3339 time into a Unix timestamp.</p> </td> </tr> <tr> <td class="related-title"> <a href="rest_is_ip_address.html">rest_is_ip_address()</a> <span>wp-includes/rest-api.php</span> </td> <td class="related-desc"> <p>Determines if an IP address is valid.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_is_uuid.html">wp_is_uuid()</a> <span>wp-includes/functions.php</span> </td> <td class="related-desc"> <p>Validates that a UUID is valid.</p> </td> </tr> <tr> <td class="related-title"> <a href="rest_parse_hex_color.html">rest_parse_hex_color()</a> <span>wp-includes/rest-api.php</span> </td> <td class="related-desc"> <p>Parses a 3 or 6 digit hex color (with #).</p> </td> </tr> <tr> <td class="related-title"> <a href="rest_handle_multi_type_schema.html">rest_handle_multi_type_schema()</a> <span>wp-includes/rest-api.php</span> </td> <td class="related-desc"> <p>Handles getting the best type for a multi-type schema.</p> </td> </tr> <tr> <td class="related-title"> <a href="rest_find_one_matching_schema.html">rest_find_one_matching_schema()</a> <span>wp-includes/rest-api.php</span> </td> <td class="related-desc"> <p>Finds the matching schema among the “oneOf” schemas.</p> </td> </tr> <tr> <td class="related-title"> <a href="rest_find_any_matching_schema.html">rest_find_any_matching_schema()</a> <span>wp-includes/rest-api.php</span> </td> <td class="related-desc"> <p>Finds the matching schema among the “anyOf” schemas.</p> </td> </tr> <tr> <td class="related-title"> <a href="rest_validate_enum.html">rest_validate_enum()</a> <span>wp-includes/rest-api.php</span> </td> <td class="related-desc"> <p>Validates that the given value is a member of the JSON Schema “enum”.</p> </td> </tr> <tr> <td class="related-title"> <a href="rest_validate_string_value_from_schema.html">rest_validate_string_value_from_schema()</a> <span>wp-includes/rest-api.php</span> </td> <td class="related-desc"> <p>Validates a string value based on a schema.</p> </td> </tr> <tr> <td class="related-title"> <a href="rest_validate_number_value_from_schema.html">rest_validate_number_value_from_schema()</a> <span>wp-includes/rest-api.php</span> </td> <td class="related-desc"> <p>Validates a number value based on a schema.</p> </td> </tr> <tr> <td class="related-title"> <a href="rest_validate_array_value_from_schema.html">rest_validate_array_value_from_schema()</a> <span>wp-includes/rest-api.php</span> </td> <td class="related-desc"> <p>Validates an array value based on a schema.</p> </td> </tr> <tr> <td class="related-title"> <a href="rest_validate_object_value_from_schema.html">rest_validate_object_value_from_schema()</a> <span>wp-includes/rest-api.php</span> </td> <td class="related-desc"> <p>Validates an object value based on a schema.</p> </td> </tr> <tr> <td class="related-title"> <a href="rest_validate_boolean_value_from_schema.html">rest_validate_boolean_value_from_schema()</a> <span>wp-includes/rest-api.php</span> </td> <td class="related-desc"> <p>Validates a boolean value based on a schema.</p> </td> </tr> <tr> <td class="related-title"> <a href="__.html">__()</a> <span>wp-includes/l10n.php</span> </td> <td class="related-desc"> <p>Retrieves the translation of $text.</p> </td> </tr> <tr> <td class="related-title"> <a href="_doing_it_wrong.html">_doing_it_wrong()</a> <span>wp-includes/functions.php</span> </td> <td class="related-desc"> <p>Marks something as being incorrectly called.</p> </td> </tr> <tr> <td class="related-title"> <a href="is_wp_error.html">is_wp_error()</a> <span>wp-includes/load.php</span> </td> <td class="related-desc"> <p>Checks whether the given variable is a WordPress Error.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wp_error/__construct.html">WP_Error::__construct()</a> <span>wp-includes/class-wp-error.php</span> </td> <td class="related-desc"> <p>Initializes the error.</p> </td> </tr> </tbody>

</table>   </article>  <article class="used-by"> <header class="toc-header"><h3 id="used-by">Used By</h3></header> <table id="used-by-table" data-show="5">  <thead> <tr> <th>Used By</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="../classes/wp_rest_sidebars_controller/prepare_item_for_response.html">WP_REST_Sidebars_Controller::prepare_item_for_response()</a> <span>wp-includes/rest-api/endpoints/class-wp-rest-sidebars-controller.php</span> </td> <td class="related-desc"> <p>Prepares a single sidebar output for response.</p> </td> </tr> <tr> <td class="related-title"> <a href="rest_validate_object_value_from_schema.html">rest_validate_object_value_from_schema()</a> <span>wp-includes/rest-api.php</span> </td> <td class="related-desc"> <p>Validates an object value based on a schema.</p> </td> </tr> <tr> <td class="related-title"> <a href="rest_validate_array_value_from_schema.html">rest_validate_array_value_from_schema()</a> <span>wp-includes/rest-api.php</span> </td> <td class="related-desc"> <p>Validates an array value based on a schema.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wp_rest_posts_controller/check_status.html">WP_REST_Posts_Controller::check_status()</a> <span>wp-includes/rest-api/endpoints/class-wp-rest-posts-controller.php</span> </td> <td class="related-desc"> <p>Checks whether the status is valid for the given post.</p> </td> </tr> <tr> <td class="related-title"> <a href="rest_find_any_matching_schema.html">rest_find_any_matching_schema()</a> <span>wp-includes/rest-api.php</span> </td> <td class="related-desc"> <p>Finds the matching schema among the “anyOf” schemas.</p> </td> </tr> <tr> <td class="related-title"> <a href="rest_find_one_matching_schema.html">rest_find_one_matching_schema()</a> <span>wp-includes/rest-api.php</span> </td> <td class="related-desc"> <p>Finds the matching schema among the “oneOf” schemas.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wp_rest_block_renderer_controller/register_routes.html">WP_REST_Block_Renderer_Controller::register_routes()</a> <span>wp-includes/rest-api/endpoints/class-wp-rest-block-renderer-controller.php</span> </td> <td class="related-desc"> <p>Registers the necessary REST API routes, one for each dynamic block.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wp_block_type/prepare_attributes_for_render.html">WP_Block_Type::prepare_attributes_for_render()</a> <span>wp-includes/class-wp-block-type.php</span> </td> <td class="related-desc"> <p>Validates attributes against the current block schema, populating defaulted and missing values.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wp_widget_media/update.html">WP_Widget_Media::update()</a> <span>wp-includes/widgets/class-wp-widget-media.php</span> </td> <td class="related-desc"> <p>Sanitizes the widget form values as they are saved.</p> </td> </tr> <tr> <td class="related-title"> <a href="rest_validate_request_arg.html">rest_validate_request_arg()</a> <span>wp-includes/rest-api.php</span> </td> <td class="related-desc"> <p>Validate a request argument based on details registered to the route.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wp_rest_meta_fields/prepare_value.html">WP_REST_Meta_Fields::prepare_value()</a> <span>wp-includes/rest-api/fields/class-wp-rest-meta-fields.php</span> </td> <td class="related-desc"> <p>Prepares a meta value for output.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wp_rest_meta_fields/update_value.html">WP_REST_Meta_Fields::update_value()</a> <span>wp-includes/rest-api/fields/class-wp-rest-meta-fields.php</span> </td> <td class="related-desc"> <p>Updates meta values.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wp_rest_settings_controller/prepare_value.html">WP_REST_Settings_Controller::prepare_value()</a> <span>wp-includes/rest-api/endpoints/class-wp-rest-settings-controller.php</span> </td> <td class="related-desc"> <p>Prepares a value for output based off a schema array.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wp_rest_settings_controller/update_item.html">WP_REST_Settings_Controller::update_item()</a> <span>wp-includes/rest-api/endpoints/class-wp-rest-settings-controller.php</span> </td> <td class="related-desc"> <p>Updates settings for the settings object.</p> </td> </tr> <tr> <td class="related-title"> <a href="register_meta.html">register_meta()</a> <span>wp-includes/meta.php</span> </td> <td class="related-desc"> <p>Registers a meta key.</p> </td> </tr> </tbody>

</table>   </article> </section>  <section> <header class="toc-header"><h2 id="changelog">Changelog</h2></header> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/5.6.0/" alt="WordPress 5.6.0">5.6.0</a></td> <td><span class="since-description">Support the "minProperties" and "maxProperties" keywords for objects.<br> Support the "multipleOf" keyword for numbers and integers.<br> Support the "patternProperties" keyword for objects.<br> Support the "anyOf" and "oneOf" keywords.</span></td> </tr> <tr> <td><a href="https://developer.wordpress.org/reference/since/5.5.0/" alt="WordPress 5.5.0">5.5.0</a></td> <td><span class="since-description">Add the "uuid" and "hex-color" formats.<br> Support the "minLength", "maxLength" and "pattern" keywords for strings.<br> Support the "minItems", "maxItems" and "uniqueItems" keywords for arrays.<br> Validate required properties.</span></td> </tr> <tr> <td><a href="https://developer.wordpress.org/reference/since/5.4.0/" alt="WordPress 5.4.0">5.4.0</a></td> <td><span class="since-description">Convert an empty string to an empty object.</span></td> </tr> <tr> <td><a href="https://developer.wordpress.org/reference/since/5.3.0/" alt="WordPress 5.3.0">5.3.0</a></td> <td><span class="since-description">Support multiple types.</span></td> </tr> <tr> <td><a href="https://developer.wordpress.org/reference/since/5.2.0/" alt="WordPress 5.2.0">5.2.0</a></td> <td><span class="since-description">Support validating "additionalProperties" against a schema.</span></td> </tr> <tr> <td><a href="https://developer.wordpress.org/reference/since/4.9.0/" alt="WordPress 4.9.0">4.9.0</a></td> <td><span class="since-description">Support the "object" type.</span></td> </tr> <tr> <td><a href="https://developer.wordpress.org/reference/since/4.7.0/" alt="WordPress 4.7.0">4.7.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2003&ndash;2022 WordPress Foundation<br>Licensed under the GNU GPLv2+ License.<br>
    <a href="https://developer.wordpress.org/reference/functions/rest_validate_value_from_schema" class="_attribution-link">https://developer.wordpress.org/reference/functions/rest_validate_value_from_schema</a>
  </p>
</div>
