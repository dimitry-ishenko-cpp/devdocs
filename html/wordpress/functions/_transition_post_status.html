<h1>_transition_post_status( string $new_status, string $old_status, WP_Post $post )</h1> <div class="callout callout-alert">
<p> This function’s access is marked private. This means it is not intended for use by plugin or theme developers, only in other core functions. It is listed here for completeness. Use <a href="wp_clear_scheduled_hook.html" rel="function">wp_clear_scheduled_hook()</a> instead.</p> </div>  <section> <p>Hook for managing future post transitions to published.</p> </section>   <section> <header class="toc-header"><h2 id="description">Description</h2></header> <header class="toc-header"><h3 id="see-also">See also</h3></header> <ul> <li>
<a href="wp_clear_scheduled_hook.html" rel="function">wp_clear_scheduled_hook()</a> </li> </ul> </section>  <section> <header class="toc-header"><h2 id="parameters">Parameters</h2></header> <dl> <dt> <code>$new_status</code> <span class="type"><span class="string">string</span></span> <span class="required">Required</span> </dt> <dd> <div class="desc"> <span class="description">New post status.</span> </div> </dd> <dt> <code>$old_status</code> <span class="type"><span class="string">string</span></span> <span class="required">Required</span> </dt> <dd> <div class="desc"> <span class="description">Previous post status.</span> </div> </dd> <dt> <code>$post</code> <span class="type"><span class="WP_Post"><a href="../classes/wp_post.html" rel="class">WP_Post</a></span></span> <span class="required">Required</span> </dt> <dd> <div class="desc"> <span class="description">Post object.</span> </div> </dd> </dl> </section>  <section> <header class="toc-header"><h2 id="source">Source</h2></header> <p> File: <code>wp-includes/post.php</code>. <a href="https://developer.wordpress.org/reference/files/wp-includes/post.php/">View all references</a> </p> <pre class="wp-block-code" data-start="7562" aria-label="Function source code" data-language="php"><code lang="php" class="language-php line-numbers">function _transition_post_status( $new_status, $old_status, $post ) {
	global $wpdb;

	if ( 'publish' !== $old_status &amp;&amp; 'publish' === $new_status ) {
		// Reset GUID if transitioning to publish and it is empty.
		if ( '' === get_the_guid( $post-&gt;ID ) ) {
			$wpdb-&gt;update( $wpdb-&gt;posts, array( 'guid' =&gt; get_permalink( $post-&gt;ID ) ), array( 'ID' =&gt; $post-&gt;ID ) );
		}

		/**
		 * Fires when a post's status is transitioned from private to published.
		 *
		 * @since 1.5.0
		 * @deprecated 2.3.0 Use {@see 'private_to_publish'} instead.
		 *
		 * @param int $post_id Post ID.
		 */
		do_action_deprecated( 'private_to_published', array( $post-&gt;ID ), '2.3.0', 'private_to_publish' );
	}

	// If published posts changed clear the lastpostmodified cache.
	if ( 'publish' === $new_status || 'publish' === $old_status ) {
		foreach ( array( 'server', 'gmt', 'blog' ) as $timezone ) {
			wp_cache_delete( "lastpostmodified:$timezone", 'timeinfo' );
			wp_cache_delete( "lastpostdate:$timezone", 'timeinfo' );
			wp_cache_delete( "lastpostdate:$timezone:{$post-&gt;post_type}", 'timeinfo' );
		}
	}

	if ( $new_status !== $old_status ) {
		wp_cache_delete( _count_posts_cache_key( $post-&gt;post_type ), 'counts' );
		wp_cache_delete( _count_posts_cache_key( $post-&gt;post_type, 'readable' ), 'counts' );
	}

	// Always clears the hook in case the post status bounced from future to draft.
	wp_clear_scheduled_hook( 'publish_future_post', array( $post-&gt;ID ) );
}
</code></pre>  </section>  <section> <header class="toc-header"><h2 id="hooks">Hooks</h2></header> <article class="hooks"> <dl> <dt class="signature-highlight"> <a href="../hooks/private_to_published.html" style="text-decoration: none"> <span class="hook-func">do_action_deprecated</span>( 'private_to_published', <nobr><span class="arg-type">int</span> <span class="arg-name">$post_id</span></nobr> ) </a> </dt> <dd class="hook-desc"> 
<p>Fires when a post’s status is transitioned from private to published.</p> </dd> </dl> </article> </section>  <section> <header class="toc-header"><h2 id="related">Related</h2></header> <article class="uses"> <header class="toc-header"><h3 id="uses">Uses</h3></header> <table id="uses-table" data-show="5">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="do_action_deprecated.html">do_action_deprecated()</a> <span>wp-includes/plugin.php</span> </td> <td class="related-desc"> <p>Fires functions attached to a deprecated action hook.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_clear_scheduled_hook.html">wp_clear_scheduled_hook()</a> <span>wp-includes/cron.php</span> </td> <td class="related-desc"> <p>Unschedules all events attached to the hook with the specified arguments.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_cache_delete.html">wp_cache_delete()</a> <span>wp-includes/cache.php</span> </td> <td class="related-desc"> <p>Removes the cache contents matching key and group.</p> </td> </tr> <tr> <td class="related-title"> <a href="get_the_guid.html">get_the_guid()</a> <span>wp-includes/post-template.php</span> </td> <td class="related-desc"> <p>Retrieves the Post Global Unique Identifier (guid).</p> </td> </tr> <tr> <td class="related-title"> <a href="_count_posts_cache_key.html">_count_posts_cache_key()</a> <span>wp-includes/post.php</span> </td> <td class="related-desc"> <p>Returns the cache key for <a href="wp_count_posts.html" rel="function">wp_count_posts()</a> based on the passed arguments.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wpdb/update.html">wpdb::update()</a> <span>wp-includes/class-wpdb.php</span> </td> <td class="related-desc"> <p>Updates a row in the table.</p> </td> </tr> <tr> <td class="related-title"> <a href="get_permalink.html">get_permalink()</a> <span>wp-includes/link-template.php</span> </td> <td class="related-desc"> <p>Retrieves the full permalink for the current post or post ID.</p> </td> </tr> </tbody>

</table>   </article> </section>  <section> <header class="toc-header"><h2 id="changelog">Changelog</h2></header> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/2.3.0/" alt="WordPress 2.3.0">2.3.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2003&ndash;2022 WordPress Foundation<br>Licensed under the GNU GPLv2+ License.<br>
    <a href="https://developer.wordpress.org/reference/functions/_transition_post_status" class="_attribution-link">https://developer.wordpress.org/reference/functions/_transition_post_status</a>
  </p>
</div>
