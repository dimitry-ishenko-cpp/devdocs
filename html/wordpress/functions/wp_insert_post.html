<h1>wp_insert_post( array $postarr, bool $wp_error = false, bool $fire_after_hooks = true ): int|WP_Error</h1>  <section> <p>Inserts or update a post.</p> </section>   <section> <header class="toc-header"><h2 id="description">Description</h2></header> <p>If the $postarr parameter has ‘ID’ set to a value, then post will be updated.</p> <p>You can set the post date manually, by setting the values for ‘post_date’ and ‘post_date_gmt’ keys. You can close the comments or open the comments by setting the value for ‘comment_status’ key.</p> <header class="toc-header"><h3 id="see-also">See also</h3></header> <ul> <li>
<a href="sanitize_post.html" rel="function">sanitize_post()</a> </li> </ul> </section>  <section> <header class="toc-header"><h2 id="parameters">Parameters</h2></header> <dl> <dt> <code>$postarr</code> <span class="type"><span class="array">array</span></span> <span class="required">Required</span> </dt> <dd> <div class="desc"> <span class="description">An array of elements that make up a post to update or insert.<br> <ul class="param-hash">
<li>
<code>ID</code><span class="type">int</span><div class="desc">The post ID. If equal to something other than 0, the post with that ID will be updated. Default 0.</div>
</li> <li>
<code>post_author</code><span class="type">int</span><div class="desc">The ID of the user who added the post. Default is the current user ID.</div>
</li> <li>
<code>post_date</code><span class="type">string</span><div class="desc">The date of the post. Default is the current time.</div>
</li> <li>
<code>post_date_gmt</code><span class="type">string</span><div class="desc">The date of the post in the GMT timezone. Default is the value of <code>$post_date</code>.</div>
</li> <li>
<code>post_content</code><span class="type">string</span><div class="desc">The post content. Default empty.</div>
</li> <li>
<code>post_content_filtered</code><span class="type">string</span><div class="desc">The filtered post content. Default empty.</div>
</li> <li>
<code>post_title</code><span class="type">string</span><div class="desc">The post title. Default empty.</div>
</li> <li>
<code>post_excerpt</code><span class="type">string</span><div class="desc">The post excerpt. Default empty.</div>
</li> <li>
<code>post_status</code><span class="type">string</span><div class="desc">The post status. Default <code>'draft'</code>.</div>
</li> <li>
<code>post_type</code><span class="type">string</span><div class="desc">The post type. Default <code>'post'</code>.</div>
</li> <li>
<code>comment_status</code><span class="type">string</span><div class="desc">Whether the post can accept comments. Accepts <code>'open'</code> or <code>'closed'</code>.<br> Default is the value of <code>'default_comment_status'</code> option.</div>
</li> <li>
<code>ping_status</code><span class="type">string</span><div class="desc">Whether the post can accept pings. Accepts <code>'open'</code> or <code>'closed'</code>.<br> Default is the value of <code>'default_ping_status'</code> option.</div>
</li> <li>
<code>post_password</code><span class="type">string</span><div class="desc">The password to access the post. Default empty.</div>
</li> <li>
<code>post_name</code><span class="type">string</span><div class="desc">The post name. Default is the sanitized post title when creating a new post.</div>
</li> <li>
<code>to_ping</code><span class="type">string</span><div class="desc">Space or carriage return-separated list of URLs to ping.<br> Default empty.</div>
</li> <li>
<code>pinged</code><span class="type">string</span><div class="desc">Space or carriage return-separated list of URLs that have been pinged. Default empty.</div>
</li> <li>
<code>post_modified</code><span class="type">string</span><div class="desc">The date when the post was last modified. Default is the current time.</div>
</li> <li>
<code>post_modified_gmt</code><span class="type">string</span><div class="desc">The date when the post was last modified in the GMT timezone. Default is the current time.</div>
</li> <li>
<code>post_parent</code><span class="type">int</span><div class="desc">Set this for the post it belongs to, if any. Default 0.</div>
</li> <li>
<code>menu_order</code><span class="type">int</span><div class="desc">The order the post should be displayed in. Default 0.</div>
</li> <li>
<code>post_mime_type</code><span class="type">string</span><div class="desc">The mime type of the post. Default empty.</div>
</li> <li>
<code>guid</code><span class="type">string</span><div class="desc">Global Unique ID for referencing the post. Default empty.</div>
</li> <li>
<code>import_id</code><span class="type">int</span><div class="desc">The post ID to be used when inserting a new post.<br> If specified, must not match any existing post ID. Default 0.</div>
</li> <li>
<code>post_category</code><span class="type">int[]</span><div class="desc">Array of category IDs.<br> Defaults to value of the <code>'default_category'</code> option.</div>
</li> <li>
<code>tags_input</code><span class="type">array</span><div class="desc">Array of tag names, slugs, or IDs. Default empty.</div>
</li> <li>
<code>tax_input</code><span class="type">array</span><div class="desc">An array of taxonomy terms keyed by their taxonomy name.<br> If the taxonomy is hierarchical, the term list needs to be either an array of term IDs or a comma-separated string of IDs.<br> If the taxonomy is non-hierarchical, the term list can be an array that contains term names or slugs, or a comma-separated string of names or slugs. This is because, in hierarchical taxonomy, child terms can have the same names with different parent terms, so the only way to connect them is using ID. Default empty.</div>
</li> <li>
<code>meta_input</code><span class="type">array</span><div class="desc">Array of post meta values keyed by their post meta key. Default empty.</div>
</li> <li>
<code>page_template</code><span class="type">string</span><div class="desc">Page template to use.</div>
</li> </ul> </span> </div> </dd> <dt> <code>$wp_error</code> <span class="type"><span class="bool">bool</span></span> <span class="required">Optional</span> </dt> <dd> <div class="desc"> <span class="description"> Whether to return a <a href="../classes/wp_error.html" rel="class">WP_Error</a> on failure. </span> </div> <p class="default">Default: <code>false</code></p> </dd> <dt> <code>$fire_after_hooks</code> <span class="type"><span class="bool">bool</span></span> <span class="required">Optional</span> </dt> <dd> <div class="desc"> <span class="description"> Whether to fire the after insert hooks. </span> </div> <p class="default">Default: <code>true</code></p> </dd> </dl> </section>  <section> <header class="toc-header"><h2 id="return">Return</h2></header> <p><span class="return-type">int|<a href="../classes/wp_error.html" rel="class">WP_Error</a></span> The post ID on success. The value 0 or <a href="../classes/wp_error.html" rel="class">WP_Error</a> on failure.</p> </section>  <section> <header class="toc-header"><h2 id="more-information">More Information</h2></header> <header class="toc-header"><h3 id="usage">Usage</h3></header> 
<pre class="wp-block-code" data-language="php"><code lang="php" class="language-php ">wp_insert_post( $post, $wp_error );</code></pre> <header class="toc-header"><h3 id="notes">Notes</h3></header> <ul> <li>
<tt>post_title</tt> and <tt>post_content</tt> are required</li> <li>
<tt>post_status</tt>: If providing a post_status of ‘future’ you must specify the post_date in order for WordPress to know when to publish your post. See also <a title="Post Status Transitions" href="https://codex.wordpress.org/Post_Status_Transitions">Post Status Transitions</a>.</li> <li>
<tt>post_category</tt>: Equivalent to calling <a href="wp_set_post_categories.html" rel="function">wp_set_post_categories()</a> .</li> <li>
<tt>tags_input</tt>: Equivalent to calling <a href="wp_set_post_tags.html" rel="function">wp_set_post_tags()</a> .</li> <li>
<tt>tax_input</tt>: Equivalent to calling <a href="wp_set_post_terms.html" rel="function">wp_set_post_terms()</a> for each custom taxonomy in the array. If the current user doesn’t have the capability to work with a taxonomy, then you must use <a href="wp_set_object_terms.html" rel="function">wp_set_object_terms()</a> instead.</li> <li>
<tt>page_template</tt>: If post_type is ‘page’, will attempt to set the <a title="Page Templates" href="https://codex.wordpress.org/Page_Templates">page template</a>. On failure, the function will return either a <a href="../classes/wp_error.html" rel="class">WP_Error</a> or 0, and stop before the final actions are called. If the post_type is not ‘page’, the parameter is ignored. You can set the page template for a non-page by calling <a href="update_post_meta.html" rel="function">update_post_meta()</a> with a key of ‘_wp_page_template’.</li> </ul> <header class="toc-header"><h3 id="categories">Categories</h3></header> <p>Categories need to be passed as an array of integers that match the category IDs in the database. This is the case even where only one category is assigned to the post.</p> <p>See also: <a href="wp_set_post_terms.html" rel="function">wp_set_post_terms()</a> </p> <header class="toc-header"><h3 id="security">Security</h3></header> <p><tt><a href="wp_insert_post.html" rel="function">wp_insert_post()</a> </tt> passes data through <a href="sanitize_post.html" rel="function">sanitize_post()</a> , which itself handles all necessary sanitization and validation (kses, etc.).</p> <p>As such, you don’t need to worry about that.</p> <p>You may wish, however, to remove HTML, JavaScript, and PHP tags from the post_title and any other fields. Surprisingly, WordPress does not do this automatically. This can be easily done by using the <a href="wp_strip_all_tags.html" rel="function">wp_strip_all_tags()</a> function and is especially useful when building front-end post submission forms.</p> 
<pre class="wp-block-code" data-language="php"><code lang="php" class="language-php line-numbers">// Create post object
$my_post = array(
  'post_title'    =&gt; wp_strip_all_tags( $_POST['post_title'] ),
  'post_content'  =&gt; $_POST['post_content'],
  'post_status'   =&gt; 'publish',
  'post_author'   =&gt; 1,
  'post_category' =&gt; array( 8,39 )
);

// Insert the post into the database
wp_insert_post( $my_post );</code></pre> </section>  <section> <header class="toc-header"><h2 id="source">Source</h2></header> <p> File: <code>wp-includes/post.php</code>. <a href="https://developer.wordpress.org/reference/files/wp-includes/post.php/">View all references</a> </p> <pre class="wp-block-code" data-start="4042" aria-label="Function source code" data-language="php"><code lang="php" class="language-php line-numbers">function wp_insert_post( $postarr, $wp_error = false, $fire_after_hooks = true ) {
	global $wpdb;

	// Capture original pre-sanitized array for passing into filters.
	$unsanitized_postarr = $postarr;

	$user_id = get_current_user_id();

	$defaults = array(
		'post_author'           =&gt; $user_id,
		'post_content'          =&gt; '',
		'post_content_filtered' =&gt; '',
		'post_title'            =&gt; '',
		'post_excerpt'          =&gt; '',
		'post_status'           =&gt; 'draft',
		'post_type'             =&gt; 'post',
		'comment_status'        =&gt; '',
		'ping_status'           =&gt; '',
		'post_password'         =&gt; '',
		'to_ping'               =&gt; '',
		'pinged'                =&gt; '',
		'post_parent'           =&gt; 0,
		'menu_order'            =&gt; 0,
		'guid'                  =&gt; '',
		'import_id'             =&gt; 0,
		'context'               =&gt; '',
		'post_date'             =&gt; '',
		'post_date_gmt'         =&gt; '',
	);

	$postarr = wp_parse_args( $postarr, $defaults );

	unset( $postarr['filter'] );

	$postarr = sanitize_post( $postarr, 'db' );

	// Are we updating or creating?
	$post_ID = 0;
	$update  = false;
	$guid    = $postarr['guid'];

	if ( ! empty( $postarr['ID'] ) ) {
		$update = true;

		// Get the post ID and GUID.
		$post_ID     = $postarr['ID'];
		$post_before = get_post( $post_ID );

		if ( is_null( $post_before ) ) {
			if ( $wp_error ) {
				return new WP_Error( 'invalid_post', __( 'Invalid post ID.' ) );
			}
			return 0;
		}

		$guid            = get_post_field( 'guid', $post_ID );
		$previous_status = get_post_field( 'post_status', $post_ID );
	} else {
		$previous_status = 'new';
		$post_before     = null;
	}

	$post_type = empty( $postarr['post_type'] ) ? 'post' : $postarr['post_type'];

	$post_title   = $postarr['post_title'];
	$post_content = $postarr['post_content'];
	$post_excerpt = $postarr['post_excerpt'];

	if ( isset( $postarr['post_name'] ) ) {
		$post_name = $postarr['post_name'];
	} elseif ( $update ) {
		// For an update, don't modify the post_name if it wasn't supplied as an argument.
		$post_name = $post_before-&gt;post_name;
	}

	$maybe_empty = 'attachment' !== $post_type
		&amp;&amp; ! $post_content &amp;&amp; ! $post_title &amp;&amp; ! $post_excerpt
		&amp;&amp; post_type_supports( $post_type, 'editor' )
		&amp;&amp; post_type_supports( $post_type, 'title' )
		&amp;&amp; post_type_supports( $post_type, 'excerpt' );

	/**
	 * Filters whether the post should be considered "empty".
	 *
	 * The post is considered "empty" if both:
	 * 1. The post type supports the title, editor, and excerpt fields
	 * 2. The title, editor, and excerpt fields are all empty
	 *
	 * Returning a truthy value from the filter will effectively short-circuit
	 * the new post being inserted and return 0. If $wp_error is true, a WP_Error
	 * will be returned instead.
	 *
	 * @since 3.3.0
	 *
	 * @param bool  $maybe_empty Whether the post should be considered "empty".
	 * @param array $postarr     Array of post data.
	 */
	if ( apply_filters( 'wp_insert_post_empty_content', $maybe_empty, $postarr ) ) {
		if ( $wp_error ) {
			return new WP_Error( 'empty_content', __( 'Content, title, and excerpt are empty.' ) );
		} else {
			return 0;
		}
	}

	$post_status = empty( $postarr['post_status'] ) ? 'draft' : $postarr['post_status'];

	if ( 'attachment' === $post_type &amp;&amp; ! in_array( $post_status, array( 'inherit', 'private', 'trash', 'auto-draft' ), true ) ) {
		$post_status = 'inherit';
	}

	if ( ! empty( $postarr['post_category'] ) ) {
		// Filter out empty terms.
		$post_category = array_filter( $postarr['post_category'] );
	} elseif ( $update &amp;&amp; ! isset( $postarr['post_category'] ) ) {
		$post_category = $post_before-&gt;post_category;
	}

	// Make sure we set a valid category.
	if ( empty( $post_category ) || 0 === count( $post_category ) || ! is_array( $post_category ) ) {
		// 'post' requires at least one category.
		if ( 'post' === $post_type &amp;&amp; 'auto-draft' !== $post_status ) {
			$post_category = array( get_option( 'default_category' ) );
		} else {
			$post_category = array();
		}
	}

	/*
	 * Don't allow contributors to set the post slug for pending review posts.
	 *
	 * For new posts check the primitive capability, for updates check the meta capability.
	 */
	if ( 'pending' === $post_status ) {
		$post_type_object = get_post_type_object( $post_type );

		if ( ! $update &amp;&amp; $post_type_object &amp;&amp; ! current_user_can( $post_type_object-&gt;cap-&gt;publish_posts ) ) {
			$post_name = '';
		} elseif ( $update &amp;&amp; ! current_user_can( 'publish_post', $post_ID ) ) {
			$post_name = '';
		}
	}

	/*
	 * Create a valid post name. Drafts and pending posts are allowed to have
	 * an empty post name.
	 */
	if ( empty( $post_name ) ) {
		if ( ! in_array( $post_status, array( 'draft', 'pending', 'auto-draft' ), true ) ) {
			$post_name = sanitize_title( $post_title );
		} else {
			$post_name = '';
		}
	} else {
		// On updates, we need to check to see if it's using the old, fixed sanitization context.
		$check_name = sanitize_title( $post_name, '', 'old-save' );

		if ( $update &amp;&amp; strtolower( urlencode( $post_name ) ) == $check_name &amp;&amp; get_post_field( 'post_name', $post_ID ) == $check_name ) {
			$post_name = $check_name;
		} else { // new post, or slug has changed.
			$post_name = sanitize_title( $post_name );
		}
	}

	/*
	 * Resolve the post date from any provided post date or post date GMT strings;
	 * if none are provided, the date will be set to now.
	 */
	$post_date = wp_resolve_post_date( $postarr['post_date'], $postarr['post_date_gmt'] );

	if ( ! $post_date ) {
		if ( $wp_error ) {
			return new WP_Error( 'invalid_date', __( 'Invalid date.' ) );
		} else {
			return 0;
		}
	}

	if ( empty( $postarr['post_date_gmt'] ) || '0000-00-00 00:00:00' === $postarr['post_date_gmt'] ) {
		if ( ! in_array( $post_status, get_post_stati( array( 'date_floating' =&gt; true ) ), true ) ) {
			$post_date_gmt = get_gmt_from_date( $post_date );
		} else {
			$post_date_gmt = '0000-00-00 00:00:00';
		}
	} else {
		$post_date_gmt = $postarr['post_date_gmt'];
	}

	if ( $update || '0000-00-00 00:00:00' === $post_date ) {
		$post_modified     = current_time( 'mysql' );
		$post_modified_gmt = current_time( 'mysql', 1 );
	} else {
		$post_modified     = $post_date;
		$post_modified_gmt = $post_date_gmt;
	}

	if ( 'attachment' !== $post_type ) {
		$now = gmdate( 'Y-m-d H:i:s' );

		if ( 'publish' === $post_status ) {
			if ( strtotime( $post_date_gmt ) - strtotime( $now ) &gt;= MINUTE_IN_SECONDS ) {
				$post_status = 'future';
			}
		} elseif ( 'future' === $post_status ) {
			if ( strtotime( $post_date_gmt ) - strtotime( $now ) &lt; MINUTE_IN_SECONDS ) {
				$post_status = 'publish';
			}
		}
	}

	// Comment status.
	if ( empty( $postarr['comment_status'] ) ) {
		if ( $update ) {
			$comment_status = 'closed';
		} else {
			$comment_status = get_default_comment_status( $post_type );
		}
	} else {
		$comment_status = $postarr['comment_status'];
	}

	// These variables are needed by compact() later.
	$post_content_filtered = $postarr['post_content_filtered'];
	$post_author           = isset( $postarr['post_author'] ) ? $postarr['post_author'] : $user_id;
	$ping_status           = empty( $postarr['ping_status'] ) ? get_default_comment_status( $post_type, 'pingback' ) : $postarr['ping_status'];
	$to_ping               = isset( $postarr['to_ping'] ) ? sanitize_trackback_urls( $postarr['to_ping'] ) : '';
	$pinged                = isset( $postarr['pinged'] ) ? $postarr['pinged'] : '';
	$import_id             = isset( $postarr['import_id'] ) ? $postarr['import_id'] : 0;

	/*
	 * The 'wp_insert_post_parent' filter expects all variables to be present.
	 * Previously, these variables would have already been extracted
	 */
	if ( isset( $postarr['menu_order'] ) ) {
		$menu_order = (int) $postarr['menu_order'];
	} else {
		$menu_order = 0;
	}

	$post_password = isset( $postarr['post_password'] ) ? $postarr['post_password'] : '';
	if ( 'private' === $post_status ) {
		$post_password = '';
	}

	if ( isset( $postarr['post_parent'] ) ) {
		$post_parent = (int) $postarr['post_parent'];
	} else {
		$post_parent = 0;
	}

	$new_postarr = array_merge(
		array(
			'ID' =&gt; $post_ID,
		),
		compact( array_diff( array_keys( $defaults ), array( 'context', 'filter' ) ) )
	);

	/**
	 * Filters the post parent -- used to check for and prevent hierarchy loops.
	 *
	 * @since 3.1.0
	 *
	 * @param int   $post_parent Post parent ID.
	 * @param int   $post_ID     Post ID.
	 * @param array $new_postarr Array of parsed post data.
	 * @param array $postarr     Array of sanitized, but otherwise unmodified post data.
	 */
	$post_parent = apply_filters( 'wp_insert_post_parent', $post_parent, $post_ID, $new_postarr, $postarr );

	/*
	 * If the post is being untrashed and it has a desired slug stored in post meta,
	 * reassign it.
	 */
	if ( 'trash' === $previous_status &amp;&amp; 'trash' !== $post_status ) {
		$desired_post_slug = get_post_meta( $post_ID, '_wp_desired_post_slug', true );

		if ( $desired_post_slug ) {
			delete_post_meta( $post_ID, '_wp_desired_post_slug' );
			$post_name = $desired_post_slug;
		}
	}

	// If a trashed post has the desired slug, change it and let this post have it.
	if ( 'trash' !== $post_status &amp;&amp; $post_name ) {
		/**
		 * Filters whether or not to add a `__trashed` suffix to trashed posts that match the name of the updated post.
		 *
		 * @since 5.4.0
		 *
		 * @param bool   $add_trashed_suffix Whether to attempt to add the suffix.
		 * @param string $post_name          The name of the post being updated.
		 * @param int    $post_ID            Post ID.
		 */
		$add_trashed_suffix = apply_filters( 'add_trashed_suffix_to_trashed_posts', true, $post_name, $post_ID );

		if ( $add_trashed_suffix ) {
			wp_add_trashed_suffix_to_post_name_for_trashed_posts( $post_name, $post_ID );
		}
	}

	// When trashing an existing post, change its slug to allow non-trashed posts to use it.
	if ( 'trash' === $post_status &amp;&amp; 'trash' !== $previous_status &amp;&amp; 'new' !== $previous_status ) {
		$post_name = wp_add_trashed_suffix_to_post_name_for_post( $post_ID );
	}

	$post_name = wp_unique_post_slug( $post_name, $post_ID, $post_status, $post_type, $post_parent );

	// Don't unslash.
	$post_mime_type = isset( $postarr['post_mime_type'] ) ? $postarr['post_mime_type'] : '';

	// Expected_slashed (everything!).
	$data = compact(
		'post_author',
		'post_date',
		'post_date_gmt',
		'post_content',
		'post_content_filtered',
		'post_title',
		'post_excerpt',
		'post_status',
		'post_type',
		'comment_status',
		'ping_status',
		'post_password',
		'post_name',
		'to_ping',
		'pinged',
		'post_modified',
		'post_modified_gmt',
		'post_parent',
		'menu_order',
		'post_mime_type',
		'guid'
	);

	$emoji_fields = array( 'post_title', 'post_content', 'post_excerpt' );

	foreach ( $emoji_fields as $emoji_field ) {
		if ( isset( $data[ $emoji_field ] ) ) {
			$charset = $wpdb-&gt;get_col_charset( $wpdb-&gt;posts, $emoji_field );

			if ( 'utf8' === $charset ) {
				$data[ $emoji_field ] = wp_encode_emoji( $data[ $emoji_field ] );
			}
		}
	}

	if ( 'attachment' === $post_type ) {
		/**
		 * Filters attachment post data before it is updated in or added to the database.
		 *
		 * @since 3.9.0
		 * @since 5.4.1 The `$unsanitized_postarr` parameter was added.
		 * @since 6.0.0 The `$update` parameter was added.
		 *
		 * @param array $data                An array of slashed, sanitized, and processed attachment post data.
		 * @param array $postarr             An array of slashed and sanitized attachment post data, but not processed.
		 * @param array $unsanitized_postarr An array of slashed yet *unsanitized* and unprocessed attachment post data
		 *                                   as originally passed to wp_insert_post().
		 * @param bool  $update              Whether this is an existing attachment post being updated.
		 */
		$data = apply_filters( 'wp_insert_attachment_data', $data, $postarr, $unsanitized_postarr, $update );
	} else {
		/**
		 * Filters slashed post data just before it is inserted into the database.
		 *
		 * @since 2.7.0
		 * @since 5.4.1 The `$unsanitized_postarr` parameter was added.
		 * @since 6.0.0 The `$update` parameter was added.
		 *
		 * @param array $data                An array of slashed, sanitized, and processed post data.
		 * @param array $postarr             An array of sanitized (and slashed) but otherwise unmodified post data.
		 * @param array $unsanitized_postarr An array of slashed yet *unsanitized* and unprocessed post data as
		 *                                   originally passed to wp_insert_post().
		 * @param bool  $update              Whether this is an existing post being updated.
		 */
		$data = apply_filters( 'wp_insert_post_data', $data, $postarr, $unsanitized_postarr, $update );
	}

	$data  = wp_unslash( $data );
	$where = array( 'ID' =&gt; $post_ID );

	if ( $update ) {
		/**
		 * Fires immediately before an existing post is updated in the database.
		 *
		 * @since 2.5.0
		 *
		 * @param int   $post_ID Post ID.
		 * @param array $data    Array of unslashed post data.
		 */
		do_action( 'pre_post_update', $post_ID, $data );

		if ( false === $wpdb-&gt;update( $wpdb-&gt;posts, $data, $where ) ) {
			if ( $wp_error ) {
				if ( 'attachment' === $post_type ) {
					$message = __( 'Could not update attachment in the database.' );
				} else {
					$message = __( 'Could not update post in the database.' );
				}

				return new WP_Error( 'db_update_error', $message, $wpdb-&gt;last_error );
			} else {
				return 0;
			}
		}
	} else {
		// If there is a suggested ID, use it if not already present.
		if ( ! empty( $import_id ) ) {
			$import_id = (int) $import_id;

			if ( ! $wpdb-&gt;get_var( $wpdb-&gt;prepare( "SELECT ID FROM $wpdb-&gt;posts WHERE ID = %d", $import_id ) ) ) {
				$data['ID'] = $import_id;
			}
		}

		if ( false === $wpdb-&gt;insert( $wpdb-&gt;posts, $data ) ) {
			if ( $wp_error ) {
				if ( 'attachment' === $post_type ) {
					$message = __( 'Could not insert attachment into the database.' );
				} else {
					$message = __( 'Could not insert post into the database.' );
				}

				return new WP_Error( 'db_insert_error', $message, $wpdb-&gt;last_error );
			} else {
				return 0;
			}
		}

		$post_ID = (int) $wpdb-&gt;insert_id;

		// Use the newly generated $post_ID.
		$where = array( 'ID' =&gt; $post_ID );
	}

	if ( empty( $data['post_name'] ) &amp;&amp; ! in_array( $data['post_status'], array( 'draft', 'pending', 'auto-draft' ), true ) ) {
		$data['post_name'] = wp_unique_post_slug( sanitize_title( $data['post_title'], $post_ID ), $post_ID, $data['post_status'], $post_type, $post_parent );

		$wpdb-&gt;update( $wpdb-&gt;posts, array( 'post_name' =&gt; $data['post_name'] ), $where );
		clean_post_cache( $post_ID );
	}

	if ( is_object_in_taxonomy( $post_type, 'category' ) ) {
		wp_set_post_categories( $post_ID, $post_category );
	}

	if ( isset( $postarr['tags_input'] ) &amp;&amp; is_object_in_taxonomy( $post_type, 'post_tag' ) ) {
		wp_set_post_tags( $post_ID, $postarr['tags_input'] );
	}

	// Add default term for all associated custom taxonomies.
	if ( 'auto-draft' !== $post_status ) {
		foreach ( get_object_taxonomies( $post_type, 'object' ) as $taxonomy =&gt; $tax_object ) {

			if ( ! empty( $tax_object-&gt;default_term ) ) {

				// Filter out empty terms.
				if ( isset( $postarr['tax_input'][ $taxonomy ] ) &amp;&amp; is_array( $postarr['tax_input'][ $taxonomy ] ) ) {
					$postarr['tax_input'][ $taxonomy ] = array_filter( $postarr['tax_input'][ $taxonomy ] );
				}

				// Passed custom taxonomy list overwrites the existing list if not empty.
				$terms = wp_get_object_terms( $post_ID, $taxonomy, array( 'fields' =&gt; 'ids' ) );
				if ( ! empty( $terms ) &amp;&amp; empty( $postarr['tax_input'][ $taxonomy ] ) ) {
					$postarr['tax_input'][ $taxonomy ] = $terms;
				}

				if ( empty( $postarr['tax_input'][ $taxonomy ] ) ) {
					$default_term_id = get_option( 'default_term_' . $taxonomy );
					if ( ! empty( $default_term_id ) ) {
						$postarr['tax_input'][ $taxonomy ] = array( (int) $default_term_id );
					}
				}
			}
		}
	}

	// New-style support for all custom taxonomies.
	if ( ! empty( $postarr['tax_input'] ) ) {
		foreach ( $postarr['tax_input'] as $taxonomy =&gt; $tags ) {
			$taxonomy_obj = get_taxonomy( $taxonomy );

			if ( ! $taxonomy_obj ) {
				/* translators: %s: Taxonomy name. */
				_doing_it_wrong( __FUNCTION__, sprintf( __( 'Invalid taxonomy: %s.' ), $taxonomy ), '4.4.0' );
				continue;
			}

			// array = hierarchical, string = non-hierarchical.
			if ( is_array( $tags ) ) {
				$tags = array_filter( $tags );
			}

			if ( current_user_can( $taxonomy_obj-&gt;cap-&gt;assign_terms ) ) {
				wp_set_post_terms( $post_ID, $tags, $taxonomy );
			}
		}
	}

	if ( ! empty( $postarr['meta_input'] ) ) {
		foreach ( $postarr['meta_input'] as $field =&gt; $value ) {
			update_post_meta( $post_ID, $field, $value );
		}
	}

	$current_guid = get_post_field( 'guid', $post_ID );

	// Set GUID.
	if ( ! $update &amp;&amp; '' === $current_guid ) {
		$wpdb-&gt;update( $wpdb-&gt;posts, array( 'guid' =&gt; get_permalink( $post_ID ) ), $where );
	}

	if ( 'attachment' === $postarr['post_type'] ) {
		if ( ! empty( $postarr['file'] ) ) {
			update_attached_file( $post_ID, $postarr['file'] );
		}

		if ( ! empty( $postarr['context'] ) ) {
			add_post_meta( $post_ID, '_wp_attachment_context', $postarr['context'], true );
		}
	}

	// Set or remove featured image.
	if ( isset( $postarr['_thumbnail_id'] ) ) {
		$thumbnail_support = current_theme_supports( 'post-thumbnails', $post_type ) &amp;&amp; post_type_supports( $post_type, 'thumbnail' ) || 'revision' === $post_type;

		if ( ! $thumbnail_support &amp;&amp; 'attachment' === $post_type &amp;&amp; $post_mime_type ) {
			if ( wp_attachment_is( 'audio', $post_ID ) ) {
				$thumbnail_support = post_type_supports( 'attachment:audio', 'thumbnail' ) || current_theme_supports( 'post-thumbnails', 'attachment:audio' );
			} elseif ( wp_attachment_is( 'video', $post_ID ) ) {
				$thumbnail_support = post_type_supports( 'attachment:video', 'thumbnail' ) || current_theme_supports( 'post-thumbnails', 'attachment:video' );
			}
		}

		if ( $thumbnail_support ) {
			$thumbnail_id = (int) $postarr['_thumbnail_id'];
			if ( -1 === $thumbnail_id ) {
				delete_post_thumbnail( $post_ID );
			} else {
				set_post_thumbnail( $post_ID, $thumbnail_id );
			}
		}
	}

	clean_post_cache( $post_ID );

	$post = get_post( $post_ID );

	if ( ! empty( $postarr['page_template'] ) ) {
		$post-&gt;page_template = $postarr['page_template'];
		$page_templates      = wp_get_theme()-&gt;get_page_templates( $post );

		if ( 'default' !== $postarr['page_template'] &amp;&amp; ! isset( $page_templates[ $postarr['page_template'] ] ) ) {
			if ( $wp_error ) {
				return new WP_Error( 'invalid_page_template', __( 'Invalid page template.' ) );
			}

			update_post_meta( $post_ID, '_wp_page_template', 'default' );
		} else {
			update_post_meta( $post_ID, '_wp_page_template', $postarr['page_template'] );
		}
	}

	if ( 'attachment' !== $postarr['post_type'] ) {
		wp_transition_post_status( $data['post_status'], $previous_status, $post );
	} else {
		if ( $update ) {
			/**
			 * Fires once an existing attachment has been updated.
			 *
			 * @since 2.0.0
			 *
			 * @param int $post_ID Attachment ID.
			 */
			do_action( 'edit_attachment', $post_ID );

			$post_after = get_post( $post_ID );

			/**
			 * Fires once an existing attachment has been updated.
			 *
			 * @since 4.4.0
			 *
			 * @param int     $post_ID      Post ID.
			 * @param WP_Post $post_after   Post object following the update.
			 * @param WP_Post $post_before  Post object before the update.
			 */
			do_action( 'attachment_updated', $post_ID, $post_after, $post_before );
		} else {

			/**
			 * Fires once an attachment has been added.
			 *
			 * @since 2.0.0
			 *
			 * @param int $post_ID Attachment ID.
			 */
			do_action( 'add_attachment', $post_ID );
		}

		return $post_ID;
	}

	if ( $update ) {
		/**
		 * Fires once an existing post has been updated.
		 *
		 * The dynamic portion of the hook name, `$post-&gt;post_type`, refers to
		 * the post type slug.
		 *
		 * Possible hook names include:
		 *
		 *  - `edit_post_post`
		 *  - `edit_post_page`
		 *
		 * @since 5.1.0
		 *
		 * @param int     $post_ID Post ID.
		 * @param WP_Post $post    Post object.
		 */
		do_action( "edit_post_{$post-&gt;post_type}", $post_ID, $post );

		/**
		 * Fires once an existing post has been updated.
		 *
		 * @since 1.2.0
		 *
		 * @param int     $post_ID Post ID.
		 * @param WP_Post $post    Post object.
		 */
		do_action( 'edit_post', $post_ID, $post );

		$post_after = get_post( $post_ID );

		/**
		 * Fires once an existing post has been updated.
		 *
		 * @since 3.0.0
		 *
		 * @param int     $post_ID      Post ID.
		 * @param WP_Post $post_after   Post object following the update.
		 * @param WP_Post $post_before  Post object before the update.
		 */
		do_action( 'post_updated', $post_ID, $post_after, $post_before );
	}

	/**
	 * Fires once a post has been saved.
	 *
	 * The dynamic portion of the hook name, `$post-&gt;post_type`, refers to
	 * the post type slug.
	 *
	 * Possible hook names include:
	 *
	 *  - `save_post_post`
	 *  - `save_post_page`
	 *
	 * @since 3.7.0
	 *
	 * @param int     $post_ID Post ID.
	 * @param WP_Post $post    Post object.
	 * @param bool    $update  Whether this is an existing post being updated.
	 */
	do_action( "save_post_{$post-&gt;post_type}", $post_ID, $post, $update );

	/**
	 * Fires once a post has been saved.
	 *
	 * @since 1.5.0
	 *
	 * @param int     $post_ID Post ID.
	 * @param WP_Post $post    Post object.
	 * @param bool    $update  Whether this is an existing post being updated.
	 */
	do_action( 'save_post', $post_ID, $post, $update );

	/**
	 * Fires once a post has been saved.
	 *
	 * @since 2.0.0
	 *
	 * @param int     $post_ID Post ID.
	 * @param WP_Post $post    Post object.
	 * @param bool    $update  Whether this is an existing post being updated.
	 */
	do_action( 'wp_insert_post', $post_ID, $post, $update );

	if ( $fire_after_hooks ) {
		wp_after_insert_post( $post, $update, $post_before );
	}

	return $post_ID;
}
</code></pre>  </section>  <section> <header class="toc-header"><h2 id="hooks">Hooks</h2></header> <article class="hooks"> <dl> <dt class="signature-highlight"> <a href="../hooks/add_attachment.html" style="text-decoration: none"> <span class="hook-func">do_action</span>( 'add_attachment', <nobr><span class="arg-type">int</span> <span class="arg-name">$post_ID</span></nobr> ) </a> </dt> <dd class="hook-desc"> 
<p>Fires once an attachment has been added.</p> </dd> </dl> <dl> <dt class="signature-highlight"> <a href="../hooks/add_trashed_suffix_to_trashed_posts.html" style="text-decoration: none"> <span class="hook-func">apply_filters</span>( 'add_trashed_suffix_to_trashed_posts', <nobr><span class="arg-type">bool</span> <span class="arg-name">$add_trashed_suffix</span></nobr>, <nobr><span class="arg-type">string</span> <span class="arg-name">$post_name</span></nobr>, <nobr><span class="arg-type">int</span> <span class="arg-name">$post_ID</span></nobr> ) </a> </dt> <dd class="hook-desc"> 
<p>Filters whether or not to add a <code>__trashed</code> suffix to trashed posts that match the name of the updated post.</p> </dd> </dl> <dl> <dt class="signature-highlight"> <a href="../hooks/attachment_updated.html" style="text-decoration: none"> <span class="hook-func">do_action</span>( 'attachment_updated', <nobr><span class="arg-type">int</span> <span class="arg-name">$post_ID</span></nobr>, <nobr><span class="arg-type">WP_Post</span> <span class="arg-name">$post_after</span></nobr>, <nobr><span class="arg-type">WP_Post</span> <span class="arg-name">$post_before</span></nobr> ) </a> </dt> <dd class="hook-desc"> 
<p>Fires once an existing attachment has been updated.</p> </dd> </dl> <dl> <dt class="signature-highlight"> <a href="../hooks/edit_attachment.html" style="text-decoration: none"> <span class="hook-func">do_action</span>( 'edit_attachment', <nobr><span class="arg-type">int</span> <span class="arg-name">$post_ID</span></nobr> ) </a> </dt> <dd class="hook-desc"> 
<p>Fires once an existing attachment has been updated.</p> </dd> </dl> <dl> <dt class="signature-highlight"> <a href="../hooks/edit_post.html" style="text-decoration: none"> <span class="hook-func">do_action</span>( 'edit_post', <nobr><span class="arg-type">int</span> <span class="arg-name">$post_ID</span></nobr>, <nobr><span class="arg-type">WP_Post</span> <span class="arg-name">$post</span></nobr> ) </a> </dt> <dd class="hook-desc"> 
<p>Fires once an existing post has been updated.</p> </dd> </dl> <dl> <dt class="signature-highlight"> <a href="../hooks/edit_post_post-post_type.html" style="text-decoration: none"> <span class="hook-func">do_action</span>( "edit_post_{$post-&gt;post_type}", <nobr><span class="arg-type">int</span> <span class="arg-name">$post_ID</span></nobr>, <nobr><span class="arg-type">WP_Post</span> <span class="arg-name">$post</span></nobr> ) </a> </dt> <dd class="hook-desc"> 
<p>Fires once an existing post has been updated.</p> </dd> </dl> <dl> <dt class="signature-highlight"> <a href="../hooks/post_updated.html" style="text-decoration: none"> <span class="hook-func">do_action</span>( 'post_updated', <nobr><span class="arg-type">int</span> <span class="arg-name">$post_ID</span></nobr>, <nobr><span class="arg-type">WP_Post</span> <span class="arg-name">$post_after</span></nobr>, <nobr><span class="arg-type">WP_Post</span> <span class="arg-name">$post_before</span></nobr> ) </a> </dt> <dd class="hook-desc"> 
<p>Fires once an existing post has been updated.</p> </dd> </dl> <dl> <dt class="signature-highlight"> <a href="../hooks/pre_post_update.html" style="text-decoration: none"> <span class="hook-func">do_action</span>( 'pre_post_update', <nobr><span class="arg-type">int</span> <span class="arg-name">$post_ID</span></nobr>, <nobr><span class="arg-type">array</span> <span class="arg-name">$data</span></nobr> ) </a> </dt> <dd class="hook-desc"> 
<p>Fires immediately before an existing post is updated in the database.</p> </dd> </dl> <dl> <dt class="signature-highlight"> <a href="../hooks/save_post.html" style="text-decoration: none"> <span class="hook-func">do_action</span>( 'save_post', <nobr><span class="arg-type">int</span> <span class="arg-name">$post_ID</span></nobr>, <nobr><span class="arg-type">WP_Post</span> <span class="arg-name">$post</span></nobr>, <nobr><span class="arg-type">bool</span> <span class="arg-name">$update</span></nobr> ) </a> </dt> <dd class="hook-desc"> 
<p>Fires once a post has been saved.</p> </dd> </dl> <dl> <dt class="signature-highlight"> <a href="../hooks/save_post_post-post_type.html" style="text-decoration: none"> <span class="hook-func">do_action</span>( "save_post_{$post-&gt;post_type}", <nobr><span class="arg-type">int</span> <span class="arg-name">$post_ID</span></nobr>, <nobr><span class="arg-type">WP_Post</span> <span class="arg-name">$post</span></nobr>, <nobr><span class="arg-type">bool</span> <span class="arg-name">$update</span></nobr> ) </a> </dt> <dd class="hook-desc"> 
<p>Fires once a post has been saved.</p> </dd> </dl> <dl> <dt class="signature-highlight"> <a href="../hooks/wp_insert_attachment_data.html" style="text-decoration: none"> <span class="hook-func">apply_filters</span>( 'wp_insert_attachment_data', <nobr><span class="arg-type">array</span> <span class="arg-name">$data</span></nobr>, <nobr><span class="arg-type">array</span> <span class="arg-name">$postarr</span></nobr>, <nobr><span class="arg-type">array</span> <span class="arg-name">$unsanitized_postarr</span></nobr>, <nobr><span class="arg-type">bool</span> <span class="arg-name">$update</span></nobr> ) </a> </dt> <dd class="hook-desc"> 
<p>Filters attachment post data before it is updated in or added to the database.</p> </dd> </dl> <dl> <dt class="signature-highlight"> <a href="../hooks/wp_insert_post.html" style="text-decoration: none"> <span class="hook-func">do_action</span>( 'wp_insert_post', <nobr><span class="arg-type">int</span> <span class="arg-name">$post_ID</span></nobr>, <nobr><span class="arg-type">WP_Post</span> <span class="arg-name">$post</span></nobr>, <nobr><span class="arg-type">bool</span> <span class="arg-name">$update</span></nobr> ) </a> </dt> <dd class="hook-desc"> 
<p>Fires once a post has been saved.</p> </dd> </dl> <dl> <dt class="signature-highlight"> <a href="../hooks/wp_insert_post_data.html" style="text-decoration: none"> <span class="hook-func">apply_filters</span>( 'wp_insert_post_data', <nobr><span class="arg-type">array</span> <span class="arg-name">$data</span></nobr>, <nobr><span class="arg-type">array</span> <span class="arg-name">$postarr</span></nobr>, <nobr><span class="arg-type">array</span> <span class="arg-name">$unsanitized_postarr</span></nobr>, <nobr><span class="arg-type">bool</span> <span class="arg-name">$update</span></nobr> ) </a> </dt> <dd class="hook-desc"> 
<p>Filters slashed post data just before it is inserted into the database.</p> </dd> </dl> <dl> <dt class="signature-highlight"> <a href="../hooks/wp_insert_post_empty_content.html" style="text-decoration: none"> <span class="hook-func">apply_filters</span>( 'wp_insert_post_empty_content', <nobr><span class="arg-type">bool</span> <span class="arg-name">$maybe_empty</span></nobr>, <nobr><span class="arg-type">array</span> <span class="arg-name">$postarr</span></nobr> ) </a> </dt> <dd class="hook-desc"> 
<p>Filters whether the post should be considered “empty”.</p> </dd> </dl> <dl> <dt class="signature-highlight"> <a href="../hooks/wp_insert_post_parent.html" style="text-decoration: none"> <span class="hook-func">apply_filters</span>( 'wp_insert_post_parent', <nobr><span class="arg-type">int</span> <span class="arg-name">$post_parent</span></nobr>, <nobr><span class="arg-type">int</span> <span class="arg-name">$post_ID</span></nobr>, <nobr><span class="arg-type">array</span> <span class="arg-name">$new_postarr</span></nobr>, <nobr><span class="arg-type">array</span> <span class="arg-name">$postarr</span></nobr> ) </a> </dt> <dd class="hook-desc"> 
<p>Filters the post parent — used to check for and prevent hierarchy loops.</p> </dd> </dl> </article> </section>  <section> <header class="toc-header"><h2 id="related">Related</h2></header> <article class="uses"> <header class="toc-header"><h3 id="uses">Uses</h3></header> <table id="uses-table" data-show="5">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="wp_resolve_post_date.html">wp_resolve_post_date()</a> <span>wp-includes/post.php</span> </td> <td class="related-desc"> <p>Uses wp_checkdate to return a valid Gregorian-calendar value for post_date.</p> </td> </tr> <tr> <td class="related-title"> <a href="delete_post_meta.html">delete_post_meta()</a> <span>wp-includes/post.php</span> </td> <td class="related-desc"> <p>Deletes a post meta field for the given post ID.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_get_object_terms.html">wp_get_object_terms()</a> <span>wp-includes/taxonomy.php</span> </td> <td class="related-desc"> <p>Retrieves the terms associated with the given object(s), in the supplied taxonomies.</p> </td> </tr> <tr> <td class="related-title"> <a href="get_object_taxonomies.html">get_object_taxonomies()</a> <span>wp-includes/taxonomy.php</span> </td> <td class="related-desc"> <p>Returns the names or objects of the taxonomies which are registered for the requested object or object type, such as a post object or post type name.</p> </td> </tr> <tr> <td class="related-title"> <a href="get_post_field.html">get_post_field()</a> <span>wp-includes/post.php</span> </td> <td class="related-desc"> <p>Retrieves data from a post field based on Post ID.</p> </td> </tr> <tr> <td class="related-title"> <a href="add_post_meta.html">add_post_meta()</a> <span>wp-includes/post.php</span> </td> <td class="related-desc"> <p>Adds a meta field to the given post.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_after_insert_post.html">wp_after_insert_post()</a> <span>wp-includes/post.php</span> </td> <td class="related-desc"> <p>Fires actions after a post, its terms and meta data has been saved.</p> </td> </tr> <tr> <td class="related-title"> <a href="update_post_meta.html">update_post_meta()</a> <span>wp-includes/post.php</span> </td> <td class="related-desc"> <p>Updates a post meta field based on the given post ID.</p> </td> </tr> <tr> <td class="related-title"> <a href="clean_post_cache.html">clean_post_cache()</a> <span>wp-includes/post.php</span> </td> <td class="related-desc"> <p>Will clean the post in the cache.</p> </td> </tr> <tr> <td class="related-title"> <a href="post_type_supports.html">post_type_supports()</a> <span>wp-includes/post.php</span> </td> <td class="related-desc"> <p>Checks a post type’s support for a given feature.</p> </td> </tr> <tr> <td class="related-title"> <a href="delete_post_thumbnail.html">delete_post_thumbnail()</a> <span>wp-includes/post.php</span> </td> <td class="related-desc"> <p>Removes the thumbnail (featured image) from the given post.</p> </td> </tr> <tr> <td class="related-title"> <a href="set_post_thumbnail.html">set_post_thumbnail()</a> <span>wp-includes/post.php</span> </td> <td class="related-desc"> <p>Sets the post thumbnail (featured image) for the given post.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_unique_post_slug.html">wp_unique_post_slug()</a> <span>wp-includes/post.php</span> </td> <td class="related-desc"> <p>Computes a unique slug for the post, when given the desired slug and some post details.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_set_post_categories.html">wp_set_post_categories()</a> <span>wp-includes/post.php</span> </td> <td class="related-desc"> <p>Sets categories for a post.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_set_post_tags.html">wp_set_post_tags()</a> <span>wp-includes/post.php</span> </td> <td class="related-desc"> <p>Sets the tags for a post.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_set_post_terms.html">wp_set_post_terms()</a> <span>wp-includes/post.php</span> </td> <td class="related-desc"> <p>Sets the terms for a post.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_transition_post_status.html">wp_transition_post_status()</a> <span>wp-includes/post.php</span> </td> <td class="related-desc"> <p>Fires actions related to the transitioning of a post’s status.</p> </td> </tr> <tr> <td class="related-title"> <a href="is_object_in_taxonomy.html">is_object_in_taxonomy()</a> <span>wp-includes/taxonomy.php</span> </td> <td class="related-desc"> <p>Determines if the given object type is associated with the given taxonomy.</p> </td> </tr> <tr> <td class="related-title"> <a href="current_time.html">current_time()</a> <span>wp-includes/functions.php</span> </td> <td class="related-desc"> <p>Retrieves the current time based on specified type.</p> </td> </tr> <tr> <td class="related-title"> <a href="sanitize_post.html">sanitize_post()</a> <span>wp-includes/post.php</span> </td> <td class="related-desc"> <p>Sanitizes every post field.</p> </td> </tr> <tr> <td class="related-title"> <a href="get_default_comment_status.html">get_default_comment_status()</a> <span>wp-includes/comment.php</span> </td> <td class="related-desc"> <p>Gets the default comment status for a post type.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wp_theme/get_page_templates.html">WP_Theme::get_page_templates()</a> <span>wp-includes/class-wp-theme.php</span> </td> <td class="related-desc"> <p>Returns the theme’s post templates for a given post type.</p> </td> </tr> <tr> <td class="related-title"> <a href="sanitize_title.html">sanitize_title()</a> <span>wp-includes/formatting.php</span> </td> <td class="related-desc"> <p>Sanitizes a string into a slug, which can be used in URLs or HTML attributes.</p> </td> </tr> <tr> <td class="related-title"> <a href="get_gmt_from_date.html">get_gmt_from_date()</a> <span>wp-includes/formatting.php</span> </td> <td class="related-desc"> <p>Given a date in the timezone of the site, returns that date in UTC.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_add_trashed_suffix_to_post_name_for_trashed_posts.html">wp_add_trashed_suffix_to_post_name_for_trashed_posts()</a> <span>wp-includes/post.php</span> </td> <td class="related-desc"> <p>Adds a suffix if any trashed posts have a given slug.</p> </td> </tr> <tr> <td class="related-title"> <a href="update_attached_file.html">update_attached_file()</a> <span>wp-includes/post.php</span> </td> <td class="related-desc"> <p>Updates attachment file path based on attachment ID.</p> </td> </tr> <tr> <td class="related-title"> <a href="sanitize_trackback_urls.html">sanitize_trackback_urls()</a> <span>wp-includes/formatting.php</span> </td> <td class="related-desc"> <p>Sanitizes space or carriage return separated URLs that are used to send trackbacks.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wpdb/update.html">wpdb::update()</a> <span>wp-includes/class-wpdb.php</span> </td> <td class="related-desc"> <p>Updates a row in the table.</p> </td> </tr> <tr> <td class="related-title"> <a href="get_post_stati.html">get_post_stati()</a> <span>wp-includes/post.php</span> </td> <td class="related-desc"> <p>Gets a list of post statuses.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wpdb/insert.html">wpdb::insert()</a> <span>wp-includes/class-wpdb.php</span> </td> <td class="related-desc"> <p>Inserts a row into the table.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_add_trashed_suffix_to_post_name_for_post.html">wp_add_trashed_suffix_to_post_name_for_post()</a> <span>wp-includes/post.php</span> </td> <td class="related-desc"> <p>Adds a trashed suffix for a given post.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_attachment_is.html">wp_attachment_is()</a> <span>wp-includes/post.php</span> </td> <td class="related-desc"> <p>Verifies an attachment is of a given type.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_encode_emoji.html">wp_encode_emoji()</a> <span>wp-includes/formatting.php</span> </td> <td class="related-desc"> <p>Converts emoji characters to their equivalent HTML entity.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wpdb/get_col_charset.html">wpdb::get_col_charset()</a> <span>wp-includes/class-wpdb.php</span> </td> <td class="related-desc"> <p>Retrieves the character set for the given column.</p> </td> </tr> <tr> <td class="related-title"> <a href="get_post_type_object.html">get_post_type_object()</a> <span>wp-includes/post.php</span> </td> <td class="related-desc"> <p>Retrieves a post type object by name.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wpdb/prepare.html">wpdb::prepare()</a> <span>wp-includes/class-wpdb.php</span> </td> <td class="related-desc"> <p>Prepares a SQL query for safe execution.</p> </td> </tr> <tr> <td class="related-title"> <a href="get_post.html">get_post()</a> <span>wp-includes/post.php</span> </td> <td class="related-desc"> <p>Retrieves post data given a post ID or post object.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wpdb/get_var.html">wpdb::get_var()</a> <span>wp-includes/class-wpdb.php</span> </td> <td class="related-desc"> <p>Retrieves one variable from the database.</p> </td> </tr> <tr> <td class="related-title"> <a href="do_action.html">do_action()</a> <span>wp-includes/plugin.php</span> </td> <td class="related-desc"> <p>Calls the callback functions that have been added to an action hook.</p> </td> </tr> <tr> <td class="related-title"> <a href="get_post_meta.html">get_post_meta()</a> <span>wp-includes/post.php</span> </td> <td class="related-desc"> <p>Retrieves a post meta field for the given post ID.</p> </td> </tr> <tr> <td class="related-title"> <a href="get_current_user_id.html">get_current_user_id()</a> <span>wp-includes/user.php</span> </td> <td class="related-desc"> <p>Gets the current user’s ID.</p> </td> </tr> <tr> <td class="related-title"> <a href="get_option.html">get_option()</a> <span>wp-includes/option.php</span> </td> <td class="related-desc"> <p>Retrieves an option value based on an option name.</p> </td> </tr> <tr> <td class="related-title"> <a href="apply_filters.html">apply_filters()</a> <span>wp-includes/plugin.php</span> </td> <td class="related-desc"> <p>Calls the callback functions that have been added to a filter hook.</p> </td> </tr> <tr> <td class="related-title"> <a href="get_permalink.html">get_permalink()</a> <span>wp-includes/link-template.php</span> </td> <td class="related-desc"> <p>Retrieves the full permalink for the current post or post ID.</p> </td> </tr> <tr> <td class="related-title"> <a href="get_taxonomy.html">get_taxonomy()</a> <span>wp-includes/taxonomy.php</span> </td> <td class="related-desc"> <p>Retrieves the taxonomy object of $taxonomy.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_parse_args.html">wp_parse_args()</a> <span>wp-includes/functions.php</span> </td> <td class="related-desc"> <p>Merges user defined arguments into defaults array.</p> </td> </tr> <tr> <td class="related-title"> <a href="_doing_it_wrong.html">_doing_it_wrong()</a> <span>wp-includes/functions.php</span> </td> <td class="related-desc"> <p>Marks something as being incorrectly called.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_unslash.html">wp_unslash()</a> <span>wp-includes/formatting.php</span> </td> <td class="related-desc"> <p>Removes slashes from a string or recursively removes slashes from strings within an array.</p> </td> </tr> <tr> <td class="related-title"> <a href="__.html">__()</a> <span>wp-includes/l10n.php</span> </td> <td class="related-desc"> <p>Retrieves the translation of $text.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_get_theme.html">wp_get_theme()</a> <span>wp-includes/theme.php</span> </td> <td class="related-desc"> <p>Gets a <a href="../classes/wp_theme.html" rel="class">WP_Theme</a> object for a theme.</p> </td> </tr> <tr> <td class="related-title"> <a href="current_theme_supports.html">current_theme_supports()</a> <span>wp-includes/theme.php</span> </td> <td class="related-desc"> <p>Checks a theme’s support for a given feature.</p> </td> </tr> <tr> <td class="related-title"> <a href="current_user_can.html">current_user_can()</a> <span>wp-includes/capabilities.php</span> </td> <td class="related-desc"> <p>Returns whether the current user has the specified capability.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wp_error/__construct.html">WP_Error::__construct()</a> <span>wp-includes/class-wp-error.php</span> </td> <td class="related-desc"> <p>Initializes the error.</p> </td> </tr> </tbody>

</table>   </article>  <article class="used-by"> <header class="toc-header"><h3 id="used-by">Used By</h3></header> <table id="used-by-table" data-show="5">  <thead> <tr> <th>Used By</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="../classes/wp_theme_json_resolver/get_user_data_from_wp_global_styles.html">WP_Theme_JSON_Resolver::get_user_data_from_wp_global_styles()</a> <span>wp-includes/class-wp-theme-json-resolver.php</span> </td> <td class="related-desc"> <p>Returns the custom post type that contains the user’s origin config for the active theme or a void array if none are found.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wp_rest_templates_controller/update_item.html">WP_REST_Templates_Controller::update_item()</a> <span>wp-includes/rest-api/endpoints/class-wp-rest-templates-controller.php</span> </td> <td class="related-desc"> <p>Updates a single template.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wp_rest_templates_controller/create_item.html">WP_REST_Templates_Controller::create_item()</a> <span>wp-includes/rest-api/endpoints/class-wp-rest-templates-controller.php</span> </td> <td class="related-desc"> <p>Creates a single template.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_create_user_request.html">wp_create_user_request()</a> <span>wp-includes/user.php</span> </td> <td class="related-desc"> <p>Creates and logs a user request to perform a specific action.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wp_customize_manager/save_changeset_post.html">WP_Customize_Manager::save_changeset_post()</a> <span>wp-includes/class-wp-customize-manager.php</span> </td> <td class="related-desc"> <p>Saves the post for the loaded changeset.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_update_custom_css_post.html">wp_update_custom_css_post()</a> <span>wp-includes/theme.php</span> </td> <td class="related-desc"> <p>Updates the <code>custom_css</code> post for a given theme.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wp_rest_posts_controller/create_item.html">WP_REST_Posts_Controller::create_item()</a> <span>wp-includes/rest-api/endpoints/class-wp-rest-posts-controller.php</span> </td> <td class="related-desc"> <p>Creates a single post.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wp_customize_nav_menus/insert_auto_draft_post.html">WP_Customize_Nav_Menus::insert_auto_draft_post()</a> <span>wp-includes/class-wp-customize-nav-menus.php</span> </td> <td class="related-desc"> <p>Adds a new <code>auto-draft</code> post.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_write_post.html">wp_write_post()</a> <span>wp-admin/includes/post.php</span> </td> <td class="related-desc"> <p>Creates a new post from the “Write Post” form using <code>$_POST</code> information.</p> </td> </tr> <tr> <td class="related-title"> <a href="get_default_post_to_edit.html">get_default_post_to_edit()</a> <span>wp-admin/includes/post.php</span> </td> <td class="related-desc"> <p>Returns default post information to use when populating the “Write Post” form.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wp_embed/shortcode.html">WP_Embed::shortcode()</a> <span>wp-includes/class-wp-embed.php</span> </td> <td class="related-desc"> <p>The <a href="do_shortcode.html" rel="function">do_shortcode()</a> callback function.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_insert_attachment.html">wp_insert_attachment()</a> <span>wp-includes/post.php</span> </td> <td class="related-desc"> <p>Inserts an attachment.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_update_post.html">wp_update_post()</a> <span>wp-includes/post.php</span> </td> <td class="related-desc"> <p>Updates a post with new post data.</p> </td> </tr> <tr> <td class="related-title"> <a href="_wp_put_post_revision.html">_wp_put_post_revision()</a> <span>wp-includes/revision.php</span> </td> <td class="related-desc"> <p>Inserts post data into the posts table as a post revision.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_update_nav_menu_item.html">wp_update_nav_menu_item()</a> <span>wp-includes/nav-menu.php</span> </td> <td class="related-desc"> <p>Saves the properties of a menu item or create a new one.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wp_xmlrpc_server/blogger_newpost.html">wp_xmlrpc_server::blogger_newPost()</a> <span>wp-includes/class-wp-xmlrpc-server.php</span> </td> <td class="related-desc"> <p>Creates new post.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wp_xmlrpc_server/mw_newpost.html">wp_xmlrpc_server::mw_newPost()</a> <span>wp-includes/class-wp-xmlrpc-server.php</span> </td> <td class="related-desc"> <p>Create a new post.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wp_xmlrpc_server/_insert_post.html">wp_xmlrpc_server::_insert_post()</a> <span>wp-includes/class-wp-xmlrpc-server.php</span> </td> <td class="related-desc"> <p>Helper method for wp_newPost() and wp_editPost(), containing shared logic.</p> </td> </tr> </tbody>

</table>   </article> </section>  <section> <header class="toc-header"><h2 id="changelog">Changelog</h2></header> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/5.6.0/" alt="WordPress 5.6.0">5.6.0</a></td> <td><span class="since-description">Added the <code>$fire_after_hooks</code> parameter.</span></td> </tr> <tr> <td><a href="https://developer.wordpress.org/reference/since/4.4.0/" alt="WordPress 4.4.0">4.4.0</a></td> <td><span class="since-description">A <code>'meta_input'</code> array can now be passed to <code>$postarr</code> to add post meta data.</span></td> </tr> <tr> <td><a href="https://developer.wordpress.org/reference/since/4.2.0/" alt="WordPress 4.2.0">4.2.0</a></td> <td><span class="since-description">Support was added for encoding emoji in the post title, content, and excerpt.</span></td> </tr> <tr> <td><a href="https://developer.wordpress.org/reference/since/2.6.0/" alt="WordPress 2.6.0">2.6.0</a></td> <td><span class="since-description">Added the <code>$wp_error</code> parameter to allow a <a href="../classes/wp_error.html" rel="class">WP_Error</a> to be returned on failure.</span></td> </tr> <tr> <td><a href="https://developer.wordpress.org/reference/since/1.0.0/" alt="WordPress 1.0.0">1.0.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2003&ndash;2022 WordPress Foundation<br>Licensed under the GNU GPLv2+ License.<br>
    <a href="https://developer.wordpress.org/reference/functions/wp_insert_post" class="_attribution-link">https://developer.wordpress.org/reference/functions/wp_insert_post</a>
  </p>
</div>
