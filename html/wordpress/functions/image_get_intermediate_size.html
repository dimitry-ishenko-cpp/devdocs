<h1>image_get_intermediate_size( int $post_id, string|int[] $size = 'thumbnail' ): array|false</h1>  <section> <p>Retrieves the image’s intermediate size (resized) path, width, and height.</p> </section>   <section> <header class="toc-header"><h2 id="description">Description</h2></header> <p>The $size parameter can be an array with the width and height respectively.<br>If the size matches the ‘sizes’ metadata array for width and height, then it will be used. If there is no direct match, then the nearest image size larger than the specified size will be used. If nothing is found, then the function will break out and return false.</p> <p>The metadata ‘sizes’ is used for compatible sizes that can be used for the parameter $size value.</p> <p>The url path will be given, when the $size parameter is a string.</p> <p>If you are passing an array for the $size, you should consider using <a href="add_image_size.html" rel="function">add_image_size()</a> so that a cropped version is generated. It’s much more efficient than having to find the closest-sized image and then having the browser scale down the image.</p> </section>  <section> <header class="toc-header"><h2 id="parameters">Parameters</h2></header> <dl> <dt> <code>$post_id</code> <span class="type"><span class="int">int</span></span> <span class="required">Required</span> </dt> <dd> <div class="desc"> <span class="description">Attachment ID.</span> </div> </dd> <dt> <code>$size</code> <span class="type"><span class="string">string</span>|<span class="int[]">int[]</span></span> <span class="required">Optional</span> </dt> <dd> <div class="desc"> <span class="description"> Image size. Accepts any registered image size name, or an array of width and height values in pixels (in that order). Default <code>'thumbnail'</code>.</span> </div> <p class="default">Default: <code>'thumbnail'</code></p> </dd> </dl> </section>  <section> <header class="toc-header"><h2 id="return">Return</h2></header> <p><span class="return-type">array|false</span> Array of file relative path, width, and height on success. Additionally includes absolute path and URL if registered size is passed to <code>$size</code> parameter. False on failure.<br> </p>
<ul class="param-hash">
<li>
<code>file</code><span class="type">string</span><div class="desc">Path of image relative to uploads directory.</div>
</li> <li>
<code>width</code><span class="type">int</span><div class="desc">Width of image in pixels.</div>
</li> <li>
<code>height</code><span class="type">int</span><div class="desc">Height of image in pixels.</div>
</li> <li>
<code>path</code><span class="type">string</span><div class="desc">Absolute filesystem path of image.</div>
</li> <li>
<code>url</code><span class="type">string</span><div class="desc">URL of image.</div>
</li> </ul> </section>  <section> <header class="toc-header"><h2 id="source">Source</h2></header> <p> File: <code>wp-includes/media.php</code>. <a href="https://developer.wordpress.org/reference/files/wp-includes/media.php/">View all references</a> </p> <pre class="wp-block-code" data-start="759" aria-label="Function source code" data-language="php"><code lang="php" class="language-php line-numbers">function image_get_intermediate_size( $post_id, $size = 'thumbnail' ) {
	$imagedata = wp_get_attachment_metadata( $post_id );

	if ( ! $size || ! is_array( $imagedata ) || empty( $imagedata['sizes'] ) ) {
		return false;
	}

	$data = array();

	// Find the best match when '$size' is an array.
	if ( is_array( $size ) ) {
		$candidates = array();

		if ( ! isset( $imagedata['file'] ) &amp;&amp; isset( $imagedata['sizes']['full'] ) ) {
			$imagedata['height'] = $imagedata['sizes']['full']['height'];
			$imagedata['width']  = $imagedata['sizes']['full']['width'];
		}

		foreach ( $imagedata['sizes'] as $_size =&gt; $data ) {
			// If there's an exact match to an existing image size, short circuit.
			if ( (int) $data['width'] === (int) $size[0] &amp;&amp; (int) $data['height'] === (int) $size[1] ) {
				$candidates[ $data['width'] * $data['height'] ] = $data;
				break;
			}

			// If it's not an exact match, consider larger sizes with the same aspect ratio.
			if ( $data['width'] &gt;= $size[0] &amp;&amp; $data['height'] &gt;= $size[1] ) {
				// If '0' is passed to either size, we test ratios against the original file.
				if ( 0 === $size[0] || 0 === $size[1] ) {
					$same_ratio = wp_image_matches_ratio( $data['width'], $data['height'], $imagedata['width'], $imagedata['height'] );
				} else {
					$same_ratio = wp_image_matches_ratio( $data['width'], $data['height'], $size[0], $size[1] );
				}

				if ( $same_ratio ) {
					$candidates[ $data['width'] * $data['height'] ] = $data;
				}
			}
		}

		if ( ! empty( $candidates ) ) {
			// Sort the array by size if we have more than one candidate.
			if ( 1 &lt; count( $candidates ) ) {
				ksort( $candidates );
			}

			$data = array_shift( $candidates );
			/*
			* When the size requested is smaller than the thumbnail dimensions, we
			* fall back to the thumbnail size to maintain backward compatibility with
			* pre 4.6 versions of WordPress.
			*/
		} elseif ( ! empty( $imagedata['sizes']['thumbnail'] ) &amp;&amp; $imagedata['sizes']['thumbnail']['width'] &gt;= $size[0] &amp;&amp; $imagedata['sizes']['thumbnail']['width'] &gt;= $size[1] ) {
			$data = $imagedata['sizes']['thumbnail'];
		} else {
			return false;
		}

		// Constrain the width and height attributes to the requested values.
		list( $data['width'], $data['height'] ) = image_constrain_size_for_editor( $data['width'], $data['height'], $size );

	} elseif ( ! empty( $imagedata['sizes'][ $size ] ) ) {
		$data = $imagedata['sizes'][ $size ];
	}

	// If we still don't have a match at this point, return false.
	if ( empty( $data ) ) {
		return false;
	}

	// Include the full filesystem path of the intermediate file.
	if ( empty( $data['path'] ) &amp;&amp; ! empty( $data['file'] ) &amp;&amp; ! empty( $imagedata['file'] ) ) {
		$file_url     = wp_get_attachment_url( $post_id );
		$data['path'] = path_join( dirname( $imagedata['file'] ), $data['file'] );
		$data['url']  = path_join( dirname( $file_url ), $data['file'] );
	}

	/**
	 * Filters the output of image_get_intermediate_size()
	 *
	 * @since 4.4.0
	 *
	 * @see image_get_intermediate_size()
	 *
	 * @param array        $data    Array of file relative path, width, and height on success. May also include
	 *                              file absolute path and URL.
	 * @param int          $post_id The ID of the image attachment.
	 * @param string|int[] $size    Requested image size. Can be any registered image size name, or
	 *                              an array of width and height values in pixels (in that order).
	 */
	return apply_filters( 'image_get_intermediate_size', $data, $post_id, $size );
}
</code></pre>  </section>  <section> <header class="toc-header"><h2 id="hooks">Hooks</h2></header> <article class="hooks"> <dl> <dt class="signature-highlight"> <a href="../hooks/image_get_intermediate_size.html" style="text-decoration: none"> <span class="hook-func">apply_filters</span>( 'image_get_intermediate_size', <nobr><span class="arg-type">array</span> <span class="arg-name">$data</span></nobr>, <nobr><span class="arg-type">int</span> <span class="arg-name">$post_id</span></nobr>, <nobr><span class="arg-type">string|int[]</span> <span class="arg-name">$size</span></nobr> ) </a> </dt> <dd class="hook-desc"> 
<p>Filters the output of <a href="image_get_intermediate_size.html" rel="function">image_get_intermediate_size()</a> </p> </dd> </dl> </article> </section>  <section> <header class="toc-header"><h2 id="related">Related</h2></header> <article class="uses"> <header class="toc-header"><h3 id="uses">Uses</h3></header> <table id="uses-table" data-show="5">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="wp_image_matches_ratio.html">wp_image_matches_ratio()</a> <span>wp-includes/media.php</span> </td> <td class="related-desc"> <p>Helper function to test if aspect ratios for two images match.</p> </td> </tr> <tr> <td class="related-title"> <a href="path_join.html">path_join()</a> <span>wp-includes/functions.php</span> </td> <td class="related-desc"> <p>Joins two filesystem paths together.</p> </td> </tr> <tr> <td class="related-title"> <a href="image_constrain_size_for_editor.html">image_constrain_size_for_editor()</a> <span>wp-includes/media.php</span> </td> <td class="related-desc"> <p>Scales down the default size of an image.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_get_attachment_metadata.html">wp_get_attachment_metadata()</a> <span>wp-includes/post.php</span> </td> <td class="related-desc"> <p>Retrieves attachment metadata for attachment ID.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_get_attachment_url.html">wp_get_attachment_url()</a> <span>wp-includes/post.php</span> </td> <td class="related-desc"> <p>Retrieves the URL for an attachment.</p> </td> </tr> <tr> <td class="related-title"> <a href="apply_filters.html">apply_filters()</a> <span>wp-includes/plugin.php</span> </td> <td class="related-desc"> <p>Calls the callback functions that have been added to a filter hook.</p> </td> </tr> </tbody>

</table>   </article>  <article class="used-by"> <header class="toc-header"><h3 id="used-by">Used By</h3></header> <table id="used-by-table" data-show="5">  <thead> <tr> <th>Used By</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="wp_image_editor.html">wp_image_editor()</a> <span>wp-admin/includes/image-edit.php</span> </td> <td class="related-desc"> <p>Loads the WP image-editing interface.</p> </td> </tr> <tr> <td class="related-title"> <a href="_load_image_to_edit_path.html">_load_image_to_edit_path()</a> <span>wp-admin/includes/image.php</span> </td> <td class="related-desc"> <p>Retrieves the path or URL of an attachment’s attached file.</p> </td> </tr> <tr> <td class="related-title"> <a href="image_downsize.html">image_downsize()</a> <span>wp-includes/media.php</span> </td> <td class="related-desc"> <p>Scales an image to fit a particular size (such as ‘thumb’ or ‘medium’).</p> </td> </tr> </tbody>

</table> </article> </section>  <section> <header class="toc-header"><h2 id="changelog">Changelog</h2></header> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/2.5.0/" alt="WordPress 2.5.0">2.5.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2003&ndash;2022 WordPress Foundation<br>Licensed under the GNU GPLv2+ License.<br>
    <a href="https://developer.wordpress.org/reference/functions/image_get_intermediate_size" class="_attribution-link">https://developer.wordpress.org/reference/functions/image_get_intermediate_size</a>
  </p>
</div>
