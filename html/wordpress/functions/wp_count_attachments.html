<h1>wp_count_attachments( string|string[] $mime_type = '' ): stdClass</h1>  <section> <p>Counts number of attachments for the mime type(s).</p> </section>   <section> <header class="toc-header"><h2 id="description">Description</h2></header> <p>If you set the optional mime_type parameter, then an array will still be returned, but will only have the item you are looking for. It does not give you the number of attachments that are children of a post. You can get that by counting the number of children that post has.</p> </section>  <section> <header class="toc-header"><h2 id="parameters">Parameters</h2></header> <dl> <dt> <code>$mime_type</code> <span class="type"><span class="string">string</span>|<span class="string[]">string[]</span></span> <span class="required">Optional</span> </dt> <dd> <div class="desc"> <span class="description"> Array or comma-separated list of MIME patterns. </span> </div> <p class="default">Default: <code>''</code></p> </dd> </dl> </section>  <section> <header class="toc-header"><h2 id="return">Return</h2></header> <p><span class="return-type">stdClass</span> An object containing the attachment counts by mime type.</p> </section>  <section> <header class="toc-header"><h2 id="source">Source</h2></header> <p> File: <code>wp-includes/post.php</code>. <a href="https://developer.wordpress.org/reference/files/wp-includes/post.php/">View all references</a> </p> <pre class="wp-block-code" data-start="3089" aria-label="Function source code" data-language="php"><code lang="php" class="language-php line-numbers">function wp_count_attachments( $mime_type = '' ) {
	global $wpdb;

	$cache_key = sprintf(
		'attachments%s',
		! empty( $mime_type ) ? ':' . str_replace( '/', '_', implode( '-', (array) $mime_type ) ) : ''
	);

	$counts = wp_cache_get( $cache_key, 'counts' );
	if ( false == $counts ) {
		$and   = wp_post_mime_type_where( $mime_type );
		$count = $wpdb-&gt;get_results( "SELECT post_mime_type, COUNT( * ) AS num_posts FROM $wpdb-&gt;posts WHERE post_type = 'attachment' AND post_status != 'trash' $and GROUP BY post_mime_type", ARRAY_A );

		$counts = array();
		foreach ( (array) $count as $row ) {
			$counts[ $row['post_mime_type'] ] = $row['num_posts'];
		}
		$counts['trash'] = $wpdb-&gt;get_var( "SELECT COUNT( * ) FROM $wpdb-&gt;posts WHERE post_type = 'attachment' AND post_status = 'trash' $and" );

		wp_cache_set( $cache_key, (object) $counts, 'counts' );
	}

	/**
	 * Modifies returned attachment counts by mime type.
	 *
	 * @since 3.7.0
	 *
	 * @param stdClass        $counts    An object containing the attachment counts by
	 *                                   mime type.
	 * @param string|string[] $mime_type Array or comma-separated list of MIME patterns.
	 */
	return apply_filters( 'wp_count_attachments', (object) $counts, $mime_type );
}
</code></pre>  </section>  <section> <header class="toc-header"><h2 id="hooks">Hooks</h2></header> <article class="hooks"> <dl> <dt class="signature-highlight"> <a href="../hooks/wp_count_attachments.html" style="text-decoration: none"> <span class="hook-func">apply_filters</span>( 'wp_count_attachments', <nobr><span class="arg-type">stdClass</span> <span class="arg-name">$counts</span></nobr>, <nobr><span class="arg-type">string|string[]</span> <span class="arg-name">$mime_type</span></nobr> ) </a> </dt> <dd class="hook-desc"> 
<p>Modifies returned attachment counts by mime type.</p> </dd> </dl> </article> </section>  <section> <header class="toc-header"><h2 id="related">Related</h2></header> <article class="uses"> <header class="toc-header"><h3 id="uses">Uses</h3></header> <table id="uses-table" data-show="2">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="wp_cache_set.html">wp_cache_set()</a> <span>wp-includes/cache.php</span> </td> <td class="related-desc"> <p>Saves the data to the cache.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_post_mime_type_where.html">wp_post_mime_type_where()</a> <span>wp-includes/post.php</span> </td> <td class="related-desc"> <p>Converts MIME types into SQL.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_cache_get.html">wp_cache_get()</a> <span>wp-includes/cache.php</span> </td> <td class="related-desc"> <p>Retrieves the cache contents from the cache by key and group.</p> </td> </tr> <tr> <td class="related-title"> <a href="apply_filters.html">apply_filters()</a> <span>wp-includes/plugin.php</span> </td> <td class="related-desc"> <p>Calls the callback functions that have been added to a filter hook.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wpdb/get_results.html">wpdb::get_results()</a> <span>wp-includes/class-wpdb.php</span> </td> <td class="related-desc"> <p>Retrieves an entire SQL result set from the database (i.e., many rows).</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wpdb/get_var.html">wpdb::get_var()</a> <span>wp-includes/class-wpdb.php</span> </td> <td class="related-desc"> <p>Retrieves one variable from the database.</p> </td> </tr> </tbody>

</table>   </article>  <article class="used-by"> <header class="toc-header"><h3 id="used-by">Used By</h3></header> <table id="used-by-table" data-show="5">  <thead> <tr> <th>Used By</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="media_upload_library_form.html">media_upload_library_form()</a> <span>wp-admin/includes/media.php</span> </td> <td class="related-desc"> <p>Outputs the legacy media upload form for the media library.</p> </td> </tr> </tbody>

</table> </article> </section>  <section> <header class="toc-header"><h2 id="changelog">Changelog</h2></header> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/2.5.0/" alt="WordPress 2.5.0">2.5.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2003&ndash;2022 WordPress Foundation<br>Licensed under the GNU GPLv2+ License.<br>
    <a href="https://developer.wordpress.org/reference/functions/wp_count_attachments" class="_attribution-link">https://developer.wordpress.org/reference/functions/wp_count_attachments</a>
  </p>
</div>
