<h1>plugins_api( string $action, array|object $args = array() ): object|array|WP_Error</h1>  <section> <p>Retrieves plugin installer pages from the WordPress.org Plugins API.</p> </section>   <section> <header class="toc-header"><h2 id="description">Description</h2></header> <p>It is possible for a plugin to override the Plugin API result with three filters. Assume this is for plugins, which can extend on the Plugin Info to offer more choices. This is very powerful and must be used with care when overriding the filters.</p> <p>The first filter, <a href="../hooks/plugins_api_args.html">‘plugins_api_args’</a>, is for the args and gives the action as the second parameter. The hook for <a href="../hooks/plugins_api_args.html">‘plugins_api_args’</a> must ensure that an object is returned.</p> <p>The second filter, <a href="../hooks/plugins_api.html">‘plugins_api’</a>, allows a plugin to override the WordPress.org Plugin Installation API entirely. If <code>$action</code> is ‘query_plugins’ or ‘plugin_information’, an object MUST be passed. If <code>$action</code> is ‘hot_tags’ or ‘hot_categories’, an array MUST be passed.</p> <p>Finally, the third filter, <a href="../hooks/plugins_api_result.html">‘plugins_api_result’</a>, makes it possible to filter the response object or array, depending on the <code>$action</code> type.</p> <p>Supported arguments per action:</p> <table> <thead> <tr> <th>Argument Name</th> <th style="text-align: center">query_plugins</th> <th style="text-align: center">plugin_information</th> <th style="text-align: center">hot_tags</th> <th style="text-align: center">hot_categories</th> </tr> </thead> <tbody> <tr> <td><code>$slug</code></td> <td style="text-align: center">No</td> <td style="text-align: center">Yes</td> <td style="text-align: center">No</td> <td style="text-align: center">No</td> </tr> <tr> <td><code>$per_page</code></td> <td style="text-align: center">Yes</td> <td style="text-align: center">No</td> <td style="text-align: center">No</td> <td style="text-align: center">No</td> </tr> <tr> <td><code>$page</code></td> <td style="text-align: center">Yes</td> <td style="text-align: center">No</td> <td style="text-align: center">No</td> <td style="text-align: center">No</td> </tr> <tr> <td><code>$number</code></td> <td style="text-align: center">No</td> <td style="text-align: center">No</td> <td style="text-align: center">Yes</td> <td style="text-align: center">Yes</td> </tr> <tr> <td><code>$search</code></td> <td style="text-align: center">Yes</td> <td style="text-align: center">No</td> <td style="text-align: center">No</td> <td style="text-align: center">No</td> </tr> <tr> <td><code>$tag</code></td> <td style="text-align: center">Yes</td> <td style="text-align: center">No</td> <td style="text-align: center">No</td> <td style="text-align: center">No</td> </tr> <tr> <td><code>$author</code></td> <td style="text-align: center">Yes</td> <td style="text-align: center">No</td> <td style="text-align: center">No</td> <td style="text-align: center">No</td> </tr> <tr> <td><code>$user</code></td> <td style="text-align: center">Yes</td> <td style="text-align: center">No</td> <td style="text-align: center">No</td> <td style="text-align: center">No</td> </tr> <tr> <td><code>$browse</code></td> <td style="text-align: center">Yes</td> <td style="text-align: center">No</td> <td style="text-align: center">No</td> <td style="text-align: center">No</td> </tr> <tr> <td><code>$locale</code></td> <td style="text-align: center">Yes</td> <td style="text-align: center">Yes</td> <td style="text-align: center">No</td> <td style="text-align: center">No</td> </tr> <tr> <td><code>$installed_plugins</code></td> <td style="text-align: center">Yes</td> <td style="text-align: center">No</td> <td style="text-align: center">No</td> <td style="text-align: center">No</td> </tr> <tr> <td><code>$is_ssl</code></td> <td style="text-align: center">Yes</td> <td style="text-align: center">Yes</td> <td style="text-align: center">No</td> <td style="text-align: center">No</td> </tr> <tr> <td><code>$fields</code></td> <td style="text-align: center">Yes</td> <td style="text-align: center">Yes</td> <td style="text-align: center">No</td> <td style="text-align: center">No</td> </tr> </tbody> </table> </section>  <section> <header class="toc-header"><h2 id="parameters">Parameters</h2></header> <dl> <dt> <code>$action</code> <span class="type"><span class="string">string</span></span> <span class="required">Required</span> </dt> <dd> <div class="desc"> <span class="description">API action to perform: <code>'query_plugins'</code>, <code>'plugin_information'</code>, <code>'hot_tags'</code> or <code>'hot_categories'</code>.</span> </div> </dd> <dt> <code>$args</code> <span class="type"><span class="array">array</span>|<span class="object">object</span></span> <span class="required">Optional</span> </dt> <dd> <div class="desc"> <span class="description">Array or object of arguments to serialize for the Plugin Info API.<br> <ul class="param-hash">
<li>
<code>slug</code><span class="type">string</span><div class="desc">The plugin slug. </div>
</li> <li>
<code>per_page</code><span class="type">int</span><div class="desc">Number of plugins per page. Default 24.</div>
</li> <li>
<code>page</code><span class="type">int</span><div class="desc">Number of current page. Default 1.</div>
</li> <li>
<code>number</code><span class="type">int</span><div class="desc">Number of tags or categories to be queried.</div>
</li> <li>
<code>search</code><span class="type">string</span><div class="desc">A search term. </div>
</li> <li>
<code>tag</code><span class="type">string</span><div class="desc">Tag to filter plugins. </div>
</li> <li>
<code>author</code><span class="type">string</span><div class="desc">Username of an plugin author to filter plugins. </div>
</li> <li>
<code>user</code><span class="type">string</span><div class="desc">Username to query for their favorites. </div>
</li> <li>
<code>browse</code><span class="type">string</span><div class="desc">Browse view: <code>'popular'</code>, <code>'new'</code>, <code>'beta'</code>, <code>'recommended'</code>.</div>
</li> <li>
<code>locale</code><span class="type">string</span><div class="desc">Locale to provide context-sensitive results. Default is the value of <a href="get_locale.html" rel="function">get_locale()</a> .</div>
</li> <li>
<code>installed_plugins</code><span class="type">string</span><div class="desc">Installed plugins to provide context-sensitive results.</div>
</li> <li>
<code>is_ssl</code><span class="type">bool</span><div class="desc">Whether links should be returned with https or not. Default false.</div>
</li> <li>
<code>fields</code><span class="type">array</span><div class="desc"> Array of fields which should or should not be returned.<ul class="param-hash"> <li>
<code>short_description</code><span class="type">bool</span><div class="desc">Whether to return the plugin short description. Default true.</div>
</li> <li>
<code>description</code><span class="type">bool</span><div class="desc">Whether to return the plugin full description. Default false.</div>
</li> <li>
<code>sections</code><span class="type">bool</span><div class="desc">Whether to return the plugin readme sections: description, installation, FAQ, screenshots, other notes, and changelog. Default false.</div>
</li> <li>
<code>tested</code><span class="type">bool</span><div class="desc">Whether to return the 'Compatible up to' value. Default true.</div>
</li> <li>
<code>requires</code><span class="type">bool</span><div class="desc">Whether to return the required WordPress version. Default true.</div>
</li> <li>
<code>requires_php</code><span class="type">bool</span><div class="desc">Whether to return the required PHP version. Default true.</div>
</li> <li>
<code>rating</code><span class="type">bool</span><div class="desc">Whether to return the rating in percent and total number of ratings.<br> Default true.</div>
</li> <li>
<code>ratings</code><span class="type">bool</span><div class="desc">Whether to return the number of rating for each star (1-5). Default true.</div>
</li> <li>
<code>downloaded</code><span class="type">bool</span><div class="desc">Whether to return the download count. Default true.</div>
</li> <li>
<code>downloadlink</code><span class="type">bool</span><div class="desc">Whether to return the download link for the package. Default true.</div>
</li> <li>
<code>last_updated</code><span class="type">bool</span><div class="desc">Whether to return the date of the last update. Default true.</div>
</li> <li>
<code>added</code><span class="type">bool</span><div class="desc">Whether to return the date when the plugin was added to the wordpress.org repository. Default true.</div>
</li> <li>
<code>tags</code><span class="type">bool</span><div class="desc">Whether to return the assigned tags. Default true.</div>
</li> <li>
<code>compatibility</code><span class="type">bool</span><div class="desc">Whether to return the WordPress compatibility list. Default true.</div>
</li> <li>
<code>homepage</code><span class="type">bool</span><div class="desc">Whether to return the plugin homepage link. Default true.</div>
</li> <li>
<code>versions</code><span class="type">bool</span><div class="desc">Whether to return the list of all available versions. Default false.</div>
</li> <li>
<code>donate_link</code><span class="type">bool</span><div class="desc">Whether to return the donation link. Default true.</div>
</li> <li>
<code>reviews</code><span class="type">bool</span><div class="desc">Whether to return the plugin reviews. Default false.</div>
</li> <li>
<code>banners</code><span class="type">bool</span><div class="desc">Whether to return the banner images links. Default false.</div>
</li> <li>
<code>icons</code><span class="type">bool</span><div class="desc">Whether to return the icon links. Default false.</div>
</li> <li>
<code>active_installs</code><span class="type">bool</span><div class="desc">Whether to return the number of active installations. Default false.</div>
</li> <li>
<code>group</code><span class="type">bool</span><div class="desc">Whether to return the assigned group. Default false.</div>
</li> <li>
<code>contributors</code><span class="type">bool</span><div class="desc">Whether to return the list of contributors. Default false.<br> </div>
</li> </ul> </div> <p class="default">Default: <code>array()</code></p>  <section> <header class="toc-header"><h2 id="return">Return</h2></header> <p><span class="return-type">object|array|<a href="../classes/wp_error.html" rel="class">WP_Error</a></span> Response object or array on success, <a href="../classes/wp_error.html" rel="class">WP_Error</a> on failure. See the <a href="plugins_api.html"> function reference article</a> for more information on the make-up of possible return values depending on the value of <code>$action</code>.</p> </section>  <section> <header class="toc-header"><h2 id="source">Source</h2></header> <p> File: <code>wp-admin/includes/plugin-install.php</code>. <a href="https://developer.wordpress.org/reference/files/wp-admin/includes/plugin-install.php/">View all references</a> </p> <pre class="wp-block-code" data-start="102" aria-label="Function source code" data-language="php"><code lang="php" class="language-php line-numbers">function plugins_api( $action, $args = array() ) {
	// Include an unmodified $wp_version.
	require ABSPATH . WPINC . '/version.php';

	if ( is_array( $args ) ) {
		$args = (object) $args;
	}

	if ( 'query_plugins' === $action ) {
		if ( ! isset( $args-&gt;per_page ) ) {
			$args-&gt;per_page = 24;
		}
	}

	if ( ! isset( $args-&gt;locale ) ) {
		$args-&gt;locale = get_user_locale();
	}

	if ( ! isset( $args-&gt;wp_version ) ) {
		$args-&gt;wp_version = substr( $wp_version, 0, 3 ); // x.y
	}

	/**
	 * Filters the WordPress.org Plugin Installation API arguments.
	 *
	 * Important: An object MUST be returned to this filter.
	 *
	 * @since 2.7.0
	 *
	 * @param object $args   Plugin API arguments.
	 * @param string $action The type of information being requested from the Plugin Installation API.
	 */
	$args = apply_filters( 'plugins_api_args', $args, $action );

	/**
	 * Filters the response for the current WordPress.org Plugin Installation API request.
	 *
	 * Returning a non-false value will effectively short-circuit the WordPress.org API request.
	 *
	 * If `$action` is 'query_plugins' or 'plugin_information', an object MUST be passed.
	 * If `$action` is 'hot_tags' or 'hot_categories', an array should be passed.
	 *
	 * @since 2.7.0
	 *
	 * @param false|object|array $result The result object or array. Default false.
	 * @param string             $action The type of information being requested from the Plugin Installation API.
	 * @param object             $args   Plugin API arguments.
	 */
	$res = apply_filters( 'plugins_api', false, $action, $args );

	if ( false === $res ) {

		$url = 'http://api.wordpress.org/plugins/info/1.2/';
		$url = add_query_arg(
			array(
				'action'  =&gt; $action,
				'request' =&gt; $args,
			),
			$url
		);

		$http_url = $url;
		$ssl      = wp_http_supports( array( 'ssl' ) );
		if ( $ssl ) {
			$url = set_url_scheme( $url, 'https' );
		}

		$http_args = array(
			'timeout'    =&gt; 15,
			'user-agent' =&gt; 'WordPress/' . $wp_version . '; ' . home_url( '/' ),
		);
		$request   = wp_remote_get( $url, $http_args );

		if ( $ssl &amp;&amp; is_wp_error( $request ) ) {
			if ( ! wp_is_json_request() ) {
				trigger_error(
					sprintf(
						/* translators: %s: Support forums URL. */
						__( 'An unexpected error occurred. Something may be wrong with WordPress.org or this server&amp;#8217;s configuration. If you continue to have problems, please try the &lt;a href="%s.html"&gt;support forums&lt;/a&gt;.' ),
						__( 'https://wordpress.org/support/forums/' )
					) . ' ' . __( '(WordPress could not establish a secure connection to WordPress.org. Please contact your server administrator.)' ),
					headers_sent() || WP_DEBUG ? E_USER_WARNING : E_USER_NOTICE
				);
			}

			$request = wp_remote_get( $http_url, $http_args );
		}

		if ( is_wp_error( $request ) ) {
			$res = new WP_Error(
				'plugins_api_failed',
				sprintf(
					/* translators: %s: Support forums URL. */
					__( 'An unexpected error occurred. Something may be wrong with WordPress.org or this server&amp;#8217;s configuration. If you continue to have problems, please try the &lt;a href="%s.html"&gt;support forums&lt;/a&gt;.' ),
					__( 'https://wordpress.org/support/forums/' )
				),
				$request-&gt;get_error_message()
			);
		} else {
			$res = json_decode( wp_remote_retrieve_body( $request ), true );
			if ( is_array( $res ) ) {
				// Object casting is required in order to match the info/1.0 format.
				$res = (object) $res;
			} elseif ( null === $res ) {
				$res = new WP_Error(
					'plugins_api_failed',
					sprintf(
						/* translators: %s: Support forums URL. */
						__( 'An unexpected error occurred. Something may be wrong with WordPress.org or this server&amp;#8217;s configuration. If you continue to have problems, please try the &lt;a href="%s.html"&gt;support forums&lt;/a&gt;.' ),
						__( 'https://wordpress.org/support/forums/' )
					),
					wp_remote_retrieve_body( $request )
				);
			}

			if ( isset( $res-&gt;error ) ) {
				$res = new WP_Error( 'plugins_api_failed', $res-&gt;error );
			}
		}
	} elseif ( ! is_wp_error( $res ) ) {
		$res-&gt;external = true;
	}

	/**
	 * Filters the Plugin Installation API response results.
	 *
	 * @since 2.7.0
	 *
	 * @param object|WP_Error $res    Response object or WP_Error.
	 * @param string          $action The type of information being requested from the Plugin Installation API.
	 * @param object          $args   Plugin API arguments.
	 */
	return apply_filters( 'plugins_api_result', $res, $action, $args );
}
</code></pre>  </section>  <section> <header class="toc-header"><h2 id="hooks">Hooks</h2></header> <article class="hooks"> <dl> <dt class="signature-highlight"> <a href="../hooks/plugins_api.html" style="text-decoration: none"> <span class="hook-func">apply_filters</span>( 'plugins_api', <nobr><span class="arg-type">false|object|array</span> <span class="arg-name">$result</span></nobr>, <nobr><span class="arg-type">string</span> <span class="arg-name">$action</span></nobr>, <nobr><span class="arg-type">object</span> <span class="arg-name">$args</span></nobr> ) </a> </dt> <dd class="hook-desc"> 
<p>Filters the response for the current WordPress.org Plugin Installation API request.</p> </dd> </dl> <dl> <dt class="signature-highlight"> <a href="../hooks/plugins_api_args.html" style="text-decoration: none"> <span class="hook-func">apply_filters</span>( 'plugins_api_args', <nobr><span class="arg-type">object</span> <span class="arg-name">$args</span></nobr>, <nobr><span class="arg-type">string</span> <span class="arg-name">$action</span></nobr> ) </a> </dt> <dd class="hook-desc"> 
<p>Filters the WordPress.org Plugin Installation API arguments.</p> </dd> </dl> <dl> <dt class="signature-highlight"> <a href="../hooks/plugins_api_result.html" style="text-decoration: none"> <span class="hook-func">apply_filters</span>( 'plugins_api_result', <nobr><span class="arg-type">object|WP_Error</span> <span class="arg-name">$res</span></nobr>, <nobr><span class="arg-type">string</span> <span class="arg-name">$action</span></nobr>, <nobr><span class="arg-type">object</span> <span class="arg-name">$args</span></nobr> ) </a> </dt> <dd class="hook-desc"> 
<p>Filters the Plugin Installation API response results.</p> </dd> </dl> </article> </section>  <section> <header class="toc-header"><h2 id="related">Related</h2></header> <article class="uses"> <header class="toc-header"><h3 id="uses">Uses</h3></header> <table id="uses-table" data-show="5">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="wp_is_json_request.html">wp_is_json_request()</a> <span>wp-includes/load.php</span> </td> <td class="related-desc"> <p>Checks whether current request is a JSON request, or is expecting a JSON response.</p> </td> </tr> <tr> <td class="related-title"> <a href="get_user_locale.html">get_user_locale()</a> <span>wp-includes/l10n.php</span> </td> <td class="related-desc"> <p>Retrieves the locale of a user.</p> </td> </tr> <tr> <td class="related-title"> <a href="set_url_scheme.html">set_url_scheme()</a> <span>wp-includes/link-template.php</span> </td> <td class="related-desc"> <p>Sets the scheme for a URL.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_http_supports.html">wp_http_supports()</a> <span>wp-includes/http.php</span> </td> <td class="related-desc"> <p>Determines if there is an HTTP Transport that can process this request.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_remote_get.html">wp_remote_get()</a> <span>wp-includes/http.php</span> </td> <td class="related-desc"> <p>Performs an HTTP request using the GET method and returns its response.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_remote_retrieve_body.html">wp_remote_retrieve_body()</a> <span>wp-includes/http.php</span> </td> <td class="related-desc"> <p>Retrieve only the body from the raw response.</p> </td> </tr> <tr> <td class="related-title"> <a href="__.html">__()</a> <span>wp-includes/l10n.php</span> </td> <td class="related-desc"> <p>Retrieves the translation of $text.</p> </td> </tr> <tr> <td class="related-title"> <a href="add_query_arg.html">add_query_arg()</a> <span>wp-includes/functions.php</span> </td> <td class="related-desc"> <p>Retrieves a modified URL query string.</p> </td> </tr> <tr> <td class="related-title"> <a href="home_url.html">home_url()</a> <span>wp-includes/link-template.php</span> </td> <td class="related-desc"> <p>Retrieves the URL for the current site where the front end is accessible.</p> </td> </tr> <tr> <td class="related-title"> <a href="apply_filters.html">apply_filters()</a> <span>wp-includes/plugin.php</span> </td> <td class="related-desc"> <p>Calls the callback functions that have been added to a filter hook.</p> </td> </tr> <tr> <td class="related-title"> <a href="is_wp_error.html">is_wp_error()</a> <span>wp-includes/load.php</span> </td> <td class="related-desc"> <p>Checks whether the given variable is a WordPress Error.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wp_error/__construct.html">WP_Error::__construct()</a> <span>wp-includes/class-wp-error.php</span> </td> <td class="related-desc"> <p>Initializes the error.</p> </td> </tr> </tbody>

</table>   </article>  <article class="used-by"> <header class="toc-header"><h3 id="used-by">Used By</h3></header> <table id="used-by-table" data-show="5">  <thead> <tr> <th>Used By</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="../classes/wp_rest_block_directory_controller/get_items.html">WP_REST_Block_Directory_Controller::get_items()</a> <span>wp-includes/rest-api/endpoints/class-wp-rest-block-directory-controller.php</span> </td> <td class="related-desc"> <p>Search and retrieve blocks metadata</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wp_rest_plugins_controller/create_item.html">WP_REST_Plugins_Controller::create_item()</a> <span>wp-includes/rest-api/endpoints/class-wp-rest-plugins-controller.php</span> </td> <td class="related-desc"> <p>Uploads a plugin and optionally activates it.</p> </td> </tr> <tr> <td class="related-title"> <a href="wp_ajax_install_plugin.html">wp_ajax_install_plugin()</a> <span>wp-admin/includes/ajax-actions.php</span> </td> <td class="related-desc"> <p>Ajax handler for installing a plugin.</p> </td> </tr> <tr> <td class="related-title"> <a href="install_popular_tags.html">install_popular_tags()</a> <span>wp-admin/includes/plugin-install.php</span> </td> <td class="related-desc"> <p>Retrieves popular WordPress plugin tags.</p> </td> </tr> <tr> <td class="related-title"> <a href="install_plugin_information.html">install_plugin_information()</a> <span>wp-admin/includes/plugin-install.php</span> </td> <td class="related-desc"> <p>Displays plugin information in dialog box form.</p> </td> </tr> <tr> <td class="related-title"> <a href="../classes/wp_plugin_install_list_table/prepare_items.html">WP_Plugin_Install_List_Table::prepare_items()</a> <span>wp-admin/includes/class-wp-plugin-install-list-table.php</span> </td> <td class="related-desc"> </td> </tr> </tbody>

</table>   </article> </section>  <section> <header class="toc-header"><h2 id="changelog">Changelog</h2></header> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/2.7.0/" alt="WordPress 2.7.0">2.7.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section>     </li>
</ul></span>
</div> </dd>
</dl></section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2003&ndash;2022 WordPress Foundation<br>Licensed under the GNU GPLv2+ License.<br>
    <a href="https://developer.wordpress.org/reference/functions/plugins_api" class="_attribution-link">https://developer.wordpress.org/reference/functions/plugins_api</a>
  </p>
</div>
