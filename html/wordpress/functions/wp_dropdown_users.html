<h1 class="wp-block-wporg-code-reference-title">wp_dropdown_users( <span class="arg-type">array|string</span> <span class="arg-name">$args</span> = <span class="arg-default">”</span> ): <span class="return-type">string</span>
</h1> <section><p>Creates dropdown HTML content of users.</p> </section> <section><h2 id="description">Description</h2> <p>The content can either be displayed, which it is by default, or retrieved by setting the ‘echo’ argument to false. The ‘include’ and ‘exclude’ arguments are optional; if they are not specified, all users will be displayed. Only one can be used in a single call, either ‘include’ or ‘exclude’, but not both.</p> </section> <section><h2 id="parameters">Parameters</h2> <dl>
<dt>
<code>$args</code><span class="type"><span class="array">array</span>|<span class="string">string</span></span><span class="required">optional</span>
</dt>
<dd>
<div class="desc"><span class="description">Array or string of arguments to generate a drop-down of users.<br> See WP_User_Query::prepare_query() for additional available arguments.<br> <ul class="param-hash">
<li>
<code>show_option_all</code> <span class="type">string</span><div class="desc">Text to show as the drop-down default (all).<br> </div>
</li> <li>
<code>show_option_none</code> <span class="type">string</span><div class="desc">Text to show as the drop-down default when no users were found. </div>
</li> <li>
<code>option_none_value</code> <span class="type">int|string</span><div class="desc">Value to use for <code>$show_option_none</code> when no users were found. Default -1.</div>
</li> <li>
<code>hide_if_only_one_author</code> <span class="type">string</span><div class="desc">Whether to skip generating the drop-down if only one user was found. </div>
</li> <li>
<code>orderby</code> <span class="type">string</span><div class="desc">Field to order found users by. Accepts user fields.<br> Default <code>'display_name'</code>.</div>
</li> <li>
<code>order</code> <span class="type">string</span><div class="desc">Whether to order users in ascending or descending order. Accepts <code>'ASC'</code> (ascending) or <code>'DESC'</code> (descending).<br> Default <code>'ASC'</code>.</div>
</li> <li>
<code>include</code> <span class="type">int[]|string</span><div class="desc">Array or comma-separated list of user IDs to include.<br> </div>
</li> <li>
<code>exclude</code> <span class="type">int[]|string</span><div class="desc">Array or comma-separated list of user IDs to exclude.<br> </div>
</li> <li>
<code>multi</code> <span class="type">bool|int</span><div class="desc">Whether to skip the ID attribute on the <code>'select'</code> element.<br> Accepts <code>1|true</code> or <code>0|false</code>. Default <code>0|false</code>.</div>
</li> <li>
<code>show</code> <span class="type">string</span><div class="desc">User data to display. If the selected item is empty then the <code>'user_login'</code> will be displayed in parentheses.<br> Accepts any user field, or <code>'display_name_with_login'</code> to show the display name with user_login in parentheses.<br> Default <code>'display_name'</code>.</div>
</li> <li>
<code>echo</code> <span class="type">int|bool</span><div class="desc">Whether to echo or return the drop-down. Accepts <code>1|true</code> (echo) or <code>0|false</code> (return). Default <code>1|true</code>.</div>
</li> <li>
<code>selected</code> <span class="type">int</span><div class="desc">Which user ID should be selected. Default 0.</div>
</li> <li>
<code>include_selected</code> <span class="type">bool</span><div class="desc">Whether to always include the selected user ID in the drop- down. Default false.</div>
</li> <li>
<code>name</code> <span class="type">string</span><div class="desc">Name attribute of select element. Default <code>'user'</code>.</div>
</li> <li>
<code>id</code> <span class="type">string</span><div class="desc">ID attribute of the select element. Default is the value of <code>$name</code>.</div>
</li> <li>
<code>class</code> <span class="type">string</span><div class="desc">Class attribute of the select element. </div>
</li> <li>
<code>blog_id</code> <span class="type">int</span><div class="desc">ID of blog (Multisite only). Default is ID of the current blog.</div>
</li> <li>
<code>who</code> <span class="type">string</span><div class="desc">Deprecated, use <code>$capability</code> instead.<br> Which type of users to query. Accepts only an empty string or <code>'authors'</code>. Default empty (all users).</div>
</li> <li>
<code>role</code> <span class="type">string|string[]</span><div class="desc">An array or a comma-separated list of role names that users must match to be included in results. Note that this is an inclusive list: users must match *each* role. </div>
</li> <li>
<code>role__in</code> <span class="type">string[]</span><div class="desc">An array of role names. Matched users must have at least one of these roles. Default empty array.</div>
</li> <li>
<code>role__not_in</code> <span class="type">string[]</span><div class="desc">An array of role names to exclude. Users matching one or more of these roles will not be included in results. Default empty array.</div>
</li> <li>
<code>capability</code> <span class="type">string|string[]</span><div class="desc">An array or a comma-separated list of capability names that users must match to be included in results. Note that this is an inclusive list: users must match *each* capability.<br> Does NOT work for capabilities not in the database or filtered via <a href="../hooks/map_meta_cap.html">'map_meta_cap'</a>. </div>
</li> <li>
<code>capability__in</code> <span class="type">string[]</span><div class="desc">An array of capability names. Matched users must have at least one of these capabilities.<br> Does NOT work for capabilities not in the database or filtered via <a href="../hooks/map_meta_cap.html">'map_meta_cap'</a>. Default empty array.</div>
</li> <li>
<code>capability__not_in</code> <span class="type">string[]</span><div class="desc">An array of capability names to exclude. Users matching one or more of these capabilities will not be included in results.<br> Does NOT work for capabilities not in the database or filtered via <a href="../hooks/map_meta_cap.html">'map_meta_cap'</a>. Default empty array.</div>
</li> </ul> </span></div>
<p class="default">Default:<code>''</code></p>
</dd>
</dl></section> <section><h2 id="return">Return</h2> <span class="return-type">string</span> HTML dropdown list of users.</section> <section><h2 id="source">Source</h2> <pre class="wp-block-code" data-start="1640" aria-label="Function source code" data-language="php"><code id="wporg-source-code" lang="php" class="language-php line-numbers">function wp_dropdown_users( $args = '' ) {
	$defaults = array(
		'show_option_all'         =&gt; '',
		'show_option_none'        =&gt; '',
		'hide_if_only_one_author' =&gt; '',
		'orderby'                 =&gt; 'display_name',
		'order'                   =&gt; 'ASC',
		'include'                 =&gt; '',
		'exclude'                 =&gt; '',
		'multi'                   =&gt; 0,
		'show'                    =&gt; 'display_name',
		'echo'                    =&gt; 1,
		'selected'                =&gt; 0,
		'name'                    =&gt; 'user',
		'class'                   =&gt; '',
		'id'                      =&gt; '',
		'blog_id'                 =&gt; get_current_blog_id(),
		'who'                     =&gt; '',
		'include_selected'        =&gt; false,
		'option_none_value'       =&gt; -1,
		'role'                    =&gt; '',
		'role__in'                =&gt; array(),
		'role__not_in'            =&gt; array(),
		'capability'              =&gt; '',
		'capability__in'          =&gt; array(),
		'capability__not_in'      =&gt; array(),
	);

	$defaults['selected'] = is_author() ? get_query_var( 'author' ) : 0;

	$parsed_args = wp_parse_args( $args, $defaults );

	$query_args = wp_array_slice_assoc(
		$parsed_args,
		array(
			'blog_id',
			'include',
			'exclude',
			'orderby',
			'order',
			'who',
			'role',
			'role__in',
			'role__not_in',
			'capability',
			'capability__in',
			'capability__not_in',
		)
	);

	$fields = array( 'ID', 'user_login' );

	$show = ! empty( $parsed_args['show'] ) ? $parsed_args['show'] : 'display_name';
	if ( 'display_name_with_login' === $show ) {
		$fields[] = 'display_name';
	} else {
		$fields[] = $show;
	}

	$query_args['fields'] = $fields;

	$show_option_all   = $parsed_args['show_option_all'];
	$show_option_none  = $parsed_args['show_option_none'];
	$option_none_value = $parsed_args['option_none_value'];

	/**
	 * Filters the query arguments for the list of users in the dropdown.
	 *
	 * @since 4.4.0
	 *
	 * @param array $query_args  The query arguments for get_users().
	 * @param array $parsed_args The arguments passed to wp_dropdown_users() combined with the defaults.
	 */
	$query_args = apply_filters( 'wp_dropdown_users_args', $query_args, $parsed_args );

	$users = get_users( $query_args );

	$output = '';
	if ( ! empty( $users ) &amp;&amp; ( empty( $parsed_args['hide_if_only_one_author'] ) || count( $users ) &gt; 1 ) ) {
		$name = esc_attr( $parsed_args['name'] );
		if ( $parsed_args['multi'] &amp;&amp; ! $parsed_args['id'] ) {
			$id = '';
		} else {
			$id = $parsed_args['id'] ? " id='" . esc_attr( $parsed_args['id'] ) . "'" : " id='$name'";
		}
		$output = "&lt;select name='{$name}'{$id} class='" . $parsed_args['class'] . "'&gt;\n";

		if ( $show_option_all ) {
			$output .= "\t&lt;option value='0'&gt;$show_option_all&lt;/option&gt;\n";
		}

		if ( $show_option_none ) {
			$_selected = selected( $option_none_value, $parsed_args['selected'], false );
			$output   .= "\t&lt;option value='" . esc_attr( $option_none_value ) . "'$_selected&gt;$show_option_none&lt;/option&gt;\n";
		}

		if ( $parsed_args['include_selected'] &amp;&amp; ( $parsed_args['selected'] &gt; 0 ) ) {
			$found_selected          = false;
			$parsed_args['selected'] = (int) $parsed_args['selected'];

			foreach ( (array) $users as $user ) {
				$user-&gt;ID = (int) $user-&gt;ID;
				if ( $user-&gt;ID === $parsed_args['selected'] ) {
					$found_selected = true;
				}
			}

			if ( ! $found_selected ) {
				$selected_user = get_userdata( $parsed_args['selected'] );
				if ( $selected_user ) {
					$users[] = $selected_user;
				}
			}
		}

		foreach ( (array) $users as $user ) {
			if ( 'display_name_with_login' === $show ) {
				/* translators: 1: User's display name, 2: User login. */
				$display = sprintf( _x( '%1$s (%2$s)', 'user dropdown' ), $user-&gt;display_name, $user-&gt;user_login );
			} elseif ( ! empty( $user-&gt;$show ) ) {
				$display = $user-&gt;$show;
			} else {
				$display = '(' . $user-&gt;user_login . ')';
			}

			$_selected = selected( $user-&gt;ID, $parsed_args['selected'], false );
			$output   .= "\t&lt;option value='$user-&gt;ID'$_selected&gt;" . esc_html( $display ) . "&lt;/option&gt;\n";
		}

		$output .= '&lt;/select&gt;';
	}

	/**
	 * Filters the wp_dropdown_users() HTML output.
	 *
	 * @since 2.3.0
	 *
	 * @param string $output HTML output generated by wp_dropdown_users().
	 */
	$html = apply_filters( 'wp_dropdown_users', $output );

	if ( $parsed_args['echo'] ) {
		echo $html;
	}
	return $html;
}
</code></pre>
<p class="wporg-dot-link-list"><a href="https://developer.wordpress.org/reference/files/wp-includes/user.php/">View all references</a> <a href="https://core.trac.wordpress.org/browser/tags/6.7/src/wp-includes/user.php#L1640">View on Trac</a> <a href="https://github.com/WordPress/wordpress-develop/blob/6.7/src/wp-includes/user.php#L1640-L1785">View on GitHub</a></p></section> <section><h2 id="hooks">Hooks</h2> <dl>
<dt class="wp-block-wporg-code-reference-title has-normal-font-size"><a href="../hooks/wp_dropdown_users.html"><span class="hook-func">apply_filters</span>( ‘wp_dropdown_users’, <nobr><span class="arg-type">string</span> <span class="arg-name">$output</span></nobr> )</a></dt>
<dd>
<p>Filters the <a href="wp_dropdown_users.html" rel="function">wp_dropdown_users()</a> HTML output.</p> </dd>
<dt class="wp-block-wporg-code-reference-title has-normal-font-size"><a href="../hooks/wp_dropdown_users_args.html"><span class="hook-func">apply_filters</span>( ‘wp_dropdown_users_args’, <nobr><span class="arg-type">array</span> <span class="arg-name">$query_args</span></nobr>, <nobr><span class="arg-type">array</span> <span class="arg-name">$parsed_args</span></nobr> )</a></dt>
<dd>
<p>Filters the query arguments for the list of users in the dropdown.</p> </dd>
</dl></section>  <section><h2 id="changelog">Changelog</h2> <section style="margin-top:var(--wp--preset--spacing--20);"><figure class="wp-block-table "><table>
<thead><tr>
<th scope="col">Version</th>
<th scope="col">Description</th>
</tr></thead>
<tbody>
<tr class="">
<td><a href="https://developer.wordpress.org/reference/since/5.9.0/">5.9.0</a></td>
<td><span class="since-description">Added the <code>'capability'</code>, <code>'capability__in'</code>, and <code>'capability__not_in'</code> parameters.<br> Deprecated the <code>'who'</code> parameter.</span></td>
</tr>
<tr class="">
<td><a href="https://developer.wordpress.org/reference/since/4.7.0/">4.7.0</a></td>
<td><span class="since-description">Added the <code>'role'</code>, <code>'role__in'</code>, and <code>'role__not_in'</code> parameters.</span></td>
</tr>
<tr class="">
<td><a href="https://developer.wordpress.org/reference/since/4.5.0/">4.5.0</a></td>
<td><span class="since-description">Added the <code>'display_name_with_login'</code> value for <code>'show'</code>.</span></td>
</tr>
<tr class="">
<td><a href="https://developer.wordpress.org/reference/since/2.3.0/">2.3.0</a></td>
<td>Introduced.</td>
</tr>
</tbody>
</table></figure></section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2003&ndash;2024 WordPress Foundation<br>Licensed under the GNU GPLv2+ License.<br>
    <a href="https://developer.wordpress.org/reference/functions/wp_dropdown_users" class="_attribution-link">https://developer.wordpress.org/reference/functions/wp_dropdown_users</a>
  </p>
</div>
