<h1>wp_should_upgrade_global_tables(): bool</h1>  <section> <p>Determine if global tables should be upgraded.</p> </section>   <section> <header class="toc-header"><h2 id="description">Description</h2></header> <p>This function performs a series of checks to ensure the environment allows for the safe upgrading of global WordPress database tables. It is necessary because global tables will commonly grow to millions of rows on large installations, and the ability to control their upgrade routines can be critical to the operation of large networks.</p> <p>In a future iteration, this function may use <code>wp_is_large_network()</code> to more- intelligently prevent global table upgrades. Until then, we make sure WordPress is on the main site of the main network, to avoid running queries more than once in multi-site or multi-network environments.</p> </section>  <section> <header class="toc-header"><h2 id="return">Return</h2></header> <p><span class="return-type">bool</span> Whether to run the upgrade routines on global tables.</p> </section>  <section> <header class="toc-header"><h2 id="source">Source</h2></header> <p> File: <code>wp-admin/includes/upgrade.php</code>. <a href="https://developer.wordpress.org/reference/files/wp-admin/includes/upgrade.php/">View all references</a> </p> <pre class="wp-block-code" data-start="3541" aria-label="Function source code" data-language="php"><code lang="php" class="language-php line-numbers">function wp_should_upgrade_global_tables() {

	// Return false early if explicitly not upgrading.
	if ( defined( 'DO_NOT_UPGRADE_GLOBAL_TABLES' ) ) {
		return false;
	}

	// Assume global tables should be upgraded.
	$should_upgrade = true;

	// Set to false if not on main network (does not matter if not multi-network).
	if ( ! is_main_network() ) {
		$should_upgrade = false;
	}

	// Set to false if not on main site of current network (does not matter if not multi-site).
	if ( ! is_main_site() ) {
		$should_upgrade = false;
	}

	/**
	 * Filters if upgrade routines should be run on global tables.
	 *
	 * @since 4.3.0
	 *
	 * @param bool $should_upgrade Whether to run the upgrade routines on global tables.
	 */
	return apply_filters( 'wp_should_upgrade_global_tables', $should_upgrade );
}
</code></pre>  </section>  <section> <header class="toc-header"><h2 id="hooks">Hooks</h2></header> <article class="hooks"> <dl> <dt class="signature-highlight"> <a href="../hooks/wp_should_upgrade_global_tables.html" style="text-decoration: none"> <span class="hook-func">apply_filters</span>( 'wp_should_upgrade_global_tables', <nobr><span class="arg-type">bool</span> <span class="arg-name">$should_upgrade</span></nobr> ) </a> </dt> <dd class="hook-desc"> 
<p>Filters if upgrade routines should be run on global tables.</p> </dd> </dl> </article> </section>  <section> <header class="toc-header"><h2 id="related">Related</h2></header> <article class="uses"> <header class="toc-header"><h3 id="uses">Uses</h3></header> <table id="uses-table" data-show="2">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="is_main_network.html">is_main_network()</a> <span>wp-includes/functions.php</span> </td> <td class="related-desc"> <p>Determines whether a network is the main network of the Multisite installation.</p> </td> </tr> <tr> <td class="related-title"> <a href="is_main_site.html">is_main_site()</a> <span>wp-includes/functions.php</span> </td> <td class="related-desc"> <p>Determines whether a site is the main site of the current network.</p> </td> </tr> <tr> <td class="related-title"> <a href="apply_filters.html">apply_filters()</a> <span>wp-includes/plugin.php</span> </td> <td class="related-desc"> <p>Calls the callback functions that have been added to a filter hook.</p> </td> </tr> </tbody>

</table>   </article>  <article class="used-by"> <header class="toc-header"><h3 id="used-by">Used By</h3></header> <table id="used-by-table" data-show="5">  <thead> <tr> <th>Used By</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="pre_schema_upgrade.html">pre_schema_upgrade()</a> <span>wp-admin/includes/upgrade.php</span> </td> <td class="related-desc"> <p>Runs before the schema is upgraded.</p> </td> </tr> <tr> <td class="related-title"> <a href="upgrade_network.html">upgrade_network()</a> <span>wp-admin/includes/upgrade.php</span> </td> <td class="related-desc"> <p>Executes network-level upgrade routines.</p> </td> </tr> <tr> <td class="related-title"> <a href="dbdelta.html">dbDelta()</a> <span>wp-admin/includes/upgrade.php</span> </td> <td class="related-desc"> <p>Modifies the database based on specified SQL statements.</p> </td> </tr> </tbody>

</table> </article> </section>  <section> <header class="toc-header"><h2 id="changelog">Changelog</h2></header> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/4.3.0/" alt="WordPress 4.3.0">4.3.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2003&ndash;2022 WordPress Foundation<br>Licensed under the GNU GPLv2+ License.<br>
    <a href="https://developer.wordpress.org/reference/functions/wp_should_upgrade_global_tables" class="_attribution-link">https://developer.wordpress.org/reference/functions/wp_should_upgrade_global_tables</a>
  </p>
</div>
