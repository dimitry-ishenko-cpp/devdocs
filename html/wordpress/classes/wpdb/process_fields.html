<h1>wpdb::process_fields( string $table, array $data, mixed $format ): array|false</h1>  <section> <p>Processes arrays of field/value pairs and field formats.</p> </section>   <section> <header class="toc-header"><h2 id="description">Description</h2></header> <p>This is a helper method for <a href="../wpdb.html" rel="class">wpdb</a>â€™s CRUD methods, which take field/value pairs for inserts, updates, and where clauses. This method first pairs each value with a format. Then it determines the charset of that field, using that to determine if any invalid text would be stripped. If text is stripped, then field processing is rejected and the query fails.</p> </section>  <section> <header class="toc-header"><h2 id="parameters">Parameters</h2></header> <dl> <dt> <code>$table</code> <span class="type"><span class="string">string</span></span> <span class="required">Required</span> </dt> <dd> <div class="desc"> <span class="description">Table name.</span> </div> </dd> <dt> <code>$data</code> <span class="type"><span class="array">array</span></span> <span class="required">Required</span> </dt> <dd> <div class="desc"> <span class="description">Field/value pair.</span> </div> </dd> <dt> <code>$format</code> <span class="type"><span class="mixed">mixed</span></span> <span class="required">Required</span> </dt> <dd> <div class="desc"> <span class="description">Format for each field.</span> </div> </dd> </dl> </section>  <section> <header class="toc-header"><h2 id="return">Return</h2></header> <p><span class="return-type">array|false</span> An array of fields that contain paired value and formats.<br> False for invalid values.</p> </section>  <section> <header class="toc-header"><h2 id="source">Source</h2></header> <p> File: <code>wp-includes/class-wpdb.php</code>. <a href="https://developer.wordpress.org/reference/files/wp-includes/class-wpdb.php/">View all references</a> </p> <pre class="wp-block-code" data-start="2571" aria-label="Function source code" data-language="php"><code lang="php" class="language-php line-numbers">protected function process_fields( $table, $data, $format ) {
	$data = $this-&gt;process_field_formats( $data, $format );
	if ( false === $data ) {
		return false;
	}

	$data = $this-&gt;process_field_charsets( $data, $table );
	if ( false === $data ) {
		return false;
	}

	$data = $this-&gt;process_field_lengths( $data, $table );
	if ( false === $data ) {
		return false;
	}

	$converted_data = $this-&gt;strip_invalid_text( $data );

	if ( $data !== $converted_data ) {

		$problem_fields = array();
		foreach ( $data as $field =&gt; $value ) {
			if ( $value !== $converted_data[ $field ] ) {
				$problem_fields[] = $field;
			}
		}

		wp_load_translations_early();

		if ( 1 === count( $problem_fields ) ) {
			$this-&gt;last_error = sprintf(
				/* translators: %s: Database field where the error occurred. */
				__( 'WordPress database error: Processing the value for the following field failed: %s. The supplied value may be too long or contains invalid data.' ),
				reset( $problem_fields )
			);
		} else {
			$this-&gt;last_error = sprintf(
				/* translators: %s: Database fields where the error occurred. */
				__( 'WordPress database error: Processing the values for the following fields failed: %s. The supplied values may be too long or contain invalid data.' ),
				implode( ', ', $problem_fields )
			);
		}

		return false;
	}

	return $data;
}
</code></pre>  </section>  <section> <header class="toc-header"><h2 id="related">Related</h2></header> <article class="uses"> <header class="toc-header"><h3 id="uses">Uses</h3></header> <table id="uses-table" data-show="5">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="process_field_lengths.html">wpdb::process_field_lengths()</a> <span>wp-includes/class-wpdb.php</span> </td> <td class="related-desc"> <p>For string fields, records the maximum string length that field can safely save.</p> </td> </tr> <tr> <td class="related-title"> <a href="strip_invalid_text.html">wpdb::strip_invalid_text()</a> <span>wp-includes/class-wpdb.php</span> </td> <td class="related-desc"> <p>Strips any invalid characters based on value/charset pairs.</p> </td> </tr> <tr> <td class="related-title"> <a href="process_field_formats.html">wpdb::process_field_formats()</a> <span>wp-includes/class-wpdb.php</span> </td> <td class="related-desc"> <p>Prepares arrays of value/format pairs as passed to <a href="../wpdb.html" rel="class">wpdb</a> CRUD methods.</p> </td> </tr> <tr> <td class="related-title"> <a href="process_field_charsets.html">wpdb::process_field_charsets()</a> <span>wp-includes/class-wpdb.php</span> </td> <td class="related-desc"> <p>Adds field charsets to field/value/format arrays generated by <a href="process_field_formats.html" rel="method">wpdb::process_field_formats()</a>.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/wp_load_translations_early.html">wp_load_translations_early()</a> <span>wp-includes/load.php</span> </td> <td class="related-desc"> <p>Attempt an early load of translations.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/__.html">__()</a> <span>wp-includes/l10n.php</span> </td> <td class="related-desc"> <p>Retrieves the translation of $text.</p> </td> </tr> </tbody>

</table>   </article>  <article class="used-by"> <header class="toc-header"><h3 id="used-by">Used By</h3></header> <table id="used-by-table" data-show="5">  <thead> <tr> <th>Used By</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="_insert_replace_helper.html">wpdb::_insert_replace_helper()</a> <span>wp-includes/class-wpdb.php</span> </td> <td class="related-desc"> <p>Helper function for insert and replace.</p> </td> </tr> <tr> <td class="related-title"> <a href="update.html">wpdb::update()</a> <span>wp-includes/class-wpdb.php</span> </td> <td class="related-desc"> <p>Updates a row in the table.</p> </td> </tr> <tr> <td class="related-title"> <a href="delete.html">wpdb::delete()</a> <span>wp-includes/class-wpdb.php</span> </td> <td class="related-desc"> <p>Deletes a row in the table.</p> </td> </tr> </tbody>

</table> </article> </section>  <section> <header class="toc-header"><h2 id="changelog">Changelog</h2></header> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/4.2.0/" alt="WordPress 4.2.0">4.2.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2003&ndash;2022 WordPress Foundation<br>Licensed under the GNU GPLv2+ License.<br>
    <a href="https://developer.wordpress.org/reference/classes/wpdb/process_fields" class="_attribution-link">https://developer.wordpress.org/reference/classes/wpdb/process_fields</a>
  </p>
</div>
