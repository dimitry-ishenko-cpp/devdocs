<h1>Custom_Image_Header::step_1()</h1>  <section> <p>Display first step of custom header image page.</p> </section>   <section> <header class="toc-header"><h2 id="source">Source</h2></header> <p> File: <code>wp-admin/includes/class-custom-image-header.php</code>. <a href="https://developer.wordpress.org/reference/files/wp-admin/includes/class-custom-image-header.php/">View all references</a> </p> <pre class="wp-block-code" data-start="499" aria-label="Function source code" data-language="php"><code lang="php" class="language-php line-numbers">	public function step_1() {
		$this-&gt;process_default_headers();
		?&gt;

&lt;div class="wrap"&gt;
&lt;h1&gt;&lt;?php _e( 'Custom Header' ); ?&gt;&lt;/h1&gt;

		&lt;?php if ( current_user_can( 'customize' ) ) { ?&gt;
&lt;div class="notice notice-info hide-if-no-customize"&gt;
	&lt;p&gt;
			&lt;?php
			printf(
				/* translators: %s: URL to header image configuration in Customizer. */
				__( 'You can now manage and live-preview Custom Header in the &lt;a href="%s.html"&gt;Customizer&lt;/a&gt;.' ),
				admin_url( 'customize.php?autofocus[control]=header_image' )
			);
			?&gt;
	&lt;/p&gt;
&lt;/div&gt;
		&lt;?php } ?&gt;

		&lt;?php if ( ! empty( $this-&gt;updated ) ) { ?&gt;
&lt;div id="message" class="updated"&gt;
	&lt;p&gt;
			&lt;?php
			/* translators: %s: Home URL. */
			printf( __( 'Header updated. &lt;a href="%s.html"&gt;Visit your site&lt;/a&gt; to see how it looks.' ), esc_url( home_url( '/' ) ) );
			?&gt;
	&lt;/p&gt;
&lt;/div&gt;
		&lt;?php } ?&gt;

&lt;h2&gt;&lt;?php _e( 'Header Image' ); ?&gt;&lt;/h2&gt;

&lt;table class="form-table" role="presentation"&gt;
&lt;tbody&gt;

		&lt;?php if ( get_custom_header() || display_header_text() ) : ?&gt;
&lt;tr&gt;
&lt;th scope="row"&gt;&lt;?php _e( 'Preview' ); ?&gt;&lt;/th&gt;
&lt;td&gt;
			&lt;?php
			if ( $this-&gt;admin_image_div_callback ) {
				call_user_func( $this-&gt;admin_image_div_callback );
			} else {
				$custom_header = get_custom_header();
				$header_image  = get_header_image();

				if ( $header_image ) {
					$header_image_style = 'background-image:url(' . esc_url( $header_image ) . ');';
				} else {
					$header_image_style = '';
				}

				if ( $custom_header-&gt;width ) {
					$header_image_style .= 'max-width:' . $custom_header-&gt;width . 'px;';
				}
				if ( $custom_header-&gt;height ) {
					$header_image_style .= 'height:' . $custom_header-&gt;height . 'px;';
				}
				?&gt;
	&lt;div id="headimg" style="&lt;?php echo $header_image_style; ?&gt;"&gt;
				&lt;?php
				if ( display_header_text() ) {
					$style = ' style="color:#' . get_header_textcolor() . ';"';
				} else {
					$style = ' style="display:none;"';
				}
				?&gt;
		&lt;h1&gt;&lt;a id="name" class="displaying-header-text" &lt;?php echo $style; ?&gt; onclick="return false;" href="&lt;?php bloginfo( 'url' ); ?&gt;.html" tabindex="-1"&gt;&lt;?php bloginfo( 'name' ); ?&gt;&lt;/a&gt;&lt;/h1&gt;
		&lt;div id="desc" class="displaying-header-text" &lt;?php echo $style; ?&gt;&gt;&lt;?php bloginfo( 'description' ); ?&gt;&lt;/div&gt;
	&lt;/div&gt;
			&lt;?php } ?&gt;
&lt;/td&gt;
&lt;/tr&gt;
		&lt;?php endif; ?&gt;

		&lt;?php if ( current_user_can( 'upload_files' ) &amp;&amp; current_theme_supports( 'custom-header', 'uploads' ) ) : ?&gt;
&lt;tr&gt;
&lt;th scope="row"&gt;&lt;?php _e( 'Select Image' ); ?&gt;&lt;/th&gt;
&lt;td&gt;
	&lt;p&gt;&lt;?php _e( 'You can select an image to be shown at the top of your site by uploading from your computer or choosing from your media library. After selecting an image you will be able to crop it.' ); ?&gt;&lt;br /&gt;
			&lt;?php
			if ( ! current_theme_supports( 'custom-header', 'flex-height' )
				&amp;&amp; ! current_theme_supports( 'custom-header', 'flex-width' )
			) {
				printf(
					/* translators: 1: Image width in pixels, 2: Image height in pixels. */
					__( 'Images of exactly &lt;strong&gt;%1$d &amp;times; %2$d pixels&lt;/strong&gt; will be used as-is.' ) . '&lt;br /&gt;',
					get_theme_support( 'custom-header', 'width' ),
					get_theme_support( 'custom-header', 'height' )
				);
			} elseif ( current_theme_supports( 'custom-header', 'flex-height' ) ) {
				if ( ! current_theme_supports( 'custom-header', 'flex-width' ) ) {
					printf(
						/* translators: %s: Size in pixels. */
						__( 'Images should be at least %s wide.' ) . ' ',
						sprintf(
							/* translators: %d: Custom header width. */
							'&lt;strong&gt;' . __( '%d pixels' ) . '&lt;/strong&gt;',
							get_theme_support( 'custom-header', 'width' )
						)
					);
				}
			} elseif ( current_theme_supports( 'custom-header', 'flex-width' ) ) {
				if ( ! current_theme_supports( 'custom-header', 'flex-height' ) ) {
					printf(
						/* translators: %s: Size in pixels. */
						__( 'Images should be at least %s tall.' ) . ' ',
						sprintf(
							/* translators: %d: Custom header height. */
							'&lt;strong&gt;' . __( '%d pixels' ) . '&lt;/strong&gt;',
							get_theme_support( 'custom-header', 'height' )
						)
					);
				}
			}

			if ( current_theme_supports( 'custom-header', 'flex-height' )
				|| current_theme_supports( 'custom-header', 'flex-width' )
			) {
				if ( current_theme_supports( 'custom-header', 'width' ) ) {
					printf(
						/* translators: %s: Size in pixels. */
						__( 'Suggested width is %s.' ) . ' ',
						sprintf(
							/* translators: %d: Custom header width. */
							'&lt;strong&gt;' . __( '%d pixels' ) . '&lt;/strong&gt;',
							get_theme_support( 'custom-header', 'width' )
						)
					);
				}

				if ( current_theme_supports( 'custom-header', 'height' ) ) {
					printf(
						/* translators: %s: Size in pixels. */
						__( 'Suggested height is %s.' ) . ' ',
						sprintf(
							/* translators: %d: Custom header height. */
							'&lt;strong&gt;' . __( '%d pixels' ) . '&lt;/strong&gt;',
							get_theme_support( 'custom-header', 'height' )
						)
					);
				}
			}
			?&gt;
	&lt;/p&gt;
	&lt;form enctype="multipart/form-data" id="upload-form" class="wp-upload-form" method="post" action="&lt;?php echo esc_url( add_query_arg( 'step', 2 ) ); ?&gt;"&gt;
	&lt;p&gt;
		&lt;label for="upload"&gt;&lt;?php _e( 'Choose an image from your computer:' ); ?&gt;&lt;/label&gt;&lt;br /&gt;
		&lt;input type="file" id="upload" name="import" /&gt;
		&lt;input type="hidden" name="action" value="save" /&gt;
			&lt;?php wp_nonce_field( 'custom-header-upload', '_wpnonce-custom-header-upload' ); ?&gt;
			&lt;?php submit_button( __( 'Upload' ), '', 'submit', false ); ?&gt;
	&lt;/p&gt;
			&lt;?php
			$modal_update_href = add_query_arg(
				array(
					'page'                          =&gt; 'custom-header',
					'step'                          =&gt; 2,
					'_wpnonce-custom-header-upload' =&gt; wp_create_nonce( 'custom-header-upload' ),
				),
				admin_url( 'themes.php' )
			);
			?&gt;
	&lt;p&gt;
		&lt;label for="choose-from-library-link"&gt;&lt;?php _e( 'Or choose an image from your media library:' ); ?&gt;&lt;/label&gt;&lt;br /&gt;
		&lt;button id="choose-from-library-link" class="button"
			data-update-link="&lt;?php echo esc_url( $modal_update_href ); ?&gt;"
			data-choose="&lt;?php esc_attr_e( 'Choose a Custom Header' ); ?&gt;"
			data-update="&lt;?php esc_attr_e( 'Set as header' ); ?&gt;"&gt;&lt;?php _e( 'Choose Image' ); ?&gt;&lt;/button&gt;
	&lt;/p&gt;
	&lt;/form&gt;
&lt;/td&gt;
&lt;/tr&gt;
		&lt;?php endif; ?&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;form method="post" action="&lt;?php echo esc_url( add_query_arg( 'step', 1 ) ); ?&gt;"&gt;
		&lt;?php submit_button( null, 'screen-reader-text', 'save-header-options', false ); ?&gt;
&lt;table class="form-table" role="presentation"&gt;
&lt;tbody&gt;
		&lt;?php if ( get_uploaded_header_images() ) : ?&gt;
&lt;tr&gt;
&lt;th scope="row"&gt;&lt;?php _e( 'Uploaded Images' ); ?&gt;&lt;/th&gt;
&lt;td&gt;
	&lt;p&gt;&lt;?php _e( 'You can choose one of your previously uploaded headers, or show a random one.' ); ?&gt;&lt;/p&gt;
			&lt;?php
			$this-&gt;show_header_selector( 'uploaded' );
			?&gt;
&lt;/td&gt;
&lt;/tr&gt;
			&lt;?php
	endif;
		if ( ! empty( $this-&gt;default_headers ) ) :
			?&gt;
&lt;tr&gt;
&lt;th scope="row"&gt;&lt;?php _e( 'Default Images' ); ?&gt;&lt;/th&gt;
&lt;td&gt;
			&lt;?php if ( current_theme_supports( 'custom-header', 'uploads' ) ) : ?&gt;
	&lt;p&gt;&lt;?php _e( 'If you don&amp;lsquo;t want to upload your own image, you can use one of these cool headers, or show a random one.' ); ?&gt;&lt;/p&gt;
	&lt;?php else : ?&gt;
	&lt;p&gt;&lt;?php _e( 'You can use one of these cool headers or show a random one on each page.' ); ?&gt;&lt;/p&gt;
	&lt;?php endif; ?&gt;
			&lt;?php
			$this-&gt;show_header_selector( 'default' );
			?&gt;
&lt;/td&gt;
&lt;/tr&gt;
			&lt;?php
	endif;
		if ( get_header_image() ) :
			?&gt;
&lt;tr&gt;
&lt;th scope="row"&gt;&lt;?php _e( 'Remove Image' ); ?&gt;&lt;/th&gt;
&lt;td&gt;
	&lt;p&gt;&lt;?php _e( 'This will remove the header image. You will not be able to restore any customizations.' ); ?&gt;&lt;/p&gt;
			&lt;?php submit_button( __( 'Remove Header Image' ), '', 'removeheader', false ); ?&gt;
&lt;/td&gt;
&lt;/tr&gt;
			&lt;?php
	endif;

		$default_image = sprintf(
			get_theme_support( 'custom-header', 'default-image' ),
			get_template_directory_uri(),
			get_stylesheet_directory_uri()
		);

		if ( $default_image &amp;&amp; get_header_image() !== $default_image ) :
			?&gt;
&lt;tr&gt;
&lt;th scope="row"&gt;&lt;?php _e( 'Reset Image' ); ?&gt;&lt;/th&gt;
&lt;td&gt;
	&lt;p&gt;&lt;?php _e( 'This will restore the original header image. You will not be able to restore any customizations.' ); ?&gt;&lt;/p&gt;
			&lt;?php submit_button( __( 'Restore Original Header Image' ), '', 'resetheader', false ); ?&gt;
&lt;/td&gt;
&lt;/tr&gt;
	&lt;?php endif; ?&gt;
&lt;/tbody&gt;
&lt;/table&gt;

		&lt;?php if ( current_theme_supports( 'custom-header', 'header-text' ) ) : ?&gt;

&lt;h2&gt;&lt;?php _e( 'Header Text' ); ?&gt;&lt;/h2&gt;

&lt;table class="form-table" role="presentation"&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;th scope="row"&gt;&lt;?php _e( 'Header Text' ); ?&gt;&lt;/th&gt;
&lt;td&gt;
	&lt;p&gt;
	&lt;label&gt;&lt;input type="checkbox" name="display-header-text" id="display-header-text"&lt;?php checked( display_header_text() ); ?&gt; /&gt; &lt;?php _e( 'Show header text with your image.' ); ?&gt;&lt;/label&gt;
	&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;

&lt;tr class="displaying-header-text"&gt;
&lt;th scope="row"&gt;&lt;?php _e( 'Text Color' ); ?&gt;&lt;/th&gt;
&lt;td&gt;
	&lt;p&gt;
			&lt;?php
			$default_color = '';
			if ( current_theme_supports( 'custom-header', 'default-text-color' ) ) {
				$default_color = get_theme_support( 'custom-header', 'default-text-color' );
				if ( $default_color &amp;&amp; false === strpos( $default_color, '#' ) ) {
					$default_color = '#' . $default_color;
				}
			}

			$default_color_attr = $default_color ? ' data-default-color="' . esc_attr( $default_color ) . '"' : '';

			$header_textcolor = display_header_text() ? get_header_textcolor() : get_theme_support( 'custom-header', 'default-text-color' );
			if ( $header_textcolor &amp;&amp; false === strpos( $header_textcolor, '#' ) ) {
				$header_textcolor = '#' . $header_textcolor;
			}

			echo '&lt;input type="text" name="text-color" id="text-color" value="' . esc_attr( $header_textcolor ) . '"' . $default_color_attr . ' /&gt;';
			if ( $default_color ) {
				/* translators: %s: Default text color. */
				echo ' &lt;span class="description hide-if-js"&gt;' . sprintf( _x( 'Default: %s', 'color' ), esc_html( $default_color ) ) . '&lt;/span&gt;';
			}
			?&gt;
	&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
			&lt;?php
endif;

		/**
		 * Fires just before the submit button in the custom header options form.
		 *
		 * @since 3.1.0
		 */
		do_action( 'custom_header_options' );

		wp_nonce_field( 'custom-header-options', '_wpnonce-custom-header-options' );
		?&gt;

		&lt;?php submit_button( null, 'primary', 'save-header-options' ); ?&gt;
&lt;/form&gt;
&lt;/div&gt;

		&lt;?php
	}
</code></pre>  </section>  <section> <header class="toc-header"><h2 id="hooks">Hooks</h2></header> <article class="hooks"> <dl> <dt class="signature-highlight"> <a href="../../hooks/custom_header_options.html" style="text-decoration: none"> <span class="hook-func">do_action</span>( 'custom_header_options' ) </a> </dt> <dd class="hook-desc"> 
<p>Fires just before the submit button in the custom header options form.</p> </dd> </dl> </article> </section>  <section> <header class="toc-header"><h2 id="related">Related</h2></header> <article class="uses"> <header class="toc-header"><h3 id="uses">Uses</h3></header> <table id="uses-table" data-show="5">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="../../functions/submit_button.html">submit_button()</a> <span>wp-admin/includes/template.php</span> </td> <td class="related-desc"> <p>Echoes a submit button, with provided text and appropriate class(es).</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/get_uploaded_header_images.html">get_uploaded_header_images()</a> <span>wp-includes/theme.php</span> </td> <td class="related-desc"> <p>Gets the header images uploaded for the active theme.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/bloginfo.html">bloginfo()</a> <span>wp-includes/general-template.php</span> </td> <td class="related-desc"> <p>Displays information about the current site.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/wp_nonce_field.html">wp_nonce_field()</a> <span>wp-includes/functions.php</span> </td> <td class="related-desc"> <p>Retrieves or display nonce hidden field for forms.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/esc_attr_e.html">esc_attr_e()</a> <span>wp-includes/l10n.php</span> </td> <td class="related-desc"> <p>Displays translated text that has been escaped for safe use in an attribute.</p> </td> </tr> <tr> <td class="related-title"> <a href="process_default_headers.html">Custom_Image_Header::process_default_headers()</a> <span>wp-admin/includes/class-custom-image-header.php</span> </td> <td class="related-desc"> <p>Process the default headers</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/get_stylesheet_directory_uri.html">get_stylesheet_directory_uri()</a> <span>wp-includes/theme.php</span> </td> <td class="related-desc"> <p>Retrieves stylesheet directory URI for the active theme.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/get_template_directory_uri.html">get_template_directory_uri()</a> <span>wp-includes/theme.php</span> </td> <td class="related-desc"> <p>Retrieves template directory URI for the active theme.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/get_header_textcolor.html">get_header_textcolor()</a> <span>wp-includes/theme.php</span> </td> <td class="related-desc"> <p>Retrieves the custom header text color in 3- or 6-digit hexadecimal form.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/wp_create_nonce.html">wp_create_nonce()</a> <span>wp-includes/pluggable.php</span> </td> <td class="related-desc"> <p>Creates a cryptographic token tied to a specific action, user, user session, and window of time.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/get_header_image.html">get_header_image()</a> <span>wp-includes/theme.php</span> </td> <td class="related-desc"> <p>Retrieves header image for custom header.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/display_header_text.html">display_header_text()</a> <span>wp-includes/theme.php</span> </td> <td class="related-desc"> <p>Whether to display the header text.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/get_custom_header.html">get_custom_header()</a> <span>wp-includes/theme.php</span> </td> <td class="related-desc"> <p>Gets the header image data.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/get_theme_support.html">get_theme_support()</a> <span>wp-includes/theme.php</span> </td> <td class="related-desc"> <p>Gets the theme support arguments passed when registering that support.</p> </td> </tr> <tr> <td class="related-title"> <a href="show_header_selector.html">Custom_Image_Header::show_header_selector()</a> <span>wp-admin/includes/class-custom-image-header.php</span> </td> <td class="related-desc"> <p>Display UI for selecting one of several default headers.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/checked.html">checked()</a> <span>wp-includes/general-template.php</span> </td> <td class="related-desc"> <p>Outputs the HTML checked attribute.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/add_query_arg.html">add_query_arg()</a> <span>wp-includes/functions.php</span> </td> <td class="related-desc"> <p>Retrieves a modified URL query string.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/admin_url.html">admin_url()</a> <span>wp-includes/link-template.php</span> </td> <td class="related-desc"> <p>Retrieves the URL to the admin area for the current site.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/home_url.html">home_url()</a> <span>wp-includes/link-template.php</span> </td> <td class="related-desc"> <p>Retrieves the URL for the current site where the front end is accessible.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/__.html">__()</a> <span>wp-includes/l10n.php</span> </td> <td class="related-desc"> <p>Retrieves the translation of $text.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/esc_html.html">esc_html()</a> <span>wp-includes/formatting.php</span> </td> <td class="related-desc"> <p>Escaping for HTML blocks.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/esc_attr.html">esc_attr()</a> <span>wp-includes/formatting.php</span> </td> <td class="related-desc"> <p>Escaping for HTML attributes.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/esc_url.html">esc_url()</a> <span>wp-includes/formatting.php</span> </td> <td class="related-desc"> <p>Checks and cleans a URL.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/_x.html">_x()</a> <span>wp-includes/l10n.php</span> </td> <td class="related-desc"> <p>Retrieves translated string with gettext context.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/_e.html">_e()</a> <span>wp-includes/l10n.php</span> </td> <td class="related-desc"> <p>Displays translated text.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/current_theme_supports.html">current_theme_supports()</a> <span>wp-includes/theme.php</span> </td> <td class="related-desc"> <p>Checks a theme’s support for a given feature.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/current_user_can.html">current_user_can()</a> <span>wp-includes/capabilities.php</span> </td> <td class="related-desc"> <p>Returns whether the current user has the specified capability.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/do_action.html">do_action()</a> <span>wp-includes/plugin.php</span> </td> <td class="related-desc"> <p>Calls the callback functions that have been added to an action hook.</p> </td> </tr> </tbody>

</table>   </article>  <article class="used-by"> <header class="toc-header"><h3 id="used-by">Used By</h3></header> <table id="used-by-table" data-show="5">  <thead> <tr> <th>Used By</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="finished.html">Custom_Image_Header::finished()</a> <span>wp-admin/includes/class-custom-image-header.php</span> </td> <td class="related-desc"> <p>Display last step of custom header image page.</p> </td> </tr> <tr> <td class="related-title"> <a href="admin_page.html">Custom_Image_Header::admin_page()</a> <span>wp-admin/includes/class-custom-image-header.php</span> </td> <td class="related-desc"> <p>Display the page based on the current step.</p> </td> </tr> </tbody>

</table> </article> </section>  <section> <header class="toc-header"><h2 id="changelog">Changelog</h2></header> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/2.1.0/" alt="WordPress 2.1.0">2.1.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2003&ndash;2022 WordPress Foundation<br>Licensed under the GNU GPLv2+ License.<br>
    <a href="https://developer.wordpress.org/reference/classes/custom_image_header/step_1" class="_attribution-link">https://developer.wordpress.org/reference/classes/custom_image_header/step_1</a>
  </p>
</div>
