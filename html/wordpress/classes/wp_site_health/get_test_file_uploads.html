<h1>WP_Site_Health::get_test_file_uploads(): array</h1>  <section> <p>Tests if ‘file_uploads’ directive in PHP.ini is turned off.</p> </section>   <section> <header class="toc-header"><h2 id="return">Return</h2></header> <p><span class="return-type">array</span> The test results.</p> </section>  <section> <header class="toc-header"><h2 id="source">Source</h2></header> <p> File: <code>wp-admin/includes/class-wp-site-health.php</code>. <a href="https://developer.wordpress.org/reference/files/wp-admin/includes/class-wp-site-health.php/">View all references</a> </p> <pre class="wp-block-code" data-start="2156" aria-label="Function source code" data-language="php"><code lang="php" class="language-php line-numbers">public function get_test_file_uploads() {
	$result = array(
		'label'       =&gt; __( 'Files can be uploaded' ),
		'status'      =&gt; 'good',
		'badge'       =&gt; array(
			'label' =&gt; __( 'Performance' ),
			'color' =&gt; 'blue',
		),
		'description' =&gt; sprintf(
			'&lt;p&gt;%s&lt;/p&gt;',
			sprintf(
				/* translators: 1: file_uploads, 2: php.ini */
				__( 'The %1$s directive in %2$s determines if uploading files is allowed on your site.' ),
				'&lt;code&gt;file_uploads&lt;/code&gt;',
				'&lt;code&gt;php.ini&lt;/code&gt;'
			)
		),
		'actions'     =&gt; '',
		'test'        =&gt; 'file_uploads',
	);

	if ( ! function_exists( 'ini_get' ) ) {
		$result['status']       = 'critical';
		$result['description'] .= sprintf(
			/* translators: %s: ini_get() */
			__( 'The %s function has been disabled, some media settings are unavailable because of this.' ),
			'&lt;code&gt;ini_get()&lt;/code&gt;'
		);
		return $result;
	}

	if ( empty( ini_get( 'file_uploads' ) ) ) {
		$result['status']       = 'critical';
		$result['description'] .= sprintf(
			'&lt;p&gt;%s&lt;/p&gt;',
			sprintf(
				/* translators: 1: file_uploads, 2: 0 */
				__( '%1$s is set to %2$s. You won\'t be able to upload files on your site.' ),
				'&lt;code&gt;file_uploads&lt;/code&gt;',
				'&lt;code&gt;0&lt;/code&gt;'
			)
		);
		return $result;
	}

	$post_max_size       = ini_get( 'post_max_size' );
	$upload_max_filesize = ini_get( 'upload_max_filesize' );

	if ( wp_convert_hr_to_bytes( $post_max_size ) &lt; wp_convert_hr_to_bytes( $upload_max_filesize ) ) {
		$result['label'] = sprintf(
			/* translators: 1: post_max_size, 2: upload_max_filesize */
			__( 'The "%1$s" value is smaller than "%2$s"' ),
			'post_max_size',
			'upload_max_filesize'
		);
		$result['status'] = 'recommended';

		if ( 0 === wp_convert_hr_to_bytes( $post_max_size ) ) {
			$result['description'] = sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				sprintf(
					/* translators: 1: post_max_size, 2: upload_max_filesize */
					__( 'The setting for %1$s is currently configured as 0, this could cause some problems when trying to upload files through plugin or theme features that rely on various upload methods. It is recommended to configure this setting to a fixed value, ideally matching the value of %2$s, as some upload methods read the value 0 as either unlimited, or disabled.' ),
					'&lt;code&gt;post_max_size&lt;/code&gt;',
					'&lt;code&gt;upload_max_filesize&lt;/code&gt;'
				)
			);
		} else {
			$result['description'] = sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				sprintf(
					/* translators: 1: post_max_size, 2: upload_max_filesize */
					__( 'The setting for %1$s is smaller than %2$s, this could cause some problems when trying to upload files.' ),
					'&lt;code&gt;post_max_size&lt;/code&gt;',
					'&lt;code&gt;upload_max_filesize&lt;/code&gt;'
				)
			);
		}

		return $result;
	}

	return $result;
}
</code></pre>  </section>  <section> <header class="toc-header"><h2 id="related">Related</h2></header> <article class="uses"> <header class="toc-header"><h3 id="uses">Uses</h3></header> <table id="uses-table" data-show="2">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="../../functions/wp_convert_hr_to_bytes.html">wp_convert_hr_to_bytes()</a> <span>wp-includes/load.php</span> </td> <td class="related-desc"> <p>Converts a shorthand byte value to an integer byte value.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/__.html">__()</a> <span>wp-includes/l10n.php</span> </td> <td class="related-desc"> <p>Retrieves the translation of $text.</p> </td> </tr> </tbody>

</table> </article> </section>  <section> <header class="toc-header"><h2 id="changelog">Changelog</h2></header> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/5.5.0/" alt="WordPress 5.5.0">5.5.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2003&ndash;2022 WordPress Foundation<br>Licensed under the GNU GPLv2+ License.<br>
    <a href="https://developer.wordpress.org/reference/classes/wp_site_health/get_test_file_uploads" class="_attribution-link">https://developer.wordpress.org/reference/classes/wp_site_health/get_test_file_uploads</a>
  </p>
</div>
