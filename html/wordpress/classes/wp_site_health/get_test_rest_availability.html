<h1>WP_Site_Health::get_test_rest_availability(): array</h1>  <section> <p>Tests if the REST API is accessible.</p> </section>   <section> <header class="toc-header"><h2 id="description">Description</h2></header> <p>Various security measures may block the REST API from working, or it may have been disabled in general.<br>This is required for the new block editor to work, so we explicitly test for this.</p> </section>  <section> <header class="toc-header"><h2 id="return">Return</h2></header> <p><span class="return-type">array</span> The test results.</p> </section>  <section> <header class="toc-header"><h2 id="source">Source</h2></header> <p> File: <code>wp-admin/includes/class-wp-site-health.php</code>. <a href="https://developer.wordpress.org/reference/files/wp-admin/includes/class-wp-site-health.php/">View all references</a> </p> <pre class="wp-block-code" data-start="2045" aria-label="Function source code" data-language="php"><code lang="php" class="language-php line-numbers">public function get_test_rest_availability() {
	$result = array(
		'label'       =&gt; __( 'The REST API is available' ),
		'status'      =&gt; 'good',
		'badge'       =&gt; array(
			'label' =&gt; __( 'Performance' ),
			'color' =&gt; 'blue',
		),
		'description' =&gt; sprintf(
			'&lt;p&gt;%s&lt;/p&gt;',
			__( 'The REST API is one way that WordPress and other applications communicate with the server. For example, the block editor screen relies on the REST API to display and save your posts and pages.' )
		),
		'actions'     =&gt; '',
		'test'        =&gt; 'rest_availability',
	);

	$cookies = wp_unslash( $_COOKIE );
	$timeout = 10; // 10 seconds.
	$headers = array(
		'Cache-Control' =&gt; 'no-cache',
		'X-WP-Nonce'    =&gt; wp_create_nonce( 'wp_rest' ),
	);
	/** This filter is documented in wp-includes/class-wp-http-streams.php */
	$sslverify = apply_filters( 'https_local_ssl_verify', false );

	// Include Basic auth in loopback requests.
	if ( isset( $_SERVER['PHP_AUTH_USER'] ) &amp;&amp; isset( $_SERVER['PHP_AUTH_PW'] ) ) {
		$headers['Authorization'] = 'Basic ' . base64_encode( wp_unslash( $_SERVER['PHP_AUTH_USER'] ) . ':' . wp_unslash( $_SERVER['PHP_AUTH_PW'] ) );
	}

	$url = rest_url( 'wp/v2/types/post' );

	// The context for this is editing with the new block editor.
	$url = add_query_arg(
		array(
			'context' =&gt; 'edit',
		),
		$url
	);

	$r = wp_remote_get( $url, compact( 'cookies', 'headers', 'timeout', 'sslverify' ) );

	if ( is_wp_error( $r ) ) {
		$result['status'] = 'critical';

		$result['label'] = __( 'The REST API encountered an error' );

		$result['description'] .= sprintf(
			'&lt;p&gt;%s&lt;/p&gt;&lt;p&gt;%s&lt;br&gt;%s&lt;/p&gt;',
			__( 'When testing the REST API, an error was encountered:' ),
			sprintf(
				// translators: %s: The REST API URL.
				__( 'REST API Endpoint: %s' ),
				$url
			),
			sprintf(
				// translators: 1: The WordPress error code. 2: The WordPress error message.
				__( 'REST API Response: (%1$s) %2$s' ),
				$r-&gt;get_error_code(),
				$r-&gt;get_error_message()
			)
		);
	} elseif ( 200 !== wp_remote_retrieve_response_code( $r ) ) {
		$result['status'] = 'recommended';

		$result['label'] = __( 'The REST API encountered an unexpected result' );

		$result['description'] .= sprintf(
			'&lt;p&gt;%s&lt;/p&gt;&lt;p&gt;%s&lt;br&gt;%s&lt;/p&gt;',
			__( 'When testing the REST API, an unexpected result was returned:' ),
			sprintf(
				// translators: %s: The REST API URL.
				__( 'REST API Endpoint: %s' ),
				$url
			),
			sprintf(
				// translators: 1: The WordPress error code. 2: The HTTP status code error message.
				__( 'REST API Response: (%1$s) %2$s' ),
				wp_remote_retrieve_response_code( $r ),
				wp_remote_retrieve_response_message( $r )
			)
		);
	} else {
		$json = json_decode( wp_remote_retrieve_body( $r ), true );

		if ( false !== $json &amp;&amp; ! isset( $json['capabilities'] ) ) {
			$result['status'] = 'recommended';

			$result['label'] = __( 'The REST API did not behave correctly' );

			$result['description'] .= sprintf(
				'&lt;p&gt;%s&lt;/p&gt;',
				sprintf(
					/* translators: %s: The name of the query parameter being tested. */
					__( 'The REST API did not process the %s query parameter correctly.' ),
					'&lt;code&gt;context&lt;/code&gt;'
				)
			);
		}
	}

	return $result;
}
</code></pre>  </section>  <section> <header class="toc-header"><h2 id="hooks">Hooks</h2></header> <article class="hooks"> <dl> <dt class="signature-highlight"> <a href="../../hooks/https_local_ssl_verify.html" style="text-decoration: none"> <span class="hook-func">apply_filters</span>( 'https_local_ssl_verify', <nobr><span class="arg-type">bool</span> <span class="arg-name">$ssl_verify</span></nobr>, <nobr><span class="arg-type">string</span> <span class="arg-name">$url</span></nobr> ) </a> </dt> <dd class="hook-desc"> 
<p>Filters whether SSL should be verified for local HTTP API requests.</p> </dd> </dl> </article> </section>  <section> <header class="toc-header"><h2 id="related">Related</h2></header> <article class="uses"> <header class="toc-header"><h3 id="uses">Uses</h3></header> <table id="uses-table" data-show="5">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="../../functions/wp_create_nonce.html">wp_create_nonce()</a> <span>wp-includes/pluggable.php</span> </td> <td class="related-desc"> <p>Creates a cryptographic token tied to a specific action, user, user session, and window of time.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/wp_remote_get.html">wp_remote_get()</a> <span>wp-includes/http.php</span> </td> <td class="related-desc"> <p>Performs an HTTP request using the GET method and returns its response.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/wp_remote_retrieve_response_code.html">wp_remote_retrieve_response_code()</a> <span>wp-includes/http.php</span> </td> <td class="related-desc"> <p>Retrieve only the response code from the raw response.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/wp_remote_retrieve_response_message.html">wp_remote_retrieve_response_message()</a> <span>wp-includes/http.php</span> </td> <td class="related-desc"> <p>Retrieve only the response message from the raw response.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/wp_remote_retrieve_body.html">wp_remote_retrieve_body()</a> <span>wp-includes/http.php</span> </td> <td class="related-desc"> <p>Retrieve only the body from the raw response.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/rest_url.html">rest_url()</a> <span>wp-includes/rest-api.php</span> </td> <td class="related-desc"> <p>Retrieves the URL to a REST endpoint.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/__.html">__()</a> <span>wp-includes/l10n.php</span> </td> <td class="related-desc"> <p>Retrieves the translation of $text.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/wp_unslash.html">wp_unslash()</a> <span>wp-includes/formatting.php</span> </td> <td class="related-desc"> <p>Removes slashes from a string or recursively removes slashes from strings within an array.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/add_query_arg.html">add_query_arg()</a> <span>wp-includes/functions.php</span> </td> <td class="related-desc"> <p>Retrieves a modified URL query string.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/apply_filters.html">apply_filters()</a> <span>wp-includes/plugin.php</span> </td> <td class="related-desc"> <p>Calls the callback functions that have been added to a filter hook.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/is_wp_error.html">is_wp_error()</a> <span>wp-includes/load.php</span> </td> <td class="related-desc"> <p>Checks whether the given variable is a WordPress Error.</p> </td> </tr> </tbody>

</table>   </article> </section>  <section> <header class="toc-header"><h2 id="changelog">Changelog</h2></header> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/5.2.0/" alt="WordPress 5.2.0">5.2.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2003&ndash;2022 WordPress Foundation<br>Licensed under the GNU GPLv2+ License.<br>
    <a href="https://developer.wordpress.org/reference/classes/wp_site_health/get_test_rest_availability" class="_attribution-link">https://developer.wordpress.org/reference/classes/wp_site_health/get_test_rest_availability</a>
  </p>
</div>
