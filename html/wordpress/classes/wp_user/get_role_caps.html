<h1>WP_User::get_role_caps(): bool[]</h1>  <section> <p>Retrieves all of the capabilities of the user’s roles, and merges them with individual user capabilities.</p> </section>   <section> <header class="toc-header"><h2 id="description">Description</h2></header> <p>All of the capabilities of the user’s roles are merged with the user’s individual capabilities. This means that the user can be denied specific capabilities that their role might have, but the user is specifically denied.</p> </section>  <section> <header class="toc-header"><h2 id="return">Return</h2></header> <p><span class="return-type">bool[]</span> Array of key/value pairs where keys represent a capability name and boolean values represent whether the user has that capability.</p> </section>  <section> <header class="toc-header"><h2 id="source">Source</h2></header> <p> File: <code>wp-includes/class-wp-user.php</code>. <a href="https://developer.wordpress.org/reference/files/wp-includes/class-wp-user.php/">View all references</a> </p> <pre class="wp-block-code" data-start="502" aria-label="Function source code" data-language="php"><code lang="php" class="language-php line-numbers">public function get_role_caps() {
	$switch_site = false;
	if ( is_multisite() &amp;&amp; get_current_blog_id() != $this-&gt;site_id ) {
		$switch_site = true;

		switch_to_blog( $this-&gt;site_id );
	}

	$wp_roles = wp_roles();

	// Filter out caps that are not role names and assign to $this-&gt;roles.
	if ( is_array( $this-&gt;caps ) ) {
		$this-&gt;roles = array_filter( array_keys( $this-&gt;caps ), array( $wp_roles, 'is_role' ) );
	}

	// Build $allcaps from role caps, overlay user's $caps.
	$this-&gt;allcaps = array();
	foreach ( (array) $this-&gt;roles as $role ) {
		$the_role      = $wp_roles-&gt;get_role( $role );
		$this-&gt;allcaps = array_merge( (array) $this-&gt;allcaps, (array) $the_role-&gt;capabilities );
	}
	$this-&gt;allcaps = array_merge( (array) $this-&gt;allcaps, (array) $this-&gt;caps );

	if ( $switch_site ) {
		restore_current_blog();
	}

	return $this-&gt;allcaps;
}
</code></pre>  </section>  <section> <header class="toc-header"><h2 id="related">Related</h2></header> <article class="uses"> <header class="toc-header"><h3 id="uses">Uses</h3></header> <table id="uses-table" data-show="4">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="../../functions/wp_roles.html">wp_roles()</a> <span>wp-includes/capabilities.php</span> </td> <td class="related-desc"> <p>Retrieves the global <a href="../wp_roles.html" rel="class">WP_Roles</a> instance and instantiates it if necessary.</p> </td> </tr> <tr> <td class="related-title"> <a href="../wp_roles/get_role.html">WP_Roles::get_role()</a> <span>wp-includes/class-wp-roles.php</span> </td> <td class="related-desc"> <p>Retrieves a role object by name.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/switch_to_blog.html">switch_to_blog()</a> <span>wp-includes/ms-blogs.php</span> </td> <td class="related-desc"> <p>Switch the current blog.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/restore_current_blog.html">restore_current_blog()</a> <span>wp-includes/ms-blogs.php</span> </td> <td class="related-desc"> <p>Restore the current blog, after calling <a href="../../functions/switch_to_blog.html" rel="function">switch_to_blog()</a> .</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/is_multisite.html">is_multisite()</a> <span>wp-includes/load.php</span> </td> <td class="related-desc"> <p>If Multisite is enabled.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/get_current_blog_id.html">get_current_blog_id()</a> <span>wp-includes/load.php</span> </td> <td class="related-desc"> <p>Retrieve the current site ID.</p> </td> </tr> </tbody>

</table>   </article>  <article class="used-by"> <header class="toc-header"><h3 id="used-by">Used By</h3></header> <table id="used-by-table" data-show="5">  <thead> <tr> <th>Used By</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="for_site.html">WP_User::for_site()</a> <span>wp-includes/class-wp-user.php</span> </td> <td class="related-desc"> <p>Sets the site to operate on. Defaults to the current site.</p> </td> </tr> <tr> <td class="related-title"> <a href="add_cap.html">WP_User::add_cap()</a> <span>wp-includes/class-wp-user.php</span> </td> <td class="related-desc"> <p>Adds capability and grant or deny access to capability.</p> </td> </tr> <tr> <td class="related-title"> <a href="remove_cap.html">WP_User::remove_cap()</a> <span>wp-includes/class-wp-user.php</span> </td> <td class="related-desc"> <p>Removes capability from user.</p> </td> </tr> <tr> <td class="related-title"> <a href="remove_all_caps.html">WP_User::remove_all_caps()</a> <span>wp-includes/class-wp-user.php</span> </td> <td class="related-desc"> <p>Removes all of the capabilities of the user.</p> </td> </tr> <tr> <td class="related-title"> <a href="_init_caps.html">WP_User::_init_caps()</a> <span>wp-includes/class-wp-user.php</span> </td> <td class="related-desc"> <p>Sets up capability object properties.</p> </td> </tr> <tr> <td class="related-title"> <a href="add_role.html">WP_User::add_role()</a> <span>wp-includes/class-wp-user.php</span> </td> <td class="related-desc"> <p>Adds role to user.</p> </td> </tr> <tr> <td class="related-title"> <a href="remove_role.html">WP_User::remove_role()</a> <span>wp-includes/class-wp-user.php</span> </td> <td class="related-desc"> <p>Removes role from user.</p> </td> </tr> <tr> <td class="related-title"> <a href="set_role.html">WP_User::set_role()</a> <span>wp-includes/class-wp-user.php</span> </td> <td class="related-desc"> <p>Sets the role of the user.</p> </td> </tr> </tbody>

</table>   </article> </section>  <section> <header class="toc-header"><h2 id="changelog">Changelog</h2></header> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/2.0.0/" alt="WordPress 2.0.0">2.0.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2003&ndash;2022 WordPress Foundation<br>Licensed under the GNU GPLv2+ License.<br>
    <a href="https://developer.wordpress.org/reference/classes/wp_user/get_role_caps" class="_attribution-link">https://developer.wordpress.org/reference/classes/wp_user/get_role_caps</a>
  </p>
</div>
