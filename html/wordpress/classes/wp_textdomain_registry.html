<h1>class WP_Textdomain_Registry {}</h1>  <section> <p>Core class used for registering text domains.</p> </section>   <section> <header class="toc-header"><h2 id="methods">Methods</h2></header> <ul> <li>
<a href="wp_textdomain_registry/get.html"> get</a> — Returns the languages directory path for a specific domain and locale. </li> <li>
<a href="wp_textdomain_registry/get_path_from_lang_dir.html"> get_path_from_lang_dir</a> — Gets the path to the language directory for the current locale. </li> <li>
<a href="wp_textdomain_registry/has.html"> has</a> — Determines whether any MO file paths are available for the domain. </li> <li>
<a href="wp_textdomain_registry/set.html"> set</a> — Sets the language directory path for a specific domain and locale. </li> <li>
<a href="wp_textdomain_registry/set_cached_mo_files.html"> set_cached_mo_files</a> — Reads and caches all available MO files from a given directory. </li> <li>
<a href="wp_textdomain_registry/set_custom_path.html"> set_custom_path</a> — Sets the custom path to the plugin's/theme's languages directory. </li> </ul> </section>  <section> <header class="toc-header"><h2 id="source">Source</h2></header> <p> File: <code>wp-includes/class-wp-textdomain-registry.php</code>. <a href="https://developer.wordpress.org/reference/files/wp-includes/class-wp-textdomain-registry.php/">View all references</a> </p> <pre class="wp-block-code" data-start="16" aria-label="Function source code" data-language="php"><code lang="php" class="language-php line-numbers">class WP_Textdomain_Registry {
	/**
	 * List of domains and all their language directory paths for each locale.
	 *
	 * @since 6.1.0
	 *
	 * @var array
	 */
	protected $all = array();

	/**
	 * List of domains and their language directory path for the current (most recent) locale.
	 *
	 * @since 6.1.0
	 *
	 * @var array
	 */
	protected $current = array();

	/**
	 * List of domains and their custom language directory paths.
	 *
	 * @see load_plugin_textdomain()
	 * @see load_theme_textdomain()
	 *
	 * @since 6.1.0
	 *
	 * @var array
	 */
	protected $custom_paths = array();

	/**
	 * Holds a cached list of available .mo files to improve performance.
	 *
	 * @since 6.1.0
	 *
	 * @var array
	 */
	protected $cached_mo_files;

	/**
	 * Returns the languages directory path for a specific domain and locale.
	 *
	 * @since 6.1.0
	 *
	 * @param string $domain Text domain.
	 * @param string $locale Locale.
	 *
	 * @return string|false MO file path or false if there is none available.
	 */
	public function get( $domain, $locale ) {
		if ( isset( $this-&gt;all[ $domain ][ $locale ] ) ) {
			return $this-&gt;all[ $domain ][ $locale ];
		}

		return $this-&gt;get_path_from_lang_dir( $domain, $locale );
	}

	/**
	 * Determines whether any MO file paths are available for the domain.
	 *
	 * This is the case if a path has been set for the current locale,
	 * or if there is no information stored yet, in which case
	 * {@see _load_textdomain_just_in_time()} will fetch the information first.
	 *
	 * @since 6.1.0
	 *
	 * @param string $domain Text domain.
	 * @return bool Whether any MO file paths are available for the domain.
	 */
	public function has( $domain ) {
		return ! empty( $this-&gt;current[ $domain ] ) || empty( $this-&gt;all[ $domain ] );
	}

	/**
	 * Sets the language directory path for a specific domain and locale.
	 *
	 * Also sets the 'current' property for direct access
	 * to the path for the current (most recent) locale.
	 *
	 * @since 6.1.0
	 *
	 * @param string       $domain Text domain.
	 * @param string       $locale Locale.
	 * @param string|false $path   Language directory path or false if there is none available.
	 */
	public function set( $domain, $locale, $path ) {
		$this-&gt;all[ $domain ][ $locale ] = $path ? trailingslashit( $path ) : false;
		$this-&gt;current[ $domain ]        = $this-&gt;all[ $domain ][ $locale ];
	}

	/**
	 * Sets the custom path to the plugin's/theme's languages directory.
	 *
	 * Used by {@see load_plugin_textdomain()} and {@see load_theme_textdomain()}.
	 *
	 * @param string $domain Text domain.
	 * @param string $path   Language directory path.
	 */
	public function set_custom_path( $domain, $path ) {
		$this-&gt;custom_paths[ $domain ] = untrailingslashit( $path );
	}

	/**
	 * Gets the path to the language directory for the current locale.
	 *
	 * Checks the plugins and themes language directories as well as any
	 * custom directory set via {@see load_plugin_textdomain()} or {@see load_theme_textdomain()}.
	 *
	 * @since 6.1.0
	 *
	 * @see _get_path_to_translation_from_lang_dir()
	 *
	 * @param string $domain Text domain.
	 * @param string $locale Locale.
	 * @return string|false Language directory path or false if there is none available.
	 */
	private function get_path_from_lang_dir( $domain, $locale ) {
		$locations = array(
			WP_LANG_DIR . '/plugins',
			WP_LANG_DIR . '/themes',
		);

		if ( isset( $this-&gt;custom_paths[ $domain ] ) ) {
			$locations[] = $this-&gt;custom_paths[ $domain ];
		}

		$mofile = "$domain-$locale.mo";

		foreach ( $locations as $location ) {
			if ( ! isset( $this-&gt;cached_mo_files[ $location ] ) ) {
				$this-&gt;set_cached_mo_files( $location );
			}

			$path = $location . '/' . $mofile;

			if ( in_array( $path, $this-&gt;cached_mo_files[ $location ], true ) ) {
				$this-&gt;set( $domain, $locale, $location );

				return trailingslashit( $location );
			}
		}

		// If no path is found for the given locale and a custom path has been set
		// using load_plugin_textdomain/load_theme_textdomain, use that one.
		if ( 'en_US' !== $locale &amp;&amp; isset( $this-&gt;custom_paths[ $domain ] ) ) {
			$path = trailingslashit( $this-&gt;custom_paths[ $domain ] );
			$this-&gt;set( $domain, $locale, $path );
			return $path;
		}

		$this-&gt;set( $domain, $locale, false );

		return false;
	}

	/**
	 * Reads and caches all available MO files from a given directory.
	 *
	 * @since 6.1.0
	 *
	 * @param string $path Language directory path.
	 */
	private function set_cached_mo_files( $path ) {
		$this-&gt;cached_mo_files[ $path ] = array();

		$mo_files = glob( $path . '/*.mo' );

		if ( $mo_files ) {
			$this-&gt;cached_mo_files[ $path ] = $mo_files;
		}
	}
}
</code></pre>  </section>  <section> <header class="toc-header"><h2 id="changelog">Changelog</h2></header> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/6.1.0/" alt="WordPress 6.1.0">6.1.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2003&ndash;2022 WordPress Foundation<br>Licensed under the GNU GPLv2+ License.<br>
    <a href="https://developer.wordpress.org/reference/classes/wp_textdomain_registry" class="_attribution-link">https://developer.wordpress.org/reference/classes/wp_textdomain_registry</a>
  </p>
</div>
