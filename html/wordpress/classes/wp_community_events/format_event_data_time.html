<h1>WP_Community_Events::format_event_data_time( array $response_body ): array</h1> <div class="callout callout-warning">
<p> This method has been deprecated. No longer used in core instead.</p> </div>  <section> <p>Adds formatted date and time items for each event in an API response.</p> </section>   <section> <header class="toc-header"><h2 id="description">Description</h2></header> <p>This has to be called after the data is pulled from the cache, because the cached events are shared by all users. If it was called before storing the cache, then all users would see the events in the localized data/time of the user who triggered the cache refresh, rather than their own.</p> </section>  <section> <header class="toc-header"><h2 id="parameters">Parameters</h2></header> <dl> <dt> <code>$response_body</code> <span class="type"><span class="array">array</span></span> <span class="required">Required</span> </dt> <dd> <div class="desc"> <span class="description">The response which contains the events.</span> </div> </dd> </dl> </section>  <section> <header class="toc-header"><h2 id="return">Return</h2></header> <p><span class="return-type">array</span> The response with dates and times formatted.</p> </section>  <section> <header class="toc-header"><h2 id="source">Source</h2></header> <p> File: <code>wp-admin/includes/class-wp-community-events.php</code>. <a href="https://developer.wordpress.org/reference/files/wp-admin/includes/class-wp-community-events.php/">View all references</a> </p> <pre class="wp-block-code" data-start="383" aria-label="Function source code" data-language="php"><code lang="php" class="language-php line-numbers">protected function format_event_data_time( $response_body ) {
	_deprecated_function(
		__METHOD__,
		'5.5.2',
		'This is no longer used by core, and only kept for backward compatibility.'
	);

	if ( isset( $response_body['events'] ) ) {
		foreach ( $response_body['events'] as $key =&gt; $event ) {
			$timestamp = strtotime( $event['date'] );

			/*
			 * The `date_format` option is not used because it's important
			 * in this context to keep the day of the week in the formatted date,
			 * so that users can tell at a glance if the event is on a day they
			 * are available, without having to open the link.
			 */
			/* translators: Date format for upcoming events on the dashboard. Include the day of the week. See https://www.php.net/manual/datetime.format.php */
			$formatted_date = date_i18n( __( 'l, M j, Y' ), $timestamp );
			$formatted_time = date_i18n( get_option( 'time_format' ), $timestamp );

			if ( isset( $event['end_date'] ) ) {
				$end_timestamp      = strtotime( $event['end_date'] );
				$formatted_end_date = date_i18n( __( 'l, M j, Y' ), $end_timestamp );

				if ( 'meetup' !== $event['type'] &amp;&amp; $formatted_end_date !== $formatted_date ) {
					/* translators: Upcoming events month format. See https://www.php.net/manual/datetime.format.php */
					$start_month = date_i18n( _x( 'F', 'upcoming events month format' ), $timestamp );
					$end_month   = date_i18n( _x( 'F', 'upcoming events month format' ), $end_timestamp );

					if ( $start_month === $end_month ) {
						$formatted_date = sprintf(
							/* translators: Date string for upcoming events. 1: Month, 2: Starting day, 3: Ending day, 4: Year. */
							__( '%1$s %2$d–%3$d, %4$d' ),
							$start_month,
							/* translators: Upcoming events day format. See https://www.php.net/manual/datetime.format.php */
							date_i18n( _x( 'j', 'upcoming events day format' ), $timestamp ),
							date_i18n( _x( 'j', 'upcoming events day format' ), $end_timestamp ),
							/* translators: Upcoming events year format. See https://www.php.net/manual/datetime.format.php */
							date_i18n( _x( 'Y', 'upcoming events year format' ), $timestamp )
						);
					} else {
						$formatted_date = sprintf(
							/* translators: Date string for upcoming events. 1: Starting month, 2: Starting day, 3: Ending month, 4: Ending day, 5: Year. */
							__( '%1$s %2$d – %3$s %4$d, %5$d' ),
							$start_month,
							date_i18n( _x( 'j', 'upcoming events day format' ), $timestamp ),
							$end_month,
							date_i18n( _x( 'j', 'upcoming events day format' ), $end_timestamp ),
							date_i18n( _x( 'Y', 'upcoming events year format' ), $timestamp )
						);
					}

					$formatted_date = wp_maybe_decline_date( $formatted_date, 'F j, Y' );
				}
			}

			$response_body['events'][ $key ]['formatted_date'] = $formatted_date;
			$response_body['events'][ $key ]['formatted_time'] = $formatted_time;
		}
	}

	return $response_body;
}
</code></pre>  </section>  <section> <header class="toc-header"><h2 id="related">Related</h2></header> <article class="uses"> <header class="toc-header"><h3 id="uses">Uses</h3></header> <table id="uses-table" data-show="2">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="../../functions/wp_maybe_decline_date.html">wp_maybe_decline_date()</a> <span>wp-includes/functions.php</span> </td> <td class="related-desc"> <p>Determines if the date should be declined.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/date_i18n.html">date_i18n()</a> <span>wp-includes/functions.php</span> </td> <td class="related-desc"> <p>Retrieves the date in localized format, based on a sum of Unix timestamp and timezone offset in seconds.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/__.html">__()</a> <span>wp-includes/l10n.php</span> </td> <td class="related-desc"> <p>Retrieves the translation of $text.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/_x.html">_x()</a> <span>wp-includes/l10n.php</span> </td> <td class="related-desc"> <p>Retrieves translated string with gettext context.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/_deprecated_function.html">_deprecated_function()</a> <span>wp-includes/functions.php</span> </td> <td class="related-desc"> <p>Marks a function as deprecated and inform when it has been used.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/get_option.html">get_option()</a> <span>wp-includes/option.php</span> </td> <td class="related-desc"> <p>Retrieves an option value based on an option name.</p> </td> </tr> </tbody>

</table>   </article> </section>  <section> <header class="toc-header"><h2 id="changelog">Changelog</h2></header> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/5.6.0/" alt="WordPress 5.6.0">5.6.0</a></td> <td><span class="since-description">No longer used in core.</span></td> </tr> <tr> <td><a href="https://developer.wordpress.org/reference/since/4.8.0/" alt="WordPress 4.8.0">4.8.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2003&ndash;2022 WordPress Foundation<br>Licensed under the GNU GPLv2+ License.<br>
    <a href="https://developer.wordpress.org/reference/classes/wp_community_events/format_event_data_time" class="_attribution-link">https://developer.wordpress.org/reference/classes/wp_community_events/format_event_data_time</a>
  </p>
</div>
