<h1>WP_Customize_Manager::remove_frameless_preview_messenger_channel()</h1>  <section> <p>Removes customize_messenger_channel query parameter from the preview window when it is not in an iframe.</p> </section>   <section> <header class="toc-header"><h2 id="description">Description</h2></header> <p>This ensures that the admin bar will be shown. It also ensures that link navigation will work as expected since the parent frame is not being sent the URL to navigate to.</p> </section>  <section> <header class="toc-header"><h2 id="source">Source</h2></header> <p> File: <code>wp-includes/class-wp-customize-manager.php</code>. <a href="https://developer.wordpress.org/reference/files/wp-includes/class-wp-customize-manager.php/">View all references</a> </p> <pre class="wp-block-code" data-start="2075" aria-label="Function source code" data-language="php"><code lang="php" class="language-php line-numbers">public function remove_frameless_preview_messenger_channel() {
	if ( ! $this-&gt;messenger_channel ) {
		return;
	}
	?&gt;
	&lt;script&gt;
	( function() {
		var urlParser, oldQueryParams, newQueryParams, i;
		if ( parent !== window ) {
			return;
		}
		urlParser = document.createElement( 'a' );
		urlParser.href = location.href;
		oldQueryParams = urlParser.search.substr( 1 ).split( /&amp;/ );
		newQueryParams = [];
		for ( i = 0; i &lt; oldQueryParams.length; i += 1 ) {
			if ( ! /^customize_messenger_channel=/.test( oldQueryParams[ i ] ) ) {
				newQueryParams.push( oldQueryParams[ i ] );
			}
		}
		urlParser.search = newQueryParams.join( '&amp;' );
		if ( urlParser.search !== location.search ) {
			location.replace( urlParser.href );
		}
	} )();
	&lt;/script&gt;
	&lt;?php
}
</code></pre>  </section>  <section> <header class="toc-header"><h2 id="changelog">Changelog</h2></header> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/4.7.0/" alt="WordPress 4.7.0">4.7.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2003&ndash;2022 WordPress Foundation<br>Licensed under the GNU GPLv2+ License.<br>
    <a href="https://developer.wordpress.org/reference/classes/wp_customize_manager/remove_frameless_preview_messenger_channel" class="_attribution-link">https://developer.wordpress.org/reference/classes/wp_customize_manager/remove_frameless_preview_messenger_channel</a>
  </p>
</div>
