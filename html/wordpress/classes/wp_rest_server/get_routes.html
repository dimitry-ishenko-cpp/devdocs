<h1>WP_REST_Server::get_routes( string $namespace = '' ): array</h1>  <section> <p>Retrieves the route map.</p> </section>   <section> <header class="toc-header"><h2 id="description">Description</h2></header> <p>The route map is an associative array with path regexes as the keys. The value is an indexed array with the callback function/method as the first item, and a bitmask of HTTP methods as the second item (see the class constants).</p> <p>Each route can be mapped to more than one callback by using an array of the indexed arrays. This allows mapping e.g. GET requests to one callback and POST requests to another.</p> <p>Note that the path regexes (array keys) must have @ escaped, as this is used as the delimiter with preg_match()</p> </section>  <section> <header class="toc-header"><h2 id="parameters">Parameters</h2></header> <dl> <dt> <code>$namespace</code> <span class="type"><span class="string">string</span></span> <span class="required">Optional</span> </dt> <dd> <div class="desc"> <span class="description">y, only return routes in the given namespace.</span> </div> <p class="default">Default: <code>''</code></p> </dd> </dl> </section>  <section> <header class="toc-header"><h2 id="return">Return</h2></header> <p><span class="return-type">array</span> <code>'/path/regex' =&gt; array( $callback, $bitmask )</code> or <code>'/path/regex' =&gt; array( array( $callback, $bitmask ), ...)</code>.</p> </section>  <section> <header class="toc-header"><h2 id="source">Source</h2></header> <p> File: <code>wp-includes/rest-api/class-wp-rest-server.php</code>. <a href="https://developer.wordpress.org/reference/files/wp-includes/rest-api/class-wp-rest-server.php/">View all references</a> </p> <pre class="wp-block-code" data-start="863" aria-label="Function source code" data-language="php"><code lang="php" class="language-php line-numbers">public function get_routes( $namespace = '' ) {
	$endpoints = $this-&gt;endpoints;

	if ( $namespace ) {
		$endpoints = wp_list_filter( $endpoints, array( 'namespace' =&gt; $namespace ) );
	}

	/**
	 * Filters the array of available REST API endpoints.
	 *
	 * @since 4.4.0
	 *
	 * @param array $endpoints The available endpoints. An array of matching regex patterns, each mapped
	 *                         to an array of callbacks for the endpoint. These take the format
	 *                         `'/path/regex' =&gt; array( $callback, $bitmask )` or
	 *                         `'/path/regex' =&gt; array( array( $callback, $bitmask ).
	 */
	$endpoints = apply_filters( 'rest_endpoints', $endpoints );

	// Normalize the endpoints.
	$defaults = array(
		'methods'       =&gt; '',
		'accept_json'   =&gt; false,
		'accept_raw'    =&gt; false,
		'show_in_index' =&gt; true,
		'args'          =&gt; array(),
	);

	foreach ( $endpoints as $route =&gt; &amp;$handlers ) {

		if ( isset( $handlers['callback'] ) ) {
			// Single endpoint, add one deeper.
			$handlers = array( $handlers );
		}

		if ( ! isset( $this-&gt;route_options[ $route ] ) ) {
			$this-&gt;route_options[ $route ] = array();
		}

		foreach ( $handlers as $key =&gt; &amp;$handler ) {

			if ( ! is_numeric( $key ) ) {
				// Route option, move it to the options.
				$this-&gt;route_options[ $route ][ $key ] = $handler;
				unset( $handlers[ $key ] );
				continue;
			}

			$handler = wp_parse_args( $handler, $defaults );

			// Allow comma-separated HTTP methods.
			if ( is_string( $handler['methods'] ) ) {
				$methods = explode( ',', $handler['methods'] );
			} elseif ( is_array( $handler['methods'] ) ) {
				$methods = $handler['methods'];
			} else {
				$methods = array();
			}

			$handler['methods'] = array();

			foreach ( $methods as $method ) {
				$method                        = strtoupper( trim( $method ) );
				$handler['methods'][ $method ] = true;
			}
		}
	}

	return $endpoints;
}
</code></pre>  </section>  <section> <header class="toc-header"><h2 id="hooks">Hooks</h2></header> <article class="hooks"> <dl> <dt class="signature-highlight"> <a href="../../hooks/rest_endpoints.html" style="text-decoration: none"> <span class="hook-func">apply_filters</span>( 'rest_endpoints', <nobr><span class="arg-type">array</span> <span class="arg-name">$endpoints</span></nobr> ) </a> </dt> <dd class="hook-desc"> 
<p>Filters the array of available REST API endpoints.</p> </dd> </dl> </article> </section>  <section> <header class="toc-header"><h2 id="related">Related</h2></header> <article class="uses"> <header class="toc-header"><h3 id="uses">Uses</h3></header> <table id="uses-table" data-show="2">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="../../functions/wp_list_filter.html">wp_list_filter()</a> <span>wp-includes/functions.php</span> </td> <td class="related-desc"> <p>Filters a list of objects, based on a set of key =&gt; value arguments.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/wp_parse_args.html">wp_parse_args()</a> <span>wp-includes/functions.php</span> </td> <td class="related-desc"> <p>Merges user defined arguments into defaults array.</p> </td> </tr> <tr> <td class="related-title"> <a href="../../functions/apply_filters.html">apply_filters()</a> <span>wp-includes/plugin.php</span> </td> <td class="related-desc"> <p>Calls the callback functions that have been added to a filter hook.</p> </td> </tr> </tbody>

</table>   </article>  <article class="used-by"> <header class="toc-header"><h3 id="used-by">Used By</h3></header> <table id="used-by-table" data-show="5">  <thead> <tr> <th>Used By</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="match_request_to_handler.html">WP_REST_Server::match_request_to_handler()</a> <span>wp-includes/rest-api/class-wp-rest-server.php</span> </td> <td class="related-desc"> <p>Matches a request object to its handler.</p> </td> </tr> <tr> <td class="related-title"> <a href="get_index.html">WP_REST_Server::get_index()</a> <span>wp-includes/rest-api/class-wp-rest-server.php</span> </td> <td class="related-desc"> <p>Retrieves the site index.</p> </td> </tr> <tr> <td class="related-title"> <a href="get_namespace_index.html">WP_REST_Server::get_namespace_index()</a> <span>wp-includes/rest-api/class-wp-rest-server.php</span> </td> <td class="related-desc"> <p>Retrieves the index for a namespace.</p> </td> </tr> </tbody>

</table> </article> </section>  <section> <header class="toc-header"><h2 id="changelog">Changelog</h2></header> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/5.4.0/" alt="WordPress 5.4.0">5.4.0</a></td> <td><span class="since-description">Add $namespace parameter.</span></td> </tr> <tr> <td><a href="https://developer.wordpress.org/reference/since/4.4.0/" alt="WordPress 4.4.0">4.4.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2003&ndash;2022 WordPress Foundation<br>Licensed under the GNU GPLv2+ License.<br>
    <a href="https://developer.wordpress.org/reference/classes/wp_rest_server/get_routes" class="_attribution-link">https://developer.wordpress.org/reference/classes/wp_rest_server/get_routes</a>
  </p>
</div>
