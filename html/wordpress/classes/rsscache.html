<h1>class RSSCache {}</h1>     <section> <header class="toc-header"><h2 id="methods">Methods</h2></header> <ul> <li>
<a href="rsscache/__construct.html"> __construct</a> — PHP5 constructor. </li> <li>
<a href="rsscache/check_cache.html"> check_cache</a> </li> <li>
<a href="rsscache/debug.html"> debug</a> </li> <li>
<a href="rsscache/error.html"> error</a> </li> <li>
<a href="rsscache/file_name.html"> file_name</a> </li> <li>
<a href="rsscache/get.html"> get</a> </li> <li>
<a href="rsscache/rsscache.html"> RSSCache</a> — PHP4 constructor. </li> <li>
<a href="rsscache/serialize.html"> serialize</a> </li> <li>
<a href="rsscache/set.html"> set</a> </li> <li>
<a href="rsscache/unserialize.html"> unserialize</a> </li> </ul> </section>  <section> <header class="toc-header"><h2 id="source">Source</h2></header> <p> File: <code>wp-includes/rss.php</code>. <a href="https://developer.wordpress.org/reference/files/wp-includes/rss.php/">View all references</a> </p> <pre class="wp-block-code" data-start="712" aria-label="Function source code" data-language="php"><code lang="php" class="language-php line-numbers">class RSSCache {
	var $BASE_CACHE;	// where the cache files are stored
	var $MAX_AGE	= 43200;  		// when are files stale, default twelve hours
	var $ERROR 		= '';			// accumulate error messages

	/**
	 * PHP5 constructor.
	 */
	function __construct( $base = '', $age = '' ) {
		$this-&gt;BASE_CACHE = WP_CONTENT_DIR . '/cache';
		if ( $base ) {
			$this-&gt;BASE_CACHE = $base;
		}
		if ( $age ) {
			$this-&gt;MAX_AGE = $age;
		}

	}

	/**
	 * PHP4 constructor.
	 */
	public function RSSCache( $base = '', $age = '' ) {
		self::__construct( $base, $age );
	}

/*=======================================================================*\
	Function:	set
	Purpose:	add an item to the cache, keyed on url
	Input:		url from which the rss file was fetched
	Output:		true on success
\*=======================================================================*/
	function set ($url, $rss) {
		$cache_option = 'rss_' . $this-&gt;file_name( $url );

		set_transient($cache_option, $rss, $this-&gt;MAX_AGE);

		return $cache_option;
	}

/*=======================================================================*\
	Function:	get
	Purpose:	fetch an item from the cache
	Input:		url from which the rss file was fetched
	Output:		cached object on HIT, false on MISS
\*=======================================================================*/
	function get ($url) {
		$this-&gt;ERROR = "";
		$cache_option = 'rss_' . $this-&gt;file_name( $url );

		if ( ! $rss = get_transient( $cache_option ) ) {
			$this-&gt;debug(
				"Cache does not contain: $url (cache option: $cache_option)"
			);
			return 0;
		}

		return $rss;
	}

/*=======================================================================*\
	Function:	check_cache
	Purpose:	check a url for membership in the cache
				and whether the object is older then MAX_AGE (ie. STALE)
	Input:		url from which the rss file was fetched
	Output:		cached object on HIT, false on MISS
\*=======================================================================*/
	function check_cache ( $url ) {
		$this-&gt;ERROR = "";
		$cache_option = 'rss_' . $this-&gt;file_name( $url );

		if ( get_transient($cache_option) ) {
			// object exists and is current
				return 'HIT';
		} else {
			// object does not exist
			return 'MISS';
		}
	}

/*=======================================================================*\
	Function:	serialize
\*=======================================================================*/
	function serialize ( $rss ) {
		return serialize( $rss );
	}

/*=======================================================================*\
	Function:	unserialize
\*=======================================================================*/
	function unserialize ( $data ) {
		return unserialize( $data );
	}

/*=======================================================================*\
	Function:	file_name
	Purpose:	map url to location in cache
	Input:		url from which the rss file was fetched
	Output:		a file name
\*=======================================================================*/
	function file_name ($url) {
		return md5( $url );
	}

/*=======================================================================*\
	Function:	error
	Purpose:	register error
\*=======================================================================*/
	function error ($errormsg, $lvl=E_USER_WARNING) {
		$this-&gt;ERROR = $errormsg;
		if ( MAGPIE_DEBUG ) {
			trigger_error( $errormsg, $lvl);
		}
		else {
			error_log( $errormsg, 0);
		}
	}
			function debug ($debugmsg, $lvl=E_USER_NOTICE) {
		if ( MAGPIE_DEBUG ) {
			$this-&gt;error("MagpieRSS [debug] $debugmsg", $lvl);
		}
	}
}
</code></pre>  </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2003&ndash;2022 WordPress Foundation<br>Licensed under the GNU GPLv2+ License.<br>
    <a href="https://developer.wordpress.org/reference/classes/rsscache" class="_attribution-link">https://developer.wordpress.org/reference/classes/rsscache</a>
  </p>
</div>
