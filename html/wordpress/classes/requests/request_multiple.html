<h1>Requests::request_multiple( array $requests, array $options = array() ): array</h1>  <section> <p>Send multiple HTTP requests simultaneously</p> </section>   <section> <header class="toc-header"><h2 id="description">Description</h2></header> <p>The <code>$requests</code> parameter takes an associative or indexed array of request fields. The key of each request can be used to match up the request with the returned data, or with the request passed into your <code>multiple.request.complete</code> callback.</p> <p>The request fields value is an associative array with the following keys:</p> <ul> <li>
<code>url</code>: Request URL Same as the <code>$url</code> parameter to <a href="request.html" rel="method">Requests::request()</a> (string, required)</li> <li>
<code>headers</code>: Associative array of header fields. Same as the <code>$headers</code> parameter to <a href="request.html" rel="method">Requests::request()</a> (array, default: <code>array()</code>)</li> <li>
<code>data</code>: Associative array of data fields or a string. Same as the <code>$data</code> parameter to <a href="request.html" rel="method">Requests::request()</a> (array|string, default: <code>array()</code>)</li> <li>
<code>type</code>: HTTP request type (use Requests constants). Same as the <code>$type</code> parameter to <a href="request.html" rel="method">Requests::request()</a> (string, default: <code>Requests::GET</code>)</li> <li>
<code>cookies</code>: Associative array of cookie name to value, or cookie jar.<br>(array|<a href="../requests_cookie_jar.html" rel="class">Requests_Cookie_Jar</a>)</li> </ul> <p>If the <code>$options</code> parameter is specified, individual requests will inherit options from it. This can be used to use a single hooking system, or set all the types to <code>Requests::POST</code>, for example.</p> <p>In addition, the <code>$options</code> parameter takes the following global options:</p> <ul> <li>
<code>complete</code>: A callback for when a request is complete. Takes two parameters, a <a href="../requests_response.html" rel="class">Requests_Response</a>/Requests_Exception reference, and the ID from the request array (Note: this can also be overridden on a per-request basis, although thatâ€™s a little silly) (callback)</li> </ul> </section>  <section> <header class="toc-header"><h2 id="parameters">Parameters</h2></header> <dl> <dt> <code>$requests</code> <span class="type"><span class="array">array</span></span> <span class="required">Required</span> </dt> <dd> <div class="desc"> <span class="description">Requests data (see description for more information)</span> </div> </dd> <dt> <code>$options</code> <span class="type"><span class="array">array</span></span> <span class="required">Optional</span> </dt> <dd> <div class="desc"> <span class="description">Global and default options (see <a href="request.html" rel="method">Requests::request()</a> )</span> <details class="extended-description"> <summary> More Arguments from Requests::request( ... $options ) </summary> <span class="description">Options for the request (see description for more information)</span> </details> </div> <p class="default">Default: <code>array()</code></p> </dd> </dl> </section>  <section> <header class="toc-header"><h2 id="return">Return</h2></header> <p><span class="return-type">array</span> Responses (either <a href="../requests_response.html" rel="class">Requests_Response</a> or a <a href="../requests_exception.html" rel="class">Requests_Exception</a> object)</p> </section>  <section> <header class="toc-header"><h2 id="source">Source</h2></header> <p> File: <code>wp-includes/class-requests.php</code>. <a href="https://developer.wordpress.org/reference/files/wp-includes/class-requests.php/">View all references</a> </p> <pre class="wp-block-code" data-start="429" aria-label="Function source code" data-language="php"><code lang="php" class="language-php line-numbers">public static function request_multiple($requests, $options = array()) {
	$options = array_merge(self::get_default_options(true), $options);

	if (!empty($options['hooks'])) {
		$options['hooks']-&gt;register('transport.internal.parse_response', array('Requests', 'parse_multiple'));
		if (!empty($options['complete'])) {
			$options['hooks']-&gt;register('multiple.request.complete', $options['complete']);
		}
	}

	foreach ($requests as $id =&gt; &amp;$request) {
		if (!isset($request['headers'])) {
			$request['headers'] = array();
		}
		if (!isset($request['data'])) {
			$request['data'] = array();
		}
		if (!isset($request['type'])) {
			$request['type'] = self::GET;
		}
		if (!isset($request['options'])) {
			$request['options']         = $options;
			$request['options']['type'] = $request['type'];
		}
		else {
			if (empty($request['options']['type'])) {
				$request['options']['type'] = $request['type'];
			}
			$request['options'] = array_merge($options, $request['options']);
		}

		self::set_defaults($request['url'], $request['headers'], $request['data'], $request['type'], $request['options']);

		// Ensure we only hook in once
		if ($request['options']['hooks'] !== $options['hooks']) {
			$request['options']['hooks']-&gt;register('transport.internal.parse_response', array('Requests', 'parse_multiple'));
			if (!empty($request['options']['complete'])) {
				$request['options']['hooks']-&gt;register('multiple.request.complete', $request['options']['complete']);
			}
		}
	}
	unset($request);

	if (!empty($options['transport'])) {
		$transport = $options['transport'];

		if (is_string($options['transport'])) {
			$transport = new $transport();
		}
	}
	else {
		$transport = self::get_transport();
	}
	$responses = $transport-&gt;request_multiple($requests, $options);

	foreach ($responses as $id =&gt; &amp;$response) {
		// If our hook got messed with somehow, ensure we end up with the
		// correct response
		if (is_string($response)) {
			$request = $requests[$id];
			self::parse_multiple($response, $request);
			$request['options']['hooks']-&gt;dispatch('multiple.request.complete', array(&amp;$response, $id));
		}
	}

	return $responses;
}
</code></pre>  </section>  <section> <header class="toc-header"><h2 id="related">Related</h2></header> <article class="uses"> <header class="toc-header"><h3 id="uses">Uses</h3></header> <table id="uses-table" data-show="4">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="set_defaults.html">Requests::set_defaults()</a> <span>wp-includes/class-requests.php</span> </td> <td class="related-desc"> <p>Set the default values</p> </td> </tr> <tr> <td class="related-title"> <a href="parse_multiple.html">Requests::parse_multiple()</a> <span>wp-includes/class-requests.php</span> </td> <td class="related-desc"> <p>Callback for <code>transport.internal.parse_response</code></p> </td> </tr> <tr> <td class="related-title"> <a href="get_default_options.html">Requests::get_default_options()</a> <span>wp-includes/class-requests.php</span> </td> <td class="related-desc"> <p>Get the default options</p> </td> </tr> <tr> <td class="related-title"> <a href="get_transport.html">Requests::get_transport()</a> <span>wp-includes/class-requests.php</span> </td> <td class="related-desc"> <p>Get a working transport</p> </td> </tr> </tbody>

</table> </article> <article class="used-by"> <header class="toc-header"><h3 id="used-by">Used By</h3></header> <table id="used-by-table" data-show="5">  <thead> <tr> <th>Used By</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td class="related-title"> <a href="../requests_session/request_multiple.html">Requests_Session::request_multiple()</a> <span>wp-includes/Requests/Session.php</span> </td> <td class="related-desc"> <p>Send multiple HTTP requests simultaneously</p> </td> </tr> </tbody>

</table> </article> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2003&ndash;2022 WordPress Foundation<br>Licensed under the GNU GPLv2+ License.<br>
    <a href="https://developer.wordpress.org/reference/classes/requests/request_multiple" class="_attribution-link">https://developer.wordpress.org/reference/classes/requests/request_multiple</a>
  </p>
</div>
