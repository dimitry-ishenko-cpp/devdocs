<h1>Exception Handling</h1> <p>Click internally uses exceptions to signal various error conditions that the user of the application might have caused. Primarily this is things like incorrect usage.</p> <section id="where-are-errors-handled"> <h2>Where are Errors Handled?</h2> <p>Click’s main error handling is happening in <a class="reference internal" href="../api/index.html#click.BaseCommand.main" title="click.BaseCommand.main"><code>BaseCommand.main()</code></a>. In there it handles all subclasses of <a class="reference internal" href="../api/index.html#click.ClickException" title="click.ClickException"><code>ClickException</code></a> as well as the standard <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#EOFError" title="(in Python v3.12)"><code>EOFError</code></a> and <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#KeyboardInterrupt" title="(in Python v3.12)"><code>KeyboardInterrupt</code></a> exceptions. The latter are internally translated into an <a class="reference internal" href="../api/index.html#click.Abort" title="click.Abort"><code>Abort</code></a>.</p> <p>The logic applied is the following:</p> <ol class="arabic simple"> <li>If an <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#EOFError" title="(in Python v3.12)"><code>EOFError</code></a> or <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#KeyboardInterrupt" title="(in Python v3.12)"><code>KeyboardInterrupt</code></a> happens, reraise it as <a class="reference internal" href="../api/index.html#click.Abort" title="click.Abort"><code>Abort</code></a>.</li> <li>If a <a class="reference internal" href="../api/index.html#click.ClickException" title="click.ClickException"><code>ClickException</code></a> is raised, invoke the <code>ClickException.show()</code> method on it to display it and then exit the program with <code>ClickException.exit_code</code>.</li> <li>If an <a class="reference internal" href="../api/index.html#click.Abort" title="click.Abort"><code>Abort</code></a> exception is raised print the string <code>Aborted!</code> to standard error and exit the program with exit code <code>1</code>.</li> <li>If it goes through well, exit the program with exit code <code>0</code>.</li> </ol> </section> <section id="what-if-i-don-t-want-that"> <h2>What if I don’t want that?</h2> <p>Generally you always have the option to invoke the <code>invoke()</code> method yourself. For instance if you have a <a class="reference internal" href="../api/index.html#click.Command" title="click.Command"><code>Command</code></a> you can invoke it manually like this:</p> <pre data-language="python">ctx = command.make_context('command-name', ['args', 'go', 'here'])
with ctx:
    result = command.invoke(ctx)
</pre> <p>In this case exceptions will not be handled at all and bubbled up as you would expect.</p> <p>Starting with Click 3.0 you can also use the <code>Command.main()</code> method but disable the standalone mode which will do two things: disable exception handling and disable the implicit <code>sys.exit()</code> at the end.</p> <p>So you can do something like this:</p> <pre data-language="python">command.main(['command-name', 'args', 'go', 'here'],
             standalone_mode=False)
</pre> </section> <section id="which-exceptions-exist"> <h2>Which Exceptions Exist?</h2> <p>Click has two exception bases: <a class="reference internal" href="../api/index.html#click.ClickException" title="click.ClickException"><code>ClickException</code></a> which is raised for all exceptions that Click wants to signal to the user and <a class="reference internal" href="../api/index.html#click.Abort" title="click.Abort"><code>Abort</code></a> which is used to instruct Click to abort the execution.</p> <p>A <a class="reference internal" href="../api/index.html#click.ClickException" title="click.ClickException"><code>ClickException</code></a> has a <code>show()</code> method which can render an error message to stderr or the given file object. If you want to use the exception yourself for doing something check the API docs about what else they provide.</p> <p>The following common subclasses exist:</p> <ul class="simple"> <li>
<a class="reference internal" href="../api/index.html#click.UsageError" title="click.UsageError"><code>UsageError</code></a> to inform the user that something went wrong.</li> <li>
<a class="reference internal" href="../api/index.html#click.BadParameter" title="click.BadParameter"><code>BadParameter</code></a> to inform the user that something went wrong with a specific parameter. These are often handled internally in Click and augmented with extra information if possible. For instance if those are raised from a callback Click will automatically augment it with the parameter name if possible.</li> <li>
<a class="reference internal" href="../api/index.html#click.FileError" title="click.FileError"><code>FileError</code></a> this is an error that is raised by the <code>FileType</code> if Click encounters issues opening the file.</li> </ul> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; Copyright 2014 Pallets.<br>Licensed under the BSD 3-Clause License.<br>We are not supported nor endorsed by Pallets.<br>
    <a href="https://click.palletsprojects.com/en/8.1.x/exceptions/" class="_attribution-link">https://click.palletsprojects.com/en/8.1.x/exceptions/</a>
  </p>
</div>
