<h1>Inter-Process Communication</h1>
<p>Inter-process communication (IPC) is a key part of building feature-rich desktop applications in Electron. Because the main and renderer processes have different responsibilities in Electron's process model, IPC is the only way to perform many common tasks, such as calling a native API from your UI or triggering changes in your web contents from native menus.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ipc-channels">IPC channels<a class="hash-link" href="#ipc-channels" title="Direct link to heading">​</a>
</h2>
<p>In Electron, processes communicate by passing messages through developer-defined "channels" with the <a href="../api/ipc-main.html"><code>ipcMain</code></a> and <a href="../api/ipc-renderer.html"><code>ipcRenderer</code></a> modules. These channels are <strong>arbitrary</strong> (you can name them anything you want) and <strong>bidirectional</strong> (you can use the same channel name for both modules).</p>
<p>In this guide, we'll be going over some fundamental IPC patterns with concrete examples that you can use as a reference for your app code.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="understanding-context-isolated-processes">Understanding context-isolated processes<a class="hash-link" href="#understanding-context-isolated-processes" title="Direct link to heading">​</a>
</h2>
<p>Before proceeding to implementation details, you should be familiar with the idea of using a <a href="process-model.html#preload-scripts">preload script</a> to import Node.js and Electron modules in a context-isolated renderer process.</p>
<ul>
<li>For a full overview of Electron's process model, you can read the <a href="process-model.html">process model docs</a>.</li>
<li>For a primer into exposing APIs from your preload script using the <code>contextBridge</code> module, check out the <a href="context-isolation.html">context isolation tutorial</a>.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pattern-1-renderer-to-main-one-way">Pattern 1: Renderer to main (one-way)<a class="hash-link" href="#pattern-1-renderer-to-main-one-way" title="Direct link to heading">​</a>
</h2>
<p>To fire a one-way IPC message from a renderer process to the main process, you can use the <a href="../api/ipc-renderer.html"><code>ipcRenderer.send</code></a> API to send a message that is then received by the <a href="../api/ipc-main.html"><code>ipcMain.on</code></a> API.</p>
<p>You usually use this pattern to call a main process API from your web contents. We'll demonstrate this pattern by creating a simple app that can programmatically change its window title.</p>
<p>For this demo, you'll need to add code to your main process, your renderer process, and a preload script. The full code is below, but we'll be explaining each file individually in the following sections.</p>
<div class="editorWindow_ZQWz">
<div class="editorWindowHeader_GqG7">

<a class="editorTitle_buME" href="https://github.com/electron/electron/tree/v20.1.0/docs/fiddles/ipc/pattern-1">docs/fiddles/ipc/pattern-1 (20.1.0)</a><a target="_blank" class="button button--primary button--md" href="https://fiddle.electronjs.org/launch?target=electron/v20.1.0/docs/fiddles/ipc/pattern-1" rel="noreferrer">Open in Fiddle</a>
</div>
<div class="editorWindowBody_R11m"><div class="tabs-container tabList__CuJ">
<ul role="tablist" aria-orientation="horizontal" class="tabs">
<li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">main.js</li>
<li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">preload.js</li>
<li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">index.html</li>
<li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">renderer.js</li>
</ul>
<div class="margin-top--md">
<div role="tabpanel" class="tabItem_Ymn6"><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" data-language="javascript">const {app, BrowserWindow, ipcMain} = require('electron')
const path = require('path')

function createWindow () {
  const mainWindow = new BrowserWindow({
    webPreferences: {
      preload: path.join(__dirname, 'preload.js')
    }
  })

  ipcMain.on('set-title', (event, title) =&gt; {
    const webContents = event.sender
    const win = BrowserWindow.fromWebContents(webContents)
    win.setTitle(title)
  })

  mainWindow.loadFile('index.html')
}

app.whenReady().then(() =&gt; {
  createWindow()
  
  app.on('activate', function () {
    if (BrowserWindow.getAllWindows().length === 0) createWindow()
  })
})

app.on('window-all-closed', function () {
  if (process.platform !== 'darwin') app.quit()
})</pre>

</div></div></div>
<div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" data-language="javascript">const { contextBridge, ipcRenderer } = require('electron')

contextBridge.exposeInMainWorld('electronAPI', {
    setTitle: (title) =&gt; ipcRenderer.send('set-title', title)
})</pre>

</div></div></div>
<div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" data-language="javascript">&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP --&gt;
    &lt;meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'"&gt;
    &lt;title&gt;Hello World!&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    Title: &lt;input id="title"/&gt;
    &lt;button id="btn" type="button"&gt;Set&lt;/button&gt;
    &lt;script src="./renderer.js"&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre>

</div></div></div>
<div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" data-language="javascript">const setButton = document.getElementById('btn')
const titleInput = document.getElementById('title')
setButton.addEventListener('click', () =&gt; {
    const title = titleInput.value
    window.electronAPI.setTitle(title)
});</pre>

</div></div></div>
</div>
</div></div>
</div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-listen-for-events-with-ipcmainon">1. Listen for events with <code>ipcMain.on</code><a class="hash-link" href="#1-listen-for-events-with-ipcmainon" title="Direct link to heading">​</a>
</h3>
<p>In the main process, set an IPC listener on the <code>set-title</code> channel with the <code>ipcMain.on</code> API:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">main.js (Main Process)</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" data-language="javascript">const {app, BrowserWindow, ipcMain} = require('electron')
const path = require('path')

//...

function handleSetTitle (event, title) {
  const webContents = event.sender
  const win = BrowserWindow.fromWebContents(webContents)
  win.setTitle(title)
}

function createWindow () {
  const mainWindow = new BrowserWindow({
    webPreferences: {
      preload: path.join(__dirname, 'preload.js')
    }
  })
  mainWindow.loadFile('index.html')
}

app.whenReady().then(() =&gt; {
  ipcMain.on('set-title', handleSetTitle)
  createWindow()
}
//...</pre>

</div>
</div>
<p>The above <code>handleSetTitle</code> callback has two parameters: an <a href="../api/structures/ipc-main-event.html">IpcMainEvent</a> structure and a <code>title</code> string. Whenever a message comes through the <code>set-title</code> channel, this function will find the BrowserWindow instance attached to the message sender and use the <code>win.setTitle</code> API on it.</p>
<div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9">
<div class="admonitionHeading_tbUL">
info</div>
<div class="admonitionContent_S0QG"><p>Make sure you're loading the <code>index.html</code> and <code>preload.js</code> entry points for the following steps!</p></div>
</div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-expose-ipcrenderersend-via-preload">2. Expose <code>ipcRenderer.send</code> via preload<a class="hash-link" href="#2-expose-ipcrenderersend-via-preload" title="Direct link to heading">​</a>
</h3>
<p>To send messages to the listener created above, you can use the <code>ipcRenderer.send</code> API. By default, the renderer process has no Node.js or Electron module access. As an app developer, you need to choose which APIs to expose from your preload script using the <code>contextBridge</code> API.</p>
<p>In your preload script, add the following code, which will expose a global <code>window.electronAPI</code> variable to your renderer process.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">preload.js (Preload Script)</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" data-language="javascript">const { contextBridge, ipcRenderer } = require('electron')

contextBridge.exposeInMainWorld('electronAPI', {
    setTitle: (title) =&gt; ipcRenderer.send('set-title', title)
})</pre>

</div>
</div>
<p>At this point, you'll be able to use the <code>window.electronAPI.setTitle()</code> function in the renderer process.</p>
<div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9">
<div class="admonitionHeading_tbUL">
Security warning</div>
<div class="admonitionContent_S0QG"><p>We don't directly expose the whole <code>ipcRenderer.send</code> API for <a href="context-isolation.html#security-considerations">security reasons</a>. Make sure to limit the renderer's access to Electron APIs as much as possible.</p></div>
</div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-build-the-renderer-process-ui">3. Build the renderer process UI<a class="hash-link" href="#3-build-the-renderer-process-ui" title="Direct link to heading">​</a>
</h3>
<p>In our BrowserWindow's loaded HTML file, add a basic user interface consisting of a text input and a button:</p>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">index.html</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" data-language="javascript">&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP --&gt;
    &lt;meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'"&gt;
    &lt;title&gt;Hello World!&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    Title: &lt;input id="title"/&gt;
    &lt;button id="btn" type="button"&gt;Set&lt;/button&gt;
    &lt;script src="./renderer.js"&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre>

</div>
</div>
<p>To make these elements interactive, we'll be adding a few lines of code in the imported <code>renderer.js</code> file that leverages the <code>window.electronAPI</code> functionality exposed from the preload script:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">renderer.js (Renderer Process)</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" data-language="javascript">const setButton = document.getElementById('btn')
const titleInput = document.getElementById('title')
setButton.addEventListener('click', () =&gt; {
    const title = titleInput.value
    window.electronAPI.setTitle(title)
});</pre>

</div>
</div>
<p>At this point, your demo should be fully functional. Try using the input field and see what happens to your BrowserWindow title!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pattern-2-renderer-to-main-two-way">Pattern 2: Renderer to main (two-way)<a class="hash-link" href="#pattern-2-renderer-to-main-two-way" title="Direct link to heading">​</a>
</h2>
<p>A common application for two-way IPC is calling a main process module from your renderer process code and waiting for a result. This can be done by using <a href="../api/ipc-renderer.html#ipcrendererinvokechannel-args"><code>ipcRenderer.invoke</code></a> paired with <a href="../api/ipc-main.html#ipcmainhandlechannel-listener"><code>ipcMain.handle</code></a>.</p>
<p>In the following example, we'll be opening a native file dialog from the renderer process and returning the selected file's path.</p>
<p>For this demo, you'll need to add code to your main process, your renderer process, and a preload script. The full code is below, but we'll be explaining each file individually in the following sections.</p>
<div class="editorWindow_ZQWz">
<div class="editorWindowHeader_GqG7">

<a class="editorTitle_buME" href="https://github.com/electron/electron/tree/v20.1.0/docs/fiddles/ipc/pattern-2">docs/fiddles/ipc/pattern-2 (20.1.0)</a><a target="_blank" class="button button--primary button--md" href="https://fiddle.electronjs.org/launch?target=electron/v20.1.0/docs/fiddles/ipc/pattern-2" rel="noreferrer">Open in Fiddle</a>
</div>
<div class="editorWindowBody_R11m"><div class="tabs-container tabList__CuJ">
<ul role="tablist" aria-orientation="horizontal" class="tabs">
<li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">main.js</li>
<li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">preload.js</li>
<li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">index.html</li>
<li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">renderer.js</li>
</ul>
<div class="margin-top--md">
<div role="tabpanel" class="tabItem_Ymn6"><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" data-language="javascript">const {app, BrowserWindow, ipcMain, dialog} = require('electron')
const path = require('path')

async function handleFileOpen() {
  const { canceled, filePaths } = await dialog.showOpenDialog()
  if (canceled) {
    return
  } else {
    return filePaths[0]
  }
}

function createWindow () {
  const mainWindow = new BrowserWindow({
    webPreferences: {
      preload: path.join(__dirname, 'preload.js')
    }
  })
  mainWindow.loadFile('index.html')
}

app.whenReady().then(() =&gt; {
  ipcMain.handle('dialog:openFile', handleFileOpen)
  createWindow()
  app.on('activate', function () {
    if (BrowserWindow.getAllWindows().length === 0) createWindow()
  })
})

app.on('window-all-closed', function () {
  if (process.platform !== 'darwin') app.quit()
})</pre>

</div></div></div>
<div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" data-language="javascript">const { contextBridge, ipcRenderer } = require('electron')

contextBridge.exposeInMainWorld('electronAPI',{
  openFile: () =&gt; ipcRenderer.invoke('dialog:openFile')
})</pre>

</div></div></div>
<div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" data-language="javascript">&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP --&gt;
    &lt;meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'"&gt;
    &lt;title&gt;Dialog&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;button type="button" id="btn"&gt;Open a File&lt;/button&gt;
    File path: &lt;strong id="filePath"&gt;&lt;/strong&gt;
    &lt;script src='./renderer.js'&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre>

</div></div></div>
<div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" data-language="javascript">const btn = document.getElementById('btn')
const filePathElement = document.getElementById('filePath')

btn.addEventListener('click', async () =&gt; {
  const filePath = await window.electronAPI.openFile()
  filePathElement.innerText = filePath
})</pre>

</div></div></div>
</div>
</div></div>
</div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-listen-for-events-with-ipcmainhandle">1. Listen for events with <code>ipcMain.handle</code><a class="hash-link" href="#1-listen-for-events-with-ipcmainhandle" title="Direct link to heading">​</a>
</h3>
<p>In the main process, we'll be creating a <code>handleFileOpen()</code> function that calls <code>dialog.showOpenDialog</code> and returns the value of the file path selected by the user. This function is used as a callback whenever an <code>ipcRender.invoke</code> message is sent through the <code>dialog:openFile</code> channel from the renderer process. The return value is then returned as a Promise to the original <code>invoke</code> call.</p>
<div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9">
<div class="admonitionHeading_tbUL">
A word on error handling</div>
<div class="admonitionContent_S0QG"><p>Errors thrown through <code>handle</code> in the main process are not transparent as they are serialized and only the <code>message</code> property from the original error is provided to the renderer process. Please refer to <a href="https://github.com/electron/electron/issues/24427" target="_blank" rel="noopener noreferrer">#24427</a> for details.</p></div>
</div>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">main.js (Main Process)</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" data-language="javascript">const { BrowserWindow, dialog, ipcMain } = require('electron')
const path = require('path')

//...

async function handleFileOpen() {
  const { canceled, filePaths } = await dialog.showOpenDialog()
  if (canceled) {
    return
  } else {
    return filePaths[0]
  }
}

function createWindow () {
  const mainWindow = new BrowserWindow({
    webPreferences: {
      preload: path.join(__dirname, 'preload.js')
    }
  })
  mainWindow.loadFile('index.html')
}

app.whenReady(() =&gt; {
  ipcMain.handle('dialog:openFile', handleFileOpen)
  createWindow()
})
//...</pre>

</div>
</div>
<div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9">
<div class="admonitionHeading_tbUL">
on channel names</div>
<div class="admonitionContent_S0QG"><p>The <code>dialog:</code> prefix on the IPC channel name has no effect on the code. It only serves as a namespace that helps with code readability.</p></div>
</div>
<div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9">
<div class="admonitionHeading_tbUL">
info</div>
<div class="admonitionContent_S0QG"><p>Make sure you're loading the <code>index.html</code> and <code>preload.js</code> entry points for the following steps!</p></div>
</div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-expose-ipcrendererinvoke-via-preload">2. Expose <code>ipcRenderer.invoke</code> via preload<a class="hash-link" href="#2-expose-ipcrendererinvoke-via-preload" title="Direct link to heading">​</a>
</h3>
<p>In the preload script, we expose a one-line <code>openFile</code> function that calls and returns the value of <code>ipcRenderer.invoke('dialog:openFile')</code>. We'll be using this API in the next step to call the native dialog from our renderer's user interface.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">preload.js (Preload Script)</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" data-language="javascript">const { contextBridge, ipcRenderer } = require('electron')

contextBridge.exposeInMainWorld('electronAPI', {
  openFile: () =&gt; ipcRenderer.invoke('dialog:openFile')
})</pre>

</div>
</div>
<div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9">
<div class="admonitionHeading_tbUL">
Security warning</div>
<div class="admonitionContent_S0QG"><p>We don't directly expose the whole <code>ipcRenderer.invoke</code> API for <a href="context-isolation.html#security-considerations">security reasons</a>. Make sure to limit the renderer's access to Electron APIs as much as possible.</p></div>
</div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-build-the-renderer-process-ui-1">3. Build the renderer process UI<a class="hash-link" href="#3-build-the-renderer-process-ui-1" title="Direct link to heading">​</a>
</h3>
<p>Finally, let's build the HTML file that we load into our BrowserWindow.</p>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">index.html</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" data-language="javascript">&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP --&gt;
    &lt;meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'"&gt;
    &lt;title&gt;Dialog&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;button type="button" id="btn"&gt;Open a File&lt;/button&gt;
    File path: &lt;strong id="filePath"&gt;&lt;/strong&gt;
    &lt;script src='./renderer.js'&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre>

</div>
</div>
<p>The UI consists of a single <code>#btn</code> button element that will be used to trigger our preload API, and a <code>#filePath</code> element that will be used to display the path of the selected file. Making these pieces work will take a few lines of code in the renderer process script:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">renderer.js (Renderer Process)</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" data-language="javascript">const btn = document.getElementById('btn')
const filePathElement = document.getElementById('filePath')

btn.addEventListener('click', async () =&gt; {
  const filePath = await window.electronAPI.openFile()
  filePathElement.innerText = filePath
})</pre>

</div>
</div>
<p>In the above snippet, we listen for clicks on the <code>#btn</code> button, and call our <code>window.electronAPI.openFile()</code> API to activate the native Open File dialog. We then display the selected file path in the <code>#filePath</code> element.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="note-legacy-approaches">Note: legacy approaches<a class="hash-link" href="#note-legacy-approaches" title="Direct link to heading">​</a>
</h3>
<p>The <code>ipcRenderer.invoke</code> API was added in Electron 7 as a developer-friendly way to tackle two-way IPC from the renderer process. However, there exist a couple alternative approaches to this IPC pattern.</p>
<div class="theme-admonition theme-admonition-warning alert alert--danger admonition_LlT9">
<div class="admonitionHeading_tbUL">
Avoid legacy approaches if possible</div>
<div class="admonitionContent_S0QG"><p>We recommend using <code>ipcRenderer.invoke</code> whenever possible. The following two-way renderer-to-main patterns are documented for historical purposes.</p></div>
</div>
<div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9">
<div class="admonitionHeading_tbUL">
info</div>
<div class="admonitionContent_S0QG"><p>For the following examples, we're calling <code>ipcRenderer</code> directly from the preload script to keep the code samples small.</p></div>
</div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="using-ipcrenderersend">Using <code>ipcRenderer.send</code><a class="hash-link" href="#using-ipcrenderersend" title="Direct link to heading">​</a>
</h4>
<p>The <code>ipcRenderer.send</code> API that we used for single-way communication can also be leveraged to perform two-way communication. This was the recommended way for asynchronous two-way communication via IPC prior to Electron 7.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">preload.js (Preload Script)</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" data-language="javascript">// You can also put expose this code to the renderer
// process with the `contextBridge` API
const { ipcRenderer } = require('electron')

ipcRenderer.on('asynchronous-reply', (_event, arg) =&gt; {
  console.log(arg) // prints "pong" in the DevTools console
})
ipcRenderer.send('asynchronous-message', 'ping')</pre>

</div>
</div>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">main.js (Main Process)</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" data-language="javascript">ipcMain.on('asynchronous-message', (event, arg) =&gt; {
  console.log(arg) // prints "ping" in the Node console
  // works like `send`, but returning a message back
  // to the renderer that sent the original message
  event.reply('asynchronous-reply', 'pong')
})</pre>

</div>
</div>
<p>There are a couple downsides to this approach:</p>
<ul>
<li>You need to set up a second <code>ipcRenderer.on</code> listener to handle the response in the renderer process. With <code>invoke</code>, you get the response value returned as a Promise to the original API call.</li>
<li>There's no obvious way to pair the <code>asynchronous-reply</code> message to the original <code>asynchronous-message</code> one. If you have very frequent messages going back and forth through these channels, you would need to add additional app code to track each call and response individually.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="using-ipcrenderersendsync">Using <code>ipcRenderer.sendSync</code><a class="hash-link" href="#using-ipcrenderersendsync" title="Direct link to heading">​</a>
</h4>
<p>The <code>ipcRenderer.sendSync</code> API sends a message to the main process and waits <em>synchronously</em> for a response.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">main.js (Main Process)</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" data-language="javascript">const { ipcMain } = require('electron')
ipcMain.on('synchronous-message', (event, arg) =&gt; {
  console.log(arg) // prints "ping" in the Node console
  event.returnValue = 'pong'
})</pre>

</div>
</div>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">preload.js (Preload Script)</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" data-language="javascript">// You can also put expose this code to the renderer
// process with the `contextBridge` API
const { ipcRenderer } = require('electron')

const result = ipcRenderer.sendSync('synchronous-message', 'ping')
console.log(result) // prints "pong" in the DevTools console</pre>

</div>
</div>
<p>The structure of this code is very similar to the <code>invoke</code> model, but we recommend <strong>avoiding this API</strong> for performance reasons. Its synchronous nature means that it'll block the renderer process until a reply is received.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pattern-3-main-to-renderer">Pattern 3: Main to renderer<a class="hash-link" href="#pattern-3-main-to-renderer" title="Direct link to heading">​</a>
</h2>
<p>When sending a message from the main process to a renderer process, you need to specify which renderer is receiving the message. Messages need to be sent to a renderer process via its <a href="../api/web-contents.html"><code>WebContents</code></a> instance. This WebContents instance contains a <a href="../api/web-contents.html#contentssendchannel-args"><code>send</code></a> method that can be used in the same way as <code>ipcRenderer.send</code>.</p>
<p>To demonstrate this pattern, we'll be building a number counter controlled by the native operating system menu.</p>
<p>For this demo, you'll need to add code to your main process, your renderer process, and a preload script. The full code is below, but we'll be explaining each file individually in the following sections.</p>
<div class="editorWindow_ZQWz">
<div class="editorWindowHeader_GqG7">

<a class="editorTitle_buME" href="https://github.com/electron/electron/tree/v20.1.0/docs/fiddles/ipc/pattern-3">docs/fiddles/ipc/pattern-3 (20.1.0)</a><a target="_blank" class="button button--primary button--md" href="https://fiddle.electronjs.org/launch?target=electron/v20.1.0/docs/fiddles/ipc/pattern-3" rel="noreferrer">Open in Fiddle</a>
</div>
<div class="editorWindowBody_R11m"><div class="tabs-container tabList__CuJ">
<ul role="tablist" aria-orientation="horizontal" class="tabs">
<li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">main.js</li>
<li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">preload.js</li>
<li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">index.html</li>
<li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">renderer.js</li>
</ul>
<div class="margin-top--md">
<div role="tabpanel" class="tabItem_Ymn6"><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" data-language="javascript">const {app, BrowserWindow, Menu, ipcMain} = require('electron')
const path = require('path')

function createWindow () {
  const mainWindow = new BrowserWindow({
    webPreferences: {
      preload: path.join(__dirname, 'preload.js')
    }
  })

  const menu = Menu.buildFromTemplate([
    {
      label: app.name,
      submenu: [
      {
        click: () =&gt; mainWindow.webContents.send('update-counter', 1),
        label: 'Increment',
      },
      {
        click: () =&gt; mainWindow.webContents.send('update-counter', -1),
        label: 'Decrement',
      }
      ]
    }

  ])

  Menu.setApplicationMenu(menu)
  mainWindow.loadFile('index.html')

  // Open the DevTools.
  mainWindow.webContents.openDevTools()
}

app.whenReady().then(() =&gt; {
  ipcMain.on('counter-value', (_event, value) =&gt; {
    console.log(value) // will print value to Node console
  })
  createWindow()
  
  app.on('activate', function () {
    if (BrowserWindow.getAllWindows().length === 0) createWindow()
  })
})

app.on('window-all-closed', function () {
  if (process.platform !== 'darwin') app.quit()
})</pre>

</div></div></div>
<div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" data-language="javascript">const { contextBridge, ipcRenderer } = require('electron')

contextBridge.exposeInMainWorld('electronAPI', {
  handleCounter: (callback) =&gt; ipcRenderer.on('update-counter', callback)
})</pre>

</div></div></div>
<div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" data-language="javascript">&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP --&gt;
    &lt;meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'"&gt;
    &lt;title&gt;Menu Counter&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    Current value: &lt;strong id="counter"&gt;0&lt;/strong&gt;
    &lt;script src="./renderer.js"&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre>

</div></div></div>
<div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" data-language="javascript">const counter = document.getElementById('counter')

window.electronAPI.handleCounter((event, value) =&gt; {
    const oldValue = Number(counter.innerText)
    const newValue = oldValue + value
    counter.innerText = newValue
    event.sender.send('counter-value', newValue)
})</pre>

</div></div></div>
</div>
</div></div>
</div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-send-messages-with-the-webcontents-module">1. Send messages with the <code>webContents</code> module<a class="hash-link" href="#1-send-messages-with-the-webcontents-module" title="Direct link to heading">​</a>
</h3>
<p>For this demo, we'll need to first build a custom menu in the main process using Electron's <code>Menu</code> module that uses the <code>webContents.send</code> API to send an IPC message from the main process to the target renderer.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">main.js (Main Process)</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" data-language="javascript">const {app, BrowserWindow, Menu, ipcMain} = require('electron')
const path = require('path')

function createWindow () {
  const mainWindow = new BrowserWindow({
    webPreferences: {
      preload: path.join(__dirname, 'preload.js')
    }
  })

  const menu = Menu.buildFromTemplate([
    {
      label: app.name,
      submenu: [
        {
          click: () =&gt; mainWindow.webContents.send('update-counter', 1),
          label: 'Increment',
        },
        {
          click: () =&gt; mainWindow.webContents.send('update-counter', -1),
          label: 'Decrement',
        }
      ]
    }
  ])
  Menu.setApplicationMenu(menu)

  mainWindow.loadFile('index.html')
}
//...
</pre>

</div>
</div>
<p>For the purposes of the tutorial, it's important to note that the <code>click</code> handler sends a message (either <code>1</code> or <code>-1</code>) to the renderer process through the <code>update-counter</code> channel.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" data-language="javascript">click: () =&gt; mainWindow.webContents.send('update-counter', -1)</pre>

</div></div>
<div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9">
<div class="admonitionHeading_tbUL">
info</div>
<div class="admonitionContent_S0QG"><p>Make sure you're loading the <code>index.html</code> and <code>preload.js</code> entry points for the following steps!</p></div>
</div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-expose-ipcrendereron-via-preload">2. Expose <code>ipcRenderer.on</code> via preload<a class="hash-link" href="#2-expose-ipcrendereron-via-preload" title="Direct link to heading">​</a>
</h3>
<p>Like in the previous renderer-to-main example, we use the <code>contextBridge</code> and <code>ipcRenderer</code> modules in the preload script to expose IPC functionality to the renderer process:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">preload.js (Preload Script)</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" data-language="javascript">const { contextBridge, ipcRenderer } = require('electron')

contextBridge.exposeInMainWorld('electronAPI', {
    onUpdateCounter: (callback) =&gt; ipcRenderer.on('update-counter', callback)
})</pre>

</div>
</div>
<p>After loading the preload script, your renderer process should have access to the <code>window.electronAPI.onUpdateCounter()</code> listener function.</p>
<div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9">
<div class="admonitionHeading_tbUL">
Security warning</div>
<div class="admonitionContent_S0QG"><p>We don't directly expose the whole <code>ipcRenderer.on</code> API for <a href="context-isolation.html#security-considerations">security reasons</a>. Make sure to limit the renderer's access to Electron APIs as much as possible.</p></div>
</div>
<div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9">
<div class="admonitionHeading_tbUL">
info</div>
<div class="admonitionContent_S0QG">
<p>In the case of this minimal example, you can call <code>ipcRenderer.on</code> directly in the preload script rather than exposing it over the context bridge.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">preload.js (Preload Script)</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" data-language="javascript">const { ipcRenderer } = require('electron')

window.addEventListener('DOMContentLoaded', () =&gt; {
    const counter = document.getElementById('counter')
    ipcRenderer.on('update-counter', (_event, value) =&gt; {
        const oldValue = Number(counter.innerText)
        const newValue = oldValue + value
        counter.innerText = newValue
    })
})</pre>

</div>
</div>
<p>However, this approach has limited flexibility compared to exposing your preload APIs over the context bridge, since your listener can't directly interact with your renderer code.</p>
</div>
</div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-build-the-renderer-process-ui-2">3. Build the renderer process UI<a class="hash-link" href="#3-build-the-renderer-process-ui-2" title="Direct link to heading">​</a>
</h3>
<p>To tie it all together, we'll create an interface in the loaded HTML file that contains a <code>#counter</code> element that we'll use to display the values:</p>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">index.html</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" data-language="javascript">&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP --&gt;
    &lt;meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'"&gt;
    &lt;title&gt;Menu Counter&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    Current value: &lt;strong id="counter"&gt;0&lt;/strong&gt;
    &lt;script src="./renderer.js"&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre>

</div>
</div>
<p>Finally, to make the values update in the HTML document, we'll add a few lines of DOM manipulation so that the value of the <code>#counter</code> element is updated whenever we fire an <code>update-counter</code> event.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">renderer.js (Renderer Process)</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" data-language="javascript">const counter = document.getElementById('counter')

window.electronAPI.onUpdateCounter((_event, value) =&gt; {
    const oldValue = Number(counter.innerText)
    const newValue = oldValue + value
    counter.innerText = newValue
})</pre>

</div>
</div>
<p>In the above code, we're passing in a callback to the <code>window.electronAPI.onUpdateCounter</code> function exposed from our preload script. The second <code>value</code> parameter corresponds to the <code>1</code> or <code>-1</code> we were passing in from the <code>webContents.send</code> call from the native menu.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="optional-returning-a-reply">Optional: returning a reply<a class="hash-link" href="#optional-returning-a-reply" title="Direct link to heading">​</a>
</h3>
<p>There's no equivalent for <code>ipcRenderer.invoke</code> for main-to-renderer IPC. Instead, you can send a reply back to the main process from within the <code>ipcRenderer.on</code> callback.</p>
<p>We can demonstrate this with slight modifications to the code from the previous example. In the renderer process, use the <code>event</code> parameter to send a reply back to the main process through the <code>counter-value</code> channel.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">renderer.js (Renderer Process)</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" data-language="javascript">const counter = document.getElementById('counter')

window.electronAPI.onUpdateCounter((event, value) =&gt; {
  const oldValue = Number(counter.innerText)
  const newValue = oldValue + value
  counter.innerText = newValue
  event.sender.send('counter-value', newValue)
})</pre>

</div>
</div>
<p>In the main process, listen for <code>counter-value</code> events and handle them appropriately.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa">
<div class="codeBlockTitle_Ktv7">main.js (Main Process)</div>
<div class="codeBlockContent_biex">
<pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" data-language="javascript">//...
ipcMain.on('counter-value', (_event, value) =&gt; {
  console.log(value) // will print value to Node console
})
//...</pre>

</div>
</div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pattern-4-renderer-to-renderer">Pattern 4: Renderer to renderer<a class="hash-link" href="#pattern-4-renderer-to-renderer" title="Direct link to heading">​</a>
</h2>
<p>There's no direct way to send messages between renderer processes in Electron using the <code>ipcMain</code> and <code>ipcRenderer</code> modules. To achieve this, you have two options:</p>
<ul>
<li>Use the main process as a message broker between renderers. This would involve sending a message from one renderer to the main process, which would forward the message to the other renderer.</li>
<li>Pass a <a href="message-ports.html">MessagePort</a> from the main process to both renderers. This will allow direct communication between renderers after the initial setup.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="object-serialization">Object serialization<a class="hash-link" href="#object-serialization" title="Direct link to heading">​</a>
</h2>
<p>Electron's IPC implementation uses the HTML standard <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm" target="_blank" rel="noopener noreferrer">Structured Clone Algorithm</a> to serialize objects passed between processes, meaning that only certain types of objects can be passed through IPC channels.</p>
<p>In particular, DOM objects (e.g. <code>Element</code>, <code>Location</code> and <code>DOMMatrix</code>), Node.js objects backed by C++ classes (e.g. <code>process.env</code>, some members of <code>Stream</code>), and Electron objects backed by C++ classes (e.g. <code>WebContents</code>, <code>BrowserWindow</code> and <code>WebFrame</code>) are not serializable with Structured Clone.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; GitHub Inc.<br>Licensed under the MIT license.<br>
    <a href="https://www.electronjs.org/docs/latest/tutorial/ipc" class="_attribution-link">https://www.electronjs.org/docs/latest/tutorial/ipc</a>
  </p>
</div>
