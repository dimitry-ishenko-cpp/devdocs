<header><h1>CSS nesting at-rules</h1></header><div class="section-content"><p>Any <a href="../at-rule.html">at-rule</a> whose body contains style rules can be nested inside another style rule using CSS nesting. Style rules nested inside at-rules take their nesting selector definition from the nearest ancestor style rule. Properties can be directly included inside a nested at-rule, acting as if they were nested in a <code>&amp; {...}</code> block.</p></div>
<section aria-labelledby="at-rules_that_can_be_nested"><h2 id="at-rules_that_can_be_nested">at-rules that can be nested</h2>
<div class="section-content"><ul> <li><a href="../@media.html"><code>@media</code></a></li> <li><a href="../@supports.html"><code>@supports</code></a></li> <li><a href="../@layer.html"><code>@layer</code></a></li> <li><a class="page-not-created"><code>@scope</code></a></li> <li><a href="../@container.html"><code>@container</code></a></li> </ul></div></section><section aria-labelledby="examples"><h2 id="examples">Examples</h2>
</section><section aria-labelledby="nesting_media_at-rule"><h3 id="nesting_media_at-rule">Nesting <code>@media</code> at-rule</h3>
<div class="section-content">
<p>In this example we see three blocks of CSS. The first one shows how to write typical at-rule nesting, the second is an expanded way of writing the nesting as the browser parses it, and the third one shows the non-nested equivalent.</p> <h4 id="nested_css">Nested CSS</h4> <div class="code-example">
<p class="example-header"><span class="language-name">css</span></p>
<pre data-signature="CGkwdx7RDG9ctwqUaKLs1u+5gBAsjTXDXt9m1AFr27g=" data-language="css"><span class="token selector">.foo</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span>
  <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">orientation</span><span class="token punctuation">:</span> landscape<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
    <span class="token property">grid-auto-flow</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre>
</div> <h4 id="expanded_nested_css">Expanded nested CSS</h4> <div class="code-example">
<p class="example-header"><span class="language-name">css</span></p>
<pre data-signature="50jXX4KX/vxfHejYv9MXsDRyX5aJ9NwzpNDuxKTFtv4=" data-language="css"><span class="token selector">.foo</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span>
  <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">orientation</span><span class="token punctuation">:</span> landscape<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
    <span class="token selector">&amp;</span> <span class="token punctuation">{</span>
      <span class="token property">grid-auto-flow</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre>
</div> <h4 id="non-nested_equivalent">Non-nested equivalent</h4> <div class="code-example">
<p class="example-header"><span class="language-name">css</span></p>
<pre data-signature="56syEdgrG9wdGicgAP/L1fG/R52H1bJOZ2ICvKRSOJQ=" data-language="css"><span class="token selector">.foo</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">orientation</span><span class="token punctuation">:</span> landscape<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token selector">.foo</span> <span class="token punctuation">{</span>
    <span class="token property">grid-auto-flow</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre>
</div>
</div></section><section aria-labelledby="multiple_nested_media_at-rules"><h3 id="multiple_nested_media_at-rules">Multiple nested <code>@media</code> at-rules</h3>
<div class="section-content">
<p>At-rules can be nested within other at-rules. Below you can see an example of this, and how it would be written without nesting.</p> <h4 id="nested_at-rules">Nested at-rules</h4> <div class="code-example">
<p class="example-header"><span class="language-name">css</span></p>
<pre data-signature="iSeNs8k1houXGJ6SISJwJCDqcuvS+2a7exKBx4+trFM=" data-language="css"><span class="token selector">.foo</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span>
  <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">orientation</span><span class="token punctuation">:</span> landscape<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
    <span class="token property">grid-auto-flow</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
    <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span>min-width &gt; 1024px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
      <span class="token property">max-inline-size</span><span class="token punctuation">:</span> 1024px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre>
</div> <h4 id="non-nested_equivalent_2">Non-nested equivalent</h4> <div class="code-example">
<p class="example-header"><span class="language-name">css</span></p>
<pre data-signature="vHzflHWvFP/KLAtMa8dSUGf/vWTV0paRTF7QpjLTTag=" data-language="css"><span class="token selector">.foo</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">orientation</span><span class="token punctuation">:</span> landscape<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token selector">.foo</span> <span class="token punctuation">{</span>
    <span class="token property">grid-auto-flow</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">orientation</span><span class="token punctuation">:</span> landscape<span class="token punctuation">)</span> <span class="token keyword">and</span> <span class="token punctuation">(</span>min-width &gt; 1024px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token selector">.foo</span> <span class="token punctuation">{</span>
    <span class="token property">max-inline-size</span><span class="token punctuation">:</span> 1024px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre>
</div>
</div></section><section aria-labelledby="nesting_cascade_layers_layer"><h3 id="nesting_cascade_layers_layer">Nesting Cascade Layers (<code>@layer</code>)</h3>
<div class="section-content">
<p><a href="../@layer.html">Cascade Layers</a> can be nested to <a href="../@layer.html#nesting_layers">create child-layers</a>. These are joined with a <code>.</code>(dot).</p> <h4 id="defining_the_parent_child_layers">Defining the parent &amp; child layers</h4> <p>We start by defining the named cascade layers, prior to using them, without any style assignments.</p> <div class="code-example">
<p class="example-header"><span class="language-name">css</span></p>
<pre data-signature="II6zByEAHIeqzrDf30Bl/12uEN3BpWSdvK64f63HEU8=" data-language="css"><span class="token atrule"><span class="token rule">@layer</span> base</span> <span class="token punctuation">{</span>
  <span class="token atrule"><span class="token rule">@layer</span> support<span class="token punctuation">;</span></span>
<span class="token punctuation">}</span>
</pre>
</div> <h4 id="assigning_rules_to_layers_with_nesting">Assigning rules to layers with nesting</h4> <p>Here the <code>.foo</code> selector assigns its rules to the <strong>base</strong> <code>@layer</code>. The nested <strong>support</strong> <code>@layer</code> creates the <code>base.support</code> sub-layer, and the <code>&amp;</code> nesting selector is used to create the rules for the <code>.foo .bar</code> selector .</p> <div class="code-example">
<p class="example-header"><span class="language-name">css</span></p>
<pre data-signature="BYNOpzQQzLXJNFVhM684pWaOidPpKC2oNqW4nuFhrC8=" data-language="css"><span class="token selector">.foo</span> <span class="token punctuation">{</span>
  <span class="token atrule"><span class="token rule">@layer</span> base</span> <span class="token punctuation">{</span>
    <span class="token property">block-size</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token atrule"><span class="token rule">@layer</span> support</span> <span class="token punctuation">{</span>
      <span class="token selector">&amp; .bar</span> <span class="token punctuation">{</span>
        <span class="token property">min-block-size</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre>
</div> <h4 id="equivalent_without_nesting">Equivalent without nesting</h4> <div class="code-example">
<p class="example-header"><span class="language-name">css</span></p>
<pre data-signature="BGWewD9dc7bCanWz3WH8NNZfG59u7d/qhgtpsfWNDl0=" data-language="css"><span class="token atrule"><span class="token rule">@layer</span> base</span> <span class="token punctuation">{</span>
  <span class="token selector">.foo</span> <span class="token punctuation">{</span>
    <span class="token property">block-size</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token atrule"><span class="token rule">@layer</span> base.support</span> <span class="token punctuation">{</span>
  <span class="token selector">.foo .bar</span> <span class="token punctuation">{</span>
    <span class="token property">min-block-size</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre>
</div>
</div></section><section aria-labelledby="see_also"><h2 id="see_also">See Also</h2>
<div class="section-content"><ul> <li>
<a href="../css_nesting.html">CSS Nesting</a> module</li> <li><a href="../nesting_selector.html"><code>&amp;</code> nesting selector</a></li> <li><a href="using_css_nesting.html">Using CSS nesting</a></li> <li><a href="nesting_and_specificity.html">Nesting and specificity</a></li> </ul></div></section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_nesting/Nesting_at-rules" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_nesting/Nesting_at-rules</a>
  </p>
</div>
