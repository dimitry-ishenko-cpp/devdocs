<h1 title="Class Recording" class="title">Class Recording</h1> <div class="inheritance" title="Inheritance Tree">
<a href="../../../java.base/java/lang/object.html" title="class in java.lang">java.lang.Object</a> <div class="inheritance">jdk.jfr.Recording</div> </div> <section class="class-description" id="class-description"> <dl class="notes"> <dt>All Implemented Interfaces:</dt> <dd>
<code><a href="../../../java.base/java/io/closeable.html" title="interface in java.io">Closeable</a></code>, <code><a href="../../../java.base/java/lang/autocloseable.html" title="interface in java.lang">AutoCloseable</a></code>
</dd> </dl>  <pre class="lang-java" data-language="java">public final class Recording extends Object implements Closeable</pre> <div class="block">Provides means to configure, start, stop and dump recording data to disk. <p> The following example shows how configure, start, stop and dump recording data to disk. </p>
<div class="snippet-container"> <pre class="lang-java" data-language="java"><code class="language-java">Configuration c = Configuration.getConfiguration("default");
try (Recording r = new Recording(c)) {
    r.start();
    System.gc();
    Thread.sleep(5000);
    r.stop();
    r.dump(Files.createTempFile("my-recording", ".jfr"));
}
</code></pre> </div> </div> <dl class="notes"> <dt>Since:</dt> <dd>9</dd> </dl> </section> <section class="summary"> <section class="constructor-summary" id="constructor-summary"> <h2>Constructor Summary</h2>  <table class="summary-table two-column-summary">         <tr>
<th>Constructor</th>
<th>Description</th>
</tr>
<tr>
<td><code><a href="#%3Cinit%3E()" class="member-name-link">Recording</a>()</code></td>
<td> <div class="block">Creates a recording without any settings.</div> </td>
</tr>
<tr>
<td><code><a href="#%3Cinit%3E(java.util.Map)" class="member-name-link">Recording</a><wbr>(<a href="../../../java.base/java/util/map.html" title="interface in java.util">Map</a>&lt;<a href="../../../java.base/java/lang/string.html" title="class in java.lang">String</a>,<wbr><a href="../../../java.base/java/lang/string.html" title="class in java.lang">String</a>&gt; settings)</wbr></wbr></code></td>
<td> <div class="block">Creates a recording with settings from a map of name-value pairs.</div> </td>
</tr>
<tr>
<td><code><a href="#%3Cinit%3E(jdk.jfr.Configuration)" class="member-name-link">Recording</a><wbr>(<a href="configuration.html" title="class in jdk.jfr">Configuration</a> configuration)</wbr></code></td>
<td> <div class="block">Creates a recording with settings from a configuration.</div> </td>
</tr>
</table> </section><section class="method-summary" id="method-summary"> <h2>Method Summary</h2> <div id="method-summary-table">  <div id="method-summary-table.tabpanel" role="tabpanel"> <table class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">                                                                                                    <tr>
<th>Modifier and Type</th>
<th>Method</th>
<th>Description</th>
</tr>
<tr>
<td><code>void</code></td>
<td><code><a href="#close()" class="member-name-link">close</a>()</code></td>
<td> <div class="block">Releases all data that is associated with this recording.</div> </td>
</tr>
<tr>
<td><code><a href="recording.html" title="class in jdk.jfr">Recording</a></code></td>
<td><code><a href="#copy(boolean)" class="member-name-link">copy</a><wbr>(boolean stop)</wbr></code></td>
<td> <div class="block">Returns a clone of this recording, with a new recording ID and name.</div> </td>
</tr>
<tr>
<td><code><a href="eventsettings.html" title="class in jdk.jfr">EventSettings</a></code></td>
<td><code><a href="#disable(java.lang.Class)" class="member-name-link">disable</a><wbr>(<a href="../../../java.base/java/lang/class.html" title="class in java.lang">Class</a>&lt;? extends <a href="event.html" title="class in jdk.jfr">Event</a>&gt; eventClass)</wbr></code></td>
<td> <div class="block">Disables event.</div> </td>
</tr>
<tr>
<td><code><a href="eventsettings.html" title="class in jdk.jfr">EventSettings</a></code></td>
<td><code><a href="#disable(java.lang.String)" class="member-name-link">disable</a><wbr>(<a href="../../../java.base/java/lang/string.html" title="class in java.lang">String</a> name)</wbr></code></td>
<td> <div class="block">Disables event with the specified name.</div> </td>
</tr>
<tr>
<td><code>void</code></td>
<td><code><a href="#dump(java.nio.file.Path)" class="member-name-link">dump</a><wbr>(<a href="../../../java.base/java/nio/file/path.html" title="interface in java.nio.file">Path</a> destination)</wbr></code></td>
<td> <div class="block">Writes recording data to a file.</div> </td>
</tr>
<tr>
<td><code><a href="eventsettings.html" title="class in jdk.jfr">EventSettings</a></code></td>
<td><code><a href="#enable(java.lang.Class)" class="member-name-link">enable</a><wbr>(<a href="../../../java.base/java/lang/class.html" title="class in java.lang">Class</a>&lt;? extends <a href="event.html" title="class in jdk.jfr">Event</a>&gt; eventClass)</wbr></code></td>
<td> <div class="block">Enables event.</div> </td>
</tr>
<tr>
<td><code><a href="eventsettings.html" title="class in jdk.jfr">EventSettings</a></code></td>
<td><code><a href="#enable(java.lang.String)" class="member-name-link">enable</a><wbr>(<a href="../../../java.base/java/lang/string.html" title="class in java.lang">String</a> name)</wbr></code></td>
<td> <div class="block">Enables the event with the specified name.</div> </td>
</tr>
<tr>
<td><code><a href="../../../java.base/java/nio/file/path.html" title="interface in java.nio.file">Path</a></code></td>
<td><code><a href="#getDestination()" class="member-name-link">getDestination</a>()</code></td>
<td> <div class="block">Returns the destination file, where recording data is written when the recording stops, or <code>null</code> if no destination is set.</div> </td>
</tr>
<tr>
<td><code>boolean</code></td>
<td><code><a href="#getDumpOnExit()" class="member-name-link">getDumpOnExit</a>()</code></td>
<td> <div class="block">Returns whether this recording is dumped to disk when the JVM exits.</div> </td>
</tr>
<tr>
<td><code><a href="../../../java.base/java/time/duration.html" title="class in java.time">Duration</a></code></td>
<td><code><a href="#getDuration()" class="member-name-link">getDuration</a>()</code></td>
<td> <div class="block">Returns the specified duration for this recording, or <code>null</code> if no duration is set.</div> </td>
</tr>
<tr>
<td><code>long</code></td>
<td><code><a href="#getId()" class="member-name-link">getId</a>()</code></td>
<td> <div class="block">Returns a unique ID for this recording.</div> </td>
</tr>
<tr>
<td><code><a href="../../../java.base/java/time/duration.html" title="class in java.time">Duration</a></code></td>
<td><code><a href="#getMaxAge()" class="member-name-link">getMaxAge</a>()</code></td>
<td> <div class="block">Returns the length of time that the data is kept in the disk repository before it is removed.</div> </td>
</tr>
<tr>
<td><code>long</code></td>
<td><code><a href="#getMaxSize()" class="member-name-link">getMaxSize</a>()</code></td>
<td> <div class="block">Returns the maximum size, measured in bytes, at which data is no longer kept in the disk repository.</div> </td>
</tr>
<tr>
<td><code><a href="../../../java.base/java/lang/string.html" title="class in java.lang">String</a></code></td>
<td><code><a href="#getName()" class="member-name-link">getName</a>()</code></td>
<td> <div class="block">Returns the name of this recording.</div> </td>
</tr>
<tr>
<td><code><a href="../../../java.base/java/util/map.html" title="interface in java.util">Map</a><wbr>&lt;<a href="../../../java.base/java/lang/string.html" title="class in java.lang">String</a>,<wbr><a href="../../../java.base/java/lang/string.html" title="class in java.lang">String</a>&gt;</wbr></wbr></code></td>
<td><code><a href="#getSettings()" class="member-name-link">getSettings</a>()</code></td>
<td> <div class="block">Returns settings used by this recording.</div> </td>
</tr>
<tr>
<td><code>long</code></td>
<td><code><a href="#getSize()" class="member-name-link">getSize</a>()</code></td>
<td> <div class="block">Returns the current size of this recording in the disk repository, measured in bytes.</div> </td>
</tr>
<tr>
<td><code><a href="../../../java.base/java/time/instant.html" title="class in java.time">Instant</a></code></td>
<td><code><a href="#getStartTime()" class="member-name-link">getStartTime</a>()</code></td>
<td> <div class="block">Returns the time when this recording was started.</div> </td>
</tr>
<tr>
<td><code><a href="recordingstate.html" title="enum class in jdk.jfr">RecordingState</a></code></td>
<td><code><a href="#getState()" class="member-name-link">getState</a>()</code></td>
<td> <div class="block">Returns the recording state that this recording is currently in.</div> </td>
</tr>
<tr>
<td><code><a href="../../../java.base/java/time/instant.html" title="class in java.time">Instant</a></code></td>
<td><code><a href="#getStopTime()" class="member-name-link">getStopTime</a>()</code></td>
<td> <div class="block">Returns the time when this recording was stopped.</div> </td>
</tr>
<tr>
<td><code><a href="../../../java.base/java/io/inputstream.html" title="class in java.io">InputStream</a></code></td>
<td><code><a href="#getStream(java.time.Instant,java.time.Instant)" class="member-name-link">getStream</a><wbr>(<a href="../../../java.base/java/time/instant.html" title="class in java.time">Instant</a> start,
 <a href="../../../java.base/java/time/instant.html" title="class in java.time">Instant</a> end)</wbr></code></td>
<td> <div class="block">Creates a data stream for a specified interval.</div> </td>
</tr>
<tr>
<td><code>boolean</code></td>
<td><code><a href="#isToDisk()" class="member-name-link">isToDisk</a>()</code></td>
<td> <div class="block">Returns <code>true</code> if this recording uses the disk repository, <code>false</code> otherwise.</div> </td>
</tr>
<tr>
<td><code>void</code></td>
<td><code><a href="#scheduleStart(java.time.Duration)" class="member-name-link">scheduleStart</a><wbr>(<a href="../../../java.base/java/time/duration.html" title="class in java.time">Duration</a> delay)</wbr></code></td>
<td> <div class="block">Starts this recording after a delay.</div> </td>
</tr>
<tr>
<td><code>void</code></td>
<td><code><a href="#setDestination(java.nio.file.Path)" class="member-name-link">setDestination</a><wbr>(<a href="../../../java.base/java/nio/file/path.html" title="interface in java.nio.file">Path</a> destination)</wbr></code></td>
<td> <div class="block">Sets a location where data is written on recording stop, or <code>null</code> if data is not to be dumped.</div> </td>
</tr>
<tr>
<td><code>void</code></td>
<td><code><a href="#setDumpOnExit(boolean)" class="member-name-link">setDumpOnExit</a><wbr>(boolean dumpOnExit)</wbr></code></td>
<td> <div class="block">Sets whether this recording is dumped to disk when the JVM exits.</div> </td>
</tr>
<tr>
<td><code>void</code></td>
<td><code><a href="#setDuration(java.time.Duration)" class="member-name-link">setDuration</a><wbr>(<a href="../../../java.base/java/time/duration.html" title="class in java.time">Duration</a> duration)</wbr></code></td>
<td> <div class="block">Sets a duration for how long a recording runs before it stops.</div> </td>
</tr>
<tr>
<td><code>void</code></td>
<td><code><a href="#setMaxAge(java.time.Duration)" class="member-name-link">setMaxAge</a><wbr>(<a href="../../../java.base/java/time/duration.html" title="class in java.time">Duration</a> maxAge)</wbr></code></td>
<td> <div class="block">Determines how far back data is kept in the disk repository.</div> </td>
</tr>
<tr>
<td><code>void</code></td>
<td><code><a href="#setMaxSize(long)" class="member-name-link">setMaxSize</a><wbr>(long maxSize)</wbr></code></td>
<td> <div class="block">Determines how much data is kept in the disk repository.</div> </td>
</tr>
<tr>
<td><code>void</code></td>
<td><code><a href="#setName(java.lang.String)" class="member-name-link">setName</a><wbr>(<a href="../../../java.base/java/lang/string.html" title="class in java.lang">String</a> name)</wbr></code></td>
<td> <div class="block">Sets a human-readable name (for example, <code>"My Recording"</code>).</div> </td>
</tr>
<tr>
<td><code>void</code></td>
<td><code><a href="#setSettings(java.util.Map)" class="member-name-link">setSettings</a><wbr>(<a href="../../../java.base/java/util/map.html" title="interface in java.util">Map</a>&lt;<a href="../../../java.base/java/lang/string.html" title="class in java.lang">String</a>,<wbr><a href="../../../java.base/java/lang/string.html" title="class in java.lang">String</a>&gt; settings)</wbr></wbr></code></td>
<td> <div class="block">Replaces all settings for this recording.</div> </td>
</tr>
<tr>
<td><code>void</code></td>
<td><code><a href="#setToDisk(boolean)" class="member-name-link">setToDisk</a><wbr>(boolean disk)</wbr></code></td>
<td> <div class="block">Determines whether this recording is continuously flushed to the disk repository or data is constrained to what is available in memory buffers.</div> </td>
</tr>
<tr>
<td><code>void</code></td>
<td><code><a href="#start()" class="member-name-link">start</a>()</code></td>
<td> <div class="block">Starts this recording.</div> </td>
</tr>
<tr>
<td><code>boolean</code></td>
<td><code><a href="#stop()" class="member-name-link">stop</a>()</code></td>
<td> <div class="block">Stops this recording.</div> </td>
</tr>
</table> </div> </div> <div class="inherited-list"> <h3 id="methods-inherited-from-class-java.lang.Object">Methods declared in class java.lang.<a href="../../../java.base/java/lang/object.html" title="class in java.lang">Object</a>
</h3> <code><a href="../../../java.base/java/lang/object.html#clone()">clone</a>, <a href="../../../java.base/java/lang/object.html#equals(java.lang.Object)">equals</a>, <a href="../../../java.base/java/lang/object.html#finalize()">finalize</a>, <a href="../../../java.base/java/lang/object.html#getClass()">getClass</a>, <a href="../../../java.base/java/lang/object.html#hashCode()">hashCode</a>, <a href="../../../java.base/java/lang/object.html#notify()">notify</a>, <a href="../../../java.base/java/lang/object.html#notifyAll()">notifyAll</a>, <a href="../../../java.base/java/lang/object.html#toString()">toString</a>, <a href="../../../java.base/java/lang/object.html#wait()">wait</a>, <a href="../../../java.base/java/lang/object.html#wait(long)">wait</a>, <a href="../../../java.base/java/lang/object.html#wait(long,int)">wait</a></code>
</div> </section> </section> <section class="details"> <section class="constructor-details" id="constructor-detail"> <h2>Constructor Details</h2>  </section><section class="detail" id="&lt;init&gt;(java.util.Map)"> <h3>Recording</h3> <pre class="lang-java" data-language="java">public Recording(Map&lt;String,String&gt; settings)</pre> <div class="block">Creates a recording with settings from a map of name-value pairs. <p> A newly created recording is in the <a href="recordingstate.html#NEW"><code>RecordingState.NEW</code></a> state. To start the recording, invoke the <a href="#start()"><code>start()</code></a> method.</p>
</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>settings</code> - settings as a map of name-value pairs, not <code>null</code>
</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java.base/java/lang/illegalstateexception.html" title="class in java.lang">IllegalStateException</a></code> - if Flight Recorder can't be created (for example, if the Java Virtual Machine (JVM) lacks Flight Recorder support, or if the file repository can't be created or accessed)</dd> <dd>
<code><a href="../../../java.base/java/lang/securityexception.html" title="class in java.lang">SecurityException</a></code> - If a security manager is used and FlightRecorderPermission "accessFlightRecorder" is not set.</dd> <dt>See Also:</dt> <dd> <ul class="tag-list"> <li><a href="package-summary.html"><code>jdk.jfr</code></a></li> </ul> </dd> </dl> </section><section class="detail" id="&lt;init&gt;()"> <h3>Recording</h3> <pre class="lang-java" data-language="java">public Recording()</pre> <div class="block">Creates a recording without any settings. <p> A newly created recording is in the <a href="recordingstate.html#NEW"><code>RecordingState.NEW</code></a> state. To start the recording, invoke the <a href="#start()"><code>start()</code></a> method.</p>
</div> <dl class="notes"> <dt>Throws:</dt> <dd>
<code><a href="../../../java.base/java/lang/illegalstateexception.html" title="class in java.lang">IllegalStateException</a></code> - if Flight Recorder can't be created (for example, if the Java Virtual Machine (JVM) lacks Flight Recorder support, or if the file repository can't be created or accessed)</dd> <dd>
<code><a href="../../../java.base/java/lang/securityexception.html" title="class in java.lang">SecurityException</a></code> - If a security manager is used and FlightRecorderPermission "accessFlightRecorder" is not set.</dd> </dl> </section><section class="detail" id="&lt;init&gt;(jdk.jfr.Configuration)"> <h3>Recording</h3> <pre class="lang-java" data-language="java">public Recording(Configuration configuration)</pre> <div class="block">Creates a recording with settings from a configuration. <p> The following example shows how create a recording that uses a predefined configuration. </p>
<div class="snippet-container"> <pre class="lang-java" data-language="java"><code>Recording r = new Recording(Configuration.getConfiguration("default"));
</code></pre> </div> The newly created recording is in the <a href="recordingstate.html#NEW"><code>RecordingState.NEW</code></a> state. To start the recording, invoke the <a href="#start()"><code>start()</code></a> method.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>configuration</code> - configuration that contains the settings to be use, not <code>null</code>
</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java.base/java/lang/illegalstateexception.html" title="class in java.lang">IllegalStateException</a></code> - if Flight Recorder can't be created (for example, if the Java Virtual Machine (JVM) lacks Flight Recorder support, or if the file repository can't be created or accessed)</dd> <dd>
<code><a href="../../../java.base/java/lang/securityexception.html" title="class in java.lang">SecurityException</a></code> - if a security manager is used and FlightRecorderPermission "accessFlightRecorder" is not set.</dd> <dt>See Also:</dt> <dd> <ul class="tag-list"> <li><a href="configuration.html" title="class in jdk.jfr"><code>Configuration</code></a></li> </ul> </dd> </dl> </section><section class="method-details" id="method-detail"> <h2>Method Details</h2>  </section><section class="detail" id="start()"> <h3>start</h3> <pre class="lang-java" data-language="java">public void start()</pre> <div class="block">Starts this recording. <p> It's recommended that the recording options and event settings are configured before calling this method. The benefits of doing so are a more consistent state when analyzing the recorded data, and improved performance because the configuration can be applied atomically. </p>
<p> After a successful invocation of this method, this recording is in the <code>RUNNING</code> state.</p>
</div> <dl class="notes"> <dt>Throws:</dt> <dd>
<code><a href="../../../java.base/java/lang/illegalstateexception.html" title="class in java.lang">IllegalStateException</a></code> - if recording is already started or is in the <code>CLOSED</code> state</dd> </dl> </section><section class="detail" id="scheduleStart(java.time.Duration)"> <h3>scheduleStart</h3> <pre class="lang-java" data-language="java">public void scheduleStart(Duration delay)</pre> <div class="block">Starts this recording after a delay. <p> After a successful invocation of this method, this recording is in the <code>DELAYED</code> state.</p>
</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>delay</code> - the time to wait before starting this recording, not <code>null</code>
</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java.base/java/lang/illegalstateexception.html" title="class in java.lang">IllegalStateException</a></code> - if the recording is not it the <code>NEW</code> state</dd> </dl> </section><section class="detail" id="stop()"> <h3>stop</h3> <pre class="lang-java" data-language="java">public boolean stop()</pre> <div class="block">Stops this recording. <p> When a recording is stopped it can't be restarted. If this recording has a destination, data is written to that destination and the recording is closed. After a recording is closed, the data is no longer available. </p>
<p> After a successful invocation of this method, this recording will be in the <code>STOPPED</code> state.</p>
</div> <dl class="notes"> <dt>Returns:</dt> <dd>
<code>true</code> if recording is stopped, <code>false</code> otherwise</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java.base/java/lang/illegalstateexception.html" title="class in java.lang">IllegalStateException</a></code> - if the recording is not started or is already stopped</dd> <dd>
<code><a href="../../../java.base/java/lang/securityexception.html" title="class in java.lang">SecurityException</a></code> - if a security manager exists and the caller doesn't have <code>FilePermission</code> to write to the destination path</dd> <dt>See Also:</dt> <dd> <ul class="tag-list"> <li><a href="#setDestination(java.nio.file.Path)"><code>setDestination(Path)</code></a></li> </ul> </dd> </dl> </section><section class="detail" id="getSettings()"> <h3>getSettings</h3> <pre class="lang-java" data-language="java">public Map&lt;String,String&gt; getSettings()</pre> <div class="block">Returns settings used by this recording. <p> Modifying the returned <code>Map</code> will not change the settings for this recording. </p>
<p> If no settings are set for this recording, an empty <code>Map</code> is returned.</p>
</div> <dl class="notes"> <dt>Returns:</dt> <dd>recording settings, not <code>null</code>
</dd> </dl> </section><section class="detail" id="getSize()"> <h3>getSize</h3> <pre class="lang-java" data-language="java">public long getSize()</pre> <div class="block">Returns the current size of this recording in the disk repository, measured in bytes. <p> The size is updated when recording buffers are flushed. If the recording is not written to the disk repository the returned size is always <code>0</code>.</p>
</div> <dl class="notes"> <dt>Returns:</dt> <dd>amount of recorded data, measured in bytes, or <code>0</code> if the recording is not written to the disk repository</dd> </dl> </section><section class="detail" id="getStopTime()"> <h3>getStopTime</h3> <pre class="lang-java" data-language="java">public Instant getStopTime()</pre> <div class="block">Returns the time when this recording was stopped.</div> <dl class="notes"> <dt>Returns:</dt> <dd>the time, or <code>null</code> if this recording is not stopped</dd> </dl> </section><section class="detail" id="getStartTime()"> <h3>getStartTime</h3> <pre class="lang-java" data-language="java">public Instant getStartTime()</pre> <div class="block">Returns the time when this recording was started.</div> <dl class="notes"> <dt>Returns:</dt> <dd>the time, or <code>null</code> if this recording is not started</dd> </dl> </section><section class="detail" id="getMaxSize()"> <h3>getMaxSize</h3> <pre class="lang-java" data-language="java">public long getMaxSize()</pre> <div class="block">Returns the maximum size, measured in bytes, at which data is no longer kept in the disk repository.</div> <dl class="notes"> <dt>Returns:</dt> <dd>maximum size in bytes, or <code>0</code> if no maximum size is set</dd> </dl> </section><section class="detail" id="getMaxAge()"> <h3>getMaxAge</h3> <pre class="lang-java" data-language="java">public Duration getMaxAge()</pre> <div class="block">Returns the length of time that the data is kept in the disk repository before it is removed.</div> <dl class="notes"> <dt>Returns:</dt> <dd>maximum length of time, or <code>null</code> if no maximum length of time has been set</dd> </dl> </section><section class="detail" id="getName()"> <h3>getName</h3> <pre class="lang-java" data-language="java">public String getName()</pre> <div class="block">Returns the name of this recording. <p> By default, the name is the same as the recording ID.</p>
</div> <dl class="notes"> <dt>Returns:</dt> <dd>the recording name, not <code>null</code>
</dd> </dl> </section><section class="detail" id="setSettings(java.util.Map)"> <h3>setSettings</h3> <pre class="lang-java" data-language="java">public void setSettings(Map&lt;String,String&gt; settings)</pre> <div class="block">Replaces all settings for this recording. <p> The following example shows how to set event settings for a recording. </p>
<div class="snippet-container"> <pre class="lang-java" data-language="java"><code>    Map&lt;String, String&gt; settings = new HashMap&lt;&gt;();
    settings.putAll(EventSettings.enabled("jdk.CPUSample").withPeriod(Duration.ofSeconds(2)).toMap());
    settings.putAll(EventSettings.enabled(MyEvent.class).withThreshold(Duration.ofSeconds(2)).withoutStackTrace().toMap());
    settings.put("jdk.ExecutionSample#period", "10 ms");
    recording.setSettings(settings);
</code></pre> </div> The following example shows how to merge settings. <div class="snippet-container"> <pre class="lang-java" data-language="java"><code>    Map&lt;String, String&gt; settings = recording.getSettings();
    settings.putAll(additionalSettings);
    recording.setSettings(settings);
</code></pre> </div> </div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>settings</code> - the settings to set, not <code>null</code>
</dd> </dl> </section><section class="detail" id="getState()"> <h3>getState</h3> <pre class="lang-java" data-language="java">public RecordingState getState()</pre> <div class="block">Returns the recording state that this recording is currently in.</div> <dl class="notes"> <dt>Returns:</dt> <dd>the recording state, not <code>null</code>
</dd> <dt>See Also:</dt> <dd> <ul class="tag-list"> <li><a href="recordingstate.html" title="enum class in jdk.jfr"><code>RecordingState</code></a></li> </ul> </dd> </dl> </section><section class="detail" id="close()"> <h3>close</h3> <pre class="lang-java" data-language="java">public void close()</pre> <div class="block">Releases all data that is associated with this recording. <p> After a successful invocation of this method, this recording is in the <code>CLOSED</code> state.</p>
</div> <dl class="notes"> <dt>Specified by:</dt> <dd>
<code><a href="../../../java.base/java/lang/autocloseable.html#close()">close</a></code> in interface <code><a href="../../../java.base/java/lang/autocloseable.html" title="interface in java.lang">AutoCloseable</a></code>
</dd> <dt>Specified by:</dt> <dd>
<code><a href="../../../java.base/java/io/closeable.html#close()">close</a></code> in interface <code><a href="../../../java.base/java/io/closeable.html" title="interface in java.io">Closeable</a></code>
</dd> </dl> </section><section class="detail" id="copy(boolean)"> <h3>copy</h3> <pre class="lang-java" data-language="java">public Recording copy(boolean stop)</pre> <div class="block">Returns a clone of this recording, with a new recording ID and name. <p> Clones are useful for dumping data without stopping the recording. After a clone is created, the amount of data to copy is constrained with the <a href="#setMaxAge(java.time.Duration)"><code>setMaxAge(Duration)</code></a> method and the <a href="#setMaxSize(long)"><code>setMaxSize(long)</code></a>method.</p>
</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>stop</code> - <code>true</code> if the newly created copy should be stopped immediately, <code>false</code> otherwise</dd> <dt>Returns:</dt> <dd>the recording copy, not <code>null</code>
</dd> </dl> </section><section class="detail" id="dump(java.nio.file.Path)"> <h3>dump</h3> <pre class="lang-java" data-language="java">public void dump(Path destination) throws IOException</pre> <div class="block">Writes recording data to a file. <p> For a dump to succeed, the recording must either be 1) running, or 2) stopped and to disk. If the recording is in any other state, an <a href="../../../java.base/java/io/ioexception.html" title="class in java.io"><code>IOException</code></a> is thrown.</p>
</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>destination</code> - the location where recording data is written, not <code>null</code>
</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java.base/java/io/ioexception.html" title="class in java.io">IOException</a></code> - if recording data can't be copied to the specified location, for example, if the recording is closed or the destination path is not writable</dd> <dd>
<code><a href="../../../java.base/java/lang/securityexception.html" title="class in java.lang">SecurityException</a></code> - if a security manager exists and the caller doesn't have <code>FilePermission</code> to write to the destination path</dd> <dt>See Also:</dt> <dd> <ul class="tag-list"> <li><a href="#getState()"><code>getState()</code></a></li> <li><a href="#isToDisk()"><code>isToDisk()</code></a></li> </ul> </dd> </dl> </section><section class="detail" id="isToDisk()"> <h3>isToDisk</h3> <pre class="lang-java" data-language="java">public boolean isToDisk()</pre> <div class="block">Returns <code>true</code> if this recording uses the disk repository, <code>false</code> otherwise. <p> If no value is set, <code>true</code> is returned.</p>
</div> <dl class="notes"> <dt>Returns:</dt> <dd>
<code>true</code> if the recording uses the disk repository, <code>false</code> otherwise</dd> </dl> </section><section class="detail" id="setMaxSize(long)"> <h3>setMaxSize</h3> <pre class="lang-java" data-language="java">public void setMaxSize(long maxSize)</pre> <div class="block">Determines how much data is kept in the disk repository. <p> To control the amount of recording data that is stored on disk, the maximum amount of data to retain can be specified. When the maximum limit is exceeded, the Java Virtual Machine (JVM) removes the oldest chunk to make room for a more recent chunk. </p>
<p> If neither maximum limit or the maximum age is set, the size of the recording may grow indefinitely.</p>
</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>maxSize</code> - the amount of data to retain, <code>0</code> if infinite</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java.base/java/lang/illegalargumentexception.html" title="class in java.lang">IllegalArgumentException</a></code> - if <code>maxSize</code> is negative</dd> <dd>
<code><a href="../../../java.base/java/lang/illegalstateexception.html" title="class in java.lang">IllegalStateException</a></code> - if the recording is in <code>CLOSED</code> state</dd> </dl> </section><section class="detail" id="setMaxAge(java.time.Duration)"> <h3>setMaxAge</h3> <pre class="lang-java" data-language="java">public void setMaxAge(Duration maxAge)</pre> <div class="block">Determines how far back data is kept in the disk repository. <p> To control the amount of recording data stored on disk, the maximum length of time to retain the data can be specified. Data stored on disk that is older than the specified length of time is removed by the Java Virtual Machine (JVM). </p>
<p> If neither maximum limit or the maximum age is set, the size of the recording may grow indefinitely.</p>
</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>maxAge</code> - the length of time that data is kept, or <code>null</code> if infinite</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java.base/java/lang/illegalargumentexception.html" title="class in java.lang">IllegalArgumentException</a></code> - if <code>maxAge</code> is negative</dd> <dd>
<code><a href="../../../java.base/java/lang/illegalstateexception.html" title="class in java.lang">IllegalStateException</a></code> - if the recording is in the <code>CLOSED</code> state</dd> </dl> </section><section class="detail" id="setDestination(java.nio.file.Path)"> <h3>setDestination</h3> <pre class="lang-java" data-language="java">public void setDestination(Path destination) throws IOException</pre> <div class="block">Sets a location where data is written on recording stop, or <code>null</code> if data is not to be dumped. <p> If a destination is set, this recording is automatically closed after data is successfully copied to the destination path. </p>
<p> If a destination is <em>not</em> set, Flight Recorder retains the recording data until this recording is closed. Use the <a href="#dump(java.nio.file.Path)"><code>dump(Path)</code></a> method to manually write data to a file.</p>
</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>destination</code> - the destination path, or <code>null</code> if recording should not be dumped at stop</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java.base/java/lang/illegalstateexception.html" title="class in java.lang">IllegalStateException</a></code> - if recording is in the <code>STOPPED</code> or <code>CLOSED</code> state.</dd> <dd>
<code><a href="../../../java.base/java/lang/securityexception.html" title="class in java.lang">SecurityException</a></code> - if a security manager exists and the caller doesn't have <code>FilePermission</code> to read, write, and delete the <code>destination</code> file</dd> <dd>
<code><a href="../../../java.base/java/io/ioexception.html" title="class in java.io">IOException</a></code> - if the path is not writable</dd> </dl> </section><section class="detail" id="getDestination()"> <h3>getDestination</h3> <pre class="lang-java" data-language="java">public Path getDestination()</pre> <div class="block">Returns the destination file, where recording data is written when the recording stops, or <code>null</code> if no destination is set.</div> <dl class="notes"> <dt>Returns:</dt> <dd>the destination file, or <code>null</code> if not set.</dd> </dl> </section><section class="detail" id="getId()"> <h3>getId</h3> <pre class="lang-java" data-language="java">public long getId()</pre> <div class="block">Returns a unique ID for this recording.</div> <dl class="notes"> <dt>Returns:</dt> <dd>the recording ID</dd> </dl> </section><section class="detail" id="setName(java.lang.String)"> <h3>setName</h3> <pre class="lang-java" data-language="java">public void setName(String name)</pre> <div class="block">Sets a human-readable name (for example, <code>"My Recording"</code>).</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>name</code> - the recording name, not <code>null</code>
</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java.base/java/lang/illegalstateexception.html" title="class in java.lang">IllegalStateException</a></code> - if the recording is in <code>CLOSED</code> state</dd> </dl> </section><section class="detail" id="setDumpOnExit(boolean)"> <h3>setDumpOnExit</h3> <pre class="lang-java" data-language="java">public void setDumpOnExit(boolean dumpOnExit)</pre> <div class="block">Sets whether this recording is dumped to disk when the JVM exits.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>dumpOnExit</code> - if this recording should be dumped when the JVM exits</dd> </dl> </section><section class="detail" id="getDumpOnExit()"> <h3>getDumpOnExit</h3> <pre class="lang-java" data-language="java">public boolean getDumpOnExit()</pre> <div class="block">Returns whether this recording is dumped to disk when the JVM exits. <p> If dump on exit is not set, <code>false</code> is returned.</p>
</div> <dl class="notes"> <dt>Returns:</dt> <dd>
<code>true</code> if the recording is dumped on exit, <code>false</code> otherwise.</dd> </dl> </section><section class="detail" id="setToDisk(boolean)"> <h3>setToDisk</h3> <pre class="lang-java" data-language="java">public void setToDisk(boolean disk)</pre> <div class="block">Determines whether this recording is continuously flushed to the disk repository or data is constrained to what is available in memory buffers.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>disk</code> - <code>true</code> if this recording is written to disk, <code>false</code> if in-memory</dd> </dl> </section><section class="detail" id="getStream(java.time.Instant,java.time.Instant)"> <h3>getStream</h3> <pre class="lang-java" data-language="java">public InputStream getStream(Instant start, Instant end) throws IOException</pre> <div class="block">Creates a data stream for a specified interval. <p> The stream may contain some data outside the specified range. </p>
<p> If the recording is not to disk, a stream can't be created and <code>null</code> is returned.</p>
</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>start</code> - the start time for the stream, or <code>null</code> to get data from start time of the recording</dd> <dd>
<code>end</code> - the end time for the stream, or <code>null</code> to get data until the present time.</dd> <dt>Returns:</dt> <dd>an input stream, or <code>null</code> if no data is available in the interval, or the recording was not recorded to disk</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java.base/java/lang/illegalargumentexception.html" title="class in java.lang">IllegalArgumentException</a></code> - if <code>end</code> happens before <code>start</code>
</dd> <dd>
<code><a href="../../../java.base/java/io/ioexception.html" title="class in java.io">IOException</a></code> - if a stream can't be opened</dd> <dt>See Also:</dt> <dd> <ul class="tag-list"> <li><a href="#setToDisk(boolean)"><code>setToDisk(boolean)</code></a></li> </ul> </dd> </dl> </section><section class="detail" id="getDuration()"> <h3>getDuration</h3> <pre class="lang-java" data-language="java">public Duration getDuration()</pre> <div class="block">Returns the specified duration for this recording, or <code>null</code> if no duration is set. <p> The duration can be set only when the recording is in the <a href="recordingstate.html#NEW"><code>RecordingState.NEW</code></a> state.</p>
</div> <dl class="notes"> <dt>Returns:</dt> <dd>the desired duration of the recording, or <code>null</code> if no duration has been set.</dd> </dl> </section><section class="detail" id="setDuration(java.time.Duration)"> <h3>setDuration</h3> <pre class="lang-java" data-language="java">public void setDuration(Duration duration)</pre> <div class="block">Sets a duration for how long a recording runs before it stops. <p> By default, a recording has no duration (<code>null</code>).</p>
</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>duration</code> - the duration, or <code>null</code> if no duration is set</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java.base/java/lang/illegalstateexception.html" title="class in java.lang">IllegalStateException</a></code> - if recording is in the <code>STOPPED</code> or <code>CLOSED</code> state</dd> </dl> </section><section class="detail" id="enable(java.lang.String)"> <h3>enable</h3> <pre class="lang-java" data-language="java">public EventSettings enable(String name)</pre> <div class="block">Enables the event with the specified name. <p> If multiple events have the same name (for example, the same class is loaded in different class loaders), then all events that match the name are enabled. To enable a specific class, use the <a href="#enable(java.lang.Class)"><code>enable(Class)</code></a> method or a <code>String</code> representation of the event type ID.</p>
</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>name</code> - the settings for the event, not <code>null</code>
</dd> <dt>Returns:</dt> <dd>an event setting for further configuration, not <code>null</code>
</dd> <dt>See Also:</dt> <dd> <ul class="tag-list"> <li><a href="eventtype.html" title="class in jdk.jfr"><code>EventType</code></a></li> </ul> </dd> </dl> </section><section class="detail" id="disable(java.lang.String)"> <h3>disable</h3> <pre class="lang-java" data-language="java">public EventSettings disable(String name)</pre> <div class="block">Disables event with the specified name. <p> If multiple events with same name (for example, the same class is loaded in different class loaders), then all events that match the name is disabled. To disable a specific class, use the <a href="#disable(java.lang.Class)"><code>disable(Class)</code></a> method or a <code>String</code> representation of the event type ID.</p>
</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>name</code> - the settings for the event, not <code>null</code>
</dd> <dt>Returns:</dt> <dd>an event setting for further configuration, not <code>null</code>
</dd> </dl> </section><section class="detail" id="enable(java.lang.Class)"> <h3>enable</h3> <pre class="lang-java" data-language="java">public EventSettings enable(Class&lt;? extends Event&gt; eventClass)</pre> <div class="block">Enables event.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>eventClass</code> - the event to enable, not <code>null</code>
</dd> <dt>Returns:</dt> <dd>an event setting for further configuration, not <code>null</code>
</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java.base/java/lang/illegalargumentexception.html" title="class in java.lang">IllegalArgumentException</a></code> - if <code>eventClass</code> is an abstract class or not a subclass of <a href="event.html" title="class in jdk.jfr"><code>Event</code></a>
</dd> </dl> </section><section class="detail" id="disable(java.lang.Class)"> <h3>disable</h3> <pre class="lang-java" data-language="java">public EventSettings disable(Class&lt;? extends Event&gt; eventClass)</pre> <div class="block">Disables event.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>eventClass</code> - the event to enable, not <code>null</code>
</dd> <dt>Returns:</dt> <dd>an event setting for further configuration, not <code>null</code>
</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java.base/java/lang/illegalargumentexception.html" title="class in java.lang">IllegalArgumentException</a></code> - if <code>eventClass</code> is an abstract class or not a subclass of <a href="event.html" title="class in jdk.jfr"><code>Event</code></a>
</dd> </dl> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1993, 2023, Oracle and/or its affiliates. All rights reserved.<br>Documentation extracted from Debian's OpenJDK Development Kit package.<br>Licensed under the GNU General Public License, version 2, with the Classpath Exception.<br>Various third party code in OpenJDK is licensed under different licenses (see Debian package).<br>Java and OpenJDK are trademarks or registered trademarks of Oracle and/or its affiliates.<br>
    <a href="https://docs.oracle.com/en/java/javase/21/docs/api/jdk.jfr/jdk/jfr/Recording.html" class="_attribution-link">https://docs.oracle.com/en/java/javase/21/docs/api/jdk.jfr/jdk/jfr/Recording.html</a>
  </p>
</div>
