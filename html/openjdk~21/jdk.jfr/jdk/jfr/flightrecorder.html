<h1 title="Class FlightRecorder" class="title">Class FlightRecorder</h1> <div class="inheritance" title="Inheritance Tree">
<a href="../../../java.base/java/lang/object.html" title="class in java.lang">java.lang.Object</a> <div class="inheritance">jdk.jfr.FlightRecorder</div> </div> <section class="class-description" id="class-description">  <pre class="lang-java" data-language="java">public final class FlightRecorder extends Object</pre> <div class="block">Class for accessing, controlling, and managing Flight Recorder. <p> This class provides the methods necessary for creating, starting, stopping, and destroying recordings.</p>
</div> <dl class="notes"> <dt>Since:</dt> <dd>9</dd> </dl> </section> <section class="summary"> <section class="method-summary" id="method-summary"> <h2>Method Summary</h2> <div id="method-summary-table">  <div id="method-summary-table.tabpanel" role="tabpanel"> <table class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">                                        <tr>
<th>Modifier and Type</th>
<th>Method</th>
<th>Description</th>
</tr>
<tr>
<td><code>static void</code></td>
<td><code><a href="#addListener(jdk.jfr.FlightRecorderListener)" class="member-name-link">addListener</a><wbr>(<a href="flightrecorderlistener.html" title="interface in jdk.jfr">FlightRecorderListener</a> changeListener)</wbr></code></td>
<td> <div class="block">Adds a recorder listener and captures the <code>AccessControlContext</code> to use when invoking the listener.</div> </td>
</tr>
<tr>
<td><code>static void</code></td>
<td><code><a href="#addPeriodicEvent(java.lang.Class,java.lang.Runnable)" class="member-name-link">addPeriodicEvent</a><wbr>(<a href="../../../java.base/java/lang/class.html" title="class in java.lang">Class</a>&lt;? extends <a href="event.html" title="class in jdk.jfr">Event</a>&gt; eventClass,
 <a href="../../../java.base/java/lang/runnable.html" title="interface in java.lang">Runnable</a> hook)</wbr></code></td>
<td> <div class="block">Adds a hook for a periodic event.</div> </td>
</tr>
<tr>
<td><code><a href="../../../java.base/java/util/list.html" title="interface in java.util">List</a><wbr>&lt;<a href="eventtype.html" title="class in jdk.jfr">EventType</a>&gt;</wbr></code></td>
<td><code><a href="#getEventTypes()" class="member-name-link">getEventTypes</a>()</code></td>
<td> <div class="block">Returns an immutable list that contains all currently registered events.</div> </td>
</tr>
<tr>
<td><code>static <a href="flightrecorder.html" title="class in jdk.jfr">FlightRecorder</a></code></td>
<td><code><a href="#getFlightRecorder()" class="member-name-link">getFlightRecorder</a>()</code></td>
<td> <div class="block">Returns the Flight Recorder for the platform.</div> </td>
</tr>
<tr>
<td><code><a href="../../../java.base/java/util/list.html" title="interface in java.util">List</a><wbr>&lt;<a href="recording.html" title="class in jdk.jfr">Recording</a>&gt;</wbr></code></td>
<td><code><a href="#getRecordings()" class="member-name-link">getRecordings</a>()</code></td>
<td> <div class="block">Returns an immutable list of the available recordings.</div> </td>
</tr>
<tr>
<td><code>static boolean</code></td>
<td><code><a href="#isAvailable()" class="member-name-link">isAvailable</a>()</code></td>
<td> <div class="block">Returns <code>true</code> if the Java Virtual Machine (JVM) has Flight Recorder capabilities.</div> </td>
</tr>
<tr>
<td><code>static boolean</code></td>
<td><code><a href="#isInitialized()" class="member-name-link">isInitialized</a>()</code></td>
<td> <div class="block">Returns <code>true</code> if Flight Recorder is initialized.</div> </td>
</tr>
<tr>
<td><code>static void</code></td>
<td><code><a href="#register(java.lang.Class)" class="member-name-link">register</a><wbr>(<a href="../../../java.base/java/lang/class.html" title="class in java.lang">Class</a>&lt;? extends <a href="event.html" title="class in jdk.jfr">Event</a>&gt; eventClass)</wbr></code></td>
<td> <div class="block">Registers an event class.</div> </td>
</tr>
<tr>
<td><code>static boolean</code></td>
<td><code><a href="#removeListener(jdk.jfr.FlightRecorderListener)" class="member-name-link">removeListener</a><wbr>(<a href="flightrecorderlistener.html" title="interface in jdk.jfr">FlightRecorderListener</a> changeListener)</wbr></code></td>
<td> <div class="block">Removes a recorder listener.</div> </td>
</tr>
<tr>
<td><code>static boolean</code></td>
<td><code><a href="#removePeriodicEvent(java.lang.Runnable)" class="member-name-link">removePeriodicEvent</a><wbr>(<a href="../../../java.base/java/lang/runnable.html" title="interface in java.lang">Runnable</a> hook)</wbr></code></td>
<td> <div class="block">Removes a hook for a periodic event.</div> </td>
</tr>
<tr>
<td><code><a href="recording.html" title="class in jdk.jfr">Recording</a></code></td>
<td><code><a href="#takeSnapshot()" class="member-name-link">takeSnapshot</a>()</code></td>
<td> <div class="block">Creates a snapshot of all available recorded data.</div> </td>
</tr>
<tr>
<td><code>static void</code></td>
<td><code><a href="#unregister(java.lang.Class)" class="member-name-link">unregister</a><wbr>(<a href="../../../java.base/java/lang/class.html" title="class in java.lang">Class</a>&lt;? extends <a href="event.html" title="class in jdk.jfr">Event</a>&gt; eventClass)</wbr></code></td>
<td> <div class="block">Unregisters an event class.</div> </td>
</tr>
</table> </div> </div> <div class="inherited-list"> <h3 id="methods-inherited-from-class-java.lang.Object">Methods declared in class java.lang.<a href="../../../java.base/java/lang/object.html" title="class in java.lang">Object</a>
</h3> <code><a href="../../../java.base/java/lang/object.html#clone()">clone</a>, <a href="../../../java.base/java/lang/object.html#equals(java.lang.Object)">equals</a>, <a href="../../../java.base/java/lang/object.html#finalize()">finalize</a>, <a href="../../../java.base/java/lang/object.html#getClass()">getClass</a>, <a href="../../../java.base/java/lang/object.html#hashCode()">hashCode</a>, <a href="../../../java.base/java/lang/object.html#notify()">notify</a>, <a href="../../../java.base/java/lang/object.html#notifyAll()">notifyAll</a>, <a href="../../../java.base/java/lang/object.html#toString()">toString</a>, <a href="../../../java.base/java/lang/object.html#wait()">wait</a>, <a href="../../../java.base/java/lang/object.html#wait(long)">wait</a>, <a href="../../../java.base/java/lang/object.html#wait(long,int)">wait</a></code>
</div> </section> </section> <section class="details"> <section class="method-details" id="method-detail"> <h2>Method Details</h2>  </section><section class="detail" id="getRecordings()"> <h3>getRecordings</h3> <pre class="lang-java" data-language="java">public List&lt;Recording&gt; getRecordings()</pre> <div class="block">Returns an immutable list of the available recordings. <p> A recording becomes available when it is created. It becomes unavailable when it is in the <code>CLOSED</code> state, typically after a call to <a href="recording.html#close()"><code>Recording.close()</code></a>.</p>
</div> <dl class="notes"> <dt>Returns:</dt> <dd>a list of recordings, not <code>null</code>
</dd> </dl> </section><section class="detail" id="takeSnapshot()"> <h3>takeSnapshot</h3> <pre class="lang-java" data-language="java">public Recording takeSnapshot()</pre> <div class="block">Creates a snapshot of all available recorded data. <p> A snapshot is a synthesized recording in a <code>STOPPED</code> state. If no data is available, a recording with size <code>0</code> is returned. </p>
<p> A snapshot provides stable access to data for later operations (for example, operations to change the interval or to reduce the data size). </p>
<p> The following example shows how to create a snapshot and write a subset of the data to a file. </p>
<div class="snippet-container"> <pre class="lang-java" data-language="java"><code class="language-java">try (Recording snapshot = FlightRecorder.getFlightRecorder().takeSnapshot()) {
    if (snapshot.getSize() &gt; 0) {
        snapshot.setMaxSize(100_000_000);
        snapshot.setMaxAge(Duration.ofMinutes(5));
        snapshot.dump(Paths.get("snapshot.jfr"));
    }
}
</code></pre> </div> The caller must close the recording when access to the data is no longer needed.</div> <dl class="notes"> <dt>Returns:</dt> <dd>a snapshot of all available recording data, not <code>null</code>
</dd> </dl> </section><section class="detail" id="register(java.lang.Class)"> <h3>register</h3> <pre class="lang-java" data-language="java">public static void register(Class&lt;? extends Event&gt; eventClass)</pre> <div class="block">Registers an event class. <p> If the event class is already registered, then the invocation of this method is ignored.</p>
</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>eventClass</code> - the event class to register, not <code>null</code>
</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java.base/java/lang/illegalargumentexception.html" title="class in java.lang">IllegalArgumentException</a></code> - if class is abstract or not a subclass of <a href="event.html" title="class in jdk.jfr"><code>Event</code></a>
</dd> <dd>
<code><a href="../../../java.base/java/lang/securityexception.html" title="class in java.lang">SecurityException</a></code> - if a security manager exists and the caller does not have <code>FlightRecorderPermission("registerEvent")</code>
</dd> </dl> </section><section class="detail" id="unregister(java.lang.Class)"> <h3>unregister</h3> <pre class="lang-java" data-language="java">public static void unregister(Class&lt;? extends Event&gt; eventClass)</pre> <div class="block">Unregisters an event class. <p> If the event class is not registered, then the invocation of this method is ignored.</p>
</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>eventClass</code> - the event class to unregistered, not <code>null</code>
</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java.base/java/lang/illegalargumentexception.html" title="class in java.lang">IllegalArgumentException</a></code> - if a class is abstract or not a subclass of <a href="event.html" title="class in jdk.jfr"><code>Event</code></a>
</dd> <dd>
<code><a href="../../../java.base/java/lang/securityexception.html" title="class in java.lang">SecurityException</a></code> - if a security manager exists and the caller does not have <code>FlightRecorderPermission("registerEvent")</code>
</dd> </dl> </section><section class="detail" id="getFlightRecorder()"> <h3>getFlightRecorder</h3> <pre class="lang-java" data-language="java">public static FlightRecorder getFlightRecorder() throws IllegalStateException, SecurityException</pre> <div class="block">Returns the Flight Recorder for the platform.</div> <dl class="notes"> <dt>Returns:</dt> <dd>a Flight Recorder instance, not <code>null</code>
</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java.base/java/lang/illegalstateexception.html" title="class in java.lang">IllegalStateException</a></code> - if Flight Recorder can't be created (for example, if the Java Virtual Machine (JVM) lacks Flight Recorder support, or if the file repository can't be created or accessed)</dd> <dd>
<code><a href="../../../java.base/java/lang/securityexception.html" title="class in java.lang">SecurityException</a></code> - if a security manager exists and the caller does not have <code>FlightRecorderPermission("accessFlightRecorder")</code>
</dd> </dl> </section><section class="detail" id="addPeriodicEvent(java.lang.Class,java.lang.Runnable)"> <h3>addPeriodicEvent</h3> <pre class="lang-java" data-language="java">public static void addPeriodicEvent(Class&lt;? extends Event&gt; eventClass, Runnable hook) throws SecurityException</pre> <div class="block">Adds a hook for a periodic event. <p> The implementation of the hook should return as soon as possible, to avoid blocking other Flight Recorder operations. The hook should emit one or more events of the specified type. When a hook is added, the interval at which the call is invoked is configurable using the <code>"period"</code> setting.</p>
</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>eventClass</code> - the class that the hook should run for, not <code>null</code>
</dd> <dd>
<code>hook</code> - the hook, not <code>null</code>
</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java.base/java/lang/illegalargumentexception.html" title="class in java.lang">IllegalArgumentException</a></code> - if a class is not a subclass of <a href="event.html" title="class in jdk.jfr"><code>Event</code></a>, is abstract, or the hook is already added</dd> <dd>
<code><a href="../../../java.base/java/lang/illegalstateexception.html" title="class in java.lang">IllegalStateException</a></code> - if the event class has the <code>Registered(false)</code> annotation and is not registered manually</dd> <dd>
<code><a href="../../../java.base/java/lang/securityexception.html" title="class in java.lang">SecurityException</a></code> - if a security manager exists and the caller does not have <code>FlightRecorderPermission("registerEvent")</code>
</dd> </dl> </section><section class="detail" id="removePeriodicEvent(java.lang.Runnable)"> <h3>removePeriodicEvent</h3> <pre class="lang-java" data-language="java">public static boolean removePeriodicEvent(Runnable hook) throws SecurityException</pre> <div class="block">Removes a hook for a periodic event.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>hook</code> - the hook to remove, not <code>null</code>
</dd> <dt>Returns:</dt> <dd>
<code>true</code> if hook is removed, <code>false</code> otherwise</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java.base/java/lang/securityexception.html" title="class in java.lang">SecurityException</a></code> - if a security manager exists and the caller does not have <code>FlightRecorderPermission("registerEvent")</code>
</dd> </dl> </section><section class="detail" id="getEventTypes()"> <h3>getEventTypes</h3> <pre class="lang-java" data-language="java">public List&lt;EventType&gt; getEventTypes()</pre> <div class="block">Returns an immutable list that contains all currently registered events. <p> By default, events are registered when they are first used, typically when an event object is allocated. To ensure an event is visible early, registration can be triggered by invoking the <a href="#register(java.lang.Class)"><code>register(Class)</code></a> method.</p>
</div> <dl class="notes"> <dt>Returns:</dt> <dd>list of events, not <code>null</code>
</dd> </dl> </section><section class="detail" id="addListener(jdk.jfr.FlightRecorderListener)"> <h3>addListener</h3> <pre class="lang-java" data-language="java">public static void addListener(FlightRecorderListener changeListener)</pre> <div class="block">Adds a recorder listener and captures the <code>AccessControlContext</code> to use when invoking the listener. <p> If Flight Recorder is already initialized when the listener is added, then the method <a href="flightrecorderlistener.html#recorderInitialized(jdk.jfr.FlightRecorder)"><code>FlightRecorderListener.recorderInitialized(FlightRecorder)</code></a> method is invoked before returning from this method.</p>
</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>changeListener</code> - the listener to add, not <code>null</code>
</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java.base/java/lang/securityexception.html" title="class in java.lang">SecurityException</a></code> - if a security manager exists and the caller does not have <code>FlightRecorderPermission("accessFlightRecorder")</code>
</dd> </dl> </section><section class="detail" id="removeListener(jdk.jfr.FlightRecorderListener)"> <h3>removeListener</h3> <pre class="lang-java" data-language="java">public static boolean removeListener(FlightRecorderListener changeListener)</pre> <div class="block">Removes a recorder listener. <p> If the same listener is added multiple times, only one instance is removed.</p>
</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>changeListener</code> - listener to remove, not <code>null</code>
</dd> <dt>Returns:</dt> <dd>
<code>true</code>, if the listener could be removed, <code>false</code> otherwise</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java.base/java/lang/securityexception.html" title="class in java.lang">SecurityException</a></code> - if a security manager exists and the caller does not have <code>FlightRecorderPermission("accessFlightRecorder")</code>
</dd> </dl> </section><section class="detail" id="isAvailable()"> <h3>isAvailable</h3> <pre class="lang-java" data-language="java">public static boolean isAvailable()</pre> <div class="block">Returns <code>true</code> if the Java Virtual Machine (JVM) has Flight Recorder capabilities. <p> This method can quickly check whether Flight Recorder can be initialized, without actually doing the initialization work. The value may change during runtime and it is not safe to cache it.</p>
</div> <dl class="notes"> <dt>Returns:</dt> <dd>
<code>true</code>, if Flight Recorder is available, <code>false</code> otherwise</dd> <dt>See Also:</dt> <dd> <ul class="tag-list-long"> <li><a href="flightrecorderlistener.html" title="interface in jdk.jfr"><code>for callback when Flight Recorder is
      initialized</code></a></li> </ul> </dd> </dl> </section><section class="detail" id="isInitialized()"> <h3>isInitialized</h3> <pre class="lang-java" data-language="java">public static boolean isInitialized()</pre> <div class="block">Returns <code>true</code> if Flight Recorder is initialized.</div> <dl class="notes"> <dt>Returns:</dt> <dd>
<code>true</code>, if Flight Recorder is initialized, <code>false</code> otherwise</dd> <dt>See Also:</dt> <dd> <ul class="tag-list-long"> <li><a href="flightrecorderlistener.html" title="interface in jdk.jfr"><code>for callback when Flight Recorder is
      initialized</code></a></li> </ul> </dd> </dl> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1993, 2023, Oracle and/or its affiliates. All rights reserved.<br>Documentation extracted from Debian's OpenJDK Development Kit package.<br>Licensed under the GNU General Public License, version 2, with the Classpath Exception.<br>Various third party code in OpenJDK is licensed under different licenses (see Debian package).<br>Java and OpenJDK are trademarks or registered trademarks of Oracle and/or its affiliates.<br>
    <a href="https://docs.oracle.com/en/java/javase/21/docs/api/jdk.jfr/jdk/jfr/FlightRecorder.html" class="_attribution-link">https://docs.oracle.com/en/java/javase/21/docs/api/jdk.jfr/jdk/jfr/FlightRecorder.html</a>
  </p>
</div>
