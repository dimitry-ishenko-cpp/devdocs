<h1 title="Package javax.management.remote.rmi" class="title">Package javax.management.remote.rmi</h1>  <div class="package-signature">package <span class="element-name">javax.management.remote.rmi</span>
</div> <section class="package-description" id="package-description"> <div class="block">
<p>The RMI connector is a connector for the JMX Remote API that uses RMI to transmit client requests to a remote MBean server. This package defines the classes that the user of an RMI connector needs to reference directly, for both the client and server sides. It also defines certain classes that the user will not usually reference directly, but that must be defined so that different implementations of the RMI connector can interoperate.</p> <p>The RMI connector supports the JRMP transport for RMI.</p> <p>Like most connectors in the JMX Remote API, an RMI connector usually has an address, which is a <a href="../../../../../java.management/javax/management/remote/jmxserviceurl.html" title="class in javax.management.remote"><code>JMXServiceURL</code></a>. The protocol part of this address is <code>rmi</code> for a connector that uses the default RMI transport (JRMP).</p> <p>There are two forms for RMI connector addresses:</p> <ul> <li> In the <em>JNDI form</em>, the URL indicates <em>where to find an RMI stub for the connector</em>. This RMI stub is a Java object of type <a href="rmiserver.html" title="interface in javax.management.remote.rmi"><code>RMIServer</code></a> that gives remote access to the connector server. With this address form, the RMI stub is obtained from an external directory entry included in the URL. An external directory is any directory recognized by <a href="../../../../../java.naming/javax/naming/package-summary.html"><code>JNDI</code></a>, typically the RMI registry, LDAP, or COS Naming. </li>
<li> In the <em>encoded form</em>, the URL directly includes the information needed to connect to the connector server. When using RMI/JRMP, the encoded form is the serialized RMI stub for the server object, encoded using BASE64 without embedded newlines. </li>
</ul> <p>Addresses are covered in more detail below.</p> <h2 id="creating-an-rmi-connector-server-heading">Creating an RMI connector server</h2> <p>The usual way to create an RMI connector server is to supply an RMI connector address to the method <a href="../../../../../java.management/javax/management/remote/jmxconnectorserverfactory.html#newJMXConnectorServer(javax.management.remote.JMXServiceURL,java.util.Map,javax.management.MBeanServer)"><code>JMXConnectorServerFactory.newJMXConnectorServer</code></a>. The MBean server to which the connector server is attached can be specified as a parameter to that method. Alternatively, the connector server can be registered as an MBean in that MBean server.</p> <p>An RMI connector server can also be created by constructing an instance of <a href="rmiconnectorserver.html" title="class in javax.management.remote.rmi"><code>RMIConnectorServer</code></a>, explicitly or through the MBean server's <code>createMBean</code> method.</p> <h3 id="choosing-the-rmi-transport-heading">Choosing the RMI transport</h3> <p>You can choose the RMI transport by specifying <code>rmi</code> in the <code><em>protocol</em></code> part of the <code>serviceURL</code> when creating the connector server. You can also create specialized connector servers by instantiating an appropriate subclass of <a href="rmiserverimpl.html" title="class in javax.management.remote.rmi"><code>RMIServerImpl</code></a> and supplying it to the <code>RMIConnectorServer</code> constructor.</p> <h3><a id="servergen">Connector addresses generated by the server</a></h3> <p>If the <code>serviceURL</code> you specify has an empty URL path (after the optional host and port), or if you do not specify a <code>serviceURL</code>, then the connector server will fabricate a new <code>JMXServiceURL</code> that clients can use to connect:</p> <ul> <li>
<p>If the <code>serviceURL</code> looks like:</p> <pre class="lang-java" data-language="java">
        <code>service:jmx:rmi://<em>host</em>:<em>port</em></code>
        </pre> <p>then the connector server will generate an <a href="rmijrmpserverimpl.html" title="class in javax.management.remote.rmi"><code>RMIJRMPServerImpl</code></a> and the returned <code>JMXServiceURL</code> looks like:</p> <pre class="lang-java" data-language="java">
        <code>service:jmx:rmi://<em>host</em>:<em>port</em>/stub/<em>XXXX</em></code>
        </pre> <p>where <code><em>XXXX</em></code> is the serialized form of the stub for the generated object, encoded in BASE64 without newlines.</p> </li>
<li>
<p>If there is no <code>serviceURL</code>, there must be a user-provided <code>RMIServerImpl</code>. The connector server will generate a <code>JMXServiceURL</code> using the <code>rmi</code> form.</p> </li>
</ul> <p>The <code><em>host</em></code> in a user-provided <code>serviceURL</code> is optional. If present, it is copied into the generated <code>JMXServiceURL</code> but otherwise ignored. If absent, the generated <code>JXMServiceURL</code> will have the local host name.</p> <p>The <code><em>port</em></code> in a user-provided <code>serviceURL</code> is also optional. If present, it is also copied into the generated <code>JMXServiceURL</code>; otherwise, the generated <code>JMXServiceURL</code> has no port. For an <code>serviceURL</code> using the <code>rmi</code> protocol, the <code><em>port</em></code>, if present, indicates what port the generated remote object should be exported on. It has no other effect.</p> <p>If the user provides an <code>RMIServerImpl</code> rather than a <code>JMXServiceURL</code>, then the generated <code>JMXServiceURL</code> will have the local host name in its <code><em>host</em></code> part and no <code><em>port</em></code>.</p> <h3><a id="directory">Connector addresses based on directory entries</a></h3> <p>As an alternative to the generated addresses just described, the <code>serviceURL</code> address supplied when creating a connector server can specify a <em>directory address</em> in which to store the provided or generated <code>RMIServer</code> stub. This directory address is then used by both client and server.</p> <p>In this case, the <code>serviceURL</code> has the following form:</p> <pre class="lang-java" data-language="java">
    <code>service:jmx:rmi://<em>host</em>:<em>port</em>/jndi/<em>jndi-name</em></code>
    </pre> <p>Here, <code><em>jndi-name</em></code> is a string that can be supplied to <a href="../../../../../java.naming/javax/naming/initialcontext.html#bind(java.lang.String,java.lang.Object)"><code>javax.naming.InitialContext.bind</code></a>.</p> <p>As usual, the <code><em>host</em></code> and <code>:<em>port</em></code> can be omitted.</p> <p>The connector server will generate an <code>RMIServerImpl</code> based on the protocol (<code>rmi</code>) and the <code><em>port</em></code> if any. When the connector server is started, it will derive a stub from this object using its <a href="rmiserverimpl.html#toStub()"><code>toStub</code></a> method and store the object using the given <code><em>jndi-name</em></code>. The properties defined by the JNDI API are consulted as usual.</p> <p>For example, if the <code>JMXServiceURL</code> is: </p>
<pre class="lang-java" data-language="java">
      <code>service:jmx:rmi://ignoredhost/jndi/rmi://myhost/myname</code>
      </pre> then the connector server will generate an <code>RMIJRMPServerImpl</code> and store its stub using the JNDI name <pre class="lang-java" data-language="java">
      <code>rmi://myhost/myname</code>
      </pre> which means entry <code>myname</code> in the RMI registry running on the default port of host <code>myhost</code>. Note that the RMI registry only allows registration from the local host. So, in this case, <code>myhost</code> must be the name (or a name) of the host that the connector server is running on. <p>In this <code>JMXServiceURL</code>, the first <code>rmi:</code> specifies the RMI connector, while the second <code>rmi:</code> specifies the RMI registry. </p>
<p>As another example, if the <code>JMXServiceURL</code> is: </p>
<pre class="lang-java" data-language="java">
      <code>service:jmx:rmi://ignoredhost/jndi/ldap://dirhost:9999/cn=this,ou=that</code>
      </pre> then the connector server will generate an <code>RMIJRMPServerImpl</code> and store its stub using the JNDI name <pre class="lang-java" data-language="java">
      <code>ldap://dirhost:9999/cn=this,ou=that</code>
      </pre> which means entry <code>cn=this,ou=that</code> in the LDAP directory running on port 9999 of host <code>dirhost</code>. <p>If the <code>JMXServiceURL</code> is: </p>
<pre class="lang-java" data-language="java">
      <code>service:jmx:rmi://ignoredhost/jndi/cn=this,ou=that</code>
      </pre> then the connector server will generate an <code>RMIJRMPServerImpl</code> and store its stub using the JNDI name <pre class="lang-java" data-language="java">
      <code>cn=this,ou=that</code>
      </pre> For this case to work, the JNDI API must have been configured appropriately to supply the information about what directory to use. <p>In these examples, the host name <code>ignoredhost</code> is not used by the connector server or its clients. It can be omitted, for example:</p> <pre class="lang-java" data-language="java">
      <code>service:jmx:rmi:///jndi/cn=this,ou=that</code>
      </pre> <p>However, it is good practice to use the name of the host where the connector server is running. This is often different from the name of the directory host.</p> <h3 id="connector-server-attributes-heading">Connector server attributes</h3> <p>When using the default JRMP transport, RMI socket factories can be specified using the attributes <code>jmx.remote.rmi.client.socket.factory</code> and <code>jmx.remote.rmi.server.socket.factory</code> in the <code>environment</code> given to the <code>RMIConnectorServer</code> constructor. The values of these attributes must be of type <a href="../../../../../java.rmi/java/rmi/server/rmiclientsocketfactory.html" title="interface in java.rmi.server"><code>RMIClientSocketFactory</code></a> and <a href="../../../../../java.rmi/java/rmi/server/rmiserversocketfactory.html" title="interface in java.rmi.server"><code>RMIServerSocketFactory</code></a>, respectively. These factories are used when creating the RMI objects associated with the connector.</p> <h2 id="creating-an-rmi-connector-client-heading">Creating an RMI connector client</h2> <p>An RMI connector client is usually constructed using <a href="../../../../../java.management/javax/management/remote/jmxconnectorfactory.html" title="class in javax.management.remote"><code>JMXConnectorFactory</code></a>, with a <code>JMXServiceURL</code> that has <code>rmi</code> as its protocol.</p> <p>If the <code>JMXServiceURL</code> was generated by the server, as described above under <a href="#servergen">"connector addresses generated by the server"</a>, then the client will need to obtain it directly or indirectly from the server. Typically, the server makes the <code>JMXServiceURL</code> available by storing it in a file or a lookup service.</p> <p>If the <code>JMXServiceURL</code> uses the directory syntax, as described above under <a href="#directory">"connector addresses based on directory entries"</a>, then the client may obtain it as just explained, or client and server may both know the appropriate directory entry to use. For example, if the connector server for the Whatsit agent uses the entry <code>whatsit-agent-connector</code> in the RMI registry on host <code>myhost</code>, then client and server can both know that the appropriate <code>JMXServiceURL</code> is:</p> <pre class="lang-java" data-language="java">
    <code>service:jmx:rmi:///jndi/rmi://myhost/whatsit-agent-connector</code>
    </pre> <p>If you have an RMI stub of type <a href="rmiserver.html" title="interface in javax.management.remote.rmi"><code>RMIServer</code></a>, you can construct an RMI connection directly by using the appropriate constructor of <a href="rmiconnector.html" title="class in javax.management.remote.rmi"><code>RMIConnector</code></a>.</p> <h2 id="dynamic-code-downloading-heading">Dynamic code downloading</h2> <p>If an RMI connector client or server receives from its peer an instance of a class that it does not know, and if dynamic code downloading is active for the RMI connection, then the class can be downloaded from a codebase specified by the peer. <a href="https://docs.oracle.com/pls/topic/lookup?ctx=javase21&amp;id=rmi_guide">Java RMI Guide</a> explains this in more detail.</p>
</div> <dl class="notes"> <dt>Since:</dt> <dd>1.5</dd> <dt>See Also:</dt> <dd> <ul class="tag-list-long"> <li><a href="http://www.ietf.org/rfc/rfc2045.txt">RFC 2045, section 6.8, "Base64 Content-Transfer-Encoding"</a></li> </ul> </dd> </dl> </section> <section class="summary"> <div class="summary-list"> <div> <div id="related-package-summary">  <table class="summary-table three-column-summary">    <div class="col-plain even-row-color"><a href="../../../../../java.management/module-summary.html">java.management</a></div>   <tr>
<th>Module</th>
<th>Package</th>
<th>Description</th>
</tr>
<tr>
<td><a href="../../../../../java.management/javax/management/remote/package-summary.html">javax.management.remote</a></td>
<td> <div class="block">Interfaces for remote access to JMX MBean servers.</div> </td>
</tr>
</table> </div> </div> <div> <div id="class-summary">  <div id="class-summary.tabpanel" role="tabpanel"> <table class="summary-table two-column-summary" aria-labelledby="class-summary-tab0">                     <tr>
<th>Class</th>
<th>Description</th>
</tr>
<tr>
<td><a href="rmiconnection.html" title="interface in javax.management.remote.rmi">RMIConnection</a></td>
<td> <div class="block">RMI object used to forward an MBeanServer request from a client to its MBeanServer implementation on the server side.</div> </td>
</tr>
<tr>
<td><a href="rmiconnectionimpl.html" title="class in javax.management.remote.rmi">RMIConnectionImpl</a></td>
<td> <div class="block">Implementation of the <a href="rmiconnection.html" title="interface in javax.management.remote.rmi"><code>RMIConnection</code></a> interface.</div> </td>
</tr>
<tr>
<td><a href="rmiconnectionimpl_stub.html" title="class in javax.management.remote.rmi">RMIConnectionImpl_Stub</a></td>
<td> <div class="block">RMIConnectionImpl remote stub.</div> </td>
</tr>
<tr>
<td><a href="rmiconnector.html" title="class in javax.management.remote.rmi">RMIConnector</a></td>
<td> <div class="block">A connection to a remote RMI connector.</div> </td>
</tr>
<tr>
<td><a href="rmiconnectorserver.html" title="class in javax.management.remote.rmi">RMIConnectorServer</a></td>
<td> <div class="block">A JMX API connector server that creates RMI-based connections from remote clients.</div> </td>
</tr>
<tr>
<td><a href="rmijrmpserverimpl.html" title="class in javax.management.remote.rmi">RMIJRMPServerImpl</a></td>
<td> <div class="block">An <a href="rmiserver.html" title="interface in javax.management.remote.rmi"><code>RMIServer</code></a> object that is exported through JRMP and that creates client connections as RMI objects exported through JRMP.</div> </td>
</tr>
<tr>
<td><a href="rmiserver.html" title="interface in javax.management.remote.rmi">RMIServer</a></td>
<td> <div class="block">RMI object used to establish connections to an RMI connector.</div> </td>
</tr>
<tr>
<td><a href="rmiserverimpl.html" title="class in javax.management.remote.rmi">RMIServerImpl</a></td>
<td> <div class="block">An RMI object representing a connector server.</div> </td>
</tr>
<tr>
<td><a href="rmiserverimpl_stub.html" title="class in javax.management.remote.rmi">RMIServerImpl_Stub</a></td>
<td> <div class="block">RMIServerImpl remote stub.</div> </td>
</tr>
</table> </div> </div> </div> </div> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1993, 2023, Oracle and/or its affiliates. All rights reserved.<br>Documentation extracted from Debian's OpenJDK Development Kit package.<br>Licensed under the GNU General Public License, version 2, with the Classpath Exception.<br>Various third party code in OpenJDK is licensed under different licenses (see Debian package).<br>Java and OpenJDK are trademarks or registered trademarks of Oracle and/or its affiliates.<br>
    <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.management.rmi/javax/management/remote/rmi/package-summary.html" class="_attribution-link">https://docs.oracle.com/en/java/javase/21/docs/api/java.management.rmi/javax/management/remote/rmi/package-summary.html</a>
  </p>
</div>
