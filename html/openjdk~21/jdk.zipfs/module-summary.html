<h1 title="Module jdk.zipfs" class="title">Module jdk.zipfs</h1>  <div class="module-signature">module <span class="element-name">jdk.zipfs</span>
</div> <section class="module-description" id="module-description">  <div class="block">Provides the implementation of the Zip file system provider. The Zip file system provider treats the contents of a Zip or JAR file as a file system. <h2 id="accessing-a-zip-file-system-heading">Accessing a Zip File System</h2> The <a href="../java.base/java/nio/file/filesystems.html" title="class in java.nio.file">FileSystems</a> <code>newFileSystem</code> static factory methods can be used to: <ul> <li>Create a Zip file system</li> <li>Open an existing file as a Zip file system</li> </ul> The Zip file system provider does not support opening an existing Zip file that contains entries with "." or ".." in its name elements. <h2 id="uri-scheme-used-to-identify-the-zip-file-system-heading">URI Scheme Used to Identify the Zip File System</h2> The URI <a href="../java.base/java/net/uri.html#getScheme()"><code>scheme</code></a> that identifies the ZIP file system is <code>jar</code>. <h2 id="posix-file-attributes-heading">POSIX file attributes</h2> A Zip file system supports a file attribute <a href="../java.base/java/nio/file/attribute/fileattributeview.html" title="interface in java.nio.file.attribute"><code>view</code></a> named "<code>zip</code>" that defines the following file attribute: <blockquote> <table class="striped"> <caption style="display:none">Supported attributes</caption> <thead> <tr> <th scope="col">Name</th> <th scope="col">Type</th> </tr> </thead> <tbody> <tr> <th scope="row">permissions</th> <td>
<a href="../java.base/java/util/set.html" title="interface in java.util"><code>Set</code></a>&lt;<a href="../java.base/java/nio/file/attribute/posixfilepermission.html" title="enum class in java.nio.file.attribute"><code>PosixFilePermission</code></a>&gt;</td> </tr> </tbody> </table> </blockquote> The "permissions" attribute is the set of access permissions that are optionally stored for entries in a Zip file. The value of the attribute is <code>null</code> for entries that do not have access permissions. Zip file systems do not enforce access permissions. <p> The "permissions" attribute may be read and set using the <a href="../java.base/java/nio/file/files.html#getAttribute(java.nio.file.Path,java.lang.String,java.nio.file.LinkOption...)">Files.getAttribute</a> and <a href="../java.base/java/nio/file/files.html#setAttribute(java.nio.file.Path,java.lang.String,java.lang.Object,java.nio.file.LinkOption...)">Files.setAttribute</a> methods. The following example uses these methods to read and set the attribute: </p>
<pre class="lang-java" data-language="java"> <code>
     Set&lt;PosixFilePermission&gt; perms = Files.getAttribute(entry, "zip:permissions");
     if (perms == null) {
         perms = PosixFilePermissions.fromString("rw-rw-rw-");
         Files.setAttribute(entry, "zip:permissions", perms);
     }
 </code> </pre> <p> In addition to the "<code>zip</code>" view, a Zip file system optionally supports the <a href="../java.base/java/nio/file/attribute/posixfileattributeview.html" title="interface in java.nio.file.attribute"><code>PosixFileAttributeView</code></a> ("<code>posix</code>"). This view extends the "<code>basic</code>" view with type safe access to the <a href="../java.base/java/nio/file/attribute/posixfileattributes.html#owner()"><code>owner</code></a>, <a href="../java.base/java/nio/file/attribute/posixfileattributes.html#group()"><code>group-owner</code></a>, and <a href="../java.base/java/nio/file/attribute/posixfileattributes.html#permissions()"><code>permissions</code></a> attributes. The "<code>posix</code>" view is only supported when the Zip file system is created with the provider property "<code>enablePosixFileAttributes</code>" set to "<code>true</code>". The following creates a file system with this property and reads the access permissions of a file: </p>
<pre class="lang-java" data-language="java"> <code>
     var env = Map.of("enablePosixFileAttributes", "true");
     try (FileSystem fs = FileSystems.newFileSystem(file, env) {
         Path entry = fs.getPath("entry");
         Set&lt;PosixFilePermission&gt; perms = Files.getPosixFilePermissions(entry);
     }
 </code> </pre> <p> The file owner and group owner attributes are not persisted, meaning they are not stored in the zip file. The "<code>defaultOwner</code>" and "<code>defaultGroup</code>" provider properties (listed below) can be used to configure the default values for these attributes. If these properties are not set then the file owner defaults to the owner of the zip file, and the group owner defaults to the zip file's group owner (or the file owner on platforms that don't support a group owner). </p>
<p> The "<code>permissions</code>" attribute is not optional in the "<code>posix</code>" view so a default set of permissions are used for entries that do not have access permissions stored in the Zip file. The default set of permissions are </p>
<ul> <li><a href="../java.base/java/nio/file/attribute/posixfilepermission.html#OWNER_READ"><code>OWNER_READ</code></a></li> <li><a href="../java.base/java/nio/file/attribute/posixfilepermission.html#OWNER_WRITE"><code>OWNER_WRITE</code></a></li> <li><a href="../java.base/java/nio/file/attribute/posixfilepermission.html#GROUP_READ"><code>GROUP_READ</code></a></li> </ul> The default permissions can be configured with the "<code>defaultPermissions</code>" property described below. <h2 id="zip-file-system-properties-heading">Zip File System Properties</h2> The following properties may be specified when creating a Zip file system: <table class="striped"> <caption style="display:none"> Configurable properties that may be specified when creating a new Zip file system </caption> <thead> <tr> <th scope="col">Property Name</th> <th scope="col">Data Type</th> <th scope="col">Default Value</th> <th scope="col">Description</th> </tr> </thead> <tbody> <tr> <th scope="row">create</th> <td>
<a href="../java.base/java/lang/string.html" title="class in java.lang"><code>String</code></a> or <a href="../java.base/java/lang/boolean.html" title="class in java.lang"><code>Boolean</code></a>
</td> <td>false</td> <td> If the value is <code>true</code>, the Zip file system provider creates a new Zip or JAR file if it does not exist. </td> </tr> <tr> <th scope="row">encoding</th> <td><a href="../java.base/java/lang/string.html" title="class in java.lang"><code>String</code></a></td> <td>UTF-8</td> <td> The value indicates the encoding scheme for the names of the entries in the Zip or JAR file. </td> </tr> <tr> <th scope="row">enablePosixFileAttributes</th> <td>
<a href="../java.base/java/lang/string.html" title="class in java.lang"><code>String</code></a> or <a href="../java.base/java/lang/boolean.html" title="class in java.lang"><code>Boolean</code></a>
</td> <td>false</td> <td> If the value is <code>true</code>, the Zip file system will support the <a href="../java.base/java/nio/file/attribute/posixfileattributeview.html" title="interface in java.nio.file.attribute"><code>PosixFileAttributeView</code></a>. </td> </tr> <tr> <th scope="row">defaultOwner</th> <td>
<a href="../java.base/java/nio/file/attribute/userprincipal.html" title="interface in java.nio.file.attribute"><code>UserPrincipal</code></a><br> or <a href="../java.base/java/lang/string.html" title="class in java.lang"><code>String</code></a>
</td> <td>null/unset</td> <td> Override the default owner for entries in the Zip file system.<br> The value can be a UserPrincipal or a String value that is used as the UserPrincipal's name. </td> </tr> <tr> <th scope="row">defaultGroup</th> <td>
<a href="../java.base/java/nio/file/attribute/groupprincipal.html" title="interface in java.nio.file.attribute"><code>GroupPrincipal</code></a><br> or <a href="../java.base/java/lang/string.html" title="class in java.lang"><code>String</code></a>
</td> <td>null/unset</td> <td> Override the default group for entries in the Zip file system.<br> The value can be a GroupPrincipal or a String value that is used as the GroupPrincipal's name. </td> </tr> <tr> <th scope="row">defaultPermissions</th> <td>
<a href="../java.base/java/util/set.html" title="interface in java.util"><code>Set</code></a>&lt;<a href="../java.base/java/nio/file/attribute/posixfilepermission.html" title="enum class in java.nio.file.attribute"><code>PosixFilePermission</code></a>&gt;<br> or <a href="../java.base/java/lang/string.html" title="class in java.lang"><code>String</code></a>
</td> <td>null/unset</td> <td> Override the default Set of permissions for entries in the Zip file system.<br> The value can be a <a href="../java.base/java/util/set.html" title="interface in java.util"><code>Set</code></a>&lt;<a href="../java.base/java/nio/file/attribute/posixfilepermission.html" title="enum class in java.nio.file.attribute"><code>PosixFilePermission</code></a>&gt; or<br> a String that is parsed by <a href="../java.base/java/nio/file/attribute/posixfilepermissions.html#fromString(java.lang.String)"><code>PosixFilePermissions::fromString</code></a> </td> </tr> <tr> <th scope="row">compressionMethod</th> <td><a href="../java.base/java/lang/string.html" title="class in java.lang"><code>String</code></a></td> <td>"DEFLATED"</td> <td> The value representing the compression method to use when writing entries to the Zip file system. <ul> <li> If the value is <code>"STORED"</code>, the Zip file system provider will not compress entries when writing to the Zip file system. </li> <li> If the value is <code>"DEFLATED"</code> or the property is not set, the Zip file system provider will use data compression when writing entries to the Zip file system. </li> <li> If the value is not <code>"STORED"</code> or <code>"DEFLATED"</code>, an <code>IllegalArgumentException</code> will be thrown when the Zip filesystem is created. </li> </ul> </td> </tr> <tr> <th scope="row">releaseVersion</th> <td>
<a href="../java.base/java/lang/string.html" title="class in java.lang"><code>String</code></a> or <a href="../java.base/java/lang/integer.html" title="class in java.lang"><code>Integer</code></a>
</td> <td>null/unset</td> <td> A value representing the version entry to use when accessing a <a href="https://docs.oracle.com/en/java/javase/21/docs/specs/jar/jar.html#multi-release-jar-files"> multi-release JAR</a>. If the JAR is not a <a href="https://docs.oracle.com/en/java/javase/21/docs/specs/jar/jar.html#multi-release-jar-files"> multi-release JAR</a>, the value will be ignored and the JAR will be considered un-versioned. <p> The value must be either the string "runtime" or represent a valid <a href="../java.base/java/lang/runtime.version.html" title="class in java.lang">Java SE Platform version number</a>, such as <code>9</code> or <code>14</code>, in order to determine the version entry. </p>
<ul> <li> If the value is <code>null</code> or the property is not set, then the JAR will be treated as an un-versioned JAR. </li> <li> If the value is <code>"runtime"</code>, the version entry will be determined by invoking <a href="../java.base/java/lang/runtime.version.html#feature()">Runtime.Version.feature()</a>. </li> <li> If the value does not represent a valid <a href="../java.base/java/lang/runtime.version.html" title="class in java.lang">Java SE Platform version number</a>, an <code>IllegalArgumentException</code> will be thrown. </li> </ul> </td> </tr> </tbody> </table> <h2 id="examples--heading">Examples:</h2> Construct a new Zip file system that is identified by a URI. If the Zip file does not exist, it will be created: <pre class="lang-java" data-language="java">
 <code>

     URI uri = URI.create("jar:file:/home/luckydog/tennisTeam.zip");
     Map&lt;String, String&gt; env = Map.of("create", "true");
     FileSystem zipfs = FileSystems.newFileSystem(uri, env);
 </code>
 </pre> Construct a new Zip file system that is identified by specifying a path and using automatic file type detection. Iterate from the root of the JAR displaying each found entry: <pre class="lang-java" data-language="java">
 <code>

     FileSystem zipfs = FileSystems.newFileSystem(Path.of("helloworld.jar"));
     Path rootDir = zipfs.getPath("/");
     Files.walk(rootDir)
            .forEach(System.out::println);
 </code>
 </pre>
</div> <dl class="notes">
<dt>Module Graph:</dt>
<dd><a class="module-graph" href="https://docs.oracle.com/en/java/javase/21/docs/api/jdk.zipfs/module-graph.svg"><img style="vertical-align:top" alt="Module graph for jdk.zipfs" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8IS0tIEdlbmVyYXRlZCBieSBncmFwaHZpeiB2ZXJzaW9uIDIuMzguMCAoMjAxNDA0MTMuMjA0MSkKIC0tPgo8IS0tIFRpdGxlOiBqZGsuemlwZnMgUGFnZXM6IDEgLS0+Cjxzdmcgd2lkdGg9Ijk0cHQiIGhlaWdodD0iMTMzcHQiCiB2aWV3Qm94PSIwLjAwIDAuMDAgOTQuMDAgMTMzLjAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KPGcgaWQ9ImdyYXBoMCIgY2xhc3M9ImdyYXBoIiB0cmFuc2Zvcm09InNjYWxlKDEgMSkgcm90YXRlKDApIHRyYW5zbGF0ZSg0IDEyOSkiPgo8dGl0bGU+amRrLnppcGZzPC90aXRsZT4KPHBvbHlnb24gZmlsbD0id2hpdGUiIHN0cm9rZT0ibm9uZSIgcG9pbnRzPSItNCw0IC00LC0xMjkgOTAsLTEyOSA5MCw0IC00LDQiLz4KPCEtLSBqYXZhLmJhc2UgLS0+CjxnIGlkPSJub2RlMSIgY2xhc3M9Im5vZGUiPjx0aXRsZT5qYXZhLmJhc2U8L3RpdGxlPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI0MyIgeT0iLTE3LjQiIGZvbnQtZmFtaWx5PSJEZWphVnVTYW5zIiBmb250LXNpemU9IjEyLjAwIiBmaWxsPSIjZTc2ZjAwIj5qYXZhLmJhc2U8L3RleHQ+CjwvZz4KPCEtLSBqZGsuemlwZnMgLS0+CjxnIGlkPSJub2RlMiIgY2xhc3M9Im5vZGUiPjx0aXRsZT5qZGsuemlwZnM8L3RpdGxlPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI0MyIgeT0iLTEwMS40IiBmb250LWZhbWlseT0iRGVqYVZ1U2FucyIgZm9udC1zaXplPSIxMi4wMCIgZmlsbD0iIzQzNzI5MSI+amRrLnppcGZzPC90ZXh0Pgo8L2c+CjwhLS0gamRrLnppcGZzJiM0NTsmZ3Q7amF2YS5iYXNlIC0tPgo8ZyBpZD0iZWRnZTEiIGNsYXNzPSJlZGdlIj48dGl0bGU+amRrLnppcGZzJiM0NTsmZ3Q7amF2YS5iYXNlPC90aXRsZT4KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZGRkZGRkIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik00MywtODMuNjUwMUM0MywtNzMuOTgwOCA0MywtNjIuMTUwMiA0MywtNTEuNDE1NyIvPgo8cG9seWdvbiBmaWxsPSIjZGRkZGRkIiBzdHJva2U9IiNkZGRkZGQiIHN0cm9rZS13aWR0aD0iMiIgcG9pbnRzPSI0MywtNDEuMTY3MSA0Ny41MDAxLC01MS4xNjcxIDQzLjUsLTQ2LjE2NzEgNDMuNTAwMSwtNTEuMTY3MSA0My4wMDAxLC01MS4xNjcxIDQyLjUwMDEsLTUxLjE2NzEgNDIuNSwtNDYuMTY3MSAzOC41MDAxLC01MS4xNjcyIDQzLC00MS4xNjcxIDQzLC00MS4xNjcxIi8+CjwvZz4KPC9nPgo8L3N2Zz4K" height="100"><span><img style="border: solid lightgray 1px; vertical-align:top" alt="Module graph for jdk.zipfs" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8IS0tIEdlbmVyYXRlZCBieSBncmFwaHZpeiB2ZXJzaW9uIDIuMzguMCAoMjAxNDA0MTMuMjA0MSkKIC0tPgo8IS0tIFRpdGxlOiBqZGsuemlwZnMgUGFnZXM6IDEgLS0+Cjxzdmcgd2lkdGg9Ijk0cHQiIGhlaWdodD0iMTMzcHQiCiB2aWV3Qm94PSIwLjAwIDAuMDAgOTQuMDAgMTMzLjAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KPGcgaWQ9ImdyYXBoMCIgY2xhc3M9ImdyYXBoIiB0cmFuc2Zvcm09InNjYWxlKDEgMSkgcm90YXRlKDApIHRyYW5zbGF0ZSg0IDEyOSkiPgo8dGl0bGU+amRrLnppcGZzPC90aXRsZT4KPHBvbHlnb24gZmlsbD0id2hpdGUiIHN0cm9rZT0ibm9uZSIgcG9pbnRzPSItNCw0IC00LC0xMjkgOTAsLTEyOSA5MCw0IC00LDQiLz4KPCEtLSBqYXZhLmJhc2UgLS0+CjxnIGlkPSJub2RlMSIgY2xhc3M9Im5vZGUiPjx0aXRsZT5qYXZhLmJhc2U8L3RpdGxlPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI0MyIgeT0iLTE3LjQiIGZvbnQtZmFtaWx5PSJEZWphVnVTYW5zIiBmb250LXNpemU9IjEyLjAwIiBmaWxsPSIjZTc2ZjAwIj5qYXZhLmJhc2U8L3RleHQ+CjwvZz4KPCEtLSBqZGsuemlwZnMgLS0+CjxnIGlkPSJub2RlMiIgY2xhc3M9Im5vZGUiPjx0aXRsZT5qZGsuemlwZnM8L3RpdGxlPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI0MyIgeT0iLTEwMS40IiBmb250LWZhbWlseT0iRGVqYVZ1U2FucyIgZm9udC1zaXplPSIxMi4wMCIgZmlsbD0iIzQzNzI5MSI+amRrLnppcGZzPC90ZXh0Pgo8L2c+CjwhLS0gamRrLnppcGZzJiM0NTsmZ3Q7amF2YS5iYXNlIC0tPgo8ZyBpZD0iZWRnZTEiIGNsYXNzPSJlZGdlIj48dGl0bGU+amRrLnppcGZzJiM0NTsmZ3Q7amF2YS5iYXNlPC90aXRsZT4KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZGRkZGRkIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik00MywtODMuNjUwMUM0MywtNzMuOTgwOCA0MywtNjIuMTUwMiA0MywtNTEuNDE1NyIvPgo8cG9seWdvbiBmaWxsPSIjZGRkZGRkIiBzdHJva2U9IiNkZGRkZGQiIHN0cm9rZS13aWR0aD0iMiIgcG9pbnRzPSI0MywtNDEuMTY3MSA0Ny41MDAxLC01MS4xNjcxIDQzLjUsLTQ2LjE2NzEgNDMuNTAwMSwtNTEuMTY3MSA0My4wMDAxLC01MS4xNjcxIDQyLjUwMDEsLTUxLjE2NzEgNDIuNSwtNDYuMTY3MSAzOC41MDAxLC01MS4xNjcyIDQzLC00MS4xNjcxIDQzLC00MS4xNjcxIi8+CjwvZz4KPC9nPgo8L3N2Zz4K"></span></a></dd> <dt>Since:</dt> <dd>9</dd> </dl> </section> <section class="summary"> <section class="services-summary" id="services-summary">  <h2>Services</h2>  <table class="details-table two-column-summary">     <tr>
<th>Type</th>
<th>Description</th>
</tr>
<tr>
<td><a href="../java.base/java/nio/file/spi/filesystemprovider.html" title="class in java.nio.file.spi">FileSystemProvider</a></td>
<td> <div class="block">Service-provider class for file systems.</div> </td>
</tr>
</table> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1993, 2023, Oracle and/or its affiliates. All rights reserved.<br>Documentation extracted from Debian's OpenJDK Development Kit package.<br>Licensed under the GNU General Public License, version 2, with the Classpath Exception.<br>Various third party code in OpenJDK is licensed under different licenses (see Debian package).<br>Java and OpenJDK are trademarks or registered trademarks of Oracle and/or its affiliates.<br>
    <a href="https://docs.oracle.com/en/java/javase/21/docs/api/jdk.zipfs/module-summary.html" class="_attribution-link">https://docs.oracle.com/en/java/javase/21/docs/api/jdk.zipfs/module-summary.html</a>
  </p>
</div>
