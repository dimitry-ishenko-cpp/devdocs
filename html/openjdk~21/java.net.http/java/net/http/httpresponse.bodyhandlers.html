<h1 title="Class HttpResponse.BodyHandlers" class="title">Class HttpResponse.BodyHandlers</h1> <div class="inheritance" title="Inheritance Tree">
<a href="../../../../java.base/java/lang/object.html" title="class in java.lang">java.lang.Object</a> <div class="inheritance">java.net.http.HttpResponse.BodyHandlers</div> </div> <section class="class-description" id="class-description"> <dl class="notes"> <dt>Enclosing interface:</dt> <dd><code><a href="httpresponse" title="interface in java.net.http">HttpResponse</a>&lt;<a href="httpresponse" title="type parameter in HttpResponse">T</a>&gt;</code></dd> </dl>  <pre class="lang-java" data-language="java">public static class HttpResponse.BodyHandlers extends Object</pre> <div class="block">Implementations of <a href="httpresponse.bodyhandler" title="interface in java.net.http"><code>BodyHandler</code></a> that implement various useful handlers, such as handling the response body as a String, or streaming the response body to a file. <p> These implementations do not examine the status code, meaning the body is always accepted. They typically return an equivalently named <code>BodySubscriber</code>. Alternatively, a custom handler can be used to examine the status code and headers, and return a different body subscriber, of the same type, as appropriate. </p>
<p>The following are examples of using the predefined body handlers to convert a flow of response body data into common high-level Java objects: </p>
<div class="snippet-container"> <pre class="lang-java" data-language="java"><code>// Receives the response body as a String
HttpResponse&lt;String&gt; response = client
  .send(request, BodyHandlers.ofString());</code></pre> </div> <div class="snippet-container"> <pre class="lang-java" data-language="java"><code>// Receives the response body as a file
HttpResponse&lt;Path&gt; response = client
  .send(request, BodyHandlers.ofFile(Paths.get("example.html")));</code></pre> </div> <div class="snippet-container"> <pre class="lang-java" data-language="java"><code>// Receives the response body as an InputStream
HttpResponse&lt;InputStream&gt; response = client
  .send(request, BodyHandlers.ofInputStream());</code></pre> </div> <div class="snippet-container"> <pre class="lang-java" data-language="java"><code>// Discards the response body
HttpResponse&lt;Void&gt; response = client
  .send(request, BodyHandlers.discarding());</code></pre> </div> </div> <dl class="notes"> <dt>Since:</dt> <dd>11</dd> </dl> </section> <section class="summary"> <section class="method-summary" id="method-summary"> <h2>Method Summary</h2> <div id="method-summary-table">  <div id="method-summary-table.tabpanel" role="tabpanel"> <table class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">                                                       <tr>
<th>Modifier and Type</th>
<th>Method</th>
<th>Description</th>
</tr>
<tr>
<td><code>static &lt;T&gt; <a href="httpresponse.bodyhandler" title="interface in java.net.http">HttpResponse.BodyHandler</a><wbr>&lt;T&gt;</wbr></code></td>
<td><code><a href="#buffering(java.net.http.HttpResponse.BodyHandler,int)" class="member-name-link">buffering</a><wbr>(<a href="httpresponse.bodyhandler" title="interface in java.net.http">HttpResponse.BodyHandler</a>&lt;T&gt; downstreamHandler,
 int bufferSize)</wbr></code></td>
<td> <div class="block">Returns a <code>BodyHandler</code> which, when invoked, returns a <a href="httpresponse.bodysubscribers#buffering(java.net.http.HttpResponse.BodySubscriber,int)">buffering BodySubscriber</a> that buffers data before delivering it to the downstream subscriber.</div> </td>
</tr>
<tr>
<td><code>static <a href="httpresponse.bodyhandler" title="interface in java.net.http">HttpResponse.BodyHandler</a><wbr>&lt;<a href="../../../../java.base/java/lang/void.html" title="class in java.lang">Void</a>&gt;</wbr></code></td>
<td><code><a href="#discarding()" class="member-name-link">discarding</a>()</code></td>
<td> <div class="block">Returns a response body handler that discards the response body.</div> </td>
</tr>
<tr>
<td><code>static <a href="httpresponse.bodyhandler" title="interface in java.net.http">HttpResponse.BodyHandler</a><wbr>&lt;<a href="../../../../java.base/java/lang/void.html" title="class in java.lang">Void</a>&gt;</wbr></code></td>
<td><code><a href="#fromLineSubscriber(java.util.concurrent.Flow.Subscriber)" class="member-name-link">fromLineSubscriber</a><wbr>(<a href="../../../../java.base/java/util/concurrent/flow.subscriber.html" title="interface in java.util.concurrent">Flow.Subscriber</a>&lt;? super <a href="../../../../java.base/java/lang/string.html" title="class in java.lang">String</a>&gt; subscriber)</wbr></code></td>
<td> <div class="block">Returns a response body handler that returns a <a href="httpresponse.bodysubscriber" title="interface in java.net.http"><code>BodySubscriber</code></a><code>&lt;Void&gt;</code> obtained from <a href="httpresponse.bodysubscribers#fromLineSubscriber(S,java.util.function.Function,java.nio.charset.Charset,java.lang.String)"><code>BodySubscribers.fromLineSubscriber(subscriber, s -&gt; null, charset, null)</code></a>, with the given <code>subscriber</code>.</div> </td>
</tr>
<tr>
<td><code>static &lt;S extends <a href="../../../../java.base/java/util/concurrent/flow.subscriber.html" title="interface in java.util.concurrent">Flow.Subscriber</a>&lt;? super <a href="../../../../java.base/java/lang/string.html" title="class in java.lang">String</a>&gt;,<wbr>
T&gt;<br><a href="httpresponse.bodyhandler" title="interface in java.net.http">HttpResponse.BodyHandler</a><wbr>&lt;T&gt;</wbr></wbr></code></td>
<td><code><a href="#fromLineSubscriber(S,java.util.function.Function,java.lang.String)" class="member-name-link">fromLineSubscriber</a><wbr>(S subscriber,
 <a href="../../../../java.base/java/util/function/function.html" title="interface in java.util.function">Function</a>&lt;? super S,<wbr>? extends T&gt; finisher,
 <a href="../../../../java.base/java/lang/string.html" title="class in java.lang">String</a> lineSeparator)</wbr></wbr></code></td>
<td> <div class="block">Returns a response body handler that returns a <a href="httpresponse.bodysubscriber" title="interface in java.net.http"><code>BodySubscriber</code></a><code>&lt;T&gt;</code> obtained from <a href="httpresponse.bodysubscribers#fromLineSubscriber(S,java.util.function.Function,java.nio.charset.Charset,java.lang.String)"><code>BodySubscribers.fromLineSubscriber(subscriber, finisher, charset, lineSeparator)</code></a>, with the given <code>subscriber</code>, <code>finisher</code> function, and line separator.</div> </td>
</tr>
<tr>
<td><code>static <a href="httpresponse.bodyhandler" title="interface in java.net.http">HttpResponse.BodyHandler</a><wbr>&lt;<a href="../../../../java.base/java/lang/void.html" title="class in java.lang">Void</a>&gt;</wbr></code></td>
<td><code><a href="#fromSubscriber(java.util.concurrent.Flow.Subscriber)" class="member-name-link">fromSubscriber</a><wbr>(<a href="../../../../java.base/java/util/concurrent/flow.subscriber.html" title="interface in java.util.concurrent">Flow.Subscriber</a>&lt;? super <a href="../../../../java.base/java/util/list.html" title="interface in java.util">List</a>&lt;<a href="../../../../java.base/java/nio/bytebuffer.html" title="class in java.nio">ByteBuffer</a>&gt;&gt; subscriber)</wbr></code></td>
<td> <div class="block">Returns a response body handler that returns a <a href="httpresponse.bodysubscriber" title="interface in java.net.http"><code>BodySubscriber</code></a><code>&lt;Void&gt;</code> obtained from <a href="httpresponse.bodysubscribers#fromSubscriber(java.util.concurrent.Flow.Subscriber)"><code>HttpResponse.BodySubscribers.fromSubscriber(Subscriber)</code></a>, with the given <code>subscriber</code>.</div> </td>
</tr>
<tr>
<td><code>static &lt;S extends <a href="../../../../java.base/java/util/concurrent/flow.subscriber.html" title="interface in java.util.concurrent">Flow.Subscriber</a>&lt;? super <a href="../../../../java.base/java/util/list.html" title="interface in java.util">List</a>&lt;<a href="../../../../java.base/java/nio/bytebuffer.html" title="class in java.nio">ByteBuffer</a>&gt;&gt;,<wbr>
T&gt;<br><a href="httpresponse.bodyhandler" title="interface in java.net.http">HttpResponse.BodyHandler</a><wbr>&lt;T&gt;</wbr></wbr></code></td>
<td><code><a href="#fromSubscriber(S,java.util.function.Function)" class="member-name-link">fromSubscriber</a><wbr>(S subscriber,
 <a href="../../../../java.base/java/util/function/function.html" title="interface in java.util.function">Function</a>&lt;? super S,<wbr>? extends T&gt; finisher)</wbr></wbr></code></td>
<td> <div class="block">Returns a response body handler that returns a <a href="httpresponse.bodysubscriber" title="interface in java.net.http"><code>BodySubscriber</code></a><code>&lt;T&gt;</code> obtained from <a href="httpresponse.bodysubscribers#fromSubscriber(S,java.util.function.Function)"><code>HttpResponse.BodySubscribers.fromSubscriber(Subscriber, Function)</code></a>, with the given <code>subscriber</code> and <code>finisher</code> function.</div> </td>
</tr>
<tr>
<td><code>static <a href="httpresponse.bodyhandler" title="interface in java.net.http">HttpResponse.BodyHandler</a><wbr>&lt;byte[]&gt;</wbr></code></td>
<td><code><a href="#ofByteArray()" class="member-name-link">ofByteArray</a>()</code></td>
<td> <div class="block">Returns a <code>BodyHandler&lt;byte[]&gt;</code> that returns a <a href="httpresponse.bodysubscriber" title="interface in java.net.http"><code>BodySubscriber</code></a><code>&lt;byte[]&gt;</code> obtained from <a href="httpresponse.bodysubscribers#ofByteArray()"><code>BodySubscribers.ofByteArray()</code></a>.</div> </td>
</tr>
<tr>
<td><code>static <a href="httpresponse.bodyhandler" title="interface in java.net.http">HttpResponse.BodyHandler</a><wbr>&lt;<a href="../../../../java.base/java/lang/void.html" title="class in java.lang">Void</a>&gt;</wbr></code></td>
<td><code><a href="#ofByteArrayConsumer(java.util.function.Consumer)" class="member-name-link">ofByteArrayConsumer</a><wbr>(<a href="../../../../java.base/java/util/function/consumer.html" title="interface in java.util.function">Consumer</a>&lt;<a href="../../../../java.base/java/util/optional.html" title="class in java.util">Optional</a>&lt;byte[]&gt;&gt; consumer)</wbr></code></td>
<td> <div class="block">Returns a <code>BodyHandler&lt;Void&gt;</code> that returns a <a href="httpresponse.bodysubscriber" title="interface in java.net.http"><code>BodySubscriber</code></a><code>&lt;Void&gt;</code> obtained from <a href="httpresponse.bodysubscribers#ofByteArrayConsumer(java.util.function.Consumer)"><code>BodySubscribers.ofByteArrayConsumer(Consumer)</code></a>.</div> </td>
</tr>
<tr>
<td><code>static <a href="httpresponse.bodyhandler" title="interface in java.net.http">HttpResponse.BodyHandler</a><wbr>&lt;<a href="../../../../java.base/java/nio/file/path.html" title="interface in java.nio.file">Path</a>&gt;</wbr></code></td>
<td><code><a href="#ofFile(java.nio.file.Path)" class="member-name-link">ofFile</a><wbr>(<a href="../../../../java.base/java/nio/file/path.html" title="interface in java.nio.file">Path</a> file)</wbr></code></td>
<td> <div class="block">Returns a <code>BodyHandler&lt;Path&gt;</code> that returns a <a href="httpresponse.bodysubscriber" title="interface in java.net.http"><code>BodySubscriber</code></a><code>&lt;Path&gt;</code>.</div> </td>
</tr>
<tr>
<td><code>static <a href="httpresponse.bodyhandler" title="interface in java.net.http">HttpResponse.BodyHandler</a><wbr>&lt;<a href="../../../../java.base/java/nio/file/path.html" title="interface in java.nio.file">Path</a>&gt;</wbr></code></td>
<td><code><a href="#ofFile(java.nio.file.Path,java.nio.file.OpenOption...)" class="member-name-link">ofFile</a><wbr>(<a href="../../../../java.base/java/nio/file/path.html" title="interface in java.nio.file">Path</a> file,
 <a href="../../../../java.base/java/nio/file/openoption.html" title="interface in java.nio.file">OpenOption</a>... openOptions)</wbr></code></td>
<td> <div class="block">Returns a <code>BodyHandler&lt;Path&gt;</code> that returns a <a href="httpresponse.bodysubscriber" title="interface in java.net.http"><code>BodySubscriber</code></a><code>&lt;Path&gt;</code> obtained from <a href="httpresponse.bodysubscribers#ofFile(java.nio.file.Path,java.nio.file.OpenOption...)"><code>BodySubscribers.ofFile(Path,OpenOption...)</code></a>.</div> </td>
</tr>
<tr>
<td><code>static <a href="httpresponse.bodyhandler" title="interface in java.net.http">HttpResponse.BodyHandler</a><wbr>&lt;<a href="../../../../java.base/java/nio/file/path.html" title="interface in java.nio.file">Path</a>&gt;</wbr></code></td>
<td><code><a href="#ofFileDownload(java.nio.file.Path,java.nio.file.OpenOption...)" class="member-name-link">ofFileDownload</a><wbr>(<a href="../../../../java.base/java/nio/file/path.html" title="interface in java.nio.file">Path</a> directory,
 <a href="../../../../java.base/java/nio/file/openoption.html" title="interface in java.nio.file">OpenOption</a>... openOptions)</wbr></code></td>
<td> <div class="block">Returns a <code>BodyHandler&lt;Path&gt;</code> that returns a <a href="httpresponse.bodysubscriber" title="interface in java.net.http"><code>BodySubscriber</code></a>&lt;<a href="../../../../java.base/java/nio/file/path.html" title="interface in java.nio.file"><code>Path</code></a>&gt; where the download directory is specified, but the filename is obtained from the <code>Content-Disposition</code> response header.</div> </td>
</tr>
<tr>
<td><code>static <a href="httpresponse.bodyhandler" title="interface in java.net.http">HttpResponse.BodyHandler</a><wbr>&lt;<a href="../../../../java.base/java/io/inputstream.html" title="class in java.io">InputStream</a>&gt;</wbr></code></td>
<td><code><a href="#ofInputStream()" class="member-name-link">ofInputStream</a>()</code></td>
<td> <div class="block">Returns a <code>BodyHandler&lt;InputStream&gt;</code> that returns a <a href="httpresponse.bodysubscriber" title="interface in java.net.http"><code>BodySubscriber</code></a><code>&lt;InputStream&gt;</code> obtained from <a href="httpresponse.bodysubscribers#ofInputStream()"><code>BodySubscribers.ofInputStream</code></a>.</div> </td>
</tr>
<tr>
<td><code>static <a href="httpresponse.bodyhandler" title="interface in java.net.http">HttpResponse.BodyHandler</a><wbr>&lt;<a href="../../../../java.base/java/util/stream/stream.html" title="interface in java.util.stream">Stream</a>&lt;<a href="../../../../java.base/java/lang/string.html" title="class in java.lang">String</a>&gt;&gt;</wbr></code></td>
<td><code><a href="#ofLines()" class="member-name-link">ofLines</a>()</code></td>
<td> <div class="block">Returns a <code>BodyHandler&lt;Stream&lt;String&gt;&gt;</code> that returns a <a href="httpresponse.bodysubscriber" title="interface in java.net.http"><code>BodySubscriber</code></a><code>&lt;Stream&lt;String&gt;&gt;</code> obtained from <a href="httpresponse.bodysubscribers#ofLines(java.nio.charset.Charset)"><code>BodySubscribers.ofLines(charset)</code></a>.</div> </td>
</tr>
<tr>
<td><code>static <a href="httpresponse.bodyhandler" title="interface in java.net.http">HttpResponse.BodyHandler</a><wbr>&lt;<a href="../../../../java.base/java/util/concurrent/flow.publisher.html" title="interface in java.util.concurrent">Flow.Publisher</a>&lt;<a href="../../../../java.base/java/util/list.html" title="interface in java.util">List</a>&lt;<a href="../../../../java.base/java/nio/bytebuffer.html" title="class in java.nio">ByteBuffer</a>&gt;&gt;&gt;</wbr></code></td>
<td><code><a href="#ofPublisher()" class="member-name-link">ofPublisher</a>()</code></td>
<td> <div class="block">Returns a <code>BodyHandler&lt;Publisher&lt;List&lt;ByteBuffer&gt;&gt;&gt;</code> that creates a <a href="httpresponse.bodysubscriber" title="interface in java.net.http"><code>BodySubscriber</code></a><code>&lt;Publisher&lt;List&lt;ByteBuffer&gt;&gt;&gt;</code> obtained from <a href="httpresponse.bodysubscribers#ofPublisher()"><code>BodySubscribers.ofPublisher()</code></a>.</div> </td>
</tr>
<tr>
<td><code>static <a href="httpresponse.bodyhandler" title="interface in java.net.http">HttpResponse.BodyHandler</a><wbr>&lt;<a href="../../../../java.base/java/lang/string.html" title="class in java.lang">String</a>&gt;</wbr></code></td>
<td><code><a href="#ofString()" class="member-name-link">ofString</a>()</code></td>
<td> <div class="block">Returns a <code>BodyHandler&lt;String&gt;</code> that returns a <a href="httpresponse.bodysubscriber" title="interface in java.net.http"><code>BodySubscriber</code></a><code>&lt;String&gt;</code> obtained from <a href="httpresponse.bodysubscribers#ofString(java.nio.charset.Charset)"><code>BodySubscribers.ofString(Charset)</code></a>.</div> </td>
</tr>
<tr>
<td><code>static <a href="httpresponse.bodyhandler" title="interface in java.net.http">HttpResponse.BodyHandler</a><wbr>&lt;<a href="../../../../java.base/java/lang/string.html" title="class in java.lang">String</a>&gt;</wbr></code></td>
<td><code><a href="#ofString(java.nio.charset.Charset)" class="member-name-link">ofString</a><wbr>(<a href="../../../../java.base/java/nio/charset/charset.html" title="class in java.nio.charset">Charset</a> charset)</wbr></code></td>
<td> <div class="block">Returns a <code>BodyHandler&lt;String&gt;</code> that returns a <a href="httpresponse.bodysubscriber" title="interface in java.net.http"><code>BodySubscriber</code></a><code>&lt;String&gt;</code> obtained from <a href="httpresponse.bodysubscribers#ofString(java.nio.charset.Charset)"><code>BodySubscribers.ofString(Charset)</code></a>.</div> </td>
</tr>
<tr>
<td><code>static &lt;U&gt; <a href="httpresponse.bodyhandler" title="interface in java.net.http">HttpResponse.BodyHandler</a><wbr>&lt;U&gt;</wbr></code></td>
<td><code><a href="#replacing(U)" class="member-name-link">replacing</a><wbr>(U value)</wbr></code></td>
<td> <div class="block">Returns a response body handler that returns the given replacement value, after discarding the response body.</div> </td>
</tr>
</table> </div> </div> <div class="inherited-list"> <h3 id="methods-inherited-from-class-java.lang.Object">Methods declared in class java.lang.<a href="../../../../java.base/java/lang/object.html" title="class in java.lang">Object</a>
</h3> <code><a href="../../../../java.base/java/lang/object.html#clone()">clone</a>, <a href="../../../../java.base/java/lang/object.html#equals(java.lang.Object)">equals</a>, <a href="../../../../java.base/java/lang/object.html#finalize()">finalize</a>, <a href="../../../../java.base/java/lang/object.html#getClass()">getClass</a>, <a href="../../../../java.base/java/lang/object.html#hashCode()">hashCode</a>, <a href="../../../../java.base/java/lang/object.html#notify()">notify</a>, <a href="../../../../java.base/java/lang/object.html#notifyAll()">notifyAll</a>, <a href="../../../../java.base/java/lang/object.html#toString()">toString</a>, <a href="../../../../java.base/java/lang/object.html#wait()">wait</a>, <a href="../../../../java.base/java/lang/object.html#wait(long)">wait</a>, <a href="../../../../java.base/java/lang/object.html#wait(long,int)">wait</a></code>
</div> </section> </section> <section class="details"> <section class="method-details" id="method-detail"> <h2>Method Details</h2>  </section><section class="detail" id="fromSubscriber(java.util.concurrent.Flow.Subscriber)"> <h3>fromSubscriber</h3> <pre class="lang-java" data-language="java">public static HttpResponse.BodyHandler&lt;Void&gt; fromSubscriber(Flow.Subscriber&lt;? super List&lt;ByteBuffer&gt;&gt; subscriber)</pre> <div class="block">Returns a response body handler that returns a <a href="httpresponse.bodysubscriber" title="interface in java.net.http"><code>BodySubscriber</code></a><code>&lt;Void&gt;</code> obtained from <a href="httpresponse.bodysubscribers#fromSubscriber(java.util.concurrent.Flow.Subscriber)"><code>HttpResponse.BodySubscribers.fromSubscriber(Subscriber)</code></a>, with the given <code>subscriber</code>. <p> The response body is not available through this, or the <code>
 HttpResponse</code> API, but instead all response body is forwarded to the given <code>subscriber</code>, which should make it available, if appropriate, through some other mechanism, e.g. an entry in a database, etc.</p>
</div> <dl class="notes"> <dt>API Note:</dt> <dd>This method can be used as an adapter between <code>
 BodySubscriber</code> and <code>Flow.Subscriber</code>. <p> For example: </p>
<div class="snippet-container"> <pre class="lang-java" data-language="java"><code>TextSubscriber subscriber = new TextSubscriber();
HttpResponse&lt;Void&gt; response = client.sendAsync(request,
    BodyHandlers.fromSubscriber(subscriber)).join();
System.out.println(response.statusCode());</code></pre> </div> </dd> <dt>Parameters:</dt> <dd>
<code>subscriber</code> - the subscriber</dd> <dt>Returns:</dt> <dd>a response body handler</dd> </dl> </section><section class="detail" id="fromSubscriber(S,java.util.function.Function)"> <h3 id="fromSubscriber(java.util.concurrent.Flow.Subscriber,java.util.function.Function)">fromSubscriber</h3> <pre class="lang-java" data-language="java">public static &lt;S extends Flow.Subscriber&lt;? super List&lt;ByteBuffer&gt;&gt;, T&gt; HttpResponse.BodyHandler&lt;T&gt; fromSubscriber(S subscriber, Function&lt;? super S,? extends T&gt; finisher)</pre> <div class="block">Returns a response body handler that returns a <a href="httpresponse.bodysubscriber" title="interface in java.net.http"><code>BodySubscriber</code></a><code>&lt;T&gt;</code> obtained from <a href="httpresponse.bodysubscribers#fromSubscriber(S,java.util.function.Function)"><code>HttpResponse.BodySubscribers.fromSubscriber(Subscriber, Function)</code></a>, with the given <code>subscriber</code> and <code>finisher</code> function. <p> The given <code>finisher</code> function is applied after the given subscriber's <code>onComplete</code> has been invoked. The <code>finisher</code> function is invoked with the given subscriber, and returns a value that is set as the response's body.</p>
</div> <dl class="notes"> <dt>API Note:</dt> <dd>This method can be used as an adapter between <code>
 BodySubscriber</code> and <code>Flow.Subscriber</code>. <p> For example: </p>
<div class="snippet-container"> <pre class="lang-java" data-language="java"><code>TextSubscriber subscriber = ...;  // accumulates bytes and transforms them into a String
HttpResponse&lt;String&gt; response = client.sendAsync(request,
    BodyHandlers.fromSubscriber(subscriber, TextSubscriber::getTextResult)).join();
String text = response.body();</code></pre> </div> </dd> <dt>Type Parameters:</dt> <dd>
<code>S</code> - the type of the Subscriber</dd> <dd>
<code>T</code> - the type of the response body</dd> <dt>Parameters:</dt> <dd>
<code>subscriber</code> - the subscriber</dd> <dd>
<code>finisher</code> - a function to be applied after the subscriber has completed</dd> <dt>Returns:</dt> <dd>a response body handler</dd> </dl> </section><section class="detail" id="fromLineSubscriber(java.util.concurrent.Flow.Subscriber)"> <h3>fromLineSubscriber</h3> <pre class="lang-java" data-language="java">public static HttpResponse.BodyHandler&lt;Void&gt; fromLineSubscriber(Flow.Subscriber&lt;? super String&gt; subscriber)</pre> <div class="block">Returns a response body handler that returns a <a href="httpresponse.bodysubscriber" title="interface in java.net.http"><code>BodySubscriber</code></a><code>&lt;Void&gt;</code> obtained from <a href="httpresponse.bodysubscribers#fromLineSubscriber(S,java.util.function.Function,java.nio.charset.Charset,java.lang.String)"><code>BodySubscribers.fromLineSubscriber(subscriber, s -&gt; null, charset, null)</code></a>, with the given <code>subscriber</code>. The <a href="../../../../java.base/java/nio/charset/charset.html" title="class in java.nio.charset"><code>charset</code></a> used to decode the response body bytes is obtained from the HTTP response headers as specified by <a href="#ofString()"><code>ofString()</code></a>, and lines are delimited in the manner of <a href="../../../../java.base/java/io/bufferedreader.html#readLine()"><code>BufferedReader.readLine()</code></a>. <p> The response body is not available through this, or the <code>
 HttpResponse</code> API, but instead all response body is forwarded to the given <code>subscriber</code>, which should make it available, if appropriate, through some other mechanism, e.g. an entry in a database, etc.</p>
</div> <dl class="notes"> <dt>API Note:</dt> <dd>This method can be used as an adapter between a <code>
 BodySubscriber</code> and a text based <code>Flow.Subscriber</code> that parses text line by line. <p> For example: </p>
<div class="snippet-container"> <pre class="lang-java" data-language="java"><code>// A PrintSubscriber that implements Flow.Subscriber&lt;String&gt;
// and print lines received by onNext() on System.out
PrintSubscriber subscriber = new PrintSubscriber(System.out);
client.sendAsync(request, BodyHandlers.fromLineSubscriber(subscriber))
    .thenApply(HttpResponse::statusCode)
    .thenAccept((status) -&gt; {
        if (status != 200) {
            System.err.printf("ERROR: %d status received%n", status);
        }
    });</code></pre> </div> </dd> <dt>Parameters:</dt> <dd>
<code>subscriber</code> - the subscriber</dd> <dt>Returns:</dt> <dd>a response body handler</dd> </dl> </section><section class="detail" id="fromLineSubscriber(S,java.util.function.Function,java.lang.String)"> <h3 id="fromLineSubscriber(java.util.concurrent.Flow.Subscriber,java.util.function.Function,java.lang.String)">fromLineSubscriber</h3> <pre class="lang-java" data-language="java">public static &lt;S extends Flow.Subscriber&lt;? super String&gt;, T&gt; HttpResponse.BodyHandler&lt;T&gt; fromLineSubscriber(S subscriber, Function&lt;? super S,? extends T&gt; finisher, String lineSeparator)</pre> <div class="block">Returns a response body handler that returns a <a href="httpresponse.bodysubscriber" title="interface in java.net.http"><code>BodySubscriber</code></a><code>&lt;T&gt;</code> obtained from <a href="httpresponse.bodysubscribers#fromLineSubscriber(S,java.util.function.Function,java.nio.charset.Charset,java.lang.String)"><code>BodySubscribers.fromLineSubscriber(subscriber, finisher, charset, lineSeparator)</code></a>, with the given <code>subscriber</code>, <code>finisher</code> function, and line separator. The <a href="../../../../java.base/java/nio/charset/charset.html" title="class in java.nio.charset"><code>charset</code></a> used to decode the response body bytes is obtained from the HTTP response headers as specified by <a href="#ofString()"><code>ofString()</code></a>. <p> The given <code>finisher</code> function is applied after the given subscriber's <code>onComplete</code> has been invoked. The <code>finisher</code> function is invoked with the given subscriber, and returns a value that is set as the response's body.</p>
</div> <dl class="notes"> <dt>API Note:</dt> <dd>This method can be used as an adapter between a <code>
 BodySubscriber</code> and a text based <code>Flow.Subscriber</code> that parses text line by line. <p> For example: </p>
<div class="snippet-container"> <pre class="lang-java" data-language="java"><code>// A LineParserSubscriber that implements Flow.Subscriber&lt;String&gt;
// and accumulates lines that match a particular pattern
Pattern pattern = ...;
LineParserSubscriber subscriber = new LineParserSubscriber(pattern);
HttpResponse&lt;List&lt;String&gt;&gt; response = client.send(request,
    BodyHandlers.fromLineSubscriber(subscriber, s -&gt; s.getMatchingLines(), "\n"));
if (response.statusCode() != 200) {
    System.err.printf("ERROR: %d status received%n", response.statusCode());
}</code></pre> </div> </dd> <dt>Type Parameters:</dt> <dd>
<code>S</code> - the type of the Subscriber</dd> <dd>
<code>T</code> - the type of the response body</dd> <dt>Parameters:</dt> <dd>
<code>subscriber</code> - the subscriber</dd> <dd>
<code>finisher</code> - a function to be applied after the subscriber has completed</dd> <dd>
<code>lineSeparator</code> - an optional line separator: can be <code>null</code>, in which case lines will be delimited in the manner of <a href="../../../../java.base/java/io/bufferedreader.html#readLine()"><code>BufferedReader.readLine()</code></a>.</dd> <dt>Returns:</dt> <dd>a response body handler</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../../java.base/java/lang/illegalargumentexception.html" title="class in java.lang">IllegalArgumentException</a></code> - if the supplied <code>lineSeparator</code> is the empty string</dd> </dl> </section><section class="detail" id="discarding()"> <h3>discarding</h3> <pre class="lang-java" data-language="java">public static HttpResponse.BodyHandler&lt;Void&gt; discarding()</pre> <div class="block">Returns a response body handler that discards the response body.</div> <dl class="notes"> <dt>Returns:</dt> <dd>a response body handler</dd> </dl> </section><section class="detail" id="replacing(U)"> <h3 id="replacing(java.lang.Object)">replacing</h3> <pre class="lang-java" data-language="java">public static &lt;U&gt; HttpResponse.BodyHandler&lt;U&gt; replacing(U value)</pre> <div class="block">Returns a response body handler that returns the given replacement value, after discarding the response body.</div> <dl class="notes"> <dt>Type Parameters:</dt> <dd>
<code>U</code> - the response body type</dd> <dt>Parameters:</dt> <dd>
<code>value</code> - the value of U to return as the body, may be <code>null</code>
</dd> <dt>Returns:</dt> <dd>a response body handler</dd> </dl> </section><section class="detail" id="ofString(java.nio.charset.Charset)"> <h3>ofString</h3> <pre class="lang-java" data-language="java">public static HttpResponse.BodyHandler&lt;String&gt; ofString(Charset charset)</pre> <div class="block">Returns a <code>BodyHandler&lt;String&gt;</code> that returns a <a href="httpresponse.bodysubscriber" title="interface in java.net.http"><code>BodySubscriber</code></a><code>&lt;String&gt;</code> obtained from <a href="httpresponse.bodysubscribers#ofString(java.nio.charset.Charset)"><code>BodySubscribers.ofString(Charset)</code></a>. The body is decoded using the given character set.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>charset</code> - the character set to convert the body with</dd> <dt>Returns:</dt> <dd>a response body handler</dd> </dl> </section><section class="detail" id="ofFile(java.nio.file.Path,java.nio.file.OpenOption...)"> <h3>ofFile</h3> <pre class="lang-java" data-language="java">public static HttpResponse.BodyHandler&lt;Path&gt; ofFile(Path file, OpenOption... openOptions)</pre> <div class="block">Returns a <code>BodyHandler&lt;Path&gt;</code> that returns a <a href="httpresponse.bodysubscriber" title="interface in java.net.http"><code>BodySubscriber</code></a><code>&lt;Path&gt;</code> obtained from <a href="httpresponse.bodysubscribers#ofFile(java.nio.file.Path,java.nio.file.OpenOption...)"><code>BodySubscribers.ofFile(Path,OpenOption...)</code></a>. <p> When the <code>HttpResponse</code> object is returned, the body has been completely written to the file, and <a href="httpresponse#body()"><code>HttpResponse.body()</code></a> returns a reference to its <a href="../../../../java.base/java/nio/file/path.html" title="interface in java.nio.file"><code>Path</code></a>. </p>
<p> In the case of the default file system provider, security manager permission checks are performed in this factory method, when the <code>BodyHandler</code> is created. Otherwise, <a href="../../../../java.base/java/nio/channels/filechannel.html#open(java.nio.file.Path,java.nio.file.OpenOption...)">permission checks</a> may be performed asynchronously against the caller's context at file access time. Care must be taken that the <code>BodyHandler</code> is not shared with untrusted code.</p>
</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>file</code> - the file to store the body in</dd> <dd>
<code>openOptions</code> - any options to use when opening/creating the file</dd> <dt>Returns:</dt> <dd>a response body handler</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../../java.base/java/lang/illegalargumentexception.html" title="class in java.lang">IllegalArgumentException</a></code> - if an invalid set of open options are specified</dd> <dd>
<code><a href="../../../../java.base/java/lang/securityexception.html" title="class in java.lang">SecurityException</a></code> - in the case of the default file system provider, and a security manager is installed, <a href="../../../../java.base/java/lang/securitymanager.html#checkWrite(java.lang.String)"><code>checkWrite</code></a> is invoked to check write access to the given file</dd> </dl> </section><section class="detail" id="ofFile(java.nio.file.Path)"> <h3>ofFile</h3> <pre class="lang-java" data-language="java">public static HttpResponse.BodyHandler&lt;Path&gt; ofFile(Path file)</pre> <div class="block">Returns a <code>BodyHandler&lt;Path&gt;</code> that returns a <a href="httpresponse.bodysubscriber" title="interface in java.net.http"><code>BodySubscriber</code></a><code>&lt;Path&gt;</code>. <p> Equivalent to: <code>ofFile(file, CREATE, WRITE)</code> </p>
<p> In the case of the default file system provider, security manager permission checks are performed in this factory method, when the <code>BodyHandler</code> is created. Otherwise, <a href="../../../../java.base/java/nio/channels/filechannel.html#open(java.nio.file.Path,java.nio.file.OpenOption...)">permission checks</a> may be performed asynchronously against the caller's context at file access time. Care must be taken that the <code>BodyHandler</code> is not shared with untrusted code.</p>
</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>file</code> - the file to store the body in</dd> <dt>Returns:</dt> <dd>a response body handler</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../../java.base/java/lang/securityexception.html" title="class in java.lang">SecurityException</a></code> - in the case of the default file system provider, and a security manager is installed, <a href="../../../../java.base/java/lang/securitymanager.html#checkWrite(java.lang.String)"><code>checkWrite</code></a> is invoked to check write access to the given file</dd> </dl> </section><section class="detail" id="ofFileDownload(java.nio.file.Path,java.nio.file.OpenOption...)"> <h3>ofFileDownload</h3> <pre class="lang-java" data-language="java">public static HttpResponse.BodyHandler&lt;Path&gt; ofFileDownload(Path directory, OpenOption... openOptions)</pre> <div class="block">Returns a <code>BodyHandler&lt;Path&gt;</code> that returns a <a href="httpresponse.bodysubscriber" title="interface in java.net.http"><code>BodySubscriber</code></a>&lt;<a href="../../../../java.base/java/nio/file/path.html" title="interface in java.nio.file"><code>Path</code></a>&gt; where the download directory is specified, but the filename is obtained from the <code>Content-Disposition</code> response header. The <code>Content-Disposition</code> header must specify the <i>attachment</i> type and must also contain a <i>filename</i> parameter. If the filename specifies multiple path components only the final component is used as the filename (with the given directory name). <p> When the <code>HttpResponse</code> object is returned, the body has been completely written to the file and <a href="httpresponse#body()"><code>HttpResponse.body()</code></a> returns a <code>Path</code> object for the file. The returned <code>Path</code> is the combination of the supplied directory name and the file name supplied by the server. If the destination directory does not exist or cannot be written to, then the response will fail with an <a href="../../../../java.base/java/io/ioexception.html" title="class in java.io"><code>IOException</code></a>. </p>
<p> Security manager permission checks are performed in this factory method, when the <code>BodyHandler</code> is created. Care must be taken that the <code>BodyHandler</code> is not shared with untrusted code.</p>
</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>directory</code> - the directory to store the file in</dd> <dd>
<code>openOptions</code> - open options used when opening the file</dd> <dt>Returns:</dt> <dd>a response body handler</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../../java.base/java/lang/illegalargumentexception.html" title="class in java.lang">IllegalArgumentException</a></code> - if the given path does not exist, is not of the default file system, is not a directory, is not writable, or if an invalid set of open options are specified</dd> <dd>
<code><a href="../../../../java.base/java/lang/securityexception.html" title="class in java.lang">SecurityException</a></code> - in the case of the default file system provider and a security manager has been installed, and it denies <a href="../../../../java.base/java/lang/securitymanager.html#checkRead(java.lang.String)">read access</a> to the directory, or it denies <a href="../../../../java.base/java/lang/securitymanager.html#checkWrite(java.lang.String)">write access</a> to the directory, or it denies <a href="../../../../java.base/java/lang/securitymanager.html#checkWrite(java.lang.String)">write access</a> to the files within the directory.</dd> </dl> </section><section class="detail" id="ofInputStream()"> <h3>ofInputStream</h3> <pre class="lang-java" data-language="java">public static HttpResponse.BodyHandler&lt;InputStream&gt; ofInputStream()</pre> <div class="block">Returns a <code>BodyHandler&lt;InputStream&gt;</code> that returns a <a href="httpresponse.bodysubscriber" title="interface in java.net.http"><code>BodySubscriber</code></a><code>&lt;InputStream&gt;</code> obtained from <a href="httpresponse.bodysubscribers#ofInputStream()"><code>BodySubscribers.ofInputStream</code></a>. <p> When the <code>HttpResponse</code> object is returned, the response headers will have been completely read, but the body may not have been fully received yet. The <a href="httpresponse#body()"><code>HttpResponse.body()</code></a> method returns an <a href="../../../../java.base/java/io/inputstream.html" title="class in java.io"><code>InputStream</code></a> from which the body can be read as it is received.</p>
</div> <dl class="notes"> <dt>API Note:</dt> <dd>See <a href="httpresponse.bodysubscribers#ofInputStream()"><code>HttpResponse.BodySubscribers.ofInputStream()</code></a> for more information.</dd> <dt>Returns:</dt> <dd>a response body handler</dd> </dl> </section><section class="detail" id="ofLines()"> <h3>ofLines</h3> <pre class="lang-java" data-language="java">public static HttpResponse.BodyHandler&lt;Stream&lt;String&gt;&gt; ofLines()</pre> <div class="block">Returns a <code>BodyHandler&lt;Stream&lt;String&gt;&gt;</code> that returns a <a href="httpresponse.bodysubscriber" title="interface in java.net.http"><code>BodySubscriber</code></a><code>&lt;Stream&lt;String&gt;&gt;</code> obtained from <a href="httpresponse.bodysubscribers#ofLines(java.nio.charset.Charset)"><code>BodySubscribers.ofLines(charset)</code></a>. The <a href="../../../../java.base/java/nio/charset/charset.html" title="class in java.nio.charset"><code>charset</code></a> used to decode the response body bytes is obtained from the HTTP response headers as specified by <a href="#ofString()"><code>ofString()</code></a>, and lines are delimited in the manner of <a href="../../../../java.base/java/io/bufferedreader.html#readLine()"><code>BufferedReader.readLine()</code></a>. <p> When the <code>HttpResponse</code> object is returned, the body may not have been completely received.</p>
</div> <dl class="notes"> <dt>Returns:</dt> <dd>a response body handler</dd> </dl> </section><section class="detail" id="ofByteArrayConsumer(java.util.function.Consumer)"> <h3>ofByteArrayConsumer</h3> <pre class="lang-java" data-language="java">public static HttpResponse.BodyHandler&lt;Void&gt; ofByteArrayConsumer(Consumer&lt;Optional&lt;byte[]&gt;&gt; consumer)</pre> <div class="block">Returns a <code>BodyHandler&lt;Void&gt;</code> that returns a <a href="httpresponse.bodysubscriber" title="interface in java.net.http"><code>BodySubscriber</code></a><code>&lt;Void&gt;</code> obtained from <a href="httpresponse.bodysubscribers#ofByteArrayConsumer(java.util.function.Consumer)"><code>BodySubscribers.ofByteArrayConsumer(Consumer)</code></a>. <p> When the <code>HttpResponse</code> object is returned, the body has been completely written to the consumer.</p>
</div> <dl class="notes"> <dt>API Note:</dt> <dd>The subscriber returned by this handler is not flow controlled. Therefore, the supplied consumer must be able to process whatever amount of data is delivered in a timely fashion.</dd> <dt>Parameters:</dt> <dd>
<code>consumer</code> - a Consumer to accept the response body</dd> <dt>Returns:</dt> <dd>a response body handler</dd> </dl> </section><section class="detail" id="ofByteArray()"> <h3>ofByteArray</h3> <pre class="lang-java" data-language="java">public static HttpResponse.BodyHandler&lt;byte[]&gt; ofByteArray()</pre> <div class="block">Returns a <code>BodyHandler&lt;byte[]&gt;</code> that returns a <a href="httpresponse.bodysubscriber" title="interface in java.net.http"><code>BodySubscriber</code></a><code>&lt;byte[]&gt;</code> obtained from <a href="httpresponse.bodysubscribers#ofByteArray()"><code>BodySubscribers.ofByteArray()</code></a>. <p> When the <code>HttpResponse</code> object is returned, the body has been completely written to the byte array.</p>
</div> <dl class="notes"> <dt>Returns:</dt> <dd>a response body handler</dd> </dl> </section><section class="detail" id="ofString()"> <h3>ofString</h3> <pre class="lang-java" data-language="java">public static HttpResponse.BodyHandler&lt;String&gt; ofString()</pre> <div class="block">Returns a <code>BodyHandler&lt;String&gt;</code> that returns a <a href="httpresponse.bodysubscriber" title="interface in java.net.http"><code>BodySubscriber</code></a><code>&lt;String&gt;</code> obtained from <a href="httpresponse.bodysubscribers#ofString(java.nio.charset.Charset)"><code>BodySubscribers.ofString(Charset)</code></a>. The body is decoded using the character set specified in the <code>Content-Type</code> response header. If there is no such header, or the character set is not supported, then <a href="../../../../java.base/java/nio/charset/standardcharsets.html#UTF_8"><code>UTF_8</code></a> is used. <p> When the <code>HttpResponse</code> object is returned, the body has been completely written to the string.</p>
</div> <dl class="notes"> <dt>Returns:</dt> <dd>a response body handler</dd> </dl> </section><section class="detail" id="ofPublisher()"> <h3>ofPublisher</h3> <pre class="lang-java" data-language="java">public static HttpResponse.BodyHandler&lt;Flow.Publisher&lt;List&lt;ByteBuffer&gt;&gt;&gt; ofPublisher()</pre> <div class="block">Returns a <code>BodyHandler&lt;Publisher&lt;List&lt;ByteBuffer&gt;&gt;&gt;</code> that creates a <a href="httpresponse.bodysubscriber" title="interface in java.net.http"><code>BodySubscriber</code></a><code>&lt;Publisher&lt;List&lt;ByteBuffer&gt;&gt;&gt;</code> obtained from <a href="httpresponse.bodysubscribers#ofPublisher()"><code>BodySubscribers.ofPublisher()</code></a>. <p> When the <code>HttpResponse</code> object is returned, the response headers will have been completely read, but the body may not have been fully received yet. The <a href="httpresponse#body()"><code>HttpResponse.body()</code></a> method returns a <a href="../../../../java.base/java/util/concurrent/flow.publisher.html" title="interface in java.util.concurrent"><code>Publisher</code></a><code>&lt;List&lt;ByteBuffer&gt;&gt;</code> from which the body response bytes can be obtained as they are received. The publisher can and must be subscribed to only once.</p>
</div> <dl class="notes"> <dt>API Note:</dt> <dd>See <a href="httpresponse.bodysubscribers#ofPublisher()"><code>HttpResponse.BodySubscribers.ofPublisher()</code></a> for more information.</dd> <dt>Returns:</dt> <dd>a response body handler</dd> </dl> </section><section class="detail" id="buffering(java.net.http.HttpResponse.BodyHandler,int)"> <h3>buffering</h3> <pre class="lang-java" data-language="java">public static &lt;T&gt; HttpResponse.BodyHandler&lt;T&gt; buffering(HttpResponse.BodyHandler&lt;T&gt; downstreamHandler, int bufferSize)</pre> <div class="block">Returns a <code>BodyHandler</code> which, when invoked, returns a <a href="httpresponse.bodysubscribers#buffering(java.net.http.HttpResponse.BodySubscriber,int)">buffering BodySubscriber</a> that buffers data before delivering it to the downstream subscriber. These <code>BodySubscriber</code> instances are created by calling <a href="httpresponse.bodysubscribers#buffering(java.net.http.HttpResponse.BodySubscriber,int)"><code>BodySubscribers.buffering</code></a> with a subscriber obtained from the given downstream handler and the <code>bufferSize</code> parameter.</div> <dl class="notes"> <dt>Type Parameters:</dt> <dd>
<code>T</code> - the response body type</dd> <dt>Parameters:</dt> <dd>
<code>downstreamHandler</code> - the downstream handler</dd> <dd>
<code>bufferSize</code> - the buffer size parameter passed to <a href="httpresponse.bodysubscribers#buffering(java.net.http.HttpResponse.BodySubscriber,int)"><code>BodySubscribers.buffering</code></a>
</dd> <dt>Returns:</dt> <dd>a body handler</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../../java.base/java/lang/illegalargumentexception.html" title="class in java.lang">IllegalArgumentException</a></code> - if <code>bufferSize &lt;= 0</code>
</dd> </dl> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1993, 2023, Oracle and/or its affiliates. All rights reserved.<br>Documentation extracted from Debian's OpenJDK Development Kit package.<br>Licensed under the GNU General Public License, version 2, with the Classpath Exception.<br>Various third party code in OpenJDK is licensed under different licenses (see Debian package).<br>Java and OpenJDK are trademarks or registered trademarks of Oracle and/or its affiliates.<br>
    <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.net.http/java/net/http/HttpResponse.BodyHandlers.html" class="_attribution-link">https://docs.oracle.com/en/java/javase/21/docs/api/java.net.http/java/net/http/HttpResponse.BodyHandlers.html</a>
  </p>
</div>
