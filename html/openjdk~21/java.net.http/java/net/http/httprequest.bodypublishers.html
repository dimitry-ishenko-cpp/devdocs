<h1 title="Class HttpRequest.BodyPublishers" class="title">Class HttpRequest.BodyPublishers</h1> <div class="inheritance" title="Inheritance Tree">
<a href="../../../../java.base/java/lang/object.html" title="class in java.lang">java.lang.Object</a> <div class="inheritance">java.net.http.HttpRequest.BodyPublishers</div> </div> <section class="class-description" id="class-description"> <dl class="notes"> <dt>Enclosing class:</dt> <dd><code><a href="httprequest" title="class in java.net.http">HttpRequest</a></code></dd> </dl>  <pre class="lang-java" data-language="java">public static class HttpRequest.BodyPublishers extends Object</pre> <div class="block">Implementations of <a href="httprequest.bodypublisher" title="interface in java.net.http"><code>BodyPublisher</code></a> that implement various useful publishers, such as publishing the request body from a String, or from a file. <p> The following are examples of using the predefined body publishers to convert common high-level Java objects into a flow of data suitable for sending as a request body: </p>
<div class="snippet-container"> <pre class="lang-java" data-language="java"><code>// Request body from a String
HttpRequest request = HttpRequest.newBuilder()
     .uri(URI.create("https://foo.com/"))
     .header("Content-Type", "text/plain; charset=UTF-8")
     .POST(BodyPublishers.ofString("some body text"))
     .build();</code></pre> </div> <div class="snippet-container"> <pre class="lang-java" data-language="java"><code>// Request body from a File
HttpRequest request = HttpRequest.newBuilder()
     .uri(URI.create("https://foo.com/"))
     .header("Content-Type", "application/json")
     .POST(BodyPublishers.ofFile(Paths.get("file.json")))
     .build();</code></pre> </div> <div class="snippet-container"> <pre class="lang-java" data-language="java"><code>// Request body from a byte array
HttpRequest request = HttpRequest.newBuilder()
     .uri(URI.create("https://foo.com/"))
     .POST(BodyPublishers.ofByteArray(new byte[] { ... }))
     .build();</code></pre> </div> </div> <dl class="notes"> <dt>Since:</dt> <dd>11</dd> </dl> </section> <section class="summary"> <section class="method-summary" id="method-summary"> <h2>Method Summary</h2> <div id="method-summary-table">  <div id="method-summary-table.tabpanel" role="tabpanel"> <table class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">                                     <tr>
<th>Modifier and Type</th>
<th>Method</th>
<th>Description</th>
</tr>
<tr>
<td><code>static <a href="httprequest.bodypublisher" title="interface in java.net.http">HttpRequest.BodyPublisher</a></code></td>
<td><code><a href="#concat(java.net.http.HttpRequest.BodyPublisher...)" class="member-name-link">concat</a><wbr>(<a href="httprequest.bodypublisher" title="interface in java.net.http">HttpRequest.BodyPublisher</a>... publishers)</wbr></code></td>
<td> <div class="block">Returns a <code>BodyPublisher</code> that publishes a request body consisting of the concatenation of the request bodies published by a sequence of publishers.</div> </td>
</tr>
<tr>
<td><code>static <a href="httprequest.bodypublisher" title="interface in java.net.http">HttpRequest.BodyPublisher</a></code></td>
<td><code><a href="#fromPublisher(java.util.concurrent.Flow.Publisher)" class="member-name-link">fromPublisher</a><wbr>(<a href="../../../../java.base/java/util/concurrent/flow.publisher.html" title="interface in java.util.concurrent">Flow.Publisher</a>&lt;? extends <a href="../../../../java.base/java/nio/bytebuffer.html" title="class in java.nio">ByteBuffer</a>&gt; publisher)</wbr></code></td>
<td> <div class="block">Returns a request body publisher whose body is retrieved from the given <code>Flow.Publisher</code>.</div> </td>
</tr>
<tr>
<td><code>static <a href="httprequest.bodypublisher" title="interface in java.net.http">HttpRequest.BodyPublisher</a></code></td>
<td><code><a href="#fromPublisher(java.util.concurrent.Flow.Publisher,long)" class="member-name-link">fromPublisher</a><wbr>(<a href="../../../../java.base/java/util/concurrent/flow.publisher.html" title="interface in java.util.concurrent">Flow.Publisher</a>&lt;? extends <a href="../../../../java.base/java/nio/bytebuffer.html" title="class in java.nio">ByteBuffer</a>&gt; publisher,
 long contentLength)</wbr></code></td>
<td> <div class="block">Returns a request body publisher whose body is retrieved from the given <code>Flow.Publisher</code>.</div> </td>
</tr>
<tr>
<td><code>static <a href="httprequest.bodypublisher" title="interface in java.net.http">HttpRequest.BodyPublisher</a></code></td>
<td><code><a href="#noBody()" class="member-name-link">noBody</a>()</code></td>
<td> <div class="block">A request body publisher which sends no request body.</div> </td>
</tr>
<tr>
<td><code>static <a href="httprequest.bodypublisher" title="interface in java.net.http">HttpRequest.BodyPublisher</a></code></td>
<td><code><a href="#ofByteArray(byte%5B%5D)" class="member-name-link">ofByteArray</a><wbr>(byte[] buf)</wbr></code></td>
<td> <div class="block">Returns a request body publisher whose body is the given byte array.</div> </td>
</tr>
<tr>
<td><code>static <a href="httprequest.bodypublisher" title="interface in java.net.http">HttpRequest.BodyPublisher</a></code></td>
<td><code><a href="#ofByteArray(byte%5B%5D,int,int)" class="member-name-link">ofByteArray</a><wbr>(byte[] buf,
 int offset,
 int length)</wbr></code></td>
<td> <div class="block">Returns a request body publisher whose body is the content of the given byte array of <code>length</code> bytes starting from the specified <code>offset</code>.</div> </td>
</tr>
<tr>
<td><code>static <a href="httprequest.bodypublisher" title="interface in java.net.http">HttpRequest.BodyPublisher</a></code></td>
<td><code><a href="#ofByteArrays(java.lang.Iterable)" class="member-name-link">ofByteArrays</a><wbr>(<a href="../../../../java.base/java/lang/iterable.html" title="interface in java.lang">Iterable</a>&lt;byte[]&gt; iter)</wbr></code></td>
<td> <div class="block">A request body publisher that takes data from an <code>Iterable</code> of byte arrays.</div> </td>
</tr>
<tr>
<td><code>static <a href="httprequest.bodypublisher" title="interface in java.net.http">HttpRequest.BodyPublisher</a></code></td>
<td><code><a href="#ofFile(java.nio.file.Path)" class="member-name-link">ofFile</a><wbr>(<a href="../../../../java.base/java/nio/file/path.html" title="interface in java.nio.file">Path</a> path)</wbr></code></td>
<td> <div class="block">A request body publisher that takes data from the contents of a File.</div> </td>
</tr>
<tr>
<td><code>static <a href="httprequest.bodypublisher" title="interface in java.net.http">HttpRequest.BodyPublisher</a></code></td>
<td><code><a href="#ofInputStream(java.util.function.Supplier)" class="member-name-link">ofInputStream</a><wbr>(<a href="../../../../java.base/java/util/function/supplier.html" title="interface in java.util.function">Supplier</a>&lt;? extends <a href="../../../../java.base/java/io/inputstream.html" title="class in java.io">InputStream</a>&gt; streamSupplier)</wbr></code></td>
<td> <div class="block">A request body publisher that reads its data from an <a href="../../../../java.base/java/io/inputstream.html" title="class in java.io"><code>InputStream</code></a>.</div> </td>
</tr>
<tr>
<td><code>static <a href="httprequest.bodypublisher" title="interface in java.net.http">HttpRequest.BodyPublisher</a></code></td>
<td><code><a href="#ofString(java.lang.String)" class="member-name-link">ofString</a><wbr>(<a href="../../../../java.base/java/lang/string.html" title="class in java.lang">String</a> body)</wbr></code></td>
<td> <div class="block">Returns a request body publisher whose body is the given <code>
 String</code>, converted using the <a href="../../../../java.base/java/nio/charset/standardcharsets.html#UTF_8"><code>UTF_8</code></a> character set.</div> </td>
</tr>
<tr>
<td><code>static <a href="httprequest.bodypublisher" title="interface in java.net.http">HttpRequest.BodyPublisher</a></code></td>
<td><code><a href="#ofString(java.lang.String,java.nio.charset.Charset)" class="member-name-link">ofString</a><wbr>(<a href="../../../../java.base/java/lang/string.html" title="class in java.lang">String</a> s,
 <a href="../../../../java.base/java/nio/charset/charset.html" title="class in java.nio.charset">Charset</a> charset)</wbr></code></td>
<td> <div class="block">Returns a request body publisher whose body is the given <code>
 String</code>, converted using the given character set.</div> </td>
</tr>
</table> </div> </div> <div class="inherited-list"> <h3 id="methods-inherited-from-class-java.lang.Object">Methods declared in class java.lang.<a href="../../../../java.base/java/lang/object.html" title="class in java.lang">Object</a>
</h3> <code><a href="../../../../java.base/java/lang/object.html#clone()">clone</a>, <a href="../../../../java.base/java/lang/object.html#equals(java.lang.Object)">equals</a>, <a href="../../../../java.base/java/lang/object.html#finalize()">finalize</a>, <a href="../../../../java.base/java/lang/object.html#getClass()">getClass</a>, <a href="../../../../java.base/java/lang/object.html#hashCode()">hashCode</a>, <a href="../../../../java.base/java/lang/object.html#notify()">notify</a>, <a href="../../../../java.base/java/lang/object.html#notifyAll()">notifyAll</a>, <a href="../../../../java.base/java/lang/object.html#toString()">toString</a>, <a href="../../../../java.base/java/lang/object.html#wait()">wait</a>, <a href="../../../../java.base/java/lang/object.html#wait(long)">wait</a>, <a href="../../../../java.base/java/lang/object.html#wait(long,int)">wait</a></code>
</div> </section> </section> <section class="details"> <section class="method-details" id="method-detail"> <h2>Method Details</h2>  </section><section class="detail" id="fromPublisher(java.util.concurrent.Flow.Publisher)"> <h3>fromPublisher</h3> <pre class="lang-java" data-language="java">public static HttpRequest.BodyPublisher fromPublisher(Flow.Publisher&lt;? extends ByteBuffer&gt; publisher)</pre> <div class="block">Returns a request body publisher whose body is retrieved from the given <code>Flow.Publisher</code>. The returned request body publisher has an unknown content length.</div> <dl class="notes"> <dt>API Note:</dt> <dd>This method can be used as an adapter between <code>
 BodyPublisher</code> and <code>Flow.Publisher</code>, where the amount of request body that the publisher will publish is unknown.</dd> <dt>Parameters:</dt> <dd>
<code>publisher</code> - the publisher responsible for publishing the body</dd> <dt>Returns:</dt> <dd>a BodyPublisher</dd> </dl> </section><section class="detail" id="fromPublisher(java.util.concurrent.Flow.Publisher,long)"> <h3>fromPublisher</h3> <pre class="lang-java" data-language="java">public static HttpRequest.BodyPublisher fromPublisher(Flow.Publisher&lt;? extends ByteBuffer&gt; publisher, long contentLength)</pre> <div class="block">Returns a request body publisher whose body is retrieved from the given <code>Flow.Publisher</code>. The returned request body publisher has the given content length. <p> The given <code>contentLength</code> is a positive number, that represents the exact amount of bytes the <code>publisher</code> must publish.</p>
</div> <dl class="notes"> <dt>API Note:</dt> <dd>This method can be used as an adapter between <code>
 BodyPublisher</code> and <code>Flow.Publisher</code>, where the amount of request body that the publisher will publish is known.</dd> <dt>Parameters:</dt> <dd>
<code>publisher</code> - the publisher responsible for publishing the body</dd> <dd>
<code>contentLength</code> - a positive number representing the exact amount of bytes the publisher will publish</dd> <dt>Returns:</dt> <dd>a BodyPublisher</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../../java.base/java/lang/illegalargumentexception.html" title="class in java.lang">IllegalArgumentException</a></code> - if the content length is non-positive</dd> </dl> </section><section class="detail" id="ofString(java.lang.String)"> <h3>ofString</h3> <pre class="lang-java" data-language="java">public static HttpRequest.BodyPublisher ofString(String body)</pre> <div class="block">Returns a request body publisher whose body is the given <code>
 String</code>, converted using the <a href="../../../../java.base/java/nio/charset/standardcharsets.html#UTF_8"><code>UTF_8</code></a> character set.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>body</code> - the String containing the body</dd> <dt>Returns:</dt> <dd>a BodyPublisher</dd> </dl> </section><section class="detail" id="ofString(java.lang.String,java.nio.charset.Charset)"> <h3>ofString</h3> <pre class="lang-java" data-language="java">public static HttpRequest.BodyPublisher ofString(String s, Charset charset)</pre> <div class="block">Returns a request body publisher whose body is the given <code>
 String</code>, converted using the given character set.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>s</code> - the String containing the body</dd> <dd>
<code>charset</code> - the character set to convert the string to bytes</dd> <dt>Returns:</dt> <dd>a BodyPublisher</dd> </dl> </section><section class="detail" id="ofInputStream(java.util.function.Supplier)"> <h3>ofInputStream</h3> <pre class="lang-java" data-language="java">public static HttpRequest.BodyPublisher ofInputStream(Supplier&lt;? extends InputStream&gt; streamSupplier)</pre> <div class="block">A request body publisher that reads its data from an <a href="../../../../java.base/java/io/inputstream.html" title="class in java.io"><code>InputStream</code></a>. A <a href="../../../../java.base/java/util/function/supplier.html" title="interface in java.util.function"><code>Supplier</code></a> of <code>InputStream</code> is used in case the request needs to be repeated, as the content is not buffered. The <code>Supplier</code> may return <code>null</code> on subsequent attempts, in which case the request fails.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>streamSupplier</code> - a Supplier of open InputStreams</dd> <dt>Returns:</dt> <dd>a BodyPublisher</dd> </dl> </section><section class="detail" id="ofByteArray(byte[])"> <h3>ofByteArray</h3> <pre class="lang-java" data-language="java">public static HttpRequest.BodyPublisher ofByteArray(byte[] buf)</pre> <div class="block">Returns a request body publisher whose body is the given byte array.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>buf</code> - the byte array containing the body</dd> <dt>Returns:</dt> <dd>a BodyPublisher</dd> </dl> </section><section class="detail" id="ofByteArray(byte[],int,int)"> <h3>ofByteArray</h3> <pre class="lang-java" data-language="java">public static HttpRequest.BodyPublisher ofByteArray(byte[] buf, int offset, int length)</pre> <div class="block">Returns a request body publisher whose body is the content of the given byte array of <code>length</code> bytes starting from the specified <code>offset</code>.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>buf</code> - the byte array containing the body</dd> <dd>
<code>offset</code> - the offset of the first byte</dd> <dd>
<code>length</code> - the number of bytes to use</dd> <dt>Returns:</dt> <dd>a BodyPublisher</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../../java.base/java/lang/indexoutofboundsexception.html" title="class in java.lang">IndexOutOfBoundsException</a></code> - if the sub-range is defined to be out of bounds</dd> </dl> </section><section class="detail" id="ofFile(java.nio.file.Path)"> <h3>ofFile</h3> <pre class="lang-java" data-language="java">public static HttpRequest.BodyPublisher ofFile(Path path) throws FileNotFoundException</pre> <div class="block">A request body publisher that takes data from the contents of a File. <p> Security manager permission checks are performed in this factory method, when the <code>BodyPublisher</code> is created. Care must be taken that the <code>BodyPublisher</code> is not shared with untrusted code.</p>
</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>path</code> - the path to the file containing the body</dd> <dt>Returns:</dt> <dd>a BodyPublisher</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../../java.base/java/io/filenotfoundexception.html" title="class in java.io">FileNotFoundException</a></code> - if the path is not found</dd> <dd>
<code><a href="../../../../java.base/java/lang/securityexception.html" title="class in java.lang">SecurityException</a></code> - if <a href="../../../../java.base/java/nio/file/files.html#newInputStream(java.nio.file.Path,java.nio.file.OpenOption...)">opening the file for reading</a> is denied: in the case of the system-default file system provider, and a security manager is installed, <a href="../../../../java.base/java/lang/securitymanager.html#checkRead(java.lang.String)"><code>checkRead</code></a> is invoked to check read access to the given file</dd> </dl> </section><section class="detail" id="ofByteArrays(java.lang.Iterable)"> <h3>ofByteArrays</h3> <pre class="lang-java" data-language="java">public static HttpRequest.BodyPublisher ofByteArrays(Iterable&lt;byte[]&gt; iter)</pre> <div class="block">A request body publisher that takes data from an <code>Iterable</code> of byte arrays. An <a href="../../../../java.base/java/lang/iterable.html" title="interface in java.lang"><code>Iterable</code></a> is provided which supplies <a href="../../../../java.base/java/util/iterator.html" title="interface in java.util"><code>Iterator</code></a> instances. Each attempt to send the request results in one invocation of the <code>Iterable</code>.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>iter</code> - an Iterable of byte arrays</dd> <dt>Returns:</dt> <dd>a BodyPublisher</dd> </dl> </section><section class="detail" id="noBody()"> <h3>noBody</h3> <pre class="lang-java" data-language="java">public static HttpRequest.BodyPublisher noBody()</pre> <div class="block">A request body publisher which sends no request body.</div> <dl class="notes"> <dt>Returns:</dt> <dd>a BodyPublisher which completes immediately and sends no request body.</dd> </dl> </section><section class="detail" id="concat(java.net.http.HttpRequest.BodyPublisher...)"> <h3>concat</h3> <pre class="lang-java" data-language="java">public static HttpRequest.BodyPublisher concat(HttpRequest.BodyPublisher... publishers)</pre> <div class="block">Returns a <code>BodyPublisher</code> that publishes a request body consisting of the concatenation of the request bodies published by a sequence of publishers. <p> If the sequence is empty an <a href="#noBody()">empty</a> publisher is returned. Otherwise, if the sequence contains a single element, that publisher is returned. Otherwise a <em>concatenation publisher</em> is returned. </p>
<p> The request body published by a <em>concatenation publisher</em> is logically equivalent to the request body that would have been published by concatenating all the bytes of each publisher in sequence. </p>
<p> Each publisher is lazily subscribed to in turn, until all the body bytes are published, an error occurs, or the concatenation publisher's subscription is cancelled. The concatenation publisher may be subscribed to more than once, which in turn may result in the publishers in the sequence being subscribed to more than once. </p>
<p> The concatenation publisher has a known content length only if all publishers in the sequence have a known content length. The <a href="httprequest.bodypublisher#contentLength()"><code>contentLength</code></a> reported by the concatenation publisher is computed as follows: </p>
<ul> <li> If any of the publishers reports an <em><a href="httprequest.bodypublisher#contentLength()">unknown</a></em> content length, or if the sum of the known content lengths would exceed <a href="../../../../java.base/java/lang/long.html#MAX_VALUE"><code>Long.MAX_VALUE</code></a>, the resulting content length is <em>unknown</em>.</li> <li> Otherwise, the resulting content length is the sum of the known content lengths, a number between <code>0</code> and <a href="../../../../java.base/java/lang/long.html#MAX_VALUE"><code>Long.MAX_VALUE</code></a>, inclusive.</li> </ul>
</div> <dl class="notes"> <dt>Implementation Note:</dt> <dd>If the concatenation publisher's subscription is <a href="../../../../java.base/java/util/concurrent/flow.subscription.html#cancel()">cancelled</a>, or an error occurs while publishing the bytes, not all publishers in the sequence may be subscribed to.</dd> <dt>Parameters:</dt> <dd>
<code>publishers</code> - a sequence of publishers.</dd> <dt>Returns:</dt> <dd>An aggregate publisher that publishes a request body logically equivalent to the concatenation of all bytes published by each publisher in the sequence.</dd> <dt>Since:</dt> <dd>16</dd> </dl> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1993, 2023, Oracle and/or its affiliates. All rights reserved.<br>Documentation extracted from Debian's OpenJDK Development Kit package.<br>Licensed under the GNU General Public License, version 2, with the Classpath Exception.<br>Various third party code in OpenJDK is licensed under different licenses (see Debian package).<br>Java and OpenJDK are trademarks or registered trademarks of Oracle and/or its affiliates.<br>
    <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.net.http/java/net/http/HttpRequest.BodyPublishers.html" class="_attribution-link">https://docs.oracle.com/en/java/javase/21/docs/api/java.net.http/java/net/http/HttpRequest.BodyPublishers.html</a>
  </p>
</div>
