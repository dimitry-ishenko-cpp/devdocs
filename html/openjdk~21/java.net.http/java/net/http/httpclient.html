<h1 title="Class HttpClient" class="title">Class HttpClient</h1> <div class="inheritance" title="Inheritance Tree">
<a href="../../../../java.base/java/lang/object.html" title="class in java.lang">java.lang.Object</a> <div class="inheritance">java.net.http.HttpClient</div> </div> <section class="class-description" id="class-description"> <dl class="notes"> <dt>All Implemented Interfaces:</dt> <dd><code><a href="../../../../java.base/java/lang/autocloseable.html" title="interface in java.lang">AutoCloseable</a></code></dd> </dl>  <pre class="lang-java" data-language="java">public abstract class HttpClient extends Object implements AutoCloseable</pre> <div class="block">An HTTP Client. <p> An <code>HttpClient</code> can be used to send <a href="httprequest" title="class in java.net.http">requests</a> and retrieve their <a href="httpresponse" title="interface in java.net.http">responses</a>. An <code>
 HttpClient</code> is created through a <a href="httpclient.builder" title="interface in java.net.http"><code>builder</code></a>. The <a href="#newBuilder()"><code>newBuilder</code></a> method returns a builder that creates instances of the default <code>HttpClient</code> implementation. The builder can be used to configure per-client state, like: the preferred protocol version ( HTTP/1.1 or HTTP/2 ), whether to follow redirects, a proxy, an authenticator, etc. Once built, an <code>HttpClient</code> is immutable, and can be used to send multiple requests. </p>
<p> An <code>HttpClient</code> provides configuration information, and resource sharing, for all requests sent through it. An <code>HttpClient</code> instance typically manages its own pools of connections, which it may then reuse as and when necessary. Connection pools are typically not shared between <code>HttpClient</code> instances. Creating a new client for each operation, though possible, will usually prevent reusing such connections. </p>
<p> A <a href="httpresponse.bodyhandler" title="interface in java.net.http"><code>BodyHandler</code></a> must be supplied for each <a href="httprequest" title="class in java.net.http"><code>HttpRequest</code></a> sent. The <code>BodyHandler</code> determines how to handle the response body, if any. Once an <a href="httpresponse" title="interface in java.net.http"><code>HttpResponse</code></a> is received, the headers, response code, and body (typically) are available. Whether the response body bytes have been read or not depends on the type, <code>T</code>, of the response body. </p>
<p> Requests can be sent either synchronously or asynchronously: </p>
<ul> <li>
<a href="#send(java.net.http.HttpRequest,java.net.http.HttpResponse.BodyHandler)"><code>send(HttpRequest, BodyHandler)</code></a> blocks until the request has been sent and the response has been received.</li> <li>
<a href="#sendAsync(java.net.http.HttpRequest,java.net.http.HttpResponse.BodyHandler)"><code>sendAsync(HttpRequest, BodyHandler)</code></a> sends the request and receives the response asynchronously. The <code>sendAsync</code> method returns immediately with a <a href="../../../../java.base/java/util/concurrent/completablefuture.html" title="class in java.util.concurrent"><code>CompletableFuture</code></a>&lt;<a href="httpresponse" title="interface in java.net.http"><code>HttpResponse</code></a>&gt;. The <code>
     CompletableFuture</code> completes when the response becomes available. The returned <code>CompletableFuture</code> can be combined in different ways to declare dependencies among several asynchronous tasks.</li> </ul> <p><b>Synchronous Example</b> </p>
<div class="snippet-container"> <pre class="lang-java" data-language="java"><code>HttpClient client = HttpClient.newBuilder()
     .version(Version.HTTP_1_1)
     .followRedirects(Redirect.NORMAL)
     .connectTimeout(Duration.ofSeconds(20))
     .proxy(ProxySelector.of(new InetSocketAddress("proxy.example.com", 80)))
     .authenticator(Authenticator.getDefault())
     .build();
HttpResponse&lt;String&gt; response = client.send(request, BodyHandlers.ofString());
System.out.println(response.statusCode());
System.out.println(response.body());</code></pre> </div> <p><b>Asynchronous Example</b> </p>
<div class="snippet-container"> <pre class="lang-java" data-language="java"><code> HttpRequest request = HttpRequest.newBuilder()
     .uri(URI.create("https://foo.com/"))
     .timeout(Duration.ofMinutes(2))
     .header("Content-Type", "application/json")
     .POST(BodyPublishers.ofFile(Paths.get("file.json")))
     .build();
client.sendAsync(request, BodyHandlers.ofString())
     .thenApply(HttpResponse::body)
     .thenAccept(System.out::println);</code></pre> </div> <p> <a id="securitychecks"><b>Security checks</b></a> </p>
<p> If a security manager is present then security checks are performed by the HTTP Client's sending methods. An appropriate <a href="../../../../java.base/java/net/urlpermission.html" title="class in java.net"><code>URLPermission</code></a> is required to access the destination server, and proxy server if one has been configured. The form of the <code>URLPermission</code> required to access a proxy has a <code>method</code> parameter of <code>"CONNECT"</code> (for all kinds of proxying) and a <code>URL</code> string of the form <code>"socket://host:port"</code> where host and port specify the proxy's address.</p>
</div> <dl class="notes"> <dt>API Note:</dt> <dd>Resources allocated by the <code>HttpClient</code> may be reclaimed early by <a href="#close()">closing</a> the client.</dd> <dt>Implementation Note:</dt> <dd>
<p id="closing"> The JDK built-in implementation of the <code>HttpClient</code> overrides <a href="#close()"><code>close()</code></a>, <a href="#shutdown()"><code>shutdown()</code></a>, <a href="#shutdownNow()"><code>shutdownNow()</code></a>, <a href="#awaitTermination(java.time.Duration)"><code>awaitTermination(Duration)</code></a>, and <a href="#isTerminated()"><code>isTerminated()</code></a> to provide a best effort implementation. Failing to close, cancel, or read returned streams to exhaustion, such as streams provided when using <a href="httpresponse.bodyhandlers#ofInputStream()"><code>HttpResponse.BodyHandlers.ofInputStream()</code></a>, <a href="httpresponse.bodyhandlers#ofLines()"><code>HttpResponse.BodyHandlers.ofLines()</code></a>, or <a href="httpresponse.bodyhandlers#ofPublisher()"><code>HttpResponse.BodyHandlers.ofPublisher()</code></a>, may prevent requests submitted before an <a href="#shutdown()">orderly shutdown</a> to run to completion. Likewise, failing to <a href="../../../../java.base/java/util/concurrent/flow.subscription.html#request(long)">request data</a> or <a href="../../../../java.base/java/util/concurrent/flow.subscription.html#cancel()">cancel subscriptions</a> from a custom <a href="httpresponse.bodysubscriber" title="interface in java.net.http">BodySubscriber</a> may stop delivery of data and <a href="#awaitTermination(java.time.Duration)">stall an orderly shutdown</a>. </p>
<p> If an explicit <a href="httpclient.builder#executor(java.util.concurrent.Executor)">executor</a> has not been set for an <code>HttpClient</code>, and a security manager has been installed, then the default executor will execute asynchronous and dependent tasks in a context that is granted no permissions. Custom <a href="httprequest.bodypublisher" title="interface in java.net.http">request body publishers</a>, <a href="httpresponse.bodyhandler" title="interface in java.net.http">response body handlers</a>, <a href="httpresponse.bodysubscriber" title="interface in java.net.http">response body subscribers</a>, and <a href="websocket.listener.html" title="interface in java.net.http">WebSocket Listeners</a>, if executing operations that require privileges, should do so within an appropriate <a href="../../../../java.base/java/security/accesscontroller.html#doPrivileged(java.security.PrivilegedAction)">privileged context</a>.</p>
</dd> <dt>Since:</dt> <dd>11</dd> </dl> </section> <section class="summary"> <section class="nested-class-summary" id="nested-class-summary"> <h2>Nested Class Summary</h2>  <table class="summary-table three-column-summary">             <tr>
<th>Modifier and Type</th>
<th>Class</th>
<th>Description</th>
</tr>
<tr>
<td><code>static interface </code></td>
<td><code><a href="httpclient.builder" class="type-name-link" title="interface in java.net.http">HttpClient.Builder</a></code></td>
<td> <div class="block">A builder of <a href="httpclient" title="class in java.net.http">HTTP Clients</a>.</div> </td>
</tr>
<tr>
<td><code>static enum </code></td>
<td><code><a href="httpclient.redirect" class="type-name-link" title="enum class in java.net.http">HttpClient.Redirect</a></code></td>
<td> <div class="block">Defines the automatic redirection policy.</div> </td>
</tr>
<tr>
<td><code>static enum </code></td>
<td><code><a href="httpclient.version" class="type-name-link" title="enum class in java.net.http">HttpClient.Version</a></code></td>
<td> <div class="block">The HTTP protocol version.</div> </td>
</tr>
</table> </section><section class="constructor-summary" id="constructor-summary"> <h2>Constructor Summary</h2>  <table class="summary-table three-column-summary">     <div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">HttpClient</a>()</code></div>  <tr>
<th>Modifier</th>
<th>Constructor</th>
<th>Description</th>
</tr>
<tr>
<td><code>protected </code></td>
<td> <div class="block">Creates an HttpClient.</div> </td>
</tr>
</table> </section><section class="method-summary" id="method-summary"> <h2>Method Summary</h2> <div id="method-summary-table">  <div id="method-summary-table.tabpanel" role="tabpanel"> <table class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">                                                                <tr>
<th>Modifier and Type</th>
<th>Method</th>
<th>Description</th>
</tr>
<tr>
<td><code>abstract <a href="../../../../java.base/java/util/optional.html" title="class in java.util">Optional</a><wbr>&lt;<a href="../../../../java.base/java/net/authenticator.html" title="class in java.net">Authenticator</a>&gt;</wbr></code></td>
<td><code><a href="#authenticator()" class="member-name-link">authenticator</a>()</code></td>
<td> <div class="block">Returns an <code>Optional</code> containing the <a href="../../../../java.base/java/net/authenticator.html" title="class in java.net"><code>Authenticator</code></a> set on this client.</div> </td>
</tr>
<tr>
<td><code>boolean</code></td>
<td><code><a href="#awaitTermination(java.time.Duration)" class="member-name-link">awaitTermination</a><wbr>(<a href="../../../../java.base/java/time/duration.html" title="class in java.time">Duration</a> duration)</wbr></code></td>
<td> <div class="block">Blocks until all operations have completed execution after a shutdown request, or the <code>duration</code> elapses, or the current thread is <a href="../../../../java.base/java/lang/thread.html#interrupt()">interrupted</a>, whichever happens first.</div> </td>
</tr>
<tr>
<td><code>void</code></td>
<td><code><a href="#close()" class="member-name-link">close</a>()</code></td>
<td> <div class="block">Initiates an orderly shutdown in which requests previously submitted to <code>send</code> or <code>sendAsync</code> are run to completion, but no new request will be accepted.</div> </td>
</tr>
<tr>
<td><code>abstract <a href="../../../../java.base/java/util/optional.html" title="class in java.util">Optional</a><wbr>&lt;<a href="../../../../java.base/java/time/duration.html" title="class in java.time">Duration</a>&gt;</wbr></code></td>
<td><code><a href="#connectTimeout()" class="member-name-link">connectTimeout</a>()</code></td>
<td> <div class="block">Returns an <code>Optional</code> containing the <i>connect timeout duration</i> for this client.</div> </td>
</tr>
<tr>
<td><code>abstract <a href="../../../../java.base/java/util/optional.html" title="class in java.util">Optional</a><wbr>&lt;<a href="../../../../java.base/java/net/cookiehandler.html" title="class in java.net">CookieHandler</a>&gt;</wbr></code></td>
<td><code><a href="#cookieHandler()" class="member-name-link">cookieHandler</a>()</code></td>
<td> <div class="block">Returns an <code>Optional</code> containing this client's <a href="../../../../java.base/java/net/cookiehandler.html" title="class in java.net"><code>CookieHandler</code></a>.</div> </td>
</tr>
<tr>
<td><code>abstract <a href="../../../../java.base/java/util/optional.html" title="class in java.util">Optional</a><wbr>&lt;<a href="../../../../java.base/java/util/concurrent/executor.html" title="interface in java.util.concurrent">Executor</a>&gt;</wbr></code></td>
<td><code><a href="#executor()" class="member-name-link">executor</a>()</code></td>
<td> <div class="block">Returns an <code>Optional</code> containing this client's <a href="../../../../java.base/java/util/concurrent/executor.html" title="interface in java.util.concurrent"><code>Executor</code></a>.</div> </td>
</tr>
<tr>
<td><code>abstract <a href="httpclient.redirect" title="enum class in java.net.http">HttpClient.Redirect</a></code></td>
<td><code><a href="#followRedirects()" class="member-name-link">followRedirects</a>()</code></td>
<td> <div class="block">Returns the follow redirects policy for this client.</div> </td>
</tr>
<tr>
<td><code>boolean</code></td>
<td><code><a href="#isTerminated()" class="member-name-link">isTerminated</a>()</code></td>
<td> <div class="block">Returns <code>true</code> if all operations have completed following a shutdown.</div> </td>
</tr>
<tr>
<td><code>static <a href="httpclient.builder" title="interface in java.net.http">HttpClient.Builder</a></code></td>
<td><code><a href="#newBuilder()" class="member-name-link">newBuilder</a>()</code></td>
<td> <div class="block">Creates a new <code>HttpClient</code> builder.</div> </td>
</tr>
<tr>
<td><code>static <a href="httpclient" title="class in java.net.http">HttpClient</a></code></td>
<td><code><a href="#newHttpClient()" class="member-name-link">newHttpClient</a>()</code></td>
<td> <div class="block">Returns a new <code>HttpClient</code> with default settings.</div> </td>
</tr>
<tr>
<td><code><a href="websocket.builder.html" title="interface in java.net.http">WebSocket.Builder</a></code></td>
<td><code><a href="#newWebSocketBuilder()" class="member-name-link">newWebSocketBuilder</a>()</code></td>
<td> <div class="block">Creates a new <code>WebSocket</code> builder (optional operation).</div> </td>
</tr>
<tr>
<td><code>abstract <a href="../../../../java.base/java/util/optional.html" title="class in java.util">Optional</a><wbr>&lt;<a href="../../../../java.base/java/net/proxyselector.html" title="class in java.net">ProxySelector</a>&gt;</wbr></code></td>
<td><code><a href="#proxy()" class="member-name-link">proxy</a>()</code></td>
<td> <div class="block">Returns an <code>Optional</code> containing the <code>ProxySelector</code> supplied to this client.</div> </td>
</tr>
<tr>
<td><code>abstract &lt;T&gt; <a href="httpresponse" title="interface in java.net.http">HttpResponse</a><wbr>&lt;T&gt;</wbr></code></td>
<td><code><a href="#send(java.net.http.HttpRequest,java.net.http.HttpResponse.BodyHandler)" class="member-name-link">send</a><wbr>(<a href="httprequest" title="class in java.net.http">HttpRequest</a> request,
 <a href="httpresponse.bodyhandler" title="interface in java.net.http">HttpResponse.BodyHandler</a>&lt;T&gt; responseBodyHandler)</wbr></code></td>
<td> <div class="block">Sends the given request using this client, blocking if necessary to get the response.</div> </td>
</tr>
<tr>
<td><code>abstract &lt;T&gt; <a href="../../../../java.base/java/util/concurrent/completablefuture.html" title="class in java.util.concurrent">CompletableFuture</a><wbr>&lt;<a href="httpresponse" title="interface in java.net.http">HttpResponse</a>&lt;T&gt;&gt;</wbr></code></td>
<td><code><a href="#sendAsync(java.net.http.HttpRequest,java.net.http.HttpResponse.BodyHandler)" class="member-name-link">sendAsync</a><wbr>(<a href="httprequest" title="class in java.net.http">HttpRequest</a> request,
 <a href="httpresponse.bodyhandler" title="interface in java.net.http">HttpResponse.BodyHandler</a>&lt;T&gt; responseBodyHandler)</wbr></code></td>
<td> <div class="block">Sends the given request asynchronously using this client with the given response body handler.</div> </td>
</tr>
<tr>
<td><code>abstract &lt;T&gt; <a href="../../../../java.base/java/util/concurrent/completablefuture.html" title="class in java.util.concurrent">CompletableFuture</a><wbr>&lt;<a href="httpresponse" title="interface in java.net.http">HttpResponse</a>&lt;T&gt;&gt;</wbr></code></td>
<td><code><a href="#sendAsync(java.net.http.HttpRequest,java.net.http.HttpResponse.BodyHandler,java.net.http.HttpResponse.PushPromiseHandler)" class="member-name-link">sendAsync</a><wbr>(<a href="httprequest" title="class in java.net.http">HttpRequest</a> request,
 <a href="httpresponse.bodyhandler" title="interface in java.net.http">HttpResponse.BodyHandler</a>&lt;T&gt; responseBodyHandler,
 <a href="httpresponse.pushpromisehandler" title="interface in java.net.http">HttpResponse.PushPromiseHandler</a>&lt;T&gt; pushPromiseHandler)</wbr></code></td>
<td> <div class="block">Sends the given request asynchronously using this client with the given response body handler and push promise handler.</div> </td>
</tr>
<tr>
<td><code>void</code></td>
<td><code><a href="#shutdown()" class="member-name-link">shutdown</a>()</code></td>
<td> <div class="block">Initiates an orderly shutdown in which requests previously submitted with <code>send</code> or <code>sendAsync</code> are run to completion, but no new request will be accepted.</div> </td>
</tr>
<tr>
<td><code>void</code></td>
<td><code><a href="#shutdownNow()" class="member-name-link">shutdownNow</a>()</code></td>
<td> <div class="block">This method attempts to initiate an immediate shutdown.</div> </td>
</tr>
<tr>
<td><code>abstract <a href="../../../../java.base/javax/net/ssl/sslcontext.html" title="class in javax.net.ssl">SSLContext</a></code></td>
<td><code><a href="#sslContext()" class="member-name-link">sslContext</a>()</code></td>
<td> <div class="block">Returns this client's <code>SSLContext</code>.</div> </td>
</tr>
<tr>
<td><code>abstract <a href="../../../../java.base/javax/net/ssl/sslparameters.html" title="class in javax.net.ssl">SSLParameters</a></code></td>
<td><code><a href="#sslParameters()" class="member-name-link">sslParameters</a>()</code></td>
<td> <div class="block">Returns a copy of this client's <a href="../../../../java.base/javax/net/ssl/sslparameters.html" title="class in javax.net.ssl"><code>SSLParameters</code></a>.</div> </td>
</tr>
<tr>
<td><code>abstract <a href="httpclient.version" title="enum class in java.net.http">HttpClient.Version</a></code></td>
<td><code><a href="#version()" class="member-name-link">version</a>()</code></td>
<td> <div class="block">Returns the preferred HTTP protocol version for this client.</div> </td>
</tr>
</table> </div> </div> <div class="inherited-list"> <h3 id="methods-inherited-from-class-java.lang.Object">Methods declared in class java.lang.<a href="../../../../java.base/java/lang/object.html" title="class in java.lang">Object</a>
</h3> <code><a href="../../../../java.base/java/lang/object.html#clone()">clone</a>, <a href="../../../../java.base/java/lang/object.html#equals(java.lang.Object)">equals</a>, <a href="../../../../java.base/java/lang/object.html#finalize()">finalize</a>, <a href="../../../../java.base/java/lang/object.html#getClass()">getClass</a>, <a href="../../../../java.base/java/lang/object.html#hashCode()">hashCode</a>, <a href="../../../../java.base/java/lang/object.html#notify()">notify</a>, <a href="../../../../java.base/java/lang/object.html#notifyAll()">notifyAll</a>, <a href="../../../../java.base/java/lang/object.html#toString()">toString</a>, <a href="../../../../java.base/java/lang/object.html#wait()">wait</a>, <a href="../../../../java.base/java/lang/object.html#wait(long)">wait</a>, <a href="../../../../java.base/java/lang/object.html#wait(long,int)">wait</a></code>
</div> </section> </section> <section class="details"> <section class="constructor-details" id="constructor-detail"> <h2>Constructor Details</h2>  </section><section class="detail" id="&lt;init&gt;()"> <h3>HttpClient</h3> <pre class="lang-java" data-language="java">protected HttpClient()</pre> <div class="block">Creates an HttpClient.</div> </section><section class="method-details" id="method-detail"> <h2>Method Details</h2>  </section><section class="detail" id="newHttpClient()"> <h3>newHttpClient</h3> <pre class="lang-java" data-language="java">public static HttpClient newHttpClient()</pre> <div class="block">Returns a new <code>HttpClient</code> with default settings. <p> Equivalent to <code>newBuilder().build()</code>. </p>
<p> The default settings include: the "GET" request method, a preference of <a href="httpclient.version#HTTP_2">HTTP/2</a>, a redirection policy of <a href="httpclient.redirect#NEVER">NEVER</a>, the <a href="../../../../java.base/java/net/proxyselector.html#getDefault()">default proxy selector</a>, and the <a href="../../../../java.base/javax/net/ssl/sslcontext.html#getDefault()">default SSL context</a>.</p>
</div> <dl class="notes"> <dt>Implementation Note:</dt> <dd>The system-wide default values are retrieved at the time the <code>HttpClient</code> instance is constructed. Changing the system-wide values after an <code>HttpClient</code> instance has been built, for instance, by calling <a href="../../../../java.base/java/net/proxyselector.html#setDefault(java.net.ProxySelector)"><code>ProxySelector.setDefault(ProxySelector)</code></a> or <a href="../../../../java.base/javax/net/ssl/sslcontext.html#setDefault(javax.net.ssl.SSLContext)"><code>SSLContext.setDefault(SSLContext)</code></a>, has no effect on already built instances.</dd> <dt>Returns:</dt> <dd>a new HttpClient</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../../java.base/java/io/uncheckedioexception.html" title="class in java.io">UncheckedIOException</a></code> - if necessary underlying IO resources required to <a href="httpclient.builder#build()">build a new HttpClient</a> cannot be allocated.</dd> </dl> </section><section class="detail" id="newBuilder()"> <h3>newBuilder</h3> <pre class="lang-java" data-language="java">public static HttpClient.Builder newBuilder()</pre> <div class="block">Creates a new <code>HttpClient</code> builder. <p> Builders returned by this method create instances of the default <code>HttpClient</code> implementation.</p>
</div> <dl class="notes"> <dt>Returns:</dt> <dd>an <code>HttpClient.Builder</code>
</dd> </dl> </section><section class="detail" id="cookieHandler()"> <h3>cookieHandler</h3> <pre class="lang-java" data-language="java">public abstract Optional&lt;CookieHandler&gt; cookieHandler()</pre> <div class="block">Returns an <code>Optional</code> containing this client's <a href="../../../../java.base/java/net/cookiehandler.html" title="class in java.net"><code>CookieHandler</code></a>. If no <code>CookieHandler</code> was set in this client's builder, then the <code>Optional</code> is empty.</div> <dl class="notes"> <dt>Returns:</dt> <dd>an <code>Optional</code> containing this client's <code>CookieHandler</code>
</dd> </dl> </section><section class="detail" id="connectTimeout()"> <h3>connectTimeout</h3> <pre class="lang-java" data-language="java">public abstract Optional&lt;Duration&gt; connectTimeout()</pre> <div class="block">Returns an <code>Optional</code> containing the <i>connect timeout duration</i> for this client. If the <a href="httpclient.builder#connectTimeout(java.time.Duration)">connect timeout duration</a> was not set in the client's builder, then the <code>Optional</code> is empty.</div> <dl class="notes"> <dt>Returns:</dt> <dd>an <code>Optional</code> containing this client's connect timeout duration</dd> </dl> </section><section class="detail" id="followRedirects()"> <h3>followRedirects</h3> <pre class="lang-java" data-language="java">public abstract HttpClient.Redirect followRedirects()</pre> <div class="block">Returns the follow redirects policy for this client. The default value for client's built by builders that do not specify a redirect policy is <a href="httpclient.redirect#NEVER"><code>NEVER</code></a>.</div> <dl class="notes"> <dt>Returns:</dt> <dd>this client's follow redirects setting</dd> </dl> </section><section class="detail" id="proxy()"> <h3>proxy</h3> <pre class="lang-java" data-language="java">public abstract Optional&lt;ProxySelector&gt; proxy()</pre> <div class="block">Returns an <code>Optional</code> containing the <code>ProxySelector</code> supplied to this client. If no proxy selector was set in this client's builder, then the <code>Optional</code> is empty. <p> Even though this method may return an empty optional, the <code>
 HttpClient</code> may still have a non-exposed <a href="httpclient.builder#proxy(java.net.ProxySelector)">default proxy selector</a> that is used for sending HTTP requests.</p>
</div> <dl class="notes"> <dt>Returns:</dt> <dd>an <code>Optional</code> containing the proxy selector supplied to this client.</dd> </dl> </section><section class="detail" id="sslContext()"> <h3>sslContext</h3> <pre class="lang-java" data-language="java">public abstract SSLContext sslContext()</pre> <div class="block">Returns this client's <code>SSLContext</code>. <p> If no <code>SSLContext</code> was set in this client's builder, then the <a href="../../../../java.base/javax/net/ssl/sslcontext.html#getDefault()">default context</a> is returned.</p>
</div> <dl class="notes"> <dt>Returns:</dt> <dd>this client's SSLContext</dd> </dl> </section><section class="detail" id="sslParameters()"> <h3>sslParameters</h3> <pre class="lang-java" data-language="java">public abstract SSLParameters sslParameters()</pre> <div class="block">Returns a copy of this client's <a href="../../../../java.base/javax/net/ssl/sslparameters.html" title="class in javax.net.ssl"><code>SSLParameters</code></a>. <p> If no <code>SSLParameters</code> were set in the client's builder, then an implementation specific default set of parameters, that the client will use, is returned.</p>
</div> <dl class="notes"> <dt>Returns:</dt> <dd>this client's <code>SSLParameters</code>
</dd> </dl> </section><section class="detail" id="authenticator()"> <h3>authenticator</h3> <pre class="lang-java" data-language="java">public abstract Optional&lt;Authenticator&gt; authenticator()</pre> <div class="block">Returns an <code>Optional</code> containing the <a href="../../../../java.base/java/net/authenticator.html" title="class in java.net"><code>Authenticator</code></a> set on this client. If no <code>Authenticator</code> was set in the client's builder, then the <code>Optional</code> is empty.</div> <dl class="notes"> <dt>Returns:</dt> <dd>an <code>Optional</code> containing this client's <code>Authenticator</code>
</dd> </dl> </section><section class="detail" id="version()"> <h3>version</h3> <pre class="lang-java" data-language="java">public abstract HttpClient.Version version()</pre> <div class="block">Returns the preferred HTTP protocol version for this client. The default value is <a href="httpclient.version#HTTP_2"><code>HttpClient.Version.HTTP_2</code></a>
</div> <dl class="notes"> <dt>Implementation Note:</dt> <dd>Constraints may also affect the selection of protocol version. For example, if HTTP/2 is requested through a proxy, and if the implementation does not support this mode, then HTTP/1.1 may be used</dd> <dt>Returns:</dt> <dd>the HTTP protocol version requested</dd> </dl> </section><section class="detail" id="executor()"> <h3>executor</h3> <pre class="lang-java" data-language="java">public abstract Optional&lt;Executor&gt; executor()</pre> <div class="block">Returns an <code>Optional</code> containing this client's <a href="../../../../java.base/java/util/concurrent/executor.html" title="interface in java.util.concurrent"><code>Executor</code></a>. If no <code>Executor</code> was set in the client's builder, then the <code>Optional</code> is empty. <p> Even though this method may return an empty optional, the <code>
 HttpClient</code> may still have an non-exposed <a href="httpclient.builder#executor(java.util.concurrent.Executor)">default executor</a> that is used for executing asynchronous and dependent tasks.</p>
</div> <dl class="notes"> <dt>Returns:</dt> <dd>an <code>Optional</code> containing this client's <code>Executor</code>
</dd> </dl> </section><section class="detail" id="send(java.net.http.HttpRequest,java.net.http.HttpResponse.BodyHandler)"> <h3>send</h3> <pre class="lang-java" data-language="java">public abstract &lt;T&gt; HttpResponse&lt;T&gt; send(HttpRequest request, HttpResponse.BodyHandler&lt;T&gt; responseBodyHandler) throws IOException, InterruptedException</pre> <div class="block">Sends the given request using this client, blocking if necessary to get the response. The returned <a href="httpresponse" title="interface in java.net.http"><code>HttpResponse</code></a><code>&lt;T&gt;</code> contains the response status, headers, and body ( as handled by given response body handler ). <p> If the operation is interrupted, the default <code>HttpClient</code> implementation attempts to cancel the HTTP exchange and <a href="../../../../java.base/java/lang/interruptedexception.html" title="class in java.lang"><code>InterruptedException</code></a> is thrown. No guarantee is made as to exactly <em>when</em> the cancellation request may be taken into account. In particular, the request might still get sent to the server, as its processing might already have started asynchronously in another thread, and the underlying resources may only be released asynchronously. </p>
<ul> <li>With HTTP/1.1, an attempt to cancel may cause the underlying connection to be closed abruptly. </li>
<li>With HTTP/2, an attempt to cancel may cause the stream to be reset, or in certain circumstances, may also cause the connection to be closed abruptly, if, for instance, the thread is currently trying to write to the underlying socket. </li>
</ul>
</div> <dl class="notes"> <dt>Type Parameters:</dt> <dd>
<code>T</code> - the response body type</dd> <dt>Parameters:</dt> <dd>
<code>request</code> - the request</dd> <dd>
<code>responseBodyHandler</code> - the response body handler</dd> <dt>Returns:</dt> <dd>the response</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../../java.base/java/io/ioexception.html" title="class in java.io">IOException</a></code> - if an I/O error occurs when sending or receiving, or the client has <a href="#closing">shut down</a>
</dd> <dd>
<code><a href="../../../../java.base/java/lang/interruptedexception.html" title="class in java.lang">InterruptedException</a></code> - if the operation is interrupted</dd> <dd>
<code><a href="../../../../java.base/java/lang/illegalargumentexception.html" title="class in java.lang">IllegalArgumentException</a></code> - if the <code>request</code> argument is not a request that could have been validly built as specified by <a href="httprequest.builder" title="interface in java.net.http"><code>HttpRequest.Builder</code></a>.</dd> <dd>
<code><a href="../../../../java.base/java/lang/securityexception.html" title="class in java.lang">SecurityException</a></code> - If a security manager has been installed and it denies <a href="../../../../java.base/java/net/urlpermission.html" title="class in java.net"><code>access</code></a> to the URL in the given request, or proxy if one is configured. See <a href="#securitychecks">security checks</a> for further information.</dd> </dl> </section><section class="detail" id="sendAsync(java.net.http.HttpRequest,java.net.http.HttpResponse.BodyHandler)"> <h3>sendAsync</h3> <pre class="lang-java" data-language="java">public abstract &lt;T&gt; CompletableFuture&lt;HttpResponse&lt;T&gt;&gt; sendAsync(HttpRequest request, HttpResponse.BodyHandler&lt;T&gt; responseBodyHandler)</pre> <div class="block">Sends the given request asynchronously using this client with the given response body handler. <p> Equivalent to: <code>sendAsync(request, responseBodyHandler, null)</code>.</p>
</div> <dl class="notes"> <dt>Type Parameters:</dt> <dd>
<code>T</code> - the response body type</dd> <dt>Parameters:</dt> <dd>
<code>request</code> - the request</dd> <dd>
<code>responseBodyHandler</code> - the response body handler</dd> <dt>Returns:</dt> <dd>a <code>CompletableFuture&lt;HttpResponse&lt;T&gt;&gt;</code>
</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../../java.base/java/lang/illegalargumentexception.html" title="class in java.lang">IllegalArgumentException</a></code> - if the <code>request</code> argument is not a request that could have been validly built as specified by <a href="httprequest.builder" title="interface in java.net.http"><code>HttpRequest.Builder</code></a>.</dd> </dl> </section><section class="detail" id="sendAsync(java.net.http.HttpRequest,java.net.http.HttpResponse.BodyHandler,java.net.http.HttpResponse.PushPromiseHandler)"> <h3>sendAsync</h3> <pre class="lang-java" data-language="java">public abstract &lt;T&gt; CompletableFuture&lt;HttpResponse&lt;T&gt;&gt; sendAsync(HttpRequest request, HttpResponse.BodyHandler&lt;T&gt; responseBodyHandler, HttpResponse.PushPromiseHandler&lt;T&gt; pushPromiseHandler)</pre> <div class="block">Sends the given request asynchronously using this client with the given response body handler and push promise handler. <p> The returned completable future, if completed successfully, completes with an <a href="httpresponse" title="interface in java.net.http"><code>HttpResponse</code></a><code>&lt;T&gt;</code> that contains the response status, headers, and body ( as handled by given response body handler ). </p>
<p> <a href="httpresponse.pushpromisehandler" title="interface in java.net.http">Push promises</a> received, if any, are handled by the given <code>pushPromiseHandler</code>. A <code>null</code> valued <code>pushPromiseHandler</code> rejects any push promises. </p>
<p> The returned completable future completes exceptionally with: </p>
<ul> <li>
<a href="../../../../java.base/java/io/ioexception.html" title="class in java.io"><code>IOException</code></a> - if an I/O error occurs when sending or receiving, or the client has <a href="#closing">shut down</a>.</li> <li>
<a href="../../../../java.base/java/lang/securityexception.html" title="class in java.lang"><code>SecurityException</code></a> - If a security manager has been installed and it denies <a href="../../../../java.base/java/net/urlpermission.html" title="class in java.net"><code>access</code></a> to the URL in the given request, or proxy if one is configured. See <a href="#securitychecks">security checks</a> for further information.</li> </ul> <p> The default <code>HttpClient</code> implementation returns <code>CompletableFuture</code> objects that are <em>cancelable</em>. <code>CompletableFuture</code> objects <a href="../../../../java.base/java/util/concurrent/completablefuture.html#newIncompleteFuture()">derived</a> from cancelable futures are themselves <em>cancelable</em>. Invoking <a href="../../../../java.base/java/util/concurrent/completablefuture.html#cancel(boolean)">cancel(true)</a> on a cancelable future that is not completed, attempts to cancel the HTTP exchange in an effort to release underlying resources as soon as possible. No guarantee is made as to exactly <em>when</em> the cancellation request may be taken into account. In particular, the request might still get sent to the server, as its processing might already have started asynchronously in another thread, and the underlying resources may only be released asynchronously. </p>
<ul> <li>With HTTP/1.1, an attempt to cancel may cause the underlying connection to be closed abruptly. </li>
<li>With HTTP/2, an attempt to cancel may cause the stream to be reset. </li>
</ul>
</div> <dl class="notes"> <dt>Type Parameters:</dt> <dd>
<code>T</code> - the response body type</dd> <dt>Parameters:</dt> <dd>
<code>request</code> - the request</dd> <dd>
<code>responseBodyHandler</code> - the response body handler</dd> <dd>
<code>pushPromiseHandler</code> - push promise handler, may be null</dd> <dt>Returns:</dt> <dd>a <code>CompletableFuture&lt;HttpResponse&lt;T&gt;&gt;</code>
</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../../java.base/java/lang/illegalargumentexception.html" title="class in java.lang">IllegalArgumentException</a></code> - if the <code>request</code> argument is not a request that could have been validly built as specified by <a href="httprequest.builder" title="interface in java.net.http"><code>HttpRequest.Builder</code></a>.</dd> </dl> </section><section class="detail" id="newWebSocketBuilder()"> <h3>newWebSocketBuilder</h3> <pre class="lang-java" data-language="java">public WebSocket.Builder newWebSocketBuilder()</pre> <div class="block">Creates a new <code>WebSocket</code> builder (optional operation). <p> <b>Example</b> </p>
<div class="snippet-container"> <pre class="lang-java" data-language="java"><code>HttpClient client = HttpClient.newHttpClient();
CompletableFuture&lt;WebSocket&gt; ws = client.newWebSocketBuilder()
   .buildAsync(URI.create("ws://websocket.example.com"), listener);</code></pre> </div> <p> Finer control over the WebSocket Opening Handshake can be achieved by using a custom <code>HttpClient</code>. </p>
<p> <b>Example</b> </p>
<div class="snippet-container"> <pre class="lang-java" data-language="java"><code>InetSocketAddress addr = new InetSocketAddress("proxy.example.com", 80);
HttpClient client = HttpClient.newBuilder()
        .proxy(ProxySelector.of(addr))
        .build();

CompletableFuture&lt;WebSocket&gt; ws = client.newWebSocketBuilder()
        .buildAsync(URI.create("ws://websocket.example.com"), listener);</code></pre> </div> </div> <dl class="notes"> <dt>Implementation Requirements:</dt> <dd>The default implementation of this method throws <code>UnsupportedOperationException</code>. Clients obtained through <a href="#newHttpClient()"><code>newHttpClient()</code></a> or <a href="#newBuilder()"><code>newBuilder()</code></a> return a <code>WebSocket</code> builder.</dd> <dt>Implementation Note:</dt> <dd>Both builder and <code>WebSocket</code>s created with it operate in a non-blocking fashion. That is, their methods do not block before returning a <code>CompletableFuture</code>. Asynchronous tasks are executed in this <code>HttpClient</code>'s executor. <p> When a <code>CompletionStage</code> returned from <a href="websocket.listener.html#onClose(java.net.http.WebSocket,int,java.lang.String)"><code>Listener.onClose</code></a> completes, the <code>WebSocket</code> will send a Close message that has the same code the received message has and an empty reason.</p>
</dd> <dt>Returns:</dt> <dd>a <code>WebSocket.Builder</code>
</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../../java.base/java/lang/unsupportedoperationexception.html" title="class in java.lang">UnsupportedOperationException</a></code> - if this <code>HttpClient</code> does not provide WebSocket support</dd> </dl> </section><section class="detail" id="shutdown()"> <h3>shutdown</h3> <pre class="lang-java" data-language="java">public void shutdown()</pre> <div class="block">Initiates an orderly shutdown in which requests previously submitted with <code>send</code> or <code>sendAsync</code> are run to completion, but no new request will be accepted. Running a request to completion may involve running several operations in the background, including <a href="#closing">waiting for responses to be delivered</a>, which will all have to run to completion until the request is considered completed. Invocation has no additional effect if already shut down. <p>This method does not wait for previously submitted request to complete execution. Use <a href="#awaitTermination(java.time.Duration)"><code>awaitTermination</code></a> or <a href="#close()"><code>close</code></a> to do that.</p>
</div> <dl class="notes"> <dt>Implementation Requirements:</dt> <dd>The default implementation of this method does nothing. Subclasses should override this method to implement the appropriate behavior.</dd> <dt>Since:</dt> <dd>21</dd> <dt>See Also:</dt> <dd> <ul class="tag-list-long"> <li><a href="#closing"><code>Implementation Note on closing the HttpClient</code></a></li> </ul> </dd> </dl> </section><section class="detail" id="awaitTermination(java.time.Duration)"> <h3>awaitTermination</h3> <pre class="lang-java" data-language="java">public boolean awaitTermination(Duration duration) throws InterruptedException</pre> <div class="block">Blocks until all operations have completed execution after a shutdown request, or the <code>duration</code> elapses, or the current thread is <a href="../../../../java.base/java/lang/thread.html#interrupt()">interrupted</a>, whichever happens first. Operations are any tasks required to run a request previously submitted with <code>send</code> or <code>sendAsync</code> to completion. <p> This method does not wait if the duration to wait is less than or equal to zero. In this case, the method just tests if the thread has terminated.</p>
</div> <dl class="notes"> <dt>Implementation Requirements:</dt> <dd>The default implementation of this method checks for null arguments, but otherwise does nothing and returns true. Subclasses should override this method to implement the proper behavior.</dd> <dt>Parameters:</dt> <dd>
<code>duration</code> - the maximum time to wait</dd> <dt>Returns:</dt> <dd>
<code>true</code> if this client terminated and <code>false</code> if the timeout elapsed before termination</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../../java.base/java/lang/interruptedexception.html" title="class in java.lang">InterruptedException</a></code> - if interrupted while waiting</dd> <dt>Since:</dt> <dd>21</dd> <dt>See Also:</dt> <dd> <ul class="tag-list-long"> <li><a href="#closing"><code>Implementation Note on closing the HttpClient</code></a></li> </ul> </dd> </dl> </section><section class="detail" id="isTerminated()"> <h3>isTerminated</h3> <pre class="lang-java" data-language="java">public boolean isTerminated()</pre> <div class="block">Returns <code>true</code> if all operations have completed following a shutdown. Operations are any tasks required to run a request previously submitted with <code>send</code> or <code>sendAsync</code> to completion. <p> Note that <code>isTerminated</code> is never <code>true</code> unless either <code>shutdown</code> or <code>shutdownNow</code> was called first.</p>
</div> <dl class="notes"> <dt>Implementation Requirements:</dt> <dd>The default implementation of this method does nothing and returns false. Subclasses should override this method to implement the proper behavior.</dd> <dt>Returns:</dt> <dd>
<code>true</code> if all tasks have completed following a shutdown</dd> <dt>Since:</dt> <dd>21</dd> <dt>See Also:</dt> <dd> <ul class="tag-list-long"> <li><a href="#closing"><code>Implementation Note on closing the HttpClient</code></a></li> </ul> </dd> </dl> </section><section class="detail" id="shutdownNow()"> <h3>shutdownNow</h3> <pre class="lang-java" data-language="java">public void shutdownNow()</pre> <div class="block">This method attempts to initiate an immediate shutdown. An implementation of this method may attempt to interrupt operations that are actively running. Operations are any tasks required to run a request previously submitted with <code>send</code> or <code>sendAsync</code> to completion. The behavior of actively running operations when interrupted is undefined. In particular, there is no guarantee that interrupted operations will terminate, or that code waiting on these operations will ever be notified.</div> <dl class="notes"> <dt>Implementation Requirements:</dt> <dd>The default implementation of this method simply calls <a href="#shutdown()"><code>shutdown()</code></a>. Subclasses should override this method to implement the appropriate behavior.</dd> <dt>Since:</dt> <dd>21</dd> <dt>See Also:</dt> <dd> <ul class="tag-list-long"> <li><a href="#closing"><code>Implementation Note on closing the HttpClient</code></a></li> </ul> </dd> </dl> </section><section class="detail" id="close()"> <h3>close</h3> <pre class="lang-java" data-language="java">public void close()</pre> <div class="block">Initiates an orderly shutdown in which requests previously submitted to <code>send</code> or <code>sendAsync</code> are run to completion, but no new request will be accepted. Running a request to completion may involve running several operations in the background, including <a href="#closing">waiting for responses to be delivered</a>. This method waits until all operations have completed execution and the client has terminated. <p> If interrupted while waiting, this method may attempt to stop all operations by calling <a href="#shutdownNow()"><code>shutdownNow()</code></a>. It then continues to wait until all actively executing operations have completed. The interrupt status will be re-asserted before this method returns. </p>
<p> If already terminated, invoking this method has no effect.</p>
</div> <dl class="notes"> <dt>Specified by:</dt> <dd>
<code><a href="../../../../java.base/java/lang/autocloseable.html#close()">close</a></code> in interface <code><a href="../../../../java.base/java/lang/autocloseable.html" title="interface in java.lang">AutoCloseable</a></code>
</dd> <dt>Implementation Requirements:</dt> <dd>The default implementation invokes <code>shutdown()</code> and waits for tasks to complete execution with <code>awaitTermination</code>.</dd> <dt>Since:</dt> <dd>21</dd> <dt>See Also:</dt> <dd> <ul class="tag-list-long"> <li><a href="#closing"><code>Implementation Note on closing the HttpClient</code></a></li> </ul> </dd> </dl> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1993, 2023, Oracle and/or its affiliates. All rights reserved.<br>Documentation extracted from Debian's OpenJDK Development Kit package.<br>Licensed under the GNU General Public License, version 2, with the Classpath Exception.<br>Various third party code in OpenJDK is licensed under different licenses (see Debian package).<br>Java and OpenJDK are trademarks or registered trademarks of Oracle and/or its affiliates.<br>
    <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.net.http/java/net/http/HttpClient.html" class="_attribution-link">https://docs.oracle.com/en/java/javase/21/docs/api/java.net.http/java/net/http/HttpClient.html</a>
  </p>
</div>
