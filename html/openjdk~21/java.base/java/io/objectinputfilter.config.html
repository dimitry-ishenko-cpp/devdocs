<h1 title="Class ObjectInputFilter.Config" class="title">Class ObjectInputFilter.Config</h1> <div class="inheritance" title="Inheritance Tree">
<a href="../lang/object.html" title="class in java.lang">java.lang.Object</a> <div class="inheritance">java.io.ObjectInputFilter.Config</div> </div> <section class="class-description" id="class-description"> <dl class="notes"> <dt>Enclosing interface:</dt> <dd><code><a href="objectinputfilter.html" title="interface in java.io">ObjectInputFilter</a></code></dd> </dl>  <pre class="lang-java" data-language="java">public static final class ObjectInputFilter.Config extends Object</pre> <div class="block">A utility class to set and get the JVM-wide deserialization filter factory, the static JVM-wide filter, or to create a filter from a pattern string. The static filter factory and the static filter apply to the whole Java runtime, or "JVM-wide", there is only one of each. For a complete description of the function and use refer to <a href="objectinputfilter.html" title="interface in java.io"><code>ObjectInputFilter</code></a>. <p>The JVM-wide deserialization filter factory and the static JVM-wide filter can be configured from system properties during the initialization of the <code>ObjectInputFilter.Config</code> class. </p>
<p>If the Java virtual machine is started with the system property <code><span id="jdk.serialFilter" class="search-tag-result">jdk.serialFilter</span></code>, its value is used to configure the filter. If the system property is not defined, and the <a href="../security/security.html" title="class in java.security"><code>Security</code></a> property <code>jdk.serialFilter</code> is defined then it is used to configure the filter. The filter is created as if <a href="#createFilter(java.lang.String)"><code>createFilter</code></a> is called, if the filter string is invalid the initialization fails and subsequent attempts to <a href="#getSerialFilter()">get the filter</a>, <a href="#setSerialFilter(java.io.ObjectInputFilter)">set a filter</a>, or create an <a href="objectinputstream.html#%3Cinit%3E(java.io.InputStream)">ObjectInputStream</a> throw <a href="../lang/illegalstateexception.html" title="class in java.lang"><code>IllegalStateException</code></a>. Deserialization is not possible with an invalid serial filter. If the system property <code>jdk.serialFilter</code> or the <a href="../security/security.html" title="class in java.security"><code>Security</code></a> property <code>jdk.serialFilter</code> is not set the filter can be set with <a href="#setSerialFilter(java.io.ObjectInputFilter)"><code>Config.setSerialFilter</code></a>. Setting the <code>jdk.serialFilter</code> with <a href="../lang/system.html#setProperty(java.lang.String,java.lang.String)"><code>System.setProperty</code></a> <em>does not set the filter</em>. The syntax for the property value is the same as for the <a href="#createFilter(java.lang.String)"><code>createFilter</code></a> method. </p>
<p> If the Java virtual machine is started with the system property <code><span id="jdk.serialFilterFactory" class="search-tag-result">jdk.serialFilterFactory</span></code> or the <a href="../security/security.html" title="class in java.security"><code>Security</code></a> property of the same name, its value names the class to configure the JVM-wide deserialization filter factory. If the system property is not defined, and the <a href="../security/security.html" title="class in java.security"><code>Security</code></a> property <code>jdk.serialFilterFactory</code> is defined then it is used to configure the filter factory. If it remains unset, the filter factory is a builtin filter factory compatible with previous versions. </p>
<p>The class must be public, must have a public zero-argument constructor, implement the <a href="../util/function/binaryoperator.html" title="interface in java.util.function"><code>BinaryOperator&lt;ObjectInputFilter&gt;</code></a> interface, provide its implementation and be accessible via the <a href="../lang/classloader.html#getSystemClassLoader()">application class loader</a>. If the filter factory constructor is not invoked successfully subsequent attempts to <a href="#getSerialFilterFactory()">get the factory</a>, <a href="#setSerialFilterFactory(java.util.function.BinaryOperator)">set the factory</a>, or create an <a href="objectinputstream.html#%3Cinit%3E(java.io.InputStream)"><code>ObjectInputStream</code></a> throw <a href="../lang/illegalstateexception.html" title="class in java.lang"><code>IllegalStateException</code></a>. Deserialization is not possible with an invalid serial filter factory. The filter factory configured using the system or security property during initialization can NOT be replaced with <a href="#setSerialFilterFactory(java.util.function.BinaryOperator)"><code>Config.setSerialFilterFactory</code></a>. This ensures that a filter factory set on the command line is not overridden accidentally or intentionally by the application. </p>
<p>Setting the <code>jdk.serialFilterFactory</code> with <a href="../lang/system.html#setProperty(java.lang.String,java.lang.String)"><code>System.setProperty</code></a> <em>does not set the filter factory</em>. The syntax for the system property value and security property value is the fully qualified class name of the deserialization filter factory.</p>
</div> <dl class="notes"> <dt>Since:</dt> <dd>9</dd> </dl> </section> <section class="summary"> <section class="method-summary" id="method-summary"> <h2>Method Summary</h2> <div id="method-summary-table">  <div id="method-summary-table.tabpanel" role="tabpanel"> <table class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">                   <tr>
<th>Modifier and Type</th>
<th>Method</th>
<th>Description</th>
</tr>
<tr>
<td><code>static <a href="objectinputfilter.html" title="interface in java.io">ObjectInputFilter</a></code></td>
<td><code><a href="#createFilter(java.lang.String)" class="member-name-link">createFilter</a><wbr>(<a href="../lang/string.html" title="class in java.lang">String</a> pattern)</wbr></code></td>
<td> <div class="block">Returns an ObjectInputFilter from a string of patterns.</div> </td>
</tr>
<tr>
<td><code>static <a href="objectinputfilter.html" title="interface in java.io">ObjectInputFilter</a></code></td>
<td><code><a href="#getSerialFilter()" class="member-name-link">getSerialFilter</a>()</code></td>
<td> <div class="block">Returns the static JVM-wide deserialization filter or <code>null</code> if not configured.</div> </td>
</tr>
<tr>
<td><code>static <a href="../util/function/binaryoperator.html" title="interface in java.util.function">BinaryOperator</a><wbr>&lt;<a href="objectinputfilter.html" title="interface in java.io">ObjectInputFilter</a>&gt;</wbr></code></td>
<td><code><a href="#getSerialFilterFactory()" class="member-name-link">getSerialFilterFactory</a>()</code></td>
<td> <div class="block">Returns the JVM-wide deserialization filter factory.</div> </td>
</tr>
<tr>
<td><code>static void</code></td>
<td><code><a href="#setSerialFilter(java.io.ObjectInputFilter)" class="member-name-link">setSerialFilter</a><wbr>(<a href="objectinputfilter.html" title="interface in java.io">ObjectInputFilter</a> filter)</wbr></code></td>
<td> <div class="block">Set the static JVM-wide filter if it has not already been configured or set.</div> </td>
</tr>
<tr>
<td><code>static void</code></td>
<td><code><a href="#setSerialFilterFactory(java.util.function.BinaryOperator)" class="member-name-link">setSerialFilterFactory</a><wbr>(<a href="../util/function/binaryoperator.html" title="interface in java.util.function">BinaryOperator</a>&lt;<a href="objectinputfilter.html" title="interface in java.io">ObjectInputFilter</a>&gt; filterFactory)</wbr></code></td>
<td> <div class="block">Set the <a href="#getSerialFilterFactory()">JVM-wide deserialization filter factory</a>.</div> </td>
</tr>
</table> </div> </div> <div class="inherited-list"> <h3 id="methods-inherited-from-class-java.lang.Object">Methods declared in class java.lang.<a href="../lang/object.html" title="class in java.lang">Object</a>
</h3> <code><a href="../lang/object.html#clone()">clone</a>, <a href="../lang/object.html#equals(java.lang.Object)">equals</a>, <a href="../lang/object.html#finalize()">finalize</a>, <a href="../lang/object.html#getClass()">getClass</a>, <a href="../lang/object.html#hashCode()">hashCode</a>, <a href="../lang/object.html#notify()">notify</a>, <a href="../lang/object.html#notifyAll()">notifyAll</a>, <a href="../lang/object.html#toString()">toString</a>, <a href="../lang/object.html#wait()">wait</a>, <a href="../lang/object.html#wait(long)">wait</a>, <a href="../lang/object.html#wait(long,int)">wait</a></code>
</div> </section> </section> <section class="details"> <section class="method-details" id="method-detail"> <h2>Method Details</h2>  </section><section class="detail" id="getSerialFilter()"> <h3>getSerialFilter</h3> <pre class="lang-java" data-language="java">public static ObjectInputFilter getSerialFilter()</pre> <div class="block">Returns the static JVM-wide deserialization filter or <code>null</code> if not configured.</div> <dl class="notes"> <dt>Returns:</dt> <dd>the static JVM-wide deserialization filter or <code>null</code> if not configured</dd> <dt>Throws:</dt> <dd>
<code><a href="../lang/illegalstateexception.html" title="class in java.lang">IllegalStateException</a></code> - if the initialization of the filter from the system property <code>jdk.serialFilter</code> or the security property <code>jdk.serialFilter</code> fails.</dd> </dl> </section><section class="detail" id="setSerialFilter(java.io.ObjectInputFilter)"> <h3>setSerialFilter</h3> <pre class="lang-java" data-language="java">public static void setSerialFilter(ObjectInputFilter filter)</pre> <div class="block">Set the static JVM-wide filter if it has not already been configured or set.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>filter</code> - the deserialization filter to set as the JVM-wide filter; not null</dd> <dt>Throws:</dt> <dd>
<code><a href="../lang/securityexception.html" title="class in java.lang">SecurityException</a></code> - if there is security manager and the <code>SerializablePermission("serialFilter")</code> is not granted</dd> <dd>
<code><a href="../lang/illegalstateexception.html" title="class in java.lang">IllegalStateException</a></code> - if the filter has already been set or the initialization of the filter from the system property <code>jdk.serialFilter</code> or the security property <code>jdk.serialFilter</code> fails.</dd> </dl> </section><section class="detail" id="getSerialFilterFactory()"> <h3>getSerialFilterFactory</h3> <pre class="lang-java" data-language="java">public static BinaryOperator&lt;ObjectInputFilter&gt; getSerialFilterFactory()</pre> <div class="block">Returns the JVM-wide deserialization filter factory. If the filter factory has been <a href="#setSerialFilterFactory(java.util.function.BinaryOperator)">set</a> it is returned, otherwise, a builtin deserialization filter factory is returned. The filter factory provides a filter for every ObjectInputStream when invoked from <a href="objectinputstream.html#%3Cinit%3E(java.io.InputStream)">ObjectInputStream constructors</a> and when a stream-specific filter is set with <a href="objectinputstream.html#setObjectInputFilter(java.io.ObjectInputFilter)"><code>setObjectInputFilter</code></a>.</div> <dl class="notes"> <dt>Implementation Requirements:</dt> <dd>The builtin deserialization filter factory provides the <a href="#getSerialFilter()">static JVM-wide filter</a> when invoked from <a href="objectinputstream.html#%3Cinit%3E(java.io.InputStream)">ObjectInputStream constructors</a>. When invoked <a href="objectinputstream.html#setObjectInputFilter(java.io.ObjectInputFilter)"><code>to set the stream-specific filter</code></a> the requested filter replaces the static JVM-wide filter, unless it has already been set. The builtin deserialization filter factory implements the behavior of earlier versions of setting the initial filter in the <a href="objectinputstream.html" title="class in java.io"><code>ObjectInputStream</code></a> constructor and <a href="objectinputstream.html#setObjectInputFilter(java.io.ObjectInputFilter)"><code>ObjectInputStream.setObjectInputFilter(java.io.ObjectInputFilter)</code></a>.</dd> <dt>Returns:</dt> <dd>the JVM-wide deserialization filter factory; non-null</dd> <dt>Throws:</dt> <dd>
<code><a href="../lang/illegalstateexception.html" title="class in java.lang">IllegalStateException</a></code> - if the filter factory initialization is incomplete</dd> <dt>Since:</dt> <dd>17</dd> </dl> </section><section class="detail" id="setSerialFilterFactory(java.util.function.BinaryOperator)"> <h3>setSerialFilterFactory</h3> <pre class="lang-java" data-language="java">public static void setSerialFilterFactory(BinaryOperator&lt;ObjectInputFilter&gt; filterFactory)</pre> <div class="block">Set the <a href="#getSerialFilterFactory()">JVM-wide deserialization filter factory</a>. The filter factory can be configured exactly once with one of: setting the <code>jdk.serialFilterFactory</code> property on the command line, setting the <code>jdk.serialFilterFactory</code> property in the <a href="../security/security.html" title="class in java.security"><code>Security</code></a> file, or using this <code>setSerialFilterFactory</code> method. The filter factory can be set only before any <a href="objectinputstream.html" title="class in java.io"><code>ObjectInputStream</code></a> has been created to avoid any inconsistency in which filter factory is being used. <p>The JVM-wide filter factory is invoked when an ObjectInputStream <a href="objectinputstream.html#%3Cinit%3E()">is constructed</a> and when the <a href="objectinputstream.html#setObjectInputFilter(java.io.ObjectInputFilter)">stream-specific filter is set</a>. The parameters are the current filter and a requested filter and it returns the filter to be used for the stream. If the current filter is <code>non-null</code>, the filter factory must return a <code>non-null</code> filter; this is to prevent unintentional disabling of filtering after it has been enabled. The factory determines the filter to be used for <code>ObjectInputStream</code> streams based on its inputs, any other filters, context, or state that is available. The factory may throw runtime exceptions to signal incorrect use or invalid parameters. See the <a href="objectinputfilter.html" title="interface in java.io">filter models</a> for examples of composition and delegation.</p>
</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>filterFactory</code> - the deserialization filter factory to set as the JVM-wide filter factory; not null</dd> <dt>Throws:</dt> <dd>
<code><a href="../lang/illegalstateexception.html" title="class in java.lang">IllegalStateException</a></code> - if the builtin deserialization filter factory has already been replaced or any instance of <a href="objectinputstream.html" title="class in java.io"><code>ObjectInputStream</code></a> has been created.</dd> <dd>
<code><a href="../lang/securityexception.html" title="class in java.lang">SecurityException</a></code> - if there is security manager and the <code>SerializablePermission("serialFilter")</code> is not granted</dd> <dt>Since:</dt> <dd>17</dd> </dl> </section><section class="detail" id="createFilter(java.lang.String)"> <h3>createFilter</h3> <pre class="lang-java" data-language="java">public static ObjectInputFilter createFilter(String pattern)</pre> <div class="block">Returns an ObjectInputFilter from a string of patterns. <p> Patterns are separated by ";" (semicolon). Whitespace is significant and is considered part of the pattern. If a pattern includes an equals assignment, "<code>=</code>" it sets a limit. If a limit appears more than once the last value is used. </p>
<ul> <li>maxdepth=<code>value</code> - the maximum depth of a graph</li> <li>maxrefs=<code>value</code> - the maximum number of internal references</li> <li>maxbytes=<code>value</code> - the maximum number of bytes in the input stream</li> <li>maxarray=<code>value</code> - the maximum array length allowed</li> </ul> <p> Other patterns match or reject class or package name as returned from <a href="../lang/class.html#getName()"><code>Class.getName()</code></a> and if an optional module name is present <a href="../lang/module.html#getName()"><code>class.getModule().getName()</code></a>. Note that for arrays the element type is used in the pattern, not the array type. </p>
<ul> <li>If the pattern starts with "!", the class is rejected if the remaining pattern is matched; otherwise the class is allowed if the pattern matches. </li>
<li>If the pattern contains "/", the non-empty prefix up to the "/" is the module name; if the module name matches the module name of the class then the remaining pattern is matched with the class name. If there is no "/", the module name is not compared. </li>
<li>If the pattern ends with ".**" it matches any class in the package and all subpackages. </li>
<li>If the pattern ends with ".*" it matches any class in the package. </li>
<li>If the pattern ends with "*", it matches any class with the pattern as a prefix. </li>
<li>If the pattern is equal to the class name, it matches. </li>
<li>Otherwise, the pattern is not matched. </li>
</ul> <p> The resulting filter performs the limit checks and then tries to match the class, if any. If any of the limits are exceeded, the filter returns <a href="objectinputfilter.status.html#REJECTED"><code>Status.REJECTED</code></a>. If the class is an array type, the class to be matched is the element type. Arrays of any number of dimensions are treated the same as the element type. For example, a pattern of "<code>!example.Foo</code>", rejects creation of any instance or array of <code>example.Foo</code>. The first pattern that matches, working from left to right, determines the <a href="objectinputfilter.status.html#ALLOWED"><code>Status.ALLOWED</code></a> or <a href="objectinputfilter.status.html#REJECTED"><code>Status.REJECTED</code></a> result. If the limits are not exceeded and no pattern matches the class, the result is <a href="objectinputfilter.status.html#UNDECIDED"><code>Status.UNDECIDED</code></a>.</p>
</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>pattern</code> - the pattern string to parse; not null</dd> <dt>Returns:</dt> <dd>a filter to check a class being deserialized; <code>null</code> if no patterns</dd> <dt>Throws:</dt> <dd>
<code><a href="../lang/illegalargumentexception.html" title="class in java.lang">IllegalArgumentException</a></code> - if the pattern string is illegal or malformed and cannot be parsed. In particular, if any of the following is true: <ul> <li> if a limit is missing the name or the name is not one of "maxdepth", "maxrefs", "maxbytes", or "maxarray" </li>
<li> if the value of the limit can not be parsed by <a href="../lang/long.html#parseLong(java.lang.String,int)"><code>Long.parseLong</code></a> or is negative </li>
<li> if the pattern contains "/" and the module name is missing or the remaining pattern is empty </li>
<li> if the package is missing for ".*" and ".**" </li>
</ul>
</dd> </dl> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1993, 2023, Oracle and/or its affiliates. All rights reserved.<br>Documentation extracted from Debian's OpenJDK Development Kit package.<br>Licensed under the GNU General Public License, version 2, with the Classpath Exception.<br>Various third party code in OpenJDK is licensed under different licenses (see Debian package).<br>Java and OpenJDK are trademarks or registered trademarks of Oracle and/or its affiliates.<br>
    <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/ObjectInputFilter.Config.html" class="_attribution-link">https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/ObjectInputFilter.Config.html</a>
  </p>
</div>
