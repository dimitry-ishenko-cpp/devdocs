<h1 title="Class ScopedValue.Carrier" class="title">Class ScopedValue.Carrier</h1> <div class="inheritance" title="Inheritance Tree">
<a href="object.html" title="class in java.lang">java.lang.Object</a> <div class="inheritance">java.lang.ScopedValue.Carrier</div> </div> <section class="class-description" id="class-description"> <dl class="notes"> <dt>Enclosing class:</dt> <dd><code><a href="scopedvalue.html" title="class in java.lang">ScopedValue</a><sup><a href="scopedvalue.html#preview-java.lang.ScopedValue">PREVIEW</a></sup>&lt;<a href="scopedvalue.html" title="type parameter in ScopedValue">T</a>&gt;</code></dd> </dl>  <pre class="lang-java" data-language="java">public static final class ScopedValue.Carrier extends Object</pre> <div class="preview-block" id="preview-java.lang.ScopedValue.Carrier">
<span class="preview-label"><code>Carrier</code> is a preview API of the Java platform.</span> <div class="preview-comment">Programs can only use <code>Carrier</code> when preview features are enabled.</div> <div class="preview-comment">Preview features may be removed in a future release, or upgraded to permanent features of the Java platform.</div> </div> <div class="block">A mapping of scoped values, as <em>keys</em>, to values. <p> A <code>Carrier</code> is used to accumulate mappings so that an operation (a <a href="runnable.html" title="interface in java.lang"><code>Runnable</code></a> or <a href="../util/concurrent/callable.html" title="interface in java.util.concurrent"><code>Callable</code></a>) can be executed with all scoped values in the mapping bound to values. The following example runs an operation with <code>k1</code> bound (or rebound) to <code>v1</code>, and <code>k2</code> bound (or rebound) to <code>v2</code>. </p>
<div class="snippet-container"> <pre class="lang-java" data-language="java"><code class="language-java">    ScopedValue.<a href="#where(java.lang.ScopedValue,T)"><code>where</code></a>(k1, v1).<a href="#where(java.lang.ScopedValue,T)"><code>where</code></a>(k2, v2).run(() -&gt; ... );
</code></pre> </div> <p> A <code>Carrier</code> is immutable and thread-safe. The <a href="#where(java.lang.ScopedValue,T)"><code>where</code></a> method returns a new <code>Carrier</code> object, it does not mutate an existing mapping. </p>
<p> Unless otherwise specified, passing a <code>null</code> argument to a method in this class will cause a <a href="nullpointerexception.html" title="class in java.lang"><code>NullPointerException</code></a> to be thrown.</p>
</div> <dl class="notes"> <dt>Since:</dt> <dd>21</dd> </dl> </section> <section class="summary"> <section class="method-summary" id="method-summary"> <h2>Method Summary</h2> <div id="method-summary-table">  <div id="method-summary-table.tabpanel" role="tabpanel"> <table class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">                   <tr>
<th>Modifier and Type</th>
<th>Method</th>
<th>Description</th>
</tr>
<tr>
<td><code>&lt;R&gt; R</code></td>
<td><code><a href="#call(java.util.concurrent.Callable)" class="member-name-link">call</a><wbr>(<a href="../util/concurrent/callable.html" title="interface in java.util.concurrent">Callable</a>&lt;? extends R&gt; op)</wbr></code></td>
<td> <div class="block">Calls a value-returning operation with each scoped value in this mapping bound to its value in the current thread.</div> </td>
</tr>
<tr>
<td><code>&lt;T&gt; T</code></td>
<td><code><a href="#get(java.lang.ScopedValue)" class="member-name-link">get</a><wbr>(<a href="scopedvalue.html" title="class in java.lang">ScopedValue</a><sup><a href="scopedvalue.html#preview-java.lang.ScopedValue">PREVIEW</a></sup>&lt;T&gt; key)</wbr></code></td>
<td> <div class="block">Returns the value of a <a href="scopedvalue.html" title="class in java.lang"><code>ScopedValue</code></a><sup><a href="scopedvalue.html#preview-java.lang.ScopedValue">PREVIEW</a></sup> in this mapping.</div> </td>
</tr>
<tr>
<td><code>&lt;R&gt; R</code></td>
<td><code><a href="#get(java.util.function.Supplier)" class="member-name-link">get</a><wbr>(<a href="../util/function/supplier.html" title="interface in java.util.function">Supplier</a>&lt;? extends R&gt; op)</wbr></code></td>
<td> <div class="block">Invokes a supplier of results with each scoped value in this mapping bound to its value in the current thread.</div> </td>
</tr>
<tr>
<td><code>void</code></td>
<td><code><a href="#run(java.lang.Runnable)" class="member-name-link">run</a><wbr>(<a href="runnable.html" title="interface in java.lang">Runnable</a> op)</wbr></code></td>
<td> <div class="block">Runs an operation with each scoped value in this mapping bound to its value in the current thread.</div> </td>
</tr>
<tr>
<td><code>&lt;T&gt; <a href="scopedvalue.carrier.html" title="class in java.lang">ScopedValue.Carrier</a><sup><a href="#preview-java.lang.ScopedValue.Carrier">PREVIEW</a></sup></code></td>
<td><code><a href="#where(java.lang.ScopedValue,T)" class="member-name-link">where</a><wbr>(<a href="scopedvalue.html" title="class in java.lang">ScopedValue</a><sup><a href="scopedvalue.html#preview-java.lang.ScopedValue">PREVIEW</a></sup>&lt;T&gt; key,
 T value)</wbr></code></td>
<td> <div class="block">Returns a new <code>Carrier</code> with the mappings from this carrier plus a new mapping from <code>key</code> to <code>value</code>.</div> </td>
</tr>
</table> </div> </div> <div class="inherited-list"> <h3 id="methods-inherited-from-class-java.lang.Object">Methods declared in class java.lang.<a href="object.html" title="class in java.lang">Object</a>
</h3> <code><a href="object.html#clone()">clone</a>, <a href="object.html#equals(java.lang.Object)">equals</a>, <a href="object.html#finalize()">finalize</a>, <a href="object.html#getClass()">getClass</a>, <a href="object.html#hashCode()">hashCode</a>, <a href="object.html#notify()">notify</a>, <a href="object.html#notifyAll()">notifyAll</a>, <a href="object.html#toString()">toString</a>, <a href="object.html#wait()">wait</a>, <a href="object.html#wait(long)">wait</a>, <a href="object.html#wait(long,int)">wait</a></code>
</div> </section> </section> <section class="details"> <section class="method-details" id="method-detail"> <h2>Method Details</h2>  </section><section class="detail" id="where(java.lang.ScopedValue,T)"> <h3 id="where(java.lang.ScopedValue,java.lang.Object)">where</h3> <pre class="lang-java" data-language="java">public &lt;T&gt; ScopedValue.CarrierPREVIEW where(ScopedValuePREVIEW&lt;T&gt; key, T value)</pre> <div class="block">Returns a new <code>Carrier</code> with the mappings from this carrier plus a new mapping from <code>key</code> to <code>value</code>. If this carrier already has a mapping for the scoped value <code>key</code> then it will map to the new <code>value</code>. The current carrier is immutable, so it is not changed by this method.</div> <dl class="notes"> <dt>Type Parameters:</dt> <dd>
<code>T</code> - the type of the value</dd> <dt>Parameters:</dt> <dd>
<code>key</code> - the <code>ScopedValue</code> key</dd> <dd>
<code>value</code> - the value, can be <code>null</code>
</dd> <dt>Returns:</dt> <dd>a new <code>Carrier</code> with the mappings from this carrier plus the new mapping</dd> </dl> </section><section class="detail" id="get(java.lang.ScopedValue)"> <h3>get</h3> <pre class="lang-java" data-language="java">public &lt;T&gt; T get(ScopedValuePREVIEW&lt;T&gt; key)</pre> <div class="block">Returns the value of a <a href="scopedvalue.html" title="class in java.lang"><code>ScopedValue</code></a><sup><a href="scopedvalue.html#preview-java.lang.ScopedValue">PREVIEW</a></sup> in this mapping.</div> <dl class="notes"> <dt>Type Parameters:</dt> <dd>
<code>T</code> - the type of the value</dd> <dt>Parameters:</dt> <dd>
<code>key</code> - the <code>ScopedValue</code> key</dd> <dt>Returns:</dt> <dd>the value</dd> <dt>Throws:</dt> <dd>
<code><a href="../util/nosuchelementexception.html" title="class in java.util">NoSuchElementException</a></code> - if the key is not present in this mapping</dd> </dl> </section><section class="detail" id="call(java.util.concurrent.Callable)"> <h3>call</h3> <pre class="lang-java" data-language="java">public &lt;R&gt; R call(Callable&lt;? extends R&gt; op) throws Exception</pre> <div class="block">Calls a value-returning operation with each scoped value in this mapping bound to its value in the current thread. When the operation completes (normally or with an exception), each scoped value in the mapping will revert to being unbound, or revert to its previous value when previously bound, in the current thread. If <code>op</code> completes with an exception then it propagated by this method. <p> Scoped values are intended to be used in a <em>structured manner</em>. If code invoked directly or indirectly by the operation creates a <a href="../util/concurrent/structuredtaskscope.html" title="class in java.util.concurrent"><code>StructuredTaskScope</code></a><sup><a href="../util/concurrent/structuredtaskscope.html#preview-java.util.concurrent.StructuredTaskScope">PREVIEW</a></sup> but does not <a href="../util/concurrent/structuredtaskscope.html#close()">close</a><sup><a href="../util/concurrent/structuredtaskscope.html#preview-java.util.concurrent.StructuredTaskScope">PREVIEW</a></sup> it, then it is detected as a <em>structure violation</em> when the operation completes (normally or with an exception). In that case, the underlying construct of the <code>StructuredTaskScope</code> is closed and <a href="../util/concurrent/structureviolationexception.html" title="class in java.util.concurrent"><code>StructureViolationException</code></a><sup><a href="../util/concurrent/structureviolationexception.html#preview-java.util.concurrent.StructureViolationException">PREVIEW</a></sup> is thrown.</p>
</div> <dl class="notes"> <dt>Type Parameters:</dt> <dd>
<code>R</code> - the type of the result of the operation</dd> <dt>Parameters:</dt> <dd>
<code>op</code> - the operation to run</dd> <dt>Returns:</dt> <dd>the result</dd> <dt>Throws:</dt> <dd>
<code><a href="../util/concurrent/structureviolationexception.html" title="class in java.util.concurrent">StructureViolationException</a><sup><a href="../util/concurrent/structureviolationexception.html#preview-java.util.concurrent.StructureViolationException">PREVIEW</a></sup></code> - if a structure violation is detected</dd> <dd>
<code><a href="exception.html" title="class in java.lang">Exception</a></code> - if <code>op</code> completes with an exception</dd> <dt>See Also:</dt> <dd> <ul class="tag-list-long"> <li>
<a href="scopedvalue.html#callWhere(java.lang.ScopedValue,T,java.util.concurrent.Callable)"><code>ScopedValue.callWhere(ScopedValue, Object, Callable)</code></a><sup><a href="scopedvalue.html#preview-java.lang.ScopedValue">PREVIEW</a></sup>
</li> </ul> </dd> </dl> </section><section class="detail" id="get(java.util.function.Supplier)"> <h3>get</h3> <pre class="lang-java" data-language="java">public &lt;R&gt; R get(Supplier&lt;? extends R&gt; op)</pre> <div class="block">Invokes a supplier of results with each scoped value in this mapping bound to its value in the current thread. When the operation completes (normally or with an exception), each scoped value in the mapping will revert to being unbound, or revert to its previous value when previously bound, in the current thread. If <code>op</code> completes with an exception then it propagated by this method. <p> Scoped values are intended to be used in a <em>structured manner</em>. If code invoked directly or indirectly by the operation creates a <a href="../util/concurrent/structuredtaskscope.html" title="class in java.util.concurrent"><code>StructuredTaskScope</code></a><sup><a href="../util/concurrent/structuredtaskscope.html#preview-java.util.concurrent.StructuredTaskScope">PREVIEW</a></sup> but does not <a href="../util/concurrent/structuredtaskscope.html#close()">close</a><sup><a href="../util/concurrent/structuredtaskscope.html#preview-java.util.concurrent.StructuredTaskScope">PREVIEW</a></sup> it, then it is detected as a <em>structure violation</em> when the operation completes (normally or with an exception). In that case, the underlying construct of the <code>StructuredTaskScope</code> is closed and <a href="../util/concurrent/structureviolationexception.html" title="class in java.util.concurrent"><code>StructureViolationException</code></a><sup><a href="../util/concurrent/structureviolationexception.html#preview-java.util.concurrent.StructureViolationException">PREVIEW</a></sup> is thrown.</p>
</div> <dl class="notes"> <dt>Type Parameters:</dt> <dd>
<code>R</code> - the type of the result of the operation</dd> <dt>Parameters:</dt> <dd>
<code>op</code> - the operation to run</dd> <dt>Returns:</dt> <dd>the result</dd> <dt>Throws:</dt> <dd>
<code><a href="../util/concurrent/structureviolationexception.html" title="class in java.util.concurrent">StructureViolationException</a><sup><a href="../util/concurrent/structureviolationexception.html#preview-java.util.concurrent.StructureViolationException">PREVIEW</a></sup></code> - if a structure violation is detected</dd> <dt>See Also:</dt> <dd> <ul class="tag-list-long"> <li>
<a href="scopedvalue.html#getWhere(java.lang.ScopedValue,T,java.util.function.Supplier)"><code>ScopedValue.getWhere(ScopedValue, Object, Supplier)</code></a><sup><a href="scopedvalue.html#preview-java.lang.ScopedValue">PREVIEW</a></sup>
</li> </ul> </dd> </dl> </section><section class="detail" id="run(java.lang.Runnable)"> <h3>run</h3> <pre class="lang-java" data-language="java">public void run(Runnable op)</pre> <div class="block">Runs an operation with each scoped value in this mapping bound to its value in the current thread. When the operation completes (normally or with an exception), each scoped value in the mapping will revert to being unbound, or revert to its previous value when previously bound, in the current thread. If <code>op</code> completes with an exception then it propagated by this method. <p> Scoped values are intended to be used in a <em>structured manner</em>. If code invoked directly or indirectly by the operation creates a <a href="../util/concurrent/structuredtaskscope.html" title="class in java.util.concurrent"><code>StructuredTaskScope</code></a><sup><a href="../util/concurrent/structuredtaskscope.html#preview-java.util.concurrent.StructuredTaskScope">PREVIEW</a></sup> but does not <a href="../util/concurrent/structuredtaskscope.html#close()">close</a><sup><a href="../util/concurrent/structuredtaskscope.html#preview-java.util.concurrent.StructuredTaskScope">PREVIEW</a></sup> it, then it is detected as a <em>structure violation</em> when the operation completes (normally or with an exception). In that case, the underlying construct of the <code>StructuredTaskScope</code> is closed and <a href="../util/concurrent/structureviolationexception.html" title="class in java.util.concurrent"><code>StructureViolationException</code></a><sup><a href="../util/concurrent/structureviolationexception.html#preview-java.util.concurrent.StructureViolationException">PREVIEW</a></sup> is thrown.</p>
</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>op</code> - the operation to run</dd> <dt>Throws:</dt> <dd>
<code><a href="../util/concurrent/structureviolationexception.html" title="class in java.util.concurrent">StructureViolationException</a><sup><a href="../util/concurrent/structureviolationexception.html#preview-java.util.concurrent.StructureViolationException">PREVIEW</a></sup></code> - if a structure violation is detected</dd> <dt>See Also:</dt> <dd> <ul class="tag-list-long"> <li>
<a href="scopedvalue.html#runWhere(java.lang.ScopedValue,T,java.lang.Runnable)"><code>ScopedValue.runWhere(ScopedValue, Object, Runnable)</code></a><sup><a href="scopedvalue.html#preview-java.lang.ScopedValue">PREVIEW</a></sup>
</li> </ul> </dd> </dl> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1993, 2023, Oracle and/or its affiliates. All rights reserved.<br>Documentation extracted from Debian's OpenJDK Development Kit package.<br>Licensed under the GNU General Public License, version 2, with the Classpath Exception.<br>Various third party code in OpenJDK is licensed under different licenses (see Debian package).<br>Java and OpenJDK are trademarks or registered trademarks of Oracle and/or its affiliates.<br>
    <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/ScopedValue.Carrier.html" class="_attribution-link">https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/ScopedValue.Carrier.html</a>
  </p>
</div>
