<h1 title="Interface AclFileAttributeView" class="title">Interface AclFileAttributeView</h1> <section class="class-description" id="class-description"> <dl class="notes"> <dt>All Superinterfaces:</dt> <dd>
<code><a href="attributeview.html" title="interface in java.nio.file.attribute">AttributeView</a></code>, <code><a href="fileattributeview.html" title="interface in java.nio.file.attribute">FileAttributeView</a></code>, <code><a href="fileownerattributeview.html" title="interface in java.nio.file.attribute">FileOwnerAttributeView</a></code>
</dd> </dl>  <pre class="lang-java" data-language="java">public interface AclFileAttributeView extends FileOwnerAttributeView</pre> <div class="block">A file attribute view that supports reading or updating a file's Access Control Lists (ACL) or file owner attributes. <p> ACLs are used to specify access rights to file system objects. An ACL is an ordered list of <a href="aclentry.html" title="class in java.nio.file.attribute"><code>access-control-entries</code></a>, each specifying a <a href="userprincipal.html" title="interface in java.nio.file.attribute"><code>UserPrincipal</code></a> and the level of access for that user principal. This file attribute view defines the <a href="#getAcl()"><code>getAcl</code></a>, and <a href="#setAcl(java.util.List)"><code>setAcl</code></a> methods to read and write ACLs based on the ACL model specified in <a href="http://www.ietf.org/rfc/rfc3530.txt"><i>RFC 3530: Network File System (NFS) version 4 Protocol</i></a>. This file attribute view is intended for file system implementations that support the NFSv4 ACL model or have a <em>well-defined</em> mapping between the NFSv4 ACL model and the ACL model used by the file system. The details of such mapping are implementation dependent and are therefore unspecified. </p>
<p> This class also extends <code>FileOwnerAttributeView</code> so as to define methods to get and set the file owner. </p>
<p> When a file system provides access to a set of <a href="../filestore.html" title="class in java.nio.file"><code>file-systems</code></a> that are not homogeneous then only some of the file systems may support ACLs. The <a href="../filestore.html#supportsFileAttributeView(java.lang.Class)"><code>supportsFileAttributeView</code></a> method can be used to test if a file system supports ACLs. </p>
<h2 id="interoperability-heading">Interoperability</h2> RFC 3530 allows for special user identities to be used on platforms that support the POSIX defined access permissions. The special user identities are "<code>OWNER@</code>", "<code>GROUP@</code>", and "<code>EVERYONE@</code>". When both the <code>AclFileAttributeView</code> and the <a href="posixfileattributeview.html" title="interface in java.nio.file.attribute"><code>PosixFileAttributeView</code></a> are supported then these special user identities may be included in ACL <a href="aclentry.html" title="class in java.nio.file.attribute"><code>entries</code></a> that are read or written. The file system's <a href="userprincipallookupservice.html" title="class in java.nio.file.attribute"><code>UserPrincipalLookupService</code></a> may be used to obtain a <a href="userprincipal.html" title="interface in java.nio.file.attribute"><code>UserPrincipal</code></a> to represent these special identities by invoking the <a href="userprincipallookupservice.html#lookupPrincipalByName(java.lang.String)"><code>lookupPrincipalByName</code></a> method. <p> <b>Usage Example:</b> Suppose we wish to add an entry to an existing ACL to grant "joe" access: </p>
<div class="snippet-container"> <pre class="lang-java" data-language="java"><code class="language-java">    // lookup "joe"
    UserPrincipal joe = file.getFileSystem().getUserPrincipalLookupService()
        .lookupPrincipalByName("joe");

    // get view
    AclFileAttributeView view = Files.getFileAttributeView(file, AclFileAttributeView.class);

    // create ACE to give "joe" read access
    AclEntry entry = AclEntry.newBuilder()
        .setType(AclEntryType.ALLOW)
        .setPrincipal(joe)
        .setPermissions(AclEntryPermission.READ_DATA, AclEntryPermission.READ_ATTRIBUTES)
        .build();

    // read ACL, insert ACE, re-write ACL
    List&lt;AclEntry&gt; acl = view.getAcl();
    acl.add(0, entry);   // insert before any DENY entries
    view.setAcl(acl);
</code></pre> </div> <h2 id="dynamic-access-heading"> Dynamic Access </h2> <p> Where dynamic access to file attributes is required, the attributes supported by this attribute view are as follows: </p>
<blockquote> <table class="striped"> <caption style="display:none">Supported attributes</caption> <thead> <tr> <th scope="col"> Name </th> <th scope="col"> Type </th> </tr> </thead> <tbody> <tr> <th scope="row"> "acl" </th> <td> <a href="../../../util/list.html" title="interface in java.util"><code>List</code></a>&lt;<a href="aclentry.html" title="class in java.nio.file.attribute"><code>AclEntry</code></a>&gt; </td> </tr> <tr> <th scope="row"> "owner" </th> <td> <a href="userprincipal.html" title="interface in java.nio.file.attribute"><code>UserPrincipal</code></a> </td> </tr> </tbody> </table> </blockquote> <p> The <a href="../files.html#getAttribute(java.nio.file.Path,java.lang.String,java.nio.file.LinkOption...)"><code>getAttribute</code></a> method may be used to read the ACL or owner attributes as if by invoking the <a href="#getAcl()"><code>getAcl</code></a> or <a href="fileownerattributeview.html#getOwner()"><code>getOwner</code></a> methods. </p>
<p> The <a href="../files.html#setAttribute(java.nio.file.Path,java.lang.String,java.lang.Object,java.nio.file.LinkOption...)"><code>setAttribute</code></a> method may be used to update the ACL or owner attributes as if by invoking the <a href="#setAcl(java.util.List)"><code>setAcl</code></a> or <a href="fileownerattributeview.html#setOwner(java.nio.file.attribute.UserPrincipal)"><code>setOwner</code></a> methods. </p>
<h2 id="setting-the-acl-when-creating-a-file-heading"> Setting the ACL when creating a file </h2> <p> Implementations supporting this attribute view may also support setting the initial ACL when creating a file or directory. The initial ACL may be provided to methods such as <a href="../files.html#createFile(java.nio.file.Path,java.nio.file.attribute.FileAttribute...)"><code>createFile</code></a> or <a href="../files.html#createDirectory(java.nio.file.Path,java.nio.file.attribute.FileAttribute...)"><code>createDirectory</code></a> as an <a href="fileattribute.html" title="interface in java.nio.file.attribute"><code>FileAttribute</code></a> with <a href="fileattribute.html#name()"><code>name</code></a> <code>"acl:acl"</code> and a <a href="fileattribute.html#value()"><code>value</code></a> that is the list of <code>AclEntry</code> objects. </p>
<p> Where an implementation supports an ACL model that differs from the NFSv4 defined ACL model then setting the initial ACL when creating the file must translate the ACL to the model supported by the file system. Methods that create a file should reject (by throwing <a href="../../../io/ioexception.html" title="class in java.io"><code>IOException</code></a>) any attempt to create a file that would be less secure as a result of the translation.</p>
</div> <dl class="notes"> <dt>Since:</dt> <dd>1.7</dd> <dt>External Specifications</dt> <dd> <ul class="tag-list-long"> <li><a href="https://www.rfc-editor.org/info/rfc3530"><span id="RFC3530:NetworkFileSystem(NFS)version4Protocol" class="search-tag-result">RFC 3530: Network File System (NFS) version 4 Protocol</span></a></li> </ul> </dd> </dl> </section> <section class="summary"> <section class="method-summary" id="method-summary"> <h2>Method Summary</h2> <div id="method-summary-table">  <div id="method-summary-table.tabpanel" role="tabpanel"> <table class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">             <tr>
<th>Modifier and Type</th>
<th>Method</th>
<th>Description</th>
</tr>
<tr>
<td><code><a href="../../../util/list.html" title="interface in java.util">List</a><wbr>&lt;<a href="aclentry.html" title="class in java.nio.file.attribute">AclEntry</a>&gt;</wbr></code></td>
<td><code><a href="#getAcl()" class="member-name-link">getAcl</a>()</code></td>
<td> <div class="block">Reads the access control list.</div> </td>
</tr>
<tr>
<td><code><a href="../../../lang/string.html" title="class in java.lang">String</a></code></td>
<td><code><a href="#name()" class="member-name-link">name</a>()</code></td>
<td> <div class="block">Returns the name of the attribute view.</div> </td>
</tr>
<tr>
<td><code>void</code></td>
<td><code><a href="#setAcl(java.util.List)" class="member-name-link">setAcl</a><wbr>(<a href="../../../util/list.html" title="interface in java.util">List</a>&lt;<a href="aclentry.html" title="class in java.nio.file.attribute">AclEntry</a>&gt;Â acl)</wbr></code></td>
<td> <div class="block">Updates (replace) the access control list.</div> </td>
</tr>
</table> </div> </div> <div class="inherited-list"> <h3 id="methods-inherited-from-class-java.nio.file.attribute.FileOwnerAttributeView">Methods declared in interface java.nio.file.attribute.<a href="fileownerattributeview.html" title="interface in java.nio.file.attribute">FileOwnerAttributeView</a>
</h3> <code><a href="fileownerattributeview.html#getOwner()">getOwner</a>, <a href="fileownerattributeview.html#setOwner(java.nio.file.attribute.UserPrincipal)">setOwner</a></code>
</div> </section> </section> <section class="details"> <section class="method-details" id="method-detail"> <h2>Method Details</h2>  </section><section class="detail" id="name()"> <h3>name</h3> <pre class="lang-java" data-language="java">String name()</pre> <div class="block">Returns the name of the attribute view. Attribute views of this type have the name <code>"acl"</code>.</div> <dl class="notes"> <dt>Specified by:</dt> <dd>
<code><a href="attributeview.html#name()">name</a></code> in interface <code><a href="attributeview.html" title="interface in java.nio.file.attribute">AttributeView</a></code>
</dd> <dt>Specified by:</dt> <dd>
<code><a href="fileownerattributeview.html#name()">name</a></code> in interface <code><a href="fileownerattributeview.html" title="interface in java.nio.file.attribute">FileOwnerAttributeView</a></code>
</dd> <dt>Returns:</dt> <dd>the name of the attribute view</dd> </dl> </section><section class="detail" id="getAcl()"> <h3>getAcl</h3> <pre class="lang-java" data-language="java">List&lt;AclEntry&gt; getAcl() throws IOException</pre> <div class="block">Reads the access control list. <p> When the file system uses an ACL model that differs from the NFSv4 defined ACL model, then this method returns an ACL that is the translation of the ACL to the NFSv4 ACL model. </p>
<p> The returned list is modifiable so as to facilitate changes to the existing ACL. The <a href="#setAcl(java.util.List)"><code>setAcl</code></a> method is used to update the file's ACL attribute.</p>
</div> <dl class="notes"> <dt>Returns:</dt> <dd>an ordered list of <a href="aclentry.html" title="class in java.nio.file.attribute"><code>entries</code></a> representing the ACL</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../io/ioexception.html" title="class in java.io">IOException</a></code> - if an I/O error occurs</dd> <dd>
<code><a href="../../../lang/securityexception.html" title="class in java.lang">SecurityException</a></code> - In the case of the default provider, a security manager is installed, and it denies <a href="../../../lang/runtimepermission.html" title="class in java.lang"><code>RuntimePermission</code></a><code>("accessUserInformation")</code> or its <a href="../../../lang/securitymanager.html#checkRead(java.lang.String)"><code>checkRead</code></a> method denies read access to the file.</dd> </dl> </section><section class="detail" id="setAcl(java.util.List)"> <h3>setAcl</h3> <pre class="lang-java" data-language="java">void setAcl(List&lt;AclEntry&gt; acl) throws IOException</pre> <div class="block">Updates (replace) the access control list. <p> Where the file system supports Access Control Lists, and it uses an ACL model that differs from the NFSv4 defined ACL model, then this method must translate the ACL to the model supported by the file system. This method should reject (by throwing <a href="../../../io/ioexception.html" title="class in java.io"><code>IOException</code></a>) any attempt to write an ACL that would appear to make the file more secure than would be the case if the ACL were updated. Where an implementation does not support a mapping of <a href="aclentrytype.html#AUDIT"><code>AclEntryType.AUDIT</code></a> or <a href="aclentrytype.html#ALARM"><code>AclEntryType.ALARM</code></a> entries, then this method ignores these entries when writing the ACL. </p>
<p> If an ACL entry contains a <a href="aclentry.html#principal()"><code>user-principal</code></a> that is not associated with the same provider as this attribute view then <a href="../providermismatchexception.html" title="class in java.nio.file"><code>ProviderMismatchException</code></a> is thrown. Additional validation, if any, is implementation dependent. </p>
<p> If the file system supports other security related file attributes (such as a file <a href="posixfileattributes.html#permissions()"><code>access-permissions</code></a> for example), the updating the access control list may also cause these security related attributes to be updated.</p>
</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>acl</code> - the new access control list</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../io/ioexception.html" title="class in java.io">IOException</a></code> - if an I/O error occurs or the ACL is invalid</dd> <dd>
<code><a href="../../../lang/securityexception.html" title="class in java.lang">SecurityException</a></code> - In the case of the default provider, a security manager is installed, it denies <a href="../../../lang/runtimepermission.html" title="class in java.lang"><code>RuntimePermission</code></a><code>("accessUserInformation")</code> or its <a href="../../../lang/securitymanager.html#checkWrite(java.lang.String)"><code>checkWrite</code></a> method denies write access to the file.</dd> </dl> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1993, 2023, Oracle and/or its affiliates. All rights reserved.<br>Documentation extracted from Debian's OpenJDK Development Kit package.<br>Licensed under the GNU General Public License, version 2, with the Classpath Exception.<br>Various third party code in OpenJDK is licensed under different licenses (see Debian package).<br>Java and OpenJDK are trademarks or registered trademarks of Oracle and/or its affiliates.<br>
    <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/nio/file/attribute/AclFileAttributeView.html" class="_attribution-link">https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/nio/file/attribute/AclFileAttributeView.html</a>
  </p>
</div>
