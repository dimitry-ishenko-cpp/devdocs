<h1 title="Interface RelinkableCallSite" class="title">Interface RelinkableCallSite</h1> <section class="class-description" id="class-description"> <dl class="notes"> <dt>All Known Implementing Classes:</dt> <dd>
<code><a href="support/abstractrelinkablecallsite.html" title="class in jdk.dynalink.support">AbstractRelinkableCallSite</a></code>, <code><a href="support/chainedcallsite.html" title="class in jdk.dynalink.support">ChainedCallSite</a></code>, <code><a href="support/simplerelinkablecallsite.html" title="class in jdk.dynalink.support">SimpleRelinkableCallSite</a></code>
</dd> </dl>  <pre class="lang-java" data-language="java">public interface RelinkableCallSite</pre> <div class="block">Interface for call sites managed by a <a href="dynamiclinker.html" title="class in jdk.dynalink"><code>DynamicLinker</code></a>. Users of Dynalink must use subclasses of <a href="../../../java.base/java/lang/invoke/callsite.html" title="class in java.lang.invoke"><code>CallSite</code></a> that also implement this interface as their call site implementations. There is a readily usable <a href="support/simplerelinkablecallsite.html" title="class in jdk.dynalink.support"><code>SimpleRelinkableCallSite</code></a> subclass that implements monomorphic inline caching strategy as well as <a href="support/chainedcallsite.html" title="class in jdk.dynalink.support"><code>ChainedCallSite</code></a> that implements a polymorphic inline caching strategy and retains a chain of previously linked method handles. A relinkable call site will be managed by a <a href="dynamiclinker.html" title="class in jdk.dynalink"><code>DynamicLinker</code></a> object after being associated with it using its <a href="dynamiclinker.html#link(T)"><code>DynamicLinker.link(RelinkableCallSite)</code></a> method.</div> </section> <section class="summary"> <section class="method-summary" id="method-summary"> <h2>Method Summary</h2> <div id="method-summary-table">  <div id="method-summary-table.tabpanel" role="tabpanel"> <table class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">                <tr>
<th>Modifier and Type</th>
<th>Method</th>
<th>Description</th>
</tr>
<tr>
<td><code><a href="callsitedescriptor.html" title="class in jdk.dynalink">CallSiteDescriptor</a></code></td>
<td><code><a href="#getDescriptor()" class="member-name-link">getDescriptor</a>()</code></td>
<td> <div class="block">Returns the descriptor for this call site.</div> </td>
</tr>
<tr>
<td><code>void</code></td>
<td><code><a href="#initialize(java.lang.invoke.MethodHandle)" class="member-name-link">initialize</a><wbr>(<a href="../../../java.base/java/lang/invoke/methodhandle.html" title="class in java.lang.invoke">MethodHandle</a> relinkAndInvoke)</wbr></code></td>
<td> <div class="block">Invoked by dynamic linker to initialize the relinkable call site by setting a relink-and-invoke method handle.</div> </td>
</tr>
<tr>
<td><code>void</code></td>
<td><code><a href="#relink(jdk.dynalink.linker.GuardedInvocation,java.lang.invoke.MethodHandle)" class="member-name-link">relink</a><wbr>(<a href="linker/guardedinvocation.html" title="class in jdk.dynalink.linker">GuardedInvocation</a> guardedInvocation,
 <a href="../../../java.base/java/lang/invoke/methodhandle.html" title="class in java.lang.invoke">MethodHandle</a> relinkAndInvoke)</wbr></code></td>
<td> <div class="block">This method will be called by the dynamic linker every time the call site is relinked (but see <a href="#resetAndRelink(jdk.dynalink.linker.GuardedInvocation,java.lang.invoke.MethodHandle)"><code>resetAndRelink(GuardedInvocation, MethodHandle)</code></a> for an exception).</div> </td>
</tr>
<tr>
<td><code>void</code></td>
<td><code><a href="#resetAndRelink(jdk.dynalink.linker.GuardedInvocation,java.lang.invoke.MethodHandle)" class="member-name-link">resetAndRelink</a><wbr>(<a href="linker/guardedinvocation.html" title="class in jdk.dynalink.linker">GuardedInvocation</a> guardedInvocation,
 <a href="../../../java.base/java/lang/invoke/methodhandle.html" title="class in java.lang.invoke">MethodHandle</a> relinkAndInvoke)</wbr></code></td>
<td> <div class="block">This method will be called by the dynamic linker every time the call site is relinked <b>and</b> the linker wishes the call site to throw away any prior linkage state (that is how it differs from <a href="#relink(jdk.dynalink.linker.GuardedInvocation,java.lang.invoke.MethodHandle)"><code>relink(GuardedInvocation, MethodHandle)</code></a>).</div> </td>
</tr>
</table> </div> </div> </section> </section> <section class="details"> <section class="method-details" id="method-detail"> <h2>Method Details</h2>  </section><section class="detail" id="initialize(java.lang.invoke.MethodHandle)"> <h3>initialize</h3> <pre class="lang-java" data-language="java">void initialize(MethodHandle relinkAndInvoke)</pre> <div class="block">Invoked by dynamic linker to initialize the relinkable call site by setting a relink-and-invoke method handle. The call site implementation is supposed to set this method handle as its target using <a href="../../../java.base/java/lang/invoke/callsite.html#setTarget(java.lang.invoke.MethodHandle)"><code>CallSite.setTarget(MethodHandle)</code></a>. Relink-and-invoke is the initial method handle set by <a href="dynamiclinker.html#link(T)"><code>DynamicLinker.link(RelinkableCallSite)</code></a> that will cause the call site to be relinked to an appropriate target on its first invocation based on its arguments, and that linked target will then be invoked (hence the name). This linking protocol effectively delays linking until the call site is invoked with actual arguments and thus ensures that linkers can make nuanced linking decisions based on those arguments and not just on the static method type of the call site.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>relinkAndInvoke</code> - a relink-and-invoke method handle supplied by Dynalink.</dd> </dl> </section><section class="detail" id="getDescriptor()"> <h3>getDescriptor</h3> <pre class="lang-java" data-language="java">CallSiteDescriptor getDescriptor()</pre> <div class="block">Returns the descriptor for this call site.</div> <dl class="notes"> <dt>Returns:</dt> <dd>the descriptor for this call site.</dd> </dl> </section><section class="detail" id="relink(jdk.dynalink.linker.GuardedInvocation,java.lang.invoke.MethodHandle)"> <h3>relink</h3> <pre class="lang-java" data-language="java">void relink(GuardedInvocation guardedInvocation, MethodHandle relinkAndInvoke)</pre> <div class="block">This method will be called by the dynamic linker every time the call site is relinked (but see <a href="#resetAndRelink(jdk.dynalink.linker.GuardedInvocation,java.lang.invoke.MethodHandle)"><code>resetAndRelink(GuardedInvocation, MethodHandle)</code></a> for an exception). It will be passed a <code>GuardedInvocation</code> that the call site should incorporate into its target method handle. When this method is called, the call site is allowed to keep other non-invalidated invocations around for implementation of polymorphic inline caches and compose them with this invocation to form its final target.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>guardedInvocation</code> - the guarded invocation that the call site should incorporate into its target method handle.</dd> <dd>
<code>relinkAndInvoke</code> - a relink-and-invoke method handle. This is a method handle matching the method type of the call site that is supplied by the <a href="dynamiclinker.html" title="class in jdk.dynalink"><code>DynamicLinker</code></a> as a callback. It should be used by this call site as the ultimate fallback when it can't invoke its target with the passed arguments. The fallback method is such that when it's invoked, it'll try to obtain an adequate target <a href="linker/guardedinvocation.html" title="class in jdk.dynalink.linker"><code>GuardedInvocation</code></a> for the invocation, and subsequently invoke <a href="#relink(jdk.dynalink.linker.GuardedInvocation,java.lang.invoke.MethodHandle)"><code>relink(GuardedInvocation, MethodHandle)</code></a> or <a href="#resetAndRelink(jdk.dynalink.linker.GuardedInvocation,java.lang.invoke.MethodHandle)"><code>resetAndRelink(GuardedInvocation, MethodHandle)</code></a>, and finally invoke the target.</dd> </dl> </section><section class="detail" id="resetAndRelink(jdk.dynalink.linker.GuardedInvocation,java.lang.invoke.MethodHandle)"> <h3>resetAndRelink</h3> <pre class="lang-java" data-language="java">void resetAndRelink(GuardedInvocation guardedInvocation, MethodHandle relinkAndInvoke)</pre> <div class="block">This method will be called by the dynamic linker every time the call site is relinked <b>and</b> the linker wishes the call site to throw away any prior linkage state (that is how it differs from <a href="#relink(jdk.dynalink.linker.GuardedInvocation,java.lang.invoke.MethodHandle)"><code>relink(GuardedInvocation, MethodHandle)</code></a>). It will be passed a <code>GuardedInvocation</code> that the call site should use to build its new target method handle. When this method is called, the call site is discouraged from keeping any previous state, and is supposed to only link the current invocation.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>guardedInvocation</code> - the guarded invocation that the call site should use to build its target method handle.</dd> <dd>
<code>relinkAndInvoke</code> - a relink-and-invoke method handle. This is a method handle matching the method type of the call site that is supplied by the <a href="dynamiclinker.html" title="class in jdk.dynalink"><code>DynamicLinker</code></a> as a callback. It should be used by this call site as the ultimate fallback when it can't invoke its target with the passed arguments. The fallback method is such that when it's invoked, it'll try to obtain an adequate target <a href="linker/guardedinvocation.html" title="class in jdk.dynalink.linker"><code>GuardedInvocation</code></a> for the invocation, and subsequently invoke <a href="#relink(jdk.dynalink.linker.GuardedInvocation,java.lang.invoke.MethodHandle)"><code>relink(GuardedInvocation, MethodHandle)</code></a> or <a href="#resetAndRelink(jdk.dynalink.linker.GuardedInvocation,java.lang.invoke.MethodHandle)"><code>resetAndRelink(GuardedInvocation, MethodHandle)</code></a>, and finally invoke the target.</dd> </dl> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1993, 2023, Oracle and/or its affiliates. All rights reserved.<br>Documentation extracted from Debian's OpenJDK Development Kit package.<br>Licensed under the GNU General Public License, version 2, with the Classpath Exception.<br>Various third party code in OpenJDK is licensed under different licenses (see Debian package).<br>Java and OpenJDK are trademarks or registered trademarks of Oracle and/or its affiliates.<br>
    <a href="https://docs.oracle.com/en/java/javase/21/docs/api/jdk.dynalink/jdk/dynalink/RelinkableCallSite.html" class="_attribution-link">https://docs.oracle.com/en/java/javase/21/docs/api/jdk.dynalink/jdk/dynalink/RelinkableCallSite.html</a>
  </p>
</div>
