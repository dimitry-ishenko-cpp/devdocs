<div id="col-content" data-swiftype-index="true"> <div id="supermarketrb-settings"><h1>supermarket.rb Settings</h1></div>  <div class="prose"> <p data-swiftype-index="false"> <a href="https://github.com/chef/supermarket/blob/main/docs-chef-io/content/supermarket/config_rb_supermarket.md" alt="Link to page on GitHub repository">[edit on GitHub]</a> </p> <p>The supermarket.rb file contains all of the non-default configuration settings used by the Chef Supermarket. The default settings are built-in to the Chef Supermarket configuration, and should only be added to the supermarket.rb file to apply non-default values. These configuration settings are processed when the <code>supermarket-ctl reconfigure</code> command is run. The supermarket.rb file is a Ruby file, which means that conditional statements can be used in the configuration file.</p> <h2 id="settings">Settings</h2> <p>The following settings are available in the <code>/etc/supermarket/supermarket.rb</code> file.</p> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> You must run <code>supermarket-ctl reconfigure</code> to apply any changes made in the <code>supermarket.rb</code> file. </div> </div> <h3 id="general">General</h3> <p>This configuration file has the following general settings:</p> <dl> <dt><code>default['enterprise']['name']</code></dt> <dd> <p>The enterprise name that is used by the <a href="https://github.com/chef-cookbooks/enterprise-chef-common">enterprise-chef-common</a> cookbook. Default value: <code>'supermarket'</code>.</p> </dd> <dt><code>default['supermarket']['app_directory']</code></dt> <dd> <p>Default value: <code>"#{node['supermarket']['install_directory']}/embedded/service/supermarket"</code>.</p> </dd> <dt><code>default['supermarket']['chef_server_url']</code></dt> <dd> <p>The URL of the Chef Infra Server.</p> </dd> <dt><code>default['supermarket']['config_directory']</code></dt> <dd> <p>The directory that is used to store Supermarket configuration filesDefault value: <code>'/etc/supermarket'</code>.</p> </dd> <dt><code>default['supermarket']['features']</code></dt> <dd> <p>Use to enable additional features, such as announcements and GitHub integration. Default value: <code>'tools'</code>.</p> <p>Features currently available: <code>tools</code>, <code>fieri</code>, <code>announcement</code>, <code>github</code>, and <code>no_crawl</code>.</p> </dd> <dt><code>default['supermarket']['fqdn']</code></dt> <dd> <p>The fully qualified domain name for the Supermarket server. Defaults to using the current FQDN for the machine.</p> </dd> <dt><code>default['supermarket']['from_email']</code></dt> <dd> <p>The default sender address of all Supermarket mailers. Default value: <code>nil</code>.</p> </dd> <dt><code>default['supermarket']['group']</code></dt> <dd> <p>The system group that is used to manage Supermarket on the server. Default value: <code>'supermarket'</code>.</p> </dd> <dt><code>default['supermarket']['install_directory']</code></dt> <dd> <p>The directory where Supermarket is installed. Default value: <code>'/opt/supermarket'</code>.</p> </dd> <dt><code>default['supermarket']['install_path']</code></dt> <dd> <p>The directory in which Chef Supermarket is installed. Default value: <code>node['supermarket']['install_directory']</code>.</p> </dd> <dt><code>default['supermarket']['log_directory']</code></dt> <dd> <p>The directory that Supermarket will use to store logs. Default value: <code>'/var/log/supermarket'</code>.</p> </dd> <dt><code>default['supermarket']['log_mode']</code></dt> <dd> <p>The Supermarket log directory file permissions. Default value: <code>0700</code>.</p> </dd> <dt><code>default['supermarket']['sysvinit_id']</code></dt> <dd> <p>Use to specify 1-4 characters that define a unique identifier for the file located in <code>/etc/inittab</code>. Default value: <code>SUP</code>.</p> </dd> <dt><code>default['supermarket']['user']</code></dt> <dd> <p>The system user that is used to run Supermarket. Default value: <code>'supermarket'</code>.</p> </dd> <dt><code>default['supermarket']['var_directory']</code></dt> <dd> <p>The directory where data and cookbooks are installed. Default value: <code>'/var/opt/supermarket'</code>.</p> </dd> </dl> <h3 id="amazon-simple-storage-service-s3">Amazon Simple Storage Service (S3)</h3> <p>Use these settings to upload cookbooks to an Amazon Simple Storage Service (S3) bucket.</p> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> Encrypted S3 buckets are currently not supported. </div> </div> <dl> <dt><code>default['supermarket']['cdn_url']</code></dt> <dd> <p>The URL for the content delivery network. (optional)</p> </dd> <dt><code>default['supermarket']['s3_access_key_id']</code></dt> <dd> <p>The secret key. (required to use S3)</p> </dd> <dt><code>default['supermarket']['s3_bucket']</code></dt> <dd> <p>The bucket name. (required to use S3)</p> </dd> <dt><code>default['supermarket']['s3_path']</code></dt> <dd> <p><strong>(Optional)</strong> Directory structure to prepend to the standard path of the directory containing cookbooks. Set this if you must store cookbooks in a deeper directory structure within a shared bucket. However, keep in mind that dedicated S3 buckets are recommended for cookbook storage and distribution.</p> </dd> <dt><code>default['supermarket']['s3_private_objects']</code></dt> <dd> <p>Whether cookbooks stored in S3 should be public or private. <code>true/false</code> Default: <code>false</code></p> </dd> <dt><code>default['supermarket']['s3_region']</code></dt> <dd> <p>The region of the bucket. (required to use S3)</p> </dd> <dt><code>default['supermarket']['s3_secret_access_key']</code></dt> <dd> <p>The access key identifier. (required to use S3)</p> </dd> </dl> <h3 id="database">Database</h3> <p>The following database options are available:</p> <dl> <dt><code>default['supermarket']['database']['extensions']</code></dt> <dd> <p>Determines which PostgreSQL extensions are enabled. Default value: <code>{ 'pgpsql' =&gt; true, 'pg_trgm' =&gt; 'true' }</code>.</p> </dd> <dt><code>default['supermarket']['database']['host']</code></dt> <dd> <p>The address PostgreSQL listens on. Default value: <code>node['supermarket']['postgresql']['listen_address']</code>.</p> </dd> <dt><code>default['supermarket']['database']['name']</code></dt> <dd> <p>The name of the Supermarket database. Default value: <code>'supermarket'</code>.</p> </dd> <dt><code>default['supermarket']['database']['pool']</code></dt> <dd> <p>The number of concurrent threads a database worker can create. Default value: <code>node['supermarket']['sidekiq']['concurrency']</code>.</p> </dd> <dt><code>default['supermarket']['database']['port']</code></dt> <dd> <p>The port that the database listens on. Default value: <code>node['supermarket']['postgresql']['port']</code>.</p> </dd> <dt><code>default['supermarket']['database']['user']</code></dt> <dd> <p>The database user. Default value: <code>node['supermarket']['postgresql']['username']</code>.</p> </dd> <dt><code>default['supermarket']['postgresql']['username']</code></dt> <dd> <p>The system user that runs PostgreSQL. By default, this uses the value of <code>node['supermarket']['user']</code>.</p> </dd> </dl> <h3 id="fieri">Fieri</h3> <p>Use these settings to enable <a href="../index.html#fieri">Fieri</a>, an optional service built into Supermarket that provides cookbook quality metrics.</p> <p>As a Supermarket feature, Fieri must be enabled via the <code>default['supermarket']['features']</code> option.</p> <dl> <dt><code>default['supermarket']['fieri_url']</code></dt> <dd> <p>The full URL that is used to access Fieri. Default value: <code>'http://localhost:13000/fieri/jobs'</code></p> </dd> <dt><code>default['supermarket']['fieri_supermarket_endpoint']</code></dt> <dd> <p>The URL of the Chef Supermarket that is using Fieri. Default value: <code>'https://localhost:13000'</code></p> </dd> <dt><code>default['supermarket']['fieri_key']</code></dt> <dd> <p>A string that is used as a key to authenticate Fieri. Default value: <code>nil</code>. This value should be set to a random string for fieri feature to work properly. One example to generate random string - <code>openssl rand -base64 32</code></p> </dd> </dl> <h3 id="github">GitHub</h3> <p>Use these settings to integrate Supermarket with GitHub.</p> <p>As a Supermarket feature, GitHub must be enabled via the<code>default['supermarket']['features']</code> option.</p> <dl> <dt><code>default['supermarket']['github_access_token']</code></dt> <dd> <p>The access token created from your GitHub account. Default value:<code>nil</code>.</p> </dd> <dt><code>default['supermarket']['github_key']</code></dt> <dd> <p>The application client ID that is used to authenticate Supermarket to GitHub. Default value: <code>nil</code>.</p> </dd> <dt><code>default['supermarket']['github_secret']</code></dt> <dd> <p>The application client secret that is used to authenticate Supermarket to GitHub. Default value: <code>nil</code>.</p> </dd> <dt><code>default['supermarket']['github_url']</code></dt> <dd> <p>The GitHub URL that Supermarket connects to. Default value:<code>https://github.com/</code>.</p> </dd> </dl> <h3 id="github-enterprise">GitHub Enterprise</h3> <p>Use these settings to integrate Supermarket with GitHub Enterprise.</p> <dl> <dt><code>default['supermarket']['github_access_token']</code></dt> <dd> <p>The access token created from your GitHub Enterprise account. Default value:<code>nil</code>.</p> </dd> <dt><code>default['supermarket']['github_key']</code></dt> <dd> <p>The application client ID that is used to authenticate Supermarket to GitHub Enterprise. Default value: <code>nil</code>.</p> </dd> <dt><code>default['supermarket']['github_secret']</code></dt> <dd> <p>The application client secret that is used to authenticate Supermarket to GitHub Enterprise. Default value: <code>nil</code>.</p> </dd> <dt><code>default['supermarket']['github_enterprise_url']</code></dt> <dd> <p>The GitHub Enterprise URL that Supermarket connects to. Default value:<code>nil</code>.</p> </dd> <dt><code>default['supermarket']['github_client_option_authorize_url']</code></dt> <dd> <p>The URL used to authorize with your implementation of GitHub Enterprise Server. For example: <code>https://github.example.com/login/oauth/authorize</code>. Default value: <code>nil</code>.</p> </dd> <dt><code>default['supermarket']['github_client_option_site']</code></dt> <dd> <p>The URL for your implementation of GitHub Enterprise. For example: <code>https://github.example.com/api/v3</code>. Default value: <code>nil</code>.</p> </dd> <dt><code>default['supermarket']['github_client_option_access_token_url']</code></dt> <dd> <p>The URL of the GitHub Enterprise access token: For example: <code>https://github.example.com/login/oauth/access_token</code>. Default value:<code>nil</code>.</p> </dd> </dl> <h3 id="google-analytics">Google Analytics</h3> <p>Use this setting to set up <a href="https://analytics.google.com">Google Analytics</a> tracking for Supermarket:</p> <dl> <dt><code>default['supermarket']['google_analytics_id']</code></dt> <dd> <p>The Google Analytics <a href="https://support.google.com/analytics/answer/7372977?hl=en">tracking ID</a> for Supermarket. Default value: <code>nil</code>.</p> </dd> </dl> <h3 id="nginx">Nginx</h3> <p>This configuration file has the following settings for nginx:</p> <dl> <dt><code>default['supermarket']['nginx']['access_log_options']</code></dt> <dd> <p>A string of <a href="https://nginx.org/en/docs/http/ngx_http_log_module.html">additional options</a> to be added to the nginx access log directive. Default value: <code>nil</code>.</p> </dd> <dt><code>default['supermarket']['nginx']['cache']['directory']</code></dt> <dd> <p>The directory used by nginx for caching. Default value: <code>"#{node['supermarket']['var_directory']}/nginx//cache"</code>.</p> </dd> <dt><code>default['supermarket']['nginx']['cache']['enable']</code></dt> <dd> <p>Determines whether or not nginx caching is enabled. Default value: <code>false</code>.</p> </dd> <dt><code>default['supermarket']['nginx']['client_body_buffer_size']</code></dt> <dd> <p>The <a href="https://nginx.org/en/docs/http/ngx_http_core_module.html#client_body_buffer_size">client_body_buffer_size</a> used by nginx. Default value: <code>nil</code>.</p> </dd> <dt><code>default['supermarket']['nginx']['client_max_body_size']</code></dt> <dd> <p>The maximum accepted body size for a client request, as indicated by the <code>Content-Length</code> request header. When the maximum accepted body size is greater than this value, a <code>413 Request Entity Too Large</code> error is returned. Default value: <code>250m</code>. See the <a href="https://nginx.org/en/docs/http/ngx_http_core_module.html#client_max_body_size">nginx documentation</a> for additional information.</p> </dd> <dt><code>default['supermarket']['nginx']['daemon_disable']</code></dt> <dd> <p>Determines whether or not nginx is daemonized. By default, this will be handled by the init system. Default value: <code>true</code>.</p> </dd> <dt><code>default['supermarket']['nginx']['default']['modules']</code></dt> <dd> <p>Determines which additional <a href="https://www.nginx.com/resources/wiki/modules/">nginx modules</a> should be included. Default value: <code>[]</code>.</p> </dd> <dt><code>default['supermarket']['nginx']['default_site_enabled']</code></dt> <dd> <p>Determines whether or not the nginx default page is enabled. Default value: <code>false</code>.</p> </dd> <dt><code>default['supermarket']['nginx']['dir']</code></dt> <dd> <p>The working directory. The default value is the recommended value. Default value: <code>node['supermarket']['nginx']['directory']</code>.</p> </dd> <dt><code>default['supermarket']['nginx']['disable_access_log']</code></dt> <dd> <p>Allows you to disable the nginx access log. Default value: <code>false</code>.</p> </dd> <dt><code>default['supermarket']['nginx']['error_log_options']</code></dt> <dd> <p>A string of <a href="https://nginx.org/en/docs/http/ngx_http_log_module.html">additional options</a> to be added to the nginx access log directive. Default value: <code>nil</code>.</p> </dd> <dt><code>default['supermarket']['nginx']['enable']</code></dt> <dd> <p>Enable the nginx service. Default value: <code>true</code>.</p> </dd> <dt><code>default['supermarket']['nginx']['event']</code></dt> <dd> <p>Set the event-model. By default nginx looks for the most suitable method for your OS. Default value: <code>nil</code>.</p> </dd> <dt><code>default['supermarket']['nginx']['force_ssl']</code></dt> <dd> <p>Force connections to use SSL. Default value: <code>true</code>.</p> </dd> <dt><code>default['supermarket']['nginx']['force_hsts']</code></dt> <dd> <p>Force connections to use HSTS headers. Only valid if <code>default['supermarket']['nginx']['force_ssl']</code> is <code>false</code>. This feature enables HSTS headers on a Supermarket installation that is behind an SSL-terminating load balancer. Default value: <code>false</code>.</p> </dd> <dt><code>default['supermarket']['nginx']['group']</code></dt> <dd> <p>The system group that is used to manage nginx. Default value: <code>node['supermarket']['group']</code>.</p> </dd> <dt><code>default['supermarket']['nginx']['gzip']</code></dt> <dd> <p>Enable gzip compression. Default value: <code>on</code>.</p> </dd> <dt><code>default['supermarket']['gzip_buffers']</code></dt> <dd> <p>Set the <a href="https://nginx.org/en/docs/http/ngx_http_gzip_module.html">gzip buffer</a> size. The nginx default is equal to one memory page, depending on the platform, it is either 4K 8K. Default value: <code>nil</code>.</p> </dd> <dt><code>default['supermarket']['nginx']['gzip_comp_level']</code></dt> <dd> <p>The compression level used with gzip, from least amount of compression (<code>1</code>, fastest) to the most (<code>2</code>, slowest). Default value: <code>2</code>.</p> </dd> <dt><code>default['supermarket']['gzip_disable']</code></dt> <dd> <p>Disables gzip compression when a <code>User-Agent</code> field is present in headers matching the specified regular expressions. Default value: <code>'MSIE [1-6]\.'</code>.</p> </dd> <dt><code>default['supermarket']['nginx']['gzip_http_version']</code></dt> <dd> <p>Enable gzip depending on the version of the HTTP request. Default value: <code>1.0</code>.</p> </dd> <dt><code>default['supermarket']['gzip_min_length']</code></dt> <dd> <p>The minimum response length that will be compressed by gzip, as determined by the <code>Content-Length</code> response header. Default value: <code>1000</code>.</p> </dd> <dt><code>default['supermarket']['nginx']['gzip_proxied']</code></dt> <dd> <p>Determines whether or not proxied requests are compressed with gzip, based on the presence of the <code>Via</code> request header field. Default value: <code>any</code>.</p> </dd> <dt><code>default['supermarket']['nginx']['gzip_static']</code></dt> <dd> <p>Allows you to send precompressed files with the <code>.gz</code> file extension instead of regular files. Requires the <a href="https://nginx.org/en/docs/http/ngx_http_gzip_static_module.html">ngx_http_gzip_static_module</a> module. Default value: <code>'off'</code>.</p> </dd> <dt><code>default['supermarket']['nginx']['gzip_types']</code></dt> <dd> <p>Enable compression for the specified MIME-types. Default value: <code>[ 'text/plain', 'text/css', 'application/x-javascript', 'text/xml', 'application/xml', 'application/xml+rss', 'application/atom+xml', 'text/javascript', 'application/javascript', 'application/json' ]</code>.</p> </dd> <dt><code>default['supermarket']['gzip_vary']</code></dt> <dd> <p>Determines whether or not the <code>Vary: Accept-Encoding</code> response header field is inserted when the following directives are active: <code>gzip</code>,<code>gzip_static</code>, or <code>gunzip</code>. Default value: <code>'off'</code>.</p> </dd> <dt><code>default['supermarket']['nginx']['keepalive']</code></dt> <dd> <p>Use to enable HTTP keepalive. Default value: <code>'on'</code>.</p> </dd> <dt><code>default['supermarket']['nginx']['keepalive_timeout']</code></dt> <dd> <p>The amount of time (in seconds) to wait for requests on a HTTP keepalive connection. Default value: <code>65</code>.</p> </dd> <dt><code>default['supermarket']['nginx']['log_dir']</code></dt> <dd> <p>The directory in which log data is stored. The default value is the recommended value. Default value: <code>node['supermarket']['nginx']['log_directory']</code>.</p> </dd> <dt><code>default['supermarket']['nginx']['log_rotation']</code></dt> <dd> <p>The log rotation policy for this service. Log files are rotated when they exceed <code>file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code>num_to_keep</code>. Default value: <code>{ 'file_maxbytes' =&gt; 104857600, 'num_to_keep' =&gt; 10 }</code></p> </dd> <dt><code>default['supermarket']['nginx']['multi_accept']</code></dt> <dd> <p>Determines whether a worker process accepts a single connection at a time, or all new connections at one time. The default value sets this to a single connection at a time. Default value: <code>false</code>.</p> </dd> <dt><code>default['supermarket']['nginx']['non_ssl_port']</code></dt> <dd> <p>The port on which the Automate interface and API are bound for non-SSL connections. Default value: <code>80</code>. Set to <code>false</code> to disable non-SSL connections.</p> </dd> <dt><code>default['supermarket']['nginx']['pid']</code></dt> <dd> <p>The system process ID for the nginx service. Default value: <code>"#{node['supermarket']['nginx']['directory']}/nginx.pid"</code>.</p> </dd> <dt><code>default['supermarket']['nginx']['proxy_read_timeout']</code></dt> <dd> <p>Defines a timeout between two successive read operations for reading a response from the proxied server. Default value: <code>nil</code>.</p> </dd> <dt><code>default['supermarket']['nginx']['redirect_to_canonical']</code></dt> <dd> <p>Redirect requests to the Supermarket server FQDN. Default value: <code>true</code>.</p> </dd> <dt><code>default['supermarket']['nginx']['sendfile']</code></dt> <dd> <p>Copy data between file descriptors when <code>sendfile()</code> is used. Default value: <code>on</code>.</p> </dd> <dt><code>default['supermarket']['nginx']['server_names_hash_bucket_size']</code></dt> <dd> <p>The size of the bucket that contains the server names hash tables. Default value: <code>64</code>.</p> </dd> <dt><code>default['supermarket']['nginx']['server_tokens']</code></dt> <dd> <p>Determines whether or not the nginx version is included in error pages and the <code>Server</code> response header. Default value: <code>nil</code>.</p> </dd> <dt><code>default['supermarket']['nginx']['ssl_port']</code></dt> <dd> <p>The port that is used by nginx to terminate SSL connections. Default value: <code>443</code>.</p> </dd> <dt><code>default['supermarket']['nginx']['types_hash_bucket_size']</code></dt> <dd> <p>Determines the bucket size for the types hash tables. Default value: <code>64</code>.</p> </dd> <dt><code>default['supermarket']['nginx']['types_hash_max_size']</code></dt> <dd> <p>Sets the maximum size of the types hash table. Default value: <code>2048</code>.</p> </dd> <dt><code>default['supermarket']['nginx']['user']</code></dt> <dd> <p>The system user that is used to run nginx. Default value: <code>node['supermarket']['user']</code>.</p> </dd> <dt><code>default['supermarket']['nginx']['worker_connections']</code></dt> <dd> <p>The maximum number of simultaneous clients. Use with <code>nginx['worker_processes']</code> to determine the maximum number of allowed clients. Default value: <code>1024</code>.</p> </dd> <dt><code>default['supermarket']['nginx']['worker_rlimit_nofile']</code></dt> <dd> <p>Determines the maximum number of open files allowed for worker processes. Default value: <code>nil</code>.</p> </dd> <dt><code>default['supermarket']['nginx']['worker_processes']</code></dt> <dd> <p>The number of allowed worker processes. Use with <code>nginx['worker_connections']</code> to determine the maximum number of allowed clients. Default value: <code>node['cpu'] &amp;&amp; node['cpu']['total'] ? node['cpu']['total'] : 1</code>.</p> </dd> </dl> <h3 id="oauth2">Oauth2</h3> <p>This configuration file has the following settings for the Chef Infra Server identity service:</p> <dl> <dt><code>default['supermarket']['chef_oauth2_app_id']</code></dt> <dd> <p>The <a href="../../install_supermarket/index.html#chef-identity">Chef Identity</a> application ID created for Supermarket on the Chef Infra Server. See the <a href="../../install_supermarket/index.html#configure">Chef Identity configuration</a> section of the Supermarket installation guide for additional details.</p> </dd> <dt><code>default['supermarket']['chef_oauth2_secret']</code></dt> <dd> <p>The <a href="../../install_supermarket/index.html#chef-identity">Chef Identity</a> application secret created for Supermarket on the Chef Infra Server. See the <a href="../../install_supermarket/index.html#configure">Chef Identity configuration</a> section of the Supermarket installation guide for additional details.</p> </dd> <dt><code>default['supermarket']['chef_oauth2_url']</code></dt> <dd> <p>The URL of the Chef Infra Server that Supermarket connects to. Default value: <code>node['supermarket']['chef_server_url']</code>.</p> </dd> <dt><code>default['supermarket']['chef_oauth2_verify_ssl']</code></dt> <dd> <p>Determines whether or not Supermarket performs SSL verification. Default value: <code>true</code>. If your Chef Infra Server is using a self-signed certificate without a properly configured certificate authority, this must be set to <code>false</code>.</p> </dd> </dl> <h3 id="postgresql">PostgreSQL</h3> <p>This configuration file has the following settings for PostgreSQL:</p> <dl> <dt><code>default['supermarket']['postgresql']['checkpoint_completion_target']</code></dt> <dd> <p>A completion percentage that is used to determine how quickly a checkpoint should finish in relation to the completion status of the next checkpoint. For example, if the value is <code>0.5</code>, then a checkpoint attempts to finish before 50% of the next checkpoint is done. Default value: <code>0.5</code>.</p> </dd> <dt><code>default['supermarket']['postgresql']['checkpoint_segments']</code></dt> <dd> <p>The maximum amount (in megabytes) between checkpoints in log file segments. Default value: <code>3</code>.</p> </dd> <dt><code>default['supermarket']['postgresql']['checkpoint_timeout']</code></dt> <dd> <p>The amount of time (in minutes) between checkpoints. Default value: <code>'5min'</code>.</p> </dd> <dt><code>default['supermarket']['postgresql']['checkpoint_warning']</code></dt> <dd> <p>The frequency (in seconds) at which messages are sent to the server log files if checkpoint segments are being filled faster than their currently configured values. Default value: <code>'30s'</code>.</p> </dd> <dt><code>default['supermarket']['postgresql']['data_directory']</code></dt> <dd> <p>The directory in which on-disk data is stored. The default value is the recommended value. Default value: <code>"#{node['supermarket']['var_directory']}/postgresql/9.3/data"</code>.</p> </dd> <dt><code>default['supermarket']['postgresql']['effective_cache_size']</code></dt> <dd> <p>The size of the disk cache that is used for data files. Default value: <code>'128MB'</code>.</p> </dd> <dt><code>default['supermarket']['postgresql']['enable']</code></dt> <dd> <p>Enable a service. Default value: <code>true</code>.</p> </dd> <dt><code>default['supermarket']['postgresql']['listen_address']</code></dt> <dd> <p>The connection source to which PostgreSQL is to respond. Default value: <code>'127.0.0.1'</code>.</p> </dd> <dt><code>default['supermarket']['postgresql']['log_directory']</code></dt> <dd> <p>The directory in which log data is stored. The default value is the recommended value. Default value: <code>"#{node['supermarket']['log_directory']}/postgresql"</code>.</p> </dd> <dt><code>default['supermarket']['postgresql']['log_rotation']</code></dt> <dd> <p>The log rotation policy for this service. Log files are rotated when they exceed <code>file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code>num_to_keep</code>. Default value: <code>{ 'file_maxbytes' =&gt; 104857600, 'num_to_keep' =&gt; 10 }</code></p> </dd> <dt><code>default['supermarket']['postgresql']['max_connections']</code></dt> <dd> <p>The maximum number of allowed concurrent connections. Default value: <code>350</code>.</p> </dd> <dt><code>default['supermarket']['postgresql']['md5_auth_cidr_addresses']</code></dt> <dd> <p>Use to encrypt passwords using MD5 hashes. Default value: <code>['127.0.0.1/32', '::1/128']</code>.</p> </dd> <dt><code>default['supermarket']['postgresql']['port']</code></dt> <dd> <p>The port on which the service is to listen. Default value: <code>15432</code>.</p> </dd> <dt><code>default['supermarket']['postgresql']['shared_buffers']</code></dt> <dd> <p>The amount of memory that is dedicated to PostgreSQL for data caching. Default value: <code>"#{(node['memory']['total'].to_i / 4) / (1024)}MB"</code>.</p> </dd> <dt><code>default['supermarket']['postgresql']['shmall']</code></dt> <dd> <p>The total amount of available shared memory. Default value: <code>4194304</code>.</p> </dd> <dt><code>default['supermarket']['postgresql']['shmmax']</code></dt> <dd> <p>The maximum amount of shared memory. Default value: <code>17179869184</code>.</p> </dd> <dt><code>default['supermarket']['postgresql']['work_mem']</code></dt> <dd> <p>The size (in megabytes) of allowed in-memory sorting. Default value: <code>'8MB'</code>.</p> </dd> </dl> <h3 id="redis">Redis</h3> <p>This configuration file has the following settings for Redis:</p> <dl> <dt><code>default['supermarket']['redis']['bind']</code></dt> <dd> <p>Bind Redis to the specified IP address. Default value: <code>'127.0.0.1'</code>.</p> </dd> <dt><code>default['supermarket']['redis']['directory']</code></dt> <dd> <p>The working directory. The default value is the recommended value. Default value: <code>"#{node['supermarket']['var_directory']}/redis"</code>.</p> </dd> <dt><code>default['supermarket']['redis']['enable']</code></dt> <dd> <p>Enable a service. Default value: <code>true</code>.</p> </dd> <dt><code>default['supermarket']['redis']['log_directory']</code></dt> <dd> <p>The directory in which log data is stored. The default value is the recommended value. Default value: <code>"#{node['supermarket']['log_directory']}/redis"</code>.</p> </dd> <dt><code>default['supermarket']['redis']['log_rotation']</code></dt> <dd> <p>The log rotation policy for this service. Log files are rotated when they exceed <code>file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code>num_to_keep</code>. Default value: <code>{ 'file_maxbytes' =&gt; 104857600, 'num_to_keep' =&gt; 10 }</code></p> </dd> <dt><code>default['supermarket']['redis']['port']</code></dt> <dd> <p>The port on which the service is to listen. Default value: <code>'16379'</code>.</p> </dd> </dl> <h3 id="ruby-on-rails">Ruby on Rails</h3> <p>This configuration file has the following settings for Ruby on Rails:</p> <dl> <dt><code>default['supermarket']['rails']['enable']</code></dt> <dd> <p>Enable a service. Default value: <code>true</code>.</p> </dd> <dt><code>default['supermarket']['rails']['log_directory']</code></dt> <dd> <p>The directory in which log data is stored. The default value is the recommended value. Default value: <code>"#{node['supermarket']['log_directory']}/rails"</code>.</p> </dd> <dt><code>default['supermarket']['rails']['log_rotation']</code></dt> <dd> <p>The log rotation policy for this service. Log files are rotated when they exceed <code>file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code>num_to_keep</code>. Default value: <code>{ 'file_maxbytes' =&gt; 104857600, 'num_to_keep' =&gt; 10 }</code></p> </dd> <dt><code>default['supermarket']['rails']['port']</code></dt> <dd> <p>The port on which the service is to listen. Default value: <code>13000</code>.</p> </dd> </dl> <h3 id="runit">runit</h3> <p>This configuration file has the following settings for runit:</p> <dl> <dt><code>default['supermarket']['runit']['svlogd_bin']</code></dt> <dd> <p>Default value: <code>"#{node['supermarket']['install_directory']}/embedded/bin/svlogd"</code>.</p> </dd> </dl> <h3 id="sentry">Sentry</h3> <p>This option is used to integrate Supermarket with the <a href="https://sentry.io/welcome/">Sentry</a> error logging service:</p> <dl> <dt><code>default['supermarket']['sentry_url']</code></dt> <dd> <p>The Sentry URL that is used to send error reports. Default value: <code>nil</code>.</p> </dd> </dl> <h3 id="sidekiq">Sidekiq</h3> <p>This configuration file has the following settings for background processes that are managed by Sidekiq:</p> <dl> <dt><code>default['supermarket']['sidekiq']['concurrency']</code></dt> <dd> <p>Determines how many threads a Sidekiq process can spin up. Default value: <code>25</code>.</p> </dd> <dt><code>default['supermarket']['sidekiq']['enable']</code></dt> <dd> <p>Enable the Sidekiq service. Default value: <code>true</code>.</p> </dd> <dt><code>default['supermarket']['sidekiq']['log_directory']</code></dt> <dd> <p>The directory in which log data is stored. The default value is the recommended value. Default value: <code>"#{node['supermarket']['log_directory']}/sidekiq"</code>.</p> </dd> <dt><code>default['supermarket']['sidekiq']['log_rotation']</code></dt> <dd> <p>The log rotation policy for this service. Log files are rotated when they exceed <code>file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code>num_to_keep</code>. Default value: <code>{ 'file_maxbytes' =&gt; 104857600, 'num_to_keep' =&gt; 10 }</code></p> </dd> <dt><code>default['supermarket']['sidekiq']['timeout']</code></dt> <dd> <p>The amount of time (in seconds) that Sidekiq should wait for a worker before it is terminated. Default value: <code>30</code>.</p> </dd> </dl> <h3 id="smtp">SMTP</h3> <p>This configuration file has the following settings for SMTP:</p> <dl> <dt><code>default['supermarket']['smtp_address']</code></dt> <dd> <p>The SMTP server address that Supermarket will use to send mail.</p> </dd> <dt><code>default['supermarket']['smtp_password']</code></dt> <dd> <p>The SMTP server password.</p> </dd> <dt><code>default['supermarket']['smtp_port']</code></dt> <dd> <p>The port on which the service is to listen.</p> </dd> <dt><code>default['supermarket']['smtp_user_name']</code></dt> <dd> <p>The user on the SMTP server.</p> </dd> <dt><code>default['supermarket']['from_email']</code></dt> <dd> <p>The default sender address of all Supermarket mailers. Default value: <code>nil</code>.</p> </dd> </dl> <h3 id="ssl">SSL</h3> <p>This configuration file has the following settings for SSL:</p> <dl> <dt><code>default['supermarket']['ssl']['certificate']</code></dt> <dd> <p>The SSL certificate used to verify communication over HTTPS.</p> </dd> <dt><code>default['supermarket']['ssl']['certificate_key']</code></dt> <dd> <p>The certificate key used for SSL communication.</p> </dd> <dt><code>default['supermarket']['ssl']['company_name']</code></dt> <dd> <p>The name of your company. Default value: <code>'My Supermarket'</code>.</p> </dd> <dt><code>default['supermarket']['ssl']['country_name']</code></dt> <dd> <p>The country in which your company is located. Default value: <code>'US'</code>.</p> </dd> <dt><code>default['supermarket']['ssl']['directory']</code></dt> <dd> <p>The working directory. Default value: <code>'/var/opt/supermarket/ssl'</code>.</p> </dd> <dt><code>default['supermarket']['ssl']['email_address']</code></dt> <dd> <p>The default email address for your company. Default value: <code>'you@example.com'</code>.</p> </dd> <dt><code>default['supermarket']['ssl']['locality_name']</code></dt> <dd> <p>The city in which your company is located. Default value: <code>'Seattle'</code>.</p> </dd> <dt><code>default['supermarket']['ssl']['openssl_bin']</code></dt> <dd> <p>Default value: <code>"#{node['supermarket']['install_directory']}/embedded/bin/openssl"</code>.</p> </dd> <dt><code>default['supermarket']['ssl']['organizational_unit_name']</code></dt> <dd> <p>The organization or group within your company that is running the Chef Infra Server. Default value: <code>'Operations'</code>.</p> </dd> <dt><code>default['supermarket']['ssl']['session_cache']</code></dt> <dd> <p>Default value: <code>'shared:SSL:4m'</code>.</p> </dd> <dt><code>default['supermarket']['ssl']['session_timeout']</code></dt> <dd> <p>Default value: <code>'5m'</code>.</p> </dd> <dt><code>default['supermarket']['ssl']['ciphers']</code></dt> <dd> <p>The list of supported cipher suites that are used to establish a secure connection. See <a href="https://www.openssl.org/docs/man1.0.2/man1/ciphers.html">https://www.openssl.org/docs/man1.0.2/man1/ciphers.html</a> for more information.</p> </dd> <dt><code>default['supermarket']['ssl']['fips_ciphers']</code></dt> <dd> <p>The list of supported cipher suites that are used when FIPS mode is enabled. Default value <code>'FIPS@STRENGTH:!aNULL:!eNULL'</code>.</p> </dd> <dt><code>default['supermarket']['ssl']['protocols']</code></dt> <dd> <p>The SSL protocol versions that are enabled. Default value: <code>'TLSv1.2'</code>.</p> </dd> <dt><code>default['supermarket']['ssl']['state_name']</code></dt> <dd> <p>The state, province, or region in which your company is located. Default value: <code>'WA'</code>.</p> </dd> </dl> <h3 id="statsd">StatsD</h3> <p>This configuration file has the following settings for reporting to a StatsD server:</p> <dl> <dt><code>default['supermarket']['statsd_port']</code></dt> <dd> <p>The port on which the service is to listen. Default value: <code>nil</code>.</p> </dd> <dt><code>default['supermarket']['statsd_url']</code></dt> <dd> <p>The URL to which reporting metrics are sent. Default value: <code>nil</code>.</p> </dd> </dl> <h3 id="announcements-banner">Announcements Banner</h3> <p>Starting with Supermarket 4.2 and later, users can define announcement banner text to display on the Supermarket homepage.</p> <dl> <dt><code>default['supermarket']['announcement_text']</code></dt> <dd> <p>The text string to display.</p> </dd> </dl> <h3 id="urls">URLs</h3> <p>Use these settings to replace <code>chef.io</code> URLs with your own internal mirrors or alternatives.</p> <dl> <dt><code>default['supermarket']['chef_blog_url']</code></dt> <dd> <p>The URL of the Chef blog. Default value: <code>"https://www.#{node['supermarket']['chef_domain']}/blog"</code>.</p> </dd> <dt><code>default['supermarket']['chef_docs_url']</code></dt> <dd> <p>The URL of the Chef Docs site. Default value: <code>"https://docs.#{node['supermarket']['chef_domain']}"</code>.</p> </dd> <dt><code>default['supermarket']['chef_downloads_url']</code></dt> <dd> <p>The URL of the Chef downloads page. Default value: <code>"https://downloads.#{node['supermarket']['chef_domain']}"</code>.</p> </dd> <dt><code>default['supermarket']['chef_domain']</code></dt> <dd> <p>The root domain that is used by all Chef URLs. Most of the settings in this section rely upon this setting. Default value: <code>'chef.io'</code>.</p> </dd> <dt><code>default['supermarket']['chef_identity_url']</code></dt> <dd> <p>The URL that is used to interact with Chef Identity on the Chef Infra Server. Default value: <code>"#{node['supermarket']['chef_server_url']}/id"</code>.</p> </dd> <dt><code>default['supermarket']['chef_profile_url']</code></dt> <dd> <p>The URL that is used to log in to your Chef profile. Default value: <code>node['supermarket']['chef_server_url']</code>.</p> </dd> <dt><code>default['supermarket']['chef_sign_up_url']</code></dt> <dd> <p>The community signup URL. Default value: <code>"#{node['supermarket']['chef_server_url']}/signup?ref=community"</code>.</p> </dd> <dt><code>default['supermarket']['chef_www_url']</code></dt> <dd> <p>The Chef website URL. Default value: <code>"https://www.#{node['supermarket']['chef_domain']}"</code>.</p> </dd> <dt><code>default['supermarket']['learn_chef_url']</code></dt> <dd> <p>The Learn Chef URL. Default value: <code>"https://learn.#{node['supermarket']['chef_domain']}"</code>.</p> </dd> </dl> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef&trade; Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs.chef.io/supermarket/config_rb_supermarket/" class="_attribution-link">https://docs.chef.io/supermarket/config_rb_supermarket/</a>
  </p>
</div>
