<div id="col-content" data-swiftype-index="true"> <div id="chef-inspec-and-friends"><h1>Chef InSpec and Friends</h1></div>  <div class="prose"> <p data-swiftype-index="false"> <a href="https://github.com/inspec/inspec/tree/main/docs-chef-io/content/inspec/inspec_and_friends.md" alt="Link to page on GitHub repository">[edit on GitHub]</a> </p> <p>This page looks at projects that are similar to Chef InSpec to explain how they relate to each other.</p> <h2 id="rspec">RSpec</h2> <p>RSpec is an awesome framework that is widely used by software engineers to test Ruby code. It enables test-driven development (TDD) and helps developers to write better code every day.</p> <p>Chef InSpec is built on top of RSpec and uses it as the underlying foundation to execute tests. It uses the key strengths of RSpec, easily execute tests and a DSL to write tests, but extends the functionality for use as compliance audits. Chef InSpec ships with custom audit resources that make it easy to write audit checks and with the ability to run those checks on remote servers. These audit resources provided know the differences between operating systems and help you abstract from the local operating system, similar to other resources you might use in your Chef recipes.</p> <p>A complete Chef InSpec rule looks like:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">control <span style="color:#4070a0">"sshd-11"</span> <span style="color:#007020;font-weight:700">do</span>
  impact <span style="color:#40a070">1</span><span style="color:#666">.</span><span style="color:#40a070">0</span>
  title <span style="color:#4070a0">"Server: Set protocol version to SSHv2"</span>
  desc <span style="color:#4070a0">"Set the SSH protocol version to 2. Don't use legacy
</span><span style="color:#4070a0">        insecure SSHv1 connections anymore."</span>
  tag <span style="color:#517918">security</span>: <span style="color:#4070a0">"level-1"</span>
  tag <span style="color:#4070a0">"openssh-server"</span>
  ref <span style="color:#4070a0">"Server Security Guide v.1.0"</span>, <span style="color:#517918">url</span>: <span style="color:#4070a0">"http://..."</span>

  describe sshd_config <span style="color:#007020;font-weight:700">do</span>
    its(<span style="color:#4070a0">'Protocol'</span>) { should eq(<span style="color:#4070a0">'2'</span>) }
  <span style="color:#007020;font-weight:700">end</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p>That said, Chef InSpec is not RSpec. Some key differences:</p> <ul> <li>In InSpec, <code>describe</code> blocks should not be nested; instead use <code>control</code> blocks to describe a higher-level grouping of tests.</li> <li>The RSpec <code>shared_example</code> construct is not supported. Instead, create a simple custom resource that executes repetitious tasks.</li> <li>Chef InSpec is aimed at compliance practitioners and infrastructure testers, so our focus is providing a few, well-supported, easy-to-use <a href="../matchers/index.html">universal matchers</a>, such as <code>cmp</code>. In contrast, RSpec is a tool designed for software engineers. It thus supports a very large range of matchers, to enable testing of software engineering constructs such as exceptions, Object Oriented Programming relationships, and so on.</li> <li>While Chef InSpec uses parts of the RSpec project and codebase, it is a separate project from InSpec. Rspecâ€™s release schedule and feature set are beyond the control of the Chef InSpec team. While it is possible to use many of the RSpec core features within Chef InSpec profiles, Chef InSpec can only guarantee that the features described in the <a href="../index.html">InSpec documentation</a> will function correctly. Some RSpec core functionality may be removed in future versions of Chef InSpec as needed to ensure stability in the Chef InSpec project.</li> </ul> <h2 id="serverspec">Serverspec</h2> <p>Serverspec is the first extension of RSpec that enabled users to run RSpec tests on servers to verify deployed artifacts. It was created in March 2013 by Gosuke Miyashita and has been widely adopted. It is also one of the core test frameworks within test-kitchen and has been widely used within the Chef ecosystem. Chef InSpec takes lessons learned implementing and using Serverspec and builds on them to make auditing and compliance easier.</p> <p>Lessons learned from Serverspec include:</p> <ul> <li>IT, compliance, and security professional require metadata beyond what Serverspec offers, such as criticality, to fully describe controls.</li> <li>Setting up and running the same tests across multiple machines must be easy.</li> <li>It must be easy to locate, debug, and extend operating system-dependent code.</li> <li>It must be easy to extend the language and create custom resources.</li> <li>It must run multiple tests simultaneously.</li> <li>Support for Windows is a first-class requirement.</li> <li>A command line interface (CLI) is required for faster iteration of test code.</li> </ul> <p>You can also watch this <a href="http://foodfightshow.org/2016/02/inspec.html">podcast</a> to find out more on the relationship between Chef InSpec and Serverspec.</p> <h3 id="how-is-chef-inspec-different-from-serverspec">How is Chef InSpec different from Serverspec</h3> <p>One of the key differences is that Chef InSpec targets more user groups. It is optimized for DevOps, Security, and Compliance professionals. Additional metadata, such as impact, title, and description, make it easier to fully describe the controls which makes it easier to share the controls with other departments. This enables Security departments to prioritize rules. DevOps teams use this information to focus on the most critical issues to remediate.</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">control <span style="color:#4070a0">"sshd-11"</span> <span style="color:#007020;font-weight:700">do</span>
  impact <span style="color:#40a070">1</span><span style="color:#666">.</span><span style="color:#40a070">0</span>
  title <span style="color:#4070a0">"Server: Set protocol version to SSHv2"</span>
  desc <span style="color:#4070a0">"Set the SSH protocol version to 2. Don't use legacy
</span><span style="color:#4070a0">        insecure SSHv1 connections anymore."</span>
  tag <span style="color:#517918">security</span>: <span style="color:#4070a0">"level-1"</span>
  tag <span style="color:#4070a0">"openssh-server"</span>
  ref <span style="color:#4070a0">"Server Security Guide v.1.0"</span> <span style="color:#517918">url</span>: <span style="color:#4070a0">"http://..."</span>

  describe sshd_config <span style="color:#007020;font-weight:700">do</span>
    its(<span style="color:#4070a0">'Protocol'</span>) { should cmp <span style="color:#40a070">2</span> }
  <span style="color:#007020;font-weight:700">end</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p><strong>Why not fork Serverspec?</strong></p> <p>Chef InSpec started as an extension of Serverspec. As the extension grew, it became clear that a new library was required. Creating and maintaining a fork was not practical so a new project was born.</p> <p><strong>Will Chef InSpec only work on machines managed by Chef?</strong></p> <p>No, Chef InSpec can be used on any machine. It does not matter if that machine was configured by Chef Infra or configured lovingly by the hands of your local System Administrator.</p> <p><strong>Is Chef InSpec a replacement of Serverspec?</strong></p> <p>Chef InSpec is intended to be a drop-in replacement of Serverspec. Popular Serverspec resources have been ported to InSpec. It changed some behavior as documented in our migration guide.</p> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef&trade; Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs.chef.io/inspec/inspec_and_friends/" class="_attribution-link">https://docs.chef.io/inspec/inspec_and_friends/</a>
  </p>
</div>
