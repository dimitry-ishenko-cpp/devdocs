<div id="col-content" data-swiftype-index="true"> <div id="google_storage_bucket-resource"><h1>google_storage_bucket resource</h1></div>  <div class="prose"> <p data-swiftype-index="false"> <a href="https://github.com/inspec/inspec/tree/main/docs-chef-io/content/inspec/resources/google_storage_bucket.md" alt="Link to page on GitHub repository">[edit on GitHub]</a> </p> <h2 id="syntax">Syntax</h2> <p>A <code>google_storage_bucket</code> is used to test a Google Bucket resource</p> <h2 id="examples">Examples</h2> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">describe google_storage_bucket(<span style="color:#007020">name</span>: bucket<span style="color:#666">-</span><span style="color:#007020">name</span>) <span style="color:#007020;font-weight:700">do</span>
  it { should exist }
  its(<span style="color:#4070a0">'location'</span>) { should cmp <span style="color:#4070a0">'europe-west2'</span><span style="color:#666">.</span>upcase }

  its(<span style="color:#4070a0">'storage_class'</span>) { should eq <span style="color:#4070a0">"STANDARD"</span> }
  its(<span style="color:#4070a0">'labels'</span>) { should <span style="color:#007020">include</span>(<span style="color:#4070a0">"key"</span> <span style="color:#666">=&gt;</span> <span style="color:#4070a0">"value"</span>) }
  its(<span style="color:#4070a0">'retention_policy.retention_period'</span>) { should cmp <span style="color:#40a070">1000</span> }
<span style="color:#007020;font-weight:700">end</span>

describe google_storage_bucket(<span style="color:#007020">name</span>: <span style="color:#4070a0">"nonexistent"</span>) <span style="color:#007020;font-weight:700">do</span>
  it { should_not exist }
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<h3 id="test-that-a-gcp-storage-bucket-is-in-the-expected-location">Test that a GCP storage bucket is in the expected location</h3> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">describe google_storage_bucket(<span style="color:#007020">name</span>: <span style="color:#4070a0">'chef-inspec-gcp-storage-bucket-abcd'</span>) <span style="color:#007020;font-weight:700">do</span>
  its(<span style="color:#4070a0">'location'</span>) { should eq <span style="color:#4070a0">"EUROPE-WEST2"</span> }
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<h3 id="test-that-a-gcp-storage-bucket-has-the-expected-project-number">Test that a GCP storage bucket has the expected project number</h3> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">describe google_storage_bucket(<span style="color:#007020">name</span>: <span style="color:#4070a0">'chef-inspec-gcp-storage-bucket-abcd'</span>) <span style="color:#007020;font-weight:700">do</span>
  its(<span style="color:#4070a0">'project_number'</span>) {should eq <span style="color:#40a070">12345678</span> }
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<h3 id="test-that-a-gcp-storage-bucket-has-the-expected-storage-class">Test that a GCP storage bucket has the expected storage class</h3> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">describe google_storage_bucket(<span style="color:#007020">name</span>: <span style="color:#4070a0">'chef-inspec-gcp-storage-bucket-abcd'</span>) <span style="color:#007020;font-weight:700">do</span>
  its(<span style="color:#4070a0">'storage_class'</span>) { should eq <span style="color:#4070a0">'STANDARD'</span> }
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<h2 id="properties">Properties</h2> <p>Properties that can be accessed from the <code>google_storage_bucket</code> resource:</p> <dl> <dt><code>acl</code></dt> <dd>Access controls on the bucket. <dl> <dt><code>bucket</code></dt> <dd>The name of the bucket.</dd> <dt><code>domain</code></dt> <dd>The domain associated with the entity.</dd> <dt><code>email</code></dt> <dd>The email address associated with the entity.</dd> <dt><code>entity</code></dt> <dd>The entity holding the permission, in one of the following forms: user-userId user-email group-groupId group-email domain-domain project-team-projectId allUsers allAuthenticatedUsers Examples: The user <a href="mailto:liz@example.com.html">liz@example.com</a> would be <a href="mailto:user-liz@example.com.html">user-liz@example.com</a>. The group <a href="mailto:example@googlegroups.com.html">example@googlegroups.com</a> would be <a href="mailto:group-example@googlegroups.com.html">group-example@googlegroups.com</a>. To refer to all members of the Google Apps for Business domain example.com, the entity would be domain-example.com.</dd> <dt><code>entity_id</code></dt> <dd>The ID for the entity</dd> <dt><code>id</code></dt> <dd>The ID of the access-control entry.</dd> <dt><code>project_team</code></dt> <dd>The project team associated with the entity <dl> <dt><code>project_number</code></dt> <dd>The project team associated with the entity</dd> <dt><code>team</code></dt> <dd>The team. <p>Possible values:</p> <ul> <li>editors</li> <li>owners</li> <li>viewers</li> </ul> </dd> </dl> </dd> <dt><code>role</code></dt> <dd>The access permission for the entity. <p>Possible values:</p> <ul> <li>OWNER</li> <li>READER</li> <li>WRITER</li> </ul> </dd> </dl> </dd> <dt><code>cors</code></dt> <dd>The bucket’s Cross-Origin Resource Sharing (CORS) configuration. <p><code>max_age_seconds</code> : The value, in seconds, to return in the Access-Control-Max-Age header used in preflight responses.</p> <p><code>method</code> : The list of HTTP methods on which to include CORS response headers, (GET, OPTIONS, POST, etc) Note: “*” is permitted in the list of methods, and means “any method”.</p> <p><code>origin</code> : The list of Origins eligible to receive CORS response headers. Note: “*” is permitted in the list of origins, and means “any Origin”.</p> <p><code>response_header</code> : The list of HTTP headers other than the simple response headers to give permission for the user-agent to share across domains.</p> </dd> <dt><code>default_event_based_hold</code></dt> <dd>Whether or not to automatically apply an eventBasedHold to new objects added to the bucket.</dd> <dt><code>default_object_acl</code></dt> <dd>Default access controls to apply to new objects when no ACL is provided. <dl> <dt><code>bucket</code></dt> <dd>The name of the bucket.</dd> <dt><code>domain</code></dt> <dd>The domain associated with the entity.</dd> <dt><code>email</code></dt> <dd>The email address associated with the entity.</dd> <dt><code>entity</code></dt> <dd>The entity holding the permission, in one of the following forms: * user-{{userId}} * user-{{email}} (such as “<a href="mailto:user-liz@example.com.html">user-liz@example.com</a>”) * group-{{groupId}} * group-{{email}} (such as “<a href="mailto:group-example@googlegroups.com.html">group-example@googlegroups.com</a>”) * domain-{{domain}} (such as “domain-example.com”) * project-team-{{projectId}} * allUsers * allAuthenticatedUsers</dd> <dt><code>entity_id</code></dt> <dd>The ID for the entity</dd> <dt><code>generation</code></dt> <dd>The content generation of the object, if applied to an object.</dd> <dt><code>id</code></dt> <dd>The ID of the access-control entry.</dd> <dt><code>object</code></dt> <dd>The name of the object, if applied to an object.</dd> <dt><code>project_team</code></dt> <dd>The project team associated with the entity <dl> <dt><code>project_number</code></dt> <dd>The project team associated with the entity</dd> <dt><code>team</code></dt> <dd>The team. <p>Possible values:</p> <ul> <li>editors</li> <li>owners</li> <li>viewers</li> </ul> </dd> </dl> </dd> <dt><code>role</code></dt> <dd>The access permission for the entity. <p>Possible values:</p> <ul> <li>OWNER</li> <li>READER</li> </ul> </dd> </dl> </dd> <dt><code>id</code></dt> <dd>The ID of the bucket. For buckets, the id and name properties are the same.</dd> <dt><code>lifecycle</code></dt> <dd>The bucket’s lifecycle configuration. See <a href="https://developers.google.com/storage/docs/lifecycle">https://developers.google.com/storage/docs/lifecycle</a> for more information. <dl> <dt><code>rule</code></dt> <dd>A lifecycle management rule, which is made of an action to take and the condition(s) under which the action will be taken. <dl> <dt><code>action</code></dt> <dd>The action to take. <dl> <dt><code>storage_class</code></dt> <dd>Target storage class. Required iff the type of the action is SetStorageClass.</dd> <dt><code>type</code></dt> <dd>Type of the action. Currently, only Delete and SetStorageClass are supported. <p>Possible values:</p> <ul> <li>Delete</li> <li>SetStorageClass</li> </ul> </dd> </dl> </dd> <dt><code>condition</code></dt> <dd>The condition(s) under which the action will be taken. <dl> <dt><code>age_days</code></dt> <dd>Age of an object (in days). This condition is satisfied when an object reaches the specified age.</dd> <dt><code>created_before</code></dt> <dd>A date in RFC 3339 format with only the date part (for instance, “2013-01-15”). This condition is satisfied when an object is created before midnight of the specified date in UTC.</dd> <dt><code>is_live</code></dt> <dd>Relevant only for versioned objects. If the value is true, this condition matches live objects; if the value is false, it matches archived objects.</dd> <dt><code>matches_storage_class</code></dt> <dd>Objects having any of the storage classes specified by this condition will be matched. Values include MULTI_REGIONAL, REGIONAL, NEARLINE, COLDLINE, STANDARD, ARCHIVE, and DURABLE_REDUCED_AVAILABILITY.</dd> <dt><code>num_newer_versions</code></dt> <dd>Relevant only for versioned objects. If the value is N, this condition is satisfied when there are at least N versions (including the live version) newer than this version of the object.</dd> </dl> </dd> </dl> </dd> </dl> </dd> <dt><code>location</code></dt> <dd>The location of the bucket. Object data for objects in the bucket resides in physical storage within this region. Defaults to US. See the developer’s guide for the authoritative list.</dd> <dt><code>logging</code></dt> <dd>The bucket’s logging configuration, which defines the destination bucket and optional name prefix for the current bucket’s logs. <dl> <dt><code>log_bucket</code></dt> <dd>The destination bucket where the current bucket’s logs should be placed.</dd> <dt><code>log_object_prefix</code></dt> <dd>A prefix for log object names.</dd> </dl> </dd> <dt><code>metageneration</code></dt> <dd>The metadata generation of this bucket.</dd> <dt><code>name</code></dt> <dd>The name of the bucket</dd> <dt><code>owner</code></dt> <dd>The owner of the bucket. This is always the project team’s owner group. <dl> <dt><code>entity</code></dt> <dd>The entity, in the form project-owner-projectId.</dd> <dt><code>entity_id</code></dt> <dd>The ID for the entity.</dd> </dl> </dd> <dt><code>project_number</code></dt> <dd>The project number of the project the bucket belongs to.</dd> <dt><code>storage_class</code></dt> <dd>The bucket’s default storage class, used whenever no storageClass is specified for a newly-created object. This defines how objects in the bucket are stored and determines the SLA and the cost of storage. Values include MULTI_REGIONAL, REGIONAL, STANDARD, NEARLINE, COLDLINE, ARCHIVE, and DURABLE_REDUCED_AVAILABILITY. If this value is not specified when the bucket is created, it will default to STANDARD. For more information, see storage classes. <p>Possible values:</p> <ul> <li>MULTI_REGIONAL</li> <li>REGIONAL</li> <li>STANDARD</li> <li>NEARLINE</li> <li>COLDLINE</li> <li>ARCHIVE</li> <li>DURABLE_REDUCED_AVAILABILITY</li> </ul> </dd> <dt><code>time_created</code></dt> <dd>The creation time of the bucket in RFC 3339 format.</dd> <dt><code>updated</code></dt> <dd>The modification time of the bucket in RFC 3339 format.</dd> <dt><code>versioning</code></dt> <dd>The bucket’s versioning configuration. <dl> <dt><code>enabled</code></dt> <dd>While set to true, versioning is fully enabled for this bucket.</dd> </dl> </dd> <dt><code>website</code></dt> <dd>The bucket’s website configuration, controlling how the service behaves when accessing bucket contents as a website. See the Static Website Examples for more information. <dl> <dt><code>main_page_suffix</code></dt> <dd>If the requested object path is missing, the service will ensure the path has a trailing ‘/’, append this suffix, and attempt to retrieve the resulting object. This allows the creation of index.html objects to represent directory pages.</dd> <dt><code>not_found_page</code></dt> <dd>If the requested object path is missing, and any mainPageSuffix object is missing, if applicable, the service will return the named object from this bucket as the content for a 404 Not Found result.</dd> </dl> </dd> <dt><code>labels</code></dt> <dd>Labels applied to this bucket. A list of key-&gt;value pairs.</dd> <dt><code>encryption</code></dt> <dd>Encryption configuration for the bucket <dl> <dt><code>default_kms_key_name</code></dt> <dd>A Cloud KMS key that will be used to encrypt objects inserted into this bucket, if no encryption method is specified.</dd> </dl> </dd> <dt><code>retention_policy</code></dt> <dd>Retention policy for the bucket <dl> <dt><code>effective_time</code></dt> <dd>The time from which the retention policy was effective</dd> <dt><code>is_locked</code></dt> <dd>If the retention policy is locked. If true, the retention policy cannot be removed and the period cannot be reduced.</dd> <dt><code>retention_period</code></dt> <dd>The period of time, in seconds, that objects in the bucket must be retained and cannot be deleted, overwritten, or made noncurrent.</dd> </dl> </dd> <dt><code>project</code></dt> <dd>A valid API project identifier.</dd> <dt><code>predefined_default_object_acl</code></dt> <dd>Apply a predefined set of default object access controls to this bucket. Acceptable values are: - “authenticatedRead”: Object owner gets OWNER access, and allAuthenticatedUsers get READER access. - “bucketOwnerFullControl”: Object owner gets OWNER access, and project team owners get OWNER access. - “bucketOwnerRead”: Object owner gets OWNER access, and project team owners get READER access. - “private”: Object owner gets OWNER access. - “projectPrivate”: Object owner gets OWNER access, and project team members get access according to their roles. - “publicRead”: Object owner gets OWNER access, and allUsers get READER access. <p>Possible values:</p> <ul> <li>authenticatedRead</li> <li>bucketOwnerFullControl</li> <li>bucketOwnerRead</li> <li>private</li> <li>projectPrivate</li> <li>publicRead</li> </ul> </dd> </dl> <h2 id="gcp-permissions">GCP Permissions</h2> <p>Ensure the <a href="https://console.cloud.google.com/apis/library/storage-component.googleapis.com/">Google Cloud Storage</a> is enabled for the current project.</p> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef&trade; Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs.chef.io/inspec/resources/google_storage_bucket/" class="_attribution-link">https://docs.chef.io/inspec/resources/google_storage_bucket/</a>
  </p>
</div>
