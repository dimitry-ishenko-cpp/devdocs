<div id="col-content" data-swiftype-index="true"> <div id="habitat_package-resource"><h1>habitat_package resource</h1></div>  <div class="prose"> <p data-swiftype-index="false"> <a href="https://github.com/inspec/inspec/tree/main/docs-chef-io/content/inspec/resources/habitat_package.md" alt="Link to page on GitHub repository">[edit on GitHub]</a> </p> <p>Use the <code>habitat_package</code> InSpec audit resource to test properties of a single Habitat package.</p> <h2 id="availability">Availability</h2> <h3 id="status-experimental">Status: EXPERIMENTAL</h3> <p>This resource, like all of the inspec-habitat resource pack, is in the early stages of research and development. Functionality may be defective, incomplete, or be withdrawn in the future. If you are interested in helping this project mature, please join the conversation or contribute code at the <a href="https://github.com/inspec/inspec-habitat">inspec-habitat project</a>.</p> <h3 id="connecting-to-habitat">Connecting to Habitat</h3> <p>To configure <code>inspec</code> to be able to communicate with Chef Habitat, be sure <a href="https://github.com/inspec/inspec-habitat#configuring-inspec-to-reach-habitat">to follow the instructions</a> regarding configuring the connection options. This will prevent ‘unsupported platform’ errors.</p> <h2 id="examples">Examples</h2> <h3 id="check-for-corehttpd-package">Check for core/httpd package</h3> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">describe habitat_package(<span style="color:#517918">origin</span>: <span style="color:#4070a0">'core'</span>, <span style="color:#007020">name</span>: <span style="color:#4070a0">'httpd'</span>) <span style="color:#007020;font-weight:700">do</span>
  it             { should exist }
  its(<span style="color:#4070a0">'version'</span>) { should eq <span style="color:#4070a0">'2.4.35'</span>}
  its(<span style="color:#4070a0">'release'</span>) { should eq <span style="color:#4070a0">'20190307151146'</span>}
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<h2 id="limitations">Limitations</h2> <h3 id="api-versus-cli-access">API versus CLI access</h3> <p>Habitat exposes certain data via the CLI, and other data via the HTTP Gateway API.</p> <p>This resource is <strong>only</strong> available using CLI credentials.</p> <p>If you use the API interface without the CLI, instances of this resource will behave as if the sought-after package was not found.</p> <h3 id="behavior-when-not-found">Behavior when not found</h3> <p>If the package is not found, then this resource behaves as follows:</p> <ul> <li>
<code>it { should exist }</code> will be a failing test. Check this test if you are unsure if the resource will exist; it is guaranteed to be reliable in the future.</li> <li>
<code>name</code>, <code>origin</code>, <code>version</code>, and <code>release</code> will continue to return their values as set in the resource parameters. This allows output messaging to refer to the missing package clearly.</li> <li>
<code>identifier</code> will return as much information as it can assemble from <code>name</code>, <code>origin</code>, <code>version</code>, and <code>release</code>.</li> <li>All other single-value properties will return <code>nil</code>.</li> <li>All array- and hash-valued properties will return empty objects.</li> <li>All matchers will return <code>false</code>.</li> </ul> <h3 id="behavior-when-multiple-packages-match">Behavior when multiple packages match</h3> <p>A system can have multiple versions of the same-named package installed (or even multiple releases of the same version of the same named package). For this reason, if you under-specify the resource parameters, you may match with multiple packages. Under these conditions, this resource will throw an <code>ArgumentError</code> exception, and the resource test will be recorded as a failure.</p> <p>To avoid this possibility, fully specify the resource parameters, including <code>version</code> and <code>release</code>.</p> <p>To list all installed versions and releases of a named package, use the plural resource <code>habitat_packages</code>.</p> <h2 id="availability-1">Availability</h2> <h3 id="installation">Installation</h3> <p>This resource is in the <code>inspec-habitat</code> resource pack. You can use the resource by setting an InSpec profile dependency on this resource pack. See <a href="https://github.com/inspec/inspec-habitat#installation">inspec-habitat instructions</a></p> <h3 id="version">Version</h3> <p>This resource was first available in version 0.1.0 of the resource pack.</p> <h2 id="resource-parameters">Resource Parameters</h2> <p>Use <a href="../../glossary/index.html#resource-parameter">resource parameters</a> to identify the particular package you wish to test.</p> <p><code>habitat_package</code> can accept a single resource parameter, a <code>String</code> package identifier; or it can accept a <code>Hash</code> of identifier components.</p> <h3 id="as-a-single-string">As a single <code>String</code>
</h3> <p>Using this approach, you pass the package identifier as a single <code>String</code>. It should consist of <code>&lt;origin&gt;/&lt;name&gt;/&lt;version&gt;/&lt;release&gt;</code>, though <code>version</code> and <code>release</code> are optional.</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">describe habitat_package(<span style="color:#4070a0">'core/httpd'</span>) <span style="color:#007020;font-weight:700">do</span>
  it { should exist }
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<h3 id="using-individual-identifier-components-as-a-hash">Using individual identifier components as a <code>Hash</code>
</h3> <p>This approach can make it easier to write resource tests that use InSpec inputs or Ruby variables.</p> <h4 id="origin">origin</h4> <p><code>String</code>. The name of the <code>origin</code> (distribution facility) that provides the package.</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby"><span style="color:#60a0b0;font-style:italic"># Most common origin is 'core', publicly distributed packages created by Chef</span>
describe habitat_package(<span style="color:#517918">origin</span>: <span style="color:#4070a0">'core'</span>, <span style="color:#007020">name</span>: <span style="color:#4070a0">'httpd'</span>) <span style="color:#007020;font-weight:700">do</span>
  it { should exist }
<span style="color:#007020;font-weight:700">end</span>

<span style="color:#60a0b0;font-style:italic"># Your company might run a private origin</span>
describe habitat_package(<span style="color:#517918">origin</span>: <span style="color:#4070a0">'mycorp'</span>, <span style="color:#007020">name</span>: <span style="color:#4070a0">'secret-sauce'</span>) <span style="color:#007020;font-weight:700">do</span>
  it { should exist }
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<h4 id="name">name</h4> <p><code>String</code>. The name (unique within the namespace of the origin) of the package. This may match more than one package; see <a href="#behavior-when-multiple-packages-match">Behavior when multiple packages match</a>.</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">describe habitat_package(<span style="color:#517918">origin</span>: <span style="color:#4070a0">'core'</span>, <span style="color:#007020">name</span>: <span style="color:#4070a0">'httpd'</span>) <span style="color:#007020;font-weight:700">do</span>
  it { should exist }
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<h4 id="release">release</h4> <p><code>String</code>, a 14-digit timestamp of the form ‘YYYMMDDHHmmSS’. The release number of the package as determined by the packager of the software. If you provide this, you must also provide the version; with all four components, the match is guarenteed to be unique.</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">describe habitat_package(<span style="color:#517918">origin</span>: <span style="color:#4070a0">'core'</span>, <span style="color:#007020">name</span>: <span style="color:#4070a0">'httpd'</span>, <span style="color:#517918">version</span>: <span style="color:#4070a0">'2.3.5'</span>, <span style="color:#517918">release</span>: <span style="color:#4070a0">'20190307151146'</span>) <span style="color:#007020;font-weight:700">do</span>
  it { should exist }
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<h4 id="version-1">version</h4> <p><code>String</code>, typically of the form <code>1.2.3</code> but formats vary. The version of the package as determined by the author of the software. This may match more than one package, because multiple releases of the same version may be co-installed; see <a href="#behavior-when-multiple-packages-match">Behavior when multiple packages match</a>.</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">describe habitat_package(<span style="color:#517918">origin</span>: <span style="color:#4070a0">'core'</span>, <span style="color:#007020">name</span>: <span style="color:#4070a0">'httpd'</span>, <span style="color:#517918">version</span>: <span style="color:#4070a0">'2.3.5'</span>) <span style="color:#007020;font-weight:700">do</span>
  it { should exist }
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<h2 id="properties">Properties</h2> <p>Use <a href="../../glossary/index.html#property">properties</a> to create tests that compare an expected value to the actual value.</p> <h3 id="identifier">identifier</h3> <p><code>String</code>. The origin, name, version (if known) and release (if known) concatenated with <code>/</code>, to create the package identifier.</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">describe habitat_package(<span style="color:#517918">origin</span>: <span style="color:#4070a0">'core'</span>, <span style="color:#007020">name</span>: <span style="color:#4070a0">'httpd'</span>) <span style="color:#007020;font-weight:700">do</span>
  its(<span style="color:#4070a0">'identifier'</span>) { should eq <span style="color:#4070a0">'core/httpd/2.4.35/20190307151146'</span> }
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<h3 id="name-1">name</h3> <p><code>String</code>. The name of the package, as passed in via the resource parameter. Always available, even if the resource was not found. See also <a href="#origin">origin</a> and <a href="#version">version</a>.</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">describe habitat_package(<span style="color:#517918">origin</span>: <span style="color:#4070a0">'core'</span>, <span style="color:#007020">name</span>: <span style="color:#4070a0">'httpd'</span>) <span style="color:#007020;font-weight:700">do</span>
  its(<span style="color:#4070a0">'name'</span>) { should cmp <span style="color:#4070a0">'httpd'</span> }
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<h3 id="origin-1">origin</h3> <p><code>String</code>. The origin name of the package, as passed in via the resource parameter. Always available, even if the resource was not found. See also <a href="#name">name</a> and <a href="#version">version</a>.</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">describe habitat_package(<span style="color:#517918">origin</span>: <span style="color:#4070a0">'core'</span>, <span style="color:#007020">name</span>: <span style="color:#4070a0">'httpd'</span>) <span style="color:#007020;font-weight:700">do</span>
  its(<span style="color:#4070a0">'origin'</span>) { should cmp <span style="color:#4070a0">'core'</span> }
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<h3 id="pkg_id">pkg_id</h3> <p><code>String</code>. The full package identifier of the package, in the form <code>origin/name/version/release</code>. See also <a href="#name">name</a> and <a href="#version">version</a>.</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">describe habitat_package(<span style="color:#517918">origin</span>: <span style="color:#4070a0">'core'</span>, <span style="color:#007020">name</span>: <span style="color:#4070a0">'httpd'</span>) <span style="color:#007020;font-weight:700">do</span>
  its(<span style="color:#4070a0">'pkg_id'</span>) { should cmp <span style="color:#4070a0">'core/httpd/2.4.35/20190307151146'</span> }
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<h3 id="release-1">release</h3> <p><code>String</code>. The release number of the package, as assigned by the packager. These values are always strings, but are 14-digit timestamps. See also <a href="#version">version</a>.</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">describe habitat_package(<span style="color:#517918">origin</span>: <span style="color:#4070a0">'core'</span>, <span style="color:#007020">name</span>: <span style="color:#4070a0">'httpd'</span>) <span style="color:#007020;font-weight:700">do</span>
  its(<span style="color:#4070a0">'release'</span>) { should be <span style="color:#666">&gt;=</span> <span style="color:#4070a0">'20190307151146'</span> }
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<h3 id="version-2">version</h3> <p><code>String</code>. The version of the package, as assigned by the maintainer of the package project. While many versions are of the 3-digit form, there is no set rule, and exceptions are common. See also <a href="#release">release</a>.</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">describe habitat_package(<span style="color:#517918">origin</span>: <span style="color:#4070a0">'core'</span>, <span style="color:#007020">name</span>: <span style="color:#4070a0">'httpd'</span>) <span style="color:#007020;font-weight:700">do</span>
  its(<span style="color:#4070a0">'version'</span>) { should be <span style="color:#666">&gt;=</span>  <span style="color:#4070a0">'2.2'</span> }
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<h2 id="matchers">Matchers</h2> <p>Use <a href="../../glossary/index.html#matcher">matchers</a> to create tests that test a true or false question.</p> <p>InSpec includes a number of <a href="../../matchers/index.html">universal matchers</a>. See below for matchers specific to this resource.</p> <p>This resource does not provide any resource-specific matchers.</p> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef&trade; Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs.chef.io/inspec/resources/habitat_package/" class="_attribution-link">https://docs.chef.io/inspec/resources/habitat_package/</a>
  </p>
</div>
