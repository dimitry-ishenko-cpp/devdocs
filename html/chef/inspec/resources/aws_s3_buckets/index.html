<div id="col-content" data-swiftype-index="true"> <div id="aws_s3_buckets-resource"><h1>aws_s3_buckets resource</h1></div>  <div class="prose"> <p data-swiftype-index="false"> <a href="https://github.com/inspec/inspec/tree/main/docs-chef-io/content/inspec/resources/aws_s3_buckets.md" alt="Link to page on GitHub repository">[edit on GitHub]</a> </p> <p>Use the <code>aws_s3_buckets</code> InSpec audit resource to list all buckets in a single account.</p> <h2 id="syntax">Syntax</h2> <p>An <code>aws_s3_buckets</code> resource block takes no arguments</p> <pre class="highlight" data-language="ruby"><code>describe aws_s3_buckets do
  it { should exist }
end
</code></pre> <h2 id="parameters">Parameters</h2> <p>This resource does not expect any parameters.</p> <p>See also the <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/UsingBucket.html">AWS documentation on S3 Buckets</a>.</p> <h2 id="properties">Properties</h2> <table> <thead> <tr> <th>Property</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>bucket_names</td> <td>An Array of bucket names.</td> </tr> <tr> <td>tags</td> <td>An hash with each key-value pair corresponding to a tag associated with the entity</td> </tr> <tr> <td>entries</td> <td>Provides access to the raw results of the query, which can be treated as an array of hashes.</td> </tr> </tbody> </table> <h2 id="examples">Examples</h2> <h3 id="examine-what-buckets-have-been-created">Examine what buckets have been created.</h3> <pre class="highlight" data-language="ruby"><code>describe aws_s3_buckets do
  its('bucket_names') { should eq ['my_bucket'] }
  # OR
  its('bucket_names') { should include 'my_bucket' }
end
</code></pre> <h3 id="check-the-tags-on-buckets">Check the tags on buckets</h3> <pre class="highlight" data-language="ruby"><code>describe aws_s3_buckets.where( bucket_names: 'my-bucket' ) do
    its('tags') { should include(:Environment =&gt; 'env-name',
                                  :Name =&gt; 'bucket-name')}
end
</code></pre> <h2 id="matchers">Matchers</h2> <h3 id="exists">exists</h3> <p>The control will pass if the resource contains at least one bucket.</p> <pre class="highlight" data-language="ruby"><code># Test if there are any buckets
describe aws_s3_buckets
  it { should exist }
end
</code></pre> <h2 id="aws-permissions">AWS Permissions</h2> <p>Your <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/intro-structure.html#intro-structure-principal">Principal</a> will need the <code>s3:ListAllMyBuckets</code> action with Effect set to Allow.</p> <p>You can find detailed documentation at <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/list_amazons3.html">Actions, Resources, and Condition Keys for Amazon S3</a>.</p> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef&trade; Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs.chef.io/inspec/resources/aws_s3_buckets/" class="_attribution-link">https://docs.chef.io/inspec/resources/aws_s3_buckets/</a>
  </p>
</div>
