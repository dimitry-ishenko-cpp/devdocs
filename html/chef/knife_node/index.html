<div id="col-content" data-swiftype-index="true"> <div id="knife-node"><h1>knife node</h1></div>  <div class="prose"> <p data-swiftype-index="false"> <a href="https://github.com/chef/chef-workstation/blob/main/docs-chef-io/content/workstation/knife_node.md" alt="Link to page on GitHub repository">[edit on GitHub]</a> </p> <p>A node is any device—physical, virtual, cloud, network device, etc.—that is under management by Chef Infra.</p> <p>Use the <code>knife node</code> subcommand to manage the nodes that exist on a Chef Infra Server.</p> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> Review the list of <a href="../workstation/knife_options/index.html">common options</a> available to this (and all) knife subcommands and plugins. </div> </div> <h2 id="bulk-delete">bulk delete</h2> <p>Use the <code>bulk delete</code> argument to delete one or more nodes that match a pattern defined by a regular expression. The regular expression must be within quotes and not be surrounded by forward slashes (/).</p> <h3 id="syntax">Syntax</h3> <p>This argument has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node bulk delete REGEX
</code></pre></div>
<h3 id="options">Options</h3> <p>This command does not have any specific options.</p> <h3 id="examples">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Bulk delete nodes</strong></p> <p>Use a regular expression to define the pattern used to bulk delete nodes:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node bulk delete <span style="color:#4070a0">"^[0-9]{3}</span>$<span style="color:#4070a0">"</span>
</code></pre></div>
<p>Type <code>Y</code> to confirm a deletion.</p> <h2 id="create">create</h2> <p>Use the <code>create</code> argument to add a node to the Chef Infra Server. Node data is stored as JSON on the Chef Infra Server.</p> <h3 id="syntax-1">Syntax</h3> <p>This argument has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node create NODE_NAME
</code></pre></div>
<h3 id="options-1">Options</h3> <p>This command does not have any specific options.</p> <h3 id="examples-1">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Create a node</strong></p> <p>To add a node named <code>node1</code>, enter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node create node1
</code></pre></div>
<p>In the $EDITOR enter the node data in JSON:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-javascript" data-lang="javascript">{
   <span style="color:#4070a0">"normal"</span><span style="color:#666">:</span> {
   },
   <span style="color:#4070a0">"name"</span><span style="color:#666">:</span> <span style="color:#4070a0">"foobar"</span>,
   <span style="color:#4070a0">"override"</span><span style="color:#666">:</span> {
   },
   <span style="color:#4070a0">"default"</span><span style="color:#666">:</span> {
   },
   <span style="color:#4070a0">"json_class"</span><span style="color:#666">:</span> <span style="color:#4070a0">"Chef::Node"</span>,
   <span style="color:#4070a0">"automatic"</span><span style="color:#666">:</span> {
   },
   <span style="color:#4070a0">"run_list"</span><span style="color:#666">:</span> [
      <span style="color:#4070a0">"recipe[zsh]"</span>,
      <span style="color:#4070a0">"role[webserver]"</span>
   ],
   <span style="color:#4070a0">"chef_type"</span><span style="color:#666">:</span> <span style="color:#4070a0">"node"</span>
}
</code></pre></div>
<p>When finished, save it.</p> <h2 id="delete">delete</h2> <p>Use the <code>delete</code> argument to delete a node from the Chef Infra Server. If using Chef Client 12.17 or later, you can delete multiple nodes using this subcommand.</p> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> Deleting a node will not delete any corresponding API clients. </div> </div> <h3 id="syntax-2">Syntax</h3> <p>This argument has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node delete NODE_NAME
</code></pre></div>
<h3 id="options-2">Options</h3> <p>This command does not have any specific options.</p> <h3 id="examples-2">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Delete a node</strong></p> <p>To delete a node named <code>node1</code>, enter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node delete node1
</code></pre></div>
<h2 id="edit">edit</h2> <p>Use the <code>edit</code> argument to edit the details of a node on a Chef Infra Server. Node data is stored as JSON on the Chef Infra Server.</p> <h3 id="syntax-3">Syntax</h3> <p>This argument has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node edit NODE_NAME <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h3 id="options-3">Options</h3> <p>This argument has the following options:</p> <dl> <dt>
<code>-a</code>, <code>--all</code>
</dt> <dd> <p>Display a node in the $EDITOR. By default, attributes that are default, override, or automatic, are not shown.</p> </dd> </dl> <h3 id="examples-3">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Edit a node</strong></p> <p>To edit the data for a node named <code>node1</code>, enter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node edit node1 -a
</code></pre></div>
<p>Update the role data in JSON:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-javascript" data-lang="javascript">{
   <span style="color:#4070a0">"normal"</span><span style="color:#666">:</span> {
   },
   <span style="color:#4070a0">"name"</span><span style="color:#666">:</span> <span style="color:#4070a0">"node1"</span>,
   <span style="color:#4070a0">"override"</span><span style="color:#666">:</span> {
   },
   <span style="color:#4070a0">"default"</span><span style="color:#666">:</span> {
   },
   <span style="color:#4070a0">"json_class"</span><span style="color:#666">:</span> <span style="color:#4070a0">"Chef::Node"</span>,
   <span style="color:#4070a0">"automatic"</span><span style="color:#666">:</span> {
   },
   <span style="color:#4070a0">"run_list"</span><span style="color:#666">:</span> [
      <span style="color:#4070a0">"recipe[devops]"</span>,
      <span style="color:#4070a0">"role[webserver]"</span>
   ],
   <span style="color:#4070a0">"chef_type"</span><span style="color:#666">:</span> <span style="color:#4070a0">"node"</span>
}
</code></pre></div>
<p>When finished, save it.</p> <h2 id="environment-set">environment set</h2> <p>Use the <code>environment set</code> argument to set the environment for a node without editing the node object.</p> <h3 id="syntax-4">Syntax</h3> <p>This argument has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node environment_set NODE_NAME ENVIRONMENT_NAME <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h3 id="options-4">Options</h3> <p>This command does not have any specific options.</p> <h3 id="examples-4">Examples</h3> <p>None.</p> <h2 id="from-file">from file</h2> <p>Use the <code>from file</code> argument to create a node using existing node data as a template.</p> <h3 id="syntax-5">Syntax</h3> <p>This argument has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node from file FILE
</code></pre></div>
<h3 id="options-5">Options</h3> <p>This command does not have any specific options.</p> <h3 id="examples-5">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Create a node using a JSON file</strong></p> <p>To add a node using data contained in a JSON file:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node from file <span style="color:#4070a0">"PATH_TO_JSON_FILE"</span>
</code></pre></div>
<h2 id="list">list</h2> <p>Use the <code>list</code> argument to view all of the nodes that exist on a Chef Infra Server.</p> <h3 id="syntax-6">Syntax</h3> <p>This argument has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node list <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h3 id="options-6">Options</h3> <p>This argument has the following options:</p> <dl> <dt>
<code>-w</code>, <code>--with-uri</code>
</dt> <dd> <p>Show the corresponding URIs.</p> </dd> </dl> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> See <a href="../workstation/config_rb_optional_settings/index.html">config.rb</a> for more information about how to add certain knife options as settings in the config.rb file. </div> </div> <h3 id="examples-6">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>View a list of nodes</strong></p> <p>To verify the list of nodes that are registered with the Chef Infra Server, enter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node list
</code></pre></div>
<p>to return something similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">i-12345678
rs-123456
</code></pre></div>
<h2 id="policy-set">policy set</h2> <p>Use the <code>policy set</code> argument to set the policy group and policy name for a node.</p> <h3 id="syntax-7">Syntax</h3> <p>This argument has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node policy <span style="color:#007020">set</span> NODE POLICY_GROUP POLICY_NAME
</code></pre></div>
<h3 id="examples-7">Examples</h3> <p>Set the policy group and policy name for a node named <code>test-node</code>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node policy <span style="color:#007020">set</span> test-node <span style="color:#4070a0">'test-group'</span> <span style="color:#4070a0">'test-name'</span>
</code></pre></div>
<h2 id="run_list-add">run_list add</h2> <p>A run-list defines all of the information necessary for Chef to configure a node into the desired state. A run-list is:</p> <ul> <li>An ordered list of roles and/or recipes that are run in the exact order defined in the run-list; if a recipe appears more than once in the run-list, Chef Infra Client will not run it twice</li> <li>Always specific to the node on which it runs; nodes may have a run-list that is identical to the run-list used by other nodes</li> <li>Stored as part of the node object on the Chef server</li> <li>Maintained using knife and then uploaded from the workstation to the Chef Infra Server, or maintained using Chef Automate</li> </ul> <p>Use the <code>run_list add</code> argument to add run-list items (roles or recipes) to a node.</p> <p>A run-list must be in one of the following formats: fully qualified, cookbook, or default. Both roles and recipes must be in quotes, for example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-javascript" data-lang="javascript"><span style="color:#4070a0">"role[NAME]"</span>
</code></pre></div>
<p>or</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-javascript" data-lang="javascript"><span style="color:#4070a0">"recipe[COOKBOOK::RECIPE]"</span>
</code></pre></div>
<p>Use a comma to separate roles and recipes when adding more than one item the run-list:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-javascript" data-lang="javascript"><span style="color:#4070a0">"recipe[COOKBOOK::RECIPE],COOKBOOK::RECIPE,role[NAME]"</span>
</code></pre></div>
<h3 id="syntax-8">Syntax</h3> <p>This argument has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node run_list add NODE_NAME RUN_LIST_ITEM <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<div class="admonition-warning"> <p class="admonition-warning-title">Warning</p> <div class="admonition-warning-text"> <p>When running knife in Microsoft Windows, a string may be interpreted as a wildcard pattern when quotes are not present in the command. The number of quotes to use depends on the shell from which the command is being run.</p> <p>When running knife from the command prompt, a string should be surrounded by single quotes (<code>' '</code>). For example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node run_list <span style="color:#007020">set</span> test-node <span style="color:#4070a0">'recipe[iptables]'</span>
</code></pre></div>
<p>When running knife from Windows PowerShell, a string should be surrounded by triple single quotes (<code>''' '''</code>). For example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node run_list <span style="color:#007020">set</span> test-node <span style="color:#4070a0">'''recipe[iptables]'''</span>
</code></pre></div> </div> </div> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> <p>The Chef Client 12.4 release adds an optional feature to the Microsoft Installer Package (MSI) for Chef. This feature enables the ability to pass quoted strings from the Windows PowerShell command line without the need for triple single quotes (<code>''' '''</code>). This feature installs a Windows PowerShell module (typically in <code>C:\opscode\chef\modules</code>) that is also appended to the <code>PSModulePath</code> environment variable. This feature is not enabled by default. To activate this feature, run the following command from within Windows PowerShell:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">Import-Module chef
</code></pre></div>
<p>or add <code>Import-Module chef</code> to the profile for Windows PowerShell located at:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">~<span style="color:#4070a0;font-weight:700">\D</span>ocuments<span style="color:#4070a0;font-weight:700">\W</span>indowsPowerShell<span style="color:#4070a0;font-weight:700">\M</span>icrosoft.PowerShell_profile.ps1
</code></pre></div>
<p>This module exports cmdlets that have the same name as the command-line tools—chef-client, knife—that are built into Chef.</p> <p>For example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife <span style="color:#007020">exec</span> -E <span style="color:#4070a0">'puts ARGV'</span> <span style="color:#4070a0">"""&amp;s0meth1ng"""</span>
</code></pre></div>
<p>is now:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife <span style="color:#007020">exec</span> -E <span style="color:#4070a0">'puts ARGV'</span> <span style="color:#4070a0">'&amp;s0meth1ng'</span>
</code></pre></div>
<p>and:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node run_list <span style="color:#007020">set</span> test-node <span style="color:#4070a0">'''role[ssssssomething]'''</span>
</code></pre></div>
<p>is now:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node run_list <span style="color:#007020">set</span> test-node <span style="color:#4070a0">'role[ssssssomething]'</span>
</code></pre></div>
<p>To remove this feature, run the following command from within Windows PowerShell:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">Remove-Module chef
</code></pre></div> </div> </div> <h3 id="options-7">Options</h3> <p>This argument has the following options:</p> <dl> <dt>
<code>-a ITEM</code>, <code>--after ITEM</code>
</dt> <dd> <p>Add a run-list item after the specified run-list item.</p> </dd> <dt>
<code>-b ITEM</code>, <code>--before ITEM</code>
</dt> <dd> <p>Add a run-list item before the specified run-list item.</p> </dd> </dl> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> See <a href="../workstation/config_rb_optional_settings/index.html">config.rb</a> for more information about how to add certain knife options as settings in the config.rb file. </div> </div> <h3 id="examples-8">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Add a role</strong></p> <p>To add a role to a run-list, enter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node run_list add NODE_NAME <span style="color:#4070a0">'role[ROLE_NAME]'</span>
</code></pre></div>
<p><strong>Add roles and recipes</strong></p> <p>To add roles and recipes to a run-list, enter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node run_list add NODE_NAME <span style="color:#4070a0">'recipe[COOKBOOK::RECIPE_NAME],recipe[COOKBOOK::RECIPE_NAME],role[ROLE_NAME]'</span>
</code></pre></div>
<p><strong>Add a recipe with a FQDN</strong></p> <p>To add a recipe to a run-list using the fully qualified format, enter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node run_list add NODE_NAME <span style="color:#4070a0">'recipe[COOKBOOK::RECIPE_NAME]'</span>
</code></pre></div>
<p><strong>Add a recipe with a cookbook</strong></p> <p>To add a recipe to a run-list using the cookbook format, enter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node run_list add NODE_NAME <span style="color:#4070a0">'COOKBOOK::RECIPE_NAME'</span>
</code></pre></div>
<p><strong>Add the default recipe</strong></p> <p>To add the default recipe of a cookbook to a run-list, enter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node run_list add NODE_NAME <span style="color:#4070a0">'COOKBOOK'</span>
</code></pre></div>
<h2 id="run_list-remove">run_list remove</h2> <p>Use the <code>run_list remove</code> argument to remove run-list items (roles or recipes) from a node. A recipe must be in one of the following formats: fully qualified, cookbook, or default. Both roles and recipes must be in quotes, for example: <code>'role[ROLE_NAME]'</code> or <code>'recipe[COOKBOOK::RECIPE_NAME]'</code>. Use a comma to separate roles and recipes when removing more than one, like this: <code>'recipe[COOKBOOK::RECIPE_NAME],COOKBOOK::RECIPE_NAME,role[ROLE_NAME]'</code>.</p> <h3 id="syntax-9">Syntax</h3> <p>This argument has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node run_list remove NODE_NAME RUN_LIST_ITEM
</code></pre></div>
<h3 id="options-8">Options</h3> <p>This command does not have any specific options.</p> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> See <a href="../workstation/config_rb_optional_settings/index.html">config.rb</a> for more information about how to add certain knife options as settings in the config.rb file. </div> </div> <h3 id="examples-9">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Remove a role</strong></p> <p>To remove a role from a run-list, enter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node run_list remove NODE_NAME <span style="color:#4070a0">'role[ROLE_NAME]'</span>
</code></pre></div>
<p><strong>Remove a run-list</strong></p> <p>To remove a recipe from a run-list using the fully qualified format, enter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node run_list remove NODE_NAME <span style="color:#4070a0">'recipe[COOKBOOK::RECIPE_NAME]'</span>
</code></pre></div>
<h2 id="run_list-set">run_list set</h2> <p>Use the <code>run_list set</code> argument to set the run-list for a node. A recipe must be in one of the following formats: fully qualified, cookbook, or default. Both roles and recipes must be in quotes, for example: <code>"role[ROLE_NAME]"</code> or <code>"recipe[COOKBOOK::RECIPE_NAME]"</code>. Use a comma to separate roles and recipes when setting more than one, like this: <code>"recipe[COOKBOOK::RECIPE_NAME],COOKBOOK::RECIPE_NAME,role[ROLE_NAME]"</code>.</p> <h3 id="syntax-10">Syntax</h3> <p>This argument has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node run_list <span style="color:#007020">set</span> NODE_NAME RUN_LIST_ITEM
</code></pre></div>
<div class="admonition-warning"> <p class="admonition-warning-title">Warning</p> <div class="admonition-warning-text"> <p>When running knife in Microsoft Windows, a string may be interpreted as a wildcard pattern when quotes are not present in the command. The number of quotes to use depends on the shell from which the command is being run.</p> <p>When running knife from the command prompt, a string should be surrounded by single quotes (<code>' '</code>). For example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node run_list <span style="color:#007020">set</span> test-node <span style="color:#4070a0">'recipe[iptables]'</span>
</code></pre></div>
<p>When running knife from Windows PowerShell, a string should be surrounded by triple single quotes (<code>''' '''</code>). For example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node run_list <span style="color:#007020">set</span> test-node <span style="color:#4070a0">'''recipe[iptables]'''</span>
</code></pre></div> </div> </div> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> <p>The Chef Client 12.4 release adds an optional feature to the Microsoft Installer Package (MSI) for Chef. This feature enables the ability to pass quoted strings from the Windows PowerShell command line without the need for triple single quotes (<code>''' '''</code>). This feature installs a Windows PowerShell module (typically in <code>C:\opscode\chef\modules</code>) that is also appended to the <code>PSModulePath</code> environment variable. This feature is not enabled by default. To activate this feature, run the following command from within Windows PowerShell:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">Import-Module chef
</code></pre></div>
<p>or add <code>Import-Module chef</code> to the profile for Windows PowerShell located at:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">~<span style="color:#4070a0;font-weight:700">\D</span>ocuments<span style="color:#4070a0;font-weight:700">\W</span>indowsPowerShell<span style="color:#4070a0;font-weight:700">\M</span>icrosoft.PowerShell_profile.ps1
</code></pre></div>
<p>This module exports cmdlets that have the same name as the command-line tools—chef-client, knife—that are built into Chef.</p> <p>For example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife <span style="color:#007020">exec</span> -E <span style="color:#4070a0">'puts ARGV'</span> <span style="color:#4070a0">"""&amp;s0meth1ng"""</span>
</code></pre></div>
<p>is now:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife <span style="color:#007020">exec</span> -E <span style="color:#4070a0">'puts ARGV'</span> <span style="color:#4070a0">'&amp;s0meth1ng'</span>
</code></pre></div>
<p>and:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node run_list <span style="color:#007020">set</span> test-node <span style="color:#4070a0">'''role[ssssssomething]'''</span>
</code></pre></div>
<p>is now:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node run_list <span style="color:#007020">set</span> test-node <span style="color:#4070a0">'role[ssssssomething]'</span>
</code></pre></div>
<p>To remove this feature, run the following command from within Windows PowerShell:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">Remove-Module chef
</code></pre></div> </div> </div> <h3 id="options-9">Options</h3> <p>This command does not have any specific options.</p> <h3 id="examples-10">Examples</h3> <p>None.</p> <h2 id="show">show</h2> <p>Use the <code>show</code> argument to display information about a node.</p> <h3 id="syntax-11">Syntax</h3> <p>This argument has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node show NODE_NAME <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h3 id="options-10">Options</h3> <p>This argument has the following options:</p> <dl> <dt>
<code>-a ATTR</code>, <code>--attribute ATTR</code>
</dt> <dd> <p>The attribute (or attributes) to show.</p> </dd> <dt>
<code>-F json</code>, <code>--format=json</code>
</dt> <dd> <p>Display output as JSON.</p> </dd> <dt>
<code>-l</code>, <code>--long</code>
</dt> <dd> <p>Display all attributes in the output.</p> </dd> <dt>
<code>-m</code>, <code>--medium</code>
</dt> <dd> <p>Display normal attributes in the output.</p> </dd> <dt>
<code>-r</code>, <code>--run-list</code>
</dt> <dd> <p>Show only the run-list.</p> </dd> </dl> <h3 id="examples-11">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Show all data about nodes</strong></p> <p>To view all data for a node named <code>build</code>, enter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node show build
</code></pre></div>
<p>to return:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">Node Name: build
Environment: _default
FQDN:
IP:
Run List:
Roles:
Recipes:
Platform:
</code></pre></div>
<p><strong>Show basic information about nodes</strong></p> <p>To show basic information about a node, truncated and nicely formatted:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node show NODE_NAME
</code></pre></div>
<p><strong>Show all data about nodes, truncated</strong></p> <p>To show all information about a node, nicely formatted:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node show -l NODE_NAME
</code></pre></div>
<p><strong>Show attributes</strong></p> <p>To list a single node attribute:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node show NODE_NAME -a ATTRIBUTE_NAME
</code></pre></div>
<p>where <code>ATTRIBUTE_NAME</code> is something like <code>kernel</code> or <code>platform</code>.</p> <p>To list a nested attribute:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node show NODE_NAME -a ATTRIBUTE_NAME.NESTED_ATTRIBUTE_NAME
</code></pre></div>
<p>where <code>ATTRIBUTE_NAME</code> is something like <code>kernel</code> and <code>NESTED_ATTRIBUTE_NAME</code> is something like <code>machine</code>.</p> <p><strong>Show the FQDN</strong></p> <p>To view the FQDN for a node named <code>i-12345678</code>, enter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node show i-12345678 -a fqdn
</code></pre></div>
<p>to return:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">fqdn: ip-10-251-75-20.ec2.internal
</code></pre></div>
<p><strong>Show a run-list</strong></p> <p>To view the run-list for a node named <code>dev</code>, enter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node show dev -r
</code></pre></div>
<p><strong>Show as JSON data</strong></p> <p>To view information in JSON format, use the <code>-F</code> common option; use a command like this for a node named <code>devops</code>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node show devops -F json
</code></pre></div>
<p>Other formats available include <code>text</code>, <code>yaml</code>, and <code>pp</code>.</p> <p><strong>Show as raw JSON data</strong></p> <p>To view node information in raw JSON, use the <code>-l</code> or <code>--long</code> option:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node show -l -F json NODE_NAME
</code></pre></div>
<p>and/or:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node show -l --format<span style="color:#666">=</span>json NODE_NAME
</code></pre></div> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef&trade; Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs.chef.io/knife_node/" class="_attribution-link">https://docs.chef.io/knife_node/</a>
  </p>
</div>
