<div id="col-content" data-swiftype-index="true"> <h1 id="all-desktop-resources">All Desktop Resources</h1>  <div class="prose"> <h2 id="macos-admin-control-resource">macos_admin_control resource</h2> <a href="macos_admin_control/index.html">macos_admin_control resource page</a> <hr> <p>Use the <strong>macos_admin_control</strong> resource to require Admin level privileges to make system-wide changes</p> <p><strong>New in Chef Infra Client 1.0.</strong></p> <h3 id="syntax-macos-admin-control">Syntax</h3> <hr>  <p>The full syntax for all of the properties that are available to the <strong>macos_admin_control</strong> resource is:</p> 
<div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">macos_admin_control <span style="color:#4070a0">'name'</span> <span style="color:#007020;font-weight:700">do</span>
  action      <span style="color:#60add5">Symbol</span> <span style="color:#60a0b0;font-style:italic"># defaults to :enable if not specified</span>
<span style="color:#007020;font-weight:700">end</span></code></pre></div> <p>where:</p> <ul> <li>
<code>macos_admin_control</code> is the resource.</li> <li>
<code>name</code> is the name given to the resource block.</li> <li>
<code>action</code> identifies which steps Chef Infra Client will take to bring the node into the desired state.</li> </ul> <h3 id="actions-macos-admin-control">Actions</h3> <hr> <p>The <strong>macos_admin_control</strong> resource has the following actions:</p> <dl> <dt><code>:disable</code></dt>  <dt><code>:enable</code></dt>  <dt><code>:nothing</code></dt> <dd>This resource block does not act unless notified by another resource to take action. Once notified, this resource block either runs immediately or is queued up to run at the end of a Chef Infra Client run.</dd> </dl> <h3 id="properties-macos-admin-control">Properties</h3> <hr> <p>This resource does not have any properties.</p> <br> <h3 id="functionality-macos-admin-control">Common Resource Functionality</h3> <hr> <p>Chef resources include common properties, notifications, and resource guards.</p> <h4 id="common-properties-macos-admin-control">Common Properties</h4> <p>The following properties are common to every resource:</p> <dl> <dt><code>compile_time</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Control the phase during which the resource is run on the node. Set to true to run while the resource collection is being built (the <code>compile phase</code>). Set to false to run while Chef Infra Client is configuring the node (the <code>converge phase</code>).</p> </dd> <dt><code>ignore_failure</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false, :quiet | <strong>Default Value:</strong> <code>false</code></p> <p>Continue running a recipe if a resource fails for any reason. <code>:quiet</code> will not display the full stack trace and the recipe will continue to run if a resource fails.</p> </dd> <dt><code>retries</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>0</code></p> <p>The number of attempts to catch exceptions and retry the resource.</p> </dd> <dt><code>retry_delay</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>2</code></p> <p>The delay in seconds between retry attempts.</p> </dd> <dt><code>sensitive</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Ensure that sensitive resource data is not logged by Chef Infra Client.</p> </dd> </dl> <h4 id="common-notifications-macos-admin-control">Notifications</h4> <dl> <dt> <code>notifies</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> <p>A resource may notify another resource to take action when its state changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> that resource should take, and then the <code>:timer</code> for that action. A resource may notify more than one resource; use a <code>notifies</code> statement for each resource to be notified.</p> <p>If the referenced resource does not exist, an error is raised. In contrast, <code>subscribes</code> will not fail if the source resource is not found.</p> </dd> </dl> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>notifies</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">notifies <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <dl> <dt> <code>subscribes</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> </dd> </dl> <p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> to be taken, and then the <code>:timer</code> for that action.</p> <p>Note that <code>subscribes</code> does not apply the specified action to the resource that it listens to - for example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">file <span style="color:#4070a0">'/etc/nginx/ssl/example.crt'</span> <span style="color:#007020;font-weight:700">do</span>
  mode <span style="color:#4070a0">'0600'</span>
  owner <span style="color:#4070a0">'root'</span>
<span style="color:#007020;font-weight:700">end</span>

service <span style="color:#4070a0">'nginx'</span> <span style="color:#007020;font-weight:700">do</span>
  subscribes <span style="color:#517918">:reload</span>, <span style="color:#4070a0">'file[/etc/nginx/ssl/example.crt]'</span>, <span style="color:#517918">:immediately</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p>In this case the <code>subscribes</code> property reloads the <code>nginx</code> service whenever its certificate file, located under <code>/etc/nginx/ssl/example.crt</code>, is updated. <code>subscribes</code> does not make any changes to the certificate file itself, it merely listens for a change to the file, and executes the <code>:reload</code> action for its resource (in this example <code>nginx</code>) when a change is detected.</p> <p>If the other resource does not exist, the subscription will not raise an error. Contrast this with the stricter semantics of <code>notifies</code>, which will raise an error if the other resource does not exist.</p> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>subscribes</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">subscribes <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <h4 id="guards-macos-admin-control">Guards</h4> <p>A guard property can be used to evaluate the state of a node during the execution phase of a Chef Infra Client run. Based on the results of this evaluation, a guard property is then used to tell Chef Infra Client if it should continue executing a resource. A guard property accepts either a string value or a Ruby block value:</p> <ul> <li>A string is executed as a shell command. If the command returns <code>0</code>, the guard is applied. If the command returns any other value, then the guard property is not applied. String guards in a <strong>powershell_script</strong> run Windows PowerShell commands and may return <code>true</code> in addition to <code>0</code>.</li> <li>A block is executed as Ruby code that must return either <code>true</code> or <code>false</code>. If the block returns <code>true</code>, the guard property is applied. If the block returns <code>false</code>, the guard property is not applied.</li> </ul> <p>A guard property is useful for ensuring that a resource is idempotent by allowing that resource to test for the desired state as it is being executed, and then if the desired state is present, for Chef Infra Client to do nothing.</p> <strong>Properties</strong> <p>The following properties can be used to define a guard that is evaluated during the execution phase of a Chef Infra Client run:</p> <dl> <dt><code>not_if</code></dt> <dd> <p>Prevent a resource from executing when the condition returns <code>true</code>.</p> </dd> <dt><code>only_if</code></dt> <dd> <p>Allow a resource to execute only if the condition returns <code>true</code>.</p> </dd> </dl> <h3 id="examples-macos-admin-control">Examples</h3> <hr> <p>The following examples demonstrate various approaches for using the <strong>macos_admin_control</strong> resource in recipes:</p> <p><strong>Set Admin control to require Admin access</strong>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">admin_control <span style="color:#4070a0">'Require Admin rights to perform system-wide changes'</span> <span style="color:#007020;font-weight:700">do</span>
  action <span style="color:#517918">:enable</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p><strong>Do not require Admin access for System-Wide changes</strong>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">admin_control <span style="color:#4070a0">'Require Admin rights to perform system-wide changes'</span> <span style="color:#007020;font-weight:700">do</span>
  action <span style="color:#517918">:disable</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div> <h2 id="macos-app-management-resource">macos_app_management resource</h2> <a href="macos_app_management/index.html">macos_app_management resource page</a> <hr> <p>Use the <strong>macos_app_management</strong> resource to configure nodes to use Munki to manage apps</p> <p><strong>New in Chef Infra Client 1.0.</strong></p> <h3 id="syntax-macos-app-management">Syntax</h3> <hr>  <p>The full syntax for all of the properties that are available to the <strong>macos_app_management</strong> resource is:</p> 
<div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">macos_app_management <span style="color:#4070a0">'name'</span> <span style="color:#007020;font-weight:700">do</span>
  munki_client_download_url      <span style="color:#007020">String</span>
  munki_password                 <span style="color:#007020">String</span>
  munki_repo_url                 <span style="color:#007020">String</span>
  munki_user                     <span style="color:#007020">String</span>
  action                         <span style="color:#60add5">Symbol</span> <span style="color:#60a0b0;font-style:italic"># defaults to :install if not specified</span>
<span style="color:#007020;font-weight:700">end</span></code></pre></div> <p>where:</p> <ul> <li>
<code>macos_app_management</code> is the resource.</li> <li>
<code>name</code> is the name given to the resource block.</li> <li>
<code>action</code> identifies which steps Chef Infra Client will take to bring the node into the desired state.</li> <li>
<code>munki_client_download_url</code>, <code>munki_password</code>, <code>munki_repo_url</code>, and <code>munki_user</code> are the properties available to this resource.</li> </ul> <h3 id="actions-macos-app-management">Actions</h3> <hr> <p>The <strong>macos_app_management</strong> resource has the following actions:</p> <dl> <dt><code>:install</code></dt> <dd>Installs the client on the macOS node.</dd> <dt><code>:nothing</code></dt> <dd>This resource block does not act unless notified by another resource to take action. Once notified, this resource block either runs immediately or is queued up to run at the end of a Chef Infra Client run.</dd> </dl> <h3 id="properties-macos-app-management">Properties</h3> <hr> <p>The <strong>macos_app_management</strong> resource has the following properties:</p> <dl> <dt> <code>munki_client_download_url</code> </dt> <dd> <strong>Ruby Type:</strong> String <p>The URL where nodes will download the Munki client from</p> </dd> </dl> <dl> <dt> <code>munki_password</code> </dt> <dd> <strong>Ruby Type:</strong> String <p>The password associated with the munki_user account</p> </dd> </dl> <dl> <dt> <code>munki_repo_url</code> </dt> <dd> <strong>Ruby Type:</strong> String <p>The URL of the repository nodes will use to download apps, settings, etc</p> </dd> </dl> <dl> <dt> <code>munki_user</code> </dt> <dd> <strong>Ruby Type:</strong> String <p>A username used to connect to the munki_repo_url with</p> </dd> </dl> <br> <h3 id="functionality-macos-app-management">Common Resource Functionality</h3> <hr> <p>Chef resources include common properties, notifications, and resource guards.</p> <h4 id="common-properties-macos-app-management">Common Properties</h4> <p>The following properties are common to every resource:</p> <dl> <dt><code>compile_time</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Control the phase during which the resource is run on the node. Set to true to run while the resource collection is being built (the <code>compile phase</code>). Set to false to run while Chef Infra Client is configuring the node (the <code>converge phase</code>).</p> </dd> <dt><code>ignore_failure</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false, :quiet | <strong>Default Value:</strong> <code>false</code></p> <p>Continue running a recipe if a resource fails for any reason. <code>:quiet</code> will not display the full stack trace and the recipe will continue to run if a resource fails.</p> </dd> <dt><code>retries</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>0</code></p> <p>The number of attempts to catch exceptions and retry the resource.</p> </dd> <dt><code>retry_delay</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>2</code></p> <p>The delay in seconds between retry attempts.</p> </dd> <dt><code>sensitive</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Ensure that sensitive resource data is not logged by Chef Infra Client.</p> </dd> </dl> <h4 id="common-notifications-macos-app-management">Notifications</h4> <dl> <dt> <code>notifies</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> <p>A resource may notify another resource to take action when its state changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> that resource should take, and then the <code>:timer</code> for that action. A resource may notify more than one resource; use a <code>notifies</code> statement for each resource to be notified.</p> <p>If the referenced resource does not exist, an error is raised. In contrast, <code>subscribes</code> will not fail if the source resource is not found.</p> </dd> </dl> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>notifies</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">notifies <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <dl> <dt> <code>subscribes</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> </dd> </dl> <p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> to be taken, and then the <code>:timer</code> for that action.</p> <p>Note that <code>subscribes</code> does not apply the specified action to the resource that it listens to - for example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">file <span style="color:#4070a0">'/etc/nginx/ssl/example.crt'</span> <span style="color:#007020;font-weight:700">do</span>
  mode <span style="color:#4070a0">'0600'</span>
  owner <span style="color:#4070a0">'root'</span>
<span style="color:#007020;font-weight:700">end</span>

service <span style="color:#4070a0">'nginx'</span> <span style="color:#007020;font-weight:700">do</span>
  subscribes <span style="color:#517918">:reload</span>, <span style="color:#4070a0">'file[/etc/nginx/ssl/example.crt]'</span>, <span style="color:#517918">:immediately</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p>In this case the <code>subscribes</code> property reloads the <code>nginx</code> service whenever its certificate file, located under <code>/etc/nginx/ssl/example.crt</code>, is updated. <code>subscribes</code> does not make any changes to the certificate file itself, it merely listens for a change to the file, and executes the <code>:reload</code> action for its resource (in this example <code>nginx</code>) when a change is detected.</p> <p>If the other resource does not exist, the subscription will not raise an error. Contrast this with the stricter semantics of <code>notifies</code>, which will raise an error if the other resource does not exist.</p> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>subscribes</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">subscribes <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <h4 id="guards-macos-app-management">Guards</h4> <p>A guard property can be used to evaluate the state of a node during the execution phase of a Chef Infra Client run. Based on the results of this evaluation, a guard property is then used to tell Chef Infra Client if it should continue executing a resource. A guard property accepts either a string value or a Ruby block value:</p> <ul> <li>A string is executed as a shell command. If the command returns <code>0</code>, the guard is applied. If the command returns any other value, then the guard property is not applied. String guards in a <strong>powershell_script</strong> run Windows PowerShell commands and may return <code>true</code> in addition to <code>0</code>.</li> <li>A block is executed as Ruby code that must return either <code>true</code> or <code>false</code>. If the block returns <code>true</code>, the guard property is applied. If the block returns <code>false</code>, the guard property is not applied.</li> </ul> <p>A guard property is useful for ensuring that a resource is idempotent by allowing that resource to test for the desired state as it is being executed, and then if the desired state is present, for Chef Infra Client to do nothing.</p> <strong>Properties</strong> <p>The following properties can be used to define a guard that is evaluated during the execution phase of a Chef Infra Client run:</p> <dl> <dt><code>not_if</code></dt> <dd> <p>Prevent a resource from executing when the condition returns <code>true</code>.</p> </dd> <dt><code>only_if</code></dt> <dd> <p>Allow a resource to execute only if the condition returns <code>true</code>.</p> </dd> </dl> <h3 id="examples-macos-app-management">Examples</h3> <hr> <p>The following examples demonstrate various approaches for using the <strong>macos_app_management</strong> resource in recipes:</p> <p><strong>Set up managed app management for clients</strong>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">macos_app_management <span style="color:#4070a0">'Configure Munki on the node'</span> <span style="color:#007020;font-weight:700">do</span>
  munki_client_download_url <span style="color:#4070a0">'https://github.com/munki/munki/releases/download/v5.0.0/munkitools-5.0.0.4034.pkg'</span>
  munki_repo_url <span style="color:#4070a0">'https://something.something.tld'</span>
  munki_user <span style="color:#4070a0">'munki'</span>
  munki_password <span style="color:#4070a0">'ILoveMunki'</span>
  action <span style="color:#517918">:install</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div> <h2 id="macos-automatic-logout-resource">macos_automatic_logout resource</h2> <a href="macos_automatic_logout/index.html">macos_automatic_logout resource page</a> <hr> <p>Use the <strong>macos_automatic_logout</strong> resource to set the system to automatically logout after a set time.</p> <p><strong>New in Chef Infra Client 1.0.</strong></p> <h3 id="syntax-macos-automatic-logout">Syntax</h3> <hr>  <p>The full syntax for all of the properties that are available to the <strong>macos_automatic_logout</strong> resource is:</p> 
<div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">macos_automatic_logout <span style="color:#4070a0">'name'</span> <span style="color:#007020;font-weight:700">do</span>
  autologout_time      <span style="color:#007020">Integer</span> <span style="color:#60a0b0;font-style:italic"># default value: 3600</span>
  action               <span style="color:#60add5">Symbol</span> <span style="color:#60a0b0;font-style:italic"># defaults to :enable if not specified</span>
<span style="color:#007020;font-weight:700">end</span></code></pre></div> <p>where:</p> <ul> <li>
<code>macos_automatic_logout</code> is the resource.</li> <li>
<code>name</code> is the name given to the resource block.</li> <li>
<code>action</code> identifies which steps Chef Infra Client will take to bring the node into the desired state.</li> <li>
<code>autologout_time</code> is the property available to this resource.</li> </ul> <h3 id="actions-macos-automatic-logout">Actions</h3> <hr> <p>The <strong>macos_automatic_logout</strong> resource has the following actions:</p> <dl> <dt><code>:disable</code></dt>  <dt><code>:enable</code></dt>  <dt><code>:nothing</code></dt> <dd>This resource block does not act unless notified by another resource to take action. Once notified, this resource block either runs immediately or is queued up to run at the end of a Chef Infra Client run.</dd> </dl> <h3 id="properties-macos-automatic-logout">Properties</h3> <hr> <p>The <strong>macos_automatic_logout</strong> resource has the following properties:</p> <dl> <dt> <code>autologout_time</code> </dt> <dd> <strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>3600</code> <p>The amount of time in seconds to elapse before logging the system out. Defaults to 1 hour</p> </dd> </dl> <br> <h3 id="functionality-macos-automatic-logout">Common Resource Functionality</h3> <hr> <p>Chef resources include common properties, notifications, and resource guards.</p> <h4 id="common-properties-macos-automatic-logout">Common Properties</h4> <p>The following properties are common to every resource:</p> <dl> <dt><code>compile_time</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Control the phase during which the resource is run on the node. Set to true to run while the resource collection is being built (the <code>compile phase</code>). Set to false to run while Chef Infra Client is configuring the node (the <code>converge phase</code>).</p> </dd> <dt><code>ignore_failure</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false, :quiet | <strong>Default Value:</strong> <code>false</code></p> <p>Continue running a recipe if a resource fails for any reason. <code>:quiet</code> will not display the full stack trace and the recipe will continue to run if a resource fails.</p> </dd> <dt><code>retries</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>0</code></p> <p>The number of attempts to catch exceptions and retry the resource.</p> </dd> <dt><code>retry_delay</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>2</code></p> <p>The delay in seconds between retry attempts.</p> </dd> <dt><code>sensitive</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Ensure that sensitive resource data is not logged by Chef Infra Client.</p> </dd> </dl> <h4 id="common-notifications-macos-automatic-logout">Notifications</h4> <dl> <dt> <code>notifies</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> <p>A resource may notify another resource to take action when its state changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> that resource should take, and then the <code>:timer</code> for that action. A resource may notify more than one resource; use a <code>notifies</code> statement for each resource to be notified.</p> <p>If the referenced resource does not exist, an error is raised. In contrast, <code>subscribes</code> will not fail if the source resource is not found.</p> </dd> </dl> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>notifies</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">notifies <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <dl> <dt> <code>subscribes</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> </dd> </dl> <p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> to be taken, and then the <code>:timer</code> for that action.</p> <p>Note that <code>subscribes</code> does not apply the specified action to the resource that it listens to - for example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">file <span style="color:#4070a0">'/etc/nginx/ssl/example.crt'</span> <span style="color:#007020;font-weight:700">do</span>
  mode <span style="color:#4070a0">'0600'</span>
  owner <span style="color:#4070a0">'root'</span>
<span style="color:#007020;font-weight:700">end</span>

service <span style="color:#4070a0">'nginx'</span> <span style="color:#007020;font-weight:700">do</span>
  subscribes <span style="color:#517918">:reload</span>, <span style="color:#4070a0">'file[/etc/nginx/ssl/example.crt]'</span>, <span style="color:#517918">:immediately</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p>In this case the <code>subscribes</code> property reloads the <code>nginx</code> service whenever its certificate file, located under <code>/etc/nginx/ssl/example.crt</code>, is updated. <code>subscribes</code> does not make any changes to the certificate file itself, it merely listens for a change to the file, and executes the <code>:reload</code> action for its resource (in this example <code>nginx</code>) when a change is detected.</p> <p>If the other resource does not exist, the subscription will not raise an error. Contrast this with the stricter semantics of <code>notifies</code>, which will raise an error if the other resource does not exist.</p> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>subscribes</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">subscribes <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <h4 id="guards-macos-automatic-logout">Guards</h4> <p>A guard property can be used to evaluate the state of a node during the execution phase of a Chef Infra Client run. Based on the results of this evaluation, a guard property is then used to tell Chef Infra Client if it should continue executing a resource. A guard property accepts either a string value or a Ruby block value:</p> <ul> <li>A string is executed as a shell command. If the command returns <code>0</code>, the guard is applied. If the command returns any other value, then the guard property is not applied. String guards in a <strong>powershell_script</strong> run Windows PowerShell commands and may return <code>true</code> in addition to <code>0</code>.</li> <li>A block is executed as Ruby code that must return either <code>true</code> or <code>false</code>. If the block returns <code>true</code>, the guard property is applied. If the block returns <code>false</code>, the guard property is not applied.</li> </ul> <p>A guard property is useful for ensuring that a resource is idempotent by allowing that resource to test for the desired state as it is being executed, and then if the desired state is present, for Chef Infra Client to do nothing.</p> <strong>Properties</strong> <p>The following properties can be used to define a guard that is evaluated during the execution phase of a Chef Infra Client run:</p> <dl> <dt><code>not_if</code></dt> <dd> <p>Prevent a resource from executing when the condition returns <code>true</code>.</p> </dd> <dt><code>only_if</code></dt> <dd> <p>Allow a resource to execute only if the condition returns <code>true</code>.</p> </dd> </dl> <h3 id="examples-macos-automatic-logout">Examples</h3> <hr> <p>The following examples demonstrate various approaches for using the <strong>macos_automatic_logout</strong> resource in recipes:</p> <p><strong>Setup Automatic Logouts</strong>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">automatic_logout <span style="color:#4070a0">'Automatically logout for inactivity'</span> <span style="color:#007020;font-weight:700">do</span>
  autologout_time <span style="color:#40a070">900</span>
  action <span style="color:#517918">:enable</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p><strong>Disable Automatic Logouts</strong>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">automatic_logout <span style="color:#4070a0">'Automatically logout for inactivity'</span> <span style="color:#007020;font-weight:700">do</span>
  action <span style="color:#517918">:disable</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div> <h2 id="macos-automatic-software-updates-resource">macos_automatic_software_updates resource</h2> <a href="macos_automatic_software_updates/index.html">macos_automatic_software_updates resource page</a> <hr> <p>Use the <strong>macos_automatic_software_updates</strong> resource to configure system and application updates on macOS systems.</p> <p><strong>New in Chef Infra Client 1.0.</strong></p> <h3 id="syntax-macos-automatic-software-updates">Syntax</h3> <hr>  <p>The full syntax for all of the properties that are available to the <strong>macos_automatic_software_updates</strong> resource is:</p> 
<div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">macos_automatic_software_updates <span style="color:#4070a0">'name'</span> <span style="color:#007020;font-weight:700">do</span>
  check                  <span style="color:#007020">true</span>, <span style="color:#007020">false</span>
  download               <span style="color:#007020">true</span>, <span style="color:#007020">false</span>
  install_app_store      <span style="color:#007020">true</span>, <span style="color:#007020">false</span>
  install_critical       <span style="color:#007020">true</span>, <span style="color:#007020">false</span>
  install_os             <span style="color:#007020">true</span>, <span style="color:#007020">false</span>
  action                 <span style="color:#60add5">Symbol</span> <span style="color:#60a0b0;font-style:italic"># defaults to :set if not specified</span>
<span style="color:#007020;font-weight:700">end</span></code></pre></div> <p>where:</p> <ul> <li>
<code>macos_automatic_software_updates</code> is the resource.</li> <li>
<code>name</code> is the name given to the resource block.</li> <li>
<code>action</code> identifies which steps Chef Infra Client will take to bring the node into the desired state.</li> <li>
<code>check</code>, <code>download</code>, <code>install_app_store</code>, <code>install_critical</code>, and <code>install_os</code> are the properties available to this resource.</li> </ul> <h3 id="actions-macos-automatic-software-updates">Actions</h3> <hr> <p>The <strong>macos_automatic_software_updates</strong> resource has the following actions:</p> <dl> <dt><code>:nothing</code></dt> <dd>This resource block does not act unless notified by another resource to take action. Once notified, this resource block either runs immediately or is queued up to run at the end of a Chef Infra Client run.</dd> <dt><code>:set</code></dt>  </dl> <h3 id="properties-macos-automatic-software-updates">Properties</h3> <hr> <p>The <strong>macos_automatic_software_updates</strong> resource has the following properties:</p> <dl> <dt> <code>check</code> </dt> <dd> <strong>Ruby Type:</strong> true, false <p>Tell the OS to check for updates</p> </dd> </dl> <dl> <dt> <code>download</code> </dt> <dd> <strong>Ruby Type:</strong> true, false <p>Tell the OS to download updates</p> </dd> </dl> <dl> <dt> <code>install_app_store</code> </dt> <dd> <strong>Ruby Type:</strong> true, false <p>Set this to add app updates</p> </dd> </dl> <dl> <dt> <code>install_critical</code> </dt> <dd> <strong>Ruby Type:</strong> true, false <p>Set this to install critical updates</p> </dd> </dl> <dl> <dt> <code>install_os</code> </dt> <dd> <strong>Ruby Type:</strong> true, false <p>Set to update the OS</p> </dd> </dl> <br> <h3 id="functionality-macos-automatic-software-updates">Common Resource Functionality</h3> <hr> <p>Chef resources include common properties, notifications, and resource guards.</p> <h4 id="common-properties-macos-automatic-software-updates">Common Properties</h4> <p>The following properties are common to every resource:</p> <dl> <dt><code>compile_time</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Control the phase during which the resource is run on the node. Set to true to run while the resource collection is being built (the <code>compile phase</code>). Set to false to run while Chef Infra Client is configuring the node (the <code>converge phase</code>).</p> </dd> <dt><code>ignore_failure</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false, :quiet | <strong>Default Value:</strong> <code>false</code></p> <p>Continue running a recipe if a resource fails for any reason. <code>:quiet</code> will not display the full stack trace and the recipe will continue to run if a resource fails.</p> </dd> <dt><code>retries</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>0</code></p> <p>The number of attempts to catch exceptions and retry the resource.</p> </dd> <dt><code>retry_delay</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>2</code></p> <p>The delay in seconds between retry attempts.</p> </dd> <dt><code>sensitive</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Ensure that sensitive resource data is not logged by Chef Infra Client.</p> </dd> </dl> <h4 id="common-notifications-macos-automatic-software-updates">Notifications</h4> <dl> <dt> <code>notifies</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> <p>A resource may notify another resource to take action when its state changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> that resource should take, and then the <code>:timer</code> for that action. A resource may notify more than one resource; use a <code>notifies</code> statement for each resource to be notified.</p> <p>If the referenced resource does not exist, an error is raised. In contrast, <code>subscribes</code> will not fail if the source resource is not found.</p> </dd> </dl> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>notifies</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">notifies <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <dl> <dt> <code>subscribes</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> </dd> </dl> <p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> to be taken, and then the <code>:timer</code> for that action.</p> <p>Note that <code>subscribes</code> does not apply the specified action to the resource that it listens to - for example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">file <span style="color:#4070a0">'/etc/nginx/ssl/example.crt'</span> <span style="color:#007020;font-weight:700">do</span>
  mode <span style="color:#4070a0">'0600'</span>
  owner <span style="color:#4070a0">'root'</span>
<span style="color:#007020;font-weight:700">end</span>

service <span style="color:#4070a0">'nginx'</span> <span style="color:#007020;font-weight:700">do</span>
  subscribes <span style="color:#517918">:reload</span>, <span style="color:#4070a0">'file[/etc/nginx/ssl/example.crt]'</span>, <span style="color:#517918">:immediately</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p>In this case the <code>subscribes</code> property reloads the <code>nginx</code> service whenever its certificate file, located under <code>/etc/nginx/ssl/example.crt</code>, is updated. <code>subscribes</code> does not make any changes to the certificate file itself, it merely listens for a change to the file, and executes the <code>:reload</code> action for its resource (in this example <code>nginx</code>) when a change is detected.</p> <p>If the other resource does not exist, the subscription will not raise an error. Contrast this with the stricter semantics of <code>notifies</code>, which will raise an error if the other resource does not exist.</p> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>subscribes</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">subscribes <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <h4 id="guards-macos-automatic-software-updates">Guards</h4> <p>A guard property can be used to evaluate the state of a node during the execution phase of a Chef Infra Client run. Based on the results of this evaluation, a guard property is then used to tell Chef Infra Client if it should continue executing a resource. A guard property accepts either a string value or a Ruby block value:</p> <ul> <li>A string is executed as a shell command. If the command returns <code>0</code>, the guard is applied. If the command returns any other value, then the guard property is not applied. String guards in a <strong>powershell_script</strong> run Windows PowerShell commands and may return <code>true</code> in addition to <code>0</code>.</li> <li>A block is executed as Ruby code that must return either <code>true</code> or <code>false</code>. If the block returns <code>true</code>, the guard property is applied. If the block returns <code>false</code>, the guard property is not applied.</li> </ul> <p>A guard property is useful for ensuring that a resource is idempotent by allowing that resource to test for the desired state as it is being executed, and then if the desired state is present, for Chef Infra Client to do nothing.</p> <strong>Properties</strong> <p>The following properties can be used to define a guard that is evaluated during the execution phase of a Chef Infra Client run:</p> <dl> <dt><code>not_if</code></dt> <dd> <p>Prevent a resource from executing when the condition returns <code>true</code>.</p> </dd> <dt><code>only_if</code></dt> <dd> <p>Allow a resource to execute only if the condition returns <code>true</code>.</p> </dd> </dl> <h3 id="examples-macos-automatic-software-updates">Examples</h3> <hr> <p>The following examples demonstrate various approaches for using the <strong>macos_automatic_software_updates</strong> resource in recipes:</p> <p><strong>Setup automatic patch management</strong>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">macos_automatic_software_updates <span style="color:#4070a0">'Settings for OS and Patch updates'</span> <span style="color:#007020;font-weight:700">do</span>
  check <span style="color:#007020">true</span>
  download <span style="color:#007020">true</span>
  install_os <span style="color:#007020">true</span>
  install_app_store <span style="color:#007020">true</span>
  install_critical <span style="color:#007020">true</span>
  action <span style="color:#517918">:set</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div> <h2 id="macos-desktop-screensaver-resource">macos_desktop_screensaver resource</h2> <a href="macos_desktop_screensaver/index.html">macos_desktop_screensaver resource page</a> <hr> <p>Use the <strong>macos_desktop_screensaver</strong> resource to configure secure screensaver settings on macOS systems.</p> <p><strong>New in Chef Infra Client 1.0.</strong></p> <h3 id="syntax-macos-desktop-screensaver">Syntax</h3> <hr>  <p>The full syntax for all of the properties that are available to the <strong>macos_desktop_screensaver</strong> resource is:</p> 
<div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">macos_desktop_screensaver <span style="color:#4070a0">'name'</span> <span style="color:#007020;font-weight:700">do</span>
  delay_before_password_prompt      <span style="color:#007020">Integer</span>
  idle_time                         <span style="color:#007020">Integer</span> <span style="color:#60a0b0;font-style:italic"># default value: 20</span>
  require_password                  <span style="color:#007020">true</span>, <span style="color:#007020">false</span>
  action                            <span style="color:#60add5">Symbol</span> <span style="color:#60a0b0;font-style:italic"># defaults to :set if not specified</span>
<span style="color:#007020;font-weight:700">end</span></code></pre></div> <p>where:</p> <ul> <li>
<code>macos_desktop_screensaver</code> is the resource.</li> <li>
<code>name</code> is the name given to the resource block.</li> <li>
<code>action</code> identifies which steps Chef Infra Client will take to bring the node into the desired state.</li> <li>
<code>delay_before_password_prompt</code>, <code>idle_time</code>, and <code>require_password</code> are the properties available to this resource.</li> </ul> <h3 id="actions-macos-desktop-screensaver">Actions</h3> <hr> <p>The <strong>macos_desktop_screensaver</strong> resource has the following actions:</p> <dl> <dt><code>:disable</code></dt> <dd>Turns off the screensaver.</dd> <dt><code>:nothing</code></dt> <dd>This resource block does not act unless notified by another resource to take action. Once notified, this resource block either runs immediately or is queued up to run at the end of a Chef Infra Client run.</dd> <dt><code>:set</code></dt> <dd>Sets the properties and enables the screen saver.</dd> </dl> <h3 id="properties-macos-desktop-screensaver">Properties</h3> <hr> <p>The <strong>macos_desktop_screensaver</strong> resource has the following properties:</p> <dl> <dt> <code>delay_before_password_prompt</code> </dt> <dd> <strong>Ruby Type:</strong> Integer <p>Time in seconds for screensaver to be active before the system will prompt for password input</p> <p> New in Chef Client 2.0 </p> </dd> </dl> <dl> <dt> <code>idle_time</code> </dt> <dd> <strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>20</code> <strong>Allowed Values:</strong> <code>0, 1, 2, 5, 10, 20, 30, 60</code> <p>Time in minutes before the the Screensaver comes on. Must be one of these values: 1, 2, 5, 10, 20, 30, 60</p> </dd> </dl> <dl> <dt> <code>require_password</code> </dt> <dd> <strong>Ruby Type:</strong> true, false <p>Require a password when waking from the screensaver.</p> </dd> </dl> <br> <h3 id="functionality-macos-desktop-screensaver">Common Resource Functionality</h3> <hr> <p>Chef resources include common properties, notifications, and resource guards.</p> <h4 id="common-properties-macos-desktop-screensaver">Common Properties</h4> <p>The following properties are common to every resource:</p> <dl> <dt><code>compile_time</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Control the phase during which the resource is run on the node. Set to true to run while the resource collection is being built (the <code>compile phase</code>). Set to false to run while Chef Infra Client is configuring the node (the <code>converge phase</code>).</p> </dd> <dt><code>ignore_failure</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false, :quiet | <strong>Default Value:</strong> <code>false</code></p> <p>Continue running a recipe if a resource fails for any reason. <code>:quiet</code> will not display the full stack trace and the recipe will continue to run if a resource fails.</p> </dd> <dt><code>retries</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>0</code></p> <p>The number of attempts to catch exceptions and retry the resource.</p> </dd> <dt><code>retry_delay</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>2</code></p> <p>The delay in seconds between retry attempts.</p> </dd> <dt><code>sensitive</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Ensure that sensitive resource data is not logged by Chef Infra Client.</p> </dd> </dl> <h4 id="common-notifications-macos-desktop-screensaver">Notifications</h4> <dl> <dt> <code>notifies</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> <p>A resource may notify another resource to take action when its state changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> that resource should take, and then the <code>:timer</code> for that action. A resource may notify more than one resource; use a <code>notifies</code> statement for each resource to be notified.</p> <p>If the referenced resource does not exist, an error is raised. In contrast, <code>subscribes</code> will not fail if the source resource is not found.</p> </dd> </dl> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>notifies</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">notifies <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <dl> <dt> <code>subscribes</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> </dd> </dl> <p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> to be taken, and then the <code>:timer</code> for that action.</p> <p>Note that <code>subscribes</code> does not apply the specified action to the resource that it listens to - for example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">file <span style="color:#4070a0">'/etc/nginx/ssl/example.crt'</span> <span style="color:#007020;font-weight:700">do</span>
  mode <span style="color:#4070a0">'0600'</span>
  owner <span style="color:#4070a0">'root'</span>
<span style="color:#007020;font-weight:700">end</span>

service <span style="color:#4070a0">'nginx'</span> <span style="color:#007020;font-weight:700">do</span>
  subscribes <span style="color:#517918">:reload</span>, <span style="color:#4070a0">'file[/etc/nginx/ssl/example.crt]'</span>, <span style="color:#517918">:immediately</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p>In this case the <code>subscribes</code> property reloads the <code>nginx</code> service whenever its certificate file, located under <code>/etc/nginx/ssl/example.crt</code>, is updated. <code>subscribes</code> does not make any changes to the certificate file itself, it merely listens for a change to the file, and executes the <code>:reload</code> action for its resource (in this example <code>nginx</code>) when a change is detected.</p> <p>If the other resource does not exist, the subscription will not raise an error. Contrast this with the stricter semantics of <code>notifies</code>, which will raise an error if the other resource does not exist.</p> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>subscribes</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">subscribes <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <h4 id="guards-macos-desktop-screensaver">Guards</h4> <p>A guard property can be used to evaluate the state of a node during the execution phase of a Chef Infra Client run. Based on the results of this evaluation, a guard property is then used to tell Chef Infra Client if it should continue executing a resource. A guard property accepts either a string value or a Ruby block value:</p> <ul> <li>A string is executed as a shell command. If the command returns <code>0</code>, the guard is applied. If the command returns any other value, then the guard property is not applied. String guards in a <strong>powershell_script</strong> run Windows PowerShell commands and may return <code>true</code> in addition to <code>0</code>.</li> <li>A block is executed as Ruby code that must return either <code>true</code> or <code>false</code>. If the block returns <code>true</code>, the guard property is applied. If the block returns <code>false</code>, the guard property is not applied.</li> </ul> <p>A guard property is useful for ensuring that a resource is idempotent by allowing that resource to test for the desired state as it is being executed, and then if the desired state is present, for Chef Infra Client to do nothing.</p> <strong>Properties</strong> <p>The following properties can be used to define a guard that is evaluated during the execution phase of a Chef Infra Client run:</p> <dl> <dt><code>not_if</code></dt> <dd> <p>Prevent a resource from executing when the condition returns <code>true</code>.</p> </dd> <dt><code>only_if</code></dt> <dd> <p>Allow a resource to execute only if the condition returns <code>true</code>.</p> </dd> </dl> <h3 id="examples-macos-desktop-screensaver">Examples</h3> <hr> <p>The following examples demonstrate various approaches for using the <strong>macos_desktop_screensaver</strong> resource in recipes:</p> <p><strong>Turn on the Screensaver</strong>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">desktop_screensaver <span style="color:#4070a0">'Sets up the screensaver to come on after 30 minutes of idle time and require a password'</span> <span style="color:#007020;font-weight:700">do</span>
  idle_time <span style="color:#40a070">30</span>
  require_password <span style="color:#007020">true</span>
  delay_before_password_prompt <span style="color:#40a070">5</span>
  action <span style="color:#517918">:set</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div> <h2 id="macos-disk-encryption-resource">macos_disk_encryption resource</h2> <a href="macos_disk_encryption/index.html">macos_disk_encryption resource page</a> <hr> <p>Use the <strong>macos_disk_encryption</strong> resource to enforce FileVault encryption on macOS systems.</p> <p><strong>New in Chef Infra Client 1.0.</strong></p> <h3 id="syntax-macos-disk-encryption">Syntax</h3> <hr>  <p>The full syntax for all of the properties that are available to the <strong>macos_disk_encryption</strong> resource is:</p> 
<div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">macos_disk_encryption <span style="color:#4070a0">'name'</span> <span style="color:#007020;font-weight:700">do</span>
  action      <span style="color:#60add5">Symbol</span> <span style="color:#60a0b0;font-style:italic"># defaults to :enable if not specified</span>
<span style="color:#007020;font-weight:700">end</span></code></pre></div> <p>where:</p> <ul> <li>
<code>macos_disk_encryption</code> is the resource.</li> <li>
<code>name</code> is the name given to the resource block.</li> <li>
<code>action</code> identifies which steps Chef Infra Client will take to bring the node into the desired state.</li> </ul> <h3 id="actions-macos-disk-encryption">Actions</h3> <hr> <p>The <strong>macos_disk_encryption</strong> resource has the following actions:</p> <dl> <dt><code>:enable</code></dt> <dd>Turns on FileVault.</dd> <dt><code>:nothing</code></dt> <dd>This resource block does not act unless notified by another resource to take action. Once notified, this resource block either runs immediately or is queued up to run at the end of a Chef Infra Client run.</dd> </dl> <h3 id="properties-macos-disk-encryption">Properties</h3> <hr> <p>This resource does not have any properties.</p> <br> <h3 id="functionality-macos-disk-encryption">Common Resource Functionality</h3> <hr> <p>Chef resources include common properties, notifications, and resource guards.</p> <h4 id="common-properties-macos-disk-encryption">Common Properties</h4> <p>The following properties are common to every resource:</p> <dl> <dt><code>compile_time</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Control the phase during which the resource is run on the node. Set to true to run while the resource collection is being built (the <code>compile phase</code>). Set to false to run while Chef Infra Client is configuring the node (the <code>converge phase</code>).</p> </dd> <dt><code>ignore_failure</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false, :quiet | <strong>Default Value:</strong> <code>false</code></p> <p>Continue running a recipe if a resource fails for any reason. <code>:quiet</code> will not display the full stack trace and the recipe will continue to run if a resource fails.</p> </dd> <dt><code>retries</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>0</code></p> <p>The number of attempts to catch exceptions and retry the resource.</p> </dd> <dt><code>retry_delay</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>2</code></p> <p>The delay in seconds between retry attempts.</p> </dd> <dt><code>sensitive</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Ensure that sensitive resource data is not logged by Chef Infra Client.</p> </dd> </dl> <h4 id="common-notifications-macos-disk-encryption">Notifications</h4> <dl> <dt> <code>notifies</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> <p>A resource may notify another resource to take action when its state changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> that resource should take, and then the <code>:timer</code> for that action. A resource may notify more than one resource; use a <code>notifies</code> statement for each resource to be notified.</p> <p>If the referenced resource does not exist, an error is raised. In contrast, <code>subscribes</code> will not fail if the source resource is not found.</p> </dd> </dl> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>notifies</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">notifies <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <dl> <dt> <code>subscribes</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> </dd> </dl> <p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> to be taken, and then the <code>:timer</code> for that action.</p> <p>Note that <code>subscribes</code> does not apply the specified action to the resource that it listens to - for example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">file <span style="color:#4070a0">'/etc/nginx/ssl/example.crt'</span> <span style="color:#007020;font-weight:700">do</span>
  mode <span style="color:#4070a0">'0600'</span>
  owner <span style="color:#4070a0">'root'</span>
<span style="color:#007020;font-weight:700">end</span>

service <span style="color:#4070a0">'nginx'</span> <span style="color:#007020;font-weight:700">do</span>
  subscribes <span style="color:#517918">:reload</span>, <span style="color:#4070a0">'file[/etc/nginx/ssl/example.crt]'</span>, <span style="color:#517918">:immediately</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p>In this case the <code>subscribes</code> property reloads the <code>nginx</code> service whenever its certificate file, located under <code>/etc/nginx/ssl/example.crt</code>, is updated. <code>subscribes</code> does not make any changes to the certificate file itself, it merely listens for a change to the file, and executes the <code>:reload</code> action for its resource (in this example <code>nginx</code>) when a change is detected.</p> <p>If the other resource does not exist, the subscription will not raise an error. Contrast this with the stricter semantics of <code>notifies</code>, which will raise an error if the other resource does not exist.</p> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>subscribes</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">subscribes <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <h4 id="guards-macos-disk-encryption">Guards</h4> <p>A guard property can be used to evaluate the state of a node during the execution phase of a Chef Infra Client run. Based on the results of this evaluation, a guard property is then used to tell Chef Infra Client if it should continue executing a resource. A guard property accepts either a string value or a Ruby block value:</p> <ul> <li>A string is executed as a shell command. If the command returns <code>0</code>, the guard is applied. If the command returns any other value, then the guard property is not applied. String guards in a <strong>powershell_script</strong> run Windows PowerShell commands and may return <code>true</code> in addition to <code>0</code>.</li> <li>A block is executed as Ruby code that must return either <code>true</code> or <code>false</code>. If the block returns <code>true</code>, the guard property is applied. If the block returns <code>false</code>, the guard property is not applied.</li> </ul> <p>A guard property is useful for ensuring that a resource is idempotent by allowing that resource to test for the desired state as it is being executed, and then if the desired state is present, for Chef Infra Client to do nothing.</p> <strong>Properties</strong> <p>The following properties can be used to define a guard that is evaluated during the execution phase of a Chef Infra Client run:</p> <dl> <dt><code>not_if</code></dt> <dd> <p>Prevent a resource from executing when the condition returns <code>true</code>.</p> </dd> <dt><code>only_if</code></dt> <dd> <p>Allow a resource to execute only if the condition returns <code>true</code>.</p> </dd> </dl> <h3 id="examples-macos-disk-encryption">Examples</h3> <hr> <p>This resource does not have any examples.</p> <h2 id="macos-firewall-resource">macos_firewall resource</h2> <a href="macos_firewall/index.html">macos_firewall resource page</a> <hr> <p>Use the <strong>macos_firewall</strong> resource to enable the firewall on macOS systems.</p> <h3 id="syntax-macos-firewall">Syntax</h3> <hr>  <p>The full syntax for all of the properties that are available to the <strong>macos_firewall</strong> resource is:</p> 
<div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">macos_firewall <span style="color:#4070a0">'name'</span> <span style="color:#007020;font-weight:700">do</span>
  action      <span style="color:#60add5">Symbol</span> <span style="color:#60a0b0;font-style:italic"># defaults to :enable if not specified</span>
<span style="color:#007020;font-weight:700">end</span></code></pre></div> <p>where:</p> <ul> <li>
<code>macos_firewall</code> is the resource.</li> <li>
<code>name</code> is the name given to the resource block.</li> <li>
<code>action</code> identifies which steps Chef Infra Client will take to bring the node into the desired state.</li> </ul> <h3 id="actions-macos-firewall">Actions</h3> <hr> <p>The <strong>macos_firewall</strong> resource has the following actions:</p> <dl> <dt><code>:disable</code></dt>  <dt><code>:enable</code></dt>  <dt><code>:nothing</code></dt> <dd>This resource block does not act unless notified by another resource to take action. Once notified, this resource block either runs immediately or is queued up to run at the end of a Chef Infra Client run.</dd> </dl> <h3 id="properties-macos-firewall">Properties</h3> <hr> <p>This resource does not have any properties.</p> <br> <h3 id="functionality-macos-firewall">Common Resource Functionality</h3> <hr> <p>Chef resources include common properties, notifications, and resource guards.</p> <h4 id="common-properties-macos-firewall">Common Properties</h4> <p>The following properties are common to every resource:</p> <dl> <dt><code>compile_time</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Control the phase during which the resource is run on the node. Set to true to run while the resource collection is being built (the <code>compile phase</code>). Set to false to run while Chef Infra Client is configuring the node (the <code>converge phase</code>).</p> </dd> <dt><code>ignore_failure</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false, :quiet | <strong>Default Value:</strong> <code>false</code></p> <p>Continue running a recipe if a resource fails for any reason. <code>:quiet</code> will not display the full stack trace and the recipe will continue to run if a resource fails.</p> </dd> <dt><code>retries</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>0</code></p> <p>The number of attempts to catch exceptions and retry the resource.</p> </dd> <dt><code>retry_delay</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>2</code></p> <p>The delay in seconds between retry attempts.</p> </dd> <dt><code>sensitive</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Ensure that sensitive resource data is not logged by Chef Infra Client.</p> </dd> </dl> <h4 id="common-notifications-macos-firewall">Notifications</h4> <dl> <dt> <code>notifies</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> <p>A resource may notify another resource to take action when its state changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> that resource should take, and then the <code>:timer</code> for that action. A resource may notify more than one resource; use a <code>notifies</code> statement for each resource to be notified.</p> <p>If the referenced resource does not exist, an error is raised. In contrast, <code>subscribes</code> will not fail if the source resource is not found.</p> </dd> </dl> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>notifies</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">notifies <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <dl> <dt> <code>subscribes</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> </dd> </dl> <p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> to be taken, and then the <code>:timer</code> for that action.</p> <p>Note that <code>subscribes</code> does not apply the specified action to the resource that it listens to - for example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">file <span style="color:#4070a0">'/etc/nginx/ssl/example.crt'</span> <span style="color:#007020;font-weight:700">do</span>
  mode <span style="color:#4070a0">'0600'</span>
  owner <span style="color:#4070a0">'root'</span>
<span style="color:#007020;font-weight:700">end</span>

service <span style="color:#4070a0">'nginx'</span> <span style="color:#007020;font-weight:700">do</span>
  subscribes <span style="color:#517918">:reload</span>, <span style="color:#4070a0">'file[/etc/nginx/ssl/example.crt]'</span>, <span style="color:#517918">:immediately</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p>In this case the <code>subscribes</code> property reloads the <code>nginx</code> service whenever its certificate file, located under <code>/etc/nginx/ssl/example.crt</code>, is updated. <code>subscribes</code> does not make any changes to the certificate file itself, it merely listens for a change to the file, and executes the <code>:reload</code> action for its resource (in this example <code>nginx</code>) when a change is detected.</p> <p>If the other resource does not exist, the subscription will not raise an error. Contrast this with the stricter semantics of <code>notifies</code>, which will raise an error if the other resource does not exist.</p> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>subscribes</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">subscribes <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <h4 id="guards-macos-firewall">Guards</h4> <p>A guard property can be used to evaluate the state of a node during the execution phase of a Chef Infra Client run. Based on the results of this evaluation, a guard property is then used to tell Chef Infra Client if it should continue executing a resource. A guard property accepts either a string value or a Ruby block value:</p> <ul> <li>A string is executed as a shell command. If the command returns <code>0</code>, the guard is applied. If the command returns any other value, then the guard property is not applied. String guards in a <strong>powershell_script</strong> run Windows PowerShell commands and may return <code>true</code> in addition to <code>0</code>.</li> <li>A block is executed as Ruby code that must return either <code>true</code> or <code>false</code>. If the block returns <code>true</code>, the guard property is applied. If the block returns <code>false</code>, the guard property is not applied.</li> </ul> <p>A guard property is useful for ensuring that a resource is idempotent by allowing that resource to test for the desired state as it is being executed, and then if the desired state is present, for Chef Infra Client to do nothing.</p> <strong>Properties</strong> <p>The following properties can be used to define a guard that is evaluated during the execution phase of a Chef Infra Client run:</p> <dl> <dt><code>not_if</code></dt> <dd> <p>Prevent a resource from executing when the condition returns <code>true</code>.</p> </dd> <dt><code>only_if</code></dt> <dd> <p>Allow a resource to execute only if the condition returns <code>true</code>.</p> </dd> </dl> <h3 id="examples-macos-firewall">Examples</h3> <hr> <p>The following examples demonstrate various approaches for using the <strong>macos_firewall</strong> resource in recipes:</p> <p><strong>Turn on the macOS Firewall</strong>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">macos_firewall <span style="color:#4070a0">'Enable Firewall Protection'</span> <span style="color:#007020;font-weight:700">do</span>
  action <span style="color:#517918">:enable</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p><strong>Turn off the macOS Firewall</strong>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">macos_firewall <span style="color:#4070a0">'Disable Firewall Protection'</span> <span style="color:#007020;font-weight:700">do</span>
  action <span style="color:#517918">:disable</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div> <h2 id="macos-password-policy-resource">macos_password_policy resource</h2> <a href="macos_password_policy/index.html">macos_password_policy resource page</a> <hr> <p>Use the <strong>macos_password_policy</strong> resource to set password complexity, password length, etc on macOS systems.</p> <p><strong>New in Chef Infra Client 1.0.</strong></p> <h3 id="syntax-macos-password-policy">Syntax</h3> <hr>  <p>The full syntax for all of the properties that are available to the <strong>macos_password_policy</strong> resource is:</p> 
<div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">macos_password_policy <span style="color:#4070a0">'name'</span> <span style="color:#007020;font-weight:700">do</span>
  exempt_user                      <span style="color:#007020">String</span>
  lockout_time                     <span style="color:#007020">Integer</span>
  max_failed_logins                <span style="color:#007020">Integer</span>
  maximum_password_age             <span style="color:#007020">Integer</span> <span style="color:#60a0b0;font-style:italic"># default value: 365</span>
  minimum_lowercase_letters        <span style="color:#007020">Integer</span> <span style="color:#60a0b0;font-style:italic"># default value: 0</span>
  minimum_numeric_characters       <span style="color:#007020">Integer</span> <span style="color:#60a0b0;font-style:italic"># default value: 0</span>
  minimum_password_length          <span style="color:#007020">Integer</span> <span style="color:#60a0b0;font-style:italic"># default value: 12</span>
  minimum_special_characters       <span style="color:#007020">Integer</span> <span style="color:#60a0b0;font-style:italic"># default value: 0</span>
  minimum_uppercase_letters        <span style="color:#007020">Integer</span> <span style="color:#60a0b0;font-style:italic"># default value: 0</span>
  remember_how_many_passwords      <span style="color:#007020">Integer</span> <span style="color:#60a0b0;font-style:italic"># default value: 3</span>
  action                           <span style="color:#60add5">Symbol</span> <span style="color:#60a0b0;font-style:italic"># defaults to :set if not specified</span>
<span style="color:#007020;font-weight:700">end</span></code></pre></div> <p>where:</p> <ul> <li>
<code>macos_password_policy</code> is the resource.</li> <li>
<code>name</code> is the name given to the resource block.</li> <li>
<code>action</code> identifies which steps Chef Infra Client will take to bring the node into the desired state.</li> <li>
<code>exempt_user</code>, <code>lockout_time</code>, <code>max_failed_logins</code>, <code>maximum_password_age</code>, <code>minimum_lowercase_letters</code>, <code>minimum_numeric_characters</code>, <code>minimum_password_length</code>, <code>minimum_special_characters</code>, <code>minimum_uppercase_letters</code>, and <code>remember_how_many_passwords</code> are the properties available to this resource.</li> </ul> <h3 id="actions-macos-password-policy">Actions</h3> <hr> <p>The <strong>macos_password_policy</strong> resource has the following actions:</p> <dl> <dt><code>:nothing</code></dt> <dd>This resource block does not act unless notified by another resource to take action. Once notified, this resource block either runs immediately or is queued up to run at the end of a Chef Infra Client run.</dd> <dt><code>:set</code></dt> <dd>This action sets the password policy as defined in its properties.</dd> </dl> <h3 id="properties-macos-password-policy">Properties</h3> <hr> <p>The <strong>macos_password_policy</strong> resource has the following properties:</p> <dl> <dt> <code>exempt_user</code> </dt> <dd> <strong>Ruby Type:</strong> String <p>A user to whom the password policy is not applied</p> </dd> </dl> <dl> <dt> <code>lockout_time</code> </dt> <dd> <strong>Ruby Type:</strong> Integer <p>The amount of time your account is locked out after you exceed max failed logins</p> </dd> </dl> <dl> <dt> <code>max_failed_logins</code> </dt> <dd> <strong>Ruby Type:</strong> Integer <p>The maximum number of failed logins before you are locked out</p> </dd> </dl> <dl> <dt> <code>maximum_password_age</code> </dt> <dd> <strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>365</code> <p>The maximum age in days for a password before it must be changed, defaults to 365</p> </dd> </dl> <dl> <dt> <code>minimum_lowercase_letters</code> </dt> <dd> <strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>0</code> <p>The minimum number of lower case letters that must be in a password</p> </dd> </dl> <dl> <dt> <code>minimum_numeric_characters</code> </dt> <dd> <strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>0</code> <p>The minimum number of numbers that must be in a password</p> </dd> </dl> <dl> <dt> <code>minimum_password_length</code> </dt> <dd> <strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>12</code> <p>The minimum length a password must be</p> </dd> </dl> <dl> <dt> <code>minimum_special_characters</code> </dt> <dd> <strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>0</code> <p>The minimum number of special characters that must be in a password. Eg. *&amp;^%</p> </dd> </dl> <dl> <dt> <code>minimum_uppercase_letters</code> </dt> <dd> <strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>0</code> <p>The minimum number of upper case letters that must be in a password</p> </dd> </dl> <dl> <dt> <code>remember_how_many_passwords</code> </dt> <dd> <strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>3</code> <p>The number of previous passwords to remember to prevent users for keeping stale passwords</p> </dd> </dl> <br> <h3 id="functionality-macos-password-policy">Common Resource Functionality</h3> <hr> <p>Chef resources include common properties, notifications, and resource guards.</p> <h4 id="common-properties-macos-password-policy">Common Properties</h4> <p>The following properties are common to every resource:</p> <dl> <dt><code>compile_time</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Control the phase during which the resource is run on the node. Set to true to run while the resource collection is being built (the <code>compile phase</code>). Set to false to run while Chef Infra Client is configuring the node (the <code>converge phase</code>).</p> </dd> <dt><code>ignore_failure</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false, :quiet | <strong>Default Value:</strong> <code>false</code></p> <p>Continue running a recipe if a resource fails for any reason. <code>:quiet</code> will not display the full stack trace and the recipe will continue to run if a resource fails.</p> </dd> <dt><code>retries</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>0</code></p> <p>The number of attempts to catch exceptions and retry the resource.</p> </dd> <dt><code>retry_delay</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>2</code></p> <p>The delay in seconds between retry attempts.</p> </dd> <dt><code>sensitive</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Ensure that sensitive resource data is not logged by Chef Infra Client.</p> </dd> </dl> <h4 id="common-notifications-macos-password-policy">Notifications</h4> <dl> <dt> <code>notifies</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> <p>A resource may notify another resource to take action when its state changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> that resource should take, and then the <code>:timer</code> for that action. A resource may notify more than one resource; use a <code>notifies</code> statement for each resource to be notified.</p> <p>If the referenced resource does not exist, an error is raised. In contrast, <code>subscribes</code> will not fail if the source resource is not found.</p> </dd> </dl> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>notifies</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">notifies <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <dl> <dt> <code>subscribes</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> </dd> </dl> <p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> to be taken, and then the <code>:timer</code> for that action.</p> <p>Note that <code>subscribes</code> does not apply the specified action to the resource that it listens to - for example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">file <span style="color:#4070a0">'/etc/nginx/ssl/example.crt'</span> <span style="color:#007020;font-weight:700">do</span>
  mode <span style="color:#4070a0">'0600'</span>
  owner <span style="color:#4070a0">'root'</span>
<span style="color:#007020;font-weight:700">end</span>

service <span style="color:#4070a0">'nginx'</span> <span style="color:#007020;font-weight:700">do</span>
  subscribes <span style="color:#517918">:reload</span>, <span style="color:#4070a0">'file[/etc/nginx/ssl/example.crt]'</span>, <span style="color:#517918">:immediately</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p>In this case the <code>subscribes</code> property reloads the <code>nginx</code> service whenever its certificate file, located under <code>/etc/nginx/ssl/example.crt</code>, is updated. <code>subscribes</code> does not make any changes to the certificate file itself, it merely listens for a change to the file, and executes the <code>:reload</code> action for its resource (in this example <code>nginx</code>) when a change is detected.</p> <p>If the other resource does not exist, the subscription will not raise an error. Contrast this with the stricter semantics of <code>notifies</code>, which will raise an error if the other resource does not exist.</p> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>subscribes</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">subscribes <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <h4 id="guards-macos-password-policy">Guards</h4> <p>A guard property can be used to evaluate the state of a node during the execution phase of a Chef Infra Client run. Based on the results of this evaluation, a guard property is then used to tell Chef Infra Client if it should continue executing a resource. A guard property accepts either a string value or a Ruby block value:</p> <ul> <li>A string is executed as a shell command. If the command returns <code>0</code>, the guard is applied. If the command returns any other value, then the guard property is not applied. String guards in a <strong>powershell_script</strong> run Windows PowerShell commands and may return <code>true</code> in addition to <code>0</code>.</li> <li>A block is executed as Ruby code that must return either <code>true</code> or <code>false</code>. If the block returns <code>true</code>, the guard property is applied. If the block returns <code>false</code>, the guard property is not applied.</li> </ul> <p>A guard property is useful for ensuring that a resource is idempotent by allowing that resource to test for the desired state as it is being executed, and then if the desired state is present, for Chef Infra Client to do nothing.</p> <strong>Properties</strong> <p>The following properties can be used to define a guard that is evaluated during the execution phase of a Chef Infra Client run:</p> <dl> <dt><code>not_if</code></dt> <dd> <p>Prevent a resource from executing when the condition returns <code>true</code>.</p> </dd> <dt><code>only_if</code></dt> <dd> <p>Allow a resource to execute only if the condition returns <code>true</code>.</p> </dd> </dl> <h3 id="examples-macos-password-policy">Examples</h3> <hr> <p>The following examples demonstrate various approaches for using the <strong>macos_password_policy</strong> resource in recipes:</p> <p><strong>Set the local password policy</strong>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">macos_password_policy <span style="color:#4070a0">'Setup appropriate password complexity and rules'</span> <span style="color:#007020;font-weight:700">do</span>
  max_failed_logins <span style="color:#40a070">5</span>
  lockout_time <span style="color:#40a070">2</span>
  maximum_password_age <span style="color:#40a070">365</span>
  minimum_password_length <span style="color:#40a070">12</span>
  minimum_numeric_characters <span style="color:#40a070">0</span>
  minimum_lowercase_letters <span style="color:#40a070">0</span>
  minimum_uppercase_letters <span style="color:#40a070">0</span>
  minimum_special_characters <span style="color:#40a070">0</span>
  remember_how_many_passwords <span style="color:#40a070">3</span>
  exempt_user <span style="color:#4070a0">'MyAdmin'</span>
  action <span style="color:#517918">:set</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div> <h2 id="macos-power-management-resource">macos_power_management resource</h2> <a href="macos_power_management/index.html">macos_power_management resource page</a> <hr> <p>Use the <strong>macos_power_management</strong> resource to set the power settings of a kiosk-style device when you need it always-on</p> <p><strong>New in Chef Infra Client 1.0.</strong></p> <h3 id="syntax-macos-power-management">Syntax</h3> <hr>  <p>The full syntax for all of the properties that are available to the <strong>macos_power_management</strong> resource is:</p> 
<div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">macos_power_management <span style="color:#4070a0">'name'</span> <span style="color:#007020;font-weight:700">do</span>
  computer_sleep_time      <span style="color:#007020">String</span> <span style="color:#60a0b0;font-style:italic"># default value: "never"</span>
  disk_sleep_time          <span style="color:#007020">String</span> <span style="color:#60a0b0;font-style:italic"># default value: "never"</span>
  display_sleep_time       <span style="color:#007020">String</span> <span style="color:#60a0b0;font-style:italic"># default value: "never"</span>
  action                   <span style="color:#60add5">Symbol</span> <span style="color:#60a0b0;font-style:italic"># defaults to :set if not specified</span>
<span style="color:#007020;font-weight:700">end</span></code></pre></div> <p>where:</p> <ul> <li>
<code>macos_power_management</code> is the resource.</li> <li>
<code>name</code> is the name given to the resource block.</li> <li>
<code>action</code> identifies which steps Chef Infra Client will take to bring the node into the desired state.</li> <li>
<code>computer_sleep_time</code>, <code>disk_sleep_time</code>, and <code>display_sleep_time</code> are the properties available to this resource.</li> </ul> <h3 id="actions-macos-power-management">Actions</h3> <hr> <p>The <strong>macos_power_management</strong> resource has the following actions:</p> <dl> <dt><code>:nothing</code></dt> <dd>This resource block does not act unless notified by another resource to take action. Once notified, this resource block either runs immediately or is queued up to run at the end of a Chef Infra Client run.</dd> <dt><code>:set</code></dt> <dd>This action sets the policy as defined in its properties.</dd> </dl> <h3 id="properties-macos-power-management">Properties</h3> <hr> <p>The <strong>macos_power_management</strong> resource has the following properties:</p> <dl> <dt> <code>computer_sleep_time</code> </dt> <dd> <strong>Ruby Type:</strong> String | <strong>Default Value:</strong> <code>never</code> <p>A time value between 1-60 minutes or “never” to use to set the computer to sleep after. Defaults to never</p> </dd> </dl> <dl> <dt> <code>disk_sleep_time</code> </dt> <dd> <strong>Ruby Type:</strong> String | <strong>Default Value:</strong> <code>never</code> <p>A time value between 1-60 minutes or “never” to use to set the hard disk to sleep after. Defaults to never</p> </dd> </dl> <dl> <dt> <code>display_sleep_time</code> </dt> <dd> <strong>Ruby Type:</strong> String | <strong>Default Value:</strong> <code>never</code> <p>A time value between 1-60 minutes or “never” to use to set the display to sleep after. Defaults to never</p> </dd> </dl> <br> <h3 id="functionality-macos-power-management">Common Resource Functionality</h3> <hr> <p>Chef resources include common properties, notifications, and resource guards.</p> <h4 id="common-properties-macos-power-management">Common Properties</h4> <p>The following properties are common to every resource:</p> <dl> <dt><code>compile_time</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Control the phase during which the resource is run on the node. Set to true to run while the resource collection is being built (the <code>compile phase</code>). Set to false to run while Chef Infra Client is configuring the node (the <code>converge phase</code>).</p> </dd> <dt><code>ignore_failure</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false, :quiet | <strong>Default Value:</strong> <code>false</code></p> <p>Continue running a recipe if a resource fails for any reason. <code>:quiet</code> will not display the full stack trace and the recipe will continue to run if a resource fails.</p> </dd> <dt><code>retries</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>0</code></p> <p>The number of attempts to catch exceptions and retry the resource.</p> </dd> <dt><code>retry_delay</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>2</code></p> <p>The delay in seconds between retry attempts.</p> </dd> <dt><code>sensitive</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Ensure that sensitive resource data is not logged by Chef Infra Client.</p> </dd> </dl> <h4 id="common-notifications-macos-power-management">Notifications</h4> <dl> <dt> <code>notifies</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> <p>A resource may notify another resource to take action when its state changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> that resource should take, and then the <code>:timer</code> for that action. A resource may notify more than one resource; use a <code>notifies</code> statement for each resource to be notified.</p> <p>If the referenced resource does not exist, an error is raised. In contrast, <code>subscribes</code> will not fail if the source resource is not found.</p> </dd> </dl> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>notifies</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">notifies <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <dl> <dt> <code>subscribes</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> </dd> </dl> <p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> to be taken, and then the <code>:timer</code> for that action.</p> <p>Note that <code>subscribes</code> does not apply the specified action to the resource that it listens to - for example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">file <span style="color:#4070a0">'/etc/nginx/ssl/example.crt'</span> <span style="color:#007020;font-weight:700">do</span>
  mode <span style="color:#4070a0">'0600'</span>
  owner <span style="color:#4070a0">'root'</span>
<span style="color:#007020;font-weight:700">end</span>

service <span style="color:#4070a0">'nginx'</span> <span style="color:#007020;font-weight:700">do</span>
  subscribes <span style="color:#517918">:reload</span>, <span style="color:#4070a0">'file[/etc/nginx/ssl/example.crt]'</span>, <span style="color:#517918">:immediately</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p>In this case the <code>subscribes</code> property reloads the <code>nginx</code> service whenever its certificate file, located under <code>/etc/nginx/ssl/example.crt</code>, is updated. <code>subscribes</code> does not make any changes to the certificate file itself, it merely listens for a change to the file, and executes the <code>:reload</code> action for its resource (in this example <code>nginx</code>) when a change is detected.</p> <p>If the other resource does not exist, the subscription will not raise an error. Contrast this with the stricter semantics of <code>notifies</code>, which will raise an error if the other resource does not exist.</p> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>subscribes</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">subscribes <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <h4 id="guards-macos-power-management">Guards</h4> <p>A guard property can be used to evaluate the state of a node during the execution phase of a Chef Infra Client run. Based on the results of this evaluation, a guard property is then used to tell Chef Infra Client if it should continue executing a resource. A guard property accepts either a string value or a Ruby block value:</p> <ul> <li>A string is executed as a shell command. If the command returns <code>0</code>, the guard is applied. If the command returns any other value, then the guard property is not applied. String guards in a <strong>powershell_script</strong> run Windows PowerShell commands and may return <code>true</code> in addition to <code>0</code>.</li> <li>A block is executed as Ruby code that must return either <code>true</code> or <code>false</code>. If the block returns <code>true</code>, the guard property is applied. If the block returns <code>false</code>, the guard property is not applied.</li> </ul> <p>A guard property is useful for ensuring that a resource is idempotent by allowing that resource to test for the desired state as it is being executed, and then if the desired state is present, for Chef Infra Client to do nothing.</p> <strong>Properties</strong> <p>The following properties can be used to define a guard that is evaluated during the execution phase of a Chef Infra Client run:</p> <dl> <dt><code>not_if</code></dt> <dd> <p>Prevent a resource from executing when the condition returns <code>true</code>.</p> </dd> <dt><code>only_if</code></dt> <dd> <p>Allow a resource to execute only if the condition returns <code>true</code>.</p> </dd> </dl> <h3 id="examples-macos-power-management">Examples</h3> <hr> <p>The following examples demonstrate various approaches for using the <strong>macos_power_management</strong> resource in recipes:</p> <p><strong>Configure Power Management settings</strong>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">macos_power_management <span style="color:#4070a0">'Set the Device to a defined power level'</span> <span style="color:#007020;font-weight:700">do</span>
  computer_sleep_time <span style="color:#4070a0">'never'</span>
  display_sleep_time <span style="color:#4070a0">'never'</span>
  disk_sleep_time <span style="color:#4070a0">'never'</span>
  action <span style="color:#517918">:set</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div> <h2 id="rescue-account-resource">rescue_account resource</h2> <a href="rescue_account/index.html">rescue_account resource page</a> <hr> <p>Use the <strong>rescue_account</strong> resource to provide Administrators with a rescue account.</p> <p><strong>New in Chef Infra Client 1.0.</strong></p> <h3 id="syntax-rescue-account">Syntax</h3> <hr>  <p>The full syntax for all of the properties that are available to the <strong>rescue_account</strong> resource is:</p> 
<div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">rescue_account <span style="color:#4070a0">'name'</span> <span style="color:#007020;font-weight:700">do</span>
  account_name      <span style="color:#007020">String</span>
  password          <span style="color:#007020">String</span>
  action            <span style="color:#60add5">Symbol</span> <span style="color:#60a0b0;font-style:italic"># defaults to :create if not specified</span>
<span style="color:#007020;font-weight:700">end</span></code></pre></div> <p>where:</p> <ul> <li>
<code>rescue_account</code> is the resource.</li> <li>
<code>name</code> is the name given to the resource block.</li> <li>
<code>action</code> identifies which steps Chef Infra Client will take to bring the node into the desired state.</li> <li>
<code>account_name</code> and <code>password</code> are the properties available to this resource.</li> </ul> <h3 id="actions-rescue-account">Actions</h3> <hr> <p>The <strong>rescue_account</strong> resource has the following actions:</p> <dl> <dt><code>:create</code></dt> <dd>Creates the user specified in the property field.</dd> <dt><code>:delete</code></dt> <dd>Deletes the named user.</dd> <dt><code>:disable</code></dt> <dd>Turns off the account if it was enabled.</dd> <dt><code>:enable</code></dt> <dd>Turns the account on if previously disabled.</dd> <dt><code>:nothing</code></dt> <dd>This resource block does not act unless notified by another resource to take action. Once notified, this resource block either runs immediately or is queued up to run at the end of a Chef Infra Client run.</dd> </dl> <h3 id="properties-rescue-account">Properties</h3> <hr> <p>The <strong>rescue_account</strong> resource has the following properties:</p> <dl> <dt> <code>account_name</code> </dt> <dd> <strong>Ruby Type:</strong> String | <code>REQUIRED</code> <p>Name of the user to be created as a rescue account</p> </dd> </dl> <dl> <dt> <code>password</code> </dt> <dd> <strong>Ruby Type:</strong> String | <code>REQUIRED</code> <p>Corresponding password for that user</p> </dd> </dl> <br> <h3 id="functionality-rescue-account">Common Resource Functionality</h3> <hr> <p>Chef resources include common properties, notifications, and resource guards.</p> <h4 id="common-properties-rescue-account">Common Properties</h4> <p>The following properties are common to every resource:</p> <dl> <dt><code>compile_time</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Control the phase during which the resource is run on the node. Set to true to run while the resource collection is being built (the <code>compile phase</code>). Set to false to run while Chef Infra Client is configuring the node (the <code>converge phase</code>).</p> </dd> <dt><code>ignore_failure</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false, :quiet | <strong>Default Value:</strong> <code>false</code></p> <p>Continue running a recipe if a resource fails for any reason. <code>:quiet</code> will not display the full stack trace and the recipe will continue to run if a resource fails.</p> </dd> <dt><code>retries</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>0</code></p> <p>The number of attempts to catch exceptions and retry the resource.</p> </dd> <dt><code>retry_delay</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>2</code></p> <p>The delay in seconds between retry attempts.</p> </dd> <dt><code>sensitive</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Ensure that sensitive resource data is not logged by Chef Infra Client.</p> </dd> </dl> <h4 id="common-notifications-rescue-account">Notifications</h4> <dl> <dt> <code>notifies</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> <p>A resource may notify another resource to take action when its state changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> that resource should take, and then the <code>:timer</code> for that action. A resource may notify more than one resource; use a <code>notifies</code> statement for each resource to be notified.</p> <p>If the referenced resource does not exist, an error is raised. In contrast, <code>subscribes</code> will not fail if the source resource is not found.</p> </dd> </dl> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>notifies</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">notifies <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <dl> <dt> <code>subscribes</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> </dd> </dl> <p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> to be taken, and then the <code>:timer</code> for that action.</p> <p>Note that <code>subscribes</code> does not apply the specified action to the resource that it listens to - for example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">file <span style="color:#4070a0">'/etc/nginx/ssl/example.crt'</span> <span style="color:#007020;font-weight:700">do</span>
  mode <span style="color:#4070a0">'0600'</span>
  owner <span style="color:#4070a0">'root'</span>
<span style="color:#007020;font-weight:700">end</span>

service <span style="color:#4070a0">'nginx'</span> <span style="color:#007020;font-weight:700">do</span>
  subscribes <span style="color:#517918">:reload</span>, <span style="color:#4070a0">'file[/etc/nginx/ssl/example.crt]'</span>, <span style="color:#517918">:immediately</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p>In this case the <code>subscribes</code> property reloads the <code>nginx</code> service whenever its certificate file, located under <code>/etc/nginx/ssl/example.crt</code>, is updated. <code>subscribes</code> does not make any changes to the certificate file itself, it merely listens for a change to the file, and executes the <code>:reload</code> action for its resource (in this example <code>nginx</code>) when a change is detected.</p> <p>If the other resource does not exist, the subscription will not raise an error. Contrast this with the stricter semantics of <code>notifies</code>, which will raise an error if the other resource does not exist.</p> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>subscribes</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">subscribes <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <h4 id="guards-rescue-account">Guards</h4> <p>A guard property can be used to evaluate the state of a node during the execution phase of a Chef Infra Client run. Based on the results of this evaluation, a guard property is then used to tell Chef Infra Client if it should continue executing a resource. A guard property accepts either a string value or a Ruby block value:</p> <ul> <li>A string is executed as a shell command. If the command returns <code>0</code>, the guard is applied. If the command returns any other value, then the guard property is not applied. String guards in a <strong>powershell_script</strong> run Windows PowerShell commands and may return <code>true</code> in addition to <code>0</code>.</li> <li>A block is executed as Ruby code that must return either <code>true</code> or <code>false</code>. If the block returns <code>true</code>, the guard property is applied. If the block returns <code>false</code>, the guard property is not applied.</li> </ul> <p>A guard property is useful for ensuring that a resource is idempotent by allowing that resource to test for the desired state as it is being executed, and then if the desired state is present, for Chef Infra Client to do nothing.</p> <strong>Properties</strong> <p>The following properties can be used to define a guard that is evaluated during the execution phase of a Chef Infra Client run:</p> <dl> <dt><code>not_if</code></dt> <dd> <p>Prevent a resource from executing when the condition returns <code>true</code>.</p> </dd> <dt><code>only_if</code></dt> <dd> <p>Allow a resource to execute only if the condition returns <code>true</code>.</p> </dd> </dl> <h3 id="examples-rescue-account">Examples</h3> <hr> <p>The following examples demonstrate various approaches for using the <strong>rescue_account</strong> resource in recipes:</p> <p><strong>Create a managed user account</strong>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">rescue_account <span style="color:#4070a0">'Configure an Admin level account for IT to use'</span> <span style="color:#007020;font-weight:700">do</span>
  account_name <span style="color:#4070a0">'MyAdmin'</span>
  password <span style="color:#4070a0">'123Opscode!!'</span>
  action <span style="color:#517918">:create</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p><strong>Delete a managed user account</strong>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">rescue_account <span style="color:#4070a0">'Delete an Admin level account for IT to use'</span> <span style="color:#007020;font-weight:700">do</span>
  account_name <span style="color:#4070a0">'MyAdmin'</span>
  action <span style="color:#517918">:delete</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p><strong>Enable an existing managed user account</strong>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">rescue_account <span style="color:#4070a0">'Enable an Admin level account for IT to use'</span> <span style="color:#007020;font-weight:700">do</span>
  account_name <span style="color:#4070a0">'MyAdmin'</span>
  action <span style="color:#517918">:enable</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p><strong>Disable an existing managed user account</strong>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">rescue_account <span style="color:#4070a0">'Disable an Admin level account'</span> <span style="color:#007020;font-weight:700">do</span>
  account_name <span style="color:#4070a0">'MyAdmin'</span>
  action <span style="color:#517918">:disable</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div> <h2 id="windows-admin-control-resource">windows_admin_control resource</h2> <a href="windows_admin_control/index.html">windows_admin_control resource page</a> <hr> <p>Use the <strong>windows_admin_control</strong> resource to enforce Admin level access for system-wide changes.</p> <p><strong>New in Chef Infra Client 1.0.</strong></p> <h3 id="syntax-windows-admin-control">Syntax</h3> <hr>  <p>The full syntax for all of the properties that are available to the <strong>windows_admin_control</strong> resource is:</p> 
<div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">windows_admin_control <span style="color:#4070a0">'name'</span> <span style="color:#007020;font-weight:700">do</span>
  action      <span style="color:#60add5">Symbol</span> <span style="color:#60a0b0;font-style:italic"># defaults to :enable if not specified</span>
<span style="color:#007020;font-weight:700">end</span></code></pre></div> <p>where:</p> <ul> <li>
<code>windows_admin_control</code> is the resource.</li> <li>
<code>name</code> is the name given to the resource block.</li> <li>
<code>action</code> identifies which steps Chef Infra Client will take to bring the node into the desired state.</li> </ul> <h3 id="actions-windows-admin-control">Actions</h3> <hr> <p>The <strong>windows_admin_control</strong> resource has the following actions:</p> <dl> <dt><code>:disable</code></dt>  <dt><code>:enable</code></dt>  <dt><code>:nothing</code></dt> <dd>This resource block does not act unless notified by another resource to take action. Once notified, this resource block either runs immediately or is queued up to run at the end of a Chef Infra Client run.</dd> </dl> <h3 id="properties-windows-admin-control">Properties</h3> <hr> <p>This resource does not have any properties.</p> <br> <h3 id="functionality-windows-admin-control">Common Resource Functionality</h3> <hr> <p>Chef resources include common properties, notifications, and resource guards.</p> <h4 id="common-properties-windows-admin-control">Common Properties</h4> <p>The following properties are common to every resource:</p> <dl> <dt><code>compile_time</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Control the phase during which the resource is run on the node. Set to true to run while the resource collection is being built (the <code>compile phase</code>). Set to false to run while Chef Infra Client is configuring the node (the <code>converge phase</code>).</p> </dd> <dt><code>ignore_failure</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false, :quiet | <strong>Default Value:</strong> <code>false</code></p> <p>Continue running a recipe if a resource fails for any reason. <code>:quiet</code> will not display the full stack trace and the recipe will continue to run if a resource fails.</p> </dd> <dt><code>retries</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>0</code></p> <p>The number of attempts to catch exceptions and retry the resource.</p> </dd> <dt><code>retry_delay</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>2</code></p> <p>The delay in seconds between retry attempts.</p> </dd> <dt><code>sensitive</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Ensure that sensitive resource data is not logged by Chef Infra Client.</p> </dd> </dl> <h4 id="common-notifications-windows-admin-control">Notifications</h4> <dl> <dt> <code>notifies</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> <p>A resource may notify another resource to take action when its state changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> that resource should take, and then the <code>:timer</code> for that action. A resource may notify more than one resource; use a <code>notifies</code> statement for each resource to be notified.</p> <p>If the referenced resource does not exist, an error is raised. In contrast, <code>subscribes</code> will not fail if the source resource is not found.</p> </dd> </dl> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>notifies</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">notifies <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <dl> <dt> <code>subscribes</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> </dd> </dl> <p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> to be taken, and then the <code>:timer</code> for that action.</p> <p>Note that <code>subscribes</code> does not apply the specified action to the resource that it listens to - for example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">file <span style="color:#4070a0">'/etc/nginx/ssl/example.crt'</span> <span style="color:#007020;font-weight:700">do</span>
  mode <span style="color:#4070a0">'0600'</span>
  owner <span style="color:#4070a0">'root'</span>
<span style="color:#007020;font-weight:700">end</span>

service <span style="color:#4070a0">'nginx'</span> <span style="color:#007020;font-weight:700">do</span>
  subscribes <span style="color:#517918">:reload</span>, <span style="color:#4070a0">'file[/etc/nginx/ssl/example.crt]'</span>, <span style="color:#517918">:immediately</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p>In this case the <code>subscribes</code> property reloads the <code>nginx</code> service whenever its certificate file, located under <code>/etc/nginx/ssl/example.crt</code>, is updated. <code>subscribes</code> does not make any changes to the certificate file itself, it merely listens for a change to the file, and executes the <code>:reload</code> action for its resource (in this example <code>nginx</code>) when a change is detected.</p> <p>If the other resource does not exist, the subscription will not raise an error. Contrast this with the stricter semantics of <code>notifies</code>, which will raise an error if the other resource does not exist.</p> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>subscribes</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">subscribes <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <h4 id="guards-windows-admin-control">Guards</h4> <p>A guard property can be used to evaluate the state of a node during the execution phase of a Chef Infra Client run. Based on the results of this evaluation, a guard property is then used to tell Chef Infra Client if it should continue executing a resource. A guard property accepts either a string value or a Ruby block value:</p> <ul> <li>A string is executed as a shell command. If the command returns <code>0</code>, the guard is applied. If the command returns any other value, then the guard property is not applied. String guards in a <strong>powershell_script</strong> run Windows PowerShell commands and may return <code>true</code> in addition to <code>0</code>.</li> <li>A block is executed as Ruby code that must return either <code>true</code> or <code>false</code>. If the block returns <code>true</code>, the guard property is applied. If the block returns <code>false</code>, the guard property is not applied.</li> </ul> <p>A guard property is useful for ensuring that a resource is idempotent by allowing that resource to test for the desired state as it is being executed, and then if the desired state is present, for Chef Infra Client to do nothing.</p> <strong>Properties</strong> <p>The following properties can be used to define a guard that is evaluated during the execution phase of a Chef Infra Client run:</p> <dl> <dt><code>not_if</code></dt> <dd> <p>Prevent a resource from executing when the condition returns <code>true</code>.</p> </dd> <dt><code>only_if</code></dt> <dd> <p>Allow a resource to execute only if the condition returns <code>true</code>.</p> </dd> </dl> <h3 id="examples-windows-admin-control">Examples</h3> <hr> <p>The following examples demonstrate various approaches for using the <strong>windows_admin_control</strong> resource in recipes:</p> <p><strong>Turns on UAC to enforce Admin access for changes</strong>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">admin_control <span style="color:#4070a0">'Require Admin rights to perform system-wide changes'</span> <span style="color:#007020;font-weight:700">do</span>
  action <span style="color:#517918">:enable</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p><strong>Turns off UAC</strong>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">admin_control <span style="color:#4070a0">'Do Not Require Admin rights to perform system-wide changes'</span> <span style="color:#007020;font-weight:700">do</span>
  action <span style="color:#517918">:disable</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div> <h2 id="windows-app-management-resource">windows_app_management resource</h2> <a href="windows_app_management/index.html">windows_app_management resource page</a> <hr> <p>Use the <strong>windows_app_management</strong> resource to configure nodes to use Gorilla for application management.</p> <p><strong>New in Chef Infra Client 1.0.</strong></p> <h3 id="syntax-windows-app-management">Syntax</h3> <hr>  <p>The full syntax for all of the properties that are available to the <strong>windows_app_management</strong> resource is:</p> 
<div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">windows_app_management <span style="color:#4070a0">'name'</span> <span style="color:#007020;font-weight:700">do</span>
  update_check_frequency      <span style="color:#007020">String</span>
  action                      <span style="color:#60add5">Symbol</span> <span style="color:#60a0b0;font-style:italic"># defaults to :enable if not specified</span>
<span style="color:#007020;font-weight:700">end</span></code></pre></div> <p>where:</p> <ul> <li>
<code>windows_app_management</code> is the resource.</li> <li>
<code>name</code> is the name given to the resource block.</li> <li>
<code>action</code> identifies which steps Chef Infra Client will take to bring the node into the desired state.</li> <li>
<code>update_check_frequency</code> is the property available to this resource.</li> </ul> <h3 id="actions-windows-app-management">Actions</h3> <hr> <p>The <strong>windows_app_management</strong> resource has the following actions:</p> <dl> <dt><code>:disable</code></dt> <dd>Disables the Windows Scheduled Task.</dd> <dt><code>:enable</code></dt> <dd>Sets the property, installs Gorilla, configures the local install with the yaml file, and sets a Windows Scheduled Task to run at the interval set by <code>how_often_to_check_for_updates</code>.</dd> <dt><code>:nothing</code></dt> <dd>This resource block does not act unless notified by another resource to take action. Once notified, this resource block either runs immediately or is queued up to run at the end of a Chef Infra Client run.</dd> </dl> <h3 id="properties-windows-app-management">Properties</h3> <hr> <p>The <strong>windows_app_management</strong> resource has the following properties:</p> <dl> <dt> <code>update_check_frequency</code> </dt> <dd> <strong>Ruby Type:</strong> String <strong>Allowed Values:</strong> <code>"daily", "minute", "monthly", "none", "on_idle", "on_logon", "once", "onstart", "weekly"</code> <p>How often should the Gorilla client check for updates.</p> </dd> </dl> <br> <h3 id="functionality-windows-app-management">Common Resource Functionality</h3> <hr> <p>Chef resources include common properties, notifications, and resource guards.</p> <h4 id="common-properties-windows-app-management">Common Properties</h4> <p>The following properties are common to every resource:</p> <dl> <dt><code>compile_time</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Control the phase during which the resource is run on the node. Set to true to run while the resource collection is being built (the <code>compile phase</code>). Set to false to run while Chef Infra Client is configuring the node (the <code>converge phase</code>).</p> </dd> <dt><code>ignore_failure</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false, :quiet | <strong>Default Value:</strong> <code>false</code></p> <p>Continue running a recipe if a resource fails for any reason. <code>:quiet</code> will not display the full stack trace and the recipe will continue to run if a resource fails.</p> </dd> <dt><code>retries</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>0</code></p> <p>The number of attempts to catch exceptions and retry the resource.</p> </dd> <dt><code>retry_delay</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>2</code></p> <p>The delay in seconds between retry attempts.</p> </dd> <dt><code>sensitive</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Ensure that sensitive resource data is not logged by Chef Infra Client.</p> </dd> </dl> <h4 id="common-notifications-windows-app-management">Notifications</h4> <dl> <dt> <code>notifies</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> <p>A resource may notify another resource to take action when its state changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> that resource should take, and then the <code>:timer</code> for that action. A resource may notify more than one resource; use a <code>notifies</code> statement for each resource to be notified.</p> <p>If the referenced resource does not exist, an error is raised. In contrast, <code>subscribes</code> will not fail if the source resource is not found.</p> </dd> </dl> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>notifies</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">notifies <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <dl> <dt> <code>subscribes</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> </dd> </dl> <p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> to be taken, and then the <code>:timer</code> for that action.</p> <p>Note that <code>subscribes</code> does not apply the specified action to the resource that it listens to - for example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">file <span style="color:#4070a0">'/etc/nginx/ssl/example.crt'</span> <span style="color:#007020;font-weight:700">do</span>
  mode <span style="color:#4070a0">'0600'</span>
  owner <span style="color:#4070a0">'root'</span>
<span style="color:#007020;font-weight:700">end</span>

service <span style="color:#4070a0">'nginx'</span> <span style="color:#007020;font-weight:700">do</span>
  subscribes <span style="color:#517918">:reload</span>, <span style="color:#4070a0">'file[/etc/nginx/ssl/example.crt]'</span>, <span style="color:#517918">:immediately</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p>In this case the <code>subscribes</code> property reloads the <code>nginx</code> service whenever its certificate file, located under <code>/etc/nginx/ssl/example.crt</code>, is updated. <code>subscribes</code> does not make any changes to the certificate file itself, it merely listens for a change to the file, and executes the <code>:reload</code> action for its resource (in this example <code>nginx</code>) when a change is detected.</p> <p>If the other resource does not exist, the subscription will not raise an error. Contrast this with the stricter semantics of <code>notifies</code>, which will raise an error if the other resource does not exist.</p> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>subscribes</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">subscribes <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <h4 id="guards-windows-app-management">Guards</h4> <p>A guard property can be used to evaluate the state of a node during the execution phase of a Chef Infra Client run. Based on the results of this evaluation, a guard property is then used to tell Chef Infra Client if it should continue executing a resource. A guard property accepts either a string value or a Ruby block value:</p> <ul> <li>A string is executed as a shell command. If the command returns <code>0</code>, the guard is applied. If the command returns any other value, then the guard property is not applied. String guards in a <strong>powershell_script</strong> run Windows PowerShell commands and may return <code>true</code> in addition to <code>0</code>.</li> <li>A block is executed as Ruby code that must return either <code>true</code> or <code>false</code>. If the block returns <code>true</code>, the guard property is applied. If the block returns <code>false</code>, the guard property is not applied.</li> </ul> <p>A guard property is useful for ensuring that a resource is idempotent by allowing that resource to test for the desired state as it is being executed, and then if the desired state is present, for Chef Infra Client to do nothing.</p> <strong>Properties</strong> <p>The following properties can be used to define a guard that is evaluated during the execution phase of a Chef Infra Client run:</p> <dl> <dt><code>not_if</code></dt> <dd> <p>Prevent a resource from executing when the condition returns <code>true</code>.</p> </dd> <dt><code>only_if</code></dt> <dd> <p>Allow a resource to execute only if the condition returns <code>true</code>.</p> </dd> </dl> <h3 id="examples-windows-app-management">Examples</h3> <hr> <p>The following examples demonstrate various approaches for using the <strong>windows_app_management</strong> resource in recipes:</p> <p><strong>Configure managed application management</strong>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">windows_app_management <span style="color:#4070a0">'Use Gorilla to manage Apps'</span> <span style="color:#007020;font-weight:700">do</span>
  update_check_frequency <span style="color:#4070a0">'daily'</span>
  action <span style="color:#517918">:enable</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p><strong>Disable managed application management</strong>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">windows_app_management <span style="color:#4070a0">'Do Not Use Gorilla to manage Apps'</span> <span style="color:#007020;font-weight:700">do</span>
  action <span style="color:#517918">:disable</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div> <h2 id="windows-automatic-logout-resource">windows_automatic_logout resource</h2> <a href="windows_automatic_logout/index.html">windows_automatic_logout resource page</a> <hr> <p>Use the <strong>windows_automatic_logout</strong> resource to set the system to automatically logout after a set time.</p> <p><strong>New in Chef Infra Client 1.0.</strong></p> <h3 id="syntax-windows-automatic-logout">Syntax</h3> <hr>  <p>The full syntax for all of the properties that are available to the <strong>windows_automatic_logout</strong> resource is:</p> 
<div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">windows_automatic_logout <span style="color:#4070a0">'name'</span> <span style="color:#007020;font-weight:700">do</span>
  autologout_time      <span style="color:#007020">Integer</span> <span style="color:#60a0b0;font-style:italic"># default value: 3600</span>
  action               <span style="color:#60add5">Symbol</span> <span style="color:#60a0b0;font-style:italic"># defaults to :enable if not specified</span>
<span style="color:#007020;font-weight:700">end</span></code></pre></div> <p>where:</p> <ul> <li>
<code>windows_automatic_logout</code> is the resource.</li> <li>
<code>name</code> is the name given to the resource block.</li> <li>
<code>action</code> identifies which steps Chef Infra Client will take to bring the node into the desired state.</li> <li>
<code>autologout_time</code> is the property available to this resource.</li> </ul> <h3 id="actions-windows-automatic-logout">Actions</h3> <hr> <p>The <strong>windows_automatic_logout</strong> resource has the following actions:</p> <dl> <dt><code>:nothing</code></dt> <dd>This resource block does not act unless notified by another resource to take action. Once notified, this resource block either runs immediately or is queued up to run at the end of a Chef Infra Client run.</dd> <dt><code>:set</code></dt>  </dl> <h3 id="properties-windows-automatic-logout">Properties</h3> <hr> <p>The <strong>windows_automatic_logout</strong> resource has the following properties:</p> <dl> <dt> <code>autologout_time</code> </dt> <dd> <strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>3600</code> <p>The amount of time in seconds to elapse before logging the system out. Defaults to 3600s (1 hour)</p> </dd> </dl> <br> <h3 id="functionality-windows-automatic-logout">Common Resource Functionality</h3> <hr> <p>Chef resources include common properties, notifications, and resource guards.</p> <h4 id="common-properties-windows-automatic-logout">Common Properties</h4> <p>The following properties are common to every resource:</p> <dl> <dt><code>compile_time</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Control the phase during which the resource is run on the node. Set to true to run while the resource collection is being built (the <code>compile phase</code>). Set to false to run while Chef Infra Client is configuring the node (the <code>converge phase</code>).</p> </dd> <dt><code>ignore_failure</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false, :quiet | <strong>Default Value:</strong> <code>false</code></p> <p>Continue running a recipe if a resource fails for any reason. <code>:quiet</code> will not display the full stack trace and the recipe will continue to run if a resource fails.</p> </dd> <dt><code>retries</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>0</code></p> <p>The number of attempts to catch exceptions and retry the resource.</p> </dd> <dt><code>retry_delay</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>2</code></p> <p>The delay in seconds between retry attempts.</p> </dd> <dt><code>sensitive</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Ensure that sensitive resource data is not logged by Chef Infra Client.</p> </dd> </dl> <h4 id="common-notifications-windows-automatic-logout">Notifications</h4> <dl> <dt> <code>notifies</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> <p>A resource may notify another resource to take action when its state changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> that resource should take, and then the <code>:timer</code> for that action. A resource may notify more than one resource; use a <code>notifies</code> statement for each resource to be notified.</p> <p>If the referenced resource does not exist, an error is raised. In contrast, <code>subscribes</code> will not fail if the source resource is not found.</p> </dd> </dl> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>notifies</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">notifies <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <dl> <dt> <code>subscribes</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> </dd> </dl> <p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> to be taken, and then the <code>:timer</code> for that action.</p> <p>Note that <code>subscribes</code> does not apply the specified action to the resource that it listens to - for example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">file <span style="color:#4070a0">'/etc/nginx/ssl/example.crt'</span> <span style="color:#007020;font-weight:700">do</span>
  mode <span style="color:#4070a0">'0600'</span>
  owner <span style="color:#4070a0">'root'</span>
<span style="color:#007020;font-weight:700">end</span>

service <span style="color:#4070a0">'nginx'</span> <span style="color:#007020;font-weight:700">do</span>
  subscribes <span style="color:#517918">:reload</span>, <span style="color:#4070a0">'file[/etc/nginx/ssl/example.crt]'</span>, <span style="color:#517918">:immediately</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p>In this case the <code>subscribes</code> property reloads the <code>nginx</code> service whenever its certificate file, located under <code>/etc/nginx/ssl/example.crt</code>, is updated. <code>subscribes</code> does not make any changes to the certificate file itself, it merely listens for a change to the file, and executes the <code>:reload</code> action for its resource (in this example <code>nginx</code>) when a change is detected.</p> <p>If the other resource does not exist, the subscription will not raise an error. Contrast this with the stricter semantics of <code>notifies</code>, which will raise an error if the other resource does not exist.</p> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>subscribes</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">subscribes <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <h4 id="guards-windows-automatic-logout">Guards</h4> <p>A guard property can be used to evaluate the state of a node during the execution phase of a Chef Infra Client run. Based on the results of this evaluation, a guard property is then used to tell Chef Infra Client if it should continue executing a resource. A guard property accepts either a string value or a Ruby block value:</p> <ul> <li>A string is executed as a shell command. If the command returns <code>0</code>, the guard is applied. If the command returns any other value, then the guard property is not applied. String guards in a <strong>powershell_script</strong> run Windows PowerShell commands and may return <code>true</code> in addition to <code>0</code>.</li> <li>A block is executed as Ruby code that must return either <code>true</code> or <code>false</code>. If the block returns <code>true</code>, the guard property is applied. If the block returns <code>false</code>, the guard property is not applied.</li> </ul> <p>A guard property is useful for ensuring that a resource is idempotent by allowing that resource to test for the desired state as it is being executed, and then if the desired state is present, for Chef Infra Client to do nothing.</p> <strong>Properties</strong> <p>The following properties can be used to define a guard that is evaluated during the execution phase of a Chef Infra Client run:</p> <dl> <dt><code>not_if</code></dt> <dd> <p>Prevent a resource from executing when the condition returns <code>true</code>.</p> </dd> <dt><code>only_if</code></dt> <dd> <p>Allow a resource to execute only if the condition returns <code>true</code>.</p> </dd> </dl> <h3 id="examples-windows-automatic-logout">Examples</h3> <hr> <p>The following examples demonstrate various approaches for using the <strong>windows_automatic_logout</strong> resource in recipes:</p> <p><strong>Set the node to auto-logout when not being used</strong>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">automatic_logout <span style="color:#4070a0">'Automatically logout for inactivity'</span> <span style="color:#007020;font-weight:700">do</span>
  autologout_time <span style="color:#40a070">900</span>
  action <span style="color:#517918">:enable</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p><strong>Disable auto-logout</strong>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">automatic_logout <span style="color:#4070a0">'Disable automatic inactivity logout'</span> <span style="color:#007020;font-weight:700">do</span>
  autologout_time <span style="color:#40a070">900</span>
  action <span style="color:#517918">:disable</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div> <h2 id="windows-choco-installer-resource">windows_choco_installer resource</h2> <a href="windows_choco_installer/index.html">windows_choco_installer resource page</a> <hr> <p>Use the <strong>windows_choco_installer</strong> resource to install the Chocolatey package manager on Windows clients.</p> <p><strong>New in Chef Infra Client 2.0.</strong></p> <h3 id="syntax-windows-choco-installer">Syntax</h3> <hr>  <p>The full syntax for all of the properties that are available to the <strong>windows_choco_installer</strong> resource is:</p> 
<div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">windows_choco_installer <span style="color:#4070a0">'name'</span> <span style="color:#007020;font-weight:700">do</span>
  action      <span style="color:#60add5">Symbol</span> <span style="color:#60a0b0;font-style:italic"># defaults to :install if not specified</span>
<span style="color:#007020;font-weight:700">end</span></code></pre></div> <p>where:</p> <ul> <li>
<code>windows_choco_installer</code> is the resource.</li> <li>
<code>name</code> is the name given to the resource block.</li> <li>
<code>action</code> identifies which steps Chef Infra Client will take to bring the node into the desired state.</li> </ul> <h3 id="actions-windows-choco-installer">Actions</h3> <hr> <p>The <strong>windows_choco_installer</strong> resource has the following actions:</p> <dl> <dt><code>:install</code></dt> <dd>Install the Chocolatey package manager (default).</dd> <dt><code>:nothing</code></dt> <dd>This resource block does not act unless notified by another resource to take action. Once notified, this resource block either runs immediately or is queued up to run at the end of a Chef Infra Client run.</dd> </dl> <h3 id="properties-windows-choco-installer">Properties</h3> <hr> <p>This resource does not have any properties.</p> <br> <h3 id="functionality-windows-choco-installer">Common Resource Functionality</h3> <hr> <p>Chef resources include common properties, notifications, and resource guards.</p> <h4 id="common-properties-windows-choco-installer">Common Properties</h4> <p>The following properties are common to every resource:</p> <dl> <dt><code>compile_time</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Control the phase during which the resource is run on the node. Set to true to run while the resource collection is being built (the <code>compile phase</code>). Set to false to run while Chef Infra Client is configuring the node (the <code>converge phase</code>).</p> </dd> <dt><code>ignore_failure</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false, :quiet | <strong>Default Value:</strong> <code>false</code></p> <p>Continue running a recipe if a resource fails for any reason. <code>:quiet</code> will not display the full stack trace and the recipe will continue to run if a resource fails.</p> </dd> <dt><code>retries</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>0</code></p> <p>The number of attempts to catch exceptions and retry the resource.</p> </dd> <dt><code>retry_delay</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>2</code></p> <p>The delay in seconds between retry attempts.</p> </dd> <dt><code>sensitive</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Ensure that sensitive resource data is not logged by Chef Infra Client.</p> </dd> </dl> <h4 id="common-notifications-windows-choco-installer">Notifications</h4> <dl> <dt> <code>notifies</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> <p>A resource may notify another resource to take action when its state changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> that resource should take, and then the <code>:timer</code> for that action. A resource may notify more than one resource; use a <code>notifies</code> statement for each resource to be notified.</p> <p>If the referenced resource does not exist, an error is raised. In contrast, <code>subscribes</code> will not fail if the source resource is not found.</p> </dd> </dl> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>notifies</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">notifies <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <dl> <dt> <code>subscribes</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> </dd> </dl> <p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> to be taken, and then the <code>:timer</code> for that action.</p> <p>Note that <code>subscribes</code> does not apply the specified action to the resource that it listens to - for example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">file <span style="color:#4070a0">'/etc/nginx/ssl/example.crt'</span> <span style="color:#007020;font-weight:700">do</span>
  mode <span style="color:#4070a0">'0600'</span>
  owner <span style="color:#4070a0">'root'</span>
<span style="color:#007020;font-weight:700">end</span>

service <span style="color:#4070a0">'nginx'</span> <span style="color:#007020;font-weight:700">do</span>
  subscribes <span style="color:#517918">:reload</span>, <span style="color:#4070a0">'file[/etc/nginx/ssl/example.crt]'</span>, <span style="color:#517918">:immediately</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p>In this case the <code>subscribes</code> property reloads the <code>nginx</code> service whenever its certificate file, located under <code>/etc/nginx/ssl/example.crt</code>, is updated. <code>subscribes</code> does not make any changes to the certificate file itself, it merely listens for a change to the file, and executes the <code>:reload</code> action for its resource (in this example <code>nginx</code>) when a change is detected.</p> <p>If the other resource does not exist, the subscription will not raise an error. Contrast this with the stricter semantics of <code>notifies</code>, which will raise an error if the other resource does not exist.</p> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>subscribes</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">subscribes <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <h4 id="guards-windows-choco-installer">Guards</h4> <p>A guard property can be used to evaluate the state of a node during the execution phase of a Chef Infra Client run. Based on the results of this evaluation, a guard property is then used to tell Chef Infra Client if it should continue executing a resource. A guard property accepts either a string value or a Ruby block value:</p> <ul> <li>A string is executed as a shell command. If the command returns <code>0</code>, the guard is applied. If the command returns any other value, then the guard property is not applied. String guards in a <strong>powershell_script</strong> run Windows PowerShell commands and may return <code>true</code> in addition to <code>0</code>.</li> <li>A block is executed as Ruby code that must return either <code>true</code> or <code>false</code>. If the block returns <code>true</code>, the guard property is applied. If the block returns <code>false</code>, the guard property is not applied.</li> </ul> <p>A guard property is useful for ensuring that a resource is idempotent by allowing that resource to test for the desired state as it is being executed, and then if the desired state is present, for Chef Infra Client to do nothing.</p> <strong>Properties</strong> <p>The following properties can be used to define a guard that is evaluated during the execution phase of a Chef Infra Client run:</p> <dl> <dt><code>not_if</code></dt> <dd> <p>Prevent a resource from executing when the condition returns <code>true</code>.</p> </dd> <dt><code>only_if</code></dt> <dd> <p>Allow a resource to execute only if the condition returns <code>true</code>.</p> </dd> </dl> <h3 id="examples-windows-choco-installer">Examples</h3> <hr> <p>The following examples demonstrate various approaches for using the <strong>windows_choco_installer</strong> resource in recipes:</p> <p><strong>Configure Chocolatey Package Manager</strong>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">windows_choco_installer <span style="color:#4070a0">'Install Chocolatey Package Manager'</span> <span style="color:#007020;font-weight:700">do</span>
  action <span style="color:#517918">:install</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div> <h2 id="windows-defender-resource">windows_defender resource</h2> <a href="windows_defender/index.html">windows_defender resource page</a> <hr> <p>Use the <strong>windows_defender</strong> resource to enable or disable the Microsoft Windows Defender service.</p> <p><strong>New in Chef Infra Client 1.0.</strong></p> <h3 id="syntax-windows-defender">Syntax</h3> <hr>  <p>The full syntax for all of the properties that are available to the <strong>windows_defender</strong> resource is:</p> 
<div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">windows_defender <span style="color:#4070a0">'name'</span> <span style="color:#007020;font-weight:700">do</span>
  intrusion_protection_system      <span style="color:#007020">true</span>, <span style="color:#007020">false</span> <span style="color:#60a0b0;font-style:italic"># default value: true</span>
  lock_ui                          <span style="color:#007020">true</span>, <span style="color:#007020">false</span> <span style="color:#60a0b0;font-style:italic"># default value: false</span>
  realtime_protection              <span style="color:#007020">true</span>, <span style="color:#007020">false</span> <span style="color:#60a0b0;font-style:italic"># default value: true</span>
  scan_archives                    <span style="color:#007020">true</span>, <span style="color:#007020">false</span> <span style="color:#60a0b0;font-style:italic"># default value: true</span>
  scan_email                       <span style="color:#007020">true</span>, <span style="color:#007020">false</span> <span style="color:#60a0b0;font-style:italic"># default value: false</span>
  scan_mapped_drives               <span style="color:#007020">true</span>, <span style="color:#007020">false</span> <span style="color:#60a0b0;font-style:italic"># default value: true</span>
  scan_network_files               <span style="color:#007020">true</span>, <span style="color:#007020">false</span> <span style="color:#60a0b0;font-style:italic"># default value: false</span>
  scan_removable_drives            <span style="color:#007020">true</span>, <span style="color:#007020">false</span> <span style="color:#60a0b0;font-style:italic"># default value: false</span>
  scan_scripts                     <span style="color:#007020">true</span>, <span style="color:#007020">false</span> <span style="color:#60a0b0;font-style:italic"># default value: false</span>
  action                           <span style="color:#60add5">Symbol</span> <span style="color:#60a0b0;font-style:italic"># defaults to :enable if not specified</span>
<span style="color:#007020;font-weight:700">end</span></code></pre></div> <p>where:</p> <ul> <li>
<code>windows_defender</code> is the resource.</li> <li>
<code>name</code> is the name given to the resource block.</li> <li>
<code>action</code> identifies which steps Chef Infra Client will take to bring the node into the desired state.</li> <li>
<code>intrusion_protection_system</code>, <code>lock_ui</code>, <code>realtime_protection</code>, <code>scan_archives</code>, <code>scan_email</code>, <code>scan_mapped_drives</code>, <code>scan_network_files</code>, <code>scan_removable_drives</code>, and <code>scan_scripts</code> are the properties available to this resource.</li> </ul> <h3 id="actions-windows-defender">Actions</h3> <hr> <p>The <strong>windows_defender</strong> resource has the following actions:</p> <dl> <dt><code>:disable</code></dt> <dd>Disable Windows Defender.</dd> <dt><code>:enable</code></dt> <dd>Enable Windows Defender and configure settings.</dd> <dt><code>:nothing</code></dt> <dd>This resource block does not act unless notified by another resource to take action. Once notified, this resource block either runs immediately or is queued up to run at the end of a Chef Infra Client run.</dd> </dl> <h3 id="properties-windows-defender">Properties</h3> <hr> <p>The <strong>windows_defender</strong> resource has the following properties:</p> <dl> <dt> <code>intrusion_protection_system</code> </dt> <dd> <strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>true</code> <p>Enable network protection against exploitation of known vulnerabilities.</p> <p> New in Chef Client 1.1 </p> </dd> </dl> <dl> <dt> <code>lock_ui</code> </dt> <dd> <strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code> <p>Lock the UI to prevent users from changing Windows Defender settings.</p> <p> New in Chef Client 1.1 </p> </dd> </dl> <dl> <dt> <code>realtime_protection</code> </dt> <dd> <strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>true</code> <p>Enable realtime scanning of downloaded files and attachments.</p> <p> New in Chef Client 1.1 </p> </dd> </dl> <dl> <dt> <code>scan_archives</code> </dt> <dd> <strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>true</code> <p>Scan file archives such as .zip or .gz archives.</p> <p> New in Chef Client 1.1 </p> </dd> </dl> <dl> <dt> <code>scan_email</code> </dt> <dd> <strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code> <p>Scan e-mails for malware.</p> <p> New in Chef Client 1.1 </p> </dd> </dl> <dl> <dt> <code>scan_mapped_drives</code> </dt> <dd> <strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>true</code> <p>Scan files on mapped network drives.</p> <p> New in Chef Client 1.1 </p> </dd> </dl> <dl> <dt> <code>scan_network_files</code> </dt> <dd> <strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code> <p>Scan files on a network.</p> <p> New in Chef Client 1.1 </p> </dd> </dl> <dl> <dt> <code>scan_removable_drives</code> </dt> <dd> <strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code> <p>Scan content of removable drives.</p> <p> New in Chef Client 1.1 </p> </dd> </dl> <dl> <dt> <code>scan_scripts</code> </dt> <dd> <strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code> <p>Scan scripts in malware scans.</p> <p> New in Chef Client 1.1 </p> </dd> </dl> <br> <h3 id="functionality-windows-defender">Common Resource Functionality</h3> <hr> <p>Chef resources include common properties, notifications, and resource guards.</p> <h4 id="common-properties-windows-defender">Common Properties</h4> <p>The following properties are common to every resource:</p> <dl> <dt><code>compile_time</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Control the phase during which the resource is run on the node. Set to true to run while the resource collection is being built (the <code>compile phase</code>). Set to false to run while Chef Infra Client is configuring the node (the <code>converge phase</code>).</p> </dd> <dt><code>ignore_failure</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false, :quiet | <strong>Default Value:</strong> <code>false</code></p> <p>Continue running a recipe if a resource fails for any reason. <code>:quiet</code> will not display the full stack trace and the recipe will continue to run if a resource fails.</p> </dd> <dt><code>retries</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>0</code></p> <p>The number of attempts to catch exceptions and retry the resource.</p> </dd> <dt><code>retry_delay</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>2</code></p> <p>The delay in seconds between retry attempts.</p> </dd> <dt><code>sensitive</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Ensure that sensitive resource data is not logged by Chef Infra Client.</p> </dd> </dl> <h4 id="common-notifications-windows-defender">Notifications</h4> <dl> <dt> <code>notifies</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> <p>A resource may notify another resource to take action when its state changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> that resource should take, and then the <code>:timer</code> for that action. A resource may notify more than one resource; use a <code>notifies</code> statement for each resource to be notified.</p> <p>If the referenced resource does not exist, an error is raised. In contrast, <code>subscribes</code> will not fail if the source resource is not found.</p> </dd> </dl> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>notifies</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">notifies <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <dl> <dt> <code>subscribes</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> </dd> </dl> <p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> to be taken, and then the <code>:timer</code> for that action.</p> <p>Note that <code>subscribes</code> does not apply the specified action to the resource that it listens to - for example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">file <span style="color:#4070a0">'/etc/nginx/ssl/example.crt'</span> <span style="color:#007020;font-weight:700">do</span>
  mode <span style="color:#4070a0">'0600'</span>
  owner <span style="color:#4070a0">'root'</span>
<span style="color:#007020;font-weight:700">end</span>

service <span style="color:#4070a0">'nginx'</span> <span style="color:#007020;font-weight:700">do</span>
  subscribes <span style="color:#517918">:reload</span>, <span style="color:#4070a0">'file[/etc/nginx/ssl/example.crt]'</span>, <span style="color:#517918">:immediately</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p>In this case the <code>subscribes</code> property reloads the <code>nginx</code> service whenever its certificate file, located under <code>/etc/nginx/ssl/example.crt</code>, is updated. <code>subscribes</code> does not make any changes to the certificate file itself, it merely listens for a change to the file, and executes the <code>:reload</code> action for its resource (in this example <code>nginx</code>) when a change is detected.</p> <p>If the other resource does not exist, the subscription will not raise an error. Contrast this with the stricter semantics of <code>notifies</code>, which will raise an error if the other resource does not exist.</p> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>subscribes</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">subscribes <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <h4 id="guards-windows-defender">Guards</h4> <p>A guard property can be used to evaluate the state of a node during the execution phase of a Chef Infra Client run. Based on the results of this evaluation, a guard property is then used to tell Chef Infra Client if it should continue executing a resource. A guard property accepts either a string value or a Ruby block value:</p> <ul> <li>A string is executed as a shell command. If the command returns <code>0</code>, the guard is applied. If the command returns any other value, then the guard property is not applied. String guards in a <strong>powershell_script</strong> run Windows PowerShell commands and may return <code>true</code> in addition to <code>0</code>.</li> <li>A block is executed as Ruby code that must return either <code>true</code> or <code>false</code>. If the block returns <code>true</code>, the guard property is applied. If the block returns <code>false</code>, the guard property is not applied.</li> </ul> <p>A guard property is useful for ensuring that a resource is idempotent by allowing that resource to test for the desired state as it is being executed, and then if the desired state is present, for Chef Infra Client to do nothing.</p> <strong>Properties</strong> <p>The following properties can be used to define a guard that is evaluated during the execution phase of a Chef Infra Client run:</p> <dl> <dt><code>not_if</code></dt> <dd> <p>Prevent a resource from executing when the condition returns <code>true</code>.</p> </dd> <dt><code>only_if</code></dt> <dd> <p>Allow a resource to execute only if the condition returns <code>true</code>.</p> </dd> </dl> <h3 id="examples-windows-defender">Examples</h3> <hr> <p>The following examples demonstrate various approaches for using the <strong>windows_defender</strong> resource in recipes:</p> <p><strong>Configure Windows Defender AV settings</strong>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">windows_defender <span style="color:#4070a0">'Configure Defender'</span> <span style="color:#007020;font-weight:700">do</span>
  realtime_protection <span style="color:#007020">true</span>
  intrusion_protection_system <span style="color:#007020">true</span>
  lock_ui <span style="color:#007020">true</span>
  scan_archives <span style="color:#007020">true</span>
  scan_scripts <span style="color:#007020">true</span>
  scan_email <span style="color:#007020">true</span>
  scan_removable_drives <span style="color:#007020">true</span>
  scan_network_files <span style="color:#007020">false</span>
  scan_mapped_drives <span style="color:#007020">false</span>
  action <span style="color:#517918">:enable</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p><strong>Disable Windows Defender AV</strong>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">windows_defender <span style="color:#4070a0">'Disable Defender'</span> <span style="color:#007020;font-weight:700">do</span>
  action <span style="color:#517918">:disable</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div> <h2 id="windows-defender-exclusion-resource">windows_defender_exclusion resource</h2> <a href="windows_defender_exclusion/index.html">windows_defender_exclusion resource page</a> <hr> <p>Use the <strong>windows_defender_exclusion</strong> resource to exclude paths, processes, or file types from Windows Defender realtime protection scanning.</p> <p><strong>New in Chef Infra Client 1.1.</strong></p> <h3 id="syntax-windows-defender-exclusion">Syntax</h3> <hr>  <p>The full syntax for all of the properties that are available to the <strong>windows_defender_exclusion</strong> resource is:</p> 
<div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">windows_defender_exclusion <span style="color:#4070a0">'name'</span> <span style="color:#007020;font-weight:700">do</span>
  extensions         <span style="color:#007020">String</span>, <span style="color:#007020">Array</span> <span style="color:#60a0b0;font-style:italic"># default value: []</span>
  paths              <span style="color:#007020">String</span>, <span style="color:#007020">Array</span> <span style="color:#60a0b0;font-style:italic"># default value: []</span>
  process_paths      <span style="color:#007020">String</span>, <span style="color:#007020">Array</span> <span style="color:#60a0b0;font-style:italic"># default value: []</span>
  action             <span style="color:#60add5">Symbol</span> <span style="color:#60a0b0;font-style:italic"># defaults to :add if not specified</span>
<span style="color:#007020;font-weight:700">end</span></code></pre></div> <p>where:</p> <ul> <li>
<code>windows_defender_exclusion</code> is the resource.</li> <li>
<code>name</code> is the name given to the resource block.</li> <li>
<code>action</code> identifies which steps Chef Infra Client will take to bring the node into the desired state.</li> <li>
<code>extensions</code>, <code>paths</code>, and <code>process_paths</code> are the properties available to this resource.</li> </ul> <h3 id="actions-windows-defender-exclusion">Actions</h3> <hr> <p>The <strong>windows_defender_exclusion</strong> resource has the following actions:</p> <dl> <dt><code>:add</code></dt>  <dt><code>:nothing</code></dt> <dd>This resource block does not act unless notified by another resource to take action. Once notified, this resource block either runs immediately or is queued up to run at the end of a Chef Infra Client run.</dd> <dt><code>:remove</code></dt>  </dl> <h3 id="properties-windows-defender-exclusion">Properties</h3> <hr> <p>The <strong>windows_defender_exclusion</strong> resource has the following properties:</p> <dl> <dt> <code>extensions</code> </dt> <dd> <strong>Ruby Type:</strong> String, Array | <strong>Default Value:</strong> <code>[]</code> <p>File extensions to exclude from scanning.</p> </dd> </dl> <dl> <dt> <code>paths</code> </dt> <dd> <strong>Ruby Type:</strong> String, Array | <strong>Default Value:</strong> <code>[]</code> <p>File or directory paths to exclude from scanning.</p> </dd> </dl> <dl> <dt> <code>process_paths</code> </dt> <dd> <strong>Ruby Type:</strong> String, Array | <strong>Default Value:</strong> <code>[]</code> <p>Paths to executables to exclude from scanning.</p> </dd> </dl> <br> <h3 id="functionality-windows-defender-exclusion">Common Resource Functionality</h3> <hr> <p>Chef resources include common properties, notifications, and resource guards.</p> <h4 id="common-properties-windows-defender-exclusion">Common Properties</h4> <p>The following properties are common to every resource:</p> <dl> <dt><code>compile_time</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Control the phase during which the resource is run on the node. Set to true to run while the resource collection is being built (the <code>compile phase</code>). Set to false to run while Chef Infra Client is configuring the node (the <code>converge phase</code>).</p> </dd> <dt><code>ignore_failure</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false, :quiet | <strong>Default Value:</strong> <code>false</code></p> <p>Continue running a recipe if a resource fails for any reason. <code>:quiet</code> will not display the full stack trace and the recipe will continue to run if a resource fails.</p> </dd> <dt><code>retries</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>0</code></p> <p>The number of attempts to catch exceptions and retry the resource.</p> </dd> <dt><code>retry_delay</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>2</code></p> <p>The delay in seconds between retry attempts.</p> </dd> <dt><code>sensitive</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Ensure that sensitive resource data is not logged by Chef Infra Client.</p> </dd> </dl> <h4 id="common-notifications-windows-defender-exclusion">Notifications</h4> <dl> <dt> <code>notifies</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> <p>A resource may notify another resource to take action when its state changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> that resource should take, and then the <code>:timer</code> for that action. A resource may notify more than one resource; use a <code>notifies</code> statement for each resource to be notified.</p> <p>If the referenced resource does not exist, an error is raised. In contrast, <code>subscribes</code> will not fail if the source resource is not found.</p> </dd> </dl> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>notifies</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">notifies <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <dl> <dt> <code>subscribes</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> </dd> </dl> <p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> to be taken, and then the <code>:timer</code> for that action.</p> <p>Note that <code>subscribes</code> does not apply the specified action to the resource that it listens to - for example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">file <span style="color:#4070a0">'/etc/nginx/ssl/example.crt'</span> <span style="color:#007020;font-weight:700">do</span>
  mode <span style="color:#4070a0">'0600'</span>
  owner <span style="color:#4070a0">'root'</span>
<span style="color:#007020;font-weight:700">end</span>

service <span style="color:#4070a0">'nginx'</span> <span style="color:#007020;font-weight:700">do</span>
  subscribes <span style="color:#517918">:reload</span>, <span style="color:#4070a0">'file[/etc/nginx/ssl/example.crt]'</span>, <span style="color:#517918">:immediately</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p>In this case the <code>subscribes</code> property reloads the <code>nginx</code> service whenever its certificate file, located under <code>/etc/nginx/ssl/example.crt</code>, is updated. <code>subscribes</code> does not make any changes to the certificate file itself, it merely listens for a change to the file, and executes the <code>:reload</code> action for its resource (in this example <code>nginx</code>) when a change is detected.</p> <p>If the other resource does not exist, the subscription will not raise an error. Contrast this with the stricter semantics of <code>notifies</code>, which will raise an error if the other resource does not exist.</p> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>subscribes</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">subscribes <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <h4 id="guards-windows-defender-exclusion">Guards</h4> <p>A guard property can be used to evaluate the state of a node during the execution phase of a Chef Infra Client run. Based on the results of this evaluation, a guard property is then used to tell Chef Infra Client if it should continue executing a resource. A guard property accepts either a string value or a Ruby block value:</p> <ul> <li>A string is executed as a shell command. If the command returns <code>0</code>, the guard is applied. If the command returns any other value, then the guard property is not applied. String guards in a <strong>powershell_script</strong> run Windows PowerShell commands and may return <code>true</code> in addition to <code>0</code>.</li> <li>A block is executed as Ruby code that must return either <code>true</code> or <code>false</code>. If the block returns <code>true</code>, the guard property is applied. If the block returns <code>false</code>, the guard property is not applied.</li> </ul> <p>A guard property is useful for ensuring that a resource is idempotent by allowing that resource to test for the desired state as it is being executed, and then if the desired state is present, for Chef Infra Client to do nothing.</p> <strong>Properties</strong> <p>The following properties can be used to define a guard that is evaluated during the execution phase of a Chef Infra Client run:</p> <dl> <dt><code>not_if</code></dt> <dd> <p>Prevent a resource from executing when the condition returns <code>true</code>.</p> </dd> <dt><code>only_if</code></dt> <dd> <p>Allow a resource to execute only if the condition returns <code>true</code>.</p> </dd> </dl> <h3 id="examples-windows-defender-exclusion">Examples</h3> <hr> <p>The following examples demonstrate various approaches for using the <strong>windows_defender_exclusion</strong> resource in recipes:</p> <p><strong>Add excluded items to Windows Defender scans</strong>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">windows_defender_exclusion <span style="color:#4070a0">'Add to things to be excluded from scanning'</span> <span style="color:#007020;font-weight:700">do</span>
  paths <span style="color:#4070a0">'c:\foo\bar, d:\bar\baz'</span>
  extensions <span style="color:#4070a0">'png, foo, ppt, doc'</span>
  process_paths <span style="color:#4070a0">'c:\windows\system32'</span>
  action <span style="color:#517918">:add</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p><strong>Remove excluded items from Windows Defender scans</strong>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">windows_defender_exclusion <span style="color:#4070a0">'Remove things from the list to be excluded'</span> <span style="color:#007020;font-weight:700">do</span>
  process_paths <span style="color:#4070a0">'c:\windows\system32'</span>
  action <span style="color:#517918">:remove</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div> <h2 id="windows-desktop-screensaver-resource">windows_desktop_screensaver resource</h2> <a href="windows_desktop_screensaver/index.html">windows_desktop_screensaver resource page</a> <hr> <p>Use the <strong>windows_desktop_screensaver</strong> resource to configure secure screensaver settings on Windows systems.</p> <p><strong>New in Chef Infra Client 1.0.</strong></p> <h3 id="syntax-windows-desktop-screensaver">Syntax</h3> <hr>  <p>The full syntax for all of the properties that are available to the <strong>windows_desktop_screensaver</strong> resource is:</p> 
<div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">windows_desktop_screensaver <span style="color:#4070a0">'name'</span> <span style="color:#007020;font-weight:700">do</span>
  allow_lower_user_idle_time      <span style="color:#007020">true</span>, <span style="color:#007020">false</span> <span style="color:#60a0b0;font-style:italic"># default value: false</span>
  idle_time                       <span style="color:#007020">Integer</span> <span style="color:#60a0b0;font-style:italic"># default value: 20</span>
  require_password                <span style="color:#007020">true</span>, <span style="color:#007020">false</span> <span style="color:#60a0b0;font-style:italic"># default value: true</span>
  screensaver_name                <span style="color:#007020">String</span>
  action                          <span style="color:#60add5">Symbol</span> <span style="color:#60a0b0;font-style:italic"># defaults to :enable if not specified</span>
<span style="color:#007020;font-weight:700">end</span></code></pre></div> <p>where:</p> <ul> <li>
<code>windows_desktop_screensaver</code> is the resource.</li> <li>
<code>name</code> is the name given to the resource block.</li> <li>
<code>action</code> identifies which steps Chef Infra Client will take to bring the node into the desired state.</li> <li>
<code>allow_lower_user_idle_time</code>, <code>idle_time</code>, <code>require_password</code>, and <code>screensaver_name</code> are the properties available to this resource.</li> </ul> <h3 id="actions-windows-desktop-screensaver">Actions</h3> <hr> <p>The <strong>windows_desktop_screensaver</strong> resource has the following actions:</p> <dl> <dt><code>:disable</code></dt> <dd>Disable the desktop screen saver.</dd> <dt><code>:enable</code></dt> <dd>Enable the desktop screen saver.</dd> <dt><code>:nothing</code></dt> <dd>This resource block does not act unless notified by another resource to take action. Once notified, this resource block either runs immediately or is queued up to run at the end of a Chef Infra Client run.</dd> </dl> <h3 id="properties-windows-desktop-screensaver">Properties</h3> <hr> <p>The <strong>windows_desktop_screensaver</strong> resource has the following properties:</p> <dl> <dt> <code>allow_lower_user_idle_time</code> </dt> <dd> <strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code> <p>Allow users to set their screen saver idle time lower than the system requirements.</p> </dd> </dl> <dl> <dt> <code>idle_time</code> </dt> <dd> <strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>20</code> <p>The amount of idle time in minutes before the screensaver comes on.</p> </dd> </dl> <dl> <dt> <code>require_password</code> </dt> <dd> <strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>true</code> <p>Require a password when waking from the screensaver.</p> </dd> </dl> <dl> <dt> <code>screensaver_name</code> </dt> <dd> <strong>Ruby Type:</strong> String <p>The name of a specific or custom screensaver to enable.</p> </dd> </dl> <br> <h3 id="functionality-windows-desktop-screensaver">Common Resource Functionality</h3> <hr> <p>Chef resources include common properties, notifications, and resource guards.</p> <h4 id="common-properties-windows-desktop-screensaver">Common Properties</h4> <p>The following properties are common to every resource:</p> <dl> <dt><code>compile_time</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Control the phase during which the resource is run on the node. Set to true to run while the resource collection is being built (the <code>compile phase</code>). Set to false to run while Chef Infra Client is configuring the node (the <code>converge phase</code>).</p> </dd> <dt><code>ignore_failure</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false, :quiet | <strong>Default Value:</strong> <code>false</code></p> <p>Continue running a recipe if a resource fails for any reason. <code>:quiet</code> will not display the full stack trace and the recipe will continue to run if a resource fails.</p> </dd> <dt><code>retries</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>0</code></p> <p>The number of attempts to catch exceptions and retry the resource.</p> </dd> <dt><code>retry_delay</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>2</code></p> <p>The delay in seconds between retry attempts.</p> </dd> <dt><code>sensitive</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Ensure that sensitive resource data is not logged by Chef Infra Client.</p> </dd> </dl> <h4 id="common-notifications-windows-desktop-screensaver">Notifications</h4> <dl> <dt> <code>notifies</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> <p>A resource may notify another resource to take action when its state changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> that resource should take, and then the <code>:timer</code> for that action. A resource may notify more than one resource; use a <code>notifies</code> statement for each resource to be notified.</p> <p>If the referenced resource does not exist, an error is raised. In contrast, <code>subscribes</code> will not fail if the source resource is not found.</p> </dd> </dl> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>notifies</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">notifies <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <dl> <dt> <code>subscribes</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> </dd> </dl> <p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> to be taken, and then the <code>:timer</code> for that action.</p> <p>Note that <code>subscribes</code> does not apply the specified action to the resource that it listens to - for example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">file <span style="color:#4070a0">'/etc/nginx/ssl/example.crt'</span> <span style="color:#007020;font-weight:700">do</span>
  mode <span style="color:#4070a0">'0600'</span>
  owner <span style="color:#4070a0">'root'</span>
<span style="color:#007020;font-weight:700">end</span>

service <span style="color:#4070a0">'nginx'</span> <span style="color:#007020;font-weight:700">do</span>
  subscribes <span style="color:#517918">:reload</span>, <span style="color:#4070a0">'file[/etc/nginx/ssl/example.crt]'</span>, <span style="color:#517918">:immediately</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p>In this case the <code>subscribes</code> property reloads the <code>nginx</code> service whenever its certificate file, located under <code>/etc/nginx/ssl/example.crt</code>, is updated. <code>subscribes</code> does not make any changes to the certificate file itself, it merely listens for a change to the file, and executes the <code>:reload</code> action for its resource (in this example <code>nginx</code>) when a change is detected.</p> <p>If the other resource does not exist, the subscription will not raise an error. Contrast this with the stricter semantics of <code>notifies</code>, which will raise an error if the other resource does not exist.</p> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>subscribes</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">subscribes <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <h4 id="guards-windows-desktop-screensaver">Guards</h4> <p>A guard property can be used to evaluate the state of a node during the execution phase of a Chef Infra Client run. Based on the results of this evaluation, a guard property is then used to tell Chef Infra Client if it should continue executing a resource. A guard property accepts either a string value or a Ruby block value:</p> <ul> <li>A string is executed as a shell command. If the command returns <code>0</code>, the guard is applied. If the command returns any other value, then the guard property is not applied. String guards in a <strong>powershell_script</strong> run Windows PowerShell commands and may return <code>true</code> in addition to <code>0</code>.</li> <li>A block is executed as Ruby code that must return either <code>true</code> or <code>false</code>. If the block returns <code>true</code>, the guard property is applied. If the block returns <code>false</code>, the guard property is not applied.</li> </ul> <p>A guard property is useful for ensuring that a resource is idempotent by allowing that resource to test for the desired state as it is being executed, and then if the desired state is present, for Chef Infra Client to do nothing.</p> <strong>Properties</strong> <p>The following properties can be used to define a guard that is evaluated during the execution phase of a Chef Infra Client run:</p> <dl> <dt><code>not_if</code></dt> <dd> <p>Prevent a resource from executing when the condition returns <code>true</code>.</p> </dd> <dt><code>only_if</code></dt> <dd> <p>Allow a resource to execute only if the condition returns <code>true</code>.</p> </dd> </dl> <h3 id="examples-windows-desktop-screensaver">Examples</h3> <hr> <p>The following examples demonstrate various approaches for using the <strong>windows_desktop_screensaver</strong> resource in recipes:</p> <p><strong>Secure the desktop with a screensaver and password</strong>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">desktop_screensaver <span style="color:#4070a0">'Sets up a Screensaver to come on and require a password after xx minutes'</span> <span style="color:#007020;font-weight:700">do</span>
  require_password <span style="color:#007020">true</span>
  idle_time <span style="color:#40a070">20</span>
  allow_lower_user_idle_time <span style="color:#007020">false</span>
  screensaver_name <span style="color:#4070a0">'mystify.scr'</span>
  action <span style="color:#517918">:enable</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p><strong>Disable requiring a screensaver with a password</strong>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">desktop_screensaver <span style="color:#4070a0">'Disable the screensaver'</span> <span style="color:#007020;font-weight:700">do</span>
  action <span style="color:#517918">:disable</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div> <h2 id="windows-desktop-winrm-settings-resource">windows_desktop_winrm_settings resource</h2> <a href="windows_desktop_winrm_settings/index.html">windows_desktop_winrm_settings resource page</a> <hr> <p>Use the <strong>windows_desktop_winrm_settings</strong> resource to setup and teardown WinRM settings on a node. Chef Infra Client does not require this for operation.</p> <p><strong>New in Chef Infra Client 1.0.</strong></p> <h3 id="syntax-windows-desktop-winrm-settings">Syntax</h3> <hr>  <p>The full syntax for all of the properties that are available to the <strong>windows_desktop_winrm_settings</strong> resource is:</p> 
<div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">windows_desktop_winrm_settings <span style="color:#4070a0">'name'</span> <span style="color:#007020;font-weight:700">do</span>
  action      <span style="color:#60add5">Symbol</span> <span style="color:#60a0b0;font-style:italic"># defaults to :enable if not specified</span>
<span style="color:#007020;font-weight:700">end</span></code></pre></div> <p>where:</p> <ul> <li>
<code>windows_desktop_winrm_settings</code> is the resource.</li> <li>
<code>name</code> is the name given to the resource block.</li> <li>
<code>action</code> identifies which steps Chef Infra Client will take to bring the node into the desired state.</li> </ul> <h3 id="actions-windows-desktop-winrm-settings">Actions</h3> <hr> <p>The <strong>windows_desktop_winrm_settings</strong> resource has the following actions:</p> <dl> <dt><code>:disable</code></dt> <dd>Turns off WinRM and disables the firewall policy.</dd> <dt><code>:enable</code></dt> <dd>Turns on WinRM and sets a firewall policy.</dd> <dt><code>:nothing</code></dt> <dd>This resource block does not act unless notified by another resource to take action. Once notified, this resource block either runs immediately or is queued up to run at the end of a Chef Infra Client run.</dd> </dl> <h3 id="properties-windows-desktop-winrm-settings">Properties</h3> <hr> <p>This resource does not have any properties.</p> <br> <h3 id="functionality-windows-desktop-winrm-settings">Common Resource Functionality</h3> <hr> <p>Chef resources include common properties, notifications, and resource guards.</p> <h4 id="common-properties-windows-desktop-winrm-settings">Common Properties</h4> <p>The following properties are common to every resource:</p> <dl> <dt><code>compile_time</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Control the phase during which the resource is run on the node. Set to true to run while the resource collection is being built (the <code>compile phase</code>). Set to false to run while Chef Infra Client is configuring the node (the <code>converge phase</code>).</p> </dd> <dt><code>ignore_failure</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false, :quiet | <strong>Default Value:</strong> <code>false</code></p> <p>Continue running a recipe if a resource fails for any reason. <code>:quiet</code> will not display the full stack trace and the recipe will continue to run if a resource fails.</p> </dd> <dt><code>retries</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>0</code></p> <p>The number of attempts to catch exceptions and retry the resource.</p> </dd> <dt><code>retry_delay</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>2</code></p> <p>The delay in seconds between retry attempts.</p> </dd> <dt><code>sensitive</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Ensure that sensitive resource data is not logged by Chef Infra Client.</p> </dd> </dl> <h4 id="common-notifications-windows-desktop-winrm-settings">Notifications</h4> <dl> <dt> <code>notifies</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> <p>A resource may notify another resource to take action when its state changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> that resource should take, and then the <code>:timer</code> for that action. A resource may notify more than one resource; use a <code>notifies</code> statement for each resource to be notified.</p> <p>If the referenced resource does not exist, an error is raised. In contrast, <code>subscribes</code> will not fail if the source resource is not found.</p> </dd> </dl> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>notifies</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">notifies <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <dl> <dt> <code>subscribes</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> </dd> </dl> <p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> to be taken, and then the <code>:timer</code> for that action.</p> <p>Note that <code>subscribes</code> does not apply the specified action to the resource that it listens to - for example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">file <span style="color:#4070a0">'/etc/nginx/ssl/example.crt'</span> <span style="color:#007020;font-weight:700">do</span>
  mode <span style="color:#4070a0">'0600'</span>
  owner <span style="color:#4070a0">'root'</span>
<span style="color:#007020;font-weight:700">end</span>

service <span style="color:#4070a0">'nginx'</span> <span style="color:#007020;font-weight:700">do</span>
  subscribes <span style="color:#517918">:reload</span>, <span style="color:#4070a0">'file[/etc/nginx/ssl/example.crt]'</span>, <span style="color:#517918">:immediately</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p>In this case the <code>subscribes</code> property reloads the <code>nginx</code> service whenever its certificate file, located under <code>/etc/nginx/ssl/example.crt</code>, is updated. <code>subscribes</code> does not make any changes to the certificate file itself, it merely listens for a change to the file, and executes the <code>:reload</code> action for its resource (in this example <code>nginx</code>) when a change is detected.</p> <p>If the other resource does not exist, the subscription will not raise an error. Contrast this with the stricter semantics of <code>notifies</code>, which will raise an error if the other resource does not exist.</p> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>subscribes</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">subscribes <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <h4 id="guards-windows-desktop-winrm-settings">Guards</h4> <p>A guard property can be used to evaluate the state of a node during the execution phase of a Chef Infra Client run. Based on the results of this evaluation, a guard property is then used to tell Chef Infra Client if it should continue executing a resource. A guard property accepts either a string value or a Ruby block value:</p> <ul> <li>A string is executed as a shell command. If the command returns <code>0</code>, the guard is applied. If the command returns any other value, then the guard property is not applied. String guards in a <strong>powershell_script</strong> run Windows PowerShell commands and may return <code>true</code> in addition to <code>0</code>.</li> <li>A block is executed as Ruby code that must return either <code>true</code> or <code>false</code>. If the block returns <code>true</code>, the guard property is applied. If the block returns <code>false</code>, the guard property is not applied.</li> </ul> <p>A guard property is useful for ensuring that a resource is idempotent by allowing that resource to test for the desired state as it is being executed, and then if the desired state is present, for Chef Infra Client to do nothing.</p> <strong>Properties</strong> <p>The following properties can be used to define a guard that is evaluated during the execution phase of a Chef Infra Client run:</p> <dl> <dt><code>not_if</code></dt> <dd> <p>Prevent a resource from executing when the condition returns <code>true</code>.</p> </dd> <dt><code>only_if</code></dt> <dd> <p>Allow a resource to execute only if the condition returns <code>true</code>.</p> </dd> </dl> <h3 id="examples-windows-desktop-winrm-settings">Examples</h3> <hr> <p>The following examples demonstrate various approaches for using the <strong>windows_desktop_winrm_settings</strong> resource in recipes:</p> <p><strong>Turn WinRM On</strong>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">windows_desktop_winrm_settings <span style="color:#4070a0">'Settings to enable WinRM on a node for desktop-config'</span> <span style="color:#007020;font-weight:700">do</span>
  action <span style="color:#517918">:enable</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p><strong>Turn WinRM Off</strong>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">windows_desktop_winrm_settings <span style="color:#4070a0">'Settings to disable WinRM on a node for desktop-config'</span> <span style="color:#007020;font-weight:700">do</span>
  action <span style="color:#517918">:disable</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div> <h2 id="windows-disk-encryption-resource">windows_disk_encryption resource</h2> <a href="windows_disk_encryption/index.html">windows_disk_encryption resource page</a> <hr> <p>Use the <strong>windows_disk_encryption</strong> resource to enable or disable BitLocker Drive Encryption on Windows systems.</p> <p><strong>New in Chef Infra Client 1.0.</strong></p> <h3 id="syntax-windows-disk-encryption">Syntax</h3> <hr>  <p>The full syntax for all of the properties that are available to the <strong>windows_disk_encryption</strong> resource is:</p> 
<div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">windows_disk_encryption <span style="color:#4070a0">'name'</span> <span style="color:#007020;font-weight:700">do</span>
  reboot_after_update      <span style="color:#007020">true</span>, <span style="color:#007020">false</span> <span style="color:#60a0b0;font-style:italic"># default value: true</span>
  action                   <span style="color:#60add5">Symbol</span> <span style="color:#60a0b0;font-style:italic"># defaults to :enable if not specified</span>
<span style="color:#007020;font-weight:700">end</span></code></pre></div> <p>where:</p> <ul> <li>
<code>windows_disk_encryption</code> is the resource.</li> <li>
<code>name</code> is the name given to the resource block.</li> <li>
<code>action</code> identifies which steps Chef Infra Client will take to bring the node into the desired state.</li> <li>
<code>reboot_after_update</code> is the property available to this resource.</li> </ul> <h3 id="actions-windows-disk-encryption">Actions</h3> <hr> <p>The <strong>windows_disk_encryption</strong> resource has the following actions:</p> <dl> <dt><code>:disable</code></dt> <dd>Turns off BitLocker.</dd> <dt><code>:enable</code></dt> <dd>Turns on BitLocker.</dd> <dt><code>:nothing</code></dt> <dd>This resource block does not act unless notified by another resource to take action. Once notified, this resource block either runs immediately or is queued up to run at the end of a Chef Infra Client run.</dd> </dl> <h3 id="properties-windows-disk-encryption">Properties</h3> <hr> <p>The <strong>windows_disk_encryption</strong> resource has the following properties:</p> <dl> <dt> <code>reboot_after_update</code> </dt> <dd> <strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>true</code> <p>Control the reboot behavior after enabling BitLocker</p> <p> New in Chef Client 1.1 </p> </dd> </dl> <br> <h3 id="functionality-windows-disk-encryption">Common Resource Functionality</h3> <hr> <p>Chef resources include common properties, notifications, and resource guards.</p> <h4 id="common-properties-windows-disk-encryption">Common Properties</h4> <p>The following properties are common to every resource:</p> <dl> <dt><code>compile_time</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Control the phase during which the resource is run on the node. Set to true to run while the resource collection is being built (the <code>compile phase</code>). Set to false to run while Chef Infra Client is configuring the node (the <code>converge phase</code>).</p> </dd> <dt><code>ignore_failure</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false, :quiet | <strong>Default Value:</strong> <code>false</code></p> <p>Continue running a recipe if a resource fails for any reason. <code>:quiet</code> will not display the full stack trace and the recipe will continue to run if a resource fails.</p> </dd> <dt><code>retries</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>0</code></p> <p>The number of attempts to catch exceptions and retry the resource.</p> </dd> <dt><code>retry_delay</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>2</code></p> <p>The delay in seconds between retry attempts.</p> </dd> <dt><code>sensitive</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Ensure that sensitive resource data is not logged by Chef Infra Client.</p> </dd> </dl> <h4 id="common-notifications-windows-disk-encryption">Notifications</h4> <dl> <dt> <code>notifies</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> <p>A resource may notify another resource to take action when its state changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> that resource should take, and then the <code>:timer</code> for that action. A resource may notify more than one resource; use a <code>notifies</code> statement for each resource to be notified.</p> <p>If the referenced resource does not exist, an error is raised. In contrast, <code>subscribes</code> will not fail if the source resource is not found.</p> </dd> </dl> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>notifies</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">notifies <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <dl> <dt> <code>subscribes</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> </dd> </dl> <p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> to be taken, and then the <code>:timer</code> for that action.</p> <p>Note that <code>subscribes</code> does not apply the specified action to the resource that it listens to - for example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">file <span style="color:#4070a0">'/etc/nginx/ssl/example.crt'</span> <span style="color:#007020;font-weight:700">do</span>
  mode <span style="color:#4070a0">'0600'</span>
  owner <span style="color:#4070a0">'root'</span>
<span style="color:#007020;font-weight:700">end</span>

service <span style="color:#4070a0">'nginx'</span> <span style="color:#007020;font-weight:700">do</span>
  subscribes <span style="color:#517918">:reload</span>, <span style="color:#4070a0">'file[/etc/nginx/ssl/example.crt]'</span>, <span style="color:#517918">:immediately</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p>In this case the <code>subscribes</code> property reloads the <code>nginx</code> service whenever its certificate file, located under <code>/etc/nginx/ssl/example.crt</code>, is updated. <code>subscribes</code> does not make any changes to the certificate file itself, it merely listens for a change to the file, and executes the <code>:reload</code> action for its resource (in this example <code>nginx</code>) when a change is detected.</p> <p>If the other resource does not exist, the subscription will not raise an error. Contrast this with the stricter semantics of <code>notifies</code>, which will raise an error if the other resource does not exist.</p> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>subscribes</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">subscribes <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <h4 id="guards-windows-disk-encryption">Guards</h4> <p>A guard property can be used to evaluate the state of a node during the execution phase of a Chef Infra Client run. Based on the results of this evaluation, a guard property is then used to tell Chef Infra Client if it should continue executing a resource. A guard property accepts either a string value or a Ruby block value:</p> <ul> <li>A string is executed as a shell command. If the command returns <code>0</code>, the guard is applied. If the command returns any other value, then the guard property is not applied. String guards in a <strong>powershell_script</strong> run Windows PowerShell commands and may return <code>true</code> in addition to <code>0</code>.</li> <li>A block is executed as Ruby code that must return either <code>true</code> or <code>false</code>. If the block returns <code>true</code>, the guard property is applied. If the block returns <code>false</code>, the guard property is not applied.</li> </ul> <p>A guard property is useful for ensuring that a resource is idempotent by allowing that resource to test for the desired state as it is being executed, and then if the desired state is present, for Chef Infra Client to do nothing.</p> <strong>Properties</strong> <p>The following properties can be used to define a guard that is evaluated during the execution phase of a Chef Infra Client run:</p> <dl> <dt><code>not_if</code></dt> <dd> <p>Prevent a resource from executing when the condition returns <code>true</code>.</p> </dd> <dt><code>only_if</code></dt> <dd> <p>Allow a resource to execute only if the condition returns <code>true</code>.</p> </dd> </dl> <h3 id="examples-windows-disk-encryption">Examples</h3> <hr> <p>The following examples demonstrate various approaches for using the <strong>windows_disk_encryption</strong> resource in recipes:</p> <p><strong>Enable BitLocker</strong>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">disk_encryption <span style="color:#4070a0">'Turns on BitLocker Drive Encryption'</span> <span style="color:#007020;font-weight:700">do</span>
  action <span style="color:#517918">:enable</span>
  reboot_after_update <span style="color:#007020">true</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div> <h2 id="windows-firewall-resource">windows_firewall resource</h2> <a href="windows_firewall/index.html">windows_firewall resource page</a> <hr> <p>Use the <strong>windows_firewall</strong> resource to enable or disable the Windows firewall service and all profiles.</p> <p><strong>New in Chef Infra Client 1.0.</strong></p> <h3 id="syntax-windows-firewall">Syntax</h3> <hr>  <p>The full syntax for all of the properties that are available to the <strong>windows_firewall</strong> resource is:</p> 
<div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">windows_firewall <span style="color:#4070a0">'name'</span> <span style="color:#007020;font-weight:700">do</span>
  action      <span style="color:#60add5">Symbol</span> <span style="color:#60a0b0;font-style:italic"># defaults to :enable if not specified</span>
<span style="color:#007020;font-weight:700">end</span></code></pre></div> <p>where:</p> <ul> <li>
<code>windows_firewall</code> is the resource.</li> <li>
<code>name</code> is the name given to the resource block.</li> <li>
<code>action</code> identifies which steps Chef Infra Client will take to bring the node into the desired state.</li> </ul> <h3 id="actions-windows-firewall">Actions</h3> <hr> <p>The <strong>windows_firewall</strong> resource has the following actions:</p> <dl> <dt><code>:disable</code></dt> <dd>Disable the Windows Firewall service</dd> <dt><code>:enable</code></dt> <dd>Enable the Windows Firewall service and all profiles</dd> <dt><code>:nothing</code></dt> <dd>This resource block does not act unless notified by another resource to take action. Once notified, this resource block either runs immediately or is queued up to run at the end of a Chef Infra Client run.</dd> </dl> <h3 id="properties-windows-firewall">Properties</h3> <hr> <p>This resource does not have any properties.</p> <br> <h3 id="functionality-windows-firewall">Common Resource Functionality</h3> <hr> <p>Chef resources include common properties, notifications, and resource guards.</p> <h4 id="common-properties-windows-firewall">Common Properties</h4> <p>The following properties are common to every resource:</p> <dl> <dt><code>compile_time</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Control the phase during which the resource is run on the node. Set to true to run while the resource collection is being built (the <code>compile phase</code>). Set to false to run while Chef Infra Client is configuring the node (the <code>converge phase</code>).</p> </dd> <dt><code>ignore_failure</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false, :quiet | <strong>Default Value:</strong> <code>false</code></p> <p>Continue running a recipe if a resource fails for any reason. <code>:quiet</code> will not display the full stack trace and the recipe will continue to run if a resource fails.</p> </dd> <dt><code>retries</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>0</code></p> <p>The number of attempts to catch exceptions and retry the resource.</p> </dd> <dt><code>retry_delay</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>2</code></p> <p>The delay in seconds between retry attempts.</p> </dd> <dt><code>sensitive</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Ensure that sensitive resource data is not logged by Chef Infra Client.</p> </dd> </dl> <h4 id="common-notifications-windows-firewall">Notifications</h4> <dl> <dt> <code>notifies</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> <p>A resource may notify another resource to take action when its state changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> that resource should take, and then the <code>:timer</code> for that action. A resource may notify more than one resource; use a <code>notifies</code> statement for each resource to be notified.</p> <p>If the referenced resource does not exist, an error is raised. In contrast, <code>subscribes</code> will not fail if the source resource is not found.</p> </dd> </dl> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>notifies</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">notifies <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <dl> <dt> <code>subscribes</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> </dd> </dl> <p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> to be taken, and then the <code>:timer</code> for that action.</p> <p>Note that <code>subscribes</code> does not apply the specified action to the resource that it listens to - for example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">file <span style="color:#4070a0">'/etc/nginx/ssl/example.crt'</span> <span style="color:#007020;font-weight:700">do</span>
  mode <span style="color:#4070a0">'0600'</span>
  owner <span style="color:#4070a0">'root'</span>
<span style="color:#007020;font-weight:700">end</span>

service <span style="color:#4070a0">'nginx'</span> <span style="color:#007020;font-weight:700">do</span>
  subscribes <span style="color:#517918">:reload</span>, <span style="color:#4070a0">'file[/etc/nginx/ssl/example.crt]'</span>, <span style="color:#517918">:immediately</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p>In this case the <code>subscribes</code> property reloads the <code>nginx</code> service whenever its certificate file, located under <code>/etc/nginx/ssl/example.crt</code>, is updated. <code>subscribes</code> does not make any changes to the certificate file itself, it merely listens for a change to the file, and executes the <code>:reload</code> action for its resource (in this example <code>nginx</code>) when a change is detected.</p> <p>If the other resource does not exist, the subscription will not raise an error. Contrast this with the stricter semantics of <code>notifies</code>, which will raise an error if the other resource does not exist.</p> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>subscribes</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">subscribes <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <h4 id="guards-windows-firewall">Guards</h4> <p>A guard property can be used to evaluate the state of a node during the execution phase of a Chef Infra Client run. Based on the results of this evaluation, a guard property is then used to tell Chef Infra Client if it should continue executing a resource. A guard property accepts either a string value or a Ruby block value:</p> <ul> <li>A string is executed as a shell command. If the command returns <code>0</code>, the guard is applied. If the command returns any other value, then the guard property is not applied. String guards in a <strong>powershell_script</strong> run Windows PowerShell commands and may return <code>true</code> in addition to <code>0</code>.</li> <li>A block is executed as Ruby code that must return either <code>true</code> or <code>false</code>. If the block returns <code>true</code>, the guard property is applied. If the block returns <code>false</code>, the guard property is not applied.</li> </ul> <p>A guard property is useful for ensuring that a resource is idempotent by allowing that resource to test for the desired state as it is being executed, and then if the desired state is present, for Chef Infra Client to do nothing.</p> <strong>Properties</strong> <p>The following properties can be used to define a guard that is evaluated during the execution phase of a Chef Infra Client run:</p> <dl> <dt><code>not_if</code></dt> <dd> <p>Prevent a resource from executing when the condition returns <code>true</code>.</p> </dd> <dt><code>only_if</code></dt> <dd> <p>Allow a resource to execute only if the condition returns <code>true</code>.</p> </dd> </dl> <h3 id="examples-windows-firewall">Examples</h3> <hr> <p>The following examples demonstrate various approaches for using the <strong>windows_firewall</strong> resource in recipes:</p> <p><strong>Set the Windows firewall</strong>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">windows_firewall <span style="color:#4070a0">'Enable the node firewall'</span> <span style="color:#007020;font-weight:700">do</span>
  action <span style="color:#517918">:enable</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div> <h2 id="windows-ie-esc-resource">windows_ie_esc resource</h2> <a href="windows_ie_esc/index.html">windows_ie_esc resource page</a> <hr> <p>Use the <strong>windows_ie_esc</strong> resource to adjust the Internet Explorer extensibility and security settings.</p> <p><strong>New in Chef Infra Client 2.0.</strong></p> <h3 id="syntax-windows-ie-esc">Syntax</h3> <hr>  <p>The full syntax for all of the properties that are available to the <strong>windows_ie_esc</strong> resource is:</p> 
<div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">windows_ie_esc <span style="color:#4070a0">'name'</span> <span style="color:#007020;font-weight:700">do</span>
  scopes      <span style="color:#007020">Array</span>
  action      <span style="color:#60add5">Symbol</span> <span style="color:#60a0b0;font-style:italic"># defaults to :enable if not specified</span>
<span style="color:#007020;font-weight:700">end</span></code></pre></div> <p>where:</p> <ul> <li>
<code>windows_ie_esc</code> is the resource.</li> <li>
<code>name</code> is the name given to the resource block.</li> <li>
<code>action</code> identifies which steps Chef Infra Client will take to bring the node into the desired state.</li> <li>
<code>scopes</code> is the property available to this resource.</li> </ul> <h3 id="actions-windows-ie-esc">Actions</h3> <hr> <p>The <strong>windows_ie_esc</strong> resource has the following actions:</p> <dl> <dt><code>:disable</code></dt> <dd>Disable Internet Explorer extensibility and security settings for scoped users.</dd> <dt><code>:enable</code></dt> <dd>Enable Internet Explorer extensibility and security settings for scoped users (default).</dd> <dt><code>:nothing</code></dt> <dd>This resource block does not act unless notified by another resource to take action. Once notified, this resource block either runs immediately or is queued up to run at the end of a Chef Infra Client run.</dd> </dl> <h3 id="properties-windows-ie-esc">Properties</h3> <hr> <p>The <strong>windows_ie_esc</strong> resource has the following properties:</p> <dl> <dt> <code>scopes</code> </dt> <dd> <strong>Ruby Type:</strong> Array | <code>REQUIRED</code> <p>Windows user scopes targeted by this security config</p> </dd> </dl> <br> <h3 id="functionality-windows-ie-esc">Common Resource Functionality</h3> <hr> <p>Chef resources include common properties, notifications, and resource guards.</p> <h4 id="common-properties-windows-ie-esc">Common Properties</h4> <p>The following properties are common to every resource:</p> <dl> <dt><code>compile_time</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Control the phase during which the resource is run on the node. Set to true to run while the resource collection is being built (the <code>compile phase</code>). Set to false to run while Chef Infra Client is configuring the node (the <code>converge phase</code>).</p> </dd> <dt><code>ignore_failure</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false, :quiet | <strong>Default Value:</strong> <code>false</code></p> <p>Continue running a recipe if a resource fails for any reason. <code>:quiet</code> will not display the full stack trace and the recipe will continue to run if a resource fails.</p> </dd> <dt><code>retries</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>0</code></p> <p>The number of attempts to catch exceptions and retry the resource.</p> </dd> <dt><code>retry_delay</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>2</code></p> <p>The delay in seconds between retry attempts.</p> </dd> <dt><code>sensitive</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Ensure that sensitive resource data is not logged by Chef Infra Client.</p> </dd> </dl> <h4 id="common-notifications-windows-ie-esc">Notifications</h4> <dl> <dt> <code>notifies</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> <p>A resource may notify another resource to take action when its state changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> that resource should take, and then the <code>:timer</code> for that action. A resource may notify more than one resource; use a <code>notifies</code> statement for each resource to be notified.</p> <p>If the referenced resource does not exist, an error is raised. In contrast, <code>subscribes</code> will not fail if the source resource is not found.</p> </dd> </dl> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>notifies</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">notifies <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <dl> <dt> <code>subscribes</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> </dd> </dl> <p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> to be taken, and then the <code>:timer</code> for that action.</p> <p>Note that <code>subscribes</code> does not apply the specified action to the resource that it listens to - for example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">file <span style="color:#4070a0">'/etc/nginx/ssl/example.crt'</span> <span style="color:#007020;font-weight:700">do</span>
  mode <span style="color:#4070a0">'0600'</span>
  owner <span style="color:#4070a0">'root'</span>
<span style="color:#007020;font-weight:700">end</span>

service <span style="color:#4070a0">'nginx'</span> <span style="color:#007020;font-weight:700">do</span>
  subscribes <span style="color:#517918">:reload</span>, <span style="color:#4070a0">'file[/etc/nginx/ssl/example.crt]'</span>, <span style="color:#517918">:immediately</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p>In this case the <code>subscribes</code> property reloads the <code>nginx</code> service whenever its certificate file, located under <code>/etc/nginx/ssl/example.crt</code>, is updated. <code>subscribes</code> does not make any changes to the certificate file itself, it merely listens for a change to the file, and executes the <code>:reload</code> action for its resource (in this example <code>nginx</code>) when a change is detected.</p> <p>If the other resource does not exist, the subscription will not raise an error. Contrast this with the stricter semantics of <code>notifies</code>, which will raise an error if the other resource does not exist.</p> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>subscribes</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">subscribes <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <h4 id="guards-windows-ie-esc">Guards</h4> <p>A guard property can be used to evaluate the state of a node during the execution phase of a Chef Infra Client run. Based on the results of this evaluation, a guard property is then used to tell Chef Infra Client if it should continue executing a resource. A guard property accepts either a string value or a Ruby block value:</p> <ul> <li>A string is executed as a shell command. If the command returns <code>0</code>, the guard is applied. If the command returns any other value, then the guard property is not applied. String guards in a <strong>powershell_script</strong> run Windows PowerShell commands and may return <code>true</code> in addition to <code>0</code>.</li> <li>A block is executed as Ruby code that must return either <code>true</code> or <code>false</code>. If the block returns <code>true</code>, the guard property is applied. If the block returns <code>false</code>, the guard property is not applied.</li> </ul> <p>A guard property is useful for ensuring that a resource is idempotent by allowing that resource to test for the desired state as it is being executed, and then if the desired state is present, for Chef Infra Client to do nothing.</p> <strong>Properties</strong> <p>The following properties can be used to define a guard that is evaluated during the execution phase of a Chef Infra Client run:</p> <dl> <dt><code>not_if</code></dt> <dd> <p>Prevent a resource from executing when the condition returns <code>true</code>.</p> </dd> <dt><code>only_if</code></dt> <dd> <p>Allow a resource to execute only if the condition returns <code>true</code>.</p> </dd> </dl> <h3 id="examples-windows-ie-esc">Examples</h3> <hr> <p>The following examples demonstrate various approaches for using the <strong>windows_ie_esc</strong> resource in recipes:</p> <p><strong>Turns off Internet Explorer ESC</strong>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">windows_ie_esc <span style="color:#4070a0">'Turn off Internet Explorer ESC for admin'</span> <span style="color:#007020;font-weight:700">do</span>
  scopes <span style="color:#666">[</span><span style="color:#517918">:admin</span><span style="color:#666">]</span>
  action <span style="color:#517918">:disable</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p><strong>Turns on Internet Explorer ESC to reduce risks from exposure to websites</strong>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">windows_ie_esc <span style="color:#4070a0">'Enforce Internet Explorer ESC for all user scopes'</span> <span style="color:#007020;font-weight:700">do</span>
  scopes <span style="color:#666">[</span><span style="color:#517918">:admin</span>, <span style="color:#517918">:user</span><span style="color:#666">]</span>
  action <span style="color:#517918">:enable</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div> <h2 id="windows-password-policy-resource">windows_password_policy resource</h2> <a href="windows_password_policy/index.html">windows_password_policy resource page</a> <hr> <p>Use the <strong>windows_password_policy</strong> resource to setup password complexity, password length, etc.</p> <p><strong>New in Chef Infra Client 1.0.</strong></p> <h3 id="syntax-windows-password-policy">Syntax</h3> <hr>  <p>The full syntax for all of the properties that are available to the <strong>windows_password_policy</strong> resource is:</p> 
<div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">windows_password_policy <span style="color:#4070a0">'name'</span> <span style="color:#007020;font-weight:700">do</span>
  change_password_at_next_logon              <span style="color:#007020">true</span>, <span style="color:#007020">false</span> <span style="color:#60a0b0;font-style:italic"># default value: false</span>
  group_name_for_expired_passwords           <span style="color:#007020">String</span> <span style="color:#60a0b0;font-style:italic"># default value: "Users"</span>
  group_name_for_password_never_expires      <span style="color:#007020">String</span> <span style="color:#60a0b0;font-style:italic"># default value: "Administrators"</span>
  maximum_password_age                       <span style="color:#007020">Integer</span> <span style="color:#60a0b0;font-style:italic"># default value: 365</span>
  minimum_password_length                    <span style="color:#007020">Integer</span> <span style="color:#60a0b0;font-style:italic"># default value: 12</span>
  password_never_expires                     <span style="color:#007020">true</span>, <span style="color:#007020">false</span>
  require_complex_passwords                  <span style="color:#007020">true</span>, <span style="color:#007020">false</span> <span style="color:#60a0b0;font-style:italic"># default value: true</span>
  action                                     <span style="color:#60add5">Symbol</span> <span style="color:#60a0b0;font-style:italic"># defaults to :set if not specified</span>
<span style="color:#007020;font-weight:700">end</span></code></pre></div> <p>where:</p> <ul> <li>
<code>windows_password_policy</code> is the resource.</li> <li>
<code>name</code> is the name given to the resource block.</li> <li>
<code>action</code> identifies which steps Chef Infra Client will take to bring the node into the desired state.</li> <li>
<code>change_password_at_next_logon</code>, <code>group_name_for_expired_passwords</code>, <code>group_name_for_password_never_expires</code>, <code>maximum_password_age</code>, <code>minimum_password_length</code>, <code>password_never_expires</code>, and <code>require_complex_passwords</code> are the properties available to this resource.</li> </ul> <h3 id="actions-windows-password-policy">Actions</h3> <hr> <p>The <strong>windows_password_policy</strong> resource has the following actions:</p> <dl> <dt><code>:nothing</code></dt> <dd>This resource block does not act unless notified by another resource to take action. Once notified, this resource block either runs immediately or is queued up to run at the end of a Chef Infra Client run.</dd> <dt><code>:set</code></dt> <dd>Sets the password policy using the properties.</dd> </dl> <h3 id="properties-windows-password-policy">Properties</h3> <hr> <p>The <strong>windows_password_policy</strong> resource has the following properties:</p> <dl> <dt> <code>change_password_at_next_logon</code> </dt> <dd> <strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code> <p>Force all users in a local user group to change passwords at next logon</p> </dd> </dl> <dl> <dt> <code>group_name_for_expired_passwords</code> </dt> <dd> <strong>Ruby Type:</strong> String | <strong>Default Value:</strong> <code>Users</code> <p>The group whose passwords were just to change at the next login</p> </dd> </dl> <dl> <dt> <code>group_name_for_password_never_expires</code> </dt> <dd> <strong>Ruby Type:</strong> String | <strong>Default Value:</strong> <code>Administrators</code> <p>The group to which the password_never_expires rule applies. Defaults to Admins</p> </dd> </dl> <dl> <dt> <code>maximum_password_age</code> </dt> <dd> <strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>365</code> <p>The maximum age in days for a password before it must be changed, defaults to 365</p> </dd> </dl> <dl> <dt> <code>minimum_password_length</code> </dt> <dd> <strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>12</code> <p>Sets the minimum password length, defaults to 12 Characters</p> </dd> </dl> <dl> <dt> <code>password_never_expires</code> </dt> <dd> <strong>Ruby Type:</strong> true, false <p>True/False to never expire the passwords, set to True by default</p> </dd> </dl> <dl> <dt> <code>require_complex_passwords</code> </dt> <dd> <strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>true</code> <p>A True/False option to require special characters, upper, lower, etc in the password</p> </dd> </dl> <br> <h3 id="functionality-windows-password-policy">Common Resource Functionality</h3> <hr> <p>Chef resources include common properties, notifications, and resource guards.</p> <h4 id="common-properties-windows-password-policy">Common Properties</h4> <p>The following properties are common to every resource:</p> <dl> <dt><code>compile_time</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Control the phase during which the resource is run on the node. Set to true to run while the resource collection is being built (the <code>compile phase</code>). Set to false to run while Chef Infra Client is configuring the node (the <code>converge phase</code>).</p> </dd> <dt><code>ignore_failure</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false, :quiet | <strong>Default Value:</strong> <code>false</code></p> <p>Continue running a recipe if a resource fails for any reason. <code>:quiet</code> will not display the full stack trace and the recipe will continue to run if a resource fails.</p> </dd> <dt><code>retries</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>0</code></p> <p>The number of attempts to catch exceptions and retry the resource.</p> </dd> <dt><code>retry_delay</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>2</code></p> <p>The delay in seconds between retry attempts.</p> </dd> <dt><code>sensitive</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Ensure that sensitive resource data is not logged by Chef Infra Client.</p> </dd> </dl> <h4 id="common-notifications-windows-password-policy">Notifications</h4> <dl> <dt> <code>notifies</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> <p>A resource may notify another resource to take action when its state changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> that resource should take, and then the <code>:timer</code> for that action. A resource may notify more than one resource; use a <code>notifies</code> statement for each resource to be notified.</p> <p>If the referenced resource does not exist, an error is raised. In contrast, <code>subscribes</code> will not fail if the source resource is not found.</p> </dd> </dl> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>notifies</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">notifies <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <dl> <dt> <code>subscribes</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> </dd> </dl> <p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> to be taken, and then the <code>:timer</code> for that action.</p> <p>Note that <code>subscribes</code> does not apply the specified action to the resource that it listens to - for example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">file <span style="color:#4070a0">'/etc/nginx/ssl/example.crt'</span> <span style="color:#007020;font-weight:700">do</span>
  mode <span style="color:#4070a0">'0600'</span>
  owner <span style="color:#4070a0">'root'</span>
<span style="color:#007020;font-weight:700">end</span>

service <span style="color:#4070a0">'nginx'</span> <span style="color:#007020;font-weight:700">do</span>
  subscribes <span style="color:#517918">:reload</span>, <span style="color:#4070a0">'file[/etc/nginx/ssl/example.crt]'</span>, <span style="color:#517918">:immediately</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p>In this case the <code>subscribes</code> property reloads the <code>nginx</code> service whenever its certificate file, located under <code>/etc/nginx/ssl/example.crt</code>, is updated. <code>subscribes</code> does not make any changes to the certificate file itself, it merely listens for a change to the file, and executes the <code>:reload</code> action for its resource (in this example <code>nginx</code>) when a change is detected.</p> <p>If the other resource does not exist, the subscription will not raise an error. Contrast this with the stricter semantics of <code>notifies</code>, which will raise an error if the other resource does not exist.</p> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>subscribes</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">subscribes <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <h4 id="guards-windows-password-policy">Guards</h4> <p>A guard property can be used to evaluate the state of a node during the execution phase of a Chef Infra Client run. Based on the results of this evaluation, a guard property is then used to tell Chef Infra Client if it should continue executing a resource. A guard property accepts either a string value or a Ruby block value:</p> <ul> <li>A string is executed as a shell command. If the command returns <code>0</code>, the guard is applied. If the command returns any other value, then the guard property is not applied. String guards in a <strong>powershell_script</strong> run Windows PowerShell commands and may return <code>true</code> in addition to <code>0</code>.</li> <li>A block is executed as Ruby code that must return either <code>true</code> or <code>false</code>. If the block returns <code>true</code>, the guard property is applied. If the block returns <code>false</code>, the guard property is not applied.</li> </ul> <p>A guard property is useful for ensuring that a resource is idempotent by allowing that resource to test for the desired state as it is being executed, and then if the desired state is present, for Chef Infra Client to do nothing.</p> <strong>Properties</strong> <p>The following properties can be used to define a guard that is evaluated during the execution phase of a Chef Infra Client run:</p> <dl> <dt><code>not_if</code></dt> <dd> <p>Prevent a resource from executing when the condition returns <code>true</code>.</p> </dd> <dt><code>only_if</code></dt> <dd> <p>Allow a resource to execute only if the condition returns <code>true</code>.</p> </dd> </dl> <h3 id="examples-windows-password-policy">Examples</h3> <hr> <p>The following examples demonstrate various approaches for using the <strong>windows_password_policy</strong> resource in recipes:</p> <p><strong>Configure the local password policy</strong>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">windows_password_policy <span style="color:#4070a0">'Settings for password complexity, length and duration'</span> <span style="color:#007020;font-weight:700">do</span>
  require_complex_passwords <span style="color:#007020">true</span>
  minimum_password_length <span style="color:#40a070">12</span>
  maximum_password_age <span style="color:#40a070">365</span>
  action <span style="color:#517918">:set</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div> <h2 id="windows-power-management-resource">windows_power_management resource</h2> <a href="windows_power_management/index.html">windows_power_management resource page</a> <hr> <p>Use the <strong>windows_power_management</strong> resource to set the power settings of a kiosk-style device when you need it always-on</p> <p><strong>New in Chef Infra Client 1.0.</strong></p> <h3 id="syntax-windows-power-management">Syntax</h3> <hr>  <p>The full syntax for all of the properties that are available to the <strong>windows_power_management</strong> resource is:</p> 
<div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">windows_power_management <span style="color:#4070a0">'name'</span> <span style="color:#007020;font-weight:700">do</span>
  disk_timeout            <span style="color:#007020">Integer</span>
  hibernate_timeout       <span style="color:#007020">Integer</span>
  monitor_timeout         <span style="color:#007020">Integer</span>
  power_level             <span style="color:#007020">String</span> <span style="color:#60a0b0;font-style:italic"># default value: "balanced"</span>
  power_scheme_label      <span style="color:#007020">String</span>
  standby_timeout         <span style="color:#007020">Integer</span>
  action                  <span style="color:#60add5">Symbol</span> <span style="color:#60a0b0;font-style:italic"># defaults to :set if not specified</span>
<span style="color:#007020;font-weight:700">end</span></code></pre></div> <p>where:</p> <ul> <li>
<code>windows_power_management</code> is the resource.</li> <li>
<code>name</code> is the name given to the resource block.</li> <li>
<code>action</code> identifies which steps Chef Infra Client will take to bring the node into the desired state.</li> <li>
<code>disk_timeout</code>, <code>hibernate_timeout</code>, <code>monitor_timeout</code>, <code>power_level</code>, <code>power_scheme_label</code>, and <code>standby_timeout</code> are the properties available to this resource.</li> </ul> <h3 id="actions-windows-power-management">Actions</h3> <hr> <p>The <strong>windows_power_management</strong> resource has the following actions:</p> <dl> <dt><code>:nothing</code></dt> <dd>This resource block does not act unless notified by another resource to take action. Once notified, this resource block either runs immediately or is queued up to run at the end of a Chef Infra Client run.</dd> <dt><code>:set</code></dt> <dd>Set the power scheme on a node to ‘balanced’ or ‘ultimate’.</dd> </dl> <h3 id="properties-windows-power-management">Properties</h3> <hr> <p>The <strong>windows_power_management</strong> resource has the following properties:</p> <dl> <dt> <code>disk_timeout</code> </dt> <dd> <strong>Ruby Type:</strong> Integer <p>The amount of time in minutes to wait before turning off the HD</p> </dd> </dl> <dl> <dt> <code>hibernate_timeout</code> </dt> <dd> <strong>Ruby Type:</strong> Integer <p>The amount of time in minutes to wait before hibernating the system</p> </dd> </dl> <dl> <dt> <code>monitor_timeout</code> </dt> <dd> <strong>Ruby Type:</strong> Integer <p>The amount of time in minutes to wait before turning off the display</p> </dd> </dl> <dl> <dt> <code>power_level</code> </dt> <dd> <strong>Ruby Type:</strong> String | <strong>Default Value:</strong> <code>balanced</code> <p>There are 2 levels of power - balanced, and ultimate.</p> </dd> </dl> <dl> <dt> <code>power_scheme_label</code> </dt> <dd> <strong>Ruby Type:</strong> String <p>A label name to prefix your power scheme with. The code duplicates the existing power scheme to keep it distinct</p> </dd> </dl> <dl> <dt> <code>standby_timeout</code> </dt> <dd> <strong>Ruby Type:</strong> Integer <p>The amount of time in minutes to wait before putting the system into standby</p> </dd> </dl> <br> <h3 id="functionality-windows-power-management">Common Resource Functionality</h3> <hr> <p>Chef resources include common properties, notifications, and resource guards.</p> <h4 id="common-properties-windows-power-management">Common Properties</h4> <p>The following properties are common to every resource:</p> <dl> <dt><code>compile_time</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Control the phase during which the resource is run on the node. Set to true to run while the resource collection is being built (the <code>compile phase</code>). Set to false to run while Chef Infra Client is configuring the node (the <code>converge phase</code>).</p> </dd> <dt><code>ignore_failure</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false, :quiet | <strong>Default Value:</strong> <code>false</code></p> <p>Continue running a recipe if a resource fails for any reason. <code>:quiet</code> will not display the full stack trace and the recipe will continue to run if a resource fails.</p> </dd> <dt><code>retries</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>0</code></p> <p>The number of attempts to catch exceptions and retry the resource.</p> </dd> <dt><code>retry_delay</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>2</code></p> <p>The delay in seconds between retry attempts.</p> </dd> <dt><code>sensitive</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Ensure that sensitive resource data is not logged by Chef Infra Client.</p> </dd> </dl> <h4 id="common-notifications-windows-power-management">Notifications</h4> <dl> <dt> <code>notifies</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> <p>A resource may notify another resource to take action when its state changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> that resource should take, and then the <code>:timer</code> for that action. A resource may notify more than one resource; use a <code>notifies</code> statement for each resource to be notified.</p> <p>If the referenced resource does not exist, an error is raised. In contrast, <code>subscribes</code> will not fail if the source resource is not found.</p> </dd> </dl> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>notifies</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">notifies <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <dl> <dt> <code>subscribes</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> </dd> </dl> <p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> to be taken, and then the <code>:timer</code> for that action.</p> <p>Note that <code>subscribes</code> does not apply the specified action to the resource that it listens to - for example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">file <span style="color:#4070a0">'/etc/nginx/ssl/example.crt'</span> <span style="color:#007020;font-weight:700">do</span>
  mode <span style="color:#4070a0">'0600'</span>
  owner <span style="color:#4070a0">'root'</span>
<span style="color:#007020;font-weight:700">end</span>

service <span style="color:#4070a0">'nginx'</span> <span style="color:#007020;font-weight:700">do</span>
  subscribes <span style="color:#517918">:reload</span>, <span style="color:#4070a0">'file[/etc/nginx/ssl/example.crt]'</span>, <span style="color:#517918">:immediately</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p>In this case the <code>subscribes</code> property reloads the <code>nginx</code> service whenever its certificate file, located under <code>/etc/nginx/ssl/example.crt</code>, is updated. <code>subscribes</code> does not make any changes to the certificate file itself, it merely listens for a change to the file, and executes the <code>:reload</code> action for its resource (in this example <code>nginx</code>) when a change is detected.</p> <p>If the other resource does not exist, the subscription will not raise an error. Contrast this with the stricter semantics of <code>notifies</code>, which will raise an error if the other resource does not exist.</p> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>subscribes</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">subscribes <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <h4 id="guards-windows-power-management">Guards</h4> <p>A guard property can be used to evaluate the state of a node during the execution phase of a Chef Infra Client run. Based on the results of this evaluation, a guard property is then used to tell Chef Infra Client if it should continue executing a resource. A guard property accepts either a string value or a Ruby block value:</p> <ul> <li>A string is executed as a shell command. If the command returns <code>0</code>, the guard is applied. If the command returns any other value, then the guard property is not applied. String guards in a <strong>powershell_script</strong> run Windows PowerShell commands and may return <code>true</code> in addition to <code>0</code>.</li> <li>A block is executed as Ruby code that must return either <code>true</code> or <code>false</code>. If the block returns <code>true</code>, the guard property is applied. If the block returns <code>false</code>, the guard property is not applied.</li> </ul> <p>A guard property is useful for ensuring that a resource is idempotent by allowing that resource to test for the desired state as it is being executed, and then if the desired state is present, for Chef Infra Client to do nothing.</p> <strong>Properties</strong> <p>The following properties can be used to define a guard that is evaluated during the execution phase of a Chef Infra Client run:</p> <dl> <dt><code>not_if</code></dt> <dd> <p>Prevent a resource from executing when the condition returns <code>true</code>.</p> </dd> <dt><code>only_if</code></dt> <dd> <p>Allow a resource to execute only if the condition returns <code>true</code>.</p> </dd> </dl> <h3 id="examples-windows-power-management">Examples</h3> <hr> <p>The following examples demonstrate various approaches for using the <strong>windows_power_management</strong> resource in recipes:</p> <p><strong>Setup a Power Management Policy</strong>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">windows_power_management <span style="color:#4070a0">'Set the Device to a defined power level'</span> <span style="color:#007020;font-weight:700">do</span>
  power_scheme_label <span style="color:#4070a0">'Unrestricted'</span>
  power_level <span style="color:#4070a0">'ultimate'</span>
  monitor_timeout <span style="color:#40a070">15</span>
  disk_timeout <span style="color:#40a070">0</span>
  standby_timeout <span style="color:#40a070">0</span>
  hibernate_timeout <span style="color:#40a070">0</span>
  action <span style="color:#517918">:set</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div> <h2 id="windows-update-settings-resource">windows_update_settings resource</h2> <a href="windows_update_settings/index.html">windows_update_settings resource page</a> <hr> <p>Use the <strong>windows_update_settings</strong> resource to manage the various Windows Update patching options.</p> <p><strong>New in Chef Infra Client 1.0.</strong></p> <h3 id="syntax-windows-update-settings">Syntax</h3> <hr>  <p>The full syntax for all of the properties that are available to the <strong>windows_update_settings</strong> resource is:</p> 
<div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">windows_update_settings <span style="color:#4070a0">'name'</span> <span style="color:#007020;font-weight:700">do</span>
  add_to_target_wsus_group                 <span style="color:#007020">true</span>, <span style="color:#007020">false</span> <span style="color:#60a0b0;font-style:italic"># default value: false</span>
  automatic_update_option                  <span style="color:#007020">Integer</span> <span style="color:#60a0b0;font-style:italic"># default value: 4</span>
  automatically_install_minor_updates      <span style="color:#007020">true</span>, <span style="color:#007020">false</span> <span style="color:#60a0b0;font-style:italic"># default value: false</span>
  block_windows_update_website             <span style="color:#007020">true</span>, <span style="color:#007020">false</span> <span style="color:#60a0b0;font-style:italic"># default value: false</span>
  custom_detection_frequency               <span style="color:#007020">Integer</span> <span style="color:#60a0b0;font-style:italic"># default value: 22</span>
  disable_automatic_updates                <span style="color:#007020">true</span>, <span style="color:#007020">false</span> <span style="color:#60a0b0;font-style:italic"># default value: false</span>
  disable_os_upgrades                      <span style="color:#007020">true</span>, <span style="color:#007020">false</span> <span style="color:#60a0b0;font-style:italic"># default value: false</span>
  elevate_non_admins                       <span style="color:#007020">true</span>, <span style="color:#007020">false</span> <span style="color:#60a0b0;font-style:italic"># default value: true</span>
  enable_detection_frequency               <span style="color:#007020">true</span>, <span style="color:#007020">false</span> <span style="color:#60a0b0;font-style:italic"># default value: false</span>
  no_reboot_with_users_logged_on           <span style="color:#007020">true</span>, <span style="color:#007020">false</span> <span style="color:#60a0b0;font-style:italic"># default value: true</span>
  scheduled_install_day                    <span style="color:#007020">String</span> <span style="color:#60a0b0;font-style:italic"># default value: "Everyday"</span>
  scheduled_install_hour                   <span style="color:#007020">Integer</span>
  target_wsus_group_name                   <span style="color:#007020">String</span>
  update_other_ms_products                 <span style="color:#007020">true</span>, <span style="color:#007020">false</span> <span style="color:#60a0b0;font-style:italic"># default value: true</span>
  use_custom_update_server                 <span style="color:#007020">true</span>, <span style="color:#007020">false</span> <span style="color:#60a0b0;font-style:italic"># default value: false</span>
  wsus_server_url                          <span style="color:#007020">String</span>
  wsus_status_server_url                   <span style="color:#007020">String</span>
  action                                   <span style="color:#60add5">Symbol</span> <span style="color:#60a0b0;font-style:italic"># defaults to :enable if not specified</span>
<span style="color:#007020;font-weight:700">end</span></code></pre></div> <p>where:</p> <ul> <li>
<code>windows_update_settings</code> is the resource.</li> <li>
<code>name</code> is the name given to the resource block.</li> <li>
<code>action</code> identifies which steps Chef Infra Client will take to bring the node into the desired state.</li> <li>
<code>add_to_target_wsus_group</code>, <code>automatic_update_option</code>, <code>automatically_install_minor_updates</code>, <code>block_windows_update_website</code>, <code>custom_detection_frequency</code>, <code>disable_automatic_updates</code>, <code>disable_os_upgrades</code>, <code>elevate_non_admins</code>, <code>enable_detection_frequency</code>, <code>no_reboot_with_users_logged_on</code>, <code>scheduled_install_day</code>, <code>scheduled_install_hour</code>, <code>target_wsus_group_name</code>, <code>update_other_ms_products</code>, <code>use_custom_update_server</code>, <code>wsus_server_url</code>, and <code>wsus_status_server_url</code> are the properties available to this resource.</li> </ul> <h3 id="actions-windows-update-settings">Actions</h3> <hr> <p>The <strong>windows_update_settings</strong> resource has the following actions:</p> <dl> <dt><code>:enable</code></dt> <dd>Overrides the default settings with these custom options.</dd> <dt><code>:nothing</code></dt> <dd>This resource block does not act unless notified by another resource to take action. Once notified, this resource block either runs immediately or is queued up to run at the end of a Chef Infra Client run.</dd> </dl> <h3 id="properties-windows-update-settings">Properties</h3> <hr> <p>The <strong>windows_update_settings</strong> resource has the following properties:</p> <dl> <dt> <code>add_to_target_wsus_group</code> </dt> <dd> <strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code> <p>If you have a WSUS Server and Target Groups, set this True</p> </dd> </dl> <dl> <dt> <code>automatic_update_option</code> </dt> <dd> <strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>4</code> <p>An Integer value to tell nodes when and how to download updates. Default is 4 - Auto-download and schedule updates to install</p> </dd> </dl> <dl> <dt> <code>automatically_install_minor_updates</code> </dt> <dd> <strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code> <p>Automatically install minor updates. Default is False</p> </dd> </dl> <dl> <dt> <code>block_windows_update_website</code> </dt> <dd> <strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code> <p>Denies access to Windows Update to get updates</p> </dd> </dl> <dl> <dt> <code>custom_detection_frequency</code> </dt> <dd> <strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>22</code> <p>If you decided to override the OS default detection frequency, specify your choice here. Valid choices are 0 - 22</p> </dd> </dl> <dl> <dt> <code>disable_automatic_updates</code> </dt> <dd> <strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code> <p>Prevents automatic updates. Defaults to False to allow automatic updates</p> </dd> </dl> <dl> <dt> <code>disable_os_upgrades</code> </dt> <dd> <strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code> <p>True/False to disable OS upgrades.</p> </dd> </dl> <dl> <dt> <code>elevate_non_admins</code> </dt> <dd> <strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>true</code> <p>This property allows normal user accounts to temporarily be elevated to install patches</p> </dd> </dl> <dl> <dt> <code>enable_detection_frequency</code> </dt> <dd> <strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code> <p>Used to override the OS default of how often to check for updates</p> </dd> </dl> <dl> <dt> <code>no_reboot_with_users_logged_on</code> </dt> <dd> <strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>true</code> <p>Prevents the OS from rebooting while someone is on the console. Default is True</p> </dd> </dl> <dl> <dt> <code>scheduled_install_day</code> </dt> <dd> <strong>Ruby Type:</strong> String | <strong>Default Value:</strong> <code>Everyday</code> <strong>Allowed Values:</strong> <code>"Everyday", "Friday", "Monday", "Saturday", "Sunday", "Thursday", "Tuesday", "Wednesday"</code> <p>A day of the week to tell Windows when to install updates. Defaults to Everyday</p> </dd> </dl> <dl> <dt> <code>scheduled_install_hour</code> </dt> <dd> <strong>Ruby Type:</strong> Integer <p>If you chose a scheduled day to install, then choose an hour on that day for you installation</p> </dd> </dl> <dl> <dt> <code>target_wsus_group_name</code> </dt> <dd> <strong>Ruby Type:</strong> String <p>This is the name of the WSUS Target Group you want the node to be in</p> </dd> </dl> <dl> <dt> <code>update_other_ms_products</code> </dt> <dd> <strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>true</code> <p>Allows for other Microsoft products to get updates too</p> </dd> </dl> <dl> <dt> <code>use_custom_update_server</code> </dt> <dd> <strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code> <p>Used to tell nodes to use a WSUS server, Defaults to False - Use Microsoft for updates</p> </dd> </dl> <dl> <dt> <code>wsus_server_url</code> </dt> <dd> <strong>Ruby Type:</strong> String <p>The URL of your WSUS server if you use one</p> </dd> </dl> <dl> <dt> <code>wsus_status_server_url</code> </dt> <dd> <strong>Ruby Type:</strong> String <p>URL for the WSUS Status server. It can be the same as the URL for the WSUS server itself</p> </dd> </dl> <br> <h3 id="functionality-windows-update-settings">Common Resource Functionality</h3> <hr> <p>Chef resources include common properties, notifications, and resource guards.</p> <h4 id="common-properties-windows-update-settings">Common Properties</h4> <p>The following properties are common to every resource:</p> <dl> <dt><code>compile_time</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Control the phase during which the resource is run on the node. Set to true to run while the resource collection is being built (the <code>compile phase</code>). Set to false to run while Chef Infra Client is configuring the node (the <code>converge phase</code>).</p> </dd> <dt><code>ignore_failure</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false, :quiet | <strong>Default Value:</strong> <code>false</code></p> <p>Continue running a recipe if a resource fails for any reason. <code>:quiet</code> will not display the full stack trace and the recipe will continue to run if a resource fails.</p> </dd> <dt><code>retries</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>0</code></p> <p>The number of attempts to catch exceptions and retry the resource.</p> </dd> <dt><code>retry_delay</code></dt> <dd> <p><strong>Ruby Type:</strong> Integer | <strong>Default Value:</strong> <code>2</code></p> <p>The delay in seconds between retry attempts.</p> </dd> <dt><code>sensitive</code></dt> <dd> <p><strong>Ruby Type:</strong> true, false | <strong>Default Value:</strong> <code>false</code></p> <p>Ensure that sensitive resource data is not logged by Chef Infra Client.</p> </dd> </dl> <h4 id="common-notifications-windows-update-settings">Notifications</h4> <dl> <dt> <code>notifies</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> <p>A resource may notify another resource to take action when its state changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> that resource should take, and then the <code>:timer</code> for that action. A resource may notify more than one resource; use a <code>notifies</code> statement for each resource to be notified.</p> <p>If the referenced resource does not exist, an error is raised. In contrast, <code>subscribes</code> will not fail if the source resource is not found.</p> </dd> </dl> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>notifies</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">notifies <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <dl> <dt> <code>subscribes</code> </dt> <dd> <p><strong>Ruby Type:</strong> Symbol, 'Chef::Resource[String]'</p> </dd> </dl> <p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <code>'resource[name]'</code>, the <code>:action</code> to be taken, and then the <code>:timer</code> for that action.</p> <p>Note that <code>subscribes</code> does not apply the specified action to the resource that it listens to - for example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">file <span style="color:#4070a0">'/etc/nginx/ssl/example.crt'</span> <span style="color:#007020;font-weight:700">do</span>
  mode <span style="color:#4070a0">'0600'</span>
  owner <span style="color:#4070a0">'root'</span>
<span style="color:#007020;font-weight:700">end</span>

service <span style="color:#4070a0">'nginx'</span> <span style="color:#007020;font-weight:700">do</span>
  subscribes <span style="color:#517918">:reload</span>, <span style="color:#4070a0">'file[/etc/nginx/ssl/example.crt]'</span>, <span style="color:#517918">:immediately</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p>In this case the <code>subscribes</code> property reloads the <code>nginx</code> service whenever its certificate file, located under <code>/etc/nginx/ssl/example.crt</code>, is updated. <code>subscribes</code> does not make any changes to the certificate file itself, it merely listens for a change to the file, and executes the <code>:reload</code> action for its resource (in this example <code>nginx</code>) when a change is detected.</p> <p>If the other resource does not exist, the subscription will not raise an error. Contrast this with the stricter semantics of <code>notifies</code>, which will raise an error if the other resource does not exist.</p> <p>A timer specifies the point during a Chef Infra Client run at which a notification is run. The following timers are available:</p> <dl> <dt><code>:before</code></dt> <dd> <p>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</p> </dd> <dt><code>:delayed</code></dt> <dd> <p>Default. Specifies that a notification should be queued up, and then executed at the end of a Chef Infra Client run.</p> </dd> <dt>
<code>:immediate</code>, <code>:immediately</code>
</dt> <dd> <p>Specifies that a notification should be run immediately, per resource notified.</p> </dd> </dl> <p>The syntax for <code>subscribes</code> is:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">subscribes <span style="color:#517918">:action</span>, <span style="color:#4070a0">'resource[name]'</span>, <span style="color:#517918">:timer</span>
</code></pre></div> <h4 id="guards-windows-update-settings">Guards</h4> <p>A guard property can be used to evaluate the state of a node during the execution phase of a Chef Infra Client run. Based on the results of this evaluation, a guard property is then used to tell Chef Infra Client if it should continue executing a resource. A guard property accepts either a string value or a Ruby block value:</p> <ul> <li>A string is executed as a shell command. If the command returns <code>0</code>, the guard is applied. If the command returns any other value, then the guard property is not applied. String guards in a <strong>powershell_script</strong> run Windows PowerShell commands and may return <code>true</code> in addition to <code>0</code>.</li> <li>A block is executed as Ruby code that must return either <code>true</code> or <code>false</code>. If the block returns <code>true</code>, the guard property is applied. If the block returns <code>false</code>, the guard property is not applied.</li> </ul> <p>A guard property is useful for ensuring that a resource is idempotent by allowing that resource to test for the desired state as it is being executed, and then if the desired state is present, for Chef Infra Client to do nothing.</p> <strong>Properties</strong> <p>The following properties can be used to define a guard that is evaluated during the execution phase of a Chef Infra Client run:</p> <dl> <dt><code>not_if</code></dt> <dd> <p>Prevent a resource from executing when the condition returns <code>true</code>.</p> </dd> <dt><code>only_if</code></dt> <dd> <p>Allow a resource to execute only if the condition returns <code>true</code>.</p> </dd> </dl> <h3 id="examples-windows-update-settings">Examples</h3> <hr> <p>The following examples demonstrate various approaches for using the <strong>windows_update_settings</strong> resource in recipes:</p> <p><strong>Set Windows Update settings</strong>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">windows_update_settings <span style="color:#4070a0">'Settings to Configure Windows Nodes to automatically receive updates'</span> <span style="color:#007020;font-weight:700">do</span>
  disable_os_upgrades <span style="color:#007020">false</span>
  elevate_non_admins <span style="color:#007020">true</span>
  add_to_target_wsus_group <span style="color:#007020">false</span>
  block_windows_update_website <span style="color:#007020">false</span>
  automatic_update_option <span style="color:#40a070">4</span>
  automatically_install_minor_updates <span style="color:#007020">false</span>
  enable_detection_frequency <span style="color:#007020">false</span>
  custom_detection_frequency <span style="color:#40a070">22</span>
  no_reboot_with_users_logged_on <span style="color:#007020">true</span>
  disable_automatic_updates <span style="color:#007020">false</span>
  scheduled_install_day <span style="color:#4070a0">'Monday'</span>
  scheduled_install_hour <span style="color:#40a070">20</span>
  update_other_ms_products <span style="color:#007020">false</span>
  use_custom_update_server <span style="color:#007020">false</span>
  action <span style="color:#517918">:enable</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef&trade; Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs.chef.io/desktop/resources/" class="_attribution-link">https://docs.chef.io/desktop/resources/</a>
  </p>
</div>
