<div id="col-content" data-swiftype-index="true"> <div id="chef-infra-language-editing-resources"><h1>Chef Infra Language: Editing Resources</h1></div>  <div class="prose"> <p data-swiftype-index="false"> <a href="https://github.com/chef/chef-web-docs/blob/main/content/infra_language/editing_resources.md" alt="Link to page on GitHub repository">[edit on GitHub]</a> </p> <h2 id="declare_resource">declare_resource</h2> <p>Use the <code>declare_resource</code> method to instantiate a resource and then add it to the resource collection.</p> <p>The syntax for the <code>declare_resource</code> method is as follows:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">declare_resource(<span style="color:#517918">:resource_type</span>, <span style="color:#4070a0">'resource_name'</span>, resource_attrs_block)
</code></pre></div>
<p>where:</p> <ul> <li>
<code>:resource_type</code> is the resource type, such as <code>:file</code> (for the <strong>file</strong> resource), <code>:template</code> (for the <strong>template</strong> resource), and so on. Any resource available to Chef may be declared.</li> <li>
<code>resource_name</code> the property that is the default name of the resource, typically the string that appears in the <code>resource 'name' do</code> block of a resource (but not always); see the Syntax section for the resource to be declared to verify the default name property.</li> <li>
<code>resource_attrs_block</code> is a block in which properties of the instantiated resource are declared.</li> </ul> <p>For example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">declare_resource(<span style="color:#517918">:file</span>, <span style="color:#4070a0">'/x/y.txy'</span>, <span style="color:#007020">caller</span><span style="color:#666">[</span><span style="color:#40a070">0</span><span style="color:#666">]</span>) <span style="color:#007020;font-weight:700">do</span>
  action <span style="color:#517918">:delete</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p>is equivalent to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">file <span style="color:#4070a0">'/x/y.txt'</span> <span style="color:#007020;font-weight:700">do</span>
  action <span style="color:#517918">:delete</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<h2 id="delete_resource">delete_resource</h2> <p>Use the <code>delete_resource</code> method to find a resource in the resource collection, and then delete it.</p> <p>The syntax for the <code>delete_resource</code> method is as follows:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">delete_resource(<span style="color:#517918">:resource_type</span>, <span style="color:#4070a0">'resource_name'</span>)
</code></pre></div>
<p>where:</p> <ul> <li>
<code>:resource_type</code> is the resource type, such as <code>:file</code> (for the <strong>file</strong> resource), <code>:template</code> (for the <strong>template</strong> resource), and so on. Any resource available to Chef may be declared.</li> <li>
<code>resource_name</code> the property that is the default name of the resource, typically the string that appears in the <code>resource 'name' do</code> block of a resource (but not always); see the Syntax section for the resource to be declared to verify the default name property.</li> </ul> <p>For example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">delete_resource(<span style="color:#517918">:template</span>, <span style="color:#4070a0">'/x/y.erb'</span>)
</code></pre></div>
<h2 id="delete_resource-1">delete_resource!</h2> <p>Use the <code>delete_resource!</code> method to find a resource in the resource collection, and then delete it. If the resource is not found, an exception is returned.</p> <p>The syntax for the <code>delete_resource!</code> method is as follows:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">delete_resource!(<span style="color:#517918">:resource_type</span>, <span style="color:#4070a0">'resource_name'</span>)
</code></pre></div>
<p>where:</p> <ul> <li>
<code>:resource_type</code> is the resource type, such as <code>:file</code> (for the <strong>file</strong> resource), <code>:template</code> (for the <strong>template</strong> resource), and so on. Any resource available to Chef Infra may be declared.</li> <li>
<code>resource_name</code> the property that is the default name of the resource, typically the string that appears in the <code>resource 'name' do</code> block of a resource (but not always); see the Syntax section for the resource to be declared to verify the default name property.</li> </ul> <p>For example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">delete_resource!(<span style="color:#517918">:file</span>, <span style="color:#4070a0">'/x/file.txt'</span>)
</code></pre></div>
<h2 id="edit_resource">edit_resource</h2> <p>Use the <code>edit_resource</code> method to:</p> <ul> <li>Find a resource in the resource collection, and then edit it.</li> <li>Define a resource block. If a resource block with the same name exists in the resource collection, it will be updated with the contents of the resource block defined by the <code>edit_resource</code> method. If a resource block does not exist in the resource collection, it will be created.</li> </ul> <p>The syntax for the <code>edit_resource</code> method is as follows:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">edit_resource(<span style="color:#517918">:resource_type</span>, <span style="color:#4070a0">'resource_name'</span>, resource_attrs_block)
</code></pre></div>
<p>where:</p> <ul> <li>
<code>:resource_type</code> is the resource type, such as <code>:file</code> (for the <strong>file</strong> resource), <code>:template</code> (for the <strong>template</strong> resource), and so on. Any resource available to Chef may be declared.</li> <li>
<code>resource_name</code> the property that is the default name of the resource, typically the string that appears in the <code>resource 'name' do</code> block of a resource (but not always); see the Syntax section for the resource to be declared to verify the default name property.</li> <li>
<code>resource_attrs_block</code> is a block in which properties of the instantiated resource are declared.</li> </ul> <p>For example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">edit_resource(<span style="color:#517918">:template</span>, <span style="color:#4070a0">'/x/y.txy'</span>) <span style="color:#007020;font-weight:700">do</span>
  cookbook <span style="color:#4070a0">'cookbook_name'</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p>and a resource block:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">edit_resource(<span style="color:#517918">:template</span>, <span style="color:#4070a0">'/etc/aliases'</span>) <span style="color:#007020;font-weight:700">do</span>
  source <span style="color:#4070a0">'aliases.erb'</span>
  cookbook <span style="color:#4070a0">'aliases'</span>
  variables({<span style="color:#517918">:aliases</span> <span style="color:#666">=&gt;</span> {} })
  notifies <span style="color:#517918">:run</span>, <span style="color:#4070a0">'execute[newaliases]'</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<h2 id="edit_resource-1">edit_resource!</h2> <p>Use the <code>edit_resource!</code> method to:</p> <ul> <li>Find a resource in the resource collection, and then edit it.</li> <li>Define a resource block. If a resource with the same name exists in the resource collection, its properties will be updated with the contents of the resource block defined by the <code>edit_resource</code> method.</li> </ul> <p>In both cases, if the resource is not found, an exception is returned.</p> <p>The syntax for the <code>edit_resource!</code> method is as follows:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">edit_resource!(<span style="color:#517918">:resource_type</span>, <span style="color:#4070a0">'resource_name'</span>)
</code></pre></div>
<p>where:</p> <ul> <li>
<code>:resource_type</code> is the resource type, such as <code>:file</code> (for the <strong>file</strong> resource), <code>:template</code> (for the <strong>template</strong> resource), and so on. Any resource available to Chef may be declared.</li> <li>
<code>resource_name</code> the property that is the default name of the resource, typically the string that appears in the <code>resource 'name' do</code> block of a resource (but not always); see the Syntax section for the resource to be declared to verify the default name property.</li> <li>
<code>resource_attrs_block</code> is a block in which properties of the instantiated resource are declared.</li> </ul> <p>For example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">edit_resource!(<span style="color:#517918">:file</span>, <span style="color:#4070a0">'/x/y.rst'</span>)
</code></pre></div>
<h2 id="find_resource">find_resource</h2> <p>Use the <code>find_resource</code> method to:</p> <ul> <li>Find a resource in the resource collection.</li> <li>Define a resource block. If a resource block with the same name exists in the resource collection, it will be returned. If a resource block does not exist in the resource collection, it will be created.</li> </ul> <p>The syntax for the <code>find_resource</code> method is as follows:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">find_resource(<span style="color:#517918">:resource_type</span>, <span style="color:#4070a0">'resource_name'</span>)
</code></pre></div>
<p>where:</p> <ul> <li>
<code>:resource_type</code> is the resource type, such as <code>:file</code> (for the <strong>file</strong> resource), <code>:template</code> (for the <strong>template</strong> resource), and so on. Any resource available to Chef may be declared.</li> <li>
<code>resource_name</code> the property that is the default name of the resource, typically the string that appears in the <code>resource 'name' do</code> block of a resource (but not always); see the Syntax section for the resource to be declared to verify the default name property.</li> </ul> <p>For example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">find_resource(<span style="color:#517918">:template</span>, <span style="color:#4070a0">'/x/y.txy'</span>)
</code></pre></div>
<p>and a resource block:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">find_resource(<span style="color:#517918">:template</span>, <span style="color:#4070a0">'/etc/seapower'</span>) <span style="color:#007020;font-weight:700">do</span>
  source <span style="color:#4070a0">'seapower.erb'</span>
  cookbook <span style="color:#4070a0">'seapower'</span>
  variables({<span style="color:#517918">:seapower</span> <span style="color:#666">=&gt;</span> {} })
  notifies <span style="color:#517918">:run</span>, <span style="color:#4070a0">'execute[newseapower]'</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<h2 id="find_resource-1">find_resource!</h2> <p>Use the <code>find_resource!</code> method to find a resource in the resource collection. If the resource is not found, an exception is returned.</p> <p>The syntax for the <code>find_resource!</code> method is as follows:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">find_resource!(<span style="color:#517918">:resource_type</span>, <span style="color:#4070a0">'resource_name'</span>)
</code></pre></div>
<p>where:</p> <ul> <li>
<code>:resource_type</code> is the resource type, such as <code>:file</code> (for the <strong>file</strong> resource), <code>:template</code> (for the <strong>template</strong> resource), and so on. Any resource available to Chef may be declared.</li> <li>
<code>resource_name</code> the property that is the default name of the resource, typically the string that appears in the <code>resource 'name' do</code> block of a resource (but not always); see the Syntax section for the resource to be declared to verify the default name property.</li> </ul> <p>For example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">find_resource!(<span style="color:#517918">:template</span>, <span style="color:#4070a0">'/x/y.erb'</span>)
</code></pre></div> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef&trade; Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs.chef.io/infra_language/editing_resources/" class="_attribution-link">https://docs.chef.io/infra_language/editing_resources/</a>
  </p>
</div>
