<div id="col-content" data-swiftype-index="true"> <div id="configuration-templates"><h1>Configuration Templates</h1></div> <div class="prose"> <p data-swiftype-index="false"> <a href="https://github.com/habitat-sh/habitat/tree/main/components/docs-chef-io/content/habitat/config_templates.md" alt="Link to page on GitHub repository">[edit on GitHub]</a> </p> <p>Chef Habitat allows you to templatize your application’s native configuration files using <a href="https://handlebarsjs.com/">Handlebars</a> syntax. The following sections describe how to create tunable configuration elements for your application or service.</p> <p>Template variables, also referred to as tags, are indicated by double curly braces: <code>{{a_variable}}</code>. In Chef Habitat, tunable config elements are prefixed with <code>cfg.</code> to indicate that the value is user-tunable.</p> <p>Here’s an example of how to make a configuration element user-tunable. Assume that we have a native configuration file named <code>service.conf</code>. In <code>service.conf</code>, the following configuration element is defined:</p> <pre tabindex="0" class="highlight" data-language="ruby"><code class="language-conf" data-lang="conf">recv_buffer 128
</code></pre>
<p>We can make this user tunable like this:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-handlebars" data-lang="handlebars">recv_buffer <span style="color:#007020">{{</span><span style="color:#bb60d5">cfg.recv_buffer</span><span style="color:#007020">}}</span>
</code></pre></div>
<p>Chef Habitat can read values that it will use to render the templatized config files in three ways:</p> <ol> <li>
<code>default.toml</code> - Each plan includes a <code>default.toml</code> file that specifies the default values to use in the absence of any user provided inputs. These files are written in <a href="https://github.com/toml-lang/toml">TOML</a>, a simple config format.</li> <li>At runtime - Users can alter config at runtime using <code>hab config apply</code>. The input for this command also uses the TOML format.</li> <li>Environment variable - At start up, tunable config values can be passed to Chef Habitat using environment variables; this most over-riding way of setting these but require you to restart the supervisor to change them.</li> </ol> <p>Here’s what we’d add to our project’s <code>default.toml</code> file to provide a default value for the <code>recv_buffer</code> tunable:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-toml" data-lang="toml">recv_buffer = <span style="color:#40a070">128</span>
</code></pre></div>
<p>All templates located in a package’s <code>config</code> folder are rendered to a config directory, <code>/hab/svc/&lt;pkg_name&gt;/config</code>, for the running service. The templates are re-written whenever configuration values change. The path to this directory is available at build time in the plan as the variable <code>$pkg_svc_config_path</code> and available at runtime in templates and hooks as <code>{{pkg.svc_config_path}}</code>.</p> <p>All templates located in a package’s <code>config_install</code> folder are rendered to a config_install directory, <code>/hab/svc/&lt;pkg_name&gt;/config_install</code>. These templates are only accessible to the execution of an <code>install</code> hook and any changes to the values referenced by these templates at runtime will not result in re-rendering the template. The path to this directory is available at build time in the plan as the variable <code>$pkg_svc_config_install_path</code> and available at runtime in templates and <code>install</code> hooks as <code>{{pkg.svc_config_install_path}}</code>.</p> <p>Chef Habitat not only allows you to use Handlebars-based tunables in your plan, but you can also use both built-in Handlebars helpers as well as Chef Habitat-specific helpers to define your configuration logic. See <a href="../build_helpers/index.html">Reference</a> for more information.</p> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef&trade; Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs.chef.io/habitat/config_templates/" class="_attribution-link">https://docs.chef.io/habitat/config_templates/</a>
  </p>
</div>
