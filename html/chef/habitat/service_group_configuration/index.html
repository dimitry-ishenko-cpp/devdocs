<div id="col-content" data-swiftype-index="true"> <div id="service-group-configuration"><h1>Service Group Configuration</h1></div>  <div class="prose"> <p data-swiftype-index="false"> <a href="https://github.com/habitat-sh/habitat/tree/main/components/docs-chef-io/content/habitat/service_group_configuration.md" alt="Link to page on GitHub repository">[edit on GitHub]</a> </p> <h2 id="uploading-files-to-a-service-group">Uploading Files to a Service Group</h2> <p>In addition to <a href="../service_updates/index.html">configuration updates</a>, you can upload files to a service group. Keep these small - we recommend 4k or less per file, and keep the count of files to a minimum.</p> <h3 id="usage">Usage</h3> <p>Use the <a href="../habitat_cli/index.html#hab-file-upload"><code>hab file upload</code></a> command to submit a file to a service group. Specify a peer in the ring to connect to, the version number of the file, and the new path to the file itself.</p> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> <p>File updates for service groups must be versioned. The version number must be an integer that starts at one and must be incremented with every subsequent update to the same service group.</p> <p>If the version number is less than or equal to the current version number, the change(s) will not be applied.</p> </div> </div> <p>The following example shows how to upload a file to the ring:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">hab file upload myapp.prod <span style="color:#40a070">1</span> /tmp/yourfile.txt --remote-sup<span style="color:#666">=</span>hab1.mycompany.com
</code></pre></div>
<p>Your output would look something like this:</p> <pre tabindex="0" class="highlight" data-language="ruby"><code>» Uploading file yourfile.txt to 1 incarnation myapp.prod
Ω Creating service file
↑ Applying via peer 172.0.0.3:9632
★ Uploaded file
</code></pre>
<p>The services in the <code>myapp.prod</code> service group will receive the file, restarting if necessary:</p> <pre tabindex="0" class="highlight" data-language="ruby"><code>hab-sup(MR): Receiving new version 1 of file secret.txt for myapp.prod
...
myapp.prod(SR): Service file updated, yourfile.txt
</code></pre>
<p><strong>Note</strong>: Habitat will put the uplodaded file in your service’s <code>svc/files</code> directory.</p> <h3 id="encryption">Encryption</h3> <p>Files can be encrypted for the service group they are intended for. To do so, pass the <code>--user</code> option with the name of your user key, and the <code>--org</code> option with the organization of the service group. If you have the public key for the service group, the data will be encrypted for that key, signed with your user key, and sent to the ring.</p> <p>It will then be stored encrypted in memory, and decrypted on disk.</p> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef&trade; Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs.chef.io/habitat/service_group_configuration/" class="_attribution-link">https://docs.chef.io/habitat/service_group_configuration/</a>
  </p>
</div>
