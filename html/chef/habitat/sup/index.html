<div id="col-content" data-swiftype-index="true"> <div id="chef-habitat-supervisor"><h1>Chef Habitat Supervisor</h1></div>  <div class="prose"> <p data-swiftype-index="false"> <a href="https://github.com/habitat-sh/habitat/tree/main/components/docs-chef-io/content/habitat/sup.md" alt="Link to page on GitHub repository">[edit on GitHub]</a> </p> <p>The Supervisor is a process manager that has two primary responsibilities. First, it starts and monitors child services defined in the plan it is running. Second, it receives and acts upon information from the other Supervisors to which it is connected. A service will be reconfigured through application lifecycle hooks if its configuration has changed.</p> <h2 id="the-supervisor-ring">The Supervisor Ring</h2> <p>Supervisors typically run in a network, which we refer to as a <em>ring</em> (although it is more like a peer-to-peer network rather than a circular ring). The ring can be very large; it could contain hundreds or thousands of supervisors. The membership list of this ring is maintained independently by each Supervisor and is known as the <em>census</em>.</p> <h2 id="census">Census</h2> <p>The census is the core of the service discovery mechanism in Chef Habitat. It keeps track of every Supervisor in the ring, and handles reading, writing, and serializing it with the discovery backend.</p> <p>Each Supervisor in the system is a <em>census entry</em> that together form a <em>census</em>. Operations to discover or mutate the state of the census happen through algorithms that arrive at the same conclusion given the same inputs.</p> <p>An example is leader election: it’s handled here by having a consistent (and simple) algorithm for selecting a leader deterministically for the group. We rely on the eventual consistency of every Supervisor’s census entry to elect a new leader in a reasonable amount of time.</p> <h2 id="supervisor-rest-api">Supervisor REST API</h2> <p>The Chef Habitat Supervisor provides a HTTP API to expose cluster metadata, statistics, and general diagnostic information useful for monitoring and support in the form of a JSON document. It also provides detailed information about the Chef Habitat package that it is supervising, including metadata such as the build and runtime dependencies and their versions.</p> <h2 id="control-gateway">Control Gateway</h2> <p>The Supervisor control gateway is used to issue commands to a remote Supervisor. When a new Supervisor is created, a key for the <code>HAB_CTL_SECRET</code> environment variable is generated for it by default, if one is not already present; this key is used to authenticate requests that are made via the control gateway. See the <a href="../keys/index.html#control-gateway">control gateway</a> documentation for more details.</p> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef&trade; Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs.chef.io/habitat/sup/" class="_attribution-link">https://docs.chef.io/habitat/sup/</a>
  </p>
</div>
