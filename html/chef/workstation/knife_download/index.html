<div id="col-content" data-swiftype-index="true"> <div id="knife-download"><h1>knife download</h1></div>  <div class="prose"> <p data-swiftype-index="false"> <a href="https://github.com/chef/chef-workstation/blob/main/docs-chef-io/content/workstation/knife_download.md" alt="Link to page on GitHub repository">[edit on GitHub]</a> </p> <p>Use the <code>knife download</code> subcommand to download roles, cookbooks, environments, nodes, and data bags from the Chef Infra Server to the current working directory. It can be used to back up data on the Chef Infra Server, inspect the state of one or more files, or to extract out-of-process changes users may have made to files on the Chef Infra Server, such as if a user made a change that bypassed version source control. This subcommand is often used in conjunction with <code>knife diff</code>, which can be used to see exactly what changes will be downloaded, and then <code>knife upload</code>, which does the opposite of <code>knife download</code>.</p> <h2 id="syntax">Syntax</h2> <p>This subcommand has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife download <span style="color:#666">[</span>PATTERN...<span style="color:#666">]</span> <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h2 id="options">Options</h2> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> Review the list of <a href="../knife_options/index.html">common options</a> available to this (and all) knife subcommands and plugins. </div> </div> <p>This subcommand has the following options:</p> <dl> <dt><code>--chef-repo-path PATH</code></dt> <dd> <p>The path to the chef-repo. This setting will override the default path to the chef-repo. Default: same value as specified by <code>chef_repo_path</code> in client.rb.</p> </dd> <dt><code>--concurrency</code></dt> <dd> <p>The number of allowed concurrent connections. Default: <code>10</code>.</p> </dd> <dt><code>--cookbook-version VERSION</code></dt> <dd> <p>The version of a cookbook to download.</p> </dd> <dt>
<code>-n</code>, <code>--dry-run</code>
</dt> <dd> <p>Take no action and only print out results. Default: <code>false</code>.</p> </dd> <dt><code>--[no-]diff</code></dt> <dd> <p>Download only new and modified files. Set to <code>false</code> to download all files. Default: <code>--diff</code>.</p> </dd> <dt><code>--[no-]force</code></dt> <dd> <p>Use <code>--force</code> to download files even when the file on the hard drive is identical to the object on the server (role, cookbook, etc.). By default, files are compared to see if they have equivalent content, and local files are only overwritten if they are different. Default: <code>--no-force</code>.</p> </dd> <dt><code>--[no-]purge</code></dt> <dd> <p>Use <code>--purge</code> to delete local files and directories that do not exist on the Chef Infra Server. By default, if a role, cookbook, etc. does not exist on the Chef Infra Server, the local file for said role is left alone and NOT deleted. Default: <code>--no-purge</code>.</p> </dd> <dt><code>--[no-]recurse</code></dt> <dd> <p>Use <code>--no-recurse</code> to disable downloading a directory recursively. Default: <code>--recurse</code>.</p> </dd> <dt><code>--repo-mode MODE</code></dt> <dd> <p>The layout of the local chef-repo. Possible values: <code>static</code>, <code>everything</code>, or <code>hosted_everything</code>. Use <code>static</code> for just roles, environments, cookbooks, and data bags. By default, <code>everything</code> and <code>hosted_everything</code> are dynamically selected depending on the server type. Default: <code>everything</code> / <code>hosted_everything</code>.</p> </dd> </dl> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> See <a href="../config_rb_optional_settings/index.html">config.rb</a> for more information about how to add certain knife options as settings in the config.rb file. </div> </div> <h2 id="examples">Examples</h2> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Download the entire chef-repo</strong></p> <p>To download the entire chef-repo from the Chef Infra Server, browse to the top level of the chef-repo and enter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife download /
</code></pre></div>
<p><strong>Download the /cookbooks directory</strong></p> <p>To download the <code>cookbooks/</code> directory from the Chef Infra Server, browse to the top level of the chef-repo and enter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife download cookbooks
</code></pre></div>
<p>or from anywhere in the chef-repo, enter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife download /cookbooks
</code></pre></div>
<p><strong>Download the /environments directory</strong></p> <p>To download the <code>environments/</code> directory from the Chef Infra Server, browse to the top level of the chef-repo and enter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife download environments
</code></pre></div>
<p>or from anywhere in the chef-repo, enter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife download /environments
</code></pre></div>
<p><strong>Download an environment</strong></p> <p>To download an environment named “production” from the Chef Infra Server, browse to the top level of the chef-repo and enter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife download environments/production.json
</code></pre></div>
<p>or from the <code>environments/</code> directory, enter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife download production.json
</code></pre></div>
<p><strong>Download the /roles directory</strong></p> <p>To download the <code>roles/</code> directory from the Chef Infra Server, browse to the top level of the chef-repo and enter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife download roles
</code></pre></div>
<p>or from anywhere in the chef-repo, enter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife download /roles
</code></pre></div>
<p><strong>Download cookbooks and roles</strong></p> <p>To download all cookbooks that start with “apache” and belong to the “webserver” role, browse to the top level of the chef-repo and enter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife download cookbooks/apache<span style="color:#4070a0;font-weight:700">\*</span> roles/webserver.json
</code></pre></div>
<p><strong>Download data bags</strong></p> <p>To download all data bags from the Chef Infra Server, browse to the top level of the chef-repo and enter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife download data_bags
</code></pre></div>
<p>or from anywhere in the chef-repo, enter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife download /data_bags
</code></pre></div> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef&trade; Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs.chef.io/workstation/knife_download/" class="_attribution-link">https://docs.chef.io/workstation/knife_download/</a>
  </p>
</div>
