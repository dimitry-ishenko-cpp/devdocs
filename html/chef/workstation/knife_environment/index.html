<div id="col-content" data-swiftype-index="true"> <div id="knife-environment"><h1>knife environment</h1></div>  <div class="prose"> <p data-swiftype-index="false"> <a href="https://github.com/chef/chef-workstation/blob/main/docs-chef-io/content/workstation/knife_environment.md" alt="Link to page on GitHub repository">[edit on GitHub]</a> </p> <p>An environment is a way to map an organization’s real-life workflow to what can be configured and managed when using Chef Infra. This mapping is accomplished by setting attributes and pinning cookbooks at the environment level. With environments, you can change cookbook configurations depending on the system’s designation. For example, by designating different staging and production environments, you can then define the correct URL of a database server for each environment. Environments also allow organizations to move new cookbook releases from staging to production with confidence by stepping releases through testing environments before entering production.</p> <p>Use the <code>knife environment</code> subcommand to manage environments within a single organization on the Chef Infra Server.</p> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> Review the list of <a href="../knife_options/index.html">common options</a> available to this (and all) knife subcommands and plugins. </div> </div> <h2 id="compare">compare</h2> <p>Use the <code>compare</code> argument to compare the cookbook version constraints that are set on one (or more) environments.</p> <h3 id="syntax">Syntax</h3> <p>This argument has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife environment compare <span style="color:#666">[</span>ENVIRONMENT_NAME...<span style="color:#666">]</span> <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h3 id="options">Options</h3> <p>This argument has the following options:</p> <dl> <dt>
<code>-a</code>, <code>--all</code>
</dt> <dd> <p>Upload all environments found at the specified path.</p> </dd> <dt>
<code>-m</code>, <code>--mismatch</code>
</dt> <dd> <p>Show only matching versions.</p> </dd> </dl> <h3 id="examples">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Compare cookbook versions in a single environment</strong></p> <p>To compare cookbook versions for a single environment:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife environment compare development
</code></pre></div>
<p>to return something similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">        development
apache  2.3.1
windows 4.1.2
</code></pre></div>
<p><strong>Compare cookbook versions for multiple environments</strong></p> <p>To compare cookbook versions for multiple environments:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife environment compare development staging
</code></pre></div>
<p>to return something similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">            development     staging
apache      2.3.1           1.2.2
windows     4.1.2           1.0.0
postgresql  1.0.0           1.0.0
</code></pre></div>
<p><strong>Compare cookbook versions for all environments</strong></p> <p>To compare all cookbook versions for all environments:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife environment compare --all
</code></pre></div>
<p>to return something similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">                staging   development
<span style="color:#007020">ulimit</span>          latest    latest
redisio         latest    latest
journly         latest    latest
aws             latest    latest
<span style="color:#007020">test</span>            latest    latest
unicorn         latest    latest
sensu           latest    latest
runit           latest    latest
templater       latest    latest
powershell      latest    latest
openssl         latest    latest
rbenv           latest    latest
rabbitmq        latest    latest
postgresql      latest    latest
mysql           latest    latest
ohai            latest    latest
git             latest    latest
erlang          latest    latest
ssh_known_hosts latest    latest
nginx           latest    latest
database        latest    latest
yum             latest    latest
xfs             latest    latest
apt             latest    latest
dmg             latest    latest
chef_handler    latest    latest
windows         1.0.0     4.1.2
</code></pre></div>
<h2 id="create">create</h2> <p>Use the <code>create</code> argument to add an environment object to the Chef Infra Server. When this argument is run, knife will open $EDITOR to enable editing of the <code>ENVIRONMENT</code> description field (unless a description is specified as part of the command). When finished, knife will add the environment to the Chef Infra Server.</p> <h3 id="syntax-1">Syntax</h3> <p>This argument has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife environment create ENVIRONMENT_NAME -d --description ENVIRONMENT_DESCRIPTION
</code></pre></div>
<h3 id="options-1">Options</h3> <p>This argument has the following options:</p> <dl> <dt><code>--description DESCRIPTION</code></dt> <dd> <p>The description of the environment. This value populates the description field for the environment on the Chef Infra Server.</p> </dd> </dl> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> See <a href="../config_rb_optional_settings/index.html">config.rb</a> for more information about how to add certain knife options as settings in the config.rb file. </div> </div> <h3 id="examples-1">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Create an environment</strong></p> <p>To create an environment named <code>dev</code> with a description of <code>The development environment.</code>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife environment create dev -d --description <span style="color:#4070a0">"The development environment."</span>
</code></pre></div>
<h2 id="delete">delete</h2> <p>Use the <code>delete</code> argument to delete an environment from a Chef Infra Server.</p> <h3 id="syntax-2">Syntax</h3> <p>This argument has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife environment delete ENVIRONMENT_NAME
</code></pre></div>
<h3 id="options-2">Options</h3> <p>This command does not have any specific options.</p> <h3 id="examples-2">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Delete an environment</strong></p> <p>To delete an environment named <code>dev</code>, enter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife environment delete dev
</code></pre></div>
<p>Type <code>Y</code> to confirm a deletion.</p> <h2 id="edit">edit</h2> <p>Use the <code>edit</code> argument to edit the attributes of an environment. When this argument is run, knife will open $EDITOR to enable editing of <code>ENVIRONMENT</code> attributes. When finished, knife will update the Chef Infra Server with those changes.</p> <h3 id="syntax-3">Syntax</h3> <p>This argument has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife environment edit ENVIRONMENT_NAME
</code></pre></div>
<h3 id="options-3">Options</h3> <p>This command does not have any specific options.</p> <h3 id="examples-3">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Edit an environment</strong></p> <p>To edit an environment named <code>devops</code>, enter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife environment edit devops
</code></pre></div>
<h2 id="from-file">from file</h2> <p>Use the <code>from file</code> argument to add or update an environment using a JSON or Ruby DSL description.</p> <h3 id="syntax-4">Syntax</h3> <p>This argument has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife environment from file FILE <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h3 id="options-4">Options</h3> <p>This argument has the following options:</p> <dl> <dt>
<code>-a</code>, <code>--all</code>
</dt> <dd> <p>Upload all environments found at the specified path.</p> </dd> </dl> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> See <a href="../config_rb_optional_settings/index.html">config.rb</a> for more information about how to add certain knife options as settings in the config.rb file. </div> </div> <h3 id="examples-4">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Create an environment from a JSON file</strong></p> <p>To add an environment using data contained in a JSON file:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife environment from file <span style="color:#4070a0">"path to JSON file"</span>
</code></pre></div>
<h2 id="list">list</h2> <p>Use the <code>list</code> argument to list all of the environments that are currently available on the Chef Infra Server.</p> <h3 id="syntax-5">Syntax</h3> <p>This argument has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife environment list -w
</code></pre></div>
<h3 id="options-5">Options</h3> <p>This argument has the following options:</p> <dl> <dt>
<code>-w</code>, <code>--with-uri</code>
</dt> <dd> <p>Show the corresponding URIs.</p> </dd> </dl> <h3 id="examples-5">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>View a list of environments</strong></p> <p>To view a list of environments:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife environment list -w
</code></pre></div>
<h2 id="show">show</h2> <p>Use the <code>show</code> argument to display information about the specified environment.</p> <h3 id="syntax-6">Syntax</h3> <p>This argument has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife environment show ENVIRONMENT_NAME
</code></pre></div>
<h3 id="options-6">Options</h3> <p>This argument has the following options:</p> <dl> <dt>
<code>-a ATTR</code>, <code>--attribute ATTR</code>
</dt> <dd> <p>The attribute (or attributes) to show.</p> </dd> </dl> <h3 id="examples-6">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Show environments</strong></p> <p>To view information about the <code>dev</code> environment enter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife environment show dev
</code></pre></div>
<p>to return:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">% knife environment show dev
chef_type:          environment
cookbook_versions:
default_attributes:
description:
json_class:         Chef::Environment
name:               dev
override_attributes:

<span style="color:#4070a0;font-weight:700">\\</span>
<span style="color:#4070a0;font-weight:700">\\</span>
<span style="color:#4070a0;font-weight:700">\\</span>
<span style="color:#4070a0;font-weight:700">\\</span>
</code></pre></div>
<p><strong>Show environments as JSON</strong></p> <p>To view information in JSON format, use the <code>-F</code> common option as part of the command like this:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife environment show devops -F json
</code></pre></div>
<p>Other formats available include <code>text</code>, <code>yaml</code>, and <code>pp</code>.</p> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef&trade; Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs.chef.io/workstation/knife_environment/" class="_attribution-link">https://docs.chef.io/workstation/knife_environment/</a>
  </p>
</div>
