<div id="col-content" data-swiftype-index="true"> <div id="chef-executable"><h1>chef (executable)</h1></div>  <div class="prose"> <p data-swiftype-index="false"> <a href="https://github.com/chef/chef-workstation/blob/main/docs-chef-io/content/workstation/ctl_chef.md" alt="Link to page on GitHub repository">[edit on GitHub]</a> </p> <p>The chef executable is a command-line tool that does the following:</p> <ul> <li>Generates repositories, cookbooks, recipes, attributes, templates, and custom resources.</li> <li>Installs gems into the Chef development environment’s Ruby installation.</li> </ul> <h2 id="chef-capture">chef capture</h2> <p>Use the <code>chef capture</code> subcommand to capture a node’s state as a local <a href="../../chef_repo/index.html">chef-repo</a>. Use the generated repository if you need to converge a node locally.</p> <h3 id="syntax">Syntax</h3> <p>This subcommand has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef capture NODE-NAME <span style="color:#666">[</span>options<span style="color:#666">]</span>
</code></pre></div>
<h3 id="options">Options</h3> <dl> <dt>
<code>-c</code>, <code>--credentials</code>
</dt> <dd> <p>Credentials file (default $HOME/.chef/credentials).</p> </dd> <dt>
<code>-d</code>, <code>--with-data-bags</code>
</dt> <dd> <p>Download all data bags as part of node capture.</p> </dd> <dt>
<code>-h</code>, <code>--help</code>
</dt> <dd> <p>Show help for the command.</p> </dd> <dt>
<code>-k</code>, <code>--client-key</code>
</dt> <dd> <p>Chef Infra Server API client key.</p> </dd> <dt>
<code>-n</code>, <code>--client-name</code>
</dt> <dd> <p>Chef Infra Server API client name.</p> </dd> <dt>
<code>-o</code>, <code>--ssl-no-verify</code>
</dt> <dd> <p>Do not verify SSL when connecting to Chef Infra Server (default: verify).</p> </dd> <dt>
<code>-p</code>, <code>--profile</code>
</dt> <dd> <p>Profile to use from credentials file (default “default”).</p> </dd> <dt>
<code>-s</code>, <code>--chef-server-url</code>
</dt> <dd> <p>Chef Infra Server URL.</p> </dd> </dl> <h3 id="examples">Examples</h3> <p><strong>Capture a node</strong></p> <p>To capture a node in a local repository, run a command similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef capture test-server
</code></pre></div>
<p>This will return something similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">- Setting up <span style="color:#007020">local</span> repository
 - Capturing node object <span style="color:#4070a0">'test-server'</span>
 - Capturing policy data...
 - Capturing cookbook artifacts...
 - Writing kitchen configuration...

Repository has been created in <span style="color:#4070a0">'./node-test-server-repo'</span>.

Next, locate version-controlled copies of the cookbooks. This is
important so that you can track changes to the cookbooks as you
edit them. You may have one or more existing paths where you have
checked out cookbooks. If not, now is a good <span style="color:#007020">time</span> to open a
separate terminal and clone or check out the cookbooks.

If all cookbooks are not available in the same base location,
you will have a chance to provide additional locations.

Press Enter to Continue:

You<span style="color:#4070a0">'re ready to begin!
</span><span style="color:#4070a0">Start with '</span><span style="color:#007020">cd</span> ./node-test-server-repo; kitchen converge<span style="color:#4070a0">'.
</span><span style="color:#4070a0">As you identify issues, you can modify cookbooks in their
</span><span style="color:#4070a0">original checkout locations or in the repository'</span>s cookbooks
directory and they will be picked up on subsequent runs
of <span style="color:#4070a0">'kitchen converge'</span>.

</code></pre></div>
<p>See the <a href="../upgrade_lab/index.html#create-an-upgrade-environment-with-chef-capture">Upgrade Lab</a> documentation for additional information on upgrading Chef Infra Client.</p> <h2 id="chef-env">chef env</h2> <p>Use the <code>chef env</code> subcommand to configure the environment for Chef Workstation.</p> <h3 id="syntax-1">Syntax</h3> <p>This subcommand has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef env
</code></pre></div>
<h3 id="options-1">Options</h3> <p>This command does not have any specific options.</p> <h3 id="examples-1">Examples</h3> <p>None.</p> <h2 id="chef-exec">chef exec</h2> <p>Use the <code>chef exec</code> subcommand to run arbitrary shell commands with the <code>PATH</code> environment variable and the <code>GEM_HOME</code> and <code>GEM_PATH</code> Ruby environment variables pointed at Chef Workstation.</p> <h3 id="syntax-2">Syntax</h3> <p>This subcommand has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef <span style="color:#007020">exec</span> SYSTEM_COMMAND <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h3 id="options-2">Options</h3> <p>This subcommand has the following options:</p> <dl> <dt>
<code>-h</code>, <code>--help</code>
</dt> <dd> <p>Show help for the command.</p> </dd> <dt>
<code>-v</code>, <code>--version</code>
</dt> <dd> <p>The Chef Infra Client version.</p> </dd> </dl> <h3 id="examples-2">Examples</h3> <p>None.</p> <h2 id="chef-gem">chef gem</h2> <p>The <code>chef gem</code> subcommand is a wrapper around the <code>gem</code> command in RubyGems and is used by Chef to install RubyGems into Chef Workstation development environment. All knife plugins, drivers for Kitchen, and other Ruby applications that are not packaged within Chef Workstation will be installed to the <code>.Chef Workstation</code> path in the home directory: <code>~/.Chef Workstation/gem/ruby/ver.si.on/bin</code> (where <code>ver.si.on</code> is the version of Ruby that is packaged within Chef Workstation).</p> <h3 id="syntax-3">Syntax</h3> <p>This subcommand has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef gem GEM_COMMAND GEM_OPTIONS <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h3 id="options-3">Options</h3> <p>This subcommand has the following options:</p> <dl> <dt>
<code>-h</code>, <code>--help</code>
</dt> <dd> <p>Show help for the command.</p> </dd> <dt>
<code>-v</code>, <code>--version</code>
</dt> <dd> <p>The Chef Infra Client version.</p> </dd> </dl> <h3 id="examples-3">Examples</h3> <p><strong>Show an existing gem in Chef Workstation</strong></p> <p>To show a gem, run a command similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef gem list cookstyle
</code></pre></div>
<p>to return something similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">*** LOCAL GEMS ***

cookstyle <span style="color:#666">(</span>5.20.0<span style="color:#666">)</span>
</code></pre></div>
<p><strong>List all local gems</strong></p> <p>To list all of the installed gems on your development environment, use the <code>list</code> command without any arguments:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef gem list
</code></pre></div>
<p><strong>Search for local gems</strong></p> <p>The <code>list</code> command can also be used to search for locally installed gems. For example, to list all of the gems with <code>knife</code> in their title:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef gem list knife
</code></pre></div>
<p>which returns the following output:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">*** LOCAL GEMS ***

knife-opc <span style="color:#666">(</span>0.3.2<span style="color:#666">)</span>
knife-windows <span style="color:#666">(</span>1.9.0<span style="color:#666">)</span>
</code></pre></div>
<p><strong>Search remote gems</strong></p> <p>Use the <code>search</code> command to search for remote gems available for installation:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef gem search kitchen
</code></pre></div>
<p>to return something similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">*** REMOTE GEMS ***

chefkitchen_cli <span style="color:#666">(</span>0.0.1<span style="color:#666">)</span>
gst-kitchen <span style="color:#666">(</span>0.9.0<span style="color:#666">)</span>
guard-kitchen <span style="color:#666">(</span>0.0.2<span style="color:#666">)</span>
jackal-kitchen <span style="color:#666">(</span>0.1.2<span style="color:#666">)</span>
jackal-kitchen-slack <span style="color:#666">(</span>0.1.2<span style="color:#666">)</span>
kitchen <span style="color:#666">(</span>0.0.3<span style="color:#666">)</span>
</code></pre></div>
<p><strong>Install a gem</strong></p> <p>To install a gem, run a command similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef gem install knife-config
</code></pre></div>
<p>to return something similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">Successfully installed knife-config-1.1.0
<span style="color:#40a070">1</span> gem installed
</code></pre></div>
<p><strong>Uninstall a gem</strong></p> <p>To uninstall a gem from Chef Workstation environment:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef gem uninstall knife-config
</code></pre></div>
<p>to return something similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">Successfully uninstalled knife-config-1.1.0
</code></pre></div>
<p><strong>View the contents of a gem</strong></p> <p>To view the contents of a gem, run a command similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef gem content knife-config
</code></pre></div>
<p>to return something similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">/Users/user/.chefdk/gem/ruby/2.1.0/gems/knife-config-1.1.0/LICENSE
/Users/user/.chefdk/gem/ruby/2.1.0/gems/knife-config-1.1.0/README.md
/Users/user/.chefdk/gem/ruby/2.1.0/gems/knife-config-1.1.0/lib/chef/knife/config.rb
/Users/user/.chefdk/gem/ruby/2.1.0/gems/knife-config-1.1.0/lib/knife-config.rb
</code></pre></div>
<h2 id="chef-generate-attribute">chef generate attribute</h2> <p>Use the <code>chef generate attribute</code> subcommand to generate an attribute file in the <code>/attributes</code> directory.</p> <h3 id="syntax-4">Syntax</h3> <p>This subcommand has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef generate attribute COOKBOOK_PATH NAME <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h3 id="options-4">Options</h3> <p>This subcommand has the following options:</p> <dl> <dt>
<code>-g GENERATOR_COOKBOOK_PATH</code>, <code>--generator-cookbook GENERATOR_COOKBOOK_PATH</code>
</dt> <dd> <p>The path at which a cookbook named <code>code_generator</code> is located. This cookbook is used by the <code>chef generate</code> subcommands to generate cookbooks, cookbook files, templates, attribute files, and so on. Default value: <code>lib/chef-dk/skeletons</code>, under which is the default <code>code_generator</code> cookbook that is included as part of Chef Workstation.</p> </dd> <dt>
<code>-h</code>, <code>--help</code>
</dt> <dd> <p>Show help for the command.</p> </dd> <dt>
<code>-v</code>, <code>--version</code>
</dt> <dd> <p>The Chef Infra Client version.</p> </dd> </dl> <h3 id="examples-4">Examples</h3> <p><strong>Create an attribute</strong></p> <p>To generate an attribute, run a command similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef generate attribute /path/to/cookbook FOO
</code></pre></div>
<p>will return something similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">Recipe: code_generator::attribute
  * directory<span style="color:#666">[</span>/Users/grantmc/chef-repo/cookbooks/chef-repo/attributes<span style="color:#666">]</span> action create
    - create new directory /Users/grantmc/chef-repo/cookbooks/chef-repo/attributes

  * template<span style="color:#666">[</span>/Users/grantmc/chef-repo/cookbooks/chef-repo/attributes/FOO.rb<span style="color:#666">]</span> action create
    - create new file /Users/grantmc/chef-repo/cookbooks/chef-repo/attributes/FOO.rb
</code></pre></div>
<h2 id="chef-generate-cookbook">chef generate cookbook</h2> <p>Use the <code>chef generate cookbook</code> subcommand to generate a cookbook.</p> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> Cookbook and custom resource names should contain only alphanumeric characters. A hyphen (<code>-</code>) is a valid character and may be used in cookbook and custom resource names, but it is discouraged. Chef Infra Client will return an error if a hyphen is not converted to an underscore (<code>_</code>) when referencing from a recipe the name of a custom resource in which a hyphen is located. </div> </div> <h3 id="syntax-5">Syntax</h3> <p>This subcommand has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef generate cookbook COOKBOOK_PATH/COOKBOOK_NAME <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h3 id="options-5">Options</h3> <p>This subcommand has the following options:</p> <dl> <dt>
<code>-g GENERATOR_COOKBOOK_PATH</code>, <code>--generator-cookbook GENERATOR_COOKBOOK_PATH</code>
</dt> <dd> <p>The path at which a cookbook named <code>code_generator</code> is located. This cookbook is used by the <code>chef generate</code> subcommands to generate cookbooks, cookbook files, templates, attribute files, and so on. Default value: <code>lib/chef-dk/skeletons</code>, under which is the default <code>code_generator</code> cookbook that is included as part of Chef Workstation.</p> </dd> <dt>
<code>-b</code>, <code>--berks</code>
</dt> <dd> <p>Create a Berksfile in the cookbook. Default: disabled. Optional. Use to create a berksfile by overriding default creation of a Policyfile.</p> </dd> <dt>
<code>-C COPYRIGHT</code>, <code>--copyright COPYRIGHT</code>
</dt> <dd> <p>Specify the copyright holder for copyright notices in generated files. Default value: <code>The Authors</code></p> </dd> <dt>
<code>-d</code>, <code>--delivery</code>
</dt> <dd> <p>Generate a delivery config file and build cookbook inside the new cookbook. Default value: disabled. This option is disabled. It has no effect and exists only for compatibility with past releases</p> </dd> <dt>
<code>-m EMAIL</code>, <code>--email EMAIL</code>
</dt> <dd> <p>Specify the email address of the author. Default value: <code>you@example.com</code>.</p> </dd> <dt>
<code>-a KEY=VALUE</code>, <code>--generator-arg KEY=VALUE</code>
</dt> <dd> <p>Sets a property named <code>KEY</code> to the given <code>VALUE</code> on the generator context object in the generator cookbook. This allows custom generator cookbooks to accept optional user input on the command line.</p> </dd> <dt>
<code>-I LICENSE</code>, <code>--license LICENSE</code>
</dt> <dd> <p>Sets the license. Valid values are <code>all_rights</code>, <code>apache2</code>, <code>mit</code>, <code>gplv2</code>, or <code>gplv3</code>. Default value: <code>all_rights</code>.</p> </dd> <dt>
<code>-P</code>, <code>--policy</code>
</dt> <dd> <p>Create a Policyfile in the cookbook instead of a Berksfile. Default: enabled.</p> </dd> <dt>
<code>-h</code>, <code>--help</code>
</dt> <dd> <p>Show help for the command.</p> </dd> <dt>
<code>-v</code>, <code>--version</code>
</dt> <dd> <p>The Chef Infra Client version.</p> </dd> </dl> <h3 id="examples-5">Examples</h3> <p><strong>Create a cookbook</strong></p> <p>To generate a cookbook, run a command similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef generate cookbook chefdocs
</code></pre></div>
<p>will return something similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">Recipe: code_generator::cookbook
  * directory<span style="color:#666">[</span>/Users/grantmc/chefdocs<span style="color:#666">]</span> action create
    - create new directory /Users/grantmc/chefdocs

  * template<span style="color:#666">[</span>/Users/grantmc/chefdocs/metadata.rb<span style="color:#666">]</span> action create
    - create new file /Users/grantmc/chefdocs/metadata.rb

  * template<span style="color:#666">[</span>/Users/grantmc/chefdocs/README.md<span style="color:#666">]</span> action create
    - create new file /Users/grantmc/chefdocs/README.md

  * cookbook_file<span style="color:#666">[</span>/Users/grantmc/chefdocs/chefignore<span style="color:#666">]</span> action create
    - create new file /Users/grantmc/chefdocs/chefignore

  * cookbook_file<span style="color:#666">[</span>/Users/grantmc/chefdocs/Berksfile<span style="color:#666">]</span> action create
    - create new file /Users/grantmc/chefdocs/Berksfile

  * template<span style="color:#666">[</span>/Users/grantmc/chefdocs/kitchen.yml<span style="color:#666">]</span> action create
    - create new file /Users/grantmc/chefdocs/kitchen.yml

  * directory<span style="color:#666">[</span>/Users/grantmc/chefdocs/recipes<span style="color:#666">]</span> action create
    - create new directory /Users/grantmc/chefdocs/recipes

  * template<span style="color:#666">[</span>/Users/grantmc/chefdocs/recipes/default.rb<span style="color:#666">]</span> action create
    - create new file /Users/grantmc/chefdocs/recipes/default.rb

  * execute<span style="color:#666">[</span>initialize-git<span style="color:#666">]</span> action run
    - execute git init .

  * cookbook_file<span style="color:#666">[</span>/Users/grantmc/chefdocs/.gitignore<span style="color:#666">]</span> action create
    - create new file /Users/grantmc/chefdocs/.gitignore
</code></pre></div>
<p>and which creates a directory structure similar to:</p> <pre class="highlight" data-language="ruby"><code>/chefdocs
  /.git
  .gitignore
  kitchen.yml
  Berksfile
  chefignore
  metadata.rb
  README.md
  /recipes
    default.rb
</code></pre> <p><strong>Create a cookbook using a custom skeleton cookbook</strong></p> <p>If a custom skeleton cookbook is located on a macOS desktop (and in this example, the <code>chef_generator</code> cookbook is simply a copy of the same cookbook that ships in Chef Workstation), the following command will use the skeleton cookbook at the custom location to generate a cookbook into the repository from which the <code>chef</code> command is run:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef generate cookbook --generator-cookbook ~/Desktop testcookbook
</code></pre></div>
<div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> The <code>code_generator</code> cookbook itself is not specified as part of the path. </div> </div> <p>will return something similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">Compiling Cookbooks...
Recipe: code_generator::cookbook
  * directory<span style="color:#666">[</span>/Users/grantmc/Desktop/chef-repo/test-cookbook<span style="color:#666">]</span> action create
    - create new directory /Users/grantmc/Desktop/chef-repo/test-cookbook

  * template<span style="color:#666">[</span>/Users/grantmc/Desktop/chef-repo/test-cookbook/metadata.rb<span style="color:#666">]</span> action create
    - create new file /Users/grantmc/Desktop/chef-repo/test-cookbook/metadata.rb

  * template<span style="color:#666">[</span>/Users/grantmc/Desktop/chef-repo/test-cookbook/README.md<span style="color:#666">]</span> action create
    - create new file /Users/grantmc/Desktop/chef-repo/test-cookbook/README.md

  * cookbook_file<span style="color:#666">[</span>/Users/grantmc/Desktop/chef-repo/test-cookbook/chefignore<span style="color:#666">]</span> action create
    - create new file /Users/grantmc/Desktop/chef-repo/test-cookbook/chefignore

  * cookbook_file<span style="color:#666">[</span>/Users/grantmc/Desktop/chef-repo/test-cookbook/Berksfile<span style="color:#666">]</span> action create
    - create new file /Users/grantmc/Desktop/chef-repo/test-cookbook/Berksfile

  * template<span style="color:#666">[</span>/Users/grantmc/Desktop/chef-repo/test-cookbook/kitchen.yml<span style="color:#666">]</span> action create
    - create new file /Users/grantmc/Desktop/chef-repo/test-cookbook/kitchen.yml

  * directory<span style="color:#666">[</span>/Users/grantmc/Desktop/chef-repo/test-cookbook/recipes<span style="color:#666">]</span> action create
    - create new directory /Users/grantmc/Desktop/chef-repo/test-cookbook/recipes

  * template<span style="color:#666">[</span>/Users/grantmc/Desktop/chef-repo/test-cookbook/recipes/default.rb<span style="color:#666">]</span> action create
    - create new file /Users/grantmc/Desktop/chef-repo/test-cookbook/recipes/default.rb
</code></pre></div>
<h2 id="chef-generate-build-cookbook">chef generate build-cookbook</h2> <p>Use the <code>chef generate build-cookbook</code> subcommand to generate a delivery configuration file and build cookbook.</p> <h3 id="syntax-6">Syntax</h3> <p>This subcommand has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef generate build-cookbook COOKBOOK_PATH/COOKBOOK_NAME <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h3 id="options-6">Options</h3> <p>This subcommand has the following options:</p> <dl> <dt>
<code>-g GENERATOR_COOKBOOK_PATH</code>, <code>--generator-cookbook GENERATOR_COOKBOOK_PATH</code>
</dt> <dd> <p>The path at which a cookbook named <code>code_generator</code> is located. This cookbook is used by the <code>chef generate</code> subcommands to generate cookbooks, cookbook files, templates, attribute files, and so on. Default value: <code>lib/chef-dk/skeletons</code>, under which is the default <code>code_generator</code> cookbook that is included as part of Chef Workstation.</p> </dd> <dt>
<code>-C COPYRIGHT</code>, <code>--copyright COPYRIGHT</code>
</dt> <dd> <p>Specify the copyright holder for copyright notices in generated files. Default value: <code>The Authors</code></p> </dd> <dt>
<code>-m EMAIL</code>, <code>--email EMAIL</code>
</dt> <dd> <p>Specify the email address of the author. Default value: <code>you@example.com</code>.</p> </dd> <dt>
<code>-a KEY=VALUE</code>, <code>--generator-arg KEY=VALUE</code>
</dt> <dd> <p>Sets a property named <code>KEY</code> to the given <code>VALUE</code> on the generator context object in the generator cookbook. This allows custom generator cookbooks to accept optional user input on the command line.</p> </dd> <dt>
<code>-I LICENSE</code>, <code>--license LICENSE</code>
</dt> <dd> <p>Sets the license. Valid values are <code>all_rights</code>, <code>apache2</code>, <code>mit</code>, <code>gplv2</code>, or <code>gplv3</code>. Default value: <code>all_rights</code>.</p> </dd> <dt>
<code>-h</code>, <code>--help</code>
</dt> <dd> <p>Show help for the command.</p> </dd> <dt>
<code>-v</code>, <code>--version</code>
</dt> <dd> <p>The Chef Infra Client version.</p> </dd> </dl> <h3 id="examples-6">Examples</h3> <p>None.</p> <h2 id="chef-generate-file">chef generate file</h2> <p>Use the <code>chef generate file</code> subcommand to generate a file in the <code>/files</code> directory.</p> <h3 id="syntax-7">Syntax</h3> <p>This subcommand has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef generate file COOKBOOK_PATH NAME <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h3 id="options-7">Options</h3> <p>This subcommand has the following options:</p> <dl> <dt>
<code>-g GENERATOR_COOKBOOK_PATH</code>, <code>--generator-cookbook GENERATOR_COOKBOOK_PATH</code>
</dt> <dd> <p>The path at which a cookbook named <code>code_generator</code> is located. This cookbook is used by the <code>chef generate</code> subcommands to generate cookbooks, cookbook files, templates, attribute files, and so on. Default value: <code>lib/chef-dk/skeletons</code>, under which is the default <code>code_generator</code> cookbook that is included as part of Chef Workstation.</p> </dd> <dt>
<code>-h</code>, <code>--help</code>
</dt> <dd> <p>Show help for the command.</p> </dd> <dt>
<code>-s SOURCE_FILE</code>, <code>--source SOURCE_FILE</code>
</dt> <dd> <p>Copy the contents from a source file.</p> </dd> <dt>
<code>-v</code>, <code>--version</code>
</dt> <dd> <p>The Chef Infra Client version.</p> </dd> </dl> <h3 id="examples-7">Examples</h3> <p>None.</p> <h2 id="chef-generate-resource">chef generate resource</h2> <p>Use the <code>chef generate resource</code> subcommand to generate a custom resource in the <code>/resources</code> directory.</p> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> Cookbook and custom resource names should contain only alphanumeric characters. A hyphen (<code>-</code>) is a valid character and may be used in cookbook and custom resource names, but it is discouraged. Chef Infra Client will return an error if a hyphen is not converted to an underscore (<code>_</code>) when referencing from a recipe the name of a custom resource in which a hyphen is located. </div> </div> <h3 id="syntax-8">Syntax</h3> <p>This subcommand has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef generate resource COOKBOOK_PATH NAME <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h3 id="options-8">Options</h3> <p>This subcommand has the following options:</p> <dl> <dt>
<code>-g GENERATOR_COOKBOOK_PATH</code>, <code>--generator-cookbook GENERATOR_COOKBOOK_PATH</code>
</dt> <dd> <p>The path at which a cookbook named <code>code_generator</code> is located. This cookbook is used by the <code>chef generate</code> subcommands to generate cookbooks, cookbook files, templates, attribute files, and so on. Default value: <code>lib/chef-dk/skeletons</code>, under which is the default <code>code_generator</code> cookbook that is included as part of Chef Workstation.</p> </dd> <dt>
<code>-h</code>, <code>--help</code>
</dt> <dd> <p>Show help for the command.</p> </dd> <dt>
<code>-v</code>, <code>--version</code>
</dt> <dd> <p>The Chef Infra Client version.</p> </dd> </dl> <h3 id="examples-8">Examples</h3> <p>None.</p> <h2 id="chef-generate-recipe">chef generate recipe</h2> <p>Use the <code>chef generate recipe</code> subcommand to generate a recipe in the <code>/recipes</code> directory.</p> <h3 id="syntax-9">Syntax</h3> <p>This subcommand has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef generate recipe COOKBOOK_PATH NAME <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h3 id="options-9">Options</h3> <p>This subcommand has the following options:</p> <dl> <dt>
<code>-g GENERATOR_COOKBOOK_PATH</code>, <code>--generator-cookbook GENERATOR_COOKBOOK_PATH</code>
</dt> <dd> <p>The path at which a cookbook named <code>code_generator</code> is located. This cookbook is used by the <code>chef generate</code> subcommands to generate cookbooks, cookbook files, templates, attribute files, and so on. Default value: <code>lib/chef-dk/skeletons</code>, under which is the default <code>code_generator</code> cookbook that is included as part of Chef Workstation.</p> </dd> <dt>
<code>-h</code>, <code>--help</code>
</dt> <dd> <p>Show help for the command.</p> </dd> <dt>
<code>-v</code>, <code>--version</code>
</dt> <dd> <p>The Chef Infra Client version.</p> </dd> </dl> <h3 id="examples-9">Examples</h3> <p>None.</p> <h2 id="chef-generate-repo">chef generate repo</h2> <p>Use the <code>chef generate repo</code> subcommand to create a chef-repo. By default, the repo is a cookbook repo with options available to support generating a cookbook that supports Policyfile.</p> <h3 id="syntax-10">Syntax</h3> <p>This subcommand has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef generate repo REPO_NAME <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h3 id="options-10">Options</h3> <p>This subcommand has the following options:</p> <dl> <dt>
<code>-h</code>, <code>--help</code>
</dt> <dd> <p>Show help for the command.</p> </dd> <dt>
<code>-p</code>, <code>--policy-only</code>
</dt> <dd> <p>Create a repository that does not store cookbook files, only Policyfile files.</p> </dd> <dt>
<code>-P</code>, <code>--policy</code>
</dt> <dd> <p>Use Policyfile instead of Berkshelf.</p> </dd> <dt>
<code>-r</code>, <code>--roles</code>
</dt> <dd> <p>Create directories for <code>/roles</code> and <code>/environments</code> instead of creating directories for Policyfile.</p> </dd> <dt>
<code>-v</code>, <code>--version</code>
</dt> <dd> <p>The Chef Infra Client version.</p> </dd> </dl> <h3 id="examples-10">Examples</h3> <p>None.</p> <h2 id="chef-generate-template">chef generate template</h2> <p>Use the <code>chef generate template</code> subcommand to generate a template in the <code>/templates</code> directory.</p> <h3 id="syntax-11">Syntax</h3> <p>This subcommand has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef generate template COOKBOOK_PATH NAME <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h3 id="options-11">Options</h3> <p>This subcommand has the following options:</p> <dl> <dt>
<code>-g GENERATOR_COOKBOOK_PATH</code>, <code>--generator-cookbook GENERATOR_COOKBOOK_PATH</code>
</dt> <dd> <p>The path at which a cookbook named <code>code_generator</code> is located. This cookbook is used by the <code>chef generate</code> subcommands to generate cookbooks, cookbook files, templates, attribute files, and so on. Default value: <code>lib/chef-dk/skeletons</code>, under which is the default <code>code_generator</code> cookbook that is included as part of Chef Workstation.</p> </dd> <dt>
<code>-h</code>, <code>--help</code>
</dt> <dd> <p>Show help for the command.</p> </dd> <dt>
<code>-s SOURCE_FILE</code>, <code>--source SOURCE_FILE</code>
</dt> <dd> <p>Copy the contents from a source file.</p> </dd> <dt>
<code>-v</code>, <code>--version</code>
</dt> <dd> <p>The Chef Infra Client version.</p> </dd> </dl> <h3 id="examples-11">Examples</h3> <p>None.</p> <h2 id="chef-report-cookbooks">chef report cookbooks</h2> <p>Use the <code>chef report cookbooks</code> subcommand to generate a cookbook-oriented report for your Chef Infra environment. This report provides details about upgrade compatibility errors and node cookbook usage.</p> <h3 id="syntax-12">Syntax</h3> <p>This subcommand has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef report cookbooks <span style="color:#666">[</span>options<span style="color:#666">]</span>
</code></pre></div>
<h3 id="options-12">Options</h3> <p>This subcommand has the following options:</p> <dl> <dt>
<code>-a</code>, <code>--anonymize</code>
</dt> <dd> <p>Replace cookbook and node names with hash values to protect the sensitive information.</p> </dd> <dt>
<code>-c</code>, <code>--credentials string</code>
</dt> <dd> <p>Credentials file (default $HOME/.chef/credentials).</p> </dd> <dt>
<code>-f</code>, <code>--format</code>
</dt> <dd> <p>Output format: txt is human readable, csv is machine readable (default “txt”).</p> </dd> <dt>
<code>-F</code>, <code>--node-filter</code>
</dt> <dd> <p>Search filter to apply to nodes.</p> </dd> <dt>
<code>-h</code>, <code>--help</code>
</dt> <dd> <p>Show help for the command.</p> </dd> <dt>
<code>-k</code>, <code>--client-key</code>
</dt> <dd> <p>Chef Infra Server API client key.</p> </dd> <dt>
<code>-n</code>, <code>--client-name</code>
</dt> <dd> <p>Chef Infra Server API client name.</p> </dd> <dt>
<code>-o</code>, <code>--ssl-no-verify</code>
</dt> <dd> <p>Do not verify SSL when connecting to Chef Infra Server (default: verify).</p> </dd> <dt>
<code>-p</code>, <code>--profile</code>
</dt> <dd> <p>Profile to use from credentials file (default “default”).</p> </dd> <dt>
<code>-s</code>, <code>--chef-server-url</code>
</dt> <dd> <p>Chef Infra Server URL.</p> </dd> <dt>
<code>-u</code>, <code>--only-unused</code>
</dt> <dd> <p>Generate a report that only includes cookbooks that are not included in any node’s runlist.</p> </dd> <dt>
<code>-V</code>, <code>--verify-upgrade</code>
</dt> <dd> <p>Verify the upgrade compatibility of every cookbook.</p> </dd> <dt>
<code>-w</code>, <code>--workers</code>
</dt> <dd> <p>Maximum number of parallel workers at once (default 50).</p> </dd> </dl> <h3 id="examples-12">Examples</h3> <p><strong>Generate a report</strong></p> <p>To generate a cookbook oriented report, run a command similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef report cookbooks
</code></pre></div>
<p>will return something similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">Finding available cookbooks... <span style="color:#666">(</span><span style="color:#40a070">5</span> found<span style="color:#666">)</span>
Analyzing cookbooks...
<span style="color:#40a070">5</span> / <span style="color:#40a070">5</span> <span style="color:#666">[</span>----------------------------------------------------------------------------------------------------------------<span style="color:#666">]</span> 100.00% <span style="color:#40a070">13</span> p/s

-- REPORT SUMMARY --

  Cookbook   Version   Policy Group   Policy   Nodes Affected
-----------+---------+--------------+--------+-----------------
  apt        2.7.0                             <span style="color:#40a070">2</span>
  Go         0.1.0                             <span style="color:#40a070">3</span>
  java       0.3.0                             <span style="color:#40a070">4</span>
  java                 Production     K8s      <span style="color:#40a070">1</span>
  K8s                  Production     K8s      <span style="color:#40a070">1</span>


Cookbooks report saved to .chef-workstation/reports/cookbooks-20200722120938.txt
</code></pre></div>
<p>More details of this summary report can be viewed in the text file, the location for which is given at the end of the summary.</p> <p>See the <a href="../upgrade_lab/index.html#chef-report-cookbooks">Upgrade Lab</a> documentation for additional information on upgrading Chef Infra Client.</p> <h2 id="chef-report-nodes">chef report nodes</h2> <p>Use the <code>chef report nodes</code> subcommand to generate a nodes-oriented report for your chef environment. This report provides details about nodes, applied policies and the cookbooks used during the most recent chef-client run.</p> <h3 id="syntax-13">Syntax</h3> <p>This subcommand has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef report nodes <span style="color:#666">[</span>options<span style="color:#666">]</span>
</code></pre></div>
<h3 id="options-13">Options</h3> <p>This subcommand has the following options:</p> <dl> <dt>
<code>-a</code>, <code>--anonymize</code>
</dt> <dd> <p>Replace cookbook and node names with hash values to protect sensitive information.</p> </dd> <dt>
<code>-c</code>, <code>--credentials string</code>
</dt> <dd> <p>Credentials file (default $HOME/.chef/credentials).</p> </dd> <dt>
<code>-f</code>, <code>--format</code>
</dt> <dd> <p>Output format: txt is human readable, csv is machine readable (default “txt”).</p> </dd> <dt>
<code>-F</code>, <code>--node-filter</code>
</dt> <dd> <p>Search filter to apply to nodes.</p> </dd> <dt>
<code>-h</code>, <code>--help</code>
</dt> <dd> <p>Show help for the command.</p> </dd> <dt>
<code>-k</code>, <code>--client-key</code>
</dt> <dd> <p>Chef Infra Server API client key.</p> </dd> <dt>
<code>-n</code>, <code>--client-name</code>
</dt> <dd> <p>Chef Infra Server API client name.</p> </dd> <dt>
<code>-o</code>, <code>--ssl-no-verify</code>
</dt> <dd> <p>Do not verify SSL when connecting to Chef Infra Server (default: verify).</p> </dd> <dt>
<code>-p</code>, <code>--profile</code>
</dt> <dd> <p>Profile to use from credentials file (default “default”).</p> </dd> <dt>
<code>-s</code>, <code>--chef-server-url</code>
</dt> <dd> <p>Chef Infra Server URL.</p> </dd> </dl> <h3 id="examples-13">Examples</h3> <p><strong>Generate a report</strong></p> <p>To generate a nodes oriented report, run a command similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef report nodes
</code></pre></div>
<p>will return something similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">Analyzing nodes...

-- REPORT SUMMARY --

      Node Name        Chef Version   Operating System   Number Cookbooks
---------------------+--------------+------------------+-------------------
  dev-server-backend   16.1.16        redhat v8.2                       <span style="color:#40a070">3</span>
  dev-server-web       16.1.16        redhat v8.2                       <span style="color:#40a070">1</span>
  production-server    16.1.16        redhat v8.2                       <span style="color:#40a070">2</span>
  staging-server       16.1.16        redhat v8.2                       <span style="color:#40a070">4</span>
  test-server          16.1.16        redhat v8.2                       <span style="color:#40a070">3</span>

Nodes report saved to .chef-workstation/reports/nodes-20200722130502.txt

</code></pre></div>
<p>More details of this summary report can be viewed in the text file, the location for which is given at the end of the summary.</p> <p><a href="../upgrade_lab.html">Upgrade Lab</a> provides further details on how this command can be used in Chef Infra Client upgrade process.</p> <h2 id="chef-shell-init">chef shell-init</h2> <p>Use the <code>chef shell-init</code> subcommand to set the Ruby included in Chef Workstation as the system Ruby. Chef Workstation is designed to allow the isolation of applications used by Chef Workstation from other Ruby development tools that may be present on the workstation. This supports Bash, fish, Windows PowerShell (posh), and zsh.</p> <p>bash zsh fish PowerShell (posh)</p> <h3 id="syntax-14">Syntax</h3> <p>This subcommand has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef shell-init SHELL_NAME <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h3 id="options-14">Options</h3> <p>This subcommand has the following options:</p> <dl> <dt>
<code>-h</code>, <code>--help</code>
</dt> <dd> <p>Show help for the command.</p> </dd> <dt>
<code>-v</code>, <code>--version</code>
</dt> <dd> <p>The Chef Infra Client version.</p> </dd> </dl> <h3 id="examples-14">Examples</h3> <p><strong>Set PowerShell</strong></p> <p>You can use the <code>chef shell-init</code> command with Windows PowerShell to add the appropriate variables to your environment.</p> <p>To try it in your current session:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef shell-init powershell | Invoke-Expression
</code></pre></div>
<p>To enable it permanently:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash"><span style="color:#4070a0">"chef shell-init powershell | Invoke-Expression"</span> &gt;&gt; <span style="color:#bb60d5">$PROFILE</span>
</code></pre></div>
<p><strong>Set the execution policy on new machines</strong></p> <p>On new Windows machines, PowerShell scripts will not work until an administrator runs the following command:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">Set-ExecutionPolicy RemoteSigned
</code></pre></div>
<p><strong>Create a $PROFILE on new machines</strong></p> <p>On new Windows machines, commands cannot be appended to <code>$PROFILE</code> if the folder does not exist, or if there is a new user profile. This will result in an error similar to the following:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">PS C:<span style="color:#4070a0;font-weight:700">\U</span>sers<span style="color:#4070a0;font-weight:700">\S</span>tuart&gt; <span style="color:#4070a0">"chef shell-init powershell | Invoke-Expression"</span> &gt;&gt; <span style="color:#bb60d5">$PROFILE</span>
out-file : Could not find a part of the path
<span style="color:#4070a0">'C:\Users\Stuart\Documents\WindowsPowerShell\Microsoft.PowerShell_profile.ps1'</span>.
At line:1 char:1
+ <span style="color:#4070a0">"chef shell-init powershell | Invoke-Expression"</span> &gt;&gt; <span style="color:#bb60d5">$PROFILE</span>
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : OpenError: <span style="color:#666">(</span>:<span style="color:#666">)</span> <span style="color:#666">[</span>Out-File<span style="color:#666">]</span>, DirectoryNotFoundException
    + FullyQualifiedErrorId : FileOpenFailure,Microsoft.PowerShell.Commands.OutFileCommand
</code></pre></div>
<p>In this situation, run the following <code>chef shell-init</code> command instead:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash"><span style="color:#007020;font-weight:700">if</span><span style="color:#666">(</span>Test-Path <span style="color:#bb60d5">$PROFILE</span><span style="color:#666">){</span> chef shell-init powershell | Add-Content <span style="color:#bb60d5">$PROFILE</span> <span style="color:#666">}</span> <span style="color:#007020;font-weight:700">else</span> <span style="color:#666">{</span> New-Item -Force -ItemType File <span style="color:#bb60d5">$PROFILE</span>; chef shell-init powershell | Add-Content <span style="color:#bb60d5">$PROFILE</span> <span style="color:#666">}</span>
</code></pre></div>
<h2 id="policyfile-commands">Policyfile Commands</h2> <p>The following commands are built into the <code>chef</code> executable and support the use of Policyfile files.</p> <h3 id="chef-clean-policy-cookbooks">chef clean-policy-cookbooks</h3> <p>Use the <code>chef clean-policy-cookbooks</code> subcommand to delete cookbooks that are not used by Policyfile files. Cookbooks are considered unused when they are not referenced by any policy revisions on the Chef Infra Server.</p> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> <p>Cookbooks that are referenced by orphaned policy revisions are not removed. Use <code>chef clean-policy-revisions</code> to remove orphaned policies.</p> </div> </div> <h4 id="syntax-15">Syntax</h4> <p>This subcommand has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef clean-policy-cookbooks <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h4 id="options-15">Options</h4> <p>This subcommand has the following options:</p> <dl> <dt>
<code>-c CONFIG_FILE</code>, <code>--config CONFIG_FILE</code>
</dt> <dd> <p>The path to the knife configuration file.</p> </dd> <dt>
<code>-D</code>, <code>--debug</code>
</dt> <dd> <p>Enable stack traces and other debug output. Default value: <code>false</code>.</p> </dd> <dt>
<code>-h</code>, <code>--help</code>
</dt> <dd> <p>Show help for the command.</p> </dd> <dt>
<code>-v</code>, <code>--version</code>
</dt> <dd> <p>The Chef Infra Client version.</p> </dd> </dl> <h4 id="examples-15">Examples</h4> <p>None.</p> <h3 id="chef-clean-policy-revisions">chef clean-policy-revisions</h3> <p>Use the <code>chef clean-policy-revisions</code> subcommand to delete orphaned policy revisions to Policyfile files from the Chef Infra Server. An orphaned policy revision is not associated to any policy group and therefore is not in active use by any node. Use <code>chef show-policy --orphans</code> to view a list of orphaned policy revisions.</p> <h4 id="syntax-16">Syntax</h4> <p>This subcommand has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef clean-policy-revisions <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h4 id="options-16">Options</h4> <p>This subcommand has the following options:</p> <dl> <dt>
<code>-c CONFIG_FILE</code>, <code>--config CONFIG_FILE</code>
</dt> <dd> <p>The path to the knife configuration file.</p> </dd> <dt>
<code>-D</code>, <code>--debug</code>
</dt> <dd> <p>Enable stack traces and other debug output. Default value: <code>false</code>.</p> </dd> <dt>
<code>-h</code>, <code>--help</code>
</dt> <dd> <p>Show help for the command.</p> </dd> <dt>
<code>-v</code>, <code>--version</code>
</dt> <dd> <p>The Chef Infra Client version.</p> </dd> </dl> <h4 id="examples-16">Examples</h4> <p>None.</p> <h3 id="chef-delete-policy">chef delete-policy</h3> <p>Use the <code>chef delete-policy</code> subcommand to delete all revisions of the named policy that exist on the Chef Infra Server. (The state of the policy revision is backed up locally and may be restored using the <code>chef undelete</code> subcommand.)</p> <h4 id="syntax-17">Syntax</h4> <p>This subcommand has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef delete-policy POLICY_NAME <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h4 id="options-17">Options</h4> <p>This subcommand has the following options:</p> <dl> <dt>
<code>-c CONFIG_FILE</code>, <code>--config CONFIG_FILE</code>
</dt> <dd> <p>The path to the knife configuration file.</p> </dd> <dt>
<code>-D</code>, <code>--debug</code>
</dt> <dd> <p>Enable stack traces and other debug output. Default value: <code>false</code>.</p> </dd> <dt>
<code>-h</code>, <code>--help</code>
</dt> <dd> <p>Show help for the command.</p> </dd> <dt>
<code>-v</code>, <code>--version</code>
</dt> <dd> <p>The Chef Infra Client version.</p> </dd> </dl> <h4 id="examples-17">Examples</h4> <p>None.</p> <h3 id="chef-delete-policy-group">chef delete-policy-group</h3> <p>Use the <code>chef delete-policy-group</code> subcommand to delete the named policy group from the Chef Infra Server. Any policy revision associated with that policy group is not deleted. (The state of the policy group is backed up locally and may be restored using the <code>chef undelete</code> subcommand.)</p> <h4 id="syntax-18">Syntax</h4> <p>This subcommand has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef delete-policy-group POLICY_GROUP <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h4 id="options-18">Options</h4> <p>This subcommand has the following options:</p> <dl> <dt>
<code>-c CONFIG_FILE</code>, <code>--config CONFIG_FILE</code>
</dt> <dd> <p>The path to the knife configuration file.</p> </dd> <dt>
<code>-D</code>, <code>--debug</code>
</dt> <dd> <p>Enable stack traces and other debug output. Default value: <code>false</code>.</p> </dd> <dt>
<code>-h</code>, <code>--help</code>
</dt> <dd> <p>Show help for the command.</p> </dd> <dt>
<code>-v</code>, <code>--version</code>
</dt> <dd> <p>The Chef Infra Client version.</p> </dd> </dl> <h4 id="examples-18">Examples</h4> <p>None.</p> <h3 id="chef-diff">chef diff</h3> <p>Use the <code>chef diff</code> subcommand to display an itemized comparison of two revisions of a <code>Policyfile.lock.json</code> file.</p> <h4 id="syntax-19">Syntax</h4> <p>This subcommand has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef diff POLICY_FILE --head | --git POLICY_GROUP | POLICY_GROUP...POLICY_GROUP <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h4 id="options-19">Options</h4> <p>This subcommand has the following options:</p> <dl> <dt>
<code>-c CONFIG_FILE</code>, <code>--config CONFIG_FILE</code>
</dt> <dd> <p>The path to the knife configuration file.</p> </dd> <dt>
<code>-D</code>, <code>--debug</code>
</dt> <dd> <p>Enable stack traces and other debug output. Default value: <code>false</code>.</p> </dd> <dt>
<code>-g GIT_REF</code>, <code>--git GIT_REF</code>
</dt> <dd> <p>Compare the specified git reference against the current revision of a <code>Policyfile.lock.json</code> file or against another git reference.</p> </dd> <dt>
<code>-h</code>, <code>--help</code>
</dt> <dd> <p>Show help for the command.</p> </dd> <dt><code>--head</code></dt> <dd> <p>A shortcut for <code>chef diff --git HEAD</code>. When a git-specific flag is not provided, the on-disk <code>Policyfile.lock.json</code> file is compared to one on the Chef Infra Server or (if a <code>Policyfile.lock.json</code> file is not present on-disk) two <code>Policyfile.lock.json</code> files in the specified policy group on the Chef Infra Server are compared.</p> </dd> <dt><code>--[no-]pager</code></dt> <dd> <p>Use <code>--pager</code> to enable paged output for a <code>Policyfile.lock.json</code> file. Default value: <code>--pager</code>.</p> </dd> <dt>
<code>-v</code>, <code>--version</code>
</dt> <dd> <p>The Chef Infra Client version.</p> </dd> </dl> <h4 id="examples-19">Examples</h4> <p><strong>Compare current lock to latest commit on latest branch</strong></p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef diff --git HEAD
</code></pre></div>
<p><strong>Compare current lock with latest commit on master branch</strong></p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef diff --git master
</code></pre></div>
<p><strong>Compare current lock to specified revision</strong></p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef diff --git v1.0.0
</code></pre></div>
<p><strong>Compare lock on master branch to lock on revision</strong></p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef diff --git master...dev
</code></pre></div>
<p><strong>Compare lock for version with latest commit on master branch</strong></p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef diff --git v1.0.0...master
</code></pre></div>
<p><strong>Compare current lock with latest lock for policy group</strong></p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef diff staging
</code></pre></div>
<p><strong>Compare locks for two policy groups</strong></p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef diff production...staging
</code></pre></div>
<h3 id="chef-export">chef export</h3> <p>Use the <code>chef export</code> subcommand to create a chef-zero-compatible chef-repo that contains the cookbooks described by a <code>Policyfile.lock.json</code> file. After a chef-zero-compatible chef-repo is copied to a node, the policy can be applied locally on that machine by running <code>chef-client -z</code> (local mode).</p> <h4 id="syntax-20">Syntax</h4> <p>This subcommand has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef <span style="color:#007020">export</span> POLICY_FILE DIRECTORY <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h4 id="options-20">Options</h4> <p>This subcommand has the following options:</p> <dl> <dt>
<code>-a</code>, <code>--archive</code>
</dt> <dd> <p>Export an archive as a tarball, instead as a directory. Default value: <code>false</code>.</p> </dd> <dt>
<code>-D</code>, <code>--debug</code>
</dt> <dd> <p>Enable stack traces and other debug output. Default value: <code>false</code>.</p> </dd> <dt>
<code>-f</code>, <code>--force</code>
</dt> <dd> <p>Remove the contents of the destination directory if that directory is not empty. Default value: <code>false</code>.</p> </dd> <dt>
<code>-h</code>, <code>--help</code>
</dt> <dd> <p>Show help for the command.</p> </dd> <dt>
<code>-v</code>, <code>--version</code>
</dt> <dd> <p>The Chef Infra Client version.</p> </dd> </dl> <h4 id="examples-20">Examples</h4> <p>None.</p> <h3 id="chef-generate-policyfile">chef generate policyfile</h3> <p>Use the <code>chef generate policyfile</code> subcommand to generate a file to be used with Policyfile.</p> <h4 id="syntax-21">Syntax</h4> <p>This subcommand has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef generate policyfile POLICY_NAME <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h4 id="options-21">Options</h4> <p>This subcommand has the following options:</p> <dl> <dt>
<code>-h</code>, <code>--help</code>
</dt> <dd> <p>Show help for the command.</p> </dd> <dt>
<code>-v</code>, <code>--version</code>
</dt> <dd> <p>The Chef Infra Client version.</p> </dd> </dl> <h4 id="examples-21">Examples</h4> <p>None.</p> <h3 id="chef-install">chef install</h3> <p>Use the <code>chef install</code> subcommand to evaluate a policy file and find a compatible set of cookbooks, build a run-list, cache it locally, and then emit a <code>Policyfile.lock.json</code> file that describes the locked policy set. The <code>Policyfile.lock.json</code> file may be used to install the locked policy set to other machines and may be pushed to a policy group on the Chef Infra Server to apply that policy to a group of nodes that are under management by Chef.</p> <h4 id="syntax-22">Syntax</h4> <p>This subcommand has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef install POLICY_FILE <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h4 id="options-22">Options</h4> <p>This subcommand has the following options:</p> <dl> <dt>
<code>-D</code>, <code>--debug</code>
</dt> <dd> <p>Enable stack traces and other debug output.</p> </dd> <dt>
<code>-h</code>, <code>--help</code>
</dt> <dd> <p>Show help for the command.</p> </dd> <dt>
<code>-v</code>, <code>--version</code>
</dt> <dd> <p>The Chef Infra Client version.</p> </dd> </dl> <h4 id="policyfilelockjson">Policyfile.lock.json</h4> <p>When the <code>chef install</code> command is run, Chef Workstation caches any necessary cookbooks and emits a <code>Policyfile.lock.json</code> file that describes:</p> <ul> <li>The versions of cookbooks in use</li> <li>A Hash of cookbook content</li> <li>The source for all cookbooks</li> </ul> <p>A <code>Policyfile.lock.json</code> file is associated with a specific policy group, i.e. is associated with one (or more) nodes that use the same revision of a given policy.</p> <p>A <code>Policyfile.lock.json</code> file is similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-javascript" data-lang="javascript">{
  <span style="color:#4070a0">"revision_id"</span><span style="color:#666">:</span> <span style="color:#4070a0">"288ed244f8db8bff3caf58147e840bbe079f76e0"</span>,
  <span style="color:#4070a0">"name"</span><span style="color:#666">:</span> <span style="color:#4070a0">"jenkins"</span>,
  <span style="color:#4070a0">"run_list"</span><span style="color:#666">:</span> [
    <span style="color:#4070a0">"recipe[java::default]"</span>,
    <span style="color:#4070a0">"recipe[jenkins::master]"</span>,
    <span style="color:#4070a0">"recipe[policyfile_demo::default]"</span>
  ],
  <span style="color:#4070a0">"cookbook_locks"</span><span style="color:#666">:</span> {
    <span style="color:#4070a0">"policyfile_demo"</span><span style="color:#666">:</span> {
      <span style="color:#4070a0">"version"</span><span style="color:#666">:</span> <span style="color:#4070a0">"0.1.0"</span>,
      <span style="color:#4070a0">"identifier"</span><span style="color:#666">:</span> <span style="color:#4070a0">"f04cc40faf628253fe7d9566d66a1733fb1afbe9"</span>,
      <span style="color:#4070a0">"dotted_decimal_identifier"</span><span style="color:#666">:</span> <span style="color:#4070a0">"67638399371010690.23642238397896298.25512023620585"</span>,
      <span style="color:#4070a0">"source"</span><span style="color:#666">:</span> <span style="color:#4070a0">"cookbooks/policyfile_demo"</span>,
      <span style="color:#4070a0">"cache_key"</span><span style="color:#666">:</span> <span style="color:#007020;font-weight:700">null</span>,
      <span style="color:#4070a0">"scm_info"</span><span style="color:#666">:</span> <span style="color:#007020;font-weight:700">null</span>,
      <span style="color:#4070a0">"source_options"</span><span style="color:#666">:</span> {
        <span style="color:#4070a0">"path"</span><span style="color:#666">:</span> <span style="color:#4070a0">"cookbooks/policyfile_demo"</span>
      }
    },
  <span style="color:#4070a0">"java"</span><span style="color:#666">:</span> {
    <span style="color:#4070a0">"version"</span><span style="color:#666">:</span> <span style="color:#4070a0">"1.24.0"</span>,
    <span style="color:#4070a0">"identifier"</span><span style="color:#666">:</span> <span style="color:#4070a0">"4c24ae46a6633e424925c24e683e0f43786236a3"</span>,
    <span style="color:#4070a0">"dotted_decimal_identifier"</span><span style="color:#666">:</span> <span style="color:#4070a0">"21432429158228798.18657774985439294.16782456927907"</span>,
    <span style="color:#4070a0">"cache_key"</span><span style="color:#666">:</span> <span style="color:#4070a0">"java-1.24.0-supermarket.chef.io"</span>,
    <span style="color:#4070a0">"origin"</span><span style="color:#666">:</span> <span style="color:#4070a0">"https://supermarket.chef.io/api/v1/cookbooks/java/versions/1.24.0/download"</span>,
    <span style="color:#4070a0">"source_options"</span><span style="color:#666">:</span> {
      <span style="color:#4070a0">"artifactserver"</span><span style="color:#666">:</span> <span style="color:#4070a0">"https://supermarket.chef.io/api/v1/cookbooks/java/versions/1.24.0/download"</span>,
      <span style="color:#4070a0">"version"</span><span style="color:#666">:</span> <span style="color:#4070a0">"1.24.0"</span>
    }
</code></pre></div>
<h4 id="examples-22">Examples</h4> <p>None.</p> <h3 id="chef-push">chef push</h3> <p>Use the <code>chef push</code> subcommand to upload an existing <code>Policyfile.lock.json</code> file to the Chef Infra Server, along with all of the cookbooks that are contained in the file. The <code>Policyfile.lock.json</code> file will be applied to the specified policy group, which is a set of nodes that share the same run-list and cookbooks.</p> <h4 id="syntax-23">Syntax</h4> <p>This subcommand has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef push POLICY_GROUP POLICY_FILE <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h4 id="options-23">Options</h4> <p>This subcommand has the following options:</p> <dl> <dt>
<code>-c CONFIG_FILE</code>, <code>--config CONFIG_FILE</code>
</dt> <dd> <p>The path to the knife configuration file.</p> </dd> <dt>
<code>-D</code>, <code>--debug</code>
</dt> <dd> <p>Enable stack traces and other debug output.</p> </dd> <dt>
<code>-h</code>, <code>--help</code>
</dt> <dd> <p>Show help for the command.</p> </dd> <dt>
<code>-v</code>, <code>--version</code>
</dt> <dd> <p>The Chef Infra Client version.</p> </dd> </dl> <h4 id="examples-23">Examples</h4> <p>None.</p> <h3 id="chef-push-archive">chef push-archive</h3> <p>The <code>chef push-archive</code> subcommand is used to publish a policy archive file to the Chef Infra Server. (A policy archive is created using the <code>chef export</code> subcommand.) The policy archive is assigned to the specified policy group, which is a set of nodes that share the same run-list and cookbooks.</p> <h4 id="syntax-24">Syntax</h4> <p>This subcommand has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef push-archive POLICY_GROUP ARCHIVE_FILE <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h4 id="options-24">Options</h4> <p>This subcommand has the following options:</p> <dl> <dt>
<code>-c CONFIG_FILE</code>, <code>--config CONFIG_FILE</code>
</dt> <dd> <p>The path to the knife configuration file.</p> </dd> <dt>
<code>-D</code>, <code>--debug</code>
</dt> <dd> <p>Enable stack traces and other debug output. Default value: <code>false</code>.</p> </dd> <dt>
<code>-h</code>, <code>--help</code>
</dt> <dd> <p>Show help for the command.</p> </dd> <dt>
<code>-v</code>, <code>--version</code>
</dt> <dd> <p>The Chef Infra Client version.</p> </dd> </dl> <h4 id="examples-24">Examples</h4> <p>None.</p> <h3 id="chef-show-policy">chef show-policy</h3> <p>Use the <code>chef show-policy</code> subcommand to display revisions for every <code>Policyfile.rb</code> file that is on the Chef Infra Server. By default, only active policy revisions are shown. When both a policy and policy group are specified, the contents of the active <code>Policyfile.lock.json</code> file for the policy group is returned.</p> <h4 id="syntax-25">Syntax</h4> <p>This subcommand has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef show-policy POLICY_NAME POLICY_GROUP <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h4 id="options-25">Options</h4> <p>This subcommand has the following options:</p> <dl> <dt>
<code>-c CONFIG_FILE</code>, <code>--config CONFIG_FILE</code>
</dt> <dd> <p>The path to the knife configuration file.</p> </dd> <dt>
<code>-D</code>, <code>--debug</code>
</dt> <dd> <p>Enable stack traces and other debug output. Default value: <code>false</code>.</p> </dd> <dt>
<code>-h</code>, <code>--help</code>
</dt> <dd> <p>Show help for the command.</p> </dd> <dt>
<code>-o</code>, <code>--orphans</code>
</dt> <dd> <p>Show policy revisions that are not currently assigned to any policy group.</p> </dd> <dt><code>--[no-]pager</code></dt> <dd> <p>Use <code>--pager</code> to enable paged output for a <code>Policyfile.lock.json</code> file. Default value: <code>--pager</code>.</p> </dd> <dt>
<code>-v</code>, <code>--version</code>
</dt> <dd> <p>The Chef Infra Client version.</p> </dd> </dl> <h4 id="examples-25">Examples</h4> <p>None.</p> <h3 id="chef-undelete">chef undelete</h3> <p>Use the <code>chef undelete</code> subcommand to recover a deleted policy or policy group. This command:</p> <ul> <li>Does not detect conflicts. If a deleted item has been recreated, running this command will overwrite it</li> <li>Does not include cookbooks that may be referenced by policy files; cookbooks that are cleaned after running this command may not be fully restorable to their previous state</li> <li>Does not store access control data</li> </ul> <h4 id="syntax-26">Syntax</h4> <p>This subcommand has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef undelete <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<p>When run with no arguments, returns a list of available operations.</p> <h4 id="options-26">Options</h4> <p>This subcommand has the following options:</p> <dl> <dt>
<code>-c CONFIG_FILE</code>, <code>--config CONFIG_FILE</code>
</dt> <dd> <p>The path to the knife configuration file.</p> </dd> <dt>
<code>-D</code>, <code>--debug</code>
</dt> <dd> <p>Enable stack traces and other debug output.</p> </dd> <dt>
<code>-h</code>, <code>--help</code>
</dt> <dd> <p>Show help for the command.</p> </dd> <dt>
<code>-i ID</code>, <code>--id ID</code>
</dt> <dd> <p>Undo the delete operation specified by <code>ID</code>.</p> </dd> <dt>
<code>-l</code>, <code>--last</code>
</dt> <dd> <p>Undo the most recent delete operation.</p> </dd> <dt><code>--list</code></dt> <dd> <p>Default. Return a list of available operations.</p> </dd> <dt>
<code>-v</code>, <code>--version</code>
</dt> <dd> <p>The Chef Infra Client version.</p> </dd> </dl> <h4 id="examples-26">Examples</h4> <p>None.</p> <h3 id="chef-update">chef update</h3> <p>Use the <code>chef update</code> subcommand to read the <code>Policyfile.rb</code> file, and then apply any changes. This will resolve dependencies and will create a <code>Policyfile.lock.json</code> file. The locked policy will reflect any changes to the run-list and will pull in any cookbook updates that are compatible with any version constraints defined in the <code>Policyfile.rb</code> file.</p> <h4 id="syntax-27">Syntax</h4> <p>This subcommand has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef update POLICY_FILE <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h4 id="options-27">Options</h4> <p>This subcommand has the following options:</p> <dl> <dt>
<code>-a</code>, <code>--attributes</code>
</dt> <dd> <p>Update attributes. Default value: <code>false</code>.</p> </dd> <dt>
<code>-D</code>, <code>--debug</code>
</dt> <dd> <p>Enable stack traces and other debug output. Default value: <code>false</code>.</p> </dd> <dt>
<code>-h</code>, <code>--help</code>
</dt> <dd> <p>Show help for the command.</p> </dd> <dt>
<code>-v</code>, <code>--version</code>
</dt> <dd> <p>The Chef Infra Client version.</p> </dd> </dl> <h4 id="examples-27">Examples</h4> <p>None.</p> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef&trade; Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs.chef.io/workstation/ctl_chef/" class="_attribution-link">https://docs.chef.io/workstation/ctl_chef/</a>
  </p>
</div>
