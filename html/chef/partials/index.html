<div id="col-content" data-swiftype-index="true"> <div id="partials"><h1>Partials</h1></div> <div class="prose"> <p data-swiftype-index="false"> <a href="https://github.com/chef/chef-web-docs/blob/main/content/partials.md" alt="Link to page on GitHub repository">[edit on GitHub]</a> </p> <p><a href="https://www.infoq.com/news/2020/05/chef-infra-16/">InfoQ article</a></p> <p>Resource partials are a way of allowing resources to share common code. We recommend using partials any time you need to share code across three or more resources.</p> <p>If you have three resources all which require the properties, <code>user</code> and <code>group</code> to be set. Instead of writing those property definitions in each of those files, you can write the property definition in one file and include it in the three resources.</p> <p>The <code>use</code> method works similarly to the Ruby <code>require_relative</code> command.</p> <p>Write the common properties and place them in a folder within the resources folder. This will stop Chef from considering them to be full resources.</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby"><span style="color:#60a0b0;font-style:italic"># resources/_partial/_user.rb</span>
property <span style="color:#517918">:user</span>,
        <span style="color:#007020">String</span>,
        <span style="color:#517918">default</span>: <span style="color:#4070a0">'haproxy'</span>

property <span style="color:#517918">:group</span>, <span style="color:#007020">String</span>
        <span style="color:#007020">String</span>,
        <span style="color:#517918">default</span>: <span style="color:#4070a0">'haproxy'</span>
</code></pre></div>
<p>Then include them in each of the three resources with the use directive:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby"><span style="color:#60a0b0;font-style:italic"># resources/backend.rb</span>
use <span style="color:#4070a0">'_partial/_user'</span>
</code></pre></div>
<div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby"><span style="color:#60a0b0;font-style:italic"># resources/frontend.rb</span>
use <span style="color:#4070a0">'_partial/_user'</span>
</code></pre></div> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef&trade; Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs.chef.io/partials/" class="_attribution-link">https://docs.chef.io/partials/</a>
  </p>
</div>
