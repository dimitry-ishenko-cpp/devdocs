<div id="col-content" data-swiftype-index="true"> <div id="chef-infra-server-prerequisites"><h1>Chef Infra Server Prerequisites</h1></div>  <div class="prose"> <p data-swiftype-index="false"> <a href="https://github.com/chef/chef-server/blob/main/docs-chef-io/content/server/install_server_pre.md" alt="Link to page on GitHub repository">[edit on GitHub]</a> </p> <p>The following is a detailed discussion of the prerequisites for every installation of the Chef Infra Server. See <a href="../server/install_server/index.html">Install Chef Infra Server</a> for installation instructions.</p> <h2 id="platforms">Platforms</h2> <p>The following table lists the commercially-supported platforms and versions for the Chef Infra Server:</p> <table> <col style="width:56%"> <col style="width:20%"> <col style="width:24%"> <thead> <tr class="header"> <th>Platform</th> <th>Architecture</th> <th>Version</th> </tr> </thead> <tbody> <tr> <td>Amazon Linux 2</td> <td><code>x86_64</code></td> <td><code>2.x</code></td> </tr> <tr> <td>CentOS</td> <td><code>x86_64</code></td> <td>
<code>7.x</code>, <code>8.x</code>
</td> </tr> <tr> <td>Oracle Enterprise Linux</td> <td><code>x86_64</code></td> <td>
<code>7.x</code>, <code>8.x</code>
</td> </tr> <tr> <td>Red Hat Enterprise Linux</td> <td><code>x86_64</code></td> <td>
<code>7.x</code>, <code>8.x</code>
</td> </tr> <tr> <td>SUSE Enterprise Linux Server</td> <td><code>x86_64</code></td> <td>
<code>12.x</code>, <code>15.x</code>
</td> </tr> <tr> <td>Ubuntu</td> <td><code>x86_64</code></td> <td>
<code>16.04</code>, <code>18.04</code>, <code>20.04</code>
</td> </tr> </tbody> </table> <h3 id="untested-platforms">Untested Platforms</h3> <p>The following platforms are not tested by Chef Software:</p> <ul> <li>Any Linux or UNIX distribution that is not listed as a Foundational platform.</li> <li>Microsoft Windows</li> <li>32-bit architectures</li> </ul> <h2 id="capacity-planning">Capacity Planning</h2> <p>Read the <a href="../server/index.html#capacity-planning">guidance around capacity planning</a> for information about how to choose the right topology for the Chef Infra Server.</p> <h2 id="hardware-requirements">Hardware Requirements</h2> <p>All machines in a Chef Infra Server deployment have the following hardware requirements. Disk space for standalone and backend servers should scale up with the number of nodes that the servers are managing. A good rule to follow is to allocate 2 MB per node. The disk values listed below should be a good default value that you will want to modify later if/when your node count grows. Fast, redundant storage (SSD/RAID-based solution either on-prem or in a cloud environment) is preferred.</p> <p><strong>All Deployments</strong></p> <ul> <li>64-bit CPU architecture</li> <li>CPU support for SSE4.2 extensions (Xeons starting in 2007 and Opterons in 2012)</li> </ul> <p><strong>Standalone Deployments</strong></p> <ul> <li>4 total cores (physical or virtual)</li> <li>8 GB of RAM or more</li> <li>5 GB of free disk space in <code>/opt</code>
</li> <li>10 GB of free disk space in <code>/var</code>
</li> </ul> <p>For a high availability deployment:</p> <p><strong>General Requirements</strong></p> <ul> <li>Three backend servers; as many frontend servers as required</li> <li>1 x GigE NIC interface (if on premises)</li> </ul> <p><strong>Frontend Requirements</strong></p> <ul> <li>4 cores (physical or virtual)</li> <li>4GB RAM</li> <li>20 GB of free disk space (SSD if on premises, Premium Storage in Microsoft Azure, EBS-Optimized GP2 in AWS)</li> </ul> <p><strong>Backend Requirements</strong></p> <ul> <li>2 cores (physical or virtual)</li> <li>8GB RAM</li> <li>50 GB/backend server (SSD if on premises, Premium Storage in Microsoft Azure, EBS-Optimized GP2 in AWS)</li> </ul> <div class="admonition-warning"> <p class="admonition-warning-title">Warning</p> <div class="admonition-warning-text"> <p>The Chef Infra Server MUST NOT use a network file system of any type—virtual or physical—for backend storage. The Chef Infra Server database operates quickly. The behavior of operations, such as the writing of log files, will be unpredictable when run over a network file system.</p> </div> </div> <h2 id="software-requirements">Software Requirements</h2> <p>Before installing the Chef Infra Server, ensure that each machine has the following installed and configured properly:</p> <ul> <li>
<strong>Hostnames</strong> — Ensure that all systems have properly configured hostnames. The hostname for the Chef Infra Server must be a FQDN, have fewer than 64 characters including the domain suffix, be lowercase, and resolvable. See <a href="../install_server_pre.html#hostnames">Hostnames, FQDNs</a> for more information</li> <li>
<strong>FQDNs</strong> — Ensure that all systems have a resolvable FQDN</li> <li>
<strong>NTP</strong> — Ensure that every server is connected to NTP; the Chef Infra Server is sensitive to clock drift</li> <li>
<strong>Mail Relay</strong> — The Chef Infra Server uses email to send notifications for various events; a local mail transfer agent should be installed and available to the Chef server</li> <li>
<strong>cron</strong> — Periodic maintenance tasks are performed using cron</li> <li>
<strong>git</strong> — git must be installed so that various internal services can confirm revisions</li> <li>
<strong>Apache Qpid</strong> — This daemon must be disabled on CentOS and Red Hat systems</li> <li>
<strong>Required users</strong> — If the environment in which the Chef Infra Server will run has restrictions on the creation of local user and group accounts, ensure that the correct users and groups exist before reconfiguring</li> <li>
<strong>Firewalls and ports</strong> — If host-based firewalls (iptables, ufw, etc.) are being used, ensure that ports 80 and 443 are open.</li> </ul> <p>In addition:</p> <ul> <li>
<strong>Browser</strong> — Firefox, Google Chrome, Safari, or Internet Explorer (versions 9 or better)</li> <li>
<strong>Chef Infra Client communication with the Chef Infra Server</strong> The Chef Infra Server must be able to communicate with every node that will be configured by Chef Infra Client and every workstation that will upload data to the Chef Infra</li> </ul> <h3 id="uids-and-gids">UIDs and GIDs</h3> <p>The installation process for the Chef Infra Server requires the use of at least two user and group identifiers (UIDs and GIDs). These are used to create the <code>opscode</code> and <code>opscode-pgsql</code> users and their default groups.</p> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> <p>The creation of required user and group identifiers is done <strong>automatically</strong> during the installation process for the Chef Infra Server; however, the following user and group accounts <strong>may</strong> be created in advance of installing the Chef Infra Server if specific UIDs and GIDs are preferred. The user <strong>and</strong> group must be created as a pair to satisfy reconfiguration requirements.</p> <ul> <li>A local user account named <code>opscode</code> under which services will run</li> <li>A local user account named <code>opscode-pgsql</code> that is used by PostgreSQL</li> <li>A group account for each user account, one named <code>opscode</code> and the other named <code>opscode-pgsql</code> under which services will run</li> </ul> </div> </div> <div class="admonition-warning"> <p class="admonition-warning-title">Warning</p> <div class="admonition-warning-text"> <p>If the UID and GID of <code>opscode</code> and <code>opscode-pgsql</code> do not match on both backend Chef Infra Server machines, a high availability configuration will not run correctly.</p> <p>The embedded Chef Infra Server cookbooks can handle two cases:</p> <ul> <li>Both <code>opscode</code> and <code>opscode-pgsql</code> user and group not found on the new server</li> <li>Both <code>opscode</code> and <code>opscode-pgsql</code> user and group found on the new server</li> </ul> <p>Having only the group and not the corresponding users present during a chef-server-ctl reconfigure is unsupported and may lead to an error in the reconfiguration run.</p> <p>To determine the current range of IDs, run the following command:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">grep -E <span style="color:#4070a0">'(UID|GID)'</span> /etc/login.defs
</code></pre></div>
<p>The defaults for CentOS and Red Hat Enterprise Linux systems look like this:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">UID_MIN             <span style="color:#40a070">500</span>
UID_MAX           <span style="color:#40a070">60000</span>
GID_MIN             <span style="color:#40a070">500</span>
GID_MAX           <span style="color:#40a070">60000</span>
</code></pre></div>
<p>If the defaults have been changed for any reason, and if that change would result in less than 2 UID/GIDs being available to the <code>useradd</code> program, edit <code>/etc/login.defs</code> with changes to make at least 2 more UIDs and GIDs available for association. The currently used ID ranges for UIDs and GIDs can be found in <code>/etc/passwd</code> and <code>/etc/group</code>, respectively.</p> <p>If the <code>opscode</code> and <code>opscode-pgsql</code> user and group identifiers exist prior to installing the Chef Infra Server, the Chef Infra Server installation process will use the existing identifiers instead of creating them.</p> </div> </div> <h3 id="firewalls">Firewalls</h3> <h4 id="iptables">iptables</h4> <p>To allow access to your Chef Infra Server on ports 80 and 443 via the iptables firewall, issue the following command with root privileges:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">iptables -A INPUT -p tcp -m multiport --destination-ports 80,443 -j ACCEPT
</code></pre></div>
<p>Note that you will need to make use of a tool such as <a href="https://packages.ubuntu.com/xenial/admin/iptables-persistent">iptables-persistent</a> to restore your iptables rules upon reboot.</p> <h4 id="firewalld">FirewallD</h4> <p>On RHEL and CentOS versions 7 and above, the FirewallD firewall is enabled by default. Issue the following command with root privileges to open ports 80 and 443:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">firewall-cmd --permanent --zone public --add-service http <span style="color:#666">&amp;&amp;</span> firewall-cmd --permanent --zone public --add-service https <span style="color:#666">&amp;&amp;</span> firewall-cmd --reload
</code></pre></div>
<h4 id="ufw">UFW</h4> <p>While UFW is installed on Ubuntu, it is not enabled by default. However, if you wish to use a UFW-based firewall on your Chef Infra Server, issue the following command with root privileges to open ports 80 and 443:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">ufw allow proto tcp from any to any port 80,443
</code></pre></div>
<h3 id="security-modules">Security Modules</h3> <h4 id="selinux">SELinux</h4> <p>On CentOS and Red Hat Enterprise Linux systems, SELinux is enabled in enforcing mode by default. The Chef Infra Server does not have a profile available to run under SELinux. In order for the Chef Infra Server to run, SELinux must be disabled or set to <code>Permissive</code> mode.</p> <p>To determine if SELinux is installed, run the following command:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">getenforce
</code></pre></div>
<p>If a response other than <code>"Disabled"</code> or <code>"Permissive"</code> is returned, SELinux must be disabled.</p> <p>To set SELinux to <code>Permissive</code> mode, run:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">setenforce Permissive
</code></pre></div>
<p>and then check the status:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">getenforce
</code></pre></div>
<h4 id="apparmor">AppArmor</h4> <p>On Ubuntu systems, AppArmor is enabled in enforcing mode by default. Chef products do not have a profile available to run under AppArmor. In order for the Chef products to run, AppArmor must set to <code>Complaining</code> mode or disabled.</p> <p>To determine if AppArmor is installed, run the following command:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">sudo apparmor_status
</code></pre></div>
<p>To install AppArmor, run the following command:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">sudo apt-get install apparmor-utils -yes
</code></pre></div>
<p>If a response other than <code>"0 processes are in enforce mode"</code> or <code>"0 profiles are in enforce mode."</code> is returned, AppArmor must be set to <code>Complaining</code> mode or disabled.</p> <p>To set AppArmor to <code>Complaining</code> mode, run:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">sudo aa-complain /etc/apparmor.d/*
</code></pre></div>
<p>Or to disable AppArmor entirely, run:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">sudo invoke-rc.d apparmor <span style="color:#007020">kill</span>
sudo update-rc.d -f apparmor remove
</code></pre></div>
<p>and then check the status:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">sudo apparmor_status
</code></pre></div>
<h3 id="apache-qpid">Apache Qpid</h3> <p>On CentOS and Red Hat Enterprise Linux systems, the Apache Qpid daemon is installed by default.</p> <p>To determine if Apache Qpid is installed, run the following command:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">rpm -qa | grep qpid
</code></pre></div>
<p>If Apache Qpid is installed, a response similar to the following is displayed:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">qpid-cpp-server-0.12-6.el6.x86_64
</code></pre></div>
<p>To disable Apache Qpid run:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">service qpidd stop
</code></pre></div>
<p>and then:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chkconfig --del qpidd
</code></pre></div>
<h3 id="cron">cron</h3> <p>Periodic maintenance tasks are performed on the Chef Infra Server servers via cron and the <code>/etc/cron.d</code> directory. With certain CentOS 6 configurations, an additional step is required to install crontab:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">yum install crontabs
</code></pre></div>
<h3 id="enterprise-linux-updates">Enterprise Linux Updates</h3> <p>The Chef Infra Server requires an x86_64 compatible systems architecture. When the Chef Infra Server is installed on Red Hat Enterprise Linux or CentOS, run <code>yum update</code> prior to installing the Chef Infra Server. This will ensure those platforms are fully compatible with this requirement.</p> <h3 id="ip-addresses">IP Addresses</h3> <p>Unless you intend to operate the Chef Infra Server in IPv6 mode, you should disable ipv6 in the system’s <code>/etc/hosts</code> file by commenting out or removing all references to IPv6 addresses like “::1” or “fe80:db8:85a3:8d3:1319:8a2e:370:7348”.</p> <p>Without these changes, a Chef Infra Server install intended to run in ipv4 mode will mistakenly only start the postgres service on the ipv6 loopback address of “::1” rather than the ipv4 loopback address of 127.0.0.1. This will make further progress through an initial reconfiguration impossible.</p> <h3 id="hostnames">Hostnames</h3> <p>The hostname for the Chef Infra Server may be specified using a FQDN or an IP address. This hostname must be resolvable, be 64 characters or less, and be lowercase. For example, a Chef Infra Server running in a production environment with a resolvable FQDN hostname can be added the DNS system. But when deploying Chef Infra Server into a testing environment, adding the hostname to the <code>/etc/hosts</code> file is enough to ensure that hostname is resolvable.</p> <ul> <li> <p><strong>FQDN Hostnames</strong> When the hostname for the Chef Infra Server is a FQDN be sure to include the domain suffix. For example, something like <code>mychefserver.example.com</code> (and not something like <code>mychefserver</code>).</p> </li> <li> <p><strong>IP Address Hostnames</strong> When the Chef Infra Server is run in IPv6 mode, a hostname specified using an IP address must also be bracketed (<code>[ ]</code>) or the Chef Infra Server will not be able to recognize it as an IPv6 address. For example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">bookshelf<span style="color:#666">[</span><span style="color:#4070a0">'url'</span><span style="color:#666">]</span> <span style="color:#4070a0">"https://[2001:db8:85a3:8d3:1319:8a2e:370:7348]"</span>
</code></pre></div>
</li> </ul> <p>The <code>api_fqdn</code> setting can be added to the private-chef.rb file (it is not there by default). When added, its value should be equal to the FQDN or IP address for the service URI used by the Chef Infra Server. Then configure the same value for the <code>bookshelf['vip']</code> setting prior to installing the Chef Infra Server. For example: <code>api_fqdn "chef.example.com"</code> or <code>api_fqdn 123.45.67.890</code>.</p> <h4 id="configure-hostnames">Configure Hostnames</h4> <p>Use the following sections to verify the hostnames that is used by the Chef Infra Server.</p> <p><strong>To verify if a hostname is a FQDN</strong></p> <p>To verify if a hostname is a FQDN, run the following command:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">hostname
</code></pre></div>
<p>If the hostname is a FQDN, it will return something like:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">mychefserver.example.com
</code></pre></div>
<p>If the hostname is not a FQDN, it must be configured so that it is one.</p> <p><strong>To verify the FQDN is all lowercase</strong></p> <p>To verify if the alphabetic parts of a FQDN are all lowercase, run the following command:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">hostname -f | grep -E <span style="color:#4070a0">'^([[:digit:]]|[[:lower:]]|\.|-|_)+$'</span> <span style="color:#666">&amp;&amp;</span> <span style="color:#007020">echo</span> yes
</code></pre></div>
<p>If the hostname is all lowercase, it will return something like:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">mychefserver.example.com
yes
</code></pre></div>
<p>If the hostname’s alphabetic parts are not all lowercase, it must be configured so that they are.</p> <p><strong>To verify a hostname is resolvable</strong></p> <p>To verify is a hostname is resolvable, run the following command:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">hostname -f
</code></pre></div>
<p>If the hostname is resolvable, it will return something like:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">mychefserver.example.com
</code></pre></div>
<p><strong>To change a hostname</strong></p> <p>In some cases, the hostname for the Chef Infra Server needs to be updated. The process for updating a hostname varies, depending on the platform on which the Chef Infra Server will run. Refer to the manual for the platform or contact a local systems administrator for specific guidance for a specific platform. The following example shows how a hostname can be changed when running Red Hat or CentOS:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">sudo hostname <span style="color:#4070a0">'mychefserver.example.com'</span>
</code></pre></div>
<p>and then:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash"><span style="color:#007020">echo</span> <span style="color:#4070a0">"mychefserver.example.com"</span> | sudo tee /etc/hostname
</code></pre></div>
<p><strong>To add a hostname to /etc/hosts</strong></p> <p>If a hostname is not resolvable, refer to a local systems administrator for specific guidance on how to add the hostname to the DNS system. If the Chef Infra Server is being into a testing environment, just add the hostname to <code>/etc/hosts</code>. The following example shows how a hostname can be added to <code>/etc/hosts</code> when running Red Hat or CentOS:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash"><span style="color:#007020">echo</span> -e <span style="color:#4070a0">"127.0.0.2 `hostname` `hostname -s`"</span> | sudo tee -a /etc/hosts
</code></pre></div>
<div class="admonition-warning"> <p class="admonition-warning-title">Warning</p> <div class="admonition-warning-text"> The FQDN for the Chef Infra Server should be resolvable, lowercase, and should not exceed 64 characters when using OpenSSL, as OpenSSL requires the <code>CN</code> in a certificate to be no longer than 64 characters. </div> </div> <h3 id="mail-relay">Mail Relay</h3> <p>The Chef Infra Server server uses email to send notifications for various events:</p> <ul> <li>Password resets</li> <li>User invitations</li> <li>Failover notifications</li> <li>Failed job notifications</li> </ul> <p>Configure a local mail transfer agent on the Chef Infra Server using the steps appropriate for the platform on which the Chef Infra Server is running.</p> <h3 id="ntp">NTP</h3> <p>The Chef Infra Server requires that the systems on which it is running be connected to Network Time Protocol (NTP), as the Chef Infra Server is particularly sensitive to clock drift. For Red Hat and CentOS 6:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">yum install ntp
</code></pre></div>
<p>or:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chkconfig ntpd on
</code></pre></div>
<p>or:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">service ntpd start
</code></pre></div>
<p>For Ubuntu:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">apt-get install ntp
</code></pre></div>
<h4 id="chef-infra-client">Chef Infra Client</h4> <p>The Chef Infra Server server requires that every node that is under management by Chef also have an accurate clock that is synchronized very closely with the clock on the Chef Infra Server. If the clocks are not synchronized closely, the authentication process may fail when the clocks are out-of-sync by more than 15 minutes. A failure will trigger a <code>401 Unauthorized</code> response similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash"><span style="color:#666">[</span>Tue, <span style="color:#40a070">01</span> Nov <span style="color:#40a070">2011</span> 16:55:23 -0700<span style="color:#666">]</span> INFO: *** Chef 11.X.X ***
<span style="color:#666">[</span>Tue, <span style="color:#40a070">01</span> Nov <span style="color:#40a070">2011</span> 16:55:23 -0700<span style="color:#666">]</span> INFO: Client key /etc/chef/client.pem is not present - registering
<span style="color:#666">[</span>Tue, <span style="color:#40a070">01</span> Nov <span style="color:#40a070">2011</span> 16:55:24 -0700<span style="color:#666">]</span> INFO: HTTP Request Returned <span style="color:#40a070">401</span> Unauthorized:
    Failed to authenticate as ORGANIZATION-validator. Synchronize the clock on your host.
<span style="color:#666">[</span>Tue, <span style="color:#40a070">01</span> Nov <span style="color:#40a070">2011</span> 16:55:24 -0700<span style="color:#666">]</span> FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
<span style="color:#666">[</span>Tue, <span style="color:#40a070">01</span> Nov <span style="color:#40a070">2011</span> 16:55:24 -0700<span style="color:#666">]</span> FATAL: Net::HTTPClientException: <span style="color:#40a070">401</span> <span style="color:#4070a0">"Unauthorized"</span>
</code></pre></div>
<p>In this situation, re-synchronize the system clocks with the Network Time Protocol (NTP) server, and then re-run Chef Infra Client.</p> <h3 id="required-accounts">Required Accounts</h3> <p>By default, accounts required by the Chef Infra Server are created during setup. If your environment has restrictions on the creation of local user and group accounts that will prevent these accounts from being created automatically during setup, you will need to create these accounts.</p> <h4 id="group-accounts">Group Accounts</h4> <p>The following group accounts are required:</p> <table> <col style="width:12%"> <col style="width:87%"> <thead> <tr class="header"> <th>Group Account</th> <th>Description</th> </tr> </thead> <tbody> <tr class="odd"> <td><code>opscode</code></td> <td>The group name under which services will run.</td> </tr> </tbody> </table> <h4 id="user-accounts">User Accounts</h4> <p>The following user accounts are required:</p> <table> <col style="width:12%"> <col style="width:87%"> <thead> <tr class="header"> <th>User Account</th> <th>Description</th> </tr> </thead> <tbody> <tr class="odd"> <td><code>opscode</code></td> <td>The user name under which services will run.</td> </tr> <tr class="even"> <td><code>opscode-pgsql</code></td> <td>The user name for PostgreSQL. (This is only required on the back end servers in a high availability setup.)</td> </tr> </tbody> </table> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef&trade; Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs.chef.io/install_server_pre/" class="_attribution-link">https://docs.chef.io/install_server_pre/</a>
  </p>
</div>
