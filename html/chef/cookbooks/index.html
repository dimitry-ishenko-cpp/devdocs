<div id="col-content" data-swiftype-index="true"> <div id="about-cookbooks"><h1>About Cookbooks</h1></div>  <div class="prose"> <p data-swiftype-index="false"> <a href="https://github.com/chef/chef-web-docs/blob/main/content/cookbooks.md" alt="Link to page on GitHub repository">[edit on GitHub]</a> </p> <p>A cookbook is the fundamental unit of configuration and policy distribution in Chef Infra.</p> <p>A cookbook defines a scenario and contains everything that is required to support that scenario:</p> <ul> <li>Recipes that specify which Chef Infra built-in resources to use, as well as the order in which they are to be applied</li> <li>Attribute values, which allow environment-based configurations such as <code>dev</code> or <code>prodution</code>.</li> <li>Custom Resources for extending Chef Infra beyond the built-in resources.</li> <li>Files and Templates for distributing information to systems.</li> <li>Custom Ohai Plugins for extending system configuration collection beyond the Ohai defaults.</li> <li>The <code>metadata.rb</code> file, which describes the cookbook itself and any dependencies it may have.</li> </ul> <p>The Chef Infra Language is based on Ruby, allowing you to utilize the power of Ruby when the built-in language doesn’t meet your needs out of the box. If you’d like to learn more about extending your Chef Infra code by using Ruby see our <a href="../ruby/index.html">Ruby Guide</a> for further information on Ruby functionality.</p> <p>The Chef Infra Language is a comprehensive systems configuration language with resources and helpers for configuring operating systems. The language is primarily used in Chef Infra recipes and custom resources to tell the Chef Infra Client what action(s) to take to configure a system. The Chef Infra Language provides resources for system-level components such as packages, users, or firewalls, and it also includes helpers to allow you to make configuration decisions based on operating systems, clouds, virtualization hypervisors, and more.</p> <p>Chef Infra Client runs a recipe only when instructed. When Chef Infra Client runs the same recipe more than once, the results will be the same system state each time. When a recipe is run against a system, but nothing has changed on either the system or in the recipe, Chef Infra Client won’t change anything.</p> <h2 id="components">Components</h2> <p>A cookbook is comprised of recipes and other optional components as files or directories.</p> <table> <col style="width:16%"> <col style="width:8%"> <col style="width:75%"> <thead> <tr class="header"> <th>Component</th> <th>File/Directory Name</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><a href="../recipes/index.html">Recipes</a></td> <td>recipes/</td> <td> <p>A recipe is the most fundamental configuration element within the organization. A recipe:</p> <ul> <li>Is authored using Ruby, which is a programming language designed to read and behave in a predictable manner</li> <li>Is mostly a collection of <a href="../resources/index.html">resources</a>, defined using patterns (resource names, attribute-value pairs, and actions); helper code is added around this using Ruby, when needed</li> <li>Must define everything that is required to configure part of a system</li> <li>Must be stored in a cookbook</li> <li>May be included in another recipe</li> <li>May use the results of a search query and read the contents of a data bag (including an encrypted data bag)</li> <li>May have a dependency on one (or more) recipes</li> <li>Must be added to a run-list before it can be used by Chef Infra Client</li> <li>Is always executed in the same order as listed in a run-list</li> </ul> </td> </tr> <tr> <td><a href="../attributes/index.html">Attributes</a></td> <td>attributes/</td> <td> An attribute can be defined in a cookbook (or a recipe) and then used to override the default settings on a node. When a cookbook is loaded during a Chef Infra Client run, these attributes are compared to the attributes that are already present on the node. Attributes that are defined in attribute files are first loaded according to cookbook order. For each cookbook, attributes in the <code>default.rb</code> file are loaded first, and then additional attribute files (if present) are loaded in lexical sort order. When the cookbook attributes take precedence over the default attributes, Chef Infra Client applies those new settings and values during a Chef Infra Client run on the node. </td> </tr> <tr> <td><a href="../files/index.html">Files</a></td> <td>files/</td> <td>A file distribution is a specific type of resource that tells a cookbook how to distribute files, including by node, by platform, or by file version.</td> </tr> <tr> <td><a href="../libraries/index.html">Libraries</a></td> <td>libraries/</td> <td>A library allows the use of arbitrary Ruby code in a cookbook, either as a way to extend the Chef Infra Client language or to implement a new class.</td> </tr> <tr> <td><a href="../custom_resources/index.html">Custom Resources</a></td> <td>resources/</td> <td>A custom resource is an abstract approach for defining a set of actions and (for each action) a set of properties and validation parameters.</td> </tr> <tr> <td><a href="../templates/index.html">Templates</a></td> <td>templates/</td> <td>A template is a file written in markup language that uses Ruby statements to solve complex configuration scenarios.</td> </tr> <tr> <td><a href="../ohai_custom/index.html">Ohai Plugins</a></td> <td>ohai/</td> <td>Custom Ohai plugins can be written to load additional information about your nodes to be used in recipes. This requires Chef Infra Server 12.18.14 or later.</td> </tr> <tr> <td><a href="../config_rb_metadata/index.html">Metadata</a></td> <td>metadata.rb</td> <td>This file contains information about the cookbook such as the cookbook name, description, and <a href="../cookbook_versioning/index.html">version</a>.</td> </tr> </tbody> </table> <h2 id="community-cookbooks">Community Cookbooks</h2> <p>Chef maintains a large collection of cookbooks. In addition, there are thousands of cookbooks created and maintained by the community:</p> <table> <col style="width:25%"> <col style="width:75%"> <thead> <tr class="header"> <th>Components</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://github.com/chef-cookbooks">Cookbooks Maintained by Chef</a></td> <td>Chef maintains a collection of cookbooks that are widely used by the community.</td> </tr> <tr> <td><a href="https://github.com/sous-chefs">Cookbooks Maintained by Sous Chefs</a></td> <td>Sous Chefs is a community organization that collaborates to maintain many of the most used Chef cookbooks.</td> </tr> <tr> <td><a href="https://supermarket.chef.io/cookbooks">Cookbooks Maintained by the Community</a></td> <td>The community has authored thousands of cookbooks, ranging from niche cookbooks that are used by only a few organizations to popular cookbooks used by nearly everyone.</td> </tr> </tbody> </table> <h2 id="generate-a-cookbook">Generate a Cookbook</h2> <p>Use the <a href="../workstation/ctl_chef/index.html#chef-generate-cookbook">chef generate cookbook subcommand</a> to generate a cookbook.</p> <p>A cookbook generated with<code>chef generate cookbook custom_web</code> creates a cookbook named <code>custom_web</code> with the directory structure:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-text" data-lang="text">├ cookbooks
 ├ custom_web
 | ├ .delivery
 | | └ project.toml
 | ├ recipes
 | | └ default.rb
 | ├ test
 | | └ integration
 | | | └ default
 | | | | └ default_test.rb
 | ├ .gitignore
 | ├ CHANGELOG.md
 | ├ chefignore
 | ├ kitchen.yml
 | ├ LICENSE
 | ├ metadata.rb
 | ├ Policyfile.rb
 | └ README.md
</code></pre></div> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef&trade; Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs.chef.io/cookbooks/" class="_attribution-link">https://docs.chef.io/cookbooks/</a>
  </p>
</div>
