<header> <h1>QUnit.onUncaughtException()</h1> <p class="post-meta">Categories: <a class="category" href="https://qunitjs.com/api/extension/">Extension interface</a>.</p> </header> <p class="version-details"> version added: <a href="https://github.com/qunitjs/qunit/releases/tag/2.17.0">2.17.0</a><span class="sep">.</span></p> <h2 id="description" class="screen-reader-text h-api-desc">Description</h2> <p><code class="language-plaintext highlighter-rouge">QUnit.onUncaughtException( error )</code></p> <p>Report a global error that should result in a failed test run.</p> <table> <thead> <tr> <th>name</th> <th>description</th> </tr> </thead> <tbody> <tr> <td>
<code class="language-plaintext highlighter-rouge">error</code> (any)</td> <td>Usually an <code class="language-plaintext highlighter-rouge">Error</code> object, but any other thrown or rejected value may be given as well.</td> </tr> </tbody> </table> <p>This method can be safely called at any time, including between or outside tests. It is designed for use by plugins and integration layers.</p> <p>In general, you should not use this method and instead throw an error. QUnit automatically finds and reports uncaught errors. The following are handled by default and should not be connected to <code class="language-plaintext highlighter-rouge">QUnit.onUncaughtException()</code> a second time:</p> <ul> <li>HTML Runner: <code class="language-plaintext highlighter-rouge">window.onerror</code>
</li> <li>HTML Runner: <code class="language-plaintext highlighter-rouge">window.addEventListener('unhandledrejection', …)</code>
</li> <li>QUnit CLI: <code class="language-plaintext highlighter-rouge">process.on('unhandledRejection', …)</code>
</li> <li>QUnit CLI: <code class="language-plaintext highlighter-rouge">process.on('uncaughtException', …)</code>
</li> </ul> <p>When QUnit receives report of a global error strictly inside a test (or one of its module hooks), the exception is reported to the currently running test as extra failed assertion, and thus the test will be marked as failed. This means that uncaught exceptions (such as calling an undefined function) during <a href="../qunit/test.todo.html">QUnit.test.todo</a> callback count as expected failure and <strong>not</strong> fail the test run.</p> <p>Errors received before tests (e.g. early event callbacks), internally between tests, or around the <a href="../callbacks/qunit.on.html#the-runend-event">runEnd event</a> (if the process is still alive for some reason), are emitted as an <a href="../callbacks/qunit.on.html#the-error-event">“error” event</a> to reporters.</p> <h2 id="examples">Examples</h2> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="javascript">const error = new Error('Failed to reverse the polarity of the neutron flow');
QUnit.onUncaughtException(error);
</pre></div></div> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="javascript">process.on('unhandledExample', QUnit.onUncaughtException);
</pre></div></div> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="javascript">window.addEventListener('unhandledexample', function (event) {
  QUnit.onUncaughtException(event.reason);
});
</pre></div></div><div class="_attribution">
  <p class="_attribution-p">
    &copy; OpenJS Foundation and contributors.<br>Licensed under the MIT license.<br>
    <a href="https://qunitjs.com/api/extension/QUnit.onUncaughtException" class="_attribution-link">https://qunitjs.com/api/extension/QUnit.onUncaughtException</a>
  </p>
</div>
