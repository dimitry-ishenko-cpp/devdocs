<h1>ExtUtils::MM_Any</h1>   <h2><a id="toc">CONTENTS</a></h2> <ul> <li> <a class="text-decoration-none" href="#NAME">NAME</a> </li> <li> <a class="text-decoration-none" href="#SYNOPSIS">SYNOPSIS</a> </li> <li> <a class="text-decoration-none" href="#DESCRIPTION">DESCRIPTION</a> </li> <li> <a class="text-decoration-none" href="#METHODS">METHODS</a> <ul> <li> <a class="text-decoration-none" href="#Cross-platform-helper-methods">Cross-platform helper methods</a> <ul> <li> <a class="text-decoration-none" href="#os_flavor-Abstract">os_flavor Abstract</a> </li> <li> <a class="text-decoration-none" href="#os_flavor_is">os_flavor_is</a> </li> <li> <a class="text-decoration-none" href="#can_load_xs">can_load_xs</a> </li> <li> <a class="text-decoration-none" href="#can_run">can_run</a> </li> <li> <a class="text-decoration-none" href="#can_redirect_error">can_redirect_error</a> </li> <li> <a class="text-decoration-none" href="#is_make_type">is_make_type</a> </li> <li> <a class="text-decoration-none" href="#can_dep_space">can_dep_space</a> </li> <li> <a class="text-decoration-none" href="#quote_dep">quote_dep</a> </li> <li> <a class="text-decoration-none" href="#split_command">split_command</a> </li> <li> <a class="text-decoration-none" href="#make_type">make_type</a> </li> <li> <a class="text-decoration-none" href="#stashmeta">stashmeta</a> </li> <li> <a class="text-decoration-none" href="#echo">echo</a> </li> <li> <a class="text-decoration-none" href="#wraplist">wraplist</a> </li> <li> <a class="text-decoration-none" href="#maketext_filter">maketext_filter</a> </li> <li> <a class="text-decoration-none" href="#cd-Abstract">cd Abstract</a> </li> <li> <a class="text-decoration-none" href="#oneliner-Abstract">oneliner Abstract</a> </li> <li> <a class="text-decoration-none" href="#quote_literal-Abstract">quote_literal Abstract</a> </li> <li> <a class="text-decoration-none" href="#escape_dollarsigns">escape_dollarsigns</a> </li> <li> <a class="text-decoration-none" href="#escape_all_dollarsigns">escape_all_dollarsigns</a> </li> <li> <a class="text-decoration-none" href="#escape_newlines-Abstract">escape_newlines Abstract</a> </li> <li> <a class="text-decoration-none" href="#max_exec_len-Abstract">max_exec_len Abstract</a> </li> <li> <a class="text-decoration-none" href="#make">make</a> </li> </ul> </li> <li> <a class="text-decoration-none" href="#Targets">Targets</a> <ul> <li> <a class="text-decoration-none" href="#all_target">all_target</a> </li> <li> <a class="text-decoration-none" href="#blibdirs_target">blibdirs_target</a> </li> <li> <a class="text-decoration-none" href="#clean-(o)">clean (o)</a> </li> <li> <a class="text-decoration-none" href="#clean_subdirs_target">clean_subdirs_target</a> </li> <li> <a class="text-decoration-none" href="#dir_target">dir_target</a> </li> <li> <a class="text-decoration-none" href="#distdir">distdir</a> </li> <li> <a class="text-decoration-none" href="#dist_test">dist_test</a> </li> <li> <a class="text-decoration-none" href="#xs_dlsyms_arg">xs_dlsyms_arg</a> </li> <li> <a class="text-decoration-none" href="#xs_dlsyms_ext">xs_dlsyms_ext</a> </li> <li> <a class="text-decoration-none" href="#xs_dlsyms_extra">xs_dlsyms_extra</a> </li> <li> <a class="text-decoration-none" href="#xs_dlsyms_iterator">xs_dlsyms_iterator</a> </li> <li> <a class="text-decoration-none" href="#xs_make_dlsyms">xs_make_dlsyms</a> </li> <li> <a class="text-decoration-none" href="#dynamic-(o)">dynamic (o)</a> </li> <li> <a class="text-decoration-none" href="#makemakerdflt_target">makemakerdflt_target</a> </li> <li> <a class="text-decoration-none" href="#manifypods_target">manifypods_target</a> </li> <li> <a class="text-decoration-none" href="#metafile_target">metafile_target</a> </li> <li> <a class="text-decoration-none" href="#metafile_data">metafile_data</a> </li> <li> <a class="text-decoration-none" href="#metafile_file">metafile_file</a> </li> <li> <a class="text-decoration-none" href="#distmeta_target">distmeta_target</a> </li> <li> <a class="text-decoration-none" href="#mymeta">mymeta</a> </li> <li> <a class="text-decoration-none" href="#write_mymeta">write_mymeta</a> </li> <li> <a class="text-decoration-none" href="#realclean-(o)">realclean (o)</a> </li> <li> <a class="text-decoration-none" href="#realclean_subdirs_target">realclean_subdirs_target</a> </li> <li> <a class="text-decoration-none" href="#signature_target">signature_target</a> </li> <li> <a class="text-decoration-none" href="#distsignature_target">distsignature_target</a> </li> <li> <a class="text-decoration-none" href="#special_targets">special_targets</a> </li> </ul> </li> <li> <a class="text-decoration-none" href="#Init-methods">Init methods</a> <ul> <li> <a class="text-decoration-none" href="#init_ABSTRACT">init_ABSTRACT</a> </li> <li> <a class="text-decoration-none" href="#init_INST">init_INST</a> </li> <li> <a class="text-decoration-none" href="#init_INSTALL">init_INSTALL</a> </li> <li> <a class="text-decoration-none" href="#init_INSTALL_from_PREFIX">init_INSTALL_from_PREFIX</a> </li> <li> <a class="text-decoration-none" href="#init_from_INSTALL_BASE">init_from_INSTALL_BASE</a> </li> <li> <a class="text-decoration-none" href="#init_VERSION-Abstract">init_VERSION Abstract</a> </li> <li> <a class="text-decoration-none" href="#init_tools">init_tools</a> </li> <li> <a class="text-decoration-none" href="#init_others">init_others</a> </li> <li> <a class="text-decoration-none" href="#tools_other">tools_other</a> </li> <li> <a class="text-decoration-none" href="#init_DIRFILESEP-Abstract">init_DIRFILESEP Abstract</a> </li> <li> <a class="text-decoration-none" href="#init_linker-Abstract">init_linker Abstract</a> </li> <li> <a class="text-decoration-none" href="#init_platform">init_platform</a> </li> <li> <a class="text-decoration-none" href="#init_MAKE">init_MAKE</a> </li> </ul> </li> <li> <a class="text-decoration-none" href="#Tools">Tools</a> <ul> <li> <a class="text-decoration-none" href="#manifypods">manifypods</a> </li> <li> <a class="text-decoration-none" href="#POD2MAN_macro">POD2MAN_macro</a> </li> <li> <a class="text-decoration-none" href="#test_via_harness">test_via_harness</a> </li> <li> <a class="text-decoration-none" href="#test_via_script">test_via_script</a> </li> <li> <a class="text-decoration-none" href="#tool_autosplit">tool_autosplit</a> </li> <li> <a class="text-decoration-none" href="#arch_check">arch_check</a> </li> </ul> </li> <li> <a class="text-decoration-none" href="#File::Spec-wrappers">File::Spec wrappers</a> <ul> <li> <a class="text-decoration-none" href="#catfile">catfile</a> </li> </ul> </li> <li> <a class="text-decoration-none" href="#Misc">Misc</a> <ul> <li> <a class="text-decoration-none" href="#find_tests">find_tests</a> </li> <li> <a class="text-decoration-none" href="#find_tests_recursive">find_tests_recursive</a> </li> <li> <a class="text-decoration-none" href="#find_tests_recursive_in">find_tests_recursive_in</a> </li> <li> <a class="text-decoration-none" href="#extra_clean_files">extra_clean_files</a> </li> <li> <a class="text-decoration-none" href="#installvars">installvars</a> </li> <li> <a class="text-decoration-none" href="#libscan">libscan</a> </li> <li> <a class="text-decoration-none" href="#platform_constants">platform_constants</a> </li> <li> <a class="text-decoration-none" href="#post_constants-(o)">post_constants (o)</a> </li> <li> <a class="text-decoration-none" href="#post_initialize-(o)">post_initialize (o)</a> </li> <li> <a class="text-decoration-none" href="#postamble-(o)">postamble (o)</a> </li> </ul> </li> </ul> </li> <li> <a class="text-decoration-none" href="#AUTHOR">AUTHOR</a> </li> </ul> <h2 id="NAME">NAME</h2> <p>ExtUtils::MM_Any - Platform-agnostic MM methods</p> <h2 id="SYNOPSIS">SYNOPSIS</h2> <pre data-language="perl"><code>FOR INTERNAL USE ONLY!

package ExtUtils::MM_SomeOS;

# Temporarily, you have to subclass both.  Put MM_Any first.
require ExtUtils::MM_Any;
require ExtUtils::MM_Unix;
@ISA = qw(ExtUtils::MM_Any ExtUtils::Unix);</code></pre> <h2 id="DESCRIPTION">DESCRIPTION</h2> <p><b>FOR INTERNAL USE ONLY!</b></p> <p>ExtUtils::MM_Any is a superclass for the ExtUtils::MM_* set of modules. It contains methods which are either inherently cross-platform or are written in a cross-platform manner.</p> <p>Subclass off of ExtUtils::MM_Any <i>and</i> <a href="ExtUtils::MM_Unix.html">ExtUtils::MM_Unix</a>. This is a temporary solution.</p> <p><b>THIS MAY BE TEMPORARY!</b></p> <h2 id="METHODS">METHODS</h2> <p>Any methods marked <i>Abstract</i> must be implemented by subclasses.</p> <h3 id="Cross-platform-helper-methods">
Cross-platform helper methods</h3> <p>These are methods which help writing cross-platform code.</p> <h4 id="os_flavor-Abstract">
os_flavor <i>Abstract</i>
</h4> <pre data-language="perl"><code>my @os_flavor = $mm-&gt;os_flavor;</code></pre> <p>@os_flavor is the style of operating system this is, usually corresponding to the MM_*.pm file we're using.</p> <p>The first element of @os_flavor is the major family (ie. Unix, Windows, VMS, OS/2, etc...) and the rest are sub families.</p> <p>Some examples:</p> <pre data-language="perl"><code class="plaintext">Cygwin98       ('Unix',  'Cygwin', 'Cygwin9x')
Windows        ('Win32')
Win98          ('Win32', 'Win9x')
Linux          ('Unix',  'Linux')
MacOS X        ('Unix',  'Darwin', 'MacOS', 'MacOS X')
OS/2           ('OS/2')</code></pre> <p>This is used to write code for styles of operating system. See os_flavor_is() for use.</p> <h4 id="os_flavor_is">os_flavor_is</h4> <pre data-language="perl"><code>my $is_this_flavor = $mm-&gt;os_flavor_is($this_flavor);
my $is_this_flavor = $mm-&gt;os_flavor_is(@one_of_these_flavors);</code></pre> <p>Checks to see if the current operating system is one of the given flavors.</p> <p>This is useful for code like:</p> <pre data-language="perl"><code>if( $mm-&gt;os_flavor_is('Unix') ) {
    $out = `foo 2&gt;&amp;1`;
}
else {
    $out = `foo`;
}</code></pre> <h4 id="can_load_xs">can_load_xs</h4> <pre data-language="perl"><code>my $can_load_xs = $self-&gt;can_load_xs;</code></pre> <p>Returns true if we have the ability to load XS.</p> <p>This is important because miniperl, used to build XS modules in the core, can not load XS.</p> <h4 id="can_run">can_run</h4> <pre data-language="perl"><code>use ExtUtils::MM;
my $runnable = MM-&gt;can_run($Config{make});</code></pre> <p>If called in a scalar context it will return the full path to the binary you asked for if it was found, or <code>undef</code> if it was not.</p> <p>If called in a list context, it will return a list of the full paths to instances of the binary where found in <code>PATH</code>, or an empty list if it was not found.</p> <p>Copied from <a href="IPC::Cmd.html#%24path-%3D-can_run%28-PROGRAM-%29%3B">IPC::Cmd</a>, but modified into a method (and removed <code>$INSTANCES</code> capability).</p> <h4 id="can_redirect_error">can_redirect_error</h4> <pre data-language="perl"><code>$useredirect = MM-&gt;can_redirect_error;</code></pre> <p>True if on an OS where qx operator (or backticks) can redirect <code>STDERR</code> onto <code>STDOUT</code>.</p> <h4 id="is_make_type">is_make_type</h4> <pre data-language="perl"><code>my $is_dmake = $self-&gt;is_make_type('dmake');</code></pre> <p>Returns true if <code>$self-&gt;make</code> is the given type; possibilities are:</p> <pre data-language="perl"><code class="plaintext">gmake    GNU make
dmake
nmake
bsdmake  BSD pmake-derived</code></pre> <h4 id="can_dep_space">can_dep_space</h4> <pre data-language="perl"><code>my $can_dep_space = $self-&gt;can_dep_space;</code></pre> <p>Returns true if <code>make</code> can handle (probably by quoting) dependencies that contain a space. Currently known true for GNU make, false for BSD pmake derivative.</p> <h4 id="quote_dep">quote_dep</h4> <pre data-language="perl"><code>$text = $mm-&gt;quote_dep($text);</code></pre> <p>Method that protects Makefile single-value constants (mainly filenames), so that make will still treat them as single values even if they inconveniently have spaces in. If the make program being used cannot achieve such protection and the given text would need it, throws an exception.</p> <h4 id="split_command">split_command</h4> <pre data-language="perl"><code>my @cmds = $MM-&gt;split_command($cmd, @args);</code></pre> <p>Most OS have a maximum command length they can execute at once. Large modules can easily generate commands well past that limit. Its necessary to split long commands up into a series of shorter commands.</p> <p><code>split_command</code> will return a series of @cmds each processing part of the args. Collectively they will process all the arguments. Each individual line in @cmds will not be longer than the $self-&gt;max_exec_len being careful to take into account macro expansion.</p> <p>$cmd should include any switches and repeated initial arguments.</p> <p>If no @args are given, no @cmds will be returned.</p> <p>Pairs of arguments will always be preserved in a single command, this is a heuristic for things like pm_to_blib and pod2man which work on pairs of arguments. This makes things like this safe:</p> <pre data-language="perl"><code>$self-&gt;split_command($cmd, %pod2man);</code></pre> <h4 id="make_type">make_type</h4> <p>Returns a suitable string describing the type of makefile being written.</p> <h4 id="stashmeta">stashmeta</h4> <pre data-language="perl"><code>my @recipelines = $MM-&gt;stashmeta($text, $file);</code></pre> <p>Generates a set of <code>@recipelines</code> which will result in the literal <code>$text</code> ending up in literal <code>$file</code> when the recipe is executed. Call it once, with all the text you want in <code>$file</code>. Make macros will not be expanded, so the locations will be fixed at configure-time, not at build-time.</p> <h4 id="echo">echo</h4> <pre data-language="perl"><code>my @commands = $MM-&gt;echo($text);
my @commands = $MM-&gt;echo($text, $file);
my @commands = $MM-&gt;echo($text, $file, \%opts);</code></pre> <p>Generates a set of @commands which print the $text to a $file.</p> <p>If $file is not given, output goes to STDOUT.</p> <p>If $opts{append} is true the $file will be appended to rather than overwritten. Default is to overwrite.</p> <p>If $opts{allow_variables} is true, make variables of the form <code>$(...)</code> will not be escaped. Other <code>$</code> will. Default is to escape all <code>$</code>.</p> <p>Example of use:</p> <pre data-language="perl"><code>my $make = join '', map "\t$_\n", $MM-&gt;echo($text, $file);</code></pre> <h4 id="wraplist">wraplist</h4> <pre data-language="perl"><code>my $args = $mm-&gt;wraplist(@list);</code></pre> <p>Takes an array of items and turns them into a well-formatted list of arguments. In most cases this is simply something like:</p> <pre data-language="perl"><code class="plaintext">FOO \
BAR \
BAZ</code></pre> <h4 id="maketext_filter">maketext_filter</h4> <pre data-language="perl"><code>my $filter_make_text = $mm-&gt;maketext_filter($make_text);</code></pre> <p>The text of the Makefile is run through this method before writing to disk. It allows systems a chance to make portability fixes to the Makefile.</p> <p>By default it does nothing.</p> <p>This method is protected and not intended to be called outside of MakeMaker.</p> <h4 id="cd-Abstract">
cd <i>Abstract</i>
</h4> <pre data-language="perl"><code>my $subdir_cmd = $MM-&gt;cd($subdir, @cmds);</code></pre> <p>This will generate a make fragment which runs the @cmds in the given $dir. The rough equivalent to this, except cross platform.</p> <pre data-language="perl"><code>cd $subdir &amp;&amp; $cmd</code></pre> <p>Currently $dir can only go down one level. "foo" is fine. "foo/bar" is not. "../foo" is right out.</p> <p>The resulting $subdir_cmd has no leading tab nor trailing newline. This makes it easier to embed in a make string. For example.</p> <pre data-language="perl"><code>    my $make = sprintf &lt;&lt;'CODE', $subdir_cmd;
foo :
    $(ECHO) what
    %s
    $(ECHO) mouche
CODE</code></pre> <h4 id="oneliner-Abstract">
oneliner <i>Abstract</i>
</h4> <pre data-language="perl"><code>my $oneliner = $MM-&gt;oneliner($perl_code);
my $oneliner = $MM-&gt;oneliner($perl_code, \@switches);</code></pre> <p>This will generate a perl one-liner safe for the particular platform you're on based on the given $perl_code and @switches (a -e is assumed) suitable for using in a make target. It will use the proper shell quoting and escapes.</p> <p>$(PERLRUN) will be used as perl.</p> <p>Any newlines in $perl_code will be escaped. Leading and trailing newlines will be stripped. Makes this idiom much easier:</p> <pre data-language="perl"><code>my $code = $MM-&gt;oneliner(&lt;&lt;'CODE', [...switches...]);
some code here
another line here
CODE</code></pre> <p>Usage might be something like:</p> <pre data-language="perl"><code># an echo emulation
$oneliner = $MM-&gt;oneliner('print "Foo\n"');
$make = '$oneliner &gt; somefile';</code></pre> <p>Dollar signs in the $perl_code will be protected from make using the <code>quote_literal</code> method, unless they are recognised as being a make variable, <code>$(varname)</code>, in which case they will be left for make to expand. Remember to quote make macros else it might be used as a bareword. For example:</p> <pre data-language="perl"><code># Assign the value of the $(VERSION_FROM) make macro to $vf.
$oneliner = $MM-&gt;oneliner('$vf = "$(VERSION_FROM)"');</code></pre> <p>Its currently very simple and may be expanded sometime in the figure to include more flexible code and switches.</p> <h4 id="quote_literal-Abstract">
quote_literal <i>Abstract</i>
</h4> <pre data-language="perl"><code>my $safe_text = $MM-&gt;quote_literal($text);
my $safe_text = $MM-&gt;quote_literal($text, \%options);</code></pre> <p>This will quote $text so it is interpreted literally in the shell.</p> <p>For example, on Unix this would escape any single-quotes in $text and put single-quotes around the whole thing.</p> <p>If $options{allow_variables} is true it will leave <code>'$(FOO)'</code> make variables untouched. If false they will be escaped like any other <code>$</code>. Defaults to true.</p> <h4 id="escape_dollarsigns">escape_dollarsigns</h4> <pre data-language="perl"><code>my $escaped_text = $MM-&gt;escape_dollarsigns($text);</code></pre> <p>Escapes stray <code>$</code> so they are not interpreted as make variables.</p> <p>It lets by <code>$(...)</code>.</p> <h4 id="escape_all_dollarsigns">escape_all_dollarsigns</h4> <pre data-language="perl"><code>my $escaped_text = $MM-&gt;escape_all_dollarsigns($text);</code></pre> <p>Escapes all <code>$</code> so they are not interpreted as make variables.</p> <h4 id="escape_newlines-Abstract">
escape_newlines <i>Abstract</i>
</h4> <pre data-language="perl"><code>my $escaped_text = $MM-&gt;escape_newlines($text);</code></pre> <p>Shell escapes newlines in $text.</p> <h4 id="max_exec_len-Abstract">
max_exec_len <i>Abstract</i>
</h4> <pre data-language="perl"><code>my $max_exec_len = $MM-&gt;max_exec_len;</code></pre> <p>Calculates the maximum command size the OS can exec. Effectively, this is the max size of a shell command line.</p> <h4 id="make">make</h4> <pre data-language="perl"><code>my $make = $MM-&gt;make;</code></pre> <p>Returns the make variant we're generating the Makefile for. This attempts to do some normalization on the information from %Config or the user.</p> <h3 id="Targets">Targets</h3> <p>These are methods which produce make targets.</p> <h4 id="all_target">all_target</h4> <p>Generate the default target 'all'.</p> <h4 id="blibdirs_target">blibdirs_target</h4> <pre data-language="perl"><code>my $make_frag = $mm-&gt;blibdirs_target;</code></pre> <p>Creates the blibdirs target which creates all the directories we use in blib/.</p> <p>The blibdirs.ts target is deprecated. Depend on blibdirs instead.</p> <h4 id="clean-(o)">
clean (o)</h4> <p>Defines the clean target.</p> <h4 id="clean_subdirs_target">clean_subdirs_target</h4> <pre data-language="perl"><code>my $make_frag = $MM-&gt;clean_subdirs_target;</code></pre> <p>Returns the clean_subdirs target. This is used by the clean target to call clean on any subdirectories which contain Makefiles.</p> <h4 id="dir_target">dir_target</h4> <pre data-language="perl"><code>my $make_frag = $mm-&gt;dir_target(@directories);</code></pre> <p>Generates targets to create the specified directories and set its permission to PERM_DIR.</p> <p>Because depending on a directory to just ensure it exists doesn't work too well (the modified time changes too often) dir_target() creates a .exists file in the created directory. It is this you should depend on. For portability purposes you should use the $(DIRFILESEP) macro rather than a '/' to separate the directory from the file.</p> <pre data-language="perl"><code class="plaintext">yourdirectory$(DIRFILESEP).exists</code></pre> <h4 id="distdir">distdir</h4> <p>Defines the scratch directory target that will hold the distribution before tar-ing (or shar-ing).</p> <h4 id="dist_test">dist_test</h4> <p>Defines a target that produces the distribution in the scratch directory, and runs 'perl Makefile.PL; make ;make test' in that subdirectory.</p> <h4 id="xs_dlsyms_arg">xs_dlsyms_arg</h4> <p>Returns command-line arg(s) to linker for file listing dlsyms to export. Defaults to returning empty string, can be overridden by e.g. AIX.</p> <h4 id="xs_dlsyms_ext">xs_dlsyms_ext</h4> <p>Returns file-extension for <code>xs_make_dlsyms</code> method's output file, including any "." character.</p> <h4 id="xs_dlsyms_extra">xs_dlsyms_extra</h4> <p>Returns any extra text to be prepended to the <code>$extra</code> argument of <code>xs_make_dlsyms</code>.</p> <h4 id="xs_dlsyms_iterator">xs_dlsyms_iterator</h4> <p>Iterates over necessary shared objects, calling <code>xs_make_dlsyms</code> method for each with appropriate arguments.</p> <h4 id="xs_make_dlsyms">xs_make_dlsyms</h4> <pre data-language="perl"><code>$self-&gt;xs_make_dlsyms(
    \%attribs, # hashref from %attribs in caller
    "$self-&gt;{BASEEXT}.def", # output file for Makefile target
    'Makefile.PL', # dependency
    $self-&gt;{NAME}, # shared object's "name"
    $self-&gt;{DLBASE}, # last ::-separated part of name
    $attribs{DL_FUNCS} || $self-&gt;{DL_FUNCS} || {}, # various params
    $attribs{FUNCLIST} || $self-&gt;{FUNCLIST} || [],
    $attribs{IMPORTS} || $self-&gt;{IMPORTS} || {},
    $attribs{DL_VARS} || $self-&gt;{DL_VARS} || [],
    # optional extra param that will be added as param to Mksymlists
);</code></pre> <p>Utility method that returns Makefile snippet to call <code>Mksymlists</code>.</p> <h4 id="dynamic-(o)">
dynamic (o)</h4> <p>Defines the dynamic target.</p> <h4 id="makemakerdflt_target">makemakerdflt_target</h4> <pre data-language="perl"><code>my $make_frag = $mm-&gt;makemakerdflt_target</code></pre> <p>Returns a make fragment with the makemakerdeflt_target specified. This target is the first target in the Makefile, is the default target and simply points off to 'all' just in case any make variant gets confused or something gets snuck in before the real 'all' target.</p> <h4 id="manifypods_target">manifypods_target</h4> <pre data-language="perl"><code>my $manifypods_target = $self-&gt;manifypods_target;</code></pre> <p>Generates the manifypods target. This target generates man pages from all POD files in MAN1PODS and MAN3PODS.</p> <h4 id="metafile_target">metafile_target</h4> <pre data-language="perl"><code>my $target = $mm-&gt;metafile_target;</code></pre> <p>Generate the metafile target.</p> <p>Writes the file META.yml (YAML encoded meta-data) and META.json (JSON encoded meta-data) about the module in the distdir. The format follows Module::Build's as closely as possible.</p> <h4 id="metafile_data">metafile_data</h4> <pre data-language="perl"><code>my $metadata_hashref = $mm-&gt;metafile_data(\%meta_add, \%meta_merge);</code></pre> <p>Returns the data which MakeMaker turns into the META.yml file and the META.json file. It is always in version 2.0 of the format.</p> <p>Values of %meta_add will overwrite any existing metadata in those keys. %meta_merge will be merged with them.</p> <h4 id="metafile_file">metafile_file</h4> <pre data-language="perl"><code>my $meta_yml = $mm-&gt;metafile_file(@metadata_pairs);</code></pre> <p>Turns the @metadata_pairs into YAML.</p> <p>This method does not implement a complete YAML dumper, being limited to dump a hash with values which are strings, undef's or nested hashes and arrays of strings. No quoting/escaping is done.</p> <h4 id="distmeta_target">distmeta_target</h4> <pre data-language="perl"><code>my $make_frag = $mm-&gt;distmeta_target;</code></pre> <p>Generates the distmeta target to add META.yml and META.json to the MANIFEST in the distdir.</p> <h4 id="mymeta">mymeta</h4> <pre data-language="perl"><code>my $mymeta = $mm-&gt;mymeta;</code></pre> <p>Generate MYMETA information as a hash either from an existing CPAN Meta file (META.json or META.yml) or from internal data.</p> <h4 id="write_mymeta">write_mymeta</h4> <pre data-language="perl"><code>$self-&gt;write_mymeta( $mymeta );</code></pre> <p>Write MYMETA information to MYMETA.json and MYMETA.yml.</p> <h4 id="realclean-(o)">
realclean (o)</h4> <p>Defines the realclean target.</p> <h4 id="realclean_subdirs_target">realclean_subdirs_target</h4> <pre data-language="perl"><code>my $make_frag = $MM-&gt;realclean_subdirs_target;</code></pre> <p>Returns the realclean_subdirs target. This is used by the realclean target to call realclean on any subdirectories which contain Makefiles.</p> <h4 id="signature_target">signature_target</h4> <pre data-language="perl"><code>my $target = $mm-&gt;signature_target;</code></pre> <p>Generate the signature target.</p> <p>Writes the file SIGNATURE with "cpansign -s".</p> <h4 id="distsignature_target">distsignature_target</h4> <pre data-language="perl"><code>my $make_frag = $mm-&gt;distsignature_target;</code></pre> <p>Generates the distsignature target to add SIGNATURE to the MANIFEST in the distdir.</p> <h4 id="special_targets">special_targets</h4> <pre data-language="perl"><code>my $make_frag = $mm-&gt;special_targets</code></pre> <p>Returns a make fragment containing any targets which have special meaning to make. For example, .SUFFIXES and .PHONY.</p> <h3 id="Init-methods">
Init methods</h3> <p>Methods which help initialize the MakeMaker object and macros.</p> <h4 id="init_ABSTRACT">init_ABSTRACT</h4> <pre data-language="perl"><code>$mm-&gt;init_ABSTRACT</code></pre> <h4 id="init_INST">init_INST</h4> <pre data-language="perl"><code>$mm-&gt;init_INST;</code></pre> <p>Called by init_main. Sets up all INST_* variables except those related to XS code. Those are handled in init_xs.</p> <h4 id="init_INSTALL">init_INSTALL</h4> <pre data-language="perl"><code>$mm-&gt;init_INSTALL;</code></pre> <p>Called by init_main. Sets up all INSTALL_* variables (except INSTALLDIRS) and *PREFIX.</p> <h4 id="init_INSTALL_from_PREFIX">init_INSTALL_from_PREFIX</h4> <pre data-language="perl"><code>$mm-&gt;init_INSTALL_from_PREFIX;</code></pre> <h4 id="init_from_INSTALL_BASE">init_from_INSTALL_BASE</h4> <pre data-language="perl"><code>$mm-&gt;init_from_INSTALL_BASE</code></pre> <h4 id="init_VERSION-Abstract">
init_VERSION <i>Abstract</i>
</h4> <pre data-language="perl"><code>$mm-&gt;init_VERSION</code></pre> <p>Initialize macros representing versions of MakeMaker and other tools</p> <p>MAKEMAKER: path to the MakeMaker module.</p> <p>MM_VERSION: ExtUtils::MakeMaker Version</p> <p>MM_REVISION: ExtUtils::MakeMaker version control revision (for backwards compat)</p> <p>VERSION: version of your module</p> <p>VERSION_MACRO: which macro represents the version (usually 'VERSION')</p> <p>VERSION_SYM: like version but safe for use as an RCS revision number</p> <p>DEFINE_VERSION: -D line to set the module version when compiling</p> <p>XS_VERSION: version in your .xs file. Defaults to $(VERSION)</p> <p>XS_VERSION_MACRO: which macro represents the XS version.</p> <p>XS_DEFINE_VERSION: -D line to set the xs version when compiling.</p> <p>Called by init_main.</p> <h4 id="init_tools">init_tools</h4> <pre data-language="perl"><code>$MM-&gt;init_tools();</code></pre> <p>Initializes the simple macro definitions used by tools_other() and places them in the $MM object. These use conservative cross platform versions and should be overridden with platform specific versions for performance.</p> <p>Defines at least these macros.</p> <pre data-language="perl"><code class="plaintext">Macro             Description

NOOP              Do nothing
NOECHO            Tell make not to display the command itself

SHELL             Program used to run shell commands

ECHO              Print text adding a newline on the end
RM_F              Remove a file
RM_RF             Remove a directory
TOUCH             Update a file's timestamp
TEST_F            Test for a file's existence
TEST_S            Test the size of a file
CP                Copy a file
CP_NONEMPTY       Copy a file if it is not empty
MV                Move a file
CHMOD             Change permissions on a file
FALSE             Exit with non-zero
TRUE              Exit with zero

UMASK_NULL        Nullify umask
DEV_NULL          Suppress all command output</code></pre> <h4 id="init_others">init_others</h4> <pre data-language="perl"><code>$MM-&gt;init_others();</code></pre> <p>Initializes the macro definitions having to do with compiling and linking used by tools_other() and places them in the $MM object.</p> <p>If there is no description, its the same as the parameter to WriteMakefile() documented in <a href="ExtUtils::MakeMaker.html">ExtUtils::MakeMaker</a>.</p> <h4 id="tools_other">tools_other</h4> <pre data-language="perl"><code>my $make_frag = $MM-&gt;tools_other;</code></pre> <p>Returns a make fragment containing definitions for the macros init_others() initializes.</p> <h4 id="init_DIRFILESEP-Abstract">
init_DIRFILESEP <i>Abstract</i>
</h4> <pre data-language="perl"><code>$MM-&gt;init_DIRFILESEP;
my $dirfilesep = $MM-&gt;{DIRFILESEP};</code></pre> <p>Initializes the DIRFILESEP macro which is the separator between the directory and filename in a filepath. ie. / on Unix, \ on Win32 and nothing on VMS.</p> <p>For example:</p> <pre data-language="perl"><code class="plaintext"># instead of $(INST_ARCHAUTODIR)/extralibs.ld
$(INST_ARCHAUTODIR)$(DIRFILESEP)extralibs.ld</code></pre> <p>Something of a hack but it prevents a lot of code duplication between MM_* variants.</p> <p>Do not use this as a separator between directories. Some operating systems use different separators between subdirectories as between directories and filenames (for example: VOLUME:[dir1.dir2]file on VMS).</p> <h4 id="init_linker-Abstract">
init_linker <i>Abstract</i>
</h4> <pre data-language="perl"><code>$mm-&gt;init_linker;</code></pre> <p>Initialize macros which have to do with linking.</p> <p>PERL_ARCHIVE: path to libperl.a equivalent to be linked to dynamic extensions.</p> <p>PERL_ARCHIVE_AFTER: path to a library which should be put on the linker command line <i>after</i> the external libraries to be linked to dynamic extensions. This may be needed if the linker is one-pass, and Perl includes some overrides for C RTL functions, such as malloc().</p> <p>EXPORT_LIST: name of a file that is passed to linker to define symbols to be exported.</p> <p>Some OSes do not need these in which case leave it blank.</p> <h4 id="init_platform">init_platform</h4> <pre data-language="perl"><code>$mm-&gt;init_platform</code></pre> <p>Initialize any macros which are for platform specific use only.</p> <p>A typical one is the version number of your OS specific module. (ie. MM_Unix_VERSION or MM_VMS_VERSION).</p> <h4 id="init_MAKE">init_MAKE</h4> <pre data-language="perl"><code>$mm-&gt;init_MAKE</code></pre> <p>Initialize MAKE from either a MAKE environment variable or $Config{make}.</p> <h3 id="Tools">Tools</h3> <p>A grab bag of methods to generate specific macros and commands.</p> <h4 id="manifypods">manifypods</h4> <p>Defines targets and routines to translate the pods into manpages and put them into the INST_* directories.</p> <h4 id="POD2MAN_macro">POD2MAN_macro</h4> <pre data-language="perl"><code>my $pod2man_macro = $self-&gt;POD2MAN_macro</code></pre> <p>Returns a definition for the POD2MAN macro. This is a program which emulates the pod2man utility. You can add more switches to the command by simply appending them on the macro.</p> <p>Typical usage:</p> <pre data-language="perl"><code class="plaintext">$(POD2MAN) --section=3 --perm_rw=$(PERM_RW) podfile1 man_page1 ...</code></pre> <h4 id="test_via_harness">test_via_harness</h4> <pre data-language="perl"><code>my $command = $mm-&gt;test_via_harness($perl, $tests);</code></pre> <p>Returns a $command line which runs the given set of $tests with Test::Harness and the given $perl.</p> <p>Used on the t/*.t files.</p> <h4 id="test_via_script">test_via_script</h4> <pre data-language="perl"><code>my $command = $mm-&gt;test_via_script($perl, $script);</code></pre> <p>Returns a $command line which just runs a single test without Test::Harness. No checks are done on the results, they're just printed.</p> <p>Used for test.pl, since they don't always follow Test::Harness formatting.</p> <h4 id="tool_autosplit">tool_autosplit</h4> <p>Defines a simple perl call that runs autosplit. May be deprecated by pm_to_blib soon.</p> <h4 id="arch_check">arch_check</h4> <pre data-language="perl"><code>my $arch_ok = $mm-&gt;arch_check(
    $INC{"Config.pm"},
    File::Spec-&gt;catfile($Config{archlibexp}, "Config.pm")
);</code></pre> <p>A sanity check that what Perl thinks the architecture is and what Config thinks the architecture is are the same. If they're not it will return false and show a diagnostic message.</p> <p>When building Perl it will always return true, as nothing is installed yet.</p> <p>The interface is a bit odd because this is the result of a quick refactoring. Don't rely on it.</p> <h3 id="File::Spec-wrappers">
File::Spec wrappers</h3> <p>ExtUtils::MM_Any is a subclass of <a href="File::Spec.html">File::Spec</a>. The methods noted here override File::Spec.</p> <h4 id="catfile">catfile</h4> <p>File::Spec &lt;= 0.83 has a bug where the file part of catfile is not canonicalized. This override fixes that bug.</p> <h3 id="Misc">Misc</h3> <p>Methods I can't really figure out where they should go yet.</p> <h4 id="find_tests">find_tests</h4> <pre data-language="perl"><code>my $test = $mm-&gt;find_tests;</code></pre> <p>Returns a string suitable for feeding to the shell to return all tests in t/*.t.</p> <h4 id="find_tests_recursive">find_tests_recursive</h4> <pre data-language="perl"><code>my $tests = $mm-&gt;find_tests_recursive;</code></pre> <p>Returns a string suitable for feeding to the shell to return all tests in t/ but recursively. Equivalent to</p> <pre data-language="perl"><code>my $tests = $mm-&gt;find_tests_recursive_in('t');</code></pre> <h4 id="find_tests_recursive_in">find_tests_recursive_in</h4> <pre data-language="perl"><code>my $tests = $mm-&gt;find_tests_recursive_in($dir);</code></pre> <p>Returns a string suitable for feeding to the shell to return all tests in $dir recursively.</p> <h4 id="extra_clean_files">extra_clean_files</h4> <pre data-language="perl"><code>my @files_to_clean = $MM-&gt;extra_clean_files;</code></pre> <p>Returns a list of OS specific files to be removed in the clean target in addition to the usual set.</p> <h4 id="installvars">installvars</h4> <pre data-language="perl"><code>my @installvars = $mm-&gt;installvars;</code></pre> <p>A list of all the INSTALL* variables without the INSTALL prefix. Useful for iteration or building related variable sets.</p> <h4 id="libscan">libscan</h4> <pre data-language="perl"><code>my $wanted = $self-&gt;libscan($path);</code></pre> <p>Takes a path to a file or dir and returns an empty string if we don't want to include this file in the library. Otherwise it returns the the $path unchanged.</p> <p>Mainly used to exclude version control administrative directories and base-level <i>README.pod</i> from installation.</p> <h4 id="platform_constants">platform_constants</h4> <pre data-language="perl"><code>my $make_frag = $mm-&gt;platform_constants</code></pre> <p>Returns a make fragment defining all the macros initialized in init_platform() rather than put them in constants().</p> <h4 id="post_constants-(o)">
post_constants (o)</h4> <p>Returns an empty string per default. Dedicated to overrides from within Makefile.PL after all constants have been defined.</p> <h4 id="post_initialize-(o)">
post_initialize (o)</h4> <p>Returns an empty string per default. Used in Makefile.PLs to add some chunk of text to the Makefile after the object is initialized.</p> <h4 id="postamble-(o)">
postamble (o)</h4> <p>Returns an empty string. Can be used in Makefile.PLs to write some text to the Makefile at the end.</p> <h2 id="AUTHOR">AUTHOR</h2> <p>Michael G Schwern &lt;schwern@pobox.com&gt; and the denizens of makemaker@perl.org with code from ExtUtils::MM_Unix and ExtUtils::MM_Win32.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1993&ndash;2023 Larry Wall and others<br>Licensed under the GNU General Public License version 1 or later, or the Artistic License.<br>The Perl logo is a trademark of the Perl Foundation.<br>
    <a href="https://perldoc.perl.org/5.38.0/ExtUtils::MM_Any" class="_attribution-link">https://perldoc.perl.org/5.38.0/ExtUtils::MM_Any</a>
  </p>
</div>
