<h1>VMS::Stdio</h1>   <h2><a id="toc">CONTENTS</a></h2> <ul> <li> <a class="text-decoration-none" href="#NAME">NAME</a> </li> <li> <a class="text-decoration-none" href="#SYNOPSIS">SYNOPSIS</a> </li> <li> <a class="text-decoration-none" href="#DESCRIPTION">DESCRIPTION</a> </li> <li> <a class="text-decoration-none" href="#REVISION">REVISION</a> </li> </ul> <h2 id="NAME">NAME</h2> <p>VMS::Stdio - standard I/O functions via VMS extensions</p> <h2 id="SYNOPSIS">SYNOPSIS</h2> <pre data-language="perl"><code>use VMS::Stdio qw( &amp;flush &amp;getname &amp;remove &amp;rewind &amp;setdef &amp;sync
                   &amp;tmpnam &amp;vmsopen &amp;vmssysopen &amp;waitfh &amp;writeof );
setdef("new:[default.dir]");
$uniquename = tmpnam;
$fh = vmsopen("my.file","rfm=var","alq=100",...) or die $!;
$name = getname($fh);
print $fh "Hello, world!\n";
flush($fh);
sync($fh);
rewind($fh);
$line = &lt;$fh&gt;;
undef $fh;  # closes file
$fh = vmssysopen("another.file", O_RDONLY | O_NDELAY, 0, "ctx=bin");
sysread($fh,$data,128);
waitfh($fh);
close($fh);
remove("another.file");
writeof($pipefh);
binmode($fh);</code></pre> <h2 id="DESCRIPTION">DESCRIPTION</h2> <p>This package gives Perl scripts access via VMS extensions to several C stdio operations not available through Perl's CORE I/O functions. The specific routines are described below. These functions are prototyped as unary operators, with the exception of <code>vmsopen</code> and <code>vmssysopen</code>, which can take any number of arguments, and <code>tmpnam</code>, which takes none.</p> <p>All of the routines are available for export, though none are exported by default. All of the constants used by <code>vmssysopen</code> to specify access modes are exported by default. The routines are associated with the Exporter tag FUNCTIONS, and the constants are associated with the Exporter tag CONSTANTS, so you can more easily choose what you'd like to import:</p> <pre data-language="perl"><code># import constants, but not functions
use VMS::Stdio;  # same as use VMS::Stdio qw( :DEFAULT );
# import functions, but not constants
use VMS::Stdio qw( !:CONSTANTS :FUNCTIONS ); 
# import both
use VMS::Stdio qw( :CONSTANTS :FUNCTIONS ); 
# import neither
use VMS::Stdio ();</code></pre> <p>Of course, you can also choose to import specific functions by name, as usual.</p> <p>This package <code>ISA</code> IO::File, so that you can call IO::File methods on the handles returned by <code>vmsopen</code> and <code>vmssysopen</code>. The IO::File package is not initialized, however, until you actually call a method that VMS::Stdio doesn't provide. This is done to save startup time for users who don't wish to use the IO::File methods.</p> <p><b>Note:</b> In order to conform to naming conventions for Perl extensions and functions, the name of this package was changed to from VMS::stdio to VMS::Stdio as of Perl 5.002, and the names of some routines were changed. For many releases, calls to the old VMS::stdio routines would generate a warning, and then route to the equivalent VMS::Stdio function. This compatibility interface has now been removed.</p> <dl> <dt id="binmode">binmode</dt> <dd> <p>This function causes the file handle to be reopened with the CRTL's carriage control processing disabled; its effect is the same as that of the <code>b</code> access mode in <code>vmsopen</code>. After the file is reopened, the file pointer is positioned as close to its position before the call as possible (<i>i.e.</i> as close as fsetpos() can get it -- for some record-structured files, it's not possible to return to the exact byte offset in the file). Because the file must be reopened, this function cannot be used on temporary-delete files. <code>binmode</code> returns true if successful, and <code>undef</code> if not.</p> <p>Note that the effect of <code>binmode</code> differs from that of the binmode() function on operating systems such as Windows and MSDOS, and is not needed to process most types of file.</p> </dd> <dt id="flush">flush</dt> <dd> <p>This function causes the contents of stdio buffers for the specified file handle to be flushed. If <code>undef</code> is used as the argument to <code>flush</code>, all currently open file handles are flushed. Like the CRTL fflush() routine, it does not flush any underlying RMS buffers for the file, so the data may not be flushed all the way to the disk. <code>flush</code> returns a true value if successful, and <code>undef</code> if not.</p> </dd> <dt id="getname">getname</dt> <dd> <p>The <code>getname</code> function returns the file specification associated with a Perl I/O handle. If an error occurs, it returns <code>undef</code>.</p> </dd> <dt id="remove">remove</dt> <dd> <p>This function deletes the file named in its argument, returning a true value if successful and <code>undef</code> if not. It differs from the CORE Perl function <code>unlink</code> in that it does not try to reset file protection if the original protection does not give you delete access to the file (cf. <a href="perlvms.html">perlvms</a>). In other words, <code>remove</code> is equivalent to</p> <pre data-language="perl"><code>unlink($file) if VMS::Filespec::candelete($file);</code></pre> </dd> <dt id="rewind">rewind</dt> <dd> <p><code>rewind</code> resets the current position of the specified file handle to the beginning of the file. It's really just a convenience method equivalent in effect to <code>seek($fh,0,0)</code>. It returns a true value if successful, and <code>undef</code> if it fails.</p> </dd> <dt id="setdef">setdef</dt> <dd> <p>This function sets the default device and directory for the process. It is identical to the built-in chdir() operator, except that the change persists after Perl exits. It returns a true value on success, and <code>undef</code> if it encounters an error.</p> </dd> <dt id="sync">sync</dt> <dd> <p>This function flushes buffered data for the specified file handle from stdio and RMS buffers all the way to disk. If successful, it returns a true value; otherwise, it returns <code>undef</code>.</p> </dd> <dt id="tmpnam">tmpnam</dt> <dd> <p>The <code>tmpnam</code> function returns a unique string which can be used as a filename when creating temporary files. If, for some reason, it is unable to generate a name, it returns <code>undef</code>.</p> </dd> <dt id="vmsopen">vmsopen</dt> <dd> <p>The <code>vmsopen</code> function enables you to specify optional RMS arguments to the VMS CRTL when opening a file. Its operation is similar to the built-in Perl <code>open</code> function (see <a href="perlfunc.html">perlfunc</a> for a complete description), but it will only open normal files; it cannot open pipes or duplicate existing I/O handles. Up to 8 optional arguments may follow the file name. These arguments should be strings which specify optional file characteristics as allowed by the CRTL. (See the CRTL reference manual description of creat() and fopen() for details.) If successful, <code>vmsopen</code> returns a VMS::Stdio file handle; if an error occurs, it returns <code>undef</code>.</p> <p>You can use the file handle returned by <code>vmsopen</code> just as you would any other Perl file handle. The class VMS::Stdio ISA IO::File, so you can call IO::File methods using the handle returned by <code>vmsopen</code>. However, <code>use</code>ing VMS::Stdio does not automatically <code>use</code> IO::File; you must do so explicitly in your program if you want to call IO::File methods. This is done to avoid the overhead of initializing the IO::File package in programs which intend to use the handle returned by <code>vmsopen</code> as a normal Perl file handle only. When the scalar containing a VMS::Stdio file handle is overwritten, <code>undef</code>d, or goes out of scope, the associated file is closed automatically.</p> <p>File characteristic options:</p> <dl> <dt id="alq=INTEGER">
alq=INTEGER</dt> <dd> <p>Sets the allocation quantity for this file</p> </dd> <dt id="bls=INTEGER">
bls=INTEGER</dt> <dd> <p>File blocksize</p> </dd> <dt id="ctx=STRING">
ctx=STRING</dt> <dd> <p>Sets the context for the file. Takes one of these arguments:</p> <dl> <dt id="bin">bin</dt> <dd> <p>Disables LF to CRLF translation</p> </dd> <dt id="cvt">cvt</dt> <dd> <p>Negates previous setting of <code>ctx=noctx</code></p> </dd> <dt id="nocvt">nocvt</dt> <dd> <p>Disables conversion of FORTRAN carriage control</p> </dd> <dt id="rec">rec</dt> <dd> <p>Force record-mode access</p> </dd> <dt id="stm">stm</dt> <dd> <p>Force stream mode</p> </dd> <dt id="xplct">xplct</dt> <dd> <p>Causes records to be flushed <i>only</i> when the file is closed, or when an explicit flush is done</p> </dd> </dl> </dd> <dt id="deq=INTEGER">
deq=INTEGER</dt> <dd> <p>Sets the default extension quantity</p> </dd> <dt id="dna=FILESPEC">
dna=FILESPEC</dt> <dd> <p>Sets the default filename string. Used to fill in any missing pieces of the filename passed.</p> </dd> <dt id="fop=STRING">
fop=STRING</dt> <dd> <p>File processing option. Takes one or more of the following (in a comma-separated list if there's more than one)</p> <dl> <dt id="ctg">ctg</dt> <dd> <p>Contiguous.</p> </dd> <dt id="cbt">cbt</dt> <dd> <p>Contiguous-best-try.</p> </dd> <dt id="dfw">dfw</dt> <dd> <p>Deferred write; only applicable to files opened for shared access.</p> </dd> <dt id="dlt">dlt</dt> <dd> <p>Delete file on close.</p> </dd> <dt id="tef">tef</dt> <dd> <p>Truncate at end-of-file.</p> </dd> <dt id="cif">cif</dt> <dd> <p>Create if nonexistent.</p> </dd> <dt id="sup">sup</dt> <dd> <p>Supersede.</p> </dd> <dt id="scf">scf</dt> <dd> <p>Submit as command file on close.</p> </dd> <dt id="spl">spl</dt> <dd> <p>Spool to system printer on close.</p> </dd> <dt id="tmd">tmd</dt> <dd> <p>Temporary delete.</p> </dd> <dt id="tmp">tmp</dt> <dd> <p>Temporary (no file directory).</p> </dd> <dt id="nef">nef</dt> <dd> <p>Not end-of-file.</p> </dd> <dt id="rck">rck</dt> <dd> <p>Read check compare operation.</p> </dd> <dt id="wck">wck</dt> <dd> <p>Write check compare operation.</p> </dd> <dt id="mxv">mxv</dt> <dd> <p>Maximize version number.</p> </dd> <dt id="rwo">rwo</dt> <dd> <p>Rewind file on open.</p> </dd> <dt id="pos">pos</dt> <dd> <p>Current position.</p> </dd> <dt id="rwc">rwc</dt> <dd> <p>Rewind file on close.</p> </dd> <dt id="sqo">sqo</dt> <dd> <p>File can only be processed in a sequential manner.</p> </dd> </dl> </dd> <dt id="fsz=INTEGER">
fsz=INTEGER</dt> <dd> <p>Fixed header size</p> </dd> <dt id="gbc=INTEGER">
gbc=INTEGER</dt> <dd> <p>Global buffers requested for the file</p> </dd> <dt id="mbc=INTEGER">
mbc=INTEGER</dt> <dd> <p>Multiblock count</p> </dd> <dt id="mbf=INTEGER">
mbf=INTEGER</dt> <dd> <p>Bultibuffer count</p> </dd> <dt id="mrs=INTEGER">
mrs=INTEGER</dt> <dd> <p>Maximum record size</p> </dd> <dt id="rat=STRING">
rat=STRING</dt> <dd> <p>File record attributes. Takes one of the following:</p> <dl> <dt id="cr">cr</dt> <dd> <p>Carriage-return control.</p> </dd> <dt id="blk">blk</dt> <dd> <p>Disallow records to span block boundaries.</p> </dd> <dt id="ftn">ftn</dt> <dd> <p>FORTRAN print control.</p> </dd> <dt id="none">none</dt> <dd> <p>Explicitly forces no carriage control.</p> </dd> <dt id="prn">prn</dt> <dd> <p>Print file format.</p> </dd> </dl> </dd> <dt id="rfm=STRING">
rfm=STRING</dt> <dd> <p>File record format. Takes one of the following:</p> <dl> <dt id="fix">fix</dt> <dd> <p>Fixed-length record format.</p> </dd> <dt id="stm1">stm</dt> <dd> <p>RMS stream record format.</p> </dd> <dt id="stmlf">stmlf</dt> <dd> <p>Stream format with line-feed terminator.</p> </dd> <dt id="stmcr">stmcr</dt> <dd> <p>Stream format with carriage-return terminator.</p> </dd> <dt id="var">var</dt> <dd> <p>Variable-length record format.</p> </dd> <dt id="vfc">vfc</dt> <dd> <p>Variable-length record with fixed control.</p> </dd> <dt id="udf">udf</dt> <dd> <p>Undefined format</p> </dd> </dl> </dd> <dt id="rop=STRING">
rop=STRING</dt> <dd> <p>Record processing operations. Takes one or more of the following in a comma-separated list:</p> <dl> <dt id="asy">asy</dt> <dd> <p>Asynchronous I/O.</p> </dd> <dt id="cco">cco</dt> <dd> <p>Cancel Ctrl/O (used with Terminal I/O).</p> </dd> <dt id="cvt1">cvt</dt> <dd> <p>Capitalizes characters on a read from the terminal.</p> </dd> <dt id="eof">eof</dt> <dd> <p>Positions the record stream to the end-of-file for the connect operation only.</p> </dd> <dt id="nlk">nlk</dt> <dd> <p>Do not lock record.</p> </dd> <dt id="pmt">pmt</dt> <dd> <p>Enables use of the prompt specified by pmt=usr-prmpt on input from the terminal.</p> </dd> <dt id="pta">pta</dt> <dd> <p>Eliminates any information in the type-ahead buffer on a read from the terminal.</p> </dd> <dt id="rea">rea</dt> <dd> <p>Locks record for a read operation for this process, while allowing other accessors to read the record.</p> </dd> <dt id="rlk">rlk</dt> <dd> <p>Locks record for write.</p> </dd> <dt id="rne">rne</dt> <dd> <p>Suppresses echoing of input data on the screen as it is entered on the keyboard.</p> </dd> <dt id="rnf">rnf</dt> <dd> <p>Indicates that Ctrl/U, Ctrl/R, and DELETE are not to be considered control commands on terminal input, but are to be passed to the application program.</p> </dd> <dt id="rrl">rrl</dt> <dd> <p>Reads regardless of lock.</p> </dd> <dt id="syncsts">syncsts</dt> <dd> <p>Returns success status of RMS$_SYNCH if the requested service completes its task immediately.</p> </dd> <dt id="tmo">tmo</dt> <dd> <p>Timeout I/O.</p> </dd> <dt id="tpt">tpt</dt> <dd> <p>Allows put/write services using sequential record access mode to occur at any point in the file, truncating the file at that point.</p> </dd> <dt id="ulk">ulk</dt> <dd> <p>Prohibits RMS from automatically unlocking records.</p> </dd> <dt id="wat">wat</dt> <dd> <p>Wait until record is available, if currently locked by another stream.</p> </dd> <dt id="rah">rah</dt> <dd> <p>Read ahead.</p> </dd> <dt id="wbh">wbh</dt> <dd> <p>Write behind.</p> </dd> </dl> </dd> <dt id="rtv=INTEGER">
rtv=INTEGER</dt> <dd> <p>The number of retrieval pointers that RMS has to maintain (0 to 127255)</p> </dd> <dt id="shr=STRING">
shr=STRING</dt> <dd> <p>File sharing options. Choose one of the following:</p> <dl> <dt id="del">del</dt> <dd> <p>Allows users to delete.</p> </dd> <dt id="get">get</dt> <dd> <p>Allows users to read.</p> </dd> <dt id="mse">mse</dt> <dd> <p>Allows mainstream access.</p> </dd> <dt id="nil">nil</dt> <dd> <p>Prohibits file sharing.</p> </dd> <dt id="put">put</dt> <dd> <p>Allows users to write.</p> </dd> <dt id="upd">upd</dt> <dd> <p>Allows users to update.</p> </dd> <dt id="upi">upi</dt> <dd> <p>Allows one or more writers.</p> </dd> </dl> </dd> <dt id="tmo=INTEGER">
tmo=INTEGER</dt> <dd> <p>I/O timeout value</p> </dd> </dl> </dd> <dt id="vmssysopen">vmssysopen</dt> <dd> <p>This function bears the same relationship to the CORE function <code>sysopen</code> as <code>vmsopen</code> does to <code>open</code>. Its first three arguments are the name, access flags, and permissions for the file. Like <code>vmsopen</code>, it takes up to 8 additional string arguments which specify file characteristics. Its return value is identical to that of <code>vmsopen</code>.</p> <p>The symbolic constants for the mode argument are exported by VMS::Stdio by default, and are also exported by the Fcntl package.</p> </dd> <dt id="waitfh">waitfh</dt> <dd> <p>This function causes Perl to wait for the completion of an I/O operation on the file handle specified as its argument. It is used with handles opened for asynchronous I/O, and performs its task by calling the CRTL routine fwait().</p> </dd> <dt id="writeof">writeof</dt> <dd> <p>This function writes an EOF to a file handle, if the device driver supports this operation. Its primary use is to send an EOF to a subprocess through a pipe opened for writing without closing the pipe. It returns a true value if successful, and <code>undef</code> if it encounters an error.</p> </dd> </dl> <h2 id="REVISION">REVISION</h2> <p>This document was last revised on 13-Oct-1998, for Perl 5.004, 5.005, and 5.6.0.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1993&ndash;2023 Larry Wall and others<br>Licensed under the GNU General Public License version 1 or later, or the Artistic License.<br>The Perl logo is a trademark of the Perl Foundation.<br>
    <a href="https://perldoc.perl.org/5.38.0/VMS::Stdio" class="_attribution-link">https://perldoc.perl.org/5.38.0/VMS::Stdio</a>
  </p>
</div>
