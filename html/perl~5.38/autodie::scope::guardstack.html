<h1>autodie::Scope::GuardStack</h1>   <h2><a id="toc">CONTENTS</a></h2> <ul> <li> <a class="text-decoration-none" href="#NAME">NAME</a> </li> <li> <a class="text-decoration-none" href="#SYNOPSIS">SYNOPSIS</a> </li> <li> <a class="text-decoration-none" href="#DESCRIPTION">DESCRIPTION</a> <ul> <li> <a class="text-decoration-none" href="#Methods">Methods</a> <ul> <li> <a class="text-decoration-none" href="#new">new</a> </li> <li> <a class="text-decoration-none" href="#push_hook">push_hook</a> </li> </ul> </li> </ul> </li> <li> <a class="text-decoration-none" href="#AUTHOR">AUTHOR</a> </li> <li> <a class="text-decoration-none" href="#LICENSE">LICENSE</a> </li> </ul> <h2 id="NAME">NAME</h2> <p>autodie::Scope::GuardStack - Hook stack for managing scopes via %^H</p> <h2 id="SYNOPSIS">SYNOPSIS</h2> <pre data-language="perl"><code>use autodie::Scope::GuardStack;
my $stack = autodie::Scope::GuardStack-&gt;new
$^H{'my-key'} = $stack;

$stack-&gt;push_hook(sub {});</code></pre> <h2 id="DESCRIPTION">DESCRIPTION</h2> <p>This class is a stack of hooks to be called in the right order as scopes go away. The stack is only useful when inserted into <code>%^H</code> and will pop hooks as their "scope" is popped. This is useful for uninstalling or reinstalling subs in a namespace as a pragma goes out of scope.</p> <p>Due to how <code>%^H</code> works, this class is only useful during the compilation phase of a perl module and relies on the internals of how perl handles references in <code>%^H</code>. This module is not a part of autodie's public API.</p> <h3 id="Methods">Methods</h3> <h4 id="new">new</h4> <pre data-language="perl"><code>my $stack = autodie::Scope::GuardStack-&gt;new;</code></pre> <p>Creates a new <code>autodie::Scope::GuardStack</code>. The stack is initially empty and must be inserted into <code>%^H</code> by the creator.</p> <h4 id="push_hook">push_hook</h4> <pre data-language="perl"><code>$stack-&gt;push_hook(sub {});</code></pre> <p>Add a sub to the stack. The sub will be called once the current compile-time "scope" is left. Multiple hooks can be added per scope</p> <h2 id="AUTHOR">AUTHOR</h2> <p>Copyright 2013, Niels Thykier &lt;niels@thykier.net&gt;</p> <h2 id="LICENSE">LICENSE</h2> <p>This module is free software. You may distribute it under the same terms as Perl itself.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1993&ndash;2023 Larry Wall and others<br>Licensed under the GNU General Public License version 1 or later, or the Artistic License.<br>The Perl logo is a trademark of the Perl Foundation.<br>
    <a href="https://perldoc.perl.org/5.38.0/autodie::Scope::GuardStack" class="_attribution-link">https://perldoc.perl.org/5.38.0/autodie::Scope::GuardStack</a>
  </p>
</div>
