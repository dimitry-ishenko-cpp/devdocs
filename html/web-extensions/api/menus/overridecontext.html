<h1>menus.overrideContext()</h1>
<div class="section-content">
<p>Hide all default Firefox menu items in favor of providing a custom context menu UI.</p> <p>The overrideContext method will cause the matching menu items from this extension to be shown instead of the default menu. This method should be called from a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/contextmenu_event"><code>contextmenu</code></a> DOM event handler, and only applies to the menu that opens after this event.</p> <p>This interface requires the <code>menus.overrideContext</code> <a href="../../manifest.json/permissions.html">permission</a>.</p>
</div>
<section aria-labelledby="syntax"><h2 id="syntax">Syntax</h2>
<div class="section-content"><div class="code-example"><pre data-language="js">browser<span class="token punctuation">.</span>menus<span class="token punctuation">.</span><span class="token function">overrideContext</span><span class="token punctuation">(</span>
  contextOptions <span class="token comment">// object</span>
<span class="token punctuation">)</span>
</pre></div></div></section><section aria-labelledby="parameters"><h3 id="parameters">Parameters</h3>
<div class="section-content"><dl> <dt id="contextoptions"><code>contextOptions</code></dt> <dd> <p><code>object</code>. Options for how the context menus will be overridden.</p> <dl> <dt id="showdefaults">
<code>showDefaults</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p><code>boolean</code>. Whether to also include default menu items in the menu.</p> </dd> <dt id="context">
<code>context</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p><code>string</code>. ContextType to override, to allow menu items from other extensions in the menu. Currently only <code>'bookmark'</code> and <code>'tab'</code> are supported. <code>showDefaults</code> cannot be used with this option.</p> </dd> <dt id="bookmarkid">
<code>bookmarkId</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p><code>string</code>. Required when context is <code>'bookmark'</code>. Requires 'bookmark' permission.</p> </dd> <dt id="tabid">
<code>tabId</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p><code>integer</code>. Required when context is <code>'tab'</code>. Requires 'tabs' permission.</p> </dd> </dl> </dd> </dl></div></section><section aria-labelledby="examples"><h2 id="examples">Examples</h2>
<div class="section-content">
<p>Open the tab context menu on your custom UI, in this case:</p> <div class="code-example"><pre data-language="js">document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
  <span class="token string">"contextmenu"</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> foo <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">closest</span><span class="token punctuation">(</span><span class="token string">".foo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>foo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// When the context menu is opened on an element with the foo class</span>
      <span class="token comment">// set the context to "opening a tab context menu".</span>
      browser<span class="token punctuation">.</span>menus<span class="token punctuation">.</span><span class="token function">overrideContext</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">context</span><span class="token operator">:</span> <span class="token string">"tab"</span><span class="token punctuation">,</span>
        <span class="token literal-property property">tabId</span><span class="token operator">:</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>foo<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>tabId<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">capture</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div> <p>See <a href="https://blog.mozilla.org/addons/2018/11/08/extensions-in-firefox-64/#cm" target="_blank">this blog post</a> for more details.</p>
</div></section><h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody><tr>
<th><code>overrideContext</code></th>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">64</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr></tbody>
</table></div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/menus/overrideContext" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/menus/overrideContext</a>
  </p>
</div>
