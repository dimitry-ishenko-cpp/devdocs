<h1>declarativeNetRequest.RuleCondition</h1>
<div class="section-content"><p>Details of the condition that determines whether a rule matches a request.</p></div>
<section aria-labelledby="type"><h2 id="type">Type</h2>
<div class="section-content">
<p>Values of this type are objects. They contain these properties:</p> <dl> <dt id="domaintype">
<code>domainType</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>A <code>string</code>. Specifies whether the network request is first-party or third-party to the domain from where it originated. If omitted, all requests are accepted. Possible values are <code>"firstParty"</code> and <code>"thirdParty"</code>.</p> </dd> <dt id="domains">
<code>domains</code> <abbr class="icon icon-deprecated" title="Deprecated. Not for use in new websites."> <span class="visually-hidden">Deprecated</span> </abbr> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>An array of <code>string</code>. Use <a href="#initiatordomains"><code>initiatorDomains</code></a> instead. The rule only matches network requests originating from this list of domains.</p> </dd> <dt id="excludeddomains">
<code>excludedDomains</code> <abbr class="icon icon-deprecated" title="Deprecated. Not for use in new websites."> <span class="visually-hidden">Deprecated</span> </abbr> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>An array of <code>string</code>. Use <a href="#excludedinitiatordomains"><code>excludedInitiatorDomains</code></a> instead. The rule does not match network requests originating from this list of domains.</p> </dd> <dt id="initiatordomains">
<code>initiatorDomains</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>An array of <code>string</code>. The rule only matches network requests originating from this list of domains. If the list is omitted, the rule is applied to requests from all domains. An empty list is not allowed. A <a href="#canonical_domain">canonical domain</a> should be used. This matches against the request initiator and not the request URL.</p> </dd> <dt id="excludedinitiatordomains">
<code>excludedInitiatorDomains</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>An array of <code>string</code>. The rule does not match network requests originating from this list of domains. If the list is empty or omitted, no domains are excluded. This takes precedence over <code>initiatorDomains</code>. A <a href="#whocanonical_domain">canonical domain</a> should be used. This matches against the request initiator and not the request URL.</p> </dd> <dt id="isurlfiltercasesensitive">
<code>isUrlFilterCaseSensitive</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>A <code>boolean</code>. Whether the <a href="#urlfilter"><code>urlFilter</code></a> or <a href="#regexfilter"><code>regexFilter</code></a> (whichever is specified) is case sensitive. Default is true in (older) versions of Chrome and Safari, and false in Firefox. There is consensus on defaulting to <code>true</code> across browsers in <a href="https://github.com/w3c/webextensions/issues/269" target="_blank">WECG issue 269</a>.</p> </dd> <dt id="regexfilter">
<code>regexFilter</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>A <code>string</code>. Regular expression to match against the network request URL. Note that:</p> <ul> <li>The supported format is not stable and varies across browsers, see <a href="https://github.com/w3c/webextensions/issues/344" target="_blank">"Regular expressions in DNR API (regexFilter)" in WECG issue 344</a> for details.</li> <li>Only one of <a href="#urlfilter"><code>urlFilter</code></a> or <a href="#regexfilter"><code>regexFilter</code></a> can be specified.</li> <li>The <a href="#regexfilter"><code>regexFilter</code></a> must be composed of only ASCII characters. This is matched against a URL where the host is encoded in the <a href="https://en.wikipedia.org/wiki/Punycode" target="_blank">punycode</a> format (in case of internationalized domains) and any other non-ascii characters are URL encoded in utf-8.</li> </ul> </dd> <dt id="requestdomains">
<code>requestDomains</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>An array of <code>string</code>. The rule only matches network requests when the domain matches one from this list. If the list is omitted, the rule is applied to requests from all domains. An empty list is not allowed. A <a href="#canonical_domain">canonical domain</a> should be used.</p> </dd> <dt id="excludedrequestdomains">
<code>excludedRequestDomains</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>An array of <code>string</code>. The rule does not match network requests when the domains matches one from this list. If the list is empty or omitted, no domains are excluded. This takes precedence over <code>requestDomains</code>. A <a href="#canonical_domain">canonical domain</a> should be used.</p> </dd> <dt id="requestmethods">
<code>requestMethods</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>An array of <code>string</code>. List of HTTP request methods that the rule matches. An empty list is not allowed. Specifying a <code>requestMethods</code> rule condition also excludes non-HTTP(s) requests, whereas specifying <a href="#excludedrequestmethods"><code>excludedRequestMethods</code></a> does not.</p> </dd> <dt id="excludedrequestmethods">
<code>excludedRequestMethods</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>An array of <code>string</code>. List of request methods that the rule does not match on. Only one of <a href="#requestmethods"><code>requestMethods</code></a> and <code>excludedRequestMethods</code> should be specified. If neither of them is specified, all request methods are matched.</p> </dd> <dt id="resourcetypes">
<code>resourceTypes</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>An array of <a href="resourcetype.html"><code>declarativeNetRequest.ResourceType</code></a>. List of resource types that the rule matches with. An empty list is not allowed. This must be specified for <code>"allowAllRequests"</code> rules and may only include the <code>"sub_frame"</code> and <code>"main_frame"</code> resource types.</p> </dd> <dt id="excludedresourcetypes">
<code>excludedResourceTypes</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>An array of <a href="resourcetype.html"><code>declarativeNetRequest.ResourceType</code></a>. List of resource types that the rule does not match on. Only one of <a href="#resourcetypes"><code>resourceTypes</code></a> and <code>excludedResourceTypes</code> should be specified. If neither of them is specified, all resource types except <code>"main_frame"</code> are blocked.</p> </dd> <dt id="tabids">
<code>tabIds</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>An array of <code>number</code>. List of <a href="../tabs/tab.html"><code>tabs.Tab</code></a>.<code>id</code> that the rule should match. An ID of <a href="../tabs/tab_id_none.html"><code>tabs.TAB_ID_NONE</code></a> matches requests that don't originate from a tab. An empty list is not allowed. Only supported for session-scoped rules.</p> </dd> <dt id="excludedtabids">
<code>excludedTabIds</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>An array of <code>number</code>. List of <a href="../tabs/tab.html"><code>tabs.Tab</code></a>.<code>id</code> that the rule should not match. An ID of <a href="../tabs/tab_id_none.html"><code>tabs.TAB_ID_NONE</code></a> excludes requests that do not originate from a tab. Only supported for session-scoped rules.</p> </dd> <dt id="urlfilter">
<code>urlFilter</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>A <code>string</code>. The pattern that is matched against the network request URL. Supported constructs:</p> <ul> <li>'*' : Wildcard: Matches any number of characters.</li> <li>'|' : Left or right anchor: If used at either end of the pattern, specifies the beginning or end of the URL respectively.</li> <li>'||' : Domain name anchor: If used at the beginning of the pattern, specifies the start of a (sub-)domain of the URL.</li> <li> '^' : Separator character: This matches anything except a letter, a digit. or one of _, -, ., or %. The last <code>^</code> may also match the end of the URL instead of a separator character. <code>urlFilter</code> is composed of the following parts: (optional left/domain name anchor) + pattern + (optional right anchor). If omitted, all URLs are matched. An empty string is not allowed. A pattern beginning with ||* is not allowed. Use * instead. Note that: </li> <li>Only one of <code>urlFilter</code> or <a href="#regexfilter"><code>regexFilter</code></a> can be specified.</li> <li>The <code>urlFilter</code> must be composed of only ASCII characters. This is matched against a URL where the host is encoded in the <a href="https://en.wikipedia.org/wiki/Punycode" target="_blank">punycode</a> format (in case of internationalized domains) and any other non-ASCII characters are URL encoded in utf-8. For example, when the request URL is <code>http://abc.рф?q=ф</code>, the <code>urlFilter</code> is matched against the URL <code>http://abc.xn--p1ai/?q=%D1%84</code>.</li> </ul> </dd> </dl>
</div></section><section aria-labelledby="canonical_domain"><h3 id="canonical_domain">Canonical domain</h3>
<div class="section-content">
<p>Domains specified in <code>initiatorDomains</code>, <code>excludedInitiatorDomains</code>, <code>requestDomains</code>, or <code>excludedRequestDomains</code> should comply with the following:</p> <ul> <li>Sub-domains such as "a.example.com" are allowed.</li> <li>The entries must consist of only <em>lowercase</em> ASCII characters.</li> <li>Use <a href="https://en.wikipedia.org/wiki/Punycode" target="_blank">Punycode</a> encoding for internationalized domains.</li> <li>IPv4 addresses must be represented as 4 numbers separated by a dot.</li> <li>IPv6 addresses should be represented in their canonical form, wrapped in brackets.</li> </ul> <p>To programmatically generate the canonical domain for a URL, use the <a href="https://developer.mozilla.org/en-US/docs/Web/API/URL">URL API</a> and read its <code>hostname</code> property, i.e., <code>new URL(url).hostname</code>.</p>
</div></section><h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody>
<tr>
<th><code>RuleCondition</code></th>
<td class="bc-supports-yes">84</td>
<td class="bc-supports-yes">84</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td class="bc-supports-yes">70</td>
<td class="bc-supports-yes">15</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td class="bc-supports-yes">15</td>
<td>?</td>
</tr>
<tr>
<th><code>domains</code></th>
<td class="bc-supports-yes"><details><summary>84</summary>Deprecated in Chrome 101, use <code>initiatorDomains</code> instead.</details></td>
<td class="bc-supports-yes"><details><summary>84</summary>Deprecated in Edge 101, use <code>initiatorDomains</code> instead.</details></td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td class="bc-supports-yes"><details><summary>70</summary>Deprecated in Opera 87, use <code>initiatorDomains</code> instead.</details></td>
<td class="bc-supports-yes">15</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td class="bc-supports-yes">15</td>
<td>?</td>
</tr>
<tr>
<th><code>excludedDomains</code></th>
<td class="bc-supports-yes"><details><summary>84</summary>Deprecated in Chrome 101, use <code>excludedInitiatorDomains</code> instead.</details></td>
<td class="bc-supports-yes"><details><summary>84</summary>Deprecated in Edge 101, use <code>excludedInitiatorDomains</code> instead.</details></td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td class="bc-supports-yes"><details><summary>70</summary>Deprecated in Opera 87, use <code>excludedInitiatorDomains</code> instead.</details></td>
<td class="bc-supports-yes">15</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td class="bc-supports-yes">15</td>
<td>?</td>
</tr>
<tr>
<th><code>excludedInitiatorDomains</code></th>
<td class="bc-supports-yes">101</td>
<td class="bc-supports-yes">101</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td class="bc-supports-yes">87</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr>
<tr>
<th><code>excludedRequestDomains</code></th>
<td class="bc-supports-yes">101</td>
<td class="bc-supports-yes">101</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td class="bc-supports-yes">87</td>
<td class="bc-supports-yes">preview</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr>
<tr>
<th><code>excludedRequestMethods</code></th>
<td class="bc-supports-yes">91</td>
<td class="bc-supports-yes">91</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td class="bc-supports-yes">77</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr>
<tr>
<th><code>requestDomains</code></th>
<td class="bc-supports-yes">101</td>
<td class="bc-supports-yes">101</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td class="bc-supports-yes">87</td>
<td class="bc-supports-yes">16.4</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td class="bc-supports-yes">16.4</td>
<td>?</td>
</tr>
<tr>
<th><code>requestMethods</code></th>
<td class="bc-supports-yes">91</td>
<td class="bc-supports-yes">91</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td class="bc-supports-yes">77</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr>
<tr>
<th><code>tabIds</code></th>
<td class="bc-supports-yes">92</td>
<td class="bc-supports-yes">92</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td class="bc-supports-yes">78</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr>
</tbody>
</table></div>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/declarativeNetRequest/RuleCondition" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/declarativeNetRequest/RuleCondition</a>
  </p>
</div>
