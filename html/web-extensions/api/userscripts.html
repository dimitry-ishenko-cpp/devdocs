<h1>userScripts</h1>
<div class="section-content">
<p>Use this API to register user scripts, third-party scripts designed to manipulate webpages or provide new features. Registering a user script instructs the browser to attach the script to pages that match the URL patterns specified during registration.</p> <div class="notecard note" id="sect1"> <p><strong>Note:</strong> When using Manifest V3 or higher, use <a href="scripting/registercontentscripts.html"><code>scripting.registerContentScripts()</code></a> to register scripts.</p> </div> <p>This API offers similar capabilities to <a href="contentscripts.html"><code>contentScripts</code></a> but with features suited to handling third-party scripts:</p> <ul> <li>execution is in an isolated sandbox: each user script is run in an isolated sandbox within the web content processes, preventing accidental or deliberate interference among scripts.</li> <li>access to the <code>window</code> and <code>document</code> global values related to the webpage the user script is attached to.</li> <li>no access to WebExtension APIs or associated permissions granted to the extension: the API script, which inherits the extension's permissions, can provide packaged WebExtension APIs to registered user scripts. An API script is declared in the extension's manifest file using the "user_scripts" manifest key.</li> </ul> <div class="notecard warning" id="sect2"> <p><strong>Warning:</strong> This API requires the presence of the <a href="../manifest.json/user_scripts.html"><code>user_scripts</code></a> key in the manifest.json, even if no API script is specified. For example. <code>user_scripts: {}</code>.</p> </div> <p>To use the API, call <code><a href="userscripts/register.html"><code>register()</code></a></code> passing in an object defining the scripts to register. The method returns a Promise that is resolved with a <code><a href="userscripts/registereduserscript.html"><code>RegisteredUserScript</code></a></code> object.</p> <div class="notecard note" id="sect3"> <p><strong>Note:</strong> User scripts are unregistered when the related extension page (from which the user scripts were registered) is unloaded, so you should register a user script from an extension page that persists at least as long as you want the user scripts to stay registered.</p> </div>
</div>
<section aria-labelledby="types"><h2 id="types">Types</h2>
<div class="section-content"><dl> <dt id="userscripts.registereduserscript"><a href="userscripts/registereduserscript.html"><code>userScripts.RegisteredUserScript</code></a></dt> <dd> <p>The <code>object</code> returned by the <a href="userscripts/register.html"><code>register()</code></a> method. It represents the registered user scripts and is used to deregister the user scripts.</p> </dd> </dl></div></section><section aria-labelledby="methods"><h2 id="methods">Methods</h2>
<div class="section-content"><dl> <dt id="userscripts.register"><a href="userscripts/register.html"><code>userScripts.register()</code></a></dt> <dd> <p>Registers user scripts.</p> </dd> </dl></div></section><section aria-labelledby="events"><h2 id="events">Events</h2>
<div class="section-content"><dl> <dt id="userscripts.onbeforescript"><a href="userscripts/onbeforescript.html"><code>userScripts.onBeforeScript</code></a></dt> <dd> <p>An event available to the API script, registered in<a href="../manifest.json/user_scripts.html"><code>"user_scripts"</code></a>, that execute before a user script executes. Use it to trigger the export of the additional APIs provided by the API script, so they are available to the user script.</p> </dd> </dl></div></section><h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody>
<tr>
<th><code>RegisteredUserScript</code></th>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">68</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-yes">68</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr>
<tr>
<th><code>cookieStoreId</code></th>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">98</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-yes">98</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr>
<tr>
<th><code>onBeforeScript</code></th>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">68</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-yes">68</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr>
<tr>
<th><code>register</code></th>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">68</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-yes">68</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr>
</tbody>
</table></div>
<section aria-labelledby="see_also"><h2 id="see_also">See also</h2>
<div class="section-content"><ul> <li><a href="userscripts/working_with_userscripts.html">Working with <code>userScripts</code></a></li> <li><a href="contentscripts.html"><code>browser.contentScripts</code></a></li> </ul></div></section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/userScripts" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/userScripts</a>
  </p>
</div>
