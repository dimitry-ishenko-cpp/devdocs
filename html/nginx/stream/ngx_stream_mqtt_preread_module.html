<h1>Module ngx_stream_mqtt_preread_module</h1>
<ul>
<li><a href="#example">Example Configuration</a></li>
<li><a href="#directives">Directives</a></li>
<li><a href="#mqtt_preread">mqtt_preread</a></li>
<li><a href="#variables">Embedded Variables</a></li>
</ul> <p id="summary"> The <code>ngx_stream_mqtt_preread_module</code> module (1.23.4) allows extracting information from the CONNECT message of the Message Queuing Telemetry Transport protocol (MQTT) versions <a href="https://docs.oasis-open.org/mqtt/mqtt/v3.1.1/mqtt-v3.1.1.html">3.1.1</a> and <a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/mqtt-v5.0.html">5.0</a>, for example, a username or a client ID. </p>
 <blockquote class="note"> This module is available as part of our <a href="https://www.f5.com/products/nginx">commercial subscription</a>. </blockquote>
 <h4 id="example">Example Configuration</h4>
 <pre data-language="nginx">
mqtt_preread on;
return       $mqtt_preread_clientid;
</pre>
 <h4 id="directives">Directives</h4>
<div class="directive" id="mqtt_preread"><table cellspacing="0"> <tr> <th> Syntax: </th> <td> <code><strong>mqtt_preread</strong> on | off;</code><br> </td> </tr> <tr> <th> Default: </th> <td> <code>mqtt_preread off;</code> </td> </tr> <tr> <th> Context: </th> <td> <code>stream</code>, <code>server</code><br> </td> </tr> </table></div>
<p> Enables extracting information from the MQTT CONNECT message at the <a href="stream_processing.html#preread_phase">preread</a> phase. </p> <h4 id="variables">Embedded Variables</h4>
 <dl class="compact"> <dt id="var_mqtt_preread_clientid"><code>$mqtt_preread_clientid</code></dt> <dd> the <code>clientid</code> value from the CONNECT message </dd> <dt id="var_mqtt_preread_username"><code>$mqtt_preread_username</code></dt> <dd> the <code>username</code> value from the CONNECT message </dd> </dl>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2002-2021 Igor Sysoev<br>&copy; 2011-2024 Nginx, Inc.<br>Licensed under the BSD License.<br>
    <a href="https://nginx.org/en/docs/stream/ngx_stream_mqtt_preread_module.html" class="_attribution-link">https://nginx.org/en/docs/stream/ngx_stream_mqtt_preread_module.html</a>
  </p>
</div>
