<h1>Module ngx_http_sub_module</h1>
<ul>
<li><a href="#example">Example Configuration</a></li>
<li><a href="#directives">Directives</a></li>
<li><a href="#sub_filter">sub_filter</a></li>
<li><a href="#sub_filter_last_modified">sub_filter_last_modified</a></li>
<li><a href="#sub_filter_once">sub_filter_once</a></li>
<li><a href="#sub_filter_types">sub_filter_types</a></li>
</ul> <p id="summary"> The <code>ngx_http_sub_module</code> module is a filter that modifies a response by replacing one specified string by another. </p>
<p> This module is not built by default, it should be enabled with the <code>--with-http_sub_module</code> configuration parameter. </p> <h4 id="example">Example Configuration</h4>
 <pre data-language="nginx">
location / {
    sub_filter '&lt;a href="http://127.0.0.1:8080/'  '&lt;a href="https://$host/';
    sub_filter '&lt;img src="http://127.0.0.1:8080/' '&lt;img src="https://$host/';
    sub_filter_once on;
}
</pre>
 <h4 id="directives">Directives</h4>
<div class="directive" id="sub_filter"><table cellspacing="0"> <tr> <th> Syntax: </th> <td> <code><strong>sub_filter</strong> <i>string</i> <i>replacement</i>;</code><br> </td> </tr> <tr> <th> Default: </th> <td> — </td> </tr> <tr> <th> Context: </th> <td> <code>http</code>, <code>server</code>, <code>location</code><br> </td> </tr> </table></div>
<p> Sets a string to replace and a replacement string. The string to replace is matched ignoring the case. The string to replace (1.9.4) and replacement string can contain variables. Several <code>sub_filter</code> directives can be specified on the same configuration level (1.9.4). These directives are inherited from the previous configuration level if and only if there are no <code>sub_filter</code> directives defined on the current level. </p>
<div class="directive" id="sub_filter_last_modified">
<table cellspacing="0"> <tr> <th> Syntax: </th> <td> <code><strong>sub_filter_last_modified</strong> on | off;</code><br> </td> </tr> <tr> <th> Default: </th> <td> <code>sub_filter_last_modified off;</code> </td> </tr> <tr> <th> Context: </th> <td> <code>http</code>, <code>server</code>, <code>location</code><br> </td> </tr> </table>
<p>This directive appeared in version 1.5.1. </p>
</div>
<p> Allows preserving the “Last-Modified” header field from the original response during replacement to facilitate response caching. </p>
<p> By default, the header field is removed as contents of the response are modified during processing. </p>
<div class="directive" id="sub_filter_once"><table cellspacing="0"> <tr> <th> Syntax: </th> <td> <code><strong>sub_filter_once</strong> on | off;</code><br> </td> </tr> <tr> <th> Default: </th> <td> <code>sub_filter_once on;</code> </td> </tr> <tr> <th> Context: </th> <td> <code>http</code>, <code>server</code>, <code>location</code><br> </td> </tr> </table></div>
<p> Indicates whether to look for each string to replace once or repeatedly. </p>
<div class="directive" id="sub_filter_types"><table cellspacing="0"> <tr> <th> Syntax: </th> <td> <code><strong>sub_filter_types</strong> <i>mime-type</i> ...;</code><br> </td> </tr> <tr> <th> Default: </th> <td> <code>sub_filter_types text/html;</code> </td> </tr> <tr> <th> Context: </th> <td> <code>http</code>, <code>server</code>, <code>location</code><br> </td> </tr> </table></div>
<p> Enables string replacement in responses with the specified MIME types in addition to “<code>text/html</code>”. The special value “<code>*</code>” matches any MIME type (0.8.29). </p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2002-2021 Igor Sysoev<br>&copy; 2011-2024 Nginx, Inc.<br>Licensed under the BSD License.<br>
    <a href="https://nginx.org/en/docs/http/ngx_http_sub_module.html" class="_attribution-link">https://nginx.org/en/docs/http/ngx_http_sub_module.html</a>
  </p>
</div>
