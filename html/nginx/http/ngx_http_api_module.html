<h1>Module ngx_http_api_module</h1>
<ul>
<li><a href="#example">Example Configuration</a></li>
<li><a href="#directives">Directives</a></li>
<li><a href="#api">api</a></li>
<li><a href="#status_zone">status_zone</a></li>
<li><a href="#compatibility">Compatibility</a></li>
<li><a href="#endpoints">Endpoints</a></li>
<li><a href="#root">/</a></li>
<li><a href="#nginx">/nginx</a></li>
<li><a href="#processes">/processes</a></li>
<li><a href="#connections">/connections</a></li>
<li><a href="#slabs_">/slabs/</a></li>
<li><a href="#slabs_slab_zone_name">/slabs/{slabZoneName}</a></li>
<li><a href="#http_">/http/</a></li>
<li><a href="#http_requests">/http/requests</a></li>
<li><a href="#http_server_zones_">/http/server_zones/</a></li>
<li><a href="#http_server_zones_http_server_zone_name">/http/server_zones/{httpServerZoneName}</a></li>
<li><a href="#http_location_zones_">/http/location_zones/</a></li>
<li><a href="#http_location_zones_http_location_zone_name">/http/location_zones/{httpLocationZoneName}</a></li>
<li><a href="#http_caches_">/http/caches/</a></li>
<li><a href="#http_caches_http_cache_zone_name">/http/caches/{httpCacheZoneName}</a></li>
<li><a href="#http_limit_conns_">/http/limit_conns/</a></li>
<li><a href="#http_limit_conns_http_limit_conn_zone_name">/http/limit_conns/{httpLimitConnZoneName}</a></li>
<li><a href="#http_limit_reqs_">/http/limit_reqs/</a></li>
<li><a href="#http_limit_reqs_http_limit_req_zone_name">/http/limit_reqs/{httpLimitReqZoneName}</a></li>
<li><a href="#http_upstreams_">/http/upstreams/</a></li>
<li><a href="#http_upstreams_http_upstream_name_">/http/upstreams/{httpUpstreamName}/</a></li>
<li><a href="#http_upstreams_http_upstream_name_servers_">/http/upstreams/{httpUpstreamName}/servers/</a></li>
<li><a href="#http_upstreams_http_upstream_name_servers_http_upstream_server_id">/http/upstreams/{httpUpstreamName}/servers/{httpUpstreamServerId}</a></li>
<li><a href="#http_keyvals_">/http/keyvals/</a></li>
<li><a href="#http_keyvals_http_keyval_zone_name">/http/keyvals/{httpKeyvalZoneName}</a></li>
<li><a href="#stream_">/stream/</a></li>
<li><a href="#stream_server_zones_">/stream/server_zones/</a></li>
<li><a href="#stream_server_zones_stream_server_zone_name">/stream/server_zones/{streamServerZoneName}</a></li>
<li><a href="#stream_limit_conns_">/stream/limit_conns/</a></li>
<li><a href="#stream_limit_conns_stream_limit_conn_zone_name">/stream/limit_conns/{streamLimitConnZoneName}</a></li>
<li><a href="#stream_upstreams_">/stream/upstreams/</a></li>
<li><a href="#stream_upstreams_stream_upstream_name_">/stream/upstreams/{streamUpstreamName}/</a></li>
<li><a href="#stream_upstreams_stream_upstream_name_servers_">/stream/upstreams/{streamUpstreamName}/servers/</a></li>
<li><a href="#stream_upstreams_stream_upstream_name_servers_stream_upstream_server_id">/stream/upstreams/{streamUpstreamName}/servers/{streamUpstreamServerId}</a></li>
<li><a href="#stream_keyvals_">/stream/keyvals/</a></li>
<li><a href="#stream_keyvals_stream_keyval_zone_name">/stream/keyvals/{streamKeyvalZoneName}</a></li>
<li><a href="#stream_zone_sync_">/stream/zone_sync/</a></li>
<li><a href="#resolvers_">/resolvers/</a></li>
<li><a href="#resolvers_resolver_zone_name">/resolvers/{resolverZoneName}</a></li>
<li><a href="#ssl">/ssl</a></li>
<li><a href="#definitions">Response Objects</a></li>
</ul> <p id="summary"> The <code>ngx_http_api_module</code> module (1.13.3) provides REST API for accessing various status information, configuring upstream server groups on-the-fly, and managing <a href="ngx_http_keyval_module.html">key-value pairs</a> without the need of reconfiguring nginx. </p>
 <blockquote class="note"> The module supersedes the <a href="ngx_http_status_module.html">ngx_http_status_module</a> and <a href="ngx_http_upstream_conf_module.html">ngx_http_upstream_conf_module</a> modules. </blockquote>

<p> When using the <code>PATCH</code> or <code>POST</code> methods, make sure that the payload does not exceed the <a href="ngx_http_core_module.html#client_body_buffer_size">buffer size</a> for reading the client request body, otherwise, the 413 (Request Entity Too Large) error may be returned. </p>
 <blockquote class="note"> This module is available as part of our <a href="http://nginx.com/products/">commercial subscription</a>. </blockquote>
 <h4 id="example">Example Configuration</h4>
 <pre data-language="nginx">
http {
    upstream backend {
        zone http_backend 64k;

        server backend1.example.com weight=5;
        server backend2.example.com;
    }

    proxy_cache_path /data/nginx/cache_backend keys_zone=cache_backend:10m;

    server {
        server_name backend.example.com;

        location / {
            proxy_pass  http://backend;
            proxy_cache cache_backend;

            health_check;
        }

        status_zone server_backend;
    }

    keyval_zone zone=one:32k state=one.keyval;
    keyval $arg_text $text zone=one;

    server {
        listen 127.0.0.1;

        location /api {
            <strong>api</strong> write=on;
            allow 127.0.0.1;
            deny all;
        }
    }
}

stream {
    upstream backend {
        zone stream_backend 64k;

        server backend1.example.com:12345 weight=5;
        server backend2.example.com:12345;
    }

    server {
        listen      127.0.0.1:12345;
        proxy_pass  backend;
        status_zone server_backend;
        health_check;
    }
}
</pre>
<p> All API requests include a supported API <a href="#api_version">version</a> in the URI. Examples of API requests with this configuration: </p> <pre data-language="nginx">
http://127.0.0.1/api/8/
http://127.0.0.1/api/8/nginx
http://127.0.0.1/api/8/connections
http://127.0.0.1/api/8/http/requests
http://127.0.0.1/api/8/http/server_zones/server_backend
http://127.0.0.1/api/8/http/caches/cache_backend
http://127.0.0.1/api/8/http/upstreams/backend
http://127.0.0.1/api/8/http/upstreams/backend/servers/
http://127.0.0.1/api/8/http/upstreams/backend/servers/1
http://127.0.0.1/api/8/http/keyvals/one?key=arg1
http://127.0.0.1/api/8/stream/
http://127.0.0.1/api/8/stream/server_zones/server_backend
http://127.0.0.1/api/8/stream/upstreams/
http://127.0.0.1/api/8/stream/upstreams/backend
http://127.0.0.1/api/8/stream/upstreams/backend/servers/1
</pre>
 <h4 id="directives">Directives</h4>
<div class="directive" id="api"><table cellspacing="0"> <tr> <th> Syntax: </th> <td> <code><strong>api</strong> 
[write=on|off];</code><br> </td> </tr> <tr> <th> Default: </th> <td> — </td> </tr> <tr> <th> Context: </th> <td> <code>location</code><br> </td> </tr> </table></div>
<p> Turns on the REST API interface in the surrounding location. Access to this location should be <a href="ngx_http_core_module.html#satisfy">limited</a>. </p>
<p> The <code>write</code> parameter determines whether the API is read-only or read-write. By default, the API is read-only. </p>
<p id="api_version"> All API requests should contain a supported API version in the URI. If the request URI equals the location prefix, the list of supported API versions is returned. The current API version is “<code>8</code>”. </p>
<p> The optional “<code>fields</code>” argument in the request line specifies which fields of the requested objects will be output: </p> <pre data-language="nginx">
http://127.0.0.1/api/8/nginx?fields=version,build
</pre>

<div class="directive" id="status_zone">
<table cellspacing="0"> <tr> <th> Syntax: </th> <td> <code><strong>status_zone</strong> <i>zone</i>;</code><br> </td> </tr> <tr> <th> Default: </th> <td> — </td> </tr> <tr> <th> Context: </th> <td> <code>server</code>, <code>location</code>, <code>if in location</code><br> </td> </tr> </table>
<p>This directive appeared in version 1.13.12. </p>
</div>
<p> Enables collection of virtual <a href="ngx_http_core_module.html#server">http</a> or <a href="../stream/ngx_stream_core_module.html#server">stream</a> server status information in the specified <code><i>zone</i></code>. Several servers may share the same zone. </p>
<p id="status_zone_location"> Starting from 1.17.0, status information can be collected per <a href="ngx_http_core_module.html#location">location</a>. The special value <code>off</code> disables statistics collection in nested location blocks. Note that the statistics is collected in the context of a location where processing ends. It may be different from the original location, if an <a href="ngx_http_core_module.html#internal">internal redirect</a> happens during request processing. </p> <h4 id="compatibility">Compatibility</h4>
 <ul class="compact"> <li> Detailed failure counters were added to SSL statistics in <a href="#api_version">version</a> 8 (1.23.2). </li> <li> The <code>ssl</code> data for each HTTP <a href="#def_nginx_http_upstream">upstream</a>, <a href="#def_nginx_http_server_zone">server zone</a>, and stream <a href="#def_nginx_stream_upstream">upstream</a>, <a href="#def_nginx_stream_server_zone">server zone</a>, were added in <a href="#api_version">version</a> 8 (1.21.6). </li> <li> The <code>codes</code> data in <code>responses</code> for each HTTP <a href="#def_nginx_http_upstream">upstream</a>, <a href="#def_nginx_http_server_zone">server zone</a>, and <a href="#def_nginx_http_location_zone">location zone</a> were added in <a href="#api_version">version</a> 7. </li> <li> The <a href="#stream_limit_conns_">/stream/limit_conns/</a> data were added in <a href="#api_version">version</a> 6. </li> <li> The <a href="#http_limit_conns_">/http/limit_conns/</a> data were added in <a href="#api_version">version</a> 6. </li> <li> The <a href="#http_limit_reqs_">/http/limit_reqs/</a> data were added in <a href="#api_version">version</a> 6. </li> <li> The “<code>expire</code>” parameter of a <a href="ngx_http_keyval_module.html">key-value</a> pair can be <a href="#postHttpKeyvalZoneData">set</a> or <a href="#patchHttpKeyvalZoneKeyValue">changed</a> since <a href="#api_version">version</a> 5. </li> <li> The <a href="#resolvers_">/resolvers/</a> data were added in <a href="#api_version">version</a> 5. </li> <li> The <a href="#http_location_zones_">/http/location_zones/</a> data were added in <a href="#api_version">version</a> 5. </li> <li> The <code>path</code> and <code>method</code> fields of <a href="#def_nginx_error">nginx error object</a> were removed in <a href="#api_version">version</a> 4. These fields continue to exist in earlier api versions, but show an empty value. </li> <li> The <a href="#stream_zone_sync_">/stream/zone_sync/</a> data were added in <a href="#api_version">version</a> 3. </li> <li> The <a href="#def_nginx_http_upstream_conf_server">drain</a> parameter was added in <a href="#api_version">version</a> 2. </li> <li> The <a href="#stream_keyvals_">/stream/keyvals/</a> data were added in <a href="#api_version">version</a> 2. </li> </ul>
 <h4 id="endpoints">Endpoints</h4>
 <dl class="compact"> <dt id="root"> <code>/</code> </dt> <dd> <p>Supported methods:</p> <ul class="compact"> <li id="getAPIEndpoints"> <code>GET</code> - Return list of root endpoints <p>Returns a list of root endpoints.</p> <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns an array of strings</li> <li>404 - Unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="nginx"> <code>/nginx</code> </dt> <dd> <p>Supported methods:</p> <ul class="compact"> <li id="getNginx"> <code>GET</code> - Return status of nginx running instance <p>Returns nginx version, build name, address, number of configuration reloads, IDs of master and worker processes.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>fields</code> (<code>string</code>, optional)</dt> <dd> Limits which fields of nginx running instance will be output.</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns <a href="#def_nginx_object">nginx</a>
</li> <li>404 - Unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="processes"> <code>/processes</code> </dt> <dd> <p>Supported methods:</p> <ul class="compact"> <li id="getProcesses"> <code>GET</code> - Return nginx processes status <p>Returns the number of abnormally terminated and respawned child processes.</p> <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns <a href="#def_nginx_processes">Processes</a>
</li> <li>404 - Unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> <li id="deleteProcesses"> <code>DELETE</code> - Reset nginx processes statistics <p>Resets counters of abnormally terminated and respawned child processes.</p> <p> Possible responses: </p> <ul class="compact"> <li>204 - Success</li> <li>404 - Unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>405 - Method disabled (<code>MethodDisabled</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="connections"> <code>/connections</code> </dt> <dd> <p>Supported methods:</p> <ul class="compact"> <li id="getConnections"> <code>GET</code> - Return client connections statistics <p>Returns statistics of client connections.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>fields</code> (<code>string</code>, optional)</dt> <dd> Limits which fields of the connections statistics will be output.</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns <a href="#def_nginx_connections">Connections</a>
</li> <li>404 - Unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> <li id="deleteConnections"> <code>DELETE</code> - Reset client connections statistics <p>Resets statistics of accepted and dropped client connections.</p> <p> Possible responses: </p> <ul class="compact"> <li>204 - Success</li> <li>404 - Unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>405 - Method disabled (<code>MethodDisabled</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="slabs_"> <code>/slabs/</code> </dt> <dd> <p>Supported methods:</p> <ul class="compact"> <li id="getSlabs"> <code>GET</code> - Return status of all slabs <p>Returns status of slabs for each shared memory zone with slab allocator.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>fields</code> (<code>string</code>, optional)</dt> <dd> Limits which fields of slab zones will be output. If the “<code>fields</code>” value is empty, then only zone names will be output.</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns a collection of "<a href="#def_nginx_slab_zone">Shared memory zone with slab allocator</a>" objects for all slabs</li> <li>404 - Unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="slabs_slab_zone_name"> <code>/slabs/{slabZoneName}</code> </dt> <dd> Parameters common for all methods: <dl class="compact"> <dt>
<code>slabZoneName</code> (<code>string</code>, required)</dt> <dd> The name of the shared memory zone with slab allocator.</dd> </dl> <p>Supported methods:</p> <ul class="compact"> <li id="getSlabZone"> <code>GET</code> - Return status of a slab <p>Returns status of slabs for a particular shared memory zone with slab allocator.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>fields</code> (<code>string</code>, optional)</dt> <dd> Limits which fields of the slab zone will be output.</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns <a href="#def_nginx_slab_zone">Shared memory zone with slab allocator</a>
</li> <li>404 - Slab not found (<code>SlabNotFound</code>), unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> <li id="deleteSlabZoneStats"> <code>DELETE</code> - Reset slab statistics <p>Resets the “<code>reqs</code>” and “<code>fails</code>” metrics for each memory slot.</p> <p> Possible responses: </p> <ul class="compact"> <li>204 - Success</li> <li>404 - Slab not found (<code>SlabNotFound</code>), unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>405 - Method disabled (<code>MethodDisabled</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="http_"> <code>/http/</code> </dt> <dd> <p>Supported methods:</p> <ul class="compact"> <li id="getHttp"> <code>GET</code> - Return list of HTTP-related endpoints <p>Returns a list of first level HTTP endpoints.</p> <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns an array of strings</li> <li>404 - Unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="http_requests"> <code>/http/requests</code> </dt> <dd> <p>Supported methods:</p> <ul class="compact"> <li id="getHttpRequests"> <code>GET</code> - Return HTTP requests statistics <p>Returns status of client HTTP requests.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>fields</code> (<code>string</code>, optional)</dt> <dd> Limits which fields of client HTTP requests statistics will be output.</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns <a href="#def_nginx_http_requests">HTTP Requests</a>
</li> <li>404 - Unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> <li id="deleteHttpRequests"> <code>DELETE</code> - Reset HTTP requests statistics <p>Resets the number of total client HTTP requests.</p> <p> Possible responses: </p> <ul class="compact"> <li>204 - Success</li> <li>404 - Unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>405 - Method disabled (<code>MethodDisabled</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="http_server_zones_"> <code>/http/server_zones/</code> </dt> <dd> <p>Supported methods:</p> <ul class="compact"> <li id="getHttpServerZones"> <code>GET</code> - Return status of all HTTP server zones <p>Returns status information for each HTTP <a href="ngx_http_api_module.html#status_zone">server zone</a>.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>fields</code> (<code>string</code>, optional)</dt> <dd> Limits which fields of server zones will be output. If the “<code>fields</code>” value is empty, then only server zone names will be output.</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns a collection of "<a href="#def_nginx_http_server_zone">HTTP Server Zone</a>" objects for all HTTP server zones</li> <li>404 - Unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="http_server_zones_http_server_zone_name"> <code>/http/server_zones/{httpServerZoneName}</code> </dt> <dd> Parameters common for all methods: <dl class="compact"> <dt>
<code>httpServerZoneName</code> (<code>string</code>, required)</dt> <dd> The name of an HTTP server zone.</dd> </dl> <p>Supported methods:</p> <ul class="compact"> <li id="getHttpServerZone"> <code>GET</code> - Return status of an HTTP server zone <p>Returns status of a particular HTTP server zone.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>fields</code> (<code>string</code>, optional)</dt> <dd> Limits which fields of the server zone will be output.</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns <a href="#def_nginx_http_server_zone">HTTP Server Zone</a>
</li> <li>404 - Server zone not found (<code>ServerZoneNotFound</code>), unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> <li id="deleteHttpServerZoneStat"> <code>DELETE</code> - Reset statistics for an HTTP server zone <p>Resets statistics of accepted and discarded requests, responses, received and sent bytes, counters of SSL handshakes and session reuses in a particular HTTP server zone.</p> <p> Possible responses: </p> <ul class="compact"> <li>204 - Success</li> <li>404 - Server zone not found (<code>ServerZoneNotFound</code>), unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>405 - Method disabled (<code>MethodDisabled</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="http_location_zones_"> <code>/http/location_zones/</code> </dt> <dd> <p>Supported methods:</p> <ul class="compact"> <li id="getHttpLocationZones"> <code>GET</code> - Return status of all HTTP location zones <p>Returns status information for each HTTP <a href="ngx_http_api_module.html#status_zone_location">location zone</a>.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>fields</code> (<code>string</code>, optional)</dt> <dd> Limits which fields of location zones will be output. If the “<code>fields</code>” value is empty, then only zone names will be output.</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns a collection of "<a href="#def_nginx_http_location_zone">HTTP Location Zone</a>" objects for all HTTP location zones</li> <li>404 - Unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="http_location_zones_http_location_zone_name"> <code>/http/location_zones/{httpLocationZoneName}</code> </dt> <dd> Parameters common for all methods: <dl class="compact"> <dt>
<code>httpLocationZoneName</code> (<code>string</code>, required)</dt> <dd> The name of an HTTP <a href="ngx_http_api_module.html#status_zone_location">location zone</a>.</dd> </dl> <p>Supported methods:</p> <ul class="compact"> <li id="getHttpLocationZone"> <code>GET</code> - Return status of an HTTP location zone <p>Returns status of a particular HTTP <a href="ngx_http_api_module.html#status_zone_location">location zone</a>.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>fields</code> (<code>string</code>, optional)</dt> <dd> Limits which fields of the location zone will be output.</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns <a href="#def_nginx_http_location_zone">HTTP Location Zone</a>
</li> <li>404 - Location zone not found (<code>LocationZoneNotFound</code>), unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> <li id="deleteHttpLocationZoneStat"> <code>DELETE</code> - Reset statistics for a location zone. <p>Resets statistics of accepted and discarded requests, responses, received and sent bytes in a particular location zone.</p> <p> Possible responses: </p> <ul class="compact"> <li>204 - Success</li> <li>404 - Location zone not found (<code>LocationZoneNotFound</code>), unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>405 - Method disabled (<code>MethodDisabled</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="http_caches_"> <code>/http/caches/</code> </dt> <dd> <p>Supported methods:</p> <ul class="compact"> <li id="getHttpCaches"> <code>GET</code> - Return status of all caches <p>Returns status of each cache configured by <a href="ngx_http_proxy_module.html#proxy_cache_path">proxy_cache_path</a> and other “<code>*_cache_path</code>” directives.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>fields</code> (<code>string</code>, optional)</dt> <dd> Limits which fields of cache zones will be output. If the “<code>fields</code>” value is empty, then only names of cache zones will be output.</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns a collection of "<a href="#def_nginx_http_cache">HTTP Cache</a>" objects for all HTTP caches</li> <li>404 - Unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="http_caches_http_cache_zone_name"> <code>/http/caches/{httpCacheZoneName}</code> </dt> <dd> Parameters common for all methods: <dl class="compact"> <dt>
<code>httpCacheZoneName</code> (<code>string</code>, required)</dt> <dd> The name of the cache zone.</dd> </dl> <p>Supported methods:</p> <ul class="compact"> <li id="getHttpCacheZone"> <code>GET</code> - Return status of a cache <p>Returns status of a particular cache.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>fields</code> (<code>string</code>, optional)</dt> <dd> Limits which fields of the cache zone will be output.</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns <a href="#def_nginx_http_cache">HTTP Cache</a>
</li> <li>404 - Cache not found (<code>CacheNotFound</code>), unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> <li id="deleteHttpCacheZoneStat"> <code>DELETE</code> - Reset cache statistics <p>Resets statistics of cache hits/misses in a particular cache zone.</p> <p> Possible responses: </p> <ul class="compact"> <li>204 - Success</li> <li>404 - Cache not found (<code>CacheNotFound</code>), unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>405 - Method disabled (<code>MethodDisabled</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="http_limit_conns_"> <code>/http/limit_conns/</code> </dt> <dd> <p>Supported methods:</p> <ul class="compact"> <li id="getHttpLimitConnZones"> <code>GET</code> - Return status of all HTTP limit_conn zones <p>Returns status information for each HTTP <a href="ngx_http_limit_conn_module.html#limit_conn_zone">limit_conn zone</a>.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>fields</code> (<code>string</code>, optional)</dt> <dd> Limits which fields of limit_conn zones will be output. If the “<code>fields</code>” value is empty, then only zone names will be output.</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns a collection of "<a href="#def_nginx_http_limit_conn_zone">HTTP Connections Limiting</a>" objects for all HTTP limit conns</li> <li>404 - Unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="http_limit_conns_http_limit_conn_zone_name"> <code>/http/limit_conns/{httpLimitConnZoneName}</code> </dt> <dd> Parameters common for all methods: <dl class="compact"> <dt>
<code>httpLimitConnZoneName</code> (<code>string</code>, required)</dt> <dd> The name of a <a href="ngx_http_limit_conn_module.html#limit_conn_zone">limit_conn zone</a>.</dd> </dl> <p>Supported methods:</p> <ul class="compact"> <li id="getHttpLimitConnZone"> <code>GET</code> - Return status of an HTTP limit_conn zone <p>Returns status of a particular HTTP <a href="ngx_http_limit_conn_module.html#limit_conn_zone">limit_conn zone</a>.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>fields</code> (<code>string</code>, optional)</dt> <dd> Limits which fields of the <a href="ngx_http_limit_conn_module.html#limit_conn_zone">limit_conn zone</a> will be output.</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns <a href="#def_nginx_http_limit_conn_zone">HTTP Connections Limiting</a>
</li> <li>404 - limit_conn not found (<code>LimitConnNotFound</code>), unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> <li id="deleteHttpLimitConnZoneStat"> <code>DELETE</code> - Reset statistics for an HTTP limit_conn zone <p>Resets the connection limiting statistics.</p> <p> Possible responses: </p> <ul class="compact"> <li>204 - Success</li> <li>404 - limit_conn not found (<code>LimitConnNotFound</code>), unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>405 - Method disabled (<code>MethodDisabled</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="http_limit_reqs_"> <code>/http/limit_reqs/</code> </dt> <dd> <p>Supported methods:</p> <ul class="compact"> <li id="getHttpLimitReqZones"> <code>GET</code> - Return status of all HTTP limit_req zones <p>Returns status information for each HTTP <a href="ngx_http_limit_req_module.html#limit_req_zone">limit_req zone</a>.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>fields</code> (<code>string</code>, optional)</dt> <dd> Limits which fields of limit_req zones will be output. If the “<code>fields</code>” value is empty, then only zone names will be output.</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns a collection of "<a href="#def_nginx_http_limit_req_zone">HTTP Requests Rate Limiting</a>" objects for all HTTP limit reqs</li> <li>404 - Unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="http_limit_reqs_http_limit_req_zone_name"> <code>/http/limit_reqs/{httpLimitReqZoneName}</code> </dt> <dd> Parameters common for all methods: <dl class="compact"> <dt>
<code>httpLimitReqZoneName</code> (<code>string</code>, required)</dt> <dd> The name of a <a href="ngx_http_limit_req_module.html#limit_req_zone">limit_req zone</a>.</dd> </dl> <p>Supported methods:</p> <ul class="compact"> <li id="getHttpLimitReqZone"> <code>GET</code> - Return status of an HTTP limit_req zone <p>Returns status of a particular HTTP <a href="ngx_http_limit_req_module.html#limit_req_zone">limit_req zone</a>.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>fields</code> (<code>string</code>, optional)</dt> <dd> Limits which fields of the <a href="ngx_http_limit_req_module.html#limit_req_zone">limit_req zone</a> will be output.</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns <a href="#def_nginx_http_limit_req_zone">HTTP Requests Rate Limiting</a>
</li> <li>404 - limit_req not found (<code>LimitReqNotFound</code>), unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> <li id="deleteHttpLimitReqZoneStat"> <code>DELETE</code> - Reset statistics for an HTTP limit_req zone <p>Resets the requests limiting statistics.</p> <p> Possible responses: </p> <ul class="compact"> <li>204 - Success</li> <li>404 - limit_req not found (<code>LimitReqNotFound</code>), unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>405 - Method disabled (<code>MethodDisabled</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="http_upstreams_"> <code>/http/upstreams/</code> </dt> <dd> <p>Supported methods:</p> <ul class="compact"> <li id="getHttpUpstreams"> <code>GET</code> - Return status of all HTTP upstream server groups <p>Returns status of each HTTP upstream server group and its servers.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>fields</code> (<code>string</code>, optional)</dt> <dd> Limits which fields of upstream server groups will be output. If the “<code>fields</code>” value is empty, only names of upstreams will be output.</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns a collection of "<a href="#def_nginx_http_upstream">HTTP Upstream</a>" objects for all HTTP upstreams</li> <li>404 - Unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="http_upstreams_http_upstream_name_"> <code>/http/upstreams/{httpUpstreamName}/</code> </dt> <dd> Parameters common for all methods: <dl class="compact"> <dt>
<code>httpUpstreamName</code> (<code>string</code>, required)</dt> <dd> The name of an HTTP upstream server group.</dd> </dl> <p>Supported methods:</p> <ul class="compact"> <li id="getHttpUpstreamName"> <code>GET</code> - Return status of an HTTP upstream server group <p>Returns status of a particular HTTP upstream server group and its servers.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>fields</code> (<code>string</code>, optional)</dt> <dd> Limits which fields of the upstream server group will be output.</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns <a href="#def_nginx_http_upstream">HTTP Upstream</a>
</li> <li>400 - Upstream is static (<code>UpstreamStatic</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>404 - Unknown version (<code>UnknownVersion</code>), upstream not found (<code>UpstreamNotFound</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> <li id="deleteHttpUpstreamStat"> <code>DELETE</code> - Reset statistics of an HTTP upstream server group <p>Resets the statistics for each upstream server in an upstream server group and queue statistics.</p> <p> Possible responses: </p> <ul class="compact"> <li>204 - Success</li> <li>400 - Upstream is static (<code>UpstreamStatic</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>404 - Unknown version (<code>UnknownVersion</code>), upstream not found (<code>UpstreamNotFound</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>405 - Method disabled (<code>MethodDisabled</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="http_upstreams_http_upstream_name_servers_"> <code>/http/upstreams/{httpUpstreamName}/servers/</code> </dt> <dd> Parameters common for all methods: <dl class="compact"> <dt>
<code>httpUpstreamName</code> (<code>string</code>, required)</dt> <dd> The name of an upstream server group.</dd> </dl> <p>Supported methods:</p> <ul class="compact"> <li id="getHttpUpstreamServers"> <code>GET</code> - Return configuration of all servers in an HTTP upstream server group <p>Returns configuration of each server in a particular HTTP upstream server group.</p> <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns an array of <a href="#def_nginx_http_upstream_conf_server">HTTP Upstream Servers</a>
</li> <li>400 - Upstream is static (<code>UpstreamStatic</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>404 - Unknown version (<code>UnknownVersion</code>), upstream not found (<code>UpstreamNotFound</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> <li id="postHttpUpstreamServer"> <code>POST</code> - Add a server to an HTTP upstream server group <p>Adds a new server to an HTTP upstream server group. Server parameters are specified in the JSON format.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>postHttpUpstreamServer</code> (<a href="#def_nginx_http_upstream_conf_server">HTTP Upstream Server</a>, required)</dt> <dd> Address of a new server and other optional parameters in the JSON format. The “<code>ID</code>”, “<code>backup</code>”, and “<code>service</code>” parameters cannot be changed.</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>201 - Created, returns <a href="#def_nginx_http_upstream_conf_server">HTTP Upstream Server</a>
</li> <li>400 - Upstream is static (<code>UpstreamStatic</code>), invalid “<code><i>parameter</i></code>” value (<code>UpstreamConfFormatError</code>), missing “<code>server</code>” argument (<code>UpstreamConfFormatError</code>), unknown parameter “<code><i>name</i></code>” (<code>UpstreamConfFormatError</code>), nested object or list (<code>UpstreamConfFormatError</code>), “<code>error</code>” while parsing (<code>UpstreamBadAddress</code>), service upstream “<code>host</code>” may not have port (<code>UpstreamBadAddress</code>), service upstream “<code>host</code>” requires domain name (<code>UpstreamBadAddress</code>), invalid “<code>weight</code>” (<code>UpstreamBadWeight</code>), invalid “<code>max_conns</code>” (<code>UpstreamBadMaxConns</code>), invalid “<code>max_fails</code>” (<code>UpstreamBadMaxFails</code>), invalid “<code>fail_timeout</code>” (<code>UpstreamBadFailTimeout</code>), invalid “<code>slow_start</code>” (<code>UpstreamBadSlowStart</code>), reading request body failed <code>BodyReadError</code>), route is too long (<code>UpstreamBadRoute</code>), “<code>service</code>” is empty (<code>UpstreamBadService</code>), no resolver defined to resolve (<code>UpstreamConfNoResolver</code>), upstream “<code><i>name</i></code>” has no backup (<code>UpstreamNoBackup</code>), upstream “<code><i>name</i></code>” memory exhausted (<code>UpstreamOutOfMemory</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>404 - Unknown version (<code>UnknownVersion</code>), upstream not found (<code>UpstreamNotFound</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>405 - Method disabled (<code>MethodDisabled</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>409 - Entry exists (<code>EntryExists</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>415 - JSON error (<code>JsonError</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="http_upstreams_http_upstream_name_servers_http_upstream_server_id"> <code>/http/upstreams/{httpUpstreamName}/servers/{httpUpstreamServerId}</code> </dt> <dd> Parameters common for all methods: <dl class="compact"> <dt>
<code>httpUpstreamName</code> (<code>string</code>, required)</dt> <dd> The name of the upstream server group.</dd> <dt>
<code>httpUpstreamServerId</code> (<code>string</code>, required)</dt> <dd> The ID of the server.</dd> </dl> <p>Supported methods:</p> <ul class="compact"> <li id="getHttpUpstreamPeer"> <code>GET</code> - Return configuration of a server in an HTTP upstream server group <p>Returns configuration of a particular server in the HTTP upstream server group.</p> <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns <a href="#def_nginx_http_upstream_conf_server">HTTP Upstream Server</a>
</li> <li>400 - Upstream is static (<code>UpstreamStatic</code>), invalid server ID (<code>UpstreamBadServerId</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>404 - Server with ID “<code><i>id</i></code>” does not exist (<code>UpstreamServerNotFound</code>), unknown version (<code>UnknownVersion</code>), upstream not found (<code>UpstreamNotFound</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> <li id="patchHttpUpstreamPeer"> <code>PATCH</code> - Modify a server in an HTTP upstream server group <p>Modifies settings of a particular server in an HTTP upstream server group. Server parameters are specified in the JSON format.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>patchHttpUpstreamServer</code> (<a href="#def_nginx_http_upstream_conf_server">HTTP Upstream Server</a>, required)</dt> <dd> Server parameters, specified in the JSON format. The “<code>ID</code>”, “<code>backup</code>”, and “<code>service</code>” parameters cannot be changed.</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns <a href="#def_nginx_http_upstream_conf_server">HTTP Upstream Server</a>
</li> <li>400 - Upstream is static (<code>UpstreamStatic</code>), invalid “<code><i>parameter</i></code>” value (<code>UpstreamConfFormatError</code>), unknown parameter “<code><i>name</i></code>” (<code>UpstreamConfFormatError</code>), nested object or list (<code>UpstreamConfFormatError</code>), “<code>error</code>” while parsing (<code>UpstreamBadAddress</code>), invalid “<code>server</code>” argument (<code>UpstreamBadAddress</code>), invalid server ID (<code>UpstreamBadServerId</code>), invalid “<code>weight</code>” (<code>UpstreamBadWeight</code>), invalid “<code>max_conns</code>” (<code>UpstreamBadMaxConns</code>), invalid “<code>max_fails</code>” (<code>UpstreamBadMaxFails</code>), invalid “<code>fail_timeout</code>” (<code>UpstreamBadFailTimeout</code>), invalid “<code>slow_start</code>” (<code>UpstreamBadSlowStart</code>), reading request body failed <code>BodyReadError</code>), route is too long (<code>UpstreamBadRoute</code>), “<code>service</code>” is empty (<code>UpstreamBadService</code>), server “<code><i>ID</i></code>” address is immutable (<code>UpstreamServerImmutable</code>), server “<code>ID</code>” weight is immutable (<code>UpstreamServerWeightImmutable</code>), upstream “<code>name</code>” memory exhausted (<code>UpstreamOutOfMemory</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>404 - Server with ID “<code><i>id</i></code>” does not exist (<code>UpstreamServerNotFound</code>), unknown version (<code>UnknownVersion</code>), upstream not found (<code>UpstreamNotFound</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>405 - Method disabled (<code>MethodDisabled</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>415 - JSON error (<code>JsonError</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> <li id="deleteHttpUpstreamServer"> <code>DELETE</code> - Remove a server from an HTTP upstream server group <p>Removes a server from an HTTP upstream server group.</p> <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns an array of <a href="#def_nginx_http_upstream_conf_server">HTTP Upstream Servers</a>
</li> <li>400 - Upstream is static (<code>UpstreamStatic</code>), invalid server ID (<code>UpstreamBadServerId</code>), server “<code><i>id</i></code>” not removable (<code>UpstreamServerImmutable</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>404 - Server with ID “<code><i>id</i></code>” does not exist (<code>UpstreamServerNotFound</code>), unknown version (<code>UnknownVersion</code>), upstream not found (<code>UpstreamNotFound</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>405 - Method disabled (<code>MethodDisabled</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="http_keyvals_"> <code>/http/keyvals/</code> </dt> <dd> <p>Supported methods:</p> <ul class="compact"> <li id="getHttpKeyvalZones"> <code>GET</code> - Return key-value pairs from all HTTP keyval zones <p>Returns key-value pairs for each HTTP keyval shared memory <a href="ngx_http_keyval_module.html#keyval_zone">zone</a>.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>fields</code> (<code>string</code>, optional)</dt> <dd> If the “<code>fields</code>” value is empty, then only HTTP keyval zone names will be output.</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns a collection of "<a href="#def_nginx_http_keyval_zone">HTTP Keyval Shared Memory Zone</a>" objects for all HTTP keyvals</li> <li>404 - Unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="http_keyvals_http_keyval_zone_name"> <code>/http/keyvals/{httpKeyvalZoneName}</code> </dt> <dd> Parameters common for all methods: <dl class="compact"> <dt>
<code>httpKeyvalZoneName</code> (<code>string</code>, required)</dt> <dd> The name of an HTTP keyval shared memory zone.</dd> </dl> <p>Supported methods:</p> <ul class="compact"> <li id="getHttpKeyvalZoneKeysValues"> <code>GET</code> - Return key-value pairs from an HTTP keyval zone <p>Returns key-value pairs stored in a particular HTTP keyval shared memory <a href="ngx_http_keyval_module.html#keyval_zone">zone</a>.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>key</code> (<code>string</code>, optional)</dt> <dd> Get a particular key-value pair from the HTTP keyval zone.</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns <a href="#def_nginx_http_keyval_zone">HTTP Keyval Shared Memory Zone</a>
</li> <li>404 - Keyval not found (<code>KeyvalNotFound</code>), keyval key not found (<code>KeyvalKeyNotFound</code>), unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> <li id="postHttpKeyvalZoneData"> <code>POST</code> - Add a key-value pair to the HTTP keyval zone <p>Adds a new key-value pair to the HTTP keyval shared memory <a href="ngx_http_keyval_module.html#keyval_zone">zone</a>. Several key-value pairs can be entered if the HTTP keyval shared memory zone is empty.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>Key-value</code> (<a href="#def_nginx_http_keyval_zone_post_patch">HTTP Keyval Shared Memory Zone</a>, required)</dt> <dd> A key-value pair is specified in the JSON format. Several key-value pairs can be entered if the HTTP keyval shared memory zone is empty. Expiration time in milliseconds can be specified for a key-value pair with the <code>expire</code> parameter which overrides the <a href="ngx_http_keyval_module.html#keyval_timeout"><code>timeout</code></a> parameter of the <a href="ngx_http_keyval_module.html#keyval_zone">keyval_zone</a> directive.</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>201 - Created</li> <li>400 - Invalid JSON (<code>KeyvalFormatError</code>), invalid key format (<code>KeyvalFormatError</code>), key required (<code>KeyvalFormatError</code>), keyval timeout is not enabled (<code>KeyvalFormatError</code>), only one key can be added (<code>KeyvalFormatError</code>), reading request body failed <code>BodyReadError</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>404 - Keyval not found (<code>KeyvalNotFound</code>), unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>405 - Method disabled (<code>MethodDisabled</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>409 - Entry exists (<code>EntryExists</code>), key already exists (<code>KeyvalKeyExists</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>413 - Request Entity Too Large, returns <a href="#def_nginx_error">Error</a>
</li> <li>415 - JSON error (<code>JsonError</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> <li id="patchHttpKeyvalZoneKeyValue"> <code>PATCH</code> - Modify a key-value or delete a key <p>Changes the value of the selected key in the key-value pair, deletes a key by setting the key value to <code>null</code>, changes expiration time of a key-value pair. If <a href="../stream/ngx_stream_zone_sync_module.html#zone_sync">synchronization</a> of keyval zones in a cluster is enabled, deletes a key only on a target cluster node. Expiration time in milliseconds can be specified for a key-value pair with the <code>expire</code> parameter which overrides the <a href="ngx_http_keyval_module.html#keyval_timeout"><code>timeout</code></a> parameter of the <a href="ngx_http_keyval_module.html#keyval_zone">keyval_zone</a> directive.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>httpKeyvalZoneKeyValue</code> (<a href="#def_nginx_http_keyval_zone_post_patch">HTTP Keyval Shared Memory Zone</a>, required)</dt> <dd> A new value for the key is specified in the JSON format.</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>204 - Success</li> <li>400 - Invalid JSON (<code>KeyvalFormatError</code>), key required (<code>KeyvalFormatError</code>), keyval timeout is not enabled (<code>KeyvalFormatError</code>), only one key can be updated (<code>KeyvalFormatError</code>), reading request body failed <code>BodyReadError</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>404 - Keyval not found (<code>KeyvalNotFound</code>), keyval key not found (<code>KeyvalKeyNotFound</code>), unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>405 - Method disabled (<code>MethodDisabled</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>413 - Request Entity Too Large, returns <a href="#def_nginx_error">Error</a>
</li> <li>415 - JSON error (<code>JsonError</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> <li id="deleteHttpKeyvalZoneData"> <code>DELETE</code> - Empty the HTTP keyval zone <p>Deletes all key-value pairs from the HTTP keyval shared memory <a href="ngx_http_keyval_module.html#keyval_zone">zone</a>. If <a href="../stream/ngx_stream_zone_sync_module.html#zone_sync">synchronization</a> of keyval zones in a cluster is enabled, empties the keyval zone only on a target cluster node.</p> <p> Possible responses: </p> <ul class="compact"> <li>204 - Success</li> <li>404 - Keyval not found (<code>KeyvalNotFound</code>), unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>405 - Method disabled (<code>MethodDisabled</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="stream_"> <code>/stream/</code> </dt> <dd> <p>Supported methods:</p> <ul class="compact"> <li id="getStream"> <code>GET</code> - Return list of stream-related endpoints <p>Returns a list of first level stream endpoints.</p> <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns an array of strings</li> <li>404 - Unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="stream_server_zones_"> <code>/stream/server_zones/</code> </dt> <dd> <p>Supported methods:</p> <ul class="compact"> <li id="getStreamServerZones"> <code>GET</code> - Return status of all stream server zones <p>Returns status information for each stream <a href="ngx_http_api_module.html#status_zone">server zone</a>.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>fields</code> (<code>string</code>, optional)</dt> <dd> Limits which fields of server zones will be output. If the “<code>fields</code>” value is empty, then only server zone names will be output.</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns a collection of "<a href="#def_nginx_stream_server_zone">Stream Server Zone</a>" objects for all stream server zones</li> <li>404 - Unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="stream_server_zones_stream_server_zone_name"> <code>/stream/server_zones/{streamServerZoneName}</code> </dt> <dd> Parameters common for all methods: <dl class="compact"> <dt>
<code>streamServerZoneName</code> (<code>string</code>, required)</dt> <dd> The name of a stream server zone.</dd> </dl> <p>Supported methods:</p> <ul class="compact"> <li id="getStreamServerZone"> <code>GET</code> - Return status of a stream server zone <p>Returns status of a particular stream server zone.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>fields</code> (<code>string</code>, optional)</dt> <dd> Limits which fields of the server zone will be output.</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns <a href="#def_nginx_stream_server_zone">Stream Server Zone</a>
</li> <li>404 - Server zone not found (<code>ServerZoneNotFound</code>), unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> <li id="deleteStreamServerZoneStat"> <code>DELETE</code> - Reset statistics for a stream server zone <p>Resets statistics of accepted and discarded connections, sessions, received and sent bytes, counters of SSL handshakes and session reuses in a particular stream server zone.</p> <p> Possible responses: </p> <ul class="compact"> <li>204 - Success</li> <li>404 - Server zone not found (<code>ServerZoneNotFound</code>), unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>405 - Method disabled (<code>MethodDisabled</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="stream_limit_conns_"> <code>/stream/limit_conns/</code> </dt> <dd> <p>Supported methods:</p> <ul class="compact"> <li id="getStreamLimitConnZones"> <code>GET</code> - Return status of all stream limit_conn zones <p>Returns status information for each stream <a href="../stream/ngx_stream_limit_conn_module.html#limit_conn_zone">limit_conn zone</a>.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>fields</code> (<code>string</code>, optional)</dt> <dd> Limits which fields of limit_conn zones will be output. If the “<code>fields</code>” value is empty, then only zone names will be output.</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns a collection of "<a href="#def_nginx_stream_limit_conn_zone">Stream Connections Limiting</a>" objects for all stream limit conns</li> <li>404 - Unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="stream_limit_conns_stream_limit_conn_zone_name"> <code>/stream/limit_conns/{streamLimitConnZoneName}</code> </dt> <dd> Parameters common for all methods: <dl class="compact"> <dt>
<code>streamLimitConnZoneName</code> (<code>string</code>, required)</dt> <dd> The name of a <a href="../stream/ngx_stream_limit_conn_module.html#limit_conn_zone">limit_conn zone</a>.</dd> </dl> <p>Supported methods:</p> <ul class="compact"> <li id="getStreamLimitConnZone"> <code>GET</code> - Return status of an stream limit_conn zone <p>Returns status of a particular stream <a href="../stream/ngx_stream_limit_conn_module.html#limit_conn_zone">limit_conn zone</a>.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>fields</code> (<code>string</code>, optional)</dt> <dd> Limits which fields of the <a href="../stream/ngx_stream_limit_conn_module.html#limit_conn_zone">limit_conn zone</a> will be output.</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns <a href="#def_nginx_stream_limit_conn_zone">Stream Connections Limiting</a>
</li> <li>404 - limit_conn not found (<code>LimitConnNotFound</code>), unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> <li id="deleteStreamLimitConnZoneStat"> <code>DELETE</code> - Reset statistics for a stream limit_conn zone <p>Resets the connection limiting statistics.</p> <p> Possible responses: </p> <ul class="compact"> <li>204 - Success</li> <li>404 - limit_conn not found (<code>LimitConnNotFound</code>), unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>405 - Method disabled (<code>MethodDisabled</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="stream_upstreams_"> <code>/stream/upstreams/</code> </dt> <dd> <p>Supported methods:</p> <ul class="compact"> <li id="getStreamUpstreams"> <code>GET</code> - Return status of all stream upstream server groups <p>Returns status of each stream upstream server group and its servers.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>fields</code> (<code>string</code>, optional)</dt> <dd> Limits which fields of upstream server groups will be output. If the “<code>fields</code>” value is empty, only names of upstreams will be output.</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns a collection of "<a href="#def_nginx_stream_upstream">Stream Upstream</a>" objects for all stream upstreams</li> <li>404 - Unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="stream_upstreams_stream_upstream_name_"> <code>/stream/upstreams/{streamUpstreamName}/</code> </dt> <dd> Parameters common for all methods: <dl class="compact"> <dt>
<code>streamUpstreamName</code> (<code>string</code>, required)</dt> <dd> The name of a stream upstream server group.</dd> </dl> <p>Supported methods:</p> <ul class="compact"> <li id="getStreamUpstream"> <code>GET</code> - Return status of a stream upstream server group <p>Returns status of a particular stream upstream server group and its servers.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>fields</code> (<code>string</code>, optional)</dt> <dd> Limits which fields of the upstream server group will be output.</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns <a href="#def_nginx_stream_upstream">Stream Upstream</a>
</li> <li>400 - Upstream is static (<code>UpstreamStatic</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>404 - Unknown version (<code>UnknownVersion</code>), upstream not found (<code>UpstreamNotFound</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> <li id="deleteStreamUpstreamStat"> <code>DELETE</code> - Reset statistics of a stream upstream server group <p>Resets the statistics for each upstream server in an upstream server group.</p> <p> Possible responses: </p> <ul class="compact"> <li>204 - Success</li> <li>400 - Upstream is static (<code>UpstreamStatic</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>404 - Unknown version (<code>UnknownVersion</code>), upstream not found (<code>UpstreamNotFound</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>405 - Method disabled (<code>MethodDisabled</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="stream_upstreams_stream_upstream_name_servers_"> <code>/stream/upstreams/{streamUpstreamName}/servers/</code> </dt> <dd> Parameters common for all methods: <dl class="compact"> <dt>
<code>streamUpstreamName</code> (<code>string</code>, required)</dt> <dd> The name of an upstream server group.</dd> </dl> <p>Supported methods:</p> <ul class="compact"> <li id="getStreamUpstreamServers"> <code>GET</code> - Return configuration of all servers in a stream upstream server group <p>Returns configuration of each server in a particular stream upstream server group.</p> <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns an array of <a href="#def_nginx_stream_upstream_conf_server">Stream Upstream Servers</a>
</li> <li>400 - Upstream is static (<code>UpstreamStatic</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>404 - Unknown version (<code>UnknownVersion</code>), upstream not found (<code>UpstreamNotFound</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> <li id="postStreamUpstreamServer"> <code>POST</code> - Add a server to a stream upstream server group <p>Adds a new server to a stream upstream server group. Server parameters are specified in the JSON format.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>postStreamUpstreamServer</code> (<a href="#def_nginx_stream_upstream_conf_server">Stream Upstream Server</a>, required)</dt> <dd> Address of a new server and other optional parameters in the JSON format. The “<code>ID</code>”, “<code>backup</code>”, and “<code>service</code>” parameters cannot be changed.</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>201 - Created, returns <a href="#def_nginx_stream_upstream_conf_server">Stream Upstream Server</a>
</li> <li>400 - Upstream is static (<code>UpstreamStatic</code>), invalid “<code><i>parameter</i></code>” value (<code>UpstreamConfFormatError</code>), missing “<code>server</code>” argument (<code>UpstreamConfFormatError</code>), unknown parameter “<code><i>name</i></code>” (<code>UpstreamConfFormatError</code>), nested object or list (<code>UpstreamConfFormatError</code>), “<code>error</code>” while parsing (<code>UpstreamBadAddress</code>), no port in server “<code>host</code>” (<code>UpstreamBadAddress</code>), service upstream “<code>host</code>” may not have port (<code>UpstreamBadAddress</code>), service upstream “<code>host</code>” requires domain name (<code>UpstreamBadAddress</code>), invalid “<code>weight</code>” (<code>UpstreamBadWeight</code>), invalid “<code>max_conns</code>” (<code>UpstreamBadMaxConns</code>), invalid “<code>max_fails</code>” (<code>UpstreamBadMaxFails</code>), invalid “<code>fail_timeout</code>” (<code>UpstreamBadFailTimeout</code>), invalid “<code>slow_start</code>” (<code>UpstreamBadSlowStart</code>), “<code>service</code>” is empty (<code>UpstreamBadService</code>), no resolver defined to resolve (<code>UpstreamConfNoResolver</code>), upstream “<code><i>name</i></code>” has no backup (<code>UpstreamNoBackup</code>), upstream “<code><i>name</i></code>” memory exhausted (<code>UpstreamOutOfMemory</code>), reading request body failed <code>BodyReadError</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>404 - Unknown version (<code>UnknownVersion</code>), upstream not found (<code>UpstreamNotFound</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>405 - Method disabled (<code>MethodDisabled</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>409 - Entry exists (<code>EntryExists</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>415 - JSON error (<code>JsonError</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="stream_upstreams_stream_upstream_name_servers_stream_upstream_server_id"> <code>/stream/upstreams/{streamUpstreamName}/servers/{streamUpstreamServerId}</code> </dt> <dd> Parameters common for all methods: <dl class="compact"> <dt>
<code>streamUpstreamName</code> (<code>string</code>, required)</dt> <dd> The name of the upstream server group.</dd> <dt>
<code>streamUpstreamServerId</code> (<code>string</code>, required)</dt> <dd> The ID of the server.</dd> </dl> <p>Supported methods:</p> <ul class="compact"> <li id="getStreamUpstreamServer"> <code>GET</code> - Return configuration of a server in a stream upstream server group <p>Returns configuration of a particular server in the stream upstream server group.</p> <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns <a href="#def_nginx_stream_upstream_conf_server">Stream Upstream Server</a>
</li> <li>400 - Upstream is static (<code>UpstreamStatic</code>), invalid server ID (<code>UpstreamBadServerId</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>404 - Unknown version (<code>UnknownVersion</code>), upstream not found (<code>UpstreamNotFound</code>), server with ID “<code><i>id</i></code>” does not exist (<code>UpstreamServerNotFound</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> <li id="patchStreamUpstreamServer"> <code>PATCH</code> - Modify a server in a stream upstream server group <p>Modifies settings of a particular server in a stream upstream server group. Server parameters are specified in the JSON format.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>patchStreamUpstreamServer</code> (<a href="#def_nginx_stream_upstream_conf_server">Stream Upstream Server</a>, required)</dt> <dd> Server parameters, specified in the JSON format. The “<code>ID</code>”, “<code>backup</code>”, and “<code>service</code>” parameters cannot be changed.</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns <a href="#def_nginx_stream_upstream_conf_server">Stream Upstream Server</a>
</li> <li>400 - Upstream is static (<code>UpstreamStatic</code>), invalid “<code><i>parameter</i></code>” value (<code>UpstreamConfFormatError</code>), unknown parameter “<code><i>name</i></code>” (<code>UpstreamConfFormatError</code>), nested object or list (<code>UpstreamConfFormatError</code>), “<code>error</code>” while parsing (<code>UpstreamBadAddress</code>), invalid “<code>server</code>” argument (<code>UpstreamBadAddress</code>), no port in server “<code>host</code>” (<code>UpstreamBadAddress</code>), invalid server ID (<code>UpstreamBadServerId</code>), invalid “<code>weight</code>” (<code>UpstreamBadWeight</code>), invalid “<code>max_conns</code>” (<code>UpstreamBadMaxConns</code>), invalid “<code>max_fails</code>” (<code>UpstreamBadMaxFails</code>), invalid “<code>fail_timeout</code>” (<code>UpstreamBadFailTimeout</code>), invalid “<code>slow_start</code>” (<code>UpstreamBadSlowStart</code>), reading request body failed <code>BodyReadError</code>), “<code>service</code>” is empty (<code>UpstreamBadService</code>), server “<code><i>ID</i></code>” address is immutable (<code>UpstreamServerImmutable</code>), server “<code><i>ID</i></code>” weight is immutable (<code>UpstreamServerWeightImmutable</code>), upstream “<code>name</code>” memory exhausted (<code>UpstreamOutOfMemory</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>404 - Server with ID “<code><i>id</i></code>” does not exist (<code>UpstreamServerNotFound</code>), unknown version (<code>UnknownVersion</code>), upstream not found (<code>UpstreamNotFound</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>405 - Method disabled (<code>MethodDisabled</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>415 - JSON error (<code>JsonError</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> <li id="deleteStreamUpstreamServer"> <code>DELETE</code> - Remove a server from a stream upstream server group <p>Removes a server from a stream server group.</p> <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns an array of <a href="#def_nginx_stream_upstream_conf_server">Stream Upstream Servers</a>
</li> <li>400 - Upstream is static (<code>UpstreamStatic</code>), invalid server ID (<code>UpstreamBadServerId</code>), server “<code><i>id</i></code>” not removable (<code>UpstreamServerImmutable</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>404 - Server with ID “<code><i>id</i></code>” does not exist (<code>UpstreamServerNotFound</code>), unknown version (<code>UnknownVersion</code>), upstream not found (<code>UpstreamNotFound</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>405 - Method disabled (<code>MethodDisabled</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="stream_keyvals_"> <code>/stream/keyvals/</code> </dt> <dd> <p>Supported methods:</p> <ul class="compact"> <li id="getStreamKeyvalZones"> <code>GET</code> - Return key-value pairs from all stream keyval zones <p>Returns key-value pairs for each stream keyval shared memory <a href="../stream/ngx_stream_keyval_module.html#keyval_zone">zone</a>.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>fields</code> (<code>string</code>, optional)</dt> <dd> If the “<code>fields</code>” value is empty, then only stream keyval zone names will be output.</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns a collection of "<a href="#def_nginx_stream_keyval_zone">Stream Keyval Shared Memory Zone</a>" objects for all stream keyvals</li> <li>404 - Unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="stream_keyvals_stream_keyval_zone_name"> <code>/stream/keyvals/{streamKeyvalZoneName}</code> </dt> <dd> Parameters common for all methods: <dl class="compact"> <dt>
<code>streamKeyvalZoneName</code> (<code>string</code>, required)</dt> <dd> The name of a stream keyval shared memory zone.</dd> </dl> <p>Supported methods:</p> <ul class="compact"> <li id="getStreamKeyvalZoneKeysValues"> <code>GET</code> - Return key-value pairs from a stream keyval zone <p>Returns key-value pairs stored in a particular stream keyval shared memory <a href="../stream/ngx_stream_keyval_module.html#keyval_zone">zone</a>.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>key</code> (<code>string</code>, optional)</dt> <dd> Get a particular key-value pair from the stream keyval zone.</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns <a href="#def_nginx_stream_keyval_zone">Stream Keyval Shared Memory Zone</a>
</li> <li>404 - Keyval not found (<code>KeyvalNotFound</code>), keyval key not found (<code>KeyvalKeyNotFound</code>), unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> <li id="postStreamKeyvalZoneData"> <code>POST</code> - Add a key-value pair to the stream keyval zone <p>Adds a new key-value pair to the stream keyval shared memory <a href="../stream/ngx_stream_keyval_module.html#keyval_zone">zone</a>. Several key-value pairs can be entered if the stream keyval shared memory zone is empty.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>Key-value</code> (<a href="#def_nginx_stream_keyval_zone_post_patch">Stream Keyval Shared Memory Zone</a>, required)</dt> <dd> A key-value pair is specified in the JSON format. Several key-value pairs can be entered if the stream keyval shared memory zone is empty. Expiration time in milliseconds can be specified for a key-value pair with the <code>expire</code> parameter which overrides the <a href="../stream/ngx_stream_keyval_module.html#keyval_timeout"><code>timeout</code></a> parameter of the <a href="../stream/ngx_stream_keyval_module.html#keyval_zone">keyval_zone</a> directive.</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>201 - Created</li> <li>400 - Invalid JSON (<code>KeyvalFormatError</code>), invalid key format (<code>KeyvalFormatError</code>), key required (<code>KeyvalFormatError</code>), keyval timeout is not enabled (<code>KeyvalFormatError</code>), only one key can be added (<code>KeyvalFormatError</code>), reading request body failed <code>BodyReadError</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>404 - Keyval not found (<code>KeyvalNotFound</code>), unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>405 - Method disabled (<code>MethodDisabled</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>409 - Entry exists (<code>EntryExists</code>), key already exists (<code>KeyvalKeyExists</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>413 - Request Entity Too Large, returns <a href="#def_nginx_error">Error</a>
</li> <li>415 - JSON error (<code>JsonError</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> <li id="patchStreamKeyvalZoneKeyValue"> <code>PATCH</code> - Modify a key-value or delete a key <p>Changes the value of the selected key in the key-value pair, deletes a key by setting the key value to <code>null</code>, changes expiration time of a key-value pair. If <a href="../stream/ngx_stream_zone_sync_module.html#zone_sync">synchronization</a> of keyval zones in a cluster is enabled, deletes a key only on a target cluster node. Expiration time is specified in milliseconds with the <code>expire</code> parameter which overrides the <a href="../stream/ngx_stream_keyval_module.html#keyval_timeout"><code>timeout</code></a> parameter of the <a href="../stream/ngx_stream_keyval_module.html#keyval_zone">keyval_zone</a> directive.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>streamKeyvalZoneKeyValue</code> (<a href="#def_nginx_stream_keyval_zone_post_patch">Stream Keyval Shared Memory Zone</a>, required)</dt> <dd> A new value for the key is specified in the JSON format.</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>204 - Success</li> <li>400 - Invalid JSON (<code>KeyvalFormatError</code>), key required (<code>KeyvalFormatError</code>), keyval timeout is not enabled (<code>KeyvalFormatError</code>), only one key can be updated (<code>KeyvalFormatError</code>), reading request body failed <code>BodyReadError</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>404 - Keyval not found (<code>KeyvalNotFound</code>), keyval key not found (<code>KeyvalKeyNotFound</code>), unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>405 - Method disabled (<code>MethodDisabled</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>413 - Request Entity Too Large, returns <a href="#def_nginx_error">Error</a>
</li> <li>415 - JSON error (<code>JsonError</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> <li id="deleteStreamKeyvalZoneData"> <code>DELETE</code> - Empty the stream keyval zone <p>Deletes all key-value pairs from the stream keyval shared memory <a href="../stream/ngx_stream_keyval_module.html#keyval_zone">zone</a>. If <a href="../stream/ngx_stream_zone_sync_module.html#zone_sync">synchronization</a> of keyval zones in a cluster is enabled, empties the keyval zone only on a target cluster node.</p> <p> Possible responses: </p> <ul class="compact"> <li>204 - Success</li> <li>404 - Keyval not found (<code>KeyvalNotFound</code>), unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>405 - Method disabled (<code>MethodDisabled</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="stream_zone_sync_"> <code>/stream/zone_sync/</code> </dt> <dd> <p>Supported methods:</p> <ul class="compact"> <li id="getStreamZoneSync"> <code>GET</code> - Return sync status of a node <p>Returns synchronization status of a cluster node.</p> <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns <a href="#def_nginx_stream_zone_sync">Stream Zone Sync Node</a>
</li> <li>404 - Unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="resolvers_"> <code>/resolvers/</code> </dt> <dd> <p>Supported methods:</p> <ul class="compact"> <li id="getResolverZones"> <code>GET</code> - Return status for all resolver zones <p>Returns status information for each <a href="ngx_http_core_module.html#resolver_status_zone">resolver zone</a>.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>fields</code> (<code>string</code>, optional)</dt> <dd> Limits which fields of resolvers statistics will be output.</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns a collection of "<a href="#def_nginx_resolver_zone">Resolver Zone</a>" objects for all resolvers</li> <li>404 - Unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="resolvers_resolver_zone_name"> <code>/resolvers/{resolverZoneName}</code> </dt> <dd> Parameters common for all methods: <dl class="compact"> <dt>
<code>resolverZoneName</code> (<code>string</code>, required)</dt> <dd> The name of a resolver zone.</dd> </dl> <p>Supported methods:</p> <ul class="compact"> <li id="getResolverZone"> <code>GET</code> - Return statistics of a resolver zone <p>Returns statistics stored in a particular resolver <a href="ngx_http_core_module.html#resolver_status_zone">zone</a>.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>fields</code> (<code>string</code>, optional)</dt> <dd> Limits which fields of the resolver zone will be output (requests, responses, or both).</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns <a href="#def_nginx_resolver_zone">Resolver Zone</a>
</li> <li>404 - Resolver zone not found (<code>ResolverZoneNotFound</code>), unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> <li id="deleteResolverZoneStat"> <code>DELETE</code> - Reset statistics for a resolver zone. <p>Resets statistics in a particular resolver zone.</p> <p> Possible responses: </p> <ul class="compact"> <li>204 - Success</li> <li>404 - Resolver zone not found (<code>ResolverZoneNotFound</code>), unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>405 - Method disabled (<code>MethodDisabled</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> <dt id="ssl"> <code>/ssl</code> </dt> <dd> <p>Supported methods:</p> <ul class="compact"> <li id="getSsl"> <code>GET</code> - Return SSL statistics <p>Returns SSL statistics.</p> <p> Request parameters: </p> <dl class="compact"> <dt>
<code>fields</code> (<code>string</code>, optional)</dt> <dd> Limits which fields of SSL statistics will be output.</dd> </dl>
 <p> Possible responses: </p> <ul class="compact"> <li>200 - Success, returns <a href="#def_nginx_ssl_object">SSL</a>
</li> <li>404 - Unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> <li id="deleteSslStat"> <code>DELETE</code> - Reset SSL statistics <p>Resets counters of SSL handshakes and session reuses.</p> <p> Possible responses: </p> <ul class="compact"> <li>204 - Success</li> <li>404 - Unknown version (<code>UnknownVersion</code>), returns <a href="#def_nginx_error">Error</a>
</li> <li>405 - Method disabled (<code>MethodDisabled</code>), returns <a href="#def_nginx_error">Error</a>
</li> </ul> </li> </ul> </dd> </dl>
 <h4 id="definitions">Response Objects</h4>
 <ul class="compact"> <li id="def_nginx_object"> <p>nginx:</p> General information about nginx:<dl class="compact"> <dt> <code>version</code> (<code>string</code>) </dt> <dd> Version of nginx. </dd> <dt> <code>build</code> (<code>string</code>) </dt> <dd> Name of nginx build. </dd> <dt> <code>address</code> (<code>string</code>) </dt> <dd> The address of the server that accepted status request. </dd> <dt> <code>generation</code> (<code>integer</code>) </dt> <dd> The total number of configuration <a href="../control.html#reconfiguration">reloads</a>. </dd> <dt> <code>load_timestamp</code> (<code>string</code>) </dt> <dd> Time of the last reload of configuration, in the ISO 8601 format with millisecond resolution. </dd> <dt> <code>timestamp</code> (<code>string</code>) </dt> <dd> Current time in the ISO 8601 format with millisecond resolution. </dd> <dt> <code>pid</code> (<code>integer</code>) </dt> <dd> The ID of the worker process that handled status request. </dd> <dt> <code>ppid</code> (<code>integer</code>) </dt> <dd> The ID of the master process that started the <a href="ngx_http_status_module.html#pid">worker process</a>. </dd> </dl> <p>Example:</p> <pre data-language="nginx">
{
  "nginx" : {
    "version" : "1.21.6",
    "build" : "nginx-plus-r27",
    "address" : "206.251.255.64",
    "generation" : 6,
    "load_timestamp" : "2022-06-28T11:15:44.467Z",
    "timestamp" : "2022-06-28T09:26:07.305Z",
    "pid" : 32212,
    "ppid" : 32210
  }
}</pre> </li> <li id="def_nginx_processes"> <p>Processes:</p> <dl class="compact"> <dt> <code>respawned</code> (<code>integer</code>) </dt> <dd> The total number of abnormally terminated and respawned child processes. </dd> </dl> <p>Example:</p> <pre data-language="nginx">
{
  "respawned" : 0
}</pre> </li> <li id="def_nginx_connections"> <p>Connections:</p> The number of accepted, dropped, active, and idle connections.<dl class="compact"> <dt> <code>accepted</code> (<code>integer</code>) </dt> <dd> The total number of accepted client connections. </dd> <dt> <code>dropped</code> (<code>integer</code>) </dt> <dd> The total number of dropped client connections. </dd> <dt> <code>active</code> (<code>integer</code>) </dt> <dd> The current number of active client connections. </dd> <dt> <code>idle</code> (<code>integer</code>) </dt> <dd> The current number of idle client connections. </dd> </dl> <p>Example:</p> <pre data-language="nginx">
{
  "accepted" : 4968119,
  "dropped" : 0,
  "active" : 5,
  "idle" : 117
}</pre> </li> <li id="def_nginx_ssl_object"> <p>SSL:</p> <dl class="compact"> <dt> <code>handshakes</code> (<code>integer</code>) </dt> <dd> The total number of successful SSL handshakes. </dd> <dt> <code>handshakes_failed</code> (<code>integer</code>) </dt> <dd> The total number of failed SSL handshakes. </dd> <dt> <code>session_reuses</code> (<code>integer</code>) </dt> <dd> The total number of session reuses during SSL handshake. </dd> <dt> <code>no_common_protocol</code> (<code>integer</code>) </dt> <dd> The number of SSL handshakes failed because of no common protocol. </dd> <dt> <code>no_common_cipher</code> (<code>integer</code>) </dt> <dd> The number of SSL handshakes failed because of no shared cipher. </dd> <dt> <code>handshake_timeout</code> (<code>integer</code>) </dt> <dd> The number of SSL handshakes failed because of a timeout. </dd> <dt> <code>peer_rejected_cert</code> (<code>integer</code>) </dt> <dd> The number of failed SSL handshakes when nginx presented the certificate to the client but it was rejected with a corresponding alert message. </dd> <dt> <code>verify_failures</code>
</dt> <dd> SSL certificate verification errors<dl class="compact"> <dt> <code>no_cert</code> (<code>integer</code>) </dt> <dd> A client did not provide the required certificate. </dd> <dt> <code>expired_cert</code> (<code>integer</code>) </dt> <dd> An expired or not yet valid certificate was presented by a client. </dd> <dt> <code>revoked_cert</code> (<code>integer</code>) </dt> <dd> A revoked certificate was presented by a client. </dd> <dt> <code>hostname_mismatch</code> (<code>integer</code>) </dt> <dd> Server's certificate doesn't match the hostname. </dd> <dt> <code>other</code> (<code>integer</code>) </dt> <dd> Other SSL certificate verification errors. </dd> </dl> </dd> </dl> <p>Example:</p> <pre data-language="nginx">
{
  "handshakes" : 79572,
  "handshakes_failed" : 21025,
  "session_reuses" : 15762,
  "no_common_protocol" : 4,
  "no_common_cipher" : 2,
  "handshake_timeout" : 0,
  "peer_rejected_cert" : 0,
  "verify_failures" : {
    "no_cert" : 0,
    "expired_cert" : 2,
    "revoked_cert" : 1,
    "hostname_mismatch" : 2,
    "other" : 1
  }
}</pre> </li> <li id="def_nginx_slab_zone"> <p>Shared memory zone with slab allocator:</p> Shared memory zone with slab allocator<dl class="compact"> <dt> <code>pages</code>
</dt> <dd> The number of free and used memory pages.<dl class="compact"> <dt> <code>used</code> (<code>integer</code>) </dt> <dd> The current number of used memory pages. </dd> <dt> <code>free</code> (<code>integer</code>) </dt> <dd> The current number of free memory pages. </dd> </dl> </dd> <dt> <code>slots</code>
</dt> <dd> <p>Status data for memory slots (8, 16, 32, 64, 128, etc.)</p>
<p>A collection of "<a href="#def_nginx_slab_zone_slot">Memory Slot</a>" objects</p> </dd> </dl> <p>Example:</p> <pre data-language="nginx">
{
  "pages" : {
    "used" : 1143,
    "free" : 2928
  },
  "slots" : {
    "8" : {
      "used" : 0,
      "free" : 0,
      "reqs" : 0,
      "fails" : 0
    },
    "16" : {
      "used" : 0,
      "free" : 0,
      "reqs" : 0,
      "fails" : 0
    },
    "32" : {
      "used" : 0,
      "free" : 0,
      "reqs" : 0,
      "fails" : 0
    },
    "64" : {
      "used" : 1,
      "free" : 63,
      "reqs" : 1,
      "fails" : 0
    },
    "128" : {
      "used" : 0,
      "free" : 0,
      "reqs" : 0,
      "fails" : 0
    },
    "256" : {
      "used" : 18078,
      "free" : 178,
      "reqs" : 1635736,
      "fails" : 0
    }
  }
}</pre> </li> <li id="def_nginx_slab_zone_slot"> <p>Memory Slot:</p> <dl class="compact"> <dt> <code>used</code> (<code>integer</code>) </dt> <dd> The current number of used memory slots. </dd> <dt> <code>free</code> (<code>integer</code>) </dt> <dd> The current number of free memory slots. </dd> <dt> <code>reqs</code> (<code>integer</code>) </dt> <dd> The total number of attempts to allocate memory of specified size. </dd> <dt> <code>fails</code> (<code>integer</code>) </dt> <dd> The number of unsuccessful attempts to allocate memory of specified size. </dd> </dl> </li> <li id="def_nginx_http_requests"> <p>HTTP Requests:</p> <dl class="compact"> <dt> <code>total</code> (<code>integer</code>) </dt> <dd> The total number of client requests. </dd> <dt> <code>current</code> (<code>integer</code>) </dt> <dd> The current number of client requests. </dd> </dl> <p>Example:</p> <pre data-language="nginx">
{
  "total" : 10624511,
  "current" : 4
}</pre> </li> <li id="def_nginx_http_server_zone"> <p>HTTP Server Zone:</p> <dl class="compact"> <dt> <code>processing</code> (<code>integer</code>) </dt> <dd> The number of client requests that are currently being processed. </dd> <dt> <code>requests</code> (<code>integer</code>) </dt> <dd> The total number of client requests received from clients. </dd> <dt> <code>responses</code>
</dt> <dd> The total number of responses sent to clients, the number of responses with status codes “<code>1xx</code>”, “<code>2xx</code>”, “<code>3xx</code>”, “<code>4xx</code>”, and “<code>5xx</code>”, and the number of responses per each status code.<dl class="compact"> <dt> <code>1xx</code> (<code>integer</code>) </dt> <dd> The number of responses with “<code>1xx</code>” status codes. </dd> <dt> <code>2xx</code> (<code>integer</code>) </dt> <dd> The number of responses with “<code>2xx</code>” status codes. </dd> <dt> <code>3xx</code> (<code>integer</code>) </dt> <dd> The number of responses with “<code>3xx</code>” status codes. </dd> <dt> <code>4xx</code> (<code>integer</code>) </dt> <dd> The number of responses with “<code>4xx</code>” status codes. </dd> <dt> <code>5xx</code> (<code>integer</code>) </dt> <dd> The number of responses with “<code>5xx</code>” status codes. </dd> <dt> <code>codes</code>
</dt> <dd> The number of responses per each status code.<dl class="compact"> <dt> <code>codeNumber</code> (<code>integer</code>) </dt> <dd> The number of responses with this particular status code. </dd> </dl> </dd> <dt> <code>total</code> (<code>integer</code>) </dt> <dd> The total number of responses sent to clients. </dd> </dl> </dd> <dt> <code>discarded</code> (<code>integer</code>) </dt> <dd> The total number of requests completed without sending a response. </dd> <dt> <code>received</code> (<code>integer</code>) </dt> <dd> The total number of bytes received from clients. </dd> <dt> <code>sent</code> (<code>integer</code>) </dt> <dd> The total number of bytes sent to clients. </dd> <dt> <code>ssl</code>
</dt> <dd> <dl class="compact"> <dt> <code>handshakes</code> (<code>integer</code>) </dt> <dd> The total number of successful SSL handshakes. </dd> <dt> <code>handshakes_failed</code> (<code>integer</code>) </dt> <dd> The total number of failed SSL handshakes. </dd> <dt> <code>session_reuses</code> (<code>integer</code>) </dt> <dd> The total number of session reuses during SSL handshake. </dd> <dt> <code>no_common_protocol</code> (<code>integer</code>) </dt> <dd> The number of SSL handshakes failed because of no common protocol. </dd> <dt> <code>no_common_cipher</code> (<code>integer</code>) </dt> <dd> The number of SSL handshakes failed because of no shared cipher. </dd> <dt> <code>handshake_timeout</code> (<code>integer</code>) </dt> <dd> The number of SSL handshakes failed because of a timeout. </dd> <dt> <code>peer_rejected_cert</code> (<code>integer</code>) </dt> <dd> The number of failed SSL handshakes when nginx presented the certificate to the client but it was rejected with a corresponding alert message. </dd> <dt> <code>verify_failures</code>
</dt> <dd> SSL certificate verification errors<dl class="compact"> <dt> <code>no_cert</code> (<code>integer</code>) </dt> <dd> A client did not provide the required certificate. </dd> <dt> <code>expired_cert</code> (<code>integer</code>) </dt> <dd> An expired or not yet valid certificate was presented by a client. </dd> <dt> <code>revoked_cert</code> (<code>integer</code>) </dt> <dd> A revoked certificate was presented by a client. </dd> <dt> <code>other</code> (<code>integer</code>) </dt> <dd> Other SSL certificate verification errors. </dd> </dl> </dd> </dl> </dd> </dl> <p>Example:</p> <pre data-language="nginx">
{
  "processing" : 1,
  "requests" : 706690,
  "responses" : {
    "1xx" : 0,
    "2xx" : 699482,
    "3xx" : 4522,
    "4xx" : 907,
    "5xx" : 266,
    "codes" : {
      "200" : 699482,
      "301" : 4522,
      "404" : 907,
      "503" : 266
    },
    "total" : 705177
  },
  "discarded" : 1513,
  "received" : 172711587,
  "sent" : 19415530115,
  "ssl" : {
    "handshakes" : 104303,
    "handshakes_failed" : 1421,
    "session_reuses" : 54645,
    "no_common_protocol" : 4,
    "no_common_cipher" : 2,
    "handshake_timeout" : 0,
    "peer_rejected_cert" : 0,
    "verify_failures" : {
      "no_cert" : 0,
      "expired_cert" : 2,
      "revoked_cert" : 1,
      "other" : 1
    }
  }
}</pre> </li> <li id="def_nginx_http_location_zone"> <p>HTTP Location Zone:</p> <dl class="compact"> <dt> <code>requests</code> (<code>integer</code>) </dt> <dd> The total number of client requests received from clients. </dd> <dt> <code>responses</code>
</dt> <dd> The total number of responses sent to clients, the number of responses with status codes “<code>1xx</code>”, “<code>2xx</code>”, “<code>3xx</code>”, “<code>4xx</code>”, and “<code>5xx</code>”, and the number of responses per each status code.<dl class="compact"> <dt> <code>1xx</code> (<code>integer</code>) </dt> <dd> The number of responses with “<code>1xx</code>” status codes. </dd> <dt> <code>2xx</code> (<code>integer</code>) </dt> <dd> The number of responses with “<code>2xx</code>” status codes. </dd> <dt> <code>3xx</code> (<code>integer</code>) </dt> <dd> The number of responses with “<code>3xx</code>” status codes. </dd> <dt> <code>4xx</code> (<code>integer</code>) </dt> <dd> The number of responses with “<code>4xx</code>” status codes. </dd> <dt> <code>5xx</code> (<code>integer</code>) </dt> <dd> The number of responses with “<code>5xx</code>” status codes. </dd> <dt> <code>codes</code>
</dt> <dd> The number of responses per each status code.<dl class="compact"> <dt> <code>codeNumber</code> (<code>integer</code>) </dt> <dd> The number of responses with this particular status code. </dd> </dl> </dd> <dt> <code>total</code> (<code>integer</code>) </dt> <dd> The total number of responses sent to clients. </dd> </dl> </dd> <dt> <code>discarded</code> (<code>integer</code>) </dt> <dd> The total number of requests completed without sending a response. </dd> <dt> <code>received</code> (<code>integer</code>) </dt> <dd> The total number of bytes received from clients. </dd> <dt> <code>sent</code> (<code>integer</code>) </dt> <dd> The total number of bytes sent to clients. </dd> </dl> <p>Example:</p> <pre data-language="nginx">
{
  "requests" : 706690,
  "responses" : {
    "1xx" : 0,
    "2xx" : 699482,
    "3xx" : 4522,
    "4xx" : 907,
    "5xx" : 266,
    "codes" : {
      "200" : 112674,
      "301" : 4522,
      "404" : 2504,
      "503" : 266
    },
    "total" : 705177
  },
  "discarded" : 1513,
  "received" : 172711587,
  "sent" : 19415530115
}</pre> </li> <li id="def_nginx_http_cache"> <p>HTTP Cache:</p> <dl class="compact"> <dt> <code>size</code> (<code>integer</code>) </dt> <dd> The current size of the cache. </dd> <dt> <code>max_size</code> (<code>integer</code>) </dt> <dd> The limit on the maximum size of the cache specified in the configuration. </dd> <dt> <code>cold</code> (<code>boolean</code>) </dt> <dd> A boolean value indicating whether the “cache loader” process is still loading data from disk into the cache. </dd> <dt> <code>hit</code>
</dt> <dd> <dl class="compact"> <dt> <code>responses</code> (<code>integer</code>) </dt> <dd> The total number of <a href="ngx_http_proxy_module.html#proxy_cache_valid">valid</a> responses read from the cache. </dd> <dt> <code>bytes</code> (<code>integer</code>) </dt> <dd> The total number of bytes read from the cache. </dd> </dl> </dd> <dt> <code>stale</code>
</dt> <dd> <dl class="compact"> <dt> <code>responses</code> (<code>integer</code>) </dt> <dd> The total number of expired responses read from the cache (see <a href="ngx_http_proxy_module.html#proxy_cache_use_stale">proxy_cache_use_stale</a> and other “<code>*_cache_use_stale</code>” directives). </dd> <dt> <code>bytes</code> (<code>integer</code>) </dt> <dd> The total number of bytes read from the cache. </dd> </dl> </dd> <dt> <code>updating</code>
</dt> <dd> <dl class="compact"> <dt> <code>responses</code> (<code>integer</code>) </dt> <dd> The total number of expired responses read from the cache while responses were being updated (see <a href="ngx_http_proxy_module.html#proxy_cache_use_stale_updating">proxy_cache_use_stale</a> and other “<code>*_cache_use_stale</code>” directives). </dd> <dt> <code>bytes</code> (<code>integer</code>) </dt> <dd> The total number of bytes read from the cache. </dd> </dl> </dd> <dt> <code>revalidated</code>
</dt> <dd> <dl class="compact"> <dt> <code>responses</code> (<code>integer</code>) </dt> <dd> The total number of expired and revalidated responses read from the cache (see <a href="ngx_http_proxy_module.html#proxy_cache_revalidate">proxy_cache_revalidate</a> and other “<code>*_cache_revalidate</code>” directives. </dd> <dt> <code>bytes</code> (<code>integer</code>) </dt> <dd> The total number of bytes read from the cache. </dd> </dl> </dd> <dt> <code>miss</code>
</dt> <dd> <dl class="compact"> <dt> <code>responses</code> (<code>integer</code>) </dt> <dd> The total number of responses not found in the cache. </dd> <dt> <code>bytes</code> (<code>integer</code>) </dt> <dd> The total number of bytes read from the proxied server. </dd> <dt> <code>responses_written</code> (<code>integer</code>) </dt> <dd> The total number of responses written to the cache. </dd> <dt> <code>bytes_written</code> (<code>integer</code>) </dt> <dd> The total number of bytes written to the cache. </dd> </dl> </dd> <dt> <code>expired</code>
</dt> <dd> <dl class="compact"> <dt> <code>responses</code> (<code>integer</code>) </dt> <dd> The total number of expired responses not taken from the cache. </dd> <dt> <code>bytes</code> (<code>integer</code>) </dt> <dd> The total number of bytes read from the proxied server. </dd> <dt> <code>responses_written</code> (<code>integer</code>) </dt> <dd> The total number of responses written to the cache. </dd> <dt> <code>bytes_written</code> (<code>integer</code>) </dt> <dd> The total number of bytes written to the cache. </dd> </dl> </dd> <dt> <code>bypass</code>
</dt> <dd> <dl class="compact"> <dt> <code>responses</code> (<code>integer</code>) </dt> <dd> The total number of responses not looked up in the cache due to the <a href="ngx_http_proxy_module.html#proxy_cache_bypass">proxy_cache_bypass</a> and other “<code>*_cache_bypass</code>” directives. </dd> <dt> <code>bytes</code> (<code>integer</code>) </dt> <dd> The total number of bytes read from the proxied server. </dd> <dt> <code>responses_written</code> (<code>integer</code>) </dt> <dd> The total number of responses written to the cache. </dd> <dt> <code>bytes_written</code> (<code>integer</code>) </dt> <dd> The total number of bytes written to the cache. </dd> </dl> </dd> </dl> <p>Example:</p> <pre data-language="nginx">
{
  "size" : 530915328,
  "max_size" : 536870912,
  "cold" : false,
  "hit" : {
    "responses" : 254032,
    "bytes" : 6685627875
  },
  "stale" : {
    "responses" : 0,
    "bytes" : 0
  },
  "updating" : {
    "responses" : 0,
    "bytes" : 0
  },
  "revalidated" : {
    "responses" : 0,
    "bytes" : 0
  },
  "miss" : {
    "responses" : 1619201,
    "bytes" : 53841943822
  },
  "expired" : {
    "responses" : 45859,
    "bytes" : 1656847080,
    "responses_written" : 44992,
    "bytes_written" : 1641825173
  },
  "bypass" : {
    "responses" : 200187,
    "bytes" : 5510647548,
    "responses_written" : 200173,
    "bytes_written" : 44992
  }
}</pre> </li> <li id="def_nginx_http_limit_conn_zone"> <p>HTTP Connections Limiting:</p> <dl class="compact"> <dt> <code>passed</code> (<code>integer</code>) </dt> <dd> The total number of connections that were neither limited nor accounted as limited. </dd> <dt> <code>rejected</code> (<code>integer</code>) </dt> <dd> The total number of connections that were rejected. </dd> <dt> <code>rejected_dry_run</code> (<code>integer</code>) </dt> <dd> The total number of connections accounted as rejected in the <a href="ngx_http_limit_conn_module.html#limit_conn_dry_run">dry run</a> mode. </dd> </dl> <p>Example:</p> <pre data-language="nginx">
{
  "passed" : 15,
  "rejected" : 0,
  "rejected_dry_run" : 2
}</pre> </li> <li id="def_nginx_http_limit_req_zone"> <p>HTTP Requests Rate Limiting:</p> <dl class="compact"> <dt> <code>passed</code> (<code>integer</code>) </dt> <dd> The total number of requests that were neither limited nor accounted as limited. </dd> <dt> <code>delayed</code> (<code>integer</code>) </dt> <dd> The total number of requests that were delayed. </dd> <dt> <code>rejected</code> (<code>integer</code>) </dt> <dd> The total number of requests that were rejected. </dd> <dt> <code>delayed_dry_run</code> (<code>integer</code>) </dt> <dd> The total number of requests accounted as delayed in the <a href="ngx_http_limit_req_module.html#limit_req_dry_run">dry run</a> mode. </dd> <dt> <code>rejected_dry_run</code> (<code>integer</code>) </dt> <dd> The total number of requests accounted as rejected in the <a href="ngx_http_limit_req_module.html#limit_req_dry_run">dry run</a> mode. </dd> </dl> <p>Example:</p> <pre data-language="nginx">
{
  "passed" : 15,
  "delayed" : 4,
  "rejected" : 0,
  "delayed_dry_run" : 1,
  "rejected_dry_run" : 2
}</pre> </li> <li id="def_nginx_http_upstream"> <p>HTTP Upstream:</p> <dl class="compact"> <dt> <code>peers</code>
</dt> <dd> An array of:<dl class="compact"> <dt> <code>id</code> (<code>integer</code>) </dt> <dd> The ID of the server. </dd> <dt> <code>server</code> (<code>string</code>) </dt> <dd> An <a href="ngx_http_upstream_module.html#server">address</a> of the server. </dd> <dt> <code>service</code> (<code>string</code>) </dt> <dd> The <a href="ngx_http_upstream_module.html#service">service</a> parameter value of the <a href="ngx_http_upstream_module.html#server">server</a> directive. </dd> <dt> <code>name</code> (<code>string</code>) </dt> <dd> The name of the server specified in the <a href="ngx_http_upstream_module.html#server">server</a> directive. </dd> <dt> <code>backup</code> (<code>boolean</code>) </dt> <dd> A boolean value indicating whether the server is a <a href="ngx_http_upstream_module.html#backup">backup</a> server. </dd> <dt> <code>weight</code> (<code>integer</code>) </dt> <dd> <a href="ngx_http_upstream_module.html#weight">Weight</a> of the server. </dd> <dt> <code>state</code> (<code>string</code>) </dt> <dd> Current state, which may be one of “<code>up</code>”, “<code>draining</code>”, “<code>down</code>”, “<code>unavail</code>”, “<code>checking</code>”, and “<code>unhealthy</code>”. </dd> <dt> <code>active</code> (<code>integer</code>) </dt> <dd> The current number of active connections. </dd> <dt> <code>ssl</code>
</dt> <dd> <dl class="compact"> <dt> <code>handshakes</code> (<code>integer</code>) </dt> <dd> The total number of successful SSL handshakes. </dd> <dt> <code>handshakes_failed</code> (<code>integer</code>) </dt> <dd> The total number of failed SSL handshakes. </dd> <dt> <code>session_reuses</code> (<code>integer</code>) </dt> <dd> The total number of session reuses during SSL handshake. </dd> <dt> <code>no_common_protocol</code> (<code>integer</code>) </dt> <dd> The number of SSL handshakes failed because of no common protocol. </dd> <dt> <code>handshake_timeout</code> (<code>integer</code>) </dt> <dd> The number of SSL handshakes failed because of a timeout. </dd> <dt> <code>peer_rejected_cert</code> (<code>integer</code>) </dt> <dd> The number of failed SSL handshakes when nginx presented the certificate to the upstream server but it was rejected with a corresponding alert message. </dd> <dt> <code>verify_failures</code>
</dt> <dd> SSL certificate verification errors<dl class="compact"> <dt> <code>expired_cert</code> (<code>integer</code>) </dt> <dd> An expired or not yet valid certificate was presented by an upstream server. </dd> <dt> <code>revoked_cert</code> (<code>integer</code>) </dt> <dd> A revoked certificate was presented by an upstream server. </dd> <dt> <code>hostname_mismatch</code> (<code>integer</code>) </dt> <dd> Server's certificate doesn't match the hostname. </dd> <dt> <code>other</code> (<code>integer</code>) </dt> <dd> Other SSL certificate verification errors. </dd> </dl> </dd> </dl> </dd> <dt> <code>max_conns</code> (<code>integer</code>) </dt> <dd> The <a href="ngx_http_upstream_module.html#max_conns">max_conns</a> limit for the server. </dd> <dt> <code>requests</code> (<code>integer</code>) </dt> <dd> The total number of client requests forwarded to this server. </dd> <dt> <code>responses</code>
</dt> <dd> <dl class="compact"> <dt> <code>1xx</code> (<code>integer</code>) </dt> <dd> The number of responses with “<code>1xx</code>” status codes. </dd> <dt> <code>2xx</code> (<code>integer</code>) </dt> <dd> The number of responses with “<code>2xx</code>” status codes. </dd> <dt> <code>3xx</code> (<code>integer</code>) </dt> <dd> The number of responses with “<code>3xx</code>” status codes. </dd> <dt> <code>4xx</code> (<code>integer</code>) </dt> <dd> The number of responses with “<code>4xx</code>” status codes. </dd> <dt> <code>5xx</code> (<code>integer</code>) </dt> <dd> The number of responses with “<code>5xx</code>” status codes. </dd> <dt> <code>codes</code>
</dt> <dd> The number of responses per each status code.<dl class="compact"> <dt> <code>codeNumber</code> (<code>integer</code>) </dt> <dd> The number of responses with this particular status code. </dd> </dl> </dd> <dt> <code>total</code> (<code>integer</code>) </dt> <dd> The total number of responses obtained from this server. </dd> </dl> </dd> <dt> <code>sent</code> (<code>integer</code>) </dt> <dd> The total number of bytes sent to this server. </dd> <dt> <code>received</code> (<code>integer</code>) </dt> <dd> The total number of bytes received from this server. </dd> <dt> <code>fails</code> (<code>integer</code>) </dt> <dd> The total number of unsuccessful attempts to communicate with the server. </dd> <dt> <code>unavail</code> (<code>integer</code>) </dt> <dd> How many times the server became unavailable for client requests (state “<code>unavail</code>”) due to the number of unsuccessful attempts reaching the <a href="ngx_http_upstream_module.html#max_fails">max_fails</a> threshold. </dd> <dt> <code>health_checks</code>
</dt> <dd> <dl class="compact"> <dt> <code>checks</code> (<code>integer</code>) </dt> <dd> The total number of <a href="ngx_http_upstream_hc_module.html#health_check">health check</a> requests made. </dd> <dt> <code>fails</code> (<code>integer</code>) </dt> <dd> The number of failed health checks. </dd> <dt> <code>unhealthy</code> (<code>integer</code>) </dt> <dd> How many times the server became unhealthy (state “<code>unhealthy</code>”). </dd> <dt> <code>last_passed</code> (<code>boolean</code>) </dt> <dd> Boolean indicating if the last health check request was successful and passed <a href="ngx_http_upstream_hc_module.html#match">tests</a>. </dd> </dl> </dd> <dt> <code>downtime</code> (<code>integer</code>) </dt> <dd> Total time the server was in the “<code>unavail</code>”, “<code>checking</code>”, and “<code>unhealthy</code>” states. </dd> <dt> <code>downstart</code> (<code>string</code>) </dt> <dd> The time when the server became “<code>unavail</code>”, “<code>checking</code>”, or “<code>unhealthy</code>”, in the ISO 8601 format with millisecond resolution. </dd> <dt> <code>selected</code> (<code>string</code>) </dt> <dd> The time when the server was last selected to process a request, in the ISO 8601 format with millisecond resolution. </dd> <dt> <code>header_time</code> (<code>integer</code>) </dt> <dd> The average time to get the <a href="ngx_http_upstream_module.html#var_upstream_header_time">response header</a> from the server. </dd> <dt> <code>response_time</code> (<code>integer</code>) </dt> <dd> The average time to get the <a href="ngx_http_upstream_module.html#var_upstream_response_time">full response</a> from the server. </dd> </dl> </dd> <dt> <code>keepalive</code> (<code>integer</code>) </dt> <dd> The current number of idle <a href="ngx_http_upstream_module.html#keepalive">keepalive</a> connections. </dd> <dt> <code>zombies</code> (<code>integer</code>) </dt> <dd> The current number of servers removed from the group but still processing active client requests. </dd> <dt> <code>zone</code> (<code>string</code>) </dt> <dd> The name of the shared memory <a href="ngx_http_upstream_module.html#zone">zone</a> that keeps the group’s configuration and run-time state. </dd> <dt> <code>queue</code>
</dt> <dd> For the requests <a href="ngx_http_upstream_module.html#queue">queue</a>, the following data are provided:<dl class="compact"> <dt> <code>size</code> (<code>integer</code>) </dt> <dd> The current number of requests in the queue. </dd> <dt> <code>max_size</code> (<code>integer</code>) </dt> <dd> The maximum number of requests that can be in the queue at the same time. </dd> <dt> <code>overflows</code> (<code>integer</code>) </dt> <dd> The total number of requests rejected due to the queue overflow. </dd> </dl> </dd> </dl> <p>Example:</p> <pre data-language="nginx">
{
  "upstream_backend" : {
    "peers" : [
      {
        "id" : 0,
        "server" : "10.0.0.1:8088",
        "name" : "10.0.0.1:8088",
        "backup" : false,
        "weight" : 5,
        "state" : "up",
        "active" : 0,
        "ssl" : {
          "handshakes" : 620311,
          "handshakes_failed" : 3432,
          "session_reuses" : 36442,
          "no_common_protocol" : 4,
          "handshake_timeout" : 0,
          "peer_rejected_cert" : 0,
          "verify_failures" : {
            "expired_cert" : 2,
            "revoked_cert" : 1,
            "hostname_mismatch" : 2,
            "other" : 1
          }
        },
        "max_conns" : 20,
        "requests" : 667231,
        "header_time" : 20,
        "response_time" : 36,
        "responses" : {
          "1xx" : 0,
          "2xx" : 666310,
          "3xx" : 0,
          "4xx" : 915,
          "5xx" : 6,
          "codes" : {
            "200" : 666310,
            "404" : 915,
            "503" : 6
          },
          "total" : 667231
        },
        "sent" : 251946292,
        "received" : 19222475454,
        "fails" : 0,
        "unavail" : 0,
        "health_checks" : {
          "checks" : 26214,
          "fails" : 0,
          "unhealthy" : 0,
          "last_passed" : true
        },
        "downtime" : 0,
        "downstart" : "2022-06-28T11:09:21.602Z",
        "selected" : "2022-06-28T15:01:25.000Z"
      },
      {
        "id" : 1,
        "server" : "10.0.0.1:8089",
        "name" : "10.0.0.1:8089",
        "backup" : true,
        "weight" : 1,
        "state" : "unhealthy",
        "active" : 0,
        "max_conns" : 20,
        "requests" : 0,
        "responses" : {
          "1xx" : 0,
          "2xx" : 0,
          "3xx" : 0,
          "4xx" : 0,
          "5xx" : 0,
          "codes" : {
          },
          "total" : 0
        },
        "sent" : 0,
        "received" : 0,
        "fails" : 0,
        "unavail" : 0,
        "health_checks" : {
          "checks" : 26284,
          "fails" : 26284,
          "unhealthy" : 1,
          "last_passed" : false
        },
        "downtime" : 262925617,
        "downstart" : "2022-06-28T11:09:21.602Z",
        "selected" : "2022-06-28T15:01:25.000Z"
      }
    ],
    "keepalive" : 0,
    "zombies" : 0,
    "zone" : "upstream_backend"
  }
}</pre> </li> <li id="def_nginx_http_upstream_conf_server"> <p>HTTP Upstream Server:</p> Dynamically configurable parameters of an HTTP upstream <a href="ngx_http_upstream_module.html#server">server</a>:<dl class="compact"> <dt> <code>id</code> (<code>integer</code>) </dt> <dd> The ID of the HTTP upstream server. The ID is assigned automatically and cannot be changed. </dd> <dt> <code>server</code> (<code>string</code>) </dt> <dd> Same as the <a href="ngx_http_upstream_module.html#server">address</a> parameter of the HTTP upstream server. When adding a server, it is possible to specify it as a domain name. In this case, changes of the IP addresses that correspond to a domain name will be monitored and automatically applied to the upstream configuration without the need of restarting nginx. This requires the <a href="ngx_http_core_module.html#resolver">resolver</a> directive in the “<code>http</code>” block. See also the <a href="ngx_http_upstream_module.html#resolve">resolve</a> parameter of the HTTP upstream server. </dd> <dt> <code>service</code> (<code>string</code>) </dt> <dd> Same as the <a href="ngx_http_upstream_module.html#service">service</a> parameter of the HTTP upstream server. This parameter cannot be changed. </dd> <dt> <code>weight</code> (<code>integer</code>) </dt> <dd> Same as the <a href="ngx_http_upstream_module.html#weight">weight</a> parameter of the HTTP upstream server. </dd> <dt> <code>max_conns</code> (<code>integer</code>) </dt> <dd> Same as the <a href="ngx_http_upstream_module.html#max_conns">max_conns</a> parameter of the HTTP upstream server. </dd> <dt> <code>max_fails</code> (<code>integer</code>) </dt> <dd> Same as the <a href="ngx_http_upstream_module.html#max_fails">max_fails</a> parameter of the HTTP upstream server. </dd> <dt> <code>fail_timeout</code> (<code>string</code>) </dt> <dd> Same as the <a href="ngx_http_upstream_module.html#fail_timeout">fail_timeout</a> parameter of the HTTP upstream server. </dd> <dt> <code>slow_start</code> (<code>string</code>) </dt> <dd> Same as the <a href="ngx_http_upstream_module.html#slow_start">slow_start</a> parameter of the HTTP upstream server. </dd> <dt> <code>route</code> (<code>string</code>) </dt> <dd> Same as the <a href="ngx_http_upstream_module.html#route">route</a> parameter of the HTTP upstream server. </dd> <dt> <code>backup</code> (<code>boolean</code>) </dt> <dd> When <code>true</code>, adds a <a href="ngx_http_upstream_module.html#backup">backup</a> server. This parameter cannot be changed. </dd> <dt> <code>down</code> (<code>boolean</code>) </dt> <dd> Same as the <a href="ngx_http_upstream_module.html#down">down</a> parameter of the HTTP upstream server. </dd> <dt> <code>drain</code> (<code>boolean</code>) </dt> <dd> Same as the <a href="ngx_http_upstream_module.html#drain">drain</a> parameter of the HTTP upstream server. </dd> <dt> <code>parent</code> (<code>string</code>) </dt> <dd> Parent server ID of the resolved server. The ID is assigned automatically and cannot be changed. </dd> <dt> <code>host</code> (<code>string</code>) </dt> <dd> Hostname of the resolved server. The hostname is assigned automatically and cannot be changed. </dd> </dl> <p>Example:</p> <pre data-language="nginx">
{
  "id" : 1,
  "server" : "10.0.0.1:8089",
  "weight" : 4,
  "max_conns" : 0,
  "max_fails" : 0,
  "fail_timeout" : "10s",
  "slow_start" : "10s",
  "route" : "",
  "backup" : true,
  "down" : true
}</pre> </li> <li id="def_nginx_http_keyval_zone"> <p>HTTP Keyval Shared Memory Zone:</p> Contents of an HTTP keyval shared memory zone when using the GET method.<p>Example:</p> <pre data-language="nginx">
{
  "key1" : "value1",
  "key2" : "value2",
  "key3" : "value3"
}</pre> </li> <li id="def_nginx_http_keyval_zone_post_patch"> <p>HTTP Keyval Shared Memory Zone:</p> Contents of an HTTP keyval shared memory zone when using the POST or PATCH methods.<p>Example:</p> <pre data-language="nginx">
{
  "key1" : "value1",
  "key2" : "value2",
  "key3" : {
    "value" : "value3",
    "expire" : 30000
  }
}</pre> </li> <li id="def_nginx_stream_server_zone"> <p>Stream Server Zone:</p> <dl class="compact"> <dt> <code>processing</code> (<code>integer</code>) </dt> <dd> The number of client connections that are currently being processed. </dd> <dt> <code>connections</code> (<code>integer</code>) </dt> <dd> The total number of connections accepted from clients. </dd> <dt> <code>sessions</code>
</dt> <dd> The total number of completed sessions, and the number of sessions completed with status codes “<code>2xx</code>”, “<code>4xx</code>”, or “<code>5xx</code>”.<dl class="compact"> <dt> <code>2xx</code> (<code>integer</code>) </dt> <dd> The total number of sessions completed with <a href="../stream/ngx_stream_core_module.html#var_status">status codes</a> “<code>2xx</code>”. </dd> <dt> <code>4xx</code> (<code>integer</code>) </dt> <dd> The total number of sessions completed with <a href="../stream/ngx_stream_core_module.html#var_status">status codes</a> “<code>4xx</code>”. </dd> <dt> <code>5xx</code> (<code>integer</code>) </dt> <dd> The total number of sessions completed with <a href="../stream/ngx_stream_core_module.html#var_status">status codes</a> “<code>5xx</code>”. </dd> <dt> <code>total</code> (<code>integer</code>) </dt> <dd> The total number of completed client sessions. </dd> </dl> </dd> <dt> <code>discarded</code> (<code>integer</code>) </dt> <dd> The total number of connections completed without creating a session. </dd> <dt> <code>received</code> (<code>integer</code>) </dt> <dd> The total number of bytes received from clients. </dd> <dt> <code>sent</code> (<code>integer</code>) </dt> <dd> The total number of bytes sent to clients. </dd> <dt> <code>ssl</code>
</dt> <dd> <dl class="compact"> <dt> <code>handshakes</code> (<code>integer</code>) </dt> <dd> The total number of successful SSL handshakes. </dd> <dt> <code>handshakes_failed</code> (<code>integer</code>) </dt> <dd> The total number of failed SSL handshakes. </dd> <dt> <code>session_reuses</code> (<code>integer</code>) </dt> <dd> The total number of session reuses during SSL handshake. </dd> <dt> <code>no_common_protocol</code> (<code>integer</code>) </dt> <dd> The number of SSL handshakes failed because of no common protocol. </dd> <dt> <code>no_common_cipher</code> (<code>integer</code>) </dt> <dd> The number of SSL handshakes failed because of no shared cipher. </dd> <dt> <code>handshake_timeout</code> (<code>integer</code>) </dt> <dd> The number of SSL handshakes failed because of a timeout. </dd> <dt> <code>peer_rejected_cert</code> (<code>integer</code>) </dt> <dd> The number of failed SSL handshakes when nginx presented the certificate to the client but it was rejected with a corresponding alert message. </dd> <dt> <code>verify_failures</code>
</dt> <dd> SSL certificate verification errors<dl class="compact"> <dt> <code>no_cert</code> (<code>integer</code>) </dt> <dd> A client did not provide the required certificate. </dd> <dt> <code>expired_cert</code> (<code>integer</code>) </dt> <dd> An expired or not yet valid certificate was presented by a client. </dd> <dt> <code>revoked_cert</code> (<code>integer</code>) </dt> <dd> A revoked certificate was presented by a client. </dd> <dt> <code>other</code> (<code>integer</code>) </dt> <dd> Other SSL certificate verification errors. </dd> </dl> </dd> </dl> </dd> </dl> <p>Example:</p> <pre data-language="nginx">
{
  "dns" : {
    "processing" : 1,
    "connections" : 155569,
    "sessions" : {
      "2xx" : 155564,
      "4xx" : 0,
      "5xx" : 0,
      "total" : 155569
    },
    "discarded" : 0,
    "received" : 4200363,
    "sent" : 20489184,
    "ssl" : {
      "handshakes" : 76455,
      "handshakes_failed" : 432,
      "session_reuses" : 28770,
      "no_common_protocol" : 4,
      "no_common_cipher" : 2,
      "handshake_timeout" : 0,
      "peer_rejected_cert" : 0,
      "verify_failures" : {
        "no_cert" : 0,
        "expired_cert" : 2,
        "revoked_cert" : 1,
        "other" : 1
      }
    }
  }
}</pre> </li> <li id="def_nginx_stream_limit_conn_zone"> <p>Stream Connections Limiting:</p> <dl class="compact"> <dt> <code>passed</code> (<code>integer</code>) </dt> <dd> The total number of connections that were neither limited nor accounted as limited. </dd> <dt> <code>rejected</code> (<code>integer</code>) </dt> <dd> The total number of connections that were rejected. </dd> <dt> <code>rejected_dry_run</code> (<code>integer</code>) </dt> <dd> The total number of connections accounted as rejected in the <a href="../stream/ngx_stream_limit_conn_module.html#limit_conn_dry_run">dry run</a> mode. </dd> </dl> <p>Example:</p> <pre data-language="nginx">
{
  "passed" : 15,
  "rejected" : 0,
  "rejected_dry_run" : 2
}</pre> </li> <li id="def_nginx_stream_upstream"> <p>Stream Upstream:</p> <dl class="compact"> <dt> <code>peers</code>
</dt> <dd> An array of:<dl class="compact"> <dt> <code>id</code> (<code>integer</code>) </dt> <dd> The ID of the server. </dd> <dt> <code>server</code> (<code>string</code>) </dt> <dd> An <a href="../stream/ngx_stream_upstream_module.html#server">address</a> of the server. </dd> <dt> <code>service</code> (<code>string</code>) </dt> <dd> The <a href="../stream/ngx_stream_upstream_module.html#service">service</a> parameter value of the <a href="../stream/ngx_stream_upstream_module.html#server">server</a> directive. </dd> <dt> <code>name</code> (<code>string</code>) </dt> <dd> The name of the server specified in the <a href="../stream/ngx_stream_upstream_module.html#server">server</a> directive. </dd> <dt> <code>backup</code> (<code>boolean</code>) </dt> <dd> A boolean value indicating whether the server is a <a href="../stream/ngx_stream_upstream_module.html#backup">backup</a> server. </dd> <dt> <code>weight</code> (<code>integer</code>) </dt> <dd> <a href="../stream/ngx_stream_upstream_module.html#weight">Weight</a> of the server. </dd> <dt> <code>state</code> (<code>string</code>) </dt> <dd> Current state, which may be one of “<code>up</code>”, “<code>down</code>”, “<code>unavail</code>”, “<code>checking</code>”, or “<code>unhealthy</code>”. </dd> <dt> <code>active</code> (<code>integer</code>) </dt> <dd> The current number of connections. </dd> <dt> <code>ssl</code>
</dt> <dd> <dl class="compact"> <dt> <code>handshakes</code> (<code>integer</code>) </dt> <dd> The total number of successful SSL handshakes. </dd> <dt> <code>handshakes_failed</code> (<code>integer</code>) </dt> <dd> The total number of failed SSL handshakes. </dd> <dt> <code>session_reuses</code> (<code>integer</code>) </dt> <dd> The total number of session reuses during SSL handshake. </dd> <dt> <code>no_common_protocol</code> (<code>integer</code>) </dt> <dd> The number of SSL handshakes failed because of no common protocol. </dd> <dt> <code>handshake_timeout</code> (<code>integer</code>) </dt> <dd> The number of SSL handshakes failed because of a timeout. </dd> <dt> <code>peer_rejected_cert</code> (<code>integer</code>) </dt> <dd> The number of failed SSL handshakes when nginx presented the certificate to the upstream server but it was rejected with a corresponding alert message. </dd> <dt> <code>verify_failures</code>
</dt> <dd> SSL certificate verification errors<dl class="compact"> <dt> <code>expired_cert</code> (<code>integer</code>) </dt> <dd> An expired or not yet valid certificate was presented by an upstream server. </dd> <dt> <code>revoked_cert</code> (<code>integer</code>) </dt> <dd> A revoked certificate was presented by an upstream server. </dd> <dt> <code>hostname_mismatch</code> (<code>integer</code>) </dt> <dd> Server's certificate doesn't match the hostname. </dd> <dt> <code>other</code> (<code>integer</code>) </dt> <dd> Other SSL certificate verification errors. </dd> </dl> </dd> </dl> </dd> <dt> <code>max_conns</code> (<code>integer</code>) </dt> <dd> The <a href="../stream/ngx_stream_upstream_module.html#max_conns">max_conns</a> limit for the server. </dd> <dt> <code>connections</code> (<code>integer</code>) </dt> <dd> The total number of client connections forwarded to this server. </dd> <dt> <code>connect_time</code> (<code>integer</code>) </dt> <dd> The average time to connect to the upstream server. </dd> <dt> <code>first_byte_time</code> (<code>integer</code>) </dt> <dd> The average time to receive the first byte of data. </dd> <dt> <code>response_time</code> (<code>integer</code>) </dt> <dd> The average time to receive the last byte of data. </dd> <dt> <code>sent</code> (<code>integer</code>) </dt> <dd> The total number of bytes sent to this server. </dd> <dt> <code>received</code> (<code>integer</code>) </dt> <dd> The total number of bytes received from this server. </dd> <dt> <code>fails</code> (<code>integer</code>) </dt> <dd> The total number of unsuccessful attempts to communicate with the server. </dd> <dt> <code>unavail</code> (<code>integer</code>) </dt> <dd> How many times the server became unavailable for client connections (state “<code>unavail</code>”) due to the number of unsuccessful attempts reaching the <a href="../stream/ngx_stream_upstream_module.html#max_fails">max_fails</a> threshold. </dd> <dt> <code>health_checks</code>
</dt> <dd> <dl class="compact"> <dt> <code>checks</code> (<code>integer</code>) </dt> <dd> The total number of <a href="../stream/ngx_stream_upstream_hc_module.html#health_check">health check</a> requests made. </dd> <dt> <code>fails</code> (<code>integer</code>) </dt> <dd> The number of failed health checks. </dd> <dt> <code>unhealthy</code> (<code>integer</code>) </dt> <dd> How many times the server became unhealthy (state “<code>unhealthy</code>”). </dd> <dt> <code>last_passed</code> (<code>boolean</code>) </dt> <dd> Boolean indicating whether the last health check request was successful and passed <a href="../stream/ngx_stream_upstream_hc_module.html#match">tests</a>. </dd> </dl> </dd> <dt> <code>downtime</code> (<code>integer</code>) </dt> <dd> Total time the server was in the “<code>unavail</code>”, “<code>checking</code>”, and “<code>unhealthy</code>” states. </dd> <dt> <code>downstart</code> (<code>string</code>) </dt> <dd> The time when the server became “<code>unavail</code>”, “<code>checking</code>”, or “<code>unhealthy</code>”, in the ISO 8601 format with millisecond resolution. </dd> <dt> <code>selected</code> (<code>string</code>) </dt> <dd> The time when the server was last selected to process a connection, in the ISO 8601 format with millisecond resolution. </dd> </dl> </dd> <dt> <code>zombies</code> (<code>integer</code>) </dt> <dd> The current number of servers removed from the group but still processing active client connections. </dd> <dt> <code>zone</code> (<code>string</code>) </dt> <dd> The name of the shared memory <a href="../stream/ngx_stream_upstream_module.html#zone">zone</a> that keeps the group’s configuration and run-time state. </dd> </dl> <p>Example:</p> <pre data-language="nginx">
{
  "dns" : {
    "peers" : [
      {
        "id" : 0,
        "server" : "10.0.0.1:12347",
        "name" : "10.0.0.1:12347",
        "backup" : false,
        "weight" : 5,
        "state" : "up",
        "active" : 0,
        "ssl" : {
          "handshakes" : 200,
          "handshakes_failed" : 4,
          "session_reuses" : 189,
          "no_common_protocol" : 4,
          "handshake_timeout" : 0,
          "peer_rejected_cert" : 0,
          "verify_failures" : {
            "expired_cert" : 2,
            "revoked_cert" : 1,
            "hostname_mismatch" : 2,
            "other" : 1
          }
        },
        "max_conns" : 50,
        "connections" : 667231,
        "sent" : 251946292,
        "received" : 19222475454,
        "fails" : 0,
        "unavail" : 0,
        "health_checks" : {
          "checks" : 26214,
          "fails" : 0,
          "unhealthy" : 0,
          "last_passed" : true
        },
        "downtime" : 0,
        "downstart" : "2022-06-28T11:09:21.602Z",
        "selected" : "2022-06-28T15:01:25.000Z"
      },
      {
        "id" : 1,
        "server" : "10.0.0.1:12348",
        "name" : "10.0.0.1:12348",
        "backup" : true,
        "weight" : 1,
        "state" : "unhealthy",
        "active" : 0,
        "max_conns" : 50,
        "connections" : 0,
        "sent" : 0,
        "received" : 0,
        "fails" : 0,
        "unavail" : 0,
        "health_checks" : {
          "checks" : 26284,
          "fails" : 26284,
          "unhealthy" : 1,
          "last_passed" : false
        },
        "downtime" : 262925617,
        "downstart" : "2022-06-28T11:09:21.602Z",
        "selected" : "2022-06-28T15:01:25.000Z"
      }
    ],
    "zombies" : 0,
    "zone" : "dns"
  }
}</pre> </li> <li id="def_nginx_stream_upstream_conf_server"> <p>Stream Upstream Server:</p> Dynamically configurable parameters of a stream upstream <a href="../stream/ngx_stream_upstream_module.html#server">server</a>:<dl class="compact"> <dt> <code>id</code> (<code>integer</code>) </dt> <dd> The ID of the stream upstream server. The ID is assigned automatically and cannot be changed. </dd> <dt> <code>server</code> (<code>string</code>) </dt> <dd> Same as the <a href="../stream/ngx_stream_upstream_module.html#server">address</a> parameter of the stream upstream server. When adding a server, it is possible to specify it as a domain name. In this case, changes of the IP addresses that correspond to a domain name will be monitored and automatically applied to the upstream configuration without the need of restarting nginx. This requires the <a href="../stream/ngx_stream_core_module.html#resolver">resolver</a> directive in the “<code>stream</code>” block. See also the <a href="../stream/ngx_stream_upstream_module.html#resolve">resolve</a> parameter of the stream upstream server. </dd> <dt> <code>service</code> (<code>string</code>) </dt> <dd> Same as the <a href="../stream/ngx_stream_upstream_module.html#service">service</a> parameter of the stream upstream server. This parameter cannot be changed. </dd> <dt> <code>weight</code> (<code>integer</code>) </dt> <dd> Same as the <a href="../stream/ngx_stream_upstream_module.html#weight">weight</a> parameter of the stream upstream server. </dd> <dt> <code>max_conns</code> (<code>integer</code>) </dt> <dd> Same as the <a href="../stream/ngx_stream_upstream_module.html#max_conns">max_conns</a> parameter of the stream upstream server. </dd> <dt> <code>max_fails</code> (<code>integer</code>) </dt> <dd> Same as the <a href="../stream/ngx_stream_upstream_module.html#max_fails">max_fails</a> parameter of the stream upstream server. </dd> <dt> <code>fail_timeout</code> (<code>string</code>) </dt> <dd> Same as the <a href="../stream/ngx_stream_upstream_module.html#fail_timeout">fail_timeout</a> parameter of the stream upstream server. </dd> <dt> <code>slow_start</code> (<code>string</code>) </dt> <dd> Same as the <a href="../stream/ngx_stream_upstream_module.html#slow_start">slow_start</a> parameter of the stream upstream server. </dd> <dt> <code>backup</code> (<code>boolean</code>) </dt> <dd> When <code>true</code>, adds a <a href="../stream/ngx_stream_upstream_module.html#backup">backup</a> server. This parameter cannot be changed. </dd> <dt> <code>down</code> (<code>boolean</code>) </dt> <dd> Same as the <a href="../stream/ngx_stream_upstream_module.html#down">down</a> parameter of the stream upstream server. </dd> <dt> <code>parent</code> (<code>string</code>) </dt> <dd> Parent server ID of the resolved server. The ID is assigned automatically and cannot be changed. </dd> <dt> <code>host</code> (<code>string</code>) </dt> <dd> Hostname of the resolved server. The hostname is assigned automatically and cannot be changed. </dd> </dl> <p>Example:</p> <pre data-language="nginx">
{
  "id" : 0,
  "server" : "10.0.0.1:12348",
  "weight" : 1,
  "max_conns" : 0,
  "max_fails" : 1,
  "fail_timeout" : "10s",
  "slow_start" : 0,
  "backup" : false,
  "down" : false
}</pre> </li> <li id="def_nginx_stream_keyval_zone"> <p>Stream Keyval Shared Memory Zone:</p> Contents of a stream keyval shared memory zone when using the GET method.<p>Example:</p> <pre data-language="nginx">
{
  "key1" : "value1",
  "key2" : "value2",
  "key3" : "value3"
}</pre> </li> <li id="def_nginx_stream_keyval_zone_post_patch"> <p>Stream Keyval Shared Memory Zone:</p> Contents of a stream keyval shared memory zone when using the POST or PATCH methods.<p>Example:</p> <pre data-language="nginx">
{
  "key1" : "value1",
  "key2" : "value2",
  "key3" : {
    "value" : "value3",
    "expire" : 30000
  }
}</pre> </li> <li id="def_nginx_stream_zone_sync"> <p>Stream Zone Sync Node:</p> <dl class="compact"> <dt> <code>zones</code>
</dt> <dd> <p>Synchronization information per each shared memory zone.</p>
<p>A collection of "<a href="#def_nginx_stream_zone_sync_zone">Sync Zone</a>" objects</p> </dd> <dt> <code>status</code>
</dt> <dd> Synchronization information per node in a cluster.<dl class="compact"> <dt> <code>bytes_in</code> (<code>integer</code>) </dt> <dd> The number of bytes received by this node. </dd> <dt> <code>msgs_in</code> (<code>integer</code>) </dt> <dd> The number of messages received by this node. </dd> <dt> <code>msgs_out</code> (<code>integer</code>) </dt> <dd> The number of messages sent by this node. </dd> <dt> <code>bytes_out</code> (<code>integer</code>) </dt> <dd> The number of bytes sent by this node. </dd> <dt> <code>nodes_online</code> (<code>integer</code>) </dt> <dd> The number of peers this node is connected to. </dd> </dl> </dd> </dl> <p>Example:</p> <pre data-language="nginx">
{
  "zones" : {
    "zone1" : {
      "records_pending" : 2061,
      "records_total" : 260575
    },
    "zone2" : {
      "records_pending" : 0,
      "records_total" : 14749
    }
  },
  "status" : {
    "bytes_in" : 1364923761,
    "msgs_in" : 337236,
    "msgs_out" : 346717,
    "bytes_out" : 1402765472,
    "nodes_online" : 15
  }
}</pre> </li> <li id="def_nginx_stream_zone_sync_zone"> <p>Sync Zone:</p> Synchronization status of a shared memory zone.<dl class="compact"> <dt> <code>records_pending</code> (<code>integer</code>) </dt> <dd> The number of records that need to be sent to the cluster. </dd> <dt> <code>records_total</code> (<code>integer</code>) </dt> <dd> The total number of records stored in the shared memory zone. </dd> </dl> </li> <li id="def_nginx_resolver_zone"> <p>Resolver Zone:</p> Statistics of DNS requests and responses per particular <a href="ngx_http_core_module.html#resolver_status_zone">resolver zone</a>.<dl class="compact"> <dt> <code>requests</code>
</dt> <dd> <dl class="compact"> <dt> <code>name</code> (<code>integer</code>) </dt> <dd> The total number of requests to resolve names to addresses. </dd> <dt> <code>srv</code> (<code>integer</code>) </dt> <dd> The total number of requests to resolve SRV records. </dd> <dt> <code>addr</code> (<code>integer</code>) </dt> <dd> The total number of requests to resolve addresses to names. </dd> </dl> </dd> <dt> <code>responses</code>
</dt> <dd> <dl class="compact"> <dt> <code>noerror</code> (<code>integer</code>) </dt> <dd> The total number of successful responses. </dd> <dt> <code>formerr</code> (<code>integer</code>) </dt> <dd> The total number of FORMERR (<code>Format error</code>) responses. </dd> <dt> <code>servfail</code> (<code>integer</code>) </dt> <dd> The total number of SERVFAIL (<code>Server failure</code>) responses. </dd> <dt> <code>nxdomain</code> (<code>integer</code>) </dt> <dd> The total number of NXDOMAIN (<code>Host not found</code>) responses. </dd> <dt> <code>notimp</code> (<code>integer</code>) </dt> <dd> The total number of NOTIMP (<code>Unimplemented</code>) responses. </dd> <dt> <code>refused</code> (<code>integer</code>) </dt> <dd> The total number of REFUSED (<code>Operation refused</code>) responses. </dd> <dt> <code>timedout</code> (<code>integer</code>) </dt> <dd> The total number of timed out requests. </dd> <dt> <code>unknown</code> (<code>integer</code>) </dt> <dd> The total number of requests completed with an unknown error. </dd> </dl> </dd> </dl> <p>Example:</p> <pre data-language="nginx">
{
  "resolver_zone1" : {
    "requests" : {
      "name" : 25460,
      "srv" : 130,
      "addr" : 2580
    },
    "responses" : {
      "noerror" : 26499,
      "formerr" : 0,
      "servfail" : 3,
      "nxdomain" : 0,
      "notimp" : 0,
      "refused" : 0,
      "timedout" : 243,
      "unknown" : 478
    }
  }
}</pre> </li> <li id="def_nginx_error"> <p>Error:</p> nginx error object.<dl class="compact"> <dt> <code>error</code>
</dt> <dd> <dl class="compact"> <dt> <code>status</code> (<code>integer</code>) </dt> <dd> HTTP error code. </dd> <dt> <code>text</code> (<code>string</code>) </dt> <dd> Error description. </dd> <dt> <code>code</code> (<code>string</code>) </dt> <dd> Internal nginx error code. </dd> </dl> </dd> <dt> <code>request_id</code> (<code>string</code>) </dt> <dd> The ID of the request, equals the value of the <a href="ngx_http_core_module.html#var_request_id">$request_id</a> variable. </dd> <dt> <code>href</code> (<code>string</code>) </dt> <dd> Link to reference documentation. </dd> </dl> </li> </ul>
<div class="_attribution">
  <p class="_attribution-p">
    &copy; 2002-2021 Igor Sysoev<br>&copy; 2011-2023 Nginx, Inc.<br>Licensed under the BSD License.<br>
    <a href="https://nginx.org/en/docs/http/ngx_http_api_module.html" class="_attribution-link">https://nginx.org/en/docs/http/ngx_http_api_module.html</a>
  </p>
</div>
