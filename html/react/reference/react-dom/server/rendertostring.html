<h1>renderToString
</h1>
<div class="note note-orange">
<h4>Pitfall</h4>
<div><p><code dir="ltr">renderToString</code> does not support streaming or waiting for data. <a href="#alternatives">See the alternatives.</a></p></div>
</div> <div>
<p><code dir="ltr">renderToString</code> renders a React tree to an HTML string.</p>
<pre data-language="jsx"><code><span>const</span> <span>html</span> = <span>renderToString</span><span>(</span><span>reactNode</span><span>,</span> <span>options</span>?<span>)</span></code></pre>
</div> <ul>
<li>
<a href="#reference">Reference </a><ul><li><a href="#rendertostring"><code dir="ltr">renderToString(reactNode, options?)</code> </a></li></ul>
</li>
<li>
<a href="#usage">Usage </a><ul><li><a href="#rendering-a-react-tree-as-html-to-a-string">Rendering a React tree as HTML to a string </a></li></ul>
</li>
<li>
<a href="#alternatives">Alternatives </a><ul>
<li><a href="#migrating-from-rendertostring-to-a-streaming-method-on-the-server">Migrating from <code dir="ltr">renderToString</code> to a streaming render on the server </a></li>
<li><a href="#migrating-from-rendertostring-to-a-static-prerender-on-the-server">Migrating from <code dir="ltr">renderToString</code> to a static prerender on the server </a></li>
<li><a href="#removing-rendertostring-from-the-client-code">Removing <code dir="ltr">renderToString</code> from the client code </a></li>
</ul>
</li>
<li>
<a href="#troubleshooting">Troubleshooting </a><ul><li><a href="#when-a-component-suspends-the-html-always-contains-a-fallback">When a component suspends, the HTML always contains a fallback </a></li></ul>
</li>
</ul> <hr> <h2 id="reference">Reference 
</h2> <h3 id="rendertostring">
<code dir="ltr">renderToString(reactNode, options?)</code> 
</h3> <p>On the server, call <code dir="ltr">renderToString</code> to render your app to HTML.</p> <pre data-language="jsx"><code><span>import</span> <span>{</span> <span>renderToString</span> <span>}</span> <span>from</span> <span>'react-dom/server'</span><span>;</span>

<span>const</span> <span>html</span> = <span>renderToString</span><span>(</span><span>&lt;</span><span>App</span> <span>/&gt;</span><span>)</span><span>;</span></code></pre> <p>On the client, call <a href="../client/hydrateroot.html"><code dir="ltr">hydrateRoot</code></a> to make the server-generated HTML interactive.</p> <p><a href="#usage">See more examples below.</a></p> <h4 id="parameters">Parameters 
</h4> <ul> <li> <p><code dir="ltr">reactNode</code>: A React node you want to render to HTML. For example, a JSX node like <code dir="ltr">&lt;App /&gt;</code>.</p> </li> <li> <p><strong>optional</strong> <code dir="ltr">options</code>: An object for server render.</p> <ul> <li>
<strong>optional</strong> <code dir="ltr">identifierPrefix</code>: A string prefix React uses for IDs generated by <a href="../../react/useid.html"><code dir="ltr">useId</code>.</a> Useful to avoid conflicts when using multiple roots on the same page. Must be the same prefix as passed to <a href="../client/hydrateroot.html#parameters"><code dir="ltr">hydrateRoot</code>.</a>
</li> </ul> </li> </ul> <h4 id="returns">Returns 
</h4> <p>An HTML string.</p> <h4 id="caveats">Caveats 
</h4> <ul> <li> <p><code dir="ltr">renderToString</code> has limited Suspense support. If a component suspends, <code dir="ltr">renderToString</code> immediately sends its fallback as HTML.</p> </li> <li> <p><code dir="ltr">renderToString</code> works in the browser, but using it in the client code is <a href="#removing-rendertostring-from-the-client-code">not recommended.</a></p> </li> </ul> <hr> <h2 id="usage">Usage 
</h2> <h3 id="rendering-a-react-tree-as-html-to-a-string">Rendering a React tree as HTML to a string 
</h3> <p>Call <code dir="ltr">renderToString</code> to render your app to an HTML string which you can send with your server response:</p> <pre data-language="jsx"><code><span>import</span> <span>{</span> <span>renderToString</span> <span>}</span> <span>from</span> <span>'react-dom/server'</span><span>;</span>

<span>// The route handler syntax depends on your backend framework</span>
<span>app</span>.<span>use</span><span>(</span><span>'/'</span><span>,</span> <span>(</span><span>request</span><span>,</span> <span>response</span><span>)</span> <span>=&gt;</span> <span>{</span>
  <span>const</span> <span>html</span> = <span>renderToString</span><span>(</span><span>&lt;</span><span>App</span> <span>/&gt;</span><span>)</span><span>;</span>
  <span>response</span>.<span>send</span><span>(</span><span>html</span><span>)</span><span>;</span>
<span>}</span><span>)</span><span>;</span></code></pre> <p>This will produce the initial non-interactive HTML output of your React components. On the client, you will need to call <a href="../client/hydrateroot.html"><code dir="ltr">hydrateRoot</code></a> to <em>hydrate</em> that server-generated HTML and make it interactive.</p> <div class="note note-orange">
<h4>Pitfall</h4>
<div><p><code dir="ltr">renderToString</code> does not support streaming or waiting for data. <a href="#alternatives">See the alternatives.</a></p></div>
</div> <hr> <h2 id="alternatives">Alternatives 
</h2> <h3 id="migrating-from-rendertostring-to-a-streaming-method-on-the-server">Migrating from <code dir="ltr">renderToString</code> to a streaming render on the server 
</h3> <p><code dir="ltr">renderToString</code> returns a string immediately, so it does not support streaming content as it loads.</p> <p>When possible, we recommend using these fully-featured alternatives:</p> <ul> <li>If you use Node.js, use <a href="rendertopipeablestream.html"><code dir="ltr">renderToPipeableStream</code>.</a>
</li> <li>If you use Deno or a modern edge runtime with <a href="https://developer.mozilla.org/en-US/docs/Web/API/Streams_API" target="_blank" rel="nofollow noopener noreferrer">Web Streams</a>, use <a href="rendertoreadablestream.html"><code dir="ltr">renderToReadableStream</code>.</a>
</li> </ul> <p>You can continue using <code dir="ltr">renderToString</code> if your server environment does not support streams.</p> <hr> <h3 id="migrating-from-rendertostring-to-a-static-prerender-on-the-server">Migrating from <code dir="ltr">renderToString</code> to a static prerender on the server 
</h3> <p><code dir="ltr">renderToString</code> returns a string immediately, so it does not support waiting for data to load for static HTML generation.</p> <p>We recommend using these fully-featured alternatives:</p> <ul> <li>If you use Node.js, use <a href="../static/prerendertonodestream.html"><code dir="ltr">prerenderToNodeStream</code>.</a>
</li> <li>If you use Deno or a modern edge runtime with <a href="https://developer.mozilla.org/en-US/docs/Web/API/Streams_API" target="_blank" rel="nofollow noopener noreferrer">Web Streams</a>, use <a href="../static/prerender.html"><code dir="ltr">prerender</code>.</a>
</li> </ul> <p>You can continue using <code dir="ltr">renderToString</code> if your static site generation environment does not support streams.</p> <hr> <h3 id="removing-rendertostring-from-the-client-code">Removing <code dir="ltr">renderToString</code> from the client code 
</h3> <p>Sometimes, <code dir="ltr">renderToString</code> is used on the client to convert some component to HTML.</p> <pre data-language="jsx"><code><span>// ðŸš© Unnecessary: using renderToString on the client</span>
<span>import</span> <span>{</span> <span>renderToString</span> <span>}</span> <span>from</span> <span>'react-dom/server'</span><span>;</span>

<span>const</span> <span>html</span> = <span>renderToString</span><span>(</span><span>&lt;</span><span>MyIcon</span> <span>/&gt;</span><span>)</span><span>;</span>
<span>console</span>.<span>log</span><span>(</span><span>html</span><span>)</span><span>;</span> <span>// For example, "&lt;svg&gt;...&lt;/svg&gt;"</span></code></pre> <p>Importing <code dir="ltr">react-dom/server</code> <strong>on the client</strong> unnecessarily increases your bundle size and should be avoided. If you need to render some component to HTML in the browser, use <a href="../client/createroot.html"><code dir="ltr">createRoot</code></a> and read HTML from the DOM:</p> <pre data-language="jsx"><code><span>import</span> <span>{</span> <span>createRoot</span> <span>}</span> <span>from</span> <span>'react-dom/client'</span><span>;</span>
<span>import</span> <span>{</span> <span>flushSync</span> <span>}</span> <span>from</span> <span>'react-dom'</span><span>;</span>

<span>const</span> <span>div</span> = <span>document</span>.<span>createElement</span><span>(</span><span>'div'</span><span>)</span><span>;</span>
<span>const</span> <span>root</span> = <span>createRoot</span><span>(</span><span>div</span><span>)</span><span>;</span>
<span>flushSync</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
  <span>root</span>.<span>render</span><span>(</span><span>&lt;</span><span>MyIcon</span> <span>/&gt;</span><span>)</span><span>;</span>
<span>}</span><span>)</span><span>;</span>
<span>console</span>.<span>log</span><span>(</span><span>div</span>.<span>innerHTML</span><span>)</span><span>;</span> <span>// For example, "&lt;svg&gt;...&lt;/svg&gt;"</span></code></pre> <p>The <a href="../flushsync.html"><code dir="ltr">flushSync</code></a> call is necessary so that the DOM is updated before reading its <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/innerHTML" target="_blank" rel="nofollow noopener noreferrer"><code dir="ltr">innerHTML</code></a> property.</p> <hr> <h2 id="troubleshooting">Troubleshooting 
</h2> <h3 id="when-a-component-suspends-the-html-always-contains-a-fallback">When a component suspends, the HTML always contains a fallback 
</h3> <p><code dir="ltr">renderToString</code> does not fully support Suspense.</p> <p>If some component suspends (for example, because itâ€™s defined with <a href="../../react/lazy.html"><code dir="ltr">lazy</code></a> or fetches data), <code dir="ltr">renderToString</code> will not wait for its content to resolve. Instead, <code dir="ltr">renderToString</code> will find the closest <a href="../../react/suspense.html"><code dir="ltr">&lt;Suspense&gt;</code></a> boundary above it and render its <code dir="ltr">fallback</code> prop in the HTML. The content will not appear until the client code loads.</p> <p>To solve this, use one of the <a href="#alternatives">recommended streaming solutions.</a> For server side rendering, they can stream content in chunks as it resolves on the server so that the user sees the page being progressively filled in before the client code loads. For static site generation, they can wait for all the content to resolve before generating the static HTML.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2013&ndash;present Facebook Inc.<br>Licensed under the Creative Commons Attribution 4.0 International Public License.<br>
    <a href="https://react.dev/reference/react-dom/server/renderToString" class="_attribution-link">https://react.dev/reference/react-dom/server/renderToString</a>
  </p>
</div>
