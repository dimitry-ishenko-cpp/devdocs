<h1 id="best-practice" tabindex="-1">Best Practice </h1>
<h3 id="destructuring" tabindex="-1">Destructuring </h3>
<p>Most of the functions in VueUse return an <strong>object of refs</strong> that you can use <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment" target="_blank" rel="noreferrer">ES6's object destructure</a> syntax on to take what you need. For example:</p>
<div class="language-ts">
<pre class="shiki vitesse-light vp-code-light" data-language="javascript">import { useMouse } from '@vueuse/core'

// "x" and "y" are refs
const { x, y } = useMouse()

console.log(x.value)

const mouse = useMouse()

console.log(mouse.x.value)</pre>
</div>
<p>If you prefer to use them as object properties style, you can unwrap the refs by using <code>reactive()</code>. For example:</p>
<div class="language-ts">
<pre class="shiki vitesse-light vp-code-light" data-language="javascript">import { reactive } from 'vue'
import { useMouse } from '@vueuse/core'

const mouse = reactive(useMouse())

// "x" and "y" will be auto unwrapped, no `.value` needed
console.log(mouse.x)</pre>
</div>
<h3 id="side-effect-clean-up" tabindex="-1">Side-effect Clean Up </h3>
<p>Similar to Vue's <code>watch</code> and <code>computed</code> that will be disposed when the component is unmounted, VueUse's functions also clean up the side-effects automatically.</p>
<p>For example, <a href="../core/useeventlistener/index.html"><code>useEventListener</code></a> will call <code>removeEventListener</code> when the component is unmounted so you don't need to worry about it.</p>
<div class="language-ts">
<pre class="shiki vitesse-light vp-code-light" data-language="javascript">// will cleanup automatically
useEventListener('mousemove', () =&gt; {})</pre>
</div>
<p>All VueUse functions follow this convention.</p>
<p>To manually dispose the side-effects, some function returns a stop handler just like the <code>watch</code> function. For example:</p>
<div class="language-ts">
<pre class="shiki vitesse-light vp-code-light" data-language="javascript">const stop = useEventListener('mousemove', () =&gt; {})

// ...

// unregister the event listener manually
stop()</pre>
</div>
<p>While not all function return the handler, a more general solution is to use the <a href="https://vuejs.org/api/reactivity-advanced.html#effectscope" target="_blank" rel="noreferrer"><code>effectScope</code> API</a> from Vue.</p>
<div class="language-ts">
<pre class="shiki vitesse-light vp-code-light" data-language="javascript">import { effectScope } from 'vue'

const scope = effectScope()

scope.run(() =&gt; {
  // ...

  useEventListener('mousemove', () =&gt; {})
  onClickOutside(el, () =&gt; {})
  watch(source, () =&gt; {})
})

// all composables called inside `scope.run` will be disposed
scope.stop()</pre>
</div>
<p>You can learn more about effect scope in <a href="https://github.com/vuejs/rfcs/blob/master/active-rfcs/0041-reactivity-effect-scope.md" target="_blank" rel="noreferrer">this RFC</a>.</p>
<h3 id="passing-ref-as-argument" tabindex="-1">Passing Ref as Argument </h3>
<p>In Vue, we use the <code>setup()</code> function to construct the "connections" between the data and logics. To make it flexible, most of the VueUse function also accepts ref version of the arguments.</p>
<p>Taking <a href="../core/usetitle/index.html"><code>useTitle</code></a> as an example:</p>
<h6 id="normal-usage" tabindex="-1">Normal usage </h6>
<p>Normally <a href="../core/usetitle/index.html"><code>useTitle</code></a> return a ref that reflects to the page's title. When you assign new value to the ref, it automatically updates the title.</p>
<div class="language-ts">
<pre class="shiki vitesse-light vp-code-light" data-language="javascript">const isDark = useDark()
const title = useTitle('Set title')

watch(isDark, () =&gt; {
  title.value = isDark.value ? 'üåô Good evening!' : '‚òÄÔ∏è Good morning!'
})</pre>
</div>
<h6 id="connection-usage" tabindex="-1">Connection usage </h6>
<p>If you think in "connection", you can instead passing a ref that make it bind to the page's title.</p>
<div class="language-ts">
<pre class="shiki vitesse-light vp-code-light" data-language="javascript">const isDark = useDark()
const title = computed(() =&gt; isDark.value ? 'üåô Good evening!' : '‚òÄÔ∏è Good morning!')

useTitle(title)</pre>
</div>
<h6 id="reactive-getter" tabindex="-1">Reactive Getter </h6>
<p>Since VueUse 9.0, we introduce a new convention for passing "Reactive Getter" as the argument. Which works great with reactive object and <a href="https://vuejs.org/guide/extras/reactivity-transform.html#reactivity-transform" target="_blank" rel="noreferrer">Reactivity Transform</a>.</p>
<div class="language-ts">
<pre class="shiki vitesse-light vp-code-light" data-language="javascript">const isDark = useDark()

useTitle(() =&gt; isDark.value ? 'üåô Good evening!' : '‚òÄÔ∏è Good morning!')</pre>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2019-present Anthony Fu<br>Licensed under the MIT License.<br>
    <a href="https://vueuse.org/guide/best-practice" class="_attribution-link">https://vueuse.org/guide/best-practice</a>
  </p>
</div>
