<h1>Trait yii\db\ActiveRelationTrait</h1> <div class="top-nav"> <a href="index.html">All Classes</a> | <a href="#properties">Properties</a> | <a href="#methods">Methods</a> </div> <table> <colgroup> <col class="col-name"> <col class="col-value"> </colgroup> <tr>
<th>Implemented by</th>
<td>
<a href="yii-db-activequery.html">yii\db\ActiveQuery</a>, <a href="yii-elasticsearch-activequery.html">yii\elasticsearch\ActiveQuery</a>, <a href="yii-mongodb-activequery.html">yii\mongodb\ActiveQuery</a>, <a href="yii-mongodb-file-activequery.html">yii\mongodb\file\ActiveQuery</a>, <a href="yii-redis-activequery.html">yii\redis\ActiveQuery</a>, <a href="yii-sphinx-activequery.html">yii\sphinx\ActiveQuery</a>
</td>
</tr> <tr>
<th>Available since version</th>
<td>2.0</td>
</tr> <tr> <th>Source Code</th> <td><a href="https://github.com/yiisoft/yii2/blob/master/framework/db/ActiveRelationTrait.php">https://github.com/yiisoft/yii2/blob/master/framework/db/ActiveRelationTrait.php</a></td> </tr> </table>  <p><strong>ActiveRelationTrait implements the common methods and properties for active record relational queries.</strong></p>    <h2 id="properties">Public Properties</h2>  <table> <colgroup> <col class="col-property"> <col class="col-type"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Property</th>
<th>Type</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="$inverseOf"> <td><a href="yii-db-activerelationtrait.html#%24inverseOf-detail">$inverseOf</a></td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>The name of the relation that is the inverse of this relation.</td> <td><a href="yii-db-activerelationtrait.html">yii\db\ActiveRelationTrait</a></td> </tr> <tr id="$link"> <td><a href="yii-db-activerelationtrait.html#%24link-detail">$link</a></td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>The columns of the primary and foreign tables that establish a relation.</td> <td><a href="yii-db-activerelationtrait.html">yii\db\ActiveRelationTrait</a></td> </tr> <tr id="$multiple"> <td><a href="yii-db-activerelationtrait.html#%24multiple-detail">$multiple</a></td> <td><a href="http://www.php.net/language.types.boolean">boolean</a></td> <td>Whether this query represents a relation to more than one record.</td> <td><a href="yii-db-activerelationtrait.html">yii\db\ActiveRelationTrait</a></td> </tr> <tr id="$primaryModel"> <td><a href="yii-db-activerelationtrait.html#%24primaryModel-detail">$primaryModel</a></td> <td><a href="yii-db-activerecord.html">yii\db\ActiveRecord</a></td> <td>The primary model of a relational query.</td> <td><a href="yii-db-activerelationtrait.html">yii\db\ActiveRelationTrait</a></td> </tr> <tr id="$via"> <td><a href="yii-db-activerelationtrait.html#%24via-detail">$via</a></td> <td>
<a href="http://www.php.net/language.types.array">array</a>|<a href="http://www.php.net/language.types.object">object</a>
</td> <td>The query associated with the junction table.</td> <td><a href="yii-db-activerelationtrait.html">yii\db\ActiveRelationTrait</a></td> </tr> </table>    <h2 id="methods">Public Methods</h2>  <table> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="__clone()"> <td><a href="yii-db-activerelationtrait.html#__clone()-detail">__clone()</a></td> <td>Clones internal objects.</td> <td><a href="yii-db-activerelationtrait.html">yii\db\ActiveRelationTrait</a></td> </tr> <tr id="findFor()"> <td><a href="yii-db-activerelationtrait.html#findFor()-detail">findFor()</a></td> <td>Finds the related records for the specified primary record.</td> <td><a href="yii-db-activerelationtrait.html">yii\db\ActiveRelationTrait</a></td> </tr> <tr id="inverseOf()"> <td><a href="yii-db-activerelationtrait.html#inverseOf()-detail">inverseOf()</a></td> <td>Sets the name of the relation that is the inverse of this relation.</td> <td><a href="yii-db-activerelationtrait.html">yii\db\ActiveRelationTrait</a></td> </tr> <tr id="populateRelation()"> <td><a href="yii-db-activerelationtrait.html#populateRelation()-detail">populateRelation()</a></td> <td>Finds the related records and populates them into the primary models.</td> <td><a href="yii-db-activerelationtrait.html">yii\db\ActiveRelationTrait</a></td> </tr> <tr id="via()"> <td><a href="yii-db-activerelationtrait.html#via()-detail">via()</a></td> <td>Specifies the relation associated with the junction table.</td> <td><a href="yii-db-activerelationtrait.html">yii\db\ActiveRelationTrait</a></td> </tr> </table>    <h2 id="constants">Property Details</h2>  <h3 id="$inverseOf-detail"> $inverseOf <span class="detail-header-tag small"> public property </span> </h3>  <p>The name of the relation that is the inverse of this relation. For example, an order has a customer, which means the inverse of the "customer" relation is the "orders", and the inverse of the "orders" relation is the "customer". If this property is set, the primary record(s) will be referenced through the specified relation. For example, <code>$customer-&gt;orders[0]-&gt;customer</code> and <code>$customer</code> will be the same object, and accessing the customer of an order will not trigger new DB query. This property is only used in relational context.</p> <p>See also <a href="yii-db-activerelationtrait.html#inverseOf()-detail">inverseOf()</a>.</p>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="http://www.php.net/language.types.string">string</a></span> <a href="yii-db-activerelationtrait.html#%24inverseOf-detail">$inverseOf</a> = null</pre> <h3 id="$link-detail"> $link <span class="detail-header-tag small"> public property </span> </h3>  <p>The columns of the primary and foreign tables that establish a relation. The array keys must be columns of the table for this relation, and the array values must be the corresponding columns from the primary table. Do not prefix or quote the column names as this will be done automatically by Yii. This property is only used in relational context.</p>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="http://www.php.net/language.types.array">array</a></span> <a href="yii-db-activerelationtrait.html#%24link-detail">$link</a> = null</pre> <h3 id="$multiple-detail"> $multiple <span class="detail-header-tag small"> public property </span> </h3>  <p>Whether this query represents a relation to more than one record. This property is only used in relational context. If true, this relation will populate all query results into AR instances using <a href="yii-db-query.html#all()-detail">all()</a>. If false, only the first row of the results will be retrieved using <a href="yii-db-query.html#one()-detail">one()</a>.</p>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="http://www.php.net/language.types.boolean">boolean</a></span> <a href="yii-db-activerelationtrait.html#%24multiple-detail">$multiple</a> = null</pre> <h3 id="$primaryModel-detail"> $primaryModel <span class="detail-header-tag small"> public property </span> </h3>  <p>The primary model of a relational query. This is used only in lazy loading with dynamic query options.</p>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="yii-db-activerecord.html">yii\db\ActiveRecord</a></span> <a href="yii-db-activerelationtrait.html#%24primaryModel-detail">$primaryModel</a> = null</pre> <h3 id="$via-detail"> $via <span class="detail-header-tag small"> public property </span> </h3>  <p>The query associated with the junction table. Please call <a href="yii-db-activerelationtrait.html#via()-detail">via()</a> to set this property instead of directly setting it. This property is only used in relational context.</p> <p>See also <a href="yii-db-activerelationtrait.html#via()-detail">via()</a>.</p>  <pre><span class="signature-defs">public</span> <span class="signature-type"><a href="http://www.php.net/language.types.array">array</a>|<a href="http://www.php.net/language.types.object">object</a></span> <a href="yii-db-activerelationtrait.html#%24via-detail">$via</a> = null</pre>  <h2>Method Details</h2> <div class="method-doc"> <h3 id="__clone()-detail"> __clone() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Clones internal objects.</strong></p>  <table> <tr><th colspan="3">public void <strong><a href="yii-db-activerelationtrait.html#__clone()-detail">__clone</a></strong> ( )</th></tr> </table>  <h3 id="findFor()-detail"> findFor() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Finds the related records for the specified primary record.</strong></p> <p>This method is invoked when a relation of an ActiveRecord is being accessed in a lazy fashion.</p>  <table> <tr><th colspan="3">public mixed <strong><a href="yii-db-activerelationtrait.html#findFor()-detail">findFor</a></strong> ( $name, $model )</th></tr> <tr> <td>$name</td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>
<p>The relation name</p> </td> </tr> <tr> <td>$model</td> <td>
<a href="yii-db-activerecordinterface.html">yii\db\ActiveRecordInterface</a>|<a href="yii-db-baseactiverecord.html">yii\db\BaseActiveRecord</a>
</td> <td>
<p>The primary model</p> </td> </tr> <tr> <td>return</td> <td>mixed</td> <td>
<p>The related record(s)</p> </td> </tr> <tr> <td>throws</td> <td><a href="yii-base-invalidparamexception.html">yii\base\InvalidParamException</a></td> <td>
<p>if the relation is invalid</p> </td> </tr> </table>  <h3 id="inverseOf()-detail"> inverseOf() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Sets the name of the relation that is the inverse of this relation.</strong></p> <p>For example, an order has a customer, which means the inverse of the "customer" relation is the "orders", and the inverse of the "orders" relation is the "customer". If this property is set, the primary record(s) will be referenced through the specified relation. For example, <code>$customer-&gt;orders[0]-&gt;customer</code> and <code>$customer</code> will be the same object, and accessing the customer of an order will not trigger a new DB query.</p> <p>Use this method when declaring a relation in the <a href="yii-db-activerecord.html">yii\db\ActiveRecord</a> class:</p> <pre data-language="php">public function getOrders()
{
    return $this-&gt;hasMany(Order::className(), ['customer_id' =&gt; 'id'])-&gt;inverseOf('customer');
}
</pre>  <table> <tr><th colspan="3">public <a href="yii-db-activerelationtrait.html">$this</a> <strong><a href="yii-db-activerelationtrait.html#inverseOf()-detail">inverseOf</a></strong> ( $relationName )</th></tr> <tr> <td>$relationName</td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>
<p>The name of the relation that is the inverse of this relation.</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-db-activerelationtrait.html">$this</a></td> <td>
<p>The relation object itself.</p> </td> </tr> </table>  <h3 id="populateRelation()-detail"> populateRelation() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Finds the related records and populates them into the primary models.</strong></p>  <table> <tr><th colspan="3">public <a href="http://www.php.net/language.types.array">array</a> <strong><a href="yii-db-activerelationtrait.html#populateRelation()-detail">populateRelation</a></strong> ( $name, <b>&amp;</b>$primaryModels )</th></tr> <tr> <td>$name</td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>
<p>The relation name</p> </td> </tr> <tr> <td>$primaryModels</td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>
<p>Primary models</p> </td> </tr> <tr> <td>return</td> <td><a href="http://www.php.net/language.types.array">array</a></td> <td>
<p>The related models</p> </td> </tr> <tr> <td>throws</td> <td><a href="yii-base-invalidconfigexception.html">yii\base\InvalidConfigException</a></td> <td>
<p>if <a href="yii-db-activerelationtrait.html#%24link-detail">$link</a> is invalid</p> </td> </tr> </table>  <h3 id="via()-detail"> via() <span class="detail-header-tag small"> public method </span> </h3>  <p><strong>Specifies the relation associated with the junction table.</strong></p> <p>Use this method to specify a pivot record/table when declaring a relation in the <a href="yii-db-activerecord.html">yii\db\ActiveRecord</a> class:</p> <pre data-language="php">class Order extends ActiveRecord
{
   public function getOrderItems() {
       return $this-&gt;hasMany(OrderItem::className(), ['order_id' =&gt; 'id']);
   }

   public function getItems() {
       return $this-&gt;hasMany(Item::className(), ['id' =&gt; 'item_id'])
                   -&gt;via('orderItems');
   }
}
</pre>  <table> <tr><th colspan="3">public <a href="yii-db-activerelationtrait.html">$this</a> <strong><a href="yii-db-activerelationtrait.html#via()-detail">via</a></strong> ( $relationName, <a href="http://www.php.net/language.types.callable">callable</a> $callable = null )</th></tr> <tr> <td>$relationName</td> <td><a href="http://www.php.net/language.types.string">string</a></td> <td>
<p>The relation name. This refers to a relation declared in <a href="yii-db-activerelationtrait.html#%24primaryModel-detail">$primaryModel</a>.</p> </td> </tr> <tr> <td>$callable</td> <td><a href="http://www.php.net/language.types.callable">callable</a></td> <td>
<p>A PHP callback for customizing the relation associated with the junction table. Its signature should be <code>function($query)</code>, where <code>$query</code> is the query to be customized.</p> </td> </tr> <tr> <td>return</td> <td><a href="yii-db-activerelationtrait.html">$this</a></td> <td>
<p>The relation object itself.</p> </td> </tr> </table>  </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2008&ndash;2017 by Yii Software LLC<br>Licensed under the three clause BSD license.<br>
    <a href="http://www.yiiframework.com/doc-2.0/yii-db-activerelationtrait.html" class="_attribution-link">http://www.yiiframework.com/doc-2.0/yii-db-activerelationtrait.html</a>
  </p>
</div>
