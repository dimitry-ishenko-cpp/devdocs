<h1> Testing Application </h1>  <div id="ember364856" class="ember-view">
<p>To create an application test, run <code>ember generate acceptance-test &lt;name&gt;</code>. For example:</p> <pre><code class="bash language-bash">ember g acceptance-test login
</code></pre> <p>This generates this file:</p> <pre><code class="javascript language-javascript" data-filename="tests/acceptance/login-test.js">import { module, test } from 'qunit';
import { visit, currentURL } from '@ember/test-helpers';
import { setupApplicationTest } from 'ember-qunit';

module('Acceptance | login', function(hooks) {
  setupApplicationTest(hooks);

  test('visiting /login', async function(assert) {
    await visit('/login');
    assert.equal(currentURL(), '/login');
  });
});
</code></pre> <p><code>module</code> allows you to scope your tests: Any test setup that is done inside of this scope will apply to all test cases contained in this module. Scoping your tests with <code>module</code> also allows you to execute your tests independently from other tests. For example, to only run your tests from your <code>login</code> module, run <code>ember test --module='Acceptance | login'</code>. <code>setupApplicationTest</code> deals with application setup and teardown. The <code>test</code> function contains an example test.</p> <p>Almost every test has a pattern of visiting a route, interacting with the page (using the helpers), and checking for expected changes in the DOM.</p> <p>For example:</p> <pre><code class="javascript language-javascript" data-filename="tests/acceptance/new-post-appears-first-test.js">import { module, test } from 'qunit';
import { click, fillIn, visit } from '@ember/test-helpers';
import { setupApplicationTest } from 'ember-qunit';

module('Acceptance | posts', function(hooks) {
  setupApplicationTest(hooks);

  test('should add new post', async function(assert) {
    await visit('/posts/new');
    await fillIn('[data-test-field="Title"]', 'My new post');
    await click('[data-test-button="Save"]');
    assert
      .dom('[data-test-post-title]')
      .hasText('My new post', 'The user sees the correct title.');
  });
});
</code></pre> <h2 id="toc_test-helpers">Test Helpers</h2> <section aria-labelledby="toc_test-helpers"> <p>One of the major issues in testing web applications is that all code is event-driven and therefore has the potential to be asynchronous (i.e. output can happen out of sequence from input). This has the ramification that code can be executed in any order.</p> <p>An example may help here: Let's say a user clicks two buttons, one after another and both load data from different servers. They take different times to respond.</p> <p>When writing your tests, you need to be keenly aware of the fact that you cannot be sure that the response will return immediately after you make your requests, therefore your assertion code (the "tester") needs to wait for the thing being tested (the "testee") to be in a synchronized state. In the example above, that would be when both servers have responded and the test code can go about its business checking the data (whether it is mock data, or real data).</p> <p>This is why all Ember's test helpers are wrapped in code that ensures Ember is back in a synchronized state when it makes its assertions. It saves you from having to wrap everything in code that does that, and it makes it easier to read your tests because there's less boilerplate in them.</p> <p>Ember includes several helpers to facilitate application testing. There are two types of helpers: <strong>asynchronous</strong> and <strong>synchronous</strong>.</p> </section> <h3 id="toc_asynchronous-helpers">Asynchronous Helpers</h3> <section aria-labelledby="toc_asynchronous-helpers"> <p>Asynchronous helpers are "aware" of (and wait for) asynchronous behavior within your application, making it much easier to write deterministic tests.</p> <p>Some of these handy helpers are:</p> <ul> <li><a href="https://github.com/emberjs/ember-test-helpers/blob/master/API.md#click"><code>click(selector)</code></a></li> <li>Clicks an element and triggers any actions triggered by the element's <code>click</code> event and returns a promise that fulfills when all resulting async behavior is complete.</li> <li><a href="https://github.com/emberjs/ember-test-helpers/blob/master/API.md#fillin"><code>fillIn(selector, value)</code></a></li> <li>Fills in the selected input with the given value and returns a promise that fulfills when all resulting async behavior is complete. Works with <code>&lt;select&gt;</code> elements as well as <code>&lt;input&gt;</code> elements. Keep in mind that with <code>&lt;select&gt;</code> elements, <code>value</code> must be set to the <em>value</em> of the <code>&lt;option&gt;</code> tag, rather than its <em>content</em> (for example, <code>true</code> rather than <code>"Yes"</code>).</li> <li><a href="https://github.com/emberjs/ember-test-helpers/blob/master/API.md#triggerkeyevent"><code>triggerKeyEvent(selector, type, keyCode)</code></a></li> <li>Simulates a key event type, e.g. <code>keypress</code>, <code>keydown</code>, <code>keyup</code> with the desired keyCode on element found by the selector.</li> <li><a href="https://github.com/emberjs/ember-test-helpers/blob/master/API.md#triggerevent"><code>triggerEvent(selector, type, options)</code></a></li> <li>Triggers the given event, e.g. <code>blur</code>, <code>dblclick</code> on the element identified by the provided selector.</li> <li><a href="https://github.com/emberjs/ember-test-helpers/blob/master/API.md#visit"><code>visit(url)</code></a></li> <li>Visits the given route and returns a promise that fulfills when all resulting async behavior is complete.</li> </ul> <p>You can find the full list of helpers in the <a href="https://github.com/emberjs/ember-test-helpers/blob/master/API.md">API Documentation of ember-test-helpers</a>.</p> <p>The asynchronous test helpers from <code>@ember/test-helpers</code> are meant to be used together with the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await">ES2017 feature async/await</a> to write easy-to-read tests which deal with asynchronous behavior as follows:</p> <p>Mark the callback passed to the <code>test</code> function as asynchronous using the <code>async</code> keyword:</p> <pre><code class="javascript language-javascript" data-filename="tests/acceptance/new-post-appears-first-test.js">  test('should add new post', async function(assert) {

  });
</code></pre> <p>Before making an assertion, wait for the execution of each asynchronous helper to finish with the <code>await</code> keyword:</p> <pre><code class="javascript language-javascript" data-filename="tests/acceptance/new-post-appears-first-test.js">  test('should add new post', async function(assert) {
    await visit('/posts/new');
    await fillIn('[data-test-field="Title"]', 'My new post');
    await click('[data-test-button="Save"]');
    assert.dom('[data-test-post-title]').hasText('My new post');
  });
</code></pre> <p>Once we <code>await</code> the execution of the asynchronous helpers this way, we will ensure that all subsequent assertions are always made <strong>after</strong> the previous steps in the test have completed.</p> </section> <h3 id="toc_synchronous-helpers">Synchronous Helpers</h3> <section aria-labelledby="toc_synchronous-helpers"> <p>Synchronous helpers are performed immediately when triggered.</p> <ul> <li>
<a href="https://github.com/emberjs/ember-test-helpers/blob/master/API.md#currentroutename"><code>currentRouteName()</code></a>: returns the currently active route name.</li> <li>
<a href="https://github.com/emberjs/ember-test-helpers/blob/master/API.md#currenturl"><code>currentURL()</code></a>: returns the current URL.</li> <li>
<a href="https://github.com/emberjs/ember-test-helpers/blob/master/API.md#find"><code>find(selector)</code></a>: finds one element within the app's root element that matches the given selector. Scoping to the root element is useful to avoid conflicts with the test framework's reporter.</li> <li>
<a href="https://github.com/emberjs/ember-test-helpers/blob/master/API.md#findall"><code>findAll(selector)</code></a>: like <code>find(selector)</code>, but finds all elements that match the given selector. Equivalent to calling querySelectorAll() on the test root element. Returns an array of matched elements.</li> </ul> </section> <h2 id="toc_debugging-your-tests">Debugging Your Tests</h2> <section aria-labelledby="toc_debugging-your-tests"> <p>During the development of your tests or when you refactor your application's code, the execution of your tests may fail. In order to help you understand why, <a href="https://github.com/emberjs/ember-test-helpers/blob/master/API.md#pausetest"><code>pauseTest()</code></a> and <a href="https://github.com/emberjs/ember-test-helpers/blob/master/API.md#resumetest"><code>resumeTest()</code></a> can help you.</p> <p>To try them out, do the following steps:</p> <ol> <li>Add <code>await pauseTest();</code> in your test code.</li> <li>Run <code>ember server</code>.</li> <li>Visit <code>http://localhost:4200/tests</code> in your browser</li> </ol> <p>When the execution of the test come upon <code>await pauseTest()</code>, the test will be paused, allowing you to inspect the state of your application.</p> <p>You can now type <code>resumeTest()</code> in the console of your browser to continue the test execution.</p> </section> </div> <div class="_attribution">
  <p class="_attribution-p">
    &copy; 2022 Yehuda Katz, Tom Dale and Ember.js contributors<br>Licensed under the MIT License.<br>
    <a href="https://guides.emberjs.com/v4.9.0/testing/testing-application" class="_attribution-link">https://guides.emberjs.com/v4.9.0/testing/testing-application</a>
  </p>
</div>
