<article class="chapter">  <h1 class="module-name">Class RESTSerializer</h1> <span class="access">public</span> <table> <tr> <th>Extends:</th> <td> <a href="../jsonserializer.html"> JSONSerializer </a> </td> </tr>  <tr> <th>Defined in:</th> <td> <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/rest.js#L18" target="_blank" rel="noopener noreferrer">../packages/serializer/addon/rest.js:18</a> </td> </tr> <tr> <th>Module:</th> <td> <a href="../../modules/@ember-data/serializer/rest.html"> @ember-data/serializer/rest </a> </td> </tr>  </table>            <h3 role="link" id="extractAttributes">  <span class="method-name">extractAttributes</span> <span class="args"> (modelClass, resourceHash) </span> <span class="return-type">Object</span> <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Inherited from <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/json.js#L634" target="_blank" rel="noopener noreferrer"> JSONSerializer ../packages/serializer/addon/json.js:634 </a> </p>  <dl class="parameters">  <dt>modelClass</dt> <dd class="parameter-type">Object</dd>     <dt>resourceHash</dt> <dd class="parameter-type">Object</dd>     <dt>returns</dt> <dd class="return-type">Object</dd>   </dl> <p>Returns the resource's attributes formatted as a JSON-API "attributes object".</p> <p><a href="http://jsonapi.org/format/#document-resource-object-attributes">http://jsonapi.org/format/#document-resource-object-attributes</a></p>   <h3 role="link" id="extractErrors">  <span class="method-name">extractErrors</span> <span class="args"> (store, typeClass, payload, id) </span> <span class="return-type">Object</span> <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Inherited from <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/json.js#L1383" target="_blank" rel="noopener noreferrer"> JSONSerializer ../packages/serializer/addon/json.js:1383 </a> </p>  <dl class="parameters">  <dt>store</dt> <dd class="parameter-type">Store</dd>     <dt>typeClass</dt> <dd class="parameter-type">Model</dd>     <dt>payload</dt> <dd class="parameter-type">Object</dd>     <dt>id</dt> <dd class="parameter-type">(String|Number)</dd>     <dt>returns</dt> <dd class="return-type">Object</dd> <dd>json The deserialized errors</dd>  </dl> <p><code>extractErrors</code> is used to extract model errors when a call to <code>Model#save</code> fails with an <code>InvalidError</code>. By default Ember Data expects error information to be located on the <code>errors</code> property of the payload object.</p> <p>This serializer expects this <code>errors</code> object to be an Array similar to the following, compliant with the <a href="https://jsonapi.org/format/#errors">https://jsonapi.org/format/#errors</a> specification:</p> <pre class="highlight javascript" data-language="javascript">{
  "errors": [
    {
      "detail": "This username is already taken!",
      "source": {
        "pointer": "data/attributes/username"
      }
    }, {
      "detail": "Doesn't look like a valid email.",
      "source": {
        "pointer": "data/attributes/email"
      }
    }
  ]
}</pre> <p>The key <code>detail</code> provides a textual description of the problem. Alternatively, the key <code>title</code> can be used for the same purpose.</p> <p>The nested keys <code>source.pointer</code> detail which specific element of the request data was invalid.</p> <p>Note that JSON-API also allows for object-level errors to be placed in an object with pointer <code>data</code>, signifying that the problem cannot be traced to a specific attribute:</p> <pre class="highlight javascript" data-language="javascript">{
  "errors": [
    {
      "detail": "Some generic non property error message",
      "source": {
        "pointer": "data"
      }
    }
  ]
}</pre> <p>When turn into a <code>Errors</code> object, you can read these errors through the property <code>base</code>:</p> <pre class="highlight handlebars" data-language="html">{{#each @model.errors.base as |error|}}
  &lt;div class="error"&gt;
    {{error.message}}
  &lt;/div&gt;
{{/each}}</pre> <p>Example of alternative implementation, overriding the default behavior to deal with a different format of errors:</p> <div class="pre-title"><code>app/serializers/post.js</code></div>
<pre class="highlight javascript" data-language="javascript">import JSONSerializer from '@ember-data/serializer/json';

export default class PostSerializer extends JSONSerializer {
  extractErrors(store, typeClass, payload, id) {
    if (payload &amp;&amp; typeof payload === 'object' &amp;&amp; payload._problems) {
      payload = payload._problems;
      this.normalizeErrors(typeClass, payload);
    }
    return payload;
  }
}</pre>   <h3 role="link" id="extractId">  <span class="method-name">extractId</span> <span class="args"> (modelClass, resourceHash) </span> <span class="return-type">String</span> <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Inherited from <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/json.js#L619" target="_blank" rel="noopener noreferrer"> JSONSerializer ../packages/serializer/addon/json.js:619 </a> </p>  <dl class="parameters">  <dt>modelClass</dt> <dd class="parameter-type">Object</dd>     <dt>resourceHash</dt> <dd class="parameter-type">Object</dd>     <dt>returns</dt> <dd class="return-type">String</dd>   </dl> <p>Returns the resource's ID.</p>   <h3 role="link" id="extractMeta">  <span class="method-name">extractMeta</span> <span class="args"> (store, modelClass, payload) </span>  <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Inherited from <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/json.js#L1348" target="_blank" rel="noopener noreferrer"> JSONSerializer ../packages/serializer/addon/json.js:1348 </a> </p>  <dl class="parameters">  <dt>store</dt> <dd class="parameter-type">Store</dd>     <dt>modelClass</dt> <dd class="parameter-type">Model</dd>     <dt>payload</dt> <dd class="parameter-type">Object</dd>     </dl> <p><code>extractMeta</code> is used to deserialize any meta information in the adapter payload. By default Ember Data expects meta information to be located on the <code>meta</code> property of the payload object.</p> <p>Example</p> <div class="pre-title"><code>app/serializers/post.js</code></div>
<pre class="highlight javascript" data-language="javascript">import JSONSerializer from '@ember-data/serializer/json';

export default class PostSerializer extends JSONSerializer {
  extractMeta(store, typeClass, payload) {
    if (payload &amp;&amp; payload.hasOwnProperty('_pagination')) {
      let meta = payload._pagination;
      delete payload._pagination;
      return meta;
    }
  }
}</pre>   <h3 role="link" id="extractPolymorphicRelationship">  <span class="method-name">extractPolymorphicRelationship</span> <span class="args"> (relationshipType, relationshipHash, relationshipOptions) </span> <span class="return-type">Object</span> <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Defined in <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/rest.js#L744" target="_blank" rel="noopener noreferrer"> ../packages/serializer/addon/rest.js:744 </a> </p>  <dl class="parameters">  <dt>relationshipType</dt> <dd class="parameter-type">Object</dd>     <dt>relationshipHash</dt> <dd class="parameter-type">Object</dd>     <dt>relationshipOptions</dt> <dd class="parameter-type">Object</dd>     <dt>returns</dt> <dd class="return-type">Object</dd>   </dl> <p>You can use this method to customize how a polymorphic relationship should be extracted.</p>   <h3 role="link" id="extractRelationship">  <span class="method-name">extractRelationship</span> <span class="args"> (relationshipModelName, relationshipHash) </span> <span class="return-type">Object</span> <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Inherited from <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/json.js#L659" target="_blank" rel="noopener noreferrer"> JSONSerializer ../packages/serializer/addon/json.js:659 </a> </p>  <dl class="parameters">  <dt>relationshipModelName</dt> <dd class="parameter-type">Object</dd>     <dt>relationshipHash</dt> <dd class="parameter-type">Object</dd>     <dt>returns</dt> <dd class="return-type">Object</dd>   </dl> <p>Returns a relationship formatted as a JSON-API "relationship object".</p> <p><a href="http://jsonapi.org/format/#document-resource-object-relationships">http://jsonapi.org/format/#document-resource-object-relationships</a></p>   <h3 role="link" id="extractRelationships">  <span class="method-name">extractRelationships</span> <span class="args"> (modelClass, resourceHash) </span> <span class="return-type">Object</span> <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Inherited from <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/json.js#L718" target="_blank" rel="noopener noreferrer"> JSONSerializer ../packages/serializer/addon/json.js:718 </a> </p>  <dl class="parameters">  <dt>modelClass</dt> <dd class="parameter-type">Object</dd>     <dt>resourceHash</dt> <dd class="parameter-type">Object</dd>     <dt>returns</dt> <dd class="return-type">Object</dd>   </dl> <p>Returns the resource's relationships formatted as a JSON-API "relationships object".</p> <p><a href="http://jsonapi.org/format/#document-resource-object-relationships">http://jsonapi.org/format/#document-resource-object-relationships</a></p>   <h3 role="link" id="keyForAttribute">  <span class="method-name">keyForAttribute</span> <span class="args"> (key, method) </span> <span class="return-type">String</span> <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Inherited from <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/json.js#L1518" target="_blank" rel="noopener noreferrer"> JSONSerializer ../packages/serializer/addon/json.js:1518 </a> </p>  <dl class="parameters">  <dt>key</dt> <dd class="parameter-type">String</dd>     <dt>method</dt> <dd class="parameter-type">String</dd>     <dt>returns</dt> <dd class="return-type">String</dd> <dd>normalized key</dd>  </dl> <p><code>keyForAttribute</code> can be used to define rules for how to convert an attribute name in your model to a key in your JSON.</p> <p>Example</p> <div class="pre-title"><code>app/serializers/application.js</code></div>
<pre class="highlight javascript" data-language="javascript">import JSONSerializer from '@ember-data/serializer/json';
import { underscore } from '&lt;app-name&gt;/utils/string-utils';

export default class ApplicationSerializer extends JSONSerializer {
  keyForAttribute(attr, method) {
    return underscore(attr).toUpperCase();
  }
}</pre>   <h3 role="link" id="keyForLink">  <span class="method-name">keyForLink</span> <span class="args"> (key, kind) </span> <span class="return-type">String</span> <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Inherited from <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/json.js#L1574" target="_blank" rel="noopener noreferrer"> JSONSerializer ../packages/serializer/addon/json.js:1574 </a> </p>  <dl class="parameters">  <dt>key</dt> <dd class="parameter-type">String</dd>     <dt>kind</dt> <dd class="parameter-type">String</dd> <dd>`belongsTo` or `hasMany`</dd>    <dt>returns</dt> <dd class="return-type">String</dd> <dd>normalized key</dd>  </dl> <p><code>keyForLink</code> can be used to define a custom key when deserializing link properties.</p>   <h3 role="link" id="keyForPolymorphicType">  <span class="method-name">keyForPolymorphicType</span> <span class="args"> (key, typeClass, method) </span> <span class="return-type">String</span> <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Defined in <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/rest.js#L63" target="_blank" rel="noopener noreferrer"> ../packages/serializer/addon/rest.js:63 </a> </p>  <dl class="parameters">  <dt>key</dt> <dd class="parameter-type">String</dd>     <dt>typeClass</dt> <dd class="parameter-type">String</dd>     <dt>method</dt> <dd class="parameter-type">String</dd>     <dt>returns</dt> <dd class="return-type">String</dd> <dd>normalized key</dd>  </dl> <p><code>keyForPolymorphicType</code> can be used to define a custom key when serializing and deserializing a polymorphic type. By default, the returned key is <code>${key}Type</code>.</p> <p>Example</p> <div class="pre-title"><code>app/serializers/post.js</code></div>
<pre class="highlight javascript" data-language="javascript"> import RESTSerializer from '@ember-data/serializer/rest';

 export default class ApplicationSerializer extends RESTSerializer {
   keyForPolymorphicType(key, relationship) {
     let relationshipKey = this.keyForRelationship(key);

     return 'type-' + relationshipKey;
   }
 }</pre>   <h3 role="link" id="keyForRelationship">  <span class="method-name">keyForRelationship</span> <span class="args"> (key, typeClass, method) </span> <span class="return-type">String</span> <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Inherited from <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/json.js#L1545" target="_blank" rel="noopener noreferrer"> JSONSerializer ../packages/serializer/addon/json.js:1545 </a> </p>  <dl class="parameters">  <dt>key</dt> <dd class="parameter-type">String</dd>     <dt>typeClass</dt> <dd class="parameter-type">String</dd>     <dt>method</dt> <dd class="parameter-type">String</dd>     <dt>returns</dt> <dd class="return-type">String</dd> <dd>normalized key</dd>  </dl> <p><code>keyForRelationship</code> can be used to define a custom key when serializing and deserializing relationship properties. By default <code>JSONSerializer</code> does not provide an implementation of this method.</p> <p>Example</p> <div class="pre-title"><code>app/serializers/post.js</code></div>
<pre class="highlight javascript" data-language="javascript">  import JSONSerializer from '@ember-data/serializer/json';
  import { underscore } from '&lt;app-name&gt;/utils/string-utils';

  export default class PostSerializer extends JSONSerializer {
    keyForRelationship(key, relationship, method) {
      return `rel_${underscore(key)}`;
    }
  }</pre>   <h3 role="link" id="modelNameFromPayloadKey">  <span class="method-name">modelNameFromPayloadKey</span> <span class="args"> (key) </span> <span class="return-type">String</span> <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Defined in <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/rest.js#L417" target="_blank" rel="noopener noreferrer"> ../packages/serializer/addon/rest.js:417 </a> </p>  <dl class="parameters">  <dt>key</dt> <dd class="parameter-type">String</dd>     <dt>returns</dt> <dd class="return-type">String</dd> <dd>the model's modelName</dd>  </dl> <p>This method is used to convert each JSON root key in the payload into a modelName that it can use to look up the appropriate model for that part of the payload.</p> <p>For example, your server may send a model name that does not correspond with the name of the model in your app. Let's take a look at an example model, and an example payload:</p> <div class="pre-title"><code>app/models/post.js</code></div>
<pre class="highlight javascript" data-language="javascript">import Model from '@ember-data/model';

export default class Post extends Model {}</pre> <pre class="highlight javascript" data-language="javascript">  {
    "blog/post": {
      "id": "1
    }
  }</pre> <p>Ember Data is going to normalize the payload's root key for the modelName. As a result, it will try to look up the "blog/post" model. Since we don't have a model called "blog/post" (or a file called app/models/blog/post.js in ember-cli), Ember Data will throw an error because it cannot find the "blog/post" model.</p> <p>Since we want to remove this namespace, we can define a serializer for the application that will remove "blog/" from the payload key whenver it's encountered by Ember Data:</p> <div class="pre-title"><code>app/serializers/application.js</code></div>
<pre class="highlight javascript" data-language="javascript">import RESTSerializer from '@ember-data/serializer/rest';

export default class ApplicationSerializer extends RESTSerializer {
  modelNameFromPayloadKey(payloadKey) {
    if (payloadKey === 'blog/post') {
      return super.modelNameFromPayloadKey(payloadKey.replace('blog/', ''));
    } else {
     return super.modelNameFromPayloadKey(payloadKey);
    }
  }
}</pre> <p>After refreshing, Ember Data will appropriately look up the "post" model.</p> <p>By default the modelName for a model is its name in dasherized form. This means that a payload key like "blogPost" would be normalized to "blog-post" when Ember Data looks up the model. Usually, Ember Data can use the correct inflection to do this for you. Most of the time, you won't need to override <code>modelNameFromPayloadKey</code> for this purpose.</p>   <h3 role="link" id="normalize">  <span class="method-name">normalize</span> <span class="args"> (modelClass, resourceHash, prop) </span> <span class="return-type">Object</span> <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Defined in <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/rest.js#L95" target="_blank" rel="noopener noreferrer"> ../packages/serializer/addon/rest.js:95 </a> </p>  <dl class="parameters">  <dt>modelClass</dt> <dd class="parameter-type">Model</dd>     <dt>resourceHash</dt> <dd class="parameter-type">Object</dd>     <dt>prop</dt> <dd class="parameter-type">String</dd>     <dt>returns</dt> <dd class="return-type">Object</dd>   </dl> <p>Normalizes a part of the JSON payload returned by the server. You should override this method, munge the hash and call super if you have generic normalization to do.</p> <p>It takes the type of the record that is being normalized (as a Model class), the property where the hash was originally found, and the hash to normalize.</p> <p>For example, if you have a payload that looks like this:</p> <pre class="highlight javascript" data-language="javascript">{
  "post": {
    "id": 1,
    "title": "Rails is omakase",
    "comments": [ 1, 2 ]
  },
  "comments": [{
    "id": 1,
    "body": "FIRST"
  }, {
    "id": 2,
    "body": "Rails is unagi"
  }]
}</pre> <p>The <code>normalize</code> method will be called three times:</p> <ul> <li>With <code>App.Post</code>, <code>"posts"</code> and <code>{ id: 1, title: "Rails is omakase", ... }</code>
</li> <li>With <code>App.Comment</code>, <code>"comments"</code> and <code>{ id: 1, body: "FIRST" }</code>
</li> <li>With <code>App.Comment</code>, <code>"comments"</code> and <code>{ id: 2, body: "Rails is unagi" }</code>
</li> </ul> <p>You can use this method, for example, to normalize underscored keys to camelized or other general-purpose normalizations. You will only need to implement <code>normalize</code> and manipulate the payload as desired.</p> <p>For example, if the <code>IDs</code> under <code>"comments"</code> are provided as <code>_id</code> instead of <code>id</code>, you can specify how to normalize just the comments:</p> <div class="pre-title"><code>app/serializers/post.js</code></div>
<pre class="highlight javascript" data-language="javascript">import RESTSerializer from '@ember-data/serializer/rest';

export default class ApplicationSerializer extends RESTSerializer {
  normalize(model, hash, prop) {
    if (prop === 'comments') {
      hash.id = hash._id;
      delete hash._id;
    }

    return super.normalize(...arguments);
  }
}</pre> <p>On each call to the <code>normalize</code> method, the third parameter (<code>prop</code>) is always one of the keys that were in the original payload or in the result of another normalization as <code>normalizeResponse</code>.</p>   <h3 role="link" id="normalize">  <span class="method-name">normalize</span> <span class="args"> (typeClass, hash) </span> <span class="return-type">Object</span> <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Inherited from <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/index.ts#L229" target="_blank" rel="noopener noreferrer"> Serializer ../packages/serializer/addon/index.ts:229 </a> </p>  <dl class="parameters">  <dt>typeClass</dt> <dd class="parameter-type">Model</dd>     <dt>hash</dt> <dd class="parameter-type">Object</dd>     <dt>returns</dt> <dd class="return-type">Object</dd>   </dl> <p>The <code>normalize</code> method is used to convert a payload received from your external data source into the normalized form <code>store.push()</code> expects. You should override this method, munge the hash and return the normalized payload.</p> <p>Example:</p> <pre class="highlight javascript" data-language="javascript">Serializer.extend({
  normalize(modelClass, resourceHash) {
    let data = {
      id:            resourceHash.id,
      type:          modelClass.modelName,
      attributes:    resourceHash
    };
    return { data: data };
  }
})</pre>   <h3 role="link" id="normalizeArrayResponse">  <span class="method-name">normalizeArrayResponse</span> <span class="args"> (store, primaryModelClass, payload, id, requestType) </span> <span class="return-type">Object</span> <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Inherited from <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/json.js#L488" target="_blank" rel="noopener noreferrer"> JSONSerializer ../packages/serializer/addon/json.js:488 </a> </p> <p class="field-since"> Available since v1.13.0 </p>  <dl class="parameters">  <dt>store</dt> <dd class="parameter-type">Store</dd>     <dt>primaryModelClass</dt> <dd class="parameter-type">Model</dd>     <dt>payload</dt> <dd class="parameter-type">Object</dd>     <dt>id</dt> <dd class="parameter-type">String|Number</dd>     <dt>requestType</dt> <dd class="parameter-type">String</dd>     <dt>returns</dt> <dd class="return-type">Object</dd> <dd>JSON-API Document</dd>  </dl> <p>normalizeQueryResponse, normalizeFindManyResponse, and normalizeFindHasManyResponse delegate to this method by default.</p>   <h3 role="link" id="normalizeCreateRecordResponse">  <span class="method-name">normalizeCreateRecordResponse</span> <span class="args"> (store, primaryModelClass, payload, id, requestType) </span> <span class="return-type">Object</span> <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Inherited from <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/json.js#L398" target="_blank" rel="noopener noreferrer"> JSONSerializer ../packages/serializer/addon/json.js:398 </a> </p> <p class="field-since"> Available since v1.13.0 </p>  <dl class="parameters">  <dt>store</dt> <dd class="parameter-type">Store</dd>     <dt>primaryModelClass</dt> <dd class="parameter-type">Model</dd>     <dt>payload</dt> <dd class="parameter-type">Object</dd>     <dt>id</dt> <dd class="parameter-type">String|Number</dd>     <dt>requestType</dt> <dd class="parameter-type">String</dd>     <dt>returns</dt> <dd class="return-type">Object</dd> <dd>JSON-API Document</dd>  </dl> <p>Called by the default normalizeResponse implementation when the type of request is <code>createRecord</code></p>   <h3 role="link" id="normalizeDeleteRecordResponse">  <span class="method-name">normalizeDeleteRecordResponse</span> <span class="args"> (store, primaryModelClass, payload, id, requestType) </span> <span class="return-type">Object</span> <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Inherited from <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/json.js#L416" target="_blank" rel="noopener noreferrer"> JSONSerializer ../packages/serializer/addon/json.js:416 </a> </p> <p class="field-since"> Available since v1.13.0 </p>  <dl class="parameters">  <dt>store</dt> <dd class="parameter-type">Store</dd>     <dt>primaryModelClass</dt> <dd class="parameter-type">Model</dd>     <dt>payload</dt> <dd class="parameter-type">Object</dd>     <dt>id</dt> <dd class="parameter-type">String|Number</dd>     <dt>requestType</dt> <dd class="parameter-type">String</dd>     <dt>returns</dt> <dd class="return-type">Object</dd> <dd>JSON-API Document</dd>  </dl> <p>Called by the default normalizeResponse implementation when the type of request is <code>deleteRecord</code></p>   <h3 role="link" id="normalizeFindAllResponse">  <span class="method-name">normalizeFindAllResponse</span> <span class="args"> (store, primaryModelClass, payload, id, requestType) </span> <span class="return-type">Object</span> <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Inherited from <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/json.js#L308" target="_blank" rel="noopener noreferrer"> JSONSerializer ../packages/serializer/addon/json.js:308 </a> </p> <p class="field-since"> Available since v1.13.0 </p>  <dl class="parameters">  <dt>store</dt> <dd class="parameter-type">Store</dd>     <dt>primaryModelClass</dt> <dd class="parameter-type">Model</dd>     <dt>payload</dt> <dd class="parameter-type">Object</dd>     <dt>id</dt> <dd class="parameter-type">String|Number</dd>     <dt>requestType</dt> <dd class="parameter-type">String</dd>     <dt>returns</dt> <dd class="return-type">Object</dd> <dd>JSON-API Document</dd>  </dl> <p>Called by the default normalizeResponse implementation when the type of request is <code>findAll</code></p>   <h3 role="link" id="normalizeFindBelongsToResponse">  <span class="method-name">normalizeFindBelongsToResponse</span> <span class="args"> (store, primaryModelClass, payload, id, requestType) </span> <span class="return-type">Object</span> <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Inherited from <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/json.js#L326" target="_blank" rel="noopener noreferrer"> JSONSerializer ../packages/serializer/addon/json.js:326 </a> </p> <p class="field-since"> Available since v1.13.0 </p>  <dl class="parameters">  <dt>store</dt> <dd class="parameter-type">Store</dd>     <dt>primaryModelClass</dt> <dd class="parameter-type">Model</dd>     <dt>payload</dt> <dd class="parameter-type">Object</dd>     <dt>id</dt> <dd class="parameter-type">String|Number</dd>     <dt>requestType</dt> <dd class="parameter-type">String</dd>     <dt>returns</dt> <dd class="return-type">Object</dd> <dd>JSON-API Document</dd>  </dl> <p>Called by the default normalizeResponse implementation when the type of request is <code>findBelongsTo</code></p>   <h3 role="link" id="normalizeFindHasManyResponse">  <span class="method-name">normalizeFindHasManyResponse</span> <span class="args"> (store, primaryModelClass, payload, id, requestType) </span> <span class="return-type">Object</span> <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Inherited from <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/json.js#L344" target="_blank" rel="noopener noreferrer"> JSONSerializer ../packages/serializer/addon/json.js:344 </a> </p> <p class="field-since"> Available since v1.13.0 </p>  <dl class="parameters">  <dt>store</dt> <dd class="parameter-type">Store</dd>     <dt>primaryModelClass</dt> <dd class="parameter-type">Model</dd>     <dt>payload</dt> <dd class="parameter-type">Object</dd>     <dt>id</dt> <dd class="parameter-type">String|Number</dd>     <dt>requestType</dt> <dd class="parameter-type">String</dd>     <dt>returns</dt> <dd class="return-type">Object</dd> <dd>JSON-API Document</dd>  </dl> <p>Called by the default normalizeResponse implementation when the type of request is <code>findHasMany</code></p>   <h3 role="link" id="normalizeFindManyResponse">  <span class="method-name">normalizeFindManyResponse</span> <span class="args"> (store, primaryModelClass, payload, id, requestType) </span> <span class="return-type">Object</span> <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Inherited from <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/json.js#L362" target="_blank" rel="noopener noreferrer"> JSONSerializer ../packages/serializer/addon/json.js:362 </a> </p> <p class="field-since"> Available since v1.13.0 </p>  <dl class="parameters">  <dt>store</dt> <dd class="parameter-type">Store</dd>     <dt>primaryModelClass</dt> <dd class="parameter-type">Model</dd>     <dt>payload</dt> <dd class="parameter-type">Object</dd>     <dt>id</dt> <dd class="parameter-type">String|Number</dd>     <dt>requestType</dt> <dd class="parameter-type">String</dd>     <dt>returns</dt> <dd class="return-type">Object</dd> <dd>JSON-API Document</dd>  </dl> <p>Called by the default normalizeResponse implementation when the type of request is <code>findMany</code></p>   <h3 role="link" id="normalizeFindRecordResponse">  <span class="method-name">normalizeFindRecordResponse</span> <span class="args"> (store, primaryModelClass, payload, id, requestType) </span> <span class="return-type">Object</span> <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Inherited from <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/json.js#L272" target="_blank" rel="noopener noreferrer"> JSONSerializer ../packages/serializer/addon/json.js:272 </a> </p> <p class="field-since"> Available since v1.13.0 </p>  <dl class="parameters">  <dt>store</dt> <dd class="parameter-type">Store</dd>     <dt>primaryModelClass</dt> <dd class="parameter-type">Model</dd>     <dt>payload</dt> <dd class="parameter-type">Object</dd>     <dt>id</dt> <dd class="parameter-type">String|Number</dd>     <dt>requestType</dt> <dd class="parameter-type">String</dd>     <dt>returns</dt> <dd class="return-type">Object</dd> <dd>JSON-API Document</dd>  </dl> <p>Called by the default normalizeResponse implementation when the type of request is <code>findRecord</code></p>   <h3 role="link" id="normalizeQueryRecordResponse">  <span class="method-name">normalizeQueryRecordResponse</span> <span class="args"> (store, primaryModelClass, payload, id, requestType) </span> <span class="return-type">Object</span> <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Inherited from <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/json.js#L290" target="_blank" rel="noopener noreferrer"> JSONSerializer ../packages/serializer/addon/json.js:290 </a> </p> <p class="field-since"> Available since v1.13.0 </p>  <dl class="parameters">  <dt>store</dt> <dd class="parameter-type">Store</dd>     <dt>primaryModelClass</dt> <dd class="parameter-type">Model</dd>     <dt>payload</dt> <dd class="parameter-type">Object</dd>     <dt>id</dt> <dd class="parameter-type">String|Number</dd>     <dt>requestType</dt> <dd class="parameter-type">String</dd>     <dt>returns</dt> <dd class="return-type">Object</dd> <dd>JSON-API Document</dd>  </dl> <p>Called by the default normalizeResponse implementation when the type of request is <code>queryRecord</code></p>   <h3 role="link" id="normalizeQueryResponse">  <span class="method-name">normalizeQueryResponse</span> <span class="args"> (store, primaryModelClass, payload, id, requestType) </span> <span class="return-type">Object</span> <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Inherited from <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/json.js#L380" target="_blank" rel="noopener noreferrer"> JSONSerializer ../packages/serializer/addon/json.js:380 </a> </p> <p class="field-since"> Available since v1.13.0 </p>  <dl class="parameters">  <dt>store</dt> <dd class="parameter-type">Store</dd>     <dt>primaryModelClass</dt> <dd class="parameter-type">Model</dd>     <dt>payload</dt> <dd class="parameter-type">Object</dd>     <dt>id</dt> <dd class="parameter-type">String|Number</dd>     <dt>requestType</dt> <dd class="parameter-type">String</dd>     <dt>returns</dt> <dd class="return-type">Object</dd> <dd>JSON-API Document</dd>  </dl> <p>Called by the default normalizeResponse implementation when the type of request is <code>query</code></p>   <h3 role="link" id="normalizeResponse">  <span class="method-name">normalizeResponse</span> <span class="args"> (store, primaryModelClass, payload, id, requestType) </span> <span class="return-type">Object</span> <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Inherited from <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/json.js#L211" target="_blank" rel="noopener noreferrer"> JSONSerializer ../packages/serializer/addon/json.js:211 </a> </p> <p class="field-since"> Available since v1.13.0 </p>  <dl class="parameters">  <dt>store</dt> <dd class="parameter-type">Store</dd>     <dt>primaryModelClass</dt> <dd class="parameter-type">Model</dd>     <dt>payload</dt> <dd class="parameter-type">Object</dd>     <dt>id</dt> <dd class="parameter-type">String|Number</dd>     <dt>requestType</dt> <dd class="parameter-type">String</dd>     <dt>returns</dt> <dd class="return-type">Object</dd> <dd>JSON-API Document</dd>  </dl> <p>The <code>normalizeResponse</code> method is used to normalize a payload from the server to a JSON-API Document.</p> <p><a href="http://jsonapi.org/format/#document-structure">http://jsonapi.org/format/#document-structure</a></p> <p>This method delegates to a more specific normalize method based on the <code>requestType</code>.</p> <p>To override this method with a custom one, make sure to call <code>return super.normalizeResponse(store, primaryModelClass, payload, id, requestType)</code> with your pre-processed data.</p> <p>Here's an example of using <code>normalizeResponse</code> manually:</p> <pre class="highlight javascript" data-language="javascript">socket.on('message', function(message) {
  let data = message.data;
  let modelClass = store.modelFor(data.modelName);
  let serializer = store.serializerFor(data.modelName);
  let normalized = serializer.normalizeSingleResponse(store, modelClass, data, data.id);

  store.push(normalized);
});</pre>   <h3 role="link" id="normalizeSaveResponse">  <span class="method-name">normalizeSaveResponse</span> <span class="args"> (store, primaryModelClass, payload, id, requestType) </span> <span class="return-type">Object</span> <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Inherited from <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/json.js#L452" target="_blank" rel="noopener noreferrer"> JSONSerializer ../packages/serializer/addon/json.js:452 </a> </p> <p class="field-since"> Available since v1.13.0 </p>  <dl class="parameters">  <dt>store</dt> <dd class="parameter-type">Store</dd>     <dt>primaryModelClass</dt> <dd class="parameter-type">Model</dd>     <dt>payload</dt> <dd class="parameter-type">Object</dd>     <dt>id</dt> <dd class="parameter-type">String|Number</dd>     <dt>requestType</dt> <dd class="parameter-type">String</dd>     <dt>returns</dt> <dd class="return-type">Object</dd> <dd>JSON-API Document</dd>  </dl> <p>normalizeUpdateRecordResponse, normalizeCreateRecordResponse and normalizeDeleteRecordResponse delegate to this method by default.</p>   <h3 role="link" id="normalizeSingleResponse">  <span class="method-name">normalizeSingleResponse</span> <span class="args"> (store, primaryModelClass, payload, id, requestType) </span> <span class="return-type">Object</span> <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Inherited from <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/json.js#L470" target="_blank" rel="noopener noreferrer"> JSONSerializer ../packages/serializer/addon/json.js:470 </a> </p> <p class="field-since"> Available since v1.13.0 </p>  <dl class="parameters">  <dt>store</dt> <dd class="parameter-type">Store</dd>     <dt>primaryModelClass</dt> <dd class="parameter-type">Model</dd>     <dt>payload</dt> <dd class="parameter-type">Object</dd>     <dt>id</dt> <dd class="parameter-type">String|Number</dd>     <dt>requestType</dt> <dd class="parameter-type">String</dd>     <dt>returns</dt> <dd class="return-type">Object</dd> <dd>JSON-API Document</dd>  </dl> <p>normalizeQueryResponse and normalizeFindRecordResponse delegate to this method by default.</p>   <h3 role="link" id="normalizeUpdateRecordResponse">  <span class="method-name">normalizeUpdateRecordResponse</span> <span class="args"> (store, primaryModelClass, payload, id, requestType) </span> <span class="return-type">Object</span> <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Inherited from <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/json.js#L434" target="_blank" rel="noopener noreferrer"> JSONSerializer ../packages/serializer/addon/json.js:434 </a> </p> <p class="field-since"> Available since v1.13.0 </p>  <dl class="parameters">  <dt>store</dt> <dd class="parameter-type">Store</dd>     <dt>primaryModelClass</dt> <dd class="parameter-type">Model</dd>     <dt>payload</dt> <dd class="parameter-type">Object</dd>     <dt>id</dt> <dd class="parameter-type">String|Number</dd>     <dt>requestType</dt> <dd class="parameter-type">String</dd>     <dt>returns</dt> <dd class="return-type">Object</dd> <dd>JSON-API Document</dd>  </dl> <p>Called by the default normalizeResponse implementation when the type of request is <code>updateRecord</code></p>   <h3 role="link" id="payloadKeyFromModelName">  <span class="method-name">payloadKeyFromModelName</span> <span class="args"> (modelName) </span> <span class="return-type">String</span> <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Defined in <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/rest.js#L670" target="_blank" rel="noopener noreferrer"> ../packages/serializer/addon/rest.js:670 </a> </p>  <dl class="parameters">  <dt>modelName</dt> <dd class="parameter-type">String</dd>     <dt>returns</dt> <dd class="return-type">String</dd>   </dl> <p>You can use <code>payloadKeyFromModelName</code> to override the root key for an outgoing request. By default, the RESTSerializer returns a camelized version of the model's name.</p> <p>For a model called TacoParty, its <code>modelName</code> would be the string <code>taco-party</code>. The RESTSerializer will send it to the server with <code>tacoParty</code> as the root key in the JSON payload:</p> <pre class="highlight javascript" data-language="javascript">{
  "tacoParty": {
    "id": "1",
    "location": "Matthew Beale's House"
  }
}</pre> <p>For example, your server may expect dasherized root objects:</p> <div class="pre-title"><code>app/serializers/application.js</code></div>
<pre class="highlight javascript" data-language="javascript">import RESTSerializer from '@ember-data/serializer/rest';
import { dasherize } from '&lt;app-name&gt;/utils/string-utils';

export default class ApplicationSerializer extends RESTSerializer {
  payloadKeyFromModelName(modelName) {
    return dasherize(modelName);
  }
}</pre> <p>Given a <code>TacoParty</code> model, calling <code>save</code> on it would produce an outgoing request like:</p> <pre class="highlight javascript" data-language="javascript">{
  "taco-party": {
    "id": "1",
    "location": "Matthew Beale's House"
  }
}</pre>   <h3 role="link" id="pushPayload">  <span class="method-name">pushPayload</span> <span class="args"> (store, payload) </span>  <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Defined in <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/rest.js#L356" target="_blank" rel="noopener noreferrer"> ../packages/serializer/addon/rest.js:356 </a> </p>  <dl class="parameters">  <dt>store</dt> <dd class="parameter-type">Store</dd>     <dt>payload</dt> <dd class="parameter-type">Object</dd>     </dl> <p>This method allows you to push a payload containing top-level collections of records organized per type.</p> <pre class="highlight javascript" data-language="javascript">{
  "posts": [{
    "id": "1",
    "title": "Rails is omakase",
    "author", "1",
    "comments": [ "1" ]
  }],
  "comments": [{
    "id": "1",
    "body": "FIRST"
  }],
  "users": [{
    "id": "1",
    "name": "@d2h"
  }]
}</pre> <p>It will first normalize the payload, so you can use this to push in data streaming in from your server structured the same way that fetches and saves are structured.</p>   <h3 role="link" id="serialize">  <span class="method-name">serialize</span> <span class="args"> (snapshot, options) </span> <span class="return-type">Object</span> <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Defined in <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/rest.js#L481" target="_blank" rel="noopener noreferrer"> ../packages/serializer/addon/rest.js:481 </a> </p>  <dl class="parameters">  <dt>snapshot</dt> <dd class="parameter-type">Snapshot</dd>     <dt>options</dt> <dd class="parameter-type">Object</dd>     <dt>returns</dt> <dd class="return-type">Object</dd> <dd>json</dd>  </dl> <p>Called when a record is saved in order to convert the record into JSON.</p> <p>By default, it creates a JSON object with a key for each attribute and belongsTo relationship.</p> <p>For example, consider this model:</p> <div class="pre-title"><code>app/models/comment.js</code></div>
<pre class="highlight javascript" data-language="javascript">import Model, { attr, belongsTo } from '@ember-data/model';

export default class Comment extends Model {
  @attr body
  @belongsto('user') author
}</pre> <p>The default serialization would create a JSON object like:</p> <pre class="highlight javascript" data-language="javascript">{
  "title": "Rails is unagi",
  "body": "Rails? Omakase? O_O",
  "author": 12
}</pre> <p>By default, attributes are passed through as-is, unless you specified an attribute type (<code>attr('date')</code>). If you specify a transform, the JavaScript value will be serialized when inserted into the JSON hash.</p> <p>By default, belongs-to relationships are converted into IDs when inserted into the JSON hash.</p> <h2 id="ids">IDs</h2> <p><code>serialize</code> takes an options hash with a single option: <code>includeId</code>. If this option is <code>true</code>, <code>serialize</code> will, by default include the ID in the JSON object it builds.</p> <p>The adapter passes in <code>includeId: true</code> when serializing a record for <code>createRecord</code>, but not for <code>updateRecord</code>.</p> <h2 id="customization">Customization</h2> <p>Your server may expect a different JSON format than the built-in serialization format.</p> <p>In that case, you can implement <code>serialize</code> yourself and return a JSON hash of your choosing.</p> <div class="pre-title"><code>app/serializers/post.js</code></div>
<pre class="highlight javascript" data-language="javascript">import RESTSerializer from '@ember-data/serializer/rest';

export default class ApplicationSerializer extends RESTSerializer {
  serialize(snapshot, options) {
    let json = {
      POST_TTL: snapshot.attr('title'),
      POST_BDY: snapshot.attr('body'),
      POST_CMS: snapshot.hasMany('comments', { ids: true })
    };

    if (options.includeId) {
      json.POST_ID_ = snapshot.id;
    }

    return json;
  }
}</pre> <h2 id="customizing-an-app-wide-serializer">Customizing an App-Wide Serializer</h2> <p>If you want to define a serializer for your entire application, you'll probably want to use <code>eachAttribute</code> and <code>eachRelationship</code> on the record.</p> <div class="pre-title"><code>app/serializers/application.js</code></div>
<pre class="highlight javascript" data-language="javascript">import RESTSerializer from '@ember-data/serializer/rest';
import { pluralize } from '&lt;app-name&gt;/utils/string-utils';

export default class ApplicationSerializer extends RESTSerializer {
  serialize(snapshot, options) {
    let json = {};

    snapshot.eachAttribute(function(name) {
      json[serverAttributeName(name)] = snapshot.attr(name);
    });

    snapshot.eachRelationship(function(name, relationship) {
      if (relationship.kind === 'hasMany') {
        json[serverHasManyName(name)] = snapshot.hasMany(name, { ids: true });
      }
    });

    if (options.includeId) {
      json.ID_ = snapshot.id;
    }

    return json;
  }
}

function serverAttributeName(attribute) {
  return attribute.underscore().toUpperCase();
}

function serverHasManyName(name) {
  return serverAttributeName(singularize(name)) + "_IDS";
}</pre> <p>This serializer will generate JSON that looks like this:</p> <pre class="highlight javascript" data-language="javascript">{
  "TITLE": "Rails is omakase",
  "BODY": "Yep. Omakase.",
  "COMMENT_IDS": [ 1, 2, 3 ]
}</pre> <h2 id="tweaking-the-default-json">Tweaking the Default JSON</h2> <p>If you just want to do some small tweaks on the default JSON, you can call super first and make the tweaks on the returned JSON.</p> <div class="pre-title"><code>app/serializers/post.js</code></div>
<pre class="highlight javascript" data-language="javascript">import RESTSerializer from '@ember-data/serializer/rest';

export default class ApplicationSerializer extends RESTSerializer {
  serialize(snapshot, options) {
    let json = super.serialize(snapshot, options);

    json.subject = json.title;
    delete json.title;

    return json;
  }
}</pre>   <h3 role="link" id="serialize">  <span class="method-name">serialize</span> <span class="args"> (snapshot, options) </span> <span class="return-type">Object</span> <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Inherited from <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/index.ts#L187" target="_blank" rel="noopener noreferrer"> Serializer ../packages/serializer/addon/index.ts:187 </a> </p>  <dl class="parameters">  <dt>snapshot</dt> <dd class="parameter-type">Snapshot</dd>     <dt>options</dt> <dd class="parameter-type">Object</dd>     <dt>returns</dt> <dd class="return-type">Object</dd>   </dl> <p>The <code>serialize</code> method is used when a record is saved in order to convert the record into the form that your external data source expects.</p> <p><code>serialize</code> takes an optional <code>options</code> hash with a single option:</p> <ul> <li>
<code>includeId</code>: If this is <code>true</code>, <code>serialize</code> should include the ID in the serialized object it builds.</li> </ul> <p>Example:</p> <pre class="highlight javascript" data-language="javascript">Serializer.extend({
  serialize(snapshot, options) {
    let json = {
      id: snapshot.id
    };

    snapshot.eachAttribute((key, attribute) =&gt; {
      json[key] = snapshot.attr(key);
    });

    snapshot.eachRelationship((key, relationship) =&gt; {
      if (relationship.kind === 'belongsTo') {
        json[key] = snapshot.belongsTo(key, { id: true });
      } else if (relationship.kind === 'hasMany') {
        json[key] = snapshot.hasMany(key, { ids: true });
      }
    });

    return json;
  },
});</pre>   <h3 role="link" id="serializeAttribute">  <span class="method-name">serializeAttribute</span> <span class="args"> (snapshot, json, key, attribute) </span>  <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Inherited from <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/json.js#L1162" target="_blank" rel="noopener noreferrer"> JSONSerializer ../packages/serializer/addon/json.js:1162 </a> </p>  <dl class="parameters">  <dt>snapshot</dt> <dd class="parameter-type">Snapshot</dd>     <dt>json</dt> <dd class="parameter-type">Object</dd>     <dt>key</dt> <dd class="parameter-type">String</dd>     <dt>attribute</dt> <dd class="parameter-type">Object</dd>     </dl> <p><code>serializeAttribute</code> can be used to customize how <code>attr</code> properties are serialized</p> <p>For example if you wanted to ensure all your attributes were always serialized as properties on an <code>attributes</code> object you could write:</p> <div class="pre-title"><code>app/serializers/application.js</code></div>
<pre class="highlight javascript" data-language="javascript">import JSONSerializer from '@ember-data/serializer/json';

export default class ApplicationSerializer extends JSONSerializer {
  serializeAttribute(snapshot, json, key, attributes) {
    json.attributes = json.attributes || {};
    super.serializeAttribute(snapshot, json.attributes, key, attributes);
  }
}</pre>   <h3 role="link" id="serializeBelongsTo">  <span class="method-name">serializeBelongsTo</span> <span class="args"> (snapshot, json, relationship) </span>  <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Inherited from <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/json.js#L1210" target="_blank" rel="noopener noreferrer"> JSONSerializer ../packages/serializer/addon/json.js:1210 </a> </p>  <dl class="parameters">  <dt>snapshot</dt> <dd class="parameter-type">Snapshot</dd>     <dt>json</dt> <dd class="parameter-type">Object</dd>     <dt>relationship</dt> <dd class="parameter-type">Object</dd>     </dl> <p><code>serializeBelongsTo</code> can be used to customize how <code>belongsTo</code> properties are serialized.</p> <p>Example</p> <div class="pre-title"><code>app/serializers/post.js</code></div>
<pre class="highlight javascript" data-language="javascript">import JSONSerializer from '@ember-data/serializer/json';
import { isNone } from '@ember/utils';

export default class PostSerializer extends JSONSerializer {
  serializeBelongsTo(snapshot, json, relationship) {
    let key = relationship.key;
    let belongsTo = snapshot.belongsTo(key);

    key = this.keyForRelationship ? this.keyForRelationship(key, "belongsTo", "serialize") : key;

    json[key] = isNone(belongsTo) ? belongsTo : belongsTo.record.toJSON();
  }
}</pre>   <h3 role="link" id="serializeHasMany">  <span class="method-name">serializeHasMany</span> <span class="args"> (snapshot, json, relationship) </span>  <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Inherited from <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/json.js#L1265" target="_blank" rel="noopener noreferrer"> JSONSerializer ../packages/serializer/addon/json.js:1265 </a> </p>  <dl class="parameters">  <dt>snapshot</dt> <dd class="parameter-type">Snapshot</dd>     <dt>json</dt> <dd class="parameter-type">Object</dd>     <dt>relationship</dt> <dd class="parameter-type">Object</dd>     </dl> <p><code>serializeHasMany</code> can be used to customize how <code>hasMany</code> properties are serialized.</p> <p>Example</p> <div class="pre-title"><code>app/serializers/post.js</code></div>
<pre class="highlight javascript" data-language="javascript">import JSONSerializer from '@ember-data/serializer/json';

export default class PostSerializer extends JSONSerializer {
  serializeHasMany(snapshot, json, relationship) {
    let key = relationship.key;
    if (key === 'comments') {
      return;
    } else {
      super.serializeHasMany(...arguments);
    }
  }
}</pre>   <h3 role="link" id="serializeIntoHash">  <span class="method-name">serializeIntoHash</span> <span class="args"> (hash, typeClass, snapshot, options) </span>  <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Defined in <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/rest.js#L638" target="_blank" rel="noopener noreferrer"> ../packages/serializer/addon/rest.js:638 </a> </p>  <dl class="parameters">  <dt>hash</dt> <dd class="parameter-type">Object</dd>     <dt>typeClass</dt> <dd class="parameter-type">Model</dd>     <dt>snapshot</dt> <dd class="parameter-type">Snapshot</dd>     <dt>options</dt> <dd class="parameter-type">Object</dd>     </dl> <p>You can use this method to customize the root keys serialized into the JSON. The hash property should be modified by reference (possibly using something like _.extend) By default the REST Serializer sends the modelName of a model, which is a camelized version of the name.</p> <p>For example, your server may expect underscored root objects.</p> <div class="pre-title"><code>app/serializers/application.js</code></div>
<pre class="highlight javascript" data-language="javascript">import RESTSerializer from '@ember-data/serializer/rest';
import { decamelize } from '&lt;app-name&gt;/utils/string-utils';

export default class ApplicationSerializer extends RESTSerializer {
  serializeIntoHash(data, type, record, options) {
    let root = decamelize(type.modelName);
    data[root] = this.serialize(record, options);
  }
}</pre>   <h3 role="link" id="serializePolymorphicType">  <span class="method-name">serializePolymorphicType</span> <span class="args"> (snapshot, json, relationship) </span>  <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Defined in <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/rest.js#L721" target="_blank" rel="noopener noreferrer"> ../packages/serializer/addon/rest.js:721 </a> </p>  <dl class="parameters">  <dt>snapshot</dt> <dd class="parameter-type">Snapshot</dd>     <dt>json</dt> <dd class="parameter-type">Object</dd>     <dt>relationship</dt> <dd class="parameter-type">Object</dd>     </dl> <p>You can use this method to customize how polymorphic objects are serialized. By default the REST Serializer creates the key by appending <code>Type</code> to the attribute and value from the model's camelcased model name.</p>   <h3 role="link" id="shouldSerializeHasMany">  <span class="method-name">shouldSerializeHasMany</span> <span class="args"> (snapshot, key, relationshipType) </span> <span class="return-type">Boolean</span> <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer/rest.html">@ember-data/serializer/rest</a></td> </tr> </table> <p class="github-link"> Inherited from <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../packages/serializer/addon/json.js#L928" target="_blank" rel="noopener noreferrer"> JSONSerializer ../packages/serializer/addon/json.js:928 </a> </p>  <dl class="parameters">  <dt>snapshot</dt> <dd class="parameter-type">Snapshot</dd>     <dt>key</dt> <dd class="parameter-type">String</dd>     <dt>relationshipType</dt> <dd class="parameter-type">String</dd>     <dt>returns</dt> <dd class="return-type">Boolean</dd> <dd>true if the hasMany relationship should be serialized</dd>  </dl> <p>Check if the given hasMany relationship should be serialized</p> <p>By default only many-to-many and many-to-none relationships are serialized. This could be configured per relationship by Serializer's <code>attrs</code> object.</p>   </article><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2022 Yehuda Katz, Tom Dale and Ember.js contributors<br>Licensed under the MIT License.<br>
    <a href="https://api.emberjs.com/ember-data/4.9/classes/RESTSerializer/methods" class="_attribution-link">https://api.emberjs.com/ember-data/4.9/classes/RESTSerializer/methods</a>
  </p>
</div>
