<article class="chapter">  <h1 class="module-name">Class MinimumSerializerInterface</h1> <span class="access">public</span> <table>  <tr> <th>Defined in:</th> <td> <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../ember-data-types/q/minimum-serializer-interface.ts#L27" target="_blank" rel="noopener noreferrer">../ember-data-types/q/minimum-serializer-interface.ts:27</a> </td> </tr> <tr> <th>Module:</th> <td> <a href="../../modules/@ember-data/serializer.html"> @ember-data/serializer </a> </td> </tr>  </table>      <h3 role="link" id="destroy [OPTIONAL]">  <span class="method-name">destroy [OPTIONAL]</span>  <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer.html">@ember-data/serializer</a></td> </tr> </table> <p class="github-link"> Defined in <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../ember-data-types/q/minimum-serializer-interface.ts#L247" target="_blank" rel="noopener noreferrer"> ../ember-data-types/q/minimum-serializer-interface.ts:247 </a> </p>   <p>In some situations the serializer may need to perform cleanup when destroyed, that cleanup can be done in <code>destroy</code>.</p> <p>If not implemented, the store does not inform the serializer of destruction.</p>   <h3 role="link" id="normalize [OPTIONAL]">  <span class="method-name">normalize [OPTIONAL]</span> <span class="args"> (schema, rawPayload, prop) </span> <span class="return-type">SingleResourceDocument</span> <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer.html">@ember-data/serializer</a></td> </tr> </table> <p class="github-link"> Defined in <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../ember-data-types/q/minimum-serializer-interface.ts#L105" target="_blank" rel="noopener noreferrer"> ../ember-data-types/q/minimum-serializer-interface.ts:105 </a> </p>  <dl class="parameters">  <dt>schema</dt> <dd class="parameter-type">ModelSchema</dd> <dd>An object with methods for accessing information about the type, attributes and relationships of the primary type associated with the request.</dd>    <dt>rawPayload</dt> <dd class="parameter-type">JSONObject</dd> <dd>Some raw JSON data to be normalized into a JSON:API Resource.</dd>    <dt>prop</dt> <dd class="parameter-type">String</dd> <dd>When called by the EmbeddedRecordsMixin this param will be the property at which the object provided as rawPayload was found.</dd>    <dt>returns</dt> <dd class="return-type">SingleResourceDocument</dd> <dd>A JSON:API Document containing a single JSON:API Resource as its primary data.</dd>  </dl> <p>This method is intended to normalize data into a <a href="https://jsonapi.org/format/#document-structure">JSON:API Document</a> with a data member containing a single <a href="https://jsonapi.org/format/#document-resource-objects">Resource</a>.</p> <ul> <li>
<code>type</code> should be formatted in the singular, dasherized and lowercase form</li> <li>
<code>members</code> (the property names of attributes and relationships) should be formatted to match their definition in the corresponding <code>Model</code> definition. Typically this will be <code>camelCase</code>.</li> <li>
<a href="https://github.com/emberjs/rfcs/blob/master/text/0403-ember-data-identifiers.md"><code>lid</code></a> is a valid optional sibling to <code>id</code> and <code>type</code> in both <a href="https://jsonapi.org/format/#document-resource-objects">Resources</a> and <a href="https://jsonapi.org/format/#document-resource-identifier-objects">Resource Identifier Objects</a>
</li> </ul> <p>This method is called by the <code>Store</code> when <code>store.normalize(modelName, payload)</code> is called. It is recommended to use <code>store.serializerFor(modelName).normalizeResponse</code> over <code>store.normalize</code>.</p> <p>This method may be called when also using the <code>RESTSerializer</code> when <code>serializer.pushPayload</code> is called by <code>store.pushPayload</code>. However, it is recommended to use <code>store.push</code> over <code>store.pushPayload</code> after normalizing the payload directly.</p> <p>Example:</p> <pre class="highlight javascript" data-language="javascript">function pushPayload(store, modelName, rawPayload) {
  const ModelClass = store.modelFor(modelName);
  const serializer = store.serializerFor(modelName);
  const jsonApiPayload = serializer.normalizeResponse(store, ModelClass, rawPayload, null, 'query');

  return store.push(jsonApiPayload);
}</pre> <p>This method may be called when also using the <code>JSONAPISerializer</code> when normalizing included records. If mixing serializer usage in this way we recommend implementing this method, but caution that it may lead to unexpected mixing of formats.</p> <p>This method may also be called when normalizing embedded relationships when using the <code>EmbeddedRecordsMixin</code>. If using this mixin in a serializer in your application we recommend implementing this method, but caution that it may lead to unexpected mixing of formats.</p>   <h3 role="link" id="normalizeResponse">  <span class="method-name">normalizeResponse</span> <span class="args"> (store, schema, rawPayload, id, requestType) </span> <span class="return-type">JsonApiDocument</span> <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer.html">@ember-data/serializer</a></td> </tr> </table> <p class="github-link"> Defined in <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../ember-data-types/q/minimum-serializer-interface.ts#L38" target="_blank" rel="noopener noreferrer"> ../ember-data-types/q/minimum-serializer-interface.ts:38 </a> </p>  <dl class="parameters">  <dt>store</dt> <dd class="parameter-type">Store</dd> <dd>The store service that initiated the request being normalized</dd>    <dt>schema</dt> <dd class="parameter-type">ModelSchema</dd> <dd>An object with methods for accessing information about the type, attributes and relationships of the primary type associated with the request.</dd>    <dt>rawPayload</dt> <dd class="parameter-type">JSONObject</dd> <dd>The raw JSON response data returned from an API request. This correlates to the value the promise returned by the adapter method that performed the request resolved to.</dd>    <dt>id</dt> <dd class="parameter-type">String|null</dd> <dd>For a findRecord request, this is the id initially provided in the call to store.findRecord. Else this value is null.</dd>    <dt>requestType</dt> <dd class="parameter-type">'findRecord' | 'queryRecord' | 'findAll' | 'findBelongsTo' | 'findHasMany' | 'findMany' | 'query' | 'createRecord' | 'deleteRecord' | 'updateRecord'</dd> <dd>The type of request the Adapter had been asked to perform.</dd>    <dt>returns</dt> <dd class="return-type">JsonApiDocument</dd> <dd>a document following the structure of a JSON:API Document.</dd>  </dl> <p>This method is responsible for normalizing the value resolved from the promise returned by an Adapter request into the format expected by the <code>Store</code>.</p> <p>The output should be a <a href="https://jsonapi.org/format/#document-structure">JSON:API Document</a> with the following additional restrictions:</p> <ul> <li>
<code>type</code> should be formatted in the <code>singular</code> <code>dasherized</code> <code>lowercase</code> form</li> <li>
<code>members</code> (the property names of attributes and relationships) should be formatted to match their definition in the corresponding <code>Model</code> definition. Typically this will be <code>camelCase</code>.</li> <li>
<a href="https://github.com/emberjs/rfcs/blob/master/text/0403-ember-data-identifiers.md"><code>lid</code></a> is a valid optional sibling to <code>id</code> and <code>type</code> in both <a href="https://jsonapi.org/format/#document-resource-objects">Resources</a> and <a href="https://jsonapi.org/format/#document-resource-identifier-objects">Resource Identifier Objects</a>
</li> </ul>   <h3 role="link" id="pushPayload [OPTIONAL]">  <span class="method-name">pushPayload [OPTIONAL]</span> <span class="args"> (store, rawPayload) </span> <span class="return-type">Void</span> <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer.html">@ember-data/serializer</a></td> </tr> </table> <p class="github-link"> Defined in <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../ember-data-types/q/minimum-serializer-interface.ts#L203" target="_blank" rel="noopener noreferrer"> ../ember-data-types/q/minimum-serializer-interface.ts:203 </a> </p>  <dl class="parameters">  <dt>store</dt> <dd class="parameter-type">Store</dd> <dd>The store service that initiated the request being normalized</dd>    <dt>rawPayload</dt> <dd class="parameter-type">JSONObject</dd> <dd>The raw JSON response data returned from an API request. This JSON should be in the API format expected by the serializer.</dd>    <dt>returns</dt> <dd class="return-type">Void</dd>   </dl> <p>This method allows for normalization of data when <code>store.pushPayload</code> is called and should be implemented if you want to use that method.</p> <p>The method is responsible for pushing new data to the store using <code>store.push</code> once any necessary normalization has occurred, and no data in the store will be updated unless it does so.</p> <p>The normalized form pushed to the store should be a <a href="https://jsonapi.org/format/#document-structure">JSON:API Document</a> with the following additional restrictions:</p> <ul> <li>
<code>type</code> should be formatted in the singular, dasherized and lowercase form</li> <li>
<code>members</code> (the property names of attributes and relationships) should be formatted to match their definition in the corresponding <code>Model</code> definition. Typically this will be <code>camelCase</code>.</li> <li>
<a href="https://github.com/emberjs/rfcs/blob/master/text/0403-ember-data-identifiers.md"><code>lid</code></a> is a valid optional sibling to <code>id</code> and <code>type</code> in both <a href="https://jsonapi.org/format/#document-resource-objects">Resources</a> and <a href="https://jsonapi.org/format/#document-resource-identifier-objects">Resource Identifier Objects</a>
</li> </ul> <p>If you need better control over normalization or want access to the records being added or updated in the store, we recommended using <code>store.push</code> over <code>store.pushPayload</code> after normalizing the payload directly. This can even take advantage of an existing serializer for the format the data is in, for example:</p> <pre class="highlight javascript" data-language="javascript">function pushPayload(store, modelName, rawPayload) {
  const ModelClass = store.modelFor(modelName);
  const serializer = store.serializerFor(modelName);
  const jsonApiPayload = serializer.normalizeResponse(store, ModelClass, rawPayload, null, 'query');

  return store.push(jsonApiPayload);
}</pre>   <h3 role="link" id="serialize">  <span class="method-name">serialize</span> <span class="args"> (snapshot, options) </span>  <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer.html">@ember-data/serializer</a></td> </tr> </table> <p class="github-link"> Defined in <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../ember-data-types/q/minimum-serializer-interface.ts#L86" target="_blank" rel="noopener noreferrer"> ../ember-data-types/q/minimum-serializer-interface.ts:86 </a> </p>  <dl class="parameters">  <dt>snapshot</dt> <dd class="parameter-type">Snapshot</dd> <dd>A Snapshot for the record to serialize</dd>    <dt>options</dt> <dd class="parameter-type">Object</dd>     </dl> <p>This method is responsible for serializing an individual record via a <a href="snapshot.html">Snapshot</a> into the format expected by the API.</p> <p>This method is called by <code>snapshot.serialize()</code>.</p> <p>When using <code>Model</code>, this method is called by <code>record.serialize()</code>.</p> <p>When using <code>JSONAPIAdapter</code> or <code>RESTAdapter</code> this method is called by <code>updateRecord</code> and <code>createRecord</code> if <code>Serializer.serializeIntoHash</code> is not implemented.</p>   <h3 role="link" id="serializeIntoHash [OPTIONAL]">  <span class="method-name">serializeIntoHash [OPTIONAL]</span> <span class="args"> (hash, schema, snapshot, options) </span> <span class="return-type">Void</span> <span class="access">public</span>  </h3> <table> <tr> <th>Module:</th> <td><a href="../../modules/@ember-data/serializer.html">@ember-data/serializer</a></td> </tr> </table> <p class="github-link"> Defined in <a href="https://github.com/emberjs/data/tree/v4.9.1/packages/-ember-data/../ember-data-types/q/minimum-serializer-interface.ts#L161" target="_blank" rel="noopener noreferrer"> ../ember-data-types/q/minimum-serializer-interface.ts:161 </a> </p>  <dl class="parameters">  <dt>hash</dt>  <dd>A top most object of the request payload onto which to append the serialized record</dd>    <dt>schema</dt> <dd class="parameter-type">ModelSchema</dd> <dd>An object with methods for accessing information about the type, attributes and relationships of the primary type associated with the request.</dd>    <dt>snapshot</dt> <dd class="parameter-type">Snapshot</dd> <dd>A Snapshot for the record to serialize</dd>    <dt>options</dt>      <dt>returns</dt> <dd class="return-type">Void</dd>   </dl> <p>When using <code>JSONAPIAdapter</code> or <code>RESTAdapter</code> this method is called by <code>adapter.updateRecord</code> and <code>adapter.createRecord</code> if <code>serializer.serializeIntoHash</code> is implemented. If this method is not implemented, <code>serializer.serialize</code> will be called in this case.</p> <p>You can use this method to customize the root keys serialized into the payload. The hash property should be modified by reference.</p> <p>For instance, your API may expect resources to be keyed by underscored type in the payload:</p> <pre class="highlight javascript" data-language="javascript">{
  _user: {
    type: 'user',
    id: '1'
  }
}</pre> <p>Which when using these adapters can be achieved by implementing this method similar to the following:</p> <pre class="highlight javascript" data-language="javascript">serializeIntoHash(hash, ModelClass, snapshot, options) {
  hash[`_${snapshot.modelName}`] = this.serialize(snapshot, options).data;
}</pre>   </article><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2022 Yehuda Katz, Tom Dale and Ember.js contributors<br>Licensed under the MIT License.<br>
    <a href="https://api.emberjs.com/ember-data/4.9/classes/MinimumSerializerInterface/methods" class="_attribution-link">https://api.emberjs.com/ember-data/4.9/classes/MinimumSerializerInterface/methods</a>
  </p>
</div>
