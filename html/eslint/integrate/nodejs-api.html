<h1>Node.js API Reference</h1>  <p>While ESLint is designed to be run on the command line, it’s possible to use ESLint programmatically through the Node.js API. The purpose of the Node.js API is to allow plugin and tool authors to use the ESLint functionality directly, without going through the command line interface.</p> <p><strong>Note:</strong> Use undocumented parts of the API at your own risk. Only those parts that are specifically mentioned in this document are approved for use and will remain stable and reliable. Anything left undocumented is unstable and may change or be removed at any point.</p> <h2 id="eslint-class" tabindex="-1">ESLint class</h2> <p>The <code>ESLint</code> class is the primary class to use in Node.js applications.</p> <p>This class depends on the Node.js <code>fs</code> module and the file system, so you cannot use it in browsers. If you want to lint code on browsers, use the <a href="#linter">Linter</a> class instead.</p> <p>Here’s a simple example of using the <code>ESLint</code> class:</p> <pre class="language-js line-numbers-mode"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> ESLint <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"eslint"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. Create an instance.</span>
    <span class="token keyword">const</span> eslint <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ESLint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 2. Lint files.</span>
    <span class="token keyword">const</span> results <span class="token operator">=</span> <span class="token keyword">await</span> eslint<span class="token punctuation">.</span><span class="token function">lintFiles</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"lib/**/*.js"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 3. Format the results.</span>
    <span class="token keyword">const</span> formatter <span class="token operator">=</span> <span class="token keyword">await</span> eslint<span class="token punctuation">.</span><span class="token function">loadFormatter</span><span class="token punctuation">(</span><span class="token string">"stylish"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> resultText <span class="token operator">=</span> formatter<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 4. Output it.</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resultText<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    process<span class="token punctuation">.</span>exitCode <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Here’s an example that autofixes lint problems:</p> <pre class="language-js line-numbers-mode"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> ESLint <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"eslint"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. Create an instance with the `fix` option.</span>
    <span class="token keyword">const</span> eslint <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ESLint</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">fix</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 2. Lint files. This doesn't modify target files.</span>
    <span class="token keyword">const</span> results <span class="token operator">=</span> <span class="token keyword">await</span> eslint<span class="token punctuation">.</span><span class="token function">lintFiles</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"lib/**/*.js"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 3. Modify the files with the fixed code.</span>
    <span class="token keyword">await</span> ESLint<span class="token punctuation">.</span><span class="token function">outputFixes</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 4. Format the results.</span>
    <span class="token keyword">const</span> formatter <span class="token operator">=</span> <span class="token keyword">await</span> eslint<span class="token punctuation">.</span><span class="token function">loadFormatter</span><span class="token punctuation">(</span><span class="token string">"stylish"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> resultText <span class="token operator">=</span> formatter<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 5. Output it.</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resultText<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    process<span class="token punctuation">.</span>exitCode <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>And here is an example of using the <code>ESLint</code> class with <code>lintText</code> API:</p> <pre class="language-js line-numbers-mode"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> ESLint <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"eslint"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> testCode <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  const name = "eslint";
  if(true) {
    console.log("constant condition warning")
  };
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. Create an instance</span>
    <span class="token keyword">const</span> eslint <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ESLint</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">overrideConfigFile</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">overrideConfig</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">languageOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">ecmaVersion</span><span class="token operator">:</span> <span class="token number">2018</span><span class="token punctuation">,</span>
                <span class="token literal-property property">sourceType</span><span class="token operator">:</span> <span class="token string">"commonjs"</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 2. Lint text.</span>
    <span class="token keyword">const</span> results <span class="token operator">=</span> <span class="token keyword">await</span> eslint<span class="token punctuation">.</span><span class="token function">lintText</span><span class="token punctuation">(</span>testCode<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 3. Format the results.</span>
    <span class="token keyword">const</span> formatter <span class="token operator">=</span> <span class="token keyword">await</span> eslint<span class="token punctuation">.</span><span class="token function">loadFormatter</span><span class="token punctuation">(</span><span class="token string">"stylish"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> resultText <span class="token operator">=</span> formatter<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 4. Output it.</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resultText<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    process<span class="token punctuation">.</span>exitCode <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="-new-eslintoptions" tabindex="-1">◆ new ESLint(options)</h3> <pre class="language-js line-numbers-mode"><code><span class="token keyword">const</span> eslint <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ESLint</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Create a new <code>ESLint</code> instance.</p> <h4 id="parameters" tabindex="-1">Parameters</h4> <p>The <code>ESLint</code> constructor takes an <code>options</code> object. If you omit the <code>options</code> object then it uses default values for all options. The <code>options</code> object has the following properties.</p> <h5 id="file-enumeration" tabindex="-1">File Enumeration</h5> <ul> <li>
<code>options.cwd</code> (<code>string</code>)<br> Default is <code>process.cwd()</code>. The working directory. This must be an absolute path.</li> <li>
<code>options.errorOnUnmatchedPattern</code> (<code>boolean</code>)<br> Default is <code>true</code>. Unless set to <code>false</code>, the <a href="#-eslintlintfilespatterns"><code>eslint.lintFiles()</code></a> method will throw an error when no target files are found.</li> <li>
<code>options.globInputPaths</code> (<code>boolean</code>)<br> Default is <code>true</code>. If <code>false</code> is present, the <a href="#-eslintlintfilespatterns"><code>eslint.lintFiles()</code></a> method doesn’t interpret glob patterns.</li> <li>
<code>options.ignore</code> (<code>boolean</code>)<br> Default is <code>true</code>. If <code>false</code> is present, the <a href="#-eslintlintfilespatterns"><code>eslint.lintFiles()</code></a> method doesn’t respect <code>ignorePatterns</code> in your configuration.</li> <li>
<code>options.ignorePatterns</code> (<code>string[] | null</code>)<br> Default is <code>null</code>. Ignore file patterns to use in addition to config ignores. These patterns are relative to <code>cwd</code>.</li> <li>
<code>options.passOnNoPatterns</code> (<code>boolean</code>)<br> Default is <code>false</code>. When set to <code>true</code>, missing patterns cause the linting operation to short circuit and not report any failures.</li> <li>
<code>options.warnIgnored</code> (<code>boolean</code>)<br> Default is <code>true</code>. Show warnings when the file list includes ignored files.</li> </ul> <h5 id="linting" tabindex="-1">Linting</h5> <ul> <li>
<code>options.allowInlineConfig</code> (<code>boolean</code>)<br> Default is <code>true</code>. If <code>false</code> is present, ESLint suppresses directive comments in source code. If this option is <code>false</code>, it overrides the <code>noInlineConfig</code> setting in your configurations.</li> <li>
<code>options.baseConfig</code> (<code>ConfigData | ConfigData[] | null</code>)<br> Default is <code>null</code>. <a href="nodejs-api../use/configure/index.html">Configuration object</a>, extended by all configurations used with this instance. You can use this option to define the default settings that will be used if your configuration files don’t configure it.</li> <li>
<code>options.overrideConfig</code> (<code>ConfigData | ConfigData[] | null</code>)<br> Default is <code>null</code>. <a href="nodejs-api../use/configure/index.html">Configuration object</a>, overrides all configurations used with this instance. You can use this option to define the settings that will be used even if your configuration files configure it.</li> <li>
<code>options.overrideConfigFile</code> (<code>string | boolean</code>)<br> Default is <code>false</code>. The path to a configuration file, overrides all configurations used with this instance. The <code>options.overrideConfig</code> option is applied after this option is applied.</li> <li>
<code>options.plugins</code> (<code>Record&lt;string, Plugin&gt; | null</code>)<br> Default is <code>null</code>. The plugin implementations that ESLint uses for the <code>plugins</code> setting of your configuration. This is a map-like object. Those keys are plugin IDs and each value is implementation.</li> <li>
<code>options.ruleFilter</code> (<code>({ruleId: string, severity: number}) =&gt; boolean</code>)<br> Default is <code>() =&gt; true</code>. A predicate function that filters rules to be run. This function is called with an object containing <code>ruleId</code> and <code>severity</code>, and returns <code>true</code> if the rule should be run.</li> <li>
<code>options.stats</code> (<code>boolean</code>)<br> Default is <code>false</code>. When set to <code>true</code>, additional statistics are added to the lint results (see <a href="nodejs-api../extend/stats.html#-stats-type">Stats type</a>).</li> </ul> <h5 id="autofix" tabindex="-1">Autofix</h5> <ul> <li>
<code>options.fix</code> (<code>boolean | (message: LintMessage) =&gt; boolean</code>)<br> Default is <code>false</code>. If <code>true</code> is present, the <a href="#-eslintlintfilespatterns"><code>eslint.lintFiles()</code></a> and <a href="#-eslintlinttextcode-options"><code>eslint.lintText()</code></a> methods work in autofix mode. If a predicate function is present, the methods pass each lint message to the function, then use only the lint messages for which the function returned <code>true</code>.</li> <li>
<code>options.fixTypes</code> (<code>("directive" | "problem" | "suggestion" | "layout")[] | null</code>)<br> Default is <code>null</code>. The types of the rules that the <a href="#-eslintlintfilespatterns"><code>eslint.lintFiles()</code></a> and <a href="#-eslintlinttextcode-options"><code>eslint.lintText()</code></a> methods use for autofix.</li> </ul> <h5 id="cache-related" tabindex="-1">Cache-related</h5> <ul> <li>
<code>options.cache</code> (<code>boolean</code>)<br> Default is <code>false</code>. If <code>true</code> is present, the <a href="#-eslintlintfilespatterns"><code>eslint.lintFiles()</code></a> method caches lint results and uses it if each target file is not changed. Please mind that ESLint doesn’t clear the cache when you upgrade ESLint plugins. In that case, you have to remove the cache file manually. The <a href="#-eslintlinttextcode-options"><code>eslint.lintText()</code></a> method doesn’t use caches even if you pass the <code>options.filePath</code> to the method.</li> <li>
<code>options.cacheLocation</code> (<code>string</code>)<br> Default is <code>.eslintcache</code>. The <a href="#-eslintlintfilespatterns"><code>eslint.lintFiles()</code></a> method writes caches into this file.</li> <li>
<code>options.cacheStrategy</code> (<code>string</code>)<br> Default is <code>"metadata"</code>. Strategy for the cache to use for detecting changed files. Can be either <code>"metadata"</code> or <code>"content"</code>.</li> </ul> <h5 id="other-options" tabindex="-1">Other Options</h5> <ul> <li>
<code>options.flags</code> (<code>string[]</code>)<br> Default is <code>[]</code>. The feature flags to enable for this instance.</li> </ul> <h3 id="-eslintlintfilespatterns" tabindex="-1">◆ eslint.lintFiles(patterns)</h3> <pre class="language-js line-numbers-mode"><code><span class="token keyword">const</span> results <span class="token operator">=</span> <span class="token keyword">await</span> eslint<span class="token punctuation">.</span><span class="token function">lintFiles</span><span class="token punctuation">(</span>patterns<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>This method lints the files that match the glob patterns and then returns the results.</p> <h4 id="parameters-1" tabindex="-1">Parameters</h4> <ul> <li>
<code>patterns</code> (<code>string | string[]</code>)<br> The lint target files. This can contain any of file paths, directory paths, and glob patterns.</li> </ul> <h4 id="return-value" tabindex="-1">Return Value</h4> <ul> <li>(<code>Promise&lt;LintResult[]&gt;</code>)<br> The promise that will be fulfilled with an array of <a href="#-lintresult-type">LintResult</a> objects.</li> </ul> <h3 id="-eslintlinttextcode-options" tabindex="-1">◆ eslint.lintText(code, options)</h3> <pre class="language-js line-numbers-mode"><code><span class="token keyword">const</span> results <span class="token operator">=</span> <span class="token keyword">await</span> eslint<span class="token punctuation">.</span><span class="token function">lintText</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>This method lints the given source code text and then returns the results.</p> <p>By default, this method uses the configuration that applies to files in the current working directory (the <code>cwd</code> constructor option). If you want to use a different configuration, pass <code>options.filePath</code>, and ESLint will load the same configuration that <a href="#-eslintlintfilespatterns"><code>eslint.lintFiles()</code></a> would use for a file at <code>options.filePath</code>.</p> <p>If the <code>options.filePath</code> value is configured to be ignored, this method returns an empty array. If the <code>options.warnIgnored</code> option is set along with the <code>options.filePath</code> option, this method returns a <a href="#-lintresult-type">LintResult</a> object. In that case, the result may contain a warning that indicates the file was ignored.</p> <h4 id="parameters-2" tabindex="-1">Parameters</h4> <p>The second parameter <code>options</code> is omittable.</p> <ul> <li>
<code>code</code> (<code>string</code>)<br> The source code text to check.</li> <li>
<code>options.filePath</code> (<code>string</code>)<br> Optional. The path to the file of the source code text. If omitted, the <code>result.filePath</code> becomes the string <code>"&lt;text&gt;"</code>.</li> <li>
<code>options.warnIgnored</code> (<code>boolean</code>)<br> Optional, defaults to <code>options.warnIgnored</code> passed to the constructor. If <code>true</code> is present and the <code>options.filePath</code> is a file ESLint should ignore, this method returns a lint result contains a warning message.</li> </ul> <h4 id="return-value-1" tabindex="-1">Return Value</h4> <ul> <li>(<code>Promise&lt;LintResult[]&gt;</code>)<br> The promise that will be fulfilled with an array of <a href="#-lintresult-type">LintResult</a> objects. This is an array (despite there being only one lint result) in order to keep the interfaces between this and the <a href="#-eslintlintfilespatterns"><code>eslint.lintFiles()</code></a> method similar.</li> </ul> <h3 id="-eslintgetrulesmetaforresultsresults" tabindex="-1">◆ eslint.getRulesMetaForResults(results)</h3> <pre class="language-js line-numbers-mode"><code><span class="token keyword">const</span> results <span class="token operator">=</span> <span class="token keyword">await</span> eslint<span class="token punctuation">.</span><span class="token function">lintFiles</span><span class="token punctuation">(</span>patterns<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> rulesMeta <span class="token operator">=</span> eslint<span class="token punctuation">.</span><span class="token function">getRulesMetaForResults</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>This method returns an object containing meta information for each rule that triggered a lint error in the given <code>results</code>.</p> <h4 id="parameters-3" tabindex="-1">Parameters</h4> <ul> <li>
<code>results</code> (<code>LintResult[]</code>)<br> An array of <a href="#-lintresult-type">LintResult</a> objects returned from a call to <code>ESLint#lintFiles()</code> or <code>ESLint#lintText()</code>.</li> </ul> <h4 id="return-value-2" tabindex="-1">Return Value</h4> <ul> <li>(<code>Object</code>)<br> An object whose property names are the rule IDs from the <code>results</code> and whose property values are the rule’s meta information (if available).</li> </ul> <h3 id="-eslintcalculateconfigforfilefilepath" tabindex="-1">◆ eslint.calculateConfigForFile(filePath)</h3> <pre class="language-js line-numbers-mode"><code><span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token keyword">await</span> eslint<span class="token punctuation">.</span><span class="token function">calculateConfigForFile</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>This method calculates the configuration for a given file, which can be useful for debugging purposes.</p> <h4 id="parameters-4" tabindex="-1">Parameters</h4> <ul> <li>
<code>filePath</code> (<code>string</code>)<br> The path to the file whose configuration you would like to calculate. Directory paths are forbidden because ESLint cannot handle the <code>overrides</code> setting.</li> </ul> <h4 id="return-value-3" tabindex="-1">Return Value</h4> <ul> <li>(<code>Promise&lt;Object&gt;</code>)<br> The promise that will be fulfilled with a configuration object.</li> </ul> <h3 id="-eslintispathignoredfilepath" tabindex="-1">◆ eslint.isPathIgnored(filePath)</h3> <pre class="language-js line-numbers-mode"><code><span class="token keyword">const</span> isPathIgnored <span class="token operator">=</span> <span class="token keyword">await</span> eslint<span class="token punctuation">.</span><span class="token function">isPathIgnored</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>This method checks if a given file is ignored by your configuration.</p> <h4 id="parameters-5" tabindex="-1">Parameters</h4> <ul> <li>
<code>filePath</code> (<code>string</code>)<br> The path to the file you want to check.</li> </ul> <h4 id="return-value-4" tabindex="-1">Return Value</h4> <ul> <li>(<code>Promise&lt;boolean&gt;</code>)<br> The promise that will be fulfilled with whether the file is ignored or not. If the file is ignored, then it will return <code>true</code>.</li> </ul> <h3 id="-eslintloadformatternameorpath" tabindex="-1">◆ eslint.loadFormatter(nameOrPath)</h3> <pre class="language-js line-numbers-mode"><code><span class="token keyword">const</span> formatter <span class="token operator">=</span> <span class="token keyword">await</span> eslint<span class="token punctuation">.</span><span class="token function">loadFormatter</span><span class="token punctuation">(</span>nameOrPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>This method loads a formatter. Formatters convert lint results to a human- or machine-readable string.</p> <h4 id="parameters-6" tabindex="-1">Parameters</h4> <ul> <li>
<code>nameOrPath</code> (<code>string | undefined</code>)<br> The path to the file you want to check. The following values are allowed: <ul> <li>
<code>undefined</code>. In this case, loads the <code>"stylish"</code> built-in formatter.</li> <li>A name of <a href="nodejs-api../use/formatters/index.html">built-in formatters</a>.</li> <li>A name of <a href="https://www.npmjs.com/search?q=eslintformatter">third-party formatters</a>. For examples: <ul> <li>
<code>"foo"</code> will load <code>eslint-formatter-foo</code>.</li> <li>
<code>"@foo"</code> will load <code>@foo/eslint-formatter</code>.</li> <li>
<code>"@foo/bar"</code> will load <code>@foo/eslint-formatter-bar</code>.</li> </ul> </li> <li>A path to the file that defines a formatter. The path must contain one or more path separators (<code>/</code>) in order to distinguish if it’s a path or not. For example, start with <code>./</code>.</li> </ul> </li> </ul> <h4 id="return-value-5" tabindex="-1">Return Value</h4> <ul> <li>(<code>Promise&lt;LoadedFormatter&gt;</code>)<br> The promise that will be fulfilled with a <a href="#-loadedformatter-type">LoadedFormatter</a> object.</li> </ul> <h3 id="-eslinthasflagflagname" tabindex="-1">◆ eslint.hasFlag(flagName)</h3> <p>This method is used to determine if a given feature flag is set, as in this example:</p> <pre class="language-js line-numbers-mode"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>eslint<span class="token punctuation">.</span><span class="token function">hasFlag</span><span class="token punctuation">(</span><span class="token string">"x_feature"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// handle flag</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="parameters-7" tabindex="-1">Parameters</h4> <ul> <li>
<code>flagName</code> (<code>string</code>)<br> The flag to check.</li> </ul> <h4 id="return-value-6" tabindex="-1">Return Value</h4> <ul> <li>(<code>boolean</code>)<br> True if the flag is enabled.</li> </ul> <h3 id="-eslintversion" tabindex="-1">◆ ESLint.version</h3> <pre class="language-js line-numbers-mode"><code><span class="token keyword">const</span> version <span class="token operator">=</span> ESLint<span class="token punctuation">.</span>version<span class="token punctuation">;</span>
</code></pre>
<p>The version string of ESLint. E.g. <code>"7.0.0"</code>.</p> <p>This is a static property.</p> <h3 id="-eslintdefaultconfig" tabindex="-1">◆ ESLint.defaultConfig</h3> <pre class="language-js line-numbers-mode"><code><span class="token keyword">const</span> defaultConfig <span class="token operator">=</span> ESLint<span class="token punctuation">.</span>defaultConfig<span class="token punctuation">;</span>
</code></pre>
<p>The default configuration that ESLint uses internally. This is provided for tooling that wants to calculate configurations using the same defaults as ESLint. Keep in mind that the default configuration may change from version to version, so you shouldn’t rely on any particular keys or values to be present.</p> <p>This is a static property.</p> <h3 id="-eslintoutputfixesresults" tabindex="-1">◆ ESLint.outputFixes(results)</h3> <pre class="language-js line-numbers-mode"><code><span class="token keyword">await</span> ESLint<span class="token punctuation">.</span><span class="token function">outputFixes</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>This method writes code modified by ESLint’s autofix feature into its respective file. If any of the modified files don’t exist, this method does nothing.</p> <p>This is a static method.</p> <h4 id="parameters-8" tabindex="-1">Parameters</h4> <ul> <li>
<code>results</code> (<code>LintResult[]</code>)<br> The <a href="#-lintresult-type">LintResult</a> objects to write.</li> </ul> <h4 id="return-value-7" tabindex="-1">Return Value</h4> <ul> <li>(<code>Promise&lt;void&gt;</code>)<br> The promise that will be fulfilled after all files are written.</li> </ul> <h3 id="-eslintgeterrorresultsresults" tabindex="-1">◆ ESLint.getErrorResults(results)</h3> <pre class="language-js line-numbers-mode"><code><span class="token keyword">const</span> filteredResults <span class="token operator">=</span> ESLint<span class="token punctuation">.</span><span class="token function">getErrorResults</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>This method copies the given results and removes warnings. The returned value contains only errors.</p> <p>This is a static method.</p> <h4 id="parameters-9" tabindex="-1">Parameters</h4> <ul> <li>
<code>results</code> (<code>LintResult[]</code>)<br> The <a href="#-lintresult-type">LintResult</a> objects to filter.</li> </ul> <h4 id="return-value-8" tabindex="-1">Return Value</h4> <ul> <li>(<code>LintResult[]</code>)<br> The filtered <a href="#-lintresult-type">LintResult</a> objects.</li> </ul> <h3 id="-lintresult-type" tabindex="-1">◆ LintResult type</h3> <p>The <code>LintResult</code> value is the information of the linting result of each file. The <a href="#-eslintlintfilespatterns"><code>eslint.lintFiles()</code></a> and <a href="#-eslintlinttextcode-options"><code>eslint.lintText()</code></a> methods return it. It has the following properties:</p> <ul> <li>
<code>filePath</code> (<code>string</code>)<br> The absolute path to the file of this result. This is the string <code>"&lt;text&gt;"</code> if the file path is unknown (when you didn’t pass the <code>options.filePath</code> option to the <a href="#-eslintlinttextcode-options"><code>eslint.lintText()</code></a> method).</li> <li>
<code>messages</code> (<code>LintMessage[]</code>)<br> The array of <a href="#-lintmessage-type">LintMessage</a> objects.</li> <li>
<code>suppressedMessages</code> (<code>SuppressedLintMessage[]</code>)<br> The array of <a href="#-suppressedlintmessage-type">SuppressedLintMessage</a> objects.</li> <li>
<code>fixableErrorCount</code> (<code>number</code>)<br> The number of errors that can be fixed automatically by the <code>fix</code> constructor option.</li> <li>
<code>fixableWarningCount</code> (<code>number</code>)<br> The number of warnings that can be fixed automatically by the <code>fix</code> constructor option.</li> <li>
<code>errorCount</code> (<code>number</code>)<br> The number of errors. This includes fixable errors and fatal errors.</li> <li>
<code>fatalErrorCount</code> (<code>number</code>)<br> The number of fatal errors.</li> <li>
<code>warningCount</code> (<code>number</code>)<br> The number of warnings. This includes fixable warnings.</li> <li>
<code>output</code> (<code>string | undefined</code>)<br> The modified source code text. This property is undefined if any fixable messages didn’t exist.</li> <li>
<code>source</code> (<code>string | undefined</code>)<br> The original source code text. This property is undefined if any messages didn’t exist or the <code>output</code> property exists.</li> <li>
<code>stats</code> (<code>Stats | undefined</code>)<br> The <a href="nodejs-api../extend/stats.html#-stats-type">Stats</a> object. This contains the lint performance statistics collected with the <code>stats</code> option.</li> <li>
<code>usedDeprecatedRules</code> (<code>{ ruleId: string; replacedBy: string[] }[]</code>)<br> The information about the deprecated rules that were used to check this file.</li> </ul> <h3 id="-lintmessage-type" tabindex="-1">◆ LintMessage type</h3> <p>The <code>LintMessage</code> value is the information of each linting error. The <code>messages</code> property of the <a href="#-lintresult-type">LintResult</a> type contains it. It has the following properties:</p> <ul> <li>
<code>ruleId</code> (<code>string</code> | <code>null</code>)<br> The rule name that generates this lint message. If this message is generated by the ESLint core rather than rules, this is <code>null</code>.</li> <li>
<code>severity</code> (<code>1 | 2</code>)<br> The severity of this message. <code>1</code> means warning and <code>2</code> means error.</li> <li>
<code>fatal</code> (<code>boolean | undefined</code>)<br> <code>true</code> if this is a fatal error unrelated to a rule, like a parsing error.</li> <li>
<code>message</code> (<code>string</code>)<br> The error message.</li> <li>
<code>messageId</code> (<code>string | undefined</code>)<br> The message ID of the lint error. This property is undefined if the rule does not use message IDs.</li> <li>
<code>line</code> (<code>number | undefined</code>)<br> The 1-based line number of the begin point of this message.</li> <li>
<code>column</code> (<code>number | undefined</code>)<br> The 1-based column number of the begin point of this message.</li> <li>
<code>endLine</code> (<code>number | undefined</code>)<br> The 1-based line number of the end point of this message. This property is undefined if this message is not a range.</li> <li>
<code>endColumn</code> (<code>number | undefined</code>)<br> The 1-based column number of the end point of this message. This property is undefined if this message is not a range.</li> <li>
<code>fix</code> (<code>EditInfo | undefined</code>)<br> The <a href="#-editinfo-type">EditInfo</a> object of autofix. This property is undefined if this message is not fixable.</li> <li>
<code>suggestions</code> (<code>{ desc: string; fix: EditInfo; messageId?: string; data?: object }[] | undefined</code>)<br> The list of suggestions. Each suggestion is the pair of a description and an <a href="#-editinfo-type">EditInfo</a> object to fix code. API users such as editor integrations can choose one of them to fix the problem of this message. This property is undefined if this message doesn’t have any suggestions.</li> </ul> <h3 id="-suppressedlintmessage-type" tabindex="-1">◆ SuppressedLintMessage type</h3> <p>The <code>SuppressedLintMessage</code> value is the information of each suppressed linting error. The <code>suppressedMessages</code> property of the <a href="#-lintresult-type">LintResult</a> type contains it. It has the following properties:</p> <ul> <li>
<code>ruleId</code> (<code>string</code> | <code>null</code>)<br> Same as <code>ruleId</code> in <a href="#-lintmessage-type">LintMessage</a> type.</li> <li>
<code>severity</code> (<code>1 | 2</code>)<br> Same as <code>severity</code> in <a href="#-lintmessage-type">LintMessage</a> type.</li> <li>
<code>fatal</code> (<code>boolean | undefined</code>)<br> Same as <code>fatal</code> in <a href="#-lintmessage-type">LintMessage</a> type.</li> <li>
<code>message</code> (<code>string</code>)<br> Same as <code>message</code> in <a href="#-lintmessage-type">LintMessage</a> type.</li> <li>
<code>messageId</code> (<code>string | undefined</code>)<br> Same as <code>messageId</code> in <a href="#-lintmessage-type">LintMessage</a> type.</li> <li>
<code>line</code> (<code>number | undefined</code>)<br> Same as <code>line</code> in <a href="#-lintmessage-type">LintMessage</a> type.</li> <li>
<code>column</code> (<code>number | undefined</code>)<br> Same as <code>column</code> in <a href="#-lintmessage-type">LintMessage</a> type.</li> <li>
<code>endLine</code> (<code>number | undefined</code>)<br> Same as <code>endLine</code> in <a href="#-lintmessage-type">LintMessage</a> type.</li> <li>
<code>endColumn</code> (<code>number | undefined</code>)<br> Same as <code>endColumn</code> in <a href="#-lintmessage-type">LintMessage</a> type.</li> <li>
<code>fix</code> (<code>EditInfo | undefined</code>)<br> Same as <code>fix</code> in <a href="#-lintmessage-type">LintMessage</a> type.</li> <li>
<code>suggestions</code> (<code>{ desc: string; fix: EditInfo; messageId?: string; data?: object }[] | undefined</code>)<br> Same as <code>suggestions</code> in <a href="#-lintmessage-type">LintMessage</a> type.</li> <li>
<code>suppressions</code> (<code>{ kind: string; justification: string}[]</code>)<br> The list of suppressions. Each suppression is the pair of a kind and a justification.</li> </ul> <h3 id="-editinfo-type" tabindex="-1">◆ EditInfo type</h3> <p>The <code>EditInfo</code> value is information to edit text. The <code>fix</code> and <code>suggestions</code> properties of <a href="#-lintmessage-type">LintMessage</a> type contain it. It has following properties:</p> <ul> <li>
<code>range</code> (<code>[number, number]</code>)<br> The pair of 0-based indices in source code text to remove.</li> <li>
<code>text</code> (<code>string</code>)<br> The text to add.</li> </ul> <p>This edit information means replacing the range of the <code>range</code> property by the <code>text</code> property value. It’s like <code>sourceCodeText.slice(0, edit.range[0]) + edit.text + sourceCodeText.slice(edit.range[1])</code>. Therefore, it’s an add if the <code>range[0]</code> and <code>range[1]</code> property values are the same value, and it’s removal if the <code>text</code> property value is empty string.</p> <h3 id="-loadedformatter-type" tabindex="-1">◆ LoadedFormatter type</h3> <p>The <code>LoadedFormatter</code> value is the object to convert the <a href="#-lintresult-type">LintResult</a> objects to text. The <a href="#-eslintloadformatternameorpath">eslint.loadFormatter()</a> method returns it. It has the following method:</p> <ul> <li>
<code>format</code> (<code>(results: LintResult[], resultsMeta?: ResultsMeta) =&gt; string | Promise&lt;string&gt;</code>)<br> The method to convert the <a href="#-lintresult-type">LintResult</a> objects to text. <code>resultsMeta</code> is an optional parameter that is primarily intended for use by the ESLint CLI and can contain only a <code>maxWarningsExceeded</code> property that would be passed through the <a href="nodejs-api../extend/custom-formatters.html#the-context-argument"><code>context</code></a> object when this method calls the underlying formatter function. Note that ESLint automatically generates <code>cwd</code> and <code>rulesMeta</code> properties of the <code>context</code> object, so you typically don’t need to pass in the second argument when calling this method.</li> </ul>  <h2 id="loadeslint" tabindex="-1">loadESLint()</h2> <p>The <code>loadESLint()</code> function is used for integrations that wish to support both the current configuration system (flat config) and the old configuration system (eslintrc). This function returns the correct <code>ESLint</code> class implementation based on the arguments provided:</p> <pre class="language-js line-numbers-mode"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> loadESLint <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"eslint"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// loads the default ESLint that the CLI would use based on process.cwd()</span>
<span class="token keyword">const</span> DefaultESLint <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">loadESLint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// loads the flat config version specifically</span>
<span class="token keyword">const</span> FlatESLint <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">loadESLint</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">useFlatConfig</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// loads the legacy version specifically</span>
<span class="token keyword">const</span> LegacyESLint <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">loadESLint</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">useFlatConfig</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>You can then use the returned constructor to instantiate a new <code>ESLint</code> instance, like this:</p> <pre class="language-js line-numbers-mode"><code><span class="token comment">// loads the default ESLint that the CLI would use based on process.cwd()</span>
<span class="token keyword">const</span> DefaultESLint <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">loadESLint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> eslint <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultESLint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>If you’re ever unsure which config system the returned constructor uses, check the <code>configType</code> property, which is either <code>"flat"</code> or <code>"eslintrc"</code>:</p> <pre class="language-js line-numbers-mode"><code><span class="token comment">// loads the default ESLint that the CLI would use based on process.cwd()</span>
<span class="token keyword">const</span> DefaultESLint <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">loadESLint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>DefaultESLint<span class="token punctuation">.</span>configType <span class="token operator">===</span> <span class="token string">"flat"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// do something specific to flat config</span>
<span class="token punctuation">}</span>
</code></pre>
<p>If you don’t need to support both the old and new configuration systems, then it’s recommended to just use the <code>ESLint</code> constructor directly.</p>  <h2 id="sourcecode" tabindex="-1">SourceCode</h2> <p>The <code>SourceCode</code> type represents the parsed source code that ESLint executes on. It’s used internally in ESLint and is also available so that already-parsed code can be used. You can create a new instance of <code>SourceCode</code> by passing in the text string representing the code and an abstract syntax tree (AST) in <a href="https://github.com/estree/estree">ESTree</a> format (including location information, range information, comments, and tokens):</p> <pre class="language-js line-numbers-mode"><code><span class="token keyword">const</span> SourceCode <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"eslint"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>SourceCode<span class="token punctuation">;</span>

<span class="token keyword">const</span> code <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SourceCode</span><span class="token punctuation">(</span><span class="token string">"var foo = bar;"</span><span class="token punctuation">,</span> ast<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>The <code>SourceCode</code> constructor throws an error if the AST is missing any of the required information.</p> <p>The <code>SourceCode</code> constructor strips Unicode BOM. Please note the AST also should be parsed from stripped text.</p> <pre class="language-js line-numbers-mode"><code><span class="token keyword">const</span> SourceCode <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"eslint"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>SourceCode<span class="token punctuation">;</span>

<span class="token keyword">const</span> code <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SourceCode</span><span class="token punctuation">(</span><span class="token string">"\uFEFFvar foo = bar;"</span><span class="token punctuation">,</span> ast<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">assert</span><span class="token punctuation">(</span>code<span class="token punctuation">.</span>hasBOM <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">assert</span><span class="token punctuation">(</span>code<span class="token punctuation">.</span>text <span class="token operator">===</span> <span class="token string">"var foo = bar;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="sourcecodesplitlines" tabindex="-1">SourceCode#splitLines()</h3> <p>This is a static function on <code>SourceCode</code> that is used to split the source code text into an array of lines.</p> <pre class="language-js line-numbers-mode"><code><span class="token keyword">const</span> SourceCode <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"eslint"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>SourceCode<span class="token punctuation">;</span>

<span class="token keyword">const</span> code <span class="token operator">=</span> <span class="token string">"var a = 1;\nvar b = 2;"</span>

<span class="token comment">// split code into an array</span>
<span class="token keyword">const</span> codeLines <span class="token operator">=</span> SourceCode<span class="token punctuation">.</span><span class="token function">splitLines</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/*
    Value of codeLines will be
    [
        "var a = 1;",
        "var b = 2;"
    ]
 */</span>
</code></pre> <h2 id="linter" tabindex="-1">Linter</h2> <p>The <code>Linter</code> object does the actual evaluation of the JavaScript code. It doesn’t do any filesystem operations, it simply parses and reports on the code. In particular, the <code>Linter</code> object does not process configuration files. Unless you are working in the browser, you probably want to use the <a href="#eslint-class">ESLint class</a> instead.</p> <p>The <code>Linter</code> is a constructor, and you can create a new instance by passing in the options you want to use. The available options are:</p> <ul> <li>
<code>cwd</code> - Path to a directory that should be considered as the current working directory. It is accessible to rules from <code>context.cwd</code> or by calling <code>context.getCwd()</code> (see <a href="nodejs-api../extend/custom-rules.html#the-context-object">The Context Object</a>). If <code>cwd</code> is <code>undefined</code>, it will be normalized to <code>process.cwd()</code> if the global <code>process</code> object is defined (for example, in the Node.js runtime) , or <code>undefined</code> otherwise.</li> </ul> <p>For example:</p> <pre class="language-js line-numbers-mode"><code><span class="token keyword">const</span> Linter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"eslint"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Linter<span class="token punctuation">;</span>
<span class="token keyword">const</span> linter1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Linter</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">cwd</span><span class="token operator">:</span> <span class="token string">'path/to/project'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> linter2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Linter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>In this example, rules run on <code>linter1</code> will get <code>path/to/project</code> from <code>context.cwd</code> or when calling <code>context.getCwd()</code>. Those run on <code>linter2</code> will get <code>process.cwd()</code> if the global <code>process</code> object is defined or <code>undefined</code> otherwise (e.g. on the browser <a href="https://eslint.org/demo">https://eslint.org/demo</a>).</p> <h3 id="linterverify" tabindex="-1">Linter#verify</h3> <p>The most important method on <code>Linter</code> is <code>verify()</code>, which initiates linting of the given text. This method accepts three arguments:</p> <ul> <li>
<code>code</code> - the source code to lint (a string or instance of <code>SourceCode</code>).</li> <li>
<code>config</code> - a <a href="nodejs-api../use/configure/index.html">Configuration object</a> or an array of configuration objects. <ul> <li>
<strong>Note</strong>: If you want to lint text and have your configuration be read from the file system, use <a href="#-eslintlintfilespatterns"><code>ESLint#lintFiles()</code></a> or <a href="#-eslintlinttextcode-options"><code>ESLint#lintText()</code></a> instead.</li> </ul> </li> <li>
<code>options</code> - (optional) Additional options for this run. <ul> <li>
<code>filename</code> - (optional) the filename to associate with the source code.</li> <li>
<code>preprocess</code> - (optional) A function that <a href="nodejs-api../extend/plugins.html#processors-in-plugins">Processors in Plugins</a> documentation describes as the <code>preprocess</code> method.</li> <li>
<code>postprocess</code> - (optional) A function that <a href="nodejs-api../extend/plugins.html#processors-in-plugins">Processors in Plugins</a> documentation describes as the <code>postprocess</code> method.</li> <li>
<code>filterCodeBlock</code> - (optional) A function that decides which code blocks the linter should adopt. The function receives two arguments. The first argument is the virtual filename of a code block. The second argument is the text of the code block. If the function returned <code>true</code> then the linter adopts the code block. If the function was omitted, the linter adopts only <code>*.js</code> code blocks. If you provided a <code>filterCodeBlock</code> function, it overrides this default behavior, so the linter doesn’t adopt <code>*.js</code> code blocks automatically.</li> <li>
<code>disableFixes</code> - (optional) when set to <code>true</code>, the linter doesn’t make either the <code>fix</code> or <code>suggestions</code> property of the lint result.</li> <li>
<code>allowInlineConfig</code> - (optional) set to <code>false</code> to disable inline comments from changing ESLint rules.</li> <li>
<code>reportUnusedDisableDirectives</code> - (optional) when set to <code>true</code>, adds reported errors for unused <code>eslint-disable</code> and <code>eslint-enable</code> directives when no problems would be reported in the disabled area anyway.</li> <li>
<code>ruleFilter</code> - (optional) A function predicate that decides which rules should run. It receives an object containing <code>ruleId</code> and <code>severity</code>, and returns <code>true</code> if the rule should be run.</li> </ul> </li> </ul> <p>If the third argument is a string, it is interpreted as the <code>filename</code>.</p> <p>You can call <code>verify()</code> like this:</p> <pre class="language-js line-numbers-mode"><code><span class="token keyword">const</span> Linter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"eslint"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Linter<span class="token punctuation">;</span>
<span class="token keyword">const</span> linter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Linter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> messages <span class="token operator">=</span> linter<span class="token punctuation">.</span><span class="token function">verify</span><span class="token punctuation">(</span><span class="token string">"var foo;"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">semi</span><span class="token operator">:</span> <span class="token number">2</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">"foo.js"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// or using SourceCode</span>

<span class="token keyword">const</span> Linter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"eslint"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Linter<span class="token punctuation">,</span>
    linter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Linter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    SourceCode <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"eslint"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>SourceCode<span class="token punctuation">;</span>

<span class="token keyword">const</span> code <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SourceCode</span><span class="token punctuation">(</span><span class="token string">"var foo = bar;"</span><span class="token punctuation">,</span> ast<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> messages <span class="token operator">=</span> linter<span class="token punctuation">.</span><span class="token function">verify</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">semi</span><span class="token operator">:</span> <span class="token number">2</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">"foo.js"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>The <code>verify()</code> method returns an array of objects containing information about the linting warnings and errors. Here’s an example:</p> <pre class="language-js line-numbers-mode"><code><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">fatal</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token literal-property property">ruleId</span><span class="token operator">:</span> <span class="token string">"semi"</span><span class="token punctuation">,</span>
        <span class="token literal-property property">severity</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token literal-property property">line</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token literal-property property">column</span><span class="token operator">:</span> <span class="token number">23</span><span class="token punctuation">,</span>
        <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">"Expected a semicolon."</span><span class="token punctuation">,</span>
        <span class="token literal-property property">fix</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">range</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">";"</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre>
<p>The information available for each linting message is:</p> <ul> <li>
<code>column</code> - the column on which the error occurred.</li> <li>
<code>fatal</code> - usually omitted, but will be set to true if there’s a parsing error (not related to a rule).</li> <li>
<code>line</code> - the line on which the error occurred.</li> <li>
<code>message</code> - the message that should be output.</li> <li>
<code>messageId</code> - the ID of the message used to generate the message (this property is omitted if the rule does not use message IDs).</li> <li>
<code>nodeType</code> - (<strong>Deprecated:</strong> This property will be removed in a future version of ESLint.) the node or token type that was reported with the problem.</li> <li>
<code>ruleId</code> - the ID of the rule that triggered the messages (or null if <code>fatal</code> is true).</li> <li>
<code>severity</code> - either 1 or 2, depending on your configuration.</li> <li>
<code>endColumn</code> - the end column of the range on which the error occurred (this property is omitted if it’s not range).</li> <li>
<code>endLine</code> - the end line of the range on which the error occurred (this property is omitted if it’s not range).</li> <li>
<code>fix</code> - an object describing the fix for the problem (this property is omitted if no fix is available).</li> <li>
<code>suggestions</code> - an array of objects describing possible lint fixes for editors to programmatically enable (see details in the <a href="nodejs-api../extend/custom-rules.html#providing-suggestions">Working with Rules docs</a>).</li> </ul> <p>You can get the suppressed messages from the previous run by <code>getSuppressedMessages()</code> method. If there is not a previous run, <code>getSuppressedMessage()</code> will return an empty list.</p> <pre class="language-js line-numbers-mode"><code><span class="token keyword">const</span> Linter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"eslint"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Linter<span class="token punctuation">;</span>
<span class="token keyword">const</span> linter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Linter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> messages <span class="token operator">=</span> linter<span class="token punctuation">.</span><span class="token function">verify</span><span class="token punctuation">(</span><span class="token string">"var foo = bar; // eslint-disable-line -- Need to suppress"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">semi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"error"</span><span class="token punctuation">,</span> <span class="token string">"never"</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">"foo.js"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> suppressedMessages <span class="token operator">=</span> linter<span class="token punctuation">.</span><span class="token function">getSuppressedMessages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>suppressedMessages<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>suppressions<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [{ "kind": "directive", "justification": "Need to suppress" }]</span>
</code></pre>
<p>You can also get an instance of the <code>SourceCode</code> object used inside of <code>linter</code> by using the <code>getSourceCode()</code> method:</p> <pre class="language-js line-numbers-mode"><code><span class="token keyword">const</span> Linter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"eslint"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Linter<span class="token punctuation">;</span>
<span class="token keyword">const</span> linter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Linter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> messages <span class="token operator">=</span> linter<span class="token punctuation">.</span><span class="token function">verify</span><span class="token punctuation">(</span><span class="token string">"var foo = bar;"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">semi</span><span class="token operator">:</span> <span class="token number">2</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">"foo.js"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> code <span class="token operator">=</span> linter<span class="token punctuation">.</span><span class="token function">getSourceCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>code<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// "var foo = bar;"</span>
</code></pre>
<p>In this way, you can retrieve the text and AST used for the last run of <code>linter.verify()</code>.</p> <h3 id="linterverifyandfix" tabindex="-1">Linter#verifyAndFix()</h3> <p>This method is similar to verify except that it also runs autofixing logic, similar to the <code>--fix</code> flag on the command line. The result object will contain the autofixed code, along with any remaining linting messages for the code that were not autofixed.</p> <pre class="language-js line-numbers-mode"><code><span class="token keyword">const</span> Linter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"eslint"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Linter<span class="token punctuation">;</span>
<span class="token keyword">const</span> linter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Linter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> messages <span class="token operator">=</span> linter<span class="token punctuation">.</span><span class="token function">verifyAndFix</span><span class="token punctuation">(</span><span class="token string">"var foo"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">semi</span><span class="token operator">:</span> <span class="token number">2</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Output object from this method:</p> <pre class="language-js line-numbers-mode"><code><span class="token punctuation">{</span>
    <span class="token literal-property property">fixed</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token string">"var foo;"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">messages</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p>The information available is:</p> <ul> <li>
<code>fixed</code> - True, if the code was fixed.</li> <li>
<code>output</code> - Fixed code text (might be the same as input if no fixes were applied).</li> <li>
<code>messages</code> - Collection of all messages for the given code (It has the same information as explained above under <code>verify</code> block).</li> </ul> <h3 id="linterversionlinterversion" tabindex="-1">Linter#version/Linter.version</h3> <p>Each instance of <code>Linter</code> has a <code>version</code> property containing the semantic version number of ESLint that the <code>Linter</code> instance is from.</p> <pre class="language-js line-numbers-mode"><code><span class="token keyword">const</span> Linter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"eslint"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Linter<span class="token punctuation">;</span>
<span class="token keyword">const</span> linter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Linter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

linter<span class="token punctuation">.</span>version<span class="token punctuation">;</span> <span class="token comment">// =&gt; '9.0.0'</span>
</code></pre>
<p>There is also a <code>Linter.version</code> property that you can read without instantiating <code>Linter</code>:</p> <pre class="language-js line-numbers-mode"><code><span class="token keyword">const</span> Linter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"eslint"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Linter<span class="token punctuation">;</span>

Linter<span class="token punctuation">.</span>version<span class="token punctuation">;</span> <span class="token comment">// =&gt; '9.0.0'</span>
</code></pre>
<h3 id="lintergettimes" tabindex="-1">Linter#getTimes()</h3> <p>This method is used to get the times spent on (parsing, fixing, linting) a file. See <code>times</code> property of the <a href="nodejs-api../extend/stats.html#-stats-type">Stats</a> object.</p> <h3 id="lintergetfixpasscount" tabindex="-1">Linter#getFixPassCount()</h3> <p>This method is used to get the number of autofix passes made. See <code>fixPasses</code> property of the <a href="nodejs-api../extend/stats.html#-stats-type">Stats</a> object.</p> <h3 id="linterhasflag" tabindex="-1">Linter#hasFlag()</h3> <p>This method is used to determine if a given feature flag is set, as in this example:</p> <pre class="language-js line-numbers-mode"><code><span class="token keyword">const</span> Linter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"eslint"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Linter<span class="token punctuation">;</span>
<span class="token keyword">const</span> linter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Linter</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">flags</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"x_feature"</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>linter<span class="token punctuation">.</span><span class="token function">hasFlag</span><span class="token punctuation">(</span><span class="token string">"x_feature"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <h2 id="ruletester" tabindex="-1">RuleTester</h2> <p><code>eslint.RuleTester</code> is a utility to write tests for ESLint rules. It is used internally for the bundled rules that come with ESLint, and it can also be used by plugins.</p> <p>Example usage:</p> <pre class="language-js line-numbers-mode"><code><span class="token string">"use strict"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> rule <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"../../../lib/rules/my-rule"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    RuleTester <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"eslint"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>RuleTester<span class="token punctuation">;</span>

<span class="token keyword">const</span> ruleTester <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RuleTester</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ruleTester<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">"my-rule"</span><span class="token punctuation">,</span> rule<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">valid</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">"var foo = true"</span><span class="token punctuation">,</span>
            <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">allowFoo</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>

    <span class="token literal-property property">invalid</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">"var invalidVariable = true"</span><span class="token punctuation">,</span>
            <span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">"Unexpected invalid variable."</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">"var invalidVariable = true"</span><span class="token punctuation">,</span>
            <span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^Unexpected.+variable</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>The <code>RuleTester</code> constructor accepts an optional object argument, which can be used to specify defaults for your test cases. For example, if all of your test cases use ES2015, you can set it as a default:</p> <pre class="language-js line-numbers-mode"><code><span class="token keyword">const</span> ruleTester <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RuleTester</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">languageOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">ecmaVersion</span><span class="token operator">:</span> <span class="token number">2015</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<aside role="note" class="alert alert--tip">  <div class="alert__content"> <span class="alert__type">Tip</span> <div class="alert__text">
<p>If you don’t specify any options to the <code>RuleTester</code> constructor, then it uses the ESLint defaults (<code>languageOptions: { ecmaVersion: "latest", sourceType: "module" }</code>).</p> </div> </div> </aside><p>The <code>RuleTester#run()</code> method is used to run the tests. It should be passed the following arguments:</p> <ul> <li>The name of the rule (string)</li> <li>The rule object itself (see <a href="nodejs-api../extend/custom-rules.html">“working with rules”</a>)</li> <li>An object containing <code>valid</code> and <code>invalid</code> properties, each of which is an array containing test cases.</li> </ul> <p>A test case is an object with the following properties:</p> <ul> <li>
<code>name</code> (string, optional): The name to use for the test case, to make it easier to find</li> <li>
<code>code</code> (string, required): The source code that the rule should be run on</li> <li>
<code>options</code> (array, optional): The options passed to the rule. The rule severity should not be included in this list.</li> <li>
<code>before</code> (function, optional): Function to execute before testing the case.</li> <li>
<code>after</code> (function, optional): Function to execute after testing the case regardless of its result.</li> <li>
<code>filename</code> (string, optional): The filename for the given case (useful for rules that make assertions about filenames).</li> <li>
<code>only</code> (boolean, optional): Run this case exclusively for debugging in supported test frameworks.</li> </ul> <p>In addition to the properties above, invalid test cases can also have the following properties:</p> <ul> <li> <p><code>errors</code> (number or array, required): Asserts some properties of the errors that the rule is expected to produce when run on this code. If this is a number, asserts the number of errors produced. Otherwise, this should be a list of objects, each containing information about a single reported error. The following properties can be used for an error (all are optional unless otherwise noted):</p> <ul> <li>
<code>message</code> (string/regexp): The message for the error. Must provide this or <code>messageId</code>
</li> <li>
<code>messageId</code> (string): The ID for the error. Must provide this or <code>message</code>. See <a href="#testing-errors-with-messageid">testing errors with messageId</a> for details</li> <li>
<code>data</code> (object): Placeholder data which can be used in combination with <code>messageId</code>
</li> <li>
<code>type</code> (string): (<strong>Deprecated:</strong> This property will be removed in a future version of ESLint.) The type of the reported AST node</li> <li>
<code>line</code> (number): The 1-based line number of the reported location</li> <li>
<code>column</code> (number): The 1-based column number of the reported location</li> <li>
<code>endLine</code> (number): The 1-based line number of the end of the reported location</li> <li>
<code>endColumn</code> (number): The 1-based column number of the end of the reported location</li> <li>
<code>suggestions</code> (array): An array of objects with suggestion details to check. Required if the rule produces suggestions. See <a href="#testing-suggestions">Testing Suggestions</a> for details</li> </ul> <p>If a string is provided as an error instead of an object, the string is used to assert the <code>message</code> of the error.</p> </li> <li> <p><code>output</code> (string, required if the rule fixes code): Asserts the output that will be produced when using this rule for a single pass of autofixing (e.g. with the <code>--fix</code> command line flag). If this is <code>null</code> or omitted, asserts that none of the reported problems suggest autofixes.</p> </li> </ul> <p>Any additional properties of a test case will be passed directly to the linter as config options. For example, a test case can have a <code>languageOptions</code> property to configure parser behavior:</p> <pre class="language-js line-numbers-mode"><code><span class="token punctuation">{</span>
    <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">"let foo;"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">languageOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">ecmaVersion</span><span class="token operator">:</span> <span class="token number">2015</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>If a valid test case only uses the <code>code</code> property, it can optionally be provided as a string containing the code, rather than an object with a <code>code</code> key.</p> <h3 id="testing-errors-with-messageid" tabindex="-1">Testing Errors with <code>messageId</code>
</h3> <p>If the rule under test uses <code>messageId</code>s, you can use <code>messageId</code> property in a test case to assert reported error’s <code>messageId</code> instead of its <code>message</code>.</p> <pre class="language-js line-numbers-mode"><code><span class="token punctuation">{</span>
    <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">"let foo;"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">messageId</span><span class="token operator">:</span> <span class="token string">"unexpected"</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p>For messages with placeholders, a test case can also use <code>data</code> property to additionally assert reported error’s <code>message</code>.</p> <pre class="language-js line-numbers-mode"><code><span class="token punctuation">{</span>
    <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">"let foo;"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">messageId</span><span class="token operator">:</span> <span class="token string">"unexpected"</span><span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"foo"</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Please note that <code>data</code> in a test case does not assert <code>data</code> passed to <code>context.report</code>. Instead, it is used to form the expected message text which is then compared with the received <code>message</code>.</p> <h3 id="testing-fixes" tabindex="-1">Testing Fixes</h3> <p>The result of applying fixes can be tested by using the <code>output</code> property of an invalid test case. The <code>output</code> property should be used only when you expect a fix to be applied to the specified <code>code</code>; you can safely omit <code>output</code> if no changes are expected to the code. Here’s an example:</p> <pre class="language-js line-numbers-mode"><code>ruleTester<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">"my-rule-for-no-foo"</span><span class="token punctuation">,</span> rule<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">valid</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">invalid</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">"var foo;"</span><span class="token punctuation">,</span>
        <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token string">"var bar;"</span><span class="token punctuation">,</span>
        <span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            <span class="token literal-property property">messageId</span><span class="token operator">:</span> <span class="token string">"shouldBeBar"</span><span class="token punctuation">,</span>
            <span class="token literal-property property">line</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token literal-property property">column</span><span class="token operator">:</span> <span class="token number">5</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>A the end of this invalid test case, <code>RuleTester</code> expects a fix to be applied that results in the code changing from <code>var foo;</code> to <code>var bar;</code>. If the output after applying the fix doesn’t match, then the test fails.</p> <aside role="note" class="alert alert--important">  <div class="alert__content"> <span class="alert__type">Important</span> <div class="alert__text">
<p>ESLint makes its best attempt at applying all fixes, but there is no guarantee that all fixes will be applied. As such, you should aim for testing each type of fix in a separate <code>RuleTester</code> test case rather than one test case to test multiple fixes. When there is a conflict between two fixes (because they apply to the same section of code) <code>RuleTester</code> applies only the first fix.</p> </div> </div> </aside><h3 id="testing-suggestions" tabindex="-1">Testing Suggestions</h3> <p>Suggestions can be tested by defining a <code>suggestions</code> key on an errors object. If this is a number, it asserts the number of suggestions provided for the error. Otherwise, this should be an array of objects, each containing information about a single provided suggestion. The following properties can be used:</p> <ul> <li>
<code>desc</code> (string): The suggestion <code>desc</code> value. Must provide this or <code>messageId</code>
</li> <li>
<code>messageId</code> (string): The suggestion <code>messageId</code> value for suggestions that use <code>messageId</code>s. Must provide this or <code>desc</code>
</li> <li>
<code>data</code> (object): Placeholder data which can be used in combination with <code>messageId</code>.</li> <li>
<code>output</code> (string, required): A code string representing the result of applying the suggestion fix to the input code</li> </ul> <p>Example:</p> <pre class="language-js line-numbers-mode"><code>ruleTester<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">"my-rule-for-no-foo"</span><span class="token punctuation">,</span> rule<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">valid</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">invalid</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">"var foo;"</span><span class="token punctuation">,</span>
        <span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            <span class="token literal-property property">suggestions</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
                <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">"Rename identifier 'foo' to 'bar'"</span><span class="token punctuation">,</span>
                <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token string">"var bar;"</span>
            <span class="token punctuation">}</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p><code>messageId</code> and <code>data</code> properties in suggestion test objects work the same way as in error test objects. See <a href="#testing-errors-with-messageid">testing errors with messageId</a> for details.</p> <pre class="language-js line-numbers-mode"><code>ruleTester<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">"my-rule-for-no-foo"</span><span class="token punctuation">,</span> rule<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">valid</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">invalid</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">"var foo;"</span><span class="token punctuation">,</span>
        <span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            <span class="token literal-property property">suggestions</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
                <span class="token literal-property property">messageId</span><span class="token operator">:</span> <span class="token string">"renameFoo"</span><span class="token punctuation">,</span>
                <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">newName</span><span class="token operator">:</span> <span class="token string">"bar"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token string">"var bar;"</span>
            <span class="token punctuation">}</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h3 id="customizing-ruletester" tabindex="-1">Customizing RuleTester</h3> <p><code>RuleTester</code> depends on two functions to run tests: <code>describe</code> and <code>it</code>. These functions can come from various places:</p> <ol> <li> <p>If <code>RuleTester.describe</code> and <code>RuleTester.it</code> have been set to function values, <code>RuleTester</code> will use <code>RuleTester.describe</code> and <code>RuleTester.it</code> to run tests. You can use this to customize the behavior of <code>RuleTester</code> to match a test framework that you’re using.</p> <p>If <code>RuleTester.itOnly</code> has been set to a function value, <code>RuleTester</code> will call <code>RuleTester.itOnly</code> instead of <code>RuleTester.it</code> to run cases with <code>only: true</code>. If <code>RuleTester.itOnly</code> is not set but <code>RuleTester.it</code> has an <code>only</code> function property, <code>RuleTester</code> will fall back to <code>RuleTester.it.only</code>.</p> </li> <li> <p>Otherwise, if <code>describe</code> and <code>it</code> are present as globals, <code>RuleTester</code> will use <code>globalThis.describe</code> and <code>globalThis.it</code> to run tests and <code>globalThis.it.only</code> to run cases with <code>only: true</code>. This allows <code>RuleTester</code> to work when using frameworks like <a href="https://mochajs.org/">Mocha</a> without any additional configuration.</p> </li> <li> <p>Otherwise, <code>RuleTester#run</code> will simply execute all of the tests in sequence, and will throw an error if one of them fails. This means you can simply execute a test file that calls <code>RuleTester.run</code> using <code>Node.js</code>, without needing a testing framework.</p> </li> </ol> <p><code>RuleTester#run</code> calls the <code>describe</code> function with two arguments: a string describing the rule, and a callback function. The callback calls the <code>it</code> function with a string describing the test case, and a test function. The test function will return successfully if the test passes, and throw an error if the test fails. The signature for <code>only</code> is the same as <code>it</code>. <code>RuleTester</code> calls either <code>it</code> or <code>only</code> for every case even when some cases have <code>only: true</code>, and the test framework is responsible for implementing test case exclusivity. (Note that this is the standard behavior for test suites when using frameworks like <a href="https://mochajs.org/">Mocha</a>; this information is only relevant if you plan to customize <code>RuleTester.describe</code>, <code>RuleTester.it</code>, or <code>RuleTester.itOnly</code>.)</p> <p>Example of customizing <code>RuleTester</code>:</p> <pre class="language-js line-numbers-mode"><code><span class="token string">"use strict"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> RuleTester <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"eslint"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>RuleTester<span class="token punctuation">,</span>
    test <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"my-test-runner"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    myRule <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"../../../lib/rules/my-rule"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

RuleTester<span class="token punctuation">.</span><span class="token function-variable function">describe</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">text<span class="token punctuation">,</span> method</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    RuleTester<span class="token punctuation">.</span>it<span class="token punctuation">.</span>title <span class="token operator">=</span> text<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">method</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

RuleTester<span class="token punctuation">.</span><span class="token function-variable function">it</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">text<span class="token punctuation">,</span> method</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">test</span><span class="token punctuation">(</span>RuleTester<span class="token punctuation">.</span>it<span class="token punctuation">.</span>title <span class="token operator">+</span> <span class="token string">": "</span> <span class="token operator">+</span> text<span class="token punctuation">,</span> method<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// then use RuleTester as documented</span>

<span class="token keyword">const</span> ruleTester <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RuleTester</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ruleTester<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">"my-rule"</span><span class="token punctuation">,</span> myRule<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">valid</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// valid test cases</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">invalid</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// invalid test cases</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="_attribution">
  <p class="_attribution-p">
    &copy; OpenJS Foundation and other contributors<br>Licensed under the MIT License.<br>
    <a href="https://eslint.org/docs/latest/integrate/nodejs-api" class="_attribution-link">https://eslint.org/docs/latest/integrate/nodejs-api</a>
  </p>
</div>
