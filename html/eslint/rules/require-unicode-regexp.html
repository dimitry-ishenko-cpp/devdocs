<h1>require-unicode-regexp</h1> 
<p>Enforce the use of <code>u</code> or <code>v</code> flag on RegExp</p> <div class="rule-categories" aria-label="Rule Categories"><div class="rule-category"> <span class="rule-category__icon">💡 <span class="visually-hidden">hasSuggestions</span></span> <p> Some problems reported by this rule are manually fixable by editor <a href="require-unicode-regexp../use/core-concepts.html#rule-suggestions">suggestions</a> </p> </div></div>  <p>RegExp <code>u</code> flag has two effects:</p> <ol> <li> <p><strong>Make the regular expression handling UTF-16 surrogate pairs correctly.</strong></p> <p>Especially, character range syntax gets the correct behavior.</p> <pre class="language-js line-numbers-mode"><code><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[👍]$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"👍"</span><span class="token punctuation">)</span> <span class="token comment">//→ false</span>
<span class="token operator">/</span><span class="token operator">^</span><span class="token punctuation">[</span>👍<span class="token punctuation">]</span>$<span class="token operator">/</span>u<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"👍"</span><span class="token punctuation">)</span> <span class="token comment">//→ true</span>
</code></pre>
</li> <li> <p><strong>Make the regular expression throwing syntax errors early as disabling <a href="https://www.ecma-international.org/ecma-262/6.0/#sec-regular-expressions-patterns">Annex B extensions</a>.</strong></p> <p>Because of historical reason, JavaScript regular expressions are tolerant of syntax errors. For example, <code>/\w{1, 2/</code> is a syntax error, but JavaScript doesn’t throw the error. It matches strings such as <code>"a{1, 2"</code> instead. Such a recovering logic is defined in Annex B.</p> <p>The <code>u</code> flag disables the recovering logic Annex B defined. As a result, you can find errors early. This is similar to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode">the strict mode</a>.</p> </li> </ol> <p>The RegExp <code>v</code> flag, introduced in ECMAScript 2024, is a superset of the <code>u</code> flag, and offers two more features:</p> <ol> <li> <p><strong>Unicode properties of strings</strong></p> <p>With the Unicode property escape, you can use properties of strings.</p> <pre class="language-js line-numbers-mode"><code><span class="token keyword">const</span> re <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\p{RGI_Emoji}$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">v</span></span><span class="token punctuation">;</span>

<span class="token comment">// Match an emoji that consists of just 1 code point:</span>
re<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'⚽'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '\u26BD'</span>
<span class="token comment">// → true ✅</span>

<span class="token comment">// Match an emoji that consists of multiple code points:</span>
re<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'👨🏾‍⚕️'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '\u{1F468}\u{1F3FE}\u200D\u2695\uFE0F'</span>
<span class="token comment">// → true ✅</span>
</code></pre>
</li> <li> <p><strong>Set notation</strong></p> <p>It allows for set operations between character classes.</p> <pre class="language-js line-numbers-mode"><code><span class="token keyword">const</span> re <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\p{White_Space}&amp;&amp;\p{ASCII}]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">v</span></span><span class="token punctuation">;</span>
re<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// → true</span>
re<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'\u2028'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// → false</span>
</code></pre>
</li> </ol> <p>Therefore, the <code>u</code> and <code>v</code> flags let us work better with regular expressions.</p> <h2 id="rule-details" tabindex="-1">Rule Details</h2> <p>This rule aims to enforce the use of <code>u</code> or <code>v</code> flag on regular expressions.</p> <p>Examples of <strong>incorrect</strong> code for this rule:</p> <div class="incorrect"> <a class="c-btn c-btn--secondary c-btn--playground" href="https://eslint.org/play#eyJvcHRpb25zIjp7InBhcnNlck9wdGlvbnMiOnsic291cmNlVHlwZSI6Im1vZHVsZSJ9fSwidGV4dCI6Ii8qZXNsaW50IHJlcXVpcmUtdW5pY29kZS1yZWdleHA6IGVycm9yICovXG5cbmNvbnN0IGEgPSAvYWFhL1xuY29uc3QgYiA9IC9iYmIvZ2lcbmNvbnN0IGMgPSBuZXcgUmVnRXhwKFwiY2NjXCIpXG5jb25zdCBkID0gbmV3IFJlZ0V4cChcImRkZFwiLCBcImdpXCIpIn0=" target="_blank"> Open in Playground </a><pre class="language-js line-numbers-mode"><code><span class="token comment">/*eslint require-unicode-regexp: error */</span>

<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token eslint-marked eslint-message-id-1" title="Use the 'u' flag."><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">aaa</span><span class="token regex-delimiter">/</span></span></span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token eslint-marked eslint-message-id-1" title="Use the 'u' flag."><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">bbb</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span></span>
<span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token eslint-marked eslint-message-id-1" title="Use the 'u' flag."><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">"ccc"</span><span class="token punctuation">)</span></span>
<span class="token keyword">const</span> d <span class="token operator">=</span> <span class="token eslint-marked eslint-message-id-1" title="Use the 'u' flag."><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">"ddd"</span><span class="token punctuation">,</span> <span class="token string">"gi"</span><span class="token punctuation">)</span></span>
</code></pre>
</div>
<p>Examples of <strong>correct</strong> code for this rule:</p> <div class="correct"> <a class="c-btn c-btn--secondary c-btn--playground" href="https://eslint.org/play#eyJvcHRpb25zIjp7InBhcnNlck9wdGlvbnMiOnsic291cmNlVHlwZSI6Im1vZHVsZSJ9fSwidGV4dCI6Ii8qZXNsaW50IHJlcXVpcmUtdW5pY29kZS1yZWdleHA6IGVycm9yICovXG5cbmNvbnN0IGEgPSAvYWFhL3VcbmNvbnN0IGIgPSAvYmJiL2dpdVxuY29uc3QgYyA9IG5ldyBSZWdFeHAoXCJjY2NcIiwgXCJ1XCIpXG5jb25zdCBkID0gbmV3IFJlZ0V4cChcImRkZFwiLCBcImdpdVwiKVxuXG5jb25zdCBlID0gL2FhYS92XG5jb25zdCBmID0gL2JiYi9naXZcbmNvbnN0IGcgPSBuZXcgUmVnRXhwKFwiY2NjXCIsIFwidlwiKVxuY29uc3QgaCA9IG5ldyBSZWdFeHAoXCJkZGRcIiwgXCJnaXZcIilcblxuLy8gVGhpcyBydWxlIGlnbm9yZXMgUmVnRXhwIGNhbGxzIGlmIHRoZSBmbGFncyBjb3VsZCBub3QgYmUgZXZhbHVhdGVkIHRvIGEgc3RhdGljIHZhbHVlLlxuZnVuY3Rpb24gaShmbGFncykge1xuICAgIHJldHVybiBuZXcgUmVnRXhwKFwiZWVlXCIsIGZsYWdzKVxufSJ9" target="_blank"> Open in Playground </a><pre class="language-js line-numbers-mode"><code><span class="token comment">/*eslint require-unicode-regexp: error */</span>

<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">aaa</span><span class="token regex-delimiter">/</span><span class="token regex-flags">u</span></span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">bbb</span><span class="token regex-delimiter">/</span><span class="token regex-flags">giu</span></span>
<span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">"ccc"</span><span class="token punctuation">,</span> <span class="token string">"u"</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">"ddd"</span><span class="token punctuation">,</span> <span class="token string">"giu"</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> e <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">aaa</span><span class="token regex-delimiter">/</span><span class="token regex-flags">v</span></span>
<span class="token keyword">const</span> f <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">bbb</span><span class="token regex-delimiter">/</span><span class="token regex-flags">giv</span></span>
<span class="token keyword">const</span> g <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">"ccc"</span><span class="token punctuation">,</span> <span class="token string">"v"</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> h <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">"ddd"</span><span class="token punctuation">,</span> <span class="token string">"giv"</span><span class="token punctuation">)</span>

<span class="token comment">// This rule ignores RegExp calls if the flags could not be evaluated to a static value.</span>
<span class="token keyword">function</span> <span class="token function">i</span><span class="token punctuation">(</span><span class="token parameter">flags</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">"eee"</span><span class="token punctuation">,</span> flags<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
</div>
<h2 id="options" tabindex="-1">Options</h2> <p>This rule has one object option:</p> <ul> <li>
<code>"requireFlag": "u"|"v"</code> requires a particular Unicode regex flag</li> </ul> <h3 id="requireflag-u" tabindex="-1">requireFlag: “u”</h3> <p>The <code>u</code> flag may be preferred in environments that do not support the <code>v</code> flag.</p> <p>Examples of <strong>incorrect</strong> code for this rule with the <code>{ "requireFlag": "u" }</code> option:</p> <div class="incorrect"> <a class="c-btn c-btn--secondary c-btn--playground" href="https://eslint.org/play#eyJvcHRpb25zIjp7InBhcnNlck9wdGlvbnMiOnsic291cmNlVHlwZSI6Im1vZHVsZSJ9fSwidGV4dCI6Ii8qZXNsaW50IHJlcXVpcmUtdW5pY29kZS1yZWdleHA6IFtcImVycm9yXCIsIHsgXCJyZXF1aXJlRmxhZ1wiOiBcInVcIiB9XSAqL1xuXG5jb25zdCBmb29FbXB0eSA9IC9mb28vO1xuXG5jb25zdCBmb29FbXB0eVJlZ2V4cCA9IG5ldyBSZWdFeHAoJ2ZvbycpO1xuXG5jb25zdCBmb28gPSAvZm9vL3Y7XG5cbmNvbnN0IGZvb1JlZ2V4cCA9IG5ldyBSZWdFeHAoJ2ZvbycsICd2Jyk7In0=" target="_blank"> Open in Playground </a><pre class="language-js line-numbers-mode"><code><span class="token comment">/*eslint require-unicode-regexp: ["error", { "requireFlag": "u" }] */</span>

<span class="token keyword">const</span> fooEmpty <span class="token operator">=</span> <span class="token eslint-marked eslint-message-id-1" title="Use the 'u' flag."><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">foo</span><span class="token regex-delimiter">/</span></span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> fooEmptyRegexp <span class="token operator">=</span> <span class="token eslint-marked eslint-message-id-1" title="Use the 'u' flag."><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token eslint-marked eslint-message-id-1" title="Use the 'u' flag."><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">foo</span><span class="token regex-delimiter">/</span><span class="token regex-flags">v</span></span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> fooRegexp <span class="token operator">=</span> <span class="token eslint-marked eslint-message-id-1" title="Use the 'u' flag."><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'v'</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span>
</code></pre>
</div>
<p>Examples of <strong>correct</strong> code for this rule with the <code>{ "requireFlag": "u" }</code> option:</p> <div class="correct"> <a class="c-btn c-btn--secondary c-btn--playground" href="https://eslint.org/play#eyJvcHRpb25zIjp7InBhcnNlck9wdGlvbnMiOnsic291cmNlVHlwZSI6Im1vZHVsZSJ9fSwidGV4dCI6Ii8qZXNsaW50IHJlcXVpcmUtdW5pY29kZS1yZWdleHA6IFtcImVycm9yXCIsIHsgXCJyZXF1aXJlRmxhZ1wiOiBcInVcIiB9XSAqL1xuXG5jb25zdCBmb28gPSAvZm9vL3U7XG5cbmNvbnN0IGZvb1JlZ2V4cCA9IG5ldyBSZWdFeHAoJ2ZvbycsICd1Jyk7In0=" target="_blank"> Open in Playground </a><pre class="language-js line-numbers-mode"><code><span class="token comment">/*eslint require-unicode-regexp: ["error", { "requireFlag": "u" }] */</span>

<span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">foo</span><span class="token regex-delimiter">/</span><span class="token regex-flags">u</span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> fooRegexp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'u'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
</div>
<h3 id="requireflag-v" tabindex="-1">requireFlag: “v”</h3> <p>The <code>v</code> flag may be a better choice when it is supported because it has more features than the <code>u</code> flag (e.g., the ability to test Unicode properties of strings). It does have a stricter syntax, however (e.g., the need to escape certain characters within character classes).</p> <p>Examples of <strong>incorrect</strong> code for this rule with the <code>{ "requireFlag": "v" }</code> option:</p> <div class="incorrect"> <a class="c-btn c-btn--secondary c-btn--playground" href="https://eslint.org/play#eyJvcHRpb25zIjp7InBhcnNlck9wdGlvbnMiOnsic291cmNlVHlwZSI6Im1vZHVsZSJ9fSwidGV4dCI6Ii8qZXNsaW50IHJlcXVpcmUtdW5pY29kZS1yZWdleHA6IFtcImVycm9yXCIsIHsgXCJyZXF1aXJlRmxhZ1wiOiBcInZcIiB9XSAqL1xuXG5jb25zdCBmb29FbXB0eSA9IC9mb28vO1xuXG5jb25zdCBmb29FbXB0eVJlZ2V4cCA9IG5ldyBSZWdFeHAoJ2ZvbycpO1xuXG5jb25zdCBmb28gPSAvZm9vL3U7XG5cbmNvbnN0IGZvb1JlZ2V4cCA9IG5ldyBSZWdFeHAoJ2ZvbycsICd1Jyk7In0=" target="_blank"> Open in Playground </a><pre class="language-js line-numbers-mode"><code><span class="token comment">/*eslint require-unicode-regexp: ["error", { "requireFlag": "v" }] */</span>

<span class="token keyword">const</span> fooEmpty <span class="token operator">=</span> <span class="token eslint-marked eslint-message-id-1" title="Use the 'v' flag."><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">foo</span><span class="token regex-delimiter">/</span></span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> fooEmptyRegexp <span class="token operator">=</span> <span class="token eslint-marked eslint-message-id-1" title="Use the 'v' flag."><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token eslint-marked eslint-message-id-1" title="Use the 'v' flag."><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">foo</span><span class="token regex-delimiter">/</span><span class="token regex-flags">u</span></span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> fooRegexp <span class="token operator">=</span> <span class="token eslint-marked eslint-message-id-1" title="Use the 'v' flag."><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'u'</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span>
</code></pre>
</div>
<p>Examples of <strong>correct</strong> code for this rule with the <code>{ "requireFlag": "v" }</code> option:</p> <div class="correct"> <a class="c-btn c-btn--secondary c-btn--playground" href="https://eslint.org/play#eyJvcHRpb25zIjp7InBhcnNlck9wdGlvbnMiOnsic291cmNlVHlwZSI6Im1vZHVsZSJ9fSwidGV4dCI6Ii8qZXNsaW50IHJlcXVpcmUtdW5pY29kZS1yZWdleHA6IFtcImVycm9yXCIsIHsgXCJyZXF1aXJlRmxhZ1wiOiBcInZcIiB9XSAqL1xuXG5jb25zdCBmb28gPSAvZm9vL3Y7XG5cbmNvbnN0IGZvb1JlZ2V4cCA9IG5ldyBSZWdFeHAoJ2ZvbycsICd2Jyk7In0=" target="_blank"> Open in Playground </a><pre class="language-js line-numbers-mode"><code><span class="token comment">/*eslint require-unicode-regexp: ["error", { "requireFlag": "v" }] */</span>

<span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">foo</span><span class="token regex-delimiter">/</span><span class="token regex-flags">v</span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> fooRegexp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'v'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
</div>
<h2 id="when-not-to-use-it" tabindex="-1">When Not To Use It</h2> <p>If you don’t want to warn on regular expressions without either a <code>u</code> or a <code>v</code> flag, then it’s safe to disable this rule.</p> <h2 id="version">Version</h2> <p>This rule was introduced in ESLint v5.3.0.</p> <h2 id="further-reading">Further Reading</h2> <article class="resource">  <div class="resource__content"> <a href="https://github.com/tc39/proposal-regexp-v-flag" class="resource__title"> GitHub - tc39/proposal-regexp-v-flag: UTS18 set notation in regular expressions </a><br>  </div>  </article> <article class="resource">  <div class="resource__content"> <a href="https://v8.dev/features/regexp-v-flag" class="resource__title"> RegExp v flag with set notation and properties of strings · V8 </a><br>  </div>  </article> <h2 id="resources">Resources</h2> <ul> <li><a href="https://github.com/eslint/eslint/blob/main/lib/rules/require-unicode-regexp.js">Rule source</a></li> <li><a href="https://github.com/eslint/eslint/blob/main/tests/lib/rules/require-unicode-regexp.js">Tests source</a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; OpenJS Foundation and other contributors<br>Licensed under the MIT License.<br>
    <a href="https://eslint.org/docs/latest/rules/require-unicode-regexp" class="_attribution-link">https://eslint.org/docs/latest/rules/require-unicode-regexp</a>
  </p>
</div>
