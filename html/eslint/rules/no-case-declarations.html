<h1>no-case-declarations</h1> 
<p>Disallow lexical declarations in case clauses</p> <div class="rule-categories" aria-label="Rule Categories"><div class="rule-category"> <span class="rule-category__icon">âœ… <span class="visually-hidden">Recommended</span></span> <p> The <code>"extends": "eslint:recommended"</code> property in a <a href="no-case-declarations../use/configure/configuration-files.html#extending-configuration-files">configuration file</a> enables this rule </p> </div></div> <nav class="docs-toc c-toc" aria-labelledby="js-toc-label"><h2 class="c-toc__label" id="js-toc-label">Table of Contents</h2> <div class="c-toc__panel" id="js-toc-panel"> <nav class="c-toc"> <ol> <li>
<a href="#rule-details">Rule Details</a> </li> <li>
<a href="#when-not-to-use-it">When Not To Use It</a> </li> <li>
<a href="#related-rules">Related Rules</a> </li> <li>
<a href="#version">Version</a> </li> <li>
<a href="#resources">Resources</a> </li> </ol> </nav> </div></nav> <p>This rule disallows lexical declarations (<code>let</code>, <code>const</code>, <code>function</code> and <code>class</code>) in <code>case</code>/<code>default</code> clauses. The reason is that the lexical declaration is visible in the entire switch block but it only gets initialized when it is assigned, which will only happen if the case where it is defined is reached.</p> <p>To ensure that the lexical declaration only applies to the current case clause wrap your clauses in blocks.</p> <h2 id="rule-details" tabindex="-1">Rule Details</h2> <p>This rule aims to prevent access to uninitialized lexical bindings as well as accessing hoisted functions across case clauses.</p> <p>Examples of <strong>incorrect</strong> code for this rule:</p> <div class="incorrect"> <a class="c-btn c-btn--secondary c-btn--playground" href="https://eslint.org/play#eyJvcHRpb25zIjp7InBhcnNlck9wdGlvbnMiOnsic291cmNlVHlwZSI6Im1vZHVsZSJ9fSwidGV4dCI6Ii8qZXNsaW50IG5vLWNhc2UtZGVjbGFyYXRpb25zOiBcImVycm9yXCIqL1xuLyplc2xpbnQtZW52IGVzNiovXG5cbnN3aXRjaCAoZm9vKSB7XG4gICAgY2FzZSAxOlxuICAgICAgICBsZXQgeCA9IDE7XG4gICAgICAgIGJyZWFrO1xuICAgIGNhc2UgMjpcbiAgICAgICAgY29uc3QgeSA9IDI7XG4gICAgICAgIGJyZWFrO1xuICAgIGNhc2UgMzpcbiAgICAgICAgZnVuY3Rpb24gZigpIHt9XG4gICAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICAgIGNsYXNzIEMge31cbn0ifQ==" target="_blank"> Open in Playground </a><pre class="language-js line-numbers-mode"><code><span class="token comment">/*eslint no-case-declarations: "error"*/</span>
<span class="token comment">/*eslint-env es6*/</span>

<span class="token keyword">switch</span> <span class="token punctuation">(</span>foo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>
        <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span>
        <span class="token keyword">const</span> y <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span>
        <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
        <span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
</div>
<p>Examples of <strong>correct</strong> code for this rule:</p> <div class="correct"> <a class="c-btn c-btn--secondary c-btn--playground" href="https://eslint.org/play#eyJvcHRpb25zIjp7InBhcnNlck9wdGlvbnMiOnsic291cmNlVHlwZSI6Im1vZHVsZSJ9fSwidGV4dCI6Ii8qZXNsaW50IG5vLWNhc2UtZGVjbGFyYXRpb25zOiBcImVycm9yXCIqL1xuLyplc2xpbnQtZW52IGVzNiovXG5cbi8vIERlY2xhcmF0aW9ucyBvdXRzaWRlIHN3aXRjaC1zdGF0ZW1lbnRzIGFyZSB2YWxpZFxuY29uc3QgYSA9IDA7XG5cbnN3aXRjaCAoZm9vKSB7XG4gICAgLy8gVGhlIGZvbGxvd2luZyBjYXNlIGNsYXVzZXMgYXJlIHdyYXBwZWQgaW50byBibG9ja3MgdXNpbmcgYnJhY2tldHNcbiAgICBjYXNlIDE6IHtcbiAgICAgICAgbGV0IHggPSAxO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgY2FzZSAyOiB7XG4gICAgICAgIGNvbnN0IHkgPSAyO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgY2FzZSAzOiB7XG4gICAgICAgIGZ1bmN0aW9uIGYoKSB7fVxuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgY2FzZSA0OlxuICAgICAgICAvLyBEZWNsYXJhdGlvbnMgdXNpbmcgdmFyIHdpdGhvdXQgYnJhY2tldHMgYXJlIHZhbGlkIGR1ZSB0byBmdW5jdGlvbi1zY29wZSBob2lzdGluZ1xuICAgICAgICB2YXIgeiA9IDQ7XG4gICAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgY2xhc3MgQyB7fVxuICAgIH1cbn0ifQ==" target="_blank"> Open in Playground </a><pre class="language-js line-numbers-mode"><code><span class="token comment">/*eslint no-case-declarations: "error"*/</span>
<span class="token comment">/*eslint-env es6*/</span>

<span class="token comment">// Declarations outside switch-statements are valid</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword">switch</span> <span class="token punctuation">(</span>foo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// The following case clauses are wrapped into blocks using brackets</span>
    <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> y <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">case</span> <span class="token number">4</span><span class="token operator">:</span>
        <span class="token comment">// Declarations using var without brackets are valid due to function-scope hoisting</span>
        <span class="token keyword">var</span> z <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
</div>
<h2 id="when-not-to-use-it" tabindex="-1">When Not To Use It</h2> <p>If you depend on fall through behavior and want access to bindings introduced in the case block.</p> <h2 id="related-rules">Related Rules</h2> <ul class="related-rules__list" role="list"> <li class="related-rules__list__item"> <a href="no-fallthrough.html"> <span>no-fallthrough</span>  </a> </li> </ul> <h2 id="version">Version</h2> <p>This rule was introduced in ESLint v1.9.0.</p> <h2 id="resources">Resources</h2> <ul> <li><a href="https://github.com/eslint/eslint/blob/main/lib/rules/no-case-declarations.js">Rule source</a></li> <li><a href="https://github.com/eslint/eslint/blob/main/tests/lib/rules/no-case-declarations.js">Tests source</a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; OpenJS Foundation and other contributors<br>Licensed under the MIT License.<br>
    <a href="https://eslint.org/docs/latest/rules/no-case-declarations" class="_attribution-link">https://eslint.org/docs/latest/rules/no-case-declarations</a>
  </p>
</div>
