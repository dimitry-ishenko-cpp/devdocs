<h1 id="diagnostics">Regression Diagnostics and Specification Tests</h1>  <h2 id="regression-diagnostics-and-specification-tests">Introduction</h2> <p>In many cases of statistical analysis, we are not sure whether our statistical model is correctly specified. For example when using ols, then linearity and homoscedasticity are assumed, some test statistics additionally assume that the errors are normally distributed or that we have a large sample. Since our results depend on these statistical assumptions, the results are only correct of our assumptions hold (at least approximately).</p> <p>One solution to the problem of uncertainty about the correct specification is to use robust methods, for example robust regression or robust covariance (sandwich) estimators. The second approach is to test whether our sample is consistent with these assumptions.</p> <p>The following briefly summarizes specification and diagnostics tests for linear regression.</p>   <h2 id="heteroscedasticity-tests">Heteroscedasticity Tests</h2> <p>For these test the null hypothesis is that all observations have the same error variance, i.e. errors are homoscedastic. The tests differ in which kind of heteroscedasticity is considered as alternative hypothesis. They also vary in the power of the test for different types of heteroscedasticity.</p> <dl class="docutils"> <dt>
 <a class="reference internal" href="generated/statsmodels.stats.diagnostic.het_breuschpagan.html#statsmodels.stats.diagnostic.het_breuschpagan" title="statsmodels.stats.diagnostic.het_breuschpagan"><code>het_breuschpagan</code></a>
</dt> <dd>Lagrange Multiplier Heteroscedasticity Test by Breusch-Pagan</dd> <dt>
 <a class="reference internal" href="generated/statsmodels.stats.diagnostic.het_white.html#statsmodels.stats.diagnostic.het_white" title="statsmodels.stats.diagnostic.het_white"><code>het_white</code></a>
</dt> <dd>Lagrange Multiplier Heteroscedasticity Test by White</dd> <dt>
 <a class="reference internal" href="generated/statsmodels.stats.diagnostic.het_goldfeldquandt.html#statsmodels.stats.diagnostic.het_goldfeldquandt" title="statsmodels.stats.diagnostic.het_goldfeldquandt"><code>het_goldfeldquandt</code></a>
</dt> <dd>test whether variance is the same in 2 subsamples</dd> </dl>   <h2 id="autocorrelation-tests">Autocorrelation Tests</h2> <p>This group of test whether the regression residuals are not autocorrelated. They assume that observations are ordered by time.</p> <dl class="docutils"> <dt>
<code>durbin_watson</code> </dt> <dd>
<ul class="first last simple"> <li>Durbin-Watson test for no autocorrelation of residuals</li> <li>printed with summary()</li> </ul> </dd> <dt>
 <a class="reference internal" href="generated/statsmodels.stats.diagnostic.acorr_ljungbox.html#statsmodels.stats.diagnostic.acorr_ljungbox" title="statsmodels.stats.diagnostic.acorr_ljungbox"><code>acorr_ljungbox</code></a>
</dt> <dd>
<ul class="first last simple"> <li>Ljung-Box test for no autocorrelation of residuals</li> <li>also returns Box-Pierce statistic</li> </ul> </dd> <dt>
 <a class="reference internal" href="generated/statsmodels.stats.diagnostic.acorr_breusch_godfrey.html#statsmodels.stats.diagnostic.acorr_breusch_godfrey" title="statsmodels.stats.diagnostic.acorr_breusch_godfrey"><code>acorr_breusch_godfrey</code></a>
</dt> <dd>
<ul class="first last simple"> <li>Breusch-Pagan test for no autocorrelation of residuals</li> </ul> </dd> <dt>missing</dt> <dd>
<ul class="first last simple"> <li>?</li> </ul> </dd> </dl>   <h2 id="non-linearity-tests">Non-Linearity Tests</h2> <dl class="docutils"> <dt>
 <a class="reference internal" href="generated/statsmodels.stats.diagnostic.linear_harvey_collier.html#statsmodels.stats.diagnostic.linear_harvey_collier" title="statsmodels.stats.diagnostic.linear_harvey_collier"><code>linear_harvey_collier</code></a>
</dt> <dd>
<ul class="first last simple"> <li>Multiplier test for Null hypothesis that linear specification is correct</li> </ul> </dd> <dt>
<code>acorr_linear_rainbow</code> </dt> <dd>
<ul class="first last simple"> <li>Multiplier test for Null hypothesis that linear specification is correct.</li> </ul> </dd> <dt>
<code>acorr_linear_lm</code> </dt> <dd>
<ul class="first last simple"> <li>Lagrange Multiplier test for Null hypothesis that linear specification is correct. This tests against specific functional alternatives.</li> </ul> </dd> </dl>   <h2 id="tests-for-structural-change-parameter-stability">Tests for Structural Change, Parameter Stability</h2> <p>Test whether all or some regression coefficient are constant over the entire data sample.</p>  <h3 id="known-change-point">Known Change Point</h3> <dl class="docutils"> <dt>OneWayLS :</dt> <dd>
<ul class="first last simple"> <li>flexible ols wrapper for testing identical regression coefficients across predefined subsamples (eg. groups)</li> </ul> </dd> <dt>missing</dt> <dd>
<ul class="first last simple"> <li>predictive test: Greene, number of observations in subsample is smaller than number of regressors</li> </ul> </dd> </dl>   <h3 id="unknown-change-point">Unknown Change Point</h3> <dl class="docutils"> <dt>
 <a class="reference internal" href="generated/statsmodels.stats.diagnostic.breaks_cusumolsresid.html#statsmodels.stats.diagnostic.breaks_cusumolsresid" title="statsmodels.stats.diagnostic.breaks_cusumolsresid"><code>breaks_cusumolsresid</code></a>
</dt> <dd>
<ul class="first last simple"> <li>cusum test for parameter stability based on ols residuals</li> </ul> </dd> <dt>
 <a class="reference internal" href="generated/statsmodels.stats.diagnostic.breaks_hansen.html#statsmodels.stats.diagnostic.breaks_hansen" title="statsmodels.stats.diagnostic.breaks_hansen"><code>breaks_hansen</code></a>
</dt> <dd>
<ul class="first last simple"> <li>test for model stability, breaks in parameters for ols, Hansen 1992</li> </ul> </dd> <dt>
 <a class="reference internal" href="generated/statsmodels.stats.diagnostic.recursive_olsresiduals.html#statsmodels.stats.diagnostic.recursive_olsresiduals" title="statsmodels.stats.diagnostic.recursive_olsresiduals"><code>recursive_olsresiduals</code></a>
</dt> <dd>Calculate recursive ols with residuals and cusum test statistic. This is currently mainly helper function for recursive residual based tests. However, since it uses recursive updating and doesn’t estimate separate problems it should be also quite efficient as expanding OLS function.</dd> <dt>missing</dt> <dd>
<ul class="first last simple"> <li>supLM, expLM, aveLM (Andrews, Andrews/Ploberger)</li> <li>R-structchange also has musum (moving cumulative sum tests)</li> <li>test on recursive parameter estimates, which are there?</li> </ul> </dd> </dl>    <h2 id="mutlicollinearity-tests">Mutlicollinearity Tests</h2> <dl class="docutils"> <dt>conditionnum (statsmodels.stattools)</dt> <dd>
<ul class="first last simple"> <li>– needs test vs Stata –</li> <li>cf Grene (3rd ed.) pp 57-8</li> </ul> </dd> <dt>numpy.linalg.cond</dt> <dd>
<ul class="first last simple"> <li>(for more general condition numbers, but no behind the scenes help for design preparation)</li> </ul> </dd> <dt>Variance Inflation Factors</dt> <dd>This is currently together with influence and outlier measures (with some links to other tests here: <a class="reference external" href="http://www.stata.com/help.cgi?vif">http://www.stata.com/help.cgi?vif</a>)</dd> </dl>   <h2 id="normality-and-distribution-tests">Normality and Distribution Tests</h2> <dl class="docutils"> <dt>
<code>jarque_bera</code> </dt> <dd>
<ul class="first last simple"> <li>printed with summary()</li> <li>test for normal distribution of residuals</li> </ul> </dd> <dt>Normality tests in scipy stats</dt> <dd>need to find list again</dd> <dt>
<code>omni_normtest</code> </dt> <dd>
<ul class="first last simple"> <li>test for normal distribution of residuals</li> <li>printed with summary()</li> </ul> </dd> <dt>
 <a class="reference internal" href="generated/statsmodels.stats.diagnostic.normal_ad.html#statsmodels.stats.diagnostic.normal_ad" title="statsmodels.stats.diagnostic.normal_ad"><code>normal_ad</code></a>
</dt> <dd>
<ul class="first last simple"> <li>Anderson Darling test for normality with estimated mean and variance</li> </ul> </dd> <dt>
<code>kstest_normal</code> <a class="reference internal" href="generated/statsmodels.stats.diagnostic.lilliefors.html#statsmodels.stats.diagnostic.lilliefors" title="statsmodels.stats.diagnostic.lilliefors"><code>lilliefors</code></a>
</dt> <dd>Lilliefors test for normality, this is a Kolmogorov-Smirnov tes with for normality with estimated mean and variance. lilliefors is an alias for kstest_normal</dd> </dl> <p>qqplot, scipy.stats.probplot</p> <dl class="docutils"> <dt>other goodness-of-fit tests for distributions in scipy.stats and enhancements</dt> <dd>
<ul class="first last simple"> <li>kolmogorov-smirnov</li> <li>anderson : Anderson-Darling</li> <li>likelihood-ratio, …</li> <li>chisquare tests, powerdiscrepancy : needs wrapping (for binning)</li> </ul> </dd> </dl>   <h2 id="outlier-and-influence-diagnostic-measures">Outlier and Influence Diagnostic Measures</h2> <p>These measures try to identify observations that are outliers, with large residual, or observations that have a large influence on the regression estimates. Robust Regression, RLM, can be used to both estimate in an outlier robust way as well as identify outlier. The advantage of RLM that the estimation results are not strongly influenced even if there are many outliers, while most of the other measures are better in identifying individual outliers and might not be able to identify groups of outliers.</p> <dl class="docutils"> <dt>
 <a class="reference internal" href="generated/statsmodels.robust.robust_linear_model.rlm.html#statsmodels.robust.robust_linear_model.RLM" title="statsmodels.robust.robust_linear_model.RLM"><code>RLM</code></a>
</dt> <dd>
<p class="first">example from example_rlm.py</p> <pre data-language="python">import statsmodels.api as sm

### Example for using Huber's T norm with the default
### median absolute deviation scaling

data = sm.datasets.stackloss.load()
data.exog = sm.add_constant(data.exog)
huber_t = sm.RLM(data.endog, data.exog, M=sm.robust.norms.HuberT())
hub_results = huber_t.fit()
print(hub_results.weights)
</pre> <p class="last">And the weights give an idea of how much a particular observation is down-weighted according to the scaling asked for.</p> </dd> <dt>
 <a class="reference internal" href="generated/statsmodels.stats.outliers_influence.olsinfluence.html#statsmodels.stats.outliers_influence.OLSInfluence" title="statsmodels.stats.outliers_influence.OLSInfluence"><code>Influence</code></a>
</dt> <dd>
<p class="first">Class in stats.outliers_influence, most standard measures for outliers and influence are available as methods or attributes given a fitted OLS model. This is mainly written for OLS, some but not all measures are also valid for other models. Some of these statistics can be calculated from an OLS results instance, others require that an OLS is estimated for each left out variable.</p> <ul class="last simple"> <li>resid_press</li> <li>resid_studentized_external</li> <li>resid_studentized_internal</li> <li>ess_press</li> <li>hat_matrix_diag</li> <li>cooks_distance - Cook’s Distance <a class="reference external" href="http://en.wikipedia.org/wiki/Cook%27s_distance">Wikipedia</a> (with some other links)</li> <li>cov_ratio</li> <li>dfbetas</li> <li>dffits</li> <li>dffits_internal</li> <li>det_cov_params_not_obsi</li> <li>params_not_obsi</li> <li>sigma2_not_obsi</li> </ul> </dd> </dl>   <h2 id="unit-root-tests">Unit Root Tests</h2> <dl class="docutils"> <dt>
 <a class="reference internal" href="generated/statsmodels.stats.diagnostic.unitroot_adf.html#statsmodels.stats.diagnostic.unitroot_adf" title="statsmodels.stats.diagnostic.unitroot_adf"><code>unitroot_adf</code></a>
</dt> <dd>
<ul class="first last simple"> <li>same as adfuller but with different signature</li> </ul> </dd> </dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2009&ndash;2012 Statsmodels Developers<br>&copy; 2006&ndash;2008 Scipy Developers<br>&copy; 2006 Jonathan E. Taylor<br>Licensed under the 3-clause BSD License.<br>
    <a href="http://www.statsmodels.org/stable/diagnostic.html" class="_attribution-link">http://www.statsmodels.org/stable/diagnostic.html</a>
  </p>
</div>
