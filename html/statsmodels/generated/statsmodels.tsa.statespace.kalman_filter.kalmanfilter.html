<h1 id="statsmodels-tsa-statespace-kalman-filter-kalmanfilter">statsmodels.tsa.statespace.kalman_filter.KalmanFilter</h1> <dl class="class"> <dt id="statsmodels.tsa.statespace.kalman_filter.KalmanFilter">
<code>class statsmodels.tsa.statespace.kalman_filter.KalmanFilter(k_endog, k_states, k_posdef=None, loglikelihood_burn=0, tolerance=1e-19, results_class=None, kalman_filter_classes=None, **kwargs)</code> <a class="reference internal" href="http://www.statsmodels.org/stable/_modules/statsmodels/tsa/statespace/kalman_filter.html#KalmanFilter"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>State space representation of a time series process, with Kalman filter</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>k_endog</strong> (<em>array_like</em><em> or </em><em>integer</em>) – The observed time-series process <span class="math notranslate nohighlight">\(y\)</span> if array like or the number of variables in the process if an integer.</li> <li>
<strong>k_states</strong> (<em>int</em>) – The dimension of the unobserved state process.</li> <li>
<strong>k_posdef</strong> (<em>int</em><em>, </em><em>optional</em>) – The dimension of a guaranteed positive definite covariance matrix describing the shocks in the measurement equation. Must be less than or equal to <code>k_states</code>. Default is <code>k_states</code>.</li> <li>
<strong>loglikelihood_burn</strong> (<em>int</em><em>, </em><em>optional</em>) – The number of initial periods during which the loglikelihood is not recorded. Default is 0.</li> <li>
<strong>tolerance</strong> (<em>float</em><em>, </em><em>optional</em>) – The tolerance at which the Kalman filter determines convergence to steady-state. Default is 1e-19.</li> <li>
<strong>results_class</strong> (<em>class</em><em>, </em><em>optional</em>) – Default results class to use to save filtering output. Default is <code>FilterResults</code>. If specified, class must extend from <code>FilterResults</code>.</li> <li>
<strong>**kwargs</strong> – Keyword arguments may be used to provide values for the filter, inversion, and stability methods. See <code>set_filter_method</code>, <code>set_inversion_method</code>, and <code>set_stability_method</code>. Keyword arguments may be used to provide default values for state space matrices. See <code>Representation</code> for more details.</li> </ul> </td> </tr>  </table> <h4 class="rubric">Notes</h4> <p>There are several types of options available for controlling the Kalman filter operation. All options are internally held as bitmasks, but can be manipulated by setting class attributes, which act like boolean flags. For more information, see the <code>set_*</code> class method documentation. The options are:</p> <dl class="docutils"> <dt>filter_method</dt> <dd>The filtering method controls aspects of which Kalman filtering approach will be used.</dd> <dt>inversion_method</dt> <dd>The Kalman filter may contain one matrix inversion: that of the forecast error covariance matrix. The inversion method controls how and if that inverse is performed.</dd> <dt>stability_method</dt> <dd>The Kalman filter is a recursive algorithm that may in some cases suffer issues with numerical stability. The stability method controls what, if any, measures are taken to promote stability.</dd> <dt>conserve_memory</dt> <dd>By default, the Kalman filter computes a number of intermediate matrices at each iteration. The memory conservation options control which of those matrices are stored.</dd> <dt>filter_timing</dt> <dd>By default, the Kalman filter follows Durbin and Koopman, 2012, in initializing the filter with predicted values. Kim and Nelson, 1999, instead initialize the filter with filtered values, which is essentially just a different timing convention.</dd> </dl> <p>The <code>filter_method</code> and <code>inversion_method</code> options intentionally allow the possibility that multiple methods will be indicated. In the case that multiple methods are selected, the underlying Kalman filter will attempt to select the optional method given the input data.</p> <p>For example, it may be that INVERT_UNIVARIATE and SOLVE_CHOLESKY are indicated (this is in fact the default case). In this case, if the endogenous vector is 1-dimensional (<code>k_endog</code> = 1), then INVERT_UNIVARIATE is used and inversion reduces to simple division, and if it has a larger dimension, the Cholesky decomposition along with linear solving (rather than explicit matrix inversion) is used. If only SOLVE_CHOLESKY had been set, then the Cholesky decomposition method would <em>always</em> be used, even in the case of 1-dimensional data.</p> <div class="admonition seealso"> <p class="first admonition-title">See also</p> <p class="last"><a class="reference internal" href="statsmodels.tsa.statespace.kalman_filter.filterresults.html#statsmodels.tsa.statespace.kalman_filter.FilterResults" title="statsmodels.tsa.statespace.kalman_filter.FilterResults"><code>FilterResults</code></a>, <a class="reference internal" href="statsmodels.tsa.statespace.representation.representation.html#statsmodels.tsa.statespace.representation.Representation" title="statsmodels.tsa.statespace.representation.Representation"><code>statsmodels.tsa.statespace.representation.Representation</code></a></p> </div> <h4 class="rubric">Methods</h4> <table class="longtable docutils">   <tr>
<td>
<a class="reference internal" href="statsmodels.tsa.statespace.kalman_filter.kalmanfilter.bind.html#statsmodels.tsa.statespace.kalman_filter.KalmanFilter.bind" title="statsmodels.tsa.statespace.kalman_filter.KalmanFilter.bind"><code>bind</code></a>(endog)</td> <td>Bind data to the statespace representation</td> </tr> <tr>
<td>
<a class="reference internal" href="statsmodels.tsa.statespace.kalman_filter.kalmanfilter.filter.html#statsmodels.tsa.statespace.kalman_filter.KalmanFilter.filter" title="statsmodels.tsa.statespace.kalman_filter.KalmanFilter.filter"><code>filter</code></a>([filter_method, inversion_method, …])</td> <td>Apply the Kalman filter to the statespace model.</td> </tr> <tr>
<td>
<a class="reference internal" href="statsmodels.tsa.statespace.kalman_filter.kalmanfilter.impulse_responses.html#statsmodels.tsa.statespace.kalman_filter.KalmanFilter.impulse_responses" title="statsmodels.tsa.statespace.kalman_filter.KalmanFilter.impulse_responses"><code>impulse_responses</code></a>([steps, impulse, …])</td> <td>Impulse response function</td> </tr> <tr>
<td>
<a class="reference internal" href="statsmodels.tsa.statespace.kalman_filter.kalmanfilter.initialize_approximate_diffuse.html#statsmodels.tsa.statespace.kalman_filter.KalmanFilter.initialize_approximate_diffuse" title="statsmodels.tsa.statespace.kalman_filter.KalmanFilter.initialize_approximate_diffuse"><code>initialize_approximate_diffuse</code></a>([variance])</td> <td>Initialize the statespace model with approximate diffuse values.</td> </tr> <tr>
<td>
<a class="reference internal" href="statsmodels.tsa.statespace.kalman_filter.kalmanfilter.initialize_known.html#statsmodels.tsa.statespace.kalman_filter.KalmanFilter.initialize_known" title="statsmodels.tsa.statespace.kalman_filter.KalmanFilter.initialize_known"><code>initialize_known</code></a>(initial_state, …)</td> <td>Initialize the statespace model with known distribution for initial state.</td> </tr> <tr>
<td>
<a class="reference internal" href="statsmodels.tsa.statespace.kalman_filter.kalmanfilter.initialize_stationary.html#statsmodels.tsa.statespace.kalman_filter.KalmanFilter.initialize_stationary" title="statsmodels.tsa.statespace.kalman_filter.KalmanFilter.initialize_stationary"><code>initialize_stationary</code></a>()</td> <td>Initialize the statespace model as stationary.</td> </tr> <tr>
<td>
<a class="reference internal" href="statsmodels.tsa.statespace.kalman_filter.kalmanfilter.loglike.html#statsmodels.tsa.statespace.kalman_filter.KalmanFilter.loglike" title="statsmodels.tsa.statespace.kalman_filter.KalmanFilter.loglike"><code>loglike</code></a>(**kwargs)</td> <td>Calculate the loglikelihood associated with the statespace model.</td> </tr> <tr>
<td>
<a class="reference internal" href="statsmodels.tsa.statespace.kalman_filter.kalmanfilter.loglikeobs.html#statsmodels.tsa.statespace.kalman_filter.KalmanFilter.loglikeobs" title="statsmodels.tsa.statespace.kalman_filter.KalmanFilter.loglikeobs"><code>loglikeobs</code></a>(**kwargs)</td> <td>Calculate the loglikelihood for each observation associated with the statespace model.</td> </tr> <tr>
<td>
<a class="reference internal" href="statsmodels.tsa.statespace.kalman_filter.kalmanfilter.set_conserve_memory.html#statsmodels.tsa.statespace.kalman_filter.KalmanFilter.set_conserve_memory" title="statsmodels.tsa.statespace.kalman_filter.KalmanFilter.set_conserve_memory"><code>set_conserve_memory</code></a>([conserve_memory])</td> <td>Set the memory conservation method</td> </tr> <tr>
<td>
<a class="reference internal" href="statsmodels.tsa.statespace.kalman_filter.kalmanfilter.set_filter_method.html#statsmodels.tsa.statespace.kalman_filter.KalmanFilter.set_filter_method" title="statsmodels.tsa.statespace.kalman_filter.KalmanFilter.set_filter_method"><code>set_filter_method</code></a>([filter_method])</td> <td>Set the filtering method</td> </tr> <tr>
<td>
<a class="reference internal" href="statsmodels.tsa.statespace.kalman_filter.kalmanfilter.set_filter_timing.html#statsmodels.tsa.statespace.kalman_filter.KalmanFilter.set_filter_timing" title="statsmodels.tsa.statespace.kalman_filter.KalmanFilter.set_filter_timing"><code>set_filter_timing</code></a>([alternate_timing])</td> <td>Set the filter timing convention</td> </tr> <tr>
<td>
<a class="reference internal" href="statsmodels.tsa.statespace.kalman_filter.kalmanfilter.set_inversion_method.html#statsmodels.tsa.statespace.kalman_filter.KalmanFilter.set_inversion_method" title="statsmodels.tsa.statespace.kalman_filter.KalmanFilter.set_inversion_method"><code>set_inversion_method</code></a>([inversion_method])</td> <td>Set the inversion method</td> </tr> <tr>
<td>
<a class="reference internal" href="statsmodels.tsa.statespace.kalman_filter.kalmanfilter.set_stability_method.html#statsmodels.tsa.statespace.kalman_filter.KalmanFilter.set_stability_method" title="statsmodels.tsa.statespace.kalman_filter.KalmanFilter.set_stability_method"><code>set_stability_method</code></a>([stability_method])</td> <td>Set the numerical stability method</td> </tr> <tr>
<td>
<a class="reference internal" href="statsmodels.tsa.statespace.kalman_filter.kalmanfilter.simulate.html#statsmodels.tsa.statespace.kalman_filter.KalmanFilter.simulate" title="statsmodels.tsa.statespace.kalman_filter.KalmanFilter.simulate"><code>simulate</code></a>(nsimulations[, measurement_shocks, …])</td> <td>Simulate a new time series following the state space model</td> </tr>  </table> <h4 class="rubric">Attributes</h4> <table class="longtable docutils">   <tr>
<td><code>conserve_memory</code></td> <td>(int) Memory conservation bitmask.</td> </tr> <tr>
<td><code>design</code></td> <td></td> </tr> <tr>
<td><code>dtype</code></td> <td>(dtype) Datatype of currently active representation matrices</td> </tr> <tr>
<td><code>endog</code></td> <td></td> </tr> <tr>
<td><code>filter_augmented</code></td> <td>(bool) Flag for augmented Kalman filtering.</td> </tr> <tr>
<td><code>filter_collapsed</code></td> <td>(bool) Flag for Kalman filtering with collapsed observation vector.</td> </tr> <tr>
<td><code>filter_conventional</code></td> <td>(bool) Flag for conventional Kalman filtering.</td> </tr> <tr>
<td><code>filter_exact_initial</code></td> <td>(bool) Flag for exact initial Kalman filtering.</td> </tr> <tr>
<td><code>filter_extended</code></td> <td>(bool) Flag for extended Kalman filtering.</td> </tr> <tr>
<td><code>filter_method</code></td> <td>(int) Filtering method bitmask.</td> </tr> <tr>
<td><code>filter_methods</code></td> <td></td> </tr> <tr>
<td><code>filter_square_root</code></td> <td>(bool) Flag for square-root Kalman filtering.</td> </tr> <tr>
<td><code>filter_timing</code></td> <td>(int) Filter timing.</td> </tr> <tr>
<td><code>filter_univariate</code></td> <td>(bool) Flag for univariate filtering of multivariate observation vector.</td> </tr> <tr>
<td><code>filter_unscented</code></td> <td>(bool) Flag for unscented Kalman filtering.</td> </tr> <tr>
<td><code>inversion_method</code></td> <td>(int) Inversion method bitmask.</td> </tr> <tr>
<td><code>inversion_methods</code></td> <td></td> </tr> <tr>
<td><code>invert_cholesky</code></td> <td>(bool) Flag for Cholesky inversion method.</td> </tr> <tr>
<td><code>invert_lu</code></td> <td>(bool) Flag for LU inversion method.</td> </tr> <tr>
<td><code>invert_univariate</code></td> <td>(bool) Flag for univariate inversion method (recommended).</td> </tr> <tr>
<td><code>memory_conserve</code></td> <td>(bool) Flag to conserve the maximum amount of memory.</td> </tr> <tr>
<td><code>memory_no_filtered</code></td> <td>(bool) Flag to prevent storing filtered state and covariance matrices.</td> </tr> <tr>
<td><code>memory_no_forecast</code></td> <td>(bool) Flag to prevent storing forecasts.</td> </tr> <tr>
<td><code>memory_no_gain</code></td> <td>(bool) Flag to prevent storing the Kalman gain matrices.</td> </tr> <tr>
<td><code>memory_no_likelihood</code></td> <td>(bool) Flag to prevent storing likelihood values for each observation.</td> </tr> <tr>
<td><code>memory_no_predicted</code></td> <td>(bool) Flag to prevent storing predicted state and covariance matrices.</td> </tr> <tr>
<td><code>memory_no_smoothing</code></td> <td>(bool) Flag to prevent storing likelihood values for each observation.</td> </tr> <tr>
<td><code>memory_no_std_forecast</code></td> <td>(bool) Flag to prevent storing standardized forecast errors.</td> </tr> <tr>
<td><code>memory_options</code></td> <td></td> </tr> <tr>
<td><code>memory_store_all</code></td> <td>(bool) Flag for storing all intermediate results in memory (default).</td> </tr> <tr>
<td><code>obs</code></td> <td>
<em>(array) Observation vector</em> – <span class="math notranslate nohighlight">\(y~(k\_endog \times nobs)\)</span>
</td> </tr> <tr>
<td><code>obs_cov</code></td> <td></td> </tr> <tr>
<td><code>obs_intercept</code></td> <td></td> </tr> <tr>
<td><code>prefix</code></td> <td>(str) BLAS prefix of currently active representation matrices</td> </tr> <tr>
<td><code>selection</code></td> <td></td> </tr> <tr>
<td><code>solve_cholesky</code></td> <td>(bool) Flag for Cholesky and linear solver inversion method (recommended).</td> </tr> <tr>
<td><code>solve_lu</code></td> <td>(bool) Flag for LU and linear solver inversion method.</td> </tr> <tr>
<td><code>stability_force_symmetry</code></td> <td>(bool) Flag for enforcing covariance matrix symmetry</td> </tr> <tr>
<td><code>stability_method</code></td> <td>(int) Stability method bitmask.</td> </tr> <tr>
<td><code>stability_methods</code></td> <td></td> </tr> <tr>
<td><code>state_cov</code></td> <td></td> </tr> <tr>
<td><code>state_intercept</code></td> <td></td> </tr> <tr>
<td><code>time_invariant</code></td> <td>(bool) Whether or not currently active representation matrices are time-invariant</td> </tr> <tr>
<td><code>timing_init_filtered</code></td> <td>(bool) Flag for the alternate timing convention (Kim and Nelson, 2012).</td> </tr> <tr>
<td><code>timing_init_predicted</code></td> <td>(bool) Flag for the default timing convention (Durbin and Koopman, 2012).</td> </tr> <tr>
<td><code>timing_options</code></td> <td></td> </tr> <tr>
<td><code>transition</code></td> <td></td> </tr>  </table> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2009&ndash;2012 Statsmodels Developers<br>&copy; 2006&ndash;2008 Scipy Developers<br>&copy; 2006 Jonathan E. Taylor<br>Licensed under the 3-clause BSD License.<br>
    <a href="http://www.statsmodels.org/stable/generated/statsmodels.tsa.statespace.kalman_filter.KalmanFilter.html" class="_attribution-link">http://www.statsmodels.org/stable/generated/statsmodels.tsa.statespace.kalman_filter.KalmanFilter.html</a>
  </p>
</div>
