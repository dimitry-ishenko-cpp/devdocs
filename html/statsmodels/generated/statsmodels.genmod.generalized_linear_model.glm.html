<h1 id="statsmodels-genmod-generalized-linear-model-glm">statsmodels.genmod.generalized_linear_model.GLM</h1> <dl class="class"> <dt id="statsmodels.genmod.generalized_linear_model.GLM">
<code>class statsmodels.genmod.generalized_linear_model.GLM(endog, exog, family=None, offset=None, exposure=None, freq_weights=None, var_weights=None, missing='none', **kwargs)</code> <a class="reference internal" href="http://www.statsmodels.org/stable/_modules/statsmodels/genmod/generalized_linear_model.html#GLM"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Generalized Linear Models class</p> <p>GLM inherits from statsmodels.base.model.LikelihoodModel</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>endog</strong> (<em>array-like</em>) – 1d array of endogenous response variable. This array can be 1d or 2d. Binomial family models accept a 2d array with two columns. If supplied, each observation is expected to be [success, failure].</li> <li>
<strong>exog</strong> (<em>array-like</em>) – A nobs x k array where <code>nobs</code> is the number of observations and <code>k</code> is the number of regressors. An intercept is not included by default and should be added by the user (models specified using a formula include an intercept by default). See <code>statsmodels.tools.add_constant</code>.</li> <li>
<strong>family</strong> (<em>family class instance</em>) – The default is Gaussian. To specify the binomial distribution family = sm.family.Binomial() Each family can take a link instance as an argument. See statsmodels.family.family for more information.</li> <li>
<strong>offset</strong> (<em>array-like</em><em> or </em><em>None</em>) – An offset to be included in the model. If provided, must be an array whose length is the number of rows in exog.</li> <li>
<strong>exposure</strong> (<em>array-like</em><em> or </em><em>None</em>) – Log(exposure) will be added to the linear prediction in the model. Exposure is only valid if the log link is used. If provided, it must be an array with the same length as endog.</li> <li>
<strong>freq_weights</strong> (<em>array-like</em>) – 1d array of frequency weights. The default is None. If None is selected or a blank value, then the algorithm will replace with an array of 1’s with length equal to the endog. WARNING: Using weights is not verified yet for all possible options and results, see Notes.</li> <li>
<strong>var_weights</strong> (<em>array-like</em>) – 1d array of variance (analytic) weights. The default is None. If None is selected or a blank value, then the algorithm will replace with an array of 1’s with length equal to the endog. WARNING: Using weights is not verified yet for all possible options and results, see Notes.</li> <li>
<strong>missing</strong> (<em>str</em>) – Available options are ‘none’, ‘drop’, and ‘raise’. If ‘none’, no nan checking is done. If ‘drop’, any observations with nans are dropped. If ‘raise’, an error is raised. Default is ‘none.’</li> </ul> </td> </tr>  </table> <dl class="attribute"> <dt id="statsmodels.genmod.generalized_linear_model.GLM.df_model">
<code>df_model</code> </dt> <dd>
<p><em>float</em> – <code>p</code> - 1, where <code>p</code> is the number of regressors including the intercept.</p> </dd>
</dl> <dl class="attribute"> <dt id="statsmodels.genmod.generalized_linear_model.GLM.df_resid">
<code>df_resid</code> </dt> <dd>
<p><em>float</em> – The number of observation <code>n</code> minus the number of regressors <code>p</code>.</p> </dd>
</dl> <dl class="attribute"> <dt id="statsmodels.genmod.generalized_linear_model.GLM.endog">
<code>endog</code> </dt> <dd>
<p><em>array</em> – See Parameters.</p> </dd>
</dl> <dl class="attribute"> <dt id="statsmodels.genmod.generalized_linear_model.GLM.exog">
<code>exog</code> </dt> <dd>
<p><em>array</em> – See Parameters.</p> </dd>
</dl> <dl class="attribute"> <dt id="statsmodels.genmod.generalized_linear_model.GLM.family">
<code>family</code> </dt> <dd>
<p><em>family class instance</em> – A pointer to the distribution family of the model.</p> </dd>
</dl> <dl class="attribute"> <dt id="statsmodels.genmod.generalized_linear_model.GLM.freq_weights">
<code>freq_weights</code> </dt> <dd>
<p><em>array</em> – See Parameters.</p> </dd>
</dl> <dl class="attribute"> <dt id="statsmodels.genmod.generalized_linear_model.GLM.var_weights">
<code>var_weights</code> </dt> <dd>
<p><em>array</em> – See Parameters.</p> </dd>
</dl> <dl class="attribute"> <dt id="statsmodels.genmod.generalized_linear_model.GLM.mu">
<code>mu</code> </dt> <dd>
<p><em>array</em> – The estimated mean response of the transformed variable.</p> </dd>
</dl> <dl class="attribute"> <dt id="statsmodels.genmod.generalized_linear_model.GLM.n_trials">
<code>n_trials</code> </dt> <dd>
<p><em>array</em> – See Parameters.</p> </dd>
</dl> <dl class="attribute"> <dt id="statsmodels.genmod.generalized_linear_model.GLM.normalized_cov_params">
<code>normalized_cov_params</code> </dt> <dd>
<p><em>array</em> – <code>p</code> x <code>p</code> normalized covariance of the design / exogenous data.</p> </dd>
</dl> <dl class="attribute"> <dt id="statsmodels.genmod.generalized_linear_model.GLM.scale">
<code>scale</code> </dt> <dd>
<p><em>float</em> – The estimate of the scale / dispersion. Available after fit is called.</p> </dd>
</dl> <dl class="attribute"> <dt id="statsmodels.genmod.generalized_linear_model.GLM.scaletype">
<code>scaletype</code> </dt> <dd>
<p><em>str</em> – The scaling used for fitting the model. Available after fit is called.</p> </dd>
</dl> <dl class="attribute"> <dt id="statsmodels.genmod.generalized_linear_model.GLM.weights">
<code>weights</code> </dt> <dd>
<p><em>array</em> – The value of the weights after the last iteration of fit.</p> </dd>
</dl> <h4 class="rubric">Examples</h4> <pre data-language="python">&gt;&gt;&gt; import statsmodels.api as sm
&gt;&gt;&gt; data = sm.datasets.scotland.load()
&gt;&gt;&gt; data.exog = sm.add_constant(data.exog)
</pre> <p>Instantiate a gamma family model with the default link function.</p> <pre data-language="python">&gt;&gt;&gt; gamma_model = sm.GLM(data.endog, data.exog,
...                      family=sm.families.Gamma())
</pre> <pre data-language="python">&gt;&gt;&gt; gamma_results = gamma_model.fit()
&gt;&gt;&gt; gamma_results.params
array([-0.01776527,  0.00004962,  0.00203442, -0.00007181,  0.00011185,
       -0.00000015, -0.00051868, -0.00000243])
&gt;&gt;&gt; gamma_results.scale
0.0035842831734919055
&gt;&gt;&gt; gamma_results.deviance
0.087388516416999198
&gt;&gt;&gt; gamma_results.pearson_chi2
0.086022796163805704
&gt;&gt;&gt; gamma_results.llf
-83.017202161073527
</pre> <div class="admonition seealso"> <p class="first admonition-title">See also</p> <p class="last"><a class="reference internal" href="statsmodels.genmod.families.family.family.html#statsmodels.genmod.families.family.Family" title="statsmodels.genmod.families.family.Family"><code>statsmodels.genmod.families.family.Family</code></a>, <a class="reference internal" href="../glm.html#families"><span class="std std-ref">Families</span></a>, <a class="reference internal" href="../glm.html#links"><span class="std std-ref">Link Functions</span></a></p> </div> <h4 class="rubric">Notes</h4> <p>Only the following combinations make sense for family and link:</p>  <table class="docutils">  <thead valign="bottom"> <tr>
<th class="head">Family</th> <th class="head">ident</th> <th class="head">log</th> <th class="head">logit</th> <th class="head">probit</th> <th class="head">cloglog</th> <th class="head">pow</th> <th class="head">opow</th> <th class="head">nbinom</th> <th class="head">loglog</th> <th class="head">logc</th> </tr> </thead>  <tr>
<td>Gaussian</td> <td>x</td> <td>x</td> <td>x</td> <td>x</td> <td>x</td> <td>x</td> <td>x</td> <td>x</td> <td>x</td> <td> </td> </tr> <tr>
<td>inv Gaussian</td> <td>x</td> <td>x</td> <td> </td> <td> </td> <td> </td> <td>x</td> <td> </td> <td> </td> <td> </td> <td> </td> </tr> <tr>
<td>binomial</td> <td>x</td> <td>x</td> <td>x</td> <td>x</td> <td>x</td> <td>x</td> <td>x</td> <td> </td> <td>x</td> <td>x</td> </tr> <tr>
<td>Poission</td> <td>x</td> <td>x</td> <td> </td> <td> </td> <td> </td> <td>x</td> <td> </td> <td> </td> <td> </td> <td> </td> </tr> <tr>
<td>neg binomial</td> <td>x</td> <td>x</td> <td> </td> <td> </td> <td> </td> <td>x</td> <td> </td> <td>x</td> <td> </td> <td> </td> </tr> <tr>
<td>gamma</td> <td>x</td> <td>x</td> <td> </td> <td> </td> <td> </td> <td>x</td> <td> </td> <td> </td> <td> </td> <td> </td> </tr> <tr>
<td>Tweedie</td> <td>x</td> <td>x</td> <td> </td> <td> </td> <td> </td> <td>x</td> <td> </td> <td> </td> <td> </td> <td> </td> </tr>  </table>  <p>Not all of these link functions are currently available.</p> <p>Endog and exog are references so that if the data they refer to are already arrays and these arrays are changed, endog and exog will change.</p> <p>Statsmodels supports two separte definitions of weights: frequency weights and variance weights.</p> <p>Frequency weights produce the same results as repeating observations by the frequencies (if those are integers). Frequency weights will keep the number of observations consistent, but the degrees of freedom will change to reflect the new weights.</p> <p>Variance weights (referred to in other packages as analytic weights) are used when <code>endog</code> represents an an average or mean. This relies on the assumption that that the inverse variance scales proportionally to the weight–an observation that is deemed more credible should have less variance and therefore have more weight. For the <code>Poisson</code> family–which assumes that occurences scale proportionally with time–a natural practice would be to use the amount of time as the variance weight and set <code>endog</code> to be a rate (occurrances per period of time). Similarly, using a compound Poisson family, namely <code>Tweedie</code>, makes a similar assumption about the rate (or frequency) of occurences having variance proportional to time.</p> <p>Both frequency and variance weights are verified for all basic results with nonrobust or heteroscedasticity robust <code>cov_type</code>. Other robust covariance types have not yet been verified, and at least the small sample correction is currently not based on the correct total frequency count.</p> <p>Currently, all residuals are not weighted by frequency, although they may incorporate <code>n_trials</code> for <code>Binomial</code> and <code>var_weights</code></p> <table class="docutils">  <thead valign="bottom"> <tr>
<th class="head">Residual Type</th> <th class="head">Applicable weights</th> </tr> </thead>  <tr>
<td>Anscombe</td> <td><code>var_weights</code></td> </tr> <tr>
<td>Deviance</td> <td><code>var_weights</code></td> </tr> <tr>
<td>Pearson</td> <td>
<code>var_weights</code> and <code>n_trials</code>
</td> </tr> <tr>
<td>Reponse</td> <td><code>n_trials</code></td> </tr> <tr>
<td>Working</td> <td><code>n_trials</code></td> </tr>  </table> <p>WARNING: Loglikelihood and deviance are not valid in models where scale is equal to 1 (i.e., <code>Binomial</code>, <code>NegativeBinomial</code>, and <code>Poisson</code>). If variance weights are specified, then results such as <code>loglike</code> and <code>deviance</code> are based on a quasi-likelihood interpretation. The loglikelihood is not correctly specified in this case, and statistics based on it, such AIC or likelihood ratio tests, are not appropriate.</p> <dl class="attribute"> <dt>
<code>df_model</code> </dt> <dd>
<p><em>float</em> – Model degrees of freedom is equal to p - 1, where p is the number of regressors. Note that the intercept is not reported as a degree of freedom.</p> </dd>
</dl> <dl class="attribute"> <dt>
<code>df_resid</code> </dt> <dd>
<p><em>float</em> – Residual degrees of freedom is equal to the number of observation n minus the number of regressors p.</p> </dd>
</dl> <dl class="attribute"> <dt>
<code>endog</code> </dt> <dd>
<p><em>array</em> – See above. Note that <code>endog</code> is a reference to the data so that if data is already an array and it is changed, then <code>endog</code> changes as well.</p> </dd>
</dl> <dl class="attribute"> <dt id="statsmodels.genmod.generalized_linear_model.GLM.exposure">
<code>exposure</code> </dt> <dd>
<p><em>array-like</em> – Include ln(exposure) in model with coefficient constrained to 1. Can only be used if the link is the logarithm function.</p> </dd>
</dl> <dl class="attribute"> <dt>
<code>exog</code> </dt> <dd>
<p><em>array</em> – See above. Note that <code>exog</code> is a reference to the data so that if data is already an array and it is changed, then <code>exog</code> changes as well.</p> </dd>
</dl> <dl class="attribute"> <dt>
<code>freq_weights</code> </dt> <dd>
<p><em>array</em> – See above. Note that <code>freq_weights</code> is a reference to the data so that if data is already an array and it is changed, then <code>freq_weights</code> changes as well.</p> </dd>
</dl> <dl class="attribute"> <dt>
<code>var_weights</code> </dt> <dd>
<p><em>array</em> – See above. Note that <code>var_weights</code> is a reference to the data so that if data is already an array and it is changed, then <code>var_weights</code> changes as well.</p> </dd>
</dl> <dl class="attribute"> <dt id="statsmodels.genmod.generalized_linear_model.GLM.iteration">
<code>iteration</code> </dt> <dd>
<p><em>int</em> – The number of iterations that fit has run. Initialized at 0.</p> </dd>
</dl> <dl class="attribute"> <dt>
<code>family</code> </dt> <dd>
<p><em>family class instance</em> – The distribution family of the model. Can be any family in statsmodels.families. Default is Gaussian.</p> </dd>
</dl> <dl class="attribute"> <dt>
<code>mu</code> </dt> <dd>
<p><em>array</em> – The mean response of the transformed variable. <code>mu</code> is the value of the inverse of the link function at lin_pred, where lin_pred is the linear predicted value of the WLS fit of the transformed variable. <code>mu</code> is only available after fit is called. See statsmodels.families.family.fitted of the distribution family for more information.</p> </dd>
</dl> <dl class="attribute"> <dt>
<code>n_trials</code> </dt> <dd>
<p><em>array</em> – See above. Note that <code>n_trials</code> is a reference to the data so that if data is already an array and it is changed, then <code>n_trials</code> changes as well. <code>n_trials</code> is the number of binomial trials and only available with that distribution. See statsmodels.families.Binomial for more information.</p> </dd>
</dl> <dl class="attribute"> <dt>
<code>normalized_cov_params</code> </dt> <dd>
<p><em>array</em> – The p x p normalized covariance of the design / exogenous data. This is approximately equal to (X.T X)^(-1)</p> </dd>
</dl> <dl class="attribute"> <dt id="statsmodels.genmod.generalized_linear_model.GLM.offset">
<code>offset</code> </dt> <dd>
<p><em>array-like</em> – Include offset in model with coefficient constrained to 1.</p> </dd>
</dl> <dl class="attribute"> <dt>
<code>scale</code> </dt> <dd>
<p><em>float</em> – The estimate of the scale / dispersion of the model fit. Only available after fit is called. See GLM.fit and GLM.estimate_scale for more information.</p> </dd>
</dl> <dl class="attribute"> <dt>
<code>scaletype</code> </dt> <dd>
<p><em>str</em> – The scaling used for fitting the model. This is only available after fit is called. The default is None. See GLM.fit for more information.</p> </dd>
</dl> <dl class="attribute"> <dt>
<code>weights</code> </dt> <dd>
<p><em>array</em> – The value of the weights after the last iteration of fit. Only available after fit is called. See statsmodels.families.family for the specific distribution weighting functions.</p> </dd>
</dl> <h4 class="rubric">Methods</h4> <table class="longtable docutils">   <tr>
<td>
<a class="reference internal" href="statsmodels.genmod.generalized_linear_model.glm.estimate_scale.html#statsmodels.genmod.generalized_linear_model.GLM.estimate_scale" title="statsmodels.genmod.generalized_linear_model.GLM.estimate_scale"><code>estimate_scale</code></a>(mu)</td> <td>Estimates the dispersion/scale.</td> </tr> <tr>
<td>
<a class="reference internal" href="statsmodels.genmod.generalized_linear_model.glm.estimate_tweedie_power.html#statsmodels.genmod.generalized_linear_model.GLM.estimate_tweedie_power" title="statsmodels.genmod.generalized_linear_model.GLM.estimate_tweedie_power"><code>estimate_tweedie_power</code></a>(mu[, method, low, high])</td> <td>Tweedie specific function to estimate scale and the variance parameter.</td> </tr> <tr>
<td>
<a class="reference internal" href="statsmodels.genmod.generalized_linear_model.glm.fit.html#statsmodels.genmod.generalized_linear_model.GLM.fit" title="statsmodels.genmod.generalized_linear_model.GLM.fit"><code>fit</code></a>([start_params, maxiter, method, tol, …])</td> <td>Fits a generalized linear model for a given family.</td> </tr> <tr>
<td>
<a class="reference internal" href="statsmodels.genmod.generalized_linear_model.glm.fit_constrained.html#statsmodels.genmod.generalized_linear_model.GLM.fit_constrained" title="statsmodels.genmod.generalized_linear_model.GLM.fit_constrained"><code>fit_constrained</code></a>(constraints[, start_params])</td> <td>fit the model subject to linear equality constraints</td> </tr> <tr>
<td>
<a class="reference internal" href="statsmodels.genmod.generalized_linear_model.glm.fit_regularized.html#statsmodels.genmod.generalized_linear_model.GLM.fit_regularized" title="statsmodels.genmod.generalized_linear_model.GLM.fit_regularized"><code>fit_regularized</code></a>([method, alpha, …])</td> <td>Return a regularized fit to a linear regression model.</td> </tr> <tr>
<td>
<a class="reference internal" href="statsmodels.genmod.generalized_linear_model.glm.from_formula.html#statsmodels.genmod.generalized_linear_model.GLM.from_formula" title="statsmodels.genmod.generalized_linear_model.GLM.from_formula"><code>from_formula</code></a>(formula, data[, subset, drop_cols])</td> <td>Create a Model from a formula and dataframe.</td> </tr> <tr>
<td>
<a class="reference internal" href="statsmodels.genmod.generalized_linear_model.glm.get_distribution.html#statsmodels.genmod.generalized_linear_model.GLM.get_distribution" title="statsmodels.genmod.generalized_linear_model.GLM.get_distribution"><code>get_distribution</code></a>(params[, scale, exog, …])</td> <td>Returns a random number generator for the predictive distribution.</td> </tr> <tr>
<td>
<a class="reference internal" href="statsmodels.genmod.generalized_linear_model.glm.hessian.html#statsmodels.genmod.generalized_linear_model.GLM.hessian" title="statsmodels.genmod.generalized_linear_model.GLM.hessian"><code>hessian</code></a>(params[, scale, observed])</td> <td>Hessian, second derivative of loglikelihood function</td> </tr> <tr>
<td>
<a class="reference internal" href="statsmodels.genmod.generalized_linear_model.glm.hessian_factor.html#statsmodels.genmod.generalized_linear_model.GLM.hessian_factor" title="statsmodels.genmod.generalized_linear_model.GLM.hessian_factor"><code>hessian_factor</code></a>(params[, scale, observed])</td> <td>Weights for calculating Hessian</td> </tr> <tr>
<td>
<a class="reference internal" href="statsmodels.genmod.generalized_linear_model.glm.information.html#statsmodels.genmod.generalized_linear_model.GLM.information" title="statsmodels.genmod.generalized_linear_model.GLM.information"><code>information</code></a>(params[, scale])</td> <td>Fisher information matrix.</td> </tr> <tr>
<td>
<a class="reference internal" href="statsmodels.genmod.generalized_linear_model.glm.initialize.html#statsmodels.genmod.generalized_linear_model.GLM.initialize" title="statsmodels.genmod.generalized_linear_model.GLM.initialize"><code>initialize</code></a>()</td> <td>Initialize a generalized linear model.</td> </tr> <tr>
<td>
<a class="reference internal" href="statsmodels.genmod.generalized_linear_model.glm.loglike.html#statsmodels.genmod.generalized_linear_model.GLM.loglike" title="statsmodels.genmod.generalized_linear_model.GLM.loglike"><code>loglike</code></a>(params[, scale])</td> <td>Evaluate the log-likelihood for a generalized linear model.</td> </tr> <tr>
<td>
<a class="reference internal" href="statsmodels.genmod.generalized_linear_model.glm.loglike_mu.html#statsmodels.genmod.generalized_linear_model.GLM.loglike_mu" title="statsmodels.genmod.generalized_linear_model.GLM.loglike_mu"><code>loglike_mu</code></a>(mu[, scale])</td> <td>Evaluate the log-likelihood for a generalized linear model.</td> </tr> <tr>
<td>
<a class="reference internal" href="statsmodels.genmod.generalized_linear_model.glm.predict.html#statsmodels.genmod.generalized_linear_model.GLM.predict" title="statsmodels.genmod.generalized_linear_model.GLM.predict"><code>predict</code></a>(params[, exog, exposure, offset, linear])</td> <td>Return predicted values for a design matrix</td> </tr> <tr>
<td>
<a class="reference internal" href="statsmodels.genmod.generalized_linear_model.glm.score.html#statsmodels.genmod.generalized_linear_model.GLM.score" title="statsmodels.genmod.generalized_linear_model.GLM.score"><code>score</code></a>(params[, scale])</td> <td>score, first derivative of the loglikelihood function</td> </tr> <tr>
<td>
<a class="reference internal" href="statsmodels.genmod.generalized_linear_model.glm.score_factor.html#statsmodels.genmod.generalized_linear_model.GLM.score_factor" title="statsmodels.genmod.generalized_linear_model.GLM.score_factor"><code>score_factor</code></a>(params[, scale])</td> <td>weights for score for each observation</td> </tr> <tr>
<td>
<a class="reference internal" href="statsmodels.genmod.generalized_linear_model.glm.score_obs.html#statsmodels.genmod.generalized_linear_model.GLM.score_obs" title="statsmodels.genmod.generalized_linear_model.GLM.score_obs"><code>score_obs</code></a>(params[, scale])</td> <td>score first derivative of the loglikelihood for each observation.</td> </tr> <tr>
<td>
<a class="reference internal" href="statsmodels.genmod.generalized_linear_model.glm.score_test.html#statsmodels.genmod.generalized_linear_model.GLM.score_test" title="statsmodels.genmod.generalized_linear_model.GLM.score_test"><code>score_test</code></a>(params_constrained[, …])</td> <td>score test for restrictions or for omitted variables</td> </tr>  </table> <h4 class="rubric">Attributes</h4> <table class="longtable docutils">   <tr>
<td><code>endog_names</code></td> <td>Names of endogenous variables</td> </tr> <tr>
<td><code>exog_names</code></td> <td>Names of exogenous variables</td> </tr>  </table> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2009&ndash;2012 Statsmodels Developers<br>&copy; 2006&ndash;2008 Scipy Developers<br>&copy; 2006 Jonathan E. Taylor<br>Licensed under the 3-clause BSD License.<br>
    <a href="http://www.statsmodels.org/stable/generated/statsmodels.genmod.generalized_linear_model.GLM.html" class="_attribution-link">http://www.statsmodels.org/stable/generated/statsmodels.genmod.generalized_linear_model.GLM.html</a>
  </p>
</div>
