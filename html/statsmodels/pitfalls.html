<h1 id="pitfalls">Pitfalls</h1> <p>This page lists issues which may arise while using statsmodels. These can be the result of data-related or statistical problems, software design, “non-standard” use of models, or edge cases.</p> <p>statsmodels provides several warnings and helper functions for diagnostic checking (see this <a class="reference external" href="http://jpktd.blogspot.ca/2012/01/anscombe-and-diagnostic-statistics.html">blog article</a> for an example of misspecification checks in linear regression). The coverage is of course not comprehensive, but more warnings and diagnostic functions will be added over time.</p> <p>While the underlying statistical problems are the same for all statistical packages, software implementations differ in the way extreme or corner cases are handled. Please report corner cases for which the models might not work, so we can treat them appropriately.</p>  <h2 id="repeated-calls-to-fit-with-different-parameters">Repeated calls to fit with different parameters</h2> <p>Result instances often need to access attributes from the corresponding model instance. Fitting a model multiple times with different arguments can change model attributes. This means that the result instance may no longer point to the correct model attributes after the model has been re-fit.</p> <p>It is therefore best practice to create separate model instances when we want to fit a model using different fit function arguments.</p> <p>For example, this works without problem because we are not keeping the results instance for further use</p> <pre data-language="python">mod = AR(endog)
aic = []
for lag in range(1,11):
    res = mod.fit(maxlag=lag)
    aic.append(res.aic)
</pre> <p>However, when we want to hold on to two different estimation results, then it is recommended to create two separate model instances.</p> <pre data-language="python">mod1 = RLM(endog, exog)
res1 = mod1.fit(scale_est='mad')
mod2 = RLM(endog, exog)
res2 = mod2.fit(scale_est=sm.robust.scale.HuberScale())
</pre>   <h2 id="unidentified-parameters">Unidentified Parameters</h2>  <h3 id="rank-deficient-exog-perfect-multicollinearity">Rank deficient exog, perfect multicollinearity</h3> <p>Models based on linear models, GLS, RLM, GLM and similar, use a generalized inverse. This means that:</p> <ul class="simple"> <li>Rank deficient matrices will not raise an error</li> <li>Cases of almost perfect multicollinearity or ill-conditioned design matrices might produce numerically unstable results. Users need to manually check the rank or condition number of the matrix if this is not the desired behavior</li> </ul> <p>Note: Statsmodels currently fails on the NIST benchmark case for Filip if the data is not rescaled, see <a class="reference external" href="http://jpktd.blogspot.ca/2012/03/numerical-accuracy-in-linear-least.html">this blog</a></p>   <h3 id="incomplete-convergence-in-maximum-likelihood-estimation">Incomplete convergence in maximum likelihood estimation</h3> <p>In some cases, the maximum likelihood estimator might not exist, parameters might be infinite or not unique (e.g. (quasi-)separation in models with binary endogenous variable). Under the default settings, statsmodels will print a warning if the optimization algorithm stops without reaching convergence. However, it is important to know that the convergence criteria may sometimes falsely indicate convergence (e.g. if the value of the objective function converged but not the parameters). In general, a user needs to verify convergence.</p> <p>For binary Logit and Probit models, statsmodels raises an exception if perfect prediction is detected. There is, however, no check for quasi-perfect prediction.</p>    <h2 id="other-problems">Other Problems</h2>  <h3 id="insufficient-variation-in-the-data">Insufficient variation in the data</h3> <p>It is possible that there is insufficient variation in the data for small datasets or for data with small groups in categorical variables. In these cases, the results might not be identified or some hidden problems might occur.</p> <p>The only currently known case is a perfect fit in robust linear model estimation. For RLM, if residuals are equal to zero, then it does not cause an exception, but having this perfect fit can produce NaNs in some results (scale=0 and 0/0 division) (issue #55).</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2009&ndash;2012 Statsmodels Developers<br>&copy; 2006&ndash;2008 Scipy Developers<br>&copy; 2006 Jonathan E. Taylor<br>Licensed under the 3-clause BSD License.<br>
    <a href="http://www.statsmodels.org/stable/pitfalls.html" class="_attribution-link">http://www.statsmodels.org/stable/pitfalls.html</a>
  </p>
</div>
