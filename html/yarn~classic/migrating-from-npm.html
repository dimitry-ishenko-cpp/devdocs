<h1>1. Migrating from npm</h1>  <p>Migrating from npm should be a fairly easy process for most users. Yarn can consume the same <code>package.json</code> format as npm, and can install any package from the npm registry.</p> <p>If you want to try Yarn out on your existing npm project, just try running:</p> <pre data-language="sh">yarn</pre> <p>This will lay out your <code>node_modules</code> folder using Yarn’s resolution algorithm that is compatible with the <a href="https://nodejs.org/api/modules.html#modules_all_together">node.js module resolution algorithm</a>.</p> <p>If you get an error, please check for an existing issue or report it to the <a href="https://github.com/yarnpkg/yarn/issues">Yarn issue tracker</a>.</p> <p>When you run either <code>yarn</code> or <code>yarn add &lt;package&gt;</code>, Yarn will generate a <code>yarn.lock</code> file within the root directory of your package. You don’t need to read or understand this file - just check it into source control. When other people start using Yarn instead of <code>npm</code>, the <code>yarn.lock</code> file will ensure that they get precisely the same dependencies as you have.</p> <p>In most cases, running <code>yarn</code> or <code>yarn add</code> for the first time will just work. In some cases, the information in a <code>package.json</code> file is not explicit enough to eliminate dependencies, and the deterministic way that Yarn chooses dependencies will run into dependency conflicts. This is especially likely to happen in larger projects where sometimes <code>npm install</code> does not work and developers are frequently removing <code>node_modules</code> and rebuilding from scratch. If this happens, try using <code>npm</code> to make the versions of dependencies more explicit, before converting to Yarn.</p> <p>As of Yarn 1.7.0, you can <a href="https://yarnpkg.com/blog/2018/06/04/yarn-import-package-lock/">import your package-lock.json</a> state, generated by <code>npm</code> to Yarn, by using <code>yarn import</code>.</p> <p>Other developers on the project can keep using <code>npm</code>, so you don’t need to get everyone on your project to convert at the same time. The developers using <code>yarn</code> will all get exactly the same configuration as each other, and the developers using <code>npm</code> may get slightly different configurations, which is the intended behavior of <code>npm</code>.</p> <p>Later, if you decide that Yarn is not for you, you can just go back to using <code>npm</code> without making any particular changes. You can delete your old <code>yarn.lock</code> file if nobody on the project is using Yarn any more but it’s not necessary.</p> <p>If you are using an <code>npm-shrinkwrap.json</code> file right now, be aware that you may end up with a different set of dependencies. Yarn does not support npm shrinkwrap files as they don’t have enough information in them to power Yarn’s more deterministic algorithm. If you are using a shrinkwrap file it may be easier to convert everyone working on the project to use Yarn at the same time. Simply remove your existing <code>npm-shrinkwrap.json</code> file and check in the newly created <code>yarn.lock</code> file.</p> <h2 id="cli-commands-comparison-">CLI commands comparison </h2> <table> <thead> <tr> <th>npm (v5)</th> <th>Yarn</th> </tr> </thead> <tbody> <tr> <td><code>npm install</code></td> <td><code>yarn add</code></td> </tr> <tr> <td><strong><em>(N/A)</em></strong></td> <td><code>yarn add --flat</code></td> </tr> <tr> <td><strong><em>(N/A)</em></strong></td> <td><code>yarn add --har</code></td> </tr> <tr> <td><code>npm install --no-package-lock</code></td> <td><code>yarn add --no-lockfile</code></td> </tr> <tr> <td><strong><em>(N/A)</em></strong></td> <td><code>yarn add --pure-lockfile</code></td> </tr> <tr> <td><code>npm install [package] --save</code></td> <td><code>yarn add [package]</code></td> </tr> <tr> <td><code>npm install [package] --save-dev</code></td> <td><code>yarn add [package] --dev</code></td> </tr> <tr> <td><strong><em>(N/A)</em></strong></td> <td><code>yarn add [package] --peer</code></td> </tr> <tr> <td><code>npm install [package] --save-optional</code></td> <td><code>yarn add [package] --optional</code></td> </tr> <tr> <td><code>npm install [package] --save-exact</code></td> <td><code>yarn add [package] --exact</code></td> </tr> <tr> <td><strong><em>(N/A)</em></strong></td> <td><code>yarn add [package] --tilde</code></td> </tr> <tr> <td><code>npm install [package] --global</code></td> <td><code>yarn global add [package]</code></td> </tr> <tr> <td>
<code>npm update --global</code> </td> <td>
<code>yarn global upgrade</code> </td> </tr> <tr> <td><code>npm rebuild</code></td> <td><code>yarn add --force</code></td> </tr> <tr> <td><code>npm uninstall [package]</code></td> <td><code>yarn remove [package]</code></td> </tr> <tr> <td><code>npm cache clean</code></td> <td><code>yarn cache clean [package]</code></td> </tr> <tr> <td>
<code>rm -rf node_modules &amp;&amp; npm install</code> </td> <td>
<code>yarn upgrade</code> </td> </tr> <tr> <td>
<code>npm version major</code> </td> <td>
<code>yarn version --major</code> </td> </tr> <tr> <td>
<code>npm version minor</code> </td> <td>
<code>yarn version --minor</code> </td> </tr> <tr> <td>
<code>npm version patch</code> </td> <td>
<code>yarn version --patch</code> </td> </tr> </tbody> </table><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2016&ndash;present Yarn Contributors<br>Licensed under the BSD License.<br>
    <a href="https://classic.yarnpkg.com/en/docs/migrating-from-npm" class="_attribution-link">https://classic.yarnpkg.com/en/docs/migrating-from-npm</a>
  </p>
</div>
