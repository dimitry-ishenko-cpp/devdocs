<h1>The Socket instance (server-side)</h1>
<p>A <code>Socket</code> is the fundamental class for interacting with the client. It inherits all the methods of the Node.js <a href="https://nodejs.org/api/events.html#class-eventemitter" target="_blank" rel="noopener noreferrer">EventEmitter</a>, like <a href="server-api.html#socketemiteventname-args">emit</a>, <a href="server-api.html#socketoneventname-callback">on</a>, <a href="server-api.html#socketonceeventname-listener">once</a> or <a href="server-api.html#socketremovelistenereventname-listener">removeListener</a>.</p>
<img src="data:image/png;base64,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" alt="Bidirectional communication between server and client"><br><br><p>Besides:</p>
<ul>
<li>
<a href="emitting-events.html#basic-emit">emitting</a> and <a href="listening-to-events.html">listening to</a> events</li>
<li><a href="broadcasting-events.html#to-all-connected-clients-except-the-sender">broadcasting events</a></li>
<li><a href="rooms.html#joining-and-leaving">joining and leaving rooms</a></li>
</ul>
<p>The Socket instance has a few attributes that may be of use in your application:</p>
<h2 id="socketid">Socket#id</h2>
<p>Each new connection is assigned a random 20-characters identifier.</p>
<p>This identifier is synced with the value on the client-side.</p>
<pre tabindex="0" data-language="javascript">// server-side
io.on("connection", (socket) =&gt; {
  console.log(socket.id); // ojIckSD2jqNzOqIrAGzL
});

// client-side
socket.on("connect", () =&gt; {
  console.log(socket.id); // ojIckSD2jqNzOqIrAGzL
});</pre>
<p>Upon creation, the Socket joins the room identified by its own id, which means you can use it for private messaging:</p>
<pre tabindex="0" data-language="javascript">io.on("connection", socket =&gt; {
  socket.on("private message", (anotherSocketId, msg) =&gt; {
    socket.to(anotherSocketId).emit("private message", socket.id, msg);
  });
});</pre>
<p>Note: you can't overwrite this identifier, as it is used in several parts of the Socket.IO codebase.</p>
<h2 id="sockethandshake">Socket#handshake</h2>
<p>This object contains some details about the handshake that happens at the beginning of the Socket.IO session.</p>
<pre tabindex="0" data-language="javascript">{
  headers: /* the headers of the initial request */
  query: /* the query params of the initial request */
  auth: /* the authentication payload */
  time: /* the date of creation (as string) */
  issued: /* the date of creation (unix timestamp) */
  url: /* the request URL string */
  address: /* the ip of the client */
  xdomain: /* whether the connection is cross-domain */
  secure: /* whether the connection is secure */
}</pre>
<p>Example:</p>
<pre tabindex="0" data-language="javascript">{
  "headers": {
    "user-agent": "xxxx",
    "accept": "*/*",
    "host": "example.com",
    "connection": "close"
  },
  "query": {
    "EIO": "4",
    "transport": "polling",
    "t": "NNjNltH"
  },
  "auth": {
    "token": "123"
  },
  "time": "Sun Nov 22 2020 01:33:46 GMT+0100 (Central European Standard Time)",
  "issued": 1606005226969,
  "url": "/socket.io/?EIO=4&amp;transport=polling&amp;t=NNjNltH",
  "address": "::ffff:1.2.3.4",
  "xdomain": false,
  "secure": true
}</pre>
<h2 id="socketrooms">Socket#rooms</h2>
<p>This is a reference to the <a href="rooms.html">rooms</a> the Socket is currently in.</p>
<pre tabindex="0" data-language="javascript">io.on("connection", (socket) =&gt; {
  console.log(socket.rooms); // Set { &lt;socket.id&gt; }
  socket.join("room1");
  console.log(socket.rooms); // Set { &lt;socket.id&gt;, "room1" }
});</pre>
<h2 id="socketdata">Socket#data</h2>
<p>An arbitrary object that can be used in conjunction with the <code>fetchSockets()</code> utility method:</p>
<pre tabindex="0" data-language="javascript">// server A
io.on("connection", (socket) =&gt; {
  socket.data.username = "alice";
});

// server B
const sockets = await io.fetchSockets();
console.log(sockets[0].data.username); // "alice"</pre>
<p>More information <a href="server-instance.html#utility-methods">here</a>.</p>
<h2 id="socketconn">Socket#conn</h2>
<p>A reference to the underlying Engine.IO socket (see <a href="how-it-works.html">here</a>).</p>
<pre tabindex="0" data-language="javascript">io.on("connection", (socket) =&gt; {
  console.log("initial transport", socket.conn.transport.name); // prints "polling"

  socket.conn.once("upgrade", () =&gt; {
    // called when the transport is upgraded (i.e. from HTTP long-polling to WebSocket)
    console.log("upgraded transport", socket.conn.transport.name); // prints "websocket"
  });

  socket.conn.on("packet", ({ type, data }) =&gt; {
    // called for each packet received
  });

  socket.conn.on("packetCreate", ({ type, data }) =&gt; {
    // called for each packet sent
  });

  socket.conn.on("drain", () =&gt; {
    // called when the write buffer is drained
  });

  socket.conn.on("close", (reason) =&gt; {
    // called when the underlying connection is closed
  });
});</pre>
<h2 id="additional-attributes">Additional attributes</h2>
<p>As long as you do not overwrite any existing attribute, you can attach any attribute to the Socket instance and use it later:</p>
<pre tabindex="0" data-language="javascript">// in a middleware
io.use(async (socket, next) =&gt; {
  try {
    const user = await fetchUser(socket);
    socket.user = user;
  } catch (e) {
    next(new Error("unknown user"));
  }
});

io.on("connection", (socket) =&gt; {
  console.log(socket.user);

  // in a listener
  socket.on("set username", (username) =&gt; {
    socket.username = username;
  });
});
</pre>
<h2 id="socket-middlewares">Socket middlewares</h2>
<p>Those middlewares looks a lot like the usual <a href="middlewares.html">middlewares</a>, except that they are called for each incoming packet:</p>
<pre tabindex="0" data-language="javascript">socket.use(([event, ...args], next) =&gt; {
  // do something with the packet (logging, authorization, rate limiting...)
  // do not forget to call next() at the end
  next();
});</pre>
<p>The <code>next</code> method can also be called with an error object. In that case, the event will not reach the registered event handlers and an <code>error</code> event will be emitted instead:</p>
<pre tabindex="0" data-language="javascript">io.on("connection", (socket) =&gt; {
  socket.use(([event, ...args], next) =&gt; {
    if (isUnauthorized(event)) {
      return next(new Error("unauthorized event"));
    }
    next();
  });

  socket.on("error", (err) =&gt; {
    if (err &amp;&amp; err.message === "unauthorized event") {
      socket.disconnect();
    }
  });
});</pre>
<p>Note: this feature only exists on the server-side. For the client-side, you might be interested in <a href="listening-to-events.html#catch-all-listeners">catch-all listeners</a>.</p>
<h2 id="events">Events</h2>
<p>On the server-side, the Socket instance emits two special events:</p>
<ul>
<li><a href="#disconnect"><code>disconnect</code></a></li>
<li><a href="#disconnecting"><code>disconnecting</code></a></li>
</ul>
<h3 id="disconnect"><code>disconnect</code></h3>
<p>This event is fired by the Socket instance upon disconnection.</p>
<pre tabindex="0" data-language="javascript">io.on("connection", (socket) =&gt; {
  socket.on("disconnect", (reason) =&gt; {
    // ...
  });
});</pre>
<p>Here is the list of possible reasons:</p>
<table>
<thead><tr>
<th>Reason</th>
<th>Description</th>
</tr></thead>
<tr>
<td><code>server namespace disconnect</code></td>
<td>The socket was forcefully disconnected with <a href="server-api.html#socketdisconnectclose">socket.disconnect()</a>.</td>
</tr>
<tr>
<td><code>client namespace disconnect</code></td>
<td>The client has manually disconnected the socket using <a href="client-api.html#socketdisconnect">socket.disconnect()</a>.</td>
</tr>
<tr>
<td><code>server shutting down</code></td>
<td>The server is, well, shutting down.</td>
</tr>
<tr>
<td><code>ping timeout</code></td>
<td>The client did not send a PONG packet in the <code>pingTimeout</code> delay.</td>
</tr>
<tr>
<td><code>transport close</code></td>
<td>The connection was closed (example: the user has lost connection, or the network was changed from WiFi to 4G).</td>
</tr>
<tr>
<td><code>transport error</code></td>
<td>The connection has encountered an error.</td>
</tr>
<tr>
<td><code>parse error</code></td>
<td>The server has received an invalid packet from the client.</td>
</tr>
<tr>
<td><code>forced close</code></td>
<td>The server has received an invalid packet from the client.</td>
</tr>
<tr>
<td><code>forced server close</code></td>
<td>The client did not join a namespace in time (see the <a href="server-options.html#connecttimeout"><code>connectTimeout</code></a> option) and was forcefully closed.</td>
</tr>
</table>
<h3 id="disconnecting"><code>disconnecting</code></h3>
<p>This event is similar to <code>disconnect</code> but is fired a bit earlier, when the <a href="server-socket-instance.html#socketrooms">Socket#rooms</a> set is not empty yet</p>
<pre tabindex="0" data-language="javascript">io.on("connection", (socket) =&gt; {
  socket.on("disconnecting", (reason) =&gt; {
    for (const room of socket.rooms) {
      if (room !== socket.id) {
        socket.to(room).emit("user has left", socket.id);
      }
    }
  });
});</pre>
<p>Note: those events, along with <code>connect</code>, <code>connect_error</code>, <code>newListener</code> and <code>removeListener</code>, are special events that shouldn't be used in your application:</p>
<pre tabindex="0" data-language="javascript">// BAD, will throw an error
socket.emit("disconnect");</pre>
<h2 id="complete-api">Complete API</h2>
<p>The complete API exposed by the Socket instance can be found <a href="server-api.html#socket">here</a>.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2014&ndash;2021 Automattic<br>Licensed under the MIT License.<br>
    <a href="https://socket.io/docs/v4/server-socket-instance" class="_attribution-link">https://socket.io/docs/v4/server-socket-instance</a>
  </p>
</div>
