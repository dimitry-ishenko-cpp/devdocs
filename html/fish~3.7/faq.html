<h1>Frequently asked questions</h1> <section id="what-is-the-equivalent-to-this-thing-from-bash-or-other-shells"> <h2>What is the equivalent to this thing from bash (or other shells)?</h2> <p>See <a class="reference internal" href="fish_for_bash_users.html#fish-for-bash-users"><span class="std std-ref">Fish for bash users</span></a></p> </section> <section id="how-do-i-set-or-clear-an-environment-variable"> <h2>How do I set or clear an environment variable?</h2> <p>Use the <a class="reference internal" href="cmds/set.html"><span class="doc">set</span></a> command:</p> <pre data-language="shell">set -x key value # typically set -gx key value
set -e key
</pre> <p>Since fish 3.1 you can set an environment variable for just one command using the <code>key=value some command</code> syntax, like in other shells. The two lines below behave identically - unlike other shells, fish will output <code>value</code> both times:</p> <pre data-language="shell">key=value echo $key
begin; set -lx key value; echo $key; end
</pre> <p>Note that “exported” is not a <a class="reference internal" href="language.html#variables-scope"><span class="std std-ref">scope</span></a>, but an additional bit of state. A variable can be global and exported or local and exported or even universal and exported. Typically it makes sense to make an exported variable global.</p> </section> <section id="how-do-i-check-whether-a-variable-is-defined"> <h2>How do I check whether a variable is defined?</h2> <p>Use <code>set -q var</code>. For example, <code>if set -q var; echo variable defined; end</code>. To check multiple variables you can combine with <code>and</code> and <code>or</code> like so:</p> <pre data-language="shell">if set -q var1; or set -q var2
    echo either variable defined
end
</pre> <p>Keep in mind that a defined variable could also be empty, either by having no elements (if set like <code>set var</code>) or only empty elements (if set like <code>set var ""</code>). Read on for how to deal with those.</p> </section> <section id="how-do-i-check-whether-a-variable-is-not-empty"> <h2>How do I check whether a variable is not empty?</h2> <p>Use <code>string length -q -- $var</code>. For example, <code>if string length -q -- $var; echo not empty; end</code>. Note that <code>string length</code> will interpret a list of multiple variables as a disjunction (meaning any/or):</p> <pre data-language="shell">if string length -q -- $var1 $var2 $var3
    echo at least one of these variables is not empty
end
</pre> <p>Alternatively, use <code>test -n "$var"</code>, but remember that <strong>the variable must be double-quoted</strong>. For example, <code>if test -n "$var"; echo not empty; end</code>. The <code>test</code> command provides its own and (-a) and or (-o):</p> <pre data-language="shell">if test -n "$var1" -o -n "$var2" -o -n "$var3"
    echo at least one of these variables is not empty
end
</pre> <p>If you want to know if a variable has <em>no elements</em>, use <code>set -q var[1]</code>.</p> </section> <section id="why-doesn-t-set-ux-exported-universal-variables-seem-to-work"> <h2>Why doesn’t <code>set -Ux</code> (exported universal variables) seem to work?</h2> <p>A global variable of the same name already exists.</p> <p>Environment variables such as <code>EDITOR</code> or <code>TZ</code> can be set universally using <code>set -Ux</code>. However, if there is an environment variable already set before fish starts (such as by login scripts or system administrators), it is imported into fish as a global variable. The <a class="reference internal" href="language.html#variables-scope"><span class="std std-ref">variable scopes</span></a> are searched from the “inside out”, which means that local variables are checked first, followed by global variables, and finally universal variables.</p> <p>This means that the global value takes precedence over the universal value.</p> <p>To avoid this problem, consider changing the setting which fish inherits. If this is not possible, add a statement to your <a class="reference internal" href="language.html#configuration"><span class="std std-ref">configuration file</span></a> (usually <code>~/.config/fish/config.fish</code>):</p> <pre data-language="shell">set -gx EDITOR vim
</pre> </section> <section id="how-do-i-run-a-command-every-login-what-s-fish-s-equivalent-to-bashrc-or-profile"> <h2>How do I run a command every login? What’s fish’s equivalent to .bashrc or .profile?</h2> <p>Edit the file <code>~/.config/fish/config.fish</code> <a class="footnote-reference brackets" href="#id2" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>, creating it if it does not exist (Note the leading period).</p> <p>Unlike .bashrc and .profile, this file is always read, even in non-interactive or login shells.</p> <p>To do something only in interactive shells, check <code>status is-interactive</code> like:</p> <pre data-language="shell">if status is-interactive
    # use the coolbeans theme
    fish_config theme choose coolbeans
end
</pre> <aside class="footnote-list brackets"> <aside class="footnote brackets" id="id2" role="doc-footnote"> <span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span> <p>The “~/.config” part of this can be set via $XDG_CONFIG_HOME, that’s just the default.</p> </aside> </aside> </section> <section id="how-do-i-set-my-prompt"> <h2>How do I set my prompt?</h2> <p>The prompt is the output of the <code>fish_prompt</code> function. Put it in <code>~/.config/fish/functions/fish_prompt.fish</code>. For example, a simple prompt is:</p> <pre data-language="shell">function fish_prompt
    set_color $fish_color_cwd
    echo -n (prompt_pwd)
    set_color normal
    echo -n ' &gt; '
end
</pre> <p>You can also use the Web configuration tool, <a class="reference internal" href="cmds/fish_config.html"><span class="doc">fish_config</span></a>, to preview and choose from a gallery of sample prompts.</p> <p>Or you can use fish_config from the commandline:</p> <pre data-language="shell">&gt; fish_config prompt show
# displays all the prompts fish ships with
&gt; fish_config prompt choose disco
# loads the disco prompt in the current shell
&gt; fish_config prompt save
# makes the change permanent
</pre> <p>If you want to modify your existing prompt, you can use <a class="reference internal" href="cmds/funced.html"><span class="doc">funced</span></a> and <a class="reference internal" href="cmds/funcsave.html"><span class="doc">funcsave</span></a> like:</p> <pre data-language="shell">&gt;_ funced fish_prompt
# This opens up your editor (set in $EDITOR).
# Modify the function,
# save the file and repeat to your liking.
# Once you are happy with it:
&gt;_ funcsave fish_prompt
</pre> <p>This also applies to <a class="reference internal" href="cmds/fish_right_prompt.html"><span class="doc">fish_right_prompt</span></a> and <a class="reference internal" href="cmds/fish_mode_prompt.html"><span class="doc">fish_mode_prompt</span></a>.</p> </section> <section id="why-does-my-prompt-show-a-i"> <h2>Why does my prompt show a <code>[I]</code>?</h2> <p>That’s the <a class="reference internal" href="cmds/fish_mode_prompt.html"><span class="doc">fish_mode_prompt</span></a>. It is displayed by default when you’ve activated vi mode using <code>fish_vi_key_bindings</code>.</p> <p>If you haven’t activated vi mode on purpose, you might have installed a third-party theme or plugin that does it.</p> <p>If you want to change or disable this display, modify the <code>fish_mode_prompt</code> function, for instance via <a class="reference internal" href="cmds/funced.html"><span class="doc">funced</span></a>.</p> </section> <section id="how-do-i-customize-my-syntax-highlighting-colors"> <h2>How do I customize my syntax highlighting colors?</h2> <p>Use the web configuration tool, <a class="reference internal" href="cmds/fish_config.html"><span class="doc">fish_config</span></a>, or alter the <a class="reference internal" href="interactive.html#variables-color"><span class="std std-ref">fish_color family of environment variables</span></a>.</p> <p>You can also use <code>fish_config</code> on the commandline, like:</p> <pre data-language="shell">&gt; fish_config theme show
# to demonstrate all the colorschemes
&gt; fish_config theme choose coolbeans
# to load the "coolbeans" theme
&gt; fish_config theme save
# to make the change permanent
</pre> </section> <section id="how-do-i-change-the-greeting-message"> <h2>How do I change the greeting message?</h2> <p>Change the value of the variable <code>fish_greeting</code> or create a <a class="reference internal" href="cmds/fish_greeting.html"><span class="doc">fish_greeting</span></a> function. For example, to remove the greeting use:</p> <pre data-language="shell">set -U fish_greeting
</pre> <p>Or if you prefer not to use a universal variable, use:</p> <pre data-language="shell">set -g fish_greeting
</pre> <p>in <a class="reference internal" href="language.html#configuration"><span class="std std-ref">config.fish</span></a>.</p> </section> <section id="how-do-i-run-a-command-from-history"> <h2>How do I run a command from history?</h2> <p>Type some part of the command, and then hit the <kbd class="kbd docutils literal notranslate">↑</kbd> (up) or <kbd class="kbd docutils literal notranslate">↓</kbd> (down) arrow keys to navigate through history matches, or press <kbd class="kbd docutils literal notranslate">Control</kbd>+<kbd class="kbd docutils literal notranslate">R</kbd> to open the history in a searchable pager. In this pager you can press <kbd class="kbd docutils literal notranslate">Control</kbd>+<kbd class="kbd docutils literal notranslate">R</kbd> or <kbd class="kbd docutils literal notranslate">Control</kbd>+<kbd class="kbd docutils literal notranslate">S</kbd> to move to older or younger history respectively.</p> <p>Additional default key bindings include <kbd class="kbd docutils literal notranslate">Control</kbd>+<kbd class="kbd docutils literal notranslate">P</kbd> (up) and <kbd class="kbd docutils literal notranslate">Control</kbd>+<kbd class="kbd docutils literal notranslate">N</kbd> (down). See <a class="reference internal" href="interactive.html#history-search"><span class="std std-ref">Searchable command history</span></a> for more information.</p> </section> <section id="why-doesn-t-history-substitution-etc-work"> <h2>Why doesn’t history substitution (“!$” etc.) work?</h2> <p>Because history substitution is an awkward interface that was invented before interactive line editing was even possible. Instead of adding this pseudo-syntax, fish opts for nice history searching and recall features. Switching requires a small change of habits: if you want to modify an old line/word, first recall it, then edit.</p> <p>As a special case, most of the time history substitution is used as <code>sudo !!</code>. In that case just press <kbd class="kbd docutils literal notranslate">Alt</kbd>+<kbd class="kbd docutils literal notranslate">S</kbd>, and it will recall your last commandline with <code>sudo</code> prefixed (or toggle a <code>sudo</code> prefix on the current commandline if there is anything).</p> <p>In general, fish’s history recall works like this:</p> <ul class="simple"> <li>Like other shells, the Up arrow, <kbd class="kbd docutils literal notranslate">↑</kbd> recalls whole lines, starting from the last executed line. A single press replaces “!!”, later presses replace “!-3” and the like.</li> <li>If the line you want is far back in the history, type any part of the line and then press Up one or more times. This will filter the recalled lines to ones that include this text, and you will get to the line you want much faster. This replaces “!vi”, “!?bar.c” and the like.</li> <li>
<kbd class="kbd docutils literal notranslate">Alt</kbd>+<kbd class="kbd docutils literal notranslate">↑</kbd> recalls individual arguments, starting from the last argument in the last executed line. A single press replaces “!$”, later presses replace “!!:4” and such. As an alternate key binding, <kbd class="kbd docutils literal notranslate">Alt</kbd>+<kbd class="kbd docutils literal notranslate">.</kbd> can be used.</li> <li>If the argument you want is far back in history (e.g. 2 lines back - that’s a lot of words!), type any part of it and then press <kbd class="kbd docutils literal notranslate">Alt</kbd>+<kbd class="kbd docutils literal notranslate">↑</kbd>. This will show only arguments containing that part and you will get what you want much faster. Try it out, this is very convenient!</li> <li>If you want to reuse several arguments from the same line (“!!:3*” and the like), consider recalling the whole line and removing what you don’t need (<kbd class="kbd docutils literal notranslate">Alt</kbd>+<kbd class="kbd docutils literal notranslate">D</kbd> and <kbd class="kbd docutils literal notranslate">Alt</kbd>+<kbd class="kbd docutils literal notranslate">Backspace</kbd> are your friends).</li> </ul> <p>See <a class="reference internal" href="interactive.html#editor"><span class="std std-ref">documentation</span></a> for more details about line editing in fish.</p> </section> <section id="how-do-i-run-a-subcommand-the-backtick-doesn-t-work"> <h2>How do I run a subcommand? The backtick doesn’t work!</h2> <p><code>fish</code> uses parentheses for subcommands. For example:</p> <pre data-language="shell">for i in (ls)
    echo $i
end
</pre> <p>It also supports the familiar <code>$()</code> syntax, even in quotes. Backticks are not supported because they are discouraged even in POSIX shells. They nest poorly and are hard to tell from single quotes (<code>''</code>).</p> </section> <section id="my-command-pkg-config-gives-its-output-as-a-single-long-string"> <h2>My command (pkg-config) gives its output as a single long string?</h2> <p>Unlike other shells, fish splits command substitutions only on newlines, not spaces or tabs or the characters in $IFS.</p> <p>That means if you run</p> <pre data-language="shell">count (printf '%s ' a b c)
</pre> <p>It will print <code>1</code>, because the “a b c “ is used in one piece. But if you do</p> <pre data-language="shell">count (printf '%s\n' a b c)
</pre> <p>it will print <code>3</code>, because it gave <code>count</code> the arguments “a”, “b” and “c” separately.</p> <p>In the overwhelming majority of cases, splitting on spaces is unwanted, so this is an improvement. This is why you hear about problems with filenames with spaces, after all.</p> <p>However sometimes, especially with <code>pkg-config</code> and related tools, splitting on spaces is needed.</p> <p>In these cases use <code>string split -n " "</code> like:</p> <pre data-language="shell">g++ example_01.cpp (pkg-config --cflags --libs gtk+-2.0 | string split -n " ")
</pre> <p>The <code>-n</code> is so empty elements are removed like POSIX shells would do.</p> </section> <section id="how-do-i-get-the-exit-status-of-a-command"> <h2>How do I get the exit status of a command?</h2> <p>Use the <code>$status</code> variable. This replaces the <code>$?</code> variable used in other shells.</p> <pre data-language="shell">somecommand
if test $status -eq 7
    echo "That's my lucky number!"
end
</pre> <p>If you are just interested in success or failure, you can run the command directly as the if-condition:</p> <pre data-language="shell">if somecommand
    echo "Command succeeded"
else
    echo "Command failed"
end
</pre> <p>Or if you just want to do one command in case the first succeeded or failed, use <code>and</code> or <code>or</code>:</p> <pre data-language="shell">somecommand
or someothercommand
</pre> <p>See the <a class="reference internal" href="language.html#syntax-conditional"><span class="std std-ref">Conditions</span></a> and the documentation for <a class="reference internal" href="cmds/test.html"><span class="doc">test</span></a> and <a class="reference internal" href="cmds/if.html"><span class="doc">if</span></a> for more information.</p> </section> <section id="my-command-prints-no-matches-for-wildcard-but-works-in-bash"> <h2>My command prints “No matches for wildcard” but works in bash</h2> <p>In short: <a class="reference internal" href="language.html#quotes"><span class="std std-ref">quote</span></a> or <a class="reference internal" href="language.html#escapes"><span class="std std-ref">escape</span></a> the wildcard:</p> <pre data-language="shell">scp user@ip:/dir/"string-*"
</pre> <p>When fish sees an unquoted <code>*</code>, it performs <a class="reference internal" href="language.html#expand-wildcard"><span class="std std-ref">wildcard expansion</span></a>. That means it tries to match filenames to the given string.</p> <p>If the wildcard doesn’t match any files, fish prints an error instead of running the command:</p> <pre data-language="shell">&gt; echo *this*does*not*exist
fish: No matches for wildcard '*this*does*not*exist'. See `help expand`.
echo *this*does*not*exist
     ^
</pre> <p>Now, bash also tries to match files in this case, but when it doesn’t find a match, it passes along the literal wildcard string instead.</p> <p>That means that commands like the above</p> <pre data-language="sh">scp user@ip:/dir/string-*
</pre> <p>or</p> <pre data-language="sh">apt install postgres-*
</pre> <p>appear to work, because most of the time the string doesn’t match and so it passes along the <code>string-*</code>, which is then interpreted by the receiving program.</p> <p>But it also means that these commands can stop working at any moment once a matching file is encountered (because it has been created or the command is executed in a different working directory), and to deal with that bash needs workarounds like</p> <pre data-language="sh">for f in ./*.mpg; do
      # We need to test if the file really exists because
      # the wildcard might have failed to match.
      test -f "$f" || continue
      mympgviewer "$f"
done
</pre> <p>(from <a class="reference external" href="http://mywiki.wooledge.org/BashFAQ/004">http://mywiki.wooledge.org/BashFAQ/004</a>)</p> <p>For these reasons, fish does not do this, and instead expects asterisks to be quoted or escaped if they aren’t supposed to be expanded.</p> <p>This is similar to bash’s “failglob” option.</p> </section> <section id="i-accidentally-entered-a-directory-path-and-fish-changed-directory-what-happened"> <h2>I accidentally entered a directory path and fish changed directory. What happened?</h2> <p>If fish is unable to locate a command with a given name, and it starts with <code>.</code>, <code>/</code> or <code>~</code>, fish will test if a directory of that name exists. If it does, it assumes that you want to change your directory. For example, the fastest way to switch to your home directory is to simply press <code>~</code> and enter.</p> </section> <section id="the-open-command-doesn-t-work"> <h2>The open command doesn’t work.</h2> <p>The <code>open</code> command uses the MIME type database and the <code>.desktop</code> files used by Gnome and KDE to identify filetypes and default actions. If at least one of these environments is installed, but the open command is not working, this probably means that the relevant files are installed in a non-standard location. Consider <a class="reference internal" href="index.html#more-help"><span class="std std-ref">asking for more help</span></a>.</p> </section> <section id="why-won-t-ssh-scp-rsync-connect-properly-when-fish-is-my-login-shell"> <h2 id="faq-ssh-interactive">Why won’t SSH/SCP/rsync connect properly when fish is my login shell?</h2> <p>This problem may show up as messages like “<code>Received message too long</code>”, “<code>open terminal
failed: not a terminal</code>”, “<code>Bad packet length</code>”, or “<code>Connection refused</code>” with strange output in <code>ssh_exchange_identification</code> messages in the debug log.</p> <p>This usually happens because fish reads the <a class="reference internal" href="language.html#configuration"><span class="std std-ref">user configuration file</span></a> (<code>~/.config/fish/config.fish</code>) <em>always</em>, whether it’s in an interactive or login or non-interactive or non-login shell.</p> <p>This simplifies matters, but it also means when config.fish generates output, it will do that even in non-interactive shells like the one ssh/scp/rsync start when they connect.</p> <p>Anything in config.fish that produces output should be guarded with <code>status is-interactive</code> (or <code>status is-login</code> if you prefer):</p> <pre data-language="shell">if status is-interactive
  ...
end
</pre> <p>The same applies for example when you start <code>tmux</code> in config.fish without guards, which will cause a message like <code>sessions should be nested with care, unset $TMUX to force</code>.</p> </section> <section id="i-m-getting-weird-graphical-glitches-a-staircase-effect-ghost-characters-cursor-in-the-wrong-position"> <h2 id="faq-unicode">I’m getting weird graphical glitches (a staircase effect, ghost characters, cursor in the wrong position,…)?</h2> <p>In a terminal, the application running inside it and the terminal itself need to agree on the width of characters in order to handle cursor movement.</p> <p>This is more important to fish than other shells because features like syntax highlighting and autosuggestions are implemented by moving the cursor.</p> <p>Sometimes, there is disagreement on the width. There are numerous causes and fixes for this:</p> <ul class="simple"> <li>It is possible the character is simply too new for your system to know - in this case you need to refrain from using it.</li> <li>Fish or your terminal might not know about the character or handle it wrong - in this case fish or your terminal needs to be fixed, or you need to update to a fixed version.</li> <li>The character has an “ambiguous” width and fish thinks that means a width of X while your terminal thinks it’s Y. In this case you either need to change your terminal’s configuration or set $fish_ambiguous_width to the correct value.</li> <li>The character is an emoji and the host system only supports Unicode 8, while you are running the terminal on a system that uses Unicode &gt;= 9. In this case set $fish_emoji_width to 2.</li> </ul> <p>This also means that a few things are unsupportable:</p> <ul class="simple"> <li>Non-monospace fonts - there is <em>no way</em> for fish to figure out what width a specific character has as it has no influence on the terminal’s font rendering.</li> <li>Different widths for multiple ambiguous width characters - there is no way for fish to know which width you assign to each character.</li> </ul> </section> <section id="uninstalling-fish"> <h2 id="faq-uninstalling">Uninstalling fish</h2> <p>If you want to uninstall fish, first make sure fish is not set as your shell. Run <code>chsh -s /bin/bash</code> if you are not sure.</p> <p>If you installed it with a package manager, just use that package manager’s uninstall function. If you built fish yourself, assuming you installed it to /usr/local, do this:</p> <pre data-language="shell">rm -Rf /usr/local/etc/fish /usr/local/share/fish ~/.config/fish
rm /usr/local/share/man/man1/fish*.1
cd /usr/local/bin
rm -f fish fish_indent
</pre> </section> <section id="where-can-i-find-extra-tools-for-fish"> <h2>Where can I find extra tools for fish?</h2> <p>The fish user community extends fish in unique and useful ways via scripts that aren’t always appropriate for bundling with the fish package. Typically because they solve a niche problem unlikely to appeal to a broad audience. You can find those extensions, including prompts, themes and useful functions, in various third-party repositories. These include:</p> <ul class="simple"> <li><a class="reference external" href="https://github.com/jorgebucaran/fisher">Fisher</a></li> <li><a class="reference external" href="https://github.com/tuvistavie/fundle">Fundle</a></li> <li><a class="reference external" href="https://github.com/oh-my-fish/oh-my-fish">Oh My Fish</a></li> <li><a class="reference external" href="https://github.com/justinmayer/tacklebox">Tacklebox</a></li> </ul> <p>This is not an exhaustive list and the fish project has no opinion regarding the merits of the repositories listed above or the scripts found therein.</p> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005-2009 Axel Liljencrantz, 2009-2023 fish-shell contributors<br>Licensed under the GNU General Public License, version 2.<br>
    <a href="https://fishshell.com/docs/3.7/faq.html" class="_attribution-link">https://fishshell.com/docs/3.7/faq.html</a>
  </p>
</div>
