<h1 id="id1">Testing</h1>  <h2 id="reference">Reference</h2> <p id="testing">Functional testing framework for Falcon apps and Falcon itself.</p> <p>Falcon’s testing module contains various test classes and utility functions to support functional testing for both Falcon-based apps and the Falcon framework itself.</p> <p>The testing framework supports both unittest and pytest:</p> <pre data-language="python"># -----------------------------------------------------------------
# unittest
# -----------------------------------------------------------------

from falcon import testing
import myapp


class MyTestCase(testing.TestCase):
    def setUp(self):
        super(MyTestCase, self).setUp()

        # Assume the hypothetical `myapp` package has a
        # function called `create()` to initialize and
        # return a `falcon.API` instance.
        self.app = myapp.create()


class TestMyApp(MyTestCase):
    def test_get_message(self):
        doc = {u'message': u'Hello world!'}

        result = self.simulate_get('/messages/42')
        self.assertEqual(result.json, doc)


# -----------------------------------------------------------------
# pytest
# -----------------------------------------------------------------

from falcon import testing
import pytest

import myapp


# Depending on your testing strategy and how your application
# manages state, you may be able to broaden the fixture scope
# beyond the default 'function' scope used in this example.

@pytest.fixture()
def client():
    # Assume the hypothetical `myapp` package has a function called
    # `create()` to initialize and return a `falcon.API` instance.
    return testing.TestClient(myapp.create())


def test_get_message(client):
    doc = {u'message': u'Hello world!'}

    result = client.simulate_get('/messages/42')
    assert result.json == doc
</pre> <dl class="class"> <dt id="falcon.testing.Result">
<code>class falcon.testing.Result(iterable, status, headers)</code> <a class="reference internal" href="https://falcon.readthedocs.io/en/2.0.0/_modules/falcon/testing/client.html#Result"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Encapsulates the result of a simulated WSGI request.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>iterable</strong> (<em>iterable</em>) – An iterable that yields zero or more bytestrings, per PEP-3333</li> <li>
<strong>status</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – An HTTP status string, including status code and reason string</li> <li>
<strong>headers</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)">list</a>) – A list of (header_name, header_value) tuples, per PEP-3333</li> </ul> </td> </tr>  </table> <dl class="attribute"> <dt id="falcon.testing.Result.status">
<code>status</code> </dt> <dd>
<p>HTTP status string given in the response</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Type:</th>
<td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></td> </tr>  </table> </dd>
</dl> <dl class="attribute"> <dt id="falcon.testing.Result.status_code">
<code>status_code</code> </dt> <dd>
<p>The code portion of the HTTP status string</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Type:</th>
<td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)">int</a></td> </tr>  </table> </dd>
</dl> <dl class="attribute"> <dt id="falcon.testing.Result.headers">
<code>headers</code> </dt> <dd>
<p>A case-insensitive dictionary containing all the headers in the response, except for cookies, which may be accessed via the <code>cookies</code> attribute.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">Multiple instances of a header in the response are currently not supported; it is unspecified which value will “win” and be represented in <code>headers</code>.</p> </div> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Type:</th>
<td class="field-body">CaseInsensitiveDict</td> </tr>  </table> </dd>
</dl> <dl class="attribute"> <dt id="falcon.testing.Result.cookies">
<code>cookies</code> </dt> <dd>
<p>A dictionary of <a class="reference internal" href="#falcon.testing.Cookie" title="falcon.testing.Cookie"><code>falcon.testing.Cookie</code></a> values parsed from the response, by name.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Type:</th>
<td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a></td> </tr>  </table> </dd>
</dl> <dl class="attribute"> <dt id="falcon.testing.Result.encoding">
<code>encoding</code> </dt> <dd>
<p>Text encoding of the response body, or <code>None</code> if the encoding can not be determined.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Type:</th>
<td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></td> </tr>  </table> </dd>
</dl> <dl class="attribute"> <dt id="falcon.testing.Result.content">
<code>content</code> </dt> <dd>
<p>Raw response body, or <code>bytes</code> if the response body was empty.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Type:</th>
<td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.7)">bytes</a></td> </tr>  </table> </dd>
</dl> <dl class="attribute"> <dt id="falcon.testing.Result.text">
<code>text</code> </dt> <dd>
<p>Decoded response body of type <code>unicode</code> under Python 2.7, and of type <code>str</code> otherwise. If the content type does not specify an encoding, UTF-8 is assumed.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Type:</th>
<td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></td> </tr>  </table> </dd>
</dl> <dl class="attribute"> <dt id="falcon.testing.Result.json">
<code>json</code> </dt> <dd>
<p>Deserialized JSON body. Will be <code>None</code> if the body has no content to deserialize. Otherwise, raises an error if the response is not valid JSON.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Type:</th>
<td class="field-body">JSON serializable</td> </tr>  </table> </dd>
</dl> </dd>
</dl> <dl class="class"> <dt id="falcon.testing.Cookie">
<code>class falcon.testing.Cookie(morsel)</code> <a class="reference internal" href="https://falcon.readthedocs.io/en/2.0.0/_modules/falcon/testing/client.html#Cookie"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Represents a cookie returned by a simulated request.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<strong>morsel</strong> – A <code>Morsel</code> object from which to derive the cookie data.</td> </tr>  </table> <dl class="attribute"> <dt id="falcon.testing.Cookie.name">
<code>name</code> </dt> <dd>
<p>The cookie’s name.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Type:</th>
<td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></td> </tr>  </table> </dd>
</dl> <dl class="attribute"> <dt id="falcon.testing.Cookie.value">
<code>value</code> </dt> <dd>
<p>The value of the cookie.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Type:</th>
<td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></td> </tr>  </table> </dd>
</dl> <dl class="attribute"> <dt id="falcon.testing.Cookie.expires">
<code>expires</code> </dt> <dd>
<p>Expiration timestamp for the cookie, or <code>None</code> if not specified.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Type:</th>
<td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.7)">datetime.datetime</a></td> </tr>  </table> </dd>
</dl> <dl class="attribute"> <dt id="falcon.testing.Cookie.path">
<code>path</code> </dt> <dd>
<p>The path prefix to which this cookie is restricted, or <code>None</code> if not specified.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Type:</th>
<td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></td> </tr>  </table> </dd>
</dl> <dl class="attribute"> <dt id="falcon.testing.Cookie.domain">
<code>domain</code> </dt> <dd>
<p>The domain to which this cookie is restricted, or <code>None</code> if not specified.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Type:</th>
<td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></td> </tr>  </table> </dd>
</dl> <dl class="attribute"> <dt id="falcon.testing.Cookie.max_age">
<code>max_age</code> </dt> <dd>
<p>The lifetime of the cookie in seconds, or <code>None</code> if not specified.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Type:</th>
<td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)">int</a></td> </tr>  </table> </dd>
</dl> <dl class="attribute"> <dt id="falcon.testing.Cookie.secure">
<code>secure</code> </dt> <dd>
<p>Whether or not the cookie may only only be transmitted from the client via HTTPS.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Type:</th>
<td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)">bool</a></td> </tr>  </table> </dd>
</dl> <dl class="attribute"> <dt id="falcon.testing.Cookie.http_only">
<code>http_only</code> </dt> <dd>
<p>Whether or not the cookie may only be included in unscripted requests from the client.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Type:</th>
<td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)">bool</a></td> </tr>  </table> </dd>
</dl> </dd>
</dl> <dl class="function"> <dt id="falcon.testing.simulate_request">
<code>falcon.testing.simulate_request(app, method='GET', path='/', query_string=None, headers=None, body=None, json=None, file_wrapper=None, wsgierrors=None, params=None, params_csv=True, protocol='http', host='falconframework.org', remote_addr=None, extras=None)</code> <a class="reference internal" href="https://falcon.readthedocs.io/en/2.0.0/_modules/falcon/testing/client.html#simulate_request"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Simulates a request to a WSGI application.</p> <p>Performs a request against a WSGI application. Uses <a class="reference external" href="https://docs.python.org/3/library/wsgiref.html#module-wsgiref.validate" title="(in Python v3.7)"><code>wsgiref.validate</code></a> to ensure the response is valid WSGI.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr><th class="field-name" colspan="2">Keyword Arguments:</th></tr> <tr>
<td> </td>
<td class="field-body">
<ul class="first simple"> <li>
<strong>app</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#callable" title="(in Python v3.7)">callable</a>) – The WSGI application to call</li> <li>
<strong>method</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – An HTTP method to use in the request (default: ‘GET’)</li> <li>
<strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – <p>The URL path to request (default: ‘/’).</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">The path may contain a query string. However, neither <code>query_string</code> nor <code>params</code> may be specified in this case.</p> </div> </li> <li>
<strong>protocol</strong> – The protocol to use for the URL scheme (default: ‘http’)</li> <li>
<strong>params</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a>) – A dictionary of query string parameters, where each key is a parameter name, and each value is either a <code>str</code> or something that can be converted into a <code>str</code>, or a list of such values. If a <code>list</code>, the value will be converted to a comma-delimited string of values (e.g., ‘thing=1,2,3’).</li> <li>
<strong>params_csv</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)">bool</a>) – Set to <code>False</code> to encode list values in query string params by specifying multiple instances of the parameter (e.g., ‘thing=1&amp;thing=2&amp;thing=3’). Otherwise, parameters will be encoded as comma-separated values (e.g., ‘thing=1,2,3’). Defaults to <code>True</code>.</li> <li>
<strong>query_string</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – A raw query string to include in the request (default: <code>None</code>). If specified, overrides <code>params</code>.</li> <li>
<strong>headers</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a>) – Additional headers to include in the request (default: <code>None</code>)</li> <li>
<strong>body</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – A string to send as the body of the request. Accepts both byte strings and Unicode strings (default: <code>None</code>). If a Unicode string is provided, it will be encoded as UTF-8 in the request.</li> <li>
<strong>json</strong> (<em>JSON serializable</em>) – A JSON document to serialize as the body of the request (default: <code>None</code>). If specified, overrides <code>body</code> and the Content-Type header in <code>headers</code>.</li> <li>
<strong>file_wrapper</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#callable" title="(in Python v3.7)">callable</a>) – Callable that returns an iterable, to be used as the value for <em>wsgi.file_wrapper</em> in the environ (default: <code>None</code>). This can be used to test high-performance file transmission when <code>resp.stream</code> is set to a file-like object.</li> <li>
<strong>host</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – A string to use for the hostname part of the fully qualified request URL (default: ‘falconframework.org’)</li> <li>
<strong>remote_addr</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – A string to use as the remote IP address for the request (default: ‘127.0.0.1’)</li> <li>
<strong>wsgierrors</strong> (<a class="reference external" href="https://docs.python.org/3/library/io.html#module-io" title="(in Python v3.7)">io</a>) – The stream to use as <em>wsgierrors</em> (default <code>sys.stderr</code>)</li> <li>
<strong>extras</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a>) – Additional CGI variables to add to the WSGI <code>environ</code> dictionary for the request (default: <code>None</code>)</li> </ul> </td> </tr> <tr>
<th class="field-name">Returns:</th>
<td class="field-body">
<p class="first">The result of the request</p> </td> </tr> <tr>
<th class="field-name">Return type:</th>
<td class="field-body">
<p class="first last"><a class="reference internal" href="#falcon.testing.Result" title="falcon.testing.Result"><code>Result</code></a></p> </td> </tr>  </table> </dd>
</dl> <dl class="function"> <dt id="falcon.testing.simulate_get">
<code>falcon.testing.simulate_get(app, path, **kwargs)</code> <a class="reference internal" href="https://falcon.readthedocs.io/en/2.0.0/_modules/falcon/testing/client.html#simulate_get"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Simulates a GET request to a WSGI application.</p> <p>Equivalent to:</p> <pre data-language="python">simulate_request(app, 'GET', path, **kwargs)
</pre> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first simple"> <li>
<strong>app</strong> (<em>callable</em>) – The WSGI application to call</li> <li>
<strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – <p>The URL path to request.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">The path may contain a query string. However, neither <code>query_string</code> nor <code>params</code> may be specified in this case.</p> </div> </li> </ul> </td> </tr> <tr><th class="field-name" colspan="2">Keyword Arguments:</th></tr> <tr>
<td> </td>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>params</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a>) – A dictionary of query string parameters, where each key is a parameter name, and each value is either a <code>str</code> or something that can be converted into a <code>str</code>, or a list of such values. If a <code>list</code>, the value will be converted to a comma-delimited string of values (e.g., ‘thing=1,2,3’).</li> <li>
<strong>params_csv</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)">bool</a>) – Set to <code>False</code> to encode list values in query string params by specifying multiple instances of the parameter (e.g., ‘thing=1&amp;thing=2&amp;thing=3’). Otherwise, parameters will be encoded as comma-separated values (e.g., ‘thing=1,2,3’). Defaults to <code>True</code>.</li> <li>
<strong>query_string</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – A raw query string to include in the request (default: <code>None</code>). If specified, overrides <code>params</code>.</li> <li>
<strong>headers</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a>) – Additional headers to include in the request (default: <code>None</code>)</li> <li>
<strong>file_wrapper</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#callable" title="(in Python v3.7)">callable</a>) – Callable that returns an iterable, to be used as the value for <em>wsgi.file_wrapper</em> in the environ (default: <code>None</code>). This can be used to test high-performance file transmission when <code>resp.stream</code> is set to a file-like object.</li> <li>
<strong>protocol</strong> – The protocol to use for the URL scheme (default: ‘http’)</li> <li>
<strong>host</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – A string to use for the hostname part of the fully qualified request URL (default: ‘falconframework.org’)</li> <li>
<strong>remote_addr</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – A string to use as the remote IP address for the request (default: ‘127.0.0.1’)</li> <li>
<strong>extras</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a>) – Additional CGI variables to add to the WSGI <code>environ</code> dictionary for the request (default: <code>None</code>)</li> </ul> </td> </tr>  </table> </dd>
</dl> <dl class="function"> <dt id="falcon.testing.simulate_head">
<code>falcon.testing.simulate_head(app, path, **kwargs)</code> <a class="reference internal" href="https://falcon.readthedocs.io/en/2.0.0/_modules/falcon/testing/client.html#simulate_head"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Simulates a HEAD request to a WSGI application.</p> <p>Equivalent to:</p> <pre data-language="python">simulate_request(app, 'HEAD', path, **kwargs)
</pre> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first simple"> <li>
<strong>app</strong> (<em>callable</em>) – The WSGI application to call</li> <li>
<strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – <p>The URL path to request.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">The path may contain a query string. However, neither <code>query_string</code> nor <code>params</code> may be specified in this case.</p> </div> </li> </ul> </td> </tr> <tr><th class="field-name" colspan="2">Keyword Arguments:</th></tr> <tr>
<td> </td>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>params</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a>) – A dictionary of query string parameters, where each key is a parameter name, and each value is either a <code>str</code> or something that can be converted into a <code>str</code>, or a list of such values. If a <code>list</code>, the value will be converted to a comma-delimited string of values (e.g., ‘thing=1,2,3’).</li> <li>
<strong>params_csv</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)">bool</a>) – Set to <code>False</code> to encode list values in query string params by specifying multiple instances of the parameter (e.g., ‘thing=1&amp;thing=2&amp;thing=3’). Otherwise, parameters will be encoded as comma-separated values (e.g., ‘thing=1,2,3’). Defaults to <code>True</code>.</li> <li>
<strong>query_string</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – A raw query string to include in the request (default: <code>None</code>). If specified, overrides <code>params</code>.</li> <li>
<strong>headers</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a>) – Additional headers to include in the request (default: <code>None</code>)</li> <li>
<strong>protocol</strong> – The protocol to use for the URL scheme (default: ‘http’)</li> <li>
<strong>host</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – A string to use for the hostname part of the fully qualified request URL (default: ‘falconframework.org’)</li> <li>
<strong>remote_addr</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – A string to use as the remote IP address for the request (default: ‘127.0.0.1’)</li> <li>
<strong>extras</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a>) – Additional CGI variables to add to the WSGI <code>environ</code> dictionary for the request (default: <code>None</code>)</li> </ul> </td> </tr>  </table> </dd>
</dl> <dl class="function"> <dt id="falcon.testing.simulate_post">
<code>falcon.testing.simulate_post(app, path, **kwargs)</code> <a class="reference internal" href="https://falcon.readthedocs.io/en/2.0.0/_modules/falcon/testing/client.html#simulate_post"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Simulates a POST request to a WSGI application.</p> <p>Equivalent to:</p> <pre data-language="python">simulate_request(app, 'POST', path, **kwargs)
</pre> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first simple"> <li>
<strong>app</strong> (<em>callable</em>) – The WSGI application to call</li> <li>
<strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – The URL path to request</li> </ul> </td> </tr> <tr><th class="field-name" colspan="2">Keyword Arguments:</th></tr> <tr>
<td> </td>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>params</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a>) – A dictionary of query string parameters, where each key is a parameter name, and each value is either a <code>str</code> or something that can be converted into a <code>str</code>, or a list of such values. If a <code>list</code>, the value will be converted to a comma-delimited string of values (e.g., ‘thing=1,2,3’).</li> <li>
<strong>params_csv</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)">bool</a>) – Set to <code>False</code> to encode list values in query string params by specifying multiple instances of the parameter (e.g., ‘thing=1&amp;thing=2&amp;thing=3’). Otherwise, parameters will be encoded as comma-separated values (e.g., ‘thing=1,2,3’). Defaults to <code>True</code>.</li> <li>
<strong>headers</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a>) – Additional headers to include in the request (default: <code>None</code>)</li> <li>
<strong>body</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – A string to send as the body of the request. Accepts both byte strings and Unicode strings (default: <code>None</code>). If a Unicode string is provided, it will be encoded as UTF-8 in the request.</li> <li>
<strong>json</strong> (<em>JSON serializable</em>) – A JSON document to serialize as the body of the request (default: <code>None</code>). If specified, overrides <code>body</code> and the Content-Type header in <code>headers</code>.</li> <li>
<strong>protocol</strong> – The protocol to use for the URL scheme (default: ‘http’)</li> <li>
<strong>host</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – A string to use for the hostname part of the fully qualified request URL (default: ‘falconframework.org’)</li> <li>
<strong>remote_addr</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – A string to use as the remote IP address for the request (default: ‘127.0.0.1’)</li> <li>
<strong>extras</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a>) – Additional CGI variables to add to the WSGI <code>environ</code> dictionary for the request (default: <code>None</code>)</li> </ul> </td> </tr>  </table> </dd>
</dl> <dl class="function"> <dt id="falcon.testing.simulate_put">
<code>falcon.testing.simulate_put(app, path, **kwargs)</code> <a class="reference internal" href="https://falcon.readthedocs.io/en/2.0.0/_modules/falcon/testing/client.html#simulate_put"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Simulates a PUT request to a WSGI application.</p> <p>Equivalent to:</p> <pre data-language="python">simulate_request(app, 'PUT', path, **kwargs)
</pre> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first simple"> <li>
<strong>app</strong> (<em>callable</em>) – The WSGI application to call</li> <li>
<strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – The URL path to request</li> </ul> </td> </tr> <tr><th class="field-name" colspan="2">Keyword Arguments:</th></tr> <tr>
<td> </td>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>params</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a>) – A dictionary of query string parameters, where each key is a parameter name, and each value is either a <code>str</code> or something that can be converted into a <code>str</code>, or a list of such values. If a <code>list</code>, the value will be converted to a comma-delimited string of values (e.g., ‘thing=1,2,3’).</li> <li>
<strong>params_csv</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)">bool</a>) – Set to <code>False</code> to encode list values in query string params by specifying multiple instances of the parameter (e.g., ‘thing=1&amp;thing=2&amp;thing=3’). Otherwise, parameters will be encoded as comma-separated values (e.g., ‘thing=1,2,3’). Defaults to <code>True</code>.</li> <li>
<strong>headers</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a>) – Additional headers to include in the request (default: <code>None</code>)</li> <li>
<strong>body</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – A string to send as the body of the request. Accepts both byte strings and Unicode strings (default: <code>None</code>). If a Unicode string is provided, it will be encoded as UTF-8 in the request.</li> <li>
<strong>json</strong> (<em>JSON serializable</em>) – A JSON document to serialize as the body of the request (default: <code>None</code>). If specified, overrides <code>body</code> and the Content-Type header in <code>headers</code>.</li> <li>
<strong>protocol</strong> – The protocol to use for the URL scheme (default: ‘http’)</li> <li>
<strong>host</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – A string to use for the hostname part of the fully qualified request URL (default: ‘falconframework.org’)</li> <li>
<strong>remote_addr</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – A string to use as the remote IP address for the request (default: ‘127.0.0.1’)</li> <li>
<strong>extras</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a>) – Additional CGI variables to add to the WSGI <code>environ</code> dictionary for the request (default: <code>None</code>)</li> </ul> </td> </tr>  </table> </dd>
</dl> <dl class="function"> <dt id="falcon.testing.simulate_options">
<code>falcon.testing.simulate_options(app, path, **kwargs)</code> <a class="reference internal" href="https://falcon.readthedocs.io/en/2.0.0/_modules/falcon/testing/client.html#simulate_options"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Simulates an OPTIONS request to a WSGI application.</p> <p>Equivalent to:</p> <pre data-language="python">simulate_request(app, 'OPTIONS', path, **kwargs)
</pre> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first simple"> <li>
<strong>app</strong> (<em>callable</em>) – The WSGI application to call</li> <li>
<strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – The URL path to request</li> </ul> </td> </tr> <tr><th class="field-name" colspan="2">Keyword Arguments:</th></tr> <tr>
<td> </td>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>params</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a>) – A dictionary of query string parameters, where each key is a parameter name, and each value is either a <code>str</code> or something that can be converted into a <code>str</code>, or a list of such values. If a <code>list</code>, the value will be converted to a comma-delimited string of values (e.g., ‘thing=1,2,3’).</li> <li>
<strong>params_csv</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)">bool</a>) – Set to <code>False</code> to encode list values in query string params by specifying multiple instances of the parameter (e.g., ‘thing=1&amp;thing=2&amp;thing=3’). Otherwise, parameters will be encoded as comma-separated values (e.g., ‘thing=1,2,3’). Defaults to <code>True</code>.</li> <li>
<strong>headers</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a>) – Additional headers to include in the request (default: <code>None</code>)</li> <li>
<strong>protocol</strong> – The protocol to use for the URL scheme (default: ‘http’)</li> <li>
<strong>host</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – A string to use for the hostname part of the fully qualified request URL (default: ‘falconframework.org’)</li> <li>
<strong>remote_addr</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – A string to use as the remote IP address for the request (default: ‘127.0.0.1’)</li> <li>
<strong>extras</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a>) – Additional CGI variables to add to the WSGI <code>environ</code> dictionary for the request (default: <code>None</code>)</li> </ul> </td> </tr>  </table> </dd>
</dl> <dl class="function"> <dt id="falcon.testing.simulate_patch">
<code>falcon.testing.simulate_patch(app, path, **kwargs)</code> <a class="reference internal" href="https://falcon.readthedocs.io/en/2.0.0/_modules/falcon/testing/client.html#simulate_patch"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Simulates a PATCH request to a WSGI application.</p> <p>Equivalent to:</p> <pre data-language="python">simulate_request(app, 'PATCH', path, **kwargs)
</pre> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first simple"> <li>
<strong>app</strong> (<em>callable</em>) – The WSGI application to call</li> <li>
<strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – The URL path to request</li> </ul> </td> </tr> <tr><th class="field-name" colspan="2">Keyword Arguments:</th></tr> <tr>
<td> </td>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>params</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a>) – A dictionary of query string parameters, where each key is a parameter name, and each value is either a <code>str</code> or something that can be converted into a <code>str</code>, or a list of such values. If a <code>list</code>, the value will be converted to a comma-delimited string of values (e.g., ‘thing=1,2,3’).</li> <li>
<strong>params_csv</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)">bool</a>) – Set to <code>False</code> to encode list values in query string params by specifying multiple instances of the parameter (e.g., ‘thing=1&amp;thing=2&amp;thing=3’). Otherwise, parameters will be encoded as comma-separated values (e.g., ‘thing=1,2,3’). Defaults to <code>True</code>.</li> <li>
<strong>headers</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a>) – Additional headers to include in the request (default: <code>None</code>)</li> <li>
<strong>body</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – A string to send as the body of the request. Accepts both byte strings and Unicode strings (default: <code>None</code>). If a Unicode string is provided, it will be encoded as UTF-8 in the request.</li> <li>
<strong>json</strong> (<em>JSON serializable</em>) – A JSON document to serialize as the body of the request (default: <code>None</code>). If specified, overrides <code>body</code> and the Content-Type header in <code>headers</code>.</li> <li>
<strong>protocol</strong> – The protocol to use for the URL scheme (default: ‘http’)</li> <li>
<strong>host</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – A string to use for the hostname part of the fully qualified request URL (default: ‘falconframework.org’)</li> <li>
<strong>remote_addr</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – A string to use as the remote IP address for the request (default: ‘127.0.0.1’)</li> <li>
<strong>extras</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a>) – Additional CGI variables to add to the WSGI <code>environ</code> dictionary for the request (default: <code>None</code>)</li> </ul> </td> </tr>  </table> </dd>
</dl> <dl class="function"> <dt id="falcon.testing.simulate_delete">
<code>falcon.testing.simulate_delete(app, path, **kwargs)</code> <a class="reference internal" href="https://falcon.readthedocs.io/en/2.0.0/_modules/falcon/testing/client.html#simulate_delete"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Simulates a DELETE request to a WSGI application.</p> <p>Equivalent to:</p> <pre data-language="python">simulate_request(app, 'DELETE', path, **kwargs)
</pre> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first simple"> <li>
<strong>app</strong> (<em>callable</em>) – The WSGI application to call</li> <li>
<strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – The URL path to request</li> </ul> </td> </tr> <tr><th class="field-name" colspan="2">Keyword Arguments:</th></tr> <tr>
<td> </td>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>params</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a>) – A dictionary of query string parameters, where each key is a parameter name, and each value is either a <code>str</code> or something that can be converted into a <code>str</code>, or a list of such values. If a <code>list</code>, the value will be converted to a comma-delimited string of values (e.g., ‘thing=1,2,3’).</li> <li>
<strong>params_csv</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)">bool</a>) – Set to <code>False</code> to encode list values in query string params by specifying multiple instances of the parameter (e.g., ‘thing=1&amp;thing=2&amp;thing=3’). Otherwise, parameters will be encoded as comma-separated values (e.g., ‘thing=1,2,3’). Defaults to <code>True</code>.</li> <li>
<strong>headers</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a>) – Additional headers to include in the request (default: <code>None</code>)</li> <li>
<strong>protocol</strong> – The protocol to use for the URL scheme (default: ‘http’)</li> <li>
<strong>host</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – A string to use for the hostname part of the fully qualified request URL (default: ‘falconframework.org’)</li> <li>
<strong>remote_addr</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – A string to use as the remote IP address for the request (default: ‘127.0.0.1’)</li> <li>
<strong>extras</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a>) – Additional CGI variables to add to the WSGI <code>environ</code> dictionary for the request (default: <code>None</code>)</li> </ul> </td> </tr>  </table> </dd>
</dl> <dl class="class"> <dt id="falcon.testing.TestClient">
<code>class falcon.testing.TestClient(app, headers=None)</code> <a class="reference internal" href="https://falcon.readthedocs.io/en/2.0.0/_modules/falcon/testing/client.html#TestClient"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Simulates requests to a WSGI application.</p> <p>This class provides a contextual wrapper for Falcon’s <code>simulate_*</code> test functions. It lets you replace this:</p> <pre data-language="python">simulate_get(app, '/messages')
simulate_head(app, '/messages')
</pre> <p>with this:</p> <pre data-language="python">client = TestClient(app)
client.simulate_get('/messages')
client.simulate_head('/messages')
</pre> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">The methods all call <code>self.simulate_request()</code> for convenient overriding of request preparation by child classes.</p> </div> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<strong>app</strong> (<em>callable</em>) – A WSGI application to target when simulating requests</td> </tr> <tr><th class="field-name" colspan="2">Keyword Arguments:</th></tr> <tr>
<td> </td>
<td class="field-body">
<strong>headers</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a>) – Default headers to set on every request (default <code>None</code>). These defaults may be overridden by passing values for the same headers to one of the <code>simulate_*()</code> methods.</td> </tr>  </table> <dl class="method"> <dt id="falcon.testing.TestClient.simulate_delete">
<code>simulate_delete(path='/', **kwargs)</code> <a class="reference internal" href="https://falcon.readthedocs.io/en/2.0.0/_modules/falcon/testing/client.html#TestClient.simulate_delete"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Simulates a DELETE request to a WSGI application.</p> <p>(See also: <a class="reference internal" href="#falcon.testing.simulate_delete" title="falcon.testing.simulate_delete"><code>falcon.testing.simulate_delete()</code></a>)</p> </dd>
</dl> <dl class="method"> <dt id="falcon.testing.TestClient.simulate_get">
<code>simulate_get(path='/', **kwargs)</code> <a class="reference internal" href="https://falcon.readthedocs.io/en/2.0.0/_modules/falcon/testing/client.html#TestClient.simulate_get"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Simulates a GET request to a WSGI application.</p> <p>(See also: <a class="reference internal" href="#falcon.testing.simulate_get" title="falcon.testing.simulate_get"><code>falcon.testing.simulate_get()</code></a>)</p> </dd>
</dl> <dl class="method"> <dt id="falcon.testing.TestClient.simulate_head">
<code>simulate_head(path='/', **kwargs)</code> <a class="reference internal" href="https://falcon.readthedocs.io/en/2.0.0/_modules/falcon/testing/client.html#TestClient.simulate_head"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Simulates a HEAD request to a WSGI application.</p> <p>(See also: <a class="reference internal" href="#falcon.testing.simulate_head" title="falcon.testing.simulate_head"><code>falcon.testing.simulate_head()</code></a>)</p> </dd>
</dl> <dl class="method"> <dt id="falcon.testing.TestClient.simulate_options">
<code>simulate_options(path='/', **kwargs)</code> <a class="reference internal" href="https://falcon.readthedocs.io/en/2.0.0/_modules/falcon/testing/client.html#TestClient.simulate_options"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Simulates an OPTIONS request to a WSGI application.</p> <p>(See also: <a class="reference internal" href="#falcon.testing.simulate_options" title="falcon.testing.simulate_options"><code>falcon.testing.simulate_options()</code></a>)</p> </dd>
</dl> <dl class="method"> <dt id="falcon.testing.TestClient.simulate_patch">
<code>simulate_patch(path='/', **kwargs)</code> <a class="reference internal" href="https://falcon.readthedocs.io/en/2.0.0/_modules/falcon/testing/client.html#TestClient.simulate_patch"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Simulates a PATCH request to a WSGI application.</p> <p>(See also: <a class="reference internal" href="#falcon.testing.simulate_patch" title="falcon.testing.simulate_patch"><code>falcon.testing.simulate_patch()</code></a>)</p> </dd>
</dl> <dl class="method"> <dt id="falcon.testing.TestClient.simulate_post">
<code>simulate_post(path='/', **kwargs)</code> <a class="reference internal" href="https://falcon.readthedocs.io/en/2.0.0/_modules/falcon/testing/client.html#TestClient.simulate_post"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Simulates a POST request to a WSGI application.</p> <p>(See also: <a class="reference internal" href="#falcon.testing.simulate_post" title="falcon.testing.simulate_post"><code>falcon.testing.simulate_post()</code></a>)</p> </dd>
</dl> <dl class="method"> <dt id="falcon.testing.TestClient.simulate_put">
<code>simulate_put(path='/', **kwargs)</code> <a class="reference internal" href="https://falcon.readthedocs.io/en/2.0.0/_modules/falcon/testing/client.html#TestClient.simulate_put"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Simulates a PUT request to a WSGI application.</p> <p>(See also: <a class="reference internal" href="#falcon.testing.simulate_put" title="falcon.testing.simulate_put"><code>falcon.testing.simulate_put()</code></a>)</p> </dd>
</dl> <dl class="method"> <dt id="falcon.testing.TestClient.simulate_request">
<code>simulate_request(*args, **kwargs)</code> <a class="reference internal" href="https://falcon.readthedocs.io/en/2.0.0/_modules/falcon/testing/client.html#TestClient.simulate_request"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Simulates a request to a WSGI application.</p> <p>Wraps <a class="reference internal" href="#falcon.testing.simulate_request" title="falcon.testing.simulate_request"><code>falcon.testing.simulate_request()</code></a> to perform a WSGI request directly against <code>self.app</code>. Equivalent to:</p> <pre data-language="python">falcon.testing.simulate_request(self.app, *args, **kwargs)
</pre> </dd>
</dl> </dd>
</dl> <dl class="class"> <dt id="falcon.testing.TestCase">
<code>class falcon.testing.TestCase(methodName='runTest')</code> <a class="reference internal" href="https://falcon.readthedocs.io/en/2.0.0/_modules/falcon/testing/test_case.html#TestCase"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Extends <a class="reference external" href="https://docs.python.org/3/library/unittest.html#module-unittest" title="(in Python v3.7)"><code>unittest</code></a> to support WSGI functional testing.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">If available, uses <code>testtools</code> in lieu of <a class="reference external" href="https://docs.python.org/3/library/unittest.html#module-unittest" title="(in Python v3.7)"><code>unittest</code></a>.</p> </div> <p>This base class provides some extra plumbing for unittest-style test cases, to help simulate WSGI calls without having to spin up an actual web server. Various simulation methods are derived from <a class="reference internal" href="#falcon.testing.TestClient" title="falcon.testing.TestClient"><code>falcon.testing.TestClient</code></a>.</p> <p>Simply inherit from this class in your test case classes instead of <a class="reference external" href="https://docs.python.org/3/library/unittest.html#unittest.TestCase" title="(in Python v3.7)"><code>unittest.TestCase</code></a> or <code>testtools.TestCase</code>.</p> <dl class="attribute"> <dt id="falcon.testing.TestCase.app">
<code>app</code> </dt> <dd>
<p>A WSGI application to target when simulating requests (default: <code>falcon.API()</code>). When testing your application, you will need to set this to your own instance of <code>falcon.API</code>. For example:</p> <pre data-language="python">from falcon import testing
import myapp


class MyTestCase(testing.TestCase):
    def setUp(self):
        super(MyTestCase, self).setUp()

        # Assume the hypothetical `myapp` package has a
        # function called `create()` to initialize and
        # return a `falcon.API` instance.
        self.app = myapp.create()


class TestMyApp(MyTestCase):
    def test_get_message(self):
        doc = {u'message': u'Hello world!'}

        result = self.simulate_get('/messages/42')
        self.assertEqual(result.json, doc)
</pre> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Type:</th>
<td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)">object</a></td> </tr>  </table> </dd>
</dl> <dl class="method"> <dt id="falcon.testing.TestCase.setUp">
<code>setUp()</code> <a class="reference internal" href="https://falcon.readthedocs.io/en/2.0.0/_modules/falcon/testing/test_case.html#TestCase.setUp"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Hook method for setting up the test fixture before exercising it.</p> </dd>
</dl> </dd>
</dl> <dl class="class"> <dt id="falcon.testing.SimpleTestResource">
<code>class falcon.testing.SimpleTestResource(status=None, body=None, json=None, headers=None)</code> <a class="reference internal" href="https://falcon.readthedocs.io/en/2.0.0/_modules/falcon/testing/resource.html#SimpleTestResource"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Mock resource for functional testing of framework components.</p> <p>This class implements a simple test resource that can be extended as needed to test middleware, hooks, and the Falcon framework itself.</p> <p>Only noop <code>on_get()</code> and <code>on_post()</code> responders are implemented; when overriding these, or adding additional responders in child classes, they can be decorated with the <a class="reference internal" href="#falcon.testing.capture_responder_args" title="falcon.testing.capture_responder_args"><code>falcon.testing.capture_responder_args()</code></a> hook in order to capture the <em>req</em>, <em>resp</em>, and <em>params</em> arguments that are passed to the responder. Responders may also be decorated with the <code>falcon.testing.set_resp_defaults()</code> hook in order to set <em>resp</em> properties to default <em>status</em>, <em>body</em>, and <em>header</em> values.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr><th class="field-name" colspan="2">Keyword Arguments:</th></tr> <tr>
<td> </td>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>status</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – Default status string to use in responses</li> <li>
<strong>body</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – Default body string to use in responses</li> <li>
<strong>json</strong> (<em>JSON serializable</em>) – Default JSON document to use in responses. Will be serialized to a string and encoded as UTF-8. Either <em>json</em> or <em>body</em> may be specified, but not both.</li> <li>
<strong>headers</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a>) – Default set of additional headers to include in responses</li> </ul> </td> </tr>  </table> <dl class="attribute"> <dt id="falcon.testing.SimpleTestResource.called">
<code>called</code> </dt> <dd>
<p>Whether or not a req/resp was captured.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Type:</th>
<td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)">bool</a></td> </tr>  </table> </dd>
</dl> <dl class="attribute"> <dt id="falcon.testing.SimpleTestResource.captured_req">
<code>captured_req</code> </dt> <dd>
<p>The last Request object passed into any one of the responder methods.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Type:</th>
<td class="field-body"><a class="reference internal" href="request_and_response.html#falcon.Request" title="falcon.Request">falcon.Request</a></td> </tr>  </table> </dd>
</dl> <dl class="attribute"> <dt id="falcon.testing.SimpleTestResource.captured_resp">
<code>captured_resp</code> </dt> <dd>
<p>The last Response object passed into any one of the responder methods.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Type:</th>
<td class="field-body"><a class="reference internal" href="request_and_response.html#falcon.Response" title="falcon.Response">falcon.Response</a></td> </tr>  </table> </dd>
</dl> <dl class="attribute"> <dt id="falcon.testing.SimpleTestResource.captured_kwargs">
<code>captured_kwargs</code> </dt> <dd>
<p>The last dictionary of kwargs, beyond <code>req</code> and <code>resp</code>, that were passed into any one of the responder methods.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Type:</th>
<td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a></td> </tr>  </table> </dd>
</dl> </dd>
</dl> <dl class="class"> <dt id="falcon.testing.StartResponseMock">
<code>class falcon.testing.StartResponseMock</code> <a class="reference internal" href="https://falcon.readthedocs.io/en/2.0.0/_modules/falcon/testing/srmock.html#StartResponseMock"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Mock object representing a WSGI <code>start_response</code> callable.</p> <dl class="attribute"> <dt id="falcon.testing.StartResponseMock.call_count">
<code>call_count</code> </dt> <dd>
<p>Number of times <code>start_response</code> was called.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Type:</th>
<td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)">int</a></td> </tr>  </table> </dd>
</dl> <dl class="attribute"> <dt id="falcon.testing.StartResponseMock.status">
<code>status</code> </dt> <dd>
<p>HTTP status line, e.g. ‘785 TPS Cover Sheet not attached’.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Type:</th>
<td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></td> </tr>  </table> </dd>
</dl> <dl class="attribute"> <dt id="falcon.testing.StartResponseMock.headers">
<code>headers</code> </dt> <dd>
<p>Raw headers list passed to <code>start_response</code>, per PEP-333.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Type:</th>
<td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)">list</a></td> </tr>  </table> </dd>
</dl> <dl class="attribute"> <dt id="falcon.testing.StartResponseMock.headers_dict">
<code>headers_dict</code> </dt> <dd>
<p>Headers as a case-insensitive <code>dict</code>-like object, instead of a <code>list</code>.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Type:</th>
<td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a></td> </tr>  </table> </dd>
</dl> </dd>
</dl> <dl class="function"> <dt id="falcon.testing.capture_responder_args">
<code>falcon.testing.capture_responder_args(req, resp, resource, params)</code> <a class="reference internal" href="https://falcon.readthedocs.io/en/2.0.0/_modules/falcon/testing/resource.html#capture_responder_args"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Before hook for capturing responder arguments.</p> <p>Adds the following attributes to the hooked responder’s resource class:</p>  <ul class="simple"> <li>captured_req</li> <li>captured_resp</li> <li>captured_kwargs</li> </ul>  </dd>
</dl> <dl class="function"> <dt id="falcon.testing.rand_string">
<code>falcon.testing.rand_string(min, max)</code> <a class="reference internal" href="https://falcon.readthedocs.io/en/2.0.0/_modules/falcon/testing/helpers.html#rand_string"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Returns a randomly-generated string, of a random length.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>min</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)">int</a>) – Minimum string length to return, inclusive</li> <li>
<strong>max</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)">int</a>) – Maximum string length to return, inclusive</li> </ul> </td> </tr>  </table> </dd>
</dl> <dl class="function"> <dt id="falcon.testing.create_environ">
<code>falcon.testing.create_environ(path='/', query_string='', protocol='HTTP/1.1', scheme='http', host='falconframework.org', port=None, headers=None, app='', body='', method='GET', wsgierrors=None, file_wrapper=None, remote_addr=None)</code> <a class="reference internal" href="https://falcon.readthedocs.io/en/2.0.0/_modules/falcon/testing/helpers.html#create_environ"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Creates a mock PEP-3333 environ <code>dict</code> for simulating WSGI requests.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr><th class="field-name" colspan="2">Keyword Arguments:</th></tr> <tr>
<td> </td>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – The path for the request (default ‘/’)</li> <li>
<strong>query_string</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – The query string to simulate, without a leading ‘?’ (default ‘’)</li> <li>
<strong>protocol</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – The HTTP protocol to simulate (default ‘HTTP/1.1’). If set to ‘HTTP/1.0’, the Host header will not be added to the environment.</li> <li>
<strong>scheme</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – URL scheme, either ‘http’ or ‘https’ (default ‘http’)</li> <li>
<strong>host</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – Hostname for the request (default ‘falconframework.org’)</li> <li>
<strong>port</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – The TCP port to simulate. Defaults to the standard port used by the given scheme (i.e., 80 for ‘http’ and 443 for ‘https’).</li> <li>
<strong>headers</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a>) – Headers as a <code>dict</code> or an iterable yielding (<em>key</em>, <em>value</em>) <code>tuple</code>’s</li> <li>
<strong>app</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – Value for the <code>SCRIPT_NAME</code> environ variable, described in PEP-333: ‘The initial portion of the request URL’s “path” that corresponds to the application object, so that the application knows its virtual “location”. This may be an empty string, if the application corresponds to the “root” of the server.’ (default ‘’)</li> <li>
<strong>body</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – The body of the request (default ‘’). Accepts both byte strings and Unicode strings. Unicode strings are encoded as UTF-8 in the request.</li> <li>
<strong>method</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – The HTTP method to use (default ‘GET’)</li> <li>
<strong>wsgierrors</strong> (<a class="reference external" href="https://docs.python.org/3/library/io.html#module-io" title="(in Python v3.7)">io</a>) – The stream to use as <em>wsgierrors</em> (default <code>sys.stderr</code>)</li> <li>
<strong>file_wrapper</strong> – Callable that returns an iterable, to be used as the value for <em>wsgi.file_wrapper</em> in the environ.</li> <li>
<strong>remote_addr</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>) – Remote address for the request (default ‘127.0.0.1’)</li> </ul> </td> </tr>  </table> </dd>
</dl> <dl class="function"> <dt id="falcon.testing.redirected">
<code>falcon.testing.redirected(stdout=&lt;_io.TextIOWrapper name='&lt;stdout&gt;' mode='w' encoding='UTF-8'&gt;, stderr=&lt;_io.TextIOWrapper name='&lt;stderr&gt;' mode='w' encoding='UTF-8'&gt;)</code> <a class="reference internal" href="https://falcon.readthedocs.io/en/2.0.0/_modules/falcon/testing/helpers.html#redirected"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>A context manager to temporarily redirect stdout or stderr</p> <p>e.g.:</p> <dl class="docutils"> <dt>with redirected(stderr=os.devnull):</dt> <dd>…</dd> </dl> </dd>
</dl> <dl class="function"> <dt id="falcon.testing.closed_wsgi_iterable">
<code>falcon.testing.closed_wsgi_iterable(iterable)</code> <a class="reference internal" href="https://falcon.readthedocs.io/en/2.0.0/_modules/falcon/testing/helpers.html#closed_wsgi_iterable"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Wraps an iterable to ensure its <code>close()</code> method is called.</p> <p>Wraps the given <code>iterable</code> in an iterator utilizing a <code>for</code> loop as illustrated in <a class="reference external" href="https://www.python.org/dev/peps/pep-3333/#the-server-gateway-side">the PEP-3333 server/gateway side example</a>. Finally, if the iterable has a <code>close()</code> method, it is called upon exception or exausting iteration.</p> <p>Furthermore, the first bytestring yielded from iteration, if any, is prefetched before returning the wrapped iterator in order to ensure the WSGI <code>start_response</code> function is called even if the WSGI application is a generator.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<strong>iterable</strong> (<em>iterable</em>) – An iterable that yields zero or more bytestrings, per PEP-3333</td> </tr> <tr>
<th class="field-name">Returns:</th>
<td class="field-body">An iterator yielding the same bytestrings as <code>iterable</code>
</td> </tr> <tr>
<th class="field-name">Return type:</th>
<td class="field-body">iterator</td> </tr>  </table> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2019 by Falcon contributors<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://falcon.readthedocs.io/en/2.0.0/api/testing.html" class="_attribution-link">https://falcon.readthedocs.io/en/2.0.0/api/testing.html</a>
  </p>
</div>
