<h1>Using Apache With RPM Based Systems (Redhat / CentOS / Fedora)</h1>  <p>While many distributions make Apache httpd available as operating system supported packages, it can sometimes be desirable to install and use the canonical version of Apache httpd on these systems, replacing the natively provided versions of the packages.</p> <p>While the Apache httpd project does not currently create binary RPMs for the various distributions out there, it is easy to build your own binary RPMs from the canonical Apache httpd tarball.</p> <p>This document explains how to build, install, configure and run Apache httpd 2.4 under Unix systems supporting the RPM packaging format.</p>     <h2 id="creating">Creating a Source RPM</h2> <p>The Apache httpd source tarball can be converted into an SRPM as follows:</p> <div class="example"><pre>rpmbuild -ts httpd-2.4.x.tar.bz2</pre></div>   <h2 id="building">Building RPMs</h2> <p>RPMs can be built directly from the Apache httpd source tarballs using the following command:</p> <div class="example"><pre>rpmbuild -tb httpd-2.4.x.tar.bz2</pre></div> <p>Corresponding "-devel" packages will be required to be installed on your build system prior to building the RPMs, the <code>rpmbuild</code> command will automatically calculate what RPMs are required and will list any dependencies that are missing on your system. These "-devel" packages will not be required after the build is completed, and can be safely removed.</p> <p>If successful, the following RPMs will be created:</p> <dl> <dt>httpd-2.4.x-1.i686.rpm</dt> <dd>The core server and basic module set.</dd> <dt>httpd-debuginfo-2.4.x-1.i686.rpm</dt> <dd>Debugging symbols for the server and all modules.</dd> <dt>httpd-devel-2.4.x-1.i686.rpm</dt> <dd>Headers and development files for the server.</dd> <dt>httpd-manual-2.4.x-1.i686.rpm</dt> <dd>The webserver manual.</dd> <dt>httpd-tools-2.4.x-1.i686.rpm</dt> <dd>Supporting tools for the webserver.</dd> <dt>mod_authnz_ldap-2.4.x-1.i686.rpm</dt> <dd>
<code class="module"><a href="../mod/mod_ldap.html">mod_ldap</a></code> and <code class="module"><a href="../mod/mod_authnz_ldap.html">mod_authnz_ldap</a></code>, with corresponding dependency on openldap.</dd> <dt>mod_lua-2.4.x-1.i686.rpm</dt> <dd>
<code class="module"><a href="../mod/mod_lua.html">mod_lua</a></code> module, with corresponding dependency on lua.</dd> <dt>mod_proxy_html-2.4.x-1.i686.rpm</dt> <dd>
<code class="module"><a href="../mod/mod_proxy_html.html">mod_proxy_html</a></code> module, with corresponding dependency on libxml2.</dd> <dt>mod_socache_dc-2.4.x-1.i686.rpm</dt> <dd>
<code class="module"><a href="../mod/mod_socache_dc.html">mod_socache_dc</a></code> module, with corresponding dependency on distcache.</dd> <dt>mod_ssl-2.4.x-1.i686.rpm</dt> <dd>
<code class="module"><a href="../mod/mod_ssl.html">mod_ssl</a></code> module, with corresponding dependency on openssl.</dd> </dl>   <h2 id="installing">Installing the Server</h2> <p>The <code>httpd</code> RPM is the only RPM necessary to get a basic server to run. Install it as follows:</p> <div class="example"><pre>rpm -U httpd-2.4.x-1.i686.rpm</pre></div> <p>Self contained modules are included with the server. Modules that depend on external libraries are provided as separate RPMs to install if needed.</p>   <h2 id="default">Configuring the Default Instance of Apache httpd</h2> <p>The default configuration for the server is installed by default beneath the <code>/etc/httpd</code> directory, with logs written by default to <code>/var/log/httpd</code>. The environment for the webserver is set by default within the optional <code>/etc/sysconfig/httpd</code> file.</p> <p>Start the server as follows:</p> <div class="example"><pre>service httpd restart</pre></div>   <h2 id="additional">Configuring Additional Instances of Apache httpd on the Same Machine</h2> <p>It is possible to configure additional instances of the Apache httpd server running independently alongside each other on the same machine. These instances can have independent configurations, and can potentially run as separate users if so configured.</p> <p>This was done by making the httpd startup script aware of its own name. This name is then used to find the environment file for the server, and in turn, the server root of the server instance.</p> <p>To create an additional instance called <code>httpd-additional</code>, follow these steps:</p> <ul> <li>Create a symbolic link to the startup script for the additional server: <div class="example"><pre>ln -s /etc/rc.d/init.d/httpd /etc/rc.d/init.d/httpd-additional
chkconfig --add httpd-additional</pre></div> </li> <li>Create an environment file for the server, using the <code>/etc/sysconfig/httpd</code> file as a template: <div class="example"><pre># template from httpd
cp /etc/sysconfig/httpd /etc/sysconfig/httpd-additional</pre></div> <div class="example"><pre># blank template
touch /etc/sysconfig/httpd-additional</pre></div> Edit <code>/etc/sysconfig/httpd-additional</code> and pass the server root of the new server instance within the <code>OPTIONS</code> environment variable. <div class="example"><pre>OPTIONS="-d /etc/httpd-additional -f conf/httpd-additional.conf"</pre></div> </li> <li>Edit the server configuration file <code>/etc/httpd-additional/conf/httpd-additional.conf</code> to ensure the correct ports and paths are configured. </li> <li>Start the server as follows: <div class="example"><pre>service httpd-additional restart</pre></div> </li> <li>Repeat this process as required for each server instance.</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2018 The Apache Software Foundation<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://httpd.apache.org/docs/2.4/en/platform/rpm.html" class="_attribution-link">https://httpd.apache.org/docs/2.4/en/platform/rpm.html</a>
  </p>
</div>
