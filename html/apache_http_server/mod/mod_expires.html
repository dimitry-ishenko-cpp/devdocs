<h1>Apache Module mod_expires</h1>  <table class="module">
<tr>
<th>Description:</th>
<td>Generation of <code>Expires</code> and <code>Cache-Control</code> HTTP headers according to user-specified criteria</td>
</tr> <tr>
<th>Status:</th>
<td>Extension</td>
</tr> <tr>
<th>Module Identifier:</th>
<td>expires_module</td>
</tr> <tr>
<th>Source File:</th>
<td>mod_expires.c</td>
</tr>
</table> <h3>Summary</h3> <p>This module controls the setting of the <code>Expires</code> HTTP header and the <code>max-age</code> directive of the <code>Cache-Control</code> HTTP header in server responses. The expiration date can set to be relative to either the time the source file was last modified, or to the time of the client access.</p> <p>These HTTP headers are an instruction to the client about the document's validity and persistence. If cached, the document may be fetched from the cache rather than from the source until this time has passed. After that, the cache copy is considered "expired" and invalid, and a new copy must be obtained from the source.</p> <p>To modify <code>Cache-Control</code> directives other than <code>max-age</code> (see <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9">RFC 2616 section 14.9</a>), you can use the <code class="directive"><a href="mod_headers.html#header">Header</a></code> directive.</p> <p> When the <code>Expires</code> header is already part of the response generated by the server, for example when generated by a CGI script or proxied from an origin server, this module does not change or add an <code>Expires</code> or <code>Cache-Control</code> header.</p>     <h2 id="AltSyn">Alternate Interval Syntax</h2> <p>The <code class="directive"><a href="#expiresdefault">ExpiresDefault</a></code> and <code class="directive"><a href="#expiresbytype">ExpiresByType</a></code> directives can also be defined in a more readable syntax of the form:</p> <pre class="prettyprint lang-config">ExpiresDefault "<var>base</var>  [plus <var>num</var> <var>type</var>] [<var>num</var> <var>type</var>] ..."
ExpiresByType type/encoding "<var>base</var>  [plus <var>num</var> <var>type</var>] [<var>num</var> <var>type</var>] ..."</pre> <p>where <var>base</var> is one of:</p> <ul> <li><code>access</code></li> <li>
<code>now</code> (equivalent to '<code>access</code>')</li> <li><code>modification</code></li> </ul> <p>The <code>plus</code> keyword is optional. <var>num</var> should be an integer value [acceptable to <code>atoi()</code>], and <var>type</var> is one of:</p> <ul> <li><code>years</code></li> <li><code>months</code></li> <li><code>weeks</code></li> <li><code>days</code></li> <li><code>hours</code></li> <li><code>minutes</code></li> <li><code>seconds</code></li> </ul> <p>For example, any of the following directives can be used to make documents expire 1 month after being accessed, by default:</p> <pre class="prettyprint lang-config">ExpiresDefault "access plus 1 month"
ExpiresDefault "access plus 4 weeks"
ExpiresDefault "access plus 30 days"</pre> <p>The expiry time can be fine-tuned by adding several '<var>num</var> <var>type</var>' clauses:</p> <pre class="prettyprint lang-config">ExpiresByType text/html "access plus 1 month 15 days 2 hours"
ExpiresByType image/gif "modification plus 5 hours 3 minutes"</pre> <p>Note that if you use a modification date based setting, the Expires header will <strong>not</strong> be added to content that does not come from a file on disk. This is due to the fact that there is no modification time for such content.</p>   <div class="directive-section">
<h2 id="expiresactive">ExpiresActive Directive</h2> <table class="directive"> <tr>
<th>Description:</th>
<td>Enables generation of <code>Expires</code> headers</td>
</tr> <tr>
<th>Syntax:</th>
<td><pre>ExpiresActive On|Off</pre></td>
</tr> <tr>
<th>Default:</th>
<td><pre>ExpiresActive Off</pre></td>
</tr> <tr>
<th>Context:</th>
<td>server config, virtual host, directory, .htaccess</td>
</tr> <tr>
<th>Override:</th>
<td>Indexes</td>
</tr> <tr>
<th>Status:</th>
<td>Extension</td>
</tr> <tr>
<th>Module:</th>
<td>mod_expires</td>
</tr> </table> <p>This directive enables or disables the generation of the <code>Expires</code> and <code>Cache-Control</code> headers for the document realm in question. (That is, if found in an <code>.htaccess</code> file, for instance, it applies only to documents generated from that directory.) If set to <code>Off</code>, the headers will not be generated for any document in the realm (unless overridden at a lower level, such as an <code>.htaccess</code> file overriding a server config file). If set to <code>On</code>, the headers will be added to served documents according to the criteria defined by the <code class="directive"><a href="#expiresbytype">ExpiresByType</a></code> and <code class="directive"><a href="#expiresdefault">ExpiresDefault</a></code> directives (<em>q.v.</em>).</p> <p>Note that this directive does not guarantee that an <code>Expires</code> or <code>Cache-Control</code> header will be generated. If the criteria aren't met, no header will be sent, and the effect will be as though this directive wasn't even specified.</p> </div>  <div class="directive-section">
<h2 id="expiresbytype">ExpiresByType Directive</h2> <table class="directive"> <tr>
<th>Description:</th>
<td>Value of the <code>Expires</code> header configured by MIME type</td>
</tr> <tr>
<th>Syntax:</th>
<td><pre>ExpiresByType MIME-type &lt;code&gt;seconds</pre></td>
</tr> <tr>
<th>Context:</th>
<td>server config, virtual host, directory, .htaccess</td>
</tr> <tr>
<th>Override:</th>
<td>Indexes</td>
</tr> <tr>
<th>Status:</th>
<td>Extension</td>
</tr> <tr>
<th>Module:</th>
<td>mod_expires</td>
</tr> </table> <p>This directive defines the value of the <code>Expires</code> header and the <code>max-age</code> directive of the <code>Cache-Control</code> header generated for documents of the specified type (<em>e.g.</em>, <code>text/html</code>). The second argument sets the number of seconds that will be added to a base time to construct the expiration date. The <code>Cache-Control: max-age</code> is calculated by subtracting the request time from the expiration date and expressing the result in seconds.</p> <p>The base time is either the last modification time of the file, or the time of the client's access to the document. Which should be used is specified by the <code>&lt;code&gt;</code> field; <code>M</code> means that the file's last modification time should be used as the base time, and <code>A</code> means the client's access time should be used.</p> <p>The difference in effect is subtle. If <code>M</code> is used, all current copies of the document in all caches will expire at the same time, which can be good for something like a weekly notice that's always found at the same URL. If <code>A</code> is used, the date of expiration is different for each client; this can be good for image files that don't change very often, particularly for a set of related documents that all refer to the same images (<em>i.e.</em>, the images will be accessed repeatedly within a relatively short timespan).</p> <div class="example">
<h3>Example:</h3>
<pre class="prettyprint lang-config"># enable expirations
ExpiresActive On
# expire GIF images after a month in the client's cache
ExpiresByType image/gif A2592000
# HTML documents are good for a week from the
# time they were changed
ExpiresByType text/html M604800</pre> </div> <p>Note that this directive only has effect if <code>ExpiresActive On</code> has been specified. It overrides, for the specified MIME type <em>only</em>, any expiration date set by the <code class="directive"><a href="#expiresdefault">ExpiresDefault</a></code> directive.</p> <p>You can also specify the expiration time calculation using an <a href="#AltSyn">alternate syntax</a>, described earlier in this document.</p> </div>  <div class="directive-section">
<h2 id="expiresdefault">ExpiresDefault Directive</h2> <table class="directive"> <tr>
<th>Description:</th>
<td>Default algorithm for calculating expiration time</td>
</tr> <tr>
<th>Syntax:</th>
<td><pre>ExpiresDefault &lt;code&gt;seconds</pre></td>
</tr> <tr>
<th>Context:</th>
<td>server config, virtual host, directory, .htaccess</td>
</tr> <tr>
<th>Override:</th>
<td>Indexes</td>
</tr> <tr>
<th>Status:</th>
<td>Extension</td>
</tr> <tr>
<th>Module:</th>
<td>mod_expires</td>
</tr> </table> <p>This directive sets the default algorithm for calculating the expiration time for all documents in the affected realm. It can be overridden on a type-by-type basis by the <code class="directive"><a href="#expiresbytype">ExpiresByType</a></code> directive. See the description of that directive for details about the syntax of the argument, and the <a href="#AltSyn">alternate syntax</a> description as well.</p> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2018 The Apache Software Foundation<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://httpd.apache.org/docs/2.4/en/mod/mod_expires.html" class="_attribution-link">https://httpd.apache.org/docs/2.4/en/mod/mod_expires.html</a>
  </p>
</div>
