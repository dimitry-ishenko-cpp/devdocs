<h1>Apache Module mod_usertrack</h1>  <table class="module">
<tr>
<th>Description:</th>
<td> <em>Clickstream</em> logging of user activity on a site </td>
</tr> <tr>
<th>Status:</th>
<td>Extension</td>
</tr> <tr>
<th>Module Identifier:</th>
<td>usertrack_module</td>
</tr> <tr>
<th>Source File:</th>
<td>mod_usertrack.c</td>
</tr>
</table> <h3>Summary</h3> <p>Provides tracking of a user through your website via browser cookies.</p>     <h2 id="logging">Logging</h2> <p><code class="module"><a href="mod_usertrack.html">mod_usertrack</a></code> sets a cookie which can be logged via <code class="module"><a href="mod_log_config.html">mod_log_config</a></code> configurable logging formats:</p> <pre class="prettyprint lang-config">LogFormat "%{Apache}n %r %t" usertrack
CustomLog "logs/clickstream.log" usertrack</pre>   <div class="directive-section">
<h2 id="cookiedomain">CookieDomain Directive</h2> <table class="directive"> <tr>
<th>Description:</th>
<td>The domain to which the tracking cookie applies</td>
</tr> <tr>
<th>Syntax:</th>
<td><pre>CookieDomain domain</pre></td>
</tr> <tr>
<th>Context:</th>
<td>server config, virtual host, directory, .htaccess</td>
</tr> <tr>
<th>Override:</th>
<td>FileInfo</td>
</tr> <tr>
<th>Status:</th>
<td>Extension</td>
</tr> <tr>
<th>Module:</th>
<td>mod_usertrack</td>
</tr> </table> <p>This directive controls the setting of the domain to which the tracking cookie applies. If not present, no domain is included in the cookie header field.</p> <p>The domain string <strong>must</strong> begin with a dot, and <strong>must</strong> include at least one embedded dot. That is, <code>.example.com</code> is legal, but <code>www.example.com</code> and <code>.com</code> are not.</p> <div class="note">Most browsers in use today will not allow cookies to be set for a two-part top level domain, such as <code>.co.uk</code>, although such a domain ostensibly fulfills the requirements above.<br> These domains are equivalent to top level domains such as <code>.com</code>, and allowing such cookies may be a security risk. Thus, if you are under a two-part top level domain, you should still use your actual domain, as you would with any other top level domain (for example <code>.example.co.uk</code>). </div> <pre class="prettyprint lang-config">CookieDomain .example.com</pre> </div>  <div class="directive-section">
<h2 id="cookieexpires">CookieExpires Directive</h2> <table class="directive"> <tr>
<th>Description:</th>
<td>Expiry time for the tracking cookie</td>
</tr> <tr>
<th>Syntax:</th>
<td><pre>CookieExpires expiry-period</pre></td>
</tr> <tr>
<th>Context:</th>
<td>server config, virtual host, directory, .htaccess</td>
</tr> <tr>
<th>Override:</th>
<td>FileInfo</td>
</tr> <tr>
<th>Status:</th>
<td>Extension</td>
</tr> <tr>
<th>Module:</th>
<td>mod_usertrack</td>
</tr> </table> <p>When used, this directive sets an expiry time on the cookie generated by the usertrack module. The <em>expiry-period</em> can be given either as a number of seconds, or in the format such as "2 weeks 3 days 7 hours". Valid denominations are: years, months, weeks, days, hours, minutes and seconds. If the expiry time is in any format other than one number indicating the number of seconds, it must be enclosed by double quotes.</p> <p>If this directive is not used, cookies last only for the current browser session.</p> <pre class="prettyprint lang-config">CookieExpires "3 weeks"</pre> </div>  <div class="directive-section">
<h2 id="cookiehttponly">CookieHTTPOnly Directive</h2> <table class="directive"> <tr>
<th>Description:</th>
<td>Adds the 'HTTPOnly' attribute to the cookie</td>
</tr> <tr>
<th>Syntax:</th>
<td><pre>CookieHTTPOnly on|off</pre></td>
</tr> <tr>
<th>Default:</th>
<td><pre>CookieHTTPOnly off</pre></td>
</tr> <tr>
<th>Context:</th>
<td>server config, virtual host, directory, .htaccess</td>
</tr> <tr>
<th>Override:</th>
<td>FileInfo</td>
</tr> <tr>
<th>Status:</th>
<td>Extension</td>
</tr> <tr>
<th>Module:</th>
<td>mod_usertrack</td>
</tr> <tr>
<th>Compatibility:</th>
<td>2.4.42 and later</td>
</tr> </table> <p>When set to 'ON', the 'HTTPOnly' cookie attribute is added to this modules tracking cookie. This attribute instructs browsers to block javascript from reading the value of the cookie.</p> </div>  <div class="directive-section">
<h2 id="cookiename">CookieName Directive</h2> <table class="directive"> <tr>
<th>Description:</th>
<td>Name of the tracking cookie</td>
</tr> <tr>
<th>Syntax:</th>
<td><pre>CookieName token</pre></td>
</tr> <tr>
<th>Default:</th>
<td><pre>CookieName Apache</pre></td>
</tr> <tr>
<th>Context:</th>
<td>server config, virtual host, directory, .htaccess</td>
</tr> <tr>
<th>Override:</th>
<td>FileInfo</td>
</tr> <tr>
<th>Status:</th>
<td>Extension</td>
</tr> <tr>
<th>Module:</th>
<td>mod_usertrack</td>
</tr> </table> <p>This directive allows you to change the name of the cookie this module uses for its tracking purposes. By default the cookie is named "<code>Apache</code>".</p> <p>You must specify a valid cookie name; results are unpredictable if you use a name containing unusual characters. Valid characters include A-Z, a-z, 0-9, "_", and "-".</p> <pre class="prettyprint lang-config">CookieName clicktrack</pre> </div>  <div class="directive-section">
<h2 id="cookiesamesite">CookieSameSite Directive</h2> <table class="directive"> <tr>
<th>Description:</th>
<td>Adds the 'SameSite' attribute to the cookie</td>
</tr> <tr>
<th>Syntax:</th>
<td><pre>CookieSameSite None|Lax|Strict</pre></td>
</tr> <tr>
<th>Default:</th>
<td><code>unset</code></td>
</tr> <tr>
<th>Context:</th>
<td>server config, virtual host, directory, .htaccess</td>
</tr> <tr>
<th>Override:</th>
<td>FileInfo</td>
</tr> <tr>
<th>Status:</th>
<td>Extension</td>
</tr> <tr>
<th>Module:</th>
<td>mod_usertrack</td>
</tr> <tr>
<th>Compatibility:</th>
<td>2.4.42 and later</td>
</tr> </table> <p>When set to 'None', 'Lax', or 'Strict', the 'SameSite' cookie attribute is added to this modules tracking cookie with the corresponding value. This attribute instructs browser on how to treat the cookie when it is requested in a cross-site context.</p> <div class="note"> <p>A value of 'None' sets 'SameSite=None', which is the most liberal setting. To omit this attribute, omit the directive entirely.</p> </div> </div>  <div class="directive-section">
<h2 id="cookiesecure">CookieSecure Directive</h2> <table class="directive"> <tr>
<th>Description:</th>
<td>Adds the 'Secure' attribute to the cookie</td>
</tr> <tr>
<th>Syntax:</th>
<td><pre>CookieSecure on|off</pre></td>
</tr> <tr>
<th>Default:</th>
<td><pre>CookieSecure off</pre></td>
</tr> <tr>
<th>Context:</th>
<td>server config, virtual host, directory, .htaccess</td>
</tr> <tr>
<th>Override:</th>
<td>FileInfo</td>
</tr> <tr>
<th>Status:</th>
<td>Extension</td>
</tr> <tr>
<th>Module:</th>
<td>mod_usertrack</td>
</tr> <tr>
<th>Compatibility:</th>
<td>2.4.42 and later</td>
</tr> </table> <p>When set to 'ON', the 'Secure' cookie attribute is added to this modules tracking cookie. This attribute instructs browsers to only transmit the cookie over HTTPS.</p> </div>  <div class="directive-section">
<h2 id="cookiestyle">CookieStyle Directive</h2> <table class="directive"> <tr>
<th>Description:</th>
<td>Format of the cookie header field</td>
</tr> <tr>
<th>Syntax:</th>
<td><pre>CookieStyle Netscape|Cookie|Cookie2|RFC2109|RFC2965</pre></td>
</tr> <tr>
<th>Default:</th>
<td><pre>CookieStyle Netscape</pre></td>
</tr> <tr>
<th>Context:</th>
<td>server config, virtual host, directory, .htaccess</td>
</tr> <tr>
<th>Override:</th>
<td>FileInfo</td>
</tr> <tr>
<th>Status:</th>
<td>Extension</td>
</tr> <tr>
<th>Module:</th>
<td>mod_usertrack</td>
</tr> </table> <p>This directive controls the format of the cookie header field. The three formats allowed are:</p> <ul> <li>
<strong>Netscape</strong>, which is the original but now deprecated syntax. This is the default, and the syntax Apache has historically used.</li> <li>
<strong>Cookie</strong> or <strong>RFC2109</strong>, which is the syntax that superseded the Netscape syntax.</li> <li>
<strong>Cookie2</strong> or <strong>RFC2965</strong>, which is the most current cookie syntax.</li> </ul> <p>Not all clients can understand all of these formats, but you should use the newest one that is generally acceptable to your users' browsers. At the time of writing, most browsers support all three of these formats, with <code>Cookie2</code> being the preferred format.</p> <pre class="prettyprint lang-config">CookieStyle Cookie2</pre> </div>  <div class="directive-section">
<h2 id="cookietracking">CookieTracking Directive</h2> <table class="directive"> <tr>
<th>Description:</th>
<td>Enables tracking cookie</td>
</tr> <tr>
<th>Syntax:</th>
<td><pre>CookieTracking on|off</pre></td>
</tr> <tr>
<th>Default:</th>
<td><pre>CookieTracking off</pre></td>
</tr> <tr>
<th>Context:</th>
<td>server config, virtual host, directory, .htaccess</td>
</tr> <tr>
<th>Override:</th>
<td>FileInfo</td>
</tr> <tr>
<th>Status:</th>
<td>Extension</td>
</tr> <tr>
<th>Module:</th>
<td>mod_usertrack</td>
</tr> </table> <p>When <code class="module"><a href="mod_usertrack.html">mod_usertrack</a></code> is loaded, and <code>CookieTracking on</code> is set, Apache will send a user-tracking cookie for all new requests. This directive can be used to turn this behavior on or off on a per-server or per-directory basis. By default, enabling <code class="module"><a href="mod_usertrack.html">mod_usertrack</a></code> will <strong>not</strong> activate cookies. </p> <pre class="prettyprint lang-config">CookieTracking on</pre> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2018 The Apache Software Foundation<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://httpd.apache.org/docs/2.4/en/mod/mod_usertrack.html" class="_attribution-link">https://httpd.apache.org/docs/2.4/en/mod/mod_usertrack.html</a>
  </p>
</div>
