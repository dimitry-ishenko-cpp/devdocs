<h1>Risky Tests</h1> <p>PHPUnit can help you identify risky tests, for instance lying tests that give you a false sense of security.</p> <p>Tests that are considered risky do not contribute to <a class="reference internal" href="code-coverage.html#code-coverage"><span class="std std-ref">code coverage</span></a>.</p> <section id="useless-tests"> <h2>Useless Tests<a class="headerlink" href="#useless-tests" title="Permalink to this heading"></a>
</h2> <p>By default, PHPUnit is strict about tests that do not test anything: tests that do not perform assertions and do not configure expectations on mock objects.</p> <p>This check can be disabled by using the <code class="docutils literal notranslate"><span class="pre">--dont-report-useless-tests</span></code> option on the <a class="reference internal" href="textui.html#textui-command-line-options"><span class="std std-ref">command-line</span></a> or by setting <code class="docutils literal notranslate"><span class="pre">beStrictAboutTestsThatDoNotTestAnything="false"</span></code> in PHPUnit’s <a class="reference internal" href="configuration.html#appendixes-configuration"><span class="std std-ref">XML configuration file</span></a>.</p> </section> <section id="unintentionally-covered-code"> <h2>Unintentionally Covered Code<a class="headerlink" href="#unintentionally-covered-code" title="Permalink to this heading"></a>
</h2> <p>PHPUnit can be strict about unintentionally covered code. This check can be enabled by using the <code class="docutils literal notranslate"><span class="pre">--strict-coverage</span></code> option on the <a class="reference internal" href="textui.html#textui-command-line-options"><span class="std std-ref">command-line</span></a> or by setting <code class="docutils literal notranslate"><span class="pre">beStrictAboutCoverageMetadata="true"</span></code> in PHPUnit’s <a class="reference internal" href="configuration.html#appendixes-configuration"><span class="std std-ref">XML configuration file</span></a>.</p> <p>A test that is attributed with <code class="docutils literal notranslate"><span class="pre">PHPUnit\Framework\Attributes\CoversClass</span></code> or <code class="docutils literal notranslate"><span class="pre">PHPUnit\Framework\Attributes\CoversFunction</span></code> and that executes code which is not specified using <code class="docutils literal notranslate"><span class="pre">PHPUnit\Framework\Attributes\CoversClass</span></code>, <code class="docutils literal notranslate"><span class="pre">PHPUnit\Framework\Attributes\CoversFunction</span></code>, <code class="docutils literal notranslate"><span class="pre">PHPUnit\Framework\Attributes\UsesClass</span></code>, or <code class="docutils literal notranslate"><span class="pre">PHPUnit\Framework\Attributes\UsesFunction</span></code> will be considered risky when this check is enabled and the size of the test is either small or unknown.</p> <p>Furthermore, by setting <code class="docutils literal notranslate"><span class="pre">requireCoverageMetadata="true"</span></code> in PHPUnit’s <a class="reference internal" href="configuration.html#appendixes-configuration"><span class="std std-ref">XML configuration file</span></a>, a test can be considered risky when it does not have code coverage metadata.</p> </section> <section id="output-during-test-execution"> <h2>Output During Test Execution<a class="headerlink" href="#output-during-test-execution" title="Permalink to this heading"></a>
</h2> <p>PHPUnit can be strict about output during tests. This check can be enabled by using the <code class="docutils literal notranslate"><span class="pre">--disallow-test-output</span></code> option on the <a class="reference internal" href="textui.html#textui-command-line-options"><span class="std std-ref">command-line</span></a> or by setting <code class="docutils literal notranslate"><span class="pre">beStrictAboutOutputDuringTests="true"</span></code> in PHPUnit’s <a class="reference internal" href="configuration.html#appendixes-configuration"><span class="std std-ref">XML configuration file</span></a>.</p> <p>A test that emits output, for instance by invoking <code class="docutils literal notranslate"><span class="pre">print</span></code> in either the test code or the tested code, will be considered risky when this check is enabled.</p> </section> <section id="test-execution-timeout"> <h2>Test Execution Timeout<a class="headerlink" href="#test-execution-timeout" title="Permalink to this heading"></a>
</h2> <p>PHPUnit can enforce a time limit for the execution of a test when the <code class="docutils literal notranslate"><span class="pre">pcntl</span></code> extension is available. The enforcing of this time limit can be enabled by using the <code class="docutils literal notranslate"><span class="pre">--enforce-time-limit</span></code> option on the <a class="reference internal" href="textui.html#textui-command-line-options"><span class="std std-ref">command-line</span></a> or by setting <code class="docutils literal notranslate"><span class="pre">enforceTimeLimit="true"</span></code> in PHPUnit’s <a class="reference internal" href="configuration.html#appendixes-configuration"><span class="std std-ref">XML configuration file</span></a>.</p> <p>A test that is attributed with <code class="docutils literal notranslate"><span class="pre">PHPUnit\Framework\Attributes\Large</span></code> (or annotated with <code class="docutils literal notranslate"><span class="pre">@large</span></code>) will be considered risky when it takes longer than 60 seconds to run. This timeout is configurable via the <code class="docutils literal notranslate"><span class="pre">timeoutForLargeTests</span></code> attribute in the <a class="reference internal" href="configuration.html#appendixes-configuration"><span class="std std-ref">XML configuration file</span></a>.</p> <p>A test that is attributed with <code class="docutils literal notranslate"><span class="pre">PHPUnit\Framework\Attributes\Medium</span></code> (or annotated with <code class="docutils literal notranslate"><span class="pre">@medium</span></code>) will be considered risky when it takes longer than 10 seconds to run. This timeout is configurable via the <code class="docutils literal notranslate"><span class="pre">timeoutForMediumTests</span></code> attribute in the <a class="reference internal" href="configuration.html#appendixes-configuration"><span class="std std-ref">XML configuration file</span></a>.</p> <p>A test that is attributed with <code class="docutils literal notranslate"><span class="pre">PHPUnit\Framework\Attributes\Small</span></code> (or annotated with <code class="docutils literal notranslate"><span class="pre">@small</span></code>) will be considered risky when it takes longer than 1 second to run. This timeout is configurable via the <code class="docutils literal notranslate"><span class="pre">timeoutForSmallTests</span></code> attribute in the <a class="reference internal" href="configuration.html#appendixes-configuration"><span class="std std-ref">XML configuration file</span></a>.</p> </section> <section id="global-state-manipulation"> <h2>Global State Manipulation<a class="headerlink" href="#global-state-manipulation" title="Permalink to this heading"></a>
</h2> <p>PHPUnit can be strict about tests that manipulate global state. This check can be enabled by using the <code class="docutils literal notranslate"><span class="pre">--strict-global-state</span></code> option on the <a class="reference internal" href="textui.html#textui-command-line-options"><span class="std std-ref">command-line</span></a> or by setting <code class="docutils literal notranslate"><span class="pre">beStrictAboutChangesToGlobalState="true"</span></code> in PHPUnit’s <a class="reference internal" href="configuration.html#appendixes-configuration"><span class="std std-ref">XML configuration file</span></a>.</p> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2025 Sebastian Bergmann<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>
    <a href="https://docs.phpunit.de/en/12.0/risky-tests.html" class="_attribution-link">https://docs.phpunit.de/en/12.0/risky-tests.html</a>
  </p>
</div>
