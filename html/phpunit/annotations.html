<h1>Annotations</h1> <p>An annotation is a special form of syntactic metadata that can be added to the source code of some programming languages. While PHP has no dedicated language feature for annotating source code, the usage of tags such as <code class="docutils literal"><span class="pre">@annotation</span> <span class="pre">arguments</span></code> in a documentation block has been established in the PHP community to annotate source code. In PHP documentation blocks are reflective: they can be accessed through the Reflection API’s <code class="docutils literal"><span class="pre">getDocComment()</span></code> method on the function, class, method, and attribute level. Applications such as PHPUnit use this information at runtime to configure their behaviour.</p> <div class="admonition-note admonition"> <p class="first admonition-title">Note</p> <p class="last">A doc comment in PHP must start with <code class="docutils literal"><span class="pre">/**</span></code> and end with <code class="docutils literal"><span class="pre">*/</span></code>. Annotations in any other style of comment will be ignored.</p> </div> <p>This appendix shows all the varieties of annotations supported by PHPUnit.</p> <div class="section" id="author"> <h2 id="@author">@author</h2> <p>The <code class="docutils literal"><span class="pre">@author</span></code> annotation is an alias for the <code class="docutils literal"><span class="pre">@group</span></code> annotation (see <a class="reference internal" href="#appendixes-annotations-group"><span class="std std-ref">@group</span></a>) and allows to filter tests based on their authors.</p> </div> <div class="section" id="after"> <h2 id="@after">@after</h2> <p>The <code class="docutils literal"><span class="pre">@after</span></code> annotation can be used to specify methods that should be called after each test method in a test case class.</p> <div class="highlight-php">
<div class="highlight"><pre class="highlight" data-language="php"><span class="o">&lt;?</span><span class="nx">php</span> <span class="k">declare</span><span class="p">(</span><span class="nx">strict_types</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>
<span class="k">use</span> <span class="nx">PHPUnit\Framework\TestCase</span><span class="p">;</span>

<span class="k">final</span> <span class="k">class</span> <span class="nc">MyTest</span> <span class="k">extends</span> <span class="nx">TestCase</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @after</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">tearDownSomeFixtures</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @after</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">tearDownSomeOtherFixtures</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div> </div> </div> <div class="section" id="afterclass"> <h2 id="@afterClass">@afterClass</h2> <p>The <code class="docutils literal"><span class="pre">@afterClass</span></code> annotation can be used to specify static methods that should be called after all test methods in a test class have been run to clean up shared fixtures.</p> <div class="highlight-php">
<div class="highlight"><pre class="highlight" data-language="php"><span class="o">&lt;?</span><span class="nx">php</span> <span class="k">declare</span><span class="p">(</span><span class="nx">strict_types</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>
<span class="k">use</span> <span class="nx">PHPUnit\Framework\TestCase</span><span class="p">;</span>

<span class="k">final</span> <span class="k">class</span> <span class="nc">MyTest</span> <span class="k">extends</span> <span class="nx">TestCase</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @afterClass</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">tearDownSomeSharedFixtures</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @afterClass</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">tearDownSomeOtherSharedFixtures</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div> </div> </div> <div class="section" id="backupglobals"> <h2 id="@backupGlobals">@backupGlobals</h2> <p>PHPUnit can optionally backup all global and super-global variables before each test and restore this backup after each test.</p> <p>The <code class="docutils literal"><span class="pre">@backupGlobals</span> <span class="pre">enabled</span></code> annotation can be used on the class level to enable this operation for all tests of a test case class:</p> <div class="highlight-php">
<div class="highlight"><pre class="highlight" data-language="php"><span class="o">&lt;?</span><span class="nx">php</span> <span class="k">declare</span><span class="p">(</span><span class="nx">strict_types</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>
<span class="k">use</span> <span class="nx">PHPUnit\Framework\TestCase</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * @backupGlobals enabled</span>
<span class="sd"> */</span>
<span class="k">final</span> <span class="k">class</span> <span class="nc">MyTest</span> <span class="k">extends</span> <span class="nx">TestCase</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div> </div> <p>The <code class="docutils literal"><span class="pre">@backupGlobals</span></code> annotation can also be used on the test method level. This allows for a fine-grained configuration of the backup and restore operations:</p> <div class="highlight-php">
<div class="highlight"><pre class="highlight" data-language="php"><span class="o">&lt;?</span><span class="nx">php</span> <span class="k">declare</span><span class="p">(</span><span class="nx">strict_types</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>
<span class="k">use</span> <span class="nx">PHPUnit\Framework\TestCase</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * @backupGlobals enabled</span>
<span class="sd"> */</span>
<span class="k">final</span> <span class="k">class</span> <span class="nc">MyTest</span> <span class="k">extends</span> <span class="nx">TestCase</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">testThatInteractsWithGlobalVariables</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @backupGlobals disabled</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">testThatDoesNotInteractWithGlobalVariables</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div> </div> </div> <div class="section" id="backupstaticattributes"> <h2 id="@backupStaticAttributes">@backupStaticAttributes</h2> <p>PHPUnit can optionally backup all static attributes in all declared classes before each test and restore this backup after each test.</p> <p>The <code class="docutils literal"><span class="pre">@backupStaticAttributes</span> <span class="pre">enabled</span></code> annotation can be used on the class level to enable this operation for all tests of a test case class:</p> <div class="highlight-php">
<div class="highlight"><pre class="highlight" data-language="php"><span class="o">&lt;?</span><span class="nx">php</span> <span class="k">declare</span><span class="p">(</span><span class="nx">strict_types</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>
<span class="k">use</span> <span class="nx">PHPUnit\Framework\TestCase</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * @backupStaticAttributes enabled</span>
<span class="sd"> */</span>
<span class="k">final</span> <span class="k">class</span> <span class="nc">MyTest</span> <span class="k">extends</span> <span class="nx">TestCase</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div> </div> <p>The <code class="docutils literal"><span class="pre">@backupStaticAttributes</span></code> annotation can also be used on the test method level. This allows for a fine-grained configuration of the backup and restore operations:</p> <div class="highlight-php">
<div class="highlight"><pre class="highlight" data-language="php"><span class="k">use</span> <span class="nx">PHPUnit\Framework\TestCase</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * @backupStaticAttributes enabled</span>
<span class="sd"> */</span>
<span class="k">class</span> <span class="nc">MyTest</span> <span class="k">extends</span> <span class="nx">TestCase</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">testThatInteractsWithStaticAttributes</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @backupStaticAttributes disabled</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">testThatDoesNotInteractWithStaticAttributes</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div> </div> <div class="admonition-note admonition"> <p class="first admonition-title">Note</p> <p><code class="docutils literal"><span class="pre">@backupStaticAttributes</span></code> is limited by PHP internals and may cause unintended static values to persist and leak into subsequent tests in some circumstances.</p> <p class="last">See <a class="reference internal" href="fixtures.html#fixtures-global-state"><span class="std std-ref">Global State</span></a> for details.</p> </div> </div> <div class="section" id="before"> <h2 id="@before">@before</h2> <p>The <code class="docutils literal"><span class="pre">@before</span></code> annotation can be used to specify methods that should be called before each test method in a test case class.</p> <div class="highlight-php">
<div class="highlight"><pre class="highlight" data-language="php"><span class="o">&lt;?</span><span class="nx">php</span> <span class="k">declare</span><span class="p">(</span><span class="nx">strict_types</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>
<span class="k">use</span> <span class="nx">PHPUnit\Framework\TestCase</span><span class="p">;</span>

<span class="k">final</span> <span class="k">class</span> <span class="nc">MyTest</span> <span class="k">extends</span> <span class="nx">TestCase</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @before</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">setupSomeFixtures</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @before</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">setupSomeOtherFixtures</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div> </div> </div> <div class="section" id="beforeclass"> <h2 id="@beforeClass">@beforeClass</h2> <p>The <code class="docutils literal"><span class="pre">@beforeClass</span></code> annotation can be used to specify static methods that should be called before any test methods in a test class are run to set up shared fixtures.</p> <div class="highlight-php">
<div class="highlight"><pre class="highlight" data-language="php"><span class="o">&lt;?</span><span class="nx">php</span> <span class="k">declare</span><span class="p">(</span><span class="nx">strict_types</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>
<span class="k">use</span> <span class="nx">PHPUnit\Framework\TestCase</span><span class="p">;</span>

<span class="k">final</span> <span class="k">class</span> <span class="nc">MyTest</span> <span class="k">extends</span> <span class="nx">TestCase</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @beforeClass</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">setUpSomeSharedFixtures</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @beforeClass</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">setUpSomeOtherSharedFixtures</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div> </div> </div> <div class="section" id="codecoverageignore"> <h2 id="@codeCoverageIgnore*">@codeCoverageIgnore*</h2> <p>The <code class="docutils literal"><span class="pre">@codeCoverageIgnore</span></code>, <code class="docutils literal"><span class="pre">@codeCoverageIgnoreStart</span></code> and <code class="docutils literal"><span class="pre">@codeCoverageIgnoreEnd</span></code> annotations can be used to exclude lines of code from the coverage analysis.</p> <p>For usage see <a class="reference internal" href="code-coverage-analysis.html#code-coverage-analysis-ignoring-code-blocks"><span class="std std-ref">Ignoring Code Blocks</span></a>.</p> </div> <div class="section" id="covers"> <h2 id="@covers">@covers</h2> <p>The <code class="docutils literal"><span class="pre">@covers</span></code> annotation can be used in the test code to specify which parts of the code it is supposed to test:</p> <div class="highlight-php">
<div class="highlight"><pre class="highlight" data-language="php"><span class="sd">/**</span>
<span class="sd"> * @covers \BankAccount</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">testBalanceIsInitiallyZero</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
<span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertSame</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">ba</span><span class="o">-&gt;</span><span class="na">getBalance</span><span class="p">());</span>
<span class="p">}</span>
</pre></div> </div> <p>If provided, this effectively filters the code coverage report to include executed code from the referenced code parts only. This will make sure that code is only marked as covered if there are dedicated tests for it, but not if it used indirectly by the tests for a different class, thus avoiding false positives for code coverage.</p> <p>This annotation can be added to the docblock of the test class or the individual test methods. The recommended way is to add the annotation to the docblock of the test class, not to the docblock of the test methods.</p> <p>When the <code class="docutils literal"><span class="pre">forceCoversAnnotation</span></code> configuration option in the <a class="reference internal" href="configuration.html#appendixes-configuration"><span class="std std-ref">configuration file</span></a> is set to <code class="docutils literal"><span class="pre">true</span></code>, every test method needs to have an associated <code class="docutils literal"><span class="pre">@covers</span></code> annotation (either on the test class or the individual test method).</p> <p><a class="reference internal" href="#appendixes-annotations-covers-tables-annotations"><span class="std std-numref">Table 2.2</span></a> shows the syntax of the <code class="docutils literal"><span class="pre">@covers</span></code> annotation. The section <a class="reference internal" href="code-coverage-analysis.html#code-coverage-analysis-specifying-covered-parts"><span class="std std-ref">Specifying Covered Code Parts</span></a> provides longer examples for using the annotation.</p> <p>Please note that this annotation requires a fully-qualified class name (FQCN). To make this more obvious to the reader, it is recommended to use a leading backslash (even if this not required for the annotation to work correctly).</p> <table border="1" class="table docutils" id="appendixes-annotations-covers-tables-annotations"> <caption>
<span class="caption-number">Table 2.2 </span><span class="caption-text">Annotations for specifying which methods are covered by a test</span>
</caption> <colgroup> <col width="50%"> <col width="50%"> </colgroup> <thead valign="bottom"> <tr class="row-odd">
<th class="head">Annotation</th> <th class="head">Description</th> </tr> </thead> <tbody valign="top"> <tr class="row-even">
<td>
<code class="docutils literal"><span class="pre">@covers</span> <span class="pre">ClassName::methodName</span></code> (not recommended)</td> <td>Specifies that the annotated test method covers the specified method.</td> </tr> <tr class="row-odd">
<td>
<code class="docutils literal"><span class="pre">@covers</span> <span class="pre">ClassName</span></code> (recommended)</td> <td>Specifies that the annotated test method covers all methods of a given class.</td> </tr> <tr class="row-even">
<td>
<code class="docutils literal"><span class="pre">@covers</span> <span class="pre">ClassName&lt;extended&gt;</span></code> (not recommended)</td> <td>Specifies that the annotated test method covers all methods of a given class and its parent class(es).</td> </tr> <tr class="row-odd">
<td>
<code class="docutils literal"><span class="pre">@covers</span> <span class="pre">ClassName::&lt;public&gt;</span></code> (not recommended)</td> <td>Specifies that the annotated test method covers all public methods of a given class.</td> </tr> <tr class="row-even">
<td>
<code class="docutils literal"><span class="pre">@covers</span> <span class="pre">ClassName::&lt;protected&gt;</span></code> (not recommended)</td> <td>Specifies that the annotated test method covers all protected methods of a given class.</td> </tr> <tr class="row-odd">
<td>
<code class="docutils literal"><span class="pre">@covers</span> <span class="pre">ClassName::&lt;private&gt;</span></code> (not recommended)</td> <td>Specifies that the annotated test method covers all private methods of a given class.</td> </tr> <tr class="row-even">
<td>
<code class="docutils literal"><span class="pre">@covers</span> <span class="pre">ClassName::&lt;!public&gt;</span></code> (not recommended)</td> <td>Specifies that the annotated test method covers all methods of a given class that are not public.</td> </tr> <tr class="row-odd">
<td>
<code class="docutils literal"><span class="pre">@covers</span> <span class="pre">ClassName::&lt;!protected&gt;</span></code> (not recommended)</td> <td>Specifies that the annotated test method covers all methods of a given class that are not protected.</td> </tr> <tr class="row-even">
<td>
<code class="docutils literal"><span class="pre">@covers</span> <span class="pre">ClassName::&lt;!private&gt;</span></code> (not recommended)</td> <td>Specifies that the annotated test method covers all methods of a given class that are not private.</td> </tr> <tr class="row-odd">
<td>
<code class="docutils literal"><span class="pre">@covers</span> <span class="pre">::functionName</span></code> (recommended)</td> <td>Specifies that the annotated test method covers the specified global function.</td> </tr> </tbody> </table> </div> <div class="section" id="coversdefaultclass"> <h2 id="@coversDefaultClass">@coversDefaultClass</h2> <p>The <code class="docutils literal"><span class="pre">@coversDefaultClass</span></code> annotation can be used to specify a default namespace or class name. That way long names don’t need to be repeated for every <code class="docutils literal"><span class="pre">@covers</span></code> annotation. See <a class="reference internal" href="#appendixes-annotations-examples-coversdefaultclasstest-php"><span class="std std-numref">Example 2.18</span></a>.</p> <p>Please note that this annotation requires a fully-qualified class name (FQCN). To make this more obvious to the reader, it is recommended to use a leading backslash (even if this not required for the annotation to work correctly).</p> <div class="literal-block-wrapper docutils container" id="appendixes-annotations-examples-coversdefaultclasstest-php"> <div class="code-block-caption">
<span class="caption-number">Example 2.18 </span><span class="caption-text">Using @coversDefaultClass to shorten annotations</span>
</div> <div class="highlight-php">
<div class="highlight"><pre class="highlight" data-language="php"><span class="o">&lt;?</span><span class="nx">php</span> <span class="k">declare</span><span class="p">(</span><span class="nx">strict_types</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>
<span class="k">use</span> <span class="nx">PHPUnit\Framework\TestCase</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * @coversDefaultClass \Foo\CoveredClass</span>
<span class="sd"> */</span>
<span class="k">final</span> <span class="k">class</span> <span class="nc">CoversDefaultClassTest</span> <span class="k">extends</span> <span class="nx">TestCase</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @covers ::publicMethod</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">testSomething</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nv">$o</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Foo\CoveredClass</span><span class="p">;</span>
        <span class="nv">$o</span><span class="o">-&gt;</span><span class="na">publicMethod</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div> </div> </div> </div> <div class="section" id="coversnothing"> <h2 id="@coversNothing">@coversNothing</h2> <p>The <code class="docutils literal"><span class="pre">@coversNothing</span></code> annotation can be used in the test code to specify that no code coverage information will be recorded for the annotated test case.</p> <p>This can be used for integration testing. See <a class="reference internal" href="code-coverage-analysis.html#code-coverage-analysis-specifying-covered-parts-examples-guestbookintegrationtest-php"><span class="std std-ref">A test that specifies that no method should be covered</span></a> for an example.</p> <p>The annotation can be used on the class and the method level and will override any <code class="docutils literal"><span class="pre">@covers</span></code> tags.</p> </div> <div class="section" id="dataprovider"> <h2 id="@dataProvider">@dataProvider</h2> <p>A test method can accept arbitrary arguments. These arguments are to be provided by one or more data provider methods (<code class="docutils literal"><span class="pre">provider()</span></code> in <a class="reference internal" href="writing-tests-for-phpunit.html#writing-tests-for-phpunit-data-providers-examples-datatest-php"><span class="std std-ref">Using a data provider that returns an array of arrays</span></a>). The data provider method to be used is specified using the <code class="docutils literal"><span class="pre">@dataProvider</span></code> annotation.</p> <p>See <a class="reference internal" href="writing-tests-for-phpunit.html#writing-tests-for-phpunit-data-providers"><span class="std std-ref">Data Providers</span></a> for more details.</p> </div> <div class="section" id="depends"> <h2 id="@depends">@depends</h2> <p>PHPUnit supports the declaration of explicit dependencies between test methods. Such dependencies do not define the order in which the test methods are to be executed but they allow the returning of an instance of the test fixture by a producer and passing it to the dependent consumers. <a class="reference internal" href="writing-tests-for-phpunit.html#writing-tests-for-phpunit-examples-stacktest2-php"><span class="std std-ref">Using the @depends annotation to express dependencies</span></a> shows how to use the <code class="docutils literal"><span class="pre">@depends</span></code> annotation to express dependencies between test methods.</p> <p>See <a class="reference internal" href="writing-tests-for-phpunit.html#writing-tests-for-phpunit-test-dependencies"><span class="std std-ref">Test Dependencies</span></a> for more details.</p> </div> <div class="section" id="doesnotperformassertions"> <h2 id="@doesNotPerformAssertions">@doesNotPerformAssertions</h2> <p>Prevents a test that performs no assertions from being considered risky.</p> </div> <div class="section" id="group"> <h2 id="@group">@group</h2> <p>A test can be tagged as belonging to one or more groups using the <code class="docutils literal"><span class="pre">@group</span></code> annotation like this</p> <div class="highlight-php">
<div class="highlight"><pre class="highlight" data-language="php"><span class="o">&lt;?</span><span class="nx">php</span> <span class="k">declare</span><span class="p">(</span><span class="nx">strict_types</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>
<span class="k">use</span> <span class="nx">PHPUnit\Framework\TestCase</span><span class="p">;</span>

<span class="k">final</span> <span class="k">class</span> <span class="nc">MyTest</span> <span class="k">extends</span> <span class="nx">TestCase</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @group specification</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">testSomething</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @group regression</span>
<span class="sd">     * @group bug2204</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">testSomethingElse</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div> </div> <p>The <code class="docutils literal"><span class="pre">@group</span></code> annotation can also be provided for the test class. It is then “inherited” to all test methods of that test class.</p> <p>Tests can be selected for execution based on groups using the <code class="docutils literal"><span class="pre">--group</span></code> and <code class="docutils literal"><span class="pre">--exclude-group</span></code> options of the command-line test runner or using the respective directives of the XML configuration file.</p> </div> <div class="section" id="large"> <h2 id="@large">@large</h2> <p>The <code class="docutils literal"><span class="pre">@large</span></code> annotation is an alias for <code class="docutils literal"><span class="pre">@group</span> <span class="pre">large</span></code>.</p> <p>If the <code class="docutils literal"><span class="pre">PHP_Invoker</span></code> package is installed and strict mode is enabled, a large test will fail if it takes longer than 60 seconds to execute. This timeout is configurable via the <code class="docutils literal"><span class="pre">timeoutForLargeTests</span></code> attribute in the XML configuration file.</p> </div> <div class="section" id="medium"> <h2 id="@medium">@medium</h2> <p>The <code class="docutils literal"><span class="pre">@medium</span></code> annotation is an alias for <code class="docutils literal"><span class="pre">@group</span> <span class="pre">medium</span></code>. A medium test must not depend on a test marked as <code class="docutils literal"><span class="pre">@large</span></code>.</p> <p>If the <code class="docutils literal"><span class="pre">PHP_Invoker</span></code> package is installed and strict mode is enabled, a medium test will fail if it takes longer than 10 seconds to execute. This timeout is configurable via the <code class="docutils literal"><span class="pre">timeoutForMediumTests</span></code> attribute in the XML configuration file.</p> </div> <div class="section" id="preserveglobalstate"> <h2 id="@preserveGlobalState">@preserveGlobalState</h2> <p>When a test is run in a separate process, PHPUnit will attempt to preserve the global state from the parent process by serializing all globals in the parent process and unserializing them in the child process. This can cause problems if the parent process contains globals that are not serializable. To fix this, you can prevent PHPUnit from preserving global state with the <code class="docutils literal"><span class="pre">@preserveGlobalState</span></code> annotation.</p> <div class="highlight-php">
<div class="highlight"><pre class="highlight" data-language="php"><span class="o">&lt;?</span><span class="nx">php</span> <span class="k">declare</span><span class="p">(</span><span class="nx">strict_types</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>
<span class="k">use</span> <span class="nx">PHPUnit\Framework\TestCase</span><span class="p">;</span>

<span class="k">final</span> <span class="k">class</span> <span class="nc">MyTest</span> <span class="k">extends</span> <span class="nx">TestCase</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @runInSeparateProcess</span>
<span class="sd">     * @preserveGlobalState disabled</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">testInSeparateProcess</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div> </div> </div> <div class="section" id="requires"> <h2 id="@requires">@requires</h2> <p>The <code class="docutils literal"><span class="pre">@requires</span></code> annotation can be used to skip tests when common preconditions, like the PHP Version or installed extensions, are not met.</p> <p>A complete list of possibilities and examples can be found at <a class="reference internal" href="incomplete-and-skipped-tests.html#incomplete-and-skipped-tests-requires-tables-api"><span class="std std-ref">Possible @requires usages</span></a></p> </div> <div class="section" id="runtestsinseparateprocesses"> <h2 id="@runTestsInSeparateProcesses">@runTestsInSeparateProcesses</h2> <p>Indicates that all tests in a test class should be run in a separate PHP process.</p> <div class="highlight-php">
<div class="highlight"><pre class="highlight" data-language="php"><span class="o">&lt;?</span><span class="nx">php</span> <span class="k">declare</span><span class="p">(</span><span class="nx">strict_types</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>
<span class="k">use</span> <span class="nx">PHPUnit\Framework\TestCase</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * @runTestsInSeparateProcesses</span>
<span class="sd"> */</span>
<span class="k">final</span> <span class="k">class</span> <span class="nc">MyTest</span> <span class="k">extends</span> <span class="nx">TestCase</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div> </div> <p><em>Note:</em> By default, PHPUnit will attempt to preserve the global state from the parent process by serializing all globals in the parent process and unserializing them in the child process. This can cause problems if the parent process contains globals that are not serializable. See <a class="reference internal" href="#appendixes-annotations-preserveglobalstate"><span class="std std-ref">@preserveGlobalState</span></a> for information on how to fix this.</p> </div> <div class="section" id="runinseparateprocess"> <h2 id="@runInSeparateProcess">@runInSeparateProcess</h2> <p>Indicates that a test should be run in a separate PHP process.</p> <div class="highlight-php">
<div class="highlight"><pre class="highlight" data-language="php"><span class="o">&lt;?</span><span class="nx">php</span> <span class="k">declare</span><span class="p">(</span><span class="nx">strict_types</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>
<span class="k">use</span> <span class="nx">PHPUnit\Framework\TestCase</span><span class="p">;</span>

<span class="k">final</span> <span class="k">class</span> <span class="nc">MyTest</span> <span class="k">extends</span> <span class="nx">TestCase</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @runInSeparateProcess</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">testInSeparateProcess</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div> </div> <p><em>Note:</em> By default, PHPUnit will attempt to preserve the global state from the parent process by serializing all globals in the parent process and unserializing them in the child process. This can cause problems if the parent process contains globals that are not serializable. See <a class="reference internal" href="#appendixes-annotations-preserveglobalstate"><span class="std std-ref">@preserveGlobalState</span></a> for information on how to fix this.</p> </div> <div class="section" id="small"> <h2 id="@small">@small</h2> <p>The <code class="docutils literal"><span class="pre">@small</span></code> annotation is an alias for <code class="docutils literal"><span class="pre">@group</span> <span class="pre">small</span></code>. A small test must not depend on a test marked as <code class="docutils literal"><span class="pre">@medium</span></code> or <code class="docutils literal"><span class="pre">@large</span></code>.</p> <p>If the <code class="docutils literal"><span class="pre">PHP_Invoker</span></code> package is installed and strict mode is enabled, a small test will fail if it takes longer than 1 second to execute. This timeout is configurable via the <code class="docutils literal"><span class="pre">timeoutForSmallTests</span></code> attribute in the XML configuration file.</p> <div class="admonition-note admonition"> <p class="first admonition-title">Note</p> <p class="last">Tests need to be explicitly annotated by either <code class="docutils literal"><span class="pre">@small</span></code>, <code class="docutils literal"><span class="pre">@medium</span></code>, or <code class="docutils literal"><span class="pre">@large</span></code> to enable run time limits.</p> </div> </div> <div class="section" id="test"> <h2 id="@test">@test</h2> <p>As an alternative to prefixing your test method names with <code class="docutils literal"><span class="pre">test</span></code>, you can use the <code class="docutils literal"><span class="pre">@test</span></code> annotation in a method’s DocBlock to mark it as a test method.</p> <div class="highlight-php">
<div class="highlight"><pre class="highlight" data-language="php"><span class="sd">/**</span>
<span class="sd"> * @test</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">initialBalanceShouldBe0</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
<span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertSame</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">ba</span><span class="o">-&gt;</span><span class="na">getBalance</span><span class="p">());</span>
<span class="p">}</span>
</pre></div> </div> </div> <div class="section" id="testdox"> <h2 id="@testdox">@testdox</h2> <p>Specifies an alternative description used when generating the agile documentation sentences.</p> <p>The <code class="docutils literal"><span class="pre">@testdox</span></code> annotation can be applied to both test classes and test methods.</p> <div class="highlight-php">
<div class="highlight"><pre class="highlight" data-language="php"><span class="o">&lt;?</span><span class="nx">php</span> <span class="k">declare</span><span class="p">(</span><span class="nx">strict_types</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>
<span class="k">use</span> <span class="nx">PHPUnit\Framework\TestCase</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * @testdox A bank account</span>
<span class="sd"> */</span>
<span class="k">final</span> <span class="k">class</span> <span class="nc">BankAccountTest</span> <span class="k">extends</span> <span class="nx">TestCase</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @testdox has an initial balance of zero</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">balanceIsInitiallyZero</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertSame</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">ba</span><span class="o">-&gt;</span><span class="na">getBalance</span><span class="p">());</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div> </div> <div class="admonition-note admonition"> <p class="first admonition-title">Note</p> <p class="last">Prior to PHPUnit 7.0 (due to a bug in the annotation parsing), using the <code class="docutils literal"><span class="pre">@testdox</span></code> annotation also activated the behaviour of the <code class="docutils literal"><span class="pre">@test</span></code> annotation.</p> </div> <p>When using the <code class="docutils literal"><span class="pre">@testdox</span></code> annotation at method level with a <code class="docutils literal"><span class="pre">@dataProvider</span></code> you may use the method parameters as placeholders in your alternative description.</p> <div class="highlight-php">
<div class="highlight"><pre class="highlight" data-language="php"><span class="sd">/**</span>
<span class="sd"> * @dataProvider additionProvider</span>
<span class="sd"> * @testdox Adding $a to $b results in $expected</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">testAdd</span><span class="p">(</span><span class="nv">$a</span><span class="p">,</span> <span class="nv">$b</span><span class="p">,</span> <span class="nv">$expected</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertSame</span><span class="p">(</span><span class="nv">$expected</span><span class="p">,</span> <span class="nv">$a</span> <span class="o">+</span> <span class="nv">$b</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">function</span> <span class="nf">additionProvider</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span>
        <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
        <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
        <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
        <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
    <span class="p">];</span>
<span class="p">}</span>
</pre></div> </div> </div> <div class="section" id="testwith"> <h2 id="@testWith">@testWith</h2> <p>Instead of implementing a method for use with <code class="docutils literal"><span class="pre">@dataProvider</span></code>, you can define a data set using the <code class="docutils literal"><span class="pre">@testWith</span></code> annotation.</p> <p>A data set consists of one or many elements. To define a data set with multiple elements, define each element in a separate line. Each element of the data set must be an array defined in JSON.</p> <p>See <a class="reference internal" href="writing-tests-for-phpunit.html#writing-tests-for-phpunit-data-providers"><span class="std std-ref">Data Providers</span></a> to learn more about passing a set of data to a test.</p> <div class="highlight-php">
<div class="highlight"><pre class="highlight" data-language="php"><span class="sd">/**</span>
<span class="sd"> * @testWith ["test", 4]</span>
<span class="sd"> *           ["longer-string", 13]</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">testStringLength</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$input</span><span class="p">,</span> <span class="nx">int</span> <span class="nv">$expectedLength</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span>
<span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertSame</span><span class="p">(</span><span class="nv">$expectedLength</span><span class="p">,</span> <span class="nb">strlen</span><span class="p">(</span><span class="nv">$input</span><span class="p">));</span>
<span class="p">}</span>
</pre></div> </div> <p>An object representation in JSON will be converted into an associative array.</p> <div class="highlight-php">
<div class="highlight"><pre class="highlight" data-language="php"><span class="sd">/**</span>
<span class="sd"> * @testWith [{"day": "monday", "conditions": "sunny"}, ["day", "conditions"]]</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">testArrayKeys</span><span class="p">(</span><span class="k">array</span> <span class="nv">$array</span><span class="p">,</span> <span class="k">array</span> <span class="nv">$keys</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span>
<span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertSame</span><span class="p">(</span><span class="nv">$keys</span><span class="p">,</span> <span class="nb">array_keys</span><span class="p">(</span><span class="nv">$array</span><span class="p">));</span>
<span class="p">}</span>
</pre></div> </div> </div> <div class="section" id="ticket"> <h2 id="@ticket">@ticket</h2> <p>The <code class="docutils literal"><span class="pre">@ticket</span></code> annotation is an alias for the <code class="docutils literal"><span class="pre">@group</span></code> annotation (see <a class="reference internal" href="#appendixes-annotations-group"><span class="std std-ref">@group</span></a>) and allows to filter tests based on their ticket ID.</p> </div> <div class="section" id="uses"> <h2 id="@uses">@uses</h2> <p>The <code class="docutils literal"><span class="pre">@uses</span></code> annotation specifies code which will be executed by a test, but is not intended to be covered by the test. A good example is a value object which is necessary for testing a unit of code.</p> <div class="highlight-php">
<div class="highlight"><pre class="highlight" data-language="php"><span class="sd">/**</span>
<span class="sd"> * @covers \BankAccount</span>
<span class="sd"> * @uses   \Money</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">testMoneyCanBeDepositedInAccount</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div> </div> <p><a class="reference internal" href="code-coverage-analysis.html#code-coverage-analysis-specifying-covered-parts-examples-invoicetest-php"><span class="std std-numref">Example 9.2</span></a> shows another example.</p> <p>In addition to being helpful for persons reading the code, this annotation is useful in strict coverage mode where unintentionally covered code will cause a test to fail. See <a class="reference internal" href="risky-tests.html#risky-tests-unintentionally-covered-code"><span class="std std-ref">Unintentionally Covered Code</span></a> for more information regarding strict coverage mode.</p> <p>Please note that this annotation requires a fully-qualified class name (FQCN). To make this more obvious to the reader, it is recommended to use a leading backslash (even if this is not required for the annotation to work correctly).</p> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2020 Sebastian Bergmann<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>
    <a href="https://phpunit.readthedocs.io/en/9.5/annotations.html" class="_attribution-link">https://phpunit.readthedocs.io/en/9.5/annotations.html</a>
  </p>
</div>
