<h1 class="title">Interfaces between C++ and QML Code in Qt Positioning</h1>   <h2 id="overview">Overview
</h2> <p>Qt Positioning utilizes two methods to simplify exchange of position data between C++ and QML code.</p> <h2 id="direct-c-value-integration-in-qtpositioning">Direct C++ Value Integration in QtPositioning
</h2> <p>Starting with Qt 5.5, it has become much easier to integrate non-<a href="qobject.html">QObject</a> based data types into QML. This is achieved by adding <a href="qobject.html#Q_GADGET">Q_GADGET</a> support to <a href="https://doc.qt.io/qt-6.2/qtqml-module.html">QtQml</a>. The macro converts classes into a light-weight version of a <a href="qobject.html">QObject</a> without the required <a href="qobject.html">QObject</a> inheritance. At the same time, it retains the reflection capabilities of <a href="qmetaobject.html">QMetaObject</a>. As a result, they can be directly exposed to QML.</p> <p>A significant number of Position related data types were converted to <a href="qobject.html#Q_GADGET">Q_GADGET</a>s. They retain their API and value type character but have become introspectable via <a href="qmetaobject.html">QMetaObject</a>.</p> <p>The <a href="qqmlengine.html#QML_ANONYMOUS">QML_ANONYMOUS</a> macro is used to expose these types to the QML environment. See the <a href="qqmlengine.html">QQmlEngine</a> documentation for more details and the full list of available macros.</p> <p>The classes, however, are not directly extended with this macro, because we do not want Qt Positioning to depend on <a href="https://doc.qt.io/qt-6.2/qtqml-module.html">QtQml</a>. So a helper class is created for each of them, and the <a href="qqmlengine.html#QML_FOREIGN">QML_FOREIGN</a> macro is used:</p> <pre data-language="cpp">struct QGeoCoordinateForeign
{
    Q_GADGET
    QML_FOREIGN(QGeoCoordinate)
    QML_ANONYMOUS
    QML_ADDED_IN_VERSION(5, 0)
};</pre> <p>The above registration of Positioning types is automatically done once by the <a href="qml-qtpositioning-qtpositioning.html">QtPositioning</a> QML plugin.</p> <h2 id="qvariant-based-integration">QVariant Based integration
</h2> <p>This section provides information on how to integrate <a href="qgeoaddress.html">QGeoAddress</a> and <a href="qgeolocation.html">QGeoLocation</a>.</p> <h3 id="address-qgeoaddress">Address - QGeoAddress
</h3> <p>The <a href="qml-qtpositioning-address.html#address-prop">Address.address</a> property is used to provide an interface between C++ and QML code. First a pointer to an <a href="qml-qtpositioning-address.html">Address</a> object must be obtained from C++, then the <a href="qobject.html#property">property</a>() and <a href="qobject.html#setProperty">setProperty</a>() functions must be used to get and set the <code>address</code> property.</p> <p>The following piece of code gets the <a href="qgeoaddress.html">QGeoAddress</a> object from C++:</p> <pre data-language="cpp"> QGeoAddress geoAddress = qmlObject-&gt;property("address").value&lt;QGeoAddress&gt;();</pre> <p>The following piece of code sets the address property of the QML object based on a <a href="qgeoaddress.html">QGeoAddress</a> object from C++:</p> <pre data-language="cpp">qmlObject-&gt;setProperty("address", QVariant::fromValue(geoAddress));</pre> <h3 id="location-qgeolocation">Location - QGeoLocation
</h3> <p>The <a href="qml-qtpositioning-location.html#location-prop">Location.location</a> property is used to provide an interface between C++ and QML code. First a pointer to a <a href="qml-qtpositioning-location.html">Location</a> object must be obtained from C++, then the <a href="qobject.html#property">property</a>() and <a href="qobject.html#setProperty">setProperty</a>() functions must be used to get and set the <code>location</code> property.</p> <p>The following piece of code gets the <a href="qgeolocation.html">QGeoLocation</a> object from C++:</p> <pre data-language="cpp">QGeoLocation geoLocation = qmlObject-&gt;property("location").value&lt;QGeoLocation&gt;();</pre> <p>The following piece of code sets the location property of the QML object based on a <a href="qgeolocation.html">QGeoLocation</a> object from C++:</p> <pre data-language="cpp">qmlObject-&gt;setProperty("location", QVariant::fromValue(geoLocation));</pre><div class="_attribution">
  <p class="_attribution-p">
    &copy; The Qt Company Ltd<br>Licensed under the GNU Free Documentation License, Version 1.3.<br>
    <a href="https://doc.qt.io/qt-6.2/positioning-cpp-qml.html" class="_attribution-link">https://doc.qt.io/qt-6.2/positioning-cpp-qml.html</a>
  </p>
</div>
