<h1 class="title">Changes to Qt Bluetooth</h1>   <p>Qt 6 is a result of the conscious effort to make the framework more efficient and easy to use.</p> <p>We try to maintain binary and source compatibility for all the public APIs in each release. But some changes were inevitable in an effort to make Qt a better framework.</p> <p>In this topic we summarize those changes in <a href="https://doc.qt.io/qt-6.2/qtbluetooth-module.html">QtBluetooth</a>, and provide guidance to handle them.</p> <h2 id="general">General
</h2> <ul> <li>qbluetoothglobal.h was removed. qtbluetoothglobal.h is the official header with the same purpose.</li> <li>Every usage of <a href="qvector.html">QVector</a> has been replaced by <a href="qlist.html">QList</a>.</li> <li>Win32 backend has been removed. There will not be a working Bluetooth backend when Qt is built with mingw.</li> <li>Since there is now only one Windows backend, the logging category qt.bluetooth.winrt was removed. The corresponding log messages are now in qt.bluetooth.windows.</li> </ul> <h2 id="qbluetooth-namespace">QBluetooth namespace
</h2> <p>The enums <a href="qbluetooth.html#Security-enum">QBluetooth::Security</a> and <a href="qbluetooth.html#AttAccessConstraint-enum">QBluetooth::AttAccessConstraint</a> have been changed to a scoped enums for improved type safety.</p> <h2 id="qbluetoothdevicediscoveryagent">QBluetoothDeviceDiscoveryAgent
</h2> <p>QBluetoothDeviceDiscoveryAgent::inquiryType property and related setter/getter &amp; enum were removed. The API element was never implemented and/or supported.</p> <h2 id="qbluetoothdeviceinfo">QBluetoothDeviceInfo
</h2> <ul> <li>manufacturerData() returns a <a href="qmultihash.html">QMultiHash</a> rather than <a href="qhash.html#qhash">QHash</a>. Since Qt 6 <a href="qmultihash.html">QMultiHash</a> is no longer derived from <a href="qhash.html#qhash">QHash</a>.</li> <li>DataCompleteness was removed without replacement as the related API elements no longer served a purpose</li> <li>setServiceUuids(const <a href="qlist.html">QList</a>&lt;<a href="qbluetoothuuid.html">QBluetoothUuid</a>&gt;, DataCompleteness) was replaced by setServiceUuids(const <a href="qlist.html">QList</a>&lt;<a href="qbluetoothuuid.html">QBluetoothUuid</a>&gt; &amp;uuids)</li> <li>DataCompleteness serviceUuidsCompleteness() const was removed without replacement.</li> <li>
<a href="qlist.html">QList</a>&lt;<a href="qbluetoothuuid.html">QBluetoothUuid</a>&gt; serviceUuids(DataCompleteness *completeness = nullptr) const was replaced by <a href="qlist.html">QList</a>&lt;<a href="qbluetoothuuid.html">QBluetoothUuid</a>&gt; serviceUuids() const.</li> </ul> <h2 id="qbluetoothlocaldevice">QBluetoothLocalDevice
</h2> <p>The pairing agent related API was removed without replacement. This includes pairingConfirmation(bool), pairingDisplayPinCode(..) &amp; pairingDisplayConfirmation(..). Except for Android and BlueZ 4 there was never an implementation for it. Bluez 4 support was removed in Qt 6 and Android's implementation required unobtainable BLUETOOTH_PRIVILEGED for at least parts of the code.</p> <h2 id="qlowenergyservice">QLowEnergyService
</h2> <p>Renamed ServiceState enum values:</p> <ul> <li>
<a href="qlowenergyservice.html#ServiceState-enum">DiscoveryRequired</a> becomes <a href="qlowenergyservice.html#ServiceState-enum">RemoteService</a>
</li> <li>
<a href="qlowenergyservice.html#ServiceState-enum">DiscoveringService</a> becomes <a href="qlowenergyservice.html#ServiceState-enum">RemoteServiceDiscovering</a>
</li> <li>
<a href="qlowenergyservice.html#ServiceState-enum">ServiceDiscovered</a> becomes <a href="qlowenergyservice.html#ServiceState-enum">RemoteServiceDiscovered</a>
</li> </ul> <p>This change happens in anticipation that service discovery might become an optional step in the future.</p> <h2 id="qbluetoothuuid">QBluetoothUuid
</h2> <p>enums <a href="qbluetoothuuid.html#ProtocolUuid-enum">ProtocolUuid</a>, <a href="qbluetoothuuid.html#ServiceClassUuid-enum">ServiceClassUuid</a>, <a href="qbluetoothuuid.html#CharacteristicType-enum">CharacteristicType</a>, and <a href="qbluetoothuuid.html#DescriptorType-enum">DescriptorType</a> are now scoped enums. The usage of enum items has to be adapted in user code.</p> <h2 id="qlowenergycontroller">QLowEnergyController
</h2> <ul> <li>Existing ctors and create*() functions with remote <a href="qbluetoothaddress.html">QBluetoothAddress</a> parameters have been removed. <a href="qbluetoothaddress.html">QBluetoothAddress</a> is not sufficient to indicate remote devices on Apple systems. It requires UUIDs to "name" devices. This can only be satisfied by <a href="qbluetoothdeviceinfo.html">QBluetoothDeviceInfo</a>.</li> <li>Remaining <a href="qlowenergycontroller.html">QLowEnergyController</a> ctors have been made private. The createPeripheral() and createCentral() functions should be used to obtain <a href="qlowenergycontroller.html">QLowEnergyController</a> instances.</li> </ul> <h2 id="qlowenergycharacteristic">QLowEnergyCharacteristic
</h2> <ul> <li>The new method clientCharacteristicConfiguration() has been introduced to conveniently obtain the Client Characteristic Configuration Descriptor.</li> <li>The constants <a href="qlowenergycharacteristic.html#CCCDDisable-var">CCCDDisable</a>, <a href="qlowenergycharacteristic.html#CCCDEnableNotification-var">CCCDEnableNotification</a>, and <a href="qlowenergycharacteristic.html#CCCDEnableIndication-var">CCCDEnableIndication</a> have been introduced which hold the possible values for the Client Characteristic Configuration Descriptor.</li> <li>The handle() method is no longer part of the public Bluetooth LE interfaces. It's purpose as identifier for characteristics was replaced. The <a href="qlowenergycharacteristic.html">QLowEnergyCharacteristic</a> instances itself serve as identifier.</li> </ul> <h2 id="qlowenergydescriptor">QLowEnergyDescriptor
</h2> <p>The handle() method is no longer part of the public Bluetooth LE interfaces. It's purpose as identifier for descriptors was replaced. The <a href="qlowenergydescriptor.html">QLowEnergyDescriptor</a> instances itself serve as identifier.</p> <h2 id="qbluetoothtransfermanager">QBluetoothTransferManager
</h2> <p>QBluetoothTransferManager, QBluetoothTransferRequest, and QBluetoothTransferReply have been removed without replacement.</p> <h2 id="qbluetoothsocket">QBluetoothSocket
</h2> <p><a href="qbluetoothsocket.html#SocketState-enum">QBluetoothSocket::SocketState</a> and <a href="qbluetoothsocket.html#SocketError-enum">QBluetoothSocket::SocketError</a> are now scoped enums. The usage of enum items has to be adapted in user code.</p> <h2 id="qml-interface">QML Interface
</h2> <p>The QML interface has been removed because socket programming via QML is not advisable. QDeclarativeBluetoothService, QDeclarativeBluetoothSocket, and QDeclarativeBluetoothDiscoveryModel (in QML: BluetoothService, BluetoothSocket, and BluetoothDiscoveryModel) have been removed without replacement.</p> <h2 id="error-signals">"error" signals
</h2> <p>The "error" signals in <a href="qbluetoothdevicediscoveryagent.html">QBluetoothDeviceDiscoveryAgent</a>, <a href="qbluetoothlocaldevice.html">QBluetoothLocalDevice</a>, <a href="qbluetoothserver.html">QBluetoothServer</a>, <a href="qbluetoothservicediscoveryagent.html">QBluetoothServiceDiscoveryAgent</a>, <a href="qbluetoothsocket.html">QBluetoothSocket</a>, <a href="qlowenergycontroller.html">QLowEnergyController</a>, and <a href="qlowenergyservice.html">QLowEnergyService</a> have been renamed to "errorOccurred" to remove ambiguities between the "error" signal and the "error" getter.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; The Qt Company Ltd<br>Licensed under the GNU Free Documentation License, Version 1.3.<br>
    <a href="https://doc.qt.io/qt-6.2/qtbluetooth-changes-qt6.html" class="_attribution-link">https://doc.qt.io/qt-6.2/qtbluetooth-changes-qt6.html</a>
  </p>
</div>
