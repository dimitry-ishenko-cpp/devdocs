<h1 class="title">Debugging QML Applications</h1>   <p>When you develop an application with QML, there are many ways to debug possible issues that you may face. The sections below describe the debugging tools available and how to use them.</p> <h2 id="console-api">Console API
</h2> <table class="generic"> <thead><tr class="qt-style">
<th>Feature</th>
<th>Description</th>
</tr></thead> <tr class="odd" valign="top">
<td>Log</td>
<td>Use <code>console.log</code>, <code>console.debug</code>, <code>console.info</code>, <code>console.warn</code>, or <code>console.error</code> to print debugging information to the console.<p>For example:</p> <pre data-language="cpp">function f(a, b) {
  console.log("a is ", a, "b is ", b);
}</pre> <p>The output is generated using the <a href="qloggingcategory.html#qCDebug-1">qCDebug</a>, <a href="qloggingcategory.html#qCWarning-1">qCWarning</a>, or <a href="qloggingcategory.html#qCCritical-1">qCCritical</a> methods in C++, with a category of <code>qml</code> or <code>js</code>, depending on the type of file doing the logging. See also <a href="debug.html">Debugging Techniques</a>.</p> </td>
</tr> <tr class="even" valign="top">
<td>Assert</td>
<td>
<code>console.assert</code> tests that an expression is true. If not, it writes an optional message to the console and prints the stack trace.<p>For example:</p> <pre data-language="cpp">function f() {
  var x = 12
  console.assert(x == 12, "This will pass");
  console.assert(x &gt; 12, "This will fail");
}</pre> </td>
</tr> <tr class="odd" valign="top">
<td>Timer</td>
<td>
<code>console.time</code> and <code>console.timeEnd</code> log the time (in milliseconds) that was spent between the calls. Both take a string argument that identifies the measurement.<p>For example:</p> <pre data-language="cpp">function f() {
    console.time("wholeFunction");
    console.time("firstPart");
    // first part
    console.timeEnd("firstPart");
    // second part
    console.timeEnd("wholeFunction");
}</pre> </td>
</tr> <tr class="even" valign="top">
<td>Trace</td>
<td>
<code>console.trace</code> prints the stack trace of the JavaScript execution at the point where it was called. This stack trace information contains the function name, file name, line number, and column number. The stack trace is limited to last 10 stack frames.</td>
</tr> <tr class="odd" valign="top">
<td>Count</td>
<td>
<code>console.count</code> prints the current number of times a particular piece of code has run, along with a message.<p>For example:</p> <pre data-language="cpp">function f() {
  console.count("f called");
}</pre> <p>The code sample above prints <code>f called: 1</code>, <code>f called: 2</code> ... whenever <code>f()</code> is run.</p> </td>
</tr> <tr class="even" valign="top">
<td>Profile</td>
<td>
<code>console.profile</code> turns on the QML and JavaScript profilers. Nested calls are not supported and prints a warning to the console.</td>
</tr> <tr class="odd" valign="top">
<td>ProfileEnd</td>
<td>
<code>console.profileEnd</code> turns off the QML and JavaScript profilers. Calling this function without a previous call to <code>console.profile</code> prints a warning to the console. A profiling client needs to be attached before this call to receive and store the profiling data.<p>For example:</p> <pre data-language="cpp">function f() {
    console.profile();
    //Call some function that needs to be profiled.
    //Ensure that a client is attached before ending
    //the profiling session.
    console.profileEnd();
}</pre> </td>
</tr> <tr class="even" valign="top">
<td>Exception</td>
<td>
<code>console.exception</code> prints an error message together with the stack trace of JavaScript execution at the point where it is called.</td>
</tr> </table> <h2 id="debugging-module-imports">Debugging Module Imports
</h2> <p>Set the <code>QML_IMPORT_TRACE</code> environment variable to enable debug output from QML's import loading mechanisms.</p> <p>For example, for a simple QML file like this:</p> <pre data-language="qml">import QtQuick

Rectangle { width: 100; height: 100 }</pre> <p>If you set <code>QML_IMPORT_TRACE=1</code> before running the <a href="qtquick-qml-runtime.html">QML Runtime</a> or your QML C++ application, you will see output similar to:</p> <pre data-language="cpp">QQmlImportDatabase::addImportPath "/qt-sdk/imports"
QQmlImportDatabase::addImportPath "/qt-sdk/bin/QMLViewer.app/Contents/MacOS"
QQmlImportDatabase::addToImport 0x106237370 "." -1.-1 File as ""
QQmlImportDatabase::addToImport 0x106237370 "Qt" 4.7 Library as ""
QQmlImportDatabase::resolveType "Rectangle" = "QDeclarativeRectangle"</pre> <h2 id="qml-debugging-infrastructure">QML Debugging Infrastructure
</h2> <p>The <a href="qtqml-index.html">Qt QML</a> module provides services for debugging, inspecting, and profiling applications via a TCP port or a local socket.</p> <div class="admonition note"> <p><b>Note: </b>The <code>qmltooling</code> plugins that are required for debugging and profiling QML applications on devices are automatically installed during Qt installation. They must be deployed to the devices for debugging and profiling to work.</p> </div> <h3 id="enabling-the-infrastructure">Enabling the Infrastructure
</h3> <p>When you compile your application, you must explicitly enable the debugging infrastructure. If you use qmake, you can add the configuration parameters to the project <code>.pro</code> file:</p> <ul> <li>Qt Quick 1: <code>CONFIG+=declarative_debug</code>
</li> <li>Qt Quick 2: <code>CONFIG+=qml_debug</code>
</li> </ul> <p>If you use another build system, you can pass the following defines to the compiler:</p> <ul> <li>Qt Quick 1: <code>QT_DECLARATIVE_DEBUG</code>
</li> <li>Qt Quick 2: <code>QT_QML_DEBUG</code>
</li> </ul> <div class="admonition note"> <p><b>Note: </b>Enabling the debugging infrastructure may compromise the integrity of your application and system, and therefore, you should only enable it in a controlled environment. When the infrastructure is enabled, the application displays the following warning:</p> </div> <p><code>QML debugging is enabled. Only use this in a safe environment.</code></p> <h3 id="starting-applications">Starting Applications
</h3> <p>To enable debugging -- from the start or to attach a debugger later on -- start the application with the following arguments:</p> <p><code>-qmljsdebugger=port:&lt;port_from&gt;[,port_to][,host:&lt;ip address&gt;][,block][,file:&lt;local socket&gt;][,services:&lt;comma-separated list of services to enable&gt;]</code></p> <p>Where:</p> <ul> <li>the mandatory <code>port_from</code> specifies either the debugging port or the start port of a range of ports when <code>port_to</code> is specified</li> <li>the optional <code>ip address</code> specifies the IP address of the host where the application is running</li> <li>the optional <code>block</code> prevents the application from running until the debug client connects to the server</li> <li>the optional <code>file</code> specifies the local socket.</li> <li>the optional <code>services</code> specifies the services to enable; the default is all that are found. Note that the <code>v4 debug</code> service disables the JIT.</li> </ul> <p>After the application has successfully started, it displays the following message:</p> <p><code>QML Debugger: Waiting for connection on port &lt;port_number&gt;</code> or <code>QML Debugger: Connecting to socket at &lt;file&gt;"</code></p> <h3 id="connecting-to-applications">Connecting to Applications
</h3> <p>When the application is running, an IDE or a tool that implements the binary protocol can connect to the open port.</p> <p>Qt provides a <code>qmlprofiler</code> command line tool to capture profiling data in a file. To run this tool, enter the following command:</p> <p><code>qmlprofiler -p &lt;port&gt; -attach &lt;ip address&gt;</code></p> <h2 id="debugging-with-qt-creator">Debugging with Qt Creator
</h2> <p>Qt Creator uses the debugging infrastructure to debug, inspect, and profile Qt Quick applications on the desktop as well as on remote devices. Qt Creator provides integrated clients for debugging JavaScript, inspecting the object tree, and profiling the activities of a QML engine. For more information, see <a href="https://doc.qt.io/qtcreator/creator-debugging-qml.html">Qt Creator: Debugging Qt Quick Projects</a>.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; The Qt Company Ltd<br>Licensed under the GNU Free Documentation License, Version 1.3.<br>
    <a href="https://doc.qt.io/qt-6.2/qtquick-debugging.html" class="_attribution-link">https://doc.qt.io/qt-6.2/qtquick-debugging.html</a>
  </p>
</div>
