<h1 class="title">QModbusClient Class</h1>  <p>The QModbusClient class is the interface to send Modbus requests. <a href="#details">More...</a></p>  <table class="alignedsummary"> <tr>
<td class="memItemLeft rightAlign topAlign"> Header:</td>
<td class="memItemRight bottomAlign"> <span class="preprocessor">#include &lt;QModbusClient&gt;</span> </td>
</tr>
<tr>
<td class="memItemLeft rightAlign topAlign"> qmake:</td>
<td class="memItemRight bottomAlign"> QT += serialbus</td>
</tr>
<tr>
<td class="memItemLeft rightAlign topAlign"> Since:</td>
<td class="memItemRight bottomAlign"> Qt 5.8</td>
</tr>
<tr>
<td class="memItemLeft rightAlign topAlign"> Inherits:</td>
<td class="memItemRight bottomAlign"> <a href="qmodbusdevice.html">QModbusDevice</a>
</td>
</tr>
<tr>
<td class="memItemLeft rightAlign topAlign"> Inherited By:</td>
<td class="memItemRight bottomAlign"> <p><a href="qmodbusrtuserialclient.html">QModbusRtuSerialClient</a> and <a href="qmodbustcpclient.html">QModbusTcpClient</a></p> </td>
</tr>
</table> <ul> <li><a href="https://doc.qt.io/qt-6.2/qmodbusclient-members.html">List of all members, including inherited members</a></li> </ul> <h2 id="public-functions">Public Functions
</h2> <table class="alignedsummary"> <tr>
<td class="memItemLeft rightAlign topAlign"> </td>
<td class="memItemRight bottomAlign">
<b><a href="qmodbusclient.html#QModbusClient">QModbusClient</a></b>(QObject *<i>parent</i> = nullptr)</td>
</tr> <tr>
<td class="memItemLeft rightAlign topAlign"> int </td>
<td class="memItemRight bottomAlign">
<b><a href="qmodbusclient.html#numberOfRetries">numberOfRetries</a></b>() const</td>
</tr> <tr>
<td class="memItemLeft rightAlign topAlign"> QModbusReply *</td>
<td class="memItemRight bottomAlign">
<b><a href="qmodbusclient.html#sendRawRequest">sendRawRequest</a></b>(const QModbusRequest &amp;<i>request</i>, int <i>serverAddress</i>)</td>
</tr> <tr>
<td class="memItemLeft rightAlign topAlign"> QModbusReply *</td>
<td class="memItemRight bottomAlign">
<b><a href="qmodbusclient.html#sendReadRequest">sendReadRequest</a></b>(const QModbusDataUnit &amp;<i>read</i>, int <i>serverAddress</i>)</td>
</tr> <tr>
<td class="memItemLeft rightAlign topAlign"> QModbusReply *</td>
<td class="memItemRight bottomAlign">
<b><a href="qmodbusclient.html#sendReadWriteRequest">sendReadWriteRequest</a></b>(const QModbusDataUnit &amp;<i>read</i>, const QModbusDataUnit &amp;<i>write</i>, int <i>serverAddress</i>)</td>
</tr> <tr>
<td class="memItemLeft rightAlign topAlign"> QModbusReply *</td>
<td class="memItemRight bottomAlign">
<b><a href="qmodbusclient.html#sendWriteRequest">sendWriteRequest</a></b>(const QModbusDataUnit &amp;<i>write</i>, int <i>serverAddress</i>)</td>
</tr> <tr>
<td class="memItemLeft rightAlign topAlign"> void </td>
<td class="memItemRight bottomAlign">
<b><a href="qmodbusclient.html#setNumberOfRetries">setNumberOfRetries</a></b>(int <i>number</i>)</td>
</tr> <tr>
<td class="memItemLeft rightAlign topAlign"> void </td>
<td class="memItemRight bottomAlign">
<b><a href="qmodbusclient.html#setTimeout">setTimeout</a></b>(int <i>newTimeout</i>)</td>
</tr> <tr>
<td class="memItemLeft rightAlign topAlign"> int </td>
<td class="memItemRight bottomAlign">
<b><a href="qmodbusclient.html#timeout">timeout</a></b>() const</td>
</tr> </table> <h2 id="signals">Signals
</h2> <table class="alignedsummary"> <tr>
<td class="memItemLeft rightAlign topAlign"> void </td>
<td class="memItemRight bottomAlign">
<b><a href="qmodbusclient.html#timeoutChanged">timeoutChanged</a></b>(int <i>newTimeout</i>)</td>
</tr> </table> <h2 id="protected-functions">Protected Functions
</h2> <table class="alignedsummary"> <tr>
<td class="memItemLeft rightAlign topAlign"> virtual bool </td>
<td class="memItemRight bottomAlign">
<b><a href="qmodbusclient.html#processPrivateResponse">processPrivateResponse</a></b>(const QModbusResponse &amp;<i>response</i>, QModbusDataUnit *<i>data</i>)</td>
</tr> <tr>
<td class="memItemLeft rightAlign topAlign"> virtual bool </td>
<td class="memItemRight bottomAlign">
<b><a href="qmodbusclient.html#processResponse">processResponse</a></b>(const QModbusResponse &amp;<i>response</i>, QModbusDataUnit *<i>data</i>)</td>
</tr> </table>   <h2 id="details">Detailed Description
</h2> <p>The QModbusClient API is constructed around one QModbusClient object, which holds the common configuration and settings for the requests it sends. One QModbusClient should be enough for the whole Qt application.</p> <p>Once a QModbusClient object has been created, the application can use it to send requests. The returned object is used to obtain any data returned in response to the corresponding request.</p> <p>QModbusClient has an asynchronous API. When the finished slot is called, the parameter it takes is the <a href="qmodbusreply.html">QModbusReply</a> object containing the PDU as well as meta-data (Addressing, etc.).</p> <p>Note: QModbusClient queues the requests it receives. The number of requests executed in parallel is dependent on the protocol. For example, the HTTP protocol on desktop platforms issues 6 requests in parallel for one host/port combination.</p>    <h2>Member Function Documentation</h2>  <h3 class="fn" id="QModbusClient">QModbusClient::<span class="name">QModbusClient</span>(<span class="type"><a href="qobject.html#QObject">QObject</a></span> *<i>parent</i> = nullptr)
</h3> <p>Constructs a Modbus client device with the specified <i>parent</i>.</p>   <h3 class="fn" id="timeoutChanged">
<code>[signal] </code><span class="type">void</span> QModbusClient::<span class="name">timeoutChanged</span>(<span class="type">int</span> <i>newTimeout</i>)
</h3> <p>This signal is emitted when the timeout used by this <a href="qmodbusclient.html">QModbusClient</a> instance is changed. The new response timeout for the device is passed as <i>newTimeout</i>.</p> <p><b>See also </b><a href="qmodbusclient.html#setTimeout">setTimeout</a>().</p>   <h3 class="fn" id="numberOfRetries">
<span class="type">int</span> QModbusClient::<span class="name">numberOfRetries</span>() const
</h3> <p>Returns the number of retries a client will perform before a request fails. The default value is set to <code>3</code>.</p> <p><b>See also </b><a href="qmodbusclient.html#setNumberOfRetries">setNumberOfRetries</a>().</p>   <h3 class="fn" id="processPrivateResponse">
<code>[virtual protected] </code><span class="type">bool</span> QModbusClient::<span class="name">processPrivateResponse</span>(const <span class="type"><a href="qmodbusresponse.html">QModbusResponse</a></span> &amp;<i>response</i>, <span class="type"><a href="qmodbusdataunit.html">QModbusDataUnit</a></span> *<i>data</i>)
</h3> <p>To be implemented by custom Modbus client implementation. The default implementation ignores <i>response</i> and <i>data</i>. It always returns false to indicate error.</p>   <h3 class="fn" id="processResponse">
<code>[virtual protected] </code><span class="type">bool</span> QModbusClient::<span class="name">processResponse</span>(const <span class="type"><a href="qmodbusresponse.html">QModbusResponse</a></span> &amp;<i>response</i>, <span class="type"><a href="qmodbusdataunit.html">QModbusDataUnit</a></span> *<i>data</i>)
</h3> <p>Processes a Modbus server <i>response</i> and stores the decoded information in <i>data</i>. Returns true on success; otherwise false.</p>   <h3 class="fn" id="sendRawRequest">
<span class="type"><a href="qmodbusreply.html">QModbusReply</a></span> *QModbusClient::<span class="name">sendRawRequest</span>(const <span class="type"><a href="qmodbusrequest.html">QModbusRequest</a></span> &amp;<i>request</i>, <span class="type">int</span> <i>serverAddress</i>)
</h3> <p>Sends a raw Modbus <i>request</i>. A raw request can contain anything that fits inside the Modbus PDU data section and has a valid function code. The only check performed before sending is therefore the validity check, see <a href="qmodbuspdu.html#isValid">QModbusPdu::isValid</a>. If no error occurred the function returns a a new valid <a href="qmodbusreply.html">QModbusReply</a>; nullptr otherwise. Modbus networks may have multiple servers, each server has a unique <i>serverAddress</i>.</p> <p><b>See also </b><a href="qmodbusreply.html#rawResult">QModbusReply::rawResult</a>().</p>   <h3 class="fn" id="sendReadRequest">
<span class="type"><a href="qmodbusreply.html">QModbusReply</a></span> *QModbusClient::<span class="name">sendReadRequest</span>(const <span class="type"><a href="qmodbusdataunit.html">QModbusDataUnit</a></span> &amp;<i>read</i>, <span class="type">int</span> <i>serverAddress</i>)
</h3> <p>Sends a request to read the contents of the data pointed by <i>read</i>. Returns a new valid <a href="qmodbusreply.html">QModbusReply</a> object if no error occurred, otherwise nullptr. Modbus network may have multiple servers, each server has unique <i>serverAddress</i>.</p>   <h3 class="fn" id="sendReadWriteRequest">
<span class="type"><a href="qmodbusreply.html">QModbusReply</a></span> *QModbusClient::<span class="name">sendReadWriteRequest</span>(const <span class="type"><a href="qmodbusdataunit.html">QModbusDataUnit</a></span> &amp;<i>read</i>, const <span class="type"><a href="qmodbusdataunit.html">QModbusDataUnit</a></span> &amp;<i>write</i>, <span class="type">int</span> <i>serverAddress</i>)
</h3> <p>Sends a request to read the contents of the data pointed by <i>read</i> and to modify the contents of the data pointed by <i>write</i> using Modbus function code <a href="qmodbuspdu.html#FunctionCode-enum">QModbusPdu::ReadWriteMultipleRegisters</a>. Returns a new valid <a href="qmodbusreply.html">QModbusReply</a> object if no error occurred, otherwise nullptr. Modbus network may have multiple servers, each server has unique <i>serverAddress</i>.</p> <div class="admonition note"> <p><b>Note: </b>: Sending this kind of request is only valid of both <i>read</i> and <i>write</i> are of type <a href="qmodbusdataunit.html#RegisterType-enum">QModbusDataUnit::HoldingRegisters</a>.</p> </div>   <h3 class="fn" id="sendWriteRequest">
<span class="type"><a href="qmodbusreply.html">QModbusReply</a></span> *QModbusClient::<span class="name">sendWriteRequest</span>(const <span class="type"><a href="qmodbusdataunit.html">QModbusDataUnit</a></span> &amp;<i>write</i>, <span class="type">int</span> <i>serverAddress</i>)
</h3> <p>Sends a request to modify the contents of the data pointed by <i>write</i>. Returns a new valid <a href="qmodbusreply.html">QModbusReply</a> object if no error occurred, otherwise nullptr. Modbus network may have multiple servers, each server has unique <i>serverAddress</i>.</p>   <h3 class="fn" id="setNumberOfRetries">
<span class="type">void</span> QModbusClient::<span class="name">setNumberOfRetries</span>(<span class="type">int</span> <i>number</i>)
</h3> <p>Sets the <i>number</i> of retries a client will perform before a request fails. The default value is set to <code>3</code>.</p> <div class="admonition note"> <p><b>Note: </b>The new value must be greater than or equal to <code>0</code>. Changing this property will only effect new requests, not already scheduled ones.</p> </div> <p><b>See also </b><a href="qmodbusclient.html#numberOfRetries">numberOfRetries</a>().</p>   <h3 class="fn" id="setTimeout">
<span class="type">void</span> QModbusClient::<span class="name">setTimeout</span>(<span class="type">int</span> <i>newTimeout</i>)
</h3> <p>Sets the <i>newTimeout</i> for this <a href="qmodbusclient.html">QModbusClient</a> instance. The minimum timeout is 10 ms.</p> <p>The timeout is used by the client to determine how long it waits for a response from the server. If the response is not received within the required timeout, the <a href="qmodbusdevice.html#Error-enum">TimeoutError</a> is set.</p> <p>Already active/running timeouts are not affected by such timeout duration changes.</p> <p><b>See also </b><a href="qmodbusclient.html#timeout">timeout</a> and <a href="qmodbusclient.html#timeoutChanged">timeoutChanged</a>().</p>   <h3 class="fn" id="timeout">
<span class="type">int</span> QModbusClient::<span class="name">timeout</span>() const
</h3> <p>Returns the timeout value used by this <a href="qmodbusclient.html">QModbusClient</a> instance in ms. A timeout is indicated by a <a href="qmodbusdevice.html#Error-enum">TimeoutError</a>. The default value is 1000 ms.</p> <p><b>See also </b><a href="qmodbusclient.html#setTimeout">setTimeout</a> and <a href="qmodbusclient.html#timeoutChanged">timeoutChanged</a>().</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; The Qt Company Ltd<br>Licensed under the GNU Free Documentation License, Version 1.3.<br>
    <a href="https://doc.qt.io/qt-6.2/qmodbusclient.html" class="_attribution-link">https://doc.qt.io/qt-6.2/qmodbusclient.html</a>
  </p>
</div>
