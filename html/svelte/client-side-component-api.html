<h1>Client-side component API</h1> <div class="text" id="docs-content">  <h2 id="creating-a-component">Creating a component</h2>
<pre class="copy-code-block shiki twoslash lsp" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)" data-language="javascript">const component = new Component(options);</pre>
<p>A client-side component — that is, a component compiled with <code>generate: 'dom'</code> (or the <code>generate</code> option left unspecified) is a JavaScript class.</p> <pre class="copy-code-block shiki twoslash lsp" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)" data-language="javascript">import App from './App.svelte';


const app = new App({
	target: document.body,
	props: {
		// assuming App.svelte contains something like
		// `export let answer`:
		answer: 42
	}
});</pre>
<p>The following initialisation options can be provided:</p> <table> <thead> <tr> <th>option</th> <th>default</th> <th>description</th> </tr> </thead> <tbody>
<tr> <td><code>target</code></td> <td><strong>none</strong></td> <td>An <code>HTMLElement</code> or <code>ShadowRoot</code> to render to. This option is required</td> </tr> <tr> <td><code>anchor</code></td> <td><code>null</code></td> <td>A child of <code>target</code> to render the component immediately before</td> </tr> <tr> <td><code>props</code></td> <td><code>{}</code></td> <td>An object of properties to supply to the component</td> </tr> <tr> <td><code>context</code></td> <td><code>new Map()</code></td> <td>A <code>Map</code> of root-level context key-value pairs to supply to the component</td> </tr> <tr> <td><code>hydrate</code></td> <td><code>false</code></td> <td>See below</td> </tr> <tr> <td><code>intro</code></td> <td><code>false</code></td> <td>If <code>true</code>, will play transitions on initial render, rather than waiting for subsequent state changes</td> </tr> </tbody>
</table> <p>Existing children of <code>target</code> are left where they are.</p> <p>The <code>hydrate</code> option instructs Svelte to upgrade existing DOM (usually from server-side rendering) rather than creating new elements. It will only work if the component was compiled with the <a href="svelte-compiler.html#compile"><code>hydratable: true</code> option</a>. Hydration of <code>&lt;head&gt;</code> elements only works properly if the server-side rendering code was also compiled with <code>hydratable: true</code>, which adds a marker to each element in the <code>&lt;head&gt;</code> so that the component knows which elements it's responsible for removing during hydration.</p> <p>Whereas children of <code>target</code> are normally left alone, <code>hydrate: true</code> will cause any children to be removed. For that reason, the <code>anchor</code> option cannot be used alongside <code>hydrate: true</code>.</p> <p>The existing DOM doesn't need to match the component — Svelte will 'repair' the DOM as it goes.</p> <div class="copy-code-block code-block">
<span class="filename">index.js</span><pre class="shiki twoslash lsp" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)" data-language="javascript">import App from './App.svelte';


const app = new App({
	target: document.querySelector('#server-rendered-html'),
	hydrate: true
});</pre>
</div>
<h2 id="$set">$set</h2>
<pre class="copy-code-block shiki twoslash lsp" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)" data-language="javascript">component.$set(props);</pre>
<p>Programmatically sets props on an instance. <code>component.$set({ x: 1 })</code> is equivalent to <code>x = 1</code> inside the component's <code>&lt;script&gt;</code> block.</p> <p>Calling this method schedules an update for the next microtask — the DOM is <em>not</em> updated synchronously.</p> <pre class="copy-code-block shiki twoslash lsp" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)" data-language="javascript">component.$set({ answer: 42 });</pre>
<h2 id="$on">$on</h2>
<pre class="copy-code-block shiki twoslash lsp" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)" data-language="javascript">component.$on(ev, callback);</pre>
<p>Causes the <code>callback</code> function to be called whenever the component dispatches an <code>event</code>.</p> <p>A function is returned that will remove the event listener when called.</p> <div class="copy-code-block code-block">
<span class="filename">index.js</span><pre class="shiki twoslash lsp" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)" data-language="javascript">const off = component.$on('selected', (event) =&gt; {
	console.log(event.detail.selection);
});


off();</pre>
</div>
<h2 id="$destroy">$destroy</h2>
<pre class="copy-code-block shiki twoslash lsp" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)" data-language="javascript">component.$destroy();</pre>
<p>Removes a component from the DOM and triggers any <code>onDestroy</code> handlers.</p> <h2 id="component-props">Component props</h2>
<pre class="copy-code-block shiki twoslash lsp" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)" data-language="javascript">component.prop;</pre>
<pre class="copy-code-block shiki twoslash lsp" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)" data-language="javascript">component.prop = value;</pre>
<p>If a component is compiled with <code>accessors: true</code>, each instance will have getters and setters corresponding to each of the component's props. Setting a value will cause a <em>synchronous</em> update, rather than the default async update caused by <code>component.$set(...)</code>.</p> <p>By default, <code>accessors</code> is <code>false</code>, unless you're compiling as a custom element.</p> <div class="js-version copy-code-block code-block">
<span class="filename">index.js</span><pre class="shiki twoslash lsp" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)" data-language="javascript">console.log(component.count);
component.count += 1;</pre>
</div>
<div class="ts-version copy-code-block code-block">
<span class="filename">index.ts</span><pre class="shiki twoslash lsp" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)" data-language="javascript">console.log(component.count);
component.count += 1;</pre>
</div>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2016–2023 Rich Harris and contributors<br>Licensed under the MIT License.<br>
    <a href="https://svelte.dev/docs/client-side-component-api" class="_attribution-link">https://svelte.dev/docs/client-side-component-api</a>
  </p>
</div>
