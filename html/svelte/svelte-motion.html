<h1>svelte/motion</h1> <div class="text" id="docs-content">  <p>The <code>svelte/motion</code> module exports two functions, <code>tweened</code> and <code>spring</code>, for creating writable stores whose values change over time after <code>set</code> and <code>update</code>, rather than immediately.</p> <h2 id="tweened">tweened</h2>
<div class="ts-block"> <pre class="copy-code-block shiki css-variables" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)" data-language="javascript">function tweened&lt;T&gt;(
	value?: T | undefined,
	defaults?: TweenedOptions&lt;T&gt; | undefined
): Tweened&lt;T&gt;;</pre>
</div> <p>Tweened stores update their values over a fixed duration. The following options are available:</p> <ul> <li>
<code>delay</code> (<code>number</code>, default 0) — milliseconds before starting</li> <li>
<code>duration</code> (<code>number</code> | <code>function</code>, default 400) — milliseconds the tween lasts</li> <li>
<code>easing</code> (<code>function</code>, default <code>t =&gt; t</code>) — an <a href="svelte-easing.html">easing function</a>
</li> <li>
<code>interpolate</code> (<code>function</code>) — see below</li> </ul> <p><code>store.set</code> and <code>store.update</code> can accept a second <code>options</code> argument that will override the options passed in upon instantiation.</p> <p>Both functions return a Promise that resolves when the tween completes. If the tween is interrupted, the promise will never resolve.</p> <p>Out of the box, Svelte will interpolate between two numbers, two arrays or two objects (as long as the arrays and objects are the same 'shape', and their 'leaf' properties are also numbers).</p> <pre class="copy-code-block shiki" style="background-color: var(--shiki-color-background)" data-language="javascript">&lt;script&gt;
	import { tweened } from 'svelte/motion';
	import { cubicOut } from 'svelte/easing';

	const size = tweened(1, {
		duration: 300,
		easing: cubicOut
	});

	function handleClick() {
		// this is equivalent to size.update(n =&gt; n + 1)
		$size += 1;
	}
&lt;/script&gt;

&lt;button on:click={handleClick} style="transform: scale({$size}); transform-origin: 0 0"&gt;
	embiggen
&lt;/button&gt;</pre>
<p>If the initial value is <code>undefined</code> or <code>null</code>, the first value change will take effect immediately. This is useful when you have tweened values that are based on props, and don't want any motion when the component first renders.</p> <pre class="copy-code-block shiki twoslash lsp" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)" data-language="javascript">import { tweened } from 'svelte/motion';
import { cubicOut } from 'svelte/easing';


const size = tweened(undefined, {
	duration: 300,
	easing: cubicOut
});


$: $size = big ? 100 : 10;</pre>
<p>The <code>interpolate</code> option allows you to tween between <em>any</em> arbitrary values. It must be an <code>(a, b) =&gt; t =&gt; value</code> function, where <code>a</code> is the starting value, <code>b</code> is the target value, <code>t</code> is a number between 0 and 1, and <code>value</code> is the result. For example, we can use the <a href="https://github.com/d3/d3-interpolate">d3-interpolate</a> package to smoothly interpolate between two colours.</p> <pre class="copy-code-block shiki" style="background-color: var(--shiki-color-background)" data-language="javascript">&lt;script&gt;
	import { interpolateLab } from 'd3-interpolate';
	import { tweened } from 'svelte/motion';

	const colors = ['rgb(255, 62, 0)', 'rgb(64, 179, 255)', 'rgb(103, 103, 120)'];

	const color = tweened(colors[0], {
		duration: 800,
		interpolate: interpolateLab
	});
&lt;/script&gt;

{#each colors as c}
	&lt;button style="background-color: {c}; color: white; border: none;" on:click={(e) =&gt; color.set(c)}&gt;
		{c}
	&lt;/button&gt;
{/each}

&lt;h1 style="color: {$color}"&gt;{$color}&lt;/h1&gt;</pre>
<h2 id="spring">spring</h2>
<div class="ts-block"> <pre class="copy-code-block shiki css-variables" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)" data-language="javascript">function spring&lt;T = any&gt;(
	value?: T | undefined,
	opts?: SpringOpts | undefined
): Spring&lt;T&gt;;</pre>
</div> <p>A <code>spring</code> store gradually changes to its target value based on its <code>stiffness</code> and <code>damping</code> parameters. Whereas <code>tweened</code> stores change their values over a fixed duration, <code>spring</code> stores change over a duration that is determined by their existing velocity, allowing for more natural-seeming motion in many situations. The following options are available:</p> <ul> <li>
<code>stiffness</code> (<code>number</code>, default <code>0.15</code>) — a value between 0 and 1 where higher means a 'tighter' spring</li> <li>
<code>damping</code> (<code>number</code>, default <code>0.8</code>) — a value between 0 and 1 where lower means a 'springier' spring</li> <li>
<code>precision</code> (<code>number</code>, default <code>0.01</code>) — determines the threshold at which the spring is considered to have 'settled', where lower means more precise</li> </ul> <p>All of the options above can be changed while the spring is in motion, and will take immediate effect.</p> <pre class="copy-code-block shiki twoslash lsp" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)" data-language="javascript">import { spring } from 'svelte/motion';


const size = spring(100);
size.stiffness = 0.3;
size.damping = 0.4;
size.precision = 0.005;</pre>
<p>As with <a href="svelte-motion.html#tweened"><code>tweened</code></a> stores, <code>set</code> and <code>update</code> return a Promise that resolves if the spring settles.</p> <p>Both <code>set</code> and <code>update</code> can take a second argument — an object with <code>hard</code> or <code>soft</code> properties. <code>{ hard: true }</code> sets the target value immediately; <code>{ soft: n }</code> preserves existing momentum for <code>n</code> seconds before settling. <code>{ soft: true }</code> is equivalent to <code>{ soft: 0.5 }</code>.</p> <pre class="copy-code-block shiki twoslash lsp" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)" data-language="javascript">import { spring } from 'svelte/motion';


const coords = spring({ x: 50, y: 50 });
// updates the value immediately
coords.set({ x: 100, y: 200 }, { hard: true });
// preserves existing momentum for 1s
coords.update(
	(target_coords, coords) =&gt; {
		return { x: target_coords.x, y: coords.y };
	},
	{ soft: 1 }
);</pre>
<p><a href="https://learn.svelte.dev/tutorial/springs">See a full example on the spring tutorial.</a></p> <pre class="copy-code-block shiki" style="background-color: var(--shiki-color-background)" data-language="javascript">&lt;script&gt;
	import { spring } from 'svelte/motion';

	const coords = spring(
		{ x: 50, y: 50 },
		{
			stiffness: 0.1,
			damping: 0.25
		}
	);
&lt;/script&gt;</pre>
<p>If the initial value is <code>undefined</code> or <code>null</code>, the first value change will take effect immediately, just as with <code>tweened</code> values (see above).</p> <pre class="copy-code-block shiki twoslash lsp" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)" data-language="javascript">import { spring } from 'svelte/motion';


const size = spring();
$: $size = big ? 100 : 10;</pre>
<h2 id="types">Types</h2>
<h3 id="types-spring">Spring</h3>
<div class="ts-block"> <pre class="copy-code-block shiki css-variables" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)" data-language="javascript">interface Spring&lt;T&gt; extends Readable&lt;T&gt; {…}</pre>
<div class="ts-block-property"> <pre class="copy-code-block shiki css-variables" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)" data-language="javascript">set: (new_value: T, opts?: SpringUpdateOpts) =&gt; Promise&lt;void&gt;;</pre>

</div> <div class="ts-block-property"> <pre class="copy-code-block shiki css-variables" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)" data-language="javascript">update: (fn: Updater&lt;T&gt;, opts?: SpringUpdateOpts) =&gt; Promise&lt;void&gt;;</pre>

</div> <div class="ts-block-property"> <pre class="copy-code-block shiki css-variables" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)" data-language="javascript">precision: number;</pre>

</div> <div class="ts-block-property"> <pre class="copy-code-block shiki css-variables" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)" data-language="javascript">damping: number;</pre>

</div> <div class="ts-block-property"> <pre class="copy-code-block shiki css-variables" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)" data-language="javascript">stiffness: number;</pre>

</div>
</div> <h3 id="types-tweened">Tweened</h3>
<div class="ts-block"> <pre class="copy-code-block shiki css-variables" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)" data-language="javascript">interface Tweened&lt;T&gt; extends Readable&lt;T&gt; {…}</pre>
<div class="ts-block-property"> <pre class="copy-code-block shiki css-variables" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)" data-language="javascript">set(value: T, opts?: TweenedOptions&lt;T&gt;): Promise&lt;void&gt;;</pre>

</div> <div class="ts-block-property"> <pre class="copy-code-block shiki css-variables" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)" data-language="javascript">update(updater: Updater&lt;T&gt;, opts?: TweenedOptions&lt;T&gt;): Promise&lt;void&gt;;</pre>

</div>
</div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2016–2023 Rich Harris and contributors<br>Licensed under the MIT License.<br>
    <a href="https://svelte.dev/docs/svelte-motion" class="_attribution-link">https://svelte.dev/docs/svelte-motion</a>
  </p>
</div>
