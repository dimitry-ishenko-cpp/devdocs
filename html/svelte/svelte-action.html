<h1>svelte/action</h1> <div class="text" id="docs-content">  <p>Actions are functions that are called when an element is created. They can return an object with a <code>destroy</code> method that is called after the element is unmounted:</p> <pre class="copy-code-block shiki" style="background-color: var(--shiki-color-background)" data-language="javascript">&lt;script&gt;
	/** @type {import('svelte/action').Action}  */
	function foo(node) {
		// the node has been mounted in the DOM

		return {
			destroy() {
				// the node has been removed from the DOM
			}
		};
	}
&lt;/script&gt;

&lt;div use:foo /&gt;</pre>
<p>An action can have a parameter. If the returned value has an <code>update</code> method, it will be called immediately after Svelte has applied updates to the markup whenever that parameter changes.</p> <blockquote> <p>Don't worry that we're redeclaring the <code>foo</code> function for every component instance — Svelte will hoist any functions that don't depend on local state out of the component definition.</p> </blockquote> <pre class="copy-code-block shiki" style="background-color: var(--shiki-color-background)" data-language="javascript">&lt;script&gt;
	/** @type {string} */
	export let bar;

	/** @type {import('svelte/action').Action&lt;HTMLElement, string&gt;}  */
	function foo(node, bar) {
		// the node has been mounted in the DOM

		return {
			update(bar) {
				// the value of `bar` has changed
			},

			destroy() {
				// the node has been removed from the DOM
			}
		};
	}
&lt;/script&gt;

&lt;div use:foo={bar} /&gt;</pre>
<h2 id="attributes">Attributes</h2>
<p>Sometimes actions emit custom events and apply custom attributes to the element they are applied to. To support this, actions typed with <code><a href="svelte-action.html#types-action">Action</a></code> or <code><a href="svelte-action.html#types-actionreturn">ActionReturn</a></code> type can have a last parameter, <code>Attributes</code>:</p> <pre class="copy-code-block shiki" style="background-color: var(--shiki-color-background)" data-language="javascript">&lt;script&gt;
	/**
	 * @type {import('svelte/action').Action&lt;HTMLDivElement, { prop: any }, { 'on:emit': (e: CustomEvent&lt;string&gt;) =&gt; void }&gt;}
	 */
	function foo(node, { prop }) {
		// the node has been mounted in the DOM

		//...LOGIC
		node.dispatchEvent(new CustomEvent('emit', { detail: 'hello' }));

		return {
			destroy() {
				// the node has been removed from the DOM
			}
		};
	}
&lt;/script&gt;

&lt;div use:foo={{ prop: 'someValue' }} on:emit={handleEmit} /&gt;</pre>
<h2 id="types">Types</h2>
<h3 id="types-action">Action</h3>
<p>Actions are functions that are called when an element is created. You can use this interface to type such actions. The following example defines an action that only works on <code>&lt;div&gt;</code> elements and optionally accepts a parameter which it has a default value for:</p> <pre class="copy-code-block shiki twoslash lsp" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)" data-language="javascript">export const myAction: Action&lt;HTMLDivElement, { someProperty: boolean } | undefined&gt; = (node, param = { someProperty: true }) =&gt; {
  // ...
}</pre>
<p><code><a href="svelte-action.html#types-action">Action</a>&lt;HTMLDivElement&gt;</code> and <code><a href="svelte-action.html#types-action">Action</a>&lt;HTMLDivElement, undefined&gt;</code> both signal that the action accepts no parameters.</p> <p>You can return an object with methods <code>update</code> and <code>destroy</code> from the function and type which additional attributes and events it has. See interface <code><a href="svelte-action.html#types-actionreturn">ActionReturn</a></code> for more details.</p> <p>Docs: <a href="svelte-action.html">https://svelte.dev/docs/svelte-action</a></p> <div class="ts-block"> <pre class="copy-code-block shiki css-variables" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)" data-language="javascript">interface Action&lt;
	Element = HTMLElement,
	Parameter = undefined,
	Attributes extends Record&lt;string, any&gt; = Record&lt;
		never,
		any
	&gt;
&gt; {…}</pre>
<div class="ts-block-property"> <pre class="copy-code-block shiki css-variables" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)" data-language="javascript">&lt;Node extends Element&gt;(
	...args: undefined extends Parameter
		? [node: Node, parameter?: Parameter]
		: [node: Node, parameter: Parameter]
): void | ActionReturn&lt;Parameter, Attributes&gt;;</pre>

</div>
</div> <h3 id="types-actionreturn">ActionReturn</h3>
<p>Actions can return an object containing the two properties defined in this interface. Both are optional.</p> <ul> <li>update: An action can have a parameter. This method will be called whenever that parameter changes, immediately after Svelte has applied updates to the markup. <code><a href="svelte-action.html#types-actionreturn">ActionReturn</a></code> and <code><a href="svelte-action.html#types-actionreturn">ActionReturn</a>&lt;undefined&gt;</code> both mean that the action accepts no parameters.</li> <li>destroy: Method that is called after the element is unmounted</li> </ul> <p>Additionally, you can specify which additional attributes and events the action enables on the applied element. This applies to TypeScript typings only and has no effect at runtime.</p> <p>Example usage:</p> <pre class="copy-code-block shiki twoslash lsp" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)" data-language="javascript">interface Attributes {
	newprop?: string;
	'on:event': (e: CustomEvent&lt;boolean&gt;) =&gt; void;
}


export function myAction(node: HTMLElement, parameter: Parameter): ActionReturn&lt;Parameter, Attributes&gt; {
	// ...
	return {
		update: (updatedParameter) =&gt; {...},
		destroy: () =&gt; {...}
	};
}</pre>
<p>Docs: <a href="svelte-action.html">https://svelte.dev/docs/svelte-action</a></p> <div class="ts-block"> <pre class="copy-code-block shiki css-variables" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)" data-language="javascript">interface ActionReturn&lt;
	Parameter = undefined,
	Attributes extends Record&lt;string, any&gt; = Record&lt;
		never,
		any
	&gt;
&gt; {…}</pre>
<div class="ts-block-property"> <pre class="copy-code-block shiki css-variables" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)" data-language="javascript">update?: (parameter: Parameter) =&gt; void;</pre>

</div> <div class="ts-block-property"> <pre class="copy-code-block shiki css-variables" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)" data-language="javascript">destroy?: () =&gt; void;</pre>

</div>
</div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2016–2023 Rich Harris and contributors<br>Licensed under the MIT License.<br>
    <a href="https://svelte.dev/docs/svelte-action" class="_attribution-link">https://svelte.dev/docs/svelte-action</a>
  </p>
</div>
