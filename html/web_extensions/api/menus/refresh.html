<h1>menus.refresh()</h1>
<div class="section-content">
<p>Refreshes a menu that's being shown.</p> <p>Updates the extension's menu items in the menu that the browser is currently showing, including changes that have been made since the menu was shown. Has no effect if the menu is not being shown. Rebuilding a shown menu is an expensive operation, only invoke this method when necessary.</p> <p>This would typically be called from inside a <a href="onshown.html"><code>menus.onShown</code></a> event handler, after the handler has made any updates to the menu.</p> <p>Firefox makes this function available via the <code>contextMenus</code> namespace as well as the <code>menus</code> namespace.</p> <p>This is an asynchronous function that returns a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a>.</p>
</div>
<section aria-labelledby="syntax"><h2 id="syntax">Syntax</h2>
<div class="section-content"><div class="code-example"><pre data-language="js">browser<span class="token punctuation">.</span>menus<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</pre></div></div></section><section aria-labelledby="parameters"><h3 id="parameters">Parameters</h3>
<div class="section-content"><p>None.</p></div></section><section aria-labelledby="return_value"><h3 id="return_value">Return value</h3>
<div class="section-content"><p>A <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> that is fulfilled with no arguments.</p></div></section><h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody><tr>
<th><code>refresh</code></th>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">6060</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr></tbody>
</table></div>
<section aria-labelledby="examples"><h2 id="examples">Examples</h2>
<div class="section-content">
<p>This example listens for the context menu to be shown over a link, then updates the <code>openLabelledId</code> menu item with the link's hostname:</p> <div class="code-example"><pre data-language="js"><span class="token keyword">function</span> <span class="token function">updateMenuItem</span><span class="token punctuation">(</span><span class="token parameter">linkHostname</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  browser<span class="token punctuation">.</span>menus<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>openLabelledId<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Open (</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>linkHostname<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  browser<span class="token punctuation">.</span>menus<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

browser<span class="token punctuation">.</span>menus<span class="token punctuation">.</span>onShown<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">info</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>info<span class="token punctuation">.</span>linkUrl<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> linkElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  linkElement<span class="token punctuation">.</span>href <span class="token operator">=</span> info<span class="token punctuation">.</span>linkUrl<span class="token punctuation">;</span>
  <span class="token function">updateMenuItem</span><span class="token punctuation">(</span>linkElement<span class="token punctuation">.</span>hostname<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div>
</div></section><section aria-labelledby="example_extensions"><h3 id="example_extensions">Example extensions</h3>
<div class="section-content"><ul><li><a href="https://github.com/mdn/webextensions-examples/tree/master/menu-labelled-open" target="_blank">menu-labelled-open</a></li></ul></div></section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/menus/refresh" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/menus/refresh</a>
  </p>
</div>
