<h1>tabs.captureVisibleTab()</h1>
<div class="section-content">
<p>Creates a data URL encoding the image of an area of the currently active tab in the specified window. You must have the <code>&lt;all_urls&gt;</code> <a href="../../manifest.json/permissions.html">permission</a> to use this method. (Alternately, Chrome allows use of this method with the <code>activeTab</code> <a href="../../manifest.json/permissions.html">permission</a> and a qualifying user gesture).</p> <p>This is an asynchronous function that returns a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a>.</p>
</div>
<section aria-labelledby="syntax"><h2 id="syntax">Syntax</h2>
<div class="section-content"><div class="code-example"><pre data-language="js"><span class="token keyword">let</span> capturing <span class="token operator">=</span> browser<span class="token punctuation">.</span>tabs<span class="token punctuation">.</span><span class="token function">captureVisibleTab</span><span class="token punctuation">(</span>
  windowId<span class="token punctuation">,</span>               <span class="token comment">// optional integer</span>
  options                 <span class="token comment">// optional extensionTypes.ImageDetails</span>
<span class="token punctuation">)</span>
</pre></div></div></section><section aria-labelledby="parameters"><h3 id="parameters">Parameters</h3>
<div class="section-content"><dl> <dt id="windowid">
<code>windowId</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p><code>integer</code>. The target window. Defaults to the current window.</p> </dd> <dt id="options">
<code>options</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p><a href="../extensiontypes/imagedetails.html"><code>extensionTypes.ImageDetails</code></a>.</p> </dd> </dl></div></section><section aria-labelledby="return_value"><h3 id="return_value">Return value</h3>
<div class="section-content"><p>A <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> that will be fulfilled with a data URL which encodes the captured image. May be assigned to the 'src' property of an HTML Image element for display. If any error occurs the promise will be rejected with an error message.</p></div></section><section aria-labelledby="examples"><h2 id="examples">Examples</h2>
<div class="section-content">
<p>Capture an image of the active tab in the current window, with default settings:</p> <div class="code-example"><pre data-language="js"><span class="token keyword">function</span> <span class="token function">onCaptured</span><span class="token punctuation">(</span><span class="token parameter">imageUri</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>imageUri<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">onError</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Error: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>error<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

browser<span class="token punctuation">.</span>browserAction<span class="token punctuation">.</span>onClicked<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> capturing <span class="token operator">=</span> browser<span class="token punctuation">.</span>tabs<span class="token punctuation">.</span><span class="token function">captureVisibleTab</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  capturing<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>onCaptured<span class="token punctuation">,</span> onError<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div>
</div></section><h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody><tr>
<th><code>captureVisibleTab</code></th>
<td class="bc-supports-yes"><details><summary>5</summary>The default file format is 'jpeg'.</details></td>
<td class="bc-supports-yes">15</td>
<td class="bc-supports-yes">47</td>
<td>?</td>
<td class="bc-supports-yes"><details><summary>15</summary>The default file format is 'jpeg'.</details></td>
<td class="bc-supports-yes"><details><summary>14</summary>["The default file format is 'jpeg'.", "<code>&lt;all_urls&gt;</code> permission is optional."]</details></td>
<td>?</td>
<td>?</td>
<td class="bc-supports-yes">54</td>
<td>?</td>
<td class="bc-supports-yes"><details><summary>15</summary>["The default file format is 'jpeg'.", "<code>&lt;all_urls&gt;</code> permission is optional."]</details></td>
<td>?</td>
</tr></tbody>
</table></div>
<div class="section-content"><div class="notecard note" id="sect2"> <p><strong>Note:</strong> This API is based on Chromium's <a href="https://developer.chrome.com/docs/extensions/reference/tabs/#method-captureVisibleTab" target="_blank"><code>chrome.tabs</code></a> API. This documentation is derived from <a href="https://chromium.googlesource.com/chromium/src/+/master/chrome/common/extensions/api/tabs.json" target="_blank"><code>tabs.json</code></a> in the Chromium code.</p> </div></div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/captureVisibleTab" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/captureVisibleTab</a>
  </p>
</div>
