<h1>set()</h1>
<div class="section-content">
<p>Use <code>BrowserSetting.set()</code> to change the browser setting to a new value.</p> <p>There are some rules that can restrict when extensions are able to change settings:</p> <ul> <li>some settings are locked, so they can't be changed by extensions at all</li> <li>if multiple extensions try to modify the same setting, then extensions are given a precedence ordering based on when they were installed. More-recently installed extensions have precedence over less-recently installed extension.</li> </ul> <p>This means that if extension X tries to change a setting:</p> <ol> <li>If the setting is locked, then the setting is not changed. However, X's change is remembered, and it is stored in a queue, ordered by X's precedence relative to any other extensions that tried to change the setting. If the setting becomes unlocked later on, the first extension in the queue gets to change the setting.</li> <li>Otherwise, if no other extension has already changed the setting, then X succeeds in changing the setting, and is then said to "control" the setting.</li> <li>Otherwise, if a lower-precedence extension Y has already changed the setting, then X succeeds in changing the setting, and now controls the setting. However, Y's change is remembered, and is stored in a queue in precedence order. If X subsequently clears its value, or if X is disabled or uninstalled, the first extension in the queue gets to make its change to the setting.</li> <li>Otherwise, if a higher-precedence extension Z has already changed the setting, then X does not succeed in changing the setting, but its change is queued. If Z subsequently clears its value, or if Z is disabled or uninstalled, the first extension in the queue gets to make its change to the setting.</li> </ol> <p>An extension can find out which of these scenarios applies by examining the "<code>levelOfControl</code>" property returned from a call to <a href="get.html"><code>BrowserSetting.get()</code></a>.</p> <p>The <code>BrowserSetting.set()</code> method returns a Promise that resolves to a boolean: if an attempt to change a setting actually results in the setting being changed (scenarios 2 and 3 above) the boolean is <code>true</code>: otherwise it is <code>false</code>.</p>
</div>
<section aria-labelledby="syntax"><h2 id="syntax">Syntax</h2>
<div class="section-content"><div class="code-example"><pre data-language="js"><span class="token keyword">let</span> setting <span class="token operator">=</span> setting<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>
  details     <span class="token comment">// object</span>
<span class="token punctuation">)</span>
</pre></div></div></section><section aria-labelledby="parameters"><h3 id="parameters">Parameters</h3>
<div class="section-content"><dl> <dt id="details"><code>details</code></dt> <dd> <p>An object that must contain the following property:</p> <dl> <dt id="value"><code>value</code></dt> <dd> <p><code>any</code>. The value you want to change the setting to. Its type depends on the particular setting.</p> </dd> </dl> </dd> </dl></div></section><section aria-labelledby="return_value"><h3 id="return_value">Return value</h3>
<div class="section-content"><p>A <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> that will be fulfilled with a <code>boolean</code>: <code>true</code> if the setting was modified, <code>false</code> otherwise (for example, because the extension did not control the setting).</p></div></section><section aria-labelledby="browser_compatibility"><h2 id="browser_compatibility">Browser compatibility</h2></section><section aria-labelledby="example"><h2 id="example">Example</h2>
<div class="section-content">
<p>Modify the <code>hyperlinkAuditingEnabled</code> setting (this requires the "privacy" permission):</p> <div class="code-example"><pre data-language="js"><span class="token keyword">function</span> <span class="token function">onSet</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Value was updated"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Value was not updated"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

browser<span class="token punctuation">.</span>browserAction<span class="token punctuation">.</span>onClicked<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

    <span class="token keyword">let</span> setting <span class="token operator">=</span> browser<span class="token punctuation">.</span>privacy<span class="token punctuation">.</span>websites<span class="token punctuation">.</span>hyperlinkAuditingEnabled<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    setting<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>onSet<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div> <div class="notecard note" id="sect1"> <p><strong>Note:</strong></p> <p>This API is based on Chromium's <a href="https://developer.chrome.com/docs/extensions/reference/types/" target="_blank"><code>chrome.types</code></a> API.</p> </div>
</div></section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/types/BrowserSetting/set" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/types/BrowserSetting/set</a>
  </p>
</div>
