<h1>downloads.DownloadQuery</h1>
<div class="section-content">
<p>The <code>DownloadQuery</code> type of the <a href="../downloads.html"><code>downloads</code></a> API defines a set of parameters that can be used to search the downloads manager for a specific set of downloads.</p> <p>This type is used for example in <a href="search.html"><code>downloads.search()</code></a> and <a href="erase.html"><code>downloads.erase()</code></a>, as a query object to filter the set of <a href="downloaditem.html"><code>DownloadItems</code></a> to return or erase.</p>
</div>
<section aria-labelledby="type"><h2 id="type">Type</h2>
<div class="section-content">
<p>Values of this type are objects. They contain the following properties:</p> <dl> <dt id="cookiestoreid">
<code>cookieStoreId</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>The cookie store ID of the <a href="../../work_with_contextual_identities.html">contextual identity</a> in which the download took place.</p> </dd> <dt id="query">
<code>query</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>An <code>array</code> of <code>string</code>s. Include only <a href="downloaditem.html"><code>DownloadItems</code></a> whose <code>filename</code> or <code>url</code> contains all of the given strings. You can also include terms beginning with a dash (-) — these terms <strong>must not</strong> be contained in the item's <code>filename</code> or <code>url</code> for it to be included.</p> </dd> <dt id="startedbefore">
<code>startedBefore</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>A <a href="downloadtime.html"><code>DownloadTime</code></a>. Include only <a href="downloaditem.html"><code>DownloadItems</code></a> that started before the given time.</p> </dd> <dt id="startedafter">
<code>startedAfter</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>A <a href="downloadtime.html"><code>DownloadTime</code></a>. Include only <a href="downloaditem.html"><code>DownloadItems</code></a> that started after the given time.</p> </dd> <dt id="endedbefore">
<code>endedBefore</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>A <a href="downloadtime.html"><code>DownloadTime</code></a>. Include only <a href="downloaditem.html"><code>DownloadItems</code></a> that ended before the given time.</p> </dd> <dt id="endedafter">
<code>endedAfter</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>A <a href="downloadtime.html"><code>DownloadTime</code></a>. Include only <a href="downloaditem.html"><code>DownloadItems</code></a> that ended after the given time.</p> </dd> <dt id="totalbytesgreater">
<code>totalBytesGreater</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>A <code>number</code> representing a number of bytes. Include only <a href="downloaditem.html"><code>DownloadItems</code></a> whose <code>totalBytes</code> is greater than the given number.</p> </dd> <dt id="totalbytesless">
<code>totalBytesLess</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>A <code>number</code> representing a number of bytes. Include only <a href="downloaditem.html"><code>DownloadItems</code></a> whose <code>totalBytes</code> is less than the given number.</p> </dd> <dt id="filenameregex">
<code>filenameRegex</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>A <code>string</code> representing a regular expression. Include only <a href="downloaditem.html"><code>DownloadItems</code></a> whose <code>filename</code> value matches the given regular expression.</p> </dd> <dt id="urlregex">
<code>urlRegex</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>A <code>string</code> representing a regular expression. Include only <a href="downloaditem.html"><code>DownloadItems</code></a> whose <code>url</code> value matches the given regular expression.</p> </dd> <dt id="limit">
<code>limit</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>An <code>integer</code> representing a number of results. Include only the specified number of <a href="downloaditem.html"><code>DownloadItems</code></a>.</p> </dd> <dt id="orderby">
<code>orderBy</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>An <code>array</code> of <code>string</code>s representing <a href="downloaditem.html"><code>DownloadItem</code></a> properties the search results should be sorted by. For example, including <code>startTime</code> then <code>totalBytes</code> in the array would sort the <a href="downloaditem.html"><code>DownloadItems</code></a> by their start time, then total bytes — in ascending order. To specify sorting by a property in descending order, prefix it with a hyphen, for example <code>-startTime</code>.</p> </dd> <dt id="id">
<code>id</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>An <code>integer</code> representing the ID of the <a href="downloaditem.html"><code>downloads.DownloadItem</code></a> you want to query.</p> </dd> <dt id="url">
<code>url</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>A <code>string</code> representing the absolute URL that the download was initiated from, before any redirects.</p> </dd> <dt id="filename">
<code>filename</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>A string representing the absolute local path of the download file you want to query.</p> </dd> <dt id="danger">
<code>danger</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>A string representing a <a href="dangertype.html"><code>downloads.DangerType</code></a> — include only <a href="downloaditem.html"><code>DownloadItems</code></a> with this <code>danger</code> value.</p> </dd> <dt id="mime">
<code>mime</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>A <code>string</code> representing a MIME type. Include only <a href="downloaditem.html"><code>DownloadItems</code></a> with this <code>mime</code> value.</p> </dd> <dt id="starttime">
<code>startTime</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>A <code>string</code> representing an <a href="https://en.wikipedia.org/wiki/ISO_8601" target="_blank">ISO 8601</a> format time. Include only <a href="downloaditem.html"><code>DownloadItems</code></a> with this <code>startTime</code> value.</p> </dd> <dt id="endtime">
<code>endTime</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>A <code>string</code> representing an <a href="https://en.wikipedia.org/wiki/ISO_8601" target="_blank">ISO 8601</a> format time. Include only will limited to <a href="downloaditem.html"><code>DownloadItems</code></a> with this <code>endTime</code> value.</p> </dd> <dt id="state">
<code>state</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>A <code>string</code> representing a download <a href="state.html"><code>downloads.State</code></a> (<code>in_progress</code>, <code>interrupted</code>, or <code>complete</code>). Include only <a href="downloaditem.html"><code>DownloadItems</code></a> with this <code>state</code> value.</p> </dd> <dt id="paused">
<code>paused</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>A <code>boolean</code> that indicates whether a download is paused — i.e. has stopped reading data from the host, but kept the connection open (<code>true</code>), or not (<code>false</code>). Include only <a href="downloaditem.html"><code>DownloadItems</code></a> with this <code>paused</code> value.</p> </dd> <dt id="error">
<code>error</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>A string representing an <a href="interruptreason.html"><code>downloads.InterruptReason</code></a> — a reason why a download was interrupted. Include only <a href="downloaditem.html"><code>DownloadItems</code></a> with this <code>error</code> value.</p> </dd> <dt id="bytesreceived">
<code>bytesReceived</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>A <code>number</code> representing the number of bytes received so far from the host, without considering file compression. Include only <a href="downloaditem.html"><code>DownloadItems</code></a> with this <code>bytesReceived</code> value.</p> </dd> <dt id="totalbytes">
<code>totalBytes</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>A <code>number</code> representing the total number of bytes in the downloaded file, without considering file compression. Include only <a href="downloaditem.html"><code>DownloadItems</code></a> with this <code>totalBytes</code> value.</p> </dd> <dt id="filesize">
<code>fileSize</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p><code>number</code>. Number of bytes in the whole file post-decompression, or -1 if unknown. A <code>number</code> representing the total number of bytes in the file after decompression. Include only <a href="downloaditem.html"><code>DownloadItems</code></a> with this <code>fileSize</code> value.</p> </dd> <dt id="exists">
<code>exists</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>A <code>boolean</code> indicating whether a downloaded file still exists (<code>true</code>) or not (<code>false</code>). Include only <a href="downloaditem.html"><code>DownloadItems</code></a> with this <code>exists</code> value.</p> </dd> </dl>
</div></section><h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody>
<tr>
<th><code>DownloadQuery</code></th>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes">47</td>
<td>?</td>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">48–79</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr>
<tr>
<th><code>bytesReceived</code></th>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes">47</td>
<td>?</td>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">48–79</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr>
<tr>
<th><code>cookieStoreId</code></th>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">92</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr>
<tr>
<th><code>danger</code></th>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes">47</td>
<td>?</td>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">48–79</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr>
<tr>
<th><code>endTime</code></th>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr>
<tr>
<th><code>endedAfter</code></th>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes"><details><summary>47</summary>The parameter is ignored.</details></td>
<td>?</td>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">48–79</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr>
<tr>
<th><code>endedBefore</code></th>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes"><details><summary>47</summary>The parameter is ignored.</details></td>
<td>?</td>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">48–79</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr>
<tr>
<th><code>error</code></th>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes">47</td>
<td>?</td>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">48–79</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr>
<tr>
<th><code>exists</code></th>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes">47</td>
<td>?</td>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">48–79</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr>
<tr>
<th><code>fileSize</code></th>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes">47</td>
<td>?</td>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">48–79</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr>
<tr>
<th><code>filename</code></th>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes">47</td>
<td>?</td>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">48–79</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr>
<tr>
<th><code>filenameRegex</code></th>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes">47</td>
<td>?</td>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">48–79</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr>
<tr>
<th><code>id</code></th>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes">47</td>
<td>?</td>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">48–79</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr>
<tr>
<th><code>limit</code></th>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes">47</td>
<td>?</td>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">48–79</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr>
<tr>
<th><code>mime</code></th>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes">47</td>
<td>?</td>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">48–79</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr>
<tr>
<th><code>orderBy</code></th>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes">47</td>
<td>?</td>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">48–79</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr>
<tr>
<th><code>paused</code></th>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes">47</td>
<td>?</td>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">48–79</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr>
<tr>
<th><code>query</code></th>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes">47</td>
<td>?</td>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">48–79</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr>
<tr>
<th><code>startTime</code></th>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes">47</td>
<td>?</td>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">48–79</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr>
<tr>
<th><code>startedAfter</code></th>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes">47</td>
<td>?</td>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">48–79</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr>
<tr>
<th><code>startedBefore</code></th>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes">47</td>
<td>?</td>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">48–79</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr>
<tr>
<th><code>state</code></th>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes">47</td>
<td>?</td>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">48–79</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr>
<tr>
<th><code>totalBytes</code></th>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes">47</td>
<td>?</td>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">48–79</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr>
<tr>
<th><code>totalBytesGreater</code></th>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes">47</td>
<td>?</td>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">48–79</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr>
<tr>
<th><code>totalBytesLess</code></th>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes">47</td>
<td>?</td>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">48–79</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr>
<tr>
<th><code>url</code></th>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes">47</td>
<td>?</td>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">48–79</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr>
<tr>
<th><code>urlRegex</code></th>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes">47</td>
<td>?</td>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">48–79</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr>
</tbody>
</table></div>
<div class="section-content"><div class="notecard note" id="sect2"> <p><strong>Note:</strong> This API is based on Chromium's <a href="https://developer.chrome.com/docs/extensions/reference/downloads/#type-DownloadQuery" target="_blank"><code>chrome.downloads</code></a> API.</p> </div></div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/downloads/DownloadQuery" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/downloads/DownloadQuery</a>
  </p>
</div>
