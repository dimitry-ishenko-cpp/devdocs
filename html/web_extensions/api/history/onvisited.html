<h1>history.onVisited</h1>
<div class="section-content"><p>Fired each time the user visits a page. A <a href="historyitem.html"><code>history.HistoryItem</code></a> object is passed to the listener. This event fires before the page has loaded.</p></div>
<section aria-labelledby="syntax"><h2 id="syntax">Syntax</h2>
<div class="section-content">
<div class="code-example"><pre data-language="js">browser<span class="token punctuation">.</span>history<span class="token punctuation">.</span>onVisited<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span>listener<span class="token punctuation">)</span>
browser<span class="token punctuation">.</span>history<span class="token punctuation">.</span>onVisited<span class="token punctuation">.</span><span class="token function">removeListener</span><span class="token punctuation">(</span>listener<span class="token punctuation">)</span>
browser<span class="token punctuation">.</span>history<span class="token punctuation">.</span>onVisited<span class="token punctuation">.</span><span class="token function">hasListener</span><span class="token punctuation">(</span>listener<span class="token punctuation">)</span>
</pre></div> <p>Events have three functions:</p> <dl> <dt id="addlistenercallback"><code>addListener(callback)</code></dt> <dd> <p>Adds a listener to this event.</p> </dd> <dt id="removelistenerlistener"><code>removeListener(listener)</code></dt> <dd> <p>Stop listening to this event. The <code>listener</code> argument is the listener to remove.</p> </dd> <dt id="haslistenerlistener"><code>hasListener(listener)</code></dt> <dd> <p>Check whether <code>listener</code> is registered for this event. Returns <code>true</code> if it is listening, <code>false</code> otherwise.</p> </dd> </dl>
</div></section><section aria-labelledby="addlistener_syntax"><h2 id="addlistener_syntax">addListener syntax</h2>
</section><section aria-labelledby="parameters"><h3 id="parameters">Parameters</h3>
<div class="section-content"><dl> <dt id="callback"><code>callback</code></dt> <dd> <p>Function that will be called when this event occurs. The function will be passed the following arguments:</p> <dl> <dt id="result"><code>result</code></dt> <dd> <p><a href="historyitem.html"><code>history.HistoryItem</code></a>. An object representing the item in the browser's history.</p> <p>At the time that this event is sent, the browser doesn't yet know the title of the page. If the browser has visited this page before and has remembered its old title, then the <code>HistoryItem.title</code> object will contain the old title of the page. If the browser doesn't have a record of the page's old title, then <code>HistoryItem.title</code> will be empty. To get the titles of pages as soon as they are known, listen for <a href="ontitlechanged.html"><code>history.onTitleChanged</code></a>.</p> </dd> </dl> </dd> </dl></div></section><h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody><tr>
<th><code>onVisited</code></th>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes"><details><summary>50</summary>Before version 56, the result object's 'title' was always an empty string. From version 56 onwards, it is set to the last known title, if that is available, or an empty string otherwise.</details></td>
<td>?</td>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr></tbody>
</table></div>
<section aria-labelledby="examples"><h2 id="examples">Examples</h2>
<div class="section-content">
<p>Listen for visits, and log the URL and visit time.</p> <div class="code-example"><pre data-language="js"><span class="token keyword">function</span> <span class="token function">onVisited</span><span class="token punctuation">(</span><span class="token parameter">historyItem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>historyItem<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>historyItem<span class="token punctuation">.</span>lastVisitTime<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

browser<span class="token punctuation">.</span>history<span class="token punctuation">.</span>onVisited<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span>onVisited<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div> <div class="notecard note" id="sect2"> <p><strong>Note:</strong> This API is based on Chromium's <a href="https://developer.chrome.com/docs/extensions/reference/history/#event-onVisited" target="_blank"><code>chrome.history</code></a> API. This documentation is derived from <a href="https://chromium.googlesource.com/chromium/src/+/master/chrome/common/extensions/api/history.json" target="_blank"><code>history.json</code></a> in the Chromium code.</p> </div>
</div></section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/history/onVisited" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/history/onVisited</a>
  </p>
</div>
