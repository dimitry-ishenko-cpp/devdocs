<h1>devtools.panels.ElementsPanel.setExpression()</h1>
<div class="section-content">
<p>Evaluates an expression in the context of the inspected page, and displays the result in the extension sidebar pane.</p> <p>The expression's execution context is the same as that for <a href="../../inspectedwindow/eval.html"><code>inspectedWindow.eval()</code></a>.</p> <p>JSON objects and DOM nodes are displayed as an expandable tree, as in the <a href="https://firefox-source-docs.mozilla.org/devtools-user/json_viewer/index.html" target="_blank">JSON viewer</a> in Firefox. You can optionally specify a <code>rootTitle</code> string: this will be displayed as the title of the tree's root.</p> <p>This is an asynchronous function that returns a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a>.</p>
</div>
<section aria-labelledby="syntax"><h2 id="syntax">Syntax</h2>
<div class="section-content"><div class="code-example"><pre data-language="js"><span class="token keyword">let</span> evaluating <span class="token operator">=</span> browser<span class="token punctuation">.</span>devtools<span class="token punctuation">.</span>panels<span class="token punctuation">.</span><span class="token function">setExpression</span><span class="token punctuation">(</span>
  expression<span class="token punctuation">,</span>       <span class="token comment">// string</span>
  rootTitle         <span class="token comment">// string</span>
<span class="token punctuation">)</span>
</pre></div></div></section><section aria-labelledby="parameters"><h3 id="parameters">Parameters</h3>
<div class="section-content"><dl> <dt id="expression"><code>expression</code></dt> <dd> <p><code>string</code>. The expression to evaluate.</p> </dd> <dt id="roottitle">
<code>rootTitle</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>string. The title of the root of the tree in which results are displayed.</p> </dd> </dl></div></section><section aria-labelledby="return_value"><h3 id="return_value">Return value</h3>
<div class="section-content"><p>A <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> that will be fulfilled with no arguments, once the expression has been evaluated.</p></div></section><h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody><tr>
<th><code>setExpression</code></th>
<td class="bc-supports-yes"><details><summary>Yes</summary>The expression must evaluate to a JavaScript object or a DOM node, or nothing is shown in the sidebar.</details></td>
<td class="bc-supports-yes"><details><summary>79</summary>The expression must evaluate to a JavaScript object or a DOM node, or nothing is shown in the sidebar.</details></td>
<td class="bc-supports-yes"><details><summary>57</summary>The expression must evaluate to an object that can be serialized to JSON, or nothing is shown in the sidebar. In particular, JavaScript cyclic objects and DOM nodes are not supported. See <a href="https://bugzil.la/1403130">bug 1403130</a>.</details></td>
<td>?</td>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
<td class="bc-supports-no">No</td>
<td>?</td>
</tr></tbody>
</table></div>
<section aria-labelledby="examples"><h2 id="examples">Examples</h2>
<div class="section-content">
<p>This code creates a sidebar pane that displays the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/tagName"><code>tagName</code></a> of the currently selected element:</p> <div class="code-example"><pre data-language="js"><span class="token keyword">function</span> <span class="token function">onCreated</span><span class="token punctuation">(</span><span class="token parameter">sidebarPane</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  browser<span class="token punctuation">.</span>devtools<span class="token punctuation">.</span>panels<span class="token punctuation">.</span>elements<span class="token punctuation">.</span>onSelectionChanged<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> exp <span class="token operator">=</span> <span class="token string">"$0 &amp;&amp; $0.tagName"</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> title <span class="token operator">=</span> <span class="token string">"Selected Element tagName"</span><span class="token punctuation">;</span>
    sidebarPane<span class="token punctuation">.</span><span class="token function">setExpression</span><span class="token punctuation">(</span>exp<span class="token punctuation">,</span> title<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

browser<span class="token punctuation">.</span>devtools<span class="token punctuation">.</span>panels<span class="token punctuation">.</span>elements<span class="token punctuation">.</span><span class="token function">createSidebarPane</span><span class="token punctuation">(</span><span class="token string">"My pane"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>onCreated<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div> <div class="notecard note" id="sect2"> <p><strong>Note:</strong> This API is based on Chromium's <a href="https://developer.chrome.com/docs/extensions/reference/devtools_panels/" target="_blank"><code>chrome.devtools.panels</code></a> API.</p> </div>
</div></section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/devtools/panels/ExtensionSidebarPane/setExpression" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/devtools/panels/ExtensionSidebarPane/setExpression</a>
  </p>
</div>
