<h1>permissions</h1>
<div class="section-content">
<p>Enables extensions to request extra permissions at runtime, after they have been installed.</p> <p>Extensions need permissions to access more powerful WebExtension APIs. They can ask for permissions at install time, by including the permissions they need in the <a href="../manifest.json/permissions.html"><code>permissions</code></a> manifest.json key. The main advantages of asking for permissions at install time are:</p> <ul> <li>The user is only asked once, so it's less disruptive for them, and a simpler decision.</li> <li>The extension can rely on the access to the APIs it needs, because if already running, the permissions have been granted.</li> </ul> <p>In most major browsers, users can see if their installed extensions request advanced permissions through the browser's extensions manager.</p> <p>With the permissions API, an extension can ask for additional permissions at runtime. These permissions need to be listed in the <a href="../manifest.json/optional_permissions.html"><code>optional_permissions</code></a> manifest.json key. Note that some permissions are not allowed in <code>optional_permissions</code>. The main advantages of this are:</p> <ul> <li>The extension can run with a smaller set of permissions, except when it actually needs them.</li> <li>The extension can handle permission denial in a graceful manner, instead of presenting the user with a global "all or nothing" choice at install time. You can still get a lot out of that map extension, without giving it access to your location, for example.</li> <li>The extension may need <a href="../manifest.json/permissions.html#host_permissions">host permissions</a>, but not know at install time which host permissions it needs. For example, the list of hosts may be a user setting. In this scenario, asking for a more specific range of hosts at runtime, can be an alternative to asking for "&lt;all_urls&gt;" at install time.</li> </ul> <p>To use the permissions API, decide which permissions your extension can request at runtime, and list them in <a href="../manifest.json/optional_permissions.html"><code>optional_permissions</code></a>. After this, you can request any permissions that were included in <code>optional_permissions</code>. Requests may only be made in the handler for a user action (for example, a click handler).</p> <p>Starting with Firefox 84, users will be able to manage optional permissions of installed extensions from the Add-ons Manager. Extensions that use optional permissions should listen for <a href="permissions/onadded.html">browser.permissions.onAdded</a> and <a href="permissions/onremoved.html">browser.permissions.onRemoved</a> API events to know when a user grants or revokes these permissions.</p> <p>For advice on designing your request for runtime permissions, to maximize the likelihood that users grant them, see <a href="https://extensionworkshop.com/documentation/develop/request-the-right-permissions/#request_permissions_at_runtime" target="_blank">Request permissions at runtime</a>.</p>
</div>
<section aria-labelledby="types"><h2 id="types">Types</h2>
<div class="section-content"><dl> <dt id="permissions.permissions"><a href="permissions/permissions.html"><code>permissions.Permissions</code></a></dt> <dd> <p>Represents a set of permissions.</p> </dd> </dl></div></section><section aria-labelledby="methods"><h2 id="methods">Methods</h2>
<div class="section-content"><dl> <dt id="permissions.contains"><a href="permissions/contains.html"><code>permissions.contains()</code></a></dt> <dd> <p>Discover an extension's given set of permissions.</p> </dd> <dt id="permissions.getall"><a href="permissions/getall.html"><code>permissions.getAll()</code></a></dt> <dd> <p>Get all the permissions this extension currently has.</p> </dd> <dt id="permissions.remove"><a href="permissions/remove.html"><code>permissions.remove()</code></a></dt> <dd> <p>Give up a set of permissions.</p> </dd> <dt id="permissions.request"><a href="permissions/request.html"><code>permissions.request()</code></a></dt> <dd> <p>Ask for a set of permissions.</p> </dd> </dl></div></section><section aria-labelledby="event_handlers"><h2 id="event_handlers">Event handlers</h2>
<div class="section-content"><dl> <dt id="permissions.onadded"><a href="permissions/onadded.html"><code>permissions.onAdded</code></a></dt> <dd> <p>Fired when a new permission is granted.</p> </dd> <dt id="permissions.onremoved"><a href="permissions/onremoved.html"><code>permissions.onRemoved</code></a></dt> <dd> <p>Fired when a permission is removed.</p> </dd> </dl></div></section><h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody>
<tr>
<th><code>Permissions</code></th>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes">55</td>
<td>?</td>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">14</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-yes">79</td>
<td>?</td>
<td class="bc-supports-yes">15</td>
<td>?</td>
</tr>
<tr>
<th><code>contains</code></th>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes">55</td>
<td>?</td>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">14</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-yes">79</td>
<td>?</td>
<td class="bc-supports-yes">15</td>
<td>?</td>
</tr>
<tr>
<th><code>getAll</code></th>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes">55</td>
<td>?</td>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">14</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-yes">79</td>
<td>?</td>
<td class="bc-supports-yes">15</td>
<td>?</td>
</tr>
<tr>
<th><code>onAdded</code></th>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes">77</td>
<td>?</td>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">14</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-yes">79</td>
<td>?</td>
<td class="bc-supports-yes">15</td>
<td>?</td>
</tr>
<tr>
<th><code>onRemoved</code></th>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes">77</td>
<td>?</td>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">14</td>
<td>?</td>
<td>?</td>
<td class="bc-supports-yes">79</td>
<td>?</td>
<td class="bc-supports-yes">15</td>
<td>?</td>
</tr>
<tr>
<th><code>remove</code></th>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes">55</td>
<td>?</td>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes"><details><summary>14</summary>Removing <code>&lt;all_urls&gt;</code> or <code>*://*/*</code> origins will remove previously granted permission to request specific origin patterns and will stop automatically prompting the user for access to any visited website via the extension's access popover in the toolbar.</details></td>
<td>?</td>
<td>?</td>
<td class="bc-supports-yes">79</td>
<td>?</td>
<td class="bc-supports-yes"><details><summary>15</summary>Removing <code>&lt;all_urls&gt;</code> or <code>*://*/*</code> origins will remove previously granted permission to request specific origin patterns and will stop automatically prompting the user for access to any visited website via the extension's access popover in the toolbar.</details></td>
<td>?</td>
</tr>
<tr>
<th><code>request</code></th>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes"><details><summary>55</summary>["It's not possible to request permissions from a sidebar document (<a href="https://bugzil.la/1493396">bug 1493396</a>).", "Before version 75, permissions cannot be requested from popup panels (see <a href="https://bugzil.la/1432083">bug 1432083</a>).", "Before version 61, permissions cannot be requested from options pages embedded in <code>about:addons</code> (see <a href="https://bugzil.la/1382953">bug 1382953</a>)."]</details></td>
<td>?</td>
<td class="bc-supports-yes">Yes</td>
<td class="bc-supports-yes"><details><summary>14</summary>["Requesting <code>&lt;all_urls&gt;</code> or <code>*://*/*</code> origins will grant permission to request specific origin patterns and automatically prompt the user for access to any visited website via the extension's access popover in the toolbar.", "The user will be prompted again for permissions that have been previously granted and then removed.", "Supported permissions will be granted without prompting the user. Only specific origin patterns will prompt the user."]</details></td>
<td>?</td>
<td>?</td>
<td class="bc-supports-yes">102</td>
<td>?</td>
<td class="bc-supports-yes"><details><summary>15</summary>["Requesting <code>&lt;all_urls&gt;</code> or <code>*://*/*</code> origins will grant permission to request specific origin patterns and automatically prompt the user for access to any visited website via the extension's banner.", "The user will be prompted again for permissions that have been previously granted and then removed.", "Supported permissions will be granted without prompting the user. Only specific origin patterns will prompt the user."]</details></td>
<td>?</td>
</tr>
</tbody>
</table></div>
<section aria-labelledby="see_also"><h2 id="see_also">See also</h2>
<div class="section-content"><ul> <li>
<code>manifest.json</code> <a href="../manifest.json/permissions.html"><code>permissions</code></a> property</li> <li>
<code>manifest.json</code> <a href="../manifest.json/optional_permissions.html"><code>optional_permissions</code></a> property</li> </ul></div></section><section aria-labelledby="example_extensions"><h2 id="example_extensions">Example extensions</h2>
<div class="section-content">
<ul><li><a href="https://github.com/mdn/webextensions-examples/tree/master/permissions" target="_blank">permissions</a></li></ul> <div class="notecard note" id="sect2"> <p><strong>Note:</strong> This API is based on Chromium's <a href="https://developer.chrome.com/docs/extensions/reference/permissions/" target="_blank"><code>chrome.permissions</code></a> API.</p> </div>
</div></section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/permissions" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/permissions</a>
  </p>
</div>
