<h1>Modify a web page</h1>
<div class="section-content">
<p>One of the most common use cases for an extension is to modify a web page. For example, an extension might want to change the style applied to a page, hide particular DOM nodes, or inject extra DOM nodes into the page.</p> <p>There are two ways to do this with WebExtensions APIs:</p> <ul> <li>
<strong>Declaratively</strong>: Define a pattern that matches a set of URLs, and load a set of scripts into pages whose URL matches that pattern.</li> <li>
<strong>Programmatically</strong>: Using a JavaScript API, load a script into the page hosted by a particular tab.</li> </ul> <p>Either way, these scripts are called <em>content scripts</em>, and are different from the other scripts that make up an extension:</p> <ul> <li>They only get access to a small subset of the WebExtension APIs.</li> <li>They get direct access to the web page in which they are loaded.</li> <li>They communicate with the rest of the extension using a messaging API.</li> </ul> <p>In this article we'll look at both methods of loading a script.</p>
</div>
<section aria-labelledby="modifying_pages_that_match_a_url_pattern"><h2 id="modifying_pages_that_match_a_url_pattern">Modifying pages that match a URL pattern</h2>
<div class="section-content">
<p>First of all, create a new directory called "modify-page". In that directory, create a file called "manifest.json", with the following contents:</p> <div class="code-example"><pre data-language="json"><span class="token punctuation">{</span>

  <span class="token property">"manifest_version"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"modify-page"</span><span class="token punctuation">,</span>
  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0"</span><span class="token punctuation">,</span>

  <span class="token property">"content_scripts"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">"matches"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"https://developer.mozilla.org/*"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">"js"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"page-eater.js"</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>

<span class="token punctuation">}</span>
</pre></div> <p>The <a href="manifest.json/content_scripts.html"><code>content_scripts</code></a> key is how you load scripts into pages that match URL patterns. In this case, <code>content_scripts</code> instructs the browser to load a script called "page-eater.js" into all pages under <a href="https://developer.mozilla.org/">https://developer.mozilla.org/</a>.</p> <div class="notecard note" id="sect1"> <p><strong>Note:</strong> Since the <code>"js"</code> property of <code>content_scripts</code> is an array, you can use it to inject more than one script into matching pages. If you do this the pages share the same scope, just like multiple scripts loaded by a page, and they are loaded in the order that they are listed in the array.</p> </div> <div class="notecard note" id="sect2"> <p><strong>Note:</strong> The <code>content_scripts</code> key also has a <code>"css"</code> property that you can use to inject CSS stylesheets.</p> </div> <p>Next, create a file called "page-eater.js" inside the "modify-page" directory, and give it the following contents:</p> <div class="code-example"><pre data-language="js">document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> header <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'h1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
header<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">"This page has been eaten"</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>header<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div> <p>Now <a href="https://extensionworkshop.com/documentation/develop/temporary-installation-in-firefox/" target="_blank">install the extension</a>, and visit <a href="https://developer.mozilla.org/">https://developer.mozilla.org/</a>. The page should look like this:</p> <p> <img src="data:image/png;base64,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" alt='developer.mozilla.org page "eaten" by the script' width="1920" height="490" loading="lazy"> </p>
</div></section><section aria-labelledby="modifying_pages_programmatically"><h2 id="modifying_pages_programmatically">Modifying pages programmatically</h2>
<div class="section-content">
<p>What if you still want to eat pages, but only when the user asks you to? Let's update this example so we inject the content script when the user clicks a context menu item.</p> <p>First, update "manifest.json" so it has the following contents:</p> <div class="code-example"><pre data-language="json"><span class="token punctuation">{</span>

  <span class="token property">"manifest_version"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"modify-page"</span><span class="token punctuation">,</span>
  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0"</span><span class="token punctuation">,</span>

  <span class="token property">"permissions"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"activeTab"</span><span class="token punctuation">,</span>
    <span class="token string">"contextMenus"</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>

  <span class="token property">"background"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"background.js"</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</pre></div> <p>Here, we've removed the <code>content_scripts</code> key, and added two new keys:</p> <ul> <li>
<a href="manifest.json/permissions.html"><code>permissions</code></a>: To inject scripts into pages we need permissions for the page we're modifying. The <a href="manifest.json/permissions.html#activetab_permission"><code>activeTab</code> permission</a> is a way to get this temporarily for the currently active tab. We also need the <code>contextMenus</code> permission to be able to add context menu items.</li> <li>
<a href="manifest.json/background.html"><code>background</code></a>: We're using this to load a persistent <a href="anatomy_of_a_webextension.html#background_scripts">"background script"</a> called <code>background.js</code>, in which we'll set up the context menu and inject the content script.</li> </ul> <p>Let's create this file. Create a new file called <code>background.js</code> in the <code>modify-page</code> directory, and give it the following contents:</p> <div class="code-example"><pre data-language="js">browser<span class="token punctuation">.</span>contextMenus<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">"eat-page"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">"Eat this page"</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

browser<span class="token punctuation">.</span>contextMenus<span class="token punctuation">.</span>onClicked<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">info<span class="token punctuation">,</span> tab</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>info<span class="token punctuation">.</span>menuItemId <span class="token operator">===</span> <span class="token string">"eat-page"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    browser<span class="token punctuation">.</span>tabs<span class="token punctuation">.</span><span class="token function">executeScript</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">file</span><span class="token operator">:</span> <span class="token string">"page-eater.js"</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div> <p>In this script we're creating a <a href="api/menus/create.html">context menu item</a>, giving it a specific id and title (the text to be displayed in the context menu). Then we set up an event listener so that when the user clicks a context menu item, we check to see if it is our <code>eat-page</code> item. If it is, we inject "page-eater.js" into the current tab using the <a href="api/tabs/executescript.html"><code>tabs.executeScript()</code></a> API. This API optionally takes a tab ID as an argument: we've omitted the tab ID, which means that the script is injected into the currently active tab.</p> <p>At this point the extension should look like this:</p> <div class="code-example"><pre data-language="plain">modify-page/
    background.js
    manifest.json
    page-eater.js
</pre></div> <p>Now <a href="https://extensionworkshop.com/documentation/develop/temporary-installation-in-firefox/#reloading_a_temporary_add-on" target="_blank">reload the extension</a>, open a page (any page, this time) activate the context menu, and select "Eat this page":</p> <p> <img src="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Modify_a_web_page/eat_from_menu.png" alt="Option to eat a page on the context menu" width="1920" height="1186" loading="lazy"> </p>
</div></section><section aria-labelledby="messaging"><h2 id="messaging">Messaging</h2>
<div class="section-content">
<p>Content scripts and background scripts can't directly access each other's state. However, they can communicate by sending messages. One end sets up a message listener, and the other end can then send it a message. The following table summarizes the APIs involved on each side:</p> <figure class="table-container"><div class="_table"><table class="fullwidth-table standard-table"> <thead> <tr> <th scope="row"></th> <th scope="col">In content script</th> <th scope="col">In background script</th> </tr> <tr> <th scope="row">Send a message</th> <td><code><a href="api/runtime.html#sendmessage()">browser.runtime.sendMessage()</a></code></td> <td><code><a href="api/tabs/sendmessage.html">browser.tabs.sendMessage()</a></code></td> </tr> <tr> <th scope="row">Receive a message</th> <td><code><a href="api/runtime/onmessage.html">browser.runtime.onMessage</a></code></td> <td><code><a href="api/runtime.html#onmessage">browser.runtime.onMessage</a></code></td> </tr> </thead> </table></div></figure> <div class="notecard note" id="sect3"> <p><strong>Note:</strong> In addition to this method of communication, which sends one-off messages, you can also use a <a href="content_scripts.html#connection-based_messaging">connection-based approach to exchange messages</a>. For advice on choosing between the options, see <a href="content_scripts.html#choosing_between_one-off_messages_and_connection-based_messaging">Choosing between one-off messages and connection-based messaging</a>.</p> </div> <p>Let's update our example to show how to send a message from the background script.</p> <p>First, edit <code>background.js</code> so that it has these contents:</p> <div class="code-example"><pre data-language="js">browser<span class="token punctuation">.</span>contextMenus<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">"eat-page"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">"Eat this page"</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">messageTab</span><span class="token punctuation">(</span><span class="token parameter">tabs</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  browser<span class="token punctuation">.</span>tabs<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>tabs<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">replacement</span><span class="token operator">:</span> <span class="token string">"Message from the extension!"</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">onExecuted</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> querying <span class="token operator">=</span> browser<span class="token punctuation">.</span>tabs<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">active</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">currentWindow</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    querying<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>messageTab<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

browser<span class="token punctuation">.</span>contextMenus<span class="token punctuation">.</span>onClicked<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">info<span class="token punctuation">,</span> tab</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>info<span class="token punctuation">.</span>menuItemId <span class="token operator">===</span> <span class="token string">"eat-page"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> executing <span class="token operator">=</span> browser<span class="token punctuation">.</span>tabs<span class="token punctuation">.</span><span class="token function">executeScript</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">file</span><span class="token operator">:</span> <span class="token string">"page-eater.js"</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    executing<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>onExecuted<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div> <p>Now, after injecting <code>page-eater.js</code>, we use <a href="api/tabs/query.html"><code>tabs.query()</code></a> to get the currently active tab, and then use <a href="api/tabs/sendmessage.html"><code>tabs.sendMessage()</code></a> to send a message to the content scripts loaded into that tab. The message has the payload <code>{replacement: "Message from the extension!"}</code>.</p> <p>Next, update <code>page-eater.js</code> like this:</p> <div class="code-example"><pre data-language="js"><span class="token keyword">function</span> <span class="token function">eatPageReceiver</span><span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> sender<span class="token punctuation">,</span> sendResponse</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> header <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'h1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  header<span class="token punctuation">.</span>textContent <span class="token operator">=</span> request<span class="token punctuation">.</span>replacement<span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>header<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
browser<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span>onMessage<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span>eatPageReceiver<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div> <p>Now, instead of just eating the page right away, the content script listens for a message using <a href="api/runtime/onmessage.html"><code>runtime.onMessage</code></a>. When a message arrives, the content script runs essentially the same code as before, except that the replacement text is taken from <code>request.replacement</code>.</p> <p>Since <a href="api/tabs/executescript.html"><code>tabs.executeScript()</code></a> is an asynchronous function, and to ensure we send message only after listener has been added in <code>page-eater.js</code>, we use <code>onExecuted()</code> which will be called after <code>page-eater.js</code> executed.</p> <div class="notecard note" id="sect4"> <p><strong>Note:</strong> Press <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>J</kbd> (or <kbd>Cmd</kbd>+<kbd>Shift</kbd>+<kbd>J</kbd> on macOS) OR <code>web-ext run --bc</code> to open <a href="https://firefox-source-docs.mozilla.org/devtools-user/browser_console/index.html" target="_blank">Browser Console</a> to view <code>console.log</code> in background script.</p> <p>Alternatively, use <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/Add-on_Debugger" class="page-not-created">Add-on Debugger</a> which allows you set breakpoint. There is currently no way to <a href="https://github.com/mozilla/web-ext/issues/759" target="_blank">start Add-on Debugger directly from web-ext</a>.</p> </div> <p>If we want send messages back from the content script to the background page, we would use <a href="api/runtime/sendmessage.html"><code>runtime.sendMessage()</code></a> instead of <a href="api/tabs/sendmessage.html"><code>tabs.sendMessage()</code></a>, e.g.:</p> <div class="code-example"><pre data-language="js">browser<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">"from page-eater.js"</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div> <div class="notecard note" id="sect5"> <p><strong>Note:</strong> These examples all inject JavaScript; you can also inject CSS programmatically using the <a href="api/tabs/insertcss.html"><code>tabs.insertCSS()</code></a> function.</p> </div>
</div></section><section aria-labelledby="learn_more"><h2 id="learn_more">Learn more</h2>
<div class="section-content"><ul> <li>
<a href="content_scripts.html">Content scripts</a> guide</li> <li>
<a href="manifest.json/content_scripts.html"><code>content_scripts</code></a> manifest key</li> <li>
<a href="manifest.json/permissions.html"><code>permissions</code></a> manifest key</li> <li><a href="api/tabs/executescript.html"><code>tabs.executeScript()</code></a></li> <li><a href="api/tabs/insertcss.html"><code>tabs.insertCSS()</code></a></li> <li><a href="api/tabs/sendmessage.html"><code>tabs.sendMessage()</code></a></li> <li><a href="api/runtime/sendmessage.html"><code>runtime.sendMessage()</code></a></li> <li><a href="api/runtime/onmessage.html"><code>runtime.onMessage</code></a></li> <li>Examples using <code>content_scripts</code>: <ul> <li><a href="https://github.com/mdn/webextensions-examples/tree/master/borderify" target="_blank">borderify</a></li> <li><a href="https://github.com/mdn/webextensions-examples/tree/master/emoji-substitution" target="_blank">emoji-substitution</a></li> <li><a href="https://github.com/mdn/webextensions-examples/tree/master/notify-link-clicks-i18n" target="_blank">notify-link-clicks-i18n</a></li> <li><a href="https://github.com/mdn/webextensions-examples/tree/master/page-to-extension-messaging" target="_blank">page-to-extension-messaging</a></li> </ul> </li> <li>Examples using <code>tabs.executeScript()</code>: <ul> <li><a href="https://github.com/mdn/webextensions-examples/tree/master/beastify" target="_blank">beastify</a></li> <li><a href="https://github.com/mdn/webextensions-examples/tree/master/context-menu-copy-link-with-types" target="_blank">context-menu-copy-link-with-types</a></li> </ul> </li> </ul></div></section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Modify_a_web_page" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Modify_a_web_page</a>
  </p>
</div>
