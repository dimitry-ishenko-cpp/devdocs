  <h1 class="section">DESTDIR: Support for Staged Installs</h1>    <p><code>DESTDIR</code> is a variable prepended to each installed target file, like this: </p> <div class="example"> <pre class="example">$(INSTALL_PROGRAM) foo $(DESTDIR)$(bindir)/foo
$(INSTALL_DATA) libfoo.a $(DESTDIR)$(libdir)/libfoo.a
</pre>
</div> <p>The <code>DESTDIR</code> variable is specified by the user on the <code>make</code> command line as an absolute file name. For example: </p> <div class="example"> <pre class="example">make DESTDIR=/tmp/stage install
</pre>
</div> <p><code>DESTDIR</code> should be supported only in the <code>install*</code> and <code>uninstall*</code> targets, as those are the only targets where it is useful. </p> <p>If your installation step would normally install <samp>/usr/local/bin/foo</samp> and <samp>/usr/local/lib/libfoo.a</samp>, then an installation invoked as in the example above would install <samp>/tmp/stage/usr/local/bin/foo</samp> and <samp>/tmp/stage/usr/local/lib/libfoo.a</samp> instead. </p> <p>Prepending the variable <code>DESTDIR</code> to each target in this way provides for <em>staged installs</em>, where the installed files are not placed directly into their expected location but are instead copied into a temporary location (<code>DESTDIR</code>). However, installed files maintain their relative directory structure and any embedded file names will not be modified. </p> <p>You should not set the value of <code>DESTDIR</code> in your <samp>Makefile</samp> at all; then the files are installed into their expected locations by default. Also, specifying <code>DESTDIR</code> should not change the operation of the software in any way, so its value should not be included in any file contents. </p> <p><code>DESTDIR</code> support is commonly used in package creation. It is also helpful to users who want to understand what a given package will install where, and to allow users who don’t normally have permissions to install into protected areas to build and install before gaining those permissions. Finally, it can be useful with tools such as <code>stow</code>, where code is installed in one place but made to appear to be installed somewhere else using symbolic links or special mount operations. So, we strongly recommend GNU packages support <code>DESTDIR</code>, though it is not an absolute requirement. </p><div class="_attribution">
  <p class="_attribution-p">
    Copyright © 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022 Free Software Foundation, Inc. <br>Licensed under the GNU Free Documentation License.<br>
    <a href="https://www.gnu.org/software/make/manual/html_node/DESTDIR.html" class="_attribution-link">https://www.gnu.org/software/make/manual/html_node/DESTDIR.html</a>
  </p>
</div>
