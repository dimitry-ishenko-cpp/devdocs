  <h1 class="subsection">Introduction to Pattern Rules</h1>   <p>A pattern rule contains the character ‘<samp>%</samp>’ (exactly one of them) in the target; otherwise, it looks exactly like an ordinary rule. The target is a pattern for matching file names; the ‘<samp>%</samp>’ matches any nonempty substring, while other characters match only themselves.   </p> <p>For example, ‘<samp>%.c</samp>’ as a pattern matches any file name that ends in ‘<samp>.c</samp>’. ‘<samp>s.%.c</samp>’ as a pattern matches any file name that starts with ‘<samp>s.</samp>’, ends in ‘<samp>.c</samp>’ and is at least five characters long. (There must be at least one character to match the ‘<samp>%</samp>’.) The substring that the ‘<samp>%</samp>’ matches is called the <em>stem</em>. </p> <p>‘<samp>%</samp>’ in a prerequisite of a pattern rule stands for the same stem that was matched by the ‘<samp>%</samp>’ in the target. In order for the pattern rule to apply, its target pattern must match the file name under consideration and all of its prerequisites (after pattern substitution) must name files that exist or can be made. These files become prerequisites of the target.  </p> <p>Thus, a rule of the form </p> <div class="example"> <pre class="example">%.o : %.c ; <var>recipe</var>…
</pre>
</div> <p>specifies how to make a file <samp><var>n</var>.o</samp>, with another file <samp><var>n</var>.c</samp> as its prerequisite, provided that <samp><var>n</var>.c</samp> exists or can be made. </p> <p>There may also be prerequisites that do not use ‘<samp>%</samp>’; such a prerequisite attaches to every file made by this pattern rule. These unvarying prerequisites are useful occasionally. </p> <p>A pattern rule need not have any prerequisites that contain ‘<samp>%</samp>’, or in fact any prerequisites at all. Such a rule is effectively a general wildcard. It provides a way to make any file that matches the target pattern. See <a href="last-resort.html">Last Resort</a>. </p> <p>More than one pattern rule may match a target. In this case <code>make</code> will choose the “best fit” rule. See <a href="pattern-match.html">How Patterns Match</a>. </p>   <p>Pattern rules may have more than one target; however, every target must contain a <code>%</code> character. Multiple target patterns in pattern rules are always treated as grouped targets (see <a href="multiple-targets.html">Multiple Targets in a Rule</a>) regardless of whether they use the <code>:</code> or <code>&amp;:</code> separator. </p> <p>There is one exception: if a pattern target is out of date or does not exist and the makefile does not need to build it, then it will not cause the other targets to be considered out of date. Note that this historical exception will be removed in future versions of GNU <code>make</code> and should not be relied on. If this situation is detected <code>make</code> will generate a warning <em>pattern recipe did not update peer target</em>; however, <code>make</code> cannot detect all such situations. Please be sure that your recipe updates <em>all</em> the target patterns when it runs. </p><div class="_attribution">
  <p class="_attribution-p">
    Copyright © 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022 Free Software Foundation, Inc. <br>Licensed under the GNU Free Documentation License.<br>
    <a href="https://www.gnu.org/software/make/manual/html_node/Pattern-Intro.html" class="_attribution-link">https://www.gnu.org/software/make/manual/html_node/Pattern-Intro.html</a>
  </p>
</div>
