<h1 class="break-words">NextRequest</h1> <p>NextRequest extends the <a href="https://developer.mozilla.org/docs/Web/API/Request" rel="noopener noreferrer nofollow" target="_blank">Web Request API</a> with additional convenience methods.</p> <h2 id="cookies" data-docs-heading="">cookies     </h2> <p>Read or mutate the <a href="https://developer.mozilla.org/docs/Web/HTTP/Headers/Set-Cookie" rel="noopener noreferrer nofollow" target="_blank"><code>Set-Cookie</code></a> header of the request.</p> <h3 id="setname-value" data-docs-heading="">set(name, value)     </h3> <p>Given a name, set a cookie with the given value on the request.</p> <div class="code-block_wrapper__t6FCO not-prose">
<pre class="code-block_pre___OLfy" data-language="typescript">// Given incoming request /home
// Set a cookie to hide the banner
// request will have a `Set-Cookie:show-banner=false;path=/home` header
request.cookies.set('show-banner', 'false')</pre>
</div> <h3 id="getname" data-docs-heading="">get(name)     </h3> <p>Given a cookie name, return the value of the cookie. If the cookie is not found, <code>undefined</code> is returned. If multiple cookies are found, the first one is returned.</p> <div class="code-block_wrapper__t6FCO not-prose">
<pre class="code-block_pre___OLfy" data-language="typescript">// Given incoming request /home
// { name: 'show-banner', value: 'false', Path: '/home' }
request.cookies.get('show-banner')</pre>
</div> <h3 id="getall" data-docs-heading="">getAll()     </h3> <p>Given a cookie name, return the values of the cookie. If no name is given, return all cookies on the request.</p> <div class="code-block_wrapper__t6FCO not-prose">
<pre class="code-block_pre___OLfy" data-language="typescript">// Given incoming request /home
// [
//   { name: 'experiments', value: 'new-pricing-page', Path: '/home' },
//   { name: 'experiments', value: 'winter-launch', Path: '/home' },
// ]
request.cookies.getAll('experiments')
// Alternatively, get all cookies for the request
request.cookies.getAll()</pre>
</div> <h3 id="deletename" data-docs-heading="">delete(name)     </h3> <p>Given a cookie name, delete the cookie from the request.</p> <div class="code-block_wrapper__t6FCO not-prose">
<pre class="code-block_pre___OLfy" data-language="typescript">// Returns true for deleted, false is nothing is deleted
request.cookies.delete('experiments')</pre>
</div> <h3 id="hasname" data-docs-heading="">has(name)     </h3> <p>Given a cookie name, return <code>true</code> if the cookie exists on the request.</p> <div class="code-block_wrapper__t6FCO not-prose">
<pre class="code-block_pre___OLfy" data-language="typescript">// Returns true if cookie exists, false if it does not
request.cookies.has('experiments')</pre>
</div> <h3 id="clear" data-docs-heading="">clear()     </h3> <p>Remove the <code>Set-Cookie</code> header from the request.</p> <div class="code-block_wrapper__t6FCO code-block_hideLineNumbers__52YKH not-prose">
<pre class="code-block_pre___OLfy" data-language="typescript">request.cookies.clear()</pre>
</div> <h2 id="nexturl" data-docs-heading="">nextUrl     </h2> <p>Extends the native <a href="https://developer.mozilla.org/docs/Web/API/URL" rel="noopener noreferrer nofollow" target="_blank"><code>URL</code></a> API with additional convenience methods, including Next.js specific properties.</p> <div class="code-block_wrapper__t6FCO not-prose">
<pre class="code-block_pre___OLfy" data-language="typescript">// Given a request to /home, pathname is /home
request.nextUrl.pathname
// Given a request to /home?name=lee, searchParams is { 'name': 'lee' }
request.nextUrl.searchParams</pre>
</div> <p>The following options are available:</p>  <div class="overflow-x-auto"><table class="w-full table-auto">
<thead><tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td><code>basePath</code></td>
<td><code>string</code></td>
<td>The <a href="../next-config-js/basepath.html">base path</a> of the URL.</td>
</tr>
<tr>
<td><code>buildId</code></td>
<td>
<code>string</code> | <code>undefined</code>
</td>
<td>The build identifier of the Next.js application. Can be <a href="../next-config-js/generatebuildid.html">customized</a>.</td>
</tr>
<tr>
<td><code>pathname</code></td>
<td><code>string</code></td>
<td>The pathname of the URL.</td>
</tr>
<tr>
<td><code>searchParams</code></td>
<td><code>Object</code></td>
<td>The search parameters of the URL.</td>
</tr>
</tbody>
</table></div>
<blockquote class="p-3 text-sm"> <p><strong>Note:</strong> The internationalization properties from the Pages Router are not available for usage in the App Router. Learn more about <a href="../../building-your-application/routing/internationalization.html">internationalization with the App Router</a>.</p> </blockquote> <h2 id="ip" data-docs-heading="">ip     </h2> <p>The <code>ip</code> property is a string that contains the IP address of the request. This value can optionally be provided by your hosting platform.</p> <blockquote class="p-3 text-sm"> <p><strong>Good to know:</strong> On <a href="https://vercel.com/docs/frameworks/nextjs?utm_source=next-site&amp;utm_medium=docs&amp;utm_campaign=next-website" rel="noopener noreferrer" target="_blank">Vercel</a>, this value is provided by default. On other platforms, you can use the <a href="https://developer.mozilla.org/docs/Web/HTTP/Headers/X-Forwarded-For" rel="noopener noreferrer nofollow" target="_blank"><code>X-Forwarded-For</code></a> header to provide the IP address.</p> </blockquote> <div class="code-block_wrapper__t6FCO not-prose">
<pre class="code-block_pre___OLfy" data-language="typescript">// Provided by Vercel
request.ip
// Self-hosting
request.headers.get('X-Forwarded-For')</pre>
</div> <h2 id="geo" data-docs-heading="">geo     </h2> <p>The <code>geo</code> property is an object that contains the geographic information of the request. This value can optionally be provided by your hosting platform.</p> <blockquote class="p-3 text-sm"> <p><strong>Good to know:</strong> On <a href="https://vercel.com/docs/frameworks/nextjs?utm_source=next-site&amp;utm_medium=docs&amp;utm_campaign=next-website" rel="noopener noreferrer" target="_blank">Vercel</a>, this value is provided by default. On other platforms, you can use the <a href="https://developer.mozilla.org/docs/Web/HTTP/Headers/X-Forwarded-For" rel="noopener noreferrer nofollow" target="_blank"><code>X-Forwarded-For</code></a> header to provide the IP address, then use a <a href="https://ip-api.com/" rel="noopener noreferrer nofollow" target="_blank">third-party service</a> to lookup the geographic information.</p> </blockquote> <div class="code-block_wrapper__t6FCO not-prose">
<pre class="code-block_pre___OLfy" data-language="typescript">// Provided by Vercel
request.geo.city
request.geo.country
request.geo.region
request.geo.latitude
request.geo.longitude
 
// Self-hosting
function getGeo(request) {
  let ip = request.headers.get('X-Forwarded-For')
  // Use a third-party service to lookup the geographic information
}</pre>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2024 Vercel, Inc.<br>Licensed under the MIT License.<br>
    <a href="https://nextjs.org/docs/app/api-reference/functions/next-request" class="_attribution-link">https://nextjs.org/docs/app/api-reference/functions/next-request</a>
  </p>
</div>
