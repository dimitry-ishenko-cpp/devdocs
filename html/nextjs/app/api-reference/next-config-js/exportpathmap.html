<h1 class="break-words">exportPathMap (Deprecated)</h1> <blockquote class="p-3 text-sm"> <p>This feature is exclusive to <code>next export</code> and currently <strong>deprecated</strong> in favor of <code>getStaticPaths</code> with <code>pages</code> or <code>generateStaticParams</code> with <code>app</code>.</p> </blockquote> <details><summary>Examples</summary><ul> <li><a href="https://github.com/vercel/next.js/tree/canary/examples/with-static-export" rel="noopener noreferrer" target="_blank">Static Export</a></li> </ul></details> <p><code>exportPathMap</code> allows you to specify a mapping of request paths to page destinations, to be used during export. Paths defined in <code>exportPathMap</code> will also be available when using <a href="../next-cli.html#development"><code>next dev</code></a>.</p> <p>Let's start with an example, to create a custom <code>exportPathMap</code> for an app with the following pages:</p> <ul> <li><code>pages/index.js</code></li> <li><code>pages/about.js</code></li> <li><code>pages/post.js</code></li> </ul> <p>Open <code>next.config.js</code> and add the following <code>exportPathMap</code> config:</p> <div class="code-block_wrapper__t6FCO code-block_hasFileName__ezlBD not-prose"><pre class="code-block_pre___OLfy" data-language="typescript">module.exports = {
  exportPathMap: async function (
    defaultPathMap,
    { dev, dir, outDir, distDir, buildId }
  ) {
    return {
      '/': { page: '/' },
      '/about': { page: '/about' },
      '/p/hello-nextjs': { page: '/post', query: { title: 'hello-nextjs' } },
      '/p/learn-nextjs': { page: '/post', query: { title: 'learn-nextjs' } },
      '/p/deploy-nextjs': { page: '/post', query: { title: 'deploy-nextjs' } },
    }
  },
}</pre></div> <blockquote class="p-3 text-sm"> <p><strong>Good to know</strong>: the <code>query</code> field in <code>exportPathMap</code> cannot be used with <a href="../../../pages/building-your-application/rendering/automatic-static-optimization.html">automatically statically optimized pages</a> or <a href="../../../pages/building-your-application/data-fetching/get-static-props.html"><code>getStaticProps</code> pages</a> as they are rendered to HTML files at build-time and additional query information cannot be provided during <code>next export</code>.</p> </blockquote> <p>The pages will then be exported as HTML files, for example, <code>/about</code> will become <code>/about.html</code>.</p> <p><code>exportPathMap</code> is an <code>async</code> function that receives 2 arguments: the first one is <code>defaultPathMap</code>, which is the default map used by Next.js. The second argument is an object with:</p> <ul> <li>
<code>dev</code> - <code>true</code> when <code>exportPathMap</code> is being called in development. <code>false</code> when running <code>next export</code>. In development <code>exportPathMap</code> is used to define routes.</li> <li>
<code>dir</code> - Absolute path to the project directory</li> <li>
<code>outDir</code> - Absolute path to the <code>out/</code> directory (<a href="#customizing-the-output-directory">configurable with <code>-o</code></a>). When <code>dev</code> is <code>true</code> the value of <code>outDir</code> will be <code>null</code>.</li> <li>
<code>distDir</code> - Absolute path to the <code>.next/</code> directory (configurable with the <a href="../../../pages/api-reference/next-config-js/distdir.html"><code>distDir</code></a> config)</li> <li>
<code>buildId</code> - The generated build id</li> </ul> <p>The returned object is a map of pages where the <code>key</code> is the <code>pathname</code> and the <code>value</code> is an object that accepts the following fields:</p> <ul> <li>
<code>page</code>: <code>String</code> - the page inside the <code>pages</code> directory to render</li> <li>
<code>query</code>: <code>Object</code> - the <code>query</code> object passed to <code>getInitialProps</code> when prerendering. Defaults to <code>{}</code>
</li> </ul> <blockquote class="p-3 text-sm"> <p>The exported <code>pathname</code> can also be a filename (for example, <code>/readme.md</code>), but you may need to set the <code>Content-Type</code> header to <code>text/html</code> when serving its content if it is different than <code>.html</code>.</p> </blockquote> <h2 id="adding-a-trailing-slash" data-docs-heading="">Adding a trailing slash     </h2> <p>It is possible to configure Next.js to export pages as <code>index.html</code> files and require trailing slashes, <code>/about</code> becomes <code>/about/index.html</code> and is routable via <code>/about/</code>. This was the default behavior prior to Next.js 9.</p> <p>To switch back and add a trailing slash, open <code>next.config.js</code> and enable the <code>trailingSlash</code> config:</p> <div class="code-block_wrapper__t6FCO code-block_hasFileName__ezlBD not-prose"><pre class="code-block_pre___OLfy" data-language="typescript">module.exports = {
  trailingSlash: true,
}</pre></div> <h2 id="customizing-the-output-directory" data-docs-heading="">Customizing the output directory     </h2> <p><a href="../../building-your-application/deploying/static-exports.html"><code>next export</code></a> will use <code>out</code> as the default output directory, you can customize this using the <code>-o</code> argument, like so:</p>  <div class="code-block_wrapper__t6FCO code-block_hasFileName__ezlBD code-block_hideLineNumbers__52YKH not-prose"><pre class="code-block_pre___OLfy" data-language="typescript">next export -o outdir</pre></div> <blockquote class="p-3 text-sm"> <p><strong>Warning</strong>: Using <code>exportPathMap</code> is deprecated and is overridden by <code>getStaticPaths</code> inside <code>pages</code>. We don't recommend using them together.</p> </blockquote><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2024 Vercel, Inc.<br>Licensed under the MIT License.<br>
    <a href="https://nextjs.org/docs/app/api-reference/next-config-js/exportPathMap" class="_attribution-link">https://nextjs.org/docs/app/api-reference/next-config-js/exportPathMap</a>
  </p>
</div>
