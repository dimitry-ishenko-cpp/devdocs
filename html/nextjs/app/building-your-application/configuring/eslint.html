<h1 class="break-words">ESLint</h1> <p>Next.js provides an integrated <a href="https://eslint.org/" rel="noopener noreferrer nofollow" target="_blank">ESLint</a> experience out of the box. Add <code>next lint</code> as a script to <code>package.json</code>:</p> <div class="code-block_wrapper__t6FCO code-block_hasFileName__ezlBD not-prose"><pre class="code-block_pre___OLfy" data-language="typescript">{
  "scripts": {
    "lint": "next lint"
  }
}</pre></div> <p>Then run <code>npm run lint</code> or <code>yarn lint</code>:</p> <div class="code-block_wrapper__t6FCO code-block_hasFileName__ezlBD code-block_hideLineNumbers__52YKH not-prose"><pre class="code-block_pre___OLfy" data-language="typescript">yarn lint</pre></div> <p>If you don't already have ESLint configured in your application, you will be guided through the installation and configuration process.</p> <div class="code-block_wrapper__t6FCO code-block_hasFileName__ezlBD code-block_hideLineNumbers__52YKH not-prose"><pre class="code-block_pre___OLfy" data-language="typescript">yarn lint</pre></div> <blockquote class="p-3 text-sm"> <p>You'll see a prompt like this:</p> <p>? How would you like to configure ESLint?</p> <p>‚ùØ Strict (recommended)<br> Base<br> Cancel</p> </blockquote> <p>One of the following three options can be selected:</p> <ul> <li> <p><strong>Strict</strong>: Includes Next.js' base ESLint configuration along with a stricter <a href="#core-web-vitals">Core Web Vitals rule-set</a>. This is the recommended configuration for developers setting up ESLint for the first time.</p> <div class="code-block_wrapper__t6FCO code-block_hasFileName__ezlBD not-prose"><pre class="code-block_pre___OLfy" data-language="typescript">{
  "extends": "next/core-web-vitals"
}</pre></div> </li> <li> <p><strong>Base</strong>: Includes Next.js' base ESLint configuration.</p> <div class="code-block_wrapper__t6FCO code-block_hasFileName__ezlBD not-prose"><pre class="code-block_pre___OLfy" data-language="typescript">{
  "extends": "next"
}</pre></div> </li> <li> <p><strong>Cancel</strong>: Does not include any ESLint configuration. Only select this option if you plan on setting up your own custom ESLint configuration.</p> </li> </ul> <p>If either of the two configuration options are selected, Next.js will automatically install <code>eslint</code> and <code>eslint-config-next</code> as dependencies in your application and create an <code>.eslintrc.json</code> file in the root of your project that includes your selected configuration.</p> <p>You can now run <code>next lint</code> every time you want to run ESLint to catch errors. Once ESLint has been set up, it will also automatically run during every build (<code>next build</code>). Errors will fail the build, while warnings will not.</p> <blockquote class="p-3 text-sm"> <p>If you do not want ESLint to run during <code>next build</code>, refer to the documentation for <a href="../../api-reference/next-config-js/eslint.html">Ignoring ESLint</a>.</p> </blockquote>  <p>We recommend using an appropriate <a href="https://eslint.org/docs/user-guide/integrations#editors" rel="noopener noreferrer nofollow" target="_blank">integration</a> to view warnings and errors directly in your code editor during development.</p> <h2 id="eslint-config" data-docs-heading="">ESLint Config     </h2> <p>The default configuration (<code>eslint-config-next</code>) includes everything you need to have an optimal out-of-the-box linting experience in Next.js. If you do not have ESLint already configured in your application, we recommend using <code>next lint</code> to set up ESLint along with this configuration.</p> <blockquote class="p-3 text-sm"> <p>If you would like to use <code>eslint-config-next</code> along with other ESLint configurations, refer to the <a href="#additional-configurations">Additional Configurations</a> section to learn how to do so without causing any conflicts.</p> </blockquote> <p>Recommended rule-sets from the following ESLint plugins are all used within <code>eslint-config-next</code>:</p> <ul> <li><a href="https://www.npmjs.com/package/eslint-plugin-react" rel="noopener noreferrer nofollow" target="_blank"><code>eslint-plugin-react</code></a></li> <li><a href="https://www.npmjs.com/package/eslint-plugin-react-hooks" rel="noopener noreferrer nofollow" target="_blank"><code>eslint-plugin-react-hooks</code></a></li> <li><a href="https://www.npmjs.com/package/@next/eslint-plugin-next" rel="noopener noreferrer nofollow" target="_blank"><code>eslint-plugin-next</code></a></li> </ul> <p>This will take precedence over the configuration from <code>next.config.js</code>.</p> <h2 id="eslint-plugin" data-docs-heading="">ESLint Plugin     </h2> <p>Next.js provides an ESLint plugin, <a href="https://www.npmjs.com/package/@next/eslint-plugin-next" rel="noopener noreferrer nofollow" target="_blank"><code>eslint-plugin-next</code></a>, already bundled within the base configuration that makes it possible to catch common issues and problems in a Next.js application. The full set of rules is as follows:</p> <p> Enabled in the recommended configuration</p> <div class="overflow-x-auto"><table class="w-full table-auto">
<thead><tr>
<th align="center"></th>
<th>Rule</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td align="center"></td>
<td><a href="../../../messages/google-font-display.html">@next/next/google-font-display</a></td>
<td>Enforce font-display behavior with Google Fonts.</td>
</tr>
<tr>
<td align="center"></td>
<td><a href="../../../messages/google-font-preconnect.html">@next/next/google-font-preconnect</a></td>
<td>Ensure <code>preconnect</code> is used with Google Fonts.</td>
</tr>
<tr>
<td align="center"></td>
<td><a href="../../../messages/inline-script-id.html">@next/next/inline-script-id</a></td>
<td>Enforce <code>id</code> attribute on <code>next/script</code> components with inline content.</td>
</tr>
<tr>
<td align="center"></td>
<td><a href="../../../messages/next-script-for-ga.html">@next/next/next-script-for-ga</a></td>
<td>Prefer <code>next/script</code> component when using the inline script for Google Analytics.</td>
</tr>
<tr>
<td align="center"></td>
<td><a href="../../../messages/no-assign-module-variable.html">@next/next/no-assign-module-variable</a></td>
<td>Prevent assignment to the <code>module</code> variable.</td>
</tr>
<tr>
<td align="center"></td>
<td><a href="../../../messages/no-async-client-component.html">@next/next/no-async-client-component</a></td>
<td>Prevent client components from being async functions.</td>
</tr>
<tr>
<td align="center"></td>
<td><a href="../../../messages/no-before-interactive-script-outside-document.html">@next/next/no-before-interactive-script-outside-document</a></td>
<td>Prevent usage of <code>next/script</code>'s <code>beforeInteractive</code> strategy outside of <code>pages/_document.js</code>.</td>
</tr>
<tr>
<td align="center"></td>
<td><a href="../../../messages/no-css-tags.html">@next/next/no-css-tags</a></td>
<td>Prevent manual stylesheet tags.</td>
</tr>
<tr>
<td align="center"></td>
<td><a href="../../../messages/no-document-import-in-page.html">@next/next/no-document-import-in-page</a></td>
<td>Prevent importing <code>next/document</code> outside of <code>pages/_document.js</code>.</td>
</tr>
<tr>
<td align="center"></td>
<td><a href="../../../messages/no-duplicate-head.html">@next/next/no-duplicate-head</a></td>
<td>Prevent duplicate usage of <code>&lt;Head&gt;</code> in <code>pages/_document.js</code>.</td>
</tr>
<tr>
<td align="center"></td>
<td><a href="../../../messages/no-head-element.html">@next/next/no-head-element</a></td>
<td>Prevent usage of <code>&lt;head&gt;</code> element.</td>
</tr>
<tr>
<td align="center"></td>
<td><a href="../../../messages/no-head-import-in-document.html">@next/next/no-head-import-in-document</a></td>
<td>Prevent usage of <code>next/head</code> in <code>pages/_document.js</code>.</td>
</tr>
<tr>
<td align="center"></td>
<td><a href="../../../messages/no-html-link-for-pages.html">@next/next/no-html-link-for-pages</a></td>
<td>Prevent usage of <code>&lt;a&gt;</code> elements to navigate to internal Next.js pages.</td>
</tr>
<tr>
<td align="center"></td>
<td><a href="../../../messages/no-img-element.html">@next/next/no-img-element</a></td>
<td>Prevent usage of <code>&lt;img&gt;</code> element due to slower LCP and higher bandwidth.</td>
</tr>
<tr>
<td align="center"></td>
<td><a href="../../../messages/no-page-custom-font.html">@next/next/no-page-custom-font</a></td>
<td>Prevent page-only custom fonts.</td>
</tr>
<tr>
<td align="center"></td>
<td><a href="../../../messages/no-script-component-in-head.html">@next/next/no-script-component-in-head</a></td>
<td>Prevent usage of <code>next/script</code> in <code>next/head</code> component.</td>
</tr>
<tr>
<td align="center"></td>
<td><a href="../../../messages/no-styled-jsx-in-document.html">@next/next/no-styled-jsx-in-document</a></td>
<td>Prevent usage of <code>styled-jsx</code> in <code>pages/_document.js</code>.</td>
</tr>
<tr>
<td align="center"></td>
<td><a href="../../../messages/no-sync-scripts.html">@next/next/no-sync-scripts</a></td>
<td>Prevent synchronous scripts.</td>
</tr>
<tr>
<td align="center"></td>
<td><a href="../../../messages/no-title-in-document-head.html">@next/next/no-title-in-document-head</a></td>
<td>Prevent usage of <code>&lt;title&gt;</code> with <code>Head</code> component from <code>next/document</code>.</td>
</tr>
<tr>
<td align="center"></td>
<td>@next/next/no-typos</td>
<td>Prevent common typos in <a href="../../../pages/building-your-application/data-fetching.html">Next.js's data fetching functions</a>
</td>
</tr>
<tr>
<td align="center"></td>
<td><a href="../../../messages/no-unwanted-polyfillio.html">@next/next/no-unwanted-polyfillio</a></td>
<td>Prevent duplicate polyfills from Polyfill.io.</td>
</tr>
</tbody>
</table></div> <p>If you already have ESLint configured in your application, we recommend extending from this plugin directly instead of including <code>eslint-config-next</code> unless a few conditions are met. Refer to the <a href="#recommended-plugin-ruleset">Recommended Plugin Ruleset</a> to learn more.</p> <h3 id="custom-settings" data-docs-heading="">Custom Settings     </h3> <h4 id="rootdir" data-docs-heading="">rootDir     </h4> <p>If you're using <code>eslint-plugin-next</code> in a project where Next.js isn't installed in your root directory (such as a monorepo), you can tell <code>eslint-plugin-next</code> where to find your Next.js application using the <code>settings</code> property in your <code>.eslintrc</code>:</p> <div class="code-block_wrapper__t6FCO code-block_hasFileName__ezlBD not-prose"><pre class="code-block_pre___OLfy" data-language="typescript">{
  "extends": "next",
  "settings": {
    "next": {
      "rootDir": "packages/my-app/"
    }
  }
}</pre></div> <p><code>rootDir</code> can be a path (relative or absolute), a glob (i.e. <code>"packages/*/"</code>), or an array of paths and/or globs.</p> <h2 id="linting-custom-directories-and-files" data-docs-heading="">Linting Custom Directories and Files     </h2> <p>By default, Next.js will run ESLint for all files in the <code>pages/</code>, <code>app/</code>, <code>components/</code>, <code>lib/</code>, and <code>src/</code> directories. However, you can specify which directories using the <code>dirs</code> option in the <code>eslint</code> config in <code>next.config.js</code> for production builds:</p> <div class="code-block_wrapper__t6FCO code-block_hasFileName__ezlBD not-prose"><pre class="code-block_pre___OLfy" data-language="typescript">module.exports = {
  eslint: {
    dirs: ['pages', 'utils'], // Only run ESLint on the 'pages' and 'utils' directories during production builds (next build)
  },
}</pre></div> <p>Similarly, the <code>--dir</code> and <code>--file</code> flags can be used for <code>next lint</code> to lint specific directories and files:</p> <div class="code-block_wrapper__t6FCO code-block_hasFileName__ezlBD code-block_hideLineNumbers__52YKH not-prose"><pre class="code-block_pre___OLfy" data-language="typescript">next lint --dir pages --dir utils --file bar.js</pre></div> <h2 id="caching" data-docs-heading="">Caching     </h2> <p>To improve performance, information of files processed by ESLint are cached by default. This is stored in <code>.next/cache</code> or in your defined <a href="../../api-reference/next-config-js/distdir.html">build directory</a>. If you include any ESLint rules that depend on more than the contents of a single source file and need to disable the cache, use the <code>--no-cache</code> flag with <code>next lint</code>.</p>  <div class="code-block_wrapper__t6FCO code-block_hasFileName__ezlBD code-block_hideLineNumbers__52YKH not-prose"><pre class="code-block_pre___OLfy" data-language="typescript">next lint --no-cache</pre></div> <h2 id="disabling-rules" data-docs-heading="">Disabling Rules     </h2> <p>If you would like to modify or disable any rules provided by the supported plugins (<code>react</code>, <code>react-hooks</code>, <code>next</code>), you can directly change them using the <code>rules</code> property in your <code>.eslintrc</code>:</p> <div class="code-block_wrapper__t6FCO code-block_hasFileName__ezlBD not-prose"><pre class="code-block_pre___OLfy" data-language="typescript">{
  "extends": "next",
  "rules": {
    "react/no-unescaped-entities": "off",
    "@next/next/no-page-custom-font": "off"
  }
}</pre></div> <h3 id="core-web-vitals" data-docs-heading="">Core Web Vitals     </h3> <p>The <code>next/core-web-vitals</code> rule set is enabled when <code>next lint</code> is run for the first time and the <strong>strict</strong> option is selected.</p> <div class="code-block_wrapper__t6FCO code-block_hasFileName__ezlBD not-prose"><pre class="code-block_pre___OLfy" data-language="typescript">{
  "extends": "next/core-web-vitals"
}</pre></div> <p><code>next/core-web-vitals</code> updates <code>eslint-plugin-next</code> to error on a number of rules that are warnings by default if they affect <a href="https://web.dev/vitals/" rel="noopener noreferrer nofollow" target="_blank">Core Web Vitals</a>.</p> <blockquote class="p-3 text-sm"> <p>The <code>next/core-web-vitals</code> entry point is automatically included for new applications built with <a href="../../api-reference/create-next-app.html">Create Next App</a>.</p> </blockquote> <h2 id="usage-with-other-tools" data-docs-heading="">Usage With Other Tools     </h2> <h3 id="prettier" data-docs-heading="">Prettier     </h3> <p>ESLint also contains code formatting rules, which can conflict with your existing <a href="https://prettier.io/" rel="noopener noreferrer nofollow" target="_blank">Prettier</a> setup. We recommend including <a href="https://github.com/prettier/eslint-config-prettier" rel="noopener noreferrer nofollow" target="_blank">eslint-config-prettier</a> in your ESLint config to make ESLint and Prettier work together.</p> <p>First, install the dependency:</p> <div class="code-block_wrapper__t6FCO code-block_hasFileName__ezlBD not-prose"><pre class="code-block_pre___OLfy" data-language="typescript">npm install --save-dev eslint-config-prettier
 
yarn add --dev eslint-config-prettier
 
pnpm add --save-dev eslint-config-prettier
 
bun add --dev eslint-config-prettier</pre></div> <p>Then, add <code>prettier</code> to your existing ESLint config:</p> <div class="code-block_wrapper__t6FCO code-block_hasFileName__ezlBD not-prose"><pre class="code-block_pre___OLfy" data-language="typescript">{
  "extends": ["next", "prettier"]
}</pre></div> <h3 id="lint-staged" data-docs-heading="">lint-staged     </h3> <p>If you would like to use <code>next lint</code> with <a href="https://github.com/okonet/lint-staged" rel="noopener noreferrer nofollow" target="_blank">lint-staged</a> to run the linter on staged git files, you'll have to add the following to the <code>.lintstagedrc.js</code> file in the root of your project in order to specify usage of the <code>--file</code> flag.</p> <div class="code-block_wrapper__t6FCO code-block_hasFileName__ezlBD not-prose"><pre class="code-block_pre___OLfy" data-language="typescript">const path = require('path')
 
const buildEslintCommand = (filenames) =&gt;
  `next lint --fix --file ${filenames
    .map((f) =&gt; path.relative(process.cwd(), f))
    .join(' --file ')}`
 
module.exports = {
  '*.{js,jsx,ts,tsx}': [buildEslintCommand],
}</pre></div> <h2 id="migrating-existing-config" data-docs-heading="">Migrating Existing Config     </h2> <h3 id="recommended-plugin-ruleset" data-docs-heading="">Recommended Plugin Ruleset     </h3> <p>If you already have ESLint configured in your application and any of the following conditions are true:</p> <ul> <li>You have one or more of the following plugins already installed (either separately or through a different config such as <code>airbnb</code> or <code>react-app</code>): <ul> <li><code>react</code></li> <li><code>react-hooks</code></li> <li><code>jsx-a11y</code></li> <li><code>import</code></li> </ul> </li> <li>You've defined specific <code>parserOptions</code> that are different from how Babel is configured within Next.js (this is not recommended unless you have <a href="../../../pages/building-your-application/configuring/babel.html">customized your Babel configuration</a>)</li> <li>You have <code>eslint-plugin-import</code> installed with Node.js and/or TypeScript <a href="https://github.com/benmosher/eslint-plugin-import#resolvers" rel="noopener noreferrer nofollow" target="_blank">resolvers</a> defined to handle imports</li> </ul> <p>Then we recommend either removing these settings if you prefer how these properties have been configured within <a href="https://github.com/vercel/next.js/blob/canary/packages/eslint-config-next/index.js" rel="noopener noreferrer" target="_blank"><code>eslint-config-next</code></a> or extending directly from the Next.js ESLint plugin instead:</p> <div class="code-block_wrapper__t6FCO not-prose">
<pre class="code-block_pre___OLfy" data-language="typescript">module.exports = {
  extends: [
    //...
    'plugin:@next/next/recommended',
  ],
}</pre>
</div> <p>The plugin can be installed normally in your project without needing to run <code>next lint</code>:</p> <div class="code-block_wrapper__t6FCO code-block_hasFileName__ezlBD not-prose"><pre class="code-block_pre___OLfy" data-language="typescript">npm install --save-dev @next/eslint-plugin-next
 
yarn add --dev @next/eslint-plugin-next
 
pnpm add --save-dev @next/eslint-plugin-next
 
bun add --dev @next/eslint-plugin-next</pre></div> <p>This eliminates the risk of collisions or errors that can occur due to importing the same plugin or parser across multiple configurations.</p> <h3 id="additional-configurations" data-docs-heading="">Additional Configurations     </h3> <p>If you already use a separate ESLint configuration and want to include <code>eslint-config-next</code>, ensure that it is extended last after other configurations. For example:</p> <div class="code-block_wrapper__t6FCO code-block_hasFileName__ezlBD not-prose"><pre class="code-block_pre___OLfy" data-language="typescript">{
  "extends": ["eslint:recommended", "next"]
}</pre></div> <p>The <code>next</code> configuration already handles setting default values for the <code>parser</code>, <code>plugins</code> and <code>settings</code> properties. There is no need to manually re-declare any of these properties unless you need a different configuration for your use case.</p> <p>If you include any other shareable configurations, <strong>you will need to make sure that these properties are not overwritten or modified</strong>. Otherwise, we recommend removing any configurations that share behavior with the <code>next</code> configuration or extending directly from the Next.js ESLint plugin as mentioned above.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2024 Vercel, Inc.<br>Licensed under the MIT License.<br>
    <a href="https://nextjs.org/docs/app/building-your-application/configuring/eslint" class="_attribution-link">https://nextjs.org/docs/app/building-your-application/configuring/eslint</a>
  </p>
</div>
