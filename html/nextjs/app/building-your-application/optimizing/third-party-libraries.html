<h1 class="break-words">Third Party Libraries</h1> <p><strong><code>@next/third-parties</code></strong> is a library that provides a collection of components and utilities that improve the performance and developer experience of loading popular third-party libraries in your Next.js application.</p> <p>All third-party integrations provided by <code>@next/third-parties</code> have been optimized for performance and ease of use.</p> <h2 id="getting-started" data-docs-heading="">Getting Started     </h2> <p>To get started, install the <code>@next/third-parties</code> library:</p> <div class="code-block_wrapper__t6FCO code-block_hasFileName__ezlBD code-block_hideLineNumbers__52YKH not-prose"><pre class="code-block_pre___OLfy" data-language="typescript">npm install @next/third-parties@latest next@latest</pre></div>  <p><code>@next/third-parties</code> is currently an <strong>experimental</strong> library under active development. We recommend installing it with the <strong>latest</strong> or <strong>canary</strong> flags while we work on adding more third-party integrations.</p> <h2 id="google-third-parties" data-docs-heading="">Google Third-Parties     </h2> <p>All supported third-party libraries from Google can be imported from <code>@next/third-parties/google</code>.</p> <h3 id="google-tag-manager" data-docs-heading="">Google Tag Manager     </h3> <p>The <code>GoogleTagManager</code> component can be used to instantiate a <a href="https://developers.google.com/tag-platform/tag-manager" rel="noopener noreferrer nofollow" target="_blank">Google Tag Manager</a> container to your page. By default, it fetches the original inline script after hydration occurs on the page.</p> <p>To load Google Tag Manager for all routes, include the component directly in your root layout and pass in your GTM container ID:</p>
<div class="code-block_wrapper__t6FCO code-block_hasFileName__ezlBD not-prose"><pre class="code-block_pre___OLfy" data-language="typescript">import { GoogleTagManager } from '@next/third-parties/google'
 
export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    &lt;html lang="en"&gt;
      &lt;GoogleTagManager gtmId="GTM-XYZ" /&gt;
      &lt;body&gt;{children}&lt;/body&gt;
    &lt;/html&gt;
  )
}</pre></div>  <p>To load Google Tag Manager for a single route, include the component in your page file:</p> <div class="code-block_wrapper__t6FCO code-block_hasFileName__ezlBD not-prose"><pre class="code-block_pre___OLfy" data-language="typescript">import { GoogleTagManager } from '@next/third-parties/google'
 
export default function Page() {
  return &lt;GoogleTagManager gtmId="GTM-XYZ" /&gt;
}</pre></div>  <h4 id="sending-events" data-docs-heading="">Sending Events     </h4> <p>The <code>sendGTMEvent</code> function can be used to track user interactions on your page by sending events using the <code>dataLayer</code> object. For this function to work, the <code>&lt;GoogleTagManager /&gt;</code> component must be included in either a parent layout, page, or component, or directly in the same file.</p> <div class="code-block_wrapper__t6FCO code-block_hasFileName__ezlBD not-prose"><pre class="code-block_pre___OLfy" data-language="typescript">'use client'
 
import { sendGTMEvent } from '@next/third-parties/google'
 
export function EventButton() {
  return (
    &lt;div&gt;
      &lt;button
        onClick={() =&gt; sendGTMEvent({ event: 'buttonClicked', value: 'xyz' })}
      &gt;
        Send Event
      &lt;/button&gt;
    &lt;/div&gt;
  )
}</pre></div>  <p>Refer to the Tag Manager <a href="https://developers.google.com/tag-platform/tag-manager/datalayer" rel="noopener noreferrer nofollow" target="_blank">developer documentation</a> to learn about the different variables and events that can be passed into the function.</p> <h4 id="options" data-docs-heading="">Options     </h4> <p>Options to pass to the Google Tag Manager. For a full list of options, read the <a href="https://developers.google.com/tag-platform/tag-manager/datalayer" rel="noopener noreferrer nofollow" target="_blank">Google Tag Manager docs</a>.</p> <div class="overflow-x-auto"><table class="w-full table-auto">
<thead><tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td><code>gtmId</code></td>
<td>Required</td>
<td>Your GTM container ID. Usually starts with <code>GTM-</code>.</td>
</tr>
<tr>
<td><code>dataLayer</code></td>
<td>Optional</td>
<td>Data layer array to instantiate the container with. Defaults to an empty array.</td>
</tr>
<tr>
<td><code>dataLayerName</code></td>
<td>Optional</td>
<td>Name of the data layer. Defaults to <code>dataLayer</code>.</td>
</tr>
<tr>
<td><code>auth</code></td>
<td>Optional</td>
<td>Value of authentication parameter (<code>gtm_auth</code>) for environment snippets.</td>
</tr>
<tr>
<td><code>preview</code></td>
<td>Optional</td>
<td>Value of preview parameter (<code>gtm_preview</code>) for environment snippets.</td>
</tr>
</tbody>
</table></div> <h3 id="google-analytics" data-docs-heading="">Google Analytics     </h3> <p>The <code>GoogleAnalytics</code> component can be used to include <a href="https://developers.google.com/analytics/devguides/collection/ga4" rel="noopener noreferrer nofollow" target="_blank">Google Analytics 4</a> to your page via the Google tag (<code>gtag.js</code>). By default, it fetches the original scripts after hydration occurs on the page.</p> <blockquote class="p-3 text-sm"> <p><strong>Recommendation</strong>: If Google Tag Manager is already included in your application, you can configure Google Analytics directly using it, rather than including Google Analytics as a separate component. Refer to the <a href="https://developers.google.com/analytics/devguides/collection/ga4/tag-options#what-is-gtm" rel="noopener noreferrer nofollow" target="_blank">documentation</a> to learn more about the differences between Tag Manager and <code>gtag.js</code>.</p> </blockquote> <p>To load Google Analytics for all routes, include the component directly in your root layout and pass in your measurement ID:</p>
<div class="code-block_wrapper__t6FCO code-block_hasFileName__ezlBD not-prose"><pre class="code-block_pre___OLfy" data-language="typescript">import { GoogleAnalytics } from '@next/third-parties/google'
 
export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    &lt;html lang="en"&gt;
      &lt;body&gt;{children}&lt;/body&gt;
      &lt;GoogleAnalytics gaId="G-XYZ" /&gt;
    &lt;/html&gt;
  )
}</pre></div>  <p>To load Google Analytics for a single route, include the component in your page file:</p> <div class="code-block_wrapper__t6FCO code-block_hasFileName__ezlBD not-prose"><pre class="code-block_pre___OLfy" data-language="typescript">import { GoogleAnalytics } from '@next/third-parties/google'
 
export default function Page() {
  return &lt;GoogleAnalytics gaId="G-XYZ" /&gt;
}</pre></div>  <h4 id="sending-events-1" data-docs-heading="">Sending Events     </h4> <p>The <code>sendGAEvent</code> function can be used to measure user interactions on your page by sending events using the <code>dataLayer</code> object. For this function to work, the <code>&lt;GoogleAnalytics /&gt;</code> component must be included in either a parent layout, page, or component, or directly in the same file.</p> <div class="code-block_wrapper__t6FCO code-block_hasFileName__ezlBD not-prose"><pre class="code-block_pre___OLfy" data-language="typescript">'use client'
 
import { sendGAEvent } from '@next/third-parties/google'
 
export function EventButton() {
  return (
    &lt;div&gt;
      &lt;button
        onClick={() =&gt; sendGAEvent({ event: 'buttonClicked', value: 'xyz' })}
      &gt;
        Send Event
      &lt;/button&gt;
    &lt;/div&gt;
  )
}</pre></div>  <p>Refer to the Google Analytics <a href="https://developers.google.com/analytics/devguides/collection/ga4/event-parameters" rel="noopener noreferrer nofollow" target="_blank">developer documentation</a> to learn more about event parameters.</p> <h4 id="tracking-pageviews" data-docs-heading="">Tracking Pageviews     </h4> <p>Google Analytics automatically tracks pageviews when the browser history state changes. This means that client-side navigations between Next.js routes will send pageview data without any configuration.</p> <p>To ensure that client-side navigations are being measured correctly, verify that the <a href="https://support.google.com/analytics/answer/9216061#enable_disable" rel="noopener noreferrer nofollow" target="_blank"><em>“Enhanced Measurement”</em></a> property is enabled in your Admin panel and the <em>“Page changes based on browser history events”</em> checkbox is selected.</p> <blockquote class="p-3 text-sm"> <p><strong>Note</strong>: If you decide to manually send pageview events, make sure to disable the default pageview measurement to avoid having duplicate data. Refer to the Google Analytics <a href="https://developers.google.com/analytics/devguides/collection/ga4/views?client_type=gtag#manual_pageviews" rel="noopener noreferrer nofollow" target="_blank">developer documentation</a> to learn more.</p> </blockquote> <h4 id="options-1" data-docs-heading="">Options     </h4> <p>Options to pass to the <code>&lt;GoogleAnalytics&gt;</code> component.</p> <div class="overflow-x-auto"><table class="w-full table-auto">
<thead><tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td><code>gaId</code></td>
<td>Required</td>
<td>Your <a href="https://support.google.com/analytics/answer/12270356" rel="noopener noreferrer nofollow" target="_blank">measurement ID</a>. Usually starts with <code>G-</code>.</td>
</tr>
<tr>
<td><code>dataLayerName</code></td>
<td>Optional</td>
<td>Name of the data layer. Defaults to <code>dataLayer</code>.</td>
</tr>
</tbody>
</table></div> <h3 id="google-maps-embed" data-docs-heading="">Google Maps Embed     </h3> <p>The <code>GoogleMapsEmbed</code> component can be used to add a <a href="https://developers.google.com/maps/documentation/embed/embedding-map" rel="noopener noreferrer nofollow" target="_blank">Google Maps Embed</a> to your page. By default, it uses the <code>loading</code> attribute to lazy-load the embed below the fold.</p> <div class="code-block_wrapper__t6FCO code-block_hasFileName__ezlBD not-prose"><pre class="code-block_pre___OLfy" data-language="typescript">import { GoogleMapsEmbed } from '@next/third-parties/google'
 
export default function Page() {
  return (
    &lt;GoogleMapsEmbed
      apiKey="XYZ"
      height={200}
      width="100%"
      mode="place"
      q="Brooklyn+Bridge,New+York,NY"
    /&gt;
  )
}</pre></div>  <h4 id="options-2" data-docs-heading="">Options     </h4> <p>Options to pass to the Google Maps Embed. For a full list of options, read the <a href="https://developers.google.com/maps/documentation/embed/embedding-map" rel="noopener noreferrer nofollow" target="_blank">Google Map Embed docs</a>.</p> <div class="overflow-x-auto"><table class="w-full table-auto">
<thead><tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td><code>apiKey</code></td>
<td>Required</td>
<td>Your api key.</td>
</tr>
<tr>
<td><code>mode</code></td>
<td>Required</td>
<td><a href="https://developers.google.com/maps/documentation/embed/embedding-map#choosing_map_modes" rel="noopener noreferrer nofollow" target="_blank">Map mode</a></td>
</tr>
<tr>
<td><code>height</code></td>
<td>Optional</td>
<td>Height of the embed. Defaults to <code>auto</code>.</td>
</tr>
<tr>
<td><code>width</code></td>
<td>Optional</td>
<td>Width of the embed. Defaults to <code>auto</code>.</td>
</tr>
<tr>
<td><code>style</code></td>
<td>Optional</td>
<td>Pass styles to the iframe.</td>
</tr>
<tr>
<td><code>allowfullscreen</code></td>
<td>Optional</td>
<td>Property to allow certain map parts to go full screen.</td>
</tr>
<tr>
<td><code>loading</code></td>
<td>Optional</td>
<td>Defaults to lazy. Consider changing if you know your embed will be above the fold.</td>
</tr>
<tr>
<td><code>q</code></td>
<td>Optional</td>
<td>Defines map marker location. <em>This may be required depending on the map mode</em>.</td>
</tr>
<tr>
<td><code>center</code></td>
<td>Optional</td>
<td>Defines the center of the map view.</td>
</tr>
<tr>
<td><code>zoom</code></td>
<td>Optional</td>
<td>Sets initial zoom level of the map.</td>
</tr>
<tr>
<td><code>maptype</code></td>
<td>Optional</td>
<td>Defines type of map tiles to load.</td>
</tr>
<tr>
<td><code>language</code></td>
<td>Optional</td>
<td>Defines the language to use for UI elements and for the display of labels on map tiles.</td>
</tr>
<tr>
<td><code>region</code></td>
<td>Optional</td>
<td>Defines the appropriate borders and labels to display, based on geo-political sensitivities.</td>
</tr>
</tbody>
</table></div> <h3 id="youtube-embed" data-docs-heading="">YouTube Embed     </h3> <p>The <code>YouTubeEmbed</code> component can be used to load and display a YouTube embed. This component loads faster by using <a href="https://github.com/paulirish/lite-youtube-embed" rel="noopener noreferrer nofollow" target="_blank"><code>lite-youtube-embed</code></a> under the hood.</p> <div class="code-block_wrapper__t6FCO code-block_hasFileName__ezlBD not-prose"><pre class="code-block_pre___OLfy" data-language="typescript">import { YouTubeEmbed } from '@next/third-parties/google'
 
export default function Page() {
  return &lt;YouTubeEmbed videoid="ogfYd705cRs" height={400} params="controls=0" /&gt;
}</pre></div>  <h4 id="options-3" data-docs-heading="">Options     </h4> <div class="overflow-x-auto"><table class="w-full table-auto">
<thead><tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td><code>videoid</code></td>
<td>Required</td>
<td>YouTube video id.</td>
</tr>
<tr>
<td><code>width</code></td>
<td>Optional</td>
<td>Width of the video container. Defaults to <code>auto</code>
</td>
</tr>
<tr>
<td><code>height</code></td>
<td>Optional</td>
<td>Height of the video container. Defaults to <code>auto</code>
</td>
</tr>
<tr>
<td><code>playlabel</code></td>
<td>Optional</td>
<td>A visually hidden label for the play button for accessibility.</td>
</tr>
<tr>
<td><code>params</code></td>
<td>Optional</td>
<td>The video player params defined <a href="https://developers.google.com/youtube/player_parameters#Parameters" rel="noopener noreferrer nofollow" target="_blank">here</a>. <br> Params are passed as a query param string. <br> Eg: <code>params="controls=0&amp;start=10&amp;end=30"</code>
</td>
</tr>
<tr>
<td><code>style</code></td>
<td>Optional</td>
<td>Used to apply styles to the video container.</td>
</tr>
</tbody>
</table></div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2024 Vercel, Inc.<br>Licensed under the MIT License.<br>
    <a href="https://nextjs.org/docs/app/building-your-application/optimizing/third-party-libraries" class="_attribution-link">https://nextjs.org/docs/app/building-your-application/optimizing/third-party-libraries</a>
  </p>
</div>
