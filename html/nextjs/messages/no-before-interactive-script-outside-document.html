<h1>No Before Interactive Script Outside Document</h1>
<blockquote class="p-3 text-sm"> <p>Prevent usage of <code>next/script</code>'s <code>beforeInteractive</code> strategy outside of <code>app/layout.jsx</code> or <code>pages/_document.js</code>.</p> </blockquote> <h2 id="why-this-error-occurred" data-docs-heading="">Why This Error Occurred     </h2> <p>You cannot use the <code>next/script</code> component with the <code>beforeInteractive</code> strategy outside <code>app/layout.jsx</code> or <code>pages/_document.js</code>. That's because <code>beforeInteractive</code> strategy only works inside <strong><code>app/layout.jsx</code></strong> or <strong><code>pages/_document.js</code></strong> and is designed to load scripts that are needed by the entire site (i.e. the script will load when any page in the application has been loaded server-side).</p> <h2 id="possible-ways-to-fix-it" data-docs-heading="">Possible Ways to Fix It     </h2> <h3 id="app-router" data-docs-heading="">App Router     </h3> <p>If you want a global script, and you are using the App Router, move the script inside <code>app/layout.jsx</code>.</p> <div class="code-block_wrapper__t6FCO code-block_hasFileName__ezlBD not-prose"><pre class="code-block_pre___OLfy" data-language="typescript">import Script from 'next/script'
 
export default function RootLayout({ children }) {
  return (
    &lt;html lang="en"&gt;
      &lt;body&gt;{children}&lt;/body&gt;
      &lt;Script
        src="https://example.com/script.js"
        strategy="beforeInteractive"
      /&gt;
    &lt;/html&gt;
  )
}</pre></div> <h3 id="pages-router" data-docs-heading="">Pages Router     </h3> <p>If you want a global script, and you are using the Pages Router, move the script inside <code>pages/_document.js</code>.</p> <div class="code-block_wrapper__t6FCO code-block_hasFileName__ezlBD not-prose"><pre class="code-block_pre___OLfy" data-language="typescript">import { Html, Head, Main, NextScript } from 'next/document'
import Script from 'next/script'
 
export default function Document() {
  return (
    &lt;Html&gt;
      &lt;Head /&gt;
      &lt;body&gt;
        &lt;Main /&gt;
        &lt;NextScript /&gt;
        &lt;Script
          src="https://example.com/script.js"
          strategy="beforeInteractive"
        &gt;&lt;/Script&gt;
      &lt;/body&gt;
    &lt;/Html&gt;
  )
}</pre></div> <ul> <li><a href="../app/building-your-application/optimizing/scripts.html">App Router Script Optimization</a></li> <li><a href="../pages/building-your-application/optimizing/scripts.html">Pages Router Script Optimization</a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2024 Vercel, Inc.<br>Licensed under the MIT License.<br>
    <a href="https://nextjs.org/docs/messages/no-before-interactive-script-outside-document" class="_attribution-link">https://nextjs.org/docs/messages/no-before-interactive-script-outside-document</a>
  </p>
</div>
