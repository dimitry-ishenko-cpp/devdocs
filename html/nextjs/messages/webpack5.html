<h1>Webpack 5 Adoption</h1>
<h4 id="why-this-message-occurred" data-docs-heading="">Why This Message Occurred     </h4> <p>Next.js has adopted webpack 5 as the default for compilation. We've spent a lot of effort into ensuring the transition from webpack 4 to 5 will be as smooth as possible.</p> <p>Your application currently has webpack 5 disabled using the <code>webpack5: false</code> flag which has been removed in Next.js 12:</p> <div class="code-block_wrapper__t6FCO code-block_hasFileName__ezlBD not-prose"><pre class="code-block_pre___OLfy" data-language="typescript">module.exports = {
  // Webpack 5 is enabled by default
  // You can still use webpack 4 while upgrading to the latest version of Next.js by adding the "webpack5: false" flag
  webpack5: false,
}</pre></div> <p>Using webpack 5 in your application has many benefits, notably:</p> <ul> <li>Improved Disk Caching: <code>next build</code> is significantly faster on subsequent builds</li> <li>Improved Fast Refresh: Fast Refresh work is prioritized</li> <li>Improved Long Term Caching of Assets: Deterministic code output that is less likely to change between builds</li> <li>Improved Tree Shaking</li> <li>Support for assets using <code>new URL("file.png", import.meta.url)</code>
</li> <li>Support for web workers using <code>new Worker(new URL("worker.js", import.meta.url))</code>
</li> <li>Support for <code>exports</code>/<code>imports</code> field in <code>package.json</code>
</li> </ul> <p>In the past releases we have gradually rolled out webpack 5 to Next.js applications:</p> <ul> <li>In Next.js 10.2 we automatically opted-in applications without custom webpack configuration in <code>next.config.js</code>
</li> <li>In Next.js 10.2 we automatically opted-in applications that do not have a <code>next.config.js</code>
</li> <li>In Next.js 11 webpack 5 was enabled by default for all applications. You could still opt-out and use webpack 4 to help with backwards compatibility using <code>webpack5: false</code> in <code>next.config.js</code>
</li> <li>In Next.js 12 webpack 4 support was removed.</li> </ul> <h4 id="custom-webpack-configuration" data-docs-heading="">Custom webpack configuration     </h4> <p>In case you do have custom webpack configuration, either through custom plugins or your own modifications you'll have to take a few steps to ensure your applications works with webpack 5.</p> <ul> <li>When using <code>next-transpile-modules</code> make sure you use the latest version which includes <a href="https://github.com/martpie/next-transpile-modules/pull/179" rel="noopener noreferrer nofollow" target="_blank">this patch</a>
</li> <li>When using <code>@zeit/next-css</code> / <code>@zeit/next-sass</code> make sure you use the <a href="../pages/building-your-application/styling.html">built-in CSS/Sass support</a> instead</li> <li>When using <code>@zeit/next-preact</code> use <a href="https://github.com/vercel/next.js/tree/canary/examples/using-preact" rel="noopener noreferrer" target="_blank">this example</a> instead</li> <li>When using <code>@zeit/next-source-maps</code> use the <a href="../pages/api-reference/next-config-js/productionbrowsersourcemaps.html">built-in production Source Map support</a>
</li> <li>When using webpack plugins make sure they're upgraded to the latest version, in most cases the latest version will include webpack 5 support. In some cases these upgraded webpack plugins will only support webpack 5.</li> </ul> <h2 id="useful-links" data-docs-heading="">Useful Links     </h2> <p>In case you're running into issues you can connect with the community in <a href="https://github.com/vercel/next.js/discussions/23498" rel="noopener noreferrer" target="_blank">this help discussion</a>.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2024 Vercel, Inc.<br>Licensed under the MIT License.<br>
    <a href="https://nextjs.org/docs/messages/webpack5" class="_attribution-link">https://nextjs.org/docs/messages/webpack5</a>
  </p>
</div>
