<h1 class="break-words">optimizePackageImports</h1> <p>By default, Next.js uses <code>gzip</code> to compress rendered content and static files when using <code>next start</code> or a custom server. This is an optimization for applications that do not have compression configured. If compression is <em>already</em> configured in your application via a custom server, Next.js will not add compression.</p> <blockquote class="p-3 text-sm"> <p><strong>Good to know:</strong></p> <ul> <li>When hosting your application on <a href="https://vercel.com/docs/edge-network/compression" rel="noopener noreferrer" target="_blank">Vercel</a>, compression uses <code>brotli</code> first, then <code>gzip</code>.</li> <li>You can check if compression is enabled and which algorithm is used by looking at the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Encoding" rel="noopener noreferrer nofollow" target="_blank"><code>Accept-Encoding</code></a> (browser accepted options) and <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Encoding" rel="noopener noreferrer nofollow" target="_blank"><code>Content-Encoding</code></a> (currently used) headers in the response.</li> </ul> </blockquote> <h2 id="disabling-compression" data-docs-heading="">Disabling compression     </h2> <p>To disable <strong>compression</strong>, set the <code>compress</code> config option to <code>false</code>:</p> <div class="code-block_wrapper__t6FCO code-block_hasFileName__ezlBD not-prose"><pre class="code-block_pre___OLfy" data-language="typescript">module.exports = {
  compress: false,
}</pre></div> <p>We do not recommend disabling compression unless you have compression configured on your server, as compression reduces bandwidth usage and improves the performance of your application.</p> <h2 id="changing-the-compression-algorithm" data-docs-heading="">Changing the compression algorithm     </h2> <p>To change your compression algorithm, you will need to configure your custom server and set the <code>compress</code> option to <code>false</code> in your <code>next.config.js</code> file.</p> <p>For example, you're using <a href="https://www.nginx.com/" rel="noopener noreferrer nofollow" target="_blank">nginx</a> and want to switch to <code>brotli</code>, set the <code>compress</code> option to <code>false</code> to allow nginx to handle compression.</p> <blockquote class="p-3 text-sm"> <p><strong>Good to know:</strong></p> <ul> <li>For Next.js applications on Vercel, compression is handled by the Vercel's Edge Network and not Next.js. See the <a href="https://vercel.com/docs/edge-network/compression" rel="noopener noreferrer" target="_blank">Vercel documentation</a> for more information.</li> </ul> </blockquote><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2024 Vercel, Inc.<br>Licensed under the MIT License.<br>
    <a href="https://nextjs.org/docs/pages/api-reference/next-config-js/optimizePackageImports" class="_attribution-link">https://nextjs.org/docs/pages/api-reference/next-config-js/optimizePackageImports</a>
  </p>
</div>
