<h1 class="break-words">Debugging</h1>
<p>This documentation explains how you can debug your Next.js frontend and backend code with full source maps support using either the <a href="https://code.visualstudio.com/docs/editor/debugging" rel="noopener noreferrer nofollow" target="_blank">VS Code debugger</a> or <a href="https://developers.google.com/web/tools/chrome-devtools" rel="noopener noreferrer nofollow" target="_blank">Chrome DevTools</a>.</p> <p>Any debugger that can attach to Node.js can also be used to debug a Next.js application. You can find more details in the Node.js <a href="https://nodejs.org/en/docs/guides/debugging-getting-started/" rel="noopener noreferrer nofollow" target="_blank">Debugging Guide</a>.</p> <h2 id="debugging-with-vs-code" data-docs-heading="">Debugging with VS Code     </h2> <p>Create a file named <code>.vscode/launch.json</code> at the root of your project with the following content:</p> <div class="code-block_wrapper__t6FCO code-block_hasFileName__ezlBD not-prose"><pre class="code-block_pre___OLfy" data-language="typescript">{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Next.js: debug server-side",
      "type": "node-terminal",
      "request": "launch",
      "command": "npm run dev"
    },
    {
      "name": "Next.js: debug client-side",
      "type": "chrome",
      "request": "launch",
      "url": "http://localhost:3000"
    },
    {
      "name": "Next.js: debug full stack",
      "type": "node-terminal",
      "request": "launch",
      "command": "npm run dev",
      "serverReadyAction": {
        "pattern": "- Local:.+(https?://.+)",
        "uriFormat": "%s",
        "action": "debugWithChrome"
      }
    }
  ]
}</pre></div> <p><code>npm run dev</code> can be replaced with <code>yarn dev</code> if you're using Yarn or <code>pnpm dev</code> if you're using pnpm.</p> <p>If you're <a href="../../api-reference/next-cli.html#development">changing the port number</a> your application starts on, replace the <code>3000</code> in <code>http://localhost:3000</code> with the port you're using instead.</p> <p>If you're running Next.js from a directory other than root (for example, if you're using Turborepo) then you need to add <code>cwd</code> to the server-side and full stack debugging tasks. For example, <code>"cwd": "${workspaceFolder}/apps/web"</code>.</p> <p>Now go to the Debug panel (<code>Ctrl+Shift+D</code> on Windows/Linux, <code>⇧+⌘+D</code> on macOS), select a launch configuration, then press <code>F5</code> or select <strong>Debug: Start Debugging</strong> from the Command Palette to start your debugging session.</p> <h2 id="using-the-debugger-in-jetbrains-webstorm" data-docs-heading="">Using the Debugger in Jetbrains WebStorm     </h2> <p>Click the drop down menu listing the runtime configuration, and click <code>Edit Configurations...</code>. Create a <code>Javascript Debug</code> debug configuration with <code>http://localhost:3000</code> as the URL. Customize to your liking (e.g. Browser for debugging, store as project file), and click <code>OK</code>. Run this debug configuration, and the selected browser should automatically open. At this point, you should have 2 applications in debug mode: the NextJS node application, and the client/ browser application.</p> <h2 id="debugging-with-chrome-devtools" data-docs-heading="">Debugging with Chrome DevTools     </h2> <h3 id="client-side-code" data-docs-heading="">Client-side code     </h3> <p>Start your development server as usual by running <code>next dev</code>, <code>npm run dev</code>, or <code>yarn dev</code>. Once the server starts, open <code>http://localhost:3000</code> (or your alternate URL) in Chrome. Next, open Chrome's Developer Tools (<code>Ctrl+Shift+J</code> on Windows/Linux, <code>⌥+⌘+I</code> on macOS), then go to the <strong>Sources</strong> tab.</p> <p>Now, any time your client-side code reaches a <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/debugger" rel="noopener noreferrer nofollow" target="_blank"><code>debugger</code></a> statement, code execution will pause and that file will appear in the debug area. You can also press <code>Ctrl+P</code> on Windows/Linux or <code>⌘+P</code> on macOS to search for a file and set breakpoints manually. Note that when searching here, your source files will have paths starting with <code>webpack://_N_E/./</code>.</p> <h3 id="server-side-code" data-docs-heading="">Server-side code     </h3> <p>To debug server-side Next.js code with Chrome DevTools, you need to pass the <a href="https://nodejs.org/api/cli.html#cli_inspect_host_port" rel="noopener noreferrer nofollow" target="_blank"><code>--inspect</code></a> flag to the underlying Node.js process:</p> <div class="code-block_wrapper__t6FCO code-block_hasFileName__ezlBD code-block_hideLineNumbers__52YKH not-prose"><pre class="code-block_pre___OLfy" data-language="typescript">NODE_OPTIONS='--inspect' next dev</pre></div> <p>If you're using <code>npm run dev</code> or <code>yarn dev</code> then you should update the <code>dev</code> script on your <code>package.json</code>:</p> <div class="code-block_wrapper__t6FCO code-block_hasFileName__ezlBD not-prose"><pre class="code-block_pre___OLfy" data-language="typescript">{
  "scripts": {
    "dev": "NODE_OPTIONS='--inspect' next dev"
  }
}</pre></div> <p>Launching the Next.js dev server with the <code>--inspect</code> flag will look something like this:</p> <div class="code-block_wrapper__t6FCO code-block_hasFileName__ezlBD not-prose"><pre class="code-block_pre___OLfy" data-language="typescript">Debugger listening on ws://127.0.0.1:9229/0cf90313-350d-4466-a748-cd60f4e47c95
For help, see: https://nodejs.org/en/docs/inspector
ready - started server on 0.0.0.0:3000, url: http://localhost:3000</pre></div> <blockquote class="p-3 text-sm"> <p>Be aware that running <code>NODE_OPTIONS='--inspect' npm run dev</code> or <code>NODE_OPTIONS='--inspect' yarn dev</code> won't work. This would try to start multiple debuggers on the same port: one for the npm/yarn process and one for Next.js. You would then get an error like <code>Starting inspector on 127.0.0.1:9229 failed: address already in use</code> in your console.</p> </blockquote> <p>Once the server starts, open a new tab in Chrome and visit <code>chrome://inspect</code>, where you should see your Next.js application inside the <strong>Remote Target</strong> section. Click <strong>inspect</strong> under your application to open a separate DevTools window, then go to the <strong>Sources</strong> tab.</p> <p>Debugging server-side code here works much like debugging client-side code with Chrome DevTools, except that when you search for files here with <code>Ctrl+P</code> or <code>⌘+P</code>, your source files will have paths starting with <code>webpack://{application-name}/./</code> (where <code>{application-name}</code> will be replaced with the name of your application according to your <code>package.json</code> file).</p> <h3 id="debugging-on-windows" data-docs-heading="">Debugging on Windows     </h3> <p>Windows users may run into an issue when using <code>NODE_OPTIONS='--inspect'</code> as that syntax is not supported on Windows platforms. To get around this, install the <a href="https://www.npmjs.com/package/cross-env" rel="noopener noreferrer nofollow" target="_blank"><code>cross-env</code></a> package as a development dependency (<code>-D</code> with <code>npm</code> and <code>yarn</code>) and replace the <code>dev</code> script with the following.</p> <div class="code-block_wrapper__t6FCO code-block_hasFileName__ezlBD not-prose"><pre class="code-block_pre___OLfy" data-language="typescript">{
  "scripts": {
    "dev": "cross-env NODE_OPTIONS='--inspect' next dev"
  }
}</pre></div> <p><code>cross-env</code> will set the <code>NODE_OPTIONS</code> environment variable regardless of which platform you are on (including Mac, Linux, and Windows) and allow you to debug consistently across devices and operating systems.</p> <blockquote class="p-3 text-sm"> <p><strong>Good to know</strong>: Ensure Windows Defender is disabled on your machine. This external service will check <em>every file read</em>, which has been reported to greatly increase Fast Refresh time with <code>next dev</code>. This is a known issue, not related to Next.js, but it does affect Next.js development.</p> </blockquote> <h2 id="more-information" data-docs-heading="">More information     </h2> <p>To learn more about how to use a JavaScript debugger, take a look at the following documentation:</p> <ul> <li><a href="https://code.visualstudio.com/docs/nodejs/nodejs-debugging#_breakpoints" rel="noopener noreferrer nofollow" target="_blank">Node.js debugging in VS Code: Breakpoints</a></li> <li><a href="https://developers.google.com/web/tools/chrome-devtools/javascript" rel="noopener noreferrer nofollow" target="_blank">Chrome DevTools: Debug JavaScript</a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2024 Vercel, Inc.<br>Licensed under the MIT License.<br>
    <a href="https://nextjs.org/docs/pages/building-your-application/configuring/debugging" class="_attribution-link">https://nextjs.org/docs/pages/building-your-application/configuring/debugging</a>
  </p>
</div>
