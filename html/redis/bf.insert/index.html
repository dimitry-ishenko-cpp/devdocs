<h1 class="command-name">BF.INSERT</h1>
<pre>BF.INSERT</pre> <div class="font-semibold text-slate-900">Syntax</div> <pre class="command-syntax">BF.INSERT key [CAPACITY capacity] [ERROR error]
  [EXPANSION expansion] [NOCREATE] [NONSCALING] ITEMS item [item
  ...]</pre> <dl class="grid grid-cols-[auto,1fr] gap-x-2 mb-12"> <dt class="font-semibold text-slate-900">Available in:</dt> <dd> <a href="https://redis.io/docs/stack">Redis Stack</a> / <a href="https://redis.io/docs/stack/bloom">Bloom 1.0.0</a> </dd> <dt class="font-semibold text-slate-900">Time complexity:</dt> <dd>O(k * n), where k is the number of hash functions and n is the number of items</dd> </dl> <p>BF.INSERT is a sugarcoated combination of BF.RESERVE and BF.ADD. It creates a new filter if the <code>key</code> does not exist using the relevant arguments (see BF.RESERVE). Next, all <code>ITEMS</code> are inserted.</p> <h3 id="parameters">Parameters</h3> <ul> <li>
<strong>key</strong>: The name of the filter</li> <li>
<strong>item</strong>: One or more items to add. The <code>ITEMS</code> keyword must precede the list of items to add.</li> </ul> <p>Optional parameters:</p> <ul> <li>
<strong>NOCREATE</strong>: (Optional) Indicates that the filter should not be created if it does not already exist. If the filter does not yet exist, an error is returned rather than creating it automatically. This may be used where a strict separation between filter creation and filter addition is desired. It is an error to specify <code>NOCREATE</code> together with either <code>CAPACITY</code> or <code>ERROR</code>.</li> <li>
<strong>capacity</strong>: (Optional) Specifies the desired <code>capacity</code> for the filter to be created. This parameter is ignored if the filter already exists. If the filter is automatically created and this parameter is absent, then the module-level <code>capacity</code> is used. See <a href="../bf.reserve.html"><code>BF.RESERVE</code></a> for more information about the impact of this value.</li> <li>
<strong>error</strong>: (Optional) Specifies the <code>error</code> ratio of the newly created filter if it does not yet exist. If the filter is automatically created and <code>error</code> is not specified then the module-level error rate is used. See <a href="../bf.reserve.html"><code>BF.RESERVE</code></a> for more information about the format of this value.</li> <li>
<strong>NONSCALING</strong>: Prevents the filter from creating additional sub-filters if initial capacity is reached. Non-scaling filters require slightly less memory than their scaling counterparts. The filter returns an error when <code>capacity</code> is reached.</li> <li>
<strong>expansion</strong>: When <code>capacity</code> is reached, an additional sub-filter is created. The size of the new sub-filter is the size of the last sub-filter multiplied by <code>expansion</code>. If the number of elements to be stored in the filter is unknown, we recommend that you use an <code>expansion</code> of 2 or more to reduce the number of sub-filters. Otherwise, we recommend that you use an <code>expansion</code> of 1 to reduce memory consumption. The default expansion value is 2.</li> </ul> <h2 id="return">Return</h2> <p>An array of booleans (integers). Each element is either true or false depending on whether the corresponding input element was newly added to the filter or may have previously existed.</p> <h2 id="examples">Examples</h2> <p>Add three items to a filter with default parameters if the filter does not already exist:</p> <pre tabindex="0">BF.INSERT filter ITEMS foo bar baz
</pre>
<p>Add one item to a filter with a capacity of 10000 if the filter does not already exist:</p> <pre tabindex="0">BF.INSERT filter CAPACITY 10000 ITEMS hello
</pre>
<p>Add 2 items to a filter with an error if the filter does not already exist:</p> <pre tabindex="0">BF.INSERT filter NOCREATE ITEMS foo bar
</pre><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>
    <a href="https://redis.io/commands/bf.insert/" class="_attribution-link">https://redis.io/commands/bf.insert/</a>
  </p>
</div>
