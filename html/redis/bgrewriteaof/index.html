<h1 class="command-name">BGREWRITEAOF</h1>
<pre>BGREWRITEAOF</pre> <div class="font-semibold text-slate-900">Syntax</div> <pre class="command-syntax">BGREWRITEAOF</pre> <dl class="grid grid-cols-[auto,1fr] gap-x-2 mb-12"> <dt class="font-semibold text-slate-900">Available since:</dt> <dd>1.0.0</dd> <dt class="font-semibold text-slate-900">Time complexity:</dt> <dd>O(1)</dd> <dt class="font-semibold text-slate-900">ACL categories:</dt> <dd> <code>@admin</code><span class="mr-1 last:hidden">,</span> <code>@slow</code><span class="mr-1 last:hidden">,</span> <code>@dangerous</code><span class="mr-1 last:hidden">,</span> </dd> </dl> <p>Instruct Redis to start an <a href="https://redis.io/topics/persistence#append-only-file">Append Only File</a> rewrite process. The rewrite will create a small optimized version of the current Append Only File.</p> <p>If <code>BGREWRITEAOF</code> fails, no data gets lost as the old AOF will be untouched.</p> <p>The rewrite will be only triggered by Redis if there is not already a background process doing persistence.</p> <p>Specifically:</p> <ul> <li>If a Redis child is creating a snapshot on disk, the AOF rewrite is <em>scheduled</em> but not started until the saving child producing the RDB file terminates. In this case the <code>BGREWRITEAOF</code> will still return a positive status reply, but with an appropriate message. You can check if an AOF rewrite is scheduled looking at the <a href="../info.html"><code>INFO</code></a> command as of Redis 2.6 or successive versions.</li> <li>If an AOF rewrite is already in progress the command returns an error and no AOF rewrite will be scheduled for a later time.</li> <li>If the AOF rewrite could start, but the attempt at starting it fails (for instance because of an error in creating the child process), an error is returned to the caller.</li> </ul> <p>Since Redis 2.4 the AOF rewrite is automatically triggered by Redis, however the <code>BGREWRITEAOF</code> command can be used to trigger a rewrite at any time.</p> <p>Please refer to the <a href="https://redis.io/topics/persistence">persistence documentation</a> for detailed information.</p> <h2 id="return">Return</h2> <p><a href="https://redis.io/docs/reference/protocol-spec#resp-simple-strings">Simple string reply</a>: A simple string reply indicating that the rewriting started or is about to start ASAP, when the call is executed with success.</p> <p>The command may reply with an error in certain cases, as documented above.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>
    <a href="https://redis.io/commands/bgrewriteaof/" class="_attribution-link">https://redis.io/commands/bgrewriteaof/</a>
  </p>
</div>
