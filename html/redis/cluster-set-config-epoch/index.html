<h1 class="command-name">CLUSTER</h1>
<pre>CLUSTER SET-CONFIG-EPOCH</pre> <div class="font-semibold text-slate-900">Syntax</div> <pre class="command-syntax">CLUSTER SET-CONFIG-EPOCH config-epoch</pre> <dl class="grid grid-cols-[auto,1fr] gap-x-2 mb-12"> <dt class="font-semibold text-slate-900">Available since:</dt> <dd>3.0.0</dd> <dt class="font-semibold text-slate-900">Time complexity:</dt> <dd>O(1)</dd> <dt class="font-semibold text-slate-900">ACL categories:</dt> <dd> <code>@admin</code><span class="mr-1 last:hidden">,</span> <code>@slow</code><span class="mr-1 last:hidden">,</span> <code>@dangerous</code><span class="mr-1 last:hidden">,</span> </dd> </dl> <p>This command sets a specific <em>config epoch</em> in a fresh node. It only works when:</p> <ol> <li>The nodes table of the node is empty.</li> <li>The node current <em>config epoch</em> is zero.</li> </ol> <p>These prerequisites are needed since usually, manually altering the configuration epoch of a node is unsafe, we want to be sure that the node with the higher configuration epoch value (that is the last that failed over) wins over other nodes in claiming the hash slots ownership.</p> <p>However there is an exception to this rule, and it is when a new cluster is created from scratch. Redis Cluster <em>config epoch collision resolution</em> algorithm can deal with new nodes all configured with the same configuration at startup, but this process is slow and should be the exception, only to make sure that whatever happens, two more nodes eventually always move away from the state of having the same configuration epoch.</p> <p>So, using <code>CLUSTER SET-CONFIG-EPOCH</code>, when a new cluster is created, we can assign a different progressive configuration epoch to each node before joining the cluster together.</p> <h2 id="return">Return</h2> <p><a href="https://redis.io/docs/reference/protocol-spec#resp-simple-strings">Simple string reply</a>: <code>OK</code> if the command was executed successfully, otherwise an error is returned.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>
    <a href="https://redis.io/commands/cluster-set-config-epoch/" class="_attribution-link">https://redis.io/commands/cluster-set-config-epoch/</a>
  </p>
</div>
