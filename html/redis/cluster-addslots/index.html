<h1 class="command-name">CLUSTER</h1>
<pre>CLUSTER ADDSLOTS</pre> <div class="font-semibold text-slate-900">Syntax</div> <pre class="command-syntax">CLUSTER ADDSLOTS slot [slot ...]</pre> <dl class="grid grid-cols-[auto,1fr] gap-x-2 mb-12"> <dt class="font-semibold text-slate-900">Available since:</dt> <dd>3.0.0</dd> <dt class="font-semibold text-slate-900">Time complexity:</dt> <dd>O(N) where N is the total number of hash slot arguments</dd> <dt class="font-semibold text-slate-900">ACL categories:</dt> <dd> <code>@admin</code><span class="mr-1 last:hidden">,</span> <code>@slow</code><span class="mr-1 last:hidden">,</span> <code>@dangerous</code><span class="mr-1 last:hidden">,</span> </dd> </dl> <p>This command is useful in order to modify a node's view of the cluster configuration. Specifically it assigns a set of hash slots to the node receiving the command. If the command is successful, the node will map the specified hash slots to itself, and will start broadcasting the new configuration.</p> <p>However note that:</p> <ol> <li>The command only works if all the specified slots are, from the point of view of the node receiving the command, currently not assigned. A node will refuse to take ownership for slots that already belong to some other node (including itself).</li> <li>The command fails if the same slot is specified multiple times.</li> <li>As a side effect of the command execution, if a slot among the ones specified as argument is set as <code>importing</code>, this state gets cleared once the node assigns the (previously unbound) slot to itself.</li> </ol> <h2 id="example">Example</h2> <p>For example the following command assigns slots 1 2 3 to the node receiving the command:</p> <pre>&gt; CLUSTER ADDSLOTS 1 2 3
OK
</pre> <p>However trying to execute it again results into an error since the slots are already assigned:</p> <pre>&gt; CLUSTER ADDSLOTS 1 2 3
ERR Slot 1 is already busy
</pre> <h2 id="usage-in-redis-cluster">Usage in Redis Cluster</h2> <p>This command only works in cluster mode and is useful in the following Redis Cluster operations:</p> <ol> <li>To create a new cluster ADDSLOTS is used in order to initially setup master nodes splitting the available hash slots among them.</li> <li>In order to fix a broken cluster where certain slots are unassigned.</li> </ol> <h2 id="information-about-slots-propagation-and-warnings">Information about slots propagation and warnings</h2> <p>Note that once a node assigns a set of slots to itself, it will start propagating this information in heartbeat packet headers. However the other nodes will accept the information only if they have the slot as not already bound with another node, or if the configuration epoch of the node advertising the new hash slot, is greater than the node currently listed in the table.</p> <p>This means that this command should be used with care only by applications orchestrating Redis Cluster, like <code>redis-cli</code>, and the command if used out of the right context can leave the cluster in a wrong state or cause data loss.</p> <h2 id="return">Return</h2> <p><a href="https://redis.io/docs/reference/protocol-spec#resp-simple-strings">Simple string reply</a>: <code>OK</code> if the command was successful. Otherwise an error is returned.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>
    <a href="https://redis.io/commands/cluster-addslots/" class="_attribution-link">https://redis.io/commands/cluster-addslots/</a>
  </p>
</div>
