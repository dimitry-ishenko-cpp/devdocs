<h1 class="command-name">JSON.SET</h1>
<pre>JSON.SET</pre> <div class="font-semibold text-slate-900">Syntax</div> <pre class="command-syntax">JSON.SET key path value [NX | XX]</pre> <dl class="grid grid-cols-[auto,1fr] gap-x-2 mb-12"> <dt class="font-semibold text-slate-900">Available in:</dt> <dd> <a href="https://redis.io/docs/stack">Redis Stack</a> / <a href="https://redis.io/docs/stack/json">JSON 1.0.0</a> </dd> <dt class="font-semibold text-slate-900">Time complexity:</dt> <dd>O(M+N) when path is evaluated to a single value where M is the size of the original value (if it exists) and N is the size of the new value, O(M+N) when path is evaluated to multiple values where M is the size of the key and N is the size of the new value</dd> </dl> <p>Set the JSON value at <code>path</code> in <code>key</code></p> <p><a href="#examples">Examples</a></p> <h2 id="required-arguments">Required arguments</h2> <details open><summary><code>key</code></summary> <p>is key to modify.</p> </details> <details open><summary><code>value</code></summary> <p>is value to set at the specified path</p> </details> <h2 id="optional-arguments">Optional arguments</h2> <details open><summary><code>path</code></summary> <p>is JSONPath to specify. Default is root <code>$</code>. For new Redis keys the <code>path</code> must be the root. For existing keys, when the entire <code>path</code> exists, the value that it contains is replaced with the <code>json</code> value. For existing keys, when the <code>path</code> exists, except for the last element, a new child is added with the <code>json</code> value.</p> <p>Adds a key (with its respective value) to a JSON Object (in a RedisJSON data type key) only if it is the last child in the <code>path</code>, or it is the parent of a new child being added in the <code>path</code>. Optional arguments <code>NX</code> and <code>XX</code> modify this behavior for both new RedisJSON data type keys as well as the JSON Object keys in them.</p> </details> <details open><summary><code>NX</code></summary> <p>sets the key only if it does not already exist.</p> </details> <details open><summary><code>XX</code></summary> <p>sets the key only if it already exists.</p> </details> <h2 id="return-value">Return value</h2> <p>JSET.SET returns a simple string reply: <code>OK</code> if executed correctly or <code>nil</code> if the specified <code>NX</code> or <code>XX</code> conditions were not met. For more information about replies, see <a href="https://redis.io/docs/reference/protocol-spec">Redis serialization protocol specification</a>.</p> <h2 id="examples">Examples</h2> <details open> <summary><b>Replace an existing value</b></summary> <div class="highlight"><pre tabindex="0" class="chroma"><span class="line"><span class="cl">127.0.0.1:6379&gt; JSON.SET doc $ <span class="s1">'{"a":2}'</span>
</span></span><span class="line"><span class="cl">OK
</span></span><span class="line"><span class="cl">127.0.0.1:6379&gt; JSON.SET doc $.a <span class="s1">'3'</span>
</span></span><span class="line"><span class="cl">OK
</span></span><span class="line"><span class="cl">127.0.0.1:6379&gt; JSON.GET doc $
</span></span><span class="line"><span class="cl"><span class="s2">"[{\"a\":3}]"</span></span></span></pre></div> </details> <details open> <summary><b>Add a new value</b></summary> <div class="highlight"><pre tabindex="0" class="chroma"><span class="line"><span class="cl">127.0.0.1:6379&gt; JSON.SET doc $ <span class="s1">'{"a":2}'</span>
</span></span><span class="line"><span class="cl">OK
</span></span><span class="line"><span class="cl">127.0.0.1:6379&gt; JSON.SET doc $.b <span class="s1">'8'</span>
</span></span><span class="line"><span class="cl">OK
</span></span><span class="line"><span class="cl">127.0.0.1:6379&gt; JSON.GET doc $
</span></span><span class="line"><span class="cl"><span class="s2">"[{\"a\":2,\"b\":8}]"</span></span></span></pre></div> </details> <details open> <summary><b>Update multi-paths</b></summary> <div class="highlight"><pre tabindex="0" class="chroma"><span class="line"><span class="cl">127.0.0.1:6379&gt; JSON.SET doc $ <span class="s1">'{"f1": {"a":1}, "f2":{"a":2}}'</span>
</span></span><span class="line"><span class="cl">OK
</span></span><span class="line"><span class="cl">127.0.0.1:6379&gt; JSON.SET doc $..a <span class="m">3</span>
</span></span><span class="line"><span class="cl">OK
</span></span><span class="line"><span class="cl">127.0.0.1:6379&gt; JSON.GET doc
</span></span><span class="line"><span class="cl"><span class="s2">"{\"f1\":{\"a\":3},\"f2\":{\"a\":3}}"</span></span></span></pre></div> </details> <h2 id="see-also">See also</h2> <p><a href="../json.get.html"><code>JSON.GET</code></a> | <a href="../json.mget.html"><code>JSON.MGET</code></a></p> <h2 id="related-topics">Related topics</h2> <ul> <li><a href="https://redis.io/docs/stack/json">RedisJSON</a></li> <li><a href="https://redis.io/docs/stack/search/indexing_json">Index and search JSON documents</a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2006&ndash;2022 Salvatore Sanfilippo<br>Licensed under the Creative Commons Attribution-ShareAlike License 4.0.<br>
    <a href="https://redis.io/commands/json.set/" class="_attribution-link">https://redis.io/commands/json.set/</a>
  </p>
</div>
