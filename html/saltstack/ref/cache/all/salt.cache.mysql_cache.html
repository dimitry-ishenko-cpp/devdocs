<h1>salt.cache.mysql_cache</h1> <p>Minion data cache plugin for MySQL database.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.0.</span></p> </div> <p>It is up to the system administrator to set up and configure the MySQL infrastructure. All is needed for this plugin is a working MySQL server.</p> <p>The module requires the <cite>salt_cache</cite> database to exists but creates its own table if needed. The keys are indexed using the <cite>bank</cite> and <cite>etcd_key</cite> columns.</p> <p>To enable this cache plugin, the master will need the python client for MySQL installed. This can be easily installed with pip:</p> <pre class="highlight-bash notranslate" data-language="bash">pip install python-mysql</pre> <p>Optionally, depending on the MySQL agent configuration, the following values could be set in the master config. These are the defaults:</p> <pre class="highlight-yaml notranslate" data-language="yaml">mysql.host: 127.0.0.1
mysql.port: 2379
mysql.user: None
mysql.password: None
mysql.database: salt_cache
mysql.table_name: cache</pre> <p>Related docs could be found in the <a class="reference external" href="http://python-mysql.readthedocs.io/en/latest/">python-mysql documentation</a>.</p> <p>To use the mysql as a minion data cache backend, set the master <code class="docutils literal notranslate"><span class="pre">cache</span></code> config value to <code class="docutils literal notranslate"><span class="pre">mysql</span></code>:</p> <pre class="highlight-yaml notranslate" data-language="yaml">cache: mysql</pre> <dl class="py function"> <h3 id="salt.cache.mysql_cache.contains"> salt.cache.mysql_cache.contains(bank, key)</h3> <dd>
<p>Checks if the specified bank contains the specified key.</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.cache.mysql_cache.fetch"> salt.cache.mysql_cache.fetch(bank, key)</h3> <dd>
<p>Fetch a key value.</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.cache.mysql_cache.flush"> salt.cache.mysql_cache.flush(bank, key=None)</h3> <dd>
<p>Remove the key from the cache bank with all the key content.</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.cache.mysql_cache.ls"> salt.cache.mysql_cache.ls(bank)</h3> <dd>
<p>Return an iterable object containing all entries stored in the specified bank.</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.cache.mysql_cache.run_query"> salt.cache.mysql_cache.run_query(conn, query, retries=3)</h3> <dd>
<p>Get a cursor and run a query. Reconnect up to <cite>retries</cite> times if needed. Returns: cursor, affected rows counter Raises: SaltCacheError, AttributeError, OperationalError</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.cache.mysql_cache.store"> salt.cache.mysql_cache.store(bank, key, data)</h3> <dd>
<p>Store a key value.</p> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/cache/all/salt.cache.mysql_cache.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/cache/all/salt.cache.mysql_cache.html</a>
  </p>
</div>
