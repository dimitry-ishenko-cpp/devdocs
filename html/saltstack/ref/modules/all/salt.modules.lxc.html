<h1>salt.modules.lxc</h1> <p>Control Linux Containers via Salt</p> <dl class="field-list simple"> <dt class="field-odd">depends</dt> <dd class="field-odd">
<p>lxc package for distribution</p> </dd> </dl> <p>lxc &gt;= 1.0 (even beta alpha) is required</p> <dl class="py function"> <h3 id="salt.modules.lxc.add_veth"> salt.modules.lxc.add_veth(name, interface_name, bridge=None, path=None)</h3> <dd>
<p>Add a veth to a container. Note : this function doesn't update the container config, just add the interface at runtime</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>Name of the container</p> </dd> <dt>interface_name</dt>
<dd>
<p>Name of the interface in the container</p> </dd> <dt>bridge</dt>
<dd>
<p>Name of the bridge to attach the interface to (facultative)</p> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' lxc.add_veth container_name eth1 br1
salt '*' lxc.add_veth container_name eth1</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.apply_network_profile"> salt.modules.lxc.apply_network_profile(name, network_profile, nic_opts=None, path=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.5.0.</span></p> </div> <p>Apply a network profile to a container</p> <dl> <dt>network_profile</dt>
<dd>
<p>profile name or default values (dict)</p> </dd> <dt>nic_opts</dt>
<dd>
<p>values to override in defaults (dict) indexed by nic card names</p> </dd> <dt>path</dt>
<dd>
<p>path to the container parent</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt 'minion' lxc.apply_network_profile web1 centos
salt 'minion' lxc.apply_network_profile web1 centos \
        nic_opts="{'eth0': {'mac': 'xx:xx:xx:xx:xx:xx'}}"
salt 'minion' lxc.apply_network_profile web1 \
        "{'eth0': {'mac': 'xx:xx:xx:xx:xx:yy'}}"
        nic_opts="{'eth0': {'mac': 'xx:xx:xx:xx:xx:xx'}}"</pre> <p>The special case to disable use of ethernet nics:</p> <pre class="highlight-bash notranslate" data-language="bash">salt 'minion' lxc.apply_network_profile web1 centos \
        "{eth0: {disable: true}}"</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.attachable"> salt.modules.lxc.attachable(name, path=None)</h3> <dd>
<p>Return True if the named container can be attached to via the lxc-attach command</p> <dl> <dt>path</dt>
<dd>
<p>path to the container parent default: /var/lib/lxc (system default)</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt 'minion' lxc.attachable ubuntu</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.bootstrap"> salt.modules.lxc.bootstrap(name, config=None, approve_key=True, install=True, pub_key=None, priv_key=None, bootstrap_url=None, force_install=False, unconditional_install=False, path=None, bootstrap_delay=None, bootstrap_args=None, bootstrap_shell=None)</h3> <dd>
<p>Install and configure salt in a container.</p> <dl> <dt>config</dt>
<dd>
<p>Minion configuration options. By default, the <code class="docutils literal notranslate"><span class="pre">master</span></code> option is set to the target host's master.</p> </dd> <dt>approve_key</dt>
<dd>
<p>Request a pre-approval of the generated minion key. Requires that the salt-master be configured to either auto-accept all keys or expect a signing request from the target host. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code></p> </dd> <dt>path</dt>
<dd>
<p>path to the container parent default: /var/lib/lxc (system default)</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>pub_key</dt>
<dd>
<p>Explicit public key to pressed the minion with (optional). This can be either a filepath or a string representing the key</p> </dd> <dt>priv_key</dt>
<dd>
<p>Explicit private key to pressed the minion with (optional). This can be either a filepath or a string representing the key</p> </dd> <dt>bootstrap_delay</dt>
<dd>
<p>Delay in seconds between end of container creation and bootstrapping. Useful when waiting for container to obtain a DHCP lease.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.5.0.</span></p> </div> </dd> <dt>bootstrap_url</dt>
<dd>
<p>url, content or filepath to the salt bootstrap script</p> </dd> <dt>bootstrap_args</dt>
<dd>
<p>salt bootstrap script arguments</p> </dd> <dt>bootstrap_shell</dt>
<dd>
<p>shell to execute the script into</p> </dd> <dt>install</dt>
<dd>
<p>Whether to attempt a full installation of salt-minion if needed.</p> </dd> <dt>force_install</dt>
<dd>
<p>Force installation even if salt-minion is detected, this is the way to run vendor bootstrap scripts even if a salt minion is already present in the container</p> </dd> <dt>unconditional_install</dt>
<dd>
<p>Run the script even if the container seems seeded</p> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt 'minion' lxc.bootstrap container_name [config=config_data] \
        [approve_key=(True|False)] [install=(True|False)]</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.clone"> salt.modules.lxc.clone(name, orig, profile=None, network_profile=None, nic_opts=None, **kwargs)</h3> <dd>
<p>Create a new container as a clone of another container</p> <dl> <dt>name</dt>
<dd>
<p>Name of the container</p> </dd> <dt>orig</dt>
<dd>
<p>Name of the original container to be cloned</p> </dd> <dt>profile</dt>
<dd>
<p>Profile to use in container cloning (see <a class="reference internal" href="#salt.modules.lxc.get_container_profile" title="salt.modules.lxc.get_container_profile"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lxc.get_container_profile</span></code></a>). Values in a profile will be overridden by the <strong>Container Cloning Arguments</strong> listed below.</p> </dd> <dt>path</dt>
<dd>
<p>path to the container parent directory default: /var/lib/lxc (system)</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> </dl> <p><strong>Container Cloning Arguments</strong></p> <dl> <dt>snapshot</dt>
<dd>
<p>Use Copy On Write snapshots (LVM)</p> </dd> <dt>size<span class="classifier">1G</span>
</dt>
<dd>
<p>Size of the volume to create. Only applicable if <code class="docutils literal notranslate"><span class="pre">backing=lvm</span></code>.</p> </dd> <dt>backing</dt>
<dd>
<p>The type of storage to use. Set to <code class="docutils literal notranslate"><span class="pre">lvm</span></code> to use an LVM group. Defaults to filesystem within /var/lib/lxc.</p> </dd> <dt>network_profile</dt>
<dd>
<p>Network profile to use for container</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>nic_opts</dt>
<dd>
<p>give extra opts overriding network profile values</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' lxc.clone myclone orig=orig_container
salt '*' lxc.clone myclone orig=orig_container snapshot=True</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.cloud_init"> salt.modules.lxc.cloud_init(name, vm_=None, **kwargs)</h3> <dd>
<p>Thin wrapper to lxc.init to be used from the saltcloud lxc driver</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>Name of the container may be None and then guessed from saltcloud mapping</p> </dd> <dt><cite>vm_</cite></dt>
<dd>
<p>saltcloud mapping defaults for the vm</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' lxc.cloud_init foo</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.cloud_init_interface"> salt.modules.lxc.cloud_init_interface(name, vm_=None, **kwargs)</h3> <dd>
<p>Interface between salt.cloud.lxc driver and lxc.init <code class="docutils literal notranslate"><span class="pre">vm_</span></code> is a mapping of vm opts in the salt.cloud format as documented for the lxc driver.</p> <p>This can be used either:</p> <ul class="simple"> <li><p>from the salt cloud driver</p></li> <li><p>because you find the argument to give easier here than using directly lxc.init</p></li> </ul> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>BE REALLY CAREFUL CHANGING DEFAULTS !!! IT'S A RETRO COMPATIBLE INTERFACE WITH THE SALT CLOUD DRIVER (ask kiorky).</p> </div> <dl> <dt>name</dt>
<dd>
<p>name of the lxc container to create</p> </dd> <dt>pub_key</dt>
<dd>
<p>public key to preseed the minion with. Can be the keycontent or a filepath</p> </dd> <dt>priv_key</dt>
<dd>
<p>private key to preseed the minion with. Can be the keycontent or a filepath</p> </dd> <dt>path</dt>
<dd>
<p>path to the container parent directory (default: /var/lib/lxc)</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>profile</dt>
<dd>
<p><a class="reference internal" href="https://docs.saltproject.io/en/latest/topics/tutorials/lxc.html#tutorial-lxc-profiles-container"><span class="std std-ref">profile</span></a> selection</p> </dd> <dt>network_profile</dt>
<dd>
<p><a class="reference internal" href="https://docs.saltproject.io/en/latest/topics/tutorials/lxc.html#tutorial-lxc-profiles-network"><span class="std std-ref">network profile</span></a> selection</p> </dd> <dt>nic_opts</dt>
<dd>
<p>per interface settings compatibles with network profile (ipv4/ipv6/link/gateway/mac/netmask)</p> <p>eg:</p> <pre class="highlight-default notranslate" data-language="default">- {'eth0': {'mac': '00:16:3e:01:29:40',
            'gateway': None, (default)
            'link': 'br0', (default)
            'gateway': None, (default)
            'netmask': '', (default)
            'ip': '22.1.4.25'}}</pre> </dd> <dt>unconditional_install</dt>
<dd>
<p>given to lxc.bootstrap (see relative doc)</p> </dd> <dt>force_install</dt>
<dd>
<p>given to lxc.bootstrap (see relative doc)</p> </dd> <dt>config</dt>
<dd>
<p>any extra argument for the salt minion config</p> </dd> <dt>dnsservers</dt>
<dd>
<p>list of DNS servers to set inside the container</p> </dd> <dt>dns_via_dhcp</dt>
<dd>
<p>do not set the dns servers, let them be set by the dhcp.</p> </dd> <dt>autostart</dt>
<dd>
<p>autostart the container at boot time</p> </dd> <dt>password</dt>
<dd>
<p>administrative password for the container</p> </dd> <dt>bootstrap_delay</dt>
<dd>
<p>delay before launching bootstrap script at Container init</p> </dd> </dl> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>Legacy but still supported options:</p> <dl> <dt>from_container</dt>
<dd>
<p>which container we use as a template when running lxc.clone</p> </dd> <dt>image</dt>
<dd>
<p>which template do we use when we are using lxc.create. This is the default mode unless you specify something in from_container</p> </dd> <dt>backing</dt>
<dd>
<p>which backing store to use. Values can be: overlayfs, dir(default), lvm, zfs, brtfs</p> </dd> <dt>fstype</dt>
<dd>
<p>When using a blockdevice level backing store, which filesystem to use on</p> </dd> <dt>size</dt>
<dd>
<p>When using a blockdevice level backing store, which size for the filesystem to use on</p> </dd> <dt>snapshot</dt>
<dd>
<p>Use snapshot when cloning the container source</p> </dd> <dt>vgname</dt>
<dd>
<p>if using LVM: vgname</p> </dd> <dt>lvname</dt>
<dd>
<p>if using LVM: lvname</p> </dd> <dt>thinpool:</dt>
<dd>
<p>if using LVM: thinpool</p> </dd> <dt>ip</dt>
<dd>
<p>ip for the primary nic</p> </dd> <dt>mac</dt>
<dd>
<p>mac address for the primary nic</p> </dd> <dt>netmask</dt>
<dd>
<p>netmask for the primary nic (24) = <code class="docutils literal notranslate"><span class="pre">vm_.get('netmask',</span> <span class="pre">'24')</span></code></p> </dd> <dt>bridge</dt>
<dd>
<p>bridge for the primary nic (lxcbr0)</p> </dd> <dt>gateway</dt>
<dd>
<p>network gateway for the container</p> </dd> <dt>additional_ips</dt>
<dd>
<p>additional ips which will be wired on the main bridge (br0) which is connected to internet. Be aware that you may use manual virtual mac addresses providen by you provider (online, ovh, etc). This is a list of mappings {ip: '', mac: '', netmask:''} Set gateway to None and an interface with a gateway to escape from another interface that eth0. eg:</p> <pre class="highlight-default notranslate" data-language="default">- {'mac': '00:16:3e:01:29:40',
   'gateway': None, (default)
   'link': 'br0', (default)
   'netmask': '', (default)
   'ip': '22.1.4.25'}</pre> </dd> <dt>users</dt>
<dd>
<p>administrative users for the container default: [root] and [root, ubuntu] on ubuntu</p> </dd> <dt>default_nic</dt>
<dd>
<p>name of the first interface, you should really not override this</p> </dd> </dl> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' lxc.cloud_init_interface foo</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.copy_to"> salt.modules.lxc.copy_to(name, source, dest, overwrite=False, makedirs=False, path=None)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.0: </span>Function renamed from <code class="docutils literal notranslate"><span class="pre">lxc.cp</span></code> to <code class="docutils literal notranslate"><span class="pre">lxc.copy_to</span></code> for consistency with other container types. <code class="docutils literal notranslate"><span class="pre">lxc.cp</span></code> will continue to work, however. For versions 2015.2.x and earlier, use <code class="docutils literal notranslate"><span class="pre">lxc.cp</span></code>.</p> </div> <p>Copy a file or directory from the host into a container</p> <dl> <dt>name</dt>
<dd>
<p>Container name</p> </dd> <dt>source</dt>
<dd>
<p>File to be copied to the container</p> </dd> <dt>path</dt>
<dd>
<p>path to the container parent default: /var/lib/lxc (system default)</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>dest</dt>
<dd>
<p>Destination on the container. Must be an absolute path.</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.5.0: </span>If the destination is a directory, the file will be copied into that directory.</p> </div> </dd> <dt>overwrite<span class="classifier">False</span>
</dt>
<dd>
<p>Unless this option is set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, then if a file exists at the location specified by the <code class="docutils literal notranslate"><span class="pre">dest</span></code> argument, an error will be raised.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> </dl> <p>makedirs : False</p> <blockquote> <div>
<p>Create the parent directory on the container if it does not already exist.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.5.0.</span></p> </div> </div>
</blockquote> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt 'minion' lxc.copy_to /tmp/foo /root/foo
salt 'minion' lxc.cp /tmp/foo /root/foo</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.create"> salt.modules.lxc.create(name, config=None, profile=None, network_profile=None, nic_opts=None, **kwargs)</h3> <dd>
<p>Create a new container.</p> <dl> <dt>name</dt>
<dd>
<p>Name of the container</p> </dd> <dt>config</dt>
<dd>
<p>The config file to use for the container. Defaults to system-wide config (usually in /etc/lxc/lxc.conf).</p> </dd> <dt>profile</dt>
<dd>
<p>Profile to use in container creation (see <a class="reference internal" href="#salt.modules.lxc.get_container_profile" title="salt.modules.lxc.get_container_profile"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lxc.get_container_profile</span></code></a>). Values in a profile will be overridden by the <strong>Container Creation Arguments</strong> listed below.</p> </dd> <dt>network_profile</dt>
<dd>
<p>Network profile to use for container</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.5.0.</span></p> </div> </dd> </dl> <p><strong>Container Creation Arguments</strong></p> <dl> <dt>template</dt>
<dd>
<p>The template to use. For example, <code class="docutils literal notranslate"><span class="pre">ubuntu</span></code> or <code class="docutils literal notranslate"><span class="pre">fedora</span></code>. For a full list of available templates, check out the <a class="reference internal" href="#salt.modules.lxc.templates" title="salt.modules.lxc.templates"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lxc.templates</span></code></a> function.</p> <p>Conflicts with the <code class="docutils literal notranslate"><span class="pre">image</span></code> argument.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>The <code class="docutils literal notranslate"><span class="pre">download</span></code> template requires the following three parameters to be defined in <code class="docutils literal notranslate"><span class="pre">options</span></code>:</p> <ul class="simple"> <li><p><strong>dist</strong> - The name of the distribution</p></li> <li><p><strong>release</strong> - Release name/version</p></li> <li><p><strong>arch</strong> - Architecture of the container</p></li> </ul> <p>The available images can be listed using the <a class="reference internal" href="#salt.modules.lxc.images" title="salt.modules.lxc.images"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lxc.images</span></code></a> function.</p> </div> </dd> <dt>options</dt>
<dd>
<p>Template-specific options to pass to the lxc-create command. These correspond to the long options (ones beginning with two dashes) that the template script accepts. For example:</p> <pre class="highlight-bash notranslate" data-language="bash">options='{"dist": "centos", "release": "6", "arch": "amd64"}'</pre> <p>For available template options, refer to the lxc template scripts which are usually located under <code class="docutils literal notranslate"><span class="pre">/usr/share/lxc/templates</span></code>, or run <code class="docutils literal notranslate"><span class="pre">lxc-create</span> <span class="pre">-t</span> <span class="pre">&lt;template&gt;</span> <span class="pre">-h</span></code>.</p> </dd> <dt>image</dt>
<dd>
<p>A tar archive to use as the rootfs for the container. Conflicts with the <code class="docutils literal notranslate"><span class="pre">template</span></code> argument.</p> </dd> <dt>backing</dt>
<dd>
<p>The type of storage to use. Set to <code class="docutils literal notranslate"><span class="pre">lvm</span></code> to use an LVM group. Defaults to filesystem within /var/lib/lxc.</p> </dd> <dt>fstype</dt>
<dd>
<p>Filesystem type to use on LVM logical volume</p> </dd> <dt>size<span class="classifier">1G</span>
</dt>
<dd>
<p>Size of the volume to create. Only applicable if <code class="docutils literal notranslate"><span class="pre">backing=lvm</span></code>.</p> </dd> <dt>vgname<span class="classifier">lxc</span>
</dt>
<dd>
<p>Name of the LVM volume group in which to create the volume for this container. Only applicable if <code class="docutils literal notranslate"><span class="pre">backing=lvm</span></code>.</p> </dd> <dt>lvname</dt>
<dd>
<p>Name of the LVM logical volume in which to create the volume for this container. Only applicable if <code class="docutils literal notranslate"><span class="pre">backing=lvm</span></code>.</p> </dd> <dt>thinpool</dt>
<dd>
<p>Name of a pool volume that will be used for thin-provisioning this container. Only applicable if <code class="docutils literal notranslate"><span class="pre">backing=lvm</span></code>.</p> </dd> <dt>nic_opts</dt>
<dd>
<p>give extra opts overriding network profile values</p> </dd> <dt>path</dt>
<dd>
<p>parent path for the container creation (default: /var/lib/lxc)</p> </dd> <dt>zfsroot</dt>
<dd>
<p>Name of the ZFS root in which to create the volume for this container. Only applicable if <code class="docutils literal notranslate"><span class="pre">backing=zfs</span></code>. (default: tank/lxc)</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> </dl> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.destroy"> salt.modules.lxc.destroy(name, stop=False, path=None)</h3> <dd>
<p>Destroy the named container.</p> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>Destroys all data associated with the container.</p> </div> <dl> <dt>path</dt>
<dd>
<p>path to the container parent directory (default: /var/lib/lxc)</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>stop<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, the container will be destroyed even if it is running/frozen.</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.5.0: </span>Default value changed to <code class="docutils literal notranslate"><span class="pre">False</span></code>. This more closely matches the behavior of <code class="docutils literal notranslate"><span class="pre">lxc-destroy(1)</span></code>, and also makes it less likely that an accidental command will destroy a running container that was being used for important things.</p> </div> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' lxc.destroy foo
salt '*' lxc.destroy foo stop=True</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.edit_conf"> salt.modules.lxc.edit_conf(conf_file, out_format='simple', read_only=False, lxc_config=None, **kwargs)</h3> <dd>
<p>Edit an LXC configuration file. If a setting is already present inside the file, its value will be replaced. If it does not exist, it will be appended to the end of the file. Comments and blank lines will be kept in-tact if they already exist in the file.</p> <dl class="simple"> <dt>out_format:</dt>
<dd>
<p>Set to simple if you need backward compatibility (multiple items for a simple key is not supported)</p> </dd> <dt>read_only:</dt>
<dd>
<p>return only the edited configuration without applying it to the underlying lxc configuration file</p> </dd> <dt>lxc_config:</dt>
<dd>
<p>List of dict containning lxc configuration items For network configuration, you also need to add the device it belongs to, otherwise it will default to eth0. Also, any change to a network parameter will result in the whole network reconfiguration to avoid mismatchs, be aware of that !</p> </dd> </dl> <p>After the file is edited, its contents will be returned. By default, it will be returned in <code class="docutils literal notranslate"><span class="pre">simple</span></code> format, meaning an unordered dict (which may not represent the actual file order). Passing in an <code class="docutils literal notranslate"><span class="pre">out_format</span></code> of <code class="docutils literal notranslate"><span class="pre">commented</span></code> will return a data structure which accurately represents the order and content of the file.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt 'minion' lxc.edit_conf /etc/lxc/mycontainer.conf \
    out_format=commented lxc.network.type=veth
salt 'minion' lxc.edit_conf /etc/lxc/mycontainer.conf \
    out_format=commented \
    lxc_config="[{'lxc.network.name': 'eth0', \
                  'lxc.network.ipv4': '1.2.3.4'},
                 {'lxc.network.name': 'eth2', \
                  'lxc.network.ipv4': '1.2.3.5',\
                  'lxc.network.gateway': '1.2.3.1'}]"</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.exists"> salt.modules.lxc.exists(name, path=None)</h3> <dd>
<p>Returns whether the named container exists.</p> <dl> <dt>path</dt>
<dd>
<p>path to the container parent directory (default: /var/lib/lxc)</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' lxc.exists name</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.freeze"> salt.modules.lxc.freeze(name, **kwargs)</h3> <dd>
<p>Freeze the named container</p> <dl> <dt>path</dt>
<dd>
<p>path to the container parent directory default: /var/lib/lxc (system)</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>start<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code> and the container is stopped, the container will be started before attempting to freeze.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.5.0.</span></p> </div> </dd> <dt>use_vt</dt>
<dd>
<p>run the command through VT</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' lxc.freeze name</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.get_container_profile"> salt.modules.lxc.get_container_profile(name=None, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.5.0.</span></p> </div> <p>Gather a pre-configured set of container configuration parameters. If no arguments are passed, an empty profile is returned.</p> <p>Profiles can be defined in the minion or master config files, or in pillar or grains, and are loaded using <a class="reference internal" href="salt.modules.config.html#salt.modules.config.get" title="salt.modules.config.get"><code class="xref py py-mod docutils literal notranslate"><span class="pre">config.get</span></code></a>. The key under which LXC profiles must be configured is <code class="docutils literal notranslate"><span class="pre">lxc.container_profile.profile_name</span></code>. An example container profile would be as follows:</p> <pre class="highlight-yaml notranslate" data-language="yaml">lxc.container_profile:
  ubuntu:
    template: ubuntu
    backing: lvm
    vgname: lxc
    size: 1G</pre> <p>Parameters set in a profile can be overridden by passing additional container creation arguments (such as the ones passed to <a class="reference internal" href="#salt.modules.lxc.create" title="salt.modules.lxc.create"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lxc.create</span></code></a>) to this function.</p> <p>A profile can be defined either as the name of the profile, or a dictionary of variable names and values. See the <a class="reference internal" href="https://docs.saltproject.io/en/latest/topics/tutorials/lxc.html#tutorial-lxc-profiles"><span class="std std-ref">LXC Tutorial</span></a> for more information on how to use LXC profiles.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-call lxc.get_container_profile centos
salt-call lxc.get_container_profile ubuntu template=ubuntu backing=overlayfs</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.get_network_profile"> salt.modules.lxc.get_network_profile(name=None, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.5.0.</span></p> </div> <p>Gather a pre-configured set of network configuration parameters. If no arguments are passed, the following default profile is returned:</p> <pre class="highlight-python notranslate" data-language="python">{'eth0': {'link': 'br0', 'type': 'veth', 'flags': 'up'}}</pre> <p>Profiles can be defined in the minion or master config files, or in pillar or grains, and are loaded using <a class="reference internal" href="salt.modules.config.html#salt.modules.config.get" title="salt.modules.config.get"><code class="xref py py-mod docutils literal notranslate"><span class="pre">config.get</span></code></a>. The key under which LXC profiles must be configured is <code class="docutils literal notranslate"><span class="pre">lxc.network_profile</span></code>. An example network profile would be as follows:</p> <pre class="highlight-yaml notranslate" data-language="yaml">lxc.network_profile.centos:
  eth0:
    link: br0
    type: veth
    flags: up</pre> <p>To disable networking entirely:</p> <pre class="highlight-yaml notranslate" data-language="yaml">lxc.network_profile.centos:
  eth0:
    disable: true</pre> <p>Parameters set in a profile can be overridden by passing additional arguments to this function.</p> <p>A profile can be passed either as the name of the profile, or a dictionary of variable names and values. See the <a class="reference internal" href="https://docs.saltproject.io/en/latest/topics/tutorials/lxc.html#tutorial-lxc-profiles"><span class="std std-ref">LXC Tutorial</span></a> for more information on how to use network profiles.</p> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>The <code class="docutils literal notranslate"><span class="pre">ipv4</span></code>, <code class="docutils literal notranslate"><span class="pre">ipv6</span></code>, <code class="docutils literal notranslate"><span class="pre">gateway</span></code>, and <code class="docutils literal notranslate"><span class="pre">link</span></code> (bridge) settings in network profiles will only work if the container doesn't redefine the network configuration (for example in <code class="docutils literal notranslate"><span class="pre">/etc/sysconfig/network-scripts/ifcfg-&lt;interface_name&gt;</span></code> on RHEL/CentOS, or <code class="docutils literal notranslate"><span class="pre">/etc/network/interfaces</span></code> on Debian/Ubuntu/etc.)</p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-call lxc.get_network_profile default</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.get_parameter"> salt.modules.lxc.get_parameter(name, parameter, path=None)</h3> <dd>
<p>Returns the value of a cgroup parameter for a container</p> <dl> <dt>path</dt>
<dd>
<p>path to the container parent directory default: /var/lib/lxc (system)</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' lxc.get_parameter container_name memory.limit_in_bytes</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.get_pid"> salt.modules.lxc.get_pid(name, path=None)</h3> <dd>
<p>Returns a container pid. Throw an exception if the container isn't running.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' lxc.get_pid name</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.get_root_path"> salt.modules.lxc.get_root_path(path)</h3> <dd>
<p>Get the configured lxc root for containers</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' lxc.get_root_path</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.images"> salt.modules.lxc.images(dist=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.5.0.</span></p> </div> <p>List the available images for LXC's <code class="docutils literal notranslate"><span class="pre">download</span></code> template.</p> <dl class="simple"> <dt>dist<span class="classifier">None</span>
</dt>
<dd>
<p>Filter results to a single Linux distribution</p> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion lxc.images
salt myminion lxc.images dist=centos</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.info"> salt.modules.lxc.info(name, path=None)</h3> <dd>
<p>Returns information about a container</p> <dl> <dt>path</dt>
<dd>
<p>path to the container parent directory default: /var/lib/lxc (system)</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' lxc.info name</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.init"> salt.modules.lxc.init(name, config=None, cpuset=None, cpushare=None, memory=None, profile=None, network_profile=None, nic_opts=None, cpu=None, autostart=True, password=None, password_encrypted=None, users=None, dnsservers=None, searchdomains=None, bridge=None, gateway=None, pub_key=None, priv_key=None, force_install=False, unconditional_install=False, bootstrap_delay=None, bootstrap_args=None, bootstrap_shell=None, bootstrap_url=None, **kwargs)</h3> <dd>
<p>Initialize a new container.</p> <p>This is a partial idempotent function as if it is already provisioned, we will reset a bit the lxc configuration file but much of the hard work will be escaped as markers will prevent re-execution of harmful tasks.</p> <dl> <dt>name</dt>
<dd>
<p>Name of the container</p> </dd> <dt>image</dt>
<dd>
<p>A tar archive to use as the rootfs for the container. Conflicts with the <code class="docutils literal notranslate"><span class="pre">template</span></code> argument.</p> </dd> <dt>cpus</dt>
<dd>
<p>Select a random number of cpu cores and assign it to the cpuset, if the cpuset option is set then this option will be ignored</p> </dd> <dt>cpuset</dt>
<dd>
<p>Explicitly define the cpus this container will be bound to</p> </dd> <dt>cpushare</dt>
<dd>
<p>cgroups cpu shares</p> </dd> <dt>autostart</dt>
<dd>
<p>autostart container on reboot</p> </dd> <dt>memory</dt>
<dd>
<p>cgroups memory limit, in MB</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.5.0: </span>If no value is passed, no limit is set. In earlier Salt versions, not passing this value causes a 1024MB memory limit to be set, and it was necessary to pass <code class="docutils literal notranslate"><span class="pre">memory=0</span></code> to set no limit.</p> </div> </dd> <dt>gateway</dt>
<dd>
<p>the ipv4 gateway to use the default does nothing more than lxcutils does</p> </dd> <dt>bridge</dt>
<dd>
<p>the bridge to use the default does nothing more than lxcutils does</p> </dd> <dt>network_profile</dt>
<dd>
<p>Network profile to use for the container</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.5.0.</span></p> </div> </dd> <dt>nic_opts</dt>
<dd>
<p>Extra options for network interfaces, will override</p> <p><code class="docutils literal notranslate"><span class="pre">{"eth0":</span> <span class="pre">{"hwaddr":</span> <span class="pre">"aa:bb:cc:dd:ee:ff",</span> <span class="pre">"ipv4":</span> <span class="pre">"10.1.1.1",</span> <span class="pre">"ipv6":</span> <span class="pre">"2001:db8::ff00:42:8329"}}</span></code></p> <p>or</p> <p><code class="docutils literal notranslate"><span class="pre">{"eth0":</span> <span class="pre">{"hwaddr":</span> <span class="pre">"aa:bb:cc:dd:ee:ff",</span> <span class="pre">"ipv4":</span> <span class="pre">"10.1.1.1/24",</span> <span class="pre">"ipv6":</span> <span class="pre">"2001:db8::ff00:42:8329"}}</span></code></p> </dd> <dt>users</dt>
<dd>
<p>Users for which the password defined in the <code class="docutils literal notranslate"><span class="pre">password</span></code> param should be set. Can be passed as a comma separated list or a python list. Defaults to just the <code class="docutils literal notranslate"><span class="pre">root</span></code> user.</p> </dd> <dt>password</dt>
<dd>
<p>Set the initial password for the users defined in the <code class="docutils literal notranslate"><span class="pre">users</span></code> parameter</p> </dd> <dt>password_encrypted<span class="classifier">False</span>
</dt>
<dd>
<p>Set to <code class="docutils literal notranslate"><span class="pre">True</span></code> to denote a password hash instead of a plaintext password</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.5.0.</span></p> </div> </dd> <dt>profile</dt>
<dd>
<p>A LXC profile (defined in config or pillar). This can be either a real profile mapping or a string to retrieve it in configuration</p> </dd> <dt>start</dt>
<dd>
<p>Start the newly-created container</p> </dd> <dt>dnsservers</dt>
<dd>
<p>list of dns servers to set in the container, default [] (no setting)</p> </dd> <dt>seed</dt>
<dd>
<p>Seed the container with the minion config. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code></p> </dd> <dt>install</dt>
<dd>
<p>If salt-minion is not already installed, install it. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code></p> </dd> <dt>config</dt>
<dd>
<p>Optional config parameters. By default, the id is set to the name of the container.</p> </dd> <dt>master</dt>
<dd>
<p>salt master (default to minion's master)</p> </dd> <dt>master_port</dt>
<dd>
<p>salt master port (default to minion's master port)</p> </dd> <dt>pub_key</dt>
<dd>
<p>Explicit public key to preseed the minion with (optional). This can be either a filepath or a string representing the key</p> </dd> <dt>priv_key</dt>
<dd>
<p>Explicit private key to preseed the minion with (optional). This can be either a filepath or a string representing the key</p> </dd> <dt>approve_key</dt>
<dd>
<p>If explicit preseeding is not used; Attempt to request key approval from the master. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code></p> </dd> <dt>path</dt>
<dd>
<p>path to the container parent directory default: /var/lib/lxc (system)</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>clone_from</dt>
<dd>
<p>Original from which to use a clone operation to create the container. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code></p> </dd> <dt>bootstrap_delay</dt>
<dd>
<p>Delay in seconds between end of container creation and bootstrapping. Useful when waiting for container to obtain a DHCP lease.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.5.0.</span></p> </div> </dd> <dt>bootstrap_url</dt>
<dd>
<p>See lxc.bootstrap</p> </dd> <dt>bootstrap_shell</dt>
<dd>
<p>See lxc.bootstrap</p> </dd> <dt>bootstrap_args</dt>
<dd>
<p>See lxc.bootstrap</p> </dd> <dt>force_install</dt>
<dd>
<p>Force installation even if salt-minion is detected, this is the way to run vendor bootstrap scripts even if a salt minion is already present in the container</p> </dd> <dt>unconditional_install</dt>
<dd>
<p>Run the script even if the container seems seeded</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt 'minion' lxc.init name [cpuset=cgroups_cpuset] \
        [cpushare=cgroups_cpushare] [memory=cgroups_memory] \
        [nic=nic_profile] [profile=lxc_profile] \
        [nic_opts=nic_opts] [start=(True|False)] \
        [seed=(True|False)] [install=(True|False)] \
        [config=minion_config] [approve_key=(True|False) \
        [clone_from=original] [autostart=True] \
        [priv_key=/path_or_content] [pub_key=/path_or_content] \
        [bridge=lxcbr0] [gateway=10.0.3.1] \
        [dnsservers[dns1,dns2]] \
        [users=[foo]] [password='secret'] \
        [password_encrypted=(True|False)]</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.list_"> salt.modules.lxc.list_(extra=False, limit=None, path=None)</h3> <dd>
<p>List containers classified by state</p> <dl> <dt>extra</dt>
<dd>
<p>Also get per-container specific info. This will change the return data. Instead of returning a list of containers, a dictionary of containers and each container's output from <a class="reference internal" href="#salt.modules.lxc.info" title="salt.modules.lxc.info"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lxc.info</span></code></a>.</p> </dd> <dt>path</dt>
<dd>
<p>path to the container parent directory default: /var/lib/lxc (system)</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>limit</dt>
<dd>
<p>Return output matching a specific state (<strong>frozen</strong>, <strong>running</strong>, or <strong>stopped</strong>).</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.5.0.</span></p> </div> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' lxc.list
salt '*' lxc.list extra=True
salt '*' lxc.list limit=running</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.ls_"> salt.modules.lxc.ls_(active=None, cache=True, path=None)</h3> <dd>
<p>Return a list of the containers available on the minion</p> <dl> <dt>path</dt>
<dd>
<p>path to the container parent directory default: /var/lib/lxc (system)</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>active</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, return only active (i.e. running) containers</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.5.0.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' lxc.ls
salt '*' lxc.ls active=True</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.read_conf"> salt.modules.lxc.read_conf(conf_file, out_format='simple')</h3> <dd>
<p>Read in an LXC configuration file. By default returns a simple, unsorted dict, but can also return a more detailed structure including blank lines and comments.</p> <dl class="simple"> <dt>out_format:</dt>
<dd>
<p>set to 'simple' if you need the old and unsupported behavior. This won't support the multiple lxc values (eg: multiple network nics)</p> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt 'minion' lxc.read_conf /etc/lxc/mycontainer.conf
salt 'minion' lxc.read_conf /etc/lxc/mycontainer.conf out_format=commented</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.reboot"> salt.modules.lxc.reboot(name, path=None)</h3> <dd>
<p>Reboot a container.</p> <dl> <dt>path</dt>
<dd>
<p>path to the container parent default: /var/lib/lxc (system default)</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt 'minion' lxc.reboot myvm</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.reconfigure"> salt.modules.lxc.reconfigure(name, cpu=None, cpuset=None, cpushare=None, memory=None, profile=None, network_profile=None, nic_opts=None, bridge=None, gateway=None, autostart=None, utsname=None, rootfs=None, path=None, **kwargs)</h3> <dd>
<p>Reconfigure a container.</p> <p>This only applies to a few property</p> <dl> <dt>name</dt>
<dd>
<p>Name of the container.</p> </dd> <dt>utsname</dt>
<dd>
<p>utsname of the container.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.0.</span></p> </div> </dd> <dt>rootfs</dt>
<dd>
<p>rootfs of the container.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.0.</span></p> </div> </dd> <dt>cpu</dt>
<dd>
<p>Select a random number of cpu cores and assign it to the cpuset, if the cpuset option is set then this option will be ignored</p> </dd> <dt>cpuset</dt>
<dd>
<p>Explicitly define the cpus this container will be bound to</p> </dd> <dt>cpushare</dt>
<dd>
<p>cgroups cpu shares.</p> </dd> <dt>autostart</dt>
<dd>
<p>autostart container on reboot</p> </dd> <dt>memory</dt>
<dd>
<p>cgroups memory limit, in MB. (0 for nolimit, None for old default 1024MB)</p> </dd> <dt>gateway</dt>
<dd>
<p>the ipv4 gateway to use the default does nothing more than lxcutils does</p> </dd> <dt>bridge</dt>
<dd>
<p>the bridge to use the default does nothing more than lxcutils does</p> </dd> <dt>nic</dt>
<dd>
<p>Network interfaces profile (defined in config or pillar).</p> </dd> <dt>nic_opts</dt>
<dd>
<p>Extra options for network interfaces, will override</p> <p><code class="docutils literal notranslate"><span class="pre">{"eth0":</span> <span class="pre">{"mac":</span> <span class="pre">"aa:bb:cc:dd:ee:ff",</span> <span class="pre">"ipv4":</span> <span class="pre">"10.1.1.1",</span> <span class="pre">"ipv6":</span> <span class="pre">"2001:db8::ff00:42:8329"}}</span></code></p> <p>or</p> <p><code class="docutils literal notranslate"><span class="pre">{"eth0":</span> <span class="pre">{"mac":</span> <span class="pre">"aa:bb:cc:dd:ee:ff",</span> <span class="pre">"ipv4":</span> <span class="pre">"10.1.1.1/24",</span> <span class="pre">"ipv6":</span> <span class="pre">"2001:db8::ff00:42:8329"}}</span></code></p> </dd> <dt>path</dt>
<dd>
<p>path to the container parent</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-call -lall mc_lxc_fork.reconfigure foobar nic_opts="{'eth1': {'mac': '00:16:3e:dd:ee:44'}}" memory=4</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.restart"> salt.modules.lxc.restart(name, path=None, lxc_config=None, force=False)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.5.0.</span></p> </div> <p>Restart the named container. If the container was not running, the container will merely be started.</p> <dl> <dt>name</dt>
<dd>
<p>The name of the container</p> </dd> <dt>path</dt>
<dd>
<p>path to the container parent directory default: /var/lib/lxc (system)</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>lxc_config</dt>
<dd>
<p>path to a lxc config file config file will be guessed from container name otherwise</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>force<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, the container will be force-stopped instead of gracefully shut down</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion lxc.restart name</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.retcode"> salt.modules.lxc.retcode(name, cmd, no_start=False, preserve_state=True, stdin=None, python_shell=True, output_loglevel='debug', use_vt=False, path=None, ignore_retcode=False, chroot_fallback=False, keep_env='http_proxy,https_proxy,no_proxy')</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.5.0.</span></p> </div> <p>Run <a class="reference internal" href="salt.modules.cmdmod.html#salt.modules.cmdmod.retcode" title="salt.modules.cmdmod.retcode"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cmd.retcode</span></code></a> within a container</p> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>Many shell builtins do not work, failing with stderr similar to the following:</p> <pre class="highlight-bash notranslate" data-language="bash">lxc_container: No such file or directory - failed to exec 'command'</pre> <p>The same error will be displayed in stderr if the command being run does not exist. If the retcode is nonzero and not what was expected, try using <a class="reference internal" href="#salt.modules.lxc.run_stderr" title="salt.modules.lxc.run_stderr"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lxc.run_stderr</span></code></a> or <a class="reference internal" href="#salt.modules.lxc.run_all" title="salt.modules.lxc.run_all"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lxc.run_all</span></code></a>.</p> </div> <dl> <dt>name</dt>
<dd>
<p>Name of the container in which to run the command</p> </dd> <dt>cmd</dt>
<dd>
<p>Command to run</p> </dd> <dt>no_start<span class="classifier">False</span>
</dt>
<dd>
<p>If the container is not running, don't start it</p> </dd> <dt>preserve_state<span class="classifier">True</span>
</dt>
<dd>
<p>After running the command, return the container to its previous state</p> </dd> <dt>path</dt>
<dd>
<p>path to the container parent default: /var/lib/lxc (system default)</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>stdin<span class="classifier">None</span>
</dt>
<dd>
<p>Standard input to be used for the command</p> </dd> <dt>output_loglevel<span class="classifier">debug</span>
</dt>
<dd>
<p>Level at which to log the output from the command. Set to <code class="docutils literal notranslate"><span class="pre">quiet</span></code> to suppress logging.</p> </dd> <dt>use_vt<span class="classifier">False</span>
</dt>
<dd>
<p>Use SaltStack's utils.vt to stream output to console <code class="docutils literal notranslate"><span class="pre">output=all</span></code>.</p> </dd> <dt>keep_env<span class="classifier">http_proxy,https_proxy,no_proxy</span>
</dt>
<dd>
<p>A list of env vars to preserve. May be passed as commma-delimited list.</p> </dd> <dt>chroot_fallback</dt>
<dd>
<p>if the container is not running, try to run the command using chroot default: false</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion lxc.retcode mycontainer 'ip addr show'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.run"> salt.modules.lxc.run(name, cmd, no_start=False, preserve_state=True, stdin=None, python_shell=True, output_loglevel='debug', use_vt=False, path=None, ignore_retcode=False, chroot_fallback=False, keep_env='http_proxy,https_proxy,no_proxy')</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> <p>Run <a class="reference internal" href="salt.modules.cmdmod.html#salt.modules.cmdmod.run" title="salt.modules.cmdmod.run"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cmd.run</span></code></a> within a container</p> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>Many shell builtins do not work, failing with stderr similar to the following:</p> <pre class="highlight-bash notranslate" data-language="bash">lxc_container: No such file or directory - failed to exec 'command'</pre> <p>The same error will be displayed in stderr if the command being run does not exist. If no output is returned using this function, try using <a class="reference internal" href="#salt.modules.lxc.run_stderr" title="salt.modules.lxc.run_stderr"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lxc.run_stderr</span></code></a> or <a class="reference internal" href="#salt.modules.lxc.run_all" title="salt.modules.lxc.run_all"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lxc.run_all</span></code></a>.</p> </div> <dl> <dt>name</dt>
<dd>
<p>Name of the container in which to run the command</p> </dd> <dt>cmd</dt>
<dd>
<p>Command to run</p> </dd> <dt>path</dt>
<dd>
<p>path to the container parent default: /var/lib/lxc (system default)</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>no_start<span class="classifier">False</span>
</dt>
<dd>
<p>If the container is not running, don't start it</p> </dd> <dt>preserve_state<span class="classifier">True</span>
</dt>
<dd>
<p>After running the command, return the container to its previous state</p> </dd> <dt>stdin<span class="classifier">None</span>
</dt>
<dd>
<p>Standard input to be used for the command</p> </dd> <dt>output_loglevel<span class="classifier">debug</span>
</dt>
<dd>
<p>Level at which to log the output from the command. Set to <code class="docutils literal notranslate"><span class="pre">quiet</span></code> to suppress logging.</p> </dd> <dt>use_vt<span class="classifier">False</span>
</dt>
<dd>
<p>Use SaltStack's utils.vt to stream output to console. Assumes <code class="docutils literal notranslate"><span class="pre">output=all</span></code>.</p> </dd> <dt>chroot_fallback</dt>
<dd>
<p>if the container is not running, try to run the command using chroot default: false</p> </dd> <dt>keep_env<span class="classifier">http_proxy,https_proxy,no_proxy</span>
</dt>
<dd>
<p>A list of env vars to preserve. May be passed as commma-delimited list.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion lxc.run mycontainer 'ifconfig -a'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.run_all"> salt.modules.lxc.run_all(name, cmd, no_start=False, preserve_state=True, stdin=None, python_shell=True, output_loglevel='debug', use_vt=False, path=None, ignore_retcode=False, chroot_fallback=False, keep_env='http_proxy,https_proxy,no_proxy')</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.5.0.</span></p> </div> <p>Run <a class="reference internal" href="salt.modules.cmdmod.html#salt.modules.cmdmod.run_all" title="salt.modules.cmdmod.run_all"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cmd.run_all</span></code></a> within a container</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>While the command is run within the container, it is initiated from the host. Therefore, the PID in the return dict is from the host, not from the container.</p> </div> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>Many shell builtins do not work, failing with stderr similar to the following:</p> <pre class="highlight-bash notranslate" data-language="bash">lxc_container: No such file or directory - failed to exec 'command'</pre> <p>The same error will be displayed in stderr if the command being run does not exist.</p> </div> <dl> <dt>name</dt>
<dd>
<p>Name of the container in which to run the command</p> </dd> <dt>path</dt>
<dd>
<p>path to the container parent default: /var/lib/lxc (system default)</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>cmd</dt>
<dd>
<p>Command to run</p> </dd> <dt>no_start<span class="classifier">False</span>
</dt>
<dd>
<p>If the container is not running, don't start it</p> </dd> <dt>preserve_state<span class="classifier">True</span>
</dt>
<dd>
<p>After running the command, return the container to its previous state</p> </dd> <dt>stdin<span class="classifier">None</span>
</dt>
<dd>
<p>Standard input to be used for the command</p> </dd> <dt>output_loglevel<span class="classifier">debug</span>
</dt>
<dd>
<p>Level at which to log the output from the command. Set to <code class="docutils literal notranslate"><span class="pre">quiet</span></code> to suppress logging.</p> </dd> <dt>use_vt<span class="classifier">False</span>
</dt>
<dd>
<p>Use SaltStack's utils.vt to stream output to console <code class="docutils literal notranslate"><span class="pre">output=all</span></code>.</p> </dd> <dt>keep_env<span class="classifier">http_proxy,https_proxy,no_proxy</span>
</dt>
<dd>
<p>A list of env vars to preserve. May be passed as commma-delimited list.</p> </dd> <dt>chroot_fallback</dt>
<dd>
<p>if the container is not running, try to run the command using chroot default: false</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion lxc.run_all mycontainer 'ip addr show'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.run_stderr"> salt.modules.lxc.run_stderr(name, cmd, no_start=False, preserve_state=True, stdin=None, python_shell=True, output_loglevel='debug', use_vt=False, path=None, ignore_retcode=False, chroot_fallback=False, keep_env='http_proxy,https_proxy,no_proxy')</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.5.0.</span></p> </div> <p>Run <a class="reference internal" href="salt.modules.cmdmod.html#salt.modules.cmdmod.run_stderr" title="salt.modules.cmdmod.run_stderr"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cmd.run_stderr</span></code></a> within a container</p> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>Many shell builtins do not work, failing with stderr similar to the following:</p> <pre class="highlight-bash notranslate" data-language="bash">lxc_container: No such file or directory - failed to exec 'command'</pre> <p>The same error will be displayed if the command being run does not exist.</p> </div> <dl> <dt>name</dt>
<dd>
<p>Name of the container in which to run the command</p> </dd> <dt>cmd</dt>
<dd>
<p>Command to run</p> </dd> <dt>path</dt>
<dd>
<p>path to the container parent default: /var/lib/lxc (system default)</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>no_start<span class="classifier">False</span>
</dt>
<dd>
<p>If the container is not running, don't start it</p> </dd> <dt>preserve_state<span class="classifier">True</span>
</dt>
<dd>
<p>After running the command, return the container to its previous state</p> </dd> <dt>stdin<span class="classifier">None</span>
</dt>
<dd>
<p>Standard input to be used for the command</p> </dd> <dt>output_loglevel<span class="classifier">debug</span>
</dt>
<dd>
<p>Level at which to log the output from the command. Set to <code class="docutils literal notranslate"><span class="pre">quiet</span></code> to suppress logging.</p> </dd> <dt>use_vt<span class="classifier">False</span>
</dt>
<dd>
<p>Use SaltStack's utils.vt to stream output to console <code class="docutils literal notranslate"><span class="pre">output=all</span></code>.</p> </dd> <dt>keep_env<span class="classifier">http_proxy,https_proxy,no_proxy</span>
</dt>
<dd>
<p>A list of env vars to preserve. May be passed as commma-delimited list.</p> </dd> <dt>chroot_fallback</dt>
<dd>
<p>if the container is not running, try to run the command using chroot default: false</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion lxc.run_stderr mycontainer 'ip addr show'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.run_stdout"> salt.modules.lxc.run_stdout(name, cmd, no_start=False, preserve_state=True, stdin=None, python_shell=True, output_loglevel='debug', use_vt=False, path=None, ignore_retcode=False, chroot_fallback=False, keep_env='http_proxy,https_proxy,no_proxy')</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.5.0.</span></p> </div> <p>Run <a class="reference internal" href="salt.modules.cmdmod.html#salt.modules.cmdmod.run_stdout" title="salt.modules.cmdmod.run_stdout"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cmd.run_stdout</span></code></a> within a container</p> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>Many shell builtins do not work, failing with stderr similar to the following:</p> <pre class="highlight-bash notranslate" data-language="bash">lxc_container: No such file or directory - failed to exec 'command'</pre> <p>The same error will be displayed in stderr if the command being run does not exist. If no output is returned using this function, try using <a class="reference internal" href="#salt.modules.lxc.run_stderr" title="salt.modules.lxc.run_stderr"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lxc.run_stderr</span></code></a> or <a class="reference internal" href="#salt.modules.lxc.run_all" title="salt.modules.lxc.run_all"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lxc.run_all</span></code></a>.</p> </div> <dl> <dt>name</dt>
<dd>
<p>Name of the container in which to run the command</p> </dd> <dt>cmd</dt>
<dd>
<p>Command to run</p> </dd> <dt>path</dt>
<dd>
<p>path to the container parent default: /var/lib/lxc (system default)</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>no_start<span class="classifier">False</span>
</dt>
<dd>
<p>If the container is not running, don't start it</p> </dd> <dt>preserve_state<span class="classifier">True</span>
</dt>
<dd>
<p>After running the command, return the container to its previous state</p> </dd> <dt>stdin<span class="classifier">None</span>
</dt>
<dd>
<p>Standard input to be used for the command</p> </dd> <dt>output_loglevel<span class="classifier">debug</span>
</dt>
<dd>
<p>Level at which to log the output from the command. Set to <code class="docutils literal notranslate"><span class="pre">quiet</span></code> to suppress logging.</p> </dd> <dt>use_vt<span class="classifier">False</span>
</dt>
<dd>
<p>Use SaltStack's utils.vt to stream output to console <code class="docutils literal notranslate"><span class="pre">output=all</span></code>.</p> </dd> <dt>keep_env<span class="classifier">http_proxy,https_proxy,no_proxy</span>
</dt>
<dd>
<p>A list of env vars to preserve. May be passed as commma-delimited list.</p> </dd> <dt>chroot_fallback</dt>
<dd>
<p>if the container is not running, try to run the command using chroot default: false</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion lxc.run_stdout mycontainer 'ifconfig -a'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.running_systemd"> salt.modules.lxc.running_systemd(name, cache=True, path=None)</h3> <dd>
<p>Determine if systemD is running</p> <dl> <dt>path</dt>
<dd>
<p>path to the container parent</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' lxc.running_systemd ubuntu</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.search_lxc_bridge"> salt.modules.lxc.search_lxc_bridge()</h3> <dd>
<p>Search the first bridge which is potentially available as LXC bridge</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' lxc.search_lxc_bridge</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.search_lxc_bridges"> salt.modules.lxc.search_lxc_bridges()</h3> <dd>
<p>Search which bridges are potentially available as LXC bridges</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' lxc.search_lxc_bridges</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.set_dns"> salt.modules.lxc.set_dns(name, dnsservers=None, searchdomains=None, path=None)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.5.0: </span>The <code class="docutils literal notranslate"><span class="pre">dnsservers</span></code> and <code class="docutils literal notranslate"><span class="pre">searchdomains</span></code> parameters can now be passed as a comma-separated list.</p> </div> <p>Update /etc/resolv.confo</p> <p>path</p> <blockquote> <div>
<p>path to the container parent default: /var/lib/lxc (system default)</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </div>
</blockquote> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion lxc.set_dns ubuntu "['8.8.8.8', '4.4.4.4']"</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.set_parameter"> salt.modules.lxc.set_parameter(name, parameter, value, path=None)</h3> <dd>
<p>Set the value of a cgroup parameter for a container.</p> <dl> <dt>path</dt>
<dd>
<p>path to the container parent directory default: /var/lib/lxc (system)</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' lxc.set_parameter name parameter value</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.set_password"> salt.modules.lxc.set_password(name, users, password, encrypted=True, path=None)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.5.0: </span>Function renamed from <code class="docutils literal notranslate"><span class="pre">set_pass</span></code> to <code class="docutils literal notranslate"><span class="pre">set_password</span></code>. Additionally, this function now supports (and defaults to using) a password hash instead of a plaintext password.</p> </div> <p>Set the password of one or more system users inside containers</p> <dl> <dt>users</dt>
<dd>
<p>Comma-separated list (or python list) of users to change password</p> </dd> <dt>password</dt>
<dd>
<p>Password to set for the specified user(s)</p> </dd> <dt>encrypted<span class="classifier">True</span>
</dt>
<dd>
<p>If true, <code class="docutils literal notranslate"><span class="pre">password</span></code> must be a password hash. Set to <code class="docutils literal notranslate"><span class="pre">False</span></code> to set a plaintext password (not recommended).</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.5.0.</span></p> </div> </dd> <dt>path</dt>
<dd>
<p>path to the container parent directory default: /var/lib/lxc (system)</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' lxc.set_pass container-name root '$6$uJ2uAyLU$KoI67t8As/0fXtJOPcHKGXmUpcoYUcVR2K6x93walnShTCQvjRwq25yIkiCBOqgbfdKQSFnAo28/ek6716vEV1'
salt '*' lxc.set_pass container-name root foo encrypted=False</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.start"> salt.modules.lxc.start(name, **kwargs)</h3> <dd>
<p>Start the named container</p> <dl> <dt>path</dt>
<dd>
<p>path to the container parent directory default: /var/lib/lxc (system)</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>lxc_config</dt>
<dd>
<p>path to a lxc config file config file will be guessed from container name otherwise</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>use_vt</dt>
<dd>
<p>run the command through VT</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion lxc.start name</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.state"> salt.modules.lxc.state(name, path=None)</h3> <dd>
<p>Returns the state of a container.</p> <dl> <dt>path</dt>
<dd>
<p>path to the container parent directory (default: /var/lib/lxc)</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' lxc.state name</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.stop"> salt.modules.lxc.stop(name, kill=False, path=None, use_vt=None)</h3> <dd>
<p>Stop the named container</p> <dl> <dt>path</dt>
<dd>
<p>path to the container parent directory default: /var/lib/lxc (system)</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>kill: False</dt>
<dd>
<p>Do not wait for the container to stop, kill all tasks in the container. Older LXC versions will stop containers like this irrespective of this argument.</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.5.0: </span>Default value changed to <code class="docutils literal notranslate"><span class="pre">False</span></code></p> </div> </dd> <dt>use_vt</dt>
<dd>
<p>run the command through VT</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion lxc.stop name</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.systemd_running_state"> salt.modules.lxc.systemd_running_state(name, path=None)</h3> <dd>
<p>Get the operational state of a systemd based container</p> <dl> <dt>path</dt>
<dd>
<p>path to the container parent default: /var/lib/lxc (system default)</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion lxc.systemd_running_state ubuntu</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.templates"> salt.modules.lxc.templates()</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.5.0.</span></p> </div> <p>List the available LXC template scripts installed on the minion</p> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion lxc.templates</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.test_bare_started_state"> salt.modules.lxc.test_bare_started_state(name, path=None)</h3> <dd>
<p>Test if a non systemd container is fully started For now, it consists only to test if the container is attachable</p> <dl> <dt>path</dt>
<dd>
<p>path to the container parent default: /var/lib/lxc (system default)</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion lxc.test_bare_started_state ubuntu</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.test_sd_started_state"> salt.modules.lxc.test_sd_started_state(name, path=None)</h3> <dd>
<p>Test if a systemd container is fully started</p> <dl> <dt>path</dt>
<dd>
<p>path to the container parent default: /var/lib/lxc (system default)</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion lxc.test_sd_started_state ubuntu</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.unfreeze"> salt.modules.lxc.unfreeze(name, path=None, use_vt=None)</h3> <dd>
<p>Unfreeze the named container.</p> <dl> <dt>path</dt>
<dd>
<p>path to the container parent directory default: /var/lib/lxc (system)</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>use_vt</dt>
<dd>
<p>run the command through VT</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' lxc.unfreeze name</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.update_lxc_conf"> salt.modules.lxc.update_lxc_conf(name, lxc_conf, lxc_conf_unset, path=None)</h3> <dd>
<p>Edit LXC configuration options</p> <dl> <dt>path</dt>
<dd>
<p>path to the container parent default: /var/lib/lxc (system default)</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion lxc.update_lxc_conf ubuntu \
        lxc_conf="[{'network.ipv4.ip':'10.0.3.5'}]" \
        lxc_conf_unset="['lxc.utsname']"</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.version"> salt.modules.lxc.version()</h3> <dd>
<p>Return the actual lxc client version</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' lxc.version</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.wait_started"> salt.modules.lxc.wait_started(name, path=None, timeout=300)</h3> <dd>
<p>Check that the system has fully inited</p> <p>This is actually very important for systemD based containers</p> <p>see <a class="reference external" href="https://github.com/saltstack/salt/issues/23847">https://github.com/saltstack/salt/issues/23847</a></p> <dl> <dt>path</dt>
<dd>
<p>path to the container parent default: /var/lib/lxc (system default)</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion lxc.wait_started ubuntu</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.lxc.write_conf"> salt.modules.lxc.write_conf(conf_file, conf)</h3> <dd>
<p>Write out an LXC configuration file</p> <p>This is normally only used internally. The format of the data structure must match that which is returned from <code class="docutils literal notranslate"><span class="pre">lxc.read_conf()</span></code>, with <code class="docutils literal notranslate"><span class="pre">out_format</span></code> set to <code class="docutils literal notranslate"><span class="pre">commented</span></code>.</p> <p>An example might look like:</p> <pre class="highlight-python notranslate" data-language="python">[
    {'lxc.utsname': '$CONTAINER_NAME'},
    '# This is a commented line\n',
    '\n',
    {'lxc.mount': '$CONTAINER_FSTAB'},
    {'lxc.rootfs': {'comment': 'This is another test',
                    'value': 'This is another test'}},
    '\n',
    {'lxc.network.type': 'veth'},
    {'lxc.network.flags': 'up'},
    {'lxc.network.link': 'br0'},
    {'lxc.network.mac': '$CONTAINER_MACADDR'},
    {'lxc.network.ipv4': '$CONTAINER_IPADDR'},
    {'lxc.network.name': '$CONTAINER_DEVICENAME'},
]</pre> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt 'minion' lxc.write_conf /etc/lxc/mycontainer.conf \
    out_format=commented</pre> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.lxc.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.lxc.html</a>
  </p>
</div>
