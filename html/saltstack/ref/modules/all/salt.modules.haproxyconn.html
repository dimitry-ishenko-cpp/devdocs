<h1>salt.modules.haproxyconn</h1> <p>Support for haproxy</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2014.7.0.</span></p> </div> <dl class="py function"> <h3 id="salt.modules.haproxyconn.disable_server"> salt.modules.haproxyconn.disable_server(name, backend, socket='/var/run/haproxy.sock')</h3> <dd>
<p>Disable server in haproxy.</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>Server to disable</p> </dd> <dt>backend</dt>
<dd>
<p>haproxy backend, or all backends if "*" is supplied</p> </dd> <dt>socket</dt>
<dd>
<p>haproxy stats socket, default <code class="docutils literal notranslate"><span class="pre">/var/run/haproxy.sock</span></code></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' haproxy.disable_server db1.example.com mysql</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.haproxyconn.enable_server"> salt.modules.haproxyconn.enable_server(name, backend, socket='/var/run/haproxy.sock')</h3> <dd>
<p>Enable Server in haproxy</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>Server to enable</p> </dd> <dt>backend</dt>
<dd>
<p>haproxy backend, or all backends if "*" is supplied</p> </dd> <dt>socket</dt>
<dd>
<p>haproxy stats socket, default <code class="docutils literal notranslate"><span class="pre">/var/run/haproxy.sock</span></code></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' haproxy.enable_server web1.example.com www</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.haproxyconn.get_backend"> salt.modules.haproxyconn.get_backend(backend, socket='/var/run/haproxy.sock')</h3> <dd>
<p>Receive information about a specific backend.</p> <dl class="simple"> <dt>backend</dt>
<dd>
<p>haproxy backend</p> </dd> <dt>socket</dt>
<dd>
<p>haproxy stats socket, default <code class="docutils literal notranslate"><span class="pre">/var/run/haproxy.sock</span></code></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' haproxy.get_backend mysql</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.haproxyconn.get_sessions"> salt.modules.haproxyconn.get_sessions(name, backend, socket='/var/run/haproxy.sock')</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2016.11.0.</span></p> </div> <p>Get number of current sessions on server in backend (scur)</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>Server name</p> </dd> <dt>backend</dt>
<dd>
<p>haproxy backend</p> </dd> <dt>socket</dt>
<dd>
<p>haproxy stats socket, default <code class="docutils literal notranslate"><span class="pre">/var/run/haproxy.sock</span></code></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' haproxy.get_sessions web1.example.com www</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.haproxyconn.get_weight"> salt.modules.haproxyconn.get_weight(name, backend, socket='/var/run/haproxy.sock')</h3> <dd>
<p>Get server weight</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>Server name</p> </dd> <dt>backend</dt>
<dd>
<p>haproxy backend</p> </dd> <dt>socket</dt>
<dd>
<p>haproxy stats socket, default <code class="docutils literal notranslate"><span class="pre">/var/run/haproxy.sock</span></code></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' haproxy.get_weight web1.example.com www</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.haproxyconn.list_backends"> salt.modules.haproxyconn.list_backends(servers=True, socket='/var/run/haproxy.sock')</h3> <dd>
<p>List HaProxy Backends</p> <dl class="simple"> <dt>socket</dt>
<dd>
<p>haproxy stats socket, default <code class="docutils literal notranslate"><span class="pre">/var/run/haproxy.sock</span></code></p> </dd> <dt>servers</dt>
<dd>
<p>list backends with servers</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' haproxy.list_backends</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.haproxyconn.list_frontends"> salt.modules.haproxyconn.list_frontends(socket='/var/run/haproxy.sock')</h3> <dd>
<p>List HaProxy frontends</p> <dl class="simple"> <dt>socket</dt>
<dd>
<p>haproxy stats socket, default <code class="docutils literal notranslate"><span class="pre">/var/run/haproxy.sock</span></code></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' haproxy.list_frontends</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.haproxyconn.list_servers"> salt.modules.haproxyconn.list_servers(backend, socket='/var/run/haproxy.sock', objectify=False)</h3> <dd>
<p>List servers in haproxy backend.</p> <dl class="simple"> <dt>backend</dt>
<dd>
<p>haproxy backend</p> </dd> <dt>socket</dt>
<dd>
<p>haproxy stats socket, default <code class="docutils literal notranslate"><span class="pre">/var/run/haproxy.sock</span></code></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' haproxy.list_servers mysql</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.haproxyconn.set_state"> salt.modules.haproxyconn.set_state(name, backend, state, socket='/var/run/haproxy.sock')</h3> <dd>
<p>Force a server's administrative state to a new state. This can be useful to disable load balancing and/or any traffic to a server. Setting the state to "ready" puts the server in normal mode, and the command is the equivalent of the "enable server" command. Setting the state to "maint" disables any traffic to the server as well as any health checks. This is the equivalent of the "disable server" command. Setting the mode to "drain" only removes the server from load balancing but still allows it to be checked and to accept new persistent connections. Changes are propagated to tracking servers if any.</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>Server name</p> </dd> <dt>backend</dt>
<dd>
<p>haproxy backend</p> </dd> <dt>state</dt>
<dd>
<p>A string of the state to set. Must be 'ready', 'drain', or 'maint'</p> </dd> <dt>socket</dt>
<dd>
<p>haproxy stats socket, default <code class="docutils literal notranslate"><span class="pre">/var/run/haproxy.sock</span></code></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' haproxy.set_state my_proxy_server my_backend ready</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.haproxyconn.set_weight"> salt.modules.haproxyconn.set_weight(name, backend, weight=0, socket='/var/run/haproxy.sock')</h3> <dd>
<p>Set server weight</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>Server name</p> </dd> <dt>backend</dt>
<dd>
<p>haproxy backend</p> </dd> <dt>weight</dt>
<dd>
<p>Server Weight</p> </dd> <dt>socket</dt>
<dd>
<p>haproxy stats socket, default <code class="docutils literal notranslate"><span class="pre">/var/run/haproxy.sock</span></code></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' haproxy.set_weight web1.example.com www 13</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.haproxyconn.show_backends"> salt.modules.haproxyconn.show_backends(socket='/var/run/haproxy.sock')</h3> <dd>
<p>Show HaProxy Backends</p> <dl class="simple"> <dt>socket</dt>
<dd>
<p>haproxy stats socket, default <code class="docutils literal notranslate"><span class="pre">/var/run/haproxy.sock</span></code></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' haproxy.show_backends</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.haproxyconn.show_frontends"> salt.modules.haproxyconn.show_frontends(socket='/var/run/haproxy.sock')</h3> <dd>
<p>Show HaProxy frontends</p> <dl class="simple"> <dt>socket</dt>
<dd>
<p>haproxy stats socket, default <code class="docutils literal notranslate"><span class="pre">/var/run/haproxy.sock</span></code></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' haproxy.show_frontends</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.haproxyconn.wait_state"> salt.modules.haproxyconn.wait_state(backend, server, value='up', timeout=300, socket='/var/run/haproxy.sock')</h3> <dd>
<p>Wait for a specific server state</p> <dl class="simple"> <dt>backend</dt>
<dd>
<p>haproxy backend</p> </dd> <dt>server</dt>
<dd>
<p>targeted server</p> </dd> <dt>value</dt>
<dd>
<p>state value</p> </dd> <dt>timeout</dt>
<dd>
<p>timeout before giving up state value, default 5 min</p> </dd> <dt>socket</dt>
<dd>
<p>haproxy stats socket, default <code class="docutils literal notranslate"><span class="pre">/var/run/haproxy.sock</span></code></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' haproxy.wait_state mysql server01 up 60</pre> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.haproxyconn.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.haproxyconn.html</a>
  </p>
</div>
