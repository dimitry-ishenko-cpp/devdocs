<h1>salt.modules.augeas_cfg</h1> <p>Manages configuration files via augeas</p> <p>This module requires the <code class="docutils literal notranslate"><span class="pre">augeas</span></code> Python module.</p> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>Minimal installations of Debian and Ubuntu have been seen to have packaging bugs with python-augeas, causing the augeas module to fail to import. If the minion has the augeas module installed, but the functions in this execution module fail to run due to being unavailable, first restart the salt-minion service. If the problem persists past that, the following command can be run from the master to determine what is causing the import to fail:</p> <pre class="highlight-bash notranslate" data-language="bash">salt minion-id cmd.run 'python -c "from augeas import Augeas"'</pre> <p>For affected Debian/Ubuntu hosts, installing <code class="docutils literal notranslate"><span class="pre">libpython2.7</span></code> has been known to resolve the issue.</p> </div> <dl class="py function"> <h3 id="salt.modules.augeas_cfg.execute"> salt.modules.augeas_cfg.execute(context=None, lens=None, commands=(), load_path=None)</h3> <dd>
<p>Execute Augeas commands</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2014.7.0.</span></p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' augeas.execute /files/etc/redis/redis.conf \
commands='["set bind 0.0.0.0", "set maxmemory 1G"]'</pre> <dl class="simple"> <dt>context</dt>
<dd>
<p>The Augeas context</p> </dd> <dt>lens</dt>
<dd>
<p>The Augeas lens to use</p> </dd> <dt>commands</dt>
<dd>
<p>The Augeas commands to execute</p> </dd> </dl> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.0.</span></p> </div> <dl class="simple"> <dt>load_path</dt>
<dd>
<p>A colon-spearated list of directories that modules should be searched in. This is in addition to the standard load path and the directories in AUGEAS_LENS_LIB.</p> </dd> </dl> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.augeas_cfg.get"> salt.modules.augeas_cfg.get(path, value='', load_path=None)</h3> <dd>
<p>Get a value for a specific augeas path</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' augeas.get /files/etc/hosts/1/ ipaddr</pre> <dl class="simple"> <dt>path</dt>
<dd>
<p>The path to get the value of</p> </dd> <dt>value</dt>
<dd>
<p>The optional value to get</p> </dd> </dl> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.0.</span></p> </div> <dl class="simple"> <dt>load_path</dt>
<dd>
<p>A colon-spearated list of directories that modules should be searched in. This is in addition to the standard load path and the directories in AUGEAS_LENS_LIB.</p> </dd> </dl> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.augeas_cfg.ls"> salt.modules.augeas_cfg.ls(path, load_path=None)</h3> <dd>
<p>List the direct children of a node</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' augeas.ls /files/etc/passwd</pre> <dl class="simple"> <dt>path</dt>
<dd>
<p>The path to list</p> </dd> </dl> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.0.</span></p> </div> <dl class="simple"> <dt>load_path</dt>
<dd>
<p>A colon-spearated list of directories that modules should be searched in. This is in addition to the standard load path and the directories in AUGEAS_LENS_LIB.</p> </dd> </dl> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.augeas_cfg.match"> salt.modules.augeas_cfg.match(path, value='', load_path=None)</h3> <dd>
<p>Get matches for path expression</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' augeas.match /files/etc/services/service-name ssh</pre> <dl class="simple"> <dt>path</dt>
<dd>
<p>The path to match</p> </dd> <dt>value</dt>
<dd>
<p>The value to match on</p> </dd> </dl> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.0.</span></p> </div> <dl class="simple"> <dt>load_path</dt>
<dd>
<p>A colon-spearated list of directories that modules should be searched in. This is in addition to the standard load path and the directories in AUGEAS_LENS_LIB.</p> </dd> </dl> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.augeas_cfg.remove"> salt.modules.augeas_cfg.remove(path, load_path=None)</h3> <dd>
<p>Get matches for path expression</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' augeas.remove \
/files/etc/sysctl.conf/net.ipv4.conf.all.log_martians</pre> <dl class="simple"> <dt>path</dt>
<dd>
<p>The path to remove</p> </dd> </dl> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.0.</span></p> </div> <dl class="simple"> <dt>load_path</dt>
<dd>
<p>A colon-spearated list of directories that modules should be searched in. This is in addition to the standard load path and the directories in AUGEAS_LENS_LIB.</p> </dd> </dl> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.augeas_cfg.setvalue"> salt.modules.augeas_cfg.setvalue(*args)</h3> <dd>
<p>Set a value for a specific augeas path</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' augeas.setvalue /files/etc/hosts/1/canonical localhost</pre> <p>This will set the first entry in /etc/hosts to localhost</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' augeas.setvalue /files/etc/hosts/01/ipaddr 192.168.1.1 \
                         /files/etc/hosts/01/canonical test</pre> <p>Adds a new host to /etc/hosts the ip address 192.168.1.1 and hostname test</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' augeas.setvalue prefix=/files/etc/sudoers/ \
         "spec[user = '%wheel']/user" "%wheel" \
         "spec[user = '%wheel']/host_group/host" 'ALL' \
         "spec[user = '%wheel']/host_group/command[1]" 'ALL' \
         "spec[user = '%wheel']/host_group/command[1]/tag" 'PASSWD' \
         "spec[user = '%wheel']/host_group/command[2]" '/usr/bin/apt-get' \
         "spec[user = '%wheel']/host_group/command[2]/tag" NOPASSWD</pre> <p>Ensures that the following line is present in /etc/sudoers:</p> <pre class="highlight-default notranslate" data-language="default">%wheel ALL = PASSWD : ALL , NOPASSWD : /usr/bin/apt-get , /usr/bin/aptitude</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.augeas_cfg.tree"> salt.modules.augeas_cfg.tree(path, load_path=None)</h3> <dd>
<p>Returns recursively the complete tree of a node</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' augeas.tree /files/etc/</pre> <dl class="simple"> <dt>path</dt>
<dd>
<p>The base of the recursive listing</p> </dd> </dl> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.0.</span></p> </div> <dl class="simple"> <dt>load_path</dt>
<dd>
<p>A colon-spearated list of directories that modules should be searched in. This is in addition to the standard load path and the directories in AUGEAS_LENS_LIB.</p> </dd> </dl> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.augeas_cfg.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.augeas_cfg.html</a>
  </p>
</div>
