<h1>salt.modules.pagerduty_util</h1> <p>Module for manageing PagerDuty resource</p> <dl class="field-list"> <dt class="field-odd">configuration</dt> <dd class="field-odd">
<p>This module can be used by specifying the name of a configuration profile in the minion config, minion pillar, or master config. The default configuration profile name is 'pagerduty.'</p> <p>For example:</p> <pre class="highlight-yaml notranslate" data-language="yaml">pagerduty:
    pagerduty.api_key: F3Rbyjbve43rfFWf2214
    pagerduty.subdomain: mysubdomain</pre> </dd> </dl> <p>For PagerDuty API details, see <a class="reference external" href="https://developer.pagerduty.com/documentation/rest">https://developer.pagerduty.com/documentation/rest</a></p> <dl class="py function"> <h3 id="salt.modules.pagerduty_util.create_or_update_resource"> salt.modules.pagerduty_util.create_or_update_resource(resource_name, identifier_fields, data, diff=None, profile='pagerduty', subdomain=None, api_key=None)</h3> <dd>
<p>create or update any pagerduty resource Helper method for present().</p> <p>Determining if two resources are the same is different for different PD resource, so this method accepts a diff function. The diff function will be invoked as diff(state_information, object_returned_from_pagerduty), and should return a dict of data to pass to the PagerDuty update API method, or None if no update is to be performed. If no diff method is provided, the default behavor is to scan the keys in the state_information, comparing the matching values in the object_returned_from_pagerduty, and update any values that differ.</p> <p class="rubric">Examples</p> <p>create_or_update_resource("user", ["id","name","email"]) create_or_update_resource("escalation_policies", ["id","name"], diff=my_diff_function)</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.pagerduty_util.delete_resource"> salt.modules.pagerduty_util.delete_resource(resource_name, key, identifier_fields, profile='pagerduty', subdomain=None, api_key=None)</h3> <dd>
<p>delete any pagerduty resource</p> <p>Helper method for absent()</p> <p class="rubric">Example</p> <p>delete_resource("users", key, ["id","name","email"]) # delete by id or name or email</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.pagerduty_util.get_escalation_policies"> salt.modules.pagerduty_util.get_escalation_policies(profile='pagerduty', subdomain=None, api_key=None)</h3> <dd>
<p>List escalation_policies belonging to this account</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion pagerduty.get_escalation_policies</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.pagerduty_util.get_resource"> salt.modules.pagerduty_util.get_resource(resource_name, key, identifier_fields, profile='pagerduty', subdomain=None, api_key=None)</h3> <dd>
<p>Get any single pagerduty resource by key.</p> <p>We allow flexible lookup by any of a list of identifier_fields. So, for example, you can look up users by email address or name by calling:</p> <blockquote> <div>
<p>get_resource('users', key, ['name', 'email'], ...)</p> </div>
</blockquote> <p>This method is mainly used to translate state sls into pagerduty id's for dependent objects. For example, a pagerduty escalation policy contains one or more schedules, which must be passed by their pagerduty id. We look up the schedules by name (using this method), and then translate the names into id's.</p> <p>This method is implemented by getting all objects of the resource type (cached into __context__), then brute force searching through the list and trying to match any of the identifier_fields. The __context__ cache is purged after any create, update or delete to the resource.</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.pagerduty_util.get_schedules"> salt.modules.pagerduty_util.get_schedules(profile='pagerduty', subdomain=None, api_key=None)</h3> <dd>
<p>List schedules belonging to this account</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion pagerduty.get_schedules</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.pagerduty_util.get_services"> salt.modules.pagerduty_util.get_services(profile='pagerduty', subdomain=None, api_key=None)</h3> <dd>
<p>List services belonging to this account</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion pagerduty.get_services</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.pagerduty_util.get_users"> salt.modules.pagerduty_util.get_users(profile='pagerduty', subdomain=None, api_key=None)</h3> <dd>
<p>List users belonging to this account</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion pagerduty.get_users</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.pagerduty_util.resource_absent"> salt.modules.pagerduty_util.resource_absent(resource, identifier_fields, profile='pagerduty', subdomain=None, api_key=None, **kwargs)</h3> <dd>
<p>Generic resource.absent state method. Pagerduty state modules should be a thin wrapper over this method, with a custom diff function.</p> <p>This method calls delete_resource() and formats the result as a salt state return value.</p> <p class="rubric">Example</p> <p>resource_absent("users", ["id","name","email"])</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.pagerduty_util.resource_present"> salt.modules.pagerduty_util.resource_present(resource, identifier_fields, diff=None, profile='pagerduty', subdomain=None, api_key=None, **kwargs)</h3> <dd>
<p>Generic resource.present state method. Pagerduty state modules should be a thin wrapper over this method, with a custom diff function.</p> <p>This method calls create_or_update_resource() and formats the result as a salt state return value.</p> <p class="rubric">Example</p> <p>resource_present("users", ["id","name","email"])</p> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.pagerduty_util.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.pagerduty_util.html</a>
  </p>
</div>
