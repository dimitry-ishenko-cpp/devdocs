<h1>salt.modules.zookeeper</h1> <div class="section" id="zookeeper-module"> <h2>Zookeeper Module</h2> <dl class="field-list simple"> <dt class="field-odd">maintainer</dt> <dd class="field-odd">
<p>SaltStack</p> </dd> <dt class="field-even">maturity</dt> <dd class="field-even">
<p>new</p> </dd> <dt class="field-odd">platform</dt> <dd class="field-odd">
<p>all</p> </dd> <dt class="field-even">depends</dt> <dd class="field-even">
<p>kazoo</p> </dd> </dl> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.0.</span></p> </div> <div class="section" id="configuration"> <h3>Configuration</h3> <dl class="field-list"> <dt class="field-odd">configuration</dt> <dd class="field-odd">
<p>This module is not usable until the following are specified either in a pillar or in the minion's config file:</p> <pre class="highlight-yaml notranslate" data-language="yaml">zookeeper:
  hosts: zoo1,zoo2,zoo3
  default_acl:
    - username: daniel
      password: test
      read: true
      write: true
      create: true
      delete: true
      admin: true
  username: daniel
  password: test</pre> <p>If configuration for multiple zookeeper environments is required, they can be set up as different configuration profiles. For example:</p> <pre class="highlight-yaml notranslate" data-language="yaml">zookeeper:
  prod:
    hosts: zoo1,zoo2,zoo3
    default_acl:
      - username: daniel
        password: test
        read: true
        write: true
        create: true
        delete: true
        admin: true
    username: daniel
    password: test
  dev:
    hosts:
      - dev1
      - dev2
      - dev3
    default_acl:
      - username: daniel
        password: test
        read: true
        write: true
        create: true
        delete: true
        admin: true
    username: daniel
    password: test</pre> </dd> </dl> <dl class="py function"> <h3 id="salt.modules.zookeeper.create"> salt.modules.zookeeper.create(path, value='', acls=None, ephemeral=False, sequence=False, makepath=False, profile=None, hosts=None, scheme=None, username=None, password=None, default_acl=None)</h3> <dd>
<p>Create Znode</p> <dl class="simple"> <dt>path</dt>
<dd>
<p>path of znode to create</p> </dd> <dt>value</dt>
<dd>
<p>value to assign to znode (Default: '')</p> </dd> <dt>acls</dt>
<dd>
<p>list of acl dictionaries to be assigned (Default: None)</p> </dd> <dt>ephemeral</dt>
<dd>
<p>indicate node is ephemeral (Default: False)</p> </dd> <dt>sequence</dt>
<dd>
<p>indicate node is suffixed with a unique index (Default: False)</p> </dd> <dt>makepath</dt>
<dd>
<p>Create parent paths if they do not exist (Default: False)</p> </dd> <dt>profile</dt>
<dd>
<p>Configured Zookeeper profile to authenticate with (Default: None)</p> </dd> <dt>hosts</dt>
<dd>
<p>Lists of Zookeeper Hosts (Default: '127.0.0.1:2181)</p> </dd> <dt>scheme</dt>
<dd>
<p>Scheme to authenticate with (Default: 'digest')</p> </dd> <dt>username</dt>
<dd>
<p>Username to authenticate (Default: None)</p> </dd> <dt>password</dt>
<dd>
<p>Password to authenticate (Default: None)</p> </dd> <dt>default_acl</dt>
<dd>
<p>Default acls to assign if a node is created in this connection (Default: None)</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt minion1 zookeeper.create /test/name daniel profile=prod</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zookeeper.delete"> salt.modules.zookeeper.delete(path, version=- 1, recursive=False, profile=None, hosts=None, scheme=None, username=None, password=None, default_acl=None)</h3> <dd>
<p>Delete znode</p> <dl class="simple"> <dt>path</dt>
<dd>
<p>path to znode</p> </dd> <dt>version</dt>
<dd>
<p>only delete if version matches (Default: -1 (always matches))</p> </dd> <dt>profile</dt>
<dd>
<p>Configured Zookeeper profile to authenticate with (Default: None)</p> </dd> <dt>hosts</dt>
<dd>
<p>Lists of Zookeeper Hosts (Default: '127.0.0.1:2181)</p> </dd> <dt>scheme</dt>
<dd>
<p>Scheme to authenticate with (Default: 'digest')</p> </dd> <dt>username</dt>
<dd>
<p>Username to authenticate (Default: None)</p> </dd> <dt>password</dt>
<dd>
<p>Password to authenticate (Default: None)</p> </dd> <dt>default_acl</dt>
<dd>
<p>Default acls to assign if a node is created in this connection (Default: None)</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt minion1 zookeeper.delete /test/name profile=prod</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zookeeper.ensure_path"> salt.modules.zookeeper.ensure_path(path, acls=None, profile=None, hosts=None, scheme=None, username=None, password=None, default_acl=None)</h3> <dd>
<p>Ensure Znode path exists</p> <dl class="simple"> <dt>path</dt>
<dd>
<p>Parent path to create</p> </dd> <dt>acls</dt>
<dd>
<p>list of acls dictionaries to be assigned (Default: None)</p> </dd> <dt>profile</dt>
<dd>
<p>Configured Zookeeper profile to authenticate with (Default: None)</p> </dd> <dt>hosts</dt>
<dd>
<p>Lists of Zookeeper Hosts (Default: '127.0.0.1:2181)</p> </dd> <dt>scheme</dt>
<dd>
<p>Scheme to authenticate with (Default: 'digest')</p> </dd> <dt>username</dt>
<dd>
<p>Username to authenticate (Default: None)</p> </dd> <dt>password</dt>
<dd>
<p>Password to authenticate (Default: None)</p> </dd> <dt>default_acl</dt>
<dd>
<p>Default acls to assign if a node is created in this connection (Default: None)</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt minion1 zookeeper.ensure_path /test/name profile=prod</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zookeeper.exists"> salt.modules.zookeeper.exists(path, profile=None, hosts=None, scheme=None, username=None, password=None, default_acl=None)</h3> <dd>
<p>Check if path exists</p> <dl class="simple"> <dt>path</dt>
<dd>
<p>path to check</p> </dd> <dt>profile</dt>
<dd>
<p>Configured Zookeeper profile to authenticate with (Default: None)</p> </dd> <dt>hosts</dt>
<dd>
<p>Lists of Zookeeper Hosts (Default: '127.0.0.1:2181)</p> </dd> <dt>scheme</dt>
<dd>
<p>Scheme to authenticate with (Default: 'digest')</p> </dd> <dt>username</dt>
<dd>
<p>Username to authenticate (Default: None)</p> </dd> <dt>password</dt>
<dd>
<p>Password to authenticate (Default: None)</p> </dd> <dt>default_acl</dt>
<dd>
<p>Default acls to assign if a node is created in this connection (Default: None)</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt minion1 zookeeper.exists /test/name profile=prod</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zookeeper.get"> salt.modules.zookeeper.get(path, profile=None, hosts=None, scheme=None, username=None, password=None, default_acl=None)</h3> <dd>
<p>Get value saved in znode</p> <dl class="simple"> <dt>path</dt>
<dd>
<p>path to check</p> </dd> <dt>profile</dt>
<dd>
<p>Configured Zookeeper profile to authenticate with (Default: None)</p> </dd> <dt>hosts</dt>
<dd>
<p>Lists of Zookeeper Hosts (Default: '127.0.0.1:2181)</p> </dd> <dt>scheme</dt>
<dd>
<p>Scheme to authenticate with (Default: 'digest')</p> </dd> <dt>username</dt>
<dd>
<p>Username to authenticate (Default: None)</p> </dd> <dt>password</dt>
<dd>
<p>Password to authenticate (Default: None)</p> </dd> <dt>default_acl</dt>
<dd>
<p>Default acls to assign if a node is created in this connection (Default: None)</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt minion1 zookeeper.get /test/name profile=prod</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zookeeper.get_acls"> salt.modules.zookeeper.get_acls(path, profile=None, hosts=None, scheme=None, username=None, password=None, default_acl=None)</h3> <dd>
<p>Get acls on a znode</p> <dl class="simple"> <dt>path</dt>
<dd>
<p>path to znode</p> </dd> <dt>profile</dt>
<dd>
<p>Configured Zookeeper profile to authenticate with (Default: None)</p> </dd> <dt>hosts</dt>
<dd>
<p>Lists of Zookeeper Hosts (Default: '127.0.0.1:2181)</p> </dd> <dt>scheme</dt>
<dd>
<p>Scheme to authenticate with (Default: 'digest')</p> </dd> <dt>username</dt>
<dd>
<p>Username to authenticate (Default: None)</p> </dd> <dt>password</dt>
<dd>
<p>Password to authenticate (Default: None)</p> </dd> <dt>default_acl</dt>
<dd>
<p>Default acls to assign if a node is created in this connection (Default: None)</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt minion1 zookeeper.get_acls /test/name profile=prod</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zookeeper.get_children"> salt.modules.zookeeper.get_children(path, profile=None, hosts=None, scheme=None, username=None, password=None, default_acl=None)</h3> <dd>
<p>Get children in znode path</p> <dl class="simple"> <dt>path</dt>
<dd>
<p>path to check</p> </dd> <dt>profile</dt>
<dd>
<p>Configured Zookeeper profile to authenticate with (Default: None)</p> </dd> <dt>hosts</dt>
<dd>
<p>Lists of Zookeeper Hosts (Default: '127.0.0.1:2181)</p> </dd> <dt>scheme</dt>
<dd>
<p>Scheme to authenticate with (Default: 'digest')</p> </dd> <dt>username</dt>
<dd>
<p>Username to authenticate (Default: None)</p> </dd> <dt>password</dt>
<dd>
<p>Password to authenticate (Default: None)</p> </dd> <dt>default_acl</dt>
<dd>
<p>Default acls to assign if a node is created in this connection (Default: None)</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt minion1 zookeeper.get_children /test profile=prod</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zookeeper.make_digest_acl"> salt.modules.zookeeper.make_digest_acl(username, password, read=False, write=False, create=False, delete=False, admin=False, allperms=False)</h3> <dd>
<p>Generate acl object</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This is heavily used in the zookeeper state and probably is not useful as a cli module</p> </div> <dl class="simple"> <dt>username</dt>
<dd>
<p>username of acl</p> </dd> <dt>password</dt>
<dd>
<p>plain text password of acl</p> </dd> <dt>read</dt>
<dd>
<p>read acl</p> </dd> <dt>write</dt>
<dd>
<p>write acl</p> </dd> <dt>create</dt>
<dd>
<p>create acl</p> </dd> <dt>delete</dt>
<dd>
<p>delete acl</p> </dd> <dt>admin</dt>
<dd>
<p>admin acl</p> </dd> <dt>allperms</dt>
<dd>
<p>set all other acls to True</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt minion1 zookeeper.make_digest_acl username=daniel password=mypass allperms=True</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zookeeper.set"> salt.modules.zookeeper.set(path, value, version=- 1, profile=None, hosts=None, scheme=None, username=None, password=None, default_acl=None)</h3> <dd>
<p>Update znode with new value</p> <dl class="simple"> <dt>path</dt>
<dd>
<p>znode to update</p> </dd> <dt>value</dt>
<dd>
<p>value to set in znode</p> </dd> <dt>version</dt>
<dd>
<p>only update znode if version matches (Default: -1 (always matches))</p> </dd> <dt>profile</dt>
<dd>
<p>Configured Zookeeper profile to authenticate with (Default: None)</p> </dd> <dt>hosts</dt>
<dd>
<p>Lists of Zookeeper Hosts (Default: '127.0.0.1:2181)</p> </dd> <dt>scheme</dt>
<dd>
<p>Scheme to authenticate with (Default: 'digest')</p> </dd> <dt>username</dt>
<dd>
<p>Username to authenticate (Default: None)</p> </dd> <dt>password</dt>
<dd>
<p>Password to authenticate (Default: None)</p> </dd> <dt>default_acl</dt>
<dd>
<p>Default acls to assign if a node is created in this connection (Default: None)</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt minion1 zookeeper.set /test/name gtmanfred profile=prod</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zookeeper.set_acls"> salt.modules.zookeeper.set_acls(path, acls, version=- 1, profile=None, hosts=None, scheme=None, username=None, password=None, default_acl=None)</h3> <dd>
<p>Set acls on a znode</p> <dl class="simple"> <dt>path</dt>
<dd>
<p>path to znode</p> </dd> <dt>acls</dt>
<dd>
<p>list of acl dictionaries to set on the znode</p> </dd> <dt>version</dt>
<dd>
<p>only set acls if version matches (Default: -1 (always matches))</p> </dd> <dt>profile</dt>
<dd>
<p>Configured Zookeeper profile to authenticate with (Default: None)</p> </dd> <dt>hosts</dt>
<dd>
<p>Lists of Zookeeper Hosts (Default: '127.0.0.1:2181)</p> </dd> <dt>scheme</dt>
<dd>
<p>Scheme to authenticate with (Default: 'digest')</p> </dd> <dt>username</dt>
<dd>
<p>Username to authenticate (Default: None)</p> </dd> <dt>password</dt>
<dd>
<p>Password to authenticate (Default: None)</p> </dd> <dt>default_acl</dt>
<dd>
<p>Default acls to assign if a node is created in this connection (Default: None)</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt minion1 zookeeper.set_acls /test/name acls='[{"username": "gtmanfred", "password": "test", "all": True}]' profile=prod</pre> </dd>
</dl> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.zookeeper.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.zookeeper.html</a>
  </p>
</div>
