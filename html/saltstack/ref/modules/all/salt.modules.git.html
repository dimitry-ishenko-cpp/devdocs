<h1>salt.modules.git</h1> <p>Support for the Git SCM</p> <dl class="py function"> <h3 id="salt.modules.git.add"> salt.modules.git.add(cwd, filename, opts='', git_opts='', user=None, password=None, ignore_retcode=False, output_encoding=None)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.0: </span>The <code class="docutils literal notranslate"><span class="pre">--verbose</span></code> command line argument is now implied</p> </div> <p>Interface to <a class="reference external" href="http://git-scm.com/docs/git-add">git-add(1)</a></p> <dl> <dt>cwd</dt>
<dd>
<p>The path to the git checkout</p> </dd> <dt>filename</dt>
<dd>
<p>The location of the file/directory to add, relative to <code class="docutils literal notranslate"><span class="pre">cwd</span></code></p> </dd> <dt>opts</dt>
<dd>
<p>Any additional options to add to the command line, in a single string</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>On the Salt CLI, if the opts are preceded with a dash, it is necessary to precede them with <code class="docutils literal notranslate"><span class="pre">opts=</span></code> (as in the CLI examples below) to avoid causing errors with Salt's own argument parsing.</p> </div> </dd> <dt>git_opts</dt>
<dd>
<p>Any additional options to add to git command itself (not the <code class="docutils literal notranslate"><span class="pre">add</span></code> subcommand), in a single string. This is useful for passing <code class="docutils literal notranslate"><span class="pre">-c</span></code> to run git with temporary changes to the git configuration.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This is only supported in git 1.7.2 and newer.</p> </div> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion git.add /path/to/repo foo/bar.py
salt myminion git.add /path/to/repo foo/bar.py opts='--dry-run'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.archive"> salt.modules.git.archive(cwd, output, rev='HEAD', prefix=None, git_opts='', user=None, password=None, ignore_retcode=False, output_encoding=None, **kwargs)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.0: </span>Returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if successful, raises an error if not.</p> </div> <p>Interface to <a class="reference external" href="http://git-scm.com/docs/git-archive">git-archive(1)</a>, exports a tarball/zip file of the repository</p> <dl> <dt>cwd</dt>
<dd>
<p>The path to be archived</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">archive</span></code> permits a partial archive to be created. Thus, this path does not need to be the root of the git repository. Only the files within the directory specified by <code class="docutils literal notranslate"><span class="pre">cwd</span></code> (and its subdirectories) will be in the resulting archive. For example, if there is a git checkout at <code class="docutils literal notranslate"><span class="pre">/tmp/foo</span></code>, then passing <code class="docutils literal notranslate"><span class="pre">/tmp/foo/bar</span></code> as the <code class="docutils literal notranslate"><span class="pre">cwd</span></code> will result in just the files underneath <code class="docutils literal notranslate"><span class="pre">/tmp/foo/bar</span></code> to be exported as an archive.</p> </div> </dd> <dt>output</dt>
<dd>
<p>The path of the archive to be created</p> </dd> <dt>overwrite<span class="classifier">False</span>
</dt>
<dd>
<p>Unless set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, Salt will over overwrite an existing archive at the path specified by the <code class="docutils literal notranslate"><span class="pre">output</span></code> argument.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>rev<span class="classifier">HEAD</span>
</dt>
<dd>
<p>The revision from which to create the archive</p> </dd> <dt>format</dt>
<dd>
<p>Manually specify the file format of the resulting archive. This argument can be omitted, and <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">archive</span></code> will attempt to guess the archive type (and compression) from the filename. <code class="docutils literal notranslate"><span class="pre">zip</span></code>, <code class="docutils literal notranslate"><span class="pre">tar</span></code>, <code class="docutils literal notranslate"><span class="pre">tar.gz</span></code>, and <code class="docutils literal notranslate"><span class="pre">tgz</span></code> are extensions that are recognized automatically, and git can be configured to support other archive types with the addition of git configuration keys.</p> <p>See the <a class="reference external" href="http://git-scm.com/docs/git-archive">git-archive(1)</a> manpage explanation of the <code class="docutils literal notranslate"><span class="pre">--format</span></code> argument (as well as the <code class="docutils literal notranslate"><span class="pre">CONFIGURATION</span></code> section of the manpage) for further information.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>prefix</dt>
<dd>
<p>Prepend <code class="docutils literal notranslate"><span class="pre">&lt;prefix&gt;</span></code> to every filename in the archive. If unspecified, the name of the directory at the top level of the repository will be used as the prefix (e.g. if <code class="docutils literal notranslate"><span class="pre">cwd</span></code> is set to <code class="docutils literal notranslate"><span class="pre">/foo/bar/baz</span></code>, the prefix will be <code class="docutils literal notranslate"><span class="pre">baz</span></code>, and the resulting archive will contain a top-level directory by that name).</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>The default behavior if the <code class="docutils literal notranslate"><span class="pre">--prefix</span></code> option for <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">archive</span></code> is not specified is to not prepend a prefix, so Salt's behavior differs slightly from <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">archive</span></code> in this respect. Use <code class="docutils literal notranslate"><span class="pre">prefix=''</span></code> to create an archive with no prefix.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.0: </span>The behavior of this argument has been changed slightly. As of this version, it is necessary to include the trailing slash when specifying a prefix, if the prefix is intended to create a top-level directory.</p> </div> </dd> <dt>git_opts</dt>
<dd>
<p>Any additional options to add to git command itself (not the <code class="docutils literal notranslate"><span class="pre">archive</span></code> subcommand), in a single string. This is useful for passing <code class="docutils literal notranslate"><span class="pre">-c</span></code> to run git with temporary changes to the git configuration.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This is only supported in git 1.7.2 and newer.</p> </div> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion git.archive /path/to/repo /path/to/archive.tar</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.branch"> salt.modules.git.branch(cwd, name=None, opts='', git_opts='', user=None, password=None, ignore_retcode=False, output_encoding=None)</h3> <dd>
<p>Interface to <a class="reference external" href="http://git-scm.com/docs/git-branch">git-branch(1)</a></p> <dl> <dt>cwd</dt>
<dd>
<p>The path to the git checkout</p> </dd> <dt>name</dt>
<dd>
<p>Name of the branch on which to operate. If not specified, the current branch will be assumed.</p> </dd> <dt>opts</dt>
<dd>
<p>Any additional options to add to the command line, in a single string</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>To create a branch based on something other than HEAD, pass the name of the revision as <code class="docutils literal notranslate"><span class="pre">opts</span></code>. If the revision is in the format <code class="docutils literal notranslate"><span class="pre">remotename/branch</span></code>, then this will also set the remote tracking branch.</p> <p>Additionally, on the Salt CLI, if the opts are preceded with a dash, it is necessary to precede them with <code class="docutils literal notranslate"><span class="pre">opts=</span></code> (as in the CLI examples below) to avoid causing errors with Salt's own argument parsing.</p> </div> </dd> <dt>git_opts</dt>
<dd>
<p>Any additional options to add to git command itself (not the <code class="docutils literal notranslate"><span class="pre">branch</span></code> subcommand), in a single string. This is useful for passing <code class="docutils literal notranslate"><span class="pre">-c</span></code> to run git with temporary changes to the git configuration.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This is only supported in git 1.7.2 and newer.</p> </div> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash"># Set remote tracking branch
salt myminion git.branch /path/to/repo mybranch opts='--set-upstream-to origin/mybranch'
# Create new branch
salt myminion git.branch /path/to/repo mybranch upstream/somebranch
# Delete branch
salt myminion git.branch /path/to/repo mybranch opts='-d'
# Rename branch (2015.8.0 and later)
salt myminion git.branch /path/to/repo newbranch opts='-m oldbranch'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.checkout"> salt.modules.git.checkout(cwd, rev=None, force=False, opts='', git_opts='', user=None, password=None, ignore_retcode=False, output_encoding=None)</h3> <dd>
<p>Interface to <a class="reference external" href="http://git-scm.com/docs/git-checkout">git-checkout(1)</a></p> <dl> <dt>cwd</dt>
<dd>
<p>The path to the git checkout</p> </dd> <dt>opts</dt>
<dd>
<p>Any additional options to add to the command line, in a single string</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>On the Salt CLI, if the opts are preceded with a dash, it is necessary to precede them with <code class="docutils literal notranslate"><span class="pre">opts=</span></code> (as in the CLI examples below) to avoid causing errors with Salt's own argument parsing.</p> </div> </dd> <dt>git_opts</dt>
<dd>
<p>Any additional options to add to git command itself (not the <code class="docutils literal notranslate"><span class="pre">checkout</span></code> subcommand), in a single string. This is useful for passing <code class="docutils literal notranslate"><span class="pre">-c</span></code> to run git with temporary changes to the git configuration.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This is only supported in git 1.7.2 and newer.</p> </div> </dd> <dt>rev</dt>
<dd>
<p>The remote branch or revision to checkout.</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.0: </span>Optional when using <code class="docutils literal notranslate"><span class="pre">-b</span></code> or <code class="docutils literal notranslate"><span class="pre">-B</span></code> in <code class="docutils literal notranslate"><span class="pre">opts</span></code>.</p> </div> </dd> <dt>force<span class="classifier">False</span>
</dt>
<dd>
<p>Force a checkout even if there might be overwritten changes</p> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash"># Checking out local local revisions
salt myminion git.checkout /path/to/repo somebranch user=jeff
salt myminion git.checkout /path/to/repo opts='testbranch -- conf/file1 file2'
salt myminion git.checkout /path/to/repo rev=origin/mybranch opts='--track'
# Checking out remote revision into new branch
salt myminion git.checkout /path/to/repo upstream/master opts='-b newbranch'
# Checking out current revision into new branch (2015.8.0 and later)
salt myminion git.checkout /path/to/repo opts='-b newbranch'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.clone"> salt.modules.git.clone(cwd, url=None, name=None, opts='', git_opts='', user=None, password=None, identity=None, https_user=None, https_pass=None, ignore_retcode=False, saltenv='base', output_encoding=None)</h3> <dd>
<p>Interface to <a class="reference external" href="http://git-scm.com/docs/git-clone">git-clone(1)</a></p> <dl> <dt>cwd</dt>
<dd>
<p>Location of git clone</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.0: </span>If <code class="docutils literal notranslate"><span class="pre">name</span></code> is passed, then the clone will be made <em>within</em> this directory.</p> </div> </dd> <dt>url</dt>
<dd>
<p>The URL of the repository to be cloned</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.0: </span>Argument renamed from <code class="docutils literal notranslate"><span class="pre">repository</span></code> to <code class="docutils literal notranslate"><span class="pre">url</span></code></p> </div> </dd> <dt>name</dt>
<dd>
<p>Optional alternate name for the top-level directory to be created by the clone</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>opts</dt>
<dd>
<p>Any additional options to add to the command line, in a single string</p> </dd> <dt>git_opts</dt>
<dd>
<p>Any additional options to add to git command itself (not the <code class="docutils literal notranslate"><span class="pre">clone</span></code> subcommand), in a single string. This is useful for passing <code class="docutils literal notranslate"><span class="pre">-c</span></code> to run git with temporary changes to the git configuration.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This is only supported in git 1.7.2 and newer.</p> </div> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>identity</dt>
<dd>
<p>Path to a private key to use for ssh URLs</p> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>Unless Salt is invoked from the minion using <code class="docutils literal notranslate"><span class="pre">salt-call</span></code>, the key(s) must be passphraseless. For greater security with passphraseless private keys, see the <a class="reference external" href="http://www.man7.org/linux/man-pages/man8/sshd.8.html#AUTHORIZED_KEYS_FILE_FORMAT">sshd(8)</a> manpage for information on securing the keypair from the remote side in the <code class="docutils literal notranslate"><span class="pre">authorized_keys</span></code> file.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.7: </span>Salt will no longer attempt to use passphrase-protected keys unless invoked from the minion using <code class="docutils literal notranslate"><span class="pre">salt-call</span></code>, to prevent blocking waiting for user input.</p> </div> <p>Key can also be specified as a SaltStack file server URL, eg. salt://location/identity_file</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2016.3.0.</span></p> </div> </dd> <dt>https_user</dt>
<dd>
<p>Set HTTP Basic Auth username. Only accepted for HTTPS URLs.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 20515.5.0.</span></p> </div> </dd> <dt>https_pass</dt>
<dd>
<p>Set HTTP Basic Auth password. Only accepted for HTTPS URLs.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.5.0.</span></p> </div> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>saltenv</dt>
<dd>
<p>The default salt environment to pull sls files from</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.1.</span></p> </div> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion git.clone /path/to/repo_parent_dir git://github.com/saltstack/salt.git</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.commit"> salt.modules.git.commit(cwd, message, opts='', git_opts='', user=None, password=None, filename=None, ignore_retcode=False, output_encoding=None)</h3> <dd>
<p>Interface to <a class="reference external" href="http://git-scm.com/docs/git-commit">git-commit(1)</a></p> <dl> <dt>cwd</dt>
<dd>
<p>The path to the git checkout</p> </dd> <dt>message</dt>
<dd>
<p>Commit message</p> </dd> <dt>opts</dt>
<dd>
<p>Any additional options to add to the command line, in a single string. These opts will be added to the end of the git command being run.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>On the Salt CLI, if the opts are preceded with a dash, it is necessary to precede them with <code class="docutils literal notranslate"><span class="pre">opts=</span></code> (as in the CLI examples below) to avoid causing errors with Salt's own argument parsing.</p> <p>The <code class="docutils literal notranslate"><span class="pre">-m</span></code> option should not be passed here, as the commit message will be defined by the <code class="docutils literal notranslate"><span class="pre">message</span></code> argument.</p> </div> </dd> <dt>git_opts</dt>
<dd>
<p>Any additional options to add to git command itself (not the <code class="docutils literal notranslate"><span class="pre">commit</span></code> subcommand), in a single string. This is useful for passing <code class="docutils literal notranslate"><span class="pre">-c</span></code> to run git with temporary changes to the git configuration.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This is only supported in git 1.7.2 and newer.</p> </div> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>filename</dt>
<dd>
<p>The location of the file/directory to commit, relative to <code class="docutils literal notranslate"><span class="pre">cwd</span></code>. This argument is optional, and can be used to commit a file without first staging it.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This argument only works on files which are already tracked by the git repository.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion git.commit /path/to/repo 'The commit message'
salt myminion git.commit /path/to/repo 'The commit message' filename=foo/bar.py</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.config_get"> salt.modules.git.config_get(key, cwd=None, user=None, password=None, ignore_retcode=False, output_encoding=None, **kwargs)</h3> <dd>
<p>Get the value of a key in the git configuration file</p> <dl> <dt>key</dt>
<dd>
<p>The name of the configuration key to get</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.0: </span>Argument renamed from <code class="docutils literal notranslate"><span class="pre">setting_name</span></code> to <code class="docutils literal notranslate"><span class="pre">key</span></code></p> </div> </dd> <dt>cwd</dt>
<dd>
<p>The path to the git checkout</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.0: </span>Now optional if <code class="docutils literal notranslate"><span class="pre">global</span></code> is set to <code class="docutils literal notranslate"><span class="pre">True</span></code></p> </div> </dd> <dt>global<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, query the global git configuration. Otherwise, only the local git configuration will be queried.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>all<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, return a list of all values set for <code class="docutils literal notranslate"><span class="pre">key</span></code>. If the key does not exist, <code class="docutils literal notranslate"><span class="pre">None</span></code> will be returned.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion git.config_get user.name cwd=/path/to/repo
salt myminion git.config_get user.email global=True
salt myminion git.config_get core.gitproxy cwd=/path/to/repo all=True</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.config_get_regexp"> salt.modules.git.config_get_regexp(key, value_regex=None, cwd=None, user=None, password=None, ignore_retcode=False, output_encoding=None, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> <p>Get the value of a key or keys in the git configuration file using regexes for more flexible matching. The return data is a dictionary mapping keys to lists of values matching the <code class="docutils literal notranslate"><span class="pre">value_regex</span></code>. If no values match, an empty dictionary will be returned.</p> <dl> <dt>key</dt>
<dd>
<p>Regex on which key names will be matched</p> </dd> <dt>value_regex</dt>
<dd>
<p>If specified, return all values matching this regex. The return data will be a dictionary mapping keys to lists of values matching the regex.</p> <div class="admonition important"> <p class="admonition-title">Important</p> <p>Only values matching the <code class="docutils literal notranslate"><span class="pre">value_regex</span></code> will be part of the return data. So, if <code class="docutils literal notranslate"><span class="pre">key</span></code> matches a multivar, then it is possible that not all of the values will be returned. To get all values set for a multivar, simply omit the <code class="docutils literal notranslate"><span class="pre">value_regex</span></code> argument.</p> </div> </dd> <dt>cwd</dt>
<dd>
<p>The path to the git checkout</p> </dd> <dt>global<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, query the global git configuration. Otherwise, only the local git configuration will be queried.</p> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash"># Matches any values for key 'foo.bar'
salt myminion git.config_get_regexp /path/to/repo foo.bar
# Matches any value starting with 'baz' set for key 'foo.bar'
salt myminion git.config_get_regexp /path/to/repo foo.bar 'baz.*'
# Matches any key starting with 'user.'
salt myminion git.config_get_regexp '^user\.' global=True</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.config_set"> salt.modules.git.config_set(key, value=None, multivar=None, cwd=None, user=None, password=None, ignore_retcode=False, output_encoding=None, **kwargs)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.0: </span>Return the value(s) of the key being set</p> </div> <p>Set a key in the git configuration file</p> <dl> <dt>cwd</dt>
<dd>
<p>The path to the git checkout. Must be an absolute path, or the word <code class="docutils literal notranslate"><span class="pre">global</span></code> to indicate that a global key should be set.</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2014.7.0: </span>Made <code class="docutils literal notranslate"><span class="pre">cwd</span></code> argument optional if <code class="docutils literal notranslate"><span class="pre">is_global=True</span></code></p> </div> </dd> <dt>key</dt>
<dd>
<p>The name of the configuration key to set</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.0: </span>Argument renamed from <code class="docutils literal notranslate"><span class="pre">setting_name</span></code> to <code class="docutils literal notranslate"><span class="pre">key</span></code></p> </div> </dd> <dt>value</dt>
<dd>
<p>The value to set for the specified key. Incompatible with the <code class="docutils literal notranslate"><span class="pre">multivar</span></code> argument.</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.0: </span>Argument renamed from <code class="docutils literal notranslate"><span class="pre">setting_value</span></code> to <code class="docutils literal notranslate"><span class="pre">value</span></code></p> </div> </dd> <dt>add<span class="classifier">False</span>
</dt>
<dd>
<p>Add a value to a key, creating/updating a multivar</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>multivar</dt>
<dd>
<p>Set a multivar all at once. Values can be comma-separated or passed as a Python list. Incompatible with the <code class="docutils literal notranslate"><span class="pre">value</span></code> argument.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>global<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, set a global variable</p> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion git.config_set user.email me@example.com cwd=/path/to/repo
salt myminion git.config_set user.email foo@bar.com global=True</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.config_unset"> salt.modules.git.config_unset(key, value_regex=None, cwd=None, user=None, password=None, ignore_retcode=False, output_encoding=None, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> <p>Unset a key in the git configuration file</p> <dl> <dt>cwd</dt>
<dd>
<p>The path to the git checkout. Must be an absolute path, or the word <code class="docutils literal notranslate"><span class="pre">global</span></code> to indicate that a global key should be unset.</p> </dd> <dt>key</dt>
<dd>
<p>The name of the configuration key to unset</p> </dd> <dt>value_regex</dt>
<dd>
<p>Regular expression that matches exactly one key, used to delete a single value from a multivar. Ignored if <code class="docutils literal notranslate"><span class="pre">all</span></code> is set to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p> </dd> <dt>all<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code> unset all values for a multivar. If <code class="docutils literal notranslate"><span class="pre">False</span></code>, and <code class="docutils literal notranslate"><span class="pre">key</span></code> is a multivar, an error will be raised.</p> </dd> <dt>global<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, unset set a global variable. Otherwise, a local variable will be unset.</p> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion git.config_unset /path/to/repo foo.bar
salt myminion git.config_unset /path/to/repo foo.bar all=True</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.current_branch"> salt.modules.git.current_branch(cwd, user=None, password=None, ignore_retcode=False, output_encoding=None)</h3> <dd>
<p>Returns the current branch name of a local checkout. If HEAD is detached, return the SHA1 of the revision which is currently checked out.</p> <dl> <dt>cwd</dt>
<dd>
<p>The path to the git checkout</p> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion git.current_branch /path/to/repo</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.describe"> salt.modules.git.describe(cwd, rev='HEAD', user=None, password=None, ignore_retcode=False, output_encoding=None)</h3> <dd>
<p>Returns the <a class="reference external" href="http://git-scm.com/docs/git-describe">git-describe(1)</a> string (or the SHA1 hash if there are no tags) for the given revision.</p> <dl> <dt>cwd</dt>
<dd>
<p>The path to the git checkout</p> </dd> <dt>rev<span class="classifier">HEAD</span>
</dt>
<dd>
<p>The revision to describe</p> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion git.describe /path/to/repo
salt myminion git.describe /path/to/repo develop</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.diff"> salt.modules.git.diff(cwd, item1=None, item2=None, opts='', git_opts='', user=None, password=None, no_index=False, cached=False, paths=None, output_encoding=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.12,2016.3.3,2016.11.0.</span></p> </div> <p>Interface to <a class="reference external" href="http://git-scm.com/docs/git-diff">git-diff(1)</a></p> <dl> <dt>cwd</dt>
<dd>
<p>The path to the git checkout</p> </dd> <dt>item1 and item2</dt>
<dd>
<p>Revision(s) to pass to the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span></code> command. One or both of these arguments may be ignored if some of the options below are set to <code class="docutils literal notranslate"><span class="pre">True</span></code>. When <code class="docutils literal notranslate"><span class="pre">cached</span></code> is <code class="docutils literal notranslate"><span class="pre">False</span></code>, and no revisions are passed to this function, then the current working tree will be compared against the index (i.e. unstaged changes). When two revisions are passed, they will be compared to each other.</p> </dd> <dt>opts</dt>
<dd>
<p>Any additional options to add to the command line, in a single string</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>On the Salt CLI, if the opts are preceded with a dash, it is necessary to precede them with <code class="docutils literal notranslate"><span class="pre">opts=</span></code> (as in the CLI examples below) to avoid causing errors with Salt's own argument parsing.</p> </div> </dd> <dt>git_opts</dt>
<dd>
<p>Any additional options to add to git command itself (not the <code class="docutils literal notranslate"><span class="pre">diff</span></code> subcommand), in a single string. This is useful for passing <code class="docutils literal notranslate"><span class="pre">-c</span></code> to run git with temporary changes to the git configuration.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This is only supported in git 1.7.2 and newer.</p> </div> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>no_index<span class="classifier">False</span>
</dt>
<dd>
<p>When it is necessary to diff two files in the same repo against each other, and not diff two different revisions, set this option to <code class="docutils literal notranslate"><span class="pre">True</span></code>. If this is left <code class="docutils literal notranslate"><span class="pre">False</span></code> in these instances, then a normal <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span></code> will be performed against the index (i.e. unstaged changes), and files in the <code class="docutils literal notranslate"><span class="pre">paths</span></code> option will be used to narrow down the diff output.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>Requires Git 1.5.1 or newer. Additionally, when set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">item1</span></code> and <code class="docutils literal notranslate"><span class="pre">item2</span></code> will be ignored.</p> </div> </dd> <dt>cached<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, compare staged changes to <code class="docutils literal notranslate"><span class="pre">item1</span></code> (if specified), otherwise compare them to the most recent commit.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p><code class="docutils literal notranslate"><span class="pre">item2</span></code> is ignored if this option is is set to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p> </div> </dd> <dt>paths</dt>
<dd>
<p>File paths to pass to the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span></code> command. Can be passed as a comma-separated list or a Python list.</p> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># Perform diff against the index (staging area for next commit)
salt myminion git.diff /path/to/repo
# Compare staged changes to the most recent commit
salt myminion git.diff /path/to/repo cached=True
# Compare staged changes to a specific revision
salt myminion git.diff /path/to/repo mybranch cached=True
# Perform diff against the most recent commit (includes staged changes)
salt myminion git.diff /path/to/repo HEAD
# Diff two commits
salt myminion git.diff /path/to/repo abcdef1 aabbccd
# Diff two commits, only showing differences in the specified paths
salt myminion git.diff /path/to/repo abcdef1 aabbccd paths=path/to/file1,path/to/file2
# Diff two files with one being outside the working tree
salt myminion git.diff /path/to/repo no_index=True paths=path/to/file1,/absolute/path/to/file2</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.discard_local_changes"> salt.modules.git.discard_local_changes(cwd, path='.', user=None, password=None, ignore_retcode=False, output_encoding=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Runs a <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">--</span> <span class="pre">&lt;path&gt;</span></code> from the directory specified by <code class="docutils literal notranslate"><span class="pre">cwd</span></code>.</p> <dl> <dt>cwd</dt>
<dd>
<p>The path to the git checkout</p> </dd> <dt>path</dt>
<dd>
<p>path relative to cwd (defaults to <code class="docutils literal notranslate"><span class="pre">.</span></code>)</p> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion git.discard_local_changes /path/to/repo
salt myminion git.discard_local_changes /path/to/repo path=foo</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.fetch"> salt.modules.git.fetch(cwd, remote=None, force=False, refspecs=None, opts='', git_opts='', user=None, password=None, identity=None, ignore_retcode=False, saltenv='base', output_encoding=None)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.2: </span>Return data is now a dictionary containing information on branches and tags that were added/updated</p> </div> <p>Interface to <a class="reference external" href="http://git-scm.com/docs/git-fetch">git-fetch(1)</a></p> <dl> <dt>cwd</dt>
<dd>
<p>The path to the git checkout</p> </dd> <dt>remote</dt>
<dd>
<p>Optional remote name to fetch. If not passed, then git will use its default behavior (as detailed in <a class="reference external" href="http://git-scm.com/docs/git-fetch">git-fetch(1)</a>).</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>force</dt>
<dd>
<p>Force the fetch even when it is not a fast-forward.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>refspecs</dt>
<dd>
<p>Override the refspec(s) configured for the remote with this argument. Multiple refspecs can be passed, comma-separated.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>opts</dt>
<dd>
<p>Any additional options to add to the command line, in a single string</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>On the Salt CLI, if the opts are preceded with a dash, it is necessary to precede them with <code class="docutils literal notranslate"><span class="pre">opts=</span></code> (as in the CLI examples below) to avoid causing errors with Salt's own argument parsing.</p> </div> </dd> <dt>git_opts</dt>
<dd>
<p>Any additional options to add to git command itself (not the <code class="docutils literal notranslate"><span class="pre">fetch</span></code> subcommand), in a single string. This is useful for passing <code class="docutils literal notranslate"><span class="pre">-c</span></code> to run git with temporary changes to the git configuration.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This is only supported in git 1.7.2 and newer.</p> </div> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>identity</dt>
<dd>
<p>Path to a private key to use for ssh URLs</p> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>Unless Salt is invoked from the minion using <code class="docutils literal notranslate"><span class="pre">salt-call</span></code>, the key(s) must be passphraseless. For greater security with passphraseless private keys, see the <a class="reference external" href="http://www.man7.org/linux/man-pages/man8/sshd.8.html#AUTHORIZED_KEYS_FILE_FORMAT">sshd(8)</a> manpage for information on securing the keypair from the remote side in the <code class="docutils literal notranslate"><span class="pre">authorized_keys</span></code> file.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.7: </span>Salt will no longer attempt to use passphrase-protected keys unless invoked from the minion using <code class="docutils literal notranslate"><span class="pre">salt-call</span></code>, to prevent blocking waiting for user input.</p> </div> <p>Key can also be specified as a SaltStack file server URL, eg. salt://location/identity_file</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2016.3.0.</span></p> </div> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>saltenv</dt>
<dd>
<p>The default salt environment to pull sls files from</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.1.</span></p> </div> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion git.fetch /path/to/repo upstream
salt myminion git.fetch /path/to/repo identity=/root/.ssh/id_rsa</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.init"> salt.modules.git.init(cwd, bare=False, template=None, separate_git_dir=None, shared=None, opts='', git_opts='', user=None, password=None, ignore_retcode=False, output_encoding=None)</h3> <dd>
<p>Interface to <a class="reference external" href="http://git-scm.com/docs/git-init">git-init(1)</a></p> <dl> <dt>cwd</dt>
<dd>
<p>The path to the directory to be initialized</p> </dd> <dt>bare<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, init a bare repository</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>template</dt>
<dd>
<p>Set this argument to specify an alternate <a class="reference external" href="http://git-scm.com/docs/git-init#_template_directory">template directory</a></p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>separate_git_dir</dt>
<dd>
<p>Set this argument to specify an alternate <code class="docutils literal notranslate"><span class="pre">$GIT_DIR</span></code></p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>shared</dt>
<dd>
<p>Set sharing permissions on git repo. See <a class="reference external" href="http://git-scm.com/docs/git-init">git-init(1)</a> for more details.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>opts</dt>
<dd>
<p>Any additional options to add to the command line, in a single string</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>On the Salt CLI, if the opts are preceded with a dash, it is necessary to precede them with <code class="docutils literal notranslate"><span class="pre">opts=</span></code> (as in the CLI examples below) to avoid causing errors with Salt's own argument parsing.</p> </div> </dd> <dt>git_opts</dt>
<dd>
<p>Any additional options to add to git command itself (not the <code class="docutils literal notranslate"><span class="pre">init</span></code> subcommand), in a single string. This is useful for passing <code class="docutils literal notranslate"><span class="pre">-c</span></code> to run git with temporary changes to the git configuration.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This is only supported in git 1.7.2 and newer.</p> </div> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion git.init /path/to/repo
# Init a bare repo (before 2015.8.0)
salt myminion git.init /path/to/bare/repo.git opts='--bare'
# Init a bare repo (2015.8.0 and later)
salt myminion git.init /path/to/bare/repo.git bare=True</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.is_worktree"> salt.modules.git.is_worktree(cwd, user=None, password=None, output_encoding=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> <p>This function will attempt to determine if <code class="docutils literal notranslate"><span class="pre">cwd</span></code> is part of a worktree by checking its <code class="docutils literal notranslate"><span class="pre">.git</span></code> to see if it is a file containing a reference to another gitdir.</p> <dl> <dt>cwd</dt>
<dd>
<p>path to the worktree to be removed</p> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion git.is_worktree /path/to/repo</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.list_branches"> salt.modules.git.list_branches(cwd, remote=False, user=None, password=None, ignore_retcode=False, output_encoding=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> <p>Return a list of branches</p> <dl> <dt>cwd</dt>
<dd>
<p>The path to the git checkout</p> </dd> <dt>remote<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, list remote branches. Otherwise, local branches will be listed.</p> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>This option will only return remote branches of which the local checkout is aware, use <a class="reference internal" href="#salt.modules.git.fetch" title="salt.modules.git.fetch"><code class="xref py py-func docutils literal notranslate"><span class="pre">git.fetch</span></code></a> to update remotes.</p> </div> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion git.list_branches /path/to/repo
salt myminion git.list_branches /path/to/repo remote=True</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.list_tags"> salt.modules.git.list_tags(cwd, user=None, password=None, ignore_retcode=False, output_encoding=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> <p>Return a list of tags</p> <dl> <dt>cwd</dt>
<dd>
<p>The path to the git checkout</p> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion git.list_tags /path/to/repo</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.list_worktrees"> salt.modules.git.list_worktrees(cwd, stale=False, user=None, password=None, output_encoding=None, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> <p>Returns information on worktrees</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.4: </span>Version 2.7.0 added the <code class="docutils literal notranslate"><span class="pre">list</span></code> subcommand to <a class="reference external" href="http://git-scm.com/docs/git-worktree">git-worktree(1)</a> which provides a lot of additional information. The return data has been changed to include this information, even for pre-2.7.0 versions of git. In addition, if a worktree has a detached head, then any tags which point to the worktree's HEAD will be included in the return data.</p> </div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>By default, only worktrees for which the worktree directory is still present are returned, but this can be changed using the <code class="docutils literal notranslate"><span class="pre">all</span></code> and <code class="docutils literal notranslate"><span class="pre">stale</span></code> arguments (described below).</p> </div> <dl> <dt>cwd</dt>
<dd>
<p>The path to the git checkout</p> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>all<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, then return all worktrees tracked under $GIT_DIR/worktrees, including ones for which the gitdir is no longer present.</p> </dd> <dt>stale<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, return <em>only</em> worktrees whose gitdir is no longer present.</p> </dd> </dl> <div class="admonition note"> <p class="admonition-title">Note</p> <p>Only one of <code class="docutils literal notranslate"><span class="pre">all</span></code> and <code class="docutils literal notranslate"><span class="pre">stale</span></code> can be set to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p> </div> <dl> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion git.list_worktrees /path/to/repo
salt myminion git.list_worktrees /path/to/repo all=True
salt myminion git.list_worktrees /path/to/repo stale=True</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.ls_remote"> salt.modules.git.ls_remote(cwd=None, remote='origin', ref=None, opts='', git_opts='', user=None, password=None, identity=None, https_user=None, https_pass=None, ignore_retcode=False, output_encoding=None, saltenv='base')</h3> <dd>
<p>Interface to <a class="reference external" href="http://git-scm.com/docs/git-ls-remote">git-ls-remote(1)</a>. Returns the upstream hash for a remote reference.</p> <dl> <dt>cwd</dt>
<dd>
<p>The path to the git checkout. Optional (and ignored if present) when <code class="docutils literal notranslate"><span class="pre">remote</span></code> is set to a URL instead of a remote name.</p> </dd> <dt>remote<span class="classifier">origin</span>
</dt>
<dd>
<p>The name of the remote to query. Can be the name of a git remote (which exists in the git checkout defined by the <code class="docutils literal notranslate"><span class="pre">cwd</span></code> parameter), or the URL of a remote repository.</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.0: </span>Argument renamed from <code class="docutils literal notranslate"><span class="pre">repository</span></code> to <code class="docutils literal notranslate"><span class="pre">remote</span></code></p> </div> </dd> <dt>ref</dt>
<dd>
<p>The name of the ref to query. Optional, if not specified, all refs are returned. Can be a branch or tag name, or the full name of the reference (for example, to get the hash for a Github pull request number 1234, <code class="docutils literal notranslate"><span class="pre">ref</span></code> can be set to <code class="docutils literal notranslate"><span class="pre">refs/pull/1234/head</span></code></p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.0: </span>Argument renamed from <code class="docutils literal notranslate"><span class="pre">branch</span></code> to <code class="docutils literal notranslate"><span class="pre">ref</span></code></p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.4: </span>Defaults to returning all refs instead of master.</p> </div> </dd> <dt>opts</dt>
<dd>
<p>Any additional options to add to the command line, in a single string</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>git_opts</dt>
<dd>
<p>Any additional options to add to git command itself (not the <code class="docutils literal notranslate"><span class="pre">ls-remote</span></code> subcommand), in a single string. This is useful for passing <code class="docutils literal notranslate"><span class="pre">-c</span></code> to run git with temporary changes to the git configuration.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This is only supported in git 1.7.2 and newer.</p> </div> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>identity</dt>
<dd>
<p>Path to a private key to use for ssh URLs</p> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>Unless Salt is invoked from the minion using <code class="docutils literal notranslate"><span class="pre">salt-call</span></code>, the key(s) must be passphraseless. For greater security with passphraseless private keys, see the <a class="reference external" href="http://www.man7.org/linux/man-pages/man8/sshd.8.html#AUTHORIZED_KEYS_FILE_FORMAT">sshd(8)</a> manpage for information on securing the keypair from the remote side in the <code class="docutils literal notranslate"><span class="pre">authorized_keys</span></code> file.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.7: </span>Salt will no longer attempt to use passphrase-protected keys unless invoked from the minion using <code class="docutils literal notranslate"><span class="pre">salt-call</span></code>, to prevent blocking waiting for user input.</p> </div> <p>Key can also be specified as a SaltStack file server URL, eg. salt://location/identity_file</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2016.3.0.</span></p> </div> </dd> <dt>https_user</dt>
<dd>
<p>Set HTTP Basic Auth username. Only accepted for HTTPS URLs.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.5.0.</span></p> </div> </dd> <dt>https_pass</dt>
<dd>
<p>Set HTTP Basic Auth password. Only accepted for HTTPS URLs.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.5.0.</span></p> </div> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>saltenv</dt>
<dd>
<p>The default salt environment to pull sls files from</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.1.</span></p> </div> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion git.ls_remote /path/to/repo origin master
salt myminion git.ls_remote remote=https://mydomain.tld/repo.git ref=mytag opts='--tags'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.merge"> salt.modules.git.merge(cwd, rev=None, opts='', git_opts='', user=None, password=None, identity=None, ignore_retcode=False, output_encoding=None, **kwargs)</h3> <dd>
<p>Interface to <a class="reference external" href="http://git-scm.com/docs/git-merge">git-merge(1)</a></p> <dl> <dt>cwd</dt>
<dd>
<p>The path to the git checkout</p> </dd> <dt>rev</dt>
<dd>
<p>Revision to merge into the current branch. If not specified, the remote tracking branch will be merged.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>opts</dt>
<dd>
<p>Any additional options to add to the command line, in a single string</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>On the Salt CLI, if the opts are preceded with a dash, it is necessary to precede them with <code class="docutils literal notranslate"><span class="pre">opts=</span></code> (as in the CLI examples below) to avoid causing errors with Salt's own argument parsing.</p> </div> </dd> <dt>git_opts</dt>
<dd>
<p>Any additional options to add to git command itself (not the <code class="docutils literal notranslate"><span class="pre">merge</span></code> subcommand), in a single string. This is useful for passing <code class="docutils literal notranslate"><span class="pre">-c</span></code> to run git with temporary changes to the git configuration.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This is only supported in git 1.7.2 and newer.</p> </div> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>identity</dt>
<dd>
<p>Path to a private key to use for ssh URLs. Salt will not attempt to use passphrase-protected keys unless invoked from the minion using <code class="docutils literal notranslate"><span class="pre">salt-call</span></code>, to prevent blocking waiting for user input. Key can also be specified as a SaltStack file server URL, eg. <code class="docutils literal notranslate"><span class="pre">salt://location/identity_file</span></code>.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>For greater security with passphraseless private keys, see the <a class="reference external" href="http://www.man7.org/linux/man-pages/man8/sshd.8.html#AUTHORIZED_KEYS_FILE_FORMAT">sshd(8)</a> manpage for information on securing the keypair from the remote side in the <code class="docutils literal notranslate"><span class="pre">authorized_keys</span></code> file.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.5,2019.2.1,3000.</span></p> </div> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># Fetch first...
salt myminion git.fetch /path/to/repo
# ... then merge the remote tracking branch
salt myminion git.merge /path/to/repo
# .. or merge another rev
salt myminion git.merge /path/to/repo rev=upstream/foo</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.merge_base"> salt.modules.git.merge_base(cwd, refs=None, octopus=False, is_ancestor=False, independent=False, fork_point=None, opts='', git_opts='', user=None, password=None, ignore_retcode=False, output_encoding=None, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> <p>Interface to <a class="reference external" href="http://git-scm.com/docs/git-merge-base">git-merge-base(1)</a>.</p> <dl> <dt>cwd</dt>
<dd>
<p>The path to the git checkout</p> </dd> <dt>refs</dt>
<dd>
<p>Any refs/commits to check for a merge base. Can be passed as a comma-separated list or a Python list.</p> </dd> <dt>all<span class="classifier">False</span>
</dt>
<dd>
<p>Return a list of all matching merge bases. Not compatible with any of the below options except for <code class="docutils literal notranslate"><span class="pre">octopus</span></code>.</p> </dd> <dt>octopus<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, then this function will determine the best common ancestors of all specified commits, in preparation for an n-way merge. See <a class="reference external" href="http://git-scm.com/docs/git-merge-base#_discussion">here</a> for a description of how these bases are determined.</p> <p>Set <code class="docutils literal notranslate"><span class="pre">all</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code> with this option to return all computed merge bases, otherwise only the "best" will be returned.</p> </dd> <dt>is_ancestor<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, then instead of returning the merge base, return a boolean telling whether or not the first commit is an ancestor of the second commit.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This option requires two commits to be passed.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.2: </span>Works properly in git versions older than 1.8.0, where the <code class="docutils literal notranslate"><span class="pre">--is-ancestor</span></code> CLI option is not present.</p> </div> </dd> <dt>independent<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, this function will return the IDs of the refs/commits passed which cannot be reached by another commit.</p> </dd> <dt>fork_point</dt>
<dd>
<p>If passed, then this function will return the commit where the commit diverged from the ref specified by <code class="docutils literal notranslate"><span class="pre">fork_point</span></code>. If no fork point is found, <code class="docutils literal notranslate"><span class="pre">None</span></code> is returned.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>At most one commit is permitted to be passed if a <code class="docutils literal notranslate"><span class="pre">fork_point</span></code> is specified. If no commits are passed, then <code class="docutils literal notranslate"><span class="pre">HEAD</span></code> is assumed.</p> </div> </dd> <dt>opts</dt>
<dd>
<p>Any additional options to add to the command line, in a single string</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>On the Salt CLI, if the opts are preceded with a dash, it is necessary to precede them with <code class="docutils literal notranslate"><span class="pre">opts=</span></code> (as in the CLI examples below) to avoid causing errors with Salt's own argument parsing.</p> <p>This option should not be necessary unless new CLI arguments are added to <a class="reference external" href="http://git-scm.com/docs/git-merge-base">git-merge-base(1)</a> and are not yet supported in Salt.</p> </div> </dd> <dt>git_opts</dt>
<dd>
<p>Any additional options to add to git command itself (not the <code class="docutils literal notranslate"><span class="pre">merge-base</span></code> subcommand), in a single string. This is useful for passing <code class="docutils literal notranslate"><span class="pre">-c</span></code> to run git with temporary changes to the git configuration.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This is only supported in git 1.7.2 and newer.</p> </div> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>if <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion git.merge_base /path/to/repo HEAD upstream/mybranch
salt myminion git.merge_base /path/to/repo 8f2e542,4ad8cab,cdc9886 octopus=True
salt myminion git.merge_base /path/to/repo refs=8f2e542,4ad8cab,cdc9886 independent=True
salt myminion git.merge_base /path/to/repo refs=8f2e542,4ad8cab is_ancestor=True
salt myminion git.merge_base /path/to/repo fork_point=upstream/master
salt myminion git.merge_base /path/to/repo refs=mybranch fork_point=upstream/master</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.merge_tree"> salt.modules.git.merge_tree(cwd, ref1, ref2, base=None, user=None, password=None, ignore_retcode=False, output_encoding=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> <p>Interface to <a class="reference external" href="http://git-scm.com/docs/git-merge-tree">git-merge-tree(1)</a>, shows the merge results and conflicts from a 3-way merge without touching the index.</p> <dl> <dt>cwd</dt>
<dd>
<p>The path to the git checkout</p> </dd> <dt>ref1</dt>
<dd>
<p>First ref/commit to compare</p> </dd> <dt>ref2</dt>
<dd>
<p>Second ref/commit to compare</p> </dd> <dt>base</dt>
<dd>
<p>The base tree to use for the 3-way-merge. If not provided, then <a class="reference internal" href="#salt.modules.git.merge_base" title="salt.modules.git.merge_base"><code class="xref py py-func docutils literal notranslate"><span class="pre">git.merge_base</span></code></a> will be invoked on <code class="docutils literal notranslate"><span class="pre">ref1</span></code> and <code class="docutils literal notranslate"><span class="pre">ref2</span></code> to determine the merge base to use.</p> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>if <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion git.merge_tree /path/to/repo HEAD upstream/dev
salt myminion git.merge_tree /path/to/repo HEAD upstream/dev base=aaf3c3d</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.pull"> salt.modules.git.pull(cwd, opts='', git_opts='', user=None, password=None, identity=None, ignore_retcode=False, saltenv='base', output_encoding=None)</h3> <dd>
<p>Interface to <a class="reference external" href="http://git-scm.com/docs/git-pull">git-pull(1)</a></p> <dl> <dt>cwd</dt>
<dd>
<p>The path to the git checkout</p> </dd> <dt>opts</dt>
<dd>
<p>Any additional options to add to the command line, in a single string</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>On the Salt CLI, if the opts are preceded with a dash, it is necessary to precede them with <code class="docutils literal notranslate"><span class="pre">opts=</span></code> (as in the CLI examples below) to avoid causing errors with Salt's own argument parsing.</p> </div> </dd> <dt>git_opts</dt>
<dd>
<p>Any additional options to add to git command itself (not the <code class="docutils literal notranslate"><span class="pre">pull</span></code> subcommand), in a single string. This is useful for passing <code class="docutils literal notranslate"><span class="pre">-c</span></code> to run git with temporary changes to the git configuration.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This is only supported in git 1.7.2 and newer.</p> </div> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>identity</dt>
<dd>
<p>Path to a private key to use for ssh URLs</p> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>Unless Salt is invoked from the minion using <code class="docutils literal notranslate"><span class="pre">salt-call</span></code>, the key(s) must be passphraseless. For greater security with passphraseless private keys, see the <a class="reference external" href="http://www.man7.org/linux/man-pages/man8/sshd.8.html#AUTHORIZED_KEYS_FILE_FORMAT">sshd(8)</a> manpage for information on securing the keypair from the remote side in the <code class="docutils literal notranslate"><span class="pre">authorized_keys</span></code> file.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.7: </span>Salt will no longer attempt to use passphrase-protected keys unless invoked from the minion using <code class="docutils literal notranslate"><span class="pre">salt-call</span></code>, to prevent blocking waiting for user input.</p> </div> <p>Key can also be specified as a SaltStack file server URL, eg. salt://location/identity_file</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2016.3.0.</span></p> </div> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>saltenv</dt>
<dd>
<p>The default salt environment to pull sls files from</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.1.</span></p> </div> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion git.pull /path/to/repo opts='--rebase origin master'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.push"> salt.modules.git.push(cwd, remote=None, ref=None, opts='', git_opts='', user=None, password=None, identity=None, ignore_retcode=False, saltenv='base', output_encoding=None, **kwargs)</h3> <dd>
<p>Interface to <a class="reference external" href="http://git-scm.com/docs/git-push">git-push(1)</a></p> <dl> <dt>cwd</dt>
<dd>
<p>The path to the git checkout</p> </dd> <dt>remote</dt>
<dd>
<p>Name of the remote to which the ref should being pushed</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>ref<span class="classifier">master</span>
</dt>
<dd>
<p>Name of the ref to push</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>Being a <a class="reference external" href="http://git-scm.com/book/en/v2/Git-Internals-The-Refspec">refspec</a>, this argument can include a colon to define local and remote ref names.</p> </div> </dd> <dt>opts</dt>
<dd>
<p>Any additional options to add to the command line, in a single string</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>On the Salt CLI, if the opts are preceded with a dash, it is necessary to precede them with <code class="docutils literal notranslate"><span class="pre">opts=</span></code> (as in the CLI examples below) to avoid causing errors with Salt's own argument parsing.</p> </div> </dd> <dt>git_opts</dt>
<dd>
<p>Any additional options to add to git command itself (not the <code class="docutils literal notranslate"><span class="pre">push</span></code> subcommand), in a single string. This is useful for passing <code class="docutils literal notranslate"><span class="pre">-c</span></code> to run git with temporary changes to the git configuration.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This is only supported in git 1.7.2 and newer.</p> </div> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>identity</dt>
<dd>
<p>Path to a private key to use for ssh URLs</p> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>Unless Salt is invoked from the minion using <code class="docutils literal notranslate"><span class="pre">salt-call</span></code>, the key(s) must be passphraseless. For greater security with passphraseless private keys, see the <a class="reference external" href="http://www.man7.org/linux/man-pages/man8/sshd.8.html#AUTHORIZED_KEYS_FILE_FORMAT">sshd(8)</a> manpage for information on securing the keypair from the remote side in the <code class="docutils literal notranslate"><span class="pre">authorized_keys</span></code> file.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.7: </span>Salt will no longer attempt to use passphrase-protected keys unless invoked from the minion using <code class="docutils literal notranslate"><span class="pre">salt-call</span></code>, to prevent blocking waiting for user input.</p> </div> <p>Key can also be specified as a SaltStack file server URL, eg. salt://location/identity_file</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2016.3.0.</span></p> </div> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>saltenv</dt>
<dd>
<p>The default salt environment to pull sls files from</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.1.</span></p> </div> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># Push master as origin/master
salt myminion git.push /path/to/repo origin master
# Push issue21 as upstream/develop
salt myminion git.push /path/to/repo upstream issue21:develop
# Delete remote branch 'upstream/temp'
salt myminion git.push /path/to/repo upstream :temp</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.rebase"> salt.modules.git.rebase(cwd, rev='master', opts='', git_opts='', user=None, password=None, ignore_retcode=False, output_encoding=None)</h3> <dd>
<p>Interface to <a class="reference external" href="http://git-scm.com/docs/git-rebase">git-rebase(1)</a></p> <dl> <dt>cwd</dt>
<dd>
<p>The path to the git checkout</p> </dd> <dt>rev<span class="classifier">master</span>
</dt>
<dd>
<p>The revision to rebase onto the current branch</p> </dd> <dt>opts</dt>
<dd>
<p>Any additional options to add to the command line, in a single string</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>On the Salt CLI, if the opts are preceded with a dash, it is necessary to precede them with <code class="docutils literal notranslate"><span class="pre">opts=</span></code> (as in the CLI examples below) to avoid causing errors with Salt's own argument parsing.</p> </div> </dd> <dt>git_opts</dt>
<dd>
<p>Any additional options to add to git command itself (not the <code class="docutils literal notranslate"><span class="pre">rebase</span></code> subcommand), in a single string. This is useful for passing <code class="docutils literal notranslate"><span class="pre">-c</span></code> to run git with temporary changes to the git configuration.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This is only supported in git 1.7.2 and newer.</p> </div> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion git.rebase /path/to/repo master
salt myminion git.rebase /path/to/repo 'origin master'
salt myminion git.rebase /path/to/repo origin/master opts='--onto newbranch'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.remote_get"> salt.modules.git.remote_get(cwd, remote='origin', user=None, password=None, redact_auth=True, ignore_retcode=False, output_encoding=None)</h3> <dd>
<p>Get the fetch and push URL for a specific remote</p> <dl> <dt>cwd</dt>
<dd>
<p>The path to the git checkout</p> </dd> <dt>remote<span class="classifier">origin</span>
</dt>
<dd>
<p>Name of the remote to query</p> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>redact_auth<span class="classifier">True</span>
</dt>
<dd>
<p>Set to <code class="docutils literal notranslate"><span class="pre">False</span></code> to include the username/password if the remote uses HTTPS Basic Auth. Otherwise, this information will be redacted.</p> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>Setting this to <code class="docutils literal notranslate"><span class="pre">False</span></code> will not only reveal any HTTPS Basic Auth that is configured, but the return data will also be written to the job cache. When possible, it is recommended to use SSH for authentication.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.5.6.</span></p> </div> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion git.remote_get /path/to/repo
salt myminion git.remote_get /path/to/repo upstream</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.remote_refs"> salt.modules.git.remote_refs(url, heads=False, tags=False, user=None, password=None, identity=None, https_user=None, https_pass=None, ignore_retcode=False, output_encoding=None, saltenv='base', **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> <p>Return the remote refs for the specified URL by running <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">ls-remote</span></code>.</p> <dl> <dt>url</dt>
<dd>
<p>URL of the remote repository</p> </dd> <dt>filter</dt>
<dd>
<p>Optionally provide a ref name to <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">ls-remote</span></code>. This can be useful to make this function run faster on repositories with many branches/tags.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> </dd> <dt>heads<span class="classifier">False</span>
</dt>
<dd>
<p>Restrict output to heads. Can be combined with <code class="docutils literal notranslate"><span class="pre">tags</span></code>.</p> </dd> <dt>tags<span class="classifier">False</span>
</dt>
<dd>
<p>Restrict output to tags. Can be combined with <code class="docutils literal notranslate"><span class="pre">heads</span></code>.</p> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>identity</dt>
<dd>
<p>Path to a private key to use for ssh URLs</p> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>Unless Salt is invoked from the minion using <code class="docutils literal notranslate"><span class="pre">salt-call</span></code>, the key(s) must be passphraseless. For greater security with passphraseless private keys, see the <a class="reference external" href="http://www.man7.org/linux/man-pages/man8/sshd.8.html#AUTHORIZED_KEYS_FILE_FORMAT">sshd(8)</a> manpage for information on securing the keypair from the remote side in the <code class="docutils literal notranslate"><span class="pre">authorized_keys</span></code> file.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.7: </span>Salt will no longer attempt to use passphrase-protected keys unless invoked from the minion using <code class="docutils literal notranslate"><span class="pre">salt-call</span></code>, to prevent blocking waiting for user input.</p> </div> <p>Key can also be specified as a SaltStack file server URL, eg. salt://location/identity_file</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2016.3.0.</span></p> </div> </dd> <dt>https_user</dt>
<dd>
<p>Set HTTP Basic Auth username. Only accepted for HTTPS URLs.</p> </dd> <dt>https_pass</dt>
<dd>
<p>Set HTTP Basic Auth password. Only accepted for HTTPS URLs.</p> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> </dd> <dt>saltenv</dt>
<dd>
<p>The default salt environment to pull sls files from</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.1.</span></p> </div> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion git.remote_refs https://github.com/saltstack/salt.git
salt myminion git.remote_refs https://github.com/saltstack/salt.git filter=develop</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.remote_set"> salt.modules.git.remote_set(cwd, url, remote='origin', user=None, password=None, https_user=None, https_pass=None, push_url=None, push_https_user=None, push_https_pass=None, ignore_retcode=False, output_encoding=None)</h3> <dd>
<dl> <dt>cwd</dt>
<dd>
<p>The path to the git checkout</p> </dd> <dt>url</dt>
<dd>
<p>Remote URL to set</p> </dd> <dt>remote<span class="classifier">origin</span>
</dt>
<dd>
<p>Name of the remote to set</p> </dd> <dt>push_url</dt>
<dd>
<p>If unset, the push URL will be identical to the fetch URL.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>https_user</dt>
<dd>
<p>Set HTTP Basic Auth username. Only accepted for HTTPS URLs.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.5.0.</span></p> </div> </dd> <dt>https_pass</dt>
<dd>
<p>Set HTTP Basic Auth password. Only accepted for HTTPS URLs.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.5.0.</span></p> </div> </dd> <dt>push_https_user</dt>
<dd>
<p>Set HTTP Basic Auth user for <code class="docutils literal notranslate"><span class="pre">push_url</span></code>. Ignored if <code class="docutils literal notranslate"><span class="pre">push_url</span></code> is unset. Only accepted for HTTPS URLs.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>push_https_pass</dt>
<dd>
<p>Set HTTP Basic Auth password for <code class="docutils literal notranslate"><span class="pre">push_url</span></code>. Ignored if <code class="docutils literal notranslate"><span class="pre">push_url</span></code> is unset. Only accepted for HTTPS URLs.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion git.remote_set /path/to/repo git@github.com:user/repo.git
salt myminion git.remote_set /path/to/repo git@github.com:user/repo.git remote=upstream
salt myminion git.remote_set /path/to/repo https://github.com/user/repo.git remote=upstream push_url=git@github.com:user/repo.git</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.remotes"> salt.modules.git.remotes(cwd, user=None, password=None, redact_auth=True, ignore_retcode=False, output_encoding=None)</h3> <dd>
<p>Get fetch and push URLs for each remote in a git checkout</p> <dl> <dt>cwd</dt>
<dd>
<p>The path to the git checkout</p> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>redact_auth<span class="classifier">True</span>
</dt>
<dd>
<p>Set to <code class="docutils literal notranslate"><span class="pre">False</span></code> to include the username/password for authenticated remotes in the return data. Otherwise, this information will be redacted.</p> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>Setting this to <code class="docutils literal notranslate"><span class="pre">False</span></code> will not only reveal any HTTPS Basic Auth that is configured, but the return data will also be written to the job cache. When possible, it is recommended to use SSH for authentication.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.5.6.</span></p> </div> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion git.remotes /path/to/repo</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.reset"> salt.modules.git.reset(cwd, opts='', git_opts='', user=None, password=None, identity=None, ignore_retcode=False, output_encoding=None)</h3> <dd>
<p>Interface to <a class="reference external" href="http://git-scm.com/docs/git-reset">git-reset(1)</a>, returns the stdout from the git command</p> <dl> <dt>cwd</dt>
<dd>
<p>The path to the git checkout</p> </dd> <dt>opts</dt>
<dd>
<p>Any additional options to add to the command line, in a single string</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>On the Salt CLI, if the opts are preceded with a dash, it is necessary to precede them with <code class="docutils literal notranslate"><span class="pre">opts=</span></code> (as in the CLI examples below) to avoid causing errors with Salt's own argument parsing.</p> </div> </dd> <dt>git_opts</dt>
<dd>
<p>Any additional options to add to git command itself (not the <code class="docutils literal notranslate"><span class="pre">reset</span></code> subcommand), in a single string. This is useful for passing <code class="docutils literal notranslate"><span class="pre">-c</span></code> to run git with temporary changes to the git configuration.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This is only supported in git 1.7.2 and newer.</p> </div> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>identity</dt>
<dd>
<p>Path to a private key to use for ssh URLs. Salt will not attempt to use passphrase-protected keys unless invoked from the minion using <code class="docutils literal notranslate"><span class="pre">salt-call</span></code>, to prevent blocking waiting for user input. Key can also be specified as a SaltStack file server URL, eg. <code class="docutils literal notranslate"><span class="pre">salt://location/identity_file</span></code>.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>For greater security with passphraseless private keys, see the <a class="reference external" href="http://www.man7.org/linux/man-pages/man8/sshd.8.html#AUTHORIZED_KEYS_FILE_FORMAT">sshd(8)</a> manpage for information on securing the keypair from the remote side in the <code class="docutils literal notranslate"><span class="pre">authorized_keys</span></code> file.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.5,2019.2.1,3000.</span></p> </div> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash"># Soft reset to a specific commit ID
salt myminion git.reset /path/to/repo ac3ee5c
# Hard reset
salt myminion git.reset /path/to/repo opts='--hard origin/master'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.rev_parse"> salt.modules.git.rev_parse(cwd, rev=None, opts='', git_opts='', user=None, password=None, ignore_retcode=False, output_encoding=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> <p>Interface to <a class="reference external" href="http://git-scm.com/docs/git-rev-parse">git-rev-parse(1)</a></p> <dl> <dt>cwd</dt>
<dd>
<p>The path to the git checkout</p> </dd> <dt>rev</dt>
<dd>
<p>Revision to parse. See the <a class="reference external" href="http://git-scm.com/docs/git-rev-parse#_specifying_revisions">SPECIFYING REVISIONS</a> section of the <a class="reference external" href="http://git-scm.com/docs/git-rev-parse">git-rev-parse(1)</a> manpage for details on how to format this argument.</p> <p>This argument is optional when using the options in the <cite>Options for Files</cite> section of the <a class="reference external" href="http://git-scm.com/docs/git-rev-parse">git-rev-parse(1)</a> manpage.</p> </dd> <dt>opts</dt>
<dd>
<p>Any additional options to add to the command line, in a single string</p> </dd> <dt>git_opts</dt>
<dd>
<p>Any additional options to add to git command itself (not the <code class="docutils literal notranslate"><span class="pre">rev-parse</span></code> subcommand), in a single string. This is useful for passing <code class="docutils literal notranslate"><span class="pre">-c</span></code> to run git with temporary changes to the git configuration.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This is only supported in git 1.7.2 and newer.</p> </div> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash"># Get the full SHA1 for HEAD
salt myminion git.rev_parse /path/to/repo HEAD
# Get the short SHA1 for HEAD
salt myminion git.rev_parse /path/to/repo HEAD opts='--short'
# Get the develop branch's upstream tracking branch
salt myminion git.rev_parse /path/to/repo 'develop@{upstream}' opts='--abbrev-ref'
# Get the SHA1 for the commit corresponding to tag v1.2.3
salt myminion git.rev_parse /path/to/repo 'v1.2.3^{commit}'
# Find out whether or not the repo at /path/to/repo is a bare repository
salt myminion git.rev_parse /path/to/repo opts='--is-bare-repository'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.revision"> salt.modules.git.revision(cwd, rev='HEAD', short=False, user=None, password=None, ignore_retcode=False, output_encoding=None)</h3> <dd>
<p>Returns the SHA1 hash of a given identifier (hash, branch, tag, HEAD, etc.)</p> <dl> <dt>cwd</dt>
<dd>
<p>The path to the git checkout</p> </dd> <dt>rev<span class="classifier">HEAD</span>
</dt>
<dd>
<p>The revision</p> </dd> <dt>short<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, return an abbreviated SHA1 git hash</p> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion git.revision /path/to/repo mybranch</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.rm_"> salt.modules.git.rm_(cwd, filename, opts='', git_opts='', user=None, password=None, ignore_retcode=False, output_encoding=None)</h3> <dd>
<p>Interface to <a class="reference external" href="http://git-scm.com/docs/git-rm">git-rm(1)</a></p> <dl> <dt>cwd</dt>
<dd>
<p>The path to the git checkout</p> </dd> <dt>filename</dt>
<dd>
<p>The location of the file/directory to remove, relative to <code class="docutils literal notranslate"><span class="pre">cwd</span></code></p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>To remove a directory, <code class="docutils literal notranslate"><span class="pre">-r</span></code> must be part of the <code class="docutils literal notranslate"><span class="pre">opts</span></code> parameter.</p> </div> </dd> <dt>opts</dt>
<dd>
<p>Any additional options to add to the command line, in a single string</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>On the Salt CLI, if the opts are preceded with a dash, it is necessary to precede them with <code class="docutils literal notranslate"><span class="pre">opts=</span></code> (as in the CLI examples below) to avoid causing errors with Salt's own argument parsing.</p> </div> </dd> <dt>git_opts</dt>
<dd>
<p>Any additional options to add to git command itself (not the <code class="docutils literal notranslate"><span class="pre">rm</span></code> subcommand), in a single string. This is useful for passing <code class="docutils literal notranslate"><span class="pre">-c</span></code> to run git with temporary changes to the git configuration.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This is only supported in git 1.7.2 and newer.</p> </div> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion git.rm /path/to/repo foo/bar.py
salt myminion git.rm /path/to/repo foo/bar.py opts='--dry-run'
salt myminion git.rm /path/to/repo foo/baz opts='-r'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.stash"> salt.modules.git.stash(cwd, action='save', opts='', git_opts='', user=None, password=None, ignore_retcode=False, output_encoding=None)</h3> <dd>
<p>Interface to <a class="reference external" href="http://git-scm.com/docs/git-stash">git-stash(1)</a>, returns the stdout from the git command</p> <dl> <dt>cwd</dt>
<dd>
<p>The path to the git checkout</p> </dd> <dt>opts</dt>
<dd>
<p>Any additional options to add to the command line, in a single string. Use this to complete the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">stash</span></code> command by adding the remaining arguments (i.e. <code class="docutils literal notranslate"><span class="pre">'save</span> <span class="pre">&lt;stash</span> <span class="pre">comment&gt;'</span></code>, <code class="docutils literal notranslate"><span class="pre">'apply</span> <span class="pre">stash@{2}'</span></code>, <code class="docutils literal notranslate"><span class="pre">'show'</span></code>, etc.). Omitting this argument will simply run <code class="docutils literal notranslate"><span class="pre">git</span>
<span class="pre">stash</span></code>.</p> </dd> <dt>git_opts</dt>
<dd>
<p>Any additional options to add to git command itself (not the <code class="docutils literal notranslate"><span class="pre">stash</span></code> subcommand), in a single string. This is useful for passing <code class="docutils literal notranslate"><span class="pre">-c</span></code> to run git with temporary changes to the git configuration.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This is only supported in git 1.7.2 and newer.</p> </div> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion git.stash /path/to/repo save opts='work in progress'
salt myminion git.stash /path/to/repo apply opts='stash@{1}'
salt myminion git.stash /path/to/repo drop opts='stash@{1}'
salt myminion git.stash /path/to/repo list</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.status"> salt.modules.git.status(cwd, user=None, password=None, ignore_retcode=False, output_encoding=None)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.0: </span>Return data has changed from a list of lists to a dictionary</p> </div> <p>Returns the changes to the repository</p> <dl> <dt>cwd</dt>
<dd>
<p>The path to the git checkout</p> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion git.status /path/to/repo</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.submodule"> salt.modules.git.submodule(cwd, command, opts='', git_opts='', user=None, password=None, identity=None, ignore_retcode=False, saltenv='base', output_encoding=None, **kwargs)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.0: </span>Added the <code class="docutils literal notranslate"><span class="pre">command</span></code> argument to allow for operations other than <code class="docutils literal notranslate"><span class="pre">update</span></code> to be run on submodules, and deprecated the <code class="docutils literal notranslate"><span class="pre">init</span></code> argument. To do a submodule update with <code class="docutils literal notranslate"><span class="pre">init=True</span></code> moving forward, use <code class="docutils literal notranslate"><span class="pre">command=update</span> <span class="pre">opts='--init'</span></code></p> </div> <p>Interface to <a class="reference external" href="http://git-scm.com/docs/git-submodule">git-submodule(1)</a></p> <dl> <dt>cwd</dt>
<dd>
<p>The path to the submodule</p> </dd> <dt>command</dt>
<dd>
<p>Submodule command to run, see <cite>git-submodule(1) &lt;git submodule&gt;</cite> for more information. Any additional arguments after the command (such as the URL when adding a submodule) must be passed in the <code class="docutils literal notranslate"><span class="pre">opts</span></code> parameter.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>opts</dt>
<dd>
<p>Any additional options to add to the command line, in a single string</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>On the Salt CLI, if the opts are preceded with a dash, it is necessary to precede them with <code class="docutils literal notranslate"><span class="pre">opts=</span></code> (as in the CLI examples below) to avoid causing errors with Salt's own argument parsing.</p> </div> </dd> <dt>git_opts</dt>
<dd>
<p>Any additional options to add to git command itself (not the <code class="docutils literal notranslate"><span class="pre">submodule</span></code> subcommand), in a single string. This is useful for passing <code class="docutils literal notranslate"><span class="pre">-c</span></code> to run git with temporary changes to the git configuration.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This is only supported in git 1.7.2 and newer.</p> </div> </dd> <dt>init<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, ensures that new submodules are initialized</p> <div class="deprecated"> <p><span class="versionmodified deprecated">Deprecated since version 2015.8.0: </span>Pass <code class="docutils literal notranslate"><span class="pre">init</span></code> as the <code class="docutils literal notranslate"><span class="pre">command</span></code> parameter, or include <code class="docutils literal notranslate"><span class="pre">--init</span></code> in the <code class="docutils literal notranslate"><span class="pre">opts</span></code> param with <code class="docutils literal notranslate"><span class="pre">command</span></code> set to update.</p> </div> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>identity</dt>
<dd>
<p>Path to a private key to use for ssh URLs</p> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>Unless Salt is invoked from the minion using <code class="docutils literal notranslate"><span class="pre">salt-call</span></code>, the key(s) must be passphraseless. For greater security with passphraseless private keys, see the <a class="reference external" href="http://www.man7.org/linux/man-pages/man8/sshd.8.html#AUTHORIZED_KEYS_FILE_FORMAT">sshd(8)</a> manpage for information on securing the keypair from the remote side in the <code class="docutils literal notranslate"><span class="pre">authorized_keys</span></code> file.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.7: </span>Salt will no longer attempt to use passphrase-protected keys unless invoked from the minion using <code class="docutils literal notranslate"><span class="pre">salt-call</span></code>, to prevent blocking waiting for user input.</p> </div> <p>Key can also be specified as a SaltStack file server URL, eg. salt://location/identity_file</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2016.3.0.</span></p> </div> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>saltenv</dt>
<dd>
<p>The default salt environment to pull sls files from</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.1.</span></p> </div> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># Update submodule and ensure it is initialized (before 2015.8.0)
salt myminion git.submodule /path/to/repo/sub/repo init=True
# Update submodule and ensure it is initialized (2015.8.0 and later)
salt myminion git.submodule /path/to/repo/sub/repo update opts='--init'

# Rebase submodule (2015.8.0 and later)
salt myminion git.submodule /path/to/repo/sub/repo update opts='--rebase'

# Add submodule (2015.8.0 and later)
salt myminion git.submodule /path/to/repo/sub/repo add opts='https://mydomain.tld/repo.git'

# Unregister submodule (2015.8.0 and later)
salt myminion git.submodule /path/to/repo/sub/repo deinit</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.symbolic_ref"> salt.modules.git.symbolic_ref(cwd, ref, value=None, opts='', git_opts='', user=None, password=None, ignore_retcode=False, output_encoding=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> <p>Interface to <a class="reference external" href="http://git-scm.com/docs/git-symbolic-ref">git-symbolic-ref(1)</a></p> <dl> <dt>cwd</dt>
<dd>
<p>The path to the git checkout</p> </dd> <dt>ref</dt>
<dd>
<p>Symbolic ref to read/modify</p> </dd> <dt>value</dt>
<dd>
<p>If passed, then the symbolic ref will be set to this value and an empty string will be returned.</p> <p>If not passed, then the ref to which <code class="docutils literal notranslate"><span class="pre">ref</span></code> points will be returned, unless <code class="docutils literal notranslate"><span class="pre">--delete</span></code> is included in <code class="docutils literal notranslate"><span class="pre">opts</span></code> (in which case the symbolic ref will be deleted).</p> </dd> <dt>opts</dt>
<dd>
<p>Any additional options to add to the command line, in a single string</p> </dd> <dt>git_opts</dt>
<dd>
<p>Any additional options to add to git command itself (not the <code class="docutils literal notranslate"><span class="pre">symbolic-refs</span></code> subcommand), in a single string. This is useful for passing <code class="docutils literal notranslate"><span class="pre">-c</span></code> to run git with temporary changes to the git configuration.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This is only supported in git 1.7.2 and newer.</p> </div> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash"># Get ref to which HEAD is pointing
salt myminion git.symbolic_ref /path/to/repo HEAD
# Set/overwrite symbolic ref 'FOO' to local branch 'foo'
salt myminion git.symbolic_ref /path/to/repo FOO refs/heads/foo
# Delete symbolic ref 'FOO'
salt myminion git.symbolic_ref /path/to/repo FOO opts='--delete'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.tag"> salt.modules.git.tag(cwd, name, ref='HEAD', message=None, opts='', git_opts='', user=None, password=None, ignore_retcode=False, output_encoding=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.4.</span></p> </div> <p>Interface to <a class="reference external" href="http://git-scm.com/docs/git-tag">git-tag(1)</a>, adds and removes tags.</p> <dl> <dt>cwd</dt>
<dd>
<p>The path to the main git checkout or a linked worktree</p> </dd> <dt>name</dt>
<dd>
<p>Name of the tag</p> </dd> <dt>ref<span class="classifier">HEAD</span>
</dt>
<dd>
<p>Which ref to tag (defaults to local clone's HEAD)</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This argument is ignored when either <code class="docutils literal notranslate"><span class="pre">-d</span></code> or <code class="docutils literal notranslate"><span class="pre">--delete</span></code> is present in the <code class="docutils literal notranslate"><span class="pre">opts</span></code> passed to this function.</p> </div> </dd> <dt>message</dt>
<dd>
<p>Optional message to include with the tag. If provided, an annotated tag will be created.</p> </dd> <dt>opts</dt>
<dd>
<p>Any additional options to add to the command line, in a single string</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>Additionally, on the Salt CLI, if the opts are preceded with a dash, it is necessary to precede them with <code class="docutils literal notranslate"><span class="pre">opts=</span></code> (as in the CLI examples below) to avoid causing errors with Salt's own argument parsing.</p> </div> </dd> <dt>git_opts</dt>
<dd>
<p>Any additional options to add to git command itself (not the <code class="docutils literal notranslate"><span class="pre">worktree</span></code> subcommand), in a single string. This is useful for passing <code class="docutils literal notranslate"><span class="pre">-c</span></code> to run git with temporary changes to the git configuration.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This is only supported in git 1.7.2 and newer.</p> </div> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># Create an non-annotated tag
salt myminion git.tag /path/to/repo v1.2
# Create an annotated tag
salt myminion git.tag /path/to/repo v1.2 message='Version 1.2'
# Delete the tag
salt myminion git.tag /path/to/repo v1.2 opts='-d'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.version"> salt.modules.git.version(versioninfo=False)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> <p>Returns the version of Git installed on the minion</p> <dl class="simple"> <dt>versioninfo<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, return the version in a versioninfo list (e.g. <code class="docutils literal notranslate"><span class="pre">[2,</span> <span class="pre">5,</span>
<span class="pre">0]</span></code>)</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion git.version</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.worktree_add"> salt.modules.git.worktree_add(cwd, worktree_path, ref=None, reset_branch=None, force=None, detach=False, opts='', git_opts='', user=None, password=None, ignore_retcode=False, output_encoding=None, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> <p>Interface to <a class="reference external" href="http://git-scm.com/docs/git-worktree">git-worktree(1)</a>, adds a worktree</p> <dl> <dt>cwd</dt>
<dd>
<p>The path to the git checkout</p> </dd> <dt>worktree_path</dt>
<dd>
<p>Path to the new worktree. Can be either absolute, or relative to <code class="docutils literal notranslate"><span class="pre">cwd</span></code>.</p> </dd> <dt>branch</dt>
<dd>
<p>Name of new branch to create. If omitted, will be set to the basename of the <code class="docutils literal notranslate"><span class="pre">worktree_path</span></code>. For example, if the <code class="docutils literal notranslate"><span class="pre">worktree_path</span></code> is <code class="docutils literal notranslate"><span class="pre">/foo/bar/baz</span></code>, then <code class="docutils literal notranslate"><span class="pre">branch</span></code> will be <code class="docutils literal notranslate"><span class="pre">baz</span></code>.</p> </dd> <dt>ref</dt>
<dd>
<p>Name of the ref on which to base the new worktree. If omitted, then <code class="docutils literal notranslate"><span class="pre">HEAD</span></code> is use, and a new branch will be created, named for the basename of the <code class="docutils literal notranslate"><span class="pre">worktree_path</span></code>. For example, if the <code class="docutils literal notranslate"><span class="pre">worktree_path</span></code> is <code class="docutils literal notranslate"><span class="pre">/foo/bar/baz</span></code> then a new branch <code class="docutils literal notranslate"><span class="pre">baz</span></code> will be created, and pointed at <code class="docutils literal notranslate"><span class="pre">HEAD</span></code>.</p> </dd> <dt>reset_branch<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">False</span></code>, then <a class="reference external" href="http://git-scm.com/docs/git-worktree">git-worktree(1)</a> will fail to create the worktree if the targeted branch already exists. Set this argument to <code class="docutils literal notranslate"><span class="pre">True</span></code> to reset the targeted branch to point at <code class="docutils literal notranslate"><span class="pre">ref</span></code>, and checkout the newly-reset branch into the new worktree.</p> </dd> <dt>force<span class="classifier">False</span>
</dt>
<dd>
<p>By default, <a class="reference external" href="http://git-scm.com/docs/git-worktree">git-worktree(1)</a> will not permit the same branch to be checked out in more than one worktree. Set this argument to <code class="docutils literal notranslate"><span class="pre">True</span></code> to override this.</p> </dd> <dt>opts</dt>
<dd>
<p>Any additional options to add to the command line, in a single string</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>On the Salt CLI, if the opts are preceded with a dash, it is necessary to precede them with <code class="docutils literal notranslate"><span class="pre">opts=</span></code> to avoid causing errors with Salt's own argument parsing.</p> <p>All CLI options for adding worktrees as of Git 2.5.0 are already supported by this function as of Salt 2015.8.0, so using this argument is unnecessary unless new CLI arguments are added to <a class="reference external" href="http://git-scm.com/docs/git-worktree">git-worktree(1)</a> and are not yet supported in Salt.</p> </div> </dd> <dt>git_opts</dt>
<dd>
<p>Any additional options to add to git command itself (not the <code class="docutils literal notranslate"><span class="pre">worktree</span></code> subcommand), in a single string. This is useful for passing <code class="docutils literal notranslate"><span class="pre">-c</span></code> to run git with temporary changes to the git configuration.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This is only supported in git 1.7.2 and newer.</p> </div> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion git.worktree_add /path/to/repo/main ../hotfix ref=origin/master
salt myminion git.worktree_add /path/to/repo/main ../hotfix branch=hotfix21 ref=v2.1.9.3</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.worktree_prune"> salt.modules.git.worktree_prune(cwd, dry_run=False, verbose=True, expire=None, opts='', git_opts='', user=None, password=None, ignore_retcode=False, output_encoding=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> <p>Interface to <a class="reference external" href="http://git-scm.com/docs/git-worktree">git-worktree(1)</a>, prunes stale worktree administrative data from the gitdir</p> <dl> <dt>cwd</dt>
<dd>
<p>The path to the main git checkout or a linked worktree</p> </dd> <dt>dry_run<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, then this function will report what would have been pruned, but no changes will be made.</p> </dd> <dt>verbose<span class="classifier">True</span>
</dt>
<dd>
<p>Report all changes made. Set to <code class="docutils literal notranslate"><span class="pre">False</span></code> to suppress this output.</p> </dd> <dt>expire</dt>
<dd>
<p>Only prune unused worktree data older than a specific period of time. The date format for this parameter is described in the documentation for the <code class="docutils literal notranslate"><span class="pre">gc.pruneWorktreesExpire</span></code> config param in the <a class="reference external" href="http://git-scm.com/docs/git-config/2.5.1">git-config(1)</a> manpage.</p> </dd> <dt>opts</dt>
<dd>
<p>Any additional options to add to the command line, in a single string</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>On the Salt CLI, if the opts are preceded with a dash, it is necessary to precede them with <code class="docutils literal notranslate"><span class="pre">opts=</span></code> to avoid causing errors with Salt's own argument parsing.</p> <p>All CLI options for pruning worktrees as of Git 2.5.0 are already supported by this function as of Salt 2015.8.0, so using this argument is unnecessary unless new CLI arguments are added to <a class="reference external" href="http://git-scm.com/docs/git-worktree">git-worktree(1)</a> and are not yet supported in Salt.</p> </div> </dd> <dt>git_opts</dt>
<dd>
<p>Any additional options to add to git command itself (not the <code class="docutils literal notranslate"><span class="pre">worktree</span></code> subcommand), in a single string. This is useful for passing <code class="docutils literal notranslate"><span class="pre">-c</span></code> to run git with temporary changes to the git configuration.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This is only supported in git 1.7.2 and newer.</p> </div> </dd> <dt>user</dt>
<dd>
<p>User under which to run the git command. By default, the command is run by the user under which the minion is running.</p> </dd> <dt>password</dt>
<dd>
<blockquote> <div>
<p>Windows only. Required when specifying <code class="docutils literal notranslate"><span class="pre">user</span></code>. This parameter will be ignored on non-Windows platforms.</p> </div>
</blockquote> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.4.</span></p> </div> </dd> <dt>ignore_retcode<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not log an error to the minion log if the git command returns a nonzero exit status.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion git.worktree_prune /path/to/repo
salt myminion git.worktree_prune /path/to/repo dry_run=True
salt myminion git.worktree_prune /path/to/repo expire=1.day.ago</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.git.worktree_rm"> salt.modules.git.worktree_rm(cwd, user=None, output_encoding=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> <p>Recursively removes the worktree located at <code class="docutils literal notranslate"><span class="pre">cwd</span></code>, returning <code class="docutils literal notranslate"><span class="pre">True</span></code> if successful. This function will attempt to determine if <code class="docutils literal notranslate"><span class="pre">cwd</span></code> is actually a worktree by invoking <a class="reference internal" href="#salt.modules.git.is_worktree" title="salt.modules.git.is_worktree"><code class="xref py py-func docutils literal notranslate"><span class="pre">git.is_worktree</span></code></a>. If the path does not correspond to a worktree, then an error will be raised and no action will be taken.</p> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>There is no undoing this action. Be <strong>VERY</strong> careful before running this function.</p> </div> <dl> <dt>cwd</dt>
<dd>
<p>Path to the worktree to be removed</p> </dd> <dt>user</dt>
<dd>
<p>Used for path expansion when <code class="docutils literal notranslate"><span class="pre">cwd</span></code> is not an absolute path. By default, when <code class="docutils literal notranslate"><span class="pre">cwd</span></code> is not absolute, the path will be assumed to be relative to the home directory of the user under which the minion is running. Setting this option will change the home directory from which path expansion is performed.</p> </dd> <dt>output_encoding</dt>
<dd>
<p>Use this option to specify which encoding to use to decode the output from any git commands which are run. This should not be needed in most cases.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This should only be needed if the files in the repository were created with filenames using an encoding other than UTF-8 to handle Unicode characters.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.1.</span></p> </div> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion git.worktree_rm /path/to/worktree</pre> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.git.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.git.html</a>
  </p>
</div>
