<h1>salt.modules.pkg_resource</h1> <p>Resources needed by pkg providers</p> <dl class="py function"> <h3 id="salt.modules.pkg_resource.add_pkg"> salt.modules.pkg_resource.add_pkg(pkgs, name, pkgver)</h3> <dd>
<p>Add a package to a dict of installed packages.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg_resource.add_pkg '{}' bind 9</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.pkg_resource.check_extra_requirements"> salt.modules.pkg_resource.check_extra_requirements(pkgname, pkgver)</h3> <dd>
<p>Check if the installed package already has the given requirements. This function will return the result of <code class="docutils literal notranslate"><span class="pre">pkg.check_extra_requirements</span></code> if this function exists for the minion, otherwise it will return True.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg_resource.check_extra_requirements &lt;pkgname&gt; &lt;extra_requirements&gt;</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.pkg_resource.format_pkg_list"> salt.modules.pkg_resource.format_pkg_list(packages, versions_as_list, attr)</h3> <dd>
<p>Formats packages according to parameters for list_pkgs.</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.pkg_resource.format_version"> salt.modules.pkg_resource.format_version(epoch, version, release)</h3> <dd>
<p>Formats a version string for list_pkgs.</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.pkg_resource.pack_sources"> salt.modules.pkg_resource.pack_sources(sources, normalize=True)</h3> <dd>
<p>Accepts list of dicts (or a string representing a list of dicts) and packs the key/value pairs into a single dict.</p> <p><code class="docutils literal notranslate"><span class="pre">'[{"foo":</span> <span class="pre">"salt://foo.rpm"},</span> <span class="pre">{"bar":</span> <span class="pre">"salt://bar.rpm"}]'</span></code> would become <code class="docutils literal notranslate"><span class="pre">{"foo":</span> <span class="pre">"salt://foo.rpm",</span> <span class="pre">"bar":</span> <span class="pre">"salt://bar.rpm"}</span></code></p> <dl> <dt>normalize<span class="classifier">True</span>
</dt>
<dd>
<p>Normalize the package name by removing the architecture, if the architecture of the package is different from the architecture of the operating system. The ability to disable this behavior is useful for poorly-created packages which include the architecture as an actual part of the name, such as kernel modules which match a specific kernel version.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg_resource.pack_sources '[{"foo": "salt://foo.rpm"}, {"bar": "salt://bar.rpm"}]'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.pkg_resource.parse_targets"> salt.modules.pkg_resource.parse_targets(name=None, pkgs=None, sources=None, saltenv='base', normalize=True, **kwargs)</h3> <dd>
<p>Parses the input to pkg.install and returns back the package(s) to be installed. Returns a list of packages, as well as a string noting whether the packages are to come from a repository or a binary package.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg_resource.parse_targets</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.pkg_resource.sort_pkglist"> salt.modules.pkg_resource.sort_pkglist(pkgs)</h3> <dd>
<p>Accepts a dict obtained from pkg.list_pkgs() and sorts in place the list of versions for any packages that have multiple versions installed, so that two package lists can be compared to one another.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg_resource.sort_pkglist '["3.45", "2.13"]'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.pkg_resource.stringify"> salt.modules.pkg_resource.stringify(pkgs)</h3> <dd>
<p>Takes a dict of package name/version information and joins each list of installed versions into a string.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg_resource.stringify 'vim: 7.127'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.pkg_resource.version"> salt.modules.pkg_resource.version(*names, **kwargs)</h3> <dd>
<p>Common interface for obtaining the version of installed packages.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg_resource.version vim
salt '*' pkg_resource.version foo bar baz
salt '*' pkg_resource.version 'python*'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.pkg_resource.version_clean"> salt.modules.pkg_resource.version_clean(verstr)</h3> <dd>
<p>Clean the version string removing extra data. This function will simply try to call <code class="docutils literal notranslate"><span class="pre">pkg.version_clean</span></code>.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg_resource.version_clean &lt;version_string&gt;</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.pkg_resource.version_compare"> salt.modules.pkg_resource.version_compare(ver1, oper, ver2, ignore_epoch=False)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3001.</span></p> </div> <p>Perform a version comparison, using (where available) platform-specific version comparison tools to make the comparison.</p> <dl class="simple"> <dt>ver1</dt>
<dd>
<p>The first version to be compared</p> </dd> <dt>oper</dt>
<dd>
<p>One of <cite>==</cite>, <cite>!=</cite>, <cite>&gt;=</cite>, <cite>&lt;=</cite>, <cite>&gt;</cite>, <cite>&lt;</cite></p> </dd> <dt>ver2</dt>
<dd>
<p>The second version to be compared</p> </dd> </dl> <div class="admonition note"> <p class="admonition-title">Note</p> <p>To avoid shell interpretation, each of the above values should be quoted when this function is used on the CLI.</p> </div> <dl class="simple"> <dt>ignore_epoch<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, both package versions will have their epoch prefix stripped before comparison.</p> </dd> </dl> <p>This function is useful in Jinja templates, to perform specific actions when a package's version meets certain criteria. For example:</p> <pre class="highlight-jinja notranslate" data-language="jinja">{%- set postfix_version = salt.pkg.version('postfix') %}
{%- if postfix_version and salt.pkg_resource.version_compare(postfix_version, '&gt;=', '3.3', ignore_epoch=True) %}
  {#- do stuff #}
{%- endif %}</pre> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion pkg_resource.version_compare '3.5' '&lt;=' '2.4'
salt myminion pkg_resource.version_compare '3.5' '&lt;=' '2.4' ignore_epoch=True</pre> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.pkg_resource.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.pkg_resource.html</a>
  </p>
</div>
