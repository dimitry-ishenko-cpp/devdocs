<h1>salt.modules.linux_shadow</h1> <p>Manage the shadow file on Linux systems</p> <div class="admonition important"> <p class="admonition-title">Important</p> <p>If you feel that Salt should be using this module to manage passwords on a minion, and it is using a different module (or gives an error similar to <em>'shadow.info' is not available</em>), see <a class="reference internal" href="https://docs.saltproject.io/en/latest/ref/modules/index.html#module-provider-override"><span class="std std-ref">here</span></a>.</p> </div> <dl class="py function"> <h3 id="salt.modules.linux_shadow.default_hash"> salt.modules.linux_shadow.default_hash()</h3> <dd>
<p>Returns the default hash used for unset passwords</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' shadow.default_hash</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.linux_shadow.del_password"> salt.modules.linux_shadow.del_password(name, root=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2014.7.0.</span></p> </div> <p>Delete the password from name user</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>User to delete</p> </dd> <dt>root</dt>
<dd>
<p>Directory to chroot into</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' shadow.del_password username</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.linux_shadow.gen_password"> salt.modules.linux_shadow.gen_password(password, crypt_salt=None, algorithm='sha512')</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2014.7.0.</span></p> </div> <p>Generate hashed password</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>When called this function is called directly via remote-execution, the password argument may be displayed in the system's process list. This may be a security risk on certain systems.</p> </div> <dl class="simple"> <dt>password</dt>
<dd>
<p>Plaintext password to be hashed.</p> </dd> <dt>crypt_salt</dt>
<dd>
<p>Crpytographic salt. If not given, a random 8-character salt will be generated.</p> </dd> <dt>algorithm</dt>
<dd>
<p>The following hash algorithms are supported:</p> <ul class="simple"> <li><p>md5</p></li> <li><p>blowfish (not in mainline glibc, only available in distros that add it)</p></li> <li><p>sha256</p></li> <li><p>sha512 (default)</p></li> </ul> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' shadow.gen_password 'I_am_password'
salt '*' shadow.gen_password 'I_am_password' crypt_salt='I_am_salt' algorithm=sha256</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.linux_shadow.info"> salt.modules.linux_shadow.info(name, root=None)</h3> <dd>
<p>Return information for the specified user</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>User to get the information for</p> </dd> <dt>root</dt>
<dd>
<p>Directory to chroot into</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' shadow.info root</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.linux_shadow.list_users"> salt.modules.linux_shadow.list_users(root=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.0.</span></p> </div> <p>Return a list of all shadow users</p> <dl class="simple"> <dt>root</dt>
<dd>
<p>Directory to chroot into</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' shadow.list_users</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.linux_shadow.lock_password"> salt.modules.linux_shadow.lock_password(name, root=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2016.11.0.</span></p> </div> <p>Lock the password from specified user</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>User to lock</p> </dd> <dt>root</dt>
<dd>
<p>Directory to chroot into</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' shadow.lock_password username</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.linux_shadow.set_date"> salt.modules.linux_shadow.set_date(name, date, root=None)</h3> <dd>
<p>Sets the value for the date the password was last changed to days since the epoch (January 1, 1970). See man chage.</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>User to modify</p> </dd> <dt>date</dt>
<dd>
<p>Date the password was last changed</p> </dd> <dt>root</dt>
<dd>
<p>Directory to chroot into</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' shadow.set_date username 0</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.linux_shadow.set_expire"> salt.modules.linux_shadow.set_expire(name, expire, root=None)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2014.7.0.</span></p> </div> <p>Sets the value for the date the account expires as days since the epoch (January 1, 1970). Using a value of -1 will clear expiration. See man chage.</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>User to modify</p> </dd> <dt>date</dt>
<dd>
<p>Date the account expires</p> </dd> <dt>root</dt>
<dd>
<p>Directory to chroot into</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' shadow.set_expire username -1</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.linux_shadow.set_inactdays"> salt.modules.linux_shadow.set_inactdays(name, inactdays, root=None)</h3> <dd>
<p>Set the number of days of inactivity after a password has expired before the account is locked. See man chage.</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>User to modify</p> </dd> <dt>inactdays</dt>
<dd>
<p>Set password inactive after this number of days</p> </dd> <dt>root</dt>
<dd>
<p>Directory to chroot into</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' shadow.set_inactdays username 7</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.linux_shadow.set_maxdays"> salt.modules.linux_shadow.set_maxdays(name, maxdays, root=None)</h3> <dd>
<p>Set the maximum number of days during which a password is valid. See man chage.</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>User to modify</p> </dd> <dt>maxdays</dt>
<dd>
<p>Maximum number of days during which a password is valid</p> </dd> <dt>root</dt>
<dd>
<p>Directory to chroot into</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' shadow.set_maxdays username 90</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.linux_shadow.set_mindays"> salt.modules.linux_shadow.set_mindays(name, mindays, root=None)</h3> <dd>
<p>Set the minimum number of days between password changes. See man chage.</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>User to modify</p> </dd> <dt>mindays</dt>
<dd>
<p>Minimum number of days between password changes</p> </dd> <dt>root</dt>
<dd>
<p>Directory to chroot into</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' shadow.set_mindays username 7</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.linux_shadow.set_password"> salt.modules.linux_shadow.set_password(name, password, use_usermod=False, root=None)</h3> <dd>
<p>Set the password for a named user. The password must be a properly defined hash. The password hash can be generated with this command:</p> <p><code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-c</span> <span class="pre">"import</span> <span class="pre">crypt;</span> <span class="pre">print</span> <span class="pre">crypt.crypt('password',</span>
<span class="pre">'\$6\$SALTsalt')"</span></code></p> <p><code class="docutils literal notranslate"><span class="pre">SALTsalt</span></code> is the 8-character crpytographic salt. Valid characters in the salt are <code class="docutils literal notranslate"><span class="pre">.</span></code>, <code class="docutils literal notranslate"><span class="pre">/</span></code>, and any alphanumeric character.</p> <p>Keep in mind that the $6 represents a sha512 hash, if your OS is using a different hashing algorithm this needs to be changed accordingly</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>User to set the password</p> </dd> <dt>password</dt>
<dd>
<p>Password already hashed</p> </dd> <dt>use_usermod</dt>
<dd>
<p>Use usermod command to better compatibility</p> </dd> <dt>root</dt>
<dd>
<p>Directory to chroot into</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' shadow.set_password root '$1$UYCIxa628.9qXjpQCjM4a..'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.linux_shadow.set_warndays"> salt.modules.linux_shadow.set_warndays(name, warndays, root=None)</h3> <dd>
<p>Set the number of days of warning before a password change is required. See man chage.</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>User to modify</p> </dd> <dt>warndays</dt>
<dd>
<p>Number of days of warning before a password change is required</p> </dd> <dt>root</dt>
<dd>
<p>Directory to chroot into</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' shadow.set_warndays username 7</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.linux_shadow.unlock_password"> salt.modules.linux_shadow.unlock_password(name, root=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2016.11.0.</span></p> </div> <p>Unlock the password from name user</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>User to unlock</p> </dd> <dt>root</dt>
<dd>
<p>Directory to chroot into</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' shadow.unlock_password username</pre> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.linux_shadow.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.linux_shadow.html</a>
  </p>
</div>
