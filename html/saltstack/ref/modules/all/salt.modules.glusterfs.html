<h1>salt.modules.glusterfs</h1> <p>Manage a glusterfs pool</p> <dl class="py function"> <h3 id="salt.modules.glusterfs.add_volume_bricks"> salt.modules.glusterfs.add_volume_bricks(name, bricks)</h3> <dd>
<p>Add brick(s) to an existing volume</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>Volume name</p> </dd> <dt>bricks</dt>
<dd>
<p>List of bricks to add to the volume</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' glusterfs.add_volume_bricks &lt;volume&gt; &lt;bricks&gt;</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.glusterfs.create_volume"> salt.modules.glusterfs.create_volume(name, bricks, stripe=False, replica=False, device_vg=False, transport='tcp', start=False, force=False, arbiter=False)</h3> <dd>
<p>Create a glusterfs volume</p> <dl> <dt>name</dt>
<dd>
<p>Name of the gluster volume</p> </dd> <dt>bricks</dt>
<dd>
<p>Bricks to create volume from, in &lt;peer&gt;:&lt;brick path&gt; format. For multiple bricks use list format: '["&lt;peer1&gt;:&lt;brick1&gt;", "&lt;peer2&gt;:&lt;brick2&gt;"]'</p> </dd> <dt>stripe</dt>
<dd>
<p>Stripe count, the number of bricks should be a multiple of the stripe count for a distributed striped volume</p> </dd> <dt>replica</dt>
<dd>
<p>Replica count, the number of bricks should be a multiple of the replica count for a distributed replicated volume</p> </dd> <dt>arbiter</dt>
<dd>
<p>If true, specifies volume should use arbiter brick(s). Valid configuration limited to "replica 3 arbiter 1" per Gluster documentation. Every third brick in the brick list is used as an arbiter brick.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> </dd> <dt>device_vg</dt>
<dd>
<p>If true, specifies volume should use block backend instead of regular posix backend. Block device backend volume does not support multiple bricks</p> </dd> <dt>transport</dt>
<dd>
<p>Transport protocol to use, can be 'tcp', 'rdma' or 'tcp,rdma'</p> </dd> <dt>start</dt>
<dd>
<p>Start the volume after creation</p> </dd> <dt>force</dt>
<dd>
<p>Force volume creation, this works even if creating in root FS</p> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt host1 glusterfs.create newvolume host1:/brick

salt gluster1 glusterfs.create vol2 '["gluster1:/export/vol2/brick",         "gluster2:/export/vol2/brick"]' replica=2 start=True</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.glusterfs.delete_volume"> salt.modules.glusterfs.delete_volume(target, stop=True)</h3> <dd>
<p>Deletes a gluster volume</p> <dl class="simple"> <dt>target</dt>
<dd>
<p>Volume to delete</p> </dd> <dt>stop<span class="classifier">True</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, stop volume before delete</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' glusterfs.delete_volume &lt;volume&gt;</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.glusterfs.disable_quota_volume"> salt.modules.glusterfs.disable_quota_volume(name)</h3> <dd>
<p>Disable quota on a glusterfs volume.</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>Name of the gluster volume</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' glusterfs.disable_quota_volume &lt;volume&gt;</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.glusterfs.enable_quota_volume"> salt.modules.glusterfs.enable_quota_volume(name)</h3> <dd>
<p>Enable quota on a glusterfs volume.</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>Name of the gluster volume</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' glusterfs.enable_quota_volume &lt;volume&gt;</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.glusterfs.get_max_op_version"> salt.modules.glusterfs.get_max_op_version()</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Returns the glusterfs volume's max op-version value Requires Glusterfs version &gt; 3.9</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' glusterfs.get_max_op_version</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.glusterfs.get_op_version"> salt.modules.glusterfs.get_op_version(name)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Returns the glusterfs volume op-version</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>Name of the glusterfs volume</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' glusterfs.get_op_version &lt;volume&gt;</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.glusterfs.get_version"> salt.modules.glusterfs.get_version()</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Returns the version of glusterfs.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' glusterfs.get_version</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.glusterfs.info"> salt.modules.glusterfs.info(name=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.4.</span></p> </div> <p>Return gluster volume info.</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>Optional name to retrieve only information of one volume</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' glusterfs.info</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.glusterfs.list_quota_volume"> salt.modules.glusterfs.list_quota_volume(name)</h3> <dd>
<p>List quotas of glusterfs volume</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>Name of the gluster volume</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' glusterfs.list_quota_volume &lt;volume&gt;</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.glusterfs.list_volumes"> salt.modules.glusterfs.list_volumes()</h3> <dd>
<p>List configured volumes</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' glusterfs.list_volumes</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.glusterfs.peer"> salt.modules.glusterfs.peer(name)</h3> <dd>
<p>Add another node into the peer list.</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>The remote host to probe.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt 'one.gluster.*' glusterfs.peer two</pre> <p>GLUSTER direct CLI example (to show what salt is sending to gluster):</p> <blockquote> <div>
<p>$ gluster peer probe ftp2</p> </div>
</blockquote> <dl> <dt>GLUSTER CLI 3.4.4 return example (so we know what we are parsing):</dt>
<dd>
<p>#if the "peer" is the local host: peer probe: success: on localhost not needed</p> <p>#if the peer was just added: peer probe: success</p> <p>#if the peer was already part of the cluster: peer probe: success: host ftp2 port 24007 already in peer list</p> </dd> </dl> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.glusterfs.peer_status"> salt.modules.glusterfs.peer_status()</h3> <dd>
<p>Return peer status information</p> <p>The return value is a dictionary with peer UUIDs as keys and dicts of peer information as values. Hostnames are listed in one list. GlusterFS separates one of the hostnames but the only reason for this seems to be which hostname happens to be used first in peering.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' glusterfs.peer_status</pre> <p>GLUSTER direct CLI example (to show what salt is sending to gluster):</p> <blockquote> <div>
<p>$ gluster peer status</p> </div>
</blockquote> <p>GLUSTER CLI 3.4.4 return example (so we know what we are parsing):</p> <blockquote> <div>
<p>Number of Peers: 2</p> <p>Hostname: ftp2 Port: 24007 Uuid: cbcb256b-e66e-4ec7-a718-21082d396c24 State: Peer in Cluster (Connected)</p> <p>Hostname: ftp3 Uuid: 5ea10457-6cb2-427b-a770-7897509625e9 State: Peer in Cluster (Connected)</p> </div>
</blockquote> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.glusterfs.set_op_version"> salt.modules.glusterfs.set_op_version(version)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Set the glusterfs volume op-version</p> <dl class="simple"> <dt>version</dt>
<dd>
<p>Version to set the glusterfs volume op-version</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' glusterfs.set_op_version &lt;volume&gt;</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.glusterfs.set_quota_volume"> salt.modules.glusterfs.set_quota_volume(name, path, size, enable_quota=False)</h3> <dd>
<p>Set quota to glusterfs volume.</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>Name of the gluster volume</p> </dd> <dt>path</dt>
<dd>
<p>Folder path for restriction in volume ("/")</p> </dd> <dt>size</dt>
<dd>
<p>Hard-limit size of the volume (MB/GB)</p> </dd> <dt>enable_quota</dt>
<dd>
<p>Enable quota before set up restriction</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' glusterfs.set_quota_volume &lt;volume&gt; &lt;path&gt; &lt;size&gt; enable_quota=True</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.glusterfs.start_volume"> salt.modules.glusterfs.start_volume(name, force=False)</h3> <dd>
<p>Start a gluster volume</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>Volume name</p> </dd> <dt>force</dt>
<dd>
<p>Force the volume start even if the volume is started .. versionadded:: 2015.8.4</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' glusterfs.start mycluster</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.glusterfs.status"> salt.modules.glusterfs.status(name)</h3> <dd>
<p>Check the status of a gluster volume.</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>Volume name</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' glusterfs.status myvolume</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.glusterfs.stop_volume"> salt.modules.glusterfs.stop_volume(name, force=False)</h3> <dd>
<p>Stop a gluster volume</p> <dl> <dt>name</dt>
<dd>
<p>Volume name</p> </dd> <dt>force</dt>
<dd>
<p>Force stop the volume</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.4.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' glusterfs.stop_volume mycluster</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.glusterfs.unset_quota_volume"> salt.modules.glusterfs.unset_quota_volume(name, path)</h3> <dd>
<p>Unset quota on glusterfs volume</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>Name of the gluster volume</p> </dd> <dt>path</dt>
<dd>
<p>Folder path for restriction in volume</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' glusterfs.unset_quota_volume &lt;volume&gt; &lt;path&gt;</pre> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.glusterfs.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.glusterfs.html</a>
  </p>
</div>
