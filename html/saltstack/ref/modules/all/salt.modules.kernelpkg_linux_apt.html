<h1>salt.modules.kernelpkg_linux_apt</h1> <p>Manage Linux kernel packages on APT-based systems</p> <dl class="py function"> <h3 id="salt.modules.kernelpkg_linux_apt.active"> salt.modules.kernelpkg_linux_apt.active()</h3> <dd>
<p>Return the version of the running kernel.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' kernelpkg.active</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.kernelpkg_linux_apt.cleanup"> salt.modules.kernelpkg_linux_apt.cleanup(keep_latest=True)</h3> <dd>
<p>Remove all unused kernel packages from the system.</p> <dl class="simple"> <dt>keep_latest<span class="classifier">True</span>
</dt>
<dd>
<p>In the event that the active kernel is not the latest one installed, setting this to True will retain the latest kernel package, in addition to the active one. If False, all kernel packages other than the active one will be removed.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' kernelpkg.cleanup</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.kernelpkg_linux_apt.latest_available"> salt.modules.kernelpkg_linux_apt.latest_available()</h3> <dd>
<p>Return the version of the latest kernel from the package repositories.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' kernelpkg.latest_available</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.kernelpkg_linux_apt.latest_installed"> salt.modules.kernelpkg_linux_apt.latest_installed()</h3> <dd>
<p>Return the version of the latest installed kernel.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' kernelpkg.latest_installed</pre> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This function may not return the same value as <a class="reference internal" href="#salt.modules.kernelpkg_linux_apt.active" title="salt.modules.kernelpkg_linux_apt.active"><code class="xref py py-func docutils literal notranslate"><span class="pre">active()</span></code></a> if a new kernel has been installed and the system has not yet been rebooted. The <a class="reference internal" href="#salt.modules.kernelpkg_linux_apt.needs_reboot" title="salt.modules.kernelpkg_linux_apt.needs_reboot"><code class="xref py py-func docutils literal notranslate"><span class="pre">needs_reboot()</span></code></a> function exists to detect this condition.</p> </div> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.kernelpkg_linux_apt.list_installed"> salt.modules.kernelpkg_linux_apt.list_installed()</h3> <dd>
<p>Return a list of all installed kernels.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' kernelpkg.list_installed</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.kernelpkg_linux_apt.needs_reboot"> salt.modules.kernelpkg_linux_apt.needs_reboot()</h3> <dd>
<p>Detect if a new kernel version has been installed but is not running. Returns True if a new kernel is installed, False otherwise.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' kernelpkg.needs_reboot</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.kernelpkg_linux_apt.remove"> salt.modules.kernelpkg_linux_apt.remove(release)</h3> <dd>
<p>Remove a specific version of the kernel.</p> <dl class="simple"> <dt>release</dt>
<dd>
<p>The release number of an installed kernel. This must be the entire release number as returned by <a class="reference internal" href="#salt.modules.kernelpkg_linux_apt.list_installed" title="salt.modules.kernelpkg_linux_apt.list_installed"><code class="xref py py-func docutils literal notranslate"><span class="pre">list_installed()</span></code></a>, not the package name.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' kernelpkg.remove 4.4.0-70-generic</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.kernelpkg_linux_apt.upgrade"> salt.modules.kernelpkg_linux_apt.upgrade(reboot=False, at_time=None)</h3> <dd>
<p>Upgrade the kernel and optionally reboot the system.</p> <dl class="simple"> <dt>reboot<span class="classifier">False</span>
</dt>
<dd>
<p>Request a reboot if a new kernel is available.</p> </dd> <dt>at_time<span class="classifier">immediate</span>
</dt>
<dd>
<p>Schedule the reboot at some point in the future. This argument is ignored if <code class="docutils literal notranslate"><span class="pre">reboot=False</span></code>. See <a class="reference internal" href="salt.modules.system.html#salt.modules.system.reboot" title="salt.modules.system.reboot"><code class="xref py py-func docutils literal notranslate"><span class="pre">reboot()</span></code></a> for more details on this argument.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' kernelpkg.upgrade
salt '*' kernelpkg.upgrade reboot=True at_time=1</pre> <div class="admonition note"> <p class="admonition-title">Note</p> <p>An immediate reboot often shuts down the system before the minion has a chance to return, resulting in errors. A minimal delay (1 minute) is useful to ensure the result is delivered to the master.</p> </div> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.kernelpkg_linux_apt.upgrade_available"> salt.modules.kernelpkg_linux_apt.upgrade_available()</h3> <dd>
<p>Detect if a new kernel version is available in the repositories. Returns True if a new kernel is available, False otherwise.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' kernelpkg.upgrade_available</pre> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.kernelpkg_linux_apt.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.kernelpkg_linux_apt.html</a>
  </p>
</div>
