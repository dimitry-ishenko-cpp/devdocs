<h1>salt.modules.zypperpkg</h1> <p>Package support for openSUSE via the zypper package manager</p> <dl class="field-list simple"> <dt class="field-odd">depends</dt> <dd class="field-odd">
<ul class="simple"> <li><p><code class="docutils literal notranslate"><span class="pre">rpm</span></code> Python module. Install with <code class="docutils literal notranslate"><span class="pre">zypper</span> <span class="pre">install</span> <span class="pre">rpm-python</span></code></p></li> </ul> </dd> </dl> <div class="admonition important"> <p class="admonition-title">Important</p> <p>If you feel that Salt should be using this module to manage packages on a minion, and it is using a different module (or gives an error similar to <em>'pkg.install' is not available</em>), see <a class="reference internal" href="https://docs.saltproject.io/en/latest/ref/modules/index.html#module-provider-override"><span class="std std-ref">here</span></a>.</p> </div> <dl class="py class"> <dt id="salt.modules.zypperpkg.Wildcard"> <em class="property">class </em><code class="sig-prename descclassname">salt.modules.zypperpkg.</code><code class="sig-name descname">Wildcard</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">zypper</span></em><span class="sig-paren">)</span>
</dt> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> <p>Converts string wildcard to a zypper query. .. rubric:: Example</p> <p>'1.2.3.4*' is '1.2.3.4.whatever.is.here' and is equal to: '1.2.3.4 &gt;= and &lt; 1.2.3.5'</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<p><strong>ptn</strong> -- Pattern</p> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>Query range</p> </dd> </dl> <dl class="py attribute"> <dt id="salt.modules.zypperpkg.Wildcard.Z_OP"> <code class="sig-name descname">Z_OP</code><em class="property"> = ['&lt;', '&lt;=', '=', '&gt;=', '&gt;']</em>
</dt> 
</dl> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.add_lock"> salt.modules.zypperpkg.add_lock(name, root=None, **kwargs)</h3> <dd>
<div class="deprecated"> <p><span class="versionmodified deprecated">Deprecated since version 3003: </span>This function is deprecated. Please use <code class="docutils literal notranslate"><span class="pre">hold()</span></code> instead.</p> </div> <p>Add a package lock. Specify packages to lock by exact name.</p> <dl class="simple"> <dt>root</dt>
<dd>
<p>operate on a different root directory.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.add_lock &lt;package name&gt;
salt '*' pkg.add_lock &lt;package1&gt;,&lt;package2&gt;,&lt;package3&gt;</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.clean_locks"> salt.modules.zypperpkg.clean_locks(root=None)</h3> <dd>
<p>Remove unused locks that do not currently (with regard to repositories used) lock any package.</p> <dl class="simple"> <dt>root</dt>
<dd>
<p>Operate on a different root directory.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.clean_locks</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.del_repo"> salt.modules.zypperpkg.del_repo(repo, root=None)</h3> <dd>
<p>Delete a repo.</p> <dl class="simple"> <dt>root</dt>
<dd>
<p>operate on a different root directory.</p> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.del_repo alias</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.diff"> salt.modules.zypperpkg.diff(*paths, **kwargs)</h3> <dd>
<p>Return a formatted diff between current files and original in a package. NOTE: this function includes all files (configuration and not), but does not work on binary content.</p> <p>The root parameter can also be passed via the keyword argument.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<p><strong>path</strong> -- Full path to the installed file</p> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>Difference string or raises and exception if examined file is binary.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.diff /etc/apache2/httpd.conf /etc/sudoers</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.download"> salt.modules.zypperpkg.download(*packages, **kwargs)</h3> <dd>
<p>Download packages to the local disk.</p> <dl class="simple"> <dt>refresh</dt>
<dd>
<p>force a refresh if set to True. If set to False (default) it depends on zypper if a refresh is executed.</p> </dd> <dt>root</dt>
<dd>
<p>operate on a different root directory.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.download httpd
salt '*' pkg.download httpd postfix</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.file_dict"> salt.modules.zypperpkg.file_dict(*packages, **kwargs)</h3> <dd>
<p>List the files that belong to a package, grouped by package. Not specifying any packages will return a list of <em>every</em> file on the system's rpm database (not generally recommended).</p> <p>The root parameter can also be passed via the keyword argument.</p> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.file_list httpd
salt '*' pkg.file_list httpd postfix
salt '*' pkg.file_list</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.file_list"> salt.modules.zypperpkg.file_list(*packages, **kwargs)</h3> <dd>
<p>List the files that belong to a package. Not specifying any packages will return a list of <em>every</em> file on the system's rpm database (not generally recommended).</p> <p>The root parameter can also be passed via the keyword argument.</p> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.file_list httpd
salt '*' pkg.file_list httpd postfix
salt '*' pkg.file_list</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.get_repo"> salt.modules.zypperpkg.get_repo(repo, root=None, **kwargs)</h3> <dd>
<p>Display a repo.</p> <dl class="simple"> <dt>root</dt>
<dd>
<p>operate on a different root directory.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.get_repo alias</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.hold"> salt.modules.zypperpkg.hold(name=None, pkgs=None, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3003.</span></p> </div> <p>Add a package hold. Specify one of <code class="docutils literal notranslate"><span class="pre">name</span></code> and <code class="docutils literal notranslate"><span class="pre">pkgs</span></code>.</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>A package name to hold, or a comma-separated list of package names to hold.</p> </dd> <dt>pkgs</dt>
<dd>
<p>A list of packages to hold. The <code class="docutils literal notranslate"><span class="pre">name</span></code> parameter will be ignored if this option is passed.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.hold &lt;package name&gt;
salt '*' pkg.hold &lt;package1&gt;,&lt;package2&gt;,&lt;package3&gt;
salt '*' pkg.hold pkgs='["foo", "bar"]'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.info_available"> salt.modules.zypperpkg.info_available(*names, **kwargs)</h3> <dd>
<p>Return the information of the named package available for the system.</p> <dl class="simple"> <dt>refresh</dt>
<dd>
<p>force a refresh if set to True (default). If set to False it depends on zypper if a refresh is executed or not.</p> </dd> <dt>root</dt>
<dd>
<p>operate on a different root directory.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.info_available &lt;package1&gt;
salt '*' pkg.info_available &lt;package1&gt; &lt;package2&gt; &lt;package3&gt; ...</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.info_installed"> salt.modules.zypperpkg.info_installed(*names, **kwargs)</h3> <dd>
<p>Return the information of the named package(s), installed on the system.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>names</strong> -- Names of the packages to get information about.</p></li> <li>
<p><strong>attr</strong> -- </p>
<p>Comma-separated package attributes. If no 'attr' is specified, all available attributes returned.</p> <dl class="simple"> <dt>Valid attributes are:</dt>
<dd>
<p>version, vendor, release, build_date, build_date_time_t, install_date, install_date_time_t, build_host, group, source_rpm, arch, epoch, size, license, signature, packager, url, summary, description.</p> </dd> </dl> </li> <li>
<p><strong>errors</strong> -- </p>
<p>Handle RPM field errors. If 'ignore' is chosen, then various mistakes are simply ignored and omitted from the texts or strings. If 'report' is chonen, then a field with a mistake is not returned, instead a 'N/A (broken)' (not available, broken) text is placed.</p> <dl class="simple"> <dt>Valid attributes are:</dt>
<dd>
<p>ignore, report</p> </dd> </dl> </li> <li><p><strong>all_versions</strong> -- Include information for all versions of the packages installed on the minion.</p></li> <li><p><strong>root</strong> -- Operate on a different root directory.</p></li> </ul> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.info_installed &lt;package1&gt;
salt '*' pkg.info_installed &lt;package1&gt; &lt;package2&gt; &lt;package3&gt; ...
salt '*' pkg.info_installed &lt;package1&gt; &lt;package2&gt; &lt;package3&gt; all_versions=True
salt '*' pkg.info_installed &lt;package1&gt; attr=version,vendor all_versions=True
salt '*' pkg.info_installed &lt;package1&gt; &lt;package2&gt; &lt;package3&gt; ... attr=version,vendor
salt '*' pkg.info_installed &lt;package1&gt; &lt;package2&gt; &lt;package3&gt; ... attr=version,vendor errors=ignore
salt '*' pkg.info_installed &lt;package1&gt; &lt;package2&gt; &lt;package3&gt; ... attr=version,vendor errors=report</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.install"> salt.modules.zypperpkg.install(name=None, refresh=False, fromrepo=None, pkgs=None, sources=None, downloadonly=None, skip_verify=False, version=None, ignore_repo_failure=False, no_recommends=False, root=None, **kwargs)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.12,2016.3.3,2016.11.0: </span>On minions running systemd&gt;=205, <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd-run.html">systemd-run(1)</a> is now used to isolate commands which modify installed packages from the <code class="docutils literal notranslate"><span class="pre">salt-minion</span></code> daemon's control group. This is done to keep systemd from killing any zypper commands spawned by Salt when the <code class="docutils literal notranslate"><span class="pre">salt-minion</span></code> service is restarted. (see <code class="docutils literal notranslate"><span class="pre">KillMode</span></code> in the <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd.kill.html">systemd.kill(5)</a> manpage for more information). If desired, usage of <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd-run.html">systemd-run(1)</a> can be suppressed by setting a <a class="reference internal" href="salt.modules.config.html#salt.modules.config.get" title="salt.modules.config.get"><code class="xref py py-mod docutils literal notranslate"><span class="pre">config</span> <span class="pre">option</span></code></a> called <code class="docutils literal notranslate"><span class="pre">systemd.scope</span></code>, with a value of <code class="docutils literal notranslate"><span class="pre">False</span></code> (no quotes).</p> </div> <p>Install the passed package(s), add refresh=True to force a 'zypper refresh' before package is installed.</p> <dl> <dt>name</dt>
<dd>
<p>The name of the package to be installed. Note that this parameter is ignored if either <code class="docutils literal notranslate"><span class="pre">pkgs</span></code> or <code class="docutils literal notranslate"><span class="pre">sources</span></code> is passed. Additionally, please note that this option can only be used to install packages from a software repository. To install a package file manually, use the <code class="docutils literal notranslate"><span class="pre">sources</span></code> option.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.install &lt;package name&gt;</pre> </dd> <dt>refresh</dt>
<dd>
<p>force a refresh if set to True. If set to False (default) it depends on zypper if a refresh is executed.</p> </dd> <dt>fromrepo</dt>
<dd>
<p>Specify a package repository to install from.</p> </dd> <dt>downloadonly</dt>
<dd>
<p>Only download the packages, do not install.</p> </dd> <dt>skip_verify</dt>
<dd>
<p>Skip the GPG verification check (e.g., <code class="docutils literal notranslate"><span class="pre">--no-gpg-checks</span></code>)</p> </dd> <dt>version</dt>
<dd>
<p>Can be either a version number, or the combination of a comparison operator (&lt;, &gt;, &lt;=, &gt;=, =) and a version number (ex. '&gt;1.2.3-4'). This parameter is ignored if <code class="docutils literal notranslate"><span class="pre">pkgs</span></code> or <code class="docutils literal notranslate"><span class="pre">sources</span></code> is passed.</p> </dd> <dt>resolve_capabilities</dt>
<dd>
<p>If this option is set to True zypper will take capabilities into account. In this case names which are just provided by a package will get installed. Default is False.</p> </dd> </dl> <p>Multiple Package Installation Options:</p> <dl> <dt>pkgs</dt>
<dd>
<p>A list of packages to install from a software repository. Must be passed as a python list. A specific version number can be specified by using a single-element dict representing the package and its version. As with the <code class="docutils literal notranslate"><span class="pre">version</span></code> parameter above, comparison operators can be used to target a specific version of a package.</p> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.install pkgs='["foo", "bar"]'
salt '*' pkg.install pkgs='["foo", {"bar": "1.2.3-4"}]'
salt '*' pkg.install pkgs='["foo", {"bar": "&lt;1.2.3-4"}]'</pre> </dd> <dt>sources</dt>
<dd>
<p>A list of RPM packages to install. Must be passed as a list of dicts, with the keys being package names, and the values being the source URI or local path to the package.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.install sources='[{"foo": "salt://foo.rpm"},{"bar": "salt://bar.rpm"}]'</pre> </dd> <dt>ignore_repo_failure</dt>
<dd>
<p>Zypper returns error code 106 if one of the repositories are not available for various reasons. In case to set strict check, this parameter needs to be set to True. Default: False.</p> </dd> <dt>no_recommends</dt>
<dd>
<p>Do not install recommended packages, only required ones.</p> </dd> <dt>root</dt>
<dd>
<p>operate on a different root directory.</p> </dd> <dt>diff_attr:</dt>
<dd>
<p>If a list of package attributes is specified, returned value will contain them, eg.:</p> <pre class="highlight-default notranslate" data-language="default">{'&lt;package&gt;': {
    'old': {
        'version': '&lt;old-version&gt;',
        'arch': '&lt;old-arch&gt;'},

    'new': {
        'version': '&lt;new-version&gt;',
        'arch': '&lt;new-arch&gt;'}}}</pre> <p>Valid attributes are: <code class="docutils literal notranslate"><span class="pre">epoch</span></code>, <code class="docutils literal notranslate"><span class="pre">version</span></code>, <code class="docutils literal notranslate"><span class="pre">release</span></code>, <code class="docutils literal notranslate"><span class="pre">arch</span></code>, <code class="docutils literal notranslate"><span class="pre">install_date</span></code>, <code class="docutils literal notranslate"><span class="pre">install_date_time_t</span></code>.</p> <p>If <code class="docutils literal notranslate"><span class="pre">all</span></code> is specified, all valid attributes will be returned.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.0.</span></p> </div> </dd> </dl> <p>Returns a dict containing the new package names and versions:</p> <pre class="highlight-default notranslate" data-language="default">{'&lt;package&gt;': {'old': '&lt;old-version&gt;',
               'new': '&lt;new-version&gt;'}}</pre> <p>If an attribute list is specified in <code class="docutils literal notranslate"><span class="pre">diff_attr</span></code>, the dict will also contain any specified attribute, eg.:</p> <pre class="highlight-default notranslate" data-language="default">{'&lt;package&gt;': {
    'old': {
        'version': '&lt;old-version&gt;',
        'arch': '&lt;old-arch&gt;'},

    'new': {
        'version': '&lt;new-version&gt;',
        'arch': '&lt;new-arch&gt;'}}}</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.latest_version"> salt.modules.zypperpkg.latest_version(*names, **kwargs)</h3> <dd>
<p>Return the latest version of the named package available for upgrade or installation. If more than one package name is specified, a dict of name/version pairs is returned.</p> <p>If the latest version of a given package is already installed, an empty dict will be returned for that package.</p> <dl class="simple"> <dt>refresh</dt>
<dd>
<p>force a refresh if set to True (default). If set to False it depends on zypper if a refresh is executed or not.</p> </dd> <dt>root</dt>
<dd>
<p>operate on a different root directory.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.latest_version &lt;package name&gt;
salt '*' pkg.latest_version &lt;package1&gt; &lt;package2&gt; &lt;package3&gt; ...</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.list_downloaded"> salt.modules.zypperpkg.list_downloaded(root=None, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> <p>List prefetched packages downloaded by Zypper in the local disk.</p> <dl class="simple"> <dt>root</dt>
<dd>
<p>operate on a different root directory.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.list_downloaded</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.list_installed_patches"> salt.modules.zypperpkg.list_installed_patches(root=None, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> <p>List installed advisory patches on the system.</p> <dl class="simple"> <dt>root</dt>
<dd>
<p>operate on a different root directory.</p> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.list_installed_patches</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.list_installed_patterns"> salt.modules.zypperpkg.list_installed_patterns(root=None)</h3> <dd>
<p>List installed patterns on the system.</p> <dl class="simple"> <dt>root</dt>
<dd>
<p>operate on a different root directory.</p> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.list_installed_patterns</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.list_locks"> salt.modules.zypperpkg.list_locks(root=None)</h3> <dd>
<p>List current package locks.</p> <dl class="simple"> <dt>root</dt>
<dd>
<p>operate on a different root directory.</p> </dd> </dl> <p>Return a dict containing the locked package with attributes:</p> <pre class="highlight-default notranslate" data-language="default">{'&lt;package&gt;': {'case_sensitive': '&lt;case_sensitive&gt;',
               'match_type': '&lt;match_type&gt;'
               'type': '&lt;type&gt;'}}</pre> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.list_locks</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.list_patches"> salt.modules.zypperpkg.list_patches(refresh=False, root=None, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> <p>List all known advisory patches from available repos.</p> <dl class="simple"> <dt>refresh</dt>
<dd>
<p>force a refresh if set to True. If set to False (default) it depends on zypper if a refresh is executed.</p> </dd> <dt>root</dt>
<dd>
<p>operate on a different root directory.</p> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.list_patches</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.list_patterns"> salt.modules.zypperpkg.list_patterns(refresh=False, root=None)</h3> <dd>
<p>List all known patterns from available repos.</p> <dl class="simple"> <dt>refresh</dt>
<dd>
<p>force a refresh if set to True. If set to False (default) it depends on zypper if a refresh is executed.</p> </dd> <dt>root</dt>
<dd>
<p>operate on a different root directory.</p> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.list_patterns</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.list_pkgs"> salt.modules.zypperpkg.list_pkgs(versions_as_list=False, root=None, includes=None, **kwargs)</h3> <dd>
<p>List the packages currently installed as a dict. By default, the dict contains versions as a comma separated string:</p> <pre class="highlight-default notranslate" data-language="default">{'&lt;package_name&gt;': '&lt;version&gt;[,&lt;version&gt;...]'}</pre> <dl> <dt>versions_as_list:</dt>
<dd>
<p>If set to true, the versions are provided as a list</p> <p>{'&lt;package_name&gt;': ['&lt;version&gt;', '&lt;version&gt;']}</p> </dd> <dt>root:</dt>
<dd>
<p>operate on a different root directory.</p> </dd> <dt>includes:</dt>
<dd>
<p>List of types of packages to include (package, patch, pattern, product) By default packages are always included</p> </dd> <dt>attr:</dt>
<dd>
<p>If a list of package attributes is specified, returned value will contain them in addition to version, eg.:</p> <pre class="highlight-default notranslate" data-language="default">{'&lt;package_name&gt;': [{'version' : 'version', 'arch' : 'arch'}]}</pre> <p>Valid attributes are: <code class="docutils literal notranslate"><span class="pre">epoch</span></code>, <code class="docutils literal notranslate"><span class="pre">version</span></code>, <code class="docutils literal notranslate"><span class="pre">release</span></code>, <code class="docutils literal notranslate"><span class="pre">arch</span></code>, <code class="docutils literal notranslate"><span class="pre">install_date</span></code>, <code class="docutils literal notranslate"><span class="pre">install_date_time_t</span></code>.</p> <p>If <code class="docutils literal notranslate"><span class="pre">all</span></code> is specified, all valid attributes will be returned.</p> <blockquote> <div>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.0.</span></p> </div> </div>
</blockquote> </dd> <dt>removed:</dt>
<dd>
<p>not supported</p> </dd> <dt>purge_desired:</dt>
<dd>
<p>not supported</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.list_pkgs
salt '*' pkg.list_pkgs attr=version,arch
salt '*' pkg.list_pkgs attr='["version", "arch"]'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.list_products"> salt.modules.zypperpkg.list_products(all=False, refresh=False, root=None)</h3> <dd>
<p>List all available or installed SUSE products.</p> <dl class="simple"> <dt>all</dt>
<dd>
<p>List all products available or only installed. Default is False.</p> </dd> <dt>refresh</dt>
<dd>
<p>force a refresh if set to True. If set to False (default) it depends on zypper if a refresh is executed.</p> </dd> <dt>root</dt>
<dd>
<p>operate on a different root directory.</p> </dd> </dl> <p>Includes handling for OEM products, which read the OEM productline file and overwrite the release value.</p> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.list_products
salt '*' pkg.list_products all=True</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.list_provides"> salt.modules.zypperpkg.list_provides(root=None, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.0.</span></p> </div> <p>List package provides of installed packages as a dict. {'&lt;provided_name&gt;': ['&lt;package_name&gt;', '&lt;package_name&gt;', ...]}</p> <dl class="simple"> <dt>root</dt>
<dd>
<p>operate on a different root directory.</p> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.list_provides</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.list_repo_pkgs"> salt.modules.zypperpkg.list_repo_pkgs(*args, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.5,2018.3.1.</span></p> </div> <p>Returns all available packages. Optionally, package names (and name globs) can be passed and the results will be filtered to packages matching those names. This is recommended as it speeds up the function considerably.</p> <p>This function can be helpful in discovering the version or repo to specify in a <a class="reference internal" href="../../states/all/salt.states.pkg.html#salt.states.pkg.installed" title="salt.states.pkg.installed"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pkg.installed</span></code></a> state.</p> <p>The return data will be a dictionary mapping package names to a list of version numbers, ordered from newest to oldest. If <code class="docutils literal notranslate"><span class="pre">byrepo</span></code> is set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, then the return dictionary will contain repository names at the top level, and each repository will map packages to lists of version numbers. For example:</p> <pre class="highlight-python notranslate" data-language="python"># With byrepo=False (default)
{
    'bash': ['4.3-83.3.1',
             '4.3-82.6'],
    'vim': ['7.4.326-12.1']
}
{
    'OSS': {
        'bash': ['4.3-82.6'],
        'vim': ['7.4.326-12.1']
    },
    'OSS Update': {
        'bash': ['4.3-83.3.1']
    }
}</pre> <dl class="simple"> <dt>fromrepo<span class="classifier">None</span>
</dt>
<dd>
<p>Only include results from the specified repo(s). Multiple repos can be specified, comma-separated.</p> </dd> <dt>byrepo<span class="classifier">False</span>
</dt>
<dd>
<p>When <code class="docutils literal notranslate"><span class="pre">True</span></code>, the return data for each package will be organized by repository.</p> </dd> <dt>root</dt>
<dd>
<p>operate on a different root directory.</p> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.list_repo_pkgs
salt '*' pkg.list_repo_pkgs foo bar baz
salt '*' pkg.list_repo_pkgs 'python2-*' byrepo=True
salt '*' pkg.list_repo_pkgs 'python2-*' fromrepo='OSS Updates'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.list_repos"> salt.modules.zypperpkg.list_repos(root=None, **kwargs)</h3> <dd>
<p>Lists all repos.</p> <dl class="simple"> <dt>root</dt>
<dd>
<p>operate on a different root directory.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.list_repos</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.list_upgrades"> salt.modules.zypperpkg.list_upgrades(refresh=True, root=None, **kwargs)</h3> <dd>
<p>List all available package upgrades on this system</p> <dl class="simple"> <dt>refresh</dt>
<dd>
<p>force a refresh if set to True (default). If set to False it depends on zypper if a refresh is executed.</p> </dd> <dt>root</dt>
<dd>
<p>operate on a different root directory.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.list_upgrades</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.mod_repo"> salt.modules.zypperpkg.mod_repo(repo, **kwargs)</h3> <dd>
<p>Modify one or more values for a repo. If the repo does not exist, it will be created, so long as the following values are specified:</p> <dl class="simple"> <dt>repo or alias</dt>
<dd>
<p>alias by which Zypper refers to the repo</p> </dd> <dt>url, mirrorlist or baseurl</dt>
<dd>
<p>the URL for Zypper to reference</p> </dd> <dt>enabled</dt>
<dd>
<p>Enable or disable (True or False) repository, but do not remove if disabled.</p> </dd> <dt>refresh</dt>
<dd>
<p>Enable or disable (True or False) auto-refresh of the repository.</p> </dd> <dt>cache</dt>
<dd>
<p>Enable or disable (True or False) RPM files caching.</p> </dd> <dt>gpgcheck</dt>
<dd>
<p>Enable or disable (True or False) GPG check for this repository.</p> </dd> <dt>gpgautoimport<span class="classifier">False</span>
</dt>
<dd>
<p>If set to True, automatically trust and import public GPG key for the repository.</p> </dd> <dt>root</dt>
<dd>
<p>operate on a different root directory.</p> </dd> </dl> <p>Key/Value pairs may also be removed from a repo's configuration by setting a key to a blank value. Bear in mind that a name cannot be deleted, and a URL can only be deleted if a <code class="docutils literal notranslate"><span class="pre">mirrorlist</span></code> is specified (or vice versa).</p> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.mod_repo alias alias=new_alias
salt '*' pkg.mod_repo alias url= mirrorlist=http://host.com/</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.modified"> salt.modules.zypperpkg.modified(*packages, **flags)</h3> <dd>
<p>List the modified files that belong to a package. Not specifying any packages will return a list of _all_ modified files on the system's RPM database.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.5.0.</span></p> </div> <p>Filtering by flags (True or False):</p> <dl class="simple"> <dt>size</dt>
<dd>
<p>Include only files where size changed.</p> </dd> <dt>mode</dt>
<dd>
<p>Include only files which file's mode has been changed.</p> </dd> <dt>checksum</dt>
<dd>
<p>Include only files which MD5 checksum has been changed.</p> </dd> <dt>device</dt>
<dd>
<p>Include only files which major and minor numbers has been changed.</p> </dd> <dt>symlink</dt>
<dd>
<p>Include only files which are symbolic link contents.</p> </dd> <dt>owner</dt>
<dd>
<p>Include only files where owner has been changed.</p> </dd> <dt>group</dt>
<dd>
<p>Include only files where group has been changed.</p> </dd> <dt>time</dt>
<dd>
<p>Include only files where modification time of the file has been changed.</p> </dd> <dt>capabilities</dt>
<dd>
<p>Include only files where capabilities differ or not. Note: supported only on newer RPM versions.</p> </dd> <dt>root</dt>
<dd>
<p>operate on a different root directory.</p> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.modified
salt '*' pkg.modified httpd
salt '*' pkg.modified httpd postfix
salt '*' pkg.modified httpd owner=True group=False</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.normalize_name"> salt.modules.zypperpkg.normalize_name(name)</h3> <dd>
<p>Strips the architecture from the specified package name, if necessary. Circumstances where this would be done include:</p> <ul class="simple"> <li><p>If the arch is 32 bit and the package name ends in a 32-bit arch.</p></li> <li><p>If the arch matches the OS arch, or is <code class="docutils literal notranslate"><span class="pre">noarch</span></code>.</p></li> </ul> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.normalize_name zsh.x86_64</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.owner"> salt.modules.zypperpkg.owner(*paths, **kwargs)</h3> <dd>
<p>Return the name of the package that owns the file. Multiple file paths can be passed. If a single path is passed, a string will be returned, and if multiple paths are passed, a dictionary of file/package name pairs will be returned.</p> <p>If the file is not owned by a package, or is not present on the minion, then an empty string will be returned for that path.</p> <p>The root parameter can also be passed via the keyword argument.</p> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.owner /usr/bin/apachectl
salt '*' pkg.owner /usr/bin/apachectl /etc/httpd/conf/httpd.conf</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.parse_arch"> salt.modules.zypperpkg.parse_arch(name)</h3> <dd>
<p>Parse name and architecture from the specified package name.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.parse_arch zsh.x86_64</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.purge"> salt.modules.zypperpkg.purge(name=None, pkgs=None, root=None, **kwargs)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.12,2016.3.3,2016.11.0: </span>On minions running systemd&gt;=205, <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd-run.html">systemd-run(1)</a> is now used to isolate commands which modify installed packages from the <code class="docutils literal notranslate"><span class="pre">salt-minion</span></code> daemon's control group. This is done to keep systemd from killing any zypper commands spawned by Salt when the <code class="docutils literal notranslate"><span class="pre">salt-minion</span></code> service is restarted. (see <code class="docutils literal notranslate"><span class="pre">KillMode</span></code> in the <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd.kill.html">systemd.kill(5)</a> manpage for more information). If desired, usage of <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd-run.html">systemd-run(1)</a> can be suppressed by setting a <a class="reference internal" href="salt.modules.config.html#salt.modules.config.get" title="salt.modules.config.get"><code class="xref py py-mod docutils literal notranslate"><span class="pre">config</span> <span class="pre">option</span></code></a> called <code class="docutils literal notranslate"><span class="pre">systemd.scope</span></code>, with a value of <code class="docutils literal notranslate"><span class="pre">False</span></code> (no quotes).</p> </div> <p>Recursively remove a package and all dependencies which were installed with it, this will call a <code class="docutils literal notranslate"><span class="pre">zypper</span> <span class="pre">-n</span> <span class="pre">remove</span> <span class="pre">-u</span></code></p> <dl class="simple"> <dt>name</dt>
<dd>
<p>The name of the package to be deleted.</p> </dd> </dl> <p>Multiple Package Options:</p> <dl class="simple"> <dt>pkgs</dt>
<dd>
<p>A list of packages to delete. Must be passed as a python list. The <code class="docutils literal notranslate"><span class="pre">name</span></code> parameter will be ignored if this option is passed.</p> </dd> <dt>root</dt>
<dd>
<p>Operate on a different root directory.</p> </dd> </dl> <div class="versionadded"> <p><span class="versionmodified added">New in version 0.16.0.</span></p> </div> <p>Returns a dict containing the changes.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.purge &lt;package name&gt;
salt '*' pkg.purge &lt;package1&gt;,&lt;package2&gt;,&lt;package3&gt;
salt '*' pkg.purge pkgs='["foo", "bar"]'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.refresh_db"> salt.modules.zypperpkg.refresh_db(force=None, root=None)</h3> <dd>
<p>Trigger a repository refresh by calling <code class="docutils literal notranslate"><span class="pre">zypper</span> <span class="pre">refresh</span></code>. Refresh will run with <code class="docutils literal notranslate"><span class="pre">--force</span></code> if the "force=True" flag is passed on the CLI or <code class="docutils literal notranslate"><span class="pre">refreshdb_force</span></code> is set to <code class="docutils literal notranslate"><span class="pre">true</span></code> in the pillar. The CLI option overrides the pillar setting.</p> <p>It will return a dict:</p> <pre class="highlight-default notranslate" data-language="default">{'&lt;database name&gt;': Bool}</pre> <dl class="simple"> <dt>root</dt>
<dd>
<p>operate on a different root directory.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.refresh_db [force=true|false]</pre> <p>Pillar Example:</p> <pre class="highlight-yaml notranslate" data-language="yaml">zypper:
  refreshdb_force: false</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.remove"> salt.modules.zypperpkg.remove(name=None, pkgs=None, root=None, **kwargs)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.12,2016.3.3,2016.11.0: </span>On minions running systemd&gt;=205, <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd-run.html">systemd-run(1)</a> is now used to isolate commands which modify installed packages from the <code class="docutils literal notranslate"><span class="pre">salt-minion</span></code> daemon's control group. This is done to keep systemd from killing any zypper commands spawned by Salt when the <code class="docutils literal notranslate"><span class="pre">salt-minion</span></code> service is restarted. (see <code class="docutils literal notranslate"><span class="pre">KillMode</span></code> in the <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd.kill.html">systemd.kill(5)</a> manpage for more information). If desired, usage of <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd-run.html">systemd-run(1)</a> can be suppressed by setting a <a class="reference internal" href="salt.modules.config.html#salt.modules.config.get" title="salt.modules.config.get"><code class="xref py py-mod docutils literal notranslate"><span class="pre">config</span> <span class="pre">option</span></code></a> called <code class="docutils literal notranslate"><span class="pre">systemd.scope</span></code>, with a value of <code class="docutils literal notranslate"><span class="pre">False</span></code> (no quotes).</p> </div> <p>Remove packages with <code class="docutils literal notranslate"><span class="pre">zypper</span> <span class="pre">-n</span> <span class="pre">remove</span></code></p> <dl class="simple"> <dt>name</dt>
<dd>
<p>The name of the package to be deleted.</p> </dd> </dl> <p>Multiple Package Options:</p> <dl class="simple"> <dt>pkgs</dt>
<dd>
<p>A list of packages to delete. Must be passed as a python list. The <code class="docutils literal notranslate"><span class="pre">name</span></code> parameter will be ignored if this option is passed.</p> </dd> <dt>root</dt>
<dd>
<p>Operate on a different root directory.</p> </dd> </dl> <div class="versionadded"> <p><span class="versionmodified added">New in version 0.16.0.</span></p> </div> <p>Returns a dict containing the changes.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.remove &lt;package name&gt;
salt '*' pkg.remove &lt;package1&gt;,&lt;package2&gt;,&lt;package3&gt;
salt '*' pkg.remove pkgs='["foo", "bar"]'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.remove_lock"> salt.modules.zypperpkg.remove_lock(name, root=None, **kwargs)</h3> <dd>
<div class="deprecated"> <p><span class="versionmodified deprecated">Deprecated since version 3003: </span>This function is deprecated. Please use <code class="docutils literal notranslate"><span class="pre">unhold()</span></code> instead.</p> </div> <p>Remove specified package lock.</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>A package name, or a comma-separated list of package names.</p> </dd> <dt>root</dt>
<dd>
<p>operate on a different root directory.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.remove_lock &lt;package name&gt;
salt '*' pkg.remove_lock &lt;package1&gt;,&lt;package2&gt;,&lt;package3&gt;</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.resolve_capabilities"> salt.modules.zypperpkg.resolve_capabilities(pkgs, refresh=False, root=None, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.0.</span></p> </div> <p>Convert name provides in <code class="docutils literal notranslate"><span class="pre">pkgs</span></code> into real package names if <code class="docutils literal notranslate"><span class="pre">resolve_capabilities</span></code> parameter is set to True. In case of <code class="docutils literal notranslate"><span class="pre">resolve_capabilities</span></code> is set to False the package list is returned unchanged.</p> <dl class="simple"> <dt>refresh</dt>
<dd>
<p>force a refresh if set to True. If set to False (default) it depends on zypper if a refresh is executed.</p> </dd> <dt>root</dt>
<dd>
<p>operate on a different root directory.</p> </dd> <dt>resolve_capabilities</dt>
<dd>
<p>If this option is set to True the input will be checked if a package with this name exists. If not, this function will search for a package which provides this name. If one is found the output is exchanged with the real package name. In case this option is set to False (Default) the input will be returned unchanged.</p> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.resolve_capabilities resolve_capabilities=True w3m_ssl</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.search"> salt.modules.zypperpkg.search(criteria, refresh=False, **kwargs)</h3> <dd>
<p>List known packages, available to the system.</p> <dl class="simple"> <dt>refresh</dt>
<dd>
<p>force a refresh if set to True. If set to False (default) it depends on zypper if a refresh is executed.</p> </dd> <dt>match (str)</dt>
<dd>
<p>One of <cite>exact</cite>, <cite>words</cite>, <cite>substrings</cite>. Search for an <cite>exact</cite> match or for the whole <cite>words</cite> only. Default to <cite>substrings</cite> to patch partial words.</p> </dd> <dt>provides (bool)</dt>
<dd>
<p>Search for packages which provide the search strings.</p> </dd> <dt>recommends (bool)</dt>
<dd>
<p>Search for packages which recommend the search strings.</p> </dd> <dt>requires (bool)</dt>
<dd>
<p>Search for packages which require the search strings.</p> </dd> <dt>suggests (bool)</dt>
<dd>
<p>Search for packages which suggest the search strings.</p> </dd> <dt>conflicts (bool)</dt>
<dd>
<p>Search packages conflicting with search strings.</p> </dd> <dt>obsoletes (bool)</dt>
<dd>
<p>Search for packages which obsolete the search strings.</p> </dd> <dt>file_list (bool)</dt>
<dd>
<p>Search for a match in the file list of packages.</p> </dd> <dt>search_descriptions (bool)</dt>
<dd>
<p>Search also in package summaries and descriptions.</p> </dd> <dt>case_sensitive (bool)</dt>
<dd>
<p>Perform case-sensitive search.</p> </dd> <dt>installed_only (bool)</dt>
<dd>
<p>Show only installed packages.</p> </dd> <dt>not_installed_only (bool)</dt>
<dd>
<p>Show only packages which are not installed.</p> </dd> <dt>details (bool)</dt>
<dd>
<p>Show version and repository</p> </dd> <dt>root</dt>
<dd>
<p>operate on a different root directory.</p> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.search &lt;criteria&gt;</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.services_need_restart"> salt.modules.zypperpkg.services_need_restart(root=None, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3003.</span></p> </div> <p>List services that use files which have been changed by the package manager. It might be needed to restart them.</p> <dl class="simple"> <dt>root</dt>
<dd>
<p>operate on a different root directory.</p> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.services_need_restart</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.unhold"> salt.modules.zypperpkg.unhold(name=None, pkgs=None, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3003.</span></p> </div> <p>Remove a package hold.</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>A package name to unhold, or a comma-separated list of package names to unhold.</p> </dd> <dt>pkgs</dt>
<dd>
<p>A list of packages to unhold. The <code class="docutils literal notranslate"><span class="pre">name</span></code> parameter will be ignored if this option is passed.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.unhold &lt;package name&gt;
salt '*' pkg.unhold &lt;package1&gt;,&lt;package2&gt;,&lt;package3&gt;
salt '*' pkg.unhold pkgs='["foo", "bar"]'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.upgrade"> salt.modules.zypperpkg.upgrade(refresh=True, dryrun=False, dist_upgrade=False, fromrepo=None, novendorchange=False, skip_verify=False, no_recommends=False, root=None, **kwargs)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.12,2016.3.3,2016.11.0: </span>On minions running systemd&gt;=205, <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd-run.html">systemd-run(1)</a> is now used to isolate commands which modify installed packages from the <code class="docutils literal notranslate"><span class="pre">salt-minion</span></code> daemon's control group. This is done to keep systemd from killing any zypper commands spawned by Salt when the <code class="docutils literal notranslate"><span class="pre">salt-minion</span></code> service is restarted. (see <code class="docutils literal notranslate"><span class="pre">KillMode</span></code> in the <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd.kill.html">systemd.kill(5)</a> manpage for more information). If desired, usage of <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd-run.html">systemd-run(1)</a> can be suppressed by setting a <a class="reference internal" href="salt.modules.config.html#salt.modules.config.get" title="salt.modules.config.get"><code class="xref py py-mod docutils literal notranslate"><span class="pre">config</span> <span class="pre">option</span></code></a> called <code class="docutils literal notranslate"><span class="pre">systemd.scope</span></code>, with a value of <code class="docutils literal notranslate"><span class="pre">False</span></code> (no quotes).</p> </div> <p>Run a full system upgrade, a zypper upgrade</p> <dl class="simple"> <dt>refresh</dt>
<dd>
<p>force a refresh if set to True (default). If set to False it depends on zypper if a refresh is executed.</p> </dd> <dt>dryrun</dt>
<dd>
<p>If set to True, it creates a debug solver log file and then perform a dry-run upgrade (no changes are made). Default: False</p> </dd> <dt>dist_upgrade</dt>
<dd>
<p>Perform a system dist-upgrade. Default: False</p> </dd> <dt>fromrepo</dt>
<dd>
<p>Specify a list of package repositories to upgrade from. Default: None</p> </dd> <dt>novendorchange</dt>
<dd>
<p>If set to True, no allow vendor changes. Default: False</p> </dd> <dt>skip_verify</dt>
<dd>
<p>Skip the GPG verification check (e.g., <code class="docutils literal notranslate"><span class="pre">--no-gpg-checks</span></code>)</p> </dd> <dt>no_recommends</dt>
<dd>
<p>Do not install recommended packages, only required ones.</p> </dd> <dt>root</dt>
<dd>
<p>Operate on a different root directory.</p> </dd> </dl> <p>Returns a dictionary containing the changes:</p> <pre class="highlight-python notranslate" data-language="python">{'&lt;package&gt;':  {'old': '&lt;old-version&gt;',
                'new': '&lt;new-version&gt;'}}</pre> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.upgrade
salt '*' pkg.upgrade dist_upgrade=True fromrepo='["MyRepoName"]' novendorchange=True
salt '*' pkg.upgrade dist_upgrade=True dryrun=True</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.upgrade_available"> salt.modules.zypperpkg.upgrade_available(name, **kwargs)</h3> <dd>
<p>Check whether or not an upgrade is available for a given package</p> <dl class="simple"> <dt>refresh</dt>
<dd>
<p>force a refresh if set to True (default). If set to False it depends on zypper if a refresh is executed or not.</p> </dd> <dt>root</dt>
<dd>
<p>operate on a different root directory.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.upgrade_available &lt;package name&gt;</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.verify"> salt.modules.zypperpkg.verify(*names, **kwargs)</h3> <dd>
<p>Runs an rpm -Va on a system, and returns the results in a dict</p> <p>Files with an attribute of config, doc, ghost, license or readme in the package header can be ignored using the <code class="docutils literal notranslate"><span class="pre">ignore_types</span></code> keyword argument.</p> <p>The root parameter can also be passed via the keyword argument.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.verify
salt '*' pkg.verify httpd
salt '*' pkg.verify 'httpd postfix'
salt '*' pkg.verify 'httpd postfix' ignore_types=['config','doc']</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.version"> salt.modules.zypperpkg.version(*names, **kwargs)</h3> <dd>
<p>Returns a string representing the package version or an empty dict if not installed. If more than one package name is specified, a dict of name/version pairs is returned.</p> <dl class="simple"> <dt>root</dt>
<dd>
<p>operate on a different root directory.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.version &lt;package name&gt;
salt '*' pkg.version &lt;package1&gt; &lt;package2&gt; &lt;package3&gt; ...</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.zypperpkg.version_cmp"> salt.modules.zypperpkg.version_cmp(ver1, ver2, ignore_epoch=False, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.5.4.</span></p> </div> <p>Do a cmp-style comparison on two packages. Return -1 if ver1 &lt; ver2, 0 if ver1 == ver2, and 1 if ver1 &gt; ver2. Return None if there was a problem making the comparison.</p> <dl> <dt>ignore_epoch<span class="classifier">False</span>
</dt>
<dd>
<p>Set to <code class="docutils literal notranslate"><span class="pre">True</span></code> to ignore the epoch when comparing versions</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.10,2016.3.2.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' pkg.version_cmp '0.2-001' '0.2.0.1-002'</pre> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.zypperpkg.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.zypperpkg.html</a>
  </p>
</div>
