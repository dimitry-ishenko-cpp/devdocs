<h1>salt.modules.rsync</h1> <p>Wrapper for rsync</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2014.1.0.</span></p> </div> <p>This data can also be passed into <a class="reference internal" href="https://docs.saltproject.io/en/latest/topics/tutorials/pillar.html#pillar-walk-through"><span class="std std-ref">pillar</span></a>. Options passed into opts will overwrite options passed into pillar.</p> <dl class="py function"> <h3 id="salt.modules.rsync.config"> salt.modules.rsync.config(conf_path='/etc/rsyncd.conf')</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2016.3.0: </span>Return data now contains just the contents of the rsyncd.conf as a string, instead of a dictionary as returned from <a class="reference internal" href="salt.modules.cmdmod.html#salt.modules.cmdmod.run_all" title="salt.modules.cmdmod.run_all"><code class="xref py py-func docutils literal notranslate"><span class="pre">cmd.run_all</span></code></a>.</p> </div> <p>Returns the contents of the rsync config file</p> <dl class="simple"> <dt>conf_path<span class="classifier">/etc/rsyncd.conf</span>
</dt>
<dd>
<p>Path to the config file</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' rsync.config</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.rsync.rsync"> salt.modules.rsync.rsync(src, dst, delete=False, force=False, update=False, passwordfile=None, exclude=None, excludefrom=None, dryrun=False, rsh=None, additional_opts=None, saltenv='base')</h3> <dd>
<blockquote> <div>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2016.3.0: </span>Return data now contains just the output of the rsync command, instead of a dictionary as returned from <a class="reference internal" href="salt.modules.cmdmod.html#salt.modules.cmdmod.run_all" title="salt.modules.cmdmod.run_all"><code class="xref py py-func docutils literal notranslate"><span class="pre">cmd.run_all</span></code></a>.</p> </div> <p>Rsync files from src to dst</p> <dl class="simple"> <dt>src</dt>
<dd>
<p>The source location where files will be rsynced from.</p> </dd> <dt>dst</dt>
<dd>
<p>The destination location where files will be rsynced to.</p> </dd> <dt>delete<span class="classifier">False</span>
</dt>
<dd>
<p>Whether to enable the rsync <cite>--delete</cite> flag, which will delete extraneous files from dest dirs</p> </dd> <dt>force<span class="classifier">False</span>
</dt>
<dd>
<p>Whether to enable the rsync <cite>--force</cite> flag, which will force deletion of dirs even if not empty.</p> </dd> <dt>update<span class="classifier">False</span>
</dt>
<dd>
<p>Whether to enable the rsync <cite>--update</cite> flag, which forces rsync to skip any files which exist on the destination and have a modified time that is newer than the source file.</p> </dd> <dt>passwordfile</dt>
<dd>
<p>A file that contains a password for accessing an rsync daemon. The file should contain just the password.</p> </dd> <dt>exclude</dt>
<dd>
<p>Whether to enable the rsync <cite>--exclude</cite> flag, which will exclude files matching a PATTERN.</p> </dd> <dt>excludefrom</dt>
<dd>
<p>Whether to enable the rsync <cite>--excludefrom</cite> flag, which will read exclude patterns from a file.</p> </dd> <dt>dryrun<span class="classifier">False</span>
</dt>
<dd>
<p>Whether to enable the rsync <cite>--dry-run</cite> flag, which will perform a trial run with no changes made.</p> </dd> <dt>rsh</dt>
<dd>
<p>Whether to enable the rsync <cite>--rsh</cite> flag, to specify the remote shell to use.</p> </dd> <dt>additional_opts</dt>
<dd>
<p>Any additional rsync options, should be specified as a list.</p> </dd> </dl> </div>
</blockquote> <dl> <dt>saltenv</dt>
<dd>
<blockquote> <div>
<p>Specify a salt fileserver environment to be used.</p> </div>
</blockquote> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' rsync.rsync /path/to/src /path/to/dest delete=True update=True passwordfile=/etc/pass.crt exclude=exclude/dir
salt '*' rsync.rsync /path/to/src delete=True excludefrom=/xx.ini
salt '*' rsync.rsync /path/to/src delete=True exclude='[exclude1/dir,exclude2/dir]' additional_opts='["--partial", "--bwlimit=5000"]'</pre> </dd> </dl> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.rsync.version"> salt.modules.rsync.version()</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2016.3.0: </span>Return data now contains just the version number as a string, instead of a dictionary as returned from <a class="reference internal" href="salt.modules.cmdmod.html#salt.modules.cmdmod.run_all" title="salt.modules.cmdmod.run_all"><code class="xref py py-func docutils literal notranslate"><span class="pre">cmd.run_all</span></code></a>.</p> </div> <p>Returns rsync version</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' rsync.version</pre> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.rsync.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.rsync.html</a>
  </p>
</div>
