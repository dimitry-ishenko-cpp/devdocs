<h1>salt.modules.mac_service</h1> <p>The service module for macOS</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.0.</span></p> </div> <p>This module has support for services in the following locations.</p> <pre class="highlight-bash notranslate" data-language="bash">/System/Library/LaunchDaemons/
/System/Library/LaunchAgents/
/Library/LaunchDaemons/
/Library/LaunchAgents/

# As of version "2019.2.0" support for user-specific services were added.
/Users/foo/Library/LaunchAgents/</pre> <div class="admonition note"> <p class="admonition-title">Note</p> <p>As of the 2019.2.0 release, if a service is located in a <code class="docutils literal notranslate"><span class="pre">LaunchAgent</span></code> path and a <code class="docutils literal notranslate"><span class="pre">runas</span></code> user is NOT specified, the current console user will be used to properly interact with the service.</p> </div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>As of the 3002 release, if a service name of <code class="docutils literal notranslate"><span class="pre">salt-minion</span></code> is passed this module will convert it over to it's macOS equivalent name, in this case to <code class="docutils literal notranslate"><span class="pre">com.saltstack.salt.minion</span></code>. This is true for <code class="docutils literal notranslate"><span class="pre">salt-master</span></code> <code class="docutils literal notranslate"><span class="pre">salt-api</span></code>, and <code class="docutils literal notranslate"><span class="pre">salt-syndic</span></code> as well.</p> </div> <dl class="py function"> <h3 id="salt.modules.mac_service.available"> salt.modules.mac_service.available(name)</h3> <dd>
<p>Check that the given service is available.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The name of the service</p> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>True if the service is available, otherwise False</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.available com.openssh.sshd</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.mac_service.disable"> salt.modules.mac_service.disable(name, runas=None)</h3> <dd>
<p>Disable a launchd service. Raises an error if the service fails to be disabled</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- Service label, file name, or full path</p></li> <li><p><strong>runas</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- User to run launchctl commands</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p><code class="docutils literal notranslate"><span class="pre">True</span></code> if successful or if the service is already disabled</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.disable org.cups.cupsd</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.mac_service.disabled"> salt.modules.mac_service.disabled(name, runas=None, domain='system')</h3> <dd>
<p>Check if the specified service is not enabled. This is the opposite of <code class="docutils literal notranslate"><span class="pre">service.enabled</span></code></p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The name to look up</p></li> <li><p><strong>runas</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- User to run launchctl commands</p></li> <li><p><strong>domain</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- domain to check for disabled services. Default is system.</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>True if the specified service is NOT enabled, otherwise False</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.disabled org.cups.cupsd</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.mac_service.enable"> salt.modules.mac_service.enable(name, runas=None)</h3> <dd>
<p>Enable a launchd service. Raises an error if the service fails to be enabled</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- Service label, file name, or full path</p></li> <li><p><strong>runas</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- User to run launchctl commands</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p><code class="docutils literal notranslate"><span class="pre">True</span></code> if successful or if the service is already enabled</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.enable org.cups.cupsd</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.mac_service.enabled"> salt.modules.mac_service.enabled(name, runas=None)</h3> <dd>
<p>Check if the specified service is enabled (not disabled, capable of being loaded/bootstrapped).</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>Previously this function would see if the service is loaded via <code class="docutils literal notranslate"><span class="pre">launchctl</span> <span class="pre">list</span></code> to determine if the service is enabled. This was not an accurate way to do so. The new behavior checks to make sure its not disabled to determine the status. Please use <code class="docutils literal notranslate"><span class="pre">service.loaded</span></code> for the previous behavior.</p> </div> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The name of the service to look up.</p></li> <li><p><strong>runas</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- User to run launchctl commands.</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>True if the specified service enabled, otherwise False</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.enabled org.cups.cupsd</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.mac_service.get_all"> salt.modules.mac_service.get_all(runas=None)</h3> <dd>
<p>Return a list of services that are enabled or available. Can be used to find the name of a service.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<p><strong>runas</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- User to run launchctl commands</p> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>A list of all the services available or enabled</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)">list</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.get_all</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.mac_service.get_enabled"> salt.modules.mac_service.get_enabled(runas=None)</h3> <dd>
<p>Return a list of all services that are enabled. Can be used to find the name of a service.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<p><strong>runas</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- User to run launchctl commands</p> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>A list of all the services enabled on the system</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)">list</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.get_enabled</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.mac_service.launchctl"> salt.modules.mac_service.launchctl(sub_cmd, *args, **kwargs)</h3> <dd>
<p>Run a launchctl command and raise an error if it fails</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>sub_cmd</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- Sub command supplied to launchctl</p></li> <li><p><strong>args</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><em>tuple</em></a>) -- Tuple containing additional arguments to pass to launchctl</p></li> <li><p><strong>kwargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)"><em>dict</em></a>) -- Dictionary containing arguments to pass to <code class="docutils literal notranslate"><span class="pre">cmd.run_all</span></code></p></li> <li><p><strong>return_stdout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) -- A keyword argument. If true return the stdout of the launchctl command</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p><code class="docutils literal notranslate"><span class="pre">True</span></code> if successful, raise <code class="docutils literal notranslate"><span class="pre">CommandExecutionError</span></code> if not, or the stdout of the launchctl command if requested</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.launchctl debug org.cups.cupsd</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.mac_service.list_"> salt.modules.mac_service.list_(name=None, runas=None)</h3> <dd>
<p>Run launchctl list and return the output</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The name of the service to list</p></li> <li><p><strong>runas</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- User to run launchctl commands</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>If a name is passed returns information about the named service, otherwise returns a list of all services and pids</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.list
salt '*' service.list org.cups.cupsd</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.mac_service.loaded"> salt.modules.mac_service.loaded(name, runas=None)</h3> <dd>
<p>Check if the specified service is loaded.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The name of the service to look up</p></li> <li><p><strong>runas</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- User to run launchctl commands</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p><code class="docutils literal notranslate"><span class="pre">True</span></code> if the specified service is loaded, otherwise <code class="docutils literal notranslate"><span class="pre">False</span></code></p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.loaded org.cups.cupsd</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.mac_service.missing"> salt.modules.mac_service.missing(name)</h3> <dd>
<p>The inverse of service.available Check that the given service is not available.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The name of the service</p> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>True if the service is not available, otherwise False</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.missing com.openssh.sshd</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.mac_service.restart"> salt.modules.mac_service.restart(name, runas=None)</h3> <dd>
<p>Unloads and reloads a launchd service. Raises an error if the service fails to reload</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- Service label, file name, or full path</p></li> <li><p><strong>runas</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- User to run launchctl commands</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p><code class="docutils literal notranslate"><span class="pre">True</span></code> if successful</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.restart org.cups.cupsd</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.mac_service.show"> salt.modules.mac_service.show(name)</h3> <dd>
<p>Show properties of a launchctl service</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- Service label, file name, or full path</p> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>The service information if the service is found</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)">dict</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.show org.cups.cupsd  # service label
salt '*' service.show org.cups.cupsd.plist  # file name
salt '*' service.show /System/Library/LaunchDaemons/org.cups.cupsd.plist  # full path</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.mac_service.start"> salt.modules.mac_service.start(name, runas=None)</h3> <dd>
<p>Start a launchd service. Raises an error if the service fails to start</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>To start a service in macOS the service must be enabled first. Use <code class="docutils literal notranslate"><span class="pre">service.enable</span></code> to enable the service.</p> </div> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- Service label, file name, or full path</p></li> <li><p><strong>runas</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- User to run launchctl commands</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p><code class="docutils literal notranslate"><span class="pre">True</span></code> if successful or if the service is already running</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.start org.cups.cupsd</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.mac_service.status"> salt.modules.mac_service.status(name, sig=None, runas=None)</h3> <dd>
<p>Return the status for a service.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>Previously this function would return a PID for a running service with a PID or 'loaded' for a loaded service without a PID. This was changed to have better parity with other service modules that return True/False.</p> </div> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- Used to find the service from launchctl. Can be the service Label, file name, or path to the service file. (normally a plist)</p></li> <li><p><strong>sig</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- Find the service with status.pid instead. Note that <code class="docutils literal notranslate"><span class="pre">name</span></code> must still be provided.</p></li> <li><p><strong>runas</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- User to run launchctl commands.</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>True if running, otherwise False.</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.status cups</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.mac_service.stop"> salt.modules.mac_service.stop(name, runas=None)</h3> <dd>
<p>Stop a launchd service. Raises an error if the service fails to stop</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>Though <code class="docutils literal notranslate"><span class="pre">service.stop</span></code> will unload a service in macOS, the service will start on next boot unless it is disabled. Use <code class="docutils literal notranslate"><span class="pre">service.disable</span></code> to disable the service</p> </div> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- Service label, file name, or full path</p></li> <li><p><strong>runas</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- User to run launchctl commands</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p><code class="docutils literal notranslate"><span class="pre">True</span></code> if successful or if the service is already stopped</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.stop org.cups.cupsd</pre> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.mac_service.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.mac_service.html</a>
  </p>
</div>
