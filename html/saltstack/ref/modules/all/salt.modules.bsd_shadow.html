<h1>salt.modules.bsd_shadow</h1> <p>Manage the password database on BSD systems</p> <div class="admonition important"> <p class="admonition-title">Important</p> <p>If you feel that Salt should be using this module to manage passwords on a minion, and it is using a different module (or gives an error similar to <em>'shadow.info' is not available</em>), see <a class="reference internal" href="https://docs.saltproject.io/en/latest/ref/modules/index.html#module-provider-override"><span class="std std-ref">here</span></a>.</p> </div> <dl class="py function"> <h3 id="salt.modules.bsd_shadow.default_hash"> salt.modules.bsd_shadow.default_hash()</h3> <dd>
<p>Returns the default hash used for unset passwords</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' shadow.default_hash</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.bsd_shadow.del_password"> salt.modules.bsd_shadow.del_password(name)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.2.</span></p> </div> <p>Delete the password from name user</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' shadow.del_password username</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.bsd_shadow.gen_password"> salt.modules.bsd_shadow.gen_password(password, crypt_salt=None, algorithm='sha512')</h3> <dd>
<p>Generate hashed password</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>When called this function is called directly via remote-execution, the password argument may be displayed in the system's process list. This may be a security risk on certain systems.</p> </div> <dl class="simple"> <dt>password</dt>
<dd>
<p>Plaintext password to be hashed.</p> </dd> <dt>crypt_salt</dt>
<dd>
<p>Crpytographic salt. If not given, a random 8-character salt will be generated.</p> </dd> <dt>algorithm</dt>
<dd>
<p>The following hash algorithms are supported:</p> <ul class="simple"> <li><p>md5</p></li> <li><p>blowfish (not in mainline glibc, only available in distros that add it)</p></li> <li><p>sha256</p></li> <li><p>sha512 (default)</p></li> </ul> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' shadow.gen_password 'I_am_password'
salt '*' shadow.gen_password 'I_am_password' crypt_salt='I_am_salt' algorithm=sha256</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.bsd_shadow.info"> salt.modules.bsd_shadow.info(name)</h3> <dd>
<p>Return information for the specified user</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' shadow.info someuser</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.bsd_shadow.set_change"> salt.modules.bsd_shadow.set_change(name, change)</h3> <dd>
<p>Sets the time at which the password expires (in seconds since the UNIX epoch). See <code class="docutils literal notranslate"><span class="pre">man</span> <span class="pre">8</span> <span class="pre">usermod</span></code> on NetBSD and OpenBSD or <code class="docutils literal notranslate"><span class="pre">man</span> <span class="pre">8</span> <span class="pre">pw</span></code> on FreeBSD.</p> <p>A value of <code class="docutils literal notranslate"><span class="pre">0</span></code> sets the password to never expire.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' shadow.set_change username 1419980400</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.bsd_shadow.set_expire"> salt.modules.bsd_shadow.set_expire(name, expire)</h3> <dd>
<p>Sets the time at which the account expires (in seconds since the UNIX epoch). See <code class="docutils literal notranslate"><span class="pre">man</span> <span class="pre">8</span> <span class="pre">usermod</span></code> on NetBSD and OpenBSD or <code class="docutils literal notranslate"><span class="pre">man</span> <span class="pre">8</span> <span class="pre">pw</span></code> on FreeBSD.</p> <p>A value of <code class="docutils literal notranslate"><span class="pre">0</span></code> sets the account to never expire.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' shadow.set_expire username 1419980400</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.bsd_shadow.set_password"> salt.modules.bsd_shadow.set_password(name, password)</h3> <dd>
<p>Set the password for a named user. The password must be a properly defined hash. The password hash can be generated with this command:</p> <p><code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-c</span> <span class="pre">"import</span> <span class="pre">crypt;</span> <span class="pre">print</span> <span class="pre">crypt.crypt('password',</span> <span class="pre">ciphersalt)"</span></code></p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>When constructing the <code class="docutils literal notranslate"><span class="pre">ciphersalt</span></code> string, you must escape any dollar signs, to avoid them being interpolated by the shell.</p> </div> <p><code class="docutils literal notranslate"><span class="pre">'password'</span></code> is, of course, the password for which you want to generate a hash.</p> <p><code class="docutils literal notranslate"><span class="pre">ciphersalt</span></code> is a combination of a cipher identifier, an optional number of rounds, and the cryptographic salt. The arrangement and format of these fields depends on the cipher and which flavor of BSD you are using. For more information on this, see the manpage for <code class="docutils literal notranslate"><span class="pre">crpyt(3)</span></code>. On NetBSD, additional information is available in <code class="docutils literal notranslate"><span class="pre">passwd.conf(5)</span></code>.</p> <p>It is important to make sure that a supported cipher is used.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' shadow.set_password someuser '$1$UYCIxa628.9qXjpQCjM4a..'</pre> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.bsd_shadow.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.bsd_shadow.html</a>
  </p>
</div>
