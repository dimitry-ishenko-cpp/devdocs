<h1>salt.modules.aptly</h1> <p>Aptly Debian repository manager.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.0.</span></p> </div> <dl class="py function"> <h3 id="salt.modules.aptly.cleanup_db"> salt.modules.aptly.cleanup_db(config_path='/etc/aptly.conf', dry_run=False)</h3> <dd>
<dl class="simple"> <dt>Remove data regarding unreferenced packages and delete files in the package pool that</dt>
<dd>
<p>are no longer being used by packages.</p> </dd> </dl> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<p><strong>dry_run</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) -- Report potential changes without making any changes.</p> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>A dictionary of the package keys and files that were removed.</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)">dict</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' aptly.cleanup_db</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.aptly.delete_repo"> salt.modules.aptly.delete_repo(name, config_path='/etc/aptly.conf', force=False)</h3> <dd>
<p>Remove the repository.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The name of the repository.</p></li> <li><p><strong>config_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The path to the configuration file for the aptly instance.</p></li> <li><p><strong>force</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) -- Whether to remove the repository even if it is used as the source of an existing snapshot.</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>A boolean representing whether all changes succeeded.</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' aptly.delete_repo name="test-repo"</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.aptly.get_config"> salt.modules.aptly.get_config(config_path='/etc/aptly.conf')</h3> <dd>
<p>Get the configuration data.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<p><strong>config_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The path to the configuration file for the aptly instance.</p> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>A dictionary containing the configuration data.</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)">dict</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' aptly.get_config</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.aptly.get_repo"> salt.modules.aptly.get_repo(name, config_path='/etc/aptly.conf', with_packages=False)</h3> <dd>
<p>Get the details of the repository.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The name of the repository.</p></li> <li><p><strong>config_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The path to the configuration file for the aptly instance.</p></li> <li><p><strong>with_packages</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) -- Return a list of packages in the repo.</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>A dictionary containing information about the repository.</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)">dict</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' aptly.get_repo name="test-repo"</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.aptly.list_mirrors"> salt.modules.aptly.list_mirrors(config_path='/etc/aptly.conf')</h3> <dd>
<p>Get a list of all the mirrors.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<p><strong>config_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The path to the configuration file for the aptly instance.</p> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>A list of the mirror names.</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)">list</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' aptly.list_mirrors</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.aptly.list_published"> salt.modules.aptly.list_published(config_path='/etc/aptly.conf')</h3> <dd>
<p>Get a list of all the published repositories.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<p><strong>config_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The path to the configuration file for the aptly instance.</p> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>A list of the published repository names.</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)">list</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' aptly.list_published</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.aptly.list_repos"> salt.modules.aptly.list_repos(config_path='/etc/aptly.conf', with_packages=False)</h3> <dd>
<p>List all of the repos.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>config_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The path to the configuration file for the aptly instance.</p></li> <li><p><strong>with_packages</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) -- Return a list of packages in the repo.</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>A dictionary of the repositories.</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)">dict</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' aptly.list_repos</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.aptly.list_snapshots"> salt.modules.aptly.list_snapshots(config_path='/etc/aptly.conf', sort_by_time=False)</h3> <dd>
<p>Get a list of all the snapshots.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>config_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The path to the configuration file for the aptly instance.</p></li> <li><p><strong>sort_by_time</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) -- Whether to sort by creation time instead of by name.</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>A list of the snapshot names.</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)">list</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' aptly.list_snapshots</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.aptly.new_repo"> salt.modules.aptly.new_repo(name, config_path='/etc/aptly.conf', comment=None, component=None, distribution=None, uploaders_file=None, from_snapshot=None, saltenv='base')</h3> <dd>
<p>Create the new repository.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The name of the repository.</p></li> <li><p><strong>config_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The path to the configuration file for the aptly instance.</p></li> <li><p><strong>comment</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The description of the repository.</p></li> <li><p><strong>component</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The default component to use when publishing.</p></li> <li><p><strong>distribution</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The default distribution to use when publishing.</p></li> <li><p><strong>uploaders_file</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The repository upload restrictions config.</p></li> <li><p><strong>from_snapshot</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The snapshot to initialize the repository contents from.</p></li> <li><p><strong>saltenv</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The environment the file resides in.</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>A boolean representing whether all changes succeeded.</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' aptly.new_repo name="test-repo" comment="Test main repo" component="main" distribution="trusty"</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.aptly.set_repo"> salt.modules.aptly.set_repo(name, config_path='/etc/aptly.conf', comment=None, component=None, distribution=None, uploaders_file=None, saltenv='base')</h3> <dd>
<p>Configure the repository settings.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The name of the repository.</p></li> <li><p><strong>config_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The path to the configuration file for the aptly instance.</p></li> <li><p><strong>comment</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The description of the repository.</p></li> <li><p><strong>component</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The default component to use when publishing.</p></li> <li><p><strong>distribution</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The default distribution to use when publishing.</p></li> <li><p><strong>uploaders_file</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The repository upload restrictions config.</p></li> <li><p><strong>from_snapshot</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The snapshot to initialize the repository contents from.</p></li> <li><p><strong>saltenv</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The environment the file resides in.</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>A boolean representing whether all changes succeeded.</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' aptly.set_repo name="test-repo" comment="Test universe repo" component="universe" distribution="xenial"</pre> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.aptly.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.aptly.html</a>
  </p>
</div>
