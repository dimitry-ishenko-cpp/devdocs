<h1>salt.modules.system</h1> <p>Support for reboot, shutdown, etc on POSIX-like systems.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>If you have configured a wrapper such as <code class="docutils literal notranslate"><span class="pre">molly-guard</span></code> to intercept <em>interactive</em> shutdown commands, be aware that calling <code class="docutils literal notranslate"><span class="pre">system.halt</span></code>, <code class="docutils literal notranslate"><span class="pre">system.poweroff</span></code>, <code class="docutils literal notranslate"><span class="pre">system.reboot</span></code>, and <code class="docutils literal notranslate"><span class="pre">system.shutdown</span></code> with <code class="docutils literal notranslate"><span class="pre">salt-call</span></code> will hang indefinitely while the wrapper script waits for user input. Calling them with <code class="docutils literal notranslate"><span class="pre">salt</span></code> will work as expected.</p> </div> <dl class="py function"> <h3 id="salt.modules.system.get_computer_desc"> salt.modules.system.get_computer_desc()</h3> <dd>
<p>Get PRETTY_HOSTNAME value stored in /etc/machine-info If this file doesn't exist or the variable doesn't exist return False.</p> <dl class="field-list simple"> <dt class="field-odd">Returns</dt> <dd class="field-odd">
<p>Value of PRETTY_HOSTNAME if this does not exist False.</p> </dd> <dt class="field-even">Return type</dt> <dd class="field-even">
<p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' system.get_computer_desc</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.system.get_computer_name"> salt.modules.system.get_computer_name()</h3> <dd>
<p>Get hostname.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' network.get_hostname</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.system.get_reboot_required_witnessed"> salt.modules.system.get_reboot_required_witnessed()</h3> <dd>
<p>Determine if at any time during the current boot session the salt minion witnessed an event indicating that a reboot is required.</p> <dl class="field-list simple"> <dt class="field-odd">Returns</dt> <dd class="field-odd">
<p><code class="docutils literal notranslate"><span class="pre">True</span></code> if the a reboot request was witnessed, <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise</p> </dd> <dt class="field-even">Return type</dt> <dd class="field-even">
<p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' system.get_reboot_required_witnessed</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.system.get_system_date"> salt.modules.system.get_system_date(utc_offset=None)</h3> <dd>
<p>Get the system date</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<p><strong>utc_offset</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The utc offset in 4 digit (+0600) format with an optional sign (+/-). Will default to None which will use the local timezone. To set the time based off of UTC use "'+0000'". Note: if being passed through the command line will need to be quoted twice to allow negative offsets.</p> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>Returns the system date.</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' system.get_system_date</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.system.get_system_date_time"> salt.modules.system.get_system_date_time(utc_offset=None)</h3> <dd>
<p>Get the system date/time.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<p><strong>utc_offset</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The utc offset in 4 digit (+0600) format with an optional sign (+/-). Will default to None which will use the local timezone. To set the time based off of UTC use "'+0000'". Note: if being passed through the command line will need to be quoted twice to allow negative offsets.</p> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>Returns the system time in YYYY-MM-DD hh:mm:ss format.</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' system.get_system_date_time "'-0500'"</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.system.get_system_time"> salt.modules.system.get_system_time(utc_offset=None)</h3> <dd>
<p>Get the system time.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<p><strong>utc_offset</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The utc offset in 4 digit (+0600) format with an optional sign (+/-). Will default to None which will use the local timezone. To set the time based off of UTC use "'+0000'". Note: if being passed through the command line will need to be quoted twice to allow negative offsets.</p> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>Returns the system time in HH:MM:SS AM/PM format.</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' system.get_system_time</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.system.halt"> salt.modules.system.halt()</h3> <dd>
<p>Halt a running system</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' system.halt</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.system.has_settable_hwclock"> salt.modules.system.has_settable_hwclock()</h3> <dd>
<p>Returns True if the system has a hardware clock capable of being set from software.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' system.has_settable_hwclock</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.system.init"> salt.modules.system.init(runlevel)</h3> <dd>
<p>Change the system runlevel on sysV compatible systems</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' system.init 3</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.system.poweroff"> salt.modules.system.poweroff()</h3> <dd>
<p>Poweroff a running system</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' system.poweroff</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.system.reboot"> salt.modules.system.reboot(at_time=None)</h3> <dd>
<p>Reboot the system</p> <dl class="simple"> <dt>at_time</dt>
<dd>
<p>The wait time in minutes before the system will be rebooted.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' system.reboot</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.system.set_computer_desc"> salt.modules.system.set_computer_desc(desc)</h3> <dd>
<p>Set PRETTY_HOSTNAME value stored in /etc/machine-info This will create the file if it does not exist. If it is unable to create or modify this file returns False.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<p><strong>desc</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The computer description</p> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>False on failure. True if successful.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' system.set_computer_desc "Michael's laptop"</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.system.set_computer_name"> salt.modules.system.set_computer_name(hostname)</h3> <dd>
<p>Modify hostname.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' system.set_computer_name master.saltstack.com</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.system.set_reboot_required_witnessed"> salt.modules.system.set_reboot_required_witnessed()</h3> <dd>
<p>This function is used to remember that an event indicating that a reboot is required was witnessed. This function writes to a temporary filesystem so the event gets cleared upon reboot.</p> <dl class="field-list simple"> <dt class="field-odd">Returns</dt> <dd class="field-odd">
<p><code class="docutils literal notranslate"><span class="pre">True</span></code> if successful, otherwise <code class="docutils literal notranslate"><span class="pre">False</span></code></p> </dd> <dt class="field-even">Return type</dt> <dd class="field-even">
<p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></p> </dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' system.set_reboot_required_witnessed</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.system.set_system_date"> salt.modules.system.set_system_date(newdate, utc_offset=None)</h3> <dd>
<p>Set the system date. Use &lt;mm-dd-yy&gt; format for the date.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<p><strong>newdate</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- </p>
<p>The date to set. Can be any of the following formats:</p> <ul class="simple"> <li><p>YYYY-MM-DD</p></li> <li><p>MM-DD-YYYY</p></li> <li><p>MM-DD-YY</p></li> <li><p>MM/DD/YYYY</p></li> <li><p>MM/DD/YY</p></li> <li><p>YYYY/MM/DD</p></li> </ul> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' system.set_system_date '03-28-13'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.system.set_system_date_time"> salt.modules.system.set_system_date_time(years=None, months=None, days=None, hours=None, minutes=None, seconds=None, utc_offset=None)</h3> <dd>
<p>Set the system date and time. Each argument is an element of the date, but not required. If an element is not passed, the current system value for that element will be used. For example, if you don't pass the year, the current system year will be used. (Used by set_system_date and set_system_time)</p> <p>Updates hardware clock, if present, in addition to software (kernel) clock.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>years</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) -- Years digit, ie: 2015</p></li> <li><p><strong>months</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) -- Months digit: 1 - 12</p></li> <li><p><strong>days</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) -- Days digit: 1 - 31</p></li> <li><p><strong>hours</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) -- Hours digit: 0 - 23</p></li> <li><p><strong>minutes</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) -- Minutes digit: 0 - 59</p></li> <li><p><strong>seconds</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) -- Seconds digit: 0 - 59</p></li> <li><p><strong>utc_offset</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The utc offset in 4 digit (+0600) format with an optional sign (+/-). Will default to None which will use the local timezone. To set the time based off of UTC use "'+0000'". Note: if being passed through the command line will need to be quoted twice to allow negative offsets.</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>True if successful. Otherwise False.</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' system.set_system_date_time 2015 5 12 11 37 53 "'-0500'"</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.system.set_system_time"> salt.modules.system.set_system_time(newtime, utc_offset=None)</h3> <dd>
<p>Set the system time.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li>
<p><strong>newtime</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- </p>
<p>The time to set. Can be any of the following formats. - HH:MM:SS AM/PM - HH:MM AM/PM - HH:MM:SS (24 hour) - HH:MM (24 hour)</p> <p>Note that the salt command line parser parses the date/time before we obtain the argument (preventing us from doing utc) Therefore the argument must be passed in as a string. Meaning you may have to quote the text twice from the command line.</p> </li> <li><p><strong>utc_offset</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The utc offset in 4 digit (+0600) format with an optional sign (+/-). Will default to None which will use the local timezone. To set the time based off of UTC use "'+0000'". Note: if being passed through the command line will need to be quoted twice to allow negative offsets.</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>Returns True if successful. Otherwise False.</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' system.set_system_time "'11:20'"</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.system.shutdown"> salt.modules.system.shutdown(at_time=None)</h3> <dd>
<p>Shutdown a running system</p> <dl class="simple"> <dt>at_time</dt>
<dd>
<p>The wait time in minutes before the system will be shutdown.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' system.shutdown 5</pre> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.system.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.system.html</a>
  </p>
</div>
