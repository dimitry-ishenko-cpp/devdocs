<h1>salt.modules.telemetry</h1> <p>Connection module for Telemetry</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.0.</span></p> </div> <p><a class="reference external" href="https://github.com/mongolab/mongolab-telemetry-api-docs/blob/master/alerts.md">https://github.com/mongolab/mongolab-telemetry-api-docs/blob/master/alerts.md</a></p> <dl class="field-list simple"> <dt class="field-odd">configuration</dt> <dd class="field-odd">
<p>This module accepts explicit telemetry credentials or can also read api key credentials from a pillar. More Information available <a class="reference external" href="https://github.com/mongolab/mongolab-telemetry-api-docs/blob/master/alerts.md">here</a>.</p> </dd> </dl> <p>In the minion's config file:</p> <pre class="highlight-yaml notranslate" data-language="yaml">telemetry.telemetry_api_keys:
  - abc123  # Key 1
  - efg321  # Backup Key 1
telemetry_api_base_url: https://telemetry-api.mongolab.com/v0</pre> <dl class="field-list simple"> <dt class="field-odd">depends</dt> <dd class="field-odd">
<p>requests</p> </dd> </dl> <dl class="py function"> <h3 id="salt.modules.telemetry.create_alarm"> salt.modules.telemetry.create_alarm(deployment_id, metric_name, data, api_key=None, profile='telemetry')</h3> <dd>
<p>create an telemetry alarms.</p> <p>data is a dict of alert configuration data.</p> <p>Returns (bool success, str message) tuple.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion telemetry.create_alarm rs-ds033197 {} profile=telemetry</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.telemetry.delete_alarms"> salt.modules.telemetry.delete_alarms(deployment_id, alert_id=None, metric_name=None, api_key=None, profile='telemetry')</h3> <dd>
<dl class="simple"> <dt>delete an alert specified by alert_id or if not specified blows away all the alerts</dt>
<dd>
<p>in the current deployment.</p> </dd> </dl> <p>Returns (bool success, str message) tuple.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion telemetry.delete_alarms rs-ds033197 profile=telemetry</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.telemetry.get_alarms"> salt.modules.telemetry.get_alarms(deployment_id, profile='telemetry')</h3> <dd>
<p>get all the alarms set up against the current deployment</p> <p>Returns dictionary of alarm information</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion telemetry.get_alarms rs-ds033197 profile=telemetry</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.telemetry.get_alert_config"> salt.modules.telemetry.get_alert_config(deployment_id, metric_name=None, api_key=None, profile='telemetry')</h3> <dd>
<p>Get all alert definitions associated with a given deployment or if metric_name is specified, obtain the specific alert config</p> <p>Returns dictionary or list of dictionaries.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion telemetry.get_alert_config rs-ds033197 currentConnections profile=telemetry
salt myminion telemetry.get_alert_config rs-ds033197 profile=telemetry</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.telemetry.get_notification_channel_id"> salt.modules.telemetry.get_notification_channel_id(notify_channel, profile='telemetry')</h3> <dd>
<p>Given an email address, creates a notification-channels if one is not found and also returns the corresponding notification channel id.</p> <dl class="simple"> <dt>notify_channel</dt>
<dd>
<p>Email escalation policy</p> </dd> <dt>profile</dt>
<dd>
<p>A dict of telemetry config information.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion telemetry.get_notification_channel_id userx@company.com profile=telemetry</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.telemetry.update_alarm"> salt.modules.telemetry.update_alarm(deployment_id, metric_name, data, api_key=None, profile='telemetry')</h3> <dd>
<p>update an telemetry alarms. data is a dict of alert configuration data.</p> <p>Returns (bool success, str message) tuple.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion telemetry.update_alarm rs-ds033197 {} profile=telemetry</pre> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.telemetry.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.telemetry.html</a>
  </p>
</div>
