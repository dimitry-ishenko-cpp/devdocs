<h1>salt.modules.napalm_mod</h1> <div class="section" id="napalm-helpers"> <h2>NAPALM helpers</h2> <p>Helpers for the NAPALM modules.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> <dl class="py function"> <h3 id="salt.modules.napalm_mod.alive"> salt.modules.napalm_mod.alive(**kwargs)</h3> <dd>
<p>Returns the alive status of the connection layer. The output is a dictionary under the usual dictionary output of the NAPALM modules.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.alive</pre> <p>Output Example:</p> <pre class="highlight-yaml notranslate" data-language="yaml">result: True
out:
    is_alive: False
comment: ''</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.call"> salt.modules.napalm_mod.call(method, *args, **kwargs)</h3> <dd>
<p>Execute arbitrary methods from the NAPALM library. To see the expected output, please consult the NAPALM documentation.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This feature is not recommended to be used in production. It should be used for testing only!</p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.call get_lldp_neighbors
salt '*' napalm.call get_firewall_policies
salt '*' napalm.call get_bgp_config group='my-group'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.compliance_report"> salt.modules.napalm_mod.compliance_report(filepath=None, string=None, renderer='jinja|yaml', **kwargs)</h3> <dd>
<p>Return the compliance report.</p> <dl> <dt>filepath</dt>
<dd>
<p>The absolute path to the validation file.</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2019.2.0.</span></p> </div> <p>Beginning with release codename <code class="docutils literal notranslate"><span class="pre">2019.2.0</span></code>, this function has been enhanced, to be able to leverage the multi-engine template rendering of Salt, besides the possibility to retrieve the file source from remote systems, the URL schemes supported being:</p> <ul class="simple"> <li><p><code class="docutils literal notranslate"><span class="pre">salt://</span></code></p></li> <li><p><code class="docutils literal notranslate"><span class="pre">http://</span></code> and <code class="docutils literal notranslate"><span class="pre">https://</span></code></p></li> <li><p><code class="docutils literal notranslate"><span class="pre">ftp://</span></code></p></li> <li><p><code class="docutils literal notranslate"><span class="pre">s3://</span></code></p></li> <li><p><code class="docutils literal notranslate"><span class="pre">swift:/</span></code></p></li> </ul> <p>Or on the local file system (on the Minion).</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>The rendering result does not necessarily need to be YAML, instead it can be any format interpreted by Salt's rendering pipeline (including pure Python).</p> </div> </dd> <dt>string</dt>
<dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>The compliance report send as inline string, to be used as the file to send through the renderer system. Note, not all renderer modules can work with strings; the 'py' renderer requires a file, for example.</p> </dd> <dt>renderer: <code class="docutils literal notranslate"><span class="pre">jinja|yaml</span></code>
</dt>
<dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>The renderer pipe to send the file through; this is overridden by a "she-bang" at the top of the file.</p> </dd> <dt>kwargs</dt>
<dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2019.2.0.</span></p> </div> <p>Keyword args to pass to Salt's compile_template() function.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.compliance_report ~/validate.yml
salt '*' napalm.compliance_report salt://path/to/validator.sls</pre> <p>Validation File Example (pure YAML):</p> <pre class="highlight-yaml notranslate" data-language="yaml">- get_facts:
    os_version: 4.17

- get_interfaces_ip:
    Management1:
      ipv4:
        10.0.2.14:
          prefix_length: 24
        _mode: strict</pre> <p>Validation File Example (as Jinja + YAML):</p> <pre class="highlight-yaml notranslate" data-language="yaml">- get_facts:
    os_version: {{ grains.version }}
- get_interfaces_ip:
    Loopback0:
      ipv4:
        {{ grains.lo0.ipv4 }}:
          prefix_length: 24
        _mode: strict
- get_bgp_neighbors: {{ pillar.bgp.neighbors }}</pre> <p>Output Example:</p> <pre class="highlight-yaml notranslate" data-language="yaml">device1:
    ----------
    comment:
    out:
        ----------
        complies:
            False
        get_facts:
            ----------
            complies:
                False
            extra:
            missing:
            present:
                ----------
                os_version:
                    ----------
                    actual_value:
                        15.1F6-S1.4
                    complies:
                        False
                    nested:
                        False
        get_interfaces_ip:
            ----------
            complies:
                False
            extra:
            missing:
                - Management1
            present:
                ----------
        skipped:
    result:
        True</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.config_diff_text"> salt.modules.napalm_mod.config_diff_text(source1='candidate', candidate_path=None, source2='running', running_path=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Return the diff, as text, between the two different configuration sources. The sources can be either specified using the <code class="docutils literal notranslate"><span class="pre">source1</span></code> and <code class="docutils literal notranslate"><span class="pre">source2</span></code> arguments when retrieving from the managed network device.</p> <dl class="simple"> <dt>source1: <code class="docutils literal notranslate"><span class="pre">candidate</span></code>
</dt>
<dd>
<p>The source from where to retrieve the configuration to be compared with. Available options: <code class="docutils literal notranslate"><span class="pre">candidate</span></code>, <code class="docutils literal notranslate"><span class="pre">running</span></code>, <code class="docutils literal notranslate"><span class="pre">startup</span></code>. Default: <code class="docutils literal notranslate"><span class="pre">candidate</span></code>.</p> </dd> <dt>candidate_path</dt>
<dd>
<p>Absolute or remote path from where to load the candidate configuration text. This argument allows any URI supported by <a class="reference internal" href="salt.modules.cp.html#salt.modules.cp.get_url" title="salt.modules.cp.get_url"><code class="xref py py-func docutils literal notranslate"><span class="pre">cp.get_url</span></code></a>), e.g., <code class="docutils literal notranslate"><span class="pre">salt://</span></code>, <code class="docutils literal notranslate"><span class="pre">https://</span></code>, <code class="docutils literal notranslate"><span class="pre">s3://</span></code>, <code class="docutils literal notranslate"><span class="pre">ftp:/</span></code>, etc.</p> </dd> <dt>source2: <code class="docutils literal notranslate"><span class="pre">running</span></code>
</dt>
<dd>
<p>The source from where to retrieve the configuration to compare with. Available options: <code class="docutils literal notranslate"><span class="pre">candidate</span></code>, <code class="docutils literal notranslate"><span class="pre">running</span></code>, <code class="docutils literal notranslate"><span class="pre">startup</span></code>. Default: <code class="docutils literal notranslate"><span class="pre">running</span></code>.</p> </dd> <dt>running_path</dt>
<dd>
<p>Absolute or remote path from where to load the running configuration text. This argument allows any URI supported by <a class="reference internal" href="salt.modules.cp.html#salt.modules.cp.get_url" title="salt.modules.cp.get_url"><code class="xref py py-func docutils literal notranslate"><span class="pre">cp.get_url</span></code></a>), e.g., <code class="docutils literal notranslate"><span class="pre">salt://</span></code>, <code class="docutils literal notranslate"><span class="pre">https://</span></code>, <code class="docutils literal notranslate"><span class="pre">s3://</span></code>, <code class="docutils literal notranslate"><span class="pre">ftp:/</span></code>, etc.</p> </dd> <dt>saltenv: <code class="docutils literal notranslate"><span class="pre">base</span></code>
</dt>
<dd>
<p>Salt fileserver environment from which to retrieve the file. Ignored if <code class="docutils literal notranslate"><span class="pre">candidate_path</span></code> or <code class="docutils literal notranslate"><span class="pre">running_path</span></code> is not a <code class="docutils literal notranslate"><span class="pre">salt://</span></code> URL.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.config_diff_text
salt '*' napalm.config_diff_text candidate_path=https://bit.ly/2mAdq7z
# Would compare the running config with the configuration available at
# https://bit.ly/2mAdq7z</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.config_diff_tree"> salt.modules.napalm_mod.config_diff_tree(source1='candidate', candidate_path=None, source2='running', running_path=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Return the diff, as Python dictionary, between two different sources. The sources can be either specified using the <code class="docutils literal notranslate"><span class="pre">source1</span></code> and <code class="docutils literal notranslate"><span class="pre">source2</span></code> arguments when retrieving from the managed network device.</p> <dl class="simple"> <dt>source1: <code class="docutils literal notranslate"><span class="pre">candidate</span></code>
</dt>
<dd>
<p>The source from where to retrieve the configuration to be compared with. Available options: <code class="docutils literal notranslate"><span class="pre">candidate</span></code>, <code class="docutils literal notranslate"><span class="pre">running</span></code>, <code class="docutils literal notranslate"><span class="pre">startup</span></code>. Default: <code class="docutils literal notranslate"><span class="pre">candidate</span></code>.</p> </dd> <dt>candidate_path</dt>
<dd>
<p>Absolute or remote path from where to load the candidate configuration text. This argument allows any URI supported by <a class="reference internal" href="salt.modules.cp.html#salt.modules.cp.get_url" title="salt.modules.cp.get_url"><code class="xref py py-func docutils literal notranslate"><span class="pre">cp.get_url</span></code></a>), e.g., <code class="docutils literal notranslate"><span class="pre">salt://</span></code>, <code class="docutils literal notranslate"><span class="pre">https://</span></code>, <code class="docutils literal notranslate"><span class="pre">s3://</span></code>, <code class="docutils literal notranslate"><span class="pre">ftp:/</span></code>, etc.</p> </dd> <dt>source2: <code class="docutils literal notranslate"><span class="pre">running</span></code>
</dt>
<dd>
<p>The source from where to retrieve the configuration to compare with. Available options: <code class="docutils literal notranslate"><span class="pre">candidate</span></code>, <code class="docutils literal notranslate"><span class="pre">running</span></code>, <code class="docutils literal notranslate"><span class="pre">startup</span></code>. Default: <code class="docutils literal notranslate"><span class="pre">running</span></code>.</p> </dd> <dt>running_path</dt>
<dd>
<p>Absolute or remote path from where to load the running configuration text. This argument allows any URI supported by <a class="reference internal" href="salt.modules.cp.html#salt.modules.cp.get_url" title="salt.modules.cp.get_url"><code class="xref py py-func docutils literal notranslate"><span class="pre">cp.get_url</span></code></a>), e.g., <code class="docutils literal notranslate"><span class="pre">salt://</span></code>, <code class="docutils literal notranslate"><span class="pre">https://</span></code>, <code class="docutils literal notranslate"><span class="pre">s3://</span></code>, <code class="docutils literal notranslate"><span class="pre">ftp:/</span></code>, etc.</p> </dd> <dt>saltenv: <code class="docutils literal notranslate"><span class="pre">base</span></code>
</dt>
<dd>
<p>Salt fileserver environment from which to retrieve the file. Ignored if <code class="docutils literal notranslate"><span class="pre">candidate_path</span></code> or <code class="docutils literal notranslate"><span class="pre">running_path</span></code> is not a <code class="docutils literal notranslate"><span class="pre">salt://</span></code> URL.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.config_diff_text
salt '*' napalm.config_diff_text candidate_path=https://bit.ly/2mAdq7z
# Would compare the running config with the configuration available at
# https://bit.ly/2mAdq7z</pre> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.config_diff_tree
salt '*' napalm.config_diff_tree running startup</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.config_filter_lines"> salt.modules.napalm_mod.config_filter_lines(parent_regex, child_regex, source='running')</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Return a list of detailed matches, for the configuration blocks (parent-child relationship) whose parent respects the regular expressions configured via the <code class="docutils literal notranslate"><span class="pre">parent_regex</span></code> argument, and the child matches the <code class="docutils literal notranslate"><span class="pre">child_regex</span></code> regular expression. The result is a list of dictionaries with the following keys:</p> <ul class="simple"> <li><p><code class="docutils literal notranslate"><span class="pre">match</span></code>: a boolean value that tells whether <code class="docutils literal notranslate"><span class="pre">child_regex</span></code> matched any children lines.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">parent</span></code>: the parent line (as text).</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">child</span></code>: the child line (as text). If no child line matched, this field will be <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li> </ul> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This function is only available only when the underlying library <a class="reference external" href="http://www.pennington.net/py/ciscoconfparse/index.html">ciscoconfparse</a> is installed. See <a class="reference internal" href="salt.modules.ciscoconfparse_mod.html#module-salt.modules.ciscoconfparse_mod" title="salt.modules.ciscoconfparse_mod"><code class="xref py py-func docutils literal notranslate"><span class="pre">ciscoconfparse</span> <span class="pre">module</span></code></a> for more details.</p> </div> <dl class="simple"> <dt>parent_regex</dt>
<dd>
<p>The regular expression to match the parent configuration lines against.</p> </dd> <dt>child_regex</dt>
<dd>
<p>The regular expression to match the child configuration lines against.</p> </dd> <dt>source: <code class="docutils literal notranslate"><span class="pre">running</span></code>
</dt>
<dd>
<p>The configuration type to retrieve from the network device. Default: <code class="docutils literal notranslate"><span class="pre">running</span></code>. Available options: <code class="docutils literal notranslate"><span class="pre">running</span></code>, <code class="docutils literal notranslate"><span class="pre">startup</span></code>, <code class="docutils literal notranslate"><span class="pre">candidate</span></code>.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.config_filter_lines '^interface' 'ip address'
salt '*' napalm.config_filter_lines '^interface' 'shutdown' source=candidate</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.config_find_lines"> salt.modules.napalm_mod.config_find_lines(regex, source='running')</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Return the configuration lines that match the regular expressions from the <code class="docutils literal notranslate"><span class="pre">regex</span></code> argument. The configuration is read from the network device interrogated.</p> <dl class="simple"> <dt>regex</dt>
<dd>
<p>The regular expression to match the configuration lines against.</p> </dd> <dt>source: <code class="docutils literal notranslate"><span class="pre">running</span></code>
</dt>
<dd>
<p>The configuration type to retrieve from the network device. Default: <code class="docutils literal notranslate"><span class="pre">running</span></code>. Available options: <code class="docutils literal notranslate"><span class="pre">running</span></code>, <code class="docutils literal notranslate"><span class="pre">startup</span></code>, <code class="docutils literal notranslate"><span class="pre">candidate</span></code>.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.config_find_lines '^interface Ethernet1\d'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.config_lines_w_child"> salt.modules.napalm_mod.config_lines_w_child(parent_regex, child_regex, source='running')</h3> <dd>
<blockquote> <div>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> </div>
</blockquote> <p>Return the configuration lines that match the regular expressions from the <code class="docutils literal notranslate"><span class="pre">parent_regex</span></code> argument, having child lines matching <code class="docutils literal notranslate"><span class="pre">child_regex</span></code>. The configuration is read from the network device interrogated.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This function is only available only when the underlying library <a class="reference external" href="http://www.pennington.net/py/ciscoconfparse/index.html">ciscoconfparse</a> is installed. See <a class="reference internal" href="salt.modules.ciscoconfparse_mod.html#module-salt.modules.ciscoconfparse_mod" title="salt.modules.ciscoconfparse_mod"><code class="xref py py-func docutils literal notranslate"><span class="pre">ciscoconfparse</span> <span class="pre">module</span></code></a> for more details.</p> </div> <dl class="simple"> <dt>parent_regex</dt>
<dd>
<p>The regular expression to match the parent configuration lines against.</p> </dd> <dt>child_regex</dt>
<dd>
<p>The regular expression to match the child configuration lines against.</p> </dd> <dt>source: <code class="docutils literal notranslate"><span class="pre">running</span></code>
</dt>
<dd>
<p>The configuration type to retrieve from the network device. Default: <code class="docutils literal notranslate"><span class="pre">running</span></code>. Available options: <code class="docutils literal notranslate"><span class="pre">running</span></code>, <code class="docutils literal notranslate"><span class="pre">startup</span></code>, <code class="docutils literal notranslate"><span class="pre">candidate</span></code>.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.config_lines_w_child '^interface' 'ip address'
salt '*' napalm.config_lines_w_child '^interface' 'shutdown' source=candidate</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.config_lines_wo_child"> salt.modules.napalm_mod.config_lines_wo_child(parent_regex, child_regex, source='running')</h3> <dd>
<blockquote> <div>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> </div>
</blockquote> <p>Return the configuration lines that match the regular expressions from the <code class="docutils literal notranslate"><span class="pre">parent_regex</span></code> argument, having the child lines <em>not</em> matching <code class="docutils literal notranslate"><span class="pre">child_regex</span></code>. The configuration is read from the network device interrogated.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This function is only available only when the underlying library <a class="reference external" href="http://www.pennington.net/py/ciscoconfparse/index.html">ciscoconfparse</a> is installed. See <a class="reference internal" href="salt.modules.ciscoconfparse_mod.html#module-salt.modules.ciscoconfparse_mod" title="salt.modules.ciscoconfparse_mod"><code class="xref py py-func docutils literal notranslate"><span class="pre">ciscoconfparse</span> <span class="pre">module</span></code></a> for more details.</p> </div> <dl class="simple"> <dt>parent_regex</dt>
<dd>
<p>The regular expression to match the parent configuration lines against.</p> </dd> <dt>child_regex</dt>
<dd>
<p>The regular expression to match the child configuration lines against.</p> </dd> <dt>source: <code class="docutils literal notranslate"><span class="pre">running</span></code>
</dt>
<dd>
<p>The configuration type to retrieve from the network device. Default: <code class="docutils literal notranslate"><span class="pre">running</span></code>. Available options: <code class="docutils literal notranslate"><span class="pre">running</span></code>, <code class="docutils literal notranslate"><span class="pre">startup</span></code>, <code class="docutils literal notranslate"><span class="pre">candidate</span></code>.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.config_lines_wo_child '^interface' 'ip address'
salt '*' napalm.config_lines_wo_child '^interface' 'shutdown' source=candidate</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.config_merge_diff"> salt.modules.napalm_mod.config_merge_diff(source='running', merge_config=None, merge_path=None, saltenv='base')</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Return the merge diff, as text, after merging the merge config into the configuration source requested (without loading the config on the device).</p> <dl class="simple"> <dt>source: <code class="docutils literal notranslate"><span class="pre">running</span></code>
</dt>
<dd>
<p>The configuration type to retrieve from the network device. Default: <code class="docutils literal notranslate"><span class="pre">running</span></code>. Available options: <code class="docutils literal notranslate"><span class="pre">running</span></code>, <code class="docutils literal notranslate"><span class="pre">startup</span></code>, <code class="docutils literal notranslate"><span class="pre">candidate</span></code>.</p> </dd> <dt>merge_config</dt>
<dd>
<p>The config to be merged into the initial config, sent as text. This argument is ignored when <code class="docutils literal notranslate"><span class="pre">merge_path</span></code> is set.</p> </dd> <dt>merge_path</dt>
<dd>
<p>Absolute or remote path from where to load the merge configuration text. This argument allows any URI supported by <a class="reference internal" href="salt.modules.cp.html#salt.modules.cp.get_url" title="salt.modules.cp.get_url"><code class="xref py py-func docutils literal notranslate"><span class="pre">cp.get_url</span></code></a>), e.g., <code class="docutils literal notranslate"><span class="pre">salt://</span></code>, <code class="docutils literal notranslate"><span class="pre">https://</span></code>, <code class="docutils literal notranslate"><span class="pre">s3://</span></code>, <code class="docutils literal notranslate"><span class="pre">ftp:/</span></code>, etc.</p> </dd> <dt>saltenv: <code class="docutils literal notranslate"><span class="pre">base</span></code>
</dt>
<dd>
<p>Salt fileserver environment from which to retrieve the file. Ignored if <code class="docutils literal notranslate"><span class="pre">merge_path</span></code> is not a <code class="docutils literal notranslate"><span class="pre">salt://</span></code> URL.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.config_merge_diff merge_path=salt://path/to/merge.cfg</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.config_merge_text"> salt.modules.napalm_mod.config_merge_text(source='running', merge_config=None, merge_path=None, saltenv='base')</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Return the merge result of the configuration from <code class="docutils literal notranslate"><span class="pre">source</span></code> with the merge configuration, as plain text (without loading the config on the device).</p> <dl class="simple"> <dt>source: <code class="docutils literal notranslate"><span class="pre">running</span></code>
</dt>
<dd>
<p>The configuration type to retrieve from the network device. Default: <code class="docutils literal notranslate"><span class="pre">running</span></code>. Available options: <code class="docutils literal notranslate"><span class="pre">running</span></code>, <code class="docutils literal notranslate"><span class="pre">startup</span></code>, <code class="docutils literal notranslate"><span class="pre">candidate</span></code>.</p> </dd> <dt>merge_config</dt>
<dd>
<p>The config to be merged into the initial config, sent as text. This argument is ignored when <code class="docutils literal notranslate"><span class="pre">merge_path</span></code> is set.</p> </dd> <dt>merge_path</dt>
<dd>
<p>Absolute or remote path from where to load the merge configuration text. This argument allows any URI supported by <a class="reference internal" href="salt.modules.cp.html#salt.modules.cp.get_url" title="salt.modules.cp.get_url"><code class="xref py py-func docutils literal notranslate"><span class="pre">cp.get_url</span></code></a>), e.g., <code class="docutils literal notranslate"><span class="pre">salt://</span></code>, <code class="docutils literal notranslate"><span class="pre">https://</span></code>, <code class="docutils literal notranslate"><span class="pre">s3://</span></code>, <code class="docutils literal notranslate"><span class="pre">ftp:/</span></code>, etc.</p> </dd> <dt>saltenv: <code class="docutils literal notranslate"><span class="pre">base</span></code>
</dt>
<dd>
<p>Salt fileserver environment from which to retrieve the file. Ignored if <code class="docutils literal notranslate"><span class="pre">merge_path</span></code> is not a <code class="docutils literal notranslate"><span class="pre">salt://</span></code> URL.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.config_merge_text merge_path=salt://path/to/merge.cfg</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.config_merge_tree"> salt.modules.napalm_mod.config_merge_tree(source='running', merge_config=None, merge_path=None, saltenv='base')</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Return the merge tree of the <code class="docutils literal notranslate"><span class="pre">initial_config</span></code> with the <code class="docutils literal notranslate"><span class="pre">merge_config</span></code>, as a Python dictionary.</p> <dl class="simple"> <dt>source: <code class="docutils literal notranslate"><span class="pre">running</span></code>
</dt>
<dd>
<p>The configuration type to retrieve from the network device. Default: <code class="docutils literal notranslate"><span class="pre">running</span></code>. Available options: <code class="docutils literal notranslate"><span class="pre">running</span></code>, <code class="docutils literal notranslate"><span class="pre">startup</span></code>, <code class="docutils literal notranslate"><span class="pre">candidate</span></code>.</p> </dd> <dt>merge_config</dt>
<dd>
<p>The config to be merged into the initial config, sent as text. This argument is ignored when <code class="docutils literal notranslate"><span class="pre">merge_path</span></code> is set.</p> </dd> <dt>merge_path</dt>
<dd>
<p>Absolute or remote path from where to load the merge configuration text. This argument allows any URI supported by <a class="reference internal" href="salt.modules.cp.html#salt.modules.cp.get_url" title="salt.modules.cp.get_url"><code class="xref py py-func docutils literal notranslate"><span class="pre">cp.get_url</span></code></a>), e.g., <code class="docutils literal notranslate"><span class="pre">salt://</span></code>, <code class="docutils literal notranslate"><span class="pre">https://</span></code>, <code class="docutils literal notranslate"><span class="pre">s3://</span></code>, <code class="docutils literal notranslate"><span class="pre">ftp:/</span></code>, etc.</p> </dd> <dt>saltenv: <code class="docutils literal notranslate"><span class="pre">base</span></code>
</dt>
<dd>
<p>Salt fileserver environment from which to retrieve the file. Ignored if <code class="docutils literal notranslate"><span class="pre">merge_path</span></code> is not a <code class="docutils literal notranslate"><span class="pre">salt://</span></code> URL.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.config_merge_tree merge_path=salt://path/to/merge.cfg</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.config_tree"> salt.modules.napalm_mod.config_tree(source='running', with_tags=False)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Transform Cisco IOS style configuration to structured Python dictionary. Depending on the value of the <code class="docutils literal notranslate"><span class="pre">with_tags</span></code> argument, this function may provide different views, valuable in different situations.</p> <dl class="simple"> <dt>source: <code class="docutils literal notranslate"><span class="pre">running</span></code>
</dt>
<dd>
<p>The configuration type to retrieve from the network device. Default: <code class="docutils literal notranslate"><span class="pre">running</span></code>. Available options: <code class="docutils literal notranslate"><span class="pre">running</span></code>, <code class="docutils literal notranslate"><span class="pre">startup</span></code>, <code class="docutils literal notranslate"><span class="pre">candidate</span></code>.</p> </dd> <dt>with_tags: <code class="docutils literal notranslate"><span class="pre">False</span></code>
</dt>
<dd>
<p>Whether this function should return a detailed view, with tags.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.config_tree</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.junos_call"> salt.modules.napalm_mod.junos_call(fun, *args, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Execute an arbitrary function from the <code class="xref py py-mod docutils literal notranslate"><span class="pre">junos</span> <span class="pre">execution</span> <span class="pre">module</span></code>. To check what <code class="docutils literal notranslate"><span class="pre">args</span></code> and <code class="docutils literal notranslate"><span class="pre">kwargs</span></code> you must send to the function, please consult the appropriate documentation.</p> <dl class="simple"> <dt>fun</dt>
<dd>
<p>The name of the function. E.g., <code class="docutils literal notranslate"><span class="pre">set_hostname</span></code>.</p> </dd> <dt>args</dt>
<dd>
<p>List of arguments to send to the <code class="docutils literal notranslate"><span class="pre">junos</span></code> function invoked.</p> </dd> <dt>kwargs</dt>
<dd>
<p>Dictionary of key-value arguments to send to the <code class="docutils literal notranslate"><span class="pre">juno</span></code> function invoked.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.junos_fun cli 'show system commit'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.junos_cli"> salt.modules.napalm_mod.junos_cli(command, format=None, dev_timeout=None, dest=None, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Execute a CLI command and return the output in the specified format.</p> <dl class="simple"> <dt>command</dt>
<dd>
<p>The command to execute on the Junos CLI.</p> </dd> <dt>format: <code class="docutils literal notranslate"><span class="pre">text</span></code>
</dt>
<dd>
<p>Format in which to get the CLI output (either <code class="docutils literal notranslate"><span class="pre">text</span></code> or <code class="docutils literal notranslate"><span class="pre">xml</span></code>).</p> </dd> <dt>dev_timeout: <code class="docutils literal notranslate"><span class="pre">30</span></code>
</dt>
<dd>
<p>The NETCONF RPC timeout (in seconds).</p> </dd> <dt>dest</dt>
<dd>
<p>Destination file where the RPC output is stored. Note that the file will be stored on the Proxy Minion. To push the files to the Master, use <a class="reference internal" href="salt.modules.cp.html#salt.modules.cp.push" title="salt.modules.cp.push"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cp.push</span></code></a>.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.junos_cli 'show lldp neighbors'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.junos_commit"> salt.modules.napalm_mod.junos_commit(**kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Commit the changes loaded in the candidate configuration.</p> <dl class="simple"> <dt>dev_timeout: <code class="docutils literal notranslate"><span class="pre">30</span></code>
</dt>
<dd>
<p>The NETCONF RPC timeout (in seconds).</p> </dd> <dt>comment</dt>
<dd>
<p>Provide a comment for the commit.</p> </dd> <dt>confirm</dt>
<dd>
<p>Provide time in minutes for commit confirmation. If this option is specified, the commit will be rolled back in the specified amount of time unless the commit is confirmed.</p> </dd> <dt>sync: <code class="docutils literal notranslate"><span class="pre">False</span></code>
</dt>
<dd>
<p>When <code class="docutils literal notranslate"><span class="pre">True</span></code>, on dual control plane systems, requests that the candidate configuration on one control plane be copied to the other control plane, checked for correct syntax, and committed on both Routing Engines.</p> </dd> <dt>force_sync: <code class="docutils literal notranslate"><span class="pre">False</span></code>
</dt>
<dd>
<p>When <code class="docutils literal notranslate"><span class="pre">True</span></code>, on dual control plane systems, force the candidate configuration on one control plane to be copied to the other control plane.</p> </dd> <dt>full</dt>
<dd>
<p>When <code class="docutils literal notranslate"><span class="pre">True</span></code>, requires all the daemons to check and evaluate the new configuration.</p> </dd> <dt>detail</dt>
<dd>
<p>When <code class="docutils literal notranslate"><span class="pre">True</span></code>, return commit detail.</p> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.junos_commit comment='Commitiing via Salt' detail=True
salt '*' napalm.junos_commit dev_timeout=60 confirm=10
salt '*' napalm.junos_commit sync=True dev_timeout=90</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.junos_copy_file"> salt.modules.napalm_mod.junos_copy_file(src, dst, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Copies the file on the remote Junos device.</p> <dl class="simple"> <dt>src</dt>
<dd>
<p>The source file path. This argument accepts the usual Salt URIs (e.g., <code class="docutils literal notranslate"><span class="pre">salt://</span></code>, <code class="docutils literal notranslate"><span class="pre">http://</span></code>, <code class="docutils literal notranslate"><span class="pre">https://</span></code>, <code class="docutils literal notranslate"><span class="pre">s3://</span></code>, <code class="docutils literal notranslate"><span class="pre">ftp://</span></code>, etc.).</p> </dd> <dt>dst</dt>
<dd>
<p>The destination path on the device where to copy the file.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.junos_copy_file https://example.com/junos.cfg /var/tmp/myjunos.cfg</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.junos_facts"> salt.modules.napalm_mod.junos_facts(**kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>The complete list of Junos facts collected by <code class="docutils literal notranslate"><span class="pre">junos-eznc</span></code>.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.junos_facts</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.junos_install_os"> salt.modules.napalm_mod.junos_install_os(path=None, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Installs the given image on the device.</p> <dl class="simple"> <dt>path</dt>
<dd>
<p>The image file source. This argument supports the following URIs:</p> <ul class="simple"> <li><p>Absolute path on the Minion.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">salt://</span></code> to fetch from the Salt fileserver.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">http://</span></code> and <code class="docutils literal notranslate"><span class="pre">https://</span></code></p></li> <li><p><code class="docutils literal notranslate"><span class="pre">ftp://</span></code></p></li> <li><p><code class="docutils literal notranslate"><span class="pre">swift:/</span></code></p></li> <li><p><code class="docutils literal notranslate"><span class="pre">s3://</span></code></p></li> </ul> </dd> <dt>dev_timeout: <code class="docutils literal notranslate"><span class="pre">30</span></code>
</dt>
<dd>
<p>The NETCONF RPC timeout (in seconds)</p> </dd> <dt>reboot: <code class="docutils literal notranslate"><span class="pre">False</span></code>
</dt>
<dd>
<p>Whether to reboot the device after the installation is complete.</p> </dd> <dt>no_copy: <code class="docutils literal notranslate"><span class="pre">False</span></code>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code> the software package will not be copied to the remote device.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.junos_install_os salt://images/junos_16_1.tgz reboot=True</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.junos_rpc"> salt.modules.napalm_mod.junos_rpc(cmd=None, dest=None, format=None, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Execute an RPC request on the remote Junos device.</p> <dl> <dt>cmd</dt>
<dd>
<p>The RPC request to the executed. To determine the RPC request, you can check the from the command line of the device, by executing the usual command followed by <code class="docutils literal notranslate"><span class="pre">|</span> <span class="pre">display</span> <span class="pre">xml</span> <span class="pre">rpc</span></code>, e.g., <code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">lldp</span> <span class="pre">neighbors</span> <span class="pre">|</span> <span class="pre">display</span> <span class="pre">xml</span> <span class="pre">rpc</span></code>.</p> </dd> <dt>dest</dt>
<dd>
<p>Destination file where the RPC output is stored. Note that the file will be stored on the Proxy Minion. To push the files to the Master, use <a class="reference internal" href="salt.modules.cp.html#salt.modules.cp.push" title="salt.modules.cp.push"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cp.push</span></code></a> Execution function.</p> </dd> <dt>format: <code class="docutils literal notranslate"><span class="pre">xml</span></code>
</dt>
<dd>
<p>The format in which the RPC reply is received from the device.</p> </dd> <dt>dev_timeout: <code class="docutils literal notranslate"><span class="pre">30</span></code>
</dt>
<dd>
<p>The NETCONF RPC timeout.</p> </dd> <dt>filter</dt>
<dd>
<p>Used with the <code class="docutils literal notranslate"><span class="pre">get-config</span></code> RPC request to filter out the config tree.</p> </dd> <dt>terse: <code class="docutils literal notranslate"><span class="pre">False</span></code>
</dt>
<dd>
<p>Whether to return terse output.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>Some RPC requests may not support this argument.</p> </div> </dd> <dt>interface_name</dt>
<dd>
<p>Name of the interface to query.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.junos_rpc get-lldp-neighbors-information
salt '*' napalm.junos_rpc get-config &lt;configuration&gt;&lt;system&gt;&lt;ntp/&gt;&lt;/system&gt;&lt;/configuration&gt;</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.netmiko_args"> salt.modules.napalm_mod.netmiko_args(**kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Return the key-value arguments used for the authentication arguments for the netmiko module.</p> <p>When running in a non-native NAPALM driver (e.g., <code class="docutils literal notranslate"><span class="pre">panos</span></code>, <cite>f5`</cite>, <code class="docutils literal notranslate"><span class="pre">mos</span></code> - either from <a class="reference external" href="https://github.com/napalm-automation-community">https://github.com/napalm-automation-community</a> or defined in user's own environment, one can specify the Netmiko device type (the <code class="docutils literal notranslate"><span class="pre">device_type</span></code> argument) via the <code class="docutils literal notranslate"><span class="pre">netmiko_device_type_map</span></code> configuration option / Pillar key, e.g.,</p> <pre class="highlight-yaml notranslate" data-language="yaml">netmiko_device_type_map:
  f5: f5_ltm
  dellos10: dell_os10</pre> <p>The configuration above defines the mapping between the NAPALM <code class="docutils literal notranslate"><span class="pre">os</span></code> Grain and the Netmiko <code class="docutils literal notranslate"><span class="pre">device_type</span></code>, e.g., when the NAPALM Grain is <code class="docutils literal notranslate"><span class="pre">f5</span></code>, it would use the <code class="docutils literal notranslate"><span class="pre">f5_ltm</span></code> SSH Netmiko driver to execute commands over SSH on the remote network device.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.netmiko_args</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.netmiko_call"> salt.modules.napalm_mod.netmiko_call(method, *args, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Execute an arbitrary Netmiko method, passing the authentication details from the existing NAPALM connection.</p> <dl class="simple"> <dt>method</dt>
<dd>
<p>The name of the Netmiko method to execute.</p> </dd> <dt>args</dt>
<dd>
<p>List of arguments to send to the Netmiko method specified in <code class="docutils literal notranslate"><span class="pre">method</span></code>.</p> </dd> <dt>kwargs</dt>
<dd>
<p>Key-value arguments to send to the execution function specified in <code class="docutils literal notranslate"><span class="pre">method</span></code>.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.netmiko_call send_command 'show version'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.netmiko_commands"> salt.modules.napalm_mod.netmiko_commands(*commands, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Invoke one or more commands to be executed on the remote device, via Netmiko. Returns a list of strings, with the output from each command.</p> <dl class="simple"> <dt>commands</dt>
<dd>
<p>A list of commands to be executed.</p> </dd> <dt>expect_string</dt>
<dd>
<p>Regular expression pattern to use for determining end of output. If left blank will default to being based on router prompt.</p> </dd> <dt>delay_factor: <code class="docutils literal notranslate"><span class="pre">1</span></code>
</dt>
<dd>
<p>Multiplying factor used to adjust delays (default: <code class="docutils literal notranslate"><span class="pre">1</span></code>).</p> </dd> <dt>max_loops: <code class="docutils literal notranslate"><span class="pre">500</span></code>
</dt>
<dd>
<p>Controls wait time in conjunction with delay_factor. Will default to be based upon self.timeout.</p> </dd> <dt>auto_find_prompt: <code class="docutils literal notranslate"><span class="pre">True</span></code>
</dt>
<dd>
<p>Whether it should try to auto-detect the prompt (default: <code class="docutils literal notranslate"><span class="pre">True</span></code>).</p> </dd> <dt>strip_prompt: <code class="docutils literal notranslate"><span class="pre">True</span></code>
</dt>
<dd>
<p>Remove the trailing router prompt from the output (default: <code class="docutils literal notranslate"><span class="pre">True</span></code>).</p> </dd> <dt>strip_command: <code class="docutils literal notranslate"><span class="pre">True</span></code>
</dt>
<dd>
<p>Remove the echo of the command from the output (default: <code class="docutils literal notranslate"><span class="pre">True</span></code>).</p> </dd> <dt>normalize: <code class="docutils literal notranslate"><span class="pre">True</span></code>
</dt>
<dd>
<p>Ensure the proper enter is sent at end of command (default: <code class="docutils literal notranslate"><span class="pre">True</span></code>).</p> </dd> <dt>use_textfsm: <code class="docutils literal notranslate"><span class="pre">False</span></code>
</dt>
<dd>
<p>Process command output through TextFSM template (default: <code class="docutils literal notranslate"><span class="pre">False</span></code>).</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.netmiko_commands 'show version' 'show interfaces'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.netmiko_config"> salt.modules.napalm_mod.netmiko_config(*config_commands, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Load a list of configuration commands on the remote device, via Netmiko.</p> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>Please remember that <code class="docutils literal notranslate"><span class="pre">netmiko</span></code> does not have any rollback safeguards and any configuration change will be directly loaded into the running config if the platform doesn't have the concept of <code class="docutils literal notranslate"><span class="pre">candidate</span></code> config.</p> <p>On Junos, or other platforms that have this capability, the changes will not be loaded into the running config, and the user must set the <code class="docutils literal notranslate"><span class="pre">commit</span></code> argument to <code class="docutils literal notranslate"><span class="pre">True</span></code> to transfer the changes from the candidate into the running config before exiting.</p> </div> <dl> <dt>config_commands</dt>
<dd>
<p>A list of configuration commands to be loaded on the remote device.</p> </dd> <dt>config_file</dt>
<dd>
<p>Read the configuration commands from a file. The file can equally be a template that can be rendered using the engine of choice (see <code class="docutils literal notranslate"><span class="pre">template_engine</span></code>).</p> <p>This can be specified using the absolute path to the file, or using one of the following URL schemes:</p> <ul class="simple"> <li><p><code class="docutils literal notranslate"><span class="pre">salt://</span></code>, to fetch the file from the Salt fileserver.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">http://</span></code> or <code class="docutils literal notranslate"><span class="pre">https://</span></code></p></li> <li><p><code class="docutils literal notranslate"><span class="pre">ftp://</span></code></p></li> <li><p><code class="docutils literal notranslate"><span class="pre">s3://</span></code></p></li> <li><p><code class="docutils literal notranslate"><span class="pre">swift://</span></code></p></li> </ul> </dd> <dt>exit_config_mode: <code class="docutils literal notranslate"><span class="pre">True</span></code>
</dt>
<dd>
<p>Determines whether or not to exit config mode after complete.</p> </dd> <dt>delay_factor: <code class="docutils literal notranslate"><span class="pre">1</span></code>
</dt>
<dd>
<p>Factor to adjust delays.</p> </dd> <dt>max_loops: <code class="docutils literal notranslate"><span class="pre">150</span></code>
</dt>
<dd>
<p>Controls wait time in conjunction with delay_factor (default: <code class="docutils literal notranslate"><span class="pre">150</span></code>).</p> </dd> <dt>strip_prompt: <code class="docutils literal notranslate"><span class="pre">False</span></code>
</dt>
<dd>
<p>Determines whether or not to strip the prompt (default: <code class="docutils literal notranslate"><span class="pre">False</span></code>).</p> </dd> <dt>strip_command: <code class="docutils literal notranslate"><span class="pre">False</span></code>
</dt>
<dd>
<p>Determines whether or not to strip the command (default: <code class="docutils literal notranslate"><span class="pre">False</span></code>).</p> </dd> <dt>config_mode_command</dt>
<dd>
<p>The command to enter into config mode.</p> </dd> <dt>commit: <code class="docutils literal notranslate"><span class="pre">False</span></code>
</dt>
<dd>
<p>Commit the configuration changes before exiting the config mode. This option is by default disabled, as many platforms don't have this capability natively.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.netmiko_config 'set system ntp peer 1.2.3.4' commit=True
salt '*' napalm.netmiko_config https://bit.ly/2sgljCB</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.netmiko_conn"> salt.modules.napalm_mod.netmiko_conn(**kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Return the connection object with the network device, over Netmiko, passing the authentication details from the existing NAPALM connection.</p> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>This function is not suitable for CLI usage, more rather to be used in various Salt modules.</p> </div> <p>USAGE Example:</p> <pre class="highlight-python notranslate" data-language="python">conn = __salt__['napalm.netmiko_conn']()
res = conn.send_command('show interfaces')
conn.disconnect()</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.netmiko_fun"> salt.modules.napalm_mod.netmiko_fun(fun, *args, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Call an arbitrary function from the <a class="reference internal" href="salt.modules.netmiko_mod.html#module-salt.modules.netmiko_mod" title="salt.modules.netmiko_mod"><code class="xref py py-mod docutils literal notranslate"><span class="pre">Netmiko</span></code></a> module, passing the authentication details from the existing NAPALM connection.</p> <dl class="simple"> <dt>fun</dt>
<dd>
<p>The name of the function from the <a class="reference internal" href="salt.modules.netmiko_mod.html#module-salt.modules.netmiko_mod" title="salt.modules.netmiko_mod"><code class="xref py py-mod docutils literal notranslate"><span class="pre">Netmiko</span></code></a> to invoke.</p> </dd> <dt>args</dt>
<dd>
<p>List of arguments to send to the execution function specified in <code class="docutils literal notranslate"><span class="pre">fun</span></code>.</p> </dd> <dt>kwargs</dt>
<dd>
<p>Key-value arguments to send to the execution function specified in <code class="docutils literal notranslate"><span class="pre">fun</span></code>.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.netmiko_fun send_command 'show version'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.netmiko_multi_call"> salt.modules.napalm_mod.netmiko_multi_call(*methods, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Execute a list of arbitrary Netmiko methods, passing the authentication details from the existing NAPALM connection.</p> <dl class="simple"> <dt>methods</dt>
<dd>
<p>List of dictionaries with the following keys:</p> <ul class="simple"> <li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: the name of the Netmiko function to invoke.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">args</span></code>: list of arguments to send to the <code class="docutils literal notranslate"><span class="pre">name</span></code> method.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">kwargs</span></code>: key-value arguments to send to the <code class="docutils literal notranslate"><span class="pre">name</span></code> method.</p></li> </ul> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.netmiko_multi_call "{'name': 'send_command', 'args': ['show version']}" "{'name': 'send_command', 'args': ['show interfaces']}"</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.nxos_api_config"> salt.modules.napalm_mod.nxos_api_config(commands=None, config_file=None, template_engine='jinja', context=None, defaults=None, saltenv='base', **kwargs)</h3> <dd>
<blockquote> <div>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> </div>
</blockquote> <p>Configures the Nexus switch with the specified commands, via the NX-API.</p> <dl> <dt>commands</dt>
<dd>
<p>The list of configuration commands to load on the Nexus switch.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This argument is ignored when <code class="docutils literal notranslate"><span class="pre">config_file</span></code> is specified.</p> </div> </dd> <dt>config_file</dt>
<dd>
<p>The source file with the configuration commands to be sent to the device.</p> <p>The file can also be a template that can be rendered using the template engine of choice. This can be specified using the absolute path to the file, or using one of the following URL schemes:</p> <ul class="simple"> <li><p><code class="docutils literal notranslate"><span class="pre">salt://</span></code></p></li> <li><p><code class="docutils literal notranslate"><span class="pre">https://</span></code></p></li> <li><p><code class="docutils literal notranslate"><span class="pre">ftp:/</span></code></p></li> <li><p><code class="docutils literal notranslate"><span class="pre">s3:/</span></code></p></li> <li><p><code class="docutils literal notranslate"><span class="pre">swift://</span></code></p></li> </ul> </dd> <dt>template_engine: <code class="docutils literal notranslate"><span class="pre">jinja</span></code>
</dt>
<dd>
<p>The template engine to use when rendering the source file. Default: <code class="docutils literal notranslate"><span class="pre">jinja</span></code>. To simply fetch the file without attempting to render, set this argument to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p> </dd> <dt>context: <code class="docutils literal notranslate"><span class="pre">None</span></code>
</dt>
<dd>
<p>Variables to add to the template context.</p> </dd> <dt>defaults: <code class="docutils literal notranslate"><span class="pre">None</span></code>
</dt>
<dd>
<p>Default values of the <code class="docutils literal notranslate"><span class="pre">context</span></code> dict.</p> </dd> <dt>saltenv: <code class="docutils literal notranslate"><span class="pre">base</span></code>
</dt>
<dd>
<p>Salt fileserver environment from which to retrieve the file. Ignored if <code class="docutils literal notranslate"><span class="pre">config_file</span></code> is not a <code class="docutils literal notranslate"><span class="pre">salt://</span></code> URL.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.nxos_api_config 'spanning-tree mode mstp'
salt '*' napalm.nxos_api_config config_file=https://bit.ly/2LGLcDy context="{'servers': ['1.2.3.4']}"</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.nxos_api_rpc"> salt.modules.napalm_mod.nxos_api_rpc(commands, method='cli', **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Execute an arbitrary RPC request via the Nexus API.</p> <dl class="simple"> <dt>commands</dt>
<dd>
<p>The RPC commands to be executed.</p> </dd> <dt>method: <code class="docutils literal notranslate"><span class="pre">cli</span></code>
</dt>
<dd>
<p>The type of the response, i.e., raw text (<code class="docutils literal notranslate"><span class="pre">cli_ascii</span></code>) or structured document (<code class="docutils literal notranslate"><span class="pre">cli</span></code>). Defaults to <code class="docutils literal notranslate"><span class="pre">cli</span></code> (structured data).</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.nxos_api_rpc 'show version'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.nxos_api_show"> salt.modules.napalm_mod.nxos_api_show(commands, raw_text=True, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Execute one or more show (non-configuration) commands.</p> <dl class="simple"> <dt>commands</dt>
<dd>
<p>The commands to be executed.</p> </dd> <dt>raw_text: <code class="docutils literal notranslate"><span class="pre">True</span></code>
</dt>
<dd>
<p>Whether to return raw text or structured data.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.nxos_api_show 'show version'
salt '*' napalm.nxos_api_show 'show bgp sessions' 'show processes' raw_text=False</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.pyeapi_call"> salt.modules.napalm_mod.pyeapi_call(method, *args, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Invoke an arbitrary method from the <code class="docutils literal notranslate"><span class="pre">pyeapi</span></code> library. This function forwards the existing connection details to the <code class="xref py py-mod docutils literal notranslate"><span class="pre">pyeapi.run_commands</span></code> execution function.</p> <dl class="simple"> <dt>method</dt>
<dd>
<p>The name of the <code class="docutils literal notranslate"><span class="pre">pyeapi</span></code> method to invoke.</p> </dd> <dt>kwargs</dt>
<dd>
<p>Key-value arguments to send to the <code class="docutils literal notranslate"><span class="pre">pyeapi</span></code> method.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.pyeapi_call run_commands 'show version' encoding=text
salt '*' napalm.pyeapi_call get_config as_string=True</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.pyeapi_config"> salt.modules.napalm_mod.pyeapi_config(commands=None, config_file=None, template_engine='jinja', context=None, defaults=None, saltenv='base', **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Configures the Arista switch with the specified commands, via the <code class="docutils literal notranslate"><span class="pre">pyeapi</span></code> library. This function forwards the existing connection details to the <code class="xref py py-mod docutils literal notranslate"><span class="pre">pyeapi.run_commands</span></code> execution function.</p> <dl> <dt>commands</dt>
<dd>
<p>The list of configuration commands to load on the Arista switch.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This argument is ignored when <code class="docutils literal notranslate"><span class="pre">config_file</span></code> is specified.</p> </div> </dd> <dt>config_file</dt>
<dd>
<p>The source file with the configuration commands to be sent to the device.</p> <p>The file can also be a template that can be rendered using the template engine of choice. This can be specified using the absolute path to the file, or using one of the following URL schemes:</p> <ul class="simple"> <li><p><code class="docutils literal notranslate"><span class="pre">salt://</span></code></p></li> <li><p><code class="docutils literal notranslate"><span class="pre">https://</span></code></p></li> <li><p><code class="docutils literal notranslate"><span class="pre">ftp:/</span></code></p></li> <li><p><code class="docutils literal notranslate"><span class="pre">s3:/</span></code></p></li> <li><p><code class="docutils literal notranslate"><span class="pre">swift://</span></code></p></li> </ul> </dd> <dt>template_engine: <code class="docutils literal notranslate"><span class="pre">jinja</span></code>
</dt>
<dd>
<p>The template engine to use when rendering the source file. Default: <code class="docutils literal notranslate"><span class="pre">jinja</span></code>. To simply fetch the file without attempting to render, set this argument to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p> </dd> <dt>context: <code class="docutils literal notranslate"><span class="pre">None</span></code>
</dt>
<dd>
<p>Variables to add to the template context.</p> </dd> <dt>defaults: <code class="docutils literal notranslate"><span class="pre">None</span></code>
</dt>
<dd>
<p>Default values of the <code class="docutils literal notranslate"><span class="pre">context</span></code> dict.</p> </dd> <dt>saltenv: <code class="docutils literal notranslate"><span class="pre">base</span></code>
</dt>
<dd>
<p>Salt fileserver environment from which to retrieve the file. Ignored if <code class="docutils literal notranslate"><span class="pre">config_file</span></code> is not a <code class="docutils literal notranslate"><span class="pre">salt://</span></code> URL.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.pyeapi_config 'ntp server 1.2.3.4'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.pyeapi_conn"> salt.modules.napalm_mod.pyeapi_conn(**kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Return the connection object with the Arista switch, over <code class="docutils literal notranslate"><span class="pre">pyeapi</span></code>, passing the authentication details from the existing NAPALM connection.</p> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>This function is not suitable for CLI usage, more rather to be used in various Salt modules, to reusing the established connection, as in opposite to opening a new connection for each task.</p> </div> <p>Usage example:</p> <pre class="highlight-python notranslate" data-language="python">conn = __salt__['napalm.pyeapi_conn']()
res1 = conn.run_commands('show version')
res2 = conn.get_config(as_string=True)</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.pyeapi_nxos_api_args"> salt.modules.napalm_mod.pyeapi_nxos_api_args(**prev_kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Return the key-value arguments used for the authentication arguments for the <code class="xref py py-mod docutils literal notranslate"><span class="pre">pyeapi</span> <span class="pre">execution</span> <span class="pre">module</span></code>.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.pyeapi_nxos_api_args</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.pyeapi_run_commands"> salt.modules.napalm_mod.pyeapi_run_commands(*commands, **kwargs)</h3> <dd>
<p>Execute a list of commands on the Arista switch, via the <code class="docutils literal notranslate"><span class="pre">pyeapi</span></code> library. This function forwards the existing connection details to the <code class="xref py py-mod docutils literal notranslate"><span class="pre">pyeapi.run_commands</span></code> execution function.</p> <dl class="simple"> <dt>commands</dt>
<dd>
<p>A list of commands to execute.</p> </dd> <dt>encoding: <code class="docutils literal notranslate"><span class="pre">json</span></code>
</dt>
<dd>
<p>The requested encoding of the command output. Valid values for encoding are <code class="docutils literal notranslate"><span class="pre">json</span></code> (default) or <code class="docutils literal notranslate"><span class="pre">text</span></code>.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.pyeapi_run_commands 'show version' encoding=text
salt '*' napalm.pyeapi_run_commands 'show ip bgp neighbors'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.reconnect"> salt.modules.napalm_mod.reconnect(force=False, **kwargs)</h3> <dd>
<p>Reconnect the NAPALM proxy when the connection is dropped by the network device. The connection can be forced to be restarted using the <code class="docutils literal notranslate"><span class="pre">force</span></code> argument.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This function can be used only when running proxy minions.</p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.reconnect
salt '*' napalm.reconnect force=True</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.rpc"> salt.modules.napalm_mod.rpc(command, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>This is a wrapper to execute RPC requests on various network operating systems supported by NAPALM, invoking the following functions for the NAPALM native drivers:</p> <ul class="simple"> <li><p><a class="reference internal" href="#salt.modules.napalm_mod.junos_rpc" title="salt.modules.napalm_mod.junos_rpc"><code class="xref py py-func docutils literal notranslate"><span class="pre">napalm.junos_rpc</span></code></a> for <code class="docutils literal notranslate"><span class="pre">junos</span></code></p></li> <li><p><a class="reference internal" href="#salt.modules.napalm_mod.pyeapi_run_commands" title="salt.modules.napalm_mod.pyeapi_run_commands"><code class="xref py py-func docutils literal notranslate"><span class="pre">napalm.pyeapi_run_commands</span></code></a> for <code class="docutils literal notranslate"><span class="pre">eos</span></code></p></li> <li><p><a class="reference internal" href="#salt.modules.napalm_mod.nxos_api_rpc" title="salt.modules.napalm_mod.nxos_api_rpc"><code class="xref py py-func docutils literal notranslate"><span class="pre">napalm.nxos_api_rpc</span></code></a> for <code class="docutils literal notranslate"><span class="pre">nxos</span></code></p></li> <li><p><a class="reference internal" href="#salt.modules.napalm_mod.netmiko_commands" title="salt.modules.napalm_mod.netmiko_commands"><code class="xref py py-func docutils literal notranslate"><span class="pre">napalm.netmiko_commands</span></code></a> for <code class="docutils literal notranslate"><span class="pre">ios</span></code>, <code class="docutils literal notranslate"><span class="pre">iosxr</span></code>, and <code class="docutils literal notranslate"><span class="pre">nxos_ssh</span></code></p></li> </ul> <dl class="simple"> <dt>command</dt>
<dd>
<p>The RPC command to execute. This depends on the nature of the operating system.</p> </dd> <dt>kwargs</dt>
<dd>
<p>Key-value arguments to be sent to the underlying Execution function.</p> </dd> </dl> <p>The function capabilities are extensible in the user environment via the <code class="docutils literal notranslate"><span class="pre">napalm_rpc_map</span></code> configuration option / Pillar, e.g.,</p> <pre class="highlight-yaml notranslate" data-language="yaml">napalm_rpc_map:
  f5: napalm.netmiko_commands
  panos: panos.call</pre> <p>The mapping above reads: when the NAPALM <code class="docutils literal notranslate"><span class="pre">os</span></code> Grain is <code class="docutils literal notranslate"><span class="pre">f5</span></code>, then call <code class="docutils literal notranslate"><span class="pre">napalm.netmiko_commands</span></code> for RPC requests.</p> <p>By default, if the user does not specify any map, non-native NAPALM drivers will invoke the <code class="docutils literal notranslate"><span class="pre">napalm.netmiko_commands</span></code> Execution function.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.rpc 'show version'
salt '*' napalm.rpc get-interfaces</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.scp_get"> salt.modules.napalm_mod.scp_get(remote_path, local_path='', recursive=False, preserve_times=False, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Transfer files and directories from remote network device to the localhost of the Minion.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This function is only available only when the underlying library <a class="reference external" href="https://github.com/jbardin/scp.py">scp</a> is installed. See <a class="reference internal" href="salt.modules.scp_mod.html#module-salt.modules.scp_mod" title="salt.modules.scp_mod"><code class="xref py py-mod docutils literal notranslate"><span class="pre">scp</span> <span class="pre">module</span></code></a> for more details.</p> </div> <dl class="simple"> <dt>remote_path</dt>
<dd>
<p>Path to retrieve from remote host. Since this is evaluated by scp on the remote host, shell wildcards and environment variables may be used.</p> </dd> <dt>recursive: <code class="docutils literal notranslate"><span class="pre">False</span></code>
</dt>
<dd>
<p>Transfer files and directories recursively.</p> </dd> <dt>preserve_times: <code class="docutils literal notranslate"><span class="pre">False</span></code>
</dt>
<dd>
<p>Preserve <code class="docutils literal notranslate"><span class="pre">mtime</span></code> and <code class="docutils literal notranslate"><span class="pre">atime</span></code> of transferred files and directories.</p> </dd> <dt>passphrase</dt>
<dd>
<p>Used for decrypting private keys.</p> </dd> <dt>pkey</dt>
<dd>
<p>An optional private key to use for authentication.</p> </dd> <dt>key_filename</dt>
<dd>
<p>The filename, or list of filenames, of optional private key(s) and/or certificates to try for authentication.</p> </dd> <dt>timeout</dt>
<dd>
<p>An optional timeout (in seconds) for the TCP connect.</p> </dd> <dt>socket_timeout: <code class="docutils literal notranslate"><span class="pre">10</span></code>
</dt>
<dd>
<p>The channel socket timeout in seconds.</p> </dd> <dt>buff_size: <code class="docutils literal notranslate"><span class="pre">16384</span></code>
</dt>
<dd>
<p>The size of the SCP send buffer.</p> </dd> <dt>allow_agent: <code class="docutils literal notranslate"><span class="pre">True</span></code>
</dt>
<dd>
<p>Set to <code class="docutils literal notranslate"><span class="pre">False</span></code> to disable connecting to the SSH agent.</p> </dd> <dt>look_for_keys: <code class="docutils literal notranslate"><span class="pre">True</span></code>
</dt>
<dd>
<p>Set to <code class="docutils literal notranslate"><span class="pre">False</span></code> to disable searching for discoverable private key files in <code class="docutils literal notranslate"><span class="pre">~/.ssh/</span></code></p> </dd> <dt>banner_timeout</dt>
<dd>
<p>An optional timeout (in seconds) to wait for the SSH banner to be presented.</p> </dd> <dt>auth_timeout</dt>
<dd>
<p>An optional timeout (in seconds) to wait for an authentication response.</p> </dd> <dt>auto_add_policy: <code class="docutils literal notranslate"><span class="pre">False</span></code>
</dt>
<dd>
<p>Automatically add the host to the <code class="docutils literal notranslate"><span class="pre">known_hosts</span></code>.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.scp_get /var/tmp/file /tmp/file auto_add_policy=True</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.napalm_mod.scp_put"> salt.modules.napalm_mod.scp_put(files, remote_path=None, recursive=False, preserve_times=False, saltenv='base', **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Transfer files and directories to remote network device.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This function is only available only when the underlying library <a class="reference external" href="https://github.com/jbardin/scp.py">scp</a> is installed. See <a class="reference internal" href="salt.modules.scp_mod.html#module-salt.modules.scp_mod" title="salt.modules.scp_mod"><code class="xref py py-mod docutils literal notranslate"><span class="pre">scp</span> <span class="pre">module</span></code></a> for more details.</p> </div> <dl class="simple"> <dt>files</dt>
<dd>
<p>A single path or a list of paths to be transferred.</p> </dd> <dt>remote_path</dt>
<dd>
<p>The path on the remote device where to store the files.</p> </dd> <dt>recursive: <code class="docutils literal notranslate"><span class="pre">True</span></code>
</dt>
<dd>
<p>Transfer files and directories recursively.</p> </dd> <dt>preserve_times: <code class="docutils literal notranslate"><span class="pre">False</span></code>
</dt>
<dd>
<p>Preserve <code class="docutils literal notranslate"><span class="pre">mtime</span></code> and <code class="docutils literal notranslate"><span class="pre">atime</span></code> of transferred files and directories.</p> </dd> <dt>saltenv: <code class="docutils literal notranslate"><span class="pre">base</span></code>
</dt>
<dd>
<p>The name of the Salt environment. Ignored when <code class="docutils literal notranslate"><span class="pre">files</span></code> is not a <code class="docutils literal notranslate"><span class="pre">salt://</span></code> URL.</p> </dd> <dt>hostname</dt>
<dd>
<p>The hostname of the remote device.</p> </dd> <dt>port: <code class="docutils literal notranslate"><span class="pre">22</span></code>
</dt>
<dd>
<p>The port of the remote device.</p> </dd> <dt>username</dt>
<dd>
<p>The username required for SSH authentication on the device.</p> </dd> <dt>password</dt>
<dd>
<p>Used for password authentication. It is also used for private key decryption if <code class="docutils literal notranslate"><span class="pre">passphrase</span></code> is not given.</p> </dd> <dt>passphrase</dt>
<dd>
<p>Used for decrypting private keys.</p> </dd> <dt>pkey</dt>
<dd>
<p>An optional private key to use for authentication.</p> </dd> <dt>key_filename</dt>
<dd>
<p>The filename, or list of filenames, of optional private key(s) and/or certificates to try for authentication.</p> </dd> <dt>timeout</dt>
<dd>
<p>An optional timeout (in seconds) for the TCP connect.</p> </dd> <dt>socket_timeout: <code class="docutils literal notranslate"><span class="pre">10</span></code>
</dt>
<dd>
<p>The channel socket timeout in seconds.</p> </dd> <dt>buff_size: <code class="docutils literal notranslate"><span class="pre">16384</span></code>
</dt>
<dd>
<p>The size of the SCP send buffer.</p> </dd> <dt>allow_agent: <code class="docutils literal notranslate"><span class="pre">True</span></code>
</dt>
<dd>
<p>Set to <code class="docutils literal notranslate"><span class="pre">False</span></code> to disable connecting to the SSH agent.</p> </dd> <dt>look_for_keys: <code class="docutils literal notranslate"><span class="pre">True</span></code>
</dt>
<dd>
<p>Set to <code class="docutils literal notranslate"><span class="pre">False</span></code> to disable searching for discoverable private key files in <code class="docutils literal notranslate"><span class="pre">~/.ssh/</span></code></p> </dd> <dt>banner_timeout</dt>
<dd>
<p>An optional timeout (in seconds) to wait for the SSH banner to be presented.</p> </dd> <dt>auth_timeout</dt>
<dd>
<p>An optional timeout (in seconds) to wait for an authentication response.</p> </dd> <dt>auto_add_policy: <code class="docutils literal notranslate"><span class="pre">False</span></code>
</dt>
<dd>
<p>Automatically add the host to the <code class="docutils literal notranslate"><span class="pre">known_hosts</span></code>.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' napalm.scp_put /path/to/file /var/tmp/file auto_add_policy=True</pre> </dd>
</dl> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.napalm_mod.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.napalm_mod.html</a>
  </p>
</div>
