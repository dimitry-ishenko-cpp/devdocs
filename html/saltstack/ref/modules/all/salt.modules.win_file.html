<h1>salt.modules.win_file</h1> <p>Manage information about files on the minion, set/read user, group data, modify the ACL of files/directories</p> <dl class="field-list simple"> <dt class="field-odd">depends</dt> <dd class="field-odd">
<ul class="simple"> <li><p>win32api</p></li> <li><p>win32file</p></li> <li><p>win32con</p></li> <li><p>salt.utils.win_dacl</p></li> </ul> </dd> </dl> <dl class="py exception"> <dt id="salt.modules.win_file.WindowsError"> <em class="property">exception </em><code class="sig-prename descclassname">salt.modules.win_file.</code><code class="sig-name descname">WindowsError</code>
</dt> 
</dl> <dl class="py function"> <h3 id="salt.modules.win_file.check_perms"> salt.modules.win_file.check_perms(path, ret=None, owner=None, grant_perms=None, deny_perms=None, inheritance=True, reset=False)</h3> <dd>
<p>Check owner and permissions for the passed directory. This function checks the permissions and sets them, returning the changes made. Used by the file state to populate the return dict</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The full path to the directory.</p></li> <li><p><strong>ret</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)"><em>dict</em></a>) -- A dictionary to append changes to and return. If not passed, will create a new dictionary to return.</p></li> <li><p><strong>owner</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The owner to set for the directory.</p></li> <li><p><strong>grant_perms</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)"><em>dict</em></a>) -- A dictionary containing the user/group and the basic permissions to check/grant, ie: <code class="docutils literal notranslate"><span class="pre">{'user':</span> <span class="pre">{'perms':</span> <span class="pre">'basic_permission'}}</span></code>. Default is <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li> <li><p><strong>deny_perms</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)"><em>dict</em></a>) -- A dictionary containing the user/group and permissions to check/deny. Default is <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li> <li><p><strong>inheritance</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) -- <code class="docutils literal notranslate"><span class="pre">True</span> <span class="pre">will</span> <span class="pre">check</span> <span class="pre">if</span> <span class="pre">inheritance</span> <span class="pre">is</span> <span class="pre">enabled</span> <span class="pre">and</span> <span class="pre">enable</span> <span class="pre">it.</span> <span class="pre">``False</span></code> will check if inheritance is disabled and disable it. Default is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li> <li><p><strong>reset</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) -- <code class="docutils literal notranslate"><span class="pre">True</span></code> will show what permissions will be removed by resetting the DACL. <code class="docutils literal notranslate"><span class="pre">False</span></code> will do nothing. Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>A dictionary of changes that have been made</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)">dict</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># To see changes to ``C:\Temp`` if the 'Users' group is given 'read &amp; execute' permissions.
salt '*' file.check_perms C:\Temp\ {} Administrators "{'Users': {'perms': 'read_execute'}}"

# Locally using salt call
salt-call file.check_perms C:\Temp\ {} Administrators "{'Users': {'perms': 'read_execute', 'applies_to': 'this_folder_only'}}"

# Specify advanced attributes with a list
salt '*' file.check_perms C:\Temp\ {} Administrators "{'jsnuffy': {'perms': ['read_attributes', 'read_ea'], 'applies_to': 'files_only'}}"</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.win_file.chgrp"> salt.modules.win_file.chgrp(path, group)</h3> <dd>
<p>Change the group of a file</p> <p>Under Windows, this will do nothing.</p> <p>While a file in Windows does have a 'primary group', this rarely used attribute generally has no bearing on permissions unless intentionally configured and is only used to support Unix compatibility features (e.g. Services For Unix, NFS services).</p> <p>Salt, therefore, remaps this function to do nothing while still being compatible with Unix behavior. When managing Windows systems, this function is superfluous and will generate an info level log entry if used directly.</p> <p>If you do actually want to set the 'primary group' of a file, use <code class="docutils literal notranslate"><span class="pre">file</span>
<span class="pre">.chpgrp</span></code>.</p> <p>To set group permissions use <code class="docutils literal notranslate"><span class="pre">file.set_perms</span></code></p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The path to the file or directory</p></li> <li><p><strong>group</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The group (unused)</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>None</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' file.chpgrp c:\temp\test.txt administrators</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.win_file.chown"> salt.modules.win_file.chown(path, user, group=None, pgroup=None, follow_symlinks=True)</h3> <dd>
<p>Chown a file, pass the file the desired user and group</p> <p>Under Windows, the group parameter will be ignored.</p> <p>This is because while files in Windows do have a 'primary group' property, this is rarely used. It generally has no bearing on permissions unless intentionally configured and is most commonly used to provide Unix compatibility (e.g. Services For Unix, NFS services).</p> <p>If you do want to change the 'primary group' property and understand the implications, pass the Windows only parameter, pgroup, instead.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The path to the file or directory</p></li> <li><p><strong>user</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The name of the user to own the file</p></li> <li><p><strong>group</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The group (not used)</p></li> <li><p><strong>pgroup</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The primary group to assign</p></li> <li><p><strong>follow_symlinks</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) -- If the object specified by <code class="docutils literal notranslate"><span class="pre">path</span></code> is a symlink, get attributes of the linked file instead of the symlink itself. Default is True</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>True if successful, otherwise error</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' file.chown c:\temp\test.txt myusername
salt '*' file.chown c:\temp\test.txt myusername pgroup=Administrators
salt '*' file.chown c:\temp\test.txt myusername "pgroup='None'"</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.win_file.chpgrp"> salt.modules.win_file.chpgrp(path, group)</h3> <dd>
<p>Change the group of a file</p> <p>Under Windows, this will set the rarely used primary group of a file. This generally has no bearing on permissions unless intentionally configured and is most commonly used to provide Unix compatibility (e.g. Services For Unix, NFS services).</p> <p>Ensure you know what you are doing before using this function.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The path to the file or directory</p></li> <li><p><strong>pgroup</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The primary group to assign</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>True if successful, otherwise error</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' file.chpgrp c:\temp\test.txt Administrators
salt '*' file.chpgrp c:\temp\test.txt "'None'"</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.win_file.get_attributes"> salt.modules.win_file.get_attributes(path)</h3> <dd>
<p>Return a dictionary object with the Windows file attributes for a file.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The path to the file or directory</p> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>A dictionary of file attributes</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)">dict</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' file.get_attributes c:\temp\a.txt</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.win_file.get_gid"> salt.modules.win_file.get_gid(path, follow_symlinks=True)</h3> <dd>
<p>Return the id of the group that owns a given file</p> <p>Under Windows, this will return the uid of the file.</p> <p>While a file in Windows does have a 'primary group', this rarely used attribute generally has no bearing on permissions unless intentionally configured and is only used to support Unix compatibility features (e.g. Services For Unix, NFS services).</p> <p>Salt, therefore, remaps this function to provide functionality that somewhat resembles Unix behavior for API compatibility reasons. When managing Windows systems, this function is superfluous and will generate an info level log entry if used directly.</p> <p>If you do actually want to access the 'primary group' of a file, use <cite>file.get_pgid</cite>.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The path to the file or directory</p></li> <li><p><strong>follow_symlinks</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) -- If the object specified by <code class="docutils literal notranslate"><span class="pre">path</span></code> is a symlink, get attributes of the linked file instead of the symlink itself. Default is True</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>The gid of the owner</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' file.get_gid c:\temp\test.txt</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.win_file.get_group"> salt.modules.win_file.get_group(path, follow_symlinks=True)</h3> <dd>
<p>Return the group that owns a given file</p> <p>Under Windows, this will return the user (owner) of the file.</p> <p>While a file in Windows does have a 'primary group', this rarely used attribute generally has no bearing on permissions unless intentionally configured and is only used to support Unix compatibility features (e.g. Services For Unix, NFS services).</p> <p>Salt, therefore, remaps this function to provide functionality that somewhat resembles Unix behavior for API compatibility reasons. When managing Windows systems, this function is superfluous and will generate an info level log entry if used directly.</p> <p>If you do actually want to access the 'primary group' of a file, use <cite>file.get_pgroup</cite>.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The path to the file or directory</p></li> <li><p><strong>follow_symlinks</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) -- If the object specified by <code class="docutils literal notranslate"><span class="pre">path</span></code> is a symlink, get attributes of the linked file instead of the symlink itself. Default is True</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>The name of the owner</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' file.get_group c:\temp\test.txt</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.win_file.get_mode"> salt.modules.win_file.get_mode(path)</h3> <dd>
<p>Return the mode of a file</p> <p>Right now we're just returning None because Windows' doesn't have a mode like Linux</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The path to the file or directory</p> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>None</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' file.get_mode /etc/passwd</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.win_file.get_pgid"> salt.modules.win_file.get_pgid(path, follow_symlinks=True)</h3> <dd>
<p>Return the id of the primary group that owns a given file (Windows only)</p> <p>This function will return the rarely used primary group of a file. This generally has no bearing on permissions unless intentionally configured and is most commonly used to provide Unix compatibility (e.g. Services For Unix, NFS services).</p> <p>Ensure you know what you are doing before using this function.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The path to the file or directory</p></li> <li><p><strong>follow_symlinks</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) -- If the object specified by <code class="docutils literal notranslate"><span class="pre">path</span></code> is a symlink, get attributes of the linked file instead of the symlink itself. Default is True</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>The gid of the primary group</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' file.get_pgid c:\temp\test.txt</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.win_file.get_pgroup"> salt.modules.win_file.get_pgroup(path, follow_symlinks=True)</h3> <dd>
<p>Return the name of the primary group that owns a given file (Windows only)</p> <p>This function will return the rarely used primary group of a file. This generally has no bearing on permissions unless intentionally configured and is most commonly used to provide Unix compatibility (e.g. Services For Unix, NFS services).</p> <p>Ensure you know what you are doing before using this function.</p> <p>The return value may be 'None', e.g. if the user is not on a domain. This is a valid group - do not confuse this with the Salt/Python value of None which means no value was returned. To be certain, use the <cite>get_pgid</cite> function which will return the SID, including for the system 'None' group.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The path to the file or directory</p></li> <li><p><strong>follow_symlinks</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) -- If the object specified by <code class="docutils literal notranslate"><span class="pre">path</span></code> is a symlink, get attributes of the linked file instead of the symlink itself. Default is True</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>The name of the primary group</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' file.get_pgroup c:\temp\test.txt</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.win_file.get_uid"> salt.modules.win_file.get_uid(path, follow_symlinks=True)</h3> <dd>
<p>Return the id of the user that owns a given file</p> <p>Symlinks are followed by default to mimic Unix behavior. Specify <cite>follow_symlinks=False</cite> to turn off this behavior.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The path to the file or directory</p></li> <li><p><strong>follow_symlinks</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) -- If the object specified by <code class="docutils literal notranslate"><span class="pre">path</span></code> is a symlink, get attributes of the linked file instead of the symlink itself. Default is True</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>The uid of the owner</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' file.get_uid c:\temp\test.txt
salt '*' file.get_uid c:\temp\test.txt follow_symlinks=False</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.win_file.get_user"> salt.modules.win_file.get_user(path, follow_symlinks=True)</h3> <dd>
<p>Return the user that owns a given file</p> <p>Symlinks are followed by default to mimic Unix behavior. Specify <cite>follow_symlinks=False</cite> to turn off this behavior.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The path to the file or directory</p></li> <li><p><strong>follow_symlinks</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) -- If the object specified by <code class="docutils literal notranslate"><span class="pre">path</span></code> is a symlink, get attributes of the linked file instead of the symlink itself. Default is True</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>The name of the owner</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' file.get_user c:\temp\test.txt
salt '*' file.get_user c:\temp\test.txt follow_symlinks=False</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.win_file.gid_to_group"> salt.modules.win_file.gid_to_group(gid)</h3> <dd>
<p>Convert the group id to the group name on this system</p> <p>Under Windows, because groups are just another ACL entity, this function behaves the same as uid_to_user.</p> <p>For maintaining Windows systems, this function is superfluous and only exists for API compatibility with Unix. Use the uid_to_user function instead; an info level log entry will be generated if this function is used directly.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<p><strong>gid</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The gid of the group</p> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>The name of the group</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' file.gid_to_group S-1-5-21-626487655-2533044672-482107328-1010</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.win_file.group_to_gid"> salt.modules.win_file.group_to_gid(group)</h3> <dd>
<p>Convert the group to the gid on this system</p> <p>Under Windows, because groups are just another ACL entity, this function behaves the same as user_to_uid, except if None is given, '' is returned.</p> <p>For maintaining Windows systems, this function is superfluous and only exists for API compatibility with Unix. Use the user_to_uid function instead; an info level log entry will be generated if this function is used directly.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<p><strong>group</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The name of the group</p> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>The gid of the group</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' file.group_to_gid administrators</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.win_file.is_link"> salt.modules.win_file.is_link(path)</h3> <dd>
<p>Check if the path is a symlink</p> <p>This is only supported on Windows Vista or later.</p> <p>Inline with Unix behavior, this function will raise an error if the path is not a symlink, however, the error raised will be a SaltInvocationError, not an OSError.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The path to a file or directory</p> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>True if path is a symlink, otherwise False</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' file.is_link /path/to/link</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.win_file.lchown"> salt.modules.win_file.lchown(path, user, group=None, pgroup=None)</h3> <dd>
<p>Chown a file, pass the file the desired user and group without following any symlinks.</p> <p>Under Windows, the group parameter will be ignored.</p> <p>This is because while files in Windows do have a 'primary group' property, this is rarely used. It generally has no bearing on permissions unless intentionally configured and is most commonly used to provide Unix compatibility (e.g. Services For Unix, NFS services).</p> <p>If you do want to change the 'primary group' property and understand the implications, pass the Windows only parameter, pgroup, instead.</p> <p>To set the primary group to 'None', it must be specified in quotes. Otherwise Salt will interpret it as the Python value of None and no primary group changes will occur. See the example below.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The path to the file or directory</p></li> <li><p><strong>user</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The name of the user to own the file</p></li> <li><p><strong>group</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The group (not used)</p></li> <li><p><strong>pgroup</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The primary group to assign</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>True if successful, otherwise error</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' file.lchown c:\temp\test.txt myusername
salt '*' file.lchown c:\temp\test.txt myusername pgroup=Administrators
salt '*' file.lchown c:\temp\test.txt myusername "pgroup='None'"</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.win_file.makedirs_"> salt.modules.win_file.makedirs_(path, owner=None, grant_perms=None, deny_perms=None, inheritance=True, reset=False)</h3> <dd>
<p>Ensure that the parent directory containing this path is available.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li>
<p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- </p>
<p>The full path to the directory.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>The path must end with a trailing slash otherwise the directory(s) will be created up to the parent directory. For example if path is <code class="docutils literal notranslate"><span class="pre">C:\temp\test</span></code>, then it would be treated as <code class="docutils literal notranslate"><span class="pre">C:\temp\</span></code> but if the path ends with a trailing slash like <code class="docutils literal notranslate"><span class="pre">C:\temp\test\</span></code>, then it would be treated as <code class="docutils literal notranslate"><span class="pre">C:\temp\test\</span></code>.</p> </div> </li> <li><p><strong>owner</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The owner of the directory. If not passed, it will be the account that created the directory, likely SYSTEM.</p></li> <li>
<p><strong>grant_perms</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)"><em>dict</em></a>) -- </p>
<p>A dictionary containing the user/group and the basic permissions to grant, ie: <code class="docutils literal notranslate"><span class="pre">{'user':</span> <span class="pre">{'perms':</span> <span class="pre">'basic_permission'}}</span></code>. You can also set the <code class="docutils literal notranslate"><span class="pre">applies_to</span></code> setting here. The default is <code class="docutils literal notranslate"><span class="pre">this_folder_subfolders_files</span></code>. Specify another <code class="docutils literal notranslate"><span class="pre">applies_to</span></code> setting like this:</p> <pre class="highlight-yaml notranslate" data-language="yaml">{'user': {'perms': 'full_control', 'applies_to': 'this_folder'}}</pre> <p>To set advanced permissions use a list for the <code class="docutils literal notranslate"><span class="pre">perms</span></code> parameter, ie:</p> <pre class="highlight-yaml notranslate" data-language="yaml">{'user': {'perms': ['read_attributes', 'read_ea'], 'applies_to': 'this_folder'}}</pre> </li> <li><p><strong>deny_perms</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)"><em>dict</em></a>) -- A dictionary containing the user/group and permissions to deny along with the <code class="docutils literal notranslate"><span class="pre">applies_to</span></code> setting. Use the same format used for the <code class="docutils literal notranslate"><span class="pre">grant_perms</span></code> parameter. Remember, deny permissions supersede grant permissions.</p></li> <li><p><strong>inheritance</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) -- If True the object will inherit permissions from the parent, if False, inheritance will be disabled. Inheritance setting will not apply to parent directories if they must be created.</p></li> <li>
<p><strong>reset</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) -- </p>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code> the existing DACL will be cleared and replaced with the settings defined in this function. If <code class="docutils literal notranslate"><span class="pre">False</span></code>, new entries will be appended to the existing DACL. Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.0.</span></p> </div> </li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>True if successful</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></p> </dd> <dt class="field-even">Raises</dt> <dd class="field-even">
<p><a class="reference internal" href="https://docs.saltproject.io/en/latest/ref/internals/salt.exceptions.html#salt.exceptions.CommandExecutionError" title="salt.exceptions.CommandExecutionError"><strong>CommandExecutionError</strong></a> -- If unsuccessful</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># To grant the 'Users' group 'read &amp; execute' permissions.
salt '*' file.makedirs C:\Temp\ Administrators "{'Users': {'perms': 'read_execute'}}"

# Locally using salt call
salt-call file.makedirs C:\Temp\ Administrators "{'Users': {'perms': 'read_execute', 'applies_to': 'this_folder_only'}}"

# Specify advanced attributes with a list
salt '*' file.makedirs C:\Temp\ Administrators "{'jsnuffy': {'perms': ['read_attributes', 'read_ea'], 'applies_to': 'this_folder_only'}}"</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.win_file.makedirs_perms"> salt.modules.win_file.makedirs_perms(path, owner=None, grant_perms=None, deny_perms=None, inheritance=True, reset=True)</h3> <dd>
<p>Set owner and permissions for each directory created.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The full path to the directory.</p></li> <li><p><strong>owner</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The owner of the directory. If not passed, it will be the account that created the directory, likely SYSTEM.</p></li> <li>
<p><strong>grant_perms</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)"><em>dict</em></a>) -- </p>
<p>A dictionary containing the user/group and the basic permissions to grant, ie: <code class="docutils literal notranslate"><span class="pre">{'user':</span> <span class="pre">{'perms':</span> <span class="pre">'basic_permission'}}</span></code>. You can also set the <code class="docutils literal notranslate"><span class="pre">applies_to</span></code> setting here. The default is <code class="docutils literal notranslate"><span class="pre">this_folder_subfolders_files</span></code>. Specify another <code class="docutils literal notranslate"><span class="pre">applies_to</span></code> setting like this:</p> <pre class="highlight-yaml notranslate" data-language="yaml">{'user': {'perms': 'full_control', 'applies_to': 'this_folder'}}</pre> <p>To set advanced permissions use a list for the <code class="docutils literal notranslate"><span class="pre">perms</span></code> parameter, ie:</p> <pre class="highlight-yaml notranslate" data-language="yaml">{'user': {'perms': ['read_attributes', 'read_ea'], 'applies_to': 'this_folder'}}</pre> </li> <li><p><strong>deny_perms</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)"><em>dict</em></a>) -- A dictionary containing the user/group and permissions to deny along with the <code class="docutils literal notranslate"><span class="pre">applies_to</span></code> setting. Use the same format used for the <code class="docutils literal notranslate"><span class="pre">grant_perms</span></code> parameter. Remember, deny permissions supersede grant permissions.</p></li> <li><p><strong>inheritance</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) -- If <code class="docutils literal notranslate"><span class="pre">True</span></code> the object will inherit permissions from the parent, if <code class="docutils literal notranslate"><span class="pre">False</span></code>, inheritance will be disabled. Inheritance setting will not apply to parent directories if they must be created</p></li> <li>
<p><strong>reset</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) -- </p>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code> the existing DACL will be cleared and replaced with the settings defined in this function. If <code class="docutils literal notranslate"><span class="pre">False</span></code>, new entries will be appended to the existing DACL. Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.0.</span></p> </div> </li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>True if successful, otherwise raises an error</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># To grant the 'Users' group 'read &amp; execute' permissions.
salt '*' file.makedirs_perms C:\Temp\ Administrators "{'Users': {'perms': 'read_execute'}}"

# Locally using salt call
salt-call file.makedirs_perms C:\Temp\ Administrators "{'Users': {'perms': 'read_execute', 'applies_to': 'this_folder_only'}}"

# Specify advanced attributes with a list
salt '*' file.makedirs_perms C:\Temp\ Administrators "{'jsnuffy': {'perms': ['read_attributes', 'read_ea'], 'applies_to': 'this_folder_files'}}"</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.win_file.mkdir"> salt.modules.win_file.mkdir(path, owner=None, grant_perms=None, deny_perms=None, inheritance=True, reset=False)</h3> <dd>
<p>Ensure that the directory is available and permissions are set.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The full path to the directory.</p></li> <li><p><strong>owner</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The owner of the directory. If not passed, it will be the account that created the directory, likely SYSTEM</p></li> <li>
<p><strong>grant_perms</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)"><em>dict</em></a>) -- </p>
<p>A dictionary containing the user/group and the basic permissions to grant, ie: <code class="docutils literal notranslate"><span class="pre">{'user':</span> <span class="pre">{'perms':</span> <span class="pre">'basic_permission'}}</span></code>. You can also set the <code class="docutils literal notranslate"><span class="pre">applies_to</span></code> setting here. The default is <code class="docutils literal notranslate"><span class="pre">this_folder_subfolders_files</span></code>. Specify another <code class="docutils literal notranslate"><span class="pre">applies_to</span></code> setting like this:</p> <pre class="highlight-yaml notranslate" data-language="yaml">{'user': {'perms': 'full_control', 'applies_to': 'this_folder'}}</pre> <p>To set advanced permissions use a list for the <code class="docutils literal notranslate"><span class="pre">perms</span></code> parameter, ie:</p> <pre class="highlight-yaml notranslate" data-language="yaml">{'user': {'perms': ['read_attributes', 'read_ea'], 'applies_to': 'this_folder'}}</pre> </li> <li><p><strong>deny_perms</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)"><em>dict</em></a>) -- A dictionary containing the user/group and permissions to deny along with the <code class="docutils literal notranslate"><span class="pre">applies_to</span></code> setting. Use the same format used for the <code class="docutils literal notranslate"><span class="pre">grant_perms</span></code> parameter. Remember, deny permissions supersede grant permissions.</p></li> <li><p><strong>inheritance</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) -- If True the object will inherit permissions from the parent, if <code class="docutils literal notranslate"><span class="pre">False</span></code>, inheritance will be disabled. Inheritance setting will not apply to parent directories if they must be created.</p></li> <li>
<p><strong>reset</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) -- </p>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code> the existing DACL will be cleared and replaced with the settings defined in this function. If <code class="docutils literal notranslate"><span class="pre">False</span></code>, new entries will be appended to the existing DACL. Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.0.</span></p> </div> </li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>True if successful</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></p> </dd> <dt class="field-even">Raises</dt> <dd class="field-even">
<p><a class="reference internal" href="https://docs.saltproject.io/en/latest/ref/internals/salt.exceptions.html#salt.exceptions.CommandExecutionError" title="salt.exceptions.CommandExecutionError"><strong>CommandExecutionError</strong></a> -- If unsuccessful</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># To grant the 'Users' group 'read &amp; execute' permissions.
salt '*' file.mkdir C:\Temp\ Administrators "{'Users': {'perms': 'read_execute'}}"

# Locally using salt call
salt-call file.mkdir C:\Temp\ Administrators "{'Users': {'perms': 'read_execute', 'applies_to': 'this_folder_only'}}"

# Specify advanced attributes with a list
salt '*' file.mkdir C:\Temp\ Administrators "{'jsnuffy': {'perms': ['read_attributes', 'read_ea'], 'applies_to': 'this_folder_only'}}"</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.win_file.readlink"> salt.modules.win_file.readlink(path)</h3> <dd>
<p>Return the path that a symlink points to</p> <p>This is only supported on Windows Vista or later.</p> <p>Inline with Unix behavior, this function will raise an error if the path is not a symlink, however, the error raised will be a SaltInvocationError, not an OSError.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The path to the symlink</p> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>The path that the symlink points to</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' file.readlink /path/to/link</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.win_file.remove"> salt.modules.win_file.remove(path, force=False)</h3> <dd>
<p>Remove the named file or directory</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The path to the file or directory to remove.</p></li> <li><p><strong>force</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) -- Remove even if marked Read-Only. Default is False</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>True if successful, False if unsuccessful</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' file.remove C:\Temp</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.win_file.set_attributes"> salt.modules.win_file.set_attributes(path, archive=None, hidden=None, normal=None, notIndexed=None, readonly=None, system=None, temporary=None)</h3> <dd>
<p>Set file attributes for a file. Note that the normal attribute means that all others are false. So setting it will clear all others.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The path to the file or directory</p></li> <li><p><strong>archive</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) -- Sets the archive attribute. Default is None</p></li> <li><p><strong>hidden</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) -- Sets the hidden attribute. Default is None</p></li> <li><p><strong>normal</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) -- Resets the file attributes. Cannot be used in conjunction with any other attribute. Default is None</p></li> <li><p><strong>notIndexed</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) -- Sets the indexed attribute. Default is None</p></li> <li><p><strong>readonly</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) -- Sets the readonly attribute. Default is None</p></li> <li><p><strong>system</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) -- Sets the system attribute. Default is None</p></li> <li><p><strong>temporary</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) -- Sets the temporary attribute. Default is None</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>True if successful, otherwise False</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' file.set_attributes c:\temp\a.txt normal=True
salt '*' file.set_attributes c:\temp\a.txt readonly=True hidden=True</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.win_file.set_mode"> salt.modules.win_file.set_mode(path, mode)</h3> <dd>
<p>Set the mode of a file</p> <p>This just calls get_mode, which returns None because we don't use mode on Windows</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>path</strong> -- The path to the file or directory</p></li> <li><p><strong>mode</strong> -- The mode (not used)</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>None</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' file.set_mode /etc/passwd 0644</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.win_file.set_perms"> salt.modules.win_file.set_perms(path, grant_perms=None, deny_perms=None, inheritance=True, reset=False)</h3> <dd>
<p>Set permissions for the given path</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The full path to the directory.</p></li> <li>
<p><strong>grant_perms</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)"><em>dict</em></a>) -- </p>
<p>A dictionary containing the user/group and the basic permissions to grant, ie: <code class="docutils literal notranslate"><span class="pre">{'user':</span> <span class="pre">{'perms':</span> <span class="pre">'basic_permission'}}</span></code>. You can also set the <code class="docutils literal notranslate"><span class="pre">applies_to</span></code> setting here. The default for <code class="docutils literal notranslate"><span class="pre">applise_to</span></code> is <code class="docutils literal notranslate"><span class="pre">this_folder_subfolders_files</span></code>. Specify another <code class="docutils literal notranslate"><span class="pre">applies_to</span></code> setting like this:</p> <pre class="highlight-yaml notranslate" data-language="yaml">{'user': {'perms': 'full_control', 'applies_to': 'this_folder'}}</pre> <p>To set advanced permissions use a list for the <code class="docutils literal notranslate"><span class="pre">perms</span></code> parameter, ie:</p> <pre class="highlight-yaml notranslate" data-language="yaml">{'user': {'perms': ['read_attributes', 'read_ea'], 'applies_to': 'this_folder'}}</pre> <p>To see a list of available attributes and applies to settings see the documentation for salt.utils.win_dacl.</p> <p>A value of <code class="docutils literal notranslate"><span class="pre">None</span></code> will make no changes to the <code class="docutils literal notranslate"><span class="pre">grant</span></code> portion of the DACL. Default is <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p> </li> <li>
<p><strong>deny_perms</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)"><em>dict</em></a>) -- </p>
<p>A dictionary containing the user/group and permissions to deny along with the <code class="docutils literal notranslate"><span class="pre">applies_to</span></code> setting. Use the same format used for the <code class="docutils literal notranslate"><span class="pre">grant_perms</span></code> parameter. Remember, deny permissions supersede grant permissions.</p> <p>A value of <code class="docutils literal notranslate"><span class="pre">None</span></code> will make no changes to the <code class="docutils literal notranslate"><span class="pre">deny</span></code> portion of the DACL. Default is <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p> </li> <li><p><strong>inheritance</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) -- If <code class="docutils literal notranslate"><span class="pre">True</span></code> the object will inherit permissions from the parent, if <code class="docutils literal notranslate"><span class="pre">False</span></code>, inheritance will be disabled. Inheritance setting will not apply to parent directories if they must be created. Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li> <li>
<p><strong>reset</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) -- </p>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code> the existing DCL will be cleared and replaced with the settings defined in this function. If <code class="docutils literal notranslate"><span class="pre">False</span></code>, new entries will be appended to the existing DACL. Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.0.</span></p> </div> </li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>True if successful</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></p> </dd> <dt class="field-even">Raises</dt> <dd class="field-even">
<p><a class="reference internal" href="https://docs.saltproject.io/en/latest/ref/internals/salt.exceptions.html#salt.exceptions.CommandExecutionError" title="salt.exceptions.CommandExecutionError"><strong>CommandExecutionError</strong></a> -- If unsuccessful</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># To grant the 'Users' group 'read &amp; execute' permissions.
salt '*' file.set_perms C:\Temp\ "{'Users': {'perms': 'read_execute'}}"

# Locally using salt call
salt-call file.set_perms C:\Temp\ "{'Users': {'perms': 'read_execute', 'applies_to': 'this_folder_only'}}"

# Specify advanced attributes with a list
salt '*' file.set_perms C:\Temp\ "{'jsnuffy': {'perms': ['read_attributes', 'read_ea'], 'applies_to': 'this_folder_only'}}"</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.win_file.stats"> salt.modules.win_file.stats(path, hash_type='sha256', follow_symlinks=True)</h3> <dd>
<p>Return a dict containing the stats about a given file</p> <p>Under Windows, <cite>gid</cite> will equal <cite>uid</cite> and <cite>group</cite> will equal <cite>user</cite>.</p> <p>While a file in Windows does have a 'primary group', this rarely used attribute generally has no bearing on permissions unless intentionally configured and is only used to support Unix compatibility features (e.g. Services For Unix, NFS services).</p> <p>Salt, therefore, remaps these properties to keep some kind of compatibility with Unix behavior. If the 'primary group' is required, it can be accessed in the <cite>pgroup</cite> and <cite>pgid</cite> properties.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The path to the file or directory</p></li> <li><p><strong>hash_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The type of hash to return</p></li> <li><p><strong>follow_symlinks</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) -- If the object specified by <code class="docutils literal notranslate"><span class="pre">path</span></code> is a symlink, get attributes of the linked file instead of the symlink itself. Default is True</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>A dictionary of file/directory stats</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)">dict</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' file.stats /etc/passwd</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.win_file.symlink"> salt.modules.win_file.symlink(src, link)</h3> <dd>
<p>Create a symbolic link to a file</p> <p>This is only supported with Windows Vista or later and must be executed by a user with the SeCreateSymbolicLink privilege.</p> <p>The behavior of this function matches the Unix equivalent, with one exception - invalid symlinks cannot be created. The source path must exist. If it doesn't, an error will be raised.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>src</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The path to a file or directory</p></li> <li><p><strong>link</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The path to the link</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>True if successful, otherwise False</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' file.symlink /path/to/file /path/to/link</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.win_file.uid_to_user"> salt.modules.win_file.uid_to_user(uid)</h3> <dd>
<p>Convert a uid to a user name</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<p><strong>uid</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The user id to lookup</p> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>The name of the user</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' file.uid_to_user S-1-5-21-626487655-2533044672-482107328-1010</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.win_file.user_to_uid"> salt.modules.win_file.user_to_uid(user)</h3> <dd>
<p>Convert user name to a uid</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<p><strong>user</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The user to lookup</p> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>The user id of the user</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' file.user_to_uid myusername</pre> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.win_file.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.win_file.html</a>
  </p>
</div>
