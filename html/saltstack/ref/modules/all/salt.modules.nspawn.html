<h1>salt.modules.nspawn</h1> <p>Manage nspawn containers</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> <p><a class="reference external" href="http://www.freedesktop.org/software/systemd/man/systemd-nspawn.html">systemd-nspawn(1)</a> is a tool used to manage lightweight namespace containers. This execution module provides several functions to help manage these containers.</p> <p>Minions running systemd &gt;= 219 will place new containers in <code class="docutils literal notranslate"><span class="pre">/var/lib/machines</span></code>, while those running systemd &lt; 219 will place them in <code class="docutils literal notranslate"><span class="pre">/var/lib/container</span></code>.</p> <dl class="py function"> <h3 id="salt.modules.nspawn.bootstrap_container"> salt.modules.nspawn.bootstrap_container(name, dist=None, version=None)</h3> <dd>
<p>Bootstrap a container from package servers, if dist is None the os the minion is running as will be created, otherwise the needed bootstrapping tools will need to be available on the host.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion nspawn.bootstrap_container &lt;name&gt;</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.nspawn.bootstrap_salt"> salt.modules.nspawn.bootstrap_salt(name, config=None, approve_key=True, install=True, pub_key=None, priv_key=None, bootstrap_url=None, force_install=False, unconditional_install=False, bootstrap_delay=None, bootstrap_args=None, bootstrap_shell=None)</h3> <dd>
<p>Bootstrap a container from package servers, if dist is None the os the minion is running as will be created, otherwise the needed bootstrapping tools will need to be available on the host.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' nspawn.bootstrap_salt arch1</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.nspawn.copy_to"> salt.modules.nspawn.copy_to(name, source, dest, overwrite=False, makedirs=False)</h3> <dd>
<p>Copy a file from the host into a container</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>Container name</p> </dd> <dt>source</dt>
<dd>
<p>File to be copied to the container</p> </dd> <dt>dest</dt>
<dd>
<p>Destination on the container. Must be an absolute path.</p> </dd> <dt>overwrite<span class="classifier">False</span>
</dt>
<dd>
<p>Unless this option is set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, then if a file exists at the location specified by the <code class="docutils literal notranslate"><span class="pre">dest</span></code> argument, an error will be raised.</p> </dd> </dl> <p>makedirs : False</p> <blockquote> <div>
<p>Create the parent directory on the container if it does not already exist.</p> </div>
</blockquote> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt 'minion' nspawn.copy_to /tmp/foo /root/foo</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.nspawn.disable"> salt.modules.nspawn.disable(name)</h3> <dd>
<p>Set the named container to <em>not</em> be launched at boot</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion nspawn.enable &lt;name&gt;</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.nspawn.enable"> salt.modules.nspawn.enable(name)</h3> <dd>
<p>Set the named container to be launched at boot</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion nspawn.enable &lt;name&gt;</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.nspawn.exists"> salt.modules.nspawn.exists(name)</h3> <dd>
<p>Returns true if the named container exists</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion nspawn.exists &lt;name&gt;</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.nspawn.info"> salt.modules.nspawn.info(name, **kwargs)</h3> <dd>
<p>Return info about a container</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>The container must be running for <code class="docutils literal notranslate"><span class="pre">machinectl</span></code> to gather information about it. If the container is stopped, then this function will start it.</p> </div> <dl class="simple"> <dt>start<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, then the container will be started to retrieve the info. A <code class="docutils literal notranslate"><span class="pre">Started</span></code> key will be in the return data if the container was started.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion nspawn.info arch1
salt myminion nspawn.info arch1 force_start=False</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.nspawn.list_all"> salt.modules.nspawn.list_all()</h3> <dd>
<p>Lists all nspawn containers</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion nspawn.list_all</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.nspawn.list_running"> salt.modules.nspawn.list_running()</h3> <dd>
<p>Lists running nspawn containers</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p><code class="docutils literal notranslate"><span class="pre">nspawn.list</span></code> also works to list running containers</p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion nspawn.list_running
salt myminion nspawn.list</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.nspawn.list_stopped"> salt.modules.nspawn.list_stopped()</h3> <dd>
<p>Lists stopped nspawn containers</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion nspawn.list_stopped</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.nspawn.pid"> salt.modules.nspawn.pid(name)</h3> <dd>
<p>Returns the PID of a container</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>Container name</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion nspawn.pid arch1</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.nspawn.poweroff"> salt.modules.nspawn.poweroff(name)</h3> <dd>
<p>Issue a clean shutdown to the container. Equivalent to running <code class="docutils literal notranslate"><span class="pre">machinectl</span> <span class="pre">poweroff</span></code> on the named container.</p> <p>For convenience, running <code class="docutils literal notranslate"><span class="pre">nspawn.stop``(as</span> <span class="pre">shown</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">CLI</span> <span class="pre">examples</span>
<span class="pre">below)</span> <span class="pre">is</span> <span class="pre">equivalent</span> <span class="pre">to</span> <span class="pre">running</span> <span class="pre">``nspawn.poweroff</span></code>.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p><code class="docutils literal notranslate"><span class="pre">machinectl</span> <span class="pre">poweroff</span></code> is only supported in systemd &gt;= 219. On earlier systemd versions, running this function will simply issue a clean shutdown via <code class="docutils literal notranslate"><span class="pre">systemctl</span></code>.</p> </div> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion nspawn.poweroff arch1
salt myminion nspawn.stop arch1</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.nspawn.pull_dkr"> salt.modules.nspawn.pull_dkr(url, name, index)</h3> <dd>
<p>Execute a <code class="docutils literal notranslate"><span class="pre">machinectl</span> <span class="pre">pull-dkr</span></code> to download a docker image and add it to /var/lib/machines as a new container.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p><strong>Requires systemd &gt;= 219</strong></p> </div> <dl class="simple"> <dt>url</dt>
<dd>
<p>URL from which to download the container</p> </dd> <dt>name</dt>
<dd>
<p>Name for the new container</p> </dd> <dt>index</dt>
<dd>
<p>URL of the Docker index server from which to pull (must be an <code class="docutils literal notranslate"><span class="pre">http://</span></code> or <code class="docutils literal notranslate"><span class="pre">https://</span></code> URL).</p> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion nspawn.pull_dkr centos/centos6 cent6 index=https://get.docker.com
salt myminion nspawn.pull_docker centos/centos6 cent6 index=https://get.docker.com</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.nspawn.pull_raw"> salt.modules.nspawn.pull_raw(url, name, verify=False)</h3> <dd>
<p>Execute a <code class="docutils literal notranslate"><span class="pre">machinectl</span> <span class="pre">pull-raw</span></code> to download a .qcow2 or raw disk image, and add it to /var/lib/machines as a new container.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p><strong>Requires systemd &gt;= 219</strong></p> </div> <dl class="simple"> <dt>url</dt>
<dd>
<p>URL from which to download the container</p> </dd> <dt>name</dt>
<dd>
<p>Name for the new container</p> </dd> <dt>verify<span class="classifier">False</span>
</dt>
<dd>
<p>Perform signature or checksum verification on the container. See the <code class="docutils literal notranslate"><span class="pre">machinectl(1)</span></code> man page (section titled "Image Transfer Commands") for more information on requirements for image verification. To perform signature verification, use <code class="docutils literal notranslate"><span class="pre">verify=signature</span></code>. For checksum verification, use <code class="docutils literal notranslate"><span class="pre">verify=checksum</span></code>. By default, no verification will be performed.</p> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion nspawn.pull_raw http://ftp.halifax.rwth-aachen.de/fedora/linux/releases/21/Cloud/Images/x86_64/Fedora-Cloud-Base-20141203-21.x86_64.raw.xz fedora21</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.nspawn.pull_tar"> salt.modules.nspawn.pull_tar(url, name, verify=False)</h3> <dd>
<p>Execute a <code class="docutils literal notranslate"><span class="pre">machinectl</span> <span class="pre">pull-raw</span></code> to download a .tar container image, and add it to /var/lib/machines as a new container.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p><strong>Requires systemd &gt;= 219</strong></p> </div> <dl class="simple"> <dt>url</dt>
<dd>
<p>URL from which to download the container</p> </dd> <dt>name</dt>
<dd>
<p>Name for the new container</p> </dd> <dt>verify<span class="classifier">False</span>
</dt>
<dd>
<p>Perform signature or checksum verification on the container. See the <code class="docutils literal notranslate"><span class="pre">machinectl(1)</span></code> man page (section titled "Image Transfer Commands") for more information on requirements for image verification. To perform signature verification, use <code class="docutils literal notranslate"><span class="pre">verify=signature</span></code>. For checksum verification, use <code class="docutils literal notranslate"><span class="pre">verify=checksum</span></code>. By default, no verification will be performed.</p> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion nspawn.pull_tar http://foo.domain.tld/containers/archlinux-2015.02.01.tar.gz arch2</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.nspawn.reboot"> salt.modules.nspawn.reboot(name, kill=False)</h3> <dd>
<p>Reboot the container by sending a SIGINT to its init process. Equivalent to running <code class="docutils literal notranslate"><span class="pre">machinectl</span> <span class="pre">reboot</span></code> on the named container.</p> <p>For convenience, running <code class="docutils literal notranslate"><span class="pre">nspawn.restart</span></code> (as shown in the CLI examples below) is equivalent to running <code class="docutils literal notranslate"><span class="pre">nspawn.reboot</span></code>.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p><code class="docutils literal notranslate"><span class="pre">machinectl</span> <span class="pre">reboot</span></code> is only supported in systemd &gt;= 219. On earlier systemd versions, running this function will instead restart the container via <code class="docutils literal notranslate"><span class="pre">systemctl</span></code>.</p> </div> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion nspawn.reboot arch1
salt myminion nspawn.restart arch1</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.nspawn.remove"> salt.modules.nspawn.remove(name, stop=False)</h3> <dd>
<p>Remove the named container</p> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>This function will remove all data associated with the container. It will not, however, remove the btrfs subvolumes created by pulling container images (<a class="reference internal" href="#salt.modules.nspawn.pull_raw" title="salt.modules.nspawn.pull_raw"><code class="xref py py-mod docutils literal notranslate"><span class="pre">nspawn.pull_raw</span></code></a>, <a class="reference internal" href="#salt.modules.nspawn.pull_tar" title="salt.modules.nspawn.pull_tar"><code class="xref py py-mod docutils literal notranslate"><span class="pre">nspawn.pull_tar</span></code></a>, <a class="reference internal" href="#salt.modules.nspawn.pull_dkr" title="salt.modules.nspawn.pull_dkr"><code class="xref py py-mod docutils literal notranslate"><span class="pre">nspawn.pull_dkr</span></code></a>).</p> </div> <dl class="simple"> <dt>stop<span class="classifier">False</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, the container will be destroyed even if it is running/frozen.</p> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' nspawn.remove foo
salt '*' nspawn.remove foo stop=True</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.nspawn.retcode"> salt.modules.nspawn.retcode(name, cmd, no_start=False, preserve_state=True, stdin=None, python_shell=True, output_loglevel='debug', use_vt=False, ignore_retcode=False, keep_env=None)</h3> <dd>
<p>Run <a class="reference internal" href="salt.modules.cmdmod.html#salt.modules.cmdmod.retcode" title="salt.modules.cmdmod.retcode"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cmd.retcode</span></code></a> within a container</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>Name of the container in which to run the command</p> </dd> <dt>cmd</dt>
<dd>
<p>Command to run</p> </dd> <dt>no_start<span class="classifier">False</span>
</dt>
<dd>
<p>If the container is not running, don't start it</p> </dd> <dt>preserve_state<span class="classifier">True</span>
</dt>
<dd>
<p>After running the command, return the container to its previous state</p> </dd> <dt>stdin<span class="classifier">None</span>
</dt>
<dd>
<p>Standard input to be used for the command</p> </dd> <dt>output_loglevel<span class="classifier">debug</span>
</dt>
<dd>
<p>Level at which to log the output from the command. Set to <code class="docutils literal notranslate"><span class="pre">quiet</span></code> to suppress logging.</p> </dd> <dt>use_vt<span class="classifier">False</span>
</dt>
<dd>
<p>Use SaltStack's utils.vt to stream output to console. Assumes <code class="docutils literal notranslate"><span class="pre">output=all</span></code>.</p> </dd> <dt>keep_env<span class="classifier">None</span>
</dt>
<dd>
<p>If not passed, only a sane default PATH environment variable will be set. If <code class="docutils literal notranslate"><span class="pre">True</span></code>, all environment variables from the container's host will be kept. Otherwise, a comma-separated list (or Python list) of environment variable names can be passed, and those environment variables will be kept.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion nspawn.retcode mycontainer 'ip addr show'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.nspawn.run"> salt.modules.nspawn.run(name, cmd, no_start=False, preserve_state=True, stdin=None, python_shell=True, output_loglevel='debug', use_vt=False, ignore_retcode=False, keep_env=None)</h3> <dd>
<p>Run <a class="reference internal" href="salt.modules.cmdmod.html#salt.modules.cmdmod.run" title="salt.modules.cmdmod.run"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cmd.run</span></code></a> within a container</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>Name of the container in which to run the command</p> </dd> <dt>cmd</dt>
<dd>
<p>Command to run</p> </dd> <dt>no_start<span class="classifier">False</span>
</dt>
<dd>
<p>If the container is not running, don't start it</p> </dd> <dt>preserve_state<span class="classifier">True</span>
</dt>
<dd>
<p>After running the command, return the container to its previous state</p> </dd> <dt>stdin<span class="classifier">None</span>
</dt>
<dd>
<p>Standard input to be used for the command</p> </dd> <dt>output_loglevel<span class="classifier">debug</span>
</dt>
<dd>
<p>Level at which to log the output from the command. Set to <code class="docutils literal notranslate"><span class="pre">quiet</span></code> to suppress logging.</p> </dd> <dt>use_vt<span class="classifier">False</span>
</dt>
<dd>
<p>Use SaltStack's utils.vt to stream output to console.</p> </dd> <dt>keep_env<span class="classifier">None</span>
</dt>
<dd>
<p>If not passed, only a sane default PATH environment variable will be set. If <code class="docutils literal notranslate"><span class="pre">True</span></code>, all environment variables from the container's host will be kept. Otherwise, a comma-separated list (or Python list) of environment variable names can be passed, and those environment variables will be kept.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion nspawn.run mycontainer 'ifconfig -a'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.nspawn.run_all"> salt.modules.nspawn.run_all(name, cmd, no_start=False, preserve_state=True, stdin=None, python_shell=True, output_loglevel='debug', use_vt=False, ignore_retcode=False, keep_env=None)</h3> <dd>
<p>Run <a class="reference internal" href="salt.modules.cmdmod.html#salt.modules.cmdmod.run_all" title="salt.modules.cmdmod.run_all"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cmd.run_all</span></code></a> within a container</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>While the command is run within the container, it is initiated from the host. Therefore, the PID in the return dict is from the host, not from the container.</p> </div> <dl class="simple"> <dt>name</dt>
<dd>
<p>Name of the container in which to run the command</p> </dd> <dt>cmd</dt>
<dd>
<p>Command to run</p> </dd> <dt>no_start<span class="classifier">False</span>
</dt>
<dd>
<p>If the container is not running, don't start it</p> </dd> <dt>preserve_state<span class="classifier">True</span>
</dt>
<dd>
<p>After running the command, return the container to its previous state</p> </dd> <dt>stdin<span class="classifier">None</span>
</dt>
<dd>
<p>Standard input to be used for the command</p> </dd> <dt>output_loglevel<span class="classifier">debug</span>
</dt>
<dd>
<p>Level at which to log the output from the command. Set to <code class="docutils literal notranslate"><span class="pre">quiet</span></code> to suppress logging.</p> </dd> <dt>use_vt<span class="classifier">False</span>
</dt>
<dd>
<p>Use SaltStack's utils.vt to stream output to console. Assumes <code class="docutils literal notranslate"><span class="pre">output=all</span></code>.</p> </dd> <dt>keep_env<span class="classifier">None</span>
</dt>
<dd>
<p>If not passed, only a sane default PATH environment variable will be set. If <code class="docutils literal notranslate"><span class="pre">True</span></code>, all environment variables from the container's host will be kept. Otherwise, a comma-separated list (or Python list) of environment variable names can be passed, and those environment variables will be kept.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion nspawn.run_all mycontainer 'ip addr show'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.nspawn.run_stderr"> salt.modules.nspawn.run_stderr(name, cmd, no_start=False, preserve_state=True, stdin=None, python_shell=True, output_loglevel='debug', use_vt=False, ignore_retcode=False, keep_env=None)</h3> <dd>
<p>Run <a class="reference internal" href="salt.modules.cmdmod.html#salt.modules.cmdmod.run_stderr" title="salt.modules.cmdmod.run_stderr"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cmd.run_stderr</span></code></a> within a container</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>Name of the container in which to run the command</p> </dd> <dt>cmd</dt>
<dd>
<p>Command to run</p> </dd> <dt>no_start<span class="classifier">False</span>
</dt>
<dd>
<p>If the container is not running, don't start it</p> </dd> <dt>preserve_state<span class="classifier">True</span>
</dt>
<dd>
<p>After running the command, return the container to its previous state</p> </dd> <dt>stdin<span class="classifier">None</span>
</dt>
<dd>
<p>Standard input to be used for the command</p> </dd> <dt>output_loglevel<span class="classifier">debug</span>
</dt>
<dd>
<p>Level at which to log the output from the command. Set to <code class="docutils literal notranslate"><span class="pre">quiet</span></code> to suppress logging.</p> </dd> <dt>use_vt<span class="classifier">False</span>
</dt>
<dd>
<p>Use SaltStack's utils.vt to stream output to console. Assumes <code class="docutils literal notranslate"><span class="pre">output=all</span></code>.</p> </dd> <dt>keep_env<span class="classifier">None</span>
</dt>
<dd>
<p>If not passed, only a sane default PATH environment variable will be set. If <code class="docutils literal notranslate"><span class="pre">True</span></code>, all environment variables from the container's host will be kept. Otherwise, a comma-separated list (or Python list) of environment variable names can be passed, and those environment variables will be kept.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion nspawn.run_stderr mycontainer 'ip addr show'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.nspawn.run_stdout"> salt.modules.nspawn.run_stdout(name, cmd, no_start=False, preserve_state=True, stdin=None, python_shell=True, output_loglevel='debug', use_vt=False, ignore_retcode=False, keep_env=None)</h3> <dd>
<p>Run <a class="reference internal" href="salt.modules.cmdmod.html#salt.modules.cmdmod.run_stdout" title="salt.modules.cmdmod.run_stdout"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cmd.run_stdout</span></code></a> within a container</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>Name of the container in which to run the command</p> </dd> <dt>cmd</dt>
<dd>
<p>Command to run</p> </dd> <dt>no_start<span class="classifier">False</span>
</dt>
<dd>
<p>If the container is not running, don't start it</p> </dd> <dt>preserve_state<span class="classifier">True</span>
</dt>
<dd>
<p>After running the command, return the container to its previous state</p> </dd> <dt>stdin<span class="classifier">None</span>
</dt>
<dd>
<p>Standard input to be used for the command</p> </dd> <dt>output_loglevel<span class="classifier">debug</span>
</dt>
<dd>
<p>Level at which to log the output from the command. Set to <code class="docutils literal notranslate"><span class="pre">quiet</span></code> to suppress logging.</p> </dd> <dt>use_vt<span class="classifier">False</span>
</dt>
<dd>
<p>Use SaltStack's utils.vt to stream output to console. Assumes <code class="docutils literal notranslate"><span class="pre">output=all</span></code>.</p> </dd> <dt>keep_env<span class="classifier">None</span>
</dt>
<dd>
<p>If not passed, only a sane default PATH environment variable will be set. If <code class="docutils literal notranslate"><span class="pre">True</span></code>, all environment variables from the container's host will be kept. Otherwise, a comma-separated list (or Python list) of environment variable names can be passed, and those environment variables will be kept.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion nspawn.run_stdout mycontainer 'ifconfig -a'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.nspawn.start"> salt.modules.nspawn.start(name)</h3> <dd>
<p>Start the named container</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion nspawn.start &lt;name&gt;</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.nspawn.state"> salt.modules.nspawn.state(name)</h3> <dd>
<p>Return state of container (running or stopped)</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion nspawn.state &lt;name&gt;</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.nspawn.terminate"> salt.modules.nspawn.terminate(name)</h3> <dd>
<p>Kill all processes in the container without issuing a clean shutdown. Equivalent to running <code class="docutils literal notranslate"><span class="pre">machinectl</span> <span class="pre">terminate</span></code> on the named container.</p> <p>For convenience, running <code class="docutils literal notranslate"><span class="pre">nspawn.stop</span></code> and passing <code class="docutils literal notranslate"><span class="pre">kill=True</span></code> (as shown in the CLI examples below) is equivalent to running <code class="docutils literal notranslate"><span class="pre">nspawn.terminate</span></code>.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p><code class="docutils literal notranslate"><span class="pre">machinectl</span> <span class="pre">terminate</span></code> is only supported in systemd &gt;= 219. On earlier systemd versions, running this function will simply issue a clean shutdown via <code class="docutils literal notranslate"><span class="pre">systemctl</span></code>.</p> </div> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion nspawn.terminate arch1
salt myminion nspawn.stop arch1 kill=True</pre> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.nspawn.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.nspawn.html</a>
  </p>
</div>
