<h1>salt.modules.nxos_upgrade</h1> <p>Execution module to upgrade Cisco NX-OS Switches.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3001.</span></p> </div> <dl class="simple"> <dt>This module supports execution using a Proxy Minion or Native Minion:</dt>
<dd>
<ol class="arabic simple"> <li><p>Proxy Minion: Connect over SSH or NX-API HTTP(S). See <a class="reference internal" href="../../proxy/all/salt.proxy.nxos.html#module-salt.proxy.nxos" title="salt.proxy.nxos"><code class="xref py py-mod docutils literal notranslate"><span class="pre">salt.proxy.nxos</span></code></a> for proxy minion setup details.</p></li> <li><p>Native Minion: Connect over NX-API Unix Domain Socket (UDS). Install the minion inside the GuestShell running on the NX-OS device.</p></li> </ol> </dd> </dl> <dl class="field-list simple"> <dt class="field-odd">maturity</dt> <dd class="field-odd">
<p>new</p> </dd> <dt class="field-even">platform</dt> <dd class="field-even">
<p>nxos</p> </dd> <dt class="field-odd">codeauthor</dt> <dd class="field-odd">
<p>Michael G Wiebe</p> </dd> </dl> <div class="admonition note"> <p class="admonition-title">Note</p> <p>To use this module over remote NX-API the feature must be enabled on the NX-OS device by executing <code class="docutils literal notranslate"><span class="pre">feature</span> <span class="pre">nxapi</span></code> in configuration mode.</p> <p>This is not required for NX-API over UDS.</p> <p>Configuration example:</p> <pre class="highlight-bash notranslate" data-language="bash">switch# conf t
switch(config)# feature nxapi</pre> <p>To check that NX-API is properly enabled, execute <code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">nxapi</span></code>.</p> <p>Output example:</p> <pre class="highlight-bash notranslate" data-language="bash">switch# show nxapi
nxapi enabled
HTTPS Listen on port 443</pre> </div> <dl class="py function"> <h3 id="salt.modules.nxos_upgrade.check_upgrade_impact"> salt.modules.nxos_upgrade.check_upgrade_impact(system_image, kickstart_image=None, issu=True, **kwargs)</h3> <dd>
<p>Display upgrade impact information without actually upgrading the device.</p> <dl class="simple"> <dt>system_image (Mandatory Option)</dt>
<dd>
<p>Path on bootflash: to system image upgrade file.</p> </dd> <dt>kickstart_image</dt>
<dd>
<p>Path on bootflash: to kickstart image upgrade file. (Not required if using combined system/kickstart image file) Default: None</p> </dd> <dt>issu</dt>
<dd>
<p>In Service Software Upgrade (non-disruptive). When True, the upgrade will abort if issu is not possible. When False: Force (disruptive) Upgrade/Downgrade. Default: True</p> </dd> <dt>timeout</dt>
<dd>
<p>Timeout in seconds for long running 'install all' impact command. Default: 900</p> </dd> <dt>error_pattern</dt>
<dd>
<p>Use the option to pass in a regular expression to search for in the output of the 'install all impact' command that indicates an error has occurred. This option is only used when proxy minion connection type is ssh and otherwise ignored.</p> </dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt 'n9k' nxos.check_upgrade_impact system_image=nxos.9.2.1.bin
salt 'n7k' nxos.check_upgrade_impact system_image=n7000-s2-dk9.8.1.1.bin \
    kickstart_image=n7000-s2-kickstart.8.1.1.bin issu=False</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.nxos_upgrade.upgrade"> salt.modules.nxos_upgrade.upgrade(system_image, kickstart_image=None, issu=True, **kwargs)</h3> <dd>
<p>Upgrade NX-OS switch.</p> <dl class="simple"> <dt>system_image (Mandatory Option)</dt>
<dd>
<p>Path on bootflash: to system image upgrade file.</p> </dd> <dt>kickstart_image</dt>
<dd>
<p>Path on bootflash: to kickstart image upgrade file. (Not required if using combined system/kickstart image file) Default: None</p> </dd> <dt>issu</dt>
<dd>
<p>Set this option to True when an In Service Software Upgrade or non-disruptive upgrade is required. The upgrade will abort if issu is not possible. Default: True</p> </dd> <dt>timeout</dt>
<dd>
<p>Timeout in seconds for long running 'install all' upgrade command. Default: 900</p> </dd> <dt>error_pattern</dt>
<dd>
<p>Use the option to pass in a regular expression to search for in the output of the 'install all upgrade command that indicates an error has occurred. This option is only used when proxy minion connection type is ssh and otherwise ignored.</p> </dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt 'n9k' nxos.upgrade system_image=nxos.9.2.1.bin
salt 'n7k' nxos.upgrade system_image=n7000-s2-dk9.8.1.1.bin \
    kickstart_image=n7000-s2-kickstart.8.1.1.bin issu=False</pre> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.nxos_upgrade.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.nxos_upgrade.html</a>
  </p>
</div>
