<h1>salt.modules.publish</h1> <p>Publish a command from a minion to a target</p> <dl class="py function"> <h3 id="salt.modules.publish.full_data"> salt.modules.publish.full_data(tgt, fun, arg=None, tgt_type='glob', returner='', timeout=5)</h3> <dd>
<p>Return the full data about the publication, this is invoked in the same way as the publish function</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt system.example.com publish.full_data '*' cmd.run 'ls -la /tmp'</pre> <div class="admonition-attention admonition"> <p class="admonition-title">Attention</p> <p>If you need to pass a value to a function argument and that value contains an equal sign, you <strong>must</strong> include the argument name. For example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' publish.full_data test.kwarg arg='cheese=spam'</pre> </div> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.publish.publish"> salt.modules.publish.publish(tgt, fun, arg=None, tgt_type='glob', returner='', timeout=5, via_master=None)</h3> <dd>
<p>Publish a command from the minion out to other minions.</p> <p>Publications need to be enabled on the Salt master and the minion needs to have permission to publish the command. The Salt master will also prevent a recursive publication loop, this means that a minion cannot command another minion to command another minion as that would create an infinite command loop.</p> <p>The <code class="docutils literal notranslate"><span class="pre">tgt_type</span></code> argument is used to pass a target other than a glob into the execution, the available options are:</p> <ul class="simple"> <li><p>glob</p></li> <li><p>pcre</p></li> <li><p>grain</p></li> <li><p>grain_pcre</p></li> <li><p>pillar</p></li> <li><p>pillar_pcre</p></li> <li><p>ipcidr</p></li> <li><p>range</p></li> <li><p>compound</p></li> </ul> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2017.7.0: </span>The <code class="docutils literal notranslate"><span class="pre">expr_form</span></code> argument has been renamed to <code class="docutils literal notranslate"><span class="pre">tgt_type</span></code>, earlier releases must use <code class="docutils literal notranslate"><span class="pre">expr_form</span></code>.</p> </div> <p>Note that for pillar matches must be exact, both in the pillar matcher and the compound matcher. No globbing is supported.</p> <p>The arguments sent to the minion publish function are separated with commas. This means that for a minion executing a command with multiple args it will look like this:</p> <pre class="highlight-bash notranslate" data-language="bash">salt system.example.com publish.publish '*' user.add 'foo,1020,1020'
salt system.example.com publish.publish 'os:Fedora' network.interfaces '' grain</pre> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt system.example.com publish.publish '*' cmd.run 'ls -la /tmp'</pre> <div class="admonition-attention admonition"> <p class="admonition-title">Attention</p> <p>If you need to pass a value to a function argument and that value contains an equal sign, you <strong>must</strong> include the argument name. For example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' publish.publish test.kwarg arg='cheese=spam'</pre> <p>Multiple keyword arguments should be passed as a list.</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' publish.publish test.kwarg arg="['cheese=spam','spam=cheese']"</pre> </div> <p>When running via salt-call, the <cite>via_master</cite> flag may be set to specific which master the publication should be sent to. Only one master may be specified. If unset, the publication will be sent only to the first master in minion configuration.</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.publish.runner"> salt.modules.publish.runner(fun, arg=None, timeout=5)</h3> <dd>
<p>Execute a runner on the master and return the data from the runner function</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt publish.runner manage.down</pre> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.publish.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.publish.html</a>
  </p>
</div>
