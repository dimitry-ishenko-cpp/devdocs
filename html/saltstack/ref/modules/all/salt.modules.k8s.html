<h1>salt.modules.k8s</h1> <p>Salt module to manage Kubernetes cluster</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.0.</span></p> </div> <p>Roadmap:</p> <ul class="simple"> <li><p>Add creation of K8S objects (pod, rc, service, ...)</p></li> <li><p>Add replace of K8S objects (pod, rc, service, ...)</p></li> <li><p>Add deletion of K8S objects (pod, rc, service, ...)</p></li> <li><p>Add rolling update</p></li> <li><p>Add (auto)scalling</p></li> </ul> <dl class="py function"> <h3 id="salt.modules.k8s.create_namespace"> salt.modules.k8s.create_namespace(name, apiserver_url=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.0.</span></p> </div> <p>Create kubernetes namespace from the name, similar to the functionality added to kubectl since v.1.2.0: .. code-block:: bash</p> <blockquote> <div>
<p>kubectl create namespaces namespace-name</p> </div>
</blockquote> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' k8s.create_namespace namespace_name

salt '*' k8s.create_namespace namespace_name http://kube-master.cluster.local</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.k8s.create_secret"> salt.modules.k8s.create_secret(namespace, name, sources, apiserver_url=None, force=False, update=False, saltenv='base')</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.0.</span></p> </div> <p>Create k8s secrets in the defined namespace from the list of files</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' k8s.create_secret namespace_name secret_name sources

salt '*' k8s.create_secret namespace_name secret_name sources
http://kube-master.cluster.local</pre> <p>sources are either dictionary of {name: path, name1: path} pairs or array of strings defining paths.</p> <p>Example of paths array:</p>  <p>['/full/path/filename', "<a class="reference external" href="file:///full/path/filename.html">file:///full/path/filename</a>", "salt://secret/storage/file.txt", "http://user:password@securesite.com/secret-file.json"]</p> <p>Example of dictionaries:</p>  <p>{"nameit": '/full/path/fiename', name2: "salt://secret/storage/file.txt"}</p> <p>optional parameters accepted:</p> <p>update=[false] default value is false if set to false, and secret is already present on the cluster - warning will be returned and no changes to the secret will be done. In case it is set to "true" and secret is present but data is differ - secret will be updated.</p> <p>force=[true] default value is true if the to False, secret will not be created in case one of the files is not valid kubernetes secret. e.g. capital letters in secret name or _ in case force is set to True, wrong files will be skipped but secret will be created any way.</p> <p>saltenv=['base'] default value is base in case 'salt://' path is used, this parameter can change the visibility of files</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.k8s.delete_secret"> salt.modules.k8s.delete_secret(namespace, name, apiserver_url=None, force=True)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.0.</span></p> </div> <p>Delete kubernetes secret in the defined namespace. Namespace is the mandatory parameter as well as name.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' k8s.delete_secret namespace_name secret_name

salt '*' k8s.delete_secret namespace_name secret_name http://kube-master.cluster.local</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.k8s.get_labels"> salt.modules.k8s.get_labels(node=None, apiserver_url=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.0.</span></p> </div> <p>Get labels from the current node</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' k8s.get_labels
salt '*' k8s.get_labels kube-node.cluster.local http://kube-master.cluster.local</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.k8s.get_namespaces"> salt.modules.k8s.get_namespaces(namespace='', apiserver_url=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.0.</span></p> </div> <p>Get one or all kubernetes namespaces.</p> <p>If namespace parameter is omitted, all namespaces will be returned back to user, similar to following kubectl example:</p> <pre class="highlight-bash notranslate" data-language="bash">kubectl get namespaces -o json</pre> <p>In case namespace is set by user, the output will be similar to the one from kubectl:</p> <pre class="highlight-bash notranslate" data-language="bash">kubectl get namespaces namespace_name -o json</pre> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' k8s.get_namespaces
salt '*' k8s.get_namespaces namespace_name http://kube-master.cluster.local</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.k8s.get_secrets"> salt.modules.k8s.get_secrets(namespace, name='', apiserver_url=None, decode=False, brief=False)</h3> <dd>
<p>Get k8s namespaces</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' k8s.get_secrets namespace_name
salt '*' k8s.get_secrets namespace_name secret_name http://kube-master.cluster.local</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.k8s.label_absent"> salt.modules.k8s.label_absent(name, node=None, apiserver_url=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.0.</span></p> </div> <p>Delete label to the current node</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' k8s.label_absent hw/disktype
salt '*' k8s.label_absent hw/disktype kube-node.cluster.local http://kube-master.cluster.local</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.k8s.label_folder_absent"> salt.modules.k8s.label_folder_absent(name, node=None, apiserver_url=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.0.</span></p> </div> <p>Delete label folder to the current node</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' k8s.label_folder_absent hw
salt '*' k8s.label_folder_absent hw/ kube-node.cluster.local http://kube-master.cluster.local</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.k8s.label_present"> salt.modules.k8s.label_present(name, value, node=None, apiserver_url=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.0.</span></p> </div> <p>Set label to the current node</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' k8s.label_present hw/disktype ssd

salt '*' k8s.label_present hw/disktype ssd kube-node.cluster.local http://kube-master.cluster.local</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.k8s.update_secret"> salt.modules.k8s.update_secret(namespace, name, sources, apiserver_url=None, force=True, saltenv='base')</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.0.</span></p> </div> <p>alias to k8s.create_secret with update=true</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' k8s.update_secret namespace_name secret_name sources [apiserver_url] [force=true] [update=false] [saltenv='base']</pre> <p>sources are either dictionary of {name: path, name1: path} pairs or array of strings defining paths.</p> <p>Example of paths array:</p>  <p>['/full/path/filename', "<a class="reference external" href="file:///full/path/filename.html">file:///full/path/filename</a>", "salt://secret/storage/file.txt", "http://user:password@securesite.com/secret-file.json"]</p> <p>Example of dictionaries:</p>  <p>{"nameit": '/full/path/fiename', name2: "salt://secret/storage/file.txt"}</p> <p>optional parameters accepted:</p> <p>force=[true] default value is true if the to False, secret will not be created in case one of the files is not valid kubernetes secret. e.g. capital letters in secret name or _ in case force is set to True, wrong files will be skipped but secret will be created any way.</p> <p>saltenv=['base'] default value is base in case 'salt://' path is used, this parameter can change the visibility of files</p> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.k8s.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.k8s.html</a>
  </p>
</div>
