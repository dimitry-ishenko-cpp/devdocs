<h1>salt.modules.systemd_service</h1> <p>Provides the service module for systemd</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 0.10.0.</span></p> </div> <div class="admonition important"> <p class="admonition-title">Important</p> <p>If you feel that Salt should be using this module to manage services on a minion, and it is using a different module (or gives an error similar to <em>'service.start' is not available</em>), see <a class="reference internal" href="https://docs.saltproject.io/en/latest/ref/modules/index.html#module-provider-override"><span class="std std-ref">here</span></a>.</p> </div> <div class="admonition important"> <p class="admonition-title">Important</p> <p>This is an implementation of virtual 'service' module. As such, you must call it under the name 'service' and NOT 'systemd'. You can see that also in the examples below.</p> </div> <dl class="py function"> <h3 id="salt.modules.systemd_service.available"> salt.modules.systemd_service.available(name)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 0.10.4.</span></p> </div> <p>Check that the given service is available taking into account template units.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.available sshd</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.systemd_service.disable"> salt.modules.systemd_service.disable(name, no_block=False, root=None, **kwargs)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.12,2016.3.3,2016.11.0: </span>On minions running systemd&gt;=205, <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd-run.html">systemd-run(1)</a> is now used to isolate commands run by this function from the <code class="docutils literal notranslate"><span class="pre">salt-minion</span></code> daemon's control group. This is done to avoid a race condition in cases where the <code class="docutils literal notranslate"><span class="pre">salt-minion</span></code> service is restarted while a service is being modified. If desired, usage of <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd-run.html">systemd-run(1)</a> can be suppressed by setting a <a class="reference internal" href="salt.modules.config.html#salt.modules.config.get" title="salt.modules.config.get"><code class="xref py py-mod docutils literal notranslate"><span class="pre">config</span> <span class="pre">option</span></code></a> called <code class="docutils literal notranslate"><span class="pre">systemd.scope</span></code>, with a value of <code class="docutils literal notranslate"><span class="pre">False</span></code> (no quotes).</p> </div> <p>Disable the named service to not start when the system boots</p> <dl> <dt>no_block<span class="classifier">False</span>
</dt>
<dd>
<p>Set to <code class="docutils literal notranslate"><span class="pre">True</span></code> to start the service using <code class="docutils literal notranslate"><span class="pre">--no-block</span></code>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> </dd> <dt>root</dt>
<dd>
<p>Enable/disable/mask unit files in the specified root directory</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.disable &lt;service name&gt;</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.systemd_service.disabled"> salt.modules.systemd_service.disabled(name, root=None)</h3> <dd>
<p>Return if the named service is disabled from starting on boot</p> <dl class="simple"> <dt>root</dt>
<dd>
<p>Enable/disable/mask unit files in the specified root directory</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.disabled &lt;service name&gt;</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.systemd_service.enable"> salt.modules.systemd_service.enable(name, no_block=False, unmask=False, unmask_runtime=False, root=None, **kwargs)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.12,2016.3.3,2016.11.0: </span>On minions running systemd&gt;=205, <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd-run.html">systemd-run(1)</a> is now used to isolate commands run by this function from the <code class="docutils literal notranslate"><span class="pre">salt-minion</span></code> daemon's control group. This is done to avoid a race condition in cases where the <code class="docutils literal notranslate"><span class="pre">salt-minion</span></code> service is restarted while a service is being modified. If desired, usage of <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd-run.html">systemd-run(1)</a> can be suppressed by setting a <a class="reference internal" href="salt.modules.config.html#salt.modules.config.get" title="salt.modules.config.get"><code class="xref py py-mod docutils literal notranslate"><span class="pre">config</span> <span class="pre">option</span></code></a> called <code class="docutils literal notranslate"><span class="pre">systemd.scope</span></code>, with a value of <code class="docutils literal notranslate"><span class="pre">False</span></code> (no quotes).</p> </div> <p>Enable the named service to start when the system boots</p> <dl> <dt>no_block<span class="classifier">False</span>
</dt>
<dd>
<p>Set to <code class="docutils literal notranslate"><span class="pre">True</span></code> to start the service using <code class="docutils literal notranslate"><span class="pre">--no-block</span></code>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> </dd> <dt>unmask<span class="classifier">False</span>
</dt>
<dd>
<p>Set to <code class="docutils literal notranslate"><span class="pre">True</span></code> to remove an indefinite mask before attempting to enable the service.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0: </span>In previous releases, Salt would simply unmask a service before enabling. This behavior is no longer the default.</p> </div> </dd> <dt>unmask_runtime<span class="classifier">False</span>
</dt>
<dd>
<p>Set to <code class="docutils literal notranslate"><span class="pre">True</span></code> to remove a runtime mask before attempting to enable the service.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0: </span>In previous releases, Salt would simply unmask a service before enabling. This behavior is no longer the default.</p> </div> </dd> <dt>root</dt>
<dd>
<p>Enable/disable/mask unit files in the specified root directory</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.enable &lt;service name&gt;</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.systemd_service.enabled"> salt.modules.systemd_service.enabled(name, root=None, **kwargs)</h3> <dd>
<p>Return if the named service is enabled to start on boot</p> <dl class="simple"> <dt>root</dt>
<dd>
<p>Enable/disable/mask unit files in the specified root directory</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.enabled &lt;service name&gt;</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.systemd_service.execs"> salt.modules.systemd_service.execs(root=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2014.7.0.</span></p> </div> <p>Return a list of all files specified as <code class="docutils literal notranslate"><span class="pre">ExecStart</span></code> for all services.</p> <dl class="simple"> <dt>root</dt>
<dd>
<p>Enable/disable/mask unit files in the specified root directory</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.execs</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.systemd_service.firstboot"> salt.modules.systemd_service.firstboot(locale=None, locale_message=None, keymap=None, timezone=None, hostname=None, machine_id=None, root=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3001.</span></p> </div> <p>Call systemd-firstboot to configure basic settings of the system</p> <dl class="simple"> <dt>locale</dt>
<dd>
<p>Set primary locale (LANG=)</p> </dd> <dt>locale_message</dt>
<dd>
<p>Set message locale (LC_MESSAGES=)</p> </dd> <dt>keymap</dt>
<dd>
<p>Set keymap</p> </dd> <dt>timezone</dt>
<dd>
<p>Set timezone</p> </dd> <dt>hostname</dt>
<dd>
<p>Set host name</p> </dd> <dt>machine_id</dt>
<dd>
<p>Set machine ID</p> </dd> <dt>root</dt>
<dd>
<p>Operate on an alternative filesystem root</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.firstboot keymap=jp locale=en_US.UTF-8</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.systemd_service.force_reload"> salt.modules.systemd_service.force_reload(name, no_block=True, unmask=False, unmask_runtime=False)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.12,2016.3.3,2016.11.0: </span>On minions running systemd&gt;=205, <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd-run.html">systemd-run(1)</a> is now used to isolate commands run by this function from the <code class="docutils literal notranslate"><span class="pre">salt-minion</span></code> daemon's control group. This is done to avoid a race condition in cases where the <code class="docutils literal notranslate"><span class="pre">salt-minion</span></code> service is restarted while a service is being modified. If desired, usage of <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd-run.html">systemd-run(1)</a> can be suppressed by setting a <a class="reference internal" href="salt.modules.config.html#salt.modules.config.get" title="salt.modules.config.get"><code class="xref py py-mod docutils literal notranslate"><span class="pre">config</span> <span class="pre">option</span></code></a> called <code class="docutils literal notranslate"><span class="pre">systemd.scope</span></code>, with a value of <code class="docutils literal notranslate"><span class="pre">False</span></code> (no quotes).</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 0.12.0.</span></p> </div> <p>Force-reload the specified service with systemd</p> <dl> <dt>no_block<span class="classifier">False</span>
</dt>
<dd>
<p>Set to <code class="docutils literal notranslate"><span class="pre">True</span></code> to start the service using <code class="docutils literal notranslate"><span class="pre">--no-block</span></code>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> </dd> <dt>unmask<span class="classifier">False</span>
</dt>
<dd>
<p>Set to <code class="docutils literal notranslate"><span class="pre">True</span></code> to remove an indefinite mask before attempting to force-reload the service.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0: </span>In previous releases, Salt would simply unmask a service before force-reloading. This behavior is no longer the default.</p> </div> </dd> <dt>unmask_runtime<span class="classifier">False</span>
</dt>
<dd>
<p>Set to <code class="docutils literal notranslate"><span class="pre">True</span></code> to remove a runtime mask before attempting to force-reload the service.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0: </span>In previous releases, Salt would simply unmask a service before force-reloading. This behavior is no longer the default.</p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.force_reload &lt;service name&gt;</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.systemd_service.get_all"> salt.modules.systemd_service.get_all(root=None)</h3> <dd>
<p>Return a list of all available services</p> <dl class="simple"> <dt>root</dt>
<dd>
<p>Enable/disable/mask unit files in the specified root directory</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.get_all</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.systemd_service.get_disabled"> salt.modules.systemd_service.get_disabled(root=None)</h3> <dd>
<p>Return a list of all disabled services</p> <dl class="simple"> <dt>root</dt>
<dd>
<p>Enable/disable/mask unit files in the specified root directory</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.get_disabled</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.systemd_service.get_enabled"> salt.modules.systemd_service.get_enabled(root=None)</h3> <dd>
<p>Return a list of all enabled services</p> <dl class="simple"> <dt>root</dt>
<dd>
<p>Enable/disable/mask unit files in the specified root directory</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.get_enabled</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.systemd_service.get_running"> salt.modules.systemd_service.get_running()</h3> <dd>
<p>Return a list of all running services, so far as systemd is concerned</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.get_running</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.systemd_service.get_static"> salt.modules.systemd_service.get_static(root=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.5.</span></p> </div> <p>Return a list of all static services</p> <dl class="simple"> <dt>root</dt>
<dd>
<p>Enable/disable/mask unit files in the specified root directory</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.get_static</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.systemd_service.mask"> salt.modules.systemd_service.mask(name, runtime=False, root=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.5.0.</span></p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.12,2016.3.3,2016.11.0: </span>On minions running systemd&gt;=205, <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd-run.html">systemd-run(1)</a> is now used to isolate commands run by this function from the <code class="docutils literal notranslate"><span class="pre">salt-minion</span></code> daemon's control group. This is done to avoid a race condition in cases where the <code class="docutils literal notranslate"><span class="pre">salt-minion</span></code> service is restarted while a service is being modified. If desired, usage of <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd-run.html">systemd-run(1)</a> can be suppressed by setting a <a class="reference internal" href="salt.modules.config.html#salt.modules.config.get" title="salt.modules.config.get"><code class="xref py py-mod docutils literal notranslate"><span class="pre">config</span> <span class="pre">option</span></code></a> called <code class="docutils literal notranslate"><span class="pre">systemd.scope</span></code>, with a value of <code class="docutils literal notranslate"><span class="pre">False</span></code> (no quotes).</p> </div> <p>Mask the specified service with systemd</p> <dl> <dt>runtime<span class="classifier">False</span>
</dt>
<dd>
<p>Set to <code class="docutils literal notranslate"><span class="pre">True</span></code> to mask this service only until the next reboot</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.5.</span></p> </div> </dd> <dt>root</dt>
<dd>
<p>Enable/disable/mask unit files in the specified root directory</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.mask foo
salt '*' service.mask foo runtime=True</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.systemd_service.masked"> salt.modules.systemd_service.masked(name, runtime=False, root=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.5: </span>The return data for this function has changed. If the service is masked, the return value will now be the output of the <code class="docutils literal notranslate"><span class="pre">systemctl</span>
<span class="pre">is-enabled</span></code> command (so that a persistent mask can be distinguished from a runtime mask). If the service is not masked, then <code class="docutils literal notranslate"><span class="pre">False</span></code> will be returned.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2017.7.0: </span>This function now returns a boolean telling the user whether a mask specified by the new <code class="docutils literal notranslate"><span class="pre">runtime</span></code> argument is set. If <code class="docutils literal notranslate"><span class="pre">runtime</span></code> is <code class="docutils literal notranslate"><span class="pre">False</span></code>, this function will return <code class="docutils literal notranslate"><span class="pre">True</span></code> if an indefinite mask is set for the named service (otherwise <code class="docutils literal notranslate"><span class="pre">False</span></code> will be returned). If <code class="docutils literal notranslate"><span class="pre">runtime</span></code> is <code class="docutils literal notranslate"><span class="pre">False</span></code>, this function will return <code class="docutils literal notranslate"><span class="pre">True</span></code> if a runtime mask is set, otherwise <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p> </div> <p>Check whether or not a service is masked</p> <dl> <dt>runtime<span class="classifier">False</span>
</dt>
<dd>
<p>Set to <code class="docutils literal notranslate"><span class="pre">True</span></code> to check for a runtime mask</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0: </span>In previous versions, this function would simply return the output of <code class="docutils literal notranslate"><span class="pre">systemctl</span> <span class="pre">is-enabled</span></code> when the service was found to be masked. However, since it is possible to both have both indefinite and runtime masks on a service simultaneously, this function now only checks for runtime masks if this argument is set to <code class="docutils literal notranslate"><span class="pre">True</span></code>. Otherwise, it will check for an indefinite mask.</p> </div> </dd> <dt>root</dt>
<dd>
<p>Enable/disable/mask unit files in the specified root directory</p> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.masked foo
salt '*' service.masked foo runtime=True</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.systemd_service.missing"> salt.modules.systemd_service.missing(name)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2014.1.0.</span></p> </div> <p>The inverse of <code class="xref py py-func docutils literal notranslate"><span class="pre">service.available</span></code>. Returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if the specified service is not available, otherwise returns <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.missing sshd</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.systemd_service.reload_"> salt.modules.systemd_service.reload_(name, no_block=False, unmask=False, unmask_runtime=False)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.12,2016.3.3,2016.11.0: </span>On minions running systemd&gt;=205, <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd-run.html">systemd-run(1)</a> is now used to isolate commands run by this function from the <code class="docutils literal notranslate"><span class="pre">salt-minion</span></code> daemon's control group. This is done to avoid a race condition in cases where the <code class="docutils literal notranslate"><span class="pre">salt-minion</span></code> service is restarted while a service is being modified. If desired, usage of <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd-run.html">systemd-run(1)</a> can be suppressed by setting a <a class="reference internal" href="salt.modules.config.html#salt.modules.config.get" title="salt.modules.config.get"><code class="xref py py-mod docutils literal notranslate"><span class="pre">config</span> <span class="pre">option</span></code></a> called <code class="docutils literal notranslate"><span class="pre">systemd.scope</span></code>, with a value of <code class="docutils literal notranslate"><span class="pre">False</span></code> (no quotes).</p> </div> <p>Reload the specified service with systemd</p> <dl> <dt>no_block<span class="classifier">False</span>
</dt>
<dd>
<p>Set to <code class="docutils literal notranslate"><span class="pre">True</span></code> to reload the service using <code class="docutils literal notranslate"><span class="pre">--no-block</span></code>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> </dd> <dt>unmask<span class="classifier">False</span>
</dt>
<dd>
<p>Set to <code class="docutils literal notranslate"><span class="pre">True</span></code> to remove an indefinite mask before attempting to reload the service.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0: </span>In previous releases, Salt would simply unmask a service before reloading. This behavior is no longer the default.</p> </div> </dd> <dt>unmask_runtime<span class="classifier">False</span>
</dt>
<dd>
<p>Set to <code class="docutils literal notranslate"><span class="pre">True</span></code> to remove a runtime mask before attempting to reload the service.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0: </span>In previous releases, Salt would simply unmask a service before reloading. This behavior is no longer the default.</p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.reload &lt;service name&gt;</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.systemd_service.restart"> salt.modules.systemd_service.restart(name, no_block=False, unmask=False, unmask_runtime=False)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.12,2016.3.3,2016.11.0: </span>On minions running systemd&gt;=205, <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd-run.html">systemd-run(1)</a> is now used to isolate commands run by this function from the <code class="docutils literal notranslate"><span class="pre">salt-minion</span></code> daemon's control group. This is done to avoid a race condition in cases where the <code class="docutils literal notranslate"><span class="pre">salt-minion</span></code> service is restarted while a service is being modified. If desired, usage of <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd-run.html">systemd-run(1)</a> can be suppressed by setting a <a class="reference internal" href="salt.modules.config.html#salt.modules.config.get" title="salt.modules.config.get"><code class="xref py py-mod docutils literal notranslate"><span class="pre">config</span> <span class="pre">option</span></code></a> called <code class="docutils literal notranslate"><span class="pre">systemd.scope</span></code>, with a value of <code class="docutils literal notranslate"><span class="pre">False</span></code> (no quotes).</p> </div> <p>Restart the specified service with systemd</p> <dl> <dt>no_block<span class="classifier">False</span>
</dt>
<dd>
<p>Set to <code class="docutils literal notranslate"><span class="pre">True</span></code> to start the service using <code class="docutils literal notranslate"><span class="pre">--no-block</span></code>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> </dd> <dt>unmask<span class="classifier">False</span>
</dt>
<dd>
<p>Set to <code class="docutils literal notranslate"><span class="pre">True</span></code> to remove an indefinite mask before attempting to restart the service.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0: </span>In previous releases, Salt would simply unmask a service before restarting. This behavior is no longer the default.</p> </div> </dd> <dt>unmask_runtime<span class="classifier">False</span>
</dt>
<dd>
<p>Set to <code class="docutils literal notranslate"><span class="pre">True</span></code> to remove a runtime mask before attempting to restart the service.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0: </span>In previous releases, Salt would simply unmask a service before restarting. This behavior is no longer the default.</p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.restart &lt;service name&gt;</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.systemd_service.show"> salt.modules.systemd_service.show(name, root=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2014.7.0.</span></p> </div> <p>Show properties of one or more units/jobs or the manager</p> <dl class="simple"> <dt>root</dt>
<dd>
<p>Enable/disable/mask unit files in the specified root directory</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.show &lt;service name&gt;</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.systemd_service.start"> salt.modules.systemd_service.start(name, no_block=False, unmask=False, unmask_runtime=False)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.12,2016.3.3,2016.11.0: </span>On minions running systemd&gt;=205, <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd-run.html">systemd-run(1)</a> is now used to isolate commands run by this function from the <code class="docutils literal notranslate"><span class="pre">salt-minion</span></code> daemon's control group. This is done to avoid a race condition in cases where the <code class="docutils literal notranslate"><span class="pre">salt-minion</span></code> service is restarted while a service is being modified. If desired, usage of <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd-run.html">systemd-run(1)</a> can be suppressed by setting a <a class="reference internal" href="salt.modules.config.html#salt.modules.config.get" title="salt.modules.config.get"><code class="xref py py-mod docutils literal notranslate"><span class="pre">config</span> <span class="pre">option</span></code></a> called <code class="docutils literal notranslate"><span class="pre">systemd.scope</span></code>, with a value of <code class="docutils literal notranslate"><span class="pre">False</span></code> (no quotes).</p> </div> <p>Start the specified service with systemd</p> <dl> <dt>no_block<span class="classifier">False</span>
</dt>
<dd>
<p>Set to <code class="docutils literal notranslate"><span class="pre">True</span></code> to start the service using <code class="docutils literal notranslate"><span class="pre">--no-block</span></code>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> </dd> <dt>unmask<span class="classifier">False</span>
</dt>
<dd>
<p>Set to <code class="docutils literal notranslate"><span class="pre">True</span></code> to remove an indefinite mask before attempting to start the service.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0: </span>In previous releases, Salt would simply unmask a service before starting. This behavior is no longer the default.</p> </div> </dd> <dt>unmask_runtime<span class="classifier">False</span>
</dt>
<dd>
<p>Set to <code class="docutils literal notranslate"><span class="pre">True</span></code> to remove a runtime mask before attempting to start the service.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0: </span>In previous releases, Salt would simply unmask a service before starting. This behavior is no longer the default.</p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.start &lt;service name&gt;</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.systemd_service.status"> salt.modules.systemd_service.status(name, sig=None)</h3> <dd>
<p>Return the status for a service via systemd. If the name contains globbing, a dict mapping service name to True/False values is returned.</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2018.3.0: </span>The service name can now be a glob (e.g. <code class="docutils literal notranslate"><span class="pre">salt*</span></code>)</p> </div> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- The name of the service to check</p></li> <li><p><strong>sig</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) -- Not implemented</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>True if running, False otherwise dict: Maps service name to True if running, False otherwise</p> </dd> <dt class="field-odd">Return type</dt> <dd class="field-odd">
<p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.status &lt;service name&gt; [service signature]</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.systemd_service.stop"> salt.modules.systemd_service.stop(name, no_block=False)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.12,2016.3.3,2016.11.0: </span>On minions running systemd&gt;=205, <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd-run.html">systemd-run(1)</a> is now used to isolate commands run by this function from the <code class="docutils literal notranslate"><span class="pre">salt-minion</span></code> daemon's control group. This is done to avoid a race condition in cases where the <code class="docutils literal notranslate"><span class="pre">salt-minion</span></code> service is restarted while a service is being modified. If desired, usage of <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd-run.html">systemd-run(1)</a> can be suppressed by setting a <a class="reference internal" href="salt.modules.config.html#salt.modules.config.get" title="salt.modules.config.get"><code class="xref py py-mod docutils literal notranslate"><span class="pre">config</span> <span class="pre">option</span></code></a> called <code class="docutils literal notranslate"><span class="pre">systemd.scope</span></code>, with a value of <code class="docutils literal notranslate"><span class="pre">False</span></code> (no quotes).</p> </div> <p>Stop the specified service with systemd</p> <dl> <dt>no_block<span class="classifier">False</span>
</dt>
<dd>
<p>Set to <code class="docutils literal notranslate"><span class="pre">True</span></code> to start the service using <code class="docutils literal notranslate"><span class="pre">--no-block</span></code>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.stop &lt;service name&gt;</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.systemd_service.systemctl_reload"> salt.modules.systemd_service.systemctl_reload()</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 0.15.0.</span></p> </div> <p>Reloads systemctl, an action needed whenever unit files are updated.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.systemctl_reload</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.systemd_service.unmask_"> salt.modules.systemd_service.unmask_(name, runtime=False, root=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.5.0.</span></p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.12,2016.3.3,2016.11.0: </span>On minions running systemd&gt;=205, <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd-run.html">systemd-run(1)</a> is now used to isolate commands run by this function from the <code class="docutils literal notranslate"><span class="pre">salt-minion</span></code> daemon's control group. This is done to avoid a race condition in cases where the <code class="docutils literal notranslate"><span class="pre">salt-minion</span></code> service is restarted while a service is being modified. If desired, usage of <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd-run.html">systemd-run(1)</a> can be suppressed by setting a <a class="reference internal" href="salt.modules.config.html#salt.modules.config.get" title="salt.modules.config.get"><code class="xref py py-mod docutils literal notranslate"><span class="pre">config</span> <span class="pre">option</span></code></a> called <code class="docutils literal notranslate"><span class="pre">systemd.scope</span></code>, with a value of <code class="docutils literal notranslate"><span class="pre">False</span></code> (no quotes).</p> </div> <p>Unmask the specified service with systemd</p> <dl> <dt>runtime<span class="classifier">False</span>
</dt>
<dd>
<p>Set to <code class="docutils literal notranslate"><span class="pre">True</span></code> to unmask this service only until the next reboot</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0: </span>In previous versions, this function would remove whichever mask was identified by running <code class="docutils literal notranslate"><span class="pre">systemctl</span> <span class="pre">is-enabled</span></code> on the service. However, since it is possible to both have both indefinite and runtime masks on a service simultaneously, this function now removes a runtime mask only when this argument is set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, and otherwise removes an indefinite mask.</p> </div> </dd> <dt>root</dt>
<dd>
<p>Enable/disable/mask unit files in the specified root directory</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' service.unmask foo
salt '*' service.unmask foo runtime=True</pre> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.systemd_service.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.systemd_service.html</a>
  </p>
</div>
