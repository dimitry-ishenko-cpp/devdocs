<h1>salt.modules.kubeadm</h1> <dl class="field-list simple"> <dt class="field-odd">maintainer</dt> <dd class="field-odd">
<p>Alberto Planas &lt;<a class="reference external" href="mailto:aplanas%40suse.com.html">aplanas<span>@</span>suse<span>.</span>com</a>&gt;</p> </dd> <dt class="field-even">maturity</dt> <dd class="field-even">
<p>new</p> </dd> <dt class="field-odd">depends</dt> <dd class="field-odd">
<p>None</p> </dd> <dt class="field-even">platform</dt> <dd class="field-even">
<p>Linux</p> </dd> </dl> <dl class="py function"> <h3 id="salt.modules.kubeadm.alpha_certs_renew"> salt.modules.kubeadm.alpha_certs_renew(rootfs=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3001.</span></p> </div> <p>Renews certificates for a Kubernetes cluster</p> <dl class="simple"> <dt>rootfs</dt>
<dd>
<p>The path to the real host root filesystem</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' kubeadm.alpha_certs_renew</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.kubeadm.alpha_kubeconfig_user"> salt.modules.kubeadm.alpha_kubeconfig_user(client_name, apiserver_advertise_address=None, apiserver_bind_port=None, cert_dir=None, org=None, token=None, rootfs=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3001.</span></p> </div> <p>Outputs a kubeconfig file for an additional user</p> <dl class="simple"> <dt>client_name</dt>
<dd>
<p>The name of the user. It will be used as the CN if client certificates are created</p> </dd> <dt>apiserver_advertise_address</dt>
<dd>
<p>The IP address the API server is accessible on</p> </dd> <dt>apiserver_bind_port</dt>
<dd>
<p>The port the API server is accessible on (default 6443)</p> </dd> <dt>cert_dir</dt>
<dd>
<p>The path where certificates are stored (default "/etc/kubernetes/pki")</p> </dd> <dt>org</dt>
<dd>
<p>The organization of the client certificate</p> </dd> <dt>token</dt>
<dd>
<p>The token that show be used as the authentication mechanism for this kubeconfig, instead of client certificates</p> </dd> <dt>rootfs</dt>
<dd>
<p>The path to the real host root filesystem</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' kubeadm.alpha_kubeconfig_user client_name=user</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.kubeadm.alpha_kubelet_config_download"> salt.modules.kubeadm.alpha_kubelet_config_download(kubeconfig=None, kubelet_version=None, rootfs=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3001.</span></p> </div> <p>Downloads the kubelet configuration from the cluster ConfigMap kubelet-config-1.X</p> <dl class="simple"> <dt>kubeconfig</dt>
<dd>
<p>The kubeconfig file to use when talking to the cluster. The default values in /etc/kubernetes/admin.conf</p> </dd> <dt>kubelet_version</dt>
<dd>
<p>The desired version for the kubelet</p> </dd> <dt>rootfs</dt>
<dd>
<p>The path to the real host root filesystem</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' kubeadm.alpha_kubelet_config_download
salt '*' kubeadm.alpha_kubelet_config_download kubelet_version='1.14.0'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.kubeadm.alpha_kubelet_config_enable_dynamic"> salt.modules.kubeadm.alpha_kubelet_config_enable_dynamic(node_name, kubeconfig=None, kubelet_version=None, rootfs=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3001.</span></p> </div> <p>Enables or updates dynamic kubelet configuration for a node</p> <dl class="simple"> <dt>node_name</dt>
<dd>
<p>Name of the node that should enable the dynamic kubelet configuration</p> </dd> <dt>kubeconfig</dt>
<dd>
<p>The kubeconfig file to use when talking to the cluster. The default values in /etc/kubernetes/admin.conf</p> </dd> <dt>kubelet_version</dt>
<dd>
<p>The desired version for the kubelet</p> </dd> <dt>rootfs</dt>
<dd>
<p>The path to the real host root filesystem</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' kubeadm.alpha_kubelet_config_enable_dynamic node-1</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.kubeadm.alpha_selfhosting_pivot"> salt.modules.kubeadm.alpha_selfhosting_pivot(cert_dir=None, config=None, kubeconfig=None, store_certs_in_secrets=False, rootfs=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3001.</span></p> </div> <p>Converts a static Pod-hosted control plane into a selt-hosted one</p> <dl class="simple"> <dt>cert_dir</dt>
<dd>
<p>The path where certificates are stored (default "/etc/kubernetes/pki")</p> </dd> <dt>config</dt>
<dd>
<p>Path to kubeadm configuration file</p> </dd> <dt>kubeconfig</dt>
<dd>
<p>The kubeconfig file to use when talking to the cluster. The default values in /etc/kubernetes/admin.conf</p> </dd> <dt>store_certs_in_secrets</dt>
<dd>
<p>Enable storing certs in secrets</p> </dd> <dt>rootfs</dt>
<dd>
<p>The path to the real host root filesystem</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' kubeadm.alpha_selfhost_pivot</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.kubeadm.config_images_list"> salt.modules.kubeadm.config_images_list(config=None, feature_gates=None, kubernetes_version=None, kubeconfig=None, rootfs=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3001.</span></p> </div> <p>Print a list of images kubeadm will use</p> <dl class="simple"> <dt>config</dt>
<dd>
<p>Path to kubeadm configuration file</p> </dd> <dt>feature_gates</dt>
<dd>
<p>A set of key=value pairs that describe feature gates for various features</p> </dd> <dt>kubernetes_version</dt>
<dd>
<p>Choose a specifig Kubernetes version for the control plane (default "stable-1")</p> </dd> <dt>kubeconfig</dt>
<dd>
<p>The kubeconfig file to use when talking to the cluster. The default values in /etc/kubernetes/admin.conf</p> </dd> <dt>rootfs</dt>
<dd>
<p>The path to the real host root filesystem</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' kubeadm.config_images_list</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.kubeadm.config_images_pull"> salt.modules.kubeadm.config_images_pull(config=None, cri_socket=None, feature_gates=None, kubernetes_version=None, kubeconfig=None, rootfs=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3001.</span></p> </div> <p>Pull images used by kubeadm</p> <dl class="simple"> <dt>config</dt>
<dd>
<p>Path to kubeadm configuration file</p> </dd> <dt>cri_socket</dt>
<dd>
<p>Path to the CRI socket to connect</p> </dd> <dt>feature_gates</dt>
<dd>
<p>A set of key=value pairs that describe feature gates for various features</p> </dd> <dt>kubernetes_version</dt>
<dd>
<p>Choose a specifig Kubernetes version for the control plane (default "stable-1")</p> </dd> <dt>kubeconfig</dt>
<dd>
<p>The kubeconfig file to use when talking to the cluster. The default values in /etc/kubernetes/admin.conf</p> </dd> <dt>rootfs</dt>
<dd>
<p>The path to the real host root filesystem</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' kubeadm.config_images_pull</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.kubeadm.config_migrate"> salt.modules.kubeadm.config_migrate(old_config, new_config=None, kubeconfig=None, rootfs=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3001.</span></p> </div> <p>Read an older version of the kubeadm configuration API types from a file, and output the similar config object for the newer version</p> <dl class="simple"> <dt>old_config</dt>
<dd>
<p>Path to the kubeadm config file that is usin the old API version and should be converted</p> </dd> <dt>new_config</dt>
<dd>
<p>Path to the resulting equivalent kubeadm config file using the new API version. If not specified the output will be returned</p> </dd> <dt>kubeconfig</dt>
<dd>
<p>The kubeconfig file to use when talking to the cluster. The default values in /etc/kubernetes/admin.conf</p> </dd> <dt>rootfs</dt>
<dd>
<p>The path to the real host root filesystem</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' kubeadm.config_migrate /oldconfig.cfg</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.kubeadm.config_print_init_defaults"> salt.modules.kubeadm.config_print_init_defaults(component_configs=None, kubeconfig=None, rootfs=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3001.</span></p> </div> <p>Return default init configuration, that can be used for 'kubeadm init'</p> <dl class="simple"> <dt>component_config</dt>
<dd>
<p>A comma-separated list for component config API object to print the default values for (valid values: KubeProxyConfiguration, KubeletConfiguration)</p> </dd> <dt>kubeconfig</dt>
<dd>
<p>The kubeconfig file to use when talking to the cluster. The default values in /etc/kubernetes/admin.conf</p> </dd> <dt>rootfs</dt>
<dd>
<p>The path to the real host root filesystem</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' kubeadm.config_print_init_defaults</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.kubeadm.config_print_join_defaults"> salt.modules.kubeadm.config_print_join_defaults(component_configs=None, kubeconfig=None, rootfs=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3001.</span></p> </div> <p>Return default join configuration, that can be used for 'kubeadm join'</p> <dl class="simple"> <dt>component_config</dt>
<dd>
<p>A comma-separated list for component config API object to print the default values for (valid values: KubeProxyConfiguration, KubeletConfiguration)</p> </dd> <dt>kubeconfig</dt>
<dd>
<p>The kubeconfig file to use when talking to the cluster. The default values in /etc/kubernetes/admin.conf</p> </dd> <dt>rootfs</dt>
<dd>
<p>The path to the real host root filesystem</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' kubeadm.config_print_join_defaults</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.kubeadm.config_upload_from_file"> salt.modules.kubeadm.config_upload_from_file(config, kubeconfig=None, rootfs=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3001.</span></p> </div> <p>Upload a configuration file to the in-cluster ConfigMap for kubeadm configuration</p> <dl class="simple"> <dt>config</dt>
<dd>
<p>Path to a kubeadm configuration file</p> </dd> <dt>kubeconfig</dt>
<dd>
<p>The kubeconfig file to use when talking to the cluster. The default values in /etc/kubernetes/admin.conf</p> </dd> <dt>rootfs</dt>
<dd>
<p>The path to the real host root filesystem</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' kubeadm.config_upload_from_file /config.cfg</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.kubeadm.config_upload_from_flags"> salt.modules.kubeadm.config_upload_from_flags(apiserver_advertise_address=None, apiserver_bind_port=None, apiserver_cert_extra_sans=None, cert_dir=None, cri_socket=None, feature_gates=None, kubernetes_version=None, node_name=None, pod_network_cidr=None, service_cidr=None, service_dns_domain=None, kubeconfig=None, rootfs=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3001.</span></p> </div> <p>Create the in-cluster configuration file for the first time using flags</p> <dl class="simple"> <dt>apiserver_advertise_address</dt>
<dd>
<p>The IP address the API server will advertise it's listening on</p> </dd> <dt>apiserver_bind_port</dt>
<dd>
<p>The port the API server is accessible on (default 6443)</p> </dd> <dt>apiserver_cert_extra_sans</dt>
<dd>
<p>Optional extra Subject Alternative Names (SANs) to use for the API Server serving certificate</p> </dd> <dt>cert_dir</dt>
<dd>
<p>The path where to save and store the certificates (default "/etc/kubernetes/pki")</p> </dd> <dt>cri_socket</dt>
<dd>
<p>Path to the CRI socket to connect</p> </dd> <dt>feature_gates</dt>
<dd>
<p>A set of key=value pairs that describe feature gates for various features</p> </dd> <dt>kubernetes_version</dt>
<dd>
<p>Choose a specifig Kubernetes version for the control plane (default "stable-1")</p> </dd> <dt>node_name</dt>
<dd>
<p>Specify the node name</p> </dd> <dt>pod_network_cidr</dt>
<dd>
<p>Specify range of IP addresses for the pod network</p> </dd> <dt>service_cidr</dt>
<dd>
<p>Use alternative range of IP address for service VIPs (default "10.96.0.0/12")</p> </dd> <dt>service_dns_domain</dt>
<dd>
<p>Use alternative domain for services (default "cluster.local")</p> </dd> <dt>kubeconfig</dt>
<dd>
<p>The kubeconfig file to use when talking to the cluster. The default values in /etc/kubernetes/admin.conf</p> </dd> <dt>rootfs</dt>
<dd>
<p>The path to the real host root filesystem</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' kubeadm.config_upload_from_flags</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.kubeadm.config_view"> salt.modules.kubeadm.config_view(kubeconfig=None, rootfs=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3001.</span></p> </div> <p>View the kubeadm configuration stored inside the cluster</p> <dl class="simple"> <dt>kubeconfig</dt>
<dd>
<p>The kubeconfig file to use when talking to the cluster. The default values in /etc/kubernetes/admin.conf</p> </dd> <dt>rootfs</dt>
<dd>
<p>The path to the real host root filesystem</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' kubeadm.config_view</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.kubeadm.init"> salt.modules.kubeadm.init(apiserver_advertise_address=None, apiserver_bind_port=None, apiserver_cert_extra_sans=None, cert_dir=None, certificate_key=None, config=None, cri_socket=None, experimental_upload_certs=False, feature_gates=None, ignore_preflight_errors=None, image_repository=None, kubernetes_version=None, node_name=None, pod_network_cidr=None, service_cidr=None, service_dns_domain=None, skip_certificate_key_print=False, skip_phases=None, skip_token_print=False, token=None, token_ttl=None, rootfs=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3001.</span></p> </div> <p>Command to set up the Kubernetes control plane</p> <dl class="simple"> <dt>apiserver_advertise_address</dt>
<dd>
<p>The IP address the API server will advertise it's listening on</p> </dd> <dt>apiserver_bind_port</dt>
<dd>
<p>The port the API server is accessible on (default 6443)</p> </dd> <dt>apiserver_cert_extra_sans</dt>
<dd>
<p>Optional extra Subject Alternative Names (SANs) to use for the API Server serving certificate</p> </dd> <dt>cert_dir</dt>
<dd>
<p>The path where to save and store the certificates (default "/etc/kubernetes/pki")</p> </dd> <dt>certificate_key</dt>
<dd>
<p>Key used to encrypt the control-plane certificates in the kubeadm-certs Secret</p> </dd> <dt>config</dt>
<dd>
<p>Path to a kubeadm configuration file</p> </dd> <dt>cri_socket</dt>
<dd>
<p>Path to the CRI socket to connect</p> </dd> <dt>experimental_upload_certs</dt>
<dd>
<p>Upload control-plane certificate to the kubeadm-certs Secret</p> </dd> <dt>feature_gates</dt>
<dd>
<p>A set of key=value pairs that describe feature gates for various features</p> </dd> <dt>ignore_preflight_errors</dt>
<dd>
<p>A list of checks whose errors will be shown as warnings</p> </dd> <dt>image_repository</dt>
<dd>
<p>Choose a container registry to pull control plane images from</p> </dd> <dt>kubernetes_version</dt>
<dd>
<p>Choose a specifig Kubernetes version for the control plane (default "stable-1")</p> </dd> <dt>node_name</dt>
<dd>
<p>Specify the node name</p> </dd> <dt>pod_network_cidr</dt>
<dd>
<p>Specify range of IP addresses for the pod network</p> </dd> <dt>service_cidr</dt>
<dd>
<p>Use alternative range of IP address for service VIPs (default "10.96.0.0/12")</p> </dd> <dt>service_dns_domain</dt>
<dd>
<p>Use alternative domain for services (default "cluster.local")</p> </dd> <dt>skip_certificate_key_print</dt>
<dd>
<p>Don't print the key used to encrypt the control-plane certificates</p> </dd> <dt>skip_phases</dt>
<dd>
<p>List of phases to be skipped</p> </dd> <dt>skip_token_print</dt>
<dd>
<p>Skip printing of the default bootstrap token generated by 'kubeadm init'</p> </dd> <dt>token</dt>
<dd>
<p>The token to use for establishing bidirectional trust between nodes and control-plane nodes. The token must match a regular expression, that by default is [a-z0-9]{6}.[a-z0-9]{16}</p> </dd> <dt>token_ttl</dt>
<dd>
<p>The duration defore the token is automatically deleted (1s, 2m, 3h). If set to '0' the token will never expire. Default value is 24h0m0s</p> </dd> <dt>rootfs</dt>
<dd>
<p>The path to the real host root filesystem</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' kubeadm.init pod_network_cidr='10.244.0.0/16'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.kubeadm.join"> salt.modules.kubeadm.join(api_server_endpoint=None, apiserver_advertise_address=None, apiserver_bind_port=None, certificate_key=None, config=None, cri_socket=None, discovery_file=None, discovery_token=None, discovery_token_ca_cert_hash=None, discovery_token_unsafe_skip_ca_verification=False, experimental_control_plane=False, ignore_preflight_errors=None, node_name=None, skip_phases=None, tls_bootstrap_token=None, token=None, rootfs=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3001.</span></p> </div> <p>Command to join to an existing cluster</p> <dl class="simple"> <dt>api_server_endpoint</dt>
<dd>
<p>IP address or domain name and port of the API Server</p> </dd> <dt>apiserver_advertise_address</dt>
<dd>
<p>If the node should host a new control plane instance, the IP address the API Server will advertise it's listening on</p> </dd> <dt>apiserver_bind_port</dt>
<dd>
<p>If the node should host a new control plane instance, the port the API Server to bind to (default 6443)</p> </dd> <dt>certificate_key</dt>
<dd>
<p>Use this key to decrypt the certificate secrets uploaded by init</p> </dd> <dt>config</dt>
<dd>
<p>Path to a kubeadm configuration file</p> </dd> <dt>cri_socket</dt>
<dd>
<p>Path to the CRI socket to connect</p> </dd> <dt>discovery_file</dt>
<dd>
<p>For file-based discovery, a file or URL from which to load cluster information</p> </dd> <dt>discovery_token</dt>
<dd>
<p>For token-based discovery, the token used to validate cluster information fetched from the API Server</p> </dd> <dt>discovery_token_ca_cert_hash</dt>
<dd>
<p>For token-based discovery, validate that the root CA public key matches this hash (format: "&lt;type&gt;:&lt;value&gt;")</p> </dd> <dt>discovery_token_unsafe_skip_ca_verification</dt>
<dd>
<p>For token-based discovery, allow joining without 'discovery-token-ca-cert-hash' pinning</p> </dd> <dt>experimental_control_plane</dt>
<dd>
<p>Create a new control plane instance on this node</p> </dd> <dt>ignore_preflight_errors</dt>
<dd>
<p>A list of checks whose errors will be shown as warnings</p> </dd> <dt>node_name</dt>
<dd>
<p>Specify the node name</p> </dd> <dt>skip_phases</dt>
<dd>
<p>List of phases to be skipped</p> </dd> <dt>tls_bootstrap_token</dt>
<dd>
<p>Specify the token used to temporarily authenticate with the Kubernetes Control Plane while joining the node</p> </dd> <dt>token</dt>
<dd>
<p>Use this token for both discovery-token and tls-bootstrap-token when those values are not provided</p> </dd> <dt>rootfs</dt>
<dd>
<p>The path to the real host root filesystem</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' kubeadm.join 10.160.65.165:6443 token='token'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.kubeadm.join_params"> salt.modules.kubeadm.join_params(create_if_needed=False)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3001.</span></p> </div> <p>Return the parameters required for joining into the cluster</p> <dl class="simple"> <dt>create_if_needed</dt>
<dd>
<p>If the token bucket is empty and this parameter is True, a new token will be created.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' kubeadm.join_params
salt '*' kubeadm.join_params create_if_needed=True</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.kubeadm.reset"> salt.modules.kubeadm.reset(cert_dir=None, cri_socket=None, ignore_preflight_errors=None, kubeconfig=None, rootfs=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3001.</span></p> </div> <p>Revert any changes made to this host by 'kubeadm init' or 'kubeadm join'</p> <dl class="simple"> <dt>cert_dir</dt>
<dd>
<p>The path to the directory where the certificates are stored (default "/etc/kubernetes/pki")</p> </dd> <dt>cri_socket</dt>
<dd>
<p>Path to the CRI socket to connect</p> </dd> <dt>ignore_preflight_errors</dt>
<dd>
<p>A list of checks whose errors will be shown as warnings</p> </dd> <dt>kubeconfig</dt>
<dd>
<p>The kubeconfig file to use when talking to the cluster. The default values in /etc/kubernetes/admin.conf</p> </dd> <dt>rootfs</dt>
<dd>
<p>The path to the real host root filesystem</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' kubeadm.join 10.160.65.165:6443 token='token'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.kubeadm.token_create"> salt.modules.kubeadm.token_create(token=None, config=None, description=None, groups=None, ttl=None, usages=None, kubeconfig=None, rootfs=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3001.</span></p> </div> <p>Create bootstrap tokens on the server</p> <dl class="simple"> <dt>token</dt>
<dd>
<p>Token to write, if None one will be generated. The token must match a regular expression, that by default is [a-z0-9]{6}.[a-z0-9]{16}</p> </dd> <dt>config</dt>
<dd>
<p>Path to kubeadm configuration file</p> </dd> <dt>description</dt>
<dd>
<p>A human friendly description of how this token is used</p> </dd> <dt>groups</dt>
<dd>
<p>List of extra groups that this token will authenticate, default to ['system:bootstrappers:kubeadm:default-node-token']</p> </dd> <dt>ttl</dt>
<dd>
<p>The duration defore the token is automatically deleted (1s, 2m, 3h). If set to '0' the token will never expire. Default value is 24h0m0s</p> </dd> <dt>usages</dt>
<dd>
<p>Describes the ways in which this token can be used. The default value is ['signing', 'authentication']</p> </dd> <dt>kubeconfig</dt>
<dd>
<p>The kubeconfig file to use when talking to the cluster. The default values in /etc/kubernetes/admin.conf</p> </dd> <dt>rootfs</dt>
<dd>
<p>The path to the real host root filesystem</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' kubeadm.token_create
salt '*' kubeadm.token_create a1b2c.0123456789abcdef
salt '*' kubeadm.token_create ttl='6h'
salt '*' kubeadm.token_create usages="['signing']"</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.kubeadm.token_delete"> salt.modules.kubeadm.token_delete(token, kubeconfig=None, rootfs=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3001.</span></p> </div> <p>Delete bootstrap tokens on the server</p> <dl class="simple"> <dt>token</dt>
<dd>
<p>Token to write, if None one will be generated. The token must match a regular expression, that by default is [a-z0-9]{6}.[a-z0-9]{16}</p> </dd> <dt>kubeconfig</dt>
<dd>
<p>The kubeconfig file to use when talking to the cluster. The default values in /etc/kubernetes/admin.conf</p> </dd> <dt>rootfs</dt>
<dd>
<p>The path to the real host root filesystem</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' kubeadm.token_delete a1b2c
salt '*' kubeadm.token_create a1b2c.0123456789abcdef</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.kubeadm.token_generate"> salt.modules.kubeadm.token_generate(kubeconfig=None, rootfs=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3001.</span></p> </div> <p>Generate and return a bootstrap token, but do not create it on the server</p> <dl class="simple"> <dt>kubeconfig</dt>
<dd>
<p>The kubeconfig file to use when talking to the cluster. The default values in /etc/kubernetes/admin.conf</p> </dd> <dt>rootfs</dt>
<dd>
<p>The path to the real host root filesystem</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' kubeadm.token_generate</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.kubeadm.token_list"> salt.modules.kubeadm.token_list(kubeconfig=None, rootfs=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3001.</span></p> </div> <p>List bootstrap tokens on the server</p> <dl class="simple"> <dt>kubeconfig</dt>
<dd>
<p>The kubeconfig file to use when talking to the cluster. The default values in /etc/kubernetes/admin.conf</p> </dd> <dt>rootfs</dt>
<dd>
<p>The path to the real host root filesystem</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' kubeadm.token_list</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.modules.kubeadm.version"> salt.modules.kubeadm.version(kubeconfig=None, rootfs=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3001.</span></p> </div> <p>Return the version of kubeadm</p> <dl class="simple"> <dt>kubeconfig</dt>
<dd>
<p>The kubeconfig file to use when talking to the cluster. The default values in /etc/kubernetes/admin.conf</p> </dd> <dt>rootfs</dt>
<dd>
<p>The path to the real host root filesystem</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' kubeadm.version</pre> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.kubeadm.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/modules/all/salt.modules.kubeadm.html</a>
  </p>
</div>
