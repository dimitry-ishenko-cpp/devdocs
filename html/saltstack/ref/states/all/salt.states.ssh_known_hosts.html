<h1>salt.states.ssh_known_hosts</h1> <div class="section" id="control-of-ssh-known-hosts-entries"> <h2>Control of SSH known_hosts entries</h2> <p>Manage the information stored in the known_hosts files.</p> <pre class="highlight-yaml notranslate" data-language="yaml">github.com:
  ssh_known_hosts:
    - present
    - user: root
    - fingerprint: 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48
    - fingerprint_hash_type: md5

example.com:
  ssh_known_hosts:
    - absent
    - user: root</pre> <dl class="py function"> <h3 id="salt.states.ssh_known_hosts.absent"> salt.states.ssh_known_hosts.absent(name, user=None, config=None)</h3> <dd>
<p>Verifies that the specified host is not known by the given user</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>The host name Note that only single host names are supported. If foo.example.com and bar.example.com are the same machine and you need to exclude both, you will need one Salt state for each.</p> </dd> <dt>user</dt>
<dd>
<p>The user who owns the ssh authorized keys file to modify</p> </dd> <dt>config</dt>
<dd>
<p>The location of the authorized keys file relative to the user's home directory, defaults to ".ssh/known_hosts". If no user is specified, defaults to "/etc/ssh/ssh_known_hosts". If present, must be an absolute path when a user is not specified.</p> </dd> </dl> </dd>
</dl> <dl class="py function"> <h3 id="salt.states.ssh_known_hosts.present"> salt.states.ssh_known_hosts.present(name, user=None, fingerprint=None, key=None, port=None, enc=None, config=None, hash_known_hosts=True, timeout=5, fingerprint_hash_type=None)</h3> <dd>
<p>Verifies that the specified host is known by the specified user</p> <p>On many systems, specifically those running with openssh 4 or older, the <code class="docutils literal notranslate"><span class="pre">enc</span></code> option must be set, only openssh 5 and above can detect the key type.</p> <dl> <dt>name</dt>
<dd>
<p>The name of the remote host (e.g. "github.com") Note that only a single hostname is supported, if foo.example.com and bar.example.com have the same host you will need two separate Salt States to represent them.</p> </dd> <dt>user</dt>
<dd>
<p>The user who owns the ssh authorized keys file to modify</p> </dd> <dt>fingerprint</dt>
<dd>
<p>The fingerprint of the key which must be present in the known_hosts file (optional if key specified)</p> </dd> <dt>key</dt>
<dd>
<p>The public key which must be present in the known_hosts file (optional if fingerprint specified)</p> </dd> <dt>port</dt>
<dd>
<p>optional parameter, port which will be used to when requesting the public key from the remote host, defaults to port 22.</p> </dd> <dt>enc</dt>
<dd>
<p>Defines what type of key is being used, can be ed25519, ecdsa ssh-rsa or ssh-dss</p> </dd> <dt>config</dt>
<dd>
<p>The location of the authorized keys file relative to the user's home directory, defaults to ".ssh/known_hosts". If no user is specified, defaults to "/etc/ssh/ssh_known_hosts". If present, must be an absolute path when a user is not specified.</p> </dd> <dt>hash_known_hosts<span class="classifier">True</span>
</dt>
<dd>
<p>Hash all hostnames and addresses in the known hosts file.</p> </dd> <dt>timeout<span class="classifier">int</span>
</dt>
<dd>
<p>Set the timeout for connection attempts. If <code class="docutils literal notranslate"><span class="pre">timeout</span></code> seconds have elapsed since a connection was initiated to a host or since the last time anything was read from that host, then the connection is closed and the host in question considered unavailable. Default is 5 seconds.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.0.</span></p> </div> </dd> <dt>fingerprint_hash_type</dt>
<dd>
<p>The public key fingerprint hash type that the public key fingerprint was originally hashed with. This defaults to <code class="docutils literal notranslate"><span class="pre">sha256</span></code> if not specified.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.11.4.</span></p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2017.7.0: </span>default changed from <code class="docutils literal notranslate"><span class="pre">md5</span></code> to <code class="docutils literal notranslate"><span class="pre">sha256</span></code></p> </div> </dd> </dl> </dd>
</dl> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/states/all/salt.states.ssh_known_hosts.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/states/all/salt.states.ssh_known_hosts.html</a>
  </p>
</div>
