<h1>salt.states.at</h1> <div class="section" id="configuration-disposable-regularly-scheduled-tasks-for-at"> <h2>Configuration disposable regularly scheduled tasks for at.</h2> <p>The at state can be add disposable regularly scheduled tasks for your system.</p> <dl class="py function"> <h3 id="salt.states.at.absent"> salt.states.at.absent(name, jobid=None, **kwargs)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2017.7.0.</span></p> </div> <p>Remove a job from queue</p> <dl class="simple"> <dt>jobid: string|int</dt>
<dd>
<p>Specific jobid to remove</p> </dd> <dt>tag<span class="classifier">string</span>
</dt>
<dd>
<p>Job's tag</p> </dd> <dt>runas<span class="classifier">string</span>
</dt>
<dd>
<p>Runs user-specified jobs</p> </dd> <dt>kwargs</dt>
<dd>
<p>Addition kwargs can be provided to filter jobs. See output of <cite>at.jobcheck</cite> for more.</p> </dd> </dl> <pre class="highlight-yaml notranslate" data-language="yaml">example1:
  at.absent:</pre> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>this will remove all jobs!</p> </div> <pre class="highlight-yaml notranslate" data-language="yaml">example2:
  at.absent:
    - year: 13</pre> <pre class="highlight-yaml notranslate" data-language="yaml">example3:
  at.absent:
    - tag: rose</pre> <pre class="highlight-yaml notranslate" data-language="yaml">example4:
  at.absent:
    - tag: rose
    - day: 13
    - hour: 16</pre> <pre class="highlight-yaml notranslate" data-language="yaml">example5:
  at.absent:
    - jobid: 4</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.states.at.mod_watch"> salt.states.at.mod_watch(name, **kwargs)</h3> <dd>
<p>The at watcher, called to invoke the watch command.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This state exists to support special handling of the <code class="docutils literal notranslate"><span class="pre">watch</span></code> <a class="reference internal" href="https://docs.saltproject.io/en/latest/ref/states/requisites.html#requisites"><span class="std std-ref">requisite</span></a>. It should not be called directly.</p> <p>Parameters for this function should be set by the state being triggered.</p> </div> <dl class="simple"> <dt>name</dt>
<dd>
<p>The name of the atjob</p> </dd> </dl> </dd>
</dl> <dl class="py function"> <h3 id="salt.states.at.present"> salt.states.at.present(name, timespec, tag=None, user=None, job=None, unique_tag=False)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2017.7.0.</span></p> </div> <p>Add a job to queue.</p> <dl class="simple"> <dt>job<span class="classifier">string</span>
</dt>
<dd>
<p>Command to run.</p> </dd> <dt>timespec<span class="classifier">string</span>
</dt>
<dd>
<p>The 'timespec' follows the format documented in the at(1) manpage.</p> </dd> <dt>tag<span class="classifier">string</span>
</dt>
<dd>
<p>Make a tag for the job.</p> </dd> <dt>user<span class="classifier">string</span>
</dt>
<dd>
<p>The user to run the at job .. versionadded:: 2014.1.4</p> </dd> <dt>unique_tag<span class="classifier">boolean</span>
</dt>
<dd>
<p>If set to True job will not be added if a job with the tag exists. .. versionadded:: 2017.7.0</p> </dd> </dl> <pre class="highlight-yaml notranslate" data-language="yaml">rose:
  at.present:
    - job: 'echo "I love saltstack" &gt; love'
    - timespec: '9:09 11/09/13'
    - tag: love
    - user: jam</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.states.at.watch"> salt.states.at.watch(name, timespec, tag=None, user=None, job=None, unique_tag=False)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> <p>Add an at job if trigger by watch</p> <dl class="simple"> <dt>job<span class="classifier">string</span>
</dt>
<dd>
<p>Command to run.</p> </dd> <dt>timespec<span class="classifier">string</span>
</dt>
<dd>
<p>The 'timespec' follows the format documented in the at(1) manpage.</p> </dd> <dt>tag<span class="classifier">string</span>
</dt>
<dd>
<p>Make a tag for the job.</p> </dd> <dt>user<span class="classifier">string</span>
</dt>
<dd>
<p>The user to run the at job .. versionadded:: 2014.1.4</p> </dd> <dt>unique_tag<span class="classifier">boolean</span>
</dt>
<dd>
<p>If set to True job will not be added if a job with the tag exists. .. versionadded:: 2017.7.0</p> </dd> </dl> <pre class="highlight-yaml notranslate" data-language="yaml">minion_restart:
  at.watch:
    - job: 'salt-call --local service.restart salt-minion'
    - timespec: 'now +1 min'
    - tag: minion_restart
    - unique_tag: trye
    - watch:
        - file: /etc/salt/minion</pre> </dd>
</dl> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/states/all/salt.states.at.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/states/all/salt.states.at.html</a>
  </p>
</div>
