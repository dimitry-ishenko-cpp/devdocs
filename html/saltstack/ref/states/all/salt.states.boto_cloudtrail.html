<h1>salt.states.boto_cloudtrail</h1> <div class="section" id="manage-cloudtrail-objects"> <h2>Manage CloudTrail Objects</h2> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.0.</span></p> </div> <p>Create and destroy CloudTrail objects. Be aware that this interacts with Amazon's services, and so may incur charges.</p> <dl class="field-list simple"> <dt class="field-odd">depends</dt> <dd class="field-odd">
<ul class="simple"> <li><p>boto</p></li> <li><p>boto3</p></li> </ul> </dd> </dl> <p>The dependencies listed above can be installed via package or pip.</p> <p>This module accepts explicit vpc credentials but can also utilize IAM roles assigned to the instance through Instance Profiles. Dynamic credentials are then automatically obtained from AWS API and no further configuration is necessary. More information available <a class="reference external" href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html">here</a>.</p> <p>If IAM roles are not used you need to specify them either in a pillar file or in the minion's config file:</p> <pre class="highlight-yaml notranslate" data-language="yaml">vpc.keyid: GKTADJGHEIQSXMKKRBJ08H
vpc.key: askdjghsdfjkghWupUjasdflkdfklgjsdfjajkghs</pre> <p>It's also possible to specify <code class="docutils literal notranslate"><span class="pre">key</span></code>, <code class="docutils literal notranslate"><span class="pre">keyid</span></code> and <code class="docutils literal notranslate"><span class="pre">region</span></code> via a profile, either passed in as a dict, or as a string to pull from pillars or minion config:</p> <pre class="highlight-yaml notranslate" data-language="yaml">myprofile:
    keyid: GKTADJGHEIQSXMKKRBJ08H
    key: askdjghsdfjkghWupUjasdflkdfklgjsdfjajkghs
        region: us-east-1</pre> <pre class="highlight-yaml notranslate" data-language="yaml">Ensure trail exists:
    boto_cloudtrail.present:
        - Name: mytrail
        - S3BucketName: mybucket
        - S3KeyPrefix: prefix
        - region: us-east-1
        - keyid: GKTADJGHEIQSXMKKRBJ08H
        - key: askdjghsdfjkghWupUjasdflkdfklgjsdfjajkghs</pre> <dl class="py function"> <h3 id="salt.states.boto_cloudtrail.absent"> salt.states.boto_cloudtrail.absent(name, Name, region=None, key=None, keyid=None, profile=None)</h3> <dd>
<p>Ensure trail with passed properties is absent.</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>The name of the state definition.</p> </dd> <dt>Name</dt>
<dd>
<p>Name of the trail.</p> </dd> <dt>region</dt>
<dd>
<p>Region to connect to.</p> </dd> <dt>key</dt>
<dd>
<p>Secret key to be used.</p> </dd> <dt>keyid</dt>
<dd>
<p>Access key to be used.</p> </dd> <dt>profile</dt>
<dd>
<p>A dict with region, key and keyid, or a pillar key (string) that contains a dict with region, key and keyid.</p> </dd> </dl> </dd>
</dl> <dl class="py function"> <h3 id="salt.states.boto_cloudtrail.present"> salt.states.boto_cloudtrail.present(name, Name, S3BucketName, S3KeyPrefix=None, SnsTopicName=None, IncludeGlobalServiceEvents=True, IsMultiRegionTrail=None, EnableLogFileValidation=False, CloudWatchLogsLogGroupArn=None, CloudWatchLogsRoleArn=None, KmsKeyId=None, LoggingEnabled=True, Tags=None, region=None, key=None, keyid=None, profile=None)</h3> <dd>
<p>Ensure trail exists.</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>The name of the state definition</p> </dd> <dt>Name</dt>
<dd>
<p>Name of the trail.</p> </dd> <dt>S3BucketName</dt>
<dd>
<p>Specifies the name of the Amazon S3 bucket designated for publishing log files.</p> </dd> <dt>S3KeyPrefix</dt>
<dd>
<p>Specifies the Amazon S3 key prefix that comes after the name of the bucket you have designated for log file delivery.</p> </dd> <dt>SnsTopicName</dt>
<dd>
<p>Specifies the name of the Amazon SNS topic defined for notification of log file delivery. The maximum length is 256 characters.</p> </dd> <dt>IncludeGlobalServiceEvents</dt>
<dd>
<p>Specifies whether the trail is publishing events from global services such as IAM to the log files.</p> </dd> <dt>EnableLogFileValidation</dt>
<dd>
<p>Specifies whether log file integrity validation is enabled. The default is false.</p> </dd> <dt>CloudWatchLogsLogGroupArn</dt>
<dd>
<p>Specifies a log group name using an Amazon Resource Name (ARN), a unique identifier that represents the log group to which CloudTrail logs will be delivered. Not required unless you specify CloudWatchLogsRoleArn.</p> </dd> <dt>CloudWatchLogsRoleArn</dt>
<dd>
<p>Specifies the role for the CloudWatch Logs endpoint to assume to write to a user's log group.</p> </dd> <dt>KmsKeyId</dt>
<dd>
<p>Specifies the KMS key ID to use to encrypt the logs delivered by CloudTrail. The value can be a an alias name prefixed by "alias/", a fully specified ARN to an alias, a fully specified ARN to a key, or a globally unique identifier.</p> </dd> <dt>LoggingEnabled</dt>
<dd>
<p>Whether logging should be enabled for the trail</p> </dd> <dt>Tags</dt>
<dd>
<p>A dictionary of tags that should be set on the trail</p> </dd> <dt>region</dt>
<dd>
<p>Region to connect to.</p> </dd> <dt>key</dt>
<dd>
<p>Secret key to be used.</p> </dd> <dt>keyid</dt>
<dd>
<p>Access key to be used.</p> </dd> <dt>profile</dt>
<dd>
<p>A dict with region, key and keyid, or a pillar key (string) that contains a dict with region, key and keyid.</p> </dd> </dl> </dd>
</dl> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/states/all/salt.states.boto_cloudtrail.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/states/all/salt.states.boto_cloudtrail.html</a>
  </p>
</div>
