<h1>salt.states.azurearm_network</h1> <p>Azure (ARM) Network State Module</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <dl class="field-list"> <dt class="field-odd">maintainer</dt> <dd class="field-odd">
<p>&lt;<a class="reference external" href="mailto:devops%40decisionlab.io.html">devops<span>@</span>decisionlab<span>.</span>io</a>&gt;</p> </dd> <dt class="field-even">maturity</dt> <dd class="field-even">
<p>new</p> </dd> <dt class="field-odd">depends</dt> <dd class="field-odd">
<ul class="simple"> <li><p><a class="reference external" href="https://pypi.python.org/pypi/azure">azure</a> &gt;= 2.0.0</p></li> <li><p><a class="reference external" href="https://pypi.python.org/pypi/azure-common">azure-common</a> &gt;= 1.1.8</p></li> <li><p><a class="reference external" href="https://pypi.python.org/pypi/azure-mgmt">azure-mgmt</a> &gt;= 1.0.0</p></li> <li><p><a class="reference external" href="https://pypi.python.org/pypi/azure-mgmt-compute">azure-mgmt-compute</a> &gt;= 1.0.0</p></li> <li><p><a class="reference external" href="https://pypi.python.org/pypi/azure-mgmt-network">azure-mgmt-network</a> &gt;= 1.7.1</p></li> <li><p><a class="reference external" href="https://pypi.python.org/pypi/azure-mgmt-resource">azure-mgmt-resource</a> &gt;= 1.1.0</p></li> <li><p><a class="reference external" href="https://pypi.python.org/pypi/azure-mgmt-storage">azure-mgmt-storage</a> &gt;= 1.0.0</p></li> <li><p><a class="reference external" href="https://pypi.python.org/pypi/azure-mgmt-web">azure-mgmt-web</a> &gt;= 0.32.0</p></li> <li><p><a class="reference external" href="https://pypi.python.org/pypi/azure-storage">azure-storage</a> &gt;= 0.34.3</p></li> <li><p><a class="reference external" href="https://pypi.python.org/pypi/msrestazure">msrestazure</a> &gt;= 0.4.21</p></li> </ul> </dd> <dt class="field-even">platform</dt> <dd class="field-even">
<p>linux</p> </dd> <dt class="field-odd">configuration</dt> <dd class="field-odd">
<p>This module requires Azure Resource Manager credentials to be passed as a dictionary of keyword arguments to the <code class="docutils literal notranslate"><span class="pre">connection_auth</span></code> parameter in order to work properly. Since the authentication parameters are sensitive, it's recommended to pass them to the states via pillar.</p> <p>Required provider parameters:</p> <dl class="simple"> <dt>if using username and password:</dt>
<dd>
<ul class="simple"> <li><p><code class="docutils literal notranslate"><span class="pre">subscription_id</span></code></p></li> <li><p><code class="docutils literal notranslate"><span class="pre">username</span></code></p></li> <li><p><code class="docutils literal notranslate"><span class="pre">password</span></code></p></li> </ul> </dd> <dt>if using a service principal:</dt>
<dd>
<ul class="simple"> <li><p><code class="docutils literal notranslate"><span class="pre">subscription_id</span></code></p></li> <li><p><code class="docutils literal notranslate"><span class="pre">tenant</span></code></p></li> <li><p><code class="docutils literal notranslate"><span class="pre">client_id</span></code></p></li> <li><p><code class="docutils literal notranslate"><span class="pre">secret</span></code></p></li> </ul> </dd> </dl> <p>Optional provider parameters:</p> <dl class="simple"> <dt>
<strong>cloud_environment</strong>: Used to point the cloud driver to different API endpoints, such as Azure GovCloud. Possible values:</dt>
<dd>
<ul class="simple"> <li><p><code class="docutils literal notranslate"><span class="pre">AZURE_PUBLIC_CLOUD</span></code> (default)</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">AZURE_CHINA_CLOUD</span></code></p></li> <li><p><code class="docutils literal notranslate"><span class="pre">AZURE_US_GOV_CLOUD</span></code></p></li> <li><p><code class="docutils literal notranslate"><span class="pre">AZURE_GERMAN_CLOUD</span></code></p></li> </ul> </dd> </dl> <p>Example Pillar for Azure Resource Manager authentication:</p> <pre class="highlight-yaml notranslate" data-language="yaml">azurearm:
    user_pass_auth:
        subscription_id: 3287abc8-f98a-c678-3bde-326766fd3617
        username: fletch
        password: 123pass
    mysubscription:
        subscription_id: 3287abc8-f98a-c678-3bde-326766fd3617
        tenant: ABCDEFAB-1234-ABCD-1234-ABCDEFABCDEF
        client_id: ABCDEFAB-1234-ABCD-1234-ABCDEFABCDEF
        secret: XXXXXXXXXXXXXXXXXXXXXXXX
        cloud_environment: AZURE_PUBLIC_CLOUD</pre> <p>Example states using Azure Resource Manager authentication:</p> <pre class="highlight-jinja notranslate" data-language="jinja">{% set profile = salt['pillar.get']('azurearm:mysubscription') %}
Ensure virtual network exists:
    azurearm_network.virtual_network_present:
        - name: my_vnet
        - resource_group: my_rg
        - address_prefixes:
            - '10.0.0.0/8'
            - '192.168.0.0/16'
        - dns_servers:
            - '8.8.8.8'
        - tags:
            how_awesome: very
            contact_name: Elmer Fudd Gantry
        - connection_auth: {{ profile }}

Ensure virtual network is absent:
    azurearm_network.virtual_network_absent:
        - name: other_vnet
        - resource_group: my_rg
        - connection_auth: {{ profile }}</pre> </dd> </dl> <dl class="py function"> <h3 id="salt.states.azurearm_network.load_balancer_absent"> salt.states.azurearm_network.load_balancer_absent(name, resource_group, connection_auth=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Ensure a load balancer does not exist in the resource group.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>name</strong> -- Name of the load balancer.</p></li> <li><p><strong>resource_group</strong> -- The resource group assigned to the load balancer.</p></li> <li><p><strong>connection_auth</strong> -- A dict with subscription and authentication parameters to be used in connecting to the Azure Resource Manager API.</p></li> </ul> </dd> </dl> </dd>
</dl> <dl class="py function"> <h3 id="salt.states.azurearm_network.load_balancer_present"> salt.states.azurearm_network.load_balancer_present(name, resource_group, sku=None, frontend_ip_configurations=None, backend_address_pools=None, load_balancing_rules=None, probes=None, inbound_nat_rules=None, inbound_nat_pools=None, outbound_nat_rules=None, tags=None, connection_auth=None, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Ensure a load balancer exists.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>name</strong> -- Name of the load balancer.</p></li> <li><p><strong>resource_group</strong> -- The resource group assigned to the load balancer.</p></li> <li><p><strong>sku</strong> -- The load balancer SKU, which can be 'Basic' or 'Standard'.</p></li> <li><p><strong>tags</strong> -- A dictionary of strings can be passed as tag metadata to the load balancer object.</p></li> <li>
<p><strong>frontend_ip_configurations</strong> -- </p>
<p>An optional list of dictionaries representing valid FrontendIPConfiguration objects. A frontend IP configuration can be either private (using private IP address and subnet parameters) or public (using a reference to a public IP address object). Valid parameters are:</p> <ul> <li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: The name of the resource that is unique within a resource group.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">private_ip_address</span></code>: The private IP address of the IP configuration. Required if 'private_ip_allocation_method' is 'Static'.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">private_ip_allocation_method</span></code>: The Private IP allocation method. Possible values are: 'Static' and 'Dynamic'.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">subnet</span></code>: Name of an existing subnet inside of which the frontend IP will reside.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">public_ip_address</span></code>: Name of an existing public IP address which will be assigned to the frontend IP object.</p></li> </ul> </li> <li><p><strong>backend_address_pools</strong> -- An optional list of dictionaries representing valid BackendAddressPool objects. Only the 'name' parameter is valid for a BackendAddressPool dictionary. All other parameters are read-only references from other objects linking to the backend address pool. Inbound traffic is randomly load balanced across IPs in the backend IPs.</p></li> <li>
<p><strong>probes</strong> -- </p>
<p>An optional list of dictionaries representing valid Probe objects. Valid parameters are:</p> <ul> <li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: The name of the resource that is unique within a resource group.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">protocol</span></code>: The protocol of the endpoint. Possible values are 'Http' or 'Tcp'. If 'Tcp' is specified, a received ACK is required for the probe to be successful. If 'Http' is specified, a 200 OK response from the specified URI is required for the probe to be successful.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">port</span></code>: The port for communicating the probe. Possible values range from 1 to 65535, inclusive.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">interval_in_seconds</span></code>: The interval, in seconds, for how frequently to probe the endpoint for health status. Typically, the interval is slightly less than half the allocated timeout period (in seconds) which allows two full probes before taking the instance out of rotation. The default value is 15, the minimum value is 5.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">number_of_probes</span></code>: The number of probes where if no response, will result in stopping further traffic from being delivered to the endpoint. This values allows endpoints to be taken out of rotation faster or slower than the typical times used in Azure.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">request_path</span></code>: The URI used for requesting health status from the VM. Path is required if a protocol is set to 'Http'. Otherwise, it is not allowed. There is no default value.</p></li> </ul> </li> <li>
<p><strong>load_balancing_rules</strong> -- </p>
<p>An optional list of dictionaries representing valid LoadBalancingRule objects. Valid parameters are:</p> <ul> <li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: The name of the resource that is unique within a resource group.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">load_distribution</span></code>: The load distribution policy for this rule. Possible values are 'Default', 'SourceIP', and 'SourceIPProtocol'.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">frontend_port</span></code>: The port for the external endpoint. Port numbers for each rule must be unique within the Load Balancer. Acceptable values are between 0 and 65534. Note that value 0 enables 'Any Port'.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">backend_port</span></code>: The port used for internal connections on the endpoint. Acceptable values are between 0 and 65535. Note that value 0 enables 'Any Port'.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">idle_timeout_in_minutes</span></code>: The timeout for the TCP idle connection. The value can be set between 4 and 30 minutes. The default value is 4 minutes. This element is only used when the protocol is set to TCP.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">enable_floating_ip</span></code>: Configures a virtual machine's endpoint for the floating IP capability required to configure a SQL AlwaysOn Availability Group. This setting is required when using the SQL AlwaysOn Availability Groups in SQL server. This setting can't be changed after you create the endpoint.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">disable_outbound_snat</span></code>: Configures SNAT for the VMs in the backend pool to use the public IP address specified in the frontend of the load balancing rule.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">frontend_ip_configuration</span></code>: Name of the frontend IP configuration object used by the load balancing rule object.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">backend_address_pool</span></code>: Name of the backend address pool object used by the load balancing rule object. Inbound traffic is randomly load balanced across IPs in the backend IPs.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">probe</span></code>: Name of the probe object used by the load balancing rule object.</p></li> </ul> </li> <li>
<p><strong>inbound_nat_rules</strong> -- </p>
<p>An optional list of dictionaries representing valid InboundNatRule objects. Defining inbound NAT rules on your load balancer is mutually exclusive with defining an inbound NAT pool. Inbound NAT pools are referenced from virtual machine scale sets. NICs that are associated with individual virtual machines cannot reference an Inbound NAT pool. They have to reference individual inbound NAT rules. Valid parameters are:</p> <ul> <li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: The name of the resource that is unique within a resource group.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">frontend_ip_configuration</span></code>: Name of the frontend IP configuration object used by the inbound NAT rule object.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">protocol</span></code>: Possible values include 'Udp', 'Tcp', or 'All'.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">frontend_port</span></code>: The port for the external endpoint. Port numbers for each rule must be unique within the Load Balancer. Acceptable values range from 1 to 65534.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">backend_port</span></code>: The port used for the internal endpoint. Acceptable values range from 1 to 65535.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">idle_timeout_in_minutes</span></code>: The timeout for the TCP idle connection. The value can be set between 4 and 30 minutes. The default value is 4 minutes. This element is only used when the protocol is set to TCP.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">enable_floating_ip</span></code>: Configures a virtual machine's endpoint for the floating IP capability required to configure a SQL AlwaysOn Availability Group. This setting is required when using the SQL AlwaysOn Availability Groups in SQL server. This setting can't be changed after you create the endpoint.</p></li> </ul> </li> <li>
<p><strong>inbound_nat_pools</strong> -- </p>
<p>An optional list of dictionaries representing valid InboundNatPool objects. They define an external port range for inbound NAT to a single backend port on NICs associated with a load balancer. Inbound NAT rules are created automatically for each NIC associated with the Load Balancer using an external port from this range. Defining an Inbound NAT pool on your Load Balancer is mutually exclusive with defining inbound NAT rules. Inbound NAT pools are referenced from virtual machine scale sets. NICs that are associated with individual virtual machines cannot reference an inbound NAT pool. They have to reference individual inbound NAT rules. Valid parameters are:</p> <ul> <li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: The name of the resource that is unique within a resource group.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">frontend_ip_configuration</span></code>: Name of the frontend IP configuration object used by the inbound NAT pool object.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">protocol</span></code>: Possible values include 'Udp', 'Tcp', or 'All'.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">frontend_port_range_start</span></code>: The first port number in the range of external ports that will be used to provide Inbound NAT to NICs associated with a load balancer. Acceptable values range between 1 and 65534.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">frontend_port_range_end</span></code>: The last port number in the range of external ports that will be used to provide Inbound NAT to NICs associated with a load balancer. Acceptable values range between 1 and 65535.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">backend_port</span></code>: The port used for internal connections to the endpoint. Acceptable values are between 1 and 65535.</p></li> </ul> </li> <li>
<p><strong>outbound_nat_rules</strong> -- </p>
<p>An optional list of dictionaries representing valid OutboundNatRule objects. Valid parameters are:</p> <ul> <li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: The name of the resource that is unique within a resource group.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">frontend_ip_configuration</span></code>: Name of the frontend IP configuration object used by the outbound NAT rule object.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">backend_address_pool</span></code>: Name of the backend address pool object used by the outbound NAT rule object. Outbound traffic is randomly load balanced across IPs in the backend IPs.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">allocated_outbound_ports</span></code>: The number of outbound ports to be used for NAT.</p></li> </ul> </li> <li><p><strong>connection_auth</strong> -- A dict with subscription and authentication parameters to be used in connecting to the Azure Resource Manager API.</p></li> </ul> </dd> </dl> <p>Example usage:</p> <pre class="highlight-yaml notranslate" data-language="yaml">Ensure load balancer exists:
    azurearm_network.load_balancer_present:
        - name: lb1
        - resource_group: group1
        - location: eastus
        - frontend_ip_configurations:
          - name: lb1_feip1
            public_ip_address: pub_ip1
        - backend_address_pools:
          - name: lb1_bepool1
        - probes:
          - name: lb1_webprobe1
            protocol: tcp
            port: 80
            interval_in_seconds: 5
            number_of_probes: 2
        - load_balancing_rules:
          - name: lb1_webprobe1
            protocol: tcp
            frontend_port: 80
            backend_port: 80
            idle_timeout_in_minutes: 4
            frontend_ip_configuration: lb1_feip1
            backend_address_pool: lb1_bepool1
            probe: lb1_webprobe1
        - tags:
            contact_name: Elmer Fudd Gantry
        - connection_auth: {{ profile }}
        - require:
          - azurearm_resource: Ensure resource group exists
          - azurearm_network: Ensure public IP exists</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.states.azurearm_network.network_interface_absent"> salt.states.azurearm_network.network_interface_absent(name, resource_group, connection_auth=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Ensure a network interface does not exist in the resource group.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>name</strong> -- Name of the network interface.</p></li> <li><p><strong>resource_group</strong> -- The resource group assigned to the network interface.</p></li> <li><p><strong>connection_auth</strong> -- A dict with subscription and authentication parameters to be used in connecting to the Azure Resource Manager API.</p></li> </ul> </dd> </dl> </dd>
</dl> <dl class="py function"> <h3 id="salt.states.azurearm_network.network_interface_present"> salt.states.azurearm_network.network_interface_present(name, ip_configurations, subnet, virtual_network, resource_group, tags=None, virtual_machine=None, network_security_group=None, dns_settings=None, mac_address=None, primary=None, enable_accelerated_networking=None, enable_ip_forwarding=None, connection_auth=None, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Ensure a network interface exists.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>name</strong> -- Name of the network interface.</p></li> <li><p><strong>ip_configurations</strong> -- A list of dictionaries representing valid NetworkInterfaceIPConfiguration objects. The 'name' key is required at minimum. At least one IP Configuration must be present.</p></li> <li><p><strong>subnet</strong> -- Name of the existing subnet assigned to the network interface.</p></li> <li><p><strong>virtual_network</strong> -- Name of the existing virtual network containing the subnet.</p></li> <li><p><strong>resource_group</strong> -- The resource group assigned to the virtual network.</p></li> <li><p><strong>tags</strong> -- A dictionary of strings can be passed as tag metadata to the network interface object.</p></li> <li><p><strong>network_security_group</strong> -- The name of the existing network security group to assign to the network interface.</p></li> <li><p><strong>virtual_machine</strong> -- The name of the existing virtual machine to assign to the network interface.</p></li> <li>
<p><strong>dns_settings</strong> -- </p>
<p>An optional dictionary representing a valid NetworkInterfaceDnsSettings object. Valid parameters are:</p> <ul> <li><p><code class="docutils literal notranslate"><span class="pre">dns_servers</span></code>: List of DNS server IP addresses. Use 'AzureProvidedDNS' to switch to Azure provided DNS resolution. 'AzureProvidedDNS' value cannot be combined with other IPs, it must be the only value in dns_servers collection.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">internal_dns_name_label</span></code>: Relative DNS name for this NIC used for internal communications between VMs in the same virtual network.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">internal_fqdn</span></code>: Fully qualified DNS name supporting internal communications between VMs in the same virtual network.</p></li> <li><p><code class="docutils literal notranslate"><span class="pre">internal_domain_name_suffix</span></code>: Even if internal_dns_name_label is not specified, a DNS entry is created for the primary NIC of the VM. This DNS name can be constructed by concatenating the VM name with the value of internal_domain_name_suffix.</p></li> </ul> </li> <li><p><strong>mac_address</strong> -- Optional string containing the MAC address of the network interface.</p></li> <li><p><strong>primary</strong> -- Optional boolean allowing the interface to be set as the primary network interface on a virtual machine with multiple interfaces attached.</p></li> <li><p><strong>enable_accelerated_networking</strong> -- Optional boolean indicating whether accelerated networking should be enabled for the interface.</p></li> <li><p><strong>enable_ip_forwarding</strong> -- Optional boolean indicating whether IP forwarding should be enabled for the interface.</p></li> <li><p><strong>connection_auth</strong> -- A dict with subscription and authentication parameters to be used in connecting to the Azure Resource Manager API.</p></li> </ul> </dd> </dl> <p>Example usage:</p> <pre class="highlight-yaml notranslate" data-language="yaml">Ensure network interface exists:
    azurearm_network.network_interface_present:
        - name: iface1
        - subnet: vnet1_sn1
        - virtual_network: vnet1
        - resource_group: group1
        - ip_configurations:
          - name: iface1_ipc1
            public_ip_address: pub_ip2
        - dns_settings:
            internal_dns_name_label: decisionlab-int-test-label
        - primary: True
        - enable_accelerated_networking: True
        - enable_ip_forwarding: False
        - network_security_group: nsg1
        - connection_auth: {{ profile }}
        - require:
          - azurearm_network: Ensure subnet exists
          - azurearm_network: Ensure network security group exists
          - azurearm_network: Ensure another public IP exists</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.states.azurearm_network.network_security_group_absent"> salt.states.azurearm_network.network_security_group_absent(name, resource_group, connection_auth=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Ensure a network security group does not exist in the resource group.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>name</strong> -- Name of the network security group.</p></li> <li><p><strong>resource_group</strong> -- The resource group assigned to the network security group.</p></li> <li><p><strong>connection_auth</strong> -- A dict with subscription and authentication parameters to be used in connecting to the Azure Resource Manager API.</p></li> </ul> </dd> </dl> </dd>
</dl> <dl class="py function"> <h3 id="salt.states.azurearm_network.network_security_group_present"> salt.states.azurearm_network.network_security_group_present(name, resource_group, tags=None, security_rules=None, connection_auth=None, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Ensure a network security group exists.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>name</strong> -- Name of the network security group.</p></li> <li><p><strong>resource_group</strong> -- The resource group assigned to the network security group.</p></li> <li><p><strong>tags</strong> -- A dictionary of strings can be passed as tag metadata to the network security group object.</p></li> <li><p><strong>security_rules</strong> -- An optional list of dictionaries representing valid SecurityRule objects. See the documentation for the security_rule_present state or security_rule_create_or_update execution module for more information on required and optional parameters for security rules. The rules are only managed if this parameter is present. When this parameter is absent, implemented rules will not be removed, and will merely become unmanaged.</p></li> <li><p><strong>connection_auth</strong> -- A dict with subscription and authentication parameters to be used in connecting to the Azure Resource Manager API.</p></li> </ul> </dd> </dl> <p>Example usage:</p> <pre class="highlight-yaml notranslate" data-language="yaml">Ensure network security group exists:
    azurearm_network.network_security_group_present:
        - name: nsg1
        - resource_group: group1
        - security_rules:
          - name: nsg1_rule1
            priority: 100
            protocol: tcp
            access: allow
            direction: outbound
            source_address_prefix: virtualnetwork
            destination_address_prefix: internet
            source_port_range: '*'
            destination_port_range: '*'
          - name: nsg1_rule2
            priority: 101
            protocol: tcp
            access: allow
            direction: inbound
            source_address_prefix: internet
            destination_address_prefix: virtualnetwork
            source_port_range: '*'
            destination_port_ranges:
              - '80'
              - '443'
        - tags:
            contact_name: Elmer Fudd Gantry
        - connection_auth: {{ profile }}
        - require:
          - azurearm_resource: Ensure resource group exists</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.states.azurearm_network.public_ip_address_absent"> salt.states.azurearm_network.public_ip_address_absent(name, resource_group, connection_auth=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Ensure a public IP address does not exist in the resource group.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>name</strong> -- Name of the public IP address.</p></li> <li><p><strong>resource_group</strong> -- The resource group assigned to the public IP address.</p></li> <li><p><strong>connection_auth</strong> -- A dict with subscription and authentication parameters to be used in connecting to the Azure Resource Manager API.</p></li> </ul> </dd> </dl> </dd>
</dl> <dl class="py function"> <h3 id="salt.states.azurearm_network.public_ip_address_present"> salt.states.azurearm_network.public_ip_address_present(name, resource_group, tags=None, sku=None, public_ip_allocation_method=None, public_ip_address_version=None, dns_settings=None, idle_timeout_in_minutes=None, connection_auth=None, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Ensure a public IP address exists.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>name</strong> -- Name of the public IP address.</p></li> <li><p><strong>resource_group</strong> -- The resource group assigned to the public IP address.</p></li> <li><p><strong>dns_settings</strong> -- An optional dictionary representing a valid PublicIPAddressDnsSettings object. Parameters include 'domain_name_label' and 'reverse_fqdn', which accept strings. The 'domain_name_label' parameter is concatenated with the regionalized DNS zone make up the fully qualified domain name associated with the public IP address. If a domain name label is specified, an A DNS record is created for the public IP in the Microsoft Azure DNS system. The 'reverse_fqdn' parameter is a user-visible, fully qualified domain name that resolves to this public IP address. If the reverse FQDN is specified, then a PTR DNS record is created pointing from the IP address in the in-addr.arpa domain to the reverse FQDN.</p></li> <li><p><strong>sku</strong> -- The public IP address SKU, which can be 'Basic' or 'Standard'.</p></li> <li><p><strong>public_ip_allocation_method</strong> -- The public IP allocation method. Possible values are: 'Static' and 'Dynamic'.</p></li> <li><p><strong>public_ip_address_version</strong> -- The public IP address version. Possible values are: 'IPv4' and 'IPv6'.</p></li> <li><p><strong>idle_timeout_in_minutes</strong> -- An integer representing the idle timeout of the public IP address.</p></li> <li><p><strong>tags</strong> -- A dictionary of strings can be passed as tag metadata to the public IP address object.</p></li> <li><p><strong>connection_auth</strong> -- A dict with subscription and authentication parameters to be used in connecting to the Azure Resource Manager API.</p></li> </ul> </dd> </dl> <p>Example usage:</p> <pre class="highlight-yaml notranslate" data-language="yaml">Ensure public IP exists:
    azurearm_network.public_ip_address_present:
        - name: pub_ip1
        - resource_group: group1
        - dns_settings:
            domain_name_label: decisionlab-ext-test-label
        - sku: basic
        - public_ip_allocation_method: static
        - public_ip_address_version: ipv4
        - idle_timeout_in_minutes: 4
        - tags:
            contact_name: Elmer Fudd Gantry
        - connection_auth: {{ profile }}
        - require:
          - azurearm_resource: Ensure resource group exists</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.states.azurearm_network.route_absent"> salt.states.azurearm_network.route_absent(name, route_table, resource_group, connection_auth=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Ensure a route table does not exist in the resource group.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>name</strong> -- Name of the route table.</p></li> <li><p><strong>route_table</strong> -- The name of the existing route table containing the route.</p></li> <li><p><strong>resource_group</strong> -- The resource group assigned to the route table.</p></li> <li><p><strong>connection_auth</strong> -- A dict with subscription and authentication parameters to be used in connecting to the Azure Resource Manager API.</p></li> </ul> </dd> </dl> </dd>
</dl> <dl class="py function"> <h3 id="salt.states.azurearm_network.route_present"> salt.states.azurearm_network.route_present(name, address_prefix, next_hop_type, route_table, resource_group, next_hop_ip_address=None, connection_auth=None, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Ensure a route exists within a route table.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>name</strong> -- Name of the route.</p></li> <li><p><strong>address_prefix</strong> -- The destination CIDR to which the route applies.</p></li> <li><p><strong>next_hop_type</strong> -- The type of Azure hop the packet should be sent to. Possible values are: 'VirtualNetworkGateway', 'VnetLocal', 'Internet', 'VirtualAppliance', and 'None'.</p></li> <li><p><strong>next_hop_ip_address</strong> -- The IP address packets should be forwarded to. Next hop values are only allowed in routes where the next hop type is 'VirtualAppliance'.</p></li> <li><p><strong>route_table</strong> -- The name of the existing route table which will contain the route.</p></li> <li><p><strong>resource_group</strong> -- The resource group assigned to the route table.</p></li> <li><p><strong>connection_auth</strong> -- A dict with subscription and authentication parameters to be used in connecting to the Azure Resource Manager API.</p></li> </ul> </dd> </dl> <p>Example usage:</p> <pre class="highlight-yaml notranslate" data-language="yaml">Ensure route exists:
    azurearm_network.route_present:
        - name: rt1_route2
        - route_table: rt1
        - resource_group: group1
        - address_prefix: '192.168.0.0/16'
        - next_hop_type: vnetlocal
        - connection_auth: {{ profile }}
        - require:
          - azurearm_network: Ensure route table exists</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.states.azurearm_network.route_table_absent"> salt.states.azurearm_network.route_table_absent(name, resource_group, connection_auth=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Ensure a route table does not exist in the resource group.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>name</strong> -- Name of the route table.</p></li> <li><p><strong>resource_group</strong> -- The resource group assigned to the route table.</p></li> <li><p><strong>connection_auth</strong> -- A dict with subscription and authentication parameters to be used in connecting to the Azure Resource Manager API.</p></li> </ul> </dd> </dl> </dd>
</dl> <dl class="py function"> <h3 id="salt.states.azurearm_network.route_table_present"> salt.states.azurearm_network.route_table_present(name, resource_group, tags=None, routes=None, disable_bgp_route_propagation=None, connection_auth=None, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Ensure a route table exists.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>name</strong> -- Name of the route table.</p></li> <li><p><strong>resource_group</strong> -- The resource group assigned to the route table.</p></li> <li><p><strong>routes</strong> -- An optional list of dictionaries representing valid Route objects contained within a route table. See the documentation for the route_present state or route_create_or_update execution module for more information on required and optional parameters for routes. The routes are only managed if this parameter is present. When this parameter is absent, implemented routes will not be removed, and will merely become unmanaged.</p></li> <li><p><strong>disable_bgp_route_propagation</strong> -- An optional boolean parameter setting whether to disable the routes learned by BGP on the route table.</p></li> <li><p><strong>tags</strong> -- A dictionary of strings can be passed as tag metadata to the route table object.</p></li> <li><p><strong>connection_auth</strong> -- A dict with subscription and authentication parameters to be used in connecting to the Azure Resource Manager API.</p></li> </ul> </dd> </dl> <p>Example usage:</p> <pre class="highlight-yaml notranslate" data-language="yaml">Ensure route table exists:
    azurearm_network.route_table_present:
        - name: rt1
        - resource_group: group1
        - routes:
          - name: rt1_route1
            address_prefix: '0.0.0.0/0'
            next_hop_type: internet
          - name: rt1_route2
            address_prefix: '192.168.0.0/16'
            next_hop_type: vnetlocal
        - tags:
            contact_name: Elmer Fudd Gantry
        - connection_auth: {{ profile }}
        - require:
          - azurearm_resource: Ensure resource group exists</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.states.azurearm_network.security_rule_absent"> salt.states.azurearm_network.security_rule_absent(name, security_group, resource_group, connection_auth=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Ensure a security rule does not exist in the network security group.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>name</strong> -- Name of the security rule.</p></li> <li><p><strong>security_group</strong> -- The network security group containing the security rule.</p></li> <li><p><strong>resource_group</strong> -- The resource group assigned to the network security group.</p></li> <li><p><strong>connection_auth</strong> -- A dict with subscription and authentication parameters to be used in connecting to the Azure Resource Manager API.</p></li> </ul> </dd> </dl> </dd>
</dl> <dl class="py function"> <h3 id="salt.states.azurearm_network.security_rule_present"> salt.states.azurearm_network.security_rule_present(name, access, direction, priority, protocol, security_group, resource_group, destination_address_prefix=None, destination_port_range=None, source_address_prefix=None, source_port_range=None, description=None, destination_address_prefixes=None, destination_port_ranges=None, source_address_prefixes=None, source_port_ranges=None, connection_auth=None, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Ensure a security rule exists.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>name</strong> -- Name of the security rule.</p></li> <li><p><strong>access</strong> -- 'allow' or 'deny'</p></li> <li><p><strong>direction</strong> -- 'inbound' or 'outbound'</p></li> <li><p><strong>priority</strong> -- Integer between 100 and 4096 used for ordering rule application.</p></li> <li><p><strong>protocol</strong> -- 'tcp', 'udp', or '*'</p></li> <li><p><strong>security_group</strong> -- The name of the existing network security group to contain the security rule.</p></li> <li><p><strong>resource_group</strong> -- The resource group assigned to the network security group.</p></li> <li><p><strong>description</strong> -- Optional description of the security rule.</p></li> <li><p><strong>destination_address_prefix</strong> -- The CIDR or destination IP range. Asterix '*' can also be used to match all destination IPs. Default tags such as 'VirtualNetwork', 'AzureLoadBalancer' and 'Internet' can also be used. If this is an ingress rule, specifies where network traffic originates from.</p></li> <li><p><strong>destination_port_range</strong> -- The destination port or range. Integer or range between 0 and 65535. Asterix '*' can also be used to match all ports.</p></li> <li><p><strong>source_address_prefix</strong> -- The CIDR or source IP range. Asterix '*' can also be used to match all source IPs. Default tags such as 'VirtualNetwork', 'AzureLoadBalancer' and 'Internet' can also be used. If this is an ingress rule, specifies where network traffic originates from.</p></li> <li><p><strong>source_port_range</strong> -- The source port or range. Integer or range between 0 and 65535. Asterix '*' can also be used to match all ports.</p></li> <li><p><strong>destination_address_prefixes</strong> -- A list of destination_address_prefix values. This parameter overrides destination_address_prefix and will cause any value entered there to be ignored.</p></li> <li><p><strong>destination_port_ranges</strong> -- A list of destination_port_range values. This parameter overrides destination_port_range and will cause any value entered there to be ignored.</p></li> <li><p><strong>source_address_prefixes</strong> -- A list of source_address_prefix values. This parameter overrides source_address_prefix and will cause any value entered there to be ignored.</p></li> <li><p><strong>source_port_ranges</strong> -- A list of source_port_range values. This parameter overrides source_port_range and will cause any value entered there to be ignored.</p></li> <li><p><strong>connection_auth</strong> -- A dict with subscription and authentication parameters to be used in connecting to the Azure Resource Manager API.</p></li> </ul> </dd> </dl> <p>Example usage:</p> <pre class="highlight-yaml notranslate" data-language="yaml">Ensure security rule exists:
    azurearm_network.security_rule_present:
        - name: nsg1_rule2
        - security_group: nsg1
        - resource_group: group1
        - priority: 101
        - protocol: tcp
        - access: allow
        - direction: inbound
        - source_address_prefix: internet
        - destination_address_prefix: virtualnetwork
        - source_port_range: '*'
        - destination_port_ranges:
          - '80'
          - '443'
        - connection_auth: {{ profile }}
        - require:
          - azurearm_network: Ensure network security group exists</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.states.azurearm_network.subnet_absent"> salt.states.azurearm_network.subnet_absent(name, virtual_network, resource_group, connection_auth=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Ensure a virtual network does not exist in the virtual network.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>name</strong> -- Name of the subnet.</p></li> <li><p><strong>virtual_network</strong> -- Name of the existing virtual network containing the subnet.</p></li> <li><p><strong>resource_group</strong> -- The resource group assigned to the virtual network.</p></li> <li><p><strong>connection_auth</strong> -- A dict with subscription and authentication parameters to be used in connecting to the Azure Resource Manager API.</p></li> </ul> </dd> </dl> </dd>
</dl> <dl class="py function"> <h3 id="salt.states.azurearm_network.subnet_present"> salt.states.azurearm_network.subnet_present(name, address_prefix, virtual_network, resource_group, security_group=None, route_table=None, connection_auth=None, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Ensure a subnet exists.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>name</strong> -- Name of the subnet.</p></li> <li><p><strong>address_prefix</strong> -- A CIDR block used by the subnet within the virtual network.</p></li> <li><p><strong>virtual_network</strong> -- Name of the existing virtual network to contain the subnet.</p></li> <li><p><strong>resource_group</strong> -- The resource group assigned to the virtual network.</p></li> <li><p><strong>security_group</strong> -- The name of the existing network security group to assign to the subnet.</p></li> <li><p><strong>route_table</strong> -- The name of the existing route table to assign to the subnet.</p></li> <li><p><strong>connection_auth</strong> -- A dict with subscription and authentication parameters to be used in connecting to the Azure Resource Manager API.</p></li> </ul> </dd> </dl> <p>Example usage:</p> <pre class="highlight-yaml notranslate" data-language="yaml">Ensure subnet exists:
    azurearm_network.subnet_present:
        - name: vnet1_sn1
        - virtual_network: vnet1
        - resource_group: group1
        - address_prefix: '192.168.1.0/24'
        - security_group: nsg1
        - route_table: rt1
        - connection_auth: {{ profile }}
        - require:
          - azurearm_network: Ensure virtual network exists
          - azurearm_network: Ensure network security group exists
          - azurearm_network: Ensure route table exists</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.states.azurearm_network.virtual_network_absent"> salt.states.azurearm_network.virtual_network_absent(name, resource_group, connection_auth=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Ensure a virtual network does not exist in the resource group.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>name</strong> -- Name of the virtual network.</p></li> <li><p><strong>resource_group</strong> -- The resource group assigned to the virtual network.</p></li> <li><p><strong>connection_auth</strong> -- A dict with subscription and authentication parameters to be used in connecting to the Azure Resource Manager API.</p></li> </ul> </dd> </dl> </dd>
</dl> <dl class="py function"> <h3 id="salt.states.azurearm_network.virtual_network_present"> salt.states.azurearm_network.virtual_network_present(name, address_prefixes, resource_group, dns_servers=None, tags=None, connection_auth=None, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2019.2.0.</span></p> </div> <p>Ensure a virtual network exists.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>name</strong> -- Name of the virtual network.</p></li> <li><p><strong>resource_group</strong> -- The resource group assigned to the virtual network.</p></li> <li><p><strong>address_prefixes</strong> -- A list of CIDR blocks which can be used by subnets within the virtual network.</p></li> <li><p><strong>dns_servers</strong> -- A list of DNS server addresses.</p></li> <li><p><strong>tags</strong> -- A dictionary of strings can be passed as tag metadata to the virtual network object.</p></li> <li><p><strong>connection_auth</strong> -- A dict with subscription and authentication parameters to be used in connecting to the Azure Resource Manager API.</p></li> </ul> </dd> </dl> <p>Example usage:</p> <pre class="highlight-yaml notranslate" data-language="yaml">Ensure virtual network exists:
    azurearm_network.virtual_network_present:
        - name: vnet1
        - resource_group: group1
        - address_prefixes:
            - '10.0.0.0/8'
            - '192.168.0.0/16'
        - dns_servers:
            - '8.8.8.8'
        - tags:
            contact_name: Elmer Fudd Gantry
        - connection_auth: {{ profile }}
        - require:
          - azurearm_resource: Ensure resource group exists</pre> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/states/all/salt.states.azurearm_network.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/states/all/salt.states.azurearm_network.html</a>
  </p>
</div>
