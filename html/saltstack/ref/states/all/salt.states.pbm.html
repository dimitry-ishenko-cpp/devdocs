<h1>salt.states.pbm</h1> <p>Manages VMware storage policies (called pbm because the vCenter endpoint is /pbm)</p> <p class="rubric">Examples</p> <div class="section" id="storage-policy"> <h2>Storage policy</h2> <pre class="highlight-python notranslate" data-language="python">{
    "name": "salt_storage_policy"
    "description": "Managed by Salt. Random capability values.",
    "resource_type": "STORAGE",
    "subprofiles": [
        {
            "capabilities": [
                {
                    "setting": {
                        "type": "scalar",
                        "value": 2
                    },
                    "namespace": "VSAN",
                    "id": "hostFailuresToTolerate"
                },
                {
                    "setting": {
                        "type": "scalar",
                        "value": 2
                    },
                    "namespace": "VSAN",
                    "id": "stripeWidth"
                },
                {
                    "setting": {
                        "type": "scalar",
                        "value": true
                    },
                    "namespace": "VSAN",
                    "id": "forceProvisioning"
                },
                {
                    "setting": {
                        "type": "scalar",
                        "value": 50
                    },
                    "namespace": "VSAN",
                    "id": "proportionalCapacity"
                },
                {
                    "setting": {
                        "type": "scalar",
                        "value": 0
                    },
                    "namespace": "VSAN",
                    "id": "cacheReservation"
                }
            ],
            "name": "Rule-Set 1: VSAN",
            "force_provision": null
        }
    ],
}</pre> <div class="section" id="dependencies"> <h3>Dependencies</h3> <ul class="simple"> <li><p>pyVmomi Python Module</p></li> </ul> </div> </div> <div class="section" id="pyvmomi"> <h2>pyVmomi</h2> <p>PyVmomi can be installed via pip:</p> <pre class="highlight-bash notranslate" data-language="bash">pip install pyVmomi</pre> <div class="admonition note"> <p class="admonition-title">Note</p> <p>Version 6.0 of pyVmomi has some problems with SSL error handling on certain versions of Python. If using version 6.0 of pyVmomi, Python 2.6, Python 2.7.9, or newer must be present. This is due to an upstream dependency in pyVmomi 6.0 that is not supported in Python versions 2.7 to 2.7.8. If the version of Python is not in the supported range, you will need to install an earlier version of pyVmomi. See <cite>Issue #29537 &lt;https://github.com/saltstack/salt/issues/29537&gt;</cite> for more information.</p> </div> <dl class="py function"> <h3 id="salt.states.pbm.default_storage_policy_assigned"> salt.states.pbm.default_storage_policy_assigned(name, policy, datastore)</h3> <dd>
<p>Assigns a default storage policy to a datastore</p> <dl class="simple"> <dt>policy</dt>
<dd>
<p>Name of storage policy</p> </dd> <dt>datastore</dt>
<dd>
<p>Name of datastore</p> </dd> </dl> </dd>
</dl> <dl class="py function"> <h3 id="salt.states.pbm.default_vsan_policy_configured"> salt.states.pbm.default_vsan_policy_configured(name, policy)</h3> <dd>
<p>Configures the default VSAN policy on a vCenter. The state assumes there is only one default VSAN policy on a vCenter.</p> <dl class="simple"> <dt>policy</dt>
<dd>
<p>Dict representation of a policy</p> </dd> </dl> </dd>
</dl> <dl class="py function"> <h3 id="salt.states.pbm.storage_policies_configured"> salt.states.pbm.storage_policies_configured(name, policies)</h3> <dd>
<p>Configures storage policies on a vCenter.</p> <dl class="simple"> <dt>policies</dt>
<dd>
<p>List of dict representation of the required storage policies</p> </dd> </dl> </dd>
</dl> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/states/all/salt.states.pbm.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/states/all/salt.states.pbm.html</a>
  </p>
</div>
