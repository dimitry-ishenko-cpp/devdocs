<h1>salt.states.postgres_user</h1> <div class="section" id="management-of-postgresql-users-roles"> <h2>Management of PostgreSQL users (roles)</h2> <p>The postgres_users module is used to create and manage Postgres users.</p> <pre class="highlight-yaml notranslate" data-language="yaml">frank:
  postgres_user.present</pre> <dl class="py function"> <h3 id="salt.states.postgres_user.absent"> salt.states.postgres_user.absent(name, user=None, maintenance_db=None, db_password=None, db_host=None, db_port=None, db_user=None)</h3> <dd>
<p>Ensure that the named user is absent</p> <dl> <dt>name</dt>
<dd>
<p>The username of the user to remove</p> </dd> <dt>user</dt>
<dd>
<p>System user all operations should be performed on behalf of</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 0.17.0.</span></p> </div> </dd> <dt>db_user</dt>
<dd>
<p>database username if different from config or default</p> </dd> <dt>db_password</dt>
<dd>
<p>user password if any password for a specified user</p> </dd> <dt>db_host</dt>
<dd>
<p>Database host if different from config or default</p> </dd> <dt>db_port</dt>
<dd>
<p>Database port if different from config or default</p> </dd> </dl> </dd>
</dl> <dl class="py function"> <h3 id="salt.states.postgres_user.present"> salt.states.postgres_user.present(name, createdb=None, createroles=None, encrypted=None, superuser=None, replication=None, inherit=None, login=None, password=None, default_password=None, refresh_password=None, valid_until=None, groups=None, user=None, maintenance_db=None, db_password=None, db_host=None, db_port=None, db_user=None)</h3> <dd>
<p>Ensure that the named user is present with the specified privileges Please note that the user/group notion in postgresql is just abstract, we have roles, where users can be seen as roles with the LOGIN privilege and groups the others.</p> <dl> <dt>name</dt>
<dd>
<p>The name of the system user to manage.</p> </dd> <dt>createdb</dt>
<dd>
<p>Is the user allowed to create databases?</p> </dd> <dt>createroles</dt>
<dd>
<p>Is the user allowed to create other users?</p> </dd> <dt>encrypted</dt>
<dd>
<p>How the password should be stored.</p> <p>If encrypted is <code class="docutils literal notranslate"><span class="pre">None</span></code>, <code class="docutils literal notranslate"><span class="pre">True</span></code>, or <code class="docutils literal notranslate"><span class="pre">md5</span></code>, it will use PostgreSQL's MD5 algorithm.</p> <p>If encrypted is <code class="docutils literal notranslate"><span class="pre">False</span></code>, it will be stored in plaintext.</p> <p>If encrypted is <code class="docutils literal notranslate"><span class="pre">scram-sha-256</span></code>, it will use the algorithm described in RFC 7677.</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3003: </span>Prior versions only supported <code class="docutils literal notranslate"><span class="pre">True</span></code> and <code class="docutils literal notranslate"><span class="pre">False</span></code></p> </div> </dd> <dt>login</dt>
<dd>
<p>Should the group have login perm</p> </dd> <dt>inherit</dt>
<dd>
<p>Should the group inherit permissions</p> </dd> <dt>superuser</dt>
<dd>
<p>Should the new user be a "superuser"</p> </dd> <dt>replication</dt>
<dd>
<p>Should the new user be allowed to initiate streaming replication</p> </dd> <dt>password</dt>
<dd>
<p>The user's password. It can be either a plain string or a pre-hashed password:</p> <pre class="highlight-default notranslate" data-language="default">'md5{MD5OF({password}{role}}'
'SCRAM-SHA-256${iterations}:{salt}${stored_key}:{server_key}'</pre> <p>If encrypted is not <code class="docutils literal notranslate"><span class="pre">False</span></code>, then the password will be converted to the appropriate format above, if not already. As a consequence, passwords that start with "md5" or "SCRAM-SHA-256" cannot be used.</p> </dd> <dt>default_password</dt>
<dd>
<p>The password used only when creating the user, unless password is set.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.0.</span></p> </div> </dd> <dt>refresh_password</dt>
<dd>
<p>Password refresh flag</p> <p>Boolean attribute to specify whether to password comparison check should be performed.</p> <p>If refresh_password is <code class="docutils literal notranslate"><span class="pre">True</span></code>, the password will be automatically updated without extra password change check.</p> <p>This behaviour makes it possible to execute in environments without superuser access available, e.g. Amazon RDS for PostgreSQL</p> </dd> <dt>valid_until</dt>
<dd>
<p>A date and time after which the role's password is no longer valid.</p> </dd> <dt>groups</dt>
<dd>
<p>A string of comma separated groups the user should be in</p> </dd> <dt>user</dt>
<dd>
<p>System user all operations should be performed on behalf of</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 0.17.0.</span></p> </div> </dd> <dt>db_user</dt>
<dd>
<p>Postgres database username, if different from config or default.</p> </dd> <dt>db_password</dt>
<dd>
<p>Postgres user's password, if any password, for a specified db_user.</p> </dd> <dt>db_host</dt>
<dd>
<p>Postgres database host, if different from config or default.</p> </dd> <dt>db_port</dt>
<dd>
<p>Postgres database port, if different from config or default.</p> </dd> </dl> </dd>
</dl> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/states/all/salt.states.postgres_user.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/states/all/salt.states.postgres_user.html</a>
  </p>
</div>
