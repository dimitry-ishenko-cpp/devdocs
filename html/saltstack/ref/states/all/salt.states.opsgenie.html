<h1>salt.states.opsgenie</h1> <div class="section" id="create-close-an-alert-in-opsgenie"> <h2>Create/Close an alert in OpsGenie</h2> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.0.</span></p> </div> <p>This state is useful for creating or closing alerts in OpsGenie during state runs.</p> <pre class="highlight-yaml notranslate" data-language="yaml">used_space:
  disk.status:
    - name: /
    - maximum: 79%
    - minimum: 20%

opsgenie_create_action_sender:
  opsgenie.create_alert:
    - api_key: XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX
    - reason: 'Disk capacity is out of designated range.'
    - name: disk.status
    - onfail:
      - disk: used_space

opsgenie_close_action_sender:
  opsgenie.close_alert:
    - api_key: XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX
    - name: disk.status
    - require:
      - disk: used_space</pre> <dl class="py function"> <h3 id="salt.states.opsgenie.close_alert"> salt.states.opsgenie.close_alert(name=None, api_key=None, reason='Conditions are met.', action_type='Close')</h3> <dd>
<p>Close an alert in OpsGenie. It's a wrapper function for create_alert. Example usage with Salt's requisites and other global state arguments could be found above.</p> <p>Required Parameters:</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>It will be used as alert's alias. If you want to use the close functionality you must provide name field for both states like in above case.</p> </dd> </dl> <p>Optional Parameters:</p> <dl class="simple"> <dt>api_key</dt>
<dd>
<p>It's the API Key you've copied while adding integration in OpsGenie.</p> </dd> <dt>reason</dt>
<dd>
<p>It will be used as alert's default message in OpsGenie.</p> </dd> <dt>action_type</dt>
<dd>
<p>OpsGenie supports the default values Create/Close for action_type. You can customize this field with OpsGenie's custom actions for other purposes like adding notes or acknowledging alerts.</p> </dd> </dl> </dd>
</dl> <dl class="py function"> <h3 id="salt.states.opsgenie.create_alert"> salt.states.opsgenie.create_alert(name=None, api_key=None, reason=None, action_type='Create')</h3> <dd>
<p>Create an alert in OpsGenie. Example usage with Salt's requisites and other global state arguments could be found above.</p> <p>Required Parameters:</p> <dl class="simple"> <dt>api_key</dt>
<dd>
<p>It's the API Key you've copied while adding integration in OpsGenie.</p> </dd> <dt>reason</dt>
<dd>
<p>It will be used as alert's default message in OpsGenie.</p> </dd> </dl> <p>Optional Parameters:</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>It will be used as alert's alias. If you want to use the close functionality you must provide name field for both states like in above case.</p> </dd> <dt>action_type</dt>
<dd>
<p>OpsGenie supports the default values Create/Close for action_type. You can customize this field with OpsGenie's custom actions for other purposes like adding notes or acknowledging alerts.</p> </dd> </dl> </dd>
</dl> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/states/all/salt.states.opsgenie.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/states/all/salt.states.opsgenie.html</a>
  </p>
</div>
