<h1>salt.states.mysql_user</h1> <div class="section" id="management-of-mysql-users"> <h2>Management of MySQL users</h2> <dl class="field-list simple"> <dt class="field-odd">depends</dt> <dd class="field-odd">
<ul class="simple"> <li><p>MySQLdb Python module</p></li> </ul> </dd> <dt class="field-even">configuration</dt> <dd class="field-even">
<p>See <a class="reference internal" href="../../modules/all/salt.modules.mysql.html#module-salt.modules.mysql" title="salt.modules.mysql"><code class="xref py py-mod docutils literal notranslate"><span class="pre">salt.modules.mysql</span></code></a> for setup instructions.</p> </dd> </dl> <pre class="highlight-yaml notranslate" data-language="yaml">frank:
  mysql_user.present:
    - host: localhost
    - password: bobcat</pre> <div class="versionadded"> <p><span class="versionmodified added">New in version 0.16.2: </span>Authentication overrides have been added.</p> </div> <p>The MySQL authentication information specified in the minion config file can be overridden in states using the following arguments: <code class="docutils literal notranslate"><span class="pre">connection_host</span></code>, <code class="docutils literal notranslate"><span class="pre">connection_port</span></code>, <code class="docutils literal notranslate"><span class="pre">connection_user</span></code>, <code class="docutils literal notranslate"><span class="pre">connection_pass</span></code>, <code class="docutils literal notranslate"><span class="pre">connection_db</span></code>, <code class="docutils literal notranslate"><span class="pre">connection_unix_socket</span></code>, <code class="docutils literal notranslate"><span class="pre">connection_default_file</span></code> and <code class="docutils literal notranslate"><span class="pre">connection_charset</span></code>.</p> <pre class="highlight-yaml notranslate" data-language="yaml">frank:
  mysql_user.present:
    - host: localhost
    - password: "bob@cat"
    - connection_user: someuser
    - connection_pass: somepass
    - connection_charset: utf8
    - saltenv:
      - LC_ALL: "en_US.utf8"</pre> <p>This state is not able to grant permissions for the user. See <a class="reference internal" href="salt.states.mysql_grants.html#module-salt.states.mysql_grants" title="salt.states.mysql_grants"><code class="xref py py-mod docutils literal notranslate"><span class="pre">salt.states.mysql_grants</span></code></a> for further instructions.</p> <dl class="py function"> <h3 id="salt.states.mysql_user.absent"> salt.states.mysql_user.absent(name, host='localhost', **connection_args)</h3> <dd>
<p>Ensure that the named user is absent</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>The name of the user to remove</p> </dd> </dl> </dd>
</dl> <dl class="py function"> <h3 id="salt.states.mysql_user.present"> salt.states.mysql_user.present(name, host='localhost', password=None, password_hash=None, allow_passwordless=False, unix_socket=False, password_column=None, auth_plugin='mysql_native_password', **connection_args)</h3> <dd>
<p>Ensure that the named user is present with the specified properties. A passwordless user can be configured by omitting <code class="docutils literal notranslate"><span class="pre">password</span></code> and <code class="docutils literal notranslate"><span class="pre">password_hash</span></code>, and setting <code class="docutils literal notranslate"><span class="pre">allow_passwordless</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p> <dl> <dt>name</dt>
<dd>
<p>The name of the user to manage</p> </dd> <dt>host</dt>
<dd>
<p>Host for which this user/password combo applies</p> </dd> <dt>password</dt>
<dd>
<p>The password to use for this user. Will take precedence over the <code class="docutils literal notranslate"><span class="pre">password_hash</span></code> option if both are specified.</p> </dd> <dt>password_hash</dt>
<dd>
<p>The password in hashed form. Be sure to quote the password because YAML doesn't like the <code class="docutils literal notranslate"><span class="pre">*</span></code>. A password hash can be obtained from the mysql command-line client like so:</p> <pre class="highlight-default notranslate" data-language="default">mysql&gt; SELECT PASSWORD('mypass');
+-------------------------------------------+
| PASSWORD('mypass')                        |
+-------------------------------------------+
| *6C8989366EAF75BB670AD8EA7A7FC1176A95CEF4 |
+-------------------------------------------+
1 row in set (0.00 sec)</pre> </dd> <dt>allow_passwordless</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, then <code class="docutils literal notranslate"><span class="pre">password</span></code> and <code class="docutils literal notranslate"><span class="pre">password_hash</span></code> can be omitted to permit a passwordless login.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 0.16.2.</span></p> </div> </dd> <dt>unix_socket</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code> and allow_passwordless is <code class="docutils literal notranslate"><span class="pre">True</span></code>, the unix_socket auth plugin will be used.</p> </dd> </dl> </dd>
</dl> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/states/all/salt.states.mysql_user.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/states/all/salt.states.mysql_user.html</a>
  </p>
</div>
