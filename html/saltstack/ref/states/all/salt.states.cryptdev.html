<h1>salt.states.cryptdev</h1> <div class="section" id="opening-of-encrypted-devices"> <h2>Opening of Encrypted Devices</h2> <p>Ensure that an encrypted device is mapped with the <cite>mapped</cite> function:</p> <pre class="highlight-yaml notranslate" data-language="yaml">mappedname:
  cryptdev.mapped:
    - device: /dev/sdb1
    - keyfile: /etc/keyfile.key
    - opts:
      - size=256

swap:
  crypted.mapped:
    - device: /dev/sdx4
    - keyfile: /dev/urandom
    - opts: swap,cipher=aes-cbc-essiv:sha256,size=256

mappedbyuuid:
  crypted.mapped:
    - device: UUID=066e0200-2867-4ebe-b9e6-f30026ca2314
    - keyfile: /etc/keyfile.key
    - config: /etc/alternate-crypttab</pre> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.0.</span></p> </div> <dl class="py function"> <h3 id="salt.states.cryptdev.mapped"> salt.states.cryptdev.mapped(name, device, keyfile=None, opts=None, config='/etc/crypttab', persist=True, immediate=False, match_on='name')</h3> <dd>
<p>Verify that a device is mapped</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>The name under which the device is to be mapped</p> </dd> <dt>device</dt>
<dd>
<p>The device name, typically the device node, such as <code class="docutils literal notranslate"><span class="pre">/dev/sdb1</span></code> or <code class="docutils literal notranslate"><span class="pre">UUID=066e0200-2867-4ebe-b9e6-f30026ca2314</span></code>.</p> </dd> <dt>keyfile</dt>
<dd>
<p>Either <code class="docutils literal notranslate"><span class="pre">None</span></code> if the password is to be entered manually on boot, or an absolute path to a keyfile. If the password is to be asked interactively, the mapping cannot be performed with <code class="docutils literal notranslate"><span class="pre">immediate=True</span></code>.</p> </dd> <dt>opts</dt>
<dd>
<p>A list object of options or a comma delimited list</p> </dd> <dt>config</dt>
<dd>
<p>Set an alternative location for the crypttab, if the map is persistent, Default is <code class="docutils literal notranslate"><span class="pre">/etc/crypttab</span></code></p> </dd> <dt>persist</dt>
<dd>
<p>Set if the map should be saved in the crypttab, Default is <code class="docutils literal notranslate"><span class="pre">True</span></code></p> </dd> <dt>immediate</dt>
<dd>
<p>Set if the device mapping should be executed immediately. Requires that the keyfile not be <code class="docutils literal notranslate"><span class="pre">None</span></code>, because the password cannot be asked interactively. Note that options are not passed through on the initial mapping. Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p> </dd> <dt>match_on</dt>
<dd>
<p>A name or list of crypttab properties on which this state should be applied. Default is <code class="docutils literal notranslate"><span class="pre">name</span></code>, meaning that the line is matched only by the name parameter. If the desired configuration requires two devices mapped to the same name, supply a list of parameters to match on.</p> </dd> </dl> </dd>
</dl> <dl class="py function"> <h3 id="salt.states.cryptdev.unmapped"> salt.states.cryptdev.unmapped(name, config='/etc/crypttab', persist=True, immediate=False)</h3> <dd>
<p>Ensure that a device is unmapped</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>The name to ensure is not mapped</p> </dd> <dt>config</dt>
<dd>
<p>Set an alternative location for the crypttab, if the map is persistent, Default is <code class="docutils literal notranslate"><span class="pre">/etc/crypttab</span></code></p> </dd> <dt>persist</dt>
<dd>
<p>Set if the map should be removed from the crypttab. Default is <code class="docutils literal notranslate"><span class="pre">True</span></code></p> </dd> <dt>immediate</dt>
<dd>
<p>Set if the device should be unmapped immediately. Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p> </dd> </dl> </dd>
</dl> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/states/all/salt.states.cryptdev.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/states/all/salt.states.cryptdev.html</a>
  </p>
</div>
