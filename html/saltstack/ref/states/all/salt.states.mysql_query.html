<h1>salt.states.mysql_query</h1> <div class="section" id="execution-of-mysql-queries"> <h2>Execution of MySQL queries</h2> <div class="versionadded"> <p><span class="versionmodified added">New in version 2014.7.0.</span></p> </div> <dl class="field-list simple"> <dt class="field-odd">depends</dt> <dd class="field-odd">
<ul class="simple"> <li><p>MySQLdb Python module</p></li> </ul> </dd> <dt class="field-even">configuration</dt> <dd class="field-even">
<p>See <a class="reference internal" href="../../modules/all/salt.modules.mysql.html#module-salt.modules.mysql" title="salt.modules.mysql"><code class="xref py py-mod docutils literal notranslate"><span class="pre">salt.modules.mysql</span></code></a> for setup instructions.</p> </dd> </dl> <p>The mysql_query module is used to execute queries on MySQL databases. Its output may be stored in a file or in a grain.</p> <pre class="highlight-yaml notranslate" data-language="yaml">query_id:
  mysql_query.run
    - database: my_database
    - query:    "SELECT * FROM table;"
    - output:   "/tmp/query_id.txt"</pre> <dl class="py function"> <h3 id="salt.states.mysql_query.run"> salt.states.mysql_query.run(name, database, query, output=None, grain=None, key=None, overwrite=True, check_db_exists=True, client_flags=None, **connection_args)</h3> <dd>
<p>Execute an arbitrary query on the specified database</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>Used only as an ID</p> </dd> <dt>database</dt>
<dd>
<p>The name of the database to execute the query on</p> </dd> <dt>query</dt>
<dd>
<p>The query to execute</p> </dd> <dt>output</dt>
<dd>
<p>grain: output in a grain other: the file to store results None: output to the result comment (default)</p> </dd> <dt>grain:</dt>
<dd>
<p>grain to store the output (need output=grain)</p> </dd> <dt>key:</dt>
<dd>
<p>the specified grain will be treated as a dictionary, the result of this state will be stored under the specified key.</p> </dd> <dt>overwrite:</dt>
<dd>
<p>The file or grain will be overwritten if it already exists (default)</p> </dd> <dt>check_db_exists:</dt>
<dd>
<p>The state run will check that the specified database exists (default=True) before running any queries</p> </dd> <dt>client_flags:</dt>
<dd>
<p>A list of client flags to pass to the MySQL connection. <a class="reference external" href="https://dev.mysql.com/doc/internals/en/capability-flags.html">https://dev.mysql.com/doc/internals/en/capability-flags.html</a></p> </dd> </dl> </dd>
</dl> <dl class="py function"> <h3 id="salt.states.mysql_query.run_file"> salt.states.mysql_query.run_file(name, database, query_file=None, output=None, grain=None, key=None, overwrite=True, saltenv=None, check_db_exists=True, client_flags=None, **connection_args)</h3> <dd>
<p>Execute an arbitrary query on the specified database</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> <dl class="simple"> <dt>name</dt>
<dd>
<p>Used only as an ID</p> </dd> <dt>database</dt>
<dd>
<p>The name of the database to execute the query_file on</p> </dd> <dt>query_file</dt>
<dd>
<p>The file of mysql commands to run</p> </dd> <dt>output</dt>
<dd>
<p>grain: output in a grain other: the file to store results None: output to the result comment (default)</p> </dd> <dt>grain:</dt>
<dd>
<p>grain to store the output (need output=grain)</p> </dd> <dt>key:</dt>
<dd>
<p>the specified grain will be treated as a dictionary, the result of this state will be stored under the specified key.</p> </dd> <dt>overwrite:</dt>
<dd>
<p>The file or grain will be overwritten if it already exists (default)</p> </dd> <dt>saltenv:</dt>
<dd>
<p>The saltenv to pull the query_file from</p> </dd> <dt>check_db_exists:</dt>
<dd>
<p>The state run will check that the specified database exists (default=True) before running any queries</p> </dd> <dt>client_flags:</dt>
<dd>
<p>A list of client flags to pass to the MySQL connection. <a class="reference external" href="https://dev.mysql.com/doc/internals/en/capability-flags.html">https://dev.mysql.com/doc/internals/en/capability-flags.html</a></p> </dd> </dl> </dd>
</dl> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/states/all/salt.states.mysql_query.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/states/all/salt.states.mysql_query.html</a>
  </p>
</div>
