<h1>salt.states.http</h1> <p>HTTP monitoring states</p> <p>Perform an HTTP query and statefully return the result</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.5.0.</span></p> </div> <dl class="py function"> <h3 id="salt.states.http.query"> salt.states.http.query(name, match=None, match_type='string', status=None, status_type='string', wait_for=None, **kwargs)</h3> <dd>
<p>Perform an HTTP query and statefully return the result</p> <p>Passes through all the parameters described in the <a class="reference internal" href="../../modules/all/salt.modules.http.html#salt.utils.http.query" title="salt.utils.http.query"><code class="xref py py-func docutils literal notranslate"><span class="pre">utils.http.query</span> <span class="pre">function</span></code></a>:</p> <dl> <dt>name</dt>
<dd>
<p>The name of the query.</p> </dd> <dt>match</dt>
<dd>
<p>Specifies a pattern to look for in the return text. By default, this will perform a string comparison of looking for the value of match in the return text.</p> </dd> <dt>match_type</dt>
<dd>
<p>Specifies the type of pattern matching to use on match. Default is <code class="docutils literal notranslate"><span class="pre">string</span></code>, but can also be set to <code class="docutils literal notranslate"><span class="pre">pcre</span></code> to use regular expression matching if a more complex pattern matching is required.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>Despite the name of <code class="docutils literal notranslate"><span class="pre">match_type</span></code> for this argument, this setting actually uses Python's <code class="docutils literal notranslate"><span class="pre">re.search()</span></code> function rather than Python's <code class="docutils literal notranslate"><span class="pre">re.match()</span></code> function.</p> </div> </dd> <dt>status</dt>
<dd>
<p>The status code for a URL for which to be checked. Can be used instead of or in addition to the <code class="docutils literal notranslate"><span class="pre">match</span></code> setting. This can be passed as an individual status code or a list of status codes.</p> </dd> <dt>status_type</dt>
<dd>
<p>Specifies the type of pattern matching to use for status. Default is <code class="docutils literal notranslate"><span class="pre">string</span></code>, but can also be set to <code class="docutils literal notranslate"><span class="pre">pcre</span></code> to use regular expression matching if a more complex pattern matching is required. Additionally, if a list of strings representing statuses is given, the type <code class="docutils literal notranslate"><span class="pre">list</span></code> can be used.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3000.</span></p> </div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>Despite the name of <code class="docutils literal notranslate"><span class="pre">match_type</span></code> for this argument, this setting actually uses Python's <code class="docutils literal notranslate"><span class="pre">re.search()</span></code> function rather than Python's <code class="docutils literal notranslate"><span class="pre">re.match()</span></code> function.</p> </div> </dd> </dl> <p>If both <code class="docutils literal notranslate"><span class="pre">match</span></code> and <code class="docutils literal notranslate"><span class="pre">status</span></code> options are set, both settings will be checked. However, note that if only one option is <code class="docutils literal notranslate"><span class="pre">True</span></code> and the other is <code class="docutils literal notranslate"><span class="pre">False</span></code>, then <code class="docutils literal notranslate"><span class="pre">False</span></code> will be returned. If this case is reached, the comments in the return data will contain troubleshooting information.</p> <p>For more information about the <code class="docutils literal notranslate"><span class="pre">http.query</span></code> state, refer to the <a class="reference internal" href="https://docs.saltproject.io/en/latest/topics/tutorials/http.html#tutorial-http"><span class="std std-ref">HTTP Tutorial</span></a>.</p> <pre class="highlight-yaml notranslate" data-language="yaml">query_example:
  http.query:
    - name: 'http://example.com/'
    - status: 200

query_example2:
  http.query:
    - name: 'http://example.com/'
    - status:
        - 200
        - 201
    - status_type: list</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.states.http.wait_for_successful_query"> salt.states.http.wait_for_successful_query(name, wait_for=300, **kwargs)</h3> <dd>
<p>Like query but, repeat and wait until match/match_type or status is fulfilled. State returns result from last query state in case of success or if no successful query was made within wait_for timeout.</p> <dl class="simple"> <dt>name</dt>
<dd>
<p>The name of the query.</p> </dd> <dt>wait_for</dt>
<dd>
<p>Total time to wait for requests that succeed.</p> </dd> <dt>request_interval</dt>
<dd>
<p>Optional interval to delay requests by N seconds to reduce the number of requests sent.</p> </dd> </dl> <div class="admonition note"> <p class="admonition-title">Note</p> <p>All other arguments are passed to the http.query state.</p> </div> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/states/all/salt.states.http.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/states/all/salt.states.http.html</a>
  </p>
</div>
