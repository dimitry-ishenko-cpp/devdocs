<h1>salt.queues.pgjsonb_queue</h1> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.3.0.</span></p> </div> <p>This is a queue with postgres as the backend. It uses the jsonb store to store information for queues.</p> <dl class="field-list simple"> <dt class="field-odd">depends</dt> <dd class="field-odd">
<p>python-psycopg2</p> </dd> </dl> <p>To enable this queue, the following needs to be configured in your master config. These are the defaults:</p> <pre class="highlight-yaml notranslate" data-language="yaml">queue.pgjsonb.host: 'salt'
queue.pgjsonb.user: 'salt'
queue.pgjsonb.password: 'salt'
queue.pgjsonb.dbname: 'salt'
queue.pgjsonb.port: 5432</pre> <p>Use the following Pg database schema:</p> <pre class="highlight-sql notranslate" data-language="sql">CREATE DATABASE  salt WITH ENCODING 'utf-8';

--
-- Table structure for table `salt`
--
DROP TABLE IF EXISTS salt;
CREATE OR REPLACE TABLE salt(
   id SERIAL PRIMARY KEY,
   data jsonb NOT NULL
);</pre> <pre class="highlight-bash notranslate" data-language="bash">salt-run queue.insert test '{"name": "redis", "host": "172.16.0.8", "port": 6379}' backend=pgjsonb
salt-run queue.process_queue test all backend=pgjsonb</pre> <dl class="py function"> <h3 id="salt.queues.pgjsonb_queue.delete"> salt.queues.pgjsonb_queue.delete(queue, items)</h3> <dd>
<p>Delete an item or items from a queue</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.queues.pgjsonb_queue.handle_queue_creation"> salt.queues.pgjsonb_queue.handle_queue_creation(queue)</h3> 
</dl> <dl class="py function"> <h3 id="salt.queues.pgjsonb_queue.insert"> salt.queues.pgjsonb_queue.insert(queue, items)</h3> <dd>
<p>Add an item or items to a queue</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.queues.pgjsonb_queue.list_items"> salt.queues.pgjsonb_queue.list_items(queue)</h3> <dd>
<p>List contents of a queue</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.queues.pgjsonb_queue.list_length"> salt.queues.pgjsonb_queue.list_length(queue)</h3> <dd>
<p>Provide the number of items in a queue</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.queues.pgjsonb_queue.list_queues"> salt.queues.pgjsonb_queue.list_queues()</h3> <dd>
<p>Return a list of Salt Queues on the Salt Master</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.queues.pgjsonb_queue.pop"> salt.queues.pgjsonb_queue.pop(queue, quantity=1, is_runner=False)</h3> <dd>
<p>Pop one or more or all items from the queue return them.</p> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/queues/all/salt.queues.pgjsonb_queue.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/queues/all/salt.queues.pgjsonb_queue.html</a>
  </p>
</div>
