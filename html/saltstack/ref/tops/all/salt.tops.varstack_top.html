<h1>salt.tops.varstack_top</h1> <p>Use <a class="reference external" href="https://github.com/conversis/varstack">Varstack</a> to provide tops data</p> <p>This <a class="reference internal" href="https://docs.saltproject.io/en/latest/topics/master_tops/index.html#master-tops-system"><span class="std std-ref">master_tops</span></a> plugin provides access to the <strong>varstack</strong> hierarchical yaml files, so you can user <strong>varstack</strong> as a full <a class="reference internal" href="salt.tops.ext_nodes.html#module-salt.tops.ext_nodes" title="salt.tops.ext_nodes"><code class="xref py py-mod docutils literal notranslate"><span class="pre">external</span> <span class="pre">node</span> <span class="pre">classifier</span></code></a> and store state information (top data) in it.</p> <div class="section" id="configuring-varstack"> <h2>Configuring Varstack</h2> <p>To use varstack as a master top external node classifier, install varstack as documented. Then, add to your master's configuration:</p> <pre class="highlight-yaml notranslate" data-language="yaml">master_tops:
  varstack: /path/to/the/config/file/varstack.yaml</pre> <p>Varstack will then use /path/to/the/config/file/varstack.yaml (usually /etc/varstack.yaml) to determine which configuration data to return as adapter information. From there you can take a look at the <a class="reference external" href="https://github.com/conversis/varstack/blob/master/README.md">README</a> of varstack to learn how this file is evaluated. The ENC part will just return the 'states' dictionary for the node.</p> <p>Ie, if my.fqdn.yaml file contains:</p> <pre class="highlight-yaml notranslate" data-language="yaml">---
states:
  - sudo
  - openssh
  - apache
  - salt.minion</pre> <p>these will be returned as {'base': ['sudo', 'openssh', 'apache', 'salt.minion']} and managed by salt as if given from a top.sls file.</p> <dl class="py function"> <h3 id="salt.tops.varstack_top.top"> salt.tops.varstack_top.top(**kwargs)</h3> <dd>
<p>Query <strong>varstack</strong> for the top data (states of the minions).</p> </dd>
</dl> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/tops/all/salt.tops.varstack_top.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/tops/all/salt.tops.varstack_top.html</a>
  </p>
</div>
