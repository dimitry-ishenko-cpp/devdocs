<h1>salt.pillar.rethinkdb_pillar</h1> <p>Provide external pillar data from RethinkDB</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2018.3.0.</span></p> </div> <dl class="field-list simple"> <dt class="field-odd">depends</dt> <dd class="field-odd">
<p>rethinkdb (on the salt-master)</p> </dd> </dl> <div class="section" id="salt-master-rethinkdb-configuration"> <h2>salt master rethinkdb configuration</h2> <dl class="simple"> <dt>These variables must be configured in your master configuration file.</dt>
<dd>
<ul class="simple"> <li><p><code class="docutils literal notranslate"><span class="pre">rethinkdb.host</span></code> - The RethinkDB server. Defaults to <code class="docutils literal notranslate"><span class="pre">'salt'</span></code></p></li> <li><p><code class="docutils literal notranslate"><span class="pre">rethinkdb.port</span></code> - The port the RethinkDB server listens on. Defaults to <code class="docutils literal notranslate"><span class="pre">'28015'</span></code></p></li> <li><p><code class="docutils literal notranslate"><span class="pre">rethinkdb.database</span></code> - The database to connect to. Defaults to <code class="docutils literal notranslate"><span class="pre">'salt'</span></code></p></li> <li><p><code class="docutils literal notranslate"><span class="pre">rethinkdb.username</span></code> - The username for connecting to RethinkDB. Defaults to <code class="docutils literal notranslate"><span class="pre">''</span></code></p></li> <li><p><code class="docutils literal notranslate"><span class="pre">rethinkdb.password</span></code> - The password for connecting to RethinkDB. Defaults to <code class="docutils literal notranslate"><span class="pre">''</span></code></p></li> </ul> </dd> </dl> </div> <div class="section" id="salt-master-ext-pillar-configuration"> <h2>salt-master ext_pillar configuration</h2> <p>The ext_pillar function arguments are given in single line dictionary notation.</p> <pre class="highlight-yaml notranslate" data-language="yaml">ext_pillar:
  - rethinkdb: {table: ext_pillar, id_field: minion_id, field: pillar_root, pillar_key: external_pillar}</pre> <dl class="simple"> <dt>In the example above the following happens.</dt>
<dd>
<ul class="simple"> <li><p>The salt-master will look for external pillars in the 'ext_pillar' table on the RethinkDB host</p></li> <li><p>The minion id will be matched against the 'minion_id' field</p></li> <li><p>Pillars will be retrieved from the nested field 'pillar_root'</p></li> <li><p>Found pillars will be merged inside a key called 'external_pillar'</p></li> </ul> </dd> </dl> </div> <div class="section" id="module-documentation"> <h2>Module Documentation</h2> <dl class="py function"> <h3 id="salt.pillar.rethinkdb_pillar.ext_pillar"> salt.pillar.rethinkdb_pillar.ext_pillar(minion_id, pillar, table='pillar', id_field=None, field=None, pillar_key=None)</h3> <dd>
<p>Collect minion external pillars from a RethinkDB database</p> <p>Arguments:</p> <ul class="simple"> <li><p><cite>table</cite>: The RethinkDB table containing external pillar information. Defaults to <code class="docutils literal notranslate"><span class="pre">'pillar'</span></code></p></li> <li><p><cite>id_field</cite>: Field in document containing the minion id. If blank then we assume the table index matches minion ids</p></li> <li><p><cite>field</cite>: Specific field in the document used for pillar data, if blank then the entire document will be used</p></li> <li><p><cite>pillar_key</cite>: The salt-master will nest found external pillars under this key before merging into the minion pillars. If blank, external pillars will be merged at top level</p></li> </ul> </dd>
</dl> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/pillar/all/salt.pillar.rethinkdb_pillar.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/pillar/all/salt.pillar.rethinkdb_pillar.html</a>
  </p>
</div>
