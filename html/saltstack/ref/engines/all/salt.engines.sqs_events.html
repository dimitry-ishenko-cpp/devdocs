<h1>salt.engines.sqs_events</h1> <p>An engine that continuously reads messages from SQS and fires them as events.</p> <p>Note that long polling is utilized to avoid excessive CPU usage.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> <dl class="field-list simple"> <dt class="field-odd">depends</dt> <dd class="field-odd">
<p>boto</p> </dd> </dl> <div class="section" id="configuration"> <h2>Configuration</h2> <p>This engine can be run on the master or on a minion.</p> <p>Example Config:</p> <pre class="highlight-yaml notranslate" data-language="yaml">sqs.keyid: GKTADJGHEIQSXMKKRBJ08H
sqs.key: askdjghsdfjkghWupUjasdflkdfklgjsdfjajkghs
sqs.message_format: json</pre> <p>Explicit sqs credentials are accepted but this engine can also utilize IAM roles assigned to the instance through Instance Profiles. Dynamic credentials are then automatically obtained from AWS API and no further configuration is necessary. More Information available at:</p> <pre class="highlight-default notranslate" data-language="default">http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html</pre> <p>If IAM roles are not (or for <code class="docutils literal notranslate"><span class="pre">boto</span></code> version &lt; 2.5.1) used you need to specify them either in a pillar or in the config file of the master or minion, as appropriate:</p> <p>To deserialize the message from json:</p> <pre class="highlight-yaml notranslate" data-language="yaml">sqs.message_format: json</pre> <p>It's also possible to specify key, keyid and region via a profile:</p> <pre class="highlight-yaml notranslate" data-language="yaml">sqs.keyid: GKTADJGHEIQSXMKKRBJ08H
sqs.key: askdjghsdfjkghWupUjasdflkdfklgjsdfjajkghs</pre> <p>A region may also be specified in the configuration:</p> <pre class="highlight-yaml notranslate" data-language="yaml">sqs.region: us-east-1</pre> <p>If a region is not specified, the default is us-east-1.</p> <p>It's also possible to specify key, keyid and region via a profile:</p> <pre class="highlight-yaml notranslate" data-language="yaml">myprofile:
  keyid: GKTADJGHEIQSXMKKRBJ08H
  key: askdjghsdfjkghWupUjasdflkdfklgjsdfjajkghs
  region: us-east-1</pre> <p>Additionally you can define cross account sqs:</p> <pre class="highlight-yaml notranslate" data-language="yaml">engines:
  - sqs_events:
      queue: prod
      owner_acct_id: 111111111111</pre> <dl class="py function"> <h3 id="salt.engines.sqs_events.start"> salt.engines.sqs_events.start(queue, profile=None, tag='salt/engine/sqs', owner_acct_id=None)</h3> <dd>
<p>Listen to sqs and fire message on event bus</p> </dd>
</dl> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/engines/all/salt.engines.sqs_events.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/engines/all/salt.engines.sqs_events.html</a>
  </p>
</div>
