<h1>salt.auth.pki</h1> <p>Authenticate via a PKI certificate.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module is Experimental and should be used with caution</p> </div> <p>Provides an authenticate function that will allow the caller to authenticate a user via their public cert against a pre-defined Certificate Authority.</p> <p>TODO: Add a 'ca_dir' option to configure a directory of CA files, a la Apache.</p> <dl class="field-list simple"> <dt class="field-odd">depends</dt> <dd class="field-odd">
<ul class="simple"> <li><p>pyOpenSSL module</p></li> </ul> </dd> </dl> <dl class="py function"> <h3 id="salt.auth.pki.auth"> salt.auth.pki.auth(username, password, **kwargs)</h3> <dd>
<p>Returns True if the given user cert (password is the cert contents) was issued by the CA and if cert's Common Name is equal to username.</p> <p>Returns False otherwise.</p> <dl class="simple"> <dt>
<code class="docutils literal notranslate"><span class="pre">username</span></code>: we need it to run the auth function from CLI/API;</dt>
<dd>
<p>it should be in master config auth/acl</p> </dd> <dt>
<code class="docutils literal notranslate"><span class="pre">password</span></code>: contents of user certificate (pem-encoded user public key);</dt>
<dd>
<p>why "password"? For CLI, it's the only available name</p> </dd> </dl> <p>Configure the CA cert in the master config file:</p> <pre class="highlight-yaml notranslate" data-language="yaml">external_auth:
  pki:
    ca_file: /etc/pki/tls/ca_certs/trusted-ca.crt
    your_user:
      - .*</pre> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/auth/all/salt.auth.pki.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/auth/all/salt.auth.pki.html</a>
  </p>
</div>
