<h1>salt.returners.etcd_return</h1> <p>Return data to an etcd server or cluster</p> <dl class="field-list simple"> <dt class="field-odd">depends</dt> <dd class="field-odd">
<ul class="simple"> <li><p>python-etcd</p></li> </ul> </dd> </dl> <p>In order to return to an etcd server, a profile should be created in the master configuration file:</p> <pre class="highlight-yaml notranslate" data-language="yaml">my_etcd_config:
  etcd.host: 127.0.0.1
  etcd.port: 2379</pre> <p>It is technically possible to configure etcd without using a profile, but this is not considered to be a best practice, especially when multiple etcd servers or clusters are available.</p> <pre class="highlight-yaml notranslate" data-language="yaml">etcd.host: 127.0.0.1
etcd.port: 2379</pre> <p>Additionally, two more options must be specified in the top-level configuration in order to use the etcd returner:</p> <pre class="highlight-yaml notranslate" data-language="yaml">etcd.returner: my_etcd_config
etcd.returner_root: /salt/return</pre> <p>The <code class="docutils literal notranslate"><span class="pre">etcd.returner</span></code> option specifies which configuration profile to use. The <code class="docutils literal notranslate"><span class="pre">etcd.returner_root</span></code> option specifies the path inside etcd to use as the root of the returner system.</p> <p>Once the etcd options are configured, the returner may be used:</p> <p>CLI Example:</p> <blockquote> <div>
<p>salt '*' test.ping --return etcd</p> </div>
</blockquote> <p>A username and password can be set:</p> <pre class="highlight-yaml notranslate" data-language="yaml">etcd.username: larry  # Optional; requires etcd.password to be set
etcd.password: 123pass  # Optional; requires etcd.username to be set</pre> <p>You can also set a TTL (time to live) value for the returner:</p> <pre class="highlight-yaml notranslate" data-language="yaml">etcd.ttl: 5</pre> <p>Authentication with username and password, and ttl, currently requires the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch of <code class="docutils literal notranslate"><span class="pre">python-etcd</span></code>.</p> <p>You may also specify different roles for read and write operations. First, create the profiles as specified above. Then add:</p> <pre class="highlight-yaml notranslate" data-language="yaml">etcd.returner_read_profile: my_etcd_read
etcd.returner_write_profile: my_etcd_write</pre> <dl class="py function"> <h3 id="salt.returners.etcd_return.clean_old_jobs"> salt.returners.etcd_return.clean_old_jobs()</h3> <dd>
<p>Included for API consistency</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.returners.etcd_return.get_fun"> salt.returners.etcd_return.get_fun(fun)</h3> <dd>
<p>Return a dict of the last function called for all minions</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.returners.etcd_return.get_jid"> salt.returners.etcd_return.get_jid(jid)</h3> <dd>
<p>Return the information returned when the specified job id was executed</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.returners.etcd_return.get_jids"> salt.returners.etcd_return.get_jids()</h3> <dd>
<p>Return a list of all job ids</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.returners.etcd_return.get_load"> salt.returners.etcd_return.get_load(jid)</h3> <dd>
<p>Return the load data that marks a specified jid</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.returners.etcd_return.get_minions"> salt.returners.etcd_return.get_minions()</h3> <dd>
<p>Return a list of minions</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.returners.etcd_return.prep_jid"> salt.returners.etcd_return.prep_jid(nocache=False, passed_jid=None)</h3> <dd>
<p>Do any work necessary to prepare a JID, including sending a custom id</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.returners.etcd_return.returner"> salt.returners.etcd_return.returner(ret)</h3> <dd>
<p>Return data to an etcd server or cluster</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.returners.etcd_return.save_load"> salt.returners.etcd_return.save_load(jid, load, minions=None)</h3> <dd>
<p>Save the load to the specified jid</p> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/returners/all/salt.returners.etcd_return.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/returners/all/salt.returners.etcd_return.html</a>
  </p>
</div>
