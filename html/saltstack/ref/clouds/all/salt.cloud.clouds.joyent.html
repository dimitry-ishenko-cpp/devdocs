<h1>salt.cloud.clouds.joyent</h1> <div class="section" id="joyent-cloud-module"> <h2>Joyent Cloud Module</h2> <p>The Joyent Cloud module is used to interact with the Joyent cloud system.</p> <p>Set up the cloud configuration at <code class="docutils literal notranslate"><span class="pre">/etc/salt/cloud.providers</span></code> or <code class="docutils literal notranslate"><span class="pre">/etc/salt/cloud.providers.d/joyent.conf</span></code>:</p> <pre class="highlight-yaml notranslate" data-language="yaml">my-joyent-config:
  driver: joyent
  # The Joyent login user
  user: fred
  # The Joyent user's password
  password: saltybacon
  # The location of the ssh private key that can log into the new VM
  private_key: /root/mykey.pem
  # The name of the private key
  keyname: mykey</pre> <p>When creating your profiles for the joyent cloud, add the location attribute to the profile, this will automatically get picked up when performing tasks associated with that vm. An example profile might look like:</p> <pre class="highlight-yaml notranslate" data-language="yaml">joyent_512:
  provider: my-joyent-config
  size: g4-highcpu-512M
  image: centos-6
  location: us-east-1</pre> <p>This driver can also be used with the Joyent SmartDataCenter project. More details can be found at:</p> <p>Using SDC requires that an api_host_suffix is set. The default value for this is <cite>.api.joyentcloud.com</cite>. All characters, including the leading <cite>.</cite>, should be included:</p> <pre class="highlight-yaml notranslate" data-language="yaml">api_host_suffix: .api.myhostname.com</pre> <dl class="field-list simple"> <dt class="field-odd">depends</dt> <dd class="field-odd">
<p>PyCrypto</p> </dd> </dl> <dl class="py function"> <h3 id="salt.cloud.clouds.joyent.avail_images"> salt.cloud.clouds.joyent.avail_images(call=None)</h3> <dd>
<p>Get list of available images</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud --list-images</pre> <p>Can use a custom URL for images. Default is:</p> <pre class="highlight-yaml notranslate" data-language="yaml">image_url: images.joyent.com/images</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.joyent.avail_locations"> salt.cloud.clouds.joyent.avail_locations(call=None)</h3> <dd>
<p>List all available locations</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.joyent.avail_sizes"> salt.cloud.clouds.joyent.avail_sizes(call=None)</h3> <dd>
<p>get list of available packages</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud --list-sizes</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.joyent.create"> salt.cloud.clouds.joyent.create(vm_)</h3> <dd>
<p>Create a single VM from a data dict</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -p profile_name vm_name</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.joyent.create_node"> salt.cloud.clouds.joyent.create_node(**kwargs)</h3> <dd>
<p>convenience function to make the rest api call for node creation.</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.joyent.delete_key"> salt.cloud.clouds.joyent.delete_key(kwargs=None, call=None)</h3> <dd>
<p>List the keys available</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -f delete_key joyent keyname=mykey</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.joyent.destroy"> salt.cloud.clouds.joyent.destroy(name, call=None)</h3> <dd>
<p>destroy a machine by name</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>name</strong> -- name given to the machine</p></li> <li><p><strong>call</strong> -- call value in this case is 'action'</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>array of booleans , true if successfully stopped and true if successfully removed</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -d vm_name</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.joyent.get_configured_provider"> salt.cloud.clouds.joyent.get_configured_provider()</h3> <dd>
<p>Return the first configured instance.</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.joyent.get_image"> salt.cloud.clouds.joyent.get_image(vm_)</h3> <dd>
<p>Return the image object to use</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.joyent.get_location"> salt.cloud.clouds.joyent.get_location(vm_=None)</h3> <dd>
<dl class="simple"> <dt>Return the joyent data center to use, in this order:</dt>
<dd>
<ul class="simple"> <li><p>CLI parameter</p></li> <li><p>VM parameter</p></li> <li><p>Cloud profile setting</p></li> </ul> </dd> </dl> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.joyent.get_location_path"> salt.cloud.clouds.joyent.get_location_path(location='us-east-1', api_host_suffix='.api.joyentcloud.com')</h3> <dd>
<p>create url from location variable :param location: joyent data center location :return: url</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.joyent.get_node"> salt.cloud.clouds.joyent.get_node(name)</h3> <dd>
<p>gets the node from the full node list by name :param name: name of the vm :return: node object</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.joyent.get_size"> salt.cloud.clouds.joyent.get_size(vm_)</h3> <dd>
<p>Return the VM's size object</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.joyent.has_method"> salt.cloud.clouds.joyent.has_method(obj, method_name)</h3> <dd>
<p>Find if the provided object has a specific method</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.joyent.import_key"> salt.cloud.clouds.joyent.import_key(kwargs=None, call=None)</h3> <dd>
<p>List the keys available</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -f import_key joyent keyname=mykey keyfile=/tmp/mykey.pub</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.joyent.joyent_node_state"> salt.cloud.clouds.joyent.joyent_node_state(id_)</h3> <dd>
<p>Convert joyent returned state to state common to other data center return values for consistency</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<p><strong>id</strong> -- joyent state value</p> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>state value</p> </dd> </dl> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.joyent.key_list"> salt.cloud.clouds.joyent.key_list(items=None)</h3> <dd>
<p>convert list to dictionary using the key as the identifier :param items: array to iterate over :return: dictionary</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.joyent.list_keys"> salt.cloud.clouds.joyent.list_keys(kwargs=None, call=None)</h3> <dd>
<p>List the keys available</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.joyent.list_nodes"> salt.cloud.clouds.joyent.list_nodes(full=False, call=None)</h3> <dd>
<p>list of nodes, keeping only a brief listing</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -Q</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.joyent.list_nodes_full"> salt.cloud.clouds.joyent.list_nodes_full(call=None)</h3> <dd>
<p>list of nodes, maintaining all content provided from joyent listings</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -F</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.joyent.list_nodes_select"> salt.cloud.clouds.joyent.list_nodes_select(call=None)</h3> <dd>
<p>Return a list of the VMs that are on the provider, with select fields</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.joyent.query"> salt.cloud.clouds.joyent.query(action=None, command=None, args=None, method='GET', location=None, data=None)</h3> <dd>
<p>Make a web call to Joyent</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.joyent.query_instance"> salt.cloud.clouds.joyent.query_instance(vm_=None, call=None)</h3> <dd>
<p>Query an instance upon creation from the Joyent API</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.joyent.reboot"> salt.cloud.clouds.joyent.reboot(name, call=None)</h3> <dd>
<p>reboot a machine by name :param name: name given to the machine :param call: call value in this case is 'action' :return: true if successful</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -a reboot vm_name</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.joyent.reformat_node"> salt.cloud.clouds.joyent.reformat_node(item=None, full=False)</h3> <dd>
<p>Reformat the returned data from joyent, determine public/private IPs and strip out fields if necessary to provide either full or brief content.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<ul class="simple"> <li><p><strong>item</strong> -- node dictionary</p></li> <li><p><strong>full</strong> -- full or brief output</p></li> </ul> </dd> <dt class="field-even">Returns</dt> <dd class="field-even">
<p>dict</p> </dd> </dl> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.joyent.show_instance"> salt.cloud.clouds.joyent.show_instance(name, call=None)</h3> <dd>
<p>get details about a machine :param name: name given to the machine :param call: call value in this case is 'action' :return: machine information</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -a show_instance vm_name</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.joyent.show_key"> salt.cloud.clouds.joyent.show_key(kwargs=None, call=None)</h3> <dd>
<p>List the keys available</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.joyent.ssh_interface"> salt.cloud.clouds.joyent.ssh_interface(vm_)</h3> <dd>
<p>Return the ssh_interface type to connect to. Either 'public_ips' (default) or 'private_ips'.</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.joyent.start"> salt.cloud.clouds.joyent.start(name, call=None)</h3> <dd>
<p>start a machine by name :param name: name given to the machine :param call: call value in this case is 'action' :return: true if successful</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -a start vm_name</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.joyent.stop"> salt.cloud.clouds.joyent.stop(name, call=None)</h3> <dd>
<p>stop a machine by name :param name: name given to the machine :param call: call value in this case is 'action' :return: true if successful</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -a stop vm_name</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.joyent.take_action"> salt.cloud.clouds.joyent.take_action(name=None, call=None, command=None, data=None, method='GET', location='us-east-1')</h3> <dd>
<p>take action call used by start,stop, reboot :param name: name given to the machine :param call: call value in this case is 'action' :command: api path :data: any data to be passed to the api, must be in json format :method: GET,POST,or DELETE :location: data center to execute the command on :return: true if successful</p> </dd>
</dl> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/clouds/all/salt.cloud.clouds.joyent.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/clouds/all/salt.cloud.clouds.joyent.html</a>
  </p>
</div>
