<h1>salt.cloud.clouds.gce</h1> <p>Copyright 2013 Google Inc. All Rights Reserved.</p> <p>Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at</p> <blockquote> <div>
<p><a class="reference external" href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p> </div>
</blockquote> <p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p> <div class="section" id="google-compute-engine-module"> <h2>Google Compute Engine Module</h2> <p>The Google Compute Engine module. This module interfaces with Google Compute Engine (GCE). To authenticate to GCE, you will need to create a Service Account. To set up Service Account Authentication, follow the <a class="reference internal" href="https://docs.saltproject.io/en/latest/topics/cloud/gce.html#gce-setup"><span class="std std-ref">Google Compute Engine Setup</span></a> instructions.</p> <div class="section" id="example-provider-configuration"> <h3>Example Provider Configuration</h3> <pre class="highlight-yaml notranslate" data-language="yaml">my-gce-config:
  # The Google Cloud Platform Project ID
  project: "my-project-id"
  # The Service Account client ID
  service_account_email_address: 1234567890@developer.gserviceaccount.com
  # The location of the private key (PEM format)
  service_account_private_key: /home/erjohnso/PRIVKEY.pem
  driver: gce
  # Specify whether to use public or private IP for deploy script.
  # Valid options are:
  #     private_ips - The salt-master is also hosted with GCE
  #     public_ips - The salt-master is hosted outside of GCE
  ssh_interface: public_ips</pre> <dl class="field-list simple"> <dt class="field-odd">maintainer</dt> <dd class="field-odd">
<p>Eric Johnson &lt;<a class="reference external" href="mailto:erjohnso%40google.com.html">erjohnso<span>@</span>google<span>.</span>com</a>&gt;</p> </dd> <dt class="field-even">maintainer</dt> <dd class="field-even">
<p>Russell Tolle &lt;<a class="reference external" href="mailto:russ.tolle%40gmail.com.html">russ<span>.</span>tolle<span>@</span>gmail<span>.</span>com</a>&gt;</p> </dd> <dt class="field-odd">depends</dt> <dd class="field-odd">
<p>libcloud &gt;= 1.0.0</p> </dd> </dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.attach_disk"> salt.cloud.clouds.gce.attach_disk(name=None, kwargs=None, call=None)</h3> <dd>
<p>Attach an existing disk to an existing instance.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -a attach_disk myinstance disk_name=mydisk mode=READ_WRITE</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.attach_lb"> salt.cloud.clouds.gce.attach_lb(kwargs=None, call=None)</h3> <dd>
<p>Add an existing node/member to an existing load-balancer configuration.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -f attach_lb gce name=lb member=myinstance</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.avail_images"> salt.cloud.clouds.gce.avail_images(conn=None)</h3> <dd>
<p>Return a dict of all available VM images on the cloud provider with relevant data.</p> <p>Note that for GCE, there are custom images within the project, but the generic images are in other projects. This returns a dict of images in the project plus images in well-known public projects that provide supported images, as listed on this page: <a class="reference external" href="https://cloud.google.com/compute/docs/operating-systems/">https://cloud.google.com/compute/docs/operating-systems/</a></p> <p>If image names overlap, the image in the current project is used.</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.avail_locations"> salt.cloud.clouds.gce.avail_locations(conn=None, call=None)</h3> <dd>
<p>Return a dict of all available VM locations on the cloud provider with relevant data</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.avail_sizes"> salt.cloud.clouds.gce.avail_sizes(conn=None)</h3> <dd>
<p>Return a dict of available instances sizes (a.k.a machine types) and convert them to something more serializable.</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.create"> salt.cloud.clouds.gce.create(vm_=None, call=None)</h3> <dd>
<p>Create a single GCE instance from a data dict.</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.create_address"> salt.cloud.clouds.gce.create_address(kwargs=None, call=None)</h3> <dd>
<p>Create a static address in a region.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -f create_address gce name=my-ip region=us-central1 address=IP</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.create_attach_volumes"> salt.cloud.clouds.gce.create_attach_volumes(name, kwargs, call=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> <p>Create and attach multiple volumes to a node. The 'volumes' and 'node' arguments are required, where 'node' is a libcloud node, and 'volumes' is a list of maps, where each map contains:</p> <dl class="simple"> <dt>size</dt>
<dd>
<p>The size of the new disk in GB. Required.</p> </dd> <dt>type</dt>
<dd>
<p>The disk type, either pd-standard or pd-ssd. Optional, defaults to pd-standard.</p> </dd> <dt>image</dt>
<dd>
<p>An image to use for this new disk. Optional.</p> </dd> <dt>snapshot</dt>
<dd>
<p>A snapshot to use for this new disk. Optional.</p> </dd> <dt>auto_delete</dt>
<dd>
<p>An option(bool) to keep or remove the disk upon instance deletion. Optional, defaults to False.</p> </dd> </dl> <p>Volumes are attached in the order in which they are given, thus on a new node the first volume will be /dev/sdb, the second /dev/sdc, and so on.</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.create_disk"> salt.cloud.clouds.gce.create_disk(kwargs=None, call=None)</h3> <dd>
<p>Create a new persistent disk. Must specify <cite>disk_name</cite> and <cite>location</cite>, and optionally can specify 'disk_type' as pd-standard or pd-ssd, which defaults to pd-standard. Can also specify an <cite>image</cite> or <cite>snapshot</cite> but if neither of those are specified, a <cite>size</cite> (in GB) is required.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -f create_disk gce disk_name=pd size=300 location=us-central1-b</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.create_fwrule"> salt.cloud.clouds.gce.create_fwrule(kwargs=None, call=None)</h3> <dd>
<p>Create a GCE firewall rule. The 'default' network is used if not specified.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -f create_fwrule gce name=allow-http allow=tcp:80</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.create_hc"> salt.cloud.clouds.gce.create_hc(kwargs=None, call=None)</h3> <dd>
<p>Create an HTTP health check configuration.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -f create_hc gce name=hc path=/healthy port=80</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.create_lb"> salt.cloud.clouds.gce.create_lb(kwargs=None, call=None)</h3> <dd>
<p>Create a load-balancer configuration.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -f create_lb gce name=lb region=us-central1 ports=80</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.create_network"> salt.cloud.clouds.gce.create_network(kwargs=None, call=None)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2017.7.0.</span></p> </div> <p>Create a GCE network. Must specify name and cidr.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -f create_network gce name=mynet cidr=10.10.10.0/24 mode=legacy description=optional
salt-cloud -f create_network gce name=mynet description=optional</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.create_snapshot"> salt.cloud.clouds.gce.create_snapshot(kwargs=None, call=None)</h3> <dd>
<p>Create a new disk snapshot. Must specify <cite>name</cite> and <cite>disk_name</cite>.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -f create_snapshot gce name=snap1 disk_name=pd</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.create_subnetwork"> salt.cloud.clouds.gce.create_subnetwork(kwargs=None, call=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> <p>Create a GCE Subnetwork. Must specify name, cidr, network, and region.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -f create_subnetwork gce name=mysubnet network=mynet1 region=us-west1 cidr=10.0.0.0/24 description=optional</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.delete_address"> salt.cloud.clouds.gce.delete_address(kwargs=None, call=None)</h3> <dd>
<p>Permanently delete a static address.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -f delete_address gce name=my-ip</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.delete_disk"> salt.cloud.clouds.gce.delete_disk(kwargs=None, call=None)</h3> <dd>
<p>Permanently delete a persistent disk.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -f delete_disk gce disk_name=pd</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.delete_fwrule"> salt.cloud.clouds.gce.delete_fwrule(kwargs=None, call=None)</h3> <dd>
<p>Permanently delete a firewall rule.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -f delete_fwrule gce name=allow-http</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.delete_hc"> salt.cloud.clouds.gce.delete_hc(kwargs=None, call=None)</h3> <dd>
<p>Permanently delete a health check.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -f delete_hc gce name=hc</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.delete_lb"> salt.cloud.clouds.gce.delete_lb(kwargs=None, call=None)</h3> <dd>
<p>Permanently delete a load-balancer.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -f delete_lb gce name=lb</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.delete_network"> salt.cloud.clouds.gce.delete_network(kwargs=None, call=None)</h3> <dd>
<p>Permanently delete a network.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -f delete_network gce name=mynet</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.delete_snapshot"> salt.cloud.clouds.gce.delete_snapshot(kwargs=None, call=None)</h3> <dd>
<p>Permanently delete a disk snapshot.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -f delete_snapshot gce name=disk-snap-1</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.delete_subnetwork"> salt.cloud.clouds.gce.delete_subnetwork(kwargs=None, call=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> <p>Delete a GCE Subnetwork. Must specify name and region.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -f delete_subnetwork gce name=mysubnet network=mynet1 region=us-west1</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.destroy"> salt.cloud.clouds.gce.destroy(vm_name, call=None)</h3> <dd>
<p>Call 'destroy' on the instance. Can be called with "-a destroy" or -d</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -a destroy myinstance1 myinstance2 ...
salt-cloud -d myinstance1 myinstance2 ...</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.detach_disk"> salt.cloud.clouds.gce.detach_disk(name=None, kwargs=None, call=None)</h3> <dd>
<p>Detach a disk from an instance.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -a detach_disk myinstance disk_name=mydisk</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.detach_lb"> salt.cloud.clouds.gce.detach_lb(kwargs=None, call=None)</h3> <dd>
<p>Remove an existing node/member from an existing load-balancer configuration.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -f detach_lb gce name=lb member=myinstance</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.get_configured_provider"> salt.cloud.clouds.gce.get_configured_provider()</h3> <dd>
<p>Return the first configured instance.</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.get_conn"> salt.cloud.clouds.gce.get_conn()</h3> <dd>
<p>Return a conn object for the passed VM data</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.get_dependencies"> salt.cloud.clouds.gce.get_dependencies()</h3> <dd>
<p>Warn if dependencies aren't met.</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.get_lb_conn"> salt.cloud.clouds.gce.get_lb_conn(gce_driver=None)</h3> <dd>
<p>Return a load-balancer conn object</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.list_nodes"> salt.cloud.clouds.gce.list_nodes(conn=None, call=None)</h3> <dd>
<p>Return a list of the VMs that are on the provider</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.list_nodes_full"> salt.cloud.clouds.gce.list_nodes_full(conn=None, call=None)</h3> <dd>
<p>Return a list of the VMs that are on the provider, with all fields</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.list_nodes_select"> salt.cloud.clouds.gce.list_nodes_select(conn=None, call=None)</h3> <dd>
<p>Return a list of the VMs that are on the provider, with select fields</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.reboot"> salt.cloud.clouds.gce.reboot(vm_name, call=None)</h3> <dd>
<p>Call GCE 'reset' on the instance.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -a reboot myinstance</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.request_instance"> salt.cloud.clouds.gce.request_instance(vm_)</h3> <dd>
<p>Request a single GCE instance from a data dict.</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2017.7.0.</span></p> </div> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.script"> salt.cloud.clouds.gce.script(vm_)</h3> <dd>
<p>Return the script deployment object</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.show_address"> salt.cloud.clouds.gce.show_address(kwargs=None, call=None)</h3> <dd>
<p>Show the details of an existing static address.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -f show_address gce name=mysnapshot region=us-central1</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.show_disk"> salt.cloud.clouds.gce.show_disk(name=None, kwargs=None, call=None)</h3> <dd>
<p>Show the details of an existing disk.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -a show_disk myinstance disk_name=mydisk
salt-cloud -f show_disk gce disk_name=mydisk</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.show_fwrule"> salt.cloud.clouds.gce.show_fwrule(kwargs=None, call=None)</h3> <dd>
<p>Show the details of an existing firewall rule.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -f show_fwrule gce name=allow-http</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.show_hc"> salt.cloud.clouds.gce.show_hc(kwargs=None, call=None)</h3> <dd>
<p>Show the details of an existing health check.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -f show_hc gce name=hc</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.show_instance"> salt.cloud.clouds.gce.show_instance(vm_name, call=None)</h3> <dd>
<p>Show the details of the existing instance.</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.show_lb"> salt.cloud.clouds.gce.show_lb(kwargs=None, call=None)</h3> <dd>
<p>Show the details of an existing load-balancer.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -f show_lb gce name=lb</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.show_network"> salt.cloud.clouds.gce.show_network(kwargs=None, call=None)</h3> <dd>
<p>Show the details of an existing network.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -f show_network gce name=mynet</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.show_pricing"> salt.cloud.clouds.gce.show_pricing(kwargs=None, call=None)</h3> <dd>
<p>Show pricing for a particular profile. This is only an estimate, based on unofficial pricing sources.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -f show_pricing my-gce-config profile=my-profile</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.show_snapshot"> salt.cloud.clouds.gce.show_snapshot(kwargs=None, call=None)</h3> <dd>
<p>Show the details of an existing snapshot.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -f show_snapshot gce name=mysnapshot</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.show_subnetwork"> salt.cloud.clouds.gce.show_subnetwork(kwargs=None, call=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> <p>Show details of an existing GCE Subnetwork. Must specify name and region.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -f show_subnetwork gce name=mysubnet region=us-west1</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.start"> salt.cloud.clouds.gce.start(vm_name, call=None)</h3> <dd>
<p>Call GCE 'start on the instance.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -a start myinstance</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.stop"> salt.cloud.clouds.gce.stop(vm_name, call=None)</h3> <dd>
<p>Call GCE 'stop' on the instance.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2017.7.0.</span></p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -a stop myinstance</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.cloud.clouds.gce.update_pricing"> salt.cloud.clouds.gce.update_pricing(kwargs=None, call=None)</h3> <dd>
<p>Download most recent pricing information from GCE and save locally</p> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-cloud -f update_pricing my-gce-config</pre> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> </dd>
</dl> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/clouds/all/salt.cloud.clouds.gce.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/clouds/all/salt.cloud.clouds.gce.html</a>
  </p>
</div>
