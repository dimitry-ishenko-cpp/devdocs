<h1>salt.runners.git_pillar</h1> <p>Runner module to directly manage the git external pillar</p> <dl class="py function"> <h3 id="salt.runners.git_pillar.update"> salt.runners.git_pillar.update(branch=None, repo=None)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2014.1.0.</span></p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2015.8.4: </span>This runner function now supports the <a class="reference internal" href="../../pillar/all/salt.pillar.git_pillar.html#git-pillar-configuration"><span class="std std-ref">git_pillar configuration schema</span></a> introduced in 2015.8.0. Additionally, the branch and repo can now be omitted to update all git_pillar remotes. The return data has also changed to a dictionary. The values will be <code class="docutils literal notranslate"><span class="pre">True</span></code> only if new commits were fetched, and <code class="docutils literal notranslate"><span class="pre">False</span></code> if there were errors or no new commits were fetched.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2018.3.0: </span>The return for a given git_pillar remote will now be <code class="docutils literal notranslate"><span class="pre">None</span></code> when no changes were fetched. <code class="docutils literal notranslate"><span class="pre">False</span></code> now is reserved only for instances in which there were errors.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3001: </span>The repo parameter also matches against the repo name.</p> </div> <p>Fetch one or all configured git_pillar remotes.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This will <em>not</em> fast-forward the git_pillar cachedir on the master. All it does is perform a <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">fetch</span></code>. If this runner is executed with <code class="docutils literal notranslate"><span class="pre">-l</span> <span class="pre">debug</span></code>, you may see a log message that says that the repo is up-to-date. Keep in mind that Salt automatically fetches git_pillar repos roughly every 60 seconds (or whatever <a class="reference internal" href="https://docs.saltproject.io/en/latest/ref/configuration/master.html#std-conf_master-loop_interval"><code class="xref std std-conf_master docutils literal notranslate"><span class="pre">loop_interval</span></code></a> is set to). So, it is possible that the repo was fetched automatically in the time between when changes were pushed to the repo, and when this runner was executed. When in doubt, simply refresh pillar data using <a class="reference internal" href="../../modules/all/salt.modules.saltutil.html#salt.modules.saltutil.refresh_pillar" title="salt.modules.saltutil.refresh_pillar"><code class="xref py py-func docutils literal notranslate"><span class="pre">saltutil.refresh_pillar</span></code></a> and then use <a class="reference internal" href="../../modules/all/salt.modules.pillar.html#salt.modules.pillar.item" title="salt.modules.pillar.item"><code class="xref py py-func docutils literal notranslate"><span class="pre">pillar.item</span></code></a> to check if the pillar data has changed as expected.</p> </div> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># Update specific branch and repo
salt-run git_pillar.update branch='branch' repo='https://foo.com/bar.git'
# Update specific repo, by name
salt-run git_pillar.update repo=myrepo
# Update all repos
salt-run git_pillar.update
# Run with debug logging
salt-run git_pillar.update -l debug</pre> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/runners/all/salt.runners.git_pillar.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/runners/all/salt.runners.git_pillar.html</a>
  </p>
</div>
