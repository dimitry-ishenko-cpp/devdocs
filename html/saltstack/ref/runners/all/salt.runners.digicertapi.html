<h1>salt.runners.digicertapi</h1> <p>Support for Digicert. Heavily based on the Venafi runner by Joseph Hall (<a class="reference external" href="mailto:jphall%40saltstack.com.html">jphall<span>@</span>saltstack<span>.</span>com</a>).</p> <p>Before using this module you need to register an account with Digicert's CertCentral.</p> <p>Login to CertCentral, ensure you have a payment method configured and/or there are adequate funds attached to your account. Click the <code class="docutils literal notranslate"><span class="pre">Account</span></code> item in the left sidebar, and select <code class="docutils literal notranslate"><span class="pre">Account</span> <span class="pre">Access</span></code>. The right hand pane should show "Account Access" and a link to create an API key. Create a new API key and assign it to the user that should be attached to requests coming from Salt.</p> <p>NOTE CertCentral will not show the API key again after revealing it the first time. Make sure you copy it right away or you will have to revoke it and generate a new one.</p> <p>Now open <code class="docutils literal notranslate"><span class="pre">/etc/salt/master</span></code> and add the API key as shown below.</p> <pre class="highlight-yaml notranslate" data-language="yaml">digicert:
  api_key: ABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABC</pre> <p>Restart your Salt Master.</p> <p>You can also include default values of the following variables to help with creating CSRs:</p> <pre class="highlight-yaml notranslate" data-language="yaml">digicert:
  api_key: ABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABC
  shatype: sha256</pre> <p>This API currently only supports RSA key types. Support for other key types will be added if interest warrants.</p> <dl class="py function"> <h3 id="salt.runners.digicertapi.del_cached_domain"> salt.runners.digicertapi.del_cached_domain(domains)</h3> <dd>
<p>Delete cached domains from the master</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run digicert.del_cached_domain domain1.example.com,domain2.example.com</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.digicertapi.gen_csr"> salt.runners.digicertapi.gen_csr(minion_id, dns_name, organization_id, ou_name=None, key_len=2048, shatype='sha256', password=None)</h3> <dd>
<p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run digicert.gen_csr &lt;minion_id&gt; &lt;dns_name&gt;</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.digicertapi.gen_key"> salt.runners.digicertapi.gen_key(minion_id, dns_name=None, password=None, key_len=2048)</h3> <dd>
<p>Generate and return a private_key. If a <code class="docutils literal notranslate"><span class="pre">dns_name</span></code> is passed in, the private_key will be cached under that name.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run digicert.gen_key &lt;minion_id&gt; [dns_name] [password]</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.digicertapi.get_certificate"> salt.runners.digicertapi.get_certificate(order_id=None, certificate_id=None, minion_id=None, cert_format='pem_all', filename=None)</h3> <dd>
<p>Retrieve a certificate by order_id or certificate_id and write it to stdout or a filename.</p> <dl class="simple"> <dt>A list of permissible cert_formats is here:</dt>
<dd>
<p><a class="reference external" href="https://www.digicert.com/services/v2/documentation/appendix-certificate-formats">https://www.digicert.com/services/v2/documentation/appendix-certificate-formats</a></p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run digicert.get_certificate order_id=48929454 cert_format=apache</pre> <p>Including a 'filename' will write the certificate to the desired file. Note that some cert formats are zipped files, and some are binary.</p> <p>If the certificate has not been issued, this function will return the order details inside of which will be a status (one of pending, rejected, processing, issued, revoked, canceled, needs_csr, and needs_approval)</p> <p>If for some reason you want to pipe the output of this command to a file or other command you will want to leave off the <code class="docutils literal notranslate"><span class="pre">filename</span></code> argument and make sure to include <code class="docutils literal notranslate"><span class="pre">--no-color</span></code> so there will be no terminal ANSI escape sequences.</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.digicertapi.get_org_details"> salt.runners.digicertapi.get_org_details(organization_id)</h3> <dd>
<p>Return the details for an organization</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run digicert.get_org_details 34</pre> <p>Returns a dictionary with the org details, or with 'error' and 'status' keys.</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.digicertapi.list_domain_cache"> salt.runners.digicertapi.list_domain_cache()</h3> <dd>
<p>List domains that have been cached</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run digicert.list_domain_cache</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.digicertapi.list_domains"> salt.runners.digicertapi.list_domains(container_id=None)</h3> <dd>
<p>List domains that CertCentral knows about. You can filter by container_id (also known as "Division") by passing a container_id.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run digicert.list_domains</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.digicertapi.list_orders"> salt.runners.digicertapi.list_orders(status=None)</h3> <dd>
<p>List certificate orders made to CertCentral.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run digicert.list_orders</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.digicertapi.list_organizations"> salt.runners.digicertapi.list_organizations(container_id=None, include_validation=True)</h3> <dd>
<p>List organizations that CertCentral knows about. You can filter by container_id (also known as "Division") by passing a container_id. This function returns validation information by default; pass <code class="docutils literal notranslate"><span class="pre">include_validation=False</span></code> to turn it off.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run digicert.list_organizations</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.digicertapi.list_requests"> salt.runners.digicertapi.list_requests(status=None)</h3> <dd>
<p>List certificate requests made to CertCentral. You can filter by status: <code class="docutils literal notranslate"><span class="pre">pending</span></code>, <code class="docutils literal notranslate"><span class="pre">approved</span></code>, <code class="docutils literal notranslate"><span class="pre">rejected</span></code></p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run digicert.list_requests pending</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.digicertapi.order_certificate"> salt.runners.digicertapi.order_certificate(minion_id, common_name, organization_id, validity_years, cert_key_passphrase=None, signature_hash=None, key_len=2048, dns_names=None, organization_units=None, server_platform=None, custom_expiration_date=None, comments=None, disable_renewal_notifications=False, product_type_hint=None, renewal_of_order_id=None)</h3> <dd>
<p>Order a certificate. Requires that an Organization has been created inside Digicert's CertCentral.</p> <p>See here for API documentation: <a class="reference external" href="https://www.digicert.com/services/v2/documentation/order/order-ssl-determinator">https://www.digicert.com/services/v2/documentation/order/order-ssl-determinator</a></p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run digicert.order_certificate my_minionid my.domain.com 10             3 signature_hash=sha256             dns_names=['this.domain.com', 'that.domain.com']             organization_units='My Domain Org Unit'             comments='Comment goes here for the approver'</pre> <p>This runner can also be used to renew a certificate by passing <cite>renewal_of_order_id</cite>. Previous order details can be retrieved with digicertapi.list_orders.</p> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.digicertapi.show_csrs"> salt.runners.digicertapi.show_csrs()</h3> <dd>
<p>Show certificate requests for this API key</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run digicert.show_csrs</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.digicertapi.show_organization"> salt.runners.digicertapi.show_organization(domain)</h3> <dd>
<p>Show organization information, especially the company id</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run digicert.show_company example.com</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.digicertapi.show_rsa"> salt.runners.digicertapi.show_rsa(minion_id, dns_name)</h3> <dd>
<p>Show a private RSA key</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run digicert.show_rsa myminion domain.example.com</pre> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/runners/all/salt.runners.digicertapi.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/runners/all/salt.runners.digicertapi.html</a>
  </p>
</div>
