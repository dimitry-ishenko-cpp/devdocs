<h1>salt.runners.cache</h1> <p>Return cached data from minions</p> <dl class="py function"> <h3 id="salt.runners.cache.clear_all"> salt.runners.cache.clear_all(tgt=None, tgt_type='glob')</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2017.7.0: </span>The <code class="docutils literal notranslate"><span class="pre">expr_form</span></code> argument has been renamed to <code class="docutils literal notranslate"><span class="pre">tgt_type</span></code>, earlier releases must use <code class="docutils literal notranslate"><span class="pre">expr_form</span></code>.</p> </div> <p>Clear the cached pillar, grains, and mine data of the targeted minions</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run cache.clear_all</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.cache.clear_git_lock"> salt.runners.cache.clear_git_lock(role, remote=None, **kwargs)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.2.</span></p> </div> <p>Remove the update locks for Salt components (gitfs, git_pillar, winrepo) which use gitfs backend code from salt.utils.gitfs.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>Running <a class="reference internal" href="#salt.runners.cache.clear_all" title="salt.runners.cache.clear_all"><code class="xref py py-func docutils literal notranslate"><span class="pre">cache.clear_all</span></code></a> will not include this function as it does for pillar, grains, and mine.</p> <p>Additionally, executing this function with a <code class="docutils literal notranslate"><span class="pre">role</span></code> of <code class="docutils literal notranslate"><span class="pre">gitfs</span></code> is equivalent to running <code class="docutils literal notranslate"><span class="pre">salt-run</span> <span class="pre">fileserver.clear_lock</span> <span class="pre">backend=git</span></code>.</p> </div> <dl> <dt>role</dt>
<dd>
<p>Which type of lock to remove (<code class="docutils literal notranslate"><span class="pre">gitfs</span></code>, <code class="docutils literal notranslate"><span class="pre">git_pillar</span></code>, or <code class="docutils literal notranslate"><span class="pre">winrepo</span></code>)</p> </dd> <dt>remote</dt>
<dd>
<p>If specified, then any remotes which contain the passed string will have their lock cleared. For example, a <code class="docutils literal notranslate"><span class="pre">remote</span></code> value of <strong>github</strong> will remove the lock from all github.com remotes.</p> </dd> <dt>type<span class="classifier">update,checkout,mountpoint</span>
</dt>
<dd>
<p>The types of lock to clear. Can be one or more of <code class="docutils literal notranslate"><span class="pre">update</span></code>, <code class="docutils literal notranslate"><span class="pre">checkout</span></code>, and <code class="docutils literal notranslate"><span class="pre">mountpoint</span></code>, and can be passed either as a comma-separated or Python list.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.8.</span></p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2018.3.0: </span><code class="docutils literal notranslate"><span class="pre">mountpoint</span></code> lock type added</p> </div> </dd> </dl> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run cache.clear_git_lock gitfs
salt-run cache.clear_git_lock git_pillar
salt-run cache.clear_git_lock git_pillar type=update
salt-run cache.clear_git_lock git_pillar type=update,checkout
salt-run cache.clear_git_lock git_pillar type='["update", "mountpoint"]'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.cache.clear_grains"> salt.runners.cache.clear_grains(tgt=None, tgt_type='glob')</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2017.7.0: </span>The <code class="docutils literal notranslate"><span class="pre">expr_form</span></code> argument has been renamed to <code class="docutils literal notranslate"><span class="pre">tgt_type</span></code>, earlier releases must use <code class="docutils literal notranslate"><span class="pre">expr_form</span></code>.</p> </div> <p>Clear the cached grains data of the targeted minions</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run cache.clear_grains</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.cache.clear_mine"> salt.runners.cache.clear_mine(tgt=None, tgt_type='glob')</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2017.7.0: </span>The <code class="docutils literal notranslate"><span class="pre">expr_form</span></code> argument has been renamed to <code class="docutils literal notranslate"><span class="pre">tgt_type</span></code>, earlier releases must use <code class="docutils literal notranslate"><span class="pre">expr_form</span></code>.</p> </div> <p>Clear the cached mine data of the targeted minions</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run cache.clear_mine</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.cache.clear_mine_func"> salt.runners.cache.clear_mine_func(tgt=None, tgt_type='glob', clear_mine_func_flag=None)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2017.7.0: </span>The <code class="docutils literal notranslate"><span class="pre">expr_form</span></code> argument has been renamed to <code class="docutils literal notranslate"><span class="pre">tgt_type</span></code>, earlier releases must use <code class="docutils literal notranslate"><span class="pre">expr_form</span></code>.</p> </div> <p>Clear the cached mine function data of the targeted minions</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run cache.clear_mine_func tgt='*' clear_mine_func_flag='network.interfaces'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.cache.clear_pillar"> salt.runners.cache.clear_pillar(tgt=None, tgt_type='glob')</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2017.7.0: </span>The <code class="docutils literal notranslate"><span class="pre">expr_form</span></code> argument has been renamed to <code class="docutils literal notranslate"><span class="pre">tgt_type</span></code>, earlier releases must use <code class="docutils literal notranslate"><span class="pre">expr_form</span></code>.</p> </div> <p>Clear the cached pillar data of the targeted minions</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run cache.clear_pillar</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.cache.cloud"> salt.runners.cache.cloud(tgt, provider=None)</h3> <dd>
<p>Return cloud cache data for target.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>Only works with glob matching</p> </div> <dl class="simple"> <dt>tgt</dt>
<dd>
<p>Glob Target to match minion ids</p> </dd> <dt>provider</dt>
<dd>
<p>Cloud Provider</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run cache.cloud 'salt*'
salt-run cache.cloud glance.example.org provider=openstack</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.cache.fetch"> salt.runners.cache.fetch(bank, key, cachedir=None)</h3> <dd>
<p>Fetch data from a salt.cache bank.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run cache.fetch cloud/active/ec2/myec2 myminion cachedir=/var/cache/salt/</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.cache.flush"> salt.runners.cache.flush(bank, key=None, cachedir=None)</h3> <dd>
<p>Remove the key from the cache bank with all the key content. If no key is specified remove the entire bank with all keys and sub-banks inside.</p> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run cache.flush cloud/active/ec2/myec2 cachedir=/var/cache/salt/
salt-run cache.flush cloud/active/ec2/myec2 myminion cachedir=/var/cache/salt/</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.cache.grains"> salt.runners.cache.grains(tgt, tgt_type='glob', **kwargs)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2017.7.0: </span>The <code class="docutils literal notranslate"><span class="pre">expr_form</span></code> argument has been renamed to <code class="docutils literal notranslate"><span class="pre">tgt_type</span></code>, earlier releases must use <code class="docutils literal notranslate"><span class="pre">expr_form</span></code>.</p> </div> <p>Return cached grains of the targeted minions.</p> <dl> <dt>tgt</dt>
<dd>
<p>Target to match minion ids.</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2017.7.5,2018.3.0: </span>The <code class="docutils literal notranslate"><span class="pre">tgt</span></code> argument is now required to display cached grains. If not used, the function will not return grains. This optional argument will become mandatory in the Salt <code class="docutils literal notranslate"><span class="pre">3001</span></code> release.</p> </div> </dd> <dt>tgt_type</dt>
<dd>
<p>The type of targeting to use for matching, such as <code class="docutils literal notranslate"><span class="pre">glob</span></code>, <code class="docutils literal notranslate"><span class="pre">list</span></code>, etc.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run cache.grains '*'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.cache.list_"> salt.runners.cache.list_(bank, cachedir=None)</h3> <dd>
<p>Lists entries stored in the specified bank.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run cache.list cloud/active/ec2/myec2 cachedir=/var/cache/salt/</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.cache.mine"> salt.runners.cache.mine(tgt=None, tgt_type='glob', **kwargs)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2017.7.0: </span>The <code class="docutils literal notranslate"><span class="pre">expr_form</span></code> argument has been renamed to <code class="docutils literal notranslate"><span class="pre">tgt_type</span></code>, earlier releases must use <code class="docutils literal notranslate"><span class="pre">expr_form</span></code>.</p> </div> <p>Return cached mine data of the targeted minions</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run cache.mine</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.cache.pillar"> salt.runners.cache.pillar(tgt=None, tgt_type='glob', **kwargs)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2017.7.0: </span>The <code class="docutils literal notranslate"><span class="pre">expr_form</span></code> argument has been renamed to <code class="docutils literal notranslate"><span class="pre">tgt_type</span></code>, earlier releases must use <code class="docutils literal notranslate"><span class="pre">expr_form</span></code>.</p> </div> <p>Return cached pillars of the targeted minions if tgt is set. If tgt is not set will return cached pillars for all minions.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run cache.pillar</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.cache.store"> salt.runners.cache.store(bank, key, data, cachedir=None)</h3> <dd>
<p>Lists entries stored in the specified bank.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run cache.store mycache mykey 'The time has come the walrus said'</pre> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/runners/all/salt.runners.cache.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/runners/all/salt.runners.cache.html</a>
  </p>
</div>
