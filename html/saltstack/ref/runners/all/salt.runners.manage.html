<h1>salt.runners.manage</h1> <p>General management functions for salt, tools like seeing what hosts are up and what hosts are down</p> <dl class="py function"> <h3 id="salt.runners.manage.alived"> salt.runners.manage.alived(subset=None, show_ip=False)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2019.2.0.</span></p> </div> <p>Print a list of all minions that are up according to Salt's presence detection (no commands will be sent to minions)</p> <dl class="simple"> <dt>subset<span class="classifier">None</span>
</dt>
<dd>
<p>Pass in a CIDR range to filter minions by IP address.</p> </dd> <dt>show_ip<span class="classifier">False</span>
</dt>
<dd>
<p>Also show the IP address each minion is connecting from.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run manage.alived</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.manage.allowed"> salt.runners.manage.allowed(subset=None, show_ip=False)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2019.2.0.</span></p> </div> <p>Print a list of all minions that are up according to Salt's presence detection (no commands will be sent to minions)</p> <dl class="simple"> <dt>subset<span class="classifier">None</span>
</dt>
<dd>
<p>Pass in a CIDR range to filter minions by IP address.</p> </dd> <dt>show_ip<span class="classifier">False</span>
</dt>
<dd>
<p>Also show the IP address each minion is connecting from.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run manage.allowed</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.manage.bootstrap"> salt.runners.manage.bootstrap(version='develop', script=None, hosts='', script_args='', roster='flat', ssh_user=None, ssh_password=None, ssh_priv_key=None, tmp_dir='/tmp/.bootstrap', http_backend='tornado')</h3> <dd>
<p>Bootstrap minions with salt-bootstrap</p> <dl> <dt>version<span class="classifier">develop</span>
</dt>
<dd>
<p>Git tag of version to install</p> </dd> <dt>script<span class="classifier"><a class="reference external" href="https://bootstrap.saltstack.com">https://bootstrap.saltstack.com</a></span>
</dt>
<dd>
<p>URL containing the script to execute</p> </dd> <dt>hosts</dt>
<dd>
<p>Comma-separated hosts [example: hosts='host1.local,host2.local']. These hosts need to exist in the specified roster.</p> </dd> <dt>script_args</dt>
<dd>
<p>Any additional arguments that you want to pass to the script.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.11.0.</span></p> </div> </dd> <dt>roster<span class="classifier">flat</span>
</dt>
<dd>
<p>The roster to use for Salt SSH. More information about roster files can be found in <a class="reference internal" href="https://docs.saltproject.io/en/latest/topics/ssh/roster.html#ssh-roster"><span class="std std-ref">Salt's Roster Documentation</span></a>.</p> <p>A full list of roster types, see the <a class="reference internal" href="../../roster/all/index.html#all-salt-roster"><span class="std std-ref">builtin roster modules</span></a> documentation.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.11.0.</span></p> </div> </dd> <dt>ssh_user</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">user</span></code> isn't found in the <code class="docutils literal notranslate"><span class="pre">roster</span></code>, a default SSH user can be set here. Keep in mind that <code class="docutils literal notranslate"><span class="pre">ssh_user</span></code> will not override the roster <code class="docutils literal notranslate"><span class="pre">user</span></code> value if it is already defined.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.11.0.</span></p> </div> </dd> <dt>ssh_password</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">passwd</span></code> isn't found in the <code class="docutils literal notranslate"><span class="pre">roster</span></code>, a default SSH password can be set here. Keep in mind that <code class="docutils literal notranslate"><span class="pre">ssh_password</span></code> will not override the roster <code class="docutils literal notranslate"><span class="pre">passwd</span></code> value if it is already defined.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.11.0.</span></p> </div> </dd> <dt>ssh_privkey</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">priv</span></code> isn't found in the <code class="docutils literal notranslate"><span class="pre">roster</span></code>, a default SSH private key can be set here. Keep in mind that <code class="docutils literal notranslate"><span class="pre">ssh_password</span></code> will not override the roster <code class="docutils literal notranslate"><span class="pre">passwd</span></code> value if it is already defined.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.11.0.</span></p> </div> </dd> <dt>tmp_dir<span class="classifier">/tmp/.bootstrap</span>
</dt>
<dd>
<p>The temporary directory to download the bootstrap script in. This directory will have <code class="docutils literal notranslate"><span class="pre">-&lt;uuid4&gt;</span></code> appended to it. For example: <code class="docutils literal notranslate"><span class="pre">/tmp/.bootstrap-a19a728e-d40a-4801-aba9-d00655c143a7/</span></code></p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.11.0.</span></p> </div> </dd> <dt>http_backend<span class="classifier">tornado</span>
</dt>
<dd>
<p>The backend library to use to download the script. If you need to use a <code class="docutils literal notranslate"><span class="pre">file:///</span></code> URL, then you should set this to <code class="docutils literal notranslate"><span class="pre">urllib2</span></code>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 2016.11.0.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run manage.bootstrap hosts='host1,host2'
salt-run manage.bootstrap hosts='host1,host2' version='v0.17'
salt-run manage.bootstrap hosts='host1,host2' version='v0.17' script='https://bootstrap.saltstack.com/develop'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.manage.bootstrap_psexec"> salt.runners.manage.bootstrap_psexec(hosts='', master=None, version=None, arch='win32', installer_url=None, username=None, password=None)</h3> <dd>
<p>Bootstrap Windows minions via PsExec.</p> <dl class="simple"> <dt>hosts</dt>
<dd>
<p>Comma separated list of hosts to deploy the Windows Salt minion.</p> </dd> <dt>master</dt>
<dd>
<p>Address of the Salt master passed as an argument to the installer.</p> </dd> <dt>version</dt>
<dd>
<p>Point release of installer to download. Defaults to the most recent.</p> </dd> <dt>arch</dt>
<dd>
<p>Architecture of installer to download. Defaults to win32.</p> </dd> <dt>installer_url</dt>
<dd>
<p>URL of minion installer executable. Defaults to the latest version from <a class="reference external" href="https://repo.saltstack.com/windows/">https://repo.saltstack.com/windows/</a></p> </dd> <dt>username</dt>
<dd>
<p>Optional user name for login on remote computer.</p> </dd> <dt>password</dt>
<dd>
<p>Password for optional username. If omitted, PsExec will prompt for one to be entered for each host.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run manage.bootstrap_psexec hosts='host1,host2'
salt-run manage.bootstrap_psexec hosts='host1,host2' version='0.17' username='DOMAIN\Administrator'
salt-run manage.bootstrap_psexec hosts='host1,host2' installer_url='http://exampledomain/salt-installer.exe'</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.manage.down"> salt.runners.manage.down(removekeys=False, tgt='*', tgt_type='glob', timeout=None, gather_job_timeout=None)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2017.7.0: </span>The <code class="docutils literal notranslate"><span class="pre">expr_form</span></code> argument has been renamed to <code class="docutils literal notranslate"><span class="pre">tgt_type</span></code>, earlier releases must use <code class="docutils literal notranslate"><span class="pre">expr_form</span></code>.</p> </div> <p>Print a list of all the down or unresponsive salt minions Optionally remove keys of down minions</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run manage.down
salt-run manage.down removekeys=True
salt-run manage.down tgt="webservers" tgt_type="nodegroup"</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.manage.joined"> salt.runners.manage.joined(subset=None, show_ip=False)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2019.2.0.</span></p> </div> <p>Print a list of all minions that are up according to Salt's presence detection (no commands will be sent to minions)</p> <dl class="simple"> <dt>subset<span class="classifier">None</span>
</dt>
<dd>
<p>Pass in a CIDR range to filter minions by IP address.</p> </dd> <dt>show_ip<span class="classifier">False</span>
</dt>
<dd>
<p>Also show the IP address each minion is connecting from.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run manage.joined</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.manage.key_regen"> salt.runners.manage.key_regen()</h3> <dd>
<p>This routine is used to regenerate all keys in an environment. This is invasive! ALL KEYS IN THE SALT ENVIRONMENT WILL BE REGENERATED!!</p> <p>The key_regen routine sends a command out to minions to revoke the master key and remove all minion keys, it then removes all keys from the master and prompts the user to restart the master. The minions will all reconnect and keys will be placed in pending.</p> <p>After the master is restarted and minion keys are in the pending directory execute a salt-key -A command to accept the regenerated minion keys.</p> <p>The master <em>must</em> be restarted within 60 seconds of running this command or the minions will think there is something wrong with the keys and abort.</p> <p>Only Execute this runner after upgrading minions and master to 0.15.1 or higher!</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run manage.key_regen</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.manage.list_not_state"> salt.runners.manage.list_not_state(subset=None, show_ip=False)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2019.2.0.</span></p> </div> <p>Print a list of all minions that are NOT up according to Salt's presence detection (no commands will be sent to minions)</p> <dl class="simple"> <dt>subset<span class="classifier">None</span>
</dt>
<dd>
<p>Pass in a CIDR range to filter minions by IP address.</p> </dd> <dt>show_ip<span class="classifier">False</span>
</dt>
<dd>
<p>Also show the IP address each minion is connecting from.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run manage.list_not_state</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.manage.list_state"> salt.runners.manage.list_state(subset=None, show_ip=False)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2019.2.0.</span></p> </div> <p>Print a list of all minions that are up according to Salt's presence detection (no commands will be sent to minions)</p> <dl class="simple"> <dt>subset<span class="classifier">None</span>
</dt>
<dd>
<p>Pass in a CIDR range to filter minions by IP address.</p> </dd> <dt>show_ip<span class="classifier">False</span>
</dt>
<dd>
<p>Also show the IP address each minion is connecting from.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run manage.list_state</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.manage.not_alived"> salt.runners.manage.not_alived(subset=None, show_ip=False)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2019.2.0.</span></p> </div> <p>Print a list of all minions that are NOT up according to Salt's presence detection (no commands will be sent)</p> <dl class="simple"> <dt>subset<span class="classifier">None</span>
</dt>
<dd>
<p>Pass in a CIDR range to filter minions by IP address.</p> </dd> <dt>show_ip<span class="classifier">False</span>
</dt>
<dd>
<p>Also show the IP address each minion is connecting from.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run manage.not_alived</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.manage.not_allowed"> salt.runners.manage.not_allowed(subset=None, show_ip=False)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2019.2.0.</span></p> </div> <p>Print a list of all minions that are NOT up according to Salt's presence detection (no commands will be sent)</p> <dl class="simple"> <dt>subset<span class="classifier">None</span>
</dt>
<dd>
<p>Pass in a CIDR range to filter minions by IP address.</p> </dd> <dt>show_ip<span class="classifier">False</span>
</dt>
<dd>
<p>Also show the IP address each minion is connecting from.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run manage.not_allowed</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.manage.not_joined"> salt.runners.manage.not_joined(subset=None, show_ip=False)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2019.2.0.</span></p> </div> <p>Print a list of all minions that are NOT up according to Salt's presence detection (no commands will be sent)</p> <dl class="simple"> <dt>subset<span class="classifier">None</span>
</dt>
<dd>
<p>Pass in a CIDR range to filter minions by IP address.</p> </dd> <dt>show_ip<span class="classifier">False</span>
</dt>
<dd>
<p>Also show the IP address each minion is connecting from.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run manage.not_joined</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.manage.not_present"> salt.runners.manage.not_present(subset=None, show_ip=False)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.5.0.</span></p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2019.2.0.</span></p> </div> <p>Print a list of all minions that are NOT up according to Salt's presence detection (no commands will be sent)</p> <dl class="simple"> <dt>subset<span class="classifier">None</span>
</dt>
<dd>
<p>Pass in a CIDR range to filter minions by IP address.</p> </dd> <dt>show_ip<span class="classifier">False</span>
</dt>
<dd>
<p>Also show the IP address each minion is connecting from.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run manage.not_present</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.manage.not_reaped"> salt.runners.manage.not_reaped(subset=None, show_ip=False)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2019.2.0.</span></p> </div> <p>Print a list of all minions that are NOT up according to Salt's presence detection (no commands will be sent)</p> <dl class="simple"> <dt>subset<span class="classifier">None</span>
</dt>
<dd>
<p>Pass in a CIDR range to filter minions by IP address.</p> </dd> <dt>show_ip<span class="classifier">False</span>
</dt>
<dd>
<p>Also show the IP address each minion is connecting from.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run manage.not_reaped</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.manage.present"> salt.runners.manage.present(subset=None, show_ip=False)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2019.2.0.</span></p> </div> <p>Print a list of all minions that are up according to Salt's presence detection (no commands will be sent to minions)</p> <dl class="simple"> <dt>subset<span class="classifier">None</span>
</dt>
<dd>
<p>Pass in a CIDR range to filter minions by IP address.</p> </dd> <dt>show_ip<span class="classifier">False</span>
</dt>
<dd>
<p>Also show the IP address each minion is connecting from.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run manage.present</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.manage.reaped"> salt.runners.manage.reaped(subset=None, show_ip=False)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 2015.8.0.</span></p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2019.2.0.</span></p> </div> <p>Print a list of all minions that are up according to Salt's presence detection (no commands will be sent to minions)</p> <dl class="simple"> <dt>subset<span class="classifier">None</span>
</dt>
<dd>
<p>Pass in a CIDR range to filter minions by IP address.</p> </dd> <dt>show_ip<span class="classifier">False</span>
</dt>
<dd>
<p>Also show the IP address each minion is connecting from.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run manage.reaped</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.manage.safe_accept"> salt.runners.manage.safe_accept(target, tgt_type='glob')</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2017.7.0: </span>The <code class="docutils literal notranslate"><span class="pre">expr_form</span></code> argument has been renamed to <code class="docutils literal notranslate"><span class="pre">tgt_type</span></code>, earlier releases must use <code class="docutils literal notranslate"><span class="pre">expr_form</span></code>.</p> </div> <p>Accept a minion's public key after checking the fingerprint over salt-ssh</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run manage.safe_accept my_minion
salt-run manage.safe_accept minion1,minion2 tgt_type=list</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.manage.status"> salt.runners.manage.status(output=True, tgt='*', tgt_type='glob', timeout=None, gather_job_timeout=None)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2017.7.0: </span>The <code class="docutils literal notranslate"><span class="pre">expr_form</span></code> argument has been renamed to <code class="docutils literal notranslate"><span class="pre">tgt_type</span></code>, earlier releases must use <code class="docutils literal notranslate"><span class="pre">expr_form</span></code>.</p> </div> <p>Print the status of all known salt minions</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run manage.status
salt-run manage.status tgt="webservers" tgt_type="nodegroup"
salt-run manage.status timeout=5 gather_job_timeout=10</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.manage.up"> salt.runners.manage.up(tgt='*', tgt_type='glob', timeout=None, gather_job_timeout=None)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2017.7.0: </span>The <code class="docutils literal notranslate"><span class="pre">expr_form</span></code> argument has been renamed to <code class="docutils literal notranslate"><span class="pre">tgt_type</span></code>, earlier releases must use <code class="docutils literal notranslate"><span class="pre">expr_form</span></code>.</p> </div> <p>Print a list of all of the minions that are up</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run manage.up
salt-run manage.up tgt="webservers" tgt_type="nodegroup"
salt-run manage.up timeout=5 gather_job_timeout=10</pre> </dd>
</dl> <dl class="py function"> <h3 id="salt.runners.manage.versions"> salt.runners.manage.versions()</h3> <dd>
<p>Check the version of active minions</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt-run manage.versions</pre> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2021 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltproject.io/en/latest/ref/runners/all/salt.runners.manage.html" class="_attribution-link">https://docs.saltproject.io/en/latest/ref/runners/all/salt.runners.manage.html</a>
  </p>
</div>
