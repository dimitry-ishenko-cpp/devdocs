<h1 class="title">Data Chunks</h1>  <p>Data chunks represent a horizontal slice of a table. They hold a number of <a href="vector.html">vectors</a>, that can each hold up to the <code class="language-plaintext highlighter-rouge">VECTOR_SIZE</code> rows. The vector size can be obtained through the <code class="language-plaintext highlighter-rouge">duckdb_vector_size</code> function and is configurable, but is usually set to <code class="language-plaintext highlighter-rouge">2048</code>.</p> <p>Data chunks and vectors are what DuckDB uses natively to store and represent data. For this reason, the data chunk interface is the most efficient way of interfacing with DuckDB. Be aware, however, that correctly interfacing with DuckDB using the data chunk API does require knowledge of DuckDB's internal vector format.</p> <p>Data chunks can be used in two manners:</p> <ul> <li>
<strong>Reading Data</strong>: Data chunks can be obtained from query results using the <code class="language-plaintext highlighter-rouge">duckdb_fetch_chunk</code> method, or as input to a user-defined function. In this case, the <a href="vector.html">vector methods</a> can be used to read individual values.</li> <li>
<strong>Writing Data</strong>: Data chunks can be created using <code class="language-plaintext highlighter-rouge">duckdb_create_data_chunk</code>. The data chunk can then be filled with values and used in <code class="language-plaintext highlighter-rouge">duckdb_append_data_chunk</code> to write data to the database.</li> </ul> <p>The primary manner of interfacing with data chunks is by obtaining the internal vectors of the data chunk using the <code class="language-plaintext highlighter-rouge">duckdb_data_chunk_get_vector</code> method. Afterwards, the <a href="vector.html">vector methods</a> can be used to read from or write to the individual vectors.</p> <h2 id="api-reference-overview"> <a style="text-decoration: none;" href="#api-reference-overview">API Reference Overview</a> </h2>  <pre class="language-c highlighter-rouge" data-language="c">duckdb_data_chunk duckdb_create_data_chunk(duckdb_logical_type *types, idx_t column_count);
void duckdb_destroy_data_chunk(duckdb_data_chunk *chunk);
void duckdb_data_chunk_reset(duckdb_data_chunk chunk);
idx_t duckdb_data_chunk_get_column_count(duckdb_data_chunk chunk);
duckdb_vector duckdb_data_chunk_get_vector(duckdb_data_chunk chunk, idx_t col_idx);
idx_t duckdb_data_chunk_get_size(duckdb_data_chunk chunk);
void duckdb_data_chunk_set_size(duckdb_data_chunk chunk, idx_t size);</pre> <h4 id="duckdb_create_data_chunk"> <a style="text-decoration: none;" href="#duckdb_create_data_chunk"><code class="language-plaintext highlighter-rouge">duckdb_create_data_chunk</code></a> </h4> <p>Creates an empty data chunk with the specified column types. The result must be destroyed with <code class="language-plaintext highlighter-rouge">duckdb_destroy_data_chunk</code>.</p> <h5 id="syntax"> <a style="text-decoration: none;" href="#syntax">Syntax</a> </h5> <pre class="language-c highlighter-rouge" data-language="c">duckdb_data_chunk duckdb_create_data_chunk(
  duckdb_logical_type *types,
  idx_t column_count
);</pre> <h5 id="parameters"> <a style="text-decoration: none;" href="#parameters">Parameters</a> </h5> <ul> <li>
<code class="language-plaintext highlighter-rouge">types</code>: An array of column types. Column types can not contain ANY and INVALID types.</li> <li>
<code class="language-plaintext highlighter-rouge">column_count</code>: The number of columns.</li> </ul> <h5 id="return-value"> <a style="text-decoration: none;" href="#return-value">Return Value</a> </h5> <p>The data chunk.</p> <p><br></p> <h4 id="duckdb_destroy_data_chunk"> <a style="text-decoration: none;" href="#duckdb_destroy_data_chunk"><code class="language-plaintext highlighter-rouge">duckdb_destroy_data_chunk</code></a> </h4> <p>Destroys the data chunk and de-allocates all memory allocated for that chunk.</p> <h5 id="syntax-1"> <a style="text-decoration: none;" href="#syntax-1">Syntax</a> </h5> <pre class="language-c highlighter-rouge" data-language="c">void duckdb_destroy_data_chunk(
  duckdb_data_chunk *chunk
);</pre> <h5 id="parameters-1"> <a style="text-decoration: none;" href="#parameters-1">Parameters</a> </h5> <ul> <li>
<code class="language-plaintext highlighter-rouge">chunk</code>: The data chunk to destroy.</li> </ul> <p><br></p> <h4 id="duckdb_data_chunk_reset"> <a style="text-decoration: none;" href="#duckdb_data_chunk_reset"><code class="language-plaintext highlighter-rouge">duckdb_data_chunk_reset</code></a> </h4> <p>Resets a data chunk, clearing the validity masks and setting the cardinality of the data chunk to 0. After calling this method, you must call <code class="language-plaintext highlighter-rouge">duckdb_vector_get_validity</code> and <code class="language-plaintext highlighter-rouge">duckdb_vector_get_data</code> to obtain current data and validity pointers</p> <h5 id="syntax-2"> <a style="text-decoration: none;" href="#syntax-2">Syntax</a> </h5> <pre class="language-c highlighter-rouge" data-language="c">void duckdb_data_chunk_reset(
  duckdb_data_chunk chunk
);</pre> <h5 id="parameters-2"> <a style="text-decoration: none;" href="#parameters-2">Parameters</a> </h5> <ul> <li>
<code class="language-plaintext highlighter-rouge">chunk</code>: The data chunk to reset.</li> </ul> <p><br></p> <h4 id="duckdb_data_chunk_get_column_count"> <a style="text-decoration: none;" href="#duckdb_data_chunk_get_column_count"><code class="language-plaintext highlighter-rouge">duckdb_data_chunk_get_column_count</code></a> </h4> <p>Retrieves the number of columns in a data chunk.</p> <h5 id="syntax-3"> <a style="text-decoration: none;" href="#syntax-3">Syntax</a> </h5> <pre class="language-c highlighter-rouge" data-language="c">idx_t duckdb_data_chunk_get_column_count(
  duckdb_data_chunk chunk
);</pre> <h5 id="parameters-3"> <a style="text-decoration: none;" href="#parameters-3">Parameters</a> </h5> <ul> <li>
<code class="language-plaintext highlighter-rouge">chunk</code>: The data chunk to get the data from</li> </ul> <h5 id="return-value-1"> <a style="text-decoration: none;" href="#return-value-1">Return Value</a> </h5> <p>The number of columns in the data chunk</p> <p><br></p> <h4 id="duckdb_data_chunk_get_vector"> <a style="text-decoration: none;" href="#duckdb_data_chunk_get_vector"><code class="language-plaintext highlighter-rouge">duckdb_data_chunk_get_vector</code></a> </h4> <p>Retrieves the vector at the specified column index in the data chunk.</p> <p>The pointer to the vector is valid for as long as the chunk is alive. It does NOT need to be destroyed.</p> <h5 id="syntax-4"> <a style="text-decoration: none;" href="#syntax-4">Syntax</a> </h5> <pre class="language-c highlighter-rouge" data-language="c">duckdb_vector duckdb_data_chunk_get_vector(
  duckdb_data_chunk chunk,
  idx_t col_idx
);</pre> <h5 id="parameters-4"> <a style="text-decoration: none;" href="#parameters-4">Parameters</a> </h5> <ul> <li>
<code class="language-plaintext highlighter-rouge">chunk</code>: The data chunk to get the data from</li> </ul> <h5 id="return-value-2"> <a style="text-decoration: none;" href="#return-value-2">Return Value</a> </h5> <p>The vector</p> <p><br></p> <h4 id="duckdb_data_chunk_get_size"> <a style="text-decoration: none;" href="#duckdb_data_chunk_get_size"><code class="language-plaintext highlighter-rouge">duckdb_data_chunk_get_size</code></a> </h4> <p>Retrieves the current number of tuples in a data chunk.</p> <h5 id="syntax-5"> <a style="text-decoration: none;" href="#syntax-5">Syntax</a> </h5> <pre class="language-c highlighter-rouge" data-language="c">idx_t duckdb_data_chunk_get_size(
  duckdb_data_chunk chunk
);</pre> <h5 id="parameters-5"> <a style="text-decoration: none;" href="#parameters-5">Parameters</a> </h5> <ul> <li>
<code class="language-plaintext highlighter-rouge">chunk</code>: The data chunk to get the data from</li> </ul> <h5 id="return-value-3"> <a style="text-decoration: none;" href="#return-value-3">Return Value</a> </h5> <p>The number of tuples in the data chunk</p> <p><br></p> <h4 id="duckdb_data_chunk_set_size"> <a style="text-decoration: none;" href="#duckdb_data_chunk_set_size"><code class="language-plaintext highlighter-rouge">duckdb_data_chunk_set_size</code></a> </h4> <p>Sets the current number of tuples in a data chunk.</p> <h5 id="syntax-6"> <a style="text-decoration: none;" href="#syntax-6">Syntax</a> </h5> <pre class="language-c highlighter-rouge" data-language="c">void duckdb_data_chunk_set_size(
  duckdb_data_chunk chunk,
  idx_t size
);</pre> <h5 id="parameters-6"> <a style="text-decoration: none;" href="#parameters-6">Parameters</a> </h5> <ul> <li>
<code class="language-plaintext highlighter-rouge">chunk</code>: The data chunk to set the size in</li> <li>
<code class="language-plaintext highlighter-rouge">size</code>: The number of tuples in the data chunk</li> </ul> <p><br></p><div class="_attribution">
  <p class="_attribution-p">
    &copy; Copyright 2018&ndash;2024 Stichting DuckDB Foundation<br>Licensed under the MIT License.<br>
    <a href="https://duckdb.org/docs/api/c/data_chunk.html" class="_attribution-link">https://duckdb.org/docs/api/c/data_chunk.html</a>
  </p>
</div>
