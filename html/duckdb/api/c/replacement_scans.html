<h1 class="title">Replacement Scans</h1>  <p>The replacement scan API can be used to register a callback that is called when a table is read that does not exist in the catalog. For example, when a query such as <code class="language-plaintext highlighter-rouge">SELECT * FROM my_table</code> is executed and <code class="language-plaintext highlighter-rouge">my_table</code> does not exist, the replacement scan callback will be called with <code class="language-plaintext highlighter-rouge">my_table</code> as parameter. The replacement scan can then insert a table function with a specific parameter to replace the read of the table.</p> <h2 id="api-reference-overview"> <a style="text-decoration: none;" href="#api-reference-overview">API Reference Overview</a> </h2>  <pre class="language-c highlighter-rouge" data-language="c">void duckdb_add_replacement_scan(duckdb_database db, duckdb_replacement_callback_t replacement, void *extra_data, duckdb_delete_callback_t delete_callback);
void duckdb_replacement_scan_set_function_name(duckdb_replacement_scan_info info, const char *function_name);
void duckdb_replacement_scan_add_parameter(duckdb_replacement_scan_info info, duckdb_value parameter);
void duckdb_replacement_scan_set_error(duckdb_replacement_scan_info info, const char *error);</pre> <h4 id="duckdb_add_replacement_scan"> <a style="text-decoration: none;" href="#duckdb_add_replacement_scan"><code class="language-plaintext highlighter-rouge">duckdb_add_replacement_scan</code></a> </h4> <p>Add a replacement scan definition to the specified database.</p> <h5 id="syntax"> <a style="text-decoration: none;" href="#syntax">Syntax</a> </h5> <pre class="language-c highlighter-rouge" data-language="c">void duckdb_add_replacement_scan(
  duckdb_database db,
  duckdb_replacement_callback_t replacement,
  void *extra_data,
  duckdb_delete_callback_t delete_callback
);</pre> <h5 id="parameters"> <a style="text-decoration: none;" href="#parameters">Parameters</a> </h5> <ul> <li>
<code class="language-plaintext highlighter-rouge">db</code>: The database object to add the replacement scan to</li> <li>
<code class="language-plaintext highlighter-rouge">replacement</code>: The replacement scan callback</li> <li>
<code class="language-plaintext highlighter-rouge">extra_data</code>: Extra data that is passed back into the specified callback</li> <li>
<code class="language-plaintext highlighter-rouge">delete_callback</code>: The delete callback to call on the extra data, if any</li> </ul> <p><br></p> <h4 id="duckdb_replacement_scan_set_function_name"> <a style="text-decoration: none;" href="#duckdb_replacement_scan_set_function_name"><code class="language-plaintext highlighter-rouge">duckdb_replacement_scan_set_function_name</code></a> </h4> <p>Sets the replacement function name. If this function is called in the replacement callback, the replacement scan is performed. If it is not called, the replacement callback is not performed.</p> <h5 id="syntax-1"> <a style="text-decoration: none;" href="#syntax-1">Syntax</a> </h5> <pre class="language-c highlighter-rouge" data-language="c">void duckdb_replacement_scan_set_function_name(
  duckdb_replacement_scan_info info,
  const char *function_name
);</pre> <h5 id="parameters-1"> <a style="text-decoration: none;" href="#parameters-1">Parameters</a> </h5> <ul> <li>
<code class="language-plaintext highlighter-rouge">info</code>: The info object</li> <li>
<code class="language-plaintext highlighter-rouge">function_name</code>: The function name to substitute.</li> </ul> <p><br></p> <h4 id="duckdb_replacement_scan_add_parameter"> <a style="text-decoration: none;" href="#duckdb_replacement_scan_add_parameter"><code class="language-plaintext highlighter-rouge">duckdb_replacement_scan_add_parameter</code></a> </h4> <p>Adds a parameter to the replacement scan function.</p> <h5 id="syntax-2"> <a style="text-decoration: none;" href="#syntax-2">Syntax</a> </h5> <pre class="language-c highlighter-rouge" data-language="c">void duckdb_replacement_scan_add_parameter(
  duckdb_replacement_scan_info info,
  duckdb_value parameter
);</pre> <h5 id="parameters-2"> <a style="text-decoration: none;" href="#parameters-2">Parameters</a> </h5> <ul> <li>
<code class="language-plaintext highlighter-rouge">info</code>: The info object</li> <li>
<code class="language-plaintext highlighter-rouge">parameter</code>: The parameter to add.</li> </ul> <p><br></p> <h4 id="duckdb_replacement_scan_set_error"> <a style="text-decoration: none;" href="#duckdb_replacement_scan_set_error"><code class="language-plaintext highlighter-rouge">duckdb_replacement_scan_set_error</code></a> </h4> <p>Report that an error has occurred while executing the replacement scan.</p> <h5 id="syntax-3"> <a style="text-decoration: none;" href="#syntax-3">Syntax</a> </h5> <pre class="language-c highlighter-rouge" data-language="c">void duckdb_replacement_scan_set_error(
  duckdb_replacement_scan_info info,
  const char *error
);</pre> <h5 id="parameters-3"> <a style="text-decoration: none;" href="#parameters-3">Parameters</a> </h5> <ul> <li>
<code class="language-plaintext highlighter-rouge">info</code>: The info object</li> <li>
<code class="language-plaintext highlighter-rouge">error</code>: The error message</li> </ul> <p><br></p><div class="_attribution">
  <p class="_attribution-p">
    &copy; Copyright 2018&ndash;2024 Stichting DuckDB Foundation<br>Licensed under the MIT License.<br>
    <a href="https://duckdb.org/docs/api/c/replacement_scans.html" class="_attribution-link">https://duckdb.org/docs/api/c/replacement_scans.html</a>
  </p>
</div>
