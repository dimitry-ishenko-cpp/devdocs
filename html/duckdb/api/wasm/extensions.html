<h1 class="title">Extensions</h1>  <p>DuckDB-Wasm's (dynamic) extension loading is modeled after the regular DuckDB's extension loading, with a few relevant differences due to the difference in platform.</p> <h2 id="format"> <a style="text-decoration: none;" href="#format">Format</a> </h2> <p>Extensions in DuckDB are binaries to be dynamically loaded via <code class="language-plaintext highlighter-rouge">dlopen</code>. A cryptographical signature is appended to the binary. An extension in DuckDB-Wasm is a regular Wasm file to be dynamically loaded via Emscripten's <code class="language-plaintext highlighter-rouge">dlopen</code>. A cryptographical signature is appended to the Wasm file as a WebAssembly custom section called <code class="language-plaintext highlighter-rouge">duckdb_signature</code>. This ensures the file remains a valid WebAssembly file.</p> <blockquote> <p>Currently, we require this custom section to be the last one, but this can be potentially relaxed in the future.</p> </blockquote> <h2 id="install-and-load"> <a style="text-decoration: none;" href="#install-and-load"><code class="language-plaintext highlighter-rouge">INSTALL</code> and <code class="language-plaintext highlighter-rouge">LOAD</code></a> </h2> <p>The <code class="language-plaintext highlighter-rouge">INSTALL</code> semantic in native embeddings of DuckDB is to fetch, decompress from <code class="language-plaintext highlighter-rouge">gzip</code> and store data in local disk. The <code class="language-plaintext highlighter-rouge">LOAD</code> semantic in native embeddings of DuckDB is to (optionally) perform signature checks <em>and</em> dynamic load the binary with the main DuckDB binary.</p> <p>In DuckDB-Wasm, <code class="language-plaintext highlighter-rouge">INSTALL</code> is a no-op given there is no durable cross-session storage. The <code class="language-plaintext highlighter-rouge">LOAD</code> operation will fetch (and decompress on the fly), perform signature checks <em>and</em> dynamically load via the Emscripten implementation of <code class="language-plaintext highlighter-rouge">dlopen</code>.</p> <h2 id="autoloading"> <a style="text-decoration: none;" href="#autoloading">Autoloading</a> </h2> <p><a href="../../extensions/overview.html">Autoloading</a>, i.e., the possibility for DuckDB to add extension functionality on-the-fly, is enabled by default in DuckDB-Wasm.</p> <h2 id="list-of-officially-available-extensions"> <a style="text-decoration: none;" href="#list-of-officially-available-extensions">List of Officially Available Extensions</a> </h2> <table> <thead> <tr> <th>Extension name</th> <th>Description</th> <th>Aliases</th> </tr> </thead> <tbody> <tr> <td><a href="../../extensions/autocomplete.html">autocomplete</a></td> <td>Adds support for autocomplete in the shell</td> <td> </td> </tr> <tr> <td><a href="../../extensions/excel.html">excel</a></td> <td>Adds support for Excel-like format strings</td> <td> </td> </tr> <tr> <td><a href="../../extensions/full_text_search.html">fts</a></td> <td>Adds support for Full-Text Search Indexes</td> <td> </td> </tr> <tr> <td>icu</td> <td>Adds support for time zones and collations using the ICU library</td> <td> </td> </tr> <tr> <td>inet</td> <td>Adds support for IP-related data types and functions</td> <td> </td> </tr> <tr> <td><a href="../../data/json/overview.html">json</a></td> <td>Adds support for JSON operations</td> <td> </td> </tr> <tr> <td><a href="../../data/parquet/overview.html">parquet</a></td> <td>Adds support for reading and writing Parquet files</td> <td> </td> </tr> <tr> <td>
<a href="../../extensions/sqlite.html">sqlite</a> <a href="https://github.com/duckdb/sqlite_scanner"><span>GitHub</span></a>
</td> <td>Adds support for reading SQLite database files</td> <td>sqlite, sqlite3</td> </tr> <tr> <td>sqlsmith</td> <td> </td> <td> </td> </tr> <tr> <td>
<a href="../../extensions/substrait.html">substrait</a> <a href="https://github.com/duckdb/substrait"><span>GitHub</span></a>
</td> <td>Adds support for the Substrait integration</td> <td> </td> </tr> <tr> <td><a href="../../extensions/tpcds.html">tpcds</a></td> <td>Adds TPC-DS data generation and query support</td> <td> </td> </tr> <tr> <td><a href="../../extensions/tpch.html">tpch</a></td> <td>Adds TPC-H data generation and query support</td> <td> </td> </tr> </tbody> </table> <p>WebAssembly is basically an additional platform, and there might be platform-specific limitations that make some extensions not able to match their native capabilities or to perform them in a different way. We will document here relevant differences for DuckDB-hosted extensions.</p> <h3 id="httpfs"> <a style="text-decoration: none;" href="#httpfs">HTTPFS</a> </h3> <p>The HTTPFS extension is, at the moment, not available in DuckDB-Wasm. Https protocol capabilities needs to go through an additional layer, the browser, which adds both differences and some restrictions to what is doable from native.</p> <p>Instead, DuckDB-Wasm has a separate implementation that for most purposes is interchangeable, but does not support all use cases (as it must follow security rules imposed by the browser, such as CORS). Due to this CORS restriction, any requests for data made using the HTTPFS extension must be to websites that allow (using CORS headers) the website hosting the DuckDB-Wasm instance to access that data. The <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS">MDN website</a> is a great resource for more information regarding CORS.</p> <h2 id="extension-signing"> <a style="text-decoration: none;" href="#extension-signing">Extension Signing</a> </h2> <p>As with regular DuckDB extensions, DuckDB-Wasm extension are by default checked on <code class="language-plaintext highlighter-rouge">LOAD</code> to verify the signature confirm the extension has not been tampered with. Extension signature verification can be disabled via a configuration option. Signing is a property of the binary itself, so copying a DuckDB extension (say to serve it from a different location) will still keep a valid signature (e.g., for local development).</p> <h2 id="fetching-duckdb-wasm-extensions"> <a style="text-decoration: none;" href="#fetching-duckdb-wasm-extensions">Fetching DuckDB-Wasm Extensions</a> </h2> <p>Official DuckDB extensions are served at <code class="language-plaintext highlighter-rouge">extensions.duckdb.org</code>, and this is also the default value for the <code class="language-plaintext highlighter-rouge">default_extension_repository</code> option. When installing extensions, a relevant URL will be built that will look like <code class="language-plaintext highlighter-rouge">extensions.duckdb.org/$duckdb_version_hash/$duckdb_platform/$name.duckdb_extension.gz</code>.</p> <p>DuckDB-Wasm extension are fetched only on load, and the URL will look like: <code class="language-plaintext highlighter-rouge">extensions.duckdb.org/duckdb-wasm/$duckdb_version_hash/$duckdb_platform/$name.duckdb_extension.wasm</code>.</p> <p>Note that an additional <code class="language-plaintext highlighter-rouge">duckdb-wasm</code> is added to the folder structure, and the file is served as a <code class="language-plaintext highlighter-rouge">.wasm</code> file.</p> <p>DuckDB-Wasm extensions are served pre-compressed using Brotli compression. While fetched from a browser, extensions will be transparently uncompressed. If you want to fetch the <code class="language-plaintext highlighter-rouge">duckdb-wasm</code> extension manually, you can use <code class="language-plaintext highlighter-rouge">curl --compress extensions.duckdb.org/&lt;...&gt;/icu.duckdb_extension.wasm</code>.</p> <h2 id="serving-extensions-from-a-third-party-repository"> <a style="text-decoration: none;" href="#serving-extensions-from-a-third-party-repository">Serving Extensions from a Third-Party Repository</a> </h2> <p>As with regular DuckDB, if you use <code class="language-plaintext highlighter-rouge">SET custom_extension_repository = some.url.com</code>, subsequent loads will be attempted at <code class="language-plaintext highlighter-rouge">some.url.com/duckdb-wasm/$duckdb_version_hash/$duckdb_platform/$name.duckdb_extension.wasm</code>.</p> <p>Note that GET requests on the extensions needs to be <a href="https://www.w3.org/wiki/CORS_Enabled">CORS enabled</a> for a browser to allow the connection.</p> <h2 id="tooling"> <a style="text-decoration: none;" href="#tooling">Tooling</a> </h2> <p>Both DuckDB-Wasm and its extensions have been compiled using latest packaged Emscripten toolchain.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; Copyright 2018&ndash;2024 Stichting DuckDB Foundation<br>Licensed under the MIT License.<br>
    <a href="https://duckdb.org/docs/api/wasm/extensions.html" class="_attribution-link">https://duckdb.org/docs/api/wasm/extensions.html</a>
  </p>
</div>
