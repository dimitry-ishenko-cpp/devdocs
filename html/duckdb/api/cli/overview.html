<h1 class="title">CLI API</h1>  <h2 id="installation"> <a style="text-decoration: none;" href="#installation">Installation</a> </h2> <p>The DuckDB CLI (Command Line Interface) is a single, dependency-free executable. It is precompiled for Windows, Mac, and Linux for both the stable version and for nightly builds produced by GitHub Actions. Please see the <a href="http://localhost:8000/docs/installation/">installation page</a> under the CLI tab for download links.</p> <p>The DuckDB CLI is based on the SQLite command line shell, so CLI-client-specific functionality is similar to what is described in the <a href="https://www.sqlite.org/cli.html">SQLite documentation</a> (although DuckDB's SQL syntax follows PostgreSQL conventions with a <a href="../../sql/dialect/postgresql_compatibility.html">few exceptions</a>).</p> <blockquote> <p>DuckDB has a <a href="https://tldr.inbrowser.app/pages/common/duckdb">tldr page</a>, which summarizes the most common uses of the CLI client. If you have <a href="https://github.com/tldr-pages/tldr">tldr</a> installed, you can display it by running <code class="language-plaintext highlighter-rouge">tldr duckdb</code>.</p> </blockquote> <h2 id="getting-started"> <a style="text-decoration: none;" href="#getting-started">Getting Started</a> </h2> <p>Once the CLI executable has been downloaded, unzip it and save it to any directory. Navigate to that directory in a terminal and enter the command <code class="language-plaintext highlighter-rouge">duckdb</code> to run the executable. If in a PowerShell or POSIX shell environment, use the command <code class="language-plaintext highlighter-rouge">./duckdb</code> instead.</p> <h2 id="usage"> <a style="text-decoration: none;" href="#usage">Usage</a> </h2> <p>The typical usage of the <code class="language-plaintext highlighter-rouge">duckdb</code> command is the following:</p> <pre class="language-bash highlighter-rouge" data-language="bash">duckdb [OPTIONS] [FILENAME]</pre> <h3 id="options"> <a style="text-decoration: none;" href="#options">Options</a> </h3> <p>The <code class="language-plaintext highlighter-rouge">[OPTIONS]</code> part encodes <a href="arguments.html">arguments for the CLI client</a>. Common options include:</p> <ul> <li>
<code class="language-plaintext highlighter-rouge">-csv</code>: sets the output mode to CSV</li> <li>
<code class="language-plaintext highlighter-rouge">-json</code>: sets the output mode to JSON</li> <li>
<code class="language-plaintext highlighter-rouge">-readonly</code>: open the database in read-only mode (see <a href="../../connect/concurrency.html#handling-concurrency.html">concurrency in DuckDB</a>)</li> </ul> <p>For a full list of options, see the <a href="arguments.html">command line arguments page</a>.</p> <h3 id="in-memory-vs-persistent-database"> <a style="text-decoration: none;" href="#in-memory-vs-persistent-database">In-Memory vs. Persistent Database</a> </h3> <p>When no <code class="language-plaintext highlighter-rouge">[FILENAME]</code> argument is provided, the DuckDB CLI will open a temporary <a href="../../connect/overview.html#in-memory-database.html">in-memory database</a>. You will see DuckDB's version number, the information on the connection and a prompt starting with a <code class="language-plaintext highlighter-rouge">D</code>.</p> <pre class="language-bash highlighter-rouge" data-language="bash">duckdb</pre> <pre class="language-text highlighter-rouge" data-language="text">v1.1.3 19864453f7
Enter ".help" for usage hints.
Connected to a transient in-memory database.
Use ".open FILENAME" to reopen on a persistent database.
D</pre> <p>To open or create a <a href="../../connect/overview.html#persistent-database.html">persistent database</a>, simply include a path as a command line argument:</p> <pre class="language-bash highlighter-rouge" data-language="bash">duckdb my_database.duckdb</pre> <h3 id="running-sql-statements-in-the-cli"> <a style="text-decoration: none;" href="#running-sql-statements-in-the-cli">Running SQL Statements in the CLI</a> </h3> <p>Once the CLI has been opened, enter a SQL statement followed by a semicolon, then hit enter and it will be executed. Results will be displayed in a table in the terminal. If a semicolon is omitted, hitting enter will allow for multi-line SQL statements to be entered.</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT 'quack' AS my_column;</pre> <table> <thead> <tr> <th>my_column</th> </tr> </thead> <tbody> <tr> <td>quack</td> </tr> </tbody> </table> <p>The CLI supports all of DuckDB's rich <a href="../../sql/introduction.html">SQL syntax</a> including <code class="language-plaintext highlighter-rouge">SELECT</code>, <code class="language-plaintext highlighter-rouge">CREATE</code>, and <code class="language-plaintext highlighter-rouge">ALTER</code> statements.</p> <h3 id="editor-features"> <a style="text-decoration: none;" href="#editor-features">Editor Features</a> </h3> <p>The CLI supports <a href="autocomplete.html">autocompletion</a>, and has sophisticated <a href="editing.html">editor features</a> and <a href="syntax_highlighting.html">syntax highlighting</a> on certain platforms.</p> <h3 id="exiting-the-cli"> <a style="text-decoration: none;" href="#exiting-the-cli">Exiting the CLI</a> </h3> <p>To exit the CLI, press <code class="language-plaintext highlighter-rouge">Ctrl</code>+<code class="language-plaintext highlighter-rouge">D</code> if your platform supports it. Otherwise, press <code class="language-plaintext highlighter-rouge">Ctrl</code>+<code class="language-plaintext highlighter-rouge">C</code> or use the <code class="language-plaintext highlighter-rouge">.exit</code> command. If used a persistent database, DuckDB will automatically checkpoint (save the latest edits to disk) and close. This will remove the <code class="language-plaintext highlighter-rouge">.wal</code> file (the <a href="https://en.wikipedia.org/wiki/Write-ahead_logging">write-ahead log</a>) and consolidate all of your data into the single-file database.</p> <h3 id="dot-commands"> <a style="text-decoration: none;" href="#dot-commands">Dot Commands</a> </h3> <p>In addition to SQL syntax, special <a href="dot_commands.html">dot commands</a> may be entered into the CLI client. To use one of these commands, begin the line with a period (<code class="language-plaintext highlighter-rouge">.</code>) immediately followed by the name of the command you wish to execute. Additional arguments to the command are entered, space separated, after the command. If an argument must contain a space, either single or double quotes may be used to wrap that parameter. Dot commands must be entered on a single line, and no whitespace may occur before the period. No semicolon is required at the end of the line.</p> <p>Frequently-used configurations can be stored in the file <code class="language-plaintext highlighter-rouge">~/.duckdbrc</code>, which will be loaded when starting the CLI client. See the <a href="#configuring-the-cli">Configuring the CLI</a> section below for further information on these options.</p> <p>Below, we summarize a few important dot commands. To see all available commands, see the <a href="dot_commands.html">dot commands page</a> or use the <code class="language-plaintext highlighter-rouge">.help</code> command.</p> <h4 id="opening-database-files"> <a style="text-decoration: none;" href="#opening-database-files">Opening Database Files</a> </h4> <p>In addition to connecting to a database when opening the CLI, a new database connection can be made by using the <code class="language-plaintext highlighter-rouge">.open</code> command. If no additional parameters are supplied, a new in-memory database connection is created. This database will not be persisted when the CLI connection is closed.</p> <pre class="language-text highlighter-rouge" data-language="text">.open</pre> <p>The <code class="language-plaintext highlighter-rouge">.open</code> command optionally accepts several options, but the final parameter can be used to indicate a path to a persistent database (or where one should be created). The special string <code class="language-plaintext highlighter-rouge">:memory:</code> can also be used to open a temporary in-memory database.</p> <pre class="language-text highlighter-rouge" data-language="text">.open persistent.duckdb</pre> <blockquote> <p>Warning <code class="language-plaintext highlighter-rouge">.open</code> closes the current database. To keep the current database, while adding a new database, use the <a href="../../sql/statements/attach.html"><code class="language-plaintext highlighter-rouge">ATTACH</code> statement</a>.</p> </blockquote> <p>One important option accepted by <code class="language-plaintext highlighter-rouge">.open</code> is the <code class="language-plaintext highlighter-rouge">--readonly</code> flag. This disallows any editing of the database. To open in read only mode, the database must already exist. This also means that a new in-memory database can't be opened in read only mode since in-memory databases are created upon connection.</p> <pre class="language-text highlighter-rouge" data-language="text">.open --readonly preexisting.duckdb</pre> <h4 id="output-formats"> <a style="text-decoration: none;" href="#output-formats">Output Formats</a> </h4> <p>The <code class="language-plaintext highlighter-rouge">.mode</code> <a href="dot_commands.html#mode.html">dot command</a> may be used to change the appearance of the tables returned in the terminal output. These include the default <code class="language-plaintext highlighter-rouge">duckbox</code> mode, <code class="language-plaintext highlighter-rouge">csv</code> and <code class="language-plaintext highlighter-rouge">json</code> mode for ingestion by other tools, <code class="language-plaintext highlighter-rouge">markdown</code> and <code class="language-plaintext highlighter-rouge">latex</code> for documents, and <code class="language-plaintext highlighter-rouge">insert</code> mode for generating SQL statements.</p> <h4 id="writing-results-to-a-file"> <a style="text-decoration: none;" href="#writing-results-to-a-file">Writing Results to a File</a> </h4> <p>By default, the DuckDB CLI sends results to the terminal's standard output. However, this can be modified using either the <code class="language-plaintext highlighter-rouge">.output</code> or <code class="language-plaintext highlighter-rouge">.once</code> commands. For details, see the documentation for the <a href="dot_commands.html#output-writing-results-to-a-file.html">output dot command</a>.</p> <h4 id="reading-sql-from-a-file"> <a style="text-decoration: none;" href="#reading-sql-from-a-file">Reading SQL from a File</a> </h4> <p>The DuckDB CLI can read both SQL commands and dot commands from an external file instead of the terminal using the <code class="language-plaintext highlighter-rouge">.read</code> command. This allows for a number of commands to be run in sequence and allows command sequences to be saved and reused.</p> <p>The <code class="language-plaintext highlighter-rouge">.read</code> command requires only one argument: the path to the file containing the SQL and/or commands to execute. After running the commands in the file, control will revert back to the terminal. Output from the execution of that file is governed by the same <code class="language-plaintext highlighter-rouge">.output</code> and <code class="language-plaintext highlighter-rouge">.once</code> commands that have been discussed previously. This allows the output to be displayed back to the terminal, as in the first example below, or out to another file, as in the second example.</p> <p>In this example, the file <code class="language-plaintext highlighter-rouge">select_example.sql</code> is located in the same directory as duckdb.exe and contains the following SQL statement:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT *
FROM generate_series(5);</pre> <p>To execute it from the CLI, the <code class="language-plaintext highlighter-rouge">.read</code> command is used.</p> <pre class="language-text highlighter-rouge" data-language="text">.read select_example.sql</pre> <p>The output below is returned to the terminal by default. The formatting of the table can be adjusted using the <code class="language-plaintext highlighter-rouge">.output</code> or <code class="language-plaintext highlighter-rouge">.once</code> commands.</p> <pre class="language-text highlighter-rouge" data-language="text">| generate_series |
|----------------:|
| 0               |
| 1               |
| 2               |
| 3               |
| 4               |
| 5               |</pre> <p>Multiple commands, including both SQL and dot commands, can also be run in a single <code class="language-plaintext highlighter-rouge">.read</code> command. In this example, the file <code class="language-plaintext highlighter-rouge">write_markdown_to_file.sql</code> is located in the same directory as duckdb.exe and contains the following commands:</p> <pre class="language-sql highlighter-rouge" data-language="sql">.mode markdown
.output series.md
SELECT *
FROM generate_series(5);</pre> <p>To execute it from the CLI, the <code class="language-plaintext highlighter-rouge">.read</code> command is used as before.</p> <pre class="language-text highlighter-rouge" data-language="text">.read write_markdown_to_file.sql</pre> <p>In this case, no output is returned to the terminal. Instead, the file <code class="language-plaintext highlighter-rouge">series.md</code> is created (or replaced if it already existed) with the markdown-formatted results shown here:</p> <pre class="language-text highlighter-rouge" data-language="text">| generate_series |
|----------------:|
| 0               |
| 1               |
| 2               |
| 3               |
| 4               |
| 5               |</pre>  <h2 id="configuring-the-cli"> <a style="text-decoration: none;" href="#configuring-the-cli">Configuring the CLI</a> </h2> <p>Several dot commands can be used to configure the CLI. On startup, the CLI reads and executes all commands in the file <code class="language-plaintext highlighter-rouge">~/.duckdbrc</code>, including dot commands and SQL statements. This allows you to store the configuration state of the CLI. You may also point to a different initialization file using the <code class="language-plaintext highlighter-rouge">-init</code>.</p> <h3 id="setting-a-custom-prompt"> <a style="text-decoration: none;" href="#setting-a-custom-prompt">Setting a Custom Prompt</a> </h3> <p>As an example, a file in the same directory as the DuckDB CLI named <code class="language-plaintext highlighter-rouge">prompt.sql</code> will change the DuckDB prompt to be a duck head and run a SQL statement. Note that the duck head is built with Unicode characters and does not work in all terminal environments (e.g., in Windows, unless running with WSL and using the Windows Terminal).</p> <pre class="language-text highlighter-rouge" data-language="text">.prompt '⚫◗ '</pre> <p>To invoke that file on initialization, use this command:</p> <pre class="language-bash highlighter-rouge" data-language="bash">duckdb -init prompt.sql</pre> <p>This outputs:</p> <pre class="language-text highlighter-rouge" data-language="text">-- Loading resources from prompt.sql
v⟨version⟩ ⟨git hash⟩
Enter ".help" for usage hints.
Connected to a transient in-memory database.
Use ".open FILENAME" to reopen on a persistent database.
⚫◗</pre> <h2 id="non-interactive-usage"> <a style="text-decoration: none;" href="#non-interactive-usage">Non-Interactive Usage</a> </h2> <p>To read/process a file and exit immediately, pipe the file contents in to <code class="language-plaintext highlighter-rouge">duckdb</code>:</p> <pre class="language-bash highlighter-rouge" data-language="bash">duckdb &lt; select_example.sql</pre> <p>To execute a command with SQL text passed in directly from the command line, call <code class="language-plaintext highlighter-rouge">duckdb</code> with two arguments: the database location (or <code class="language-plaintext highlighter-rouge">:memory:</code>), and a string with the SQL statement to execute.</p> <pre class="language-bash highlighter-rouge" data-language="bash">duckdb :memory: "SELECT 42 AS the_answer"</pre> <h2 id="loading-extensions"> <a style="text-decoration: none;" href="#loading-extensions">Loading Extensions</a> </h2> <p>To load extensions, use DuckDB's SQL <code class="language-plaintext highlighter-rouge">INSTALL</code> and <code class="language-plaintext highlighter-rouge">LOAD</code> commands as you would other SQL statements.</p> <pre class="language-sql highlighter-rouge" data-language="sql">INSTALL fts;
LOAD fts;</pre> <p>For details, see the <a href="../../extensions/overview.html">Extension docs</a>.</p> <h2 id="reading-from-stdin-and-writing-to-stdout"> <a style="text-decoration: none;" href="#reading-from-stdin-and-writing-to-stdout">Reading from stdin and Writing to stdout</a> </h2> <p>When in a Unix environment, it can be useful to pipe data between multiple commands. DuckDB is able to read data from stdin as well as write to stdout using the file location of stdin (<code class="language-plaintext highlighter-rouge">/dev/stdin</code>) and stdout (<code class="language-plaintext highlighter-rouge">/dev/stdout</code>) within SQL commands, as pipes act very similarly to file handles.</p> <p>This command will create an example CSV:</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY (SELECT 42 AS woot UNION ALL SELECT 43 AS woot) TO 'test.csv' (HEADER);</pre> <p>First, read a file and pipe it to the <code class="language-plaintext highlighter-rouge">duckdb</code> CLI executable. As arguments to the DuckDB CLI, pass in the location of the database to open, in this case, an in-memory database, and a SQL command that utilizes <code class="language-plaintext highlighter-rouge">/dev/stdin</code> as a file location.</p> <pre class="language-bash highlighter-rouge" data-language="bash">cat test.csv | duckdb -c "SELECT * FROM read_csv('/dev/stdin')"</pre> <table> <thead> <tr> <th style="text-align: right">woot</th> </tr> </thead> <tbody> <tr> <td style="text-align: right">42</td> </tr> <tr> <td style="text-align: right">43</td> </tr> </tbody> </table> <p>To write back to stdout, the copy command can be used with the <code class="language-plaintext highlighter-rouge">/dev/stdout</code> file location.</p> <pre class="language-bash highlighter-rouge" data-language="bash">cat test.csv | \
    duckdb -c "COPY (SELECT * FROM read_csv('/dev/stdin')) TO '/dev/stdout' WITH (FORMAT 'csv', HEADER)"</pre> <pre><code class="language-csv">woot
42
43
</code></pre> <h2 id="reading-environment-variables"> <a style="text-decoration: none;" href="#reading-environment-variables">Reading Environment Variables</a> </h2> <p>The <code class="language-plaintext highlighter-rouge">getenv</code> function can read environment variables.</p> <h3 id="examples"> <a style="text-decoration: none;" href="#examples">Examples</a> </h3> <p>To retrieve the home directory's path from the <code class="language-plaintext highlighter-rouge">HOME</code> environment variable, use:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT getenv('HOME') AS home;</pre> <table> <thead> <tr> <th>home</th> </tr> </thead> <tbody> <tr> <td>/Users/user_name</td> </tr> </tbody> </table> <p>The output of the <code class="language-plaintext highlighter-rouge">getenv</code> function can be used to set <a href="../../configuration/overview.html">configuration options</a>. For example, to set the <code class="language-plaintext highlighter-rouge">NULL</code> order based on the environment variable <code class="language-plaintext highlighter-rouge">DEFAULT_NULL_ORDER</code>, use:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SET default_null_order = getenv('DEFAULT_NULL_ORDER');</pre> <h3 id="restrictions-for-reading-environment-variables"> <a style="text-decoration: none;" href="#restrictions-for-reading-environment-variables">Restrictions for Reading Environment Variables</a> </h3> <p>The <code class="language-plaintext highlighter-rouge">getenv</code> function can only be run when the <a href="../../configuration/overview.html#configuration-reference.html"><code class="language-plaintext highlighter-rouge">enable_external_access</code></a> is set to <code class="language-plaintext highlighter-rouge">true</code> (the default setting). It is only available in the CLI client and is not supported in other DuckDB clients.</p> <h2 id="prepared-statements"> <a style="text-decoration: none;" href="#prepared-statements">Prepared Statements</a> </h2> <p>The DuckDB CLI supports executing <a href="../../sql/query_syntax/prepared_statements.html">prepared statements</a> in addition to regular <code class="language-plaintext highlighter-rouge">SELECT</code> statements. To create and execute a prepared statement in the CLI client, use the <code class="language-plaintext highlighter-rouge">PREPARE</code> clause and the <code class="language-plaintext highlighter-rouge">EXECUTE</code> statement.</p> <div> <h2 id="pages-in-this-section">Pages in This Section</h2> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Copyright 2018&ndash;2024 Stichting DuckDB Foundation<br>Licensed under the MIT License.<br>
    <a href="https://duckdb.org/docs/api/cli/overview.html" class="_attribution-link">https://duckdb.org/docs/api/cli/overview.html</a>
  </p>
</div>
