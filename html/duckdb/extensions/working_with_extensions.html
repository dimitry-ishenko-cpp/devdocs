<h1 class="title">Working with Extensions</h1>  <h2 id="platforms"> <a style="text-decoration: none;" href="#platforms">Platforms</a> </h2> <p>Extension binaries must be built for each platform. Pre-built binaries are distributed for several platforms (see below). For platforms where packages for certain extensions are not available, users can build them from source and <a href="#installing-an-extension-from-an-explicit-path">install the resulting binaries manually</a>.</p> <p>All official extensions are distributed for the following platforms.</p>  <table> <thead> <tr> <th>Platform name</th> <th>Operating system</th> <th>Architecture</th> <th>CPU types</th> <th>Used by</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">linux_amd64</code></td> <td>Linux</td> <td>x86_64 (AMD64)</td> <td> </td> <td>Node.js packages, etc.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">linux_amd64_gcc4</code></td> <td>Linux</td> <td>x86_64 (AMD64)</td> <td> </td> <td>Python packages, CLI, etc.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">linux_arm64</code></td> <td>Linux</td> <td>AArch64 (ARM64)</td> <td>AWS Graviton, Snapdragon, etc.</td> <td>all packages</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">osx_amd64</code></td> <td>macOS</td> <td>x86_64 (AMD64)</td> <td>Intel</td> <td>all packages</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">osx_arm64</code></td> <td>macOS</td> <td>AArch64 (ARM64)</td> <td>Apple Silicon M1, M2, etc.</td> <td>all packages</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">windows_amd64</code></td> <td>Windows</td> <td>x86_64 (AMD64)</td> <td>Intel, AMD, etc.</td> <td>all packages</td> </tr> </tbody> </table> <blockquote> <p>For some Linux ARM distributions (e.g., Python), two different binaries are distributed. These target either the <code class="language-plaintext highlighter-rouge">linux_arm64</code> or <code class="language-plaintext highlighter-rouge">linux_arm64_gcc4</code> platforms. Note that extension binaries are distributed for the first, but not the second. Effectively that means that on these platforms your glibc version needs to be 2.28 or higher to use the distributed extension binaries.</p> </blockquote> <p>Some extensions are distributed for the following platforms:</p> <ul> <li><code class="language-plaintext highlighter-rouge">windows_amd64_mingw</code></li> <li>
<code class="language-plaintext highlighter-rouge">wasm_eh</code> and <code class="language-plaintext highlighter-rouge">wasm_mvp</code> (see <a href="../api/wasm/extensions.html">DuckDB-Wasm's extensions</a>)</li> </ul> <p>For platforms outside the ones listed above, we do not officially distribute extensions (e.g., <code class="language-plaintext highlighter-rouge">linux_arm64_android</code>, <code class="language-plaintext highlighter-rouge">linux_arm64_gcc4</code>).</p> <h3 id="sharing-extensions-between-clients"> <a style="text-decoration: none;" href="#sharing-extensions-between-clients">Sharing Extensions between Clients</a> </h3> <p>The shared installation location allows extensions to be shared between the client APIs <em>of the same DuckDB version</em>, as long as they share the same <code class="language-plaintext highlighter-rouge">platform</code> or ABI. For example, if an extension is installed with version 0.10.0 of the CLI client on macOS, it is available from the Python, R, etc. client libraries provided that they have access to the user's home directory and use DuckDB version 0.10.0.</p> <h2 id="extension-repositories"> <a style="text-decoration: none;" href="#extension-repositories">Extension Repositories</a> </h2> <p>By default, DuckDB extensions are installed from a single repository containing extensions built and signed by the core DuckDB team. This ensures the stability and security of the core set of extensions. These extensions live in the default <code class="language-plaintext highlighter-rouge">core</code> repository which points to <code class="language-plaintext highlighter-rouge">http://extensions.duckdb.org</code>.</p> <p>Besides the core repository, DuckDB also supports installing extensions from other repositories. For example, the <code class="language-plaintext highlighter-rouge">core_nightly</code> repository contains nightly builds for core extensions that are built for the latest stable release of DuckDB. This allows users to try out new features in extensions before they are officially published.</p> <h3 id="installing-extensions-from-a-repository"> <a style="text-decoration: none;" href="#installing-extensions-from-a-repository">Installing Extensions from a Repository</a> </h3> <p>To install extensions from the default repository (default repository: <code class="language-plaintext highlighter-rouge">core</code>):</p> <pre class="language-sql highlighter-rouge" data-language="sql">INSTALL httpfs;</pre> <p>To explicitly install an extension from the core repository, run either of:</p> <pre class="language-sql highlighter-rouge" data-language="sql">INSTALL httpfs FROM core;</pre> <p>Or:</p> <pre class="language-sql highlighter-rouge" data-language="sql">INSTALL httpfs FROM 'http://extensions.duckdb.org';</pre> <p>To install an extension from the core nightly repository:</p> <pre class="language-sql highlighter-rouge" data-language="sql">INSTALL spatial FROM core_nightly;</pre> <p>Or:</p> <pre class="language-sql highlighter-rouge" data-language="sql">INSTALL spatial FROM 'http://nightly-extensions.duckdb.org';</pre> <p>To install an extensions from a custom repository unknown to DuckDB:</p> <pre class="language-sql highlighter-rouge" data-language="sql">INSTALL ⟨custom_extension⟩ FROM 'https://my-custom-extension-repository';</pre> <p>Alternatively, the <code class="language-plaintext highlighter-rouge">custom_extension_repository</code> setting can be used to change the default repository used by DuckDB:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SET custom_extension_repository = 'http://nightly-extensions.duckdb.org';</pre> <p>While any URL or local path can be used as a repository, DuckDB currently contains the following predefined repositories:</p>  <table> <thead> <tr> <th style="text-align: left">Alias</th> <th style="text-align: left">URL</th> <th style="text-align: left">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">core</code></td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">http://extensions.duckdb.org</code></td> <td style="text-align: left">DuckDB core extensions</td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">core_nightly</code></td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">http://nightly-extensions.duckdb.org</code></td> <td style="text-align: left">Nightly builds for <code class="language-plaintext highlighter-rouge">core</code>
</td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">community</code></td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">http://community-extensions.duckdb.org</code></td> <td style="text-align: left">DuckDB community extensions</td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">local_build_debug</code></td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">./build/debug/repository</code></td> <td style="text-align: left">Repository created when building DuckDB from source in debug mode (for development)</td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">local_build_release</code></td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">./build/release/repository</code></td> <td style="text-align: left">Repository created when building DuckDB from source in release mode (for development)</td> </tr> </tbody> </table> <h3 id="working-with-multiple-repositories"> <a style="text-decoration: none;" href="#working-with-multiple-repositories">Working with Multiple Repositories</a> </h3> <p>When working with extensions from different repositories, especially mixing <code class="language-plaintext highlighter-rouge">core</code> and <code class="language-plaintext highlighter-rouge">core_nightly</code>, it is important to keep track of the origins and version of the different extensions. For this reason, DuckDB keeps track of this in the extension installation metadata. For example:</p> <pre class="language-sql highlighter-rouge" data-language="sql">INSTALL httpfs FROM core;
INSTALL aws FROM core_nightly;
SELECT extension_name, extension_version, installed_from, install_mode FROM duckdb_extensions();</pre> <p>This outputs:</p>  <table> <thead> <tr> <th style="text-align: left">extensions_name</th> <th style="text-align: left">extensions_version</th> <th style="text-align: left">installed_from</th> <th style="text-align: left">install_mode</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">httpfs</td> <td style="text-align: left">62d61a417f</td> <td style="text-align: left">core</td> <td style="text-align: left">REPOSITORY</td> </tr> <tr> <td style="text-align: left">aws</td> <td style="text-align: left">42c78d3</td> <td style="text-align: left">core_nightly</td> <td style="text-align: left">REPOSITORY</td> </tr> <tr> <td style="text-align: left">…</td> <td style="text-align: left">…</td> <td style="text-align: left">…</td> <td style="text-align: left">…</td> </tr> </tbody> </table> <h3 id="creating-a-custom-repository"> <a style="text-decoration: none;" href="#creating-a-custom-repository">Creating a Custom Repository</a> </h3> <p>A DuckDB repository is an HTTP, HTTPS, S3, or local file based directory that serves the extensions files in a specific structure. This structure is described in the <a href="#downloading-extensions-directly-from-s3">“Downloading Extensions Directly from S3” section</a>, and is the same for local paths and remote servers, for example:</p> <pre class="language-text highlighter-rouge" data-language="text">base_repository_path_or_url
└── v1.0.0
    └── osx_arm64
        ├── autocomplete.duckdb_extension
        ├── httpfs.duckdb_extension
        ├── icu.duckdb_extension
        ├── inet.duckdb_extension
        ├── json.duckdb_extension
        ├── parquet.duckdb_extension
        ├── tpcds.duckdb_extension
        ├── tpcds.duckdb_extension
        └── tpch.duckdb_extension</pre> <p>See the <a href="https://github.com/duckdb/extension-template/"><code class="language-plaintext highlighter-rouge">extension-template</code> repository</a> for all necessary code and scripts to set up a repository.</p> <p>When installing an extension from a custom repository, DuckDB will search for both a gzipped and non-gzipped version. For example:</p> <pre class="language-sql highlighter-rouge" data-language="sql">INSTALL icu FROM '⟨custom repository⟩';</pre> <p>The execution of this statement will first look <code class="language-plaintext highlighter-rouge">icu.duckdb_extension.gz</code>, then <code class="language-plaintext highlighter-rouge">icu.duckdb_extension</code> in the repository's directory structure.</p> <p>If the custom repository is served over HTTPS or S3, the <a href="httpfs/overview"><code class="language-plaintext highlighter-rouge">httpfs</code> extension</a> is required. DuckDB will attempt to <a href="overview.html#autoloading-extensions.html">autoload</a> the <code class="language-plaintext highlighter-rouge">httpfs</code> extension when an installation over HTTPS or S3 is attempted.</p> <h2 id="force-installing-to-upgrade-extensions"> <a style="text-decoration: none;" href="#force-installing-to-upgrade-extensions">Force Installing to Upgrade Extensions</a> </h2> <p>When DuckDB installs an extension, it is copied to a local directory to be cached and avoid future network traffic. Any subsequent calls to <code class="language-plaintext highlighter-rouge">INSTALL ⟨extension_name⟩</code> will use the local version instead of downloading the extension again. To force re-downloading the extension, run:</p> <pre class="language-sql highlighter-rouge" data-language="sql">FORCE INSTALL extension_name;</pre> <p>Force installing can also be used to overwrite an extension with an extension with the same name from another repository,</p> <p>For example, first, <code class="language-plaintext highlighter-rouge">spatial</code> is installed from the core repository:</p> <pre class="language-sql highlighter-rouge" data-language="sql">INSTALL spatial;</pre> <p>Then, to overwrite this installation with the <code class="language-plaintext highlighter-rouge">spatial</code> extension from the <code class="language-plaintext highlighter-rouge">core_nightly</code> repository:</p> <pre class="language-sql highlighter-rouge" data-language="sql">FORCE INSTALL spatial FROM core_nightly;</pre> <h2 id="alternative-approaches-to-loading-and-installing-extensions"> <a style="text-decoration: none;" href="#alternative-approaches-to-loading-and-installing-extensions">Alternative Approaches to Loading and Installing Extensions</a> </h2> <h3 id="downloading-extensions-directly-from-s3"> <a style="text-decoration: none;" href="#downloading-extensions-directly-from-s3">Downloading Extensions Directly from S3</a> </h3> <p>Downloading an extension directly can be helpful when building a <a href="https://aws.amazon.com/pm/lambda/">Lambda service</a> or container that uses DuckDB. DuckDB extensions are stored in public S3 buckets, but the directory structure of those buckets is not searchable. As a result, a direct URL to the file must be used. To download an extension file directly, use the following format:</p> <pre class="language-text highlighter-rouge" data-language="text">http://extensions.duckdb.org/v⟨duckdb_version⟩/⟨platform_name⟩/⟨extension_name⟩.duckdb_extension.gz</pre> <p>For example:</p> <pre class="language-text highlighter-rouge" data-language="text">http://extensions.duckdb.org/v1.1.3/windows_amd64/json.duckdb_extension.gz</pre> <h3 id="installing-an-extension-from-an-explicit-path"> <a style="text-decoration: none;" href="#installing-an-extension-from-an-explicit-path">Installing an Extension from an Explicit Path</a> </h3> <p><code class="language-plaintext highlighter-rouge">INSTALL</code> can be used with the path to a <code class="language-plaintext highlighter-rouge">.duckdb_extension</code> file:</p> <pre class="language-sql highlighter-rouge" data-language="sql">INSTALL 'path/to/httpfs.duckdb_extension';</pre> <p>Note that compressed <code class="language-plaintext highlighter-rouge">.duckdb_extension.gz</code> files need to be decompressed beforehand. It is also possible to specify remote paths.</p> <h3 id="loading-an-extension-from-an-explicit-path"> <a style="text-decoration: none;" href="#loading-an-extension-from-an-explicit-path">Loading an Extension from an Explicit Path</a> </h3> <p><code class="language-plaintext highlighter-rouge">LOAD</code> can be used with the path to a <code class="language-plaintext highlighter-rouge">.duckdb_extension</code>. For example, if the file was available at the (relative) path <code class="language-plaintext highlighter-rouge">path/to/httpfs.duckdb_extension</code>, you can load it as follows:</p> <pre class="language-sql highlighter-rouge" data-language="sql">LOAD 'path/to/httpfs.duckdb_extension';</pre> <p>This will skip any currently installed extensions and load the specified extension directly.</p> <p>Note that using remote paths for compressed files is currently not possible.</p> <h3 id="building-and-installing-extensions-from-source"> <a style="text-decoration: none;" href="#building-and-installing-extensions-from-source">Building and Installing Extensions from Source</a> </h3> <p>For building and installing extensions from source, see the <a href="../dev/building/build_instructions.html#building-and-installing-extensions-from-source.html">building guide</a>.</p> <h3 id="statically-linking-extensions"> <a style="text-decoration: none;" href="#statically-linking-extensions">Statically Linking Extensions</a> </h3> <p>To statically link extensions, follow the <a href="https://github.com/duckdb/duckdb/blob/main/extension/README.md#using-extension-config-files">developer documentation's “Using extension config files” section</a>.</p> <h2 id="in-tree-vs-out-of-tree"> <a style="text-decoration: none;" href="#in-tree-vs-out-of-tree">In-Tree vs. Out-of-Tree</a> </h2> <p>Originally, DuckDB extensions lived exclusively in the DuckDB main repository, <code class="language-plaintext highlighter-rouge">github.com/duckdb/duckdb</code>. These extensions are called in-tree. Later, the concept of out-of-tree extensions was added, where extensions where separated into their own repository, which we call out-of-tree.</p> <p>While from a user's perspective, there are generally no noticeable differences, there are some minor differences related to versioning:</p> <ul> <li>in-tree extensions use the version of DuckDB instead of having their own version</li> <li>in-tree extensions do not have dedicated release notes, their changes are reflected in the regular <a href="https://github.com/duckdb/duckdb/releases">DuckDB release notes</a>
</li> <li>core out-of tree extensions tend to live in a repository in <code class="language-plaintext highlighter-rouge">github.com/duckdb/duckdb_⟨ext_name⟩</code> but the name may vary. See the <a href="core_extensions.html">full list</a> of core extensions for details.</li> </ul> <h2 id="limitations"> <a style="text-decoration: none;" href="#limitations">Limitations</a> </h2> <p>DuckDB's extension mechanism has the following limitations:</p> <ul> <li>Once loaded, an extension cannot be reinstalled.</li> <li>Extensions cannot be unloaded.</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; Copyright 2018&ndash;2024 Stichting DuckDB Foundation<br>Licensed under the MIT License.<br>
    <a href="https://duckdb.org/docs/extensions/working_with_extensions.html" class="_attribution-link">https://duckdb.org/docs/extensions/working_with_extensions.html</a>
  </p>
</div>
