<h1 class="title">Spatial Extension</h1>  <p>The <code class="language-plaintext highlighter-rouge">spatial</code> extension provides support for geospatial data processing in DuckDB. For an overview of the extension, see our <a href="http://localhost:8000/2023/04/28/spatial.html">blog post</a>.</p> <h2 id="installing-and-loading"> <a style="text-decoration: none;" href="#installing-and-loading">Installing and Loading</a> </h2> <p>To install and load the <code class="language-plaintext highlighter-rouge">spatial</code> extension, run:</p> <pre class="language-sql highlighter-rouge" data-language="sql">INSTALL spatial;
LOAD spatial;</pre> <h2 id="the-geometry-type"> <a style="text-decoration: none;" href="#the-geometry-type">The <code class="language-plaintext highlighter-rouge">GEOMETRY</code> Type</a> </h2> <p>The core of the spatial extension is the <code class="language-plaintext highlighter-rouge">GEOMETRY</code> type. If you're unfamiliar with geospatial data and GIS tooling, this type probably works very different from what you'd expect.</p> <p>On the surface, the <code class="language-plaintext highlighter-rouge">GEOMETRY</code> type is a binary representation of “geometry” data made up out of sets of vertices (pairs of X and Y <code class="language-plaintext highlighter-rouge">double</code> precision floats). But what makes it somewhat special is that its actually used to store one of several different geometry subtypes. These are <code class="language-plaintext highlighter-rouge">POINT</code>, <code class="language-plaintext highlighter-rouge">LINESTRING</code>, <code class="language-plaintext highlighter-rouge">POLYGON</code>, as well as their “collection” equivalents, <code class="language-plaintext highlighter-rouge">MULTIPOINT</code>, <code class="language-plaintext highlighter-rouge">MULTILINESTRING</code> and <code class="language-plaintext highlighter-rouge">MULTIPOLYGON</code>. Lastly there is <code class="language-plaintext highlighter-rouge">GEOMETRYCOLLECTION</code>, which can contain any of the other subtypes, as well as other <code class="language-plaintext highlighter-rouge">GEOMETRYCOLLECTION</code>s recursively.</p> <p>This may seem strange at first, since DuckDB already have types like <code class="language-plaintext highlighter-rouge">LIST</code>, <code class="language-plaintext highlighter-rouge">STRUCT</code> and <code class="language-plaintext highlighter-rouge">UNION</code> which could be used in a similar way, but the design and behavior of the <code class="language-plaintext highlighter-rouge">GEOMETRY</code> type is actually based on the <a href="https://en.wikipedia.org/wiki/Simple_Features">Simple Features</a> geometry model, which is a standard used by many other databases and GIS software.</p> <p>The spatial extension also includes a couple of experimental non-standard explicit geometry types, such as <code class="language-plaintext highlighter-rouge">POINT_2D</code>, <code class="language-plaintext highlighter-rouge">LINESTRING_2D</code>, <code class="language-plaintext highlighter-rouge">POLYGON_2D</code> and <code class="language-plaintext highlighter-rouge">BOX_2D</code> that are based on DuckDBs native nested types, such as <code class="language-plaintext highlighter-rouge">STRUCT</code> and <code class="language-plaintext highlighter-rouge">LIST</code>. Since these have a fixed and predictable internal memory layout, it is theoretically possible to optimize a lot of geospatial algorithms to be much faster when operating on these types than on the <code class="language-plaintext highlighter-rouge">GEOMETRY</code> type. However, only a couple of functions in the spatial extension have been explicitly specialized for these types so far. All of these new types are implicitly castable to <code class="language-plaintext highlighter-rouge">GEOMETRY</code>, but with a small conversion cost, so the <code class="language-plaintext highlighter-rouge">GEOMETRY</code> type is still the recommended type to use for now if you are planning to work with a lot of different spatial functions.</p> <p><code class="language-plaintext highlighter-rouge">GEOMETRY</code> is not currently capable of storing additional geometry types such as curved geometries or triangle networks. Additionally, the <code class="language-plaintext highlighter-rouge">GEOMETRY</code> type does not store SRID information on a per value basis. These limitations may be addressed in the future.</p> <div> <h2 id="pages-in-this-section">Pages in This Section</h2> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Copyright 2018&ndash;2024 Stichting DuckDB Foundation<br>Licensed under the MIT License.<br>
    <a href="https://duckdb.org/docs/extensions/spatial/overview.html" class="_attribution-link">https://duckdb.org/docs/extensions/spatial/overview.html</a>
  </p>
</div>
