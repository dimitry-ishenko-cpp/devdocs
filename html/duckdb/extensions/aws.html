<h1 class="title">AWS Extension</h1>  <p>The <code class="language-plaintext highlighter-rouge">aws</code> extension adds functionality (e.g., authentication) on top of the <code class="language-plaintext highlighter-rouge">httpfs</code> extension's <a href="httpfs/overview#s3-api.html">S3 capabilities</a>, using the AWS SDK.</p> <blockquote> <p>Warning In most cases, you will not need to explicitly interact with the <code class="language-plaintext highlighter-rouge">aws</code> extension. It will automatically be invoked whenever you use DuckDB's <a href="../sql/statements/create_secret.html">S3 Secret functionality</a>. See the <a href="httpfs/overview#s3.html"><code class="language-plaintext highlighter-rouge">httpfs</code> extension's S3 capabilities</a> for instructions.</p> </blockquote> <h2 id="installing-and-loading"> <a style="text-decoration: none;" href="#installing-and-loading">Installing and Loading</a> </h2> <p>The <code class="language-plaintext highlighter-rouge">aws</code> extension will be transparently <a href="overview.html#autoloading-extensions.html">autoloaded</a> on first use from the official extension repository. If you would like to install and load it manually, run:</p> <pre class="language-sql highlighter-rouge" data-language="sql">INSTALL aws;
LOAD aws;</pre> <h2 id="related-extensions"> <a style="text-decoration: none;" href="#related-extensions">Related Extensions</a> </h2> <p><code class="language-plaintext highlighter-rouge">aws</code> depends on <code class="language-plaintext highlighter-rouge">httpfs</code> extension capabilities, and both will be autoloaded on the first call to <code class="language-plaintext highlighter-rouge">load_aws_credentials</code>. If autoinstall or autoload are disabled, you can always explicitly install and load <code class="language-plaintext highlighter-rouge">httpfs</code> as follows:</p> <pre class="language-sql highlighter-rouge" data-language="sql">INSTALL httpfs;
LOAD httpfs;</pre> <h2 id="legacy-features"> <a style="text-decoration: none;" href="#legacy-features">Legacy Features</a> </h2> <blockquote> <p>Deprecated The <code class="language-plaintext highlighter-rouge">load_aws_credentials</code> function is deprecated.</p> </blockquote> <p>Prior to version 0.10.0, DuckDB did not have a <a href="../sql/statements/create_secret.html">Secrets manager</a>, to load the credentials automatically, the AWS extension provided a special function to load the AWS credentials in the <a href="httpfs/s3api_legacy_authentication">legacy authentication method</a>.</p> <table> <thead> <tr> <th>Function</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">load_aws_credentials</code></td> <td>
<code class="language-plaintext highlighter-rouge">PRAGMA</code> function</td> <td>Loads the AWS credentials through the <a href="https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/credentials-chain.html">AWS Default Credentials Provider Chain</a>.</td> </tr> </tbody> </table> <h3 id="load-aws-credentials-legacy"> <a style="text-decoration: none;" href="#load-aws-credentials-legacy">Load AWS Credentials (Legacy)</a> </h3> <p>To load the AWS credentials, run:</p> <pre class="language-sql highlighter-rouge" data-language="sql">CALL load_aws_credentials();</pre>  <table> <thead> <tr> <th>loaded_access_key_id</th> <th>loaded_secret_access_key</th> <th>loaded_session_token</th> <th>loaded_region</th> </tr> </thead> <tbody> <tr> <td>AKIAIOSFODNN7EXAMPLE</td> <td><code class="language-plaintext highlighter-rouge">&lt;redacted&gt;</code></td> <td>NULL</td> <td>us-east-2</td> </tr> </tbody> </table> <p>The function takes a string parameter to specify a specific profile:</p> <pre class="language-sql highlighter-rouge" data-language="sql">CALL load_aws_credentials('minio-testing-2');</pre>  <table> <thead> <tr> <th>loaded_access_key_id</th> <th>loaded_secret_access_key</th> <th>loaded_session_token</th> <th>loaded_region</th> </tr> </thead> <tbody> <tr> <td>minio_duckdb_user_2</td> <td><code class="language-plaintext highlighter-rouge">&lt;redacted&gt;</code></td> <td>NULL</td> <td>NULL</td> </tr> </tbody> </table> <p>There are several parameters to tweak the behavior of the call:</p> <pre class="language-sql highlighter-rouge" data-language="sql">CALL load_aws_credentials('minio-testing-2', set_region = false, redact_secret = false);</pre>  <table> <thead> <tr> <th>loaded_access_key_id</th> <th>loaded_secret_access_key</th> <th>loaded_session_token</th> <th>loaded_region</th> </tr> </thead> <tbody> <tr> <td>minio_duckdb_user_2</td> <td>minio_duckdb_user_password_2</td> <td>NULL</td> <td>NULL</td> </tr> </tbody> </table><div class="_attribution">
  <p class="_attribution-p">
    &copy; Copyright 2018&ndash;2024 Stichting DuckDB Foundation<br>Licensed under the MIT License.<br>
    <a href="https://duckdb.org/docs/extensions/aws.html" class="_attribution-link">https://duckdb.org/docs/extensions/aws.html</a>
  </p>
</div>
