<h1 class="title">Jupyter Notebooks</h1>  <p>DuckDB's Python client can be used directly in Jupyter notebooks with no additional configuration if desired. However, additional libraries can be used to simplify SQL query development. This guide will describe how to utilize those additional libraries. See other guides in the Python section for how to use DuckDB and Python together.</p> <p>In this example, we use the <a href="https://github.com/ploomber/jupysql">JupySQL</a> package.</p> <p>This example workflow is also available as a <a href="https://colab.research.google.com/drive/1eOA2FYHqEfZWLYssbUxdIpSL3PFxWVjk?usp=sharing">Google Colab notebook</a>.</p> <h2 id="library-installation"> <a style="text-decoration: none;" href="#library-installation">Library Installation</a> </h2> <p>Four additional libraries improve the DuckDB experience in Jupyter notebooks.</p> <ol> <li>
<a href="https://github.com/ploomber/jupysql">jupysql</a>: Convert a Jupyter code cell into a SQL cell</li> <li>
<a href="https://github.com/pandas-dev/pandas">Pandas</a>: Clean table visualizations and compatibility with other analysis</li> <li>
<a href="https://github.com/matplotlib/matplotlib">matplotlib</a>: Plotting with Python</li> <li>
<a href="https://github.com/Mause/duckdb_engine">duckdb-engine (DuckDB SQLAlchemy driver)</a>: Used by SQLAlchemy to connect to DuckDB (optional)</li> </ol> <p>Run these <code class="language-plaintext highlighter-rouge">pip install</code> commands from the command line if Jupyter Notebook is not yet installed. Otherwise, see Google Colab link above for an in-notebook example:</p> <pre class="language-bash highlighter-rouge" data-language="bash">pip install duckdb</pre> <p>Install Jupyter Notebook</p> <pre class="language-bash highlighter-rouge" data-language="bash">pip install notebook</pre> <p>Or JupyterLab:</p> <pre class="language-bash highlighter-rouge" data-language="bash">pip install jupyterlab</pre> <p>Install supporting libraries:</p> <pre class="language-bash highlighter-rouge" data-language="bash">pip install jupysql pandas matplotlib duckdb-engine</pre> <h2 id="library-import-and-configuration"> <a style="text-decoration: none;" href="#library-import-and-configuration">Library Import and Configuration</a> </h2> <p>Open a Jupyter Notebook and import the relevant libraries.</p> <h3 id="connecting-to-duckdb-natively"> <a style="text-decoration: none;" href="#connecting-to-duckdb-natively">Connecting to DuckDB Natively</a> </h3> <p>To connect to DuckDB, run:</p> <pre class="language-python highlighter-rouge" data-language="python">import duckdb
import pandas as pd

%load_ext sql
conn = duckdb.connect()
%sql conn --alias duckdb</pre> <h3 id="connecting-to-duckdb-via-sqlalchemy-using-duckdb_engine"> <a style="text-decoration: none;" href="#connecting-to-duckdb-via-sqlalchemy-using-duckdb_engine">Connecting to DuckDB via SQLAlchemy Using <code class="language-plaintext highlighter-rouge">duckdb_engine</code></a> </h3> <p>Alternatively, you can connect to DuckDB via SQLAlchemy using <code class="language-plaintext highlighter-rouge">duckdb_engine</code>. See the <a href="https://jupysql.ploomber.io/en/latest/tutorials/duckdb-native-sqlalchemy.html">performance and feature differences</a>.</p> <pre class="language-python highlighter-rouge" data-language="python">import duckdb
import pandas as pd
# No need to import duckdb_engine
#  jupysql will auto-detect the driver needed based on the connection string!

# Import jupysql Jupyter extension to create SQL cells
%load_ext sql</pre> <p>Set configurations on jupysql to directly output data to Pandas and to simplify the output that is printed to the notebook.</p> <pre class="language-python highlighter-rouge" data-language="python">%config SqlMagic.autopandas = True
%config SqlMagic.feedback = False
%config SqlMagic.displaycon = False</pre> <p>Connect jupysql to DuckDB using a SQLAlchemy-style connection string. Either connect to a new <a href="../../api/python/dbapi.html#in-memory-connection.html">in-memory DuckDB</a>, the <a href="../../api/python/dbapi.html#default-connection.html">default connection</a> or a file backed database:</p> <pre class="language-sql highlighter-rouge" data-language="sql">%sql duckdb:///:memory:</pre> <pre class="language-sql highlighter-rouge" data-language="sql">%sql duckdb:///:default:</pre> <pre class="language-sql highlighter-rouge" data-language="sql">%sql duckdb:///path/to/file.db</pre> <blockquote> <p>The <code class="language-plaintext highlighter-rouge">%sql</code> command and <code class="language-plaintext highlighter-rouge">duckdb.sql</code> share the same <a href="../../api/python/dbapi.html">default connection</a> if you provide <code class="language-plaintext highlighter-rouge">duckdb:///:default:</code> as the SQLAlchemy connection string.</p> </blockquote> <h2 id="querying-duckdb"> <a style="text-decoration: none;" href="#querying-duckdb">Querying DuckDB</a> </h2> <p>Single line SQL queries can be run using <code class="language-plaintext highlighter-rouge">%sql</code> at the start of a line. Query results will be displayed as a Pandas DataFrame.</p> <pre class="language-sql highlighter-rouge" data-language="sql">%sql SELECT 'Off and flying!' AS a_duckdb_column;</pre> <p>An entire Jupyter cell can be used as a SQL cell by placing <code class="language-plaintext highlighter-rouge">%%sql</code> at the start of the cell. Query results will be displayed as a Pandas DataFrame.</p> <pre class="language-sql highlighter-rouge" data-language="sql">%%sql
SELECT
    schema_name,
    function_name
FROM duckdb_functions()
ORDER BY ALL DESC
LIMIT 5;</pre> <p>To store the query results in a Python variable, use <code class="language-plaintext highlighter-rouge">&lt;&lt;</code> as an assignment operator. This can be used with both the <code class="language-plaintext highlighter-rouge">%sql</code> and <code class="language-plaintext highlighter-rouge">%%sql</code> Jupyter magics.</p> <pre class="language-sql highlighter-rouge" data-language="sql">%sql res &lt;&lt; SELECT 'Off and flying!' AS a_duckdb_column;</pre> <p>If the <code class="language-plaintext highlighter-rouge">%config SqlMagic.autopandas = True</code> option is set, the variable is a Pandas dataframe, otherwise, it is a <code class="language-plaintext highlighter-rouge">ResultSet</code> that can be converted to Pandas with the <code class="language-plaintext highlighter-rouge">DataFrame()</code> function.</p> <h2 id="querying-pandas-dataframes"> <a style="text-decoration: none;" href="#querying-pandas-dataframes">Querying Pandas Dataframes</a> </h2> <p>DuckDB is able to find and query any dataframe stored as a variable in the Jupyter notebook.</p> <pre class="language-python highlighter-rouge" data-language="python">input_df = pd.DataFrame.from_dict({"i": [1, 2, 3],
                                   "j": ["one", "two", "three"]})</pre> <p>The dataframe being queried can be specified just like any other table in the <code class="language-plaintext highlighter-rouge">FROM</code> clause.</p> <pre class="language-sql highlighter-rouge" data-language="sql">%sql output_df &lt;&lt; SELECT sum(i) AS total_i FROM input_df;</pre> <h2 id="visualizing-duckdb-data"> <a style="text-decoration: none;" href="#visualizing-duckdb-data">Visualizing DuckDB Data</a> </h2> <p>The most common way to plot datasets in Python is to load them using Pandas and then use matplotlib or seaborn for plotting. This approach requires loading all data into memory which is highly inefficient. The plotting module in JupySQL runs computations in the SQL engine. This delegates memory management to the engine and ensures that intermediate computations do not keep eating up memory, efficiently plotting massive datasets.</p> <h3 id="install-and-load-duckdb-httpfs-extension"> <a style="text-decoration: none;" href="#install-and-load-duckdb-httpfs-extension">Install and Load DuckDB httpfs Extension</a> </h3> <p>DuckDB's <a href="../../extensions/httpfs/overview.html">httpfs extension</a> allows Parquet and CSV files to be queried remotely over http. These examples query a Parquet file that contains historical taxi data from NYC. Using the Parquet format allows DuckDB to only pull the rows and columns into memory that are needed rather than downloading the entire file. DuckDB can be used to process local <a href="../../data/parquet/overview.html">Parquet files</a> as well, which may be desirable if querying the entire Parquet file, or running multiple queries that require large subsets of the file.</p> <pre class="language-sql highlighter-rouge" data-language="sql">%%sql
INSTALL httpfs;
LOAD httpfs;</pre> <h3 id="boxplot--histogram"> <a style="text-decoration: none;" href="#boxplot--histogram">Boxplot &amp; Histogram</a> </h3> <p>To create a boxplot, call <code class="language-plaintext highlighter-rouge">%sqlplot boxplot</code>, passing the name of the table and the column to plot. In this case, the name of the table is the URL of the remotely stored Parquet file.</p> <pre class="language-python highlighter-rouge" data-language="python">%sqlplot boxplot --table https://d37ci6vzurychx.cloudfront.net/trip-data/yellow_tripdata_2021-01.parquet --column trip_distance</pre> <p><img src="data:image/png;base64,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" alt="Boxplot of the trip_distance column"></p> <p>Now, create a query that filters by the 90th percentile. Note the use of the <code class="language-plaintext highlighter-rouge">--save</code>, and <code class="language-plaintext highlighter-rouge">--no-execute</code> functions. This tells JupySQL to store the query, but skips execution. It will be referenced in the next plotting call.</p> <pre class="language-sql highlighter-rouge" data-language="sql">%%sql --save short_trips --no-execute
SELECT *
FROM 'https://d37ci6vzurychx.cloudfront.net/trip-data/yellow_tripdata_2021-01.parquet'
WHERE trip_distance &lt; 6.3</pre> <p>To create a histogram, call <code class="language-plaintext highlighter-rouge">%sqlplot histogram</code> and pass the name of the table, the column to plot, and the number of bins. This uses <code class="language-plaintext highlighter-rouge">--with short-trips</code> so JupySQL uses the query defined previously and therefore only plots a subset of the data.</p> <pre class="language-python highlighter-rouge" data-language="python">%sqlplot histogram --table short_trips --column trip_distance --bins 10 --with short_trips</pre> <p><img src="data:image/png;base64,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" alt="Histogram of the trip_distance column"></p> <h2 id="summary"> <a style="text-decoration: none;" href="#summary">Summary</a> </h2> <p>You now have the ability to alternate between SQL and Pandas in a simple and highly performant way! You can plot massive datasets directly through the engine (avoiding both the download of the entire file and loading all of it into Pandas in memory). Dataframes can be read as tables in SQL, and SQL results can be output into Dataframes. Happy analyzing!</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; Copyright 2018&ndash;2024 Stichting DuckDB Foundation<br>Licensed under the MIT License.<br>
    <a href="https://duckdb.org/docs/guides/python/jupyter.html" class="_attribution-link">https://duckdb.org/docs/guides/python/jupyter.html</a>
  </p>
</div>
