<h1 class="title">Using fsspec Filesystems</h1>  <p>DuckDB support for <a href="https://filesystem-spec.readthedocs.io"><code class="language-plaintext highlighter-rouge">fsspec</code></a> filesystems allows querying data in filesystems that DuckDB's <a href="../../extensions/httpfs/overview.html"><code class="language-plaintext highlighter-rouge">httpfs</code> extension</a> does not support. <code class="language-plaintext highlighter-rouge">fsspec</code> has a large number of <a href="https://filesystem-spec.readthedocs.io/en/latest/api.html#built-in-implementations">inbuilt filesystems</a>, and there are also many <a href="https://filesystem-spec.readthedocs.io/en/latest/api.html#other-known-implementations">external implementations</a>. This capability is only available in DuckDB's Python client because <code class="language-plaintext highlighter-rouge">fsspec</code> is a Python library, while the <code class="language-plaintext highlighter-rouge">httpfs</code> extension is available in many DuckDB clients.</p> <h2 id="example"> <a style="text-decoration: none;" href="#example">Example</a> </h2> <p>The following is an example of using <code class="language-plaintext highlighter-rouge">fsspec</code> to query a file in Google Cloud Storage (instead of using their S3-compatible API).</p> <p>Firstly, you must install <code class="language-plaintext highlighter-rouge">duckdb</code> and <code class="language-plaintext highlighter-rouge">fsspec</code>, and a filesystem interface of your choice.</p> <pre class="language-bash highlighter-rouge" data-language="bash">pip install duckdb fsspec gcsfs</pre> <p>Then, you can register whichever filesystem you'd like to query:</p> <pre class="language-python highlighter-rouge" data-language="python">import duckdb
from fsspec import filesystem

# this line will throw an exception if the appropriate filesystem interface is not installed
duckdb.register_filesystem(filesystem('gcs'))

duckdb.sql("SELECT * FROM read_csv('gcs:///bucket/file.csv')")</pre> <blockquote> <p>These filesystems are not implemented in C++, hence, their performance may not be comparable to the ones provided by the <code class="language-plaintext highlighter-rouge">httpfs</code> extension. It is also worth noting that as they are third-party libraries, they may contain bugs that are beyond our control.</p> </blockquote><div class="_attribution">
  <p class="_attribution-p">
    &copy; Copyright 2018&ndash;2024 Stichting DuckDB Foundation<br>Licensed under the MIT License.<br>
    <a href="https://duckdb.org/docs/guides/python/filesystems.html" class="_attribution-link">https://duckdb.org/docs/guides/python/filesystems.html</a>
  </p>
</div>
