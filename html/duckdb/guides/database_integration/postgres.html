<h1 class="title">PostgreSQL Import</h1>  <p>To run a query directly on a running PostgreSQL database, the <a href="../../extensions/postgres.html"><code class="language-plaintext highlighter-rouge">postgres</code> extension</a> is required.</p> <h2 id="installation-and-loading"> <a style="text-decoration: none;" href="#installation-and-loading">Installation and Loading</a> </h2> <p>The extension can be installed using the <code class="language-plaintext highlighter-rouge">INSTALL</code> SQL command. This only needs to be run once.</p> <pre class="language-sql highlighter-rouge" data-language="sql">INSTALL postgres;</pre> <p>To load the <code class="language-plaintext highlighter-rouge">postgres</code> extension for usage, use the <code class="language-plaintext highlighter-rouge">LOAD</code> SQL command:</p> <pre class="language-sql highlighter-rouge" data-language="sql">LOAD postgres;</pre> <h2 id="usage"> <a style="text-decoration: none;" href="#usage">Usage</a> </h2> <p>After the <code class="language-plaintext highlighter-rouge">postgres</code> extension is installed, tables can be queried from PostgreSQL using the <code class="language-plaintext highlighter-rouge">postgres_scan</code> function:</p> <pre class="language-sql highlighter-rouge" data-language="sql">-- Scan the table "mytable" from the schema "public" in the database "mydb"
SELECT * FROM postgres_scan('host=localhost port=5432 dbname=mydb', 'public', 'mytable');</pre> <p>The first parameter to the <code class="language-plaintext highlighter-rouge">postgres_scan</code> function is the <a href="https://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-CONNSTRING">PostgreSQL connection string</a>, a list of connection arguments provided in <code class="language-plaintext highlighter-rouge">{key}={value}</code> format. Below is a list of valid arguments.</p>  <table> <thead> <tr> <th>Name</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">host</code></td> <td>Name of host to connect to</td> <td><code class="language-plaintext highlighter-rouge">localhost</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">hostaddr</code></td> <td>Host IP address</td> <td><code class="language-plaintext highlighter-rouge">localhost</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">port</code></td> <td>Port number</td> <td><code class="language-plaintext highlighter-rouge">5432</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">user</code></td> <td>PostgreSQL user name</td> <td>[OS user name]</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">password</code></td> <td>PostgreSQL password</td> <td> </td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">dbname</code></td> <td>Database name</td> <td>[user]</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">passfile</code></td> <td>Name of file passwords are stored in</td> <td><code class="language-plaintext highlighter-rouge">~/.pgpass</code></td> </tr> </tbody> </table> <p>Alternatively, the entire database can be attached using the <code class="language-plaintext highlighter-rouge">ATTACH</code> command. This allows you to query all tables stored within the PostgreSQL database as if it was a regular database.</p> <pre class="language-sql highlighter-rouge" data-language="sql">-- Attach the PostgreSQL database using the given connection string
ATTACH 'host=localhost port=5432 dbname=mydb' AS test (TYPE postgres);
-- The table "tbl_name" can now be queried as if it is a regular table
SELECT * FROM test.tbl_name;
-- Switch the active database to "test"
USE test;
-- List all tables in the file
SHOW TABLES;</pre> <p>For more information see the <a href="../../extensions/postgres.html">PostgreSQL extension documentation</a>.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; Copyright 2018&ndash;2024 Stichting DuckDB Foundation<br>Licensed under the MIT License.<br>
    <a href="https://duckdb.org/docs/guides/database_integration/postgres.html" class="_attribution-link">https://duckdb.org/docs/guides/database_integration/postgres.html</a>
  </p>
</div>
