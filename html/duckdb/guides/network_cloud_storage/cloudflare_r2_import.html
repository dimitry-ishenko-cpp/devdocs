<h1 class="title">Cloudflare R2 Import</h1>  <h2 id="prerequisites"> <a style="text-decoration: none;" href="#prerequisites">Prerequisites</a> </h2> <p>For Cloudflare R2, the <a href="https://developers.cloudflare.com/r2/api/s3/api/">S3 Compatibility API</a> allows you to use DuckDB's S3 support to read and write from R2 buckets.</p> <p>This requires the <a href="../../extensions/httpfs/overview.html"><code class="language-plaintext highlighter-rouge">httpfs</code> extension</a>, which can be installed using the <code class="language-plaintext highlighter-rouge">INSTALL</code> SQL command. This only needs to be run once.</p> <h2 id="credentials-and-configuration"> <a style="text-decoration: none;" href="#credentials-and-configuration">Credentials and Configuration</a> </h2> <p>You will need to <a href="https://developers.cloudflare.com/r2/api/s3/tokens/">generate an S3 auth token</a> and create an <code class="language-plaintext highlighter-rouge">R2</code> secret in DuckDB:</p> <pre class="language-sql highlighter-rouge" data-language="sql">CREATE SECRET (
    TYPE R2,
    KEY_ID 'AKIAIOSFODNN7EXAMPLE',
    SECRET 'wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY',
    ACCOUNT_ID 'your-account-id-here' -- your 33 character hexadecimal account ID
);</pre> <h2 id="querying"> <a style="text-decoration: none;" href="#querying">Querying</a> </h2> <p>After setting up the R2 credentials, you can query the R2 data using DuckDB's built-in methods, such as <code class="language-plaintext highlighter-rouge">read_csv</code> or <code class="language-plaintext highlighter-rouge">read_parquet</code>:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT * FROM read_parquet('r2://⟨r2_bucket_name⟩/⟨file⟩');</pre><div class="_attribution">
  <p class="_attribution-p">
    &copy; Copyright 2018&ndash;2024 Stichting DuckDB Foundation<br>Licensed under the MIT License.<br>
    <a href="https://duckdb.org/docs/guides/network_cloud_storage/cloudflare_r2_import.html" class="_attribution-link">https://duckdb.org/docs/guides/network_cloud_storage/cloudflare_r2_import.html</a>
  </p>
</div>
