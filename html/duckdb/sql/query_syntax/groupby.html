<h1 class="title">GROUP BY Clause</h1>  <p>The <code class="language-plaintext highlighter-rouge">GROUP BY</code> clause specifies which grouping columns should be used to perform any aggregations in the <code class="language-plaintext highlighter-rouge">SELECT</code> clause. If the <code class="language-plaintext highlighter-rouge">GROUP BY</code> clause is specified, the query is always an aggregate query, even if no aggregations are present in the <code class="language-plaintext highlighter-rouge">SELECT</code> clause.</p> <p>When a <code class="language-plaintext highlighter-rouge">GROUP BY</code> clause is specified, all tuples that have matching data in the grouping columns (i.e., all tuples that belong to the same group) will be combined. The values of the grouping columns themselves are unchanged, and any other columns can be combined using an <a href="../functions/aggregates.html">aggregate function</a> (such as <code class="language-plaintext highlighter-rouge">count</code>, <code class="language-plaintext highlighter-rouge">sum</code>, <code class="language-plaintext highlighter-rouge">avg</code>, etc).</p> <h2 id="group-by-all"> <a style="text-decoration: none;" href="#group-by-all"><code class="language-plaintext highlighter-rouge">GROUP BY ALL</code></a> </h2> <p>Use <code class="language-plaintext highlighter-rouge">GROUP BY ALL</code> to <code class="language-plaintext highlighter-rouge">GROUP BY</code> all columns in the <code class="language-plaintext highlighter-rouge">SELECT</code> statement that are not wrapped in aggregate functions. This simplifies the syntax by allowing the columns list to be maintained in a single location, and prevents bugs by keeping the <code class="language-plaintext highlighter-rouge">SELECT</code> granularity aligned to the <code class="language-plaintext highlighter-rouge">GROUP BY</code> granularity (e.g., it prevents duplication). See examples below and additional examples in the <a href="http://localhost:8000/2022/05/04/friendlier-sql.html#group-by-all">“Friendlier SQL with DuckDB” blog post</a>.</p> <h2 id="multiple-dimensions"> <a style="text-decoration: none;" href="#multiple-dimensions">Multiple Dimensions</a> </h2> <p>Normally, the <code class="language-plaintext highlighter-rouge">GROUP BY</code> clause groups along a single dimension. Using the <a href="grouping_sets.html"><code class="language-plaintext highlighter-rouge">GROUPING SETS</code>, <code class="language-plaintext highlighter-rouge">CUBE</code> or <code class="language-plaintext highlighter-rouge">ROLLUP</code> clauses</a> it is possible to group along multiple dimensions. See the <a href="grouping_sets.html"><code class="language-plaintext highlighter-rouge">GROUPING SETS</code></a> page for more information.</p> <h2 id="examples"> <a style="text-decoration: none;" href="#examples">Examples</a> </h2> <p>Count the number of entries in the <code class="language-plaintext highlighter-rouge">addresses</code> table that belong to each different city:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT city, count(*)
FROM addresses
GROUP BY city;</pre> <p>Compute the average income per city per street_name:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT city, street_name, avg(income)
FROM addresses
GROUP BY city, street_name;</pre> <h3 id="group-by-all-examples"> <a style="text-decoration: none;" href="#group-by-all-examples"><code class="language-plaintext highlighter-rouge">GROUP BY ALL</code> Examples</a> </h3> <p>Group by city and street_name to remove any duplicate values:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT city, street_name
FROM addresses
GROUP BY ALL;</pre> <p>Compute the average income per city per street_name. Since income is wrapped in an aggregate function, do not include it in the <code class="language-plaintext highlighter-rouge">GROUP BY</code>:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT city, street_name, avg(income)
FROM addresses
GROUP BY ALL;
-- GROUP BY city, street_name:</pre> <h2 id="syntax"> <a style="text-decoration: none;" href="#syntax">Syntax</a> </h2><div class="_attribution">
  <p class="_attribution-p">
    &copy; Copyright 2018&ndash;2024 Stichting DuckDB Foundation<br>Licensed under the MIT License.<br>
    <a href="https://duckdb.org/docs/sql/query_syntax/groupby.html" class="_attribution-link">https://duckdb.org/docs/sql/query_syntax/groupby.html</a>
  </p>
</div>
