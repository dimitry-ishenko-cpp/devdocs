<h1 class="title">Enum Data Type</h1>   <table> <thead> <tr> <th style="text-align: left">Name</th> <th style="text-align: left">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">enum</td> <td style="text-align: left">Dictionary Encoding representing all possible string values of a column.</td> </tr> </tbody> </table> <p>The enum type represents a dictionary data structure with all possible unique values of a column. For example, a column storing the days of the week can be an enum holding all possible days. Enums are particularly interesting for string columns with low cardinality (i.e., fewer distinct values). This is because the column only stores a numerical reference to the string in the enum dictionary, resulting in immense savings in disk storage and faster query performance.</p> <h2 id="enum-definition"> <a style="text-decoration: none;" href="#enum-definition">Enum Definition</a> </h2> <p>Enum types are created from either a hardcoded set of values or from a select statement that returns a single column of <code class="language-plaintext highlighter-rouge">VARCHAR</code>s. The set of values in the select statement will be deduplicated, but if the enum is created from a hardcoded set there may not be any duplicates.</p> <p>Create enum using hardcoded values:</p> <pre class="language-sql highlighter-rouge" data-language="sql">CREATE TYPE ⟨enum_name⟩ AS ENUM ([⟨value_1⟩, ⟨value_2⟩,...]);</pre> <p>Create enum using a <code class="language-plaintext highlighter-rouge">SELECT</code> statement that returns a single column of <code class="language-plaintext highlighter-rouge">VARCHAR</code>s:</p> <pre class="language-sql highlighter-rouge" data-language="sql">CREATE TYPE ⟨enum_name⟩ AS ENUM (select_expression⟩);</pre> <p>For example:</p> <p>Creates new user defined type 'mood' as an enum:</p> <pre class="language-sql highlighter-rouge" data-language="sql">CREATE TYPE mood AS ENUM ('sad', 'ok', 'happy');</pre> <p>This will fail since the <code class="language-plaintext highlighter-rouge">mood</code> type already exists:</p> <pre class="language-sql highlighter-rouge" data-language="sql">CREATE TYPE mood AS ENUM ('sad', 'ok', 'happy', 'anxious');</pre> <p>This will fail since enums cannot hold <code class="language-plaintext highlighter-rouge">NULL</code> values:</p> <pre class="language-sql highlighter-rouge" data-language="sql">CREATE TYPE breed AS ENUM ('maltese', NULL);</pre> <p>This will fail since enum values must be unique:</p> <pre class="language-sql highlighter-rouge" data-language="sql">CREATE TYPE breed AS ENUM ('maltese', 'maltese');</pre> <p>Create an enum from a select statement. First create an example table of values:</p> <pre class="language-sql highlighter-rouge" data-language="sql">CREATE TABLE my_inputs AS
    SELECT 'duck'  AS my_varchar UNION ALL
    SELECT 'duck'  AS my_varchar UNION ALL
    SELECT 'goose' AS my_varchar;</pre> <p>Create an enum using the unique string values in the <code class="language-plaintext highlighter-rouge">my_varchar</code> column:</p> <pre class="language-sql highlighter-rouge" data-language="sql">CREATE TYPE birds AS ENUM (SELECT my_varchar FROM my_inputs);</pre> <p>Show the available values in the <code class="language-plaintext highlighter-rouge">birds</code> enum using the <code class="language-plaintext highlighter-rouge">enum_range</code> function:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT enum_range(NULL::birds) AS my_enum_range;</pre>  <table> <thead> <tr> <th>my_enum_range</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">[duck, goose]</code></td> </tr> </tbody> </table> <h2 id="enum-usage"> <a style="text-decoration: none;" href="#enum-usage">Enum Usage</a> </h2> <p>After an enum has been created, it can be used anywhere a standard built-in type is used. For example, we can create a table with a column that references the enum.</p> <p>Creates a table <code class="language-plaintext highlighter-rouge">person</code>, with attributes <code class="language-plaintext highlighter-rouge">name</code> (string type) and <code class="language-plaintext highlighter-rouge">current_mood</code> (mood type):</p> <pre class="language-sql highlighter-rouge" data-language="sql">CREATE TABLE person (
    name TEXT,
    current_mood mood
);</pre> <p>Inserts tuples in the <code class="language-plaintext highlighter-rouge">person</code> table:</p> <pre class="language-sql highlighter-rouge" data-language="sql">INSERT INTO person
VALUES ('Pedro', 'happy'), ('Mark', NULL), ('Pagliacci', 'sad'), ('Mr. Mackey', 'ok');</pre> <p>The following query will fail since the mood type does not have <code class="language-plaintext highlighter-rouge">quackity-quack</code> value.</p> <pre class="language-sql highlighter-rouge" data-language="sql">INSERT INTO person
VALUES ('Hannes', 'quackity-quack');</pre> <p>The string <code class="language-plaintext highlighter-rouge">sad</code> is cast to the type <code class="language-plaintext highlighter-rouge">mood</code>, returning a numerical reference value. This makes the comparison a numerical comparison instead of a string comparison.</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT *
FROM person
WHERE current_mood = 'sad';</pre> <table> <thead> <tr> <th>name</th> <th>current_mood</th> </tr> </thead> <tbody> <tr> <td>Pagliacci</td> <td>sad</td> </tr> </tbody> </table> <p>If you are importing data from a file, you can create an enum for a <code class="language-plaintext highlighter-rouge">VARCHAR</code> column before importing. Given this, the following subquery selects automatically selects only distinct values:</p> <pre class="language-sql highlighter-rouge" data-language="sql">CREATE TYPE mood AS ENUM (SELECT mood FROM 'path/to/file.csv');</pre> <p>Then you can create a table with the enum type and import using any data import statement:</p> <pre class="language-sql highlighter-rouge" data-language="sql">CREATE TABLE person (name TEXT, current_mood mood);
COPY person FROM 'path/to/file.csv';</pre> <h2 id="enums-vs-strings"> <a style="text-decoration: none;" href="#enums-vs-strings">Enums vs. Strings</a> </h2> <p>DuckDB enums are automatically cast to <code class="language-plaintext highlighter-rouge">VARCHAR</code> types whenever necessary. This characteristic allows for enum columns to be used in any <code class="language-plaintext highlighter-rouge">VARCHAR</code> function. In addition, it also allows for comparisons between different enum columns, or an enum and a <code class="language-plaintext highlighter-rouge">VARCHAR</code> column.</p> <p>For example:</p> <p>Regexp_matches is a function that takes a VARCHAR, hence current_mood is cast to VARCHAR:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT regexp_matches(current_mood, '.*a.*') AS contains_a
FROM person;</pre> <table> <thead> <tr> <th style="text-align: left">contains_a</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">true</td> </tr> <tr> <td style="text-align: left">NULL</td> </tr> <tr> <td style="text-align: left">true</td> </tr> <tr> <td style="text-align: left">false</td> </tr> </tbody> </table> <p>Create a new mood and table:</p> <pre class="language-sql highlighter-rouge" data-language="sql">CREATE TYPE new_mood AS ENUM ('happy', 'anxious');
CREATE TABLE person_2 (
    name text,
    current_mood mood,
    future_mood new_mood,
    past_mood VARCHAR
);</pre> <p>Since the <code class="language-plaintext highlighter-rouge">current_mood</code> and <code class="language-plaintext highlighter-rouge">future_mood</code> columns are constructed on different enum types, DuckDB will cast both enums to strings and perform a string comparison:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT *
FROM person_2
WHERE current_mood = future_mood;</pre> <p>When comparing the <code class="language-plaintext highlighter-rouge">past_mood</code> column (string), DuckDB will cast the <code class="language-plaintext highlighter-rouge">current_mood</code> enum to <code class="language-plaintext highlighter-rouge">VARCHAR</code> and perform a string comparison:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT *
FROM person_2
WHERE current_mood = past_mood;</pre> <h2 id="enum-removal"> <a style="text-decoration: none;" href="#enum-removal">Enum Removal</a> </h2> <p>Enum types are stored in the catalog, and a catalog dependency is added to each table that uses them. It is possible to drop an enum from the catalog using the following command:</p> <pre class="language-sql highlighter-rouge" data-language="sql">DROP TYPE ⟨enum_name⟩;</pre> <p>Currently, it is possible to drop enums that are used in tables without affecting the tables.</p> <blockquote> <p>Warning This behavior of the enum removal feature is subject to change. In future releases, it is expected that any dependent columns must be removed before dropping the enum, or the enum must be dropped with the additional <code class="language-plaintext highlighter-rouge">CASCADE</code> parameter.</p> </blockquote> <h2 id="comparison-of-enums"> <a style="text-decoration: none;" href="#comparison-of-enums">Comparison of Enums</a> </h2> <p>Enum values are compared according to their order in the enum's definition. For example:</p> <pre class="language-sql highlighter-rouge" data-language="sql">CREATE TYPE mood AS ENUM ('sad', 'ok', 'happy');</pre> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT 'sad'::mood &lt; 'ok'::mood AS comp;</pre> <table> <thead> <tr> <th style="text-align: right">comp</th> </tr> </thead> <tbody> <tr> <td style="text-align: right">true</td> </tr> </tbody> </table> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT unnest(['ok'::mood, 'happy'::mood, 'sad'::mood]) AS m
ORDER BY m;</pre> <table> <thead> <tr> <th>m</th> </tr> </thead> <tbody> <tr> <td>sad</td> </tr> <tr> <td>ok</td> </tr> <tr> <td>happy</td> </tr> </tbody> </table> <h2 id="functions"> <a style="text-decoration: none;" href="#functions">Functions</a> </h2> <p>See <a href="../functions/enum.html">Enum Functions</a>.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; Copyright 2018&ndash;2024 Stichting DuckDB Foundation<br>Licensed under the MIT License.<br>
    <a href="https://duckdb.org/docs/sql/data_types/enum.html" class="_attribution-link">https://duckdb.org/docs/sql/data_types/enum.html</a>
  </p>
</div>
