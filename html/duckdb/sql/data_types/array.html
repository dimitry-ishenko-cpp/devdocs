<h1 class="title">Array Type</h1>  <p>An <code class="language-plaintext highlighter-rouge">ARRAY</code> column stores fixed-sized arrays. All fields in the column must have the same length and the same underlying type. Arrays are typically used to store arrays of numbers, but can contain any uniform data type, including <code class="language-plaintext highlighter-rouge">ARRAY</code>, <a href="list.html"><code class="language-plaintext highlighter-rouge">LIST</code></a> and <a href="struct.html"><code class="language-plaintext highlighter-rouge">STRUCT</code></a> types.</p> <p>Arrays can be used to store vectors such as <a href="https://en.wikipedia.org/wiki/Word_embedding">word embeddings</a> or image embeddings.</p> <p>To store variable-length lists, use the <a href="list.html"><code class="language-plaintext highlighter-rouge">LIST</code> type</a>. See the <a href="overview.html">data types overview</a> for a comparison between nested data types.</p> <blockquote> <p>The <code class="language-plaintext highlighter-rouge">ARRAY</code> type in PostgreSQL allows variable-length fields. DuckDB's <code class="language-plaintext highlighter-rouge">ARRAY</code> type is fixed-length.</p> </blockquote> <h2 id="creating-arrays"> <a style="text-decoration: none;" href="#creating-arrays">Creating Arrays</a> </h2> <p>Arrays can be created using the <a href="../functions/array.html#array_valueindex.html"><code class="language-plaintext highlighter-rouge">array_value(expr, ...)</code> function</a>.</p> <p>Construct with the <code class="language-plaintext highlighter-rouge">array_value</code> function:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT array_value(1, 2, 3);</pre> <p>You can always implicitly cast an array to a list (and use list functions, like <code class="language-plaintext highlighter-rouge">list_extract</code>, <code class="language-plaintext highlighter-rouge">[i]</code>):</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT array_value(1, 2, 3)[2];</pre> <p>You can cast from a list to an array (the dimensions have to match):</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT [3, 2, 1]::INTEGER[3];</pre> <p>Arrays can be nested:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT array_value(array_value(1, 2), array_value(3, 4), array_value(5, 6));</pre> <p>Arrays can store structs:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT array_value({'a': 1, 'b': 2}, {'a': 3, 'b': 4});</pre> <h2 id="defining-an-array-field"> <a style="text-decoration: none;" href="#defining-an-array-field">Defining an Array Field</a> </h2> <p>Arrays can be created using the <code class="language-plaintext highlighter-rouge">⟨TYPE_NAME⟩[⟨LENGTH⟩]</code> syntax. For example, to create an array field for 3 integers, run:</p> <pre class="language-sql highlighter-rouge" data-language="sql">CREATE TABLE array_table (id INTEGER, arr INTEGER[3]);
INSERT INTO array_table VALUES (10, [1, 2, 3]), (20, [4, 5, 6]);</pre> <h2 id="retrieving-values-from-arrays"> <a style="text-decoration: none;" href="#retrieving-values-from-arrays">Retrieving Values from Arrays</a> </h2> <p>Retrieving one or more values from an array can be accomplished using brackets and slicing notation, or through <a href="../functions/list.html#list-functions.html">list functions</a> like <code class="language-plaintext highlighter-rouge">list_extract</code> and <code class="language-plaintext highlighter-rouge">array_extract</code>. Using the example in <a href="#defining-an-array-field">Defining an Array Field</a>.</p> <p>The following queries for extracting the second element of an array are equivalent:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT id, arr[1] AS element FROM array_table;
SELECT id, list_extract(arr, 1) AS element FROM array_table;
SELECT id, array_extract(arr, 1) AS element FROM array_table;</pre> <table> <thead> <tr> <th style="text-align: right">id</th> <th style="text-align: right">element</th> </tr> </thead> <tbody> <tr> <td style="text-align: right">10</td> <td style="text-align: right">1</td> </tr> <tr> <td style="text-align: right">20</td> <td style="text-align: right">4</td> </tr> </tbody> </table> <p>Using the slicing notation returns a <code class="language-plaintext highlighter-rouge">LIST</code>:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT id, arr[1:2] AS elements FROM array_table;</pre> <table> <thead> <tr> <th style="text-align: right">id</th> <th>elements</th> </tr> </thead> <tbody> <tr> <td style="text-align: right">10</td> <td>[1, 2]</td> </tr> <tr> <td style="text-align: right">20</td> <td>[4, 5]</td> </tr> </tbody> </table> <h2 id="functions"> <a style="text-decoration: none;" href="#functions">Functions</a> </h2> <p>All <a href="../functions/list.html"><code class="language-plaintext highlighter-rouge">LIST</code> functions</a> work with the <code class="language-plaintext highlighter-rouge">ARRAY</code> type. Additionally, several <code class="language-plaintext highlighter-rouge">ARRAY</code>-native functions are also supported. See the <a href="../functions/array.html#array-native-functions.html"><code class="language-plaintext highlighter-rouge">ARRAY</code> functions</a>.</p> <h2 id="examples"> <a style="text-decoration: none;" href="#examples">Examples</a> </h2> <p>Create sample data:</p> <pre class="language-sql highlighter-rouge" data-language="sql">CREATE TABLE x (i INTEGER, v FLOAT[3]);
CREATE TABLE y (i INTEGER, v FLOAT[3]);
INSERT INTO x VALUES (1, array_value(1.0::FLOAT, 2.0::FLOAT, 3.0::FLOAT));
INSERT INTO y VALUES (1, array_value(2.0::FLOAT, 3.0::FLOAT, 4.0::FLOAT));</pre> <p>Compute cross product:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT array_cross_product(x.v, y.v)
FROM x, y
WHERE x.i = y.i;</pre> <p>Compute cosine similarity:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT array_cosine_similarity(x.v, y.v)
FROM x, y
WHERE x.i = y.i;</pre> <h2 id="ordering"> <a style="text-decoration: none;" href="#ordering">Ordering</a> </h2> <p>The ordering of <code class="language-plaintext highlighter-rouge">ARRAY</code> instances is defined using a lexicographical order. <code class="language-plaintext highlighter-rouge">NULL</code> values compare greater than all other values and are considered equal to each other.</p> <h2 id="see-also"> <a style="text-decoration: none;" href="#see-also">See Also</a> </h2> <p>For more functions, see <a href="../functions/list.html">List Functions</a>.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; Copyright 2018&ndash;2024 Stichting DuckDB Foundation<br>Licensed under the MIT License.<br>
    <a href="https://duckdb.org/docs/sql/data_types/array.html" class="_attribution-link">https://duckdb.org/docs/sql/data_types/array.html</a>
  </p>
</div>
