<h1 class="title">SELECT Statement</h1>  <p>The <code class="language-plaintext highlighter-rouge">SELECT</code> statement retrieves rows from the database.</p> <h3 id="examples"> <a style="text-decoration: none;" href="#examples">Examples</a> </h3> <p>Select all columns from the table <code class="language-plaintext highlighter-rouge">tbl</code>:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT * FROM tbl;</pre> <p>Select the rows from <code class="language-plaintext highlighter-rouge">tbl</code>:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT j FROM tbl WHERE i = 3;</pre> <p>Perform an aggregate grouped by the column <code class="language-plaintext highlighter-rouge">i</code>:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT i, sum(j) FROM tbl GROUP BY i;</pre> <p>Select only the top 3 rows from the <code class="language-plaintext highlighter-rouge">tbl</code>:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT * FROM tbl ORDER BY i DESC LIMIT 3;</pre> <p>Join two tables together using the <code class="language-plaintext highlighter-rouge">USING</code> clause:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT * FROM t1 JOIN t2 USING (a, b);</pre> <p>Use column indexes to select the first and third column from the table <code class="language-plaintext highlighter-rouge">tbl</code>:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT #1, #3 FROM tbl;</pre> <p>Select all unique cities from the addresses table:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT DISTINCT city FROM addresses;</pre> <p>Return a <code class="language-plaintext highlighter-rouge">STRUCT</code> by using a row variable:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT d
FROM (SELECT 1 AS a, 2 AS b) d;</pre> <h3 id="syntax"> <a style="text-decoration: none;" href="#syntax">Syntax</a> </h3> <p>The <code class="language-plaintext highlighter-rouge">SELECT</code> statement retrieves rows from the database. The canonical order of a <code class="language-plaintext highlighter-rouge">SELECT</code> statement is as follows, with less common clauses being indented:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT ⟨select_list⟩
FROM ⟨tables⟩
    USING SAMPLE ⟨sample_expression⟩
WHERE ⟨condition⟩
GROUP BY ⟨groups⟩
HAVING ⟨group_filter⟩
    WINDOW ⟨window_expression⟩
    QUALIFY ⟨qualify_filter⟩
ORDER BY ⟨order_expression⟩
LIMIT ⟨n⟩;</pre> <p>Optionally, the <code class="language-plaintext highlighter-rouge">SELECT</code> statement can be prefixed with a <a href="../query_syntax/with.html"><code class="language-plaintext highlighter-rouge">WITH</code> clause</a>.</p> <p>As the <code class="language-plaintext highlighter-rouge">SELECT</code> statement is so complex, we have split up the syntax diagrams into several parts. The full syntax diagram can be found at the bottom of the page.</p> <h2 id="select-clause"> <a style="text-decoration: none;" href="#select-clause"><code class="language-plaintext highlighter-rouge">SELECT</code> Clause</a> </h2>  <p>The <a href="../query_syntax/select.html"><code class="language-plaintext highlighter-rouge">SELECT</code> clause</a> specifies the list of columns that will be returned by the query. While it appears first in the clause, <em>logically</em> the expressions here are executed only at the end. The <code class="language-plaintext highlighter-rouge">SELECT</code> clause can contain arbitrary expressions that transform the output, as well as aggregates and window functions. The <code class="language-plaintext highlighter-rouge">DISTINCT</code> keyword ensures that only unique tuples are returned.</p> <blockquote> <p>Column names are case-insensitive. See the <a href="../dialect/keywords_and_identifiers.html#rules-for-case-sensitivity.html">Rules for Case Sensitivity</a> for more details.</p> </blockquote> <h2 id="from-clause"> <a style="text-decoration: none;" href="#from-clause"><code class="language-plaintext highlighter-rouge">FROM</code> Clause</a> </h2>  <p>The <a href="../query_syntax/from.html"><code class="language-plaintext highlighter-rouge">FROM</code> clause</a> specifies the <em>source</em> of the data on which the remainder of the query should operate. Logically, the <code class="language-plaintext highlighter-rouge">FROM</code> clause is where the query starts execution. The <code class="language-plaintext highlighter-rouge">FROM</code> clause can contain a single table, a combination of multiple tables that are joined together, or another <code class="language-plaintext highlighter-rouge">SELECT</code> query inside a subquery node.</p> <h2 id="sample-clause"> <a style="text-decoration: none;" href="#sample-clause"><code class="language-plaintext highlighter-rouge">SAMPLE</code> Clause</a> </h2>  <p><a href="../query_syntax/sample.html">The <code class="language-plaintext highlighter-rouge">SAMPLE</code> clause</a> allows you to run the query on a sample from the base table. This can significantly speed up processing of queries, at the expense of accuracy in the result. Samples can also be used to quickly see a snapshot of the data when exploring a data set. The <code class="language-plaintext highlighter-rouge">SAMPLE</code> clause is applied right after anything in the <code class="language-plaintext highlighter-rouge">FROM</code> clause (i.e., after any joins, but before the where clause or any aggregates). See the <a href="../samples.html">Samples</a> page for more information.</p> <h2 id="where-clause"> <a style="text-decoration: none;" href="#where-clause"><code class="language-plaintext highlighter-rouge">WHERE</code> Clause</a> </h2>  <p><a href="../query_syntax/where.html">The <code class="language-plaintext highlighter-rouge">WHERE</code> clause</a> specifies any filters to apply to the data. This allows you to select only a subset of the data in which you are interested. Logically the <code class="language-plaintext highlighter-rouge">WHERE</code> clause is applied immediately after the <code class="language-plaintext highlighter-rouge">FROM</code> clause.</p> <h2 id="group-by-and-having-clauses"> <a style="text-decoration: none;" href="#group-by-and-having-clauses"><code class="language-plaintext highlighter-rouge">GROUP BY</code> and <code class="language-plaintext highlighter-rouge">HAVING</code> Clauses</a> </h2>  <p><a href="../query_syntax/groupby.html">The <code class="language-plaintext highlighter-rouge">GROUP BY</code> clause</a> specifies which grouping columns should be used to perform any aggregations in the <code class="language-plaintext highlighter-rouge">SELECT</code> clause. If the <code class="language-plaintext highlighter-rouge">GROUP BY</code> clause is specified, the query is always an aggregate query, even if no aggregations are present in the <code class="language-plaintext highlighter-rouge">SELECT</code> clause.</p> <h2 id="window-clause"> <a style="text-decoration: none;" href="#window-clause"><code class="language-plaintext highlighter-rouge">WINDOW</code> Clause</a> </h2>  <p><a href="../query_syntax/window.html">The <code class="language-plaintext highlighter-rouge">WINDOW</code> clause</a> allows you to specify named windows that can be used within window functions. These are useful when you have multiple window functions, as they allow you to avoid repeating the same window clause.</p> <h2 id="qualify-clause"> <a style="text-decoration: none;" href="#qualify-clause"><code class="language-plaintext highlighter-rouge">QUALIFY</code> Clause</a> </h2>  <p><a href="../query_syntax/qualify.html">The <code class="language-plaintext highlighter-rouge">QUALIFY</code> clause</a> is used to filter the result of <a href="../functions/window_functions.html"><code class="language-plaintext highlighter-rouge">WINDOW</code> functions</a>.</p> <h2 id="order-by-limit-and-offset-clauses"> <a style="text-decoration: none;" href="#order-by-limit-and-offset-clauses"><code class="language-plaintext highlighter-rouge">ORDER BY</code>, <code class="language-plaintext highlighter-rouge">LIMIT</code> and <code class="language-plaintext highlighter-rouge">OFFSET</code> Clauses</a> </h2>  <p><a href="../query_syntax/orderby.html"><code class="language-plaintext highlighter-rouge">ORDER BY</code></a>, <a href="../query_syntax/limit.html"><code class="language-plaintext highlighter-rouge">LIMIT</code> and <code class="language-plaintext highlighter-rouge">OFFSET</code></a> are output modifiers. Logically they are applied at the very end of the query. The <code class="language-plaintext highlighter-rouge">ORDER BY</code> clause sorts the rows on the sorting criteria in either ascending or descending order. The <code class="language-plaintext highlighter-rouge">LIMIT</code> clause restricts the amount of rows fetched, while the <code class="language-plaintext highlighter-rouge">OFFSET</code> clause indicates at which position to start reading the values.</p> <h2 id="values-list"> <a style="text-decoration: none;" href="#values-list"><code class="language-plaintext highlighter-rouge">VALUES</code> List</a> </h2>  <p><a href="../query_syntax/values.html">A <code class="language-plaintext highlighter-rouge">VALUES</code> list</a> is a set of values that is supplied instead of a <code class="language-plaintext highlighter-rouge">SELECT</code> statement.</p> <h2 id="row-ids"> <a style="text-decoration: none;" href="#row-ids">Row IDs</a> </h2> <p>For each table, the <a href="https://docs.oracle.com/cd/B19306_01/server.102/b14200/pseudocolumns008.htm"><code class="language-plaintext highlighter-rouge">rowid</code> pseudocolumn</a> returns the row identifiers based on the physical storage.</p> <pre class="language-sql highlighter-rouge" data-language="sql">CREATE TABLE t (id INTEGER, content VARCHAR);
INSERT INTO t VALUES (42, 'hello'), (43, 'world');
SELECT rowid, id, content FROM t;</pre> <table> <thead> <tr> <th style="text-align: right">rowid</th> <th style="text-align: right">id</th> <th>content</th> </tr> </thead> <tbody> <tr> <td style="text-align: right">0</td> <td style="text-align: right">42</td> <td>hello</td> </tr> <tr> <td style="text-align: right">1</td> <td style="text-align: right">43</td> <td>world</td> </tr> </tbody> </table> <p>In the current storage, these identifiers are contiguous unsigned integers (0, 1, …) if no rows were deleted. Deletions introduce gaps in the rowids which may be reclaimed later. Therefore, it is strongly recommended <em>not to use rowids as identifiers</em>.</p> <blockquote> <p>Tip The <code class="language-plaintext highlighter-rouge">rowid</code> values are stable within a transaction.</p> </blockquote> <blockquote> <p>If there is a user-defined column named <code class="language-plaintext highlighter-rouge">rowid</code>, it shadows the <code class="language-plaintext highlighter-rouge">rowid</code> pseudocolumn.</p> </blockquote> <h2 id="common-table-expressions"> <a style="text-decoration: none;" href="#common-table-expressions">Common Table Expressions</a> </h2>  <h2 id="full-syntax-diagram"> <a style="text-decoration: none;" href="#full-syntax-diagram">Full Syntax Diagram</a> </h2> <p>Below is the full syntax diagram of the <code class="language-plaintext highlighter-rouge">SELECT</code> statement:</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; Copyright 2018&ndash;2024 Stichting DuckDB Foundation<br>Licensed under the MIT License.<br>
    <a href="https://duckdb.org/docs/sql/statements/select.html" class="_attribution-link">https://duckdb.org/docs/sql/statements/select.html</a>
  </p>
</div>
