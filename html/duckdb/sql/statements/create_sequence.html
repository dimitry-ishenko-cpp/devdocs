<h1 class="title">CREATE SEQUENCE Statement</h1>  <p>The <code class="language-plaintext highlighter-rouge">CREATE SEQUENCE</code> statement creates a new sequence number generator.</p> <h3 id="examples"> <a style="text-decoration: none;" href="#examples">Examples</a> </h3> <p>Generate an ascending sequence starting from 1:</p> <pre class="language-sql highlighter-rouge" data-language="sql">CREATE SEQUENCE serial;</pre> <p>Generate sequence from a given start number:</p> <pre class="language-sql highlighter-rouge" data-language="sql">CREATE SEQUENCE serial START 101;</pre> <p>Generate odd numbers using <code class="language-plaintext highlighter-rouge">INCREMENT BY</code>:</p> <pre class="language-sql highlighter-rouge" data-language="sql">CREATE SEQUENCE serial START WITH 1 INCREMENT BY 2;</pre> <p>Generate a descending sequence starting from 99:</p> <pre class="language-sql highlighter-rouge" data-language="sql">CREATE SEQUENCE serial START WITH 99 INCREMENT BY -1 MAXVALUE 99;</pre> <p>By default, cycles are not allowed and will result in error, e.g.:</p> <pre class="language-console highlighter-rouge" data-language="console">Sequence Error: nextval: reached maximum value of sequence "serial" (10)</pre> <pre class="language-sql highlighter-rouge" data-language="sql">CREATE SEQUENCE serial START WITH 1 MAXVALUE 10;</pre> <p><code class="language-plaintext highlighter-rouge">CYCLE</code> allows cycling through the same sequence repeatedly:</p> <pre class="language-sql highlighter-rouge" data-language="sql">CREATE SEQUENCE serial START WITH 1 MAXVALUE 10 CYCLE;</pre> <h3 id="creating-and-dropping-sequences"> <a style="text-decoration: none;" href="#creating-and-dropping-sequences">Creating and Dropping Sequences</a> </h3> <p>Sequences can be created and dropped similarly to other catalogue items.</p> <p>Overwrite an existing sequence:</p> <pre class="language-sql highlighter-rouge" data-language="sql">CREATE OR REPLACE SEQUENCE serial;</pre> <p>Only create sequence if no such sequence exists yet:</p> <pre class="language-sql highlighter-rouge" data-language="sql">CREATE SEQUENCE IF NOT EXISTS serial;</pre> <p>Remove sequence:</p> <pre class="language-sql highlighter-rouge" data-language="sql">DROP SEQUENCE serial;</pre> <p>Remove sequence if exists:</p> <pre class="language-sql highlighter-rouge" data-language="sql">DROP SEQUENCE IF EXISTS serial;</pre> <h3 id="using-sequences-for-primary-keys"> <a style="text-decoration: none;" href="#using-sequences-for-primary-keys">Using Sequences for Primary Keys</a> </h3> <p>Sequences can provide an integer primary key for a table. For example:</p> <pre class="language-sql highlighter-rouge" data-language="sql">CREATE SEQUENCE id_sequence START 1;
CREATE TABLE tbl (id INTEGER DEFAULT nextval('id_sequence'), s VARCHAR);
INSERT INTO tbl (s) VALUES ('hello'), ('world');
SELECT * FROM tbl;</pre> <p>The script results in the following table:</p> <table> <thead> <tr> <th style="text-align: right">id</th> <th>s</th> </tr> </thead> <tbody> <tr> <td style="text-align: right">1</td> <td>hello</td> </tr> <tr> <td style="text-align: right">2</td> <td>world</td> </tr> </tbody> </table> <p>Sequences can also be added using the <a href="alter_table.html"><code class="language-plaintext highlighter-rouge">ALTER TABLE</code> statement</a>. The following example adds an <code class="language-plaintext highlighter-rouge">id</code> column and fills it with values generated by the sequence:</p> <pre class="language-sql highlighter-rouge" data-language="sql">CREATE TABLE tbl (s VARCHAR);
INSERT INTO tbl VALUES ('hello'), ('world');
CREATE SEQUENCE id_sequence START 1;
ALTER TABLE tbl ADD COLUMN id INTEGER DEFAULT nextval('id_sequence');
SELECT * FROM tbl;</pre> <p>This script results in the same table as the previous example.</p> <h3 id="selecting-the-next-value"> <a style="text-decoration: none;" href="#selecting-the-next-value">Selecting the Next Value</a> </h3> <p>To select the next number from a sequence, use <code class="language-plaintext highlighter-rouge">nextval</code>:</p> <pre class="language-sql highlighter-rouge" data-language="sql">CREATE SEQUENCE serial START 1;
SELECT nextval('serial') AS nextval;</pre> <table> <thead> <tr> <th style="text-align: right">nextval</th> </tr> </thead> <tbody> <tr> <td style="text-align: right">1</td> </tr> </tbody> </table> <p>Using this sequence in an <code class="language-plaintext highlighter-rouge">INSERT</code> command:</p> <pre class="language-sql highlighter-rouge" data-language="sql">INSERT INTO distributors VALUES (nextval('serial'), 'nothing');</pre> <h3 id="selecting-the-current-value"> <a style="text-decoration: none;" href="#selecting-the-current-value">Selecting the Current Value</a> </h3> <p>You may also view the current number from the sequence. Note that the <code class="language-plaintext highlighter-rouge">nextval</code> function must have already been called before calling <code class="language-plaintext highlighter-rouge">currval</code>, otherwise a Serialization Error (<code class="language-plaintext highlighter-rouge">sequence is not yet defined in this session</code>) will be thrown.</p> <pre class="language-sql highlighter-rouge" data-language="sql">CREATE SEQUENCE serial START 1;
SELECT nextval('serial') AS nextval;
SELECT currval('serial') AS currval;</pre> <table> <thead> <tr> <th style="text-align: right">currval</th> </tr> </thead> <tbody> <tr> <td style="text-align: right">1</td> </tr> </tbody> </table> <h3 id="syntax"> <a style="text-decoration: none;" href="#syntax">Syntax</a> </h3>  <p><code class="language-plaintext highlighter-rouge">CREATE SEQUENCE</code> creates a new sequence number generator.</p> <p>If a schema name is given then the sequence is created in the specified schema. Otherwise it is created in the current schema. Temporary sequences exist in a special schema, so a schema name may not be given when creating a temporary sequence. The sequence name must be distinct from the name of any other sequence in the same schema.</p> <p>After a sequence is created, you use the function <code class="language-plaintext highlighter-rouge">nextval</code> to operate on the sequence.</p> <h2 id="parameters"> <a style="text-decoration: none;" href="#parameters">Parameters</a> </h2> <table> <thead> <tr> <th style="text-align: left">Name</th> <th style="text-align: left">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">
<code class="language-plaintext highlighter-rouge">CYCLE</code> or <code class="language-plaintext highlighter-rouge">NO CYCLE</code>
</td> <td style="text-align: left">The <code class="language-plaintext highlighter-rouge">CYCLE</code> option allows the sequence to wrap around when the <code class="language-plaintext highlighter-rouge">maxvalue</code> or <code class="language-plaintext highlighter-rouge">minvalue</code> has been reached by an ascending or descending sequence respectively. If the limit is reached, the next number generated will be the <code class="language-plaintext highlighter-rouge">minvalue</code> or <code class="language-plaintext highlighter-rouge">maxvalue</code>, respectively. If <code class="language-plaintext highlighter-rouge">NO CYCLE</code> is specified, any calls to <code class="language-plaintext highlighter-rouge">nextval</code> after the sequence has reached its maximum value will return an error. If neither <code class="language-plaintext highlighter-rouge">CYCLE</code> or <code class="language-plaintext highlighter-rouge">NO CYCLE</code> are specified, <code class="language-plaintext highlighter-rouge">NO CYCLE</code> is the default.</td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">increment</code></td> <td style="text-align: left">The optional clause <code class="language-plaintext highlighter-rouge">INCREMENT BY increment</code> specifies which value is added to the current sequence value to create a new value. A positive value will make an ascending sequence, a negative one a descending sequence. The default value is 1.</td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">maxvalue</code></td> <td style="text-align: left">The optional clause <code class="language-plaintext highlighter-rouge">MAXVALUE maxvalue</code> determines the maximum value for the sequence. If this clause is not supplied or <code class="language-plaintext highlighter-rouge">NO MAXVALUE</code> is specified, then default values will be used. The defaults are 2^63 - 1 and -1 for ascending and descending sequences, respectively.</td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">minvalue</code></td> <td style="text-align: left">The optional clause <code class="language-plaintext highlighter-rouge">MINVALUE minvalue</code> determines the minimum value a sequence can generate. If this clause is not supplied or <code class="language-plaintext highlighter-rouge">NO MINVALUE</code> is specified, then defaults will be used. The defaults are 1 and -(2^63 - 1) for ascending and descending sequences, respectively.</td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">name</code></td> <td style="text-align: left">The name (optionally schema-qualified) of the sequence to be created.</td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">start</code></td> <td style="text-align: left">The optional clause <code class="language-plaintext highlighter-rouge">START WITH start</code> allows the sequence to begin anywhere. The default starting value is <code class="language-plaintext highlighter-rouge">minvalue</code> for ascending sequences and <code class="language-plaintext highlighter-rouge">maxvalue</code> for descending ones.</td> </tr> <tr> <td style="text-align: left">
<code class="language-plaintext highlighter-rouge">TEMPORARY</code> or <code class="language-plaintext highlighter-rouge">TEMP</code>
</td> <td style="text-align: left">If specified, the sequence object is created only for this session, and is automatically dropped on session exit. Existing permanent sequences with the same name are not visible (in this session) while the temporary sequence exists, unless they are referenced with schema-qualified names.</td> </tr> </tbody> </table> <blockquote> <p>Sequences are based on <code class="language-plaintext highlighter-rouge">BIGINT</code> arithmetic, so the range cannot exceed the range of an eight-byte integer (-9223372036854775808 to 9223372036854775807).</p> </blockquote><div class="_attribution">
  <p class="_attribution-p">
    &copy; Copyright 2018&ndash;2024 Stichting DuckDB Foundation<br>Licensed under the MIT License.<br>
    <a href="https://duckdb.org/docs/sql/statements/create_sequence.html" class="_attribution-link">https://duckdb.org/docs/sql/statements/create_sequence.html</a>
  </p>
</div>
