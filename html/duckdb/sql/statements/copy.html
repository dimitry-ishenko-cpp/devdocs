<h1 class="title">COPY Statement</h1>  <h2 id="examples"> <a style="text-decoration: none;" href="#examples">Examples</a> </h2> <p>Read a CSV file into the <code class="language-plaintext highlighter-rouge">lineitem</code> table, using auto-detected CSV options:</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY lineitem FROM 'lineitem.csv';</pre> <p>Read a CSV file into the <code class="language-plaintext highlighter-rouge">lineitem</code> table, using manually specified CSV options:</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY lineitem FROM 'lineitem.csv' (DELIMITER '|');</pre> <p>Read a Parquet file into the <code class="language-plaintext highlighter-rouge">lineitem</code> table:</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY lineitem FROM 'lineitem.pq' (FORMAT PARQUET);</pre> <p>Read a JSON file into the <code class="language-plaintext highlighter-rouge">lineitem</code> table, using auto-detected options:</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY lineitem FROM 'lineitem.json' (FORMAT JSON, AUTO_DETECT true);</pre> <p>Read a CSV file into the <code class="language-plaintext highlighter-rouge">lineitem</code> table, using double quotes:</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY lineitem FROM "lineitem.csv";</pre> <p>Read a CSV file into the <code class="language-plaintext highlighter-rouge">lineitem</code> table, omitting quotes:</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY lineitem FROM lineitem.csv;</pre> <p>Write a table to a CSV file:</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY lineitem TO 'lineitem.csv' (FORMAT CSV, DELIMITER '|', HEADER);</pre> <p>Write a table to a CSV file, using double quotes:</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY lineitem TO "lineitem.csv";</pre> <p>Write a table to a CSV file, omitting quotes:</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY lineitem TO lineitem.csv;</pre> <p>Write the result of a query to a Parquet file:</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY (SELECT l_orderkey, l_partkey FROM lineitem) TO 'lineitem.parquet' (COMPRESSION ZSTD);</pre> <p>Copy the entire content of database <code class="language-plaintext highlighter-rouge">db1</code> to database <code class="language-plaintext highlighter-rouge">db2</code>:</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY FROM DATABASE db1 TO db2;</pre> <p>Copy only the schema (catalog elements) but not any data:</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY FROM DATABASE db1 TO db2 (SCHEMA);</pre> <h2 id="overview"> <a style="text-decoration: none;" href="#overview">Overview</a> </h2> <p><code class="language-plaintext highlighter-rouge">COPY</code> moves data between DuckDB and external files. <code class="language-plaintext highlighter-rouge">COPY ... FROM</code> imports data into DuckDB from an external file. <code class="language-plaintext highlighter-rouge">COPY ... TO</code> writes data from DuckDB to an external file. The <code class="language-plaintext highlighter-rouge">COPY</code> command can be used for <code class="language-plaintext highlighter-rouge">CSV</code>, <code class="language-plaintext highlighter-rouge">PARQUET</code> and <code class="language-plaintext highlighter-rouge">JSON</code> files.</p> <h2 id="copy--from"> <a style="text-decoration: none;" href="#copy--from"><code class="language-plaintext highlighter-rouge">COPY ... FROM</code></a> </h2> <p><code class="language-plaintext highlighter-rouge">COPY ... FROM</code> imports data from an external file into an existing table. The data is appended to whatever data is in the table already. The amount of columns inside the file must match the amount of columns in the table <code class="language-plaintext highlighter-rouge">table_name</code>, and the contents of the columns must be convertible to the column types of the table. In case this is not possible, an error will be thrown.</p> <p>If a list of columns is specified, <code class="language-plaintext highlighter-rouge">COPY</code> will only copy the data in the specified columns from the file. If there are any columns in the table that are not in the column list, <code class="language-plaintext highlighter-rouge">COPY ... FROM</code> will insert the default values for those columns</p> <p>Copy the contents of a comma-separated file <code class="language-plaintext highlighter-rouge">test.csv</code> without a header into the table <code class="language-plaintext highlighter-rouge">test</code>:</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY test FROM 'test.csv';</pre> <p>Copy the contents of a comma-separated file with a header into the <code class="language-plaintext highlighter-rouge">category</code> table:</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY category FROM 'categories.csv' (HEADER);</pre> <p>Copy the contents of <code class="language-plaintext highlighter-rouge">lineitem.tbl</code> into the <code class="language-plaintext highlighter-rouge">lineitem</code> table, where the contents are delimited by a pipe character (<code class="language-plaintext highlighter-rouge">|</code>):</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY lineitem FROM 'lineitem.tbl' (DELIMITER '|');</pre> <p>Copy the contents of <code class="language-plaintext highlighter-rouge">lineitem.tbl</code> into the <code class="language-plaintext highlighter-rouge">lineitem</code> table, where the delimiter, quote character, and presence of a header are automatically detected:</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY lineitem FROM 'lineitem.tbl' (AUTO_DETECT true);</pre> <p>Read the contents of a comma-separated file <code class="language-plaintext highlighter-rouge">names.csv</code> into the <code class="language-plaintext highlighter-rouge">name</code> column of the <code class="language-plaintext highlighter-rouge">category</code> table. Any other columns of this table are filled with their default value:</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY category(name) FROM 'names.csv';</pre> <p>Read the contents of a Parquet file <code class="language-plaintext highlighter-rouge">lineitem.parquet</code> into the <code class="language-plaintext highlighter-rouge">lineitem</code> table:</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY lineitem FROM 'lineitem.parquet' (FORMAT PARQUET);</pre> <p>Read the contents of a newline-delimited JSON file <code class="language-plaintext highlighter-rouge">lineitem.ndjson</code> into the <code class="language-plaintext highlighter-rouge">lineitem</code> table:</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY lineitem FROM 'lineitem.ndjson' (FORMAT JSON);</pre> <p>Read the contents of a JSON file <code class="language-plaintext highlighter-rouge">lineitem.json</code> into the <code class="language-plaintext highlighter-rouge">lineitem</code> table:</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY lineitem FROM 'lineitem.json' (FORMAT JSON, ARRAY true);</pre> <h3 id="syntax"> <a style="text-decoration: none;" href="#syntax">Syntax</a> </h3>  <h2 id="copy--to"> <a style="text-decoration: none;" href="#copy--to"><code class="language-plaintext highlighter-rouge">COPY ... TO</code></a> </h2> <p><code class="language-plaintext highlighter-rouge">COPY ... TO</code> exports data from DuckDB to an external CSV or Parquet file. It has mostly the same set of options as <code class="language-plaintext highlighter-rouge">COPY ... FROM</code>, however, in the case of <code class="language-plaintext highlighter-rouge">COPY ... TO</code> the options specify how the file should be written to disk. Any file created by <code class="language-plaintext highlighter-rouge">COPY ... TO</code> can be copied back into the database by using <code class="language-plaintext highlighter-rouge">COPY ... FROM</code> with a similar set of options.</p> <p>The <code class="language-plaintext highlighter-rouge">COPY ... TO</code> function can be called specifying either a table name, or a query. When a table name is specified, the contents of the entire table will be written into the resulting file. When a query is specified, the query is executed and the result of the query is written to the resulting file.</p> <p>Copy the contents of the <code class="language-plaintext highlighter-rouge">lineitem</code> table to a CSV file with a header:</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY lineitem TO 'lineitem.csv';</pre> <p>Copy the contents of the <code class="language-plaintext highlighter-rouge">lineitem</code> table to the file <code class="language-plaintext highlighter-rouge">lineitem.tbl</code>, where the columns are delimited by a pipe character (<code class="language-plaintext highlighter-rouge">|</code>), including a header line:</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY lineitem TO 'lineitem.tbl' (DELIMITER '|');</pre> <p>Use tab separators to create a TSV file without a header:</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY lineitem TO 'lineitem.tsv' (DELIMITER '\t', HEADER false);</pre> <p>Copy the l_orderkey column of the <code class="language-plaintext highlighter-rouge">lineitem</code> table to the file <code class="language-plaintext highlighter-rouge">orderkey.tbl</code>:</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY lineitem(l_orderkey) TO 'orderkey.tbl' (DELIMITER '|');</pre> <p>Copy the result of a query to the file <code class="language-plaintext highlighter-rouge">query.csv</code>, including a header with column names:</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY (SELECT 42 AS a, 'hello' AS b) TO 'query.csv' (DELIMITER ',');</pre> <p>Copy the result of a query to the Parquet file <code class="language-plaintext highlighter-rouge">query.parquet</code>:</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY (SELECT 42 AS a, 'hello' AS b) TO 'query.parquet' (FORMAT PARQUET);</pre> <p>Copy the result of a query to the newline-delimited JSON file <code class="language-plaintext highlighter-rouge">query.ndjson</code>:</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY (SELECT 42 AS a, 'hello' AS b) TO 'query.ndjson' (FORMAT JSON);</pre> <p>Copy the result of a query to the JSON file <code class="language-plaintext highlighter-rouge">query.json</code>:</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY (SELECT 42 AS a, 'hello' AS b) TO 'query.json' (FORMAT JSON, ARRAY true);</pre> <h3 id="copy--to-options"> <a style="text-decoration: none;" href="#copy--to-options"><code class="language-plaintext highlighter-rouge">COPY ... TO</code> Options</a> </h3> <p>Zero or more copy options may be provided as a part of the copy operation. The <code class="language-plaintext highlighter-rouge">WITH</code> specifier is optional, but if any options are specified, the parentheses are required. Parameter values can be passed in with or without wrapping in single quotes.</p> <p>Any option that is a Boolean can be enabled or disabled in multiple ways. You can write <code class="language-plaintext highlighter-rouge">true</code>, <code class="language-plaintext highlighter-rouge">ON</code>, or <code class="language-plaintext highlighter-rouge">1</code> to enable the option, and <code class="language-plaintext highlighter-rouge">false</code>, <code class="language-plaintext highlighter-rouge">OFF</code>, or <code class="language-plaintext highlighter-rouge">0</code> to disable it. The <code class="language-plaintext highlighter-rouge">BOOLEAN</code> value can also be omitted, e.g., by only passing <code class="language-plaintext highlighter-rouge">(HEADER)</code>, in which case <code class="language-plaintext highlighter-rouge">true</code> is assumed.</p> <p>The below options are applicable to all formats written with <code class="language-plaintext highlighter-rouge">COPY</code>.</p> <table> <thead> <tr> <th style="text-align: left">Name</th> <th style="text-align: left">Description</th> <th style="text-align: left">Type</th> <th style="text-align: left">Default</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">FORMAT</code></td> <td style="text-align: left">Specifies the copy function to use. The default is selected from the file extension (e.g., <code class="language-plaintext highlighter-rouge">.parquet</code> results in a Parquet file being written/read). If the file extension is unknown <code class="language-plaintext highlighter-rouge">CSV</code> is selected. Vanilla DuckDB provides <code class="language-plaintext highlighter-rouge">CSV</code>, <code class="language-plaintext highlighter-rouge">PARQUET</code> and <code class="language-plaintext highlighter-rouge">JSON</code> but additional copy functions can be added by <a href="../../extensions/overview.html"><code class="language-plaintext highlighter-rouge">extensions</code></a>.</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">VARCHAR</code></td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">auto</code></td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">USE_TMP_FILE</code></td> <td style="text-align: left">Whether or not to write to a temporary file first if the original file exists (<code class="language-plaintext highlighter-rouge">target.csv.tmp</code>). This prevents overwriting an existing file with a broken file in case the writing is cancelled.</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">BOOL</code></td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">auto</code></td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">OVERWRITE_OR_IGNORE</code></td> <td style="text-align: left">Whether or not to allow overwriting files if they already exist. Only has an effect when used with <code class="language-plaintext highlighter-rouge">partition_by</code>.</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">BOOL</code></td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">false</code></td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">OVERWRITE</code></td> <td style="text-align: left">When set, all existing files inside targeted directories will be removed (not supported on remote filesystems). Only has an effect when used with <code class="language-plaintext highlighter-rouge">partition_by</code>.</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">BOOL</code></td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">false</code></td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">APPEND</code></td> <td style="text-align: left">When set, in the event a filename pattern is generated that already exists, the path will be regenerated to ensure no existing files are overwritten. Only has an effect when used with <code class="language-plaintext highlighter-rouge">partition_by</code>.</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">BOOL</code></td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">false</code></td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">FILENAME_PATTERN</code></td> <td style="text-align: left">Set a pattern to use for the filename, can optionally contain <code class="language-plaintext highlighter-rouge">{uuid}</code> to be filled in with a generated UUID or <code class="language-plaintext highlighter-rouge">{id}</code> which is replaced by an incrementing index. Only has an effect when used with <code class="language-plaintext highlighter-rouge">partition_by</code>.</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">VARCHAR</code></td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">auto</code></td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">FILE_EXTENSION</code></td> <td style="text-align: left">Set the file extension that should be assigned to the generated file(s).</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">VARCHAR</code></td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">auto</code></td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">PER_THREAD_OUTPUT</code></td> <td style="text-align: left">Generate one file per thread, rather than one file in total. This allows for faster parallel writing.</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">BOOL</code></td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">false</code></td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">FILE_SIZE_BYTES</code></td> <td style="text-align: left">If this parameter is set, the <code class="language-plaintext highlighter-rouge">COPY</code> process creates a directory which will contain the exported files. If a file exceeds the set limit (specified as bytes such as <code class="language-plaintext highlighter-rouge">1000</code> or in human-readable format such as <code class="language-plaintext highlighter-rouge">1k</code>), the process creates a new file in the directory. This parameter works in combination with <code class="language-plaintext highlighter-rouge">PER_THREAD_OUTPUT</code>. Note that the size is used as an approximation, and files can be occasionally slightly over the limit.</td> <td style="text-align: left">
<code class="language-plaintext highlighter-rouge">VARCHAR</code> or <code class="language-plaintext highlighter-rouge">BIGINT</code>
</td> <td style="text-align: left">(empty)</td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">PARTITION_BY</code></td> <td style="text-align: left">The columns to partition by using a Hive partitioning scheme, see the <a href="../../data/partitioning/partitioned_writes.html">partitioned writes section</a>.</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">VARCHAR[]</code></td> <td style="text-align: left">(empty)</td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">RETURN_FILES</code></td> <td style="text-align: left">Whether or not to include the created filepath(s) (as a <code class="language-plaintext highlighter-rouge">Files VARCHAR[]</code> column) in the query result.</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">BOOL</code></td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">false</code></td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">WRITE_PARTITION_COLUMNS</code></td> <td style="text-align: left">Whether or not to write partition columns into files. Only has an effect when used with <code class="language-plaintext highlighter-rouge">partition_by</code>.</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">BOOL</code></td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">false</code></td> </tr> </tbody> </table> <h3 id="syntax-1"> <a style="text-decoration: none;" href="#syntax-1">Syntax</a> </h3>  <h2 id="copy-from-database--to"> <a style="text-decoration: none;" href="#copy-from-database--to"><code class="language-plaintext highlighter-rouge">COPY FROM DATABASE ... TO</code></a> </h2> <p>The <code class="language-plaintext highlighter-rouge">COPY FROM DATABASE ... TO</code> statement copies the entire content from one attached database to another attached database. This includes the schema, including constraints, indexes, sequences, macros, and the data itself.</p> <pre class="language-sql highlighter-rouge" data-language="sql">ATTACH 'db1.db' AS db1;
CREATE TABLE db1.tbl AS SELECT 42 AS x, 3 AS y;
CREATE MACRO db1.two_x_plus_y(x, y) AS 2 * x + y;

ATTACH 'db2.db' AS db2;
COPY FROM DATABASE db1 TO db2;
SELECT db2.two_x_plus_y(x, y) AS z FROM db2.tbl;</pre> <table> <thead> <tr> <th style="text-align: right">z</th> </tr> </thead> <tbody> <tr> <td style="text-align: right">87</td> </tr> </tbody> </table> <p>To only copy the <strong>schema</strong> of <code class="language-plaintext highlighter-rouge">db1</code> to <code class="language-plaintext highlighter-rouge">db2</code> but omit copying the data, add <code class="language-plaintext highlighter-rouge">SCHEMA</code> to the statement:</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY FROM DATABASE db1 TO db2 (SCHEMA);</pre> <h3 id="syntax-2"> <a style="text-decoration: none;" href="#syntax-2">Syntax</a> </h3>  <h2 id="format-specific-options"> <a style="text-decoration: none;" href="#format-specific-options">Format-Specific Options</a> </h2> <h3 id="csv-options"> <a style="text-decoration: none;" href="#csv-options">CSV Options</a> </h3> <p>The below options are applicable when writing CSV files.</p> <table> <thead> <tr> <th style="text-align: left">Name</th> <th style="text-align: left">Description</th> <th style="text-align: left">Type</th> <th style="text-align: left">Default</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">COMPRESSION</code></td> <td style="text-align: left">The compression type for the file. By default this will be detected automatically from the file extension (e.g., <code class="language-plaintext highlighter-rouge">file.csv.gz</code> will use gzip, <code class="language-plaintext highlighter-rouge">file.csv</code> will use <code class="language-plaintext highlighter-rouge">none</code>). Options are <code class="language-plaintext highlighter-rouge">none</code>, <code class="language-plaintext highlighter-rouge">gzip</code>, <code class="language-plaintext highlighter-rouge">zstd</code>.</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">VARCHAR</code></td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">auto</code></td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">DATEFORMAT</code></td> <td style="text-align: left">Specifies the date format to use when writing dates. See <a href="../functions/dateformat.html">Date Format</a>
</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">VARCHAR</code></td> <td style="text-align: left">(empty)</td> </tr> <tr> <td style="text-align: left">
<code class="language-plaintext highlighter-rouge">DELIM</code> or <code class="language-plaintext highlighter-rouge">SEP</code>
</td> <td style="text-align: left">The character that is written to separate columns within each row.</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">VARCHAR</code></td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">,</code></td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">ESCAPE</code></td> <td style="text-align: left">The character that should appear before a character that matches the <code class="language-plaintext highlighter-rouge">quote</code> value.</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">VARCHAR</code></td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">"</code></td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">FORCE_QUOTE</code></td> <td style="text-align: left">The list of columns to always add quotes to, even if not required.</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">VARCHAR[]</code></td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">[]</code></td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">HEADER</code></td> <td style="text-align: left">Whether or not to write a header for the CSV file.</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">BOOL</code></td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">true</code></td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">NULLSTR</code></td> <td style="text-align: left">The string that is written to represent a <code class="language-plaintext highlighter-rouge">NULL</code> value.</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">VARCHAR</code></td> <td style="text-align: left">(empty)</td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">QUOTE</code></td> <td style="text-align: left">The quoting character to be used when a data value is quoted.</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">VARCHAR</code></td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">"</code></td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">TIMESTAMPFORMAT</code></td> <td style="text-align: left">Specifies the date format to use when writing timestamps. See <a href="../functions/dateformat.html">Date Format</a>
</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">VARCHAR</code></td> <td style="text-align: left">(empty)</td> </tr> </tbody> </table> <h3 id="parquet-options"> <a style="text-decoration: none;" href="#parquet-options">Parquet Options</a> </h3> <p>The below options are applicable when writing Parquet files.</p> <table> <thead> <tr> <th style="text-align: left">Name</th> <th style="text-align: left">Description</th> <th style="text-align: left">Type</th> <th style="text-align: left">Default</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">COMPRESSION</code></td> <td style="text-align: left">The compression format to use (<code class="language-plaintext highlighter-rouge">uncompressed</code>, <code class="language-plaintext highlighter-rouge">snappy</code>, <code class="language-plaintext highlighter-rouge">gzip</code> or <code class="language-plaintext highlighter-rouge">zstd</code>).</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">VARCHAR</code></td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">snappy</code></td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">COMPRESSION_LEVEL</code></td> <td style="text-align: left">Compression level, set between 1 (lowest compression, fastest) and 22 (highest compression, slowest). Only supported for zstd compression.</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">BIGINT</code></td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">3</code></td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">FIELD_IDS</code></td> <td style="text-align: left">The <code class="language-plaintext highlighter-rouge">field_id</code> for each column. Pass <code class="language-plaintext highlighter-rouge">auto</code> to attempt to infer automatically.</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">STRUCT</code></td> <td style="text-align: left">(empty)</td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">ROW_GROUP_SIZE_BYTES</code></td> <td style="text-align: left">The target size of each row group. You can pass either a human-readable string, e.g., <code class="language-plaintext highlighter-rouge">2MB</code>, or an integer, i.e., the number of bytes. This option is only used when you have issued <code class="language-plaintext highlighter-rouge">SET preserve_insertion_order = false;</code>, otherwise, it is ignored.</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">BIGINT</code></td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">row_group_size * 1024</code></td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">ROW_GROUP_SIZE</code></td> <td style="text-align: left">The target size, i.e., number of rows, of each row group.</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">BIGINT</code></td> <td style="text-align: left">122880</td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">ROW_GROUPS_PER_FILE</code></td> <td style="text-align: left">Create a new Parquet file if the current one has a specified number of row groups. If multiple threads are active, the number of row groups in a file may slightly exceed the specified number of row groups to limit the amount of locking – similarly to the behaviour of <code class="language-plaintext highlighter-rouge">FILE_SIZE_BYTES</code>. However, if <code class="language-plaintext highlighter-rouge">per_thread_output</code> is set, only one thread writes to each file, and it becomes accurate again.</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">BIGINT</code></td> <td style="text-align: left">(empty)</td> </tr> </tbody> </table> <p>Some examples of <code class="language-plaintext highlighter-rouge">FIELD_IDS</code> are as follows.</p> <p>Assign <code class="language-plaintext highlighter-rouge">field_ids</code> automatically:</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY
    (SELECT 128 AS i)
    TO 'my.parquet'
    (FIELD_IDS 'auto');</pre> <p>Sets the <code class="language-plaintext highlighter-rouge">field_id</code> of column <code class="language-plaintext highlighter-rouge">i</code> to 42:</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY
    (SELECT 128 AS i)
    TO 'my.parquet'
    (FIELD_IDS {i: 42});</pre> <p>Sets the <code class="language-plaintext highlighter-rouge">field_id</code> of column <code class="language-plaintext highlighter-rouge">i</code> to 42, and column <code class="language-plaintext highlighter-rouge">j</code> to 43:</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY
    (SELECT 128 AS i, 256 AS j)
    TO 'my.parquet'
    (FIELD_IDS {i: 42, j: 43});</pre> <p>Sets the <code class="language-plaintext highlighter-rouge">field_id</code> of column <code class="language-plaintext highlighter-rouge">my_struct</code> to 43, and column <code class="language-plaintext highlighter-rouge">i</code> (nested inside <code class="language-plaintext highlighter-rouge">my_struct</code>) to 43:</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY
    (SELECT {i: 128} AS my_struct)
    TO 'my.parquet'
    (FIELD_IDS {my_struct: {__duckdb_field_id: 42, i: 43}});</pre> <p>Sets the <code class="language-plaintext highlighter-rouge">field_id</code> of column <code class="language-plaintext highlighter-rouge">my_list</code> to 42, and column <code class="language-plaintext highlighter-rouge">element</code> (default name of list child) to 43:</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY
    (SELECT [128, 256] AS my_list)
    TO 'my.parquet'
    (FIELD_IDS {my_list: {__duckdb_field_id: 42, element: 43}});</pre> <p>Sets the <code class="language-plaintext highlighter-rouge">field_id</code> of column <code class="language-plaintext highlighter-rouge">my_map</code> to 42, and columns <code class="language-plaintext highlighter-rouge">key</code> and <code class="language-plaintext highlighter-rouge">value</code> (default names of map children) to 43 and 44:</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY
    (SELECT MAP {'key1' : 128, 'key2': 256} my_map)
    TO 'my.parquet'
    (FIELD_IDS {my_map: {__duckdb_field_id: 42, key: 43, value: 44}});</pre> <h3 id="json-options"> <a style="text-decoration: none;" href="#json-options">JSON Options</a> </h3> <p>The below options are applicable when writing <code class="language-plaintext highlighter-rouge">JSON</code> files.</p> <table> <thead> <tr> <th style="text-align: left">Name</th> <th style="text-align: left">Description</th> <th style="text-align: left">Type</th> <th style="text-align: left">Default</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">ARRAY</code></td> <td style="text-align: left">Whether to write a JSON array. If <code class="language-plaintext highlighter-rouge">true</code>, a JSON array of records is written, if <code class="language-plaintext highlighter-rouge">false</code>, newline-delimited JSON is written</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">BOOL</code></td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">false</code></td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">COMPRESSION</code></td> <td style="text-align: left">The compression type for the file. By default this will be detected automatically from the file extension (e.g., <code class="language-plaintext highlighter-rouge">file.json.gz</code> will use gzip, <code class="language-plaintext highlighter-rouge">file.json</code> will use <code class="language-plaintext highlighter-rouge">none</code>). Options are <code class="language-plaintext highlighter-rouge">none</code>, <code class="language-plaintext highlighter-rouge">gzip</code>, <code class="language-plaintext highlighter-rouge">zstd</code>.</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">VARCHAR</code></td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">auto</code></td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">DATEFORMAT</code></td> <td style="text-align: left">Specifies the date format to use when writing dates. See <a href="../functions/dateformat.html">Date Format</a>
</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">VARCHAR</code></td> <td style="text-align: left">(empty)</td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">TIMESTAMPFORMAT</code></td> <td style="text-align: left">Specifies the date format to use when writing timestamps. See <a href="../functions/dateformat.html">Date Format</a>
</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">VARCHAR</code></td> <td style="text-align: left">(empty)</td> </tr> </tbody> </table> <h2 id="limitations"> <a style="text-decoration: none;" href="#limitations">Limitations</a> </h2> <p><code class="language-plaintext highlighter-rouge">COPY</code> does not support copying between tables. To copy between tables, use an <a href="insert.html"><code class="language-plaintext highlighter-rouge">INSERT statement</code></a>:</p> <pre class="language-sql highlighter-rouge" data-language="sql">INSERT INTO tbl2
    FROM tbl1;</pre><div class="_attribution">
  <p class="_attribution-p">
    &copy; Copyright 2018&ndash;2024 Stichting DuckDB Foundation<br>Licensed under the MIT License.<br>
    <a href="https://duckdb.org/docs/sql/statements/copy.html" class="_attribution-link">https://duckdb.org/docs/sql/statements/copy.html</a>
  </p>
</div>
