<h1 class="title">Bitstring Functions</h1>   <p>This section describes functions and operators for examining and manipulating <a href="../data_types/bitstring.html"><code class="language-plaintext highlighter-rouge">BITSTRING</code></a> values. Bitstrings must be of equal length when performing the bitwise operands AND, OR and XOR. When bit shifting, the original length of the string is preserved.</p> <h2 id="bitstring-operators"> <a style="text-decoration: none;" href="#bitstring-operators">Bitstring Operators</a> </h2> <p>The table below shows the available mathematical operators for <code class="language-plaintext highlighter-rouge">BIT</code> type.</p>   <table> <thead> <tr> <th style="text-align: left">Operator</th> <th style="text-align: left">Description</th> <th style="text-align: left">Example</th> <th style="text-align: left">Result</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">&amp;</code></td> <td style="text-align: left">Bitwise AND</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">'10101'::BITSTRING &amp; '10001'::BITSTRING</code></td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">10001</code></td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">|</code></td> <td style="text-align: left">Bitwise OR</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">'1011'::BITSTRING | '0001'::BITSTRING</code></td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">1011</code></td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">xor</code></td> <td style="text-align: left">Bitwise XOR</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">xor('101'::BITSTRING, '001'::BITSTRING)</code></td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">100</code></td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">~</code></td> <td style="text-align: left">Bitwise NOT</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">~('101'::BITSTRING)</code></td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">010</code></td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">&lt;&lt;</code></td> <td style="text-align: left">Bitwise shift left</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">'1001011'::BITSTRING &lt;&lt; 3</code></td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">1011000</code></td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">&gt;&gt;</code></td> <td style="text-align: left">Bitwise shift right</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">'1001011'::BITSTRING &gt;&gt; 3</code></td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">0001001</code></td> </tr> </tbody> </table>  <h2 id="bitstring-functions"> <a style="text-decoration: none;" href="#bitstring-functions">Bitstring Functions</a> </h2> <p>The table below shows the available scalar functions for <code class="language-plaintext highlighter-rouge">BIT</code> type.</p> <table> <thead> <tr> <th style="text-align: left">Name</th> <th style="text-align: left">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><a href="#bit_countbitstring"><code class="language-plaintext highlighter-rouge">bit_count(bitstring)</code></a></td> <td style="text-align: left">Returns the number of set bits in the bitstring.</td> </tr> <tr> <td style="text-align: left"><a href="#bit_lengthbitstring"><code class="language-plaintext highlighter-rouge">bit_length(bitstring)</code></a></td> <td style="text-align: left">Returns the number of bits in the bitstring.</td> </tr> <tr> <td style="text-align: left"><a href="#bit_positionsubstring-bitstring"><code class="language-plaintext highlighter-rouge">bit_position(substring, bitstring)</code></a></td> <td style="text-align: left">Returns first starting index of the specified substring within bits, or zero if it's not present. The first (leftmost) bit is indexed 1.</td> </tr> <tr> <td style="text-align: left"><a href="#bitstringbitstring-length"><code class="language-plaintext highlighter-rouge">bitstring(bitstring, length)</code></a></td> <td style="text-align: left">Returns a bitstring of determined length.</td> </tr> <tr> <td style="text-align: left"><a href="#get_bitbitstring-index"><code class="language-plaintext highlighter-rouge">get_bit(bitstring, index)</code></a></td> <td style="text-align: left">Extracts the nth bit from bitstring; the first (leftmost) bit is indexed 0.</td> </tr> <tr> <td style="text-align: left"><a href="#lengthbitstring"><code class="language-plaintext highlighter-rouge">length(bitstring)</code></a></td> <td style="text-align: left">Alias for <code class="language-plaintext highlighter-rouge">bit_length</code>.</td> </tr> <tr> <td style="text-align: left"><a href="#octet_lengthbitstring"><code class="language-plaintext highlighter-rouge">octet_length(bitstring)</code></a></td> <td style="text-align: left">Returns the number of bytes in the bitstring.</td> </tr> <tr> <td style="text-align: left"><a href="#set_bitbitstring-index-new_value"><code class="language-plaintext highlighter-rouge">set_bit(bitstring, index, new_value)</code></a></td> <td style="text-align: left">Sets the nth bit in bitstring to newvalue; the first (leftmost) bit is indexed 0. Returns a new bitstring.</td> </tr> </tbody> </table> <h4 id="bit_countbitstring"> <a style="text-decoration: none;" href="#bit_countbitstring"><code class="language-plaintext highlighter-rouge">bit_count(bitstring)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Returns the number of set bits in the bitstring.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">bit_count('1101011'::BITSTRING)</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">5</code></td> </tr> </tbody> </table> <h4 id="bit_lengthbitstring"> <a style="text-decoration: none;" href="#bit_lengthbitstring"><code class="language-plaintext highlighter-rouge">bit_length(bitstring)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Returns the number of bits in the bitstring.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">bit_length('1101011'::BITSTRING)</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">7</code></td> </tr> </tbody> </table> <h4 id="bit_positionsubstring-bitstring"> <a style="text-decoration: none;" href="#bit_positionsubstring-bitstring"><code class="language-plaintext highlighter-rouge">bit_position(substring, bitstring)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Returns first starting index of the specified substring within bits, or zero if it's not present. The first (leftmost) bit is indexed 1</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">bit_position('010'::BITSTRING, '1110101'::BITSTRING)</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">4</code></td> </tr> </tbody> </table> <h4 id="bitstringbitstring-length"> <a style="text-decoration: none;" href="#bitstringbitstring-length"><code class="language-plaintext highlighter-rouge">bitstring(bitstring, length)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Returns a bitstring of determined length.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">bitstring('1010'::BITSTRING, 7)</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">0001010</code></td> </tr> </tbody> </table> <h4 id="get_bitbitstring-index"> <a style="text-decoration: none;" href="#get_bitbitstring-index"><code class="language-plaintext highlighter-rouge">get_bit(bitstring, index)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Extracts the nth bit from bitstring; the first (leftmost) bit is indexed 0.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">get_bit('0110010'::BITSTRING, 2)</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">1</code></td> </tr> </tbody> </table> <h4 id="lengthbitstring"> <a style="text-decoration: none;" href="#lengthbitstring"><code class="language-plaintext highlighter-rouge">length(bitstring)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Alias for <code class="language-plaintext highlighter-rouge">bit_length</code>.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">length('1101011'::BITSTRING)</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">7</code></td> </tr> </tbody> </table> <h4 id="octet_lengthbitstring"> <a style="text-decoration: none;" href="#octet_lengthbitstring"><code class="language-plaintext highlighter-rouge">octet_length(bitstring)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Returns the number of bytes in the bitstring.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">octet_length('1101011'::BITSTRING)</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">1</code></td> </tr> </tbody> </table> <h4 id="set_bitbitstring-index-new_value"> <a style="text-decoration: none;" href="#set_bitbitstring-index-new_value"><code class="language-plaintext highlighter-rouge">set_bit(bitstring, index, new_value)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Sets the nth bit in bitstring to newvalue; the first (leftmost) bit is indexed 0. Returns a new bitstring.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">set_bit('0110010'::BITSTRING, 2, 0)</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">0100010</code></td> </tr> </tbody> </table> <h2 id="bitstring-aggregate-functions"> <a style="text-decoration: none;" href="#bitstring-aggregate-functions">Bitstring Aggregate Functions</a> </h2> <p>These aggregate functions are available for <code class="language-plaintext highlighter-rouge">BIT</code> type.</p> <table> <thead> <tr> <th style="text-align: left">Name</th> <th style="text-align: left">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><a href="#bit_andarg"><code class="language-plaintext highlighter-rouge">bit_and(arg)</code></a></td> <td style="text-align: left">Returns the bitwise AND operation performed on all bitstrings in a given expression.</td> </tr> <tr> <td style="text-align: left"><a href="#bit_orarg"><code class="language-plaintext highlighter-rouge">bit_or(arg)</code></a></td> <td style="text-align: left">Returns the bitwise OR operation performed on all bitstrings in a given expression.</td> </tr> <tr> <td style="text-align: left"><a href="#bit_xorarg"><code class="language-plaintext highlighter-rouge">bit_xor(arg)</code></a></td> <td style="text-align: left">Returns the bitwise XOR operation performed on all bitstrings in a given expression.</td> </tr> <tr> <td style="text-align: left"><a href="#bitstring_aggarg"><code class="language-plaintext highlighter-rouge">bitstring_agg(arg)</code></a></td> <td style="text-align: left">Returns a bitstring with bits set for each distinct position defined in <code class="language-plaintext highlighter-rouge">arg</code>.</td> </tr> <tr> <td style="text-align: left"><a href="#bitstring_aggarg-min-max"><code class="language-plaintext highlighter-rouge">bitstring_agg(arg, min, max)</code></a></td> <td style="text-align: left">Returns a bitstring with bits set for each distinct position defined in <code class="language-plaintext highlighter-rouge">arg</code>. All positions must be within the range [<code class="language-plaintext highlighter-rouge">min</code>, <code class="language-plaintext highlighter-rouge">max</code>] or an <code class="language-plaintext highlighter-rouge">Out of Range Error</code> will be thrown.</td> </tr> </tbody> </table> <h4 id="bit_andarg"> <a style="text-decoration: none;" href="#bit_andarg"><code class="language-plaintext highlighter-rouge">bit_and(arg)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Returns the bitwise AND operation performed on all bitstrings in a given expression.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">bit_and(A)</code></td> </tr> </tbody> </table> <h4 id="bit_orarg"> <a style="text-decoration: none;" href="#bit_orarg"><code class="language-plaintext highlighter-rouge">bit_or(arg)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Returns the bitwise OR operation performed on all bitstrings in a given expression.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">bit_or(A)</code></td> </tr> </tbody> </table> <h4 id="bit_xorarg"> <a style="text-decoration: none;" href="#bit_xorarg"><code class="language-plaintext highlighter-rouge">bit_xor(arg)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Returns the bitwise XOR operation performed on all bitstrings in a given expression.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">bit_xor(A)</code></td> </tr> </tbody> </table> <h4 id="bitstring_aggarg"> <a style="text-decoration: none;" href="#bitstring_aggarg"><code class="language-plaintext highlighter-rouge">bitstring_agg(arg)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>The <code class="language-plaintext highlighter-rouge">bitstring_agg</code> function takes any integer type as input and returns a bitstring with bits set for each distinct value. The left-most bit represents the smallest value in the column and the right-most bit the maximum value. If possible, the min and max are retrieved from the column statistics. Otherwise, it is also possible to provide the min and max values.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">bitstring_agg(A)</code></td> </tr> </tbody> </table> <blockquote> <p>Tip The combination of <code class="language-plaintext highlighter-rouge">bit_count</code> and <code class="language-plaintext highlighter-rouge">bitstring_agg</code> can be used as an alternative to <code class="language-plaintext highlighter-rouge">count(DISTINCT ...)</code>, with possible performance improvements in cases of low cardinality and dense values.</p> </blockquote> <h4 id="bitstring_aggarg-min-max"> <a style="text-decoration: none;" href="#bitstring_aggarg-min-max"><code class="language-plaintext highlighter-rouge">bitstring_agg(arg, min, max)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Returns a bitstring with bits set for each distinct position defined in <code class="language-plaintext highlighter-rouge">arg</code>. All positions must be within the range [<code class="language-plaintext highlighter-rouge">min</code>, <code class="language-plaintext highlighter-rouge">max</code>] or an <code class="language-plaintext highlighter-rouge">Out of Range Error</code> will be thrown.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">bitstring_agg(A, 1, 42)</code></td> </tr> </tbody> </table><div class="_attribution">
  <p class="_attribution-p">
    &copy; Copyright 2018&ndash;2024 Stichting DuckDB Foundation<br>Licensed under the MIT License.<br>
    <a href="https://duckdb.org/docs/sql/functions/bitstring.html" class="_attribution-link">https://duckdb.org/docs/sql/functions/bitstring.html</a>
  </p>
</div>
