<h1 class="title">Aggregate Functions</h1>   <h2 id="examples"> <a style="text-decoration: none;" href="#examples">Examples</a> </h2> <p>Produce a single row containing the sum of the <code class="language-plaintext highlighter-rouge">amount</code> column:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT sum(amount)
FROM sales;</pre> <p>Produce one row per unique region, containing the sum of <code class="language-plaintext highlighter-rouge">amount</code> for each group:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT region, sum(amount)
FROM sales
GROUP BY region;</pre> <p>Return only the regions that have a sum of <code class="language-plaintext highlighter-rouge">amount</code> higher than 100:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT region
FROM sales
GROUP BY region
HAVING sum(amount) &gt; 100;</pre> <p>Return the number of unique values in the <code class="language-plaintext highlighter-rouge">region</code> column:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT count(DISTINCT region)
FROM sales;</pre> <p>Return two values, the total sum of <code class="language-plaintext highlighter-rouge">amount</code> and the sum of <code class="language-plaintext highlighter-rouge">amount</code> minus columns where the region is <code class="language-plaintext highlighter-rouge">north</code> using the <a href="../query_syntax/filter.html"><code class="language-plaintext highlighter-rouge">FILTER</code> clause</a>:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT sum(amount), sum(amount) FILTER (region != 'north')
FROM sales;</pre> <p>Returns a list of all regions in order of the <code class="language-plaintext highlighter-rouge">amount</code> column:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT list(region ORDER BY amount DESC)
FROM sales;</pre> <p>Returns the amount of the first sale using the <code class="language-plaintext highlighter-rouge">first()</code> aggregate function:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT first(amount ORDER BY date ASC)
FROM sales;</pre> <h2 id="syntax"> <a style="text-decoration: none;" href="#syntax">Syntax</a> </h2>  <p>Aggregates are functions that <em>combine</em> multiple rows into a single value. Aggregates are different from scalar functions and window functions because they change the cardinality of the result. As such, aggregates can only be used in the <code class="language-plaintext highlighter-rouge">SELECT</code> and <code class="language-plaintext highlighter-rouge">HAVING</code> clauses of a SQL query.</p> <h3 id="distinct-clause-in-aggregate-functions"> <a style="text-decoration: none;" href="#distinct-clause-in-aggregate-functions"><code class="language-plaintext highlighter-rouge">DISTINCT</code> Clause in Aggregate Functions</a> </h3> <p>When the <code class="language-plaintext highlighter-rouge">DISTINCT</code> clause is provided, only distinct values are considered in the computation of the aggregate. This is typically used in combination with the <code class="language-plaintext highlighter-rouge">count</code> aggregate to get the number of distinct elements; but it can be used together with any aggregate function in the system.</p> <h3 id="order-by-clause-in-aggregate-functions"> <a style="text-decoration: none;" href="#order-by-clause-in-aggregate-functions"><code class="language-plaintext highlighter-rouge">ORDER BY</code> Clause in Aggregate Functions</a> </h3> <p>An <code class="language-plaintext highlighter-rouge">ORDER BY</code> clause can be provided after the last argument of the function call. Note the lack of the comma separator before the clause.</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT ⟨aggregate_function⟩(⟨arg⟩, ⟨sep⟩ ORDER BY ⟨ordering_criteria⟩);</pre> <p>This clause ensures that the values being aggregated are sorted before applying the function. Most aggregate functions are order-insensitive, and for them this clause is parsed and discarded. However, there are some order-sensitive aggregates that can have non-deterministic results without ordering, e.g., <code class="language-plaintext highlighter-rouge">first</code>, <code class="language-plaintext highlighter-rouge">last</code>, <code class="language-plaintext highlighter-rouge">list</code> and <code class="language-plaintext highlighter-rouge">string_agg</code> / <code class="language-plaintext highlighter-rouge">group_concat</code> / <code class="language-plaintext highlighter-rouge">listagg</code>. These can be made deterministic by ordering the arguments.</p> <p>For example:</p> <pre class="language-sql highlighter-rouge" data-language="sql">CREATE TABLE tbl AS
    SELECT s FROM range(1, 4) r(s);

SELECT string_agg(s, ', ' ORDER BY s DESC) AS countdown
FROM tbl;</pre> <table> <thead> <tr> <th>countdown</th> </tr> </thead> <tbody> <tr> <td>3, 2, 1</td> </tr> </tbody> </table> <h2 id="general-aggregate-functions"> <a style="text-decoration: none;" href="#general-aggregate-functions">General Aggregate Functions</a> </h2> <p>The table below shows the available general aggregate functions.</p> <table> <thead> <tr> <th style="text-align: left">Function</th> <th style="text-align: left">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><a href="#any_valuearg"><code class="language-plaintext highlighter-rouge">any_value(arg)</code></a></td> <td style="text-align: left">Returns the first non-null value from <code class="language-plaintext highlighter-rouge">arg</code>. This function is <a href="#order-by-clause-in-aggregate-functions">affected by ordering</a>.</td> </tr> <tr> <td style="text-align: left"><a href="#arbitraryarg"><code class="language-plaintext highlighter-rouge">arbitrary(arg)</code></a></td> <td style="text-align: left">Returns the first value (null or non-null) from <code class="language-plaintext highlighter-rouge">arg</code>. This function is <a href="#order-by-clause-in-aggregate-functions">affected by ordering</a>.</td> </tr> <tr> <td style="text-align: left"><a href="#arg_maxarg-val"><code class="language-plaintext highlighter-rouge">arg_max(arg, val)</code></a></td> <td style="text-align: left">Finds the row with the maximum <code class="language-plaintext highlighter-rouge">val</code> and calculates the <code class="language-plaintext highlighter-rouge">arg</code> expression at that row. Rows where the value of the <code class="language-plaintext highlighter-rouge">arg</code> or <code class="language-plaintext highlighter-rouge">val</code> expression is <code class="language-plaintext highlighter-rouge">NULL</code> are ignored. This function is <a href="#order-by-clause-in-aggregate-functions">affected by ordering</a>.</td> </tr> <tr> <td style="text-align: left"><a href="#arg_maxarg-val-n"><code class="language-plaintext highlighter-rouge">arg_max(arg, val, n)</code></a></td> <td style="text-align: left">The generalized case of <a href="#arg_maxarg-val"><code class="language-plaintext highlighter-rouge">arg_max</code></a> for <code class="language-plaintext highlighter-rouge">n</code> values: returns a <code class="language-plaintext highlighter-rouge">LIST</code> containing the <code class="language-plaintext highlighter-rouge">arg</code> expressions for the top <code class="language-plaintext highlighter-rouge">n</code> rows ordered by <code class="language-plaintext highlighter-rouge">val</code> descending. This function is <a href="#order-by-clause-in-aggregate-functions">affected by ordering</a>.</td> </tr> <tr> <td style="text-align: left"><a href="#arg_max_nullarg-val"><code class="language-plaintext highlighter-rouge">arg_max_null(arg, val)</code></a></td> <td style="text-align: left">Finds the row with the maximum <code class="language-plaintext highlighter-rouge">val</code> and calculates the <code class="language-plaintext highlighter-rouge">arg</code> expression at that row. Rows where the <code class="language-plaintext highlighter-rouge">val</code> expression evaluates to <code class="language-plaintext highlighter-rouge">NULL</code> are ignored. This function is <a href="#order-by-clause-in-aggregate-functions">affected by ordering</a>.</td> </tr> <tr> <td style="text-align: left"><a href="#arg_minarg-val"><code class="language-plaintext highlighter-rouge">arg_min(arg, val)</code></a></td> <td style="text-align: left">Finds the row with the minimum <code class="language-plaintext highlighter-rouge">val</code> and calculates the <code class="language-plaintext highlighter-rouge">arg</code> expression at that row. Rows where the value of the <code class="language-plaintext highlighter-rouge">arg</code> or <code class="language-plaintext highlighter-rouge">val</code> expression is <code class="language-plaintext highlighter-rouge">NULL</code> are ignored. This function is <a href="#order-by-clause-in-aggregate-functions">affected by ordering</a>.</td> </tr> <tr> <td style="text-align: left"><a href="#arg_minarg-val-n"><code class="language-plaintext highlighter-rouge">arg_min(arg, val, n)</code></a></td> <td style="text-align: left">Returns a <code class="language-plaintext highlighter-rouge">LIST</code> containing the <code class="language-plaintext highlighter-rouge">arg</code> expressions for the "bottom" <code class="language-plaintext highlighter-rouge">n</code> rows ordered by <code class="language-plaintext highlighter-rouge">val</code> ascending. This function is <a href="#order-by-clause-in-aggregate-functions">affected by ordering</a>.</td> </tr> <tr> <td style="text-align: left"><a href="#arg_min_nullarg-val"><code class="language-plaintext highlighter-rouge">arg_min_null(arg, val)</code></a></td> <td style="text-align: left">Finds the row with the minimum <code class="language-plaintext highlighter-rouge">val</code> and calculates the <code class="language-plaintext highlighter-rouge">arg</code> expression at that row. Rows where the <code class="language-plaintext highlighter-rouge">val</code> expression evaluates to <code class="language-plaintext highlighter-rouge">NULL</code> are ignored. This function is <a href="#order-by-clause-in-aggregate-functions">affected by ordering</a>.</td> </tr> <tr> <td style="text-align: left"><a href="#array_aggarg"><code class="language-plaintext highlighter-rouge">array_agg(arg)</code></a></td> <td style="text-align: left">Returns a <code class="language-plaintext highlighter-rouge">LIST</code> containing all the values of a column. This function is <a href="#order-by-clause-in-aggregate-functions">affected by ordering</a>.</td> </tr> <tr> <td style="text-align: left"><a href="#avgarg"><code class="language-plaintext highlighter-rouge">avg(arg)</code></a></td> <td style="text-align: left">Calculates the average of all non-null values in <code class="language-plaintext highlighter-rouge">arg</code>.</td> </tr> <tr> <td style="text-align: left"><a href="#bit_andarg"><code class="language-plaintext highlighter-rouge">bit_and(arg)</code></a></td> <td style="text-align: left">Returns the bitwise AND of all bits in a given expression.</td> </tr> <tr> <td style="text-align: left"><a href="#bit_orarg"><code class="language-plaintext highlighter-rouge">bit_or(arg)</code></a></td> <td style="text-align: left">Returns the bitwise OR of all bits in a given expression.</td> </tr> <tr> <td style="text-align: left"><a href="#bit_xorarg"><code class="language-plaintext highlighter-rouge">bit_xor(arg)</code></a></td> <td style="text-align: left">Returns the bitwise XOR of all bits in a given expression.</td> </tr> <tr> <td style="text-align: left"><a href="#bitstring_aggarg"><code class="language-plaintext highlighter-rouge">bitstring_agg(arg)</code></a></td> <td style="text-align: left">Returns a bitstring whose length corresponds to the range of the non-null (integer) values, with bits set at the location of each (distinct) value.</td> </tr> <tr> <td style="text-align: left"><a href="#bool_andarg"><code class="language-plaintext highlighter-rouge">bool_and(arg)</code></a></td> <td style="text-align: left">Returns <code class="language-plaintext highlighter-rouge">true</code> if every input value is <code class="language-plaintext highlighter-rouge">true</code>, otherwise <code class="language-plaintext highlighter-rouge">false</code>.</td> </tr> <tr> <td style="text-align: left"><a href="#bool_orarg"><code class="language-plaintext highlighter-rouge">bool_or(arg)</code></a></td> <td style="text-align: left">Returns <code class="language-plaintext highlighter-rouge">true</code> if any input value is <code class="language-plaintext highlighter-rouge">true</code>, otherwise <code class="language-plaintext highlighter-rouge">false</code>.</td> </tr> <tr> <td style="text-align: left"><a href="#countarg"><code class="language-plaintext highlighter-rouge">count()</code></a></td> <td style="text-align: left">Returns the number of rows in a group.</td> </tr> <tr> <td style="text-align: left"><a href="#countarg"><code class="language-plaintext highlighter-rouge">count(arg)</code></a></td> <td style="text-align: left">Returns the number of non-null values in <code class="language-plaintext highlighter-rouge">arg</code>.</td> </tr> <tr> <td style="text-align: left"><a href="#favgarg"><code class="language-plaintext highlighter-rouge">favg(arg)</code></a></td> <td style="text-align: left">Calculates the average using a more accurate floating point summation (Kahan Sum).</td> </tr> <tr> <td style="text-align: left"><a href="#firstarg"><code class="language-plaintext highlighter-rouge">first(arg)</code></a></td> <td style="text-align: left">Returns the first value (null or non-null) from <code class="language-plaintext highlighter-rouge">arg</code>. This function is <a href="#order-by-clause-in-aggregate-functions">affected by ordering</a>.</td> </tr> <tr> <td style="text-align: left"><a href="#fsumarg"><code class="language-plaintext highlighter-rouge">fsum(arg)</code></a></td> <td style="text-align: left">Calculates the sum using a more accurate floating point summation (Kahan Sum).</td> </tr> <tr> <td style="text-align: left"><a href="#geomeanarg"><code class="language-plaintext highlighter-rouge">geomean(arg)</code></a></td> <td style="text-align: left">Calculates the geometric mean of all non-null values in <code class="language-plaintext highlighter-rouge">arg</code>.</td> </tr> <tr> <td style="text-align: left"><a href="#histogramarg"><code class="language-plaintext highlighter-rouge">histogram(arg)</code></a></td> <td style="text-align: left">Returns a <code class="language-plaintext highlighter-rouge">MAP</code> of key-value pairs representing buckets and counts.</td> </tr> <tr> <td style="text-align: left"><a href="#lastarg"><code class="language-plaintext highlighter-rouge">last(arg)</code></a></td> <td style="text-align: left">Returns the last value of a column. This function is <a href="#order-by-clause-in-aggregate-functions">affected by ordering</a>.</td> </tr> <tr> <td style="text-align: left"><a href="#listarg"><code class="language-plaintext highlighter-rouge">list(arg)</code></a></td> <td style="text-align: left">Returns a <code class="language-plaintext highlighter-rouge">LIST</code> containing all the values of a column. This function is <a href="#order-by-clause-in-aggregate-functions">affected by ordering</a>.</td> </tr> <tr> <td style="text-align: left"><a href="#maxarg"><code class="language-plaintext highlighter-rouge">max(arg)</code></a></td> <td style="text-align: left">Returns the maximum value present in <code class="language-plaintext highlighter-rouge">arg</code>.</td> </tr> <tr> <td style="text-align: left"><a href="#maxarg-n"><code class="language-plaintext highlighter-rouge">max(arg, n)</code></a></td> <td style="text-align: left">Returns a <code class="language-plaintext highlighter-rouge">LIST</code> containing the <code class="language-plaintext highlighter-rouge">arg</code> values for the "top" <code class="language-plaintext highlighter-rouge">n</code> rows ordered by <code class="language-plaintext highlighter-rouge">arg</code> descending.</td> </tr> <tr> <td style="text-align: left"><a href="#max_byarg-val"><code class="language-plaintext highlighter-rouge">max_by(arg, val)</code></a></td> <td style="text-align: left">Finds the row with the maximum <code class="language-plaintext highlighter-rouge">val</code>. Calculates the <code class="language-plaintext highlighter-rouge">arg</code> expression at that row. This function is <a href="#order-by-clause-in-aggregate-functions">affected by ordering</a>.</td> </tr> <tr> <td style="text-align: left"><a href="#max_byarg-val-n"><code class="language-plaintext highlighter-rouge">max_by(arg, val, n)</code></a></td> <td style="text-align: left">Returns a <code class="language-plaintext highlighter-rouge">LIST</code> containing the <code class="language-plaintext highlighter-rouge">arg</code> expressions for the "top" <code class="language-plaintext highlighter-rouge">n</code> rows ordered by <code class="language-plaintext highlighter-rouge">val</code> descending.</td> </tr> <tr> <td style="text-align: left"><a href="#minarg"><code class="language-plaintext highlighter-rouge">min(arg)</code></a></td> <td style="text-align: left">Returns the minimum value present in <code class="language-plaintext highlighter-rouge">arg</code>.</td> </tr> <tr> <td style="text-align: left"><a href="#minarg-n"><code class="language-plaintext highlighter-rouge">min(arg, n)</code></a></td> <td style="text-align: left">Returns a <code class="language-plaintext highlighter-rouge">LIST</code> containing the <code class="language-plaintext highlighter-rouge">arg</code> values for the "bottom" <code class="language-plaintext highlighter-rouge">n</code> rows ordered by <code class="language-plaintext highlighter-rouge">arg</code> ascending.</td> </tr> <tr> <td style="text-align: left"><a href="#min_byarg-val"><code class="language-plaintext highlighter-rouge">min_by(arg, val)</code></a></td> <td style="text-align: left">Finds the row with the minimum <code class="language-plaintext highlighter-rouge">val</code>. Calculates the <code class="language-plaintext highlighter-rouge">arg</code> expression at that row. This function is <a href="#order-by-clause-in-aggregate-functions">affected by ordering</a>.</td> </tr> <tr> <td style="text-align: left"><a href="#min_byarg-val-n"><code class="language-plaintext highlighter-rouge">min_by(arg, val, n)</code></a></td> <td style="text-align: left">Returns a <code class="language-plaintext highlighter-rouge">LIST</code> containing the <code class="language-plaintext highlighter-rouge">arg</code> expressions for the "bottom" <code class="language-plaintext highlighter-rouge">n</code> rows ordered by <code class="language-plaintext highlighter-rouge">val</code> ascending.</td> </tr> <tr> <td style="text-align: left"><a href="#productarg"><code class="language-plaintext highlighter-rouge">product(arg)</code></a></td> <td style="text-align: left">Calculates the product of all non-null values in <code class="language-plaintext highlighter-rouge">arg</code>.</td> </tr> <tr> <td style="text-align: left"><a href="#string_aggarg-sep"><code class="language-plaintext highlighter-rouge">string_agg(arg, sep)</code></a></td> <td style="text-align: left">Concatenates the column string values with a separator. This function is <a href="#order-by-clause-in-aggregate-functions">affected by ordering</a>.</td> </tr> <tr> <td style="text-align: left"><a href="#sumarg"><code class="language-plaintext highlighter-rouge">sum(arg)</code></a></td> <td style="text-align: left">Calculates the sum of all non-null values in <code class="language-plaintext highlighter-rouge">arg</code>.</td> </tr> </tbody> </table> <h4 id="any_valuearg"> <a style="text-decoration: none;" href="#any_valuearg"><code class="language-plaintext highlighter-rouge">any_value(arg)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Returns the first non-<code class="language-plaintext highlighter-rouge">NULL</code> value from <code class="language-plaintext highlighter-rouge">arg</code>. This function is <a href="#order-by-clause-in-aggregate-functions">affected by ordering</a>.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">any_value(A)</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="arbitraryarg"> <a style="text-decoration: none;" href="#arbitraryarg"><code class="language-plaintext highlighter-rouge">arbitrary(arg)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Returns the first value (<code class="language-plaintext highlighter-rouge">NULL</code> or non-<code class="language-plaintext highlighter-rouge">NULL</code>) from <code class="language-plaintext highlighter-rouge">arg</code>. This function is <a href="#order-by-clause-in-aggregate-functions">affected by ordering</a>.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">arbitrary(A)</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td><code class="language-plaintext highlighter-rouge">first(A)</code></td> </tr> </tbody> </table> <h4 id="arg_maxarg-val"> <a style="text-decoration: none;" href="#arg_maxarg-val"><code class="language-plaintext highlighter-rouge">arg_max(arg, val)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Finds the row with the maximum <code class="language-plaintext highlighter-rouge">val</code> and calculates the <code class="language-plaintext highlighter-rouge">arg</code> expression at that row. Rows where the value of the <code class="language-plaintext highlighter-rouge">arg</code> or <code class="language-plaintext highlighter-rouge">val</code> expression is <code class="language-plaintext highlighter-rouge">NULL</code> are ignored. This function is <a href="#order-by-clause-in-aggregate-functions">affected by ordering</a>.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">arg_max(A, B)</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>
<code class="language-plaintext highlighter-rouge">argMax(arg, val)</code>, <code class="language-plaintext highlighter-rouge">max_by(arg, val)</code>
</td> </tr> </tbody> </table> <h4 id="arg_maxarg-val-n"> <a style="text-decoration: none;" href="#arg_maxarg-val-n"><code class="language-plaintext highlighter-rouge">arg_max(arg, val, n)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>The generalized case of <a href="#arg_maxarg-val"><code class="language-plaintext highlighter-rouge">arg_max</code></a> for <code class="language-plaintext highlighter-rouge">n</code> values: returns a <code class="language-plaintext highlighter-rouge">LIST</code> containing the <code class="language-plaintext highlighter-rouge">arg</code> expressions for the top <code class="language-plaintext highlighter-rouge">n</code> rows ordered by <code class="language-plaintext highlighter-rouge">val</code> descending. This function is <a href="#order-by-clause-in-aggregate-functions">affected by ordering</a>.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">arg_max(A, B, 2)</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>
<code class="language-plaintext highlighter-rouge">argMax(arg, val, n)</code>, <code class="language-plaintext highlighter-rouge">max_by(arg, val, n)</code>
</td> </tr> </tbody> </table> <h4 id="arg_max_nullarg-val"> <a style="text-decoration: none;" href="#arg_max_nullarg-val"><code class="language-plaintext highlighter-rouge">arg_max_null(arg, val)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Finds the row with the maximum <code class="language-plaintext highlighter-rouge">val</code> and calculates the <code class="language-plaintext highlighter-rouge">arg</code> expression at that row. Rows where the <code class="language-plaintext highlighter-rouge">val</code> expression evaluates to <code class="language-plaintext highlighter-rouge">NULL</code> are ignored. This function is <a href="#order-by-clause-in-aggregate-functions">affected by ordering</a>.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">arg_max_null(A, B)</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="arg_minarg-val"> <a style="text-decoration: none;" href="#arg_minarg-val"><code class="language-plaintext highlighter-rouge">arg_min(arg, val)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Finds the row with the minimum <code class="language-plaintext highlighter-rouge">val</code> and calculates the <code class="language-plaintext highlighter-rouge">arg</code> expression at that row. Rows where the value of the <code class="language-plaintext highlighter-rouge">arg</code> or <code class="language-plaintext highlighter-rouge">val</code> expression is <code class="language-plaintext highlighter-rouge">NULL</code> are ignored. This function is <a href="#order-by-clause-in-aggregate-functions">affected by ordering</a>.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">arg_min(A, B)</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>
<code class="language-plaintext highlighter-rouge">argmin(arg, val)</code>, <code class="language-plaintext highlighter-rouge">min_by(arg, val)</code>
</td> </tr> </tbody> </table> <h4 id="arg_minarg-val-n"> <a style="text-decoration: none;" href="#arg_minarg-val-n"><code class="language-plaintext highlighter-rouge">arg_min(arg, val, n)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>The generalized case of <a href="#arg_minarg-val"><code class="language-plaintext highlighter-rouge">arg_min</code></a> for <code class="language-plaintext highlighter-rouge">n</code> values: returns a <code class="language-plaintext highlighter-rouge">LIST</code> containing the <code class="language-plaintext highlighter-rouge">arg</code> expressions for the top <code class="language-plaintext highlighter-rouge">n</code> rows ordered by <code class="language-plaintext highlighter-rouge">val</code> descending. This function is <a href="#order-by-clause-in-aggregate-functions">affected by ordering</a>.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">arg_min(A, B, 2)</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>
<code class="language-plaintext highlighter-rouge">argmin(arg, val, n)</code>, <code class="language-plaintext highlighter-rouge">min_by(arg, val, n)</code>
</td> </tr> </tbody> </table> <h4 id="arg_min_nullarg-val"> <a style="text-decoration: none;" href="#arg_min_nullarg-val"><code class="language-plaintext highlighter-rouge">arg_min_null(arg, val)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Finds the row with the minimum <code class="language-plaintext highlighter-rouge">val</code> and calculates the <code class="language-plaintext highlighter-rouge">arg</code> expression at that row. Rows where the <code class="language-plaintext highlighter-rouge">val</code> expression evaluates to <code class="language-plaintext highlighter-rouge">NULL</code> are ignored. This function is <a href="#order-by-clause-in-aggregate-functions">affected by ordering</a>.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">arg_min_null(A, B)</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="array_aggarg"> <a style="text-decoration: none;" href="#array_aggarg"><code class="language-plaintext highlighter-rouge">array_agg(arg)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Returns a <code class="language-plaintext highlighter-rouge">LIST</code> containing all the values of a column. This function is <a href="#order-by-clause-in-aggregate-functions">affected by ordering</a>.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">array_agg(A)</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td><code class="language-plaintext highlighter-rouge">list</code></td> </tr> </tbody> </table> <h4 id="avgarg"> <a style="text-decoration: none;" href="#avgarg"><code class="language-plaintext highlighter-rouge">avg(arg)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Calculates the average of all non-null values in <code class="language-plaintext highlighter-rouge">arg</code>.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">avg(A)</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td><code class="language-plaintext highlighter-rouge">mean</code></td> </tr> </tbody> </table> <h4 id="bit_andarg"> <a style="text-decoration: none;" href="#bit_andarg"><code class="language-plaintext highlighter-rouge">bit_and(arg)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Returns the bitwise <code class="language-plaintext highlighter-rouge">AND</code> of all bits in a given expression.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">bit_and(A)</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="bit_orarg"> <a style="text-decoration: none;" href="#bit_orarg"><code class="language-plaintext highlighter-rouge">bit_or(arg)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Returns the bitwise <code class="language-plaintext highlighter-rouge">OR</code> of all bits in a given expression.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">bit_or(A)</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="bit_xorarg"> <a style="text-decoration: none;" href="#bit_xorarg"><code class="language-plaintext highlighter-rouge">bit_xor(arg)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Returns the bitwise <code class="language-plaintext highlighter-rouge">XOR</code> of all bits in a given expression.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">bit_xor(A)</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="bitstring_aggarg"> <a style="text-decoration: none;" href="#bitstring_aggarg"><code class="language-plaintext highlighter-rouge">bitstring_agg(arg)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Returns a bitstring whose length corresponds to the range of the non-null (integer) values, with bits set at the location of each (distinct) value.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">bitstring_agg(A)</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="bool_andarg"> <a style="text-decoration: none;" href="#bool_andarg"><code class="language-plaintext highlighter-rouge">bool_and(arg)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Returns <code class="language-plaintext highlighter-rouge">true</code> if every input value is <code class="language-plaintext highlighter-rouge">true</code>, otherwise <code class="language-plaintext highlighter-rouge">false</code>.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">bool_and(A)</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="bool_orarg"> <a style="text-decoration: none;" href="#bool_orarg"><code class="language-plaintext highlighter-rouge">bool_or(arg)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Returns <code class="language-plaintext highlighter-rouge">true</code> if any input value is <code class="language-plaintext highlighter-rouge">true</code>, otherwise <code class="language-plaintext highlighter-rouge">false</code>.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">bool_or(A)</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="count"> <a style="text-decoration: none;" href="#count"><code class="language-plaintext highlighter-rouge">count()</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Returns the number of rows in a group.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">count()</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td><code class="language-plaintext highlighter-rouge">count(*)</code></td> </tr> </tbody> </table> <h4 id="countarg"> <a style="text-decoration: none;" href="#countarg"><code class="language-plaintext highlighter-rouge">count(arg)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Returns the number of non-null values in <code class="language-plaintext highlighter-rouge">arg</code>.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">count(A)</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="favgarg"> <a style="text-decoration: none;" href="#favgarg"><code class="language-plaintext highlighter-rouge">favg(arg)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Calculates the average using a more accurate floating point summation (Kahan Sum).</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">favg(A)</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="firstarg"> <a style="text-decoration: none;" href="#firstarg"><code class="language-plaintext highlighter-rouge">first(arg)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Returns the first value (null or non-null) from <code class="language-plaintext highlighter-rouge">arg</code>. This function is <a href="#order-by-clause-in-aggregate-functions">affected by ordering</a>.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">first(A)</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td><code class="language-plaintext highlighter-rouge">arbitrary(A)</code></td> </tr> </tbody> </table> <h4 id="fsumarg"> <a style="text-decoration: none;" href="#fsumarg"><code class="language-plaintext highlighter-rouge">fsum(arg)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Calculates the sum using a more accurate floating point summation (Kahan Sum).</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">fsum(A)</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>
<code class="language-plaintext highlighter-rouge">sumKahan</code>, <code class="language-plaintext highlighter-rouge">kahan_sum</code>
</td> </tr> </tbody> </table> <h4 id="geomeanarg"> <a style="text-decoration: none;" href="#geomeanarg"><code class="language-plaintext highlighter-rouge">geomean(arg)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Calculates the geometric mean of all non-null values in <code class="language-plaintext highlighter-rouge">arg</code>.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">geomean(A)</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td><code class="language-plaintext highlighter-rouge">geometric_mean(A)</code></td> </tr> </tbody> </table> <h4 id="histogramarg"> <a style="text-decoration: none;" href="#histogramarg"><code class="language-plaintext highlighter-rouge">histogram(arg)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Returns a <code class="language-plaintext highlighter-rouge">MAP</code> of key-value pairs representing buckets and counts.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">histogram(A)</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="lastarg"> <a style="text-decoration: none;" href="#lastarg"><code class="language-plaintext highlighter-rouge">last(arg)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Returns the last value of a column. This function is <a href="#order-by-clause-in-aggregate-functions">affected by ordering</a>.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">last(A)</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="listarg"> <a style="text-decoration: none;" href="#listarg"><code class="language-plaintext highlighter-rouge">list(arg)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Returns a <code class="language-plaintext highlighter-rouge">LIST</code> containing all the values of a column. This function is <a href="#order-by-clause-in-aggregate-functions">affected by ordering</a>.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">list(A)</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td><code class="language-plaintext highlighter-rouge">array_agg</code></td> </tr> </tbody> </table> <h4 id="maxarg"> <a style="text-decoration: none;" href="#maxarg"><code class="language-plaintext highlighter-rouge">max(arg)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Returns the maximum value present in <code class="language-plaintext highlighter-rouge">arg</code>.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">max(A)</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="maxarg-n"> <a style="text-decoration: none;" href="#maxarg-n"><code class="language-plaintext highlighter-rouge">max(arg, n)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Returns a <code class="language-plaintext highlighter-rouge">LIST</code> containing the <code class="language-plaintext highlighter-rouge">arg</code> values for the "top" <code class="language-plaintext highlighter-rouge">n</code> rows ordered by <code class="language-plaintext highlighter-rouge">arg</code> descending.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">max(A, 2)</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="max_byarg-val"> <a style="text-decoration: none;" href="#max_byarg-val"><code class="language-plaintext highlighter-rouge">max_by(arg, val)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Finds the row with the maximum <code class="language-plaintext highlighter-rouge">val</code>. Calculates the <code class="language-plaintext highlighter-rouge">arg</code> expression at that row. This function is <a href="#order-by-clause-in-aggregate-functions">affected by ordering</a>.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">max_by(A, B)</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>
<code class="language-plaintext highlighter-rouge">argMax(arg, val)</code>, <code class="language-plaintext highlighter-rouge">arg_max(arg, val)</code>
</td> </tr> </tbody> </table> <h4 id="max_byarg-val-n"> <a style="text-decoration: none;" href="#max_byarg-val-n"><code class="language-plaintext highlighter-rouge">max_by(arg, val, n)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Returns a <code class="language-plaintext highlighter-rouge">LIST</code> containing the <code class="language-plaintext highlighter-rouge">arg</code> expressions for the "top" <code class="language-plaintext highlighter-rouge">n</code> rows ordered by <code class="language-plaintext highlighter-rouge">val</code> descending.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">max_by_n(A, B, 2)</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>
<code class="language-plaintext highlighter-rouge">argMax(arg, val, n)</code>, <code class="language-plaintext highlighter-rouge">arg_max(arg, val, n)</code>
</td> </tr> </tbody> </table> <h4 id="minarg"> <a style="text-decoration: none;" href="#minarg"><code class="language-plaintext highlighter-rouge">min(arg)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Returns the minimum value present in <code class="language-plaintext highlighter-rouge">arg</code>.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">min(A)</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="minarg-n"> <a style="text-decoration: none;" href="#minarg-n"><code class="language-plaintext highlighter-rouge">min(arg, n)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Returns a <code class="language-plaintext highlighter-rouge">LIST</code> containing the <code class="language-plaintext highlighter-rouge">arg</code> values for the "bottom" <code class="language-plaintext highlighter-rouge">n</code> rows ordered by <code class="language-plaintext highlighter-rouge">arg</code> ascending.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">min(A, 2)</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="min_byarg-val"> <a style="text-decoration: none;" href="#min_byarg-val"><code class="language-plaintext highlighter-rouge">min_by(arg, val)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Finds the row with the minimum <code class="language-plaintext highlighter-rouge">val</code>. Calculates the <code class="language-plaintext highlighter-rouge">arg</code> expression at that row. This function is <a href="#order-by-clause-in-aggregate-functions">affected by ordering</a>.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">min_by(A, B)</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>
<code class="language-plaintext highlighter-rouge">argMin(arg, val)</code>, <code class="language-plaintext highlighter-rouge">arg_min(arg, val)</code>
</td> </tr> </tbody> </table> <h4 id="min_byarg-val-n"> <a style="text-decoration: none;" href="#min_byarg-val-n"><code class="language-plaintext highlighter-rouge">min_by(arg, val, n)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Returns a <code class="language-plaintext highlighter-rouge">LIST</code> containing the <code class="language-plaintext highlighter-rouge">arg</code> expressions for the "bottom" <code class="language-plaintext highlighter-rouge">n</code> rows ordered by <code class="language-plaintext highlighter-rouge">val</code> ascending.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">min_by(A, B, 2)</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>
<code class="language-plaintext highlighter-rouge">argMin(arg, val, n)</code>, <code class="language-plaintext highlighter-rouge">arg_min(arg, val, n)</code>
</td> </tr> </tbody> </table> <h4 id="productarg"> <a style="text-decoration: none;" href="#productarg"><code class="language-plaintext highlighter-rouge">product(arg)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Calculates the product of all non-null values in <code class="language-plaintext highlighter-rouge">arg</code>.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">product(A)</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="string_aggarg-sep"> <a style="text-decoration: none;" href="#string_aggarg-sep"><code class="language-plaintext highlighter-rouge">string_agg(arg, sep)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Concatenates the column string values with a separator. This function is <a href="#order-by-clause-in-aggregate-functions">affected by ordering</a>.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">string_agg(S, ',')</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>
<code class="language-plaintext highlighter-rouge">group_concat(arg, sep)</code>, <code class="language-plaintext highlighter-rouge">listagg(arg, sep)</code>
</td> </tr> </tbody> </table> <h4 id="sumarg"> <a style="text-decoration: none;" href="#sumarg"><code class="language-plaintext highlighter-rouge">sum(arg)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Calculates the sum of all non-null values in <code class="language-plaintext highlighter-rouge">arg</code>.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">sum(A)</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h3 id="handling-null-values"> <a style="text-decoration: none;" href="#handling-null-values">Handling <code class="language-plaintext highlighter-rouge">NULL</code> Values</a> </h3> <p>All general aggregate functions except for <a href="#listarg"><code class="language-plaintext highlighter-rouge">list</code></a> and <a href="#firstarg"><code class="language-plaintext highlighter-rouge">first</code></a> (and their aliases <a href="#array_aggarg"><code class="language-plaintext highlighter-rouge">array_agg</code></a> and <a href="#arbitraryarg"><code class="language-plaintext highlighter-rouge">arbitrary</code></a>, respectively) ignore <code class="language-plaintext highlighter-rouge">NULL</code>s. To exclude <code class="language-plaintext highlighter-rouge">NULL</code>s from <code class="language-plaintext highlighter-rouge">list</code>, you can use a <a href="../query_syntax/filter.html"><code class="language-plaintext highlighter-rouge">FILTER</code> clause</a>. To ignore <code class="language-plaintext highlighter-rouge">NULL</code>s from <code class="language-plaintext highlighter-rouge">first</code>, you can use the <a href="#any_valuearg"><code class="language-plaintext highlighter-rouge">any_value</code> aggregate</a>.</p> <p>All general aggregate functions except <a href="#countarg"><code class="language-plaintext highlighter-rouge">count</code></a> return <code class="language-plaintext highlighter-rouge">NULL</code> on empty groups and groups without non-<code class="language-plaintext highlighter-rouge">NULL</code> inputs. In particular, <a href="#listarg"><code class="language-plaintext highlighter-rouge">list</code></a> does <em>not</em> return an empty list, <a href="#sumarg"><code class="language-plaintext highlighter-rouge">sum</code></a> does <em>not</em> return zero, and <a href="#string_aggarg-sep"><code class="language-plaintext highlighter-rouge">string_agg</code></a> does <em>not</em> return an empty string in this case.</p> <h2 id="approximate-aggregates"> <a style="text-decoration: none;" href="#approximate-aggregates">Approximate Aggregates</a> </h2> <p>The table below shows the available approximate aggregate functions.</p> <table> <thead> <tr> <th style="text-align: left">Function</th> <th style="text-align: left">Description</th> <th style="text-align: left">Example</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">approx_count_distinct(x)</code></td> <td style="text-align: left">Gives the approximate count of distinct elements using HyperLogLog.</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">approx_count_distinct(A)</code></td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">approx_quantile(x, pos)</code></td> <td style="text-align: left">Gives the approximate quantile using T-Digest.</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">approx_quantile(A, 0.5)</code></td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">reservoir_quantile(x, quantile, sample_size = 8192)</code></td> <td style="text-align: left">Gives the approximate quantile using reservoir sampling, the sample size is optional and uses 8192 as a default size.</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">reservoir_quantile(A, 0.5, 1024)</code></td> </tr> </tbody> </table> <h2 id="statistical-aggregates"> <a style="text-decoration: none;" href="#statistical-aggregates">Statistical Aggregates</a> </h2> <p>The table below shows the available statistical aggregate functions. They all ignore <code class="language-plaintext highlighter-rouge">NULL</code> values (in the case of a single input column <code class="language-plaintext highlighter-rouge">x</code>), or pairs where either input is <code class="language-plaintext highlighter-rouge">NULL</code> (in the case of two input columns <code class="language-plaintext highlighter-rouge">y</code> and <code class="language-plaintext highlighter-rouge">x</code>).</p> <table> <thead> <tr> <th style="text-align: left">Function</th> <th style="text-align: left">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><a href="#corry-x"><code class="language-plaintext highlighter-rouge">corr(y, x)</code></a></td> <td style="text-align: left">The correlation coefficient.</td> </tr> <tr> <td style="text-align: left"><a href="#covar_popy-x"><code class="language-plaintext highlighter-rouge">covar_pop(y, x)</code></a></td> <td style="text-align: left">The population covariance, which does not include bias correction.</td> </tr> <tr> <td style="text-align: left"><a href="#covar_sampy-x"><code class="language-plaintext highlighter-rouge">covar_samp(y, x)</code></a></td> <td style="text-align: left">The sample covariance, which includes Bessel's bias correction.</td> </tr> <tr> <td style="text-align: left"><a href="#entropyx"><code class="language-plaintext highlighter-rouge">entropy(x)</code></a></td> <td style="text-align: left">The log-2 entropy.</td> </tr> <tr> <td style="text-align: left"><a href="#kurtosis_popx"><code class="language-plaintext highlighter-rouge">kurtosis_pop(x)</code></a></td> <td style="text-align: left">The excess kurtosis (Fisher’s definition) without bias correction.</td> </tr> <tr> <td style="text-align: left"><a href="#kurtosisx"><code class="language-plaintext highlighter-rouge">kurtosis(x)</code></a></td> <td style="text-align: left">The excess kurtosis (Fisher's definition) with bias correction according to the sample size.</td> </tr> <tr> <td style="text-align: left"><a href="#madx"><code class="language-plaintext highlighter-rouge">mad(x)</code></a></td> <td style="text-align: left">The median absolute deviation. Temporal types return a positive <code class="language-plaintext highlighter-rouge">INTERVAL</code>.</td> </tr> <tr> <td style="text-align: left"><a href="#medianx"><code class="language-plaintext highlighter-rouge">median(x)</code></a></td> <td style="text-align: left">The middle value of the set. For even value counts, quantitative values are averaged and ordinal values return the lower value.</td> </tr> <tr> <td style="text-align: left"><a href="#modex"><code class="language-plaintext highlighter-rouge">mode(x)</code></a></td> <td style="text-align: left">The most frequent value.</td> </tr> <tr> <td style="text-align: left"><a href="#quantile_contx-pos"><code class="language-plaintext highlighter-rouge">quantile_cont(x, pos)</code></a></td> <td style="text-align: left">The interpolated <code class="language-plaintext highlighter-rouge">pos</code>-quantile of <code class="language-plaintext highlighter-rouge">x</code> for <code class="language-plaintext highlighter-rouge">0 &lt;= pos &lt;= 1</code>, i.e., orders the values of <code class="language-plaintext highlighter-rouge">x</code> and returns the <code class="language-plaintext highlighter-rouge">pos * (n_nonnull_values - 1)</code>th (zero-indexed) element (or an interpolation between the adjacent elements if the index is not an integer). If <code class="language-plaintext highlighter-rouge">pos</code> is a <code class="language-plaintext highlighter-rouge">LIST</code> of <code class="language-plaintext highlighter-rouge">FLOAT</code>s, then the result is a <code class="language-plaintext highlighter-rouge">LIST</code> of the corresponding interpolated quantiles.</td> </tr> <tr> <td style="text-align: left"><a href="#quantile_discx-pos"><code class="language-plaintext highlighter-rouge">quantile_disc(x, pos)</code></a></td> <td style="text-align: left">The discrete <code class="language-plaintext highlighter-rouge">pos</code>-quantile of <code class="language-plaintext highlighter-rouge">x</code> for <code class="language-plaintext highlighter-rouge">0 &lt;= pos &lt;= 1</code>, i.e., orders the values of <code class="language-plaintext highlighter-rouge">x</code> and returns the <code class="language-plaintext highlighter-rouge">greatest(ceil(pos * n_nonnull_values) - 1, 0)</code>th (zero-indexed) element. If <code class="language-plaintext highlighter-rouge">pos</code> is a <code class="language-plaintext highlighter-rouge">LIST</code> of <code class="language-plaintext highlighter-rouge">FLOAT</code>s, then the result is a <code class="language-plaintext highlighter-rouge">LIST</code> of the corresponding discrete quantiles.</td> </tr> <tr> <td style="text-align: left"><a href="#regr_avgxy-x"><code class="language-plaintext highlighter-rouge">regr_avgx(y, x)</code></a></td> <td style="text-align: left">The average of the independent variable for non-<code class="language-plaintext highlighter-rouge">NULL</code> pairs, where x is the independent variable and y is the dependent variable.</td> </tr> <tr> <td style="text-align: left"><a href="#regr_avgyy-x"><code class="language-plaintext highlighter-rouge">regr_avgy(y, x)</code></a></td> <td style="text-align: left">The average of the dependent variable for non-<code class="language-plaintext highlighter-rouge">NULL</code> pairs, where x is the independent variable and y is the dependent variable.</td> </tr> <tr> <td style="text-align: left"><a href="#regr_county-x"><code class="language-plaintext highlighter-rouge">regr_count(y, x)</code></a></td> <td style="text-align: left">The number of non-<code class="language-plaintext highlighter-rouge">NULL</code> pairs.</td> </tr> <tr> <td style="text-align: left"><a href="#regr_intercepty-x"><code class="language-plaintext highlighter-rouge">regr_intercept(y, x)</code></a></td> <td style="text-align: left">The intercept of the univariate linear regression line, where x is the independent variable and y is the dependent variable.</td> </tr> <tr> <td style="text-align: left"><a href="#regr_r2y-x"><code class="language-plaintext highlighter-rouge">regr_r2(y, x)</code></a></td> <td style="text-align: left">The squared Pearson correlation coefficient between y and x. Also: The coefficient of determination in a linear regression, where x is the independent variable and y is the dependent variable.</td> </tr> <tr> <td style="text-align: left"><a href="#regr_slopey-x"><code class="language-plaintext highlighter-rouge">regr_slope(y, x)</code></a></td> <td style="text-align: left">The slope of the linear regression line, where x is the independent variable and y is the dependent variable.</td> </tr> <tr> <td style="text-align: left"><a href="#regr_sxxy-x"><code class="language-plaintext highlighter-rouge">regr_sxx(y, x)</code></a></td> <td style="text-align: left">The population variance, which includes Bessel's bias correction, of the independent variable for non-<code class="language-plaintext highlighter-rouge">NULL</code> pairs, where x is the independent variable and y is the dependent variable.</td> </tr> <tr> <td style="text-align: left"><a href="#regr_sxyy-x"><code class="language-plaintext highlighter-rouge">regr_sxy(y, x)</code></a></td> <td style="text-align: left">The population covariance, which includes Bessel's bias correction.</td> </tr> <tr> <td style="text-align: left"><a href="#regr_syyy-x"><code class="language-plaintext highlighter-rouge">regr_syy(y, x)</code></a></td> <td style="text-align: left">The population variance, which includes Bessel's bias correction, of the dependent variable for non-<code class="language-plaintext highlighter-rouge">NULL</code> pairs , where x is the independent variable and y is the dependent variable.</td> </tr> <tr> <td style="text-align: left"><a href="#skewnessx"><code class="language-plaintext highlighter-rouge">skewness(x)</code></a></td> <td style="text-align: left">The skewness.</td> </tr> <tr> <td style="text-align: left"><a href="#stddev_popx"><code class="language-plaintext highlighter-rouge">stddev_pop(x)</code></a></td> <td style="text-align: left">The population standard deviation.</td> </tr> <tr> <td style="text-align: left"><a href="#stddev_sampx"><code class="language-plaintext highlighter-rouge">stddev_samp(x)</code></a></td> <td style="text-align: left">The sample standard deviation.</td> </tr> <tr> <td style="text-align: left"><a href="#var_popx"><code class="language-plaintext highlighter-rouge">var_pop(x)</code></a></td> <td style="text-align: left">The population variance, which does not include bias correction.</td> </tr> <tr> <td style="text-align: left"><a href="#var_sampx"><code class="language-plaintext highlighter-rouge">var_samp(x)</code></a></td> <td style="text-align: left">The sample variance, which includes Bessel's bias correction.</td> </tr> </tbody> </table> <h4 id="corry-x"> <a style="text-decoration: none;" href="#corry-x"><code class="language-plaintext highlighter-rouge">corr(y, x)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>The correlation coefficient.</td> </tr> <tr> <td><strong>Formula</strong></td> <td><code class="language-plaintext highlighter-rouge">covar_pop(y, x) / (stddev_pop(x) * stddev_pop(y))</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="covar_popy-x"> <a style="text-decoration: none;" href="#covar_popy-x"><code class="language-plaintext highlighter-rouge">covar_pop(y, x)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>The population covariance, which does not include bias correction.</td> </tr> <tr> <td><strong>Formula</strong></td> <td>
<code class="language-plaintext highlighter-rouge">(sum(x*y) - sum(x) * sum(y) / regr_count(y, x)) / regr_count(y, x)</code>, <code class="language-plaintext highlighter-rouge">covar_samp(y, x) * (1 - 1 / regr_count(y, x))</code>
</td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="covar_sampy-x"> <a style="text-decoration: none;" href="#covar_sampy-x"><code class="language-plaintext highlighter-rouge">covar_samp(y, x)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>The sample covariance, which includes Bessel's bias correction.</td> </tr> <tr> <td><strong>Formula</strong></td> <td>
<code class="language-plaintext highlighter-rouge">(sum(x*y) - sum(x) * sum(y) / regr_count(y, x)) / (regr_count(y, x) - 1)</code>, <code class="language-plaintext highlighter-rouge">covar_pop(y, x) / (1 - 1 / regr_count(y, x))</code>
</td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td><code class="language-plaintext highlighter-rouge">regr_sxy(y, x)</code></td> </tr> </tbody> </table> <h4 id="entropyx"> <a style="text-decoration: none;" href="#entropyx"><code class="language-plaintext highlighter-rouge">entropy(x)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>The log-2 entropy.</td> </tr> <tr> <td><strong>Formula</strong></td> <td>-</td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="kurtosis_popx"> <a style="text-decoration: none;" href="#kurtosis_popx"><code class="language-plaintext highlighter-rouge">kurtosis_pop(x)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>The excess kurtosis (Fisher’s definition) without bias correction.</td> </tr> <tr> <td><strong>Formula</strong></td> <td>-</td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="kurtosisx"> <a style="text-decoration: none;" href="#kurtosisx"><code class="language-plaintext highlighter-rouge">kurtosis(x)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>The excess kurtosis (Fisher's definition) with bias correction according to the sample size.</td> </tr> <tr> <td><strong>Formula</strong></td> <td>-</td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="madx"> <a style="text-decoration: none;" href="#madx"><code class="language-plaintext highlighter-rouge">mad(x)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>The median absolute deviation. Temporal types return a positive <code class="language-plaintext highlighter-rouge">INTERVAL</code>.</td> </tr> <tr> <td><strong>Formula</strong></td> <td><code class="language-plaintext highlighter-rouge">median(abs(x - median(x)))</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="medianx"> <a style="text-decoration: none;" href="#medianx"><code class="language-plaintext highlighter-rouge">median(x)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>The middle value of the set. For even value counts, quantitative values are averaged and ordinal values return the lower value.</td> </tr> <tr> <td><strong>Formula</strong></td> <td><code class="language-plaintext highlighter-rouge">quantile_cont(x, 0.5)</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="modex"> <a style="text-decoration: none;" href="#modex"><code class="language-plaintext highlighter-rouge">mode(x)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>The most frequent value.</td> </tr> <tr> <td><strong>Formula</strong></td> <td>-</td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="quantile_contx-pos"> <a style="text-decoration: none;" href="#quantile_contx-pos"><code class="language-plaintext highlighter-rouge">quantile_cont(x, pos)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>The interpolated <code class="language-plaintext highlighter-rouge">pos</code>-quantile of <code class="language-plaintext highlighter-rouge">x</code> for <code class="language-plaintext highlighter-rouge">0 &lt;= pos &lt;= 1</code>, i.e., orders the values of <code class="language-plaintext highlighter-rouge">x</code> and returns the <code class="language-plaintext highlighter-rouge">pos * (n_nonnull_values - 1)</code>th (zero-indexed) element (or an interpolation between the adjacent elements if the index is not an integer). If <code class="language-plaintext highlighter-rouge">pos</code> is a <code class="language-plaintext highlighter-rouge">LIST</code> of <code class="language-plaintext highlighter-rouge">FLOAT</code>s, then the result is a <code class="language-plaintext highlighter-rouge">LIST</code> of the corresponding interpolated quantiles.</td> </tr> <tr> <td><strong>Formula</strong></td> <td>-</td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="quantile_discx-pos"> <a style="text-decoration: none;" href="#quantile_discx-pos"><code class="language-plaintext highlighter-rouge">quantile_disc(x, pos)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>The discrete <code class="language-plaintext highlighter-rouge">pos</code>-quantile of <code class="language-plaintext highlighter-rouge">x</code> for <code class="language-plaintext highlighter-rouge">0 &lt;= pos &lt;= 1</code>, i.e., orders the values of <code class="language-plaintext highlighter-rouge">x</code> and returns the <code class="language-plaintext highlighter-rouge">greatest(ceil(pos * n_nonnull_values) - 1, 0)</code>th (zero-indexed) element. If <code class="language-plaintext highlighter-rouge">pos</code> is a <code class="language-plaintext highlighter-rouge">LIST</code> of <code class="language-plaintext highlighter-rouge">FLOAT</code>s, then the result is a <code class="language-plaintext highlighter-rouge">LIST</code> of the corresponding discrete quantiles.</td> </tr> <tr> <td><strong>Formula</strong></td> <td>-</td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td><code class="language-plaintext highlighter-rouge">quantile</code></td> </tr> </tbody> </table> <h4 id="regr_avgxy-x"> <a style="text-decoration: none;" href="#regr_avgxy-x"><code class="language-plaintext highlighter-rouge">regr_avgx(y, x)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>The average of the independent variable for non-<code class="language-plaintext highlighter-rouge">NULL</code> pairs, where x is the independent variable and y is the dependent variable.</td> </tr> <tr> <td><strong>Formula</strong></td> <td>-</td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="regr_avgyy-x"> <a style="text-decoration: none;" href="#regr_avgyy-x"><code class="language-plaintext highlighter-rouge">regr_avgy(y, x)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>The average of the dependent variable for non-<code class="language-plaintext highlighter-rouge">NULL</code> pairs, where x is the independent variable and y is the dependent variable.</td> </tr> <tr> <td><strong>Formula</strong></td> <td>-</td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="regr_county-x"> <a style="text-decoration: none;" href="#regr_county-x"><code class="language-plaintext highlighter-rouge">regr_count(y, x)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>The number of non-<code class="language-plaintext highlighter-rouge">NULL</code> pairs.</td> </tr> <tr> <td><strong>Formula</strong></td> <td>-</td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="regr_intercepty-x"> <a style="text-decoration: none;" href="#regr_intercepty-x"><code class="language-plaintext highlighter-rouge">regr_intercept(y, x)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>The intercept of the univariate linear regression line, where x is the independent variable and y is the dependent variable.</td> </tr> <tr> <td><strong>Formula</strong></td> <td><code class="language-plaintext highlighter-rouge">regr_avgy(y, x) - regr_slope(y, x) * regr_avgx(y, x)</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="regr_r2y-x"> <a style="text-decoration: none;" href="#regr_r2y-x"><code class="language-plaintext highlighter-rouge">regr_r2(y, x)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>The squared Pearson correlation coefficient between y and x. Also: The coefficient of determination in a linear regression, where x is the independent variable and y is the dependent variable.</td> </tr> <tr> <td><strong>Formula</strong></td> <td>-</td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="regr_slopey-x"> <a style="text-decoration: none;" href="#regr_slopey-x"><code class="language-plaintext highlighter-rouge">regr_slope(y, x)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Returns the slope of the linear regression line, where x is the independent variable and y is the dependent variable.</td> </tr> <tr> <td><strong>Formula</strong></td> <td><code class="language-plaintext highlighter-rouge">regr_sxy(y, x) / regr_sxx(y, x)</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="regr_sxxy-x"> <a style="text-decoration: none;" href="#regr_sxxy-x"><code class="language-plaintext highlighter-rouge">regr_sxx(y, x)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>The population variance, which includes Bessel's bias correction, of the independent variable for non-<code class="language-plaintext highlighter-rouge">NULL</code> pairs, where x is the independent variable and y is the dependent variable.</td> </tr> <tr> <td><strong>Formula</strong></td> <td>-</td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="regr_sxyy-x"> <a style="text-decoration: none;" href="#regr_sxyy-x"><code class="language-plaintext highlighter-rouge">regr_sxy(y, x)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>The population covariance, which includes Bessel's bias correction.</td> </tr> <tr> <td><strong>Formula</strong></td> <td>-</td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="regr_syyy-x"> <a style="text-decoration: none;" href="#regr_syyy-x"><code class="language-plaintext highlighter-rouge">regr_syy(y, x)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>The population variance, which includes Bessel's bias correction, of the dependent variable for non-<code class="language-plaintext highlighter-rouge">NULL</code> pairs, where x is the independent variable and y is the dependent variable.</td> </tr> <tr> <td><strong>Formula</strong></td> <td>-</td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="skewnessx"> <a style="text-decoration: none;" href="#skewnessx"><code class="language-plaintext highlighter-rouge">skewness(x)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>The skewness.</td> </tr> <tr> <td><strong>Formula</strong></td> <td>-</td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="stddev_popx"> <a style="text-decoration: none;" href="#stddev_popx"><code class="language-plaintext highlighter-rouge">stddev_pop(x)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>The population standard deviation.</td> </tr> <tr> <td><strong>Formula</strong></td> <td><code class="language-plaintext highlighter-rouge">sqrt(var_pop(x))</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="stddev_sampx"> <a style="text-decoration: none;" href="#stddev_sampx"><code class="language-plaintext highlighter-rouge">stddev_samp(x)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>The sample standard deviation.</td> </tr> <tr> <td><strong>Formula</strong></td> <td><code class="language-plaintext highlighter-rouge">sqrt(var_samp(x))</code></td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td><code class="language-plaintext highlighter-rouge">stddev(x)</code></td> </tr> </tbody> </table> <h4 id="var_popx"> <a style="text-decoration: none;" href="#var_popx"><code class="language-plaintext highlighter-rouge">var_pop(x)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>The population variance, which does not include bias correction.</td> </tr> <tr> <td><strong>Formula</strong></td> <td>
<code class="language-plaintext highlighter-rouge">(sum(x^2) - sum(x)^2 / count(x)) / count(x)</code>, <code class="language-plaintext highlighter-rouge">var_samp(y, x) * (1 - 1 / count(x))</code>
</td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td>-</td> </tr> </tbody> </table> <h4 id="var_sampx"> <a style="text-decoration: none;" href="#var_sampx"><code class="language-plaintext highlighter-rouge">var_samp(x)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>The sample variance, which includes Bessel's bias correction.</td> </tr> <tr> <td><strong>Formula</strong></td> <td>
<code class="language-plaintext highlighter-rouge">(sum(x^2) - sum(x)^2 / count(x)) / (count(x) - 1)</code>, <code class="language-plaintext highlighter-rouge">var_pop(y, x) / (1 - 1 / count(x))</code>
</td> </tr> <tr> <td><strong>Alias(es)</strong></td> <td><code class="language-plaintext highlighter-rouge">variance(arg, val)</code></td> </tr> </tbody> </table> <h2 id="ordered-set-aggregate-functions"> <a style="text-decoration: none;" href="#ordered-set-aggregate-functions">Ordered Set Aggregate Functions</a> </h2> <p>The table below shows the available “ordered set” aggregate functions. These functions are specified using the <code class="language-plaintext highlighter-rouge">WITHIN GROUP (ORDER BY sort_expression)</code> syntax, and they are converted to an equivalent aggregate function that takes the ordering expression as the first argument.</p> <table> <thead> <tr> <th style="text-align: left">Function</th> <th style="text-align: left">Equivalent</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><code>mode() WITHIN GROUP (ORDER BY column [(ASC|DESC)])</code></td> <td style="text-align: left"><code>mode(column ORDER BY column [(ASC|DESC)])</code></td> </tr> <tr> <td style="text-align: left"><code>percentile_cont(fraction) WITHIN GROUP (ORDER BY column [(ASC|DESC)])</code></td> <td style="text-align: left"><code>quantile_cont(column, fraction ORDER BY column [(ASC|DESC)])</code></td> </tr> <tr> <td style="text-align: left"><code>percentile_cont(fractions) WITHIN GROUP (ORDER BY column [(ASC|DESC)])</code></td> <td style="text-align: left"><code>quantile_cont(column, fractions ORDER BY column [(ASC|DESC)])</code></td> </tr> <tr> <td style="text-align: left"><code>percentile_disc(fraction) WITHIN GROUP (ORDER BY column [(ASC|DESC)])</code></td> <td style="text-align: left"><code>quantile_disc(column, fraction ORDER BY column [(ASC|DESC)])</code></td> </tr> <tr> <td style="text-align: left"><code>percentile_disc(fractions) WITHIN GROUP (ORDER BY column [(ASC|DESC)])</code></td> <td style="text-align: left"><code>quantile_disc(column, fractions ORDER BY column [(ASC|DESC)])</code></td> </tr> </tbody> </table> <h2 id="miscellaneous-aggregate-functions"> <a style="text-decoration: none;" href="#miscellaneous-aggregate-functions">Miscellaneous Aggregate Functions</a> </h2> <table> <thead> <tr> <th style="text-align: left">Function</th> <th style="text-align: left">Description</th> <th style="text-align: left">Alias</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">grouping()</code></td> <td style="text-align: left">For queries with <code class="language-plaintext highlighter-rouge">GROUP BY</code> and either <a href="../query_syntax/grouping_sets.html#identifying-grouping-sets-with-grouping_id.html"><code class="language-plaintext highlighter-rouge">ROLLUP</code> or <code class="language-plaintext highlighter-rouge">GROUPING SETS</code></a>: Returns an integer identifying which of the argument expressions where used to group on to create the current supper-aggregate row.</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">grouping_id()</code></td> </tr> </tbody> </table><div class="_attribution">
  <p class="_attribution-p">
    &copy; Copyright 2018&ndash;2024 Stichting DuckDB Foundation<br>Licensed under the MIT License.<br>
    <a href="https://duckdb.org/docs/sql/functions/aggregates.html" class="_attribution-link">https://duckdb.org/docs/sql/functions/aggregates.html</a>
  </p>
</div>
