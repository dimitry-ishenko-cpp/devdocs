<h1 class="title">Timestamp with Time Zone Functions</h1>   <p>This section describes functions and operators for examining and manipulating <a href="../data_types/timestamp.html"><code class="language-plaintext highlighter-rouge">TIMESTAMP WITH TIME ZONE</code> (or <code class="language-plaintext highlighter-rouge">TIMESTAMPTZ</code>) values</a>.</p> <p>Despite the name, these values do not store a time zone – just an instant like <code class="language-plaintext highlighter-rouge">TIMESTAMP</code>. Instead, they request that the instant be binned and formatted using the current time zone.</p> <p>Time zone support is not built in but can be provided by an extension, such as the <a href="../../extensions/icu.html">ICU extension</a> that ships with DuckDB.</p> <p>In the examples below, the current time zone is presumed to be <code class="language-plaintext highlighter-rouge">America/Los_Angeles</code> using the Gregorian calendar.</p> <h2 id="built-in-timestamp-with-time-zone-functions"> <a style="text-decoration: none;" href="#built-in-timestamp-with-time-zone-functions">Built-In Timestamp with Time Zone Functions</a> </h2> <p>The table below shows the available scalar functions for <code class="language-plaintext highlighter-rouge">TIMESTAMPTZ</code> values. Since these functions do not involve binning or display, they are always available.</p> <table> <thead> <tr> <th style="text-align: left">Name</th> <th style="text-align: left">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><a href="#current_timestamp"><code class="language-plaintext highlighter-rouge">current_timestamp</code></a></td> <td style="text-align: left">Current date and time (start of current transaction).</td> </tr> <tr> <td style="text-align: left"><a href="#get_current_timestamp"><code class="language-plaintext highlighter-rouge">get_current_timestamp()</code></a></td> <td style="text-align: left">Current date and time (start of current transaction).</td> </tr> <tr> <td style="text-align: left"><a href="#greatesttimestamptz-timestamptz"><code class="language-plaintext highlighter-rouge">greatest(timestamptz, timestamptz)</code></a></td> <td style="text-align: left">The later of two timestamps.</td> </tr> <tr> <td style="text-align: left"><a href="#isfinitetimestamptz"><code class="language-plaintext highlighter-rouge">isfinite(timestamptz)</code></a></td> <td style="text-align: left">Returns true if the timestamp with time zone is finite, false otherwise.</td> </tr> <tr> <td style="text-align: left"><a href="#isinftimestamptz"><code class="language-plaintext highlighter-rouge">isinf(timestamptz)</code></a></td> <td style="text-align: left">Returns true if the timestamp with time zone is infinite, false otherwise.</td> </tr> <tr> <td style="text-align: left"><a href="#leasttimestamptz-timestamptz"><code class="language-plaintext highlighter-rouge">least(timestamptz, timestamptz)</code></a></td> <td style="text-align: left">The earlier of two timestamps.</td> </tr> <tr> <td style="text-align: left"><a href="#now"><code class="language-plaintext highlighter-rouge">now()</code></a></td> <td style="text-align: left">Current date and time (start of current transaction).</td> </tr> <tr> <td style="text-align: left"><a href="#transaction_timestamp"><code class="language-plaintext highlighter-rouge">transaction_timestamp()</code></a></td> <td style="text-align: left">Current date and time (start of current transaction).</td> </tr> </tbody> </table> <h4 id="current_timestamp"> <a style="text-decoration: none;" href="#current_timestamp"><code class="language-plaintext highlighter-rouge">current_timestamp</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Current date and time (start of current transaction).</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">current_timestamp</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">2022-10-08 12:44:46.122-07</code></td> </tr> </tbody> </table> <h4 id="get_current_timestamp"> <a style="text-decoration: none;" href="#get_current_timestamp"><code class="language-plaintext highlighter-rouge">get_current_timestamp()</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Current date and time (start of current transaction).</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">get_current_timestamp()</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">2022-10-08 12:44:46.122-07</code></td> </tr> </tbody> </table> <h4 id="greatesttimestamptz-timestamptz"> <a style="text-decoration: none;" href="#greatesttimestamptz-timestamptz"><code class="language-plaintext highlighter-rouge">greatest(timestamptz, timestamptz)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>The later of two timestamps.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">greatest(TIMESTAMPTZ '1992-09-20 20:38:48', TIMESTAMPTZ '1992-03-22 01:02:03.1234')</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">1992-09-20 20:38:48-07</code></td> </tr> </tbody> </table> <h4 id="isfinitetimestamptz"> <a style="text-decoration: none;" href="#isfinitetimestamptz"><code class="language-plaintext highlighter-rouge">isfinite(timestamptz)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Returns true if the timestamp with time zone is finite, false otherwise.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">isfinite(TIMESTAMPTZ '1992-03-07')</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">true</code></td> </tr> </tbody> </table> <h4 id="isinftimestamptz"> <a style="text-decoration: none;" href="#isinftimestamptz"><code class="language-plaintext highlighter-rouge">isinf(timestamptz)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Returns true if the timestamp with time zone is infinite, false otherwise.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">isinf(TIMESTAMPTZ '-infinity')</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">true</code></td> </tr> </tbody> </table> <h4 id="leasttimestamptz-timestamptz"> <a style="text-decoration: none;" href="#leasttimestamptz-timestamptz"><code class="language-plaintext highlighter-rouge">least(timestamptz, timestamptz)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>The earlier of two timestamps.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">least(TIMESTAMPTZ '1992-09-20 20:38:48', TIMESTAMPTZ '1992-03-22 01:02:03.1234')</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">1992-03-22 01:02:03.1234-08</code></td> </tr> </tbody> </table> <h4 id="now"> <a style="text-decoration: none;" href="#now"><code class="language-plaintext highlighter-rouge">now()</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Current date and time (start of current transaction).</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">now()</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">2022-10-08 12:44:46.122-07</code></td> </tr> </tbody> </table> <h4 id="transaction_timestamp"> <a style="text-decoration: none;" href="#transaction_timestamp"><code class="language-plaintext highlighter-rouge">transaction_timestamp()</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Current date and time (start of current transaction).</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">transaction_timestamp()</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">2022-10-08 12:44:46.122-07</code></td> </tr> </tbody> </table> <h2 id="timestamp-with-time-zone-strings"> <a style="text-decoration: none;" href="#timestamp-with-time-zone-strings">Timestamp with Time Zone Strings</a> </h2> <p>With no time zone extension loaded, <code class="language-plaintext highlighter-rouge">TIMESTAMPTZ</code> values will be cast to and from strings using offset notation. This will let you specify an instant correctly without access to time zone information. For portability, <code class="language-plaintext highlighter-rouge">TIMESTAMPTZ</code> values will always be displayed using GMT offsets:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT '2022-10-08 13:13:34-07'::TIMESTAMPTZ;</pre> <pre class="language-text highlighter-rouge" data-language="text">2022-10-08 20:13:34+00</pre> <p>If a time zone extension such as ICU is loaded, then a time zone can be parsed from a string and cast to a representation in the local time zone:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT '2022-10-08 13:13:34 Europe/Amsterdam'::TIMESTAMPTZ::VARCHAR;</pre> <pre class="language-text highlighter-rouge" data-language="text">2022-10-08 04:13:34-07 -- the offset will differ based on your local time zone</pre> <h2 id="icu-timestamp-with-time-zone-operators"> <a style="text-decoration: none;" href="#icu-timestamp-with-time-zone-operators">ICU Timestamp with Time Zone Operators</a> </h2> <p>The table below shows the available mathematical operators for <code class="language-plaintext highlighter-rouge">TIMESTAMP WITH TIME ZONE</code> values provided by the ICU extension.</p> <table> <thead> <tr> <th style="text-align: left">Operator</th> <th style="text-align: left">Description</th> <th style="text-align: left">Example</th> <th style="text-align: left">Result</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">+</code></td> <td style="text-align: left">addition of an <code class="language-plaintext highlighter-rouge">INTERVAL</code>
</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">TIMESTAMPTZ '1992-03-22 01:02:03' + INTERVAL 5 DAY</code></td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">1992-03-27 01:02:03</code></td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-</code></td> <td style="text-align: left">subtraction of <code class="language-plaintext highlighter-rouge">TIMESTAMPTZ</code>s</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">TIMESTAMPTZ '1992-03-27' - TIMESTAMPTZ '1992-03-22'</code></td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">5 days</code></td> </tr> <tr> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-</code></td> <td style="text-align: left">subtraction of an <code class="language-plaintext highlighter-rouge">INTERVAL</code>
</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">TIMESTAMPTZ '1992-03-27 01:02:03' - INTERVAL 5 DAY</code></td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">1992-03-22 01:02:03</code></td> </tr> </tbody> </table> <p>Adding to or subtracting from <a href="../data_types/timestamp.html#special-values.html">infinite values</a> produces the same infinite value.</p> <h2 id="icu-timestamp-with-time-zone-functions"> <a style="text-decoration: none;" href="#icu-timestamp-with-time-zone-functions">ICU Timestamp with Time Zone Functions</a> </h2> <p>The table below shows the ICU provided scalar functions for <code class="language-plaintext highlighter-rouge">TIMESTAMP WITH TIME ZONE</code> values.</p> <table> <thead> <tr> <th style="text-align: left">Name</th> <th style="text-align: left">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><a href="#agetimestamptz-timestamptz"><code class="language-plaintext highlighter-rouge">age(timestamptz, timestamptz)</code></a></td> <td style="text-align: left">Subtract arguments, resulting in the time difference between the two timestamps.</td> </tr> <tr> <td style="text-align: left"><a href="#agetimestamptz"><code class="language-plaintext highlighter-rouge">age(timestamptz)</code></a></td> <td style="text-align: left">Subtract from current_date.</td> </tr> <tr> <td style="text-align: left"><a href="#date_diffpart-startdate-enddate"><code class="language-plaintext highlighter-rouge">date_diff(part, startdate, enddate)</code></a></td> <td style="text-align: left">The number of <a href="datepart.html">partition</a> boundaries between the timestamps.</td> </tr> <tr> <td style="text-align: left"><a href="#date_partpart--timestamptz"><code class="language-plaintext highlighter-rouge">date_part([part, ...], timestamptz)</code></a></td> <td style="text-align: left">Get the listed <a href="datepart.html">subfields</a> as a <code class="language-plaintext highlighter-rouge">struct</code>. The list must be constant.</td> </tr> <tr> <td style="text-align: left"><a href="#date_partpart-timestamptz"><code class="language-plaintext highlighter-rouge">date_part(part, timestamptz)</code></a></td> <td style="text-align: left">Get <a href="datepart.html">subfield</a> (equivalent to <em>extract</em>).</td> </tr> <tr> <td style="text-align: left"><a href="#date_subpart-startdate-enddate"><code class="language-plaintext highlighter-rouge">date_sub(part, startdate, enddate)</code></a></td> <td style="text-align: left">The number of complete <a href="datepart.html">partitions</a> between the timestamps.</td> </tr> <tr> <td style="text-align: left"><a href="#date_truncpart-timestamptz"><code class="language-plaintext highlighter-rouge">date_trunc(part, timestamptz)</code></a></td> <td style="text-align: left">Truncate to specified <a href="datepart.html">precision</a>.</td> </tr> <tr> <td style="text-align: left"><a href="#datediffpart-startdate-enddate"><code class="language-plaintext highlighter-rouge">datediff(part, startdate, enddate)</code></a></td> <td style="text-align: left">Alias of date_diff. The number of <a href="datepart.html">partition</a> boundaries between the timestamps.</td> </tr> <tr> <td style="text-align: left"><a href="#datepartpart--timestamptz"><code class="language-plaintext highlighter-rouge">datepart([part, ...], timestamptz)</code></a></td> <td style="text-align: left">Alias of date_part. Get the listed <a href="datepart.html">subfields</a> as a <code class="language-plaintext highlighter-rouge">struct</code>. The list must be constant.</td> </tr> <tr> <td style="text-align: left"><a href="#datepartpart-timestamptz"><code class="language-plaintext highlighter-rouge">datepart(part, timestamptz)</code></a></td> <td style="text-align: left">Alias of date_part. Get <a href="datepart.html">subfield</a> (equivalent to <em>extract</em>).</td> </tr> <tr> <td style="text-align: left"><a href="#datesubpart-startdate-enddate"><code class="language-plaintext highlighter-rouge">datesub(part, startdate, enddate)</code></a></td> <td style="text-align: left">Alias of date_sub. The number of complete <a href="datepart.html">partitions</a> between the timestamps.</td> </tr> <tr> <td style="text-align: left"><a href="#datetruncpart-timestamptz"><code class="language-plaintext highlighter-rouge">datetrunc(part, timestamptz)</code></a></td> <td style="text-align: left">Alias of date_trunc. Truncate to specified <a href="datepart.html">precision</a>.</td> </tr> <tr> <td style="text-align: left"><a href="#epoch_mstimestamptz"><code class="language-plaintext highlighter-rouge">epoch_ms(timestamptz)</code></a></td> <td style="text-align: left">Converts a timestamptz to milliseconds since the epoch.</td> </tr> <tr> <td style="text-align: left"><a href="#epoch_nstimestamptz"><code class="language-plaintext highlighter-rouge">epoch_ns(timestamptz)</code></a></td> <td style="text-align: left">Converts a timestamptz to nanoseconds since the epoch.</td> </tr> <tr> <td style="text-align: left"><a href="#epoch_ustimestamptz"><code class="language-plaintext highlighter-rouge">epoch_us(timestamptz)</code></a></td> <td style="text-align: left">Converts a timestamptz to microseconds since the epoch.</td> </tr> <tr> <td style="text-align: left"><a href="#extractfield-from-timestamptz"><code class="language-plaintext highlighter-rouge">extract(field FROM timestamptz)</code></a></td> <td style="text-align: left">Get <a href="datepart.html">subfield</a> from a <code class="language-plaintext highlighter-rouge">TIMESTAMP WITH TIME ZONE</code>.</td> </tr> <tr> <td style="text-align: left"><a href="#last_daytimestamptz"><code class="language-plaintext highlighter-rouge">last_day(timestamptz)</code></a></td> <td style="text-align: left">The last day of the month.</td> </tr> <tr> <td style="text-align: left"><a href="#make_timestamptzbigint-bigint-bigint-bigint-bigint-double-string"><code class="language-plaintext highlighter-rouge">make_timestamptz(bigint, bigint, bigint, bigint, bigint, double, string)</code></a></td> <td style="text-align: left">The <code class="language-plaintext highlighter-rouge">TIMESTAMP WITH TIME ZONE</code> for the given parts and time zone.</td> </tr> <tr> <td style="text-align: left"><a href="#make_timestamptzbigint-bigint-bigint-bigint-bigint-double"><code class="language-plaintext highlighter-rouge">make_timestamptz(bigint, bigint, bigint, bigint, bigint, double)</code></a></td> <td style="text-align: left">The <code class="language-plaintext highlighter-rouge">TIMESTAMP WITH TIME ZONE</code> for the given parts in the current time zone.</td> </tr> <tr> <td style="text-align: left"><a href="#make_timestamptzmicroseconds"><code class="language-plaintext highlighter-rouge">make_timestamptz(microseconds)</code></a></td> <td style="text-align: left">The <code class="language-plaintext highlighter-rouge">TIMESTAMP WITH TIME ZONE</code> for the given µs since the epoch.</td> </tr> <tr> <td style="text-align: left"><a href="#strftimetimestamptz-format"><code class="language-plaintext highlighter-rouge">strftime(timestamptz, format)</code></a></td> <td style="text-align: left">Converts a <code class="language-plaintext highlighter-rouge">TIMESTAMP WITH TIME ZONE</code> value to string according to the <a href="dateformat.html#format-specifiers.html">format string</a>.</td> </tr> <tr> <td style="text-align: left"><a href="#strptimetext-format"><code class="language-plaintext highlighter-rouge">strptime(text, format)</code></a></td> <td style="text-align: left">Converts string to <code class="language-plaintext highlighter-rouge">TIMESTAMP WITH TIME ZONE</code> according to the <a href="dateformat.html#format-specifiers.html">format string</a> if <code class="language-plaintext highlighter-rouge">%Z</code> is specified.</td> </tr> <tr> <td style="text-align: left"><a href="#time_bucketbucket_width-timestamptz-offset"><code class="language-plaintext highlighter-rouge">time_bucket(bucket_width, timestamptz[, offset])</code></a></td> <td style="text-align: left">Truncate <code class="language-plaintext highlighter-rouge">timestamptz</code> by the specified interval <code class="language-plaintext highlighter-rouge">bucket_width</code>. Buckets are offset by <code class="language-plaintext highlighter-rouge">offset</code> interval.</td> </tr> <tr> <td style="text-align: left"><a href="#time_bucketbucket_width-timestamptz-origin"><code class="language-plaintext highlighter-rouge">time_bucket(bucket_width, timestamptz[, origin])</code></a></td> <td style="text-align: left">Truncate <code class="language-plaintext highlighter-rouge">timestamptz</code> by the specified interval <code class="language-plaintext highlighter-rouge">bucket_width</code>. Buckets are aligned relative to <code class="language-plaintext highlighter-rouge">origin</code> timestamptz. <code class="language-plaintext highlighter-rouge">origin</code> defaults to 2000-01-03 00:00:00+00 for buckets that don't include a month or year interval, and to 2000-01-01 00:00:00+00 for month and year buckets.</td> </tr> <tr> <td style="text-align: left"><a href="#time_bucketbucket_width-timestamptz-timezone"><code class="language-plaintext highlighter-rouge">time_bucket(bucket_width, timestamptz[, timezone])</code></a></td> <td style="text-align: left">Truncate <code class="language-plaintext highlighter-rouge">timestamptz</code> by the specified interval <code class="language-plaintext highlighter-rouge">bucket_width</code>. Bucket starts and ends are calculated using <code class="language-plaintext highlighter-rouge">timezone</code>. <code class="language-plaintext highlighter-rouge">timezone</code> is a varchar and defaults to UTC.</td> </tr> </tbody> </table> <h4 id="agetimestamptz-timestamptz"> <a style="text-decoration: none;" href="#agetimestamptz-timestamptz"><code class="language-plaintext highlighter-rouge">age(timestamptz, timestamptz)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Subtract arguments, resulting in the time difference between the two timestamps.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">age(TIMESTAMPTZ '2001-04-10', TIMESTAMPTZ '1992-09-20')</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">8 years 6 months 20 days</code></td> </tr> </tbody> </table> <h4 id="agetimestamptz"> <a style="text-decoration: none;" href="#agetimestamptz"><code class="language-plaintext highlighter-rouge">age(timestamptz)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Subtract from current_date.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">age(TIMESTAMP '1992-09-20')</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">29 years 1 month 27 days 12:39:00.844</code></td> </tr> </tbody> </table> <h4 id="date_diffpart-startdate-enddate"> <a style="text-decoration: none;" href="#date_diffpart-startdate-enddate"><code class="language-plaintext highlighter-rouge">date_diff(part, startdate, enddate)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>The number of <a href="datepart.html">partition</a> boundaries between the timestamps.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">date_diff('hour', TIMESTAMPTZ '1992-09-30 23:59:59', TIMESTAMPTZ '1992-10-01 01:58:00')</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">2</code></td> </tr> </tbody> </table> <h4 id="date_partpart--timestamptz"> <a style="text-decoration: none;" href="#date_partpart--timestamptz"><code class="language-plaintext highlighter-rouge">date_part([part, ...], timestamptz)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Get the listed <a href="datepart.html">subfields</a> as a <code class="language-plaintext highlighter-rouge">struct</code>. The list must be constant.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">date_part(['year', 'month', 'day'], TIMESTAMPTZ '1992-09-20 20:38:40-07')</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">{year: 1992, month: 9, day: 20}</code></td> </tr> </tbody> </table> <h4 id="date_partpart-timestamptz"> <a style="text-decoration: none;" href="#date_partpart-timestamptz"><code class="language-plaintext highlighter-rouge">date_part(part, timestamptz)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Get <a href="datepart.html">subfield</a> (equivalent to <em>extract</em>).</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">date_part('minute', TIMESTAMPTZ '1992-09-20 20:38:40')</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">38</code></td> </tr> </tbody> </table> <h4 id="date_subpart-startdate-enddate"> <a style="text-decoration: none;" href="#date_subpart-startdate-enddate"><code class="language-plaintext highlighter-rouge">date_sub(part, startdate, enddate)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>The number of complete <a href="datepart.html">partitions</a> between the timestamps.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">date_sub('hour', TIMESTAMPTZ '1992-09-30 23:59:59', TIMESTAMPTZ '1992-10-01 01:58:00')</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">1</code></td> </tr> </tbody> </table> <h4 id="date_truncpart-timestamptz"> <a style="text-decoration: none;" href="#date_truncpart-timestamptz"><code class="language-plaintext highlighter-rouge">date_trunc(part, timestamptz)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Truncate to specified <a href="datepart.html">precision</a>.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">date_trunc('hour', TIMESTAMPTZ '1992-09-20 20:38:40')</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">1992-09-20 20:00:00</code></td> </tr> </tbody> </table> <h4 id="datediffpart-startdate-enddate"> <a style="text-decoration: none;" href="#datediffpart-startdate-enddate"><code class="language-plaintext highlighter-rouge">datediff(part, startdate, enddate)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Alias of date_diff. The number of <a href="datepart.html">partition</a> boundaries between the timestamps.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">datediff('hour', TIMESTAMPTZ '1992-09-30 23:59:59', TIMESTAMPTZ '1992-10-01 01:58:00')</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">2</code></td> </tr> </tbody> </table> <h4 id="datepartpart--timestamptz"> <a style="text-decoration: none;" href="#datepartpart--timestamptz"><code class="language-plaintext highlighter-rouge">datepart([part, ...], timestamptz)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Alias of date_part. Get the listed <a href="datepart.html">subfields</a> as a <code class="language-plaintext highlighter-rouge">struct</code>. The list must be constant.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">datepart(['year', 'month', 'day'], TIMESTAMPTZ '1992-09-20 20:38:40-07')</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">{year: 1992, month: 9, day: 20}</code></td> </tr> </tbody> </table> <h4 id="datepartpart-timestamptz"> <a style="text-decoration: none;" href="#datepartpart-timestamptz"><code class="language-plaintext highlighter-rouge">datepart(part, timestamptz)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Alias of date_part. Get <a href="datepart.html">subfield</a> (equivalent to <em>extract</em>).</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">datepart('minute', TIMESTAMPTZ '1992-09-20 20:38:40')</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">38</code></td> </tr> </tbody> </table> <h4 id="datesubpart-startdate-enddate"> <a style="text-decoration: none;" href="#datesubpart-startdate-enddate"><code class="language-plaintext highlighter-rouge">datesub(part, startdate, enddate)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Alias of date_sub. The number of complete <a href="datepart.html">partitions</a> between the timestamps.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">datesub('hour', TIMESTAMPTZ '1992-09-30 23:59:59', TIMESTAMPTZ '1992-10-01 01:58:00')</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">1</code></td> </tr> </tbody> </table> <h4 id="datetruncpart-timestamptz"> <a style="text-decoration: none;" href="#datetruncpart-timestamptz"><code class="language-plaintext highlighter-rouge">datetrunc(part, timestamptz)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Alias of date_trunc. Truncate to specified <a href="datepart.html">precision</a>.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">datetrunc('hour', TIMESTAMPTZ '1992-09-20 20:38:40')</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">1992-09-20 20:00:00</code></td> </tr> </tbody> </table> <h4 id="epoch_mstimestamptz"> <a style="text-decoration: none;" href="#epoch_mstimestamptz"><code class="language-plaintext highlighter-rouge">epoch_ms(timestamptz)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Converts a timestamptz to milliseconds since the epoch.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">epoch_ms('2022-11-07 08:43:04.123456+00'::TIMESTAMPTZ);</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">1667810584123</code></td> </tr> </tbody> </table> <h4 id="epoch_nstimestamptz"> <a style="text-decoration: none;" href="#epoch_nstimestamptz"><code class="language-plaintext highlighter-rouge">epoch_ns(timestamptz)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Converts a timestamptz to nanoseconds since the epoch.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">epoch_ns('2022-11-07 08:43:04.123456+00'::TIMESTAMPTZ);</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">1667810584123456000</code></td> </tr> </tbody> </table> <h4 id="epoch_ustimestamptz"> <a style="text-decoration: none;" href="#epoch_ustimestamptz"><code class="language-plaintext highlighter-rouge">epoch_us(timestamptz)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Converts a timestamptz to microseconds since the epoch.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">epoch_us('2022-11-07 08:43:04.123456+00'::TIMESTAMPTZ);</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">1667810584123456</code></td> </tr> </tbody> </table> <h4 id="extractfield-from-timestamptz"> <a style="text-decoration: none;" href="#extractfield-from-timestamptz"><code class="language-plaintext highlighter-rouge">extract(field FROM timestamptz)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Get <a href="datepart.html">subfield</a> from a <code class="language-plaintext highlighter-rouge">TIMESTAMP WITH TIME ZONE</code>.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">extract('hour' FROM TIMESTAMPTZ '1992-09-20 20:38:48')</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">20</code></td> </tr> </tbody> </table> <h4 id="last_daytimestamptz"> <a style="text-decoration: none;" href="#last_daytimestamptz"><code class="language-plaintext highlighter-rouge">last_day(timestamptz)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>The last day of the month.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">last_day(TIMESTAMPTZ '1992-03-22 01:02:03.1234')</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">1992-03-31</code></td> </tr> </tbody> </table> <h4 id="make_timestamptzbigint-bigint-bigint-bigint-bigint-double-string"> <a style="text-decoration: none;" href="#make_timestamptzbigint-bigint-bigint-bigint-bigint-double-string"><code class="language-plaintext highlighter-rouge">make_timestamptz(bigint, bigint, bigint, bigint, bigint, double, string)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>The <code class="language-plaintext highlighter-rouge">TIMESTAMP WITH TIME ZONE</code> for the given parts and time zone.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">make_timestamptz(1992, 9, 20, 15, 34, 27.123456, 'CET')</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">1992-09-20 06:34:27.123456-07</code></td> </tr> </tbody> </table> <h4 id="make_timestamptzbigint-bigint-bigint-bigint-bigint-double"> <a style="text-decoration: none;" href="#make_timestamptzbigint-bigint-bigint-bigint-bigint-double"><code class="language-plaintext highlighter-rouge">make_timestamptz(bigint, bigint, bigint, bigint, bigint, double)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>The <code class="language-plaintext highlighter-rouge">TIMESTAMP WITH TIME ZONE</code> for the given parts in the current time zone.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">make_timestamptz(1992, 9, 20, 13, 34, 27.123456)</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">1992-09-20 13:34:27.123456-07</code></td> </tr> </tbody> </table> <h4 id="make_timestamptzmicroseconds"> <a style="text-decoration: none;" href="#make_timestamptzmicroseconds"><code class="language-plaintext highlighter-rouge">make_timestamptz(microseconds)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>The <code class="language-plaintext highlighter-rouge">TIMESTAMP WITH TIME ZONE</code> for the given µs since the epoch.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">make_timestamptz(1667810584123456)</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">2022-11-07 16:43:04.123456-08</code></td> </tr> </tbody> </table> <h4 id="strftimetimestamptz-format"> <a style="text-decoration: none;" href="#strftimetimestamptz-format"><code class="language-plaintext highlighter-rouge">strftime(timestamptz, format)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Converts a <code class="language-plaintext highlighter-rouge">TIMESTAMP WITH TIME ZONE</code> value to string according to the <a href="dateformat.html#format-specifiers.html">format string</a>.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">strftime(timestamptz '1992-01-01 20:38:40', '%a, %-d %B %Y - %I:%M:%S %p')</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">Wed, 1 January 1992 - 08:38:40 PM</code></td> </tr> </tbody> </table> <h4 id="strptimetext-format"> <a style="text-decoration: none;" href="#strptimetext-format"><code class="language-plaintext highlighter-rouge">strptime(text, format)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Converts string to <code class="language-plaintext highlighter-rouge">TIMESTAMP WITH TIME ZONE</code> according to the <a href="dateformat.html#format-specifiers.html">format string</a> if <code class="language-plaintext highlighter-rouge">%Z</code> is specified.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">strptime('Wed, 1 January 1992 - 08:38:40 PST', '%a, %-d %B %Y - %H:%M:%S %Z')</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">1992-01-01 08:38:40-08</code></td> </tr> </tbody> </table> <h4 id="time_bucketbucket_width-timestamptz-offset"> <a style="text-decoration: none;" href="#time_bucketbucket_width-timestamptz-offset"><code class="language-plaintext highlighter-rouge">time_bucket(bucket_width, timestamptz[, offset])</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Truncate <code class="language-plaintext highlighter-rouge">timestamptz</code> by the specified interval <code class="language-plaintext highlighter-rouge">bucket_width</code>. Buckets are offset by <code class="language-plaintext highlighter-rouge">offset</code> interval.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">time_bucket(INTERVAL '10 minutes', TIMESTAMPTZ '1992-04-20 15:26:00-07', INTERVAL '5 minutes')</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">1992-04-20 15:25:00-07</code></td> </tr> </tbody> </table> <h4 id="time_bucketbucket_width-timestamptz-origin"> <a style="text-decoration: none;" href="#time_bucketbucket_width-timestamptz-origin"><code class="language-plaintext highlighter-rouge">time_bucket(bucket_width, timestamptz[, origin])</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Truncate <code class="language-plaintext highlighter-rouge">timestamptz</code> by the specified interval <code class="language-plaintext highlighter-rouge">bucket_width</code>. Buckets are aligned relative to <code class="language-plaintext highlighter-rouge">origin</code> timestamptz. <code class="language-plaintext highlighter-rouge">origin</code> defaults to 2000-01-03 00:00:00+00 for buckets that don't include a month or year interval, and to 2000-01-01 00:00:00+00 for month and year buckets.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">time_bucket(INTERVAL '2 weeks', TIMESTAMPTZ '1992-04-20 15:26:00-07', TIMESTAMPTZ '1992-04-01 00:00:00-07')</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">1992-04-15 00:00:00-07</code></td> </tr> </tbody> </table> <h4 id="time_bucketbucket_width-timestamptz-timezone"> <a style="text-decoration: none;" href="#time_bucketbucket_width-timestamptz-timezone"><code class="language-plaintext highlighter-rouge">time_bucket(bucket_width, timestamptz[, timezone])</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Truncate <code class="language-plaintext highlighter-rouge">timestamptz</code> by the specified interval <code class="language-plaintext highlighter-rouge">bucket_width</code>. Bucket starts and ends are calculated using <code class="language-plaintext highlighter-rouge">timezone</code>. <code class="language-plaintext highlighter-rouge">timezone</code> is a varchar and defaults to UTC.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">time_bucket(INTERVAL '2 days', TIMESTAMPTZ '1992-04-20 15:26:00-07', 'Europe/Berlin')</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">1992-04-19 15:00:00-07</code></td> </tr> </tbody> </table> <p>There are also dedicated extraction functions to get the <a href="datepart.html">subfields</a>.</p> <h2 id="icu-timestamp-table-functions"> <a style="text-decoration: none;" href="#icu-timestamp-table-functions">ICU Timestamp Table Functions</a> </h2> <p>The table below shows the available table functions for <code class="language-plaintext highlighter-rouge">TIMESTAMP WITH TIME ZONE</code> types.</p> <table> <thead> <tr> <th style="text-align: left">Name</th> <th style="text-align: left">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><a href="#generate_seriestimestamptz-timestamptz-interval"><code class="language-plaintext highlighter-rouge">generate_series(timestamptz, timestamptz, interval)</code></a></td> <td style="text-align: left">Generate a table of timestamps in the closed range (including both the starting timestamp and the ending timestamp), stepping by the interval.</td> </tr> <tr> <td style="text-align: left"><a href="#rangetimestamptz-timestamptz-interval"><code class="language-plaintext highlighter-rouge">range(timestamptz, timestamptz, interval)</code></a></td> <td style="text-align: left">Generate a table of timestamps in the half open range (including the starting timestamp, but stopping before the ending timestamp), stepping by the interval.</td> </tr> </tbody> </table> <blockquote> <p>Infinite values are not allowed as table function bounds.</p> </blockquote> <h4 id="generate_seriestimestamptz-timestamptz-interval"> <a style="text-decoration: none;" href="#generate_seriestimestamptz-timestamptz-interval"><code class="language-plaintext highlighter-rouge">generate_series(timestamptz, timestamptz, interval)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Generate a table of timestamps in the closed range (including both the starting timestamp and the ending timestamp), stepping by the interval.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">generate_series(TIMESTAMPTZ '2001-04-10', TIMESTAMPTZ '2001-04-11', INTERVAL 30 MINUTE)</code></td> </tr> </tbody> </table> <h4 id="rangetimestamptz-timestamptz-interval"> <a style="text-decoration: none;" href="#rangetimestamptz-timestamptz-interval"><code class="language-plaintext highlighter-rouge">range(timestamptz, timestamptz, interval)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Generate a table of timestamps in the half open range (including the starting timestamp, but stopping before the ending timestamp), stepping by the interval.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">range(TIMESTAMPTZ '2001-04-10', TIMESTAMPTZ '2001-04-11', INTERVAL 30 MINUTE)</code></td> </tr> </tbody> </table> <h2 id="icu-timestamp-without-time-zone-functions"> <a style="text-decoration: none;" href="#icu-timestamp-without-time-zone-functions">ICU Timestamp Without Time Zone Functions</a> </h2> <p>The table below shows the ICU provided scalar functions that operate on plain <code class="language-plaintext highlighter-rouge">TIMESTAMP</code> values. These functions assume that the <code class="language-plaintext highlighter-rouge">TIMESTAMP</code> is a “local timestamp”.</p> <p>A local timestamp is effectively a way of encoding the part values from a time zone into a single value. They should be used with caution because the produced values can contain gaps and ambiguities thanks to daylight savings time. Often the same functionality can be implemented more reliably using the <code class="language-plaintext highlighter-rouge">struct</code> variant of the <code class="language-plaintext highlighter-rouge">date_part</code> function.</p> <table> <thead> <tr> <th style="text-align: left">Name</th> <th style="text-align: left">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><a href="#current_localtime"><code class="language-plaintext highlighter-rouge">current_localtime()</code></a></td> <td style="text-align: left">Returns a <code class="language-plaintext highlighter-rouge">TIME</code> whose GMT bin values correspond to local time in the current time zone.</td> </tr> <tr> <td style="text-align: left"><a href="#current_localtimestamp"><code class="language-plaintext highlighter-rouge">current_localtimestamp()</code></a></td> <td style="text-align: left">Returns a <code class="language-plaintext highlighter-rouge">TIMESTAMP</code> whose GMT bin values correspond to local date and time in the current time zone.</td> </tr> <tr> <td style="text-align: left"><a href="#localtime"><code class="language-plaintext highlighter-rouge">localtime</code></a></td> <td style="text-align: left">Synonym for the <code class="language-plaintext highlighter-rouge">current_localtime()</code> function call.</td> </tr> <tr> <td style="text-align: left"><a href="#localtimestamp"><code class="language-plaintext highlighter-rouge">localtimestamp</code></a></td> <td style="text-align: left">Synonym for the <code class="language-plaintext highlighter-rouge">current_localtimestamp()</code> function call.</td> </tr> <tr> <td style="text-align: left"><a href="#timezonetext-timestamp"><code class="language-plaintext highlighter-rouge">timezone(text, timestamp)</code></a></td> <td style="text-align: left">Use the <a href="datepart.html">date parts</a> of the timestamp in GMT to construct a timestamp in the given time zone. Effectively, the argument is a “local” time.</td> </tr> <tr> <td style="text-align: left"><a href="#timezonetext-timestamptz"><code class="language-plaintext highlighter-rouge">timezone(text, timestamptz)</code></a></td> <td style="text-align: left">Use the <a href="datepart.html">date parts</a> of the timestamp in the given time zone to construct a timestamp. Effectively, the result is a “local” time.</td> </tr> </tbody> </table> <h4 id="current_localtime"> <a style="text-decoration: none;" href="#current_localtime"><code class="language-plaintext highlighter-rouge">current_localtime()</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Returns a <code class="language-plaintext highlighter-rouge">TIME</code> whose GMT bin values correspond to local time in the current time zone.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">current_localtime()</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">08:47:56.497</code></td> </tr> </tbody> </table> <h4 id="current_localtimestamp"> <a style="text-decoration: none;" href="#current_localtimestamp"><code class="language-plaintext highlighter-rouge">current_localtimestamp()</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Returns a <code class="language-plaintext highlighter-rouge">TIMESTAMP</code> whose GMT bin values correspond to local date and time in the current time zone.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">current_localtimestamp()</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">2022-12-17 08:47:56.497</code></td> </tr> </tbody> </table> <h4 id="localtime"> <a style="text-decoration: none;" href="#localtime"><code class="language-plaintext highlighter-rouge">localtime</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Synonym for the <code class="language-plaintext highlighter-rouge">current_localtime()</code> function call.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">localtime</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">08:47:56.497</code></td> </tr> </tbody> </table> <h4 id="localtimestamp"> <a style="text-decoration: none;" href="#localtimestamp"><code class="language-plaintext highlighter-rouge">localtimestamp</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Synonym for the <code class="language-plaintext highlighter-rouge">current_localtimestamp()</code> function call.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">localtimestamp</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">2022-12-17 08:47:56.497</code></td> </tr> </tbody> </table> <h4 id="timezonetext-timestamp"> <a style="text-decoration: none;" href="#timezonetext-timestamp"><code class="language-plaintext highlighter-rouge">timezone(text, timestamp)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Use the <a href="datepart.html">date parts</a> of the timestamp in GMT to construct a timestamp in the given time zone. Effectively, the argument is a “local” time.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">timezone('America/Denver', TIMESTAMP '2001-02-16 20:38:40')</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">2001-02-16 19:38:40-08</code></td> </tr> </tbody> </table> <h4 id="timezonetext-timestamptz"> <a style="text-decoration: none;" href="#timezonetext-timestamptz"><code class="language-plaintext highlighter-rouge">timezone(text, timestamptz)</code></a> </h4>  <table> <tbody> <tr> <td><strong>Description</strong></td> <td>Use the <a href="datepart.html">date parts</a> of the timestamp in the given time zone to construct a timestamp. Effectively, the result is a “local” time.</td> </tr> <tr> <td><strong>Example</strong></td> <td><code class="language-plaintext highlighter-rouge">timezone('America/Denver', TIMESTAMPTZ '2001-02-16 20:38:40-05')</code></td> </tr> <tr> <td><strong>Result</strong></td> <td><code class="language-plaintext highlighter-rouge">2001-02-16 18:38:40</code></td> </tr> </tbody> </table> <h2 id="at-time-zone"> <a style="text-decoration: none;" href="#at-time-zone">At Time Zone</a> </h2> <p>The <code class="language-plaintext highlighter-rouge">AT TIME ZONE</code> syntax is syntactic sugar for the (two argument) <code class="language-plaintext highlighter-rouge">timezone</code> function listed above:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT TIMESTAMP '2001-02-16 20:38:40' AT TIME ZONE 'America/Denver' AS ts;</pre> <pre class="language-text highlighter-rouge" data-language="text">2001-02-16 19:38:40-08</pre> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT TIMESTAMP WITH TIME ZONE '2001-02-16 20:38:40-05' AT TIME ZONE 'America/Denver' AS ts;</pre> <pre class="language-text highlighter-rouge" data-language="text">2001-02-16 18:38:40</pre> <p>Note that numeric timezones are not allowed:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT TIMESTAMP '2001-02-16 20:38:40-05' AT TIME ZONE '0200' AS ts;</pre> <pre class="language-console highlighter-rouge" data-language="console">Not implemented Error: Unknown TimeZone '0200'</pre> <h2 id="infinities"> <a style="text-decoration: none;" href="#infinities">Infinities</a> </h2> <p>Functions applied to infinite dates will either return the same infinite dates (e.g, <code class="language-plaintext highlighter-rouge">greatest</code>) or <code class="language-plaintext highlighter-rouge">NULL</code> (e.g., <code class="language-plaintext highlighter-rouge">date_part</code>) depending on what “makes sense”. In general, if the function needs to examine the parts of the infinite temporal value, the result will be <code class="language-plaintext highlighter-rouge">NULL</code>.</p> <h2 id="calendars"> <a style="text-decoration: none;" href="#calendars">Calendars</a> </h2> <p>The ICU extension also supports <a href="../data_types/timestamp.html#calendars.html">non-Gregorian calendars</a>. If such a calendar is current, then the display and binning operations will use that calendar.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; Copyright 2018&ndash;2024 Stichting DuckDB Foundation<br>Licensed under the MIT License.<br>
    <a href="https://duckdb.org/docs/sql/functions/timestamptz.html" class="_attribution-link">https://duckdb.org/docs/sql/functions/timestamptz.html</a>
  </p>
</div>
