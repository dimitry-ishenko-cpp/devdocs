<h1 class="title">Building Configuration</h1>  <h2 id="build-types"> <a style="text-decoration: none;" href="#build-types">Build Types</a> </h2> <p>DuckDB can be built in many different settings, most of these correspond directly to CMake but not all of them.</p> <h3 id="release"> <a style="text-decoration: none;" href="#release"><code class="language-plaintext highlighter-rouge">release</code></a> </h3> <p>This build has been stripped of all the assertions and debug symbols and code, optimized for performance.</p> <h3 id="debug"> <a style="text-decoration: none;" href="#debug"><code class="language-plaintext highlighter-rouge">debug</code></a> </h3> <p>This build runs with all the debug information, including symbols, assertions and <code class="language-plaintext highlighter-rouge">#ifdef DEBUG</code> blocks. Due to these, binaries of this build are expected to be slow. Note: the special debug defines are not automatically set for this build.</p> <h3 id="relassert"> <a style="text-decoration: none;" href="#relassert"><code class="language-plaintext highlighter-rouge">relassert</code></a> </h3> <p>This build does not trigger the <code class="language-plaintext highlighter-rouge">#ifdef DEBUG</code> code blocks but it still has debug symbols that make it possible to step through the execution with line number information and <code class="language-plaintext highlighter-rouge">D_ASSERT</code> lines are still checked in this build. Binaries of this build mode are significantly faster than those of the <code class="language-plaintext highlighter-rouge">debug</code> mode.</p> <h3 id="reldebug"> <a style="text-decoration: none;" href="#reldebug"><code class="language-plaintext highlighter-rouge">reldebug</code></a> </h3> <p>This build is similar to <code class="language-plaintext highlighter-rouge">relassert</code> in many ways, only assertions are also stripped in this build.</p> <h3 id="benchmark"> <a style="text-decoration: none;" href="#benchmark"><code class="language-plaintext highlighter-rouge">benchmark</code></a> </h3> <p>This build is a shorthand for <code class="language-plaintext highlighter-rouge">release</code> with <code class="language-plaintext highlighter-rouge">BUILD_BENCHMARK=1</code> set.</p> <h3 id="tidy-check"> <a style="text-decoration: none;" href="#tidy-check"><code class="language-plaintext highlighter-rouge">tidy-check</code></a> </h3> <p>This creates a build and then runs <a href="https://clang.llvm.org/extra/clang-tidy/">Clang-Tidy</a> to check for issues or style violations through static analysis. The CI will also run this check, causing it to fail if this check fails.</p> <h3 id="format-fix--format-changes--format-main"> <a style="text-decoration: none;" href="#format-fix--format-changes--format-main"><code class="language-plaintext highlighter-rouge">format-fix</code> | <code class="language-plaintext highlighter-rouge">format-changes</code> | <code class="language-plaintext highlighter-rouge">format-main</code></a> </h3> <p>This doesn't actually create a build, but uses the following format checkers to check for style issues:</p> <ul> <li>
<a href="https://clang.llvm.org/docs/ClangFormat.html">clang-format</a> to fix format issues in the code.</li> <li>
<a href="https://cmake-format.readthedocs.io/en/latest/">cmake-format</a> to fix format issues in the <code class="language-plaintext highlighter-rouge">CMakeLists.txt</code> files.</li> </ul> <p>The CI will also run this check, causing it to fail if this check fails.</p> <h2 id="extension-selection"> <a style="text-decoration: none;" href="#extension-selection">Extension Selection</a> </h2> <p><a href="../../extensions/core_extensions.html">Core DuckDB extensions</a> are the ones maintaned by the DuckDB team. These are hosted in the <code class="language-plaintext highlighter-rouge">duckdb</code> GitHub organization and are served by the <code class="language-plaintext highlighter-rouge">core</code> extension repository.</p> <p>Core extensions can be built as part of DuckDB via the <code class="language-plaintext highlighter-rouge">CORE_EXTENSION</code> flag, then listing the names of the extensions that are to be built.</p> <pre class="language-bash highlighter-rouge" data-language="bash">CORE_EXTENSION='tpcd;httpfs;fts;json;parquet' make</pre> <p>More on this topic at <a href="building_extensions.html">building duckdb extensions</a>.</p> <h2 id="package-flags"> <a style="text-decoration: none;" href="#package-flags">Package Flags</a> </h2> <p>For every package that is maintained by core DuckDB, there exists a flag in the Makefile to enable building the package. These can be enabled by either setting them in the current <code class="language-plaintext highlighter-rouge">env</code>, through set up files like <code class="language-plaintext highlighter-rouge">bashrc</code> or <code class="language-plaintext highlighter-rouge">zshrc</code>, or by setting them before the call to <code class="language-plaintext highlighter-rouge">make</code>, for example:</p> <pre class="language-bash highlighter-rouge" data-language="bash">BUILD_PYTHON=1 make debug</pre> <h3 id="build_python"> <a style="text-decoration: none;" href="#build_python"><code class="language-plaintext highlighter-rouge">BUILD_PYTHON</code></a> </h3> <p>When this flag is set, the <a href="../../api/python/overview.html">Python</a> package is built.</p> <h3 id="build_shell"> <a style="text-decoration: none;" href="#build_shell"><code class="language-plaintext highlighter-rouge">BUILD_SHELL</code></a> </h3> <p>When this flag is set, the <a href="../../api/cli/overview.html">CLI</a> is built, this is usually enabled by default.</p> <h3 id="build_benchmark"> <a style="text-decoration: none;" href="#build_benchmark"><code class="language-plaintext highlighter-rouge">BUILD_BENCHMARK</code></a> </h3> <p>When this flag is set, DuckDB's in-house benchmark suite is built. More information about this can be found <a href="https://github.com/duckdb/duckdb/blob/main/benchmark/README.md">here</a>.</p> <h3 id="build_jdbc"> <a style="text-decoration: none;" href="#build_jdbc"><code class="language-plaintext highlighter-rouge">BUILD_JDBC</code></a> </h3> <p>When this flag is set, the <a href="../../api/java.html">Java</a> package is built.</p> <h3 id="build_odbc"> <a style="text-decoration: none;" href="#build_odbc"><code class="language-plaintext highlighter-rouge">BUILD_ODBC</code></a> </h3> <p>When this flag is set, the <a href="../../api/odbc/overview.html">ODBC</a> package is built.</p> <h2 id="miscellaneous-flags"> <a style="text-decoration: none;" href="#miscellaneous-flags">Miscellaneous Flags</a> </h2> <h3 id="disable_unity"> <a style="text-decoration: none;" href="#disable_unity"><code class="language-plaintext highlighter-rouge">DISABLE_UNITY</code></a> </h3> <p>To improve compilation time, we use <a href="https://cmake.org/cmake/help/latest/prop_tgt/UNITY_BUILD.html">Unity Build</a> to combine translation units. This can however hide include bugs, this flag disables using the unity build so these errors can be detected.</p> <h3 id="disable_sanitizer"> <a style="text-decoration: none;" href="#disable_sanitizer"><code class="language-plaintext highlighter-rouge">DISABLE_SANITIZER</code></a> </h3> <p>In some situations, running an executable that has been built with sanitizers enabled is not support / can cause problems. Julia is an example of this. With this flag enabled, the sanitizers are disabled for the build.</p> <h2 id="overriding-git-hash-and-version"> <a style="text-decoration: none;" href="#overriding-git-hash-and-version">Overriding Git Hash and Version</a> </h2> <p>It is possible to override the Git hash and version when building from source using the <code class="language-plaintext highlighter-rouge">OVERRIDE_GIT_DESCRIBE</code> environment variable. This is useful when building from sources that are not part of a complete Git repository (e.g., an archive file with no information on commit hashes and tags). For example:</p> <pre class="language-bash highlighter-rouge" data-language="bash">OVERRIDE_GIT_DESCRIBE=v0.10.0-843-g09ea97d0a9 GEN=ninja make</pre> <p>Will result in the following output when running <code class="language-plaintext highlighter-rouge">./build/release/duckdb</code>:</p> <pre class="language-text highlighter-rouge" data-language="text">v0.10.1-dev843 09ea97d0a9
...</pre><div class="_attribution">
  <p class="_attribution-p">
    &copy; Copyright 2018&ndash;2024 Stichting DuckDB Foundation<br>Licensed under the MIT License.<br>
    <a href="https://duckdb.org/docs/dev/building/build_configuration.html" class="_attribution-link">https://duckdb.org/docs/dev/building/build_configuration.html</a>
  </p>
</div>
