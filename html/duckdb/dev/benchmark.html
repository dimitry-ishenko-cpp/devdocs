<h1 class="title">Benchmark Suite</h1>  <p>DuckDB has an extensive benchmark suite. When making changes that have potential performance implications, it is important to run these benchmarks to detect potential performance regressions.</p> <h2 id="getting-started"> <a style="text-decoration: none;" href="#getting-started">Getting Started</a> </h2> <p>To build the benchmark suite, run the following command in the <a href="https://github.com/duckdb/duckdb">DuckDB repository</a>:</p> <pre class="language-bash highlighter-rouge" data-language="bash">BUILD_BENCHMARK=1 CORE_EXTENSIONS='tpch' make</pre> <h2 id="listing-benchmarks"> <a style="text-decoration: none;" href="#listing-benchmarks">Listing Benchmarks</a> </h2> <p>To list all available benchmarks, run:</p> <pre class="language-bash highlighter-rouge" data-language="bash">build/release/benchmark/benchmark_runner --list</pre> <h2 id="running-benchmarks"> <a style="text-decoration: none;" href="#running-benchmarks">Running Benchmarks</a> </h2> <h3 id="running-a-single-benchmark"> <a style="text-decoration: none;" href="#running-a-single-benchmark">Running a Single Benchmark</a> </h3> <p>To run a single benchmark, issue the following command:</p> <pre class="language-bash highlighter-rouge" data-language="bash">build/release/benchmark/benchmark_runner benchmark/micro/nulls/no_nulls_addition.benchmark</pre> <p>The output will be printed to <code class="language-plaintext highlighter-rouge">stdout</code> in CSV format, in the following format:</p> <pre class="language-text highlighter-rouge" data-language="text">name	run	timing
benchmark/micro/nulls/no_nulls_addition.benchmark	1	0.121234
benchmark/micro/nulls/no_nulls_addition.benchmark	2	0.121702
benchmark/micro/nulls/no_nulls_addition.benchmark	3	0.122948
benchmark/micro/nulls/no_nulls_addition.benchmark	4	0.122534
benchmark/micro/nulls/no_nulls_addition.benchmark	5	0.124102</pre> <p>You can also specify an output file using the <code class="language-plaintext highlighter-rouge">--out</code> flag. This will write only the timings (delimited by newlines) to that file.</p> <pre class="language-bash highlighter-rouge" data-language="bash">build/release/benchmark/benchmark_runner benchmark/micro/nulls/no_nulls_addition.benchmark --out=timings.out</pre> <p>The output will contain the following:</p> <pre class="language-text highlighter-rouge" data-language="text">0.182472
0.185027
0.184163
0.185281
0.182948</pre> <h3 id="running-multiple-benchmark-using-a-regular-expression"> <a style="text-decoration: none;" href="#running-multiple-benchmark-using-a-regular-expression">Running Multiple Benchmark Using a Regular Expression</a> </h3> <p>You can also use a regular expression to specify which benchmarks to run. Be careful of shell expansion of certain regex characters (e.g., <code class="language-plaintext highlighter-rouge">*</code> will likely be expanded by your shell, hence this requires proper quoting or escaping).</p> <pre class="language-bash highlighter-rouge" data-language="bash">build/release/benchmark/benchmark_runner "benchmark/micro/nulls/.*"</pre> <h4 id="running-all-benchmarks"> <a style="text-decoration: none;" href="#running-all-benchmarks">Running All Benchmarks</a> </h4> <p>Not specifying any argument will run all benchmarks.</p> <pre class="language-bash highlighter-rouge" data-language="bash">build/release/benchmark/benchmark_runner</pre> <h4 id="other-options"> <a style="text-decoration: none;" href="#other-options">Other Options</a> </h4> <p>The <code class="language-plaintext highlighter-rouge">--info</code> flag gives you some other information about the benchmark.</p> <pre class="language-bash highlighter-rouge" data-language="bash">build/release/benchmark/benchmark_runner benchmark/micro/nulls/no_nulls_addition.benchmark --info</pre> <pre class="language-text highlighter-rouge" data-language="text">display_name:NULL Addition (no nulls)
group:micro
subgroup:nulls</pre> <p>The <code class="language-plaintext highlighter-rouge">--query</code> flag will print the query that is run by the benchmark.</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT min(i + 1) FROM integers;</pre> <p>The <code class="language-plaintext highlighter-rouge">--profile</code> flag will output a query tree.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; Copyright 2018&ndash;2024 Stichting DuckDB Foundation<br>Licensed under the MIT License.<br>
    <a href="https://duckdb.org/docs/dev/benchmark.html" class="_attribution-link">https://duckdb.org/docs/dev/benchmark.html</a>
  </p>
</div>
