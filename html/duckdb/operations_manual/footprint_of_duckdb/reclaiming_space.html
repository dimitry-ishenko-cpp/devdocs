<h1 class="title">Reclaiming Space</h1>  <p>DuckDB uses a single-file format, which has some inherent limitations w.r.t. reclaiming disk space.</p> <h2 id="checkpoint"> <a style="text-decoration: none;" href="#checkpoint"><code class="language-plaintext highlighter-rouge">CHECKPOINT</code></a> </h2> <p>To reclaim space after deleting rows, use the <a href="../../sql/statements/checkpoint.html"><code class="language-plaintext highlighter-rouge">CHECKPOINT</code> statement</a>.</p> <h2 id="vacuum"> <a style="text-decoration: none;" href="#vacuum"><code class="language-plaintext highlighter-rouge">VACUUM</code></a> </h2> <p>The <a href="../../sql/statements/vacuum.html"><code class="language-plaintext highlighter-rouge">VACUUM</code> statement</a> does <em>not</em> trigger vacuuming deletes and hence does not reclaim space.</p> <h2 id="compacting-a-database-by-copying"> <a style="text-decoration: none;" href="#compacting-a-database-by-copying">Compacting a Database by Copying</a> </h2> <p>To compact the database, you can create a fresh copy of the database using the <a href="../../sql/statements/copy.html#copy-from-database--to.html"><code class="language-plaintext highlighter-rouge">COPY FROM DATABASE</code> statement</a>. In the following example, we first connect to the original database <code class="language-plaintext highlighter-rouge">db1</code>, then the new (empty) database <code class="language-plaintext highlighter-rouge">db2</code>. Then, we copy the content of <code class="language-plaintext highlighter-rouge">db1</code> to <code class="language-plaintext highlighter-rouge">db2</code>.</p> <pre class="language-sql highlighter-rouge" data-language="sql">ATTACH 'db1.db' AS db1;
ATTACH 'db2.db' AS db2;
COPY FROM DATABASE db1 TO db2;</pre><div class="_attribution">
  <p class="_attribution-p">
    &copy; Copyright 2018&ndash;2024 Stichting DuckDB Foundation<br>Licensed under the MIT License.<br>
    <a href="https://duckdb.org/docs/operations_manual/footprint_of_duckdb/reclaiming_space.html" class="_attribution-link">https://duckdb.org/docs/operations_manual/footprint_of_duckdb/reclaiming_space.html</a>
  </p>
</div>
