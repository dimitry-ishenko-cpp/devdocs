<h1 class="title">JSON Overview</h1>  <p>DuckDB supports SQL functions that are useful for reading values from existing JSON and creating new JSON data. JSON is supported with the <code class="language-plaintext highlighter-rouge">json</code> extension which is shipped with most DuckDB distributions and is auto-loaded on first use. If you would like to install or load it manually, please consult the <a href="installing_and_loading.html">“Installing and Loading” page</a>.</p> <h2 id="about-json"> <a style="text-decoration: none;" href="#about-json">About JSON</a> </h2> <p>JSON is an open standard file format and data interchange format that uses human-readable text to store and transmit data objects consisting of attribute–value pairs and arrays (or other serializable values). While it is not a very efficient format for tabular data, it is very commonly used, especially as a data interchange format.</p> <h2 id="indexing"> <a style="text-decoration: none;" href="#indexing">Indexing</a> </h2> <blockquote> <p>Warning Following <a href="../../sql/dialect/postgresql_compatibility.html">PostgreSQL's conventions</a>, DuckDB uses 1-based indexing for its <a href="../../sql/data_types/array.html"><code class="language-plaintext highlighter-rouge">ARRAY</code></a> and <a href="../../sql/data_types/list.html"><code class="language-plaintext highlighter-rouge">LIST</code></a> data types but <a href="https://www.postgresql.org/docs/17/functions-json.html#FUNCTIONS-JSON-PROCESSING">0-based indexing for the JSON data type</a>.</p> </blockquote> <h2 id="examples"> <a style="text-decoration: none;" href="#examples">Examples</a> </h2> <h3 id="loading-json"> <a style="text-decoration: none;" href="#loading-json">Loading JSON</a> </h3> <p>Read a JSON file from disk, auto-infer options:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT * FROM 'todos.json';</pre> <p>Use the <code class="language-plaintext highlighter-rouge">read_json</code> function with custom options:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT *
FROM read_json('todos.json',
               format = 'array',
               columns = {userId: 'UBIGINT',
                          id: 'UBIGINT',
                          title: 'VARCHAR',
                          completed: 'BOOLEAN'});</pre> <p>Read a JSON file from stdin, auto-infer options:</p> <pre class="language-bash highlighter-rouge" data-language="bash">cat data/json/todos.json | duckdb -c "SELECT * FROM read_json('/dev/stdin')"</pre> <p>Read a JSON file into a table:</p> <pre class="language-sql highlighter-rouge" data-language="sql">CREATE TABLE todos (userId UBIGINT, id UBIGINT, title VARCHAR, completed BOOLEAN);
COPY todos FROM 'todos.json';</pre> <p>Alternatively, create a table without specifying the schema manually with a <a href="../../sql/statements/create_table.html#create-table--as-select-ctas.html"><code class="language-plaintext highlighter-rouge">CREATE TABLE ... AS SELECT</code> clause</a>:</p> <pre class="language-sql highlighter-rouge" data-language="sql">CREATE TABLE todos AS
    SELECT * FROM 'todos.json';</pre> <h3 id="writing-json"> <a style="text-decoration: none;" href="#writing-json">Writing JSON</a> </h3> <p>Write the result of a query to a JSON file:</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY (SELECT * FROM todos) TO 'todos.json';</pre> <h3 id="json-data-type"> <a style="text-decoration: none;" href="#json-data-type">JSON Data Type</a> </h3> <p>Create a table with a column for storing JSON data and insert data into it:</p> <pre class="language-sql highlighter-rouge" data-language="sql">CREATE TABLE example (j JSON);
INSERT INTO example VALUES
    ('{ "family": "anatidae", "species": [ "duck", "goose", "swan", null ] }');</pre> <h3 id="retrieving-json-data"> <a style="text-decoration: none;" href="#retrieving-json-data">Retrieving JSON Data</a> </h3> <p>Retrieve the family key's value:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT j.family FROM example;</pre> <pre class="language-text highlighter-rouge" data-language="text">"anatidae"</pre> <p>Extract the family key's value with a <a href="https://goessner.net/articles/JsonPath/">JSONPath</a> expression:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT j-&gt;'$.family' FROM example;</pre> <pre class="language-text highlighter-rouge" data-language="text">"anatidae"</pre> <p>Extract the family key's value with a <a href="https://goessner.net/articles/JsonPath/">JSONPath</a> expression as a <code class="language-plaintext highlighter-rouge">VARCHAR</code>:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT j-&gt;&gt;'$.family' FROM example;</pre> <pre class="language-text highlighter-rouge" data-language="text">anatidae</pre> <div> <h2 id="pages-in-this-section">Pages in This Section</h2> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Copyright 2018&ndash;2024 Stichting DuckDB Foundation<br>Licensed under the MIT License.<br>
    <a href="https://duckdb.org/docs/data/json/overview.html" class="_attribution-link">https://duckdb.org/docs/data/json/overview.html</a>
  </p>
</div>
