<h1 class="title">CSV Import Tips</h1>  <p>Below is a collection of tips to help when attempting to import complex CSV files. In the examples, we use the <a href="http://localhost:8000/data/flights.csv"><code class="language-plaintext highlighter-rouge">flights.csv</code></a> file.</p> <h2 id="override-the-header-flag-if-the-header-is-not-correctly-detected"> <a style="text-decoration: none;" href="#override-the-header-flag-if-the-header-is-not-correctly-detected">Override the Header Flag if the Header Is Not Correctly Detected</a> </h2> <p>If a file contains only string columns the <code class="language-plaintext highlighter-rouge">header</code> auto-detection might fail. Provide the <code class="language-plaintext highlighter-rouge">header</code> option to override this behavior.</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT * FROM read_csv('flights.csv', header = true);</pre> <h2 id="provide-names-if-the-file-does-not-contain-a-header"> <a style="text-decoration: none;" href="#provide-names-if-the-file-does-not-contain-a-header">Provide Names if the File Does Not Contain a Header</a> </h2> <p>If the file does not contain a header, names will be auto-generated by default. You can provide your own names with the <code class="language-plaintext highlighter-rouge">names</code> option.</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT * FROM read_csv('flights.csv', names = ['DateOfFlight', 'CarrierName']);</pre> <h2 id="override-the-types-of-specific-columns"> <a style="text-decoration: none;" href="#override-the-types-of-specific-columns">Override the Types of Specific Columns</a> </h2> <p>The <code class="language-plaintext highlighter-rouge">types</code> flag can be used to override types of only certain columns by providing a struct of <code class="language-plaintext highlighter-rouge">name</code> â†’ <code class="language-plaintext highlighter-rouge">type</code> mappings.</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT * FROM read_csv('flights.csv', types = {'FlightDate': 'DATE'});</pre> <h2 id="use-copy-when-loading-data-into-a-table"> <a style="text-decoration: none;" href="#use-copy-when-loading-data-into-a-table">Use <code class="language-plaintext highlighter-rouge">COPY</code> When Loading Data into a Table</a> </h2> <p>The <a href="../../sql/statements/copy.html"><code class="language-plaintext highlighter-rouge">COPY</code> statement</a> copies data directly into a table. The CSV reader uses the schema of the table instead of auto-detecting types from the file. This speeds up the auto-detection, and prevents mistakes from being made during auto-detection.</p> <pre class="language-sql highlighter-rouge" data-language="sql">COPY tbl FROM 'test.csv';</pre> <h2 id="use-union_by_name-when-loading-files-with-different-schemas"> <a style="text-decoration: none;" href="#use-union_by_name-when-loading-files-with-different-schemas">Use <code class="language-plaintext highlighter-rouge">union_by_name</code> When Loading Files with Different Schemas</a> </h2> <p>The <code class="language-plaintext highlighter-rouge">union_by_name</code> option can be used to unify the schema of files that have different or missing columns. For files that do not have certain columns, <code class="language-plaintext highlighter-rouge">NULL</code> values are filled in.</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT * FROM read_csv('flights*.csv', union_by_name = true);</pre><div class="_attribution">
  <p class="_attribution-p">
    &copy; Copyright 2018&ndash;2024 Stichting DuckDB Foundation<br>Licensed under the MIT License.<br>
    <a href="https://duckdb.org/docs/data/csv/tips.html" class="_attribution-link">https://duckdb.org/docs/data/csv/tips.html</a>
  </p>
</div>
