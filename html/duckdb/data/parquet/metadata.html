<h1 class="title">Querying Parquet Metadata</h1>  <h2 id="parquet-metadata"> <a style="text-decoration: none;" href="#parquet-metadata">Parquet Metadata</a> </h2> <p>The <code class="language-plaintext highlighter-rouge">parquet_metadata</code> function can be used to query the metadata contained within a Parquet file, which reveals various internal details of the Parquet file such as the statistics of the different columns. This can be useful for figuring out what kind of skipping is possible in Parquet files, or even to obtain a quick overview of what the different columns contain:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT *
FROM parquet_metadata('test.parquet');</pre> <p>Below is a table of the columns returned by <code class="language-plaintext highlighter-rouge">parquet_metadata</code>.</p>  <table> <thead> <tr> <th>Field</th> <th>Type</th> </tr> </thead> <tbody> <tr> <td>file_name</td> <td>VARCHAR</td> </tr> <tr> <td>row_group_id</td> <td>BIGINT</td> </tr> <tr> <td>row_group_num_rows</td> <td>BIGINT</td> </tr> <tr> <td>row_group_num_columns</td> <td>BIGINT</td> </tr> <tr> <td>row_group_bytes</td> <td>BIGINT</td> </tr> <tr> <td>column_id</td> <td>BIGINT</td> </tr> <tr> <td>file_offset</td> <td>BIGINT</td> </tr> <tr> <td>num_values</td> <td>BIGINT</td> </tr> <tr> <td>path_in_schema</td> <td>VARCHAR</td> </tr> <tr> <td>type</td> <td>VARCHAR</td> </tr> <tr> <td>stats_min</td> <td>VARCHAR</td> </tr> <tr> <td>stats_max</td> <td>VARCHAR</td> </tr> <tr> <td>stats_null_count</td> <td>BIGINT</td> </tr> <tr> <td>stats_distinct_count</td> <td>BIGINT</td> </tr> <tr> <td>stats_min_value</td> <td>VARCHAR</td> </tr> <tr> <td>stats_max_value</td> <td>VARCHAR</td> </tr> <tr> <td>compression</td> <td>VARCHAR</td> </tr> <tr> <td>encodings</td> <td>VARCHAR</td> </tr> <tr> <td>index_page_offset</td> <td>BIGINT</td> </tr> <tr> <td>dictionary_page_offset</td> <td>BIGINT</td> </tr> <tr> <td>data_page_offset</td> <td>BIGINT</td> </tr> <tr> <td>total_compressed_size</td> <td>BIGINT</td> </tr> <tr> <td>total_uncompressed_size</td> <td>BIGINT</td> </tr> <tr> <td>key_value_metadata</td> <td>MAP(BLOB, BLOB)</td> </tr> </tbody> </table> <h2 id="parquet-schema"> <a style="text-decoration: none;" href="#parquet-schema">Parquet Schema</a> </h2> <p>The <code class="language-plaintext highlighter-rouge">parquet_schema</code> function can be used to query the internal schema contained within a Parquet file. Note that this is the schema as it is contained within the metadata of the Parquet file. If you want to figure out the column names and types contained within a Parquet file it is easier to use <code class="language-plaintext highlighter-rouge">DESCRIBE</code>.</p> <p>Fetch the column names and column types:</p> <pre class="language-sql highlighter-rouge" data-language="sql">DESCRIBE SELECT * FROM 'test.parquet';</pre> <p>Fetch the internal schema of a Parquet file:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT *
FROM parquet_schema('test.parquet');</pre> <p>Below is a table of the columns returned by <code class="language-plaintext highlighter-rouge">parquet_schema</code>.</p>  <table> <thead> <tr> <th>Field</th> <th>Type</th> </tr> </thead> <tbody> <tr> <td>file_name</td> <td>VARCHAR</td> </tr> <tr> <td>name</td> <td>VARCHAR</td> </tr> <tr> <td>type</td> <td>VARCHAR</td> </tr> <tr> <td>type_length</td> <td>VARCHAR</td> </tr> <tr> <td>repetition_type</td> <td>VARCHAR</td> </tr> <tr> <td>num_children</td> <td>BIGINT</td> </tr> <tr> <td>converted_type</td> <td>VARCHAR</td> </tr> <tr> <td>scale</td> <td>BIGINT</td> </tr> <tr> <td>precision</td> <td>BIGINT</td> </tr> <tr> <td>field_id</td> <td>BIGINT</td> </tr> <tr> <td>logical_type</td> <td>VARCHAR</td> </tr> </tbody> </table> <h2 id="parquet-file-metadata"> <a style="text-decoration: none;" href="#parquet-file-metadata">Parquet File Metadata</a> </h2> <p>The <code class="language-plaintext highlighter-rouge">parquet_file_metadata</code> function can be used to query file-level metadata such as the format version and the encryption algorithm used:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT *
FROM parquet_file_metadata('test.parquet');</pre> <p>Below is a table of the columns returned by <code class="language-plaintext highlighter-rouge">parquet_file_metadata</code>.</p>  <table> <thead> <tr> <th>Field</th> <th>Type</th> </tr> </thead> <tbody> <tr> <td>file_name</td> <td>VARCHAR</td> </tr> <tr> <td>created_by</td> <td>VARCHAR</td> </tr> <tr> <td>num_rows</td> <td>BIGINT</td> </tr> <tr> <td>num_row_groups</td> <td>BIGINT</td> </tr> <tr> <td>format_version</td> <td>BIGINT</td> </tr> <tr> <td>encryption_algorithm</td> <td>VARCHAR</td> </tr> <tr> <td>footer_signing_key_metadata</td> <td>VARCHAR</td> </tr> </tbody> </table> <h2 id="parquet-key-value-metadata"> <a style="text-decoration: none;" href="#parquet-key-value-metadata">Parquet Key-Value Metadata</a> </h2> <p>The <code class="language-plaintext highlighter-rouge">parquet_kv_metadata</code> function can be used to query custom metadata defined as key-value pairs:</p> <pre class="language-sql highlighter-rouge" data-language="sql">SELECT *
FROM parquet_kv_metadata('test.parquet');</pre> <p>Below is a table of the columns returned by <code class="language-plaintext highlighter-rouge">parquet_kv_metadata</code>.</p>  <table> <thead> <tr> <th>Field</th> <th>Type</th> </tr> </thead> <tbody> <tr> <td>file_name</td> <td>VARCHAR</td> </tr> <tr> <td>key</td> <td>BLOB</td> </tr> <tr> <td>value</td> <td>BLOB</td> </tr> </tbody> </table><div class="_attribution">
  <p class="_attribution-p">
    &copy; Copyright 2018&ndash;2024 Stichting DuckDB Foundation<br>Licensed under the MIT License.<br>
    <a href="https://duckdb.org/docs/data/parquet/metadata.html" class="_attribution-link">https://duckdb.org/docs/data/parquet/metadata.html</a>
  </p>
</div>
