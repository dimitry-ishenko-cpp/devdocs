<h1 id="class-Delegator" class="anchor-link class"> class Delegator </h1>
<dl class="meta">
<dt>Parent:</dt>
<dd class="meta-parent"><a href="basicobject.html">BasicObject</a></dd>
</dl> <section class="description"> <p>This library provides three different ways to delegate method calls to an object. The easiest to use is <a href="simpledelegator.html"><code>SimpleDelegator</code></a>. Pass an object to the constructor and all methods supported by the object will be delegated. This object can be changed later.</p> <p>Going a step further, the top level DelegateClass method allows you to easily setup delegation through class inheritance. This is considerably more flexible and thus probably the most common use for this library.</p> <p>Finally, if you need full control over the delegation scheme, you can inherit from the abstract class <a href="delegator.html"><code>Delegator</code></a> and customize as needed. (If you find yourself needing this control, have a look at <a href="forwardable.html"><code>Forwardable</code></a> which is also in the standard library. It may suit your needs better.)</p> <p>SimpleDelegatorâ€™s implementation serves as a nice example of the use of Delegator:</p> <pre class="ruby" data-language="ruby">require 'delegate'

class SimpleDelegator &lt; Delegator
  def __getobj__
    @delegate_sd_obj # return object we are delegating to, required
  end

  def __setobj__(obj)
    @delegate_sd_obj = obj # change delegation object,
                           # a feature we're providing
  end
end
</pre> <h2 id="class-Delegator-label-Notes">Notes</h2> <p>Be advised, <span><code>RDoc</code></span> will not detect delegated methods.</p> </section> <section id="5Buntitled-5D" class="documentation-section anchor-link"> <section class="constants-list"> <header> <h3>Constants</h3> </header> <dl> <dt id="KERNEL_RESPOND_TO">KERNEL_RESPOND_TO </dt>

<dt id="VERSION">VERSION </dt>

</dl> </section> <section id="public-class-5Buntitled-5D-method-details" class="method-section anchor-link"> <header> <h3>Public Class Methods</h3> </header> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-c-new"> <a href="#method-c-new" title="Link to this method"> <span class="method-name">new</span> <span class="method-args">(obj)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="new-source"> <pre class="ruby" data-language="ruby"># File lib/delegate.rb, line 75
def initialize(obj)
  __setobj__(obj)
end</pre> </div>  <p>Pass in the <em>obj</em> to delegate method calls to. All methods supported by <em>obj</em> will be delegated to.</p> </div> </div> </section> <section id="public-instance-5Buntitled-5D-method-details" class="method-section anchor-link"> <header> <h3>Public Instance Methods</h3> </header> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-21"> <a href="#method-i-21" title="Link to this method"> <span class="method-name">!</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="21-source"> <pre class="ruby" data-language="ruby"># File lib/delegate.rb, line 180
def !
  !__getobj__
end</pre> </div>  <p>Delegates ! to the _<em>getobj</em>_</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-21-3D"> <a href="#method-i-21-3D" title="Link to this method"> <span class="method-name">!=</span> <span class="method-args">(obj)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="21-3D-source"> <pre class="ruby" data-language="ruby"># File lib/delegate.rb, line 164
def !=(obj)
  return false if obj.equal?(self)
  __getobj__ != obj
end</pre> </div>  <p>Returns true if two objects are not considered of equal value.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-3D-3D"> <a href="#method-i-3D-3D" title="Link to this method"> <span class="method-name">==</span> <span class="method-args">(obj)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="3D-3D-source"> <pre class="ruby" data-language="ruby"># File lib/delegate.rb, line 156
def ==(obj)
  return true if obj.equal?(self)
  self.__getobj__ == obj
end</pre> </div>  <p>Returns true if two objects are considered of equal value.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-__getobj__"> <a href="#method-i-__getobj__" title="Link to this method"> <span class="method-name">__getobj__</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="__getobj__-source"> <pre class="ruby" data-language="ruby"># File lib/delegate.rb, line 188
def __getobj__
  __raise__ ::NotImplementedError, "need to define '__getobj__'"
end</pre> </div>  <p>This method must be overridden by subclasses and should return the object method calls are being delegated to.</p> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-__raise__"> <a href="#method-i-__raise__" title="Link to this method"> <span class="method-name">__raise__</span> <span class="method-args">()</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="delegator.html#method-i-raise">raise</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-__setobj__"> <a href="#method-i-__setobj__" title="Link to this method"> <span class="method-name">__setobj__</span> <span class="method-args">(obj)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="__setobj__-source"> <pre class="ruby" data-language="ruby"># File lib/delegate.rb, line 196
def __setobj__(obj)
  __raise__ ::NotImplementedError, "need to define '__setobj__'"
end</pre> </div>  <p>This method must be overridden by subclasses and change the object delegate to <em>obj</em>.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-eql-3F"> <a href="#method-i-eql-3F" title="Link to this method"> <span class="method-name">eql?</span> <span class="method-args">(obj)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="eql-3F-source"> <pre class="ruby" data-language="ruby"># File lib/delegate.rb, line 172
def eql?(obj)
  return true if obj.equal?(self)
  obj.eql?(__getobj__)
end</pre> </div>  <p>Returns true if two objects are considered of equal value.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-freeze"> <a href="#method-i-freeze" title="Link to this method"> <span class="method-name">freeze</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="freeze-source"> <pre class="ruby" data-language="ruby"># File lib/delegate.rb, line 237
def freeze
  __getobj__.freeze
  super()
end</pre> </div>  <p>:method: freeze Freeze both the object returned by _<em>getobj</em>_ and self.</p> <div class="method-calls-super"> Calls superclass method </div> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-marshal_dump"> <a href="#method-i-marshal_dump" title="Link to this method"> <span class="method-name">marshal_dump</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="marshal_dump-source"> <pre class="ruby" data-language="ruby"># File lib/delegate.rb, line 203
def marshal_dump
  ivars = instance_variables.reject {|var| /\A@delegate_/ =~ var}
  [
    :__v2__,
    ivars, ivars.map {|var| instance_variable_get(var)},
    __getobj__
  ]
end</pre> </div>  <p>Serialization support for the object returned by _<em>getobj</em>_.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-marshal_load"> <a href="#method-i-marshal_load" title="Link to this method"> <span class="method-name">marshal_load</span> <span class="method-args">(data)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="marshal_load-source"> <pre class="ruby" data-language="ruby"># File lib/delegate.rb, line 215
def marshal_load(data)
  version, vars, values, obj = data
  if version == :__v2__
    vars.each_with_index {|var, i| instance_variable_set(var, values[i])}
    __setobj__(obj)
  else
    __setobj__(data)
  end
end</pre> </div>  <p>Reinitializes delegation from a serialized object.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-method_missing"> <a href="#method-i-method_missing" title="Link to this method"> <span class="method-name">method_missing</span> <span class="method-args">(m, *args, &amp;block)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="method_missing-source"> <pre class="ruby" data-language="ruby"># File lib/delegate.rb, line 82
               def method_missing(m, *args, &amp;block)
  r = true
  target = self.__getobj__ {r = false}

  if r &amp;&amp; target_respond_to?(target, m, false)
    target.__send__(m, *args, &amp;block)
  elsif ::Kernel.method_defined?(m) || ::Kernel.private_method_defined?(m)
    ::Kernel.instance_method(m).bind_call(self, *args, &amp;block)
  else
    super(m, *args, &amp;block)
  end
end</pre> </div>  <div class="method-calls-super"> Calls superclass method <a href="basicobject.html#method-i-method_missing"><code>BasicObject#method_missing</code></a> </div> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-methods"> <a href="#method-i-methods" title="Link to this method"> <span class="method-name">methods</span> <span class="method-args">(all=true)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="methods-source"> <pre class="ruby" data-language="ruby"># File lib/delegate.rb, line 131
def methods(all=true)
  __getobj__.methods(all) | super
end</pre> </div>  <p>Returns the methods available to this delegate object as the union of this objectâ€™s and _<em>getobj</em>_ methods.</p> <div class="method-calls-super"> Calls superclass method </div> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-protected_methods"> <a href="#method-i-protected_methods" title="Link to this method"> <span class="method-name">protected_methods</span> <span class="method-args">(all=true)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="protected_methods-source"> <pre class="ruby" data-language="ruby"># File lib/delegate.rb, line 147
def protected_methods(all=true)
  __getobj__.protected_methods(all) | super
end</pre> </div>  <p>Returns the methods available to this delegate object as the union of this objectâ€™s and _<em>getobj</em>_ protected methods.</p> <div class="method-calls-super"> Calls superclass method </div> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-public_methods"> <a href="#method-i-public_methods" title="Link to this method"> <span class="method-name">public_methods</span> <span class="method-args">(all=true)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="public_methods-source"> <pre class="ruby" data-language="ruby"># File lib/delegate.rb, line 139
def public_methods(all=true)
  __getobj__.public_methods(all) | super
end</pre> </div>  <p>Returns the methods available to this delegate object as the union of this objectâ€™s and _<em>getobj</em>_ public methods.</p> <div class="method-calls-super"> Calls superclass method </div> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-raise"> <a href="#method-i-raise" title="Link to this method"> <span class="method-name">raise</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="raise-source"> <pre class="c" data-language="c"># File lib/delegate.rb, line 66
  </pre> </div>  <p>Use <a href="delegator.html#method-i-__raise__"><code>__raise__</code></a> if your <a href="delegator.html"><code>Delegator</code></a> does not have a object to delegate the <a href="delegator.html#method-i-raise"><code>raise</code></a> method call.</p> </div> <div class="aliases"> Also aliased as: <a href="delegator.html#method-i-__raise__">__raise__</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-respond_to_missing-3F"> <a href="#method-i-respond_to_missing-3F" title="Link to this method"> <span class="method-name">respond_to_missing?</span> <span class="method-args">(m, include_private)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="respond_to_missing-3F-source"> <pre class="ruby" data-language="ruby"># File lib/delegate.rb, line 99
def respond_to_missing?(m, include_private)
  r = true
  target = self.__getobj__ {r = false}
  r &amp;&amp;= target_respond_to?(target, m, include_private)
  if r &amp;&amp; include_private &amp;&amp; !target_respond_to?(target, m, false)
    warn "delegator does not forward private method \##{m}", uplevel: 3
    return false
  end
  r
end</pre> </div>  <p>Checks for a method provided by this the delegate object by forwarding the call through _<em>getobj</em>_.</p> </div> </div> </section> <section id="private-instance-5Buntitled-5D-method-details" class="method-section anchor-link"> <header> <h3>Private Instance Methods</h3> </header> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-target_respond_to-3F"> <a href="#method-i-target_respond_to-3F" title="Link to this method"> <span class="method-name">target_respond_to?</span> <span class="method-args">(target, m, include_private)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="target_respond_to-3F-source"> <pre class="ruby" data-language="ruby"># File lib/delegate.rb, line 114
        def target_respond_to?(target, m, include_private)
  case target
  when Object
    target.respond_to?(m, include_private)
  else
    if KERNEL_RESPOND_TO.bind_call(target, :respond_to?)
      target.respond_to?(m, include_private)
    else
      KERNEL_RESPOND_TO.bind_call(target, m, include_private)
    end
  end
end</pre> </div>  <p>Handle <a href="basicobject.html"><code>BasicObject</code></a> instances</p> </div> </div> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    Ruby Core &copy; 1993&ndash;2024 Yukihiro Matsumoto<br>Licensed under the Ruby License.<br>Ruby Standard Library &copy; contributors<br>Licensed under their own licenses.<br>
    
  </p>
</div>
