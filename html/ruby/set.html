<h1 id="class-Set" class="anchor-link class"> class Set </h1>
<dl class="meta">
<dt>Parent:</dt>
<dd class="meta-parent"><a href="object.html">Object</a></dd>
<dt>Included modules:</dt>
<dd class="meta-includes"><a class="include" href="enumerable.html">Enumerable</a></dd>
</dl> <section class="description"> <p>This library provides the <a href="set.html"><code>Set</code></a> class, which implements a collection of unordered values with no duplicates. It is a hybrid of Array’s intuitive inter-operation facilities and Hash’s fast lookup.</p> <p>The method <a href="set.html#method-i-to_set"><code>to_set</code></a> is added to <a href="enumerable.html"><code>Enumerable</code></a> for convenience.</p> <p><a href="set.html"><code>Set</code></a> is easy to use with <a href="enumerable.html"><code>Enumerable</code></a> objects (implementing <code>each</code>). Most of the initializer methods and binary operators accept generic <a href="enumerable.html"><code>Enumerable</code></a> objects besides sets and arrays. An <a href="enumerable.html"><code>Enumerable</code></a> object can be converted to <a href="set.html"><code>Set</code></a> using the <a href="set.html#method-i-to_set"><code>to_set</code></a> method.</p> <p><a href="set.html"><code>Set</code></a> uses <a href="hash.html"><code>Hash</code></a> as storage, so you must note the following points:</p> <ul>
<li> <p>Equality of elements is determined according to <a href="object.html#method-i-eql-3F"><code>Object#eql?</code></a> and <a href="object.html#method-i-hash"><code>Object#hash</code></a>. Use <a href="set.html#method-i-compare_by_identity"><code>Set#compare_by_identity</code></a> to make a set compare its elements by their identity.</p> </li>
<li> <p><a href="set.html"><code>Set</code></a> assumes that the identity of each element does not change while it is stored. Modifying an element of a set will render the set to an unreliable state.</p> </li>
<li> <p>When a string is to be stored, a frozen copy of the string is stored instead unless the original string is already frozen.</p> </li>
</ul> <h2 id="class-Set-label-Comparison">Comparison</h2> <p>The comparison operators <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, and <code>&gt;=</code> are implemented as shorthand for the {proper_,}{subset?,superset?} methods. The <code>&lt;=&gt;</code> operator reflects this order, or return <code>nil</code> for sets that both have distinct elements (<code>{x, y}</code> vs. <code>{x, z}</code> for example).</p> <h2 id="class-Set-label-Example">Example</h2> <pre class="ruby" data-language="ruby">require 'set'
s1 = Set[1, 2]                        #=&gt; #&lt;Set: {1, 2}&gt;
s2 = [1, 2].to_set                    #=&gt; #&lt;Set: {1, 2}&gt;
s1 == s2                              #=&gt; true
s1.add("foo")                         #=&gt; #&lt;Set: {1, 2, "foo"}&gt;
s1.merge([2, 6])                      #=&gt; #&lt;Set: {1, 2, "foo", 6}&gt;
s1.subset?(s2)                        #=&gt; false
s2.subset?(s1)                        #=&gt; true
</pre> <h2 id="class-Set-label-Contact">Contact</h2> <ul><li> <p>Akinori MUSHA &lt;<a href="mailto:knu@iDaemons.org.html">knu@iDaemons.org</a>&gt; (current maintainer)</p> </li></ul> <h2 id="class-Set-label-What-27s+Here">What’s Here</h2> <p>First, what’s elsewhere. Class Set:</p> <ul>
<li> <p>Inherits from <a href="object.html#class-Object-label-What-27s+Here">class Object</a>.</p> </li>
<li> <p>Includes <a href="enumerable.html#module-Enumerable-label-What-27s+Here">module Enumerable</a>, which provides dozens of additional methods.</p> </li>
</ul> <p>In particular, class Set does not have many methods of its own for fetching or for iterating. Instead, it relies on those in Enumerable.</p> <p>Here, class Set provides methods that are useful for:</p> <ul>
<li> <p><a href="#class-Set-label-Methods+for+Creating+a+Set">Creating a Set</a></p> </li>
<li> <p><a href="#class-Set-label-Methods+for+Set+Operations">Set Operations</a></p> </li>
<li> <p><a href="#class-Set-label-Methods+for+Comparing">Comparing</a></p> </li>
<li> <p><a href="#class-Set-label-Methods+for+Querying">Querying</a></p> </li>
<li> <p><a href="#class-Set-label-Methods+for+Assigning">Assigning</a></p> </li>
<li> <p><a href="#class-Set-label-Methods+for+Deleting">Deleting</a></p> </li>
<li> <p><a href="#class-Set-label-Methods+for+Converting">Converting</a></p> </li>
<li> <p><a href="#class-Set-label-Methods+for+Iterating">Iterating</a></p> </li>
<li> <p><a href="#class-Set-label-Other+Methods">And more.…</a></p> </li>
</ul> <h3 id="class-Set-label-Methods+for+Creating+a+Set">Methods for Creating a Set</h3> <ul>
<li> <p><a href="set.html#method-c-5B-5D"><code>::[]</code></a>: Returns a new set containing the given objects.</p> </li>
<li> <p><a href="set.html#method-c-new"><code>::new</code></a>: Returns a new set containing either the given objects (if no block given) or the return values from the called block (if a block given).</p> </li>
</ul> <h3 id="class-Set-label-Methods+for+Set+Operations">Methods for Set Operations</h3> <ul>
<li> <p><a href="#method-i-7C">|</a> (aliased as <a href="set.html#method-i-union"><code>union</code></a> and <a href="set.html#method-i-2B"><code>+</code></a>): Returns a new set containing all elements from <code>self</code> and all elements from a given enumerable (no duplicates).</p> </li>
<li> <p><a href="#method-i-26">&amp;</a> (aliased as <a href="set.html#method-i-intersection"><code>intersection</code></a>): Returns a new set containing all elements common to <code>self</code> and a given enumerable.</p> </li>
<li> <p><a href="#method-i-2D">-</a> (aliased as <a href="set.html#method-i-difference"><code>difference</code></a>): Returns a copy of <code>self</code> with all elements in a given enumerable removed.</p> </li>
<li> <p><a href="#method-i-5E">^</a>: Returns a new set containing all elements from <code>self</code> and a given enumerable except those common to both.</p> </li>
</ul> <h3 id="class-Set-label-Methods+for+Comparing">Methods for Comparing</h3> <ul>
<li> <p><a href="#method-i-3C-3D-3E">&lt;=&gt;</a>: Returns -1, 0, or 1 as <code>self</code> is less than, equal to, or greater than a given object.</p> </li>
<li> <p><a href="#method-i-3D-3D">==</a>: Returns whether <code>self</code> and a given enumerable are equal, as determined by <a href="object.html#method-i-eql-3F"><code>Object#eql?</code></a>.</p> </li>
<li> <p><a href="set.html#method-i-compare_by_identity-3F"><code>compare_by_identity?</code></a>: Returns whether the set considers only identity when comparing elements.</p> </li>
</ul> <h3 id="class-Set-label-Methods+for+Querying">Methods for Querying</h3> <ul>
<li> <p><a href="set.html#method-i-length"><code>length</code></a> (aliased as <a href="set.html#method-i-size"><code>size</code></a>): Returns the count of elements.</p> </li>
<li> <p><a href="set.html#method-i-empty-3F"><code>empty?</code></a>: Returns whether the set has no elements.</p> </li>
<li> <p><a href="set.html#method-i-include-3F"><code>include?</code></a> (aliased as <a href="set.html#method-i-member-3F"><code>member?</code></a> and <a href="set.html#method-i-3D-3D-3D"><code>===</code></a>): Returns whether a given object is an element in the set.</p> </li>
<li> <p><a href="set.html#method-i-subset-3F"><code>subset?</code></a> (aliased as <a href="#method-i-3C-3D">&lt;=</a>): Returns whether a given object is a subset of the set.</p> </li>
<li> <p><a href="set.html#method-i-proper_subset-3F"><code>proper_subset?</code></a> (aliased as <a href="#method-i-3C">&lt;</a>): Returns whether a given enumerable is a proper subset of the set.</p> </li>
<li> <p><a href="set.html#method-i-superset-3F"><code>superset?</code></a> (aliased as <a href="#method-i-3E-3D">&gt;=</a>]): Returns whether a given enumerable is a superset of the set.</p> </li>
<li> <p><a href="set.html#method-i-proper_superset-3F"><code>proper_superset?</code></a> (aliased as <a href="#method-i-3E">&gt;</a>): Returns whether a given enumerable is a proper superset of the set.</p> </li>
<li> <p><a href="set.html#method-i-disjoint-3F"><code>disjoint?</code></a>: Returns <code>true</code> if the set and a given enumerable have no common elements, <code>false</code> otherwise.</p> </li>
<li> <p><a href="set.html#method-i-intersect-3F"><code>intersect?</code></a>: Returns <code>true</code> if the set and a given enumerable: have any common elements, <code>false</code> otherwise.</p> </li>
<li> <p><a href="set.html#method-i-compare_by_identity-3F"><code>compare_by_identity?</code></a>: Returns whether the set considers only identity when comparing elements.</p> </li>
</ul> <h3 id="class-Set-label-Methods+for+Assigning">Methods for Assigning</h3> <ul>
<li> <p><a href="set.html#method-i-add"><code>add</code></a> (aliased as <a href="set.html#method-i-3C-3C"><code>&lt;&lt;</code></a>): Adds a given object to the set; returns <code>self</code>.</p> </li>
<li> <p><a href="set.html#method-i-add-3F"><code>add?</code></a>: If the given object is not an element in the set, adds it and returns <code>self</code>; otherwise, returns <code>nil</code>.</p> </li>
<li> <p><a href="set.html#method-i-merge"><code>merge</code></a>: Merges the elements of each given enumerable object to the set; returns <code>self</code>.</p> </li>
<li> <p><a href="set.html#method-i-replace"><code>replace</code></a>: Replaces the contents of the set with the contents of a given enumerable.</p> </li>
</ul> <h3 id="class-Set-label-Methods+for+Deleting">Methods for Deleting</h3> <ul>
<li> <p><a href="set.html#method-i-clear"><code>clear</code></a>: Removes all elements in the set; returns <code>self</code>.</p> </li>
<li> <p><a href="set.html#method-i-delete"><code>delete</code></a>: Removes a given object from the set; returns <code>self</code>.</p> </li>
<li> <p><a href="set.html#method-i-delete-3F"><code>delete?</code></a>: If the given object is an element in the set, removes it and returns <code>self</code>; otherwise, returns <code>nil</code>.</p> </li>
<li> <p><a href="set.html#method-i-subtract"><code>subtract</code></a>: Removes each given object from the set; returns <code>self</code>.</p> </li>
<li> <p><a href="set.html#method-i-delete_if"><code>delete_if</code></a> - Removes elements specified by a given block.</p> </li>
<li> <p><a href="set.html#method-i-select-21"><code>select!</code></a> (aliased as <a href="set.html#method-i-filter-21"><code>filter!</code></a>): Removes elements not specified by a given block.</p> </li>
<li> <p><a href="set.html#method-i-keep_if"><code>keep_if</code></a>: Removes elements not specified by a given block.</p> </li>
<li> <p><a href="set.html#method-i-reject-21"><code>reject!</code></a> Removes elements specified by a given block.</p> </li>
</ul> <h3 id="class-Set-label-Methods+for+Converting">Methods for Converting</h3> <ul>
<li> <p><a href="set.html#method-i-classify"><code>classify</code></a>: Returns a hash that classifies the elements, as determined by the given block.</p> </li>
<li> <p><a href="set.html#method-i-collect-21"><code>collect!</code></a> (aliased as <a href="set.html#method-i-map-21"><code>map!</code></a>): Replaces each element with a block return-value.</p> </li>
<li> <p><a href="set.html#method-i-divide"><code>divide</code></a>: Returns a hash that classifies the elements, as determined by the given block; differs from <a href="set.html#method-i-classify"><code>classify</code></a> in that the block may accept either one or two arguments.</p> </li>
<li> <p><a href="set.html#method-i-flatten"><code>flatten</code></a>: Returns a new set that is a recursive flattening of <code>self</code>. <a href="set.html#method-i-flatten-21"><code>flatten!</code></a>: Replaces each nested set in <code>self</code> with the elements from that set.</p> </li>
<li> <p><a href="set.html#method-i-inspect"><code>inspect</code></a> (aliased as <a href="set.html#method-i-to_s"><code>to_s</code></a>): Returns a string displaying the elements.</p> </li>
<li> <p><a href="set.html#method-i-join"><code>join</code></a>: Returns a string containing all elements, converted to strings as needed, and joined by the given record separator.</p> </li>
<li> <p><a href="set.html#method-i-to_a"><code>to_a</code></a>: Returns an array containing all set elements.</p> </li>
<li> <p><a href="set.html#method-i-to_set"><code>to_set</code></a>: Returns <code>self</code> if given no arguments and no block; with a block given, returns a new set consisting of block return values.</p> </li>
</ul> <h3 id="class-Set-label-Methods+for+Iterating">Methods for Iterating</h3> <ul><li> <p><a href="set.html#method-i-each"><code>each</code></a>: Calls the block with each successive element; returns <code>self</code>.</p> </li></ul> <h3 id="class-Set-label-Other+Methods">Other Methods</h3> <ul><li> <p><a href="set.html#method-i-reset"><code>reset</code></a>: Resets the internal state; useful if an object has been modified while an element in the set.</p> </li></ul> </section> <section id="5Buntitled-5D" class="documentation-section anchor-link"> <section class="constants-list"> <header> <h3>Constants</h3> </header> <dl> <dt id="VERSION">VERSION </dt>

</dl> </section> <section id="public-class-5Buntitled-5D-method-details" class="method-section anchor-link"> <header> <h3>Public Class Methods</h3> </header> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-c-5B-5D"> <a href="#method-c-5B-5D" title="Link to this method"> <span class="method-name">[]</span> <span class="method-args">(*ary)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="5B-5D-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 228
def self.[](*ary)
  new(ary)
end</pre> </div>  <p>Creates a new set containing the given objects.</p> <pre class="ruby" data-language="ruby">Set[1, 2]                   # =&gt; #&lt;Set: {1, 2}&gt;
Set[1, 2, 1]                # =&gt; #&lt;Set: {1, 2}&gt;
Set[1, 'c', :s]             # =&gt; #&lt;Set: {1, "c", :s}&gt;
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-c-json_create"> <a href="#method-c-json_create" title="Link to this method"> <span class="method-name">json_create</span> <span class="method-args">(object)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="json_create-source"> <pre class="ruby" data-language="ruby"># File ext/json/lib/json/add/set.rb, line 9
def self.json_create(object)
  new object['a']
end</pre> </div>  <p>See <a href="set.html#method-i-as_json"><code>as_json</code></a>.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-c-new"> <a href="#method-c-new" title="Link to this method"> <span class="method-name">new</span> <span class="method-args">(enum = nil) { |o| ... }</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="new-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 243
def initialize(enum = nil, &amp;block) # :yields: o
  @hash ||= Hash.new(false)

  enum.nil? and return

  if block
    do_with_enum(enum) { |o| add(block[o]) }
  else
    merge(enum)
  end
end</pre> </div>  <p>Creates a new set containing the elements of the given enumerable object.</p> <p>If a block is given, the elements of enum are preprocessed by the given block.</p> <pre class="ruby" data-language="ruby">Set.new([1, 2])                       #=&gt; #&lt;Set: {1, 2}&gt;
Set.new([1, 2, 1])                    #=&gt; #&lt;Set: {1, 2}&gt;
Set.new([1, 'c', :s])                 #=&gt; #&lt;Set: {1, "c", :s}&gt;
Set.new(1..5)                         #=&gt; #&lt;Set: {1, 2, 3, 4, 5}&gt;
Set.new([1, 2, 3]) { |x| x * x }      #=&gt; #&lt;Set: {1, 4, 9}&gt;
</pre> </div> </div> </section> <section id="public-instance-5Buntitled-5D-method-details" class="method-section anchor-link"> <header> <h3>Public Instance Methods</h3> </header> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-26"> <a href="#method-i-26" title="Link to this method"> <span class="method-name">&amp;</span> <span class="method-args">(enum)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="26-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 643
def &amp;(enum)
  n = self.class.new
  if enum.is_a?(Set)
    if enum.size &gt; size
      each { |o| n.add(o) if enum.include?(o) }
    else
      enum.each { |o| n.add(o) if include?(o) }
    end
  else
    do_with_enum(enum) { |o| n.add(o) if include?(o) }
  end
  n
end</pre> </div>  <p>Returns a new set containing elements common to the set and the given enumerable object.</p> <pre class="ruby" data-language="ruby">Set[1, 3, 5] &amp; Set[3, 2, 1]             #=&gt; #&lt;Set: {3, 1}&gt;
Set['a', 'b', 'z'] &amp; ['a', 'b', 'c']    #=&gt; #&lt;Set: {"a", "b"}&gt;
</pre> </div> <div class="aliases"> Also aliased as: <a href="set.html#method-i-intersection">intersection</a> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-2B"> <a href="#method-i-2B" title="Link to this method"> <span class="method-name">+</span> <span class="method-args">(enum)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="set.html#method-i-7C">|</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-2D"> <a href="#method-i-2D" title="Link to this method"> <span class="method-name">-</span> <span class="method-args">(enum)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="2D-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 633
def -(enum)
  dup.subtract(enum)
end</pre> </div>  <p>Returns a new set built by duplicating the set, removing every element that appears in the given enumerable object.</p> <pre class="ruby" data-language="ruby">Set[1, 3, 5] - Set[1, 5]                #=&gt; #&lt;Set: {3}&gt;
Set['a', 'b', 'z'] - ['a', 'c']         #=&gt; #&lt;Set: {"b", "z"}&gt;
</pre> </div> <div class="aliases"> Also aliased as: <a href="set.html#method-i-difference">difference</a> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-3C"> <a href="#method-i-3C" title="Link to this method"> <span class="method-name">&lt;</span> <span class="method-args">(set)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="set.html#method-i-proper_subset-3F">proper_subset?</a> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-3C-3C"> <a href="#method-i-3C-3C" title="Link to this method"> <span class="method-name">&lt;&lt;</span> <span class="method-args">(o)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="set.html#method-i-add">add</a> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-3C-3D"> <a href="#method-i-3C-3D" title="Link to this method"> <span class="method-name">&lt;=</span> <span class="method-args">(set)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="set.html#method-i-subset-3F">subset?</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-3C-3D-3E"> <a href="#method-i-3C-3D-3E" title="Link to this method"> <span class="method-name">&lt;=&gt;</span> <span class="method-args">(set)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="3C-3D-3E-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 456
def &lt;=&gt;(set)
  return unless set.is_a?(Set)

  case size &lt;=&gt; set.size
  when -1 then -1 if proper_subset?(set)
  when +1 then +1 if proper_superset?(set)
  else 0 if self.==(set)
  end
end</pre> </div>  <p>Returns 0 if the set are equal, -1 / +1 if the set is a proper subset / superset of the given set, or nil if they both have unique elements.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-3D-3D"> <a href="#method-i-3D-3D" title="Link to this method"> <span class="method-name">==</span> <span class="method-args">(other)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="3D-3D-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 677
def ==(other)
  if self.equal?(other)
    true
  elsif other.instance_of?(self.class)
    @hash == other.instance_variable_get(:@hash)
  elsif other.is_a?(Set) &amp;&amp; self.size == other.size
    other.all? { |o| @hash.include?(o) }
  else
    false
  end
end</pre> </div>  <p>Returns true if two sets are equal. The equality of each couple of elements is defined according to <a href="object.html#method-i-eql-3F"><code>Object#eql?</code></a>.</p> <pre class="ruby" data-language="ruby">Set[1, 2] == Set[2, 1]                       #=&gt; true
Set[1, 3, 5] == Set[1, 5]                    #=&gt; false
Set['a', 'b', 'c'] == Set['a', 'c', 'b']     #=&gt; true
Set['a', 'b', 'c'] == ['a', 'c', 'b']        #=&gt; false
</pre> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-3D-3D-3D"> <a href="#method-i-3D-3D-3D" title="Link to this method"> <span class="method-name">===</span> <span class="method-args">(o)</span> </a> </div> </div> <div class="method-description"> <p>Returns true if the given object is a member of the set, and false otherwise.</p> <p>Used in case statements:</p> <pre class="ruby" data-language="ruby">require 'set'

case :apple
when Set[:potato, :carrot]
  "vegetable"
when Set[:apple, :banana]
  "fruit"
end
# =&gt; "fruit"
</pre> <p>Or by itself:</p> <pre class="ruby" data-language="ruby">Set[1, 2, 3] === 2   #=&gt; true
Set[1, 2, 3] === 4   #=&gt; false
</pre> </div> <div class="aliases"> Alias for: <a href="set.html#method-i-include-3F">include?</a> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-3E"> <a href="#method-i-3E" title="Link to this method"> <span class="method-name">&gt;</span> <span class="method-args">(set)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="set.html#method-i-proper_superset-3F">proper_superset?</a> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-3E-3D"> <a href="#method-i-3E-3D" title="Link to this method"> <span class="method-name">&gt;=</span> <span class="method-args">(set)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="set.html#method-i-superset-3F">superset?</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-5E"> <a href="#method-i-5E" title="Link to this method"> <span class="method-name">^</span> <span class="method-args">(enum)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="5E-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 664
def ^(enum)
  n = self.class.new(enum)
  each { |o| n.add(o) unless n.delete?(o) }
  n
end</pre> </div>  <p>Returns a new set containing elements exclusive between the set and the given enumerable object. <code>(set ^ enum)</code> is equivalent to <code>((set | enum) - (set &amp; enum))</code>.</p> <pre class="ruby" data-language="ruby">Set[1, 2] ^ Set[2, 3]                   #=&gt; #&lt;Set: {3, 1}&gt;
Set[1, 'b', 'c'] ^ ['b', 'd']           #=&gt; #&lt;Set: {"d", 1, "c"}&gt;
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-7C"> <a href="#method-i-7C" title="Link to this method"> <span class="method-name">|</span> <span class="method-args">(enum)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="7C-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 622
def |(enum)
  dup.merge(enum)
end</pre> </div>  <p>Returns a new set built by merging the set and the elements of the given enumerable object.</p> <pre class="ruby" data-language="ruby">Set[1, 2, 3] | Set[2, 4, 5]         #=&gt; #&lt;Set: {1, 2, 3, 4, 5}&gt;
Set[1, 5, 'z'] | (1..6)             #=&gt; #&lt;Set: {1, 5, "z", 2, 3, 4, 6}&gt;
</pre> </div> <div class="aliases"> Also aliased as: <a href="set.html#method-i-2B">+</a>, <a href="set.html#method-i-union">union</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-add"> <a href="#method-i-add" title="Link to this method"> <span class="method-name">add</span> <span class="method-args">(o)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="add-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 514
def add(o)
  @hash[o] = true
  self
end</pre> </div>  <p>Adds the given object to the set and returns self. Use <code>merge</code> to add many elements at once.</p> <pre class="ruby" data-language="ruby">Set[1, 2].add(3)                    #=&gt; #&lt;Set: {1, 2, 3}&gt;
Set[1, 2].add([3, 4])               #=&gt; #&lt;Set: {1, 2, [3, 4]}&gt;
Set[1, 2].add(2)                    #=&gt; #&lt;Set: {1, 2}&gt;
</pre> </div> <div class="aliases"> Also aliased as: <a href="set.html#method-i-3C-3C">&lt;&lt;</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-add-3F"> <a href="#method-i-add-3F" title="Link to this method"> <span class="method-name">add?</span> <span class="method-args">(o)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="add-3F-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 526
def add?(o)
  add(o) unless include?(o)
end</pre> </div>  <p>Adds the given object to the set and returns self. If the object is already in the set, returns nil.</p> <pre class="ruby" data-language="ruby">Set[1, 2].add?(3)                    #=&gt; #&lt;Set: {1, 2, 3}&gt;
Set[1, 2].add?([3, 4])               #=&gt; #&lt;Set: {1, 2, [3, 4]}&gt;
Set[1, 2].add?(2)                    #=&gt; nil
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-as_json"> <a href="#method-i-as_json" title="Link to this method"> <span class="method-name">as_json</span> <span class="method-args">(*)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="as_json-source"> <pre class="ruby" data-language="ruby"># File ext/json/lib/json/add/set.rb, line 28
def as_json(*)
  {
    JSON.create_id =&gt; self.class.name,
    'a'            =&gt; to_a,
  }
end</pre> </div>  <p>Methods <a href="set.html#method-i-as_json"><code>Set#as_json</code></a> and <a href="set.html#method-c-json_create"><code>Set.json_create</code></a> may be used to serialize and deserialize a Set object; see <a href="marshal.html"><code>Marshal</code></a>.</p> <p>Method <a href="set.html#method-i-as_json"><code>Set#as_json</code></a> serializes <code>self</code>, returning a 2-element hash representing <code>self</code>:</p> <pre class="ruby" data-language="ruby">require 'json/add/set'
x = Set.new(%w/foo bar baz/).as_json
# =&gt; {"json_class"=&gt;"Set", "a"=&gt;["foo", "bar", "baz"]}
</pre> <p>Method <code>JSON.create</code> deserializes such a hash, returning a Set object:</p> <pre class="ruby" data-language="ruby">Set.json_create(x) # =&gt; #&lt;Set: {"foo", "bar", "baz"}&gt;
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-classify"> <a href="#method-i-classify" title="Link to this method"> <span class="method-name">classify</span> <span class="method-args">() { |o| ... }</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="classify-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 746
def classify # :yields: o
  block_given? or return enum_for(__method__) { size }

  h = {}

  each { |i|
    (h[yield(i)] ||= self.class.new).add(i)
  }

  h
end</pre> </div>  <p>Classifies the set by the return value of the given block and returns a hash of {value =&gt; set of elements} pairs. The block is called once for each element of the set, passing the element as parameter.</p> <pre class="ruby" data-language="ruby">require 'set'
files = Set.new(Dir.glob("*.rb"))
hash = files.classify { |f| File.mtime(f).year }
hash       #=&gt; {2000=&gt;#&lt;Set: {"a.rb", "b.rb"}&gt;,
           #    2001=&gt;#&lt;Set: {"c.rb", "d.rb", "e.rb"}&gt;,
           #    2002=&gt;#&lt;Set: {"f.rb"}&gt;}
</pre> <p>Returns an enumerator if no block is given.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-clear"> <a href="#method-i-clear" title="Link to this method"> <span class="method-name">clear</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="clear-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 316
def clear
  @hash.clear
  self
end</pre> </div>  <p>Removes all elements and returns self.</p> <pre class="ruby" data-language="ruby">set = Set[1, 'c', :s]             #=&gt; #&lt;Set: {1, "c", :s}&gt;
set.clear                         #=&gt; #&lt;Set: {}&gt;
set                               #=&gt; #&lt;Set: {}&gt;
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-collect-21"> <a href="#method-i-collect-21" title="Link to this method"> <span class="method-name">collect!</span> <span class="method-args">() { |o| ... }</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="collect-21-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 567
def collect!
  block_given? or return enum_for(__method__) { size }
  set = self.class.new
  each { |o| set &lt;&lt; yield(o) }
  replace(set)
end</pre> </div>  <p>Replaces the elements with ones returned by <code>collect()</code>. Returns an enumerator if no block is given.</p> </div> <div class="aliases"> Also aliased as: <a href="set.html#method-i-map-21">map!</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-compare_by_identity"> <a href="#method-i-compare_by_identity" title="Link to this method"> <span class="method-name">compare_by_identity</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="compare_by_identity-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 257
def compare_by_identity
  if @hash.respond_to?(:compare_by_identity)
    @hash.compare_by_identity
    self
  else
    raise NotImplementedError, "#{self.class.name}\##{__method__} is not implemented"
  end
end</pre> </div>  <p>Makes the set compare its elements by their identity and returns self. This method may not be supported by all subclasses of <a href="set.html"><code>Set</code></a>.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-compare_by_identity-3F"> <a href="#method-i-compare_by_identity-3F" title="Link to this method"> <span class="method-name">compare_by_identity?</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="compare_by_identity-3F-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 268
def compare_by_identity?
  @hash.respond_to?(:compare_by_identity?) &amp;&amp; @hash.compare_by_identity?
end</pre> </div>  <p>Returns true if the set will compare its elements by their identity. Also see <a href="set.html#method-i-compare_by_identity"><code>Set#compare_by_identity</code></a>.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-delete"> <a href="#method-i-delete" title="Link to this method"> <span class="method-name">delete</span> <span class="method-args">(o)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="delete-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 532
def delete(o)
  @hash.delete(o)
  self
end</pre> </div>  <p>Deletes the given object from the set and returns self. Use <code>subtract</code> to delete many items at once.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-delete-3F"> <a href="#method-i-delete-3F" title="Link to this method"> <span class="method-name">delete?</span> <span class="method-args">(o)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="delete-3F-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 539
def delete?(o)
  delete(o) if include?(o)
end</pre> </div>  <p>Deletes the given object from the set and returns self. If the object is not in the set, returns nil.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-delete_if"> <a href="#method-i-delete_if" title="Link to this method"> <span class="method-name">delete_if</span> <span class="method-args">(&amp;block)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="delete_if-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 546
def delete_if(&amp;block)
  block_given? or return enum_for(__method__) { size }
  # Instead of directly using @hash.delete_if, perform enumeration
  # using self.each that subclasses may override.
  select(&amp;block).each { |o| @hash.delete(o) }
  self
end</pre> </div>  <p>Deletes every element of the set for which block evaluates to true, and returns self. Returns an enumerator if no block is given.</p> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-difference"> <a href="#method-i-difference" title="Link to this method"> <span class="method-name">difference</span> <span class="method-args">(enum)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="set.html#method-i-2D">-</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-disjoint-3F"> <a href="#method-i-disjoint-3F" title="Link to this method"> <span class="method-name">disjoint?</span> <span class="method-args">(set)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="disjoint-3F-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 495
def disjoint?(set)
  !intersect?(set)
end</pre> </div>  <p>Returns true if the set and the given enumerable have no element in common. This method is the opposite of <code>intersect?</code>.</p> <pre class="ruby" data-language="ruby">Set[1, 2, 3].disjoint? Set[3, 4]   #=&gt; false
Set[1, 2, 3].disjoint? Set[4, 5]   #=&gt; true
Set[1, 2, 3].disjoint? [3, 4]      #=&gt; false
Set[1, 2, 3].disjoint? 4..5        #=&gt; true
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-divide"> <a href="#method-i-divide" title="Link to this method"> <span class="method-name">divide</span> <span class="method-args">(&amp;func)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="divide-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 774
def divide(&amp;func)
  func or return enum_for(__method__) { size }

  if func.arity == 2
    require 'tsort'

    class &lt;&lt; dig = {}         # :nodoc:
      include TSort

      alias tsort_each_node each_key
      def tsort_each_child(node, &amp;block)
        fetch(node).each(&amp;block)
      end
    end

    each { |u|
      dig[u] = a = []
      each{ |v| func.call(u, v) and a &lt;&lt; v }
    }

    set = Set.new()
    dig.each_strongly_connected_component { |css|
      set.add(self.class.new(css))
    }
    set
  else
    Set.new(classify(&amp;func).values)
  end
end</pre> </div>  <p>Divides the set into a set of subsets according to the commonality defined by the given block.</p> <p>If the arity of the block is 2, elements o1 and o2 are in common if block.call(o1, o2) is true. Otherwise, elements o1 and o2 are in common if block.call(o1) == block.call(o2).</p> <pre class="ruby" data-language="ruby">require 'set'
numbers = Set[1, 3, 4, 6, 9, 10, 11]
set = numbers.divide { |i,j| (i - j).abs == 1 }
set        #=&gt; #&lt;Set: {#&lt;Set: {1}&gt;,
           #           #&lt;Set: {11, 9, 10}&gt;,
           #           #&lt;Set: {3, 4}&gt;,
           #           #&lt;Set: {6}&gt;}&gt;
</pre> <p>Returns an enumerator if no block is given.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-each"> <a href="#method-i-each" title="Link to this method"> <span class="method-name">each</span> <span class="method-args">(&amp;block)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="each-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 502
def each(&amp;block)
  block_given? or return enum_for(__method__) { size }
  @hash.each_key(&amp;block)
  self
end</pre> </div>  <p>Calls the given block once for each element in the set, passing the element as parameter. Returns an enumerator if no block is given.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-empty-3F"> <a href="#method-i-empty-3F" title="Link to this method"> <span class="method-name">empty?</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="empty-3F-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 307
def empty?
  @hash.empty?
end</pre> </div>  <p>Returns true if the set contains no elements.</p> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-filter-21"> <a href="#method-i-filter-21" title="Link to this method"> <span class="method-name">filter!</span> <span class="method-args">(&amp;block)</span> </a> </div> </div> <div class="method-description"> <p>Equivalent to <a href="set.html#method-i-select-21"><code>Set#select!</code></a></p> </div> <div class="aliases"> Alias for: <a href="set.html#method-i-select-21">select!</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-flatten"> <a href="#method-i-flatten" title="Link to this method"> <span class="method-name">flatten</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="flatten-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 380
def flatten
  self.class.new.flatten_merge(self)
end</pre> </div>  <p>Returns a new set that is a copy of the set, flattening each containing set recursively.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-flatten-21"> <a href="#method-i-flatten-21" title="Link to this method"> <span class="method-name">flatten!</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="flatten-21-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 386
def flatten!
  replace(flatten()) if any?(Set)
end</pre> </div>  <p>Equivalent to <a href="set.html#method-i-flatten"><code>Set#flatten</code></a>, but replaces the receiver with the result in place. Returns nil if no modifications were made.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-include-3F"> <a href="#method-i-include-3F" title="Link to this method"> <span class="method-name">include?</span> <span class="method-args">(o)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="include-3F-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 396
def include?(o)
  @hash[o]
end</pre> </div>  <p>Returns true if the set contains the given object.</p> <p>Note that <code>include?</code> and <code>member?</code> do not test member equality using <code>==</code> as do other Enumerables.</p> <p>See also <a href="enumerable.html#method-i-include-3F"><code>Enumerable#include?</code></a></p> </div> <div class="aliases"> Also aliased as: <a href="set.html#method-i-member-3F">member?</a>, <a href="set.html#method-i-3D-3D-3D">===</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-initialize_clone"> <a href="#method-i-initialize_clone" title="Link to this method"> <span class="method-name">initialize_clone</span> <span class="method-args">(orig, **options)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="initialize_clone-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 290
def initialize_clone(orig, **options)
  super
  @hash = orig.instance_variable_get(:@hash).clone(**options)
end</pre> </div>  <p>Clone internal hash.</p> <div class="method-calls-super"> Calls superclass method </div> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-initialize_dup"> <a href="#method-i-initialize_dup" title="Link to this method"> <span class="method-name">initialize_dup</span> <span class="method-args">(orig)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="initialize_dup-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 284
def initialize_dup(orig)
  super
  @hash = orig.instance_variable_get(:@hash).dup
end</pre> </div>  <p>Dup internal hash.</p> <div class="method-calls-super"> Calls superclass method </div> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-inspect"> <a href="#method-i-inspect" title="Link to this method"> <span class="method-name">inspect</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="inspect-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 814
def inspect
  ids = (Thread.current[InspectKey] ||= [])

  if ids.include?(object_id)
    return sprintf('#&lt;%s: {...}&gt;', self.class.name)
  end

  ids &lt;&lt; object_id
  begin
    return sprintf('#&lt;%s: {%s}&gt;', self.class, to_a.inspect[1..-2])
  ensure
    ids.pop
  end
end</pre> </div>  <p>Returns a string containing a human-readable representation of the set (“#&lt;Set: {element1, element2, …}&gt;”).</p> </div> <div class="aliases"> Also aliased as: <a href="set.html#method-i-to_s">to_s</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-intersect-3F"> <a href="#method-i-intersect-3F" title="Link to this method"> <span class="method-name">intersect?</span> <span class="method-args">(set)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="intersect-3F-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 473
def intersect?(set)
  case set
  when Set
    if size &lt; set.size
      any?(set)
    else
      set.any?(self)
    end
  when Enumerable
    set.any?(self)
  else
    raise ArgumentError, "value must be enumerable"
  end
end</pre> </div>  <p>Returns true if the set and the given enumerable have at least one element in common.</p> <pre class="ruby" data-language="ruby">Set[1, 2, 3].intersect? Set[4, 5]   #=&gt; false
Set[1, 2, 3].intersect? Set[3, 4]   #=&gt; true
Set[1, 2, 3].intersect? 4..5        #=&gt; false
Set[1, 2, 3].intersect? [3, 4]      #=&gt; true
</pre> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-intersection"> <a href="#method-i-intersection" title="Link to this method"> <span class="method-name">intersection</span> <span class="method-args">(enum)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="set.html#method-i-26">&amp;</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-join"> <a href="#method-i-join" title="Link to this method"> <span class="method-name">join</span> <span class="method-args">(separator=nil)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="join-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 806
def join(separator=nil)
  to_a.join(separator)
end</pre> </div>  <p>Returns a string created by converting each element of the set to a string See also: <a href="array.html#method-i-join"><code>Array#join</code></a></p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-keep_if"> <a href="#method-i-keep_if" title="Link to this method"> <span class="method-name">keep_if</span> <span class="method-args">(&amp;block)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="keep_if-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 557
def keep_if(&amp;block)
  block_given? or return enum_for(__method__) { size }
  # Instead of directly using @hash.keep_if, perform enumeration
  # using self.each that subclasses may override.
  reject(&amp;block).each { |o| @hash.delete(o) }
  self
end</pre> </div>  <p>Deletes every element of the set for which block evaluates to false, and returns self. Returns an enumerator if no block is given.</p> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-length"> <a href="#method-i-length" title="Link to this method"> <span class="method-name">length</span> <span class="method-args">()</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="set.html#method-i-size">size</a> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-map-21"> <a href="#method-i-map-21" title="Link to this method"> <span class="method-name">map!</span> <span class="method-args">()</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="set.html#method-i-collect-21">collect!</a> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-member-3F"> <a href="#method-i-member-3F" title="Link to this method"> <span class="method-name">member?</span> <span class="method-args">(o)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="set.html#method-i-include-3F">include?</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-merge"> <a href="#method-i-merge" title="Link to this method"> <span class="method-name">merge</span> <span class="method-args">(*enums, **nil)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="merge-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 598
def merge(*enums, **nil)
  enums.each do |enum|
    if enum.instance_of?(self.class)
      @hash.update(enum.instance_variable_get(:@hash))
    else
      do_with_enum(enum) { |o| add(o) }
    end
  end

  self
end</pre> </div>  <p>Merges the elements of the given enumerable objects to the set and returns self.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-proper_subset-3F"> <a href="#method-i-proper_subset-3F" title="Link to this method"> <span class="method-name">proper_subset?</span> <span class="method-args">(set)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="proper_subset-3F-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 441
def proper_subset?(set)
  case
  when set.instance_of?(self.class) &amp;&amp; @hash.respond_to?(:&lt;)
    @hash &lt; set.instance_variable_get(:@hash)
  when set.is_a?(Set)
    size &lt; set.size &amp;&amp; all?(set)
  else
    raise ArgumentError, "value must be a set"
  end
end</pre> </div>  <p>Returns true if the set is a proper subset of the given set.</p> </div> <div class="aliases"> Also aliased as: <a href="set.html#method-i-3C">&lt;</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-proper_superset-3F"> <a href="#method-i-proper_superset-3F" title="Link to this method"> <span class="method-name">proper_superset?</span> <span class="method-args">(set)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="proper_superset-3F-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 415
def proper_superset?(set)
  case
  when set.instance_of?(self.class) &amp;&amp; @hash.respond_to?(:&gt;)
    @hash &gt; set.instance_variable_get(:@hash)
  when set.is_a?(Set)
    size &gt; set.size &amp;&amp; set.all?(self)
  else
    raise ArgumentError, "value must be a set"
  end
end</pre> </div>  <p>Returns true if the set is a proper superset of the given set.</p> </div> <div class="aliases"> Also aliased as: <a href="set.html#method-i-3E">&gt;</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-reject-21"> <a href="#method-i-reject-21" title="Link to this method"> <span class="method-name">reject!</span> <span class="method-args">(&amp;block)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="reject-21-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 577
def reject!(&amp;block)
  block_given? or return enum_for(__method__) { size }
  n = size
  delete_if(&amp;block)
  self if size != n
end</pre> </div>  <p>Equivalent to <a href="set.html#method-i-delete_if"><code>Set#delete_if</code></a>, but returns nil if no changes were made. Returns an enumerator if no block is given.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-replace"> <a href="#method-i-replace" title="Link to this method"> <span class="method-name">replace</span> <span class="method-args">(enum)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="replace-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 327
def replace(enum)
  if enum.instance_of?(self.class)
    @hash.replace(enum.instance_variable_get(:@hash))
    self
  else
    do_with_enum(enum)  # make sure enum is enumerable before calling clear
    clear
    merge(enum)
  end
end</pre> </div>  <p>Replaces the contents of the set with the contents of the given enumerable object and returns self.</p> <pre class="ruby" data-language="ruby">set = Set[1, 'c', :s]             #=&gt; #&lt;Set: {1, "c", :s}&gt;
set.replace([1, 2])               #=&gt; #&lt;Set: {1, 2}&gt;
set                               #=&gt; #&lt;Set: {1, 2}&gt;
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-reset"> <a href="#method-i-reset" title="Link to this method"> <span class="method-name">reset</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="reset-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 702
def reset
  if @hash.respond_to?(:rehash)
    @hash.rehash # This should perform frozenness check.
  else
    raise FrozenError, "can't modify frozen #{self.class.name}" if frozen?
  end
  self
end</pre> </div>  <p>Resets the internal state after modification to existing elements and returns self.</p> <p>Elements will be reindexed and deduplicated.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-select-21"> <a href="#method-i-select-21" title="Link to this method"> <span class="method-name">select!</span> <span class="method-args">(&amp;block)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="select-21-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 586
def select!(&amp;block)
  block_given? or return enum_for(__method__) { size }
  n = size
  keep_if(&amp;block)
  self if size != n
end</pre> </div>  <p>Equivalent to <a href="set.html#method-i-keep_if"><code>Set#keep_if</code></a>, but returns nil if no changes were made. Returns an enumerator if no block is given.</p> </div> <div class="aliases"> Also aliased as: <a href="set.html#method-i-filter-21">filter!</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-size"> <a href="#method-i-size" title="Link to this method"> <span class="method-name">size</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="size-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 301
def size
  @hash.size
end</pre> </div>  <p>Returns the number of elements.</p> </div> <div class="aliases"> Also aliased as: <a href="set.html#method-i-length">length</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-subset-3F"> <a href="#method-i-subset-3F" title="Link to this method"> <span class="method-name">subset?</span> <span class="method-args">(set)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="subset-3F-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 428
def subset?(set)
  case
  when set.instance_of?(self.class) &amp;&amp; @hash.respond_to?(:&lt;=)
    @hash &lt;= set.instance_variable_get(:@hash)
  when set.is_a?(Set)
    size &lt;= set.size &amp;&amp; all?(set)
  else
    raise ArgumentError, "value must be a set"
  end
end</pre> </div>  <p>Returns true if the set is a subset of the given set.</p> </div> <div class="aliases"> Also aliased as: <a href="set.html#method-i-3C-3D">&lt;=</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-subtract"> <a href="#method-i-subtract" title="Link to this method"> <span class="method-name">subtract</span> <span class="method-args">(enum)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="subtract-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 612
def subtract(enum)
  do_with_enum(enum) { |o| delete(o) }
  self
end</pre> </div>  <p>Deletes every element that appears in the given enumerable object and returns self.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-superset-3F"> <a href="#method-i-superset-3F" title="Link to this method"> <span class="method-name">superset?</span> <span class="method-args">(set)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="superset-3F-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 402
def superset?(set)
  case
  when set.instance_of?(self.class) &amp;&amp; @hash.respond_to?(:&gt;=)
    @hash &gt;= set.instance_variable_get(:@hash)
  when set.is_a?(Set)
    size &gt;= set.size &amp;&amp; set.all?(self)
  else
    raise ArgumentError, "value must be a set"
  end
end</pre> </div>  <p>Returns true if the set is a superset of the given set.</p> </div> <div class="aliases"> Also aliased as: <a href="set.html#method-i-3E-3D">&gt;=</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-to_a"> <a href="#method-i-to_a" title="Link to this method"> <span class="method-name">to_a</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="to_a-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 342
def to_a
  @hash.keys
end</pre> </div>  <p>Returns an array containing all elements in the set.</p> <pre class="ruby" data-language="ruby">Set[1, 2].to_a                    #=&gt; [1, 2]
Set[1, 'c', :s].to_a              #=&gt; [1, "c", :s]
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-to_json"> <a href="#method-i-to_json" title="Link to this method"> <span class="method-name">to_json</span> <span class="method-args">(*args)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="to_json-source"> <pre class="ruby" data-language="ruby"># File ext/json/lib/json/add/set.rb, line 44
def to_json(*args)
  as_json.to_json(*args)
end</pre> </div>  <p>Returns a <a href="json.html"><code>JSON</code></a> string representing <code>self</code>:</p> <pre class="ruby" data-language="ruby">require 'json/add/set'
puts Set.new(%w/foo bar baz/).to_json
</pre> <p>Output:</p> <pre class="ruby" data-language="ruby">{"json_class":"Set","a":["foo","bar","baz"]}
</pre> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-to_s"> <a href="#method-i-to_s" title="Link to this method"> <span class="method-name">to_s</span> <span class="method-args">()</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="set.html#method-i-inspect">inspect</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-to_set"> <a href="#method-i-to_set" title="Link to this method"> <span class="method-name">to_set</span> <span class="method-args">(klass = Set, *args, &amp;block)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="to_set-source"> <pre class="ruby" data-language="ruby"># File lib/set.rb, line 351
def to_set(klass = Set, *args, &amp;block)
  return self if instance_of?(Set) &amp;&amp; klass == Set &amp;&amp; block.nil? &amp;&amp; args.empty?
  klass.new(self, *args, &amp;block)
end</pre> </div>  <p>Returns self if no arguments are given. Otherwise, converts the set to another with <code>klass.new(self, *args, &amp;block)</code>.</p> <p>In subclasses, returns <code>klass.new(self, *args, &amp;block)</code> unless overridden.</p> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-union"> <a href="#method-i-union" title="Link to this method"> <span class="method-name">union</span> <span class="method-args">(enum)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="set.html#method-i-7C">|</a> </div> </div> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    Ruby Core &copy; 1993&ndash;2024 Yukihiro Matsumoto<br>Licensed under the Ruby License.<br>Ruby Standard Library &copy; contributors<br>Licensed under their own licenses.<br>
    
  </p>
</div>
