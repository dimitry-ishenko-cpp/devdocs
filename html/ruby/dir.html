<h1 id="class-Dir" class="anchor-link class"> class Dir </h1>
<dl class="meta">
<dt>Parent:</dt>
<dd class="meta-parent"><a href="object.html">Object</a></dd>
<dt>Included modules:</dt>
<dd class="meta-includes"><a class="include" href="enumerable.html">Enumerable</a></dd>
</dl> <section class="description"> <p>An object of class Dir represents a directory in the underlying file system.</p> <p>It consists mainly of:</p> <ul>
<li> <p>A string <em>path</em>, given when the object is created, that specifies a directory in the underlying file system; method <a href="dir.html#method-i-path"><code>path</code></a> returns the path.</p> </li>
<li> <p>A collection of string <em>entry names</em>, each of which is the name of a directory or file in the underlying file system; the entry names may be retrieved in an <a href="dir.html#class-Dir-label-Dir+As+Array-Like">array-like fashion</a> or in a <a href="dir.html#class-Dir-label-Dir+As+Stream-Like">stream-like fashion</a>.</p> </li>
</ul> <h2 id="class-Dir-label-About+the+Examples">About the Examples</h2> <p>Some examples on this page use this simple file tree:</p> <pre>example/
├── config.h
├── lib/
│   ├── song/
│   │   └── karaoke.rb
│   └── song.rb
└── main.rb</pre> <p>Others use the file tree for the <a href="https://github.com/ruby/ruby">Ruby project itself</a>.</p> <h2 id="class-Dir-label-Dir+As+Array-Like">Dir As Array-Like</h2> <p>A Dir object is in some ways array-like:</p> <ul>
<li> <p>It has instance methods <a href="dir.html#method-i-children"><code>children</code></a>, <a href="dir.html#method-i-each"><code>each</code></a>, and <a href="dir.html#method-i-each_child"><code>each_child</code></a>.</p> </li>
<li> <p>It includes <a href="enumerable.html#module-Enumerable-label-What-27s+Here">module Enumerable</a>.</p> </li>
</ul> <h2 id="class-Dir-label-Dir+As+Stream-Like">Dir As Stream-Like</h2> <p>A Dir object is in some ways stream-like.</p> <p>The stream is initially open for reading, but may be closed manually (using method <a href="dir.html#method-i-close"><code>close</code></a>), and will be closed on block exit if created by <a href="dir.html#method-c-open"><code>Dir.open</code></a> called with a block. The closed stream may not be further manipulated, and may not be reopened.</p> <p>The stream has a <em>position</em>, which is the index of an entry in the directory:</p> <ul>
<li> <p>The initial position is zero (before the first entry).</p> </li>
<li> <p>Method <a href="dir.html#method-i-tell"><code>tell</code></a> (aliased as <a href="dir.html#method-i-pos"><code>pos</code></a>) returns the position.</p> </li>
<li> <p>Method <a href="dir.html#method-i-pos-3D"><code>pos=</code></a> sets the position (but ignores a value outside the stream), and returns the position.</p> </li>
<li> <p>Method <a href="dir.html#method-i-seek"><code>seek</code></a> is like <a href="dir.html#method-i-pos-3D"><code>pos=</code></a>, but returns <code>self</code> (convenient for chaining).</p> </li>
<li> <p>Method <a href="dir.html#method-i-read"><code>read</code></a>, if not at end-of-stream, reads the next entry and increments the position; if at end-of-stream, does not increment the position.</p> </li>
<li> <p>Method <a href="dir.html#method-i-rewind"><code>rewind</code></a> sets the position to zero.</p> </li>
</ul> <p>Examples (using the <a href="dir.html#class-Dir-label-About+the+Examples">simple file tree</a>):</p> <pre class="ruby" data-language="ruby">dir = Dir.new('example') # =&gt; #&lt;Dir:example&gt;
dir.pos                  # =&gt; 0

dir.read # =&gt; "."
dir.read # =&gt; ".."
dir.read # =&gt; "config.h"
dir.read # =&gt; "lib"
dir.read # =&gt; "main.rb"
dir.pos  # =&gt; 5
dir.read # =&gt; nil
dir.pos  # =&gt; 5

dir.rewind # =&gt; #&lt;Dir:example&gt;
dir.pos    # =&gt; 0

dir.pos = 3 # =&gt; 3
dir.pos     # =&gt; 3

dir.seek(4) # =&gt; #&lt;Dir:example&gt;
dir.pos     # =&gt; 4

dir.close # =&gt; nil
dir.read  # Raises IOError.
</pre> <h2 id="class-Dir-label-What-27s+Here">What’s Here</h2> <p>First, what’s elsewhere. Class Dir:</p> <ul>
<li> <p>Inherits from <a href="object.html#class-Object-label-What-27s+Here">class Object</a>.</p> </li>
<li> <p>Includes <a href="enumerable.html#module-Enumerable-label-What-27s+Here">module Enumerable</a>, which provides dozens of additional methods.</p> </li>
</ul> <p>Here, class Dir provides methods that are useful for:</p> <ul>
<li> <p><a href="dir.html#class-Dir-label-Reading">Reading</a></p> </li>
<li> <p><a href="dir.html#class-Dir-label-Setting">Setting</a></p> </li>
<li> <p><a href="dir.html#class-Dir-label-Querying">Querying</a></p> </li>
<li> <p><a href="dir.html#class-Dir-label-Iterating">Iterating</a></p> </li>
<li> <p><a href="dir.html#class-Dir-label-Other">Other</a></p> </li>
</ul> <h3 id="class-Dir-label-Reading">Reading</h3> <ul>
<li> <p><a href="dir.html#method-i-close"><code>close</code></a>: Closes the directory stream for <code>self</code>.</p> </li>
<li> <p><a href="dir.html#method-i-pos-3D"><code>pos=</code></a>: Sets the position in the directory stream for <code>self</code>.</p> </li>
<li> <p><a href="dir.html#method-i-read"><code>read</code></a>: Reads and returns the next entry in the directory stream for <code>self</code>.</p> </li>
<li> <p><a href="dir.html#method-i-rewind"><code>rewind</code></a>: Sets the position in the directory stream for <code>self</code> to the first entry.</p> </li>
<li> <p><a href="dir.html#method-i-seek"><code>seek</code></a>: Sets the position in the directory stream for <code>self</code> the entry at the given offset.</p> </li>
</ul> <h3 id="class-Dir-label-Setting">Setting</h3> <ul>
<li> <p><a href="dir.html#method-c-chdir"><code>::chdir</code></a>: Changes the working directory of the current process to the given directory.</p> </li>
<li> <p><a href="dir.html#method-c-chroot"><code>::chroot</code></a>: Changes the file-system root for the current process to the given directory.</p> </li>
</ul> <h3 id="class-Dir-label-Querying">Querying</h3> <ul>
<li> <p><a href="dir.html#method-c-5B-5D"><code>::[]</code></a>: Same as <a href="dir.html#method-c-glob"><code>::glob</code></a> without the ability to pass flags.</p> </li>
<li> <p><a href="dir.html#method-c-children"><code>::children</code></a>: Returns an array of names of the children (both files and directories) of the given directory, but not including <code>.</code> or <code>..</code>.</p> </li>
<li> <p><a href="dir.html#method-c-empty-3F"><code>::empty?</code></a>: Returns whether the given path is an empty directory.</p> </li>
<li> <p><a href="dir.html#method-c-entries"><code>::entries</code></a>: Returns an array of names of the children (both files and directories) of the given directory, including <code>.</code> and <code>..</code>.</p> </li>
<li> <p><a href="dir.html#method-c-exist-3F"><code>::exist?</code></a>: Returns whether the given path is a directory.</p> </li>
<li> <p><a href="dir.html#method-c-getwd"><code>::getwd</code></a> (aliased as pwd): Returns the path to the current working directory.</p> </li>
<li> <p><a href="dir.html#method-c-glob"><code>::glob</code></a>: Returns an array of file paths matching the given pattern and flags.</p> </li>
<li> <p><a href="dir.html#method-c-home"><code>::home</code></a>: Returns the home directory path for a given user or the current user.</p> </li>
<li> <p><a href="dir.html#method-i-children"><code>children</code></a>: Returns an array of names of the children (both files and directories) of <code>self</code>, but not including <code>.</code> or <code>..</code>.</p> </li>
<li> <p><a href="dir.html#method-i-fileno"><code>fileno</code></a>: Returns the integer file descriptor for <code>self</code>.</p> </li>
<li> <p><a href="dir.html#method-i-path"><code>path</code></a> (aliased as <a href="dir.html#method-i-to_path"><code>to_path</code></a>): Returns the path used to create <code>self</code>.</p> </li>
<li> <p><a href="dir.html#method-i-tell"><code>tell</code></a> (aliased as <a href="dir.html#method-i-pos"><code>pos</code></a>): Returns the integer position in the directory stream for <code>self</code>.</p> </li>
</ul> <h3 id="class-Dir-label-Iterating">Iterating</h3> <ul>
<li> <p><a href="dir.html#method-c-each_child"><code>::each_child</code></a>: Calls the given block with each entry in the given directory, but not including <code>.</code> or <code>..</code>.</p> </li>
<li> <p><a href="dir.html#method-c-foreach"><code>::foreach</code></a>: Calls the given block with each entry in the given directory, including <code>.</code> and <code>..</code>.</p> </li>
<li> <p><a href="dir.html#method-i-each"><code>each</code></a>: Calls the given block with each entry in <code>self</code>, including <code>.</code> and <code>..</code>.</p> </li>
<li> <p><a href="dir.html#method-i-each_child"><code>each_child</code></a>: Calls the given block with each entry in <code>self</code>, but not including <code>.</code> or <code>..</code>.</p> </li>
</ul> <h3 id="class-Dir-label-Other">Other</h3> <ul>
<li> <p><a href="dir.html#method-c-mkdir"><code>::mkdir</code></a>: Creates a directory at the given path, with optional permissions.</p> </li>
<li> <p><a href="dir.html#method-c-new"><code>::new</code></a>: Returns a new Dir for the given path, with optional encoding.</p> </li>
<li> <p><a href="dir.html#method-c-open"><code>::open</code></a>: Same as <a href="dir.html#method-c-new"><code>::new</code></a>, but if a block is given, yields the Dir to the block, closing it upon block exit.</p> </li>
<li> <p><a href="dir.html#method-c-unlink"><code>::unlink</code></a> (aliased as <a href="dir.html#method-c-delete"><code>::delete</code></a> and <a href="dir.html#method-c-rmdir"><code>::rmdir</code></a>): Removes the given directory.</p> </li>
<li> <p><a href="dir.html#method-i-inspect"><code>inspect</code></a>: Returns a string description of <code>self</code>.</p> </li>
</ul> </section> <section id="5Buntitled-5D" class="documentation-section anchor-link"> <section id="public-class-5Buntitled-5D-method-details" class="method-section anchor-link"> <header> <h3>Public Class Methods</h3> </header> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-c-5B-5D"> <a href="#method-c-5B-5D" title="Link to this method"> <span class="method-callseq"> Dir[*patterns, base: nil, sort: true] → array </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="5B-5D-source"> <pre class="ruby" data-language="ruby"># File dir.rb, line 222
def self.[](*args, base: nil, sort: true)
  Primitive.dir_s_aref(args, base, sort)
end</pre> </div>  <p>Calls <a href="dir.html#method-c-glob"><code>Dir.glob</code></a> with argument <code>patterns</code> and the values of keyword arguments <code>base</code> and <code>sort</code>; returns the array of selected entry names.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-c-chdir"> <a href="#method-c-chdir" title="Link to this method"> <span class="method-callseq"> chdir(new_dirpath) → 0 </span> </a> </div> <div class="method-heading"> <a href="#method-c-chdir" title="Link to this method"> <span class="method-callseq"> chdir → 0 </span> </a> </div> <div class="method-heading"> <a href="#method-c-chdir" title="Link to this method"> <span class="method-callseq"> chdir(new_dirpath) {|new_dirpath| ... } → object </span> </a> </div> <div class="method-heading"> <a href="#method-c-chdir" title="Link to this method"> <span class="method-callseq"> chdir {|cur_dirpath| ... } → object </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="chdir-source"> <pre class="c" data-language="c">static VALUE
dir_s_chdir(int argc, VALUE *argv, VALUE obj)
{
    VALUE path = Qnil;

    if (rb_check_arity(argc, 0, 1) == 1) {
        path = rb_str_encode_ospath(rb_get_path(argv[0]));
    }
    else {
        const char *dist = getenv("HOME");
        if (!dist) {
            dist = getenv("LOGDIR");
            if (!dist) rb_raise(rb_eArgError, "HOME/LOGDIR not set");
        }
        path = rb_str_new2(dist);
    }

    return chdir_path(path, true);
}</pre> </div>  <p>Changes the current working directory.</p> <p>With argument <code>new_dirpath</code> and no block, changes to the given <code>dirpath</code>:</p> <pre class="ruby" data-language="ruby">Dir.pwd         # =&gt; "/example"
Dir.chdir('..') # =&gt; 0
Dir.pwd         # =&gt; "/"
</pre> <p>With no argument and no block:</p> <ul>
<li> <p>Changes to the value of environment variable <code>HOME</code> if defined.</p> </li>
<li> <p>Otherwise changes to the value of environment variable <code>LOGDIR</code> if defined.</p> </li>
<li> <p>Otherwise makes no change.</p> </li>
</ul> <p>With argument <code>new_dirpath</code> and a block, temporarily changes the working directory:</p> <ul>
<li> <p>Calls the block with the argument.</p> </li>
<li> <p>Changes to the given directory.</p> </li>
<li> <p>Executes the block (yielding the new path).</p> </li>
<li> <p>Restores the previous working directory.</p> </li>
<li> <p>Returns the block’s return value.</p> </li>
</ul> <p>Example:</p> <pre class="ruby" data-language="ruby">Dir.chdir('/var/spool/mail')
Dir.pwd   # =&gt; "/var/spool/mail"
Dir.chdir('/tmp') do
  Dir.pwd # =&gt; "/tmp"
end
Dir.pwd   # =&gt; "/var/spool/mail"
</pre> <p>With no argument and a block, calls the block with the current working directory (string) and returns the block’s return value.</p> <p>Calls to Dir.chdir with blocks may be nested:</p> <pre class="ruby" data-language="ruby">Dir.chdir('/var/spool/mail')
Dir.pwd     # =&gt; "/var/spool/mail"
Dir.chdir('/tmp') do
  Dir.pwd   # =&gt; "/tmp"
  Dir.chdir('/usr') do
    Dir.pwd # =&gt; "/usr"
  end
  Dir.pwd   # =&gt; "/tmp"
end
Dir.pwd     # =&gt; "/var/spool/mail"
</pre> <p>In a multi-threaded program an error is raised if a thread attempts to open a <code>chdir</code> block while another thread has one open, or a call to <code>chdir</code> without a block occurs inside a block passed to <code>chdir</code> (even in the same thread).</p> <p>Raises an exception if the target directory does not exist.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-c-children"> <a href="#method-c-children" title="Link to this method"> <span class="method-callseq"> children(dirpath) → array </span> </a> </div> <div class="method-heading"> <a href="#method-c-children" title="Link to this method"> <span class="method-callseq"> children(dirpath, encoding: 'UTF-8') → array </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="children-source"> <pre class="c" data-language="c">static VALUE
dir_s_children(int argc, VALUE *argv, VALUE io)
{
    VALUE dir;

    dir = dir_open_dir(argc, argv);
    return rb_ensure(dir_collect_children, dir, dir_close, dir);
}</pre> </div>  <p>Returns an array of the entry names in the directory at <code>dirpath</code> except for <code>'.'</code> and <code>'..'</code>; sets the given encoding onto each returned entry name:</p> <pre class="ruby" data-language="ruby">Dir.children('/example') # =&gt; ["config.h", "lib", "main.rb"]
Dir.children('/example').first.encoding
# =&gt; #&lt;Encoding:UTF-8&gt;
Dir.children('/example', encoding: 'US-ASCII').first.encoding
# =&gt; #&lt;Encoding:US-ASCII&gt;
</pre> <p>See <a href="encodings_rdoc.html#label-String+Encoding">String Encoding</a>.</p> <p>Raises an exception if the directory does not exist.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-c-chroot"> <a href="#method-c-chroot" title="Link to this method"> <span class="method-callseq"> chroot(dirpath) → 0 </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="chroot-source"> <pre class="c" data-language="c">static VALUE
dir_s_chroot(VALUE dir, VALUE path)
{
    path = check_dirname(path);
    if (IO_WITHOUT_GVL_INT(nogvl_chroot, (void *)RSTRING_PTR(path)) == -1)
        rb_sys_fail_path(path);

    return INT2FIX(0);
}</pre> </div>  <p>Changes the root directory of the calling process to that specified in <code>dirpath</code>. The new root directory is used for pathnames beginning with <code>'/'</code>. The root directory is inherited by all children of the calling process.</p> <p>Only a privileged process may call <code>chroot</code>.</p> <p>See <a href="https://man7.org/linux/man-pages/man2/chroot.2.html">Linux chroot</a>.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-c-delete"> <a href="#method-c-delete" title="Link to this method"> <span class="method-callseq"> rmdir(dirpath) → 0 </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="delete-source"> <pre class="c" data-language="c">static VALUE
dir_s_rmdir(VALUE obj, VALUE dir)
{
    const char *p;
    int r;

    dir = check_dirname(dir);
    p = RSTRING_PTR(dir);
    r = IO_WITHOUT_GVL_INT(nogvl_rmdir, (void *)p);
    if (r &lt; 0)
        rb_sys_fail_path(dir);

    return INT2FIX(0);
}</pre> </div>  <p>Removes the directory at <code>dirpath</code> from the underlying file system:</p> <pre class="ruby" data-language="ruby">Dir.rmdir('foo') # =&gt; 0
</pre> <p>Raises an exception if the directory is not empty.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-c-each_child"> <a href="#method-c-each_child" title="Link to this method"> <span class="method-callseq"> each_child(dirpath) {|entry_name| ... } → nil </span> </a> </div> <div class="method-heading"> <a href="#method-c-each_child" title="Link to this method"> <span class="method-callseq"> each_child(dirpath, encoding: 'UTF-8') {|entry_name| ... } → nil </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="each_child-source"> <pre class="c" data-language="c">static VALUE
dir_s_each_child(int argc, VALUE *argv, VALUE io)
{
    VALUE dir;

    RETURN_ENUMERATOR(io, argc, argv);
    dir = dir_open_dir(argc, argv);
    rb_ensure(dir_each_child, dir, dir_close, dir);
    return Qnil;
}</pre> </div>  <p>Like <a href="dir.html#method-c-foreach"><code>Dir.foreach</code></a>, except that entries <code>'.'</code> and <code>'..'</code> are not included.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-c-empty-3F"> <a href="#method-c-empty-3F" title="Link to this method"> <span class="method-callseq"> empty?(dirpath) → true or false </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="empty-3F-source"> <pre class="c" data-language="c">static VALUE
rb_dir_s_empty_p(VALUE obj, VALUE dirname)
{
    VALUE result, orig;
    const char *path;
    enum {false_on_notdir = 1};

    FilePathValue(dirname);
    orig = rb_str_dup_frozen(dirname);
    dirname = rb_str_encode_ospath(dirname);
    dirname = rb_str_dup_frozen(dirname);
    path = RSTRING_PTR(dirname);

#if defined HAVE_GETATTRLIST &amp;&amp; defined ATTR_DIR_ENTRYCOUNT
    {
        u_int32_t attrbuf[SIZEUP32(fsobj_tag_t)];
        struct attrlist al = {ATTR_BIT_MAP_COUNT, 0, ATTR_CMN_OBJTAG,};
        struct getattrlist_args args = GETATTRLIST_ARGS(&amp;al, attrbuf, 0);
        if (gvl_getattrlist(&amp;args, path) != 0)
            rb_sys_fail_path(orig);
        if (*(const fsobj_tag_t *)(attrbuf+1) == VT_HFS) {
            al.commonattr = 0;
            al.dirattr = ATTR_DIR_ENTRYCOUNT;
            if (gvl_getattrlist(&amp;args, path) == 0) {
                if (attrbuf[0] &gt;= 2 * sizeof(u_int32_t))
                    return RBOOL(attrbuf[1] == 0);
                if (false_on_notdir) return Qfalse;
            }
            rb_sys_fail_path(orig);
        }
    }
#endif

    result = (VALUE)IO_WITHOUT_GVL(nogvl_dir_empty_p, (void *)path);
    if (FIXNUM_P(result)) {
        rb_syserr_fail_path((int)FIX2LONG(result), orig);
    }
    return result;
}</pre> </div>  <p>Returns whether <code>dirpath</code> specifies an empty directory:</p> <pre class="ruby" data-language="ruby">dirpath = '/tmp/foo'
Dir.mkdir(dirpath)
Dir.empty?(dirpath)            # =&gt; true
Dir.empty?('/example')         # =&gt; false
Dir.empty?('/example/main.rb') # =&gt; false
</pre> <p>Raises an exception if <code>dirpath</code> does not specify a directory or file in the underlying file system.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-c-entries"> <a href="#method-c-entries" title="Link to this method"> <span class="method-callseq"> entries(dirname, encoding: 'UTF-8') → array </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="entries-source"> <pre class="c" data-language="c">static VALUE
dir_entries(int argc, VALUE *argv, VALUE io)
{
    VALUE dir;

    dir = dir_open_dir(argc, argv);
    return rb_ensure(dir_collect, dir, dir_close, dir);
}</pre> </div>  <p>Returns an array of the entry names in the directory at <code>dirpath</code>; sets the given encoding onto each returned entry name:</p> <pre class="ruby" data-language="ruby">Dir.entries('/example') # =&gt; ["config.h", "lib", "main.rb", "..", "."]
Dir.entries('/example').first.encoding
# =&gt; #&lt;Encoding:UTF-8&gt;
Dir.entries('/example', encoding: 'US-ASCII').first.encoding
# =&gt; #&lt;Encoding:US-ASCII&gt;
</pre> <p>See <a href="encodings_rdoc.html#label-String+Encoding">String Encoding</a>.</p> <p>Raises an exception if the directory does not exist.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-c-exist-3F"> <a href="#method-c-exist-3F" title="Link to this method"> <span class="method-callseq"> exist?(dirpath) → true or false </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="exist-3F-source"> <pre class="c" data-language="c">VALUE
rb_file_directory_p(void)
{
}</pre> </div>  <p>Returns whether <code>dirpath</code> is a directory in the underlying file system:</p> <pre class="ruby" data-language="ruby">Dir.exist?('/example')         # =&gt; true
Dir.exist?('/nosuch')          # =&gt; false
Dir.exist?('/example/main.rb') # =&gt; false
</pre> <p>Same as <a href="file.html#method-c-directory-3F"><code>File.directory?</code></a>.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-c-fchdir"> <a href="#method-c-fchdir" title="Link to this method"> <span class="method-callseq"> fchdir(fd) → 0 </span> </a> </div> <div class="method-heading"> <a href="#method-c-fchdir" title="Link to this method"> <span class="method-callseq"> fchdir(fd) { ... } → object </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="fchdir-source"> <pre class="c" data-language="c">static VALUE
dir_s_fchdir(VALUE klass, VALUE fd_value)
{
    int fd = RB_NUM2INT(fd_value);

    if (chdir_alone_block_p()) {
        struct fchdir_data args;
        args.old_dir = dir_s_alloc(klass);
        dir_initialize(NULL, args.old_dir, rb_fstring_cstr("."), Qnil);
        args.fd = fd;
        args.done = FALSE;
        return rb_ensure(fchdir_yield, (VALUE)&amp;args, fchdir_restore, (VALUE)&amp;args);
    }
    else {
        int r = IO_WITHOUT_GVL_INT(nogvl_fchdir, &amp;fd);
        if (r &lt; 0)
            rb_sys_fail("fchdir");
    }

    return INT2FIX(0);
}</pre> </div>  <p>Changes the current working directory to the directory specified by the integer file descriptor <code>fd</code>.</p> <p>When passing a file descriptor over a UNIX socket or to a child process, using <code>fchdir</code> instead of <code>chdir</code> avoids the <a href="https://en.wikipedia.org/wiki/Time-of-check_to_time-of-use">time-of-check to time-of-use vulnerability</a></p> <p>With no block, changes to the directory given by <code>fd</code>:</p> <pre class="ruby" data-language="ruby">Dir.chdir('/var/spool/mail')
Dir.pwd # =&gt; "/var/spool/mail"
dir  = Dir.new('/usr')
fd = dir.fileno
Dir.fchdir(fd)
Dir.pwd # =&gt; "/usr"
</pre> <p>With a block, temporarily changes the working directory:</p> <ul>
<li> <p>Calls the block with the argument.</p> </li>
<li> <p>Changes to the given directory.</p> </li>
<li> <p>Executes the block (yields no args).</p> </li>
<li> <p>Restores the previous working directory.</p> </li>
<li> <p>Returns the block’s return value.</p> </li>
</ul> <p>Example:</p> <pre class="ruby" data-language="ruby">Dir.chdir('/var/spool/mail')
Dir.pwd # =&gt; "/var/spool/mail"
dir  = Dir.new('/tmp')
fd = dir.fileno
Dir.fchdir(fd) do
  Dir.pwd # =&gt; "/tmp"
end
Dir.pwd # =&gt; "/var/spool/mail"
</pre> <p>This method uses the <a href="https://www.man7.org/linux/man-pages/man3/fchdir.3p.html">fchdir()</a> function defined by POSIX 2008; the method is not implemented on non-POSIX platforms (raises <a href="notimplementederror.html"><code>NotImplementedError</code></a>).</p> <p>Raises an exception if the file descriptor is not valid.</p> <p>In a multi-threaded program an error is raised if a thread attempts to open a <code>chdir</code> block while another thread has one open, or a call to <code>chdir</code> without a block occurs inside a block passed to <code>chdir</code> (even in the same thread).</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-c-for_fd"> <a href="#method-c-for_fd" title="Link to this method"> <span class="method-callseq"> for_fd(fd) → dir </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="for_fd-source"> <pre class="c" data-language="c">static VALUE
dir_s_for_fd(VALUE klass, VALUE fd)
{
    struct dir_data *dp;
    VALUE dir = TypedData_Make_Struct(klass, struct dir_data, &amp;dir_data_type, dp);

    if (!(dp-&gt;dir = IO_WITHOUT_GVL(nogvl_fdopendir, (void *)(VALUE)NUM2INT(fd)))) {
        rb_sys_fail("fdopendir");
        UNREACHABLE_RETURN(Qnil);
    }

    RB_OBJ_WRITE(dir, &amp;dp-&gt;path, Qnil);
    return dir;
}</pre> </div>  <p>Returns a new Dir object representing the directory specified by the given integer directory file descriptor <code>fd</code>:</p> <pre class="ruby" data-language="ruby">d0 = Dir.new('..')
d1 = Dir.for_fd(d0.fileno)
</pre> <p>Note that the returned <code>d1</code> does not have an associated path:</p> <pre class="ruby" data-language="ruby">d0.path # =&gt; '..'
d1.path # =&gt; nil
</pre> <p>This method uses the <a href="https://www.man7.org/linux/man-pages/man3/fdopendir.3p.html">fdopendir()</a> function defined by POSIX 2008; the method is not implemented on non-POSIX platforms (raises <a href="notimplementederror.html"><code>NotImplementedError</code></a>).</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-c-foreach"> <a href="#method-c-foreach" title="Link to this method"> <span class="method-callseq"> foreach(dirpath, encoding: 'UTF-8') {|entry_name| ... } → nil </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="foreach-source"> <pre class="c" data-language="c">static VALUE
dir_foreach(int argc, VALUE *argv, VALUE io)
{
    VALUE dir;

    RETURN_ENUMERATOR(io, argc, argv);
    dir = dir_open_dir(argc, argv);
    rb_ensure(dir_each, dir, dir_close, dir);
    return Qnil;
}</pre> </div>  <p>Calls the block with each entry name in the directory at <code>dirpath</code>; sets the given encoding onto each passed <code>entry_name</code>:</p> <pre class="ruby" data-language="ruby">Dir.foreach('/example') {|entry_name| p entry_name }
</pre> <p>Output:</p> <pre class="ruby" data-language="ruby">"config.h"
"lib"
"main.rb"
".."
"."
</pre> <p>Encoding:</p> <pre class="ruby" data-language="ruby">Dir.foreach('/example') {|entry_name| p entry_name.encoding; break }
Dir.foreach('/example', encoding: 'US-ASCII') {|entry_name| p entry_name.encoding; break }
</pre> <p>Output:</p> <pre class="ruby" data-language="ruby">#&lt;Encoding:UTF-8&gt;
#&lt;Encoding:US-ASCII&gt;
</pre> <p>See <a href="encodings_rdoc.html#label-String+Encoding">String Encoding</a>.</p> <p>Returns an enumerator if no block is given.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-c-getwd"> <a href="#method-c-getwd" title="Link to this method"> <span class="method-callseq"> pwd → string </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="getwd-source"> <pre class="c" data-language="c">static VALUE
dir_s_getwd(VALUE dir)
{
    return rb_dir_getwd();
}</pre> </div>  <p>Returns the path to the current working directory:</p> <pre class="ruby" data-language="ruby">Dir.chdir("/tmp") # =&gt; 0
Dir.pwd           # =&gt; "/tmp"
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-c-glob"> <a href="#method-c-glob" title="Link to this method"> <span class="method-callseq"> glob(*patterns, flags: 0, base: nil, sort: true) → array </span> </a> </div> <div class="method-heading"> <a href="#method-c-glob" title="Link to this method"> <span class="method-callseq"> glob(*patterns, flags: 0, base: nil, sort: true) {|entry_name| ... } → nil </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="glob-source"> <pre class="ruby" data-language="ruby"># File dir.rb, line 410
def self.glob(pattern, _flags = 0, flags: _flags, base: nil, sort: true)
  Primitive.attr! :use_block
  Primitive.dir_s_glob(pattern, flags, base, sort)
end</pre> </div>  <p>Forms an array <em>entry_names</em> of the entry names selected by the arguments.</p> <p>Argument <code>patterns</code> is a string pattern or an array of string patterns; note that these are not regexps; see below.</p> <p>Notes for the following examples:</p> <ul>
<li> <p><code>'*'</code> is the pattern that matches any entry name except those that begin with <code>'.'</code>.</p> </li>
<li> <p>We use method <a href="array.html#method-i-take"><code>Array#take</code></a> to shorten returned arrays that otherwise would be very large.</p> </li>
</ul> <p>With no block, returns array <em>entry_names</em>; example (using the <a href="dir.html#class-Dir-label-About+the+Examples">simple file tree</a>):</p> <pre class="ruby" data-language="ruby">Dir.glob('*') # =&gt; ["config.h", "lib", "main.rb"]
</pre> <p>With a block, calls the block with each of the <em>entry_names</em> and returns <code>nil</code>:</p> <pre class="ruby" data-language="ruby">Dir.glob('*') {|entry_name| puts entry_name } # =&gt; nil
</pre> <p>Output:</p> <pre class="ruby" data-language="ruby">config.h
lib
main.rb
</pre> <p>If optional keyword argument <code>flags</code> is given, the value modifies the matching; see below.</p> <p>If optional keyword argument <code>base</code> is given, its value specifies the base directory. Each pattern string specifies entries relative to the base directory; the default is <code>'.'</code>. The base directory is not prepended to the entry names in the result:</p> <pre class="ruby" data-language="ruby">Dir.glob(pattern, base: 'lib').take(5)
# =&gt; ["abbrev.gemspec", "abbrev.rb", "base64.gemspec", "base64.rb", "benchmark.gemspec"]
Dir.glob(pattern, base: 'lib/irb').take(5)
# =&gt; ["cmd", "color.rb", "color_printer.rb", "completion.rb", "context.rb"]
</pre> <p>If optional keyword <code>sort</code> is given, its value specifies whether the array is to be sorted; the default is <code>true</code>. Passing value <code>false</code> with that keyword disables sorting (though the underlying file system may already have sorted the array).</p> <p><strong>Patterns</strong></p> <p>Each pattern string is expanded according to certain metacharacters; examples below use the <a href="dir.html#class-Dir-label-About+the+Examples">Ruby file tree</a>:</p> <ul>
<li> <p><code>'*'</code>: Matches any substring in an entry name, similar in meaning to regexp <code>/.*/mx</code>; may be restricted by other values in the pattern strings:</p> <ul>
<li> <p><code>'*'</code> matches all entry names:</p> <pre class="ruby" data-language="ruby">Dir.glob('*').take(3)  # =&gt; ["BSDL", "CONTRIBUTING.md", "COPYING"]
</pre> </li>
<li> <p><code>'c*'</code> matches entry names beginning with <code>'c'</code>:</p> <pre class="ruby" data-language="ruby">Dir.glob('c*').take(3) # =&gt; ["CONTRIBUTING.md", "COPYING", "COPYING.ja"]
</pre> </li>
<li> <p><code>'*c'</code> matches entry names ending with <code>'c'</code>:</p> <pre class="ruby" data-language="ruby">Dir.glob('*c').take(3) # =&gt; ["addr2line.c", "array.c", "ast.c"]
</pre> </li>
<li> <p><code>'*c*'</code> matches entry names that contain <code>'c'</code>, even at the beginning or end:</p> <pre class="ruby" data-language="ruby">Dir.glob('*c*').take(3) # =&gt; ["CONTRIBUTING.md", "COPYING", "COPYING.ja"]
</pre> </li>
</ul> <p>Does not match Unix-like hidden entry names (“dot files”). To include those in the matched entry names, use flag IO::FNM_DOTMATCH or something like <code>'{*,.*}'</code>.</p> </li>
<li> <p><code>'**'</code>: Matches entry names recursively if followed by the slash character <code>'/'</code>:</p> <pre class="ruby" data-language="ruby">Dir.glob('**/').take(3) # =&gt; ["basictest/", "benchmark/", "benchmark/gc/"]
</pre> <p>If the string pattern contains other characters or is not followed by a slash character, it is equivalent to <code>'*'</code>.</p> </li>
<li> <p><code>'?'</code> Matches any single character; similar in meaning to regexp <code>/./</code>:</p> <pre class="ruby" data-language="ruby">Dir.glob('io.?') # =&gt; ["io.c"]
</pre> </li>
<li> <p><code>'[<em>set</em>]'</code>: Matches any one character in the string <em>set</em>; behaves like a <a href="regexp.html#class-Regexp-label-Character+Classes">Regexp character class</a>, including set negation (<code>'[^a-z]'</code>):</p> <pre class="ruby" data-language="ruby">Dir.glob('*.[a-z][a-z]').take(3)
# =&gt; ["CONTRIBUTING.md", "COPYING.ja", "KNOWNBUGS.rb"]
</pre> </li>
<li> <p><code>'{<em>abc</em>,<em>xyz</em>}'</code>: Matches either string <em>abc</em> or string <em>xyz</em>; behaves like <a href="regexp.html#class-Regexp-label-Alternation">Regexp alternation</a>:</p> <pre class="ruby" data-language="ruby">Dir.glob('{LEGAL,BSDL}') # =&gt; ["LEGAL", "BSDL"]
</pre> <p>More than two alternatives may be given.</p> </li>
<li> <p><code>\</code>: Escapes the following metacharacter.</p> <p>Note that on Windows, the backslash character may not be used in a string pattern: <code>Dir['c:\foo*']</code> will not work, use <code>Dir['c:/foo*']</code> instead.</p> </li>
</ul> <p>More examples (using the <a href="dir.html#class-Dir-label-About+the+Examples">simple file tree</a>):</p> <pre># We're in the example directory.
File.basename(Dir.pwd) # =&gt; "example"
Dir.glob('config.?')              # =&gt; ["config.h"]
Dir.glob('*.[a-z][a-z]')          # =&gt; ["main.rb"]
Dir.glob('*.[^r]*')               # =&gt; ["config.h"]
Dir.glob('*.{rb,h}')              # =&gt; ["main.rb", "config.h"]
Dir.glob('*')                     # =&gt; ["config.h", "lib", "main.rb"]
Dir.glob('*', File::FNM_DOTMATCH) # =&gt; [".", "config.h", "lib", "main.rb"]
Dir.glob(["*.rb", "*.h"])         # =&gt; ["main.rb", "config.h"]

Dir.glob('**/*.rb')
=&gt; ["lib/song/karaoke.rb", "lib/song.rb", "main.rb"]

Dir.glob('**/*.rb', base: 'lib')  #   =&gt; ["song/karaoke.rb", "song.rb"]

Dir.glob('**/lib')                # =&gt; ["lib"]

Dir.glob('**/lib/**/*.rb')        # =&gt; ["lib/song/karaoke.rb", "lib/song.rb"]

Dir.glob('**/lib/*.rb')           # =&gt; ["lib/song.rb"]</pre> <p><strong>Flags</strong></p> <p>If optional keyword argument <code>flags</code> is given (the default is zero – no flags), its value should be the bitwise OR of one or more of the constants defined in module <a href="file/constants.html"><code>File::Constants</code></a>.</p> <p>Example:</p> <pre class="ruby" data-language="ruby">flags = File::FNM_EXTGLOB | File::FNM_DOTMATCH
</pre> <p>Specifying flags can extend, restrict, or otherwise modify the matching.</p> <p>The flags for this method (other constants in <a href="file/constants.html"><code>File::Constants</code></a> do not apply):</p> <ul>
<li> <p>File::FNM_DOTMATCH: specifies that entry names beginning with <code>'.'</code> should be considered for matching:</p> <pre class="ruby" data-language="ruby">Dir.glob('*').take(5)
# =&gt; ["BSDL", "CONTRIBUTING.md", "COPYING", "COPYING.ja", "GPL"]
Dir.glob('*', flags: File::FNM_DOTMATCH).take(5)
# =&gt; [".", ".appveyor.yml", ".cirrus.yml", ".dir-locals.el", ".document"]
</pre> </li>
<li> <p>File::FNM_EXTGLOB: enables the pattern extension <code>'{<em>a</em>,<em>b</em>}'</code>, which matches pattern <em>a</em> and pattern <em>b</em>; behaves like a <a href="regexp.html#method-c-union">regexp union</a> (e.g., <code>'(?:<em>a</em>|<em>b</em>)'</code>):</p> <pre class="ruby" data-language="ruby">pattern = '{LEGAL,BSDL}'
Dir.glob(pattern)      # =&gt; ["LEGAL", "BSDL"]
</pre> </li>
<li> <p>File::FNM_NOESCAPE: specifies that escaping with the backslash character <code>'\'</code> is disabled; the character is not an escape character.</p> </li>
<li> <p>File::FNM_PATHNAME: specifies that metacharacters <code>'*'</code> and <code>'?'</code> do not match directory separators.</p> </li>
<li> <p>File::FNM_SHORTNAME: specifies that patterns may match short names if they exist; Windows only.</p> </li>
</ul> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-c-home"> <a href="#method-c-home" title="Link to this method"> <span class="method-callseq"> home(user_name = nil) → dirpath </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="home-source"> <pre class="c" data-language="c">static VALUE
dir_s_home(int argc, VALUE *argv, VALUE obj)
{
    VALUE user;
    const char *u = 0;

    rb_check_arity(argc, 0, 1);
    user = (argc &gt; 0) ? argv[0] : Qnil;
    if (!NIL_P(user)) {
        StringValue(user);
        rb_must_asciicompat(user);
        u = StringValueCStr(user);
        if (*u) {
            return rb_home_dir_of(user, rb_str_new(0, 0));
        }
    }
    return rb_default_home_dir(rb_str_new(0, 0));

}</pre> </div>  <p>Returns the home directory path of the user specified with <code>user_name</code> if it is not <code>nil</code>, or the current login user:</p> <pre class="ruby" data-language="ruby">Dir.home         # =&gt; "/home/me"
Dir.home('root') # =&gt; "/root"
</pre> <p>Raises <a href="argumenterror.html"><code>ArgumentError</code></a> if <code>user_name</code> is not a user name.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-c-mkdir"> <a href="#method-c-mkdir" title="Link to this method"> <span class="method-callseq"> mkdir(dirpath, permissions = 0775) → 0 </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="mkdir-source"> <pre class="c" data-language="c">static VALUE
dir_s_mkdir(int argc, VALUE *argv, VALUE obj)
{
    struct mkdir_arg m;
    VALUE path, vmode;
    int r;

    if (rb_scan_args(argc, argv, "11", &amp;path, &amp;vmode) == 2) {
        m.mode = NUM2MODET(vmode);
    }
    else {
        m.mode = 0777;
    }

    path = check_dirname(path);
    m.path = RSTRING_PTR(path);
    r = IO_WITHOUT_GVL_INT(nogvl_mkdir, &amp;m);
    if (r &lt; 0)
        rb_sys_fail_path(path);

    return INT2FIX(0);
}</pre> </div>  <p>Creates a directory in the underlying file system at <code>dirpath</code> with the given <code>permissions</code>; returns zero:</p> <pre class="ruby" data-language="ruby">Dir.mkdir('foo')
File.stat(Dir.new('foo')).mode.to_s(8)[1..4] # =&gt; "0755"
Dir.mkdir('bar', 0644)
File.stat(Dir.new('bar')).mode.to_s(8)[1..4] # =&gt; "0644"
</pre> <p>See <a href="file.html#class-File-label-File+Permissions">File Permissions</a>. Note that argument <code>permissions</code> is ignored on Windows.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-c-mktmpdir"> <a href="#method-c-mktmpdir" title="Link to this method"> <span class="method-name">mktmpdir</span> <span class="method-args">(prefix_suffix=nil, *rest, **options) { |dup| ... }</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="mktmpdir-source"> <pre class="ruby" data-language="ruby"># File lib/tmpdir.rb, line 97
def self.mktmpdir(prefix_suffix=nil, *rest, **options, &amp;block)
  base = nil
  path = Tmpname.create(prefix_suffix || "d", *rest, **options) {|path, _, _, d|
    base = d
    mkdir(path, 0700)
  }
  if block
    begin
      yield path.dup
    ensure
      unless base
        base = File.dirname(path)
        stat = File.stat(base)
        if stat.world_writable? and !stat.sticky?
          raise ArgumentError, "parent directory is world writable but not sticky: #{base}"
        end
      end
      FileUtils.remove_entry path
    end
  else
    path
  end
end</pre> </div>  <p><a href="dir.html#method-c-mktmpdir"><code>Dir.mktmpdir</code></a> creates a temporary directory.</p> <pre class="ruby" data-language="ruby">require 'tmpdir'
Dir.mktmpdir {|dir|
  # use the directory
}
</pre> <p>The directory is created with 0700 permission. Application should not change the permission to make the temporary directory accessible from other users.</p> <p>The prefix and suffix of the name of the directory is specified by the optional first argument, <em>prefix_suffix</em>.</p> <ul>
<li> <p>If it is not specified or nil, “d” is used as the prefix and no suffix is used.</p> </li>
<li> <p>If it is a string, it is used as the prefix and no suffix is used.</p> </li>
<li> <p>If it is an array, first element is used as the prefix and second element is used as a suffix.</p> </li>
</ul> <pre class="ruby" data-language="ruby">Dir.mktmpdir {|dir| dir is ".../d..." }
Dir.mktmpdir("foo") {|dir| dir is ".../foo..." }
Dir.mktmpdir(["foo", "bar"]) {|dir| dir is ".../foo...bar" }
</pre> <p>The directory is created under <a href="dir.html#method-c-tmpdir"><code>Dir.tmpdir</code></a> or the optional second argument <em>tmpdir</em> if non-nil value is given.</p> <pre class="ruby" data-language="ruby">Dir.mktmpdir {|dir| dir is "#{Dir.tmpdir}/d..." }
Dir.mktmpdir(nil, "/var/tmp") {|dir| dir is "/var/tmp/d..." }
</pre> <p>If a block is given, it is yielded with the path of the directory. The directory and its contents are removed using <a href="fileutils.html#method-c-remove_entry"><code>FileUtils.remove_entry</code></a> before <a href="dir.html#method-c-mktmpdir"><code>Dir.mktmpdir</code></a> returns. The value of the block is returned.</p> <pre class="ruby" data-language="ruby">Dir.mktmpdir {|dir|
  # use the directory...
  open("#{dir}/foo", "w") { something using the file }
}
</pre> <p>If a block is not given, The path of the directory is returned. In this case, <a href="dir.html#method-c-mktmpdir"><code>Dir.mktmpdir</code></a> doesn’t remove the directory.</p> <pre class="ruby" data-language="ruby">dir = Dir.mktmpdir
begin
  # use the directory...
  open("#{dir}/foo", "w") { something using the file }
ensure
  # remove the directory.
  FileUtils.remove_entry dir
end
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-c-new"> <a href="#method-c-new" title="Link to this method"> <span class="method-callseq"> new(dirpath) → dir </span> </a> </div> <div class="method-heading"> <a href="#method-c-new" title="Link to this method"> <span class="method-callseq"> new(dirpath, encoding: nil) → dir </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="new-source"> <pre class="ruby" data-language="ruby"># File dir.rb, line 211
def initialize(name, encoding: nil)
  Primitive.dir_initialize(name, encoding)
end</pre> </div>  <p>Returns a new Dir object for the directory at <code>dirpath</code>:</p> <pre class="ruby" data-language="ruby">Dir.new('.') # =&gt; #&lt;Dir:.&gt;
</pre> <p>The value given with optional keyword argument <code>encoding</code> specifies the encoding for the directory entry names; if <code>nil</code> (the default), the file system’s encoding is used:</p> <pre class="ruby" data-language="ruby">Dir.new('.').read.encoding                       # =&gt; #&lt;Encoding:UTF-8&gt;
Dir.new('.', encoding: 'US-ASCII').read.encoding # =&gt; #&lt;Encoding:US-ASCII&gt;
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-c-open"> <a href="#method-c-open" title="Link to this method"> <span class="method-callseq"> open(dirpath) → dir </span> </a> </div> <div class="method-heading"> <a href="#method-c-open" title="Link to this method"> <span class="method-callseq"> open(dirpath, encoding: nil) → dir </span> </a> </div> <div class="method-heading"> <a href="#method-c-open" title="Link to this method"> <span class="method-callseq"> open(dirpath) {|dir| ... } → object </span> </a> </div> <div class="method-heading"> <a href="#method-c-open" title="Link to this method"> <span class="method-callseq"> open(dirpath, encoding: nil) {|dir| ... } → object </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="open-source"> <pre class="ruby" data-language="ruby"># File dir.rb, line 183
def self.open(name, encoding: nil, &amp;block)
  dir = Primitive.dir_s_open(name, encoding)
  if block
    begin
      yield dir
    ensure
      Primitive.dir_s_close(dir)
    end
  else
    dir
  end
end</pre> </div>  <p>Creates a new Dir object <em>dir</em> for the directory at <code>dirpath</code>.</p> <p>With no block, the method equivalent to <a href="dir.html#method-c-new"><code>Dir.new(dirpath, encoding)</code></a>:</p> <pre class="ruby" data-language="ruby">Dir.open('.') # =&gt; #&lt;Dir:.&gt;
</pre> <p>With a block given, the block is called with the created <em>dir</em>; on block exit <em>dir</em> is closed and the block’s value is returned:</p> <pre class="ruby" data-language="ruby">Dir.open('.') {|dir| dir.inspect } # =&gt; "#&lt;Dir:.&gt;"
</pre> <p>The value given with optional keyword argument <code>encoding</code> specifies the encoding for the directory entry names; if <code>nil</code> (the default), the file system’s encoding is used:</p> <pre class="ruby" data-language="ruby">Dir.open('.').read.encoding                       # =&gt; #&lt;Encoding:UTF-8&gt;
Dir.open('.', encoding: 'US-ASCII').read.encoding # =&gt; #&lt;Encoding:US-ASCII&gt;
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-c-pwd"> <a href="#method-c-pwd" title="Link to this method"> <span class="method-callseq"> pwd → string </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="pwd-source"> <pre class="c" data-language="c">static VALUE
dir_s_getwd(VALUE dir)
{
    return rb_dir_getwd();
}</pre> </div>  <p>Returns the path to the current working directory:</p> <pre class="ruby" data-language="ruby">Dir.chdir("/tmp") # =&gt; 0
Dir.pwd           # =&gt; "/tmp"
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-c-rmdir"> <a href="#method-c-rmdir" title="Link to this method"> <span class="method-callseq"> rmdir(dirpath) → 0 </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="rmdir-source"> <pre class="c" data-language="c">static VALUE
dir_s_rmdir(VALUE obj, VALUE dir)
{
    const char *p;
    int r;

    dir = check_dirname(dir);
    p = RSTRING_PTR(dir);
    r = IO_WITHOUT_GVL_INT(nogvl_rmdir, (void *)p);
    if (r &lt; 0)
        rb_sys_fail_path(dir);

    return INT2FIX(0);
}</pre> </div>  <p>Removes the directory at <code>dirpath</code> from the underlying file system:</p> <pre class="ruby" data-language="ruby">Dir.rmdir('foo') # =&gt; 0
</pre> <p>Raises an exception if the directory is not empty.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-c-tmpdir"> <a href="#method-c-tmpdir" title="Link to this method"> <span class="method-name">tmpdir</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="tmpdir-source"> <pre class="ruby" data-language="ruby"># File lib/tmpdir.rb, line 25
def self.tmpdir
  Tmpname::TMPDIR_CANDIDATES.find do |name, dir|
    unless dir
      next if !(dir = ENV[name] rescue next) or dir.empty?
    end
    dir = File.expand_path(dir)
    stat = File.stat(dir) rescue next
    case
    when !stat.directory?
      warn "#{name} is not a directory: #{dir}"
    when !File.writable?(dir)
      # We call File.writable?, not stat.writable?, because you can't tell if a dir is actually
      # writable just from stat; OS mechanisms other than user/group/world bits can affect this.
      warn "#{name} is not writable: #{dir}"
    when stat.world_writable? &amp;&amp; !stat.sticky?
      warn "#{name} is world-writable: #{dir}"
    else
      break dir
    end
  end or raise ArgumentError, "could not find a temporary directory"
end</pre> </div>  <p>Returns the operating system’s temporary file path.</p> <pre class="ruby" data-language="ruby">require 'tmpdir'
Dir.tmpdir # =&gt; "/tmp"
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-c-unlink"> <a href="#method-c-unlink" title="Link to this method"> <span class="method-callseq"> rmdir(dirpath) → 0 </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="unlink-source"> <pre class="c" data-language="c">static VALUE
dir_s_rmdir(VALUE obj, VALUE dir)
{
    const char *p;
    int r;

    dir = check_dirname(dir);
    p = RSTRING_PTR(dir);
    r = IO_WITHOUT_GVL_INT(nogvl_rmdir, (void *)p);
    if (r &lt; 0)
        rb_sys_fail_path(dir);

    return INT2FIX(0);
}</pre> </div>  <p>Removes the directory at <code>dirpath</code> from the underlying file system:</p> <pre class="ruby" data-language="ruby">Dir.rmdir('foo') # =&gt; 0
</pre> <p>Raises an exception if the directory is not empty.</p> </div> </div> </section> <section id="public-instance-5Buntitled-5D-method-details" class="method-section anchor-link"> <header> <h3>Public Instance Methods</h3> </header> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-chdir"> <a href="#method-i-chdir" title="Link to this method"> <span class="method-callseq"> chdir → 0 </span> </a> </div> <div class="method-heading"> <a href="#method-i-chdir" title="Link to this method"> <span class="method-callseq"> chdir { ... } → object </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="chdir-source"> <pre class="c" data-language="c">static VALUE
dir_chdir(VALUE dir)
{
#if defined(HAVE_FCHDIR) &amp;&amp; defined(HAVE_DIRFD) &amp;&amp; HAVE_FCHDIR &amp;&amp; HAVE_DIRFD
    return dir_s_fchdir(rb_cDir, dir_fileno(dir));
#else
    return chdir_path(dir_get(dir)-&gt;path, false);
#endif
}</pre> </div>  <p>Changes the current working directory to <code>self</code>:</p> <pre class="ruby" data-language="ruby">Dir.pwd # =&gt; "/"
dir = Dir.new('example')
dir.chdir
Dir.pwd # =&gt; "/example"
</pre> <p>With a block, temporarily changes the working directory:</p> <ul>
<li> <p>Calls the block.</p> </li>
<li> <p>Changes to the given directory.</p> </li>
<li> <p>Executes the block (yields no args).</p> </li>
<li> <p>Restores the previous working directory.</p> </li>
<li> <p>Returns the block’s return value.</p> </li>
</ul> <p>Uses <a href="dir.html#method-c-fchdir"><code>Dir.fchdir</code></a> if available, and <a href="dir.html#method-c-chdir"><code>Dir.chdir</code></a> if not, see those methods for caveats.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-children"> <a href="#method-i-children" title="Link to this method"> <span class="method-callseq"> children → array </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="children-source"> <pre class="c" data-language="c">static VALUE
dir_collect_children(VALUE dir)
{
    VALUE ary = rb_ary_new();
    dir_each_entry(dir, rb_ary_push, ary, TRUE);
    return ary;
}</pre> </div>  <p>Returns an array of the entry names in <code>self</code> except for <code>'.'</code> and <code>'..'</code>:</p> <pre class="ruby" data-language="ruby">dir = Dir.new('/example')
dir.children # =&gt; ["config.h", "lib", "main.rb"]
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-close"> <a href="#method-i-close" title="Link to this method"> <span class="method-callseq"> close → nil </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="close-source"> <pre class="c" data-language="c">static VALUE
dir_close(VALUE dir)
{
    struct dir_data *dirp;

    dirp = dir_get(dir);
    if (!dirp-&gt;dir) return Qnil;
    close_dir_data(dirp);

    return Qnil;
}</pre> </div>  <p>Closes the stream in <code>self</code>, if it is open, and returns <code>nil</code>; ignored if <code>self</code> is already closed:</p> <pre class="ruby" data-language="ruby">dir = Dir.new('example')
dir.read     # =&gt; "."
dir.close     # =&gt; nil
dir.close     # =&gt; nil
dir.read # Raises IOError.
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-each"> <a href="#method-i-each" title="Link to this method"> <span class="method-callseq"> each {|entry_name| ... } → self </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="each-source"> <pre class="c" data-language="c">static VALUE
dir_each(VALUE dir)
{
    RETURN_ENUMERATOR(dir, 0, 0);
    return dir_each_entry(dir, dir_yield, Qnil, FALSE);
}</pre> </div>  <p>Calls the block with each entry name in <code>self</code>:</p> <pre class="ruby" data-language="ruby">Dir.new('example').each {|entry_name| p entry_name }
</pre> <p>Output:</p> <pre class="ruby" data-language="ruby">"."
".."
"config.h"
"lib"
"main.rb"
</pre> <p>With no block given, returns an <a href="enumerator.html"><code>Enumerator</code></a>.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-each_child"> <a href="#method-i-each_child" title="Link to this method"> <span class="method-callseq"> each_child {|entry_name| ... } → self </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="each_child-source"> <pre class="c" data-language="c">static VALUE
dir_each_child_m(VALUE dir)
{
    RETURN_ENUMERATOR(dir, 0, 0);
    return dir_each_entry(dir, dir_yield, Qnil, TRUE);
}</pre> </div>  <p>Calls the block with each entry name in <code>self</code> except <code>'.'</code> and <code>'..'</code>:</p> <pre class="ruby" data-language="ruby">dir = Dir.new('/example')
dir.each_child {|entry_name| p entry_name }
</pre> <p>Output:</p> <pre class="ruby" data-language="ruby">"config.h"
"lib"
"main.rb"
</pre> <p>If no block is given, returns an enumerator.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-fileno"> <a href="#method-i-fileno" title="Link to this method"> <span class="method-callseq"> fileno → integer </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="fileno-source"> <pre class="c" data-language="c">static VALUE
dir_fileno(VALUE dir)
{
    struct dir_data *dirp;
    int fd;

    GetDIR(dir, dirp);
    fd = dirfd(dirp-&gt;dir);
    if (fd == -1)
        rb_sys_fail("dirfd");
    return INT2NUM(fd);
}</pre> </div>  <p>Returns the file descriptor used in <em>dir</em>.</p> <pre class="ruby" data-language="ruby">d = Dir.new('..')
d.fileno # =&gt; 8
</pre> <p>This method uses the <a href="https://www.man7.org/linux/man-pages/man3/dirfd.3.html">dirfd()</a> function defined by POSIX 2008; the method is not implemented on non-POSIX platforms (raises <a href="notimplementederror.html"><code>NotImplementedError</code></a>).</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-inspect"> <a href="#method-i-inspect" title="Link to this method"> <span class="method-callseq"> inspect → string </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="inspect-source"> <pre class="c" data-language="c">static VALUE
dir_inspect(VALUE dir)
{
    struct dir_data *dirp;

    TypedData_Get_Struct(dir, struct dir_data, &amp;dir_data_type, dirp);
    if (!NIL_P(dirp-&gt;path)) {
        VALUE str = rb_str_new_cstr("#&lt;");
        rb_str_append(str, rb_class_name(CLASS_OF(dir)));
        rb_str_cat2(str, ":");
        rb_str_append(str, dirp-&gt;path);
        rb_str_cat2(str, "&gt;");
        return str;
    }
    return rb_funcallv(dir, idTo_s, 0, 0);
}</pre> </div>  <p>Returns a string description of <code>self</code>:</p> <pre class="ruby" data-language="ruby">Dir.new('example').inspect # =&gt; "#&lt;Dir:example&gt;"
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-path"> <a href="#method-i-path" title="Link to this method"> <span class="method-callseq"> path → string or nil </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="path-source"> <pre class="c" data-language="c">static VALUE
dir_path(VALUE dir)
{
    struct dir_data *dirp;

    TypedData_Get_Struct(dir, struct dir_data, &amp;dir_data_type, dirp);
    if (NIL_P(dirp-&gt;path)) return Qnil;
    return rb_str_dup(dirp-&gt;path);
}</pre> </div>  <p>Returns the <code>dirpath</code> string that was used to create <code>self</code> (or <code>nil</code> if created by method <a href="dir.html#method-c-for_fd"><code>Dir.for_fd</code></a>):</p> <pre class="ruby" data-language="ruby">Dir.new('example').path # =&gt; "example"
</pre> </div> <div class="aliases"> Also aliased as: <a href="dir.html#method-i-to_path">to_path</a> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-pos"> <a href="#method-i-pos" title="Link to this method"> <span class="method-name">pos</span> </a> </div> </div> <div class="aliases"> Alias for: <a href="dir.html#method-i-tell">tell</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-pos-3D"> <a href="#method-i-pos-3D" title="Link to this method"> <span class="method-callseq"> pos = position → integer </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="pos-3D-source"> <pre class="c" data-language="c">static VALUE
dir_set_pos(VALUE dir, VALUE pos)
{
    dir_seek(dir, pos);
    return pos;
}</pre> </div>  <p>Sets the position in <code>self</code> and returns <code>position</code>. The value of <code>position</code> should have been returned from an earlier call to <a href="dir.html#method-i-tell"><code>tell</code></a>; if not, the return values from subsequent calls to <a href="dir.html#method-i-read"><code>read</code></a> are unspecified.</p> <p>See <a href="dir.html#class-Dir-label-Dir+As+Stream-Like">Dir As Stream-Like</a>.</p> <p>Examples:</p> <pre class="ruby" data-language="ruby">dir = Dir.new('example')
dir.pos      # =&gt; 0
dir.pos = 3  # =&gt; 3
dir.pos      # =&gt; 3
dir.pos = 30 # =&gt; 30
dir.pos      # =&gt; 5
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-read"> <a href="#method-i-read" title="Link to this method"> <span class="method-callseq"> read → string or nil </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="read-source"> <pre class="c" data-language="c">static VALUE
dir_read(VALUE dir)
{
    struct dir_data *dirp;
    struct dirent *dp;

    GetDIR(dir, dirp);
    rb_errno_set(0);
    if ((dp = READDIR(dirp-&gt;dir, dirp-&gt;enc)) != NULL) {
        return rb_external_str_new_with_enc(dp-&gt;d_name, NAMLEN(dp), dirp-&gt;enc);
    }
    else {
        int e = errno;
        if (e != 0) rb_syserr_fail(e, 0);
        return Qnil;            /* end of stream */
    }
}</pre> </div>  <p>Reads and returns the next entry name from <code>self</code>; returns <code>nil</code> if at end-of-stream; see <a href="dir.html#class-Dir-label-Dir+As+Stream-Like">Dir As Stream-Like</a>:</p> <pre class="ruby" data-language="ruby">dir = Dir.new('example')
dir.read # =&gt; "."
dir.read # =&gt; ".."
dir.read # =&gt; "config.h"
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-rewind"> <a href="#method-i-rewind" title="Link to this method"> <span class="method-callseq"> rewind → self </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="rewind-source"> <pre class="c" data-language="c">static VALUE
dir_rewind(VALUE dir)
{
    struct dir_data *dirp;

    GetDIR(dir, dirp);
    rewinddir(dirp-&gt;dir);
    return dir;
}</pre> </div>  <p>Sets the position in <code>self</code> to zero; see <a href="dir.html#class-Dir-label-Dir+As+Stream-Like">Dir As Stream-Like</a>:</p> <pre class="ruby" data-language="ruby">dir = Dir.new('example')
dir.read    # =&gt; "."
dir.read    # =&gt; ".."
dir.pos     # =&gt; 2
dir.rewind  # =&gt; #&lt;Dir:example&gt;
dir.pos     # =&gt; 0
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-seek"> <a href="#method-i-seek" title="Link to this method"> <span class="method-callseq"> seek(position) → self </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="seek-source"> <pre class="c" data-language="c">static VALUE
dir_seek(VALUE dir, VALUE pos)
{
    struct dir_data *dirp;
    long p = NUM2LONG(pos);

    GetDIR(dir, dirp);
    seekdir(dirp-&gt;dir, p);
    return dir;
}</pre> </div>  <p>Sets the position in <code>self</code> and returns <code>self</code>. The value of <code>position</code> should have been returned from an earlier call to <a href="dir.html#method-i-tell"><code>tell</code></a>; if not, the return values from subsequent calls to <a href="dir.html#method-i-read"><code>read</code></a> are unspecified.</p> <p>See <a href="dir.html#class-Dir-label-Dir+As+Stream-Like">Dir As Stream-Like</a>.</p> <p>Examples:</p> <pre class="ruby" data-language="ruby">dir = Dir.new('example')
dir.pos      # =&gt; 0
dir.seek(3)  # =&gt; #&lt;Dir:example&gt;
dir.pos      # =&gt; 3
dir.seek(30) # =&gt; #&lt;Dir:example&gt;
dir.pos      # =&gt; 5
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-tell"> <a href="#method-i-tell" title="Link to this method"> <span class="method-callseq"> tell → integer </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="tell-source"> <pre class="c" data-language="c">static VALUE
dir_tell(VALUE dir)
{
    struct dir_data *dirp;
    long pos;

    GetDIR(dir, dirp);
    if((pos = telldir(dirp-&gt;dir)) &lt; 0)
        rb_sys_fail("telldir");
    return rb_int2inum(pos);
}</pre> </div>  <p>Returns the current position of <code>self</code>; see <a href="dir.html#class-Dir-label-Dir+As+Stream-Like">Dir As Stream-Like</a>:</p> <pre class="ruby" data-language="ruby">dir = Dir.new('example')
dir.tell  # =&gt; 0
dir.read  # =&gt; "."
dir.tell  # =&gt; 1
</pre> </div> <div class="aliases"> Also aliased as: <a href="dir.html#method-i-pos">pos</a> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-to_path"> <a href="#method-i-to_path" title="Link to this method"> <span class="method-name">to_path</span> </a> </div> </div> <div class="aliases"> Alias for: <a href="dir.html#method-i-path">path</a> </div> </div> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    Ruby Core &copy; 1993&ndash;2024 Yukihiro Matsumoto<br>Licensed under the Ruby License.<br>Ruby Standard Library &copy; contributors<br>Licensed under their own licenses.<br>
    
  </p>
</div>
