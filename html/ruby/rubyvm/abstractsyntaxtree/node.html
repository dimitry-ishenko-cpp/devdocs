<h1 id="class-RubyVM::AbstractSyntaxTree::Node" class="anchor-link class"> class RubyVM::AbstractSyntaxTree::Node </h1>
<dl class="meta">
<dt>Parent:</dt>
<dd class="meta-parent"><a href="../../object.html">Object</a></dd>
</dl> <section class="description"> <p><a href="node.html"><code>RubyVM::AbstractSyntaxTree::Node</code></a> instances are created by parse methods in <a href="../abstractsyntaxtree.html"><code>RubyVM::AbstractSyntaxTree</code></a>.</p> <p>This class is MRI specific.</p> </section> <section id="5Buntitled-5D" class="documentation-section anchor-link"> <section id="public-instance-5Buntitled-5D-method-details" class="method-section anchor-link"> <header> <h3>Public Instance Methods</h3> </header> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-all_tokens"> <a href="#method-i-all_tokens" title="Link to this method"> <span class="method-callseq"> all_tokens → array </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="all_tokens-source"> <pre class="ruby" data-language="ruby"># File ast.rb, line 205
def all_tokens
  Primitive.ast_node_all_tokens
end</pre> </div>  <p>Returns all tokens for the input script regardless the receiver node. Returns <code>nil</code> if <code>keep_tokens</code> is not enabled when parse method is called.</p> <pre class="ruby" data-language="ruby">root = RubyVM::AbstractSyntaxTree.parse("x = 1 + 2", keep_tokens: true)
root.all_tokens # =&gt; [[0, :tIDENTIFIER, "x", [1, 0, 1, 1]], [1, :tSP, " ", [1, 1, 1, 2]], ...]
root.children[-1].all_tokens # =&gt; [[0, :tIDENTIFIER, "x", [1, 0, 1, 1]], [1, :tSP, " ", [1, 1, 1, 2]], ...]
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-children"> <a href="#method-i-children" title="Link to this method"> <span class="method-callseq"> children → array </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="children-source"> <pre class="ruby" data-language="ruby"># File ast.rb, line 216
def children
  Primitive.ast_node_children
end</pre> </div>  <p>Returns AST nodes under this one. Each kind of node has different children, depending on what kind of node it is.</p> <p>The returned array may contain other nodes or <code>nil</code>.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-first_column"> <a href="#method-i-first_column" title="Link to this method"> <span class="method-callseq"> first_column → integer </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="first_column-source"> <pre class="ruby" data-language="ruby"># File ast.rb, line 148
def first_column
  Primitive.ast_node_first_column
end</pre> </div>  <p>The column number in the source code where this AST’s text began.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-first_lineno"> <a href="#method-i-first_lineno" title="Link to this method"> <span class="method-callseq"> first_lineno → integer </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="first_lineno-source"> <pre class="ruby" data-language="ruby"># File ast.rb, line 140
def first_lineno
  Primitive.ast_node_first_lineno
end</pre> </div>  <p>The line number in the source code where this AST’s text began.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-inspect"> <a href="#method-i-inspect" title="Link to this method"> <span class="method-callseq"> inspect → string </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="inspect-source"> <pre class="ruby" data-language="ruby"># File ast.rb, line 224
def inspect
  Primitive.ast_node_inspect
end</pre> </div>  <p>Returns debugging information about this node as a string.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-last_column"> <a href="#method-i-last_column" title="Link to this method"> <span class="method-callseq"> last_column → integer </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="last_column-source"> <pre class="ruby" data-language="ruby"># File ast.rb, line 164
def last_column
  Primitive.ast_node_last_column
end</pre> </div>  <p>The column number in the source code where this AST’s text ended.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-last_lineno"> <a href="#method-i-last_lineno" title="Link to this method"> <span class="method-callseq"> last_lineno → integer </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="last_lineno-source"> <pre class="ruby" data-language="ruby"># File ast.rb, line 156
def last_lineno
  Primitive.ast_node_last_lineno
end</pre> </div>  <p>The line number in the source code where this AST’s text ended.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-locations"> <a href="#method-i-locations" title="Link to this method"> <span class="method-callseq"> locations → array </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="locations-source"> <pre class="ruby" data-language="ruby"># File ast.rb, line 280
def locations
  Primitive.ast_node_locations
end</pre> </div>  <p>Returns location objects associated with the AST node. The returned array contains <a href="location.html"><code>RubyVM::AbstractSyntaxTree::Location</code></a>.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-node_id"> <a href="#method-i-node_id" title="Link to this method"> <span class="method-callseq"> node_id → integer </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="node_id-source"> <pre class="ruby" data-language="ruby"># File ast.rb, line 235
def node_id
  Primitive.ast_node_node_id
end</pre> </div>  <p>Returns an internal <a href="node.html#method-i-node_id"><code>node_id</code></a> number. Note that this is an API for ruby internal use, debugging, and research. Do not use this for any other purpose. The compatibility is not guaranteed.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-script_lines"> <a href="#method-i-script_lines" title="Link to this method"> <span class="method-callseq"> script_lines → array </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="script_lines-source"> <pre class="ruby" data-language="ruby"># File ast.rb, line 247
def script_lines
  Primitive.ast_node_script_lines
end</pre> </div>  <p>Returns the original source code as an array of lines.</p> <p>Note that this is an API for ruby internal use, debugging, and research. Do not use this for any other purpose. The compatibility is not guaranteed.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-source"> <a href="#method-i-source" title="Link to this method"> <span class="method-callseq"> source → string </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="source-source"> <pre class="ruby" data-language="ruby"># File ast.rb, line 263
def source
  lines = script_lines
  if lines
    lines = lines[first_lineno - 1 .. last_lineno - 1]
    lines[-1] = lines[-1].byteslice(0...last_column)
    lines[0] = lines[0].byteslice(first_column..-1)
    lines.join
  else
    nil
  end
end</pre> </div>  <p>Returns the code fragment that corresponds to this AST.</p> <p>Note that this is an API for ruby internal use, debugging, and research. Do not use this for any other purpose. The compatibility is not guaranteed.</p> <p>Also note that this API may return an incomplete code fragment that does not parse; for example, a here document following an expression may be dropped.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-tokens"> <a href="#method-i-tokens" title="Link to this method"> <span class="method-callseq"> tokens → array </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="tokens-source"> <pre class="ruby" data-language="ruby"># File ast.rb, line 184
def tokens
  return nil unless all_tokens

  all_tokens.each_with_object([]) do |token, a|
    loc = token.last
    if ([first_lineno, first_column] &lt;=&gt; [loc[0], loc[1]]) &lt;= 0 &amp;&amp;
       ([last_lineno, last_column]   &lt;=&gt; [loc[2], loc[3]]) &gt;= 0
       a &lt;&lt; token
    end
  end
end</pre> </div>  <p>Returns tokens corresponding to the location of the node. Returns <code>nil</code> if <code>keep_tokens</code> is not enabled when parse method is called.</p> <pre class="ruby" data-language="ruby">root = RubyVM::AbstractSyntaxTree.parse("x = 1 + 2", keep_tokens: true)
root.tokens # =&gt; [[0, :tIDENTIFIER, "x", [1, 0, 1, 1]], [1, :tSP, " ", [1, 1, 1, 2]], ...]
root.tokens.map{_1[2]}.join # =&gt; "x = 1 + 2"
</pre> <p>Token is an array of:</p> <ul>
<li> <p>id</p> </li>
<li> <p>token type</p> </li>
<li> <p>source code text</p> </li>
<li> <p>location [ <a href="node.html#method-i-first_lineno"><code>first_lineno</code></a>, <a href="node.html#method-i-first_column"><code>first_column</code></a>, <a href="node.html#method-i-last_lineno"><code>last_lineno</code></a>, <a href="node.html#method-i-last_column"><code>last_column</code></a> ]</p> </li>
</ul> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-type"> <a href="#method-i-type" title="Link to this method"> <span class="method-callseq"> type → symbol </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="type-source"> <pre class="ruby" data-language="ruby"># File ast.rb, line 132
def type
  Primitive.ast_node_type
end</pre> </div>  <p>Returns the type of this node as a symbol.</p> <pre class="ruby" data-language="ruby">root = RubyVM::AbstractSyntaxTree.parse("x = 1 + 2")
root.type # =&gt; :SCOPE
lasgn = root.children[2]
lasgn.type # =&gt; :LASGN
call = lasgn.children[1]
call.type # =&gt; :OPCALL
</pre> </div> </div> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    Ruby Core &copy; 1993&ndash;2024 Yukihiro Matsumoto<br>Licensed under the Ruby License.<br>Ruby Standard Library &copy; contributors<br>Licensed under their own licenses.<br>
    
  </p>
</div>
