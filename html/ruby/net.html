<h1 id="module-Net" class="anchor-link module"> module Net </h1>  <section id="5Buntitled-5D" class="documentation-section anchor-link"> <section class="constants-list"> <header> <h3>Constants</h3> </header> <dl> <dt id="HTTPGatewayTimeOut">HTTPGatewayTimeOut </dt>
<dd> <p>Response class for <code>Gateway Timeout</code> responses (status code 504).</p> <p>The server was acting as a gateway or proxy and did not receive a timely response from the upstream server.</p> <p>This class also includes (indirectly) module <a href="net/httpheader.html"><code>Net::HTTPHeader</code></a>, which gives access to its <a href="net/httpheader.html#module-Net::HTTPHeader-label-Getters">methods for getting headers</a>.</p> <p>References:</p> <ul>
<li> <p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/504">Mozilla</a>.</p> </li>
<li> <p><a href="https://www.rfc-editor.org/rfc/rfc9110.html#name-504-gateway-timeout">RFC 9110</a>.</p> </li>
<li> <p><a href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes#504">Wikipedia</a>.</p> </li>
</ul> </dd>
<dt id="HTTPMovedTemporarily">HTTPMovedTemporarily </dt>
<dd> <p>Response class for <code>Found</code> responses (status code 302).</p> <p>The <code>Found</code> response indicates that the client should look at (browse to) another URL.</p> <p>This class also includes (indirectly) module <a href="net/httpheader.html"><code>Net::HTTPHeader</code></a>, which gives access to its <a href="net/httpheader.html#module-Net::HTTPHeader-label-Getters">methods for getting headers</a>.</p> <p>References:</p> <ul>
<li> <p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/302">Mozilla</a>.</p> </li>
<li> <p><a href="https://www.rfc-editor.org/rfc/rfc9110.html#name-302-found">RFC 9110</a>.</p> </li>
<li> <p><a href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes#302">Wikipedia</a>.</p> </li>
</ul> </dd>
<dt id="HTTPMultipleChoice">HTTPMultipleChoice </dt>
<dd> <p>Response class for <code>Multiple Choices</code> responses (status code 300).</p> <p>The <code>Multiple Choices</code> response indicates that the server offers multiple options for the resource from which the client may choose.</p> <p>This class also includes (indirectly) module <a href="net/httpheader.html"><code>Net::HTTPHeader</code></a>, which gives access to its <a href="net/httpheader.html#module-Net::HTTPHeader-label-Getters">methods for getting headers</a>.</p> <p>References:</p> <ul>
<li> <p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/300">Mozilla</a>.</p> </li>
<li> <p><a href="https://www.rfc-editor.org/rfc/rfc9110.html#name-300-multiple-choices">RFC 9110</a>.</p> </li>
<li> <p><a href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes#300">Wikipedia</a>.</p> </li>
</ul> </dd>
<dt id="HTTPRequestEntityTooLarge">HTTPRequestEntityTooLarge </dt>
<dd> <p>Response class for <code>Payload Too Large</code> responses (status code 413).</p> <p>The request is larger than the server is willing or able to process.</p> <p>This class also includes (indirectly) module <a href="net/httpheader.html"><code>Net::HTTPHeader</code></a>, which gives access to its <a href="net/httpheader.html#module-Net::HTTPHeader-label-Getters">methods for getting headers</a>.</p> <p>References:</p> <ul>
<li> <p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/413">Mozilla</a>.</p> </li>
<li> <p><a href="https://www.rfc-editor.org/rfc/rfc9110.html#name-413-content-too-large">RFC 9110</a>.</p> </li>
<li> <p><a href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes#413">Wikipedia</a>.</p> </li>
</ul> </dd>
<dt id="HTTPRequestTimeOut">HTTPRequestTimeOut </dt>
<dd> <p>Response class for <code>Request Timeout</code> responses (status code 408).</p> <p>The server timed out waiting for the request.</p> <p>This class also includes (indirectly) module <a href="net/httpheader.html"><code>Net::HTTPHeader</code></a>, which gives access to its <a href="net/httpheader.html#module-Net::HTTPHeader-label-Getters">methods for getting headers</a>.</p> <p>References:</p> <ul>
<li> <p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/408">Mozilla</a>.</p> </li>
<li> <p><a href="https://www.rfc-editor.org/rfc/rfc9110.html#name-408-request-timeout">RFC 9110</a>.</p> </li>
<li> <p><a href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes#408">Wikipedia</a>.</p> </li>
</ul> </dd>
<dt id="HTTPRequestURITooLarge">HTTPRequestURITooLarge </dt>
<dd> <p>Response class for <code>URI Too Long</code> responses (status code 414).</p> <p>The <a href="uri.html"><code>URI</code></a> provided was too long for the server to process.</p> <p>This class also includes (indirectly) module <a href="net/httpheader.html"><code>Net::HTTPHeader</code></a>, which gives access to its <a href="net/httpheader.html#module-Net::HTTPHeader-label-Getters">methods for getting headers</a>.</p> <p>References:</p> <ul>
<li> <p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/414">Mozilla</a>.</p> </li>
<li> <p><a href="https://www.rfc-editor.org/rfc/rfc9110.html#name-414-uri-too-long">RFC 9110</a>.</p> </li>
<li> <p><a href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes#414">Wikipedia</a>.</p> </li>
</ul> </dd>
<dt id="HTTPRequestURITooLong">HTTPRequestURITooLong </dt>
<dd> <p>Response class for <code>URI Too Long</code> responses (status code 414).</p> <p>The <a href="uri.html"><code>URI</code></a> provided was too long for the server to process.</p> <p>This class also includes (indirectly) module <a href="net/httpheader.html"><code>Net::HTTPHeader</code></a>, which gives access to its <a href="net/httpheader.html#module-Net::HTTPHeader-label-Getters">methods for getting headers</a>.</p> <p>References:</p> <ul>
<li> <p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/414">Mozilla</a>.</p> </li>
<li> <p><a href="https://www.rfc-editor.org/rfc/rfc9110.html#name-414-uri-too-long">RFC 9110</a>.</p> </li>
<li> <p><a href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes#414">Wikipedia</a>.</p> </li>
</ul> </dd>
<dt id="HTTPRequestedRangeNotSatisfiable">HTTPRequestedRangeNotSatisfiable </dt>
<dd> <p>Response class for <code>Range Not Satisfiable</code> responses (status code 416).</p> <p>The request entity has a media type which the server or resource does not support.</p> <p>This class also includes (indirectly) module <a href="net/httpheader.html"><code>Net::HTTPHeader</code></a>, which gives access to its <a href="net/httpheader.html#module-Net::HTTPHeader-label-Getters">methods for getting headers</a>.</p> <p>References:</p> <ul>
<li> <p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/416">Mozilla</a>.</p> </li>
<li> <p><a href="https://www.rfc-editor.org/rfc/rfc9110.html#name-416-range-not-satisfiable">RFC 9110</a>.</p> </li>
<li> <p><a href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes#416">Wikipedia</a>.</p> </li>
</ul> </dd>
<dt id="HTTPSession">HTTPSession </dt>
<dd> <p>Class Net::HTTP provides a rich library that implements the client in a client-server model that uses the HTTP request-response protocol. For information about HTTP, see:</p> <ul>
<li> <p><a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">Hypertext Transfer Protocol</a>.</p> </li>
<li> <p><a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Technical_overview">Technical overview</a>.</p> </li>
</ul> <h2 id="label-About+the+Examples">About the Examples</h2> <p>Examples here assume that <code>net/http</code> has been required (which also requires <code>uri</code>):</p> <pre class="ruby" data-language="ruby">require 'net/http'
</pre> <p>Many code examples here use these example websites:</p> <ul>
<li> <p><a href="https://jsonplaceholder.typicode.com">jsonplaceholder.typicode.com</a>.</p> </li>
<li> <p><a href="http://example.com">example.com</a>.</p> </li>
</ul> <p>Some examples also assume these variables:</p> <pre class="ruby" data-language="ruby">uri = URI('https://jsonplaceholder.typicode.com/')
uri.freeze # Examples may not modify.
hostname = uri.hostname # =&gt; "jsonplaceholder.typicode.com"
path = uri.path         # =&gt; "/"
port = uri.port         # =&gt; 443
</pre> <p>So that example requests may be written as:</p> <pre class="ruby" data-language="ruby">Net::HTTP.get(uri)
Net::HTTP.get(hostname, '/index.html')
Net::HTTP.start(hostname) do |http|
  http.get('/todos/1')
  http.get('/todos/2')
end
</pre> <p>An example that needs a modified <a href="uri.html"><code>URI</code></a> first duplicates <code>uri</code>, then modifies the duplicate:</p> <pre class="ruby" data-language="ruby">_uri = uri.dup
_uri.path = '/todos/1'
</pre> <h2 id="label-Strategies">Strategies</h2> <ul>
<li> <p>If you will make only a few GET requests, consider using <a href="openuri.html"><code>OpenURI</code></a>.</p> </li>
<li> <p>If you will make only a few requests of all kinds, consider using the various singleton convenience methods in this class. Each of the following methods automatically starts and finishes a <a href="net/http.html#class-Net::HTTP-label-Sessions">session</a> that sends a single request:</p> <pre class="ruby" data-language="ruby"># Return string response body.
Net::HTTP.get(hostname, path)
Net::HTTP.get(uri)

# Write string response body to $stdout.
Net::HTTP.get_print(hostname, path)
Net::HTTP.get_print(uri)

# Return response as Net::HTTPResponse object.
Net::HTTP.get_response(hostname, path)
Net::HTTP.get_response(uri)
data = '{"title": "foo", "body": "bar", "userId": 1}'
Net::HTTP.post(uri, data)
params = {title: 'foo', body: 'bar', userId: 1}
Net::HTTP.post_form(uri, params)
data = '{"title": "foo", "body": "bar", "userId": 1}'
Net::HTTP.put(uri, data)
</pre> </li>
<li> <p>If performance is important, consider using sessions, which lower request overhead. This <a href="net/http.html#class-Net::HTTP-label-Sessions">session</a> has multiple requests for <a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods">HTTP methods</a> and <a href="https://en.wikipedia.org/wiki/WebDAV#Implementation">WebDAV methods</a>:</p> <pre class="ruby" data-language="ruby">Net::HTTP.start(hostname) do |http|
  # Session started automatically before block execution.
  http.get(path)
  http.head(path)
  body = 'Some text'
  http.post(path, body)  # Can also have a block.
  http.put(path, body)
  http.delete(path)
  http.options(path)
  http.trace(path)
  http.patch(path, body) # Can also have a block.
  http.copy(path)
  http.lock(path, body)
  http.mkcol(path, body)
  http.move(path)
  http.propfind(path, body)
  http.proppatch(path, body)
  http.unlock(path, body)
  # Session finished automatically at block exit.
end
</pre> </li>
</ul> <p>The methods cited above are convenience methods that, via their few arguments, allow minimal control over the requests. For greater control, consider using <a href="net/httprequest.html">request objects</a>.</p> <h2 id="label-URIs">URIs</h2> <p>On the internet, a <a href="uri.html"><code>URI</code></a> (<a href="https://en.wikipedia.org/wiki/Uniform_Resource_Identifier">Universal Resource Identifier</a>) is a string that identifies a particular resource. It consists of some or all of: scheme, hostname, path, query, and fragment; see <a href="https://en.wikipedia.org/wiki/Uniform_Resource_Identifier#Syntax">URI syntax</a>.</p> <p>A Ruby <a href="uri/generic.html"><code>URI::Generic</code></a> object represents an internet <a href="uri.html"><code>URI</code></a>. It provides, among others, methods <code>scheme</code>, <code>hostname</code>, <code>path</code>, <code>query</code>, and <code>fragment</code>.</p> <h3 id="label-Schemes">Schemes</h3> <p>An internet URI has a <a href="https://en.wikipedia.org/wiki/List_of_URI_schemes">scheme</a>.</p> <p>The two schemes supported in Net::HTTP are <code>'https'</code> and <code>'http'</code>:</p> <pre class="ruby" data-language="ruby">uri.scheme                       # =&gt; "https"
URI('http://example.com').scheme # =&gt; "http"
</pre> <h3 id="label-Hostnames">Hostnames</h3> <p>A hostname identifies a server (host) to which requests may be sent:</p> <pre class="ruby" data-language="ruby">hostname = uri.hostname # =&gt; "jsonplaceholder.typicode.com"
Net::HTTP.start(hostname) do |http|
  # Some HTTP stuff.
end
</pre> <h3 id="label-Paths">Paths</h3> <p>A host-specific path identifies a resource on the host:</p> <pre class="ruby" data-language="ruby">_uri = uri.dup
_uri.path = '/todos/1'
hostname = _uri.hostname
path = _uri.path
Net::HTTP.get(hostname, path)
</pre> <h3 id="label-Queries">Queries</h3> <p>A host-specific query adds name/value pairs to the URI:</p> <pre class="ruby" data-language="ruby">_uri = uri.dup
params = {userId: 1, completed: false}
_uri.query = URI.encode_www_form(params)
_uri # =&gt; #&lt;URI::HTTPS https://jsonplaceholder.typicode.com?userId=1&amp;completed=false&gt;
Net::HTTP.get(_uri)
</pre> <h3 id="label-Fragments">Fragments</h3> <p>A <a href="https://en.wikipedia.org/wiki/URI_fragment">URI fragment</a> has no effect in Net::HTTP; the same data is returned, regardless of whether a fragment is included.</p> <h2 id="label-Request+Headers">Request Headers</h2> <p>Request headers may be used to pass additional information to the host, similar to arguments passed in a method call; each header is a name/value pair.</p> <p>Each of the Net::HTTP methods that sends a request to the host has optional argument <code>headers</code>, where the headers are expressed as a hash of field-name/value pairs:</p> <pre class="ruby" data-language="ruby">headers = {Accept: 'application/json', Connection: 'Keep-Alive'}
Net::HTTP.get(uri, headers)
</pre> <p>See lists of both standard request fields and common request fields at <a href="https://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Request_fields">Request Fields</a>. A host may also accept other custom fields.</p> <h2 id="label-HTTP+Sessions">HTTP Sessions</h2> <p>A <em>session</em> is a connection between a server (host) and a client that:</p> <ul>
<li> <p>Is begun by instance method <a href="net/http.html#method-i-start"><code>Net::HTTP#start</code></a>.</p> </li>
<li> <p>May contain any number of requests.</p> </li>
<li> <p>Is ended by instance method <a href="net/http.html#method-i-finish"><code>Net::HTTP#finish</code></a>.</p> </li>
</ul> <p>See example sessions at <a href="net/http.html#class-Net::HTTP-label-Strategies">Strategies</a>.</p> <h3 id="label-Session+Using+Net-3A-3AHTTP.start">Session Using Net::HTTP.start</h3> <p>If you have many requests to make to a single host (and port), consider using singleton method <a href="net/http.html#method-c-start"><code>Net::HTTP.start</code></a> with a block; the method handles the session automatically by:</p> <ul>
<li> <p>Calling start before block execution.</p> </li>
<li> <p>Executing the block.</p> </li>
<li> <p>Calling finish after block execution.</p> </li>
</ul> <p>In the block, you can use these instance methods, each of which that sends a single request:</p> <ul>
<li> <p><a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods">HTTP methods</a>:</p> <ul>
<li> <p>get, request_get: GET.</p> </li>
<li> <p>head, request_head: HEAD.</p> </li>
<li> <p>post, request_post: POST.</p> </li>
<li> <p>delete: DELETE.</p> </li>
<li> <p>options: OPTIONS.</p> </li>
<li> <p>trace: TRACE.</p> </li>
<li> <p>patch: PATCH.</p> </li>
</ul> </li>
<li> <p><a href="https://en.wikipedia.org/wiki/WebDAV#Implementation">WebDAV methods</a>:</p> <ul>
<li> <p>copy: COPY.</p> </li>
<li> <p>lock: LOCK.</p> </li>
<li> <p>mkcol: MKCOL.</p> </li>
<li> <p>move: MOVE.</p> </li>
<li> <p>propfind: PROPFIND.</p> </li>
<li> <p>proppatch: PROPPATCH.</p> </li>
<li> <p>unlock: UNLOCK.</p> </li>
</ul> </li>
</ul> <h3 id="label-Session+Using+Net-3A-3AHTTP.start+and+Net-3A-3AHTTP.finish">Session Using Net::HTTP.start and Net::HTTP.finish</h3> <p>You can manage a session manually using methods start and finish:</p> <pre class="ruby" data-language="ruby">http = Net::HTTP.new(hostname)
http.start
http.get('/todos/1')
http.get('/todos/2')
http.delete('/posts/1')
http.finish # Needed to free resources.
</pre> <h3 id="label-Single-Request+Session">Single-Request Session</h3> <p>Certain convenience methods automatically handle a session by:</p> <ul>
<li> <p>Creating an HTTP object</p> </li>
<li> <p>Starting a session.</p> </li>
<li> <p>Sending a single request.</p> </li>
<li> <p>Finishing the session.</p> </li>
<li> <p>Destroying the object.</p> </li>
</ul> <p>Such methods that send GET requests:</p> <ul>
<li> <p>::get: Returns the string response body.</p> </li>
<li> <p>::get_print: Writes the string response body to $stdout.</p> </li>
<li> <p>::get_response: Returns a <a href="net/httpresponse.html"><code>Net::HTTPResponse</code></a> object.</p> </li>
</ul> <p>Such methods that send POST requests:</p> <ul>
<li> <p>::post: Posts data to the host.</p> </li>
<li> <p>::post_form: Posts form data to the host.</p> </li>
</ul> <h2 id="label-HTTP+Requests+and+Responses">HTTP Requests and Responses</h2> <p>Many of the methods above are convenience methods, each of which sends a request and returns a string without directly using Net::HTTPRequest and Net::HTTPResponse objects.</p> <p>You can, however, directly create a request object, send the request, and retrieve the response object; see:</p> <ul>
<li> <p><a href="net/httprequest.html"><code>Net::HTTPRequest</code></a>.</p> </li>
<li> <p><a href="net/httpresponse.html"><code>Net::HTTPResponse</code></a>.</p> </li>
</ul> <h2 id="label-Following+Redirection">Following Redirection</h2> <p>Each returned response is an instance of a subclass of <a href="net/httpresponse.html"><code>Net::HTTPResponse</code></a>. See the <a href="net/httpresponse.html#class-Net::HTTPResponse-label-Response+Subclasses">response class hierarchy</a>.</p> <p>In particular, class <a href="net/httpredirection.html"><code>Net::HTTPRedirection</code></a> is the parent of all redirection classes. This allows you to craft a case statement to handle redirections properly:</p> <pre class="ruby" data-language="ruby">def fetch(uri, limit = 10)
  # You should choose a better exception.
  raise ArgumentError, 'Too many HTTP redirects' if limit == 0

  res = Net::HTTP.get_response(URI(uri))
  case res
  when Net::HTTPSuccess     # Any success class.
    res
  when Net::HTTPRedirection # Any redirection class.
    location = res['Location']
    warn "Redirected to #{location}"
    fetch(location, limit - 1)
  else                      # Any other class.
    res.value
  end
end

fetch(uri)
</pre> <h2 id="label-Basic+Authentication">Basic Authentication</h2> <p>Basic authentication is performed according to <a href="http://www.ietf.org/rfc/rfc2617.txt">RFC2617</a>:</p> <pre class="ruby" data-language="ruby">req = Net::HTTP::Get.new(uri)
req.basic_auth('user', 'pass')
res = Net::HTTP.start(hostname) do |http|
  http.request(req)
end
</pre> <h2 id="label-Streaming+Response+Bodies">Streaming Response Bodies</h2> <p>By default Net::HTTP reads an entire response into memory. If you are handling large files or wish to implement a progress bar you can instead stream the body directly to an <a href="io.html"><code>IO</code></a>.</p> <pre class="ruby" data-language="ruby">Net::HTTP.start(hostname) do |http|
  req = Net::HTTP::Get.new(uri)
  http.request(req) do |res|
    open('t.tmp', 'w') do |f|
      res.read_body do |chunk|
        f.write chunk
      end
    end
  end
end
</pre> <h2 id="label-HTTPS">HTTPS</h2> <p>HTTPS is enabled for an HTTP connection by <a href="net/http.html#method-i-use_ssl-3D"><code>Net::HTTP#use_ssl=</code></a>:</p> <pre class="ruby" data-language="ruby">Net::HTTP.start(hostname, :use_ssl =&gt; true) do |http|
  req = Net::HTTP::Get.new(uri)
  res = http.request(req)
end
</pre> <p>Or if you simply want to make a GET request, you may pass in a <a href="uri.html"><code>URI</code></a> object that has an HTTPS URL. Net::HTTP automatically turns on TLS verification if the <a href="uri.html"><code>URI</code></a> object has a ‘https’ <a href="uri.html"><code>URI</code></a> scheme:</p> <pre class="ruby" data-language="ruby">uri # =&gt; #&lt;URI::HTTPS https://jsonplaceholder.typicode.com/&gt;
Net::HTTP.get(uri)
</pre> <h2 id="label-Proxy+Server">Proxy Server</h2> <p>An HTTP object can have a <a href="https://en.wikipedia.org/wiki/Proxy_server">proxy server</a>.</p> <p>You can create an HTTP object with a proxy server using method <a href="net/http.html#method-c-new"><code>Net::HTTP.new</code></a> or method <a href="net/http.html#method-c-start"><code>Net::HTTP.start</code></a>.</p> <p>The proxy may be defined either by argument <code>p_addr</code> or by environment variable <code>'http_proxy'</code>.</p> <h3 id="label-Proxy+Using+Argument+p_addr+as+a+String">Proxy Using Argument <code>p_addr</code> as a String</h3> <p>When argument <code>p_addr</code> is a string hostname, the returned <code>http</code> has the given host as its proxy:</p> <pre class="ruby" data-language="ruby">http = Net::HTTP.new(hostname, nil, 'proxy.example')
http.proxy?          # =&gt; true
http.proxy_from_env? # =&gt; false
http.proxy_address   # =&gt; "proxy.example"
# These use default values.
http.proxy_port      # =&gt; 80
http.proxy_user      # =&gt; nil
http.proxy_pass      # =&gt; nil
</pre> <p>The port, username, and password for the proxy may also be given:</p> <pre class="ruby" data-language="ruby">http = Net::HTTP.new(hostname, nil, 'proxy.example', 8000, 'pname', 'ppass')
# =&gt; #&lt;Net::HTTP jsonplaceholder.typicode.com:80 open=false&gt;
http.proxy?          # =&gt; true
http.proxy_from_env? # =&gt; false
http.proxy_address   # =&gt; "proxy.example"
http.proxy_port      # =&gt; 8000
http.proxy_user      # =&gt; "pname"
http.proxy_pass      # =&gt; "ppass"
</pre> <h3 id="label-Proxy+Using+-27ENV-5B-27http_proxy-27-5D-27">Proxy Using ‘<code>ENV['http_proxy']</code>’</h3> <p>When environment variable <code>'http_proxy'</code> is set to a URI string, the returned <code>http</code> will have the server at that <a href="uri.html"><code>URI</code></a> as its proxy; note that the URI string must have a protocol such as <code>'http'</code> or <code>'https'</code>:</p> <pre class="ruby" data-language="ruby">ENV['http_proxy'] = 'http://example.com'
http = Net::HTTP.new(hostname)
http.proxy?          # =&gt; true
http.proxy_from_env? # =&gt; true
http.proxy_address   # =&gt; "example.com"
# These use default values.
http.proxy_port      # =&gt; 80
http.proxy_user      # =&gt; nil
http.proxy_pass      # =&gt; nil
</pre> <p>The URI string may include proxy username, password, and port number:</p> <pre class="ruby" data-language="ruby">ENV['http_proxy'] = 'http://pname:ppass@example.com:8000'
http = Net::HTTP.new(hostname)
http.proxy?          # =&gt; true
http.proxy_from_env? # =&gt; true
http.proxy_address   # =&gt; "example.com"
http.proxy_port      # =&gt; 8000
http.proxy_user      # =&gt; "pname"
http.proxy_pass      # =&gt; "ppass"
</pre> <h3 id="label-Filtering+Proxies">Filtering Proxies</h3> <p>With method <a href="net/http.html#method-c-new"><code>Net::HTTP.new</code></a> (but not <a href="net/http.html#method-c-start"><code>Net::HTTP.start</code></a>), you can use argument <code>p_no_proxy</code> to filter proxies:</p> <ul>
<li> <p>Reject a certain address:</p> <pre class="ruby" data-language="ruby">http = Net::HTTP.new('example.com', nil, 'proxy.example', 8000, 'pname', 'ppass', 'proxy.example')
http.proxy_address # =&gt; nil
</pre> </li>
<li> <p>Reject certain domains or subdomains:</p> <pre class="ruby" data-language="ruby">http = Net::HTTP.new('example.com', nil, 'my.proxy.example', 8000, 'pname', 'ppass', 'proxy.example')
http.proxy_address # =&gt; nil
</pre> </li>
<li> <p>Reject certain addresses and port combinations:</p> <pre class="ruby" data-language="ruby">http = Net::HTTP.new('example.com', nil, 'proxy.example', 8000, 'pname', 'ppass', 'proxy.example:1234')
http.proxy_address # =&gt; "proxy.example"

http = Net::HTTP.new('example.com', nil, 'proxy.example', 8000, 'pname', 'ppass', 'proxy.example:8000')
http.proxy_address # =&gt; nil
</pre> </li>
<li> <p>Reject a list of the types above delimited using a comma:</p> <pre class="ruby" data-language="ruby">http = Net::HTTP.new('example.com', nil, 'proxy.example', 8000, 'pname', 'ppass', 'my.proxy,proxy.example:8000')
http.proxy_address # =&gt; nil

http = Net::HTTP.new('example.com', nil, 'my.proxy', 8000, 'pname', 'ppass', 'my.proxy,proxy.example:8000')
http.proxy_address # =&gt; nil
</pre> </li>
</ul> <h2 id="label-Compression+and+Decompression">Compression and Decompression</h2> <p>Net::HTTP does not compress the body of a request before sending.</p> <p>By default, Net::HTTP adds header <code>'Accept-Encoding'</code> to a new <a href="net/httprequest.html">request object</a>:</p> <pre class="ruby" data-language="ruby">Net::HTTP::Get.new(uri)['Accept-Encoding']
# =&gt; "gzip;q=1.0,deflate;q=0.6,identity;q=0.3"
</pre> <p>This requests the server to zip-encode the response body if there is one; the server is not required to do so.</p> <p>Net::HTTP does not automatically decompress a response body if the response has header <code>'Content-Range'</code>.</p> <p>Otherwise decompression (or not) depends on the value of header <a href="https://en.wikipedia.org/wiki/List_of_HTTP_header_fields#content-encoding-response-header">Content-Encoding</a>:</p> <ul>
<li> <p><code>'deflate'</code>, <code>'gzip'</code>, or <code>'x-gzip'</code>: decompresses the body and deletes the header.</p> </li>
<li> <p><code>'none'</code> or <code>'identity'</code>: does not decompress the body, but deletes the header.</p> </li>
<li> <p>Any other value: leaves the body and header unchanged.</p> </li>
</ul> <h2 id="label-What-27s+Here">What’s Here</h2> <p>First, what’s elsewhere. <a href="class.html"><code>Class</code></a> <a href="net/http.html"><code>Net::HTTP</code></a>:</p> <ul><li> <p>Inherits from <a href="object.html#class-Object-label-What-27s+Here">class Object</a>.</p> </li></ul> <p>This is a categorized summary of methods and attributes.</p> <h3 id="label-Net-3A-3AHTTP+Objects">Net::HTTP Objects</h3> <ul>
<li> <p><a href="net/http.html#method-c-new">::new</a>: Creates a new instance.</p> </li>
<li> <p><a href="net/http.html#method-i-inspect">#inspect</a>: Returns a string representation of <code>self</code>.</p> </li>
</ul> <h3 id="label-Sessions">Sessions</h3> <ul>
<li> <p><a href="net/http.html#method-c-start">::start</a>: Begins a new session in a new Net::HTTP object.</p> </li>
<li> <p><a href="net/http.html#method-i-started-3F">#started?</a>: Returns whether in a session.</p> </li>
<li> <p><a href="net/http.html#method-i-finish">#finish</a>: Ends an active session.</p> </li>
<li> <p><a href="net/http.html#method-i-start">#start</a>: Begins a new session in an existing Net::HTTP object (<code>self</code>).</p> </li>
</ul> <h3 id="label-Connections">Connections</h3> <ul>
<li> <p><a href="net/http.html#attribute-i-continue_timeout">:continue_timeout</a>: Returns the continue timeout.</p> </li>
<li> <p><a href="net/http.html#method-i-continue_timeout-3D">#continue_timeout=</a>: Sets the continue timeout seconds.</p> </li>
<li> <p><a href="net/http.html#attribute-i-keep_alive_timeout">:keep_alive_timeout</a>: Returns the keep-alive timeout.</p> </li>
<li> <p><a href="net/http.html#attribute-i-keep_alive_timeout">:keep_alive_timeout=</a>: Sets the keep-alive timeout.</p> </li>
<li> <p><a href="net/http.html#attribute-i-max_retries">:max_retries</a>: Returns the maximum retries.</p> </li>
<li> <p><a href="net/http.html#method-i-max_retries-3D">#max_retries=</a>: Sets the maximum retries.</p> </li>
<li> <p><a href="net/http.html#attribute-i-open_timeout">:open_timeout</a>: Returns the open timeout.</p> </li>
<li> <p><a href="net/http.html#attribute-i-open_timeout">:open_timeout=</a>: Sets the open timeout.</p> </li>
<li> <p><a href="net/http.html#attribute-i-read_timeout">:read_timeout</a>: Returns the open timeout.</p> </li>
<li> <p><a href="net/http.html#method-i-read_timeout-3D">:read_timeout=</a>: Sets the read timeout.</p> </li>
<li> <p><a href="net/http.html#attribute-i-ssl_timeout">:ssl_timeout</a>: Returns the ssl timeout.</p> </li>
<li> <p><a href="net/http.html#attribute-i-ssl_timeout">:ssl_timeout=</a>: Sets the ssl timeout.</p> </li>
<li> <p><a href="net/http.html#attribute-i-write_timeout">:write_timeout</a>: Returns the write timeout.</p> </li>
<li> <p><a href="net/http.html#method-i-write_timeout-3D">write_timeout=</a>: Sets the write timeout.</p> </li>
</ul> <h3 id="label-Requests">Requests</h3> <ul>
<li> <p><a href="net/http.html#method-c-get">::get</a>: Sends a GET request and returns the string response body.</p> </li>
<li> <p><a href="net/http.html#method-c-get_print">::get_print</a>: Sends a GET request and write the string response body to $stdout.</p> </li>
<li> <p><a href="net/http.html#method-c-get_response">::get_response</a>: Sends a GET request and returns a response object.</p> </li>
<li> <p><a href="net/http.html#method-c-post_form">::post_form</a>: Sends a POST request with form data and returns a response object.</p> </li>
<li> <p><a href="net/http.html#method-c-post">::post</a>: Sends a POST request with data and returns a response object.</p> </li>
<li> <p><a href="net/http.html#method-c-put">::put</a>: Sends a PUT request with data and returns a response object.</p> </li>
<li> <p><a href="net/http.html#method-i-copy">#copy</a>: Sends a COPY request and returns a response object.</p> </li>
<li> <p><a href="net/http.html#method-i-delete">#delete</a>: Sends a DELETE request and returns a response object.</p> </li>
<li> <p><a href="net/http.html#method-i-get">#get</a>: Sends a GET request and returns a response object.</p> </li>
<li> <p><a href="net/http.html#method-i-head">#head</a>: Sends a HEAD request and returns a response object.</p> </li>
<li> <p><a href="net/http.html#method-i-lock">#lock</a>: Sends a LOCK request and returns a response object.</p> </li>
<li> <p><a href="net/http.html#method-i-mkcol">#mkcol</a>: Sends a MKCOL request and returns a response object.</p> </li>
<li> <p><a href="net/http.html#method-i-move">#move</a>: Sends a MOVE request and returns a response object.</p> </li>
<li> <p><a href="net/http.html#method-i-options">#options</a>: Sends a OPTIONS request and returns a response object.</p> </li>
<li> <p><a href="net/http.html#method-i-patch">#patch</a>: Sends a PATCH request and returns a response object.</p> </li>
<li> <p><a href="net/http.html#method-i-post">#post</a>: Sends a POST request and returns a response object.</p> </li>
<li> <p><a href="net/http.html#method-i-propfind">#propfind</a>: Sends a PROPFIND request and returns a response object.</p> </li>
<li> <p><a href="net/http.html#method-i-proppatch">#proppatch</a>: Sends a PROPPATCH request and returns a response object.</p> </li>
<li> <p><a href="net/http.html#method-i-put">#put</a>: Sends a PUT request and returns a response object.</p> </li>
<li> <p><a href="net/http.html#method-i-request">#request</a>: Sends a request and returns a response object.</p> </li>
<li> <p><a href="net/http.html#method-i-request_get">#request_get</a>: Sends a GET request and forms a response object; if a block given, calls the block with the object, otherwise returns the object.</p> </li>
<li> <p><a href="net/http.html#method-i-request_head">#request_head</a>: Sends a HEAD request and forms a response object; if a block given, calls the block with the object, otherwise returns the object.</p> </li>
<li> <p><a href="net/http.html#method-i-request_post">#request_post</a>: Sends a POST request and forms a response object; if a block given, calls the block with the object, otherwise returns the object.</p> </li>
<li> <p><a href="net/http.html#method-i-send_request">#send_request</a>: Sends a request and returns a response object.</p> </li>
<li> <p><a href="net/http.html#method-i-trace">#trace</a>: Sends a TRACE request and returns a response object.</p> </li>
<li> <p><a href="net/http.html#method-i-unlock">#unlock</a>: Sends an UNLOCK request and returns a response object.</p> </li>
</ul> <h3 id="label-Responses">Responses</h3> <ul>
<li> <p><a href="net/http.html#attribute-i-close_on_empty_response">:close_on_empty_response</a>: Returns whether to close connection on empty response.</p> </li>
<li> <p><a href="net/http.html#attribute-i-close_on_empty_response">:close_on_empty_response=</a>: Sets whether to close connection on empty response.</p> </li>
<li> <p><a href="net/http.html#attribute-i-ignore_eof">:ignore_eof</a>: Returns whether to ignore end-of-file when reading a response body with <code>Content-Length</code> headers.</p> </li>
<li> <p><a href="net/http.html#attribute-i-ignore_eof">:ignore_eof=</a>: Sets whether to ignore end-of-file when reading a response body with <code>Content-Length</code> headers.</p> </li>
<li> <p><a href="net/http.html#attribute-i-response_body_encoding">:response_body_encoding</a>: Returns the encoding to use for the response body.</p> </li>
<li> <p><a href="net/http.html#method-i-response_body_encoding-3D">#response_body_encoding=</a>: Sets the response body encoding.</p> </li>
</ul> <h3 id="label-Proxies">Proxies</h3> <ul>
<li> <p><a href="net/http.html#method-i-proxy_address">:proxy_address</a>: Returns the proxy address.</p> </li>
<li> <p><a href="net/http.html#attribute-i-proxy_address">:proxy_address=</a>: Sets the proxy address.</p> </li>
<li> <p><a href="net/http.html#method-c-proxy_class-3F">::proxy_class?</a>: Returns whether <code>self</code> is a proxy class.</p> </li>
<li> <p><a href="net/http.html#method-i-proxy-3F">#proxy?</a>: Returns whether <code>self</code> has a proxy.</p> </li>
<li> <p><a href="net/http.html#method-i-proxy_address">#proxy_address</a>: Returns the proxy address.</p> </li>
<li> <p><a href="net/http.html#method-i-proxy_from_env-3F">#proxy_from_env?</a>: Returns whether the proxy is taken from an environment variable.</p> </li>
<li> <p><a href="net/http.html#attribute-i-proxy_from_env">:proxy_from_env=</a>: Sets whether the proxy is to be taken from an environment variable.</p> </li>
<li> <p><a href="net/http.html#method-i-proxy_pass">:proxy_pass</a>: Returns the proxy password.</p> </li>
<li> <p><a href="net/http.html#attribute-i-proxy_pass">:proxy_pass=</a>: Sets the proxy password.</p> </li>
<li> <p><a href="net/http.html#method-i-proxy_port">:proxy_port</a>: Returns the proxy port.</p> </li>
<li> <p><a href="net/http.html#attribute-i-proxy_port">:proxy_port=</a>: Sets the proxy port.</p> </li>
<li> <p><a href="net/http.html#method-i-proxy_user">#proxy_user</a>: Returns the proxy user name.</p> </li>
<li> <p><a href="net/http.html#attribute-i-proxy_user">:proxy_user=</a>: Sets the proxy user.</p> </li>
</ul> <h3 id="label-Security">Security</h3> <ul>
<li> <p><a href="net/http.html#attribute-i-ca_file">:ca_file</a>: Returns the path to a CA certification file.</p> </li>
<li> <p><a href="net/http.html#attribute-i-ca_file">:ca_file=</a>: Sets the path to a CA certification file.</p> </li>
<li> <p><a href="net/http.html#attribute-i-ca_path">:ca_path</a>: Returns the path of to CA directory containing certification files.</p> </li>
<li> <p><a href="net/http.html#attribute-i-ca_path">:ca_path=</a>: Sets the path of to CA directory containing certification files.</p> </li>
<li> <p><a href="net/http.html#attribute-i-cert">:cert</a>: Returns the <a href="openssl/x509/certificate.html"><code>OpenSSL::X509::Certificate</code></a> object to be used for client certification.</p> </li>
<li> <p><a href="net/http.html#attribute-i-cert">:cert=</a>: Sets the <a href="openssl/x509/certificate.html"><code>OpenSSL::X509::Certificate</code></a> object to be used for client certification.</p> </li>
<li> <p><a href="net/http.html#attribute-i-cert_store">:cert_store</a>: Returns the X509::Store to be used for verifying peer certificate.</p> </li>
<li> <p><a href="net/http.html#attribute-i-cert_store">:cert_store=</a>: Sets the X509::Store to be used for verifying peer certificate.</p> </li>
<li> <p><a href="net/http.html#attribute-i-ciphers">:ciphers</a>: Returns the available SSL ciphers.</p> </li>
<li> <p><a href="net/http.html#attribute-i-ciphers">:ciphers=</a>: Sets the available SSL ciphers.</p> </li>
<li> <p><a href="net/http.html#attribute-i-extra_chain_cert">:extra_chain_cert</a>: Returns the extra X509 certificates to be added to the certificate chain.</p> </li>
<li> <p><a href="net/http.html#attribute-i-extra_chain_cert">:extra_chain_cert=</a>: Sets the extra X509 certificates to be added to the certificate chain.</p> </li>
<li> <p><a href="net/http.html#attribute-i-key">:key</a>: Returns the <a href="openssl/pkey/rsa.html"><code>OpenSSL::PKey::RSA</code></a> or <a href="openssl/pkey/dsa.html"><code>OpenSSL::PKey::DSA</code></a> object.</p> </li>
<li> <p><a href="net/http.html#attribute-i-key">:key=</a>: Sets the <a href="openssl/pkey/rsa.html"><code>OpenSSL::PKey::RSA</code></a> or <a href="openssl/pkey/dsa.html"><code>OpenSSL::PKey::DSA</code></a> object.</p> </li>
<li> <p><a href="net/http.html#attribute-i-max_version">:max_version</a>: Returns the maximum SSL version.</p> </li>
<li> <p><a href="net/http.html#attribute-i-max_version">:max_version=</a>: Sets the maximum SSL version.</p> </li>
<li> <p><a href="net/http.html#attribute-i-min_version">:min_version</a>: Returns the minimum SSL version.</p> </li>
<li> <p><a href="net/http.html#attribute-i-min_version">:min_version=</a>: Sets the minimum SSL version.</p> </li>
<li> <p><a href="net/http.html#method-i-peer_cert">#peer_cert</a>: Returns the X509 certificate chain for the session’s socket peer.</p> </li>
<li> <p><a href="net/http.html#attribute-i-ssl_version">:ssl_version</a>: Returns the SSL version.</p> </li>
<li> <p><a href="net/http.html#attribute-i-ssl_version">:ssl_version=</a>: Sets the SSL version.</p> </li>
<li> <p><a href="net/http.html#method-i-use_ssl-3D">#use_ssl=</a>: Sets whether a new session is to use Transport Layer Security.</p> </li>
<li> <p><a href="net/http.html#method-i-use_ssl-3F">#use_ssl?</a>: Returns whether <code>self</code> uses SSL.</p> </li>
<li> <p><a href="net/http.html#attribute-i-verify_callback">:verify_callback</a>: Returns the callback for the server certification verification.</p> </li>
<li> <p><a href="net/http.html#attribute-i-verify_callback">:verify_callback=</a>: Sets the callback for the server certification verification.</p> </li>
<li> <p><a href="net/http.html#attribute-i-verify_depth">:verify_depth</a>: Returns the maximum depth for the certificate chain verification.</p> </li>
<li> <p><a href="net/http.html#attribute-i-verify_depth">:verify_depth=</a>: Sets the maximum depth for the certificate chain verification.</p> </li>
<li> <p><a href="net/http.html#attribute-i-verify_hostname">:verify_hostname</a>: Returns the flags for server the certification verification at the beginning of the SSL/TLS session.</p> </li>
<li> <p><a href="net/http.html#attribute-i-verify_hostname">:verify_hostname=</a>: Sets he flags for server the certification verification at the beginning of the SSL/TLS session.</p> </li>
<li> <p><a href="net/http.html#attribute-i-verify_mode">:verify_mode</a>: Returns the flags for server the certification verification at the beginning of the SSL/TLS session.</p> </li>
<li> <p><a href="net/http.html#attribute-i-verify_mode">:verify_mode=</a>: Sets the flags for server the certification verification at the beginning of the SSL/TLS session.</p> </li>
</ul> <h3 id="label-Addresses+and+Ports">Addresses and Ports</h3> <ul>
<li> <p><a href="net/http.html#attribute-i-address">:address</a>: Returns the string host name or host IP.</p> </li>
<li> <p><a href="net/http.html#method-c-default_port">::default_port</a>: Returns integer 80, the default port to use for <a href="net/http.html"><code>HTTP</code></a> requests.</p> </li>
<li> <p><a href="net/http.html#method-c-http_default_port">::http_default_port</a>: Returns integer 80, the default port to use for <a href="net/http.html"><code>HTTP</code></a> requests.</p> </li>
<li> <p><a href="net/http.html#method-c-https_default_port">::https_default_port</a>: Returns integer 443, the default port to use for HTTPS requests.</p> </li>
<li> <p><a href="net/http.html#method-i-ipaddr">#ipaddr</a>: Returns the IP address for the connection.</p> </li>
<li> <p><a href="net/http.html#method-i-ipaddr-3D">#ipaddr=</a>: Sets the IP address for the connection.</p> </li>
<li> <p><a href="net/http.html#attribute-i-local_host">:local_host</a>: Returns the string local host used to establish the connection.</p> </li>
<li> <p><a href="net/http.html#attribute-i-local_host">:local_host=</a>: Sets the string local host used to establish the connection.</p> </li>
<li> <p><a href="net/http.html#attribute-i-local_port">:local_port</a>: Returns the integer local port used to establish the connection.</p> </li>
<li> <p><a href="net/http.html#attribute-i-local_port">:local_port=</a>: Sets the integer local port used to establish the connection.</p> </li>
<li> <p><a href="net/http.html#attribute-i-port">:port</a>: Returns the integer port number.</p> </li>
</ul> <h3 id="label-HTTP+Version">HTTP Version</h3> <ul><li> <p><a href="net/http.html#method-c-version_1_2-3F">::version_1_2?</a> (aliased as <a href="net/http.html#method-c-version_1_2">::version_1_2</a>): Returns true; retained for compatibility.</p> </li></ul> <h3 id="label-Debugging">Debugging</h3> <ul><li> <p><a href="net/http.html#method-i-set_debug_output">#set_debug_output</a>: Sets the output stream for debugging.</p> </li></ul> </dd>
</dl> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    Ruby Core &copy; 1993&ndash;2024 Yukihiro Matsumoto<br>Licensed under the Ruby License.<br>Ruby Standard Library &copy; contributors<br>Licensed under their own licenses.<br>
    
  </p>
</div>
