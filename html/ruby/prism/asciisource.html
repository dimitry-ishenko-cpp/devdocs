<h1 id="class-Prism::ASCIISource" class="anchor-link class"> class Prism::ASCIISource </h1>
<dl class="meta">
<dt>Parent:</dt>
<dd class="meta-parent"><a href="source.html">Prism::Source</a></dd>
</dl> <section class="description"> <p>Specialized version of <a href="source.html"><code>Prism::Source</code></a> for source code that includes ASCII characters only. This class is used to apply performance optimizations that cannot be applied to sources that include multibyte characters.</p> <p>In the extremely rare case that a source includes multi-byte characters but is marked as binary because of a magic encoding comment and it cannot be eagerly converted to UTF-8, this class will be used as well. This is because at that point we will treat everything as single-byte characters.</p> </section> <section id="5Buntitled-5D" class="documentation-section anchor-link"> <section id="public-instance-5Buntitled-5D-method-details" class="method-section anchor-link"> <header> <h3>Public Instance Methods</h3> </header> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-character_column"> <a href="#method-i-character_column" title="Link to this method"> <span class="method-name">character_column</span> <span class="method-args">(byte_offset)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="character_column-source"> <pre class="ruby" data-language="ruby"># File lib/prism/parse_result.rb, line 243
def character_column(byte_offset)
  byte_offset - line_start(byte_offset)
end</pre> </div>  <p>Return the column number in characters for the given byte offset.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-character_offset"> <a href="#method-i-character_offset" title="Link to this method"> <span class="method-name">character_offset</span> <span class="method-args">(byte_offset)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="character_offset-source"> <pre class="ruby" data-language="ruby"># File lib/prism/parse_result.rb, line 238
def character_offset(byte_offset)
  byte_offset
end</pre> </div>  <p>Return the character offset for the given byte offset.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-code_units_cache"> <a href="#method-i-code_units_cache" title="Link to this method"> <span class="method-name">code_units_cache</span> <span class="method-args">(encoding)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="code_units_cache-source"> <pre class="ruby" data-language="ruby"># File lib/prism/parse_result.rb, line 260
def code_units_cache(encoding)
  -&gt;(byte_offset) { byte_offset }
end</pre> </div>  <p>Returns a cache that is the identity function in order to maintain the same interface. We can do this because code units are always equivalent to byte offsets for ASCII-only sources.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-code_units_column"> <a href="#method-i-code_units_column" title="Link to this method"> <span class="method-name">code_units_column</span> <span class="method-args">(byte_offset, encoding)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="code_units_column-source"> <pre class="ruby" data-language="ruby"># File lib/prism/parse_result.rb, line 267
def code_units_column(byte_offset, encoding)
  byte_offset - line_start(byte_offset)
end</pre> </div>  <p>Specialized version of â€˜code_units_column` that does not depend on `code_units_offset`, which is a more expensive operation. This is essentially the same as `Prism::Source#column`.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-code_units_offset"> <a href="#method-i-code_units_offset" title="Link to this method"> <span class="method-name">code_units_offset</span> <span class="method-args">(byte_offset, encoding)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="code_units_offset-source"> <pre class="ruby" data-language="ruby"># File lib/prism/parse_result.rb, line 253
def code_units_offset(byte_offset, encoding)
  byte_offset
end</pre> </div>  <p>Returns the offset from the start of the file for the given byte offset counting in code units for the given encoding.</p> <p>This method is tested with UTF-8, UTF-16, and UTF-32. If there is the concept of code units that differs from the number of characters in other encodings, it is not captured here.</p> </div> </div> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    Ruby Core &copy; 1993&ndash;2024 Yukihiro Matsumoto<br>Licensed under the Ruby License.<br>Ruby Standard Library &copy; contributors<br>Licensed under their own licenses.<br>
    
  </p>
</div>
