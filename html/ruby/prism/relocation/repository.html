<h1 id="class-Prism::Relocation::Repository" class="anchor-link class"> class Prism::Relocation::Repository </h1>
<dl class="meta">
<dt>Parent:</dt>
<dd class="meta-parent"><a href="../../object.html">Object</a></dd>
</dl> <section class="description"> <p>A repository is a configured collection of fields and a set of entries that knows how to reparse a source and reify the values.</p> </section> <section id="5Buntitled-5D" class="documentation-section anchor-link"> <section class="attribute-method-details"> <header> <h3>Attributes</h3> </header> <div class="method-detail anchor-link"> <div class="method-heading attribute-method-heading" id="attribute-i-entries"> <a href="#attribute-i-entries" title="Link to this attribute"> <span class="method-name">entries</span> <span class="attribute-access-type">[R]</span> </a> </div> <div class="method-description"> <p>The entries that have been saved on this repository.</p> </div> </div> <div class="method-detail anchor-link"> <div class="method-heading attribute-method-heading" id="attribute-i-fields"> <a href="#attribute-i-fields" title="Link to this attribute"> <span class="method-name">fields</span> <span class="attribute-access-type">[R]</span> </a> </div> <div class="method-description"> <p>The fields that have been configured on this repository.</p> </div> </div> <div class="method-detail anchor-link"> <div class="method-heading attribute-method-heading" id="attribute-i-source"> <a href="#attribute-i-source" title="Link to this attribute"> <span class="method-name">source</span> <span class="attribute-access-type">[R]</span> </a> </div> <div class="method-description"> <p>The source associated with this repository. This will be either a <a href="sourcefilepath.html"><code>SourceFilepath</code></a> (the most common use case) or a <a href="sourcestring.html"><code>SourceString</code></a>.</p> </div> </div> </section> <section id="public-class-5Buntitled-5D-method-details" class="method-section anchor-link"> <header> <h3>Public Class Methods</h3> </header> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-c-new"> <a href="#method-c-new" title="Link to this method"> <span class="method-name">new</span> <span class="method-args">(source)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="new-source"> <pre class="ruby" data-language="ruby"># File lib/prism/relocation.rb, line 369
def initialize(source)
  @source = source
  @fields = {}
  @entries = Hash.new { |hash, node_id| hash[node_id] = {} }
end</pre> </div>  <p>Initialize a new repository with the given source.</p> </div> </div> </section> <section id="public-instance-5Buntitled-5D-method-details" class="method-section anchor-link"> <header> <h3>Public Instance Methods</h3> </header> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-character_columns"> <a href="#method-i-character_columns" title="Link to this method"> <span class="method-name">character_columns</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="character_columns-source"> <pre class="ruby" data-language="ruby"># File lib/prism/relocation.rb, line 415
def character_columns
  field(:character_columns, CharacterColumnsField.new)
end</pre> </div>  <p>Configure the character columns field for this repository and return self.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-character_offsets"> <a href="#method-i-character_offsets" title="Link to this method"> <span class="method-name">character_offsets</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="character_offsets-source"> <pre class="ruby" data-language="ruby"># File lib/prism/relocation.rb, line 398
def character_offsets
  field(:character_offsets, CharacterOffsetsField.new)
end</pre> </div>  <p>Configure the character offsets field for this repository and return self.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-code_unit_columns"> <a href="#method-i-code_unit_columns" title="Link to this method"> <span class="method-name">code_unit_columns</span> <span class="method-args">(encoding)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="code_unit_columns-source"> <pre class="ruby" data-language="ruby"># File lib/prism/relocation.rb, line 421
def code_unit_columns(encoding)
  field(:code_unit_columns, CodeUnitColumnsField.new(self, encoding))
end</pre> </div>  <p>Configure the code unit columns field for this repository for a specific encoding and return self.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-code_unit_offsets"> <a href="#method-i-code_unit_offsets" title="Link to this method"> <span class="method-name">code_unit_offsets</span> <span class="method-args">(encoding)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="code_unit_offsets-source"> <pre class="ruby" data-language="ruby"># File lib/prism/relocation.rb, line 404
def code_unit_offsets(encoding)
  field(:code_unit_offsets, CodeUnitOffsetsField.new(self, encoding))
end</pre> </div>  <p>Configure the code unit offsets field for this repository for a specific encoding and return self.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-code_units_cache"> <a href="#method-i-code_units_cache" title="Link to this method"> <span class="method-name">code_units_cache</span> <span class="method-args">(encoding)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="code_units_cache-source"> <pre class="ruby" data-language="ruby"># File lib/prism/relocation.rb, line 376
def code_units_cache(encoding)
  source.code_units_cache(encoding)
end</pre> </div>  <p>Create a code units cache for the given encoding from the source.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-columns"> <a href="#method-i-columns" title="Link to this method"> <span class="method-name">columns</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="columns-source"> <pre class="ruby" data-language="ruby"># File lib/prism/relocation.rb, line 409
def columns
  field(:columns, ColumnsField.new)
end</pre> </div>  <p>Configure the columns field for this repository and return self.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-comments"> <a href="#method-i-comments" title="Link to this method"> <span class="method-name">comments</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="comments-source"> <pre class="ruby" data-language="ruby"># File lib/prism/relocation.rb, line 439
def comments
  leading_comments.trailing_comments
end</pre> </div>  <p>Configure both the leading and trailing comment fields for this repository and return self.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-filepath"> <a href="#method-i-filepath" title="Link to this method"> <span class="method-name">filepath</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="filepath-source"> <pre class="ruby" data-language="ruby"># File lib/prism/relocation.rb, line 381
def filepath
  raise ConfigurationError, "Can only specify filepath for a filepath source" unless source.is_a?(SourceFilepath)
  field(:filepath, FilepathField.new(source.value))
end</pre> </div>  <p>Configure the filepath field for this repository and return self.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-leading_comments"> <a href="#method-i-leading_comments" title="Link to this method"> <span class="method-name">leading_comments</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="leading_comments-source"> <pre class="ruby" data-language="ruby"># File lib/prism/relocation.rb, line 427
def leading_comments
  field(:leading_comments, LeadingCommentsField.new)
end</pre> </div>  <p>Configure the leading comments field for this repository and return self.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-lines"> <a href="#method-i-lines" title="Link to this method"> <span class="method-name">lines</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="lines-source"> <pre class="ruby" data-language="ruby"># File lib/prism/relocation.rb, line 387
def lines
  field(:lines, LinesField.new)
end</pre> </div>  <p>Configure the lines field for this repository and return self.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-offsets"> <a href="#method-i-offsets" title="Link to this method"> <span class="method-name">offsets</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="offsets-source"> <pre class="ruby" data-language="ruby"># File lib/prism/relocation.rb, line 392
def offsets
  field(:offsets, OffsetsField.new)
end</pre> </div>  <p>Configure the offsets field for this repository and return self.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-trailing_comments"> <a href="#method-i-trailing_comments" title="Link to this method"> <span class="method-name">trailing_comments</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="trailing_comments-source"> <pre class="ruby" data-language="ruby"># File lib/prism/relocation.rb, line 433
def trailing_comments
  field(:trailing_comments, TrailingCommentsField.new)
end</pre> </div>  <p>Configure the trailing comments field for this repository and return self.</p> </div> </div> </section> <section id="private-instance-5Buntitled-5D-method-details" class="method-section anchor-link"> <header> <h3>Private Instance Methods</h3> </header> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-field"> <a href="#method-i-field" title="Link to this method"> <span class="method-name">field</span> <span class="method-args">(name, value)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="field-source"> <pre class="ruby" data-language="ruby"># File lib/prism/relocation.rb, line 487
def field(name, value)
  raise ConfigurationError, "Cannot specify multiple #{name} fields" if @fields.key?(name)
  @fields[name] = value
  self
end</pre> </div>  <p>Append the given field to the repository and return the repository so that these calls can be chained.</p> </div> </div> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    Ruby Core &copy; 1993&ndash;2024 Yukihiro Matsumoto<br>Licensed under the Ruby License.<br>Ruby Standard Library &copy; contributors<br>Licensed under their own licenses.<br>
    
  </p>
</div>
