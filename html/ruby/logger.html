<h1 id="class-Logger" class="anchor-link class"> class Logger </h1>
<dl class="meta">
<dt>Parent:</dt>
<dd class="meta-parent"><a href="object.html">Object</a></dd>
<dt>Included modules:</dt>
<dd class="meta-includes"><a class="include" href="logger/severity.html">Logger::Severity</a></dd>
</dl> <section class="description"> <p>Class Logger provides a simple but sophisticated logging utility that you can use to create one or more <a href="https://en.wikipedia.org/wiki/Logging_(software)#Event_logs">event logs</a> for your program. Each such log contains a chronological sequence of entries that provides a record of the program’s activities.</p> <h2 id="class-Logger-label-About+the+Examples">About the Examples</h2> <p>All examples on this page assume that Logger has been required:</p> <pre class="ruby" data-language="ruby">require 'logger'
</pre> <h2 id="class-Logger-label-Synopsis">Synopsis</h2> <p>Create a log with <a href="logger.html#method-c-new"><code>Logger.new</code></a>:</p> <pre class="ruby" data-language="ruby"># Single log file.
logger = Logger.new('t.log')
# Size-based rotated logging: 3 10-megabyte files.
logger = Logger.new('t.log', 3, 10485760)
# Period-based rotated logging: daily (also allowed: 'weekly', 'monthly').
logger = Logger.new('t.log', 'daily')
# Log to an IO stream.
logger = Logger.new($stdout)
</pre> <p>Add entries (level, message) with <a href="logger.html#method-i-add"><code>Logger#add</code></a>:</p> <pre class="ruby" data-language="ruby">logger.add(Logger::DEBUG, 'Maximal debugging info')
logger.add(Logger::INFO, 'Non-error information')
logger.add(Logger::WARN, 'Non-error warning')
logger.add(Logger::ERROR, 'Non-fatal error')
logger.add(Logger::FATAL, 'Fatal error')
logger.add(Logger::UNKNOWN, 'Most severe')
</pre> <p>Close the log with <a href="logger.html#method-i-close"><code>Logger#close</code></a>:</p> <pre class="ruby" data-language="ruby">logger.close
</pre> <h2 id="class-Logger-label-Entries">Entries</h2> <p>You can add entries with method <a href="logger.html#method-i-add"><code>Logger#add</code></a>:</p> <pre class="ruby" data-language="ruby">logger.add(Logger::DEBUG, 'Maximal debugging info')
logger.add(Logger::INFO, 'Non-error information')
logger.add(Logger::WARN, 'Non-error warning')
logger.add(Logger::ERROR, 'Non-fatal error')
logger.add(Logger::FATAL, 'Fatal error')
logger.add(Logger::UNKNOWN, 'Most severe')
</pre> <p>These shorthand methods also add entries:</p> <pre class="ruby" data-language="ruby">logger.debug('Maximal debugging info')
logger.info('Non-error information')
logger.warn('Non-error warning')
logger.error('Non-fatal error')
logger.fatal('Fatal error')
logger.unknown('Most severe')
</pre> <p>When you call any of these methods, the entry may or may not be written to the log, depending on the entry’s severity and on the log level; see <a href="logger.html#class-Logger-label-Log+Level">Log Level</a></p> <p>An entry always has:</p> <ul>
<li> <p>A severity (the required argument to <a href="logger.html#method-i-add"><code>add</code></a>).</p> </li>
<li> <p>An automatically created timestamp.</p> </li>
</ul> <p>And may also have:</p> <ul>
<li> <p>A message.</p> </li>
<li> <p>A program name.</p> </li>
</ul> <p>Example:</p> <pre class="ruby" data-language="ruby">logger = Logger.new($stdout)
logger.add(Logger::INFO, 'My message.', 'mung')
# =&gt; I, [2022-05-07T17:21:46.536234 #20536]  INFO -- mung: My message.
</pre> <p>The default format for an entry is:</p> <pre class="ruby" data-language="ruby">"%s, [%s #%d] %5s -- %s: %s\n"
</pre> <p>where the values to be formatted are:</p> <ul>
<li> <p>Severity (one letter).</p> </li>
<li> <p>Timestamp.</p> </li>
<li> <p><a href="process.html"><code>Process</code></a> id.</p> </li>
<li> <p>Severity (word).</p> </li>
<li> <p>Program name.</p> </li>
<li> <p>Message.</p> </li>
</ul> <p>You can use a different entry format by:</p> <ul>
<li> <p>Setting a custom format proc (affects following entries); see <a href="logger.html#attribute-i-formatter">formatter=</a>.</p> </li>
<li> <p>Calling any of the methods above with a block (affects only the one entry). Doing so can have two benefits:</p> <ul>
<li> <p>Context: the block can evaluate the entire program context and create a context-dependent message.</p> </li>
<li> <p>Performance: the block is not evaluated unless the log level permits the entry actually to be written:</p> <pre class="ruby" data-language="ruby">logger.error { my_slow_message_generator }
</pre> <p>Contrast this with the string form, where the string is always evaluated, regardless of the log level:</p> <pre class="ruby" data-language="ruby">logger.error("#{my_slow_message_generator}")
</pre> </li>
</ul> </li>
</ul> <h3 id="class-Logger-label-Severity">Severity</h3> <p>The severity of a log entry has two effects:</p> <ul>
<li> <p>Determines whether the entry is selected for inclusion in the log; see <a href="logger.html#class-Logger-label-Log+Level">Log Level</a>.</p> </li>
<li> <p>Indicates to any log reader (whether a person or a program) the relative importance of the entry.</p> </li>
</ul> <h3 id="class-Logger-label-Timestamp">Timestamp</h3> <p>The timestamp for a log entry is generated automatically when the entry is created.</p> <p>The logged timestamp is formatted by method <a href="time.html#method-i-strftime"><code>Time#strftime</code></a> using this format string:</p> <pre class="ruby" data-language="ruby">'%Y-%m-%dT%H:%M:%S.%6N'
</pre> <p>Example:</p> <pre class="ruby" data-language="ruby">logger = Logger.new($stdout)
logger.add(Logger::INFO)
# =&gt; I, [2022-05-07T17:04:32.318331 #20536]  INFO -- : nil
</pre> <p>You can set a different format using method <a href="logger.html#method-i-datetime_format-3D"><code>datetime_format=</code></a>.</p> <h3 id="class-Logger-label-Message">Message</h3> <p>The message is an optional argument to an entry method:</p> <pre class="ruby" data-language="ruby">logger = Logger.new($stdout)
logger.add(Logger::INFO, 'My message')
# =&gt; I, [2022-05-07T18:15:37.647581 #20536]  INFO -- : My message
</pre> <p>For the default entry formatter, <a href="logger/formatter.html"><code>Logger::Formatter</code></a>, the message object may be:</p> <ul>
<li> <p>A string: used as-is.</p> </li>
<li> <p>An Exception: <code>message.message</code> is used.</p> </li>
<li> <p>Anything else: <code>message.inspect</code> is used.</p> </li>
</ul> <p><strong>Note</strong>: <a href="logger/formatter.html"><code>Logger::Formatter</code></a> does not escape or sanitize the message passed to it. Developers should be aware that malicious data (user input) may be in the message, and should explicitly escape untrusted data.</p> <p>You can use a custom formatter to escape message data; see the example at <a href="logger.html#attribute-i-formatter">formatter=</a>.</p> <h3 id="class-Logger-label-Program+Name">Program Name</h3> <p>The program name is an optional argument to an entry method:</p> <pre class="ruby" data-language="ruby">logger = Logger.new($stdout)
logger.add(Logger::INFO, 'My message', 'mung')
# =&gt; I, [2022-05-07T18:17:38.084716 #20536]  INFO -- mung: My message
</pre> <p>The default program name for a new logger may be set in the call to <a href="logger.html#method-c-new"><code>Logger.new</code></a> via optional keyword argument <code>progname</code>:</p> <pre class="ruby" data-language="ruby">logger = Logger.new('t.log', progname: 'mung')
</pre> <p>The default program name for an existing logger may be set by a call to method <a href="logger.html#attribute-i-progname"><code>progname=</code></a>:</p> <pre class="ruby" data-language="ruby">logger.progname = 'mung'
</pre> <p>The current program name may be retrieved with method <a href="logger.html#attribute-i-progname">progname</a>:</p> <pre class="ruby" data-language="ruby">logger.progname # =&gt; "mung"
</pre> <h2 id="class-Logger-label-Log+Level">Log Level</h2> <p>The log level setting determines whether an entry is actually written to the log, based on the entry’s severity.</p> <p>These are the defined severities (least severe to most severe):</p> <pre class="ruby" data-language="ruby">logger = Logger.new($stdout)
logger.add(Logger::DEBUG, 'Maximal debugging info')
# =&gt; D, [2022-05-07T17:57:41.776220 #20536] DEBUG -- : Maximal debugging info
logger.add(Logger::INFO, 'Non-error information')
# =&gt; I, [2022-05-07T17:59:14.349167 #20536]  INFO -- : Non-error information
logger.add(Logger::WARN, 'Non-error warning')
# =&gt; W, [2022-05-07T18:00:45.337538 #20536]  WARN -- : Non-error warning
logger.add(Logger::ERROR, 'Non-fatal error')
# =&gt; E, [2022-05-07T18:02:41.592912 #20536] ERROR -- : Non-fatal error
logger.add(Logger::FATAL, 'Fatal error')
# =&gt; F, [2022-05-07T18:05:24.703931 #20536] FATAL -- : Fatal error
logger.add(Logger::UNKNOWN, 'Most severe')
# =&gt; A, [2022-05-07T18:07:54.657491 #20536]   ANY -- : Most severe
</pre> <p>The default initial level setting is Logger::DEBUG, the lowest level, which means that all entries are to be written, regardless of severity:</p> <pre class="ruby" data-language="ruby">logger = Logger.new($stdout)
logger.level # =&gt; 0
logger.add(0, "My message")
# =&gt; D, [2022-05-11T15:10:59.773668 #20536] DEBUG -- : My message
</pre> <p>You can specify a different setting in a new logger using keyword argument <code>level</code> with an appropriate value:</p> <pre class="ruby" data-language="ruby">logger = Logger.new($stdout, level: Logger::ERROR)
logger = Logger.new($stdout, level: 'error')
logger = Logger.new($stdout, level: :error)
logger.level # =&gt; 3
</pre> <p>With this level, entries with severity Logger::ERROR and higher are written, while those with lower severities are not written:</p> <pre class="ruby" data-language="ruby">logger = Logger.new($stdout, level: Logger::ERROR)
logger.add(3)
# =&gt; E, [2022-05-11T15:17:20.933362 #20536] ERROR -- : nil
logger.add(2) # Silent.
</pre> <p>You can set the log level for an existing logger with method <a href="logger.html#method-i-level-3D"><code>level=</code></a>:</p> <pre class="ruby" data-language="ruby">logger.level = Logger::ERROR
</pre> <p>These shorthand methods also set the level:</p> <pre class="ruby" data-language="ruby">logger.debug! # =&gt; 0
logger.info!  # =&gt; 1
logger.warn!  # =&gt; 2
logger.error! # =&gt; 3
logger.fatal! # =&gt; 4
</pre> <p>You can retrieve the log level with method <a href="logger.html#method-i-level"><code>level</code></a>.</p> <pre class="ruby" data-language="ruby">logger.level = Logger::ERROR
logger.level # =&gt; 3
</pre> <p>These methods return whether a given level is to be written:</p> <pre class="ruby" data-language="ruby">logger.level = Logger::ERROR
logger.debug? # =&gt; false
logger.info?  # =&gt; false
logger.warn?  # =&gt; false
logger.error? # =&gt; true
logger.fatal? # =&gt; true
</pre> <h2 id="class-Logger-label-Log+File+Rotation">Log <a href="file.html"><code>File</code></a> Rotation</h2> <p>By default, a log file is a single file that grows indefinitely (until explicitly closed); there is no file rotation.</p> <p>To keep log files to a manageable size, you can use <em>log</em> <em>file</em> <em>rotation</em>, which uses multiple log files:</p> <ul>
<li> <p>Each log file has entries for a non-overlapping time interval.</p> </li>
<li> <p>Only the most recent log file is open and active; the others are closed and inactive.</p> </li>
</ul> <h3 id="class-Logger-label-Size-Based+Rotation">Size-Based Rotation</h3> <p>For size-based log file rotation, call <a href="logger.html#method-c-new"><code>Logger.new</code></a> with:</p> <ul>
<li> <p>Argument <code>logdev</code> as a file path.</p> </li>
<li> <p>Argument <code>shift_age</code> with a positive integer: the number of log files to be in the rotation.</p> </li>
<li> <p>Argument <code>shift_size</code> as a positive integer: the maximum size (in bytes) of each log file; defaults to 1048576 (1 megabyte).</p> </li>
</ul> <p>Examples:</p> <pre class="ruby" data-language="ruby">logger = Logger.new('t.log', 3)           # Three 1-megabyte files.
logger = Logger.new('t.log', 5, 10485760) # Five 10-megabyte files.
</pre> <p>For these examples, suppose:</p> <pre class="ruby" data-language="ruby">logger = Logger.new('t.log', 3)
</pre> <p>Logging begins in the new log file, <code>t.log</code>; the log file is “full” and ready for rotation when a new entry would cause its size to exceed <code>shift_size</code>.</p> <p>The first time <code>t.log</code> is full:</p> <ul>
<li> <p><code>t.log</code> is closed and renamed to <code>t.log.0</code>.</p> </li>
<li> <p>A new file <code>t.log</code> is opened.</p> </li>
</ul> <p>The second time <code>t.log</code> is full:</p> <ul>
<li> <p>+t.log.0 is renamed as <code>t.log.1</code>.</p> </li>
<li> <p><code>t.log</code> is closed and renamed to <code>t.log.0</code>.</p> </li>
<li> <p>A new file <code>t.log</code> is opened.</p> </li>
</ul> <p>Each subsequent time that <code>t.log</code> is full, the log files are rotated:</p> <ul>
<li> <p><code>t.log.1</code> is removed.</p> </li>
<li> <p>+t.log.0 is renamed as <code>t.log.1</code>.</p> </li>
<li> <p><code>t.log</code> is closed and renamed to <code>t.log.0</code>.</p> </li>
<li> <p>A new file <code>t.log</code> is opened.</p> </li>
</ul> <h3 id="class-Logger-label-Periodic+Rotation">Periodic Rotation</h3> <p>For periodic rotation, call <a href="logger.html#method-c-new"><code>Logger.new</code></a> with:</p> <ul>
<li> <p>Argument <code>logdev</code> as a file path.</p> </li>
<li> <p>Argument <code>shift_age</code> as a string period indicator.</p> </li>
</ul> <p>Examples:</p> <pre class="ruby" data-language="ruby">logger = Logger.new('t.log', 'daily')   # Rotate log files daily.
logger = Logger.new('t.log', 'weekly')  # Rotate log files weekly.
logger = Logger.new('t.log', 'monthly') # Rotate log files monthly.
</pre> <p>Example:</p> <pre class="ruby" data-language="ruby">logger = Logger.new('t.log', 'daily')
</pre> <p>When the given period expires:</p> <ul>
<li> <p>The base log file, <code>t.log</code> is closed and renamed with a date-based suffix such as <code>t.log.20220509</code>.</p> </li>
<li> <p>A new log file <code>t.log</code> is opened.</p> </li>
<li> <p>Nothing is removed.</p> </li>
</ul> <p>The default format for the suffix is <code>'%Y%m%d'</code>, which produces a suffix similar to the one above. You can set a different format using create-time option <code>shift_period_suffix</code>; see details and suggestions at <a href="time.html#method-i-strftime"><code>Time#strftime</code></a>.</p> </section> <section id="5Buntitled-5D" class="documentation-section anchor-link"> <section class="constants-list"> <header> <h3>Constants</h3> </header> <dl> <dt id="ProgName">ProgName </dt>

<dt id="SEV_LABEL">SEV_LABEL </dt>
<dd> <p>Severity label for logging (max 5 chars).</p> </dd>
<dt id="VERSION">VERSION </dt>

</dl> </section> <section class="attribute-method-details"> <header> <h3>Attributes</h3> </header> <div class="method-detail anchor-link"> <div class="method-heading attribute-method-heading" id="attribute-i-formatter"> <a href="#attribute-i-formatter" title="Link to this attribute"> <span class="method-name">formatter</span> <span class="attribute-access-type">[RW]</span> </a> </div> <div class="method-description"> <p>Sets or retrieves the logger entry formatter proc.</p> <p>When <code>formatter</code> is <code>nil</code>, the logger uses <a href="logger/formatter.html"><code>Logger::Formatter</code></a>.</p> <p>When <code>formatter</code> is a proc, a new entry is formatted by the proc, which is called with four arguments:</p> <ul>
<li> <p><code>severity</code>: The severity of the entry.</p> </li>
<li> <p><code>time</code>: A <a href="time.html"><code>Time</code></a> object representing the entry’s timestamp.</p> </li>
<li> <p><code>progname</code>: The program name for the entry.</p> </li>
<li> <p><code>msg</code>: The message for the entry (string or string-convertible object).</p> </li>
</ul> <p>The proc should return a string containing the formatted entry.</p> <p>This custom formatter uses <a href="string.html#method-i-dump"><code>String#dump</code></a> to escape the message string:</p> <pre class="ruby" data-language="ruby">logger = Logger.new($stdout, progname: 'mung')
original_formatter = logger.formatter || Logger::Formatter.new
logger.formatter = proc { |severity, time, progname, msg|
  original_formatter.call(severity, time, progname, msg.dump)
}
logger.add(Logger::INFO, "hello \n ''")
logger.add(Logger::INFO, "\f\x00\xff\\\"")
</pre> <p>Output:</p> <pre>I, [2022-05-13T13:16:29.637488 #8492]  INFO -- mung: "hello \n ''"
I, [2022-05-13T13:16:29.637610 #8492]  INFO -- mung: "\f\x00\xFF\\\""</pre> </div> </div> <div class="method-detail anchor-link"> <div class="method-heading attribute-method-heading" id="attribute-i-progname"> <a href="#attribute-i-progname" title="Link to this attribute"> <span class="method-name">progname</span> <span class="attribute-access-type">[RW]</span> </a> </div> <div class="method-description"> <p>Program name to include in log messages.</p> </div> </div> </section> <section id="public-class-5Buntitled-5D-method-details" class="method-section anchor-link"> <header> <h3>Public Class Methods</h3> </header> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-c-new"> <a href="#method-c-new" title="Link to this method"> <span class="method-callseq"> new(logdev, shift_age = 0, shift_size = 1048576, **options) </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="new-source"> <pre class="ruby" data-language="ruby"># File lib/logger.rb, line 581
def initialize(logdev, shift_age = 0, shift_size = 1048576, level: DEBUG,
               progname: nil, formatter: nil, datetime_format: nil,
               binmode: false, shift_period_suffix: '%Y%m%d',
               reraise_write_errors: [])
  self.level = level
  self.progname = progname
  @default_formatter = Formatter.new
  self.datetime_format = datetime_format
  self.formatter = formatter
  @logdev = nil
  @level_override = {}
  if logdev &amp;&amp; logdev != File::NULL
    @logdev = LogDevice.new(logdev, shift_age: shift_age,
      shift_size: shift_size,
      shift_period_suffix: shift_period_suffix,
      binmode: binmode,
      reraise_write_errors: reraise_write_errors)
  end
end</pre> </div>  <p>With the single argument <code>logdev</code>, returns a new logger with all default options:</p> <pre class="ruby" data-language="ruby">Logger.new('t.log') # =&gt; #&lt;Logger:0x000001e685dc6ac8&gt;
</pre> <p>Argument <code>logdev</code> must be one of:</p> <ul>
<li> <p>A string filepath: entries are to be written to the file at that path; if the file at that path exists, new entries are appended.</p> </li>
<li> <p>An <a href="io.html"><code>IO</code></a> stream (typically +$stdout+, +$stderr+. or an open file): entries are to be written to the given stream.</p> </li>
<li> <p><code>nil</code> or <code>File::NULL</code>: no entries are to be written.</p> </li>
</ul> <p>Examples:</p> <pre class="ruby" data-language="ruby">Logger.new('t.log')
Logger.new($stdout)
</pre> <p>The keyword options are:</p> <ul>
<li> <p><code>level</code>: sets the log level; default value is Logger::DEBUG. See <a href="logger.html#class-Logger-label-Log+Level">Log Level</a>:</p> <pre class="ruby" data-language="ruby">Logger.new('t.log', level: Logger::ERROR)
</pre> </li>
<li> <p><code>progname</code>: sets the default program name; default is <code>nil</code>. See <a href="logger.html#class-Logger-label-Program+Name">Program Name</a>:</p> <pre class="ruby" data-language="ruby">Logger.new('t.log', progname: 'mung')
</pre> </li>
<li> <p><code>formatter</code>: sets the entry formatter; default is <code>nil</code>. See <a href="logger.html#attribute-i-formatter">formatter=</a>.</p> </li>
<li> <p><a href="logger.html#method-i-datetime_format"><code>datetime_format</code></a>: sets the format for entry timestamp; default is <code>nil</code>. See <a href="logger.html#method-i-datetime_format-3D"><code>datetime_format=</code></a>.</p> </li>
<li> <p><code>binmode</code>: sets whether the logger writes in binary mode; default is <code>false</code>.</p> </li>
<li> <p><code>shift_period_suffix</code>: sets the format for the filename suffix for periodic log file rotation; default is <code>'%Y%m%d'</code>. See <a href="logger.html#class-Logger-label-Periodic+Rotation">Periodic Rotation</a>.</p> </li>
<li> <p><code>reraise_write_errors</code>: An array of exception classes, which will be reraised if there is an error when writing to the log device. The default is to swallow all exceptions raised.</p> </li>
</ul> </div> </div> </section> <section id="public-instance-5Buntitled-5D-method-details" class="method-section anchor-link"> <header> <h3>Public Instance Methods</h3> </header> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-3C-3C"> <a href="#method-i-3C-3C" title="Link to this method"> <span class="method-name">&lt;&lt;</span> <span class="method-args">(msg)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="3C-3C-source"> <pre class="ruby" data-language="ruby"># File lib/logger.rb, line 689
def &lt;&lt;(msg)
  @logdev&amp;.write(msg)
end</pre> </div>  <p>Writes the given <code>msg</code> to the log with no formatting; returns the number of characters written, or <code>nil</code> if no log device exists:</p> <pre class="ruby" data-language="ruby">logger = Logger.new($stdout)
logger &lt;&lt; 'My message.' # =&gt; 10
</pre> <p>Output:</p> <pre>My message.</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-add"> <a href="#method-i-add" title="Link to this method"> <span class="method-name">add</span> <span class="method-args">(severity, message = nil, progname = nil) { || ... }</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="add-source"> <pre class="ruby" data-language="ruby"># File lib/logger.rb, line 656
def add(severity, message = nil, progname = nil)
  severity ||= UNKNOWN
  if @logdev.nil? or severity &lt; level
    return true
  end
  if progname.nil?
    progname = @progname
  end
  if message.nil?
    if block_given?
      message = yield
    else
      message = progname
      progname = @progname
    end
  end
  @logdev.write(
    format_message(format_severity(severity), Time.now, progname, message))
  true
end</pre> </div>  <p>Creates a log entry, which may or may not be written to the log, depending on the entry’s severity and on the log level. See <a href="logger.html#class-Logger-label-Log+Level">Log Level</a> and <a href="logger.html#class-Logger-label-Entries">Entries</a> for details.</p> <p>Examples:</p> <pre class="ruby" data-language="ruby">logger = Logger.new($stdout, progname: 'mung')
logger.add(Logger::INFO)
logger.add(Logger::ERROR, 'No good')
logger.add(Logger::ERROR, 'No good', 'gnum')
</pre> <p>Output:</p> <pre>I, [2022-05-12T16:25:31.469726 #36328]  INFO -- mung: mung
E, [2022-05-12T16:25:55.349414 #36328] ERROR -- mung: No good
E, [2022-05-12T16:26:35.841134 #36328] ERROR -- gnum: No good</pre> <p>These convenience methods have implicit severity:</p> <ul>
<li> <p><a href="logger.html#method-i-debug"><code>debug</code></a>.</p> </li>
<li> <p><a href="logger.html#method-i-info"><code>info</code></a>.</p> </li>
<li> <p><a href="logger.html#method-i-warn"><code>warn</code></a>.</p> </li>
<li> <p><a href="logger.html#method-i-error"><code>error</code></a>.</p> </li>
<li> <p><a href="logger.html#method-i-fatal"><code>fatal</code></a>.</p> </li>
<li> <p><a href="logger.html#method-i-unknown"><code>unknown</code></a>.</p> </li>
</ul> </div> <div class="aliases"> Also aliased as: <a href="logger.html#method-i-log">log</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-close"> <a href="#method-i-close" title="Link to this method"> <span class="method-name">close</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="close-source"> <pre class="ruby" data-language="ruby"># File lib/logger.rb, line 736
def close
  @logdev&amp;.close
end</pre> </div>  <p>Closes the logger; returns <code>nil</code>:</p> <pre class="ruby" data-language="ruby">logger = Logger.new('t.log')
logger.close       # =&gt; nil
logger.info('foo') # Prints "log writing failed. closed stream"
</pre> <p>Related: <a href="logger.html#method-i-reopen"><code>Logger#reopen</code></a>.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-datetime_format"> <a href="#method-i-datetime_format" title="Link to this method"> <span class="method-name">datetime_format</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="datetime_format-source"> <pre class="ruby" data-language="ruby"># File lib/logger.rb, line 438
def datetime_format
  @default_formatter.datetime_format
end</pre> </div>  <p>Returns the date-time format; see <a href="logger.html#method-i-datetime_format-3D"><code>datetime_format=</code></a>.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-datetime_format-3D"> <a href="#method-i-datetime_format-3D" title="Link to this method"> <span class="method-name">datetime_format=</span> <span class="method-args">(datetime_format)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="datetime_format-3D-source"> <pre class="ruby" data-language="ruby"># File lib/logger.rb, line 432
def datetime_format=(datetime_format)
  @default_formatter.datetime_format = datetime_format
end</pre> </div>  <p>Sets the date-time format.</p> <p>Argument <a href="logger.html#method-i-datetime_format"><code>datetime_format</code></a> should be either of these:</p> <ul>
<li> <p>A string suitable for use as a format for method <a href="time.html#method-i-strftime"><code>Time#strftime</code></a>.</p> </li>
<li> <p><code>nil</code>: the logger uses <code>'%Y-%m-%dT%H:%M:%S.%6N'</code>.</p> </li>
</ul> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-debug"> <a href="#method-i-debug" title="Link to this method"> <span class="method-name">debug</span> <span class="method-args">(progname = nil, &amp;block)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="debug-source"> <pre class="ruby" data-language="ruby"># File lib/logger.rb, line 695
def debug(progname = nil, &amp;block)
  add(DEBUG, nil, progname, &amp;block)
end</pre> </div>  <p>Equivalent to calling <a href="logger.html#method-i-add"><code>add</code></a> with severity <code>Logger::DEBUG</code>.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-debug-21"> <a href="#method-i-debug-21" title="Link to this method"> <span class="method-name">debug!</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="debug-21-source"> <pre class="ruby" data-language="ruby"># File lib/logger.rb, line 487
def debug!; self.level = DEBUG; end</pre> </div>  <p>Sets the log level to Logger::DEBUG. See <a href="logger.html#class-Logger-label-Log+Level">Log Level</a>.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-debug-3F"> <a href="#method-i-debug-3F" title="Link to this method"> <span class="method-name">debug?</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="debug-3F-source"> <pre class="ruby" data-language="ruby"># File lib/logger.rb, line 482
def debug?; level &lt;= DEBUG; end</pre> </div>  <p>Returns <code>true</code> if the log level allows entries with severity Logger::DEBUG to be written, <code>false</code> otherwise. See <a href="logger.html#class-Logger-label-Log+Level">Log Level</a>.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-error"> <a href="#method-i-error" title="Link to this method"> <span class="method-name">error</span> <span class="method-args">(progname = nil, &amp;block)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="error-source"> <pre class="ruby" data-language="ruby"># File lib/logger.rb, line 713
def error(progname = nil, &amp;block)
  add(ERROR, nil, progname, &amp;block)
end</pre> </div>  <p>Equivalent to calling <a href="logger.html#method-i-add"><code>add</code></a> with severity <code>Logger::ERROR</code>.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-error-21"> <a href="#method-i-error-21" title="Link to this method"> <span class="method-name">error!</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="error-21-source"> <pre class="ruby" data-language="ruby"># File lib/logger.rb, line 520
def error!; self.level = ERROR; end</pre> </div>  <p>Sets the log level to Logger::ERROR. See <a href="logger.html#class-Logger-label-Log+Level">Log Level</a>.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-error-3F"> <a href="#method-i-error-3F" title="Link to this method"> <span class="method-name">error?</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="error-3F-source"> <pre class="ruby" data-language="ruby"># File lib/logger.rb, line 515
def error?; level &lt;= ERROR; end</pre> </div>  <p>Returns <code>true</code> if the log level allows entries with severity Logger::ERROR to be written, <code>false</code> otherwise. See <a href="logger.html#class-Logger-label-Log+Level">Log Level</a>.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-fatal"> <a href="#method-i-fatal" title="Link to this method"> <span class="method-name">fatal</span> <span class="method-args">(progname = nil, &amp;block)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="fatal-source"> <pre class="ruby" data-language="ruby"># File lib/logger.rb, line 719
def fatal(progname = nil, &amp;block)
  add(FATAL, nil, progname, &amp;block)
end</pre> </div>  <p>Equivalent to calling <a href="logger.html#method-i-add"><code>add</code></a> with severity <code>Logger::FATAL</code>.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-fatal-21"> <a href="#method-i-fatal-21" title="Link to this method"> <span class="method-name">fatal!</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="fatal-21-source"> <pre class="ruby" data-language="ruby"># File lib/logger.rb, line 531
def fatal!; self.level = FATAL; end</pre> </div>  <p>Sets the log level to Logger::FATAL. See <a href="logger.html#class-Logger-label-Log+Level">Log Level</a>.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-fatal-3F"> <a href="#method-i-fatal-3F" title="Link to this method"> <span class="method-name">fatal?</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="fatal-3F-source"> <pre class="ruby" data-language="ruby"># File lib/logger.rb, line 526
def fatal?; level &lt;= FATAL; end</pre> </div>  <p>Returns <code>true</code> if the log level allows entries with severity Logger::FATAL to be written, <code>false</code> otherwise. See <a href="logger.html#class-Logger-label-Log+Level">Log Level</a>.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-info"> <a href="#method-i-info" title="Link to this method"> <span class="method-name">info</span> <span class="method-args">(progname = nil, &amp;block)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="info-source"> <pre class="ruby" data-language="ruby"># File lib/logger.rb, line 701
def info(progname = nil, &amp;block)
  add(INFO, nil, progname, &amp;block)
end</pre> </div>  <p>Equivalent to calling <a href="logger.html#method-i-add"><code>add</code></a> with severity <code>Logger::INFO</code>.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-info-21"> <a href="#method-i-info-21" title="Link to this method"> <span class="method-name">info!</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="info-21-source"> <pre class="ruby" data-language="ruby"># File lib/logger.rb, line 498
def info!; self.level = INFO; end</pre> </div>  <p>Sets the log level to Logger::INFO. See <a href="logger.html#class-Logger-label-Log+Level">Log Level</a>.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-info-3F"> <a href="#method-i-info-3F" title="Link to this method"> <span class="method-name">info?</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="info-3F-source"> <pre class="ruby" data-language="ruby"># File lib/logger.rb, line 493
def info?; level &lt;= INFO; end</pre> </div>  <p>Returns <code>true</code> if the log level allows entries with severity Logger::INFO to be written, <code>false</code> otherwise. See <a href="logger.html#class-Logger-label-Log+Level">Log Level</a>.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-level"> <a href="#method-i-level" title="Link to this method"> <span class="method-name">level</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="level-source"> <pre class="ruby" data-language="ruby"># File lib/logger.rb, line 383
def level
  level_override[level_key] || @level
end</pre> </div>  <p>Logging severity threshold (e.g. <code>Logger::INFO</code>).</p> </div> <div class="aliases"> Also aliased as: <a href="logger.html#method-i-sev_threshold">sev_threshold</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-level-3D"> <a href="#method-i-level-3D" title="Link to this method"> <span class="method-name">level=</span> <span class="method-args">(severity)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="level-3D-source"> <pre class="ruby" data-language="ruby"># File lib/logger.rb, line 399
def level=(severity)
  @level = Severity.coerce(severity)
end</pre> </div>  <p>Sets the log level; returns <code>severity</code>. See <a href="logger.html#class-Logger-label-Log+Level">Log Level</a>.</p> <p>Argument <code>severity</code> may be an integer, a string, or a symbol:</p> <pre class="ruby" data-language="ruby">logger.level = Logger::ERROR # =&gt; 3
logger.level = 3             # =&gt; 3
logger.level = 'error'       # =&gt; "error"
logger.level = :error        # =&gt; :error
</pre> <p><a href="logger.html#method-i-sev_threshold-3D"><code>Logger#sev_threshold=</code></a> is an alias for <a href="logger.html#method-i-level-3D"><code>Logger#level=</code></a>.</p> </div> <div class="aliases"> Also aliased as: <a href="logger.html#method-i-sev_threshold-3D">sev_threshold=</a> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-log"> <a href="#method-i-log" title="Link to this method"> <span class="method-name">log</span> <span class="method-args">(severity, message = nil, progname = nil)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="logger.html#method-i-add">add</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-reopen"> <a href="#method-i-reopen" title="Link to this method"> <span class="method-name">reopen</span> <span class="method-args">(logdev = nil)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="reopen-source"> <pre class="ruby" data-language="ruby"># File lib/logger.rb, line 624
def reopen(logdev = nil)
  @logdev&amp;.reopen(logdev)
  self
end</pre> </div>  <p>Sets the logger’s output stream:</p> <ul>
<li> <p>If <code>logdev</code> is <code>nil</code>, reopens the current output stream.</p> </li>
<li> <p>If <code>logdev</code> is a filepath, opens the indicated file for append.</p> </li>
<li> <p>If <code>logdev</code> is an <a href="io.html"><code>IO</code></a> stream (usually <code>$stdout</code>, <code>$stderr</code>, or an open <a href="file.html"><code>File</code></a> object), opens the stream for append.</p> </li>
</ul> <p>Example:</p> <pre class="ruby" data-language="ruby">logger = Logger.new('t.log')
logger.add(Logger::ERROR, 'one')
logger.close
logger.add(Logger::ERROR, 'two') # Prints 'log writing failed. closed stream'
logger.reopen
logger.add(Logger::ERROR, 'three')
logger.close
File.readlines('t.log')
# =&gt;
# ["# Logfile created on 2022-05-12 14:21:19 -0500 by logger.rb/v1.5.0\n",
#  "E, [2022-05-12T14:21:27.596726 #22428] ERROR -- : one\n",
#  "E, [2022-05-12T14:23:05.847241 #22428] ERROR -- : three\n"]
</pre> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-sev_threshold"> <a href="#method-i-sev_threshold" title="Link to this method"> <span class="method-name">sev_threshold</span> <span class="method-args">()</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="logger.html#method-i-level">level</a> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-sev_threshold-3D"> <a href="#method-i-sev_threshold-3D" title="Link to this method"> <span class="method-name">sev_threshold=</span> <span class="method-args">(severity)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="logger.html#method-i-level-3D">level=</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-unknown"> <a href="#method-i-unknown" title="Link to this method"> <span class="method-name">unknown</span> <span class="method-args">(progname = nil, &amp;block)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="unknown-source"> <pre class="ruby" data-language="ruby"># File lib/logger.rb, line 725
def unknown(progname = nil, &amp;block)
  add(UNKNOWN, nil, progname, &amp;block)
end</pre> </div>  <p>Equivalent to calling <a href="logger.html#method-i-add"><code>add</code></a> with severity <code>Logger::UNKNOWN</code>.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-warn"> <a href="#method-i-warn" title="Link to this method"> <span class="method-name">warn</span> <span class="method-args">(progname = nil, &amp;block)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="warn-source"> <pre class="ruby" data-language="ruby"># File lib/logger.rb, line 707
def warn(progname = nil, &amp;block)
  add(WARN, nil, progname, &amp;block)
end</pre> </div>  <p>Equivalent to calling <a href="logger.html#method-i-add"><code>add</code></a> with severity <code>Logger::WARN</code>.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-warn-21"> <a href="#method-i-warn-21" title="Link to this method"> <span class="method-name">warn!</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="warn-21-source"> <pre class="ruby" data-language="ruby"># File lib/logger.rb, line 509
def warn!; self.level = WARN; end</pre> </div>  <p>Sets the log level to Logger::WARN. See <a href="logger.html#class-Logger-label-Log+Level">Log Level</a>.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-warn-3F"> <a href="#method-i-warn-3F" title="Link to this method"> <span class="method-name">warn?</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="warn-3F-source"> <pre class="ruby" data-language="ruby"># File lib/logger.rb, line 504
def warn?; level &lt;= WARN; end</pre> </div>  <p>Returns <code>true</code> if the log level allows entries with severity Logger::WARN to be written, <code>false</code> otherwise. See <a href="logger.html#class-Logger-label-Log+Level">Log Level</a>.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-with_level"> <a href="#method-i-with_level" title="Link to this method"> <span class="method-name">with_level</span> <span class="method-args">(severity) { || ... }</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="with_level-source"> <pre class="ruby" data-language="ruby"># File lib/logger.rb, line 408
def with_level(severity)
  prev, level_override[level_key] = level, Severity.coerce(severity)
  begin
    yield
  ensure
    if prev
      level_override[level_key] = prev
    else
      level_override.delete(level_key)
    end
  end
end</pre> </div>  <p>Adjust the log level during the block execution for the current <a href="fiber.html"><code>Fiber</code></a> only</p> <pre class="ruby" data-language="ruby">logger.with_level(:debug) do
  logger.debug { "Hello" }
end
</pre> </div> </div> </section> <section id="private-instance-5Buntitled-5D-method-details" class="method-section anchor-link"> <header> <h3>Private Instance Methods</h3> </header> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-format_message"> <a href="#method-i-format_message" title="Link to this method"> <span class="method-name">format_message</span> <span class="method-args">(severity, datetime, progname, msg)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="format_message-source"> <pre class="ruby" data-language="ruby"># File lib/logger.rb, line 758
def format_message(severity, datetime, progname, msg)
  (@formatter || @default_formatter).call(severity, datetime, progname, msg)
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-format_severity"> <a href="#method-i-format_severity" title="Link to this method"> <span class="method-name">format_severity</span> <span class="method-args">(severity)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="format_severity-source"> <pre class="ruby" data-language="ruby"># File lib/logger.rb, line 745
def format_severity(severity)
  SEV_LABEL[severity] || 'ANY'
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-level_key"> <a href="#method-i-level_key" title="Link to this method"> <span class="method-name">level_key</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="level_key-source"> <pre class="ruby" data-language="ruby"># File lib/logger.rb, line 754
def level_key
  Fiber.current
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-level_override"> <a href="#method-i-level_override" title="Link to this method"> <span class="method-name">level_override</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="level_override-source"> <pre class="ruby" data-language="ruby"># File lib/logger.rb, line 750
def level_override
  @level_override ||= {}
end</pre> </div>  <p>Guarantee the existence of this ivar even when subclasses don’t call the superclass constructor.</p> </div> </div> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    Ruby Core &copy; 1993&ndash;2024 Yukihiro Matsumoto<br>Licensed under the Ruby License.<br>Ruby Standard Library &copy; contributors<br>Licensed under their own licenses.<br>
    
  </p>
</div>
