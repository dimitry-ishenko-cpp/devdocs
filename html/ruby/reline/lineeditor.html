<h1 id="class-Reline::LineEditor" class="anchor-link class"> class Reline::LineEditor </h1>
<dl class="meta">
<dt>Parent:</dt>
<dd class="meta-parent"><a href="../object.html">Object</a></dd>
</dl>  <section id="5Buntitled-5D" class="documentation-section anchor-link"> <section class="constants-list"> <header> <h3>Constants</h3> </header> <dl> <dt id="ARGUMENT_DIGIT_METHODS">ARGUMENT_DIGIT_METHODS </dt>

<dt id="CompletionJourneyState">CompletionJourneyState </dt>

<dt id="DIALOG_DEFAULT_HEIGHT">DIALOG_DEFAULT_HEIGHT </dt>

<dt id="MAX_INPUT_LINES">MAX_INPUT_LINES </dt>

<dt id="MINIMUM_SCROLLBAR_HEIGHT">MINIMUM_SCROLLBAR_HEIGHT </dt>

<dt id="NullActionState">NullActionState </dt>

<dt id="RenderedScreen">RenderedScreen </dt>

<dt id="VI_MOTIONS">VI_MOTIONS </dt>

<dt id="VI_WAITING_ACCEPT_METHODS">VI_WAITING_ACCEPT_METHODS </dt>

</dl> </section> <section class="attribute-method-details"> <header> <h3>Attributes</h3> </header> <div class="method-detail anchor-link"> <div class="method-heading attribute-method-heading" id="attribute-i-auto_indent_proc"> <a href="#attribute-i-auto_indent_proc" title="Link to this attribute"> <span class="method-name">auto_indent_proc</span> <span class="attribute-access-type">[RW]</span> </a> </div>  </div> <div class="method-detail anchor-link"> <div class="method-heading attribute-method-heading" id="attribute-i-byte_pointer"> <a href="#attribute-i-byte_pointer" title="Link to this attribute"> <span class="method-name">byte_pointer</span> <span class="attribute-access-type">[R]</span> </a> </div> <div class="method-description"> <p>TODO: Use “private alias_method” idiom after drop Ruby 2.5.</p> </div> </div> <div class="method-detail anchor-link"> <div class="method-heading attribute-method-heading" id="attribute-i-completion_append_character"> <a href="#attribute-i-completion_append_character" title="Link to this attribute"> <span class="method-name">completion_append_character</span> <span class="attribute-access-type">[RW]</span> </a> </div>  </div> <div class="method-detail anchor-link"> <div class="method-heading attribute-method-heading" id="attribute-i-completion_proc"> <a href="#attribute-i-completion_proc" title="Link to this attribute"> <span class="method-name">completion_proc</span> <span class="attribute-access-type">[RW]</span> </a> </div>  </div> <div class="method-detail anchor-link"> <div class="method-heading attribute-method-heading" id="attribute-i-confirm_multiline_termination_proc"> <a href="#attribute-i-confirm_multiline_termination_proc" title="Link to this attribute"> <span class="method-name">confirm_multiline_termination_proc</span> <span class="attribute-access-type">[RW]</span> </a> </div>  </div> <div class="method-detail anchor-link"> <div class="method-heading attribute-method-heading" id="attribute-i-dig_perfect_match_proc"> <a href="#attribute-i-dig_perfect_match_proc" title="Link to this attribute"> <span class="method-name">dig_perfect_match_proc</span> <span class="attribute-access-type">[RW]</span> </a> </div>  </div> <div class="method-detail anchor-link"> <div class="method-heading attribute-method-heading" id="attribute-i-output_modifier_proc"> <a href="#attribute-i-output_modifier_proc" title="Link to this attribute"> <span class="method-name">output_modifier_proc</span> <span class="attribute-access-type">[RW]</span> </a> </div>  </div> <div class="method-detail anchor-link"> <div class="method-heading attribute-method-heading" id="attribute-i-prompt_proc"> <a href="#attribute-i-prompt_proc" title="Link to this attribute"> <span class="method-name">prompt_proc</span> <span class="attribute-access-type">[RW]</span> </a> </div>  </div> </section> <section id="public-class-5Buntitled-5D-method-details" class="method-section anchor-link"> <header> <h3>Public Class Methods</h3> </header> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-c-new"> <a href="#method-c-new" title="Link to this method"> <span class="method-name">new</span> <span class="method-args">(config)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="new-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 73
def initialize(config)
  @config = config
  @completion_append_character = ''
  @screen_size = [0, 0] # Should be initialized with actual winsize in LineEditor#reset
  reset_variables
end</pre> </div>  </div> </div> </section> <section id="public-instance-5Buntitled-5D-method-details" class="method-section anchor-link"> <header> <h3>Public Instance Methods</h3> </header> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-add_dialog_proc"> <a href="#method-i-add_dialog_proc" title="Link to this method"> <span class="method-name">add_dialog_proc</span> <span class="method-args">(name, p, context = nil)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="add_dialog_proc-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 692
def add_dialog_proc(name, p, context = nil)
  dialog = Dialog.new(name, @config, DialogProcScope.new(self, @config, p, context))
  if index = @dialogs.find_index { |d| d.name == name }
    @dialogs[index] = dialog
  else
    @dialogs &lt;&lt; dialog
  end
end</pre> </div>  </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-backward_char"> <a href="#method-i-backward_char" title="Link to this method"> <span class="method-name">backward_char</span> <span class="method-args">(key, arg: 1)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="lineeditor.html#method-i-ed_prev_char">ed_prev_char</a> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-backward_delete_char"> <a href="#method-i-backward_delete_char" title="Link to this method"> <span class="method-name">backward_delete_char</span> <span class="method-args">(key, arg: 1)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="lineeditor.html#method-i-em_delete_prev_char">em_delete_prev_char</a> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-backward_kill_word"> <a href="#method-i-backward_kill_word" title="Link to this method"> <span class="method-name">backward_kill_word</span> <span class="method-args">(key)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="lineeditor.html#method-i-ed_delete_prev_word">ed_delete_prev_word</a> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-backward_word"> <a href="#method-i-backward_word" title="Link to this method"> <span class="method-name">backward_word</span> <span class="method-args">(key)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="lineeditor.html#method-i-ed_prev_word">ed_prev_word</a> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-beginning_of_line"> <a href="#method-i-beginning_of_line" title="Link to this method"> <span class="method-name">beginning_of_line</span> <span class="method-args">(key)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="lineeditor.html#method-i-ed_move_to_beg">ed_move_to_beg</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-byte_pointer-3D"> <a href="#method-i-byte_pointer-3D" title="Link to this method"> <span class="method-name">byte_pointer=</span> <span class="method-args">(val)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="byte_pointer-3D-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1282
def byte_pointer=(val)
  @byte_pointer = val
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-calculate_overlay_levels"> <a href="#method-i-calculate_overlay_levels" title="Link to this method"> <span class="method-name">calculate_overlay_levels</span> <span class="method-args">(overlay_levels)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="calculate_overlay_levels-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 398
def calculate_overlay_levels(overlay_levels)
  levels = []
  overlay_levels.each do |x, w, l|
    levels.fill(l, x, w)
  end
  levels
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-call_completion_proc"> <a href="#method-i-call_completion_proc" title="Link to this method"> <span class="method-name">call_completion_proc</span> <span class="method-args">(pre, target, post, quote)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="call_completion_proc-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1122
def call_completion_proc(pre, target, post, quote)
  Reline.core.instance_variable_set(:@completion_quote_character, quote)
  result = call_completion_proc_with_checking_args(pre, target, post)
  Reline.core.instance_variable_set(:@completion_quote_character, nil)
  result
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-call_completion_proc_with_checking_args"> <a href="#method-i-call_completion_proc_with_checking_args" title="Link to this method"> <span class="method-name">call_completion_proc_with_checking_args</span> <span class="method-args">(pre, target, post)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="call_completion_proc_with_checking_args-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1129
def call_completion_proc_with_checking_args(pre, target, post)
  if @completion_proc and target
    argnum = @completion_proc.parameters.inject(0) { |result, item|
      case item.first
      when :req, :opt
        result + 1
      when :rest
        break 3
      end
    }
    case argnum
    when 1
      result = @completion_proc.(target)
    when 2
      result = @completion_proc.(target, pre)
    when 3..Float::INFINITY
      result = @completion_proc.(target, pre, post)
    end
  end
  result
end</pre> </div>  </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-capitalize_word"> <a href="#method-i-capitalize_word" title="Link to this method"> <span class="method-name">capitalize_word</span> <span class="method-args">(key)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="lineeditor.html#method-i-em_capitol_case">em_capitol_case</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-clear_dialogs"> <a href="#method-i-clear_dialogs" title="Link to this method"> <span class="method-name">clear_dialogs</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="clear_dialogs-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 446
def clear_dialogs
  @dialogs.each do |dialog|
    dialog.contents = nil
    dialog.trap_key = nil
  end
end</pre> </div>  </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-clear_screen"> <a href="#method-i-clear_screen" title="Link to this method"> <span class="method-name">clear_screen</span> <span class="method-args">(key)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="lineeditor.html#method-i-ed_clear_screen">ed_clear_screen</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-confirm_multiline_termination"> <a href="#method-i-confirm_multiline_termination" title="Link to this method"> <span class="method-name">confirm_multiline_termination</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="confirm_multiline_termination-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1223
def confirm_multiline_termination
  temp_buffer = @buffer_of_lines.dup
  @confirm_multiline_termination_proc.(temp_buffer.join("\n") + "\n")
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-current_byte_pointer_cursor"> <a href="#method-i-current_byte_pointer_cursor" title="Link to this method"> <span class="method-name">current_byte_pointer_cursor</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="current_byte_pointer_cursor-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 304
def current_byte_pointer_cursor
  calculate_width(current_line.byteslice(0, @byte_pointer))
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-current_line"> <a href="#method-i-current_line" title="Link to this method"> <span class="method-name">current_line</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="current_line-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1172
def current_line
  @buffer_of_lines[@line_index]
end</pre> </div>  </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-delete_char"> <a href="#method-i-delete_char" title="Link to this method"> <span class="method-name">delete_char</span> <span class="method-args">(key)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="lineeditor.html#method-i-em_delete">em_delete</a> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-delete_char_or_list"> <a href="#method-i-delete_char_or_list" title="Link to this method"> <span class="method-name">delete_char_or_list</span> <span class="method-args">(key)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="lineeditor.html#method-i-em_delete_or_list">em_delete_or_list</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-delete_text"> <a href="#method-i-delete_text" title="Link to this method"> <span class="method-name">delete_text</span> <span class="method-args">(start = nil, length = nil)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="delete_text-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1248
def delete_text(start = nil, length = nil)
  if start.nil? and length.nil?
    if @buffer_of_lines.size == 1
      @buffer_of_lines[@line_index] = ''
      @byte_pointer = 0
    elsif @line_index == (@buffer_of_lines.size - 1) and @line_index &gt; 0
      @buffer_of_lines.pop
      @line_index -= 1
      @byte_pointer = 0
    elsif @line_index &lt; (@buffer_of_lines.size - 1)
      @buffer_of_lines.delete_at(@line_index)
      @byte_pointer = 0
    end
  elsif not start.nil? and not length.nil?
    if current_line
      before = current_line.byteslice(0, start)
      after = current_line.byteslice(start + length, current_line.bytesize)
      set_current_line(before + after)
    end
  elsif start.is_a?(Range)
    range = start
    first = range.first
    last = range.last
    last = current_line.bytesize - 1 if last &gt; current_line.bytesize
    last += current_line.bytesize if last &lt; 0
    first += current_line.bytesize if first &lt; 0
    range = range.exclude_end? ? first...last : first..last
    line = current_line.bytes.reject.with_index{ |c, i| range.include?(i) }.map{ |c| c.chr(Encoding::ASCII_8BIT) }.join.force_encoding(encoding)
    set_current_line(line)
  else
    set_current_line(current_line.byteslice(0, start))
  end
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-dialog_proc_scope_completion_journey_data"> <a href="#method-i-dialog_proc_scope_completion_journey_data" title="Link to this method"> <span class="method-name">dialog_proc_scope_completion_journey_data</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="dialog_proc_scope_completion_journey_data-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 874
def dialog_proc_scope_completion_journey_data
  return nil unless @completion_journey_state
  line_index = @completion_journey_state.line_index
  pre_lines = @buffer_of_lines[0...line_index].map { |line| line + "\n" }
  post_lines = @buffer_of_lines[(line_index + 1)..-1].map { |line| line + "\n" }
  DialogProcScope::CompletionJourneyData.new(
    pre_lines.join + @completion_journey_state.pre,
    @completion_journey_state.post + post_lines.join,
    @completion_journey_state.list,
    @completion_journey_state.pointer
  )
end</pre> </div>  </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-downcase_word"> <a href="#method-i-downcase_word" title="Link to this method"> <span class="method-name">downcase_word</span> <span class="method-args">(key)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="lineeditor.html#method-i-em_lower_case">em_lower_case</a> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-ed_digit"> <a href="#method-i-ed_digit" title="Link to this method"> <span class="method-name">ed_digit</span> <span class="method-args">(str)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="lineeditor.html#method-i-ed_insert">ed_insert</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-editing_mode"> <a href="#method-i-editing_mode" title="Link to this method"> <span class="method-name">editing_mode</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="editing_mode-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 801
def editing_mode
  @config.editing_mode
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-encoding"> <a href="#method-i-encoding" title="Link to this method"> <span class="method-name">encoding</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="encoding-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 84
def encoding
  io_gate.encoding
end</pre> </div>  </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-end_of_line"> <a href="#method-i-end_of_line" title="Link to this method"> <span class="method-name">end_of_line</span> <span class="method-args">(key)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="lineeditor.html#method-i-ed_move_to_end">ed_move_to_end</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-eof-3F"> <a href="#method-i-eof-3F" title="Link to this method"> <span class="method-name">eof?</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="eof-3F-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 220
def eof?
  @eof
end</pre> </div>  </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-exchange_point_and_mark"> <a href="#method-i-exchange_point_and_mark" title="Link to this method"> <span class="method-name">exchange_point_and_mark</span> <span class="method-args">(key)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="lineeditor.html#method-i-em_exchange_mark">em_exchange_mark</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-finalize"> <a href="#method-i-finalize" title="Link to this method"> <span class="method-name">finalize</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="finalize-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 216
def finalize
  Signal.trap('INT', @old_trap)
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-finish"> <a href="#method-i-finish" title="Link to this method"> <span class="method-name">finish</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="finish-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1302
def finish
  @finished = true
  @config.reset
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-finished-3F"> <a href="#method-i-finished-3F" title="Link to this method"> <span class="method-name">finished?</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="finished-3F-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1298
def finished?
  @finished
end</pre> </div>  </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-forward_char"> <a href="#method-i-forward_char" title="Link to this method"> <span class="method-name">forward_char</span> <span class="method-args">(key, arg: 1)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="lineeditor.html#method-i-ed_next_char">ed_next_char</a> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-forward_search_history"> <a href="#method-i-forward_search_history" title="Link to this method"> <span class="method-name">forward_search_history</span> <span class="method-args">(key)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="lineeditor.html#method-i-vi_search_next">vi_search_next</a> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-forward_word"> <a href="#method-i-forward_word" title="Link to this method"> <span class="method-name">forward_word</span> <span class="method-args">(key)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="lineeditor.html#method-i-em_next_word">em_next_word</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-handle_signal"> <a href="#method-i-handle_signal" title="Link to this method"> <span class="method-name">handle_signal</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="handle_signal-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 168
def handle_signal
  handle_interrupted
  handle_resized
end</pre> </div>  </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-history_search_backward"> <a href="#method-i-history_search_backward" title="Link to this method"> <span class="method-name">history_search_backward</span> <span class="method-args">(key, arg: 1)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="lineeditor.html#method-i-ed_search_prev_history">ed_search_prev_history</a> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-history_search_forward"> <a href="#method-i-history_search_forward" title="Link to this method"> <span class="method-name">history_search_forward</span> <span class="method-args">(key, arg: 1)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="lineeditor.html#method-i-ed_search_next_history">ed_search_next_history</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-input_key"> <a href="#method-i-input_key" title="Link to this method"> <span class="method-name">input_key</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="input_key-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1043
def input_key(key)
  save_old_buffer
  @config.reset_oneshot_key_bindings
  if key.char.nil?
    process_insert(force: true)
    @eof = buffer_empty?
    finish
    return
  end
  @dialogs.each do |dialog|
    if key.method_symbol == dialog.name
      return
    end
  end
  @completion_occurs = false

  process_key(key.char, key.method_symbol)
  if @config.editing_mode_is?(:vi_command) and @byte_pointer &gt; 0 and @byte_pointer == current_line.bytesize
    byte_size = Reline::Unicode.get_prev_mbchar_size(@buffer_of_lines[@line_index], @byte_pointer)
    @byte_pointer -= byte_size
  end

  @prev_action_state, @next_action_state = @next_action_state, NullActionState

  unless @completion_occurs
    @completion_state = CompletionState::NORMAL
    @completion_journey_state = nil
  end

  push_input_lines unless @restoring
  @restoring = false

  if @in_pasting
    clear_dialogs
    return
  end

  modified = @old_buffer_of_lines != @buffer_of_lines
  if !@completion_occurs &amp;&amp; modified &amp;&amp; !@config.disable_completion &amp;&amp; @config.autocompletion
    # Auto complete starts only when edited
    process_insert(force: true)
    @completion_journey_state = retrieve_completion_journey_state
  end
  modified
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-insert_multiline_text"> <a href="#method-i-insert_multiline_text" title="Link to this method"> <span class="method-name">insert_multiline_text</span> <span class="method-args">(text)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="insert_multiline_text-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1228
def insert_multiline_text(text)
  pre = @buffer_of_lines[@line_index].byteslice(0, @byte_pointer)
  post = @buffer_of_lines[@line_index].byteslice(@byte_pointer..)
  lines = (pre + Reline::Unicode.safe_encode(text, encoding).gsub(/\r\n?/, "\n") + post).split("\n", -1)
  lines &lt;&lt; '' if lines.empty?
  @buffer_of_lines[@line_index, 1] = lines
  @line_index += lines.size - 1
  @byte_pointer = @buffer_of_lines[@line_index].bytesize - post.bytesize
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-insert_text"> <a href="#method-i-insert_text" title="Link to this method"> <span class="method-name">insert_text</span> <span class="method-args">(text)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="insert_text-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1238
def insert_text(text)
  if @buffer_of_lines[@line_index].bytesize == @byte_pointer
    @buffer_of_lines[@line_index] += text
  else
    @buffer_of_lines[@line_index] = byteinsert(@buffer_of_lines[@line_index], @byte_pointer, text)
  end
  @byte_pointer += text.bytesize
  process_auto_indent
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-io_gate"> <a href="#method-i-io_gate" title="Link to this method"> <span class="method-name">io_gate</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="io_gate-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 80
def io_gate
  Reline::IOGate
end</pre> </div>  </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-kill_line"> <a href="#method-i-kill_line" title="Link to this method"> <span class="method-name">kill_line</span> <span class="method-args">(key)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="lineeditor.html#method-i-ed_kill_line">ed_kill_line</a> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-kill_whole_line"> <a href="#method-i-kill_whole_line" title="Link to this method"> <span class="method-name">kill_whole_line</span> <span class="method-args">(key)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="lineeditor.html#method-i-em_kill_line">em_kill_line</a> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-kill_word"> <a href="#method-i-kill_word" title="Link to this method"> <span class="method-name">kill_word</span> <span class="method-args">(key)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="lineeditor.html#method-i-em_delete_next_word">em_delete_next_word</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-line"> <a href="#method-i-line" title="Link to this method"> <span class="method-name">line</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="line-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1168
def line()
  @buffer_of_lines.join("\n") unless eof?
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-modified_lines"> <a href="#method-i-modified_lines" title="Link to this method"> <span class="method-name">modified_lines</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="modified_lines-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 351
def modified_lines
  with_cache(__method__, whole_lines, finished?) do |whole, complete|
    modify_lines(whole, complete)
  end
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-multiline_off"> <a href="#method-i-multiline_off" title="Link to this method"> <span class="method-name">multiline_off</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="multiline_off-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 273
def multiline_off
  @is_multiline = false
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-multiline_on"> <a href="#method-i-multiline_on" title="Link to this method"> <span class="method-name">multiline_on</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="multiline_on-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 269
def multiline_on
  @is_multiline = true
end</pre> </div>  </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-next_history"> <a href="#method-i-next_history" title="Link to this method"> <span class="method-name">next_history</span> <span class="method-args">(key, arg: 1)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="lineeditor.html#method-i-ed_next_history">ed_next_history</a> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-previous_history"> <a href="#method-i-previous_history" title="Link to this method"> <span class="method-name">previous_history</span> <span class="method-args">(key, arg: 1)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="lineeditor.html#method-i-ed_prev_history">ed_prev_history</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-print_nomultiline_prompt"> <a href="#method-i-print_nomultiline_prompt" title="Link to this method"> <span class="method-name">print_nomultiline_prompt</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="print_nomultiline_prompt-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 473
def print_nomultiline_prompt
  Reline::IOGate.disable_auto_linewrap(true) if Reline::IOGate.win?
  # Readline's test `TestRelineAsReadline#test_readline` requires first output to be prompt, not cursor reset escape sequence.
  Reline::IOGate.write Reline::Unicode.strip_non_printing_start_end(@prompt) if @prompt &amp;&amp; !@is_multiline
ensure
  Reline::IOGate.disable_auto_linewrap(false) if Reline::IOGate.win?
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-prompt_list"> <a href="#method-i-prompt_list" title="Link to this method"> <span class="method-name">prompt_list</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="prompt_list-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 357
def prompt_list
  with_cache(__method__, whole_lines, check_mode_string, @vi_arg, @searching_prompt) do |lines, mode_string|
    check_multiline_prompt(lines, mode_string)
  end
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-push_input_lines"> <a href="#method-i-push_input_lines" title="Link to this method"> <span class="method-name">push_input_lines</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="push_input_lines-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1093
def push_input_lines
  if @old_buffer_of_lines == @buffer_of_lines
    @input_lines[@input_lines_position] = [@buffer_of_lines.dup, @byte_pointer, @line_index]
  else
    @input_lines = @input_lines[0..@input_lines_position]
    @input_lines_position += 1
    @input_lines.push([@buffer_of_lines.dup, @byte_pointer, @line_index])
  end
  trim_input_lines
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-render"> <a href="#method-i-render" title="Link to this method"> <span class="method-name">render</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="render-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 481
def render
  wrapped_cursor_x, wrapped_cursor_y = wrapped_cursor_position
  new_lines = wrapped_prompt_and_input_lines.flatten(1)[screen_scroll_top, screen_height].map do |prompt, line|
    prompt_width = Reline::Unicode.calculate_width(prompt, true)
    [[0, prompt_width, prompt], [prompt_width, Reline::Unicode.calculate_width(line, true), line]]
  end
  if @menu_info
    @menu_info.lines(screen_width).each do |item|
      new_lines &lt;&lt; [[0, Reline::Unicode.calculate_width(item), item]]
    end
    @menu_info = nil # TODO: do not change state here
  end

  @dialogs.each_with_index do |dialog, index|
    next unless dialog.contents

    x_range, y_range = dialog_range dialog, wrapped_cursor_y - screen_scroll_top
    y_range.each do |row|
      next if row &lt; 0 || row &gt;= screen_height

      dialog_rows = new_lines[row] ||= []
      # index 0 is for prompt, index 1 is for line, index 2.. is for dialog
      dialog_rows[index + 2] = [x_range.begin, dialog.width, dialog.contents[row - y_range.begin]]
    end
  end

  Reline::IOGate.buffered_output do
    render_differential new_lines, wrapped_cursor_x, wrapped_cursor_y - screen_scroll_top
  end
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-render_finished"> <a href="#method-i-render_finished" title="Link to this method"> <span class="method-name">render_finished</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="render_finished-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 461
def render_finished
  Reline::IOGate.buffered_output do
    render_differential([], 0, 0)
    lines = @buffer_of_lines.size.times.map do |i|
      line = Reline::Unicode.strip_non_printing_start_end(prompt_list[i]) + modified_lines[i]
      wrapped_lines = split_line_by_width(line, screen_width)
      wrapped_lines.last.empty? ? "#{line} " : line
    end
    Reline::IOGate.write lines.map { |l| "#{l}\r\n" }.join
  end
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-render_line_differential"> <a href="#method-i-render_line_differential" title="Link to this method"> <span class="method-name">render_line_differential</span> <span class="method-args">(old_items, new_items)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="render_line_differential-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 406
def render_line_differential(old_items, new_items)
  old_levels = calculate_overlay_levels(old_items.zip(new_items).each_with_index.map {|((x, w, c), (nx, _nw, nc)), i| [x, w, c == nc &amp;&amp; x == nx ? i : -1] if x }.compact)
  new_levels = calculate_overlay_levels(new_items.each_with_index.map { |(x, w), i| [x, w, i] if x }.compact).take(screen_width)
  base_x = 0
  new_levels.zip(old_levels).chunk { |n, o| n == o ? :skip : n || :blank }.each do |level, chunk|
    width = chunk.size
    if level == :skip
      # do nothing
    elsif level == :blank
      Reline::IOGate.move_cursor_column base_x
      Reline::IOGate.write "#{Reline::IOGate.reset_color_sequence}#{' ' * width}"
    else
      x, w, content = new_items[level]
      cover_begin = base_x != 0 &amp;&amp; new_levels[base_x - 1] == level
      cover_end = new_levels[base_x + width] == level
      pos = 0
      unless x == base_x &amp;&amp; w == width
        content, pos = Reline::Unicode.take_mbchar_range(content, base_x - x, width, cover_begin: cover_begin, cover_end: cover_end, padding: true)
      end
      Reline::IOGate.move_cursor_column x + pos
      Reline::IOGate.write "#{Reline::IOGate.reset_color_sequence}#{content}#{Reline::IOGate.reset_color_sequence}"
    end
    base_x += width
  end
  if old_levels.size &gt; new_levels.size
    Reline::IOGate.move_cursor_column new_levels.size
    Reline::IOGate.erase_after_cursor
  end
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-rerender"> <a href="#method-i-rerender" title="Link to this method"> <span class="method-name">rerender</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="rerender-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 564
def rerender
  render unless @in_pasting
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-reset"> <a href="#method-i-reset" title="Link to this method"> <span class="method-name">reset</span> <span class="method-args">(prompt = '')</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="reset-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 141
def reset(prompt = '')
  @screen_size = Reline::IOGate.get_screen_size
  reset_variables(prompt)
  @rendered_screen.base_y = Reline::IOGate.cursor_pos.y
  if ENV.key?('RELINE_ALT_SCROLLBAR')
    @full_block = '::'
    @upper_half_block = "''"
    @lower_half_block = '..'
    @block_elem_width = 2
  elsif Reline::IOGate.win?
    @full_block = '█'
    @upper_half_block = '▀'
    @lower_half_block = '▄'
    @block_elem_width = 1
  elsif encoding == Encoding::UTF_8
    @full_block = '█'
    @upper_half_block = '▀'
    @lower_half_block = '▄'
    @block_elem_width = Reline::Unicode.calculate_width('█')
  else
    @full_block = '::'
    @upper_half_block = "''"
    @lower_half_block = '..'
    @block_elem_width = 2
  end
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-reset_line"> <a href="#method-i-reset_line" title="Link to this method"> <span class="method-name">reset_line</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="reset_line-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 261
def reset_line
  @byte_pointer = 0
  @buffer_of_lines = [String.new(encoding: encoding)]
  @line_index = 0
  @cache.clear
  @line_backup_in_history = nil
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-reset_variables"> <a href="#method-i-reset_variables" title="Link to this method"> <span class="method-name">reset_variables</span> <span class="method-args">(prompt = '')</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="reset_variables-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 224
def reset_variables(prompt = '')
  @prompt = prompt.gsub("\n", "\\n")
  @mark_pointer = nil
  @is_multiline = false
  @finished = false
  @history_pointer = nil
  @kill_ring ||= Reline::KillRing.new
  @vi_clipboard = ''
  @vi_arg = nil
  @waiting_proc = nil
  @vi_waiting_operator = nil
  @vi_waiting_operator_arg = nil
  @completion_journey_state = nil
  @completion_state = CompletionState::NORMAL
  @perfect_matched = nil
  @menu_info = nil
  @searching_prompt = nil
  @just_cursor_moving = false
  @eof = false
  @continuous_insertion_buffer = String.new(encoding: encoding)
  @scroll_partial_screen = 0
  @drop_terminate_spaces = false
  @in_pasting = false
  @auto_indent_proc = nil
  @dialogs = []
  @interrupted = false
  @resized = false
  @cache = {}
  @rendered_screen = RenderedScreen.new(base_y: 0, lines: [], cursor_y: 0)
  @input_lines = [[[""], 0, 0]]
  @input_lines_position = 0
  @restoring = false
  @prev_action_state = NullActionState
  @next_action_state = NullActionState
  reset_line
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-rest_height"> <a href="#method-i-rest_height" title="Link to this method"> <span class="method-name">rest_height</span> <span class="method-args">(wrapped_cursor_y)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="rest_height-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 560
def rest_height(wrapped_cursor_y)
  screen_height - wrapped_cursor_y + screen_scroll_top - @rendered_screen.base_y - 1
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-retrieve_completion_block"> <a href="#method-i-retrieve_completion_block" title="Link to this method"> <span class="method-name">retrieve_completion_block</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="retrieve_completion_block-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1187
def retrieve_completion_block
  quote_characters = Reline.completer_quote_characters
  before = current_line.byteslice(0, @byte_pointer).grapheme_clusters
  quote = nil
  # Calcualte closing quote when cursor is at the end of the line
  if current_line.bytesize == @byte_pointer &amp;&amp; !quote_characters.empty?
    escaped = false
    before.each do |c|
      if escaped
        escaped = false
        next
      elsif c == '\\'
        escaped = true
      elsif quote
        quote = nil if c == quote
      elsif quote_characters.include?(c)
        quote = c
      end
    end
  end

  word_break_characters = quote_characters + Reline.completer_word_break_characters
  break_index = before.rindex { |c| word_break_characters.include?(c) || quote_characters.include?(c) } || -1
  preposing = before.take(break_index + 1).join
  target = before.drop(break_index + 1).join
  postposing = current_line.byteslice(@byte_pointer, current_line.bytesize - @byte_pointer)
  lines = whole_lines
  if @line_index &gt; 0
    preposing = lines[0..(@line_index - 1)].join("\n") + "\n" + preposing
  end
  if (lines.size - 1) &gt; @line_index
    postposing = postposing + "\n" + lines[(@line_index + 1)..-1].join("\n")
  end
  [preposing.encode(encoding), target.encode(encoding), postposing.encode(encoding), quote&amp;.encode(encoding)]
end</pre> </div>  </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-reverse_search_history"> <a href="#method-i-reverse_search_history" title="Link to this method"> <span class="method-name">reverse_search_history</span> <span class="method-args">(key)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="lineeditor.html#method-i-vi_search_prev">vi_search_prev</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-save_old_buffer"> <a href="#method-i-save_old_buffer" title="Link to this method"> <span class="method-name">save_old_buffer</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="save_old_buffer-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1089
def save_old_buffer
  @old_buffer_of_lines = @buffer_of_lines.dup
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-screen_height"> <a href="#method-i-screen_height" title="Link to this method"> <span class="method-name">screen_height</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="screen_height-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 363
def screen_height
  @screen_size.first
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-screen_scroll_top"> <a href="#method-i-screen_scroll_top" title="Link to this method"> <span class="method-name">screen_scroll_top</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="screen_scroll_top-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 371
def screen_scroll_top
  @scroll_partial_screen
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-screen_width"> <a href="#method-i-screen_width" title="Link to this method"> <span class="method-name">screen_width</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="screen_width-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 367
def screen_width
  @screen_size.last
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-scroll_into_view"> <a href="#method-i-scroll_into_view" title="Link to this method"> <span class="method-name">scroll_into_view</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="scroll_into_view-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1112
def scroll_into_view
  _wrapped_cursor_x, wrapped_cursor_y = wrapped_cursor_position
  if wrapped_cursor_y &lt; screen_scroll_top
    @scroll_partial_screen = wrapped_cursor_y
  end
  if wrapped_cursor_y &gt;= screen_scroll_top + screen_height
    @scroll_partial_screen = wrapped_cursor_y - screen_height + 1
  end
end</pre> </div>  </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-self_insert"> <a href="#method-i-self_insert" title="Link to this method"> <span class="method-name">self_insert</span> <span class="method-args">(str)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="lineeditor.html#method-i-ed_insert">ed_insert</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-set_current_line"> <a href="#method-i-set_current_line" title="Link to this method"> <span class="method-name">set_current_line</span> <span class="method-args">(line, byte_pointer = nil)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="set_current_line-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1176
def set_current_line(line, byte_pointer = nil)
  cursor = current_byte_pointer_cursor
  @buffer_of_lines[@line_index] = line
  if byte_pointer
    @byte_pointer = byte_pointer
  else
    calculate_nearest_cursor(cursor)
  end
  process_auto_indent
end</pre> </div>  </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-set_mark"> <a href="#method-i-set_mark" title="Link to this method"> <span class="method-name">set_mark</span> <span class="method-args">(key)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="lineeditor.html#method-i-em_set_mark">em_set_mark</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-set_pasting_state"> <a href="#method-i-set_pasting_state" title="Link to this method"> <span class="method-name">set_pasting_state</span> <span class="method-args">(in_pasting)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="set_pasting_state-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 88
def set_pasting_state(in_pasting)
  # While pasting, text to be inserted is stored to @continuous_insertion_buffer.
  # After pasting, this buffer should be force inserted.
  process_insert(force: true) if @in_pasting &amp;&amp; !in_pasting
  @in_pasting = in_pasting
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-set_signal_handlers"> <a href="#method-i-set_signal_handlers" title="Link to this method"> <span class="method-name">set_signal_handlers</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="set_signal_handlers-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 207
def set_signal_handlers
  Reline::IOGate.set_winch_handler do
    @resized = true
  end
  @old_trap = Signal.trap('INT') do
    @interrupted = true
  end
end</pre> </div>  </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-transpose_chars"> <a href="#method-i-transpose_chars" title="Link to this method"> <span class="method-name">transpose_chars</span> <span class="method-args">(key)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="lineeditor.html#method-i-ed_transpose_chars">ed_transpose_chars</a> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-transpose_words"> <a href="#method-i-transpose_words" title="Link to this method"> <span class="method-name">transpose_words</span> <span class="method-args">(key)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="lineeditor.html#method-i-ed_transpose_words">ed_transpose_words</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-trim_input_lines"> <a href="#method-i-trim_input_lines" title="Link to this method"> <span class="method-name">trim_input_lines</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="trim_input_lines-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1105
def trim_input_lines
  if @input_lines.size &gt; MAX_INPUT_LINES
    @input_lines.shift
    @input_lines_position -= 1
  end
end</pre> </div>  </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-unix_line_discard"> <a href="#method-i-unix_line_discard" title="Link to this method"> <span class="method-name">unix_line_discard</span> <span class="method-args">(key)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="lineeditor.html#method-i-vi_kill_line_prev">vi_kill_line_prev</a> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-unix_word_rubout"> <a href="#method-i-unix_word_rubout" title="Link to this method"> <span class="method-name">unix_word_rubout</span> <span class="method-args">(key)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="lineeditor.html#method-i-em_kill_region">em_kill_region</a> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-upcase_word"> <a href="#method-i-upcase_word" title="Link to this method"> <span class="method-name">upcase_word</span> <span class="method-args">(key)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="lineeditor.html#method-i-em_upper_case">em_upper_case</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-update"> <a href="#method-i-update" title="Link to this method"> <span class="method-name">update</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="update-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1033
def update(key)
  modified = input_key(key)
  unless @in_pasting
    scroll_into_view
    @just_cursor_moving = !modified
    update_dialogs(key)
    @just_cursor_moving = false
  end
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-update_dialogs"> <a href="#method-i-update_dialogs" title="Link to this method"> <span class="method-name">update_dialogs</span> <span class="method-args">(key = nil)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="update_dialogs-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 453
def update_dialogs(key = nil)
  wrapped_cursor_x, wrapped_cursor_y = wrapped_cursor_position
  @dialogs.each do |dialog|
    dialog.trap_key = nil
    update_each_dialog(dialog, wrapped_cursor_x, wrapped_cursor_y - screen_scroll_top, key)
  end
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-upper_space_height"> <a href="#method-i-upper_space_height" title="Link to this method"> <span class="method-name">upper_space_height</span> <span class="method-args">(wrapped_cursor_y)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="upper_space_height-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 556
def upper_space_height(wrapped_cursor_y)
  wrapped_cursor_y - screen_scroll_top
end</pre> </div>  </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-vi_end_of_transmission"> <a href="#method-i-vi_end_of_transmission" title="Link to this method"> <span class="method-name">vi_end_of_transmission</span> <span class="method-args">(key)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="lineeditor.html#method-i-vi_list_or_eof">vi_list_or_eof</a> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-vi_eof_maybe"> <a href="#method-i-vi_eof_maybe" title="Link to this method"> <span class="method-name">vi_eof_maybe</span> <span class="method-args">(key)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="lineeditor.html#method-i-vi_list_or_eof">vi_list_or_eof</a> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-vi_movement_mode"> <a href="#method-i-vi_movement_mode" title="Link to this method"> <span class="method-name">vi_movement_mode</span> <span class="method-args">(key)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="lineeditor.html#method-i-vi_command_mode">vi_command_mode</a> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-vi_zero"> <a href="#method-i-vi_zero" title="Link to this method"> <span class="method-name">vi_zero</span> <span class="method-args">(key)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="lineeditor.html#method-i-ed_move_to_beg">ed_move_to_beg</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-whole_buffer"> <a href="#method-i-whole_buffer" title="Link to this method"> <span class="method-name">whole_buffer</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="whole_buffer-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1290
def whole_buffer
  whole_lines.join("\n")
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-whole_lines"> <a href="#method-i-whole_lines" title="Link to this method"> <span class="method-name">whole_lines</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="whole_lines-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1286
def whole_lines
  @buffer_of_lines.dup
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-with_cache"> <a href="#method-i-with_cache" title="Link to this method"> <span class="method-name">with_cache</span> <span class="method-args">(key, *deps) { |*deps, cached_deps, value| ... }</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="with_cache-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 343
def with_cache(key, *deps)
  cached_deps, value = @cache[key]
  if cached_deps != deps
    @cache[key] = [deps, value = yield(*deps, cached_deps, value)]
  end
  value
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-wrap_method_call"> <a href="#method-i-wrap_method_call" title="Link to this method"> <span class="method-name">wrap_method_call</span> <span class="method-args">(method_symbol, method_obj, key, with_operator = false)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="wrap_method_call-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 948
def wrap_method_call(method_symbol, method_obj, key, with_operator = false)
  if @config.editing_mode_is?(:emacs, :vi_insert) and @vi_waiting_operator.nil?
    not_insertion = method_symbol != :ed_insert
    process_insert(force: not_insertion)
  end
  if @vi_arg and argumentable?(method_obj)
    if with_operator and inclusive?(method_obj)
      method_obj.(key, arg: @vi_arg, inclusive: true)
    else
      method_obj.(key, arg: @vi_arg)
    end
  else
    if with_operator and inclusive?(method_obj)
      method_obj.(key, inclusive: true)
    else
      method_obj.(key)
    end
  end
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-wrapped_cursor_position"> <a href="#method-i-wrapped_cursor_position" title="Link to this method"> <span class="method-name">wrapped_cursor_position</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="wrapped_cursor_position-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 437
def wrapped_cursor_position
  prompt_width = calculate_width(prompt_list[@line_index], true)
  line_before_cursor = Reline::Unicode.escape_for_print(whole_lines[@line_index].byteslice(0, @byte_pointer))
  wrapped_line_before_cursor = split_line_by_width(' ' * prompt_width + line_before_cursor, screen_width)
  wrapped_cursor_y = wrapped_prompt_and_input_lines[0...@line_index].sum(&amp;:size) + wrapped_line_before_cursor.size - 1
  wrapped_cursor_x = calculate_width(wrapped_line_before_cursor.last)
  [wrapped_cursor_x, wrapped_cursor_y]
end</pre> </div>  <p>Calculate cursor position in word wrapped content.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-wrapped_prompt_and_input_lines"> <a href="#method-i-wrapped_prompt_and_input_lines" title="Link to this method"> <span class="method-name">wrapped_prompt_and_input_lines</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="wrapped_prompt_and_input_lines-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 375
def wrapped_prompt_and_input_lines
  with_cache(__method__, @buffer_of_lines.size, modified_lines, prompt_list, screen_width) do |n, lines, prompts, width, prev_cache_key, cached_value|
    prev_n, prev_lines, prev_prompts, prev_width = prev_cache_key
    cached_wraps = {}
    if prev_width == width
      prev_n.times do |i|
        cached_wraps[[prev_prompts[i], prev_lines[i]]] = cached_value[i]
      end
    end

    n.times.map do |i|
      prompt = prompts[i] || ''
      line = lines[i] || ''
      if (cached = cached_wraps[[prompt, line]])
        next cached
      end
      *wrapped_prompts, code_line_prompt = split_line_by_width(prompt, width)
      wrapped_lines = split_line_by_width(line, width, offset: calculate_width(code_line_prompt, true))
      wrapped_prompts.map { |p| [p, ''] } + [[code_line_prompt, wrapped_lines.first]] + wrapped_lines.drop(1).map { |c| ['', c] }
    end
  end
end</pre> </div>  </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-yank"> <a href="#method-i-yank" title="Link to this method"> <span class="method-name">yank</span> <span class="method-args">(key)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="lineeditor.html#method-i-em_yank">em_yank</a> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-yank_pop"> <a href="#method-i-yank_pop" title="Link to this method"> <span class="method-name">yank_pop</span> <span class="method-args">(key)</span> </a> </div> </div>  <div class="aliases"> Alias for: <a href="lineeditor.html#method-i-em_yank_pop">em_yank_pop</a> </div> </div> </section> <section id="private-instance-5Buntitled-5D-method-details" class="method-section anchor-link"> <header> <h3>Private Instance Methods</h3> </header> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-argumentable-3F"> <a href="#method-i-argumentable-3F" title="Link to this method"> <span class="method-name">argumentable?</span> <span class="method-args">(method_obj)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="argumentable-3F-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 938
        def argumentable?(method_obj)
  method_obj and method_obj.parameters.any? { |param| param[0] == :key and param[1] == :arg }
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-buffer_empty-3F"> <a href="#method-i-buffer_empty-3F" title="Link to this method"> <span class="method-name">buffer_empty?</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="buffer_empty-3F-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1294
        def buffer_empty?
  current_line.empty? and @buffer_of_lines.size == 1
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-byteinsert"> <a href="#method-i-byteinsert" title="Link to this method"> <span class="method-name">byteinsert</span> <span class="method-args">(str, byte_pointer, other)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="byteinsert-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1313
        def byteinsert(str, byte_pointer, other)
  new_str = str.byteslice(0, byte_pointer)
  new_str &lt;&lt; other
  new_str &lt;&lt; str.byteslice(byte_pointer, str.bytesize)
  new_str
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-byteslice-21"> <a href="#method-i-byteslice-21" title="Link to this method"> <span class="method-name">byteslice!</span> <span class="method-args">(str, byte_pointer, size)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="byteslice-21-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1307
        def byteslice!(str, byte_pointer, size)
  new_str = str.byteslice(0, byte_pointer)
  new_str &lt;&lt; str.byteslice(byte_pointer + size, str.bytesize)
  [new_str, str.byteslice(byte_pointer, size)]
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-calculate_nearest_cursor"> <a href="#method-i-calculate_nearest_cursor" title="Link to this method"> <span class="method-name">calculate_nearest_cursor</span> <span class="method-args">(cursor)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="calculate_nearest_cursor-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 308
        def calculate_nearest_cursor(cursor)
  line_to_calc = current_line
  new_cursor_max = calculate_width(line_to_calc)
  new_cursor = 0
  new_byte_pointer = 0
  height = 1
  max_width = screen_width
  if @config.editing_mode_is?(:vi_command)
    last_byte_size = Reline::Unicode.get_prev_mbchar_size(line_to_calc, line_to_calc.bytesize)
    if last_byte_size &gt; 0
      last_mbchar = line_to_calc.byteslice(line_to_calc.bytesize - last_byte_size, last_byte_size)
      last_width = Reline::Unicode.get_mbchar_width(last_mbchar)
      end_of_line_cursor = new_cursor_max - last_width
    else
    end_of_line_cursor = new_cursor_max
    end
  else
  end_of_line_cursor = new_cursor_max
  end
  line_to_calc.grapheme_clusters.each do |gc|
    mbchar = gc.encode(Encoding::UTF_8)
    mbchar_width = Reline::Unicode.get_mbchar_width(mbchar)
    now = new_cursor + mbchar_width
    if now &gt; end_of_line_cursor or now &gt; cursor
      break
    end
    new_cursor += mbchar_width
    if new_cursor &gt; max_width * height
      height += 1
    end
    new_byte_pointer += gc.bytesize
  end
  @byte_pointer = new_byte_pointer
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-calculate_width"> <a href="#method-i-calculate_width" title="Link to this method"> <span class="method-name">calculate_width</span> <span class="method-args">(str, allow_escape_code = false)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="calculate_width-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1320
        def calculate_width(str, allow_escape_code = false)
  Reline::Unicode.calculate_width(str, allow_escape_code)
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-check_mode_string"> <a href="#method-i-check_mode_string" title="Link to this method"> <span class="method-name">check_mode_string</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="check_mode_string-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 95
        def check_mode_string
  if @config.show_mode_in_prompt
    if @config.editing_mode_is?(:vi_command)
      @config.vi_cmd_mode_string
    elsif @config.editing_mode_is?(:vi_insert)
      @config.vi_ins_mode_string
    elsif @config.editing_mode_is?(:emacs)
      @config.emacs_mode_string
    else
      '?'
    end
  end
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-check_multiline_prompt"> <a href="#method-i-check_multiline_prompt" title="Link to this method"> <span class="method-name">check_multiline_prompt</span> <span class="method-args">(buffer, mode_string)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="check_multiline_prompt-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 109
        def check_multiline_prompt(buffer, mode_string)
  if @vi_arg
    prompt = "(arg: #{@vi_arg}) "
  elsif @searching_prompt
    prompt = @searching_prompt
  else
    prompt = @prompt
  end
  if !@is_multiline
    mode_string = check_mode_string
    prompt = mode_string + prompt if mode_string
    [prompt] + [''] * (buffer.size - 1)
  elsif @prompt_proc
    prompt_list = @prompt_proc.(buffer).map { |pr| pr.gsub("\n", "\\n") }
    prompt_list.map!{ prompt } if @vi_arg or @searching_prompt
    prompt_list = [prompt] if prompt_list.empty?
    prompt_list = prompt_list.map{ |pr| mode_string + pr } if mode_string
    prompt = prompt_list[@line_index]
    prompt = prompt_list[0] if prompt.nil?
    prompt = prompt_list.last if prompt.nil?
    if buffer.size &gt; prompt_list.size
      (buffer.size - prompt_list.size).times do
        prompt_list &lt;&lt; prompt_list.last
      end
    end
    prompt_list
  else
    prompt = mode_string + prompt if mode_string
    [prompt] * buffer.size
  end
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-cleanup_waiting"> <a href="#method-i-cleanup_waiting" title="Link to this method"> <span class="method-name">cleanup_waiting</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="cleanup_waiting-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 968
        def cleanup_waiting
  @waiting_proc = nil
  @vi_waiting_operator = nil
  @vi_waiting_operator_arg = nil
  @searching_prompt = nil
  @drop_terminate_spaces = false
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-clear_rendered_screen_cache"> <a href="#method-i-clear_rendered_screen_cache" title="Link to this method"> <span class="method-name">clear_rendered_screen_cache</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="clear_rendered_screen_cache-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 551
        def clear_rendered_screen_cache
  @rendered_screen.lines = []
  @rendered_screen.cursor_y = 0
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-complete"> <a href="#method-i-complete" title="Link to this method"> <span class="method-name">complete</span> <span class="method-args">(_key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="complete-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1340
        def complete(_key)
  return if @config.disable_completion

  process_insert(force: true)
  if @config.autocompletion
    @completion_state = CompletionState::NORMAL
    @completion_occurs = move_completed_list(:down)
  else
    @completion_journey_state = nil
    pre, target, post, quote = retrieve_completion_block
    result = call_completion_proc(pre, target, post, quote)
    if result.is_a?(Array)
      @completion_occurs = true
      perform_completion(pre, target, post, quote, result)
    end
  end
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-completion_journey_move"> <a href="#method-i-completion_journey_move" title="Link to this method"> <span class="method-name">completion_journey_move</span> <span class="method-args">(direction)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="completion_journey_move-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1358
        def completion_journey_move(direction)
  return if @config.disable_completion

  process_insert(force: true)
  @completion_state = CompletionState::NORMAL
  @completion_occurs = move_completed_list(direction)
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-completion_journey_up"> <a href="#method-i-completion_journey_up" title="Link to this method"> <span class="method-name">completion_journey_up</span> <span class="method-args">(_key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="completion_journey_up-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1374
        def completion_journey_up(_key)
  completion_journey_move(:up) if @config.autocompletion
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-copy_for_vi"> <a href="#method-i-copy_for_vi" title="Link to this method"> <span class="method-name">copy_for_vi</span> <span class="method-args">(text)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="copy_for_vi-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1942
        def copy_for_vi(text)
  if @config.editing_mode_is?(:vi_insert) or @config.editing_mode_is?(:vi_command)
    @vi_clipboard = text
  end
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-dialog_range"> <a href="#method-i-dialog_range" title="Link to this method"> <span class="method-name">dialog_range</span> <span class="method-args">(dialog, dialog_y)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="dialog_range-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 703
        def dialog_range(dialog, dialog_y)
  x_range = dialog.column...dialog.column + dialog.width
  y_range = dialog_y + dialog.vertical_offset...dialog_y + dialog.vertical_offset + dialog.contents.size
  [x_range, y_range]
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-ed_argument_digit"> <a href="#method-i-ed_argument_digit" title="Link to this method"> <span class="method-name">ed_argument_digit</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="ed_argument_digit-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2195
        def ed_argument_digit(key)
  # key is expected to be `ESC digit` or `digit`
  num = key[/\d/].to_i
  @vi_arg = (@vi_arg || 0) * 10 + num
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-ed_clear_screen"> <a href="#method-i-ed_clear_screen" title="Link to this method"> <span class="method-name">ed_clear_screen</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="ed_clear_screen-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1822
        def ed_clear_screen(key)
  Reline::IOGate.clear_screen
  @screen_size = Reline::IOGate.get_screen_size
  @rendered_screen.base_y = 0
  clear_rendered_screen_cache
end</pre> </div>  </div> <div class="aliases"> Also aliased as: <a href="lineeditor.html#method-i-clear_screen">clear_screen</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-ed_delete_next_char"> <a href="#method-i-ed_delete_next_char" title="Link to this method"> <span class="method-name">ed_delete_next_char</span> <span class="method-args">(key, arg: 1)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="ed_delete_next_char-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2141
        def ed_delete_next_char(key, arg: 1)
  byte_size = Reline::Unicode.get_next_mbchar_size(current_line, @byte_pointer)
  unless current_line.empty? || byte_size == 0
    line, mbchar = byteslice!(current_line, @byte_pointer, byte_size)
    copy_for_vi(mbchar)
    if @byte_pointer &gt; 0 &amp;&amp; current_line.bytesize == @byte_pointer + byte_size
      byte_size = Reline::Unicode.get_prev_mbchar_size(line, @byte_pointer)
      set_current_line(line, @byte_pointer - byte_size)
    else
      set_current_line(line, @byte_pointer)
    end
  end
  arg -= 1
  ed_delete_next_char(key, arg: arg) if arg &gt; 0
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-ed_delete_prev_char"> <a href="#method-i-ed_delete_prev_char" title="Link to this method"> <span class="method-name">ed_delete_prev_char</span> <span class="method-args">(key, arg: 1)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="ed_delete_prev_char-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2053
        def ed_delete_prev_char(key, arg: 1)
  deleted = +''
  arg.times do
    if @byte_pointer &gt; 0
      byte_size = Reline::Unicode.get_prev_mbchar_size(current_line, @byte_pointer)
      @byte_pointer -= byte_size
      line, mbchar = byteslice!(current_line, @byte_pointer, byte_size)
      set_current_line(line)
      deleted.prepend(mbchar)
    end
  end
  copy_for_vi(deleted)
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-ed_delete_prev_word"> <a href="#method-i-ed_delete_prev_word" title="Link to this method"> <span class="method-name">ed_delete_prev_word</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="ed_delete_prev_word-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1856
        def ed_delete_prev_word(key)
  if @byte_pointer &gt; 0
    byte_size = Reline::Unicode.em_backward_word(current_line, @byte_pointer)
    line, word = byteslice!(current_line, @byte_pointer - byte_size, byte_size)
    set_current_line(line, @byte_pointer - byte_size)
    @kill_ring.append(word, true)
  end
end</pre> </div>  </div> <div class="aliases"> Also aliased as: <a href="lineeditor.html#method-i-backward_kill_word">backward_kill_word</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-ed_insert"> <a href="#method-i-ed_insert" title="Link to this method"> <span class="method-name">ed_insert</span> <span class="method-args">(str)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="ed_insert-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1401
        def ed_insert(str)
  begin
    str.encode(Encoding::UTF_8)
  rescue Encoding::UndefinedConversionError
    return
  end
  if @in_pasting
    @continuous_insertion_buffer &lt;&lt; str
    return
  elsif not @continuous_insertion_buffer.empty?
    process_insert
  end

  insert_text(str)
end</pre> </div>  <dl class="rdoc-list note-list">
<dt>Editline</dt> <dd> <p><code>ed-insert</code> (vi input: almost all; emacs: printable characters) In insert mode, insert the input character left of the cursor position. In replace mode, overwrite the character at the cursor and move the cursor to the right by one character position. Accept an argument to do this repeatedly. It is an error if the input character is the NUL character (<code>Ctrl-@</code>). Failure to enlarge the edit buffer also results in an error.</p> </dd>
<dt>Editline</dt> <dd> <p><code>ed-digit</code> (emacs: 0 to 9) If in argument input mode, append the input digit to the argument being read. Otherwise, call <code>ed-insert</code>. It is an error if the input character is not a digit or if the existing argument is already greater than a million.</p> </dd>
<dt>GNU <a href="../readline.html"><code>Readline</code></a>
</dt> <dd> <p><code>self-insert</code> (a, b, A, 1, !, …) Insert yourself.</p> </dd>
</dl> </div> <div class="aliases"> Also aliased as: <a href="lineeditor.html#method-i-ed_digit">ed_digit</a>, <a href="lineeditor.html#method-i-self_insert">self_insert</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-ed_kill_line"> <a href="#method-i-ed_kill_line" title="Link to this method"> <span class="method-name">ed_kill_line</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="ed_kill_line-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1733
        def ed_kill_line(key)
  if current_line.bytesize &gt; @byte_pointer
    line, deleted = byteslice!(current_line, @byte_pointer, current_line.bytesize - @byte_pointer)
    set_current_line(line, line.bytesize)
    @kill_ring.append(deleted)
  elsif @byte_pointer == current_line.bytesize and @buffer_of_lines.size &gt; @line_index + 1
    set_current_line(current_line + @buffer_of_lines.delete_at(@line_index + 1), current_line.bytesize)
  end
end</pre> </div>  <dl class="rdoc-list note-list">
<dt>Editline</dt> <dd> <p><code>ed-kill-line</code> (vi command: <code>D</code>, <code>Ctrl-K</code>; emacs: <code>Ctrl-K</code>, <code>Ctrl-U</code>) + Kill from the cursor to the end of the line.</p> </dd>
<dt>GNU <a href="../readline.html"><code>Readline</code></a>
</dt> <dd> <p><code>kill-line</code> (<code>C-k</code>) Kill the text from point to the end of the line. With a negative numeric argument, kill backward from the cursor to the beginning of the current line.</p> </dd>
</dl> </div> <div class="aliases"> Also aliased as: <a href="lineeditor.html#method-i-kill_line">kill_line</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-ed_move_to_beg"> <a href="#method-i-ed_move_to_beg" title="Link to this method"> <span class="method-name">ed_move_to_beg</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="ed_move_to_beg-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1460
        def ed_move_to_beg(key)
  @byte_pointer = 0
end</pre> </div>  </div> <div class="aliases"> Also aliased as: <a href="lineeditor.html#method-i-beginning_of_line">beginning_of_line</a>, <a href="lineeditor.html#method-i-vi_zero">vi_zero</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-ed_move_to_end"> <a href="#method-i-ed_move_to_end" title="Link to this method"> <span class="method-name">ed_move_to_end</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="ed_move_to_end-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1466
        def ed_move_to_end(key)
  @byte_pointer = current_line.bytesize
end</pre> </div>  </div> <div class="aliases"> Also aliased as: <a href="lineeditor.html#method-i-end_of_line">end_of_line</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-ed_newline"> <a href="#method-i-ed_newline" title="Link to this method"> <span class="method-name">ed_newline</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="ed_newline-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1683
        def ed_newline(key)
  process_insert(force: true)
  if @is_multiline
    if @config.editing_mode_is?(:vi_command)
      if @line_index &lt; (@buffer_of_lines.size - 1)
        ed_next_history(key) # means cursor down
      else
        # should check confirm_multiline_termination to finish?
        finish
      end
    else
      if @line_index == (@buffer_of_lines.size - 1)
        if confirm_multiline_termination
          finish
        else
          key_newline(key)
        end
      else
        # should check confirm_multiline_termination to finish?
        @line_index = @buffer_of_lines.size - 1
        @byte_pointer = current_line.bytesize
        finish
      end
    end
  else
    finish
  end
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-ed_next_char"> <a href="#method-i-ed_next_char" title="Link to this method"> <span class="method-name">ed_next_char</span> <span class="method-args">(key, arg: 1)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="ed_next_char-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1430
        def ed_next_char(key, arg: 1)
  byte_size = Reline::Unicode.get_next_mbchar_size(current_line, @byte_pointer)
  if (@byte_pointer &lt; current_line.bytesize)
    @byte_pointer += byte_size
  elsif @config.editing_mode_is?(:emacs) and @byte_pointer == current_line.bytesize and @line_index &lt; @buffer_of_lines.size - 1
    @byte_pointer = 0
    @line_index += 1
  end
  arg -= 1
  ed_next_char(key, arg: arg) if arg &gt; 0
end</pre> </div>  </div> <div class="aliases"> Also aliased as: <a href="lineeditor.html#method-i-forward_char">forward_char</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-ed_next_history"> <a href="#method-i-ed_next_history" title="Link to this method"> <span class="method-name">ed_next_history</span> <span class="method-args">(key, arg: 1)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="ed_next_history-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1666
        def ed_next_history(key, arg: 1)
  if @line_index &lt; (@buffer_of_lines.size - 1)
    cursor = current_byte_pointer_cursor
    @line_index += 1
    calculate_nearest_cursor(cursor)
    return
  end
  move_history(
    (@history_pointer || Reline::HISTORY.size) + 1,
    line: :start,
    cursor: @config.editing_mode_is?(:vi_command) ? :start : :end,
  )
  arg -= 1
  ed_next_history(key, arg: arg) if arg &gt; 0
end</pre> </div>  </div> <div class="aliases"> Also aliased as: <a href="lineeditor.html#method-i-next_history">next_history</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-ed_prev_char"> <a href="#method-i-ed_prev_char" title="Link to this method"> <span class="method-name">ed_prev_char</span> <span class="method-args">(key, arg: 1)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="ed_prev_char-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1443
        def ed_prev_char(key, arg: 1)
  if @byte_pointer &gt; 0
    byte_size = Reline::Unicode.get_prev_mbchar_size(current_line, @byte_pointer)
    @byte_pointer -= byte_size
  elsif @config.editing_mode_is?(:emacs) and @byte_pointer == 0 and @line_index &gt; 0
    @line_index -= 1
    @byte_pointer = current_line.bytesize
  end
  arg -= 1
  ed_prev_char(key, arg: arg) if arg &gt; 0
end</pre> </div>  </div> <div class="aliases"> Also aliased as: <a href="lineeditor.html#method-i-backward_char">backward_char</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-ed_prev_history"> <a href="#method-i-ed_prev_history" title="Link to this method"> <span class="method-name">ed_prev_history</span> <span class="method-args">(key, arg: 1)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="ed_prev_history-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1649
        def ed_prev_history(key, arg: 1)
  if @line_index &gt; 0
    cursor = current_byte_pointer_cursor
    @line_index -= 1
    calculate_nearest_cursor(cursor)
    return
  end
  move_history(
    (@history_pointer || Reline::HISTORY.size) - 1,
    line: :end,
    cursor: @config.editing_mode_is?(:vi_command) ? :start : :end,
  )
  arg -= 1
  ed_prev_history(key, arg: arg) if arg &gt; 0
end</pre> </div>  </div> <div class="aliases"> Also aliased as: <a href="lineeditor.html#method-i-previous_history">previous_history</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-ed_prev_word"> <a href="#method-i-ed_prev_word" title="Link to this method"> <span class="method-name">ed_prev_word</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="ed_prev_word-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1838
        def ed_prev_word(key)
  if @byte_pointer &gt; 0
    byte_size = Reline::Unicode.em_backward_word(current_line, @byte_pointer)
    @byte_pointer -= byte_size
  end
end</pre> </div>  </div> <div class="aliases"> Also aliased as: <a href="lineeditor.html#method-i-backward_word">backward_word</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-ed_search_next_history"> <a href="#method-i-ed_search_next_history" title="Link to this method"> <span class="method-name">ed_search_next_history</span> <span class="method-args">(key, arg: 1)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="ed_search_next_history-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1612
        def ed_search_next_history(key, arg: 1)
  substr = prev_action_state_value(:search_history) == :empty ? '' : current_line.byteslice(0, @byte_pointer)
  return if @history_pointer.nil?

  history_range = @history_pointer + 1...Reline::HISTORY.size
  h_pointer, line_index = search_history(substr, history_range)
  return if h_pointer.nil? and not substr.empty?

  move_history(h_pointer, line: line_index || :start, cursor: substr.empty? ? :end : @byte_pointer)
  arg -= 1
  set_next_action_state(:search_history, :empty) if substr.empty?
  ed_search_next_history(key, arg: arg) if arg &gt; 0
end</pre> </div>  </div> <div class="aliases"> Also aliased as: <a href="lineeditor.html#method-i-history_search_forward">history_search_forward</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-ed_search_prev_history"> <a href="#method-i-ed_search_prev_history" title="Link to this method"> <span class="method-name">ed_search_prev_history</span> <span class="method-args">(key, arg: 1)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="ed_search_prev_history-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1597
        def ed_search_prev_history(key, arg: 1)
  substr = prev_action_state_value(:search_history) == :empty ? '' : current_line.byteslice(0, @byte_pointer)
  return if @history_pointer == 0
  return if @history_pointer.nil? &amp;&amp; substr.empty? &amp;&amp; !current_line.empty?

  history_range = 0...(@history_pointer || Reline::HISTORY.size)
  h_pointer, line_index = search_history(substr, history_range.reverse_each)
  return unless h_pointer
  move_history(h_pointer, line: line_index || :start, cursor: substr.empty? ? :end : @byte_pointer)
  arg -= 1
  set_next_action_state(:search_history, :empty) if substr.empty?
  ed_search_prev_history(key, arg: arg) if arg &gt; 0
end</pre> </div>  </div> <div class="aliases"> Also aliased as: <a href="lineeditor.html#method-i-history_search_backward">history_search_backward</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-ed_transpose_chars"> <a href="#method-i-ed_transpose_chars" title="Link to this method"> <span class="method-name">ed_transpose_chars</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="ed_transpose_chars-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1866
        def ed_transpose_chars(key)
  if @byte_pointer &gt; 0
    if @byte_pointer &lt; current_line.bytesize
      byte_size = Reline::Unicode.get_next_mbchar_size(current_line, @byte_pointer)
      @byte_pointer += byte_size
    end
    back1_byte_size = Reline::Unicode.get_prev_mbchar_size(current_line, @byte_pointer)
    if (@byte_pointer - back1_byte_size) &gt; 0
      back2_byte_size = Reline::Unicode.get_prev_mbchar_size(current_line, @byte_pointer - back1_byte_size)
      back2_pointer = @byte_pointer - back1_byte_size - back2_byte_size
      line, back2_mbchar = byteslice!(current_line, back2_pointer, back2_byte_size)
      set_current_line(byteinsert(line, @byte_pointer - back2_byte_size, back2_mbchar))
    end
  end
end</pre> </div>  </div> <div class="aliases"> Also aliased as: <a href="lineeditor.html#method-i-transpose_chars">transpose_chars</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-ed_transpose_words"> <a href="#method-i-ed_transpose_words" title="Link to this method"> <span class="method-name">ed_transpose_words</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="ed_transpose_words-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1883
        def ed_transpose_words(key)
  left_word_start, middle_start, right_word_start, after_start = Reline::Unicode.ed_transpose_words(current_line, @byte_pointer)
  before = current_line.byteslice(0, left_word_start)
  left_word = current_line.byteslice(left_word_start, middle_start - left_word_start)
  middle = current_line.byteslice(middle_start, right_word_start - middle_start)
  right_word = current_line.byteslice(right_word_start, after_start - right_word_start)
  after = current_line.byteslice(after_start, current_line.bytesize - after_start)
  return if left_word.empty? or right_word.empty?
  from_head_to_left_word = before + right_word + middle + left_word
  set_current_line(from_head_to_left_word + after, from_head_to_left_word.bytesize)
end</pre> </div>  </div> <div class="aliases"> Also aliased as: <a href="lineeditor.html#method-i-transpose_words">transpose_words</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-ed_unassigned"> <a href="#method-i-ed_unassigned" title="Link to this method"> <span class="method-name">ed_unassigned</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="ed_unassigned-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1380
def ed_unassigned(key) end</pre> </div>  <dl class="rdoc-list note-list">
<dt>Editline</dt> <dd> <p><code>ed-unassigned</code> This editor command always results in an error.</p> </dd>
<dt>GNU <a href="../readline.html"><code>Readline</code></a>
</dt> <dd> <p>There is no corresponding macro.</p> </dd>
</dl> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-em_capitol_case"> <a href="#method-i-em_capitol_case" title="Link to this method"> <span class="method-name">em_capitol_case</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="em_capitol_case-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1896
        def em_capitol_case(key)
  if current_line.bytesize &gt; @byte_pointer
    byte_size, new_str = Reline::Unicode.em_forward_word_with_capitalization(current_line, @byte_pointer)
    before = current_line.byteslice(0, @byte_pointer)
    after = current_line.byteslice((@byte_pointer + byte_size)..-1)
    set_current_line(before + new_str + after, @byte_pointer + new_str.bytesize)
  end
end</pre> </div>  </div> <div class="aliases"> Also aliased as: <a href="lineeditor.html#method-i-capitalize_word">capitalize_word</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-em_delete"> <a href="#method-i-em_delete" title="Link to this method"> <span class="method-name">em_delete</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="em_delete-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1777
        def em_delete(key)
  if buffer_empty? and key == "\C-d"
    @eof = true
    finish
  elsif @byte_pointer &lt; current_line.bytesize
    splitted_last = current_line.byteslice(@byte_pointer, current_line.bytesize)
    mbchar = splitted_last.grapheme_clusters.first
    line, = byteslice!(current_line, @byte_pointer, mbchar.bytesize)
    set_current_line(line)
  elsif @byte_pointer == current_line.bytesize and @buffer_of_lines.size &gt; @line_index + 1
    set_current_line(current_line + @buffer_of_lines.delete_at(@line_index + 1), current_line.bytesize)
  end
end</pre> </div>  </div> <div class="aliases"> Also aliased as: <a href="lineeditor.html#method-i-delete_char">delete_char</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-em_delete_next_word"> <a href="#method-i-em_delete_next_word" title="Link to this method"> <span class="method-name">em_delete_next_word</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="em_delete_next_word-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1846
        def em_delete_next_word(key)
  if current_line.bytesize &gt; @byte_pointer
    byte_size = Reline::Unicode.em_forward_word(current_line, @byte_pointer)
    line, word = byteslice!(current_line, @byte_pointer, byte_size)
    set_current_line(line)
    @kill_ring.append(word)
  end
end</pre> </div>  </div> <div class="aliases"> Also aliased as: <a href="lineeditor.html#method-i-kill_word">kill_word</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-em_delete_or_list"> <a href="#method-i-em_delete_or_list" title="Link to this method"> <span class="method-name">em_delete_or_list</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="em_delete_or_list-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1792
        def em_delete_or_list(key)
  if current_line.empty? or @byte_pointer &lt; current_line.bytesize
    em_delete(key)
  elsif !@config.autocompletion # show completed list
    pre, target, post, quote = retrieve_completion_block
    result = call_completion_proc(pre, target, post, quote)
    if result.is_a?(Array)
      candidates = filter_normalize_candidates(target, result)
      menu(candidates)
    end
  end
end</pre> </div>  </div> <div class="aliases"> Also aliased as: <a href="lineeditor.html#method-i-delete_char_or_list">delete_char_or_list</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-em_delete_prev_char"> <a href="#method-i-em_delete_prev_char" title="Link to this method"> <span class="method-name">em_delete_prev_char</span> <span class="method-args">(key, arg: 1)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="em_delete_prev_char-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1712
        def em_delete_prev_char(key, arg: 1)
  arg.times do
    if @byte_pointer == 0 and @line_index &gt; 0
      @byte_pointer = @buffer_of_lines[@line_index - 1].bytesize
      @buffer_of_lines[@line_index - 1] += @buffer_of_lines.delete_at(@line_index)
      @line_index -= 1
    elsif @byte_pointer &gt; 0
      byte_size = Reline::Unicode.get_prev_mbchar_size(current_line, @byte_pointer)
      line, = byteslice!(current_line, @byte_pointer - byte_size, byte_size)
      set_current_line(line, @byte_pointer - byte_size)
    end
  end
  process_auto_indent
end</pre> </div>  </div> <div class="aliases"> Also aliased as: <a href="lineeditor.html#method-i-backward_delete_char">backward_delete_char</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-em_exchange_mark"> <a href="#method-i-em_exchange_mark" title="Link to this method"> <span class="method-name">em_exchange_mark</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="em_exchange_mark-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2336
        def em_exchange_mark(key)
  return unless @mark_pointer
  new_pointer = [@byte_pointer, @line_index]
  @byte_pointer, @line_index = @mark_pointer
  @mark_pointer = new_pointer
end</pre> </div>  </div> <div class="aliases"> Also aliased as: <a href="lineeditor.html#method-i-exchange_point_and_mark">exchange_point_and_mark</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-em_kill_line"> <a href="#method-i-em_kill_line" title="Link to this method"> <span class="method-name">em_kill_line</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="em_kill_line-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1769
        def em_kill_line(key)
  if current_line.size &gt; 0
    @kill_ring.append(current_line.dup, true)
    set_current_line('', 0)
  end
end</pre> </div>  <dl class="rdoc-list note-list">
<dt>Editline</dt> <dd> <p><code>em-kill-line</code> (not bound) Delete the entire contents of the edit buffer and save it to the cut buffer. <code>vi-kill-line-prev</code></p> </dd>
<dt>GNU <a href="../readline.html"><code>Readline</code></a>
</dt> <dd> <p><code>kill-whole-line</code> (not bound) Kill all characters on the current line, no matter where point is.</p> </dd>
</dl> </div> <div class="aliases"> Also aliased as: <a href="lineeditor.html#method-i-kill_whole_line">kill_whole_line</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-em_kill_region"> <a href="#method-i-em_kill_region" title="Link to this method"> <span class="method-name">em_kill_region</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="em_kill_region-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1932
        def em_kill_region(key)
  if @byte_pointer &gt; 0
    byte_size = Reline::Unicode.em_big_backward_word(current_line, @byte_pointer)
    line, deleted = byteslice!(current_line, @byte_pointer - byte_size, byte_size)
    set_current_line(line, @byte_pointer - byte_size)
    @kill_ring.append(deleted, true)
  end
end</pre> </div>  </div> <div class="aliases"> Also aliased as: <a href="lineeditor.html#method-i-unix_word_rubout">unix_word_rubout</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-em_lower_case"> <a href="#method-i-em_lower_case" title="Link to this method"> <span class="method-name">em_lower_case</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="em_lower_case-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1906
        def em_lower_case(key)
  if current_line.bytesize &gt; @byte_pointer
    byte_size = Reline::Unicode.em_forward_word(current_line, @byte_pointer)
    part = current_line.byteslice(@byte_pointer, byte_size).grapheme_clusters.map { |mbchar|
      mbchar =~ /[A-Z]/ ? mbchar.downcase : mbchar
    }.join
    rest = current_line.byteslice((@byte_pointer + byte_size)..-1)
    line = current_line.byteslice(0, @byte_pointer) + part
    set_current_line(line + rest, line.bytesize)
  end
end</pre> </div>  </div> <div class="aliases"> Also aliased as: <a href="lineeditor.html#method-i-downcase_word">downcase_word</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-em_next_word"> <a href="#method-i-em_next_word" title="Link to this method"> <span class="method-name">em_next_word</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="em_next_word-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1830
        def em_next_word(key)
  if current_line.bytesize &gt; @byte_pointer
    byte_size = Reline::Unicode.em_forward_word(current_line, @byte_pointer)
    @byte_pointer += byte_size
  end
end</pre> </div>  </div> <div class="aliases"> Also aliased as: <a href="lineeditor.html#method-i-forward_word">forward_word</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-em_set_mark"> <a href="#method-i-em_set_mark" title="Link to this method"> <span class="method-name">em_set_mark</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="em_set_mark-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2331
        def em_set_mark(key)
  @mark_pointer = [@byte_pointer, @line_index]
end</pre> </div>  </div> <div class="aliases"> Also aliased as: <a href="lineeditor.html#method-i-set_mark">set_mark</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-em_upper_case"> <a href="#method-i-em_upper_case" title="Link to this method"> <span class="method-name">em_upper_case</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="em_upper_case-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1919
        def em_upper_case(key)
  if current_line.bytesize &gt; @byte_pointer
    byte_size = Reline::Unicode.em_forward_word(current_line, @byte_pointer)
    part = current_line.byteslice(@byte_pointer, byte_size).grapheme_clusters.map { |mbchar|
      mbchar =~ /[a-z]/ ? mbchar.upcase : mbchar
    }.join
    rest = current_line.byteslice((@byte_pointer + byte_size)..-1)
    line = current_line.byteslice(0, @byte_pointer) + part
    set_current_line(line + rest, line.bytesize)
  end
end</pre> </div>  </div> <div class="aliases"> Also aliased as: <a href="lineeditor.html#method-i-upcase_word">upcase_word</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-em_yank"> <a href="#method-i-em_yank" title="Link to this method"> <span class="method-name">em_yank</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="em_yank-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1806
        def em_yank(key)
  yanked = @kill_ring.yank
  insert_text(yanked) if yanked
end</pre> </div>  </div> <div class="aliases"> Also aliased as: <a href="lineeditor.html#method-i-yank">yank</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-em_yank_pop"> <a href="#method-i-em_yank_pop" title="Link to this method"> <span class="method-name">em_yank_pop</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="em_yank_pop-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1812
        def em_yank_pop(key)
  yanked, prev_yank = @kill_ring.yank_pop
  if yanked
    line, = byteslice!(current_line, @byte_pointer - prev_yank.bytesize, prev_yank.bytesize)
    set_current_line(line, @byte_pointer - prev_yank.bytesize)
    insert_text(yanked)
  end
end</pre> </div>  </div> <div class="aliases"> Also aliased as: <a href="lineeditor.html#method-i-yank_pop">yank_pop</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-emacs_editing_mode"> <a href="#method-i-emacs_editing_mode" title="Link to this method"> <span class="method-name">emacs_editing_mode</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="emacs_editing_mode-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2344
        def emacs_editing_mode(key)
  @config.editing_mode = :emacs
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-filter_normalize_candidates"> <a href="#method-i-filter_normalize_candidates" title="Link to this method"> <span class="method-name">filter_normalize_candidates</span> <span class="method-args">(target, list)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="filter_normalize_candidates-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 809
        def filter_normalize_candidates(target, list)
  target = target.downcase if @config.completion_ignore_case
  list.select do |item|
    next unless item
    unless Encoding.compatible?(target.encoding, item.encoding)
      # Workaround for Readline test
      if defined?(::Readline) &amp;&amp; ::Readline == ::Reline
        raise Encoding::CompatibilityError, "incompatible character encodings: #{target.encoding} and #{item.encoding}"
      end
    end

    if @config.completion_ignore_case
      item.downcase.start_with?(target)
    else
      item.start_with?(target)
    end
  end.map do |item|
    item.unicode_normalize
  rescue Encoding::CompatibilityError
    item
  end.uniq
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-generate_searcher"> <a href="#method-i-generate_searcher" title="Link to this method"> <span class="method-name">generate_searcher</span> <span class="method-args">(search_key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="generate_searcher-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1471
        def generate_searcher(search_key)
  search_word = String.new(encoding: encoding)
  hit_pointer = nil
  lambda do |key|
    search_again = false
    case key
    when "\C-h", "\C-?"
      grapheme_clusters = search_word.grapheme_clusters
      if grapheme_clusters.size &gt; 0
        grapheme_clusters.pop
        search_word = grapheme_clusters.join
      end
    when "\C-r", "\C-s"
      search_again = true if search_key == key
      search_key = key
    else
      search_word &lt;&lt; key
    end
    hit = nil
    if not search_word.empty? and @line_backup_in_history&amp;.include?(search_word)
      hit_pointer = Reline::HISTORY.size
      hit = @line_backup_in_history
    else
      if search_again
        if search_word.empty? and Reline.last_incremental_search
          search_word = Reline.last_incremental_search
        end
        if @history_pointer
          case search_key
          when "\C-r"
            history_pointer_base = 0
            history = Reline::HISTORY[0..(@history_pointer - 1)]
          when "\C-s"
            history_pointer_base = @history_pointer + 1
            history = Reline::HISTORY[(@history_pointer + 1)..-1]
          end
        else
          history_pointer_base = 0
          history = Reline::HISTORY
        end
      elsif @history_pointer
        case search_key
        when "\C-r"
          history_pointer_base = 0
          history = Reline::HISTORY[0..@history_pointer]
        when "\C-s"
          history_pointer_base = @history_pointer
          history = Reline::HISTORY[@history_pointer..-1]
        end
      else
        history_pointer_base = 0
        history = Reline::HISTORY
      end
      case search_key
      when "\C-r"
        hit_index = history.rindex { |item|
          item.include?(search_word)
        }
      when "\C-s"
        hit_index = history.index { |item|
          item.include?(search_word)
        }
      end
      if hit_index
        hit_pointer = history_pointer_base + hit_index
        hit = Reline::HISTORY[hit_pointer]
      end
    end
    case search_key
    when "\C-r"
      prompt_name = 'reverse-i-search'
    when "\C-s"
      prompt_name = 'i-search'
    end
    prompt_name = "failed #{prompt_name}" unless hit
    [search_word, prompt_name, hit_pointer]
  end
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-handle_interrupted"> <a href="#method-i-handle_interrupted" title="Link to this method"> <span class="method-name">handle_interrupted</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="handle_interrupted-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 185
        def handle_interrupted
  return unless @interrupted

  @interrupted = false
  clear_dialogs
  render
  cursor_to_bottom_offset = @rendered_screen.lines.size - @rendered_screen.cursor_y
  Reline::IOGate.scroll_down cursor_to_bottom_offset
  Reline::IOGate.move_cursor_column 0
  clear_rendered_screen_cache
  case @old_trap
  when 'DEFAULT', 'SYSTEM_DEFAULT'
    raise Interrupt
  when 'IGNORE'
    # Do nothing
  when 'EXIT'
    exit
  else
    @old_trap.call if @old_trap.respond_to?(:call)
  end
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-handle_resized"> <a href="#method-i-handle_resized" title="Link to this method"> <span class="method-name">handle_resized</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="handle_resized-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 173
        def handle_resized
  return unless @resized

  @screen_size = Reline::IOGate.get_screen_size
  @resized = false
  scroll_into_view
  Reline::IOGate.move_cursor_up @rendered_screen.cursor_y
  @rendered_screen.base_y = Reline::IOGate.cursor_pos.y
  clear_rendered_screen_cache
  render
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-inclusive-3F"> <a href="#method-i-inclusive-3F" title="Link to this method"> <span class="method-name">inclusive?</span> <span class="method-args">(method_obj)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="inclusive-3F-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 942
        def inclusive?(method_obj)
  # If a motion method with the keyword argument "inclusive" follows the
  # operator, it must contain the character at the cursor position.
  method_obj and method_obj.parameters.any? { |param| param[0] == :key and param[1] == :inclusive }
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-incremental_search_history"> <a href="#method-i-incremental_search_history" title="Link to this method"> <span class="method-name">incremental_search_history</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="incremental_search_history-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1550
        def incremental_search_history(key)
  backup = @buffer_of_lines.dup, @line_index, @byte_pointer, @history_pointer, @line_backup_in_history
  searcher = generate_searcher(key)
  @searching_prompt = "(reverse-i-search)`': "
  termination_keys = ["\C-j"]
  termination_keys.concat(@config.isearch_terminators.chars) if @config.isearch_terminators
  @waiting_proc = -&gt;(k) {
    if k == "\C-g"
      # cancel search and restore buffer
      @buffer_of_lines, @line_index, @byte_pointer, @history_pointer, @line_backup_in_history = backup
      @searching_prompt = nil
      @waiting_proc = nil
    elsif !termination_keys.include?(k) &amp;&amp; (k.match?(/[[:print:]]/) || k == "\C-h" || k == "\C-?" || k == "\C-r" || k == "\C-s")
      search_word, prompt_name, hit_pointer = searcher.call(k)
      Reline.last_incremental_search = search_word
      @searching_prompt = "(%s)`%s'" % [prompt_name, search_word]
      @searching_prompt += ': ' unless @is_multiline
      move_history(hit_pointer, line: :end, cursor: :end) if hit_pointer
    else
      # terminaton_keys and other keys will terminalte
      move_history(@history_pointer, line: :end, cursor: :start)
      @searching_prompt = nil
      @waiting_proc = nil
    end
  }
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-insert_new_line"> <a href="#method-i-insert_new_line" title="Link to this method"> <span class="method-name">insert_new_line</span> <span class="method-args">(cursor_line, next_line)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="insert_new_line-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 277
        def insert_new_line(cursor_line, next_line)
  @buffer_of_lines.insert(@line_index + 1, String.new(next_line, encoding: encoding))
  @buffer_of_lines[@line_index] = cursor_line
  @line_index += 1
  @byte_pointer = 0
  if @auto_indent_proc &amp;&amp; !@in_pasting
    if next_line.empty?
      (
        # For compatibility, use this calculation instead of just `process_auto_indent @line_index - 1, cursor_dependent: false`
        indent1 = @auto_indent_proc.(@buffer_of_lines.take(@line_index - 1).push(''), @line_index - 1, 0, true)
        indent2 = @auto_indent_proc.(@buffer_of_lines.take(@line_index), @line_index - 1, @buffer_of_lines[@line_index - 1].bytesize, false)
        indent = indent2 || indent1
        @buffer_of_lines[@line_index - 1] = ' ' * indent + @buffer_of_lines[@line_index - 1].gsub(/\A\s*/, '')
      )
      process_auto_indent @line_index, add_newline: true
    else
      process_auto_indent @line_index - 1, cursor_dependent: false
      process_auto_indent @line_index, add_newline: true # Need for compatibility
      process_auto_indent @line_index, cursor_dependent: false
    end
  end
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-insert_raw_char"> <a href="#method-i-insert_raw_char" title="Link to this method"> <span class="method-name">insert_raw_char</span> <span class="method-args">(str, arg: 1)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="insert_raw_char-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1419
        def insert_raw_char(str, arg: 1)
  arg.times do
    if str == "\C-j" or str == "\C-m"
      key_newline(str)
    elsif str != "\0"
      # Ignore NUL.
      ed_insert(str)
    end
  end
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-key_delete"> <a href="#method-i-key_delete" title="Link to this method"> <span class="method-name">key_delete</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="key_delete-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1324
        def key_delete(key)
  if @config.editing_mode_is?(:vi_insert)
    ed_delete_next_char(key)
  elsif @config.editing_mode_is?(:emacs)
    em_delete(key)
  end
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-key_newline"> <a href="#method-i-key_newline" title="Link to this method"> <span class="method-name">key_newline</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="key_newline-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1332
        def key_newline(key)
  if @is_multiline
    next_line = current_line.byteslice(@byte_pointer, current_line.bytesize - @byte_pointer)
    cursor_line = current_line.byteslice(0, @byte_pointer)
    insert_new_line(cursor_line, next_line)
  end
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-menu"> <a href="#method-i-menu" title="Link to this method"> <span class="method-name">menu</span> <span class="method-args">(list)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="menu-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 805
        def menu(list)
  @menu_info = MenuInfo.new(list)
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-menu_complete"> <a href="#method-i-menu_complete" title="Link to this method"> <span class="method-name">menu_complete</span> <span class="method-args">(_key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="menu_complete-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1366
        def menu_complete(_key)
  completion_journey_move(:down)
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-menu_complete_backward"> <a href="#method-i-menu_complete_backward" title="Link to this method"> <span class="method-name">menu_complete_backward</span> <span class="method-args">(_key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="menu_complete_backward-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1370
        def menu_complete_backward(_key)
  completion_journey_move(:up)
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-modify_lines"> <a href="#method-i-modify_lines" title="Link to this method"> <span class="method-name">modify_lines</span> <span class="method-args">(before, complete)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="modify_lines-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 793
        def modify_lines(before, complete)
  if after = @output_modifier_proc&amp;.call("#{before.join("\n")}\n", complete: complete)
    after.lines("\n").map { |l| l.chomp('') }
  else
    before.map { |l| Reline::Unicode.escape_for_print(l) }
  end
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-move_completed_list"> <a href="#method-i-move_completed_list" title="Link to this method"> <span class="method-name">move_completed_list</span> <span class="method-args">(direction)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="move_completed_list-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 887
        def move_completed_list(direction)
  @completion_journey_state ||= retrieve_completion_journey_state
  return false unless @completion_journey_state

  if (delta = { up: -1, down: +1 }[direction])
    @completion_journey_state.pointer = (@completion_journey_state.pointer + delta) % @completion_journey_state.list.size
  end
  completed = @completion_journey_state.list[@completion_journey_state.pointer]
  set_current_line(@completion_journey_state.pre + completed + @completion_journey_state.post, @completion_journey_state.pre.bytesize + completed.bytesize)
  true
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-move_history"> <a href="#method-i-move_history" title="Link to this method"> <span class="method-name">move_history</span> <span class="method-args">(history_pointer, line:, cursor:)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="move_history-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1627
        def move_history(history_pointer, line:, cursor:)
  history_pointer ||= Reline::HISTORY.size
  return if history_pointer &lt; 0 || history_pointer &gt; Reline::HISTORY.size
  old_history_pointer = @history_pointer || Reline::HISTORY.size
  if old_history_pointer == Reline::HISTORY.size
    @line_backup_in_history = whole_buffer
  else
    Reline::HISTORY[old_history_pointer] = whole_buffer
  end
  if history_pointer == Reline::HISTORY.size
    buf = @line_backup_in_history
    @history_pointer = @line_backup_in_history = nil
  else
    buf = Reline::HISTORY[history_pointer]
    @history_pointer = history_pointer
  end
  @buffer_of_lines = buf.split("\n")
  @buffer_of_lines = [String.new(encoding: encoding)] if @buffer_of_lines.empty?
  @line_index = line == :start ? 0 : line == :end ? @buffer_of_lines.size - 1 : line
  @byte_pointer = cursor == :start ? 0 : cursor == :end ? current_line.bytesize : cursor
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-move_undo_redo"> <a href="#method-i-move_undo_redo" title="Link to this method"> <span class="method-name">move_undo_redo</span> <span class="method-args">(direction)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="move_undo_redo-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2352
        def move_undo_redo(direction)
  @restoring = true
  return unless (0..@input_lines.size - 1).cover?(@input_lines_position + direction)

  @input_lines_position += direction
  buffer_of_lines, byte_pointer, line_index = @input_lines[@input_lines_position]
  @buffer_of_lines = buffer_of_lines.dup
  @line_index = line_index
  @byte_pointer = byte_pointer
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-perform_completion"> <a href="#method-i-perform_completion" title="Link to this method"> <span class="method-name">perform_completion</span> <span class="method-args">(preposing, target, postposing, quote, list)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="perform_completion-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 832
        def perform_completion(preposing, target, postposing, quote, list)
  candidates = filter_normalize_candidates(target, list)

  case @completion_state
  when CompletionState::PERFECT_MATCH
    if @dig_perfect_match_proc
      @dig_perfect_match_proc.call(@perfect_matched)
      return
    end
  when CompletionState::MENU
    menu(candidates)
    return
  when CompletionState::MENU_WITH_PERFECT_MATCH
    menu(candidates)
    @completion_state = CompletionState::PERFECT_MATCH
    return
  end

  completed = Reline::Unicode.common_prefix(candidates, ignore_case: @config.completion_ignore_case)
  return if completed.empty?

  append_character = ''
  if candidates.include?(completed)
    if candidates.one?
      append_character = quote || completion_append_character.to_s
      @completion_state = CompletionState::PERFECT_MATCH
    elsif @config.show_all_if_ambiguous
      menu(candidates)
      @completion_state = CompletionState::PERFECT_MATCH
    else
      @completion_state = CompletionState::MENU_WITH_PERFECT_MATCH
    end
    @perfect_matched = completed
  else
    @completion_state = CompletionState::MENU
    menu(candidates) if @config.show_all_if_ambiguous
  end
  @buffer_of_lines[@line_index] = (preposing + completed + append_character + postposing).split("\n")[@line_index] || String.new(encoding: encoding)
  line_to_pointer = (preposing + completed + append_character).split("\n")[@line_index] || String.new(encoding: encoding)
  @byte_pointer = line_to_pointer.bytesize
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-prev_action_state_value"> <a href="#method-i-prev_action_state_value" title="Link to this method"> <span class="method-name">prev_action_state_value</span> <span class="method-args">(type)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="prev_action_state_value-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2371
        def prev_action_state_value(type)
  @prev_action_state[0] == type ? @prev_action_state[1] : nil
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-process_auto_indent"> <a href="#method-i-process_auto_indent" title="Link to this method"> <span class="method-name">process_auto_indent</span> <span class="method-args">(line_index = @line_index, cursor_dependent: true, add_newline: false)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="process_auto_indent-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1151
        def process_auto_indent(line_index = @line_index, cursor_dependent: true, add_newline: false)
  return if @in_pasting
  return unless @auto_indent_proc

  line = @buffer_of_lines[line_index]
  byte_pointer = cursor_dependent &amp;&amp; @line_index == line_index ? @byte_pointer : line.bytesize
  new_indent = @auto_indent_proc.(@buffer_of_lines.take(line_index + 1).push(''), line_index, byte_pointer, add_newline)
  return unless new_indent

  new_line = ' ' * new_indent + line.lstrip
  @buffer_of_lines[line_index] = new_line
  if @line_index == line_index
    indent_diff = new_line.bytesize - line.bytesize
    @byte_pointer = [@byte_pointer + indent_diff, 0].max
  end
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-process_insert"> <a href="#method-i-process_insert" title="Link to this method"> <span class="method-name">process_insert</span> <span class="method-args">(force: false)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="process_insert-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1382
        def process_insert(force: false)
  return if @continuous_insertion_buffer.empty? or (@in_pasting and not force)
  insert_text(@continuous_insertion_buffer)
  @continuous_insertion_buffer.clear
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-process_key"> <a href="#method-i-process_key" title="Link to this method"> <span class="method-name">process_key</span> <span class="method-args">(key, method_symbol)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="process_key-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 979
        def process_key(key, method_symbol)
  if @waiting_proc
    cleanup_waiting unless key.size == 1
  end
  if @vi_waiting_operator
    cleanup_waiting unless VI_WAITING_ACCEPT_METHODS.include?(method_symbol) || VI_MOTIONS.include?(method_symbol)
  end

  if @waiting_proc
    old_byte_pointer = @byte_pointer
    @waiting_proc.call(key)
    if @vi_waiting_operator
      byte_pointer_diff = @byte_pointer - old_byte_pointer
      @byte_pointer = old_byte_pointer
      method_obj = method(@vi_waiting_operator)
      wrap_method_call(@vi_waiting_operator, method_obj, byte_pointer_diff)
      cleanup_waiting
    end
    @kill_ring.process
    return
  end

  # Reject multibyte input (converted to ed_insert) in vi_command mode
  return if method_symbol == :ed_insert &amp;&amp; @config.editing_mode_is?(:vi_command)

  if method_symbol and respond_to?(method_symbol, true)
    method_obj = method(method_symbol)
  end
  if @vi_arg
    if ARGUMENT_DIGIT_METHODS.include?(method_symbol)
      ed_argument_digit(key)
    else
      if argumentable?(method_obj)
        run_for_operators(key, method_symbol) do |with_operator|
          wrap_method_call(method_symbol, method_obj, key, with_operator)
        end
      elsif method_obj
        wrap_method_call(method_symbol, method_obj, key)
      end
      @kill_ring.process
      @vi_arg = nil
    end
  elsif method_obj
    if method_symbol == :ed_argument_digit
      wrap_method_call(method_symbol, method_obj, key)
    else
      run_for_operators(key, method_symbol) do |with_operator|
        wrap_method_call(method_symbol, method_obj, key, with_operator)
      end
    end
    @kill_ring.process
  end
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-re_read_init_file"> <a href="#method-i-re_read_init_file" title="Link to this method"> <span class="method-name">re_read_init_file</span> <span class="method-args">(_key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="re_read_init_file-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2379
        def re_read_init_file(_key)
  @config.reload
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-redo"> <a href="#method-i-redo" title="Link to this method"> <span class="method-name">redo</span> <span class="method-args">(_key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="redo-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2367
        def redo(_key)
  move_undo_redo(+1)
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-render_differential"> <a href="#method-i-render_differential" title="Link to this method"> <span class="method-name">render_differential</span> <span class="method-args">(new_lines, new_cursor_x, new_cursor_y)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="render_differential-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 515
        def render_differential(new_lines, new_cursor_x, new_cursor_y)
  Reline::IOGate.disable_auto_linewrap(true) if Reline::IOGate.win?
  rendered_lines = @rendered_screen.lines
  cursor_y = @rendered_screen.cursor_y
  if new_lines != rendered_lines
    # Hide cursor while rendering to avoid cursor flickering.
    Reline::IOGate.hide_cursor
    num_lines = [[new_lines.size, rendered_lines.size].max, screen_height].min
    if @rendered_screen.base_y + num_lines &gt; screen_height
      Reline::IOGate.scroll_down(num_lines - cursor_y - 1)
      @rendered_screen.base_y = screen_height - num_lines
      cursor_y = num_lines - 1
    end
    num_lines.times do |i|
      rendered_line = rendered_lines[i] || []
      line_to_render = new_lines[i] || []
      next if rendered_line == line_to_render

      Reline::IOGate.move_cursor_down i - cursor_y
      cursor_y = i
      unless rendered_lines[i]
        Reline::IOGate.move_cursor_column 0
        Reline::IOGate.erase_after_cursor
      end
      render_line_differential(rendered_line, line_to_render)
    end
    @rendered_screen.lines = new_lines
    Reline::IOGate.show_cursor
  end
  Reline::IOGate.move_cursor_column new_cursor_x
  Reline::IOGate.move_cursor_down new_cursor_y - cursor_y
  @rendered_screen.cursor_y = new_cursor_y
ensure
  Reline::IOGate.disable_auto_linewrap(false) if Reline::IOGate.win?
end</pre> </div>  <p>Reflects lines to be rendered and new cursor position to the screen by calculating the difference from the previous render.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-retrieve_completion_journey_state"> <a href="#method-i-retrieve_completion_journey_state" title="Link to this method"> <span class="method-name">retrieve_completion_journey_state</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="retrieve_completion_journey_state-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 899
        def retrieve_completion_journey_state
  preposing, target, postposing, quote = retrieve_completion_block
  list = call_completion_proc(preposing, target, postposing, quote)
  return unless list.is_a?(Array)

  candidates = list.select{ |item| item.start_with?(target) }
  return if candidates.empty?

  pre = preposing.split("\n", -1).last || ''
  post = postposing.split("\n", -1).first || ''
  CompletionJourneyState.new(
    @line_index, pre, target, post, [target] + candidates, 0
  )
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-run_for_operators"> <a href="#method-i-run_for_operators" title="Link to this method"> <span class="method-name">run_for_operators</span> <span class="method-args">(key, method_symbol, &amp;block)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="run_for_operators-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 914
        def run_for_operators(key, method_symbol, &amp;block)
  if @vi_waiting_operator
    if VI_MOTIONS.include?(method_symbol)
      old_byte_pointer = @byte_pointer
      @vi_arg = (@vi_arg || 1) * @vi_waiting_operator_arg
      block.(true)
      unless @waiting_proc
        byte_pointer_diff = @byte_pointer - old_byte_pointer
        @byte_pointer = old_byte_pointer
        method_obj = method(@vi_waiting_operator)
        wrap_method_call(@vi_waiting_operator, method_obj, byte_pointer_diff)
        cleanup_waiting
      end
    else
      # Ignores operator when not motion is given.
      block.(false)
      cleanup_waiting
    end
    @vi_arg = nil
  else
    block.(false)
  end
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-search_history"> <a href="#method-i-search_history" title="Link to this method"> <span class="method-name">search_history</span> <span class="method-args">(prefix, pointer_range)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="search_history-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1587
        def search_history(prefix, pointer_range)
  pointer_range.each do |pointer|
    lines = Reline::HISTORY[pointer].split("\n")
    lines.each_with_index do |line, index|
      return [pointer, index] if line.start_with?(prefix)
    end
  end
  nil
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-search_next_char"> <a href="#method-i-search_next_char" title="Link to this method"> <span class="method-name">search_next_char</span> <span class="method-args">(key, arg, need_prev_char: false, inclusive: false)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="search_next_char-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2242
        def search_next_char(key, arg, need_prev_char: false, inclusive: false)
  prev_total = nil
  total = nil
  found = false
  current_line.byteslice(@byte_pointer..-1).grapheme_clusters.each do |mbchar|
    # total has [byte_size, cursor]
    unless total
      # skip cursor point
      width = Reline::Unicode.get_mbchar_width(mbchar)
      total = [mbchar.bytesize, width]
    else
      if key == mbchar
        arg -= 1
        if arg.zero?
          found = true
          break
        end
      end
      width = Reline::Unicode.get_mbchar_width(mbchar)
      prev_total = total
      total = [total.first + mbchar.bytesize, total.last + width]
    end
  end
  if not need_prev_char and found and total
    byte_size, _ = total
    @byte_pointer += byte_size
  elsif need_prev_char and found and prev_total
    byte_size, _ = prev_total
    @byte_pointer += byte_size
  end
  if inclusive
    byte_size = Reline::Unicode.get_next_mbchar_size(current_line, @byte_pointer)
    if byte_size &gt; 0
      @byte_pointer += byte_size
    end
  end
  @waiting_proc = nil
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-search_prev_char"> <a href="#method-i-search_prev_char" title="Link to this method"> <span class="method-name">search_prev_char</span> <span class="method-args">(key, arg, need_next_char = false)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="search_prev_char-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2289
        def search_prev_char(key, arg, need_next_char = false)
  prev_total = nil
  total = nil
  found = false
  current_line.byteslice(0..@byte_pointer).grapheme_clusters.reverse_each do |mbchar|
    # total has [byte_size, cursor]
    unless total
      # skip cursor point
      width = Reline::Unicode.get_mbchar_width(mbchar)
      total = [mbchar.bytesize, width]
    else
      if key == mbchar
        arg -= 1
        if arg.zero?
          found = true
          break
        end
      end
      width = Reline::Unicode.get_mbchar_width(mbchar)
      prev_total = total
      total = [total.first + mbchar.bytesize, total.last + width]
    end
  end
  if not need_next_char and found and total
    byte_size, _ = total
    @byte_pointer -= byte_size
  elsif need_next_char and found and prev_total
    byte_size, _ = prev_total
    @byte_pointer -= byte_size
  end
  @waiting_proc = nil
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-set_next_action_state"> <a href="#method-i-set_next_action_state" title="Link to this method"> <span class="method-name">set_next_action_state</span> <span class="method-args">(type, value)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="set_next_action_state-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2375
        def set_next_action_state(type, value)
  @next_action_state = [type, value]
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-split_line_by_width"> <a href="#method-i-split_line_by_width" title="Link to this method"> <span class="method-name">split_line_by_width</span> <span class="method-args">(str, max_width, offset: 0)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="split_line_by_width-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 300
        def split_line_by_width(str, max_width, offset: 0)
  Reline::Unicode.split_line_by_width(str, max_width, encoding, offset: offset)
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-undo"> <a href="#method-i-undo" title="Link to this method"> <span class="method-name">undo</span> <span class="method-args">(_key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="undo-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2363
        def undo(_key)
  move_undo_redo(-1)
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-update_each_dialog"> <a href="#method-i-update_each_dialog" title="Link to this method"> <span class="method-name">update_each_dialog</span> <span class="method-args">(dialog, cursor_column, cursor_row, key = nil)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="update_each_dialog-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 709
        def update_each_dialog(dialog, cursor_column, cursor_row, key = nil)
  dialog.set_cursor_pos(cursor_column, cursor_row)
  dialog_render_info = dialog.call(key)
  if dialog_render_info.nil? or dialog_render_info.contents.nil? or dialog_render_info.contents.empty?
    dialog.contents = nil
    dialog.trap_key = nil
    return
  end
  contents = dialog_render_info.contents
  pointer = dialog.pointer
  if dialog_render_info.width
    dialog.width = dialog_render_info.width
  else
    dialog.width = contents.map { |l| calculate_width(l, true) }.max
  end
  height = dialog_render_info.height || DIALOG_DEFAULT_HEIGHT
  height = contents.size if contents.size &lt; height
  if contents.size &gt; height
    if dialog.pointer
      if dialog.pointer &lt; 0
        dialog.scroll_top = 0
      elsif (dialog.pointer - dialog.scroll_top) &gt;= (height - 1)
        dialog.scroll_top = dialog.pointer - (height - 1)
      elsif (dialog.pointer - dialog.scroll_top) &lt; 0
        dialog.scroll_top = dialog.pointer
      end
      pointer = dialog.pointer - dialog.scroll_top
    else
      dialog.scroll_top = 0
    end
    contents = contents[dialog.scroll_top, height]
  end
  if dialog_render_info.scrollbar and dialog_render_info.contents.size &gt; height
    bar_max_height = height * 2
    moving_distance = (dialog_render_info.contents.size - height) * 2
    position_ratio = dialog.scroll_top.zero? ? 0.0 : ((dialog.scroll_top * 2).to_f / moving_distance)
    bar_height = (bar_max_height * ((contents.size * 2).to_f / (dialog_render_info.contents.size * 2))).floor.to_i
    bar_height = MINIMUM_SCROLLBAR_HEIGHT if bar_height &lt; MINIMUM_SCROLLBAR_HEIGHT
    scrollbar_pos = ((bar_max_height - bar_height) * position_ratio).floor.to_i
  else
    scrollbar_pos = nil
  end
  dialog.column = dialog_render_info.pos.x
  dialog.width += @block_elem_width if scrollbar_pos
  diff = (dialog.column + dialog.width) - screen_width
  if diff &gt; 0
    dialog.column -= diff
  end
  if rest_height(screen_scroll_top + cursor_row) - dialog_render_info.pos.y &gt;= height
    dialog.vertical_offset = dialog_render_info.pos.y + 1
  elsif cursor_row &gt;= height
    dialog.vertical_offset = dialog_render_info.pos.y - height
  else
    dialog.vertical_offset = dialog_render_info.pos.y + 1
  end
  if dialog.column &lt; 0
    dialog.column = 0
    dialog.width = screen_width
  end
  face = Reline::Face[dialog_render_info.face || :default]
  scrollbar_sgr = face[:scrollbar]
  default_sgr = face[:default]
  enhanced_sgr = face[:enhanced]
  dialog.contents = contents.map.with_index do |item, i|
    line_sgr = i == pointer ? enhanced_sgr : default_sgr
    str_width = dialog.width - (scrollbar_pos.nil? ? 0 : @block_elem_width)
    str, = Reline::Unicode.take_mbchar_range(item, 0, str_width, padding: true)
    colored_content = "#{line_sgr}#{str}"
    if scrollbar_pos
      if scrollbar_pos &lt;= (i * 2) and (i * 2 + 1) &lt; (scrollbar_pos + bar_height)
        colored_content + scrollbar_sgr + @full_block
      elsif scrollbar_pos &lt;= (i * 2) and (i * 2) &lt; (scrollbar_pos + bar_height)
        colored_content + scrollbar_sgr + @upper_half_block
      elsif scrollbar_pos &lt;= (i * 2 + 1) and (i * 2) &lt; (scrollbar_pos + bar_height)
        colored_content + scrollbar_sgr + @lower_half_block
      else
        colored_content + scrollbar_sgr + ' ' * @block_elem_width
      end
    else
      colored_content
    end
  end
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-vi_add"> <a href="#method-i-vi_add" title="Link to this method"> <span class="method-name">vi_add</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="vi_add-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1952
        def vi_add(key)
  @config.editing_mode = :vi_insert
  ed_next_char(key)
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-vi_add_at_eol"> <a href="#method-i-vi_add_at_eol" title="Link to this method"> <span class="method-name">vi_add_at_eol</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="vi_add_at_eol-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2048
        def vi_add_at_eol(key)
  ed_move_to_end(key)
  @config.editing_mode = :vi_insert
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-vi_change_meta"> <a href="#method-i-vi_change_meta" title="Link to this method"> <span class="method-name">vi_change_meta</span> <span class="method-args">(key, arg: nil)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="vi_change_meta-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2067
        def vi_change_meta(key, arg: nil)
  if @vi_waiting_operator
    set_current_line('', 0) if @vi_waiting_operator == :vi_change_meta_confirm &amp;&amp; arg.nil?
    @vi_waiting_operator = nil
    @vi_waiting_operator_arg = nil
  else
    @drop_terminate_spaces = true
    @vi_waiting_operator = :vi_change_meta_confirm
    @vi_waiting_operator_arg = arg || 1
  end
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-vi_change_meta_confirm"> <a href="#method-i-vi_change_meta_confirm" title="Link to this method"> <span class="method-name">vi_change_meta_confirm</span> <span class="method-args">(byte_pointer_diff)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="vi_change_meta_confirm-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2079
        def vi_change_meta_confirm(byte_pointer_diff)
  vi_delete_meta_confirm(byte_pointer_diff)
  @config.editing_mode = :vi_insert
  @drop_terminate_spaces = false
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-vi_change_to_eol"> <a href="#method-i-vi_change_to_eol" title="Link to this method"> <span class="method-name">vi_change_to_eol</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="vi_change_to_eol-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1745
        def vi_change_to_eol(key)
  ed_kill_line(key)

  @config.editing_mode = :vi_insert
end</pre> </div>  <dl class="rdoc-list note-list">
<dt>Editline</dt> <dd> <p><a href="lineeditor.html#method-i-vi_change_to_eol"><code>vi_change_to_eol</code></a> (vi command: <code>C</code>) + Kill and change from the cursor to the end of the line.</p> </dd>
</dl> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-vi_command_mode"> <a href="#method-i-vi_command_mode" title="Link to this method"> <span class="method-name">vi_command_mode</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="vi_command_mode-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1957
        def vi_command_mode(key)
  ed_prev_char(key)
  @config.editing_mode = :vi_command
end</pre> </div>  </div> <div class="aliases"> Also aliased as: <a href="lineeditor.html#method-i-vi_movement_mode">vi_movement_mode</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-vi_delete_meta"> <a href="#method-i-vi_delete_meta" title="Link to this method"> <span class="method-name">vi_delete_meta</span> <span class="method-args">(key, arg: nil)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="vi_delete_meta-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2085
        def vi_delete_meta(key, arg: nil)
  if @vi_waiting_operator
    set_current_line('', 0) if @vi_waiting_operator == :vi_delete_meta_confirm &amp;&amp; arg.nil?
    @vi_waiting_operator = nil
    @vi_waiting_operator_arg = nil
  else
    @vi_waiting_operator = :vi_delete_meta_confirm
    @vi_waiting_operator_arg = arg || 1
  end
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-vi_delete_meta_confirm"> <a href="#method-i-vi_delete_meta_confirm" title="Link to this method"> <span class="method-name">vi_delete_meta_confirm</span> <span class="method-args">(byte_pointer_diff)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="vi_delete_meta_confirm-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2096
        def vi_delete_meta_confirm(byte_pointer_diff)
  if byte_pointer_diff &gt; 0
    line, cut = byteslice!(current_line, @byte_pointer, byte_pointer_diff)
  elsif byte_pointer_diff &lt; 0
    line, cut = byteslice!(current_line, @byte_pointer + byte_pointer_diff, -byte_pointer_diff)
  else
    return
  end
  copy_for_vi(cut)
  set_current_line(line, @byte_pointer + (byte_pointer_diff &lt; 0 ? byte_pointer_diff : 0))
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-vi_delete_prev_char"> <a href="#method-i-vi_delete_prev_char" title="Link to this method"> <span class="method-name">vi_delete_prev_char</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="vi_delete_prev_char-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2029
        def vi_delete_prev_char(key)
  if @byte_pointer == 0 and @line_index &gt; 0
    @byte_pointer = @buffer_of_lines[@line_index - 1].bytesize
    @buffer_of_lines[@line_index - 1] += @buffer_of_lines.delete_at(@line_index)
    @line_index -= 1
    process_auto_indent cursor_dependent: false
  elsif @byte_pointer &gt; 0
    byte_size = Reline::Unicode.get_prev_mbchar_size(current_line, @byte_pointer)
    @byte_pointer -= byte_size
    line, _ = byteslice!(current_line, @byte_pointer, byte_size)
    set_current_line(line)
  end
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-vi_editing_mode"> <a href="#method-i-vi_editing_mode" title="Link to this method"> <span class="method-name">vi_editing_mode</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="vi_editing_mode-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2348
        def vi_editing_mode(key)
  @config.editing_mode = :vi_insert
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-vi_end_big_word"> <a href="#method-i-vi_end_big_word" title="Link to this method"> <span class="method-name">vi_end_big_word</span> <span class="method-args">(key, arg: 1, inclusive: false)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="vi_end_big_word-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2014
        def vi_end_big_word(key, arg: 1, inclusive: false)
  if current_line.bytesize &gt; @byte_pointer
    byte_size = Reline::Unicode.vi_big_forward_end_word(current_line, @byte_pointer)
    @byte_pointer += byte_size
  end
  arg -= 1
  if inclusive and arg.zero?
    byte_size = Reline::Unicode.get_next_mbchar_size(current_line, @byte_pointer)
    if byte_size &gt; 0
      @byte_pointer += byte_size
    end
  end
  vi_end_big_word(key, arg: arg) if arg &gt; 0
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-vi_end_word"> <a href="#method-i-vi_end_word" title="Link to this method"> <span class="method-name">vi_end_word</span> <span class="method-args">(key, arg: 1, inclusive: false)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="vi_end_word-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1981
        def vi_end_word(key, arg: 1, inclusive: false)
  if current_line.bytesize &gt; @byte_pointer
    byte_size = Reline::Unicode.vi_forward_end_word(current_line, @byte_pointer)
    @byte_pointer += byte_size
  end
  arg -= 1
  if inclusive and arg.zero?
    byte_size = Reline::Unicode.get_next_mbchar_size(current_line, @byte_pointer)
    if byte_size &gt; 0
      @byte_pointer += byte_size
    end
  end
  vi_end_word(key, arg: arg) if arg &gt; 0
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-vi_first_print"> <a href="#method-i-vi_first_print" title="Link to this method"> <span class="method-name">vi_first_print</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="vi_first_print-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1456
        def vi_first_print(key)
  @byte_pointer = Reline::Unicode.vi_first_print(current_line)
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-vi_histedit"> <a href="#method-i-vi_histedit" title="Link to this method"> <span class="method-name">vi_histedit</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="vi_histedit-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2164
        def vi_histedit(key)
  path = Tempfile.open { |fp|
    fp.write whole_lines.join("\n")
    fp.path
  }
  system("#{ENV['EDITOR']} #{path}")
  @buffer_of_lines = File.read(path).split("\n")
  @buffer_of_lines = [String.new(encoding: encoding)] if @buffer_of_lines.empty?
  @line_index = 0
  finish
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-vi_insert"> <a href="#method-i-vi_insert" title="Link to this method"> <span class="method-name">vi_insert</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="vi_insert-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1948
        def vi_insert(key)
  @config.editing_mode = :vi_insert
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-vi_insert_at_bol"> <a href="#method-i-vi_insert_at_bol" title="Link to this method"> <span class="method-name">vi_insert_at_bol</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="vi_insert_at_bol-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2043
        def vi_insert_at_bol(key)
  ed_move_to_beg(key)
  @config.editing_mode = :vi_insert
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-vi_join_lines"> <a href="#method-i-vi_join_lines" title="Link to this method"> <span class="method-name">vi_join_lines</span> <span class="method-args">(key, arg: 1)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="vi_join_lines-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2322
        def vi_join_lines(key, arg: 1)
  if @buffer_of_lines.size &gt; @line_index + 1
    next_line = @buffer_of_lines.delete_at(@line_index + 1).lstrip
    set_current_line(current_line + ' ' + next_line, current_line.bytesize)
  end
  arg -= 1
  vi_join_lines(key, arg: arg) if arg &gt; 0
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-vi_kill_line_prev"> <a href="#method-i-vi_kill_line_prev" title="Link to this method"> <span class="method-name">vi_kill_line_prev</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="vi_kill_line_prev-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1756
        def vi_kill_line_prev(key)
  if @byte_pointer &gt; 0
    line, deleted = byteslice!(current_line, 0, @byte_pointer)
    set_current_line(line, 0)
    @kill_ring.append(deleted, true)
  end
end</pre> </div>  <dl class="rdoc-list note-list">
<dt>Editline</dt> <dd> <p><code>vi-kill-line-prev</code> (vi: <code>Ctrl-U</code>) Delete the string from the beginning of the edit buffer to the cursor and save it to the cut buffer.</p> </dd>
<dt>GNU <a href="../readline.html"><code>Readline</code></a>
</dt> <dd> <p><code>unix-line-discard</code> (<code>C-u</code>) Kill backward from the cursor to the beginning of the current line.</p> </dd>
</dl> </div> <div class="aliases"> Also aliased as: <a href="lineeditor.html#method-i-unix_line_discard">unix_line_discard</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-vi_list_or_eof"> <a href="#method-i-vi_list_or_eof" title="Link to this method"> <span class="method-name">vi_list_or_eof</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="vi_list_or_eof-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2130
        def vi_list_or_eof(key)
  if buffer_empty?
    @eof = true
    finish
  else
    ed_newline(key)
  end
end</pre> </div>  </div> <div class="aliases"> Also aliased as: <a href="lineeditor.html#method-i-vi_end_of_transmission">vi_end_of_transmission</a>, <a href="lineeditor.html#method-i-vi_eof_maybe">vi_eof_maybe</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-vi_next_big_word"> <a href="#method-i-vi_next_big_word" title="Link to this method"> <span class="method-name">vi_next_big_word</span> <span class="method-args">(key, arg: 1)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="vi_next_big_word-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1996
        def vi_next_big_word(key, arg: 1)
  if current_line.bytesize &gt; @byte_pointer
    byte_size = Reline::Unicode.vi_big_forward_word(current_line, @byte_pointer)
    @byte_pointer += byte_size
  end
  arg -= 1
  vi_next_big_word(key, arg: arg) if arg &gt; 0
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-vi_next_char"> <a href="#method-i-vi_next_char" title="Link to this method"> <span class="method-name">vi_next_char</span> <span class="method-args">(key, arg: 1, inclusive: false)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="vi_next_char-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2234
        def vi_next_char(key, arg: 1, inclusive: false)
  @waiting_proc = -&gt;(key_for_proc) { search_next_char(key_for_proc, arg, inclusive: inclusive) }
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-vi_next_word"> <a href="#method-i-vi_next_word" title="Link to this method"> <span class="method-name">vi_next_word</span> <span class="method-args">(key, arg: 1)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="vi_next_word-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1963
        def vi_next_word(key, arg: 1)
  if current_line.bytesize &gt; @byte_pointer
    byte_size = Reline::Unicode.vi_forward_word(current_line, @byte_pointer, @drop_terminate_spaces)
    @byte_pointer += byte_size
  end
  arg -= 1
  vi_next_word(key, arg: arg) if arg &gt; 0
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-vi_paste_next"> <a href="#method-i-vi_paste_next" title="Link to this method"> <span class="method-name">vi_paste_next</span> <span class="method-args">(key, arg: 1)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="vi_paste_next-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2185
        def vi_paste_next(key, arg: 1)
  if @vi_clipboard.size &gt; 0
    byte_size = Reline::Unicode.get_next_mbchar_size(current_line, @byte_pointer)
    line = byteinsert(current_line, @byte_pointer + byte_size, @vi_clipboard)
    set_current_line(line, @byte_pointer + @vi_clipboard.bytesize)
  end
  arg -= 1
  vi_paste_next(key, arg: arg) if arg &gt; 0
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-vi_paste_prev"> <a href="#method-i-vi_paste_prev" title="Link to this method"> <span class="method-name">vi_paste_prev</span> <span class="method-args">(key, arg: 1)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="vi_paste_prev-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2176
        def vi_paste_prev(key, arg: 1)
  if @vi_clipboard.size &gt; 0
    cursor_point = @vi_clipboard.grapheme_clusters[0..-2].join
    set_current_line(byteinsert(current_line, @byte_pointer, @vi_clipboard), @byte_pointer + cursor_point.bytesize)
  end
  arg -= 1
  vi_paste_prev(key, arg: arg) if arg &gt; 0
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-vi_prev_big_word"> <a href="#method-i-vi_prev_big_word" title="Link to this method"> <span class="method-name">vi_prev_big_word</span> <span class="method-args">(key, arg: 1)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="vi_prev_big_word-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2005
        def vi_prev_big_word(key, arg: 1)
  if @byte_pointer &gt; 0
    byte_size = Reline::Unicode.vi_big_backward_word(current_line, @byte_pointer)
    @byte_pointer -= byte_size
  end
  arg -= 1
  vi_prev_big_word(key, arg: arg) if arg &gt; 0
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-vi_prev_char"> <a href="#method-i-vi_prev_char" title="Link to this method"> <span class="method-name">vi_prev_char</span> <span class="method-args">(key, arg: 1)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="vi_prev_char-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2281
        def vi_prev_char(key, arg: 1)
  @waiting_proc = -&gt;(key_for_proc) { search_prev_char(key_for_proc, arg) }
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-vi_prev_word"> <a href="#method-i-vi_prev_word" title="Link to this method"> <span class="method-name">vi_prev_word</span> <span class="method-args">(key, arg: 1)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="vi_prev_word-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1972
        def vi_prev_word(key, arg: 1)
  if @byte_pointer &gt; 0
    byte_size = Reline::Unicode.vi_backward_word(current_line, @byte_pointer)
    @byte_pointer -= byte_size
  end
  arg -= 1
  vi_prev_word(key, arg: arg) if arg &gt; 0
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-vi_replace_char"> <a href="#method-i-vi_replace_char" title="Link to this method"> <span class="method-name">vi_replace_char</span> <span class="method-args">(key, arg: 1)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="vi_replace_char-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2210
        def vi_replace_char(key, arg: 1)
  @waiting_proc = -&gt;(k) {
    if arg == 1
      byte_size = Reline::Unicode.get_next_mbchar_size(current_line, @byte_pointer)
      before = current_line.byteslice(0, @byte_pointer)
      remaining_point = @byte_pointer + byte_size
      after = current_line.byteslice(remaining_point, current_line.bytesize - remaining_point)
      set_current_line(before + k + after)
      @waiting_proc = nil
    elsif arg &gt; 1
      byte_size = 0
      arg.times do
        byte_size += Reline::Unicode.get_next_mbchar_size(current_line, @byte_pointer + byte_size)
      end
      before = current_line.byteslice(0, @byte_pointer)
      remaining_point = @byte_pointer + byte_size
      after = current_line.byteslice(remaining_point, current_line.bytesize - remaining_point)
      replaced = k * arg
      set_current_line(before + replaced + after, @byte_pointer + replaced.bytesize)
      @waiting_proc = nil
    end
  }
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-vi_search_next"> <a href="#method-i-vi_search_next" title="Link to this method"> <span class="method-name">vi_search_next</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="vi_search_next-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1582
        def vi_search_next(key)
  incremental_search_history(key)
end</pre> </div>  </div> <div class="aliases"> Also aliased as: <a href="lineeditor.html#method-i-forward_search_history">forward_search_history</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-vi_search_prev"> <a href="#method-i-vi_search_prev" title="Link to this method"> <span class="method-name">vi_search_prev</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="vi_search_prev-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 1577
        def vi_search_prev(key)
  incremental_search_history(key)
end</pre> </div>  </div> <div class="aliases"> Also aliased as: <a href="lineeditor.html#method-i-reverse_search_history">reverse_search_history</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-vi_to_column"> <a href="#method-i-vi_to_column" title="Link to this method"> <span class="method-name">vi_to_column</span> <span class="method-args">(key, arg: 0)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="vi_to_column-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2201
        def vi_to_column(key, arg: 0)
  # Implementing behavior of vi, not Readline's vi-mode.
  @byte_pointer, = current_line.grapheme_clusters.inject([0, 0]) { |(total_byte_size, total_width), gc|
    mbchar_width = Reline::Unicode.get_mbchar_width(gc)
    break [total_byte_size, total_width] if (total_width + mbchar_width) &gt;= arg
    [total_byte_size + gc.bytesize, total_width + mbchar_width]
  }
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-vi_to_history_line"> <a href="#method-i-vi_to_history_line" title="Link to this method"> <span class="method-name">vi_to_history_line</span> <span class="method-args">(key)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="vi_to_history_line-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2157
        def vi_to_history_line(key)
  if Reline::HISTORY.empty?
    return
  end
  move_history(0, line: :start, cursor: :start)
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-vi_to_next_char"> <a href="#method-i-vi_to_next_char" title="Link to this method"> <span class="method-name">vi_to_next_char</span> <span class="method-args">(key, arg: 1, inclusive: false)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="vi_to_next_char-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2238
        def vi_to_next_char(key, arg: 1, inclusive: false)
  @waiting_proc = -&gt;(key_for_proc) { search_next_char(key_for_proc, arg, need_prev_char: true, inclusive: inclusive) }
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-vi_to_prev_char"> <a href="#method-i-vi_to_prev_char" title="Link to this method"> <span class="method-name">vi_to_prev_char</span> <span class="method-args">(key, arg: 1)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="vi_to_prev_char-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2285
        def vi_to_prev_char(key, arg: 1)
  @waiting_proc = -&gt;(key_for_proc) { search_prev_char(key_for_proc, arg, true) }
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-vi_yank"> <a href="#method-i-vi_yank" title="Link to this method"> <span class="method-name">vi_yank</span> <span class="method-args">(key, arg: nil)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="vi_yank-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2108
        def vi_yank(key, arg: nil)
  if @vi_waiting_operator
    copy_for_vi(current_line) if @vi_waiting_operator == :vi_yank_confirm &amp;&amp; arg.nil?
    @vi_waiting_operator = nil
    @vi_waiting_operator_arg = nil
  else
    @vi_waiting_operator = :vi_yank_confirm
    @vi_waiting_operator_arg = arg || 1
  end
end</pre> </div>  </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-vi_yank_confirm"> <a href="#method-i-vi_yank_confirm" title="Link to this method"> <span class="method-name">vi_yank_confirm</span> <span class="method-args">(byte_pointer_diff)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="vi_yank_confirm-source"> <pre class="ruby" data-language="ruby"># File lib/reline/line_editor.rb, line 2119
        def vi_yank_confirm(byte_pointer_diff)
  if byte_pointer_diff &gt; 0
    cut = current_line.byteslice(@byte_pointer, byte_pointer_diff)
  elsif byte_pointer_diff &lt; 0
    cut = current_line.byteslice(@byte_pointer + byte_pointer_diff, -byte_pointer_diff)
  else
    return
  end
  copy_for_vi(cut)
end</pre> </div>  </div> </div> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    Ruby Core &copy; 1993&ndash;2024 Yukihiro Matsumoto<br>Licensed under the Ruby License.<br>Ruby Standard Library &copy; contributors<br>Licensed under their own licenses.<br>
    
  </p>
</div>
