<h1 id="module-Kernel" class="anchor-link module"> module Kernel </h1> <section class="description"> <p>The <a href="kernel.html"><code>Kernel</code></a> module is included by class <a href="object.html"><code>Object</code></a>, so its methods are available in every Ruby object.</p> <p>The <a href="kernel.html"><code>Kernel</code></a> instance methods are documented in class <a href="object.html"><code>Object</code></a> while the module methods are documented here. These methods are called without a receiver and thus can be called in functional form:</p> <pre class="ruby" data-language="ruby">sprintf "%.1f", 1.234 #=&gt; "1.2"
</pre> <h2 id="module-Kernel-label-What-27s+Here">What’s Here</h2> <p>Module Kernel provides methods that are useful for:</p> <ul>
<li> <p><a href="kernel.html#module-Kernel-label-Converting">Converting</a></p> </li>
<li> <p><a href="kernel.html#module-Kernel-label-Querying">Querying</a></p> </li>
<li> <p><a href="kernel.html#module-Kernel-label-Exiting">Exiting</a></p> </li>
<li> <p><a href="kernel.html#module-Kernel-label-Exceptions">Exceptions</a></p> </li>
<li> <p><a href="kernel.html#module-Kernel-label-IO">IO</a></p> </li>
<li> <p><a href="kernel.html#module-Kernel-label-Procs">Procs</a></p> </li>
<li> <p><a href="kernel.html#module-Kernel-label-Tracing">Tracing</a></p> </li>
<li> <p><a href="kernel.html#module-Kernel-label-Subprocesses">Subprocesses</a></p> </li>
<li> <p><a href="kernel.html#module-Kernel-label-Loading">Loading</a></p> </li>
<li> <p><a href="kernel.html#module-Kernel-label-Yielding">Yielding</a></p> </li>
<li> <p><a href="kernel.html#module-Kernel-label-Random+Values">Random Values</a></p> </li>
<li> <p><a href="kernel.html#module-Kernel-label-Other">Other</a></p> </li>
</ul> <h3 id="module-Kernel-label-Converting">Converting</h3> <ul>
<li> <p><a href="kernel.html#method-i-Array"><code>Array</code></a>: Returns an <a href="array.html"><code>Array</code></a> based on the given argument.</p> </li>
<li> <p><a href="kernel.html#method-i-Complex"><code>Complex</code></a>: Returns a <a href="complex.html"><code>Complex</code></a> based on the given arguments.</p> </li>
<li> <p><a href="kernel.html#method-i-Float"><code>Float</code></a>: Returns a <a href="float.html"><code>Float</code></a> based on the given arguments.</p> </li>
<li> <p><a href="kernel.html#method-i-Hash"><code>Hash</code></a>: Returns a <a href="hash.html"><code>Hash</code></a> based on the given argument.</p> </li>
<li> <p><a href="kernel.html#method-i-Integer"><code>Integer</code></a>: Returns an <a href="integer.html"><code>Integer</code></a> based on the given arguments.</p> </li>
<li> <p><a href="kernel.html#method-i-Rational"><code>Rational</code></a>: Returns a <a href="rational.html"><code>Rational</code></a> based on the given arguments.</p> </li>
<li> <p><a href="kernel.html#method-i-String"><code>String</code></a>: Returns a <a href="string.html"><code>String</code></a> based on the given argument.</p> </li>
</ul> <h3 id="module-Kernel-label-Querying">Querying</h3> <ul>
<li> <p><a href="kernel.html#method-i-__callee__"><code>__callee__</code></a>: Returns the called name of the current method as a symbol.</p> </li>
<li> <p><a href="kernel.html#method-i-__dir__"><code>__dir__</code></a>: Returns the path to the directory from which the current method is called.</p> </li>
<li> <p><a href="kernel.html#method-i-__method__"><code>__method__</code></a>: Returns the name of the current method as a symbol.</p> </li>
<li> <p><a href="kernel.html#method-i-autoload-3F"><code>autoload?</code></a>: Returns the file to be loaded when the given module is referenced.</p> </li>
<li> <p><a href="kernel.html#method-i-binding"><code>binding</code></a>: Returns a <a href="binding.html"><code>Binding</code></a> for the context at the point of call.</p> </li>
<li> <p><a href="kernel.html#method-i-block_given-3F"><code>block_given?</code></a>: Returns <code>true</code> if a block was passed to the calling method.</p> </li>
<li> <p><a href="kernel.html#method-i-caller"><code>caller</code></a>: Returns the current execution stack as an array of strings.</p> </li>
<li> <p><a href="kernel.html#method-i-caller_locations"><code>caller_locations</code></a>: Returns the current execution stack as an array of <a href="thread/backtrace/location.html"><code>Thread::Backtrace::Location</code></a> objects.</p> </li>
<li> <p><a href="kernel.html#method-i-class"><code>class</code></a>: Returns the class of <code>self</code>.</p> </li>
<li> <p><a href="kernel.html#method-i-frozen-3F"><code>frozen?</code></a>: Returns whether <code>self</code> is frozen.</p> </li>
<li> <p><a href="kernel.html#method-i-global_variables"><code>global_variables</code></a>: Returns an array of global variables as symbols.</p> </li>
<li> <p><a href="kernel.html#method-i-local_variables"><code>local_variables</code></a>: Returns an array of local variables as symbols.</p> </li>
<li> <p><a href="kernel.html#method-i-test"><code>test</code></a>: Performs specified tests on the given single file or pair of files.</p> </li>
</ul> <h3 id="module-Kernel-label-Exiting">Exiting</h3> <ul>
<li> <p><a href="kernel.html#method-i-abort"><code>abort</code></a>: Exits the current process after printing the given arguments.</p> </li>
<li> <p><a href="kernel.html#method-i-at_exit"><code>at_exit</code></a>: Executes the given block when the process exits.</p> </li>
<li> <p><a href="kernel.html#method-i-exit"><code>exit</code></a>: Exits the current process after calling any registered <a href="kernel.html#method-i-at_exit"><code>at_exit</code></a> handlers.</p> </li>
<li> <p><a href="kernel.html#method-i-exit-21"><code>exit!</code></a>: Exits the current process without calling any registered <a href="kernel.html#method-i-at_exit"><code>at_exit</code></a> handlers.</p> </li>
</ul> <h3 id="module-Kernel-label-Exceptions">Exceptions</h3> <ul>
<li> <p><a href="kernel.html#method-i-catch"><code>catch</code></a>: Executes the given block, possibly catching a thrown object.</p> </li>
<li> <p><a href="kernel.html#method-i-raise"><code>raise</code></a> (aliased as <a href="kernel.html#method-i-fail"><code>fail</code></a>): Raises an exception based on the given arguments.</p> </li>
<li> <p><a href="kernel.html#method-i-throw"><code>throw</code></a>: Returns from the active catch block waiting for the given tag.</p> </li>
</ul> <h3 id="module-Kernel-label-IO">IO</h3> <ul>
<li> <p><a href="kernel.html#method-c-pp"><code>::pp</code></a>: Prints the given objects in pretty form.</p> </li>
<li> <p><a href="kernel.html#method-i-gets"><code>gets</code></a>: Returns and assigns to <code>$_</code> the next line from the current input.</p> </li>
<li> <p><a href="kernel.html#method-i-open"><code>open</code></a>: Creates an <a href="io.html"><code>IO</code></a> object connected to the given stream, file, or subprocess.</p> </li>
<li> <p><a href="kernel.html#method-i-p"><code>p</code></a>: Prints the given objects’ inspect output to the standard output.</p> </li>
<li> <p><a href="kernel.html#method-i-print"><code>print</code></a>: Prints the given objects to standard output without a newline.</p> </li>
<li> <p><a href="kernel.html#method-i-printf"><code>printf</code></a>: Prints the string resulting from applying the given format string to any additional arguments.</p> </li>
<li> <p><a href="kernel.html#method-i-putc"><code>putc</code></a>: Equivalent to &lt;tt.$stdout.putc(object)&lt;/tt&gt; for the given object.</p> </li>
<li> <p><a href="kernel.html#method-i-puts"><code>puts</code></a>: Equivalent to <code>$stdout.puts(*objects)</code> for the given objects.</p> </li>
<li> <p><a href="kernel.html#method-i-readline"><code>readline</code></a>: Similar to <a href="kernel.html#method-i-gets"><code>gets</code></a>, but raises an exception at the end of file.</p> </li>
<li> <p><a href="kernel.html#method-i-readlines"><code>readlines</code></a>: Returns an array of the remaining lines from the current input.</p> </li>
<li> <p><a href="kernel.html#method-i-select"><code>select</code></a>: Same as <a href="io.html#method-c-select"><code>IO.select</code></a>.</p> </li>
</ul> <h3 id="module-Kernel-label-Procs">Procs</h3> <ul>
<li> <p><a href="kernel.html#method-i-lambda"><code>lambda</code></a>: Returns a lambda proc for the given block.</p> </li>
<li> <p><a href="kernel.html#method-i-proc"><code>proc</code></a>: Returns a new <a href="proc.html"><code>Proc</code></a>; equivalent to <a href="proc.html#method-c-new"><code>Proc.new</code></a>.</p> </li>
</ul> <h3 id="module-Kernel-label-Tracing">Tracing</h3> <ul>
<li> <p><a href="kernel.html#method-i-set_trace_func"><code>set_trace_func</code></a>: Sets the given proc as the handler for tracing, or disables tracing if given <code>nil</code>.</p> </li>
<li> <p><a href="kernel.html#method-i-trace_var"><code>trace_var</code></a>: Starts tracing assignments to the given global variable.</p> </li>
<li> <p><a href="kernel.html#method-i-untrace_var"><code>untrace_var</code></a>: Disables tracing of assignments to the given global variable.</p> </li>
</ul> <h3 id="module-Kernel-label-Subprocesses">Subprocesses</h3> <ul>
<li> <p><a href="kernel.html#method-i-60">`command`</a>: Returns the standard output of running <code>command</code> in a subshell.</p> </li>
<li> <p><a href="kernel.html#method-i-exec"><code>exec</code></a>: Replaces current process with a new process.</p> </li>
<li> <p><a href="kernel.html#method-i-fork"><code>fork</code></a>: Forks the current process into two processes.</p> </li>
<li> <p><a href="kernel.html#method-i-spawn"><code>spawn</code></a>: Executes the given command and returns its pid without waiting for completion.</p> </li>
<li> <p><a href="kernel.html#method-i-system"><code>system</code></a>: Executes the given command in a subshell.</p> </li>
</ul> <h3 id="module-Kernel-label-Loading">Loading</h3> <ul>
<li> <p><a href="kernel.html#method-i-autoload"><code>autoload</code></a>: Registers the given file to be loaded when the given constant is first referenced.</p> </li>
<li> <p><a href="kernel.html#method-i-load"><code>load</code></a>: Loads the given Ruby file.</p> </li>
<li> <p><a href="kernel.html#method-i-require"><code>require</code></a>: Loads the given Ruby file unless it has already been loaded.</p> </li>
<li> <p><a href="kernel.html#method-i-require_relative"><code>require_relative</code></a>: Loads the Ruby file path relative to the calling file, unless it has already been loaded.</p> </li>
</ul> <h3 id="module-Kernel-label-Yielding">Yielding</h3> <ul>
<li> <p><a href="kernel.html#method-i-tap"><code>tap</code></a>: Yields <code>self</code> to the given block; returns <code>self</code>.</p> </li>
<li> <p><a href="kernel.html#method-i-then"><code>then</code></a> (aliased as <a href="kernel.html#method-i-yield_self"><code>yield_self</code></a>): Yields <code>self</code> to the block and returns the result of the block.</p> </li>
</ul> <h3 id="module-Kernel-label-Random+Values">Random Values</h3> <ul>
<li> <p><a href="kernel.html#method-i-rand"><code>rand</code></a>: Returns a pseudo-random floating point number strictly between 0.0 and 1.0.</p> </li>
<li> <p><a href="kernel.html#method-i-srand"><code>srand</code></a>: Seeds the pseudo-random number generator with the given number.</p> </li>
</ul> <h3 id="module-Kernel-label-Other">Other</h3> <ul>
<li> <p><a href="kernel.html#method-i-eval"><code>eval</code></a>: Evaluates the given string as Ruby code.</p> </li>
<li> <p><a href="kernel.html#method-i-loop"><code>loop</code></a>: Repeatedly executes the given block.</p> </li>
<li> <p><a href="kernel.html#method-i-sleep"><code>sleep</code></a>: Suspends the current thread for the given number of seconds.</p> </li>
<li> <p><a href="kernel.html#method-i-sprintf"><code>sprintf</code></a> (aliased as <a href="kernel.html#method-i-format"><code>format</code></a>): Returns the string resulting from applying the given format string to any additional arguments.</p> </li>
<li> <p><a href="kernel.html#method-i-syscall"><code>syscall</code></a>: Runs an operating system call.</p> </li>
<li> <p><a href="kernel.html#method-i-trap"><code>trap</code></a>: Specifies the handling of system signals.</p> </li>
<li> <p><a href="kernel.html#method-i-warn"><code>warn</code></a>: Issue a warning based on the given messages and options.</p> </li>
</ul> </section> <section id="5Buntitled-5D" class="documentation-section anchor-link"> <section id="public-class-5Buntitled-5D-method-details" class="method-section anchor-link"> <header> <h3>Public Class Methods</h3> </header> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-c-URI"> <a href="#method-c-URI" title="Link to this method"> <span class="method-name">URI</span> <span class="method-args">(uri)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="URI-source"> <pre class="ruby" data-language="ruby"># File lib/uri/common.rb, line 865
def URI(uri)
  if uri.is_a?(URI::Generic)
    uri
  elsif uri = String.try_convert(uri)
    URI.parse(uri)
  else
    raise ArgumentError,
      "bad argument (expected URI object or URI string)"
  end
end</pre> </div>  <p>Returns a URI object derived from the given <code>uri</code>, which may be a URI string or an existing URI object:</p> <pre class="ruby" data-language="ruby"># Returns a new URI.
uri = URI('http://github.com/ruby/ruby')
# =&gt; #&lt;URI::HTTP http://github.com/ruby/ruby&gt;
# Returns the given URI.
URI(uri)
# =&gt; #&lt;URI::HTTP http://github.com/ruby/ruby&gt;
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-c-pp"> <a href="#method-c-pp" title="Link to this method"> <span class="method-name">pp</span> <span class="method-args">(*objs)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="pp-source"> <pre class="ruby" data-language="ruby"># File lib/pp.rb, line 692
def pp(*objs)
  objs.each {|obj|
    PP.pp(obj)
  }
  objs.size &lt;= 1 ? objs.first : objs
end</pre> </div>  <p>prints arguments in pretty form.</p> <p><a href="kernel.html#method-i-pp"><code>pp</code></a> returns argument(s).</p> </div> </div> </section> <section id="public-instance-5Buntitled-5D-method-details" class="method-section anchor-link"> <header> <h3>Public Instance Methods</h3> </header> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-__callee__"> <a href="#method-i-__callee__" title="Link to this method"> <span class="method-callseq"> __callee__ → symbol </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="__callee__-source"> <pre class="c" data-language="c">static VALUE
rb_f_callee_name(VALUE _)
{
    ID fname = prev_frame_callee(); /* need *callee* ID */

    if (fname) {
        return ID2SYM(fname);
    }
    else {
        return Qnil;
    }
}</pre> </div>  <p>Returns the called name of the current method as a <a href="symbol.html"><code>Symbol</code></a>. If called outside of a method, it returns <code>nil</code>.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-__dir__"> <a href="#method-i-__dir__" title="Link to this method"> <span class="method-callseq"> __dir__ → string </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="__dir__-source"> <pre class="c" data-language="c">static VALUE
f_current_dirname(VALUE _)
{
    VALUE base = rb_current_realfilepath();
    if (NIL_P(base)) {
        return Qnil;
    }
    base = rb_file_dirname(base);
    return base;
}</pre> </div>  <p>Returns the canonicalized absolute path of the directory of the file from which this method is called. It means symlinks in the path is resolved. If <code>__FILE__</code> is <code>nil</code>, it returns <code>nil</code>. The return value equals to <a href="file.html#method-c-dirname"><code>File.dirname(File.realpath(__FILE__))</code></a>.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-__method__"> <a href="#method-i-__method__" title="Link to this method"> <span class="method-callseq"> __method__ → symbol </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="__method__-source"> <pre class="c" data-language="c">static VALUE
rb_f_method_name(VALUE _)
{
    ID fname = prev_frame_func(); /* need *method* ID */

    if (fname) {
        return ID2SYM(fname);
    }
    else {
        return Qnil;
    }
}</pre> </div>  <p>Returns the name at the definition of the current method as a <a href="symbol.html"><code>Symbol</code></a>. If called outside of a method, it returns <code>nil</code>.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-60"> <a href="#method-i-60" title="Link to this method"> <span class="method-callseq"> `command` → string </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="60-source"> <pre class="c" data-language="c">static VALUE
rb_f_backquote(VALUE obj, VALUE str)
{
    VALUE port;
    VALUE result;
    rb_io_t *fptr;

    StringValue(str);
    rb_last_status_clear();
    port = pipe_open_s(str, "r", FMODE_READABLE|DEFAULT_TEXTMODE, NULL);
    if (NIL_P(port)) return rb_str_new(0,0);

    GetOpenFile(port, fptr);
    result = read_all(fptr, remain_size(fptr), Qnil);
    rb_io_close(port);
    rb_io_fptr_cleanup_all(fptr);
    RB_GC_GUARD(port);

    return result;
}</pre> </div>  <p>Returns the <code>$stdout</code> output from running <code>command</code> in a subshell; sets global variable <code>$?</code> to the process status.</p> <p>This method has potential security vulnerabilities if called with untrusted input; see <a href="command_injection_rdoc.html">Command Injection</a>.</p> <p>Examples:</p> <pre>$ `date`                 # =&gt; "Wed Apr  9 08:56:30 CDT 2003\n"
$ `echo oops &amp;&amp; exit 99` # =&gt; "oops\n"
$ $?                     # =&gt; #&lt;Process::Status: pid 17088 exit 99&gt;
$ $?.status              # =&gt; 99&gt;</pre> <p>The built-in syntax <code>%x{...}</code> uses this method.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-Array"> <a href="#method-i-Array" title="Link to this method"> <span class="method-callseq"> Array(object) → object or new_array </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="Array-source"> <pre class="c" data-language="c">static VALUE
rb_f_array(VALUE obj, VALUE arg)
{
    return rb_Array(arg);
}</pre> </div>  <p>Returns an array converted from <code>object</code>.</p> <p>Tries to convert <code>object</code> to an array using <code>to_ary</code> first and <code>to_a</code> second:</p> <pre class="ruby" data-language="ruby">Array([0, 1, 2])        # =&gt; [0, 1, 2]
Array({foo: 0, bar: 1}) # =&gt; [[:foo, 0], [:bar, 1]]
Array(0..4)             # =&gt; [0, 1, 2, 3, 4]
</pre> <p>Returns <code>object</code> in an array, <code>[object]</code>, if <code>object</code> cannot be converted:</p> <pre class="ruby" data-language="ruby">Array(:foo)             # =&gt; [:foo]
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-Complex"> <a href="#method-i-Complex" title="Link to this method"> <span class="method-callseq"> Complex(real, imag = 0, exception: true) → complex or nil </span> </a> </div> <div class="method-heading"> <a href="#method-i-Complex" title="Link to this method"> <span class="method-callseq"> Complex(s, exception: true) → complex or nil </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="Complex-source"> <pre class="c" data-language="c">static VALUE
nucomp_f_complex(int argc, VALUE *argv, VALUE klass)
{
    VALUE a1, a2, opts = Qnil;
    int raise = TRUE;

    if (rb_scan_args(argc, argv, "11:", &amp;a1, &amp;a2, &amp;opts) == 1) {
        a2 = Qundef;
    }
    if (!NIL_P(opts)) {
        raise = rb_opts_exception_p(opts, raise);
    }
    if (argc &gt; 0 &amp;&amp; CLASS_OF(a1) == rb_cComplex &amp;&amp; UNDEF_P(a2)) {
        return a1;
    }
    return nucomp_convert(rb_cComplex, a1, a2, raise);
}</pre> </div>  <p>Returns a new Complex object if the arguments are valid; otherwise raises an exception if <code>exception</code> is <code>true</code>; otherwise returns <code>nil</code>.</p> <p>With <a href="numeric.html"><code>Numeric</code></a> arguments <code>real</code> and <code>imag</code>, returns <a href="complex.html#method-c-rect"><code>Complex.rect(real, imag)</code></a> if the arguments are valid.</p> <p>With string argument <code>s</code>, returns a new Complex object if the argument is valid; the string may have:</p> <ul>
<li> <p>One or two numeric substrings, each of which specifies a <a href="complex.html"><code>Complex</code></a>, <a href="float.html"><code>Float</code></a>, <a href="integer.html"><code>Integer</code></a>, <a href="numeric.html"><code>Numeric</code></a>, or <a href="rational.html"><code>Rational</code></a> value, specifying <a href="complex.html#class-Complex-label-Rectangular+Coordinates">rectangular coordinates</a>:</p> <ul>
<li> <p>Sign-separated real and imaginary numeric substrings (with trailing character <code>'i'</code>):</p> <pre class="ruby" data-language="ruby">Complex('1+2i')  # =&gt; (1+2i)
Complex('+1+2i') # =&gt; (1+2i)
Complex('+1-2i') # =&gt; (1-2i)
Complex('-1+2i') # =&gt; (-1+2i)
Complex('-1-2i') # =&gt; (-1-2i)
</pre> </li>
<li> <p>Real-only numeric string (without trailing character <code>'i'</code>):</p> <pre class="ruby" data-language="ruby">Complex('1')  # =&gt; (1+0i)
Complex('+1') # =&gt; (1+0i)
Complex('-1') # =&gt; (-1+0i)
</pre> </li>
<li> <p>Imaginary-only numeric string (with trailing character <code>'i'</code>):</p> <pre class="ruby" data-language="ruby">Complex('1i')  # =&gt; (0+1i)
Complex('+1i') # =&gt; (0+1i)
Complex('-1i') # =&gt; (0-1i)
</pre> </li>
</ul> </li>
<li> <p>At-sign separated real and imaginary rational substrings, each of which specifies a <a href="rational.html"><code>Rational</code></a> value, specifying <a href="complex.html#class-Complex-label-Polar+Coordinates">polar coordinates</a>:</p> <pre class="ruby" data-language="ruby">Complex('1/2@3/4')   # =&gt; (0.36584443443691045+0.34081938001166706i)
Complex('+1/2@+3/4') # =&gt; (0.36584443443691045+0.34081938001166706i)
Complex('+1/2@-3/4') # =&gt; (0.36584443443691045-0.34081938001166706i)
Complex('-1/2@+3/4') # =&gt; (-0.36584443443691045-0.34081938001166706i)
Complex('-1/2@-3/4') # =&gt; (-0.36584443443691045+0.34081938001166706i)
</pre> </li>
</ul> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-Float"> <a href="#method-i-Float" title="Link to this method"> <span class="method-callseq"> Float(arg, exception: true) → float or nil </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="Float-source"> <pre class="ruby" data-language="ruby"># File kernel.rb, line 193
def Float(arg, exception: true)
  if Primitive.mandatory_only?
    Primitive.rb_f_float1(arg)
  else
    Primitive.rb_f_float(arg, exception)
  end
end</pre> </div>  <p>Returns <em>arg</em> converted to a float. <a href="numeric.html"><code>Numeric</code></a> types are converted directly, and with exception to <a href="string.html"><code>String</code></a> and <code>nil</code>, the rest are converted using <em>arg</em><code>.to_f</code>. Converting a <a href="string.html"><code>String</code></a> with invalid characters will result in an <a href="argumenterror.html"><code>ArgumentError</code></a>. Converting <code>nil</code> generates a <a href="typeerror.html"><code>TypeError</code></a>. Exceptions can be suppressed by passing <code>exception: false</code>.</p> <pre class="ruby" data-language="ruby">Float(1)                 #=&gt; 1.0
Float("123.456")         #=&gt; 123.456
Float("123.0_badstring") #=&gt; ArgumentError: invalid value for Float(): "123.0_badstring"
Float(nil)               #=&gt; TypeError: can't convert nil into Float
Float("123.0_badstring", exception: false)  #=&gt; nil
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-Hash"> <a href="#method-i-Hash" title="Link to this method"> <span class="method-callseq"> Hash(object) → object or new_hash </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="Hash-source"> <pre class="c" data-language="c">static VALUE
rb_f_hash(VALUE obj, VALUE arg)
{
    return rb_Hash(arg);
}</pre> </div>  <p>Returns a hash converted from <code>object</code>.</p> <ul>
<li> <p>If <code>object</code> is:</p> <ul>
<li> <p>A hash, returns <code>object</code>.</p> </li>
<li> <p>An empty array or <code>nil</code>, returns an empty hash.</p> </li>
</ul> </li>
<li> <p>Otherwise, if <code>object.to_hash</code> returns a hash, returns that hash.</p> </li>
<li> <p>Otherwise, returns <a href="typeerror.html"><code>TypeError</code></a>.</p> </li>
</ul> <p>Examples:</p> <pre class="ruby" data-language="ruby">Hash({foo: 0, bar: 1}) # =&gt; {:foo=&gt;0, :bar=&gt;1}
Hash(nil)              # =&gt; {}
Hash([])               # =&gt; {}
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-Integer"> <a href="#method-i-Integer" title="Link to this method"> <span class="method-callseq"> Integer(object, base = 0, exception: true) → integer or nil </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="Integer-source"> <pre class="ruby" data-language="ruby"># File kernel.rb, line 286
def Integer(arg, base = 0, exception: true)
  if Primitive.mandatory_only?
    Primitive.rb_f_integer1(arg)
  else
    Primitive.rb_f_integer(arg, base, exception)
  end
end</pre> </div>  <p>Returns an integer converted from <code>object</code>.</p> <p>Tries to convert <code>object</code> to an integer using <code>to_int</code> first and <code>to_i</code> second; see below for exceptions.</p> <p>With a non-zero <code>base</code>, <code>object</code> must be a string or convertible to a string.</p> <h4 id="method-i-Integer-label-Numeric+objects">Numeric objects</h4> <p>With an integer argument <code>object</code> given, returns <code>object</code>:</p> <pre class="ruby" data-language="ruby">Integer(1)                # =&gt; 1
Integer(-1)               # =&gt; -1
</pre> <p>With a floating-point argument <code>object</code> given, returns <code>object</code> truncated to an integer:</p> <pre class="ruby" data-language="ruby">Integer(1.9)              # =&gt; 1  # Rounds toward zero.
Integer(-1.9)             # =&gt; -1 # Rounds toward zero.
</pre> <h4 id="method-i-Integer-label-String+objects">String objects</h4> <p>With a string argument <code>object</code> and zero <code>base</code> given, returns <code>object</code> converted to an integer in base 10:</p> <pre class="ruby" data-language="ruby">Integer('100')    # =&gt; 100
Integer('-100')   # =&gt; -100
</pre> <p>With <code>base</code> zero, string <code>object</code> may contain leading characters to specify the actual base (radix indicator):</p> <pre class="ruby" data-language="ruby">Integer('0100')  # =&gt; 64  # Leading '0' specifies base 8.
Integer('0b100') # =&gt; 4   # Leading '0b' specifies base 2.
Integer('0x100') # =&gt; 256 # Leading '0x' specifies base 16.
</pre> <p>With a positive <code>base</code> (in range 2..36) given, returns <code>object</code> converted to an integer in the given base:</p> <pre class="ruby" data-language="ruby">Integer('100', 2)   # =&gt; 4
Integer('100', 8)   # =&gt; 64
Integer('-100', 16) # =&gt; -256
</pre> <p>With a negative <code>base</code> (in range -36..-2) given, returns <code>object</code> converted to the radix indicator if it exists or <code>base</code>:</p> <pre class="ruby" data-language="ruby">Integer('0x100', -2)   # =&gt; 256
Integer('100', -2)     # =&gt; 4
Integer('0b100', -8)   # =&gt; 4
Integer('100', -8)     # =&gt; 64
Integer('0o100', -10)  # =&gt; 64
Integer('100', -10)    # =&gt; 100
</pre> <p><code>base</code> -1 is equivalent to the -10 case.</p> <p>When converting strings, surrounding whitespace and embedded underscores are allowed and ignored:</p> <pre class="ruby" data-language="ruby">Integer(' 100 ')      # =&gt; 100
Integer('-1_0_0', 16) # =&gt; -256
</pre> <h4 id="method-i-Integer-label-Other+classes">Other classes</h4> <p>Examples with <code>object</code> of various other classes:</p> <pre class="ruby" data-language="ruby">Integer(Rational(9, 10)) # =&gt; 0  # Rounds toward zero.
Integer(Complex(2, 0))   # =&gt; 2  # Imaginary part must be zero.
Integer(Time.now)        # =&gt; 1650974042
</pre> <h4 id="method-i-Integer-label-Keywords">Keywords</h4> <p>With the optional keyword argument <code>exception</code> given as <code>true</code> (the default):</p> <ul>
<li> <p>Raises <a href="typeerror.html"><code>TypeError</code></a> if <code>object</code> does not respond to <code>to_int</code> or <code>to_i</code>.</p> </li>
<li> <p>Raises <a href="typeerror.html"><code>TypeError</code></a> if <code>object</code> is <code>nil</code>.</p> </li>
<li> <p>Raises <a href="argumenterror.html"><code>ArgumentError</code></a> if <code>object</code> is an invalid string.</p> </li>
</ul> <p>With <code>exception</code> given as <code>false</code>, an exception of any kind is suppressed and <code>nil</code> is returned.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-Pathname"> <a href="#method-i-Pathname" title="Link to this method"> <span class="method-callseq"> Pathname(path) → pathname </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="Pathname-source"> <pre class="c" data-language="c">static VALUE
path_f_pathname(VALUE self, VALUE str)
{
    if (CLASS_OF(str) == rb_cPathname)
        return str;
    return rb_class_new_instance(1, &amp;str, rb_cPathname);
}</pre> </div>  <p>Creates a new <a href="pathname.html"><code>Pathname</code></a> object from the given string, <code>path</code>, and returns pathname object.</p> <p>In order to use this constructor, you must first require the <a href="pathname.html"><code>Pathname</code></a> standard library extension.</p> <pre class="ruby" data-language="ruby">require 'pathname'
Pathname("/home/zzak")
#=&gt; #&lt;Pathname:/home/zzak&gt;
</pre> <p>See also <a href="pathname.html#method-c-new"><code>Pathname::new</code></a> for more information.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-Rational"> <a href="#method-i-Rational" title="Link to this method"> <span class="method-callseq"> Rational(x, y, exception: true) → rational or nil </span> </a> </div> <div class="method-heading"> <a href="#method-i-Rational" title="Link to this method"> <span class="method-callseq"> Rational(arg, exception: true) → rational or nil </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="Rational-source"> <pre class="c" data-language="c">static VALUE
nurat_f_rational(int argc, VALUE *argv, VALUE klass)
{
    VALUE a1, a2, opts = Qnil;
    int raise = TRUE;

    if (rb_scan_args(argc, argv, "11:", &amp;a1, &amp;a2, &amp;opts) == 1) {
        a2 = Qundef;
    }
    if (!NIL_P(opts)) {
        raise = rb_opts_exception_p(opts, raise);
    }
    return nurat_convert(rb_cRational, a1, a2, raise);
}</pre> </div>  <p>Returns <code>x/y</code> or <code>arg</code> as a <a href="rational.html"><code>Rational</code></a>.</p> <pre class="ruby" data-language="ruby">Rational(2, 3)   #=&gt; (2/3)
Rational(5)      #=&gt; (5/1)
Rational(0.5)    #=&gt; (1/2)
Rational(0.3)    #=&gt; (5404319552844595/18014398509481984)

Rational("2/3")  #=&gt; (2/3)
Rational("0.3")  #=&gt; (3/10)

Rational("10 cents")  #=&gt; ArgumentError
Rational(nil)         #=&gt; TypeError
Rational(1, nil)      #=&gt; TypeError

Rational("10 cents", exception: false)  #=&gt; nil
</pre> <p>Syntax of the string form:</p> <pre>string form = extra spaces , rational , extra spaces ;
rational = [ sign ] , unsigned rational ;
unsigned rational = numerator | numerator , "/" , denominator ;
numerator = integer part | fractional part | integer part , fractional part ;
denominator = digits ;
integer part = digits ;
fractional part = "." , digits , [ ( "e" | "E" ) , [ sign ] , digits ] ;
sign = "-" | "+" ;
digits = digit , { digit | "_" , digit } ;
digit = "0" | "1" | "2" | "3" | "4" | "5" | "6" | "7" | "8" | "9" ;
extra spaces = ? \s* ? ;</pre> <p>See also <a href="string.html#method-i-to_r"><code>String#to_r</code></a>.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-String"> <a href="#method-i-String" title="Link to this method"> <span class="method-callseq"> String(object) → object or new_string </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="String-source"> <pre class="c" data-language="c">static VALUE
rb_f_string(VALUE obj, VALUE arg)
{
    return rb_String(arg);
}</pre> </div>  <p>Returns a string converted from <code>object</code>.</p> <p>Tries to convert <code>object</code> to a string using <code>to_str</code> first and <code>to_s</code> second:</p> <pre class="ruby" data-language="ruby">String([0, 1, 2])        # =&gt; "[0, 1, 2]"
String(0..5)             # =&gt; "0..5"
String({foo: 0, bar: 1}) # =&gt; "{foo: 0, bar: 1}"
</pre> <p>Raises <a href="typeerror.html"><code>TypeError</code></a> if <code>object</code> cannot be converted to a string.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-abort"> <a href="#method-i-abort" title="Link to this method"> <span class="method-callseq"> abort </span> </a> </div> <div class="method-heading"> <a href="#method-i-abort" title="Link to this method"> <span class="method-callseq"> abort(msg = nil) </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="abort-source"> <pre class="c" data-language="c">static VALUE
f_abort(int c, const VALUE *a, VALUE _)
{
    rb_f_abort(c, a);
    UNREACHABLE_RETURN(Qnil);
}</pre> </div>  <p>Terminates execution immediately, effectively by calling <a href="kernel.html#method-i-exit"><code>Kernel.exit(false)</code></a>.</p> <p>If string argument <code>msg</code> is given, it is written to STDERR prior to termination; otherwise, if an exception was raised, prints its message and backtrace.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-at_exit"> <a href="#method-i-at_exit" title="Link to this method"> <span class="method-callseq"> at_exit { block } → proc </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="at_exit-source"> <pre class="c" data-language="c">static VALUE
rb_f_at_exit(VALUE _)
{
    VALUE proc;

    if (!rb_block_given_p()) {
        rb_raise(rb_eArgError, "called without a block");
    }
    proc = rb_block_proc();
    rb_set_end_proc(rb_call_end_proc, proc);
    return proc;
}</pre> </div>  <p>Converts <em>block</em> to a <a href="proc.html"><code>Proc</code></a> object (and therefore binds it at the point of call) and registers it for execution when the program exits. If multiple handlers are registered, they are executed in reverse order of registration.</p> <pre class="ruby" data-language="ruby">def do_at_exit(str1)
  at_exit { print str1 }
end
at_exit { puts "cruel world" }
do_at_exit("goodbye ")
exit
</pre> <p><em>produces:</em></p> <pre class="ruby" data-language="ruby">goodbye cruel world
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-autoload"> <a href="#method-i-autoload" title="Link to this method"> <span class="method-callseq"> autoload(const, filename) → nil </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="autoload-source"> <pre class="c" data-language="c">static VALUE
rb_f_autoload(VALUE obj, VALUE sym, VALUE file)
{
    VALUE klass = rb_class_real(rb_vm_cbase());
    if (!klass) {
        rb_raise(rb_eTypeError, "Can not set autoload on singleton class");
    }
    return rb_mod_autoload(klass, sym, file);
}</pre> </div>  <p>Registers <em>filename</em> to be loaded (using Kernel::require) the first time that <em>const</em> (which may be a <a href="string.html"><code>String</code></a> or a symbol) is accessed.</p> <pre class="ruby" data-language="ruby">autoload(:MyModule, "/usr/local/lib/modules/my_module.rb")
</pre> <p>If <em>const</em> is defined as autoload, the file name to be loaded is replaced with <em>filename</em>. If <em>const</em> is defined but not as autoload, does nothing.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-autoload-3F"> <a href="#method-i-autoload-3F" title="Link to this method"> <span class="method-callseq"> autoload?(name, inherit=true) → String or nil </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="autoload-3F-source"> <pre class="c" data-language="c">static VALUE
rb_f_autoload_p(int argc, VALUE *argv, VALUE obj)
{
    /* use rb_vm_cbase() as same as rb_f_autoload. */
    VALUE klass = rb_vm_cbase();
    if (NIL_P(klass)) {
        return Qnil;
    }
    return rb_mod_autoload_p(argc, argv, klass);
}</pre> </div>  <p>Returns <em>filename</em> to be loaded if <em>name</em> is registered as <code>autoload</code> in the current namespace or one of its ancestors.</p> <pre class="ruby" data-language="ruby">autoload(:B, "b")
autoload?(:B)            #=&gt; "b"

module C
  autoload(:D, "d")
  autoload?(:D)          #=&gt; "d"
  autoload?(:B)          #=&gt; nil
end

class E
  autoload(:F, "f")
  autoload?(:F)          #=&gt; "f"
  autoload?(:B)          #=&gt; "b"
end
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-binding"> <a href="#method-i-binding" title="Link to this method"> <span class="method-callseq"> binding → a_binding </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="binding-source"> <pre class="c" data-language="c">static VALUE
rb_f_binding(VALUE self)
{
    return rb_binding_new();
}</pre> </div>  <p>Returns a <a href="binding.html"><code>Binding</code></a> object, describing the variable and method bindings at the point of call. This object can be used when calling <a href="binding.html#method-i-eval"><code>Binding#eval</code></a> to execute the evaluated command in this environment, or extracting its local variables.</p> <pre class="ruby" data-language="ruby">class User
  def initialize(name, position)
    @name = name
    @position = position
  end

  def get_binding
    binding
  end
end

user = User.new('Joan', 'manager')
template = '{name: @name, position: @position}'

# evaluate template in context of the object
eval(template, user.get_binding)
#=&gt; {:name=&gt;"Joan", :position=&gt;"manager"}
</pre> <p><a href="binding.html#method-i-local_variable_get"><code>Binding#local_variable_get</code></a> can be used to access the variables whose names are reserved Ruby keywords:</p> <pre class="ruby" data-language="ruby"># This is valid parameter declaration, but `if` parameter can't
# be accessed by name, because it is a reserved word.
def validate(field, validation, if: nil)
  condition = binding.local_variable_get('if')
  return unless condition

  # ...Some implementation ...
end

validate(:name, :empty?, if: false) # skips validation
validate(:name, :empty?, if: true) # performs validation
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-block_given-3F"> <a href="#method-i-block_given-3F" title="Link to this method"> <span class="method-callseq"> block_given? → true or false </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="block_given-3F-source"> <pre class="c" data-language="c">static VALUE
rb_f_block_given_p(VALUE _)
{
    rb_execution_context_t *ec = GET_EC();
    rb_control_frame_t *cfp = ec-&gt;cfp;
    cfp = vm_get_ruby_level_caller_cfp(ec, RUBY_VM_PREVIOUS_CONTROL_FRAME(cfp));

    return RBOOL(cfp != NULL &amp;&amp; VM_CF_BLOCK_HANDLER(cfp) != VM_BLOCK_HANDLER_NONE);
}</pre> </div>  <p>Returns <code>true</code> if <code>yield</code> would execute a block in the current context. The <code>iterator?</code> form is mildly deprecated.</p> <pre class="ruby" data-language="ruby">def try
  if block_given?
    yield
  else
    "no block"
  end
end
try                  #=&gt; "no block"
try { "hello" }      #=&gt; "hello"
try do "hello" end   #=&gt; "hello"
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-callcc"> <a href="#method-i-callcc" title="Link to this method"> <span class="method-callseq"> callcc {|cont| block } → obj </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="callcc-source"> <pre class="c" data-language="c">static VALUE
rb_callcc(VALUE self)
{
    volatile int called;
    volatile VALUE val = cont_capture(&amp;called);

    if (called) {
        return val;
    }
    else {
        return rb_yield(val);
    }
}</pre> </div>  <p>Generates a <a href="continuation.html"><code>Continuation</code></a> object, which it passes to the associated block. You need to <code>require 'continuation'</code> before using this method. Performing a <em>cont</em><code>.call</code> will cause the <a href="kernel.html#method-i-callcc"><code>callcc</code></a> to return (as will falling through the end of the block). The value returned by the <a href="kernel.html#method-i-callcc"><code>callcc</code></a> is the value of the block, or the value passed to <em>cont</em><code>.call</code>. See class <a href="continuation.html"><code>Continuation</code></a> for more details. Also see <a href="kernel.html#method-i-throw"><code>Kernel#throw</code></a> for an alternative mechanism for unwinding a call stack.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-caller"> <a href="#method-i-caller" title="Link to this method"> <span class="method-callseq"> caller(start=1, length=nil) → array or nil </span> </a> </div> <div class="method-heading"> <a href="#method-i-caller" title="Link to this method"> <span class="method-callseq"> caller(range) → array or nil </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="caller-source"> <pre class="c" data-language="c">static VALUE
rb_f_caller(int argc, VALUE *argv, VALUE _)
{
    return ec_backtrace_to_ary(GET_EC(), argc, argv, 1, 1, 1);
}</pre> </div>  <p>Returns the current execution stack—an array containing strings in the form <code>file:line</code> or <code>file:line: in `method'</code>.</p> <p>The optional <em>start</em> parameter determines the number of initial stack entries to omit from the top of the stack.</p> <p>A second optional <code>length</code> parameter can be used to limit how many entries are returned from the stack.</p> <p>Returns <code>nil</code> if <em>start</em> is greater than the size of current execution stack.</p> <p>Optionally you can pass a range, which will return an array containing the entries within the specified range.</p> <pre class="ruby" data-language="ruby">def a(skip)
  caller(skip)
end
def b(skip)
  a(skip)
end
def c(skip)
  b(skip)
end
c(0)   #=&gt; ["prog:2:in `a'", "prog:5:in `b'", "prog:8:in `c'", "prog:10:in `&lt;main&gt;'"]
c(1)   #=&gt; ["prog:5:in `b'", "prog:8:in `c'", "prog:11:in `&lt;main&gt;'"]
c(2)   #=&gt; ["prog:8:in `c'", "prog:12:in `&lt;main&gt;'"]
c(3)   #=&gt; ["prog:13:in `&lt;main&gt;'"]
c(4)   #=&gt; []
c(5)   #=&gt; nil
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-caller_locations"> <a href="#method-i-caller_locations" title="Link to this method"> <span class="method-callseq"> caller_locations(start=1, length=nil) → array or nil </span> </a> </div> <div class="method-heading"> <a href="#method-i-caller_locations" title="Link to this method"> <span class="method-callseq"> caller_locations(range) → array or nil </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="caller_locations-source"> <pre class="c" data-language="c">static VALUE
rb_f_caller_locations(int argc, VALUE *argv, VALUE _)
{
    return ec_backtrace_to_ary(GET_EC(), argc, argv, 1, 1, 0);
}</pre> </div>  <p>Returns the current execution stack—an array containing backtrace location objects.</p> <p>See <a href="thread/backtrace/location.html"><code>Thread::Backtrace::Location</code></a> for more information.</p> <p>The optional <em>start</em> parameter determines the number of initial stack entries to omit from the top of the stack.</p> <p>A second optional <code>length</code> parameter can be used to limit how many entries are returned from the stack.</p> <p>Returns <code>nil</code> if <em>start</em> is greater than the size of current execution stack.</p> <p>Optionally you can pass a range, which will return an array containing the entries within the specified range.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-catch"> <a href="#method-i-catch" title="Link to this method"> <span class="method-callseq"> catch([tag]) {|tag| block } → obj </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="catch-source"> <pre class="c" data-language="c">static VALUE
rb_f_catch(int argc, VALUE *argv, VALUE self)
{
    VALUE tag = rb_check_arity(argc, 0, 1) ? argv[0] : rb_obj_alloc(rb_cObject);
    return rb_catch_obj(tag, catch_i, 0);
}</pre> </div>  <p><code>catch</code> executes its block. If <code>throw</code> is not called, the block executes normally, and <code>catch</code> returns the value of the last expression evaluated.</p> <pre class="ruby" data-language="ruby">catch(1) { 123 }            # =&gt; 123
</pre> <p>If <code>throw(tag2, val)</code> is called, Ruby searches up its stack for a <code>catch</code> block whose <code>tag</code> has the same <code>object_id</code> as <em>tag2</em>. When found, the block stops executing and returns <em>val</em> (or <code>nil</code> if no second argument was given to <code>throw</code>).</p> <pre class="ruby" data-language="ruby">catch(1) { throw(1, 456) }  # =&gt; 456
catch(1) { throw(1) }       # =&gt; nil
</pre> <p>When <code>tag</code> is passed as the first argument, <code>catch</code> yields it as the parameter of the block.</p> <pre class="ruby" data-language="ruby">catch(1) {|x| x + 2 }       # =&gt; 3
</pre> <p>When no <code>tag</code> is given, <code>catch</code> yields a new unique object (as from <a href="basicobject.html#method-c-new"><code>Object.new</code></a>) as the block parameter. This object can then be used as the argument to <code>throw</code>, and will match the correct <code>catch</code> block.</p> <pre class="ruby" data-language="ruby">catch do |obj_A|
  catch do |obj_B|
    throw(obj_B, 123)
    puts "This puts is not reached"
  end

  puts "This puts is displayed"
  456
end

# =&gt; 456

catch do |obj_A|
  catch do |obj_B|
    throw(obj_A, 123)
    puts "This puts is still not reached"
  end

  puts "Now this puts is also not reached"
  456
end

# =&gt; 123
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-chomp"> <a href="#method-i-chomp" title="Link to this method"> <span class="method-callseq"> chomp → $_ </span> </a> </div> <div class="method-heading"> <a href="#method-i-chomp" title="Link to this method"> <span class="method-callseq"> chomp(string) → $_ </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="chomp-source"> <pre class="c" data-language="c">static VALUE
rb_f_chomp(int argc, VALUE *argv, VALUE _)
{
    VALUE str = rb_funcall_passing_block(uscore_get(), rb_intern("chomp"), argc, argv);
    rb_lastline_set(str);
    return str;
}</pre> </div>  <p>Equivalent to <code>$_ = $_.chomp(<em>string</em>)</code>. See <a href="string.html#method-i-chomp"><code>String#chomp</code></a>. Available only when -p/-n command line option specified.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-chop"> <a href="#method-i-chop" title="Link to this method"> <span class="method-callseq"> chop → $_ </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="chop-source"> <pre class="c" data-language="c">static VALUE
rb_f_chop(VALUE _)
{
    VALUE str = rb_funcall_passing_block(uscore_get(), rb_intern("chop"), 0, 0);
    rb_lastline_set(str);
    return str;
}</pre> </div>  <p>Equivalent to <code>($_.dup).chop!</code>, except <code>nil</code> is never returned. See <a href="string.html#method-i-chop-21"><code>String#chop!</code></a>. Available only when -p/-n command line option specified.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-class"> <a href="#method-i-class" title="Link to this method"> <span class="method-callseq"> class → class </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="class-source"> <pre class="ruby" data-language="ruby"># File kernel.rb, line 18
def class
  Primitive.attr! :leaf
  Primitive.cexpr! 'rb_obj_class(self)'
end</pre> </div>  <p>Returns the class of <em>obj</em>. This method must always be called with an explicit receiver, as <a href="kernel.html#method-i-class"><code>class</code></a> is also a reserved word in Ruby.</p> <pre class="ruby" data-language="ruby">1.class      #=&gt; Integer
self.class   #=&gt; Object
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-clone"> <a href="#method-i-clone" title="Link to this method"> <span class="method-callseq"> clone(freeze: nil) → an_object </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="clone-source"> <pre class="ruby" data-language="ruby"># File kernel.rb, line 47
def clone(freeze: nil)
  Primitive.rb_obj_clone2(freeze)
end</pre> </div>  <p>Produces a shallow copy of <em>obj</em>—the instance variables of <em>obj</em> are copied, but not the objects they reference. <a href="kernel.html#method-i-clone"><code>clone</code></a> copies the frozen value state of <em>obj</em>, unless the <code>:freeze</code> keyword argument is given with a false or true value. See also the discussion under <a href="object.html#method-i-dup"><code>Object#dup</code></a>.</p> <pre class="ruby" data-language="ruby">class Klass
   attr_accessor :str
end
s1 = Klass.new      #=&gt; #&lt;Klass:0x401b3a38&gt;
s1.str = "Hello"    #=&gt; "Hello"
s2 = s1.clone       #=&gt; #&lt;Klass:0x401b3998 @str="Hello"&gt;
s2.str[1,4] = "i"   #=&gt; "i"
s1.inspect          #=&gt; "#&lt;Klass:0x401b3a38 @str=\"Hi\"&gt;"
s2.inspect          #=&gt; "#&lt;Klass:0x401b3998 @str=\"Hi\"&gt;"
</pre> <p>This method may have class-specific behavior. If so, that behavior will be documented under the #<code>initialize_copy</code> method of the class.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-eval"> <a href="#method-i-eval" title="Link to this method"> <span class="method-callseq"> eval(string [, binding [, filename [,lineno]]]) → obj </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="eval-source"> <pre class="c" data-language="c">VALUE
rb_f_eval(int argc, const VALUE *argv, VALUE self)
{
    VALUE src, scope, vfile, vline;
    VALUE file = Qundef;
    int line = 1;

    rb_scan_args(argc, argv, "13", &amp;src, &amp;scope, &amp;vfile, &amp;vline);
    StringValue(src);
    if (argc &gt;= 3) {
        StringValue(vfile);
    }
    if (argc &gt;= 4) {
        line = NUM2INT(vline);
    }

    if (!NIL_P(vfile))
        file = vfile;

    if (NIL_P(scope))
        return eval_string_with_cref(self, src, NULL, file, line);
    else
        return eval_string_with_scope(scope, src, file, line);
}</pre> </div>  <p>Evaluates the Ruby expression(s) in <em>string</em>. If <em>binding</em> is given, which must be a <a href="binding.html"><code>Binding</code></a> object, the evaluation is performed in its context. If the optional <em>filename</em> and <em>lineno</em> parameters are present, they will be used when reporting syntax errors.</p> <pre class="ruby" data-language="ruby">def get_binding(str)
  return binding
end
str = "hello"
eval "str + ' Fred'"                      #=&gt; "hello Fred"
eval "str + ' Fred'", get_binding("bye")  #=&gt; "bye Fred"
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-exec"> <a href="#method-i-exec" title="Link to this method"> <span class="method-callseq"> exec([env, ] command_line, options = {}) </span> </a> </div> <div class="method-heading"> <a href="#method-i-exec" title="Link to this method"> <span class="method-callseq"> exec([env, ] exe_path, *args, options = {}) </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="exec-source"> <pre class="c" data-language="c">static VALUE
f_exec(int c, const VALUE *a, VALUE _)
{
    rb_f_exec(c, a);
    UNREACHABLE_RETURN(Qnil);
}</pre> </div>  <p>Replaces the current process by doing one of the following:</p> <ul>
<li> <p>Passing string <code>command_line</code> to the shell.</p> </li>
<li> <p>Invoking the executable at <code>exe_path</code>.</p> </li>
</ul> <p>This method has potential security vulnerabilities if called with untrusted input; see <a href="command_injection_rdoc.html">Command Injection</a>.</p> <p>The new process is created using the <a href="https://pubs.opengroup.org/onlinepubs/9699919799.2018edition/functions/execve.html">exec system call</a>; it may inherit some of its environment from the calling program (possibly including open file descriptors).</p> <p>Argument <code>env</code>, if given, is a hash that affects <a href="env.html"><code>ENV</code></a> for the new process; see <a href="process.html#module-Process-label-Execution+Environment">Execution Environment</a>.</p> <p>Argument <code>options</code> is a hash of options for the new process; see <a href="process.html#module-Process-label-Execution+Options">Execution Options</a>.</p> <p>The first required argument is one of the following:</p> <ul>
<li> <p><code>command_line</code> if it is a string, and if it begins with a shell reserved word or special built-in, or if it contains one or more meta characters.</p> </li>
<li> <p><code>exe_path</code> otherwise.</p> </li>
</ul> <p><strong>Argument <code>command_line</code></strong></p> <p>String argument <code>command_line</code> is a command line to be passed to a shell; it must begin with a shell reserved word, begin with a special built-in, or contain meta characters:</p> <pre class="ruby" data-language="ruby">exec('if true; then echo "Foo"; fi') # Shell reserved word.
exec('exit')                         # Built-in.
exec('date &gt; date.tmp')              # Contains meta character.
</pre> <p>The command line may also contain arguments and options for the command:</p> <pre class="ruby" data-language="ruby">exec('echo "Foo"')
</pre> <p>Output:</p> <pre class="ruby" data-language="ruby">Foo
</pre> <p>See <a href="process.html#module-Process-label-Execution+Shell">Execution Shell</a> for details about the shell.</p> <p>Raises an exception if the new process could not execute.</p> <p><strong>Argument <code>exe_path</code></strong></p> <p>Argument <code>exe_path</code> is one of the following:</p> <ul>
<li> <p>The string path to an executable to be called.</p> </li>
<li> <p>A 2-element array containing the path to an executable and the string to be used as the name of the executing process.</p> </li>
</ul> <p>Example:</p> <pre class="ruby" data-language="ruby">exec('/usr/bin/date')
</pre> <p>Output:</p> <pre>Sat Aug 26 09:38:00 AM CDT 2023</pre> <p>Ruby invokes the executable directly. This form does not use the shell; see <a href="process.html#module-Process-label-Arguments+args">Arguments args</a> for caveats.</p> <pre class="ruby" data-language="ruby">exec('doesnt_exist') # Raises Errno::ENOENT
</pre> <p>If one or more <code>args</code> is given, each is an argument or option to be passed to the executable:</p> <pre class="ruby" data-language="ruby">exec('echo', 'C*')
exec('echo', 'hello', 'world')
</pre> <p>Output:</p> <pre>C*
hello world</pre> <p>Raises an exception if the new process could not execute.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-exit"> <a href="#method-i-exit" title="Link to this method"> <span class="method-callseq"> exit(status = true) </span> </a> </div> <div class="method-heading"> <a href="#method-i-exit" title="Link to this method"> <span class="method-callseq"> exit(status = true) </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="exit-source"> <pre class="c" data-language="c">static VALUE
f_exit(int c, const VALUE *a, VALUE _)
{
    rb_f_exit(c, a);
    UNREACHABLE_RETURN(Qnil);
}</pre> </div>  <p>Initiates termination of the Ruby script by raising <a href="systemexit.html"><code>SystemExit</code></a>; the exception may be caught. Returns exit status <code>status</code> to the underlying operating system.</p> <p>Values <code>true</code> and <code>false</code> for argument <code>status</code> indicate, respectively, success and failure; The meanings of integer values are system-dependent.</p> <p>Example:</p> <pre class="ruby" data-language="ruby">begin
  exit
  puts 'Never get here.'
rescue SystemExit
  puts 'Rescued a SystemExit exception.'
end
puts 'After begin block.'
</pre> <p>Output:</p> <pre>Rescued a SystemExit exception.
After begin block.</pre> <p>Just prior to final termination, Ruby executes any at-exit procedures (see Kernel::at_exit) and any object finalizers (see <a href="objectspace.html#method-c-define_finalizer"><code>ObjectSpace::define_finalizer</code></a>).</p> <p>Example:</p> <pre class="ruby" data-language="ruby">at_exit { puts 'In at_exit function.' }
ObjectSpace.define_finalizer('string', proc { puts 'In finalizer.' })
exit
</pre> <p>Output:</p> <pre>In at_exit function.
In finalizer.</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-exit-21"> <a href="#method-i-exit-21" title="Link to this method"> <span class="method-callseq"> exit!(status = false) </span> </a> </div> <div class="method-heading"> <a href="#method-i-exit-21" title="Link to this method"> <span class="method-callseq"> exit!(status = false) </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="exit-21-source"> <pre class="c" data-language="c">static VALUE
rb_f_exit_bang(int argc, VALUE *argv, VALUE obj)
{
    int istatus;

    if (rb_check_arity(argc, 0, 1) == 1) {
        istatus = exit_status_code(argv[0]);
    }
    else {
        istatus = EXIT_FAILURE;
    }
    _exit(istatus);

    UNREACHABLE_RETURN(Qnil);
}</pre> </div>  <p>Exits the process immediately; no exit handlers are called. Returns exit status <code>status</code> to the underlying operating system.</p> <pre class="ruby" data-language="ruby">Process.exit!(true)
</pre> <p>Values <code>true</code> and <code>false</code> for argument <code>status</code> indicate, respectively, success and failure; The meanings of integer values are system-dependent.</p> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-fail"> <a href="#method-i-fail" title="Link to this method"> <span class="method-name">fail</span> </a> </div> </div> <div class="aliases"> Alias for: <a href="kernel.html#method-i-raise">raise</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-fork"> <a href="#method-i-fork" title="Link to this method"> <span class="method-callseq"> fork { ... } → integer or nil </span> </a> </div> <div class="method-heading"> <a href="#method-i-fork" title="Link to this method"> <span class="method-callseq"> fork → integer or nil </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="fork-source"> <pre class="c" data-language="c">static VALUE
rb_f_fork(VALUE obj)
{
    rb_pid_t pid;

    pid = rb_call_proc__fork();

    if (pid == 0) {
        if (rb_block_given_p()) {
            int status;
            rb_protect(rb_yield, Qundef, &amp;status);
            ruby_stop(status);
        }
        return Qnil;
    }

    return PIDT2NUM(pid);
}</pre> </div>  <p>Creates a child process.</p> <p>With a block given, runs the block in the child process; on block exit, the child terminates with a status of zero:</p> <pre class="ruby" data-language="ruby">puts "Before the fork: #{Process.pid}"
fork do
  puts "In the child process: #{Process.pid}"
end                   # =&gt; 382141
puts "After the fork: #{Process.pid}"
</pre> <p>Output:</p> <pre class="ruby" data-language="ruby">Before the fork: 420496
After the fork: 420496
In the child process: 420520
</pre> <p>With no block given, the <code>fork</code> call returns twice:</p> <ul>
<li> <p>Once in the parent process, returning the pid of the child process.</p> </li>
<li> <p>Once in the child process, returning <code>nil</code>.</p> </li>
</ul> <p>Example:</p> <pre class="ruby" data-language="ruby">puts "This is the first line before the fork (pid #{Process.pid})"
puts fork
puts "This is the second line after the fork (pid #{Process.pid})"
</pre> <p>Output:</p> <pre class="ruby" data-language="ruby">This is the first line before the fork (pid 420199)
420223
This is the second line after the fork (pid 420199)

This is the second line after the fork (pid 420223)
</pre> <p>In either case, the child process may exit using <a href="kernel.html#method-i-exit-21"><code>Kernel.exit!</code></a> to avoid the call to <a href="kernel.html#method-i-at_exit"><code>Kernel#at_exit</code></a>.</p> <p>To avoid zombie processes, the parent process should call either:</p> <ul>
<li> <p><a href="process.html#method-c-wait"><code>Process.wait</code></a>, to collect the termination statuses of its children.</p> </li>
<li> <p><a href="process.html#method-c-detach"><code>Process.detach</code></a>, to register disinterest in their status.</p> </li>
</ul> <p>The thread calling <code>fork</code> is the only thread in the created child process; <code>fork</code> doesn’t copy other threads.</p> <p>Note that method <code>fork</code> is available on some platforms, but not on others:</p> <pre class="ruby" data-language="ruby">Process.respond_to?(:fork) # =&gt; true # Would be false on some.
</pre> <p>If not, you may use ::spawn instead of <code>fork</code>.</p> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-format"> <a href="#method-i-format" title="Link to this method"> <span class="method-name">format</span> </a> </div> </div> <div class="aliases"> Alias for: <a href="kernel.html#method-i-sprintf">sprintf</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-frozen-3F"> <a href="#method-i-frozen-3F" title="Link to this method"> <span class="method-callseq"> frozen? → true or false </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="frozen-3F-source"> <pre class="ruby" data-language="ruby"># File kernel.rb, line 67
def frozen?
  Primitive.attr! :leaf
  Primitive.cexpr! 'rb_obj_frozen_p(self)'
end</pre> </div>  <p>Returns the freeze status of <em>obj</em>.</p> <pre class="ruby" data-language="ruby">a = [ "a", "b", "c" ]
a.freeze    #=&gt; ["a", "b", "c"]
a.frozen?   #=&gt; true
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-gets"> <a href="#method-i-gets" title="Link to this method"> <span class="method-callseq"> gets(sep=$/ [, getline_args]) → string or nil </span> </a> </div> <div class="method-heading"> <a href="#method-i-gets" title="Link to this method"> <span class="method-callseq"> gets(limit [, getline_args]) → string or nil </span> </a> </div> <div class="method-heading"> <a href="#method-i-gets" title="Link to this method"> <span class="method-callseq"> gets(sep, limit [, getline_args]) → string or nil </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="gets-source"> <pre class="c" data-language="c">static VALUE
rb_f_gets(int argc, VALUE *argv, VALUE recv)
{
    if (recv == argf) {
        return argf_gets(argc, argv, argf);
    }
    return forward(argf, idGets, argc, argv);
}</pre> </div>  <p>Returns (and assigns to <code>$_</code>) the next line from the list of files in <code>ARGV</code> (or <code>$*</code>), or from standard input if no files are present on the command line. Returns <code>nil</code> at end of file. The optional argument specifies the record separator. The separator is included with the contents of each record. A separator of <code>nil</code> reads the entire contents, and a zero-length separator reads the input one paragraph at a time, where paragraphs are divided by two consecutive newlines. If the first argument is an integer, or optional second argument is given, the returning string would not be longer than the given value in bytes. If multiple filenames are present in <code>ARGV</code>, <code>gets(nil)</code> will read the contents one file at a time.</p> <pre class="ruby" data-language="ruby">ARGV &lt;&lt; "testfile"
print while gets
</pre> <p><em>produces:</em></p> <pre class="ruby" data-language="ruby">This is line one
This is line two
This is line three
And so on...
</pre> <p>The style of programming using <code>$_</code> as an implicit parameter is gradually losing favor in the Ruby community.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-global_variables"> <a href="#method-i-global_variables" title="Link to this method"> <span class="method-callseq"> global_variables → array </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="global_variables-source"> <pre class="c" data-language="c">static VALUE
f_global_variables(VALUE _)
{
    return rb_f_global_variables();
}</pre> </div>  <p>Returns an array of the names of global variables. This includes special regexp global variables such as <code>$~</code> and <code>$+</code>, but does not include the numbered regexp global variables (<code>$1</code>, <code>$2</code>, etc.).</p> <pre class="ruby" data-language="ruby">global_variables.grep /std/   #=&gt; [:$stdin, :$stdout, :$stderr]
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-gsub"> <a href="#method-i-gsub" title="Link to this method"> <span class="method-callseq"> gsub(pattern, replacement) → $_ </span> </a> </div> <div class="method-heading"> <a href="#method-i-gsub" title="Link to this method"> <span class="method-callseq"> gsub(pattern) {|...| block } → $_ </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="gsub-source"> <pre class="c" data-language="c">static VALUE
rb_f_gsub(int argc, VALUE *argv, VALUE _)
{
    VALUE str = rb_funcall_passing_block(uscore_get(), rb_intern("gsub"), argc, argv);
    rb_lastline_set(str);
    return str;
}</pre> </div>  <p>Equivalent to <code>$_.gsub...</code>, except that <code>$_</code> will be updated if substitution occurs. Available only when -p/-n command line option specified.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-iterator-3F"> <a href="#method-i-iterator-3F" title="Link to this method"> <span class="method-callseq"> iterator? → true or false </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="iterator-3F-source"> <pre class="c" data-language="c">static VALUE
rb_f_iterator_p(VALUE self)
{
    rb_warn_deprecated("iterator?", "block_given?");
    return rb_f_block_given_p(self);
}</pre> </div>  <p>Deprecated. Use block_given? instead.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-lambda"> <a href="#method-i-lambda" title="Link to this method"> <span class="method-callseq"> lambda { |...| block } → a_proc </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="lambda-source"> <pre class="c" data-language="c">static VALUE
f_lambda(VALUE _)
{
    f_lambda_filter_non_literal();
    return rb_block_lambda();
}</pre> </div>  <p>Equivalent to <a href="proc.html#method-c-new"><code>Proc.new</code></a>, except the resulting <a href="proc.html"><code>Proc</code></a> objects check the number of parameters passed when called.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-load"> <a href="#method-i-load" title="Link to this method"> <span class="method-callseq"> load(filename, wrap=false) → true </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="load-source"> <pre class="c" data-language="c">static VALUE
rb_f_load(int argc, VALUE *argv, VALUE _)
{
    VALUE fname, wrap, path, orig_fname;

    rb_scan_args(argc, argv, "11", &amp;fname, &amp;wrap);

    orig_fname = rb_get_path_check_to_string(fname);
    fname = rb_str_encode_ospath(orig_fname);
    RUBY_DTRACE_HOOK(LOAD_ENTRY, RSTRING_PTR(orig_fname));

    path = rb_find_file(fname);
    if (!path) {
        if (!rb_file_load_ok(RSTRING_PTR(fname)))
            load_failed(orig_fname);
        path = fname;
    }
    rb_load_internal(path, wrap);

    RUBY_DTRACE_HOOK(LOAD_RETURN, RSTRING_PTR(orig_fname));

    return Qtrue;
}</pre> </div>  <p>Loads and executes the Ruby program in the file <em>filename</em>.</p> <p>If the filename is an absolute path (e.g. starts with ‘/’), the file will be loaded directly using the absolute path.</p> <p>If the filename is an explicit relative path (e.g. starts with ‘./’ or ‘../’), the file will be loaded using the relative path from the current directory.</p> <p>Otherwise, the file will be searched for in the library directories listed in <code>$LOAD_PATH</code> (<code>$:</code>). If the file is found in a directory, it will attempt to load the file relative to that directory. If the file is not found in any of the directories in <code>$LOAD_PATH</code>, the file will be loaded using the relative path from the current directory.</p> <p>If the file doesn’t exist when there is an attempt to load it, a <a href="loaderror.html"><code>LoadError</code></a> will be raised.</p> <p>If the optional <em>wrap</em> parameter is <code>true</code>, the loaded script will be executed under an anonymous module. If the optional <em>wrap</em> parameter is a module, the loaded script will be executed under the given module. In no circumstance will any local variables in the loaded file be propagated to the loading environment.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-local_variables"> <a href="#method-i-local_variables" title="Link to this method"> <span class="method-callseq"> local_variables → array </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="local_variables-source"> <pre class="c" data-language="c">static VALUE
rb_f_local_variables(VALUE _)
{
    struct local_var_list vars;
    rb_execution_context_t *ec = GET_EC();
    rb_control_frame_t *cfp = vm_get_ruby_level_caller_cfp(ec, RUBY_VM_PREVIOUS_CONTROL_FRAME(ec-&gt;cfp));
    unsigned int i;

    local_var_list_init(&amp;vars);
    while (cfp) {
        if (cfp-&gt;iseq) {
            for (i = 0; i &lt; ISEQ_BODY(cfp-&gt;iseq)-&gt;local_table_size; i++) {
                local_var_list_add(&amp;vars, ISEQ_BODY(cfp-&gt;iseq)-&gt;local_table[i]);
            }
        }
        if (!VM_ENV_LOCAL_P(cfp-&gt;ep)) {
            /* block */
            const VALUE *ep = VM_CF_PREV_EP(cfp);

            if (vm_collect_local_variables_in_heap(ep, &amp;vars)) {
                break;
            }
            else {
                while (cfp-&gt;ep != ep) {
                    cfp = RUBY_VM_PREVIOUS_CONTROL_FRAME(cfp);
                }
            }
        }
        else {
            break;
        }
    }
    return local_var_list_finish(&amp;vars);
}</pre> </div>  <p>Returns the names of the current local variables.</p> <pre class="ruby" data-language="ruby">fred = 1
for i in 1..10
   # ...
end
local_variables   #=&gt; [:fred, :i]
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-loop"> <a href="#method-i-loop" title="Link to this method"> <span class="method-callseq"> loop { block } </span> </a> </div> <div class="method-heading"> <a href="#method-i-loop" title="Link to this method"> <span class="method-callseq"> loop → an_enumerator </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="loop-source"> <pre class="ruby" data-language="ruby"># File kernel.rb, line 160
def loop
  Primitive.attr! :inline_block
  unless defined?(yield)
    return Primitive.cexpr! 'SIZED_ENUMERATOR(self, 0, 0, rb_f_loop_size)'
  end

  begin
    while true
      yield
    end
  rescue StopIteration =&gt; e
    e.result
  end
end</pre> </div>  <p>Repeatedly executes the block.</p> <p>If no block is given, an enumerator is returned instead.</p> <pre class="ruby" data-language="ruby">loop do
  print "Input: "
  line = gets
  break if !line or line =~ /^q/i
  # ...
end
</pre> <p>A <a href="stopiteration.html"><code>StopIteration</code></a> raised in the block breaks the loop. In this case, loop returns the “result” value stored in the exception.</p> <pre class="ruby" data-language="ruby">enum = Enumerator.new { |y|
  y &lt;&lt; "one"
  y &lt;&lt; "two"
  :ok
}

result = loop {
  puts enum.next
} #=&gt; :ok
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-open"> <a href="#method-i-open" title="Link to this method"> <span class="method-callseq"> open(path, mode = 'r', perm = 0666, **opts) → io or nil </span> </a> </div> <div class="method-heading"> <a href="#method-i-open" title="Link to this method"> <span class="method-callseq"> open(path, mode = 'r', perm = 0666, **opts) {|io| ... } → obj </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="open-source"> <pre class="c" data-language="c">static VALUE
rb_f_open(int argc, VALUE *argv, VALUE _)
{
    ID to_open = 0;
    int redirect = FALSE;

    if (argc &gt;= 1) {
        CONST_ID(to_open, "to_open");
        if (rb_respond_to(argv[0], to_open)) {
            redirect = TRUE;
        }
        else {
            VALUE tmp = argv[0];
            FilePathValue(tmp);
            if (NIL_P(tmp)) {
                redirect = TRUE;
            }
            else {
                VALUE cmd = check_pipe_command(tmp);
                if (!NIL_P(cmd)) {
                    // TODO: when removed in 4.0, update command_injection.rdoc
                    rb_warn_deprecated_to_remove_at(4.0, "Calling Kernel#open with a leading '|'", "IO.popen");
                    argv[0] = cmd;
                    return rb_io_s_popen(argc, argv, rb_cIO);
                }
            }
        }
    }
    if (redirect) {
        VALUE io = rb_funcallv_kw(argv[0], to_open, argc-1, argv+1, RB_PASS_CALLED_KEYWORDS);

        if (rb_block_given_p()) {
            return rb_ensure(rb_yield, io, io_close, io);
        }
        return io;
    }
    return rb_io_s_open(argc, argv, rb_cFile);
}</pre> </div>  <p>Creates an <a href="io.html"><code>IO</code></a> object connected to the given file.</p> <p>This method has potential security vulnerabilities if called with untrusted input; see <a href="command_injection_rdoc.html">Command Injection</a>.</p> <p>With no block given, file stream is returned:</p> <pre class="ruby" data-language="ruby">open('t.txt') # =&gt; #&lt;File:t.txt&gt;
</pre> <p>With a block given, calls the block with the open file stream, then closes the stream:</p> <pre class="ruby" data-language="ruby">open('t.txt') {|f| p f } # =&gt; #&lt;File:t.txt (closed)&gt;
</pre> <p>Output:</p> <pre class="ruby" data-language="ruby">#&lt;File:t.txt&gt;
</pre> <p>See <a href="file.html#method-c-open"><code>File.open</code></a> for details.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-p"> <a href="#method-i-p" title="Link to this method"> <span class="method-callseq"> p(object) → obj </span> </a> </div> <div class="method-heading"> <a href="#method-i-p" title="Link to this method"> <span class="method-callseq"> p(*objects) → array of objects </span> </a> </div> <div class="method-heading"> <a href="#method-i-p" title="Link to this method"> <span class="method-callseq"> p → nil </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="p-source"> <pre class="c" data-language="c">static VALUE
rb_f_p(int argc, VALUE *argv, VALUE self)
{
    int i;
    for (i=0; i&lt;argc; i++) {
        VALUE inspected = rb_obj_as_string(rb_inspect(argv[i]));
        rb_uninterruptible(rb_p_write, inspected);
    }
    return rb_p_result(argc, argv);
}</pre> </div>  <p>For each object <code>obj</code>, executes:</p> <pre class="ruby" data-language="ruby">$stdout.write(obj.inspect, "\n")
</pre> <p>With one object given, returns the object; with multiple objects given, returns an array containing the objects; with no object given, returns <code>nil</code>.</p> <p>Examples:</p> <pre class="ruby" data-language="ruby">r = Range.new(0, 4)
p r                 # =&gt; 0..4
p [r, r, r]         # =&gt; [0..4, 0..4, 0..4]
p                   # =&gt; nil
</pre> <p>Output:</p> <pre class="ruby" data-language="ruby">0..4
[0..4, 0..4, 0..4]
</pre> <p><a href="kernel.html#method-i-p"><code>Kernel#p</code></a> is designed for debugging purposes. Ruby implementations may define <a href="kernel.html#method-i-p"><code>Kernel#p</code></a> to be uninterruptible in whole or in part. On CRuby, <a href="kernel.html#method-i-p"><code>Kernel#p</code></a>‘s writing of data is uninterruptible.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-pretty_inspect"> <a href="#method-i-pretty_inspect" title="Link to this method"> <span class="method-name">pretty_inspect</span> <span class="method-args">()</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="pretty_inspect-source"> <pre class="ruby" data-language="ruby"># File lib/pp.rb, line 685
def pretty_inspect
  PP.pp(self, ''.dup)
end</pre> </div>  <p>Returns a pretty printed object as a string.</p> <p>See the <a href="pp.html"><code>PP</code></a> module for more information.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-print"> <a href="#method-i-print" title="Link to this method"> <span class="method-callseq"> print(*objects) → nil </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="print-source"> <pre class="c" data-language="c">static VALUE
rb_f_print(int argc, const VALUE *argv, VALUE _)
{
    rb_io_print(argc, argv, rb_ractor_stdout());
    return Qnil;
}</pre> </div>  <p>Equivalent to <code>$stdout.print(*objects)</code>, this method is the straightforward way to write to <code>$stdout</code>.</p> <p>Writes the given objects to <code>$stdout</code>; returns <code>nil</code>. Appends the output record separator <code>$OUTPUT_RECORD_SEPARATOR</code> <code>$\</code>), if it is not <code>nil</code>.</p> <p>With argument <code>objects</code> given, for each object:</p> <ul>
<li> <p>Converts via its method <code>to_s</code> if not a string.</p> </li>
<li> <p>Writes to <code>stdout</code>.</p> </li>
<li> <p>If not the last object, writes the output field separator <code>$OUTPUT_FIELD_SEPARATOR</code> (<code>$,</code> if it is not <code>nil</code>.</p> </li>
</ul> <p>With default separators:</p> <pre class="ruby" data-language="ruby">objects = [0, 0.0, Rational(0, 1), Complex(0, 0), :zero, 'zero']
$OUTPUT_RECORD_SEPARATOR
$OUTPUT_FIELD_SEPARATOR
print(*objects)
</pre> <p>Output:</p> <pre>nil
nil
00.00/10+0izerozero</pre> <p>With specified separators:</p> <pre class="ruby" data-language="ruby">$OUTPUT_RECORD_SEPARATOR = "\n"
$OUTPUT_FIELD_SEPARATOR = ','
print(*objects)
</pre> <p>Output:</p> <pre>0,0.0,0/1,0+0i,zero,zero</pre> <p>With no argument given, writes the content of <code>$_</code> (which is usually the most recent user input):</p> <pre class="ruby" data-language="ruby">gets  # Sets $_ to the most recent user input.
print # Prints $_.
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-printf"> <a href="#method-i-printf" title="Link to this method"> <span class="method-callseq"> printf(format_string, *objects) → nil </span> </a> </div> <div class="method-heading"> <a href="#method-i-printf" title="Link to this method"> <span class="method-callseq"> printf(io, format_string, *objects) → nil </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="printf-source"> <pre class="c" data-language="c">static VALUE
rb_f_printf(int argc, VALUE *argv, VALUE _)
{
    VALUE out;

    if (argc == 0) return Qnil;
    if (RB_TYPE_P(argv[0], T_STRING)) {
        out = rb_ractor_stdout();
    }
    else {
        out = argv[0];
        argv++;
        argc--;
    }
    rb_io_write(out, rb_f_sprintf(argc, argv));

    return Qnil;
}</pre> </div>  <p>Equivalent to:</p> <pre class="ruby" data-language="ruby">io.write(sprintf(format_string, *objects))
</pre> <p>For details on <code>format_string</code>, see <a href="format_specifications_rdoc.html">Format Specifications</a>.</p> <p>With the single argument <code>format_string</code>, formats <code>objects</code> into the string, then writes the formatted string to $stdout:</p> <pre class="ruby" data-language="ruby">printf('%4.4d %10s %2.2f', 24, 24, 24.0)
</pre> <p>Output (on $stdout):</p> <pre>0024         24 24.00#</pre> <p>With arguments <code>io</code> and <code>format_string</code>, formats <code>objects</code> into the string, then writes the formatted string to <code>io</code>:</p> <pre class="ruby" data-language="ruby">printf($stderr, '%4.4d %10s %2.2f', 24, 24, 24.0)
</pre> <p>Output (on $stderr):</p> <pre>0024         24 24.00# =&gt; nil</pre> <p>With no arguments, does nothing.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-proc"> <a href="#method-i-proc" title="Link to this method"> <span class="method-callseq"> proc { |...| block } → a_proc </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="proc-source"> <pre class="c" data-language="c">static VALUE
f_proc(VALUE _)
{
    return proc_new(rb_cProc, FALSE);
}</pre> </div>  <p>Equivalent to <a href="proc.html#method-c-new"><code>Proc.new</code></a>.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-putc"> <a href="#method-i-putc" title="Link to this method"> <span class="method-callseq"> putc(int) → int </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="putc-source"> <pre class="c" data-language="c">static VALUE
rb_f_putc(VALUE recv, VALUE ch)
{
    VALUE r_stdout = rb_ractor_stdout();
    if (recv == r_stdout) {
        return rb_io_putc(recv, ch);
    }
    return forward(r_stdout, rb_intern("putc"), 1, &amp;ch);
}</pre> </div>  <p>Equivalent to:</p> <pre class="ruby" data-language="ruby">$stdout.putc(int)
</pre> <p>See <a href="io.html#method-i-putc"><code>IO#putc</code></a> for important information regarding multi-byte characters.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-puts"> <a href="#method-i-puts" title="Link to this method"> <span class="method-callseq"> puts(*objects) → nil </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="puts-source"> <pre class="c" data-language="c">static VALUE
rb_f_puts(int argc, VALUE *argv, VALUE recv)
{
    VALUE r_stdout = rb_ractor_stdout();
    if (recv == r_stdout) {
        return rb_io_puts(argc, argv, recv);
    }
    return forward(r_stdout, rb_intern("puts"), argc, argv);
}</pre> </div>  <p>Equivalent to</p> <pre class="ruby" data-language="ruby">$stdout.puts(objects)
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-raise"> <a href="#method-i-raise" title="Link to this method"> <span class="method-callseq"> raise(exception, message = exception.to_s, backtrace = nil, cause: $!) </span> </a> </div> <div class="method-heading"> <a href="#method-i-raise" title="Link to this method"> <span class="method-callseq"> raise(message = nil, cause: $!) </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="raise-source"> <pre class="c" data-language="c">static VALUE
f_raise(int c, VALUE *v, VALUE _)
{
    return rb_f_raise(c, v);
}</pre> </div>  <p>Raises an exception; see <span>Exceptions</span>.</p> <p>Argument <code>exception</code> sets the class of the new exception; it should be class <a href="exception.html"><code>Exception</code></a> or one of its subclasses (most commonly, <a href="runtimeerror.html"><code>RuntimeError</code></a> or <a href="standarderror.html"><code>StandardError</code></a>), or an instance of one of those classes:</p> <pre class="ruby" data-language="ruby">begin
  raise(StandardError)
rescue =&gt; x
  p x.class
end
# =&gt; StandardError
</pre> <p>Argument <code>message</code> sets the stored message in the new exception, which may be retrieved by method <a href="exception.html#method-i-message"><code>Exception#message</code></a>; the message must be a <a href="implicit_conversion_rdoc.html#label-String-Convertible+Objects">string-convertible object</a> or <code>nil</code>:</p> <pre class="ruby" data-language="ruby">begin
  raise(StandardError, 'Boom')
rescue =&gt; x
  p x.message
end
# =&gt; "Boom"
</pre> <p>If argument <code>message</code> is not given, the message is the exception class name.</p> <p>See <span>Messages</span>.</p> <p>Argument <code>backtrace</code> might be used to modify the backtrace of the new exception, as reported by <a href="exception.html#method-i-backtrace"><code>Exception#backtrace</code></a> and <a href="exception.html#method-i-backtrace_locations"><code>Exception#backtrace_locations</code></a>; the backtrace must be an array of <a href="thread/backtrace/location.html"><code>Thread::Backtrace::Location</code></a>, an array of strings, a single string, or <code>nil</code>.</p> <p>Using the array of <a href="thread/backtrace/location.html"><code>Thread::Backtrace::Location</code></a> instances is the most consistent option and should be preferred when possible. The necessary value might be obtained from <a href="kernel.html#method-i-caller_locations"><code>caller_locations</code></a>, or copied from <a href="exception.html#method-i-backtrace_locations"><code>Exception#backtrace_locations</code></a> of another error:</p> <pre class="ruby" data-language="ruby">begin
  do_some_work()
rescue ZeroDivisionError =&gt; ex
  raise(LogicalError, "You have an error in your math", ex.backtrace_locations)
end
</pre> <p>The ways, both <a href="exception.html#method-i-backtrace"><code>Exception#backtrace</code></a> and <a href="exception.html#method-i-backtrace_locations"><code>Exception#backtrace_locations</code></a> of the raised error are set to the same backtrace.</p> <p>When the desired stack of locations is not available and should be constructed from scratch, an array of strings or a singular string can be used. In this case, only <a href="exception.html#method-i-backtrace"><code>Exception#backtrace</code></a> is set:</p> <pre class="ruby" data-language="ruby">begin
  raise(StandardError, 'Boom', %w[dsl.rb:3 framework.rb:1])
rescue =&gt; ex
  p ex.backtrace
  # =&gt; ["dsl.rb:3", "framework.rb:1"]
  p ex.backtrace_locations
  # =&gt; nil
end
</pre> <p>If argument <code>backtrace</code> is not given, the backtrace is set according to an array of <a href="thread/backtrace/location.html"><code>Thread::Backtrace::Location</code></a> objects, as derived from the call stack.</p> <p>See <span>Backtraces</span>.</p> <p>Keyword argument <code>cause</code> sets the stored cause in the new exception, which may be retrieved by method <a href="exception.html#method-i-cause"><code>Exception#cause</code></a>; the cause must be an exception object (<a href="exception.html"><code>Exception</code></a> or one of its subclasses), or <code>nil</code>:</p> <pre class="ruby" data-language="ruby">begin
  raise(StandardError, cause: RuntimeError.new)
rescue =&gt; x
  p x.cause
end
# =&gt; #&lt;RuntimeError: RuntimeError&gt;
</pre> <p>If keyword argument <code>cause</code> is not given, the cause is the value of <code>$!</code>.</p> <p>See <span>Cause</span>.</p> <p>In the alternate calling sequence, where argument <code>exception</code> <em>not</em> given, raises a new exception of the class given by <code>$!</code>, or of class <a href="runtimeerror.html"><code>RuntimeError</code></a> if <code>$!</code> is <code>nil</code>:</p> <pre class="ruby" data-language="ruby">begin
  raise
rescue =&gt; x
  p x
end
# =&gt; RuntimeError
</pre> <p>With argument <code>exception</code> not given, argument <code>message</code> and keyword argument <code>cause</code> may be given, but argument <code>backtrace</code> may not be given.</p> </div> <div class="aliases"> Also aliased as: <a href="kernel.html#method-i-fail">fail</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-rand"> <a href="#method-i-rand" title="Link to this method"> <span class="method-callseq"> rand(max=0) → number </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="rand-source"> <pre class="c" data-language="c">static VALUE
rb_f_rand(int argc, VALUE *argv, VALUE obj)
{
    VALUE vmax;
    rb_random_t *rnd = rand_start(default_rand());

    if (rb_check_arity(argc, 0, 1) &amp;&amp; !NIL_P(vmax = argv[0])) {
        VALUE v = rand_range(obj, rnd, vmax);
        if (v != Qfalse) return v;
        vmax = rb_to_int(vmax);
        if (vmax != INT2FIX(0)) {
            v = rand_int(obj, rnd, vmax, 0);
            if (!NIL_P(v)) return v;
        }
    }
    return DBL2NUM(random_real(obj, rnd, TRUE));
}</pre> </div>  <p>If called without an argument, or if <code>max.to_i.abs == 0</code>, rand returns a pseudo-random floating point number between 0.0 and 1.0, including 0.0 and excluding 1.0.</p> <pre class="ruby" data-language="ruby">rand        #=&gt; 0.2725926052826416
</pre> <p>When <code>max.abs</code> is greater than or equal to 1, <code>rand</code> returns a pseudo-random integer greater than or equal to 0 and less than <code>max.to_i.abs</code>.</p> <pre class="ruby" data-language="ruby">rand(100)   #=&gt; 12
</pre> <p>When <code>max</code> is a <a href="range.html"><code>Range</code></a>, <code>rand</code> returns a random number where <code>range.member?(number) == true</code>.</p> <p>Negative or floating point values for <code>max</code> are allowed, but may give surprising results.</p> <pre class="ruby" data-language="ruby">rand(-100) # =&gt; 87
rand(-0.5) # =&gt; 0.8130921818028143
rand(1.9)  # equivalent to rand(1), which is always 0
</pre> <p><a href="kernel.html#method-i-srand"><code>Kernel.srand</code></a> may be used to ensure that sequences of random numbers are reproducible between different runs of a program.</p> <p>See also <a href="random.html#method-c-rand"><code>Random.rand</code></a>.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-readline"> <a href="#method-i-readline" title="Link to this method"> <span class="method-callseq"> readline(sep = $/, chomp: false) → string </span> </a> </div> <div class="method-heading"> <a href="#method-i-readline" title="Link to this method"> <span class="method-callseq"> readline(limit, chomp: false) → string </span> </a> </div> <div class="method-heading"> <a href="#method-i-readline" title="Link to this method"> <span class="method-callseq"> readline(sep, limit, chomp: false) → string </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="readline-source"> <pre class="c" data-language="c">static VALUE
rb_f_readline(int argc, VALUE *argv, VALUE recv)
{
    if (recv == argf) {
        return argf_readline(argc, argv, argf);
    }
    return forward(argf, rb_intern("readline"), argc, argv);
}</pre> </div>  <p>Equivalent to method <a href="kernel.html#method-i-gets"><code>Kernel#gets</code></a>, except that it raises an exception if called at end-of-stream:</p> <pre>$ cat t.txt | ruby -e "p readlines; readline"
["First line\n", "Second line\n", "\n", "Fourth line\n", "Fifth line\n"]
in `readline': end of file reached (EOFError)</pre> <p>Optional keyword argument <code>chomp</code> specifies whether line separators are to be omitted.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-readlines"> <a href="#method-i-readlines" title="Link to this method"> <span class="method-callseq"> readlines(sep = $/, chomp: false, **enc_opts) → array </span> </a> </div> <div class="method-heading"> <a href="#method-i-readlines" title="Link to this method"> <span class="method-callseq"> readlines(limit, chomp: false, **enc_opts) → array </span> </a> </div> <div class="method-heading"> <a href="#method-i-readlines" title="Link to this method"> <span class="method-callseq"> readlines(sep, limit, chomp: false, **enc_opts) → array </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="readlines-source"> <pre class="c" data-language="c">static VALUE
rb_f_readlines(int argc, VALUE *argv, VALUE recv)
{
    if (recv == argf) {
        return argf_readlines(argc, argv, argf);
    }
    return forward(argf, rb_intern("readlines"), argc, argv);
}</pre> </div>  <p>Returns an array containing the lines returned by calling <a href="kernel.html#method-i-gets"><code>Kernel#gets</code></a> until the end-of-stream is reached; (see <a href="io.html#class-IO-label-Line+IO">Line IO</a>).</p> <p>With only string argument <code>sep</code> given, returns the remaining lines as determined by line separator <code>sep</code>, or <code>nil</code> if none; see <a href="io.html#class-IO-label-Line+Separator">Line Separator</a>:</p> <pre># Default separator.
$ cat t.txt | ruby -e "p readlines"
["First line\n", "Second line\n", "\n", "Fourth line\n", "Fifth line\n"]

# Specified separator.
$ cat t.txt | ruby -e "p readlines 'li'"
["First li", "ne\nSecond li", "ne\n\nFourth li", "ne\nFifth li", "ne\n"]

# Get-all separator.
$ cat t.txt | ruby -e "p readlines nil"
["First line\nSecond line\n\nFourth line\nFifth line\n"]

# Get-paragraph separator.
$ cat t.txt | ruby -e "p readlines ''"
["First line\nSecond line\n\n", "Fourth line\nFifth line\n"]</pre> <p>With only integer argument <code>limit</code> given, limits the number of bytes in the line; see <a href="io.html#class-IO-label-Line+Limit">Line Limit</a>:</p> <pre>$cat t.txt | ruby -e "p readlines 10"
["First line", "\n", "Second lin", "e\n", "\n", "Fourth lin", "e\n", "Fifth line", "\n"]

$cat t.txt | ruby -e "p readlines 11"
["First line\n", "Second line", "\n", "\n", "Fourth line", "\n", "Fifth line\n"]

$cat t.txt | ruby -e "p readlines 12"
["First line\n", "Second line\n", "\n", "Fourth line\n", "Fifth line\n"]</pre> <p>With arguments <code>sep</code> and <code>limit</code> given, combines the two behaviors (see <a href="io.html#class-IO-label-Line+Separator+and+Line+Limit">Line Separator and Line Limit</a>).</p> <p>Optional keyword argument <code>chomp</code> specifies whether line separators are to be omitted:</p> <pre>$ cat t.txt | ruby -e "p readlines(chomp: true)"
["First line", "Second line", "", "Fourth line", "Fifth line"]</pre> <p>Optional keyword arguments <code>enc_opts</code> specify encoding options; see <a href="encodings_rdoc.html#label-Encoding+Options">Encoding options</a>.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-require_relative"> <a href="#method-i-require_relative" title="Link to this method"> <span class="method-callseq"> require_relative(string) → true or false </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="require_relative-source"> <pre class="c" data-language="c">VALUE
rb_f_require_relative(VALUE obj, VALUE fname)
{
    VALUE base = rb_current_realfilepath();
    if (NIL_P(base)) {
        rb_loaderror("cannot infer basepath");
    }
    base = rb_file_dirname(base);
    return rb_require_string_internal(rb_file_absolute_path(fname, base), false);
}</pre> </div>  <p>Ruby tries to load the library named <em>string</em> relative to the directory containing the requiring file. If the file does not exist a <a href="loaderror.html"><code>LoadError</code></a> is raised. Returns <code>true</code> if the file was loaded and <code>false</code> if the file was already loaded before.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-select"> <a href="#method-i-select" title="Link to this method"> <span class="method-callseq"> select(read_ios, write_ios = [], error_ios = [], timeout = nil) → array or nil </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="select-source"> <pre class="c" data-language="c">static VALUE
rb_f_select(int argc, VALUE *argv, VALUE obj)
{
    VALUE scheduler = rb_fiber_scheduler_current();
    if (scheduler != Qnil) {
        // It's optionally supported.
        VALUE result = rb_fiber_scheduler_io_selectv(scheduler, argc, argv);
        if (!UNDEF_P(result)) return result;
    }

    VALUE timeout;
    struct select_args args;
    struct timeval timerec;
    int i;

    rb_scan_args(argc, argv, "13", &amp;args.read, &amp;args.write, &amp;args.except, &amp;timeout);
    if (NIL_P(timeout)) {
        args.timeout = 0;
    }
    else {
        timerec = rb_time_interval(timeout);
        args.timeout = &amp;timerec;
    }

    for (i = 0; i &lt; numberof(args.fdsets); ++i)
        rb_fd_init(&amp;args.fdsets[i]);

    return rb_ensure(select_call, (VALUE)&amp;args, select_end, (VALUE)&amp;args);
}</pre> </div>  <p>Invokes system call <a href="https://linux.die.net/man/2/select">select(2)</a>, which monitors multiple file descriptors, waiting until one or more of the file descriptors becomes ready for some class of I/O operation.</p> <p>Not implemented on all platforms.</p> <p>Each of the arguments <code>read_ios</code>, <code>write_ios</code>, and <code>error_ios</code> is an array of <a href="io.html"><code>IO</code></a> objects.</p> <p>Argument <code>timeout</code> is a numeric value (such as integer or float) timeout interval in seconds.</p> <p>The method monitors the IO objects given in all three arrays, waiting for some to be ready; returns a 3-element array whose elements are:</p> <ul>
<li> <p>An array of the objects in <code>read_ios</code> that are ready for reading.</p> </li>
<li> <p>An array of the objects in <code>write_ios</code> that are ready for writing.</p> </li>
<li> <p>An array of the objects in <code>error_ios</code> have pending exceptions.</p> </li>
</ul> <p>If no object becomes ready within the given <code>timeout</code>, <code>nil</code> is returned.</p> <p>IO.select peeks the buffer of IO objects for testing readability. If the IO buffer is not empty, IO.select immediately notifies readability. This “peek” only happens for IO objects. It does not happen for IO-like objects such as <a href="openssl/ssl/sslsocket.html"><code>OpenSSL::SSL::SSLSocket</code></a>.</p> <p>The best way to use IO.select is invoking it after non-blocking methods such as read_nonblock, write_nonblock, etc. The methods raise an exception which is extended by <a href="io/waitreadable.html"><code>IO::WaitReadable</code></a> or <a href="io/waitwritable.html"><code>IO::WaitWritable</code></a>. The modules notify how the caller should wait with IO.select. If <a href="io/waitreadable.html"><code>IO::WaitReadable</code></a> is raised, the caller should wait for reading. If <a href="io/waitwritable.html"><code>IO::WaitWritable</code></a> is raised, the caller should wait for writing.</p> <p>So, blocking read (readpartial) can be emulated using read_nonblock and IO.select as follows:</p> <pre class="ruby" data-language="ruby">begin
  result = io_like.read_nonblock(maxlen)
rescue IO::WaitReadable
  IO.select([io_like])
  retry
rescue IO::WaitWritable
  IO.select(nil, [io_like])
  retry
end
</pre> <p>Especially, the combination of non-blocking methods and IO.select is preferred for <a href="io.html"><code>IO</code></a> like objects such as <a href="openssl/ssl/sslsocket.html"><code>OpenSSL::SSL::SSLSocket</code></a>. It has to_io method to return underlying <a href="io.html"><code>IO</code></a> object. <a href="io.html#method-c-select"><code>IO.select</code></a> calls to_io to obtain the file descriptor to wait.</p> <p>This means that readability notified by IO.select doesn’t mean readability from <a href="openssl/ssl/sslsocket.html"><code>OpenSSL::SSL::SSLSocket</code></a> object.</p> <p>The most likely situation is that <a href="openssl/ssl/sslsocket.html"><code>OpenSSL::SSL::SSLSocket</code></a> buffers some data. IO.select doesn’t see the buffer. So IO.select can block when <a href="openssl/buffering.html#method-i-readpartial"><code>OpenSSL::SSL::SSLSocket#readpartial</code></a> doesn’t block.</p> <p>However, several more complicated situations exist.</p> <p>SSL is a protocol which is sequence of records. The record consists of multiple bytes. So, the remote side of SSL sends a partial record, <a href="io.html#method-c-select"><code>IO.select</code></a> notifies readability but <a href="openssl/ssl/sslsocket.html"><code>OpenSSL::SSL::SSLSocket</code></a> cannot decrypt a byte and <a href="openssl/buffering.html#method-i-readpartial"><code>OpenSSL::SSL::SSLSocket#readpartial</code></a> will block.</p> <p>Also, the remote side can request SSL renegotiation which forces the local SSL engine to write some data. This means <a href="openssl/buffering.html#method-i-readpartial"><code>OpenSSL::SSL::SSLSocket#readpartial</code></a> may invoke write system call and it can block. In such a situation, <a href="openssl/buffering.html#method-i-read_nonblock"><code>OpenSSL::SSL::SSLSocket#read_nonblock</code></a> raises <a href="io/waitwritable.html"><code>IO::WaitWritable</code></a> instead of blocking. So, the caller should wait for ready for writability as above example.</p> <p>The combination of non-blocking methods and IO.select is also useful for streams such as tty, pipe socket socket when multiple processes read from a stream.</p> <p>Finally, Linux kernel developers don’t guarantee that readability of select(2) means readability of following read(2) even for a single process; see <a href="https://linux.die.net/man/2/select">select(2)</a></p> <p>Invoking IO.select before <a href="io.html#method-i-readpartial"><code>IO#readpartial</code></a> works well as usual. However it is not the best way to use IO.select.</p> <p>The writability notified by select(2) doesn’t show how many bytes are writable. <a href="io.html#method-i-write"><code>IO#write</code></a> method blocks until given whole string is written. So, <a href="io.html#method-i-write"><code>IO#write(two or more bytes)</code></a> can block after writability is notified by IO.select. <a href="io.html#method-i-write_nonblock"><code>IO#write_nonblock</code></a> is required to avoid the blocking.</p> <p>Blocking write (write) can be emulated using write_nonblock and <a href="io.html#method-c-select"><code>IO.select</code></a> as follows: <a href="io/waitreadable.html"><code>IO::WaitReadable</code></a> should also be rescued for SSL renegotiation in <a href="openssl/ssl/sslsocket.html"><code>OpenSSL::SSL::SSLSocket</code></a>.</p> <pre class="ruby" data-language="ruby">while 0 &lt; string.bytesize
  begin
    written = io_like.write_nonblock(string)
  rescue IO::WaitReadable
    IO.select([io_like])
    retry
  rescue IO::WaitWritable
    IO.select(nil, [io_like])
    retry
  end
  string = string.byteslice(written..-1)
end
</pre> <p>Example:</p> <pre class="ruby" data-language="ruby">rp, wp = IO.pipe
mesg = "ping "
100.times {
  # IO.select follows IO#read.  Not the best way to use IO.select.
  rs, ws, = IO.select([rp], [wp])
  if r = rs[0]
    ret = r.read(5)
    print ret
    case ret
    when /ping/
      mesg = "pong\n"
    when /pong/
      mesg = "ping "
    end
  end
  if w = ws[0]
    w.write(mesg)
  end
}
</pre> <p>Output:</p> <pre class="ruby" data-language="ruby">ping pong
ping pong
ping pong
(snipped)
ping
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-set_trace_func"> <a href="#method-i-set_trace_func" title="Link to this method"> <span class="method-callseq"> set_trace_func(proc) → proc </span> </a> </div> <div class="method-heading"> <a href="#method-i-set_trace_func" title="Link to this method"> <span class="method-callseq"> set_trace_func(nil) → nil </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="set_trace_func-source"> <pre class="c" data-language="c">static VALUE
set_trace_func(VALUE obj, VALUE trace)
{
    rb_remove_event_hook(call_trace_func);

    if (NIL_P(trace)) {
        return Qnil;
    }

    if (!rb_obj_is_proc(trace)) {
        rb_raise(rb_eTypeError, "trace_func needs to be Proc");
    }

    rb_add_event_hook(call_trace_func, RUBY_EVENT_ALL, trace);
    return trace;
}</pre> </div>  <p>Establishes <em>proc</em> as the handler for tracing, or disables tracing if the parameter is <code>nil</code>.</p> <p><strong>Note:</strong> this method is obsolete, please use <a href="tracepoint.html"><code>TracePoint</code></a> instead.</p> <p><em>proc</em> takes up to six parameters:</p> <ul>
<li> <p>an event name string</p> </li>
<li> <p>a filename string</p> </li>
<li> <p>a line number</p> </li>
<li> <p>a method name symbol, or nil</p> </li>
<li> <p>a binding, or nil</p> </li>
<li> <p>the class, module, or nil</p> </li>
</ul> <p><em>proc</em> is invoked whenever an event occurs.</p> <p>Events are:</p> <dl class="rdoc-list note-list">
<dt><code>"c-call"</code></dt> <dd> <p>call a C-language routine</p> </dd>
<dt><code>"c-return"</code></dt> <dd> <p>return from a C-language routine</p> </dd>
<dt><code>"call"</code></dt> <dd> <p>call a Ruby method</p> </dd>
<dt><code>"class"</code></dt> <dd> <p>start a class or module definition</p> </dd>
<dt><code>"end"</code></dt> <dd> <p>finish a class or module definition</p> </dd>
<dt><code>"line"</code></dt> <dd> <p>execute code on a new line</p> </dd>
<dt><code>"raise"</code></dt> <dd> <p>raise an exception</p> </dd>
<dt><code>"return"</code></dt> <dd> <p>return from a Ruby method</p> </dd>
</dl> <p>Tracing is disabled within the context of <em>proc</em>.</p> <pre class="ruby" data-language="ruby">class Test
  def test
    a = 1
    b = 2
  end
end

set_trace_func proc { |event, file, line, id, binding, class_or_module|
  printf "%8s %s:%-2d %16p %14p\n", event, file, line, id, class_or_module
}
t = Test.new
t.test
</pre> <p>Produces:</p> <pre>c-return prog.rb:8   :set_trace_func         Kernel
    line prog.rb:11              nil            nil
  c-call prog.rb:11             :new          Class
  c-call prog.rb:11      :initialize    BasicObject
c-return prog.rb:11      :initialize    BasicObject
c-return prog.rb:11             :new          Class
    line prog.rb:12              nil            nil
    call prog.rb:2             :test           Test
    line prog.rb:3             :test           Test
    line prog.rb:4             :test           Test
  return prog.rb:5             :test           Test</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-sleep"> <a href="#method-i-sleep" title="Link to this method"> <span class="method-callseq"> sleep(secs = nil) → slept_secs </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="sleep-source"> <pre class="c" data-language="c">static VALUE
rb_f_sleep(int argc, VALUE *argv, VALUE _)
{
    time_t beg = time(0);
    VALUE scheduler = rb_fiber_scheduler_current();

    if (scheduler != Qnil) {
        rb_fiber_scheduler_kernel_sleepv(scheduler, argc, argv);
    }
    else {
        if (argc == 0 || (argc == 1 &amp;&amp; NIL_P(argv[0]))) {
            rb_thread_sleep_forever();
        }
        else {
            rb_check_arity(argc, 0, 1);
            rb_thread_wait_for(rb_time_interval(argv[0]));
        }
    }

    time_t end = time(0) - beg;

    return TIMET2NUM(end);
}</pre> </div>  <p>Suspends execution of the current thread for the number of seconds specified by numeric argument <code>secs</code>, or forever if <code>secs</code> is <code>nil</code>; returns the integer number of seconds suspended (rounded).</p> <pre class="ruby" data-language="ruby">Time.new  # =&gt; 2008-03-08 19:56:19 +0900
sleep 1.2 # =&gt; 1
Time.new  # =&gt; 2008-03-08 19:56:20 +0900
sleep 1.9 # =&gt; 2
Time.new  # =&gt; 2008-03-08 19:56:22 +0900
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-spawn"> <a href="#method-i-spawn" title="Link to this method"> <span class="method-callseq"> spawn([env, ] command_line, options = {}) → pid </span> </a> </div> <div class="method-heading"> <a href="#method-i-spawn" title="Link to this method"> <span class="method-callseq"> spawn([env, ] exe_path, *args, options = {}) → pid </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="spawn-source"> <pre class="c" data-language="c">static VALUE
rb_f_spawn(int argc, VALUE *argv, VALUE _)
{
    rb_pid_t pid;
    char errmsg[CHILD_ERRMSG_BUFLEN] = { '\0' };
    VALUE execarg_obj, fail_str;
    struct rb_execarg *eargp;

    execarg_obj = rb_execarg_new(argc, argv, TRUE, FALSE);
    eargp = rb_execarg_get(execarg_obj);
    fail_str = eargp-&gt;use_shell ? eargp-&gt;invoke.sh.shell_script : eargp-&gt;invoke.cmd.command_name;

    pid = rb_execarg_spawn(execarg_obj, errmsg, sizeof(errmsg));

    if (pid == -1) {
        int err = errno;
        rb_exec_fail(eargp, err, errmsg);
        RB_GC_GUARD(execarg_obj);
        rb_syserr_fail_str(err, fail_str);
    }
#if defined(HAVE_WORKING_FORK) || defined(HAVE_SPAWNV)
    return PIDT2NUM(pid);
#else
    return Qnil;
#endif
}</pre> </div>  <p>Creates a new child process by doing one of the following in that process:</p> <ul>
<li> <p>Passing string <code>command_line</code> to the shell.</p> </li>
<li> <p>Invoking the executable at <code>exe_path</code>.</p> </li>
</ul> <p>This method has potential security vulnerabilities if called with untrusted input; see <a href="command_injection_rdoc.html">Command Injection</a>.</p> <p>Returns the process ID (pid) of the new process, without waiting for it to complete.</p> <p>To avoid zombie processes, the parent process should call either:</p> <ul>
<li> <p><a href="process.html#method-c-wait"><code>Process.wait</code></a>, to collect the termination statuses of its children.</p> </li>
<li> <p><a href="process.html#method-c-detach"><code>Process.detach</code></a>, to register disinterest in their status.</p> </li>
</ul> <p>The new process is created using the <a href="https://pubs.opengroup.org/onlinepubs/9699919799.2018edition/functions/execve.html">exec system call</a>; it may inherit some of its environment from the calling program (possibly including open file descriptors).</p> <p>Argument <code>env</code>, if given, is a hash that affects <a href="env.html"><code>ENV</code></a> for the new process; see <a href="process.html#module-Process-label-Execution+Environment">Execution Environment</a>.</p> <p>Argument <code>options</code> is a hash of options for the new process; see <a href="process.html#module-Process-label-Execution+Options">Execution Options</a>.</p> <p>The first required argument is one of the following:</p> <ul>
<li> <p><code>command_line</code> if it is a string, and if it begins with a shell reserved word or special built-in, or if it contains one or more meta characters.</p> </li>
<li> <p><code>exe_path</code> otherwise.</p> </li>
</ul> <p><strong>Argument <code>command_line</code></strong></p> <p>String argument <code>command_line</code> is a command line to be passed to a shell; it must begin with a shell reserved word, begin with a special built-in, or contain meta characters:</p> <pre class="ruby" data-language="ruby">spawn('if true; then echo "Foo"; fi') # =&gt; 798847 # Shell reserved word.
Process.wait                          # =&gt; 798847
spawn('exit')                         # =&gt; 798848 # Built-in.
Process.wait                          # =&gt; 798848
spawn('date &gt; /tmp/date.tmp')         # =&gt; 798879 # Contains meta character.
Process.wait                          # =&gt; 798849
spawn('date &gt; /nop/date.tmp')         # =&gt; 798882 # Issues error message.
Process.wait                          # =&gt; 798882
</pre> <p>The command line may also contain arguments and options for the command:</p> <pre class="ruby" data-language="ruby">spawn('echo "Foo"') # =&gt; 799031
Process.wait        # =&gt; 799031
</pre> <p>Output:</p> <pre class="ruby" data-language="ruby">Foo
</pre> <p>See <a href="process.html#module-Process-label-Execution+Shell">Execution Shell</a> for details about the shell.</p> <p>Raises an exception if the new process could not execute.</p> <p><strong>Argument <code>exe_path</code></strong></p> <p>Argument <code>exe_path</code> is one of the following:</p> <ul>
<li> <p>The string path to an executable to be called.</p> </li>
<li> <p>A 2-element array containing the path to an executable to be called, and the string to be used as the name of the executing process.</p> <pre class="ruby" data-language="ruby">spawn('/usr/bin/date') # Path to date on Unix-style system.
Process.wait
</pre> <p>Output:</p> <pre>Mon Aug 28 11:43:10 AM CDT 2023</pre> </li>
</ul> <p>Ruby invokes the executable directly. This form does not use the shell; see <a href="process.html#module-Process-label-Arguments+args">Arguments args</a> for caveats.</p> <p>If one or more <code>args</code> is given, each is an argument or option to be passed to the executable:</p> <pre class="ruby" data-language="ruby">spawn('echo', 'C*')             # =&gt; 799392
Process.wait                    # =&gt; 799392
spawn('echo', 'hello', 'world') # =&gt; 799393
Process.wait                    # =&gt; 799393
</pre> <p>Output:</p> <pre>C*
hello world</pre> <p>Raises an exception if the new process could not execute.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-sprintf"> <a href="#method-i-sprintf" title="Link to this method"> <span class="method-callseq"> sprintf(format_string *objects) → string </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="sprintf-source"> <pre class="c" data-language="c">static VALUE
f_sprintf(int c, const VALUE *v, VALUE _)
{
    return rb_f_sprintf(c, v);
}</pre> </div>  <p>Returns the string resulting from formatting <code>objects</code> into <code>format_string</code>.</p> <p>For details on <code>format_string</code>, see <a href="format_specifications_rdoc.html">Format Specifications</a>.</p> </div> <div class="aliases"> Also aliased as: <a href="kernel.html#method-i-format">format</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-srand"> <a href="#method-i-srand" title="Link to this method"> <span class="method-callseq"> srand(number = Random.new_seed) → old_seed </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="srand-source"> <pre class="c" data-language="c">static VALUE
rb_f_srand(int argc, VALUE *argv, VALUE obj)
{
    VALUE seed, old;
    rb_random_mt_t *r = rand_mt_start(default_rand());

    if (rb_check_arity(argc, 0, 1) == 0) {
        seed = random_seed(obj);
    }
    else {
        seed = rb_to_int(argv[0]);
    }
    old = r-&gt;base.seed;
    rand_init(&amp;random_mt_if, &amp;r-&gt;base, seed);
    r-&gt;base.seed = seed;

    return old;
}</pre> </div>  <p>Seeds the system pseudo-random number generator, with <code>number</code>. The previous seed value is returned.</p> <p>If <code>number</code> is omitted, seeds the generator using a source of entropy provided by the operating system, if available (/dev/urandom on Unix systems or the RSA cryptographic provider on Windows), which is then combined with the time, the process id, and a sequence number.</p> <p>srand may be used to ensure repeatable sequences of pseudo-random numbers between different runs of the program. By setting the seed to a known value, programs can be made deterministic during testing.</p> <pre class="ruby" data-language="ruby">srand 1234               # =&gt; 268519324636777531569100071560086917274
[ rand, rand ]           # =&gt; [0.1915194503788923, 0.6221087710398319]
[ rand(10), rand(1000) ] # =&gt; [4, 664]
srand 1234               # =&gt; 1234
[ rand, rand ]           # =&gt; [0.1915194503788923, 0.6221087710398319]
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-sub"> <a href="#method-i-sub" title="Link to this method"> <span class="method-callseq"> sub(pattern, replacement) → $_ </span> </a> </div> <div class="method-heading"> <a href="#method-i-sub" title="Link to this method"> <span class="method-callseq"> sub(pattern) {|...| block } → $_ </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="sub-source"> <pre class="c" data-language="c">static VALUE
rb_f_sub(int argc, VALUE *argv, VALUE _)
{
    VALUE str = rb_funcall_passing_block(uscore_get(), rb_intern("sub"), argc, argv);
    rb_lastline_set(str);
    return str;
}</pre> </div>  <p>Equivalent to <code>$_.sub(<em>args</em>)</code>, except that <code>$_</code> will be updated if substitution occurs. Available only when -p/-n command line option specified.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-syscall"> <a href="#method-i-syscall" title="Link to this method"> <span class="method-callseq"> syscall(integer_callno, *arguments) → integer </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="syscall-source"> <pre class="c" data-language="c">static VALUE
rb_f_syscall(int argc, VALUE *argv, VALUE _)
{
    VALUE arg[8];
#if SIZEOF_VOIDP == 8 &amp;&amp; defined(HAVE___SYSCALL) &amp;&amp; SIZEOF_INT != 8 /* mainly *BSD */
# define SYSCALL __syscall
# define NUM2SYSCALLID(x) NUM2LONG(x)
# define RETVAL2NUM(x) LONG2NUM(x)
# if SIZEOF_LONG == 8
    long num, retval = -1;
# elif SIZEOF_LONG_LONG == 8
    long long num, retval = -1;
# else
#  error ----&gt;&gt; it is asserted that __syscall takes the first argument and returns retval in 64bit signed integer. &lt;&lt;----
# endif
#elif defined(__linux__)
# define SYSCALL syscall
# define NUM2SYSCALLID(x) NUM2LONG(x)
# define RETVAL2NUM(x) LONG2NUM(x)
    /*
     * Linux man page says, syscall(2) function prototype is below.
     *
     *     int syscall(int number, ...);
     *
     * But, it's incorrect. Actual one takes and returned long. (see unistd.h)
     */
    long num, retval = -1;
#else
# define SYSCALL syscall
# define NUM2SYSCALLID(x) NUM2INT(x)
# define RETVAL2NUM(x) INT2NUM(x)
    int num, retval = -1;
#endif
    int i;

    if (RTEST(ruby_verbose)) {
        rb_category_warning(RB_WARN_CATEGORY_DEPRECATED,
            "We plan to remove a syscall function at future release. DL(Fiddle) provides safer alternative.");
    }

    if (argc == 0)
        rb_raise(rb_eArgError, "too few arguments for syscall");
    if (argc &gt; numberof(arg))
        rb_raise(rb_eArgError, "too many arguments for syscall");
    num = NUM2SYSCALLID(argv[0]); ++argv;
    for (i = argc - 1; i--; ) {
        VALUE v = rb_check_string_type(argv[i]);

        if (!NIL_P(v)) {
            StringValue(v);
            rb_str_modify(v);
            arg[i] = (VALUE)StringValueCStr(v);
        }
        else {
            arg[i] = (VALUE)NUM2LONG(argv[i]);
        }
    }

    switch (argc) {
      case 1:
        retval = SYSCALL(num);
        break;
      case 2:
        retval = SYSCALL(num, arg[0]);
        break;
      case 3:
        retval = SYSCALL(num, arg[0],arg[1]);
        break;
      case 4:
        retval = SYSCALL(num, arg[0],arg[1],arg[2]);
        break;
      case 5:
        retval = SYSCALL(num, arg[0],arg[1],arg[2],arg[3]);
        break;
      case 6:
        retval = SYSCALL(num, arg[0],arg[1],arg[2],arg[3],arg[4]);
        break;
      case 7:
        retval = SYSCALL(num, arg[0],arg[1],arg[2],arg[3],arg[4],arg[5]);
        break;
      case 8:
        retval = SYSCALL(num, arg[0],arg[1],arg[2],arg[3],arg[4],arg[5],arg[6]);
        break;
    }

    if (retval == -1)
        rb_sys_fail(0);
    return RETVAL2NUM(retval);
#undef SYSCALL
#undef NUM2SYSCALLID
#undef RETVAL2NUM
}</pre> </div>  <p>Invokes Posix system call <a href="https://linux.die.net/man/2/syscall">syscall(2)</a>, which calls a specified function.</p> <p>Calls the operating system function identified by <code>integer_callno</code>; returns the result of the function or raises <a href="systemcallerror.html"><code>SystemCallError</code></a> if it failed. The effect of the call is platform-dependent. The arguments and returned value are platform-dependent.</p> <p>For each of <code>arguments</code>: if it is an integer, it is passed directly; if it is a string, it is interpreted as a binary sequence of bytes. There may be as many as nine such arguments.</p> <p>Arguments <code>integer_callno</code> and <code>argument</code>, as well as the returned value, are platform-dependent.</p> <p>Note: <a href="method.html"><code>Method</code></a> <code>syscall</code> is essentially unsafe and unportable. The DL (<a href="fiddle.html"><code>Fiddle</code></a>) library is preferred for safer and a bit more portable programming.</p> <p>Not implemented on all platforms.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-system"> <a href="#method-i-system" title="Link to this method"> <span class="method-callseq"> system([env, ] command_line, options = {}, exception: false) → true, false, or nil </span> </a> </div> <div class="method-heading"> <a href="#method-i-system" title="Link to this method"> <span class="method-callseq"> system([env, ] exe_path, *args, options = {}, exception: false) → true, false, or nil </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="system-source"> <pre class="c" data-language="c">static VALUE
rb_f_system(int argc, VALUE *argv, VALUE _)
{
    rb_thread_t *th = GET_THREAD();
    VALUE execarg_obj = rb_execarg_new(argc, argv, TRUE, TRUE);
    struct rb_execarg *eargp = rb_execarg_get(execarg_obj);

    struct rb_process_status status = {0};
    eargp-&gt;status = &amp;status;

    last_status_clear(th);

    // This function can set the thread's last status.
    // May be different from waitpid_state.pid on exec failure.
    rb_pid_t pid = rb_execarg_spawn(execarg_obj, 0, 0);

    if (pid &gt; 0) {
        VALUE status = rb_process_status_wait(pid, 0);
        struct rb_process_status *data = rb_check_typeddata(status, &amp;rb_process_status_type);
        // Set the last status:
        rb_obj_freeze(status);
        th-&gt;last_status = status;

        if (data-&gt;status == EXIT_SUCCESS) {
            return Qtrue;
        }

        if (data-&gt;error != 0) {
            if (eargp-&gt;exception) {
                VALUE command = eargp-&gt;invoke.sh.shell_script;
                RB_GC_GUARD(execarg_obj);
                rb_syserr_fail_str(data-&gt;error, command);
            }
            else {
                return Qnil;
            }
        }
        else if (eargp-&gt;exception) {
            VALUE command = eargp-&gt;invoke.sh.shell_script;
            VALUE str = rb_str_new_cstr("Command failed with");
            rb_str_cat_cstr(pst_message_status(str, data-&gt;status), ": ");
            rb_str_append(str, command);
            RB_GC_GUARD(execarg_obj);
            rb_exc_raise(rb_exc_new_str(rb_eRuntimeError, str));
        }
        else {
            return Qfalse;
        }

        RB_GC_GUARD(status);
    }

    if (eargp-&gt;exception) {
        VALUE command = eargp-&gt;invoke.sh.shell_script;
        RB_GC_GUARD(execarg_obj);
        rb_syserr_fail_str(errno, command);
    }
    else {
        return Qnil;
    }
}</pre> </div>  <p>Creates a new child process by doing one of the following in that process:</p> <ul>
<li> <p>Passing string <code>command_line</code> to the shell.</p> </li>
<li> <p>Invoking the executable at <code>exe_path</code>.</p> </li>
</ul> <p>This method has potential security vulnerabilities if called with untrusted input; see <a href="command_injection_rdoc.html">Command Injection</a>.</p> <p>Returns:</p> <ul>
<li> <p><code>true</code> if the command exits with status zero.</p> </li>
<li> <p><code>false</code> if the exit status is a non-zero integer.</p> </li>
<li> <p><code>nil</code> if the command could not execute.</p> </li>
</ul> <p>Raises an exception (instead of returning <code>false</code> or <code>nil</code>) if keyword argument <code>exception</code> is set to <code>true</code>.</p> <p>Assigns the command’s error status to <code>$?</code>.</p> <p>The new process is created using the <a href="https://pubs.opengroup.org/onlinepubs/9699919799.2018edition/functions/system.html">system system call</a>; it may inherit some of its environment from the calling program (possibly including open file descriptors).</p> <p>Argument <code>env</code>, if given, is a hash that affects <a href="env.html"><code>ENV</code></a> for the new process; see <a href="process.html#module-Process-label-Execution+Environment">Execution Environment</a>.</p> <p>Argument <code>options</code> is a hash of options for the new process; see <a href="process.html#module-Process-label-Execution+Options">Execution Options</a>.</p> <p>The first required argument is one of the following:</p> <ul>
<li> <p><code>command_line</code> if it is a string, and if it begins with a shell reserved word or special built-in, or if it contains one or more meta characters.</p> </li>
<li> <p><code>exe_path</code> otherwise.</p> </li>
</ul> <p><strong>Argument <code>command_line</code></strong></p> <p>String argument <code>command_line</code> is a command line to be passed to a shell; it must begin with a shell reserved word, begin with a special built-in, or contain meta characters:</p> <pre class="ruby" data-language="ruby">system('if true; then echo "Foo"; fi')          # =&gt; true  # Shell reserved word.
system('exit')                                  # =&gt; true  # Built-in.
system('date &gt; /tmp/date.tmp')                  # =&gt; true  # Contains meta character.
system('date &gt; /nop/date.tmp')                  # =&gt; false
system('date &gt; /nop/date.tmp', exception: true) # Raises RuntimeError.
</pre> <p>Assigns the command’s error status to <code>$?</code>:</p> <pre class="ruby" data-language="ruby">system('exit')                             # =&gt; true  # Built-in.
$?                                         # =&gt; #&lt;Process::Status: pid 640610 exit 0&gt;
system('date &gt; /nop/date.tmp')             # =&gt; false
$?                                         # =&gt; #&lt;Process::Status: pid 640742 exit 2&gt;
</pre> <p>The command line may also contain arguments and options for the command:</p> <pre class="ruby" data-language="ruby">system('echo "Foo"') # =&gt; true
</pre> <p>Output:</p> <pre class="ruby" data-language="ruby">Foo
</pre> <p>See <a href="process.html#module-Process-label-Execution+Shell">Execution Shell</a> for details about the shell.</p> <p>Raises an exception if the new process could not execute.</p> <p><strong>Argument <code>exe_path</code></strong></p> <p>Argument <code>exe_path</code> is one of the following:</p> <ul>
<li> <p>The string path to an executable to be called.</p> </li>
<li> <p>A 2-element array containing the path to an executable and the string to be used as the name of the executing process.</p> </li>
</ul> <p>Example:</p> <pre class="ruby" data-language="ruby">system('/usr/bin/date') # =&gt; true # Path to date on Unix-style system.
system('foo')           # =&gt; nil  # Command failed.
</pre> <p>Output:</p> <pre>Mon Aug 28 11:43:10 AM CDT 2023</pre> <p>Assigns the command’s error status to <code>$?</code>:</p> <pre class="ruby" data-language="ruby">system('/usr/bin/date') # =&gt; true
$?                      # =&gt; #&lt;Process::Status: pid 645605 exit 0&gt;
system('foo')           # =&gt; nil
$?                      # =&gt; #&lt;Process::Status: pid 645608 exit 127&gt;
</pre> <p>Ruby invokes the executable directly. This form does not use the shell; see <a href="process.html#module-Process-label-Arguments+args">Arguments args</a> for caveats.</p> <pre class="ruby" data-language="ruby">system('doesnt_exist') # =&gt; nil
</pre> <p>If one or more <code>args</code> is given, each is an argument or option to be passed to the executable:</p> <pre class="ruby" data-language="ruby">system('echo', 'C*')             # =&gt; true
system('echo', 'hello', 'world') # =&gt; true
</pre> <p>Output:</p> <pre>C*
hello world</pre> <p>Raises an exception if the new process could not execute.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-tap"> <a href="#method-i-tap" title="Link to this method"> <span class="method-callseq"> tap {|x| block } → obj </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="tap-source"> <pre class="ruby" data-language="ruby"># File kernel.rb, line 89
def tap
  Primitive.attr! :inline_block
  yield(self)
  self
end</pre> </div>  <p>Yields self to the block and then returns self. The primary purpose of this method is to “tap into” a method chain, in order to perform operations on intermediate results within the chain.</p> <pre class="ruby" data-language="ruby">(1..10)                  .tap {|x| puts "original: #{x}" }
  .to_a                  .tap {|x| puts "array:    #{x}" }
  .select {|x| x.even? } .tap {|x| puts "evens:    #{x}" }
  .map {|x| x*x }        .tap {|x| puts "squares:  #{x}" }
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-test"> <a href="#method-i-test" title="Link to this method"> <span class="method-callseq"> test(char, path0, path1 = nil) → object </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="test-source"> <pre class="c" data-language="c">static VALUE
rb_f_test(int argc, VALUE *argv, VALUE _)
{
    int cmd;

    if (argc == 0) rb_check_arity(argc, 2, 3);
    cmd = NUM2CHR(argv[0]);
    if (cmd == 0) {
        goto unknown;
    }
    if (strchr("bcdefgGkloOprRsSuwWxXz", cmd)) {
        CHECK(1);
        switch (cmd) {
          case 'b':
            return rb_file_blockdev_p(0, argv[1]);

          case 'c':
            return rb_file_chardev_p(0, argv[1]);

          case 'd':
            return rb_file_directory_p(0, argv[1]);

          case 'e':
            return rb_file_exist_p(0, argv[1]);

          case 'f':
            return rb_file_file_p(0, argv[1]);

          case 'g':
            return rb_file_sgid_p(0, argv[1]);

          case 'G':
            return rb_file_grpowned_p(0, argv[1]);

          case 'k':
            return rb_file_sticky_p(0, argv[1]);

          case 'l':
            return rb_file_symlink_p(0, argv[1]);

          case 'o':
            return rb_file_owned_p(0, argv[1]);

          case 'O':
            return rb_file_rowned_p(0, argv[1]);

          case 'p':
            return rb_file_pipe_p(0, argv[1]);

          case 'r':
            return rb_file_readable_p(0, argv[1]);

          case 'R':
            return rb_file_readable_real_p(0, argv[1]);

          case 's':
            return rb_file_size_p(0, argv[1]);

          case 'S':
            return rb_file_socket_p(0, argv[1]);

          case 'u':
            return rb_file_suid_p(0, argv[1]);

          case 'w':
            return rb_file_writable_p(0, argv[1]);

          case 'W':
            return rb_file_writable_real_p(0, argv[1]);

          case 'x':
            return rb_file_executable_p(0, argv[1]);

          case 'X':
            return rb_file_executable_real_p(0, argv[1]);

          case 'z':
            return rb_file_zero_p(0, argv[1]);
        }
    }

    if (strchr("MAC", cmd)) {
        struct stat st;
        VALUE fname = argv[1];

        CHECK(1);
        if (rb_stat(fname, &amp;st) == -1) {
            int e = errno;
            FilePathValue(fname);
            rb_syserr_fail_path(e, fname);
        }

        switch (cmd) {
          case 'A':
            return stat_atime(&amp;st);
          case 'M':
            return stat_mtime(&amp;st);
          case 'C':
            return stat_ctime(&amp;st);
        }
    }

    if (cmd == '-') {
        CHECK(2);
        return rb_file_identical_p(0, argv[1], argv[2]);
    }

    if (strchr("=&lt;&gt;", cmd)) {
        struct stat st1, st2;
        struct timespec t1, t2;

        CHECK(2);
        if (rb_stat(argv[1], &amp;st1) &lt; 0) return Qfalse;
        if (rb_stat(argv[2], &amp;st2) &lt; 0) return Qfalse;

        t1 = stat_mtimespec(&amp;st1);
        t2 = stat_mtimespec(&amp;st2);

        switch (cmd) {
          case '=':
            if (t1.tv_sec == t2.tv_sec &amp;&amp; t1.tv_nsec == t2.tv_nsec) return Qtrue;
            return Qfalse;

          case '&gt;':
            if (t1.tv_sec &gt; t2.tv_sec) return Qtrue;
            if (t1.tv_sec == t2.tv_sec &amp;&amp; t1.tv_nsec &gt; t2.tv_nsec) return Qtrue;
            return Qfalse;

          case '&lt;':
            if (t1.tv_sec &lt; t2.tv_sec) return Qtrue;
            if (t1.tv_sec == t2.tv_sec &amp;&amp; t1.tv_nsec &lt; t2.tv_nsec) return Qtrue;
            return Qfalse;
        }
    }
  unknown:
    /* unknown command */
    if (ISPRINT(cmd)) {
        rb_raise(rb_eArgError, "unknown command '%s%c'", cmd == '\'' || cmd == '\\' ? "\\" : "", cmd);
    }
    else {
        rb_raise(rb_eArgError, "unknown command \"\\x%02X\"", cmd);
    }
    UNREACHABLE_RETURN(Qundef);
}</pre> </div>  <p>Performs a test on one or both of the <em>filesystem entities</em> at the given paths <code>path0</code> and <code>path1</code>:</p> <ul>
<li> <p>Each path <code>path0</code> or <code>path1</code> points to a file, directory, device, pipe, etc.</p> </li>
<li> <p>Character <code>char</code> selects a specific test.</p> </li>
</ul> <p>The tests:</p> <ul>
<li> <p>Each of these tests operates only on the entity at <code>path0</code>, and returns <code>true</code> or <code>false</code>; for a non-existent entity, returns <code>false</code> (does not raise exception):</p> <table role="table"> <thead> <tr> <th align="center">Character</th> <th align="left">Test</th> </tr> </thead> <tbody> <tr> <td align="center"><code>'b'</code></td> <td align="left">Whether the entity is a block device.</td> </tr> <tr> <td align="center"><code>'c'</code></td> <td align="left">Whether the entity is a character device.</td> </tr> <tr> <td align="center"><code>'d'</code></td> <td align="left">Whether the entity is a directory.</td> </tr> <tr> <td align="center"><code>'e'</code></td> <td align="left">Whether the entity is an existing entity.</td> </tr> <tr> <td align="center"><code>'f'</code></td> <td align="left">Whether the entity is an existing regular file.</td> </tr> <tr> <td align="center"><code>'g'</code></td> <td align="left">Whether the entity's setgid bit is set.</td> </tr> <tr> <td align="center"><code>'G'</code></td> <td align="left">Whether the entity's group ownership is equal to the caller's.</td> </tr> <tr> <td align="center"><code>'k'</code></td> <td align="left">Whether the entity's sticky bit is set.</td> </tr> <tr> <td align="center"><code>'l'</code></td> <td align="left">Whether the entity is a symbolic link.</td> </tr> <tr> <td align="center"><code>'o'</code></td> <td align="left">Whether the entity is owned by the caller's effective uid.</td> </tr> <tr> <td align="center"><code>'O'</code></td> <td align="left">Like <code>'o'</code>, but uses the real uid (not the effective uid).</td> </tr> <tr> <td align="center"><code>'p'</code></td> <td align="left">Whether the entity is a FIFO device (named pipe).</td> </tr> <tr> <td align="center"><code>'r'</code></td> <td align="left">Whether the entity is readable by the caller's effective uid/gid.</td> </tr> <tr> <td align="center"><code>'R'</code></td> <td align="left">Like <code>'r'</code>, but uses the real uid/gid (not the effective uid/gid).</td> </tr> <tr> <td align="center"><code>'S'</code></td> <td align="left">Whether the entity is a socket.</td> </tr> <tr> <td align="center"><code>'u'</code></td> <td align="left">Whether the entity's setuid bit is set.</td> </tr> <tr> <td align="center"><code>'w'</code></td> <td align="left">Whether the entity is writable by the caller's effective uid/gid.</td> </tr> <tr> <td align="center"><code>'W'</code></td> <td align="left">Like <code>'w'</code>, but uses the real uid/gid (not the effective uid/gid).</td> </tr> <tr> <td align="center"><code>'x'</code></td> <td align="left">Whether the entity is executable by the caller's effective uid/gid.</td> </tr> <tr> <td align="center"><code>'X'</code></td> <td align="left">Like <code>'x'</code>, but uses the real uid/gid (not the effective uid/git).</td> </tr> <tr> <td align="center"><code>'z'</code></td> <td align="left">Whether the entity exists and is of length zero.</td> </tr> </tbody> </table> </li>
<li> <p>This test operates only on the entity at <code>path0</code>, and returns an integer size or <code>nil</code>:</p> <table role="table"> <thead> <tr> <th align="center">Character</th> <th align="left">Test</th> </tr> </thead> <tbody> <tr> <td align="center"><code>'s'</code></td> <td align="left">Returns positive integer size if the entity exists and has non-zero length, <code>nil</code> otherwise.</td> </tr> </tbody> </table> </li>
<li> <p>Each of these tests operates only on the entity at <code>path0</code>, and returns a <a href="time.html"><code>Time</code></a> object; raises an exception if the entity does not exist:</p> <table role="table"> <thead> <tr> <th align="center">Character</th> <th align="left">Test</th> </tr> </thead> <tbody> <tr> <td align="center"><code>'A'</code></td> <td align="left">Last access time for the entity.</td> </tr> <tr> <td align="center"><code>'C'</code></td> <td align="left">Last change time for the entity.</td> </tr> <tr> <td align="center"><code>'M'</code></td> <td align="left">Last modification time for the entity.</td> </tr> </tbody> </table> </li>
<li> <p>Each of these tests operates on the modification time (<code>mtime</code>) of each of the entities at <code>path0</code> and <code>path1</code>, and returns a <code>true</code> or <code>false</code>; returns <code>false</code> if either entity does not exist:</p> <table role="table"> <thead> <tr> <th align="center">Character</th> <th align="left">Test</th> </tr> </thead> <tbody> <tr> <td align="center"><code>'&lt;'</code></td> <td align="left">Whether the 'mtime` at `path0` is less than that at `path1`.</td> </tr> <tr> <td align="center"><code>'='</code></td> <td align="left">Whether the 'mtime` at `path0` is equal to that at `path1`.</td> </tr> <tr> <td align="center"><code>'&gt;'</code></td> <td align="left">Whether the 'mtime` at `path0` is greater than that at `path1`.</td> </tr> </tbody> </table> </li>
<li> <p>This test operates on the content of each of the entities at <code>path0</code> and <code>path1</code>, and returns a <code>true</code> or <code>false</code>; returns <code>false</code> if either entity does not exist:</p> <table role="table"> <thead> <tr> <th align="center">Character</th> <th align="left">Test</th> </tr> </thead> <tbody> <tr> <td align="center"><code>'-'</code></td> <td align="left">Whether the entities exist and are identical.</td> </tr> </tbody> </table> </li>
</ul> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-then"> <a href="#method-i-then" title="Link to this method"> <span class="method-callseq"> then {|x| block } → an_object </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="then-source"> <pre class="ruby" data-language="ruby"># File kernel.rb, line 121
def then
  Primitive.attr! :inline_block
  unless defined?(yield)
    return Primitive.cexpr! 'SIZED_ENUMERATOR(self, 0, 0, rb_obj_size)'
  end
  yield(self)
end</pre> </div>  <p>Yields self to the block and returns the result of the block.</p> <pre class="ruby" data-language="ruby">3.next.then {|x| x**x }.to_s             #=&gt; "256"
</pre> <p>A good use of <code>then</code> is value piping in method chains:</p> <pre class="ruby" data-language="ruby">require 'open-uri'
require 'json'

construct_url(arguments)
  .then {|url| URI(url).read }
  .then {|response| JSON.parse(response) }
</pre> <p>When called without a block, the method returns an <a href="enumerator.html"><code>Enumerator</code></a>, which can be used, for example, for conditional circuit-breaking:</p> <pre class="ruby" data-language="ruby"># Meets condition, no-op
1.then.detect(&amp;:odd?)            # =&gt; 1
# Does not meet condition, drop value
2.then.detect(&amp;:odd?)            # =&gt; nil
</pre> </div> <div class="aliases"> Also aliased as: <a href="kernel.html#method-i-yield_self">yield_self</a> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-throw"> <a href="#method-i-throw" title="Link to this method"> <span class="method-callseq"> throw(tag [, obj]) </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="throw-source"> <pre class="c" data-language="c">static VALUE
rb_f_throw(int argc, VALUE *argv, VALUE _)
{
    VALUE tag, value;

    rb_scan_args(argc, argv, "11", &amp;tag, &amp;value);
    rb_throw_obj(tag, value);
    UNREACHABLE_RETURN(Qnil);
}</pre> </div>  <p>Transfers control to the end of the active <code>catch</code> block waiting for <em>tag</em>. Raises <a href="uncaughtthrowerror.html"><code>UncaughtThrowError</code></a> if there is no <code>catch</code> block for the <em>tag</em>. The optional second parameter supplies a return value for the <code>catch</code> block, which otherwise defaults to <code>nil</code>. For examples, see Kernel::catch.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-trace_var"> <a href="#method-i-trace_var" title="Link to this method"> <span class="method-callseq"> trace_var(symbol, cmd ) → nil </span> </a> </div> <div class="method-heading"> <a href="#method-i-trace_var" title="Link to this method"> <span class="method-callseq"> trace_var(symbol) {|val| block } → nil </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="trace_var-source"> <pre class="c" data-language="c">static VALUE
f_trace_var(int c, const VALUE *a, VALUE _)
{
    return rb_f_trace_var(c, a);
}</pre> </div>  <p>Controls tracing of assignments to global variables. The parameter <code>symbol</code> identifies the variable (as either a string name or a symbol identifier). <em>cmd</em> (which may be a string or a <a href="proc.html"><code>Proc</code></a> object) or block is executed whenever the variable is assigned. The block or <a href="proc.html"><code>Proc</code></a> object receives the variable’s new value as a parameter. Also see <a href="kernel.html#method-i-untrace_var"><code>untrace_var</code></a>.</p> <pre class="ruby" data-language="ruby">trace_var :$_, proc {|v| puts "$_ is now '#{v}'" }
$_ = "hello"
$_ = ' there'
</pre> <p><em>produces:</em></p> <pre>$_ is now 'hello'
$_ is now ' there'</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-trap"> <a href="#method-i-trap" title="Link to this method"> <span class="method-callseq"> trap( signal, command ) → obj </span> </a> </div> <div class="method-heading"> <a href="#method-i-trap" title="Link to this method"> <span class="method-callseq"> trap( signal ) {| | block } → obj </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="trap-source"> <pre class="c" data-language="c">static VALUE
sig_trap(int argc, VALUE *argv, VALUE _)
{
    int sig;
    sighandler_t func;
    VALUE cmd;

    rb_check_arity(argc, 1, 2);

    sig = trap_signm(argv[0]);
    if (reserved_signal_p(sig)) {
        const char *name = signo2signm(sig);
        if (name)
            rb_raise(rb_eArgError, "can't trap reserved signal: SIG%s", name);
        else
            rb_raise(rb_eArgError, "can't trap reserved signal: %d", sig);
    }

    if (argc == 1) {
        cmd = rb_block_proc();
        func = sighandler;
    }
    else {
        cmd = argv[1];
        func = trap_handler(&amp;cmd, sig);
    }

    if (rb_obj_is_proc(cmd) &amp;&amp;
        !rb_ractor_main_p() &amp;&amp; !rb_ractor_shareable_p(cmd)) {
        cmd = rb_proc_isolate(cmd);
    }

    return trap(sig, func, cmd);
}</pre> </div>  <p>Specifies the handling of signals. The first parameter is a signal name (a string such as “SIGALRM”, “SIGUSR1”, and so on) or a signal number. The characters “SIG” may be omitted from the signal name. The command or block specifies code to be run when the signal is raised. If the command is the string “IGNORE” or “SIG_IGN”, the signal will be ignored. If the command is “DEFAULT” or “SIG_DFL”, the Ruby’s default handler will be invoked. If the command is “EXIT”, the script will be terminated by the signal. If the command is “SYSTEM_DEFAULT”, the operating system’s default handler will be invoked. Otherwise, the given command or block will be run. The special signal name “EXIT” or signal number zero will be invoked just prior to program termination. trap returns the previous handler for the given signal.</p> <pre class="ruby" data-language="ruby">Signal.trap(0, proc { puts "Terminating: #{$$}" })
Signal.trap("CLD")  { puts "Child died" }
fork &amp;&amp; Process.wait
</pre> <p><em>produces:</em></p> <pre>Terminating: 27461
Child died
Terminating: 27460</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-untrace_var"> <a href="#method-i-untrace_var" title="Link to this method"> <span class="method-callseq"> untrace_var(symbol [, cmd] ) → array or nil </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="untrace_var-source"> <pre class="c" data-language="c">static VALUE
f_untrace_var(int c, const VALUE *a, VALUE _)
{
    return rb_f_untrace_var(c, a);
}</pre> </div>  <p>Removes tracing for the specified command on the given global variable and returns <code>nil</code>. If no command is specified, removes all tracing for that variable and returns an array containing the commands actually removed.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-warn"> <a href="#method-i-warn" title="Link to this method"> <span class="method-callseq"> warn(*msgs, uplevel: nil, category: nil) → nil </span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="warn-source"> <pre class="ruby" data-language="ruby"># File warning.rb, line 52
def warn(*msgs, uplevel: nil, category: nil)
  if Primitive.cexpr!("NIL_P(category)")
    Primitive.rb_warn_m(msgs, uplevel, nil)
  elsif Warning[category = Primitive.cexpr!("rb_to_symbol_type(category)")]
    Primitive.rb_warn_m(msgs, uplevel, category)
  end
end</pre> </div>  <p>If warnings have been disabled (for example with the <code>-W0</code> flag), does nothing. Otherwise, converts each of the messages to strings, appends a newline character to the string if the string does not end in a newline, and calls <a href="warning.html#method-i-warn"><code>Warning.warn</code></a> with the string.</p> <pre class="ruby" data-language="ruby">warn("warning 1", "warning 2")
</pre> <p><em>produces:</em></p> <pre class="ruby" data-language="ruby">warning 1
warning 2
</pre> <p>If the <code>uplevel</code> keyword argument is given, the string will be prepended with information for the given caller frame in the same format used by the <code>rb_warn</code> C function.</p> <pre class="ruby" data-language="ruby"># In baz.rb
def foo
  warn("invalid call to foo", uplevel: 1)
end

def bar
  foo
end

bar
</pre> <p><em>produces:</em></p> <pre>baz.rb:6: warning: invalid call to foo</pre> <p>If <code>category</code> keyword argument is given, passes the category to <a href="warning.html#method-i-warn"><code>Warning.warn</code></a>. The category given must be one of the following categories:</p> <dl class="rdoc-list note-list">
<dt>:deprecated </dt> <dd> <p>Used for warning for deprecated functionality that may be removed in the future.</p> </dd>
<dt>:experimental </dt> <dd> <p>Used for experimental features that may change in future releases.</p> </dd>
<dt>:performance </dt> <dd> <p>Used for warning about APIs or pattern that have negative performance impact</p> </dd>
</dl> </div> </div> <div class="method-detail anchor-link method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-yield_self"> <a href="#method-i-yield_self" title="Link to this method"> <span class="method-name">yield_self</span> </a> </div> </div> <div class="aliases"> Alias for: <a href="kernel.html#method-i-then">then</a> </div> </div> </section> <section id="private-instance-5Buntitled-5D-method-details" class="method-section anchor-link"> <header> <h3>Private Instance Methods</h3> </header> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-JSON"> <a href="#method-i-JSON" title="Link to this method"> <span class="method-name">JSON</span> <span class="method-args">(object, *args)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="JSON-source"> <pre class="ruby" data-language="ruby"># File ext/json/lib/json/common.rb, line 873
def JSON(object, *args)
  if object.is_a?(String)
    return JSON.parse(object, args.first)
  elsif object.respond_to?(:to_str)
    str = object.to_str
    if str.is_a?(String)
      return JSON.parse(object.to_str, args.first)
    end
  end

  JSON.generate(object, args.first)
end</pre> </div>  <p>If <em>object</em> is string-like, parse the string and return the parsed result as a Ruby data structure. Otherwise, generate a <a href="json.html"><code>JSON</code></a> text from the Ruby data structure object and return it.</p> <p>The <em>opts</em> argument is passed through to generate/parse respectively. See generate and parse for their documentation.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-URI"> <a href="#method-i-URI" title="Link to this method"> <span class="method-name">URI</span> <span class="method-args">(uri)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="URI-source"> <pre class="ruby" data-language="ruby"># File lib/uri/common.rb, line 865
def URI(uri)
  if uri.is_a?(URI::Generic)
    uri
  elsif uri = String.try_convert(uri)
    URI.parse(uri)
  else
    raise ArgumentError,
      "bad argument (expected URI object or URI string)"
  end
end</pre> </div>  <p>Returns a URI object derived from the given <code>uri</code>, which may be a URI string or an existing URI object:</p> <pre class="ruby" data-language="ruby"># Returns a new URI.
uri = URI('http://github.com/ruby/ruby')
# =&gt; #&lt;URI::HTTP http://github.com/ruby/ruby&gt;
# Returns the given URI.
URI(uri)
# =&gt; #&lt;URI::HTTP http://github.com/ruby/ruby&gt;
</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-gem"> <a href="#method-i-gem" title="Link to this method"> <span class="method-name">gem</span> <span class="method-args">(gem_name, *requirements)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="gem-source"> <pre class="ruby" data-language="ruby"># File lib/rubygems/core_ext/kernel_gem.rb, line 35
def gem(gem_name, *requirements) # :doc:
  skip_list = (ENV["GEM_SKIP"] || "").split(/:/)
  raise Gem::LoadError, "skipping #{gem_name}" if skip_list.include? gem_name

  if gem_name.is_a? Gem::Dependency
    unless Gem::Deprecate.skip
      warn "#{Gem.location_of_caller.join ":"}:Warning: Kernel.gem no longer "\
        "accepts a Gem::Dependency object, please pass the name "\
        "and requirements directly"
    end

    requirements = gem_name.requirement
    gem_name = gem_name.name
  end

  dep = Gem::Dependency.new(gem_name, *requirements)

  loaded = Gem.loaded_specs[gem_name]

  return false if loaded &amp;&amp; dep.matches_spec?(loaded)

  spec = dep.to_spec

  if spec
    if Gem::LOADED_SPECS_MUTEX.owned?
      spec.activate
    else
      Gem::LOADED_SPECS_MUTEX.synchronize { spec.activate }
    end
  end
end</pre> </div>  <p>Use <a href="kernel.html#method-i-gem"><code>Kernel#gem</code></a> to activate a specific version of <code>gem_name</code>.</p> <p><code>requirements</code> is a list of version requirements that the specified gem must match, most commonly “= example.version.number”. See <span><code>Gem::Requirement</code></span> for how to specify a version requirement.</p> <p>If you will be activating the latest version of a gem, there is no need to call <a href="kernel.html#method-i-gem"><code>Kernel#gem</code></a>, <a href="kernel.html#method-i-require"><code>Kernel#require</code></a> will do the right thing for you.</p> <p><a href="kernel.html#method-i-gem"><code>Kernel#gem</code></a> returns true if the gem was activated, otherwise false. If the gem could not be found, didn’t match the version requirements, or a different version was already activated, an exception will be raised.</p> <p><a href="kernel.html#method-i-gem"><code>Kernel#gem</code></a> should be called <strong>before</strong> any require statements (otherwise RubyGems may load a conflicting library version).</p> <p><a href="kernel.html#method-i-gem"><code>Kernel#gem</code></a> only loads prerelease versions when prerelease <code>requirements</code> are given:</p> <pre class="ruby" data-language="ruby">gem 'rake', '&gt;= 1.1.a', '&lt; 2'
</pre> <p>In older RubyGems versions, the environment variable GEM_SKIP could be used to skip activation of specified gems, for example to test out changes that haven’t been installed yet. Now RubyGems defers to -I and the RUBYLIB environment variable to skip activation of a gem.</p> <p>Example:</p> <pre>GEM_SKIP=libA:libB ruby -I../libA -I../libB ./mycode.rb</pre> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-j"> <a href="#method-i-j" title="Link to this method"> <span class="method-name">j</span> <span class="method-args">(*objs)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="j-source"> <pre class="ruby" data-language="ruby"># File ext/json/lib/json/common.rb, line 851
def j(*objs)
  objs.each do |obj|
    puts JSON::generate(obj, :allow_nan =&gt; true, :max_nesting =&gt; false)
  end
  nil
end</pre> </div>  <p>Outputs <em>objs</em> to STDOUT as <a href="json.html"><code>JSON</code></a> strings in the shortest form, that is in one line.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-jj"> <a href="#method-i-jj" title="Link to this method"> <span class="method-name">jj</span> <span class="method-args">(*objs)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="jj-source"> <pre class="ruby" data-language="ruby"># File ext/json/lib/json/common.rb, line 860
def jj(*objs)
  objs.each do |obj|
    puts JSON::pretty_generate(obj, :allow_nan =&gt; true, :max_nesting =&gt; false)
  end
  nil
end</pre> </div>  <p>Outputs <em>objs</em> to STDOUT as <a href="json.html"><code>JSON</code></a> strings in a pretty format, with indentation and over many lines.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-pp"> <a href="#method-i-pp" title="Link to this method"> <span class="method-name">pp</span> <span class="method-args">(*objs)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="pp-source"> <pre class="ruby" data-language="ruby"># File lib/pp.rb, line 692
def pp(*objs)
  objs.each {|obj|
    PP.pp(obj)
  }
  objs.size &lt;= 1 ? objs.first : objs
end</pre> </div>  <p>prints arguments in pretty form.</p> <p><a href="kernel.html#method-i-pp"><code>pp</code></a> returns argument(s).</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-require"> <a href="#method-i-require" title="Link to this method"> <span class="method-name">require</span> <span class="method-args">(path)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="require-source"> <pre class="ruby" data-language="ruby"># File lib/rubygems/core_ext/kernel_require.rb, line 36
def require(path) # :doc:
  return gem_original_require(path) unless Gem.discover_gems_on_require

  RUBYGEMS_ACTIVATION_MONITOR.synchronize do
    path = File.path(path)

    # If +path+ belongs to a default gem, we activate it and then go straight
    # to normal require

    if spec = Gem.find_default_spec(path)
      name = spec.name

      next if Gem.loaded_specs[name]

      # Ensure -I beats a default gem
      resolved_path = begin
        rp = nil
        load_path_check_index = Gem.load_path_insert_index - Gem.activated_gem_paths
        Gem.suffixes.find do |s|
          $LOAD_PATH[0...load_path_check_index].find do |lp|
            if File.symlink? lp # for backward compatibility
              next
            end

            full_path = File.expand_path(File.join(lp, "#{path}#{s}"))
            rp = full_path if File.file?(full_path)
          end
        end
        rp
      end

      Kernel.send(:gem, name, Gem::Requirement.default_prerelease) unless
        resolved_path

      next
    end

    # If there are no unresolved deps, then we can use just try
    # normal require handle loading a gem from the rescue below.

    if Gem::Specification.unresolved_deps.empty?
      next
    end

    # If +path+ is for a gem that has already been loaded, don't
    # bother trying to find it in an unresolved gem, just go straight
    # to normal require.
    #--
    # TODO request access to the C implementation of this to speed up RubyGems

    if Gem::Specification.find_active_stub_by_path(path)
      next
    end

    # Attempt to find +path+ in any unresolved gems...

    found_specs = Gem::Specification.find_in_unresolved path

    # If there are no directly unresolved gems, then try and find +path+
    # in any gems that are available via the currently unresolved gems.
    # For example, given:
    #
    #   a =&gt; b =&gt; c =&gt; d
    #
    # If a and b are currently active with c being unresolved and d.rb is
    # requested, then find_in_unresolved_tree will find d.rb in d because
    # it's a dependency of c.
    #
    if found_specs.empty?
      found_specs = Gem::Specification.find_in_unresolved_tree path

      found_specs.each(&amp;:activate)

    # We found +path+ directly in an unresolved gem. Now we figure out, of
    # the possible found specs, which one we should activate.
    else

      # Check that all the found specs are just different
      # versions of the same gem
      names = found_specs.map(&amp;:name).uniq

      if names.size &gt; 1
        raise Gem::LoadError, "#{path} found in multiple gems: #{names.join ", "}"
      end

      # Ok, now find a gem that has no conflicts, starting
      # at the highest version.
      valid = found_specs.find {|s| !s.has_conflicts? }

      unless valid
        le = Gem::LoadError.new "unable to find a version of '#{names.first}' to activate"
        le.name = names.first
        raise le
      end

      valid.activate
    end
  end

  begin
    gem_original_require(path)
  rescue LoadError =&gt; load_error
    if load_error.path == path &amp;&amp;
       RUBYGEMS_ACTIVATION_MONITOR.synchronize { Gem.try_activate(path) }

      return gem_original_require(path)
    end

    raise load_error
  end
end</pre> </div>  <p>When RubyGems is required, <a href="kernel.html#method-i-require"><code>Kernel#require</code></a> is replaced with our own which is capable of loading gems on demand.</p> <p>When you call <code>require 'x'</code>, this is what happens:</p> <ul>
<li> <p>If the file can be loaded from the existing Ruby loadpath, it is.</p> </li>
<li> <p>Otherwise, installed gems are searched for a file that matches. If it’s found in gem ‘y’, that gem is activated (added to the loadpath).</p> </li>
</ul> <p>The normal <code>require</code> functionality of returning false if that file has already been loaded is preserved.</p> </div> </div> <div class="method-detail anchor-link "> <div class="method-header"> <div class="method-heading" id="method-i-y"> <a href="#method-i-y" title="Link to this method"> <span class="method-name">y</span> <span class="method-args">(*objects)</span> </a> </div> </div> <div class="method-controls"> <details class="method-source-toggle"> <summary>Source</summary> </details> </div> <div class="method-description">
<div class="method-source-code" id="y-source"> <pre class="ruby" data-language="ruby"># File ext/psych/lib/psych/y.rb, line 5
def y *objects
  puts Psych.dump_stream(*objects)
end</pre> </div>  <p>An alias for <a href="psych.html#method-c-dump_stream"><code>Psych.dump_stream</code></a> meant to be used with IRB.</p> </div> </div> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    Ruby Core &copy; 1993&ndash;2024 Yukihiro Matsumoto<br>Licensed under the Ruby License.<br>Ruby Standard Library &copy; contributors<br>Licensed under their own licenses.<br>
    
  </p>
</div>
