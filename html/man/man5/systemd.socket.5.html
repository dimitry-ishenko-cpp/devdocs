<h1>systemd.socket(5) — Linux manual page</h1>   <pre>
<span class="headline"><i>SYSTEMD.SOCKET</i>(5)            systemd.socket            <i>SYSTEMD.SOCKET</i>(5)</span>
</pre> <h2>
NAME </h2>
<pre>
       systemd.socket - Socket unit configuration
</pre> <h2>
SYNOPSIS </h2>
<pre>
       <i>socket</i>.socket
</pre> <h2>
DESCRIPTION </h2>
<pre>
       A unit configuration file whose name ends in ".socket" encodes
       information about an IPC or network socket or a file system FIFO
       controlled and supervised by systemd, for socket-based
       activation.

       This man page lists the configuration options specific to this
       unit type. See <a href="systemd.unit.5.html">systemd.unit(5)</a> for the common options of all unit
       configuration files. The common configuration items are
       configured in the generic [Unit] and [Install] sections. The
       socket specific configuration options are configured in the
       [Socket] section.

       Additional options are listed in <a href="systemd.exec.5.html">systemd.exec(5)</a>, which define
       the execution environment the <b>ExecStartPre=</b>, <b>ExecStartPost=</b>,
       <b>ExecStopPre= </b>and <b>ExecStopPost= </b>commands are executed in, and in
       <a href="systemd.kill.5.html">systemd.kill(5)</a>, which define the way the processes are
       terminated, and in <a href="systemd.resource-control.5.html">systemd.resource-control(5)</a>, which configure
       resource control settings for the processes of the socket.

       For each socket unit, a matching service unit must exist,
       describing the service to start on incoming traffic on the socket
       (see <a href="systemd.service.5.html">systemd.service(5)</a> for more information about .service
       units). The name of the .service unit is by default the same as
       the name of the .socket unit, but can be altered with the
       <b>Service= </b>option described below. Depending on the setting of the
       <b>Accept= </b>option described below, this .service unit must either be
       named like the .socket unit, but with the suffix replaced, unless
       overridden with <b>Service=</b>; or it must be a template unit named the
       same way. Example: a socket file foo.socket needs a matching
       service foo.service if <b>Accept=no </b>is set. If <b>Accept=yes </b>is set, a
       service template foo@.service must exist from which services are
       instantiated for each incoming connection.

       No implicit <i>WantedBy=</i> or <i>RequiredBy=</i> dependency from the socket
       to the service is added. This means that the service may be
       started without the socket, in which case it must be able to open
       sockets by itself. To prevent this, an explicit <i>Requires=</i>
       dependency may be added.

       Socket units may be used to implement on-demand starting of
       services, as well as parallelized starting of services. See the
       blog stories linked at the end for an introduction.

       Note that the daemon software configured for socket activation
       with socket units needs to be able to accept sockets from
       systemd, either via systemd's native socket passing interface
       (see <a href="../man3/sd_listen_fds.3.html">sd_listen_fds(3)</a> for details about the precise protocol used
       and the order in which the file descriptors are passed) or via
       traditional <b>inetd</b>(8)-style socket passing (i.e. sockets passed in
       via standard input and output, using <i>StandardInput=socket</i> in the
       service file).

       All network sockets allocated through .socket units are allocated
       in the host's network namespace (see <a href="../man7/network_namespaces.7.html">network_namespaces(7)</a>). This
       does not mean however that the service activated by a configured
       socket unit has to be part of the host's network namespace as
       well. It is supported and even good practice to run services in
       their own network namespace (for example through <i>PrivateNetwork=</i>,
       see <a href="systemd.exec.5.html">systemd.exec(5)</a>), receiving only the sockets configured
       through socket-activation from the host's namespace. In such a
       set-up communication within the host's network namespace is only
       permitted through the activation sockets passed in while all
       sockets allocated from the service code itself will be associated
       with the service's own namespace, and thus possibly subject to a
       restrictive configuration.
</pre> <h2>
AUTOMATIC DEPENDENCIES </h2>
<pre>
   <b>Implicit Dependencies</b>
       The following dependencies are implicitly added:

       •   Socket units automatically gain a <i>Before=</i> dependency on the
           service units they activate.

       •   Socket units referring to file system paths (such as <b>AF_UNIX</b>
           sockets or FIFOs) implicitly gain <i>Requires=</i> and <i>After=</i>
           dependencies on all mount units necessary to access those
           paths.

       •   Socket units using the <i>BindToDevice=</i> setting automatically
           gain a <i>BindsTo=</i> and <i>After=</i> dependency on the device unit
           encapsulating the specified network interface.

       Additional implicit dependencies may be added as result of
       execution and resource control parameters as documented in
       <a href="systemd.exec.5.html">systemd.exec(5)</a> and <a href="systemd.resource-control.5.html">systemd.resource-control(5)</a>.

   <b>Default Dependencies</b>
       The following dependencies are added unless
       <i>DefaultDependencies=no</i> is set:

       •   Socket units automatically gain a <i>Before=</i> dependency on
           sockets.target.

       •   Socket units automatically gain a pair of <i>After=</i> and
           <i>Requires=</i> dependency on sysinit.target, and a pair of <i>Before=</i>
           and <i>Conflicts=</i> dependencies on shutdown.target. These
           dependencies ensure that the socket unit is started before
           normal services at boot, and is stopped on shutdown. Only
           sockets involved with early boot or late system shutdown
           should disable <i>DefaultDependencies=</i> option.
</pre> <h2>
OPTIONS </h2>
<pre>
       Socket unit files may include [Unit] and [Install] sections,
       which are described in <a href="systemd.unit.5.html">systemd.unit(5)</a>.

       Socket unit files must include a [Socket] section, which carries
       information about the socket or FIFO it supervises. A number of
       options that may be used in this section are shared with other
       unit types. These options are documented in <a href="systemd.exec.5.html">systemd.exec(5)</a>,
       <a href="systemd.kill.5.html">systemd.kill(5)</a> and <a href="systemd.resource-control.5.html">systemd.resource-control(5)</a>. The options
       specific to the [Socket] section of socket units are the
       following:

       <i>ListenStream=</i>, <i>ListenDatagram=</i>, <i>ListenSequentialPacket=</i>
           Specifies an address to listen on for a stream (<b>SOCK_STREAM</b>),
           datagram (<b>SOCK_DGRAM</b>), or sequential packet (<b>SOCK_SEQPACKET</b>)
           socket, respectively. The address can be written in various
           formats:

           If the address starts with a slash ("/"), it is read as file
           system socket in the <b>AF_UNIX </b>socket family.

           If the address starts with an at symbol ("@"), it is read as
           abstract namespace socket in the <b>AF_UNIX </b>family. The "@" is
           replaced with a <b>NUL </b>character before binding. For details,
           see <a href="../man7/unix.7.html">unix(7)</a>.

           If the address string is a single number, it is read as port
           number to listen on via IPv6. Depending on the value of
           <i>BindIPv6Only=</i> (see below) this might result in the service
           being available via both IPv6 and IPv4 (default) or just via
           IPv6.

           If the address string is a string in the format "<i>v.w.x.y</i>:<i>z</i>",
           it is interpreted as IPv4 address <i>v.w.x.y</i> and port <i>z</i>.

           If the address string is a string in the format "[<i>x</i>]:<i>y</i>", it
           is interpreted as IPv6 address <i>x</i> and port <i>y</i>. An optional
           interface scope (interface name or number) may be specified
           after a "%" symbol: "[<i>x</i>]:<i>y</i>%<i>dev</i>". Interface scopes are only
           useful with link-local addresses, because the kernel ignores
           them in other cases. Note that if an address is specified as
           IPv6, it might still make the service available via IPv4 too,
           depending on the <i>BindIPv6Only=</i> setting (see below).

           If the address string is a string in the format "vsock:<i>x</i>:<i>y</i>",
           it is read as CID <i>x</i> on a port <i>y</i> address in the <b>AF_VSOCK</b>
           family. The CID is a unique 32-bit integer identifier in
           <b>AF_VSOCK </b>analogous to an IP address. Specifying the CID is
           optional, and may be set to the empty string.  "vsock" may be
           replaced with "vsock-stream", "vsock-dgram" or
           "vsock-seqpacket" to force usage of the corresponding socket
           type.

           Note that <b>SOCK_SEQPACKET </b>(i.e.  <i>ListenSequentialPacket=</i>) is
           only available for <b>AF_UNIX </b>sockets.  <b>SOCK_STREAM </b>(i.e.
           <i>ListenStream=</i>) when used for IP sockets refers to TCP
           sockets, <b>SOCK_DGRAM </b>(i.e.  <i>ListenDatagram=</i>) to UDP.

           These options may be specified more than once, in which case
           incoming traffic on any of the sockets will trigger service
           activation, and all listed sockets will be passed to the
           service, regardless of whether there is incoming traffic on
           them or not. If the empty string is assigned to any of these
           options, the list of addresses to listen on is reset, all
           prior uses of any of these options will have no effect.

           It is also possible to have more than one socket unit for the
           same service when using <i>Service=</i>, and the service will
           receive all the sockets configured in all the socket units.
           Sockets configured in one unit are passed in the order of
           configuration, but no ordering between socket units is
           specified.

           If an IP address is used here, it is often desirable to
           listen on it before the interface it is configured on is up
           and running, and even regardless of whether it will be up and
           running at any point. To deal with this, it is recommended to
           set the <i>FreeBind=</i> option described below.

       <i>ListenFIFO=</i>
           Specifies a file system FIFO (see <a href="../man7/fifo.7.html">fifo(7)</a> for details) to
           listen on. This expects an absolute file system path as
           argument. Behavior otherwise is very similar to the
           <i>ListenDatagram=</i> directive above.

       <i>ListenSpecial=</i>
           Specifies a special file in the file system to listen on.
           This expects an absolute file system path as argument.
           Behavior otherwise is very similar to the <i>ListenFIFO=</i>
           directive above. Use this to open character device nodes as
           well as special files in /proc/ and /sys/.

       <i>ListenNetlink=</i>
           Specifies a Netlink family to create a socket for to listen
           on. This expects a short string referring to the <b>AF_NETLINK</b>
           family name (such as <i>audit</i> or <i>kobject-uevent</i>) as argument,
           optionally suffixed by a whitespace followed by a multicast
           group integer. Behavior otherwise is very similar to the
           <i>ListenDatagram=</i> directive above.

       <i>ListenMessageQueue=</i>
           Specifies a POSIX message queue name to listen on (see
           <a href="../man7/mq_overview.7.html">mq_overview(7)</a> for details). This expects a valid message
           queue name (i.e. beginning with "/"). Behavior otherwise is
           very similar to the <i>ListenFIFO=</i> directive above. On Linux
           message queue descriptors are actually file descriptors and
           can be inherited between processes.

       <i>ListenUSBFunction=</i>
           Specifies a <b>USB FunctionFS</b>[1] endpoints location to listen
           on, for implementation of USB gadget functions. This expects
           an absolute file system path of a FunctionFS mount point as
           the argument. Behavior otherwise is very similar to the
           <i>ListenFIFO=</i> directive above. Use this to open the FunctionFS
           endpoint ep0. When using this option, the activated service
           has to have the <i>USBFunctionDescriptors=</i> and
           <i>USBFunctionStrings=</i> options set.

           Added in version 227.

       <i>SocketProtocol=</i>
           Takes one of <b>udplite</b>, <b>sctp </b>or <b>mptcp</b>. The socket will use the
           UDP-Lite (<b>IPPROTO_UDPLITE</b>), SCTP (<b>IPPROTO_SCTP</b>) or MPTCP
           (<b>IPPROTO_MPTCP</b>) protocol, respectively.

           Added in version 229.

       <i>BindIPv6Only=</i>
           Takes one of <b>default</b>, <b>both </b>or <b>ipv6-only</b>. Controls the
           IPV6_V6ONLY socket option (see <a href="../man7/ipv6.7.html">ipv6(7)</a> for details). If <b>both</b>,
           IPv6 sockets bound will be accessible via both IPv4 and IPv6.
           If <b>ipv6-only</b>, they will be accessible via IPv6 only. If
           <b>default </b>(which is the default, surprise!), the system wide
           default setting is used, as controlled by
           /proc/sys/net/ipv6/bindv6only, which in turn defaults to the
           equivalent of <b>both</b>.

       <i>Backlog=</i>
           Takes an unsigned 32-bit integer argument. Specifies the
           number of connections to queue that have not been accepted
           yet. This setting matters only for stream and sequential
           packet sockets. See <a href="../man2/listen.2.html">listen(2)</a> for details. Defaults to
           4294967295. Note that this value is silently capped by the
           "net.core.somaxconn" sysctl, which typically defaults to
           4096, so typically the sysctl is the setting that actually
           matters.

       <i>BindToDevice=</i>
           Specifies a network interface name to bind this socket to. If
           set, traffic will only be accepted from the specified network
           interfaces. This controls the <b>SO_BINDTODEVICE </b>socket option
           (see <a href="../man7/socket.7.html">socket(7)</a> for details). If this option is used, an
           implicit dependency from this socket unit on the network
           interface device unit is created (see <a href="systemd.device.5.html">systemd.device(5)</a>).
           Note that setting this parameter might result in additional
           dependencies to be added to the unit (see above).

       <i>SocketUser=</i>, <i>SocketGroup=</i>
           Takes a UNIX user/group name. When specified, all <b>AF_UNIX</b>
           sockets and FIFO nodes in the file system are owned by the
           specified user and group. If unset (the default), the nodes
           are owned by the root user/group (if run in system context)
           or the invoking user/group (if run in user context). If only
           a user is specified but no group, then the group is derived
           from the user's default group.

           Added in version 214.

       <i>SocketMode=</i>
           If listening on a file system socket or FIFO, this option
           specifies the file system access mode used when creating the
           file node. Takes an access mode in octal notation. Defaults
           to 0666.

       <i>DirectoryMode=</i>
           If listening on a file system socket or FIFO, the parent
           directories are automatically created if needed. This option
           specifies the file system access mode used when creating
           these directories. Takes an access mode in octal notation.
           Defaults to 0755.

       <i>Accept=</i>
           Takes a boolean argument. If yes, a service instance is
           spawned for each incoming connection and only the connection
           socket is passed to it. If no, all listening sockets
           themselves are passed to the started service unit, and only
           one service unit is spawned for all connections (also see
           above). This value is ignored for datagram sockets and FIFOs
           where a single service unit unconditionally handles all
           incoming traffic. Defaults to <b>no</b>. For performance reasons, it
           is recommended to write new daemons only in a way that is
           suitable for <b>Accept=no</b>. A daemon listening on an <b>AF_UNIX</b>
           socket may, but does not need to, call <a href="../man2/close.2.html">close(2)</a> on the
           received socket before exiting. However, it must not unlink
           the socket from a file system. It should not invoke
           <a href="../man2/shutdown.2.html">shutdown(2)</a> on sockets it got with <i>Accept=no</i>, but it may do
           so for sockets it got with <i>Accept=yes</i> set. Setting <i>Accept=yes</i>
           is mostly useful to allow daemons designed for usage with
           <b>inetd</b>(8) to work unmodified with systemd socket activation.

           Note that depending on this setting the services activated by
           units of this type are either regular services (in case of
           <i>Accept=</i><b>no</b>) or instances of templated services (in case of
           <i>Accept=</i><b>yes</b>). See the Description section above for a more
           detailed discussion of the naming rules of triggered
           services.

           For IPv4 and IPv6 connections, the <i>$REMOTE_ADDR</i> environment
           variable will contain the remote IP address, and <i>$REMOTE_PORT</i>
           will contain the remote port. This is the same as the format
           used by CGI. For <b>SOCK_RAW</b>, the port is the IP protocol.

           For <b>AF_UNIX </b>socket connections, the <i>$REMOTE_ADDR</i> environment
           variable will contain either the remote socket's file system
           path starting with a slash ("/") or its address in the
           abstract namespace starting with an at symbol ("@"). If the
           socket is unnamed, <i>$REMOTE_ADDR</i> won't be set.

           It is recommended to set <i>CollectMode=inactive-or-failed</i> for
           service instances activated via <i>Accept=yes</i>, to ensure that
           failed connection services are cleaned up and released from
           memory, and do not accumulate.

       <i>Writable=</i>
           Takes a boolean argument. May only be used in conjunction
           with <i>ListenSpecial=</i>. If true, the specified special file is
           opened in read-write mode, if false, in read-only mode.
           Defaults to false.

           Added in version 227.

       <i>FlushPending=</i>
           Takes a boolean argument. May only be used when <b>Accept=no</b>. If
           yes, the socket's buffers are cleared after the triggered
           service exited. This causes any pending data to be flushed
           and any pending incoming connections to be rejected. If no,
           the socket's buffers won't be cleared, permitting the service
           to handle any pending connections after restart, which is the
           usually expected behaviour. Defaults to <b>no</b>.

           Added in version 247.

       <i>MaxConnections=</i>
           The maximum number of connections to simultaneously run
           services instances for, when <b>Accept=yes </b>is set. If more
           concurrent connections are coming in, they will be refused
           until at least one existing connection is terminated. This
           setting has no effect on sockets configured with <b>Accept=no </b>or
           datagram sockets. Defaults to 64.

       <i>MaxConnectionsPerSource=</i>
           The maximum number of connections for a service per source IP
           address (in case of IPv4/IPv6), per source CID (in case of
           <b>AF_VSOCK</b>), or source UID (in case of <b>AF_UNIX</b>). This is very
           similar to the <i>MaxConnections=</i> directive above. Defaults to
           0, i.e. disabled.

           Added in version 232.

       <i>KeepAlive=</i>
           Takes a boolean argument. If true, the TCP/IP stack will send
           a keep alive message after 2h (depending on the configuration
           of /proc/sys/net/ipv4/tcp_keepalive_time) for all TCP streams
           accepted on this socket. This controls the <b>SO_KEEPALIVE</b>
           socket option (see <a href="../man7/socket.7.html">socket(7)</a> and the <b>TCP Keepalive HOWTO</b>[2]
           for details.) Defaults to <b>false</b>.

       <i>KeepAliveTimeSec=</i>
           Takes time (in seconds) as argument. The connection needs to
           remain idle before TCP starts sending keepalive probes. This
           controls the TCP_KEEPIDLE socket option (see <a href="../man7/socket.7.html">socket(7)</a> and
           the <b>TCP Keepalive HOWTO</b>[2] for details.) Default value is
           7200 seconds (2 hours).

           Added in version 216.

       <i>KeepAliveIntervalSec=</i>
           Takes time (in seconds) as argument between individual
           keepalive probes, if the socket option <b>SO_KEEPALIVE </b>has been
           set on this socket. This controls the <b>TCP_KEEPINTVL </b>socket
           option (see <a href="../man7/socket.7.html">socket(7)</a> and the <b>TCP Keepalive HOWTO</b>[2] for
           details.) Default value is 75 seconds.

           Added in version 216.

       <i>KeepAliveProbes=</i>
           Takes an integer as argument. It is the number of
           unacknowledged probes to send before considering the
           connection dead and notifying the application layer. This
           controls the TCP_KEEPCNT socket option (see <a href="../man7/socket.7.html">socket(7)</a> and the
           <b>TCP Keepalive HOWTO</b>[2] for details.) Default value is 9.

           Added in version 216.

       <i>NoDelay=</i>
           Takes a boolean argument. TCP Nagle's algorithm works by
           combining a number of small outgoing messages, and sending
           them all at once. This controls the TCP_NODELAY socket option
           (see <a href="../man7/tcp.7.html">tcp(7)</a>). Defaults to <b>false</b>.

           Added in version 216.

       <i>Priority=</i>
           Takes an integer argument controlling the priority for all
           traffic sent from this socket. This controls the <b>SO_PRIORITY</b>
           socket option (see <a href="../man7/socket.7.html">socket(7)</a> for details.).

       <i>DeferAcceptSec=</i>
           Takes time (in seconds) as argument. If set, the listening
           process will be awakened only when data arrives on the
           socket, and not immediately when connection is established.
           When this option is set, the <b>TCP_DEFER_ACCEPT </b>socket option
           will be used (see <a href="../man7/tcp.7.html">tcp(7)</a>), and the kernel will ignore initial
           ACK packets without any data. The argument specifies the
           approximate amount of time the kernel should wait for
           incoming data before falling back to the normal behavior of
           honoring empty ACK packets. This option is beneficial for
           protocols where the client sends the data first (e.g. HTTP,
           in contrast to SMTP), because the server process will not be
           woken up unnecessarily before it can take any action.

           If the client also uses the <b>TCP_DEFER_ACCEPT </b>option, the
           latency of the initial connection may be reduced, because the
           kernel will send data in the final packet establishing the
           connection (the third packet in the "three-way handshake").

           Disabled by default.

           Added in version 216.

       <i>ReceiveBuffer=</i>, <i>SendBuffer=</i>
           Takes an integer argument controlling the receive or send
           buffer sizes of this socket, respectively. This controls the
           <b>SO_RCVBUF </b>and <b>SO_SNDBUF </b>socket options (see <a href="../man7/socket.7.html">socket(7)</a> for
           details.). The usual suffixes K, M, G are supported and are
           understood to the base of 1024.

       <i>IPTOS=</i>
           Takes an integer argument controlling the IP Type-Of-Service
           field for packets generated from this socket. This controls
           the <b>IP_TOS </b>socket option (see <a href="../man7/ip.7.html">ip(7)</a> for details.). Either a
           numeric string or one of <b>low-delay</b>, <b>throughput</b>, <b>reliability</b>
           or <b>low-cost </b>may be specified.

       <i>IPTTL=</i>
           Takes an integer argument controlling the IPv4
           Time-To-Live/IPv6 Hop-Count field for packets generated from
           this socket. This sets the <b>IP_TTL</b>/<b>IPV6_UNICAST_HOPS </b>socket
           options (see <a href="../man7/ip.7.html">ip(7)</a> and <a href="../man7/ipv6.7.html">ipv6(7)</a> for details.)

       <i>Mark=</i>
           Takes an integer value. Controls the firewall mark of packets
           generated by this socket. This can be used in the firewall
           logic to filter packets from this socket. This sets the
           <b>SO_MARK </b>socket option. See <a href="../man8/iptables.8.html">iptables(8)</a> for details.

       <i>ReusePort=</i>
           Takes a boolean value. If true, allows multiple <a href="../man2/bind.2.html">bind(2)</a>s to
           this TCP or UDP port. This controls the <b>SO_REUSEPORT </b>socket
           option. See <a href="../man7/socket.7.html">socket(7)</a> for details.

           Added in version 206.

       <i>SmackLabel=</i>, <i>SmackLabelIPIn=</i>, <i>SmackLabelIPOut=</i>
           Takes a string value. Controls the extended attributes
           "security.SMACK64", "security.SMACK64IPIN" and
           "security.SMACK64IPOUT", respectively, i.e. the security
           label of the FIFO, or the security label for the incoming or
           outgoing connections of the socket, respectively. See
           <b>Smack</b>[3] for details.

           Added in version 196.

       <i>SELinuxContextFromNet=</i>
           Takes a boolean argument. When true, systemd will attempt to
           figure out the SELinux label used for the instantiated
           service from the information handed by the peer over the
           network. Note that only the security level is used from the
           information provided by the peer. Other parts of the
           resulting SELinux context originate from either the target
           binary that is effectively triggered by socket unit or from
           the value of the <i>SELinuxContext=</i> option. This configuration
           option applies only when activated service is passed in
           single socket file descriptor, i.e. service instances that
           have standard input connected to a socket or services
           triggered by exactly one socket unit. Also note that this
           option is useful only when MLS/MCS SELinux policy is
           deployed. Defaults to "false".

           Added in version 217.

       <i>PipeSize=</i>
           Takes a size in bytes. Controls the pipe buffer size of FIFOs
           configured in this socket unit. See <a href="../man2/fcntl.2.html">fcntl(2)</a> for details. The
           usual suffixes K, M, G are supported and are understood to
           the base of 1024.

       <i>MessageQueueMaxMessages=</i>, <i>MessageQueueMessageSize=</i>
           These two settings take integer values and control the
           mq_maxmsg field or the mq_msgsize field, respectively, when
           creating the message queue. Note that either none or both of
           these variables need to be set. See <a href="../man3/mq_setattr.3.html">mq_setattr(3)</a> for
           details.

       <i>FreeBind=</i>
           Takes a boolean value. Controls whether the socket can be
           bound to non-local IP addresses. This is useful to configure
           sockets listening on specific IP addresses before those IP
           addresses are successfully configured on a network interface.
           This sets the <b>IP_FREEBIND</b>/<b>IPV6_FREEBIND </b>socket option. For
           robustness reasons it is recommended to use this option
           whenever you bind a socket to a specific IP address. Defaults
           to <b>false</b>.

       <i>Transparent=</i>
           Takes a boolean value. Controls the
           <b>IP_TRANSPARENT</b>/<b>IPV6_TRANSPARENT </b>socket option. Defaults to
           <b>false</b>.

       <i>Broadcast=</i>
           Takes a boolean value. This controls the <b>SO_BROADCAST </b>socket
           option, which allows broadcast datagrams to be sent from this
           socket. Defaults to <b>false</b>.

       <i>PassCredentials=</i>
           Takes a boolean value. This controls the <b>SO_PASSCRED </b>socket
           option, which allows <b>AF_UNIX </b>sockets to receive the
           credentials of the sending process in an ancillary message.
           Defaults to <b>false</b>.

       <i>PassSecurity=</i>
           Takes a boolean value. This controls the <b>SO_PASSSEC </b>socket
           option, which allows <b>AF_UNIX </b>sockets to receive the security
           context of the sending process in an ancillary message.
           Defaults to <b>false</b>.

       <i>PassPacketInfo=</i>
           Takes a boolean value. This controls the <b>IP_PKTINFO</b>,
           <b>IPV6_RECVPKTINFO</b>, <b>NETLINK_PKTINFO </b>or <b>PACKET_AUXDATA </b>socket
           options, which enable reception of additional per-packet
           metadata as ancillary message, on <b>AF_INET</b>, <b>AF_INET6</b>, <b>AF_UNIX</b>
           and <b>AF_PACKET </b>sockets. Defaults to <b>false</b>.

           Added in version 246.

       <i>Timestamping=</i>
           Takes one of "off", "us" (alias: "usec", "μs") or "ns"
           (alias: "nsec"). This controls the <b>SO_TIMESTAMP </b>or
           <b>SO_TIMESTAMPNS </b>socket options, and enables whether ingress
           network traffic shall carry timestamping metadata. Defaults
           to <b>off</b>.

           Added in version 247.

       <i>TCPCongestion=</i>
           Takes a string value. Controls the TCP congestion algorithm
           used by this socket. Should be one of "westwood", "reno",
           "cubic", "lp" or any other available algorithm supported by
           the IP stack. This setting applies only to stream sockets.

       <i>ExecStartPre=</i>, <i>ExecStartPost=</i>
           Takes one or more command lines, which are executed before or
           after the listening sockets/FIFOs are created and bound,
           respectively. The first token of the command line must be an
           absolute filename, then followed by arguments for the
           process. Multiple command lines may be specified following
           the same scheme as used for <i>ExecStartPre=</i> of service unit
           files.

       <i>ExecStopPre=</i>, <i>ExecStopPost=</i>
           Additional commands that are executed before or after the
           listening sockets/FIFOs are closed and removed, respectively.
           Multiple command lines may be specified following the same
           scheme as used for <i>ExecStartPre=</i> of service unit files.

       <i>TimeoutSec=</i>
           Configures the time to wait for the commands specified in
           <i>ExecStartPre=</i>, <i>ExecStartPost=</i>, <i>ExecStopPre=</i> and <i>ExecStopPost=</i>
           to finish. If a command does not exit within the configured
           time, the socket will be considered failed and be shut down
           again. All commands still running will be terminated forcibly
           via <b>SIGTERM</b>, and after another delay of this time with
           <b>SIGKILL</b>. (See <b>KillMode= </b>in <a href="systemd.kill.5.html">systemd.kill(5)</a>.) Takes a
           unit-less value in seconds, or a time span value such as
           "5min 20s". Pass "0" to disable the timeout logic. Defaults
           to <i>DefaultTimeoutStartSec=</i> from the manager configuration
           file (see <a href="systemd-system.conf.5.html">systemd-system.conf(5)</a>).

       <i>Service=</i>
           Specifies the service unit name to activate on incoming
           traffic. This setting is only allowed for sockets with
           <i>Accept=no</i>. It defaults to the service that bears the same
           name as the socket (with the suffix replaced). In most cases,
           it should not be necessary to use this option. Note that
           setting this parameter might result in additional
           dependencies to be added to the unit (see above).

       <i>RemoveOnStop=</i>
           Takes a boolean argument. If enabled, any file nodes created
           by this socket unit are removed when it is stopped. This
           applies to <b>AF_UNIX </b>sockets in the file system, POSIX message
           queues, FIFOs, as well as any symlinks to them configured
           with <i>Symlinks=</i>. Normally, it should not be necessary to use
           this option, and is not recommended as services might
           continue to run after the socket unit has been terminated and
           it should still be possible to communicate with them via
           their file system node. Defaults to off.

           Added in version 214.

       <i>Symlinks=</i>
           Takes a list of file system paths. The specified paths will
           be created as symlinks to the <b>AF_UNIX </b>socket path or FIFO
           path of this socket unit. If this setting is used, only one
           <b>AF_UNIX </b>socket in the file system or one FIFO may be
           configured for the socket unit. Use this option to manage one
           or more symlinked alias names for a socket, binding their
           lifecycle together. Note that if creation of a symlink fails
           this is not considered fatal for the socket unit, and the
           socket unit may still start. If an empty string is assigned,
           the list of paths is reset. Defaults to an empty list.

           Added in version 214.

       <i>FileDescriptorName=</i>
           Assigns a name to all file descriptors this socket unit
           encapsulates. This is useful to help activated services
           identify specific file descriptors, if multiple fds are
           passed. Services may use the <a href="../man3/sd_listen_fds_with_names.3.html">sd_listen_fds_with_names(3)</a> call
           to acquire the names configured for the received file
           descriptors. Names may contain any ASCII character, but must
           exclude control characters and ":", and must be at most 255
           characters in length. If this setting is not used, the file
           descriptor name defaults to the name of the socket unit,
           including its .socket suffix.

           Added in version 227.

       <i>TriggerLimitIntervalSec=</i>, <i>TriggerLimitBurst=</i>
           Configures a limit on how often this socket unit may be
           activated within a specific time interval. The
           <i>TriggerLimitIntervalSec=</i> setting may be used to configure the
           length of the time interval in the usual time units "us",
           "ms", "s", "min", "h", ... and defaults to 2s (See
           <a href="../man7/systemd.time.7.html">systemd.time(7)</a> for details on the various time units
           understood). The <i>TriggerLimitBurst=</i> setting takes a positive
           integer value and specifies the number of permitted
           activations per time interval, and defaults to 200 for
           <i>Accept=yes</i> sockets (thus by default permitting 200
           activations per 2s), and 20 otherwise (20 activations per
           2s). Set either to 0 to disable any form of trigger rate
           limiting.

           If the limit is hit, the socket unit is placed into a failure
           mode, and will not be connectible anymore until restarted.
           Note that this limit is enforced before the service
           activation is enqueued.

           Compare with <i>PollLimitIntervalSec=</i>/<i>PollLimitBurst=</i> described
           below, which implements a temporary slowdown if a socket unit
           is flooded with incoming traffic, as opposed to the permanent
           failure state <i>TriggerLimitIntervalSec=</i>/<i>TriggerLimitBurst=</i>
           results in.

           Added in version 230.

       <i>PollLimitIntervalSec=</i>, <i>PollLimitBurst=</i>
           Configures a limit on how often polling events on the file
           descriptors backing this socket unit will be considered. This
           pair of settings is similar to
           <i>TriggerLimitIntervalSec=</i>/<i>TriggerLimitBurst=</i> but instead of
           putting a (fatal) limit on the activation frequency puts a
           (transient) limit on the polling frequency. The expected
           parameter syntax and range are identical to that of the
           aforementioned options, and can be disabled the same way.

           If the polling limit is hit polling is temporarily disabled
           on it until the specified time window passes. The polling
           limit hence slows down connection attempts if hit, but unlike
           the trigger limit won't cause permanent failures. It's the
           recommended mechanism to deal with DoS attempts through
           packet flooding.

           The polling limit is enforced per file descriptor to listen
           on, as opposed to the trigger limit which is enforced for the
           entire socket unit. This distinction matters for socket units
           that listen on multiple file descriptors (i.e. have multiple
           <i>ListenXYZ=</i> stanzas).

           These setting defaults to 150 (in case of <i>Accept=yes</i>) and 15
           (otherwise) polling events per 2s. This is considerably lower
           than the default values for the trigger limit (see above) and
           means that the polling limit should typically ensure the
           trigger limit is never hit, unless one of them is
           reconfigured or disabled.

           Added in version 255.

       <i>PassFileDescriptorsToExec=</i>
           Takes a boolean argument. Defaults to off. If enabled, file
           descriptors created by the socket unit are passed to
           <i>ExecStartPost=</i>, <i>ExecStopPre=</i>, and <i>ExecStopPost=</i> commands from
           the socket unit. The passed file descriptors can be accessed
           with <a href="../man3/sd_listen_fds.3.html">sd_listen_fds(3)</a> as if the commands were invoked from
           the associated service units. Note that <i>ExecStartPre=</i> command
           cannot access socket file descriptors.

           Added in version 256.

       Check <a href="systemd.unit.5.html">systemd.unit(5)</a>, <a href="systemd.exec.5.html">systemd.exec(5)</a>, and <a href="systemd.kill.5.html">systemd.kill(5)</a> for
       more settings.
</pre> <h2>
SEE ALSO </h2>
<pre>
       <a href="../man1/systemd.1.html">systemd(1)</a>, <a href="../man1/systemctl.1.html">systemctl(1)</a>, <a href="systemd-system.conf.5.html">systemd-system.conf(5)</a>,
       <a href="systemd.unit.5.html">systemd.unit(5)</a>, <a href="systemd.exec.5.html">systemd.exec(5)</a>, <a href="systemd.kill.5.html">systemd.kill(5)</a>,
       <a href="systemd.resource-control.5.html">systemd.resource-control(5)</a>, <a href="systemd.service.5.html">systemd.service(5)</a>,
       <a href="../man7/systemd.directives.7.html">systemd.directives(7)</a>, <a href="../man3/sd_listen_fds.3.html">sd_listen_fds(3)</a>,
       <a href="../man3/sd_listen_fds_with_names.3.html">sd_listen_fds_with_names(3)</a>

       For more extensive descriptions see the "systemd for Developers"
       series: <b>Socket Activation</b>[4], <b>Socket Activation, part II</b>[5],
       <b>Converting inetd Services</b>[6], <b>Socket Activated Internet Services</b>
       <b>and OS Containers</b>[7].
</pre> <h2>
NOTES </h2>
<pre>
        1. USB FunctionFS
           <a href="https://docs.kernel.org/usb/functionfs.html">https://docs.kernel.org/usb/functionfs.html</a>

        2. TCP Keepalive HOWTO
           <a href="http://www.tldp.org/HOWTO/html_single/TCP-Keepalive-HOWTO/">http://www.tldp.org/HOWTO/html_single/TCP-Keepalive-HOWTO/</a>

        3. Smack
           <a href="https://docs.kernel.org/admin-guide/LSM/Smack.html">https://docs.kernel.org/admin-guide/LSM/Smack.html</a>

        4. Socket Activation
           <a href="https://0pointer.de/blog/projects/socket-activation.html">https://0pointer.de/blog/projects/socket-activation.html</a>

        5. Socket Activation, part II
           <a href="https://0pointer.de/blog/projects/socket-activation2.html">https://0pointer.de/blog/projects/socket-activation2.html</a>

        6. Converting inetd Services
           <a href="https://0pointer.de/blog/projects/inetd.html">https://0pointer.de/blog/projects/inetd.html</a>

        7. Socket Activated Internet Services and OS Containers
           <a href="https://0pointer.de/blog/projects/socket-activated-containers.html">https://0pointer.de/blog/projects/socket-activated-containers.html</a>
</pre> <h2>
COLOPHON </h2>
<pre>
       This page is part of the <i>systemd</i> (systemd system and service
       manager) project.  Information about the project can be found at
       ⟨<a href="http://www.freedesktop.org/wiki/Software/systemd">http://www.freedesktop.org/wiki/Software/systemd</a>⟩.  If you have
       a bug report for this manual page, see
       ⟨<a href="http://www.freedesktop.org/wiki/Software/systemd/#bugreports">http://www.freedesktop.org/wiki/Software/systemd/#bugreports</a>⟩.
       This page was obtained from the project's upstream Git repository
       ⟨<a href="https://github.com/systemd/systemd.git">https://github.com/systemd/systemd.git</a>⟩ on 2024-06-14.  (At that
       time, the date of the most recent commit that was found in the
       repository was 2024-06-13.)  If you discover any rendering
       problems in this HTML version of the page, or you believe there
       is a better or more up-to-date source for the page, or you have
       corrections or improvements to the information in this COLOPHON
       (which is <i>not</i> part of the original manual page), send a mail to
       man-pages@man7.org

<span class="footline">systemd 257~devel                                      <i>SYSTEMD.SOCKET</i>(5)</span>
</pre>  <p>Pages that refer to this page: <a href="../man1/systemctl.1.html">systemctl(1)</a>, <a href="../man1/systemd.1.html">systemd(1)</a>, <a href="../man1/systemd-socket-activate.1.html">systemd-socket-activate(1)</a>, <a href="../man3/sd-daemon.3.html">sd-daemon(3)</a>, <a href="../man3/sd_is_fifo.3.html">sd_is_fifo(3)</a>, <a href="../man3/sd_listen_fds.3.html">sd_listen_fds(3)</a>, <a href="systemd.exec.5.html">systemd.exec(5)</a>, <a href="systemd.kill.5.html">systemd.kill(5)</a>, <a href="systemd.resource-control.5.html">systemd.resource-control(5)</a>, <a href="systemd.service.5.html">systemd.service(5)</a>, <a href="systemd.unit.5.html">systemd.unit(5)</a>, <a href="../man7/daemon.7.html">daemon(7)</a>, <a href="../man7/systemd.directives.7.html">systemd.directives(7)</a>, <a href="../man7/systemd.index.7.html">systemd.index(7)</a>, <a href="../man7/systemd.special.7.html">systemd.special(7)</a>, <a href="../man7/systemd.syntax.7.html">systemd.syntax(7)</a>, <a href="../man8/systemd-journal-remote.service.8.html">systemd-journal-remote.service(8)</a>, <a href="../man8/systemd-socket-proxyd.8.html">systemd-socket-proxyd(8)</a>, <a href="../man8/systemd-ssh-generator.8.html">systemd-ssh-generator(8)</a> </p> <hr>         <div class="_attribution">
  <p class="_attribution-p">
    ...<br>
    <a href="https://man7.org/linux/man-pages/man5/systemd.socket.5.html" class="_attribution-link">https://man7.org/linux/man-pages/man5/systemd.socket.5.html</a>
  </p>
</div>
