<h1>systemd.resource-control(5) — Linux manual page</h1>   <pre>
<span class="headline"><i>SYSTEMD...E-CONTROL</i>(5)  systemd.resource-control  <i>SYSTEMD...E-CONTROL</i>(5)</span>
</pre> <h2>
NAME </h2>
<pre>
       systemd.resource-control - Resource control unit settings
</pre> <h2>
SYNOPSIS </h2>
<pre>
       <i>slice</i>.slice, <i>scope</i>.scope, <i>service</i>.service, <i>socket</i>.socket,
       <i>mount</i>.mount, <i>swap</i>.swap
</pre> <h2>
DESCRIPTION </h2>
<pre>
       Unit configuration files for services, slices, scopes, sockets,
       mount points, and swap devices share a subset of configuration
       options for resource control of spawned processes. Internally,
       this relies on the Linux Control Groups (cgroups) kernel concept
       for organizing processes in a hierarchical tree of named groups
       for the purpose of resource management.

       This man page lists the configuration options shared by those six
       unit types. See <a href="systemd.unit.5.html">systemd.unit(5)</a> for the common options of all
       unit configuration files, and <a href="systemd.slice.5.html">systemd.slice(5)</a>, <a href="systemd.scope.5.html">systemd.scope(5)</a>,
       <a href="systemd.service.5.html">systemd.service(5)</a>, <a href="systemd.socket.5.html">systemd.socket(5)</a>, <a href="systemd.mount.5.html">systemd.mount(5)</a>, and
       <a href="systemd.swap.5.html">systemd.swap(5)</a> for more information on the specific unit
       configuration files. The resource control configuration options
       are configured in the [Slice], [Scope], [Service], [Socket],
       [Mount], or [Swap] sections, depending on the unit type.

       In addition, options which control resources available to
       programs <i>executed</i> by systemd are listed in <a href="systemd.exec.5.html">systemd.exec(5)</a>. Those
       options complement options listed here.

   <b>Enabling and disabling controllers</b>
       Controllers in the cgroup hierarchy are hierarchical, and
       resource control is realized by distributing resource assignments
       between siblings in branches of the cgroup hierarchy. There is no
       need to explicitly <i>enable</i> a cgroup controller for a unit.
       <b>systemd </b>will instruct the kernel to enable a controller for a
       given unit when this unit has configuration for a given
       controller. For example, when <i>CPUWeight=</i> is set, the <b>cpu</b>
       controller will be enabled, and when <i>TasksMax=</i> are set, the <b>pids</b>
       controller will be enabled. In addition, various controllers may
       be also be enabled explicitly via the
       <i>MemoryAccounting=</i>/<i>TasksAccounting=</i>/<i>IOAccounting=</i> settings.
       Because of how the cgroup hierarchy works, controllers will be
       automatically enabled for all parent units and for any sibling
       units starting with the lowest level at which a controller is
       enabled. Units for which a controller is enabled may be subject
       to resource control even if they don't have any explicit
       configuration.

       Setting <i>Delegate=</i> enables any delegated controllers for that unit
       (see below). The delegatee may then enable controllers for its
       children as appropriate. In particular, if the delegatee is
       <b>systemd </b>(in the user@.service unit), it will repeat the same
       logic as the system instance and enable controllers for user
       units which have resource limits configured, and their siblings
       and parents and parents' siblings.

       Controllers may be <i>disabled</i> for parts of the cgroup hierarchy
       with <i>DisableControllers=</i> (see below).

       <b>Example 1. Enabling and disabling controllers</b>

                                 -.slice
                                /       \
                         /-----/         \--------------\
                        /                                \
                 system.slice                       user.slice
                   /       \                          /      \
                  /         \                        /        \
                 /           \              user@42.service  user@1000.service
                /             \             Delegate=        Delegate=yes
           a.service       b.slice                             /        \
           CPUWeight=20   DisableControllers=cpu              /          \
                            /  \                      app.slice      session.slice
                           /    \                     CPUWeight=100  CPUWeight=100
                          /      \
                  b1.service   b2.service
                               CPUWeight=1000

       In this hierarchy, the <b>cpu </b>controller is enabled for all units
       shown except b1.service and b2.service. Because there is no
       explicit configuration for system.slice and user.slice, CPU
       resources will be split equally between them. Similarly,
       resources are allocated equally between children of user.slice
       and between the child slices beneath user@1000.service. Assuming
       that there is no further configuration of resources or delegation
       below slices app.slice or session.slice, the <b>cpu </b>controller would
       not be enabled for units in those slices and CPU resources would
       be further allocated using other mechanisms, e.g. based on nice
       levels. The manager for user 42 has delegation enabled without
       any controllers, i.e. it can manipulate its subtree of the cgroup
       hierarchy, but without resource control.

       In the slice system.slice, CPU resources are split 1:6 for
       service a.service, and 5:6 for slice b.slice, because slice
       b.slice gets the default value of 100 for cpu.weight when
       <i>CPUWeight=</i> is not set.

       <i>CPUWeight=</i> setting in service b2.service is neutralized by
       <i>DisableControllers=</i> in slice b.slice, so the <b>cpu </b>controller would
       not be enabled for services b1.service and b2.service, and CPU
       resources would be further allocated using other mechanisms, e.g.
       based on nice levels.

   <b>Setting resource controls for a group of related units</b>
       As described in <a href="systemd.unit.5.html">systemd.unit(5)</a>, the settings listed here may be
       set through the main file of a unit and drop-in snippets in *.d/
       directories. The list of directories searched for drop-ins
       includes names formed by repeatedly truncating the unit name
       after all dashes. This is particularly convenient to set resource
       limits for a group of units with similar names.

       For example, every user gets their own slice user-<i>nnn</i>.slice.
       Drop-ins with local configuration that affect user 1000 may be
       placed in /etc/systemd/system/user-1000.slice,
       /etc/systemd/system/user-1000.slice.d/*.conf, but also
       /etc/systemd/system/user-.slice.d/*.conf. This last directory
       applies to all user slices.

       See the <b>New Control Group Interfaces</b>[1] for an introduction on
       how to make use of resource control APIs from programs.
</pre> <h2>
IMPLICIT DEPENDENCIES </h2>
<pre>
       The following dependencies are implicitly added:

       •   Units with the <i>Slice=</i> setting set automatically acquire
           <i>Requires=</i> and <i>After=</i> dependencies on the specified slice
           unit.
</pre> <h2>
OPTIONS </h2>
<pre>
       Units of the types listed above can have settings for resource
       control configuration:

   <b>CPU Accounting and Control</b>
       <i>CPUAccounting=</i>
           Turn on CPU usage accounting for this unit. Takes a boolean
           argument. Note that turning on CPU accounting for one unit
           will also implicitly turn it on for all units contained in
           the same slice and for all its parent slices and the units
           contained therein. The system default for this setting may be
           controlled with <i>DefaultCPUAccounting=</i> in
           <a href="systemd-system.conf.5.html">systemd-system.conf(5)</a>.

           Under the unified cgroup hierarchy, CPU accounting is
           available for all units and this setting has no effect.

           Added in version 208.

       <i>CPUWeight=weight</i>, <i>StartupCPUWeight=weight</i>
           These settings control the <b>cpu </b>controller in the unified
           hierarchy.

           These options accept an integer value or a the special string
           "idle":

           •   If set to an integer value, assign the specified CPU time
               weight to the processes executed, if the unified control
               group hierarchy is used on the system. These options
               control the "cpu.weight" control group attribute. The
               allowed range is 1 to 10000. Defaults to unset, but the
               kernel default is 100. For details about this control
               group attribute, see <b>Control Groups v2</b>[2] and <b>CFS</b>
               <b>Scheduler</b>[3]. The available CPU time is split up among
               all units within one slice relative to their CPU time
               weight. A higher weight means more CPU time, a lower
               weight means less.

           •   If set to the special string "idle", mark the cgroup for
               "idle scheduling", which means that it will get CPU
               resources only when there are no processes not marked in
               this way to execute in this cgroup or its siblings. This
               setting corresponds to the "cpu.idle" cgroup attribute.

               Note that this value only has an effect on cgroup-v2, for
               cgroup-v1 it is equivalent to the minimum weight.

           While <i>StartupCPUWeight=</i> applies to the startup and shutdown
           phases of the system, <i>CPUWeight=</i> applies to normal runtime of
           the system, and if the former is not set also to the startup
           and shutdown phases. Using <i>StartupCPUWeight=</i> allows
           prioritizing specific services at boot-up and shutdown
           differently than during normal runtime.

           In addition to the resource allocation performed by the <b>cpu</b>
           controller, the kernel may automatically divide resources
           based on session-id grouping, see "The autogroup feature" in
           <a href="../man7/sched.7.html">sched(7)</a>. The effect of this feature is similar to the <b>cpu</b>
           controller with no explicit configuration, so users should be
           careful to not mistake one for the other.

           Added in version 232.

       <i>CPUQuota=</i>
           This setting controls the <b>cpu </b>controller in the unified
           hierarchy.

           Assign the specified CPU time quota to the processes
           executed. Takes a percentage value, suffixed with "%". The
           percentage specifies how much CPU time the unit shall get at
           maximum, relative to the total CPU time available on one CPU.
           Use values &gt; 100% for allotting CPU time on more than one
           CPU. This controls the "cpu.max" attribute on the unified
           control group hierarchy and "cpu.cfs_quota_us" on legacy. For
           details about these control group attributes, see <b>Control</b>
           <b>Groups v2</b>[2] and <b>CFS Bandwidth Control</b>[4]. Setting <i>CPUQuota=</i>
           to an empty value unsets the quota.

           Example: <i>CPUQuota=20%</i> ensures that the executed processes
           will never get more than 20% CPU time on one CPU.

           Added in version 213.

       <i>CPUQuotaPeriodSec=</i>
           This setting controls the <b>cpu </b>controller in the unified
           hierarchy.

           Assign the duration over which the CPU time quota specified
           by <i>CPUQuota=</i> is measured. Takes a time duration value in
           seconds, with an optional suffix such as "ms" for
           milliseconds (or "s" for seconds.) The default setting is
           100ms. The period is clamped to the range supported by the
           kernel, which is [1ms, 1000ms]. Additionally, the period is
           adjusted up so that the quota interval is also at least 1ms.
           Setting <i>CPUQuotaPeriodSec=</i> to an empty value resets it to the
           default.

           This controls the second field of "cpu.max" attribute on the
           unified control group hierarchy and "cpu.cfs_period_us" on
           legacy. For details about these control group attributes, see
           <b>Control Groups v2</b>[2] and <b>CFS Scheduler</b>[3].

           Example: <i>CPUQuotaPeriodSec=10ms</i> to request that the CPU quota
           is measured in periods of 10ms.

           Added in version 242.

       <i>AllowedCPUs=</i>, <i>StartupAllowedCPUs=</i>
           This setting controls the <b>cpuset </b>controller in the unified
           hierarchy.

           Restrict processes to be executed on specific CPUs. Takes a
           list of CPU indices or ranges separated by either whitespace
           or commas. CPU ranges are specified by the lower and upper
           CPU indices separated by a dash.

           Setting <i>AllowedCPUs=</i> or <i>StartupAllowedCPUs=</i> doesn't guarantee
           that all of the CPUs will be used by the processes as it may
           be limited by parent units. The effective configuration is
           reported as <i>EffectiveCPUs=</i>.

           While <i>StartupAllowedCPUs=</i> applies to the startup and shutdown
           phases of the system, <i>AllowedCPUs=</i> applies to normal runtime
           of the system, and if the former is not set also to the
           startup and shutdown phases. Using <i>StartupAllowedCPUs=</i> allows
           prioritizing specific services at boot-up and shutdown
           differently than during normal runtime.

           This setting is supported only with the unified control group
           hierarchy.

           Added in version 244.

   <b>Memory Accounting and Control</b>
       <i>MemoryAccounting=</i>
           This setting controls the <b>memory </b>controller in the unified
           hierarchy.

           Turn on process and kernel memory accounting for this unit.
           Takes a boolean argument. Note that turning on memory
           accounting for one unit will also implicitly turn it on for
           all units contained in the same slice and for all its parent
           slices and the units contained therein. The system default
           for this setting may be controlled with
           <i>DefaultMemoryAccounting=</i> in <a href="systemd-system.conf.5.html">systemd-system.conf(5)</a>.

           Added in version 208.

       <i>MemoryMin=bytes</i>, <i>MemoryLow=bytes</i>, <i>StartupMemoryLow=bytes</i>,
       <i>DefaultStartupMemoryLow=bytes</i>
           These settings control the <b>memory </b>controller in the unified
           hierarchy.

           Specify the memory usage protection of the executed processes
           in this unit. When reclaiming memory, the unit is treated as
           if it was using less memory resulting in memory to be
           preferentially reclaimed from unprotected units. Using
           <i>MemoryLow=</i> results in a weaker protection where memory may
           still be reclaimed to avoid invoking the OOM killer in case
           there is no other reclaimable memory.

           For a protection to be effective, it is generally required to
           set a corresponding allocation on all ancestors, which is
           then distributed between children (with the exception of the
           root slice). Any <i>MemoryMin=</i> or <i>MemoryLow=</i> allocation that is
           not explicitly distributed to specific children is used to
           create a shared protection for all children. As this is a
           shared protection, the children will freely compete for the
           memory.

           Takes a memory size in bytes. If the value is suffixed with
           K, M, G or T, the specified memory size is parsed as
           Kilobytes, Megabytes, Gigabytes, or Terabytes (with the base
           1024), respectively. Alternatively, a percentage value may be
           specified, which is taken relative to the installed physical
           memory on the system. If assigned the special value
           "infinity", all available memory is protected, which may be
           useful in order to always inherit all of the protection
           afforded by ancestors. This controls the "memory.min" or
           "memory.low" control group attribute. For details about this
           control group attribute, see <b>Memory Interface Files</b>[5].

           Units may have their children use a default "memory.min" or
           "memory.low" value by specifying <i>DefaultMemoryMin=</i> or
           <i>DefaultMemoryLow=</i>, which has the same semantics as <i>MemoryMin=</i>
           and <i>MemoryLow=</i>, or <i>DefaultStartupMemoryLow=</i> which has the
           same semantics as <i>StartupMemoryLow=</i>. This setting does not
           affect "memory.min" or "memory.low" in the unit itself. Using
           it to set a default child allocation is only useful on
           kernels older than 5.7, which do not support the
           "memory_recursiveprot" cgroup2 mount option.

           While <i>StartupMemoryLow=</i> applies to the startup and shutdown
           phases of the system, <i>MemoryMin=</i> applies to normal runtime of
           the system, and if the former is not set also to the startup
           and shutdown phases. Using <i>StartupMemoryLow=</i> allows
           prioritizing specific services at boot-up and shutdown
           differently than during normal runtime.

           Added in version 240.

       <i>MemoryHigh=bytes</i>, <i>StartupMemoryHigh=bytes</i>
           These settings control the <b>memory </b>controller in the unified
           hierarchy.

           Specify the throttling limit on memory usage of the executed
           processes in this unit. Memory usage may go above the limit
           if unavoidable, but the processes are heavily slowed down and
           memory is taken away aggressively in such cases. This is the
           main mechanism to control memory usage of a unit.

           Takes a memory size in bytes. If the value is suffixed with
           K, M, G or T, the specified memory size is parsed as
           Kilobytes, Megabytes, Gigabytes, or Terabytes (with the base
           1024), respectively. Alternatively, a percentage value may be
           specified, which is taken relative to the installed physical
           memory on the system. If assigned the special value
           "infinity", no memory throttling is applied. This controls
           the "memory.high" control group attribute. For details about
           this control group attribute, see <b>Memory Interface Files</b>[5].
           The effective configuration is reported as
           <i>EffectiveMemoryHigh=</i> (see also <i>EffectiveMemoryMax=</i>).

           While <i>StartupMemoryHigh=</i> applies to the startup and shutdown
           phases of the system, <i>MemoryHigh=</i> applies to normal runtime
           of the system, and if the former is not set also to the
           startup and shutdown phases. Using <i>StartupMemoryHigh=</i> allows
           prioritizing specific services at boot-up and shutdown
           differently than during normal runtime.

           Added in version 231.

       <i>MemoryMax=bytes</i>, <i>StartupMemoryMax=bytes</i>
           These settings control the <b>memory </b>controller in the unified
           hierarchy.

           Specify the absolute limit on memory usage of the executed
           processes in this unit. If memory usage cannot be contained
           under the limit, out-of-memory killer is invoked inside the
           unit. It is recommended to use <i>MemoryHigh=</i> as the main
           control mechanism and use <i>MemoryMax=</i> as the last line of
           defense.

           Takes a memory size in bytes. If the value is suffixed with
           K, M, G or T, the specified memory size is parsed as
           Kilobytes, Megabytes, Gigabytes, or Terabytes (with the base
           1024), respectively. Alternatively, a percentage value may be
           specified, which is taken relative to the installed physical
           memory on the system. If assigned the special value
           "infinity", no memory limit is applied. This controls the
           "memory.max" control group attribute. For details about this
           control group attribute, see <b>Memory Interface Files</b>[5]. The
           effective configuration is reported as <i>EffectiveMemoryMax=</i>
           (the value is the most stringent limit of the unit and parent
           slices and it is capped by physical memory).

           While <i>StartupMemoryMax=</i> applies to the startup and shutdown
           phases of the system, <i>MemoryMax=</i> applies to normal runtime of
           the system, and if the former is not set also to the startup
           and shutdown phases. Using <i>StartupMemoryMax=</i> allows
           prioritizing specific services at boot-up and shutdown
           differently than during normal runtime.

           Added in version 231.

       <i>MemorySwapMax=bytes</i>, <i>StartupMemorySwapMax=bytes</i>
           These settings control the <b>memory </b>controller in the unified
           hierarchy.

           Specify the absolute limit on swap usage of the executed
           processes in this unit.

           Takes a swap size in bytes. If the value is suffixed with K,
           M, G or T, the specified swap size is parsed as Kilobytes,
           Megabytes, Gigabytes, or Terabytes (with the base 1024),
           respectively. If assigned the special value "infinity", no
           swap limit is applied. These settings control the
           "memory.swap.max" control group attribute. For details about
           this control group attribute, see <b>Memory Interface Files</b>[5].

           While <i>StartupMemorySwapMax=</i> applies to the startup and
           shutdown phases of the system, <i>MemorySwapMax=</i> applies to
           normal runtime of the system, and if the former is not set
           also to the startup and shutdown phases. Using
           <i>StartupMemorySwapMax=</i> allows prioritizing specific services
           at boot-up and shutdown differently than during normal
           runtime.

           Added in version 232.

       <i>MemoryZSwapMax=bytes</i>, <i>StartupMemoryZSwapMax=bytes</i>
           These settings control the <b>memory </b>controller in the unified
           hierarchy.

           Specify the absolute limit on zswap usage of the processes in
           this unit. Zswap is a lightweight compressed cache for swap
           pages. It takes pages that are in the process of being
           swapped out and attempts to compress them into a dynamically
           allocated RAM-based memory pool. If the limit specified is
           hit, no entries from this unit will be stored in the pool
           until existing entries are faulted back or written out to
           disk. See the kernel's <b>Zswap</b>[6] documentation for more
           details.

           Takes a size in bytes. If the value is suffixed with K, M, G
           or T, the specified size is parsed as Kilobytes, Megabytes,
           Gigabytes, or Terabytes (with the base 1024), respectively.
           If assigned the special value "infinity", no limit is
           applied. These settings control the "memory.zswap.max"
           control group attribute. For details about this control group
           attribute, see <b>Memory Interface Files</b>[5].

           While <i>StartupMemoryZSwapMax=</i> applies to the startup and
           shutdown phases of the system, <i>MemoryZSwapMax=</i> applies to
           normal runtime of the system, and if the former is not set
           also to the startup and shutdown phases. Using
           <i>StartupMemoryZSwapMax=</i> allows prioritizing specific services
           at boot-up and shutdown differently than during normal
           runtime.

           Added in version 253.

       <i>MemoryZSwapWriteback=</i>
           This setting controls the <b>memory </b>controller in the unified
           hierarchy.

           Takes a boolean argument. When true, pages stored in the
           Zswap cache are permitted to be written to the backing
           storage, false otherwise. Defaults to true. This allows
           disabling writeback of swap pages for IO-intensive
           applications, while retaining the ability to store compressed
           pages in Zswap. See the kernel's <b>Zswap</b>[6] documentation for
           more details.

           Added in version 256.

       <i>AllowedMemoryNodes=</i>, <i>StartupAllowedMemoryNodes=</i>
           These settings control the <b>cpuset </b>controller in the unified
           hierarchy.

           Restrict processes to be executed on specific memory NUMA
           nodes. Takes a list of memory NUMA nodes indices or ranges
           separated by either whitespace or commas. Memory NUMA nodes
           ranges are specified by the lower and upper NUMA nodes
           indices separated by a dash.

           Setting <i>AllowedMemoryNodes=</i> or <i>StartupAllowedMemoryNodes=</i>
           doesn't guarantee that all of the memory NUMA nodes will be
           used by the processes as it may be limited by parent units.
           The effective configuration is reported as
           <i>EffectiveMemoryNodes=</i>.

           While <i>StartupAllowedMemoryNodes=</i> applies to the startup and
           shutdown phases of the system, <i>AllowedMemoryNodes=</i> applies to
           normal runtime of the system, and if the former is not set
           also to the startup and shutdown phases. Using
           <i>StartupAllowedMemoryNodes=</i> allows prioritizing specific
           services at boot-up and shutdown differently than during
           normal runtime.

           This setting is supported only with the unified control group
           hierarchy.

           Added in version 244.

   <b>Process Accounting and Control</b>
       <i>TasksAccounting=</i>
           This setting controls the <b>pids </b>controller in the unified
           hierarchy.

           Turn on task accounting for this unit. Takes a boolean
           argument. If enabled, the kernel will keep track of the total
           number of tasks in the unit and its children. This number
           includes both kernel threads and userspace processes, with
           each thread counted individually. Note that turning on tasks
           accounting for one unit will also implicitly turn it on for
           all units contained in the same slice and for all its parent
           slices and the units contained therein. The system default
           for this setting may be controlled with
           <i>DefaultTasksAccounting=</i> in <a href="systemd-system.conf.5.html">systemd-system.conf(5)</a>.

           Added in version 227.

       <i>TasksMax=N</i>
           This setting controls the <b>pids </b>controller in the unified
           hierarchy.

           Specify the maximum number of tasks that may be created in
           the unit. This ensures that the number of tasks accounted for
           the unit (see above) stays below a specific limit. This
           either takes an absolute number of tasks or a percentage
           value that is taken relative to the configured maximum number
           of tasks on the system. If assigned the special value
           "infinity", no tasks limit is applied. This controls the
           "pids.max" control group attribute. For details about this
           control group attribute, the <b>pids controller</b>[7]. The
           effective configuration is reported as <i>EffectiveTasksMax=</i>.

           The system default for this setting may be controlled with
           <i>DefaultTasksMax=</i> in <a href="systemd-system.conf.5.html">systemd-system.conf(5)</a>.

           Added in version 227.

   <b>IO Accounting and Control</b>
       <i>IOAccounting=</i>
           This setting controls the <b>io </b>controller in the unified
           hierarchy.

           Turn on Block I/O accounting for this unit, if the unified
           control group hierarchy is used on the system. Takes a
           boolean argument. Note that turning on block I/O accounting
           for one unit will also implicitly turn it on for all units
           contained in the same slice and all for its parent slices and
           the units contained therein. The system default for this
           setting may be controlled with <i>DefaultIOAccounting=</i> in
           <a href="systemd-system.conf.5.html">systemd-system.conf(5)</a>.

           Added in version 230.

       <i>IOWeight=weight</i>, <i>StartupIOWeight=weight</i>
           These settings control the <b>io </b>controller in the unified
           hierarchy.

           Set the default overall block I/O weight for the executed
           processes, if the unified control group hierarchy is used on
           the system. Takes a single weight value (between 1 and 10000)
           to set the default block I/O weight. This controls the
           "io.weight" control group attribute, which defaults to 100.
           For details about this control group attribute, see <b>IO</b>
           <b>Interface Files</b>[8]. The available I/O bandwidth is split up
           among all units within one slice relative to their block I/O
           weight. A higher weight means more I/O bandwidth, a lower
           weight means less.

           While <i>StartupIOWeight=</i> applies to the startup and shutdown
           phases of the system, <i>IOWeight=</i> applies to the later runtime
           of the system, and if the former is not set also to the
           startup and shutdown phases. This allows prioritizing
           specific services at boot-up and shutdown differently than
           during runtime.

           Added in version 230.

       <i>IODeviceWeight=device weight</i>
           This setting controls the <b>io </b>controller in the unified
           hierarchy.

           Set the per-device overall block I/O weight for the executed
           processes, if the unified control group hierarchy is used on
           the system. Takes a space-separated pair of a file path and a
           weight value to specify the device specific weight value,
           between 1 and 10000. (Example: "/dev/sda 1000"). The file
           path may be specified as path to a block device node or as
           any other file, in which case the backing block device of the
           file system of the file is determined. This controls the
           "io.weight" control group attribute, which defaults to 100.
           Use this option multiple times to set weights for multiple
           devices. For details about this control group attribute, see
           <b>IO Interface Files</b>[8].

           The specified device node should reference a block device
           that has an I/O scheduler associated, i.e. should not refer
           to partition or loopback block devices, but to the
           originating, physical device. When a path to a regular file
           or directory is specified it is attempted to discover the
           correct originating device backing the file system of the
           specified path. This works correctly only for simpler cases,
           where the file system is directly placed on a partition or
           physical block device, or where simple 1:1 encryption using
           dm-crypt/LUKS is used. This discovery does not cover complex
           storage and in particular RAID and volume management storage
           devices.

           Added in version 230.

       <i>IOReadBandwidthMax=device bytes</i>, <i>IOWriteBandwidthMax=device bytes</i>
           These settings control the <b>io </b>controller in the unified
           hierarchy.

           Set the per-device overall block I/O bandwidth maximum limit
           for the executed processes, if the unified control group
           hierarchy is used on the system. This limit is not
           work-conserving and the executed processes are not allowed to
           use more even if the device has idle capacity. Takes a
           space-separated pair of a file path and a bandwidth value (in
           bytes per second) to specify the device specific bandwidth.
           The file path may be a path to a block device node, or as any
           other file in which case the backing block device of the file
           system of the file is used. If the bandwidth is suffixed with
           K, M, G, or T, the specified bandwidth is parsed as
           Kilobytes, Megabytes, Gigabytes, or Terabytes, respectively,
           to the base of 1000. (Example:
           "/dev/disk/by-path/pci-0000:00:1f.2-scsi-0:0:0:0 5M"). This
           controls the "io.max" control group attributes. Use this
           option multiple times to set bandwidth limits for multiple
           devices. For details about this control group attribute, see
           <b>IO Interface Files</b>[8].

           Similar restrictions on block device discovery as for
           <i>IODeviceWeight=</i> apply, see above.

           Added in version 230.

       <i>IOReadIOPSMax=device IOPS</i>, <i>IOWriteIOPSMax=device IOPS</i>
           These settings control the <b>io </b>controller in the unified
           hierarchy.

           Set the per-device overall block I/O IOs-Per-Second maximum
           limit for the executed processes, if the unified control
           group hierarchy is used on the system. This limit is not
           work-conserving and the executed processes are not allowed to
           use more even if the device has idle capacity. Takes a
           space-separated pair of a file path and an IOPS value to
           specify the device specific IOPS. The file path may be a path
           to a block device node, or as any other file in which case
           the backing block device of the file system of the file is
           used. If the IOPS is suffixed with K, M, G, or T, the
           specified IOPS is parsed as KiloIOPS, MegaIOPS, GigaIOPS, or
           TeraIOPS, respectively, to the base of 1000. (Example:
           "/dev/disk/by-path/pci-0000:00:1f.2-scsi-0:0:0:0 1K"). This
           controls the "io.max" control group attributes. Use this
           option multiple times to set IOPS limits for multiple
           devices. For details about this control group attribute, see
           <b>IO Interface Files</b>[8].

           Similar restrictions on block device discovery as for
           <i>IODeviceWeight=</i> apply, see above.

           Added in version 230.

       <i>IODeviceLatencyTargetSec=device target</i>
           This setting controls the <b>io </b>controller in the unified
           hierarchy.

           Set the per-device average target I/O latency for the
           executed processes, if the unified control group hierarchy is
           used on the system. Takes a file path and a timespan
           separated by a space to specify the device specific latency
           target. (Example: "/dev/sda 25ms"). The file path may be
           specified as path to a block device node or as any other
           file, in which case the backing block device of the file
           system of the file is determined. This controls the
           "io.latency" control group attribute. Use this option
           multiple times to set latency target for multiple devices.
           For details about this control group attribute, see <b>IO</b>
           <b>Interface Files</b>[8].

           Implies "IOAccounting=yes".

           These settings are supported only if the unified control
           group hierarchy is used.

           Similar restrictions on block device discovery as for
           <i>IODeviceWeight=</i> apply, see above.

           Added in version 240.

   <b>Network Accounting and Control</b>
       <i>IPAccounting=</i>
           Takes a boolean argument. If true, turns on IPv4 and IPv6
           network traffic accounting for packets sent or received by
           the unit. When this option is turned on, all IPv4 and IPv6
           sockets created by any process of the unit are accounted for.

           When this option is used in socket units, it applies to all
           IPv4 and IPv6 sockets associated with it (including both
           listening and connection sockets where this applies). Note
           that for socket-activated services, this configuration
           setting and the accounting data of the service unit and the
           socket unit are kept separate, and displayed separately. No
           propagation of the setting and the collected statistics is
           done, in either direction. Moreover, any traffic sent or
           received on any of the socket unit's sockets is accounted to
           the socket unit — and never to the service unit it might have
           activated, even if the socket is used by it.

           The system default for this setting may be controlled with
           <i>DefaultIPAccounting=</i> in <a href="systemd-system.conf.5.html">systemd-system.conf(5)</a>.

           Note that this functionality is currently only available for
           system services, not for per-user services.

           Added in version 235.

       <i>IPAddressAllow=ADDRESS[/PREFIXLENGTH]...</i>,
       <i>IPAddressDeny=ADDRESS[/PREFIXLENGTH]...</i>
           Turn on network traffic filtering for IP packets sent and
           received over <b>AF_INET </b>and <b>AF_INET6 </b>sockets. Both directives
           take a space separated list of IPv4 or IPv6 addresses, each
           optionally suffixed with an address prefix length in bits
           after a "/" character. If the suffix is omitted, the address
           is considered a host address, i.e. the filter covers the
           whole address (32 bits for IPv4, 128 bits for IPv6).

           The access lists configured with this option are applied to
           all sockets created by processes of this unit (or in the case
           of socket units, associated with it). The lists are
           implicitly combined with any lists configured for any of the
           parent slice units this unit might be a member of. By default
           both access lists are empty. Both ingress and egress traffic
           is filtered by these settings. In case of ingress traffic the
           source IP address is checked against these access lists, in
           case of egress traffic the destination IP address is checked.
           The following rules are applied in turn:

           •   Access is granted when the checked IP address matches an
               entry in the <i>IPAddressAllow=</i> list.

           •   Otherwise, access is denied when the checked IP address
               matches an entry in the <i>IPAddressDeny=</i> list.

           •   Otherwise, access is granted.

           In order to implement an allow-listing IP firewall, it is
           recommended to use a <i>IPAddressDeny=</i><b>any </b>setting on an
           upper-level slice unit (such as the root slice -.slice or the
           slice containing all system services system.slice – see
           <a href="../man7/systemd.special.7.html">systemd.special(7)</a> for details on these slice units), plus
           individual per-service <i>IPAddressAllow=</i> lines permitting
           network access to relevant services, and only them.

           Note that for socket-activated services, the IP access list
           configured on the socket unit applies to all sockets
           associated with it directly, but not to any sockets created
           by the ultimately activated services for it. Conversely, the
           IP access list configured for the service is not applied to
           any sockets passed into the service via socket activation.
           Thus, it is usually a good idea to replicate the IP access
           lists on both the socket and the service unit. Nevertheless,
           it may make sense to maintain one list more open and the
           other one more restricted, depending on the use case.

           If these settings are used multiple times in the same unit
           the specified lists are combined. If an empty string is
           assigned to these settings the specific access list is reset
           and all previous settings undone.

           In place of explicit IPv4 or IPv6 address and prefix length
           specifications a small set of symbolic names may be used. The
           following names are defined:

           <b>Table 1. Special address/network names</b>
           ┌───────────────┬────────────────┬────────────────────┐
           │ <b>Symbolic Name </b>│ <b>Definition     </b>│ <b>Meaning            </b>│
           ├───────────────┼────────────────┼────────────────────┤
           │ <b>any           </b>│ 0.0.0.0/0 ::/0 │ Any host           │
           ├───────────────┼────────────────┼────────────────────┤
           │ <b>localhost     </b>│ 127.0.0.0/8    │ All addresses on   │
           │               │ ::1/128        │ the local loopback │
           ├───────────────┼────────────────┼────────────────────┤
           │ <b>link-local    </b>│ 169.254.0.0/16 │ All link-local IP  │
           │               │ fe80::/64      │ addresses          │
           ├───────────────┼────────────────┼────────────────────┤
           │ <b>multicast     </b>│ 224.0.0.0/4    │ All IP             │
           │               │ ff00::/8       │ multicasting       │
           │               │                │ addresses          │
           └───────────────┴────────────────┴────────────────────┘

           Note that these settings might not be supported on some
           systems (for example if eBPF control group support is not
           enabled in the underlying kernel or container manager). These
           settings will have no effect in that case. If compatibility
           with such systems is desired it is hence recommended to not
           exclusively rely on them for IP security.

           This option cannot be bypassed by prefixing "+" to the
           executable path in the service unit, as it applies to the
           whole control group.

           Added in version 235.

       <i>SocketBindAllow=bind-rule</i>, <i>SocketBindDeny=bind-rule</i>
           Configures restrictions on the ability of unit processes to
           invoke <a href="../man2/bind.2.html">bind(2)</a> on a socket. Both allow and deny rules may
           defined that restrict which addresses a socket may be bound
           to.

           <i>bind-rule</i> describes socket properties such as <i>address-family</i>,
           <i>transport-protocol</i> and <i>ip-ports</i>.

           <i>bind-rule</i> := {
           [<i>address-family</i><b>:</b>][<i>transport-protocol</i><b>:</b>][<i>ip-ports</i>] | <b>any </b>}

           <i>address-family</i> := { <b>ipv4 </b>| <b>ipv6 </b>}

           <i>transport-protocol</i> := { <b>tcp </b>| <b>udp </b>}

           <i>ip-ports</i> := { <i>ip-port</i> | <i>ip-port-range</i> }

           An optional <i>address-family</i> expects <b>ipv4 </b>or <b>ipv6 </b>values. If
           not specified, a rule will be matched for both IPv4 and IPv6
           addresses and applied depending on other socket fields, e.g.
           <i>transport-protocol</i>, <i>ip-port</i>.

           An optional <i>transport-protocol</i> expects <b>tcp </b>or <b>udp </b>transport
           protocol names. If not specified, a rule will be matched for
           any transport protocol.

           An optional <i>ip-port</i> value must lie within 1...65535 interval
           inclusively, i.e. dynamic port <b>0 </b>is not allowed. A range of
           sequential ports is described by <i>ip-port-range</i> :=
           <i>ip-port-low</i><b>-</b><i>ip-port-high</i>, where <i>ip-port-low</i> is smaller than
           or equal to <i>ip-port-high</i> and both are within 1...65535
           inclusively.

           A special value <b>any </b>can be used to apply a rule to any
           address family, transport protocol and any port with a
           positive value.

           To allow multiple rules assign <i>SocketBindAllow=</i> or
           <i>SocketBindDeny=</i> multiple times. To clear the existing
           assignments pass an empty <i>SocketBindAllow=</i> or <i>SocketBindDeny=</i>
           assignment.

           For each of <i>SocketBindAllow=</i> and <i>SocketBindDeny=</i>, maximum
           allowed number of assignments is <b>128</b>.

           •   Binding to a socket is allowed when a socket address
               matches an entry in the <i>SocketBindAllow=</i> list.

           •   Otherwise, binding is denied when the socket address
               matches an entry in the <i>SocketBindDeny=</i> list.

           •   Otherwise, binding is allowed.

           The feature is implemented with <b>cgroup/bind4 </b>and <b>cgroup/bind6</b>
           cgroup-bpf hooks.

           Note that these settings apply to any <a href="../man2/bind.2.html">bind(2)</a> system call
           invocation by the unit processes, regardless in which network
           namespace they are placed. Or in other words: changing the
           network namespace is not a suitable mechanism for escaping
           these restrictions on <b>bind()</b>.

           Examples:

               ...
               # Allow binding IPv6 socket addresses with a port greater than or equal to 10000.
               [Service]
               SocketBindAllow=ipv6:10000-65535
               SocketBindDeny=any
               ...
               # Allow binding IPv4 and IPv6 socket addresses with 1234 and 4321 ports.
               [Service]
               SocketBindAllow=1234
               SocketBindAllow=4321
               SocketBindDeny=any
               ...
               # Deny binding IPv6 socket addresses.
               [Service]
               SocketBindDeny=ipv6
               ...
               # Deny binding IPv4 and IPv6 socket addresses.
               [Service]
               SocketBindDeny=any
               ...
               # Allow binding only over TCP
               [Service]
               SocketBindAllow=tcp
               SocketBindDeny=any
               ...
               # Allow binding only over IPv6/TCP
               [Service]
               SocketBindAllow=ipv6:tcp
               SocketBindDeny=any
               ...
               # Allow binding ports within 10000-65535 range over IPv4/UDP.
               [Service]
               SocketBindAllow=ipv4:udp:10000-65535
               SocketBindDeny=any
               ...

           This option cannot be bypassed by prefixing "+" to the
           executable path in the service unit, as it applies to the
           whole control group.

           Added in version 249.

       <i>RestrictNetworkInterfaces=</i>
           Takes a list of space-separated network interface names. This
           option restricts the network interfaces that processes of
           this unit can use. By default processes can only use the
           network interfaces listed (allow-list). If the first
           character of the rule is "~", the effect is inverted: the
           processes can only use network interfaces not listed
           (deny-list).

           This option can appear multiple times, in which case the
           network interface names are merged. If the empty string is
           assigned the set is reset, all prior assignments will have
           not effect.

           If you specify both types of this option (i.e. allow-listing
           and deny-listing), the first encountered will take precedence
           and will dictate the default action (allow vs deny). Then the
           next occurrences of this option will add or delete the listed
           network interface names from the set, depending of its type
           and the default action.

           The loopback interface ("lo") is not treated in any special
           way, you have to configure it explicitly in the unit file.

           Example 1: allow-list

               RestrictNetworkInterfaces=eth1
               RestrictNetworkInterfaces=eth2

           Programs in the unit will be only able to use the eth1 and
           eth2 network interfaces.

           Example 2: deny-list

               RestrictNetworkInterfaces=~eth1 eth2

           Programs in the unit will be able to use any network
           interface but eth1 and eth2.

           Example 3: mixed

               RestrictNetworkInterfaces=eth1 eth2
               RestrictNetworkInterfaces=~eth1

           Programs in the unit will be only able to use the eth2
           network interface.

           This option cannot be bypassed by prefixing "+" to the
           executable path in the service unit, as it applies to the
           whole control group.

           Added in version 250.

       <i>NFTSet=family</i>:<i>table</i>:<i>set</i>
           This setting provides a method for integrating dynamic
           cgroup, user and group IDs into firewall rules with <b>NFT</b>[9]
           sets. The benefit of using this setting is to be able to use
           the IDs as selectors in firewall rules easily and this in
           turn allows more fine grained filtering. NFT rules for cgroup
           matching use numeric cgroup IDs, which change every time a
           service is restarted, making them hard to use in systemd
           environment otherwise. Dynamic and random IDs used by
           <i>DynamicUser=</i> can be also integrated with this setting.

           This option expects a whitespace separated list of NFT set
           definitions. Each definition consists of a colon-separated
           tuple of source type (one of "cgroup", "user" or "group"),
           NFT address family (one of "arp", "bridge", "inet", "ip",
           "ip6", or "netdev"), table name and set name. The names of
           tables and sets must conform to lexical restrictions of NFT
           table names. The type of the element used in the NFT filter
           must match the type implied by the directive ("cgroup",
           "user" or "group") as shown in the table below. When a
           control group or a unit is realized, the corresponding ID
           will be appended to the NFT sets and it will be be removed
           when the control group or unit is removed.  <b>systemd </b>only
           inserts elements to (or removes from) the sets, so the
           related NFT rules, tables and sets must be prepared elsewhere
           in advance. Failures to manage the sets will be ignored.

           <b>Table 2. Defined </b><i>source type</i> values
           ┌─────────────┬──────────────────┬───────────────────┐
           │ <b>Source type </b>│ <b>Description      </b>│ <b>Corresponding NFT </b>│
           │             │                  │ <b>type name         </b>│
           ├─────────────┼──────────────────┼───────────────────┤
           │ "cgroup"    │ control group ID │ "cgroupsv2"       │
           ├─────────────┼──────────────────┼───────────────────┤
           │ "user"      │ user ID          │ "meta skuid"      │
           ├─────────────┼──────────────────┼───────────────────┤
           │ "group"     │ group ID         │ "meta skgid"      │
           └─────────────┴──────────────────┴───────────────────┘

           If the firewall rules are reinstalled so that the contents of
           NFT sets are destroyed, command <b>systemctl daemon-reload </b>can
           be used to refill the sets.

           Example:

               [Unit]
               NFTSet=cgroup:inet:filter:my_service user:inet:filter:serviceuser

           Corresponding NFT rules:

               table inet filter {
                       set my_service {
                               type cgroupsv2
                       }
                       set serviceuser {
                               typeof meta skuid
                       }
                       chain x {
                               socket cgroupv2 level 2 @my_service accept
                               drop
                       }
                       chain y {
                               meta skuid @serviceuser accept
                               drop
                       }
               }

           This option is only available for system services and is not
           supported for services running in per-user instances of the
           service manager.

           Added in version 255.

   <b>BPF Programs</b>
       <i>IPIngressFilterPath=BPF_FS_PROGRAM_PATH</i>,
       <i>IPEgressFilterPath=BPF_FS_PROGRAM_PATH</i>
           Add custom network traffic filters implemented as BPF
           programs, applying to all IP packets sent and received over
           <b>AF_INET </b>and <b>AF_INET6 </b>sockets. Takes an absolute path to a
           pinned BPF program in the BPF virtual filesystem
           (/sys/fs/bpf/).

           The filters configured with this option are applied to all
           sockets created by processes of this unit (or in the case of
           socket units, associated with it). The filters are loaded in
           addition to filters any of the parent slice units this unit
           might be a member of as well as any <i>IPAddressAllow=</i> and
           <i>IPAddressDeny=</i> filters in any of these units. By default
           there are no filters specified.

           If these settings are used multiple times in the same unit
           all the specified programs are attached. If an empty string
           is assigned to these settings the program list is reset and
           all previous specified programs ignored.

           If the path <i>BPF_FS_PROGRAM_PATH</i> in <i>IPIngressFilterPath=</i>
           assignment is already being handled by <i>BPFProgram=</i> ingress
           hook, e.g.  <i>BPFProgram=</i><b>ingress</b>:<i>BPF_FS_PROGRAM_PATH</i>, the
           assignment will be still considered valid and the program
           will be attached to a cgroup. Same for <i>IPEgressFilterPath=</i>
           path and <b>egress </b>hook.

           Note that for socket-activated services, the IP filter
           programs configured on the socket unit apply to all sockets
           associated with it directly, but not to any sockets created
           by the ultimately activated services for it. Conversely, the
           IP filter programs configured for the service are not applied
           to any sockets passed into the service via socket activation.
           Thus, it is usually a good idea, to replicate the IP filter
           programs on both the socket and the service unit, however it
           often makes sense to maintain one configuration more open and
           the other one more restricted, depending on the use case.

           Note that these settings might not be supported on some
           systems (for example if eBPF control group support is not
           enabled in the underlying kernel or container manager). These
           settings will fail the service in that case. If compatibility
           with such systems is desired it is hence recommended to
           attach your filter manually (requires <i>Delegate=</i><b>yes</b>) instead
           of using this setting.

           Added in version 243.

       <i>BPFProgram=type:program-path</i>
           <i>BPFProgram=</i> allows attaching custom BPF programs to the
           cgroup of a unit. (This generalizes the functionality exposed
           via <i>IPEgressFilterPath=</i> and <i>IPIngressFilterPath=</i> for other
           hooks.) Cgroup-bpf hooks in the form of BPF programs loaded
           to the BPF filesystem are attached with cgroup-bpf attach
           flags determined by the unit. For details about attachment
           types and flags see <b>bpf.h</b>[10]. Also refer to the general <b>BPF</b>
           <b>documentation</b>[11].

           The specification of BPF program consists of a pair of BPF
           program type and program path in the file system, with ":" as
           the separator: <i>type</i>:<i>program-path</i>.

           The BPF program type is equivalent to the BPF attach type
           used in <b>bpftool</b>(8) It may be one of <b>egress</b>, <b>ingress</b>,
           <b>sock_create</b>, <b>sock_ops</b>, <b>device</b>, <b>bind4</b>, <b>bind6</b>, <b>connect4</b>,
           <b>connect6</b>, <b>post_bind4</b>, <b>post_bind6</b>, <b>sendmsg4</b>, <b>sendmsg6</b>, <b>sysctl</b>,
           <b>recvmsg4</b>, <b>recvmsg6</b>, <b>getsockopt</b>, or <b>setsockopt</b>.

           The specified program path must be an absolute path
           referencing a BPF program inode in the bpffs file system
           (which generally means it must begin with /sys/fs/bpf/). If a
           specified program does not exist (i.e. has not been uploaded
           to the BPF subsystem of the kernel yet), it will not be
           installed but unit activation will continue (a warning will
           be printed to the logs).

           Setting <i>BPFProgram=</i> to an empty value makes previous
           assignments ineffective.

           Multiple assignments of the same program type/path pair have
           the same effect as a single assignment: the program will be
           attached just once.

           If BPF <b>egress </b>pinned to <i>program-path</i> path is already being
           handled by <i>IPEgressFilterPath=</i>, <i>BPFProgram=</i> assignment will
           be considered valid and <i>BPFProgram=</i> will be attached to a
           cgroup. Similarly for <b>ingress </b>hook and <i>IPIngressFilterPath=</i>
           assignment.

           BPF programs passed with <i>BPFProgram=</i> are attached to the
           cgroup of a unit with BPF attach flag <b>multi</b>, that allows
           further attachments of the same <i>type</i> within cgroup hierarchy
           topped by the unit cgroup.

           Examples:

               BPFProgram=egress:/sys/fs/bpf/egress-hook
               BPFProgram=bind6:/sys/fs/bpf/sock-addr-hook

           Added in version 249.

   <b>Device Access</b>
       <i>DeviceAllow=</i>
           Control access to specific device nodes by the executed
           processes. Takes two space-separated strings: a device node
           specifier followed by a combination of <b>r</b>, <b>w</b>, <b>m </b>to control
           <i>r</i>eading, <i>w</i>riting, or creation of the specific device nodes by
           the unit (<i>m</i>knod), respectively. This functionality is
           implemented using eBPF filtering.

           When access to <i>all</i> physical devices should be disallowed,
           <i>PrivateDevices=</i> may be used instead. See <a href="systemd.exec.5.html">systemd.exec(5)</a>.

           The device node specifier is either a path to a device node
           in the file system, starting with /dev/, or a string starting
           with either "char-" or "block-" followed by a device group
           name, as listed in /proc/devices. The latter is useful to
           allow-list all current and future devices belonging to a
           specific device group at once. The device group is matched
           according to filename globbing rules, you may hence use the
           "*" and "?"  wildcards. (Note that such globbing wildcards
           are not available for device node path specifications!) In
           order to match device nodes by numeric major/minor, use
           device node paths in the /dev/char/ and /dev/block/
           directories. However, matching devices by major/minor is
           generally not recommended as assignments are neither stable
           nor portable between systems or different kernel versions.

           Examples: /dev/sda5 is a path to a device node, referring to
           an ATA or SCSI block device.  "char-pts" and "char-alsa" are
           specifiers for all pseudo TTYs and all ALSA sound devices,
           respectively.  "char-cpu/*" is a specifier matching all CPU
           related device groups.

           Note that allow lists defined this way should only reference
           device groups which are resolvable at the time the unit is
           started. Any device groups not resolvable then are not added
           to the device allow list. In order to work around this
           limitation, consider extending service units with a pair of
           <b>After=modprobe@xyz.service </b>and <b>Wants=modprobe@xyz.service</b>
           lines that load the necessary kernel module implementing the
           device group if missing. Example:

               ...
               [Unit]
               Wants=modprobe@loop.service
               After=modprobe@loop.service

               [Service]
               DeviceAllow=block-loop
               DeviceAllow=/dev/loop-control
               ...

           This option cannot be bypassed by prefixing "+" to the
           executable path in the service unit, as it applies to the
           whole control group.

           Added in version 208.

       <i>DevicePolicy=auto|closed|strict</i>
           Control the policy for allowing device access:

           <b>strict</b>
               means to only allow types of access that are explicitly
               specified.

               Added in version 208.

           <b>closed</b>
               in addition, allows access to standard pseudo devices
               including /dev/null, /dev/zero, /dev/full, /dev/random,
               and /dev/urandom.

               Added in version 208.

           <b>auto</b>
               in addition, allows access to all devices if no explicit
               <i>DeviceAllow=</i> is present. This is the default.

               Added in version 208.

           This option cannot be bypassed by prefixing "+" to the
           executable path in the service unit, as it applies to the
           whole control group.

           Added in version 208.

   <b>Control Group Management</b>
       <i>Slice=</i>
           The name of the slice unit to place the unit in. Defaults to
           system.slice for all non-instantiated units of all unit types
           (except for slice units themselves see below). Instance units
           are by default placed in a subslice of system.slice that is
           named after the template name.

           This option may be used to arrange systemd units in a
           hierarchy of slices each of which might have resource
           settings applied.

           For units of type slice, the only accepted value for this
           setting is the parent slice. Since the name of a slice unit
           implies the parent slice, it is hence redundant to ever set
           this parameter directly for slice units.

           Special care should be taken when relying on the default
           slice assignment in templated service units that have
           <i>DefaultDependencies=no</i> set, see <a href="systemd.service.5.html">systemd.service(5)</a>, section
           "Default Dependencies" for details.

           Added in version 208.

       <i>Delegate=</i>
           Turns on delegation of further resource control partitioning
           to processes of the unit. Units where this is enabled may
           create and manage their own private subhierarchy of control
           groups below the control group of the unit itself. For
           unprivileged services (i.e. those using the <i>User=</i> setting)
           the unit's control group will be made accessible to the
           relevant user.

           When enabled the service manager will refrain from
           manipulating control groups or moving processes below the
           unit's control group, so that a clear concept of ownership is
           established: the control group tree at the level of the
           unit's control group and above (i.e. towards the root control
           group) is owned and managed by the service manager of the
           host, while the control group tree below the unit's control
           group is owned and managed by the unit itself.

           Takes either a boolean argument or a (possibly empty) list of
           control group controller names. If true, delegation is turned
           on, and all supported controllers are enabled for the unit,
           making them available to the unit's processes for management.
           If false, delegation is turned off entirely (and no
           additional controllers are enabled). If set to a list of
           controllers, delegation is turned on, and the specified
           controllers are enabled for the unit. Assigning the empty
           string will enable delegation, but reset the list of
           controllers, and all assignments prior to this will have no
           effect. Note that additional controllers other than the ones
           specified might be made available as well, depending on
           configuration of the containing slice unit or other units
           contained in it. Defaults to false.

           Note that controller delegation to less privileged code is
           only safe on the unified control group hierarchy.
           Accordingly, access to the specified controllers will not be
           granted to unprivileged services on the legacy hierarchy,
           even when requested.

           The following controller names may be specified: <b>cpu</b>,
           <b>cpuacct</b>, <b>cpuset</b>, <b>io</b>, <b>blkio</b>, <b>memory</b>, <b>devices</b>, <b>pids</b>,
           <b>bpf-firewall</b>, and <b>bpf-devices</b>.

           Not all of these controllers are available on all kernels
           however, and some are specific to the unified hierarchy while
           others are specific to the legacy hierarchy. Also note that
           the kernel might support further controllers, which aren't
           covered here yet as delegation is either not supported at all
           for them or not defined cleanly.

           Note that because of the hierarchical nature of cgroup
           hierarchy, any controllers that are delegated will be enabled
           for the parent and sibling units of the unit with delegation.

           For further details on the delegation model consult <b>Control</b>
           <b>Group APIs and Delegation</b>[12].

           Added in version 218.

       <i>DelegateSubgroup=</i>
           Place unit processes in the specified subgroup of the unit's
           control group. Takes a valid control group name (not a path!)
           as parameter, or an empty string to turn this feature off.
           Defaults to off. The control group name must be usable as
           filename and avoid conflicts with the kernel's control group
           attribute files (i.e.  cgroup.procs is not an acceptable
           name, since the kernel exposes a native control group
           attribute file by that name). This option has no effect
           unless control group delegation is turned on via <i>Delegate=</i>,
           see above. Note that this setting only applies to "main"
           processes of a unit, i.e. for services to <i>ExecStart=</i>, but not
           for <i>ExecReload=</i> and similar. If delegation is enabled, the
           latter are always placed inside a subgroup named .control.
           The specified subgroup is automatically created (and
           potentially ownership is passed to the unit's configured
           user/group) when a process is started in it.

           This option is useful to avoid manually moving the invoked
           process into a subgroup after it has been started. Since no
           processes should live in inner nodes of the control group
           tree it's almost always necessary to run the main
           ("supervising") process of a unit that has delegation turned
           on in a subgroup.

           Added in version 254.

       <i>DisableControllers=</i>
           Disables controllers from being enabled for a unit's
           children. If a controller listed is already in use in its
           subtree, the controller will be removed from the subtree.
           This can be used to avoid configuration in child units from
           being able to implicitly or explicitly enable a controller.
           Defaults to empty.

           Multiple controllers may be specified, separated by spaces.
           You may also pass <i>DisableControllers=</i> multiple times, in
           which case each new instance adds another controller to
           disable. Passing <i>DisableControllers=</i> by itself with no
           controller name present resets the disabled controller list.

           It may not be possible to disable a controller after units
           have been started, if the unit or any child of the unit in
           question delegates controllers to its children, as any
           delegated subtree of the cgroup hierarchy is unmanaged by
           systemd.

           The following controller names may be specified: <b>cpu</b>,
           <b>cpuacct</b>, <b>cpuset</b>, <b>io</b>, <b>blkio</b>, <b>memory</b>, <b>devices</b>, <b>pids</b>,
           <b>bpf-firewall</b>, and <b>bpf-devices</b>.

           Added in version 240.

   <b>Memory Pressure Control</b>
       <i>ManagedOOMSwap=auto|kill</i>, <i>ManagedOOMMemoryPressure=auto|kill</i>
           Specifies how <a href="../man8/systemd-oomd.service.8.html">systemd-oomd.service(8)</a> will act on this unit's
           cgroups. Defaults to <b>auto</b>.

           When set to <b>kill</b>, the unit becomes a candidate for monitoring
           by <b>systemd-oomd</b>. If the cgroup passes the limits set by
           <a href="oomd.conf.5.html">oomd.conf(5)</a> or the unit configuration, <b>systemd-oomd </b>will
           select a descendant cgroup and send <b>SIGKILL </b>to all of the
           processes under it. You can find more details on candidates
           and kill behavior at <a href="../man8/systemd-oomd.service.8.html">systemd-oomd.service(8)</a> and
           <a href="oomd.conf.5.html">oomd.conf(5)</a>.

           Setting either of these properties to <b>kill </b>will also result
           in <i>After=</i> and <i>Wants=</i> dependencies on systemd-oomd.service
           unless <i>DefaultDependencies=no</i>.

           When set to <b>auto</b>, <b>systemd-oomd </b>will not actively use this
           cgroup's data for monitoring and detection. However, if an
           ancestor cgroup has one of these properties set to <b>kill</b>, a
           unit with <b>auto </b>can still be a candidate for <b>systemd-oomd </b>to
           terminate.

           Added in version 247.

       <i>ManagedOOMMemoryPressureLimit=</i>
           Overrides the default memory pressure limit set by
           <a href="oomd.conf.5.html">oomd.conf(5)</a> for this unit (cgroup). Takes a percentage value
           between 0% and 100%, inclusive. This property is ignored
           unless <i>ManagedOOMMemoryPressure=</i><b>kill</b>. Defaults to 0%, which
           means to use the default set by <a href="oomd.conf.5.html">oomd.conf(5)</a>.

           Added in version 247.

       <i>ManagedOOMPreference=none|avoid|omit</i>
           Allows deprioritizing or omitting this unit's cgroup as a
           candidate when <b>systemd-oomd </b>needs to act. Requires support
           for extended attributes (see <a href="../man7/xattr.7.html">xattr(7)</a>) in order to use <b>avoid</b>
           or <b>omit</b>.

           When calculating candidates to relieve swap usage,
           <b>systemd-oomd </b>will only respect these extended attributes if
           the unit's cgroup is owned by root.

           When calculating candidates to relieve memory pressure,
           <b>systemd-oomd </b>will only respect these extended attributes if
           the unit's cgroup is owned by root, or if the unit's cgroup
           owner, and the owner of the monitored ancestor cgroup are the
           same. For example, if <b>systemd-oomd </b>is calculating candidates
           for -.slice, then extended attributes set on descendants of
           /user.slice/user-1000.slice/user@1000.service/ will be
           ignored because the descendants are owned by UID 1000, and
           -.slice is owned by UID 0. But, if calculating candidates for
           /user.slice/user-1000.slice/user@1000.service/, then extended
           attributes set on the descendants would be respected.

           If this property is set to <b>avoid</b>, the service manager will
           convey this to <b>systemd-oomd</b>, which will only select this
           cgroup if there are no other viable candidates.

           If this property is set to <b>omit</b>, the service manager will
           convey this to <b>systemd-oomd</b>, which will ignore this cgroup as
           a candidate and will not perform any actions on it.

           It is recommended to use <b>avoid </b>and <b>omit </b>sparingly, as it can
           adversely affect <b>systemd-oomd</b>'s kill behavior. Also note that
           these extended attributes are not applied recursively to
           cgroups under this unit's cgroup.

           Defaults to <b>none </b>which means <b>systemd-oomd </b>will rank this
           unit's cgroup as defined in <a href="../man8/systemd-oomd.service.8.html">systemd-oomd.service(8)</a> and
           <a href="oomd.conf.5.html">oomd.conf(5)</a>.

           Added in version 248.

       <i>MemoryPressureWatch=</i>
           Controls memory pressure monitoring for invoked processes.
           Takes one of "off", "on", "auto" or "skip". If "off" tells
           the service not to watch for memory pressure events, by
           setting the <i>$MEMORY_PRESSURE_WATCH</i> environment variable to
           the literal string /dev/null. If "on" tells the service to
           watch for memory pressure events. This enables memory
           accounting for the service, and ensures the memory.pressure
           cgroup attribute file is accessible for reading and writing
           by the service's user. It then sets the
           <i>$MEMORY_PRESSURE_WATCH</i> environment variable for processes
           invoked by the unit to the file system path to this file. The
           threshold information configured with
           <i>MemoryPressureThresholdSec=</i> is encoded in the
           <i>$MEMORY_PRESSURE_WRITE</i> environment variable. If the "auto"
           value is set the protocol is enabled if memory accounting is
           anyway enabled for the unit, and disabled otherwise. If set
           to "skip" the logic is neither enabled, nor disabled and the
           two environment variables are not set.

           Note that services are free to use the two environment
           variables, but it's unproblematic if they ignore them. Memory
           pressure handling must be implemented individually in each
           service, and usually means different things for different
           software. For further details on memory pressure handling see
           <b>Memory Pressure Handling in systemd</b>[13].

           Services implemented using <a href="../man3/sd-event.3.html">sd-event(3)</a> may use
           <a href="../man3/sd_event_add_memory_pressure.3.html">sd_event_add_memory_pressure(3)</a> to watch for and handle
           memory pressure events.

           If not explicit set, defaults to the
           <i>DefaultMemoryPressureWatch=</i> setting in
           <a href="systemd-system.conf.5.html">systemd-system.conf(5)</a>.

           Added in version 254.

       <i>MemoryPressureThresholdSec=</i>
           Sets the memory pressure threshold time for memory pressure
           monitor as configured via <i>MemoryPressureWatch=</i>. Specifies the
           maximum allocation latency before a memory pressure event is
           signalled to the service, per 2s window. If not specified
           defaults to the <i>DefaultMemoryPressureThresholdSec=</i> setting in
           <a href="systemd-system.conf.5.html">systemd-system.conf(5)</a> (which in turn defaults to 200ms). The
           specified value expects a time unit such as "ms" or "μs", see
           <a href="../man7/systemd.time.7.html">systemd.time(7)</a> for details on the permitted syntax.

           Added in version 254.

   <b>Coredump Control</b>
       <i>CoredumpReceive=</i>
           Takes a boolean argument. This setting is used to enable
           coredump forwarding for containers that belong to this unit's
           cgroup. Units with <i>CoredumpReceive=yes</i> must also be
           configured with <i>Delegate=yes</i>. Defaults to false.

           When <b>systemd-coredump </b>is handling a coredump for a process
           from a container, if the container's leader process is a
           descendant of a cgroup with <i>CoredumpReceive=yes</i> and
           <i>Delegate=yes</i>, then <b>systemd-coredump </b>will attempt to forward
           the coredump to <b>systemd-coredump </b>within the container.

           Added in version 255.
</pre> <h2>
HISTORY </h2>
<pre>
       systemd 252
           Options for controlling the Legacy Control Group Hierarchy
           (<b>Control Groups version 1</b>[14]) are now fully deprecated:
           <i>CPUShares=weight</i>, <i>StartupCPUShares=weight</i>, <i>MemoryLimit=bytes</i>,
           <i>BlockIOAccounting=</i>, <i>BlockIOWeight=weight</i>,
           <i>StartupBlockIOWeight=weight</i>, <i>BlockIODeviceWeight=device</i>
           <i>weight</i>, <i>BlockIOReadBandwidth=device bytes</i>,
           <i>BlockIOWriteBandwidth=device bytes</i>. Please switch to the
           unified cgroup hierarchy.

           Added in version 252.
</pre> <h2>
SEE ALSO </h2>
<pre>
       <a href="../man1/systemd.1.html">systemd(1)</a>, <a href="systemd-system.conf.5.html">systemd-system.conf(5)</a>, <a href="systemd.unit.5.html">systemd.unit(5)</a>,
       <a href="systemd.service.5.html">systemd.service(5)</a>, <a href="systemd.slice.5.html">systemd.slice(5)</a>, <a href="systemd.scope.5.html">systemd.scope(5)</a>,
       <a href="systemd.socket.5.html">systemd.socket(5)</a>, <a href="systemd.mount.5.html">systemd.mount(5)</a>, <a href="systemd.swap.5.html">systemd.swap(5)</a>,
       <a href="systemd.exec.5.html">systemd.exec(5)</a>, <a href="../man7/systemd.directives.7.html">systemd.directives(7)</a>, <a href="../man7/systemd.special.7.html">systemd.special(7)</a>,
       <a href="../man8/systemd-oomd.service.8.html">systemd-oomd.service(8)</a>, The documentation for control groups and
       specific controllers in the Linux kernel: <b>Control Groups v2</b>[2]
</pre> <h2>
NOTES </h2>
<pre>
        1. New Control Group Interfaces
           <a href="https://systemd.io/CONTROL_GROUP_INTERFACE">https://systemd.io/CONTROL_GROUP_INTERFACE</a>

        2. Control Groups v2
           <a href="https://docs.kernel.org/admin-guide/cgroup-v2.html">https://docs.kernel.org/admin-guide/cgroup-v2.html</a>

        3. CFS Scheduler
           <a href="https://docs.kernel.org/scheduler/sched-design-CFS.html">https://docs.kernel.org/scheduler/sched-design-CFS.html</a>

        4. CFS Bandwidth Control
           <a href="https://docs.kernel.org/scheduler/sched-bwc.html">https://docs.kernel.org/scheduler/sched-bwc.html</a>

        5. Memory Interface Files
           <a href="https://docs.kernel.org/admin-guide/cgroup-v2.html#memory-interface-files">https://docs.kernel.org/admin-guide/cgroup-v2.html#memory-interface-files</a>

        6. Zswap
           <a href="https://docs.kernel.org/admin-guide/mm/zswap.html">https://docs.kernel.org/admin-guide/mm/zswap.html</a>

        7. pids controller
           <a href="https://docs.kernel.org/admin-guide/cgroup-v2.html#pid">https://docs.kernel.org/admin-guide/cgroup-v2.html#pid</a>

        8. IO Interface Files
           <a href="https://docs.kernel.org/admin-guide/cgroup-v2.html#io-interface-files">https://docs.kernel.org/admin-guide/cgroup-v2.html#io-interface-files</a>

        9. NFT
           <a href="https://netfilter.org/projects/nftables/index.html">https://netfilter.org/projects/nftables/index.html</a>

       10. bpf.h
           <a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/plain/include/uapi/linux/bpf.h">https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/plain/include/uapi/linux/bpf.h</a>

       11. BPF documentation
           <a href="https://docs.kernel.org/bpf/">https://docs.kernel.org/bpf/</a>

       12. Control Group APIs and Delegation
           <a href="https://systemd.io/CGROUP_DELEGATION">https://systemd.io/CGROUP_DELEGATION</a>

       13. Memory Pressure Handling in systemd
           <a href="https://systemd.io/MEMORY_PRESSURE">https://systemd.io/MEMORY_PRESSURE</a>

       14. Control Groups version 1
           <a href="https://docs.kernel.org/admin-guide/cgroup-v1/index.html">https://docs.kernel.org/admin-guide/cgroup-v1/index.html</a>
</pre> <h2>
COLOPHON </h2>
<pre>
       This page is part of the <i>systemd</i> (systemd system and service
       manager) project.  Information about the project can be found at
       ⟨<a href="http://www.freedesktop.org/wiki/Software/systemd">http://www.freedesktop.org/wiki/Software/systemd</a>⟩.  If you have
       a bug report for this manual page, see
       ⟨<a href="http://www.freedesktop.org/wiki/Software/systemd/#bugreports">http://www.freedesktop.org/wiki/Software/systemd/#bugreports</a>⟩.
       This page was obtained from the project's upstream Git repository
       ⟨<a href="https://github.com/systemd/systemd.git">https://github.com/systemd/systemd.git</a>⟩ on 2024-06-14.  (At that
       time, the date of the most recent commit that was found in the
       repository was 2024-06-13.)  If you discover any rendering
       problems in this HTML version of the page, or you believe there
       is a better or more up-to-date source for the page, or you have
       corrections or improvements to the information in this COLOPHON
       (which is <i>not</i> part of the original manual page), send a mail to
       man-pages@man7.org

<span class="footline">systemd 257~devel                                 <i>SYSTEMD...E-CONTROL</i>(5)</span>
</pre>  <p>Pages that refer to this page: <a href="../man1/homectl.1.html">homectl(1)</a>, <a href="../man1/systemctl.1.html">systemctl(1)</a>, <a href="../man1/systemd-cgtop.1.html">systemd-cgtop(1)</a>, <a href="../man1/systemd-run.1.html">systemd-run(1)</a>, <a href="oomd.conf.5.html">oomd.conf(5)</a>, <a href="org.freedesktop.systemd1.5.html">org.freedesktop.systemd1(5)</a>, <a href="systemd.exec.5.html">systemd.exec(5)</a>, <a href="systemd.mount.5.html">systemd.mount(5)</a>, <a href="systemd.scope.5.html">systemd.scope(5)</a>, <a href="systemd.service.5.html">systemd.service(5)</a>, <a href="systemd.slice.5.html">systemd.slice(5)</a>, <a href="systemd.socket.5.html">systemd.socket(5)</a>, <a href="systemd.swap.5.html">systemd.swap(5)</a>, <a href="systemd-system.conf.5.html">systemd-system.conf(5)</a>, <a href="user@.service.5.html">user@.service(5)</a>, <a href="../man7/systemd.directives.7.html">systemd.directives(7)</a>, <a href="../man7/systemd.index.7.html">systemd.index(7)</a>, <a href="../man8/pam_systemd.8.html">pam_systemd(8)</a>, <a href="../man8/systemd-oomd.service.8.html">systemd-oomd.service(8)</a> </p> <hr>         <div class="_attribution">
  <p class="_attribution-p">
    ...<br>
    <a href="https://man7.org/linux/man-pages/man5/systemd.resource-control.5.html" class="_attribution-link">https://man7.org/linux/man-pages/man5/systemd.resource-control.5.html</a>
  </p>
</div>
