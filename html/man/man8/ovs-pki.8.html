<h1>ovs-pki(8) — Linux manual page</h1>   <pre>
<span class="headline"><i>OVS-PKI</i>(8)                    Open vSwitch                    <i>OVS-PKI</i>(8)</span>
</pre> <h2>
NAME </h2>
<pre>
       ovs-pki - OpenFlow public key infrastructure management utility
</pre> <h2>
SYNOPSIS </h2>
<pre>
       Each command takes the form:

       <b>ovs-pki &lt;options&gt; &lt;command&gt; &lt;args&gt;...</b>

       The implemented commands and their arguments are:

       • <b>ovs-pki init</b>

       • <b>ovs-pki req &lt;name&gt;</b>

       • <b>ovs-pki sign &lt;name&gt; [&lt;type&gt;]</b>

       • <b>ovs-pki req+sign &lt;name&gt; [&lt;type&gt;]</b>

       • <b>ovs-pki verify &lt;name&gt; [&lt;type&gt;]</b>

       • <b>ovs-pki fingerprint &lt;file&gt;</b>

       • <b>ovs-pki self-sign &lt;name&gt;</b>

       Each &lt;type&gt; above is a certificate type, either <b>switch </b>(default)
       or <b>controller</b>.

       The available options are:

       • <b>-k &lt;type&gt; </b>or <b>--key=&lt;type&gt;</b>

       • <b>-B &lt;nbits&gt; </b>or <b>--bits=&lt;nbits&gt;</b>

       • <b>-D &lt;file&gt; </b>or <b>--dsaparam=&lt;file&gt;</b>

       • <b>-b </b>or <b>--batch</b>

       • <b>-f </b>or <b>--force</b>

       • <b>-d &lt;dir&gt; </b>or <b>--dir=&lt;dir&gt;</b>

       • <b>-l &lt;file&gt; </b>or <b>--log=&lt;file&gt;</b>

       • <b>-u </b>or <b>--unique</b>

       • <b>-h </b>or <b>--help</b>
</pre> <h2>
DESCRIPTION </h2>
<pre>
       The <b>ovs-pki </b>program sets up and manages a public key
       infrastructure for use with OpenFlow.  It is intended to be a
       simple interface for organizations that do not have an
       established public key infrastructure.  Other PKI tools can
       substitute for or supplement the use of <b>ovs-pki</b>.

       <b>ovs-pki </b>uses <b>openssl</b>(1) for certificate management and key
       generation.
</pre> <h2>
OFFLINE COMMANDS </h2>
<pre>
       The following <b>ovs-pki </b>commands support manual PKI administration:

       • <b>init</b>

         Initializes a new PKI (by default in <b>/var/lib/openvswitch/pki</b>,
         although this default may be changed at Open vSwitch build
         time) and populates it with a pair of certificate authorities
         for controllers and switches.

         This command should ideally be run on a high-security machine
         separate from any OpenFlow controller or switch, called the CA
         machine.  The files <b>pki/controllerca/cacert.pem </b>and
         <b>pki/switchca/cacert.pem </b>that it produces will need to be copied
         over to the OpenFlow switches and controllers, respectively.
         Their contents may safely be made public.

         By default, <b>ovs-pki </b>generates 2048-bit RSA keys.  The <b>-B </b>or
         <b>--bits </b>option (see below) may be used to override the key
         length.  The <b>-k dsa </b>or <b>--key=dsa </b>option may be used to use DSA
         in place of RSA.  If DSA is selected, the <b>dsaparam.pem </b>file
         generated in the new PKI hierarchy must be copied to any
         machine on which the <b>req </b>command (see below) will be executed.
         Its contents may safely be made public.

         Other files generated by <b>init </b>may remain on the CA machine.
         The files <b>pki/controllerca/private/cakey.pem </b>and
         <b>pki/switchca/private/cakey.pem </b>have particularly sensitive
         contents that should not be exposed.

       • <b>req &lt;name&gt;</b>

         Generates a new private key named <b>&lt;name&gt;-privkey.pem </b>and
         corresponding certificate request named <b>&lt;name&gt;-req.pem</b>.  The
         private key can be intended for use by a switch or a
         controller.

         This command should ideally be run on the switch or controller
         that will use the private key to identify itself.  The file
         <b>&lt;name&gt;-req.pem </b>must be copied to the CA machine for signing
         with the <b>sign </b>command (below).

         This command will output a fingerprint to stdout as its final
         step.  Write down the fingerprint and take it to the CA machine
         before continuing with the <b>sign </b>step.

         When RSA keys are in use (as is the default), <b>req</b>, unlike the
         rest of the <b>ovs-pki </b>commands, does not need access to a PKI
         hierarchy created by <b>ovs-pki init</b>.  The <b>-B </b>or <b>--bits </b>option
         (see below) may be used to specify the number of bits in the
         generated RSA key.

         When DSA keys are used (as specified with <b>--key=dsa</b>), <b>req </b>needs
         access to the <b>dsaparam.pem </b>file created as part of the PKI
         hierarchy (but not to other files in that tree).  By default,
         <b>ovs-pki </b>looks for this file in the PKI directory as
         <b>dsaparam.pem</b>, but the <b>-D </b>or <b>--dsaparam </b>option (see below) may
         be used to specify an alternate location.

         <b>&lt;name&gt;-privkey.pem </b>has sensitive contents that should not be
         exposed.  <b>&lt;name&gt;-req.pem </b>may be safely made public.

       • <b>sign &lt;name&gt; [&lt;type&gt;]</b>

         Signs the certificate request named <b>&lt;name&gt;-req.pem </b>that was
         produced in the previous step, producing a certificate named
         <b>&lt;name&gt;-cert.pem</b>.  &lt;type&gt;, either <b>switch </b>(default) or
         <b>controller</b>, indicates the use for which the key is being
         certified.

         This command must be run on the CA machine.

         The command will output a fingerprint to stdout and request
         that you verify that it is the same fingerprint output by the
         <b>req </b>command.  This ensures that the request being signed is the
         same one produced by <b>req</b>.  (The <b>-b </b>or <b>--batch </b>option suppresses
         the verification step.)

         The file <b>&lt;name&gt;-cert.pem </b>will need to be copied back to the
         switch or controller for which it is intended.  Its contents
         may safely be made public.

       • <b>req+sign &lt;name&gt; [&lt;type&gt;]</b>

         Combines the <b>req </b>and <b>sign </b>commands into a single step,
         outputting all the files produced by each.  The
         <b>&lt;name&gt;-privkey.pem </b>and <b>&lt;name&gt;-cert.pem </b>files must be copied
         securely to the switch or controller.  <b>&lt;name&gt;-privkey.pem </b>has
         sensitive contents and must not be exposed in transit.
         Afterward, it should be deleted from the CA machine.

         This combined method is, theoretically, less secure than the
         individual steps performed separately on two different
         machines, because there is additional potential for exposure of
         the private key.  However, it is also more convenient.

       • <b>verify &lt;name&gt; [&lt;type&gt;]</b>

         Verifies that <b>&lt;name&gt;-cert.pem </b>is a valid certificate for the
         given &lt;type&gt; of use, either <b>switch </b>(default) or <b>controller</b>.  If
         the certificate is valid for this use, it prints the message
         <b>&lt;name&gt;-cert.pem: OK</b>; otherwise, it prints an error message.

       • <b>fingerprint &lt;file&gt;</b>

         Prints the fingerprint for &lt;file&gt;.  If &lt;file&gt; is a certificate,
         then this is the SHA-1 digest of the DER encoded version of the
         certificate; otherwise, it is the SHA-1 digest of the entire
         file.

       • <b>self-sign &lt;name&gt;</b>

         Signs the certificate request named <b>&lt;name&gt;-req.pem </b>using the
         private key <b>&lt;name&gt;-privkey.pem</b>, producing a self-signed
         certificate named <b>&lt;name&gt;-cert.pem</b>.  The input files should have
         been produced with <b>ovs-pki req</b>.

         Some controllers accept such self-signed certificates.
</pre> <h2>
OPTIONS </h2>
<pre>
       • <b>-k &lt;type&gt; </b>or <b>--key=&lt;type&gt;</b>

         For the <b>init </b>command, sets the public key algorithm to use for
         the new PKI hierarchy.  For the <b>req </b>and <b>req+sign </b>commands, sets
         the public key algorithm to use for the key to be generated,
         which must match the value specified on <b>init</b>.  With other
         commands, the value has no effect.

         The &lt;type&gt; may be <b>rsa </b>(the default) or <b>dsa</b>.

       • <b>-B &lt;nbits&gt; </b>or <b>--bits=&lt;nbits&gt;</b>

         Sets the number of bits in the key to be generated.  When RSA
         keys are in use, this option affects only the <b>init</b>, <b>req</b>, and
         <b>req+sign </b>commands, and the same value should be given each
         time.  With DSA keys are in use, this option affects only the
         <b>init </b>command.

         The value must be at least 1024.  The default is 2048.

       • <b>-D &lt;file&gt; </b>or <b>--dsaparam=&lt;file&gt;</b>

         Specifies an alternate location for the <b>dsaparam.pem </b>file
         required by the <b>req </b>and <b>req+sign </b>commands.  This option affects
         only these commands, and only when DSA keys are used.

         The default is <b>dsaparam.pem </b>under the PKI hierarchy.

       • <b>-b </b>or <b>--batch</b>

         Suppresses the interactive verification of fingerprints that
         the <b>sign </b>command by default requires.

       • <b>-d &lt;dir&gt; </b>or <b>--dir=&lt;dir&gt;</b>

         Specifies the location of the PKI hierarchy to be used or
         created by the command.  All commands, except <b>req</b>, need access
         to a PKI hierarchy.

         The default PKI hierarchy is <b>/var/lib/openvswitch/pki</b>, although
         this default may be changed at Open vSwitch build time

       • <b>-f </b>or <b>--force</b>

         By default, <b>ovs-pki </b>will not overwrite existing files or
         directories.  This option overrides this behavior.

       • <b>-l &lt;file&gt; </b>or <b>--log=&lt;file&gt;</b>

         Sets the log file to &lt;file&gt;.  The default is <b>ovs-pki.log </b>in the
         OVS log directory.  The default OVS log directory is
         <b>/var/log/openvswitch</b>, although this default may be changed at
         Open vSwitch build time.

       • <b>-u </b>or <b>--unique</b>

         Changes the format of the certificate’s Common Name (CN) field.
         By default, this field has the format <b>&lt;name&gt; id:&lt;uuid-or-date&gt;</b>.
         This option causes the provided name to be treated as unique
         and changes the format of the CN field to be simply <b>&lt;name&gt;</b>.

       • <b>-h </b>or <b>--help</b>

         Prints a help usage message and exits.
</pre> <h2>
AUTHOR </h2>
<pre>
       The Open vSwitch Development Community
</pre> <h2>
COPYRIGHT </h2>
<pre>
       2016-2024, The Open vSwitch Development Community
</pre> <h2>
COLOPHON </h2>
<pre>
       This page is part of the <i>Open vSwitch</i> (a distributed virtual
       multilayer switch) project.  Information about the project can be
       found at ⟨<a href="http://openvswitch.org/">http://openvswitch.org/</a>⟩.  If you have a bug report for
       this manual page, send it to bugs@openvswitch.org.  This page was
       obtained from the project's upstream Git repository
       ⟨<a href="https://github.com/openvswitch/ovs.git">https://github.com/openvswitch/ovs.git</a>⟩ on 2024-06-14.  (At that
       time, the date of the most recent commit that was found in the
       repository was 2024-06-07.)  If you discover any rendering
       problems in this HTML version of the page, or you believe there
       is a better or more up-to-date source for the page, or you have
       corrections or improvements to the information in this COLOPHON
       (which is <i>not</i> part of the original manual page), send a mail to
       man-pages@man7.org

<span class="footline">3.3.90                        Jun 13, 2024                    <i>OVS-PKI</i>(8)</span>
</pre>          <div class="_attribution">
  <p class="_attribution-p">
    ...<br>
    <a href="https://man7.org/linux/man-pages/man8/ovs-pki.8.html" class="_attribution-link">https://man7.org/linux/man-pages/man8/ovs-pki.8.html</a>
  </p>
</div>
