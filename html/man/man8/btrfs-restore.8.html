<h1>btrfs-restore(8) — Linux manual page</h1>   <pre>
<span class="headline"><i>BTRFS-RESTORE</i>(8)              Btrfs Manual              <i>BTRFS-RESTORE</i>(8)</span>
</pre> <h2>
NAME </h2>
<pre>
       btrfs-restore - try to restore files from a damaged btrfs
       filesystem image
</pre> <h2>
SYNOPSIS </h2>
<pre>
       <b>btrfs restore </b>[options] <i>&lt;device&gt; &lt;path&gt;</i> | -l <i>&lt;device&gt;</i>
</pre> <h2>
DESCRIPTION </h2>
<pre>
       <b>btrfs restore </b>is used to try to salvage files from a damaged
       filesystem and restore them into <i>&lt;path&gt;</i> or just list the
       subvolume tree roots. The filesystem image is not modified.

       If the filesystem is damaged and cannot be repaired by the other
       tools (<a href="btrfs-check.8.html">btrfs-check(8)</a> or <a href="btrfs-rescue.8.html">btrfs-rescue(8)</a>), <b>btrfs restore </b>could be
       used to retrieve file data, as far as the metadata are readable.
       The checks done by restore are less strict and the process is
       usually able to get far enough to retrieve data from the whole
       filesystem. This comes at a cost that some data might be
       incomplete or from older versions if they’re available.

       There are several options to attempt restoration of various file
       metadata type. You can try a dry run first to see how well the
       process goes and use further options to extend the set of
       restored metadata.

       For images with damaged tree structures, there are several
       options to point the process to some spare copy.

           <b>Note</b>

           It is recommended to read the following btrfs wiki page if
           your data is not salvaged with default option:
           <b><a href="https://btrfs.wiki.kernel.org/index.php/Restore">https://btrfs.wiki.kernel.org/index.php/Restore</a> </b>
</pre> <h2>
OPTIONS </h2>
<pre>
       -s|--snapshots
           get also snapshots that are skipped by default

       -x|--xattr
           get extended attributes

       -m|--metadata
           restore owner, mode and times for files and directories

       -S|--symlinks
           restore symbolic links as well as normal files

       -i|--ignore-errors
           ignore errors during restoration and continue

       -o|--overwrite
           overwrite directories/files in <i>&lt;path&gt;</i>, eg. for repeated runs

       -t <i>&lt;bytenr&gt;</i>
           use <i>&lt;bytenr&gt;</i> to read the root tree

       -f <i>&lt;bytenr&gt;</i>
           only restore files that are under specified subvolume root
           pointed by <i>&lt;bytenr&gt;</i>

       -u|--super <i>&lt;mirror&gt;</i>
           use given superblock mirror identified by <i>&lt;mirror&gt;</i>, it can be
           0,1 or 2

       -r|--root <i>&lt;rootid&gt;</i>
           only restore files that are under a specified subvolume whose
           objectid is <i>&lt;rootid&gt;</i>

       -d
           find directory

       -l|--list-roots
           list subvolume tree roots, can be used as argument for <i>-r</i>

       -D|--dry-run
           dry run (only list files that would be recovered)

       --path-regex <i>&lt;regex&gt;</i>
           restore only filenames matching a regular expression (‐
           <a href="../man7/regex.7.html">regex(7)</a>) with a mandatory format

           <b>^/(|home(|/username(|/Desktop(|/.*))))$</b>

           The format is not very comfortable and restores all files in
           the directories in the whole path, so this is not useful for
           restoring single file in a deep hierarchy.

       -c
           ignore case (--path-regex only)

       -v|--verbose
           (deprecated) alias for global <i>-v</i> option

       <b>Global options</b>

       -v|--verbose
           be verbose and print what is being restored
</pre> <h2>
EXIT STATUS </h2>
<pre>
       <b>btrfs restore </b>returns a zero exit status if it succeeds. Non zero
       is returned in case of failure.
</pre> <h2>
AVAILABILITY </h2>
<pre>
       <b>btrfs </b>is part of btrfs-progs. Please refer to the btrfs wiki
       <b>http://btrfs.wiki.kernel.org </b>for further details.
</pre> <h2>
SEE ALSO </h2>
<pre>
       <a href="mkfs.btrfs.8.html">mkfs.btrfs(8)</a>, <a href="btrfs-rescue.8.html">btrfs-rescue(8)</a>, <a href="btrfs-check.8.html">btrfs-check(8)</a>
</pre> <h2>
COLOPHON </h2>
<pre>
       This page is part of the <i>btrfs-progs</i> (btrfs filesystem tools)
       project.  Information about the project can be found at 
       ⟨<a href="https://btrfs.wiki.kernel.org/index.php/Btrfs_source_repositories">https://btrfs.wiki.kernel.org/index.php/Btrfs_source_repositories</a>⟩.
       If you have a bug report for this manual page, see
       ⟨<a href="https://btrfs.wiki.kernel.org/index.php/Problem_FAQ#How_do_I_report_bugs_and_issues.3F">https://btrfs.wiki.kernel.org/index.php/Problem_FAQ#How_do_I_report_bugs_and_issues.3F</a>⟩.
       This page was obtained from the project's upstream Git repository
       ⟨git://git.kernel.org/pub/scm/linux/kernel/git/kdave/btrfs-progs.git⟩
       on 2024-06-14.  (At that time, the date of the most recent commit
       that was found in the repository was 2024-05-02.)  If you
       discover any rendering problems in this HTML version of the page,
       or you believe there is a better or more up-to-date source for
       the page, or you have corrections or improvements to the
       information in this COLOPHON (which is <i>not</i> part of the original
       manual page), send a mail to man-pages@man7.org

<span class="footline">Btrfs v5.16.1                  02/06/2022               <i>BTRFS-RESTORE</i>(8)</span>
</pre>  <p>Pages that refer to this page: <a href="btrfs.8.html">btrfs(8)</a> </p> <hr>         <div class="_attribution">
  <p class="_attribution-p">
    ...<br>
    <a href="https://man7.org/linux/man-pages/man8/btrfs-restore.8.html" class="_attribution-link">https://man7.org/linux/man-pages/man8/btrfs-restore.8.html</a>
  </p>
</div>
