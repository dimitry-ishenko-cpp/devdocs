<h1>xfs_io(8) â€” Linux manual page</h1>   <pre>
<span class="headline"><i>xfs_io</i>(8)                System Manager's Manual               <i>xfs_io</i>(8)</span>
</pre> <h2>
NAME </h2>
<pre>
       xfs_io - debug the I/O path of an XFS filesystem
</pre> <h2>
SYNOPSIS </h2>
<pre>
       <b>xfs_io </b>[ <b>-adfimrRstxT </b>] [ <b>-c </b><i>cmd</i> ] ... [ <b>-C </b><i>cmd</i> ] ... [ <b>-p </b><i>prog</i> ]
       <i>[ file ]</i>
       <b>xfs_io -V</b>
</pre> <h2>
DESCRIPTION </h2>
<pre>
       <b>xfs_io </b>is a debugging tool like <a href="xfs_db.8.html">xfs_db(8)</a>, but is aimed at
       examining the regular file I/O paths rather than the raw XFS
       volume itself.  These code paths include not only the obvious
       read/write/mmap interfaces for manipulating files, but also cover
       all of the XFS extensions (such as space preallocation,
       additional inode flags, etc).
</pre> <h2>
OPTIONS </h2>
<pre>
       <b>xfs_io </b>commands may be run interactively (the default) or as
       arguments on the command line.  Interactive mode always runs
       commands on the current open file, whilst commands run from the
       command line may be repeated on all open files rather than just
       the current open file.  In general, open file iteration will
       occur for commands that operate on file content or state. In
       contrast, commands that operate on filesystem or system-wide
       state will only be run on the current file regardless of how many
       files are currently open.  Multiple arguments may be given on the
       command line and they are run in the sequence given. The program
       exits one all commands have been run.

       <b>-c </b><i>cmd</i> Run the specified command on all currently open files.  To
              maintain compatibility with historical usage, commands
              that can not be run on all open files will still be run
              but only execute once on the current open file.  Multiple
              <b>-c </b>arguments may be given and may be interleaved on the
              command line in any order with <b>-C </b>commands.

       <b>-C </b><i>cmd</i> Run the specified command only on the current open file.
              Multiple <b>-C </b>arguments may be given and may be interleaved
              on the command line in any order with <b>-c </b>commands.

       <b>-p </b><i>prog</i>
              Set the program name for prompts and some error messages,
              the default value is <b>xfs_io</b>.

       <b>-f     </b>Create <i>file</i> if it does not already exist.

       <b>-r     </b>Open <i>file</i> read-only, initially. This is required if <i>file</i>
              is immutable or append-only.

       <b>-i     </b>Start an idle thread. The purpose of this idle thread is
              to test io from a multi threaded process. With single
              threaded process, the file table is not shared and file
              structs are not reference counted.  Spawning an idle
              thread can help detecting file struct reference leaks.

       <b>-x     </b>Expert mode. Dangerous commands are only available in this
              mode.  These commands also tend to require additional
              privileges.

       <b>-V     </b>Prints the version number and exits.

       The other <a href="../man2/open.2.html">open(2)</a> options described below are also available from
       the command line.
</pre> <h2>
CONCEPTS </h2>
<pre>
       <b>xfs_io </b>maintains a number of open files and memory mappings.
       Files can be initially opened on the command line (optionally),
       and additional files can also be opened later.

       <b>xfs_io </b>commands can be broken up into three groups.  Some
       commands are aimed at doing regular file I/O - read, write, sync,
       space preallocation, etc.

       The second set of commands exist for manipulating memory mapped
       regions of a file - mapping, accessing, storing, unmapping,
       flushing, etc.

       The remaining commands are for the navigation and display of data
       structures relating to the open files, mappings, and the
       filesystems where they reside.

       Many commands have extensive online help. Use the <b>help </b>command
       for more details on any command.
</pre> <h2>
FILE I/O COMMANDS </h2>
<pre>
       <b>file [ </b><i>N</i> <b>]</b>
              Display a list of all open files and (optionally) switch
              to an alternate current open file.

       <b>open [[ -acdfrstRTPL ] </b><i>path</i> <b>]</b>
              Closes the current file, and opens the file specified by
              <i>path</i> instead. Without any arguments, displays statistics
              about the current file - see the <b>stat </b>command.
                 <b>-a  </b>opens append-only (O_APPEND).
                 <b>-d  </b>opens for direct I/O (O_DIRECT).
                 <b>-f  </b>creates the file if it doesn't already exist
                     (O_CREAT).
                 <b>-r  </b>opens read-only (O_RDONLY).
                 <b>-s  </b>opens for synchronous I/O (O_SYNC).
                 <b>-t  </b>truncates on open (O_TRUNC).
                 <b>-n  </b>opens in non-blocking mode if possible
                     (O_NONBLOCK).
                 <b>-T  </b>create a temporary file not linked into the
                     filesystem namespace (O_TMPFILE).  The pathname
                     passed must refer to a directory which is treated
                     as virtual parent for the newly created invisible
                     file.  Can not be used together with the <b>-r </b>option.
                 <b>-R  </b>marks the file as a realtime XFS file after opening
                     it, if it is not already marked as such.
                 <b>-P  </b>opens the path as a referent only (O_PATH).  This
                     is incompatible with other flags specifying other
                     O_xxx flags apart from <b>-L</b>.
                 <b>-L  </b>doesn't follow symlinks (O_NOFOLLOW).  This is
                     incompatible with other flags specifying other
                     O_xxx flags apart from <b>-P</b>.

       <b>o      </b>See the <b>open </b>command.

       <b>close  </b>Closes the current open file, marking the next open file
              as current (if one exists).

       <b>c      </b>See the <b>close </b>command.

       <b>chmod -r | -w</b>
              Change the mode of the currently open file. The <b>-r </b>option
              will set the file permissions to read-only (0444), whilst
              the <b>-w </b>option will set the file permissions to read-write
              (0644). This allows xfs_io to set up mismatches between
              the file permissions and the open file descriptor
              read/write mode to exercise permission checks inside
              various syscalls.

       <b>pread [ -b </b><i>bsize</i> <b>] [ -qv ] [ -FBR [ -Z </b><i>seed</i> <b>] ] [ -V </b><i>vectors</i> <b>]</b>
       <i>offset length</i>
              Reads a range of bytes in a specified blocksize from the
              given <i>offset</i>.
                 <b>-b  </b>can be used to set the blocksize into which the
                     <a href="../man2/read.2.html">read(2)</a> requests will be split. The default
                     blocksize is 4096 bytes.
                 <b>-q  </b>quiet mode, do not write anything to standard
                     output.
                 <b>-v  </b>dump the contents of the buffer after reading, by
                     default only the count of bytes actually read is
                     dumped.
                 <b>-F  </b>read the buffers in a forward sequential direction.
                 <b>-B  </b>read the buffers in a reverse sequential direction.
                 <b>-R  </b>read the buffers in the give range in a random
                     order.
                 <b>-Z seed</b>
                     specify the random number seed used for random
                     reads.
                 <b>-V vectors</b>
                     Use the vectored IO read syscall <a href="../man2/preadv.2.html">preadv(2)</a> with a
                     number of blocksize length iovecs. The number of
                     iovecs is set by the <i>vectors</i> parameter.

       <b>r      </b>See the <b>pread </b>command.

       <b>pwrite [ -i </b><i>file</i> <b>] [ -qdDwNOW ] [ -s </b><i>skip</i> <b>] [ -b </b><i>size</i> <b>] [ -S </b><i>seed</i>
       <b>] [ -FBR [ -Z </b><i>zeed</i> <b>] ] [ -V </b><i>vectors</i> <b>] </b><i>offset length</i>
              Writes a range of bytes in a specified blocksize from the
              given <i>offset</i>.  The bytes written can be either a set
              pattern or read in from another file before writing.
                 <b>-i  </b>allows an input <i>file</i> to be specified as the source
                     of the data to be written.
                 <b>-q  </b>quiet mode, do not write anything to standard
                     output.
                 <b>-d  </b>causes direct I/O, rather than the usual buffered
                     I/O, to be used when reading the input file.
                 <b>-w  </b>call <a href="../man2/fdatasync.2.html">fdatasync(2)</a> once all writes are complete
                     (included in timing results)
                 <b>-N  </b>Perform the <a href="../man2/pwritev2.2.html">pwritev2(2)</a> call with <i>RWF_NOWAIT</i>.
                 <b>-D  </b>Perform the <a href="../man2/pwritev2.2.html">pwritev2(2)</a> call with <i>RWF_DSYNC</i>.
                 <b>-O  </b>perform pwrite once and return the (maybe partial)
                     bytes written.
                 <b>-W  </b>call <a href="../man2/fsync.2.html">fsync(2)</a> once all writes are complete
                     (included in timing results)
                 <b>-s  </b>specifies the number of bytes to <i>skip</i> from the
                     start of the input file before starting to read.
                 <b>-b  </b>used to set the blocksize into which the <a href="../man2/write.2.html">write(2)</a>
                     requests will be split. The default blocksize is
                     4096 bytes.
                 <b>-S  </b>used to set the (repeated) fill pattern which is
                     used when the data to write is not coming from a
                     file.  The default buffer fill pattern value is
                     0xcdcdcdcd.
                 <b>-F  </b>write the buffers in a forward sequential
                     direction.
                 <b>-B  </b>write the buffers in a reverse sequential
                     direction.
                 <b>-R  </b>write the buffers in the give range in a random
                     order.
                 <b>-Z seed</b>
                     specify the random number seed used for random
                     write
                 <b>-V vectors</b>
                     Use the vectored IO write syscall <a href="../man2/pwritev.2.html">pwritev(2)</a> with a
                     number of blocksize length iovecs. The number of
                     iovecs is set by the <i>vectors</i> parameter.

       <b>w      </b>See the <b>pwrite </b>command.

       <b>bmap [ -adelpv ] [ -n </b><i>nx</i> <b>]</b>
              Prints the block mapping for the current open file. Refer
              to the <a href="xfs_bmap.8.html">xfs_bmap(8)</a> manual page for complete documentation.

       <b>fiemap [ -alv ] [ -n </b><i>nx</i> <b>] [ </b><i>offset</i> <b>[ </b><i>len</i> <b>]]</b>
              Prints the block mapping for the current open file using
              the fiemap ioctl.  Options behave as described in the
              <a href="xfs_bmap.8.html">xfs_bmap(8)</a> manual page.

              Optionally, this command also supports passing the start
              offset from where to begin the mapping and the length of
              that region.  The kernel will return any full extents
              which intersect with the requested range, and the <b>fiemap</b>
              command will print them in their entirety.  If the
              requested range starts or ends in a hole, <b>fiemap </b>will
              print the hole, truncated to the requested range.

       <b>extsize [ -R | -D ] [ </b><i>value</i> <b>]</b>
              Display and/or modify the preferred extent size used when
              allocating space for the currently open file. If the <b>-R</b>
              option is specified, a recursive descent is performed for
              all directory entries below the currently open file (<b>-D</b>
              can be used to restrict the output to directories only).
              If the target file is a directory, then the inherited
              extent size is set for that directory (new files created
              in that directory inherit that extent size).  The <i>value</i>
              should be specified in bytes, or using one of the usual
              units suffixes (k, m, g, b, etc). The extent size is
              always reported in units of bytes.

       <b>cowextsize [ -R | -D ] [ </b><i>value</i> <b>]</b>
              Display and/or modify the preferred copy-on-write extent
              size used when allocating space for the currently open
              file. If the <b>-R </b>option is specified, a recursive descent
              is performed for all directory entries below the currently
              open file (<b>-D </b>can be used to restrict the output to
              directories only).  If the target file is a directory,
              then the inherited CoW extent size is set for that
              directory (new files created in that directory inherit
              that CoW extent size).  The <i>value</i> should be specified in
              bytes, or using one of the usual units suffixes (k, m, g,
              b, etc). The extent size is always reported in units of
              bytes.

       <b>allocsp </b><i>size</i> <b>0</b>
              Sets the size of the file to <i>size</i> and zeroes any
              additional space allocated using the
              XFS_IOC_ALLOCSP/XFS_IOC_FREESP system call described in
              the <a href="../man3/xfsctl.3.html">xfsctl(3)</a> manual page.  <b>allocsp </b>and <b>freesp </b>do exactly
              the same thing.

              These commands are no longer supported as of Linux 5.17.

       <b>freesp </b><i>size</i> <b>0</b>
              See the <b>allocsp </b>command.

       <b>fadvise [ -r | -s | [[ -d | -n | -w ] </b><i>offset length</i> <b>]]</b>
              On platforms which support it, allows hints be given to
              the system regarding the expected I/O patterns on the
              file.  The range arguments are required by some advise
              commands ([*] below), and the others must have no range
              arguments.  With no arguments, the POSIX_FADV_NORMAL
              advice is implied (default readahead).
                 <b>-d  </b>the data will not be accessed again in the near
                     future (POSIX_FADV_DONTNEED[*]).
                 <b>-n  </b>data will be accessed once and not be reused
                     (POSIX_FADV_NOREUSE[*]).
                 <b>-r  </b>expect access to data in random order
                     (POSIX_FADV_RANDOM), which sets readahead to zero.
                 <b>-s  </b>expect access to data in sequential order
                     (POSIX_FADV_SEQUENTIAL), which doubles the default
                     readahead on the file.
                 <b>-w  </b>advises the specified data will be needed again
                     (POSIX_FADV_WILLNEED[*]) which forces the maximum
                     readahead.

       <b>fdatasync</b>
              Calls <a href="../man2/fdatasync.2.html">fdatasync(2)</a> to flush the file's in-core data to
              disk.

       <b>fsync  </b>Calls <a href="../man2/fsync.2.html">fsync(2)</a> to flush all in-core file state to disk.

       <b>s      </b>See the <b>fsync </b>command.

       <b>sync_range [ -a | -b | -w ] offset length</b>
              On platforms which support it, allows control of syncing a
              range of the file to disk. With no options,
              SYNC_FILE_RANGE_WRITE is implied on the range supplied.
                 <b>-a  </b>wait for IO in the given range to finish after
                     writing (SYNC_FILE_RANGE_WAIT_AFTER).
                 <b>-b  </b>wait for IO in the given range to finish before
                     writing (SYNC_FILE_RANGE_WAIT_BEFORE).
                 <b>-w  </b>start writeback of dirty data in the given range
                     (SYNC_FILE_RANGE_WRITE).

       <b>sync   </b>Calls <a href="../man2/sync.2.html">sync(2)</a> to flush all filesystems' in-core data to
              disk.

       <b>syncfs </b>Calls <a href="../man2/syncfs.2.html">syncfs(2)</a> to flush this filesystem's in-core data to
              disk.

       <b>resvsp </b><i>offset length</i>
              Allocates reserved, unwritten space for part of a file
              using the XFS_IOC_RESVSP system call described in the
              <a href="../man3/xfsctl.3.html">xfsctl(3)</a> manual page.

       <b>unresvsp </b><i>offset length</i>
              Frees reserved space for part of a file using the
              XFS_IOC_UNRESVSP system call described in the <a href="../man3/xfsctl.3.html">xfsctl(3)</a>
              manual page.

       <b>falloc [ -k ] </b><i>offset length</i>
              Allocates reserved, unwritten space for part of a file
              using the fallocate routine as described in the
              <a href="../man2/fallocate.2.html">fallocate(2)</a> manual page.
                 <b>-k  </b>will set the FALLOC_FL_KEEP_SIZE flag as described
                     in <a href="../man2/fallocate.2.html">fallocate(2)</a>.

       <b>fcollapse </b><i>offset length</i>
              Call fallocate with FALLOC_FL_COLLAPSE_RANGE flag as
              described in the <a href="../man2/fallocate.2.html">fallocate(2)</a> manual page to de-allocates
              blocks and eliminates the hole created in this process by
              shifting data blocks into the hole.

       <b>finsert </b><i>offset length</i>
              Call fallocate with FALLOC_FL_INSERT_RANGE flag as
              described in the <a href="../man2/fallocate.2.html">fallocate(2)</a> manual page to create the
              hole by shifting data blocks.

       <b>fpunch </b><i>offset length</i>
              Punches (de-allocates) blocks in the file by calling
              fallocate with the FALLOC_FL_PUNCH_HOLE flag as described
              in the <a href="../man2/fallocate.2.html">fallocate(2)</a> manual page.

       <b>funshare </b><i>offset length</i>
              Call fallocate with FALLOC_FL_UNSHARE_RANGE flag as
              described in the <a href="../man2/fallocate.2.html">fallocate(2)</a> manual page to unshare all
              shared blocks within the range.

       <b>fzero [ -k ] </b><i>offset length</i>
              Call fallocate with FALLOC_FL_ZERO_RANGE flag as described
              in the <a href="../man2/fallocate.2.html">fallocate(2)</a> manual page to allocate and zero
              blocks within the range.  With the <b>-k </b>option, use the
              FALLOC_FL_KEEP_SIZE flag as well.

       <b>zero </b><i>offset length</i>
              Call xfsctl with <b>XFS_IOC_ZERO_RANGE </b>as described in the
              <a href="../man3/xfsctl.3.html">xfsctl(3)</a> manual page to allocate and zero blocks within
              the range.

       <b>truncate </b><i>offset</i>
              Truncates the current file at the given offset using
              <a href="../man2/ftruncate.2.html">ftruncate(2)</a>.

       <b>sendfile [ -q ] -i </b><i>srcfile</i> <b>| -f </b><i>N</i> <b>[ </b><i>offset length</i> <b>]</b>
              On platforms which support it, allows a direct in-kernel
              copy between two file descriptors. The current open file
              is the target, the source must be specified as another
              open file (<b>-f</b>) or by path (<b>-i</b>).
                 <b>-q </b>quiet mode, do not write anything to standard
                 output.

       <b>readdir [ -v ] [ -o </b><i>offset</i> <b>] [ -l </b><i>length</i> <b>]</b>
              Read a range of directory entries from a given offset of a
              directory.
                 <b>-v  </b>verbose mode - dump dirent content as defined in
                     <a href="../man3/readdir.3.html">readdir(3)</a>
                 <b>-o  </b>specify starting <i>offset</i>
                 <b>-l  </b>specify total <i>length</i> to read (in bytes)

       <b>seek  -a | -d | -h [ -r ] [ -s ] offset</b>
              On platforms that support the <a href="../man2/lseek.2.html">lseek(2)</a> <b>SEEK_DATA </b>and
              <b>SEEK_HOLE </b>options, display the offsets of the specified
              segments.
                 <b>-a  </b>Display both <b>data </b>and <b>hole </b>segments starting at the
                     specified <b>offset.</b>
                 <b>-d  </b>Display the <b>data </b>segment starting at the specified
                     <b>offset.</b>
                 <b>-h  </b>Display the <b>hole </b>segment starting at the specified
                     <b>offset.</b>
                 <b>-r  </b>Recursively display all the specified segments
                     starting at the specified <b>offset.</b>
                 <b>-s  </b>Display the starting lseek(2) offset. This offset
                     will be a calculated value when both data and holes
                     are displayed together or performing a recusively
                     display.

       <b>reflink  [ -C ] [ -q ] src_file [src_offset dst_offset length]</b>
              On filesystems that support the <b>FICLONERANGE </b>or
              <b>BTRFS_IOC_CLONE_RANGE </b>ioctls, map <i>length</i> bytes at offset
              <i>dst_offset</i> in the open file to the same physical blocks
              that are mapped at offset <i>src_offset</i> in the file <i>src_file</i>
              , replacing any contents that may already have been there.
              If a program writes into a reflinked block range of either
              file, the dirty blocks will be cloned, written to, and
              remapped ("copy on write") in the affected file, leaving
              the other file(s) unchanged.  If src_offset, dst_offset,
              and length are omitted, all contents of src_file will be
              reflinked into the open file.
                 <b>-C  </b>Print timing statistics in a condensed format.
                 <b>-q  </b>Do not print timing statistics at all.

       <b>dedupe  [ -C ] [ -q ] src_file src_offset dst_offset length</b>
              On filesystems that support the <b>FIDEDUPERANGE </b>or
              <b>BTRFS_IOC_FILE_EXTENT_SAME </b>ioctls, map <i>length</i> bytes at
              offset <i>dst_offset</i> in the open file to the same physical
              blocks that are mapped at offset <i>src_offset</i> in the file
              <i>src_file</i> , but only if the contents of both ranges are
              identical.  This is known as block-based deduplication.
              If a program writes into a reflinked block range of either
              file, the dirty blocks will be cloned, written to, and
              remapped ("copy on write") in the affected file, leaving
              the other file(s) unchanged.
                 <b>-C  </b>Print timing statistics in a condensed format.
                 <b>-q  </b>Do not print timing statistics at all.

       <b>copy_range [ -s </b><i>src_offset</i> <b>] [ -d </b><i>dst_offset</i> <b>] [ -l </b><i>length</i> <b>]</b>
       <b>src_file | -f </b><i>N</i>
              On filesystems that support the <a href="../man2/copy_file_range.2.html">copy_file_range(2)</a> system
              call, copies data from the source file into the current
              open file.  The source must be specified either by path
              (<b>src_file</b>) or as another open file (<b>-f</b>).  If <i>length</i> is not
              specified, this command copies data from <i>src_offset</i> to the
              end of <b>src_file </b>into the dst_file at <i>dst_offset</i>.
                 <b>-s  </b>Copy data from <i>src_file</i> beginning from <i>src_offset</i>.
                 <b>-d  </b>Copy data into the open file beginning at
                     <i>dst_offset</i>.
                 <b>-l  </b>Copy up to <i>length</i> bytes of data.

       <b>swapext </b><i>donor_file</i>
              Swaps extent forks between files. The current open file is
              the target. The donor file is specified by path. Note that
              file data is not copied (file content moves with the
              fork(s)).

       <b>set_encpolicy [ -c </b><i>mode</i> <b>] [ -n </b><i>mode</i> <b>] [ -f </b><i>flags</i> <b>] [ -s</b>
       <i>log2_dusize</i> <b>] [ -v </b><i>version</i> <b>] [ </b><i>keyspec</i> <b>]</b>
              On filesystems that support encryption, assign an
              encryption policy to the current file.  <i>keyspec</i> is a hex
              string which specifies the encryption key to use.  For v1
              encryption policies, <i>keyspec</i> must be a 16-character hex
              string (8 bytes).  For v2 policies, <i>keyspec</i> must be a
              32-character hex string (16 bytes).  If unspecified, an
              all-zeroes value is used.
                 <b>-c </b><i>mode</i>
                     contents encryption mode (e.g. AES-256-XTS)
                 <b>-n </b><i>mode</i>
                     filenames encryption mode (e.g. AES-256-CTS)
                 <b>-f </b><i>flags</i>
                     policy flags (numeric)
                 <b>-s </b><i>log2_dusize</i>
                     log2 of data unit size.  Not supported by v1
                     policies.
                 <b>-v </b><i>version</i>
                     policy version.  Defaults to 1 or 2 depending on
                     the length of <i>keyspec</i>; or to 1 if <i>keyspec</i> is
                     unspecified.

       <b>get_encpolicy [ -1 ] [ -t ]</b>
              On filesystems that support encryption, display the
              encryption policy of the current file.
                 <b>-1  </b>Use only the old ioctl to get the encryption
                     policy.  This only works if the file has a v1
                     encryption policy.
                 <b>-t  </b>Test whether v2 encryption policies are supported.
                     Prints "supported", "unsupported", or an error
                     message.

       <b>add_enckey [ -d </b><i>descriptor</i> <b>] [ -k </b><i>key_id</i> <b>]</b>
              On filesystems that support encryption, add an encryption
              key to the filesystem containing the currently open file.
              By default, the raw key in binary (typically 64 bytes
              long) is read from standard input.
                 <b>-d </b><i>descriptor</i>
                     key descriptor, as a 16-character hex string (8
                     bytes).  If given, the key will be available for
                     use by v1 encryption policies that use this
                     descriptor.  Otherwise, the key is added as a v2
                     policy key, and on success the resulting "key
                     identifier" will be printed.
                 <b>-k </b><i>key_id</i>
                     ID of kernel keyring key of type "fscrypt-
                     provisioning".  If given, the raw key will be taken
                     from here rather than from standard input.

       <b>rm_enckey [ -a ] </b><i>keyspec</i>
              On filesystems that support encryption, remove an
              encryption key from the filesystem containing the
              currently open file.  <i>keyspec</i> is a hex string specifying
              the key to remove, as a 16-character "key descriptor" or a
              32-character "key identifier".
                 <b>-a  </b>Remove the key for all users who have added it, not
                     just the current user.  This is a privileged
                     operation.

       <b>enckey_status </b><i>keyspec</i>
              On filesystems that support encryption, display the status
              of an encryption key.  <i>keyspec</i> is a hex string specifying
              the key for which to display the status, as a 16-character
              "key descriptor" or a 32-character "key identifier".

       <b>lsattr </b>[ <b>-R </b>| <b>-D </b>| <b>-a </b>| <b>-v </b>]
              List extended inode flags on the currently open file. If
              the <b>-R </b>option is specified, a recursive descent is
              performed for all directory entries below the currently
              open file (<b>-D </b>can be used to restrict the output to
              directories only).  This is a depth first descent, it does
              not follow symlinks and it also does not cross mount
              points.

              The current inode flag letters are documented below.
              Please refer to the <a href="../man2/ioctl_xfs_fsgetxattr.2.html">ioctl_xfs_fsgetxattr(2)</a> documentation
              for more details about what they mean.

              <b>r    </b>realtime file (XFS_XFLAG_REALTIME)

              <b>p    </b>prealloc (XFS_XFLAG_PREALLOC)

              <b>i    </b>immutable (XFS_XFLAG_IMMUTABLE)

              <b>a    </b>append only (XFS_XFLAG_APPEND)

              <b>s    </b>synchronous file writes (XFS_XFLAG_SYNC)

              <b>A    </b>noatime (XFS_XFLAG_NOATIME)

              <b>d    </b>nodump (XFS_XFLAG_NODUMP)

              <b>t    </b>inherit realtime flag (XFS_XFLAG_RTINHERIT)"

              <b>P    </b>inherit project id (XFS_XFLAG_PROJINHERIT)

              <b>n    </b>no symlink creation (XFS_XFLAG_NOSYMLINKS)

              <b>e    </b>extent size hint (XFS_XFLAG_EXTSIZE)

              <b>E    </b>inherit extent size hint (XFS_XFLAG_EXTSZINHERIT)

              <b>f    </b>nodefrag (XFS_XFLAG_NODEFRAG)

              <b>S    </b>filestream allocator (XFS_XFLAG_FILESTREAM)

              <b>x    </b>direct access persistent memory (XFS_XFLAG_DAX)

              <b>C    </b>copy on write extent hint (XFS_XFLAG_COWEXTSIZE)

              <b>X    </b>has extended attributes (XFS_XFLAG_HASATTR)

       <b>chattr </b>[ <b>-R </b>| <b>-D </b>] [ <b>+</b>/<b>-riasAdtPneEfSxC </b>]
              Change extended inode flags on the currently open file.
              The <b>-R </b>and <b>-D </b>options have the same meaning as above.

              See the <b>lsattr </b>command above for the list of inode flag
              letters.

       <b>flink </b><i>path</i>
              Link the currently open file descriptor into the
              filesystem namespace.
       <b>stat </b>[ <b>-v</b>|<b>-r </b>]
              Selected statistics from <a href="../man2/stat.2.html">stat(2)</a> and the XFS_IOC_GETXATTR
              system call on the current file. If the <b>-v </b>option is
              specified, the atime (last access), mtime (last modify),
              and ctime (last change) timestamps are also displayed.
              The <b>-r </b>option dumps raw fields from the stat structure.
       <b>statx [ -v|-r ][ -m </b><i>basic</i> <b>| -m </b><i>all</i> <b>| -m </b><i>&lt;mask&gt;</i> <b>][ -FD ]</b>
              Selected statistics from <a href="../man2/stat.2.html">stat(2)</a> and the XFS_IOC_GETXATTR
              system call on the current file.
                 <b>-v  </b>Show timestamps.
                 <b>-r  </b>Dump raw statx structure values.
                 <b>-m basic</b>
                     Set the field mask for the statx call to
                     STATX_BASIC_STATS.
                 <b>-m all</b>
                     Set the the field mask for the statx call to
                     STATX_ALL (default).
                 <b>-m &lt;mask&gt;</b>
                     Specify a numeric field mask for the statx call.
                 <b>-F  </b>Force the attributes to be synced with the server.
                 <b>-D  </b>Don't sync attributes with the server.

       <b>chproj </b>[ <b>-R</b>|<b>-D </b>]
              Modifies the project identifier associated with the
              current path. The <b>-R </b>option will recursively descend if
              the current path is a directory. The <b>-D </b>option will also
              recursively descend, only setting modifying projects on
              subdirectories.  See the <a href="xfs_quota.8.html">xfs_quota(8)</a> manual page for more
              information about project identifiers.

       <b>lsproj </b>[ <b>-R</b>|<b>-D </b>]
              Displays the project identifier associated with the
              current path. The <b>-R </b>and <b>-D </b>options behave as described
              above, in <b>chproj.</b>

       <b>parent </b>[ <b>-cpv </b>]
              By default this command prints out the parent inode
              numbers, inode generation numbers and basenames of all the
              hardlinks which point to the inode of the current file.
                 <b>-p  </b>the output is similar to the default output except
                     pathnames up to the mount-point are printed out
                     instead of the component name.
                 <b>-c  </b>the file's filesystem will check all the parent
                     attributes for consistency.
                 <b>-v  </b>verbose output will be printed.
              <b>[NOTE: Not currently operational on Linux.]</b>

       <b>utimes </b><i>atime_sec atime_nsec mtime_sec mtime_nsec</i>
              The utimes command changes the atime and mtime of the
              current file.  sec uses UNIX timestamp notation and is the
              seconds elapsed since 1970-01-01 00:00:00 UTC.  nsec is
              the nanoseconds since the sec. This value needs to be in
              the range 0-999999999 with UTIME_NOW and UTIME_OMIT being
              exceptions.  Each (sec, nsec) pair constitutes a single
              timestamp value.
</pre> <h2>
MEMORY MAPPED I/O COMMANDS </h2>
<pre>
       <b>mmap [ </b><i>N</i> <b>| [[ -rwxS ] [-s </b><i>size</i> <b>] </b><i>offset length</i> <b>]]</b>
              With no arguments, <b>mmap </b>shows the current mappings.
              Specifying a single numeric argument <i>N</i> sets the current
              mapping. If two arguments are specified (a range specified
              by <i>offset</i> and <i>length</i>), a new mapping is created spanning
              the range, and the protection mode can be given as a
              combination of PROT_READ (<b>-r</b>), PROT_WRITE (<b>-w</b>), and
              PROT_EXEC (<b>-x</b>).  The mapping will be created with the
              MAP_SHARED flag by default, or with the Linux specific
              (MAP_SYNC | MAP_SHARED_VALIDATE) flags if <b>-S </b>is given.  <b>-s</b>
              <i>size</i> is used to do a mmap(size) &amp;&amp; munmap(size) operation
              at first, try to reserve some extendible free memory
              space, if <i>size</i> is bigger than <i>length</i> parameter. But
              there's not guarantee that the memory after <i>length</i> ( up to
              <i>size</i> ) will stay free.  <b>e.g.  </b>"mmap -rw -s 8192 1024" will
              mmap 0 ~ 1024 bytes memory, but try to reserve 1024 ~ 8192
              free space(no guarantee). This free space will helpful for
              "mremap 8192" without MREMAP_MAYMOVE flag.

       <b>mm     </b>See the <b>mmap </b>command.

       <b>mremap [ -f &lt;new_address&gt; ] [ -m ] </b><i>new_length</i>
              Changes the current mapping size to <i>new_length</i>.  Whether
              the mapping may be moved is controlled by the flags
              passed; MREMAP_FIXED (<b>-f</b>), or MREMAP_MAYMOVE (<b>-m</b>).
              <i>new_length</i> specifies a page-aligned address to which the
              mapping must be moved. It can be set to 139946004389888,
              4096k or 1g etc.

       <b>mrm    </b>See the <b>mremap </b>command.

       <b>munmap </b>Unmaps the current memory mapping.

       <b>mu     </b>See the <b>munmap </b>command.

       <b>mread [ -f | -v ] [ -r ] [ </b><i>offset length</i> <b>]</b>
              Accesses a segment of the current memory mapping,
              optionally dumping it to the standard output stream (with
              <b>-v </b>or <b>-f </b>option) for inspection. The accesses are
              performed sequentially from the start <i>offset</i> by default,
              but can also be done from the end backwards through the
              mapping if the <b>-r </b>option in specified.  The two verbose
              modes differ only in the relative offsets they display,
              the <b>-f </b>option is relative to file start, whereas <b>-v </b>shows
              offsets relative to the start of the mapping.

       <b>mr     </b>See the <b>mread </b>command.

       <b>mwrite [ -r ] [ -S </b><i>seed</i> <b>] [ </b><i>offset length</i> <b>]</b>
              Stores a byte into memory for a range within a mapping.
              The default stored value is 'X', repeated to fill the
              range specified, but this can be changed using the <b>-S</b>
              option.  The memory stores are performed sequentially from
              the start offset by default, but can also be done from the
              end backwards through the mapping if the <b>-r </b>option in
              specified.

       <b>mw     </b>See the <b>mwrite </b>command.

       <b>msync [ -i ] [ -a | -s ] [ </b><i>offset length</i> <b>]</b>
              Writes all modified copies of pages over the specified
              range (or entire mapping if no range specified) to their
              backing storage locations.  Also, optionally invalidates
              (<b>-i</b>) so that subsequent references to the pages will be
              obtained from their backing storage locations (instead of
              cached copies).  The flush can be done synchronously (<b>-s)</b>
              or asynchronously (<b>-a</b>).

       <b>ms     </b>See the <b>msync </b>command.

       <b>madvise [ -d | -r | -s | -w ] [ </b><i>offset length</i> <b>]</b>
              Modifies page cache behavior when operating on the current
              mapping.  The range arguments are required by some advise
              commands ([*] below).  With no arguments, the
              POSIX_MADV_NORMAL advice is implied (default readahead).
                 <b>-d  </b>the pages will not be needed
                     (POSIX_MADV_DONTNEED[*]).
                 <b>-r  </b>expect random page references (POSIX_MADV_RANDOM),
                     which sets readahead to zero.
                 <b>-s  </b>expect sequential page references
                     (POSIX_MADV_SEQUENTIAL), which doubles the default
                     readahead on the file.
                 <b>-w  </b>advises the specified pages will be needed again
                     (POSIX_MADV_WILLNEED[*]) which forces the maximum
                     readahead.

       <b>mincore</b>
              Dumps a list of pages or ranges of pages that are
              currently in core, for the current memory mapping.
</pre> <h2>
FILESYSTEM COMMANDS </h2>
<pre>
       <b>bulkstat [ -a </b><i>agno</i> <b>] [ -d ] [ -e </b><i>endino</i> <b>] [ -n </b><i>batchsize</i> <b>] [ -q ]</b>
       <b>[ -s </b><i>startino</i> <b>] [ -v </b><i>version"</i><b>]</b>
              Display raw stat information about a bunch of inodes in an
              XFS filesystem.  Options are as follows:
                 <b>-a </b><i>agno</i>
                        Display only results from the given allocation
                        group.  If not specified, all results returned
                        will be displayed.
                 <b>-d     </b>Print debugging information about call results.
                 <b>-e </b><i>endino</i>
                        Stop displaying records when this inode number
                        is reached.  Defaults to stopping when the
                        system call stops returning results.
                 <b>-n </b><i>batchsize</i>
                        Retrieve at most this many records per call.
                        Defaults to 4,096.
                 <b>-q     </b>Run quietly.  Does not parse or output retrieved
                        bulkstat information.
                 <b>-s </b><i>startino</i>
                        Display inode allocation records starting with
                        this inode.  Defaults to the first inode in the
                        filesystem.  If the given inode is not
                        allocated, results will begin with the next
                        allocated inode in the filesystem.
                 <b>-v </b><i>version</i>
                        Use a particular version of the kernel
                        interface.  Currently supported versions are 1
                        and 5.

       <b>bulkstat_single [ -d ] [ -v </b><i>version</i> <b>] [ </b><i>inum...</i> <b>| </b><i>special...</i> <b>]</b>
              Display raw stat information about individual inodes in an
              XFS filesystem.  The <b>-d </b>and <b>-v </b>options are the same as the
              <b>bulkstat </b>command.  Arguments must be inode numbers or any
              of the special values:
                 <b>root   </b>Display information about the root directory
                        inode.

       <b>freeze </b>Suspend all write I/O requests to the filesystem of the
              current file.  Only available in expert mode and requires
              privileges.

       <b>thaw   </b>Undo the effects of a filesystem freeze operation.  Only
              available in expert mode and requires privileges.

       <b>inject [ </b><i>tag</i> <b>]</b>
              Inject errors into a filesystem to observe filesystem
              behavior at specific points under adverse conditions.
              Without the <i>tag</i> argument, displays the list of error tags
              available.  Only available in expert mode and requires
              privileges.

       <b>resblks [ </b><i>blocks</i> <b>]</b>
              Get and/or set count of reserved filesystem blocks using
              the XFS_IOC_GET_RESBLKS or XFS_IOC_SET_RESBLKS system
              calls.  Note -- this can be useful for exercising out of
              space behavior.  Only available in expert mode and
              requires privileges.

       <b>shutdown </b>[ <b>-f </b>]
              Force the filesystem to shut down, preventing any further
              IO.  XFS and other filesystems implement this
              functionality, although implementation details may differ
              slightly.  Only available in expert mode and requires
              privileges.

              By default, the filesystem will not attempt to flush
              completed transactions to disk before shutting down the
              filesystem.  This simulates a disk failure or crash.
                 <b>-f  </b>Force the filesystem to flush all completed
                     transactions to disk before shutting down, matching
                     XFS behavior when critical corruption is
                     encountered.

       <b>statfs [ -c ] [ -g ] [ -s ]</b>
              Report selected statistics on the filesystem where the
              current file resides.  The default behavior is to enable
              all three reporting options:
                 <b>-c     </b>Display <b>XFS_IOC_FSCOUNTERS </b>summary counter data.
                 <b>-g     </b>Display <b>XFS_IOC_FSGEOMETRY </b>filesystem geometry
                        data.
                 <b>-s     </b>Display <a href="../man2/statfs.2.html">statfs(2)</a> data.
       <b>inode  [ [ -n ] </b><i>number</i> <b>] [ -v ]</b>
              The inode command queries physical information about an
              inode. With no arguments, it will return 1 or 0,
              indicating whether or not any inode numbers greater than
              32 bits are currently in use in the filesystem.  If given
              an inode <i>number</i> as an argument, the command will return
              the same inode <i>number</i> if it is in use, or 0 if not. With
              <b>-n </b><i>number</i> , the next used inode number after this <i>number</i>
              will be returned, or zero if the supplied inode number is
              the highest one in use. With <b>-v </b>the command will also
              report the number of bits (32 or 64) used by the inode
              <i>number</i> printed in the result; if no inode <i>number</i> was
              specified on the command line, the maximum possible inode
              number in the system will be printed along with its size.

       <b>inumbers [ -a </b><i>agno</i> <b>] [ -d ] [ -e </b><i>endino</i> <b>] [ -n </b><i>batchsize</i> <b>] [ -s</b>
       <i>startino</i> <b>] [ -v </b><i>version</i> <b>]</b>
              Prints allocation information about groups of inodes in an
              XFS filesystem.  Callers can use this information to
              figure out which inodes are allocated.  Options are as
              follows:
                 <b>-a </b><i>agno</i>
                        Display only results from the given allocation
                        group.  If not specified, all results returned
                        will be displayed.
                 <b>-d     </b>Print debugging information about call results.
                 <b>-e </b><i>endino</i>
                        Stop displaying records when this inode number
                        is reached.  Defaults to stopping when the
                        system call stops returning results.
                 <b>-n </b><i>batchsize</i>
                        Retrieve at most this many records per call.
                        Defaults to 4,096.
                 <b>-s </b><i>startino</i>
                        Display inode allocation records starting with
                        this inode.  Defaults to the first inode in the
                        filesystem.  If the given inode is not
                        allocated, results will begin with the next
                        allocated inode in the filesystem.
                 <b>-v </b><i>version</i>
                        Use a particular version of the kernel
                        interface.  Currently supported versions are 1
                        and 5.

       <b>scrub </b><i>type</i> <b>[ </b><i>agnumber</i> <b>| </b><i>ino gen</i> <b>]</b>
              Scrub internal XFS filesystem metadata.  The <b>type</b>
              parameter specifies which type of metadata to scrub.  For
              AG metadata, one AG number must be specified.  For file
              metadata, the scrub is applied to the open file unless the
              inode number and generation number are specified.

       <b>repair </b><i>type</i> <b>[ </b><i>agnumber</i> <b>| </b><i>ino gen</i> <b>]</b>
              Repair internal XFS filesystem metadata.  The <b>type</b>
              parameter specifies which type of metadata to repair.  For
              AG metadata, one AG number must be specified.  For file
              metadata, the repair is applied to the open file unless
              the inode number and generation number are specified.  The
              <b>-R </b>option can be specified to force rebuilding of a
              metadata structure.

       <b>label [ -c | -s </b><i>label</i> <b>]</b>
              On filesystems that support online label manipulation,
              get, set, or clear the filesystem label.  With no options,
              print the current filesystem label.  The <b>-c </b>option clears
              the filesystem label by setting it to the null string.
              The <b>-s </b><i>label</i> option sets the filesystem label to <i>label</i>.
              If the label is longer than the filesystem will accept,
              <b>xfs_io </b>will print an error message.  XFS filesystem labels
              can be at most 12 characters long.

       <b>fsmap [ -d | -l | -r ] [ -m | -v ] [ -n </b><i>nx</i> <b>] [ </b><i>start</i> <b>] [ </b><i>end</i> <b>]</b>
              Prints the mapping of disk blocks used by the filesystem
              hosting the current file.  The map lists each extent used
              by files, allocation group metadata, journalling logs, and
              static filesystem metadata, as well as any regions that
              are unused.  Each line of the listings takes the following
              form:

              <i>extent</i>: <i>major</i>:<i>minor</i> [<i>startblock</i>..<i>endblock</i>]: <i>owner</i>
              <i>startoffset</i>..<i>endoffset length</i>

              Static filesystem metadata, allocation group metadata,
              btrees, journalling logs, and free space are marked by
              replacing the <i>startoffset</i>..<i>endoffset</i> with the appropriate
              marker.  All blocks, offsets, and lengths are specified in
              units of 512-byte blocks, no matter what the filesystem's
              block size is.  The optional <i>start</i> and <i>end</i> arguments can
              be used to constrain the output to a particular range of
              disk blocks.  If these two options are specified, exactly
              one of <b>-d</b>, <b>-l</b>, or <b>-r </b>must also be set.
                 <b>-d     </b>Display only extents from the data device.  This
                        option only applies for XFS filesystems.
                 <b>-l     </b>Display only extents from the external log
                        device.  This option only applies to XFS
                        filesystems.
                 <b>-r     </b>Display only extents from the realtime device.
                        This option only applies to XFS filesystems.
                 <b>-m     </b>Display results in a machine readable format
                        (CSV).  This option is not compatible with the
                        <b>-v </b>flag.  The columns of the output are: extent
                        number, device major, device minor, physical
                        start, physical end, owner, offset start, offset
                        end, length.  The start, end, and length numbers
                        are provided in units of 512b.  The owner field
                        is a special string that takes the form:

                           <i>inode_%lld_data</i>
                               for inode data.
                           <i>inode_%lld_data_bmbt</i>
                               for inode data extent maps.
                           <i>inode_%lld_attr</i>
                               for inode extended attribute data.
                           <i>inode_%lld_attr_bmbt</i>
                               for inode extended attribute extent maps.
                           <i>special_%u:%u</i>
                               for other filesystem metadata.

                 <b>-n </b><i>num_extents</i>
                        If this option is given, <b>fsmap </b>obtains the
                        extent list of the file in groups of <i>num_extents</i>
                        extents.  In the absence of <b>-n</b>, <b>fsmap </b>queries
                        the system for extents in groups of 131,072
                        records.

                 <b>-v     </b>Shows verbose information.  When this flag is
                        specified, additional AG specific information is
                        appended to each line in the following form:

                             <i>agno</i> (<i>startagblock</i>..<i>endagblock</i>) <i>nblocks</i>
                             <i>flags</i>

                        A second <b>-v </b>option will print out the <i>flags</i>
                        legend.  This option is not compatible with the
                        <b>-m </b>flag.

       <b>fsuuid </b>Print the mounted filesystem UUID.
</pre> <h2>
OTHER COMMANDS </h2>
<pre>
       <b>help [ </b>command <b>]</b>
              Display a brief description of one or all commands.

       <b>print  </b>Display a list of all open files and memory mapped
              regions.  The current file and current mapping are
              distinguishable from any others.

       <b>p      </b>See the <b>print </b>command.

       <b>quit   </b>Exit <b>xfs_io</b>.

       <b>q      </b>See the <b>quit </b>command.

       <b>log_writes -d </b><i>device</i> <b>-m </b><i>mark</i>
              Create a mark named <i>mark</i> in the dm-log-writes log
              specified by <i>device.</i>  This is intended to be equivalent to
              the shell command:

              <b>dmsetup message </b><i>device</i> <b>0 mark </b><i>mark</i>

       <b>lw     </b>See the <b>log_writes </b>command.

       <b>crc32cselftest</b>
              Test the internal crc32c implementation to make sure that
              it computes results correctly.
</pre> <h2>
SEE ALSO </h2>
<pre>
       <b>mkfs.xfs</b>(8), <a href="../man3/xfsctl.3.html">xfsctl(3)</a>, <a href="xfs_bmap.8.html">xfs_bmap(8)</a>, <a href="xfs_db.8.html">xfs_db(8)</a>, <a href="../man5/xfs.5.html">xfs(5)</a>,
       <a href="../man2/fdatasync.2.html">fdatasync(2)</a>, <a href="../man2/fstat.2.html">fstat(2)</a>, <a href="../man2/fstatfs.2.html">fstatfs(2)</a>, <a href="../man2/fsync.2.html">fsync(2)</a>, <a href="../man2/ftruncate.2.html">ftruncate(2)</a>,
       <a href="../man3/futimens.3.html">futimens(3)</a>, <a href="../man2/mmap.2.html">mmap(2)</a>, <a href="../man2/msync.2.html">msync(2)</a>, <a href="../man2/open.2.html">open(2)</a>, <a href="../man2/pread.2.html">pread(2)</a>, <a href="../man2/pwrite.2.html">pwrite(2)</a>,
       <a href="../man3/readdir.3.html">readdir(3)</a>, <a href="dmsetup.8.html">dmsetup(8)</a>.
</pre> <h2>
COLOPHON </h2>
<pre>
       This page is part of the <i>xfsprogs</i> (utilities for XFS filesystems)
       project.  Information about the project can be found at 
       âŸ¨<a href="http://xfs.org/">http://xfs.org/</a>âŸ©.  If you have a bug report for this manual page,
       send it to linux-xfs@vger.kernel.org.  This page was obtained
       from the project's upstream Git repository
       âŸ¨<a href="https://git.kernel.org/pub/scm/fs/xfs/xfsprogs-dev.git">https://git.kernel.org/pub/scm/fs/xfs/xfsprogs-dev.git</a>âŸ© on
       2024-06-14.  (At that time, the date of the most recent commit
       that was found in the repository was 2024-05-17.)  If you
       discover any rendering problems in this HTML version of the page,
       or you believe there is a better or more up-to-date source for
       the page, or you have corrections or improvements to the
       information in this COLOPHON (which is <i>not</i> part of the original
       manual page), send a mail to man-pages@man7.org

<span class="footline">                                                               <i>xfs_io</i>(8)</span>
</pre>  <p>Pages that refer to this page: <a href="xfs_fsr.8.html">xfs_fsr(8)</a> </p> <hr>         <div class="_attribution">
  <p class="_attribution-p">
    ...<br>
    <a href="https://man7.org/linux/man-pages/man8/xfs_io.8.html" class="_attribution-link">https://man7.org/linux/man-pages/man8/xfs_io.8.html</a>
  </p>
</div>
