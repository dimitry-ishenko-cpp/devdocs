<h1>xfs_spaceman(8) — Linux manual page</h1>   <pre>
<span class="headline"><i>xfs_spaceman</i>(8)          System Manager's Manual         <i>xfs_spaceman</i>(8)</span>
</pre> <h2>
NAME </h2>
<pre>
       xfs_spaceman - show free space information about an XFS
       filesystem
</pre> <h2>
SYNOPSIS </h2>
<pre>
       <b>xfs_spaceman </b>[ <b>-c </b><i>cmd</i> ] <i>file</i>
       <b>xfs_spaceman -V</b>
</pre> <h2>
DESCRIPTION </h2>
<pre>
       <b>xfs_spaceman </b>reports and controls free space usage in an XFS
       filesystem.
</pre> <h2>
OPTIONS </h2>
<pre>
       <b>-c </b><i>cmd</i> <b>xfs_spaceman </b>commands may be run interactively (the
              default) or as arguments on the command line. Multiple <b>-c</b>
              arguments may be given. The commands are run in the
              sequence given, then the program exits.
</pre> <h2>
COMMANDS </h2>
<pre>
       <b>freesp [ -dgrs ] [-a agno]... [ -b | -e bsize | -h bsize | -m</b>
       <b>factor ]</b>
              With no arguments, <b>freesp </b>shows a histogram of all free
              space extents in the filesystem.  The command takes the
              following options:

                 <b>-a agno</b>
                     Collect free space information from this allocation
                     group.  This option can be specified multiple times
                     to collect from multiple groups.

                 <b>-b  </b>This argument establishes that the histogram bin
                     sizes are successive powers of two.  This is the
                     default, and is mutually exclusive with the <b>-e</b>, <b>-h</b>,
                     and <b>-m </b>options.

                 <b>-d  </b>Print debugging information such as the raw free
                     space extent information.

                 <b>-g  </b>Print the free space block and extent counts for
                     each AG.

                 <b>-e bsize</b>
                     Set all histogram bin sizes to a specific value.
                     This option is mutually exclusive with the <b>-b</b>, <b>-h</b>,
                     and <b>-m </b>options.

                 <b>-h bsize</b>
                     Create a histogram bin with a lower bound of this
                     value.  The upper bound of this bin will be one
                     less than the lower bound of the next highest
                     histogram bin.  This option can be given multiple
                     times to control the exact bin sizes.  This option
                     is mutually exclusive with the <b>-b</b>, <b>-e</b>, and <b>-m</b>
                     options.

                 <b>-m factor</b>
                     Create each histogram bin with a size that is this
                     many times the size of the prvious bin created.
                     This option is mutually exclusive with the <b>-b</b>, <b>-e</b>,
                     and <b>-h </b>options.

                 <b>-r  </b>Query the realtime device for free space
                     information.

                 <b>-s  </b>Display a summary of the free space information
                     found.

       <b>info   </b>Displays selected geometry information about the
              filesystem.  The opened file must be a mount point of a
              XFS filesystem.  The output will have the same format that
              <a href="xfs_info.8.html">xfs_info(8)</a> prints when querying a filesystem.

       <b>health [ -a agno] [ -c ] [ -f ] [ -i inum ] [ -q ] [ paths ]</b>
              Reports the health of the given group of filesystem
              metadata.
                 <b>-a agno</b>
                     Report on the health of the given allocation group.
                 <b>-c  </b>Scan all inodes in the filesystem and report each
                     file's health status.  If the <b>-a </b>option is given,
                     scan only the inodes in that AG.
                 <b>-f  </b>Report on the health of metadata that affect the
                     entire filesystem.
                 <b>-i inum</b>
                     Report on the health of a specific inode.
                 <b>-q  </b>Report only unhealthy metadata.
                 <b>paths</b>
                     Report on the health of the files at the given
                     path.

       <b>help [ </b>command <b>]</b>
              Display a brief description of one or all commands.

       <b>prealloc [ -u id ] [ -g id ] [ -p id ] [ -m minlen ] [ -s ]</b>
              Removes speculative preallocation.  If no <b>-u</b>, <b>-g</b>, or <b>-p</b>
              options are given, this command acts on all files.  The
              command takes the following options:

                 <b>-u uid</b>
                     Clear all speculative preallocations for files with
                     this user id.  This option can be given in
                     combination with the <b>-g  and  -p </b>options.

                 <b>-g gid</b>
                     Clear all speculative preallocations for files with
                     this group id.  This option can be given in
                     combination with the <b>-u  and  -p </b>options.

                 <b>-p pid</b>
                     Clear all speculative preallocations for files with
                     this project id.  This option can be given in
                     combination with the <b>-u  and  -g </b>options.

                 <b>-m minlen</b>
                     Ignore all files smaller than this size.  Units can
                     be supplied for this argument.

                 <b>-s  </b>Wait for removal to complete.

       <b>print  </b>Display a list of all open files.

       <b>quit   </b>Exit <b>xfs_spaceman</b>.

       <b>trim ( -a agno | -f | </b><i>offset length</i> <b>) [ -m minlen ]</b>
              Instructs the underlying storage device to release all
              storage that may be backing free space in the filesystem.
              The command takes the following options: (One of <b>-a</b>, <b>-f</b>,
              or the <i>offset</i>/<i>length</i> pair are required.)

                 <b>-a agno</b>
                     Trim free space extents in the given allocation
                     group.  This option is mutually exclusive with the
                     <b>-f </b>option and the <i>offset</i>/<i>length</i> options.

                 <b>-f  </b>Trim all free space in the filesystem.  This option
                     is mutually exclusive with the <b>-a </b>option and the
                     <i>offset</i>/<i>length</i> options.

                 <i>option</i>, <i>length</i>
                     Trim all free space within the physical range
                     defined by the <i>offset</i> and <i>length</i> from this
                     filesystem.  Units can be appended to these
                     arguments.  This option is mutually exclusive with
                     the <b>-a </b>and <b>-f </b>options.

                 <b>-m minlen</b>
                     Do not trim free space extents shorter than this
                     length.  Units can be appended to this argument.
</pre> <h2>
COLOPHON </h2>
<pre>
       This page is part of the <i>xfsprogs</i> (utilities for XFS filesystems)
       project.  Information about the project can be found at 
       ⟨<a href="http://xfs.org/">http://xfs.org/</a>⟩.  If you have a bug report for this manual page,
       send it to linux-xfs@vger.kernel.org.  This page was obtained
       from the project's upstream Git repository
       ⟨<a href="https://git.kernel.org/pub/scm/fs/xfs/xfsprogs-dev.git">https://git.kernel.org/pub/scm/fs/xfs/xfsprogs-dev.git</a>⟩ on
       2024-06-14.  (At that time, the date of the most recent commit
       that was found in the repository was 2024-05-17.)  If you
       discover any rendering problems in this HTML version of the page,
       or you believe there is a better or more up-to-date source for
       the page, or you have corrections or improvements to the
       information in this COLOPHON (which is <i>not</i> part of the original
       manual page), send a mail to man-pages@man7.org

<span class="footline">                                                         <i>xfs_spaceman</i>(8)</span>
</pre>          <div class="_attribution">
  <p class="_attribution-p">
    ...<br>
    <a href="https://man7.org/linux/man-pages/man8/xfs_spaceman.8.html" class="_attribution-link">https://man7.org/linux/man-pages/man8/xfs_spaceman.8.html</a>
  </p>
</div>
