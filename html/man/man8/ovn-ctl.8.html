<h1>ovn-ctl(8) — Linux manual page</h1>   <pre>
<span class="headline"><i>ovn-ctl</i>(8)                     OVN Manual                     <i>ovn-ctl</i>(8)</span>
</pre> <h2>
NAME </h2>
<pre>
       ovn-ctl - Open Virtual Network northbound daemon lifecycle
       utility
</pre> <h2>
SYNOPSIS </h2>
<pre>
       <b>ovn-ctl </b>[<i>options</i>] <i>command</i> [-- <i>extra_args</i>]
</pre> <h2>
DESCRIPTION </h2>
<pre>
       This program is intended to be invoked internally by Open Virtual
       Network startup scripts. System administrators should not
       normally invoke it directly.
</pre> <h2>
COMMANDS </h2>
<pre>
       <b>start_northd</b>
       <b>start_controller</b>
       <b>start_controller_vtep</b>
       <b>start_ic</b>
       <b>stop_northd</b>
       <b>stop_controller</b>
       <b>stop_controller_vtep</b>
       <b>stop_ic</b>
       <b>restart_northd</b>
       <b>restart_controller</b>
       <b>restart_controller_vtep</b>
       <b>restart_ic</b>
       <b>promote_ovnnb</b>
       <b>promote_ovnsb</b>
       <b>demote_ovnnb</b>
       <b>demote_ovnsb</b>
       <b>status_ovnnb</b>
       <b>status_ovnsb</b>
       <b>start_ovsdb</b>
       <b>start_nb_ovsdb</b>
       <b>start_sb_ovsdb</b>
       <b>stop_ovsdb</b>
       <b>stop_nb_ovsdb</b>
       <b>stop_sb_ovsdb</b>
       <b>restart_ovsdb</b>
       <b>run_nb_ovsdb</b>
       <b>run_sb_ovsdb</b>
       <b>promote_ic_nb</b>
       <b>promote_ic_sb</b>
       <b>demote_ic_nb</b>
       <b>demote_ic_sb</b>
       <b>status_ic_nb</b>
       <b>status_ic_sb</b>
       <b>start_ic_ovsdb</b>
       <b>start_ic_nb_ovsdb</b>
       <b>start_ic_sb_ovsdb</b>
       <b>stop_ic_ovsdb</b>
       <b>stop_ic_nb_ovsdb</b>
       <b>stop_ic_sb_ovsdb</b>
       <b>restart_ic_ovsdb</b>
       <b>run_ic_nb_ovsdb</b>
       <b>run_ic_sb_ovsdb</b>
</pre> <h2>
OPTIONS </h2>
<pre>
       <b>--ovn-northd-priority=</b><i>NICE</i>

       <b>--ovn-northd-wrapper=</b><i>WRAPPER</i>

       <b>--ovn-controller-priority=</b><i>NICE</i>

       <b>--ovn-controller-wrapper=</b><i>WRAPPER</i>

       <b>--ovn-ic-priority=</b><i>NICE</i>

       <b>--ovn-ic-wrapper=</b><i>WRAPPER</i>

       <b>--ovsdb-nb-wrapper=</b><i>WRAPPER</i>

       <b>--ovsdb-sb-wrapper=</b><i>WRAPPER</i>

       <b>--ovn-user=</b><i>USER:GROUP</i>

       <b>-h </b>| <b>--help</b>
</pre> <h2>
FILE LOCATION OPTIONS </h2>
<pre>
       <b>--db-sock=</b><i>SOCKET</i>

       <b>--db-nb-file=</b><i>FILE</i>

       <b>--db-sb-file=</b><i>FILE</i>

       <b>--db-nb-schema=</b><i>FILE</i>

       <b>--db-sb-schema=</b><i>FILE</i>

       <b>--db-sb-create-insecure-remote=</b><i>yes|no</i>

       <b>--db-nb-create-insecure-remote=</b><i>yes|no</i>

       <b>--db-ic-nb-file=</b><i>FILE</i>

       <b>--db-ic-sb-file=</b><i>FILE</i>

       <b>--db-ic-nb-schema=</b><i>FILE</i>

       <b>--db-ic-sb-schema=</b><i>FILE</i>

       <b>--db-ic-sb-create-insecure-remote=</b><i>yes|no</i>

       <b>--db-ic-nb-create-insecure-remote=</b><i>yes|no</i>

       <b>--db-nb-config-file=</b><i>FILE</i>

       <b>--db-sb-config-file=</b><i>FILE</i>

       <b>--db-ic-nb-config-file=</b><i>FILE</i>

       <b>--db-ic-sb-config-file=</b><i>FILE</i>

       <b>--db-sb-relay-config-file=</b><i>FILE</i>

       <b>--ovn-controller-ssl-key=</b><i>KEY</i>

       <b>--ovn-controller-ssl-cert=</b><i>CERT</i>

       <b>--ovn-controller-ssl-ca-cert=</b><i>CERT</i>

       <b>--ovn-controller-ssl-bootstrap-ca-cert=</b><i>CERT</i>
</pre> <h2>
PROTOCOL AND CIPHER OPTIONS </h2>
<pre>
       <b>--ovn-controller-ssl-protocols=</b><i>PROTOCOLS</i>

       <b>--ovn-ic-ssl-protocols=</b><i>PROTOCOLS</i>

       <b>--ovn-northd-ssl-protocols=</b><i>PROTOCOLS</i>

       <b>--ovn-nb-db-ssl-protocols=</b><i>PROTOCOLS</i>

       <b>--ovn-sb-db-ssl-protocols=</b><i>PROTOCOLS</i>

       <b>--ovn-ic-nb-db-ssl-protocols=</b><i>PROTOCOLS</i>

       <b>--ovn-ic-sb-db-ssl-protocols=</b><i>PROTOCOLS</i>

       <b>--ovn-controller-ssl-ciphers=</b><i>CIPHERS</i>

       <b>--ovn-ic-ssl-ciphers=</b><i>CIPHERS</i>

       <b>--ovn-northd-ssl-ciphers=</b><i>CIPHERS</i>

       <b>--ovn-nb-db-ssl-ciphers=</b><i>CIPHERS</i>

       <b>--ovn-sb-db-ssl-ciphers=</b><i>CIPHERS</i>

       <b>--ovn-ic-nb-db-ssl-ciphers=</b><i>CIPHERS</i>

       <b>--ovn-ic-sb-db-ssl-ciphers=</b><i>CIPHERS</i>
</pre> <h2>
ADDRESS AND PORT OPTIONS </h2>
<pre>
       <b>--db-nb-sync-from-addr=</b><i>IP ADDRESS</i>

       <b>--db-nb-sync-from-port=</b><i>PORT NUMBER</i>

       <b>--db-nb-sync-from-proto=</b><i>PROTO</i>

       <b>--db-sb-sync-from-addr=</b><i>IP ADDRESS</i>

       <b>--db-sb-sync-from-port=</b><i>PORT NUMBER</i>

       <b>--db-sb-sync-from-proto=</b><i>PROTO</i>

       <b>--db-ic-nb-sync-from-addr=</b><i>IP ADDRESS</i>

       <b>--db-ic-nb-sync-from-port=</b><i>PORT NUMBER</i>

       <b>--db-ic-nb-sync-from-proto=</b><i>PROTO</i>

       <b>--db-ic-sb-sync-from-addr=</b><i>IP ADDRESS</i>

       <b>--db-ic-sb-sync-from-port=</b><i>PORT NUMBER</i>

       <b>--db-ic-sb-sync-from-proto=</b><i>PROTO</i>

        <b>--ovn-northd-nb-db=</b><i>PROTO</i><b>:</b><i>IP ADDRESS</i><b>: </b><i>PORT</i><b>..</b>

        <b>--ovn-northd-sb-db=</b><i>PROTO</i><b>:</b><i>IP ADDRESS</i><b>: </b><i>PORT</i><b>..</b>

        <b>--ovn-ic-nb-db=</b><i>PROTO</i><b>:</b><i>IP ADDRESS</i><b>: </b><i>PORT</i><b>..</b>

        <b>--ovn-ic-sb-db=</b><i>PROTO</i><b>:</b><i>IP ADDRESS</i><b>: </b><i>PORT</i><b>..</b>
</pre> <h2>
CLUSTERING OPTIONS </h2>
<pre>
       <b>--db-nb-cluster-local-addr=</b><i>IP ADDRESS</i>

       <b>--db-nb-cluster-local-port=</b><i>PORT NUMBER</i>

       <b>--db-nb-cluster-local-proto=</b><i>PROTO (tcp/ssl)</i>

       <b>--db-nb-cluster-remote-addr=</b><i>IP ADDRESS</i>

       <b>--db-nb-cluster-remote-port=</b><i>PORT NUMBER</i>

       <b>--db-nb-cluster-remote-proto=</b><i>PROTO (tcp/ssl)</i>

       <b>--db-nb-election-timer=</b><i>Timeout in milliseconds</i>

       <b>--db-sb-cluster-local-addr=</b><i>IP ADDRESS</i>

       <b>--db-sb-cluster-local-port=</b><i>PORT NUMBER</i>

       <b>--db-sb-cluster-local-proto=</b><i>PROTO (tcp/ssl)</i>

       <b>--db-sb-cluster-remote-addr=</b><i>IP ADDRESS</i>

       <b>--db-sb-cluster-remote-port=</b><i>PORT NUMBER</i>

       <b>--db-sb-cluster-remote-proto=</b><i>PROTO (tcp/ssl)</i>

       <b>--db-sb-election-timer=</b><i>Timeout in milliseconds</i>

       <b>--db-ic-nb-cluster-local-addr=</b><i>IP ADDRESS</i>

       <b>--db-ic-nb-cluster-local-port=</b><i>PORT NUMBER</i>

       <b>--db-ic-nb-cluster-local-proto=</b><i>PROTO (tcp/ssl)</i>

       <b>--db-ic-nb-cluster-remote-addr=</b><i>IP ADDRESS</i>

       <b>--db-ic-nb-cluster-remote-port=</b><i>PORT NUMBER</i>

       <b>--db-ic-nb-cluster-remote-proto=</b><i>PROTO (tcp/ssl)</i>

       <b>--db-ic-sb-cluster-local-addr=</b><i>IP ADDRESS</i>

       <b>--db-ic-sb-cluster-local-port=</b><i>PORT NUMBER</i>

       <b>--db-ic-sb-cluster-local-proto=</b><i>PROTO (tcp/ssl)</i>

       <b>--db-ic-sb-cluster-remote-addr=</b><i>IP ADDRESS</i>

       <b>--db-ic-sb-cluster-remote-port=</b><i>PORT NUMBER</i>

       <b>--db-ic-sb-cluster-remote-proto=</b><i>PROTO (tcp/ssl)</i>

       <b>--db-cluster-schema-upgrade=</b><i>yes|no</i>
</pre> <h2>
PROBE INTERVAL OPTIONS </h2>
<pre>
       <b>--db-nb-probe-interval-to-active=</b><i>Time in milliseconds</i>

       <b>--db-sb-probe-interval-to-active=</b><i>Time in milliseconds</i>
</pre> <h2>
EXTRA OPTIONS </h2>
<pre>
       Any options after ’-’ will be passed on to the binary run by
       <i>command</i> with the exception of start_northd, which can have
       options specified in ovn-northd-db-params.conf. Any <i>extra_args</i>
       passed to start_northd will be passed to the ovsdb-servers if
       <b>--ovn-manage-ovsdb=yes</b>
</pre> <h2>
CONFIGURATION FILES </h2>
<pre>
       Following are the optional configuration files. If present, it
       should be located in the etc dir

   <b>ovnnb-active.conf</b>
       If present, this file should hold the url to connect to the
       active Northbound DB server

       <b>tcp:x.x.x.x:6641</b>

   <b>ovnsb-active.conf</b>
       If present, this file should hold the url to connect to the
       active Southbound DB server

       <b>tcp:x.x.x.x:6642</b>

   <b>ovn-northd-db-params.conf</b>
       If present, start_northd will not start the DB server even if
       <b>--ovn-manage-ovsdb=yes</b>. This file should hold the database url
       parameters to be passed to ovn-northd.

       <b>--ovnnb-db=tcp:x.x.x.x:6641 --ovnsb-db=tcp:x.x.x.x:6642</b>

   <b>ic-nb-active.conf</b>
       If present, this file should hold the url to connect to the
       active Interconnection Northbound DB server

       <b>tcp:x.x.x.x:6645</b>

   <b>ic-sb-active.conf</b>
       If present, this file should hold the url to connect to the
       active Interconnection Southbound DB server

       <b>tcp:x.x.x.x:6646</b>

   <b>ovn-ic-db-params.conf</b>
       If present, this file should hold the database url parameters to
       be passed to ovn-ic.

       <b>--ic-nb-db=tcp:x.x.x.x:6645 --ic-sb-db=tcp:x.x.x.x:6646</b>
</pre> <h2>
RUNNING OVN DB SERVERS WITHOUT DETACHING </h2>
<pre>
       <b># ovn-ctl run_nb_ovsdb</b>

       This command runs the OVN nb ovsdb-server without passing the
       <b>detach </b>option, making it to block until ovsdb-server exits. This
       command will be useful for starting the OVN nb ovsdb-server in a
       container.

       <b># ovn-ctl run_sb_ovsdb</b>

       This command runs the OVN sb ovsdb-server without passing the
       <b>detach </b>option, making it to block until ovsdb-server exits. This
       command will be useful for starting the OVN sb ovsdb-server in a
       container.

       <b># ovn-ctl run_ic_nb_ovsdb</b>

       This command runs the OVN IC-NB ovsdb-server without passing the
       <b>detach </b>option, making it to block until ovsdb-server exits. This
       command will be useful for starting the OVN IC-NB ovsdb-server in
       a container.

       <b># ovn-ctl run_ic_sb_ovsdb</b>

       This command runs the OVN IC-SB ovsdb-server without passing the
       <b>detach </b>option, making it to block until ovsdb-server exits. This
       command will be useful for starting the OVN IC-SB ovsdb-server in
       a container.
</pre> <h2>
EXAMPLE USAGE </h2>
<pre>
   <b>Run ovn-controller on a host already running OVS</b>
       <b># ovn-ctl start_controller</b>

   <b>Run ovn-northd on a host already running OVS</b>
       <b># ovn-ctl start_northd</b>

   <b>All-in-one OVS+OVN for testing</b>
       <b># ovs-ctl start --system-id="random"</b>

       <b># ovn-ctl start_northd</b>

       <b># ovn-ctl start_controller</b>

   <b>Promote and demote ovsdb servers</b>
       <b># ovn-ctl promote_ovnnb</b>

       <b># ovn-ctl promote_ovnsb</b>

       <b># ovn-ctl --db-nb-sync-from-addr=x.x.x.x</b>
       <b>--db-nb-sync-from-port=6641</b>
       <b>--db-nb-probe-interval-to-active=60000 demote_ovnnb</b>

       <b># ovn-ctl --db-sb-sync-from-addr=x.x.x.x</b>
       <b>--db-sb-sync-from-port=6642</b>
       <b>--db-sb-probe-interval-to-active=60000 demote_ovnsb</b>

   <b>Creating a clustered db on 3 nodes with IPs x.x.x.x, y.y.y.y and</b>
       <b>z.z.z.z</b>
     <i>Starting OVN ovsdb servers and ovn-northd on the node with IP</i>
     <i>x.x.x.x</i>

        <b># ovn-ctl --db-nb-addr=x.x.x.x</b>
       <b>--db-nb-create-insecure-remote=yes --db-sb-addr=x.x.x.x</b>
       <b>--db-sb-create-insecure-remote=yes</b>
       <b>--db-nb-cluster-local-addr=x.x.x.x</b>
       <b>--db-sb-cluster-local-addr=x.x.x.x</b>
       <b>--ovn-northd-nb-db=tcp:x.x.x.x:6641,tcp:y.y.y.y:6641,tcp:z.z.z.z:6641</b>
       <b>--ovn-northd-sb-db=tcp:x.x.x.x:6642,tcp:y.y.y.y:6642,tcp:z.z.z.z:6642</b>
       <b>start_northd</b>

     <i>Starting OVN ovsdb-servers and ovn-northd on the node with IP</i>
     <i>y.y.y.y and joining the cluster started at x.x.x.x</i>

        <b># ovn-ctl --db-nb-addr=y.y.y.y</b>
       <b>--db-nb-create-insecure-remote=yes --db-sb-addr=y.y.y.y</b>
       <b>--db-sb-create-insecure-remote=yes</b>
       <b>--db-nb-cluster-local-addr=y.y.y.y</b>
       <b>--db-sb-cluster-local-addr=y.y.y.y</b>
       <b>--db-nb-cluster-remote-addr=x.x.x.x</b>
       <b>--db-sb-cluster-remote-addr=x.x.x.x</b>
       <b>--ovn-northd-nb-db=tcp:x.x.x.x:6641,tcp:y.y.y.y:6641,tcp:z.z.z.z:6641</b>
       <b>--ovn-northd-sb-db=tcp:x.x.x.x:6642,tcp:y.y.y.y:6642,tcp:z.z.z.z:6642</b>
       <b>start_northd</b>

     <i>Starting OVN ovsdb-servers and ovn-northd on the node with IP</i>
     <i>z.z.z.z and joining the cluster started at x.x.x.x</i>

        <b># ovn-ctl --db-nb-addr=z.z.z.z</b>
       <b>--db-nb-create-insecure-remote=yes</b>
       <b>--db-nb-cluster-local-addr=z.z.z.z --db-sb-addr=z.z.z.z</b>
       <b>--db-sb-create-insecure-remote=yes</b>
       <b>--db-sb-cluster-local-addr=z.z.z.z</b>
       <b>--db-nb-cluster-remote-addr=x.x.x.x</b>
       <b>--db-sb-cluster-remote-addr=x.x.x.x</b>
       <b>--ovn-northd-nb-db=tcp:x.x.x.x:6641,tcp:y.y.y.y:6641,tcp:z.z.z.z:6641</b>
       <b>--ovn-northd-sb-db=tcp:x.x.x.x:6642,tcp:y.y.y.y:6642,tcp:z.z.z.z:6642</b>
       <b>start_northd</b>

   <b>Passing ssl keys when starting OVN dbs will supersede the default ssl</b>
       <b>values in db</b>
     <i>Starting standalone ovn db server passing SSL certificates</i>

        <b># ovn-ctl --ovn-nb-db-ssl-key=/etc/ovn/ovnnb-privkey.pem</b>
       <b>--ovn-nb-db-ssl-cert=/etc/ovn/ovnnb-cert.pem</b>
       <b>--ovn-nb-db-ssl-ca-cert=/etc/ovn/cacert.pem</b>
       <b>--ovn-sb-db-ssl-key=/etc/ovn/ovnsb-privkey.pem</b>
       <b>--ovn-sb-db-ssl-cert=/etc/ovn/ovnsb-cert.pem</b>
       <b>--ovn-sb-db-ssl-ca-cert=/etc/ovn/cacert.pem start_northd</b>

   <b>Avoiding automatic clustered OVN database schema upgrade</b>
       If you desire more control over clustered DB schema upgrade, you
       can opt-out of automatic on-start upgrade attempts with
       <b>--no-db-cluster-schema-upgrade</b>.

     <i>Start OVN NB and SB clustered databases on host with IP x.x.x.x</i>
     <i>without schema upgrade</i>

        <b># ovn-ctl start_nb_ovsdb --db-nb-cluster-local-addr=x.x.x.x</b>
       <b>--no-db-cluster-schema-upgrade # ovn-ctl start_sb_ovsdb</b>
       <b>--db-sb-cluster-local-addr=x.x.x.x --no-db-cluster-schema-upgrade</b>

     <i>Trigger clustered DB schema upgrade manually</i>

        <b># ovsdb-client convert unix:/var/run/ovn/ovnnb_db.sock</b>
       <b>/usr/local/share/ovn/ovn-nb.ovsschema # ovsdb-client convert</b>
       <b>unix:/var/run/ovn/ovnsb_db.sock</b>
       <b>/usr/local/share/ovn/ovn-sb.ovsschema</b>
</pre> <h2>
COLOPHON </h2>
<pre>
       This page is part of the <i>Open Virtual Network</i> (Daemons for Open
       vSwitch that translate virtual network configurations into
       OpenFlow) project.  Information about the project can be found at
       ⟨<a href="https://www.ovn.org/">https://www.ovn.org/</a>⟩.  If you have a bug report for this manual
       page, send it to bugs@openvswitch.org.  This page was obtained
       from the project's upstream Git repository
       ⟨<a href="https://github.com/ovn-org/ovn">https://github.com/ovn-org/ovn</a>⟩ on 2024-06-14.  (At that time,
       the date of the most recent commit that was found in the
       repository was 2024-06-12.)  If you discover any rendering
       problems in this HTML version of the page, or you believe there
       is a better or more up-to-date source for the page, or you have
       corrections or improvements to the information in this COLOPHON
       (which is <i>not</i> part of the original manual page), send a mail to
       man-pages@man7.org

<span class="footline">OVN 24.03.90                     ovn-ctl                      <i>ovn-ctl</i>(8)</span>
</pre>          <div class="_attribution">
  <p class="_attribution-p">
    ...<br>
    <a href="https://man7.org/linux/man-pages/man8/ovn-ctl.8.html" class="_attribution-link">https://man7.org/linux/man-pages/man8/ovn-ctl.8.html</a>
  </p>
</div>
