<h1>debhelper-compat-upgrade-checklist(7) — Linux manual page</h1>   <pre>
<span class="headline"><i>debhelper</i>(7)                    Debhelper                   <i>debhelper</i>(7)</span>
</pre> <h2>
NAME </h2>
<pre>
       debhelper-compat-upgrade-checklist - Upgrade checklist for
       supported debhelper compat levels
</pre> <h2>
SYNOPSIS </h2>
<pre>
       This document is an upgrade checklist of all the supported
       debhelper compat levels. It also lists all the supported
       debhelper compat levels.

       Information about how to declare the compat level is in
       "COMPATIBILITY LEVELS" in <a href="debhelper.7.html">debhelper(7)</a>.

       If you are upgrading from a (now) obsolete compat level, then
       please refer to <a href="debhelper-obsolete-compat.7.html">debhelper-obsolete-compat(7)</a>.
</pre> <h2>
DESCRIPTION </h2>
<pre>
   <b>Upgrade checklist for supported compatibility levels</b>
       These are the available compatibility levels:

       v15 This compatibility level is still open for development; use
           with caution.

           Changes from v14 are:

           -       The <b>dh_auto_install </b>tool no longer defaults to
                   <b>--destdir=debian/<i>package</i> </b>for source packages only
                   producing a single binary.  If this behaviour is
                   wanted, the package should explicitly activate the
                   <b>single-binary </b>dh addon (e.g., by adding <b>dh-sequence-</b>
                   <b>single-binary </b>to <b>Build-Depends</b>) or pass <b>--destdir </b>to
                   <b>dh_auto_install</b>.

                   The rationale for this change is to avoid "surprises"
                   when adding a second binary package later.
                   Previously, debhelper would silently change behaviour
                   often resulting in empty binary packages being
                   uploaded to the archive by mistake. With the new
                   behaviour, the <b>single-binary </b>addon will detect the
                   mismatch and warn the maintainer of what is about to
                   happen.

           -       It is now an error to use package-less versions of
                   debhelper configuration files when there are 2 or
                   more binary packages listed in <i>debian/control</i> in most
                   cases.  Legacy files should be renamed to
                   <i>debian/package.foo</i> (from <i>debian/foo</i>) where <i>package</i> is
                   the first binary package listed in <i>debian/control</i>.

                   The primary exception to this change are files such
                   as <i>debian/changelog</i>, <i>debian/NEWS</i>, and
                   <i>debian/copyright</i>, where the same file is used for all
                   packages by default.  These cases will remain
                   unchanged.

       v14 This compatibility level is still open for development; use
           with caution.

           Changes from v13 are:

           -       The <b>dh_installpam </b>tool will now install PAM
                   configuration files under <i>/usr/lib/pam.d/package</i>
                   instead of <i>/etc/pam.d/package</i>.

                   Please consider using the "rm_conffile" feature from
                   <a href="../man1/dh_installdeb.1.html">dh_installdeb(1)</a> to ensure the proper removal of
                   previous PAM files.

           -       Packages using the <b>dh </b>sequencer should be aware the
                   following changes:

                   -   The tool <b>dh_installsysusers </b>is now included in
                       the default sequence. This helper tool will
                       process systemd sysusers files.

                   -   The <b>dh_installsystemduser </b>tool will default to
                       enabling systemd user units, start them on
                       installation, restart them on upgrades and stop
                       them on uninstalling the package.

                   -   Use of the <b>dh_gconf </b>command in override and hook
                       targets now causes an error.  The <b>dh_gconf</b>
                       command has been a no-op for years and was
                       removed in debhelper 13.4.

                   -   The <b>dh_installalternatives </b>tool will now be run
                       after <b>dh_link </b>rather than after
                       <b>dh_installinitramfs </b>in the default <b>dh </b>sequence.

                   -   <i>This item only applies to source packages that</i>
                       <i>has exactly one <b>Package </b>stanza in debian/control.</i>

                       The <b>dh </b>sequencer will warn if the <b>single-binary</b>
                       addon is implicitly activated to warn maintainers
                       of the pending compat 15 change in
                       <b>dh_auto_install</b>.

                       Maintainers are urged to either explicitly
                       activate the <b>single-binary </b>addon to preserve the
                       existing behaviour (e.g., by adding <b>dh-sequence-</b>
                       <b>single-binary </b>to Build-Depends), or explicitly
                       passing <b>--destdir </b>to <b>dh_auto_install </b>if used and
                       then passing <b>--without single-binary </b>to <b>dh </b>(the
                       latter to silence the warning).

                       The rationale for this change is to avoid
                       "surprises" when adding a second binary package
                       later.  Previously, debhelper would silently
                       change behaviour often resulting in empty binary
                       packages being uploaded to the archive by
                       mistake. With the new behaviour, the <b>single-</b>
                       <b>binary </b>addon will detect the mismatch and warn
                       the maintainer of what is about to happen.

           -       The <b>dh_control </b>tool now automatically applies
                   relationship substvars to relevant fields. That means
                   that many substvars such as <b>${misc:Depends} </b>and
                   <b>${shlibs:Depends} </b>no longer need to be explicitly
                   mentioned in <i>debian/control</i>. This applies to any
                   substvar named after a field that the installed
                   version of <b>dpkg </b>considers a relation or dependency-
                   like field. At the time of writing, the list consists
                   of:

                   -   Pre-Depends

                   -   Depends

                   -   Recommends

                   -   Suggests

                   -   Enhances

                   -   Conflicts

                   -   Breaks

                   -   Replaces

                   -   Provides

                   -   Built-Using

                   -   Static-Built-Using

                   This means that <b>Depends: foo, ${misc:Depends} </b>in
                   <i>debian/control</i> can now be reduced to <b>Depends: foo </b>and
                   <b>Depends: ${misc:Depends}, ${shlibs:Depends} </b>can be
                   removed entirely as examples of how the feature
                   works.

                   Note that other substvars such as <b>${binary:Version}</b>
                   are unaffected by this change and should still be
                   used explicitly as necessary. Additionally, for
                   <b>Essential: yes </b>packages that manually promoted
                   <b>${shlibs:Depends} </b>into <b>Pre-Depends </b>field,
                   <b>dh_shlibdeps </b>will handle this automatically as well
                   (see the next compat item).

                   See
                   &lt;<a href="https://lists.debian.org/debian-devel/2024/02/msg00230.html">https://lists.debian.org/debian-devel/2024/02/msg00230.html</a>&gt;
                   for the details of this proposal. The summary in
                   &lt;<a href="https://lists.debian.org/debian-devel/2024/03/msg00030.html">https://lists.debian.org/debian-devel/2024/03/msg00030.html</a>&gt;
                   also covers when the substvars need tweaking.  The
                   most common case involves using the <b>-d </b>option from
                   <b>dpkg-shlibdeps </b>possibly via <b>dh_shlibdeps</b>.

                   Note: This change changes will cause false-positives
                   from an unfixed <b>lintian</b>. Please check
                   &lt;<a href="https://bugs.debian.org/1067653">https://bugs.debian.org/1067653</a>&gt; for <b>lintian </b>support
                   for this change.

           -       The <b>dh_shlibdeps </b>tool now defaults to using
                   <b>${shlibs:Pre-Depends} </b>for packages that are
                   <b>Essential: yes</b>.

                   Note due to the <b>dh_gencontrol </b>change above, any
                   package using <b>dh_gencontrol </b>will not have to do
                   anything for this migration.

           -       It now triggers a warning to use package-less
                   versions of debhelper configuration files when there
                   are 2 or more binary packages listed in
                   <i>debian/control</i> in most cases.  Legacy files should be
                   renamed to <i>debian/package.foo</i> (from <i>debian/foo</i>) where
                   <i>package</i> is the first binary package listed in
                   <i>debian/control</i>.

                   The primary exception to this change are files such
                   as <i>debian/changelog</i>, <i>debian/NEWS</i>, and
                   <i>debian/copyright</i>, where the same file is used for all
                   packages by default.  These cases will remain
                   unchanged.  The debhelper tool using the files will
                   trigger warnings on usage.

                   In compat 15 (or later), this is changed to an error.

           -       Packages using the <b>cmake </b>build system should be aware
                   of the following changes:

                   -   The <b>cmake </b>buildsystem now passes
                       <b>-DCMAKE_BUILD_RPATH_USE_ORIGIN=ON </b>to <b>cmake</b>(1) to
                       avoid some reproducibility issues.

                   -   The <b>cmake </b>build system now sets the <b>ASMFLAGS</b>
                       environment variable when it is unset and <b>ASFLAGS</b>
                       is present. The former name (<b>ASMFLAGS</b>) is the
                       name <b>cmake </b>expects, while the latter (<b>ASFLAGS</b>) is
                       the name that <a href="../man1/dpkg-buildpackage.1.html">dpkg-buildpackage(1)</a> uses.

                   -   The <b>cmake </b>build systems now use <b>cmake --install</b>
                       instead of <b>make install </b>in the <a href="../man1/dh_auto_install.1.html">dh_auto_install(1)</a>
                       call.  Any override of <b>dh_auto_install </b>that
                       passes extra parameters to the upstream build
                       system should be reviewed.

           -       Packages using the <b>meson </b>build system should be aware
                   of the following changes:

                   -   The <b>meson </b>build system now passes
                       <b>--auto-features=enabled </b>to <b>meson</b>.

                   -   The <b>meson+ninja </b>build system now use <b>meson</b>
                       <b>install </b>instead of <b>ninja install </b>in the
                       <a href="../man1/dh_auto_install.1.html">dh_auto_install(1)</a> call.  Any override of
                       <b>dh_auto_install </b>that passes extra parameters to
                       the upstream build system should be reviewed.

           -       The <i>debian/compat</i> file is no longer accepted as a
                   source for specifying the debhelper compat level. Put
                   the compat level in the <b>X-DH-Compat </b>field of the
                   source stanza of <i>debian/control</i>.

                   Note to avoid breaking packages that already migrated
                   to compat 14 immediately, while it was experimental
                   this change is first enforced when compat 14 becomes
                   stable.

           -       The tool <b>dh_installtmpfiles </b>now runs with --remove on
                   package removal, and --purge on package purge.
                   systemd v256 is required for the latter.

       v13 This is the recommended mode of operation.

           Changes from v12 are:

           -       The <b>meson+ninja </b>build system now uses <b>meson test</b>
                   instead of <b>ninja test </b>when running the test suite.
                   Any override of <b>dh_auto_test </b>that passes extra
                   parameters to upstream test runner should be reviewed
                   as <b>meson test </b>is not command line compatible with
                   <b>ninja test</b>.

           -       All debhelper like tools based on the official
                   debhelper library (including <b>dh </b>and the official <b>dh_*</b>
                   tools) no longer accepts abbreviated command
                   parameters.  At the same time, <b>dh </b>now optimizes out
                   calls to redundant <b>dh_* </b>helpers even when passed long
                   command line options.

           -       The ELF related debhelper tools (<b>dh_dwz</b>, <b>dh_strip</b>,
                   <b>dh_makeshlibs</b>, <b>dh_shlibdeps</b>) are now only run for
                   arch dependent packages by default (i.e. they are
                   excluded from <b>*-indep </b>targets and are passed <b>-a </b>by
                   default). If you need them for <b>*-indep </b>targets, you
                   can add an explicit Build-Depends on <b>dh-sequence-elf-</b>
                   <b>tools</b>.

           -       The third-party <b>gradle </b>build system (from <b>gradle-</b>
                   <b>debian-helper </b>package) now runs the upstream-provided
                   test suite automatically.  To suppress such behavior,
                   override <b>dh_auto_test</b>.

           -       The <b>dh_installman </b>tool now aborts if it sees
                   conflicting definitions of a manpage.  This typically
                   happens if the upstream build system is installing a
                   compressed version and the package lists an
                   uncompressed version of the manpage in
                   <i>debian/package.manpages</i>.  Often the easiest fix is to
                   remove the manpage from <i>debian/package.manpages</i>
                   (assuming both versions are identical).

           -       The <b>dh_auto_* </b>helpers now reset the environment
                   variables <b>HOME </b>and common <b>XDG_* </b>variable.  Please see
                   description of the environment variables in
                   "ENVIRONMENT" in <b>debhelper</b>(1) for how this is
                   handled.

                   <i>This feature changed between debhelper 13 and</i>
                   <i>debhelper 13.2.</i>

           -       The <b>dh </b>command will now error if an override or hook
                   target for an obsolete command are present in
                   <i>debian/rules</i> (e.g. <b>override_dh_systemd_enable:</b>).

           -       The <b>dh_missing </b>command will now default to
                   <b>--fail-missing</b>.  This can be reverted to a non-fatal
                   warning by explicitly passing <b>--list-missing </b>like it
                   was in compat 12.

                   If you do not want the warning either, please omit
                   the call to <b>dh_missing</b>.  If you use the <b>dh </b>command
                   sequencer, then you can do this by inserting an empty
                   override target in the <i>debian/rules</i> file of the
                   relevant package.  As an example:

                       # Disable dh_missing
                       override_dh_missing:

           -       The <b>dh </b>command sequencer now runs <b>dh_installtmpfiles</b>
                   in the default sequence.  The <b>dh_installtmpfiles</b>
                   takes over handling of tmpfiles.d configuration
                   files.  Related functionality in <b>dh_installsystemd </b>is
                   now disabled.

                   Note that <b>dh_installtmpfiles </b>responds to
                   <i>debian/package.tmpfiles</i> where <b>dh_installsystemd </b>used
                   a name without the trailing "s".

           -       Many <b>dh_* </b>tools now support limited variable
                   expansion via the <b>${foo} </b>syntax.  In many cases, this
                   can be used to reference paths that contain either
                   spaces or <a href="../man1/dpkg-architecture.1.html">dpkg-architecture(1)</a> values.  While this
                   can reduce the need for <b>dh-exec</b>(1) in some cases, it
                   is <b>not </b>a replacement <b>dh-exec</b>(1) in general.  If you
                   need filtering, renaming, etc., the package will
                   still need <b>dh-exec</b>(1).

                   Please see "Substitutions in debhelper config files"
                   for syntax and available substitution variables.  To
                   <b>dh_* </b>tool writers, substitution expansion occurs as a
                   part of the <b>filearray </b>and <b>filedoublearray </b>functions.

           -       The <b>dh </b>command sequencer will now skip all hook and
                   override targets for <b>dh_auto_test</b>, <b>dh_dwz </b>and
                   <b>dh_strip </b>when <b>DEB_BUILD_OPTIONS </b>lists the relevant
                   <b>nocheck </b>/ <b>nostrip </b>options.

                   Any package relying on these targets to always be run
                   should instead move relevant logic out of those
                   targets.  E.g. non-test related packaging code from
                   <b>override_dh_auto_test </b>would have to be moved to
                   <b>execute_after_dh_auto_build </b>or
                   <b>execute_before_dh_auto_install</b>.

           -       The <b>cmake </b>buildsystem now passes
                   <b>-DCMAKE_SKIP_INSTALL_ALL_DEPENDENCY=ON </b>to <b>cmake</b>(1) to
                   speed up automatic installation process. If for some
                   reason you need previous behavior, override the flag:

                       dh_auto_configure -- -DCMAKE_SKIP_INSTALL_ALL_DEPENDENCY=OFF ...

       v12 Changes from v11 are:

           -       The <b>dh_makeshlibs </b>tool now generates shlibs files
                   with versioned dependency by default.  This means
                   that <b>-VUpstream-Version </b>(a.k.a. <b>-V</b>) is now the
                   default.

                   If an unversioned dependency in the shlibs file is
                   wanted, this can be obtained by passing <b>-VNone</b>
                   instead.  However, please see <a href="../man1/dh_makeshlibs.1.html">dh_makeshlibs(1)</a> for
                   the caveat of unversioned dependencies.

           -       The <b>-s </b>(<b>--same-arch</b>) option is removed.  Please use
                   <b>-a </b>(<b>--arch</b>) instead.

           -       Invoking <b>dh_clean -k </b>now causes an error instead of a
                   deprecation warning.

           -       The <b>--no-restart-on-upgrade </b>option in <b>dh_installinit</b>
                   has been removed.  Please use the new name
                   <b>--no-stop-on-upgrade</b>

           -       There was a bug in the <b>doit </b>(and similar) functions
                   from Debian::Debhelper::Dh_Lib that made them spawn a
                   shell in one particular circumstance.  This bug is
                   now removed and will cause helpers that rely on the
                   bug to fail with a "command not found"-error.

           -       The <b>--list-missing </b>and <b>--fail-missing </b>in <b>dh_install</b>
                   has been removed.  Please use <b>dh_missing </b>and its
                   corresponding options, which can also see the files
                   installed by other helpers.

           -       The <b>dh_installinit </b>helper no longer installs
                   configuration for the upstart init system.  Instead,
                   it will abort the build if it finds an old upstart
                   configuration file.  The error is there to remind the
                   package maintainer to ensure the proper removal of
                   the conffiles shipped in previous versions of the
                   package (if any).

           -       The <b>dh_installdeb </b>tool will do basic validation of
                   some <a href="../man1/dpkg-maintscript-helper.1.html">dpkg-maintscript-helper(1)</a> commands and will
                   error out if the commands appear to be invalid.

           -       The <b>dh_missing </b>tool will now default to
                   <b>--list-missing</b>.

           -       The <b>dh_makeshlibs </b>tool will now only pass libraries
                   to <a href="../man1/dpkg-gensymbols.1.html">dpkg-gensymbols(1)</a> if the ELF binary has a SONAME
                   (containing ".so").

           -       The <b>dh_compress </b>tool no longer compresses examples
                   (i.e. anything installed in
                   <i>&lt;/usr/share/doc/package/examples</i>&gt;.)

           -       The standard sequence in <b>dh </b>now includes <b>dh_dwz </b>and
                   <b>dh_installinitramfs </b>by default.  This makes the <b>dwz</b>
                   and <b>installinitramfs </b>sequences obsolete and they will
                   now fail with an error.  If you want to skip these
                   commands, then please insert an empty override target
                   for them in <i>debian/rules</i> (e.g. <i>override_dh_dwz:</i>)

           -       The build systems <b>meson </b>and <b>autoconf </b>no longer
                   explicitly set the <b>--libexecdir </b>variable and thus
                   relies on the build system default - which should be
                   <b>/usr/libexec </b>(per FHS 3.0, adopted in Debian Policy
                   4.1.5).

                   If a particular upstream package does not use the
                   correct default, the parameter can often be passed
                   manually via <a href="../man1/dh_auto_configure.1.html">dh_auto_configure(1)</a>.  E.g.  via the
                   following example:

                       override_dh_auto_configure:
                           dh_auto_configure -- --libexecdir=/usr/libexec

                   Note the <b>-- </b>before the <b>--libexecdir </b>parameter.

           -       <b>Retroactively removed in debhelper/13.5</b>:

                   The <b>dh_installdeb </b>tool would no longer installs the
                   maintainer provided <i>conffiles</i> file as it was deemed
                   unnecessary.  However, the <b>remove-on-upgrade </b>from
                   dpkg/1.20 made the file relevant again and
                   <b>dh_installdeb </b>now installs it again in compat levels
                   12+.

           -       The <b>dh_installsystemd </b>tool no longer relies on
                   <b>dh_installinit </b>for handling systemd services that
                   have a sysvinit alternative.  Both tools must now be
                   used in such a case to ensure the service is properly
                   started under both sysvinit and systemd.

                   If you have an override for <b>dh_installinit </b>(e.g. to
                   call it with <b>--no-start</b>) then you will probably need
                   one for <b>dh_installsystemd </b>as well now.

                   This change makes <b>dh_installinit </b>inject a
                   <i>misc:Pre-Depends</i> for <b>init-system-helpers (&gt;= 1.54~)</b>.
                   Please ensure that the package lists
                   <b>${misc:Pre-Depends} </b>in its <b>Pre-Depends </b>field before
                   upgrading to compat 12.

           -       The third-party <b>dh_golang </b>tool (from <b>dh-golang</b>
                   package) now defaults on honoring <b>DH_GOLANG_EXCLUDES</b>
                   variable for source installation in -dev packages and
                   not only during the building process. Please set
                   <b>DH_GOLANG_EXCLUDES_ALL </b>to false to revert to the
                   previous behaviour. See
                   <b>Debian::Debhelper::Buildsystem::golang(3pm) </b>for
                   details and examples.

           -       <b>dh_installsystemduser </b>is now included in the <b>dh</b>
                   standard sequence by default.

           -       The <b>python-distutils </b>buildsystem is now removed.
                   Please use the third-party build system <b>pybuild</b>
                   instead.

       v11 This mode is discouraged.

           The compat 11 is discouraged for new packages as it suffers
           from feature interaction between dh_installinit and
           dh_installsystemd causing services to not run correctly in
           some cases.  Please consider using compatibility mode 10 or
           12 instead.  More details about the issue are available in
           Debian#887904 and
           &lt;<a href="https://lists.debian.org/debian-release/2019/04/msg01442.html">https://lists.debian.org/debian-release/2019/04/msg01442.html</a>&gt;.

           Changes from v10 are:

           -       <b>dh_installinit </b>no longer installs <i>service</i> or <i>tmpfile</i>
                   files, nor generates maintainer scripts for those
                   files.  Please use the new <b>dh_installsystemd </b>helper.

           -       The <b>dh_systemd_enable </b>and <b>dh_systemd_start </b>helpers
                   have been replaced by the new <b>dh_installsystemd</b>
                   helper.  For the same reason, the <b>systemd </b>sequence
                   for <b>dh </b>has also been removed.  If you need to disable
                   the <b>dh_installsystemd </b>helper tool, please use an
                   empty override target.

                   Please note that the <b>dh_installsystemd </b>tool has a
                   slightly different behaviour in some cases (e.g. when
                   using the <b>--name </b>parameter).

           -       <b>dh_installdirs </b>no longer creates debian/<i>package</i>
                   directories unless explicitly requested (or it has to
                   create a subdirectory in it).

                   The vast majority of all packages will be unaffected
                   by this change.

           -       The <b>makefile </b>buildsystem now passes <b>INSTALL="install</b>
                   <b>--strip-program=true" </b>to <a href="../man1/make.1.html">make(1)</a>.  Derivative
                   buildsystems (e.g. <b>configure </b>or <b>cmake</b>) are unaffected
                   by this change.

           -       The <b>autoconf </b>buildsystem now passes
                   <b>--runstatedir=/run </b>to <i>./configure</i>.

           -       The <b>cmake </b>buildsystem now passes
                   <b>-DCMAKE_INSTALL_RUNSTATEDIR=/run </b>to <b>cmake</b>(1).

           -       <b>dh_installman </b>will now prefer detecting the language
                   from the path name rather than the extension.

           -       <b>dh_auto_install </b>will now only create the destination
                   directory it needs.  Previously, it would create the
                   package build directory for all packages.  This will
                   not affect packages that only build with debhelper
                   commands, but it may expose bugs in commands not
                   included in debhelper.

           -       The helpers <b>dh_installdocs</b>, <b>dh_installexamples</b>,
                   <b>dh_installinfo</b>, and <b>dh_installman </b>now error out if
                   their config has a pattern that does not match
                   anything or reference a path that does not exist.

                   Known exceptions include building with the <b>nodoc</b>
                   profile, where the above tools will silently permit
                   failed matches where the patterns are used to specify
                   documentation.

           -       The helpers <b>dh_installdocs</b>, <b>dh_installexamples</b>,
                   <b>dh_installinfo</b>, and <b>dh_installman </b>now accept the
                   parameter <b>--sourcedir </b>with same meaning as
                   <b>dh_install</b>. Furthermore, they now also fall back to
                   <i>debian/tmp</i> like <b>dh_install</b>.

                   Migration note: A bug in debhelper 11 up to 11.1.5
                   made <b>dh_installinfo </b>incorrectly ignore <b>--sourcedir</b>.

           -       The <b>perl-makemaker </b>and <b>perl-build </b>build systems no
                   longer pass <b>-I. </b>to perl.  Packages that still need
                   this behaviour can emulate it by using the <b>PERL5LIB</b>
                   environment variable.  E.g. by adding <b>export</b>
                   <b>PERL5LIB=. </b>in their debian/rules file (or similar).

           -       The <b>PERL_USE_UNSAFE_INC </b>environment variable is no
                   longer set by <b>dh </b>or any of the <b>dh_auto_* </b>tools.  It
                   was added as a temporary work around to avoid a lot
                   of packages failing to build at the same time.

                   Note this item will eventually become obsolete as
                   upstream intends to drop support for the
                   <b>PERL_USE_UNSAFE_INC </b>environment variable.  When perl
                   drops support for it, then this variable will be
                   removed retroactively from existing compat levels as
                   well.

           -       The <b>dh_makeshlibs </b>helper will now exit with an error
                   if objdump returns a non-zero exit from analysing a
                   given file.

           -       The <b>dh_installdocs </b>and <b>dh_installexamples </b>tools may
                   now install <i>most</i> of the documentation in a different
                   path to comply with the recommendation from Debian
                   policy §12.3 (since version 3.9.7).

                   Note that if a given source package only contains a
                   single binary package in <i>debian/control</i> or none of
                   the packages are <i>-doc</i> packages, then this change is
                   not relevant for that source package and you can skip
                   to the next change.

                   By default, these tools will now attempt to determine
                   a "main package for the documentation" (called a <i>doc-</i>
                   <i>main-package</i> from here on) for every <i>-doc</i> package.
                   If they find such a <i>doc-main-package</i>, they will now
                   install the documentation into the path
                   <i>/usr/share/doc/doc-main-package</i> in the given doc
                   package.  I.e. the path can change but the
                   documentation is still shipped in the <i>-doc</i> package.

                   The <b>--doc-main-package </b>option can be used when the
                   auto-detection is insufficient or to reset the path
                   to its previous value if there is a reason to diverge
                   from Debian policy recommendation.

                   Some documentation will not be affected by this
                   change.  These exceptions include the copyright file,
                   changelog files, README.Debian, etc.  These files
                   will still be installed in the path
                   <i>/usr/share/doc/package</i>.

           -       The <b>dh_strip </b>and <b>dh_shlibdeps </b>tools no longer uses
                   filename patterns to determine which files to
                   process.  Instead, they open the file and look for an
                   ELF header to determine if a given file is an shared
                   object or an ELF executable.

                   This change may cause the tools to process more files
                   than previously.

       v10 Changes from v9 are:

           -       <b>dh_installinit </b>will no longer installs a file named
                   debian/<i>package</i> as an init script.

           -       <b>dh_installdocs </b>will error out if it detects links
                   created with --link-doc between packages of
                   architecture "all" and non-"all" as it breaks
                   binNMUs.

           -       <b>dh_installdeb </b>no longer installs a maintainer-
                   provided debian/<i>package</i>.shlibs file.  This is now
                   done by <b>dh_makeshlibs </b>instead.

           -       <b>dh_installwm </b>refuses to create a broken package if no
                   man page can be found (required to register for the
                   x-window-manager alternative).

           -       Debhelper will default to <b>--parallel </b>for all
                   buildsystems that support parallel building.  This
                   can be disabled by using either <b>--no-parallel </b>or
                   passing <b>--max-parallel </b>with a value of 1.

           -       The <b>dh </b>command will not accept any of the deprecated
                   "manual sequence control" parameters (<b>--before</b>,
                   <b>--after</b>, etc.).  Please use override targets instead.

                   <b>Retroactively applied to earlier compat levels</b>: <b>dh </b>no
                   longer accepts any of these since debhelper/12.4.

           -       The <b>dh </b>command will no longer use log files to track
                   which commands have been run.  The <b>dh </b>command <i>still</i>
                   keeps track of whether it already ran the "build"
                   sequence and skip it if it did.

                   The main effects of this are:

                   -   With this, it is now easier to debug the <i>install</i>
                       or/and <i>binary</i> sequences because they can now
                       trivially be re-run (without having to do a full
                       "clean and rebuild" cycle)

                   -   The main caveat is that <b>dh_* </b>now only keeps track
                       of what happened in a single override target.
                       When all the calls to a given <b>dh_cmd </b>command
                       happens in the same override target everything
                       will work as before.

                       Example of where it can go wrong:

                         override_dh_foo:
                           dh_foo -pmy-pkg

                         override_dh_bar:
                           dh_bar
                           dh_foo --remaining

                       In this case, the call to <b>dh_foo --remaining </b>will
                       <i>also</i> include <i>my-pkg</i>, since <b>dh_foo -pmy-pkg </b>was
                       run in a separate override target.  This issue is
                       not limited to <b>--remaining</b>, but also includes <b>-a</b>,
                       <b>-i</b>, etc.

           -       The <b>dh_installdeb </b>command now shell-escapes the lines
                   in the <i>maintscript</i> config file.  This was the
                   original intent but it did not work properly and
                   packages have begun to rely on the incomplete shell
                   escaping (e.g. quoting file names).

           -       The <b>dh_installinit </b>command now defaults to
                   <b>--restart-after-upgrade</b>.  For packages needing the
                   previous behaviour, please use
                   <b>--no-restart-after-upgrade</b>.

           -       The <b>autoreconf </b>sequence is now enabled by default.
                   Please pass <b>--without autoreconf </b>to <b>dh </b>if this is not
                   desirable for a given package

           -       The <b>systemd </b>sequence is now enabled by default.
                   Please pass <b>--without systemd </b>to <b>dh </b>if this is not
                   desirable for a given package.

           -       <b>Retroactively removed</b>: <b>dh </b>no longer creates the
                   package build directory when skipping running
                   debhelper commands. This will not affect packages
                   that only build with debhelper commands, but it may
                   expose bugs in commands not included in debhelper.

                   This compatibility feature had a bug since its
                   inception in debhelper/9.20130516 that made it fail
                   to apply in compat 9 and earlier.  As there has been
                   no reports of issues caused by this bug in those ~5
                   years, this item have been removed rather than fixed.

       v9  Changes from v8 are:

           -       Multiarch support. In particular, <b>dh_auto_configure</b>
                   passes multiarch directories to autoconf in --libdir
                   and --libexecdir.

           -       dh is aware of the usual dependencies between targets
                   in debian/rules.  So, "dh binary" will run any build,
                   build-arch, build-indep, install, etc targets that
                   exist in the rules file. There's no need to define an
                   explicit binary target with explicit dependencies on
                   the other targets.

           -       <b>dh_strip </b>compresses debugging symbol files to reduce
                   the installed size of -dbg packages.

           -       <b>dh_auto_configure </b>does not include the source package
                   name in --libexecdir when using autoconf.

           -       <b>dh </b>does not default to enabling --with=python-support

                   (Obsolete: As the <b>dh_pysupport </b>tool was removed from
                   Debian stretch.  Since debhelper/10.3, <b>dh </b>no longer
                   enables this sequence add-on regardless of compat
                   level)

           -       All of the <b>dh_auto_</b><i>*</i> debhelper programs and <b>dh </b>set
                   environment variables listed by <b>dpkg-buildflags</b>,
                   unless they are already set.

           -       <b>dh_auto_configure </b>passes <b>dpkg-buildflags </b>CFLAGS,
                   CPPFLAGS, and LDFLAGS to perl <i>Makefile.PL</i> and
                   <i>Build.PL</i>

           -       <b>dh_strip </b>puts separated debug symbols in a location
                   based on their build-id.

           -       Executable debhelper config files are run and their
                   output used as the configuration.

           This mode is deprecated.

       v8  Changes from v7 are:

           -       Commands will fail rather than warning when they are
                   passed unknown options.

           -       <b>dh_makeshlibs </b>will run <b>dpkg-gensymbols </b>on all shared
                   libraries that it generates shlibs files for. So <b>-X</b>
                   can be used to exclude libraries.  Also, libraries in
                   unusual locations that <b>dpkg-gensymbols </b>would not have
                   processed before will be passed to it, a behavior
                   change that can cause some packages to fail to build.

           -       <b>dh </b>requires the sequence to run be specified as the
                   first parameter, and any switches come after it. Ie,
                   use "<b>dh $@ --foo</b>", not "<b>dh --foo $@</b>".

           -       <b>dh_auto_</b><i>*</i> prefer to use Perl's <b>Module::Build </b>in
                   preference to <i>Makefile.PL</i>.

           This mode is deprecated.

       v7  This mode is deprecated.

           This is the lowest supported compatibility level.

           If you are upgrading from an earlier compatibility level,
           please review <a href="debhelper-obsolete-compat.7.html">debhelper-obsolete-compat(7)</a>.
</pre> <h2>
SEE ALSO </h2>
<pre>
       <a href="debhelper-obsolete-compat.7.html">debhelper-obsolete-compat(7)</a>
           Upgrading from a (now) obsolete compatibility level? This
           document covers the upgrade checklist up to the earliest
           supported level.

       <a href="debhelper.7.html">debhelper(7)</a>
           General information about the debhelper framework. This
           document also covers how to declare your chosen debhelper
           compat level.
</pre> <h2>
AUTHORS </h2>
<pre>
       Niels Thykier &lt;niels@thykier.net&gt;

       Joey Hess
</pre> <h2>
COLOPHON </h2>
<pre>
       This page is part of the <i>debhelper</i> (helper programs for
       debian/rules) project.  Information about the project can be
       found at [unknown -- if you know, please contact man-
       pages@man7.org] If you have a bug report for this manual page,
       send it to submit@bugs.debian.org.  This page was obtained from
       the project's upstream Git repository
       ⟨<a href="https://salsa.debian.org/debian/debhelper.git">https://salsa.debian.org/debian/debhelper.git</a>⟩ on 2024-06-14.
       (At that time, the date of the most recent commit that was found
       in the repository was 2024-06-09.)  If you discover any rendering
       problems in this HTML version of the page, or you believe there
       is a better or more up-to-date source for the page, or you have
       corrections or improvements to the information in this COLOPHON
       (which is <i>not</i> part of the original manual page), send a mail to
       man-pages@man7.org

<span class="footline">13.15.3                        2024-06-07                   <i>debhelper</i>(7)</span>
</pre>  <p>Pages that refer to this page: <a href="debhelper.7.html">debhelper(7)</a> </p> <hr>         <div class="_attribution">
  <p class="_attribution-p">
    ...<br>
    <a href="https://man7.org/linux/man-pages/man7/debhelper-compat-upgrade-checklist.7.html" class="_attribution-link">https://man7.org/linux/man-pages/man7/debhelper-compat-upgrade-checklist.7.html</a>
  </p>
</div>
