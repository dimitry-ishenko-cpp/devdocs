<h1>groff(7) — Linux manual page</h1>   <pre>
<span class="headline"><i>groff</i>(7)            Miscellaneous Information Manual            <i>groff</i>(7)</span>
</pre> <h2>
Name </h2>
<pre>
       groff - GNU <i>roff</i> language reference
</pre> <h2>
Description </h2>
<pre>
       <i>groff</i> is short for GNU <i>roff</i>, a free reimplementation of the AT&amp;T
       device-independent <i>troff</i> typesetting system.  See <i>roff</i>(7) for a
       survey of and background on <i>roff</i> systems.

       This document is intended as a reference.  The primary <i>groff</i>
       manual, <i>Groff: The GNU Implementation of troff</i>, by Trent A.
       Fisher and Werner Lemberg, is a better resource for learners,
       containing many examples and much discussion.  It is written in
       Texinfo; you can browse it interactively with “info groff”.
       Additional formats, including plain text, HTML, DVI, and PDF, may
       be available in <i>/usr/local/share/doc/groff-1.23.0</i>.

       <i>groff</i> is also a name for an extended dialect of the <i>roff</i>
       language.  We use “roff” to denote features that are universal,
       or nearly so, among implementations of this family.  We apply the
       term “groff” to the language documented here, the GNU
       implementation of the overall system, the project that develops
       that system, and the command of that name.

       GNU <i>troff</i>, installed on this system as <i>troff</i>(1), is the
       <i>formatter:</i> a program that reads device and font descriptions
       (<i>groff_font</i>(5)), interprets the <i>groff</i> language expressed in text
       input files, and translates that input into a device-independent
       output format (<i>groff_out</i>(5)) that is usually then post-processed
       by an output driver to produce PostScript, PDF, HTML, DVI, or
       terminal output.
</pre> <h2>
Input format </h2>
<pre>
       Input to GNU <i>troff</i> is organized into lines separated by the Unix
       newline character (U+000A), and must be in one of two character
       encodings it can recognize: IBM code page 1047 on EBCDIC systems,
       and ISO Latin-1 (8859-1) otherwise.  Use of ISO 646-1991:IRV
       (“US-ASCII”) or (equivalently) the “Basic Latin” subset of
       ISO 10646 (“Unicode”) is recommended; see <i>groff_char</i>(7).  The
       <i>preconv</i>(1) preprocessor transforms other encodings, including
       UTF-8, to satisfy <i>troff</i>'s requirements.
</pre> <h2>
Syntax characters </h2>
<pre>
       Several input characters are syntactically significant to <i>groff</i>.
       The most important of these distinguish <i>control lines,</i> which
       instruct the formatter, from <i>text lines</i> that are formatted as
       output.

       .   A dot at the beginning of an input line marks it as a control
           line.  It can also follow the <b>.el </b>and <b>.nop </b>requests, and the
           condition in <b>.if</b>, <b>.ie</b>, and <b>.while </b>requests.  The control
           character invokes requests and calls macros by the name that
           follows it.  The <b>.cc </b>request can change the control
           character.

       '   The neutral apostrophe is the <i>no-break control character,</i>
           recognized where the control character is.  It suppresses the
           (first) break implied by the <b>.bp</b>, <b>.cf</b>, <b>.fi</b>, <b>.fl</b>, <b>.in</b>, <b>.nf</b>,
           <b>.rj</b>, <b>.sp</b>, <b>.ti</b>, and <b>.trf </b>requests.  The requested operation
           takes effect at the next break.  It makes <b>.br </b>nilpotent.  The
           no-break control character can be changed with the <b>.c2</b>
           request.  When formatted, “<b>'</b>” may be typeset as a
           typographical quotation mark; use the <b>\[aq] </b>special character
           escape sequence to format a neutral apostrophe glyph.

       "   The neutral double quote can be used to enclose arguments to
           macros and strings, and is required if those arguments
           contain space or tab characters.  In the <b>.ds</b>, <b>.ds1</b>, <b>.as</b>, and
           <b>.as1 </b>requests, a leading neutral double quote in the second
           argument is stripped off to allow embedding of leading
           spaces.  To include a double quote inside a quoted argument,
           use the <b>\[dq] </b>special character escape sequence (which also
           serves to typeset the glyph in text).

       \   A backslash introduces an escape sequence.  The escape
           character can be changed with the <b>.ec </b>request; <b>.eo </b>disables
           escape sequence recognition.  Use the <b>\[rs] </b>special character
           escape sequence to format a backslash glyph, and <b>\e </b>to
           typeset the glyph of the current escape character.

       (   An opening parenthesis is special only in certain escape
           sequences; when recognized, it introduces an argument of
           exactly two characters.  <i>groff</i> offers the more flexible
           square bracket syntax.

       [   An opening bracket is special only in certain escape
           sequences; when recognized, it introduces an argument (list)
           of any length, not including a closing bracket.

       ]   A closing bracket is special only when an escape sequence
           using an opening bracket as an argument delimiter is being
           interpreted.  It ends the argument (list).

       Additionally, the Control+A character (U+0001) in text is
       interpreted as a <i>leader</i> (see below).

       Horizontal whitespace characters are significant to <i>groff,</i> but
       trailing spaces on text lines are ignored.

       <i>space</i>  On control lines and within bracketed escape sequences,
              spaces separate arguments.  On text lines, they separate
              words.  Multiple adjacent space characters in text cause
              <i>groff</i> to attempt end-of-sentence detection on the
              preceding word (and trailing punctuation).  The amount of
              space between words and sentences is controlled by the <b>.ss</b>
              request.  When filling is enabled (the default), a line
              may be broken at a space.  When adjustment is enabled (the
              default), inter-word spaces are expanded until the output
              line reaches the configured length.  An adjustable but
              non-breaking space is available with <b>\~</b>.  To get a space
              of fixed width, use one of the escape sequences ‘<b>\ </b>’ (the
              escape character followed by a space), <b>\0</b>, <b>\|</b>, <b>\^</b>, or <b>\h</b>;
              see section “Escape sequences” below.

       <i>newline</i>
              On text lines, a newline formats an inter-word space and,
              if filling is enabled, triggers end-of-sentence
              recognition on the preceding text.  See section “Line
              continuation” below.

       <i>tab</i>    A tab character on a text line causes the drawing position
              to advance to the next defined tab stop.
</pre> <h2>
Tabs and leaders </h2>
<pre>
       The formatter interprets input horizontal tab characters (“tabs”)
       and Control+A characters (“leaders”) into movements to the next
       tab stop.  Tabs simply move to the next tab stop; leaders place
       enough periods to fill the space.  Tab stops are by default
       located every half inch measured from the drawing position
       corresponding to the beginning of the input line; see section
       “Page geometry” of <i>roff</i>(7).  Tabs and leaders do not cause breaks
       and therefore do not interrupt filling.  Tab stops can be
       configured with the <b>ta </b>request, and tab and leader glyphs with
       the <b>tc </b>and <b>lc </b>requests, respectively.
</pre> <h2>
Line continuation </h2>
<pre>
       When filling is enabled, input and output line breaks generally
       do not correspond.  The <i>roff</i> language therefore distinguishes
       input and output line continuation.

       A backslash <b>\ </b>immediately followed by a newline, sometimes
       discussed as <b>\</b><i>newline</i>, suppresses the effects of that newline on
       the input.  The next input line thus retains the classification
       of its predecessor as a control or text line.  <b>\</b><i>newline</i> is useful
       for managing line lengths in the input during document
       maintenance; you can break an input line in the middle of a
       request invocation, macro call, or escape sequence.  Input line
       continuation is invisible to the formatter, with two exceptions:
       the <b>| </b>operator recognizes the new input line, and the input line
       counter register <b>.c </b>is incremented.

       The <b>\c </b>escape sequence continues an <i>output</i> line.  Nothing on the
       input line after it is formatted.  In contrast to <b>\</b><i>newline</i>, a
       line after <b>\c </b>is treated as a new input line, so a control
       character is recognized at its beginning.  The visual results
       depend on whether filling is enabled.  An intervening control
       line that causes a break overrides <b>\c</b>, flushing out the pending
       output line in the usual way.  The register <b>.int </b>contains a
       positive value if the last output line was continued with <b>\c</b>;
       this datum is associated with the environment.
</pre> <h2>
Colors </h2>
<pre>
       <i>groff</i> supports color output with a variety of color spaces and up
       to 16 bits per channel.  Some devices, particularly terminals,
       may be more limited.  When color support is enabled, two colors
       are current at any given time: the <i>stroke color,</i> with which
       glyphs, rules (lines), and geometric objects like circles and
       polygons are drawn, and the <i>fill color,</i> which can be used to
       paint the interior of a closed geometric figure.  The <b>color</b>,
       <b>defcolor</b>, <b>gcolor</b>, and <b>fcolor </b>requests; <b>\m </b>and <b>\M </b>escape
       sequences; and <b>.color</b>, <b>.m</b>, and <b>.M </b>registers exercise color
       support.

       Each output device has a color named “<b>default</b>”, which cannot be
       redefined.  A device's default stroke and fill colors are not
       necessarily the same.  For the <b>dvi</b>, <b>html</b>, <b>pdf</b>, <b>ps</b>, and <b>xhtml</b>
       output devices, <i>troff</i> automatically loads a macro file defining
       many color names at startup.  By the same mechanism, the devices
       supported by <i>grotty</i>(1) recognize the eight standard
       ISO 6429/ECMA-48 color names.  (These are known vulgarly as
       “ANSI” colors, after its X3.64 standard, now withdrawn.)
</pre> <h2>
Measurements </h2>
<pre>
       Numeric parameters that specify measurements are expressed as
       integers or decimal fractions with an optional <i>scaling unit</i>
       suffixed.  A scaling unit is a letter that immediately follows
       the last digit of a number.  Digits after the decimal point are
       optional.

       Measurements are scaled by the scaling unit and stored internally
       (with any fractional part discarded) in basic units.  The device
       resolution can therefore be obtained by storing a value of “<b>1i</b>”
       to a register.  The only constraint on the basic unit is that it
       is at least as small as any other unit.

       <b>u      </b>Basic unit.
       <b>i      </b>Inch; defined as 2.54 centimeters.
       <b>c      </b>Centimeter.
       <b>p      </b>Point; a typesetter's unit used for measuring type size.
              There are 72 points to an inch.
       <b>P      </b>Pica; another typesetter's unit.  There are 6 picas to an
              inch and 12 points to a pica.
       <b>s</b>, <b>z   </b>Scaled points and multiplication by the output device's
              <i>sizescale</i> parameter, respectively.
       <b>f      </b>Multiplication by 65,536; scales decimal fractions in the
              interval [0, 1] to 16-bit unsigned integers.

       The magnitudes of other scaling units depend on the text
       formatting parameters in effect.

       <b>m      </b>Em; an em is equal to the current type size in points.
       <b>n      </b>En; an en is one-half em.
       <b>v      </b>Vee; distance between text baselines.
       <b>M      </b>Hundredth of an em.

   <b>Motion quanta</b>
       An output device's basic unit <b>u </b>is not necessarily its smallest
       addressable length; <b>u </b>can be smaller to avoid problems with
       integer roundoff.  The minimum distances that a device can work
       with in the horizontal and vertical directions are termed its
       <i>motion quanta,</i> stored in the <b>.H </b>and <b>.V </b>registers, respectively.
       Measurements are rounded to applicable motion quanta.  Half-
       quantum fractions round toward zero.

   <b>Default units</b>
       A general-purpose register (one created or updated with the <b>nr</b>
       request; see section “Registers” below) is implicitly
       dimensionless, or reckoned in basic units if interpreted in a
       measurement context.  But it is convenient for many requests and
       escape sequences to infer a scaling unit for an argument if none
       is specified.  An explicit scaling unit (not after a closing
       parenthesis) can override an undesirable default.  Effectively,
       the default unit is suffixed to the expression if a scaling unit
       is not already present.  GNU <i>troff</i>'s use of integer arithmetic
       should also be kept in mind; see below.
</pre> <h2>
Numeric expressions </h2>
<pre>
       A <i>numeric expression</i> evaluates to an integer.  The following
       operators are recognized.

             +   addition
             -   subtraction
             *   multiplication
             /   truncating division
             %   modulus
       ────────────────────────────────────────────
       unary +   assertion, motion, incrementation
       unary -   negation, motion, decrementation
       ────────────────────────────────────────────
             ;   scaling
            &gt;?   maximum
            &lt;?   minimum
       ────────────────────────────────────────────
             &lt;   less than
             &gt;   greater than
            &lt;=   less than or equal
            &gt;=   greater than or equal
             =   equal
            ==   equal
       ────────────────────────────────────────────
             &amp;   logical conjunction (“and”)
             :   logical disjunction (“or”)
             !   logical complementation (“not”)
       ────────────────────────────────────────────
           ( )   precedence
       ────────────────────────────────────────────
             |   boundary-relative motion

       <i>troff</i> provides a set of mathematical and logical operators
       familiar to programmers—as well as some unusual ones—but supports
       only integer arithmetic.  (Provision is made for interpreting and
       reporting decimal fractions in certain cases.)  The internal data
       type used for computing results depends on the host machine but
       is at least a 32-bit signed integer, which suffices to represent
       magnitudes within a range of ±2 billion.  (If that's not enough,
       see <i>groff_tmac</i>(5) for the <i>62bit.tmac</i> macro package.)

       Arithmetic infix operators perform a function on the numeric
       expressions to their left and right; they are <b>+ </b>(addition), <b>-</b>
       (subtraction), <b>* </b>(multiplication), <b>/ </b>(truncating division), and <b>%</b>
       (modulus).  <i>Truncating division</i> rounds to the integer nearer to
       zero, no matter how large the fractional portion.  Overflow and
       division (or modulus) by zero are errors and abort evaluation of
       a numeric expression.

       Arithmetic unary operators operate on the numeric expression to
       their right; they are <b>- </b>(negation) and <b>+ </b>(assertion—for
       completeness; it does nothing).  The unary minus must often be
       used with parentheses to avoid confusion with the decrementation
       operator, discussed below.

       The sign of the modulus of operands of mixed signs is determined
       by the sign of the first.  Division and modulus operators satisfy
       the following property: given a dividend <i>a</i> and a divisor <i>b</i>, a
       quotient <i>q</i> formed by “<b>(a / b)</b>” and a remainder <i>r</i> by “<b>(a % b)</b>”,
       then <i>qb</i> + <i>r</i> = <i>a</i>.

       GNU <i>troff</i>'s scaling operator, used with parentheses as <b>(</b><i>c</i><b>;</b><i>e</i><b>)</b>,
       evaluates a numeric expression <i>e</i> using <i>c</i> as the default scaling
       unit.  If <i>c</i> is omitted, scaling units are ignored in the
       evaluation of <i>e</i>.  GNU <i>troff</i> also provides a pair of operators to
       compute the extrema of two operands: <b>&gt;? </b>(maximum) and <b>&lt;?</b>
       (minimum).

       Comparison operators comprise <b>&lt; </b>(less than), <b>&gt; </b>(greater than), <b>&lt;=</b>
       (less than or equal), <b>&gt;= </b>(greater than or equal), and <b>= </b>(equal).
       <b>== </b>is a synonym for <b>=</b>.  When evaluated, a comparison is replaced
       with “<b>0</b>” if it is false and “<b>1</b>” if true.  In the <i>roff</i> language,
       positive values are true, others false.

       We can operate on truth values with the logical operators <b>&amp;</b>
       (logical conjunction or “and”) and <b>: </b>(logical disjunction or
       “or”).  They evaluate as comparison operators do.  A logical
       complementation (“not”) operator, <b>!, </b>works only within “<b>if</b>”,
       “<b>ie</b>”, and “<b>while</b>” requests.  Furthermore, <b>! </b>is recognized only at
       the beginning of a numeric expression not contained by another
       numeric expression.  In other words, it must be the “outermost”
       operator.  Including it elsewhere in the expression produces a
       warning in the “<b>number</b>” category (see <i>troff</i>(1)), and its
       expression evaluates false.  This unfortunate limitation
       maintains compatibility with AT&amp;T <i>troff</i>.  Test a numeric
       expression for falsity by comparing it to a false value.

       The <i>roff</i> language has no operator precedence: expressions are
       evaluated strictly from left to right, in contrast to schoolhouse
       arithmetic.  Use parentheses <b>( ) </b>to impose a desired precedence
       upon subexpressions.

       For many requests and escape sequences that cause motion on the
       page, the unary operators <b>+ </b>and <b>- </b>work differently when leading a
       numeric expression.  They then indicate a motion relative to the
       drawing position: positive is down in vertical contexts, right in
       horizontal ones.

       <b>+ </b>and <b>- </b>are also treated differently by the following requests
       and escape sequences: <b>bp</b>, <b>in</b>, <b>ll</b>, <b>pl</b>, <b>pn</b>, <b>po</b>, <b>ps</b>, <b>pvs</b>, <b>rt</b>, <b>ti</b>,
       <b>\H</b>, <b>\R</b>, and <b>\s</b>.  Here, leading plus and minus signs serve as
       incrementation and decrementation operators, respectively.  To
       negate an expression, subtract it from zero or include the unary
       minus in parentheses with its argument.

       A leading <b>| </b>operator indicates a motion relative not to the
       drawing position but to a boundary.  For horizontal motions, the
       measurement specifies a distance relative to a drawing position
       corresponding to the beginning of the <i>input</i> line.  By default,
       tab stops reckon movements in this way.  Most escape sequences do
       not; <b>| </b>tells them to do so.  For vertical motions, the <b>| </b>operator
       specifies a distance from the first text baseline on the page or
       in the current diversion, using the current vertical spacing.

       The <b>\B </b>escape sequence tests its argument for validity as a
       numeric expression.

       A register interpolated as an operand in a numeric expression
       must have an Arabic format; luckily, this is the default.

       Due to the way arguments are parsed, spaces are not allowed in
       numeric expressions unless the (sub)expression containing them is
       surrounded by parentheses.
</pre> <h2>
Identifiers </h2>
<pre>
       An <i>identifier</i> labels a GNU <i>troff</i> datum such as a register, name
       (macro, string, or diversion), typeface, color, special character
       or character class, environment, or stream.  Valid identifiers
       consist of one or more ordinary characters.  An <i>ordinary</i>
       <i>character</i> is an input character that is not the escape character,
       a leader, tab, newline, or invalid as GNU <i>troff</i> input.

       Invalid input characters are a subset of control characters (from
       the sets “C0 Controls” and “C1 Controls” as Unicode describes
       them).  When <i>troff</i> encounters one in an identifier, it produces a
       warning in category “<b>input</b>” (see section “Warnings” in <i>troff</i>(1)).
       They are removed during interpretation: an identifier “foo”,
       followed by an invalid character and then “bar”, is processed as
       “foobar”.

       On a machine using the ISO 646, 8859, or 10646 character
       encodings, invalid input characters are <b>0x00</b>, <b>0x0B</b>, <b>0x0D</b>–<b>0x1F</b>,
       and <b>0x80</b>–<b>0x9F</b>.  On an EBCDIC host, they are <b>0x00</b>–<b>0x01</b>, <b>0x08</b>,
       <b>0x09</b>, <b>0x0B</b>, <b>0x0D</b>–<b>0x14</b>, <b>0x17</b>–<b>0x1F</b>, and <b>0x30</b>–<b>0x3F</b>.  Some of these
       code points are used by <i>troff</i> internally, making it non-trivial
       to extend the program to accept UTF-8 or other encodings that use
       characters from these ranges.

       An identifier with a closing bracket (“]”) in its name can't be
       accessed with bracket-form escape sequences that expect an
       identifier as a parameter.  Similarly, the identifier “(” can't
       be interpolated <i>except</i> with bracket forms.

       If you begin a macro, string, or diversion name with either of
       the characters “[” or “]”, you foreclose use of the <i>refer</i>(1)
       preprocessor, which recognizes “.[” and “.]” as bibliographic
       reference delimiters.

       The escape sequence <b>\A </b>tests its argument for validity as an
       identifier.

       How GNU <i>troff</i> handles the interpretation of an undefined
       identifier depends on the context.  There is no way to invoke an
       undefined request; such syntax is interpreted as a macro call
       instead.  If the identifier is interpreted as a string, macro, or
       diversion, <i>troff</i> emits a warning in category “<b>mac</b>”, defines it as
       empty, and interpolates nothing.  If the identifier is
       interpreted as a register, <i>troff</i> emits a warning in category
       “<b>reg</b>”, initializes it to zero, and interpolates that value.  See
       section “Warnings” in <i>troff</i>(1), and subsection “Interpolating
       registers” and section “Strings” below.  Attempting to use an
       undefined typeface, style, special character or character class,
       color, environment, or stream generally provokes an error
       diagnostic.

       Identifiers for requests, macros, strings, and diversions share
       one name space; special characters and character classes another.
       No other object types do.
</pre> <h2>
Control characters </h2>
<pre>
       Control characters are recognized only at the beginning of an
       input line, or at the beginning of a branch of a control
       structure request; see section “Control structures” below.

       A few requests cause a break implicitly; use the no-break control
       character to prevent the break.  Break suppression is its sole
       behavioral distinction.  Employing the no-break control character
       to invoke requests that don't cause breaks is harmless but poor
       style.

       The control character “<b>.</b>” and the no-break control character “<b>'</b>”
       can be changed with the <b>cc </b>and <b>c2 </b>requests, respectively.  Within
       a macro definition, register <b>.br </b>indicates the control character
       used to call it.
</pre> <h2>
Invoking requests </h2>
<pre>
       A control character is optionally followed by tabs and/or spaces
       and then an identifier naming a request or macro.  The invocation
       of an unrecognized request is interpreted as a macro call.
       Defining a macro with the same name as a request replaces the
       request.  Deleting a request name with the <b>rm </b>request makes it
       unavailable.  The <b>als </b>request can alias requests, permitting them
       to be wrapped or non-destructively replaced.  See section
       “Strings” below.

       There is no inherent limit on argument length or quantity.  Most
       requests take one or more arguments, and ignore any they do not
       expect.  A request may be separated from its arguments by tabs or
       spaces, but only spaces can separate an argument from its
       successor.  Only one between arguments is necessary; any excess
       is ignored.  GNU <i>troff</i> does not allow tabs for argument
       separation.

       Generally, a space <i>within</i> a request argument is not relevant, not
       meaningful, or is supported by bespoke provisions, as with the <b>tl</b>
       request's delimiters.  Some requests, like <b>ds</b>, interpret the
       remainder of the control line as a single argument.  See section
       “Strings” below.

       Spaces and tabs immediately after a control character are
       ignored.  Commonly, authors use them to indent the source of
       documents or macro files.
</pre> <h2>
Calling macros </h2>
<pre>
       If a macro of the desired name does not exist when called, it is
       created, assigned an empty definition, and a warning in category
       “<b>mac</b>” is emitted.  Calling an undefined macro <i>does</i> end a macro
       definition naming it as its end macro (see section “Writing
       macros” below).

       To embed spaces <i>within</i> a macro argument, enclose the argument in
       neutral double quotes ‘<b>"</b>’.  Horizontal motion escape sequences
       are sometimes a better choice for arguments to be formatted as
       text.

       The foregoing raises the question of how to embed neutral double
       quotes or backslashes in macro arguments when <i>those</i> characters
       are desired as literals.  In GNU <i>troff</i>, the special character
       escape sequence <b>\[rs] </b>produces a backslash and <b>\[dq] </b>a neutral
       double quote.

       In GNU <i>troff</i>'s AT&amp;T compatibility mode, these characters remain
       available as <b>\(rs </b>and <b>\(dq</b>, respectively.  AT&amp;T <i>troff</i> did not
       consistently define these special characters, but its descendants
       can be made to support them.  See <i>groff_font</i>(5).  If even that is
       not feasible, see the “Calling Macros” section of the <i>groff</i>
       Texinfo manual for the complex macro argument quoting rules of
       AT&amp;T <i>troff</i>.
</pre> <h2>
Using escape sequences </h2>
<pre>
       Whereas requests must occur on control lines, escape sequences
       can occur intermixed with text and may appear in arguments to
       requests, macros, and other escape sequences.  An escape sequence
       is introduced by the escape character, a backslash <b>\</b>.  The next
       character selects the escape's function.

       Escape sequences vary in length.  Some take an argument, and of
       those, some have different syntactical forms for a one-character,
       two-character, or arbitrary-length argument.  Others accept <i>only</i>
       an arbitrary-length argument.  In the former scheme, a one-
       character argument follows the function character immediately, an
       opening parenthesis “<b>(</b>” introduces a two-character argument (no
       closing parenthesis is used), and an argument of arbitrary length
       is enclosed in brackets “<b>[]</b>”.  In the latter scheme, the user
       selects a delimiter character.  A few escape sequences are
       idiosyncratic, and support both of the foregoing conventions
       (<b>\s</b>), designate their own termination sequence (<b>\?</b>), consume
       input until the next newline (<b>\!</b>, <b>\"</b>, <b>\#</b>), or support an
       additional modifier character (<b>\s </b>again, and <b>\n</b>).  In no case can
       an escape sequence parameter contain a newline.

       If an escape character is followed by a character that does not
       identify a defined operation, the escape character is ignored
       (producing a diagnostic of the “<b>escape</b>” warning category, which
       is not enabled by default) and the following character is
       processed normally.

       Escape sequence interpolation is of higher precedence than escape
       sequence argument interpretation.  This rule affords flexibility
       in using escape sequences to construct parameters to other escape
       sequences.

       The escape character can be interpolated (<b>\e</b>).  Requests permit
       the escape mechanism to be deactivated (<b>eo</b>) and restored, or the
       escape character changed (<b>ec</b>), and to save and restore it (<b>ecs</b>
       and <b>ecr</b>).
</pre> <h2>
Delimiters </h2>
<pre>
       Some escape sequences that require parameters use delimiters.
       The neutral apostrophe <b>' </b>is a popular choice and shown in this
       document.  The neutral double quote <b>" </b>is also commonly seen.
       Letters, numerals, and leaders can be used.  Punctuation
       characters are likely better choices, except for those defined as
       infix operators in numeric expressions; see below.

       The following escape sequences don't take arguments and thus are
       allowed as delimiters: <b>\</b><i>space</i>, <b>\%</b>, <b>\|</b>, <b>\^</b>, <b>\{</b>, <b>\}</b>, <b>\'</b>, <b>\`</b>, <b>\-</b>,
       <b>\_</b>, <b>\!</b>, <b>\?</b>, <b>\)</b>, <b>\/</b>, <b>\,</b>, <b>\&amp;</b>, <b>\:</b>, <b>\~</b>, <b>\0</b>, <b>\a</b>, <b>\c</b>, <b>\d</b>, <b>\e</b>, <b>\E</b>, <b>\p</b>,
       <b>\r</b>, <b>\t</b>, and <b>\u</b>.  However, using them this way is discouraged;
       they can make the input confusing to read.

       A few escape sequences, <b>\A</b>, <b>\b</b>, <b>\o</b>, <b>\w</b>, <b>\X</b>, and <b>\Z</b>, accept a
       newline as a delimiter.  Newlines that serve as delimiters
       continue to be recognized as input line terminators.  Use of
       newlines as delimiters in escape sequences is also discouraged.

       Finally, the escape sequences <b>\D</b>, <b>\h</b>, <b>\H</b>, <b>\l</b>, <b>\L</b>, <b>\N</b>, <b>\R</b>, <b>\s</b>, <b>\S</b>,
       <b>\v</b>, and <b>\x </b>prohibit many delimiters.

              •  the numerals 0–9 and the decimal point “<b>.</b>”

              •  the (single-character) operators <b>+-/*%&lt;&gt;=&amp;:()</b>

              •  any escape sequences other than <b>\%</b>, <b>\:</b>, <b>\{</b>, <b>\}</b>, <b>\'</b>, <b>\`</b>,
                 <b>\-</b>, <b>\_</b>, <b>\!</b>, <b>\/</b>, <b>\c</b>, <b>\e</b>, and <b>\p</b>

       Delimiter syntax is complex and flexible primarily for historical
       reasons; the foregoing restrictions need be kept in mind mainly
       when using <i>groff</i> in AT&amp;T compatibility mode.  GNU <i>troff</i> keeps
       track of the nesting depth of escape sequence interpolations, so
       the only characters you need to avoid using as delimiters are
       those that appear in the arguments you input, not any that result
       from interpolation.  Typically, <b>' </b>works fine.  See section
       “Implementation differences” in <i>groff_diff</i>(7).
</pre> <h2>
Dummy characters </h2>
<pre>
       As discussed in <i>roff</i>(7), the first character on an input line is
       treated specially.  Further, formatting a glyph has many
       consequences on formatter state (see section “Environments”
       below).  Occasionally, we want to escape this context or embrace
       some of those consequences without actually rendering a glyph to
       the output.  <b>\&amp; </b>interpolates a dummy character, which is
       constitutive of output but invisible.  Its presence alters the
       interpretation context of a subsequent input character, and
       enjoys several applications: preventing the insertion of extra
       space after an end-of-sentence character, preventing
       interpretation of a control character at the beginning of an
       input line, preventing kerning between two glyphs, and permitting
       the <b>tr </b>request to remap a character to “nothing”.  <b>\) </b>works as <b>\&amp;</b>
       does, except that it does not cancel a pending end-of-sentence
       state.
</pre> <h2>
Control structures </h2>
<pre>
       <i>groff</i> has “if” and “while” control structures like other
       languages.  However, the syntax for grouping multiple input lines
       in the branches or bodies of these structures is unusual.

       They have a common form: the request name is (except for <b>.el</b>
       “else”) followed by a conditional expression <i>cond-expr</i>; the
       remainder of the line, <i>anything</i>, is interpreted as if it were an
       input line.  Any quantity of spaces between arguments to requests
       serves only to separate them; leading spaces in <i>anything</i> are
       therefore not seen.  <i>anything</i> effectively <i>cannot</i> be omitted; if
       <i>cond-expr</i> is true and <i>anything</i> is empty, the newline at the end
       of the control line is interpreted as a blank line (and therefore
       a blank text line).

       It is frequently desirable for a control structure to govern more
       than one request, macro call, or text line, or combination of the
       foregoing.  The opening and closing brace escape sequences <b>\{ </b>and
       <b>\} </b>perform such grouping.  Brace escape sequences outside of
       control structures have no meaning and produce no output.

       <b>\{ </b>should appear (after optional spaces and tabs) immediately
       subsequent to the request's conditional expression.  <b>\} </b>should
       appear on a line with other occurrences of itself as necessary to
       match <b>\{ </b>sequences.  It can be preceded by a control character,
       spaces, and tabs.  Input after any quantity of <b>\} </b>sequences on
       the same line is processed only if all the preceding conditions
       to which they correspond are true.  Furthermore, a <b>\} </b>closing the
       body of a <b>.while </b>request must be the last such escape sequence on
       an input line.

   <b>Conditional expressions</b>
       The <b>.if</b>, <b>.ie</b>, and <b>.while </b>requests test the truth values of
       numeric expressions.  They also support several additional
       Boolean operators; the members of this expanded class are termed
       <i>conditional expressions</i>; their truth values are as shown below.

       <i><b>cond-expr</b></i>...   <b>...is true if...</b>
       ──────────────────────────────────────────────────────────────────
            <b>'</b><i>s1</i><b>'</b><i>s2</i><b>'   </b><i>s1</i> produces the same formatted output as <i>s2</i>.
                <b>c </b><i>g</i>   a glyph <i>g</i> is available.
                <b>d </b><i>m</i>   a string, macro, diversion, or request <i>m</i> is
                      defined.
                  <b>e   </b>the current page number is even.
                <b>F </b><i>f</i>   a font named <i>f</i> is available.
                <b>m </b><i>c</i>   a color named <i>c</i> is defined.
                  <b>n   </b>the formatter is in <i>nroff</i> mode.
                  <b>o   </b>the current page number is odd.
                <b>r </b><i>n</i>   a register named <i>n</i> is defined.
                <b>S </b><i>s</i>   a font style named <i>s</i> is available.
                  <b>t   </b>the formatter is in <i>troff</i> mode.
                  <b>v   </b>n/a (historical artifact; always false).

       If the first argument to an <b>.if</b>, <b>.ie</b>, or <b>.while </b>request begins
       with a non-alphanumeric character apart from <b>! </b>(see below); it
       performs an <i>output comparison test.</i>  Shown first in the table
       above, the <i>output comparison operator</i> interpolates a true value
       if formatting its comparands <i>s1</i> and <i>s2</i> produces the same output
       commands.  Other delimiters can be used in place of the neutral
       apostrophes.  <i>troff</i> formats <i>s1</i> and <i>s2</i> in separate scratch
       buffers; after the comparison, the resulting data are discarded.
       The resulting glyph properties, including font family, style,
       size, and slant, must match, but not necessarily the requests
       and/or escape sequences used to obtain them.  Motions must match
       in orientation and magnitude to within the applicable horizontal
       or vertical motion quantum of the device, after rounding.

       Surround the comparands with <b>\? </b>to avoid formatting them; this
       causes them to be compared character by character, as with string
       comparisons in other programming languages.  Since comparands
       protected with <b>\? </b>are read in copy mode, they need not even be
       valid <i>groff</i> syntax.  The escape character is still lexically
       recognized, however, and consumes the next character.

       The above operators can't be combined with most others, but a
       leading “<b>!</b>”, not followed immediately by spaces or tabs,
       complements an expression.  Spaces and tabs are optional
       immediately after the “<b>c</b>”, “<b>d</b>”, “<b>F</b>”, “<b>m</b>”, “<b>r</b>”, and “<b>S</b>” operators,
       but right after “<b>!</b>”, they end the predicate and the conditional
       evaluates true.  (This bizarre behavior maintains compatibility
       with AT&amp;T <i>troff</i>.)

       Conditional operators do not create <i>roff</i> language objects as
       interpolations with <b>\n </b>and <b>\* </b>escape sequences do.
</pre> <h2>
Syntax reference conventions </h2>
<pre>
       In the following request and escape sequence specifications, most
       argument names were chosen to be descriptive.  A few denotations
       may require introduction.

              <i>anything</i>   includes all characters up to the end of the
                         input line (which may be continued with
                         <b>\</b><i>newline</i>), to the ending delimiter for the
                         escape sequence, or within <b>\{ </b>and <b>\}</b>.  Escape
                         sequences in <i>anything</i> are interpreted normally
                         except where otherwise stated, as when read in
                         copy mode.  Comments are ignored; trailing
                         whitespace generally is not.
              <i>b</i>          is a numerical expression evaluated as a
                         Boolean; positive values are true, others
                         false.
              <i>c</i>          denotes a single input character, ordinary or
                         special.
              <i>div</i>        is a diversion identifier.
              <i>env</i>        is an environment identifier.
              <i>font</i>       is a typeface specified as a font name, an
                         abstract style, or a mounting position.
              <i>ident</i>      is a valid <i>groff</i> identifier; its use often
                         indicates that the operation creates an object
                         of a type subsequently referred to as <i>mac, reg,</i>
                         <i>str,</i> and so forth.
              <i>mac</i>        is a macro identifier.
              <i>message</i>    is a character sequence to be emitted on the
                         standard error stream.  Special character
                         escape sequences are <i>not</i> interpreted.
              <i>n</i>          is a numeric expression that evaluates to a
                         non-negative integer.
              <i>±N</i>         is a numeric expression with a meaning
                         dependent on its sign; see below.
              <i>name</i>       is a macro, string, or diversion identifier, or
                         the name of a request.
              <i>npl</i>        is a numeric expression constituting a count of
                         subsequent <i>productive</i> input lines; that is,
                         those that directly produce formatted output.
                         Text lines produce output, as do control lines
                         containing requests like <b>.tl </b>or escape
                         sequences like <b>\D</b>.  Macro calls are not
                         themselves productive, but their interpolated
                         contents can be.
              <i>reg</i>        is a register identifier.
              <i>str</i>        is a string identifier.
              <i>stream</i>     is an output stream identifier.

       If a numeric expression presented as <i>±N</i> starts with a ‘<b>+</b>’ sign,
       an increment in the amount of of <i>N</i> is applied to the value
       applicable to the request or escape sequence.  If it starts with
       a ‘<b>-</b>’ sign, a decrement of magnitude <i>N</i> is applied instead.
       Without a sign, <i>N</i> replaces any existing value.  A leading minus
       sign in <i>N</i> is always interpreted as a decrementation operator, not
       an algebraic sign.  To assign a register a negative value or the
       negated value of another register, enclose it with its operand in
       parentheses or subtract it from zero.  If a prior value does not
       exist (the register was undefined), an increment or decrement is
       applied as if to 0.
</pre> <h2>
Request short reference </h2>
<pre>
       Not all details of request behavior are outlined here.  See the
       <i>groff</i> Texinfo manual or, for features new to GNU <i>troff</i>,
       <i>groff_diff</i>(7).

       <b>.ab        </b>Abort processing; exit with failure status.
       <b>.ab </b><i>message</i>
                  Abort processing; write <i>message</i> to the standard error
                  stream and exit with failure status.
       <b>.ad        </b>Enable output line alignment and adjustment using the
                  mode stored in <b>\n[.j]</b>.
       <b>.ad </b><i>c</i>      Enable output line alignment and adjustment in mode <i>c</i>
                  (<i>c</i>=<b>b</b>,<b>c</b>,<b>l</b>,<b>n</b>,<b>r</b>).  Sets <b>\n[.j]</b>.
       <b>.af </b><i>reg c</i>  Assign format <i>c</i> to register <i>reg,</i> where <i>c</i> is “<b>i</b>”, “<b>I</b>”,
                  “<b>a</b>”, “<b>A</b>”, or a sequence of decimal digits whose
                  quantity denotes the minimum width in digits to be
                  used when the register is interpolated.  “<b>i</b>” and “<b>a</b>”
                  indicate Roman numerals and basic Latin alphabetics,
                  respectively, in the lettercase specified.  The
                  default is <b>0</b>.
       <b>.aln </b><i>new old</i>
                  Create alias (additional name) <i>new</i> for existing
                  register named <i>old</i>.
       <b>.als </b><i>new old</i>
                  Create alias (additional name) <i>new</i> for existing
                  request, string, macro, or diversion <i>old</i>.  If <i>new</i>
                  already exists, its contents are lost unless already
                  aliased.
       <b>.am </b><i>mac</i>    Append to macro <i>mac</i> until encountering “<b>..</b>”.
       <b>.am </b><i>mac end-mac</i>
                  Append to macro <i>mac</i> until <i>end-mac</i> is called at the
                  start of a control line in the current conditional
                  block.  <i>end-mac</i> can be a request.
       <b>.am1 </b><i>mac</i>   As <b>.am</b>, with compatibility mode disabled when the
                  appendment to macro <i>mac</i> is interpreted.
       <b>.am1 </b><i>mac end-mac</i>
                  As “<b>.am </b><i>mac</i>”, with compatibility mode disabled when
                  the appendment to macro <i>mac</i> is interpreted.
       <b>.ami </b><i>str</i>   Append to a macro indirectly—its name is in string
                  <i>str</i>—until encountering “<b>..</b>”.
       <b>.ami </b><i>str end-mac-str</i>
                  Append to a macro indirectly.  As <b>.am</b>, but <i>str</i> and
                  <i>end-mac-str</i> contain the names of the macro to be
                  appended to, and that whose call ends the appendment,
                  respectively.
       <b>.ami1 </b><i>str</i>  As <b>.ami</b>, with compatibility mode disabled when the
                  appendment is interpreted.
       <b>.ami1 </b><i>str end-mac-str</i>
                  As <b>.ami</b>, with compatibility mode disabled when the
                  appendment is interpreted.
       <b>.as </b><i>ident</i>  Create string <i>ident</i> with empty contents; no operation
                  if <i>ident</i> already exists.
       <b>.as </b><i>str anything</i>
                  Append <i>anything</i> to string <i>str</i>.
       <b>.as1 </b><i>ident</i> As “<b>.as </b><i>ident</i>”.
       <b>.as1 </b><i>str anything</i>
                  As <b>.as</b>, with compatibility mode disabled when the
                  appendment to string <i>str</i> is interpreted.
       <b>.asciify </b><i>div</i>
                  Unformat ordinary characters, spaces, and some escape
                  sequences in diversion <i>div</i>.
       <b>.backtrace </b>Write the state of the input stack to the standard
                  error stream.  See the <b>-b </b>option of <i>groff</i>(1).
       <b>.bd </b><i>font</i>   Stop emboldening font <i>font.</i>
       <b>.bd </b><i>font n</i> Embolden <i>font</i> by overstriking its glyphs offset by <i>n</i>-1
                  units.  See register <b>.b</b>.
       <b>.bd </b><i>special-font font</i>
                  Stop emboldening <i>special-font</i> when <i>font</i> is selected.
       <b>.bd </b><i>special-font font n</i>
                  Embolden <i>special-font,</i> overstriking its glyphs offset
                  by <i>n</i>-1 units when <i>font</i> is selected.  See register <b>.b</b>.
       <b>.blm       </b>Unset blank line macro (trap).  Restore default
                  handling of blank lines.
       <b>.blm </b><i>mac</i>   Set blank line macro (trap) to <i>mac</i>.
       <b>.box       </b>Stop directing output to current diversion; any
                  pending output line is discarded.
       <b>.box </b><i>ident</i> Direct output to diversion <i>ident</i>, omitting a partially
                  collected line.
       <b>.boxa      </b>Stop appending output to current diversion; any
                  pending output line is discarded.
       <b>.boxa </b><i>div</i>  Append output to diversion <i>div</i>, omitting a partially
                  collected line.
       <b>.bp        </b>Break page and start a new one.
       <b>.bp </b><i>±N</i>     Break page, starting a new one numbered <i>±N</i>.
       <b>.br        </b>Break output line.
       <b>.brp       </b>Break output line; adjust if applicable.
       <b>.break     </b>Break out of a <b>.while </b>loop.
       <b>.c2        </b>Reset no-break control character to “<b>'</b>”.
       <b>.c2 </b><i>o</i>      Recognize ordinary character <i>o</i> as no-break control
                  character.
       <b>.cc        </b>Reset control character to ‘<b>.</b>’.
       <b>.cc </b><i>o</i>      Recognize ordinary character <i>o</i> as the control
                  character.
       <b>.ce        </b>Break, center the output of the next productive input
                  line without filling, and break again.
       <b>.ce </b><i>npl</i>    Break, center the output of the next <i>npl</i> productive
                  input lines without filling, then break again.  If <i>npl</i>
                  ≤ 0, stop centering.
       <b>.cf </b><i>file</i>   Copy contents of <i>file</i> without formatting to the (top-
                  level) diversion.
       <b>.cflags </b><i>n c1 c2</i> ...
                  Assign properties encoded by <i>n</i> to characters <i>c1</i>, <i>c2</i>,
                  and so on.
       <b>.ch </b><i>mac</i>    Unplant page location trap <i>mac</i>.
       <b>.ch </b><i>mac vertical-position</i>
                  Change page location trap <i>mac</i> planted by <b>.wh </b>by moving
                  its location to <i>vertical-position</i> (default scaling
                  unit <b>v</b>).
       <b>.char </b><i>c</i>    Remove definition of ordinary or special character <i>c.</i>
       <b>.char </b><i>c contents</i>
                  Define ordinary or special character <i>c</i> as <i>anything.</i>  A
                  leading neutral double quote in the second argument is
                  stripped from it, allowing embedded leading spaces in
                  <i>contents,</i> which is read in copy mode and continues to
                  the end of the input line.
       <b>.chop </b><i>name</i> Remove the last character from the macro, string, or
                  diversion <i>name.</i>
       <b>.class </b><i>ident c1 c2</i> ...
                  Define a (character) class <i>ident</i> comprising the
                  characters or range expressions <i>c1</i>, <i>c2</i>, and so on.
       <b>.close </b><i>stream</i>
                  Close <i>stream</i>, making it unavailable for <b>.write</b>
                  requests.
       <b>.color     </b>Enable output of color-related device-independent
                  output commands.  It is enabled by default.
       <b>.color </b><i>b</i>   Enable or disable output of color-related device-
                  independent output commands per Boolean expression <i>b</i>.
       <b>.composite </b><i>c1 c2</i>
                  Map ordinary or special character <i>c1</i> to <i>c2</i> when <i>c1</i> is
                  a combining component in a composite character.
       <b>.continue  </b>Finish the current iteration of a <b>.while </b>loop.
       <b>.cp        </b>Enable AT&amp;T <i>troff</i> compatibility mode.  It is disabled
                  by default.
       <b>.cp </b><i>b</i>      Enable or disable AT&amp;T <i>troff</i> compatibility mode per
                  Boolean expression <i>b</i>.
       <b>.cs </b><i>font n m</i>
                  Set constant character width mode for <i>font</i> to <i>n</i>/36 ems
                  with em <i>m</i>.
       <b>.cu        </b>Continuously underline the output of the next
                  productive input line.
       <b>.cu </b><i>npl</i>    Continuously underline the output of the next <i>npl</i>
                  productive input lines.  If <i>npl</i>=0, stop continuously
                  underlining.
       <b>.da        </b>Stop appending output to current diversion.
       <b>.da </b><i>div</i>    Append output to diversion <i>div</i>.
       <b>.de </b><i>ident</i>  Define macro <i>ident</i> until “<b>..</b>” occurs at the start of a
                  control line in the current conditional block.
       <b>.de </b><i>ident end-mac</i>
                  Define macro <i>ident</i> until <i>end-mac</i> is called at the
                  start of a control line in the current conditional
                  block.  <i>end-mac</i> can be a request.
       <b>.de1 </b><i>ident</i> As <b>.de</b>, with compatibility mode disabled when <i>mac</i> is
                  interpreted.
       <b>.de1 </b><i>ident end-mac</i>
                  As “<b>.de </b><i>ident end-mac</i>”, with compatibility mode
                  disabled when <i>mac</i> is interpreted.
       <b>.defcolor </b><i>ident scheme color-component</i> ...
                  Define a color named <i>ident.</i>  <i>scheme</i> identifies a color
                  space and determines the number of required <i>color-</i>
                  <i>component</i>s; it must be one of “<b>rgb</b>” (three
                  components), “<b>cmy</b>” (three), “<b>cmyk</b>” (four), or “<b>gray</b>”
                  (one).  “<b>grey</b>” is accepted as a synonym of “<b>gray</b>”.
                  The color components can be encoded as a single
                  hexadecimal value starting with <b># </b>or <b>##</b>.  The former
                  indicates that each component is in the range 0–255
                  (0–FF), the latter the range 0–65,535 (0–FFFF).
                  Alternatively, each color component can be specified
                  as a decimal fraction in the range 0–1, interpreted
                  using a default scaling unit of “<b>f</b>”, which multiplies
                  its value by 65,536 (but clamps it at 65,535).
       <b>.dei </b><i>str</i>   Define macro indirectly.  As <b>.de</b>, but interpolate
                  string <i>str</i> to obtain the macro's name.
       <b>.dei </b><i>str end-mac-str</i>
                  Define macro indirectly.  As <b>.de</b>, but <i>str</i> and <i>end-mac-</i>
                  <i>str</i> contain the names of the macro to be defined, and
                  that whose call ends the definition, respectively.
       <b>.dei1 </b><i>str</i>  As <b>.dei</b>, with compatibility mode disabled when the
                  macro is interpreted.
       <b>.dei1 </b><i>str end-mac-str</i>
                  As <b>.dei</b>, with compatibility mode disabled when the
                  macro is interpreted.
       <b>.device </b><i>contents</i>
                  Write <i>contents</i>, read in copy mode, to <i>troff</i> output as
                  a device control command.  A leading neutral double
                  quote is stripped to allow embedding of leading
                  spaces.
       <b>.devicem </b><i>name</i>
                  Write contents of macro or string <i>name</i> to <i>troff</i> output
                  as a device control command.
       <b>.di        </b>Stop directing output to current diversion.
       <b>.di </b><i>ident</i>  Direct output to diversion <i>ident</i>.
       <b>.do </b><i>name</i> ...
                  Interpret the string, request, diversion, or macro
                  <i>name</i> (along with any arguments) with compatibility
                  mode disabled.  Compatibility mode is restored (only
                  if it was active) when the <i>expansion</i> of <i>name</i> is
                  interpreted.
       <b>.ds </b><i>ident</i>  Create empty string named <i>ident</i>.
       <b>.ds </b><i>ident contents</i>
                  Create a string named <i>ident</i> containing <i>contents.</i>  A
                  leading neutral double quote in the second argument is
                  stripped from it, allowing embedded leading spaces in
                  <i>contents,</i> which is read in copy mode and continues to
                  the end of the input line.
       <b>.ds1 </b><i>ident</i>
       <b>.ds1 </b><i>ident contents</i>
                  As <b>.ds</b>, with compatibility mode disabled when the
                  string is interpreted.
       <b>.dt        </b>Clear diversion trap.
       <b>.dt </b><i>vertical-position mac</i>
                  Set the diversion trap to macro <i>mac</i> at <i>vertical-</i>
                  <i>position</i> (default scaling unit <b>v</b>).
       <b>.ec        </b>Recognize <b>\ </b>as the escape character.
       <b>.ec </b><i>o</i>      Recognize ordinary character <i>o</i> as the escape
                  character.
       <b>.ecr       </b>Restore escape character saved with <b>.ecs</b>.
       <b>.ecs       </b>Save the escape character.
       <b>.el </b><i>anything</i>
                  Interpret <i>anything</i> as if it were an input line if the
                  conditional expression of the corresponding <b>.ie</b>
                  request was false.
       <b>.em </b><i>mac</i>    Call macro <i>mac</i> after the end of input.
       <b>.eo        </b>Disable the escape mechanism in interpretation mode.
       <b>.ev        </b>Pop environment stack, returning to previous one.
       <b>.ev </b><i>env</i>    Push current environment onto stack and switch to <i>env</i>,
                  creating it if necessary.
       <b>.evc </b><i>env</i>   Copy environment <i>env</i> to the current one.
       <b>.ex        </b>Exit with successful status.
       <b>.fam       </b>Set default font family to previous value.
       <b>.fam </b><i>name</i>  Set default font family to <i>name</i>.
       <b>.fc        </b>Disable field mechanism.
       <b>.fc </b><i>c</i>      Set field delimiter to <i>c</i> and pad glyph to space.
       <b>.fc </b><i>c1 c2</i>  Set field delimiter to <i>c1</i> and pad glyph to <i>c2</i>.
       <b>.fchar </b><i>c</i>   Remove definition of fallback character <i>c.</i>
       <b>.fchar </b><i>c contents</i>
                  Define fallback character <i>c</i> as <i>contents</i>.  As <b>.char</b>,
                  but while that request hides a glyph with the same
                  name in the selected font, <b>fchar </b>definitions are used
                  only if the font lacks a glyph for <i>c</i>.
       <b>.fcolor    </b>Restore previous fill color.
       <b>.fcolor </b><i>color</i>
                  Select <i>color</i> as the fill color.
       <b>.fi        </b>Enable filling of output lines; a pending output line
                  is broken.  Sets <b>\n[.u]</b>.
       <b>.fl        </b>Flush any pending output line.
       <b>.fp </b><i>pos id</i> Mount font with font description file name <i>id</i> at non-
                  negative position <i>pos</i>.
       <b>.fp </b><i>pos id font-description-file-name</i>
                  Mount font with <i>font-description-file-name</i> as name <i>id</i>
                  at non-negative position <i>pos</i>.
       <b>.fschar </b><i>f c</i>
                  Remove definition of fallback character <i>c</i> specific to
                  font <i>f.</i>
       <b>.fschar </b><i>f c contents</i>
                  Define fallback character <i>c</i> specific to font <i>f</i> as
                  <i>contents</i>.  As <b>char</b>, but a character defined by <b>fschar</b>
                  is located after the list of fonts declared with
                  <b>fspecial </b>is searched and before those declared with
                  the “<b>special</b>” request.
       <b>.fspecial </b><i>font</i>
                  Empty the list of fonts treated as special when <i>font</i>
                  is selected.
       <b>.fspecial </b><i>font s1 s2</i> ...
                  When <i>font</i> is selected, treat the fonts <i>s1</i>, <i>s2</i>, ... as
                  special.
       <b>.ft</b>
       <b>.ft P      </b>Select previous font mounting position (abstract style
                  or font); same as <b>\f[] </b>or <b>\fP</b>.
       <b>.ft </b><i>font</i>   Select typeface <i>font,</i> a mounting position, abstract
                  style, or font name; same as <b>\f[</b><i>font</i><b>] </b>escape sequence.
                  <i>font</i> cannot be <b>P</b>.
       <b>.ftr </b><i>f</i>     Remove translation of font named <i>f</i>.
       <b>.ftr </b><i>f1 f2</i> Translate font name <i>f1</i> to <i>f2</i>.
       <b>.fzoom </b><i>font</i>
       <b>.fzoom </b><i>font</i> <b>0</b>
                  Stop magnifying <i>font</i>.
       <b>.fzoom </b><i>font zoom</i>
                  Set magnification of mounted <i>font</i> to <i>zoom</i>, a
                  multiplier of the current type size in thousandths
                  (default: 1000).
       <b>.gcolor    </b>Restore previous stroke color.
       <b>.gcolor </b><i>color</i>
                  Select <i>color</i> as the stroke color.
       <b>.hc        </b>Reset the hyphenation character to <b>\% </b>(the default).
       <b>.hc </b><i>c</i>      Change the hyphenation character to <i>c</i>.
       <b>.hcode </b><i>c1 code1</i> [<i>c2 code2</i>] ...
                  Set the hyphenation code of character <i>c1</i> to <i>code1</i>,
                  that of <i>c2</i> to <i>code2</i>, and so on.
       <b>.hla       </b>Clear hyphenation language (disabling automatic
                  hyphenation).
       <b>.hla </b><i>ident</i> Set the hyphenation language to <i>ident</i>.
       <b>.hlm       </b>Set the consecutive automatically hyphenated line
                  limit to <b>-1</b>, meaning “no limit”.
       <b>.hlm </b><i>n</i>     Set the consecutive automatically hyphenated line
                  limit to to <i>n.</i>  A negative value means “no limit”.
       <b>.hpf </b><i>pattern-file</i>
                  Read hyphenation patterns from <i>pattern-file</i>.
       <b>.hpfa </b><i>pattern-file</i>
                  Append hyphenation patterns from <i>pattern-file</i>.
       <b>.hpfcode </b><i>a b</i> [<i>c d</i>] ...
                  Define mappings for character codes in hyphenation
                  pattern files read with <b>.hpf </b>and <b>.hpfa</b>.
       <b>.hw </b><i>word</i> ...
                  Define hyphenation overrides for each <i>word;</i> a hyphen
                  “<b>-</b>” indicates a hyphenation point.
       <b>.hy        </b>Set automatic hyphenation mode to the value of the
                  <b>.hydefault </b>register.
       <b>.hy 0      </b>Disable automatic hyphenation; same as <b>.nh</b>.
       <b>.hy </b><i>mode</i>   Set automatic hyphenation mode to <i>mode</i>; see section
                  “Hyphenation” below.
       <b>.hydefault </b><i>mode</i>
                  Set hyphenation mode default to <i>mode</i>; see section
                  “Hyphenation” below.
       <b>.hym       </b>Set the (right) hyphenation margin to <b>0 </b>(the default).
       <b>.hym </b><i>length</i>
                  Set the (right) hyphenation margin to <i>length</i> (default
                  scaling unit <b>m</b>).
       <b>.hys       </b>Set the hyphenation space to <b>0 </b>(the default).
       <b>.hys </b><i>hyphenation-space</i>
                  Suppress automatic hyphenation in adjustment modes “<b>b</b>”
                  or “<b>n</b>” if the line can be justified with the addition
                  of up to <i>hyphenation-space</i> to each inter-word space
                  (default scaling unit <b>m</b>).
       <b>.ie </b><i>cond-expr anything</i>
                  If <i>cond-expr</i> is true, interpret <i>anything</i> as if it were
                  an input line, otherwise skip to a corresponding <b>.el</b>
                  request.
       <b>.if </b><i>cond-expr anything</i>
                  If <i>cond-expr</i> is true, then interpret <i>anything</i> as if it
                  were an input line.
       <b>.ig        </b>Ignore input (except for side effects of <b>\R </b>on auto-
                  incrementing registers) until “<b>..</b>” occurs at the start
                  of a control line in the current conditional block.
       <b>.ig </b><i>end-mac</i>
                  Ignore input (except for side effects of <b>\R </b>on auto-
                  incrementing registers) until <i>end-mac</i> is called at the
                  start of a control line in the current conditional
                  block.  <i>end-mac</i> can be a request.
       <b>.in        </b>Set indentation amount to previous value.
       <b>.in </b><i>±N</i>     Set indentation to <i>±N</i> (default scaling unit <b>m</b>).
       <b>.it        </b>Cancel any pending input line trap.
       <b>.it </b><i>npl mac</i>
                  Set (or replace) an input line trap in the
                  environment, calling <i>mac</i> after the next <i>npl</i> productive
                  input lines have been read.  Lines interrupted with
                  the <b>\c </b>escape sequence are counted separately.
       <b>.itc       </b>Cancel any pending input line trap.
       <b>.itc </b><i>npl mac</i>
                  As <b>.it</b>, except that input lines interrupted with the
                  <b>\c </b>escape sequence are not counted.
       <b>.kern      </b>Enable pairwise kerning.
       <b>.kern </b><i>n</i>    If <i>n</i> is zero, disable pairwise kerning, otherwise
                  enable it.
       <b>.lc        </b>Unset leader repetition character.
       <b>.lc </b><i>c</i>      Set leader repetition character to <i>c</i> (default: “<b>.</b>”).
       <b>.length </b><i>reg anything</i>
                  Compute the number of characters of <i>anything</i> and store
                  the count in the register <i>reg</i>.
       <b>.linetabs  </b>Activate line-tabs in the environment.  It is disabled
                  by default.
       <b>.linetabs </b><i>b</i>
                  Activate or deactivate line-tabs in the environment
                  per Boolean expression <i>b</i>.
       <b>.lf </b><i>n</i>      Set number of next input line to <i>n</i>.
       <b>.lf </b><i>n file</i> Set number of next input line to <i>n</i> and input file name
                  to <i>file</i>.
       <b>.lg </b><i>m</i>      Set ligature mode to <i>m</i> (<b>0 </b>= disable, <b>1 </b>= enable, <b>2 </b>=
                  enable for two-letter ligatures only).
       <b>.ll        </b>Set line length to previous value.  Does not affect a
                  pending output line.
       <b>.ll </b><i>±N</i>     Set line length to <i>±N</i> (default length 6.5<b>i</b>, default
                  scaling unit <b>m</b>).  Does not affect a pending output
                  line.
       <b>.lsm       </b>Unset the leading space macro (trap).  Restore default
                  handling of lines with leading spaces.
       <b>.lsm </b><i>mac</i>   Set the leading space macro (trap) to <i>mac</i>.
       <b>.ls        </b>Change to the previous value of additional intra-line
                  skip.
       <b>.ls </b><i>n</i>      Set additional intra-line skip value to <i>n</i>, i.e., <i>n</i>-1
                  blank lines are inserted after each text output line.
       <b>.lt        </b>Set length of title lines to previous value.
       <b>.lt </b><i>±N</i>     Set length of title lines (default length 6.5<b>i</b>,
                  default scaling unit <b>m</b>).
       <b>.mc        </b>Cease writing margin character.
       <b>.mc </b><i>c</i>      Begin writing margin character <i>c</i> to the right of each
                  output line.
       <b>.mc </b><i>c d</i>    Begin writing margin character <i>c</i> on each output line
                  at distance <i>d</i> to the right of the right margin
                  (default distance 10<b>p</b>, default scaling unit <b>m</b>).
       <b>.mk        </b>Mark vertical drawing position in an internal
                  register; see <b>.rt</b>.
       <b>.mk </b><i>reg</i>    Mark vertical drawing position in register <i>reg</i>.
       <b>.mso </b><i>file</i>  As <b>.so</b>, except that <i>file</i> is sought in the <i>tmac</i>
                  directories.
       <b>.msoquiet </b><i>file</i>
                  As <b>.mso</b>, but no warning is emitted if <i>file</i> does not
                  exist.
       <b>.na        </b>Disable output line adjustment.
       <b>.ne        </b>Break page if distance to next page location trap is
                  less than one vee.
       <b>.ne </b><i>d</i>      Break page if distance to next page location trap is
                  less than distance <i>d</i> (default scaling unit <b>v</b>).
       <b>.nf        </b>Disable filling of output lines; a pending output line
                  is broken.  Clears <b>\n[.u]</b>.
       <b>.nh        </b>Disable automatic hyphenation; same as “<b>.hy 0</b>”.
       <b>.nm        </b>Deactivate output line numbering.
       <b>.nm </b><i>±N</i>
       <b>.nm </b><i>±N m</i>
       <b>.nm </b><i>±N m s</i>
       <b>.nm </b><i>±N m s i</i>
                  Activate output line numbering: number the next output
                  line <i>±N,</i> writing numbers every <i>m</i> lines, with <i>s</i> numeral
                  widths (<b>\0</b>) between the line number and the output
                  (default 1), and indenting the line number by <i>i</i>
                  numeral widths (default 0).
       <b>.nn        </b>Suppress numbering of the next output line to be
                  numbered with <b>nm</b>.
       <b>.nn </b><i>n</i>      Suppress numbering of the next <i>n</i> output lines to be
                  numbered with <b>nm</b>.  If <i>n</i>=0, cancel suppression.
       <b>.nop </b><i>anything</i>
                  Interpret <i>anything</i> as if it were an input line.
       <b>.nr </b><i>reg ±N</i> Define or update register <i>reg</i> with value <i>N</i>.
       <b>.nr </b><i>reg ±N I</i>
                  Define or update register <i>reg</i> with value <i>N</i> and auto-
                  increment <i>I</i>.
       <b>.nroff     </b>Make the conditional expressions <b>n </b>true and <b>t </b>false.
       <b>.ns        </b>Enable <i>no-space mode</i>, ignoring <b>.sp </b>requests until a
                  glyph or <b>\D </b>primitive is output.  See <b>.rs</b>.
       <b>.nx        </b>Stop processing the input file and read the next, if
                  any.
       <b>.nx </b><i>file</i>   Stop processing the input file and read <i>file</i>.
       <b>.open </b><i>ident file</i>
                  Open <i>file</i> for writing and associate a stream named
                  <i>ident</i> with it, making it available for <b>.write</b>
                  requests.  Unsafe request; disabled by default.
       <b>.opena </b><i>ident file</i>
                  As <b>.open</b>, but append to <i>file.</i>  Unsafe request;
                  disabled by default.
       <b>.os        </b>Output vertical distance that was saved by the <b>.sv</b>
                  request.
       <b>.output </b><i>contents</i>
                  Emit <i>contents</i> directly to <i>troff</i>'s output.  A leading
                  neutral double quote in the argument is stripped,
                  allowing embedded leading spaces in <i>contents</i>, which is
                  read in copy mode and continues to the end of the
                  input line.
       <b>.pc        </b>Reset page number character to ‘<b>%</b>’.
       <b>.pc </b><i>c</i>      Change the page number character used in titles to <i>c</i>.
       <b>.pcolor    </b>Report, to the standard error stream, the list of
                  defined color names.  A device's default stroke and/or
                  fill colors, “default”, are not listed since they are
                  immutable and their details unknown to the formatter.
       <b>.pcomposite</b>
                  Report, to the standard error stream, the list of
                  defined composite characters.  The “from” code point
                  is listed first, followed by its “to” mapping.
       <b>.pev       </b>Report the state of the current environment followed
                  by that of all other environments to the standard
                  error stream.
       <b>.phw       </b>Report, to the standard error stream, the list of
                  hyphenation exceptions.  Each hyphenation point is
                  marked with “<b>-</b>”.  Words that will not be hyphenated at
                  all are prefixed with “<b>-</b>”.  Those to which the
                  automatic hyphenation mode applies (meaning those
                  defined in a hyphenation pattern file rather than with
                  the <b>hw </b>request) are suffixed with a tab and asterisk
                  (<b>*</b>).
       <b>.pi </b><i>program</i>
                  Pipe output to <i>program</i> (<i>nroff</i> only).  Unsafe request;
                  disabled by default.
       <b>.pl        </b>Set page length to default 11<b>i</b>.  The current page
                  length is stored in register <b>.p</b>.
       <b>.pl </b><i>±N</i>     Change page length to <i>±N</i> (default scaling unit <b>v</b>).
       <b>.pline     </b>Report, to the standard error stream, the list of
                  output nodes corresponding to the pending output line.
                  The list is empty if there are none.
       <b>.pm        </b>Report, to the standard error stream, the names and
                  sizes in bytes of defined macros, strings, and
                  diversions.
       <b>.pn </b><i>±N</i>     Set next page number.
       <b>.pnr       </b>Report the names and contents of all defined registers
                  to the standard error stream.
       <b>.po        </b>Change to previous page offset.  The current page
                  offset is available in register <b>.o</b>.
       <b>.po </b><i>±N</i>     Alter page offset (default scaling unit <b>m</b>).
       <b>.ps        </b>Restore previous type size.
       <b>.ps </b><i>±N</i>     Set/increase/decrease the type size to/by <i>N</i> scaled
                  points (a non-positive resulting type size is set to
                  1 u); also see <b>\s[</b><i>±N</i><b>]</b>.
       <b>.psbb </b><i>file</i> Retrieve the bounding box of the PostScript image
                  found in <i>file,</i> which must conform to Adobe's Document
                  Structuring Conventions (DSC).  See registers <b>llx</b>,
                  <b>lly</b>, <b>urx</b>, <b>ury</b>.
       <b>.pso </b><i>command-line</i>
                  Execute <i>command-line</i> with <i>popen</i>(3) and interpolate its
                  output.  Unsafe request; disabled by default.
       <b>.ptr       </b>Report names and positions of all page location traps
                  to the standard error stream.
       <b>.pvs       </b>Change to previous post-vertical line spacing.
       <b>.pvs </b><i>±N</i>    Change post-vertical line spacing according to <i>±N</i>
                  (default scaling unit <b>p</b>).
       <b>.rchar </b><i>c1 c2</i> ...
                  Remove definition of each ordinary or special
                  character <i>c1</i>, <i>c2</i>, ... defined by a <b>.char</b>, <b>.fchar</b>, or
                  <b>.schar </b>request.
       <b>.rd </b><i>prompt</i> Read insertion.
       <b>.return    </b>Stop interpreting an interpolated macro, skipping the
                  remainder of its definition.
       <b>.return </b><i>anything</i>
                  As <b>return</b>, but perform the skip twice—once within the
                  macro being interpreted and once in an enclosing
                  macro.
       <b>.rfschar </b><i>f c1 c2</i> ...
                  Remove the font-specific definitions of glyphs <i>c1</i>, <i>c2</i>,
                  ... for font <i>f</i>.
       <b>.rj        </b>Break, right-align the output of the next productive
                  input line without filling, then break again.
       <b>.rj </b><i>npl</i>    Break, right-align the output of the next <i>npl</i>
                  productive input lines without filling, then break
                  again.  If <i>npl</i> ≤ 0, stop right-aligning.
       <b>.rm </b><i>name</i> ...
                  Remove each request, macro, diversion, or string <i>name</i>.
       <b>.rn </b><i>old new</i>
                  Rename request, macro, diversion, or string <i>old</i> to
                  <i>new</i>.
       <b>.rnn </b><i>reg1 reg2</i>
                  Rename register <i>reg1</i> to <i>reg2</i>.
       <b>.rr </b><i>reg</i> ...
                  Remove each register <i>reg</i>.
       <b>.rs        </b>Restore spacing; disable no-space mode.  See <b>.ns</b>.
       <b>.rt        </b>Return <i>(upward only)</i> to vertical position marked by
                  <b>.mk </b>on the current page.
       <b>.rt </b><i>N</i>      Return <i>(upward only)</i> to vertical position <i>N</i> (default
                  scaling unit <b>v</b>).
       <b>.schar </b><i>c</i>   Remove definition of global fallback character <i>c.</i>
       <b>.schar </b><i>c contents</i>
                  Define global fallback character <i>c</i> as <i>contents</i>.  As
                  <b>char</b>, but a character defined with <b>schar </b>is located
                  after the list of fonts declared with the <b>.special</b>
                  request and before any mounted special fonts.
       <b>.shc       </b>Reset the soft hyphen character to <b>\[hy]</b>.
       <b>.shc </b><i>c</i>     Set the soft hyphen character to <i>c</i>.
       <b>.shift </b><i>n</i>   In a macro definition, left-shift arguments by
                  <i>n</i> positions.
       <b>.sizes </b><i>s1 s2</i> ... <i>sn</i> [<b>0</b>]
                  Set available type sizes similarly to the <b>sizes</b>
                  directive in a <i>DESC</i> file.  Each <i>s</i>i is interpreted in
                  units of scaled points (<b>z</b>).
       <b>.so </b><i>file</i>   Replace the request's control line with the contents
                  of <i>file</i>, “sourcing” it.
       <b>.soquiet </b><i>file</i>
                  As <b>.so</b>, but no warning is emitted if <i>file</i> does not
                  exist.
       <b>.sp        </b>Break and move the next text baseline down by one vee,
                  or until springing a page location trap.
       <b>.sp </b><i>dist</i>   Break and move the next text baseline down by <i>dist</i>, or
                  until springing a page location trap (default scaling
                  unit <b>v</b>).  A negative <i>dist</i> will not reduce the position
                  of the text baseline below zero.  Prefixing <i>dist</i> with
                  the <b>| </b>operator moves to a position relative to the
                  page top for positive <i>N</i>, and the bottom if <i>N</i> is
                  negative; in all cases, one line height (vee) is added
                  to <i>dist</i>.  <i>dist</i> is ignored inside a diversion.
       <b>.special   </b>Reset global list of fallback special fonts to be
                  empty.
       <b>.special </b><i>s1 s2</i> ...
                  Fonts <i>s1</i>, <i>s2</i>, etc. are special and are searched for
                  glyphs not in the current font.
       <b>.spreadwarn</b>
                  Toggle the spread warning on and off (the default)
                  without changing its value.
       <b>.spreadwarn </b><i>N</i>
                  Emit a <b>break </b>warning if the additional space inserted
                  for each space between words in an adjusted output
                  line is greater than or equal to <i>N</i>.  A negative <i>N</i> is
                  treated as 0.  The default scaling unit is <b>m</b>.  At
                  startup, <b>.spreadwarn </b>is inactive and <i>N</i> is 3 m<b>.</b>
       <b>.ss </b><i>n</i>      Set minimum inter-word space and additional inter-
                  sentence space sizes to <i>n</i> 12ths of the selected font's
                  <b>spacewidth </b>parameter (default: 12).
       <b>.ss </b><i>n m</i>    As “<b>.ss </b><i>n</i>”, but set additional inter-sentence space
                  size to <i>n</i> 12ths of the selected font's <b>spacewidth</b>
                  parameter.
       <b>.stringdown </b><i>stringvar</i>
                  Replace each byte in the string named <i>stringvar</i> with
                  its lowercase version.
       <b>.stringup </b><i>stringvar</i>
                  Replace each byte in the string named <i>stringvar</i> with
                  its uppercase version.
       <b>.sty </b><i>pos style</i>
                  Associate abstract <i>style</i> with non-negative font
                  position <i>pos</i>.
       <b>.substring </b><i>str start</i> [<i>end</i>]
                  Replace the string named <i>str</i> with its substring
                  bounded by the indices <i>start</i> and <i>end</i>, inclusive.
                  Negative indices count backwards from the end of the
                  string.
       <b>.sv        </b>As <b>.ne</b>, but save 1 v for output with <b>.os </b>request.
       <b>.sv </b><i>d</i>      As <b>.ne</b>, but save distance <i>d</i> for later output with <b>.os</b>
                  request (default scaling unit <b>v</b>).
       <b>.sy </b><i>command-line</i>
                  Execute <i>command-line</i> with <i>system</i>(3).  Unsafe request;
                  disabled by default.
       <b>.ta </b><i>n1 n2</i> ... <i>n</i>n <b>T </b><i>r1 r2</i> ... <i>r</i>n
                  Set tabs at positions <i>n1</i>, <i>n2</i>, ..., <i>n</i>n, then set tabs
                  at <i>n</i>n+<i>m</i>×<i>r</i>n+<i>r1</i> through <i>n</i>n+<i>m</i>×<i>r</i>n+<i>r</i>n, where <i>m</i> increments
                  from 0, 1, 2, ... to the output line length.  Each
                  <i>n</i> argument can be prefixed with a “<b>+</b>” to place the tab
                  stop <i>ni</i> at a distance relative to the previous,
                  <i>n</i>(<i>i</i>-1).  Each argument <i>ni</i> or <i>ri</i> can be suffixed with a
                  letter to align text within the tab column bounded by
                  tab stops <i>i</i> and <i>i</i>+1; “<b>L</b>” for left-aligned (the
                  default), “<b>C</b>” for centered, and “<b>R</b>” for right-aligned.
       <b>.tag       </b>Reserved for internal use.
       <b>.taga      </b>Reserved for internal use.
       <b>.tc        </b>Unset tab repetition character.
       <b>.tc </b><i>c</i>      Set tab repetition character to <i>c</i> (default: none).
       <b>.ti </b><i>±N</i>     Temporarily indent next output line (default scaling
                  unit <b>m</b>).
       <b>.tkf </b><i>font s1 n1 s2 n2</i>
                  Enable track kerning for <i>font</i>.
       <b>.tl '</b><i>left</i><b>'</b><i>center</i><b>'</b><i>right</i><b>'</b>
                  Format three-part title.
       <b>.tm </b><i>message</i>
                  Write <i>message,</i> followed by a newline, to the standard
                  error stream.
       <b>.tm1 </b><i>message</i>
                  As <b>.tm</b>, but recognizes and strips a leading neutral
                  double quote, allowing embedded leading spaces in
                  <i>message</i>.
       <b>.tmc </b><i>message</i>
                  As <b>.tm1</b>, without emitting a newline.
       <b>.tr </b><i>abcd</i>...
                  Translate ordinary or special characters <i>a</i> to <i>b</i>, <i>c</i> to
                  <i>d</i>, and so on prior to output.
       <b>.trf </b><i>file</i>  Transparently output the contents of <i>file.</i>  Unlike
                  <b>.cf</b>, invalid input characters in <i>file</i> are rejected.
       <b>.trin </b><i>abcd</i>...
                  As <b>.tr</b>, except that <b>.asciify </b>ignores the translation
                  when a diversion is interpolated.
       <b>.trnt </b><i>abcd</i>...
                  As <b>.tr</b>, except that translations are suppressed in the
                  argument to <b>\!</b>.
       <b>.troff     </b>Make the conditional expressions <b>t </b>true and <b>n </b>false.
       <b>.uf </b><i>font</i>   Set underline font used by <b>.ul </b>to <i>font.</i>
       <b>.ul        </b>Underline (italicize in <i>troff</i> mode) the output of the
                  next productive input line.
       <b>.ul </b><i>npl</i>    Underline (italicize in <i>troff</i> mode) the output of the
                  next <i>npl</i> productive input line.  If <i>npl</i>=0, stop
                  underlining.
       <b>.unformat </b><i>div</i>
                  Unformat space characters and tabs in diversion <i>div</i>,
                  preserving font information.
       <b>.vpt       </b>Enable vertical position traps.  They are enabled by
                  default.
       <b>.vpt </b><i>b</i>     Enable or disable vertical position traps per Boolean
                  expression <i>b</i>.
       <b>.vs        </b>Change to previous vertical spacing.
       <b>.vs </b><i>±N</i>     Set vertical spacing to <i>±N</i> (default scaling unit <b>p</b>).
       <b>.warn      </b>Enable all warning categories.
       <b>.warn 0    </b>Disable all warning categories.
       <b>.warn </b><i>n</i>    Enable warnings in categories whose codes sum to <i>n</i>;
                  see <i>troff</i>(1).
       <b>.warnscale </b><i>scaling-unit</i>
                  Select scaling unit used in certain warnings (one of
                  <b>u</b>, <b>i</b>, <b>c</b>, <b>p</b>, or <b>P</b>; default: <b>i</b>).  Ignored in <b>nroff </b>mode.
       <b>.wh </b><i>vertical-position</i>
                  Remove visible page location trap at <i>vertical-position</i>
                  (default scaling unit <b>v</b>).
       <b>.wh </b><i>vertical-position mac</i>
                  Plant macro <i>mac</i> as page location trap at <i>vertical-</i>
                  <i>position</i> (default scaling unit <b>v</b>), removing any
                  visible trap already there.
       <b>.while </b><i>cond-expr anything</i>
                  Repeatedly execute <i>anything</i> unless and until <i>cond-expr</i>
                  evaluates false.
       <b>.write </b><i>stream contents</i>
                  Write <i>contents</i> to <i>stream</i>, which must previously have
                  been the subject of an <b>.open </b>request, followed by a
                  newline.  A leading neutral double quote in the second
                  argument is stripped, allowing embedded leading spaces
                  in <i>contents</i>, which is read in copy mode until the end
                  of the line.
       <b>.writec </b><i>stream contents</i>
                  As <b>.write</b>, but does not append a newline to <i>contents</i>.
       <b>.writem </b><i>stream name</i>
                  Write contents of macro or string <i>name</i> to <i>stream</i>.
</pre> <h2>
Escape sequence short reference </h2>
<pre>
       The escape sequences <b>\"</b>, <b>\#</b>, <b>\$</b>, <b>\*</b>, <b>\?</b>, <b>\a</b>, <b>\e</b>, <b>\n</b>, <b>\t</b>, <b>\g</b>, <b>\V</b>,
       and <b>\</b><i>newline</i> are interpreted even in copy mode.

       The escape sequences <b>\f</b>, <b>\F</b>, <b>\H</b>, <b>\m</b>, <b>\M</b>, <b>\R</b>, <b>\s</b>, and <b>\S </b>are not
       tokenized when <i>groff</i> reads its input; <b>\R </b>updates only the
       formatter's internal state, and the rest only the environment.
       They do not contribute (directly) to output; see the “Gtroff
       Internals” section of the <i>groff</i> Texinfo manual.

       <b>\"     </b>Comment; ignore everything up to the next newline.
       <b>\#     </b>Comment; ignore everything up to and including the next
              newline.
       <b>\*</b><i>s</i>    Interpolate string with one-character name <i>s</i>.
       <b>\*(</b><i>st</i>  Interpolate string with two-character name <i>st</i>.
       <b>\*[</b><i>string</i><b>]</b>
              Interpolate string with name <i>string</i> (of arbitrary length).
       <b>\*[</b><i>string arg</i> ...<b>]</b>
              Interpolate string with name <i>string</i> (of arbitrary length),
              taking <i>arg</i> ... as arguments.
       <b>\$0    </b>Interpolate name by which currently executing macro was
              invoked.
       <b>\$</b><i>n</i>    Interpolate macro or string parameter numbered <i>n</i> (1≤<i>n</i>≤9).
       <b>\$(</b><i>nn</i>  Interpolate macro or string parameter numbered <i>nn</i>
              (01≤<i>nn</i>≤99).
       <b>\$[</b><i>nnn</i><b>]</b>
              Interpolate macro or string parameter numbered <i>nnn</i>
              (<i>nnn</i>≥1).
       <b>\$*    </b>Interpolate concatenation of all macro or string
              parameters, separated by spaces.
       <b>\$@    </b>Interpolate concatenation of all macro or string
              parameters, with each surrounded by double quotes and
              separated by spaces.
       <b>\$^    </b>Interpolate concatenation of all macro or string
              parameters as if they were arguments to the <b>.ds </b>request.
       <b>\'     </b>is a synonym for <b>\[aa]</b>, the acute accent special
              character.
       <b>\`     </b>is a synonym for <b>\[ga]</b>, the grave accent special
              character.
       <b>\-     </b>is a synonym for <b>\[-]</b>, the minus sign special character.
       <b>\_     </b>is a synonym for <b>\[ul]</b>, the underrule special character.
       <b>\%     </b>Control hyphenation.
       <b>\!     </b>Transparent line.  The remainder of the input line is
              interpreted (1) when the current diversion is read; or (2)
              if in the top-level diversion, by the postprocessor (if
              any).
       <b>\?</b><i>anything</i><b>\?</b>
              Transparently embed <i>anything</i>, read in copy mode, in a
              diversion, or unformatted as an output comparand in a
              conditional expression.  Ignored in the top-level
              diversion.
       <b>\</b><i>space</i> Move right one inter-word space.
       <b>\~     </b>Insert an unbreakable, adjustable space.
       <b>\0     </b>Move right by the width of a numeral in the current font.
       <b>\|     </b>Move one-sixth em to the right on typesetters.
       <b>\^     </b>Move one-twelfth em to the right on typesetters.
       <b>\&amp;     </b>Interpolate a dummy character.
       <b>\)     </b>Interpolate a dummy character that is transparent to end-
              of-sentence recognition.
       <b>\/     </b>Apply italic correction.  Use between an immediately
              adjacent oblique glyph on the left and an upright glyph on
              the right.
       <b>\,     </b>Apply left italic correction.  Use between an immediately
              adjacent upright glyph on the left and an oblique glyph on
              the right.
       <b>\:     </b>Non-printing break point (similar to <b>\%</b>, but never
              produces a hyphen glyph).
       <b>\</b><i>newline</i>
              Continue current input line on the next.
       <b>\{     </b>Begin conditional input.
       <b>\}     </b>End conditional input.
       <b>\(</b><i>gl</i>   Interpolate glyph with two-character name <i>gl</i>.
       <b>\[</b><i>glyph</i><b>]</b>
              Interpolate glyph with name <i>glyph</i> (of arbitrary length).
       <b>\[</b><i>base-char comp</i> ...<b>]</b>
              Interpolate composite glyph constructed from <i>base-char</i> and
              each component <i>comp</i>.
       <b>\[char</b><i>nnn</i><b>]</b>
              Interpolate glyph of eight-bit encoded character <i>nnn</i>,
              where 0≤<i>nnn</i>≤255.
       <b>\[u</b><i>nnnn</i>[<i>n</i>[<i>n</i>]]<b>]</b>
              Interpolate glyph of Unicode character with code point
              <i>nnnn</i>[<i>n</i>[<i>n</i>]] in uppercase hexadecimal.
       <b>\[u</b><i>base-char</i>[<b>_</b><i>combining-component</i>]...<b>]</b>
              Interpolate composite glyph from Unicode character <i>base-</i>
              <i>char</i> and <i>combining-components</i>.
       <b>\a     </b>Interpolate a leader in copy mode.
       <b>\A'</b><i>anything</i><b>'</b>
              Interpolate 1 if <i>anything</i> is a valid identifier, and 0
              otherwise.
       <b>\b'</b><i>string</i><b>'</b>
              Build bracket: pile a sequence of glyphs corresponding to
              each character in <i>string</i> vertically, and center it
              vertically on the output line.
       <b>\B'</b><i>anything</i><b>'</b>
              Interpolate 1 if <i>anything</i> is a valid numeric expression,
              and 0 otherwise.
       <b>\c     </b>Continue output line at next input line.
       <b>\C'</b><i>glyph</i><b>'</b>
              As <b>\[</b><i>glyph</i><b>]</b>, but compatible with other <i>troff</i>
              implementations.
       <b>\d     </b>Move downward ½ em on typesetters.
       <b>\D'</b><i>drawing-command</i><b>'</b>
              See subsection “Drawing commands” below.
       <b>\e     </b>Interpolate the escape character.
       <b>\E     </b>As <b>\e</b>, but not interpreted in copy mode.
       <b>\fP    </b>Select previous font mounting position (abstract style or
              font); same as “<b>.ft</b>” or “<b>.ft P</b>”.
       <b>\f</b><i>F</i>    Select font mounting position, abstract style, or font
              with one-character name or one-digit position <i>F</i>.  <i>F</i> cannot
              be <b>P</b>.
       <b>\f(</b><i>ft</i>  Select font mounting position, abstract style, or font
              with two-character name or two-digit position <i>ft</i>.
       <b>\f[</b><i>font</i><b>]</b>
              Select font mounting position, abstract style, or font
              with arbitrarily long name or position <i>font</i>.  <i>font</i> cannot
              be <b>P</b>.
       <b>\f[]   </b>Select previous font mounting position (abstract style or
              font).
       <b>\F</b><i>f</i>    Set default font family to that with one-character name <i>f</i>.
       <b>\F(</b><i>fm</i>  Set default font family to that with two-character
              name <i>fm</i>.
       <b>\F[</b><i>fam</i><b>]</b>
              Set default font family to that with arbitrarily long name
              <i>fam</i>.
       <b>\F[]   </b>Set default font family to previous value.
       <b>\g</b><i>r</i>    Interpolate format of register with one-character name <i>r</i>.
       <b>\g(</b><i>rg</i>  Interpolate format of register with two-character name <i>rg</i>.
       <b>\g[</b><i>reg</i><b>]</b>
              Interpolate format of register with arbitrarily long name
              <i>reg</i>.
       <b>\h'</b><i>N</i><b>'  </b>Horizontally move the drawing position by <i>N</i> ems (or
              specified units); <b>| </b>may be used.  Positive motion is
              rightward.
       <b>\H'</b><i>N</i><b>'  </b>Set height of current font to <i>N</i> scaled points (or
              specified units).
       <b>\k</b><i>r</i>    Mark horizontal position in one-character register name <i>r</i>.
       <b>\k(</b><i>rg</i>  Mark horizontal position in two-character register
              name <i>rg</i>.
       <b>\k[</b><i>reg</i><b>]</b>
              Mark horizontal position in register with arbitrarily long
              name <i>reg</i>.
       <b>\l'</b><i>N</i>[<i>c</i>]<b>'</b>
              Draw horizontal line of length <i>N</i> with character <b>c</b>
              (default: <b>\[ru]</b>; default scaling unit <b>m</b>).
       <b>\L'</b><i>N</i>[<i>c</i>]<b>'</b>
              Draw vertical line of length <i>N</i> with character <b>c </b>(default:
              <b>\[br]</b>; default scaling unit <b>v</b>).
       <b>\m</b><i>c</i>    Set stroke color to that with one-character name <i>c</i>.
       <b>\m(</b><i>cl</i>  Set stroke color to that with two-character name <i>cl</i>.
       <b>\m[</b><i>color</i><b>]</b>
              Set stroke color to that with arbitrarily long name <i>color</i>.
       <b>\m[]   </b>Restore previous stroke color.
       <b>\M</b><i>c</i>    Set fill color to that with one-character name <i>c</i>.
       <b>\M(</b><i>cl</i>  Set fill color to that with two-character name <i>cl</i>.
       <b>\M[</b><i>color</i><b>]</b>
              Set fill color to that with arbitrarily long name <i>color</i>.
       <b>\M[]   </b>Restore previous fill color.
       <b>\n</b><i>r</i>    Interpolate contents of register with one-character
              name <i>r</i>.
       <b>\n(</b><i>rg</i>  Interpolate contents of register with two-character
              name <i>rg</i>.
       <b>\n[</b><i>reg</i><b>]</b>
              Interpolate contents of register with arbitrarily long
              name <i>reg</i>.
       <b>\N'</b><i>n</i><b>'  </b>Interpolate glyph with index <i>n</i> in the current font.
       <b>\o'</b><i>abc</i>...<b>'</b>
              Overstrike centered glyphs of characters <i>a</i>, <i>b</i>, <i>c</i>, and so
              on.
       <b>\O0    </b>At the outermost suppression level, disable emission of
              glyphs and geometric objects to the output driver.
       <b>\O1    </b>At the outermost suppression level, enable emission of
              glyphs and geometric objects to the output driver.
       <b>\O2    </b>At the outermost suppression level, enable glyph and
              geometric primitive emission to the output driver and
              write to the standard error stream the page number, four
              bounding box registers enclosing glyphs written since the
              previous <b>\O </b>escape sequence, the page offset, line length,
              image file name (if any), horizontal and vertical device
              motion quanta, and input file name.
       <b>\O3    </b>Begin a nested suppression level.
       <b>\O4    </b>End a nested suppression level.
       <b>\O[5</b><i>Pfile</i><b>]</b>
              At the outermost suppression level, write the name <i>file</i> to
              the standard error stream at position <i>P</i>, which must be one
              of <b>l</b>, <b>r</b>, <b>c</b>, or <b>i</b>.
       <b>\p     </b>Break output line at next word boundary; adjust if
              applicable.
       <b>\r     </b>Move “in reverse” (upward) 1 em.
       <b>\R'</b><i>name ±N</i><b>'</b>
              Set, increment, or decrement register <i>name</i> by <i>N</i>.
       <b>\s</b><i>±N</i>   Set/increase/decrease the type size to/by <i>N</i> scaled points.
              <i>N</i> must be a single digit; 0 restores the previous type
              size.  (In compatibility mode only, a non-zero <i>N</i> must be
              in the range 4–39.)  Otherwise, as <b>.ps </b>request.
       <b>\s(</b><i>±N</i>
       <b>\s</b><i>±</i><b>(</b><i>N</i>  Set/increase/decrease the type size to/by <i>N</i> scaled points;
              <i>N</i> is a two-digit number ≥1.  As <b>.ps </b>request.
       <b>\s[</b><i>±N</i><b>]</b>
       <b>\s</b><i>±</i><b>[</b><i>N</i><b>]</b>
       <b>\s'</b><i>±N</i><b>'</b>
       <b>\s</b><i>±</i><b>'</b><i>N</i><b>' </b>Set/increase/decrease the type size to/by <i>N</i> scaled points.
              As <b>.ps </b>request.
       <b>\S'</b><i>N</i><b>'  </b>Slant output glyphs by <i>N</i> degrees; the direction of text
              flow is positive.
       <b>\t     </b>Interpolate a tab in copy mode.
       <b>\u     </b>Move upward ½ em on typesetters.
       <b>\v'</b><i>N</i><b>'  </b>Vertically move the drawing position by <i>N</i> vees (or
              specified units); <b>| </b>may be used.  Positive motion is
              downward.
       <b>\V</b><i>e</i>    Interpolate contents of environment variable with one-
              character name <i>e</i>.
       <b>\V(</b><i>ev</i>  Interpolate contents of environment variable with two-
              character name <i>ev</i>.
       <b>\V[</b><i>env</i><b>]</b>
              Interpolate contents of environment variable with
              arbitrarily long name <i>env</i>.
       <b>\w'</b><i>anything</i><b>'</b>
              Interpolate width of <i>anything</i>, formatted in a dummy
              environment.
       <b>\x'</b><i>N</i><b>'  </b>Increase vertical spacing of pending output line by <i>N</i> vees
              (or specified units; negative before, positive after).
       <b>\X'</b><i>contents</i><b>'</b>
              Write <i>contents</i> to <i>troff</i> output as a device control
              command.  Within <i>anything</i>, the escape sequences <b>\&amp;</b>, <b>\)</b>,
              <b>\%</b>, and <b>\: </b>are ignored; <b>\</b><i>space</i> and <b>\~ </b>are converted to
              single space characters; and <b>\\ </b>has its escape character
              stripped.  So that the basic Latin subset of the Unicode
              character set can be reliably encoded in <i>anything,</i> the
              special character escape sequences <b>\-</b>, <b>\[aq]</b>, <b>\[dq]</b>,
              <b>\[ga]</b>, <b>\[ha]</b>, <b>\[rs]</b>, and <b>\[ti] </b>are mapped to basic Latin
              characters; see <i>groff_char</i>(7).  For this transformation,
              character translations and special character definitions
              are ignored.
       <b>\Y</b><i>n</i>    Write contents of macro or string <i>n</i> to <i>troff</i> output as a
              device control command.
       <b>\Y(</b><i>nm</i>  Write contents of macro or string <i>nm</i> to <i>troff</i> output as a
              device control command.
       <b>\Y[</b><i>name</i><b>]</b>
              Write contents of macro or string <i>name</i> to <i>troff</i> output as
              a device control command.
       <b>\z</b><i>c</i>    Format character <i>c</i> with zero width—without advancing the
              drawing position.
       <b>\Z'</b><i>anything</i><b>'</b>
              Save the drawing position, format <i>anything</i>, then restore
              it.

   <b>Drawing commands</b>
       Drawing commands direct the output device to render geometrical
       objects rather than glyphs.  Specific devices may support only a
       subset, or may feature additional ones; consult the man page for
       the output driver in use.  Terminals in particular implement
       almost none.

       Rendering starts at the drawing position; when finished, the
       drawing position is left at the rightmost point of the object,
       even for closed figures, except where noted.  GNU <i>troff</i> draws
       stroked (outlined) objects with the stroke color, and shades
       filled ones with the fill color.  See section “Colors” above.
       Coordinates <i>h</i> and <i>v</i> are horizontal and vertical motions relative
       to the drawing position or previous point in the command.  The
       default scaling unit for horizontal measurements (and diameters
       of circles) is <b>m</b>; for vertical ones, <b>v</b>.

       Circles, ellipses, and polygons can be drawn stroked or filled.
       These are independent properties; if you want a filled, stroked
       figure, you must draw the same figure twice using each drawing
       command.  A filled figure is always smaller than an outlined one
       because the former is drawn only within its defined area, whereas
       strokes have a line thickness (set with <b>\D't'</b>).

       <b>\D'~ </b><i>h1 v1</i> ... <i>hn vn</i><b>'</b>
              Draw B-spline to each point in sequence, leaving drawing
              position at (<i>hn</i>, <i>vn</i>).
       <b>\D'a </b><i>hc vc h v</i><b>'</b>
              Draw circular arc centered at (<i>hc</i>, <i>vc</i>) counterclockwise
              from the drawing position to a point (<i>h</i>, <i>v</i>) relative to
              the center.  (<i>hc</i>, <i>vc</i>) is adjusted to the point nearest the
              perpendicular bisector of the arc's chord.
       <b>\D'c </b><i>d</i><b>'</b>
              Draw circle of diameter <i>d</i> with its leftmost point at the
              drawing position.
       <b>\D'C </b><i>d</i><b>'</b>
              As <b>\D'C'</b>, but the circle is filled.
       <b>\D'e </b><i>h v</i><b>'</b>
              Draw ellipse of width <i>h</i> and height <i>v</i> with its leftmost
              point at the drawing position.
       <b>\D'E </b><i>h v</i><b>'</b>
              As <b>\D'e'</b>, but the ellipse is filled.
       <b>\D'l </b><i>h v</i><b>'</b>
              Draw line from the drawing position to (<i>h</i>, <i>v</i>).
       <b>\D'p </b><i>h1 v1</i> ... <i>hn vn</i><b>'</b>
              Draw polygon with vertices at drawing position and each
              point in sequence.  GNU <i>troff</i> closes the polygon by
              drawing a line from (<i>hn</i>, <i>vn</i>) back to the initial drawing
              position.  Afterward, the drawing position is left at
              (<i>hn</i>, <i>vn</i>).
       <b>\D'P </b><i>h1 v1</i> ... <i>hn vn</i><b>'</b>
              As <b>\D'p'</b>, but the polygon is filled.
       <b>\D't </b><i>n</i><b>'</b>
              Set stroke thickness of geometric objects to to <i>n</i> basic
              units.  A zero <i>n</i> selects the minimal supported thickness.
              A negative <i>n</i> selects a thickness proportional to the type
              size; this is the default.
</pre> <h2>
Strings </h2>
<pre>
       <i>groff</i> supports strings primarily for user convenience.
       Conventionally, if one would define a macro only to interpolate a
       small amount of text, without invoking requests or calling any
       other macros, one defines a string instead.  Only one string is
       predefined by the language.

       \*[<b>.T</b>]     Contains the name of the output device (for example,
                  “<b>utf8</b>” or “<b>pdf</b>”<b>).</b>

       The <b>.ds </b>request creates a string with a specified name and
       contents.  If the identifier named by <b>.ds </b>already exists as an
       alias, the target of the alias is redefined.  If <b>.ds </b>is called
       with only one argument, the named string becomes empty.
       Otherwise, <i>troff</i> stores the remainder of the control line in copy
       mode; see subsection “Copy mode” below.

       The <b>\* </b>escape sequence dereferences a string's name,
       interpolating its contents.  If the name does not exist, it is
       defined as empty, nothing is interpolated, and a warning in
       category “<b>mac</b>” is emitted.  See section “Warnings” in <i>troff</i>(1).
       The bracketed interpolation form accepts arguments that are
       handled as macro arguments are; see section “Calling macros”
       above.  In contrast to macro calls, however, if a closing bracket
       <b>] </b>occurs in a string argument, that argument must be enclosed in
       double quotes.  When defining strings, argument interpolations
       must be escaped if they are to reference parameters from the
       calling context; see section “Parameters” below.

       The formatter removes a leading neutral double quote <b>" </b>in the
       string contents to permit the embedding of leading spaces.  Any
       other <b>" </b>is interpreted literally, but it is wise to use the
       special character escape sequence <b>\[dq] </b>instead if the string
       might be interpolated as part of a macro argument; see section
       “Calling macros” above.  Strings are not limited to a single
       input line of text.  <b>\</b><i>newline</i> works just as it does elsewhere.
       The resulting string is stored <i>without</i> the newlines.  When
       filling is disabled, care is required to avoid overrunning the
       line length when interpolating strings.  Conversely, when filling
       is enabled, it is not necessary to append <b>\c </b>to a string
       interpolation to prevent a break afterward, as might be required
       in a macro argument.  Nor does a string require use of the GNU
       <i>troff</i> <b>chop </b>request to excise a trailing newline as is often done
       with diversions.  It is not possible to embed a newline in a
       string that will be interpreted as such when the string is
       interpolated.  To achieve that effect, use <b>\* </b>to interpolate a
       macro instead.

       The <b>.as </b>request is similar to <b>.ds </b>but appends to a string instead
       of redefining it.  If <b>.as </b>is called with only one argument, no
       operation is performed (beyond dereferencing the string).

       Because strings are similar to macros, they too can be defined to
       suppress AT&amp;T <i>troff</i> compatibility mode enablement when
       interpolated; see section “Compatibility mode” below.  The <b>.ds1</b>
       request defines a string that suspends compatibility mode when
       the string is later interpolated.  <b>.as1 </b>is likewise similar to
       <b>.as</b>, with compatibility mode suspended when the appended portion
       of the string is later interpolated.

       <b>Caution: </b>The <b>ds </b>request, unlike others, treats the remainder of
       the input line as its second argument, including trailing spaces.
       Ending string definitions (and appendments) with a comment, even
       an empty one, prevents unwanted space from creeping into them
       during source document maintenance.

       Several requests exist to perform rudimentary string operations.
       Strings can be queried (<b>.length</b>) and modified (<b>.chop</b>, <b>.substring</b>,
       <b>.stringup</b>, <b>.stringdown</b>), and their names can be manipulated
       through renaming, removal, and aliasing (<b>.rn</b>, <b>.rm</b>, <b>.als).</b>

       Redefinitions and appendments “write through” request, macro,
       string, and diversion names.  To replace an aliased object with a
       separately defined one, you must use the <b>rm </b>request on its name
       first.
</pre> <h2>
Registers </h2>
<pre>
       In the <i>roff</i> language, numbers can be stored in <i>registers.</i>  Many
       built-in registers exist, supplying anything from the date to
       details of formatting parameters.  You can also define your own.
       See section “Identifiers” above for information on constructing a
       valid name for a register.

       Define registers and update their values with the <b>nr </b>request or
       the <b>\R </b>escape sequence.

       Registers can also be incremented or decremented by a configured
       amount at the time they are interpolated.  The value of the
       increment is specified with a third argument to the <b>.nr </b>request,
       and a special interpolation syntax, <b>\n</b><i>±</i>, is used to alter and
       then retrieve the register's value.  Together, these features are
       called <i>auto-increment</i>.  (A negative auto-increment can be
       considered an “auto-decrement”.)

       Many predefined registers are available.  In the following
       presentation, the register interpolation syntax <b>\n[</b><i>name</i><b>] </b>is used
       to refer to a register <i>name</i> to clearly distinguish it from a
       string or request <i>name</i>.  The register name space is separate from
       that used for requests, macros, strings, and diversions.  Bear in
       mind that the symbols <b>\n[] </b>are <i>not</i> part of the register name.

   <b>Read-only registers</b>
       Predefined registers whose identifiers start with a dot are read-
       only.  Many are Boolean-valued.  Some are string-valued, meaning
       that they interpolate text.  A register name (without the dot) is
       often associated with a request of the same name; exceptions are
       noted.

       \n[<b>.$</b>] Count of arguments passed to currently interpolated macro
              or string.
       \n[<b>.a</b>] Amount of extra post-vertical line space; see <b>\x</b>.
       \n[<b>.A</b>] Approximate output is being formatted (Boolean-valued);
              see <i>troff</i> <b>-a </b>option.
       \n[<b>.b</b>] Font emboldening offset; see <b>.bd</b>.
       \n[<b>.br</b>]
              The normal control character was used to call the
              currently interpolated macro (Boolean-valued).
       \n[<b>.c</b>] Input line number; see <b>.lf </b>and register “<b>c.</b>”.
       \n[<b>.C</b>] Compatibility mode is enabled (Boolean-valued); see <b>.cp</b>.
              Always false when processing <b>.do</b>; see register <b>.cp</b>.
       \n[<b>.cdp</b>]
              Depth of last glyph formatted in the environment; positive
              if glyph extends below the baseline.
       \n[<b>.ce</b>]
              Count of output lines remaining to be centered.
       \n[<b>.cht</b>]
              Height of last glyph formatted in the environment;
              positive if glyph extends above the baseline.
       \n[<b>.color</b>]
              Color output is enabled (Boolean-valued).
       \n[<b>.cp</b>]
              Within <b>.do</b>, the saved value of compatibility mode; see
              register <b>.C</b>.
       \n[<b>.csk</b>]
              Skew of the last glyph formatted in the environment; see
              register <b>skw</b>.
       \n[<b>.d</b>] Vertical drawing position in diversion.
       \n[<b>.ev</b>]
              Name of environment (string-valued).
       \n[<b>.f</b>] Mounting position of selected font; see <b>.ft </b>and <b>\f</b>.
       \n[<b>.F</b>] Name of input file (string-valued); see <b>.lf</b>.
       \n[<b>.fam</b>]
              Name of default font family (string-valued).
       \n[<b>.fn</b>]
              Resolved name of selected font (string-valued); see <b>.ft</b>
              and <b>\f</b>.
       \n[<b>.fp</b>]
              Next non-zero free font mounting position index.
       \n[<b>.g</b>] Always true in GNU <i>troff</i> (Boolean-valued).
       \n[<b>.h</b>] Text baseline high-water mark on page or in diversion.
       \n[<b>.H</b>] Horizontal motion quantum of output device in basic units.
       \n[<b>.height</b>]
              Font height; see <b>\H</b>.
       \n[<b>.hla</b>]
              Hyphenation language in environment (string-valued).
       \n[<b>.hlc</b>]
              Count of immediately preceding consecutive hyphenated
              lines in environment.
       \n[<b>.hlm</b>]
              Maximum quantity of consecutive hyphenated lines allowed
              in environment.
       \n[<b>.hy</b>]
              Automatic hyphenation mode in environment.
       \n[<b>.hydefault</b>]
              Hyphenation mode default in environment.
       \n[<b>.hym</b>]
              Hyphenation margin in environment.
       \n[<b>.hys</b>]
              Hyphenation space adjustment threshold in environment.
       \n[<b>.i</b>] Indentation amount; see <b>.in</b>.
       \n[<b>.in</b>]
              Indentation amount applicable to the pending output line;
              see <b>.ti</b>.
       \n[<b>.int</b>]
              Previous output line was “interrupted” or continued with
              <b>\c </b>(Boolean-valued).
       \n[<b>.it</b>]
              The count of lines remaining in the pending input trap.
       \n[<b>.itc</b>]
              The pending input trap honors output line continuation <b>\c</b>
              (Boolean-valued).
       \n[<b>.itm</b>]
              Name of the macro associated with the pending input trap
              (string-valued).
       \n[<b>.j</b>] Adjustment mode encoded as an integer; see <b>.ad </b>and <b>.na</b>.
              Do not interpret or perform arithmetic on its value.
       \n[<b>.k</b>] Horizontal drawing position relative to indentation.
       \n[<b>.kern</b>]
              Pairwise kerning is enabled (Boolean-valued).
       \n[<b>.l</b>] Line length; see <b>.ll</b>.
       \n[<b>.L</b>] Line spacing; see <b>.ls</b>.
       \n[<b>.lg</b>]
              Ligature mode.
       \n[<b>.linetabs</b>]
              Line-tabs mode is enabled (Boolean-valued).
       \n[<b>.ll</b>]
              Line length applicable to the pending output line.
       \n[<b>.lt</b>]
              Title length.
       \n[<b>.m</b>] Stroke color (string-valued); see <b>.gcolor </b>and <b>\m</b>.  The
              default stroke color is named “<b>default</b>”.
       \n[<b>.M</b>] Fill color (string-valued); see <b>.fcolor </b>and <b>\M</b>.  The
              default fill color is named “<b>default</b>”.
       \n[<b>.n</b>] Length of formatted output on previous output line.
       \n[<b>.ne</b>]
              Amount of vertical space required by last <b>.ne </b>that caused
              a trap to be sprung; also see register <b>.trunc</b>.
       \n[<b>.nm</b>]
              Output line numbering is enabled (Boolean-valued).
       \n[<b>.nn</b>]
              Count of output lines remaining to have numbering
              suppressed.
       \n[<b>.ns</b>]
              No-space mode is enabled (Boolean-valued).
       \n[<b>.o</b>] Page offset; see <b>.po</b>.
       \n[<b>.O</b>] Output suppression nesting level; see <b>\O</b>.
       \n[<b>.p</b>] Page length; see <b>.pl</b>.
       \n[<b>.P</b>] The page is selected for output (Boolean-valued); see
              <i>troff</i> <b>-o </b>option.
       \n[<b>.pe</b>]
              Page ejection is in progress (Boolean-valued).
       \n[<b>.pn</b>]
              Number of the next page.
       \n[<b>.ps</b>]
              Type size in scaled points.
       \n[<b>.psr</b>]
              Most recently requested type size in scaled points; see
              <b>.ps </b>and <b>\s</b>.
       \n[<b>.pvs</b>]
              Post-vertical line spacing.
       \n[<b>.R</b>] Count of available unused registers; always 10,000 in GNU
              <i>troff</i>.
       \n[<b>.rj</b>]
              Count of lines remaining to be right-aligned.
       \n[<b>.s</b>] Type size in points as a decimal fraction (string-valued);
              see <b>.ps </b>and <b>\s</b>.
       \n[<b>.slant</b>]
              Slant of font in degrees; see <b>\S</b>.
       \n[<b>.sr</b>]
              Most recently requested type size in points as a decimal
              fraction (string-valued); see <b>.ps </b>and <b>\s</b>.
       \n[<b>.ss</b>]
              Size of minimal inter-word space in twelfths of the space
              width of the selected font.
       \n[<b>.sss</b>]
              Size of additional inter-sentence space in twelfths of the
              space width of the selected font.
       \n[<b>.sty</b>]
              Selected abstract style (string-valued); see <b>.ft </b>and <b>\f</b>.
       \n[<b>.t</b>] Distance to next vertical position trap; see <b>.wh </b>and <b>.ch</b>.
       \n[<b>.T</b>] An output device was explicitly selected (Boolean-valued);
              see <i>troff</i> <b>-T </b>option.
       \n[<b>.tabs</b>]
              Representation of tab settings suitable for use as
              argument to <b>.ta </b>(string-valued).
       \n[<b>.trap</b>]
              Name of the next vertical position trap that will be
              sprung (string-valued); see <b>.wh</b>, <b>.ch</b>, and <b>.dt</b>.
       \n[<b>.trunc</b>]
              Amount of vertical space truncated by the most recently
              sprung vertical position trap, or, if the trap was sprung
              by an <b>.ne</b>, minus the amount of vertical motion produced by
              <b>.ne</b>; also see register <b>.ne</b>.
       \n[<b>.u</b>] Filling is enabled (Boolean-valued); see <b>.fi </b>and <b>.nf</b>.
       \n[<b>.U</b>] Unsafe mode is enabled (Boolean-valued); see <i>troff</i> <b>-U</b>
              option.
       \n[<b>.v</b>] Vertical line spacing; see <b>.vs</b>.
       \n[<b>.V</b>] Vertical motion quantum of the output device in basic
              units.
       \n[<b>.vpt</b>]
              Vertical position traps are enabled (Boolean-valued).
       \n[<b>.w</b>] Width of last glyph formatted in the environment.
       \n[<b>.warn</b>]
              Sum of the numeric codes of enabled warning categories.
       \n[<b>.x</b>] Major version number of the running <i>troff</i> formatter.
       \n[<b>.y</b>] Minor version number of the running <i>troff</i> formatter.
       \n[<b>.Y</b>] Revision number of the running <i>troff</i> formatter.
       \n[<b>.z</b>] Name of diversion (string-valued).  Empty if output is
              directed to the top-level diversion.
       \n[<b>.zoom</b>]
              Zoom multiplier of current font (in thousandths; zero if
              no magnification); see <b>.fzoom</b>.

   <b>Writable predefined registers</b>
       Several registers are predefined but also modifiable; some are
       updated upon interpretation of certain requests or escape
       sequences.  Date- and time-related registers are set to the local
       time as determined by <i>localtime</i>(3) when the formatter launches.
       This initialization can be overridden by <i>SOURCE_DATE_EPOCH</i> and
       <i>TZ</i>; see section “Environment” of <i>groff</i>(1).

       \n[<b>$$</b>] Process ID of <i>troff</i>.
       \n[<b>%</b>]  Page number.
       \n[<b>c.</b>] Input line number.
       \n[<b>ct</b>] Union of character types of each glyph rendered into dummy
              environment by <b>\w</b>.
       \n[<b>dl</b>] Width of last closed diversion.
       \n[<b>dn</b>] Height of last closed diversion.
       \n[<b>dw</b>] Day of the week (1–7; 1 is Sunday).
       \n[<b>dy</b>] Day of the month (1–31).
       \n[<b>hours</b>]
              Count of hours elapsed since midnight (0–23).
       \n[<b>hp</b>] Horizontal drawing position relative to that at the start
              of the input line.
       \n[<b>llx</b>]
              Lower-left <i>x</i> coordinate (in PostScript units) of
              PostScript image; see <b>.psbb</b>.
       \n[<b>lly</b>]
              Lower-left <i>y</i> coordinate (in PostScript units) of
              PostScript image; see <b>.psbb</b>.
       \n[<b>ln</b>] Output line number; see <b>.nm</b>.
       \n[<b>lsn</b>]
              Count of leading spaces on input line.
       \n[<b>lss</b>]
              Amount of horizontal space corresponding to leading spaces
              on input line.
       \n[<b>minutes</b>]
              Count of minutes elapsed in the hour (0–59).
       \n[<b>mo</b>] Month of the year (1–12).
       \n[<b>nl</b>] Vertical drawing position.
       \n[<b>opmaxx</b>]
       \n[<b>opmaxy</b>]
       \n[<b>opminx</b>]
       \n[<b>opminy</b>]
              These four registers mark the top left- and bottom right-
              hand corners of a rectangle encompassing all formatted
              output on the page.  They are reset to -1 by <b>\O0 </b>or <b>\O1</b>.
       \n[<b>rsb</b>]
              As register <b>sb</b>, adding maximum glyph height to
              measurement.
       \n[<b>rst</b>]
              As register <b>st</b>, adding maximum glyph depth to measurement.
       \n[<b>sb</b>] Maximum displacement of text baseline below its original
              position after rendering into dummy environment by <b>\w</b>.
       \n[<b>seconds</b>]
              Count of seconds elapsed in the minute (0–60).
       \n[<b>skw</b>]
              Skew of last glyph rendered into dummy environment by <b>\w</b>.
       \n[<b>slimit</b>]
              The maximum depth of <i>troff</i>'s internal input stack.  If ≤0,
              there is no limit: recursion can continue until available
              memory is exhausted.  The default is 1,000.
       \n[<b>ssc</b>]
              Subscript correction of last glyph rendered into dummy
              environment by <b>\w</b>.
       \n[<b>st</b>] Maximum displacement of text baseline above its original
              position after rendering into dummy environment by <b>\w</b>.
       \n[<b>systat</b>]
              Return value of <i>system</i>(3); see <b>.sy</b>.
       \n[<b>urx</b>]
              Upper-right <i>x</i> coordinate (in PostScript units) of
              PostScript image; see <b>.psbb</b>.
       \n[<b>ury</b>]
              Upper-right <i>y</i> coordinate (in PostScript units) of
              PostScript image; see <b>.psbb</b>.
       \n[<b>year</b>]
              Gregorian year.
       \n[<b>yr</b>] Gregorian year minus 1900.
</pre> <h2>
Using fonts </h2>
<pre>
       In digital typography, a <i>font</i> is a collection of characters in a
       specific typeface that a device can render as glyphs at a desired
       size.  (Terminals and some typesetters have fonts that render at
       only one or two sizes.  As examples, take the <i>groff</i> <b>lj4 </b>device's
       Lineprinter, and <b>lbp</b>'s Courier and Elite faces.)  A <i>roff</i>
       formatter can change typefaces at any point in the text.  The
       basic faces are a set of <i>styles</i> combining upright and slanted
       shapes with normal and heavy stroke weights: “<b>R</b>”, “<b>I</b>”, “<b>B</b>”, and
       “<b>BI</b>”—these stand for <i>roman, bold, italic,</i> and <i>bold-italic.</i>  For
       linguistic text, GNU <i>troff</i> groups typefaces into <i>families</i>
       containing each of these styles.  (Font designers prepare
       families such that the styles share esthetic properties.)  A <i>text</i>
       <i>font</i> is thus often a family combined with a style, but it need
       not be: consider the <b>ps </b>and <b>pdf </b>devices' <b>ZCMI </b>(Zapf Chancery
       Medium italic)—often, no other style of Zapf Chancery Medium is
       provided.  On typesetters, at least one <i>special font</i> is
       available, comprising <i>unstyled</i> glyphs for mathematical operators
       and other purposes.

       Like the AT&amp;T <i>troff</i> formatter, GNU <i>troff</i> does not itself load or
       manipulate a digital font file; instead it works with a <i>font</i>
       <i>description file</i> that characterizes it, including its glyph
       repertoire and the <i>metrics</i> (dimensions) of each glyph.  This
       information permits the formatter to accurately place glyphs with
       respect to each other.  Before using a font description, the
       formatter associates it with a <i>mounting position,</i> a place in an
       ordered list of available typefaces.  So that a document need not
       be strongly coupled to a specific font family, in GNU <i>troff</i> an
       output device can associate a style in the abstract sense with a
       mounting position.  Thus the default family can be combined with
       a style dynamically, producing a <i>resolved font name.</i>  A user-
       specified font name that combines family and style (or refers to
       a font that is not a member of a family) is already “resolved”.

       Fonts often have trademarked names, and even Free Software fonts
       can require renaming upon modification.  <i>groff</i> maintains a
       convention that a device's serif font family is given the name <b>T</b>
       (“Times”), its sans-serif family <b>H </b>(“Helvetica”), and its
       monospaced family <b>C </b>(“Courier”).  Historical inertia has driven
       <i>groff</i>'s font identifiers to short uppercase abbreviations of font
       names, as with <b>TR</b>, <b>TB</b>, <b>TI</b>, <b>TBI</b>, and a special font <b>S</b>.

       The default family used with abstract styles can be changed at
       any time; initially, it is <b>T</b>.  Typically, abstract styles are
       arranged in the first four mounting positions in the order shown
       above.  The default mounting position, and therefore style, is
       always <b>1 </b>(<b>R</b>).  By issuing appropriate formatter instructions, you
       can override these defaults before your document writes its first
       glyph.

       Terminals cannot change font families and lack special fonts.
       They support style changes by overstriking, or by altering
       ISO 6429/ECMA-48 <i>graphic renditions</i> (character cell attributes).

       The <b>ft </b>request and <b>\f </b>escape sequence select a typeface by name,
       abstract style, or mounting position.  The <b>fam </b>request and <b>\F</b>
       escape sequence set the default font family.  The <b>ftr </b>request
       translates one font name to another; <b>fzoom </b>magnifies a resolved
       one.  <b>sty </b>and <b>fp </b>associate abstract styles and font names with
       mounting positions.
</pre> <h2>
Hyphenation </h2>
<pre>
       When filling, <i>groff</i> hyphenates words as needed at user-specified
       and automatically determined hyphenation points.  Explicitly
       hyphenated words such as “mother-in-law” are always eligible for
       breaking after each of their hyphens.  The hyphenation
       character <b>\% </b>and non-printing break point <b>\: </b>escape sequences may
       be used to control the hyphenation and breaking of individual
       words.  The <b>.hw </b>request sets user-defined hyphenation points for
       specified words at any subsequent occurrence.  Otherwise, <i>groff</i>
       determines hyphenation points automatically by default.

       Several requests influence automatic hyphenation.  Because
       conventions vary, a variety of hyphenation modes is available to
       the <b>.hy </b>request; these determine whether hyphenation will apply
       to a word prior to breaking a line at the end of a page (more or
       less; see below for details), and at which positions within that
       word automatically determined hyphenation points are permissible.
       The localization macro files loaded by <i>troffrc</i> configure a
       default hyphenation mode appropriate to the language.

       <b>0      </b>disables hyphenation.

       <b>1      </b>enables hyphenation except after the first and before the
              last character of a word.

       The remaining values “imply” <b>1</b>; that is, they enable hyphenation
       under the same conditions as “<b>.hy 1</b>”, and then apply or lift
       restrictions relative to that basis.

       <b>2      </b>disables hyphenation of the last word on a page.
              (Hyphenation is prevented if the next page location trap
              is closer to the vertical drawing position than the next
              text baseline would be.  See section “Traps” below.)

       <b>4      </b>disables hyphenation before the last two characters of a
              word.

       <b>8      </b>disables hyphenation after the first two characters of a
              word.

       <b>16     </b>enables hyphenation before the last character of a word.

       <b>32     </b>enables hyphenation after the first character of a word.

       Apart from value 2, restrictions imposed by the hyphenation mode
       are <i>not</i> respected for words whose hyphenations have been
       specified with the hyphenation character (“<b>\%</b>” by default) or the
       <b>.hw </b>request.

       Nonzero values are additive.  For example, mode 12 causes <i>groff</i>
       to hyphenate neither the last two nor the first two characters of
       a word.  Some values cannot be used together because they
       contradict; for instance, values 4 and 16, and values 8 and 32.
       As noted, it is superfluous to add 1 to any non-zero even mode.

       The places within a word that are eligible for hyphenation are
       determined by language-specific data (<b>.hla</b>, <b>.hpf</b>, and <b>.hpfa</b>) and
       lettercase relationships (<b>.hcode </b>and <b>.hpfcode</b>).  Furthermore,
       hyphenation of a word might be suppressed due to a limit on
       consecutive hyphenated lines (<b>.hlm</b>), a minimum line length
       threshold (<b>.hym</b>), or because the line can instead be adjusted
       with additional inter-word space (<b>.hys</b>).
</pre> <h2>
Localization </h2>
<pre>
       The set of hyphenation patterns is associated with the
       hyphenation language set by the <b>.hla </b>request.  The <b>.hpf </b>request
       is usually invoked by a localization file loaded by the <i>troffrc</i>
       file.  <i>groff</i> provides localization files for several languages;
       see <i>groff_tmac</i>(5).  These also set the default automatic
       hyphenation mode with <b>.hydefault</b>.
</pre> <h2>
Writing macros </h2>
<pre>
       The <b>.de </b>request defines a macro named for its argument.  If that
       name already exists as an alias, the target of the alias is
       redefined; see section “Strings” above.  <i>troff</i> enters “copy mode”
       (see below), storing subsequent input lines as the definition.
       If the optional second argument is not specified, the definition
       ends with the control line “<b>..</b>” (two dots).  Tabs and spaces are
       permitted between the dots.  Alternatively, a second argument to
       <b>.de </b>names a macro whose call (or request whose invocation) syntax
       ends the definition; this <i>end macro</i> is then interpreted normally.
       Spaces or tabs are permitted after the first control character in
       the line containing this ending token, but a tab immediately
       after the token prevents its recognition as the end of a macro
       definition.  Macro definitions can be nested if they use distinct
       end macros or if their ending tokens are sufficiently escaped.
       An end macro need not be defined until it is called.  This fact
       enables a nested macro definition to begin inside one macro and
       end inside another.

       Variants of <b>.de </b>disable compatibility mode and/or indirect the
       names of the macros specified for definition or termination:
       these are <b>.de1</b>, <b>.dei</b>, and <b>.dei1</b>.  Append to macro definitions
       with <b>.am</b>, <b>.am1</b>, <b>.ami</b>, and <b>.ami1</b>.  The <b>.als</b>, <b>.rm</b>, and <b>.rn </b>requests
       create an alias of, remove, and rename a macro, respectively.
       <b>.return </b>stops the execution of a macro immediately, returning to
       the enclosing context.

   <b>Parameters</b>
       Macro call and string interpolation parameters can be accessed
       using escape sequences starting with “<b>\$</b>”.  The <b>\n[.$] </b>read-only
       register stores the count of parameters available to a macro or
       string; change its value with the <b>.shift </b>request, which dequeues
       parameters from the current list.  The <b>\$0 </b>escape sequence
       interpolates the name by which a macro was called.  Applying
       string interpolation to a macro does not change this name.

   <b>Copy mode</b>
       <i>troff</i> processes certain requests in <i>copy mode:</i> it interpolates
       the escape sequences <b>\n</b>, <b>\g</b>, <b>\$</b>, <b>\*</b>, <b>\V</b>, and <b>\? </b>normally;
       interprets <b>\</b><i>newline</i> immediately; discards comments <b>\" </b>and <b>\#</b>;
       interpolates the current leader, escape, or tab character with
       <b>\a</b>, <b>\e</b>, and <b>\t</b>, respectively; and represents all other escape
       sequences in an encoded form.  The term “copy mode” reflects its
       most visible application in requests that populate macros and
       strings, but other requests also use it when interpreting
       arguments that can't meaningfully represent typesetting
       operations.  For example, a font selection escape sequence has no
       meaning in a hyphenation pattern file name (<b>hpf</b>) or a diagnostic
       message written to the terminal (<b>tm</b>).  The complement of copy
       mode—a <i>roff</i> formatter's behavior when not defining or appending
       to a macro, string, or diversion—where all macros are
       interpolated, requests invoked, and valid escape sequences
       processed immediately upon recognition, can be termed
       <i>interpretation mode</i>.

       The escape character, <b>\ </b>by default, can escape itself.  This
       enables you to control whether a given <b>\n</b>, <b>\g</b>, <b>\$</b>, <b>\*</b>, <b>\V</b>, or <b>\?</b>
       escape sequence is interpreted at the time the macro containing
       it is defined, or later when the macro is called.

       You can think of <b>\\ </b>as a “delayed” backslash; it is the escape
       character followed by a backslash from which the escape character
       has removed its special meaning.  Consequently, <b>\\ </b>is not an
       escape sequence in the usual sense.  In any escape sequence <b>\</b><i>X</i>
       that <i>troff</i> does not recognize, the escape character is ignored
       and <i>X</i> is output.  An unrecognized escape sequence causes a
       warning in category “<b>escape</b>”, with two exceptions, <b>\\ </b>being one.
       The other is <b>\.</b>, which escapes the control character.  It is used
       to permit nested macro definitions to end without a named macro
       call to conclude them.  Without a syntax for escaping the control
       character, this would not be possible.  <i>roff</i> documents should not
       use the <b>\\ </b>or <b>\. </b>character sequences outside of copy mode; they
       serve only to obfuscate the input.  Use <b>\e </b>to represent the
       escape character, <b>\[rs] </b>to obtain a backslash glyph, and <b>\&amp;</b>
       before <b>. </b>and <b>' </b>where <i>troff</i> expects them as control characters if
       you mean to use them literally.

       Macro definitions can be nested to arbitrary depth.  In “<b>\\</b>”,
       each escape character is interpreted twice—once in copy mode,
       when the macro is defined, and once in interpretation mode, when
       the macro is called.  This fact leads to exponential growth in
       the quantity of escape characters required to delay interpolation
       of <b>\n</b>, <b>\g</b>, <b>\$</b>, <b>\*</b>, <b>\V</b>, and <b>\? </b>at each nesting level.  An
       alternative is to use <b>\E</b>, which represents an escape character
       that is not interpreted in copy mode.  Because <b>\. </b>is not a true
       escape sequence, we can't use <b>\E </b>to keep “<b>..</b>” from ending a macro
       definition prematurely.  If the multiplicity of backslashes
       complicates maintenance, use end macros.
</pre> <h2>
Traps </h2>
<pre>
       <i>Traps</i> are locations in the output, or conditions on the input
       that, when reached or fulfilled, call a specified macro.  A
       <i>vertical position trap</i> calls a macro when the formatter's
       vertical drawing position reaches or passes, in the downward
       direction, a certain location on the output page or in a
       diversion.  Its applications include setting page headers and
       footers, body text in multiple columns, and footnotes.  These
       traps can occur at a given location on the page (<b>.wh</b>, <b>.ch</b>); at a
       given location in the current diversion (<b>.dt</b>)—together, these are
       known as vertical position traps, which can be disabled and re-
       enabled (<b>.vpt</b>).

       A diversion is not formatted in the context of a page, so it
       lacks page location traps; instead it can have a <i>diversion trap.</i>
       There can exist at most one such vertical position trap per
       diversion.

       Other kinds of trap can be planted at a blank line (<b>.blm</b>); at a
       line with leading space characters (<b>.lsm</b>); after a certain number
       of productive input lines (<b>.it</b>, <b>.itc</b>); or at the end of input
       (<b>.em</b>).  Macros called by traps are passed no arguments.  Setting
       a trap is also called <i>planting</i> one.  It is said that a trap is
       <i>sprung</i> if its condition is fulfilled.

       Registers associated with trap management include vertical
       position trap enablement status (<b>\n[.vpt]</b>), distance to the next
       trap (<b>\n[.t]</b>), amount of needed (<b>.ne</b>-requested) space that caused
       the most recent vertical position trap to be sprung (<b>\n[.ne]</b>),
       amount of needed space truncated from the amount requested
       (<b>\n[.trunc]</b>), page ejection status (<b>\n[.pe]</b>), and leading space
       count (<b>\n[lsn]</b>) with its corresponding amount of motion
       (<b>\n[lss]</b>).

   <b>Page location traps</b>
       A <i>page location trap</i> is a vertical position trap that applies to
       the page; that is, to undiverted output.  Many can be present;
       manage them with the <b>wh </b>and <b>ch </b>requests.  Non-negative page
       locations given to these requests set the trap relative to the
       top of the page; negative values set the trap relative to the
       bottom of the page.  It is not possible to plant a trap less than
       one basic unit from the page bottom: a location of “-0” is
       interpreted as “0”, the top of the page.  An existing <i>visible</i>
       trap (see below) at the same location is removed; this is <b>.wh</b>'s
       sole function if its second argument is missing.

       A trap is sprung only if it is <i>visible,</i> meaning that its location
       is reachable on the page and it is not hidden by another trap at
       the same location already planted there.  (A trap planted at
       “20i” or “-30i” will not be sprung on a page of length “11i”.)

       A trap above the top or at or below the bottom of the page can be
       made visible by either moving it into the page area or increasing
       the page length so that the trap is on the page.  Negative trap
       values always use the <i>current</i> page length; they are not converted
       to an absolute vertical position.  Use <b>.ptr </b>to dump page location
       traps to the standard error stream; their positions are reported
       in basic units.

   <b>The implicit page trap</b>
       An <i>implicit page trap</i> always exists in the top-level diversion
       (see below); it works like a trap in some ways but not others.
       Its purpose is to eject the current page and start the next one.
       It has no name, so it cannot be moved or deleted with <b>wh </b>or <b>ch</b>
       requests.  You cannot hide it by placing another trap at its
       location, and can move it only by redefining the page length with
       <b>.pl</b>.  Its operation is suppressed when vertical page traps are
       disabled with the <b>vpt </b>request.
</pre> <h2>
Diversions </h2>
<pre>
       In <i>roff</i> systems it is possible to format text as if for output,
       but instead of writing it immediately, one can <i>divert</i> the
       formatted text into a named storage area.  It is retrieved later
       by specifying its name after a control character.  The same name
       space is used for such <i>diversions</i> as for strings and macros; see
       section “Identifiers” above.  Such text is sometimes said to be
       “stored in a macro”, but this coinage obscures the important
       distinction between macros and strings on one hand and diversions
       on the other; the former store <i>unformatted</i> input text, and the
       latter capture <i>formatted</i> output.  Diversions also do not
       interpret arguments.  Applications of diversions include “keeps”
       (preventing a page break from occurring at an inconvenient place
       by forcing a set of output lines to be set as a group),
       footnotes, tables of contents, and indices.  For orthogonality it
       is said that GNU <i>troff</i> is in the <i>top-level diversion</i> if no
       diversion is active (that is, formatted output is being
       “diverted” immediately to the output device.  The top-level
       diversion has no name.

       Dereferencing an undefined diversion will create an empty one of
       that name and cause a warning in category <b>mac </b>to be emitted.
       (see section “Warnings” in <i>troff</i>(1)).  A diversion does not exist
       for the purpose of testing with the <b>d </b>conditional operator until
       its initial definition ends (see subsection “Conditional
       expressions” above).

       The <b>di </b>request creates a diversion, including any partially
       collected line.  <b>da </b>appends to a diversion, creating one if it
       does not already exist.  If the diversion's name already exists
       as an alias, the target of the alias is replaced or appended to;
       see section “Strings” above.  <b>box </b>and <b>boxa </b>work similarly, but
       ignore partially collected lines.  Call any of these macros again
       without an argument to end the diversion.

       Diversion requests can be nested.  The registers <b>.d</b>, <b>.z</b>, report
       information about the current diversion, and <b>dn </b>and <b>dl </b>about the
       most recently closed one.  <b>.h </b>is meaningful in diversions,
       including the top-level one.

       After completing a diversion, the writable registers <b>dn </b>and <b>dl</b>
       contain its vertical and horizontal sizes, respectively.  Only
       the lines just processed are counted: for the computation of <b>dn</b>
       and <b>dl</b>, the requests <b>da </b>and <b>boxa </b>are handled as if <b>di </b>and <b>box </b>had
       been used, respectively—lines that have been already stored in
       the diversion (box) are not taken into account.

       The <b>\! </b>and <b>\? </b>escape sequences and <b>output </b>request escape from a
       diversion, the first two to the enclosing level and the last to
       the top level.  This facility is termed <i>transparent embedding</i>.

       The <b>asciify </b>and <b>unformat </b>requests reprocess diversions.
</pre> <h2>
Punning names </h2>
<pre>
       Macros, strings, and diversions share a name space; see section
       “Identifiers” above.  Internally, the same mechanism is used to
       store them.  You can thus call a macro with string interpolation
       syntax and vice versa.  Interpolating a string does not hide
       existing macro arguments.  The sequence <b>\\ </b>can be placed at the
       end of a line in a macro definition or, within a macro
       definition, immediately after the interpolation of a macro as a
       string to suppress the effect of a newline.
</pre> <h2>
Environments </h2>
<pre>
       Environments store most of the parameters that control text
       processing.  A default environment named “<b>0</b>” exists when <i>troff</i>
       starts up; it is modified by formatting-related requests and
       escape sequences.

       You can create new environments and switch among them.  Only one
       is current at any given time.  Active environments are managed
       using a <i>stack,</i> a data structure supporting “push” and “pop”
       operations.  The current environment is at the top of the stack.
       The same environment name can be pushed onto the stack multiple
       times, possibly interleaved with others.  Popping the environment
       stack does not destroy the current environment; it remains
       accessible by name and can be made current again by pushing it at
       any time.  Environments cannot be renamed or deleted, and can
       only be modified when current.  To inspect the environment stack,
       use the <b>pev </b>request; see section “Debugging” below.

       Environments store the following information.

       •  a partially collected line, if any

       •  data about the most recently output glyph and line (registers
          <b>.cdp</b>, <b>.cht</b>, <b>.csk</b>, <b>.n</b>, <b>.w</b>)

       •  typeface parameters (size, family, style, height and slant,
          inter-word and inter-sentence space sizes)

       •  page parameters (line length, title length, vertical spacing,
          line spacing, indentation, line numbering, centering, right-
          alignment, underlining, hyphenation parameters)

       •  filling enablement; adjustment enablement and mode

       •  tab stops; tab, leader, escape, control, no-break control,
          hyphenation, and margin characters

       •  input line traps

       •  stroke and fill colors

       The <b>ev </b>request pushes to and pops from the environment stack,
       while <b>evc </b>copies a named environment's contents to the current
       one.
</pre> <h2>
Postprocessor access </h2>
<pre>
       Two escape sequences and two requests enable documents to pass
       information directly to an output driver or other postprocessor.
       These are useful for exercising device-specific capabilities that
       the <i>groff</i> language does not abstract or generalize; examples
       include the embedding of hyperlinks and image files.  Device-
       specific functions are documented in each output driver's man
       page, such as <i>gropdf</i>(1), <i>grops</i>(1), or <i>grotty</i>(1).

       The “<b>device</b>” request and <b>\X </b>escape sequence embed their arguments
       into GNU <i>troff</i> output as parameters to an “<b>x X</b>” device control
       command (see <i>groff_out</i>(5)).  The interpretation of such
       parameters is determined by the output driver or other
       postprocessor.

       Within a device control command, the escape sequences <b>\&amp;</b>, <b>\)</b>, <b>\%</b>,
       and <b>\: </b>are ignored; <b>\</b><i>space</i> and <b>\~ </b>are converted to single space
       characters; and a self-escaped escape character is output as a
       backslash <b>\</b>.  So that the basic Latin subset of the Unicode
       character set (that is, ISO 646:1991-IRV or, popularly, “US-
       ASCII”) can be reliably encoded in device control commands, seven
       special character escape sequences (“<b>\-</b>”, “<b>\[aq]</b>”, “<b>\[dq]</b>”,
       “<b>\[ga]</b>”, “<b>\[ha]</b>”, “<b>\[rs]</b>”, and “<b>\[ti]</b>”) are mapped to basic Latin
       characters; see <i>groff_char</i>(7).  For this transformation,
       character translations and special character definitions are
       ignored.  (They are bypassed because these parameters are not
       rendered as glyphs in the output; instead, they remain abstract
       characters—in a PDF bookmark or a URL, for example.)

       Escape sequences other than the foregoing in device control
       command may be ignored, or produce an error.

       A device control command issued with the “<b>device</b>” request will
       not be reflected in the output unless a partially collected line
       exists at least once in the top-level diversion (recall section
       “Diversions” above).  When experimenting with such device
       controls in minimal documents, a <b>br </b>request will ensure this to
       be the case.

       If the <b>use_charnames_in_special </b>directive appears in the output
       device's <i>DESC</i> file, the use of special character escape sequences
       is <i>not</i> an error; they are simply output verbatim (with the
       exception of the seven mapped to Unicode basic Latin characters,
       discussed above).  <b>use_charnames_in_special </b>is currently employed
       only by <i>grohtml</i>(1).

       GNU <i>troff</i> also permits the interpolation of macro contents as a
       device control command.  The <b>devicem </b>request and <b>\Y </b>escape
       sequence are each approximately equivalent to “<b>\X'</b><i>name</i><b>'</b>”.  They
       differ from that construction in that the contents of the string
       or macro <i>name</i> are not interpreted; futher, <i>name</i> may be a macro
       and thus contain newlines.  (There is no way to embed a newline
       in the arguments to “<b>device</b>” or <b>\X</b>.)  The inclusion of newlines
       requires an extension to the AT&amp;T <i>troff</i> output format; their
       presence confuses drivers that do not know about it (see
       subsection “Device control commands” of <i>groff_out</i>(5)).

       The <b>tag </b>and <b>taga </b>requests are reserved for internal use.
</pre> <h2>
Underlining </h2>
<pre>
       In <i>RUNOFF</i> (see <i>roff</i>(7)), underlining, even of lengthy passages,
       was straightforward because only fixed-pitch printing devices
       were targeted.  Typesetter output posed a greater challenge.
       There exists a <i>groff</i> request <b>.ul </b>(see above) that underlines
       subsequent source lines on terminals, but on typesetters, it
       selects an italic font style instead.  The <i>ms</i> macro package (see
       <i>groff_ms</i>(7)) offers a macro <b>.UL</b>, but it too produces the desired
       effect only on typesetters, and has other limitations.

       One could adapt <i>ms</i>'s approach to the construction of a macro as
       follows.
              .de UNDERLINE
              . ie n \\$1\f[I]\\$2\f[P]\\$3
              . el \\$1\Z'\\$2'\v'.25m'\D'l \w'\\$2'u 0'\v'-.25m'\\$3
              ..
       If <i>doclifter</i>(1) makes trouble, change the macro name <b>UNDERLINE</b>
       into some 2-letter word, like <b>Ul</b>.  Moreover, change the form of
       the font selection escape sequence from <b>\f[P] </b>to <b>\fP</b>.

   <b>Underlining without macro definitions</b>
       If one does not want to use macro definitions, e.g., when
       <i>doclifter</i> gets lost, use the following.
              .ds u1 before
              .ds u2 in
              .ds u3 after
              .ie n \*[u1]\f[I]\*[u2]\f[P]\*[u3]
              .el \*[u1]\Z'\*[u2]'\v'.25m'\D'l \w'\*[u2]'u 0'\v'-.25m'\*[u3]
       When using <i>doclifter</i>, it might be necessary to change syntax
       forms such as <b>\[xy] </b>and <b>\*[xy] </b>to those supported by AT&amp;T <i>troff</i>:
       <b>\*(xy </b>and <b>\(xy</b>, and so on.

       Then these lines could look like
              .ds u1 before
              .ds u2 in
              .ds u3 after
              .ie n \*[u1]\fI\*(u2\fP\*(u3
              .el \*(u1\Z'\*(u2'\v'.25m'\D'l \w'\*(u2'u 0'\v'-.25m'\*(u3

       The result looks like
              before _i_n after

   <b>Underlining by overstriking with \(ul</b>
       The <b>\z </b>escape sequence writes a glyph without advancing the
       drawing position, enabling overstriking.  Thus, <b>\z</b><i>c</i><b>\(ul </b>formats <i>c</i>
       with an underrule glyph on top of it.  Video terminals implement
       the underrule by setting a character cell's underline attribute,
       so this technique works in both <i>nroff</i> and <i>troff</i> modes.

       Long words may then look intimidating in the input; a clarifying
       approach might be to use the input line continuation escape
       sequence <b>\</b><i>newline</i> to place each underlined character on its own
       input line.  Thus,
              .nf
              \&amp;\fB: ${\fIvar\fR\c
              \zo\(ul\
              \zp\(ul\c
              \&amp;\fIvalue\fB}
              .fi
       produces
              <b>: ${</b><i>var</i>o_p_<i>value</i><b>}</b>
       as output.
</pre> <h2>
Compatibility mode </h2>
<pre>
       The differences between the <i>roff</i> language recognized by GNU <i>troff</i>
       and that of AT&amp;T <i>troff</i>, as well as the device, font, and device-
       independent intermediate output formats described by CSTR #54 are
       documented in <i>groff_diff</i>(7).  <i>groff</i> provides an AT&amp;T
       compatibility mode.  The <b>.cp </b>request and registers <b>.C </b>and <b>.cp </b>set
       and test the enablement of this mode.
</pre> <h2>
Debugging </h2>
<pre>
       Preprocessors use the <b>.lf </b>request to preserve the identities of
       line numbers and names of input files.  <i>groff</i> emits a variety of
       error diagnostics and supports several categories of warning; the
       output of these can be selectively suppressed with <b>.warn </b>(and see
       the <b>-E</b>, <b>-w</b>, and <b>-W </b>options of <i>troff</i>(1)).  A trace of the
       formatter's input processing stack can be emitted when errors or
       warnings occur by means of <i>troff</i>(1)'s <b>-b </b>option, or produced on
       demand with the <b>.backtrace </b>request.  <b>.tm</b>, <b>.tmc</b>, and <b>.tm1 </b>can be
       used to emit customized diagnostic messages or for
       instrumentation while troubleshooting.  <b>.ex </b>and <b>.ab </b>cause early
       termination with successful and error exit codes respectively, to
       halt further processing when continuing would be fruitless.
       Examine the state of the formatter with requests that write lists
       of defined names—macros, strings, and diversions—(<b>.pm</b>); colors
       (<b>.pcolor</b>); composite characters (<b>.pcomposite</b>); environments
       (<b>.pev</b>); hyphenation exceptions (<b>.phw</b>); registers (<b>.pnr</b>); page
       location traps (<b>.ptr</b>); and a list of pending output nodes
       corresponding to the previous input line (<b>.pline</b>) to the standard
       error stream.
</pre> <h2>
Authors </h2>
<pre>
       This document was written by by Trent A. Fisher, Werner Lemberg
       ⟨wl@gnu.org⟩, and G. Branden Robinson ⟨g.branden.robinson@gmail
       .com⟩.  Section “Underlining” was primarily written by Bernd
       Warken ⟨groff-bernd.warken-72@web.de⟩.
</pre> <h2>
See also </h2>
<pre>
       <i>Groff: The GNU Implementation of troff</i>, by Trent A. Fisher and
       Werner Lemberg, is the primary <i>groff</i> manual.  You can browse it
       interactively with “info groff”.

       “Troff User's Manual” by Joseph F. Ossanna, 1976 (revised by
       Brian W. Kernighan, 1992), AT&amp;T Bell Laboratories Computing
       Science Technical Report No. 54, widely called simply “CSTR #54”,
       documents the language, device and font description file formats,
       and device-independent output format referred to collectively in
       <i>groff</i> documentation as “AT&amp;T <i>troff</i>”.

       “A Typesetter-independent TROFF” by Brian W. Kernighan, 1982,
       AT&amp;T Bell Laboratories Computing Science Technical Report No. 97
       (CSTR #97), provides additional insights into the device and font
       description file formats and device-independent output format.

       <i>groff</i>(1)
              is the preferred interface to the <i>groff</i> system; it manages
              the pipeline that carries a source document through
              preprocessors, the <i>troff</i> formatter, and an output driver
              to viewable or printable form.  It also exhaustively lists
              the man pages provided with the GNU <i>roff</i> system.

       <i>groff_char</i>(7)
              discusses character encoding issues, escape sequences that
              produce glyphs, and enumerates <i>groff</i>'s predefined special
              character escape sequences.

       <i>groff_diff</i>(7)
              covers differences between the GNU <i>troff</i> formatter, its
              device and font description file formats, its device-
              independent output format, and those of AT&amp;T <i>troff</i>, whose
              design it reimplements.

       <i>groff_font</i>(5)
              describes the formats of the files that describe devices
              (<i>DESC</i>) and fonts.

       <i>groff_tmac</i>(5)
              surveys macro packages provided with <i>groff</i>, describes how
              documents can take advantage of them, offers guidance on
              writing macro packages and using diversions, and includes
              historical information on macro package naming
              conventions.

       <i>roff</i>(7)
              presents a detailed history of <i>roff</i> systems and summarizes
              concepts common to them.
</pre> <h2>
COLOPHON </h2>
<pre>
       This page is part of the <i>groff</i> (GNU troff) project.  Information
       about the project can be found at 
       ⟨<a href="http://www.gnu.org/software/groff/">http://www.gnu.org/software/groff/</a>⟩.  If you have a bug report
       for this manual page, see ⟨<a href="http://www.gnu.org/software/groff/">http://www.gnu.org/software/groff/</a>⟩.
       This page was obtained from the project's upstream Git repository
       ⟨<a href="https://git.savannah.gnu.org/git/groff.git">https://git.savannah.gnu.org/git/groff.git</a>⟩ on 2024-06-14.  (At
       that time, the date of the most recent commit that was found in
       the repository was 2024-06-10.)  If you discover any rendering
       problems in this HTML version of the page, or you believe there
       is a better or more up-to-date source for the page, or you have
       corrections or improvements to the information in this COLOPHON
       (which is <i>not</i> part of the original manual page), send a mail to
       man-pages@man7.org

<span class="footline">groff 1.23.0.1273-9d53-dirty   6 June 2024                      <i>groff</i>(7)</span>
</pre>  <p>Pages that refer to this page: <a href="../man1/man.1.html">man(1)</a>, <a href="man-pages.7.html">man-pages(7)</a> </p> <hr>         <div class="_attribution">
  <p class="_attribution-p">
    ...<br>
    <a href="https://man7.org/linux/man-pages/man7/groff.7.html" class="_attribution-link">https://man7.org/linux/man-pages/man7/groff.7.html</a>
  </p>
</div>
