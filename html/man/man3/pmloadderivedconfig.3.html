<h1>pmloadderivedconfig(3) — Linux manual page</h1>   <pre>
<span class="headline"><i>PMLOADDERIVEDCONFIG</i>(3)  Library Functions Manual  <i>PMLOADDERIVEDCONFIG</i>(3)</span>
</pre> <h2>
NAME </h2>
<pre>
       <b>pmLoadDerivedConfig </b>- load derived metric definitions from files
</pre> <h2>
C SYNOPSIS </h2>
<pre>
       <b>#include &lt;pcp/pmapi.h&gt;</b>

       <b>int pmLoadDerivedConfig(char *</b><i>path</i><b>);</b>

       <b>cc ... -lpcp</b>
</pre> <h2>
DESCRIPTION </h2>
<pre>
       Derived metrics may be used to extend the available metrics with
       new (derived) metrics using simple arithmetic expressions.  The
       definitions of these metrics can be persisted and loaded
       programmatically by monitor tools using <b>pmLoadDerivedConfig</b>.

       The <i>path</i> parameter defines a colon separated list of files and/or
       directories (the syntax is the same as for the <b>$PATH </b>variable for
       <b>sh</b>(1)), from which derived metric specifications are to be
       sourced.  The <i>path</i> components are expanded into a list of files
       as follows: if a component is a file, then that file is added to
       the list, else if a component is a directory then recursive
       descent is used to enumerate all files below that directory and
       these are added to the list.  Each file in the resulting list is
       parsed in order, and according to the derived metrics syntax
       described below.

       Each line of the file(s) identified by <i>path</i> is either a comment
       line (with a ``#'' in the first position of the line) or the
       declaration of a derived performance metric, specified as:

       * the name of the derived metric, using the same ``dot notation''
         syntax that is used for PCP performance metrics, see
         <a href="../man1/pcpintro.1.html">PCPIntro(1)</a> and <a href="../man5/pmns.5.html">PMNS(5)</a>.
       * an equals sign (``='')
       * a valid expression for a derived metric, as described in
         <a href="pmregisterderived.3.html">pmRegisterDerived(3)</a>.

       For each line containing a derived metric definition,
       <a href="pmregisterderived.3.html">pmRegisterDerived(3)</a> is called to register the new derived
       metric.

       Once a derived metric has been declared, it may be assigned
       additional attributes with a line of the form:

       * the name of the derived metric,
       * a left parenthesis, an <i>attribute type</i> and a right parenthesis,
       * an equals sign (``=''),
       * an <i>attribute value</i>.

       Currently, <i>attribute type</i> may be either <b>oneline </b>or <b>helptext </b>to
       designate the ``one line'' or expanded help text to be associated
       with the derived metric, see <a href="pmlookuptext.3.html">pmLookupText(3)</a>.

       The <i>attribute value</i> may be either arbitrary text following the
       ``='' and ending at the end of the line, else a string enclosed
       in either single quotes (') or double quotes (").  In the latter
       case, the <i>attribute value</i> may span multiple lines, and a simple
       escape mechanism is supported, namely for any character ``x'',
       ``\x'' is replaced by ``x'' (this allows quotes to be escaped
       within a string, for example), and there is a special case when
       the ``\'' comes at the end of the line in which case the
       following newline is not included in the <i>attribute value</i>.

       Outside of <i>attribute values</i>, white space is ignored in the lines,
       and blank lines are ignored altogether.

       Because <b>pmLoadDerivedConfig </b>may process many files, each of which
       may contain many derived metric specifications, it is not
       possible to provide a specific error status on return.  Hence the
       result from <b>pmLoadDerivedConfig </b>will be the number of derived
       metrics successfully loaded from files on the given <i>path</i>.
       Catastrophic errors such as not being able to open one of the
       files on the given <i>path</i> will cause an immediate return with a
       negative return value that can be passed to <a href="pmerrstr.3.html">pmErrStr(3)</a> to obtain
       the associated error message.

       When errors are encountered in the derived metric specifications
       diagnostic messages are generated by <a href="pmregisterderived.3.html">pmRegisterDerived(3)</a> and
       displayed via <a href="pmprintf.3.html">pmprintf(3)</a>.
</pre> <h2>
EXAMPLE </h2>
<pre>
       # sample derived metric definitions
       bad_in_pkts = network.interface.in.errors + network.interface.in.drops
       # note the following would need to be on a single line ...
       disk.dev.read_pct = 100 * delta(disk.dev.read) /
                   (delta(disk.dev.read) + delta(disk.dev.write))
       disk.dev.read_pct(oneline) = percentage of disk reads
       disk.dev.read_pct(helptext) = '\
       Percentage of disk reads compared to the total number of
       disk reads and disk writes.'
</pre> <h2>
SEE ALSO </h2>
<pre>
       <b>sh</b>(1), <a href="../man1/pcpintro.1.html">PCPIntro(1)</a>, <a href="pmapi.3.html">PMAPI(3)</a>, <a href="pmlookuptext.3.html">pmLookupText(3)</a>,
       <a href="pmregisterderived.3.html">pmRegisterDerived(3)</a>, <a href="pmprintf.3.html">pmprintf(3)</a> and <a href="../man5/pmns.5.html">PMNS(5)</a>.
</pre> <h2>
COLOPHON </h2>
<pre>
       This page is part of the <i>PCP</i> (Performance Co-Pilot) project.
       Information about the project can be found at 
       ⟨<a href="http://www.pcp.io/">http://www.pcp.io/</a>⟩.  If you have a bug report for this manual
       page, send it to pcp@groups.io.  This page was obtained from the
       project's upstream Git repository
       ⟨<a href="https://github.com/performancecopilot/pcp.git">https://github.com/performancecopilot/pcp.git</a>⟩ on 2024-06-14.
       (At that time, the date of the most recent commit that was found
       in the repository was 2024-06-14.)  If you discover any rendering
       problems in this HTML version of the page, or you believe there
       is a better or more up-to-date source for the page, or you have
       corrections or improvements to the information in this COLOPHON
       (which is <i>not</i> part of the original manual page), send a mail to
       man-pages@man7.org

<span class="footline">Performance Co-Pilot                              <i>PMLOADDERIVEDCONFIG</i>(3)</span>
</pre>  <p>Pages that refer to this page: <a href="../man1/pcp2elasticsearch.1.html">pcp2elasticsearch(1)</a>, <a href="../man1/pcp2graphite.1.html">pcp2graphite(1)</a>, <a href="../man1/pcp2influxdb.1.html">pcp2influxdb(1)</a>, <a href="../man1/pcp2json.1.html">pcp2json(1)</a>, <a href="../man1/pcp2openmetrics.1.html">pcp2openmetrics(1)</a>, <a href="../man1/pcp2spark.1.html">pcp2spark(1)</a>, <a href="../man1/pcp2template.1.html">pcp2template(1)</a>, <a href="../man1/pcp2xlsx.1.html">pcp2xlsx(1)</a>, <a href="../man1/pcp2xml.1.html">pcp2xml(1)</a>, <a href="../man1/pcp2zabbix.1.html">pcp2zabbix(1)</a>, <a href="../man1/pcpintro.1.html">pcpintro(1)</a>, <a href="../man1/pminfo.1.html">pminfo(1)</a>, <a href="../man1/pmprobe.1.html">pmprobe(1)</a>, <a href="../man1/pmrep.1.html">pmrep(1)</a>, <a href="pmaddderived.3.html">pmaddderived(3)</a>, <a href="pmaddderivedtext.3.html">pmaddderivedtext(3)</a>, <a href="pmgetderivedcontrol.3.html">pmgetderivedcontrol(3)</a>, <a href="pmreconnectcontext.3.html">pmreconnectcontext(3)</a>, <a href="pmregisterderived.3.html">pmregisterderived(3)</a>, <a href="zbxpcp.3.html">zbxpcp(3)</a> </p> <hr>         <div class="_attribution">
  <p class="_attribution-p">
    ...<br>
    <a href="https://man7.org/linux/man-pages/man3/pmloadderivedconfig.3.html" class="_attribution-link">https://man7.org/linux/man-pages/man3/pmloadderivedconfig.3.html</a>
  </p>
</div>
