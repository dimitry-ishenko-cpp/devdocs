<h1>cap_init(3) — Linux manual page</h1>   <pre>
<span class="headline"><i>CAP_INIT</i>(3)             Linux Programmer's Manual            <i>CAP_INIT</i>(3)</span>
</pre> <h2>
NAME </h2>
<pre>
       cap_init, cap_free, cap_dup - capability data object storage
       management
</pre> <h2>
SYNOPSIS </h2>
<pre>
       #include &lt;sys/capability.h&gt;

       cap_t cap_init(void);
       int cap_free(void *obj_d);
       cap_t cap_dup(cap_t cap_p);

       Link with <i>-lcap</i>.
</pre> <h2>
DESCRIPTION </h2>
<pre>
       The capabilities associated with a file or process are never
       edited directly.  Instead, working storage is allocated to
       contain a representation of the capability state.  Capabilities
       are edited and manipulated only within this working storage area.
       Once editing of the capability state is complete, the updated
       capability state is used to replace the capability state
       associated with the file or process.

       <b>cap_init</b>() creates a capability state in working storage and
       returns a pointer to the capability state.  The initial value of
       all flags are cleared.  The caller should free any releasable
       memory, when the capability state in working storage is no longer
       required, by calling <b>cap_free</b>() with the <i>cap_t</i> as an argument.

       <b>cap_free</b>() liberates any releasable memory that has been
       allocated to the capability state identified by <i>obj_d</i>.  The <i>obj_d</i>
       argument may identify either a <i>cap_t</i> entity, or a <i>char *</i> entity
       allocated by the <b>cap_to_text</b>() function.

       <b>cap_dup</b>() returns a duplicate capability state in working storage
       given by the source object <i>cap_p</i>, allocating any memory
       necessary, and returning a pointer to the newly created
       capability state.  Once duplicated, no operation on either
       capability state affects the other in any way.  When the
       duplicated capability state in working storage is no longer
       required, the caller should free any releasable memory by calling
       <b>cap_free</b>() with the <i>cap_t</i> as an argument.
</pre> <h2>
RETURN VALUE </h2>
<pre>
       <b>cap_init</b>() and <b>cap_dup</b>() return a non-NULL value on success, and
       NULL on failure.

       <b>cap_free</b>() returns zero on success, and -1 on failure.

       On failure, <i><a href="errno.3.html">errno</a></i> is set to <b>EINVAL </b>or <b>ENOMEM</b>.
</pre> <h2>
CONFORMING TO </h2>
<pre>
       These functions are specified in the withdrawn POSIX.1e draft
       specification.
</pre> <h2>
SEE ALSO </h2>
<pre>
       <a href="libcap.3.html">libcap(3)</a>, <a href="cap_clear.3.html">cap_clear(3)</a>, <a href="cap_copy_ext.3.html">cap_copy_ext(3)</a>, <a href="cap_from_text.3.html">cap_from_text(3)</a>,
       <a href="cap_get_file.3.html">cap_get_file(3)</a>, <a href="cap_get_proc.3.html">cap_get_proc(3)</a>, <a href="../man7/capabilities.7.html">capabilities(7)</a>
</pre> <h2>
COLOPHON </h2>
<pre>
       This page is part of the <i>libcap</i> (capabilities commands and
       library) project.  Information about the project can be found at
       ⟨<a href="https://git.kernel.org/pub/scm/libs/libcap/libcap.git/">https://git.kernel.org/pub/scm/libs/libcap/libcap.git/</a>⟩.  If you
       have a bug report for this manual page, send it to
       morgan@kernel.org (please put "libcap" in the Subject line).
       This page was obtained from the project's upstream Git repository
       ⟨<a href="https://git.kernel.org/pub/scm/libs/libcap/libcap.git/">https://git.kernel.org/pub/scm/libs/libcap/libcap.git/</a>⟩ on
       2024-06-14.  (At that time, the date of the most recent commit
       that was found in the repository was 2024-05-18.)  If you
       discover any rendering problems in this HTML version of the page,
       or you believe there is a better or more up-to-date source for
       the page, or you have corrections or improvements to the
       information in this COLOPHON (which is <i>not</i> part of the original
       manual page), send a mail to man-pages@man7.org

<span class="footline">                               2021-03-06                    <i>CAP_INIT</i>(3)</span>
</pre>  <p>Pages that refer to this page: <a href="cap_clear.3.html">cap_clear(3)</a>, <a href="cap_copy_ext.3.html">cap_copy_ext(3)</a>, <a href="cap_from_text.3.html">cap_from_text(3)</a>, <a href="cap_get_file.3.html">cap_get_file(3)</a>, <a href="cap_get_proc.3.html">cap_get_proc(3)</a>, <a href="cap_iab.3.html">cap_iab(3)</a>, <a href="cap_launch.3.html">cap_launch(3)</a>, <a href="libcap.3.html">libcap(3)</a>, <a href="../man7/capabilities.7.html">capabilities(7)</a> </p> <hr>         <div class="_attribution">
  <p class="_attribution-p">
    ...<br>
    <a href="https://man7.org/linux/man-pages/man3/cap_init.3.html" class="_attribution-link">https://man7.org/linux/man-pages/man3/cap_init.3.html</a>
  </p>
</div>
