<h1>mbtowc(3) — Linux manual page</h1>   <pre>
<span class="headline"><i>mbtowc</i>(3)               Library Functions Manual               <i>mbtowc</i>(3)</span>
</pre> <h2>
NAME </h2>
<pre>
       mbtowc - convert a multibyte sequence to a wide character
</pre> <h2>
LIBRARY </h2>
<pre>
       Standard C library (<i>libc</i>, <i>-lc</i>)
</pre> <h2>
SYNOPSIS </h2>
<pre>
       <b>#include &lt;stdlib.h&gt;</b>

       <b>int mbtowc(wchar_t *restrict </b><i>pwc</i><b>, const char </b><i>s</i><b>[restrict .</b><i>n</i><b>], size_t </b><i>n</i><b>);</b>
</pre> <h2>
DESCRIPTION </h2>
<pre>
       The main case for this function is when <i>s</i> is not NULL and <i>pwc</i> is
       not NULL.  In this case, the <b>mbtowc</b>() function inspects at most <i>n</i>
       bytes of the multibyte string starting at <i>s</i>, extracts the next
       complete multibyte character, converts it to a wide character and
       stores it at <i>*pwc</i>.  It updates an internal shift state known only
       to the <b>mbtowc</b>() function.  If <i>s</i> does not point to a null byte
       ('\0'), it returns the number of bytes that were consumed from <i>s</i>,
       otherwise it returns 0.

       If the <i>n</i> bytes starting at <i>s</i> do not contain a complete multibyte
       character, or if they contain an invalid multibyte sequence,
       <b>mbtowc</b>() returns -1.  This can happen even if <i>n</i> &gt;= <i>MB_CUR_MAX</i>, if
       the multibyte string contains redundant shift sequences.

       A different case is when <i>s</i> is not NULL but <i>pwc</i> is NULL.  In this
       case, the <b>mbtowc</b>() function behaves as above, except that it does
       not store the converted wide character in memory.

       A third case is when <i>s</i> is NULL.  In this case, <i>pwc</i> and <i>n</i> are
       ignored.  The <b>mbtowc</b>() function resets the shift state, only
       known to this function, to the initial state, and returns nonzero
       if the encoding has nontrivial shift state, or zero if the
       encoding is stateless.
</pre> <h2>
RETURN VALUE </h2>
<pre>
       If <i>s</i> is not NULL, the <b>mbtowc</b>() function returns the number of
       consumed bytes starting at <i>s</i>, or 0 if <i>s</i> points to a null byte, or
       -1 upon failure.

       If <i>s</i> is NULL, the <b>mbtowc</b>() function returns nonzero if the
       encoding has nontrivial shift state, or zero if the encoding is
       stateless.
</pre> <h2>
ATTRIBUTES </h2>
<pre>
       For an explanation of the terms used in this section, see
       <a href="../man7/attributes.7.html">attributes(7)</a>.
       ┌──────────────────────────────┬───────────────┬────────────────┐
       │ <b>Interface                    </b>│ <b>Attribute     </b>│ <b>Value          </b>│
       ├──────────────────────────────┼───────────────┼────────────────┤
       │ <b>mbtowc</b>()                     │ Thread safety │ MT-Unsafe race │
       └──────────────────────────────┴───────────────┴────────────────┘
</pre> <h2>
VERSIONS </h2>
<pre>
       This function is not multithread safe.  The function <a href="mbrtowc.3.html">mbrtowc(3)</a>
       provides a better interface to the same functionality.
</pre> <h2>
STANDARDS </h2>
<pre>
       C11, POSIX.1-2008.
</pre> <h2>
HISTORY </h2>
<pre>
       POSIX.1-2001, C99.
</pre> <h2>
NOTES </h2>
<pre>
       The behavior of <b>mbtowc</b>() depends on the <b>LC_CTYPE </b>category of the
       current locale.
</pre> <h2>
SEE ALSO </h2>
<pre>
       <a href="mb_cur_max.3.html">MB_CUR_MAX(3)</a>, <a href="mblen.3.html">mblen(3)</a>, <a href="mbrtowc.3.html">mbrtowc(3)</a>, <a href="mbstowcs.3.html">mbstowcs(3)</a>, <a href="wcstombs.3.html">wcstombs(3)</a>,
       <a href="wctomb.3.html">wctomb(3)</a>
</pre> <h2>
COLOPHON </h2>
<pre>
       This page is part of the <i>man-pages</i> (Linux kernel and C library
       user-space interface documentation) project.  Information about
       the project can be found at 
       ⟨<a href="https://www.kernel.org/doc/man-pages/">https://www.kernel.org/doc/man-pages/</a>⟩.  If you have a bug report
       for this manual page, see
       ⟨<a href="https://git.kernel.org/pub/scm/docs/man-pages/man-pages.git/tree/CONTRIBUTING">https://git.kernel.org/pub/scm/docs/man-pages/man-pages.git/tree/CONTRIBUTING</a>⟩.
       This page was obtained from the tarball man-pages-6.9.1.tar.gz
       fetched from
       ⟨<a href="https://mirrors.edge.kernel.org/pub/linux/docs/man-pages/">https://mirrors.edge.kernel.org/pub/linux/docs/man-pages/</a>⟩ on
       2024-06-26.  If you discover any rendering problems in this HTML
       version of the page, or you believe there is a better or more up-
       to-date source for the page, or you have corrections or
       improvements to the information in this COLOPHON (which is <i>not</i>
       part of the original manual page), send a mail to
       man-pages@man7.org

<span class="footline">Linux man-pages 6.9.1          2024-06-15                      <i>mbtowc</i>(3)</span>
</pre>  <p>Pages that refer to this page: <a href="btowc.3.html">btowc(3)</a>, <a href="mb_cur_max.3.html">MB_CUR_MAX(3)</a>, <a href="mbstowcs.3.html">mbstowcs(3)</a>, <a href="wcstombs.3.html">wcstombs(3)</a>, <a href="wctomb.3.html">wctomb(3)</a> </p> <hr>         <div class="_attribution">
  <p class="_attribution-p">
    ...<br>
    <a href="https://man7.org/linux/man-pages/man3/mbtowc.3.html" class="_attribution-link">https://man7.org/linux/man-pages/man3/mbtowc.3.html</a>
  </p>
</div>
