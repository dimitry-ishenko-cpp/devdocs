<h1>posix_spawn_file_actions_adddup2(3p) — Linux manual page</h1>   <pre>
<span class="headline"><i>POSIX_SP..._ADDDUP2</i>(3P) POSIX Programmer's Manual<i>POSIX_SP..._ADDDUP2</i>(3P)</span>
</pre> <h2>
PROLOG </h2>
<pre>
       This manual page is part of the POSIX Programmer's Manual.  The
       Linux implementation of this interface may differ (consult the
       corresponding Linux manual page for details of Linux behavior),
       or the interface may not be implemented on Linux.
</pre> <h2>
NAME </h2>
<pre>
       posix_spawn_file_actions_adddup2 — add dup2 action to spawn file
       actions object (<b>ADVANCED REALTIME</b>)
</pre> <h2>
SYNOPSIS </h2>
<pre>
       #include &lt;spawn.h&gt;

       int posix_spawn_file_actions_adddup2(posix_spawn_file_actions_t
           *<i>file_actions</i>, int <i>fildes</i>, int <i>newfildes</i>);
</pre> <h2>
DESCRIPTION </h2>
<pre>
       The <i>posix_spawn_file_actions_adddup2</i>() function shall add a
       <i>dup2</i>() action to the object referenced by <i>file_actions</i> that shall
       cause the file descriptor <i>fildes</i> to be duplicated as <i>newfildes</i>
       (as if <i>dup2</i>(<i>fildes</i>, <i>newfildes</i>) had been called) when a new
       process is spawned using this file actions object.

       A spawn file actions object is as defined in
       <a href="posix_spawn_file_actions_addclose.3p.html">posix_spawn_file_actions_addclose(3p)</a>.
</pre> <h2>
RETURN VALUE </h2>
<pre>
       Upon successful completion, the
       <i>posix_spawn_file_actions_adddup2</i>() function shall return zero;
       otherwise, an error number shall be returned to indicate the
       error.
</pre> <h2>
ERRORS </h2>
<pre>
       The <i>posix_spawn_file_actions_adddup2</i>() function shall fail if:

       <b>EBADF  </b>The value specified by <i>fildes</i> or <i>newfildes</i> is negative or
              greater than or equal to {OPEN_MAX}.

       <b>ENOMEM </b>Insufficient memory exists to add to the spawn file
              actions object.

       The <i>posix_spawn_file_actions_adddup2</i>() function may fail if:

       <b>EINVAL </b>The value specified by <i>file_actions</i> is invalid.

       It shall not be considered an error for the <i>fildes</i> argument
       passed to the <i>posix_spawn_file_actions_adddup2</i>() function to
       specify a file descriptor for which the specified operation could
       not be performed at the time of the call. Any such error will be
       detected when the associated file actions object is later used
       during a <i>posix_spawn</i>() or <i>posix_spawnp</i>() operation.

       <i>The following sections are informative.</i>
</pre> <h2>
EXAMPLES </h2>
<pre>
       None.
</pre> <h2>
APPLICATION USAGE </h2>
<pre>
       The <i>posix_spawn_file_actions_adddup2</i>() function is part of the
       Spawn option and need not be provided on all implementations.

       Implementations may use file descriptors that must be inherited
       into child processes for the child process to remain conforming,
       such as for message catalog or tracing purposes. Therefore, an
       application that calls <i>posix_spawn_file_actions_adddup2</i>() with an
       arbitrary integer for <i>newfildes</i> risks non-conforming behavior,
       and this function can only portably be used to overwrite file
       descriptor values that the application has obtained through
       explicit actions, or for the three file descriptors corresponding
       to the standard file streams. In order to avoid a race condition
       of leaking an unintended file descriptor into a child process, an
       application should consider opening all file descriptors with the
       FD_CLOEXEC bit set unless the file descriptor is intended to be
       inherited across <i>exec</i>.
</pre> <h2>
RATIONALE </h2>
<pre>
       Refer to the RATIONALE section in
       <a href="posix_spawn_file_actions_addclose.3p.html">posix_spawn_file_actions_addclose(3p)</a>.
</pre> <h2>
FUTURE DIRECTIONS </h2>
<pre>
       None.
</pre> <h2>
SEE ALSO </h2>
<pre>
       <a href="dup.3p.html">dup(3p)</a>, <a href="posix_spawn.3p.html">posix_spawn(3p)</a>, <a href="posix_spawn_file_actions_addclose.3p.html">posix_spawn_file_actions_addclose(3p)</a>,
       <a href="posix_spawn_file_actions_destroy.3p.html">posix_spawn_file_actions_destroy(3p)</a>

       The Base Definitions volume of POSIX.1‐2017, <a href="../man0/spawn.h.0p.html">spawn.h(0p)</a>
</pre> <h2>
COPYRIGHT </h2>
<pre>
       Portions of this text are reprinted and reproduced in electronic
       form from IEEE Std 1003.1-2017, Standard for Information
       Technology -- Portable Operating System Interface (POSIX), The
       Open Group Base Specifications Issue 7, 2018 Edition, Copyright
       (C) 2018 by the Institute of Electrical and Electronics
       Engineers, Inc and The Open Group.  In the event of any
       discrepancy between this version and the original IEEE and The
       Open Group Standard, the original IEEE and The Open Group
       Standard is the referee document. The original Standard can be
       obtained online at <a href="http://www.opengroup.org/unix/online.html">http://www.opengroup.org/unix/online.html</a> .

       Any typographical or formatting errors that appear in this page
       are most likely to have been introduced during the conversion of
       the source files to man page format. To report such errors, see
       <a href="https://www.kernel.org/doc/man-pages/reporting_bugs.html">https://www.kernel.org/doc/man-pages/reporting_bugs.html</a> .

<span class="footline">IEEE/The Open Group               2017           <i>POSIX_SP..._ADDDUP2</i>(3P)</span>
</pre>  <p>Pages that refer to this page: <a href="../man0/spawn.h.0p.html">spawn.h(0p)</a>, <a href="posix_spawn.3p.html">posix_spawn(3p)</a>, <a href="posix_spawn_file_actions_addclose.3p.html">posix_spawn_file_actions_addclose(3p)</a> </p> <hr>         <div class="_attribution">
  <p class="_attribution-p">
    ...<br>
    <a href="https://man7.org/linux/man-pages/man3/posix_spawn_file_actions_adddup2.3p.html" class="_attribution-link">https://man7.org/linux/man-pages/man3/posix_spawn_file_actions_adddup2.3p.html</a>
  </p>
</div>
