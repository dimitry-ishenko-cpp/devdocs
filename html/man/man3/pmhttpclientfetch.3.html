<h1>pmhttpnewclient(3) — Linux manual page</h1>   <pre>
<span class="headline"><i>PMHTTPNEWCLIENT</i>(3)      Library Functions Manual      <i>PMHTTPNEWCLIENT</i>(3)</span>
</pre> <h2>
NAME </h2>
<pre>
       <b>pmhttpNewClient</b>, <b>pmhttpFreeClient</b>, <b>pmhttpClientFetch </b>- simple
       HTTP client interfaces
</pre> <h2>
C SYNOPSIS </h2>
<pre>
       <b>#include &lt;pcp/pmapi.h&gt;</b>
       <b>#include &lt;pcp/pmhttp.h&gt;</b>

       <b>struct http_client *pmhttpNewClient(void);</b>
       <b>void pmhttpFreeClient(struct http_client *</b><i>client</i><b>);</b>
       <b>int pmhttpClientFetch(struct http_client *</b><i>client</i><b>, const char</b>
               <b>*</b><i>url</i><b>, char *</b><i>bodybuf</i><b>, size_t </b><i>bodylen</i><b>, char *</b><i>typebuf</i><b>,</b>
               <b>size_t </b><i>typelen</i><b>);</b>

       <b>cc ... -lpcp_web</b>
</pre> <h2>
DESCRIPTION </h2>
<pre>
       <b>pmhttpNewClient  </b>allocates  and initializes an opaque HTTP client
       that is ready to make requests from a server.

       The URL request interface <b>pmhttpClientFetch </b>issues  an  HTTP  GET
       request to the server specified in the supplied <i>url</i>.  The body of
       the  response  is returned in the caller supplied <i>bodybuf</i> buffer,
       of <i>bodylen</i> bytes length.  An optional <i>typebuf</i> buffer, of  <i>typelen</i>
       bytes length, can also be supplied and (if non-NULL) will contain
       the value of the content-type header returned from the server.

       The  <i>url</i> parameter is an <i>RFC1630</i> format URL.  This will typically
       be prefixed with "http://", however these interfaces also support
       Unix domain sockets.  Those are instead  prefixed  by  "unix://",
       followed  by  the full filesystem path to the desired Unix domain
       socket.

       To free up resources associated with an  HTTP  client,  including
       closing  any  persistent  server  connection that has been estab‐
       lished earlier, is accomplished using the  <b>pmhttpFreeClient  </b>rou‐
       tine.
</pre> <h2>
DIAGNOSTICS </h2>
<pre>
       <b>pmhttpNewClient </b>will return NULL on failure, which can only occur
       when allocation of memory is not possible.

       <b>pmhttpClientFetch </b>will return the number of bytes places into the
       <i>bodybuf</i>  buffer,  else a negated error code indicating the nature
       of the failure.
</pre> <h2>
SEE ALSO </h2>
<pre>
       <a href="../man1/pmdaapache.1.html">pmdaapache(1)</a>,   <a href="pmjsoninit.3.html">pmjsonInit(3)</a>,   <a href="pmapi.3.html">PMAPI(3)</a>,    <a href="pmwebapi.3.html">PMWEBAPI(3)</a>    and
       <b><a href="https://tools.ietf.org/html/rfc1630">https://tools.ietf.org/html/rfc1630</a> </b>.
</pre> <h2>
COLOPHON </h2>
<pre>
       This page is part of the <i>PCP</i> (Performance Co-Pilot) project.  In‐
       formation about the project can be found at ⟨<a href="http://www.pcp.io/">http://www.pcp.io/</a>⟩.
       If  you  have  a  bug  report  for  this  manual page, send it to
       pcp@groups.io.   This  page  was  obtained  from  the   project's
       upstream                      Git                      repository
       ⟨<a href="https://github.com/performancecopilot/pcp.git">https://github.com/performancecopilot/pcp.git</a>⟩  on   2024-06-14.
       (At  that time, the date of the most recent commit that was found
       in the repository was 2024-06-14.)  If you discover any rendering
       problems in this HTML version of the page, or you  believe  there
       is  a  better or more up-to-date source for the page, or you have
       corrections or improvements to the information in  this  COLOPHON
       (which  is  <i>not</i> part of the original manual page), send a mail to
       man-pages@man7.org

<span class="footline">Performance Co-Pilot               PCP                <i>PMHTTPNEWCLIENT</i>(3)</span>
</pre>          <div class="_attribution">
  <p class="_attribution-p">
    ...<br>
    <a href="https://man7.org/linux/man-pages/man3/pmhttpClientFetch.3.html" class="_attribution-link">https://man7.org/linux/man-pages/man3/pmhttpClientFetch.3.html</a>
  </p>
</div>
