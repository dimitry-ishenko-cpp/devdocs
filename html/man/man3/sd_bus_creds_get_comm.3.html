<h1>sd_bus_creds_get_pid(3) — Linux manual page</h1>   <pre>
<span class="headline"><i>SD_BUS_CREDS_GET_PID</i>(3)   sd_bus_creds_get_pid   <i>SD_BUS_CREDS_GET_PID</i>(3)</span>
</pre> <h2>
NAME </h2>
<pre>
       sd_bus_creds_get_pid, sd_bus_creds_get_pidfd_dup,
       sd_bus_creds_get_ppid, sd_bus_creds_get_tid,
       sd_bus_creds_get_uid, sd_bus_creds_get_euid,
       sd_bus_creds_get_suid, sd_bus_creds_get_fsuid,
       sd_bus_creds_get_gid, sd_bus_creds_get_egid,
       sd_bus_creds_get_sgid, sd_bus_creds_get_fsgid,
       sd_bus_creds_get_supplementary_gids, sd_bus_creds_get_comm,
       sd_bus_creds_get_tid_comm, sd_bus_creds_get_exe,
       sd_bus_creds_get_cmdline, sd_bus_creds_get_cgroup,
       sd_bus_creds_get_unit, sd_bus_creds_get_slice,
       sd_bus_creds_get_user_unit, sd_bus_creds_get_user_slice,
       sd_bus_creds_get_session, sd_bus_creds_get_owner_uid,
       sd_bus_creds_has_effective_cap, sd_bus_creds_has_permitted_cap,
       sd_bus_creds_has_inheritable_cap, sd_bus_creds_has_bounding_cap,
       sd_bus_creds_get_selinux_context,
       sd_bus_creds_get_audit_session_id,
       sd_bus_creds_get_audit_login_uid, sd_bus_creds_get_tty,
       sd_bus_creds_get_unique_name, sd_bus_creds_get_well_known_names,
       sd_bus_creds_get_description - Retrieve fields from a credentials
       object
</pre> <h2>
SYNOPSIS </h2>
<pre>
       <b>#include &lt;systemd/sd-bus.h&gt;</b>

       <b>int sd_bus_creds_get_pid(sd_bus_creds *</b><i>c</i><b>, pid_t *</b><i>pid</i><b>);</b>

       <b>int sd_bus_creds_get_pidfd_dup(sd_bus_creds *</b><i>c</i><b>, int *</b><i>ret_fd</i><b>);</b>

       <b>int sd_bus_creds_get_ppid(sd_bus_creds *</b><i>c</i><b>, pid_t *</b><i>ppid</i><b>);</b>

       <b>int sd_bus_creds_get_tid(sd_bus_creds *</b><i>c</i><b>, pid_t *</b><i>tid</i><b>);</b>

       <b>int sd_bus_creds_get_uid(sd_bus_creds *</b><i>c</i><b>, uid_t *</b><i>uid</i><b>);</b>

       <b>int sd_bus_creds_get_euid(sd_bus_creds *</b><i>c</i><b>, uid_t *</b><i>uid</i><b>);</b>

       <b>int sd_bus_creds_get_suid(sd_bus_creds *</b><i>c</i><b>, uid_t *</b><i>uid</i><b>);</b>

       <b>int sd_bus_creds_get_fsuid(sd_bus_creds *</b><i>c</i><b>, uid_t *</b><i>uid</i><b>);</b>

       <b>int sd_bus_creds_get_gid(sd_bus_creds *</b><i>c</i><b>, gid_t *</b><i>gid</i><b>);</b>

       <b>int sd_bus_creds_get_egid(sd_bus_creds *</b><i>c</i><b>, gid_t *</b><i>gid</i><b>);</b>

       <b>int sd_bus_creds_get_sgid(sd_bus_creds *</b><i>c</i><b>, gid_t *</b><i>gid</i><b>);</b>

       <b>int sd_bus_creds_get_fsgid(sd_bus_creds *</b><i>c</i><b>, gid_t *</b><i>gid</i><b>);</b>

       <b>int sd_bus_creds_get_supplementary_gids(sd_bus_creds *</b><i>c</i><b>,</b>
                                               <b>const gid_t **</b><i>gids</i><b>);</b>

       <b>int sd_bus_creds_get_comm(sd_bus_creds *</b><i>c</i><b>, const char **</b><i>comm</i><b>);</b>

       <b>int sd_bus_creds_get_tid_comm(sd_bus_creds *</b><i>c</i><b>,</b>
                                     <b>const char **</b><i>comm</i><b>);</b>

       <b>int sd_bus_creds_get_exe(sd_bus_creds *</b><i>c</i><b>, const char **</b><i>exe</i><b>);</b>

       <b>int sd_bus_creds_get_cmdline(sd_bus_creds *</b><i>c</i><b>, char ***</b><i>cmdline</i><b>);</b>

       <b>int sd_bus_creds_get_cgroup(sd_bus_creds *</b><i>c</i><b>,</b>
                                   <b>const char **</b><i>cgroup</i><b>);</b>

       <b>int sd_bus_creds_get_unit(sd_bus_creds *</b><i>c</i><b>, const char **</b><i>unit</i><b>);</b>

       <b>int sd_bus_creds_get_slice(sd_bus_creds *</b><i>c</i><b>, const char **</b><i>slice</i><b>);</b>

       <b>int sd_bus_creds_get_user_unit(sd_bus_creds *</b><i>c</i><b>,</b>
                                      <b>const char **</b><i>unit</i><b>);</b>

       <b>int sd_bus_creds_get_user_slice(sd_bus_creds *</b><i>c</i><b>,</b>
                                       <b>const char **</b><i>slice</i><b>);</b>

       <b>int sd_bus_creds_get_session(sd_bus_creds *</b><i>c</i><b>,</b>
                                    <b>const char **</b><i>slice</i><b>);</b>

       <b>int sd_bus_creds_get_owner_uid(sd_bus_creds *</b><i>c</i><b>, uid_t *</b><i>uid</i><b>);</b>

       <b>int sd_bus_creds_has_effective_cap(sd_bus_creds *</b><i>c</i><b>,</b>
                                          <b>int </b><i>capability</i><b>);</b>

       <b>int sd_bus_creds_has_permitted_cap(sd_bus_creds *</b><i>c</i><b>,</b>
                                          <b>int </b><i>capability</i><b>);</b>

       <b>int sd_bus_creds_has_inheritable_cap(sd_bus_creds *</b><i>c</i><b>,</b>
                                            <b>int </b><i>capability</i><b>);</b>

       <b>int sd_bus_creds_has_bounding_cap(sd_bus_creds *</b><i>c</i><b>,</b>
                                         <b>int </b><i>capability</i><b>);</b>

       <b>int sd_bus_creds_get_selinux_context(sd_bus_creds *</b><i>c</i><b>,</b>
                                            <b>const char **</b><i>context</i><b>);</b>

       <b>int sd_bus_creds_get_audit_session_id(sd_bus_creds *</b><i>c</i><b>,</b>
                                             <b>uint32_t *</b><i>sessionid</i><b>);</b>

       <b>int sd_bus_creds_get_audit_login_uid(sd_bus_creds *</b><i>c</i><b>,</b>
                                            <b>uid_t *</b><i>loginuid</i><b>);</b>

       <b>int sd_bus_creds_get_tty(sd_bus_creds *</b><i>c</i><b>, const char **</b><i>tty</i><b>);</b>

       <b>int sd_bus_creds_get_unique_name(sd_bus_creds *</b><i>c</i><b>,</b>
                                        <b>const char **</b><i>name</i><b>);</b>

       <b>int sd_bus_creds_get_well_known_names(sd_bus_creds *</b><i>c</i><b>,</b>
                                             <b>char ***</b><i>name</i><b>);</b>

       <b>int sd_bus_creds_get_description(sd_bus_creds *</b><i>c</i><b>,</b>
                                        <b>const char **</b><i>name</i><b>);</b>
</pre> <h2>
DESCRIPTION </h2>
<pre>
       These functions return credential information from an
       <i>sd_bus_creds</i> object. Credential objects may be created with
       <a href="sd_bus_creds_new_from_pid.3.html">sd_bus_creds_new_from_pid(3)</a>, in which case they describe the
       credentials of the process identified by the specified PID, with
       <a href="sd_bus_get_name_creds.3.html">sd_bus_get_name_creds(3)</a>, in which case they describe the
       credentials of a bus peer identified by the specified bus name,
       with <a href="sd_bus_get_owner_creds.3.html">sd_bus_get_owner_creds(3)</a>, in which case they describe the
       credentials of the creator of a bus, or with
       <a href="sd_bus_message_get_creds.3.html">sd_bus_message_get_creds(3)</a>, in which case they describe the
       credentials of the sender of the message.

       Not all credential fields are part of every "sd_bus_creds"
       object. Use <a href="sd_bus_creds_get_mask.3.html">sd_bus_creds_get_mask(3)</a> to determine the mask of
       fields available.

       <b>sd_bus_creds_get_pid() </b>will retrieve the PID (process
       identifier). Similarly, <b>sd_bus_creds_get_ppid() </b>will retrieve the
       parent PID. Note that PID 1 has no parent process, in which case
       -ENXIO is returned.

       <b>sd_bus_creds_get_pidfd_dup() </b>will retrieve the PID file
       descriptor (pidfd), see <a href="../man2/pidfd_open.2.html">pidfd_open(2)</a> for details. The file
       descriptor is duplicated and thus must be closed by the caller.

       <b>sd_bus_creds_get_tid() </b>will retrieve the TID (thread identifier).

       <b>sd_bus_creds_get_uid() </b>will retrieve the numeric UID (user
       identifier). Similarly, <b>sd_bus_creds_get_euid() </b>returns the
       effective UID, <b>sd_bus_creds_get_suid() </b>the saved UID and
       <b>sd_bus_creds_get_fsuid() </b>the file system UID.

       <b>sd_bus_creds_get_gid() </b>will retrieve the numeric GID (group
       identifier). Similarly, <b>sd_bus_creds_get_egid() </b>returns the
       effective GID, <b>sd_bus_creds_get_sgid() </b>the saved GID and
       <b>sd_bus_creds_get_fsgid() </b>the file system GID.

       <b>sd_bus_creds_get_supplementary_gids() </b>will retrieve the
       supplementary GIDs list.

       <b>sd_bus_creds_get_comm() </b>will retrieve the comm field (truncated
       name of the executable, as stored in /proc/<i>pid</i>/comm).

       <b>sd_bus_creds_get_tid_comm() </b>will retrieve the comm field of the
       thread (as stored in /proc/<i>pid</i>/task/<i>tid</i>/comm).

       <b>sd_bus_creds_get_exe() </b>will retrieve the path to the program
       executable (as stored in the /proc/<i>pid</i>/exe link, but with the "
       (deleted)" suffix removed). Note that kernel threads do not have
       an executable path, in which case -ENXIO is returned. Note that
       this property should not be used for more than explanatory
       information, in particular it should not be used for
       security-relevant decisions. That's because the executable might
       have been replaced or removed by the time the value can be
       processed. Moreover, the kernel exports this information in an
       ambiguous way (i.e. a deleted executable cannot be safely
       distinguished from one whose name suffix is " (deleted)").

       <b>sd_bus_creds_get_cmdline() </b>will retrieve an array of command line
       arguments (as stored in /proc/<i>pid</i>/cmdline). Note that kernel
       threads do not have a command line, in which case -ENXIO is
       returned.

       <b>sd_bus_creds_get_cgroup() </b>will retrieve the control group path.
       See <b>Control Groups v2</b>[1].

       <b>sd_bus_creds_get_unit() </b>will retrieve the systemd unit name (in
       the system instance of systemd) that the process is a part of.
       See <a href="../man5/systemd.unit.5.html">systemd.unit(5)</a>. For processes that are not part of a unit,
       returns -ENXIO.

       <b>sd_bus_creds_get_user_unit() </b>will retrieve the systemd unit name
       (in the user instance of systemd) that the process is a part of.
       See <a href="../man5/systemd.unit.5.html">systemd.unit(5)</a>. For processes that are not part of a user
       unit, returns -ENXIO.

       <b>sd_bus_creds_get_slice() </b>will retrieve the systemd slice (a unit
       in the system instance of systemd) that the process is a part of.
       See <a href="../man5/systemd.slice.5.html">systemd.slice(5)</a>. Similarly, <b>sd_bus_creds_get_user_slice()</b>
       retrieves the systemd slice of the process, in the user instance
       of systemd.

       <b>sd_bus_creds_get_session() </b>will retrieve the identifier of the
       login session that the process is a part of. Please note the
       login session may be limited to a stub process or two. User
       processes may instead be started from their systemd user manager,
       e.g. GUI applications started using DBus activation, as well as
       service processes which are shared between multiple logins of the
       same user. For processes that are not part of a session, returns
       -ENXIO.

       <b>sd_bus_creds_get_owner_uid() </b>will retrieve the numeric UID (user
       identifier) of the user who owns the user unit or login session
       that the process is a part of. See <a href="../man8/systemd-logind.service.8.html">systemd-logind.service(8)</a>. For
       processes that are not part of a user unit or session, returns
       -ENXIO.

       <b>sd_bus_creds_has_effective_cap() </b>will check whether the
       capability specified by <i>capability</i> was set in the effective
       capabilities mask. A positive return value means that it was set,
       zero means that it was not set, and a negative return value
       indicates an error. See <a href="../man7/capabilities.7.html">capabilities(7)</a> and the
       <i>AmbientCapabilities=</i> and <i>CapabilityBoundingSet=</i> settings in
       <a href="../man5/systemd.exec.5.html">systemd.exec(5)</a>.

       <b>sd_bus_creds_has_permitted_cap() </b>is similar to
       <b>sd_bus_creds_has_effective_cap()</b>, but will check the permitted
       capabilities mask.

       <b>sd_bus_creds_has_inheritable_cap() </b>is similar to
       <b>sd_bus_creds_has_effective_cap()</b>, but will check the inheritable
       capabilities mask.

       <b>sd_bus_creds_has_bounding_cap() </b>is similar to
       <b>sd_bus_creds_has_effective_cap()</b>, but will check the bounding
       capabilities mask.

       <b>sd_bus_creds_get_selinux_context() </b>will retrieve the SELinux
       security context (label) of the process.

       <b>sd_bus_creds_get_audit_session_id() </b>will retrieve the audit
       session identifier of the process. Returns -ENXIO for processes
       that are not part of an audit session.

       <b>sd_bus_creds_get_audit_login_uid() </b>will retrieve the audit user
       login identifier (the identifier of the user who is "responsible"
       for the session). Returns -ENXIO for processes that are not part
       of an audit session.

       <b>sd_bus_creds_get_tty() </b>will retrieve the controlling TTY, without
       the prefixing "/dev/". Returns -ENXIO for processes that have no
       controlling TTY.

       <b>sd_bus_creds_get_unique_name() </b>will retrieve the D-Bus unique
       name. See <b>The D-Bus specification</b>[2].

       <b>sd_bus_creds_get_well_known_names() </b>will retrieve the set of
       D-Bus well-known names. See <b>The D-Bus specification</b>[2].

       <b>sd_bus_creds_get_description() </b>will retrieve a descriptive name
       of the bus connection of the peer. This name is useful to discern
       multiple bus connections by the same peer, and may be altered by
       the peer with the <a href="sd_bus_set_description.3.html">sd_bus_set_description(3)</a> call.

       All functions that take a <i>const char**</i> parameter will store the
       answer there as an address of a <b>NUL</b>-terminated string. It will be
       valid as long as <i>c</i> remains valid, and should not be freed or
       modified by the caller.

       All functions that take a <i>char***</i> parameter will store the answer
       there as an address of an array of strings. Each individual
       string is <b>NUL</b>-terminated, and the array is <b>NULL</b>-terminated as a
       whole. It will be valid as long as <i>c</i> remains valid, and should
       not be freed or modified by the caller.
</pre> <h2>
RETURN VALUE </h2>
<pre>
       On success, these calls return 0 or a positive integer. On
       failure, these calls return a negative errno-style error code.

   <b>Errors</b>
       Returned errors may indicate the following problems:

       <b>-ENODATA</b>
           The given field is not available in the credentials object <i>c</i>.

       <b>-ENXIO</b>
           The given field is not specified for the described process or
           peer. This will be returned by <b>sd_bus_creds_get_unit()</b>,
           <b>sd_bus_creds_get_slice()</b>, <b>sd_bus_creds_get_user_unit()</b>,
           <b>sd_bus_creds_get_user_slice()</b>, and <b>sd_bus_creds_get_session()</b>
           if the process is not part of a systemd system unit, systemd
           user unit, systemd slice, or logind session. It will be
           returned by <b>sd_bus_creds_get_owner_uid() </b>if the process is
           not part of a systemd user unit or logind session. It will
           also be returned by <b>sd_bus_creds_get_exe() </b>and
           <b>sd_bus_creds_get_cmdline() </b>for kernel threads (since these
           are not started from an executable binary, nor have a command
           line), and by <b>sd_bus_creds_get_audit_session_id() </b>and
           <b>sd_bus_creds_get_audit_login_uid() </b>when the process is not
           part of an audit session, and <b>sd_bus_creds_get_tty() </b>if the
           process has no controlling TTY.

       <b>-EINVAL</b>
           Specified pointer parameter is <b>NULL</b>.

       <b>-ENOMEM</b>
           Memory allocation failed.
</pre> <h2>
NOTES </h2>
<pre>
       Functions described here are available as a shared library, which
       can be compiled against and linked to with the
       <b>libsystemd pkg-config</b>(1) file.

       The code described here uses <a href="getenv.3.html">getenv(3)</a>, which is declared to be
       not multi-thread-safe. This means that the code calling the
       functions described here must not call <a href="setenv.3.html">setenv(3)</a> from a parallel
       thread. It is recommended to only do calls to <b>setenv() </b>from an
       early phase of the program when no other threads have been
       started.
</pre> <h2>
HISTORY </h2>
<pre>
       <b>sd_bus_creds_get_pid()</b>, <b>sd_bus_creds_get_tid()</b>,
       <b>sd_bus_creds_get_gid()</b>, <b>sd_bus_creds_get_comm()</b>,
       <b>sd_bus_creds_get_tid_comm()</b>, <b>sd_bus_creds_get_exe()</b>,
       <b>sd_bus_creds_get_cmdline()</b>, <b>sd_bus_creds_get_cgroup()</b>,
       <b>sd_bus_creds_get_unit()</b>, <b>sd_bus_creds_get_user_unit()</b>,
       <b>sd_bus_creds_get_slice()</b>, <b>sd_bus_creds_get_session()</b>,
       <b>sd_bus_creds_get_owner_uid()</b>, <b>sd_bus_creds_has_effective_cap()</b>,
       <b>sd_bus_creds_has_permitted_cap()</b>,
       <b>sd_bus_creds_has_inheritable_cap()</b>,
       <b>sd_bus_creds_has_bounding_cap()</b>,
       <b>sd_bus_creds_get_selinux_context()</b>,
       <b>sd_bus_creds_get_audit_session_id()</b>,
       <b>sd_bus_creds_get_audit_login_uid()</b>,
       <b>sd_bus_creds_get_unique_name()</b>,
       <b>sd_bus_creds_get_well_known_names()</b>, <b>sd_bus_creds_get_ppid()</b>,
       <b>sd_bus_creds_get_uid()</b>, <b>sd_bus_creds_get_euid()</b>,
       <b>sd_bus_creds_get_suid()</b>, <b>sd_bus_creds_get_fsuid()</b>,
       <b>sd_bus_creds_get_egid()</b>, <b>sd_bus_creds_get_sgid()</b>,
       <b>sd_bus_creds_get_fsgid()</b>, <b>sd_bus_creds_get_supplementary_gids()</b>,
       <b>sd_bus_creds_get_tty()</b>, <b>sd_bus_creds_get_description()</b>, and
       <b>sd_bus_creds_get_user_slice() </b>were added in version 221.

       <b>sd_bus_creds_get_pidfd_dup() </b>was added in version 256.
</pre> <h2>
SEE ALSO </h2>
<pre>
       <a href="../man1/systemd.1.html">systemd(1)</a>, <a href="sd-bus.3.html">sd-bus(3)</a>, <b>sd_bus_creds_new_from_pid</b>(2), <a href="../man2/fork.2.html">fork(2)</a>,
       <a href="../man2/execve.2.html">execve(2)</a>, <a href="../man7/credentials.7.html">credentials(7)</a>, <a href="free.3.html">free(3)</a>, <a href="../man5/proc.5.html">proc(5)</a>,
       <a href="../man7/systemd.journal-fields.7.html">systemd.journal-fields(7)</a>
</pre> <h2>
NOTES </h2>
<pre>
        1. Control Groups v2
           <a href="https://docs.kernel.org/admin-guide/cgroup-v2.html">https://docs.kernel.org/admin-guide/cgroup-v2.html</a>

        2. The D-Bus specification
           <a href="https://dbus.freedesktop.org/doc/dbus-specification.html#message-protocol-names-bus">https://dbus.freedesktop.org/doc/dbus-specification.html#message-protocol-names-bus</a>
</pre> <h2>
COLOPHON </h2>
<pre>
       This page is part of the <i>systemd</i> (systemd system and service
       manager) project.  Information about the project can be found at
       ⟨<a href="http://www.freedesktop.org/wiki/Software/systemd">http://www.freedesktop.org/wiki/Software/systemd</a>⟩.  If you have
       a bug report for this manual page, see
       ⟨<a href="http://www.freedesktop.org/wiki/Software/systemd/#bugreports">http://www.freedesktop.org/wiki/Software/systemd/#bugreports</a>⟩.
       This page was obtained from the project's upstream Git repository
       ⟨<a href="https://github.com/systemd/systemd.git">https://github.com/systemd/systemd.git</a>⟩ on 2024-06-14.  (At that
       time, the date of the most recent commit that was found in the
       repository was 2024-06-13.)  If you discover any rendering
       problems in this HTML version of the page, or you believe there
       is a better or more up-to-date source for the page, or you have
       corrections or improvements to the information in this COLOPHON
       (which is <i>not</i> part of the original manual page), send a mail to
       man-pages@man7.org

<span class="footline">systemd 257~devel                                <i>SD_BUS_CREDS_GET_PID</i>(3)</span>
</pre>  <p>Pages that refer to this page: <a href="sd-bus.3.html">sd-bus(3)</a>, <a href="sd_bus_creds_new_from_pid.3.html">sd_bus_creds_new_from_pid(3)</a>, <a href="../man7/systemd.directives.7.html">systemd.directives(7)</a>, <a href="../man7/systemd.index.7.html">systemd.index(7)</a> </p> <hr>         <div class="_attribution">
  <p class="_attribution-p">
    ...<br>
    <a href="https://man7.org/linux/man-pages/man3/sd_bus_creds_get_comm.3.html" class="_attribution-link">https://man7.org/linux/man-pages/man3/sd_bus_creds_get_comm.3.html</a>
  </p>
</div>
