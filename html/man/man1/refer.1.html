<h1>refer(1) — Linux manual page</h1>   <pre>
<span class="headline"><i>refer</i>(1)                 General Commands Manual                <i>refer</i>(1)</span>
</pre> <h2>
Name </h2>
<pre>
       refer - process bibliographic references for <i>groff</i>
</pre> <h2>
Synopsis </h2>
<pre>
       <b>refer </b>[<b>-bCenPRS</b>] [<b>-a </b><i>n</i>] [<b>-B </b><i>field</i><b>.</b><i>macro</i>] [<b>-c </b><i>fields</i>] [<b>-f </b><i>n</i>]
             [<b>-i </b><i>fields</i>] [<b>-k </b><i>field</i>] [<b>-l </b><i>range-expression</i>] [<b>-p </b><i>database-</i>
             <i>file</i>] [<b>-s </b><i>fields</i>] [<b>-t </b><i>n</i>] [<i>file</i> ...]

       <b>refer --help</b>

       <b>refer -v</b>

       <b>refer --version</b>
</pre> <h2>
Description </h2>
<pre>
       The GNU implementation of <i>refer</i> is part of the <i>groff</i>(1) document
       formatting system.  <i>refer</i> is a <i>troff</i>(1) preprocessor that
       prepares bibliographic citations by looking up keywords specified
       in a <i>roff</i>(7) input document, obviating the need to type such
       annotations, and permitting the citation style in formatted
       output to be altered independently and systematically.  It copies
       the contents of each <i>file</i> to the standard output stream, except
       that it interprets lines between <b>.[ </b>and <b>.] </b>as <i>citations</i> to be
       translated into <i>groff</i> input, and lines between <b>.R1 </b>and <b>.R2 </b>as
       instructions regarding how citations are to be processed.  <i>refer</i>
       interprets and generates <i>roff</i> <b>lf </b>requests so that file names and
       line numbers in messages produced by commands that read its
       output correctly describe the source document.  Normally, <i>refer</i>
       is not executed directly by the user, but invoked by specifying
       the <b>-R </b>option to <i>groff</i>(1).  If no <i>file</i> operands are present, or
       if <i>file</i> is “<b>-</b>”, <i>refer</i> reads the standard input stream.

       A citation identifies a work by reference to a <i>bibliographic</i>
       <i>record</i> detailing it.  Select a work from a database of records by
       listing keywords that uniquely identify its entry.
       Alternatively, a document can specify a record for the work at
       the point its citation occurs.  A document can use either or both
       strategies as desired.

       For each citation, <i>refer</i> produces a <i>mark</i> in the text, like a
       superscripted footnote number or “[Lesk1978a]”.  A mark consists
       of a <i>label</i> between <i>brackets.</i>  The mark can be separated from
       surrounding text and from other labels in various ways.  <i>refer</i>
       produces <i>roff</i> language requests usable by a document or a macro
       package such as <i>me</i>, <i>mm</i>, <i>mom</i>, or <i>ms</i> to produce a formatted
       reference for each citation.  A citation's reference can be
       output immediately after it occurs (as with footnotes), or
       references may <i>accumulate</i>, with corresponding output appearing
       later in the document (as with endnotes).  When references
       accumulate, multiple citations of the same reference produce a
       single formatted entry.

       Interpretation of lines between <b>.R1 </b>and <b>.R2 </b>tokens as
       preprocessor commands is a GNU <i>refer</i> extension.  Documents
       employing this feature can still be processed by AT&amp;T <i>refer</i> by
       adding the lines
              .de R1
              .ig R2
              ..
       to the beginning of the document.  The foregoing input causes
       <i>troff</i> to ignore everything between <b>.R1 </b>and <b>.R2</b>.  The effects of
       some <i>refer</i> commands can be achieved by command-line options;
       these are supported for compatibility with AT&amp;T <i>refer</i>.  It is
       usually more convenient to use commands.

   <b>Bibliographic records</b>
       A bibliographic record describes a referenced work in sufficient
       detail that it may be cited to accepted standards of scholarly
       and professional clarity.  The record format permits annotation
       and extension that a document may use or ignore.  A record is a
       plain text sequence of <i>fields,</i> one per line, each consisting of a
       percent sign <b>%</b>, an alphanumeric character classifying it, one
       space, and its contents.  If a field's contents are empty, the
       field is ignored.

       Frequently, such records are organized into a <i>bibliographic</i>
       <i>database,</i> with each entry separated by blank lines or file
       boundaries.  This practice relieves documents of the need to
       maintain bibliographic data themselves.  The programs <i>lookbib</i>(1)
       and <i>lkbib</i>(1) consult a bibliographic database, and <i>indxbib</i>(1)
       indexes one to speed retrieval from it, reducing document
       processing time.  Use of these tools is optional.

       The conventional uses of the bibliographic field entries are as
       follows.  Within a record, fields other than <b>%A </b>and <b>%E </b>replace
       previous occurrences thereof.  The ordering of multiple <b>%A </b>and <b>%E</b>
       fields is significant.

       <b>%A     </b>names an author.  If the name contains a suffix such as
              “Jr.” or “III”, it should be separated from the surname by
              a comma.  We recommend always supplying an <b>%A </b>field or a
              <b>%Q </b>field.

       <b>%B     </b>records the title of the book within which a cited article
              is collected.  See <b>%J </b>and <b>%T</b>.

       <b>%C     </b>names the city or other place of publication.

       <b>%D     </b>indicates the date of publication.  Specify the year in
              full.  If the month is specified, use its name rather than
              its number; only the first three letters are required.  We
              recommend always supplying a <b>%D </b>field; if the date is
              unknown, use “<b>in press</b>” or “<b>unknown</b>” as its contents.

       <b>%E     </b>names an editor of the book within which a cited article
              is collected.  Where a work has editors but no authors,
              name the editors in <b>%A </b>fields and append “<b>, (ed.)</b>” or
              “<b>, (eds.)</b>” to the last of these.

       <b>%G     </b>records the U.S. government ordering number, ISBN, DOI, or
              other unique identifier.

       <b>%I     </b>names the publisher (issuer).

       <b>%J     </b>records the title of the journal within which a cited
              article is collected.  See <b>%B </b>and <b>%T</b>.

       <b>%K     </b>lists keywords intended to aid searches.

       <b>%L     </b>is a label; typically unused in database entries, it can
              override the label format otherwise determined.

       <b>%N     </b>records the issue number of the journal within which a
              cited article is collected.

       <b>%O     </b>presents additional (“other”) information, typically
              placed at the end of the reference.

       <b>%P     </b>lists the page numbers of a cited work that is part of a
              larger collection.  Specify a range with <i>m</i><b>-</b><i>n</i>.

       <b>%Q     </b>names an institutional author when no <b>%A </b>fields are
              present.  Only one <b>%Q </b>field is permitted.

       <b>%R     </b>is an identifier for a report, thesis, memorandum, or
              other unpublished work.

       <b>%S     </b>records the title of a series to which the cited work
              belongs.

       <b>%T     </b>is the work's title.  See <b>%B </b>and <b>%J</b>.

       <b>%V     </b>is the volume number of the journal or book containing the
              cited work.

       <b>%X     </b>is an annotation.  By convention, it is not formatted in
              the citing document.

       If the obsolescent “accent strings” feature of the <i>ms</i> or <i>me</i> macro
       packages is used, such strings should follow the character to be
       accented; an <i>ms</i> document must call the <b>AM </b>macro before using
       them.  Do not quote accent strings: use one <b>\ </b>rather than two.
       See <i>groff_char</i>(7) for a modern approach to the problem of
       diacritics.

   <b>Citations</b>
       Citations have a characteristic format.
              <b>.[</b><i>opening-text</i>
              <i>flags keyword</i> ...
              <i>field</i>
              ...
              <b>.]</b><i>closing-text</i>

       <i>opening-text</i>, <i>closing-text</i>, and <i>flags</i> are optional, and only one
       <i>keyword</i> or <i>field</i> need be specified.  If keywords are present,
       <i>refer</i> searches the bibliographic database(s) for a unique
       reference matching them.  Multiple matches are an error; add more
       keywords to disambiguate the reference.  In the absence of
       keywords, <i>fields</i> constitute the bibliographic record.  Otherwise,
       <i>fields</i> specify additional data to replace or supplement those in
       the reference.  When references are accumulating and keywords are
       present, specify additional <i>fields</i> at most on the first citation
       of a particular reference; they apply to all further citations
       thereof.

       <i>opening-text</i> and <i>closing-text</i> are <i>roff</i> input used to bracket the
       label, overriding the <b>bracket-label </b>command.  Leading and
       trailing spaces are significant.  If either of these is non-
       empty, the corresponding arguments to the <b>bracket-label </b>command
       are not used; alter this behavior with the <b>[ </b>and <b>] </b><i>flags.</i>

       <i>flags</i> is a list of non-alphanumeric characters each of which
       modifies the treatment of the particular citation.  AT&amp;T <i>refer</i>
       treats these flags as keywords, but ignores them since they are
       non-alphanumeric.  The following flags direct GNU <i>refer</i>.

       <b>#      </b>Use the label specified by the <b>short-label </b>command, if
              any.  <i>refer</i> otherwise uses the normal label.  Typically, a
              short label implements author-date citation styles
              consisting of a name, a year, and a disambiguating letter
              if necessary.  “<b>#</b>” is meant to suggest such a
              (quasi-)numeric label.

       <b>[      </b>Precede <i>opening-text</i> with the first argument given to the
              <b>bracket-label </b>command.

       <b>]      </b>Follow <i>closing-text</i> with the second argument given to the
              <b>bracket-label </b>command.

       An advantage of the <b>[ </b>and <b>] </b>flags over use of <i>opening-text</i> and
       <i>closing-text</i> is that you can update the document's bracketing
       style in one place using the <b>bracket-label </b>command.  Another is
       that sorting and merging of citations is not necessarily
       inhibited if the flags are used.

       <i>refer</i> appends any label resulting from a citation to the <i>roff</i>
       input line preceding the <b>.[ </b>token.  If there is no such line,
       <i>refer</i> issues a warning diagnostic.

       There is no special notation for citing multiple references in
       series.  Use a sequence of citations, one for each reference,
       with nothing between them.  <i>refer</i> attaches all of their labels to
       the line preceding the first.  These labels may be sorted or
       merged.  See the description of the <b>&lt;&gt; </b>label expression, and of
       the <b>sort-adjacent-labels </b>and <b>abbreviate-label-ranges </b>commands.  A
       label is not merged if its citation has a non-empty <i>opening-text</i>
       or <i>closing-text</i>.  However, the labels for two adjacent citations,
       the former using the <b>] </b>flag and without any <i>closing-text,</i> and the
       latter using the <b>[ </b>flag and without any <i>opening-text,</i> may be
       sorted and merged even if the former's <i>opening-text</i> or the
       latter's <i>closing-text</i> is non-empty.  (To prevent these
       operations, use the dummy character escape sequence <b>\&amp; </b>as the
       former's <i>closing-text</i>.)

   <b>Commands</b>
       Commands are contained between lines starting with <b>.R1 </b>and <b>.R2</b>.
       The <b>-R </b>option prevents recognition of these lines.  When a <i>refer</i>
       encounters a <b>.R1 </b>line, it flushes any accumulated references.
       Neither <b>.R1 </b>nor <b>.R2 </b>lines, nor anything between them, is output.

       Commands are separated by newlines or semicolons.  A number sign
       (<b>#</b>) introduces a comment that extends to the end of the line, but
       does not conceal the newline.  Each command is broken up into
       words.  Words are separated by spaces or tabs.  A word that
       begins with a (neutral) double quote (<b>"</b>) extends to the next
       double quote that is not followed by another double quote.  If
       there is no such double quote, the word extends to the end of the
       line.  Pairs of double quotes in a word beginning with a double
       quote collapse to one double quote.  Neither a number sign nor a
       semicolon is recognized inside double quotes.  A line can be
       continued by ending it with a backslash “<b>\</b>”; this works
       everywhere except after a number sign.

       Each command <i>name</i> that is marked with * has an associated
       negative command <b>no-</b><i>name</i> that undoes the effect of <i>name</i>.  For
       example, the <b>no-sort </b>command specifies that references should not
       be sorted.  The negative commands take no arguments.

       In the following description each argument must be a single word;
       <i>field</i> is used for a single upper or lower case letter naming a
       field; <i>fields</i> is used for a sequence of such letters; <i>m</i> and <i>n</i> are
       used for a non-negative numbers; <i>string</i> is used for an arbitrary
       string; <i>file</i> is used for the name of a file.

       <b>abbreviate</b>* <i>fields string1 string2 string3 string4</i>
              Abbreviate the first names of <i>fields</i>.  An initial letter
              will be separated from another initial letter by <i>string1</i>,
              from the surname by <i>string2</i>, and from anything else (such
              as “von” or “de”) by <i>string3</i>.  These default to a period
              followed by a space.  In a hyphenated first name, the
              initial of the first part of the name will be separated
              from the hyphen by <i>string4</i>; this defaults to a period.  No
              attempt is made to handle any ambiguities that might
              result from abbreviation.  Names are abbreviated before
              sorting and before label construction.

       <b>abbreviate-label-ranges</b>* <i>string</i>
              Three or more adjacent labels that refer to consecutive
              references will be abbreviated to a label consisting of
              the first label, followed by <i>string</i>, followed by the last
              label.  This is mainly useful with numeric labels.  If
              <i>string</i> is omitted, it defaults to “<b>-</b>”.

       <b>accumulate</b>*
              Accumulate references instead of writing out each
              reference as it is encountered.  Accumulated references
              will be written out whenever a reference of the form
                     <b>.[</b>
                     <b>$LIST$</b>
                     <b>.]</b>
              is encountered, after all input files have been processed,
              and whenever a <b>.R1 </b>line is recognized.

       <b>annotate</b>* <i>field string</i>
              <i>field</i> is an annotation; print it at the end of the
              reference as a paragraph preceded by the line

                     <b>.</b><i>string</i>

              If <i>string</i> is omitted, it will default to <b>AP</b>; if <i>field</i> is
              also omitted it will default to <b>X</b>.  Only one field can be
              an annotation.

       <b>articles </b><i>string</i> ...
              Each <i>string</i> is a definite or indefinite article, and
              should be ignored at the beginning of <b>T </b>fields when
              sorting.  Initially, “a”, “an”, and “the” are recognized
              as articles.

       <b>bibliography </b><i>file</i> ...
              Write out all the references contained in each
              bibliographic database <i>file</i>.  This command should come
              last in an <b>.R1</b>/<b>.R2 </b>block.

       <b>bracket-label </b><i>string1 string2 string3</i>
              In the text, bracket each label with <i>string1</i> and <i>string2</i>.
              An occurrence of <i>string2</i> immediately followed by <i>string1</i>
              will be turned into <i>string3</i>.  The default behavior is as
              follows.
                     bracket-label \*([. \*(.] ", "

       <b>capitalize </b><i>fields</i>
              Convert <i>fields</i> to caps and small caps.

       <b>compatible</b>*
              Recognize <b>.R1 </b>and <b>.R2 </b>even when followed by a character
              other than space or newline.

       <b>database </b><i>file</i> ...
              Search each bibliographic database <i>file</i>.  For each <i>file</i>,
              if an index file<i>.i</i> created by <i>indxbib</i>(1) exists, then it
              will be searched instead; each index can cover multiple
              databases.

       <b>date-as-label</b>* <i>string</i>
              <i>string</i> is a label expression that specifies a string with
              which to replace the <b>D </b>field after constructing the label.
              See subsection “Label expressions” below for a description
              of label expressions.  This command is useful if you do
              not want explicit labels in the reference list, but
              instead want to handle any necessary disambiguation by
              qualifying the date in some way.  The label used in the
              text would typically be some combination of the author and
              date.  In most cases you should also use the
              <b>no-label-in-reference </b>command.  For example,
                     date-as-label D.+yD.y%a*D.-y
              would attach a disambiguating letter to the year part of
              the <b>D </b>field in the reference.

       <b>default-database</b>*
              The default database should be searched.  This is the
              default behavior, so the negative version of this command
              is more useful.  <i>refer</i> determines whether the default
              database should be searched on the first occasion that it
              needs to do a search.  Thus a <b>no-default-database </b>command
              must be given before then, in order to be effective.

       <b>discard</b>* <i>fields</i>
              When the reference is read, <i>fields</i> should be discarded; no
              string definitions for <i>fields</i> will be output.  Initially,
              <i>fields</i> are <b>XYZ</b>.

       <b>et-al</b>* <i>string m n</i>
              Configure use of “<b>et al</b>” in the evaluation of <b>@</b>
              expressions in label expressions.  If <i>u</i> is the number of
              authors needed to make the author sequence unambiguous and
              the total number of authors is <i>t,</i> then the last <i>t</i>-<i>u</i>
              authors will be replaced by <i>string</i> provided that <i>t</i>-<i>u</i> is
              not less than <i>m</i> and <i>t</i> is not less than <i>n</i>.  The default
              behavior is as follows.
                     et-al " et al" 2 3
              Note the absence of a dot from the end of the
              abbreviation, which is arguably not correct.  (<i>Et al</i>[.]
              is short for <i>et alli</i>, as <i>etc.</i> is short for <i>et cetera</i>.)

       <b>include </b><i>file</i>
              Include <i>file</i> and interpret the contents as commands.

       <b>join-authors </b><i>string1 string2 string3</i>
              Join multiple authors together with <i>string</i>s.  When there
              are exactly two authors, they will be joined with <i>string1</i>.
              When there are more than two authors, all but the last two
              will be joined with <i>string2</i>, and the last two authors will
              be joined with <i>string3</i>.  If <i>string3</i> is omitted, it will
              default to <i>string1</i>; if <i>string2</i> is also omitted it will
              also default to <i>string1</i>.  For example,
                     join-authors " and " ", " ", and "
              will restore the default method for joining authors.

       <b>label-in-reference</b>*
              When outputting the reference, define the string <b>[F </b>to be
              the reference's label.  This is the default behavior, so
              the negative version of this command is more useful.

       <b>label-in-text</b>*
              For each reference output a label in the text.  The label
              will be separated from the surrounding text as described
              in the <b>bracket-label </b>command.  This is the default
              behavior, so the negative version of this command is more
              useful.

       <b>label </b><i>string</i>
              <i>string</i> is a label expression describing how to label each
              reference.

       <b>separate-label-second-parts </b><i>string</i>
              When merging two-part labels, separate the second part of
              the second label from the first label with <i>string</i>.  See
              the description of the <b>&lt;&gt; </b>label expression.

       <b>move-punctuation</b>*
              In the text, move any punctuation at the end of line past
              the label.  We recommend employing this command unless you
              are using superscripted numbers as labels.

       <b>reverse</b>* <i>string</i>
              Reverse the fields whose names are in <i>string</i>.  An optional
              integer after a field name limits the number of such
              fields to the given count; no integer means no limit.

       <b>search-ignore</b>* <i>fields</i>
              While searching for keys in databases for which no index
              exists, ignore the contents of <i>fields</i>.  Initially, fields
              <b>XYZ </b>are ignored.

       <b>search-truncate</b>* <i>n</i>
              Only require the first <i>n</i> characters of keys to be given.
              In effect when searching for a given key words in the
              database are truncated to the maximum of <i>n</i> and the length
              of the key.  Initially, <i>n</i> is 6.

       <b>short-label</b>* <i>string</i>
              <i>string</i> is a label expression that specifies an alternative
              (usually shorter) style of label.  This is used when the <b>#</b>
              flag is given in the citation.  When using author-date
              style labels, the identity of the author or authors is
              sometimes clear from the context, and so it may be
              desirable to omit the author or authors from the label.
              The <b>short-label </b>command will typically be used to specify
              a label containing just a date and possibly a
              disambiguating letter.

       <b>sort</b>* <i>string</i>
              Sort references according to <i>string</i>.  References will
              automatically be accumulated.  <i>string</i> should be a list of
              field names, each followed by a number, indicating how
              many fields with the name should be used for sorting.  “<b>+</b>”
              can be used to indicate that all the fields with the name
              should be used.  Also <b>. </b>can be used to indicate the
              references should be sorted using the (tentative) label.
              (Subsection “Label expressions” below describes the
              concept of a tentative label.)

       <b>sort-adjacent-labels</b>*
              Sort labels that are adjacent in the text according to
              their position in the reference list.  This command should
              usually be given if the <b>abbreviate-label-ranges </b>command
              has been given, or if the label expression contains a <b>&lt;&gt;</b>
              expression.  This has no effect unless references are
              being accumulated.

   <b>Label expressions</b>
       Label expressions can be evaluated both normally and tentatively.
       The result of normal evaluation is used for output.  The result
       of tentative evaluation, called the <i>tentative label</i>, is used to
       gather the information that normal evaluation needs to
       disambiguate the label.  Label expressions specified by the
       <b>date-as-label </b>and <b>short-label </b>commands are not evaluated
       tentatively.  Normal and tentative evaluation are the same for
       all types of expression other than <b>@</b>, <b>*</b>, and <b>% </b>expressions.  The
       description below applies to normal evaluation, except where
       otherwise specified.

       <i>field</i> [<i>n</i>]
              is the <i>n</i>th part of <i>field</i>.  If <i>n</i> is omitted, it defaults
              to 1.

       <b>'</b><i>string</i><b>'</b>
              The characters in <i>string</i> literally.

       <b>@      </b>All authors joined as specified by the <b>join-authors</b>
              command.  The whole of each author's name is used.
              However, if the references are sorted by author (that is,
              the sort specification starts with “<b>A+</b>”), then authors'
              surnames will be used instead, provided that this does not
              introduce ambiguity, and also an initial subsequence of
              the authors may be used instead of all the authors, again
              provided that this does not introduce ambiguity.  Given
              any two referenced works with <i>n</i> authors, the use of only
              the surname for the <i>n</i>th author of a reference is regarded
              as ambiguous if the other reference shares the first <i>n</i>-1
              authors, the <i>n</i>th authors of each reference are not
              identical, but the <i>n</i>th authors' surnames <i>are</i> the same.  A
              proper initial subsequence of the sequence of authors for
              some reference is considered to be ambiguous if there is a
              reference with some other sequence of authors which also
              has that subsequence as a proper initial subsequence.
              When an initial subsequence of authors is used, the
              remaining authors are replaced by the string specified by
              the <b>et-al </b>command; this command may also specify
              additional requirements that must be met before an initial
              subsequence can be used.  <b>@ </b>tentatively evaluates to a
              canonical representation of the authors, such that authors
              that compare equally for sorting purposes have the same
              representation.

       <b>%</b><i>n</i>
       <b>%a</b>
       <b>%A</b>
       <b>%i</b>
       <b>%I     </b>The serial number of the reference formatted according to
              the character following the <b>%</b>.  The serial number of a
              reference is 1 plus the number of earlier references with
              same tentative label as this reference.  These expressions
              tentatively evaluate to an empty string.

       <i>expr</i><b>*  </b>If there is another reference with the same tentative
              label as this reference, then <i>expr</i>, otherwise an empty
              string.  It tentatively evaluates to an empty string.

       <i>expr</i><b>+</b><i>n</i>
       <i>expr</i><b>-</b><i>n</i> The first (<b>+</b>) or last (<b>-</b>) <i>n</i> upper or lower case letters or
              digits of <i>expr</i>.  <i>roff</i> special characters (such as <b>\('a</b>)
              count as a single letter.  Accent strings are retained but
              do not count towards the total.

       <i>expr</i><b>.l </b><i>expr</i> converted to lowercase.

       <i>expr</i><b>.u </b><i>expr</i> converted to uppercase.

       <i>expr</i><b>.c </b><i>expr</i> converted to caps and small caps.

       <i>expr</i><b>.r </b><i>expr</i> reversed so that the surname is first.

       <i>expr</i><b>.a </b><i>expr</i> with first names abbreviated.  Fields specified in
              the <b>abbreviate </b>command are abbreviated before any labels
              are evaluated.  Thus <b>.a </b>is useful only when you want a
              field to be abbreviated in a label but not in a reference.

       <i>expr</i><b>.y </b>The year part of <i>expr</i>.

       <i>expr</i><b>.+y</b>
              The part of <i>expr</i> before the year, or the whole of <i>expr</i> if
              it does not contain a year.

       <i>expr</i><b>.-y</b>
              The part of <i>expr</i> after the year, or an empty string if
              <i>expr</i> does not contain a year.

       <i>expr</i><b>.n </b>The surname part of <i>expr</i>.

       <i>expr1</i><b>~</b><i>expr2</i>
              <i>expr1</i> except that if the last character of <i>expr1</i> is <b>- </b>then
              it will be replaced by <i>expr2</i>.

       <i>expr1 expr2</i>
              The concatenation of <i>expr1</i> and <i>expr2</i>.

       <i>expr1</i><b>|</b><i>expr2</i>
              If <i>expr1</i> is non-empty then <i>expr1</i> otherwise <i>expr2</i>.

       <i>expr1</i><b>&amp;</b><i>expr2</i>
              If <i>expr1</i> is non-empty then <i>expr2</i> otherwise an empty
              string.

       <i>expr1</i><b>?</b><i>expr2</i><b>:</b><i>expr3</i>
              If <i>expr1</i> is non-empty then <i>expr2</i> otherwise <i>expr3</i>.

       <b>&lt;</b><i>expr</i><b>&gt; </b>The label is in two parts, which are separated by <i>expr</i>.
              Two adjacent two-part labels which have the same first
              part will be merged by appending the second part of the
              second label onto the first label separated by the string
              specified in the <b>separate-label-second-parts </b>command
              (initially, a comma followed by a space); the resulting
              label will also be a two-part label with the same first
              part as before merging, and so additional labels can be
              merged into it.  It is permissible for the first part to
              be empty; this may be desirable for expressions used in
              the <b>short-label </b>command.

       <b>(</b><i>expr</i><b>) </b>The same as <i>expr</i>.  Used for grouping.

       The above expressions are listed in order of precedence (highest
       first); <b>&amp; </b>and <b>| </b>have the same precedence.

   <b>Macro interface</b>
       Each reference starts with a call to the macro <b>]-</b>.  The string <b>[F</b>
       will be defined to be the label for this reference, unless the
       <b>no-label-in-reference </b>command has been given.  There then follows
       a series of string definitions, one for each field: string <b>[</b><i>X</i>
       corresponds to field <i>X</i>.  The register <b>[P </b>is set to 1 if the <b>P</b>
       field contains a range of pages.  The <b>[T</b>, <b>[A </b>and <b>[O </b>registers are
       set to 1 according as the <b>T</b>, <b>A </b>and <b>O </b>fields end with any of <b>.?!</b>
       (an end-of-sentence character).  The <b>[E </b>register will be set to 1
       if the <b>[E </b>string contains more than one name.  The reference is
       followed by a call to the <b>][ </b>macro.  The first argument to this
       macro gives a number representing the type of the reference.  If
       a reference contains a <b>J </b>field, it will be classified as type 1,
       otherwise if it contains a <b>B </b>field, it will be type 3, otherwise
       if it contains a <b>G </b>or <b>R </b>field it will be type 4, otherwise if it
       contains an <b>I </b>field it will be type 2, otherwise it will be
       type 0.  The second argument is a symbolic name for the type:
       <b>other</b>, <b>journal-article</b>, <b>book</b>, <b>article-in-book</b>, or <b>tech-report</b>.
       Groups of references that have been accumulated or are produced
       by the <b>bibliography </b>command are preceded by a call to the <b>]&lt;</b>
       macro and followed by a call to the <b>]&gt; </b>macro.
</pre> <h2>
Options </h2>
<pre>
       <b>--help </b>displays a usage message, while <b>-v </b>and <b>--version </b>show
       version information; all exit afterward.

       <b>-R     </b>Don't recognize lines beginning with <b>.R1</b>/<b>.R2</b>.

       Other options are equivalent to <i>refer</i> commands.

       <b>-a </b><i>n</i>   <b>reverse A</b><i>n</i>

       <b>-b     no-label-in-text; no-label-in-reference</b>

       <b>-B     </b>See below.

       <b>-c </b><i>fields</i>
              <b>capitalize </b><i>fields</i>

       <b>-C     compatible</b>

       <b>-e     accumulate</b>

       <b>-f </b><i>n</i>   <b>label %</b><i>n</i>

       <b>-i </b><i>fields</i>
              <b>search-ignore </b><i>fields</i>

       <b>-k     label L~%a</b>

       <b>-k </b><i>field</i>
              <b>label </b><i>field</i><b>~%a</b>

       <b>-l     label A.nD.y%a</b>

       <b>-l </b><i>m</i>   <b>label A.n+</b><i>m</i><b>D.y%a</b>

       <b>-l ,</b><i>n</i>  <b>label A.nD.y-</b><i>n</i><b>%a</b>

       <b>-l </b><i>m</i><b>,</b><i>n</i> <b>label A.n+</b><i>m</i><b>D.y-</b><i>n</i><b>%a</b>

       <b>-n     no-default-database</b>

       <b>-p </b><i>db-file</i>
              <b>database </b><i>db-file</i>

       <b>-P     move-punctuation</b>

       <b>-s </b><i>spec</i>
              <b>sort </b><i>spec</i>

       <b>-S     label "(A.n|Q) ', ' (D.y|D)"; bracket-label " (" ) "; "</b>

       <b>-t </b><i>n</i>   <b>search-truncate </b><i>n</i>

       The <b>B </b>option has command equivalents with the addition that the
       file names specified on the command line are processed as if they
       were arguments to the <b>bibliography </b>command instead of in the
       normal way.

       <b>-B     annotate X AP; no-label-in-reference</b>

       <b>-B </b><i>field</i><b>.</b><i>macro</i>
              <b>annotate </b><i>field macro</i><b>; no-label-in-reference</b>
</pre> <h2>
Environment </h2>
<pre>
       <i>REFER</i>  Assign this variable a file name to override the default
              database.
</pre> <h2>
Files </h2>
<pre>
       <i>/usr/dict/papers/Ind</i>
              Default database.

       file<i>.i</i> Index files.

       <i>/usr/local/share/groff/1.23.0/tmac/refer.tmac</i>
              defines macros and strings facilitating integration with
              macro packages that wish to support <i>refer</i>.

       <i>refer</i> uses temporary files.  See the <i>groff</i>(1) man page for
       details of where such files are created.
</pre> <h2>
Bugs </h2>
<pre>
       In label expressions, <b>&lt;&gt; </b>expressions are ignored inside <b>.</b><i>char</i>
       expressions.
</pre> <h2>
Examples </h2>
<pre>
       We can illustrate the operation of <i>refer</i> with a sample
       bibliographic database containing one entry and a simple <i>roff</i>
       document to cite that entry.

              $ <b>cat &gt; my-db-file</b>
              <b>%A Daniel P.\&amp; Friedman</b>
              <b>%A Matthias Felleisen</b>
              <b>%C Cambridge, Massachusetts</b>
              <b>%D 1996</b>
              <b>%I The MIT Press</b>
              <b>%T The Little Schemer, Fourth Edition</b>
              $ <b>refer -p my-db-file</b>
              <b>Read the book</b>
              <b>.[</b>
              <b>friedman</b>
              <b>.]</b>
              <b>on your summer vacation.</b>
              <i>&lt;Control+D&gt;</i>
              .lf 1 -
              Read the book\*([.1\*(.]
              .ds [F 1
              .]-
              .ds [A Daniel P. Friedman and Matthias Felleisen
              .ds [C Cambridge, Massachusetts
              .ds [D 1996
              .ds [I The MIT Press
              .ds [T The Little Schemer, Fourth Edition
              .nr [T 0
              .nr [A 0
              .][ 2 book
              .lf 5 -
              on your summer vacation.

       The foregoing shows us that <i>refer</i> (a) produces a label “1”; (b)
       brackets that label with interpolations of the “<b>[.</b>”  and “<b>.]</b>”
       strings; (c) calls a macro “<b>]-</b>”; (d) defines strings and
       registers containing the label and bibliographic data for the
       reference; (e) calls a macro “<b>][</b>”; and (f) uses the <b>lf </b>request to
       restore the line numbers of the original input.  As discussed in
       subsection “Macro interface” above, it is up to the document or a
       macro package to employ and format this information usefully.
       Let us see how we might turn <i>groff_ms</i>(7) to this task.

              $ <b>REFER=my-db-file groff -R -ms</b>
              <b>.LP</b>
              <b>Read the book</b>
              <b>.[</b>
              <b>friedman</b>
              <b>.]</b>
              <b>on your summer vacation.</b>
              <b>Commentary is available.\*{*\*}</b>
              <b>.FS \*{*\*}</b>
              <b>Space reserved for penetrating insight.</b>
              <b>.FE</b>

       <i>ms</i>'s automatic footnote numbering mechanism is not aware of
       <i>refer</i>'s label numbering, so we have manually specified a
       (superscripted) symbolic footnote for our non-bibliographic
       aside.
</pre> <h2>
See also </h2>
<pre>
       “Refer — A Bibliography System”, by Bill Tuthill, 1983, Computing
       Services, University of California, Berkeley.

       “Some Applications of Inverted Indexes on the Unix System”, by M.
       E. Lesk, 1978, AT&amp;T Bell Laboratories Computing Science Technical
       Report No. 69.

       <i>indxbib</i>(1), <i>lookbib</i>(1), <i>lkbib</i>(1)
</pre> <h2>
COLOPHON </h2>
<pre>
       This page is part of the <i>groff</i> (GNU troff) project.  Information
       about the project can be found at 
       ⟨<a href="http://www.gnu.org/software/groff/">http://www.gnu.org/software/groff/</a>⟩.  If you have a bug report
       for this manual page, see ⟨<a href="http://www.gnu.org/software/groff/">http://www.gnu.org/software/groff/</a>⟩.
       This page was obtained from the project's upstream Git repository
       ⟨<a href="https://git.savannah.gnu.org/git/groff.git">https://git.savannah.gnu.org/git/groff.git</a>⟩ on 2024-06-14.  (At
       that time, the date of the most recent commit that was found in
       the repository was 2024-06-10.)  If you discover any rendering
       problems in this HTML version of the page, or you believe there
       is a better or more up-to-date source for the page, or you have
       corrections or improvements to the information in this COLOPHON
       (which is <i>not</i> part of the original manual page), send a mail to
       man-pages@man7.org

<span class="footline">groff 1.23.0.1273-9d53-dirty   6 June 2024                      <i>refer</i>(1)</span>
</pre>          <div class="_attribution">
  <p class="_attribution-p">
    ...<br>
    <a href="https://man7.org/linux/man-pages/man1/refer.1.html" class="_attribution-link">https://man7.org/linux/man-pages/man1/refer.1.html</a>
  </p>
</div>
