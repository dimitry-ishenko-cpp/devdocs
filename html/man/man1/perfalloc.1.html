<h1>perfalloc(1) — Linux manual page</h1>   <pre>
<span class="headline"><i>PERFALLOC</i>(1)             General Commands Manual            <i>PERFALLOC</i>(1)</span>
</pre> <h2>
NAME </h2>
<pre>
       <b>perfalloc </b>- notify <a href="pmdaperfevent.1.html">pmdaperfevent(1)</a> to disable hardware counter
       allocation.
</pre> <h2>
SYNOPSIS </h2>
<pre>
       <b>$PCP_PMDAS_DIR/perfevent/perfalloc </b>[<b>-D</b>] [<b>-d</b>] [<b>-f </b><i>lockfile</i>] [<b>-h</b>]
       [<b>-v</b>] [<i>commandline</i>]
</pre> <h2>
DESCRIPTION </h2>
<pre>
       <b>perfalloc </b>is a command that notifies the <a href="pmdaperfevent.1.html">pmdaperfevent(1)</a> to
       disable hardware counter event collection.  This allow
       unprivileged processes to use the hardware counters.

       If the reservation request fails, then perfalloc exits
       immediately with exit code EXIT_FAILURE.  If successful, the
       perfalloc will run until a kill signal is received.  The
       reservation request persists while perfalloc is running.

       Note that <b>pmdaperfevent </b>is affected by the value of the
       <i>kernel.perf_event_paranoid</i> setting, which can be adjusted by
       <a href="../man8/sysctl.8.html">sysctl(8)</a>.

       If a commandline is given, this is executed as a subprocess of
       the agent.  When the command dies, so does the agent.

       A brief description of the command line options follows:

       <b>-D   </b>run in the foreground (the default)

       <b>-d   </b>run in the background

       <b>-f FILE</b>
            use FILE as the lock file (default
            $PCP_PMDAS_DIR/perfevent/perflock)

       <b>-h   </b>display a help message and exit

       <b>-v   </b>output version number and exit
</pre> <h2>
BUGS </h2>
<pre>
       There may be a delay of up to 100 milliseconds between perfalloc
       requesting the hardware counter disabling and the perfevent PMDA
       processing the request.

       The perfalloc process does not check the status of the request
       and therefore is not able to provide a positive confirmation that
       the request succeeded and the hardware counters are disabled.
</pre> <h2>
SEE ALSO </h2>
<pre>
       <a href="pmdaperfevent.1.html">pmdaperfevent(1)</a>, <b>perfevent.conf</b>(3) and <a href="../man8/sysctl.8.html">sysctl(8)</a>.
</pre> <h2>
COLOPHON </h2>
<pre>
       This page is part of the <i>PCP</i> (Performance Co-Pilot) project.
       Information about the project can be found at 
       ⟨<a href="http://www.pcp.io/">http://www.pcp.io/</a>⟩.  If you have a bug report for this manual
       page, send it to pcp@groups.io.  This page was obtained from the
       project's upstream Git repository
       ⟨<a href="https://github.com/performancecopilot/pcp.git">https://github.com/performancecopilot/pcp.git</a>⟩ on 2024-06-14.
       (At that time, the date of the most recent commit that was found
       in the repository was 2024-06-14.)  If you discover any rendering
       problems in this HTML version of the page, or you believe there
       is a better or more up-to-date source for the page, or you have
       corrections or improvements to the information in this COLOPHON
       (which is <i>not</i> part of the original manual page), send a mail to
       man-pages@man7.org

<span class="footline">Performance Co-Pilot               PCP                      <i>PERFALLOC</i>(1)</span>
</pre>  <p>Pages that refer to this page: <a href="pmdaperfevent.1.html">pmdaperfevent(1)</a> </p> <hr>         <div class="_attribution">
  <p class="_attribution-p">
    ...<br>
    <a href="https://man7.org/linux/man-pages/man1/perfalloc.1.html" class="_attribution-link">https://man7.org/linux/man-pages/man1/perfalloc.1.html</a>
  </p>
</div>
