<h1>join(1p) — Linux manual page</h1>   <pre>
<span class="headline"><i>JOIN</i>(1P)                POSIX Programmer's Manual               <i>JOIN</i>(1P)</span>
</pre> <h2>
PROLOG </h2>
<pre>
       This manual page is part of the POSIX Programmer's Manual.  The
       Linux implementation of this interface may differ (consult the
       corresponding Linux manual page for details of Linux behavior),
       or the interface may not be implemented on Linux.
</pre> <h2>
NAME </h2>
<pre>
       join — relational database operator
</pre> <h2>
SYNOPSIS </h2>
<pre>
       join <b>[</b>-a <i>file_number</i>|-v <i>file_number</i><b>] [</b>-e <i>string</i><b>] [</b>-o <i>list</i><b>] [</b>-t <i>char</i><b>]</b>
           <b>[</b>-1 <i>field</i><b>] [</b>-2 <i>field</i><b>] </b><i>file1 file2</i>
</pre> <h2>
DESCRIPTION </h2>
<pre>
       The <i>join</i> utility shall perform an equality join on the files
       <i>file1</i> and <i>file2</i>.  The joined files shall be written to the
       standard output.

       The join field is a field in each file on which the files are
       compared. The <i>join</i> utility shall write one line in the output for
       each pair of lines in <i>file1</i> and <i>file2</i> that have join fields that
       collate equally. The output line by default shall consist of the
       join field, then the remaining fields from <i>file1</i>, then the
       remaining fields from <i>file2</i>.  This format can be changed by using
       the <b>-o </b>option (see below). The <b>-a </b>option can be used to add
       unmatched lines to the output. The <b>-v </b>option can be used to
       output only unmatched lines.

       The files <i>file1</i> and <i>file2</i> shall be ordered in the collating
       sequence of <i>sort</i> <b>-b </b>on the fields on which they shall be joined,
       by default the first in each line. All selected output shall be
       written in the same collating sequence.

       The default input field separators shall be &lt;blank&gt; characters.
       In this case, multiple separators shall count as one field
       separator, and leading separators shall be ignored. The default
       output field separator shall be a &lt;space&gt;.

       The field separator and collating sequence can be changed by
       using the <b>-t </b>option (see below).

       If the same key appears more than once in either file, all
       combinations of the set of remaining fields in <i>file1</i> and the set
       of remaining fields in <i>file2</i> are output in the order of the lines
       encountered.

       If the input files are not in the appropriate collating sequence,
       the results are unspecified.
</pre> <h2>
OPTIONS </h2>
<pre>
       The <i>join</i> utility shall conform to the Base Definitions volume of
       POSIX.1‐2017, <i>Section 12.2</i>, <i>Utility Syntax Guidelines</i>.

       The following options shall be supported:

       <b>-a </b><i>file_number</i>
                 Produce a line for each unpairable line in file
                 <i>file_number</i>, where <i>file_number</i> is 1 or 2, in addition
                 to the default output. If both <b>-a</b>1 and <b>-a</b>2 are
                 specified, all unpairable lines shall be output.

       <b>-e </b><i>string</i> Replace empty output fields in the list selected by <b>-o</b>
                 with the string <i>string</i>.

       <b>-o </b><i>list</i>   Construct the output line to comprise the fields
                 specified in <i>list</i>, each element of which shall have one
                 of the following two forms:

                  1. <i>file_number.field</i>, where <i>file_number</i> is a file
                     number and <i>field</i> is a decimal integer field number

                  2. 0 (zero), representing the join field

                 The elements of <i>list</i> shall be either &lt;comma&gt;-separated
                 or &lt;blank&gt;-separated, as specified in Guideline 8 of
                 the Base Definitions volume of POSIX.1‐2017, <i>Section</i>
                 <i>12.2</i>, <i>Utility Syntax Guidelines</i>.  The fields specified
                 by <i>list</i> shall be written for all selected output lines.
                 Fields selected by <i>list</i> that do not appear in the input
                 shall be treated as empty output fields. (See the <b>-e</b>
                 option.) Only specifically requested fields shall be
                 written. The application shall ensure that <i>list</i> is a
                 single command line argument.

       <b>-t </b><i>char</i>   Use character <i>char</i> as a separator, for both input and
                 output. Every appearance of <i>char</i> in a line shall be
                 significant. When this option is specified, the
                 collating sequence shall be the same as <i>sort</i> without
                 the <b>-b </b>option.

       <b>-v </b><i>file_number</i>
                 Instead of the default output, produce a line only for
                 each unpairable line in <i>file_number</i>, where <i>file_number</i>
                 is 1 or 2. If both <b>-v</b>1 and <b>-v</b>2 are specified, all
                 unpairable lines shall be output.

       <b>-1 </b><i>field</i>  Join on the <i>field</i>th field of file 1. Fields are decimal
                 integers starting with 1.

       <b>-2 </b><i>field</i>  Join on the <i>field</i>th field of file 2. Fields are decimal
                 integers starting with 1.
</pre> <h2>
OPERANDS </h2>
<pre>
       The following operands shall be supported:

       <i>file1</i>, <i>file2</i>
                 A pathname of a file to be joined. If either of the
                 <i>file1</i> or <i>file2</i> operands is <b>'-'</b>, the standard input
                 shall be used in its place.
</pre> <h2>
STDIN </h2>
<pre>
       The standard input shall be used only if the <i>file1</i> or <i>file2</i>
       operand is <b>'-'</b>.  See the INPUT FILES section.
</pre> <h2>
INPUT FILES </h2>
<pre>
       The input files shall be text files.
</pre> <h2>
ENVIRONMENT VARIABLES </h2>
<pre>
       The following environment variables shall affect the execution of
       <i>join</i>:

       <i>LANG</i>      Provide a default value for the internationalization
                 variables that are unset or null. (See the Base
                 Definitions volume of POSIX.1‐2017, <i>Section 8.2</i>,
                 <i>Internationalization Variables</i> for the precedence of
                 internationalization variables used to determine the
                 values of locale categories.)

       <i>LC_ALL</i>    If set to a non-empty string value, override the values
                 of all the other internationalization variables.

       <i>LC_COLLATE</i>
                 Determine the locale of the collating sequence <i>join</i>
                 expects to have been used when the input files were
                 sorted.

       <i>LC_CTYPE</i>  Determine the locale for the interpretation of
                 sequences of bytes of text data as characters (for
                 example, single-byte as opposed to multi-byte
                 characters in arguments and input files).

       <i>LC_MESSAGES</i>
                 Determine the locale that should be used to affect the
                 format and contents of diagnostic messages written to
                 standard error.

       <i>NLSPATH</i>   Determine the location of message catalogs for the
                 processing of <i>LC_MESSAGES</i>.
</pre> <h2>
ASYNCHRONOUS EVENTS </h2>
<pre>
       Default.
</pre> <h2>
STDOUT </h2>
<pre>
       The <i>join</i> utility output shall be a concatenation of selected
       character fields.  When the <b>-o </b>option is not specified, the
       output shall be:

           "%s%s%s\n", &lt;<i>join field</i>&gt;, &lt;<i>other file1 fields</i>&gt;,
               &lt;<i>other file2 fields</i>&gt;

       If the join field is not the first field in a file, the
       &lt;<i>other file fields</i>&gt; for that file shall be:

           &lt;<i>fields preceding join field</i>&gt;, &lt;<i>fields following join field</i>&gt;

       When the <b>-o </b>option is specified, the output format shall be:

           "%s\n", &lt;<i>concatenation of fields</i>&gt;

       where the concatenation of fields is described by the <b>-o </b>option,
       above.

       For either format, each field (except the last) shall be written
       with its trailing separator character. If the separator is the
       default (&lt;blank&gt; characters), a single &lt;space&gt; shall be written
       after each field (except the last).
</pre> <h2>
STDERR </h2>
<pre>
       The standard error shall be used only for diagnostic messages.
</pre> <h2>
OUTPUT FILES </h2>
<pre>
       None.
</pre> <h2>
EXTENDED DESCRIPTION </h2>
<pre>
       None.
</pre> <h2>
EXIT STATUS </h2>
<pre>
       The following exit values shall be returned:

        0    All input files were output successfully.

       &gt;0    An error occurred.
</pre> <h2>
CONSEQUENCES OF ERRORS </h2>
<pre>
       Default.

       <i>The following sections are informative.</i>
</pre> <h2>
APPLICATION USAGE </h2>
<pre>
       Pathnames consisting of numeric digits or of the form
       <i>string.string</i> should not be specified directly following the <b>-o</b>
       list.

       If the collating sequence of the current locale does not have a
       total ordering of all characters (see the Base Definitions volume
       of POSIX.1‐2017, <i>Section 7.3.2</i>, <i>LC_COLLATE</i>), <i>join</i> treats fields
       that collate equally but are not identical as being the same. If
       this behavior is not desired, it can be avoided by forcing the
       use of the POSIX locale (although this means re-sorting the input
       files into the POSIX locale collating sequence.)

       When using <i>join</i> to process pathnames, it is recommended that
       LC_ALL, or at least LC_CTYPE and LC_COLLATE, are set to POSIX or
       C in the environment, since pathnames can contain byte sequences
       that do not form valid characters in some locales, in which case
       the utility's behavior would be undefined. In the POSIX locale
       each byte is a valid single-byte character, and therefore this
       problem is avoided.
</pre> <h2>
EXAMPLES </h2>
<pre>
       The <b>-o </b>0 field essentially selects the union of the join fields.
       For example, given file <b>phone</b>:

           !Name           Phone Number
           Don             +1 123-456-7890
           Hal             +1 234-567-8901
           Yasushi         +2 345-678-9012

       and file <b>fax</b>:

           !Name           Fax Number
           Don             +1 123-456-7899
           Keith           +1 456-789-0122
           Yasushi         +2 345-678-9011

       (where the large expanses of white space are meant to each
       represent a single &lt;tab&gt;), the command:

           join -t "&lt;tab&gt;" -a 1 -a 2 -e '(unknown)' -o 0,1.2,2.2 phone fax

       (where <i>&lt;tab&gt;</i> is a literal &lt;tab&gt; character) would produce:

           !Name           Phone Number            Fax Number
           Don             +1 123-456-7890         +1 123-456-7899
           Hal             +1 234-567-8901         (unknown)
           Keith           (unknown)               +1 456-789-0122
           Yasushi         +2 345-678-9012         +2 345-678-9011

       Multiple instances of the same key will produce combinatorial
       results.  The following:

           fa:
               a x
               a y
               a z
           fb:
               a p

       will produce:

           a x p
           a y p
           a z p

       And the following:

           fa:
               a b c
               a d e
           fb:
               a w x
               a y z
               a o p

       will produce:

           a b c w x
           a b c y z
           a b c o p
           a d e w x
           a d e y z
           a d e o p
</pre> <h2>
RATIONALE </h2>
<pre>
       The <b>-e </b>option is only effective when used with <b>-o </b>because, unless
       specific fields are identified using <b>-o</b>, <i>join</i> is not aware of
       what fields might be empty. The exception to this is the join
       field, but identifying an empty join field with the <b>-e </b>string is
       not historical practice and some scripts might break if this were
       changed.

       The 0 field in the <b>-o </b>list was adopted from the Tenth Edition
       version of <i>join</i> to satisfy international objections that the <i>join</i>
       in the base documents for IEEE Std 1003.2‐1992 did not support
       the ``full join'' or ``outer join'' described in relational
       database literature.  Although it has been possible to include a
       join field in the output (by default, or by field number using
       <b>-o</b>), the join field could not be included for an unpaired line
       selected by <b>-a</b>.  The <b>-o </b>0 field essentially selects the union of
       the join fields.

       This sort of outer join was not possible with the <i>join</i> commands
       in the base documents for IEEE Std 1003.2‐1992. The <b>-o </b>0 field
       was chosen because it is an upwards-compatible change for
       applications. An alternative was considered: have the join field
       represent the union of the fields in the files (where they are
       identical for matched lines, and one or both are null for
       unmatched lines). This was not adopted because it would break
       some historical applications.

       The ability to specify <i>file2</i> as <b>- </b>is not historical practice; it
       was added for completeness.

       The <b>-v </b>option is not historical practice, but was considered
       necessary because it permitted the writing of <i>only</i> those lines
       that do not match on the join field, as opposed to the <b>-a </b>option,
       which prints both lines that do and do not match. This additional
       facility is parallel with the <b>-v </b>option of <i>grep</i>.

       Some historical implementations have been encountered where a
       blank line in one of the input files was considered to be the end
       of the file; the description in this volume of POSIX.1‐2017 does
       not cite this as an allowable case.

       Earlier versions of this standard allowed <b>-j</b>, <b>-j1</b>, <b>-j2 </b>options,
       and a form of the <b>-o </b>option that allowed the <i>list</i> option-argument
       to be multiple arguments. These forms are no longer specified by
       POSIX.1‐2008 but may be present in some implementations.
</pre> <h2>
FUTURE DIRECTIONS </h2>
<pre>
       None.
</pre> <h2>
SEE ALSO </h2>
<pre>
       <a href="awk.1p.html">awk(1p)</a>, <a href="comm.1p.html">comm(1p)</a>, <a href="sort.1p.html">sort(1p)</a>, <a href="uniq.1p.html">uniq(1p)</a>

       The Base Definitions volume of POSIX.1‐2017, <i>Section 7.3.2</i>,
       <i>LC_COLLATE</i>, <i>Chapter 8</i>, <i>Environment Variables</i>, <i>Section 12.2</i>,
       <i>Utility Syntax Guidelines</i>
</pre> <h2>
COPYRIGHT </h2>
<pre>
       Portions of this text are reprinted and reproduced in electronic
       form from IEEE Std 1003.1-2017, Standard for Information
       Technology -- Portable Operating System Interface (POSIX), The
       Open Group Base Specifications Issue 7, 2018 Edition, Copyright
       (C) 2018 by the Institute of Electrical and Electronics
       Engineers, Inc and The Open Group.  In the event of any
       discrepancy between this version and the original IEEE and The
       Open Group Standard, the original IEEE and The Open Group
       Standard is the referee document. The original Standard can be
       obtained online at <a href="http://www.opengroup.org/unix/online.html">http://www.opengroup.org/unix/online.html</a> .

       Any typographical or formatting errors that appear in this page
       are most likely to have been introduced during the conversion of
       the source files to man page format. To report such errors, see
       <a href="https://www.kernel.org/doc/man-pages/reporting_bugs.html">https://www.kernel.org/doc/man-pages/reporting_bugs.html</a> .

<span class="footline">IEEE/The Open Group               2017                          <i>JOIN</i>(1P)</span>
</pre>  <p>Pages that refer to this page: <a href="sort.1p.html">sort(1p)</a> </p> <hr>         <div class="_attribution">
  <p class="_attribution-p">
    ...<br>
    <a href="https://man7.org/linux/man-pages/man1/join.1p.html" class="_attribution-link">https://man7.org/linux/man-pages/man1/join.1p.html</a>
  </p>
</div>
