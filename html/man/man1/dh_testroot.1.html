<h1>dh_testroot(1) — Linux manual page</h1>   <pre>
<span class="headline"><i>DH_TESTROOT</i>(1)                  Debhelper                 <i>DH_TESTROOT</i>(1)</span>
</pre> <h2>
NAME </h2>
<pre>
       dh_testroot - ensure that a package is built with necessary level
       of root permissions
</pre> <h2>
SYNOPSIS </h2>
<pre>
       <b>dh_testroot </b>[<i>debhelper options</i>]
</pre> <h2>
DESCRIPTION </h2>
<pre>
       <b>dh_testroot </b>is used to determine if the target is being run with
       suffient access to root(-like) features.

       The definition of sufficient access depends on whether the
       builder (the tool invoking the <i>debian/rules</i> target) supports the
       <i>Rules-Requires-Root</i> (R³) field.  If the builder supports R³, then
       it will set the environment variable <i>DEB_RULES_REQUIRES_ROOT</i> and
       <b>dh_testroot </b>will validate that the builder followed the minimum
       requirements for the given value of <i>DEB_RULES_REQUIRES_ROOT</i>.

       If the builder does not support <i>Rules-Requires-Root</i>, then it will
       not set the <i>DEB_RULES_REQUIRES_ROOT</i> environment variable.  This
       will in turn make <b>dh_testroot </b>(and the rest of debhelper) fall
       back to assuming that (fake)root is implied.

       The following is a summary of how <b>dh_testroot </b>behaves based on
       the <i>DEB_RULES_REQUIRES_ROOT</i> environment variable (leading and
       trailing whitespace in the variable is ignored).

       -   If unset, or set to "binary-targets", then <b>dh_testroot</b>
           asserts that it is run as root or under <b>fakeroot</b>(1).

       -   If set to "no", then <b>dh_testroot </b>returns successfully
           (without performing any additional checks).

       -   If set to any other value than the above, then <b>dh_testroot</b>
           asserts that it is either run as root (or under <b>fakeroot</b>(1))
           or the builder has provided the <b>DEB_GAIN_ROOT_CMD </b>environment
           variable (e.g. via dpkg-buildpackage -r).

       Please note that <b>dh_testroot </b>does <i>not</i> read the <i>Rules-Requires-</i>
       <i>Root</i> field.  Which implies that <b>dh_testroot </b>may produce incorrect
       result if the builder lies in <i>DEB_RULES_REQUIRES_ROOT</i>.  On the
       flip side, it also enables things like testing for what will
       happen when <i>DEB_RULES_REQUIRES_ROOT</i> is set to a given value.
</pre> <h2>
SEE ALSO </h2>
<pre>
       <a href="../man7/debhelper.7.html">debhelper(7)</a>

       This program is a part of debhelper.
</pre> <h2>
AUTHOR </h2>
<pre>
       Joey Hess &lt;joeyh@debian.org&gt;
</pre> <h2>
COLOPHON </h2>
<pre>
       This page is part of the <i>debhelper</i> (helper programs for
       debian/rules) project.  Information about the project can be
       found at [unknown -- if you know, please contact man-
       pages@man7.org] If you have a bug report for this manual page,
       send it to submit@bugs.debian.org.  This page was obtained from
       the project's upstream Git repository
       ⟨<a href="https://salsa.debian.org/debian/debhelper.git">https://salsa.debian.org/debian/debhelper.git</a>⟩ on 2024-06-14.
       (At that time, the date of the most recent commit that was found
       in the repository was 2024-06-09.)  If you discover any rendering
       problems in this HTML version of the page, or you believe there
       is a better or more up-to-date source for the page, or you have
       corrections or improvements to the information in this COLOPHON
       (which is <i>not</i> part of the original manual page), send a mail to
       man-pages@man7.org

<span class="footline">13.11.7                        2023-09-12                 <i>DH_TESTROOT</i>(1)</span>
</pre>  <p>Pages that refer to this page: <a href="../man7/debhelper.7.html">debhelper(7)</a> </p> <hr>         <div class="_attribution">
  <p class="_attribution-p">
    ...<br>
    <a href="https://man7.org/linux/man-pages/man1/dh_testroot.1.html" class="_attribution-link">https://man7.org/linux/man-pages/man1/dh_testroot.1.html</a>
  </p>
</div>
