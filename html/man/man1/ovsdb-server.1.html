<h1>ovsdb-server(1) — Linux manual page</h1>   <pre>
<span class="headline"><i>ovsdb-server</i>(1)            Open vSwitch Manual           <i>ovsdb-server</i>(1)</span>
</pre> <h2>
NAME </h2>
<pre>
       ovsdb-server - Open vSwitch database server
</pre> <h2>
SYNOPSIS </h2>
<pre>
       <b>ovsdb-server </b>[<i>database</i>]...  [<i>relay:schema_name:remote</i>]...
       [<b>--remote=</b><i>remote</i>]...  [<b>--config-file=</b><i>file</i>] [<b>--run=</b><i>command</i>]

       Daemon options:
              [<b>--pidfile</b>[<b>=</b><i>pidfile</i>]] [<b>--overwrite-pidfile</b>] [<b>--detach</b>]
              [<b>--no-chdir</b>] [<b>--no-self-confinement</b>]

       Service options:
              [<b>--service</b>] [<b>--service-monitor</b>]

       Logging options:
              [<b>-v</b>[<i>module</i>[<b>:</b><i>destination</i>[<b>:</b><i>level</i>]]]]...
              [<b>--verbose[=</b><i>module</i>[<b>:</b><i>destination</i>[<b>:</b><i>level</i>]]]]...
              [<b>--log-file</b>[<b>=</b><i>file</i>]]

       Active-backup options:
              [<b>--sync-from=</b><i>server</i>] [<b>--sync-exclude-</b>
              <b>tables=</b><i>db</i><b>:</b><i>table</i>[<b>,</b><i>db</i><b>:</b><i>table</i>]...]  [<b>--active</b>]

       Public key infrastructure options:
              [<b>--private-key=</b><i>privkey.pem</i>]
              [<b>--certificate=</b><i>cert.pem</i>]
              [<b>--ca-cert=</b><i>cacert.pem</i>]
              [<b>--bootstrap-ca-cert=</b><i>cacert.pem</i>]
              [<b>--peer-ca-cert=</b><i>peer-cacert.pem</i>]

       SSL connection options:
              [<b>--ssl-protocols=</b><i>protocols</i>]
              [<b>--ssl-ciphers=</b><i>ciphers</i>]

       Runtime management options:
              <b>--unixctl=</b><i>socket</i>

       Replay options:
              [<b>--record</b>[<b>=</b><i>directory</i>]] [<b>--replay</b>[<b>=</b><i>directory</i>]]

       Common options:
              [<b>-h </b>| <b>--help</b>] [<b>-V </b>| <b>--version</b>]
</pre> <h2>
DESCRIPTION </h2>
<pre>
       The <b>ovsdb-server </b>program provides RPC interfaces to one or more
       Open vSwitch databases (OVSDBs).  It supports JSON-RPC client
       connections over active or passive TCP/IP or Unix domain sockets.
       For an introduction to OVSDB and its implementation in Open
       vSwitch, see <a href="../man7/ovsdb.7.html">ovsdb(7)</a>.

       Each OVSDB file may be specified on the command line as <i>database</i>.
       Relay databases may be specified on the command line as
       <i>relay:schema_name:remote</i>.  For a detailed description of relay
       database argument, see <a href="../man7/ovsdb.7.html">ovsdb(7)</a>.  If none of database files or
       relay databases is specified, the default is
       <b>/usr/local/etc/openvswitch/conf.db</b>.  The database files must
       already have been created and initialized using, for example,
       <b>ovsdb-tool</b>'s <b>create</b>, <b>create-cluster</b>, or <b>join-cluster </b>command.

       All types of databases can alternatively be added using a
       configuration file provided via <b>--config-file </b>option.  This
       option is mutually exclusive with specifying <i>database</i> on the
       command line.  For a detailed description of the configuration
       file format see <a href="../man7/ovsdb.7.html">ovsdb(7)</a>.

       This OVSDB implementation supports standalone, active-backup,
       relay and clustered database service models, as well as database
       replication.  See the Service Models section of <a href="../man7/ovsdb.7.html">ovsdb(7)</a> for more
       information.

       For clustered databases, when the <b>--detach </b>option is used,
       <b>ovsdb-server </b>detaches without waiting for the server to
       successfully join a cluster (if the database file is freshly
       created with <b>ovsdb-tool join-cluster</b>) or connect to a cluster
       that it has already joined.  Use <b>ovsdb-client wait </b>(see
       <a href="ovsdb-client.1.html">ovsdb-client(1)</a>) to wait until the server has successfully joined
       and connected to a cluster.  The same is true for relay
       databases.  Same commands could be used to wait for a relay
       database to connect to the relay source (remote).

       In addition to user-specified databases, <b>ovsdb-server </b>version 2.9
       and later also always hosts a built-in database named <b>_Server</b>.
       Please see <a href="../man5/ovsdb-server.5.html">ovsdb-server(5)</a> for documentation on this database's
       schema.
</pre> <h2>
OPTIONS </h2>
<pre>
       <b>--remote=</b><i>remote</i>
              Adds <i>remote</i> as a connection method used by <b>ovsdb-server</b>.
              The <i>remote</i> may be an OVSDB active or passive connection
              method, e.g. <b>pssl:6640</b>, as described in <a href="../man7/ovsdb.7.html">ovsdb(7)</a>.  The
              following additional form is also supported:

              <b>db:</b><i>db</i><b>,</b><i>table</i><b>,</b><i>column</i>
                     Reads additional connection methods from <i>column</i> in
                     all of the rows in <i>table</i> within <i>db</i>.  As the
                     contents of <i>column</i> changes, <b>ovsdb-server </b>also adds
                     and drops connection methods accordingly.

                     If <i>column</i>'s type is string or set of strings, then
                     the connection methods are taken directly from the
                     column.  The connection methods in the column must
                     have one of the forms described above.

                     If <i>column</i>'s type is UUID or set of UUIDs and
                     references a table, then each UUID is looked up in
                     the referenced table to obtain a row.  The
                     following columns in the row, if present and of the
                     correct type, configure a connection method.  Any
                     additional columns are ignored.

                     <b>target </b>(string)
                            Connection method, in one of the forms
                            described above.  This column is mandatory:
                            if it is missing or empty then no connection
                            method can be configured.

                     <b>max_backoff </b>(integer)
                            Maximum number of milliseconds to wait
                            between connection attempts.

                     <b>inactivity_probe </b>(integer)
                            Maximum number of milliseconds of idle time
                            on connection to client before sending an
                            inactivity probe message.

                     <b>read_only </b>(boolean)
                            If true, only read-only transactions are
                            allowed on this connection.

                     It is an error for <i>column</i> to have another type.

              To connect or listen on multiple connection methods, use
              multiple <b>--remote </b>options.

              Alternatively, remotes can be specified in a "remotes"
              section of the configuration file, if provided using
              <b>--config-file </b>option.  <b>--config-file </b>and <b>--remote </b>options
              are mutually exclusive.

       <b>--config-file=</b><i>file</i>
              Specifies a configuration file for <b>ovsdb-server</b>.  This
              <i>file</i> can contain connection methods and databases used by
              the server.  The <i>file</i> contains a JSON object with two main
              elements:

              <b>remotes</b>
                     JSON object that contains a set of connection
                     methods in the following format: "<i>target</i>": {
                     "<i>option</i>": <i>value</i>, ... }.  Where <i>target</i> is in the
                     same format as <i>remote</i> in <b>--remote </b>option.  <i>option</i>
                     can be <b>max-backoff </b>(integer), <b>inactivity-probe</b>
                     (integer), <b>read-only </b>(boolean), <b>role </b>(string) or
                     <b>dscp </b>(integer) with their allowed <i>value</i>s
                     respectively.  The meaning of these <i>option</i>s is the
                     same as in configuration of <i>remote</i> via a database
                     row with <b>--remote </b>option.

              <b>databases</b>
                     JSON object that describes databases that should be
                     added to the <b>ovsdb-server </b>in the following format:
                     "<i>name</i>":{ "<i>option</i>": <i>value</i>, ... }.  Where <i>name</i> is
                     either a file name of a previously created and
                     initialized database or a schema name in case of
                     relay databases.  Available <i>option</i>s are:

                     <b>service-model </b>(string)
                            Describes the service model of this
                            database.  One of: <b>standalone</b>, <b>clustered</b>,
                            <b>active-backup </b>or <b>relay</b>.  This option is
                            required for all types, except for
                            standalone and clustered.  For these
                            databases the service model will be inferred
                            from the file, if not specified explicitly.
                            <b>ovsdb-server </b>will refuse to add a database
                            if the specified <b>service-model </b>doesn't match
                            with the provided file.

                     <b>source </b>(JSON object; active-backup or relay)
                            Describes the connection method to the
                            active database or to the relay source.  It
                            is a JSON object with exactly one element in
                            the same format as elements of "<b>remotes</b>",
                            except that <b>read-only </b>and <b>role </b>options are
                            not applicable.  E.g. <b>"source": {</b>
                            <b>"unix:db.sock": { "inactivity-probe": 10000,</b>
                            <b>"max-backoff": 8000 } }</b>

                     <b>backup </b>(boolean; active-backup only)
                            If set to <b>true</b>, <b>ovsdb-server </b>will use this
                            database as a backup for the specified
                            <b>source</b>.  Will be served as an active
                            database otherwise.

                     <b>exclude-tables </b>(JSON array of strings; active-
                     backup only)
                            List of table names that should be excluded
                            from replication in backup mode, e.g.
                            <b>"exclude-tables": [ "Table_One", "Table_Two"</b>
                            <b>]</b>.

              Content of the most basic configuration file may look like
              this: <b>{ "remotes": { "pssl:6640": {} }, "databases": {</b>
              <b>"conf.db": {} } }</b>

              Examples of configuration files for different service
              models can be found in in <a href="../man7/ovsdb.7.html">ovsdb(7)</a>.

              <b>--config-file </b>option is mutually exclusive with the
              <b>--remote </b>as well as with specifying <i>database</i> on a command
              line.  It is also mutually exclusive with all the <b>Active-</b>
              <b>Backup Options </b>and all the <b>RUNTIME MANAGEMENT COMMANDS</b>
              that can change the configuration of the server in
              conflict with the content of the file, i.e. all the
              commands that manipulate with remotes and databases.
              Read-only commands can still be used.

              In case of changes in the <i>file</i>, users should run the
              <b>ovsdb-server/reload </b>command with <a href="../man8/ovs-appctl.8.html">ovs-appctl(8)</a> in order
              for changes to take effect.

       <b>--run=</b><i>command</i>]
              Ordinarily <b>ovsdb-server </b>runs forever, or until it is told
              to exit (see <b>RUNTIME MANAGEMENT COMMANDS </b>below).  With
              this option, <b>ovsdb-server </b>instead starts a shell
              subprocess running <i>command</i>.  When the subprocess
              terminates, <b>ovsdb-server </b>also exits gracefully.  If the
              subprocess exits normally with exit code 0, then
              <b>ovsdb-server </b>exits with exit code 0 also; otherwise, it
              exits with exit code 1.

              This option can be useful where a database server is
              needed only to run a single command, e.g.: <b>ovsdb-server</b>
              <b>--remote=punix:socket --run='ovsdb-client dump unix:socket</b>
              <b>Open_vSwitch'</b>

              This option is not supported on Windows platform.

   <b>Daemon Options</b>
       The following options are valid on POSIX based platforms.

       <b>--pidfile</b>[<b>=</b><i>pidfile</i>]
              Causes a file (by default, <b>ovsdb-server.pid</b>) to be created
              indicating the PID of the running process.  If the <i>pidfile</i>
              argument is not specified, or if it does not begin with <b>/</b>,
              then it is created in <b>/usr/local/var/run/openvswitch</b>.

              If <b>--pidfile </b>is not specified, no pidfile is created.

       <b>--overwrite-pidfile</b>
              By default, when <b>--pidfile </b>is specified and the specified
              pidfile already exists and is locked by a running process,
              <b>ovsdb-server </b>refuses to start.  Specify
              <b>--overwrite-pidfile </b>to cause it to instead overwrite the
              pidfile.

              When <b>--pidfile </b>is not specified, this option has no
              effect.

       <b>--detach</b>
              Runs <b>ovsdb-server </b>as a background process.  The process
              forks, and in the child it starts a new session, closes
              the standard file descriptors (which has the side effect
              of disabling logging to the console), and changes its
              current directory to the root (unless <b>--no-chdir </b>is
              specified).  After the child completes its initialization,
              the parent exits.  <b>ovsdb-server </b>detaches only after it
              starts listening on all configured remotes.  At this
              point, all standalone and active-backup databases are
              ready for use.  Clustered databases only become ready for
              use after they finish joining their clusters (which could
              have already happened in previous runs of <b>ovsdb-server</b>).

       <b>--monitor</b>
              Creates an additional process to monitor the <b>ovsdb-server</b>
              daemon.  If the daemon dies due to a signal that indicates
              a programming error (<b>SIGABRT</b>, <b>SIGALRM</b>, <b>SIGBUS</b>, <b>SIGFPE</b>,
              <b>SIGILL</b>, <b>SIGPIPE</b>, <b>SIGSEGV</b>, <b>SIGXCPU</b>, or <b>SIGXFSZ</b>) then the
              monitor process starts a new copy of it.  If the daemon
              dies or exits for another reason, the monitor process
              exits.

              This option is normally used with <b>--detach</b>, but it also
              functions without it.

       <b>--no-chdir</b>
              By default, when <b>--detach </b>is specified, <b>ovsdb-server</b>
              changes its current working directory to the root
              directory after it detaches.  Otherwise, invoking
              <b>ovsdb-server </b>from a carelessly chosen directory would
              prevent the administrator from unmounting the file system
              that holds that directory.

              Specifying <b>--no-chdir </b>suppresses this behavior, preventing
              <b>ovsdb-server </b>from changing its current working directory.
              This may be useful for collecting core files, since it is
              common behavior to write core dumps into the current
              working directory and the root directory is not a good
              directory to use.

              This option has no effect when <b>--detach </b>is not specified.

       <b>--no-self-confinement</b>
              By default daemon will try to self-confine itself to work
              with files under well-known directories determined during
              build.  It is better to stick with this default behavior
              and not to use this flag unless some other Access Control
              is used to confine daemon.  Note that in contrast to other
              access control implementations that are typically enforced
              from kernel-space (e.g. DAC or MAC), self-confinement is
              imposed from the user-space daemon itself and hence should
              not be considered as a full confinement strategy, but
              instead should be viewed as an additional layer of
              security.

       <b>--user </b>Causes <b>ovsdb-server </b>to run as a different user specified
              in "user:group", thus dropping most of the root
              privileges. Short forms "user" and ":group" are also
              allowed, with current user or group are assumed
              respectively. Only daemons started by the root user
              accepts this argument.

              On Linux, daemons will be granted CAP_IPC_LOCK and
              CAP_NET_BIND_SERVICES before dropping root privileges.
              Daemons that interact with a datapath, such as
              <b>ovs-vswitchd</b>, will be granted three additional
              capabilities, namely CAP_NET_ADMIN, CAP_NET_BROADCAST and
              CAP_NET_RAW.  The capability change will apply even if the
              new user is root.

              On Windows, this option is not currently supported. For
              security reasons, specifying this option will cause the
              daemon process not to start.

   <b>Service Options</b>
       The following options are valid only on Windows platform.

       <b>--service</b>
              Causes <b>ovsdb-server </b>to run as a service in the background.
              The service should already have been created through
              external tools like <b>SC.exe</b>.

       <b>--service-monitor</b>
              Causes the <b>ovsdb-server </b>service to be automatically
              restarted by the Windows services manager if the service
              dies or exits for unexpected reasons.

              When <b>--service </b>is not specified, this option has no
              effect.

   <b>Logging Options</b>
       <b>-v</b>[<i>spec</i>]
       <b>--verbose=</b>[<i>spec</i>]
              Sets logging levels.  Without any <i>spec</i>, sets the log level
              for every module and destination to <b>dbg</b>.  Otherwise, <i>spec</i>
              is a list of words separated by spaces or commas or
              colons, up to one from each category below:

              •      A valid module name, as displayed by the <b>vlog/list</b>
                     command on <a href="../man8/ovs-appctl.8.html">ovs-appctl(8)</a>, limits the log level
                     change to the specified module.

              •      <b>syslog</b>, <b>console</b>, or <b>file</b>, to limit the log level
                     change to only to the system log, to the console,
                     or to a file, respectively.  (If <b>--detach </b>is
                     specified, <b>ovsdb-server </b>closes its standard file
                     descriptors, so logging to the console will have no
                     effect.)

                     On Windows platform, <b>syslog </b>is accepted as a word
                     and is only useful along with the <b>--syslog-target</b>
                     option (the word has no effect otherwise).

              •      <b>off</b>, <b>emer</b>, <b>err</b>, <b>warn</b>, <b>info</b>, or <b>dbg</b>, to control the
                     log level.  Messages of the given severity or
                     higher will be logged, and messages of lower
                     severity will be filtered out.  <b>off </b>filters out all
                     messages.  See <a href="../man8/ovs-appctl.8.html">ovs-appctl(8)</a> for a definition of
                     each log level.

              Case is not significant within <i>spec</i>.

              Regardless of the log levels set for <b>file</b>, logging to a
              file will not take place unless <b>--log-file </b>is also
              specified (see below).

              For compatibility with older versions of OVS, <b>any </b>is
              accepted as a word but has no effect.

       <b>-v</b>
       <b>--verbose</b>
              Sets the maximum logging verbosity level, equivalent to
              <b>--verbose=dbg</b>.

       <b>-vPATTERN:</b><i>destination</i><b>:</b><i>pattern</i>
       <b>--verbose=PATTERN:</b><i>destination</i><b>:</b><i>pattern</i>
              Sets the log pattern for <i>destination</i> to <i>pattern</i>.  Refer to
              <a href="../man8/ovs-appctl.8.html">ovs-appctl(8)</a> for a description of the valid syntax for
              <i>pattern</i>.

       <b>-vFACILITY:</b><i>facility</i>
       <b>--verbose=FACILITY:</b><i>facility</i>
              Sets the RFC5424 facility of the log message. <i>facility</i> can
              be one of <b>kern</b>, <b>user</b>, <b>mail</b>, <b>daemon</b>, <b>auth</b>, <b>syslog</b>, <b>lpr</b>,
              <b>news</b>, <b>uucp</b>, <b>clock</b>, <b>ftp</b>, <b>ntp</b>, <b>audit</b>, <b>alert</b>, <b>clock2</b>, <b>local0</b>,
              <b>local1</b>, <b>local2</b>, <b>local3</b>, <b>local4</b>, <b>local5</b>, <b>local6 </b>or <b>local7</b>.
              If this option is not specified, <b>daemon </b>is used as the
              default for the local system syslog and <b>local0 </b>is used
              while sending a message to the target provided via the
              <b>--syslog-target </b>option.

       <b>--log-file</b>[<b>=</b><i>file</i>]
              Enables logging to a file.  If <i>file</i> is specified, then it
              is used as the exact name for the log file.  The default
              log file name used if <i>file</i> is omitted is
              <b>/usr/local/var/log/openvswitch/ovsdb-server.log</b>.

       <b>--syslog-target=</b><i>host</i><b>:</b><i>port</i>
              Send syslog messages to UDP <i>port</i> on <i>host</i>, in addition to
              the system syslog.  The <i>host</i> must be a numerical IP
              address, not a hostname.

       <b>--syslog-method=</b><i>method</i>
              Specify <i>method</i> how syslog messages should be sent to
              syslog daemon.  Following forms are supported:

              •      <b>libc</b>, use libc <b>syslog() </b>function.  Downside of
                     using this options is that libc adds fixed prefix
                     to every message before it is actually sent to the
                     syslog daemon over <b>/dev/log </b>UNIX domain socket.

              •      <b>unix:</b><i>file</i>, use UNIX domain socket directly.  It is
                     possible to specify arbitrary message format with
                     this option.  However, <b>rsyslogd 8.9 </b>and older
                     versions use hard coded parser function anyway that
                     limits UNIX domain socket use.  If you want to use
                     arbitrary message format with older <b>rsyslogd</b>
                     versions, then use UDP socket to localhost IP
                     address instead.

              •      <b>udp:</b><i>ip</i>:<i>port</i>, use UDP socket.  With this method it
                     is possible to use arbitrary message format also
                     with older <b>rsyslogd</b>.  When sending syslog messages
                     over UDP socket extra precaution needs to be taken
                     into account, for example, syslog daemon needs to
                     be configured to listen on the specified UDP port,
                     accidental iptables rules could be interfering with
                     local syslog traffic and there are some security
                     considerations that apply to UDP sockets, but do
                     not apply to UNIX domain sockets.

              •      <b>null</b>, discards all messages logged to syslog.

              The default is taken from the <b>OVS_SYSLOG_METHOD</b>
              environment variable; if it is unset, the default is <b>libc</b>.

   <b>Active-Backup Options</b>
       These options support the <b>ovsdb-server </b>active-backup service
       model and database replication.  These options apply only to
       databases in the format used for standalone and active-backup
       databases, which is the database format created by <b>ovsdb-tool</b>
       <b>create</b>.  By default, when it serves a database in this format,
       <b>ovsdb-server </b>runs as a standalone server.  These options can
       configure it for active-backup use:

       •      Use <b>--sync-from=</b><i>server</i> to start the server in the backup
              role, replicating data from <i>server</i>.  When <b>ovsdb-server </b>is
              running as a backup server, it rejects all transactions
              that can modify the database content, including lock
              commands.  The same form can be used to configure the
              local database as a replica of <i>server</i>.

       •      Use <b>--sync-from=</b><i>server</i> <b>--active </b>to start the server in the
              active role, but prepared to switch to the backup role in
              which it would replicate data from <i>server</i>.  When
              <b>ovsdb-server </b>runs in active mode, it allows all
              transactions, including those that modify the database.

       At runtime, management commands can change a server's role and
       otherwise manage active-backup features.  See <b>Active-Backup</b>
       <b>Commands</b>, below, for more information.

       <b>--sync-from=</b><i>server</i>
              Sets up <b>ovsdb-server </b>to synchronize its databases with the
              databases in <i>server</i>, which must be an active connection
              method in one of the forms documented in <a href="ovsdb-client.1.html">ovsdb-client(1)</a>.
              Every transaction committed by <i>server</i> will be replicated
              to <b>ovsdb-server</b>.  This option makes <b>ovsdb-server </b>start as
              a backup server; add <b>--active </b>to make it start as an
              active server.

       <b>--sync-exclude-tables=</b><i>db</i><b>:</b><i>table</i>[<b>,</b><i>db</i><b>:</b><i>table</i>]...
              Causes the specified tables to be excluded from
              replication.

       <b>--active</b>
              By default, <b>--sync-from </b>makes <b>ovsdb-server </b>start up as a
              backup for <i>server</i>.  With <b>--active</b>, however, <b>ovsdb-server</b>
              starts as an active server.  Use this option to allow the
              syncing options to be specified using command line
              options, yet start the server, as the default, active
              server.  To switch the running server to backup mode, use
              <b>ovs-appctl</b>(1) to execute the
              <b>ovsdb-server/connect-active-ovsdb-server </b>command.

       These options are mutually exclusive with the <b>--config-file</b>.

   <b>Public Key Infrastructure Options</b>
       The options described below for configuring the SSL public key
       infrastructure accept a special syntax for obtaining their
       configuration from the database.  If any of these options is
       given <b>db:</b><i>db</i><b>,</b><i>table</i><b>,</b><i>column</i> as its argument, then the actual file
       name is read from the specified <i>column</i> in <i>table</i> within the <i>db</i>
       database.  The <i>column</i> must have type string or set of strings.
       The first nonempty string in the table is taken as the file name.
       (This means that ordinarily there should be at most one row in
       <i>table</i>.)

       <b>-p </b><i>privkey.pem</i>
       <b>--private-key=</b><i>privkey.pem</i>
              Specifies a PEM file containing the private key used as
              <b>ovsdb-server</b>'s identity for outgoing SSL connections.

       <b>-c </b><i>cert.pem</i>
       <b>--certificate=</b><i>cert.pem</i>
              Specifies a PEM file containing a certificate that
              certifies the private key specified on <b>-p </b>or <b>--private-key</b>
              to be trustworthy.  The certificate must be signed by the
              certificate authority (CA) that the peer in SSL
              connections will use to verify it.

       <b>-C </b><i>cacert.pem</i>
       <b>--ca-cert=</b><i>cacert.pem</i>
              Specifies a PEM file containing the CA certificate that
              <b>ovsdb-server </b>should use to verify certificates presented
              to it by SSL peers.  (This may be the same certificate
              that SSL peers use to verify the certificate specified on
              <b>-c </b>or <b>--certificate</b>, or it may be a different one,
              depending on the PKI design in use.)

       <b>-C none</b>
       <b>--ca-cert=none</b>
              Disables verification of certificates presented by SSL
              peers.  This introduces a security risk, because it means
              that certificates cannot be verified to be those of known
              trusted hosts.

       <b>--bootstrap-ca-cert=</b><i>cacert.pem</i>
              When <i>cacert.pem</i> exists, this option has the same effect as
              <b>-C </b>or <b>--ca-cert</b>.  If it does not exist, then <b>ovsdb-server</b>
              will attempt to obtain the CA certificate from the SSL
              peer on its first SSL connection and save it to the named
              PEM file.  If it is successful, it will immediately drop
              the connection and reconnect, and from then on all SSL
              connections must be authenticated by a certificate signed
              by the CA certificate thus obtained.

              <b>This option exposes the SSL connection to a man-in-the-</b>
              <b>middle attack obtaining the initial CA certificate</b>, but it
              may be useful for bootstrapping.

              This option is only useful if the SSL peer sends its CA
              certificate as part of the SSL certificate chain.  The SSL
              protocol does not require the server to send the CA
              certificate.

              This option is mutually exclusive with <b>-C </b>and <b>--ca-cert</b>.

       <b>--peer-ca-cert=</b><i>peer-cacert.pem</i>
              Specifies a PEM file that contains one or more additional
              certificates to send to SSL peers.  <i>peer-cacert.pem</i> should
              be the CA certificate used to sign <b>ovsdb-server</b>'s own
              certificate, that is, the certificate specified on <b>-c </b>or
              <b>--certificate</b>.  If <b>ovsdb-server</b>'s certificate is self-
              signed, then <b>--certificate </b>and <b>--peer-ca-cert </b>should
              specify the same file.

              This option is not useful in normal operation, because the
              SSL peer must already have the CA certificate for the peer
              to have any confidence in <b>ovsdb-server</b>'s identity.
              However, this offers a way for a new installation to
              bootstrap the CA certificate on its first SSL connection.

   <b>SSL Connection Options</b>
       <b>--ssl-protocols=</b><i>protocols</i>
              Specifies, in a comma- or space-delimited list, the SSL
              protocols <b>ovsdb-server </b>will enable for SSL connections.
              Supported <i>protocols</i> include <b>TLSv1</b>, <b>TLSv1.1</b>, and <b>TLSv1.2</b>.
              Regardless of order, the highest protocol supported by
              both sides will be chosen when making the connection.  The
              default when this option is omitted is
              <b>TLSv1,TLSv1.1,TLSv1.2</b>.

       <b>--ssl-ciphers=</b><i>ciphers</i>
              Specifies, in OpenSSL cipher string format, the ciphers
              <b>ovsdb-server </b>will support for SSL connections.  The
              default when this option is omitted is <b>HIGH:!aNULL:!MD5</b>.

   <b>Other Options</b>
       <b>--unixctl=</b><i>socket</i>
              Sets the name of the control socket on which <b>ovsdb-server</b>
              listens for runtime management commands (see <b>RUNTIME</b>
              <b>MANAGEMENT COMMANDS</b>, below).  If <i>socket</i> does not begin
              with <b>/</b>, it is interpreted as relative to
              <b>/usr/local/var/run/openvswitch</b>.  If <b>--unixctl </b>is not used
              at all, the default socket is
              <b>/usr/local/var/run/openvswitch/ovsdb-server.</b><i>pid</i><b>.ctl</b>, where
              <i>pid</i> is <b>ovsdb-server</b>'s process ID.

              On Windows a local named pipe is used to listen for
              runtime management commands.  A file is created in the
              absolute path as pointed by <i>socket</i> or if <b>--unixctl </b>is not
              used at all, a file is created as <b>ovsdb-server.ctl </b>in the
              configured <i>OVS_RUNDIR</i> directory.  The file exists just to
              mimic the behavior of a Unix domain socket.

              Specifying <b>none </b>for <i>socket</i> disables the control socket
              feature.

       <b>--record[=</b><i>directory</i>]
              Sets the process in "recording" mode, in which it will
              record all the connections, data from streams (Unix domain
              and network sockets) and some other important necessary
              bits, so they could be replayed later.  Recorded data is
              stored in replay files in specified <i>directory</i>.  If
              <i>directory</i> does not begin with <b>/</b>, it is interpreted as
              relative to <b>/usr/local/var/run/openvswitch</b>.  If <i>directory</i>
              is not specified, <b>/usr/local/var/run/openvswitch </b>will be
              used.

       <b>--replay[=</b><i>directory</i>]
              Sets the process in "replay" mode, in which it will read
              information about connections, data from streams (Unix
              domain and network sockets) and some other necessary bits
              directly from replay files instead of using real sockets.
              Replay files from the <i>directory</i> will be used.  If
              <i>directory</i> does not begin with <b>/</b>, it is interpreted as
              relative to <b>/usr/local/var/run/openvswitch</b>.  If <i>directory</i>
              is not specified, <b>/usr/local/var/run/openvswitch </b>will be
              used.

       <b>-h</b>
       <b>--help </b>Prints a brief help message to the console.

       <b>-V</b>
       <b>--version</b>
              Prints version information to the console.
</pre> <h2>
RUNTIME MANAGEMENT COMMANDS </h2>
<pre>
       <a href="../man8/ovs-appctl.8.html">ovs-appctl(8)</a> can send commands to a running <b>ovsdb-server</b>
       process.  The currently supported commands are described below.

   <b>ovsdb-server </b>Commands
       These commands are specific to <b>ovsdb-server</b>.

       <b>exit   </b>Causes <b>ovsdb-server </b>to gracefully terminate.

       <b>ovsdb-server/compact </b>[<i>db</i>]
              Compacts database <i>db</i> in-place.  If <i>db</i> is not specified,
              compacts every database in-place.  A database is also
              compacted automatically when a transaction is logged if it
              is over 2 times as large as its previous compacted size
              (and at least 10 MB), but not before 100 commits have been
              added or 10 minutes have elapsed since the last
              compaction. It will also be compacted automatically after
              24 hours since the last compaction if 100 commits were
              added regardless of its size.

       <b>ovsdb-server/memory-trim-on-compaction </b><i>on</i>|<i>off</i>
              If this option is <i>on</i>, ovsdb-server will try to reclaim all
              unused heap memory back to the system after each
              successful database compaction to reduce the memory
              consumption of the process.  <i>off</i> by default.

       <b>ovsdb-server/reconnect</b>
              Makes <b>ovsdb-server </b>drop all of the JSON-RPC connections to
              database clients and reconnect.

              This command might be useful for debugging issues with
              database clients.

       <b>ovsdb-server/add-remote </b><i>remote</i>
              Adds a remote, as if <b>--remote=</b><i>remote</i> had been specified on
              the <b>ovsdb-server </b>command line.  (If <i>remote</i> is already a
              remote, this command succeeds without changing the
              configuration.)

              Mutually exclusive with the <b>--config-file </b>option.

       <b>ovsdb-server/remove-remote </b><i>remote</i>
              Removes the specified <i>remote</i> from the configuration,
              failing with an error if <i>remote</i> is not configured as a
              remote.  This command only works with remotes that were
              named on <b>--remote </b>or <b>ovsdb-server/add-remote</b>, that is, it
              will not remove remotes added indirectly because they were
              read from the database by configuring a <b>db:</b><i>db</i><b>,</b><i>table</i><b>,</b><i>column</i>
              remote.  (You can remove a database source with
              <b>ovsdb-server/remove-remote db:</b><i>db</i><b>,</b><i>table</i><b>,</b><i>column</i>, but not
              individual remotes found indirectly through the database.)

              Mutually exclusive with the <b>--config-file </b>option.

       <b>ovsdb-server/list-remotes</b>
              Outputs a list of the currently configured remotes named
              on <b>--remote </b>or <b>ovsdb-server/add-remote</b>, that is, it does
              not list remotes added indirectly because they were read
              from the database by configuring a <b>db:</b><i>db</i><b>,</b><i>table</i><b>,</b><i>column</i>
              remote.

       <b>ovsdb-server/add-db </b><i>database</i>
              Adds the <i>database</i> to the running <b>ovsdb-server</b>.  <i>database</i>
              could be a database file or a relay description in the
              following format: <i>relay:schema_name:remote</i>.  The database
              file must already have been created and initialized using,
              for example, <b>ovsdb-tool create</b>.

              Mutually exclusive with the <b>--config-file </b>option.

       <b>ovsdb-server/remove-db </b><i>database</i>
              Removes <i>database</i> from the running <b>ovsdb-server</b>.  <i>database</i>
              must be a database name as listed by <b>ovsdb-</b>
              <b>server/list-dbs</b>.

              If a remote has been configured that points to the
              specified <i>database</i> (e.g. <b>--remote=db:</b><i>database</i><b>,</b>... on the
              command line), then it will be disabled until another
              database with the same name is added again (with
              <b>ovsdb-server/add-db</b>).

              Any public key infrastructure options specified through
              this database (e.g. <b>--private-key=db:</b><i>database,</i>... on the
              command line) will be disabled until another database with
              the same name is added again (with <b>ovsdb-server/add-db</b>).

              Mutually exclusive with the <b>--config-file </b>option.

       <b>ovsdb-server/list-dbs</b>
              Outputs a list of the currently configured databases added
              either through the command line or through the
              <b>ovsdb-server/add-db </b>command.

       <b>ovsdb-server/tlog-set </b><i>database</i>:<i>table on</i>|<i>off</i>
              Enables or disables logging of all operations executed on
              the specified database and table.  Logs are generated at
              INFO level and are rate limtied.

       <b>ovsdb-server/tlog-list</b>
              Displays the logging state for all currently configured
              databases and tables.

   <b>Active-Backup Commands</b>
       These commands query and update the role of <b>ovsdb-server </b>within
       an active-backup pair of servers.  See <b>Active-Backup Options</b>,
       above, and <b>Active-Backup Database Service Model </b>in <a href="../man7/ovsdb.7.html">ovsdb(7)</a> for
       more information.

       All <b>Active-Backup Commands </b>that change the state of <b>ovsdb-server</b>
       are mutually exclusive with the <b>--config-file </b>option.

       <b>ovsdb-server/set-active-ovsdb-server </b><i>server</i>
              Sets  the active <i>server</i> from which <b>ovsdb-server </b>connects
              through <b>ovsdb-server/connect-active-ovsdb-server</b>.  This
              overrides the <b>--sync-from </b>command-line option.

       <b>ovsdb-server/get-active-ovsdb-server</b>
              Gets the active server from which <b>ovsdb-server </b>is
              currently synchronizing its databases.

       <b>ovsdb-server/connect-active-ovsdb-server</b>
              Switches the server to a backup role.  The server starts
              synchronizing its databases with the active server
              specified by <b>ovsdb-server/set-active-ovsdb-server </b>(or the
              <b>--sync-from </b>command-line option) and closes all existing
              client connections, which requires clients to reconnect.

       <b>ovsdb-server/disconnect-active-ovsdb-server</b>
              Switches the server to an active role.  The server stops
              synchronizing its databases with an active server and
              closes all existing client connections, which requires
              clients to reconnect.

       <b>ovsdb-server/set-active-ovsdb-server-probe-interval </b><i>probe</i>
       <i>interval</i>
              Sets  the probe interval (in milli seconds) for the
              connection to active <i>server</i>.

       <b>ovsdb-server/set-sync-exclude-tables </b><i>db</i><b>:</b><i>table</i>[<b>,</b><i>db</i><b>:</b><i>table</i>]...
              Sets the <i>table</i> within <i>db</i> that will be excluded from
              synchronization.  This overrides the <b>--sync-exclude-tables</b>
              command-line option.

       <b>ovsdb-server/get-sync-exclude-tables</b>
              Gets  the  tables  that are currently excluded from
              synchronization.

       <b>ovsdb-server/sync-status</b>
              Prints a summary of replication run time information. The
              <b>state </b>information is always provided, indicating whether
              the server is running in the <i>active</i> or the <i>backup</i> mode.
              For all databases with active-backup service model,
              replication connection status, which can be either
              <i>connecting</i>, <i>replicating</i> or <i>error</i>, are shown.  When the
              connection is in <i>replicating</i> state, further output shows
              the tables that are currently excluded from replication.

   <b>Cluster Commands</b>
       These commands support the <b>ovsdb-server </b>clustered service model.
       They apply only to databases in the format used for clustered
       databases, which is the database format created by <b>ovsdb-tool</b>
       <b>create-cluster </b>and <b>ovsdb-tool join-cluster</b>.

       <b>cluster/cid </b><i>db</i>
              Prints the cluster ID for <i>db</i>, which is a UUID that
              identifies the cluster.  If <i>db</i> is a database newly created
              by <b>ovsdb-tool cluster-join </b>that has not yet successfully
              joined its cluster, and <b>--cid </b>was not specified on the
              <b>cluster-join </b>command line, then this command will report
              an error because the cluster ID is not yet known.

       <b>cluster/sid </b><i>db</i>
              Prints the server ID for <i>db</i>, which is a UUID that
              identifies this server within the cluster.

       <b>cluster/status </b><i>db</i>
              Prints this server's status within the cluster and the
              status of its connections to other servers in the cluster.

       <b>cluster/leave </b><i>db</i>
              This command starts the server gracefully removing itself
              from its cluster.  At least one server must remain, and
              the cluster must be healthy, that is, over half of the
              cluster's servers must be up.

              When the server successfully leaves the cluster, it stops
              serving <i>db</i>, as if <b>ovsdb-server/remove-db </b><i>db</i> had been
              executed.

              Use <b>ovsdb-client wait </b>(see <a href="ovsdb-client.1.html">ovsdb-client(1)</a>) to wait until
              the server has left the cluster.

              Once a server leaves a cluster, it may never rejoin it.
              Instead, create a new server and join it to the cluster.

              Note that removing the server from the cluster alters the
              total size of the cluster. For example, if you remove two
              servers from a three server cluster, then the "cluster"
              becomes a single functioning server.  This does not result
              in a three server cluster that lacks quorum.

       <b>cluster/kick </b><i>db server</i>
              Start graceful removal of <i>server</i> from <i>db</i>'s cluster, like
              <b>cluster/leave</b>, except that it can remove any server, not
              just this one.

              <i>server</i> may be a server ID, as printed by <b>cluster/sid</b>, or
              the server's local network address as passed to <b>ovsdb-</b>
              <b>tool</b>'s <b>create-cluster </b>or <b>join-cluster </b>command.  Use
              <b>cluster/status </b>to see a list of cluster members.

       <b>cluster/change-election-timer </b><i>db time</i>
              Change the leader election timeout base value of the
              cluster, in milliseconds.

              Leader election will be initiated by a follower if there
              is no heartbeat received from the leader within this time
              plus a random time within 1 second.

              The default value is 1000, if not changed with this
              command.  This command can be used to adjust the value
              when necessary, according to the expected load and
              response time of the servers.

              This command must be executed on the leader.  It initiates
              the change to the cluster.  To see if the change takes
              effect (committed), use <b>cluster/status </b>to show the current
              setting.  Once a change is committed, it persists at
              server restarts.

       <b>cluster/set-backlog-threshold </b><i>db n_msgs n_bytes</i>
              Sets the backlog limits for <i>db</i>'s RAFT connections to a
              maximum of <i>n_msgs</i> messages or <i>n_bytes</i> bytes.  If the
              backlog on one of the connections reaches the limit, it
              will be disconnected (and re-established).  Values are
              checked only if the backlog contains more than 50
              messages.

   <b>VLOG COMMANDS</b>
       These commands manage <b>ovsdb-server</b>'s logging settings.

       <b>vlog/set </b>[<i>spec</i>]
              Sets logging levels.  Without any <i>spec</i>, sets the log level
              for every module and destination to <b>dbg</b>.  Otherwise, <i>spec</i>
              is a list of words separated by spaces or commas or
              colons, up to one from each category below:

              •      A valid module name, as displayed by the <b>vlog/list</b>
                     command on <a href="../man8/ovs-appctl.8.html">ovs-appctl(8)</a>, limits the log level
                     change to the specified module.

              •      <b>syslog</b>, <b>console</b>, or <b>file</b>, to limit the log level
                     change to only to the system log, to the console,
                     or to a file, respectively.

                     On Windows platform, <b>syslog </b>is accepted as a word
                     and is only useful along with the <b>--syslog-target</b>
                     option (the word has no effect otherwise).

              •      <b>off</b>, <b>emer</b>, <b>err</b>, <b>warn</b>, <b>info</b>, or <b>dbg</b>, to control the
                     log level.  Messages of the given severity or
                     higher will be logged, and messages of lower
                     severity will be filtered out.  <b>off </b>filters out all
                     messages.  See <a href="../man8/ovs-appctl.8.html">ovs-appctl(8)</a> for a definition of
                     each log level.

              Case is not significant within <i>spec</i>.

              Regardless of the log levels set for <b>file</b>, logging to a
              file will not take place unless <b>ovsdb-server </b>was invoked
              with the <b>--log-file </b>option.

              For compatibility with older versions of OVS, <b>any </b>is
              accepted as a word but has no effect.

       <b>vlog/set PATTERN:</b><i>destination</i><b>:</b><i>pattern</i>
              Sets the log pattern for <i>destination</i> to <i>pattern</i>.  Refer to
              <a href="../man8/ovs-appctl.8.html">ovs-appctl(8)</a> for a description of the valid syntax for
              <i>pattern</i>.

       <b>vlog/list</b>
              Lists the supported logging modules and their current
              levels.

       <b>vlog/list-pattern</b>
              Lists logging patterns used for each destination.

       <b>vlog/close</b>
              Causes <b>ovsdb-server </b>to close its log file, if it is open.
              (Use <b>vlog/reopen </b>to reopen it later.)

       <b>vlog/reopen</b>
              Causes <b>ovsdb-server </b>to close its log file, if it is open,
              and then reopen it.  (This is useful after rotating log
              files, to cause a new log file to be used.)

              This has no effect unless <b>ovsdb-server </b>was invoked with
              the <b>--log-file </b>option.

       <b>vlog/disable-rate-limit </b>[<i>module</i>]...
       <b>vlog/enable-rate-limit </b>[<i>module</i>]...
              By default, <b>ovsdb-server </b>limits the rate at which certain
              messages can be logged.  When a message would appear more
              frequently than the limit, it is suppressed.  This saves
              disk space, makes logs easier to read, and speeds up
              execution, but occasionally troubleshooting requires more
              detail.  Therefore, <b>vlog/disable-rate-limit </b>allows rate
              limits to be disabled at the level of an individual log
              module.  Specify one or more module names, as displayed by
              the <b>vlog/list </b>command.  Specifying either no module names
              at all or the keyword <b>any </b>disables rate limits for every
              log module.

              The <b>vlog/enable-rate-limit </b>command, whose syntax is the
              same as <b>vlog/disable-rate-limit</b>, can be used to re-enable
              a rate limit that was previously disabled.

   <b>MEMORY COMMANDS</b>
       These commands report memory usage.

       <b>memory/show</b>
              Displays some basic statistics about <b>ovsdb-server</b>'s memory
              usage.  <b>ovsdb-server </b>also logs this information soon after
              startup and periodically as its memory consumption grows.

   <b>COVERAGE COMMANDS</b>
       These commands manage <b>ovsdb-server</b>'s ``coverage counters,'' which
       count the number of times particular events occur during a
       daemon's runtime.  In addition to these commands, <b>ovsdb-server</b>
       automatically logs coverage counter values, at <b>INFO </b>level, when
       it detects that the daemon's main loop takes unusually long to
       run.

       Coverage counters are useful mainly for performance analysis and
       debugging.

       <b>coverage/show</b>
              Displays the averaged per-second rates for the last few
              seconds, the last minute and the last hour, and the total
              counts of all of the coverage counters.

       <b>coverage/read-counter </b><i>counter</i>
              Displays the total count for the given coverage <i>counter</i>.
</pre> <h2>
BUGS </h2>
<pre>
       In Open vSwitch before version 2.4, when <b>ovsdb-server </b>sent JSON-
       RPC error responses to some requests, it incorrectly formulated
       them with the <b>result </b>and <b>error </b>swapped, so that the response
       appeared to indicate success (with a nonsensical result) rather
       than an error.  The requests that suffered from this problem
       were:

       <b>transact</b>
       <b>get_schema</b>
              Only if the request names a nonexistent database.

       <b>monitor</b>
       <b>lock</b>
       <b>unlock </b>In all error cases.

       Of these cases, the only error that a well-written application is
       likely to encounter in practice is <b>monitor </b>of tables or columns
       that do not exist, in an situation where the application has been
       upgraded but the old database schema is still temporarily in use.
       To handle this situation gracefully, we recommend that clients
       should treat a <b>monitor </b>response with a <b>result </b>that contains an
       <b>error </b>key-value pair as an error (assuming that the database
       being monitored does not contain a table named <b>error</b>).
</pre> <h2>
SEE ALSO </h2>
<pre>
       <a href="../man7/ovsdb.7.html">ovsdb(7)</a>, <a href="ovsdb-tool.1.html">ovsdb-tool(1)</a>, <a href="../man5/ovsdb-server.5.html">ovsdb-server(5)</a>, <a href="../man7/ovsdb-server.7.html">ovsdb-server(7)</a>.
</pre> <h2>
COLOPHON </h2>
<pre>
       This page is part of the <i>Open vSwitch</i> (a distributed virtual
       multilayer switch) project.  Information about the project can be
       found at ⟨<a href="http://openvswitch.org/">http://openvswitch.org/</a>⟩.  If you have a bug report for
       this manual page, send it to bugs@openvswitch.org.  This page was
       obtained from the project's upstream Git repository
       ⟨<a href="https://github.com/openvswitch/ovs.git">https://github.com/openvswitch/ovs.git</a>⟩ on 2024-06-14.  (At that
       time, the date of the most recent commit that was found in the
       repository was 2024-06-07.)  If you discover any rendering
       problems in this HTML version of the page, or you believe there
       is a better or more up-to-date source for the page, or you have
       corrections or improvements to the information in this COLOPHON
       (which is <i>not</i> part of the original manual page), send a mail to
       man-pages@man7.org

<span class="footline">Open vSwitch                     3.3.90                  <i>ovsdb-server</i>(1)</span>
</pre>  <p>Pages that refer to this page: <a href="ovsdb-client.1.html">ovsdb-client(1)</a>, <a href="ovsdb-tool.1.html">ovsdb-tool(1)</a>, <a href="../man7/ovn-architecture.7.html">ovn-architecture(7)</a>, <a href="../man7/ovsdb.7.html">ovsdb(7)</a>, <a href="../man8/ovs-appctl.8.html">ovs-appctl(8)</a>, <a href="../man8/ovs-vsctl.8.html">ovs-vsctl(8)</a>, <a href="../man8/ovs-vswitchd.8.html">ovs-vswitchd(8)</a>, <a href="../man8/vtep-ctl.8.html">vtep-ctl(8)</a> </p> <hr>         <div class="_attribution">
  <p class="_attribution-p">
    ...<br>
    <a href="https://man7.org/linux/man-pages/man1/ovsdb-server.1.html" class="_attribution-link">https://man7.org/linux/man-pages/man1/ovsdb-server.1.html</a>
  </p>
</div>
