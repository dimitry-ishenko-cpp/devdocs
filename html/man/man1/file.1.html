<h1>file(1) — Linux manual page</h1>   <pre>
<span class="headline"><i>FILE</i>(1)                  General Commands Manual                 <i>FILE</i>(1)</span>
</pre> <h2>
NAME </h2>
<pre>
       <b>file </b>— determine file type
</pre> <h2>
SYNOPSIS </h2>
<pre>
       <b>file </b>[<b>-bcdEhiklLNnprsSvzZ0</b>] [<b>--apple</b>] [<b>--exclude-quiet</b>]
       [<b>--extension</b>] [<b>--mime-encoding</b>] [<b>--mime-type</b>] [<b>-e </b><i>testname</i>]
       [<b>-F </b><i>separator</i>] [<b>-f </b><i>namefile</i>] [<b>-m </b><i>magicfiles</i>] [<b>-P </b><i>name=value</i>]
       <i>file ...</i> <b>file -C </b>[<b>-m </b><i>magicfiles</i>] <b>file </b>[<b>--help</b>]
</pre> <h2>
DESCRIPTION </h2>
<pre>
       This manual page documents version 5.45 of the <b>file </b>command.

       <b>file </b>tests each argument in an attempt to classify it.  There are
       three sets of tests, performed in this order: filesystem tests,
       magic tests, and language tests.  The <i>first</i> test that succeeds
       causes the file type to be printed.

       The type printed will usually contain one of the words <i>text</i> (the
       file contains only printing characters and a few common control
       characters and is probably safe to read on an ASCII terminal),
       <i>executable</i> (the file contains the result of compiling a program
       in a form understandable to some UNIX kernel or another), or <i>data</i>
       meaning anything else (data is usually “binary” or non-
       printable).  Exceptions are well-known file formats (core files,
       tar archives) that are known to contain binary data.  When
       modifying magic files or the program itself, make sure to
       <i>preserve these keywords</i>.  Users depend on knowing that all the
       readable files in a directory have the word “text” printed.
       Don't do as Berkeley did and change “shell commands text” to
       “shell script”.

       The filesystem tests are based on examining the return from a
       <i>stat</i>(2) system call.  The program checks to see if the file is
       empty, or if it's some sort of special file.  Any known file
       types appropriate to the system you are running on (sockets,
       symbolic links, or named pipes (FIFOs) on those systems that
       implement them) are intuited if they are defined in the system
       header file &lt;<i>sys/stat.h</i>&gt;.

       The magic tests are used to check for files with data in
       particular fixed formats.  The canonical example of this is a
       binary executable (compiled program) a.out file, whose format is
       defined in &lt;<i>elf.h</i>&gt;, &lt;<i>a.out.h</i>&gt; and possibly &lt;<i>exec.h</i>&gt; in the
       standard include directory.  These files have a “magic number”
       stored in a particular place near the beginning of the file that
       tells the UNIX operating system that the file is a binary
       executable, and which of several types thereof.  The concept of a
       “magic number” has been applied by extension to data files.  Any
       file with some invariant identifier at a small fixed offset into
       the file can usually be described in this way.  The information
       identifying these files is read from the compiled magic file
       <i>/usr/local/share/misc/magic.mgc</i>, or the files in the directory
       <i>/usr/local/share/misc/magic</i> if the compiled file does not exist.
       In addition, if <i>$HOME/.magic.mgc</i> or <i>$HOME/.magic</i> exists, it will
       be used in preference to the system magic files.

       If a file does not match any of the entries in the magic file, it
       is examined to see if it seems to be a text file.  ASCII,
       ISO-8859-x, non-ISO 8-bit extended-ASCII character sets (such as
       those used on Macintosh and IBM PC systems), UTF-8-encoded
       Unicode, UTF-16-encoded Unicode, and EBCDIC character sets can be
       distinguished by the different ranges and sequences of bytes that
       constitute printable text in each set.  If a file passes any of
       these tests, its character set is reported.  ASCII, ISO-8859-x,
       UTF-8, and extended-ASCII files are identified as “text” because
       they will be mostly readable on nearly any terminal; UTF-16 and
       EBCDIC are only “character data” because, while they contain
       text, it is text that will require translation before it can be
       read.  In addition, <b>file </b>will attempt to determine other
       characteristics of text-type files.  If the lines of a file are
       terminated by CR, CRLF, or NEL, instead of the Unix-standard LF,
       this will be reported.  Files that contain embedded escape
       sequences or overstriking will also be identified.

       Once <b>file </b>has determined the character set used in a text-type
       file, it will attempt to determine in what language the file is
       written.  The language tests look for particular strings (cf.
       &lt;<i>names.h</i>&gt;) that can appear anywhere in the first few blocks of a
       file.  For example, the keyword <i>.br</i> indicates that the file is
       most likely a <i>troff</i>(1) input file, just as the keyword <i>struct</i>
       indicates a C program.  These tests are less reliable than the
       previous two groups, so they are performed last.  The language
       test routines also test for some miscellany (such as <i>tar</i>(1)
       archives, JSON files).

       Any file that cannot be identified as having been written in any
       of the character sets listed above is simply said to be “data”.
</pre> <h2>
OPTIONS </h2>
<pre>
       <b>--apple</b>
               Causes the <b>file </b>command to output the file type and
               creator code as used by older MacOS versions.  The code
               consists of eight letters, the first describing the file
               type, the latter the creator.  This option works properly
               only for file formats that have the apple-style output
               defined.

       <b>-b</b>, <b>--brief</b>
               Do not prepend filenames to output lines (brief mode).

       <b>-C</b>, <b>--compile</b>
               Write a <i>magic.mgc</i> output file that contains a pre-parsed
               version of the magic file or directory.

       <b>-c</b>, <b>--checking-printout</b>
               Cause a checking printout of the parsed form of the magic
               file.  This is usually used in conjunction with the <b>-m</b>
               option to debug a new magic file before installing it.

       <b>-d      </b>Prints internal debugging information to stderr.

       <b>-E      </b>On filesystem errors (file not found etc), instead of
               handling the error as regular output as POSIX mandates
               and keep going, issue an error message and exit.

       <b>-e</b>, <b>--exclude </b><i>testname</i>
               Exclude the test named in <i>testname</i> from the list of tests
               made to determine the file type.  Valid test names are:

               apptype   EMX application type (only on EMX).

               ascii     Various types of text files (this test will try
                         to guess the text encoding, irrespective of the
                         setting of the ‘encoding’ option).

               encoding  Different text encodings for soft magic tests.

               tokens    Ignored for backwards compatibility.

               cdf       Prints details of Compound Document Files.

               compress  Checks for, and looks inside, compressed files.

               csv       Checks Comma Separated Value files.

               elf       Prints ELF file details, provided soft magic
                         tests are enabled and the elf magic is found.

               json      Examines JSON (RFC-7159) files by parsing them
                         for compliance.

               soft      Consults magic files.

               simh      Examines SIMH tape files.

               tar       Examines tar files by verifying the checksum of
                         the 512 byte tar header.  Excluding this test
                         can provide more detailed content description
                         by using the soft magic method.

               text      A synonym for ‘ascii’.

       <b>--exclude-quiet</b>
               Like <b>--exclude </b>but ignore tests that <b>file </b>does not know
               about.  This is intended for compatibility with older
               versions of <b>file</b>.

       <b>--extension</b>
               Print a slash-separated list of valid extensions for the
               file type found.

       <b>-F</b>, <b>--separator </b><i>separator</i>
               Use the specified string as the separator between the
               filename and the file result returned.  Defaults to ‘:’.

       <b>-f</b>, <b>--files-from </b><i>namefile</i>
               Read the names of the files to be examined from <i>namefile</i>
               (one per line) before the argument list.  Either <i>namefile</i>
               or at least one filename argument must be present; to
               test the standard input, use ‘-’ as a filename argument.
               Please note that <i>namefile</i> is unwrapped and the enclosed
               filenames are processed when this option is encountered
               and before any further options processing is done.  This
               allows one to process multiple lists of files with
               different command line arguments on the same <b>file</b>
               invocation.  Thus if you want to set the delimiter, you
               need to do it before you specify the list of files, like:
               “<b>-F </b><i>@</i> <b>-f </b><i>namefile</i>”, instead of: “<b>-f </b><i>namefile</i> <b>-F </b><i>@</i>”.

       <b>-h</b>, <b>--no-dereference</b>
               This option causes symlinks not to be followed (on
               systems that support symbolic links).  This is the
               default if the environment variable POSIXLY_CORRECT is
               not defined.

       <b>-i</b>, <b>--mime</b>
               Causes the <b>file </b>command to output mime type strings
               rather than the more traditional human readable ones.
               Thus it may say ‘text/plain; charset=us-ascii’ rather
               than “ASCII text”.

       <b>--mime-type</b>, <b>--mime-encoding</b>
               Like <b>-i</b>, but print only the specified element(s).

       <b>-k</b>, <b>--keep-going</b>
               Don't stop at the first match, keep going.  Subsequent
               matches will be have the string ‘\012- ’ prepended.  (If
               you want a newline, see the <b>-r </b>option.)  The magic
               pattern with the highest strength (see the <b>-l </b>option)
               comes first.

       <b>-l</b>, <b>--list</b>
               Shows a list of patterns and their strength sorted
               descending by <i>magic</i>(4) strength which is used for the
               matching (see also the <b>-k </b>option).

       <b>-L</b>, <b>--dereference</b>
               This option causes symlinks to be followed, as the like-
               named option in <i>ls</i>(1) (on systems that support symbolic
               links).  This is the default if the environment variable
               POSIXLY_CORRECT is defined.

       <b>-m</b>, <b>--magic-file </b><i>magicfiles</i>
               Specify an alternate list of files and directories
               containing magic.  This can be a single item, or a colon-
               separated list.  If a compiled magic file is found
               alongside a file or directory, it will be used instead.

       <b>-N</b>, <b>--no-pad</b>
               Don't pad filenames so that they align in the output.

       <b>-n</b>, <b>--no-buffer</b>
               Force stdout to be flushed after checking each file.
               This is only useful if checking a list of files.  It is
               intended to be used by programs that want filetype output
               from a pipe.

       <b>-p</b>, <b>--preserve-date</b>
               On systems that support <i>utime</i>(3) or <i>utimes</i>(2), attempt to
               preserve the access time of files analyzed, to pretend
               that <b>file </b>never read them.

       <b>-P</b>, <b>--parameter </b><i>name=value</i>
               Set various parameter limits.

               <b>Name         Default    Explanation</b>
               <b>bytes        </b>1M         max number of bytes to read from
                                                                                     file
               <b>elf_notes    </b>256        max ELF notes processed
               <b>elf_phnum    </b>2K         max ELF program sections
                                                                                     processed
               <b>elf_shnum    </b>32K        max ELF sections processed
               <b>elf_shsize   </b>128MB      max ELF section size processed
               <b>encoding     </b>65K        max number of bytes to determine
                                                                                     encoding
               <b>indir        </b>50         recursion limit for indirect
                                                                                     magic
               <b>name         </b>100        use count limit for name/use
                                                                                     magic
               <b>regex        </b>8K         length limit for regex searches

       <b>-r</b>, <b>--raw</b>
               Don't translate unprintable characters to \ooo.  Normally
               <b>file </b>translates unprintable characters to their octal
               representation.

       <b>-s</b>, <b>--special-files</b>
               Normally, <b>file </b>only attempts to read and determine the
               type of argument files which <i>stat</i>(2) reports are ordinary
               files.  This prevents problems, because reading special
               files may have peculiar consequences.  Specifying the <b>-s</b>
               option causes <b>file </b>to also read argument files which are
               block or character special files.  This is useful for
               determining the filesystem types of the data in raw disk
               partitions, which are block special files.  This option
               also causes <b>file </b>to disregard the file size as reported
               by <i>stat</i>(2) since on some systems it reports a zero size
               for raw disk partitions.

       <b>-S</b>, <b>--no-sandbox</b>
               On systems where libseccomp
               (<i><a href="https://github.com/seccomp/libseccomp">https://github.com/seccomp/libseccomp</a> </i>) is available, the
               <b>-S </b>option disables sandboxing which is enabled by
               default.  This option is needed for <b>file </b>to execute
               external decompressing programs, i.e. when the <b>-z </b>option
               is specified and the built-in decompressors are not
               available.  On systems where sandboxing is not available,
               this option has no effect.

       <b>-v</b>, <b>--version</b>
               Print the version of the program and exit.

       <b>-z</b>, <b>--uncompress</b>
               Try to look inside compressed files.

       <b>-Z</b>, <b>--uncompress-noreport</b>
               Try to look inside compressed files, but report
               information about the contents only not the compression.

       <b>-0</b>, <b>--print0</b>
               Output a null character ‘\0’ after the end of the
               filename.  Nice to <i>cut</i>(1) the output.  This does not
               affect the separator, which is still printed.

               If this option is repeated more than once, then <b>file</b>
               prints just the filename followed by a NUL followed by
               the description (or ERROR: text) followed by a second NUL
               for each entry.

       <b>--help  </b>Print a help message and exit.
</pre> <h2>
ENVIRONMENT </h2>
<pre>
       The environment variable MAGIC can be used to set the default
       magic file name.  If that variable is set, then <b>file </b>will not
       attempt to open <i>$HOME/.magic</i>.  <b>file </b>adds “<i>.mgc</i>” to the value of
       this variable as appropriate.  The environment variable
       POSIXLY_CORRECT controls (on systems that support symbolic
       links), whether <b>file </b>will attempt to follow symlinks or not.  If
       set, then <b>file </b>follows symlink, otherwise it does not.  This is
       also controlled by the <b>-L </b>and <b>-h </b>options.
</pre> <h2>
FILES </h2>
<pre>
       <i>/usr/local/share/misc/magic.mgc</i>  Default compiled list of magic.
       <i>/usr/local/share/misc/magic</i>      Directory containing default
                                        magic files.
</pre> <h2>
EXIT STATUS </h2>
<pre>
       <b>file </b>will exit with 0 if the operation was successful or &gt;0 if an
       error was encountered.  The following errors cause diagnostic
       messages, but don't affect the program exit code (as POSIX
       requires), unless <b>-E </b>is specified:
             <b>•   </b>A file cannot be found
             <b>•   </b>There is no permission to read a file
             <b>•   </b>The file type cannot be determined
</pre> <h2>
EXAMPLES </h2>
<pre>
             $ file file.c file /dev/{wd0a,hda}
             file.c:   C program text
             file:     ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV),
                       dynamically linked (uses shared libs), stripped
             /dev/wd0a: block special (0/0)
             /dev/hda: block special (3/0)

             $ file -s /dev/wd0{b,d}
             /dev/wd0b: data
             /dev/wd0d: x86 boot sector

             $ file -s /dev/hda{,1,2,3,4,5,6,7,8,9,10}
             /dev/hda:   x86 boot sector
             /dev/hda1:  Linux/i386 ext2 filesystem
             /dev/hda2:  x86 boot sector
             /dev/hda3:  x86 boot sector, extended partition table
             /dev/hda4:  Linux/i386 ext2 filesystem
             /dev/hda5:  Linux/i386 swap file
             /dev/hda6:  Linux/i386 swap file
             /dev/hda7:  Linux/i386 swap file
             /dev/hda8:  Linux/i386 swap file
             /dev/hda9:  empty
             /dev/hda10: empty

             $ file -i file.c file /dev/{wd0a,hda}
             file.c:      text/x-c
             file:        application/x-executable
             /dev/hda:    application/x-not-regular-file
             /dev/wd0a:   application/x-not-regular-file
</pre> <h2>
SEE ALSO </h2>
<pre>
       <i>hexdump</i>(1), <i>od</i>(1), <i>strings</i>(1), <i>magic</i>(4)
</pre> <h2>
STANDARDS CONFORMANCE </h2>
<pre>
       This program is believed to exceed the System V Interface
       Definition of FILE(CMD), as near as one can determine from the
       vague language contained therein.  Its behavior is mostly
       compatible with the System V program of the same name.  This
       version knows more magic, however, so it will produce different
       (albeit more accurate) output in many cases.

       The one significant difference between this version and System V
       is that this version treats any white space as a delimiter, so
       that spaces in pattern strings must be escaped.  For example,

             &gt;10     string  language impress        (imPRESS data)

       in an existing magic file would have to be changed to

             &gt;10     string  language\ impress       (imPRESS data)

       In addition, in this version, if a pattern string contains a
       backslash, it must be escaped.  For example

             0       string          \begindata      Andrew Toolkit document

       in an existing magic file would have to be changed to

             0       string          \\begindata     Andrew Toolkit document

       SunOS releases 3.2 and later from Sun Microsystems include a <b>file</b>
       command derived from the System V one, but with some extensions.
       This version differs from Sun's only in minor ways.  It includes
       the extension of the ‘&amp;’ operator, used as, for example,

             &gt;16     long&amp;0x7fffffff &gt;0              not stripped
</pre> <h2>
SECURITY </h2>
<pre>
       On systems where libseccomp
       (<i><a href="https://github.com/seccomp/libseccomp">https://github.com/seccomp/libseccomp</a> </i>) is available, <b>file </b>is
       enforces limiting system calls to only the ones necessary for the
       operation of the program.  This enforcement does not provide any
       security benefit when <b>file </b>is asked to decompress input files
       running external programs with the <b>-z </b>option.  To enable
       execution of external decompressors, one needs to disable
       sandboxing using the <b>-S </b>option.
</pre> <h2>
MAGIC DIRECTORY </h2>
<pre>
       The magic file entries have been collected from various sources,
       mainly USENET, and contributed by various authors.  Christos
       Zoulas (address below) will collect additional or corrected magic
       file entries.  A consolidation of magic file entries will be
       distributed periodically.

       The order of entries in the magic file is significant.  Depending
       on what system you are using, the order that they are put
       together may be incorrect.  If your old <b>file </b>command uses a magic
       file, keep the old magic file around for comparison purposes
       (rename it to <i>/usr/local/share/misc/magic.orig</i>).
</pre> <h2>
HISTORY </h2>
<pre>
       There has been a <b>file </b>command in every UNIX since at least
       Research Version 4 (man page dated November, 1973).  The System V
       version introduced one significant major change: the external
       list of magic types.  This slowed the program down slightly but
       made it a lot more flexible.

       This program, based on the System V version, was written by Ian
       Darwin ⟨ian@darwinsys.com⟩ without looking at anybody else's
       source code.

       John Gilmore revised the code extensively, making it better than
       the first version.  Geoff Collyer found several inadequacies and
       provided some magic file entries.  Contributions of the ‘&amp;’
       operator by Rob McMahon, ⟨cudcv@warwick.ac.uk⟩, 1989.

       Guy Harris, ⟨guy@netapp.com⟩, made many changes from 1993 to the
       present.

       Primary development and maintenance from 1990 to the present by
       Christos Zoulas ⟨christos@astron.com⟩.

       Altered by Chris Lowth ⟨chris@lowth.com⟩, 2000: handle the <b>-i</b>
       option to output mime type strings, using an alternative magic
       file and internal logic.

       Altered by Eric Fischer ⟨enf@pobox.com⟩, July, 2000, to identify
       character codes and attempt to identify the languages of non-
       ASCII files.

       Altered by Reuben Thomas ⟨rrt@sc3d.org⟩, 2007-2011, to improve
       MIME support, merge MIME and non-MIME magic, support directories
       as well as files of magic, apply many bug fixes, update and fix a
       lot of magic, improve the build system, improve the
       documentation, and rewrite the Python bindings in pure Python.

       The list of contributors to the ‘magic’ directory (magic files)
       is too long to include here.  You know who you are; thank you.
       Many contributors are listed in the source files.
</pre> <h2>
LEGAL NOTICE </h2>
<pre>
       Copyright (c) Ian F. Darwin, Toronto, Canada, 1986-1999.  Covered
       by the standard Berkeley Software Distribution copyright; see the
       file COPYING in the source distribution.

       The files <i>tar.h</i> and <i>is_tar.c</i> were written by John Gilmore from
       his public-domain <i>tar</i>(1) program, and are not covered by the
       above license.
</pre> <h2>
BUGS </h2>
<pre>
       Please report bugs and send patches to the bug tracker at
       <i><a href="https://bugs.astron.com/">https://bugs.astron.com/</a> </i> or the mailing list at ⟨file@astron.com⟩
       (visit <i><a href="https://mailman.astron.com/mailman/listinfo/file">https://mailman.astron.com/mailman/listinfo/file</a> </i> first to
       subscribe).
</pre> <h2>
TODO </h2>
<pre>
       Fix output so that tests for MIME and APPLE flags are not needed
       all over the place, and actual output is only done in one place.
       This needs a design.  Suggestion: push possible outputs on to a
       list, then pick the last-pushed (most specific, one hopes) value
       at the end, or use a default if the list is empty.  This should
       not slow down evaluation.

       The handling of MAGIC_CONTINUE and printing \012- between entries
       is clumsy and complicated; refactor and centralize.

       Some of the encoding logic is hard-coded in encoding.c and can be
       moved to the magic files if we had a !:charset annotation.

       Continue to squash all magic bugs.  See Debian BTS for a good
       source.

       Store arbitrarily long strings, for example for %s patterns, so
       that they can be printed out.  Fixes Debian bug #271672.  This
       can be done by allocating strings in a string pool, storing the
       string pool at the end of the magic file and converting all the
       string pointers to relative offsets from the string pool.

       Add syntax for relative offsets after current level (Debian bug
       #466037).

       Make file -ki work, i.e. give multiple MIME types.

       Add a zip library so we can peek inside Office2007 documents to
       print more details about their contents.

       Add an option to print URLs for the sources of the file
       descriptions.

       Combine script searches and add a way to map executable names to
       MIME types (e.g. have a magic value for !:mime which causes the
       resulting string to be looked up in a table).  This would avoid
       adding the same magic repeatedly for each new hash-bang
       interpreter.

       When a file descriptor is available, we can skip and adjust the
       buffer instead of the hacky buffer management we do now.

       Fix “name” and “use” to check for consistency at compile time
       (duplicate “name”, “use” pointing to undefined “name” ).  Make
       “name” / “use” more efficient by keeping a sorted list of names.
       Special-case ^ to flip endianness in the parser so that it does
       not have to be escaped, and document it.

       If the offsets specified internally in the file exceed the buffer
       size ( HOWMANY variable in file.h), then we don't seek to that
       offset, but we give up.  It would be better if buffer managements
       was done when the file descriptor is available so we can seek
       around the file.  One must be careful though because this has
       performance and thus security considerations, because one can
       slow down things by repeatedly seeking.

       There is support now for keeping separate buffers and having
       offsets from the end of the file, but the internal buffer
       management still needs an overhaul.
</pre> <h2>
AVAILABILITY </h2>
<pre>
       You can obtain the original author's latest version by anonymous
       FTP on <i>ftp.astron.com</i> in the directory
       <i>/pub/file/file-X.YZ.tar.gz</i>.
</pre> <h2>
COLOPHON </h2>
<pre>
       This page is part of the <i>file</i> (a file type guesser) project.
       Information about the project can be found at
       <a href="http://www.darwinsys.com/file/">http://www.darwinsys.com/file/</a>.  If you have a bug report for
       this manual page, see ⟨<a href="http://bugs.gw.com/my_view_page.php">http://bugs.gw.com/my_view_page.php</a>⟩.
       This page was obtained from the project's upstream Git read-only
       mirror of the CVS repository ⟨<a href="https://github.com/glensc/file">https://github.com/glensc/file</a>⟩ on
       2024-06-14.  (At that time, the date of the most recent commit
       that was found in the repository was 2024-06-10.)  If you
       discover any rendering problems in this HTML version of the page,
       or you believe there is a better or more up-to-date source for
       the page, or you have corrections or improvements to the
       information in this COLOPHON (which is <i>not</i> part of the original
       manual page), send a mail to man-pages@man7.org

<span class="footline">GNU                           April 7, 2024                      <i>FILE</i>(1)</span>
</pre>  <p>Pages that refer to this page: <a href="dh_installmanpages.1.html">dh_installmanpages(1)</a>, <a href="dh_strip.1.html">dh_strip(1)</a>, <a href="ippeveprinter.1.html">ippeveprinter(1)</a>, <a href="pmcd.1.html">pmcd(1)</a>, <a href="../man5/scr_dump.5.html">scr_dump(5)</a>, <a href="../man5/term.5.html">term(5)</a>, <a href="../man7/suffixes.7.html">suffixes(7)</a>, <a href="../man7/symlink.7.html">symlink(7)</a> </p> <hr>         <div class="_attribution">
  <p class="_attribution-p">
    ...<br>
    <a href="https://man7.org/linux/man-pages/man1/file.1.html" class="_attribution-link">https://man7.org/linux/man-pages/man1/file.1.html</a>
  </p>
</div>
