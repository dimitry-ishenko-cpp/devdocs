<h1>homectl(1) — Linux manual page</h1>   <pre>
<span class="headline"><i>HOMECTL</i>(1)                       homectl                      <i>HOMECTL</i>(1)</span>
</pre> <h2>
NAME </h2>
<pre>
       homectl, systemd-homed-firstboot.service - Create, remove, change
       or inspect home directories
</pre> <h2>
SYNOPSIS </h2>
<pre>

       <b>homectl </b>[OPTIONS...] {COMMAND} [NAME...]
</pre> <h2>
DESCRIPTION </h2>
<pre>
       <b>homectl </b>may be used to create, remove, change or inspect a user's
       home directory. It's primarily a command interfacing with
       <a href="../man8/systemd-homed.service.8.html">systemd-homed.service(8)</a> which manages home directories of users.

       Home directories managed by systemd-homed.service are
       self-contained, and thus include the user's full metadata record
       in the home's data storage itself, making them easy to migrate
       between machines. In particular, a home directory describes a
       matching user record, and every user record managed by
       systemd-homed.service also implies existence and encapsulation of
       a home directory. The user account and home directory become the
       same concept.

       The following backing storage mechanisms are supported:

       •   An individual LUKS2 encrypted loopback file for a user,
           stored in /home/*.home. At login the file system contained in
           this files is mounted, after the LUKS2 encrypted volume has
           been attached. The user's password is identical to the
           encryption passphrase of the LUKS2 volume. Access to data
           without preceding user authentication is thus not possible,
           even for the system administrator. This storage mechanism
           provides the strongest data security and is thus recommended.

       •   Similar, but the LUKS2 encrypted file system is located on
           regular block device, such as a USB storage stick. In this
           mode home directories and all data they include are nicely
           migratable between machines, simply by plugging the USB stick
           into different systems at different times.

       •   An encrypted directory using "fscrypt" on file systems that
           support it (at the moment this is primarily "ext4"), located
           in /home/*.homedir. This mechanism also provides encryption,
           but substantially weaker than LUKS2, as most file system
           metadata is unprotected. Moreover it currently does not
           support changing user passwords once the home directory has
           been created.

       •   A "btrfs" subvolume for each user, also located in
           /home/*.homedir. This provides no encryption, but good quota
           support.

       •   A regular directory for each user, also located in
           /home/*.homedir. This provides no encryption, but is a
           suitable fallback available on all machines, even where
           LUKS2, "fscrypt" or "btrfs" support is not available.

       •   An individual Windows file share (CIFS) for each user.

       Note that systemd-homed.service and <b>homectl </b>will not manage
       "classic" UNIX user accounts as created with <a href="../man8/useradd.8.html">useradd(8)</a> or
       similar tools. In particular, this functionality is not suitable
       for managing system users (i.e. users with a UID below 1000) but
       is exclusive to regular ("human") users.

       Note that users/home directories managed via
       <b>systemd-homed.service </b>do not show up in /etc/passwd and similar
       files, they are synthesized via glibc NSS during runtime. They
       are thus resolvable and may be enumerated via the <a href="getent.1.html">getent(1)</a> tool.

       This tool interfaces directly with systemd-homed.service, and may
       execute specific commands on the home directories it manages.
       Since every home directory managed that way also defines a JSON
       user and group record these home directories may also be
       inspected and enumerated via <a href="userdbctl.1.html">userdbctl(1)</a>.

       Home directories managed by systemd-homed.service are usually in
       one of two states, or in a transition state between them: when
       "active" they are unlocked and mounted, and thus accessible to
       the system and its programs; when "inactive" they are not mounted
       and thus not accessible. Activation happens automatically at
       login of the user and usually can only complete after a password
       (or other authentication token) has been supplied. Deactivation
       happens after the user fully logged out. A home directory remains
       active as long as the user is logged in at least once, i.e. has
       at least one login session. When the user logs in a second time
       simultaneously the home directory remains active. It is
       deactivated only after the last of the user's sessions ends.
</pre> <h2>
OPTIONS </h2>
<pre>
       The following general options are understood (further options
       that control the various properties of user records managed by
       systemd-homed.service are documented further down):

       <b>--identity=</b><i>FILE</i>
           Read the user's JSON record from the specified file. If
           passed as "-" read the user record from standard input. The
           supplied JSON object must follow the structure documented in
           <b>JSON User Records</b>[1]. This option may be used in conjunction
           with the <b>create </b>and <b>update </b>commands (see below), where it
           allows configuring the user record in JSON as-is, instead of
           setting the individual user record properties (see below).

           Added in version 245.

       <b>--json=</b><i>FORMAT</i>, <b>-j</b>
           Controls whether to output the user record in JSON format, if
           the <b>inspect </b>command (see below) is used. Takes one of
           "pretty", "short" or "off". If "pretty" human-friendly
           whitespace and newlines are inserted in the output to make
           the JSON data more readable. If "short" all superfluous
           whitespace is suppressed. If "off" (the default) the user
           information is not shown in JSON format but in a friendly
           human readable formatting instead. The <b>-j </b>option picks
           "pretty" when run interactively and "short" otherwise.

           Added in version 245.

       <b>--export-format=</b><i>FORMAT</i>, <b>-E</b>, <b>-EE</b>
           When used with the <b>inspect </b>verb in JSON mode (see above) may
           be used to suppress certain aspects of the JSON user record
           on output. Specifically, if "stripped" format is used the
           binding and runtime fields of the record are removed. If
           "minimal" format is used the cryptographic signature is
           removed too. If "full" format is used the full JSON record is
           shown (this is the default). This option is useful for
           copying an existing user record to a different system in
           order to create a similar user there with the same settings.
           Specifically: <b>homectl inspect -EE | ssh root@othersystem</b>
           <b>homectl create -i- </b>may be used as simple command line for
           replicating a user on another host.  <b>-E </b>is equivalent to <b>-j</b>
           <b>--export-format=stripped</b>, <b>-EE </b>to <b>-j --export-format=minimal</b>.
           Note that when replicating user accounts user records
           acquired in "stripped" mode will retain the original
           cryptographic signatures and thus may only be modified when
           the private key to update them is available on the
           destination machine. When replicating users in "minimal"
           mode, the signature is removed during the replication and
           thus the record will be implicitly signed with the key of the
           destination machine and may be updated there without any
           private key replication.

           Added in version 245.

       <b>--offline</b>
           Do not attempt to update the copy of the user record and blob
           directory that is embedded inside of the home area. This
           allows for operation on home areas that are absent, or
           without needing to authenticate as the user being modified.

           Added in version 256.

       <b>-H</b>, <b>--host=</b>
           Execute the operation remotely. Specify a hostname, or a
           username and hostname separated by "@", to connect to. The
           hostname may optionally be suffixed by a port ssh is
           listening on, separated by ":", and then a container name,
           separated by "/", which connects directly to a specific
           container on the specified host. This will use SSH to talk to
           the remote machine manager instance. Container names may be
           enumerated with <b>machinectl -H </b><i>HOST</i>. Put IPv6 addresses in
           brackets.

       <b>-M</b>, <b>--machine=</b>
           Execute operation on a local container. Specify a container
           name to connect to, optionally prefixed by a user name to
           connect as and a separating "@" character. If the special
           string ".host" is used in place of the container name, a
           connection to the local system is made (which is useful to
           connect to a specific user's user bus: "--user
           --machine=lennart@.host"). If the "@" syntax is not used, the
           connection is made as root user. If the "@" syntax is used
           either the left hand side or the right hand side may be
           omitted (but not both) in which case the local user name and
           ".host" are implied.

       <b>--no-pager</b>
           Do not pipe output into a pager.

       <b>--no-legend</b>
           Do not print the legend, i.e. column headers and the footer
           with hints.

       <b>--no-ask-password</b>
           Do not query the user for authentication for privileged
           operations.

       <b>-h</b>, <b>--help</b>
           Print a short help text and exit.

       <b>--version</b>
           Print a short version string and exit.
</pre> <h2>
USER RECORD PROPERTIES </h2>
<pre>
       The following options control various properties of the user
       records/home directories that systemd-homed.service manages.
       These switches may be used in conjunction with the <b>create </b>and
       <b>update </b>commands for configuring various aspects of the home
       directory and the user account:

       <b>--real-name=</b><i>NAME</i>, <b>-c </b><i>NAME</i>
           The real name for the user. This corresponds with the GECOS
           field on classic UNIX NSS records.

           Added in version 245.

       <b>--realm=</b><i>REALM</i>
           The realm for the user. The realm associates a user with a
           specific organization or installation, and allows
           distinguishing users of the same name defined in different
           contexts. The realm can be any string that also qualifies as
           valid DNS domain name, and it is recommended to use the
           organization's or installation's domain name for this
           purpose, but this is not enforced nor required. On each
           system only a single user of the same name may exist, and if
           a user with the same name and realm is seen it is assumed to
           refer to the same user while a user with the same name but
           different realm is considered a different user. Note that
           this means that two users sharing the same name but with
           distinct realms are not allowed on the same system. Assigning
           a realm to a user is optional.

           Added in version 245.

       <b>--email-address=</b><i>EMAIL</i>
           Takes an electronic mail address to associate with the user.
           On log-in the <i>$EMAIL</i> environment variable is initialized from
           this value.

           Added in version 245.

       <b>--location=</b><i>TEXT</i>
           Takes location specification for this user. This is free-form
           text, which might or might not be usable by geo-location
           applications. Example: <b>--location="Berlin, Germany" </b>or
           <b>--location="Basement, Room 3a"</b>

           Added in version 245.

       <b>--icon-name=</b><i>ICON</i>
           Takes an icon name to associate with the user, following the
           scheme defined by the <b>Icon Naming Specification</b>[2].

           Added in version 245.

       <b>--home-dir=</b><i>PATH</i>, <b>-d</b><i>PATH</i>
           Takes a path to use as home directory for the user. Note that
           this is the directory the user's home directory is mounted to
           while the user is logged in. This is not where the user's
           data is actually stored, see <b>--image-path= </b>for that. If not
           specified defaults to /home/$USER.

           Added in version 245.

       <b>--uid=</b><i>UID</i>
           Takes a preferred numeric UNIX UID to assign this user. If a
           user is to be created with the specified UID and it is
           already taken by a different user on the local system then
           creation of the home directory is refused. Note though, if
           after creating the home directory it is used on a different
           system and the configured UID is taken by another user there,
           then <b>systemd-homed </b>may assign the user a different UID on
           that system. The specified UID must be outside of the system
           user range. It is recommended to use the 60001...60513 UID
           range for this purpose. If not specified, the UID is
           automatically picked. If the home directory is found to be
           owned by a different UID when logging in, the home directory
           and everything underneath it will have its ownership changed
           automatically before login completes.

           Note that changing this option for existing home directories
           generally has no effect on home directories that already have
           been registered locally (have a local <i>binding</i>), as the UID
           used for an account on the local system is determined when
           the home directory is first activated on it, and then remains
           in effect until the home directory is removed.

           Note that users managed by <b>systemd-homed </b>always have a
           matching group associated with the same name as well as a GID
           matching the UID of the user. Thus, configuring the GID
           separately is not permitted.

           Added in version 245.

       <b>--member-of=</b><i>GROUP</i>, <b>-G </b><i>GROUP</i>
           Takes a comma-separated list of auxiliary UNIX groups this
           user shall belong to. Example: <b>--member-of=wheel </b>to provide
           the user with administrator privileges. Note that
           <b>systemd-homed </b>does not manage any groups besides a group
           matching the user in name and numeric UID/GID. Thus any
           groups listed here must be registered independently, for
           example with <a href="../man8/groupadd.8.html">groupadd(8)</a>. Any non-existent groups are
           ignored. This option may be used more than once, in which
           case all specified group lists are combined. If the user is
           currently a member of a group which is not listed, the user
           will be removed from the group.

           Added in version 245.

       <b>--capability-bounding-set=</b><i>CAPABILITIES</i>,
       <b>--capability-ambient-set=</b><i>CAPABILITIES</i>
           These options take a space separated list of process
           capabilities (e.g.  <b>CAP_WAKE_ALARM</b>, <b>CAP_BLOCK_SUSPEND</b>, ...)
           that shall be set in the capability bounding and ambient sets
           for all the user's sessions. See <a href="../man7/capabilities.7.html">capabilities(7)</a> for details
           on the capabilities concept. These options may be used more
           than once, in which case the specified lists are combined. If
           the parameter begins with a "~" character the effect is
           inverted: the specified capability is dropped from the
           specific set.

           Added in version 254.

       <b>--skel=</b><i>PATH</i>
           Takes a file system path to a directory. Specifies the
           skeleton directory to initialize the home directory with. All
           files and directories in the specified path are copied into
           any newly create home directory. If not specified defaults to
           /etc/skel/.

           Added in version 245.

       <b>--shell=</b><i>SHELL</i>
           Takes a file system path. Specifies the shell binary to
           execute on terminal logins. If not specified defaults to
           /bin/bash.

           Added in version 245.

       <b>--setenv=</b><i>VARIABLE</i><b>[=</b><i>VALUE</i><b>]</b>
           Takes an environment variable assignment to set for all user
           processes. May be used multiple times to set multiple
           environment variables. When "=" and <i>VALUE</i> are omitted, the
           value of the variable with the same name in the program
           environment will be used.

           Note that a number of other settings also result in
           environment variables to be set for the user, including
           <b>--email=</b>, <b>--timezone= </b>and <b>--language=</b>.

           Added in version 245.

       <b>--timezone=</b><i>TIMEZONE</i>
           Takes a time zone location name that sets the timezone for
           the specified user. When the user logs in the <i>$TZ</i> environment
           variable is initialized from this setting. Example:
           <b>--timezone=Europe/Amsterdam </b>will result in the environment
           variable "TZ=:Europe/Amsterdam". (":" is used intentionally
           as part of the timezone specification, see <a href="../man3/tzset.3.html">tzset(3)</a>.)

           Added in version 245.

       <b>--language=</b><i>LANG</i>
           Takes a comma- or colon-separated list of languages preferred
           by the user, ordered by descending priority. The <i>$LANG</i> and
           <i>$LANGUAGE</i> environment variables are initialized from this
           value on login, and thus values suitible for these
           environment variables are accepted here, for example
           <b>--language=de_DE.UTF-8</b>. This option may be used more than
           once, in which case the language lists are concatenated.

           Added in version 245.

       <b>--ssh-authorized-keys=</b><i>KEYS</i>
           Either takes a SSH authorized key line to associate with the
           user record or a "@" character followed by a path to a file
           to read one or more such lines from. SSH keys configured this
           way are made available to SSH to permit access to this home
           directory and user record. This option may be used more than
           once to configure multiple SSH keys.

           Added in version 245.

       <b>--pkcs11-token-uri=</b><i>URI</i>
           Takes an RFC 7512 PKCS#11 URI referencing a security token
           (e.g. YubiKey or PIV smartcard) that shall be able to unlock
           the user account. The security token URI should reference a
           security token with exactly one pair of X.509 certificate and
           private key. A random secret key is then generated, encrypted
           with the public key of the X.509 certificate, and stored as
           part of the user record. At login time it is decrypted with
           the PKCS#11 module and then used to unlock the account and
           associated resources. See below for an example how to set up
           authentication with a security token.

           Instead of a valid PKCS#11 URI, the special strings "list"
           and "auto" may be specified. If "list" is passed, a brief
           table of suitable, currently plugged in PKCS#11 hardware
           tokens is shown, along with their URIs. If "auto" is passed,
           a suitable PKCS#11 hardware token is automatically selected
           (this operation will fail if there isn't exactly one suitable
           token discovered). The latter is a useful shortcut for the
           most common case where a single PKCS#11 hardware token is
           plugged in.

           Note that many hardware security tokens implement both
           PKCS#11/PIV and FIDO2 with the "hmac-secret" extension (for
           example: the YubiKey 5 series), as supported with the
           <b>--fido2-device= </b>option below. Both mechanisms are similarly
           powerful, though FIDO2 is the more modern technology.
           PKCS#11/PIV tokens have the benefit of being recognizable
           before authentication and hence can be used for implying the
           user identity to use for logging in, which FIDO2 does not
           allow. PKCS#11/PIV devices generally require initialization
           (i.e. storing a private/public key pair on them, see example
           below) before they can be used; FIDO2 security tokens
           generally do not required that, and work out of the box.

           Added in version 245.

       <b>--fido2-credential-algorithm=</b><i>STRING</i>
           Specify COSE algorithm used in credential generation. The
           default value is "es256". Supported values are "es256",
           "rs256" and "eddsa".

           "es256" denotes ECDSA over NIST P-256 with SHA-256.  "rs256"
           denotes 2048-bit RSA with PKCS#1.5 padding and SHA-256.
           "eddsa" denotes EDDSA over Curve25519 with SHA-512.

           Note that your authenticator may choose not to support some
           algorithms.

           Added in version 251.

       <b>--fido2-device=</b><i>PATH</i>
           Takes a path to a Linux "hidraw" device (e.g.  /dev/hidraw1),
           referring to a FIDO2 security token implementing the
           "hmac-secret" extension that shall be able to unlock the user
           account. A random salt value is generated on the host and
           passed to the FIDO2 device, which calculates a HMAC hash of
           the salt using an internal secret key. The result is then
           used as the key to unlock the user account. The random salt
           is included in the user record, so that whenever
           authentication is needed it can be passed to the FIDO2 token
           again.

           Instead of a valid path to a FIDO2 "hidraw" device the
           special strings "list" and "auto" may be specified. If "list"
           is passed, a brief table of suitable discovered FIDO2 devices
           is shown. If "auto" is passed, a suitable FIDO2 token is
           automatically selected, if exactly one is discovered. The
           latter is a useful shortcut for the most common case where a
           single FIDO2 hardware token is plugged in.

           Note that FIDO2 devices suitable for this option must
           implement the "hmac-secret" extension. Most current devices
           (such as the YubiKey 5 series) do. If the extension is not
           implemented the device cannot be used for unlocking home
           directories.

           The FIDO2 device may be subsequently removed by setting the
           device path to an empty string (e.g.  <b>homectl update $USER</b>
           <b>--fido2-device=""</b>).

           Note that many hardware security tokens implement both FIDO2
           and PKCS#11/PIV (and thus may be used with either
           <b>--fido2-device= </b>or <b>--pkcs11-token-uri=</b>), for a discussion see
           above.

           Added in version 246.

       <b>--fido2-with-client-pin=</b><i>BOOL</i>
           When enrolling a FIDO2 security token, controls whether to
           require the user to enter a PIN when unlocking the account
           (the FIDO2 "clientPin" feature). Defaults to "yes". (Note:
           this setting is without effect if the security token does not
           support the "clientPin" feature at all, or does not allow
           enabling or disabling it.)

           Added in version 249.

       <b>--fido2-with-user-presence=</b><i>BOOL</i>
           When enrolling a FIDO2 security token, controls whether to
           require the user to verify presence (tap the token, the FIDO2
           "up" feature) when unlocking the account. Defaults to "yes".
           (Note: this setting is without effect if the security token
           does not support the "up" feature at all, or does not allow
           enabling or disabling it.)

           Added in version 249.

       <b>--fido2-with-user-verification=</b><i>BOOL</i>
           When enrolling a FIDO2 security token, controls whether to
           require user verification when unlocking the account (the
           FIDO2 "uv" feature). Defaults to "no". (Note: this setting is
           without effect if the security token does not support the
           "uv" feature at all, or does not allow enabling or disabling
           it.)

           Added in version 249.

       <b>--recovery-key=</b><i>BOOL</i>
           Accepts a boolean argument. If enabled a recovery key is
           configured for the account. A recovery key is a computer
           generated access key that may be used to regain access to an
           account if the password has been forgotten or the
           authentication token lost. The key is generated and shown on
           screen, and should be printed or otherwise transferred to a
           secure location. A recovery key may be entered instead of a
           regular password to unlock the account.

           Added in version 247.

       <b>--blob=</b><i>PATH</i>, <b>-b </b><i>PATH</i>, <b>--blob=</b><i>FILENAME</i><b>=</b><i>PATH</i>, <b>-b </b><i>FILENAME</i>=<i>PATH</i>
           Accepts either a directory path, or a file name followed by a
           file path. If just a directory path is specified, then the
           user's entire blob directory is replaced the specified path.
           Note that this replacement is performed before per-file
           manipulations are applied, which means these per-file
           manipulations will be applied on top of the specified
           directory. If a filename and file path are specified, then
           the single specified blob file will be overwritten with the
           specified path. If completely blank, the entire blob
           directory is emptied out (which also resets all previous
           blob-related flags up to this point). If a filename is
           specified but the corresponding path is blank, that single
           file will be deleted from the blob directory. All changes are
           performed in temporary copies of the specified files in
           directories, which means that the originals specified on the
           command line are not modified. See <b>User Record Blob</b>
           <b>Directories</b>[3] for more information about blob directories.

           Added in version 256.

       <b>--avatar=</b><i>PATH</i>, <b>--login-background=</b><i>PATH</i>
           Accept a file path. If set, the specified file is used to
           overwrite the corresponding file in the user's blob
           directory. If blank, the corresponding file is deleted from
           the blob directory. Essentially, these options are shortcuts
           to <b>--blob=</b><i>FILENAME</i><b>=</b><i>PATH</i> for the known filenames defined in
           <b>User Record Blob Directories</b>[3].

           Added in version 256.

       <b>--locked=</b><i>BOOLEAN</i>
           Takes a boolean argument. Specifies whether this user account
           shall be locked. If true logins into this account are
           prohibited, if false (the default) they are permitted (of
           course, only if authorization otherwise succeeds).

           Added in version 245.

       <b>--not-before=</b><i>TIMESTAMP</i>, <b>--not-after=</b><i>TIMESTAMP</i>
           These options take a timestamp string, in the format
           documented in <a href="../man7/systemd.time.7.html">systemd.time(7)</a> and configures points in time
           before and after logins into this account are not permitted.

           Added in version 245.

       <b>--rate-limit-interval=</b><i>SECS</i>, <b>--rate-limit-burst=</b><i>NUMBER</i>
           Configures a rate limit on authentication attempts for this
           user. If the user attempts to authenticate more often than
           the specified number, on a specific system, within the
           specified time interval authentication is refused until the
           time interval passes. Defaults to 10 times per 1min.

           Added in version 245.

       <b>--password-hint=</b><i>TEXT</i>
           Takes a password hint to store alongside the user record.
           This string is stored accessible only to privileged users and
           the user itself and may not be queried by other users.
           Example: <b>--password-hint="My first pet's name"</b>.

           Added in version 245.

       <b>--enforce-password-policy=</b><i>BOOL</i>, <b>-P</b>
           Takes a boolean argument. Configures whether to enforce the
           system's password policy for this user, regarding quality and
           strength of selected passwords. Defaults to on.  <b>-P </b>is short
           for <b>---enforce-password-policy=no</b>.

           Added in version 245.

       <b>--password-change-now=</b><i>BOOL</i>
           Takes a boolean argument. If true the user is asked to change
           their password on next login.

           Added in version 245.

       <b>--password-change-min=</b><i>TIME</i>, <b>--password-change-max=</b><i>TIME</i>,
       <b>--password-change-warn=</b><i>TIME</i>, <b>--password-change-inactive=</b><i>TIME</i>
           Each of these options takes a time span specification as
           argument (in the syntax documented in <a href="../man7/systemd.time.7.html">systemd.time(7)</a>) and
           configures various aspects of the user's password expiration
           policy. Specifically, <b>--password-change-min= </b>configures how
           much time has to pass after changing the password of the user
           until the password may be changed again. If the user tries to
           change their password before this time passes the attempt is
           refused.  <b>--password-change-max= </b>configures how soon after it
           has been changed the password expires and needs to be changed
           again. After this time passes logging in may only proceed
           after the password is changed.  <b>--password-change-warn=</b>
           specifies how much earlier than then the time configured with
           <b>--password-change-max= </b>the user is warned at login to change
           their password as it will expire soon. Finally
           <b>--password-change-inactive= </b>configures the time which has to
           pass after the password as expired until the user is not
           permitted to log in or change the password anymore. Note that
           these options only apply to password authentication, and do
           not apply to other forms of authentication, for example
           PKCS#11-based security token authentication.

           Added in version 245.

       <b>--disk-size=</b><i>BYTES</i>
           Either takes a size in bytes as argument (possibly using the
           usual K, M, G, ... suffixes for 1024 base values), a
           percentage value, or the special strings "min" or "max", and
           configures the disk space to assign to the user. If a
           percentage value is specified (i.e. the argument suffixed
           with "%") it is taken relative to the available disk space of
           the backing file system. If specified as "min" assigns the
           minimal disk space permitted by the constraints of the
           backing file system and other limits, when specified as "max"
           assigns the maximum disk space available. If the LUKS2
           backend is used this configures the size of the loopback file
           and file system contained therein. For the other storage
           backends configures disk quota using the filesystem's native
           quota logic, if available. If not specified, defaults to 85%
           of the available disk space for the LUKS2 backend and to no
           quota for the others.

           Added in version 245.

       <b>--access-mode=</b><i>MODE</i>
           Takes a UNIX file access mode written in octal. Configures
           the access mode of the home directory itself. Note that this
           is only used when the directory is first created, and the
           user may change this any time afterwards. Example:
           <b>--access-mode=0700</b>

           Added in version 245.

       <b>--umask=</b><i>MASK</i>
           Takes the access mode mask (in octal syntax) to apply to
           newly created files and directories of the user ("umask"). If
           set this controls the initial umask set for all login
           sessions of the user, possibly overriding the system's
           defaults.

           Added in version 245.

       <b>--nice=</b><i>NICE</i>
           Takes the numeric scheduling priority ("nice level") to apply
           to the processes of the user at login time. Takes a numeric
           value in the range -20 (highest priority) to 19 (lowest
           priority).

           Added in version 245.

       <b>--rlimit=</b><i>LIMIT</i><b>=</b><i>VALUE</i><b>[:</b><i>VALUE</i>]
           Allows configuration of resource limits for processes of this
           user, see <a href="../man2/getrlimit.2.html">getrlimit(2)</a> for details. Takes a resource limit
           name (e.g.  "LIMIT_NOFILE") followed by an equal sign,
           followed by a numeric limit. Optionally, separated by colon a
           second numeric limit may be specified. If two are specified
           this refers to the soft and hard limits, respectively. If
           only one limit is specified the setting sets both limits in
           one.

           Added in version 245.

       <b>--tasks-max=</b><i>TASKS</i>
           Takes a non-zero unsigned integer as argument. Configures the
           maximum number of tasks (i.e. threads, where each process is
           at least one thread) the user may have at any given time.
           This limit applies to all tasks forked off the user's
           sessions, even if they change user identity via <a href="su.1.html">su(1)</a> or a
           similar tool. Use <b>--rlimit=LIMIT_NPROC= </b>to place a limit on
           the tasks actually running under the UID of the user, thus
           excluding any child processes that might have changed user
           identity. This controls the <i>TasksMax=</i> setting of the per-user
           systemd slice unit user-$UID.slice. See
           <a href="../man5/systemd.resource-control.5.html">systemd.resource-control(5)</a> for further details.

           Added in version 245.

       <b>--memory-high=</b><i>BYTES</i>, <b>--memory-max=</b><i>BYTES</i>
           Set a limit on the memory a user may take up on a system at
           any given time in bytes (the usual K, M, G, ... suffixes are
           supported, to the base of 1024). This includes all memory
           used by the user itself and all processes they forked off
           that changed user credentials. This controls the <i>MemoryHigh=</i>
           and <i>MemoryMax=</i> settings of the per-user systemd slice unit
           user-$UID.slice. See <a href="../man5/systemd.resource-control.5.html">systemd.resource-control(5)</a> for further
           details.

           Added in version 245.

       <b>--cpu-weight=</b><i>WEIGHT</i>, <b>--io-weight=</b><i>WEIGHT</i>
           Set CPU and IO scheduling weights of the processes of the
           user, including those of processes forked off by the user
           that changed user credentials. Takes a numeric value in the
           range 1...10000. This controls the <i>CPUWeight=</i> and <i>IOWeight=</i>
           settings of the per-user systemd slice unit user-$UID.slice.
           See <a href="../man5/systemd.resource-control.5.html">systemd.resource-control(5)</a> for further details.

           Added in version 245.

       <b>--storage=</b><i>STORAGE</i>
           Selects the storage mechanism to use for this home directory.
           Takes one of "luks", "fscrypt", "directory", "subvolume",
           "cifs". For details about these mechanisms, see above. If a
           new home directory is created and the storage type is not
           specifically specified, <a href="../man5/homed.conf.5.html">homed.conf(5)</a> defines which default
           storage to use.

           Added in version 245.

       <b>--image-path=</b><i>PATH</i>
           Takes a file system path. Configures where to place the
           user's home directory. When LUKS2 storage is used refers to
           the path to the loopback file, otherwise to the path to the
           home directory (which may be in /home/ or any other
           accessible filesystem). When unspecified defaults to
           /home/$USER.home when LUKS storage is used and
           /home/$USER.homedir for the other storage mechanisms. Not
           defined for the "cifs" storage mechanism. To use LUKS2
           storage on a regular block device (for example a USB stick)
           pass the path to the block device here. Specifying the path
           to a directory here when using LUKS2 storage is not allowed.
           Similar, specifying the path to a regular file or device node
           is not allowed if any of the other storage backends are used.

           Added in version 245.

       <b>--drop-caches=</b><i>BOOL</i>
           Automatically flush OS file system caches on logout. This is
           useful in combination with the fscrypt storage backend to
           ensure the OS does not keep decrypted versions of the files
           and directories in memory (and accessible) after logout. This
           option is also supported on other backends, but should not
           bring any benefit there. Defaults to off, except if the
           selected storage backend is fscrypt, where it defaults to on.
           Note that flushing OS caches will negatively influence
           performance of the OS shortly after logout.

           Added in version 250.

       <b>--fs-type=</b><i>TYPE</i>
           When LUKS2 storage is used configures the file system type to
           use inside the home directory LUKS2 container. One of
           "btrfs", "ext4", "xfs". If not specified <a href="../man5/homed.conf.5.html">homed.conf(5)</a>
           defines which default file system type to use. Note that
           "xfs" is not recommended as its support for file system
           resizing is too limited.

           Added in version 245.

       <b>--luks-discard=</b><i>BOOL</i>
           When LUKS2 storage is used configures whether to enable the
           "discard" feature of the file system. If enabled the file
           system on top of the LUKS2 volume will report empty block
           information to LUKS2 and the loopback file below, ensuring
           that empty space in the home directory is returned to the
           backing file system below the LUKS2 volume, resulting in a
           "sparse" loopback file. This option mostly defaults to off,
           since this permits over-committing home directories which
           results in I/O errors if the underlying file system runs full
           while the upper file system wants to allocate a block. Such
           I/O errors are generally not handled well by file systems nor
           applications. When LUKS2 storage is used on top of regular
           block devices (instead of on top a loopback file) the discard
           logic defaults to on.

           Added in version 245.

       <b>--luks-offline-discard=</b><i>BOOL</i>
           Similar to <b>--luks-discard=</b>, controls the trimming of the file
           system. However, while <b>--luks-discard= </b>controls what happens
           when the home directory is active, <b>--luks-offline-discard=</b>
           controls what happens when it becomes inactive, i.e. whether
           to trim/allocate the storage when deactivating the home
           directory. This option defaults to on, to ensure disk space
           is minimized while a user is not logged in.

           Added in version 246.

       <b>--luks-extra-mount-options=</b><i>OPTIONS</i>
           Takes a string containing additional mount options to use
           when mounting the LUKS volume. If specified, this string will
           be appended to the default, built-in mount options.

           Added in version 250.

       <b>--luks-cipher=</b><i>CIPHER</i>, <b>--luks-cipher-mode=</b><i>MODE</i>,
       <b>--luks-volume-key-size=</b><i>BYTES</i>, <b>--luks-pbkdf-type=</b><i>TYPE</i>,
       <b>--luks-pbkdf-hash-algorithm=</b><i>ALGORITHM</i>,
       <b>--luks-pbkdf-force-iterations=</b><i>ITERATIONS</i>,
       <b>--luks-pbkdf-time-cost=</b><i>SECONDS</i>, <b>--luks-pbkdf-memory-cost=</b><i>BYTES</i>,
       <b>--luks-pbkdf-parallel-threads=</b><i>THREADS</i>, <b>--luks-sector-size=</b><i>BYTES</i>
           Configures various cryptographic parameters for the LUKS2
           storage mechanism. See <a href="../man8/cryptsetup.8.html">cryptsetup(8)</a> for details on the
           specific attributes.

           Note that <b>homectl </b>uses bytes for key size, like /proc/crypto,
           but <a href="../man8/cryptsetup.8.html">cryptsetup(8)</a> uses bits.

           Added in version 245.

       <b>--auto-resize-mode=</b>
           Configures whether to automatically grow and/or shrink the
           backing file system on login and logout. Takes one of the
           strings "off", "grow", "shrink-and-grow". Only applies to the
           LUKS2 backend currently, and if the btrfs file system is used
           inside it (since only then online growing/shrinking of the
           file system is supported). Defaults to "shrink-and-grow", if
           LUKS2/btrfs is used, otherwise is off. If set to "off" no
           automatic shrinking/growing during login or logout is done.
           If set to "grow" the home area is grown to the size
           configured via <b>--disk-size= </b>should it currently be smaller.
           If it already matches the configured size or is larger no
           operation is executed. If set to "shrink-and-grow" the home
           area is also resized during logout to the minimal size the
           used disk space and file system constraints permit. This mode
           thus ensures that while a home area is activated it is sized
           to the configured size, but while deactivated it is compacted
           taking up only the minimal space possible. Note that if the
           system is powered off abnormally or if the user otherwise not
           logged out cleanly the shrinking operation will not take
           place, and the user has to re-login/logout again before it is
           executed again.

           Added in version 250.

       <b>--rebalance-weight=</b>
           Configures the weight parameter for the free disk space
           rebalancing logic. Only applies to the LUKS2 backend (since
           for the LUKS2 backend disk space is allocated from a per-user
           loopback file system instead of immediately from a common
           pool like the other backends do it). In regular intervals
           free disk space in the active home areas and their backing
           storage is redistributed among them, taking the weight value
           configured here into account. Expects an integer in the range
           1...10000, or the special string "off". If not specified
           defaults to 100. The weight is used to scale free space made
           available to the home areas: a home area with a weight of 200
           will get twice the free space as one with a weight of 100; a
           home area with a weight of 50 will get half of that. The
           backing file system will be assigned space for a weight of
           20. If set to "off" no automatic free space distribution is
           done for this home area. Note that resizing the home area
           explicitly (with <b>homectl resize </b>see below) will implicitly
           turn off the automatic rebalancing. To reenable the automatic
           rebalancing use <b>--rebalance-weight= </b>with an empty parameter.

           Added in version 250.

       <b>--nosuid=</b><i>BOOL</i>, <b>--nodev=</b><i>BOOL</i>, <b>--noexec=</b><i>BOOL</i>
           Configures the "nosuid", "nodev" and "noexec" mount options
           for the home directories. By default "nodev" and "nosuid" are
           on, while "noexec" is off. For details about these mount
           options see <a href="../man8/mount.8.html">mount(8)</a>.

           Added in version 245.

       <b>--cifs-domain=</b><i>DOMAIN</i>, <b>--cifs-user-name=</b><i>USER</i>,
       <b>--cifs-service=</b><i>SERVICE</i>, <b>--cifs-extra-mount-options=</b><i>OPTIONS</i>
           Configures the Windows File Sharing (CIFS) domain and user to
           associate with the home directory/user account, as well as
           the file share ("service") to mount as directory. The latter
           is used when "cifs" storage is selected. The file share
           should be specified in format "//<i>host</i>/<i>share</i>/<i>directory/...</i>".
           The directory part is optional — if not specified the home
           directory will be placed in the top-level directory of the
           share. The <b>--cifs-extra-mount-options= </b>setting allows
           specifying additional mount options when mounting the share,
           see <b>mount.cifs</b>(8) for details.

           Added in version 245.

       <b>--stop-delay=</b><i>SECS</i>
           Configures the time the per-user service manager shall
           continue to run after the all sessions of the user ended. The
           default is configured in <a href="../man5/logind.conf.5.html">logind.conf(5)</a> (for home directories
           of LUKS2 storage located on removable media this defaults to
           0 though). A longer time makes sure quick, repetitive logins
           are more efficient as the user's service manager doesn't have
           to be started every time.

           Added in version 245.

       <b>--kill-processes=</b><i>BOOL</i>
           Configures whether to kill all processes of the user on
           logout. The default is configured in <a href="../man5/logind.conf.5.html">logind.conf(5)</a>.

           Added in version 245.

       <b>--auto-login=</b><i>BOOL</i>
           Takes a boolean argument. Configures whether the graphical UI
           of the system should automatically log this user in if
           possible. Defaults to off. If less or more than one user is
           marked this way automatic login is disabled.

           Added in version 245.

       <b>--session-launcher=</b><i>LAUNCHER</i>
           Takes a string argument. Configures the user's preferred
           session launcher .desktop entry file (i.e.  "gnome",
           "plasma", or other names that appear in /usr/share/xesssions/
           or /usr/share/wayland-sessions). This is read by the display
           manager to pick the default session that is launched when the
           user logs in.

           Added in version 256.

       <b>--session-type=</b><i>TYPE</i>
           Takes a string argument. Configures the user's preferred
           session type (i.e.  "x11", "wayland", and other values
           accepted by <i>$XDG_SESSION_TYPE</i>). This is read by the display
           manage to pick the default session type the user is logged
           into.

           Added in version 256.
</pre> <h2>
COMMANDS </h2>
<pre>
       The following commands are understood:

       <b>list</b>
           List all home directories (along with brief details)
           currently managed by systemd-homed.service. This command is
           also executed if none is specified on the command line. (Note
           that the list of users shown by this command does not include
           users managed by other subsystems, such as system users or
           any traditional users listed in /etc/passwd.)

           Added in version 245.

       <b>activate </b><i>USER</i> [<i>USER...</i>]
           Activate one or more home directories. The home directories
           of each listed user will be activated and made available
           under their mount points (typically in /home/$USER). Note
           that any home activated this way stays active indefinitely,
           until it is explicitly deactivated again (with <b>deactivate</b>,
           see below), or the user logs in and out again and it thus is
           deactivated due to the automatic deactivation-on-logout
           logic.

           Activation of a home directory involves various operations
           that depend on the selected storage mechanism. If the LUKS2
           mechanism is used, this generally involves: inquiring the
           user for a password, setting up a loopback device, validating
           and activating the LUKS2 volume, checking the file system,
           mounting the file system, and potentially changing the
           ownership of all included files to the correct UID/GID.

           Added in version 245.

       <b>deactivate </b><i>USER</i> [<i>USER...</i>]
           Deactivate one or more home directories. This undoes the
           effect of <b>activate</b>.

           Added in version 245.

       <b>inspect </b><i>USER</i> [<i>USER...</i>]
           Show various details about the specified home directories.
           This shows various information about the home directory and
           its user account, including runtime data such as current
           state, disk use and similar. Combine with <b>--json= </b>to show the
           detailed JSON user record instead, possibly combined with
           <b>--export-format= </b>to suppress certain aspects of the output.

           Added in version 245.

       <b>authenticate </b><i>USER</i> [<i>USER...</i>]
           Validate authentication credentials of a home directory. This
           queries the caller for a password (or similar) and checks
           that it correctly unlocks the home directory. This leaves the
           home directory in the state it is in, i.e. it leaves the home
           directory in inactive state if it was inactive before, and in
           active state if it was active before.

           Added in version 245.

       <b>create </b><i>USER</i>, <b>create --identity=</b><i>PATH</i> [<i>USER</i>]
           Create a new home directory/user account of the specified
           name. Use the various user record property options (as
           documented above) to control various aspects of the home
           directory and its user accounts.

           The specified user name should follow the strict syntax
           described on <b>User/Group Name Syntax</b>[4].

           Added in version 245.

       <b>remove </b><i>USER</i>
           Remove a home directory/user account. This will remove both
           the home directory's user record and the home directory
           itself, and thus delete all files and directories owned by
           the user.

           Added in version 245.

       <b>update </b><i>USER</i>, <b>update --identity=</b><i>PATH</i> [<i>USER</i>]
           Update a home directory/user account. Use the various user
           record property options (as documented above) to make changes
           to the account, or alternatively provide a full, updated JSON
           user record via the <b>--identity= </b>option.

           Note that changes to user records not signed by a
           cryptographic private key available locally are not
           permitted, unless <b>--identity= </b>is used with a user record that
           is already correctly signed by a recognized private key.

           Added in version 245.

       <b>passwd </b><i>USER</i>
           Change the password of the specified home directory/user
           account.

           Added in version 245.

       <b>resize </b><i>USER BYTES</i>
           Change the disk space assigned to the specified home
           directory. If the LUKS2 storage mechanism is used this will
           automatically resize the loopback file and the file system
           contained within. Note that if "ext4" is used inside of the
           LUKS2 volume, it is necessary to deactivate the home
           directory before shrinking it (i.e the user has to log out).
           Growing can be done while the home directory is active. If
           "xfs" is used inside of the LUKS2 volume the home directory
           may not be shrunk whatsoever. On all three of "ext4", "xfs"
           and "btrfs" the home directory may be grown while the user is
           logged in, and on the latter also shrunk while the user is
           logged in. If the "subvolume", "directory", "fscrypt" storage
           mechanisms are used, resizing will change file system quota.
           The size parameter may make use of the usual suffixes B, K,
           M, G, T (to the base of 1024). The special strings "min" and
           "max" may be specified in place of a numeric size value, for
           minimizing or maximizing disk space assigned to the home
           area, taking constraints of the file system, disk usage
           inside the home area and on the backing storage into account.

           Added in version 245.

       <b>lock </b><i>USER</i>
           Temporarily suspend access to the user's home directory and
           remove any associated cryptographic keys from memory. Any
           attempts to access the user's home directory will stall until
           the home directory is unlocked again (i.e. re-authenticated).
           This functionality is primarily intended to be used during
           system suspend to make sure the user's data cannot be
           accessed until the user re-authenticates on resume. This
           operation is only defined for home directories that use the
           LUKS2 storage mechanism.

           Added in version 245.

       <b>unlock </b><i>USER</i>
           Resume access to the user's home directory again, undoing the
           effect of <b>lock </b>above. This requires authentication of the
           user, as the cryptographic keys required for access to the
           home directory need to be reacquired.

           Added in version 245.

       <b>lock-all</b>
           Execute the <b>lock </b>command on all suitable home directories at
           once. This operation is generally executed on system suspend
           (i.e. by <b>systemctl suspend </b>and related commands), to ensure
           all active user's cryptographic keys for accessing their home
           directories are removed from memory.

           Added in version 245.

       <b>deactivate-all</b>
           Execute the <b>deactivate </b>command on all active home directories
           at once. This operation is generally executed on system shut
           down (i.e. by <b>systemctl poweroff </b>and related commands), to
           ensure all active user's home directories are fully
           deactivated before /home/ and related file systems are
           unmounted.

           Added in version 247.

       <b>with </b><i>USER COMMAND...</i>
           Activate the specified user's home directory, run the
           specified command (under the caller's identity, not the
           specified user's) and deactivate the home directory
           afterwards again (unless the user is logged in otherwise).
           This command is useful for running privileged backup scripts
           and such, but requires authentication with the user's
           credentials in order to be able to unlock the user's home
           directory.

           Added in version 245.

       <b>rebalance</b>
           Rebalance free disk space between active home areas and the
           backing storage. See <b>--rebalance-weight= </b>above. This executes
           no operation unless there's at least one active LUKS2 home
           area that has disk space rebalancing enabled. This operation
           is synchronous: it will only complete once disk space is
           rebalanced according to the rebalancing weights. Note that
           rebalancing also takes place automatically in the background
           in regular intervals. Use this command to synchronously
           ensure disk space is properly redistributed before initiating
           an operation requiring large amounts of disk space.

           Added in version 250.

       <b>firstboot</b>
           This command is supposed to be invoked during the initial
           boot of the system. It checks whether any regular home area
           exists so far, and if not queries the user interactively on
           the console for user name and password and creates one.
           Alternatively, if one or more service credentials whose name
           starts with "home.create."  are passed to the command
           (containing a user record in JSON format) these users are
           automatically created at boot.

           This command is invoked by the
           systemd-homed-firstboot.service service unit.

           Added in version 256.
</pre> <h2>
CREDENTIALS </h2>
<pre>
       When invoked with the <b>firstboot </b>command, <b>homectl </b>supports the
       service credentials logic as implemented by
       <i>ImportCredential=</i>/<i>LoadCredential=</i>/<i>SetCredential=</i> (see
       <a href="../man5/systemd.exec.5.html">systemd.exec(5)</a> for details). The following credentials are used
       when passed in:

       <i>home.create.*</i>
           If one or more credentials whose names begin with
           "home.create.", followed by a valid UNIX username are passed,
           a new home area is created, one for each specified user
           record.

           Added in version 256.
</pre> <h2>
KERNEL COMMAND LINE </h2>
<pre>
       <i>systemd.firstboot=</i>
           This boolean will disable the effect of <b>homectl firstboot</b>
           command. It's primarily interpreted by <a href="systemd-firstboot.1.html">systemd-firstboot(1)</a>.

           Added in version 256.
</pre> <h2>
EXIT STATUS </h2>
<pre>
       On success, 0 is returned, a non-zero failure code otherwise.

       When a command is invoked with <b>with</b>, the exit status of the child
       is propagated. Effectively, <b>homectl </b>will exit without error if
       the command is successfully invoked <i>and</i> finishes successfully.
</pre> <h2>
ENVIRONMENT </h2>
<pre>
       <i>$SYSTEMD_LOG_LEVEL</i>
           The maximum log level of emitted messages (messages with a
           higher log level, i.e. less important ones, will be
           suppressed). Takes a comma-separated list of values. A value
           may be either one of (in order of decreasing importance)
           <b>emerg</b>, <b>alert</b>, <b>crit</b>, <b>err</b>, <b>warning</b>, <b>notice</b>, <b>info</b>, <b>debug</b>, or an
           integer in the range 0...7. See <a href="../man3/syslog.3.html">syslog(3)</a> for more
           information. Each value may optionally be prefixed with one
           of <b>console</b>, <b>syslog</b>, <b>kmsg </b>or <b>journal </b>followed by a colon to
           set the maximum log level for that specific log target (e.g.
           <b>SYSTEMD_LOG_LEVEL=debug,console:info </b>specifies to log at
           debug level except when logging to the console which should
           be at info level). Note that the global maximum log level
           takes priority over any per target maximum log levels.

       <i>$SYSTEMD_LOG_COLOR</i>
           A boolean. If true, messages written to the tty will be
           colored according to priority.

           This setting is only useful when messages are written
           directly to the terminal, because <a href="journalctl.1.html">journalctl(1)</a> and other
           tools that display logs will color messages based on the log
           level on their own.

       <i>$SYSTEMD_LOG_TIME</i>
           A boolean. If true, console log messages will be prefixed
           with a timestamp.

           This setting is only useful when messages are written
           directly to the terminal or a file, because <a href="journalctl.1.html">journalctl(1)</a> and
           other tools that display logs will attach timestamps based on
           the entry metadata on their own.

       <i>$SYSTEMD_LOG_LOCATION</i>
           A boolean. If true, messages will be prefixed with a filename
           and line number in the source code where the message
           originates.

           Note that the log location is often attached as metadata to
           journal entries anyway. Including it directly in the message
           text can nevertheless be convenient when debugging programs.

       <i>$SYSTEMD_LOG_TID</i>
           A boolean. If true, messages will be prefixed with the
           current numerical thread ID (TID).

           Note that the this information is attached as metadata to
           journal entries anyway. Including it directly in the message
           text can nevertheless be convenient when debugging programs.

       <i>$SYSTEMD_LOG_TARGET</i>
           The destination for log messages. One of <b>console </b>(log to the
           attached tty), <b>console-prefixed </b>(log to the attached tty but
           with prefixes encoding the log level and "facility", see
           <a href="../man3/syslog.3.html">syslog(3)</a>, <b>kmsg </b>(log to the kernel circular log buffer),
           <b>journal </b>(log to the journal), <b>journal-or-kmsg </b>(log to the
           journal if available, and to kmsg otherwise), <b>auto </b>(determine
           the appropriate log target automatically, the default), <b>null</b>
           (disable log output).

       <i>$SYSTEMD_LOG_RATELIMIT_KMSG</i>
           Whether to ratelimit kmsg or not. Takes a boolean. Defaults
           to "true". If disabled, systemd will not ratelimit messages
           written to kmsg.

       <i>$SYSTEMD_PAGER</i>
           Pager to use when <b>--no-pager </b>is not given; overrides <i>$PAGER</i>.
           If neither <i>$SYSTEMD_PAGER</i> nor <i>$PAGER</i> are set, a set of
           well-known pager implementations are tried in turn, including
           <a href="less.1.html">less(1)</a> and <a href="more.1.html">more(1)</a>, until one is found. If no pager
           implementation is discovered no pager is invoked. Setting
           this environment variable to an empty string or the value
           "cat" is equivalent to passing <b>--no-pager</b>.

           Note: if <i>$SYSTEMD_PAGERSECURE</i> is not set, <i>$SYSTEMD_PAGER</i> (as
           well as <i>$PAGER</i>) will be silently ignored.

       <i>$SYSTEMD_LESS</i>
           Override the options passed to <b>less </b>(by default "FRSXMK").

           Users might want to change two options in particular:

           <b>K</b>
               This option instructs the pager to exit immediately when
               Ctrl+C is pressed. To allow <b>less </b>to handle Ctrl+C itself
               to switch back to the pager command prompt, unset this
               option.

               If the value of <i>$SYSTEMD_LESS</i> does not include "K", and
               the pager that is invoked is <b>less</b>, Ctrl+C will be ignored
               by the executable, and needs to be handled by the pager.

           <b>X</b>
               This option instructs the pager to not send termcap
               initialization and deinitialization strings to the
               terminal. It is set by default to allow command output to
               remain visible in the terminal even after the pager
               exits. Nevertheless, this prevents some pager
               functionality from working, in particular paged output
               cannot be scrolled with the mouse.

           Note that setting the regular <i>$LESS</i> environment variable has
           no effect for <b>less </b>invocations by systemd tools.

           See <a href="less.1.html">less(1)</a> for more discussion.

       <i>$SYSTEMD_LESSCHARSET</i>
           Override the charset passed to <b>less </b>(by default "utf-8", if
           the invoking terminal is determined to be UTF-8 compatible).

           Note that setting the regular <i>$LESSCHARSET</i> environment
           variable has no effect for <b>less </b>invocations by systemd tools.

       <i>$SYSTEMD_PAGERSECURE</i>
           Takes a boolean argument. When true, the "secure" mode of the
           pager is enabled; if false, disabled. If <i>$SYSTEMD_PAGERSECURE</i>
           is not set at all, secure mode is enabled if the effective
           UID is not the same as the owner of the login session, see
           <a href="../man2/geteuid.2.html">geteuid(2)</a> and <a href="../man3/sd_pid_get_owner_uid.3.html">sd_pid_get_owner_uid(3)</a>. In secure mode,
           <b>LESSSECURE=1 </b>will be set when invoking the pager, and the
           pager shall disable commands that open or create new files or
           start new subprocesses. When <i>$SYSTEMD_PAGERSECURE</i> is not set
           at all, pagers which are not known to implement secure mode
           will not be used. (Currently only <a href="less.1.html">less(1)</a> implements secure
           mode.)

           Note: when commands are invoked with elevated privileges, for
           example under <a href="../man8/sudo.8.html">sudo(8)</a> or <b>pkexec</b>(1), care must be taken to
           ensure that unintended interactive features are not enabled.
           "Secure" mode for the pager may be enabled automatically as
           describe above. Setting <i>SYSTEMD_PAGERSECURE=0</i> or not removing
           it from the inherited environment allows the user to invoke
           arbitrary commands. Note that if the <i>$SYSTEMD_PAGER</i> or <i>$PAGER</i>
           variables are to be honoured, <i>$SYSTEMD_PAGERSECURE</i> must be
           set too. It might be reasonable to completely disable the
           pager using <b>--no-pager </b>instead.

       <i>$SYSTEMD_COLORS</i>
           Takes a boolean argument. When true, <b>systemd </b>and related
           utilities will use colors in their output, otherwise the
           output will be monochrome. Additionally, the variable can
           take one of the following special values: "16", "256" to
           restrict the use of colors to the base 16 or 256 ANSI colors,
           respectively. This can be specified to override the automatic
           decision based on <i>$TERM</i> and what the console is connected to.

       <i>$SYSTEMD_URLIFY</i>
           The value must be a boolean. Controls whether clickable links
           should be generated in the output for terminal emulators
           supporting this. This can be specified to override the
           decision that <b>systemd </b>makes based on <i>$TERM</i> and other
           conditions.
</pre> <h2>
EXAMPLES </h2>
<pre>
       <b>Example 1. Create a user "waldo" in the administrator group</b>
       <b>"wheel", and assign 500 MiB disk space to them.</b>

           homectl create waldo --real-name="Waldo McWaldo" -G wheel --disk-size=500M

       <b>Example 2. Create a user "wally" on a USB stick, and assign a</b>
       <b>maximum of 500 concurrent tasks to them.</b>

           homectl create wally --real-name="Wally McWally" --image-path=/dev/disk/by-id/usb-SanDisk_Ultra_Fit_476fff954b2b5c44-0:0 --tasks-max=500

       <b>Example 3. Change nice level of user "odlaw" to +5 and make sure</b>
       <b>the environment variable </b><i>$SOME</i> is set to the string "THING" for
       them on login.

           homectl update odlaw --nice=5 --setenv=SOME=THING

       <b>Example 4. Set up authentication with a YubiKey security token</b>
       <b>using PKCS#11/PIV:</b>

           # Clear the Yubikey from any old keys (careful!)
           ykman piv reset

           # Generate a new private/public key pair on the device, store the public key in 'pubkey.pem'.
           ykman piv generate-key -a RSA2048 9d pubkey.pem

           # Create a self-signed certificate from this public key, and store it on the device.
           ykman piv generate-certificate --subject "Knobelei" 9d pubkey.pem

           # We don't need the public key on disk anymore
           rm pubkey.pem

           # Allow the security token to unlock the account of user 'lafcadio'.
           homectl update lafcadio --pkcs11-token-uri=auto

       <b>Example 5. Set up authentication with a FIDO2 security token:</b>

           # Allow a FIDO2 security token to unlock the account of user 'nihilbaxter'.
           homectl update nihilbaxter --fido2-device=auto
</pre> <h2>
SEE ALSO </h2>
<pre>
       <a href="systemd.1.html">systemd(1)</a>, <a href="../man8/systemd-homed.service.8.html">systemd-homed.service(8)</a>, <a href="../man5/homed.conf.5.html">homed.conf(5)</a>,
       <a href="userdbctl.1.html">userdbctl(1)</a>, <a href="../man8/useradd.8.html">useradd(8)</a>, <a href="../man8/cryptsetup.8.html">cryptsetup(8)</a>
</pre> <h2>
NOTES </h2>
<pre>
        1. JSON User Records
           <a href="https://systemd.io/USER_RECORD">https://systemd.io/USER_RECORD</a>

        2. Icon Naming Specification
           <a href="https://standards.freedesktop.org/icon-naming-spec/icon-naming-spec-latest.html">https://standards.freedesktop.org/icon-naming-spec/icon-naming-spec-latest.html</a>

        3. User Record Blob Directories
           <a href="https://systemd.io/USER_RECORD_BLOB_DIRS">https://systemd.io/USER_RECORD_BLOB_DIRS</a>

        4. User/Group Name Syntax
           <a href="https://systemd.io/USER_NAMES">https://systemd.io/USER_NAMES</a>
</pre> <h2>
COLOPHON </h2>
<pre>
       This page is part of the <i>systemd</i> (systemd system and service
       manager) project.  Information about the project can be found at
       ⟨<a href="http://www.freedesktop.org/wiki/Software/systemd">http://www.freedesktop.org/wiki/Software/systemd</a>⟩.  If you have
       a bug report for this manual page, see
       ⟨<a href="http://www.freedesktop.org/wiki/Software/systemd/#bugreports">http://www.freedesktop.org/wiki/Software/systemd/#bugreports</a>⟩.
       This page was obtained from the project's upstream Git repository
       ⟨<a href="https://github.com/systemd/systemd.git">https://github.com/systemd/systemd.git</a>⟩ on 2024-06-14.  (At that
       time, the date of the most recent commit that was found in the
       repository was 2024-06-13.)  If you discover any rendering
       problems in this HTML version of the page, or you believe there
       is a better or more up-to-date source for the page, or you have
       corrections or improvements to the information in this COLOPHON
       (which is <i>not</i> part of the original manual page), send a mail to
       man-pages@man7.org

<span class="footline">systemd 257~devel                                             <i>HOMECTL</i>(1)</span>
</pre>  <p>Pages that refer to this page: <a href="../man5/homed.conf.5.html">homed.conf(5)</a>, <a href="../man5/org.freedesktop.home1.5.html">org.freedesktop.home1(5)</a>, <a href="../man7/kernel-command-line.7.html">kernel-command-line(7)</a>, <a href="../man7/systemd.directives.7.html">systemd.directives(7)</a>, <a href="../man7/systemd.index.7.html">systemd.index(7)</a>, <a href="../man7/systemd.system-credentials.7.html">systemd.system-credentials(7)</a>, <a href="../man8/pam_systemd_home.8.html">pam_systemd_home(8)</a>, <a href="../man8/systemd-homed.service.8.html">systemd-homed.service(8)</a> </p> <hr>         <div class="_attribution">
  <p class="_attribution-p">
    ...<br>
    <a href="https://man7.org/linux/man-pages/man1/systemd-homed-firstboot.service.1.html" class="_attribution-link">https://man7.org/linux/man-pages/man1/systemd-homed-firstboot.service.1.html</a>
  </p>
</div>
