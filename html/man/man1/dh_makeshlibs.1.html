<h1>dh_makeshlibs(1) — Linux manual page</h1>   <pre>
<span class="headline"><i>DH_MAKESHLIBS</i>(1)                Debhelper               <i>DH_MAKESHLIBS</i>(1)</span>
</pre> <h2>
NAME </h2>
<pre>
       dh_makeshlibs - automatically create shlibs file and call
       dpkg-gensymbols
</pre> <h2>
SYNOPSIS </h2>
<pre>
       <b>dh_makeshlibs </b>[<i>debhelper options</i>] [<b>-m</b><i>major</i>] [<b>-V</b><i>[dependencies]</i>]
       [<b>-n</b>] [<b>-X</b><i>item</i>] [<b>-- </b><i>params</i>]
</pre> <h2>
DESCRIPTION </h2>
<pre>
       <b>dh_makeshlibs </b>is a debhelper program that automatically scans for
       shared libraries, and generates a shlibs file for the libraries
       it finds.

       It will also ensure that ldconfig is invoked during install and
       removal when it finds shared libraries.  Since debhelper
       9.20151004, this is done via a dpkg trigger.  In older versions
       of debhelper, <b>dh_makeshlibs </b>would generate a maintainer script
       for this purpose.

       Since debhelper 12.3, <b>dh_makeshlibs </b>will by default add an
       additional <i>udeb</i> line for udebs in the shlibs file, when the udeb
       has the same name as the deb followed by a "-udeb" suffix (e.g.
       if the deb is called "libfoo1", then debhelper will auto-detect
       the udeb if it is named "libfoo1-udeb"). Please use the
       <b>--add-udeb </b>and <b>--no-add-udeb </b>options below when this auto-
       detection is insufficient.

       If you previously used <b>--add-udeb </b>and are considering to migrate
       to using the new auto-detection feature in 12.3, then please
       remember to test that the resulting <i>DEBIAN/shlibs</i> files are as
       expected.  There are some known corner cases, where the auto-
       detection is insufficient.  These include when the udeb contains
       library files from multiple regular deb packages or when the
       packages do not follow the expected naming convention.
</pre> <h2>
FILES </h2>
<pre>
       debian/<i>package</i>.shlibs
           Installs this file, if present, into the package as
           DEBIAN/shlibs.  If omitted, debhelper will generate a shlibs
           file automatically if it detects any libraries.

           Note in compat levels 9 and earlier, this file was installed
           by <a href="dh_installdeb.1.html">dh_installdeb(1)</a> rather than <b>dh_makeshlibs</b>.

       debian/<i>package</i>.symbols
       debian/<i>package</i>.symbols.<i>arch</i>
           These symbols files, if present, are passed to
           <a href="dpkg-gensymbols.1.html">dpkg-gensymbols(1)</a> to be processed and installed. Use the
           <i>arch</i> specific names if you need to provide different symbols
           files for different architectures.
</pre> <h2>
OPTIONS </h2>
<pre>
       <b>-m</b><i>major</i>, <b>--major=</b><i>major</i>
           Instead of trying to guess the major number of the library
           with objdump, use the major number specified after the -m
           parameter. This is much less useful than it used to be, back
           in the bad old days when this program looked at library
           filenames rather than using objdump.

       <b>-V</b>, <b>-V</b><i>dependencies</i>
       <b>--version-info</b>, <b>--version-info=</b><i>dependencies</i>
           If a shlibs file is generated by this program, this option
           controls what version will be used in the dependency
           relation.

           In compat 12 and later, <b>dh_makeshlibs </b>defaults to
           <b>-VUpstream-Version</b>.  In compat 11 and earlier the default
           behaved like <b>-VNone</b>.

           The <b>dh_makeshlibs </b>tool can generate dependencies in three
           variants:

           <b>-VUpstream-Version</b>
               The dependency will be "<i>packagename</i> <b>(&gt;</b>= <i>packageversion</i><b>)</b>".
               Note that <i>Upstream-Version</i> is case-sensitive and must be
               written exactly as shown here.

               This is a conservative setting that always ensures that
               other packages' shared library dependencies are at least
               as tight as they need to be (unless the library is prone
               to changing ABI without updating the upstream version
               number).

               The flip side is that packages might end up with
               dependencies that are too tight in some cases (note a
               symbols file can mitigate this issue).  This is often of
               minor temporary inconvenience and usually a lot better
               than the fall out caused by forgetting to bump the
               dependency information.

               This explicit form was added in debhelper/11.3.  In
               previous versions, a <b>-V </b>without any dependency
               information was used instead (and that form still works)

           <b>-VNone</b>
               The dependency will be "<i>packagename</i>".  Note that <i>None</i> is
               case-sensitive and must be written exactly as shown here.

               This form is generally unsafe with the only exception
               being if upstream does not extend the ABI in any way.
               However, most upstreams improve their interfaces over
               time and packagers are recommended to use
               <b>-VUpstream-Version </b>(or one of the other forms of
               <b>-V</b><i>dependencies</i>).

               Alternatively, this may be sufficient if (and only if)
               the package uses symbol versioning (see
               <a href="dpkg-gensymbols.1.html">dpkg-gensymbols(1)</a>) and does <i>not</i> build any udeb packages.
               Note that symbols are not supported for udeb packages,
               which solely relies on shlibs for dependency handling.

           <b>-V</b><i>package-relation</i>
               In this case, the value passed to <b>-V </b>will be used as a
               dependency relation.  The <i>package-relation</i> should
               generally be of the form "<i>some-package-name</i> <b>(&gt;</b>= <i>some-</i>
               <i>package-version</i><b>)</b>".  Remember to include the package name.

               Note that debhelper will use the value <i>as it is</i> with no
               sanity checking or modification.  In <i>rare special</i> cases,
               this is needed to generate a dependency on a different
               package than the one containing the library.

           When choosing a value for this option, please keep mind that
           if the package provides a symbols file, then that this is
           generally preferred over the shlibs file for regular .deb
           packages.  See <a href="dpkg-shlibdeps.1.html">dpkg-shlibdeps(1)</a> for more information on this
           topic.

       <b>-n</b>, <b>--no-scripts</b>
           Do not add the "ldconfig" trigger even if it seems like the
           package might need it.  The option is called <b>--no-scripts </b>for
           historical reasons as <b>dh_makeshlibs </b>would previously generate
           maintainer scripts that called <b>ldconfig</b>.

       <b>-X</b><i>item</i>, <b>--exclude=</b><i>item</i>
           Exclude files that contain <i>item</i> anywhere in their filename or
           directory from being treated as shared libraries.

       <b>--add-udeb=</b><i>udeb</i>
           Create an additional line for udebs in the shlibs file and
           use <i>udeb</i> as the package name for udebs to depend on instead
           of the regular library package.

           This option is only useful for special cases such as when
           debhelper cannot auto-detect package name of the udeb
           package, when the udeb will contain libraries from multiple
           deb packages, or when the udeb contains libraries <b>not </b>present
           in the deb package.

       <b>--no-add-udeb</b>
           Do not add any udeb lines to the shlibs file.  This can be
           used to disable the default auto-detection of udebs.

           This may be useful in case you do not want a shlibs file at
           all for the udeb because no package will depend on it.  E.g.
           because adding a udeb package for the library was "overkill"
           and the library is embedded in a different udeb package.

       <b>-- </b><i>params</i>
           Pass <i>params</i> to <a href="dpkg-gensymbols.1.html">dpkg-gensymbols(1)</a>.
</pre> <h2>
EXAMPLES </h2>
<pre>
       <b>dh_makeshlibs -VNone</b>
           Assuming this is a package named <i>libfoobar1</i>, generates a
           shlibs file that looks something like:
            libfoobar 1 libfoobar1

       <b>dh_makeshlibs -VUpstream-Version</b>
           Assuming the current version of the package is 1.1-3,
           generates a shlibs file that looks something like:
            libfoobar 1 libfoobar1 (&gt;= 1.1)

       <b>dh_makeshlibs -V 'libfoobar1 (&gt;= 1.0)'</b>
           Generates a shlibs file that looks something like:
             libfoobar 1 libfoobar1 (&gt;= 1.0)
</pre> <h2>
SEE ALSO </h2>
<pre>
       <a href="../man7/debhelper.7.html">debhelper(7)</a>

       This program is a part of debhelper.
</pre> <h2>
AUTHOR </h2>
<pre>
       Joey Hess &lt;joeyh@debian.org&gt;
</pre> <h2>
COLOPHON </h2>
<pre>
       This page is part of the <i>debhelper</i> (helper programs for
       debian/rules) project.  Information about the project can be
       found at [unknown -- if you know, please contact man-
       pages@man7.org] If you have a bug report for this manual page,
       send it to submit@bugs.debian.org.  This page was obtained from
       the project's upstream Git repository
       ⟨<a href="https://salsa.debian.org/debian/debhelper.git">https://salsa.debian.org/debian/debhelper.git</a>⟩ on 2024-06-14.
       (At that time, the date of the most recent commit that was found
       in the repository was 2024-06-09.)  If you discover any rendering
       problems in this HTML version of the page, or you believe there
       is a better or more up-to-date source for the page, or you have
       corrections or improvements to the information in this COLOPHON
       (which is <i>not</i> part of the original manual page), send a mail to
       man-pages@man7.org

<span class="footline">13.15.3                        2024-06-07               <i>DH_MAKESHLIBS</i>(1)</span>
</pre>  <p>Pages that refer to this page: <a href="dh_installdeb.1.html">dh_installdeb(1)</a>, <a href="../man7/debhelper.7.html">debhelper(7)</a>, <a href="../man7/debhelper-compat-upgrade-checklist.7.html">debhelper-compat-upgrade-checklist(7)</a> </p> <hr>         <div class="_attribution">
  <p class="_attribution-p">
    ...<br>
    <a href="https://man7.org/linux/man-pages/man1/dh_makeshlibs.1.html" class="_attribution-link">https://man7.org/linux/man-pages/man1/dh_makeshlibs.1.html</a>
  </p>
</div>
