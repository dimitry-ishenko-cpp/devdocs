<h1>stg-repair(1) — Linux manual page</h1>   <pre>
<span class="headline"><i>STG-REPAIR</i>(1)                 StGit Manual                 <i>STG-REPAIR</i>(1)</span>
</pre> <h2>
NAME </h2>
<pre>
       stg-repair - Repair stack after branch is modified with git
       commands
</pre> <h2>
SYNOPSIS </h2>
<pre>
       <i>stg repair</i> [OPTIONS]
</pre> <h2>
DESCRIPTION </h2>
<pre>
       If a branch with a StGit stack is modified with certain git
       commands such as <a href="git-commit.1.html">git-commit(1)</a>, <a href="git-pull.1.html">git-pull(1)</a>, <a href="git-merge.1.html">git-merge(1)</a>, or
       <a href="git-rebase.1.html">git-rebase(1)</a>, the StGit stack metadata will become inconsistent
       with the branch state. There are a few options for resolving this
       kind of situation:

        1. Use <a href="stg-undo.1.html">stg-undo(1)</a> to undo the effect of the git commands. Or
           similarly use <a href="stg-reset.1.html">stg-reset(1)</a> to reset the stack/branch to any
           previous stack state.

        2. Use <b>stg repair</b>. This will repair the StGit stack metadata to
           accommodate the modifications to the branch made by the git
           commands. Specifically, it will do the following:

           •   If regular git commits were made on top of the stack of
               StGit patches (i.e. by using plain <b>git commit</b>), <b>stg</b>
               <b>repair </b>will convert those commits to StGit patches,
               preserving their content.

           •   However, merge commits cannot become patches. So if a
               merge was committed on top of the stack, <b>stg repair </b>will
               mark all patches below the merge commit as unapplied,
               since they are no longer reachable. An alternative when
               this is not the desired behavior is to use <b>stg undo </b>to
               first get rid of the offending merge and then run <b>stg</b>
               <b>repair </b>again.

           •   The applied patches are supposed to be precisely those
               that are reachable from the branch head. If, for example,
               <a href="git-reset.1.html">git-reset(1)</a> was used to move the head, some applied
               patches may no longer be reachable and some unapplied
               patches may have become reachable. In this case, <b>stg</b>
               <b>repair </b>will correct the applied/unapplied state of such
               patches.

       <b>stg repair </b>will repair these inconsistencies reliably, so there
       are valid workflows where git commands are used followed by <b>stg</b>
       <b>repair</b>. For example, new patches can be created by first making
       commits with a graphical commit tool and then running <b>stg repair</b>
       to convert those commits into patches.
</pre> <h2>
STGIT </h2>
<pre>
       Part of the StGit suite - see <a href="stg.1.html">stg(1)</a>
</pre> <h2>
COLOPHON </h2>
<pre>
       This page is part of the <i>stgit</i> (Stacked Git) project.
       Information about the project can be found at 
       ⟨<a href="http://www.procode.org/stgit/">http://www.procode.org/stgit/</a>⟩.  If you have a bug report for
       this manual page, see ⟨<a href="http://www.procode.org/stgit/">http://www.procode.org/stgit/</a>⟩.  This page
       was obtained from the project's upstream Git repository
       ⟨<a href="https://github.com/stacked-git/stgit.git">https://github.com/stacked-git/stgit.git</a>⟩ on 2024-06-14.  (At
       that time, the date of the most recent commit that was found in
       the repository was 2024-05-22.)  If you discover any rendering
       problems in this HTML version of the page, or you believe there
       is a better or more up-to-date source for the page, or you have
       corrections or improvements to the information in this COLOPHON
       (which is <i>not</i> part of the original manual page), send a mail to
       man-pages@man7.org

<span class="footline">StGit 2.4.7                    06/14/2024                  <i>STG-REPAIR</i>(1)</span>
</pre>  <p>Pages that refer to this page: <a href="stg.1.html">stg(1)</a> </p> <hr>         <div class="_attribution">
  <p class="_attribution-p">
    ...<br>
    <a href="https://man7.org/linux/man-pages/man1/stg-repair.1.html" class="_attribution-link">https://man7.org/linux/man-pages/man1/stg-repair.1.html</a>
  </p>
</div>
