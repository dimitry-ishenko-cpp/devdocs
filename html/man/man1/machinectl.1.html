<h1>machinectl(1) — Linux manual page</h1>   <pre>
<span class="headline"><i>MACHINECTL</i>(1)                  machinectl                  <i>MACHINECTL</i>(1)</span>
</pre> <h2>
NAME </h2>
<pre>
       machinectl - Control the systemd machine manager
</pre> <h2>
SYNOPSIS </h2>
<pre>

       <b>machinectl </b>[OPTIONS...] {COMMAND} [NAME...]
</pre> <h2>
DESCRIPTION </h2>
<pre>
       <b>machinectl </b>may be used to introspect and control the state of the
       <a href="systemd.1.html">systemd(1)</a> virtual machine and container registration manager
       <a href="../man8/systemd-machined.service.8.html">systemd-machined.service(8)</a>.

       <b>machinectl </b>may be used to execute operations on machines and
       images. Machines in this sense are considered running instances
       of:

       •   Virtual Machines (VMs) that virtualize hardware to run full
           operating system (OS) instances (including their kernels) in
           a virtualized environment on top of the host OS.

       •   Containers that share the hardware and OS kernel with the
           host OS, in order to run OS userspace instances on top the
           host OS.

       •   The host system itself.

       Machines are identified by names that follow the same rules as
       UNIX and DNS hostnames. For details, see below.

       Machines are instantiated from disk or file system images that
       frequently — but not necessarily — carry the same name as
       machines running from them. Images in this sense may be:

       •   Directory trees containing an OS, including the top-level
           directories /usr/, /etc/, and so on.

       •   btrfs subvolumes containing OS trees, similar to regular
           directory trees.

       •   Binary "raw" disk image files containing MBR or GPT partition
           tables and Linux file systems.

       •   Similarly, block devices containing MBR or GPT partition
           tables and file systems.

       •   The file system tree of the host OS itself.

       Images may be downloaded, imported and exported via the
       <a href="importctl.1.html">importctl(1)</a> tool.
</pre> <h2>
COMMANDS </h2>
<pre>
       The following commands are understood:

   <b>Machine Commands</b>
       <b>list</b>
           List currently running (online) virtual machines and
           containers. To enumerate machine images that can be started,
           use <b>list-images </b>(see below). Note that this command hides the
           special ".host" machine by default. Use the <b>--all </b>switch to
           show it.

           Added in version 206.

       <b>status </b><i>NAME</i>...
           Show runtime status information about one or more virtual
           machines and containers, followed by the most recent log data
           from the journal. This function is intended to generate
           human-readable output. If you are looking for
           computer-parsable output, use <b>show </b>instead. Note that the log
           data shown is reported by the virtual machine or container
           manager, and frequently contains console output of the
           machine, but not necessarily journal contents of the machine
           itself.

           Added in version 206.

       <b>show </b>[<i>NAME</i>...]
           Show properties of one or more registered virtual machines or
           containers or the manager itself. If no argument is
           specified, properties of the manager will be shown. If a NAME
           is specified, properties of this virtual machine or container
           are shown. By default, empty properties are suppressed. Use
           <b>--all </b>to show those too. To select specific properties to
           show, use <b>--property=</b>. This command is intended to be used
           whenever computer-parsable output is required, and does not
           print the control group tree or journal entries. Use <b>status</b>
           if you are looking for formatted human-readable output.

           Added in version 206.

       <b>start </b><i>NAME</i>...
           Start a container as a system service, using
           <a href="systemd-nspawn.1.html">systemd-nspawn(1)</a>. This starts systemd-nspawn@.service,
           instantiated for the specified machine name, similar to the
           effect of <b>systemctl start </b>on the service name.
           <b>systemd-nspawn </b>looks for a container image by the specified
           name in /var/lib/machines/ (and other search paths, see
           below) and runs it. Use <b>list-images </b>(see below) for listing
           available container images to start.

           Note that <a href="../man8/systemd-machined.service.8.html">systemd-machined.service(8)</a> also interfaces with a
           variety of other container and VM managers, <b>systemd-nspawn </b>is
           just one implementation of it. Most of the commands available
           in <b>machinectl </b>may be used on containers or VMs controlled by
           other managers, not just <b>systemd-nspawn</b>. Starting VMs and
           container images on those managers requires manager-specific
           tools.

           To interactively start a container on the command line with
           full access to the container's console, please invoke
           <b>systemd-nspawn </b>directly. To stop a running container use
           <b>machinectl poweroff</b>.

           Added in version 219.

       <b>login </b>[<i>NAME</i>]
           Open an interactive terminal login session in a container or
           on the local host. If an argument is supplied, it refers to
           the container machine to connect to. If none is specified, or
           the container name is specified as the empty string, or the
           special machine name ".host" (see below) is specified, the
           connection is made to the local host instead. This will
           create a TTY connection to a specific container or the local
           host and asks for the execution of a getty on it. Note that
           this is only supported for containers running <a href="systemd.1.html">systemd(1)</a> as
           init system.

           This command will open a full login prompt on the container
           or the local host, which then asks for username and password.
           Use <b>shell </b>(see below) or <a href="systemd-run.1.html">systemd-run(1)</a> with the <b>--machine=</b>
           switch to directly invoke a single command, either
           interactively or in the background.

           Added in version 209.

       <b>shell </b>[[<i>NAME</i>@]<i>NAME</i> [<i>PATH</i> [<i>ARGUMENTS</i>...]]]
           Open an interactive shell session in a container or on the
           local host. The first argument refers to the container
           machine to connect to. If none is specified, or the machine
           name is specified as the empty string, or the special machine
           name ".host" (see below) is specified, the connection is made
           to the local host instead. This works similarly to <b>login</b>, but
           immediately invokes a user process. This command runs the
           specified executable with the specified arguments, or the
           default shell for the user if none is specified, or /bin/sh
           if no default shell is found. By default, <b>--uid=</b>, or by
           prefixing the machine name with a username and an "@"
           character, a different user may be selected. Use <b>--setenv= </b>to
           set environment variables for the executed process.

           Note that <b>machinectl shell </b>does not propagate the exit
           code/status of the invoked shell process. Use <b>systemd-run</b>
           instead if that information is required (see below).

           Using the <b>shell </b>command without arguments (thus invoking the
           executed shell or command on the local host), is in many ways
           similar to a <a href="su.1.html">su(1)</a> session, but, unlike <b>su</b>, completely
           isolates the new session from the originating session, so
           that it shares no process or session properties and is in a
           clean well-defined state. It will be tracked in a new utmp,
           login, audit, security, and keyring sessions, and will not
           inherit any environment variables or resource limits, among
           other properties.

           Note that <a href="systemd-run.1.html">systemd-run(1)</a> with its <b>--machine= </b>switch may be
           used in place of the <b>machinectl shell </b>command, and allows
           non-interactive operation, more detailed and low-level
           configuration of the invoked unit, as well as access to
           runtime and exit code/status information of the invoked shell
           process. In particular, use <b>systemd-run</b>'s <b>--wait </b>switch to
           propagate exit status information of the invoked process. Use
           <b>systemd-run</b>'s <b>--pty </b>switch to acquire an interactive shell,
           similarly to <b>machinectl shell</b>. In general, <b>systemd-run </b>is
           preferable for scripting purposes. However, note that
           <b>systemd-run </b>might require higher privileges than <b>machinectl</b>
           <b>shell</b>.

           Added in version 225.

       <b>enable </b><i>NAME</i>..., <b>disable </b><i>NAME</i>...
           Enable or disable a container as a system service to start at
           system boot, using <a href="systemd-nspawn.1.html">systemd-nspawn(1)</a>. This enables or
           disables systemd-nspawn@.service, instantiated for the
           specified machine name, similarly to the effect of <b>systemctl</b>
           <b>enable </b>or <b>systemctl disable </b>on the service name.

           This command implicitly reloads the system manager
           configuration after completing the operation. Note that this
           command does not implicitly start or power off the containers
           that are being operated on. If this is desired, combine the
           command with the <b>--now </b>switch.

           Added in version 219.

       <b>poweroff </b><i>NAME</i>...
           Power off one or more containers. This will trigger a reboot
           by sending SIGRTMIN+4 to the container's init process, which
           causes systemd-compatible init systems to shut down cleanly.
           Use <b>stop </b>as alias for <b>poweroff</b>. This operation does not work
           on containers that do not run a <a href="systemd.1.html">systemd(1)</a>-compatible init
           system, such as sysvinit. Use <b>terminate </b>(see below) to
           immediately terminate a container or VM, without cleanly
           shutting it down.

           Added in version 212.

       <b>reboot </b><i>NAME</i>...
           Reboot one or more containers. This will trigger a reboot by
           sending SIGINT to the container's init process, which is
           roughly equivalent to pressing Ctrl+Alt+Del on a
           non-containerized system, and is compatible with containers
           running any system manager. Use <b>restart </b>as alias for <b>reboot</b>.

           Added in version 209.

       <b>terminate </b><i>NAME</i>...
           Immediately terminates a virtual machine or container,
           without cleanly shutting it down. This kills all processes of
           the virtual machine or container and deallocates all
           resources attached to that instance. Use <b>poweroff </b>to issue a
           clean shutdown request.

           Added in version 206.

       <b>kill </b><i>NAME</i>...
           Send a signal to one or more processes of the virtual machine
           or container. This means processes as seen by the host, not
           the processes inside the virtual machine or container. Use
           <b>--kill-whom= </b>to select which process to kill. Use <b>--signal=</b>
           to select the signal to send.

           Added in version 206.

       <b>bind </b><i>NAME PATH</i> [<i>PATH</i>]
           Bind mounts a file or directory from the host into the
           specified container. The first path argument is the source
           file or directory on the host, the second path argument is
           the destination file or directory in the container. When the
           latter is omitted, the destination path in the container is
           the same as the source path on the host. When combined with
           the <b>--read-only </b>switch, a ready-only bind mount is created.
           When combined with the <b>--mkdir </b>switch, the destination path
           is first created before the mount is applied. Note that this
           option is currently only supported for <a href="systemd-nspawn.1.html">systemd-nspawn(1)</a>
           containers, and only if user namespacing (<b>--private-users</b>) is
           not used. This command supports bind mounting directories,
           regular files, device nodes, <b>AF_UNIX </b>socket nodes, as well as
           FIFOs.

           Added in version 219.

       <b>copy-to </b><i>NAME PATH</i> [<i>PATH</i>] <b>--force</b>
           Copies files or directories from the host system into a
           running container. Takes a container name, followed by the
           source path on the host and the destination path in the
           container. If the destination path is omitted, the same as
           the source path is used.

           If host and container share the same user and group
           namespace, file ownership by numeric user ID and group ID is
           preserved for the copy, otherwise all files and directories
           in the copy will be owned by the root user and group (UID/GID
           0).

           Added in version 219.

       <b>copy-from </b><i>NAME PATH</i> [<i>PATH</i>] <b>--force</b>
           Copies files or directories from a container into the host
           system. Takes a container name, followed by the source path
           in the container and the destination path on the host. If the
           destination path is omitted, the same as the source path is
           used.

           If host and container share the same user and group
           namespace, file ownership by numeric user ID and group ID is
           preserved for the copy, otherwise all files and directories
           in the copy will be owned by the root user and group (UID/GID
           0).

           Added in version 219.

   <b>Image Commands</b>
       <b>list-images</b>
           Show a list of locally installed container and VM images.
           This enumerates all raw disk images and container directories
           and subvolumes in /var/lib/machines/ (and other search paths,
           see below). Use <b>start </b>(see above) to run a container off one
           of the listed images. Note that, by default, containers whose
           name begins with a dot (".") are not shown. To show these
           too, specify <b>--all</b>. Note that a special image ".host" always
           implicitly exists and refers to the image the host itself is
           booted from.

           Added in version 219.

       <b>image-status </b>[<i>NAME</i>...]
           Show terse status information about one or more container or
           VM images. This function is intended to generate
           human-readable output. Use <b>show-image </b>(see below) to generate
           computer-parsable output instead.

           Added in version 219.

       <b>show-image </b>[<i>NAME</i>...]
           Show properties of one or more registered virtual machine or
           container images, or the manager itself. If no argument is
           specified, properties of the manager will be shown. If a NAME
           is specified, properties of this virtual machine or container
           image are shown. By default, empty properties are suppressed.
           Use <b>--all </b>to show those too. To select specific properties to
           show, use <b>--property=</b>. This command is intended to be used
           whenever computer-parsable output is required. Use
           <b>image-status </b>if you are looking for formatted human-readable
           output.

           Added in version 219.

       <b>edit </b><i>NAME|FILE</i>
           Edit the settings file of the specified machines. For the
           format of the settings file, refer to <a href="../man5/systemd.nspawn.5.html">systemd.nspawn(5)</a>. If
           an existing settings file of the given machine can't be
           found, <b>edit </b>automatically create a new settings file from
           scratch under /etc/systemd/nspawn/.

           Added in version 254.

       <b>cat </b><i>NAME|FILE</i>
           Show the settings file of the specified machines.

           Added in version 254.

       <b>clone </b><i>NAME NAME</i>
           Clones a container or VM image. The arguments specify the
           name of the image to clone and the name of the newly cloned
           image. Note that plain directory container images are cloned
           into btrfs subvolume images with this command, if the
           underlying file system supports this. Note that cloning a
           container or VM image is optimized for file systems that
           support copy-on-write, and might not be efficient on others,
           due to file system limitations.

           Note that this command leaves hostname, machine ID and all
           other settings that could identify the instance unmodified.
           The original image and the cloned copy will hence share these
           credentials, and it might be necessary to manually change
           them in the copy.

           If combined with the <b>--read-only </b>switch a read-only cloned
           image is created.

           Added in version 219.

       <b>rename </b><i>NAME NAME</i>
           Renames a container or VM image. The arguments specify the
           name of the image to rename and the new name of the image.

           Added in version 219.

       <b>read-only </b><i>NAME</i> [<i>BOOL</i>]
           Marks or (unmarks) a container or VM image read-only. Takes a
           VM or container image name, followed by a boolean as
           arguments. If the boolean is omitted, positive is implied,
           i.e. the image is marked read-only.

           Added in version 219.

       <b>remove </b><i>NAME</i>...
           Removes one or more container or VM images. The special image
           ".host", which refers to the host's own directory tree, may
           not be removed.

           Added in version 219.

       <b>set-limit </b>[<i>NAME</i>] <i>BYTES</i>
           Sets the maximum size in bytes that a specific container or
           VM image, or all images, may grow up to on disk (disk quota).
           Takes either one or two parameters. The first, optional
           parameter refers to a container or VM image name. If
           specified, the size limit of the specified image is changed.
           If omitted, the overall size limit of the sum of all images
           stored locally is changed. The final argument specifies the
           size limit in bytes, possibly suffixed by the usual K, M, G,
           T units. If the size limit shall be disabled, specify "-" as
           size.

           Note that per-container size limits are only supported on
           btrfs file systems.

           Added in version 220.

       <b>clean</b>
           Remove hidden VM or container images (or all). This command
           removes all hidden machine images from /var/lib/machines/,
           i.e. those whose name begins with a dot. Use <b>machinectl</b>
           <b>list-images --all </b>to see a list of all machine images,
           including the hidden ones.

           When combined with the <b>--all </b>switch removes all images, not
           just hidden ones. This command effectively empties
           /var/lib/machines/.

           Note that commands such as <b>importctl pull-tar </b>or <b>importctl</b>
           <b>pull-raw </b>usually create hidden, read-only, unmodified machine
           images from the downloaded image first, before cloning a
           writable working copy of it, in order to avoid duplicate
           downloads in case of images that are reused multiple times.
           Use <b>machinectl clean </b>to remove old, hidden images created
           this way.

           Added in version 230.
</pre> <h2>
OPTIONS </h2>
<pre>
       The following options are understood:

       <b>-p</b>, <b>--property=</b>
           When showing machine or image properties, limit the output to
           certain properties as specified by the argument. If not
           specified, all set properties are shown. The argument should
           be a property name, such as "Name". If specified more than
           once, all properties with the specified names are shown.

           Added in version 206.

       <b>--value</b>
           When printing properties with <b>show</b>, only print the value, and
           skip the property name and "=".

           Added in version 230.

       <b>-P</b>
           Equivalent to <b>--value --property=</b>, i.e. shows the value of
           the property without the property name or "=". Note that
           using <b>-P </b>once will also affect all properties listed with
           <b>-p</b>/<b>--property=</b>.

           Added in version 256.

       <b>-a</b>, <b>--all</b>
           When showing machine or image properties, show all properties
           regardless of whether they are set or not.

           When listing VM or container images, do not suppress images
           beginning in a dot character (".").

           When cleaning VM or container images, remove all images, not
           just hidden ones.

           Added in version 206.

       <b>-l</b>, <b>--full</b>
           Do not ellipsize process tree entries or table. This implies
           <b>--max-addresses=full</b>.

           Added in version 206.

       <b>--kill-whom=</b>
           When used with <b>kill</b>, choose which processes to kill. Must be
           one of <b>leader</b>, or <b>all </b>to select whether to kill only the
           leader process of the machine or all processes of the
           machine. If omitted, defaults to <b>all</b>.

           Added in version 206.

       <b>-s</b>, <b>--signal=</b>
           When used with <b>kill</b>, choose which signal to send to selected
           processes. Must be one of the well-known signal specifiers
           such as <b>SIGTERM</b>, <b>SIGINT </b>or <b>SIGSTOP</b>. If omitted, defaults to
           <b>SIGTERM</b>.

           The special value "help" will list the known values and the
           program will exit immediately, and the special value "list"
           will list known values along with the numerical signal
           numbers and the program will exit immediately.

       <b>--uid=</b>
           When used with the <b>shell </b>command, chooses the user ID to open
           the interactive shell session as. If the argument to the
           <b>shell </b>command also specifies a user name, this option is
           ignored. If the name is not specified in either way, "root"
           will be used by default. Note that this switch is not
           supported for the <b>login </b>command (see below).

           Added in version 225.

       <b>-E </b><i>NAME</i><b>[=</b><i>VALUE</i><b>]</b>, <b>--setenv=</b><i>NAME</i><b>[=</b><i>VALUE</i><b>]</b>
           When used with the <b>shell </b>command, sets an environment
           variable for the executed shell. This option may be used more
           than once to set multiple variables. When "=" and <i>VALUE</i> are
           omitted, the value of the variable with the same name in the
           program environment will be used.

           Note that this option is not supported for the <b>login </b>command.

           Added in version 230.

       <b>--mkdir</b>
           When used with <b>bind</b>, creates the destination file or
           directory before applying the bind mount. Note that even
           though the name of this option suggests that it is suitable
           only for directories, this option also creates the
           destination file node to mount over if the object to mount is
           not a directory, but a regular file, device node, socket or
           FIFO.

           Added in version 219.

       <b>--read-only</b>
           When used with <b>bind</b>, creates a read-only bind mount.

           When used with <b>clone </b>a read-only container or VM image is
           created.

           Added in version 219.

       <b>-n</b>, <b>--lines=</b>
           When used with <b>status</b>, controls the number of journal lines
           to show, counting from the most recent ones. Takes a positive
           integer argument. Defaults to 10.

           Added in version 219.

       <b>-o</b>, <b>--output=</b>
           When used with <b>status</b>, controls the formatting of the journal
           entries that are shown. For the available choices, see
           <a href="journalctl.1.html">journalctl(1)</a>. Defaults to "short".

           Added in version 219.

       <b>--runner=nspawn</b>|<b>vmspawn</b>
           When operating on machines choose whether to use
           <a href="systemd-nspawn.1.html">systemd-nspawn(1)</a> or <a href="systemd-vmspawn.1.html">systemd-vmspawn(1)</a>. By default
           <a href="systemd-nspawn.1.html">systemd-nspawn(1)</a> is used.

           Added in version 256.

       <b>-V</b>
           <b>-V </b>is a shorthand for <b>--runner=vmspawn</b>.

           Added in version 256.

       <b>--now</b>
           When used with <b>enable </b>or <b>disable</b>, the containers will also be
           started or powered off. The start or poweroff operation is
           only carried out when the respective enable or disable
           operation has been successful.

           Added in version 253.

       <b>--force</b>
           Replace target file when copying files.

           Added in version 219.

       <b>--max-addresses=</b>
           When used with the <b>list-machines </b>command, limits the number
           of IP addresses shown for every machine. Defaults to 1. All
           addresses can be requested with "all". If the limit is 0, the
           address column is not shown. Otherwise, if the machine has
           more addresses than shown, "..."  follows the last address.

           Added in version 232.

       <b>-q</b>, <b>--quiet</b>
           Suppresses additional informational output while running.

           Added in version 236.

       <b>-H</b>, <b>--host=</b>
           Execute the operation remotely. Specify a hostname, or a
           username and hostname separated by "@", to connect to. The
           hostname may optionally be suffixed by a port ssh is
           listening on, separated by ":", and then a container name,
           separated by "/", which connects directly to a specific
           container on the specified host. This will use SSH to talk to
           the remote machine manager instance. Container names may be
           enumerated with <b>machinectl -H </b><i>HOST</i>. Put IPv6 addresses in
           brackets.

       <b>-M</b>, <b>--machine=</b>
           Connect to <a href="../man8/systemd-machined.service.8.html">systemd-machined.service(8)</a> running in a local
           container, to perform the specified operation within the
           container.

           Added in version 235.

       <b>--no-pager</b>
           Do not pipe output into a pager.

       <b>--no-legend</b>
           Do not print the legend, i.e. column headers and the footer
           with hints.

       <b>--no-ask-password</b>
           Do not query the user for authentication for privileged
           operations.

       <b>-h</b>, <b>--help</b>
           Print a short help text and exit.

       <b>--version</b>
           Print a short version string and exit.
</pre> <h2>
MACHINE AND IMAGE NAMES </h2>
<pre>
       The <b>machinectl </b>tool operates on machines and images whose names
       must be chosen following strict rules. Machine names must be
       suitable for use as hostnames following a conservative subset of
       DNS and UNIX/Linux semantics. Specifically, they must consist of
       one or more non-empty label strings, separated by dots. No
       leading or trailing dots are allowed. No sequences of multiple
       dots are allowed. The label strings may only consist of
       alphanumeric characters as well as the dash and underscore. The
       maximum length of a machine name is 64 characters.

       A special machine with the name ".host" refers to the running
       host system itself. This is useful for execution operations or
       inspecting the host system as well. Note that <b>machinectl list</b>
       will not show this special machine unless the <b>--all </b>switch is
       specified.

       Requirements on image names are less strict, however, they must
       be valid UTF-8, must be suitable as file names (hence not be the
       single or double dot, and not include a slash), and may not
       contain control characters. Since many operations search for an
       image by the name of a requested machine, it is recommended to
       name images in the same strict fashion as machines.

       A special image with the name ".host" refers to the image of the
       running host system. It hence conceptually maps to the special
       ".host" machine name described above. Note that <b>machinectl</b>
       <b>list-images </b>will not show this special image either, unless <b>--all</b>
       is specified.
</pre> <h2>
FILES AND DIRECTORIES </h2>
<pre>
       Machine images are preferably stored in /var/lib/machines/, but
       are also searched for in /usr/local/lib/machines/ and
       /usr/lib/machines/. For compatibility reasons, the directory
       /var/lib/container/ is searched, too. Note that images stored
       below /usr/ are always considered read-only. It is possible to
       symlink machines images from other directories into
       /var/lib/machines/ to make them available for control with
       <b>machinectl</b>.

       Note that some image operations are only supported, efficient or
       atomic on btrfs file systems.

       Disk images are understood by <a href="systemd-nspawn.1.html">systemd-nspawn(1)</a> and <b>machinectl </b>in
       three formats:

       •   A simple directory tree, containing the files and directories
           of the container to boot.

       •   Subvolumes (on btrfs file systems), which are similar to the
           simple directories, described above. However, they have
           additional benefits, such as efficient cloning and quota
           reporting.

       •   "Raw" disk images, i.e. binary images of disks with a GPT or
           MBR partition table. Images of this type are regular files
           with the suffix ".raw".

       See <a href="systemd-nspawn.1.html">systemd-nspawn(1)</a> for more information on image formats, in
       particular its <b>--directory= </b>and <b>--image= </b>options.
</pre> <h2>
EXAMPLES </h2>
<pre>
       <b>Example 1. Download an Ubuntu RAW image, set a root password in</b>
       <b>it, start it as a service</b>

           # importctl pull-raw -mN \
                 <a href="https://cloud-images.ubuntu.com/jammy/current/jammy-server-cloudimg-amd64-disk-kvm.img">https://cloud-images.ubuntu.com/jammy/current/jammy-server-cloudimg-amd64-disk-kvm.img</a> \
                 jammy
           # systemd-firstboot --image=/var/lib/machines/jammy.raw --prompt-root-password --force
           # machinectl start jammy
           # machinectl login jammy

       This downloads the specified .raw image and makes it available
       under the local name "jammy". Then, a root password is set with
       <a href="systemd-firstboot.1.html">systemd-firstboot(1)</a>. Afterwards the machine is started as system
       service. With the last command a login prompt into the container
       is requested.
</pre> <h2>
EXIT STATUS </h2>
<pre>
       On success, 0 is returned, a non-zero failure code otherwise.
</pre> <h2>
ENVIRONMENT </h2>
<pre>
       <i>$SYSTEMD_LOG_LEVEL</i>
           The maximum log level of emitted messages (messages with a
           higher log level, i.e. less important ones, will be
           suppressed). Takes a comma-separated list of values. A value
           may be either one of (in order of decreasing importance)
           <b>emerg</b>, <b>alert</b>, <b>crit</b>, <b>err</b>, <b>warning</b>, <b>notice</b>, <b>info</b>, <b>debug</b>, or an
           integer in the range 0...7. See <a href="../man3/syslog.3.html">syslog(3)</a> for more
           information. Each value may optionally be prefixed with one
           of <b>console</b>, <b>syslog</b>, <b>kmsg </b>or <b>journal </b>followed by a colon to
           set the maximum log level for that specific log target (e.g.
           <b>SYSTEMD_LOG_LEVEL=debug,console:info </b>specifies to log at
           debug level except when logging to the console which should
           be at info level). Note that the global maximum log level
           takes priority over any per target maximum log levels.

       <i>$SYSTEMD_LOG_COLOR</i>
           A boolean. If true, messages written to the tty will be
           colored according to priority.

           This setting is only useful when messages are written
           directly to the terminal, because <a href="journalctl.1.html">journalctl(1)</a> and other
           tools that display logs will color messages based on the log
           level on their own.

       <i>$SYSTEMD_LOG_TIME</i>
           A boolean. If true, console log messages will be prefixed
           with a timestamp.

           This setting is only useful when messages are written
           directly to the terminal or a file, because <a href="journalctl.1.html">journalctl(1)</a> and
           other tools that display logs will attach timestamps based on
           the entry metadata on their own.

       <i>$SYSTEMD_LOG_LOCATION</i>
           A boolean. If true, messages will be prefixed with a filename
           and line number in the source code where the message
           originates.

           Note that the log location is often attached as metadata to
           journal entries anyway. Including it directly in the message
           text can nevertheless be convenient when debugging programs.

       <i>$SYSTEMD_LOG_TID</i>
           A boolean. If true, messages will be prefixed with the
           current numerical thread ID (TID).

           Note that the this information is attached as metadata to
           journal entries anyway. Including it directly in the message
           text can nevertheless be convenient when debugging programs.

       <i>$SYSTEMD_LOG_TARGET</i>
           The destination for log messages. One of <b>console </b>(log to the
           attached tty), <b>console-prefixed </b>(log to the attached tty but
           with prefixes encoding the log level and "facility", see
           <a href="../man3/syslog.3.html">syslog(3)</a>, <b>kmsg </b>(log to the kernel circular log buffer),
           <b>journal </b>(log to the journal), <b>journal-or-kmsg </b>(log to the
           journal if available, and to kmsg otherwise), <b>auto </b>(determine
           the appropriate log target automatically, the default), <b>null</b>
           (disable log output).

       <i>$SYSTEMD_LOG_RATELIMIT_KMSG</i>
           Whether to ratelimit kmsg or not. Takes a boolean. Defaults
           to "true". If disabled, systemd will not ratelimit messages
           written to kmsg.

       <i>$SYSTEMD_PAGER</i>
           Pager to use when <b>--no-pager </b>is not given; overrides <i>$PAGER</i>.
           If neither <i>$SYSTEMD_PAGER</i> nor <i>$PAGER</i> are set, a set of
           well-known pager implementations are tried in turn, including
           <a href="less.1.html">less(1)</a> and <a href="more.1.html">more(1)</a>, until one is found. If no pager
           implementation is discovered no pager is invoked. Setting
           this environment variable to an empty string or the value
           "cat" is equivalent to passing <b>--no-pager</b>.

           Note: if <i>$SYSTEMD_PAGERSECURE</i> is not set, <i>$SYSTEMD_PAGER</i> (as
           well as <i>$PAGER</i>) will be silently ignored.

       <i>$SYSTEMD_LESS</i>
           Override the options passed to <b>less </b>(by default "FRSXMK").

           Users might want to change two options in particular:

           <b>K</b>
               This option instructs the pager to exit immediately when
               Ctrl+C is pressed. To allow <b>less </b>to handle Ctrl+C itself
               to switch back to the pager command prompt, unset this
               option.

               If the value of <i>$SYSTEMD_LESS</i> does not include "K", and
               the pager that is invoked is <b>less</b>, Ctrl+C will be ignored
               by the executable, and needs to be handled by the pager.

           <b>X</b>
               This option instructs the pager to not send termcap
               initialization and deinitialization strings to the
               terminal. It is set by default to allow command output to
               remain visible in the terminal even after the pager
               exits. Nevertheless, this prevents some pager
               functionality from working, in particular paged output
               cannot be scrolled with the mouse.

           Note that setting the regular <i>$LESS</i> environment variable has
           no effect for <b>less </b>invocations by systemd tools.

           See <a href="less.1.html">less(1)</a> for more discussion.

       <i>$SYSTEMD_LESSCHARSET</i>
           Override the charset passed to <b>less </b>(by default "utf-8", if
           the invoking terminal is determined to be UTF-8 compatible).

           Note that setting the regular <i>$LESSCHARSET</i> environment
           variable has no effect for <b>less </b>invocations by systemd tools.

       <i>$SYSTEMD_PAGERSECURE</i>
           Takes a boolean argument. When true, the "secure" mode of the
           pager is enabled; if false, disabled. If <i>$SYSTEMD_PAGERSECURE</i>
           is not set at all, secure mode is enabled if the effective
           UID is not the same as the owner of the login session, see
           <a href="../man2/geteuid.2.html">geteuid(2)</a> and <a href="../man3/sd_pid_get_owner_uid.3.html">sd_pid_get_owner_uid(3)</a>. In secure mode,
           <b>LESSSECURE=1 </b>will be set when invoking the pager, and the
           pager shall disable commands that open or create new files or
           start new subprocesses. When <i>$SYSTEMD_PAGERSECURE</i> is not set
           at all, pagers which are not known to implement secure mode
           will not be used. (Currently only <a href="less.1.html">less(1)</a> implements secure
           mode.)

           Note: when commands are invoked with elevated privileges, for
           example under <a href="../man8/sudo.8.html">sudo(8)</a> or <b>pkexec</b>(1), care must be taken to
           ensure that unintended interactive features are not enabled.
           "Secure" mode for the pager may be enabled automatically as
           describe above. Setting <i>SYSTEMD_PAGERSECURE=0</i> or not removing
           it from the inherited environment allows the user to invoke
           arbitrary commands. Note that if the <i>$SYSTEMD_PAGER</i> or <i>$PAGER</i>
           variables are to be honoured, <i>$SYSTEMD_PAGERSECURE</i> must be
           set too. It might be reasonable to completely disable the
           pager using <b>--no-pager </b>instead.

       <i>$SYSTEMD_COLORS</i>
           Takes a boolean argument. When true, <b>systemd </b>and related
           utilities will use colors in their output, otherwise the
           output will be monochrome. Additionally, the variable can
           take one of the following special values: "16", "256" to
           restrict the use of colors to the base 16 or 256 ANSI colors,
           respectively. This can be specified to override the automatic
           decision based on <i>$TERM</i> and what the console is connected to.

       <i>$SYSTEMD_URLIFY</i>
           The value must be a boolean. Controls whether clickable links
           should be generated in the output for terminal emulators
           supporting this. This can be specified to override the
           decision that <b>systemd </b>makes based on <i>$TERM</i> and other
           conditions.
</pre> <h2>
SEE ALSO </h2>
<pre>
       <a href="systemd.1.html">systemd(1)</a>, <a href="../man8/systemd-machined.service.8.html">systemd-machined.service(8)</a>, <a href="systemd-nspawn.1.html">systemd-nspawn(1)</a>,
       <a href="../man7/systemd.special.7.html">systemd.special(7)</a>, <a href="importctl.1.html">importctl(1)</a>, <a href="tar.1.html">tar(1)</a>, <b>xz</b>(1), <b>gzip</b>(1),
       <b>bzip2</b>(1)
</pre> <h2>
COLOPHON </h2>
<pre>
       This page is part of the <i>systemd</i> (systemd system and service
       manager) project.  Information about the project can be found at
       ⟨<a href="http://www.freedesktop.org/wiki/Software/systemd">http://www.freedesktop.org/wiki/Software/systemd</a>⟩.  If you have
       a bug report for this manual page, see
       ⟨<a href="http://www.freedesktop.org/wiki/Software/systemd/#bugreports">http://www.freedesktop.org/wiki/Software/systemd/#bugreports</a>⟩.
       This page was obtained from the project's upstream Git repository
       ⟨<a href="https://github.com/systemd/systemd.git">https://github.com/systemd/systemd.git</a>⟩ on 2024-06-14.  (At that
       time, the date of the most recent commit that was found in the
       repository was 2024-06-13.)  If you discover any rendering
       problems in this HTML version of the page, or you believe there
       is a better or more up-to-date source for the page, or you have
       corrections or improvements to the information in this COLOPHON
       (which is <i>not</i> part of the original manual page), send a mail to
       man-pages@man7.org

<span class="footline">systemd 257~devel                                          <i>MACHINECTL</i>(1)</span>
</pre>  <p>Pages that refer to this page: <a href="busctl.1.html">busctl(1)</a>, <a href="importctl.1.html">importctl(1)</a>, <a href="run0.1.html">run0(1)</a>, <a href="systemctl.1.html">systemctl(1)</a>, <a href="systemd-nspawn.1.html">systemd-nspawn(1)</a>, <a href="systemd-run.1.html">systemd-run(1)</a>, <a href="systemd-vmspawn.1.html">systemd-vmspawn(1)</a>, <a href="../man3/sd_bus_default.3.html">sd_bus_default(3)</a>, <a href="../man3/sd_bus_set_address.3.html">sd_bus_set_address(3)</a>, <a href="../man7/systemd.directives.7.html">systemd.directives(7)</a>, <a href="../man7/systemd.index.7.html">systemd.index(7)</a>, <a href="../man8/nss-mymachines.8.html">nss-mymachines(8)</a>, <a href="../man8/systemd-machined.service.8.html">systemd-machined.service(8)</a> </p> <hr>         <div class="_attribution">
  <p class="_attribution-p">
    ...<br>
    <a href="https://man7.org/linux/man-pages/man1/machinectl.1.html" class="_attribution-link">https://man7.org/linux/man-pages/man1/machinectl.1.html</a>
  </p>
</div>
