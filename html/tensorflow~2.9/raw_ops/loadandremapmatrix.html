<h1 class="devsite-page-title">tf.raw_ops.LoadAndRemapMatrix</h1> <devsite-bookmark></devsite-bookmark>       <p>Loads a 2-D (matrix) <code translate="no" dir="ltr">Tensor</code> with name <code translate="no" dir="ltr">old_tensor_name</code> from the checkpoint</p> <section class="expandable"> <h4 class="showalways" id="view-aliases" data-text="View aliases">View aliases</h4> <p> <b>Compat aliases for migration</b> </p>
<p>See <a href="https://www.tensorflow.org/guide/migrate">Migration guide</a> for more details.</p> <p><a href="https://www.tensorflow.org/api_docs/python/tf/raw_ops/LoadAndRemapMatrix"><code translate="no" dir="ltr">tf.compat.v1.raw_ops.LoadAndRemapMatrix</code></a></p> </section> <pre class="devsite-click-to-copy prettyprint lang-py tfo-signature-link" translate="no" dir="ltr" data-language="cpp">
tf.raw_ops.LoadAndRemapMatrix(
    ckpt_path,
    old_tensor_name,
    row_remapping,
    col_remapping,
    initializing_values,
    num_rows,
    num_cols,
    max_rows_in_memory=-1,
    name=None
)
</pre>  <p>at <code translate="no" dir="ltr">ckpt_path</code> and potentially reorders its rows and columns using the specified remappings.</p> <p>Most users should use one of the wrapper initializers (such as <code translate="no" dir="ltr">tf.contrib.framework.load_and_remap_matrix_initializer</code>) instead of this function directly.</p> <p>The remappings are 1-D tensors with the following properties:</p> <ul> <li>
<code translate="no" dir="ltr">row_remapping</code> must have exactly <code translate="no" dir="ltr">num_rows</code> entries. Row <code translate="no" dir="ltr">i</code> of the output matrix will be initialized from the row corresponding to index <code translate="no" dir="ltr">row_remapping[i]</code> in the old <code translate="no" dir="ltr">Tensor</code> from the checkpoint.</li> <li>
<code translate="no" dir="ltr">col_remapping</code> must have either 0 entries (indicating that no column reordering is needed) or <code translate="no" dir="ltr">num_cols</code> entries. If specified, column <code translate="no" dir="ltr">j</code> of the output matrix will be initialized from the column corresponding to index <code translate="no" dir="ltr">col_remapping[j]</code> in the old <code translate="no" dir="ltr">Tensor</code> from the checkpoint.</li> <li>A value of -1 in either of the remappings signifies a "missing" entry. In that case, values from the <code translate="no" dir="ltr">initializing_values</code> tensor will be used to fill that missing row or column. If <code translate="no" dir="ltr">row_remapping</code> has <code translate="no" dir="ltr">r</code> missing entries and <code translate="no" dir="ltr">col_remapping</code> has <code translate="no" dir="ltr">c</code> missing entries, then the following condition must be true:</li> </ul> <p><code translate="no" dir="ltr">(r * num_cols) + (c * num_rows) - (r * c) == len(initializing_values)</code></p> <p>The remapping tensors can be generated using the GenerateVocabRemapping op.</p> <p>As an example, with row_remapping = [1, 0, -1], col_remapping = [0, 2, -1], initializing_values = [0.5, -0.5, 0.25, -0.25, 42], and w(i, j) representing the value from row i, column j of the old tensor in the checkpoint, the output matrix will look like the following:</p> <p>[[w(1, 0), w(1, 2), 0.5], [w(0, 0), w(0, 2), -0.5], [0.25, -0.25, 42]]</p>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Args</th></tr> 
<tr> <td> <code translate="no" dir="ltr">ckpt_path</code> </td> <td> A <code translate="no" dir="ltr">Tensor</code> of type <code translate="no" dir="ltr">string</code>. Path to the TensorFlow checkpoint (version 2, <code translate="no" dir="ltr">TensorBundle</code>) from which the old matrix <code translate="no" dir="ltr">Tensor</code> will be loaded. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">old_tensor_name</code> </td> <td> A <code translate="no" dir="ltr">Tensor</code> of type <code translate="no" dir="ltr">string</code>. Name of the 2-D <code translate="no" dir="ltr">Tensor</code> to load from checkpoint. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">row_remapping</code> </td> <td> A <code translate="no" dir="ltr">Tensor</code> of type <code translate="no" dir="ltr">int64</code>. An int <code translate="no" dir="ltr">Tensor</code> of row remappings (generally created by <code translate="no" dir="ltr">generate_vocab_remapping</code>). Even if no row remapping is needed, this must still be an index-valued Tensor (e.g. [0, 1, 2, ...]), or a shifted index-valued <code translate="no" dir="ltr">Tensor</code> (e.g. [8, 9, 10, ...], for partitioned <code translate="no" dir="ltr">Variables</code>). </td> </tr>
<tr> <td> <code translate="no" dir="ltr">col_remapping</code> </td> <td> A <code translate="no" dir="ltr">Tensor</code> of type <code translate="no" dir="ltr">int64</code>. An int <code translate="no" dir="ltr">Tensor</code> of column remappings (generally created by <code translate="no" dir="ltr">generate_vocab_remapping</code>). May be a size-0 <code translate="no" dir="ltr">Tensor</code> if only row remapping is to be done (e.g. column ordering is the same). </td> </tr>
<tr> <td> <code translate="no" dir="ltr">initializing_values</code> </td> <td> A <code translate="no" dir="ltr">Tensor</code> of type <code translate="no" dir="ltr">float32</code>. A float <code translate="no" dir="ltr">Tensor</code> containing values to fill in for cells in the output matrix that are not loaded from the checkpoint. Length must be exactly the same as the number of missing / new cells. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">num_rows</code> </td> <td> An <code translate="no" dir="ltr">int</code> that is <code translate="no" dir="ltr">&gt;= 0</code>. Number of rows (length of the 1st dimension) in the output matrix. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">num_cols</code> </td> <td> An <code translate="no" dir="ltr">int</code> that is <code translate="no" dir="ltr">&gt;= 1</code>. Number of columns (length of the 2nd dimension) in the output matrix. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">max_rows_in_memory</code> </td> <td> An optional <code translate="no" dir="ltr">int</code>. Defaults to <code translate="no" dir="ltr">-1</code>. The maximum number of rows to load from the checkpoint at once. If less than or equal to 0, the entire matrix will be loaded into memory. Setting this arg trades increased disk reads for lower memory usage. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">name</code> </td> <td> A name for the operation (optional). </td> </tr> </table>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Returns</th></tr> <tr class="alt"> <td colspan="2"> A <code translate="no" dir="ltr">Tensor</code> of type <code translate="no" dir="ltr">float32</code>. </td> </tr> 
</table>  <devsite-thumb-rating position="footer"> </devsite-thumb-rating><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2022 The TensorFlow Authors. All rights reserved.<br>Licensed under the Creative Commons Attribution License 4.0.<br>Code samples licensed under the Apache 2.0 License.<br>
    <a href="https://www.tensorflow.org/versions/r2.9/api_docs/python/tf/raw_ops/LoadAndRemapMatrix" class="_attribution-link">https://www.tensorflow.org/versions/r2.9/api_docs/python/tf/raw_ops/LoadAndRemapMatrix</a>
  </p>
</div>
