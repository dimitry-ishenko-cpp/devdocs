<h1 class="devsite-page-title">tf.keras.preprocessing.image.DirectoryIterator</h1> <devsite-bookmark></devsite-bookmark>      <table class="tfo-notebook-buttons tfo-api nocontent" align="left">  <td> <a target="_blank" href="https://github.com/keras-team/keras/tree/v2.9.0/keras/preprocessing/image.py#L408-L556">  View source on GitHub </a> </td> </table> <p>Iterator capable of reading images from a directory on disk.</p> <p>Inherits From: <a href="iterator.html"><code translate="no" dir="ltr">Iterator</code></a>, <a href="../../utils/sequence.html"><code translate="no" dir="ltr">Sequence</code></a></p> <section class="expandable"> <h4 class="showalways" id="view-aliases" data-text="View aliases">View aliases</h4> <p> <b>Compat aliases for migration</b> </p>
<p>See <a href="https://www.tensorflow.org/guide/migrate">Migration guide</a> for more details.</p> <p><a href="https://www.tensorflow.org/api_docs/python/tf/keras/preprocessing/image/DirectoryIterator"><code translate="no" dir="ltr">tf.compat.v1.keras.preprocessing.image.DirectoryIterator</code></a></p> </section> <pre class="devsite-click-to-copy prettyprint lang-py tfo-signature-link" translate="no" dir="ltr" data-language="cpp">
tf.keras.preprocessing.image.DirectoryIterator(
    directory,
    image_data_generator,
    target_size=(256, 256),
    color_mode='rgb',
    classes=None,
    class_mode='categorical',
    batch_size=32,
    shuffle=True,
    seed=None,
    data_format=None,
    save_to_dir=None,
    save_prefix='',
    save_format='png',
    follow_links=False,
    subset=None,
    interpolation='nearest',
    keep_aspect_ratio=False,
    dtype=None
)
</pre>  <aside class="deprecated"><strong>Deprecated:</strong><span> <a href="directoryiterator.html"><code translate="no" dir="ltr">tf.keras.preprocessing.image.DirectoryIterator</code></a> is not recommended for new code. Prefer loading images with <a href="../../utils/image_dataset_from_directory.html"><code translate="no" dir="ltr">tf.keras.utils.image_dataset_from_directory</code></a> and transforming the output <a href="../../../data/dataset.html"><code translate="no" dir="ltr">tf.data.Dataset</code></a> with preprocessing layers. For more information, see the tutorials for <a href="https://www.tensorflow.org/tutorials/load_data/images">loading images</a> and <a href="https://www.tensorflow.org/tutorials/images/data_augmentation">augmenting images</a>, as well as the <a href="https://www.tensorflow.org/guide/keras/preprocessing_layers">preprocessing layer guide</a>.</span></aside>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Args</th></tr> 
<tr> <td> <code translate="no" dir="ltr">directory</code> </td> <td> Path to the directory to read images from. Each subdirectory in this directory will be considered to contain images from one class, or alternatively you could specify class subdirectories via the <code translate="no" dir="ltr">classes</code> argument. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">image_data_generator</code> </td> <td> Instance of <code translate="no" dir="ltr">ImageDataGenerator</code> to use for random transformations and normalization. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">target_size</code> </td> <td> tuple of integers, dimensions to resize input images to. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">color_mode</code> </td> <td> One of <code translate="no" dir="ltr">"rgb"</code>, <code translate="no" dir="ltr">"rgba"</code>, <code translate="no" dir="ltr">"grayscale"</code>. Color mode to read images. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">classes</code> </td> <td> Optional list of strings, names of subdirectories containing images from each class (e.g. <code translate="no" dir="ltr">["dogs", "cats"]</code>). It will be computed automatically if not set. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">class_mode</code> </td> <td> Mode for yielding the targets: <ul> <li>
<code translate="no" dir="ltr">"binary"</code>: binary targets (if there are only two classes),</li> <li>
<code translate="no" dir="ltr">"categorical"</code>: categorical targets,</li> <li>
<code translate="no" dir="ltr">"sparse"</code>: integer targets,</li> <li>
<code translate="no" dir="ltr">"input"</code>: targets are images identical to input images (mainly used to work with autoencoders),</li> <li>
<code translate="no" dir="ltr">None</code>: no targets get yielded (only input images are yielded). </li>
</ul>
</td> </tr>
<tr> <td> <code translate="no" dir="ltr">batch_size</code> </td> <td> Integer, size of a batch. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">shuffle</code> </td> <td> Boolean, whether to shuffle the data between epochs. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">seed</code> </td> <td> Random seed for data shuffling. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">data_format</code> </td> <td> String, one of <code translate="no" dir="ltr">channels_first</code>, <code translate="no" dir="ltr">channels_last</code>. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">save_to_dir</code> </td> <td> Optional directory where to save the pictures being yielded, in a viewable format. This is useful for visualizing the random transformations being applied, for debugging purposes. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">save_prefix</code> </td> <td> String prefix to use for saving sample images (if <code translate="no" dir="ltr">save_to_dir</code> is set). </td> </tr>
<tr> <td> <code translate="no" dir="ltr">save_format</code> </td> <td> Format to use for saving sample images (if <code translate="no" dir="ltr">save_to_dir</code> is set). </td> </tr>
<tr> <td> <code translate="no" dir="ltr">subset</code> </td> <td> Subset of data (<code translate="no" dir="ltr">"training"</code> or <code translate="no" dir="ltr">"validation"</code>) if validation_split is set in ImageDataGenerator. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">interpolation</code> </td> <td> Interpolation method used to resample the image if the target size is different from that of the loaded image. Supported methods are "nearest", "bilinear", and "bicubic". If PIL version 1.1.3 or newer is installed, "lanczos" is also supported. If PIL version 3.4.0 or newer is installed, "box" and "hamming" are also supported. By default, "nearest" is used. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">keep_aspect_ratio</code> </td> <td> Boolean, whether to resize images to a target size without aspect ratio distortion. The image is cropped in the center with target aspect ratio before resizing. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">dtype</code> </td> <td> Dtype to use for generated arrays. </td> </tr> </table>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Attributes</th></tr> 
<tr> <td> <code translate="no" dir="ltr">filepaths</code> </td> <td> List of absolute paths to image files. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">labels</code> </td> <td> Class labels of every observation. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">sample_weight</code> </td> <td> 
</td> </tr> </table> <h2 id="methods" data-text="Methods">Methods</h2> <h3 id="next" data-text="next"><code translate="no" dir="ltr">next</code></h3> <p><a target="_blank" class="external" href="https://github.com/keras-team/keras/tree/v2.9.0/keras/preprocessing/image.py#L150-L160">View source</a></p> <pre class="devsite-click-to-copy prettyprint lang-py tfo-signature-link" translate="no" dir="ltr" data-language="cpp">
next()
</pre> <p>For python 2.x.</p>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Returns</th></tr> <tr class="alt"> <td colspan="2"> The next batch. </td> </tr> 
</table> <h3 id="on_epoch_end" data-text="on_epoch_end"><code translate="no" dir="ltr">on_epoch_end</code></h3> <p><a target="_blank" class="external" href="https://github.com/keras-team/keras/tree/v2.9.0/keras/preprocessing/image.py#L115-L116">View source</a></p> <pre class="devsite-click-to-copy prettyprint lang-py tfo-signature-link" translate="no" dir="ltr" data-language="cpp">
on_epoch_end()
</pre> <p>Method called at the end of every epoch.</p> <h3 id="reset" data-text="reset"><code translate="no" dir="ltr">reset</code></h3> <p><a target="_blank" class="external" href="https://github.com/keras-team/keras/tree/v2.9.0/keras/preprocessing/image.py#L118-L119">View source</a></p> <pre class="devsite-click-to-copy prettyprint lang-py tfo-signature-link" translate="no" dir="ltr" data-language="cpp">
reset()
</pre> <h3 id="set_processing_attrs" data-text="set_processing_attrs"><code translate="no" dir="ltr">set_processing_attrs</code></h3> <p><a target="_blank" class="external" href="https://github.com/keras-team/keras/tree/v2.9.0/keras/preprocessing/image.py#L250-L322">View source</a></p> <pre class="devsite-click-to-copy prettyprint lang-py tfo-signature-link" translate="no" dir="ltr" data-language="cpp">
set_processing_attrs(
    image_data_generator,
    target_size,
    color_mode,
    data_format,
    save_to_dir,
    save_prefix,
    save_format,
    subset,
    interpolation,
    keep_aspect_ratio
)
</pre> <p>Sets attributes to use later for processing files into a batch.</p>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Args</th></tr> 
<tr> <td> <code translate="no" dir="ltr">image_data_generator</code> </td> <td> Instance of <code translate="no" dir="ltr">ImageDataGenerator</code> to use for random transformations and normalization. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">target_size</code> </td> <td> tuple of integers, dimensions to resize input images to. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">color_mode</code> </td> <td> One of <code translate="no" dir="ltr">"rgb"</code>, <code translate="no" dir="ltr">"rgba"</code>, <code translate="no" dir="ltr">"grayscale"</code>. Color mode to read images. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">data_format</code> </td> <td> String, one of <code translate="no" dir="ltr">channels_first</code>, <code translate="no" dir="ltr">channels_last</code>. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">save_to_dir</code> </td> <td> Optional directory where to save the pictures being yielded, in a viewable format. This is useful for visualizing the random transformations being applied, for debugging purposes. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">save_prefix</code> </td> <td> String prefix to use for saving sample images (if <code translate="no" dir="ltr">save_to_dir</code> is set). </td> </tr>
<tr> <td> <code translate="no" dir="ltr">save_format</code> </td> <td> Format to use for saving sample images (if <code translate="no" dir="ltr">save_to_dir</code> is set). </td> </tr>
<tr> <td> <code translate="no" dir="ltr">subset</code> </td> <td> Subset of data (<code translate="no" dir="ltr">"training"</code> or <code translate="no" dir="ltr">"validation"</code>) if validation_split is set in ImageDataGenerator. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">interpolation</code> </td> <td> Interpolation method used to resample the image if the target size is different from that of the loaded image. Supported methods are "nearest", "bilinear", and "bicubic". If PIL version 1.1.3 or newer is installed, "lanczos" is also supported. If PIL version 3.4.0 or newer is installed, "box" and "hamming" are also supported. By default, "nearest" is used. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">keep_aspect_ratio</code> </td> <td> Boolean, whether to resize images to a target size without aspect ratio distortion. The image is cropped in the center with target aspect ratio before resizing. </td> </tr> </table> <h3 id="__getitem__" data-text="__getitem__"><code translate="no" dir="ltr">__getitem__</code></h3> <p><a target="_blank" class="external" href="https://github.com/keras-team/keras/tree/v2.9.0/keras/preprocessing/image.py#L98-L110">View source</a></p> <pre class="devsite-click-to-copy prettyprint lang-py tfo-signature-link" translate="no" dir="ltr" data-language="cpp">
__getitem__(
    idx
)
</pre> <p>Gets batch at position <code translate="no" dir="ltr">index</code>.</p>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Args</th></tr> 
<tr> <td> <code translate="no" dir="ltr">index</code> </td> <td> position of the batch in the Sequence. </td> </tr> </table>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Returns</th></tr> <tr class="alt"> <td colspan="2"> A batch </td> </tr> 
</table> <h3 id="__iter__" data-text="__iter__"><code translate="no" dir="ltr">__iter__</code></h3> <p><a target="_blank" class="external" href="https://github.com/keras-team/keras/tree/v2.9.0/keras/preprocessing/image.py#L142-L145">View source</a></p> <pre class="devsite-click-to-copy prettyprint lang-py tfo-signature-link" translate="no" dir="ltr" data-language="cpp">
__iter__()
</pre> <p>Create a generator that iterate over the Sequence.</p> <h3 id="__len__" data-text="__len__"><code translate="no" dir="ltr">__len__</code></h3> <p><a target="_blank" class="external" href="https://github.com/keras-team/keras/tree/v2.9.0/keras/preprocessing/image.py#L112-L113">View source</a></p> <pre class="devsite-click-to-copy prettyprint lang-py tfo-signature-link" translate="no" dir="ltr" data-language="cpp">
__len__()
</pre> <p>Number of batch in the Sequence.</p>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Returns</th></tr> <tr class="alt"> <td colspan="2"> The number of batches in the Sequence. </td> </tr> 
</table>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Class Variables</th></tr> 
<tr> <td> allowed_class_modes </td> <td> <pre class="prettyprint" translate="no" dir="ltr" data-language="cpp">{
 'binary',
 'categorical',
 'input',
 'sparse',
 None
}
</pre> 
</td> </tr>
<tr> <td> white_list_formats </td> <td> <code translate="no" dir="ltr">('png', 'jpg', 'jpeg', 'bmp', 'ppm', 'tif', 'tiff')</code> </td> </tr> </table>  <devsite-thumb-rating position="footer"> </devsite-thumb-rating><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2022 The TensorFlow Authors. All rights reserved.<br>Licensed under the Creative Commons Attribution License 4.0.<br>Code samples licensed under the Apache 2.0 License.<br>
    <a href="https://www.tensorflow.org/versions/r2.9/api_docs/python/tf/keras/preprocessing/image/DirectoryIterator" class="_attribution-link">https://www.tensorflow.org/versions/r2.9/api_docs/python/tf/keras/preprocessing/image/DirectoryIterator</a>
  </p>
</div>
