<h1 class="devsite-page-title">tf.compat.v1.keras.layers.enable_v2_dtype_behavior</h1> <devsite-bookmark></devsite-bookmark>       <p>Enable the V2 dtype behavior for Keras layers.</p> <pre class="devsite-click-to-copy prettyprint lang-py tfo-signature-link" translate="no" dir="ltr" data-language="cpp">
tf.compat.v1.keras.layers.enable_v2_dtype_behavior()
</pre>  <p>By default, the V2 dtype behavior is enabled in TensorFlow 2, so this function is only useful if <a href="../../disable_v2_behavior.html"><code translate="no" dir="ltr">tf.compat.v1.disable_v2_behavior</code></a> has been called. Since mixed precision requires V2 dtype behavior to be enabled, this function allows you to use mixed precision in Keras layers if <code translate="no" dir="ltr">disable_v2_behavior</code> has been called.</p> <p>When enabled, the dtype of Keras layers defaults to floatx (which is typically float32) instead of None. In addition, layers will automatically cast floating-point inputs to the layer's dtype.</p> <pre class="devsite-click-to-copy prettyprint lang-py" translate="no" dir="ltr" data-language="cpp">
x = tf.ones((4, 4, 4, 4), dtype='float64')
layer = tf.keras.layers.Conv2D(filters=4, kernel_size=2)
print(layer.dtype)  # float32 since V2 dtype behavior is enabled
float32
y = layer(x)  # Layer casts inputs since V2 dtype behavior is enabled
print(y.dtype.name)
float32
</pre> <p>A layer author can opt-out their layer from the automatic input casting by passing <code translate="no" dir="ltr">autocast=False</code> to the base Layer's constructor. This disables the autocasting part of the V2 behavior for that layer, but not the defaulting to floatx part of the V2 behavior.</p> <p>When a global <a href="../../../../keras/mixed_precision/policy.html"><code translate="no" dir="ltr">tf.keras.mixed_precision.Policy</code></a> is set, a Keras layer's dtype will default to the global policy instead of floatx. Layers will automatically cast inputs to the policy's compute_dtype.</p>  <devsite-thumb-rating position="footer"> </devsite-thumb-rating><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2022 The TensorFlow Authors. All rights reserved.<br>Licensed under the Creative Commons Attribution License 4.0.<br>Code samples licensed under the Apache 2.0 License.<br>
    <a href="https://www.tensorflow.org/versions/r2.9/api_docs/python/tf/compat/v1/keras/layers/enable_v2_dtype_behavior" class="_attribution-link">https://www.tensorflow.org/versions/r2.9/api_docs/python/tf/compat/v1/keras/layers/enable_v2_dtype_behavior</a>
  </p>
</div>
