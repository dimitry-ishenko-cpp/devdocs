  <h1 id="lesson-09-angular-services">Lesson 09: Angular services</h1> <p>This tutorial lesson demonstrates how to create an Angular service and use dependency injection to include it in your app.</p> <p><strong>Estimated time</strong>: ~15 minutes</p> <p><strong>Starting code:</strong> </p> <p><strong>Completed code:</strong> </p> <h2 id="what-youll-learn">What you'll learn</h2> <p>Your app has a service to serve the data to your app. At the end of this lesson, the service reads data from local, static data. In a later lesson, you'll update the service to get data from a web service.</p> <h2 id="conceptual-preview-of-services">Conceptual preview of services</h2> <p>This tutorial introduces Angular services and dependency injection.</p>  <h4 id="angular-services">Angular services</h4> <p><em>Angular services</em> provide a way for you to separate Angular app data and functions that can be used by multiple components in your app. To be used by multiple components, a service must be made <em>injectable</em>. Services that are injectable and used by a component become dependencies of that component. The component depends on those services and can't function without them.</p> <h4 id="dependency-injection">Dependency injection</h4> <p><em>Dependency injection</em> is the mechanism that manages the dependencies of an app's components and the services that other components can use.</p> <h2 id="step-1---create-a-new-service-for-your-app">Step 1 - Create a new service for your app</h2> <p>This step creates an injectable service for your app.</p> <p>In the <strong>Terminal</strong> pane of your IDE:</p> <ol> <li> <p>In your project directory, navigate to the <code>first-app</code> directory.</p> </li> <li> <p>In the <code>first-app</code> directory, run this command to create the new service.</p> <pre format="shell" data-language="shell">ng generate service housing --skip-tests</pre> </li> <li> <p>Run <code>ng serve</code> to build the app and serve it to <code>http://localhost:4200</code>.</p> </li> <li> <p>Confirm that the app builds without error. Correct any errors before you continue to the next step.</p> </li> </ol> <h2 id="step-2---add-static-data-to-the-new-service">Step 2 - Add static data to the new service</h2> <p>This step adds some sample data to your new service. In a later lesson, you'll replace the static data with a web interface to get data as you might in a real app. For now, your app's new service uses the data that has, so far, been created locally in <code>HomeComponent</code>.</p> <p>In the <strong>Edit</strong> pane of your IDE:</p> <ol> <li> <p>In <code>src/app/home/home.component.ts</code>, from <code>HomeComponent</code>, copy the <code>housingLocationList</code> variable and its array value.</p> </li> <li> <p>In <code>src/app/housing.service.ts</code>:</p> <ol> <li> <p>Inside the <code>HousingService</code> class, paste the variable that you copied from <code>HomeComponent</code> in the previous step.</p> </li> <li> <p>Inside the <code>HousingService</code> class, paste these functions after the data you just copied. These functions allow dependencies to access the service's data.</p> <pre header="Service functions in src/app/housing.service.ts" data-language="typescript">getAllHousingLocations(): HousingLocation[] {
  return this.housingLocationList;
}

getHousingLocationById(id: number): HousingLocation | undefined {
  return this.housingLocationList.find(housingLocation =&gt; housingLocation.id === id);
}</pre> <p>You will need these functions in a future lesson. For now, it is enough to understand that these functions return either a specific <code>HousingLocation</code> by id or the entire list.</p> </li> <li> <p>Add a file level import for the <code>HousingLocation</code>.</p> <pre header="Import HousingLocation type in  src/app/housing.service.ts" data-language="typescript">import { HousingLocation } from './housinglocation';</pre> </li> </ol> </li> <li> <p>Confirm that the app builds without error. Correct any errors before you continue to the next step.</p> </li> </ol> <h2 id="step-3---inject-the-new-service-into-homecomponent">Step 3 - Inject the new service into <code>HomeComponent</code>
</h2> <p>This step injects the new service into your app's <code>HomeComponent</code> so that it can read the app's data from a service. In a later lesson, you'll replace the static data with a live data source to get data as you might in a real app.</p> <p>In the <strong>Edit</strong> pane of your IDE, in <code>src/app/home/home.component.ts</code>:</p> <ol> <li> <p>At the top of <code>src/app/home/home.component.ts</code>, add the <code>inject</code> to the items imported from <code>@angular/core</code>. This will import the <code>inject</code> function into the <code>HomeComponent</code> class.</p> <pre header="Update to src/app/home/home.component.ts" data-language="typescript">import { Component, inject } from '@angular/core';</pre> </li> <li> <p>Add a new file level import for the <code>HousingService</code>:</p> <pre header="Add import to src/app/home/home.component.ts" data-language="typescript">import { HousingService } from '../housing.service';</pre> </li> <li> <p>From <code>HomeComponent</code>, delete the <code>housingLocationList</code> array entries and assign <code>housingLocationList</code> the value of empty array (<code>[]</code>). In a few steps you will update the code to pull the data from the <code>HousingService</code>.</p> </li> <li> <p>In <code>HomeComponent</code>, add the following code to inject the new service and initialize the data for the app. The <code>constructor</code> is the first function that runs when this component is created. The code in the <code>constructor</code> will assign the <code>housingLocationList</code> the value returned from the call to <code>getAllHousingLocations</code>.</p> <pre header="Initialize data from service in src/app/home/home.component.ts" data-language="typescript">housingLocationList: HousingLocation[] = [];
housingService: HousingService = inject(HousingService);

constructor() {
  this.housingLocationList = this.housingService.getAllHousingLocations();
}</pre> </li> <li> <p>Save the changes to <code>src/app/home/home.component.ts</code> and confirm your app builds without error. Correct any errors before you continue to the next step.</p> </li> </ol> <h2 id="lesson-review">Lesson review</h2> <p>In this lesson, you added an Angular service to your app and injected it into the <code>HomeComponent</code> class. This compartmentalizes how your app gets its data. For now, the new service gets its data from a static array of data. In a later lesson, you'll refactor the service to get its data from an API endpoint.</p> <p>If you are having any trouble with this lesson, you can review the completed code for it in the live example.</p> <h2 id="next-steps">Next steps</h2> <ul> <li><a href="first-app-lesson-10.html">Lesson 10 - Add routes to the application</a></li> </ul> <h2 id="more-information">More information</h2> <p>For more information about the topics covered in this lesson, visit:</p>  <ul> <li><a href="../../guide/creating-injectable-service.html">Creating an injectable service</a></li> <li><a href="../../guide/dependency-injection-overview.html">Dependency injection in Angular</a></li> <li><a href="cli/generate.html#service">ng generate service</a></li> <li><a href="cli/generate.html">ng generate</a></li> </ul> <div class="reviewed">Last reviewed on Sat Jul 15 2023</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010&ndash;2023 Google, Inc.<br>Licensed under the Creative Commons Attribution License 4.0.<br>
    <a href="https://angular.io/tutorial/first-app/first-app-lesson-09" class="_attribution-link">https://angular.io/tutorial/first-app/first-app-lesson-09</a>
  </p>
</div>
