  <h1 id="transition">transition</h1> <p><code class="api-type-label function">function</code></p>  <aio-toc class="embedded"></aio-toc> <div class="api-body">  <p>Declares an animation transition which is played when a certain specified condition is met.</p>  <div class="overload-info"> <h3 data-language="typescript"><code>transition(stateChangeExpr: string | ((fromState: string, toState: string, element?: any, params?: { [key: string]: any; }) =&gt; boolean), steps: AnimationMetadata | AnimationMetadata[], options: AnimationOptions = null): AnimationTransitionMetadata</code></h3> <h6 class="no-anchor" id="parameters">Parameters</h6> <table> <tbody> <tr class="function-overload-parameter"> <td class="param-name">  <code>stateChangeExpr</code> </td> <td class="param-type"><code>string | ((fromState: string, toState: string, element?: any, params?: { [key: string]: any; }) =&gt; boolean)</code></td> <td class="param-description"> <p>A string with a specific format or a function that specifies when the animation transition should occur (see <a href="transition.html#state-change-expression">State Change Expression</a>).</p> </td> </tr> <tr class="function-overload-parameter"> <td class="param-name">  <code>steps</code> </td> <td class="param-type"><code><a href="animationmetadata.html" class="code-anchor">AnimationMetadata</a> | <a href="animationmetadata.html" class="code-anchor">AnimationMetadata</a>[]</code></td> <td class="param-description"> <p>One or more animation objects that represent the animation's instructions.</p> </td> </tr> <tr class="function-overload-parameter"> <td class="param-name">  <code>options</code> </td> <td class="param-type"><code><a href="animationoptions.html" class="code-anchor">AnimationOptions</a></code></td> <td class="param-description"> <p>An options object that can be used to specify a delay for the animation or provide custom parameters for it.</p> <p>Optional. Default is <code>null</code>.</p> </td> </tr> </tbody> </table> <h6 class="no-anchor" id="returns">Returns</h6> <p><code><a href="animationtransitionmetadata.html" class="code-anchor">AnimationTransitionMetadata</a></code>: An object that encapsulates the transition data.</p> </div>  <h2 id="usage-notes">Usage notes</h2> <h3 id="state-change-expression">State Change Expression</h3> <p>The State Change Expression instructs Angular when to run the transition's animations, it can either be</p> <ul> <li>a string with a specific syntax</li> <li>or a function that compares the previous and current state (value of the expression bound to the element's trigger) and returns <code>true</code> if the transition should occur or <code>false</code> otherwise</li> </ul> <p>The string format can be:</p> <ul> <li> <p><code>fromState =&gt; toState</code>, which indicates that the transition's animations should occur then the expression bound to the trigger's element goes from <code>fromState</code> to <code>toState</code></p> <p><em>Example:</em></p> <pre data-language="typescript">transition('open =&gt; closed', animate('.5s ease-out', style({ height: 0 }) ))</pre> </li> <li> <p><code>fromState &lt;=&gt; toState</code>, which indicates that the transition's animations should occur then the expression bound to the trigger's element goes from <code>fromState</code> to <code>toState</code> or vice versa</p> <p><em>Example:</em></p> <pre data-language="typescript">transition('enabled &lt;=&gt; disabled', animate('1s cubic-bezier(0.8,0.3,0,1)'))</pre> </li> <li> <p><code>:enter</code>/<code>:leave</code>, which indicates that the transition's animations should occur when the element enters or exists the DOM</p> <p><em>Example:</em></p> <pre data-language="typescript">transition(':enter', [
    style({ opacity: 0 }),
    animate('500ms', style({ opacity: 1 }))
  ])</pre> </li> <li> <p><code>:increment</code>/<code>:decrement</code>, which indicates that the transition's animations should occur when the numerical expression bound to the trigger's element has increased in value or decreased</p> <p><em>Example:</em></p> <pre data-language="typescript">transition(':increment', query('@counter', animateChild()))</pre> </li> <li> <p>a sequence of any of the above divided by commas, which indicates that transition's animations should occur whenever one of the state change expressions matches</p> <p><em>Example:</em></p> <pre data-language="typescript">transition(':increment, * =&gt; enabled, :enter', animate('1s ease', keyframes([
    style({ transform: 'scale(1)', offset: 0}),
    style({ transform: 'scale(1.1)', offset: 0.7}),
    style({ transform: 'scale(1)', offset: 1})
  ]))),</pre> </li> </ul> <p>Also note that in such context:</p> <ul> <li>
<code>void</code> can be used to indicate the absence of the element</li> <li>asterisks can be used as wildcards that match any state</li> <li>(as a consequence of the above, <code>void =&gt; *</code> is equivalent to <code>:enter</code> and <code>* =&gt; void</code> is equivalent to <code>:leave</code>)</li> <li>
<code>true</code> and <code>false</code> also match expression values of <code>1</code> and <code>0</code> respectively (but do not match <em>truthy</em> and <em>falsy</em> values)</li> </ul> <blockquote class="alert is-helpful"> <p> Be careful about entering end leaving elements as their transitions present a common pitfall for developers.</p> <p> Note that when an element with a trigger enters the DOM its <code>:enter</code> transition always gets executed, but its <code>:leave</code> transition will not be executed if the element is removed alongside its parent (as it will be removed "without warning" before its transition has a chance to be executed, the only way that such transition can occur is if the element is exiting the DOM on its own).</p> </blockquote> <h3 id="animating-to-a-final-state">Animating to a Final State</h3> <p>If the final step in a transition is a call to <code><a href="animate.html" class="code-anchor">animate</a>()</code> that uses a timing value with no <code><a href="style.html" class="code-anchor">style</a></code> data, that step is automatically considered the final animation arc, for the element to reach the final state, in such case Angular automatically adds or removes CSS styles to ensure that the element is in the correct final state.</p> <h3 id="usage-examples">Usage Examples</h3> <ul> <li> <p>Transition animations applied based on the trigger's expression value</p> <pre data-language="HTML">&lt;div [@myAnimationTrigger]="myStatusExp"&gt;
 ...
&lt;/div&gt;</pre> <pre data-language="typescript">trigger("myAnimationTrigger", [
  ..., // states
  transition("on =&gt; off, open =&gt; closed", animate(500)),
  transition("* &lt;=&gt; error", query('.indicator', animateChild()))
])</pre> </li> <li> <p>Transition animations applied based on custom logic dependent on the trigger's expression value and provided parameters</p> <pre data-language="HTML">&lt;div [@myAnimationTrigger]="{
 value: stepName,
 params: { target: currentTarget }
}"&gt;
 ...
&lt;/div&gt;</pre> <pre data-language="typescript">trigger("myAnimationTrigger", [
  ..., // states
  transition(
    (fromState, toState, _element, params) =&gt;
      ['firststep', 'laststep'].includes(fromState.toLowerCase())
      &amp;&amp; toState === params?.['target'],
    animate('1s')
  )
])</pre> </li> </ul> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010&ndash;2023 Google, Inc.<br>Licensed under the Creative Commons Attribution License 4.0.<br>
    <a href="https://angular.io/api/animations/transition" class="_attribution-link">https://angular.io/api/animations/transition</a>
  </p>
</div>
