<h1 id="how-to-build-software-outside-homebrew-with-homebrew-keg_only-dependencies">How to Build Software Outside Homebrew with Homebrew <code class="language-plaintext highlighter-rouge">keg_only</code> Dependencies</h1> <h2 id="what-does-keg-only-mean">What does “keg-only” mean?</h2> <p>The <a href="faq.html#what-does-keg-only-mean">FAQ</a> briefly explains this.</p> <p>As an example:</p> <p><em>OpenSSL isn’t symlinked into my <code class="language-plaintext highlighter-rouge">PATH</code> and non-Homebrew builds can’t find it!</em></p> <p>This is because Homebrew isolates it within its individual prefix, rather than symlinking to the publicly available location.</p> <h2 id="advice-on-potential-workarounds">Advice on potential workarounds</h2> <p>A number of people in this situation are either forcefully linking keg-only tools with <code class="language-plaintext highlighter-rouge">brew link --force</code> or moving default system utilities out of the <code class="language-plaintext highlighter-rouge">PATH</code> and replacing them with manually created symlinks to the Homebrew-provided tool.</p> <p><em>Please</em> do not remove macOS native tools and forcefully replace them with symlinks back to the Homebrew-provided tool. Doing so can and likely will cause significant breakage when attempting to build software.</p> <p><code class="language-plaintext highlighter-rouge">brew link --force</code> creates a warning in <code class="language-plaintext highlighter-rouge">brew doctor</code> to let both you and maintainers know that a link exists that could be causing issues. If you’ve linked something and there’s no problems at all? Feel free to ignore the <code class="language-plaintext highlighter-rouge">brew doctor</code> error.</p> <h2 id="how-do-i-use-those-tools-outside-of-homebrew">How do I use those tools outside of Homebrew?</h2> <p>Useful, reliable alternatives exist should you wish to use keg-only tools outside of Homebrew.</p> <h3 id="build-flags">Build flags</h3> <p>You can set flags to give configure scripts or Makefiles a nudge in the right direction. An example of flag setting:</p> <pre data-language="bash">./configure --prefix=/Users/Dave/Downloads CFLAGS="-I$(brew --prefix)/opt/openssl/include" LDFLAGS="-L$(brew --prefix)/opt/openssl/lib"</pre> <p>An example using <code class="language-plaintext highlighter-rouge">pip</code>:</p> <pre data-language="bash">CFLAGS="-I$(brew --prefix)/opt/icu4c/include" LDFLAGS="-L$(brew --prefix)/opt/icu4c/lib" pip install pyicu</pre> <h3 id="path-modification">
<code class="language-plaintext highlighter-rouge">PATH</code> modification</h3> <p>You can temporarily prepend your <code class="language-plaintext highlighter-rouge">PATH</code> with the tool’s <code class="language-plaintext highlighter-rouge">bin</code> directory, such as:</p> <pre data-language="bash">export PATH="$(brew --prefix)/opt/openssl/bin:${PATH}"</pre> <p>This will prepend the directory to your <code class="language-plaintext highlighter-rouge">PATH</code>, ensuring any build script that searches the <code class="language-plaintext highlighter-rouge">PATH</code> will find it first.</p> <p>Changing your <code class="language-plaintext highlighter-rouge">PATH</code> using this command ensures the change only exists for the duration of the shell session. Once the current session ends, the <code class="language-plaintext highlighter-rouge">PATH</code> reverts to its prior state.</p> <h3 id="pkg-config-detection">
<code class="language-plaintext highlighter-rouge">pkg-config</code> detection</h3> <p>If the tool you are attempting to build is <a href="https://en.wikipedia.org/wiki/Pkg-config">pkg-config</a> aware, you can amend your <code class="language-plaintext highlighter-rouge">PKG_CONFIG_PATH</code> to find a keg-only utility’s <code class="language-plaintext highlighter-rouge">.pc</code> files, if it has any. Not all formulae ship with these files.</p> <p>An example of this is:</p> <pre data-language="bash">export PKG_CONFIG_PATH="$(brew --prefix)/opt/openssl/lib/pkgconfig"</pre> <p>If you’re curious about the <code class="language-plaintext highlighter-rouge">PKG_CONFIG_PATH</code> variable, <code class="language-plaintext highlighter-rouge">man pkg-config</code> goes into more detail.</p> <p>You can get <code class="language-plaintext highlighter-rouge">pkg-config</code> to print the default search path with:</p> <pre data-language="bash">pkg-config --variable pc_path pkg-config</pre><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2009&ndash;present Homebrew contributors<br>Licensed under the BSD 2-Clause License.<br>
    <a href="https://docs.brew.sh/How-to-Build-Software-Outside-Homebrew-with-Homebrew-keg-only-Dependencies" class="_attribution-link">https://docs.brew.sh/How-to-Build-Software-Outside-Homebrew-with-Homebrew-keg-only-Dependencies</a>
  </p>
</div>
