<h1 id="versions">Versions</h1> <p><a href="https://github.com/homebrew/homebrew-core">homebrew/core</a> supports multiple versions of formulae with a special naming format. For example, the formula for GCC 6 is named <code class="language-plaintext highlighter-rouge">gcc@6.rb</code> and begins with <code class="language-plaintext highlighter-rouge">class GccAT6 &lt; Formula</code>.</p> <h2 id="acceptable-versioned-formulae">Acceptable versioned formulae</h2> <p>Versioned formulae we include in <a href="https://github.com/homebrew/homebrew-core">homebrew/core</a> must meet the following standards:</p> <ul> <li>Versioned software should build on all Homebrew’s supported versions of macOS.</li> <li>Versioned formulae should differ in major/minor (not patch) versions from the current stable release. This is because patch versions indicate bug or security updates, and we want to ensure you apply security updates.</li> <li>Unstable versions (alpha, beta, development versions) are not acceptable for versioned (or unversioned) formulae.</li> <li>Upstream should have a release branch for each formula version, and have an explicit policy of releasing security updates for each version when necessary. For example, <a href="https://php.net/supported-versions.php">PHP 7.0 was not a supported version but PHP 7.2 was</a> in January 2020. By contrast, most software projects are structured to only release security updates for their latest versions, so their earlier versions are not eligible for versioning.</li> <li>Versioned formulae should share a codebase with the main formula. If the project is split into a different repository, we recommend creating a new formula (<code class="language-plaintext highlighter-rouge">formula2</code> rather than <code class="language-plaintext highlighter-rouge">formula@2</code> or <code class="language-plaintext highlighter-rouge">formula@1</code>).</li> <li>Formulae that depend on versioned formulae must not depend on the same formulae at two different versions twice in their recursive dependencies. For example, if you depend on <code class="language-plaintext highlighter-rouge">openssl@1.0</code> and <code class="language-plaintext highlighter-rouge">foo</code>, and <code class="language-plaintext highlighter-rouge">foo</code> depends on <code class="language-plaintext highlighter-rouge">openssl</code> then you must instead use <code class="language-plaintext highlighter-rouge">openssl</code>.</li> <li>Versioned formulae should only be linkable at the same time as their non-versioned counterpart if the upstream project provides support for it, e.g. using suffixed binaries. If this is not possible, use <code class="language-plaintext highlighter-rouge">keg_only :versioned_formula</code> to allow users to have multiple versions installed at once.</li> <li>A <code class="language-plaintext highlighter-rouge">keg_only :versioned_formula</code> should not <code class="language-plaintext highlighter-rouge">post_install</code> anything in the <code class="language-plaintext highlighter-rouge">HOMEBREW_PREFIX</code> that conflicts with or duplicates the main counterpart (or other versioned formulae). For example, a <code class="language-plaintext highlighter-rouge">node@6</code> formula should not install its <code class="language-plaintext highlighter-rouge">npm</code> into <code class="language-plaintext highlighter-rouge">HOMEBREW_PREFIX</code> like the <code class="language-plaintext highlighter-rouge">node</code> formula does.</li> <li>Versioned formulae submitted should be expected to be used by a large number of people. If this ceases to be the case, they will be removed. We will aim not to remove those in the <a href="https://brew.sh/analytics/install-on-request/">top 3,000 <code class="language-plaintext highlighter-rouge">install_on_request</code> formulae</a>.</li> <li>Versioned formulae should not have <code class="language-plaintext highlighter-rouge">resource</code>s that require security updates. For example, a <code class="language-plaintext highlighter-rouge">node@6</code> formula should not have an <code class="language-plaintext highlighter-rouge">npm</code> resource but instead rely on the <code class="language-plaintext highlighter-rouge">npm</code> provided by the upstream tarball.</li> <li>Versioned formulae should be as similar as possible and sensible compared to the main formulae. Creating or updating a versioned formula should be a chance to ask questions of the main formula and vice versa, e.g. can some unused or useless options be removed or made default?</li> <li>No more than five versions of a formula (including the main one) will be supported at any given time, regardless of usage. When removing formulae that violate this, we will aim to do so based on usage and support status rather than age.</li> <li>Versioned formulae must be ABI stable for the lifetime of the version branch. Updates to the versioned formula must not introduce ABI incompatibilities or otherwise require dependents to be revision bumped. In practice, this means that their dependents should never need <code class="language-plaintext highlighter-rouge">revision</code> bumps to be rebuilt against newer versions. Version updates which violate this should be rejected and the formula be deprecated from that point onwards.</li> </ul> <p>Homebrew’s versions should not be used to “pin” formulae to your personal requirements. You should instead create your own <a href="how-to-create-and-maintain-a-tap.html">tap</a> for formulae you or your organisation wish to control the versioning of, or those that do not meet the above standards. Software that has regular API or ABI breaking releases still needs to meet all the above requirements; that a <code class="language-plaintext highlighter-rouge">brew upgrade</code> has broken something for you is not an argument for us to add and maintain a formula for you.</p> <p>If there is a formula that currently exists in the Homebrew/homebrew-core repository or has existed in the past (i.e. was migrated or deleted), you can recover it for your own use with the <code class="language-plaintext highlighter-rouge">brew extract</code> command. This will copy the desired version of the formula into a custom tap. For example, if your project depends on <code class="language-plaintext highlighter-rouge">automake</code> 1.12 instead of the most recent version, you can obtain the <code class="language-plaintext highlighter-rouge">automake</code> formula at version 1.12 by running <code class="language-plaintext highlighter-rouge">brew extract automake &lt;YOUR_GITHUB_USER&gt;/&lt;YOUR_TAP_REPOSITORY_NAME&gt; --version=1.12</code>. Formulae obtained this way may contain deprecated, disabled or removed Homebrew syntax (e.g. checksums may be <code class="language-plaintext highlighter-rouge">sha1</code> instead of <code class="language-plaintext highlighter-rouge">sha256</code>); the <code class="language-plaintext highlighter-rouge">brew extract</code> command does not edit or update formulae to meet current standards and style requirements.</p> <p>We may temporarily add versioned formulae for our own needs that do not meet these standards in <a href="https://github.com/homebrew/homebrew-core">homebrew/core</a>. The presence of a versioned formula there does not imply it will be maintained indefinitely or that we are willing to accept any more versions that do not meet the requirements above.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2009&ndash;present Homebrew contributors<br>Licensed under the BSD 2-Clause License.<br>
    <a href="https://docs.brew.sh/Versions" class="_attribution-link">https://docs.brew.sh/Versions</a>
  </p>
</div>
