<h1 id="adding-software-to-homebrew">Adding Software To Homebrew</h1> <p>Is your favorite software missing from Homebrew? Then you’re the perfect person to resolve this problem.</p> <p>If you want to add software that is either closed source or a GUI-only program, you will want to follow the guide for <a href="#casks">Casks</a>. Otherwise follow the guide for <a href="#formulae">Formulae</a>. See also: <a href="formula-cookbook.html#homebrew-terminology">Homebrew Terminology</a></p> <p>Before you start, please check the open pull requests for <a href="https://github.com/Homebrew/homebrew-core/pulls">Homebrew/homebrew-core</a> or <a href="https://github.com/Homebrew/homebrew-cask/pulls">Homebrew/homebrew-cask</a> to make sure no one else beat you to the punch.</p> <p>Next, you will want to go through the <a href="acceptable-formulae.html">Acceptable Formulae</a> or <a href="acceptable-casks.html">Acceptable Casks</a> documentation to determine if the software is an appropriate addition to Homebrew. If you are creating a formula for an alternative version of software already in Homebrew (e.g. a major/minor version that differs significantly from the existing version), be sure to read the <a href="versions.html">Versions</a> documentation to understand versioned formulae requirements.</p> <p>If everything checks out, you’re ready to get started on a new formula!</p> <h2 id="formulae">Formulae</h2> <h3 id="writing-the-formula">Writing the formula</h3> <ol> <li> <p>It’s a good idea to find existing formulae in Homebrew that have similarities to the software you want to add. This will help you to understand how specific languages, build methods, etc. are typically handled.</p> </li> <li> <p>If you’re starting from scratch, you can use the <a href="manpage.html#create-options-url"><code class="language-plaintext highlighter-rouge">brew create</code> command</a> to produce a basic version of your formula. This command accepts a number of options and you may be able to save yourself some work by using an appropriate template option like <code class="language-plaintext highlighter-rouge">--python</code>.</p> </li> <li> <p>You will now have to develop the boilerplate code from <code class="language-plaintext highlighter-rouge">brew create</code> into a full-fledged formula. Your main references will be the <a href="formula-cookbook.html">Formula Cookbook</a>, similar formulae in Homebrew, and the upstream documentation for your chosen software. Be sure to also take note of the Homebrew documentation for writing <a href="python-for-formula-authors.html">Python</a> and <a href="node-for-formula-authors.html">Node</a> formulae, if applicable.</p> </li> <li> <p>Make sure you write a good test as part of your formula. Refer to the <a href="formula-cookbook.html#add-a-test-to-the-formula">Add a test to the formula</a> section of the Cookbook for help with this.</p> </li> <li> <p>Try installing your formula using <code class="language-plaintext highlighter-rouge">brew install --build-from-source &lt;formula&gt;</code>, where &lt;formula&gt; is the name of your formula. If any errors occur, correct your formula and attempt to install it again. The formula installation should finish without errors by the end of this step.</p> </li> </ol> <p>If you’re stuck, ask for help on GitHub or <a href="https://github.com/homebrew/discussions/discussions">Homebrew/discussions</a>. The maintainers are very happy to help but we also like to see that you’ve put effort into trying to find a solution first.</p> <h3 id="testing-and-auditing-the-formula">Testing and auditing the formula</h3> <ol> <li> <p>Run <code class="language-plaintext highlighter-rouge">brew audit --strict --new-formula --online &lt;formula&gt;</code> with your formula. If any errors occur, correct your formula and run the audit again. The audit should finish without any errors by the end of this step.</p> </li> <li> <p>Run your formula’s test using <code class="language-plaintext highlighter-rouge">brew test &lt;formula&gt;</code>. The test should finish without any errors.</p> </li> </ol> <h3 id="submitting-the-formula">Submitting the formula</h3> <p>You’re finally ready to submit your formula to the <a href="https://github.com/Homebrew/homebrew-core/">homebrew-core</a> repository. If you haven’t done this before, you can refer to the <a href="how-to-open-a-homebrew-pull-request.html">How to Open a Pull Request</a> documentation for help. Maintainers will review the pull request and provide feedback about any areas that need to be addressed before the formula can be added to Homebrew.</p> <p>If you’ve made it this far, congratulations on submitting a Homebrew formula! We appreciate the hard work you put into this and you can take satisfaction in knowing that your work may benefit other Homebrew users as well.</p> <h2 id="casks">Casks</h2> <p><strong>Note:</strong> Before taking the time to craft a new cask:</p> <ul> <li>make sure it can be accepted by checking the <a href="acceptable-casks.html#rejected-casks">Rejected Casks FAQ</a>, and</li> <li>check that the cask was not <a href="https://github.com/Homebrew/homebrew-cask/search?q=is%3Aclosed&amp;type=Issues">already refused</a>.</li> </ul> <h3 id="writing-the-cask">Writing the cask</h3> <p>Making a new cask is easy. Follow the directions in <a href="https://github.com/Homebrew/homebrew-cask/blob/HEAD/CONTRIBUTING.md#getting-set-up-to-contribute">Getting Set Up To Contribute</a> to begin.</p> <h4 id="examples">Examples</h4> <p>Here’s a cask for <code class="language-plaintext highlighter-rouge">shuttle</code> as an example. Note the <code class="language-plaintext highlighter-rouge">verified</code> parameter below the <code class="language-plaintext highlighter-rouge">url</code>, which is needed when <a href="cask-cookbook.html#when-url-and-homepage-domains-differ-add-verified">the url and homepage hostnames differ</a>.</p> <pre data-language="ruby">cask "shuttle" do
  version "1.2.9"
  sha256 "0b80bf62922291da391098f979683e69cc7b65c4bdb986a431e3f1d9175fba20"

  url "https://github.com/fitztrev/shuttle/releases/download/v#{version}/Shuttle.zip",
      verified: "github.com/fitztrev/shuttle/"
  name "Shuttle"
  desc "Simple shortcut menu"
  homepage "https://fitztrev.github.io/shuttle/"

  app "Shuttle.app"

  zap trash: "~/.shuttle.json"
end</pre> <p>And here is one for <code class="language-plaintext highlighter-rouge">noisy</code>. Note that it has an unversioned download (the download <code class="language-plaintext highlighter-rouge">url</code> does not contain the version number, unlike the example above). It also suppresses the checksum with <code class="language-plaintext highlighter-rouge">sha256 :no_check</code>, which is necessary because since the download <code class="language-plaintext highlighter-rouge">url</code> does not contain the version number, its checksum will change when a new version is made available.</p> <pre data-language="ruby">cask "noisy" do
  version "1.3"
  sha256 :no_check

  url "https://github.com/downloads/jonshea/Noisy/Noisy.zip"
  name "Noisy"
  desc "White noise generator"
  homepage "https://github.com/jonshea/Noisy"

  app "Noisy.app"
end</pre> <p>Here is a last example for <code class="language-plaintext highlighter-rouge">airdisplay</code>, which uses a <code class="language-plaintext highlighter-rouge">pkg</code> installer to install the application instead of a stand-alone application bundle (<code class="language-plaintext highlighter-rouge">.app</code>). Note the <a href="cask-cookbook.html#uninstall-key-pkgutil"><code class="language-plaintext highlighter-rouge">uninstall pkgutil</code> stanza</a>, which is needed to uninstall all files that were installed using the installer.</p> <p>You will also see how to adapt <code class="language-plaintext highlighter-rouge">version</code> to the download <code class="language-plaintext highlighter-rouge">url</code>. Use <a href="cask-cookbook.html#version-methods">our custom <code class="language-plaintext highlighter-rouge">version</code> methods</a> to do so, resorting to the standard <a href="https://ruby-doc.org/core/String.html">Ruby String methods</a> when they don’t suffice.</p> <pre data-language="ruby">cask "airdisplay" do
  version "3.4.2,26581"
  sha256 "272d14f33b3a4a16e5e0e1ebb2d519db4e0e3da17f95f77c91455b354bee7ee7"

  url "https://www.avatron.com/updates/software/airdisplay/ad#{version.before_comma.no_dots}.zip"
  name "Air Display"
  desc "Utility for using a tablet as a second monitor"
  homepage "https://avatron.com/applications/air-display/"

  livecheck do
    url "https://www.avatron.com/updates/software/airdisplay/appcast.xml"
    strategy :sparkle
  end

  depends_on macos: "&gt;= :mojave"

  pkg "Air Display Installer.pkg"

  uninstall pkgutil: [
    "com.avatron.pkg.AirDisplay",
    "com.avatron.pkg.AirDisplayHost2",
  ]
end</pre> <h4 id="generating-a-token-for-the-cask">Generating a token for the cask</h4> <p>The cask <strong>token</strong> is the mnemonic string people will use to interact with the cask via <code class="language-plaintext highlighter-rouge">brew install</code>, etc. The name of the cask <strong>file</strong> is simply the token with the extension <code class="language-plaintext highlighter-rouge">.rb</code> appended.</p> <p>The easiest way to generate a token for a cask is to run this command:</p> <pre data-language="bash">$(brew --repository homebrew/cask)/developer/bin/generate_cask_token "/full/path/to/new/software.app"</pre> <p>If the software you wish to create a cask for is not installed, or does not have an associated App bundle, just give the full proper name of the software instead of a pathname:</p> <pre data-language="bash">$(brew --repository homebrew/cask)/developer/bin/generate_cask_token "Google Chrome"</pre> <p>If the <code class="language-plaintext highlighter-rouge">generate_cask_token</code> script does not work for you, see <a href="#cask-token-details">Cask Token Details</a>.</p> <h4 id="creating-the-cask-file">Creating the cask file</h4> <p>Once you know the token, create your cask with the handy-dandy <code class="language-plaintext highlighter-rouge">brew create --cask</code> command:</p> <pre data-language="bash">brew create --cask download-url --set-name my-new-cask</pre> <p>This will open <code class="language-plaintext highlighter-rouge">$EDITOR</code> with a template for your new cask, to be stored in the file <code class="language-plaintext highlighter-rouge">my-new-cask.rb</code>. Running the <code class="language-plaintext highlighter-rouge">create</code> command above will get you a template that looks like this:</p> <pre data-language="ruby">cask "my-new-cask" do
  version ""
  sha256 ""

  url "download-url"
  name ""
  desc ""
  homepage ""

  app ""
end</pre> <h4 id="cask-stanzas">Cask stanzas</h4> <p>Fill in the following stanzas for your cask:</p> <table> <thead> <tr> <th>name</th> <th>value</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">version</code></td> <td>application version</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">sha256</code></td> <td>SHA-256 checksum of the file downloaded from <code class="language-plaintext highlighter-rouge">url</code>, calculated by the command <code class="language-plaintext highlighter-rouge">shasum -a 256 &lt;file&gt;</code>. Can be suppressed by using the special value <code class="language-plaintext highlighter-rouge">:no_check</code>. (see <a href="cask-cookbook.html#stanza-sha256"><code class="language-plaintext highlighter-rouge">sha256</code> Stanza Details</a>)</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">url</code></td> <td>URL to the <code class="language-plaintext highlighter-rouge">.dmg</code>/<code class="language-plaintext highlighter-rouge">.zip</code>/<code class="language-plaintext highlighter-rouge">.tgz</code>/<code class="language-plaintext highlighter-rouge">.tbz2</code> file that contains the application.<br>A <a href="cask-cookbook.html#when-url-and-homepage-domains-differ-add-verified"><code class="language-plaintext highlighter-rouge">verified</code> parameter</a> must be added if the hostnames in the <code class="language-plaintext highlighter-rouge">url</code> and <code class="language-plaintext highlighter-rouge">homepage</code> stanzas differ. <a href="cask-cookbook.html#using-a-block-to-defer-code-execution">Block syntax</a> is available for URLs that change on every visit</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">name</code></td> <td>the full and proper name defined by the vendor, and any useful alternate names (see <a href="cask-cookbook.html#stanza-name"><code class="language-plaintext highlighter-rouge">name</code> Stanza Details</a>)</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">desc</code></td> <td>one-line description of the software (see <a href="cask-cookbook.html#stanza-desc"><code class="language-plaintext highlighter-rouge">desc</code> Stanza Details</a>)</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">homepage</code></td> <td>application homepage; used for the <code class="language-plaintext highlighter-rouge">brew home</code> command</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">app</code></td> <td>relative path to an <code class="language-plaintext highlighter-rouge">.app</code> bundle that should be moved into the <code class="language-plaintext highlighter-rouge">/Applications</code> folder on installation (see <a href="cask-cookbook.html#stanza-app"><code class="language-plaintext highlighter-rouge">app</code> Stanza Details</a>)</td> </tr> </tbody> </table> <p>Other commonly used stanzas are:</p> <table> <thead> <tr> <th>name</th> <th>value</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">livecheck</code></td> <td>Ruby block describing how to find updates for this cask (see <a href="cask-cookbook.html#stanza-livecheck"><code class="language-plaintext highlighter-rouge">livecheck</code> Stanza Details</a>)</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">pkg</code></td> <td>relative path to a <code class="language-plaintext highlighter-rouge">.pkg</code> file containing the distribution (see <a href="cask-cookbook.html#stanza-pkg"><code class="language-plaintext highlighter-rouge">pkg</code> Stanza Details</a>)</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">caveats</code></td> <td>a string or Ruby block providing the user with cask-specific information at install time (see <a href="cask-cookbook.html#stanza-caveats"><code class="language-plaintext highlighter-rouge">caveats</code> Stanza Details</a>)</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">uninstall</code></td> <td>procedures to uninstall a cask. Optional unless the <code class="language-plaintext highlighter-rouge">pkg</code> stanza is used. (see <a href="cask-cookbook.html#stanza-uninstall"><code class="language-plaintext highlighter-rouge">uninstall</code> Stanza Details</a>)</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">zap</code></td> <td>additional procedures for a more complete uninstall, including configuration files and shared resources (see <a href="cask-cookbook.html#stanza-zap"><code class="language-plaintext highlighter-rouge">zap</code> Stanza Details</a>)</td> </tr> </tbody> </table> <p>Additional <a href="cask-cookbook.html#at-least-one-artifact-stanza-is-also-required"><code class="language-plaintext highlighter-rouge">artifact</code> stanzas</a> may be needed for special use cases. Even more special-use stanzas are listed at <a href="cask-cookbook.html#optional-stanzas">Optional Stanzas</a>.</p> <h4 id="cask-token-details">Cask token details</h4> <p>If a token conflicts with an already-existing cask, authors should manually make the new token unique by prepending the vendor name. Example: <a href="https://github.com/Homebrew/homebrew-cask/blob/HEAD/Casks/unison.rb">unison.rb</a> and <a href="https://github.com/Homebrew/homebrew-cask/blob/HEAD/Casks/panic-unison.rb">panic-unison.rb</a>.</p> <p>If possible, avoid creating tokens that differ only by the placement of hyphens.</p> <p>To generate a token manually, or to learn about exceptions for unusual cases, see the <a href="cask-cookbook.html#token-reference">Token Reference</a>.</p> <h4 id="archives-with-subfolders">Archives with subfolders</h4> <p>When a downloaded archive expands to a subfolder, the subfolder name must be included in the <code class="language-plaintext highlighter-rouge">app</code> value.</p> <p>Example:</p> <ol> <li>Texmaker is downloaded to the file <code class="language-plaintext highlighter-rouge">TexmakerMacosxLion.zip</code>.</li> <li>
<code class="language-plaintext highlighter-rouge">TexmakerMacosxLion.zip</code> unzips to a folder called <code class="language-plaintext highlighter-rouge">TexmakerMacosxLion</code>.</li> <li>The folder <code class="language-plaintext highlighter-rouge">TexmakerMacosxLion</code> contains the application <code class="language-plaintext highlighter-rouge">texmaker.app</code>.</li> <li>So, the <code class="language-plaintext highlighter-rouge">app</code> stanza should include the subfolder as a relative path:</li> </ol> <pre data-language="ruby">app "TexmakerMacosxLion/texmaker.app"</pre> <h3 id="testing-and-auditing-the-cask">Testing and auditing the cask</h3> <p>Give it a shot with:</p> <pre data-language="bash">export HOMEBREW_NO_AUTO_UPDATE=1
brew install my-new-cask</pre> <p>Did it install? If something went wrong, edit your cask with <code class="language-plaintext highlighter-rouge">brew edit my-new-cask</code> to fix it.</p> <p>Test also if the uninstall works successfully:</p> <pre data-language="bash">brew uninstall my-new-cask</pre> <p>If everything looks good, you’ll also want to make sure your cask passes audit with:</p> <pre data-language="bash">brew audit --new-cask my-new-cask</pre> <p>You should also check stylistic details with <code class="language-plaintext highlighter-rouge">brew style</code>:</p> <pre data-language="bash">brew style --fix my-new-cask</pre> <p>Keep in mind that all these checks will be made when you submit your PR, so by doing them in advance you’re saving everyone a lot of time and trouble.</p> <p>If your application and Homebrew Cask do not work well together, feel free to <a href="https://github.com/Homebrew/homebrew-cask#reporting-bugs">file an issue</a> after checking out open issues.</p> <h3 id="submitting-the-cask">Submitting the cask</h3> <h4 id="finding-a-home-for-your-cask">Finding a home for your cask</h4> <p>See the <a href="acceptable-casks.html#finding-a-home-for-your-cask">Acceptable Casks documentation</a>.</p> <p>Hop into your Tap and check to make sure your new cask is there:</p> <pre data-language="bash">$ cd "$(brew --repository)"/Library/Taps/homebrew/homebrew-cask
$ git status
# On branch master
# Untracked files:
#   (use "git add &lt;file&gt;..." to include in what will be committed)
#
#       Casks/my-new-cask.rb</pre> <p>So far, so good. Now make a feature branch <code class="language-plaintext highlighter-rouge">my-new-cask-branch</code> that you’ll use in your pull request:</p> <pre data-language="bash">$ git checkout -b my-new-cask-branch
Switched to a new branch 'my-new-cask-branch'</pre> <p>Stage your cask with:</p> <pre data-language="bash">git add Casks/my-new-cask.rb</pre> <p>You can view the changes that are to be committed with:</p> <pre data-language="bash">git diff --cached</pre> <p>Commit your changes with:</p> <pre data-language="bash">git commit -v</pre> <h4 id="commit-messages">Commit messages</h4> <p>For any Git project, some good rules for commit messages are:</p> <ul> <li>The first line is the commit summary, 50 characters or less,</li> <li>Followed by an empty line,</li> <li>Followed by an explanation of the commit, wrapped to 72 characters.</li> </ul> <p>See <a href="https://tbaggery.com/2008/04/19/a-note-about-git-commit-messages.html">A Note About Git Commit Messages</a> for more.</p> <p>The first line of a commit message becomes the <strong>title</strong> of a pull request on GitHub, like the subject line of an email. Including the key info in the first line will help us respond faster to your pull request.</p> <p>For cask commits in the Homebrew Cask project, we like to include the application name, version number, and purpose of the commit in the first line.</p> <p>Examples of good, clear commit summaries:</p> <ul> <li><code class="language-plaintext highlighter-rouge">Add Transmission.app v1.0</code></li> <li><code class="language-plaintext highlighter-rouge">Upgrade Transmission.app to v2.82</code></li> <li><code class="language-plaintext highlighter-rouge">Fix checksum in Transmission.app cask</code></li> <li><code class="language-plaintext highlighter-rouge">Add CodeBox Latest</code></li> </ul> <p>Examples of difficult, unclear commit summaries:</p> <ul> <li><code class="language-plaintext highlighter-rouge">Upgrade to v2.82</code></li> <li><code class="language-plaintext highlighter-rouge">Checksum was bad</code></li> </ul> <h4 id="pushing">Pushing</h4> <p>Push your changes on the branch <code class="language-plaintext highlighter-rouge">my-new-cask-branch</code> to your GitHub account:</p> <pre data-language="bash">git push  my-new-cask-branch</pre> <p>If you are using <a href="https://docs.github.com/en/authentication/securing-your-account-with-two-factor-authentication-2fa">GitHub two-factor authentication</a> and have set your remote repository as HTTPS you will need to <a href="https://docs.github.com/en/repositories/creating-and-managing-repositories/troubleshooting-cloning-errors#provide-an-access-token">set up a personal access token</a> and use that instead of your password.</p> <h4 id="filing-a-pull-request-on-github">Filing a pull request on GitHub</h4> <h5 id="a-use-suggestion-from-git-push">a) use suggestion from <code class="language-plaintext highlighter-rouge">git push</code>
</h5> <p>The <code class="language-plaintext highlighter-rouge">git push</code> command prints a suggestion for how to create a pull request:</p> <pre data-language="plaintext">remote: Create a pull request for 'new-cask-cask' on GitHub by visiting:
remote:      https://github.com//homebrew-cask/pull/new/my-new-cask-branch</pre> <h5 id="b-use-suggestion-from-githubs-website">b) use suggestion from GitHub’s website</h5> <p>Now go to the <a href="https://github.com/Homebrew/homebrew-cask"><code class="language-plaintext highlighter-rouge">homebrew-cask</code> GitHub repository</a>. GitHub will often show your <code class="language-plaintext highlighter-rouge">my-new-cask-branch</code> branch with a handy button to <code class="language-plaintext highlighter-rouge">Compare &amp; pull request</code>.</p> <h5 id="c-manually-create-a-pull-request-on-github">c) manually create a pull request on GitHub</h5> <p>Otherwise, click the <code class="language-plaintext highlighter-rouge">Contribute &gt; Open pull request</code> button and choose to <code class="language-plaintext highlighter-rouge">compare across forks</code>. The base fork should be <code class="language-plaintext highlighter-rouge">Homebrew/homebrew-cask @ master</code>, and the head fork should be <code class="language-plaintext highlighter-rouge">my-github-username/homebrew-cask @ my-new-cask-branch</code>. You can also add any further comments to your pull request at this stage.</p> <h5 id="congratulations">Congratulations!</h5> <p>You are done now, and your cask should be pulled in or otherwise noticed in a while. If a maintainer suggests some changes, just make them on the <code class="language-plaintext highlighter-rouge">my-new-cask-branch</code> branch locally and <a href="#pushing">push</a>.</p> <h3 id="cleaning-up">Cleaning up</h3> <p>After your pull request is submitted, you should get yourself back onto <code class="language-plaintext highlighter-rouge">master</code>, so that <code class="language-plaintext highlighter-rouge">brew update</code> will pull down new casks properly:</p> <pre data-language="bash">cd "$(brew --repository)"/Library/Taps/homebrew/homebrew-cask
git checkout master</pre> <p>If earlier you set the variable <code class="language-plaintext highlighter-rouge">HOMEBREW_NO_AUTO_UPDATE</code> then clean it up with:</p> <pre data-language="bash">unset HOMEBREW_NO_AUTO_UPDATE</pre><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2009&ndash;present Homebrew contributors<br>Licensed under the BSD 2-Clause License.<br>
    <a href="https://docs.brew.sh/Adding-Software-to-Homebrew" class="_attribution-link">https://docs.brew.sh/Adding-Software-to-Homebrew</a>
  </p>
</div>
