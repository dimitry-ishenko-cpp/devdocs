<h1 id="common-issues">Common Issues</h1> <p>This is a list of commonly encountered problems, known issues, and their solutions.</p> <h2 id="running-brew">Running <code class="language-plaintext highlighter-rouge">brew</code>
</h2> <h3 id="brew-complains-about-absence-of-command-line-tools">
<code class="language-plaintext highlighter-rouge">brew</code> complains about absence of “Command Line Tools”</h3> <p>You need to have the Xcode Command Line Utilities installed (and updated): run <code class="language-plaintext highlighter-rouge">xcode-select --install</code> in the terminal.</p> <h3 id="ruby-bad-interpreter-usrbinrubym-no-such-file-or-directory">Ruby: <code class="language-plaintext highlighter-rouge">bad interpreter: /usr/bin/ruby^M: no such file or directory</code>
</h3> <p>You cloned with <code class="language-plaintext highlighter-rouge">git</code>, and your Git configuration is set to use Windows line endings. See this page on <a href="https://docs.github.com/en/get-started/getting-started-with-git/configuring-git-to-handle-line-endings">configuring Git to handle line endings</a>.</p> <h3 id="ruby-bad-interpreter-usrbinruby">Ruby: <code class="language-plaintext highlighter-rouge">bad interpreter: /usr/bin/ruby</code>
</h3> <p>You don’t have a <code class="language-plaintext highlighter-rouge">/usr/bin/ruby</code> or it is not executable. It’s not recommended to let this persist; you’d be surprised how many <code class="language-plaintext highlighter-rouge">.app</code>s, tools and scripts expect your macOS-provided files and directories to be <em>unmodified</em> since macOS was installed.</p> <h3 id="brew-update-complains-about-untracked-working-tree-files">
<code class="language-plaintext highlighter-rouge">brew update</code> complains about untracked working tree files</h3> <p>After running <code class="language-plaintext highlighter-rouge">brew update</code>, you receive a Git error warning about untracked files or local changes that would be overwritten by a checkout or merge, followed by a list of files inside your Homebrew installation.</p> <p>This is caused by an old bug in in the <code class="language-plaintext highlighter-rouge">update</code> code that has long since been fixed. However, the nature of the bug requires that you do the following:</p> <pre data-language="bash">cd "$(brew --repository)"
git reset --hard FETCH_HEAD</pre> <p>If <code class="language-plaintext highlighter-rouge">brew doctor</code> still complains about uncommitted modifications, also run this command:</p> <pre data-language="bash">cd "$(brew --repository)/Library"
git clean -fd</pre> <h3 id="launchctl-refuses-to-load-launchd-plist-files">
<code class="language-plaintext highlighter-rouge">launchctl</code> refuses to load launchd plist files</h3> <p>When trying to load a plist file with <code class="language-plaintext highlighter-rouge">launchctl</code>, you receive an error that resembles either:</p> <pre data-language="plaintext">Bug: launchctl.c:2325 (23930):13: (dbfd = open(g_job_overrides_db_path, [...]
launch_msg(): Socket is not connected</pre> <p>or:</p> <pre data-language="plaintext">Could not open job overrides database at: /private/var/db/launchd.db/com.apple.launchd/overrides.plist: 13: Permission denied
launch_msg(): Socket is not connected</pre> <p>These are likely due to one of four issues:</p> <ol> <li>You are using iTerm. The solution is to use Terminal.app when interacting with <code class="language-plaintext highlighter-rouge">launchctl</code>.</li> <li>You are using a terminal multiplexer such as <code class="language-plaintext highlighter-rouge">tmux</code> or <code class="language-plaintext highlighter-rouge">screen</code>. You should interact with <code class="language-plaintext highlighter-rouge">launchctl</code> from a separate Terminal.app shell.</li> <li>You are attempting to run <code class="language-plaintext highlighter-rouge">launchctl</code> while logged in remotely. You should enable screen sharing on the remote machine and issue the command using Terminal.app running on that machine.</li> <li>You are <code class="language-plaintext highlighter-rouge">su</code>‘ed as a different user.</li> </ol> <h3 id="brew-upgrade-errors-out">
<code class="language-plaintext highlighter-rouge">brew upgrade</code> errors out</h3> <p>When running <code class="language-plaintext highlighter-rouge">brew upgrade</code>, you see something like this:</p> <pre data-language="plaintext">Error: undefined method `include?' for nil:NilClass
Please report this bug:
    https://docs.brew.sh/Troubleshooting
/usr/local/Library/Homebrew/formula.rb:393:in `canonical_name'
/usr/local/Library/Homebrew/formula.rb:425:in `factory'
/usr/local/Library/Contributions/examples/brew-upgrade.rb:7
/usr/local/Library/Contributions/examples/brew-upgrade.rb:7:in `map'
/usr/local/Library/Contributions/examples/brew-upgrade.rb:7
/usr/local/bin/brew:46:in `require'
/usr/local/bin/brew:46:in `require?'
/usr/local/bin/brew:79</pre> <p>This happens because an old version of the upgrade command is hanging around for some reason. The fix:</p> <pre data-language="bash">cd "$(brew --repository)/Library/Contributions/examples"
git clean -n # if this doesn't list anything that you want to keep, then
git clean -f # this will remove untracked files</pre> <h3 id="python-easy-installpth-cannot-be-linked">Python: <code class="language-plaintext highlighter-rouge">easy-install.pth</code> cannot be linked</h3> <pre data-language="plaintext">Warning: Could not link &lt;formula&gt;. Unlinking...
Error: The `brew link` step did not complete successfully
The formula built, but is not symlinked into /usr/local
You can try again using `brew link &lt;formula&gt;'

Possible conflicting files are:
/usr/local/lib/python2.7/site-packages/site.py
/usr/local/lib/python2.7/site-packages/easy-install.pth
==&gt; Could not symlink file: /homebrew/Cellar/&lt;formula&gt;/&lt;version&gt;/lib/python2.7/site-packages/site.py
Target /usr/local/lib/python2.7/site-packages/site.py already exists. You may need to delete it.
To force the link and overwrite all other conflicting files, do:
  brew link --overwrite formula_name

To list all files that would be deleted:
  brew link --overwrite --dry-run formula_name</pre> <p>Don’t follow the advice here but fix by using <code class="language-plaintext highlighter-rouge">Language::Python.setup_install_args</code> in the formula as described in <a href="python-for-formula-authors.html">Python for Formula Authors</a>.</p> <h2 id="upgrading-macos">Upgrading macOS</h2> <p>Upgrading macOS can cause errors like the following:</p> <ul> <li><code class="language-plaintext highlighter-rouge">dyld: Library not loaded: /usr/local/opt/icu4c/lib/libicui18n.54.dylib</code></li> <li><code class="language-plaintext highlighter-rouge">configure: error: Cannot find libz</code></li> </ul> <p>Following a macOS upgrade it may be necessary to reinstall the Xcode Command Line Tools and then <code class="language-plaintext highlighter-rouge">brew upgrade</code> all installed formulae:</p> <pre data-language="bash">xcode-select --install
brew upgrade</pre> <h2 id="cask---curl-error">Cask - cURL error</h2> <p>First, let’s tackle a common problem: do you have a <code class="language-plaintext highlighter-rouge">.curlrc</code> file? Check with <code class="language-plaintext highlighter-rouge">ls -A ~ | grep .curlrc</code> (if you get a result, the file exists). Those are a frequent cause of issues of this nature. Before anything else, remove that file and try again. If it now works, do not open an issue. Incompatible <code class="language-plaintext highlighter-rouge">.curlrc</code> configurations must be fixed on your side.</p> <p>If, however, you do not have a <code class="language-plaintext highlighter-rouge">.curlrc</code> or removing it did not work, let’s see if the issue is upstream:</p> <ol> <li>Go to the vendor’s website (<code class="language-plaintext highlighter-rouge">brew home &lt;cask_name&gt;</code>).</li> <li>Find the download link for the app and click on it.</li> </ol> <h3 id="if-the-download-works">If the download works</h3> <p>The cask is outdated. Let’s fix it:</p> <ol> <li>Look around the app’s website and find out what the latest version is. It will likely be expressed in the URL used to download it.</li> <li>Take a look at the cask’s version (<code class="language-plaintext highlighter-rouge">brew cat &lt;cask_name&gt;</code>) and verify it is indeed outdated. If the app’s version is <code class="language-plaintext highlighter-rouge">:latest</code>, it means the <code class="language-plaintext highlighter-rouge">url</code> itself is outdated. It will need to be changed to the new one.</li> </ol> <p>Help us by <a href="https://github.com/Homebrew/homebrew-cask/blob/HEAD/CONTRIBUTING.md#updating-a-cask">submitting a fix</a>. If you get stumped, <a href="https://github.com/Homebrew/homebrew-cask/issues/new?template=01_bug_report.md">open an issue</a> explaining your steps so far and where you’re having trouble.</p> <h3 id="if-the-download-does-not-work">If the download does not work</h3> <p>The issue isn’t in any way related to Homebrew Cask, but with the vendor or your connection.</p> <p>Start by diagnosing your connection (try to download other casks, go around the web). If the problem is with your connection, try a website like <a href="https://apple.stackexchange.com/">Ask Different</a> to ask for advice.</p> <p>If you’re sure the issue is not with your connection, contact the app’s vendor and let them know their link is down, so they can fix it.</p> <p><strong>Do not open an issue.</strong></p> <h2 id="cask---checksum-does-not-match">Cask - checksum does not match</h2> <p>First, check if the problem was with your download. Delete the downloaded file (its location will be pointed out in the error message) and try again.</p> <p>If the problem persists, the cask must be outdated. It’ll likely need a new version, but it’s possible the version has remained the same (happens occasionally when the vendor updates the app in place).</p> <ol> <li>Go to the vendor’s website (<code class="language-plaintext highlighter-rouge">brew home &lt;cask_name&gt;</code>).</li> <li>Find out what the latest version is. It may be expressed in the URL used to download it.</li> <li>Take a look at the cask’s version (<code class="language-plaintext highlighter-rouge">brew info &lt;cask_name&gt;</code>) and verify it is indeed outdated. If it is:</li> </ol> <p>Help us by <a href="https://github.com/Homebrew/homebrew-cask/blob/HEAD/CONTRIBUTING.md#updating-a-cask">submitting a fix</a>. If you get stumped, <a href="https://github.com/Homebrew/homebrew-cask/issues/new?template=01_bug_report.md">open an issue</a> explaining your steps so far and where you’re having trouble.</p> <h2 id="cask---permission-denied">Cask - permission denied</h2> <p>In this case, it’s likely your user account has no admin rights so you don’t have permissions to write to <code class="language-plaintext highlighter-rouge">/Applications</code> (which is the default). You can use <a href="https://github.com/Homebrew/homebrew-cask/blob/HEAD/USAGE.md#options"><code class="language-plaintext highlighter-rouge">--appdir</code></a> to choose where to install your applications.</p> <p>If <code class="language-plaintext highlighter-rouge">--appdir</code> doesn’t fix the issue or you do have write permissions to <code class="language-plaintext highlighter-rouge">/Applications</code>, verify you’re the owner of the <code class="language-plaintext highlighter-rouge">Caskroom</code> directory by running <code class="language-plaintext highlighter-rouge">ls -dl "$(brew --prefix)/Caskroom"</code> and checking the third field. If you are not the owner, fix it with <code class="language-plaintext highlighter-rouge">sudo chown -R "$(whoami)" "$(brew --prefix)/Caskroom"</code>. If you are, the problem may lie in the app bundle itself.</p> <p>Some app bundles don’t have certain permissions that are necessary for us to move them to the appropriate location. You may check such permissions with <code class="language-plaintext highlighter-rouge">ls -ls &lt;path_to_app_bundle&gt;</code>. If you see something like <code class="language-plaintext highlighter-rouge">dr-xr-xr-x</code> at the start of the output, that may be the cause. To fix it, we change the app bundle’s permission to allow us to move it, and then set it back to what it was (in case the developer set those permissions deliberately). See <a href="https://github.com/Homebrew/homebrew-cask/blob/0cde71f1fea8ad62d6ec4732fcf35ac0c52d8792/Casks/litecoin.rb#L14L20"><code class="language-plaintext highlighter-rouge">litecoin</code></a> for an example of such a cask.</p> <p>Help us by <a href="https://github.com/Homebrew/homebrew-cask/blob/HEAD/CONTRIBUTING.md#updating-a-cask">submitting a fix</a>. If you get stumped, <a href="https://github.com/Homebrew/homebrew-cask/issues/new?template=01_bug_report.md">open an issue</a> explaining your steps so far and where you’re having trouble.</p> <h2 id="cask---source-is-not-there">Cask - source is not there</h2> <p>First, you need to identify which artifact is not being handled correctly anymore. It’s explicit in the error message: if it says <code class="language-plaintext highlighter-rouge">It seems the App source…'</code> the problem is <a href="cask-cookbook.html#stanza-app"><code class="language-plaintext highlighter-rouge">app</code></a>. The pattern is the same across <a href="cask-cookbook.html#at-least-one-artifact-stanza-is-also-required">all artifacts</a>.</p> <p>Fixing this error is typically easy, and requires only a bit of time on your part. Start by downloading the package for the cask: <code class="language-plaintext highlighter-rouge">brew fetch &lt;cask_name&gt;</code>. The last line of output will inform you of the location of the download. Navigate there and manually unpack it. As an example, lets say the structure inside the archive is as follows:</p> <pre data-language="plaintext">.
├─ Files/SomeApp.app
├─ Files/script.sh
└─ README.md</pre> <p>Now, let’s look at the cask (<code class="language-plaintext highlighter-rouge">brew cat &lt;cask_name&gt;</code>):</p> <pre data-language="plaintext">(…)
app "SomeApp.app"
(…)</pre> <p>The cask was expecting <code class="language-plaintext highlighter-rouge">SomeApp.app</code> to be in the top directory of the archive (see how it says simply <code class="language-plaintext highlighter-rouge">SomeApp.app</code>) but the developer changed it to inside a <code class="language-plaintext highlighter-rouge">Files</code> directory. All we have to do is update that line of the cask to follow the new structure: <code class="language-plaintext highlighter-rouge">app 'Files/SomeApp.app'</code>.</p> <p>Note that occasionally the app’s name changes completely (from <code class="language-plaintext highlighter-rouge">SomeApp.app</code> to <code class="language-plaintext highlighter-rouge">OtherApp.app</code>, let’s say). In these instances, the filename of the cask itself, as well as its token, must also change. Consult the <a href="cask-cookbook.html#token-reference"><code class="language-plaintext highlighter-rouge">token reference</code></a> for complete instructions on the new name.</p> <p>Help us by <a href="https://github.com/Homebrew/homebrew-cask/blob/HEAD/CONTRIBUTING.md#updating-a-cask">submitting a fix</a>. If you get stumped, <a href="https://github.com/Homebrew/homebrew-cask/issues/new?template=01_bug_report.md">open an issue</a> explaining your steps so far and where you’re having trouble.</p> <h2 id="cask---wrong-number-of-arguments">Cask - wrong number of arguments</h2> <p>Make sure the issue really lies with your macOS version. To do so, try to install the software manually. If it is incompatible with your macOS version, it will tell you. In that case, there is nothing we can do to help you install the software, but we can add a <a href="cask-cookbook.html#depends_on-macos"><code class="language-plaintext highlighter-rouge">depends_on macos:</code></a> stanza to prevent the cask from trying to install on incompatible macOS versions.</p> <p>Help us by <a href="https://github.com/Homebrew/homebrew-cask/blob/HEAD/CONTRIBUTING.md#updating-a-cask">submitting a fix</a>. If you get stumped, <a href="https://github.com/Homebrew/homebrew-cask/issues/new?template=01_bug_report.md">open an issue</a> explaining your steps so far and where you’re having trouble.</p> <h2 id="other-local-issues">Other local issues</h2> <p>If your Homebrew installation gets messed up (and fixing the issues found by <code class="language-plaintext highlighter-rouge">brew doctor</code> doesn’t solve the problem), reinstalling Homebrew may help to reset to a normal state. To easily reinstall Homebrew, use <a href="https://github.com/Homebrew/homebrew-bundle">Homebrew Bundle</a> to automatically restore your installed formulae and casks. To do so, run <code class="language-plaintext highlighter-rouge">brew bundle dump</code>, <a href="faq.html#how-do-i-uninstall-homebrew">uninstall</a>, <a href="installation.html">reinstall</a> and run <code class="language-plaintext highlighter-rouge">brew bundle install</code>.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2009&ndash;present Homebrew contributors<br>Licensed under the BSD 2-Clause License.<br>
    <a href="https://docs.brew.sh/Common-Issues" class="_attribution-link">https://docs.brew.sh/Common-Issues</a>
  </p>
</div>
