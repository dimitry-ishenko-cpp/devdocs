<h1 id="how-to-open-a-homebrew-pull-request">How To Open a Homebrew Pull Request</h1> <p>The following commands are used by Homebrew contributors to set up a fork of Homebrew’s Git repository on GitHub, create a new branch and create a GitHub pull request (“PR”) of the changes in that branch.</p> <p>Depending on the change you want to make, you need to send the pull request to the appropriate one of Homebrew’s main repositories. If you want to submit a change to Homebrew core code (the <code class="language-plaintext highlighter-rouge">brew</code> implementation), you should open the pull request on <a href="https://github.com/Homebrew/brew">Homebrew/brew</a>. If you want to submit a change for a formula, you should open the pull request on the <a href="https://github.com/Homebrew/homebrew-core">homebrew/core</a> tap, for casks you should open the pull request on the <a href="https://github.com/Homebrew/homebrew-cask">homebrew/cask</a> tap or another <a href="https://github.com/Homebrew">official tap</a>, based on the formula type.</p> <h2 id="submit-a-new-version-of-an-existing-formula">Submit a new version of an existing formula</h2> <ol> <li>Use <code class="language-plaintext highlighter-rouge">brew bump-formula-pr</code> to do everything (i.e. forking, committing, pushing) with a single command. Run <code class="language-plaintext highlighter-rouge">brew bump-formula-pr --help</code> to learn more.</li> </ol> <h2 id="submit-a-new-version-of-an-existing-cask">Submit a new version of an existing cask</h2> <ol> <li>Use <code class="language-plaintext highlighter-rouge">brew bump-cask-pr</code> to do everything (i.e. forking, committing, pushing) with a single command. Run <code class="language-plaintext highlighter-rouge">brew bump-cask-pr --help</code> to learn more.</li> </ol> <h2 id="set-up-your-own-fork-of-the-homebrew-repository">Set up your own fork of the Homebrew repository</h2> <h3 id="core-brew-code-related-pull-request">Core <code class="language-plaintext highlighter-rouge">brew</code> code related pull request</h3> <ol> <li>
<a href="https://github.com/Homebrew/brew/fork">Fork the Homebrew/brew repository on GitHub</a>. <ul> <li>This creates a personal remote repository that you can push to. This is needed because only Homebrew maintainers have push access to the main repositories.</li> </ul> </li> <li>Change to the directory containing your Homebrew installation: <pre data-language="bash">cd "$(brew --repository)"</pre> </li> <li>Add your pushable forked repository as a new remote: <pre data-language="bash">git remote add &lt;YOUR_USERNAME&gt; https://github.com/&lt;YOUR_USERNAME&gt;/brew.git</pre> <ul> <li>
<code class="language-plaintext highlighter-rouge">&lt;YOUR_USERNAME&gt;</code> is your GitHub username, not your local machine username.</li> </ul> </li> </ol> <h3 id="formulae-related-pull-request">Formulae related pull request</h3> <ol> <li>
<a href="https://github.com/Homebrew/homebrew-core/fork">Fork the Homebrew/homebrew-core repository on GitHub</a>. <ul> <li>This creates a personal remote repository that you can push to. This is needed because only Homebrew maintainers have push access to the main repositories.</li> </ul> </li> <li>Change to the directory containing Homebrew formulae: <pre data-language="bash">cd "$(brew --repository homebrew/core)"</pre> </li> <li>Add your pushable forked repository as a new remote: <pre data-language="bash">git remote add &lt;YOUR_USERNAME&gt; https://github.com/&lt;YOUR_USERNAME&gt;/homebrew-core.git</pre> <ul> <li>
<code class="language-plaintext highlighter-rouge">&lt;YOUR_USERNAME&gt;</code> is your GitHub username, not your local machine username.</li> </ul> </li> </ol> <h3 id="cask-related-pull-request">Cask related pull request</h3> <ol> <li>
<a href="https://github.com/Homebrew/homebrew-cask/fork">Fork the Homebrew/homebrew-cask repository on GitHub</a>. <ul> <li>This creates a personal remote repository that you can push to. This is needed because only Homebrew maintainers have push access to the main repositories.</li> </ul> </li> <li>Change to the directory containing Homebrew casks: <pre data-language="bash">cd "$(brew --repository homebrew/cask)"</pre> </li> <li>Add your pushable forked repository as a new remote: <pre data-language="bash">git remote add &lt;YOUR_USERNAME&gt; https://github.com/&lt;YOUR_USERNAME&gt;/homebrew-cask.git</pre> <ul> <li>
<code class="language-plaintext highlighter-rouge">&lt;YOUR_USERNAME&gt;</code> is your GitHub username, not your local machine username.</li> </ul> </li> </ol> <h2 id="create-your-pull-request-from-a-new-branch">Create your pull request from a new branch</h2> <p>To make a new branch and submit it for review, create a GitHub pull request with the following steps:</p> <ol> <li>Check out the <code class="language-plaintext highlighter-rouge">master</code> branch: <pre data-language="bash">git checkout master</pre> </li> <li>Retrieve new changes to the <code class="language-plaintext highlighter-rouge">master</code> branch: <pre data-language="bash">brew update</pre> </li> <li>Create a new branch from the latest <code class="language-plaintext highlighter-rouge">master</code> branch: <pre data-language="bash">git checkout -b &lt;YOUR_BRANCH_NAME&gt; origin/master</pre> </li> <li>Make your changes. For formulae or casks, use <code class="language-plaintext highlighter-rouge">brew edit</code> or your favourite text editor, following all the guidelines in the <a href="formula-cookbook.html">Formula Cookbook</a> or <a href="cask-cookbook.html">Cask Cookbook</a>. <ul> <li>If there’s a <code class="language-plaintext highlighter-rouge">bottle do</code> block in the formula, don’t remove or change it; we’ll update it when we pull your PR.</li> </ul> </li> <li>Test your changes by running the following, and ensure they all pass without issue. For changed formulae and casks, make sure you do the <code class="language-plaintext highlighter-rouge">brew audit</code> step while your changed formula/cask is installed. <pre data-language="bash">brew tests
 brew install --build-from-source &lt;CHANGED_FORMULA|CHANGED_CASK&gt;
 brew test &lt;CHANGED_FORMULA|CHANGED_CASK&gt;
 brew audit --strict --online &lt;CHANGED_FORMULA|CHANGED_CASK&gt;</pre> </li> <li>
<a href="formula-cookbook.html#commit">Make a separate commit</a> for each changed formula with <code class="language-plaintext highlighter-rouge">git add</code> and <code class="language-plaintext highlighter-rouge">git commit</code>. <ul> <li>Please note that our preferred commit message format for simple version updates is “<code class="language-plaintext highlighter-rouge">&lt;FORMULA_NAME&gt; &lt;NEW_VERSION&gt;</code>”, e.g. “<code class="language-plaintext highlighter-rouge">source-highlight 3.1.8</code>”.</li> </ul> </li> <li>Upload your branch of new commits to your fork: <pre data-language="bash">git push --set-upstream &lt;YOUR_USERNAME&gt; &lt;YOUR_BRANCH_NAME&gt;</pre> </li> <li>Go to the relevant repository (e.g. <a href="https://github.com/Homebrew/brew">https://github.com/Homebrew/brew</a>, <a href="https://github.com/Homebrew/homebrew-core">https://github.com/Homebrew/homebrew-core</a>, etc.) and create a pull request to request review and merging of the commits in your pushed branch. Explain why the change is needed and, if fixing a bug, how to reproduce the bug. Make sure you have done each step in the checklist that appears in your new PR.</li> <li>Await feedback or a merge from Homebrew’s maintainers. We typically respond to all PRs within a couple days, but it may take up to a week, depending on the maintainers’ workload.</li> </ol> <p>Thank you!</p> <h2 id="following-up">Following up</h2> <p>To respond well to feedback:</p> <ol> <li>Ask for clarification of anything you don’t understand and for help with anything you don’t know how to do.</li> <li>Post a comment on your pull request if you’ve provided all the requested changes/information and it hasn’t been merged after a week. Post a comment on your pull request if you’re stuck and need help. <ul> <li>A <code class="language-plaintext highlighter-rouge">needs response</code> label on a PR means that the Homebrew maintainers need you to respond to previous comments.</li> </ul> </li> <li>Keep discussion in the pull request unless requested otherwise (i.e. do not email maintainers privately).</li> <li>Do not continue discussion in closed pull requests.</li> <li>Do not argue with Homebrew maintainers. You may disagree but unless they change their mind, please implement what they request. Ultimately they control what is included in Homebrew, as they have to support any changes that are made.</li> </ol> <p>To make changes based on feedback:</p> <ol> <li>Check out your branch again: <pre data-language="bash">git checkout &lt;YOUR_BRANCH_NAME&gt;</pre> </li> <li>Make any requested changes and commit them with <code class="language-plaintext highlighter-rouge">git add</code> and <code class="language-plaintext highlighter-rouge">git commit</code>.</li> <li>Squash new commits into one commit per formula: <pre data-language="bash">git rebase --interactive origin/master</pre> <ul> <li>If you are working on a PR for a single formula, <code class="language-plaintext highlighter-rouge">git commit --amend</code> is a convenient way of keeping your commits squashed as you go.</li> </ul> </li> <li>Push to your remote fork’s branch and the pull request: <pre data-language="bash">git push --force</pre> </li> </ol> <p>Once all feedback has been addressed and if it’s a change we want to include (we include most changes), then we’ll add your commit to Homebrew. Note that the PR status may show up as “Closed” instead of “Merged” because of the way we merge contributions. Don’t worry: you will still get author credit in the actual merged commit.</p> <p>Well done, you are now a Homebrew contributor!</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2009&ndash;present Homebrew contributors<br>Licensed under the BSD 2-Clause License.<br>
    <a href="https://docs.brew.sh/How-To-Open-a-Homebrew-Pull-Request" class="_attribution-link">https://docs.brew.sh/How-To-Open-a-Homebrew-Pull-Request</a>
  </p>
</div>
