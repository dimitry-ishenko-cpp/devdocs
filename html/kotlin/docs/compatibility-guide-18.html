<h1 data-toc="compatibility-guide-18" id="compatibility-guide-18.md">Compatibility guide for Kotlin 1.8</h1>
<p id="e3d3496e"><em id="592c3687" class=""><a href="kotlin-evolution.html" id="eea7f73c">Keeping the Language Modern</a></em> and <em id="4f8ee87e" class=""><a href="kotlin-evolution.html" id="89e83a6c">Comfortable Updates</a></em> are among the fundamental principles in Kotlin Language Design. The former says that constructs which obstruct language evolution should be removed, and the latter says that this removal should be well-communicated beforehand to make code migration as smooth as possible.</p>
<p id="1c95b5ec">While most of the language changes were already announced through other channels, like update changelogs or compiler warnings, this document summarizes them all, providing a complete reference for migration from Kotlin 1.7 to Kotlin 1.8.</p>
<section class="chapter"><h2 id="basic-terms" data-toc="basic-terms">Basic terms</h2>
<p id="7a631691">In this document we introduce several kinds of compatibility:</p>
<ul class="list _bullet" id="ab5c0c0b">
<li class="list__item" id="9fe3ee0d"><p><em id="a2ed7bdb" class="">source</em>: source-incompatible change stops code that used to compile fine (without errors or warnings) from compiling anymore</p></li>
<li class="list__item" id="cf8a617"><p><em id="129f5e31" class="">binary</em>: two binary artifacts are said to be binary-compatible if interchanging them doesn't lead to loading or linkage errors</p></li>
<li class="list__item" id="384a8b3f"><p><em id="ab79ee70" class="">behavioral</em>: a change is said to be behavioral-incompatible if the same program demonstrates different behavior before and after applying the change</p></li>
</ul>
<p id="1c8d5e87">Remember that those definitions are given only for pure Kotlin. Compatibility of Kotlin code from the other languages perspective (for example, from Java) is out of the scope of this document.</p></section><section class="chapter"><h2 id="language" data-toc="language">Language</h2>
<section class="chapter"><h3 id="prohibit-the-delegation-of-super-calls-to-an-abstract-superclass-member" data-toc="prohibit-the-delegation-of-super-calls-to-an-abstract-superclass-member">Prohibit the delegation of super calls to an abstract superclass member</h3>
<aside data-type="tip" class="prompt" data-title="" id="1ffb5748"><p id="6a7a864a"><b id="d9935f22" class="">Issues</b>: <a href="https://youtrack.jetbrains.com/issue/KT-45508" id="cf0d4385" data-external="true" rel="noopener noreferrer">KT-45508</a>, <a href="https://youtrack.jetbrains.com/issue/KT-49017" id="63757e2d" data-external="true" rel="noopener noreferrer">KT-49017</a>, <a href="https://youtrack.jetbrains.com/issue/KT-38078" id="19755345" data-external="true" rel="noopener noreferrer">KT-38078</a></p>
<p id="c35c3e24"><b id="d4f55d39" class="">Component</b>: Core language</p>
<p id="33856445"><b id="395c4bca" class="">Incompatible change type</b>: source</p>
<p id="983ea00e"><b id="7e06f71e" class="">Short summary</b>: Kotlin will report a compile error when an explicit or implicit super call is delegated to an <em id="4b48ddc1" class="">abstract</em> member of the superclass, even if there's a default implementation in a super interface</p>
<p id="ece9bbed"><b id="f809f9bc" class="">Deprecation cycle</b>:</p>
<ul class="list _bullet" id="f5ef7819">
<li class="list__item" id="f48cfa23"><p>1.5.20: introduce a warning when non-abstract classes that do not override all abstract members are used</p></li>
<li class="list__item" id="c394a69"><p>1.7.0: report a warning if a super call, in fact, accesses an abstract member from a superclass</p></li>
<li class="list__item" id="8bd63676"><p>1.7.0: report an error in all affected cases if the <code class="code ">-Xjvm-default=all</code> or <code class="code ">-Xjvm-default=all-compatibility</code> compatibility modes are enabled; report an error in the progressive mode</p></li>
<li class="list__item" id="8bb2301c"><p>1.8.0: report an error in cases of declaring a concrete class with a non-overridden abstract method from the superclass, and super calls of <code class="code ">Any</code> methods are overridden as abstract in the superclass</p></li>
<li class="list__item" id="c32a752d"><p>1.9.0: report an error in all affected cases, including explicit super calls to an abstract method from the super class</p></li>
</ul></aside></section><section class="chapter"><h3 id="deprecate-confusing-grammar-in-when-with-subject" data-toc="deprecate-confusing-grammar-in-when-with-subject">Deprecate confusing grammar in when-with-subject</h3>
<aside data-type="tip" class="prompt" data-title="" id="c854f709"><p id="b018f2b5"><b id="41e0b2d4" class="">Issue</b>: <a href="https://youtrack.jetbrains.com/issue/KT-48385" id="418e9252" data-external="true" rel="noopener noreferrer">KT-48385</a></p>
<p id="87ab6f44"><b id="daf596ab" class="">Component</b>: Core language</p>
<p id="20275fdd"><b id="a05b798e" class="">Incompatible change type</b>: source</p>
<p id="6eb2ac9e"><b id="bd67c70" class="">Short summary</b>: Kotlin 1.6 deprecated several confusing grammar constructs in <code class="code ">when</code> condition expressions</p>
<p id="381eafc0"><b id="23c657a6" class="">Deprecation cycle</b>:</p>
<ul class="list _bullet" id="76c75ce6">
<li class="list__item" id="a0dd55c2"><p>1.6.20: introduce a deprecation warning on the affected expressions</p></li>
<li class="list__item" id="30fb57e9"><p>1.8.0: raise this warning to an error, <code class="code ">-XXLanguage:-ProhibitConfusingSyntaxInWhenBranches</code> can be used to temporarily revert to the pre-1.8 behavior</p></li>
<li class="list__item" id="f9d71911"><p>&gt;= 1.9: repurpose some deprecated constructs for new language features</p></li>
</ul></aside></section><section class="chapter"><h3 id="prevent-implicit-coercions-between-different-numeric-types" data-toc="prevent-implicit-coercions-between-different-numeric-types">Prevent implicit coercions between different numeric types</h3>
<aside data-type="tip" class="prompt" data-title="" id="1dc1cd8d"><p id="64296bff"><b id="73cd4584" class="">Issue</b>: <a href="https://youtrack.jetbrains.com/issue/KT-48645" id="f1fe510e" data-external="true" rel="noopener noreferrer">KT-48645</a></p>
<p id="4fb8cf44"><b id="dbef2f01" class="">Component</b>: Kotlin/JVM</p>
<p id="713a6512"><b id="4e63f644" class="">Incompatible change type</b>: behavioral</p>
<p id="1575cc90"><b id="cbf72c4b" class="">Short summary</b>: Kotlin will avoid converting numeric values automatically to a primitive numeric type where only a downcast to that type is needed semantically</p>
<p id="573e6502"><b id="971c4cd8" class="">Deprecation cycle</b>:</p>
<ul class="list _bullet" id="4df460a">
<li class="list__item" id="e736582b"><p>&lt; 1.5.30: the old behavior in all affected cases</p></li>
<li class="list__item" id="cd7f6d56"><p>1.5.30: fix the downcast behavior in generated property delegate accessors, <code class="code ">-Xuse-old-backend</code> can be used to temporarily revert to the pre-1.5.30 fix behavior</p></li>
<li class="list__item" id="e17d23da"><p>&gt;= 1.9: fix the downcast behavior in other affected cases</p></li>
</ul></aside></section><section class="chapter"><h3 id="make-private-constructors-of-sealed-classes-really-private" data-toc="make-private-constructors-of-sealed-classes-really-private">Make private constructors of sealed classes really private</h3>
<aside data-type="tip" class="prompt" data-title="" id="dfbb25b3"><p id="2cbad788"><b id="4d90afed" class="">Issue</b>: <a href="https://youtrack.jetbrains.com/issue/KT-44866" id="e4e174a1" data-external="true" rel="noopener noreferrer">KT-44866</a></p>
<p id="8f7a5d0"><b id="2eb06216" class="">Component</b>: Core language</p>
<p id="bce1d509"><b id="37a3b698" class="">Incompatible change type</b>: source</p>
<p id="43a6039b"><b id="1b8e9841" class="">Short summary</b>: after relaxing restrictions on where the inheritors of sealed classes could be declared in the project structure, the default visibility of sealed class constructors became protected. However, until 1.8, Kotlin still allowed calling explicitly declared private constructors of sealed classes outside those classes' scopes</p>
<p id="a5dfaa68"><b id="88650ef9" class="">Deprecation cycle</b>:</p>
<ul class="list _bullet" id="dc87f1ee">
<li class="list__item" id="fa577210"><p>1.6.20: report a warning (or an error in the progressive mode) when a private constructor of a sealed class is called outside that class</p></li>
<li class="list__item" id="57009576"><p>1.8.0: use default visibility rules for private constructors (a call to a private constructor can be resolved only if this call is inside the corresponding class), the old behavior can be brought back temporarily by specifying the <code class="code ">-XXLanguage:-UseConsistentRulesForPrivateConstructorsOfSealedClasses</code> compiler argument</p></li>
</ul></aside></section><section class="chapter"><h3 id="prohibit-using-operator-on-incompatible-numeric-types-in-builder-inference-context" data-toc="prohibit-using-operator-on-incompatible-numeric-types-in-builder-inference-context">Prohibit using operator == on incompatible numeric types in builder inference context</h3>
<aside data-type="tip" class="prompt" data-title="" id="236de3a"><p id="7ba0709b"><b id="1678575b" class="">Issue</b>: <a href="https://youtrack.jetbrains.com/issue/KT-45508" id="ad1d0ae6" data-external="true" rel="noopener noreferrer">KT-45508</a></p>
<p id="2343fc98"><b id="5281ba85" class="">Component</b>: Core language</p>
<p id="9555c926"><b id="6685c5de" class="">Incompatible change type</b>: source</p>
<p id="7244811d"><b id="1abbfcc9" class="">Short summary</b>: Kotlin 1.8 will prohibit using the operator <code class="code ">==</code> on incompatible numeric types, for example, <code class="code ">Int</code> and <code class="code ">Long</code>, in scopes of builder inference lambda functions, the same way as it currently does in other contexts</p>
<p id="6d5513b9"><b id="77c62048" class="">Deprecation cycle</b>:</p>
<ul class="list _bullet" id="e11734f6">
<li class="list__item" id="517901a2"><p>1.6.20: report a warning (or an error in the progressive mode) when the operator <code class="code ">==</code> is used on incompatible numeric types</p></li>
<li class="list__item" id="79361aad"><p>1.8.0: raise the warning to an error, <code class="code ">-XXLanguage:-ProperEqualityChecksInBuilderInferenceCalls</code> can be used to temporarily revert to the pre-1.8 behavior</p></li>
</ul></aside></section><section class="chapter"><h3 id="prohibit-if-without-else-and-non-exhaustive-when-in-right-hand-side-of-elvis-operator" data-toc="prohibit-if-without-else-and-non-exhaustive-when-in-right-hand-side-of-elvis-operator">Prohibit if without else and non-exhaustive when in right hand side of elvis operator</h3>
<aside data-type="tip" class="prompt" data-title="" id="77cc3335"><p id="f7e2ed77"><b id="7056663f" class="">Issue</b>: <a href="https://youtrack.jetbrains.com/issue/KT-44705" id="14fb15a3" data-external="true" rel="noopener noreferrer">KT-44705</a></p>
<p id="3139a57e"><b id="15b94a46" class="">Component</b>: Core language</p>
<p id="226e4c73"><b id="5dc17150" class="">Incompatible change type</b>: source</p>
<p id="d2789031"><b id="28ca3b8b" class="">Short summary</b>: Kotlin 1.8 will prohibit using a non-exhaustive <code class="code ">when</code> or the <code class="code ">if</code> expression without an <code class="code ">else</code> branch on the right hand side of the Elvis operator (<code class="code ">?:</code>). Previously, it was allowed if the Elvis operator's result was not used as an expression</p>
<p id="66aa4c7a"><b id="f31b1d2a" class="">Deprecation cycle</b>:</p>
<ul class="list _bullet" id="51abfac6">
<li class="list__item" id="677a7245"><p>1.6.20: report a warning (or an error in the progressive mode) on such non-exhaustive if and when expressions</p></li>
<li class="list__item" id="a7339"><p>1.8.0: raise this warning to an error,<br><code class="code ">-XXLanguage:-ProhibitNonExhaustiveIfInRhsOfElvis</code> can be used to temporarily revert to the pre-1.8 behavior</p></li>
</ul></aside></section><section class="chapter"><h3 id="prohibit-upper-bound-violation-in-a-generic-type-alias-usage-one-type-parameter-used-in-several-type-arguments-of-the-aliased-type" data-toc="prohibit-upper-bound-violation-in-a-generic-type-alias-usage-one-type-parameter-used-in-several-type-arguments-of-the-aliased-type">Prohibit upper bound violation in a generic type alias usage (one type parameter used in several type arguments of the aliased type)</h3>
<aside data-type="tip" class="prompt" data-title="" id="882a749e"><p id="811dca18"><b id="6ad81d9a" class="">Issues</b>: <a href="https://youtrack.jetbrains.com/issue/KT-29168" id="82aeaaea" data-external="true" rel="noopener noreferrer">KT-29168</a></p>
<p id="752992fc"><b id="6e17af85" class="">Component</b>: Core language</p>
<p id="a796f030"><b id="ff79b88" class="">Incompatible change type</b>: source</p>
<p id="894296c0"><b id="13f30e95" class="">Short summary</b>: Kotlin 1.8 will prohibit using a type alias with type arguments that violate the upper bound restrictions of the corresponding type parameters of the aliased type in case when one typealias type parameter is used in several type arguments of the aliased type, for example, <code class="code ">typealias Alias&lt;T&gt; = Base&lt;T, T&gt;</code></p>
<p id="1b7185a6"><b id="d4cf4889" class="">Deprecation cycle</b>:</p>
<ul class="list _bullet" id="cd9c3a38">
<li class="list__item" id="ad4b8eed"><p>1.7.0: report a warning (or an error in the progressive mode) on usages of a type alias with type arguments violating upper bound constraints of the corresponding type parameters of the aliased type</p></li>
<li class="list__item" id="a9eb4fd2"><p>1.8.0: raise this warning to an error, <code class="code ">-XXLanguage:-ReportMissingUpperBoundsViolatedErrorOnAbbreviationAtSupertypes</code> can be used to temporarily revert to the pre-1.8 behavior</p></li>
</ul></aside></section><section class="chapter"><h3 id="prohibit-upper-bound-violation-in-a-generic-type-alias-usage-a-type-parameter-used-in-a-generic-type-argument-of-a-type-argument-of-the-aliased-type" data-toc="prohibit-upper-bound-violation-in-a-generic-type-alias-usage-a-type-parameter-used-in-a-generic-type-argument-of-a-type-argument-of-the-aliased-type">Prohibit upper bound violation in a generic type alias usage (a type parameter used in a generic type argument of a type argument of the aliased type)</h3>
<aside data-type="tip" class="prompt" data-title="" id="fd00c7ae"><p id="4d42e850"><b id="43072b99" class="">Issue</b>: <a href="https://youtrack.jetbrains.com/issue/KT-54066" id="c7b713c8" data-external="true" rel="noopener noreferrer">KT-54066</a></p>
<p id="ef1e1c39"><b id="7ede6d92" class="">Component</b>: Core language</p>
<p id="c03bbc60"><b id="a39e81e4" class="">Incompatible change type</b>: source</p>
<p id="6e7ea214"><b id="cd825a9a" class="">Short summary</b>: Kotlin will prohibit using a type alias with type arguments that violate the upper bound restrictions of the corresponding type parameters of the aliased type in case when the typealias type parameter is used as a generic type argument of a type argument of the aliased type, for example, <code class="code ">typealias Alias&lt;T&gt; = Base&lt;List&lt;T&gt;&gt;</code></p>
<p id="947b881b"><b id="7a20d8a3" class="">Deprecation cycle</b>:</p>
<ul class="list _bullet" id="aa63ca35">
<li class="list__item" id="d74b15e"><p>1.8.0: report a warning when a generic typealias usage has type arguments violating upper bound constraints of the corresponding type parameters of the aliased type</p></li>
<li class="list__item" id="4f1fbcc9"><p>&gt;=1.10: raise the warning to an error</p></li>
</ul></aside></section><section class="chapter"><h3 id="prohibit-using-a-type-parameter-declared-for-an-extension-property-inside-delegate" data-toc="prohibit-using-a-type-parameter-declared-for-an-extension-property-inside-delegate">Prohibit using a type parameter declared for an extension property inside delegate</h3>
<aside data-type="tip" class="prompt" data-title="" id="1ec2b3eb"><p id="40529281"><b id="9c058c7b" class="">Issue</b>: <a href="https://youtrack.jetbrains.com/issue/KT-24643" id="f67c97e6" data-external="true" rel="noopener noreferrer">KT-24643</a></p>
<p id="313eff43"><b id="ca1a038f" class="">Component</b>: Core language</p>
<p id="a2953ccc"><b id="1e440c44" class="">Incompatible change type</b>: source</p>
<p id="f951b74b"><b id="35dc6c44" class="">Short summary</b>: Kotlin 1.8 will prohibit delegating extension properties on a generic type to generic types that use the type parameter of the receiver in an unsafe way</p>
<p id="e448150a"><b id="8422f114" class="">Deprecation cycle</b>:</p>
<ul class="list _bullet" id="47f38f1d">
<li class="list__item" id="c7a7897f"><p>1.6.0: report a warning (or an error in the progressive mode) when delegating an extension property to a type that uses type parameters inferred from the delegated property's type arguments in a particular way</p></li>
<li class="list__item" id="e48210fd"><p>1.8.0: raise the warning to an error, <code class="code ">-XXLanguage:-ForbidUsingExtensionPropertyTypeParameterInDelegate</code> can be used to temporarily revert to the pre-1.8 behavior</p></li>
</ul></aside></section><section class="chapter"><h3 id="forbid-synchronized-annotation-on-suspend-functions" data-toc="forbid-synchronized-annotation-on-suspend-functions">Forbid @Synchronized annotation on suspend functions</h3>
<aside data-type="tip" class="prompt" data-title="" id="facc14c3"><p id="d0be4380"><b id="81a4510e" class="">Issue</b>: <a href="https://youtrack.jetbrains.com/issue/KT-48516" id="92826990" data-external="true" rel="noopener noreferrer">KT-48516</a></p>
<p id="423d28e8"><b id="41f65d87" class="">Component</b>: Core language</p>
<p id="95ee3b1a"><b id="ef174aa7" class="">Incompatible change type</b>: source</p>
<p id="c881bdd1"><b id="944efbbb" class="">Short summary</b>: Kotlin 1.8 will prohibit placing the <code class="code ">@Synchronized</code> annotation on suspend functions because a suspending call should not be allowed to happen inside a synchronized block</p>
<p id="9d2d7bcd"><b id="f185118d" class="">Deprecation cycle</b>:</p>
<ul class="list _bullet" id="15cf234d">
<li class="list__item" id="8834299d"><p>1.6.0: report a warning on suspend functions annotated with the <code class="code ">@Synchronized</code> annotation, the warning is reported as an error in the progressive mode</p></li>
<li class="list__item" id="23b6d76b"><p>1.8.0: raise the warning to an error, <code class="code ">-XXLanguage:-SynchronizedSuspendError</code> can be used to temporarily revert to the pre-1.8 behavior</p></li>
</ul></aside></section><section class="chapter"><h3 id="prohibit-using-spread-operator-for-passing-arguments-to-non-vararg-parameters" data-toc="prohibit-using-spread-operator-for-passing-arguments-to-non-vararg-parameters">Prohibit using spread operator for passing arguments to non-vararg parameters</h3>
<aside data-type="tip" class="prompt" data-title="" id="5029d60e"><p id="814bd33f"><b id="657404ac" class="">Issue</b>: <a href="https://youtrack.jetbrains.com/issue/KT-48162" id="2b95c11c" data-external="true" rel="noopener noreferrer">KT-48162</a></p>
<p id="a2d902d6"><b id="183f1618" class="">Component</b>: Core language</p>
<p id="8fe33479"><b id="6a367b1" class="">Incompatible change type</b>: source</p>
<p id="8e126d4a"><b id="eb45e8e0" class="">Short summary</b>: Kotlin allowed passing arrays with the spread operator (<code class="code ">*</code>) to non-vararg array parameters in certain conditions. Since Kotlin 1.8, this will be prohibited</p>
<p id="d6c99060"><b id="6eb44b6a" class="">Deprecation cycle</b>:</p>
<ul class="list _bullet" id="bd93eba1">
<li class="list__item" id="6276a058"><p>1.6.0: report a warning (or an error in the progressive mode) on using the spread operator where a non-vararg array parameter is expected</p></li>
<li class="list__item" id="5d8eb669"><p>1.8.0: raise the warning to an error, <code class="code ">-XXLanguage:-ReportNonVarargSpreadOnGenericCalls</code> can be used to temporarily revert to the pre-1.8 behavior</p></li>
</ul></aside></section><section class="chapter"><h3 id="prohibit-null-safety-violation-in-lambdas-passed-to-functions-overloaded-by-lambda-return-type" data-toc="prohibit-null-safety-violation-in-lambdas-passed-to-functions-overloaded-by-lambda-return-type">Prohibit null-safety violation in lambdas passed to functions overloaded by lambda return type</h3>
<aside data-type="tip" class="prompt" data-title="" id="2e97afac"><p id="434e954"><b id="462b1e2e" class="">Issue</b>: <a href="https://youtrack.jetbrains.com/issue/KT-49658" id="36f5dcce" data-external="true" rel="noopener noreferrer">KT-49658</a></p>
<p id="2b5e9bde"><b id="f9ebf958" class="">Component</b>: Core language</p>
<p id="f7ec1d17"><b id="f93647ec" class="">Incompatible change type</b>: source</p>
<p id="5f9c5125"><b id="a91a6a1f" class="">Short summary</b>: Kotlin 1.8 will prohibit returning <code class="code ">null</code> from lambdas passed to functions overloaded by those lambdas' return types when overloads don't allow a nullable return type. Previously, it was allowed when <code class="code ">null</code> was returned from one of the branches of the <code class="code ">when</code> operator</p>
<p id="9351b3f"><b id="8e2c5635" class="">Deprecation cycle</b>:</p>
<ul class="list _bullet" id="4446b28a">
<li class="list__item" id="ef64f9cf"><p>1.6.20: report a type mismatch warning (or an error in the progressive mode)</p></li>
<li class="list__item" id="b01868e6"><p>1.8.0: raise the warning to an error, <code class="code ">-XXLanguage:-DontLoseDiagnosticsDuringOverloadResolutionByReturnType</code> can be used to temporarily revert to the pre-1.8 behavior</p></li>
</ul></aside></section><section class="chapter"><h3 id="keep-nullability-when-approximating-local-types-in-public-signatures" data-toc="keep-nullability-when-approximating-local-types-in-public-signatures">Keep nullability when approximating local types in public signatures</h3>
<aside data-type="tip" class="prompt" data-title="" id="456cdf0f"><p id="4e52ed84"><b id="bbc999c5" class="">Issue</b>: <a href="https://youtrack.jetbrains.com/issue/KT-53982" id="79e4a71e" data-external="true" rel="noopener noreferrer">KT-53982</a></p>
<p id="7e8f2e4c"><b id="39ecb5b5" class="">Component</b>: Core language</p>
<p id="720cb84b"><b id="43f65299" class="">Incompatible change type</b>: source, binary</p>
<p id="1b61b57e"><b id="c27c1a1e" class="">Short summary</b>: when a local or anonymous type is returned from an expression-body function without an explicitly specified return type, Kotlin compiler infers (or approximates) the return type using the known supertype of that type. During this, the compiler can infer a non-nullable type where the null value could in fact be returned</p>
<p id="f5e24b16"><b id="3b97d892" class="">Deprecation cycle</b>:</p>
<ul class="list _bullet" id="2cf951c0">
<li class="list__item" id="6f3b5ce3"><p>1.8.0: approximate flexible types by flexible supertypes</p></li>
<li class="list__item" id="9c43a0a6"><p>1.8.0: report a warning when a declaration is inferred to have a non-nullable type that should be nullable, prompting users to specify the type explicitly</p></li>
<li class="list__item" id="a35378e"><p>1.9.0: approximate nullable types by nullable supertypes, <code class="code ">-XXLanguage:-KeepNullabilityWhenApproximatingLocalType</code> can be used to temporarily revert to the pre-1.9 behavior</p></li>
</ul></aside></section><section class="chapter"><h3 id="do-not-propagate-deprecation-through-overrides" data-toc="do-not-propagate-deprecation-through-overrides">Do not propagate deprecation through overrides</h3>
<aside data-type="tip" class="prompt" data-title="" id="2a7490d1"><p id="1baba253"><b id="f675bf36" class="">Issue</b>: <a href="https://youtrack.jetbrains.com/issue/KT-47902" id="3efb9b87" data-external="true" rel="noopener noreferrer">KT-47902</a></p>
<p id="498fe9"><b id="28656280" class="">Component</b>: Core language</p>
<p id="35615481"><b id="c4bed860" class="">Incompatible change type</b>: source</p>
<p id="b926561f"><b id="9978da11" class="">Short summary</b>: Kotlin 1.9 will no longer propagate deprecation from a deprecated member in the superclass to its overriding member in the subclass, thus providing an explicit mechanism for deprecating a member of the superclass while leaving it non-deprecated in the subclass</p>
<p id="94535412"><b id="db3ee0d8" class="">Deprecation cycle</b>:</p>
<ul class="list _bullet" id="40b7c45f">
<li class="list__item" id="32a18919"><p>1.6.20: reporting a warning with the message of the future behavior change and a prompt to either suppress this warning or explicitly write a <code class="code ">@Deprecated</code> annotation on an override of a deprecated member</p></li>
<li class="list__item" id="e81796de"><p>1.9.0: stop propagating deprecation status to the overridden members. This change also takes effect immediately in the progressive mode</p></li>
</ul></aside></section><section class="chapter"><h3 id="prohibit-implicit-inferring-a-type-variable-into-an-upper-bound-in-the-builder-inference-context" data-toc="prohibit-implicit-inferring-a-type-variable-into-an-upper-bound-in-the-builder-inference-context">Prohibit implicit inferring a type variable into an upper bound in the builder inference context</h3>
<aside data-type="tip" class="prompt" data-title="" id="6f5d0fd0"><p id="de41eed8"><b id="8a5d5d11" class="">Issue</b>: <a href="https://youtrack.jetbrains.com/issue/KT-47986" id="f9130bfa" data-external="true" rel="noopener noreferrer">KT-47986</a></p>
<p id="3eaa615b"><b id="ea020ce4" class="">Component</b>: Core language</p>
<p id="d2dea332"><b id="95cd59a3" class="">Incompatible change type</b>: source</p>
<p id="85f7696e"><b id="98f669a5" class="">Short summary</b>: Kotlin 1.9 will prohibit inferring a type variable into the corresponding type parameter's upper bound in the absence of any use-site type information in the scope of builder inference lambda functions, the same way as it does currently in other contexts</p>
<p id="547a584"><b id="b34d2acd" class="">Deprecation cycle</b>:</p>
<ul class="list _bullet" id="ea5cebfc">
<li class="list__item" id="aa104606"><p>1.7.20: report a warning (or an error in the progressive mode) when a type parameter is inferred into declared upper bounds in the absence of use-site type information</p></li>
<li class="list__item" id="1319d5af"><p>1.9.0: raise the warning to an error, <code class="code ">-XXLanguage:-ForbidInferringPostponedTypeVariableIntoDeclaredUpperBound</code> can be used to temporarily revert to the pre-1.9 behavior</p></li>
</ul></aside></section><section class="chapter"><h3 id="prohibit-using-collection-literals-in-annotation-classes-anywhere-except-their-parameters-declaration" data-toc="prohibit-using-collection-literals-in-annotation-classes-anywhere-except-their-parameters-declaration">Prohibit using collection literals in annotation classes anywhere except their parameters declaration</h3>
<aside data-type="tip" class="prompt" data-title="" id="d23088c8"><p id="d06efa68"><b id="99fac6a0" class="">Issue</b>: <a href="https://youtrack.jetbrains.com/issue/KT-39041" id="7a68cd42" data-external="true" rel="noopener noreferrer">KT-39041</a></p>
<p id="873e43e3"><b id="4835aeda" class="">Component</b>: Core language</p>
<p id="2e2252ac"><b id="311ea3b4" class="">Incompatible change type</b>: source</p>
<p id="a8f39273"><b id="dd07e287" class="">Short summary</b>: Kotlin allows using collection literals in a restricted way - for passing arrays to parameters of annotation classes or specifying default values for these parameters. However besides that, Kotlin allowed using collections literals anywhere else inside an annotation class, for example, in its nested object. Kotlin 1.9 will prohibit using collection literals in annotation classes anywhere except their parameters' default values.</p>
<p id="76027ffb"><b id="6d06b3de" class="">Deprecation cycle</b>:</p>
<ul class="list _bullet" id="8a7efb5">
<li class="list__item" id="c282766f"><p>1.7.0: report a warning (or an error in the progressive mode) on array literals in nested objects in annotation classes</p></li>
<li class="list__item" id="b5ec723"><p>1.9.0: raise the warning to an error</p></li>
</ul></aside></section><section class="chapter"><h3 id="prohibit-forward-referencing-of-parameters-with-default-values-in-default-value-expressions" data-toc="prohibit-forward-referencing-of-parameters-with-default-values-in-default-value-expressions">Prohibit forward referencing of parameters with default values in default value expressions</h3>
<aside data-type="tip" class="prompt" data-title="" id="24b6c3ab"><p id="b26b3e44"><b id="622e2f59" class="">Issue</b>: <a href="https://youtrack.jetbrains.com/issue/KT-25694" id="713ea013" data-external="true" rel="noopener noreferrer">KT-25694</a></p>
<p id="2722ce3c"><b id="6c82799a" class="">Component</b>: Core language</p>
<p id="c8c3e308"><b id="9e817932" class="">Incompatible change type</b>: source</p>
<p id="19d79640"><b id="533f7bd7" class="">Short summary</b>: Kotlin 1.9 will prohibit forward referencing of parameters with default values in default value expressions of other parameters. This ensures that by the time the parameter is accessed in a default value expression, it would already have a value either passed to the function or initialized by its own default value expression</p>
<p id="2569c4ac"><b id="50987cc7" class="">Deprecation cycle</b>:</p>
<ul class="list _bullet" id="499b8988">
<li class="list__item" id="5e68dbc1"><p>1.7.0: report a warning (or an error in the progressive mode) when a parameter with default value is references in default value of another parameter that comes before it</p></li>
<li class="list__item" id="c14849b"><p>1.9.0: raise the warning to an error, <code class="code ">-XXLanguage:-ProhibitIllegalValueParameterUsageInDefaultArguments</code> can be used to temporarily revert to the pre-1.9 behavior</p></li>
</ul></aside></section><section class="chapter"><h3 id="prohibit-extension-calls-on-inline-functional-parameters" data-toc="prohibit-extension-calls-on-inline-functional-parameters">Prohibit extension calls on inline functional parameters</h3>
<aside data-type="tip" class="prompt" data-title="" id="2301c9da"><p id="cd33270b"><b id="7ae3740" class="">Issue</b>: <a href="https://youtrack.jetbrains.com/issue/KT-52502" id="ffbefbdc" data-external="true" rel="noopener noreferrer">KT-52502</a></p>
<p id="d4e46f04"><b id="6e1cfcda" class="">Component</b>: Core language</p>
<p id="dc503753"><b id="70373f43" class="">Incompatible change type</b>: source</p>
<p id="20785634"><b id="fd13cc84" class="">Short summary</b>: while Kotlin allowed passing an inline functional parameter to another inline function as a receiver, it always resulted in compiler exceptions when compiling such code. Kotlin 1.9 will prohibit this, thus reporting an error instead of crashing the compiler</p>
<p id="74fc774a"><b id="862b2b79" class="">Deprecation cycle</b>:</p>
<ul class="list _bullet" id="32fe1286">
<li class="list__item" id="ec5f3c9a"><p>1.7.20: report a warning (or an error in the progressive mode) for inline extension calls on inline functional parameters</p></li>
<li class="list__item" id="5e15f60f"><p>1.9.0: raise the warning to an error</p></li>
</ul></aside></section><section class="chapter"><h3 id="prohibit-calls-to-infix-functions-named-suspend-with-an-anonymous-function-argument" data-toc="prohibit-calls-to-infix-functions-named-suspend-with-an-anonymous-function-argument">Prohibit calls to infix functions named suspend with an anonymous function argument</h3>
<aside data-type="tip" class="prompt" data-title="" id="265131b6"><p id="e938d2df"><b id="a82d7e28" class="">Issue</b>: <a href="https://youtrack.jetbrains.com/issue/KT-49264" id="559f4af2" data-external="true" rel="noopener noreferrer">KT-49264</a></p>
<p id="1ef6aab"><b id="760d50f8" class="">Component</b>: Core language</p>
<p id="117b103b"><b id="8f417ce0" class="">Incompatible change type</b>: source</p>
<p id="2f0defa1"><b id="d1381dbd" class="">Short summary</b>: Kotlin 1.9 will no longer allow calling infix functions named <code class="code ">suspend</code> that have a single argument of a functional type passed as an anonymous function literal</p>
<p id="eb8c98d5"><b id="11321e2" class="">Deprecation cycle</b>:</p>
<ul class="list _bullet" id="e22bded7">
<li class="list__item" id="691aaef9"><p>1.7.20: report a warning on suspend infix calls with an anonymous function literal</p></li>
<li class="list__item" id="6306bb8f"><p>1.9.0: raise the warning to an error, <code class="code ">-XXLanguage:-ModifierNonBuiltinSuspendFunError</code> can be used to temporarily revert to the pre-1.9 behavior</p></li>
<li class="list__item" id="331d5187"><p>&gt;=1.10: Change how the <code class="code ">suspend fun</code> token sequence is interpreted by the parser</p></li>
</ul></aside></section><section class="chapter"><h3 id="prohibit-using-captured-type-parameters-in-inner-classes-against-their-variance" data-toc="prohibit-using-captured-type-parameters-in-inner-classes-against-their-variance">Prohibit using captured type parameters in inner classes against their variance</h3>
<aside data-type="tip" class="prompt" data-title="" id="db58283"><p id="287d0b72"><b id="524c26b5" class="">Issue</b>: <a href="https://youtrack.jetbrains.com/issue/KT-50947" id="9f33ce96" data-external="true" rel="noopener noreferrer">KT-50947</a></p>
<p id="7a191814"><b id="2d6c074e" class="">Component</b>: Core language</p>
<p id="70f50c48"><b id="9c6d8c9b" class="">Incompatible change type</b>: source</p>
<p id="e24f4f02"><b id="35ae0c13" class="">Short summary</b>: Kotlin 1.9 will prohibit using type parameters of an outer class having <code class="code ">in</code> or <code class="code ">out</code> variance in an inner class of that class in positions violating that type parameters' declared variance</p>
<p id="5e888120"><b id="e7cf7c9f" class="">Deprecation cycle</b>:</p>
<ul class="list _bullet" id="149705e0">
<li class="list__item" id="ad6818c4"><p>1.7.0: report a warning (or an error in the progressive mode) when an outer class' type parameter usage position violates the variance rules of that parameter</p></li>
<li class="list__item" id="905f2549"><p>1.9.0: raise the warning to an error, <code class="code ">-XXLanguage:-ReportTypeVarianceConflictOnQualifierArguments</code> can be used to temporarily revert to the pre-1.9 behavior</p></li>
</ul></aside></section><section class="chapter"><h3 id="prohibit-recursive-call-of-a-function-without-explicit-return-type-in-compound-assignment-operators" data-toc="prohibit-recursive-call-of-a-function-without-explicit-return-type-in-compound-assignment-operators">Prohibit recursive call of a function without explicit return type in compound assignment operators</h3>
<aside data-type="tip" class="prompt" data-title="" id="c9858418"><p id="3e2ebb04"><b id="b63e5094" class="">Issue</b>: <a href="https://youtrack.jetbrains.com/issue/KT-48546" id="28c54589" data-external="true" rel="noopener noreferrer">KT-48546</a></p>
<p id="55b7f683"><b id="99904718" class="">Component</b>: Core language</p>
<p id="601296c6"><b id="c2d0bc5e" class="">Incompatible change type</b>: source</p>
<p id="be982fa5"><b id="f4eec6c" class="">Short summary</b>: Kotlin 1.9 will prohibit calling a function without explicitly specified return type in an argument of a compound assignment operator inside that function's body, as it currently does in other expressions inside the body of that function</p>
<p id="9243fe08"><b id="b06220ee" class="">Deprecation cycle</b>:</p>
<ul class="list _bullet" id="50e1cd37">
<li class="list__item" id="8c293796"><p>1.7.0: report a warning (or an error in the progressive mode) when a function without explicitly specified return type is called recursively in that function's body in a compound assignment operator argument</p></li>
<li class="list__item" id="68aef9d9"><p>1.9.0: raise the warning to an error</p></li>
</ul></aside></section><section class="chapter"><h3 id="prohibit-unsound-calls-with-expected-notnull-t-and-given-kotlin-generic-parameter-with-nullable-bound" data-toc="prohibit-unsound-calls-with-expected-notnull-t-and-given-kotlin-generic-parameter-with-nullable-bound">Prohibit unsound calls with expected @NotNull T and given Kotlin generic parameter with nullable bound</h3>
<aside data-type="tip" class="prompt" data-title="" id="11a885eb"><p id="de0eae3e"><b id="658e50de" class="">Issue</b>: <a href="https://youtrack.jetbrains.com/issue/KT-36770" id="dc3da145" data-external="true" rel="noopener noreferrer">KT-36770</a></p>
<p id="2c6fbbd4"><b id="a7cc3659" class="">Component</b>: Kotlin/JVM</p>
<p id="de791f01"><b id="3a219457" class="">Incompatible change type</b>: source</p>
<p id="52dd3b52"><b id="2530f25b" class="">Short summary</b>: Kotlin 1.9 will prohibit method calls where a value of a potentially nullable generic type is passed for a <code class="code ">@NotNull</code>-annotated parameter of a Java method</p>
<p id="e6c244cb"><b id="1626d1e5" class="">Deprecation cycle</b>:</p>
<ul class="list _bullet" id="18cf7219">
<li class="list__item" id="7e659b61"><p>1.5.20: report a warning when an unconstrained generic type parameter is passed where a non-nullable type is expected</p></li>
<li class="list__item" id="e77a9607"><p>1.9.0: report a type mismatch error instead of the warning above,<br><code class="code ">-XXLanguage:-ProhibitUsingNullableTypeParameterAgainstNotNullAnnotated</code> can be used to temporarily revert to the pre-1.8 behavior</p></li>
</ul></aside></section><section class="chapter"><h3 id="prohibit-access-to-members-of-a-companion-of-an-enum-class-from-entry-initializers-of-this-enum" data-toc="prohibit-access-to-members-of-a-companion-of-an-enum-class-from-entry-initializers-of-this-enum">Prohibit access to members of a companion of an enum class from entry initializers of this enum</h3>
<aside data-type="tip" class="prompt" data-title="" id="de5e93be"><p id="507c084c"><b id="13dcddef" class="">Issue</b>: <a href="https://youtrack.jetbrains.com/issue/KT-49110" id="d86b7af9" data-external="true" rel="noopener noreferrer">KT-49110</a></p>
<p id="f7961880"><b id="76dce328" class="">Component</b>: Core language</p>
<p id="2e7cd7c2"><b id="90a714d7" class="">Incompatible change type</b>: source</p>
<p id="95d51ee2"><b id="bd3a132f" class="">Short summary</b>: Kotlin 1.9 will prohibit all kinds of access to the companion object of an enum from an enum entry initializer</p>
<p id="73875a65"><b id="1d1d7c52" class="">Deprecation cycle</b>:</p>
<ul class="list _bullet" id="3ce446d">
<li class="list__item" id="2acaeea"><p>1.6.20: report a warning (or an error in the progressive mode) on such companion member access</p></li>
<li class="list__item" id="97afdfcf"><p>1.9.0: raise the warning to an error, <code class="code ">-XXLanguage:-ProhibitAccessToEnumCompanionMembersInEnumConstructorCall</code> can be used to temporarily revert to the pre-1.8 behavior</p></li>
</ul></aside></section><section class="chapter"><h3 id="deprecate-and-remove-enum-declaringclass-synthetic-property" data-toc="deprecate-and-remove-enum-declaringclass-synthetic-property">Deprecate and remove Enum.declaringClass synthetic property</h3>
<aside data-type="tip" class="prompt" data-title="" id="ce079f7c"><p id="635e570e"><b id="4d3691dd" class="">Issue</b>: <a href="https://youtrack.jetbrains.com/issue/KT-49653" id="5afd98ce" data-external="true" rel="noopener noreferrer">KT-49653</a></p>
<p id="ab7293fd"><b id="c706e5f0" class="">Component</b>: Kotlin/JVM</p>
<p id="31fe36be"><b id="60702557" class="">Incompatible change type</b>: source</p>
<p id="f525b074"><b id="f512238" class="">Short summary</b>: Kotlin allowed using the synthetic property <code class="code ">declaringClass</code> on <code class="code ">Enum</code> values produced from the method <code class="code ">getDeclaringClass()</code> of the underlying Java class <code class="code ">java.lang.Enum</code> even though this method is not available for Kotlin <code class="code ">Enum</code> type. Kotlin 1.9 will prohibit using this property, proposing to migrate to the extension property <code class="code ">declaringJavaClass</code> instead</p>
<p id="82843832"><b id="9e48230" class="">Deprecation cycle</b>:</p>
<ul class="list _bullet" id="bd603fde">
<li class="list__item" id="6dec5987"><p>1.7.0: report a warning (or an error in the progressive mode) on <code class="code ">declaringClass</code> property usages, propose the migration to <code class="code ">declaringJavaClass</code> extension</p></li>
<li class="list__item" id="16576397"><p>1.9.0: raise the warning to an error, <code class="code ">-XXLanguage:-ProhibitEnumDeclaringClass</code> can be used to temporarily revert to the pre-1.9 behavior</p></li>
<li class="list__item" id="2b41d522"><p>&gt;=1.10: remove <code class="code ">declaringClass</code> synthetic property</p></li>
</ul></aside></section><section class="chapter"><h3 id="deprecate-the-enable-and-the-compatibility-modes-of-the-compiler-option-xjvm-default" data-toc="deprecate-the-enable-and-the-compatibility-modes-of-the-compiler-option-xjvm-default">Deprecate the enable and the compatibility modes of the compiler option -Xjvm-default</h3>
<aside data-type="tip" class="prompt" data-title="" id="87c490c7"><p id="7ffa723e"><b id="bf012cb1" class="">Issue</b>: <a href="https://youtrack.jetbrains.com/issue/KT-46329" id="20b2a75d" data-external="true" rel="noopener noreferrer">KT-46329</a></p>
<p id="a13e71a5"><b id="35d07875" class="">Component</b>: Kotlin/JVM</p>
<p id="f95c5a37"><b id="33b8f196" class="">Incompatible change type</b>: source</p>
<p id="e65be272"><b id="b4c10" class="">Short summary</b>: Kotlin 1.6.20 warns about the usage of the <code class="code ">enable</code> and <code class="code ">compatibility</code> modes of the <code class="code ">-Xjvm-default</code> compiler option</p>
<p id="b99a4794"><b id="1c495b66" class="">Deprecation cycle</b>:</p>
<ul class="list _bullet" id="4f52ae8f">
<li class="list__item" id="be9377aa"><p>1.6.20: introduce a warning on the <code class="code ">enable</code> and <code class="code ">compatibility</code> modes of the <code class="code ">-Xjvm-default</code> compiler option</p></li>
<li class="list__item" id="86a79f8d"><p>&gt;= 1.9: raise this warning to an error</p></li>
</ul></aside></section></section><section class="chapter"><h2 id="standard-library" data-toc="standard-library">Standard library</h2>
<section class="chapter"><h3 id="warn-about-potential-overload-resolution-change-when-range-progression-starts-implementing-collection" data-toc="warn-about-potential-overload-resolution-change-when-range-progression-starts-implementing-collection">Warn about potential overload resolution change when Range/Progression starts implementing Collection</h3>
<aside data-type="tip" class="prompt" data-title="" id="26bccadc"><p id="5a63ca26"><b id="3b3d067" class="">Issue</b>: <a href="https://youtrack.jetbrains.com/issue/KT-49276" id="b113165c" data-external="true" rel="noopener noreferrer">KT-49276</a></p>
<p id="ff939496"><b id="b120e45" class="">Component</b>: Core language / kotlin-stdlib</p>
<p id="b2623ddf"><b id="7c36b364" class="">Incompatible change type</b>: source</p>
<p id="85c1e40c"><b id="e2c0a1f7" class="">Short summary</b>: it is planned to implement the <code class="code ">Collection</code> interface in the standard progressions and concrete ranges inherited from them in Kotlin 1.9. This could make a different overload selected in the overload resolution if there are two overloads of some method, one accepting an element and another accepting a collection. Kotlin will make this situation visible by reporting a warning or an error when such overloaded method is called with a range or progression argument</p>
<p id="28b4c81a"><b id="c7789665" class="">Deprecation cycle</b>:</p>
<ul class="list _bullet" id="617ee7a8">
<li class="list__item" id="a6c0dcdb"><p>1.6.20: report a warning when an overloaded method is called with the standard progression or its range inheritor as an argument if implementing the <code class="code ">Collection</code> interface by this progression/range leads to another overload being selected in this call in future</p></li>
<li class="list__item" id="fa6c92f4"><p>1.8.0: raise this warning to an error</p></li>
<li class="list__item" id="df3ca4d7"><p>1.9.0: stop reporting the error, implement <code class="code ">Collection</code> interface in progressions thus changing the overload resolution result in the affected cases</p></li>
</ul></aside></section><section class="chapter"><h3 id="migrate-declarations-from-kotlin-dom-and-kotlin-browser-packages-to-kotlinx" data-toc="migrate-declarations-from-kotlin-dom-and-kotlin-browser-packages-to-kotlinx">Migrate declarations from kotlin.dom and kotlin.browser packages to kotlinx.*</h3>
<aside data-type="tip" class="prompt" data-title="" id="7b842a9b"><p id="9fb3bc86"><b id="a31e3ad6" class="">Issue</b>: <a href="https://youtrack.jetbrains.com/issue/KT-39330" id="f8516c91" data-external="true" rel="noopener noreferrer">KT-39330</a></p>
<p id="76f87c3a"><b id="696f23fa" class="">Component</b>: kotlin-stdlib (JS)</p>
<p id="8ed527ce"><b id="a25e32f7" class="">Incompatible change type</b>: source</p>
<p id="e1275038"><b id="214d5017" class="">Short summary</b>: declarations from the <code class="code ">kotlin.dom</code> and <code class="code ">kotlin.browser</code> packages are moved to the corresponding <code class="code ">kotlinx.*</code> packages to prepare for extracting them from stdlib</p>
<p id="3448ae99"><b id="e09def64" class="">Deprecation cycle</b>:</p>
<ul class="list _bullet" id="da2391a">
<li class="list__item" id="4c533071"><p>1.4.0: introduce the replacement API in <code class="code ">kotlinx.dom</code> and <code class="code ">kotlinx.browser</code> packages</p></li>
<li class="list__item" id="e1dcd983"><p>1.4.0: deprecate the API in <code class="code ">kotlin.dom</code> and <code class="code ">kotlin.browser</code> packages and propose the new API above as a replacement</p></li>
<li class="list__item" id="7fe61c26"><p>1.6.0: raise the deprecation level to an error</p></li>
<li class="list__item" id="bd679647"><p>1.8.20: remove the deprecated functions from stdlib for JS-IR target</p></li>
<li class="list__item" id="872da866"><p>&gt;= 1.9: move the API in kotlinx.* packages to a separate library</p></li>
</ul></aside></section><section class="chapter"><h3 id="deprecate-some-js-only-api" data-toc="deprecate-some-js-only-api">Deprecate some JS-only API</h3>
<aside data-type="tip" class="prompt" data-title="" id="8ae7a42e"><p id="ee79b09c"><b id="28dd3d0c" class="">Issue</b>: <a href="https://youtrack.jetbrains.com/issue/KT-48587" id="f5b1349" data-external="true" rel="noopener noreferrer">KT-48587</a></p>
<p id="6bd12cea"><b id="25e2725" class="">Component</b>: kotlin-stdlib (JS)</p>
<p id="1020b987"><b id="4cbf0b5f" class="">Incompatible change type</b>: source</p>
<p id="eeabaa98"><b id="a1dd6144" class="">Short summary</b>: a number of JS-only functions in stdlib are deprecated for removal. They include: <code class="code ">String.concat(String)</code>, <code class="code ">String.match(regex: String)</code>, <code class="code ">String.matches(regex: String)</code>, and the <code class="code ">sort</code> functions on arrays taking a comparison function, for example, <code class="code ">Array&lt;out T&gt;.sort(comparison: (a: T, b: T) -&gt; Int)</code></p>
<p id="7bd54345"><b id="b66a0738" class="">Deprecation cycle</b>:</p>
<ul class="list _bullet" id="92170b72">
<li class="list__item" id="2ed46e24"><p>1.6.0: deprecate the affected functions with a warning</p></li>
<li class="list__item" id="a1f4f56"><p>1.9.0: raise the deprecation level to an error</p></li>
<li class="list__item" id="d1cc1e42"><p>&gt;=1.10.0: remove the deprecated functions from the public API</p></li>
</ul></aside></section></section><section class="chapter"><h2 id="tools" data-toc="tools">Tools</h2>
<section class="chapter"><h3 id="raise-deprecation-level-of-classpath-property-of-kotlincompile-task" data-toc="raise-deprecation-level-of-classpath-property-of-kotlincompile-task">Raise deprecation level of classpath property of KotlinCompile task</h3>
<aside data-type="tip" class="prompt" data-title="" id="b741d1b3"><p id="bc0e3671"><b id="e9fa8126" class="">Issue</b>: <a href="https://youtrack.jetbrains.com/issue/KT-51679" id="ed1cdd4" data-external="true" rel="noopener noreferrer">KT-51679</a></p>
<p id="e8b5b33"><b id="39aede39" class="">Component</b>: Gradle</p>
<p id="1a58e108"><b id="3e88a3b5" class="">Incompatible change type</b>: source</p>
<p id="9381de78"><b id="3856cdb5" class="">Short summary</b>: the <code class="code ">classpath</code> property of the <code class="code ">KotlinCompile</code> task is deprecated</p>
<p id="a08b06d3"><b id="491da998" class="">Deprecation cycle</b>:</p>
<ul class="list _bullet" id="f7c24827">
<li class="list__item" id="9ec8643f"><p>1.7.0: the <code class="code ">classpath</code> property is deprecated</p></li>
<li class="list__item" id="d7b55b3f"><p>1.8.0: raise the deprecation level to an error</p></li>
<li class="list__item" id="3ee949c7"><p>&gt;=1.9.0: remove the deprecated functions from the public API</p></li>
</ul></aside></section><section class="chapter"><h3 id="remove-kapt-use-worker-api-gradle-property" data-toc="remove-kapt-use-worker-api-gradle-property">Remove kapt.use.worker.api Gradle property</h3>
<aside data-type="tip" class="prompt" data-title="" id="4b582aae"><p id="9b085368"><b id="3bb8e826" class="">Issue</b>: <a href="https://youtrack.jetbrains.com/issue/KT-48827" id="781898c9" data-external="true" rel="noopener noreferrer">KT-48827</a></p>
<p id="e6181ae4"><b id="4a488c24" class="">Component</b>: Gradle</p>
<p id="14cccc9e"><b id="9f9aaed7" class="">Incompatible change type</b>: behavioral</p>
<p id="7ecdce98"><b id="4c8a947" class="">Short summary</b>: remove the <code class="code ">kapt.use.worker.api</code> property that allowed to run kapt via Gradle Workers API (default: true)</p>
<p id="7b9305ec"><b id="67f481be" class="">Deprecation cycle</b>:</p>
<ul class="list _bullet" id="355f1eda">
<li class="list__item" id="db267694"><p>1.6.20: raise the deprecation level to a warning</p></li>
<li class="list__item" id="a7411f82"><p>1.8.0: remove this property</p></li>
</ul></aside></section><section class="chapter"><h3 id="remove-kotlin-compiler-execution-strategy-system-property" data-toc="remove-kotlin-compiler-execution-strategy-system-property">Remove kotlin.compiler.execution.strategy system property</h3>
<aside data-type="tip" class="prompt" data-title="" id="7e174d4"><p id="8a84388c"><b id="2272b4a7" class="">Issue</b>: <a href="https://youtrack.jetbrains.com/issue/KT-51831" id="284a59f0" data-external="true" rel="noopener noreferrer">KT-51831</a></p>
<p id="2f1ba07a"><b id="697087b5" class="">Component</b>: Gradle</p>
<p id="f49c4799"><b id="e801380c" class="">Incompatible change type</b>: behavioral</p>
<p id="9428e48"><b id="a2a5ad97" class="">Short summary</b>: remove the <code class="code ">kotlin.compiler.execution.strategy</code> system property used to choose a compiler execution strategy. Use the Gradle property <code class="code ">kotlin.compiler.execution.strategy</code> or the compile task property <code class="code ">compilerExecutionStrategy</code> instead</p>
<p id="91c305e6"><b id="e5e6ca57" class="">Deprecation cycle:</b></p>
<ul class="list _bullet" id="9d0eceda">
<li class="list__item" id="2088a531"><p>1.7.0: raise the deprecation level to a warning</p></li>
<li class="list__item" id="d09bf58a"><p>1.8.0: remove the property</p></li>
</ul></aside></section><section class="chapter"><h3 id="changes-in-compiler-options" data-toc="changes-in-compiler-options">Changes in compiler options</h3>
<aside data-type="tip" class="prompt" data-title="" id="3f859ef0"><p id="22d7980c"><b id="ad79af36" class="">Issues</b>: <a href="https://youtrack.jetbrains.com/issue/KT-27301" id="89de1a2" data-external="true" rel="noopener noreferrer">KT-27301</a>, <a href="https://youtrack.jetbrains.com/issue/KT-48532" id="6cf8f82c" data-external="true" rel="noopener noreferrer">KT-48532</a></p>
<p id="4e494f6"><b id="c015b39e" class="">Component</b>: Gradle</p>
<p id="1f012cc"><b id="b93dd5ab" class="">Incompatible change type</b>: source, binary</p>
<p id="7e922859"><b id="840954f5" class="">Short summary</b>: this change might affect Gradle plugins authors. In <code class="code ">kotlin-gradle-plugin</code>, there are additional generic parameters to some internal types (you should add generic types or <code class="code ">*</code>). <code class="code ">KotlinNativeLink</code> task does not inherit the <code class="code ">AbstractKotlinNativeCompile</code> task anymore. <code class="code ">KotlinJsCompilerOptions.outputFile</code> and the related <code class="code ">KotlinJsOptions.outputFile</code> options are deprecated. Use the <code class="code ">Kotlin2JsCompile.outputFileProperty</code> task input instead. The <code class="code ">kotlinOptions</code> task input and the <code class="code ">kotlinOptions{...}</code> task DSL are in a support mode and will be deprecated in upcoming releases. <code class="code ">compilerOptions</code> and <code class="code ">kotlinOptions</code> can not be changed on a task execution phase (see one exception in <a href="whatsnew18.html#limitations" id="26a70568">What's new in Kotlin 1.8</a>). <code class="code ">freeCompilerArgs</code> returns an immutable <code class="code ">List&lt;String&gt;</code> – <code class="code ">kotlinOptions.freeCompilerArgs.remove("something")</code> will fail. The <code class="code ">useOldBackend</code> property that allowed to use the old JVM backend is removed</p>
<p id="3d2f45ea"><b id="64fac2f6" class="">Deprecation cycle:</b></p>
<ul class="list _bullet" id="32cca7a1"><li class="list__item" id="2d30d688"><p>1.8.0: <code class="code ">KotlinNativeLink</code> task does not inherit the <code class="code ">AbstractKotlinNativeCompile</code>. <code class="code ">KotlinJsCompilerOptions.outputFile</code> and the related <code class="code ">KotlinJsOptions.outputFile</code> options are deprecated. The <code class="code ">useOldBackend</code> property that allowed to use the old JVM backend is removed.</p></li></ul></aside></section><section class="chapter"><h3 id="deprecate-kotlin-internal-single-build-metrics-file-property" data-toc="deprecate-kotlin-internal-single-build-metrics-file-property">Deprecate kotlin.internal.single.build.metrics.file property</h3>
<aside data-type="tip" class="prompt" data-title="" id="c095486b"><p id="50319bab"><b id="4cb997b3" class="">Issue</b>: <a href="https://youtrack.jetbrains.com/issue/KT-53357" id="d6fbb149" data-external="true" rel="noopener noreferrer">KT-53357</a></p>
<p id="fb6e0999"><b id="4082b524" class="">Component</b>: Gradle</p>
<p id="b28627cf"><b id="35b344d5" class="">Incompatible change type</b>: source</p>
<p id="f1237bdd"><b id="8daf5552" class="">Short summary</b>: deprecate the <code class="code ">kotlin.internal.single.build.metrics.file</code> property used to define a single file for build reports. Use the property <code class="code ">kotlin.build.report.single_file</code> instead with <code class="code ">kotlin.build.report.output=single_file</code></p>
<p id="d643818f"><b id="1bff286c" class="">Deprecation cycle:</b></p>
<ul class="list _bullet" id="7ce61e11"><li class="list__item" id="2130b363"><p>1.8.0: raise the deprecation level to a warning &gt;= 1.9: delete the property</p></li></ul></aside></section></section><div class="last-modified"> Last modified: 30 December 2022</div>

<div class="navigation-links _bottom"> <a class="navigation-links__prev" href="compatibility-guide-19.html">Compatibility guide for Kotlin 1.9</a> <a class="navigation-links__next" href="compatibility-guide-1720.html">Compatibility guide for Kotlin 1.7.20</a> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010&ndash;2023 JetBrains s.r.o. and Kotlin Programming Language contributors<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://kotlinlang.org/docs/compatibility-guide-18.html" class="_attribution-link">https://kotlinlang.org/docs/compatibility-guide-18.html</a>
  </p>
</div>
