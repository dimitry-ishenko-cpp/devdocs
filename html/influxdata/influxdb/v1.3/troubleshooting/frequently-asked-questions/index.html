<h1>Frequently Asked Questions</h1>     <p>This page addresses frequent sources of confusion and places where InfluxDB behaves in an unexpected way relative to other database systems. Where applicable, it links to outstanding issues on GitHub.</p> <p><strong>Administration</strong></p> <ul> <li><a href="#how-do-i-include-a-single-quote-in-a-password">How do I include a single quote in a password?</a></li> <li><a href="#how-can-i-identify-my-version-of-influxdb">How can I identify my version of InfluxDB?</a></li> <li><a href="#where-can-i-find-influxdb-logs">Where can I find InfluxDB logs?</a></li> <li><a href="#what-is-the-relationship-between-shard-group-durations-and-retention-policies">What is the relationship between shard group durations and retention policies?</a></li> <li><a href="#why-aren-t-data-dropped-after-i-ve-altered-a-retention-policy">Why aren’t data dropped after I’ve altered a retention policy?</a></li> <li><a href="#why-does-influxdb-fail-to-parse-microsecond-units-in-the-configuration-file">Why does InfluxDB fail to parse microsecond units in the configuration file?</a></li> </ul> <p><strong>Command Line Interface (CLI)</strong></p> <ul> <li><a href="#how-do-i-make-influxdb-s-cli-return-human-readable-timestamps">How do I make InfluxDB’s CLI return human readable timestamps?</a></li> <li><a href="#how-can-a-non-admin-user-use-a-database-in-influxdb-s-cli">How can a non-admin user <code>USE</code> a database in InfluxDB’s CLI?</a></li> <li><a href="#how-do-i-write-to-a-non-default-retention-policy-with-influxdb-s-cli">How do I write to a non-<code>DEFAULT</code> retention policy with InfluxDB’s CLI?</a></li> </ul> <p><strong>Data Types</strong></p> <ul> <li><a href="#why-can-t-i-query-boolean-field-values">Why can’t I query boolean field values?</a></li> <li><a href="#how-does-influxdb-handle-field-type-discrepancies-across-shards">How does InfluxDB handle field type discrepancies across shards?</a></li> <li><a href="#what-are-the-minimum-and-maximum-integers-that-influxdb-can-store">What are the minimum and maximum integers that InfluxDB can store?</a></li> <li><a href="#what-are-the-minimum-and-maximum-timestamps-that-influxdb-can-store">What are the minimum and maximum timestamps that InfluxDB can store?</a></li> <li><a href="#how-can-i-tell-what-type-of-data-are-stored-in-a-field">How can I tell what type of data are stored in a field?</a></li> <li><a href="#can-i-change-a-field-s-data-type">Can I change a field’s data type?</a></li> </ul> <p><strong>InfluxQL Functions</strong></p> <ul> <li><a href="#how-do-i-perform-mathematical-operations-within-a-function">How do I perform mathematical operations within a function?</a></li> <li><a href="#why-does-my-query-return-epoch-0-as-the-timestamp">Why does my query return epoch 0 as the timestamp?</a></li> <li><a href="#which-influxql-functions-support-nesting">Which InfluxQL functions support nesting?</a></li> </ul> <p><strong>Querying Data</strong></p> <ul> <li><a href="#what-determines-the-time-intervals-returned-by-group-by-time-queries">What determines the time intervals returned by <code>GROUP BY time()</code> queries?</a></li> <li><a href="#why-do-my-queries-return-no-data-or-partial-data">Why do my queries return no data or partial data?</a></li> <li><a href="#why-don-t-my-group-by-time-queries-return-timestamps-that-occur-after-now">Why don’t my <code>GROUP BY time()</code> queries return timestamps that occur after <code>now()</code>?</a></li> <li><a href="#can-i-perform-mathematical-operations-against-timestamps">Can I perform mathematical operations against timestamps?</a></li> <li><a href="#can-i-identify-write-precision-from-returned-timestamps">Can I identify write precision from returned timestamps?</a></li> <li><a href="#when-should-i-single-quote-and-when-should-i-double-quote-in-queries">When should I single quote and when should I double quote in queries?</a></li> <li><a href="#why-am-i-missing-data-after-creating-a-new-default-retention-policy">Why am I missing data after creating a new <code>DEFAULT</code> retention policy?</a></li> <li><a href="#why-is-my-query-with-a-where-or-time-clause-returning-empty-results">Why is my query with a <code>WHERE OR</code> time clause returning empty results?</a></li> <li><a href="#why-does-fill-previous-return-empty-results">Why does <code>fill(previous)</code> return empty results?</a></li> <li><a href="#why-are-my-into-queries-missing-data">Why are my <code>INTO</code> queries missing data?</a></li> <li><a href="#how-do-i-query-data-with-an-identical-tag-key-and-field-key">How do I query data with an identical tag key and field key?</a></li> <li><a href="#how-do-i-query-data-across-measurements">How do I query data across measurements?</a></li> <li><a href="#does-the-order-of-the-timestamps-matter">Does the order of the timestamps matter?</a></li> <li><a href="#how-do-i-select-data-with-a-tag-that-has-no-value">How do I <code>SELECT</code> data with a tag that has no value?</a></li> </ul> <p><strong>Series and Series Cardinality</strong></p> <ul> <li><a href="#how-can-i-query-for-series-cardinality">How can I query for series cardinality?</a></li> <li><a href="#why-does-series-cardinality-matter">Why does series cardinality matter?</a></li> <li><a href="#how-can-i-remove-series-from-the-index">How can I remove series from the index?</a></li> </ul> <p><strong>Writing Data</strong></p> <ul> <li><a href="#how-do-i-write-integer-field-values">How do I write integer field values?</a></li> <li><a href="#how-does-influxdb-handle-duplicate-points">How does InfluxDB handle duplicate points?</a></li> <li><a href="#what-newline-character-does-the-http-api-require">What newline character does the HTTP API require?</a></li> <li><a href="#what-words-and-characters-should-i-avoid-when-writing-data-to-influxdb">What words and characters should I avoid when writing data to InfluxDB?</a></li> <li><a href="#when-should-i-single-quote-and-when-should-i-double-quote-when-writing-data">When should I single quote and when should I double quote when writing data?</a></li> <li><a href="#does-the-precision-of-the-timestamp-matter">Does the precision of the timestamp matter?</a></li> <li><a href="#what-are-the-configuration-recommendations-and-schema-guidelines-for-writing-sparse-historical-data">What are the configuration recommendations and schema guidelines for writing sparse, historical data?</a></li> </ul> <h2 id="how-do-i-include-a-single-quote-in-a-password">How do I include a single quote in a password?</h2> <p>Escape the single quote with a backslash (<code>\</code>) both when creating the password and when sending authentication requests.</p> <h2 id="how-can-i-identify-my-version-of-influxdb">How can I identify my version of InfluxDB?</h2> <p>There a number of ways to identify the version of InfluxDB that you’re using:</p> <h4 id="run-influxd-version-in-your-terminal">Run <code>influxd version</code> in your terminal:</h4> <pre>$ influxd version

InfluxDB ✨ v1.3.0 ✨ (git: master b7bb7e8359642b6e071735b50ae41f5eb343fd42)
</pre> <h4 id="curl-the-ping-endpoint">
<code>curl</code> the <code>/ping</code> endpoint:</h4> <pre>$ curl -i 'http://localhost:8086/ping'

HTTP/1.1 204 No Content
Content-Type: application/json
Request-Id: 1e08aeb6-fec0-11e6-8486-000000000000
✨ X-Influxdb-Version: 1.3.x ✨
Date: Wed, 01 Mar 2017 20:46:17 GMT
</pre> <h4 id="launch-influxdb-s-command-line-interface-influxdb-v1-3-tools-shell">Launch InfluxDB’s <a href="../../tools/shell/index.html">Command Line Interface</a>:</h4> <pre>$ influx

Connected to http://localhost:8086✨ version 1.3.x ✨  
InfluxDB shell version: 1.3.x
</pre> <h4 id="check-the-http-response-in-your-logs">Check the HTTP response in your logs:</h4> <pre>$ journald-ctl -u influxdb.service

Mar 01 20:49:45 rk-api influxd[29560]: [httpd] 127.0.0.1 - - [01/Mar/2017:20:49:45 +0000] "POST /query?db=&amp;epoch=ns&amp;q=SHOW+DATABASES HTTP/1.1" 200 151 "-" ✨ "InfluxDBShell/1.3.x" ✨ 9a4371a1-fec0-11e6-84b6-000000000000 1709
</pre> <h2 id="where-can-i-find-influxdb-logs">Where can I find InfluxDB logs?</h2> <p>On System V operating systems logs are stored under <code>/var/log/influxdb/</code>.</p> <p>On systemd operating systems you can access the logs using <code>journalctl</code>. Use <code>journalctl -u influxdb</code> to view the logs in the journal or <code>journalctl -u influxdb &gt; influxd.log</code> to print the logs to a text file. With systemd, log retention depends on your system’s journald settings.</p> <h2 id="what-is-the-relationship-between-shard-group-durations-and-retention-policies">What is the relationship between shard group durations and retention policies?</h2> <p>InfluxDB stores data in shard groups. A single shard group covers a specific time interval; InfluxDB determines that time interval by looking at the <code>DURATION</code> of the relevant retention policy (RP). The table below outlines the default relationship between the <code>DURATION</code> of an RP and the time interval of a shard group:</p> <table> <thead> <tr> <th>RP duration</th> <th>Shard group interval</th> </tr> </thead> <tbody> <tr> <td>&lt; 2 days</td> <td>1 hour</td> </tr> <tr> <td>&gt;= 2 days and &lt;= 6 months</td> <td>1 day</td> </tr> <tr> <td>&gt; 6 months</td> <td>7 days</td> </tr> </tbody> </table> <p>Users can also configure the shard group duration with the <a href="../../query_language/database_management/index.html#create-retention-policies-with-create-retention-policy"><code>CREATE RETENTION POLICY</code></a> and <a href="../../query_language/database_management/index.html#modify-retention-policies-with-alter-retention-policy"><code>ALTER RETENTION POLICY</code></a> statements. Check your retention policy’s shard group duration with the <a href="../../query_language/schema_exploration/index.html#explore-retention-policies-with-show-retention-policies"><code>SHOW RETENTION POLICY</code></a> statement.</p> <h2 id="why-aren-t-data-dropped-after-i-ve-altered-a-retention-policy">Why aren’t data dropped after I’ve altered a retention policy?</h2> <p>Several factors explain why data may not be immediately dropped after a retention policy (RP) change.</p> <p>The first and most likely cause is that, by default, InfluxDB checks to enforce an RP every 30 minutes. You may need to wait for the next RP check for InfluxDB to drop data that are outside the RP’s new <code>DURATION</code> setting. The 30 minute interval is <a href="../../administration/config/index.html#check-interval-30m0s">configurable</a>.</p> <p>Second, altering both the <code>DURATION</code> and <code>SHARD DURATION</code> of an RP can result in unexpected data retention. InfluxDB stores data in shard groups which cover a specific RP and time interval. When InfluxDB enforces an RP it drops entire shard groups, not individual data points. InfluxDB cannot divide shard groups.</p> <p>If the RP’s new <code>DURATION</code> is less than the old <code>SHARD DURATION</code> and InfluxDB is currently writing data to one of the old, longer shard groups, the system is forced to keep all of the data in that shard group. This occurs even if some of the data in that shard group are outside of the new <code>DURATION</code>. InfluxDB will drop that shard group once all of its data are outside the new <code>DURATION</code>. The system will then begin writing data to shard groups that have the new, shorter <code>SHARD DURATION</code> preventing any further unexpected data retention.</p> <h2 id="why-does-influxdb-fail-to-parse-microsecond-units-in-the-configuration-file">Why does InfluxDB fail to parse microsecond units in the configuration file?</h2> <p>The syntax for specifying microsecond duration units differs for <a href="../../administration/config/index.html">configuration</a> settings, writes, queries, and setting the precision in InfluxDB’s <a href="../../tools/shell/index.html">Command Line Interface</a> (CLI). The table below shows the supported syntax for each category:</p> <table> <thead> <tr> <th></th> <th>Configuration File</th> <th>HTTP API Writes</th> <th>All Queries</th> <th>CLI Precision Command</th> </tr> </thead> <tbody> <tr> <td>u</td> <td>❌</td> <td>👍</td> <td>👍</td> <td>👍</td> </tr> <tr> <td>us</td> <td>👍</td> <td>❌</td> <td>❌</td> <td>❌</td> </tr> <tr> <td>µ</td> <td>❌</td> <td>❌</td> <td>👍</td> <td>❌</td> </tr> <tr> <td>µs</td> <td>👍</td> <td>❌</td> <td>❌</td> <td>❌</td> </tr> </tbody> </table> <p>If a configuration option specifies the <code>u</code> or <code>µ</code> syntax, InfluxDB fails to start and reports the following error in the logs:</p> <pre>run: parse config: time: unknown unit [µ|u] in duration [&lt;integer&gt;µ|&lt;integer&gt;u]
</pre> <h2 id="how-do-i-make-influxdb-s-cli-return-human-readable-timestamps">How do I make InfluxDB’s CLI return human readable timestamps?</h2> <p>When you first connect to the CLI, specify the <a href="https://www.ietf.org/rfc/rfc3339.txt">rfc3339</a> precision:</p> <pre>$ influx -precision rfc3339
</pre> <p>Alternatively, specify the precision once you’ve already connected to the CLI:</p> <pre>$ influx
Connected to http://localhost:8086 version 0.xx.x
InfluxDB shell 0.xx.x
&gt; precision rfc3339
&gt;
</pre> <p>Check out <a href="../../tools/shell/index.html">CLI/Shell</a> for more useful CLI options.</p> <h2 id="how-can-a-non-admin-user-use-a-database-in-influxdb-s-cli">How can a non-admin user <code>USE</code> a database in InfluxDB’s CLI?</h2> <p>In versions prior to v1.3, <a href="../../query_language/authentication_and_authorization/index.html#user-types-and-privileges">non-admin users</a> could not execute a <code>USE &lt;database_name&gt;</code> query in the CLI even if they had <code>READ</code> and/or <code>WRITE</code> permissions on that database.</p> <p>Starting with version 1.3, non-admin users can execute the <code>USE &lt;database_name&gt;</code> query for databases on which they have <code>READ</code> and/or <code>WRITE</code> permissions. If a non-admin user attempts to <code>USE</code> a database on which the user doesn’t have <code>READ</code> and/or <code>WRITE</code> permissions, the system returns an error:</p> <pre>ERR: Database &lt;database_name&gt; doesn't exist. Run SHOW DATABASES for a list of existing databases.
</pre> <p>Note that the <a href="../../query_language/schema_exploration/index.html#show-databases"><code>SHOW DATABASES</code> query</a> returns only those databases on which the non-admin user has <code>READ</code> and/or <code>WRITE</code> permissions.</p> <h2 id="how-do-i-write-to-a-non-default-retention-policy-with-influxdb-s-cli">How do I write to a non-DEFAULT retention policy with InfluxDB’s CLI?</h2> <p>Use the syntax <code>INSERT INTO [&lt;database&gt;.]&lt;retention_policy&gt; &lt;line_protocol&gt;</code> to write data to a non-<code>DEFAULT</code> retention policy using the CLI. (Specifying the database and retention policy this way is only allowed with the CLI. Writes over HTTP must specify the database and optionally the retention policy with the <code>db</code> and <code>rp</code> query parameters.)</p> <p>For example:</p> <pre>&gt; INSERT INTO one_day mortality bool=true
Using retention policy one_day
&gt; SELECT * FROM "mydb"."one_day"."mortality"
name: mortality
---------------
time                             bool
2016-09-13T22:29:43.229530864Z   true
</pre> <p>Note that you will need to fully qualify the measurement to query data in the non-<code>DEFAULT</code> retention policy. Fully qualify the measurement with the syntax:</p> <pre>"&lt;database&gt;"."&lt;retention_policy&gt;"."&lt;measurement&gt;"
</pre> <h2 id="why-can-t-i-query-boolean-field-values">Why can’t I query boolean field values?</h2> <p>Acceptable boolean syntax differs for data writes and data queries.</p> <table> <thead> <tr> <th>Boolean syntax</th> <th>Writes</th> <th>Queries</th> </tr> </thead> <tbody> <tr> <td>
<code>t</code>,<code>f</code>
</td> <td>👍</td> <td>❌</td> </tr> <tr> <td>
<code>T</code>,<code>F</code>
</td> <td>👍</td> <td>❌</td> </tr> <tr> <td>
<code>true</code>,<code>false</code>
</td> <td>👍</td> <td>👍</td> </tr> <tr> <td>
<code>True</code>,<code>False</code>
</td> <td>👍</td> <td>👍</td> </tr> <tr> <td>
<code>TRUE</code>,<code>FALSE</code>
</td> <td>👍</td> <td>👍</td> </tr> </tbody> </table> <p>For example, <code>SELECT * FROM "hamlet" WHERE "bool"=True</code> returns all points with <code>bool</code> set to <code>TRUE</code>, but <code>SELECT * FROM "hamlet" WHERE "bool"=T</code> returns nothing.</p> 
<dt> <a href="https://github.com/influxdb/influxdb/issues/3939">GitHub Issue #3939</a> </dt> <h2 id="how-does-influxdb-handle-field-type-discrepancies-across-shards">How does InfluxDB handle field type discrepancies across shards?</h2> <p>Field values can be floats, integers, strings, or booleans. Field value types cannot differ within a <a href="../../concepts/glossary/index.html#shard">shard</a>, but they can <a href="../../write_protocols/line_protocol_reference/index.html#example-7-attempt-to-write-a-string-to-a-field-that-previously-accepted-floats">differ</a> across shards.</p> <h3 id="the-select-statement">The SELECT statement</h3> <p>The <a href="../../query_language/data_exploration/index.html#the-basic-select-statement"><code>SELECT</code> statement</a> returns all field values <strong>if</strong> all values have the same type. If field value types differ across shards, InfluxDB first performs any applicable <a href="../../query_language/data_exploration/index.html#cast-operations">cast</a> operations and then returns all values with the type that occurs first in the following list: float, integer, string, boolean.</p> <p>If your data have field value type discrepancies, use the syntax <code>&lt;field_key&gt;::&lt;type&gt;</code> to query the different data types.</p> <h4 id="example">Example:</h4> <p>The measurement <code>just_my_type</code> has a single field called <code>my_field</code>. <code>my_field</code> has four field values across four different shards, and each value has a different data type (float, integer, string, and boolean).</p> <p><code>SELECT *</code> returns only the float and integer field values. Note that InfluxDB casts the integer value to a float in the response.</p> <pre>SELECT * FROM just_my_type

name: just_my_type
------------------
time		                	my_field
2016-06-03T15:45:00Z	  9.87034
2016-06-03T16:45:00Z	  7
</pre> <p><code>SELECT &lt;field_key&gt;::&lt;type&gt; [...]</code> returns all value types. InfluxDB outputs each value type in its own column with incremented column names. Where possible, InfluxDB casts field values to another type; it casts the integer <code>7</code> to a float in the first column, and it casts the float <code>9.879034</code> to an integer in the second column. InfluxDB cannot cast floats or integers to strings or booleans.</p> <pre>SELECT "my_field"::float,"my_field"::integer,"my_field"::string,"my_field"::boolean FROM just_my_type

name: just_my_type
------------------
time			               my_field	 my_field_1	 my_field_2		 my_field_3
2016-06-03T15:45:00Z	 9.87034	  9
2016-06-03T16:45:00Z	 7	        7
2016-06-03T17:45:00Z			                     a string
2016-06-03T18:45:00Z					                                true
</pre> <h3 id="the-show-field-keys-query">The SHOW FIELD KEYS query</h3> <p><code>SHOW FIELD KEYS</code> returns every data type, across every shard, associated with the field key.</p> <h4 id="example-1">Example</h4> <p>The measurement <code>just_my_type</code> has a single field called <code>my_field</code>. <code>my_field</code> has four field values across four different shards, and each value has a different data type (float, integer, string, and boolean). <code>SHOW FIELD KEYS</code> returns all four data types:</p> <pre>&gt; SHOW FIELD KEYS

name: just_my_type
fieldKey   fieldType
--------   ---------
my_field   float
my_field   string
my_field   integer
my_field   boolean
</pre> <h2 id="what-are-the-minimum-and-maximum-integers-that-influxdb-can-store">What are the minimum and maximum integers that InfluxDB can store?</h2> <p>InfluxDB stores all integers as signed int64 data types. The minimum and maximum valid values for int64 are <code>-9023372036854775808</code> and <code>9023372036854775807</code>. See <a href="http://golang.org/pkg/builtin/#int64">Go builtins</a> for more information.</p> <p>Values close to but within those limits may lead to unexpected results; some functions and operators convert the int64 data type to float64 during calculation which can cause overflow issues.</p> <h2 id="what-are-the-minimum-and-maximum-timestamps-that-influxdb-can-store">What are the minimum and maximum timestamps that InfluxDB can store?</h2> <p>The minimum timestamp is <code>-9223372036854775806</code> or <code>1677-09-21T00:12:43.145224194Z</code>. The maximum timestamp is <code>9223372036854775806</code> or <code>2262-04-11T23:47:16.854775806Z</code>.</p> <p>Timestamps outside that range return a <a href="../errors/index.html#unable-to-parse-time-outside-range">parsing error</a>.</p> <h2 id="how-can-i-tell-what-type-of-data-are-stored-in-a-field">How can I tell what type of data are stored in a field?</h2> <p>The <a href="../../query_language/schema_exploration/index.html#explore-field-keys-with-show-field-keys"><code>SHOW FIELD KEYS</code></a> query also returns the field’s type.</p> <h4 id="example-2">Example</h4> <pre>&gt; SHOW FIELD KEYS FROM all_the_types
name: all_the_types
-------------------
fieldKey  fieldType
blue      string
green     boolean
orange    integer
yellow    float
</pre> <h2 id="can-i-change-a-field-s-data-type">Can I change a field’s data type?</h2> <p>Currently, InfluxDB offers very limited support for changing a field’s data type.</p> <p>The <code>&lt;field_key&gt;::&lt;type&gt;</code> syntax supports casting field values from integers to floats or from floats to integers. See <a href="../../query_language/data_exploration/index.html#data-types-and-cast-operations">Cast Operations</a> for an example. There is no way to cast a float or integer to a string or boolean (or vice versa).</p> <p>We list possible workarounds for changing a field’s data type below. Note that these workarounds will not update data that have already been written to the database.</p> <h4 id="write-the-data-to-a-different-field">Write the Data to a Different Field</h4> <p>The simplest workaround is to begin writing the new data type to a different field in the same <a href="../../concepts/glossary/index.html#series">series</a>.</p> <h4 id="work-the-shard-system">Work the Shard System</h4> <p>Field value types cannot differ within a <a href="../../concepts/glossary/index.html#shard">shard</a> but they can differ across shards.</p> <p>Users looking to change a field’s data type can use the <code>SHOW SHARDS</code> query to identify the <code>end_time</code> of the current shard. InfluxDB will accept writes with a different data type to an existing field if the point has a timestamp that occurs after that <code>end_time</code>.</p> <p>Note that this will not change the field’s data type on prior shards. For how this will affect your queries, please see <a href="index.html#how-does-influxdb-handle-field-type-discrepancies-across-shards">How does InfluxDB handle field type discrepancies across shards</a>.</p> <h2 id="how-do-i-perform-mathematical-operations-within-a-function">How do I perform mathematical operations within a function?</h2> <p>Currently, InfluxDB does not support mathematical operations within functions. We recommend using InfluxQL’s <a href="../../query_language/data_exploration/index.html#subqueries">subqueries</a> as a workaround.</p> <h3 id="example-3">Example</h3> <p>InfluxQL does not support the following syntax:</p> <pre>SELECT MEAN("dogs" - "cats") from "pet_daycare"
</pre> <p>Instead, use a subquery to get the same result:</p> <pre>&gt; SELECT MEAN("difference") FROM (SELECT "dogs" - "cat" AS "difference" FROM "pet_daycare")
</pre> <p>See the <a href="../../query_language/data_exploration/index.html#subqueries">Data Exploration</a> page for more information.</p> <h2 id="why-does-my-query-return-epoch-0-as-the-timestamp">Why does my query return epoch 0 as the timestamp?</h2> <p>In InfluxDB, epoch 0 (<code>1970-01-01T00:00:00Z</code>) is often used as a null timestamp equivalent. If you request a query that has no timestamp to return, such as an aggregation function with an unbounded time range, InfluxDB returns epoch 0 as the timestamp.</p> <h2 id="which-influxql-functions-support-nesting">Which InfluxQL functions support nesting?</h2> <p>The following InfluxQL functions support nesting:</p> <ul> <li>
<a href="#count"><code>COUNT()</code></a> with <a href="#distinct"><code>DISTINCT()</code></a>
</li> <li><a href="#cumulative-sum"><code>CUMULATIVE_SUM()</code></a></li> <li><a href="#derivative"><code>DERIVATIVE()</code></a></li> <li><a href="#difference"><code>DIFFERENCE()</code></a></li> <li><a href="#elapsed"><code>ELAPSED()</code></a></li> <li><a href="#moving-average"><code>MOVING_AVERAGE()</code></a></li> <li><a href="#non-negative-derivative"><code>NON_NEGATIVE_DERIVATIVE()</code></a></li> <li>
<a href="#holt-winters"><code>HOLT_WINTERS()</code></a> and <a href="#holt-winters"><code>HOLT_WINTERS_WITH_FIT()</code></a>
</li> </ul> <p>See the <a href="../../query_language/data_exploration/index.html#subqueries">Data Exploration</a> page for how to use a subquery as a substitute for nested functions.</p> <h2 id="what-determines-the-time-intervals-returned-by-group-by-time-queries">What determines the time intervals returned by <code>GROUP BY time()</code> queries?</h2> <p>The time intervals returned by <code>GROUP BY time()</code> queries conform to InfluxDB’s preset time buckets or to the user-specified <a href="../../query_language/data_exploration/index.html#advanced-group-by-time-syntax">offset interval</a>.</p> <h4 id="example-4">Example</h4> <h5 id="preset-time-buckets">Preset time buckets:</h5> <p> The following query calculates the average value of <code>sunflowers</code> between 6:15pm and 7:45pm and groups those averages into one hour intervals:</p> <pre>SELECT mean("sunflowers")
FROM "flower_orders"
WHERE time &gt;= '2016-08-29T18:15:00Z' AND time &lt;= '2016-08-29T19:45:00Z' GROUP BY time(1h)
</pre> <p>The results below show how InfluxDB maintains its preset time buckets.</p> <p>In this example, the 6pm hour is a preset bucket and the 7pm hour is a preset bucket. The average for the 6pm time bucket does not include data prior to 6:15pm because of the <code>WHERE</code> time clause, but any data included in the average for the 6pm time bucket must occur in the 6pm hour. The same goes for the 7pm time bucket; any data included in the average for the 7pm time bucket must occur in the 7pm hour. The dotted lines show the points that make up each average.</p> <p>Note that while the first timestamp in the results is <code>2016-08-29T18:00:00Z</code>, the query results in that bucket do <strong>not</strong> include data with timestamps that occur before the start of the <code>WHERE</code> time clause (<code>2016-08-29T18:15:00Z</code>).</p> <p>Raw data: Results:</p> <pre>name: flower_orders                                name: flower_orders
—————————                                          -------------------
time                    sunflowers                 time                  mean
2016-08-29T18:00:00Z    34                         2016-08-29T18:00:00Z  22.332
                       |--|                        2016-08-29T19:00:00Z  62.75
2016-08-29T18:15:00Z   |28|
2016-08-29T18:30:00Z   |19|                    
2016-08-29T18:45:00Z   |20|
                       |--|
                       |--|
2016-08-29T19:00:00Z   |56|
2016-08-29T19:15:00Z   |76|
2016-08-29T19:30:00Z   |29|
2016-08-29T19:45:00Z   |90|
                       |--|
2016-08-29T20:00:00Z    70

</pre> <h5 id="offset-interval">Offset interval</h5> <p> The following query calculates the average value of <code>sunflowers</code> between 6:15pm and 7:45pm and groups those averages into one hour intervals. It also offsets InfluxDB’s preset time buckets by <code>15</code> minutes.</p> <pre>SELECT mean("sunflowers")
FROM "flower_orders"
WHERE time &gt;= '2016-08-29T18:15:00Z' AND time &lt;= '2016-08-29T19:45:00Z' GROUP BY time(1h,15m)
                                                                                         ---
                                                                                          |
                                                                                   offset interval
</pre> <p>In this example, the user-specified <a href="../../query_language/data_exploration/index.html#advanced-group-by-time-syntax">offset interval</a> shifts InfluxDB’s preset time buckets forward by <code>15</code> minutes. The average for the 6pm time bucket now includes data between 6:15pm and 7pm, and the average for the 7pm time bucket includes data between 7:15pm and 8pm. The dotted lines show the points that make up each average.</p> <p>Note that the first timestamp in the result is <code>2016-08-29T18:15:00Z</code> instead of <code>2016-08-29T18:00:00Z</code>.</p> <p>Raw data: Results:</p> <pre>name: flower_orders                                name: flower_orders
—————————                                          -------------------
time                    sunflowers                 time                  mean
2016-08-29T18:00:00Z    34                         2016-08-29T18:15:00Z  30.75
                       |--|                        2016-08-29T19:15:00Z  65
2016-08-29T18:15:00Z   |28|
2016-08-29T18:30:00Z   |19|
2016-08-29T18:45:00Z   |20|
2016-08-29T19:00:00Z   |56|
                       |--|
                       |--|
2016-08-29T19:15:00Z   |76|
2016-08-29T19:30:00Z   |29|
2016-08-29T19:45:00Z   |90|
2016-08-29T20:00:00Z   |70|
                       |--|
</pre> <h2 id="why-do-my-queries-return-no-data-or-partial-data">Why do my queries return no data or partial data?</h2> <p>There are several possible explanations for why a query returns no data or partial data. We list some of the most frequent cases below:</p> <h3 id="retention-policies">Retention Policies</h3> <p>The first and most common explanation involves <a href="../../concepts/glossary/index.html#retention-policy-rp">retention policies</a> (RP). InfluxDB automatically queries data in a database’s <code>DEFAULT</code> RP. If your data are stored in an RP other than the <code>DEFAULT</code> RP, InfluxDB won’t return any results unless you <a href="../../query_language/data_exploration/index.html#example-7-select-all-data-from-a-fully-qualified-measurement">specify</a> the alternative RP.</p> <h3 id="tag-keys-in-the-select-clause">Tag Keys in the SELECT clause</h3> <p>A query requires at least one <a href="../../concepts/glossary/index.html#field-key">field key</a> in the <code>SELECT</code> clause to return data. If the <code>SELECT</code> clause only includes a single <a href="../../concepts/glossary/index.html#tag-key">tag key</a> or several tag keys, the query returns an empty response. Please see the <a href="../../query_language/data_exploration/index.html#common-issues-with-the-select-statement">Data Exploration</a> page for additional information.</p> <h3 id="query-time-range">Query Time Range</h3> <p>Another possible explanation has to do with your query’s time range. By default, most <a href="../../query_language/data_exploration/index.html#the-basic-select-statement"><code>SELECT</code> queries</a> cover the time range between <code>1677-09-21 00:12:43.145224194</code> and <code>2262-04-11T23:47:16.854775806Z</code> UTC. <code>SELECT</code> queries that also include a <a href="../../query_language/data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> clause</a>, however, cover the time range between <code>1677-09-21 00:12:43.145224194</code> and <a href="../../concepts/glossary/index.html#now"><code>now()</code></a>. If any of your data occur after <code>now()</code> a <code>GROUP BY time()</code> query will not cover those data points. Your query will need to provide <a href="../../query_language/data_exploration/index.html#time-syntax">an alternative upper bound</a> for the time range if the query includes a <code>GROUP BY time()</code> clause and if any of your data occur after <code>now()</code>.</p> <h3 id="identifier-names">Identifier Names</h3> <p>The final common explanation involves <a href="../../concepts/glossary/index.html#schema">schemas</a> with <a href="../../concepts/glossary/index.html#field">fields</a> and <a href="../../concepts/glossary/index.html#tag">tags</a> that have the same key. If a field and tag have the same key, the field will take precedence in all queries. You’ll need to use the <a href="../../query_language/data_exploration/index.html#description-of-syntax"><code>::tag</code> syntax</a> to specify the tag key in queries.</p> <h2 id="why-don-t-my-group-by-time-queries-return-timestamps-that-occur-after-now">Why don’t my GROUP BY time() queries return timestamps that occur after now()?</h2> <p>Most <code>SELECT</code> statements have a default time range between <a href="#what-are-the-minimum-and-maximum-timestamps-that-influxdb-can-store"><code>1677-09-21 00:12:43.145224194</code> and <code>2262-04-11T23:47:16.854775806Z</code> UTC</a>. For <code>SELECT</code> statements with a <a href="../../query_language/data_exploration/index.html#group-by-time-intervals"><code>GROUP BY time()</code> clause</a>, the default time range is between <code>1677-09-21 00:12:43.145224194</code> UTC and <a href="../../concepts/glossary/index.html#now"><code>now()</code></a>.</p> <p>To query data with timestamps that occur after <code>now()</code>, <code>SELECT</code> statements with a <code>GROUP BY time()</code> clause must provide an alternative upper bound in the <a href="../../query_language/data_exploration/index.html#the-where-clause"><code>WHERE</code> clause</a>.</p> <p>In the following codeblock, the first query covers data with timestamps between <code>2015-09-18T21:30:00Z</code> and <code>now()</code>. The second query covers data with timestamps between <code>2015-09-18T21:30:00Z</code> and 180 weeks from <code>now()</code>.</p> <pre>&gt; SELECT MEAN("boards") FROM "hillvalley" WHERE time &gt;= '2015-09-18T21:30:00Z' GROUP BY time(12m) fill(none)


&gt; SELECT MEAN("boards") FROM "hillvalley" WHERE time &gt;= '2015-09-18T21:30:00Z' AND time &lt;= now() + 180w GROUP BY time(12m) fill(none)
</pre> <p>Note that the <code>WHERE</code> clause must provide an alternative <strong>upper</strong> bound to override the default <code>now()</code> upper bound. The following query merely resets the lower bound to <code>now()</code> such that the query’s time range is between <code>now()</code> and <code>now()</code>:</p> <pre>&gt; SELECT MEAN("boards") FROM "hillvalley" WHERE time &gt;= now() GROUP BY time(12m) fill(none)
&gt;
</pre> <p>See the <a href="../../query_language/data_exploration/index.html#time-syntax">Data Exploration</a> document for more on time syntax in queries.</p> <h2 id="can-i-perform-mathematical-operations-against-timestamps">Can I perform mathematical operations against timestamps?</h2> <p>Currently, it is not possible to execute mathematical operators against timestamp values in InfluxDB. Most time calculations must be carried out by the client receiving the query results.</p> <p>There is limited support for using InfluxQL functions against timestamp values. The function <a href="../../query_language/functions/index.html#elapsed">ELAPSED()</a> returns the difference between subsequent timestamps in a single field.</p> <h2 id="can-i-identify-write-precision-from-returned-timestamps">Can I identify write precision from returned timestamps?</h2> <p>InfluxDB stores all timestamps as nanosecond values regardless of the write precision supplied. It is important to note that when returning query results, the database silently drops trailing zeros from timestamps which obscures the initial write precision.</p> <p>In the example below, the tags <code>precision_supplied</code> and <code>timestamp_supplied</code> show the time precision and timestamp that the user provided at the write. Because InfluxDB silently drops trailing zeros on returned timestamps, the write precision is not recognizable in the returned timestamps. </p> <pre data-language="bash">name: trails
-------------
time                  value	 precision_supplied  timestamp_supplied
1970-01-01T01:00:00Z  3      n                   3600000000000
1970-01-01T01:00:00Z  5      h                   1
1970-01-01T02:00:00Z  4      n                   7200000000000
1970-01-01T02:00:00Z  6      h                   2
</pre> 
<dt> <a href="https://github.com/influxdb/influxdb/issues/2977">GitHub Issue #2977</a> </dt> <h2 id="when-should-i-single-quote-and-when-should-i-double-quote-in-queries">When should I single quote and when should I double quote in queries?</h2> <p>Single quote string values (for example, tag values) but do not single quote identifiers (database names, retention policy names, user names, measurement names, tag keys, and field keys).</p> <p>Double quote identifiers if they start with a digit, contain characters other than <code>[A-z,0-9,_]</code>, or if they are an <a href="https://github.com/influxdb/influxdb/blob/master/influxql/README.md#keywords">InfluxQL keyword</a>. Double quotes are not required for identifiers if they don’t fall into one of those categories but we recommend double quoting them anyway.</p> <p>Examples:</p> <p>Yes: <code>SELECT bikes_available FROM bikes WHERE station_id='9'</code></p> <p>Yes: <code>SELECT "bikes_available" FROM "bikes" WHERE "station_id"='9'</code></p> <p>Yes: <code>SELECT MIN("avgrq-sz") AS "min_avgrq-sz" FROM telegraf</code></p> <p>Yes: <code>SELECT * from "cr@zy" where "p^e"='2'</code></p> <p>No: <code>SELECT 'bikes_available' FROM 'bikes' WHERE 'station_id'="9"</code></p> <p>No: <code>SELECT * from cr@zy where p^e='2'</code></p> <p>Single quote date time strings. InfluxDB returns an error (<code>ERR: invalid
operation: time and *influxql.VarRef are not compatible</code>) if you double quote a date time string.</p> <p>Examples:</p> <p>Yes: <code>SELECT "water_level" FROM "h2o_feet" WHERE time &gt; '2015-08-18T23:00:01.232000000Z' AND time &lt; '2015-09-19'</code></p> <p>No: <code>SELECT "water_level" FROM "h2o_feet" WHERE time &gt; "2015-08-18T23:00:01.232000000Z" AND time &lt; "2015-09-19"</code></p> <p>See <a href="../../query_language/data_exploration/index.html#time-syntax">Data Exploration</a> for more on time syntax in queries.</p> <h2 id="why-am-i-missing-data-after-creating-a-new-default-retention-policy">Why am I missing data after creating a new DEFAULT retention policy?</h2> <p>When you create a new <code>DEFAULT</code> retention policy (RP) on a database, the data written to the old <code>DEFAULT</code> RP remain in the old RP. Queries that do not specify an RP automatically query the new <code>DEFAULT</code> RP so the old data may appear to be missing. To query the old data you must fully qualify the relevant data in the query.</p> <p>Example:</p> <p>All of the data in the measurement <code>fleeting</code> fall under the <code>DEFAULT</code> RP called <code>one_hour</code>:</p> <pre data-language="bash">&gt; SELECT count(flounders) FROM fleeting
name: fleeting
--------------
time			               count
1970-01-01T00:00:00Z	 8
</pre> <p>We <a href="../../query_language/database_management/index.html#create-retention-policies-with-create-retention-policy">create</a> a new <code>DEFAULT</code> RP (<code>two_hour</code>) and perform the same query:</p> <pre data-language="bash">&gt; SELECT count(flounders) FROM fleeting
&gt;
</pre> <p>To query the old data, we must specify the old <code>DEFAULT</code> RP by fully qualifying <code>fleeting</code>:</p> <pre data-language="bash">&gt; SELECT count(flounders) FROM fish.one_hour.fleeting
name: fleeting
--------------
time			               count
1970-01-01T00:00:00Z	 8
</pre> <h2 id="why-is-my-query-with-a-where-or-time-clause-returning-empty-results">Why is my query with a <code>WHERE OR</code> time clause returning empty results?</h2> <p>Currently, InfluxDB does not support using <code>OR</code> with <a href="../../query_language/data_exploration/index.html#absolute-time">absolute time</a> in the <code>WHERE</code> clause. InfluxDB returns an empty response if the query’s <code>WHERE</code> clause uses <code>OR</code> with absolute time.</p> <p>Example:</p> <pre>&gt; SELECT * FROM "absolutismus" WHERE time = '2016-07-31T20:07:00Z' OR time = '2016-07-31T23:07:17Z'
&gt;
</pre> 
<dt> <a href="https://github.com/influxdata/influxdb/issues/7530">GitHub Issue #7530</a> </dt> <h2 id="why-does-fill-previous-return-empty-results">Why does <code>fill(previous)</code> return empty results?</h2> <p><code>fill(previous)</code> doesn’t fill the result for a time bucket if the previous value is outside the query’s time range.</p> <p>In the following example, InfluxDB doesn’t fill the <code>2016-07-12T16:50:20Z</code>-<code>2016-07-12T16:50:30Z</code> time bucket with the results from the <code>2016-07-12T16:50:00Z</code>-<code>2016-07-12T16:50:10Z</code> time bucket because the query’s time range does not include the earlier time bucket.</p> <p>Raw data:</p> <pre>&gt; SELECT * FROM "cupcakes"
name: cupcakes
--------------
time                   chocolate
2016-07-12T16:50:00Z   3
2016-07-12T16:50:10Z   2
2016-07-12T16:50:40Z   12
2016-07-12T16:50:50Z   11
</pre> <p><code>GROUP BY time()</code> query:</p> <pre>&gt; SELECT max("chocolate") FROM "cupcakes" WHERE time &gt;= '2016-07-12T16:50:20Z' AND time &lt;= '2016-07-12T16:51:10Z' GROUP BY time(20s) fill(previous)
name: cupcakes
--------------
time                   max
2016-07-12T16:50:20Z
2016-07-12T16:50:40Z   12
2016-07-12T16:51:00Z   12
</pre> <p>While this is the expected behavior of <code>fill(previous)</code>, an <a href="https://github.com/influxdata/influxdb/issues/6878">open feature request</a> on GitHub proposes that <code>fill(previous)</code> should fill results even when previous values fall outside the query’s time range.</p> <h2 id="why-are-my-into-queries-missing-data">Why are my INTO queries missing data?</h2> <p>By default, <code>INTO</code> queries convert any tags in the initial data to fields in the newly written data. This can cause InfluxDB to overwrite <a href="../../concepts/glossary/index.html#point">points</a> that were previously differentiated by a tag. Include <code>GROUP BY *</code> in all <code>INTO</code> queries to preserve tags in the newly written data.</p> <p>Note that this behavior does not apply to queries that use the <a href="../../query_language/functions/index.html#top"><code>TOP()</code></a> or <a href="../../query_language/functions/index.html#bottom"><code>BOTTOM()</code></a> functions. See the <a href="../../query_language/functions/index.html#issue-3-top-tags-and-the-into-clause"><code>TOP()</code></a> and <a href="../../query_language/functions/index.html#issue-3-bottom-tags-and-the-into-clause"><code>BOTTOM()</code></a> documentation for more information.</p> <h4 id="example-5">Example</h4> <h5 id="initial-data">Initial data</h5> <p> The <code>french_bulldogs</code> measurement includes the <code>color</code> tag and the <code>name</code> field.</p> <pre>&gt; SELECT * FROM "french_bulldogs"
name: french_bulldogs
---------------------
time                  color  name
2016-05-25T00:05:00Z  peach  nugget
2016-05-25T00:05:00Z  grey   rumple
2016-05-25T00:10:00Z  black  prince
</pre> <h5 id="into-query-without-group-by">
<code>INTO</code> query without <code>GROUP BY *</code>
</h5> <p> An <code>INTO</code> query without a <code>GROUP BY *</code> clause turns the <code>color</code> tag into a field in the newly written data. In the initial data the <code>nugget</code> point and the <code>rumple</code> points are differentiated only by the <code>color</code> tag. Once <code>color</code> becomes a field, InfluxDB assumes that the <code>nugget</code> point and the <code>rumple</code> point are duplicate points and it overwrites the <code>nugget</code> point with the <code>rumple</code> point.</p> <pre>&gt; SELECT * INTO "all_dogs" FROM "french_bulldogs"
name: result
------------
time                  written
1970-01-01T00:00:00Z  3

&gt; SELECT * FROM "all_dogs"
name: all_dogs
--------------
time                  color  name
2016-05-25T00:05:00Z  grey   rumple                &lt;---- no more nugget 🐶
2016-05-25T00:10:00Z  black  prince
</pre> <h5 id="into-query-with-group-by">
<code>INTO</code> query with <code>GROUP BY *</code>
</h5> <p> An <code>INTO</code> query with a <code>GROUP BY *</code> clause preserves <code>color</code> as a tag in the newly written data. In this case, the <code>nugget</code> point and the <code>rumple</code> point remain unique points and InfluxDB does not overwrite any data.</p> <pre>&gt; SELECT "name" INTO "all_dogs" FROM "french_bulldogs" GROUP BY *
name: result
------------
time                  written
1970-01-01T00:00:00Z  3

&gt; SELECT * FROM "all_dogs"
name: all_dogs
--------------
time                  color  name
2016-05-25T00:05:00Z  peach  nugget
2016-05-25T00:05:00Z  grey   rumple
2016-05-25T00:10:00Z  black  prince
</pre> <h2 id="how-do-i-query-data-with-an-identical-tag-key-and-field-key">How do I query data with an identical tag key and field key?</h2> <p>Use the <code>::</code> syntax to specify if the key is a field key or tag key.</p> <h4 id="examples">Examples</h4> <h5 id="sample-data">Sample data:</h5>  <pre>&gt; INSERT candied,almonds=true almonds=50,half_almonds=51 1465317610000000000
&gt; INSERT candied,almonds=true almonds=55,half_almonds=56 1465317620000000000

&gt; SELECT * FROM "candied"
name: candied
-------------
time                   almonds  almonds_1  half_almonds
2016-06-07T16:40:10Z   50       true       51
2016-06-07T16:40:20Z   55       true       56
</pre> <h5 id="specify-that-the-key-is-a-field">Specify that the key is a field:</h5>  <pre>&gt; SELECT * FROM "candied" WHERE "almonds"::field &gt; 51
name: candied
-------------
time                   almonds  almonds_1  half_almonds
2016-06-07T16:40:20Z   55       true       56
</pre> <h5 id="specify-that-the-key-is-a-tag">Specify that the key is a tag:</h5>  <pre>&gt; SELECT * FROM "candied" WHERE "almonds"::tag='true'
name: candied
-------------
time                   almonds  almonds_1  half_almonds
2016-06-07T16:40:10Z   50       true       51
2016-06-07T16:40:20Z   55       true       56
</pre> <h2 id="how-do-i-query-data-across-measurements">How do I query data across measurements?</h2> <p>Currently, there is no way to perform cross-measurement math or grouping. All data must be under a single measurement to query it together. InfluxDB is not a relational database and mapping data across measurements is not currently a recommended <a href="../../concepts/glossary/index.html#schema">schema</a>. See GitHub Issue <a href="https://github.com/influxdata/influxdb/issues/3552">#3552</a> for a discussion of implementing JOIN in InfluxDB.</p> <h2 id="does-the-order-of-the-timestamps-matter">Does the order of the timestamps matter?</h2> <p>No. Our tests indicate that there is a only a negligible difference between the times it takes InfluxDB to complete the following queries:</p> <pre>SELECT ... FROM ... WHERE time &gt; 'timestamp1' AND time &lt; 'timestamp2'
SELECT ... FROM ... WHERE time &lt; 'timestamp2' AND time &gt; 'timestamp1'
</pre> <h2 id="how-do-i-select-data-with-a-tag-that-has-no-value">How do I SELECT data with a tag that has no value?</h2> <p>Specify an empty tag value with <code>''</code>. For example:</p> <pre>&gt; SELECT * FROM "vases" WHERE priceless=''
name: vases
-----------
time                   origin   priceless
2016-07-20T18:42:00Z   8
</pre> <h2 id="how-can-i-query-for-series-cardinality">How can I query for series cardinality?</h2> <p>The following queries return <a href="../../concepts/glossary/index.html#series-cardinality">series cardinality</a>:</p> <h4 id="series-cardinality-per-database">Series cardinality per database:</h4> <pre>SELECT numSeries FROM "_internal".."database" WHERE time &gt; now() - 10s GROUP BY "database" ORDER BY desc LIMIT 1
</pre> <h4 id="series-cardinality-across-all-database">Series cardinality across all database:</h4> <pre>SELECT sum(numSeries) AS "total_series" FROM "_internal".."database" WHERE time &gt; now() - 10s
</pre> <blockquote> <p><strong>Note:</strong> Changes to the <a href="../../administration/config/index.html#monitor"><code>[monitor]</code></a> section in the configuration file may affect query results.</p> </blockquote> <h2 id="why-does-series-cardinality-matter">Why does series cardinality matter?</h2> <p>InfluxDB maintains an in-memory index of every <a href="../../concepts/glossary/index.html#series">series</a> in the system. As the number of unique series grows, so does the RAM usage. High <a href="../../concepts/glossary/index.html#series-cardinality">series cardinality</a> can lead to the operating system killing the InfluxDB process with an out of memory (OOM) exception. See <a href="#querying-for-series-cardinality">Querying for series cardinality</a> to learn how to query for series cardinality.</p> <h2 id="how-can-i-remove-series-from-the-index">How can I remove series from the index?</h2> <p>To reduce series cardinality, series must be dropped from the index. <a href="../../query_language/database_management/index.html#delete-a-database-with-drop-database"><code>DROP DATABASE</code></a>, <a href="../../query_language/database_management/index.html#delete-measurements-with-drop-measurement"><code>DROP MEASUREMENT</code></a>, and <a href="../../query_language/database_management/index.html#drop-series-from-the-index-with-drop-series"><code>DROP SERIES</code></a> will all remove series from the index and reduce the overall series cardinality.</p> <blockquote> <p><strong>Note:</strong> <code>DROP</code> commands are usually CPU-intensive, as they frequently trigger a TSM compaction. Issuing <code>DROP</code> queries at a high frequency may significantly impact write and other query throughput.</p> </blockquote> <h2 id="how-do-i-write-integer-field-values">How do I write integer field values?</h2> <p>Add a trailing <code>i</code> to the end of the field value when writing an integer. If you do not provide the <code>i</code>, InfluxDB will treat the field value as a float.</p> <p>Writes an integer: <code>value=100i</code> Writes a float: <code>value=100</code></p> <h2 id="how-does-influxdb-handle-duplicate-points">How does InfluxDB handle duplicate points?</h2> <p>A point is uniquely identified by the measurement name, <a href="../../concepts/glossary/index.html#tag-set">tag set</a>, and timestamp. If you submit a new point with the same measurement, tag set, and timestamp as an existing point, the field set becomes the union of the old field set and the new field set, where any ties go to the new field set. This is the intended behavior.</p> <p>For example:</p> <p>Old point: <code>cpu_load,hostname=server02,az=us_west val_1=24.5,val_2=7 1234567890000000</code></p> <p>New point: <code>cpu_load,hostname=server02,az=us_west val_1=5.24 1234567890000000</code></p> <p>After you submit the new point, InfluxDB overwrites <code>val_1</code> with the new field value and leaves the field <code>val_2</code> alone:</p> <pre>&gt; SELECT * FROM "cpu_load" WHERE time = 1234567890000000
name: cpu_load
--------------
time                      az        hostname   val_1   val_2
1970-01-15T06:56:07.89Z   us_west   server02   5.24    7
</pre> <p>To store both points:</p> <ul> <li>
<p>Introduce an arbitrary new tag to enforce uniqueness.</p> <p>Old point: <code>cpu_load,hostname=server02,az=us_west,uniq=1 val_1=24.5,val_2=7 1234567890000000</code></p> <p>New point: <code>cpu_load,hostname=server02,az=us_west,uniq=2 val_1=5.24 1234567890000000</code></p> <p>After writing the new point to InfluxDB:</p>
</li> </ul> <pre>&gt; SELECT * FROM "cpu_load" WHERE time = 1234567890000000
name: cpu_load
--------------
time                      az        hostname   uniq   val_1   val_2
1970-01-15T06:56:07.89Z   us_west   server02   1      24.5    7
1970-01-15T06:56:07.89Z   us_west   server02   2      5.24
</pre> <ul> <li>
<p>Increment the timestamp by a nanosecond.</p> <p>Old point: <code>cpu_load,hostname=server02,az=us_west val_1=24.5,val_2=7 1234567890000000</code></p> <p>New point: <code>cpu_load,hostname=server02,az=us_west val_1=5.24 1234567890000001</code></p> <p>After writing the new point to InfluxDB:</p>
</li> </ul> <pre>&gt; SELECT * FROM "cpu_load" WHERE time &gt;= 1234567890000000 and time &lt;= 1234567890000001
name: cpu_load
--------------
time                             az        hostname   val_1   val_2
1970-01-15T06:56:07.89Z          us_west   server02   24.5    7
1970-01-15T06:56:07.890000001Z   us_west   server02   5.24
</pre> <h2 id="what-newline-character-does-the-http-api-require">What newline character does the HTTP API require?</h2> <p>InfluxDB’s line protocol relies on line feed (<code>\n</code>, which is ASCII <code>0x0A</code>) to indicate the end of a line and the beginning of a new line. Files or data that use a newline character other than <code>\n</code> will result in the following errors: <code>bad timestamp</code>, <code>unable to parse</code>.</p> <p>Note that Windows uses carriage return and line feed (<code>\r\n</code>) as the newline character.</p> <h2 id="what-words-and-characters-should-i-avoid-when-writing-data-to-influxdb">What words and characters should I avoid when writing data to InfluxDB?</h2> <h3 id="influxql-keywords">InfluxQL Keywords</h3> <p>If you use an <a href="https://github.com/influxdb/influxdb/blob/master/influxql/README.md#keywords">InfluxQL keyword</a> as an identifier you will need to double quote that identifier in every query. This can lead to <a href="../errors/index.html#error-parsing-query-found-expected-identifier-at-line-char">non-intuitive errors</a>. Identifiers are continuous query names, database names, field keys, measurement names, retention policy names, subscription names, tag keys, and user names.</p> <h3 id="time">time</h3> <p>The keyword <code>time</code> is a special case. <code>time</code> can be a <a href="../../concepts/glossary/index.html#continuous-query-cq">continuous query</a> name, database name, <a href="../../concepts/glossary/index.html#measurement">measurement</a> name, <a href="../../concepts/glossary/index.html#retention-policy-rp">retention policy</a> name, <a href="../../concepts/glossary/index.html#subscription">subscription</a> name, and <a href="../../concepts/glossary/index.html#user">user</a> name. In those cases, <code>time</code> does not require double quotes in queries. <code>time</code> cannot be a <a href="../../concepts/glossary/index.html#field-key">field key</a> or <a href="../../concepts/glossary/index.html#tag-key">tag key</a>; InfluxDB rejects writes with <code>time</code> as a field key or tag key and returns an error.</p> <h4 id="examples-1">Examples</h4> <h5 id="example-1-write-time-as-a-measurement-and-query-it">Example 1: Write <code>time</code> as a measurement and query it</h5>  <pre>&gt; INSERT time value=1

&gt; SELECT * FROM time

name: time
time                            value
----                            -----
2017-02-07T18:28:27.349785384Z  1
</pre> <p><code>time</code> is a valid measurement name in InfluxDB.</p> <h5 id="example-2-write-time-as-a-field-key-and-attempt-to-query-it">Example 2: Write <code>time</code> as a field key and attempt to query it</h5>  <pre>&gt; INSERT mymeas time=1
ERR: {"error":"partial write: invalid field name: input field \"time\" on measurement \"mymeas\" is invalid dropped=1"}
</pre> <p><code>time</code> is not a valid field key in InfluxDB. The system does does not write the point and returns a <code>400</code>.</p> <h5 id="example-3-write-time-as-a-tag-key-and-attempt-to-query-it">Example 3: Write <code>time</code> as a tag key and attempt to query it</h5>  <pre>&gt; INSERT mymeas,time=1 value=1
ERR: {"error":"partial write: invalid tag key: input tag \"time\" on measurement \"mymeas\" is invalid dropped=1"}
</pre> <p><code>time</code> is not a valid tag key in InfluxDB. The system does does not write the point and returns a <code>400</code>.</p> <h3 id="characters">Characters</h3> <p>To keep regular expressions and quoting simple, avoid using the following characters in identifiers:</p> <p><code>\</code> backslash <code>^</code> circumflex accent <code>$</code> dollar sign <code>'</code> single quotation mark <code>"</code> double quotation mark <code>=</code> equal sign <code>,</code> comma</p> <h2 id="when-should-i-single-quote-and-when-should-i-double-quote-when-writing-data">When should I single quote and when should I double quote when writing data?</h2> <ul> <li>Avoid single quoting and double quoting identifiers when writing data via the line protocol; see the examples below for how writing identifiers with quotes can complicate queries. Identifiers are database names, retention policy names, user names, measurement names, tag keys, and field keys.   Write with a double-quoted measurement: <code>INSERT "bikes" bikes_available=3</code> Applicable query: <code>SELECT * FROM "\"bikes\""</code>   Write with a single-quoted measurement: <code>INSERT 'bikes' bikes_available=3</code> Applicable query: <code>SELECT * FROM "\'bikes\'"</code>   Write with an unquoted measurement: <code>INSERT bikes bikes_available=3</code> Applicable query: <code>SELECT * FROM "bikes"</code>  </li> <li>Double quote field values that are strings.   Write: <code>INSERT bikes happiness="level 2"</code> Applicable query: <code>SELECT * FROM "bikes" WHERE "happiness"='level 2'</code>  </li> <li>Special characters should be escaped with a backslash and not placed in quotes.   Write: <code>INSERT wacky va\"ue=4</code> Applicable query: <code>SELECT "va\"ue" FROM "wacky"</code>
</li> </ul> <p>See the <a href="../../write_protocols/index.html">Line Protocol</a> documentation for more information.</p> <h2 id="does-the-precision-of-the-timestamp-matter">Does the precision of the timestamp matter?</h2> <p>Yes. To maximize performance we recommend using the coarsest possible timestamp precision when writing data to InfluxDB.</p> <p>For example, we recommend using the second of the following two requests:</p> <pre>curl -i -XPOST "http://localhost:8086/write?db=weather" --data-binary 'temperature,location=1 value=90 1472666050000000000'

curl -i -XPOST "http://localhost:8086/write?db=weather&amp;precision=s" --data-binary 'temperature,location=1 value=90 1472666050'
</pre> <h2 id="what-are-the-configuration-recommendations-and-schema-guidelines-for-writing-sparse-historical-data">What are the configuration recommendations and schema guidelines for writing sparse, historical data?</h2> <p>For users who want to write sparse, historical data to InfluxDB, we recommend:</p> <p>First, lengthening your <a href="../../concepts/glossary/index.html#retention-policy-rp">retention policy</a>‘s <a href="../../concepts/glossary/index.html#shard-group">shard group</a> duration to cover several years. The default shard group duration is one week and if your data cover several hundred years – well, that’s a lot of shards! Having an extremely high number of shards is inefficient for InfluxDB. Increase the shard group duration for your data’s retention policy with the <a href="../../query_language/database_management/index.html#modify-retention-policies-with-alter-retention-policy"><code>ALTER RETENTION POLICY</code> query</a>.</p> <p>Second, temporarily lowering the <a href="../../administration/config/index.html#cache-snapshot-write-cold-duration-10m"><code>cache-snapshot-write-cold-duration</code> configuration setting</a>. If you’re writing a lot of historical data, the default setting (<code>10m</code>) can cause the system to hold all of your data in cache for every shard. Temporarily lowering the <code>cache-snapshot-write-cold-duration</code> setting to <code>10s</code> while you write the historical data makes the process more efficient.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2015 InfluxData, Inc.<br>Licensed under the MIT license.<br>
    <a href="https://docs.influxdata.com/influxdb/v1.3/troubleshooting/frequently-asked-questions/" class="_attribution-link">https://docs.influxdata.com/influxdb/v1.3/troubleshooting/frequently-asked-questions/</a>
  </p>
</div>
