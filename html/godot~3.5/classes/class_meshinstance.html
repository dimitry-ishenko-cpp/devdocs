<h1 id="class-meshinstance">MeshInstance</h1> <p><strong>Inherits:</strong> <a href="class_geometryinstance.html#class-geometryinstance"><span class="std std-ref">GeometryInstance</span></a> <strong>&lt;</strong> <a href="class_visualinstance.html#class-visualinstance"><span class="std std-ref">VisualInstance</span></a> <strong>&lt;</strong> <a href="class_cullinstance.html#class-cullinstance"><span class="std std-ref">CullInstance</span></a> <strong>&lt;</strong> <a href="class_spatial.html#class-spatial"><span class="std std-ref">Spatial</span></a> <strong>&lt;</strong> <a href="class_node.html#class-node"><span class="std std-ref">Node</span></a> <strong>&lt;</strong> <a href="class_object.html#class-object"><span class="std std-ref">Object</span></a></p> <p><strong>Inherited By:</strong> <a href="class_softbody.html#class-softbody"><span class="std std-ref">SoftBody</span></a></p> <p>Node that instances meshes into a scenario.</p> <section id="description"> <h2>Description</h2> <p>MeshInstance is a node that takes a <a href="class_mesh.html#class-mesh"><span class="std std-ref">Mesh</span></a> resource and adds it to the current scenario by creating an instance of it. This is the class most often used to get 3D geometry rendered and can be used to instance a single <a href="class_mesh.html#class-mesh"><span class="std std-ref">Mesh</span></a> in many places. This allows reusing geometry, which can save on resources. When a <a href="class_mesh.html#class-mesh"><span class="std std-ref">Mesh</span></a> has to be instanced more than thousands of times at close proximity, consider using a <a href="class_multimesh.html#class-multimesh"><span class="std std-ref">MultiMesh</span></a> in a <a href="class_multimeshinstance.html#class-multimeshinstance"><span class="std std-ref">MultiMeshInstance</span></a> instead.</p> </section> <section id="tutorials"> <h2>Tutorials</h2> <ul class="simple"> <li><a href="https://godotengine.org/asset-library/asset/123">3D Material Testers Demo</a></li> <li><a href="https://godotengine.org/asset-library/asset/126">3D Kinematic Character Demo</a></li> <li><a href="https://godotengine.org/asset-library/asset/125">3D Platformer Demo</a></li> <li><a href="https://godotengine.org/asset-library/asset/678">Third Person Shooter Demo</a></li> </ul> </section> <section id="properties"> <h2>Properties</h2> <table class="docutils align-default">   <tr>
<td><p><a href="class_mesh.html#class-mesh"><span class="std std-ref">Mesh</span></a></p></td> <td><p><a href="#class-meshinstance-property-mesh"><span class="std std-ref">mesh</span></a></p></td> <td></td> </tr> <tr>
<td><p><a href="class_nodepath.html#class-nodepath"><span class="std std-ref">NodePath</span></a></p></td> <td><p><a href="#class-meshinstance-property-skeleton"><span class="std std-ref">skeleton</span></a></p></td> <td><p><code>NodePath("..")</code></p></td> </tr> <tr>
<td><p><a href="class_skin.html#class-skin"><span class="std std-ref">Skin</span></a></p></td> <td><p><a href="#class-meshinstance-property-skin"><span class="std std-ref">skin</span></a></p></td> <td></td> </tr> <tr>
<td><p><a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a></p></td> <td><p><a href="#class-meshinstance-property-software-skinning-transform-normals"><span class="std std-ref">software_skinning_transform_normals</span></a></p></td> <td><p><code>true</code></p></td> </tr>  </table> </section> <section id="methods"> <h2>Methods</h2> <table class="docutils align-default">   <tr>
<td><p>void</p></td> <td><p><a href="#class-meshinstance-method-create-convex-collision"><span class="std std-ref">create_convex_collision</span></a> <strong>(</strong> <a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> clean=true, <a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> simplify=false <strong>)</strong></p></td> </tr> <tr>
<td><p>void</p></td> <td><p><a href="#class-meshinstance-method-create-debug-tangents"><span class="std std-ref">create_debug_tangents</span></a> <strong>(</strong> <strong>)</strong></p></td> </tr> <tr>
<td><p>void</p></td> <td><p><a href="#class-meshinstance-method-create-multiple-convex-collisions"><span class="std std-ref">create_multiple_convex_collisions</span></a> <strong>(</strong> <strong>)</strong></p></td> </tr> <tr>
<td><p>void</p></td> <td><p><a href="#class-meshinstance-method-create-trimesh-collision"><span class="std std-ref">create_trimesh_collision</span></a> <strong>(</strong> <strong>)</strong></p></td> </tr> <tr>
<td><p><a href="class_material.html#class-material"><span class="std std-ref">Material</span></a></p></td> <td><p><a href="#class-meshinstance-method-get-active-material"><span class="std std-ref">get_active_material</span></a> <strong>(</strong> <a href="class_int.html#class-int"><span class="std std-ref">int</span></a> surface <strong>)</strong> <abbr title="This method has no side effects. It doesn't modify any of the instance's member variables.">const</abbr></p></td> </tr> <tr>
<td><p><a href="class_material.html#class-material"><span class="std std-ref">Material</span></a></p></td> <td><p><a href="#class-meshinstance-method-get-surface-material"><span class="std std-ref">get_surface_material</span></a> <strong>(</strong> <a href="class_int.html#class-int"><span class="std std-ref">int</span></a> surface <strong>)</strong> <abbr title="This method has no side effects. It doesn't modify any of the instance's member variables.">const</abbr></p></td> </tr> <tr>
<td><p><a href="class_int.html#class-int"><span class="std std-ref">int</span></a></p></td> <td><p><a href="#class-meshinstance-method-get-surface-material-count"><span class="std std-ref">get_surface_material_count</span></a> <strong>(</strong> <strong>)</strong> <abbr title="This method has no side effects. It doesn't modify any of the instance's member variables.">const</abbr></p></td> </tr> <tr>
<td><p><a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a></p></td> <td><p><a href="#class-meshinstance-method-is-mergeable-with"><span class="std std-ref">is_mergeable_with</span></a> <strong>(</strong> <a href="class_node.html#class-node"><span class="std std-ref">Node</span></a> other_mesh_instance <strong>)</strong> <abbr title="This method has no side effects. It doesn't modify any of the instance's member variables.">const</abbr></p></td> </tr> <tr>
<td><p><a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a></p></td> <td><p><a href="#class-meshinstance-method-merge-meshes"><span class="std std-ref">merge_meshes</span></a> <strong>(</strong> <a href="class_array.html#class-array"><span class="std std-ref">Array</span></a> mesh_instances=[ ], <a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> use_global_space=false, <a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> check_compatibility=true <strong>)</strong></p></td> </tr> <tr>
<td><p>void</p></td> <td><p><a href="#class-meshinstance-method-set-surface-material"><span class="std std-ref">set_surface_material</span></a> <strong>(</strong> <a href="class_int.html#class-int"><span class="std std-ref">int</span></a> surface, <a href="class_material.html#class-material"><span class="std std-ref">Material</span></a> material <strong>)</strong></p></td> </tr>  </table> </section> <section id="property-descriptions"> <h2>Property Descriptions</h2> <h3 id="class-meshinstance-property-mesh"><p><a href="class_mesh.html#class-mesh"><span class="std std-ref">Mesh</span></a> mesh</p></h3> <table class="docutils align-default">   <tr>
<td><p><em>Setter</em></p></td> <td><p>set_mesh(value)</p></td> </tr> <tr>
<td><p><em>Getter</em></p></td> <td><p>get_mesh()</p></td> </tr>  </table> <p>The <a href="class_mesh.html#class-mesh"><span class="std std-ref">Mesh</span></a> resource for the instance.</p>  <h3 id="class-meshinstance-property-skeleton"><p><a href="class_nodepath.html#class-nodepath"><span class="std std-ref">NodePath</span></a> skeleton</p></h3> <table class="docutils align-default">   <tr>
<td><p><em>Default</em></p></td> <td><p><code>NodePath("..")</code></p></td> </tr> <tr>
<td><p><em>Setter</em></p></td> <td><p>set_skeleton_path(value)</p></td> </tr> <tr>
<td><p><em>Getter</em></p></td> <td><p>get_skeleton_path()</p></td> </tr>  </table> <p><a href="class_nodepath.html#class-nodepath"><span class="std std-ref">NodePath</span></a> to the <a href="class_skeleton.html#class-skeleton"><span class="std std-ref">Skeleton</span></a> associated with the instance.</p>  <h3 id="class-meshinstance-property-skin"><p><a href="class_skin.html#class-skin"><span class="std std-ref">Skin</span></a> skin</p></h3> <table class="docutils align-default">   <tr>
<td><p><em>Setter</em></p></td> <td><p>set_skin(value)</p></td> </tr> <tr>
<td><p><em>Getter</em></p></td> <td><p>get_skin()</p></td> </tr>  </table> <p>Sets the skin to be used by this instance.</p>  <h3 id="class-meshinstance-property-software-skinning-transform-normals"><p><a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> software_skinning_transform_normals</p></h3> <table class="docutils align-default">   <tr>
<td><p><em>Default</em></p></td> <td><p><code>true</code></p></td> </tr> <tr>
<td><p><em>Setter</em></p></td> <td><p>set_software_skinning_transform_normals(value)</p></td> </tr> <tr>
<td><p><em>Getter</em></p></td> <td><p>is_software_skinning_transform_normals_enabled()</p></td> </tr>  </table> <p>If <code>true</code>, normals are transformed when software skinning is used. Set to <code>false</code> when normals are not needed for better performance.</p> <p>See <a href="class_projectsettings.html#class-projectsettings-property-rendering-quality-skinning-software-skinning-fallback"><span class="std std-ref">ProjectSettings.rendering/quality/skinning/software_skinning_fallback</span></a> for details about how software skinning is enabled.</p> </section> <section id="method-descriptions"> <h2>Method Descriptions</h2> <h3 id="class-meshinstance-method-create-convex-collision"><p>void create_convex_collision ( <a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> clean=true, <a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> simplify=false )</p></h3> <p>This helper creates a <a href="class_staticbody.html#class-staticbody"><span class="std std-ref">StaticBody</span></a> child node with a <a href="class_convexpolygonshape.html#class-convexpolygonshape"><span class="std std-ref">ConvexPolygonShape</span></a> collision shape calculated from the mesh geometry. It's mainly used for testing.</p> <p>If <code>clean</code> is <code>true</code> (default), duplicate and interior vertices are removed automatically. You can set it to <code>false</code> to make the process faster if not needed.</p> <p>If <code>simplify</code> is <code>true</code>, the geometry can be further simplified to reduce the amount of vertices. Disabled by default.</p>  <h3 id="class-meshinstance-method-create-debug-tangents"><p>void create_debug_tangents ( )</p></h3> <p>This helper creates a <code>MeshInstance</code> child node with gizmos at every vertex calculated from the mesh geometry. It's mainly used for testing.</p>  <h3 id="class-meshinstance-method-create-multiple-convex-collisions"><p>void create_multiple_convex_collisions ( )</p></h3> <p>This helper creates a <a href="class_staticbody.html#class-staticbody"><span class="std std-ref">StaticBody</span></a> child node with multiple <a href="class_convexpolygonshape.html#class-convexpolygonshape"><span class="std std-ref">ConvexPolygonShape</span></a> collision shapes calculated from the mesh geometry via convex decomposition. It's mainly used for testing.</p>  <h3 id="class-meshinstance-method-create-trimesh-collision"><p>void create_trimesh_collision ( )</p></h3> <p>This helper creates a <a href="class_staticbody.html#class-staticbody"><span class="std std-ref">StaticBody</span></a> child node with a <a href="class_concavepolygonshape.html#class-concavepolygonshape"><span class="std std-ref">ConcavePolygonShape</span></a> collision shape calculated from the mesh geometry. It's mainly used for testing.</p>  <h3 id="class-meshinstance-method-get-active-material"><p><a href="class_material.html#class-material"><span class="std std-ref">Material</span></a> get_active_material ( <a href="class_int.html#class-int"><span class="std std-ref">int</span></a> surface ) <abbr title="This method has no side effects. It doesn't modify any of the instance's member variables.">const</abbr></p></h3> <p>Returns the <a href="class_material.html#class-material"><span class="std std-ref">Material</span></a> that will be used by the <a href="class_mesh.html#class-mesh"><span class="std std-ref">Mesh</span></a> when drawing. This can return the <a href="class_geometryinstance.html#class-geometryinstance-property-material-override"><span class="std std-ref">GeometryInstance.material_override</span></a>, the surface override <a href="class_material.html#class-material"><span class="std std-ref">Material</span></a> defined in this <code>MeshInstance</code>, or the surface <a href="class_material.html#class-material"><span class="std std-ref">Material</span></a> defined in the <a href="class_mesh.html#class-mesh"><span class="std std-ref">Mesh</span></a>. For example, if <a href="class_geometryinstance.html#class-geometryinstance-property-material-override"><span class="std std-ref">GeometryInstance.material_override</span></a> is used, all surfaces will return the override material.</p>  <h3 id="class-meshinstance-method-get-surface-material"><p><a href="class_material.html#class-material"><span class="std std-ref">Material</span></a> get_surface_material ( <a href="class_int.html#class-int"><span class="std std-ref">int</span></a> surface ) <abbr title="This method has no side effects. It doesn't modify any of the instance's member variables.">const</abbr></p></h3> <p>Returns the override <a href="class_material.html#class-material"><span class="std std-ref">Material</span></a> for a surface of the <a href="class_mesh.html#class-mesh"><span class="std std-ref">Mesh</span></a> resource.</p> <p><strong>Note:</strong> This function only returns <em>override</em> materials associated with this <code>MeshInstance</code>. Consider using <a href="#class-meshinstance-method-get-active-material"><span class="std std-ref">get_active_material</span></a> or <a href="class_mesh.html#class-mesh-method-surface-get-material"><span class="std std-ref">Mesh.surface_get_material</span></a> to get materials associated with the <a href="class_mesh.html#class-mesh"><span class="std std-ref">Mesh</span></a> resource.</p>  <h3 id="class-meshinstance-method-get-surface-material-count"><p><a href="class_int.html#class-int"><span class="std std-ref">int</span></a> get_surface_material_count ( ) <abbr title="This method has no side effects. It doesn't modify any of the instance's member variables.">const</abbr></p></h3> <p>Returns the number of surface override materials.</p>  <h3 id="class-meshinstance-method-is-mergeable-with"><p><a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> is_mergeable_with ( <a href="class_node.html#class-node"><span class="std std-ref">Node</span></a> other_mesh_instance ) <abbr title="This method has no side effects. It doesn't modify any of the instance's member variables.">const</abbr></p></h3> <p>Returns <code>true</code> if this <code>MeshInstance</code> can be merged with the specified <code>other_mesh_instance</code>, using the <a href="#class-meshinstance-method-merge-meshes"><span class="std std-ref">merge_meshes</span></a> function.</p> <p>In order to be mergeable, properties of the <code>MeshInstance</code> must match, and each surface must match, in terms of material, attributes and vertex format.</p>  <h3 id="class-meshinstance-method-merge-meshes"><p><a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> merge_meshes ( <a href="class_array.html#class-array"><span class="std std-ref">Array</span></a> mesh_instances=[ ], <a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> use_global_space=false, <a href="class_bool.html#class-bool"><span class="std std-ref">bool</span></a> check_compatibility=true )</p></h3> <p>This function can merge together the data from several source <code>MeshInstance</code>s into a single destination <code>MeshInstance</code> (the MeshInstance the function is called from). This is primarily useful for improving performance by reducing the number of drawcalls and <a href="class_node.html#class-node"><span class="std std-ref">Node</span></a>s.</p> <p>Merging should only be attempted for simple meshes that do not contain animation.</p> <p>The final vertices can either be returned in global space, or in local space relative to the destination <code>MeshInstance</code> global transform (the destination Node must be inside the <a href="class_scenetree.html#class-scenetree"><span class="std std-ref">SceneTree</span></a> for local space to work).</p> <p>The function will make a final check for compatibility between the <code>MeshInstance</code>s by default, this should always be used unless you have previously checked for compatibility using <a href="#class-meshinstance-method-is-mergeable-with"><span class="std std-ref">is_mergeable_with</span></a>. If the compatibility check is omitted and the meshes are merged, you may see rendering errors.</p> <p><strong>Note:</strong> The requirements for similarity between meshes are quite stringent. They can be checked using the <a href="#class-meshinstance-method-is-mergeable-with"><span class="std std-ref">is_mergeable_with</span></a> function prior to calling <a href="#class-meshinstance-method-merge-meshes"><span class="std std-ref">merge_meshes</span></a>.</p> <p>Also note that any initial data in the destination <code>MeshInstance</code> data will be discarded.</p>  <h3 id="class-meshinstance-method-set-surface-material"><p>void set_surface_material ( <a href="class_int.html#class-int"><span class="std std-ref">int</span></a> surface, <a href="class_material.html#class-material"><span class="std std-ref">Material</span></a> material )</p></h3> <p>Sets the override <a href="class_material.html#class-material"><span class="std std-ref">Material</span></a> for the specified surface of the <a href="class_mesh.html#class-mesh"><span class="std std-ref">Mesh</span></a> resource. This material is associated with this <code>MeshInstance</code> rather than with the <a href="class_mesh.html#class-mesh"><span class="std std-ref">Mesh</span></a> resource.</p> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2014&ndash;2022 Juan Linietsky, Ariel Manzur, Godot Engine contributors<br>Licensed under the MIT License.<br>
    <a href="https://docs.godotengine.org/en/3.5/classes/class_meshinstance.html" class="_attribution-link">https://docs.godotengine.org/en/3.5/classes/class_meshinstance.html</a>
  </p>
</div>
