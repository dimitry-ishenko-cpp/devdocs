<h1 id="class-aescontext">AESContext</h1> <p><strong>Inherits:</strong> <a href="class_reference.html#class-reference"><span class="std std-ref">Reference</span></a> <strong>&lt;</strong> <a href="class_object.html#class-object"><span class="std std-ref">Object</span></a></p> <p>Interface to low level AES encryption features.</p> <section id="description"> <h2>Description</h2> <p>This class provides access to AES encryption/decryption of raw data. Both AES-ECB and AES-CBC mode are supported.</p> <pre data-language="gdscript">extends Node

var aes = AESContext.new()

func _ready():
    var key = "My secret key!!!" # Key must be either 16 or 32 bytes.
    var data = "My secret text!!" # Data size must be multiple of 16 bytes, apply padding if needed.
    # Encrypt ECB
    aes.start(AESContext.MODE_ECB_ENCRYPT, key.to_utf8())
    var encrypted = aes.update(data.to_utf8())
    aes.finish()
    # Decrypt ECB
    aes.start(AESContext.MODE_ECB_DECRYPT, key.to_utf8())
    var decrypted = aes.update(encrypted)
    aes.finish()
    # Check ECB
    assert(decrypted == data.to_utf8())

    var iv = "My secret iv!!!!" # IV must be of exactly 16 bytes.
    # Encrypt CBC
    aes.start(AESContext.MODE_CBC_ENCRYPT, key.to_utf8(), iv.to_utf8())
    encrypted = aes.update(data.to_utf8())
    aes.finish()
    # Decrypt CBC
    aes.start(AESContext.MODE_CBC_DECRYPT, key.to_utf8(), iv.to_utf8())
    decrypted = aes.update(encrypted)
    aes.finish()
    # Check CBC
    assert(decrypted == data.to_utf8())
</pre> </section> <section id="methods"> <h2>Methods</h2> <table class="docutils align-default">   <tr>
<td><p>void</p></td> <td><p><a href="#class-aescontext-method-finish"><span class="std std-ref">finish</span></a> <strong>(</strong> <strong>)</strong></p></td> </tr> <tr>
<td><p><a href="class_poolbytearray.html#class-poolbytearray"><span class="std std-ref">PoolByteArray</span></a></p></td> <td><p><a href="#class-aescontext-method-get-iv-state"><span class="std std-ref">get_iv_state</span></a> <strong>(</strong> <strong>)</strong></p></td> </tr> <tr>
<td><p><a href="class_%40globalscope.html#enum-globalscope-error"><span class="std std-ref">Error</span></a></p></td> <td><p><a href="#class-aescontext-method-start"><span class="std std-ref">start</span></a> <strong>(</strong> <a href="#enum-aescontext-mode"><span class="std std-ref">Mode</span></a> mode, <a href="class_poolbytearray.html#class-poolbytearray"><span class="std std-ref">PoolByteArray</span></a> key, <a href="class_poolbytearray.html#class-poolbytearray"><span class="std std-ref">PoolByteArray</span></a> iv=PoolByteArray( ) <strong>)</strong></p></td> </tr> <tr>
<td><p><a href="class_poolbytearray.html#class-poolbytearray"><span class="std std-ref">PoolByteArray</span></a></p></td> <td><p><a href="#class-aescontext-method-update"><span class="std std-ref">update</span></a> <strong>(</strong> <a href="class_poolbytearray.html#class-poolbytearray"><span class="std std-ref">PoolByteArray</span></a> src <strong>)</strong></p></td> </tr>  </table> </section> <section id="enumerations"> <h2>Enumerations</h2> <p id="class-aescontext-constant-mode-max">enum <strong id="enum-aescontext-mode">Mode</strong>:</p> <ul class="simple"> <li>
<strong>MODE_ECB_ENCRYPT</strong> = <strong>0</strong> --- AES electronic codebook encryption mode.</li> <li>
<strong>MODE_ECB_DECRYPT</strong> = <strong>1</strong> --- AES electronic codebook decryption mode.</li> <li>
<strong>MODE_CBC_ENCRYPT</strong> = <strong>2</strong> --- AES cipher blocker chaining encryption mode.</li> <li>
<strong>MODE_CBC_DECRYPT</strong> = <strong>3</strong> --- AES cipher blocker chaining decryption mode.</li> <li>
<strong>MODE_MAX</strong> = <strong>4</strong> --- Maximum value for the mode enum.</li> </ul> </section> <section id="method-descriptions"> <h2>Method Descriptions</h2> <h3 id="class-aescontext-method-finish"><p>void finish ( )</p></h3> <p>Close this AES context so it can be started again. See <a href="#class-aescontext-method-start"><span class="std std-ref">start</span></a>.</p>  <h3 id="class-aescontext-method-get-iv-state"><p><a href="class_poolbytearray.html#class-poolbytearray"><span class="std std-ref">PoolByteArray</span></a> get_iv_state ( )</p></h3> <p>Get the current IV state for this context (IV gets updated when calling <a href="#class-aescontext-method-update"><span class="std std-ref">update</span></a>). You normally don't need this function.</p> <p><strong>Note:</strong> This function only makes sense when the context is started with <a href="#class-aescontext-constant-mode-cbc-encrypt"><span class="std std-ref">MODE_CBC_ENCRYPT</span></a> or <a href="#class-aescontext-constant-mode-cbc-decrypt"><span class="std std-ref">MODE_CBC_DECRYPT</span></a>.</p>  <h3 id="class-aescontext-method-start"><p><a href="class_%40globalscope.html#enum-globalscope-error"><span class="std std-ref">Error</span></a> start ( <a href="#enum-aescontext-mode"><span class="std std-ref">Mode</span></a> mode, <a href="class_poolbytearray.html#class-poolbytearray"><span class="std std-ref">PoolByteArray</span></a> key, <a href="class_poolbytearray.html#class-poolbytearray"><span class="std std-ref">PoolByteArray</span></a> iv=PoolByteArray( ) )</p></h3> <p>Start the AES context in the given <code>mode</code>. A <code>key</code> of either 16 or 32 bytes must always be provided, while an <code>iv</code> (initialization vector) of exactly 16 bytes, is only needed when <code>mode</code> is either <a href="#class-aescontext-constant-mode-cbc-encrypt"><span class="std std-ref">MODE_CBC_ENCRYPT</span></a> or <a href="#class-aescontext-constant-mode-cbc-decrypt"><span class="std std-ref">MODE_CBC_DECRYPT</span></a>.</p>  <h3 id="class-aescontext-method-update"><p><a href="class_poolbytearray.html#class-poolbytearray"><span class="std std-ref">PoolByteArray</span></a> update ( <a href="class_poolbytearray.html#class-poolbytearray"><span class="std std-ref">PoolByteArray</span></a> src )</p></h3> <p>Run the desired operation for this AES context. Will return a <a href="class_poolbytearray.html#class-poolbytearray"><span class="std std-ref">PoolByteArray</span></a> containing the result of encrypting (or decrypting) the given <code>src</code>. See <a href="#class-aescontext-method-start"><span class="std std-ref">start</span></a> for mode of operation.</p> <p><strong>Note:</strong> The size of <code>src</code> must be a multiple of 16. Apply some padding if needed.</p> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2014&ndash;2022 Juan Linietsky, Ariel Manzur, Godot Engine contributors<br>Licensed under the MIT License.<br>
    <a href="https://docs.godotengine.org/en/3.5/classes/class_aescontext.html" class="_attribution-link">https://docs.godotengine.org/en/3.5/classes/class_aescontext.html</a>
  </p>
</div>
