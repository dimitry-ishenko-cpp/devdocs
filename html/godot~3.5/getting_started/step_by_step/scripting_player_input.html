<h1 id="doc-scripting-player-input">Listening to player input</h1> <p>Building upon the previous lesson <a href="scripting_first_script.html#doc-scripting-first-script"><span class="std std-ref">Creating your first script</span></a>, let's look at another important feature of any game: giving control to the player. To add this, we need to modify our <code>Sprite.gd</code> code.</p> <img alt="../../_images/scripting_first_script_moving_with_input.gif" src="https://docs.godotengine.org/en/3.5/_images/scripting_first_script_moving_with_input.gif"> <p>You have two main tools to process the player's input in Godot:</p> <ol class="arabic simple"> <li>The built-in input callbacks, mainly <code>_unhandled_input()</code>. Like <code>_process()</code>, it's a built-in virtual function that Godot calls every time the player presses a key. It's the tool you want to use to react to events that don't happen every frame, like pressing <kbd class="kbd docutils literal notranslate">Space</kbd> to jump. To learn more about input callbacks, see <a href="https://docs.godotengine.org/en/3.5/tutorials/inputs/inputevent.html#doc-inputevent"><span class="std std-ref">Using InputEvent</span></a>.</li> <li>The <code>Input</code> singleton. A singleton is a globally accessible object. Godot provides access to several in scripts. It's the right tool to check for input every frame.</li> </ol> <p>We're going to use the <code>Input</code> singleton here as we need to know if the player wants to turn or move every frame.</p> <p>For turning, we should use a new variable: <code>direction</code>. In our <code>_process()</code> function, replace the <code>rotation += angular_speed * delta</code> line with the code below.</p> <div class="sphinx-tabs docutils container"> <div aria-label="Tabbed content" class="closeable" role="tablist">
<button aria-controls="panel-0-R0RTY3JpcHQ=" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-0-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button><button aria-controls="panel-0-QyM=" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-0-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
</div>
<div aria-labelledby="tab-0-R0RTY3JpcHQ=" class="sphinx-tabs-panel code-tab group-tab" id="panel-0-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
<pre data-language="gdscript">var direction = 0
if Input.is_action_pressed("ui_left"):
    direction = -1
if Input.is_action_pressed("ui_right"):
    direction = 1

rotation += angular_speed * direction * delta
</pre> </div>
<div aria-labelledby="tab-0-QyM=" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-0-QyM=" name="QyM=" role="tabpanel" tabindex="0">
<pre data-language="csharp">var direction = 0;
if (Input.IsActionPressed("ui_left"))
{
    direction = -1;
}
if (Input.IsActionPressed("ui_right"))
{
    direction = 1;
}

Rotation += AngularSpeed * direction * delta;
</pre> </div>
</div> <p>Our <code>direction</code> local variable is a multiplier representing the direction in which the player wants to turn. A value of <code>0</code> means the player isn't pressing the left or the right arrow key. A value of <code>1</code> means the player wants to turn right, and <code>-1</code> means they want to turn left.</p> <p>To produce these values, we introduce conditions and the use of <code>Input</code>. A condition starts with the <code>if</code> keyword in GDScript and ends with a colon. The condition is the expression between the keyword and the end of the line.</p> <p>To check if a key was pressed this frame, we call <code>Input.is_action_pressed()</code>. The method takes a text string representing an input action and returns <code>true</code> if the action is pressed, <code>false</code> otherwise.</p> <p>The two actions we use above, "ui_left" and "ui_right", are predefined in every Godot project. They respectively trigger when the player presses the left and right arrows on the keyboard or left and right on a gamepad's D-pad.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>You can see and edit input actions in your project by going to Project -&gt; Project Settings and clicking on the Input Map tab.</p> </div> <p>Finally, we use the <code>direction</code> as a multiplier when we update the node's <code>rotation</code>: <code>rotation += angular_speed * direction * delta</code>.</p> <p>If you run the scene with this code, the icon should rotate when you press <kbd class="kbd docutils literal notranslate">Left</kbd> and <kbd class="kbd docutils literal notranslate">Right</kbd>.</p> <section id="moving-when-pressing-up"> <h2>Moving when pressing "up"</h2> <p>To only move when pressing a key, we need to modify the code that calculates the velocity. Replace the line starting with <code>var velocity</code> with the code below.</p> <div class="sphinx-tabs docutils container"> <div aria-label="Tabbed content" class="closeable" role="tablist">
<button aria-controls="panel-1-R0RTY3JpcHQ=" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-1-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button><button aria-controls="panel-1-QyM=" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-1-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
</div>
<div aria-labelledby="tab-1-R0RTY3JpcHQ=" class="sphinx-tabs-panel code-tab group-tab" id="panel-1-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
<pre data-language="gdscript">var velocity = Vector2.ZERO
if Input.is_action_pressed("ui_up"):
    velocity = Vector2.UP.rotated(rotation) * speed
</pre> </div>
<div aria-labelledby="tab-1-QyM=" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-1-QyM=" name="QyM=" role="tabpanel" tabindex="0">
<pre data-language="csharp">var velocity = Vector2.Zero;
if (Input.IsActionPressed("ui_up"))
{
    velocity = Vector2.Up.Rotated(Rotation) * Speed;
}
</pre> </div>
</div> <p>We initialize the <code>velocity</code> with a value of <code>Vector2.ZERO</code>, another constant of the built-in <code>Vector</code> type representing a 2D vector of length 0.</p> <p>If the player presses the "ui_up" action, we then update the velocity's value, causing the sprite to move forward.</p> </section> <section id="complete-script"> <h2>Complete script</h2> <p>Here is the complete <code>Sprite.gd</code> file for reference.</p> <div class="sphinx-tabs docutils container"> <div aria-label="Tabbed content" class="closeable" role="tablist">
<button aria-controls="panel-2-R0RTY3JpcHQ=" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-2-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button><button aria-controls="panel-2-QyM=" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-2-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
</div>
<div aria-labelledby="tab-2-R0RTY3JpcHQ=" class="sphinx-tabs-panel code-tab group-tab" id="panel-2-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
<pre data-language="gdscript">extends Sprite

var speed = 400
var angular_speed = PI


func _process(delta):
    var direction = 0
    if Input.is_action_pressed("ui_left"):
        direction = -1
    if Input.is_action_pressed("ui_right"):
        direction = 1

    rotation += angular_speed * direction * delta

    var velocity = Vector2.ZERO
    if Input.is_action_pressed("ui_up"):
        velocity = Vector2.UP.rotated(rotation) * speed

    position += velocity * delta
</pre> </div>
<div aria-labelledby="tab-2-QyM=" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-2-QyM=" name="QyM=" role="tabpanel" tabindex="0">
<pre data-language="csharp">using Godot;

public class Sprite : Godot.Sprite
{
    private float Speed = 400;
    private float AngularSpeed = Mathf.Pi;

    public override void _Process(float delta)
    {
        var direction = 0;
        if (Input.IsActionPressed("ui_left"))
        {
            direction = -1;
        }
        if (Input.IsActionPressed("ui_right"))
        {
            direction = 1;
        }

        Rotation += AngularSpeed * direction * delta;

        var velocity = Vector2.Zero;
        if (Input.IsActionPressed("ui_up"))
        {
            velocity = Vector2.Up.Rotated(Rotation) * Speed;
        }

        Position += velocity * delta;
    }
}
</pre> </div>
</div> <p>If you run the scene, you should now be able to rotate with the left and right arrow keys and move forward by pressing <kbd class="kbd docutils literal notranslate">Up</kbd>.</p> <img alt="../../_images/scripting_first_script_moving_with_input.gif" src="https://docs.godotengine.org/en/3.5/_images/scripting_first_script_moving_with_input.gif"> </section> <section id="summary"> <h2>Summary</h2> <p>In summary, every script in Godot represents a class and extends one of the engine's built-in classes. The node types your classes inherit from give you access to properties like <code>rotation</code> and <code>position</code> in our sprite's case. You also inherit many functions, which we didn't get to use in this example.</p> <p>In GDScript, the variables you put at the top of the file are your class's properties, also called member variables. Besides variables, you can define functions, which, for the most part, will be your classes' methods.</p> <p>Godot provides several virtual functions you can define to connect your class with the engine. These include <code>_process()</code>, to apply changes to the node every frame, and <code>_unhandled_input()</code>, to receive input events like key and button presses from the users. There are quite a few more.</p> <p>The <code>Input</code> singleton allows you to react to the players' input anywhere in your code. In particular, you'll get to use it in the <code>_process()</code> loop.</p> <p>In the next lesson <a href="signals.html#doc-signals"><span class="std std-ref">Using signals</span></a>, we'll build upon the relationship between scripts and nodes by having our nodes trigger code in scripts.</p> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2014&ndash;2022 Juan Linietsky, Ariel Manzur and the Godot community<br>Licensed under the Creative Commons Attribution Unported License v3.0.<br>
    <a href="https://docs.godotengine.org/en/3.5/getting_started/step_by_step/scripting_player_input.html" class="_attribution-link">https://docs.godotengine.org/en/3.5/getting_started/step_by_step/scripting_player_input.html</a>
  </p>
</div>
