  <h1 class="section">Overriding Part of Another Makefile</h1>   <p>Sometimes it is useful to have a makefile that is mostly just like another makefile. You can often use the ‘<samp>include</samp>’ directive to include one in the other, and add more targets or variable definitions. However, it is invalid for two makefiles to give different recipes for the same target. But there is another way. </p>  <p>In the containing makefile (the one that wants to include the other), you can use a match-anything pattern rule to say that to remake any target that cannot be made from the information in the containing makefile, <code>make</code> should look in another makefile. See <a href="pattern-rules.html">Pattern Rules</a>, for more information on pattern rules. </p> <p>For example, if you have a makefile called <samp>Makefile</samp> that says how to make the target ‘<samp>foo</samp>’ (and other targets), you can write a makefile called <samp>GNUmakefile</samp> that contains: </p> <div class="example"> <pre class="example">foo:
        frobnicate &gt; foo

%: force
        @$(MAKE) -f Makefile $@
force: ;
</pre>
</div> <p>If you say ‘<samp>make foo</samp>’, <code>make</code> will find <samp>GNUmakefile</samp>, read it, and see that to make <samp>foo</samp>, it needs to run the recipe ‘<samp>frobnicate &gt; foo</samp>’. If you say ‘<samp>make bar</samp>’, <code>make</code> will find no way to make <samp>bar</samp> in <samp>GNUmakefile</samp>, so it will use the recipe from the pattern rule: ‘<samp>make -f Makefile bar</samp>’. If <samp>Makefile</samp> provides a rule for updating <samp>bar</samp>, <code>make</code> will apply the rule. And likewise for any other target that <samp>GNUmakefile</samp> does not say how to make. </p> <p>The way this works is that the pattern rule has a pattern of just ‘<samp>%</samp>’, so it matches any target whatever. The rule specifies a prerequisite <samp>force</samp>, to guarantee that the recipe will be run even if the target file already exists. We give the <samp>force</samp> target an empty recipe to prevent <code>make</code> from searching for an implicit rule to build it—otherwise it would apply the same match-anything rule to <samp>force</samp> itself and create a prerequisite loop! </p><div class="_attribution">
  <p class="_attribution-p">
    Copyright © 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022 Free Software Foundation, Inc. <br>Licensed under the GNU Free Documentation License.<br>
    <a href="https://www.gnu.org/software/make/manual/html_node/Overriding-Makefiles.html" class="_attribution-link">https://www.gnu.org/software/make/manual/html_node/Overriding-Makefiles.html</a>
  </p>
</div>
