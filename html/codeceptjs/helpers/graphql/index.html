<h1 id="graphql"> GraphQL</h1> <p><strong>Extends Helper</strong></p> <p>GraphQL helper allows to send additional requests to a GraphQl endpoint during acceptance tests. <a href="https://github.com/axios/axios" target="_blank" rel="noopener noreferrer">Axios<span> <span class="sr-only">(opens new window)</span></span></a> library is used to perform requests.</p> <h2 id="configuration"> Configuration</h2> <ul>
<li>endpoint: GraphQL base URL</li> <li>timeout: timeout for requests in milliseconds. 10000ms by default</li> <li>defaultHeaders: a list of default headers</li> <li>onRequest: a async function which can update request object.</li>
</ul> <h2 id="example"> Example</h2> <div class="language-js extra-class"><pre class="language-js">GraphQL: {
   endpoint: 'http://site.com/graphql/',
   onRequest: (request) =&gt; {
     request.headers.auth = '123';
   }
}
</pre></div>
<h2 id="access-from-helpers"> Access From Helpers</h2> <p>Send GraphQL requests by accessing <code>_executeQuery</code> method:</p> <div class="language-js extra-class"><pre class="language-js">this.helpers['GraphQL']._executeQuery({
   url,
   data,
});
</pre></div>
<h2 id="methods"> Methods</h2> <h3 id="parameters"> Parameters</h3> <ul><li><code>config</code></li></ul> <h3 id="executequery"> _executeQuery</h3> <p>Executes query via axios call</p> <h4 id="parameters-2"> Parameters</h4> <ul><li>
<code>request</code> <strong><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer">object<span> <span class="sr-only">(opens new window)</span></span></a></strong>
</li></ul> <h3 id="preparegraphqlrequest"> _prepareGraphQLRequest</h3> <p>Prepares request for axios call</p> <h4 id="parameters-3"> Parameters</h4> <ul>
<li>
<code>operation</code> <strong><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer">object<span> <span class="sr-only">(opens new window)</span></span></a></strong>
</li> <li>
<code>headers</code> <strong><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer">object<span> <span class="sr-only">(opens new window)</span></span></a></strong>
</li>
</ul> <h3 id="sendmutation"> sendMutation</h3> <p>Send query to GraphQL endpoint over http</p> <div class="language-js extra-class"><pre class="language-js">I.sendMutation(`
      mutation createUser($user: UserInput!) {
         createUser(user: $user) {
           id
           name
           email
         }
       }
   `,
  { user: {
      name: 'John Doe',
      email: 'john@xmail.com'
    }
  },
});
</pre></div>
<h4 id="parameters-4"> Parameters</h4> <ul>
<li>
<code>mutation</code> <strong><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank" rel="noopener noreferrer">String<span> <span class="sr-only">(opens new window)</span></span></a></strong>
</li> <li>
<code>variables</code> <strong><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer">object<span> <span class="sr-only">(opens new window)</span></span></a></strong> that may go along with the mutation</li> <li>
<code>options</code> <strong><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer">object<span> <span class="sr-only">(opens new window)</span></span></a></strong> are additional query options</li> <li>
<code>headers</code> <strong><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer">object<span> <span class="sr-only">(opens new window)</span></span></a></strong>
</li>
</ul> <h3 id="sendquery"> sendQuery</h3> <p>Send query to GraphQL endpoint over http. Returns a response as a promise.</p> <div class="language-js extra-class"><pre class="language-js">const response = await I.sendQuery('{ users { name email }}');
// with variables
const response = await I.sendQuery(
 'query getUser($id: ID) { user(id: $id) { name email }}',
 { id: 1 },
)
const user = response.data.data;
</pre></div>
<h4 id="parameters-5"> Parameters</h4> <ul>
<li>
<code>query</code> <strong><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank" rel="noopener noreferrer">String<span> <span class="sr-only">(opens new window)</span></span></a></strong>
</li> <li>
<code>variables</code> <strong><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer">object<span> <span class="sr-only">(opens new window)</span></span></a></strong> that may go along with the query</li> <li>
<code>options</code> <strong><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer">object<span> <span class="sr-only">(opens new window)</span></span></a></strong> are additional query options</li> <li>
<code>headers</code> <strong><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer">object<span> <span class="sr-only">(opens new window)</span></span></a></strong>
</li>
</ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2015 DavertMik &lt;davert@codegyre.com&gt; (http://codegyre.com)<br>Licensed under the MIT License.<br>
    <a href="https://codecept.io/helpers/GraphQL/" class="_attribution-link">https://codecept.io/helpers/GraphQL/</a>
  </p>
</div>
