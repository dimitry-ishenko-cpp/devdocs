<h1 id="composer-platform-dependencies">Composer platform dependencies</h1> <h2 id="what-are-platform-dependencies">What are platform dependencies</h2> <p>Composer makes information about the environment Composer runs in available as virtual packages. This allows other packages to define dependencies (<a href="../04-schema.md.html#require">require</a>, <a href="../04-schema.md.html#conflict">conflict</a>, <a href="../04-schema.md.html#provide">provide</a>, <a href="../04-schema.md.html#replace">replace</a>) on different aspects of the platform, like PHP, extensions or system libraries, including version constraints.</p> <p>When you require one of the platform packages no code is installed. The version numbers of platform packages are derived from the environment Composer is executed in and they cannot be updated or removed. They can however be overwritten for the purposes of dependency resolution with a <a href="../06-config.md.html#platform">platform configuration</a>.</p> <p><strong>For example:</strong> If you are executing <code>composer update</code> with a PHP interpreter in version <code>7.4.42</code>, then Composer automatically adds a package to the pool of available packages called <code>php</code> and assigns version <code>7.4.42</code> to it.</p> <p>That's how packages can add a dependency on the used PHP version:</p> <pre data-language="javascript">{
    "require": {
        "php": "&gt;=7.4"
    }
}</pre> <p>Composer will check this requirement against the currently used PHP version when running the composer command.</p> <h3 id="different-types-of-platform-packages">Different types of platform packages</h3> <p>The following types of platform packages exist and can be depended on:</p> <ol> <li>PHP (<code>php</code> and the subtypes: <code>php-64bit</code>, <code>php-ipv6</code>, <code>php-zts</code> <code>php-debug</code>)</li> <li>PHP Extensions (<code>ext-*</code>, e.g. <code>ext-mbstring</code>)</li> <li>PHP Libraries (<code>lib-*</code>, e.g. <code>lib-curl</code>)</li> <li>Composer (<code>composer</code>, <code>composer-plugin-api</code>, <code>composer-runtime-api</code>)</li> </ol> <p>To see the complete list of platform packages available in your environment you can run <code>php composer.phar show --platform</code> (or <code>show -p</code> for short).</p> <p>The differences between the various Composer platform packages are explained further in this document.</p> <h2 id="plugin-package-composer-plugin-api">Plugin package <code>composer-plugin-api</code>
</h2> <p>You can modify Composer's behavior with <a href="plugins.md.html">plugin</a> packages. Composer provides a set of versioned APIs for plugins. Because internal Composer changes may <strong>not</strong> change the plugin APIs, the API version may not increase every time the Composer version increases. E.g. In Composer version <code>2.3.12</code>, the <code>composer-plugin-api</code> version could still be <code>2.2.0</code>.</p> <h2 id="runtime-package-composer-runtime-api">Runtime package <code>composer-runtime-api</code>
</h2> <p>When applications which were installed with Composer are run (either on CLI or through a web request), they require the <code>vendor/autoload.php</code> file, typically as one of the first lines of executed code. Invocations of the Composer autoloader are considered the application "runtime".</p> <p>Starting with version 2.0, Composer makes <a href="../07-runtime.md.html">additional features</a> (besides registering the class autoloader) available to the application runtime environment.</p> <p>Similar to <code>composer-plugin-api</code>, not every Composer release adds new runtime features, thus the version of <code>composer-runtimeapi</code> is also increased independently from Composer's version.</p> <h2 id="composer-package-composer">Composer package <code>composer</code>
</h2> <p>Starting with Composer 2.2.0, a new platform package called <code>composer</code> is available, which represents the exact Composer version that is executed. Packages depending on this platform package can therefore depend on (or conflict with) individual Composer versions to cover edge cases where neither the <code>composer-runtime-api</code> version nor the <code>composer-plugin-api</code> was changed.</p> <p>Because this option was introduced with Composer 2.2.0, it is recommended to add a <code>composer-plugin-api</code> dependency on at least <code>&gt;=2.2.0</code> to provide a more meaningful error message for users running older Composer versions.</p> <p>In general, depending on <code>composer-plugin-api</code> or <code>composer-runtime-api</code> is always recommended over depending on concrete Composer versions with the <code>composer</code> platform package.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; Nils Adermann, Jordi Boggiano<br>Licensed under the MIT License.<br>
    <a href="https://getcomposer.org/doc/articles/composer-platform-dependencies.md" class="_attribution-link">https://getcomposer.org/doc/articles/composer-platform-dependencies.md</a>
  </p>
</div>
