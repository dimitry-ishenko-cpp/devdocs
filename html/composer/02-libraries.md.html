<h1 id="libraries">Libraries</h1> <p>This chapter will tell you how to make your library installable through Composer.</p> <h2 id="every-project-is-a-package">Every project is a package</h2> <p>As soon as you have a <code>composer.json</code> in a directory, that directory is a package. When you add a <a href="04-schema.md.html#require"><code>require</code></a> to a project, you are making a package that depends on other packages. The only difference between your project and a library is that your project is a package without a name.</p> <p>In order to make that package installable you need to give it a name. You do this by adding the <a href="04-schema.md.html#name"><code>name</code></a> property in <code>composer.json</code>:</p> <pre data-language="javascript">{
    "name": "acme/hello-world",
    "require": {
        "monolog/monolog": "1.0.*"
    }
}</pre> <p>In this case the project name is <code>acme/hello-world</code>, where <code>acme</code> is the vendor name. Supplying a vendor name is mandatory.</p> <blockquote> <p><strong>Note:</strong> If you don't know what to use as a vendor name, your GitHub username is usually a good bet. Package names must be lowercase, and the convention is to use dashes for word separation.</p> </blockquote> <h2 id="library-versioning">Library Versioning</h2> <p>In the vast majority of cases, you will be maintaining your library using some sort of version control system like git, svn, hg or fossil. In these cases, Composer infers versions from your VCS, and you <strong>should not</strong> specify a version in your <code>composer.json</code> file. (See the <a href="articles/versions.md.html">Versions article</a> to learn about how Composer uses VCS branches and tags to resolve version constraints.)</p> <p>If you are maintaining packages by hand (i.e., without a VCS), you'll need to specify the version explicitly by adding a <code>version</code> value in your <code>composer.json</code> file:</p> <pre data-language="javascript">{
    "version": "1.0.0"
}</pre> <blockquote> <p><strong>Note:</strong> When you add a hardcoded version to a VCS, the version will conflict with tag names. Composer will not be able to determine the version number.</p> </blockquote> <h3 id="vcs-versioning">VCS Versioning</h3> <p>Composer uses your VCS's branch and tag features to resolve the version constraints you specify in your <a href="04-schema.md.html#require"><code>require</code></a> field to specific sets of files. When determining valid available versions, Composer looks at all of your tags and branches and translates their names into an internal list of options that it then matches against the version constraint you provided.</p> <p>For more on how Composer treats tags and branches and how it resolves package version constraints, read the <a href="articles/versions.md.html">versions</a> article.</p> <h2 id="lock-file">Lock file</h2> <p>For your library you may commit the <code>composer.lock</code> file if you want to. This can help your team to always test against the same dependency versions. However, this lock file will not have any effect on other projects that depend on it. It only has an effect on the main project.</p> <p>If you do not want to commit the lock file, and you are using git, add it to the <code>.gitignore</code>.</p> <h2 id="publishing-to-a-vcs">Publishing to a VCS</h2> <p>Once you have a VCS repository (version control system, e.g. git) containing a <code>composer.json</code> file, your library is already composer-installable. In this example we will publish the <code>acme/hello-world</code> library on GitHub under <code>github.com/username/hello-world</code>.</p> <p>Now, to test installing the <code>acme/hello-world</code> package, we create a new project locally. We will call it <code>acme/blog</code>. This blog will depend on <code>acme/hello-world</code>, which in turn depends on <code>monolog/monolog</code>. We can accomplish this by creating a new <code>blog</code> directory somewhere, containing a <code>composer.json</code>:</p> <pre data-language="javascript">{
    "name": "acme/blog",
    "require": {
        "acme/hello-world": "dev-master"
    }
}</pre> <p>The name is not needed in this case, since we don't want to publish the blog as a library. It is added here to clarify which <code>composer.json</code> is being described.</p> <p>Now we need to tell the blog app where to find the <code>hello-world</code> dependency. We do this by adding a package repository specification to the blog's <code>composer.json</code>:</p> <pre data-language="javascript">{
    "name": "acme/blog",
    "repositories": [
        {
            "type": "vcs",
            "url": "https://github.com/username/hello-world"
        }
    ],
    "require": {
        "acme/hello-world": "dev-master"
    }
}</pre> <p>For more details on how package repositories work and what other types are available, see <a href="05-repositories.md.html">Repositories</a>.</p> <p>That's all. You can now install the dependencies by running Composer's <a href="03-cli.md.html#install"><code>install</code></a> command!</p> <p><strong>Recap:</strong> Any git/svn/hg/fossil repository containing a <code>composer.json</code> can be added to your project by specifying the package repository and declaring the dependency in the <a href="04-schema.md.html#require"><code>require</code></a> field.</p> <h2 id="publishing-to-packagist">Publishing to packagist</h2> <p>Alright, so now you can publish packages. But specifying the VCS repository every time is cumbersome. You don't want to force all your users to do that.</p> <p>The other thing that you may have noticed is that we did not specify a package repository for <code>monolog/monolog</code>. How did that work? The answer is Packagist.</p> <p><a href="https://packagist.org/">Packagist</a> is the main package repository for Composer, and it is enabled by default. Anything that is published on Packagist is available automatically through Composer. Since <a href="https://packagist.org/packages/monolog/monolog">Monolog is on Packagist</a>, we can depend on it without having to specify any additional repositories.</p> <p>If we wanted to share <code>hello-world</code> with the world, we would publish it on Packagist as well.</p> <p>You visit <a href="https://packagist.org">Packagist</a> and hit the "Submit" button. This will prompt you to sign up if you haven't already, and then allows you to submit the URL to your VCS repository, at which point Packagist will start crawling it. Once it is done, your package will be available to anyone!</p> <p class="prev-next">← <a href="01-basic-usage.md.html">Basic usage</a> | <a href="03-cli.md.html">Command-line interface</a> →</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; Nils Adermann, Jordi Boggiano<br>Licensed under the MIT License.<br>
    <a href="https://getcomposer.org/doc/02-libraries.md" class="_attribution-link">https://getcomposer.org/doc/02-libraries.md</a>
  </p>
</div>
