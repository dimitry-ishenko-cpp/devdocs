<h1 class="caption">GHC.Stack.CloneStack</h1>
<div class="_haskell-api">
<table class="info">
<tr>
<th>Safe Haskell</th>
<td>None</td>
</tr>
<tr>
<th>Language</th>
<td>Haskell2010</td>
</tr>
</table>
<div id="description">
<h4 class="caption">Description</h4>
<p>This module exposes an interface for capturing the state of a thread's execution stack for diagnostics purposes: <code><a href="ghc-stack-clonestack.html#v:cloneMyStack" title="GHC.Stack.CloneStack">cloneMyStack</a></code>, <code><a href="ghc-stack-clonestack.html#v:cloneThreadStack" title="GHC.Stack.CloneStack">cloneThreadStack</a></code>.</p>
<p>Such a "cloned" stack can be decoded with <code><a href="ghc-stack-clonestack.html#v:decode" title="GHC.Stack.CloneStack">decode</a></code> to a stack trace, given that the <code>-finfo-table-map</code> is enabled.</p>
<p><span class="version">Since: base-4.17.0.0</span></p>
</div>
<p class="src">data <a id="t:StackSnapshot" class="def">StackSnapshot</a> <a href="https://downloads.haskell.org/~ghc/9.4.2/docs/libraries/base-4.17.0.0/src/GHC.Stack.CloneStack.html#StackSnapshot" class="link">Source</a> </p>
<p>A frozen snapshot of the state of an execution stack.</p>
<p><span class="version">Since: base-4.17.0.0</span></p>
<div class="subs constructors">
<h4 class="caption">Constructors</h4>
<table><tr>
<td class="src">
<a id="v:StackSnapshot" class="def">StackSnapshot</a> !<a href="ghc-exts.html#t:StackSnapshot-35-" title="GHC.Exts">StackSnapshot#</a>
</td>
<td class="doc empty"> </td>
</tr></table>
</div>
<p class="src">data <a id="t:StackEntry" class="def">StackEntry</a> <a href="https://downloads.haskell.org/~ghc/9.4.2/docs/libraries/base-4.17.0.0/src/GHC.Stack.CloneStack.html#StackEntry" class="link">Source</a> </p>
<p>Represetation for the source location where a return frame was pushed on the stack. This happens every time when a <code>case ... of</code> scrutinee is evaluated.</p>
<div class="subs constructors">
<h4 class="caption">Constructors</h4>
<table>
<tr>
<td class="src"><a id="v:StackEntry" class="def">StackEntry</a></td>
<td class="doc empty"> </td>
</tr>
<tr><td colspan="2"><div class="subs fields">
<h4 class="caption">Fields</h4>
<ul>
<li>
<dfn class="src"><a id="v:functionName" class="def">functionName</a> :: <a href="data-string.html#t:String" title="Data.String">String</a></dfn> </li>
<li>
<dfn class="src"><a id="v:moduleName" class="def">moduleName</a> :: <a href="data-string.html#t:String" title="Data.String">String</a></dfn> </li>
<li>
<dfn class="src"><a id="v:srcLoc" class="def">srcLoc</a> :: <a href="data-string.html#t:String" title="Data.String">String</a></dfn> </li>
<li>
<dfn class="src"><a id="v:closureType" class="def">closureType</a> :: <a href="data-word.html#t:Word" title="Data.Word">Word</a></dfn> </li>
</ul>
</div></td></tr>
</table>
</div>
<div class="subs instances">
<h5 class="instances details-toggle-control details-toggle" data-details-id="i:StackEntry">Instances</h5>
<details id="i:StackEntry" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table>
<tr>
<td class="src clearfix">
 <a href="text-show.html#t:Show" title="Text.Show">Show</a> <a href="ghc-stack-clonestack.html#t:StackEntry" title="GHC.Stack.CloneStack">StackEntry</a> <a href="https://downloads.haskell.org/~ghc/9.4.2/docs/libraries/base-4.17.0.0/src/GHC.Stack.CloneStack.html#line-212" class="link">Source</a> </td>
<td class="doc empty"> </td>
</tr>
<tr><td colspan="2"><details id="i:id:StackEntry:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="ghc-stack-clonestack.html">GHC.Stack.CloneStack</a></p> <div class="subs methods">
<h4 class="caption">Methods</h4>
<p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="data-int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="ghc-stack-clonestack.html#t:StackEntry" title="GHC.Stack.CloneStack">StackEntry</a> -&gt; <a href="text-show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="https://downloads.haskell.org/~ghc/9.4.2/docs/libraries/base-4.17.0.0/src/GHC.Show.html#showsPrec" class="link">Source</a> </p>
<p class="src"><a href="#v:show">show</a> :: <a href="ghc-stack-clonestack.html#t:StackEntry" title="GHC.Stack.CloneStack">StackEntry</a> -&gt; <a href="data-string.html#t:String" title="Data.String">String</a> <a href="https://downloads.haskell.org/~ghc/9.4.2/docs/libraries/base-4.17.0.0/src/GHC.Show.html#show" class="link">Source</a> </p>
<p class="src"><a href="#v:showList">showList</a> :: [<a href="ghc-stack-clonestack.html#t:StackEntry" title="GHC.Stack.CloneStack">StackEntry</a>] -&gt; <a href="text-show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="https://downloads.haskell.org/~ghc/9.4.2/docs/libraries/base-4.17.0.0/src/GHC.Show.html#showList" class="link">Source</a> </p>
</div></details></td></tr>
<tr>
<td class="src clearfix">
 <a href="data-eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="ghc-stack-clonestack.html#t:StackEntry" title="GHC.Stack.CloneStack">StackEntry</a> <a href="https://downloads.haskell.org/~ghc/9.4.2/docs/libraries/base-4.17.0.0/src/GHC.Stack.CloneStack.html#line-212" class="link">Source</a> </td>
<td class="doc empty"> </td>
</tr>
<tr><td colspan="2"><details id="i:id:StackEntry:Eq:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="ghc-stack-clonestack.html">GHC.Stack.CloneStack</a></p> <div class="subs methods">
<h4 class="caption">Methods</h4>
<p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="ghc-stack-clonestack.html#t:StackEntry" title="GHC.Stack.CloneStack">StackEntry</a> -&gt; <a href="ghc-stack-clonestack.html#t:StackEntry" title="GHC.Stack.CloneStack">StackEntry</a> -&gt; <a href="data-bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/9.4.2/docs/libraries/ghc-prim-0.9.0/src/GHC.Classes.html#%3D%3D" class="link">Source</a> </p>
<p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="ghc-stack-clonestack.html#t:StackEntry" title="GHC.Stack.CloneStack">StackEntry</a> -&gt; <a href="ghc-stack-clonestack.html#t:StackEntry" title="GHC.Stack.CloneStack">StackEntry</a> -&gt; <a href="data-bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/9.4.2/docs/libraries/ghc-prim-0.9.0/src/GHC.Classes.html#%2F%3D" class="link">Source</a> </p>
</div></details></td></tr>
</table></details>
</div>
<p class="src"><a id="v:cloneMyStack" class="def">cloneMyStack</a> :: <a href="system-io.html#t:IO" title="System.IO">IO</a> <a href="ghc-stack-clonestack.html#t:StackSnapshot" title="GHC.Stack.CloneStack">StackSnapshot</a> <a href="https://downloads.haskell.org/~ghc/9.4.2/docs/libraries/base-4.17.0.0/src/GHC.Stack.CloneStack.html#cloneMyStack" class="link">Source</a> </p>
<p>Clone the stack of the executing thread</p>
<p><span class="version">Since: base-4.17.0.0</span></p>
<p class="src"><a id="v:cloneThreadStack" class="def">cloneThreadStack</a> :: <a href="control-concurrent.html#t:ThreadId" title="Control.Concurrent">ThreadId</a> -&gt; <a href="system-io.html#t:IO" title="System.IO">IO</a> <a href="ghc-stack-clonestack.html#t:StackSnapshot" title="GHC.Stack.CloneStack">StackSnapshot</a> <a href="https://downloads.haskell.org/~ghc/9.4.2/docs/libraries/base-4.17.0.0/src/GHC.Stack.CloneStack.html#cloneThreadStack" class="link">Source</a> </p>
<p>Clone the stack of a thread identified by its <code><a href="control-concurrent.html#t:ThreadId" title="Control.Concurrent">ThreadId</a></code></p>
<p><span class="version">Since: base-4.17.0.0</span></p>
<p class="src"><a id="v:decode" class="def">decode</a> :: <a href="ghc-stack-clonestack.html#t:StackSnapshot" title="GHC.Stack.CloneStack">StackSnapshot</a> -&gt; <a href="system-io.html#t:IO" title="System.IO">IO</a> [<a href="ghc-stack-clonestack.html#t:StackEntry" title="GHC.Stack.CloneStack">StackEntry</a>] <a href="https://downloads.haskell.org/~ghc/9.4.2/docs/libraries/base-4.17.0.0/src/GHC.Stack.CloneStack.html#decode" class="link">Source</a> </p>
<p>Decode a <code><a href="ghc-stack-clonestack.html#t:StackSnapshot" title="GHC.Stack.CloneStack">StackSnapshot</a></code> to a stacktrace (a list of <code><a href="ghc-stack-clonestack.html#t:StackEntry" title="GHC.Stack.CloneStack">StackEntry</a></code>). The stack trace is created from return frames with according <code><a href="ghc-stack-ccs.html#t:InfoProvEnt" title="GHC.Stack.CCS">InfoProvEnt</a></code> entries. To generate them, use the GHC flag <code>-finfo-table-map</code>. If there are no <code><a href="ghc-stack-ccs.html#t:InfoProvEnt" title="GHC.Stack.CCS">InfoProvEnt</a></code> entries, an empty list is returned.</p>
<p>Please note:</p>
<ul>
<li>To gather <code><a href="ghc-stack-clonestack.html#t:StackEntry" title="GHC.Stack.CloneStack">StackEntry</a></code> from libraries, these have to be compiled with <code>-finfo-table-map</code>, too.</li>
<li>Due to optimizations by GHC (e.g. inlining) the stacktrace may change with different GHC parameters and versions.</li>
<li>The stack trace is empty (by design) if there are no return frames on the stack. (These are pushed every time when a <code>case ... of</code> scrutinee is evaluated.)</li>
</ul>
<p><span class="version">Since: base-4.17.0.0</span></p>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; The University of Glasgow and others<br>Licensed under a BSD-style license (see top of the page).<br>
    <a href="https://downloads.haskell.org/~ghc/9.4.2/docs/libraries/base-4.17.0.0/GHC-Stack-CloneStack.html" class="_attribution-link">https://downloads.haskell.org/~ghc/9.4.2/docs/libraries/base-4.17.0.0/GHC-Stack-CloneStack.html</a>
  </p>
</div>
