<h1 class="caption">System.OsPath</h1>
<div class="_haskell-api">
<table class="info">
<tr>
<th valign="top">Copyright</th>
<td>Â© 2021 Julian Ospald</td>
</tr>
<tr>
<th>License</th>
<td>MIT</td>
</tr>
<tr>
<th>Maintainer</th>
<td>Julian Ospald &lt;hasufell@posteo.de&gt;</td>
</tr>
<tr>
<th>Stability</th>
<td>experimental</td>
</tr>
<tr>
<th>Portability</th>
<td>portable</td>
</tr>
<tr>
<th>Safe Haskell</th>
<td>None</td>
</tr>
<tr>
<th>Language</th>
<td>Haskell2010</td>
</tr>
</table>
<div id="table-of-contents"><div id="contents-list">
<h4 class="caption" onclick="window.scrollTo(0,0)">Contents</h4>
<ul>
<li><a href="#g:1">Types</a></li>
<li><a href="#g:2">Filepath construction</a></li>
<li><a href="#g:3">Filepath deconstruction</a></li>
<li><a href="#g:4">Word construction</a></li>
<li><a href="#g:5">Word deconstruction</a></li>
<li><a href="#g:6">Separator predicates</a></li>
<li><a href="#g:7">$PATH methods</a></li>
<li><a href="#g:8">Extension functions</a></li>
<li><a href="#g:9">Filename/directory functions</a></li>
<li><a href="#g:10">Drive functions</a></li>
<li><a href="#g:11">Trailing slash functions</a></li>
<li><a href="#g:12">File name manipulations</a></li>
</ul>
</div></div>
<div id="description">
<h4 class="caption">Description</h4>
<p>An implementation of the <a href="https://gitlab.haskell.org/ghc/ghc/-/wikis/proposal/abstract-file-path">Abstract FilePath Proposal</a>, which aims to supersede <code class="inline-code">type FilePath = String</code> for various reasons:</p>
<ol>
<li value="1">it is more efficient and avoids memory fragmentation (uses unpinned <code class="inline-code">ShortByteString</code> under the hood)</li>
<li value="2">it is more type-safe (newtype over <code class="inline-code">ShortByteString</code>)</li>
<li value="3">avoids round-tripping issues by not converting to String (which is not total and loses the encoding)</li>
<li value="4">abstracts over unix and windows while keeping the original bytes</li>
</ol>
<p>It is important to know that filenames/filepaths have different representations across platforms:</p>
<ul>
<li>On <em>Windows</em>, filepaths are expected to be encoded as UTF16-LE <a href="https://docs.microsoft.com/en-us/openspecs/windows_protocols/ms-dtyp/76f10dd8-699d-45e6-a53c-5aefc586da20">as per the documentation</a>, but may also include invalid surrogate pairs, in which case UCS-2 can be used. They are passed as <code class="inline-code">wchar_t*</code> to syscalls. <code><a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a></code> only maintains the wide character invariant.</li>
<li>On <em>Unix</em>, filepaths don't have a predefined encoding (although they are often interpreted as UTF8) as per the <a href="https://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap03.html#tag_03_170">POSIX specification</a> and are passed as <code class="inline-code">char[]</code> to syscalls. <code><a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a></code> maintains no invariant here.</li>
</ul>
<p>Apart from encoding, filepaths have additional restrictions per platform:</p>
<ul>
<li>On <em>Windows</em> the <a href="https://docs.microsoft.com/en-us/windows/win32/fileio/naming-a-file#naming-conventions">naming convention</a> may apply</li>
<li>On <em>Unix</em>, only <code class="inline-code">NUL</code> bytes are disallowed as per the <a href="https://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap03.html#tag_03_170">POSIX specification</a>
</li>
</ul>
<p>Use <code><a href="system-ospath.html#v:isValid" title="System.OsPath">isValid</a></code> to check for these restrictions (<code><a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a></code> doesn't maintain this invariant).</p>
<p>Also note that these restrictions are not exhaustive and further filesystem specific restrictions may apply on all platforms. This library makes no attempt at satisfying these. Library users may need to account for that, depending on what filesystems they want to support.</p>
<p>It is advised to follow these principles when dealing with filepaths/filenames:</p>
<ol>
<li value="1">Avoid interpreting filenames that the OS returns, unless absolutely necessary. For example, the filepath separator is usually a predefined <code class="inline-code">Word8</code>/<code class="inline-code">Word16</code>, regardless of encoding. So even if we need to split filepaths, it might still not be necessary to understand the encoding of the filename.</li>
<li value="2">When interpreting OS returned filenames consider that these might not be UTF8 on <em>unix</em> or at worst don't have an ASCII compatible encoding. The are 3 available strategies fer decoding/encoding: a) pick the best UTF (UTF-8 on unix, UTF-16LE on windows), b) decode with an explicitly defined <code class="inline-code">TextEncoding</code>, c) mimic the behavior of the <code class="inline-code">base</code> library (permissive UTF16 on windows, current filesystem encoding on unix).</li>
<li value="3">Avoid comparing <code class="inline-code">String</code> based filepaths, because filenames of different encodings may have the same <code class="inline-code">String</code> representation, although they're not the same byte-wise.</li>
</ol>
</div>
<a href="#g:1" id="g:1"><h2>Types</h2></a><p class="src">type <a id="t:OsPath" class="def">OsPath</a> = <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Types.html#OsPath" class="link">Source</a> </p>
<p>Type representing filenames/pathnames.</p>
<p>This type doesn't add any guarantees over <code><a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a></code>.</p>
<p class="src">data <a id="t:OsString" class="def">OsString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/os-string-2.0.7-3f43/src/System.OsString.Internal.Types.html#OsString" class="link">Source</a> </p>
<p>Newtype representing short operating system specific strings.</p>
<p>Internally this is either <code><a href="system-ospath-types.html#t:WindowsString" title="System.OsPath.Types">WindowsString</a></code> or <code><a href="system-ospath-types.html#t:PosixString" title="System.OsPath.Types">PosixString</a></code>, depending on the platform. Both use unpinned <code class="inline-code">ShortByteString</code> for efficiency.</p>
<p>The constructor is only exported via <a href="../os-string-2.0.7-3f43/system-osstring-internal-types.html">System.OsString.Internal.Types</a>, since dealing with the internals isn't generally recommended, but supported in case you need to write platform specific code.</p>
<div class="subs instances">
<h5 class="instances details-toggle-control details-toggle" data-details-id="i:OsString">Instances</h5>
<details id="i:OsString" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table>
<tr>
<td class="src clearfix">
 <a href="../deepseq-1.5.1.0-18b1/control-deepseq.html#t:NFData" title="Control.DeepSeq">NFData</a> <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/os-string-2.0.7-3f43/src/System.OsString.Internal.Types.html#line-162" class="link">Source</a> </td>
<td class="doc empty"> </td>
</tr>
<tr><td colspan="2"><details id="i:id:OsString:NFData:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../os-string-2.0.7-3f43/system-osstring-internal-types.html">System.OsString.Internal.Types</a></p> <div class="subs methods">
<h4 class="caption">Methods</h4>
<p class="src"><a href="#v:rnf">rnf</a> :: <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; () <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/deepseq-1.5.1.0-18b1/src/Control.DeepSeq.html#rnf" class="link">Source</a> </p>
</div></details></td></tr>
<tr>
<td class="src clearfix">
 <a href="../base-4.21.0.0-8e62/data-monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/os-string-2.0.7-3f43/src/System.OsString.Internal.Types.html#line-179" class="link">Source</a> </td>
<td class="doc"><p>"String-Concatenation" for <code><a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a></code>. This is <strong>not</strong> the same as <code class="inline-code">(&lt;/&gt;)</code>.</p></td>
</tr>
<tr><td colspan="2"><details id="i:id:OsString:Monoid:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../os-string-2.0.7-3f43/system-osstring-internal-types.html">System.OsString.Internal.Types</a></p> <div class="subs methods">
<h4 class="caption">Methods</h4>
<p class="src"><a href="#v:mempty">mempty</a> :: <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> </p>
<p class="src"><a href="#v:mappend">mappend</a> :: <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> </p>
<p class="src"><a href="#v:mconcat">mconcat</a> :: [<a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a>] -&gt; <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> </p>
</div></details></td></tr>
<tr>
<td class="src clearfix">
 <a href="../base-4.21.0.0-8e62/prelude.html#t:Semigroup" title="Prelude">Semigroup</a> <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/os-string-2.0.7-3f43/src/System.OsString.Internal.Types.html#line-188" class="link">Source</a> </td>
<td class="doc empty"> </td>
</tr>
<tr><td colspan="2"><details id="i:id:OsString:Semigroup:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../os-string-2.0.7-3f43/system-osstring-internal-types.html">System.OsString.Internal.Types</a></p> <div class="subs methods">
<h4 class="caption">Methods</h4>
<p class="src"><a href="#v:-60--62-">(&lt;&gt;)</a> :: <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> </p>
<p class="src"><a href="#v:sconcat">sconcat</a> :: <a href="../base-4.21.0.0-8e62/data-list-nonempty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> </p>
<p class="src"><a href="#v:stimes">stimes</a> :: <a href="../base-4.21.0.0-8e62/prelude.html#t:Integral" title="Prelude">Integral</a> b =&gt; b -&gt; <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> </p>
</div></details></td></tr>
<tr>
<td class="src clearfix">
 <a href="../base-4.21.0.0-8e62/ghc-generics.html#t:Generic" title="GHC.Generics">Generic</a> <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/os-string-2.0.7-3f43/src/System.OsString.Internal.Types.html#line-162" class="link">Source</a> </td>
<td class="doc empty"> </td>
</tr>
<tr><td colspan="2"><details id="i:id:OsString:Generic:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../os-string-2.0.7-3f43/system-osstring-internal-types.html">System.OsString.Internal.Types</a></p> <div class="subs associated-types">
<h4 class="caption">Associated Types</h4>
<table>
<tr>
<td class="src clearfix">
 type <a href="../base-4.21.0.0-8e62/ghc-generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a>
</td>
<td class="doc empty"> </td>
</tr>
<tr><td colspan="2"><details id="i:if:Rep_OsString:Rep:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../os-string-2.0.7-3f43/system-osstring-internal-types.html">System.OsString.Internal.Types</a></p> <div class="src">type <a href="../base-4.21.0.0-8e62/ghc-generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> = <a href="../base-4.21.0.0-8e62/ghc-generics.html#t:D1" title="GHC.Generics">D1</a> ('<a href="../base-4.21.0.0-8e62/ghc-generics.html#v:MetaData" title="GHC.Generics">MetaData</a> "OsString" "System.OsString.Internal.Types" "os-string-2.0.7-3f43" '<a href="../base-4.21.0.0-8e62/data-bool.html#v:True" title="Data.Bool">True</a>) (<a href="../base-4.21.0.0-8e62/ghc-generics.html#t:C1" title="GHC.Generics">C1</a> ('<a href="../base-4.21.0.0-8e62/ghc-generics.html#v:MetaCons" title="GHC.Generics">MetaCons</a> "OsString" '<a href="../base-4.21.0.0-8e62/ghc-generics.html#v:PrefixI" title="GHC.Generics">PrefixI</a> '<a href="../base-4.21.0.0-8e62/data-bool.html#v:True" title="Data.Bool">True</a>) (<a href="../base-4.21.0.0-8e62/ghc-generics.html#t:S1" title="GHC.Generics">S1</a> ('<a href="../base-4.21.0.0-8e62/ghc-generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> ('<a href="../base-4.21.0.0-8e62/data-maybe.html#v:Just" title="Data.Maybe">Just</a> "getOsString") '<a href="../base-4.21.0.0-8e62/ghc-generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> '<a href="../base-4.21.0.0-8e62/ghc-generics.html#v:NoSourceStrictness" title="GHC.Generics">NoSourceStrictness</a> '<a href="../base-4.21.0.0-8e62/ghc-generics.html#v:DecidedLazy" title="GHC.Generics">DecidedLazy</a>) (<a href="../base-4.21.0.0-8e62/ghc-generics.html#t:Rec0" title="GHC.Generics">Rec0</a> <a href="../os-string-2.0.7-3f43/system-osstring-internal-types.html#t:PlatformString" title="System.OsString.Internal.Types">PlatformString</a>)))</div></details></td></tr>
</table>
</div> <div class="subs methods">
<h4 class="caption">Methods</h4>
<p class="src"><a href="#v:from">from</a> :: <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; <a href="../base-4.21.0.0-8e62/ghc-generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> x </p>
<p class="src"><a href="#v:to">to</a> :: <a href="../base-4.21.0.0-8e62/ghc-generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> x -&gt; <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> </p>
</div></details></td></tr>
<tr>
<td class="src clearfix">
 <a href="../base-4.21.0.0-8e62/prelude.html#t:Show" title="Prelude">Show</a> <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/os-string-2.0.7-3f43/src/System.OsString.Internal.Types.html#line-165" class="link">Source</a> </td>
<td class="doc"><p>On windows, decodes as UCS-2. On unix prints the raw bytes without decoding.</p></td>
</tr>
<tr><td colspan="2"><details id="i:id:OsString:Show:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../os-string-2.0.7-3f43/system-osstring-internal-types.html">System.OsString.Internal.Types</a></p> <div class="subs methods">
<h4 class="caption">Methods</h4>
<p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.21.0.0-8e62/data-int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; <a href="../base-4.21.0.0-8e62/prelude.html#t:ShowS" title="Prelude">ShowS</a> </p>
<p class="src"><a href="#v:show">show</a> :: <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; <a href="../base-4.21.0.0-8e62/data-string.html#t:String" title="Data.String">String</a> </p>
<p class="src"><a href="#v:showList">showList</a> :: [<a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a>] -&gt; <a href="../base-4.21.0.0-8e62/prelude.html#t:ShowS" title="Prelude">ShowS</a> </p>
</div></details></td></tr>
<tr>
<td class="src clearfix">
 <a href="../base-4.21.0.0-8e62/data-eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/os-string-2.0.7-3f43/src/System.OsString.Internal.Types.html#line-169" class="link">Source</a> </td>
<td class="doc"><p>Byte equality of the internal representation.</p></td>
</tr>
<tr><td colspan="2"><details id="i:id:OsString:Eq:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../os-string-2.0.7-3f43/system-osstring-internal-types.html">System.OsString.Internal.Types</a></p> <div class="subs methods">
<h4 class="caption">Methods</h4>
<p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; <a href="../base-4.21.0.0-8e62/data-bool.html#t:Bool" title="Data.Bool">Bool</a> </p>
<p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; <a href="../base-4.21.0.0-8e62/data-bool.html#t:Bool" title="Data.Bool">Bool</a> </p>
</div></details></td></tr>
<tr>
<td class="src clearfix">
 <a href="../base-4.21.0.0-8e62/data-ord.html#t:Ord" title="Data.Ord">Ord</a> <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/os-string-2.0.7-3f43/src/System.OsString.Internal.Types.html#line-173" class="link">Source</a> </td>
<td class="doc"><p>Byte ordering of the internal representation.</p></td>
</tr>
<tr><td colspan="2"><details id="i:id:OsString:Ord:7"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../os-string-2.0.7-3f43/system-osstring-internal-types.html">System.OsString.Internal.Types</a></p> <div class="subs methods">
<h4 class="caption">Methods</h4>
<p class="src"><a href="#v:compare">compare</a> :: <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; <a href="../base-4.21.0.0-8e62/data-ord.html#t:Ordering" title="Data.Ord">Ordering</a> </p>
<p class="src"><a href="#v:-60-">(&lt;)</a> :: <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; <a href="../base-4.21.0.0-8e62/data-bool.html#t:Bool" title="Data.Bool">Bool</a> </p>
<p class="src"><a href="#v:-60--61-">(&lt;=)</a> :: <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; <a href="../base-4.21.0.0-8e62/data-bool.html#t:Bool" title="Data.Bool">Bool</a> </p>
<p class="src"><a href="#v:-62-">(&gt;)</a> :: <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; <a href="../base-4.21.0.0-8e62/data-bool.html#t:Bool" title="Data.Bool">Bool</a> </p>
<p class="src"><a href="#v:-62--61-">(&gt;=)</a> :: <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; <a href="../base-4.21.0.0-8e62/data-bool.html#t:Bool" title="Data.Bool">Bool</a> </p>
<p class="src"><a href="#v:max">max</a> :: <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> </p>
<p class="src"><a href="#v:min">min</a> :: <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> </p>
</div></details></td></tr>
<tr>
<td class="src clearfix">
 <a href="../template-haskell-2.23.0.0-22c1/language-haskell-th-syntax.html#t:Lift" title="Language.Haskell.TH.Syntax">Lift</a> <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/os-string-2.0.7-3f43/src/System.OsString.Internal.Types.html#line-193" class="link">Source</a> </td>
<td class="doc empty"> </td>
</tr>
<tr><td colspan="2"><details id="i:id:OsString:Lift:8"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../os-string-2.0.7-3f43/system-osstring-internal-types.html">System.OsString.Internal.Types</a></p> <div class="subs methods">
<h4 class="caption">Methods</h4>
<p class="src"><a href="#v:lift">lift</a> :: <a href="../template-haskell-2.23.0.0-22c1/language-haskell-th-syntax.html#t:Quote" title="Language.Haskell.TH.Syntax">Quote</a> m =&gt; <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; m <a href="../template-haskell-2.23.0.0-22c1/language-haskell-th-syntax.html#t:Exp" title="Language.Haskell.TH.Syntax">Exp</a> </p>
<p class="src"><a href="#v:liftTyped">liftTyped</a> :: forall (m :: <a href="../base-4.21.0.0-8e62/data-kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base-4.21.0.0-8e62/data-kind.html#t:Type" title="Data.Kind">Type</a>). <a href="../template-haskell-2.23.0.0-22c1/language-haskell-th-syntax.html#t:Quote" title="Language.Haskell.TH.Syntax">Quote</a> m =&gt; <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; <a href="../template-haskell-2.23.0.0-22c1/language-haskell-th-syntax.html#t:Code" title="Language.Haskell.TH.Syntax">Code</a> m <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> </p>
</div></details></td></tr>
<tr>
<td class="src clearfix">
 type <a href="../base-4.21.0.0-8e62/ghc-generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/os-string-2.0.7-3f43/src/System.OsString.Internal.Types.html#line-" class="link">Source</a> </td>
<td class="doc empty"> </td>
</tr>
<tr><td colspan="2"><details id="i:id:OsString:Rep:9"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../os-string-2.0.7-3f43/system-osstring-internal-types.html">System.OsString.Internal.Types</a></p> <div class="src">type <a href="../base-4.21.0.0-8e62/ghc-generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> = <a href="../base-4.21.0.0-8e62/ghc-generics.html#t:D1" title="GHC.Generics">D1</a> ('<a href="../base-4.21.0.0-8e62/ghc-generics.html#v:MetaData" title="GHC.Generics">MetaData</a> "OsString" "System.OsString.Internal.Types" "os-string-2.0.7-3f43" '<a href="../base-4.21.0.0-8e62/data-bool.html#v:True" title="Data.Bool">True</a>) (<a href="../base-4.21.0.0-8e62/ghc-generics.html#t:C1" title="GHC.Generics">C1</a> ('<a href="../base-4.21.0.0-8e62/ghc-generics.html#v:MetaCons" title="GHC.Generics">MetaCons</a> "OsString" '<a href="../base-4.21.0.0-8e62/ghc-generics.html#v:PrefixI" title="GHC.Generics">PrefixI</a> '<a href="../base-4.21.0.0-8e62/data-bool.html#v:True" title="Data.Bool">True</a>) (<a href="../base-4.21.0.0-8e62/ghc-generics.html#t:S1" title="GHC.Generics">S1</a> ('<a href="../base-4.21.0.0-8e62/ghc-generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> ('<a href="../base-4.21.0.0-8e62/data-maybe.html#v:Just" title="Data.Maybe">Just</a> "getOsString") '<a href="../base-4.21.0.0-8e62/ghc-generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> '<a href="../base-4.21.0.0-8e62/ghc-generics.html#v:NoSourceStrictness" title="GHC.Generics">NoSourceStrictness</a> '<a href="../base-4.21.0.0-8e62/ghc-generics.html#v:DecidedLazy" title="GHC.Generics">DecidedLazy</a>) (<a href="../base-4.21.0.0-8e62/ghc-generics.html#t:Rec0" title="GHC.Generics">Rec0</a> <a href="../os-string-2.0.7-3f43/system-osstring-internal-types.html#t:PlatformString" title="System.OsString.Internal.Types">PlatformString</a>)))</div></details></td></tr>
</table></details>
</div>
<p class="src">data <a id="t:OsChar" class="def">OsChar</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/os-string-2.0.7-3f43/src/System.OsString.Internal.Types.html#OsChar" class="link">Source</a> </p>
<p>Newtype representing a code unit.</p>
<p>On Windows, this is restricted to two-octet codepoints <code><a href="../base-4.21.0.0-8e62/data-word.html#t:Word16" title="Data.Word">Word16</a></code>, on POSIX one-octet (<code><a href="../base-4.21.0.0-8e62/data-word.html#t:Word8" title="Data.Word">Word8</a></code>).</p>
<div class="subs instances">
<h5 class="instances details-toggle-control details-toggle" data-details-id="i:OsChar">Instances</h5>
<details id="i:OsChar" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table>
<tr>
<td class="src clearfix">
 <a href="../deepseq-1.5.1.0-18b1/control-deepseq.html#t:NFData" title="Control.DeepSeq">NFData</a> <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/os-string-2.0.7-3f43/src/System.OsString.Internal.Types.html#line-211" class="link">Source</a> </td>
<td class="doc empty"> </td>
</tr>
<tr><td colspan="2"><details id="i:id:OsChar:NFData:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../os-string-2.0.7-3f43/system-osstring-internal-types.html">System.OsString.Internal.Types</a></p> <div class="subs methods">
<h4 class="caption">Methods</h4>
<p class="src"><a href="#v:rnf">rnf</a> :: <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> -&gt; () <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/deepseq-1.5.1.0-18b1/src/Control.DeepSeq.html#rnf" class="link">Source</a> </p>
</div></details></td></tr>
<tr>
<td class="src clearfix">
 <a href="../base-4.21.0.0-8e62/ghc-generics.html#t:Generic" title="GHC.Generics">Generic</a> <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/os-string-2.0.7-3f43/src/System.OsString.Internal.Types.html#line-211" class="link">Source</a> </td>
<td class="doc empty"> </td>
</tr>
<tr><td colspan="2"><details id="i:id:OsChar:Generic:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../os-string-2.0.7-3f43/system-osstring-internal-types.html">System.OsString.Internal.Types</a></p> <div class="subs associated-types">
<h4 class="caption">Associated Types</h4>
<table>
<tr>
<td class="src clearfix">
 type <a href="../base-4.21.0.0-8e62/ghc-generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a>
</td>
<td class="doc empty"> </td>
</tr>
<tr><td colspan="2"><details id="i:if:Rep_OsChar:Rep:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../os-string-2.0.7-3f43/system-osstring-internal-types.html">System.OsString.Internal.Types</a></p> <div class="src">type <a href="../base-4.21.0.0-8e62/ghc-generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> = <a href="../base-4.21.0.0-8e62/ghc-generics.html#t:D1" title="GHC.Generics">D1</a> ('<a href="../base-4.21.0.0-8e62/ghc-generics.html#v:MetaData" title="GHC.Generics">MetaData</a> "OsChar" "System.OsString.Internal.Types" "os-string-2.0.7-3f43" '<a href="../base-4.21.0.0-8e62/data-bool.html#v:True" title="Data.Bool">True</a>) (<a href="../base-4.21.0.0-8e62/ghc-generics.html#t:C1" title="GHC.Generics">C1</a> ('<a href="../base-4.21.0.0-8e62/ghc-generics.html#v:MetaCons" title="GHC.Generics">MetaCons</a> "OsChar" '<a href="../base-4.21.0.0-8e62/ghc-generics.html#v:PrefixI" title="GHC.Generics">PrefixI</a> '<a href="../base-4.21.0.0-8e62/data-bool.html#v:True" title="Data.Bool">True</a>) (<a href="../base-4.21.0.0-8e62/ghc-generics.html#t:S1" title="GHC.Generics">S1</a> ('<a href="../base-4.21.0.0-8e62/ghc-generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> ('<a href="../base-4.21.0.0-8e62/data-maybe.html#v:Just" title="Data.Maybe">Just</a> "getOsChar") '<a href="../base-4.21.0.0-8e62/ghc-generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> '<a href="../base-4.21.0.0-8e62/ghc-generics.html#v:NoSourceStrictness" title="GHC.Generics">NoSourceStrictness</a> '<a href="../base-4.21.0.0-8e62/ghc-generics.html#v:DecidedLazy" title="GHC.Generics">DecidedLazy</a>) (<a href="../base-4.21.0.0-8e62/ghc-generics.html#t:Rec0" title="GHC.Generics">Rec0</a> <a href="../os-string-2.0.7-3f43/system-osstring-internal-types.html#t:PlatformChar" title="System.OsString.Internal.Types">PlatformChar</a>)))</div></details></td></tr>
</table>
</div> <div class="subs methods">
<h4 class="caption">Methods</h4>
<p class="src"><a href="#v:from">from</a> :: <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> -&gt; <a href="../base-4.21.0.0-8e62/ghc-generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> x </p>
<p class="src"><a href="#v:to">to</a> :: <a href="../base-4.21.0.0-8e62/ghc-generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> x -&gt; <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> </p>
</div></details></td></tr>
<tr>
<td class="src clearfix">
 <a href="../base-4.21.0.0-8e62/prelude.html#t:Show" title="Prelude">Show</a> <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/os-string-2.0.7-3f43/src/System.OsString.Internal.Types.html#line-213" class="link">Source</a> </td>
<td class="doc empty"> </td>
</tr>
<tr><td colspan="2"><details id="i:id:OsChar:Show:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../os-string-2.0.7-3f43/system-osstring-internal-types.html">System.OsString.Internal.Types</a></p> <div class="subs methods">
<h4 class="caption">Methods</h4>
<p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.21.0.0-8e62/data-int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> -&gt; <a href="../base-4.21.0.0-8e62/prelude.html#t:ShowS" title="Prelude">ShowS</a> </p>
<p class="src"><a href="#v:show">show</a> :: <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> -&gt; <a href="../base-4.21.0.0-8e62/data-string.html#t:String" title="Data.String">String</a> </p>
<p class="src"><a href="#v:showList">showList</a> :: [<a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a>] -&gt; <a href="../base-4.21.0.0-8e62/prelude.html#t:ShowS" title="Prelude">ShowS</a> </p>
</div></details></td></tr>
<tr>
<td class="src clearfix">
 <a href="../base-4.21.0.0-8e62/data-eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/os-string-2.0.7-3f43/src/System.OsString.Internal.Types.html#line-217" class="link">Source</a> </td>
<td class="doc"><p>Byte equality of the internal representation.</p></td>
</tr>
<tr><td colspan="2"><details id="i:id:OsChar:Eq:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../os-string-2.0.7-3f43/system-osstring-internal-types.html">System.OsString.Internal.Types</a></p> <div class="subs methods">
<h4 class="caption">Methods</h4>
<p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> -&gt; <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> -&gt; <a href="../base-4.21.0.0-8e62/data-bool.html#t:Bool" title="Data.Bool">Bool</a> </p>
<p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> -&gt; <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> -&gt; <a href="../base-4.21.0.0-8e62/data-bool.html#t:Bool" title="Data.Bool">Bool</a> </p>
</div></details></td></tr>
<tr>
<td class="src clearfix">
 <a href="../base-4.21.0.0-8e62/data-ord.html#t:Ord" title="Data.Ord">Ord</a> <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/os-string-2.0.7-3f43/src/System.OsString.Internal.Types.html#line-221" class="link">Source</a> </td>
<td class="doc"><p>Byte ordering of the internal representation.</p></td>
</tr>
<tr><td colspan="2"><details id="i:id:OsChar:Ord:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../os-string-2.0.7-3f43/system-osstring-internal-types.html">System.OsString.Internal.Types</a></p> <div class="subs methods">
<h4 class="caption">Methods</h4>
<p class="src"><a href="#v:compare">compare</a> :: <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> -&gt; <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> -&gt; <a href="../base-4.21.0.0-8e62/data-ord.html#t:Ordering" title="Data.Ord">Ordering</a> </p>
<p class="src"><a href="#v:-60-">(&lt;)</a> :: <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> -&gt; <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> -&gt; <a href="../base-4.21.0.0-8e62/data-bool.html#t:Bool" title="Data.Bool">Bool</a> </p>
<p class="src"><a href="#v:-60--61-">(&lt;=)</a> :: <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> -&gt; <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> -&gt; <a href="../base-4.21.0.0-8e62/data-bool.html#t:Bool" title="Data.Bool">Bool</a> </p>
<p class="src"><a href="#v:-62-">(&gt;)</a> :: <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> -&gt; <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> -&gt; <a href="../base-4.21.0.0-8e62/data-bool.html#t:Bool" title="Data.Bool">Bool</a> </p>
<p class="src"><a href="#v:-62--61-">(&gt;=)</a> :: <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> -&gt; <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> -&gt; <a href="../base-4.21.0.0-8e62/data-bool.html#t:Bool" title="Data.Bool">Bool</a> </p>
<p class="src"><a href="#v:max">max</a> :: <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> -&gt; <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> -&gt; <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> </p>
<p class="src"><a href="#v:min">min</a> :: <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> -&gt; <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> -&gt; <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> </p>
</div></details></td></tr>
<tr>
<td class="src clearfix">
 type <a href="../base-4.21.0.0-8e62/ghc-generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/os-string-2.0.7-3f43/src/System.OsString.Internal.Types.html#line-" class="link">Source</a> </td>
<td class="doc empty"> </td>
</tr>
<tr><td colspan="2"><details id="i:id:OsChar:Rep:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../os-string-2.0.7-3f43/system-osstring-internal-types.html">System.OsString.Internal.Types</a></p> <div class="src">type <a href="../base-4.21.0.0-8e62/ghc-generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> = <a href="../base-4.21.0.0-8e62/ghc-generics.html#t:D1" title="GHC.Generics">D1</a> ('<a href="../base-4.21.0.0-8e62/ghc-generics.html#v:MetaData" title="GHC.Generics">MetaData</a> "OsChar" "System.OsString.Internal.Types" "os-string-2.0.7-3f43" '<a href="../base-4.21.0.0-8e62/data-bool.html#v:True" title="Data.Bool">True</a>) (<a href="../base-4.21.0.0-8e62/ghc-generics.html#t:C1" title="GHC.Generics">C1</a> ('<a href="../base-4.21.0.0-8e62/ghc-generics.html#v:MetaCons" title="GHC.Generics">MetaCons</a> "OsChar" '<a href="../base-4.21.0.0-8e62/ghc-generics.html#v:PrefixI" title="GHC.Generics">PrefixI</a> '<a href="../base-4.21.0.0-8e62/data-bool.html#v:True" title="Data.Bool">True</a>) (<a href="../base-4.21.0.0-8e62/ghc-generics.html#t:S1" title="GHC.Generics">S1</a> ('<a href="../base-4.21.0.0-8e62/ghc-generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> ('<a href="../base-4.21.0.0-8e62/data-maybe.html#v:Just" title="Data.Maybe">Just</a> "getOsChar") '<a href="../base-4.21.0.0-8e62/ghc-generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> '<a href="../base-4.21.0.0-8e62/ghc-generics.html#v:NoSourceStrictness" title="GHC.Generics">NoSourceStrictness</a> '<a href="../base-4.21.0.0-8e62/ghc-generics.html#v:DecidedLazy" title="GHC.Generics">DecidedLazy</a>) (<a href="../base-4.21.0.0-8e62/ghc-generics.html#t:Rec0" title="GHC.Generics">Rec0</a> <a href="../os-string-2.0.7-3f43/system-osstring-internal-types.html#t:PlatformChar" title="System.OsString.Internal.Types">PlatformChar</a>)))</div></details></td></tr>
</table></details>
</div>
<a href="#g:2" id="g:2"><h2>Filepath construction</h2></a><p class="src"><a id="v:encodeUtf" class="def">encodeUtf</a> :: <a href="../exceptions-0.10.9-0424/control-monad-catch.html#t:MonadThrow" title="Control.Monad.Catch">MonadThrow</a> m =&gt; <a href="system-filepath-posix.html#t:FilePath" title="System.FilePath.Posix">FilePath</a> -&gt; m <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Internal.html#encodeUtf" class="link">Source</a> </p>
<p>Partial unicode friendly encoding.</p>
<p>On windows this encodes as UTF16-LE (strictly), which is a pretty good guess. On unix this encodes as UTF8 (strictly), which is a good guess.</p>
<p>Throws an <code><a href="system-ospath-encoding.html#t:EncodingException" title="System.OsPath.Encoding">EncodingException</a></code> if encoding fails. If the input does not contain surrogate chars, you can use <code><a href="system-ospath.html#v:unsafeEncodeUtf" title="System.OsPath">unsafeEncodeUtf</a></code>.</p>
<p class="src"><a id="v:unsafeEncodeUtf" class="def">unsafeEncodeUtf</a> :: <a href="../base-4.21.0.0-8e62/ghc-stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a> =&gt; <a href="../base-4.21.0.0-8e62/data-string.html#t:String" title="Data.String">String</a> -&gt; <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Internal.html#unsafeEncodeUtf" class="link">Source</a> </p>
<p>Unsafe unicode friendly encoding.</p>
<p>Like <code><a href="system-ospath.html#v:encodeUtf" title="System.OsPath">encodeUtf</a></code>, except it crashes when the input contains surrogate chars. For sanitized input, this can be useful.</p>
<p class="src"><a id="v:encodeWith" class="def">encodeWith</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Internal.html#encodeWith" class="link">Source</a> </p>
<div class="subs arguments">
<h4 class="caption">Arguments</h4>
<table>
<tr>
<td class="src">:: <a href="../base-4.21.0.0-8e62/ghc-io-encoding.html#t:TextEncoding" title="GHC.IO.Encoding">TextEncoding</a>
</td>
<td class="doc"><p>unix text encoding</p></td>
</tr>
<tr>
<td class="src">-&gt; <a href="../base-4.21.0.0-8e62/ghc-io-encoding.html#t:TextEncoding" title="GHC.IO.Encoding">TextEncoding</a>
</td>
<td class="doc"><p>windows text encoding (wide char)</p></td>
</tr>
<tr>
<td class="src">-&gt; <a href="system-filepath-posix.html#t:FilePath" title="System.FilePath.Posix">FilePath</a>
</td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src">-&gt; <a href="../base-4.21.0.0-8e62/data-either.html#t:Either" title="Data.Either">Either</a> <a href="system-ospath-encoding.html#t:EncodingException" title="System.OsPath.Encoding">EncodingException</a> <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a>
</td>
<td class="doc empty"> </td>
</tr>
</table>
</div>
<p>Encode a <code><a href="system-filepath-posix.html#t:FilePath" title="System.FilePath.Posix">FilePath</a></code> with the specified encoding.</p>
<p>Note: on windows, we expect a "wide char" encoding (e.g. UCS-2 or UTF-16). Anything that works with <code class="inline-code">Word16</code> boundaries. Picking an incompatible encoding may crash filepath operations.</p>
<p class="src"><a id="v:encodeFS" class="def">encodeFS</a> :: <a href="../base-4.21.0.0-8e62/data-string.html#t:String" title="Data.String">String</a> -&gt; <a href="../base-4.21.0.0-8e62/prelude.html#t:IO" title="Prelude">IO</a> <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#encodeFS" class="link">Source</a> </p>
<p class="src"><a id="v:osp" class="def">osp</a> :: <a href="../template-haskell-2.23.0.0-22c1/language-haskell-th-quote.html#t:QuasiQuoter" title="Language.Haskell.TH.Quote">QuasiQuoter</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Internal.html#osp" class="link">Source</a> </p>
<p>QuasiQuote an <code><a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a></code>. This accepts Unicode characters and encodes as UTF-8 on unix and UTF-16LE on windows. Runs <code><a href="system-ospath.html#v:isValid" title="System.OsPath">isValid</a></code> on the input. If used as a pattern, requires turning on the <code class="inline-code">ViewPatterns</code> extension.</p>
<p class="src"><a id="v:pack" class="def">pack</a> :: [<a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a>] -&gt; <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Internal.html#pack" class="link">Source</a> </p>
<p>Pack a list of <code><a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a></code> to an <code><a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a></code>.</p>
<p>Note that using this in conjunction with <code class="inline-code">unsafeFromChar</code> to convert from <code class="inline-code">[Char]</code> to <code><a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a></code> is probably not what you want, because it will truncate unicode code points.</p>
<a href="#g:3" id="g:3"><h2>Filepath deconstruction</h2></a><p class="src"><a id="v:decodeUtf" class="def">decodeUtf</a> :: <a href="../exceptions-0.10.9-0424/control-monad-catch.html#t:MonadThrow" title="Control.Monad.Catch">MonadThrow</a> m =&gt; <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; m <a href="system-filepath-posix.html#t:FilePath" title="System.FilePath.Posix">FilePath</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Internal.html#decodeUtf" class="link">Source</a> </p>
<p>Partial unicode friendly decoding.</p>
<p>On windows this decodes as UTF16-LE (strictly), which is a pretty good guess. On unix this decodes as UTF8 (strictly), which is a good guess.</p>
<p>Throws a <code><a href="system-ospath-encoding.html#t:EncodingException" title="System.OsPath.Encoding">EncodingException</a></code> if decoding fails.</p>
<p class="src"><a id="v:decodeWith" class="def">decodeWith</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Internal.html#decodeWith" class="link">Source</a> </p>
<div class="subs arguments">
<h4 class="caption">Arguments</h4>
<table>
<tr>
<td class="src">:: <a href="../base-4.21.0.0-8e62/ghc-io-encoding.html#t:TextEncoding" title="GHC.IO.Encoding">TextEncoding</a>
</td>
<td class="doc"><p>unix text encoding</p></td>
</tr>
<tr>
<td class="src">-&gt; <a href="../base-4.21.0.0-8e62/ghc-io-encoding.html#t:TextEncoding" title="GHC.IO.Encoding">TextEncoding</a>
</td>
<td class="doc"><p>windows text encoding</p></td>
</tr>
<tr>
<td class="src">-&gt; <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a>
</td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src">-&gt; <a href="../base-4.21.0.0-8e62/data-either.html#t:Either" title="Data.Either">Either</a> <a href="system-ospath-encoding.html#t:EncodingException" title="System.OsPath.Encoding">EncodingException</a> <a href="system-filepath-posix.html#t:FilePath" title="System.FilePath.Posix">FilePath</a>
</td>
<td class="doc empty"> </td>
</tr>
</table>
</div>
<p>Decode an <code><a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a></code> with the specified encoding.</p>
<p class="src"><a id="v:decodeFS" class="def">decodeFS</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="../base-4.21.0.0-8e62/prelude.html#t:IO" title="Prelude">IO</a> <a href="../base-4.21.0.0-8e62/data-string.html#t:String" title="Data.String">String</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#decodeFS" class="link">Source</a> </p>
<p class="src"><a id="v:unpack" class="def">unpack</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; [<a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a>] <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Internal.html#unpack" class="link">Source</a> </p>
<p>Unpack an <code><a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a></code> to a list of <code><a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a></code>.</p>
<a href="#g:4" id="g:4"><h2>Word construction</h2></a><p class="src"><a id="v:unsafeFromChar" class="def">unsafeFromChar</a> :: <a href="../base-4.21.0.0-8e62/data-char.html#t:Char" title="Data.Char">Char</a> -&gt; <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/os-string-2.0.7-3f43/src/System.OsString.Internal.html#unsafeFromChar" class="link">Source</a> </p>
<p>Truncates on unix to 1 and on Windows to 2 octets.</p>
<a href="#g:5" id="g:5"><h2>Word deconstruction</h2></a><p class="src"><a id="v:toChar" class="def">toChar</a> :: <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> -&gt; <a href="../base-4.21.0.0-8e62/data-char.html#t:Char" title="Data.Char">Char</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/os-string-2.0.7-3f43/src/System.OsString.Internal.html#toChar" class="link">Source</a> </p>
<p>Converts back to a unicode codepoint (total).</p>
<a href="#g:6" id="g:6"><h2>Separator predicates</h2></a><p class="src"><a id="v:pathSeparator" class="def">pathSeparator</a> :: <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#pathSeparator" class="link">Source</a> </p>
<p>The character that separates directories. In the case where more than one character is possible, <code><a href="system-ospath.html#v:pathSeparator" title="System.OsPath">pathSeparator</a></code> is the 'ideal' one.</p>
<pre>Windows: pathSeparator == '\\'S
Posix:   pathSeparator ==  '/'</pre>
<p class="src"><a id="v:pathSeparators" class="def">pathSeparators</a> :: [<a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a>] <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#pathSeparators" class="link">Source</a> </p>
<p>The list of all possible separators.</p>
<pre>Windows: pathSeparators == ['\\', '/']
Posix:   pathSeparators == ['/']
pathSeparator `elem` pathSeparators</pre>
<p class="src"><a id="v:isPathSeparator" class="def">isPathSeparator</a> :: <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> -&gt; <a href="../base-4.21.0.0-8e62/data-bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#isPathSeparator" class="link">Source</a> </p>
<p>Rather than using <code class="inline-code">(== <a href="system-ospath.html#v:pathSeparator" title="System.OsPath">pathSeparator</a>)</code>, use this. Test if something is a path separator.</p>
<pre>isPathSeparator a == (a `elem` pathSeparators)</pre>
<p class="src"><a id="v:searchPathSeparator" class="def">searchPathSeparator</a> :: <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#searchPathSeparator" class="link">Source</a> </p>
<p>The character that is used to separate the entries in the $PATH environment variable.</p>
<pre>Posix:   searchPathSeparator == ':'
Windows: searchPathSeparator == ';'</pre>
<p class="src"><a id="v:isSearchPathSeparator" class="def">isSearchPathSeparator</a> :: <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> -&gt; <a href="../base-4.21.0.0-8e62/data-bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#isSearchPathSeparator" class="link">Source</a> </p>
<p>Is the character a file separator?</p>
<pre>isSearchPathSeparator a == (a == searchPathSeparator)</pre>
<p class="src"><a id="v:extSeparator" class="def">extSeparator</a> :: <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#extSeparator" class="link">Source</a> </p>
<p>File extension character</p>
<pre>extSeparator == '.'</pre>
<p class="src"><a id="v:isExtSeparator" class="def">isExtSeparator</a> :: <a href="system-ospath.html#t:OsChar" title="System.OsPath">OsChar</a> -&gt; <a href="../base-4.21.0.0-8e62/data-bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#isExtSeparator" class="link">Source</a> </p>
<p>Is the character an extension character?</p>
<pre>isExtSeparator a == (a == extSeparator)</pre>
<a href="#g:7" id="g:7"><h2>$PATH methods</h2></a><p class="src"><a id="v:splitSearchPath" class="def">splitSearchPath</a> :: <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; [<a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a>] <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#splitSearchPath" class="link">Source</a> </p>
<p>Take a string, split it on the <code><a href="system-ospath.html#v:searchPathSeparator" title="System.OsPath">searchPathSeparator</a></code> character.</p>
<p>On Windows, blank items are ignored on Windows, and path elements are stripped of quotes.</p>
<p>On Posix, blank items are converted to <code class="inline-code">.</code> on Posix, and quotes are not treated specially.</p>
<p>Follows the recommendations in <a href="http://www.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap08.html">http://www.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap08.html</a></p>
<pre>Windows: splitSearchPath "File1;File2;File3"  == ["File1","File2","File3"]
Windows: splitSearchPath "File1;;File2;File3" == ["File1","File2","File3"]
Windows: splitSearchPath "File1;\"File2\";File3" == ["File1","File2","File3"]
Posix:   splitSearchPath "File1:File2:File3"  == ["File1","File2","File3"]
Posix:   splitSearchPath "File1::File2:File3" == ["File1",".","File2","File3"]</pre>
<a href="#g:8" id="g:8"><h2>Extension functions</h2></a><p class="src"><a id="v:splitExtension" class="def">splitExtension</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; (<a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a>, <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a>) <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#splitExtension" class="link">Source</a> </p>
<p>Split on the extension. <code><a href="system-ospath.html#v:addExtension" title="System.OsPath">addExtension</a></code> is the inverse.</p>
<pre>splitExtension "/directory/path.ext" == ("/directory/path",".ext")
uncurry (&lt;&gt;) (splitExtension x) == x
Valid x =&gt; uncurry addExtension (splitExtension x) == x
splitExtension "file.txt" == ("file",".txt")
splitExtension "file" == ("file","")
splitExtension "file/file.txt" == ("file/file",".txt")
splitExtension "file.txt/boris" == ("file.txt/boris","")
splitExtension "file.txt/boris.ext" == ("file.txt/boris",".ext")
splitExtension "file/path.txt.bob.fred" == ("file/path.txt.bob",".fred")
splitExtension "file/path.txt/" == ("file/path.txt/","")</pre>
<p class="src"><a id="v:takeExtension" class="def">takeExtension</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#takeExtension" class="link">Source</a> </p>
<p>Get the extension of a file, returns <code class="inline-code">""</code> for no extension, <code class="inline-code">.ext</code> otherwise.</p>
<pre>takeExtension "/directory/path.ext" == ".ext"
takeExtension x == snd (splitExtension x)
Valid x =&gt; takeExtension (addExtension x "ext") == ".ext"
Valid x =&gt; takeExtension (replaceExtension x "ext") == ".ext"</pre>
<p class="src"><a id="v:replaceExtension" class="def">replaceExtension</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#replaceExtension" class="link">Source</a> </p>
<p>Set the extension of a file, overwriting one if already present, equivalent to <code><a href="system-ospath.html#v:-45--60-.-62-" title="System.OsPath">-&lt;.&gt;</a></code>.</p>
<pre>replaceExtension "/directory/path.txt" "ext" == "/directory/path.ext"
replaceExtension "/directory/path.txt" ".ext" == "/directory/path.ext"
replaceExtension "file.txt" ".bob" == "file.bob"
replaceExtension "file.txt" "bob" == "file.bob"
replaceExtension "file" ".bob" == "file.bob"
replaceExtension "file.txt" "" == "file"
replaceExtension "file.fred.bob" "txt" == "file.fred.txt"
replaceExtension x y == addExtension (dropExtension x) y</pre>
<p class="src"><a id="v:-45--60-.-62-" class="def">(-&lt;.&gt;)</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#-%3C.%3E" class="link">Source</a> </p>
<p>Remove the current extension and add another, equivalent to <code><a href="system-ospath.html#v:replaceExtension" title="System.OsPath">replaceExtension</a></code>.</p>
<pre>"/directory/path.txt" -&lt;.&gt; "ext" == "/directory/path.ext"
"/directory/path.txt" -&lt;.&gt; ".ext" == "/directory/path.ext"
"foo.o" -&lt;.&gt; "c" == "foo.c"</pre>
<p class="src"><a id="v:dropExtension" class="def">dropExtension</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#dropExtension" class="link">Source</a> </p>
<p>Remove last extension, and the "." preceding it.</p>
<pre>dropExtension "/directory/path.ext" == "/directory/path"
dropExtension x == fst (splitExtension x)</pre>
<p class="src"><a id="v:addExtension" class="def">addExtension</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#addExtension" class="link">Source</a> </p>
<p>Add an extension, even if there is already one there, equivalent to <code><a href="system-ospath.html#v:-60-.-62-" title="System.OsPath">&lt;.&gt;</a></code>.</p>
<pre>addExtension "/directory/path" "ext" == "/directory/path.ext"
addExtension "file.txt" "bib" == "file.txt.bib"
addExtension "file." ".bib" == "file..bib"
addExtension "file" ".bib" == "file.bib"
addExtension "/" "x" == "/.x"
addExtension x "" == x
Valid x =&gt; takeFileName (addExtension (addTrailingPathSeparator x) "ext") == ".ext"
Windows: addExtension "\\\\share" ".txt" == "\\\\share\\.txt"</pre>
<p>Add an extension, even if there is already one there, equivalent to <code><a href="system-ospath.html#v:-60-.-62-" title="System.OsPath">&lt;.&gt;</a></code>.</p>
<pre>addExtension "/directory/path" "ext" == "/directory/path.ext"
addExtension "file.txt" "bib" == "file.txt.bib"
addExtension "file." ".bib" == "file..bib"
addExtension "file" ".bib" == "file.bib"
addExtension "/" "x" == "/.x"
addExtension x "" == x
Valid x =&gt; takeFileName (addExtension (addTrailingPathSeparator x) "ext") == ".ext"
Windows: addExtension "\\\\share" ".txt" == "\\\\share\\.txt"</pre>
<p class="src"><a id="v:hasExtension" class="def">hasExtension</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="../base-4.21.0.0-8e62/data-bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#hasExtension" class="link">Source</a> </p>
<p>Does the given filename have an extension?</p>
<pre>hasExtension "/directory/path.ext" == True
hasExtension "/directory/path" == False
null (takeExtension x) == not (hasExtension x)</pre>
<p class="src"><a id="v:-60-.-62-" class="def">(&lt;.&gt;)</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#%3C.%3E" class="link">Source</a> </p>
<p>Add an extension, even if there is already one there, equivalent to <code><a href="system-ospath.html#v:addExtension" title="System.OsPath">addExtension</a></code>.</p>
<pre>"/directory/path" &lt;.&gt; "ext" == "/directory/path.ext"
"/directory/path" &lt;.&gt; ".ext" == "/directory/path.ext"</pre>
<p class="src"><a id="v:splitExtensions" class="def">splitExtensions</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; (<a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a>, <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a>) <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#splitExtensions" class="link">Source</a> </p>
<p>Split on all extensions.</p>
<pre>splitExtensions "/directory/path.ext" == ("/directory/path",".ext")
splitExtensions "file.tar.gz" == ("file",".tar.gz")
uncurry (&lt;&gt;) (splitExtensions x) == x
Valid x =&gt; uncurry addExtension (splitExtensions x) == x
splitExtensions "file.tar.gz" == ("file",".tar.gz")</pre>
<p class="src"><a id="v:dropExtensions" class="def">dropExtensions</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#dropExtensions" class="link">Source</a> </p>
<p>Drop all extensions.</p>
<pre>dropExtensions "/directory/path.ext" == "/directory/path"
dropExtensions "file.tar.gz" == "file"
not $ hasExtension $ dropExtensions x
not $ any isExtSeparator $ takeFileName $ dropExtensions x</pre>
<p class="src"><a id="v:takeExtensions" class="def">takeExtensions</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#takeExtensions" class="link">Source</a> </p>
<p>Get all extensions.</p>
<pre>takeExtensions "/directory/path.ext" == ".ext"
takeExtensions "file.tar.gz" == ".tar.gz"</pre>
<p class="src"><a id="v:replaceExtensions" class="def">replaceExtensions</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#replaceExtensions" class="link">Source</a> </p>
<p>Replace all extensions of a file with a new extension. Note that <code><a href="system-ospath.html#v:replaceExtension" title="System.OsPath">replaceExtension</a></code> and <code><a href="system-ospath.html#v:addExtension" title="System.OsPath">addExtension</a></code> both work for adding multiple extensions, so only required when you need to drop all extensions first.</p>
<pre>replaceExtensions "file.fred.bob" "txt" == "file.txt"
replaceExtensions "file.fred.bob" "tar.gz" == "file.tar.gz"</pre>
<p class="src"><a id="v:isExtensionOf" class="def">isExtensionOf</a> :: <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="../base-4.21.0.0-8e62/data-bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#isExtensionOf" class="link">Source</a> </p>
<p>Does the given filename have the specified extension?</p>
<pre>"png" `isExtensionOf` "/directory/file.png" == True
".png" `isExtensionOf` "/directory/file.png" == True
".tar.gz" `isExtensionOf` "bar/foo.tar.gz" == True
"ar.gz" `isExtensionOf` "bar/foo.tar.gz" == False
"png" `isExtensionOf` "/directory/file.png.jpg" == False
"csv/table.csv" `isExtensionOf` "/data/csv/table.csv" == False</pre>
<p class="src"><a id="v:stripExtension" class="def">stripExtension</a> :: <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="../base-4.21.0.0-8e62/data-maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#stripExtension" class="link">Source</a> </p>
<p>Drop the given extension from a filepath, and the <code class="inline-code">"."</code> preceding it. Returns <code><a href="../base-4.21.0.0-8e62/data-maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> if the filepath does not have the given extension, or <code><a href="../base-4.21.0.0-8e62/data-maybe.html#v:Just" title="Data.Maybe">Just</a></code> and the part before the extension if it does.</p>
<p>This function can be more predictable than <code><a href="system-ospath.html#v:dropExtensions" title="System.OsPath">dropExtensions</a></code>, especially if the filename might itself contain <code class="inline-code">.</code> characters.</p>
<pre>stripExtension "hs.o" "foo.x.hs.o" == Just "foo.x"
stripExtension "hi.o" "foo.x.hs.o" == Nothing
dropExtension x == fromJust (stripExtension (takeExtension x) x)
dropExtensions x == fromJust (stripExtension (takeExtensions x) x)
stripExtension ".c.d" "a.b.c.d"  == Just "a.b"
stripExtension ".c.d" "a.b..c.d" == Just "a.b."
stripExtension "baz"  "foo.bar"  == Nothing
stripExtension "bar"  "foobar"   == Nothing
stripExtension ""     x          == Just x</pre>
<a href="#g:9" id="g:9"><h2>Filename/directory functions</h2></a><p class="src"><a id="v:splitFileName" class="def">splitFileName</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; (<a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a>, <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a>) <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#splitFileName" class="link">Source</a> </p>
<p>Split a filename into directory and file. <code><a href="system-ospath.html#v:-60--47--62-" title="System.OsPath">&lt;/&gt;</a></code> is the inverse. The first component will often end with a trailing slash.</p>
<pre>splitFileName "/directory/file.ext" == ("/directory/","file.ext")
Valid x =&gt; uncurry (&lt;/&gt;) (splitFileName x) == x || fst (splitFileName x) == "./"
Valid x =&gt; isValid (fst (splitFileName x))
splitFileName "file/bob.txt" == ("file/", "bob.txt")
splitFileName "file/" == ("file/", "")
splitFileName "bob" == ("./", "bob")
Posix:   splitFileName "/" == ("/","")
Windows: splitFileName "c:" == ("c:","")</pre>
<p class="src"><a id="v:takeFileName" class="def">takeFileName</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#takeFileName" class="link">Source</a> </p>
<p>Get the file name.</p>
<pre>takeFileName "/directory/file.ext" == "file.ext"
takeFileName "test/" == ""
takeFileName x `isSuffixOf` x
takeFileName x == snd (splitFileName x)
Valid x =&gt; takeFileName (replaceFileName x "fred") == "fred"
Valid x =&gt; takeFileName (x &lt;/&gt; "fred") == "fred"
Valid x =&gt; isRelative (takeFileName x)</pre>
<p class="src"><a id="v:replaceFileName" class="def">replaceFileName</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#replaceFileName" class="link">Source</a> </p>
<p>Set the filename.</p>
<pre>replaceFileName "/directory/other.txt" "file.ext" == "/directory/file.ext"
Valid x =&gt; replaceFileName x (takeFileName x) == x</pre>
<p class="src"><a id="v:dropFileName" class="def">dropFileName</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#dropFileName" class="link">Source</a> </p>
<p>Drop the filename. Unlike <code><a href="system-ospath.html#v:takeDirectory" title="System.OsPath">takeDirectory</a></code>, this function will leave a trailing path separator on the directory.</p>
<pre>dropFileName "/directory/file.ext" == "/directory/"
dropFileName x == fst (splitFileName x)</pre>
<p class="src"><a id="v:takeBaseName" class="def">takeBaseName</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#takeBaseName" class="link">Source</a> </p>
<p>Get the base name, without an extension or path.</p>
<pre>takeBaseName "/directory/file.ext" == "file"
takeBaseName "file/test.txt" == "test"
takeBaseName "dave.ext" == "dave"
takeBaseName "" == ""
takeBaseName "test" == "test"
takeBaseName (addTrailingPathSeparator x) == ""
takeBaseName "file/file.tar.gz" == "file.tar"</pre>
<p class="src"><a id="v:replaceBaseName" class="def">replaceBaseName</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="system-ospath.html#t:OsString" title="System.OsPath">OsString</a> -&gt; <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#replaceBaseName" class="link">Source</a> </p>
<p>Set the base name.</p>
<pre>replaceBaseName "/directory/other.ext" "file" == "/directory/file.ext"
replaceBaseName "file/test.txt" "bob" == "file/bob.txt"
replaceBaseName "fred" "bill" == "bill"
replaceBaseName "/dave/fred/bob.gz.tar" "new" == "/dave/fred/new.tar"
Valid x =&gt; replaceBaseName x (takeBaseName x) == x</pre>
<p class="src"><a id="v:takeDirectory" class="def">takeDirectory</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#takeDirectory" class="link">Source</a> </p>
<p>Get the directory name, move up one level.</p>
<pre>          takeDirectory "/directory/other.ext" == "/directory"
          takeDirectory x `isPrefixOf` x || takeDirectory x == "."
          takeDirectory "foo" == "."
          takeDirectory "/" == "/"
          takeDirectory "/foo" == "/"
          takeDirectory "/foo/bar/baz" == "/foo/bar"
          takeDirectory "/foo/bar/baz/" == "/foo/bar/baz"
          takeDirectory "foo/bar/baz" == "foo/bar"
Windows:  takeDirectory "foo\\bar" == "foo"
Windows:  takeDirectory "foo\\bar\\\\" == "foo\\bar"
Windows:  takeDirectory "C:\\" == "C:\\"</pre>
<p class="src"><a id="v:replaceDirectory" class="def">replaceDirectory</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#replaceDirectory" class="link">Source</a> </p>
<p>Set the directory, keeping the filename the same.</p>
<pre>replaceDirectory "root/file.ext" "/directory/" == "/directory/file.ext"
Valid x =&gt; replaceDirectory x (takeDirectory x) `equalFilePath` x</pre>
<p class="src"><a id="v:combine" class="def">combine</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#combine" class="link">Source</a> </p>
<p>An alias for <code><a href="system-ospath.html#v:-60--47--62-" title="System.OsPath">&lt;/&gt;</a></code>.</p>
<p class="src"><a id="v:-60--47--62-" class="def">(&lt;/&gt;)</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#%3C%2F%3E" class="link">Source</a> </p>
<p>Combine two paths with a path separator. If the second path starts with a path separator or a drive letter, then it returns the second. The intention is that <code class="inline-code">readFile (dir <a href="system-ospath.html#v:-60--47--62-" title="System.OsPath">&lt;/&gt;</a> file)</code> will access the same file as <code class="inline-code">setCurrentDirectory dir; readFile file</code>.</p>
<pre>Posix:   "/directory" &lt;/&gt; "file.ext" == "/directory/file.ext"
Windows: "/directory" &lt;/&gt; "file.ext" == "/directory\\file.ext"
         "directory" &lt;/&gt; "/file.ext" == "/file.ext"
Valid x =&gt; (takeDirectory x &lt;/&gt; takeFileName x) `equalFilePath` x</pre>
<p>Combined:</p>
<pre>Posix:   "/" &lt;/&gt; "test" == "/test"
Posix:   "home" &lt;/&gt; "bob" == "home/bob"
Posix:   "x:" &lt;/&gt; "foo" == "x:/foo"
Windows: "C:\\foo" &lt;/&gt; "bar" == "C:\\foo\\bar"
Windows: "home" &lt;/&gt; "bob" == "home\\bob"</pre>
<p>Not combined:</p>
<pre>Posix:   "home" &lt;/&gt; "/bob" == "/bob"
Windows: "home" &lt;/&gt; "C:\\bob" == "C:\\bob"</pre>
<p>Not combined (tricky):</p>
<p>On Windows, if a filepath starts with a single slash, it is relative to the root of the current drive. In [1], this is (confusingly) referred to as an absolute path. The current behavior of <code><a href="system-ospath.html#v:-60--47--62-" title="System.OsPath">&lt;/&gt;</a></code> is to never combine these forms.</p>
<pre>Windows: "home" &lt;/&gt; "/bob" == "/bob"
Windows: "home" &lt;/&gt; "\\bob" == "\\bob"
Windows: "C:\\home" &lt;/&gt; "\\bob" == "\\bob"</pre>
<p>On Windows, from [1]: "If a file name begins with only a disk designator but not the backslash after the colon, it is interpreted as a relative path to the current directory on the drive with the specified letter." The current behavior of <code><a href="system-ospath.html#v:-60--47--62-" title="System.OsPath">&lt;/&gt;</a></code> is to never combine these forms.</p>
<pre>Windows: "D:\\foo" &lt;/&gt; "C:bar" == "C:bar"
Windows: "C:\\foo" &lt;/&gt; "C:bar" == "C:bar"</pre>
<p class="src"><a id="v:splitPath" class="def">splitPath</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; [<a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a>] <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#splitPath" class="link">Source</a> </p>
<p>Split a path by the directory separator.</p>
<pre>splitPath "/directory/file.ext" == ["/","directory/","file.ext"]
concat (splitPath x) == x
splitPath "test//item/" == ["test//","item/"]
splitPath "test/item/file" == ["test/","item/","file"]
splitPath "" == []
Windows: splitPath "c:\\test\\path" == ["c:\\","test\\","path"]
Posix:   splitPath "/file/test" == ["/","file/","test"]</pre>
<p class="src"><a id="v:joinPath" class="def">joinPath</a> :: [<a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a>] -&gt; <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#joinPath" class="link">Source</a> </p>
<p>Join path elements back together.</p>
<pre>joinPath z == foldr (&lt;/&gt;) "" z
joinPath ["/","directory/","file.ext"] == "/directory/file.ext"
Valid x =&gt; joinPath (splitPath x) == x
joinPath [] == ""
Posix: joinPath ["test","file","path"] == "test/file/path"</pre>
<p class="src"><a id="v:splitDirectories" class="def">splitDirectories</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; [<a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a>] <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#splitDirectories" class="link">Source</a> </p>
<p>Just as <code><a href="system-ospath.html#v:splitPath" title="System.OsPath">splitPath</a></code>, but don't add the trailing slashes to each element.</p>
<pre>         splitDirectories "/directory/file.ext" == ["/","directory","file.ext"]
         splitDirectories "test/file" == ["test","file"]
         splitDirectories "/test/file" == ["/","test","file"]
Windows: splitDirectories "C:\\test\\file" == ["C:\\", "test", "file"]
         Valid x =&gt; joinPath (splitDirectories x) `equalFilePath` x
         splitDirectories "" == []
Windows: splitDirectories "C:\\test\\\\\\file" == ["C:\\", "test", "file"]
         splitDirectories "/test///file" == ["/","test","file"]</pre>
<a href="#g:10" id="g:10"><h2>Drive functions</h2></a><p class="src"><a id="v:splitDrive" class="def">splitDrive</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; (<a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a>, <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a>) <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#splitDrive" class="link">Source</a> </p>
<p>Split a path into a drive and a path. On Posix, / is a Drive.</p>
<pre>uncurry (&lt;&gt;) (splitDrive x) == x
Windows: splitDrive "file" == ("","file")
Windows: splitDrive "c:/file" == ("c:/","file")
Windows: splitDrive "c:\\file" == ("c:\\","file")
Windows: splitDrive "\\\\shared\\test" == ("\\\\shared\\","test")
Windows: splitDrive "\\\\shared" == ("\\\\shared","")
Windows: splitDrive "\\\\?\\UNC\\shared\\file" == ("\\\\?\\UNC\\shared\\","file")
Windows: splitDrive "\\\\?\\UNCshared\\file" == ("\\\\?\\","UNCshared\\file")
Windows: splitDrive "\\\\?\\d:\\file" == ("\\\\?\\d:\\","file")
Windows: splitDrive "/d" == ("","/d")
Posix:   splitDrive "/test" == ("/","test")
Posix:   splitDrive "//test" == ("//","test")
Posix:   splitDrive "test/file" == ("","test/file")
Posix:   splitDrive "file" == ("","file")</pre>
<p class="src"><a id="v:joinDrive" class="def">joinDrive</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#joinDrive" class="link">Source</a> </p>
<p>Join a drive and the rest of the path.</p>
<pre>Valid x =&gt; uncurry joinDrive (splitDrive x) == x
Windows: joinDrive "C:" "foo" == "C:foo"
Windows: joinDrive "C:\\" "bar" == "C:\\bar"
Windows: joinDrive "\\\\share" "foo" == "\\\\share\\foo"
Windows: joinDrive "/:" "foo" == "/:\\foo"</pre>
<p>Join a drive and the rest of the path.</p>
<pre>Valid x =&gt; uncurry joinDrive (splitDrive x) == x
Windows: joinDrive "C:" "foo" == "C:foo"
Windows: joinDrive "C:\\" "bar" == "C:\\bar"
Windows: joinDrive "\\\\share" "foo" == "\\\\share\\foo"
Windows: joinDrive "/:" "foo" == "/:\\foo"</pre>
<p class="src"><a id="v:takeDrive" class="def">takeDrive</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#takeDrive" class="link">Source</a> </p>
<p>Get the drive from a filepath.</p>
<pre>takeDrive x == fst (splitDrive x)</pre>
<p class="src"><a id="v:hasDrive" class="def">hasDrive</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="../base-4.21.0.0-8e62/data-bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#hasDrive" class="link">Source</a> </p>
<p>Does a path have a drive.</p>
<pre>not (hasDrive x) == null (takeDrive x)
Posix:   hasDrive "/foo" == True
Windows: hasDrive "C:\\foo" == True
Windows: hasDrive "C:foo" == True
         hasDrive "foo" == False
         hasDrive "" == False</pre>
<p class="src"><a id="v:dropDrive" class="def">dropDrive</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#dropDrive" class="link">Source</a> </p>
<p>Delete the drive, if it exists.</p>
<pre>dropDrive x == snd (splitDrive x)</pre>
<p class="src"><a id="v:isDrive" class="def">isDrive</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="../base-4.21.0.0-8e62/data-bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#isDrive" class="link">Source</a> </p>
<p>Is an element a drive</p>
<pre>Posix:   isDrive "/" == True
Posix:   isDrive "/foo" == False
Windows: isDrive "C:\\" == True
Windows: isDrive "C:\\foo" == False
         isDrive "" == False</pre>
<a href="#g:11" id="g:11"><h2>Trailing slash functions</h2></a><p class="src"><a id="v:hasTrailingPathSeparator" class="def">hasTrailingPathSeparator</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="../base-4.21.0.0-8e62/data-bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#hasTrailingPathSeparator" class="link">Source</a> </p>
<p>Is an item either a directory or the last character a path separator?</p>
<pre>hasTrailingPathSeparator "test" == False
hasTrailingPathSeparator "test/" == True</pre>
<p class="src"><a id="v:addTrailingPathSeparator" class="def">addTrailingPathSeparator</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#addTrailingPathSeparator" class="link">Source</a> </p>
<p>Add a trailing file path separator if one is not already present.</p>
<pre>hasTrailingPathSeparator (addTrailingPathSeparator x)
hasTrailingPathSeparator x ==&gt; addTrailingPathSeparator x == x
Posix:    addTrailingPathSeparator "test/rest" == "test/rest/"</pre>
<p class="src"><a id="v:dropTrailingPathSeparator" class="def">dropTrailingPathSeparator</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#dropTrailingPathSeparator" class="link">Source</a> </p>
<p>Remove any trailing path separators</p>
<pre>dropTrailingPathSeparator "file/test/" == "file/test"
          dropTrailingPathSeparator "/" == "/"
Windows:  dropTrailingPathSeparator "\\" == "\\"
Posix:    not (hasTrailingPathSeparator (dropTrailingPathSeparator x)) || isDrive x</pre>
<a href="#g:12" id="g:12"><h2>File name manipulations</h2></a><p class="src"><a id="v:normalise" class="def">normalise</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#normalise" class="link">Source</a> </p>
<p>Normalise a file</p>
<ul>
<li>// outside of the drive can be made blank</li>
<li>/ -&gt; <code><a href="system-ospath.html#v:pathSeparator" title="System.OsPath">pathSeparator</a></code>
</li>
<li>./ -&gt; ""</li>
</ul>
<p>Does not remove <code class="inline-code">".."</code>, because of symlinks.</p>
<pre>Posix:   normalise "/file/\\test////" == "/file/\\test/"
Posix:   normalise "/file/./test" == "/file/test"
Posix:   normalise "/test/file/../bob/fred/" == "/test/file/../bob/fred/"
Posix:   normalise "../bob/fred/" == "../bob/fred/"
Posix:   normalise "/a/../c" == "/a/../c"
Posix:   normalise "./bob/fred/" == "bob/fred/"
Windows: normalise "c:\\file/bob\\" == "C:\\file\\bob\\"
Windows: normalise "c:\\" == "C:\\"
Windows: normalise "C:.\\" == "C:"
Windows: normalise "\\\\server\\test" == "\\\\server\\test"
Windows: normalise "//server/test" == "\\\\server\\test"
Windows: normalise "c:/file" == "C:\\file"
Windows: normalise "/file" == "\\file"
Windows: normalise "\\" == "\\"
Windows: normalise "/./" == "\\"
         normalise "." == "."
Posix:   normalise "./" == "./"
Posix:   normalise "./." == "./"
Posix:   normalise "/./" == "/"
Posix:   normalise "/" == "/"
Posix:   normalise "bob/fred/." == "bob/fred/"
Posix:   normalise "//home" == "/home"</pre>
<p class="src"><a id="v:equalFilePath" class="def">equalFilePath</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="../base-4.21.0.0-8e62/data-bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#equalFilePath" class="link">Source</a> </p>
<p>Equality of two filepaths. If you call <code class="inline-code">System.Directory.canonicalizePath</code> first this has a much better chance of working. Note that this doesn't follow symlinks or DOSNAM~1s.</p>
<p>Similar to <code><a href="system-ospath.html#v:normalise" title="System.OsPath">normalise</a></code>, this does not expand <code class="inline-code">".."</code>, because of symlinks.</p>
<pre>         x == y ==&gt; equalFilePath x y
         normalise x == normalise y ==&gt; equalFilePath x y
         equalFilePath "foo" "foo/"
         not (equalFilePath "/a/../c" "/c")
         not (equalFilePath "foo" "/foo")
Posix:   not (equalFilePath "foo" "FOO")
Windows: equalFilePath "foo" "FOO"
Windows: not (equalFilePath "C:" "C:/")</pre>
<p class="src"><a id="v:makeRelative" class="def">makeRelative</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#makeRelative" class="link">Source</a> </p>
<p>Contract a filename, based on a relative path. Note that the resulting path will never introduce <code class="inline-code">..</code> paths, as the presence of symlinks means <code class="inline-code">../b</code> may not reach <code class="inline-code">a/b</code> if it starts from <code class="inline-code">a/c</code>. For a worked example see <a href="http://neilmitchell.blogspot.co.uk/2015/10/filepaths-are-subtle-symlinks-are-hard.html">this blog post</a>.</p>
<p>The corresponding <code class="inline-code">makeAbsolute</code> function can be found in <code class="inline-code">System.Directory</code>.</p>
<pre>         makeRelative "/directory" "/directory/file.ext" == "file.ext"
         Valid x =&gt; makeRelative (takeDirectory x) x `equalFilePath` takeFileName x
         makeRelative x x == "."
         Valid x y =&gt; equalFilePath x y || (isRelative x &amp;&amp; makeRelative y x == x) || equalFilePath (y &lt;/&gt; makeRelative y x) x
Windows: makeRelative "C:\\Home" "c:\\home\\bob" == "bob"
Windows: makeRelative "C:\\Home" "c:/home/bob" == "bob"
Windows: makeRelative "C:\\Home" "D:\\Home\\Bob" == "D:\\Home\\Bob"
Windows: makeRelative "C:\\Home" "C:Home\\Bob" == "C:Home\\Bob"
Windows: makeRelative "/Home" "/home/bob" == "bob"
Windows: makeRelative "/" "//" == "//"
Posix:   makeRelative "/Home" "/home/bob" == "/home/bob"
Posix:   makeRelative "/home/" "/home/bob/foo/bar" == "bob/foo/bar"
Posix:   makeRelative "/fred" "bob" == "bob"
Posix:   makeRelative "/file/test" "/file/test/fred" == "fred"
Posix:   makeRelative "/file/test" "/file/test/fred/" == "fred/"
Posix:   makeRelative "some/path" "some/path/a/b/c" == "a/b/c"</pre>
<p class="src"><a id="v:isRelative" class="def">isRelative</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="../base-4.21.0.0-8e62/data-bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#isRelative" class="link">Source</a> </p>
<p>Is a path relative, or is it fixed to the root?</p>
<pre>Windows: isRelative "path\\test" == True
Windows: isRelative "c:\\test" == False
Windows: isRelative "c:test" == True
Windows: isRelative "c:\\" == False
Windows: isRelative "c:/" == False
Windows: isRelative "c:" == True
Windows: isRelative "\\\\foo" == False
Windows: isRelative "\\\\?\\foo" == False
Windows: isRelative "\\\\?\\UNC\\foo" == False
Windows: isRelative "/foo" == True
Windows: isRelative "\\foo" == True
Posix:   isRelative "test/path" == True
Posix:   isRelative "/test" == False
Posix:   isRelative "/" == False</pre>
<p>According to [1]:</p>
<ul>
<li>"A UNC name of any format [is never relative]."</li>
<li>"You cannot use the "\?" prefix with a relative path."</li>
</ul>
<p class="src"><a id="v:isAbsolute" class="def">isAbsolute</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="../base-4.21.0.0-8e62/data-bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#isAbsolute" class="link">Source</a> </p>
<pre>not . <a href="system-ospath.html#v:isRelative" title="System.OsPath">isRelative</a></pre>
<pre>isAbsolute x == not (isRelative x)</pre>
<p class="src"><a id="v:isValid" class="def">isValid</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="../base-4.21.0.0-8e62/data-bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#isValid" class="link">Source</a> </p>
<p>Is a filepath valid, i.e. could you create a file like it? This function checks for invalid names, and invalid characters, but does not check if length limits are exceeded, as these are typically filesystem dependent.</p>
<pre>         isValid "" == False
         isValid "\0" == False
Posix:   isValid "/random_ path:*" == True
Posix:   isValid x == not (null x)
Windows: isValid "c:\\test" == True
Windows: isValid "c:\\test:of_test" == False
Windows: isValid "test*" == False
Windows: isValid "c:\\test\\nul" == False
Windows: isValid "c:\\test\\prn.txt" == False
Windows: isValid "c:\\nul\\file" == False
Windows: isValid "\\\\" == False
Windows: isValid "\\\\\\foo" == False
Windows: isValid "\\\\?\\D:file" == False
Windows: isValid "foo\tbar" == False
Windows: isValid "nul .txt" == False
Windows: isValid " nul.txt" == True</pre>
<p class="src"><a id="v:makeValid" class="def">makeValid</a> :: <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> -&gt; <a href="system-ospath.html#t:OsPath" title="System.OsPath">OsPath</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.html#makeValid" class="link">Source</a> </p>
<p>Take a filepath and make it valid; does not change already valid filepaths.</p>
<pre>isValid (makeValid x)
isValid x ==&gt; makeValid x == x
makeValid "" == "_"
makeValid "file\0name" == "file_name"
Windows: makeValid "c:\\already\\/valid" == "c:\\already\\/valid"
Windows: makeValid "c:\\test:of_test" == "c:\\test_of_test"
Windows: makeValid "test*" == "test_"
Windows: makeValid "c:\\test\\nul" == "c:\\test\\nul_"
Windows: makeValid "c:\\test\\prn.txt" == "c:\\test\\prn_.txt"
Windows: makeValid "c:\\test/prn.txt" == "c:\\test/prn_.txt"
Windows: makeValid "c:\\nul\\file" == "c:\\nul_\\file"
Windows: makeValid "\\\\\\foo" == "\\\\drive"
Windows: makeValid "\\\\?\\D:file" == "\\\\?\\D:\\file"
Windows: makeValid "nul .txt" == "nul _.txt"</pre>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; The University of Glasgow and others<br>Licensed under a BSD-style license (see top of the page).<br>
    <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/System-OsPath.html" class="_attribution-link">https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/System-OsPath.html</a>
  </p>
</div>
