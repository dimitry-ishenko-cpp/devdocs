<h1 class="caption">System.OsPath.Windows.Internal</h1>
<div class="_haskell-api">
<table class="info">
<tr>
<th valign="top">Copyright</th>
<td>(c) Neil Mitchell 2005-2014</td>
</tr>
<tr>
<th>License</th>
<td>BSD3</td>
</tr>
<tr>
<th>Maintainer</th>
<td>ndmitchell@gmail.com</td>
</tr>
<tr>
<th>Stability</th>
<td>stable</td>
</tr>
<tr>
<th>Portability</th>
<td>portable</td>
</tr>
<tr>
<th>Safe Haskell</th>
<td>None</td>
</tr>
<tr>
<th>Language</th>
<td>Haskell2010</td>
</tr>
</table>
<div id="table-of-contents"><div id="contents-list">
<h4 class="caption" onclick="window.scrollTo(0,0)">Contents</h4>
<ul>
<li><a href="#g:1">Separator predicates</a></li>
<li><a href="#g:2"><code class="inline-code">$PATH</code> methods</a></li>
<li><a href="#g:3">Extension functions</a></li>
<li><a href="#g:4">Filename/directory functions</a></li>
<li><a href="#g:5">Drive functions</a></li>
<li><a href="#g:6">Trailing slash functions</a></li>
<li><a href="#g:7">File name manipulations</a></li>
</ul>
</div></div>
<div id="description">
<h4 class="caption">Description</h4>
<p>A library for <code class="inline-code">FilePath</code> manipulations, using Windows style paths on all platforms. Importing <a href="../template-haskell-2.23.0.0-22c1/system-filepath.html">System.FilePath</a> is usually better.</p>
<p>Given the example <code class="inline-code">FilePath</code>: <code class="inline-code">/directory/file.ext</code></p>
<p>We can use the following functions to extract pieces.</p>
<ul>
<li>
<code><a href="system-ospath-windows-internal.html#v:takeFileName" title="System.OsPath.Windows.Internal">takeFileName</a></code> gives <code class="inline-code">"file.ext"</code>
</li>
<li>
<code><a href="system-ospath-windows-internal.html#v:takeDirectory" title="System.OsPath.Windows.Internal">takeDirectory</a></code> gives <code class="inline-code">"/directory"</code>
</li>
<li>
<code><a href="system-ospath-windows-internal.html#v:takeExtension" title="System.OsPath.Windows.Internal">takeExtension</a></code> gives <code class="inline-code">".ext"</code>
</li>
<li>
<code><a href="system-ospath-windows-internal.html#v:dropExtension" title="System.OsPath.Windows.Internal">dropExtension</a></code> gives <code class="inline-code">"/directory/file"</code>
</li>
<li>
<code><a href="system-ospath-windows-internal.html#v:takeBaseName" title="System.OsPath.Windows.Internal">takeBaseName</a></code> gives <code class="inline-code">"file"</code>
</li>
</ul>
<p>And we could have built an equivalent path with the following expressions:</p>
<ul>
<li>
<code class="inline-code">"/directory" <a href="system-ospath-windows-internal.html#v:-60--47--62-" title="System.OsPath.Windows.Internal">&lt;/&gt;</a> "file.ext"</code>.</li>
<li>
<code class="inline-code">"/directory/file" <a href="system-ospath-windows-internal.html#v:-60-.-62-" title="System.OsPath.Windows.Internal">&lt;.&gt;</a> "ext"</code>.</li>
<li>
<code class="inline-code">"/directory/file.txt" <a href="system-ospath-windows-internal.html#v:-45--60-.-62-" title="System.OsPath.Windows.Internal">-&lt;.&gt;</a> "ext"</code>.</li>
</ul>
<p>Each function in this module is documented with several examples, which are also used as tests.</p>
<p>Here are a few examples of using the <code class="inline-code">filepath</code> functions together:</p>
<p><em>Example 1:</em> Find the possible locations of a Haskell module <code class="inline-code">Test</code> imported from module <code class="inline-code">Main</code>:</p>
<pre>[<a href="system-ospath-windows-internal.html#v:replaceFileName" title="System.OsPath.Windows.Internal">replaceFileName</a> path_to_main "Test" <a href="system-ospath-windows-internal.html#v:-60-.-62-" title="System.OsPath.Windows.Internal">&lt;.&gt;</a> ext | ext &lt;- ["hs","lhs"] ]</pre>
<p><em>Example 2:</em> Download a file from <code class="inline-code">url</code> and save it to disk:</p>
<pre>do let file = <a href="system-ospath-windows-internal.html#v:makeValid" title="System.OsPath.Windows.Internal">makeValid</a> url
   System.Directory.createDirectoryIfMissing True (<a href="system-ospath-windows-internal.html#v:takeDirectory" title="System.OsPath.Windows.Internal">takeDirectory</a> file)</pre>
<p><em>Example 3:</em> Compile a Haskell file, putting the <code class="inline-code">.hi</code> file under <code class="inline-code">interface</code>:</p>
<pre><a href="system-ospath-windows-internal.html#v:takeDirectory" title="System.OsPath.Windows.Internal">takeDirectory</a> file <a href="system-ospath-windows-internal.html#v:-60--47--62-" title="System.OsPath.Windows.Internal">&lt;/&gt;</a> "interface" <a href="system-ospath-windows-internal.html#v:-60--47--62-" title="System.OsPath.Windows.Internal">&lt;/&gt;</a> (<a href="system-ospath-windows-internal.html#v:takeFileName" title="System.OsPath.Windows.Internal">takeFileName</a> file <a href="system-ospath-windows-internal.html#v:-45--60-.-62-" title="System.OsPath.Windows.Internal">-&lt;.&gt;</a> "hi")</pre>
<p>References: [1] <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247.aspx">Naming Files, Paths and Namespaces</a> (Microsoft MSDN)</p>
</div>
<a href="#g:1" id="g:1"><h2>Separator predicates</h2></a><p class="src"><a id="v:pathSeparator" class="def">pathSeparator</a> :: <a href="../base-4.21.0.0-8e62/data-word.html#t:Word16" title="Data.Word">Word16</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#pathSeparator" class="link">Source</a> </p>
<p>The character that separates directories. In the case where more than one character is possible, <code><a href="system-ospath-windows-internal.html#v:pathSeparator" title="System.OsPath.Windows.Internal">pathSeparator</a></code> is the 'ideal' one.</p>
<pre>Windows: pathSeparator == '\\'
Posix:   pathSeparator ==  '/'
isPathSeparator pathSeparator</pre>
<p class="src"><a id="v:pathSeparators" class="def">pathSeparators</a> :: [<a href="../base-4.21.0.0-8e62/data-word.html#t:Word16" title="Data.Word">Word16</a>] <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#pathSeparators" class="link">Source</a> </p>
<p>The list of all possible separators.</p>
<pre>Windows: pathSeparators == ['\\', '/']
Posix:   pathSeparators == ['/']
pathSeparator `elem` pathSeparators</pre>
<p class="src"><a id="v:isPathSeparator" class="def">isPathSeparator</a> :: <a href="../base-4.21.0.0-8e62/data-word.html#t:Word16" title="Data.Word">Word16</a> -&gt; <a href="../base-4.21.0.0-8e62/data-bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#isPathSeparator" class="link">Source</a> </p>
<p>Rather than using <code class="inline-code">(== <a href="system-ospath-windows-internal.html#v:pathSeparator" title="System.OsPath.Windows.Internal">pathSeparator</a>)</code>, use this. Test if something is a path separator.</p>
<pre>isPathSeparator a == (a `elem` pathSeparators)</pre>
<p class="src"><a id="v:searchPathSeparator" class="def">searchPathSeparator</a> :: <a href="../base-4.21.0.0-8e62/data-word.html#t:Word16" title="Data.Word">Word16</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#searchPathSeparator" class="link">Source</a> </p>
<p>The character that is used to separate the entries in the $PATH environment variable.</p>
<pre>Windows: searchPathSeparator == ';'
Posix:   searchPathSeparator == ':'</pre>
<p class="src"><a id="v:isSearchPathSeparator" class="def">isSearchPathSeparator</a> :: <a href="../base-4.21.0.0-8e62/data-word.html#t:Word16" title="Data.Word">Word16</a> -&gt; <a href="../base-4.21.0.0-8e62/data-bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#isSearchPathSeparator" class="link">Source</a> </p>
<p>Is the character a file separator?</p>
<pre>isSearchPathSeparator a == (a == searchPathSeparator)</pre>
<p class="src"><a id="v:extSeparator" class="def">extSeparator</a> :: <a href="../base-4.21.0.0-8e62/data-word.html#t:Word16" title="Data.Word">Word16</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#extSeparator" class="link">Source</a> </p>
<p>File extension character</p>
<pre>extSeparator == '.'</pre>
<p class="src"><a id="v:isExtSeparator" class="def">isExtSeparator</a> :: <a href="../base-4.21.0.0-8e62/data-word.html#t:Word16" title="Data.Word">Word16</a> -&gt; <a href="../base-4.21.0.0-8e62/data-bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#isExtSeparator" class="link">Source</a> </p>
<p>Is the character an extension character?</p>
<pre>isExtSeparator a == (a == extSeparator)</pre>
<a href="#g:2" id="g:2"><h2>$PATH methods</h2></a><p class="src"><a id="v:splitSearchPath" class="def">splitSearchPath</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; [<a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a>] <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#splitSearchPath" class="link">Source</a> </p>
<p>Take a string, split it on the <code><a href="system-ospath-windows-internal.html#v:searchPathSeparator" title="System.OsPath.Windows.Internal">searchPathSeparator</a></code> character. Blank items are ignored on Windows, and converted to <code class="inline-code">.</code> on Posix. On Windows path elements are stripped of quotes.</p>
<p>Follows the recommendations in <a href="http://www.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap08.html">http://www.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap08.html</a></p>
<pre>Posix:   splitSearchPath "File1:File2:File3"  == ["File1","File2","File3"]
Posix:   splitSearchPath "File1::File2:File3" == ["File1",".","File2","File3"]
Windows: splitSearchPath "File1;File2;File3"  == ["File1","File2","File3"]
Windows: splitSearchPath "File1;;File2;File3" == ["File1","File2","File3"]
Windows: splitSearchPath "File1;\"File2\";File3" == ["File1","File2","File3"]</pre>
<a href="#g:3" id="g:3"><h2>Extension functions</h2></a><p class="src"><a id="v:splitExtension" class="def">splitExtension</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; (<a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a>, <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a>) <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#splitExtension" class="link">Source</a> </p>
<p>Split on the extension. <code><a href="system-ospath-windows-internal.html#v:addExtension" title="System.OsPath.Windows.Internal">addExtension</a></code> is the inverse.</p>
<pre>splitExtension "/directory/path.ext" == ("/directory/path",".ext")
uncurry (&lt;&gt;) (splitExtension x) == x
Valid x =&gt; uncurry addExtension (splitExtension x) == x
splitExtension "file.txt" == ("file",".txt")
splitExtension "file" == ("file","")
splitExtension "file/file.txt" == ("file/file",".txt")
splitExtension "file.txt/boris" == ("file.txt/boris","")
splitExtension "file.txt/boris.ext" == ("file.txt/boris",".ext")
splitExtension "file/path.txt.bob.fred" == ("file/path.txt.bob",".fred")
splitExtension "file/path.txt/" == ("file/path.txt/","")</pre>
<p class="src"><a id="v:takeExtension" class="def">takeExtension</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#takeExtension" class="link">Source</a> </p>
<p>Get the extension of a file, returns <code class="inline-code">""</code> for no extension, <code class="inline-code">.ext</code> otherwise.</p>
<pre>takeExtension "/directory/path.ext" == ".ext"
takeExtension x == snd (splitExtension x)
Valid x =&gt; takeExtension (addExtension x "ext") == ".ext"
Valid x =&gt; takeExtension (replaceExtension x "ext") == ".ext"</pre>
<p class="src"><a id="v:replaceExtension" class="def">replaceExtension</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#replaceExtension" class="link">Source</a> </p>
<p>Set the extension of a file, overwriting one if already present, equivalent to <code><a href="system-ospath-windows-internal.html#v:-45--60-.-62-" title="System.OsPath.Windows.Internal">-&lt;.&gt;</a></code>.</p>
<pre>replaceExtension "/directory/path.txt" "ext" == "/directory/path.ext"
replaceExtension "/directory/path.txt" ".ext" == "/directory/path.ext"
replaceExtension "file.txt" ".bob" == "file.bob"
replaceExtension "file.txt" "bob" == "file.bob"
replaceExtension "file" ".bob" == "file.bob"
replaceExtension "file.txt" "" == "file"
replaceExtension "file.fred.bob" "txt" == "file.fred.txt"
replaceExtension x y == addExtension (dropExtension x) y</pre>
<p class="src"><a id="v:-45--60-.-62-" class="def">(-&lt;.&gt;)</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> <span class="fixity">infixr 7</span> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#-%3C.%3E" class="link">Source</a> </p>
<p>Remove the current extension and add another, equivalent to <code><a href="system-ospath-windows-internal.html#v:replaceExtension" title="System.OsPath.Windows.Internal">replaceExtension</a></code>.</p>
<pre>"/directory/path.txt" -&lt;.&gt; "ext" == "/directory/path.ext"
"/directory/path.txt" -&lt;.&gt; ".ext" == "/directory/path.ext"
"foo.o" -&lt;.&gt; "c" == "foo.c"</pre>
<p class="src"><a id="v:dropExtension" class="def">dropExtension</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#dropExtension" class="link">Source</a> </p>
<p>Remove last extension, and the "." preceding it.</p>
<pre>dropExtension "/directory/path.ext" == "/directory/path"
dropExtension x == fst (splitExtension x)</pre>
<p class="src"><a id="v:addExtension" class="def">addExtension</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#addExtension" class="link">Source</a> </p>
<p>Add an extension, even if there is already one there, equivalent to <code><a href="system-ospath-windows-internal.html#v:-60-.-62-" title="System.OsPath.Windows.Internal">&lt;.&gt;</a></code>.</p>
<pre>addExtension "/directory/path" "ext" == "/directory/path.ext"
addExtension "file.txt" "bib" == "file.txt.bib"
addExtension "file." ".bib" == "file..bib"
addExtension "file" ".bib" == "file.bib"
addExtension "/" "x" == "/.x"
addExtension x "" == x
Valid x =&gt; takeFileName (addExtension (addTrailingPathSeparator x) "ext") == ".ext"
Windows: addExtension "\\\\share" ".txt" == "\\\\share\\.txt"</pre>
<p class="src"><a id="v:hasExtension" class="def">hasExtension</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../base-4.21.0.0-8e62/data-bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#hasExtension" class="link">Source</a> </p>
<p>Does the given filename have an extension?</p>
<pre>hasExtension "/directory/path.ext" == True
hasExtension "/directory/path" == False
null (takeExtension x) == not (hasExtension x)</pre>
<p class="src"><a id="v:-60-.-62-" class="def">(&lt;.&gt;)</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> <span class="fixity">infixr 7</span> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#%3C.%3E" class="link">Source</a> </p>
<p>Add an extension, even if there is already one there, equivalent to <code><a href="system-ospath-windows-internal.html#v:addExtension" title="System.OsPath.Windows.Internal">addExtension</a></code>.</p>
<pre>"/directory/path" &lt;.&gt; "ext" == "/directory/path.ext"
"/directory/path" &lt;.&gt; ".ext" == "/directory/path.ext"</pre>
<p class="src"><a id="v:splitExtensions" class="def">splitExtensions</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; (<a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a>, <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a>) <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#splitExtensions" class="link">Source</a> </p>
<p>Split on all extensions.</p>
<pre>splitExtensions "/directory/path.ext" == ("/directory/path",".ext")
splitExtensions "file.tar.gz" == ("file",".tar.gz")
uncurry (&lt;&gt;) (splitExtensions x) == x
Valid x =&gt; uncurry addExtension (splitExtensions x) == x</pre>
<p class="src"><a id="v:dropExtensions" class="def">dropExtensions</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#dropExtensions" class="link">Source</a> </p>
<p>Drop all extensions.</p>
<pre>dropExtensions "/directory/path.ext" == "/directory/path"
dropExtensions "file.tar.gz" == "file"
not $ hasExtension $ dropExtensions x
not $ any isExtSeparator $ takeFileName $ dropExtensions x</pre>
<p class="src"><a id="v:takeExtensions" class="def">takeExtensions</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#takeExtensions" class="link">Source</a> </p>
<p>Get all extensions.</p>
<pre>takeExtensions "/directory/path.ext" == ".ext"
takeExtensions "file.tar.gz" == ".tar.gz"</pre>
<p class="src"><a id="v:replaceExtensions" class="def">replaceExtensions</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#replaceExtensions" class="link">Source</a> </p>
<p>Replace all extensions of a file with a new extension. Note that <code><a href="system-ospath-windows-internal.html#v:replaceExtension" title="System.OsPath.Windows.Internal">replaceExtension</a></code> and <code><a href="system-ospath-windows-internal.html#v:addExtension" title="System.OsPath.Windows.Internal">addExtension</a></code> both work for adding multiple extensions, so only required when you need to drop all extensions first.</p>
<pre>replaceExtensions "file.fred.bob" "txt" == "file.txt"
replaceExtensions "file.fred.bob" "tar.gz" == "file.tar.gz"</pre>
<p class="src"><a id="v:isExtensionOf" class="def">isExtensionOf</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../base-4.21.0.0-8e62/data-bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#isExtensionOf" class="link">Source</a> </p>
<p>Does the given filename have the specified extension?</p>
<pre>"png" `isExtensionOf` "/directory/file.png" == True
".png" `isExtensionOf` "/directory/file.png" == True
".tar.gz" `isExtensionOf` "bar/foo.tar.gz" == True
"ar.gz" `isExtensionOf` "bar/foo.tar.gz" == False
"png" `isExtensionOf` "/directory/file.png.jpg" == False
"csv/table.csv" `isExtensionOf` "/data/csv/table.csv" == False</pre>
<p class="src"><a id="v:stripExtension" class="def">stripExtension</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../base-4.21.0.0-8e62/data-maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#stripExtension" class="link">Source</a> </p>
<p>Drop the given extension from a ShortByteString, and the <code class="inline-code">"."</code> preceding it. Returns <code><a href="../base-4.21.0.0-8e62/data-maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> if the ShortByteString does not have the given extension, or <code><a href="../base-4.21.0.0-8e62/data-maybe.html#v:Just" title="Data.Maybe">Just</a></code> and the part before the extension if it does.</p>
<p>This function can be more predictable than <code><a href="system-ospath-windows-internal.html#v:dropExtensions" title="System.OsPath.Windows.Internal">dropExtensions</a></code>, especially if the filename might itself contain <code class="inline-code">.</code> characters.</p>
<pre>stripExtension "hs.o" "foo.x.hs.o" == Just "foo.x"
stripExtension "hi.o" "foo.x.hs.o" == Nothing
dropExtension x == fromJust (stripExtension (takeExtension x) x)
dropExtensions x == fromJust (stripExtension (takeExtensions x) x)
stripExtension ".c.d" "a.b.c.d"  == Just "a.b"
stripExtension ".c.d" "a.b..c.d" == Just "a.b."
stripExtension "baz"  "foo.bar"  == Nothing
stripExtension "bar"  "foobar"   == Nothing
stripExtension ""     x          == Just x</pre>
<a href="#g:4" id="g:4"><h2>Filename/directory functions</h2></a><p class="src"><a id="v:splitFileName" class="def">splitFileName</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; (<a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a>, <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a>) <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#splitFileName" class="link">Source</a> </p>
<p>Split a filename into directory and file. <code><a href="system-ospath-windows-internal.html#v:-60--47--62-" title="System.OsPath.Windows.Internal">&lt;/&gt;</a></code> is the inverse. The first component will often end with a trailing slash.</p>
<pre>splitFileName "/directory/file.ext" == ("/directory/","file.ext")
Valid x =&gt; uncurry (&lt;/&gt;) (splitFileName x) == x || fst (splitFileName x) == "./"
Valid x =&gt; isValid (fst (splitFileName x))
splitFileName "file/bob.txt" == ("file/", "bob.txt")
splitFileName "file/" == ("file/", "")
splitFileName "bob" == ("./", "bob")
Posix:   splitFileName "/" == ("/","")
Windows: splitFileName "c:" == ("c:","")
Windows: splitFileName "\\\\?\\A:\\fred" == ("\\\\?\\A:\\","fred")
Windows: splitFileName "\\\\?\\A:" == ("\\\\?\\A:","")</pre>
<p class="src"><a id="v:takeFileName" class="def">takeFileName</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#takeFileName" class="link">Source</a> </p>
<p>Get the file name.</p>
<pre>takeFileName "/directory/file.ext" == "file.ext"
takeFileName "test/" == ""
isSuffixOf (takeFileName x) x
takeFileName x == snd (splitFileName x)
Valid x =&gt; takeFileName (replaceFileName x "fred") == "fred"
Valid x =&gt; takeFileName (x &lt;/&gt; "fred") == "fred"
Valid x =&gt; isRelative (takeFileName x)</pre>
<p class="src"><a id="v:replaceFileName" class="def">replaceFileName</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#replaceFileName" class="link">Source</a> </p>
<p>Set the filename.</p>
<pre>replaceFileName "/directory/other.txt" "file.ext" == "/directory/file.ext"
Valid x =&gt; replaceFileName x (takeFileName x) == x</pre>
<p class="src"><a id="v:dropFileName" class="def">dropFileName</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#dropFileName" class="link">Source</a> </p>
<p>Drop the filename. Unlike <code><a href="system-ospath-windows-internal.html#v:takeDirectory" title="System.OsPath.Windows.Internal">takeDirectory</a></code>, this function will leave a trailing path separator on the directory.</p>
<pre>dropFileName "/directory/file.ext" == "/directory/"
dropFileName x == fst (splitFileName x)
isPrefixOf (takeDrive x) (dropFileName x)</pre>
<p class="src"><a id="v:takeBaseName" class="def">takeBaseName</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#takeBaseName" class="link">Source</a> </p>
<p>Get the base name, without an extension or path.</p>
<pre>takeBaseName "/directory/file.ext" == "file"
takeBaseName "file/test.txt" == "test"
takeBaseName "dave.ext" == "dave"
takeBaseName "" == ""
takeBaseName "test" == "test"
takeBaseName (addTrailingPathSeparator x) == ""
takeBaseName "file/file.tar.gz" == "file.tar"</pre>
<p class="src"><a id="v:replaceBaseName" class="def">replaceBaseName</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#replaceBaseName" class="link">Source</a> </p>
<p>Set the base name.</p>
<pre>replaceBaseName "/directory/other.ext" "file" == "/directory/file.ext"
replaceBaseName "file/test.txt" "bob" == "file/bob.txt"
replaceBaseName "fred" "bill" == "bill"
replaceBaseName "/dave/fred/bob.gz.tar" "new" == "/dave/fred/new.tar"
Valid x =&gt; replaceBaseName x (takeBaseName x) == x</pre>
<p class="src"><a id="v:takeDirectory" class="def">takeDirectory</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#takeDirectory" class="link">Source</a> </p>
<p>Get the directory name, move up one level.</p>
<pre>          takeDirectory "/directory/other.ext" == "/directory"
          isPrefixOf (takeDirectory x) x || takeDirectory x == "."
          takeDirectory "foo" == "."
          takeDirectory "/" == "/"
          takeDirectory "/foo" == "/"
          takeDirectory "/foo/bar/baz" == "/foo/bar"
          takeDirectory "/foo/bar/baz/" == "/foo/bar/baz"
          takeDirectory "foo/bar/baz" == "foo/bar"
Windows:  takeDirectory "foo\\bar" == "foo"
Windows:  takeDirectory "foo\\bar\\\\" == "foo\\bar"
Windows:  takeDirectory "C:\\" == "C:\\"</pre>
<p class="src"><a id="v:replaceDirectory" class="def">replaceDirectory</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#replaceDirectory" class="link">Source</a> </p>
<p>Set the directory, keeping the filename the same.</p>
<pre>replaceDirectory "root/file.ext" "/directory/" == "/directory/file.ext"
Valid x =&gt; replaceDirectory x (takeDirectory x) `equalFilePath` x</pre>
<p class="src"><a id="v:combine" class="def">combine</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#combine" class="link">Source</a> </p>
<p>An alias for <code><a href="system-ospath-windows-internal.html#v:-60--47--62-" title="System.OsPath.Windows.Internal">&lt;/&gt;</a></code>.</p>
<p class="src"><a id="v:-60--47--62-" class="def">(&lt;/&gt;)</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> <span class="fixity">infixr 5</span> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#%3C%2F%3E" class="link">Source</a> </p>
<p>Combine two paths with a path separator. If the second path starts with a path separator or a drive letter, then it returns the second. The intention is that <code class="inline-code">readFile (dir <a href="system-ospath-windows-internal.html#v:-60--47--62-" title="System.OsPath.Windows.Internal">&lt;/&gt;</a> file)</code> will access the same file as <code class="inline-code">setCurrentDirectory dir; readFile file</code>.</p>
<pre>Posix:   "/directory" &lt;/&gt; "file.ext" == "/directory/file.ext"
Windows: "/directory" &lt;/&gt; "file.ext" == "/directory\\file.ext"
         "directory" &lt;/&gt; "/file.ext" == "/file.ext"
Valid x =&gt; (takeDirectory x &lt;/&gt; takeFileName x) `equalFilePath` x</pre>
<p>Combined:</p>
<pre>Posix:   "/" &lt;/&gt; "test" == "/test"
Posix:   "home" &lt;/&gt; "bob" == "home/bob"
Posix:   "x:" &lt;/&gt; "foo" == "x:/foo"
Windows: "C:\\foo" &lt;/&gt; "bar" == "C:\\foo\\bar"
Windows: "home" &lt;/&gt; "bob" == "home\\bob"</pre>
<p>Not combined:</p>
<pre>Posix:   "home" &lt;/&gt; "/bob" == "/bob"
Windows: "home" &lt;/&gt; "C:\\bob" == "C:\\bob"</pre>
<p>Not combined (tricky):</p>
<p>On Windows, if a filepath starts with a single slash, it is relative to the root of the current drive. In [1], this is (confusingly) referred to as an absolute path. The current behavior of <code><a href="system-ospath-windows-internal.html#v:-60--47--62-" title="System.OsPath.Windows.Internal">&lt;/&gt;</a></code> is to never combine these forms.</p>
<pre>Windows: "home" &lt;/&gt; "/bob" == "/bob"
Windows: "home" &lt;/&gt; "\\bob" == "\\bob"
Windows: "C:\\home" &lt;/&gt; "\\bob" == "\\bob"</pre>
<p>On Windows, from [1]: "If a file name begins with only a disk designator but not the backslash after the colon, it is interpreted as a relative path to the current directory on the drive with the specified letter." The current behavior of <code><a href="system-ospath-windows-internal.html#v:-60--47--62-" title="System.OsPath.Windows.Internal">&lt;/&gt;</a></code> is to never combine these forms.</p>
<pre>Windows: "D:\\foo" &lt;/&gt; "C:bar" == "C:bar"
Windows: "C:\\foo" &lt;/&gt; "C:bar" == "C:bar"</pre>
<p class="src"><a id="v:splitPath" class="def">splitPath</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; [<a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a>] <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#splitPath" class="link">Source</a> </p>
<p>Split a path by the directory separator.</p>
<pre>splitPath "/directory/file.ext" == ["/","directory/","file.ext"]
concat (splitPath x) == x
splitPath "test//item/" == ["test//","item/"]
splitPath "test/item/file" == ["test/","item/","file"]
splitPath "" == []
Windows: splitPath "c:\\test\\path" == ["c:\\","test\\","path"]
Posix:   splitPath "/file/test" == ["/","file/","test"]</pre>
<p class="src"><a id="v:joinPath" class="def">joinPath</a> :: [<a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a>] -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#joinPath" class="link">Source</a> </p>
<p>Join path elements back together.</p>
<pre>joinPath z == foldr (&lt;/&gt;) "" z
joinPath ["/","directory/","file.ext"] == "/directory/file.ext"
Valid x =&gt; joinPath (splitPath x) == x
joinPath [] == ""
Posix: joinPath ["test","file","path"] == "test/file/path"</pre>
<p class="src"><a id="v:splitDirectories" class="def">splitDirectories</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; [<a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a>] <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#splitDirectories" class="link">Source</a> </p>
<p>Just as <code><a href="system-ospath-windows-internal.html#v:splitPath" title="System.OsPath.Windows.Internal">splitPath</a></code>, but don't add the trailing slashes to each element.</p>
<pre>         splitDirectories "/directory/file.ext" == ["/","directory","file.ext"]
         splitDirectories "test/file" == ["test","file"]
         splitDirectories "/test/file" == ["/","test","file"]
Windows: splitDirectories "C:\\test\\file" == ["C:\\", "test", "file"]
         Valid x =&gt; joinPath (splitDirectories x) `equalFilePath` x
         splitDirectories "" == []
Windows: splitDirectories "C:\\test\\\\\\file" == ["C:\\", "test", "file"]
         splitDirectories "/test///file" == ["/","test","file"]</pre>
<a href="#g:5" id="g:5"><h2>Drive functions</h2></a><p class="src"><a id="v:splitDrive" class="def">splitDrive</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; (<a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a>, <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a>) <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#splitDrive" class="link">Source</a> </p>
<p>Split a path into a drive and a path. On Posix, / is a Drive.</p>
<pre>uncurry (&lt;&gt;) (splitDrive x) == x
Windows: splitDrive "file" == ("","file")
Windows: splitDrive "c:/file" == ("c:/","file")
Windows: splitDrive "c:\\file" == ("c:\\","file")
Windows: splitDrive "\\\\shared\\test" == ("\\\\shared\\","test")
Windows: splitDrive "\\\\shared" == ("\\\\shared","")
Windows: splitDrive "\\\\?\\UNC\\shared\\file" == ("\\\\?\\UNC\\shared\\","file")
Windows: splitDrive "\\\\?\\UNCshared\\file" == ("\\\\?\\","UNCshared\\file")
Windows: splitDrive "\\\\?\\d:\\file" == ("\\\\?\\d:\\","file")
Windows: splitDrive "/d" == ("","/d")
Posix:   splitDrive "/test" == ("/","test")
Posix:   splitDrive "//test" == ("//","test")
Posix:   splitDrive "test/file" == ("","test/file")
Posix:   splitDrive "file" == ("","file")</pre>
<p class="src"><a id="v:joinDrive" class="def">joinDrive</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#joinDrive" class="link">Source</a> </p>
<p>Join a drive and the rest of the path.</p>
<pre>Valid x =&gt; uncurry joinDrive (splitDrive x) == x
Windows: joinDrive "C:" "foo" == "C:foo"
Windows: joinDrive "C:\\" "bar" == "C:\\bar"
Windows: joinDrive "\\\\share" "foo" == "\\\\share\\foo"
Windows: joinDrive "/:" "foo" == "/:\\foo"</pre>
<p class="src"><a id="v:takeDrive" class="def">takeDrive</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#takeDrive" class="link">Source</a> </p>
<p>Get the drive from a filepath.</p>
<pre>takeDrive x == fst (splitDrive x)</pre>
<p class="src"><a id="v:hasDrive" class="def">hasDrive</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../base-4.21.0.0-8e62/data-bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#hasDrive" class="link">Source</a> </p>
<p>Does a path have a drive.</p>
<pre>not (hasDrive x) == null (takeDrive x)
Posix:   hasDrive "/foo" == True
Windows: hasDrive "C:\\foo" == True
Windows: hasDrive "C:foo" == True
         hasDrive "foo" == False
         hasDrive "" == False</pre>
<p class="src"><a id="v:dropDrive" class="def">dropDrive</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#dropDrive" class="link">Source</a> </p>
<p>Delete the drive, if it exists.</p>
<pre>dropDrive x == snd (splitDrive x)</pre>
<p class="src"><a id="v:isDrive" class="def">isDrive</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../base-4.21.0.0-8e62/data-bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#isDrive" class="link">Source</a> </p>
<p>Is an element a drive</p>
<pre>Posix:   isDrive "/" == True
Posix:   isDrive "/foo" == False
Windows: isDrive "C:\\" == True
Windows: isDrive "C:\\foo" == False
         isDrive "" == False</pre>
<a href="#g:6" id="g:6"><h2>Trailing slash functions</h2></a><p class="src"><a id="v:hasTrailingPathSeparator" class="def">hasTrailingPathSeparator</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../base-4.21.0.0-8e62/data-bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#hasTrailingPathSeparator" class="link">Source</a> </p>
<p>Is an item either a directory or the last character a path separator?</p>
<pre>hasTrailingPathSeparator "test" == False
hasTrailingPathSeparator "test/" == True</pre>
<p class="src"><a id="v:addTrailingPathSeparator" class="def">addTrailingPathSeparator</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#addTrailingPathSeparator" class="link">Source</a> </p>
<p>Add a trailing file path separator if one is not already present.</p>
<pre>hasTrailingPathSeparator (addTrailingPathSeparator x)
hasTrailingPathSeparator x ==&gt; addTrailingPathSeparator x == x
Posix:    addTrailingPathSeparator "test/rest" == "test/rest/"</pre>
<p class="src"><a id="v:dropTrailingPathSeparator" class="def">dropTrailingPathSeparator</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#dropTrailingPathSeparator" class="link">Source</a> </p>
<p>Remove any trailing path separators</p>
<pre>dropTrailingPathSeparator "file/test/" == "file/test"
          dropTrailingPathSeparator "/" == "/"
Windows:  dropTrailingPathSeparator "\\" == "\\"
Posix:    not (hasTrailingPathSeparator (dropTrailingPathSeparator x)) || isDrive x</pre>
<a href="#g:7" id="g:7"><h2>File name manipulations</h2></a><p class="src"><a id="v:normalise" class="def">normalise</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#normalise" class="link">Source</a> </p>
<p>Normalise a file</p>
<ul>
<li>// outside of the drive can be made blank</li>
<li>/ -&gt; <code><a href="system-ospath-windows-internal.html#v:pathSeparator" title="System.OsPath.Windows.Internal">pathSeparator</a></code>
</li>
<li>./ -&gt; ""</li>
</ul>
<p>Does not remove <code class="inline-code">".."</code>, because of symlinks.</p>
<pre>Posix:   normalise "/file/\\test////" == "/file/\\test/"
Posix:   normalise "/file/./test" == "/file/test"
Posix:   normalise "/test/file/../bob/fred/" == "/test/file/../bob/fred/"
Posix:   normalise "../bob/fred/" == "../bob/fred/"
Posix:   normalise "/a/../c" == "/a/../c"
Posix:   normalise "./bob/fred/" == "bob/fred/"
Windows: normalise "c:\\file/bob\\" == "C:\\file\\bob\\"
Windows: normalise "c:\\" == "C:\\"
Windows: normalise "c:\\\\\\\\" == "C:\\"
Windows: normalise "C:.\\" == "C:"
Windows: normalise "\\\\server\\test" == "\\\\server\\test"
Windows: normalise "//server/test" == "\\\\server\\test"
Windows: normalise "c:/file" == "C:\\file"
Windows: normalise "/file" == "\\file"
Windows: normalise "\\" == "\\"
Windows: normalise "/./" == "\\"
         normalise "." == "."
Posix:   normalise "./" == "./"
Posix:   normalise "./." == "./"
Posix:   normalise "/./" == "/"
Posix:   normalise "/" == "/"
Posix:   normalise "bob/fred/." == "bob/fred/"
Posix:   normalise "//home" == "/home"</pre>
<p class="src"><a id="v:equalFilePath" class="def">equalFilePath</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../base-4.21.0.0-8e62/data-bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#equalFilePath" class="link">Source</a> </p>
<p>Equality of two <code class="inline-code">FILEPATH</code>s. If you call <code class="inline-code">System.Directory.canonicalizePath</code> first this has a much better chance of working. Note that this doesn't follow symlinks or DOSNAM~1s.</p>
<p>Similar to <code><a href="system-ospath-windows-internal.html#v:normalise" title="System.OsPath.Windows.Internal">normalise</a></code>, this does not expand <code class="inline-code">".."</code>, because of symlinks.</p>
<pre>         x == y ==&gt; equalFilePath x y
         normalise x == normalise y ==&gt; equalFilePath x y
         equalFilePath "foo" "foo/"
         not (equalFilePath "/a/../c" "/c")
         not (equalFilePath "foo" "/foo")
Posix:   not (equalFilePath "foo" "FOO")
Windows: equalFilePath "foo" "FOO"
Windows: not (equalFilePath "C:" "C:/")</pre>
<p class="src"><a id="v:makeRelative" class="def">makeRelative</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#makeRelative" class="link">Source</a> </p>
<p>Contract a filename, based on a relative path. Note that the resulting path will never introduce <code class="inline-code">..</code> paths, as the presence of symlinks means <code class="inline-code">../b</code> may not reach <code class="inline-code">a/b</code> if it starts from <code class="inline-code">a/c</code>. For a worked example see <a href="http://neilmitchell.blogspot.co.uk/2015/10/filepaths-are-subtle-symlinks-are-hard.html">this blog post</a>.</p>
<p>The corresponding <code class="inline-code">makeAbsolute</code> function can be found in <code class="inline-code">System.Directory</code>.</p>
<pre>         makeRelative "/directory" "/directory/file.ext" == "file.ext"
         Valid x =&gt; makeRelative (takeDirectory x) x `equalFilePath` takeFileName x
         makeRelative x x == "."
         Valid x y =&gt; equalFilePath x y || (isRelative x &amp;&amp; makeRelative y x == x) || equalFilePath (y &lt;/&gt; makeRelative y x) x
Windows: makeRelative "C:\\Home" "c:\\home\\bob" == "bob"
Windows: makeRelative "C:\\Home" "c:/home/bob" == "bob"
Windows: makeRelative "C:\\Home" "D:\\Home\\Bob" == "D:\\Home\\Bob"
Windows: makeRelative "C:\\Home" "C:Home\\Bob" == "C:Home\\Bob"
Windows: makeRelative "/Home" "/home/bob" == "bob"
Windows: makeRelative "/" "//" == "//"
Posix:   makeRelative "/Home" "/home/bob" == "/home/bob"
Posix:   makeRelative "/home/" "/home/bob/foo/bar" == "bob/foo/bar"
Posix:   makeRelative "/fred" "bob" == "bob"
Posix:   makeRelative "/file/test" "/file/test/fred" == "fred"
Posix:   makeRelative "/file/test" "/file/test/fred/" == "fred/"
Posix:   makeRelative "some/path" "some/path/a/b/c" == "a/b/c"</pre>
<p class="src"><a id="v:isRelative" class="def">isRelative</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../base-4.21.0.0-8e62/data-bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#isRelative" class="link">Source</a> </p>
<p>Is a path relative, or is it fixed to the root?</p>
<pre>Windows: isRelative "path\\test" == True
Windows: isRelative "c:\\test" == False
Windows: isRelative "c:test" == True
Windows: isRelative "c:\\" == False
Windows: isRelative "c:/" == False
Windows: isRelative "c:" == True
Windows: isRelative "\\\\foo" == False
Windows: isRelative "\\\\?\\foo" == False
Windows: isRelative "\\\\?\\UNC\\foo" == False
Windows: isRelative "/foo" == True
Windows: isRelative "\\foo" == True
Posix:   isRelative "test/path" == True
Posix:   isRelative "/test" == False
Posix:   isRelative "/" == False</pre>
<p>According to [1]:</p>
<ul>
<li>"A UNC name of any format [is never relative]."</li>
<li>"You cannot use the "\?" prefix with a relative path."</li>
</ul>
<p class="src"><a id="v:isAbsolute" class="def">isAbsolute</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../base-4.21.0.0-8e62/data-bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#isAbsolute" class="link">Source</a> </p>
<pre>not . <a href="system-ospath-windows-internal.html#v:isRelative" title="System.OsPath.Windows.Internal">isRelative</a></pre>
<pre>isAbsolute x == not (isRelative x)</pre>
<p class="src"><a id="v:isValid" class="def">isValid</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../base-4.21.0.0-8e62/data-bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#isValid" class="link">Source</a> </p>
<p>Is a ShortByteString valid, i.e. could you create a file like it? This function checks for invalid names, and invalid characters, but does not check if length limits are exceeded, as these are typically filesystem dependent.</p>
<pre>         isValid "" == False
         isValid "\0" == False
Posix:   isValid "/random_ path:*" == True
Posix:   isValid x == not (null x)
Windows: isValid "c:\\test" == True
Windows: isValid "c:\\test:of_test" == False
Windows: isValid "test*" == False
Windows: isValid "c:\\test\\nul" == False
Windows: isValid "c:\\test\\prn.txt" == False
Windows: isValid "c:\\nul\\file" == False
Windows: isValid "\\\\" == False
Windows: isValid "\\\\\\foo" == False
Windows: isValid "\\\\?\\D:file" == False
Windows: isValid "foo\tbar" == False
Windows: isValid "nul .txt" == False
Windows: isValid " nul.txt" == True</pre>
<p class="src"><a id="v:makeValid" class="def">makeValid</a> :: <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> -&gt; <a href="../bytestring-0.12.2.0-2f68/data-bytestring-short.html#t:ShortByteString" title="Data.ByteString.Short">ShortByteString</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/src/System.OsPath.Windows.Internal.html#makeValid" class="link">Source</a> </p>
<p>Take a ShortByteString and make it valid; does not change already valid FILEPATHs.</p>
<pre>isValid (makeValid x)
isValid x ==&gt; makeValid x == x
makeValid "" == "_"
makeValid "file\0name" == "file_name"
Windows: makeValid "c:\\already\\/valid" == "c:\\already\\/valid"
Windows: makeValid "c:\\test:of_test" == "c:\\test_of_test"
Windows: makeValid "test*" == "test_"
Windows: makeValid "c:\\test\\nul" == "c:\\test\\nul_"
Windows: makeValid "c:\\test\\prn.txt" == "c:\\test\\prn_.txt"
Windows: makeValid "c:\\test/prn.txt" == "c:\\test/prn_.txt"
Windows: makeValid "c:\\nul\\file" == "c:\\nul_\\file"
Windows: makeValid "\\\\\\foo" == "\\\\drive"
Windows: makeValid "\\\\?\\D:file" == "\\\\?\\D:\\file"
Windows: makeValid "nul .txt" == "nul _.txt"</pre>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; The University of Glasgow and others<br>Licensed under a BSD-style license (see top of the page).<br>
    <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/System-OsPath-Windows-Internal.html" class="_attribution-link">https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/filepath-1.5.4.0-4765/System-OsPath-Windows-Internal.html</a>
  </p>
</div>
