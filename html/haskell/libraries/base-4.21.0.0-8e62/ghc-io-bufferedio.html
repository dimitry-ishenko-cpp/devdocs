<h1 class="caption">GHC.IO.BufferedIO</h1>
<div class="_haskell-api">
<table class="info">
<tr>
<th valign="top">Copyright</th>
<td>(c) The University of Glasgow 2008</td>
</tr>
<tr>
<th>License</th>
<td>see libraries/base/LICENSE</td>
</tr>
<tr>
<th>Maintainer</th>
<td>ghc-devs@haskell.org</td>
</tr>
<tr>
<th>Stability</th>
<td>internal</td>
</tr>
<tr>
<th>Portability</th>
<td>non-portable (GHC Extensions)</td>
</tr>
<tr>
<th>Safe Haskell</th>
<td>Safe</td>
</tr>
<tr>
<th>Language</th>
<td>Haskell2010</td>
</tr>
</table>
<div id="description">
<h4 class="caption">Description</h4>
<p>Class of buffered IO devices</p>
</div>
<p class="src">class <a id="t:BufferedIO" class="def">BufferedIO</a> dev where <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/ghc-internal-9.1201.0-3ad5/src/GHC.Internal.IO.BufferedIO.html#BufferedIO" class="link">Source</a> </p>
<p>The purpose of <code><a href="ghc-io-bufferedio.html#t:BufferedIO" title="GHC.IO.BufferedIO">BufferedIO</a></code> is to provide a common interface for I/O devices that can read and write data through a buffer. Devices that implement <code><a href="ghc-io-bufferedio.html#t:BufferedIO" title="GHC.IO.BufferedIO">BufferedIO</a></code> include ordinary files, memory-mapped files, and bytestrings. The underlying device implementing a <code><a href="system-io.html#v:Handle" title="System.IO">Handle</a></code> must provide <code><a href="ghc-io-bufferedio.html#t:BufferedIO" title="GHC.IO.BufferedIO">BufferedIO</a></code>.</p>
<div class="subs minimal">
<h4 class="caption">Minimal complete definition</h4>
<p class="src"><a href="ghc-io-bufferedio.html#v:newBuffer" title="GHC.IO.BufferedIO">newBuffer</a>, <a href="ghc-io-bufferedio.html#v:fillReadBuffer" title="GHC.IO.BufferedIO">fillReadBuffer</a>, <a href="ghc-io-bufferedio.html#v:fillReadBuffer0" title="GHC.IO.BufferedIO">fillReadBuffer0</a>, <a href="ghc-io-bufferedio.html#v:flushWriteBuffer" title="GHC.IO.BufferedIO">flushWriteBuffer</a>, <a href="ghc-io-bufferedio.html#v:flushWriteBuffer0" title="GHC.IO.BufferedIO">flushWriteBuffer0</a></p>
</div>
<div class="subs methods">
<h4 class="caption">Methods</h4>
<p class="src"><a id="v:newBuffer" class="def">newBuffer</a> :: dev -&gt; <a href="ghc-io-buffer.html#t:BufferState" title="GHC.IO.Buffer">BufferState</a> -&gt; <a href="prelude.html#t:IO" title="Prelude">IO</a> (<a href="ghc-io-buffer.html#t:Buffer" title="GHC.IO.Buffer">Buffer</a> <a href="data-word.html#t:Word8" title="Data.Word">Word8</a>) <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/ghc-internal-9.1201.0-3ad5/src/GHC.Internal.IO.BufferedIO.html#newBuffer" class="link">Source</a> </p>
<p>allocate a new buffer. The size of the buffer is at the discretion of the device; e.g. for a memory-mapped file the buffer will probably cover the entire file.</p>
<p class="src"><a id="v:fillReadBuffer" class="def">fillReadBuffer</a> :: dev -&gt; <a href="ghc-io-buffer.html#t:Buffer" title="GHC.IO.Buffer">Buffer</a> <a href="data-word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="prelude.html#t:IO" title="Prelude">IO</a> (<a href="data-int.html#t:Int" title="Data.Int">Int</a>, <a href="ghc-io-buffer.html#t:Buffer" title="GHC.IO.Buffer">Buffer</a> <a href="data-word.html#t:Word8" title="Data.Word">Word8</a>) <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/ghc-internal-9.1201.0-3ad5/src/GHC.Internal.IO.BufferedIO.html#fillReadBuffer" class="link">Source</a> </p>
<p>reads bytes into the buffer, blocking if there are no bytes available. Returns the number of bytes read (zero indicates end-of-file), and the new buffer.</p>
<p class="src"><a id="v:fillReadBuffer0" class="def">fillReadBuffer0</a> :: dev -&gt; <a href="ghc-io-buffer.html#t:Buffer" title="GHC.IO.Buffer">Buffer</a> <a href="data-word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="prelude.html#t:IO" title="Prelude">IO</a> (<a href="data-maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="data-int.html#t:Int" title="Data.Int">Int</a>, <a href="ghc-io-buffer.html#t:Buffer" title="GHC.IO.Buffer">Buffer</a> <a href="data-word.html#t:Word8" title="Data.Word">Word8</a>) <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/ghc-internal-9.1201.0-3ad5/src/GHC.Internal.IO.BufferedIO.html#fillReadBuffer0" class="link">Source</a> </p>
<p>reads bytes into the buffer without blocking. Returns the number of bytes read (Nothing indicates end-of-file), and the new buffer.</p>
<p class="src"><a id="v:emptyWriteBuffer" class="def">emptyWriteBuffer</a> :: dev -&gt; <a href="ghc-io-buffer.html#t:Buffer" title="GHC.IO.Buffer">Buffer</a> <a href="data-word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="prelude.html#t:IO" title="Prelude">IO</a> (<a href="ghc-io-buffer.html#t:Buffer" title="GHC.IO.Buffer">Buffer</a> <a href="data-word.html#t:Word8" title="Data.Word">Word8</a>) <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/ghc-internal-9.1201.0-3ad5/src/GHC.Internal.IO.BufferedIO.html#emptyWriteBuffer" class="link">Source</a> </p>
<p>Prepares an empty write buffer. This lets the device decide how to set up a write buffer: the buffer may need to point to a specific location in memory, for example. This is typically used by the client when switching from reading to writing on a buffered read/write device.</p>
<p>There is no corresponding operation for read buffers, because before reading the client will always call <code><a href="ghc-io-bufferedio.html#v:fillReadBuffer" title="GHC.IO.BufferedIO">fillReadBuffer</a></code>.</p>
<p class="src"><a id="v:flushWriteBuffer" class="def">flushWriteBuffer</a> :: dev -&gt; <a href="ghc-io-buffer.html#t:Buffer" title="GHC.IO.Buffer">Buffer</a> <a href="data-word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="prelude.html#t:IO" title="Prelude">IO</a> (<a href="ghc-io-buffer.html#t:Buffer" title="GHC.IO.Buffer">Buffer</a> <a href="data-word.html#t:Word8" title="Data.Word">Word8</a>) <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/ghc-internal-9.1201.0-3ad5/src/GHC.Internal.IO.BufferedIO.html#flushWriteBuffer" class="link">Source</a> </p>
<p>Flush all the data from the supplied write buffer out to the device. The returned buffer should be empty, and ready for writing.</p>
<p class="src"><a id="v:flushWriteBuffer0" class="def">flushWriteBuffer0</a> :: dev -&gt; <a href="ghc-io-buffer.html#t:Buffer" title="GHC.IO.Buffer">Buffer</a> <a href="data-word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="prelude.html#t:IO" title="Prelude">IO</a> (<a href="data-int.html#t:Int" title="Data.Int">Int</a>, <a href="ghc-io-buffer.html#t:Buffer" title="GHC.IO.Buffer">Buffer</a> <a href="data-word.html#t:Word8" title="Data.Word">Word8</a>) <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/ghc-internal-9.1201.0-3ad5/src/GHC.Internal.IO.BufferedIO.html#flushWriteBuffer0" class="link">Source</a> </p>
<p>Flush data from the supplied write buffer out to the device without blocking. Returns the number of bytes written and the remaining buffer.</p>
</div>
<div class="subs instances">
<h5 class="instances details-toggle-control details-toggle" data-details-id="i:BufferedIO">Instances</h5>
<details id="i:BufferedIO" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table>
<tr>
<td class="src clearfix">
 <a href="ghc-io-bufferedio.html#t:BufferedIO" title="GHC.IO.BufferedIO">BufferedIO</a> <a href="ghc-io-fd.html#t:FD" title="GHC.IO.FD">FD</a> <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/ghc-internal-9.1201.0-3ad5/src/GHC.Internal.IO.FD.html#line-149" class="link">Source</a> </td>
<td class="doc"><p><span class="version">Since: base-4.1.0.0</span></p></td>
</tr>
<tr><td colspan="2"><details id="i:ic:BufferedIO:BufferedIO:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/ghc-internal-9.1201.0-3ad5/GHC-Internal-IO-FD.html">GHC.Internal.IO.FD</a></p> <div class="subs methods">
<h4 class="caption">Methods</h4>
<p class="src"><a href="#v:newBuffer">newBuffer</a> :: <a href="ghc-io-fd.html#t:FD" title="GHC.IO.FD">FD</a> -&gt; <a href="ghc-io-buffer.html#t:BufferState" title="GHC.IO.Buffer">BufferState</a> -&gt; <a href="prelude.html#t:IO" title="Prelude">IO</a> (<a href="ghc-io-buffer.html#t:Buffer" title="GHC.IO.Buffer">Buffer</a> <a href="data-word.html#t:Word8" title="Data.Word">Word8</a>) <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/ghc-internal-9.1201.0-3ad5/src/GHC.Internal.IO.BufferedIO.html#newBuffer" class="link">Source</a> </p>
<p class="src"><a href="#v:fillReadBuffer">fillReadBuffer</a> :: <a href="ghc-io-fd.html#t:FD" title="GHC.IO.FD">FD</a> -&gt; <a href="ghc-io-buffer.html#t:Buffer" title="GHC.IO.Buffer">Buffer</a> <a href="data-word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="prelude.html#t:IO" title="Prelude">IO</a> (<a href="data-int.html#t:Int" title="Data.Int">Int</a>, <a href="ghc-io-buffer.html#t:Buffer" title="GHC.IO.Buffer">Buffer</a> <a href="data-word.html#t:Word8" title="Data.Word">Word8</a>) <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/ghc-internal-9.1201.0-3ad5/src/GHC.Internal.IO.BufferedIO.html#fillReadBuffer" class="link">Source</a> </p>
<p class="src"><a href="#v:fillReadBuffer0">fillReadBuffer0</a> :: <a href="ghc-io-fd.html#t:FD" title="GHC.IO.FD">FD</a> -&gt; <a href="ghc-io-buffer.html#t:Buffer" title="GHC.IO.Buffer">Buffer</a> <a href="data-word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="prelude.html#t:IO" title="Prelude">IO</a> (<a href="data-maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="data-int.html#t:Int" title="Data.Int">Int</a>, <a href="ghc-io-buffer.html#t:Buffer" title="GHC.IO.Buffer">Buffer</a> <a href="data-word.html#t:Word8" title="Data.Word">Word8</a>) <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/ghc-internal-9.1201.0-3ad5/src/GHC.Internal.IO.BufferedIO.html#fillReadBuffer0" class="link">Source</a> </p>
<p class="src"><a href="#v:emptyWriteBuffer">emptyWriteBuffer</a> :: <a href="ghc-io-fd.html#t:FD" title="GHC.IO.FD">FD</a> -&gt; <a href="ghc-io-buffer.html#t:Buffer" title="GHC.IO.Buffer">Buffer</a> <a href="data-word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="prelude.html#t:IO" title="Prelude">IO</a> (<a href="ghc-io-buffer.html#t:Buffer" title="GHC.IO.Buffer">Buffer</a> <a href="data-word.html#t:Word8" title="Data.Word">Word8</a>) <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/ghc-internal-9.1201.0-3ad5/src/GHC.Internal.IO.BufferedIO.html#emptyWriteBuffer" class="link">Source</a> </p>
<p class="src"><a href="#v:flushWriteBuffer">flushWriteBuffer</a> :: <a href="ghc-io-fd.html#t:FD" title="GHC.IO.FD">FD</a> -&gt; <a href="ghc-io-buffer.html#t:Buffer" title="GHC.IO.Buffer">Buffer</a> <a href="data-word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="prelude.html#t:IO" title="Prelude">IO</a> (<a href="ghc-io-buffer.html#t:Buffer" title="GHC.IO.Buffer">Buffer</a> <a href="data-word.html#t:Word8" title="Data.Word">Word8</a>) <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/ghc-internal-9.1201.0-3ad5/src/GHC.Internal.IO.BufferedIO.html#flushWriteBuffer" class="link">Source</a> </p>
<p class="src"><a href="#v:flushWriteBuffer0">flushWriteBuffer0</a> :: <a href="ghc-io-fd.html#t:FD" title="GHC.IO.FD">FD</a> -&gt; <a href="ghc-io-buffer.html#t:Buffer" title="GHC.IO.Buffer">Buffer</a> <a href="data-word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="prelude.html#t:IO" title="Prelude">IO</a> (<a href="data-int.html#t:Int" title="Data.Int">Int</a>, <a href="ghc-io-buffer.html#t:Buffer" title="GHC.IO.Buffer">Buffer</a> <a href="data-word.html#t:Word8" title="Data.Word">Word8</a>) <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/ghc-internal-9.1201.0-3ad5/src/GHC.Internal.IO.BufferedIO.html#flushWriteBuffer0" class="link">Source</a> </p>
</div></details></td></tr>
</table></details>
</div>
<p class="src"><a id="v:readBuf" class="def">readBuf</a> :: <a href="ghc-io-device.html#t:RawIO" title="GHC.IO.Device">RawIO</a> dev =&gt; dev -&gt; <a href="ghc-io-buffer.html#t:Buffer" title="GHC.IO.Buffer">Buffer</a> <a href="data-word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="prelude.html#t:IO" title="Prelude">IO</a> (<a href="data-int.html#t:Int" title="Data.Int">Int</a>, <a href="ghc-io-buffer.html#t:Buffer" title="GHC.IO.Buffer">Buffer</a> <a href="data-word.html#t:Word8" title="Data.Word">Word8</a>) <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/ghc-internal-9.1201.0-3ad5/src/GHC.Internal.IO.BufferedIO.html#readBuf" class="link">Source</a> </p>
<p class="src"><a id="v:readBufNonBlocking" class="def">readBufNonBlocking</a> :: <a href="ghc-io-device.html#t:RawIO" title="GHC.IO.Device">RawIO</a> dev =&gt; dev -&gt; <a href="ghc-io-buffer.html#t:Buffer" title="GHC.IO.Buffer">Buffer</a> <a href="data-word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="prelude.html#t:IO" title="Prelude">IO</a> (<a href="data-maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="data-int.html#t:Int" title="Data.Int">Int</a>, <a href="ghc-io-buffer.html#t:Buffer" title="GHC.IO.Buffer">Buffer</a> <a href="data-word.html#t:Word8" title="Data.Word">Word8</a>) <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/ghc-internal-9.1201.0-3ad5/src/GHC.Internal.IO.BufferedIO.html#readBufNonBlocking" class="link">Source</a> </p>
<p class="src"><a id="v:writeBuf" class="def">writeBuf</a> :: <a href="ghc-io-device.html#t:RawIO" title="GHC.IO.Device">RawIO</a> dev =&gt; dev -&gt; <a href="ghc-io-buffer.html#t:Buffer" title="GHC.IO.Buffer">Buffer</a> <a href="data-word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="prelude.html#t:IO" title="Prelude">IO</a> (<a href="ghc-io-buffer.html#t:Buffer" title="GHC.IO.Buffer">Buffer</a> <a href="data-word.html#t:Word8" title="Data.Word">Word8</a>) <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/ghc-internal-9.1201.0-3ad5/src/GHC.Internal.IO.BufferedIO.html#writeBuf" class="link">Source</a> </p>
<p class="src"><a id="v:writeBufNonBlocking" class="def">writeBufNonBlocking</a> :: <a href="ghc-io-device.html#t:RawIO" title="GHC.IO.Device">RawIO</a> dev =&gt; dev -&gt; <a href="ghc-io-buffer.html#t:Buffer" title="GHC.IO.Buffer">Buffer</a> <a href="data-word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="prelude.html#t:IO" title="Prelude">IO</a> (<a href="data-int.html#t:Int" title="Data.Int">Int</a>, <a href="ghc-io-buffer.html#t:Buffer" title="GHC.IO.Buffer">Buffer</a> <a href="data-word.html#t:Word8" title="Data.Word">Word8</a>) <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/ghc-internal-9.1201.0-3ad5/src/GHC.Internal.IO.BufferedIO.html#writeBufNonBlocking" class="link">Source</a> </p>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; The University of Glasgow and others<br>Licensed under a BSD-style license (see top of the page).<br>
    <a href="https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/base-4.21.0.0-8e62/GHC-IO-BufferedIO.html" class="_attribution-link">https://downloads.haskell.org/~ghc/9.12.1/docs/libraries/base-4.21.0.0-8e62/GHC-IO-BufferedIO.html</a>
  </p>
</div>
