<h1>The Array class and coefficient-wise operations</h1>      <div> <p>This page aims to provide an overview and explanations on how to use <a href="namespaceeigen.html" title="Namespace containing all symbols from the Eigen library.">Eigen</a>'s <a href="classeigen_1_1array.html" title="General-purpose arrays with easy API for coefficient-wise operations.">Array</a> class.</p> <h1>
<a id="TutorialArrayClassIntro"></a> What is the Array class?</h1> <p>The <a href="classeigen_1_1array.html" title="General-purpose arrays with easy API for coefficient-wise operations.">Array</a> class provides general-purpose arrays, as opposed to the <a href="classeigen_1_1matrix.html" title="The matrix class, also used for vectors and row-vectors.">Matrix</a> class which is intended for linear algebra. Furthermore, the <a href="classeigen_1_1array.html" title="General-purpose arrays with easy API for coefficient-wise operations.">Array</a> class provides an easy way to perform coefficient-wise operations, which might not have a linear algebraic meaning, such as adding a constant to every coefficient in the array or multiplying two arrays coefficient-wise.</p> <h1>
<a id="TutorialArrayClassTypes"></a> Array types</h1> <p><a href="classeigen_1_1array.html" title="General-purpose arrays with easy API for coefficient-wise operations.">Array</a> is a class template taking the same template parameters as <a href="classeigen_1_1matrix.html" title="The matrix class, also used for vectors and row-vectors.">Matrix</a>. As with <a href="classeigen_1_1matrix.html" title="The matrix class, also used for vectors and row-vectors.">Matrix</a>, the first three template parameters are mandatory: </p>
<pre data-language="cpp">Array&lt;typename Scalar, int RowsAtCompileTime, int ColsAtCompileTime&gt;
</pre>
<p> The last three template parameters are optional. Since this is exactly the same as for <a href="classeigen_1_1matrix.html" title="The matrix class, also used for vectors and row-vectors.">Matrix</a>, we won't explain it again here and just refer to <a href="group__tutorialmatrixclass.html">The Matrix class</a>.</p> <p><a href="namespaceeigen.html" title="Namespace containing all symbols from the Eigen library.">Eigen</a> also provides typedefs for some common cases, in a way that is similar to the <a href="classeigen_1_1matrix.html" title="The matrix class, also used for vectors and row-vectors.">Matrix</a> typedefs but with some slight differences, as the word "array" is used for both 1-dimensional and 2-dimensional arrays. We adopt the convention that typedefs of the form ArrayNt stand for 1-dimensional arrays, where N and t are the size and the scalar type, as in the <a href="classeigen_1_1matrix.html" title="The matrix class, also used for vectors and row-vectors.">Matrix</a> typedefs explained on <a href="group__tutorialmatrixclass.html">this page</a>. For 2-dimensional arrays, we use typedefs of the form ArrayNNt. Some examples are shown in the following table:</p> <table> <tr> <th>Type </th>
<th>Typedef </th>
</tr> <tr> <td>
<pre data-language="cpp">Array&lt;float,Dynamic,1&gt; 
</pre> </td>
<td>
<pre data-language="cpp">ArrayXf 
</pre> </td>
</tr> <tr> <td>
<pre data-language="cpp">Array&lt;float,3,1&gt; 
</pre> </td>
<td>
<pre data-language="cpp">Array3f 
</pre> </td>
</tr> <tr> <td>
<pre data-language="cpp">Array&lt;double,Dynamic,Dynamic&gt; 
</pre> </td>
<td>
<pre data-language="cpp">ArrayXXd 
</pre> </td>
</tr> <tr> <td>
<pre data-language="cpp">Array&lt;double,3,3&gt; 
</pre> </td>
<td>
<pre data-language="cpp">Array33d 
</pre> </td>
</tr> </table> <h1>
<a id="TutorialArrayClassAccess"></a> Accessing values inside an Array</h1> <p>The parenthesis operator is overloaded to provide write and read access to the coefficients of an array, just as with matrices. Furthermore, the <code>&lt;&lt;</code> operator can be used to initialize arrays (via the comma initializer) or to print them.</p> <table> <tr> <th>Example:</th>
<th>Output: </th>
</tr> <tr> <td>
<pre data-language="cpp"><span>#include &lt;Eigen/Dense&gt;</span>
<span>#include &lt;iostream&gt;</span>
 
<span>using namespace </span><a href="namespaceeigen.html">Eigen</a>;
<span>using namespace </span>std;
 
<span>int</span> main()
{
  ArrayXXf  m(2,2);
  
  <span>// assign some values coefficient by coefficient</span>
  m(0,0) = 1.0; m(0,1) = 2.0;
  m(1,0) = 3.0; m(1,1) = m(0,1) + m(1,0);
  
  <span>// print values to standard output</span>
  cout &lt;&lt; m &lt;&lt; endl &lt;&lt; endl;
 
  <span>// using the comma-initializer is also allowed</span>
  m &lt;&lt; 1.0,2.0,
       3.0,4.0;
     
  <span>// print values to standard output</span>
  cout &lt;&lt; m &lt;&lt; endl;
}</pre> </td>
<td>
<pre>1 2
3 5

1 2
3 4
</pre> </td>
</tr> </table> <p>For more information about the comma initializer, see <a href="group__tutorialadvancedinitialization.html">Advanced initialization</a>.</p> <h1>
<a id="TutorialArrayClassAddSub"></a> Addition and subtraction</h1> <p>Adding and subtracting two arrays is the same as for matrices. The operation is valid if both arrays have the same size, and the addition or subtraction is done coefficient-wise.</p> <p>Arrays also support expressions of the form <code>array + scalar</code> which add a scalar to each coefficient in the array. This provides a functionality that is not directly available for <a href="classeigen_1_1matrix.html" title="The matrix class, also used for vectors and row-vectors.">Matrix</a> objects.</p> <table> <tr> <th>Example:</th>
<th>Output: </th>
</tr> <tr> <td>
<pre data-language="cpp"><span>#include &lt;Eigen/Dense&gt;</span>
<span>#include &lt;iostream&gt;</span>
 
<span>using namespace </span><a href="namespaceeigen.html">Eigen</a>;
<span>using namespace </span>std;
 
<span>int</span> main()
{
  ArrayXXf a(3,3);
  ArrayXXf b(3,3);
  a &lt;&lt; 1,2,3,
       4,5,6,
       7,8,9;
  b &lt;&lt; 1,2,3,
       1,2,3,
       1,2,3;
       
  <span>// Adding two arrays</span>
  cout &lt;&lt; <span>"a + b = "</span> &lt;&lt; endl &lt;&lt; a + b &lt;&lt; endl &lt;&lt; endl;
 
  <span>// Subtracting a scalar from an array</span>
  cout &lt;&lt; <span>"a - 2 = "</span> &lt;&lt; endl &lt;&lt; a - 2 &lt;&lt; endl;
}
</pre> </td>
<td>
<pre>a + b = 
 2  4  6
 5  7  9
 8 10 12

a - 2 = 
-1  0  1
 2  3  4
 5  6  7
</pre> </td>
</tr> </table> <h1>
<a id="TutorialArrayClassMult"></a> Array multiplication</h1> <p>First of all, of course you can multiply an array by a scalar, this works in the same way as matrices. Where arrays are fundamentally different from matrices, is when you multiply two together. Matrices interpret multiplication as matrix product and arrays interpret multiplication as coefficient-wise product. Thus, two arrays can be multiplied if and only if they have the same dimensions.</p> <table> <tr> <th>Example:</th>
<th>Output: </th>
</tr> <tr> <td>
<pre data-language="cpp"><span>#include &lt;Eigen/Dense&gt;</span>
<span>#include &lt;iostream&gt;</span>
 
<span>using namespace </span><a href="namespaceeigen.html">Eigen</a>;
<span>using namespace </span>std;
 
<span>int</span> main()
{
  ArrayXXf a(2,2);
  ArrayXXf b(2,2);
  a &lt;&lt; 1,2,
       3,4;
  b &lt;&lt; 5,6,
       7,8;
  cout &lt;&lt; <span>"a * b = "</span> &lt;&lt; endl &lt;&lt; a * b &lt;&lt; endl;
}
</pre> </td>
<td>
<pre>a * b = 
 5 12
21 32
</pre> </td>
</tr> </table> <h1>
<a id="TutorialArrayClassCwiseOther"></a> Other coefficient-wise operations</h1> <p>The <a href="classeigen_1_1array.html" title="General-purpose arrays with easy API for coefficient-wise operations.">Array</a> class defines other coefficient-wise operations besides the addition, subtraction and multiplication operators described above. For example, the <a href="group__tutorialarrayclass.html">.abs() </a> method takes the absolute value of each coefficient, while <a href="group__tutorialarrayclass.html">.sqrt() </a> computes the square root of the coefficients. If you have two arrays of the same size, you can call <a href="group__tutorialarrayclass.html">.min(.) </a> to construct the array whose coefficients are the minimum of the corresponding coefficients of the two given arrays. These operations are illustrated in the following example.</p> <table> <tr> <th>Example:</th>
<th>Output: </th>
</tr> <tr> <td>
<pre data-language="cpp"><span>#include &lt;Eigen/Dense&gt;</span>
<span>#include &lt;iostream&gt;</span>
 
<span>using namespace </span><a href="namespaceeigen.html">Eigen</a>;
<span>using namespace </span>std;
 
<span>int</span> main()
{
  ArrayXf a = <a href="classeigen_1_1densebase.html#ae814abb451b48ed872819192dc188c19">ArrayXf::Random</a>(5);
  a *= 2;
  cout &lt;&lt; <span>"a ="</span> &lt;&lt; endl 
       &lt;&lt; a &lt;&lt; endl;
  cout &lt;&lt; <span>"a.abs() ="</span> &lt;&lt; endl 
       &lt;&lt; a.abs() &lt;&lt; endl;
  cout &lt;&lt; <span>"a.abs().sqrt() ="</span> &lt;&lt; endl 
       &lt;&lt; a.abs().sqrt() &lt;&lt; endl;
  cout &lt;&lt; <span>"a.min(a.abs().sqrt()) ="</span> &lt;&lt; endl 
       &lt;&lt; a.min(a.abs().sqrt()) &lt;&lt; endl;
}</pre> </td>
<td>
<pre>a =
  1.36
-0.422
  1.13
  1.19
  1.65
a.abs() =
 1.36
0.422
 1.13
 1.19
 1.65
a.abs().sqrt() =
1.17
0.65
1.06
1.09
1.28
a.min(a.abs().sqrt()) =
  1.17
-0.422
  1.06
  1.09
  1.28
</pre> </td>
</tr> </table> <p>More coefficient-wise operations can be found in the <a href="group__quickrefpage.html">Quick reference guide</a>.</p> <h1>
<a id="TutorialArrayClassConvert"></a> Converting between array and matrix expressions</h1> <p>When should you use objects of the <a href="classeigen_1_1matrix.html" title="The matrix class, also used for vectors and row-vectors.">Matrix</a> class and when should you use objects of the <a href="classeigen_1_1array.html" title="General-purpose arrays with easy API for coefficient-wise operations.">Array</a> class? You cannot apply <a href="classeigen_1_1matrix.html" title="The matrix class, also used for vectors and row-vectors.">Matrix</a> operations on arrays, or <a href="classeigen_1_1array.html" title="General-purpose arrays with easy API for coefficient-wise operations.">Array</a> operations on matrices. Thus, if you need to do linear algebraic operations such as matrix multiplication, then you should use matrices; if you need to do coefficient-wise operations, then you should use arrays. However, sometimes it is not that simple, but you need to use both <a href="classeigen_1_1matrix.html" title="The matrix class, also used for vectors and row-vectors.">Matrix</a> and <a href="classeigen_1_1array.html" title="General-purpose arrays with easy API for coefficient-wise operations.">Array</a> operations. In that case, you need to convert a matrix to an array or reversely. This gives access to all operations regardless of the choice of declaring objects as arrays or as matrices.</p> <p><a href="classeigen_1_1matrixbase.html">Matrix expressions </a> have an <a href="classeigen_1_1matrixbase.html#a354c33eec32ceb4193d002f4d41c0497">.array() </a> method that 'converts' them into <a href="classeigen_1_1arraybase.html">array expressions</a>, so that coefficient-wise operations can be applied easily. Conversely, <a href="classeigen_1_1arraybase.html">array expressions </a> have a <a href="classeigen_1_1arraybase.html#af01e9ea8087e390af8af453bbe4c276c">.matrix() </a> method. As with all <a href="namespaceeigen.html" title="Namespace containing all symbols from the Eigen library.">Eigen</a> expression abstractions, this doesn't have any runtime cost (provided that you let your compiler optimize). Both <a href="classeigen_1_1matrixbase.html#a354c33eec32ceb4193d002f4d41c0497">.array() </a> and <a href="classeigen_1_1arraybase.html#af01e9ea8087e390af8af453bbe4c276c">.matrix() </a> can be used as rvalues and as lvalues.</p> <p>Mixing matrices and arrays in an expression is forbidden with <a href="namespaceeigen.html" title="Namespace containing all symbols from the Eigen library.">Eigen</a>. For instance, you cannot add a matrix and array directly; the operands of a <code>+</code> operator should either both be matrices or both be arrays. However, it is easy to convert from one to the other with <a href="classeigen_1_1matrixbase.html#a354c33eec32ceb4193d002f4d41c0497">.array() </a> and <a href="classeigen_1_1arraybase.html#af01e9ea8087e390af8af453bbe4c276c">.matrix()</a>. The exception to this rule is the assignment operator: it is allowed to assign a matrix expression to an array variable, or to assign an array expression to a matrix variable.</p> <p>The following example shows how to use array operations on a <a href="classeigen_1_1matrix.html" title="The matrix class, also used for vectors and row-vectors.">Matrix</a> object by employing the <a href="classeigen_1_1matrixbase.html#a354c33eec32ceb4193d002f4d41c0497">.array() </a> method. For example, the statement <code>result = m.array() * n.array()</code> takes two matrices <code>m</code> and <code>n</code>, converts them both to an array, uses to multiply them coefficient-wise and assigns the result to the matrix variable <code>result</code> (this is legal because <a href="namespaceeigen.html" title="Namespace containing all symbols from the Eigen library.">Eigen</a> allows assigning array expressions to matrix variables).</p> <p>As a matter of fact, this usage case is so common that <a href="namespaceeigen.html" title="Namespace containing all symbols from the Eigen library.">Eigen</a> provides a <a href="group__tutorialarrayclass.html">const .cwiseProduct(.) </a> method for matrices to compute the coefficient-wise product. This is also shown in the example program.</p> <table> <tr> <th>Example:</th>
<th>Output: </th>
</tr> <tr> <td>
<pre data-language="cpp"><span>#include &lt;Eigen/Dense&gt;</span>
<span>#include &lt;iostream&gt;</span>
 
<span>using namespace </span><a href="namespaceeigen.html">Eigen</a>;
<span>using namespace </span>std;
 
<span>int</span> main()
{
  MatrixXf m(2,2);
  MatrixXf n(2,2);
  MatrixXf result(2,2);
 
  m &lt;&lt; 1,2,
       3,4;
  n &lt;&lt; 5,6,
       7,8;
 
  result = m * n;
  cout &lt;&lt; <span>"-- Matrix m*n: --"</span> &lt;&lt; endl &lt;&lt; result &lt;&lt; endl &lt;&lt; endl;
  result = m.array() * n.array();
  cout &lt;&lt; <span>"-- Array m*n: --"</span> &lt;&lt; endl &lt;&lt; result &lt;&lt; endl &lt;&lt; endl;
  result = m.cwiseProduct(n);
  cout &lt;&lt; <span>"-- With cwiseProduct: --"</span> &lt;&lt; endl &lt;&lt; result &lt;&lt; endl &lt;&lt; endl;
  result = m.array() + 4;
  cout &lt;&lt; <span>"-- Array m + 4: --"</span> &lt;&lt; endl &lt;&lt; result &lt;&lt; endl &lt;&lt; endl;
}
</pre> </td>
<td>
<pre>-- Matrix m*n: --
19 22
43 50

-- Array m*n: --
 5 12
21 32

-- With cwiseProduct: --
 5 12
21 32

-- Array m + 4: --
5 6
7 8

</pre> </td>
</tr> </table> <p>Similarly, if <code>array1</code> and <code>array2</code> are arrays, then the expression <code>array1.matrix() * array2.matrix()</code> computes their matrix product.</p> <p>Here is a more advanced example. The expression <code>(m.array() + 4).matrix() * m</code> adds 4 to every coefficient in the matrix <code>m</code> and then computes the matrix product of the result with <code>m</code>. Similarly, the expression <code>(m.array() * n.array()).matrix() * m</code> computes the coefficient-wise product of the matrices <code>m</code> and <code>n</code> and then the matrix product of the result with <code>m</code>.</p> <table> <tr> <th>Example:</th>
<th>Output: </th>
</tr> <tr> <td>
<pre data-language="cpp"><span>#include &lt;Eigen/Dense&gt;</span>
<span>#include &lt;iostream&gt;</span>
 
<span>using namespace </span><a href="namespaceeigen.html">Eigen</a>;
<span>using namespace </span>std;
 
<span>int</span> main()
{
  MatrixXf m(2,2);
  MatrixXf n(2,2);
  MatrixXf result(2,2);
 
  m &lt;&lt; 1,2,
       3,4;
  n &lt;&lt; 5,6,
       7,8;
  
  result = (m.array() + 4).matrix() * m;
  cout &lt;&lt; <span>"-- Combination 1: --"</span> &lt;&lt; endl &lt;&lt; result &lt;&lt; endl &lt;&lt; endl;
  result = (m.array() * n.array()).matrix() * m;
  cout &lt;&lt; <span>"-- Combination 2: --"</span> &lt;&lt; endl &lt;&lt; result &lt;&lt; endl &lt;&lt; endl;
}
</pre> </td>
<td>
<pre>-- Combination 1: --
23 34
31 46

-- Combination 2: --
 41  58
117 170

</pre> </td>
</tr> </table> </div> <div class="_attribution">
  <p class="_attribution-p">
    &copy; Eigen.<br>Licensed under the MPL2 License.<br>
    <a href="https://eigen.tuxfamily.org/dox/group__TutorialArrayClass.html" class="_attribution-link">https://eigen.tuxfamily.org/dox/group__TutorialArrayClass.html</a>
  </p>
</div>
