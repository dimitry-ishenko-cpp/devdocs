<h1 id="page-subtitle">Form generation</h1>      <p>Describes how to generate and manipulate forms and process form submissions.</p> <p>Drupal provides a Form API in order to achieve consistency in its form processing and presentation, while simplifying code and reducing the amount of HTML that must be explicitly generated by a module.</p> <h3 id="generating_forms">Creating forms</h3> <p>Forms are defined as classes that implement the <a href="../../../core-lib-drupal-core-form-forminterface.php/interface/forminterface/8.1.x.html" title="Provides an interface for a Form." class="local">\Drupal\Core\Form\FormInterface</a> and are built using the <a href="../../../core-lib-drupal-core-form-formbuilder.php/class/formbuilder/8.1.x.html" title="Provides form building and processing." class="local">\Drupal\Core\Form\FormBuilder</a> class. Drupal provides a couple of utility classes that can be extended as a starting point for most basic forms, the most commonly used of which is <a href="../../../core-lib-drupal-core-form-formbase.php/class/formbase/8.1.x.html" title="Provides a base class for forms." class="local">\Drupal\Core\Form\FormBase</a>. FormBuilder handles the low level processing of forms such as rendering the necessary HTML, initial processing of incoming $_POST data, and delegating to your implementation of FormInterface for validation and processing of submitted data.</p> <p>Here is an example of a Form class:</p> <pre class="php" data-language="php">namespace Drupal\mymodule\Form;

use Drupal\Core\Form\FormBase;
use Drupal\Core\Form\FormStateInterface;

class ExampleForm extends FormBase {
  public function getFormId() {
    // Unique ID of the form.
    return 'example_form';
  }

  public function buildForm(array $form, FormStateInterface $form_state) {
    // Create a $form API array.
    $form['phone_number'] = array(
      '#type' =&gt; 'tel',
      '#title' =&gt; $this-&gt;t('Your phone number')
    );
    return $form;
  }

  public function validateForm(array &amp;$form, FormStateInterface $form_state) {
    // Validate submitted form data.
  }

  public function submitForm(array &amp;$form, FormStateInterface $form_state) {
    // Handle submitted form data.
  }
}
</pre>
<h3 id="retrieving_forms">Retrieving and displaying forms</h3> <p><a href="../../../core-lib-drupal.php/function/drupal-formbuilder/8.1.x.html" title="Returns the form builder service." class="local">\Drupal::formBuilder</a>()-&gt;getForm() should be used to handle retrieving, processing, and displaying a rendered HTML form. Given the ExampleForm defined above, <a href="../../../core-lib-drupal.php/function/drupal-formbuilder/8.1.x.html" title="Returns the form builder service." class="local">\Drupal::formBuilder</a>()-&gt;getForm('Drupal\mymodule\Form\ExampleForm') would return the rendered HTML of the form defined by ExampleForm::buildForm(), or call the validateForm() and submitForm(), methods depending on the current processing state.</p> <p>The argument to <a href="../../../core-lib-drupal.php/function/drupal-formbuilder/8.1.x.html" title="Returns the form builder service." class="local">\Drupal::formBuilder</a>()-&gt;getForm() is the name of a class that implements FormBuilderInterface. Any additional arguments passed to the getForm() method will be passed along as additional arguments to the ExampleForm::buildForm() method.</p> <p>For example:</p> <pre class="php" data-language="php">$extra = '612-123-4567';
$form = \Drupal::formBuilder()-&gt;getForm('Drupal\mymodule\Form\ExampleForm', $extra);
...
public function buildForm(array $form, FormStateInterface $form_state, $extra = NULL)
  $form['phone_number'] = array(
    '#type' =&gt; 'tel',
    '#title' =&gt; $this-&gt;t('Your phone number'),
    '#value' =&gt; $extra,
  );
  return $form;
}
</pre>
<p> Alternatively, forms can be built directly via the routing system which will take care of calling <a href="../../../core-lib-drupal.php/function/drupal-formbuilder/8.1.x.html" title="Returns the form builder service." class="local">\Drupal::formBuilder</a>()-&gt;getForm(). The following example demonstrates the use of a routing.yml file to display a form at the given route.</p> <pre class="php" data-language="php">example.form:
  path: '/example-form'
  defaults:
    _title: 'Example form'
    _form: '\Drupal\mymodule\Form\ExampleForm'
</pre>
<p> The $form argument to form-related functions is a specialized render array containing the elements and properties of the form. For more about render arrays, see the <a href="../../../core-lib-drupal-core-render-theme.api.php/group/theme_render/8.1.x.html" title="Overview of the Theme system and Render API." class="local">Render API topic.</a> For more detailed explanations of the Form API workflow, see the <a href="https://www.drupal.org/node/2117411">Form API documentation section.</a> In addition, there is a set of Form API tutorials in the <a href="https://www.drupal.org/project/examples">Examples for Developers project.</a></p> <p>In the form builder, validation, submission, and other form methods, $form_state is the primary influence on the processing of the form and is passed to most methods, so they can use it to communicate with the form system and each other. $form_state is an object that implements <a href="../../../core-lib-drupal-core-form-formstateinterface.php/interface/formstateinterface/8.1.x.html" title="Provides an interface for an object containing the current state of a form." class="local">\Drupal\Core\Form\FormStateInterface</a>.</p> <h3>File</h3> 
<dl> <dt>core/<a href="https://api.drupal.org/api/drupal/core%21core.api.php/8.1.x">core.api.php</a>, line 1658</dt> <dd>Documentation landing page and topics, plus core library hooks.</dd> </dl> <h3>Functions</h3>  <table> <thead> <tr> <th scope="col"> Name </th> <th scope="col"> Location </th> <th scope="col"> Description </th> </tr> </thead> <tbody> <tr> <td data-th="Name"> <a href="../../../core-includes-common.inc/function/drupal_get_destination/8.1.x.html">drupal_get_destination</a> <span class="api-deprecated">Deprecated</span> </td> <td data-th="Location"> core/includes/<a href="../../../core-includes-common.inc/8.1.x.html">common.inc</a> </td> <td data-th="Description"> Prepares a 'destination' URL query parameter. </td> </tr> <tr> <td data-th="Name"> <a href="../../../core-lib-drupal-core-form-form.api.php/function/hook_form_alter/8.1.x.html">hook_form_alter</a> </td> <td data-th="Location"> core/lib/Drupal/Core/Form/<a href="https://api.drupal.org/api/drupal/core%21lib%21Drupal%21Core%21Form%21form.api.php/8.1.x">form.api.php</a> </td> <td data-th="Description"> Perform alterations before a form is rendered. </td> </tr> <tr> <td data-th="Name"> <a href="../../../core-lib-drupal-core-form-form.api.php/function/hook_form_base_form_id_alter/8.1.x.html">hook_form_BASE_FORM_ID_alter</a> </td> <td data-th="Location"> core/lib/Drupal/Core/Form/<a href="https://api.drupal.org/api/drupal/core%21lib%21Drupal%21Core%21Form%21form.api.php/8.1.x">form.api.php</a> </td> <td data-th="Description"> Provide a form-specific alteration for shared ('base') forms. </td> </tr> <tr> <td data-th="Name"> <a href="../../../core-lib-drupal-core-form-form.api.php/function/hook_form_form_id_alter/8.1.x.html">hook_form_FORM_ID_alter</a> </td> <td data-th="Location"> core/lib/Drupal/Core/Form/<a href="https://api.drupal.org/api/drupal/core%21lib%21Drupal%21Core%21Form%21form.api.php/8.1.x">form.api.php</a> </td> <td data-th="Description"> Provide a form-specific alteration instead of the global <a href="../../../core-lib-drupal-core-form-form.api.php/function/hook_form_alter/8.1.x.html" title="Perform alterations before a form is rendered." class="local">hook_form_alter</a>(). </td> </tr> <tr> <td data-th="Name"> <a href="../../../core-lib-drupal-core-routing-redirectdestinationinterface.php/function/redirectdestinationinterface-getasarray/8.1.x.html">RedirectDestinationInterface::getAsArray</a> </td> <td data-th="Location"> core/lib/Drupal/Core/Routing/<a href="https://api.drupal.org/api/drupal/core%21lib%21Drupal%21Core%21Routing%21RedirectDestinationInterface.php/8.1.x">RedirectDestinationInterface.php</a> </td> <td data-th="Description"> Prepares a 'destination' URL query parameter for use with <a href="../../../core-lib-drupal-core-url.php/class/url/8.1.x.html" title="Defines an object that holds information about a URL." class="local">\Drupal\Core\Url</a>. </td> </tr> </tbody> </table>  <h3>Classes</h3>  <table> <thead> <tr> <th scope="col"> Name </th> <th scope="col"> Location </th> <th scope="col"> Description </th> </tr> </thead> <tbody> <tr> <td data-th="Name"> <a href="../../../core-lib-drupal-core-form-formbase.php/class/formbase/8.1.x.html">FormBase</a> </td> <td data-th="Location"> core/lib/Drupal/Core/Form/<a href="https://api.drupal.org/api/drupal/core%21lib%21Drupal%21Core%21Form%21FormBase.php/8.1.x">FormBase.php</a> </td> <td data-th="Description"> Provides a base class for forms. </td> </tr> <tr> <td data-th="Name"> <a href="../../../core-lib-drupal-core-form-formbuilder.php/class/formbuilder/8.1.x.html">FormBuilder</a> </td> <td data-th="Location"> core/lib/Drupal/Core/Form/<a href="https://api.drupal.org/api/drupal/core%21lib%21Drupal%21Core%21Form%21FormBuilder.php/8.1.x">FormBuilder.php</a> </td> <td data-th="Description"> Provides form building and processing. </td> </tr> <tr> <td data-th="Name"> <a href="../../../core-lib-drupal-core-form-formcache.php/class/formcache/8.1.x.html">FormCache</a> </td> <td data-th="Location"> core/lib/Drupal/Core/Form/<a href="https://api.drupal.org/api/drupal/core%21lib%21Drupal%21Core%21Form%21FormCache.php/8.1.x">FormCache.php</a> </td> <td data-th="Description"> Encapsulates the caching of a form and its form state. </td> </tr> <tr> <td data-th="Name"> <a href="../../../core-lib-drupal-core-form-formhelper.php/class/formhelper/8.1.x.html">FormHelper</a> </td> <td data-th="Location"> core/lib/Drupal/Core/Form/<a href="https://api.drupal.org/api/drupal/core%21lib%21Drupal%21Core%21Form%21FormHelper.php/8.1.x">FormHelper.php</a> </td> <td data-th="Description"> Provides helpers to operate on forms. </td> </tr> </tbody> </table>  <h3>Interfaces</h3>  <table> <thead> <tr> <th scope="col"> Name </th> <th scope="col"> Location </th> <th scope="col"> Description </th> </tr> </thead> <tbody> <tr> <td data-th="Name"> <a href="../../../core-lib-drupal-core-form-forminterface.php/interface/forminterface/8.1.x.html">FormInterface</a> </td> <td data-th="Location"> core/lib/Drupal/Core/Form/<a href="https://api.drupal.org/api/drupal/core%21lib%21Drupal%21Core%21Form%21FormInterface.php/8.1.x">FormInterface.php</a> </td> <td data-th="Description"> Provides an interface for a Form. </td> </tr> <tr> <td data-th="Name"> <a href="../../../core-lib-drupal-core-form-formstateinterface.php/interface/formstateinterface/8.1.x.html">FormStateInterface</a> </td> <td data-th="Location"> core/lib/Drupal/Core/Form/<a href="https://api.drupal.org/api/drupal/core%21lib%21Drupal%21Core%21Form%21FormStateInterface.php/8.1.x">FormStateInterface.php</a> </td> <td data-th="Description"> Provides an interface for an object containing the current state of a form. </td> </tr> </tbody> </table><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2001&ndash;2016 by the original authors<br>Licensed under the GNU General Public License, version 2 and later.<br>Drupal is a registered trademark of Dries Buytaert.<br>
    <a href="https://api.drupal.org/api/drupal/core!core.api.php/group/form_api/8.1.x" class="_attribution-link">https://api.drupal.org/api/drupal/core!core.api.php/group/form_api/8.1.x</a>
  </p>
</div>
