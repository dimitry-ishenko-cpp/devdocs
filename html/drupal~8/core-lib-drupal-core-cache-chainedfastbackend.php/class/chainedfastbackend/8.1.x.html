<h1 id="page-subtitle">class ChainedFastBackend</h1>      <p>Defines a backend with a fast and a consistent backend chain.</p> <p>In order to mitigate a network roundtrip for each cache get operation, this cache allows a fast backend to be put in front of a slow(er) backend. Typically the fast backend will be something like APCu, and be bound to a single web node, and will not require a network round trip to fetch a cache item. The fast backend will also typically be inconsistent (will only see changes from one web node). The slower backend will be something like Mysql, Memcached or Redis, and will be used by all web nodes, thus making it consistent, but also require a network round trip for each cache get.</p> <p>In addition to being useful for sites running on multiple web nodes, this backend can also be useful for sites running on a single web node where the fast backend (e.g., APCu) isn't shareable between the web and CLI processes. Single-node configurations that don't have that limitation can just use the fast cache backend directly.</p> <p>We always use the fast backend when reading (get()) entries from cache, but check whether they were created before the last write (set()) to this (chained) cache backend. Those cache entries that were created before the last write are discarded, but we use their cache IDs to then read them from the consistent (slower) cache backend instead; at the same time we update the fast cache backend so that the next read will hit the faster backend again. Hence we can guarantee that the cache entries we return are all up-to-date, and maximally exploit the faster cache backend. This cache backend uses and maintains a "last write timestamp" to determine which cache entries should be discarded.</p> <p>Because this backend will mark all the cache entries in a bin as out-dated for each write to a bin, it is best suited to bins with fewer changes.</p> <p>Note that this is designed specifically for combining a fast inconsistent cache backend with a slower consistent cache back-end. To still function correctly, it needs to do a consistency check (see the "last write timestamp" logic). This contrasts with <a href="../../../core-lib-drupal-core-cache-backendchain.php/class/backendchain/8.1.x.html" title="Defines a chained cache implementation for combining multiple cache backends." class="local">\Drupal\Core\Cache\BackendChain</a>, which assumes both chained cache backends are consistent, thus a consistency check being pointless.</p> <h3>Hierarchy</h3> <ul>
<li class="first last">class \Drupal\Core\Cache\<a href="8.1.x.html" class="active active">ChainedFastBackend</a> implements <a href="../../../core-lib-drupal-core-cache-cachebackendinterface.php/interface/cachebackendinterface/8.1.x.html">CacheBackendInterface</a>, <a href="../../../core-lib-drupal-core-cache-cachetagsinvalidatorinterface.php/interface/cachetagsinvalidatorinterface/8.1.x.html">CacheTagsInvalidatorInterface</a>
</li> </ul>
 <h3>See also</h3> <p> <a href="../../../core-lib-drupal-core-cache-backendchain.php/class/backendchain/8.1.x.html" title="Defines a chained cache implementation for combining multiple cache backends." class="local">\Drupal\Core\Cache\BackendChain</a></p> <h3>Related topics</h3>   <dl api-related-topics> <dt><a href="../../../core-core.api.php/group/cache/8.1.x.html">Cache API</a></dt> <dd>Information about the Drupal Cache API</dd> </dl>    <h3>File</h3> 
<dl> <dt>core/lib/Drupal/Core/Cache/<a href="https://api.drupal.org/api/drupal/core%21lib%21Drupal%21Core%21Cache%21ChainedFastBackend.php/8.1.x">ChainedFastBackend.php</a>, line 48</dt>  </dl> <h3>Namespace</h3> <a href="https://api.drupal.org/api/drupal/namespace/Drupal%21Core%21Cache/8.1.x">Drupal\Core\Cache</a>  <h3>Members</h3>   <table> <thead> <tr> <th scope="col"> Name </th> <th scope="col"> Modifiers </th> <th scope="col"> Type </th> <th scope="col"> Description </th> </tr> </thead> <tbody> <tr> <td data-th="Name"> <a href="../../../core-lib-drupal-core-cache-cachebackendinterface.php/constant/cachebackendinterface-cache_permanent/8.1.x.html">CacheBackendInterface::CACHE_PERMANENT</a> </td> <td data-th="Modifiers"> </td> <td data-th="Type"> constant </td> <td data-th="Description"> Indicates that the item should never be removed unless explicitly deleted. </td> </tr> <tr> <td data-th="Name"> <a href="../../property/chainedfastbackend-bin/8.1.x.html">ChainedFastBackend::$bin</a> </td> <td data-th="Modifiers"> protected </td> <td data-th="Type"> property </td> <td data-th="Description"> </td> </tr> <tr> <td data-th="Name"> <a href="../../property/chainedfastbackend-consistentbackend/8.1.x.html">ChainedFastBackend::$consistentBackend</a> </td> <td data-th="Modifiers"> protected </td> <td data-th="Type"> property </td> <td data-th="Description"> The consistent cache backend. </td> </tr> <tr> <td data-th="Name"> <a href="../../property/chainedfastbackend-fastbackend/8.1.x.html">ChainedFastBackend::$fastBackend</a> </td> <td data-th="Modifiers"> protected </td> <td data-th="Type"> property </td> <td data-th="Description"> The fast cache backend. </td> </tr> <tr> <td data-th="Name"> <a href="../../property/chainedfastbackend-lastwritetimestamp/8.1.x.html">ChainedFastBackend::$lastWriteTimestamp</a> </td> <td data-th="Modifiers"> protected </td> <td data-th="Type"> property </td> <td data-th="Description"> The time at which the last write to this cache bin happened. </td> </tr> <tr> <td data-th="Name"> <a href="../../function/chainedfastbackend-delete/8.1.x.html">ChainedFastBackend::delete</a> </td> <td data-th="Modifiers"> public </td> <td data-th="Type"> function </td> <td data-th="Description"> Deletes an item from the cache. <em class="api-inheritance-source">Overrides <a href="../../../core-lib-drupal-core-cache-cachebackendinterface.php/function/cachebackendinterface-delete/8.1.x.html">CacheBackendInterface::delete</a></em> </td> </tr> <tr> <td data-th="Name"> <a href="../../function/chainedfastbackend-deleteall/8.1.x.html">ChainedFastBackend::deleteAll</a> </td> <td data-th="Modifiers"> public </td> <td data-th="Type"> function </td> <td data-th="Description"> Deletes all cache items in a bin. <em class="api-inheritance-source">Overrides <a href="../../../core-lib-drupal-core-cache-cachebackendinterface.php/function/cachebackendinterface-deleteall/8.1.x.html">CacheBackendInterface::deleteAll</a></em> </td> </tr> <tr> <td data-th="Name"> <a href="../../function/chainedfastbackend-deletemultiple/8.1.x.html">ChainedFastBackend::deleteMultiple</a> </td> <td data-th="Modifiers"> public </td> <td data-th="Type"> function </td> <td data-th="Description"> Deletes multiple items from the cache. <em class="api-inheritance-source">Overrides <a href="../../../core-lib-drupal-core-cache-cachebackendinterface.php/function/cachebackendinterface-deletemultiple/8.1.x.html">CacheBackendInterface::deleteMultiple</a></em> </td> </tr> <tr> <td data-th="Name"> <a href="../../function/chainedfastbackend-garbagecollection/8.1.x.html">ChainedFastBackend::garbageCollection</a> </td> <td data-th="Modifiers"> public </td> <td data-th="Type"> function </td> <td data-th="Description"> Performs garbage collection on a cache bin. <em class="api-inheritance-source">Overrides <a href="../../../core-lib-drupal-core-cache-cachebackendinterface.php/function/cachebackendinterface-garbagecollection/8.1.x.html">CacheBackendInterface::garbageCollection</a></em> </td> </tr> <tr> <td data-th="Name"> <a href="../../function/chainedfastbackend-get/8.1.x.html">ChainedFastBackend::get</a> </td> <td data-th="Modifiers"> public </td> <td data-th="Type"> function </td> <td data-th="Description"> Returns data from the persistent cache. <em class="api-inheritance-source">Overrides <a href="../../../core-lib-drupal-core-cache-cachebackendinterface.php/function/cachebackendinterface-get/8.1.x.html">CacheBackendInterface::get</a></em> </td> </tr> <tr> <td data-th="Name"> <a href="../../function/chainedfastbackend-getlastwritetimestamp/8.1.x.html">ChainedFastBackend::getLastWriteTimestamp</a> </td> <td data-th="Modifiers"> protected </td> <td data-th="Type"> function </td> <td data-th="Description"> Gets the last write timestamp. </td> </tr> <tr> <td data-th="Name"> <a href="../../function/chainedfastbackend-getmultiple/8.1.x.html">ChainedFastBackend::getMultiple</a> </td> <td data-th="Modifiers"> public </td> <td data-th="Type"> function </td> <td data-th="Description"> Returns data from the persistent cache when given an array of cache IDs. <em class="api-inheritance-source">Overrides <a href="../../../core-lib-drupal-core-cache-cachebackendinterface.php/function/cachebackendinterface-getmultiple/8.1.x.html">CacheBackendInterface::getMultiple</a></em> </td> </tr> <tr> <td data-th="Name"> <a href="../../function/chainedfastbackend-invalidate/8.1.x.html">ChainedFastBackend::invalidate</a> </td> <td data-th="Modifiers"> public </td> <td data-th="Type"> function </td> <td data-th="Description"> Marks a cache item as invalid. <em class="api-inheritance-source">Overrides <a href="../../../core-lib-drupal-core-cache-cachebackendinterface.php/function/cachebackendinterface-invalidate/8.1.x.html">CacheBackendInterface::invalidate</a></em> </td> </tr> <tr> <td data-th="Name"> <a href="../../function/chainedfastbackend-invalidateall/8.1.x.html">ChainedFastBackend::invalidateAll</a> </td> <td data-th="Modifiers"> public </td> <td data-th="Type"> function </td> <td data-th="Description"> Marks all cache items as invalid. <em class="api-inheritance-source">Overrides <a href="../../../core-lib-drupal-core-cache-cachebackendinterface.php/function/cachebackendinterface-invalidateall/8.1.x.html">CacheBackendInterface::invalidateAll</a></em> </td> </tr> <tr> <td data-th="Name"> <a href="../../function/chainedfastbackend-invalidatemultiple/8.1.x.html">ChainedFastBackend::invalidateMultiple</a> </td> <td data-th="Modifiers"> public </td> <td data-th="Type"> function </td> <td data-th="Description"> Marks cache items as invalid. <em class="api-inheritance-source">Overrides <a href="../../../core-lib-drupal-core-cache-cachebackendinterface.php/function/cachebackendinterface-invalidatemultiple/8.1.x.html">CacheBackendInterface::invalidateMultiple</a></em> </td> </tr> <tr> <td data-th="Name"> <a href="../../function/chainedfastbackend-invalidatetags/8.1.x.html">ChainedFastBackend::invalidateTags</a> </td> <td data-th="Modifiers"> public </td> <td data-th="Type"> function </td> <td data-th="Description"> Marks cache items with any of the specified tags as invalid. <em class="api-inheritance-source">Overrides <a href="../../../core-lib-drupal-core-cache-cachetagsinvalidatorinterface.php/function/cachetagsinvalidatorinterface-invalidatetags/8.1.x.html">CacheTagsInvalidatorInterface::invalidateTags</a></em> </td> </tr> <tr> <td data-th="Name"> <a href="../../constant/chainedfastbackend-last_write_timestamp_prefix/8.1.x.html">ChainedFastBackend::LAST_WRITE_TIMESTAMP_PREFIX</a> </td> <td data-th="Modifiers"> </td> <td data-th="Type"> constant </td> <td data-th="Description"> Cache key prefix for the bin-specific entry to track the last write. </td> </tr> <tr> <td data-th="Name"> <a href="../../function/chainedfastbackend-markasoutdated/8.1.x.html">ChainedFastBackend::markAsOutdated</a> </td> <td data-th="Modifiers"> protected </td> <td data-th="Type"> function </td> <td data-th="Description"> Marks the fast cache bin as outdated because of a write. </td> </tr> <tr> <td data-th="Name"> <a href="../../function/chainedfastbackend-removebin/8.1.x.html">ChainedFastBackend::removeBin</a> </td> <td data-th="Modifiers"> public </td> <td data-th="Type"> function </td> <td data-th="Description"> Remove a cache bin. <em class="api-inheritance-source">Overrides <a href="../../../core-lib-drupal-core-cache-cachebackendinterface.php/function/cachebackendinterface-removebin/8.1.x.html">CacheBackendInterface::removeBin</a></em> </td> </tr> <tr> <td data-th="Name"> <a href="../../function/chainedfastbackend-reset/8.1.x.html">ChainedFastBackend::reset</a> </td> <td data-th="Modifiers"> public </td> <td data-th="Type"> function </td> <td data-th="Description"> @todo Document in <a href="https://www.drupal.org/node/2311945">https://www.drupal.org/node/2311945</a>. </td> </tr> <tr> <td data-th="Name"> <a href="../../function/chainedfastbackend-set/8.1.x.html">ChainedFastBackend::set</a> </td> <td data-th="Modifiers"> public </td> <td data-th="Type"> function </td> <td data-th="Description"> Stores data in the persistent cache. <em class="api-inheritance-source">Overrides <a href="../../../core-lib-drupal-core-cache-cachebackendinterface.php/function/cachebackendinterface-set/8.1.x.html">CacheBackendInterface::set</a></em> </td> </tr> <tr> <td data-th="Name"> <a href="../../function/chainedfastbackend-setmultiple/8.1.x.html">ChainedFastBackend::setMultiple</a> </td> <td data-th="Modifiers"> public </td> <td data-th="Type"> function </td> <td data-th="Description"> Store multiple items in the persistent cache. <em class="api-inheritance-source">Overrides <a href="../../../core-lib-drupal-core-cache-cachebackendinterface.php/function/cachebackendinterface-setmultiple/8.1.x.html">CacheBackendInterface::setMultiple</a></em> </td> </tr> <tr> <td data-th="Name"> <a href="../../function/chainedfastbackend-__construct/8.1.x.html">ChainedFastBackend::__construct</a> </td> <td data-th="Modifiers"> public </td> <td data-th="Type"> function </td> <td data-th="Description"> Constructs a ChainedFastBackend object. </td> </tr> </tbody> </table><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2001&ndash;2016 by the original authors<br>Licensed under the GNU General Public License, version 2 and later.<br>Drupal is a registered trademark of Dries Buytaert.<br>
    <a href="https://api.drupal.org/api/drupal/core!lib!Drupal!Core!Cache!ChainedFastBackend.php/class/ChainedFastBackend/8.1.x" class="_attribution-link">https://api.drupal.org/api/drupal/core!lib!Drupal!Core!Cache!ChainedFastBackend.php/class/ChainedFastBackend/8.1.x</a>
  </p>
</div>
