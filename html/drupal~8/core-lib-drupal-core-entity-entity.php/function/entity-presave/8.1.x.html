<h1 id="page-subtitle">public function Entity::preSave</h1>     <pre class="signature">public <a href="../../class/entity/8.1.x.html">Entity</a>::preSave(EntityStorageInterface $storage)</pre> <p>Acts on an entity before the presave hook is invoked.</p> <p>Used before the entity is saved and before invoking the presave hook. Note that in case of translatable content entities this callback is only fired on their current translation. It is up to the developer to iterate over all translations if needed. This is different from its counterpart in the Field API, FieldItemListInterface::preSave(), which is fired on all field translations automatically. @todo Adjust existing implementations and the documentation according to <a href="https://www.drupal.org/node/2577609">https://www.drupal.org/node/2577609</a> to have a consistent API.</p> <h3>Parameters</h3> <p> <strong><a href="../../../core-lib-drupal-core-entity-entitystorageinterface.php/interface/entitystorageinterface/8.1.x.html" title="Defines the interface for entity storage classes." class="local">\Drupal\Core\Entity\EntityStorageInterface</a> $storage</strong>: The entity storage object.</p> <h3>Throws</h3> <p> \Exception When there is a problem that should prevent saving the entity.</p> <p class="api-override">Overrides <a href="../../../core-lib-drupal-core-entity-entityinterface.php/function/entityinterface-presave/8.1.x.html">EntityInterface::preSave</a></p> <h3>See also</h3> <p> <a href="../../../core-lib-drupal-core-field-fielditemlistinterface.php/function/fielditemlistinterface-presave/8.1.x.html" title="Defines custom presave behavior for field values." class="local">\Drupal\Core\Field\FieldItemListInterface::preSave</a>()</p>  <h3>File</h3> 
<dl> <dt>core/lib/Drupal/Core/Entity/<a href="https://api.drupal.org/api/drupal/core%21lib%21Drupal%21Core%21Entity%21Entity.php/8.1.x">Entity.php</a>, line 403</dt>  </dl> <h3>Class</h3> 
<dl> <dt>
<a href="../../class/entity/8.1.x.html">Entity</a> </dt> <dd>Defines a base entity class.</dd> </dl> <h3>Namespace</h3> <a href="https://api.drupal.org/api/drupal/namespace/Drupal%21Core%21Entity/8.1.x">Drupal\Core\Entity</a> <h3>Code</h3> <pre class="php" data-language="php">public function preSave(EntityStorageInterface $storage) {
  // Check if this is an entity bundle.
  if ($this-&gt;getEntityType()-&gt;getBundleOf()) {
    // Throw an exception if the bundle ID is longer than 32 characters.
    if (Unicode::strlen($this-&gt;id()) &gt; EntityTypeInterface::BUNDLE_MAX_LENGTH) {
      throw new ConfigEntityIdLengthException("Attempt to create a bundle with an ID longer than " . EntityTypeInterface::BUNDLE_MAX_LENGTH . " characters: $this-&gt;id().");
    }
  }
}
</pre><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2001&ndash;2016 by the original authors<br>Licensed under the GNU General Public License, version 2 and later.<br>Drupal is a registered trademark of Dries Buytaert.<br>
    <a href="https://api.drupal.org/api/drupal/core!lib!Drupal!Core!Entity!Entity.php/function/Entity::preSave/8.1.x" class="_attribution-link">https://api.drupal.org/api/drupal/core!lib!Drupal!Core!Entity!Entity.php/function/Entity::preSave/8.1.x</a>
  </p>
</div>
