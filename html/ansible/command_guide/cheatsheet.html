<section id="ansible-cli-cheatsheet"> <h1 id="cheatsheet">Ansible CLI cheatsheet</h1> <p>This page shows one or more examples of each Ansible command line utility with some common flags added and a link to the full documentation for the command. This page offers a quick reminder of some common use cases only - it may be out of date or incomplete or both. For canonical documentation, follow the links to the CLI pages.</p>  <ul class="simple"> <li><a class="reference internal" href="#ansible-playbook" id="id1">ansible-playbook</a></li> <li>
<p><a class="reference internal" href="#ansible-galaxy" id="id2">ansible-galaxy</a></p> <ul> <li><a class="reference internal" href="#installing-collections" id="id3">Installing collections</a></li> <li><a class="reference internal" href="#installing-roles" id="id4">Installing roles</a></li> </ul> </li> <li>
<p><a class="reference internal" href="#ansible" id="id5">ansible</a></p> <ul> <li><a class="reference internal" href="#running-ad-hoc-commands" id="id6">Running ad-hoc commands</a></li> </ul> </li> <li><a class="reference internal" href="#ansible-doc" id="id7">ansible-doc</a></li> </ul>  <section id="ansible-playbook"> <h2>ansible-playbook</h2> <pre data-language="bash">ansible-playbook -i /path/to/my_inventory_file -u my_connection_user -k -f 3 -T 30 -t my_tag -M /path/to/my_modules -b -K my_playbook.yml
</pre> <dl class="simple"> <dt>
<code>Loads my_playbook.yml from the current working directory and:</code> </dt>
<dd>
<ul class="simple"> <li>
<code>-i</code> - uses <code>my_inventory_file</code> in the path provided for <a class="reference internal" href="../inventory_guide/intro_inventory.html#intro-inventory"><span class="std std-ref">inventory</span></a> to match the <a class="reference internal" href="../inventory_guide/intro_patterns.html#intro-patterns"><span class="std std-ref">pattern</span></a>.</li> <li>
<code>-u</code> - connects <a class="reference internal" href="../inventory_guide/connection_details.html#connections"><span class="std std-ref">over SSH</span></a> as <code>my_connection_user</code>.</li> <li>
<code>-k</code> - asks for password which is then provided to SSH authentication.</li> <li>
<code>-f</code> - allocates 3 <a class="reference internal" href="../playbook_guide/playbooks_strategies.html#playbooks-strategies"><span class="std std-ref">forks</span></a>.</li> <li>
<code>-T</code> - sets a 30-second timeout.</li> <li>
<code>-t</code> - runs only tasks marked with the <a class="reference internal" href="../playbook_guide/playbooks_tags.html#tags"><span class="std std-ref">tag</span></a> <code>my_tag</code>.</li> <li>
<code>-M</code> - loads <a class="reference internal" href="https://docs.ansible.com/ansible/latest/dev_guide/developing_locally.html#developing-locally"><span class="std std-ref">local modules</span></a> from <code>/path/to/my/modules</code>.</li> <li>
<code>-b</code> - executes with elevated privileges (uses <a class="reference internal" href="../playbook_guide/playbooks_privilege_escalation.html#become"><span class="std std-ref">become</span></a>).</li> <li>
<code>-K</code> - prompts the user for the become password.</li> </ul> </dd> </dl> <p>See <a class="reference internal" href="../cli/ansible-playbook.html#ansible-playbook"><span class="std std-ref">ansible-playbook</span></a> for detailed documentation.</p> </section> <section id="ansible-galaxy"> <h2>ansible-galaxy</h2> <section id="installing-collections"> <h3>Installing collections</h3> <ul class="simple"> <li>Install a single collection:</li> </ul> <pre data-language="bash">ansible-galaxy collection install mynamespace.mycollection
</pre> <p>Downloads <code>mynamespace.mycollection</code> from the configured Galaxy server (<code>galaxy.ansible.com</code> by default).</p> <ul class="simple"> <li>Install a list of collections:</li> </ul> <pre data-language="bash">ansible-galaxy collection install -r requirements.yml
</pre> <p>Downloads the list of collections specified in the <code>requirements.yml</code> file.</p> <ul class="simple"> <li>List all installed collections:</li> </ul> <pre data-language="bash">ansible-galaxy collection list
</pre> </section> <section id="installing-roles"> <h3>Installing roles</h3> <ul class="simple"> <li>Install a role named <code>example.role</code>:</li> </ul> <pre data-language="bash">ansible-galaxy role install example.role

# SNIPPED_OUTPUT
- extracting example.role to /home/user/.ansible/roles/example.role
- example.role was installed successfully
</pre> <ul class="simple"> <li>List all installed roles:</li> </ul> <pre data-language="bash">ansible-galaxy role list
</pre> <p>See <a class="reference internal" href="../cli/ansible-galaxy.html#ansible-galaxy"><span class="std std-ref">ansible-galaxy</span></a> for detailed documentation.</p> </section> </section> <section id="ansible"> <h2>ansible</h2> <section id="running-ad-hoc-commands"> <h3>Running ad-hoc commands</h3> <ul class="simple"> <li>Install a package</li> </ul> <pre data-language="bash">ansible localhost -m ansible.builtin.apt -a "name=apache2 state=present" -b -K
</pre> <p>Runs <code>ansible localhost</code>- on your local system. - <code>name=apache2 state=present</code> - installs the <code>apache2</code> package on a Debian-based system. - <code>-b</code> - uses <a class="reference internal" href="../playbook_guide/playbooks_privilege_escalation.html#become"><span class="std std-ref">become</span></a> to execute with elevated privileges. - <code>-m</code> - specifies a module name. - <code>-K</code> - prompts for the privilege escalation password.</p> <pre data-language="bash">localhost | SUCCESS =&gt; {
"cache_update_time": 1709959287,
"cache_updated": false,
"changed": false
#...
</pre> </section> </section> <section id="ansible-doc"> <h2>ansible-doc</h2> <ul class="simple"> <li>Show plugin names and their source files:</li> </ul> <pre data-language="bash">ansible-doc -F
#...
</pre> <ul class="simple"> <li>Show available plugins:</li> </ul> <pre data-language="bash">ansible-doc -t module -l
#...
</pre> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2024 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/command_guide/cheatsheet.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/command_guide/cheatsheet.html</a>
  </p>
</div>
