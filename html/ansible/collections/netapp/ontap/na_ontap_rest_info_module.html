<h1 id="netapp-ontap-na-ontap-rest-info-netapp-ontap-information-gatherer-using-rest-apis">netapp.ontap.na_ontap_rest_info – NetApp ONTAP information gatherer using REST APIs</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/netapp/ontap">netapp.ontap collection</a> (version 21.12.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install netapp.ontap</code>.</p> <p>To use it in a playbook, specify: <code>netapp.ontap.na_ontap_rest_info</code>.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 20.5.0: </span>of netapp.ontap</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id4">Notes</a></li> <li><a class="reference internal" href="#examples" id="id5">Examples</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>This module allows you to gather various information about ONTAP configuration using REST APIs</li> </ul>   <h2 id="requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>Ansible 2.9</li> <li>Python3 netapp-lib (2018.11.13) or later. Install using ‘pip install netapp-lib’</li> <li>netapp-lib 2020.3.12 is strongly recommended as it provides better error reporting for connection issues.</li> <li>A physical or virtual clustered Data ONTAP system. The modules support Data ONTAP 9.1 and onward.</li> <li>REST support requires ONTAP 9.6 or later.</li> <li>To enable http on the cluster you must run the following commands ‘set -privilege advanced;’ ‘system services web modify -http-enabled true;’</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="1">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="1">  <b>cert_filepath</b>  <div> <span>string</span> </div> <div> added in 20.6.0 of netapp.ontap </div> </td> <td> </td> <td> <div>path to SSL client cert file (.pem).</div> <div>not supported with python 2.6.</div> </td> </tr> <tr> <td colspan="1">  <b>feature_flags</b>  <div> <span>dictionary</span> </div> <div> added in 20.5.0 of netapp.ontap </div> </td> <td> </td> <td> <div>Enable or disable a new feature.</div> <div>This can be used to enable an experimental feature or disable a new feature that breaks backward compatibility.</div> <div>Supported keys and values are subject to change without notice. Unknown keys are ignored.</div> </td> </tr> <tr> <td colspan="1">  <b>fields</b>  <div> <span>list</span> / <span>elements=string</span> </div> <div> added in 20.6.0 of netapp.ontap </div> </td> <td> </td> <td> <div>Request specific fields from subset. '*' to return all the fields, one or more subsets are allowed. '&lt;list of fields&gt;' to return specified fields, only one subset will be allowed.</div> <div>If the option is not present, return all the fields.</div> </td> </tr> <tr> <td colspan="1">  <b>gather_subset</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> <b>Default:</b><br><div>"demo"</div> </td> <td> <div>When supplied, this argument will restrict the information collected to a given subset.</div> <div>Either the info name or the REST API can be given. Possible values for this argument include</div> <div>aggregate_info or storage/aggregates</div> <div>aggr_efficiency_info</div> <div>application_info or application/applications</div> <div>application_template_info or application/templates</div> <div>autosupport_check_info or support/autosupport/check</div> <div>autosupport_config_info or support/autosupport</div> <div>autosupport_messages_history or support/autosupport/messages</div> <div>broadcast_domains_info or net_port_broadcast_domain_info or network/ethernet/broadcast-domains</div> <div>cifs_home_directory_info or protocols/cifs/home-directory/search-paths</div> <div>cifs_services_info or cifs_options_info or protocols/cifs/services</div> <div>cifs_vserver_security_info</div> <div>cifs_share_info or protocols/cifs/shares</div> <div>clock_info</div> <div>cloud_targets_info or cloud/targets</div> <div>cluster_chassis_info or cluster/chassis</div> <div>cluster_log_forwarding_info or security/audit/destinations</div> <div>cluster_identity_info</div> <div>cluster_jobs_info or cluster/jobs</div> <div>cluster_metrics_info or cluster/metrics</div> <div>cluster_metrocluster_diagnostics or metrocluster_check_info or cluster/metrocluster/diagnostics</div> <div>cluster_node_info or sysconfig_info or cluster/nodes</div> <div>cluster_peer_info or cluster/peers</div> <div>cluster_schedules or job_schedule_cron_info or cluster/schedules</div> <div>cluster_software_download or cluster/software/download</div> <div>cluster_software_history or cluster/software/history</div> <div>cluster_software_packages or cluster/software/packages</div> <div>cluster_switch_info or network/ethernet/switches</div> <div>disk_info or storage/disks</div> <div>event_notification_info or support/ems/destinations</div> <div>event_notification_destination_info or support/ems/destinations</div> <div>export_policy_info or protocols/nfs/export-policies</div> <div>file_directory_security or private/cli/vserver/security/file-directory</div> <div>initiator_groups_info or igroup_info or protocols/san/igroups</div> <div>ip_interfaces_info or net_interface_info or network/ip/interfaces</div> <div>ip_routes_info or net_routes_info or network/ip/routes</div> <div>ip_service_policies or net_interface_service_policy_info or network/ip/service-policies</div> <div>kerberos_realm_info or protocols/nfs/kerberos/realms</div> <div>license_info or cluster/licensing/licenses</div> <div>network_ipspaces_info or net_ipspaces_info or network/ipspaces</div> <div>network_ports_info or net_port_info or network/ethernet/ports</div> <div>net_vlan_info</div> <div>ntp_server_info or cluster/ntp/servers</div> <div>nvme_info or protocols/nvme/services</div> <div>nvme_interface_info or protocols/nvme/interfaces</div> <div>nvme_subsystem_info or protocols/nvme/subsystems</div> <div>metrocluster_info or cluster/metrocluster</div> <div>metrocluster-node-get-iter or cluster/metrocluster/nodes</div> <div>ontap_system_version or cluster_image_info or cluster/software</div> <div>san_fc_logins_info or network/fc/logins</div> <div>san_fc_wppn-aliases or fcp_alias_info or network/fc/wwpn-aliases</div> <div>san_fcp_services or fcp_service_info or protocols/san/fcp/services</div> <div>san_iscsi_credentials or protocols/san/iscsi/credentials</div> <div>san_iscsi_services or iscsi_service_info or protocols/san/iscsi/services</div> <div>san_lun_maps or lun_map_info or protocols/san/lun-maps</div> <div>security_login_info or security_login_account_info or security/accounts</div> <div>security_login_rest_role_info or security/roles</div> <div>sis_info</div> <div>sis_policy_info or storage/volume-efficiency-policies</div> <div>snapmirror_destination_info</div> <div>snapmirror_info or snapmirror/relationships</div> <div>snapmirror_policy_info or snapmirror/policies</div> <div>storage_bridge_info or storage/bridges</div> <div>storage_flexcaches_info or storage/flexcache/flexcaches</div> <div>storage_flexcaches_origin_info or storage/flexcache/origins</div> <div>storage_luns_info or lun_info or storage/luns</div> <div>storage_NVMe_namespaces or nvme_namespace_info or storage/namespaces</div> <div>storage_ports_info or storage/ports</div> <div>storage_qos_policies or qos_policy_info or qos_adaptive_policy_info or storage/qos/policies</div> <div>storage_qtrees_config or qtree_info or storage/qtrees</div> <div>storage_quota_reports or quota_report_info or storage/quota/reports</div> <div>storage_quota_policy_rules or storage/quota/rules</div> <div>storage_shelves_config or shelf_info or storage/shelves</div> <div>storage_snapshot_policies or snapshot_policy_info or storage/snapshot-policies</div> <div>support_ems_config or support/ems</div> <div>support_ems_events or support/ems/events</div> <div>support_ems_filters or support/ems/filters</div> <div>svm_dns_config_info or net_dns_info or name-services/dns</div> <div>svm_ldap_config_info or ldap_client or ldap_config or name-services/ldap</div> <div>svm_name_mapping_config_info or name-services/name-mappings</div> <div>svm_nis_config_info or name-services/nis</div> <div>svm_peers_info or vserver_peer_info or svm/peers</div> <div>svm_peer-permissions_info or svm/peer-permissions</div> <div>sys_cluster_alerts or private/support/alerts</div> <div>system_node_info</div> <div>vserver_info or svm/svms</div> <div>vserver_nfs_info or nfs_info or protocols/nfs/services</div> <div>volume_info or storage/volumes</div> <div>volume_space_info</div> <div>vscan_connection_status_all_info or protocols/vscan/server-status</div> <div>vscan_status_info or vscan_info or protocols/vscan</div> <div>Can specify a list of values to include a larger subset.</div> <div>REST APIs are supported with ONTAP 9.6 onwards.</div> </td> </tr> <tr> <td colspan="1">  <b>hostname</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The hostname or IP address of the ONTAP instance.</div> </td> </tr> <tr> <td colspan="1">  <b>http_port</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>Override the default port (80 or 443) with this port</div> </td> </tr> <tr> <td colspan="1">  <b>https</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Enable and disable https.</div> <div>Ignored when using REST as only https is supported.</div> <div>Ignored when using SSL certificate authentication as it requires SSL.</div> </td> </tr> <tr> <td colspan="1">  <b>key_filepath</b>  <div> <span>string</span> </div> <div> added in 20.6.0 of netapp.ontap </div> </td> <td> </td> <td> <div>path to SSL client key file.</div> </td> </tr> <tr> <td colspan="1">  <b>max_records</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>1024</div> </td> <td> <div>Maximum number of records returned in a single call.</div> </td> </tr> <tr> <td colspan="1">  <b>ontapi</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>The ontap api version to use</div> </td> </tr> <tr> <td colspan="1">  <b>parameters</b>  <div> <span>dictionary</span> </div> <div> added in 20.7.0 of netapp.ontap </div> </td> <td> </td> <td> <div>Allows for any rest option to be passed in</div> </td> </tr> <tr> <td colspan="1">  <b>password</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Password for the specified user.</div> <div>
<br>aliases: pass</div> </td> </tr> <tr> <td colspan="1">  <b>state</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>deprecated as of 21.1.0.</div> <div>this option was ignored and continues to be ignored.</div> </td> </tr> <tr> <td colspan="1">  <b>use_python_keys</b>  <div> <span>boolean</span> </div> <div> added in 21.9.0 of netapp.ontap </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>If true, <em>/</em> in the returned dictionary keys are translated to <em>_</em>.</div> <div>It makes it possible to use a . notation when processing the output.</div> <div>For instance <em>ontap_info["svm/svms"]</em> can be accessed as <em>ontap_info.svm_svms</em>.</div> </td> </tr> <tr> <td colspan="1">  <b>use_rest</b>  <div> <span>string</span> </div> </td> <td> <b>Default:</b><br><div>"auto"</div> </td> <td> <div>REST API if supported by the target system for all the resources and attributes the module requires. Otherwise will revert to ZAPI.</div> <div>always -- will always use the REST API</div> <div>never -- will always use the ZAPI</div> <div>auto -- will try to use the REST Api</div> </td> </tr> <tr> <td colspan="1">  <b>username</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>This can be a Cluster-scoped or SVM-scoped account, depending on whether a Cluster-level or SVM-level API is required.</div> <div>For more information, please read the documentation <a href="https://mysupport.netapp.com/NOW/download/software/nmsdk/9.4/">https://mysupport.netapp.com/NOW/download/software/nmsdk/9.4/</a>.</div> <div>Two authentication methods are supported</div> <div>1. basic authentication, using username and password,</div> <div>2. SSL certificate authentication, using a ssl client cert file, and optionally a private key file.</div> <div>To use a certificate, the certificate must have been installed in the ONTAP cluster, and cert authentication must have been enabled.</div> <div>
<br>aliases: user</div> </td> </tr> <tr> <td colspan="1">  <b>validate_certs</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li><div>
<b>yes</b> ←</div></li> </ul> </td> <td> <div>If set to <code>no</code>, the SSL certificates will not be validated.</div> <div>This should only set to <code>False</code> used on personally controlled sites using self-signed certificates.</div> </td> </tr> </table> <br>  <h2 id="notes">Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>
<em>security_login_role_config_info</em> there is no REST equivalent.</li> <li>
<em>security_login_role_info</em> there is no REST equivalent.</li> <li>
<em>security_key_manager_key_info</em> there is no REST equivalent.</li> <li>
<em>vserver_motd_info</em> there is no REST equivalent.</li> <li>
<em>vserver_login_banner_info</em> there is no REST equivalent.</li> <li>
<em>vscan_connection_extended_stats_info</em> there is no REST equivalent.</li> <li>
<em>env_sensors_info</em> there is no REST equivalent.</li> <li>
<em>fcp_adapter_info</em> there is no REST equivalent.</li> <li>
<em>net_dev_discovery_info</em> there is no REST equivalent.</li> <li>
<em>net_failover_group_info</em> there is no REST equivalent.</li> <li>
<em>net_firewall_info</em> there is no REST equivalent.</li> <li>
<em>ntfs_dacl_info</em> there is no REST equivalent.</li> <li>
<em>ntfs_sd_info</em> there is no REST equivalent.</li> <li>
<em>role_info</em> there is not REST equivalent.</li> <li>
<em>subsys_health_info</em> there is not REST equivalent.</li> <li>
<em>volume_move_target_aggr_info</em> there is not REST equivalent.</li> <li>The modules prefixed with na_ontap are built to support the ONTAP storage platform.</li> </ul> </div>   <h2 id="examples">Examples</h2> <pre data-language="yaml+jinja">- name: run ONTAP gather facts for vserver info
  netapp.ontap.na_ontap_rest_info:
      hostname: "1.2.3.4"
      username: "testuser"
      password: "test-password"
      https: true
      validate_certs: false
      use_rest: Always
      gather_subset:
      - vserver_info

- name: run ONTAP gather facts for aggregate info and volume info
  netapp.ontap.na_ontap_rest_info:
      hostname: "1.2.3.4"
      username: "testuser"
      password: "test-password"
      https: true
      validate_certs: false
      use_rest: Always
      gather_subset:
      - aggregate_info
      - volume_info

- name: run ONTAP gather facts for all subsets
  netapp.ontap.na_ontap_rest_info:
      hostname: "1.2.3.4"
      username: "testuser"
      password: "test-password"
      https: true
      validate_certs: false
      use_rest: Always
      gather_subset:
      - all

- name: run ONTAP gather facts for aggregate info and volume info with fields section
  netapp.ontap.na_ontap_rest_info:
      hostname: "1.2.3.4"
      username: "testuser"
      password: "test-password"
      https: true
      fields:
        - '*'
      validate_certs: false
      use_rest: Always
      gather_subset:
        - aggregate_info
        - volume_info

- name: run ONTAP gather facts for aggregate info with specified fields
  netapp.ontap.na_ontap_rest_info:
      hostname: "1.2.3.4"
      username: "testuser"
      password: "test-password"
      https: true
      fields:
        - 'uuid'
        - 'name'
        - 'node'
      validate_certs: false
      use_rest: Always
      gather_subset:
        - aggregate_info
      parameters:
        recommend:
          true

- name: run ONTAP gather facts for volume info with query on name and state
  netapp.ontap.na_ontap_rest_info:
      hostname: "1.2.3.4"
      username: "testuser"
      password: "test-password"
      https: true
      validate_certs: false
      gather_subset:
        - volume_info
      parameters:
        name: ansible*
        state: online
- name: run ONTAP gather fact to get DACLs
  netapp.ontap.na_ontap_rest_info:
    hostname: "1.2.3.4"
    username: "testuser"
    password: "test-password"
    https: true
    validate_certs: false
    gather_subset:
        - file_directory_security
    parameters:
      vserver: svm1
      path: /vol1/qtree1
      use_python_keys: true
</pre>  <h3 id="authors">Authors</h3> <ul class="simple"> <li>NetApp Ansible Team (@carchi8py) &lt;<a class="reference external" href="https://docs.ansible.com/cdn-cgi/l/email-protection#4e2029632f203d272c222b3a2b2f23686d7d7975686d7b7c75686d7a7675202b3a2f3e3e686d7a78752d2123">ng-ansibleteam<span>@</span>netapp<span>.</span>com</a>&gt;</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2021 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/netapp/ontap/na_ontap_rest_info_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/netapp/ontap/na_ontap_rest_info_module.html</a>
  </p>
</div>
