<section id="community-windows-win-regmerge-module-merges-the-contents-of-a-registry-file-into-the-windows-registry"> <h1>community.windows.win_regmerge module â€“ Merges the contents of a registry file into the Windows registry</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module is part of the <a class="reference external" href="https://galaxy.ansible.com/ui/repo/published/community/windows/">community.windows collection</a> (version 2.3.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install community.windows</code>.</p> <p>To use it in a playbook, specify: <code>community.windows.win_regmerge</code>.</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#parameters" id="id2">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id3">Notes</a></li> <li><a class="reference internal" href="#see-also" id="id4">See Also</a></li> <li><a class="reference internal" href="#examples" id="id5">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id6">Return Values</a></li> </ul>  <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>Wraps the reg.exe command to import the contents of a registry file.</li> <li>Suitable for use with registry files created using <a class="reference internal" href="../../ansible/windows/win_template_module.html#ansible-collections-ansible-windows-win-template-module"><span class="std std-ref">ansible.windows.win_template</span></a>.</li> <li>Windows registry files have a specific format and must be constructed correctly with carriage return and line feed line endings otherwise they will not be merged.</li> <li>Exported registry files often start with a Byte Order Mark which must be removed if the file is to templated using <a class="reference internal" href="../../ansible/windows/win_template_module.html#ansible-collections-ansible-windows-win-template-module"><span class="std std-ref">ansible.windows.win_template</span></a>.</li> <li>Registry file format is described at <a class="reference external" href="https://support.microsoft.com/en-us/kb/310516">https://support.microsoft.com/en-us/kb/310516</a>
</li> <li>See also <a class="reference internal" href="../../ansible/windows/win_template_module.html#ansible-collections-ansible-windows-win-template-module"><span class="std std-ref">ansible.windows.win_template</span></a>, <a class="reference internal" href="../../ansible/windows/win_regedit_module.html#ansible-collections-ansible-windows-win-regedit-module"><span class="std std-ref">ansible.windows.win_regedit</span></a>
</li> </ul> </section> <section id="parameters"> <h2>Parameters</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-windows-win-regmerge-module-parameter-compare-to"><strong>compare_to</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The parent key to use when comparing the contents of the registry to the contents of the file. Needs to be in HKLM or HKCU part of registry. Use a PS-Drive style path for example HKLM:\SOFTWARE not HKEY_LOCAL_MACHINE\SOFTWARE If not supplied, or the registry key is not found, no comparison will be made, and the module will report changed.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-windows-win-regmerge-module-parameter-content"><strong>content</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in community.windows 2.2.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>When used instead of <code><strong><a class="reference internal" href="#ansible-collections-community-windows-win-regmerge-module-parameter-path"><span class="std std-ref">path</span></a></strong></code>, merges the value specified into the Windows registry. It must not include the Byte Order Mark.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-windows-win-regmerge-module-parameter-path"><strong>path</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">path</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The full path including file name to the registry file on the remote machine to be merged</p> </div></td> </tr>  </table> </section> <section id="notes"> <h2>Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>Organise your registry files so that they contain a single root registry key if you want to use the compare_to functionality.</li> <li>This module does not force registry settings to be in the state described in the file. If registry settings have been modified externally the module will merge the contents of the file but continue to report differences on subsequent runs.</li> <li>To force registry change, use <a class="reference internal" href="../../ansible/windows/win_regedit_module.html#ansible-collections-ansible-windows-win-regedit-module"><span class="std std-ref">ansible.windows.win_regedit</span></a> with <code>state=absent</code> before using <code>community.windows.win_regmerge</code>.</li> </ul> </div> </section> <section id="see-also"> <h2>See Also</h2> <div class="admonition seealso"> <p class="admonition-title">See also</p> <dl class="simple"> <dt><a class="reference internal" href="../../ansible/windows/win_reg_stat_module.html#ansible-collections-ansible-windows-win-reg-stat-module"><span class="std std-ref">ansible.windows.win_reg_stat</span></a></dt>
<dd>
<p>Get information about Windows registry keys.</p> </dd> <dt><a class="reference internal" href="../../ansible/windows/win_regedit_module.html#ansible-collections-ansible-windows-win-regedit-module"><span class="std std-ref">ansible.windows.win_regedit</span></a></dt>
<dd>
<p>Add, change, or remove registry keys and values.</p> </dd> </dl> </div> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja">- name: Merge in a registry file without comparing to current registry
  community.windows.win_regmerge:
    path: C:\autodeploy\myCompany-settings.reg

- name: Compare and merge registry file
  community.windows.win_regmerge:
    path: C:\autodeploy\myCompany-settings.reg
    compare_to: HKLM:\SOFTWARE\myCompany

- name: Merge in a registry file specified as content without comparing to current registry
  community.windows.win_regmerge:
    content: |
      Windows Registry Editor Version 5.00

      [HKEY_LOCAL_MACHINE\SOFTWARE\myCompany]
      "ExampleKey"=dword:00000001

- name: Compare and merge registry file specified as content
  community.windows.win_regmerge:
    content: |
      Windows Registry Editor Version 5.00

      [HKEY_LOCAL_MACHINE\SOFTWARE\myCompany]
      "ExampleKey"=dword:00000001
    compare_to: HKLM:\SOFTWARE\myCompany
</pre> </section> <section id="return-values"> <h2>Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values.html#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Key</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-windows-win-regmerge-module-return-compare-to-key-found"><strong>compare_to_key_found</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>whether the parent registry key has been found for comparison</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> when comparison key not found in registry</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>false</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-windows-win-regmerge-module-return-compared"><strong>compared</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>whether a comparison has taken place between the registry and the file</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> when a comparison key has been supplied and comparison has been attempted</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>true</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-windows-win-regmerge-module-return-difference-count"><strong>difference_count</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>number of differences between the registry and the file</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> changed</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>1</code></p> </div></td> </tr>  </table> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Jon Hawkesworth (@jhawkesworth)</li> </ul> </section> <section id="collection-links"> <h3>Collection links</h3> <ul class="ansible-links"> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.windows/issues" rel="noopener external" target="_blank">Issue Tracker</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.windows" rel="noopener external" target="_blank">Repository (Sources)</a></span></li> <li><span><a class="reference internal" href="index.html#communication-for-community-windows"><span class="std std-ref">Communication</span></a></span></li> </ul> </section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2024 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/community/windows/win_regmerge_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/community/windows/win_regmerge_module.html</a>
  </p>
</div>
