<section id="community-routeros-api-module-ansible-module-for-routeros-api"> <h1>community.routeros.api module – Ansible module for RouterOS API</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module is part of the <a class="reference external" href="https://galaxy.ansible.com/ui/repo/published/community/routeros/">community.routeros collection</a> (version 2.19.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install community.routeros</code>. You need further requirements to be able to use this module, see <a class="reference internal" href="#ansible-collections-community-routeros-api-module-requirements"><span class="std std-ref">Requirements</span></a> for details.</p> <p>To use it in a playbook, specify: <code>community.routeros.api</code>.</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#attributes" id="id4">Attributes</a></li> <li><a class="reference internal" href="#notes" id="id5">Notes</a></li> <li><a class="reference internal" href="#see-also" id="id6">See Also</a></li> <li><a class="reference internal" href="#examples" id="id7">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id8">Return Values</a></li> </ul>  <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>Ansible module for RouterOS API with the Python <code>librouteros</code> library.</li> <li>This module can add, remove, update, query and execute arbitrary command in RouterOS via API.</li> </ul> </section> <section id="requirements"> <h2 id="ansible-collections-community-routeros-api-module-requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>librouteros</li> <li>Python &gt;= 3.6 (for librouteros)</li> </ul> </section> <section id="parameters"> <h2>Parameters</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-module-parameter-add"><strong>add</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Will add selected arguments in selected path to RouterOS config.</p> <p>Example <code>address=1.1.1.1/32 interface=ether1</code>.</p> <p>Equivalent in RouterOS CLI <code>/ip address add address=1.1.1.1/32 interface=ether1</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-module-parameter-ca-path"><strong>ca_path</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">path</span></p> <p><em class="ansible-option-versionadded">added in community.routeros 1.2.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>PEM formatted file that contains a CA certificate to be used for certificate validation.</p> <p>See also <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-validate-cert-hostname"><span class="std std-ref">validate_cert_hostname</span></a></strong></code>. Only used when <code><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-tls"><span class="std std-ref">tls=true</span></a></code> and <code><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-validate-certs"><span class="std std-ref">validate_certs=true</span></a></code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-module-parameter-cmd"><strong>cmd</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Execute any/arbitrary command in selected path, after the command we can add <code>.id</code>.</p> <p>Example path <code>system script</code> and cmd <code>run .id=*03</code> is equivalent in RouterOS CLI <code>/system script run number=0</code>.</p> <p>Example path <code>ip address</code> and cmd <code>print</code> is equivalent in RouterOS CLI <code>/ip address print</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-module-parameter-encoding"><strong>encoding</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in community.routeros 2.1.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Use the specified encoding when communicating with the RouterOS device.</p> <p>Default is <code>ASCII</code>. Note that <code>UTF-8</code> requires librouteros 3.2.1 or newer.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"ASCII"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-module-parameter-extended-query"><strong>extended_query</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Extended query given path for selected query attributes from RouterOS API.</p> <p>Extended query allow conjunctive input. If there is no matching entry, an empty list will be returned.</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-module-parameter-extended-query-attributes"><strong>attributes</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span> / <span class="ansible-option-required">required</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The list of attributes to return.</p> <p>Every attribute used in a <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-extended-query-where"><span class="std std-ref">extended_query.where[]</span></a></strong></code> clause need to be listed here.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-module-parameter-extended-query-where"><strong>where</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=dictionary</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Allows to restrict the objects returned.</p> <p>The conditions here must all match. An <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-extended-query-where-or"><span class="std std-ref">extended_query.where[].or</span></a></strong></code> condition needs at least one of its conditions to match.</p> </div>
</td> </tr> <tr>
<td>


<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-module-parameter-extended-query-where-attribute"><strong>attribute</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>


<div class="ansible-option-cell">
<p>The attribute to match. Must be part of <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-extended-query-attributes"><span class="std std-ref">extended_query.attributes</span></a></strong></code>.</p> <p>Either <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-extended-query-where-or"><span class="std std-ref">extended_query.where[].or</span></a></strong></code> or all of <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-extended-query-where-attribute"><span class="std std-ref">extended_query.where[].attribute</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-extended-query-where-is"><span class="std std-ref">extended_query.where[].is</span></a></strong></code>, and <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-extended-query-where-value"><span class="std std-ref">extended_query.where[].value</span></a></strong></code> have to be specified.</p> </div>
</td> </tr> <tr>
<td>


<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-module-parameter-extended-query-where-is"><strong>is</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>


<div class="ansible-option-cell">
<p>The operator to use for matching.</p> <p>For equality use <code>==</code> or <code>eq</code>. For less use <code>&lt;</code> or <code>less</code>. For more use <code>&gt;</code> or <code>more</code>.</p> <p>Use <code>in</code> to check whether the value is part of a list. In that case, <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-extended-query-where-value"><span class="std std-ref">extended_query.where[].value</span></a></strong></code> must be a list.</p> <p>Either <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-extended-query-where-or"><span class="std std-ref">extended_query.where[].or</span></a></strong></code> or all of <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-extended-query-where-attribute"><span class="std std-ref">extended_query.where[].attribute</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-extended-query-where-is"><span class="std std-ref">extended_query.where[].is</span></a></strong></code>, and <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-extended-query-where-value"><span class="std std-ref">extended_query.where[].value</span></a></strong></code> have to be specified.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"=="</code></li> <li><code>"!="</code></li> <li><code>"&gt;"</code></li> <li><code>"&lt;"</code></li> <li><code>"in"</code></li> <li><code>"eq"</code></li> <li><code>"not"</code></li> <li><code>"more"</code></li> <li><code>"less"</code></li> </ul> </div>
</td> </tr> <tr>
<td>


<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-module-parameter-extended-query-where-or"><strong>or</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=dictionary</span></p> </div>
</td> <td>


<div class="ansible-option-cell">
<p>A list of conditions so that at least one of them has to match.</p> <p>Either <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-extended-query-where-or"><span class="std std-ref">extended_query.where[].or</span></a></strong></code> or all of <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-extended-query-where-attribute"><span class="std std-ref">extended_query.where[].attribute</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-extended-query-where-is"><span class="std std-ref">extended_query.where[].is</span></a></strong></code>, and <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-extended-query-where-value"><span class="std std-ref">extended_query.where[].value</span></a></strong></code> have to be specified.</p> </div>
</td> </tr> <tr>
<td>



<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-module-parameter-extended-query-where-or-attribute"><strong>attribute</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div>
</td> <td>



<div class="ansible-option-cell">
<p>The attribute to match. Must be part of <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-extended-query-attributes"><span class="std std-ref">extended_query.attributes</span></a></strong></code>.</p> </div>
</td> </tr> <tr>
<td>



<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-module-parameter-extended-query-where-or-is"><strong>is</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div>
</td> <td>



<div class="ansible-option-cell">
<p>The operator to use for matching.</p> <p>For equality use <code>==</code> or <code>eq</code>. For less use <code>&lt;</code> or <code>less</code>. For more use <code>&gt;</code> or <code>more</code>.</p> <p>Use <code>in</code> to check whether the value is part of a list. In that case, <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-extended-query-where-or-value"><span class="std std-ref">extended_query.where[].or[].value</span></a></strong></code> must be a list.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"=="</code></li> <li><code>"!="</code></li> <li><code>"&gt;"</code></li> <li><code>"&lt;"</code></li> <li><code>"in"</code></li> <li><code>"eq"</code></li> <li><code>"not"</code></li> <li><code>"more"</code></li> <li><code>"less"</code></li> </ul> </div>
</td> </tr> <tr>
<td>



<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-module-parameter-extended-query-where-or-value"><strong>value</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">any</span> / <span class="ansible-option-required">required</span></p> </div>
</td> <td>



<div class="ansible-option-cell">
<p>The value to compare to. Must be a list for <code><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-extended-query-where-or-is"><span class="std std-ref">extended_query.where[].or[].is=in</span></a></code>.</p> </div>
</td> </tr> <tr>
<td>


<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-module-parameter-extended-query-where-value"><strong>value</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">any</span></p> </div>
</td> <td>


<div class="ansible-option-cell">
<p>The value to compare to. Must be a list for <code><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-extended-query-where-is"><span class="std std-ref">extended_query.where[].is=in</span></a></code>.</p> <p>Either <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-extended-query-where-or"><span class="std std-ref">extended_query.where[].or</span></a></strong></code> or all of <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-extended-query-where-attribute"><span class="std std-ref">extended_query.where[].attribute</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-extended-query-where-is"><span class="std std-ref">extended_query.where[].is</span></a></strong></code>, and <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-extended-query-where-value"><span class="std std-ref">extended_query.where[].value</span></a></strong></code> have to be specified.</p> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-module-parameter-force-no-cert"><strong>force_no_cert</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in community.routeros 2.4.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Set to <code>true</code> to connect without a certificate when <code><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-tls"><span class="std std-ref">tls=true</span></a></code>.</p> <p>See also <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-validate-certs"><span class="std std-ref">validate_certs</span></a></strong></code>.</p> <p><strong>Note:</strong> this forces the use of anonymous Diffie-Hellman (ADH) ciphers. The protocol is susceptible to Man-in-the-Middle attacks, because the keys used in the exchange are not authenticated. Instead of simply connecting without a certificate to “make things work” have a look at <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-validate-certs"><span class="std std-ref">validate_certs</span></a></strong></code> and <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-ca-path"><span class="std std-ref">ca_path</span></a></strong></code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-module-parameter-hostname"><strong>hostname</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>RouterOS hostname API.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-module-parameter-password"><strong>password</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>RouterOS user password.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-module-parameter-path"><strong>path</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Main path for all other arguments.</p> <p>If other arguments are not set, api will return all items in selected path.</p> <p>Example <code>ip address</code>. Equivalent of RouterOS CLI <code>/ip address print</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-module-parameter-port"><strong>port</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>RouterOS api port. If <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-tls"><span class="std std-ref">tls</span></a></strong></code> is set, port will apply to TLS/SSL connection.</p> <p>Defaults are <code>8728</code> for the HTTP API, and <code>8729</code> for the HTTPS API.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-module-parameter-query"><strong>query</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Query given path for selected query attributes from RouterOS aip.</p> <p>WHERE is key word which extend query. WHERE format is key operator value - with spaces.</p> <p>WHERE valid operators are <code>==</code> or <code>eq</code>, <code>!=</code> or <code>not</code>, <code>&gt;</code> or <code>more</code>, <code>&lt;</code> or <code>less</code>.</p> <p>Example path <code>ip address</code> and query <code>.id address</code> will return only <code>.id</code> and <code>address</code> for all items in <code>ip address</code> path.</p> <p>Example path <code>ip address</code> and query <code>.id address WHERE address == 1.1.1.3/32</code>. will return only <code>.id</code> and <code>address</code> for items in <code>ip address</code> path, where address is eq to 1.1.1.3/32.</p> <p>Example path <code>interface</code> and query <code>mtu name WHERE mut &gt; 1400</code> will return only interfaces <code>mtu,name</code> where mtu is bigger than 1400.</p> <p>Equivalent in RouterOS CLI <code>/interface print where mtu &gt; 1400</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-module-parameter-remove"><strong>remove</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Remove config/value from RouterOS by ‘.id’.</p> <p>Example <code>*03</code> will remove config/value with <code>id=*03</code> in selected path.</p> <p>Equivalent in RouterOS CLI <code>/ip address remove numbers=1</code>.</p> <p>Note <code>number</code> in RouterOS CLI is different from <code>.id</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-module-parameter-timeout"><strong>timeout</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> <p><em class="ansible-option-versionadded">added in community.routeros 2.3.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Timeout for the request.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>10</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-module-parameter-tls"><strong id="ansible-collections-community-routeros-api-module-parameter-ssl">tls</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: ssl</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>If is set TLS will be used for RouterOS API connection.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-module-parameter-update"><strong>update</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Update config/value in RouterOS by ‘.id’ in selected path.</p> <p>Example <code>.id=*03 address=1.1.1.3/32</code> and path <code>ip address</code> will replace existing ip address with <code>.id=*03</code>.</p> <p>Equivalent in RouterOS CLI <code>/ip address set address=1.1.1.3/32 numbers=1</code>.</p> <p>Note <code>number</code> in RouterOS CLI is different from <code>.id</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-module-parameter-username"><strong>username</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>RouterOS login user.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-module-parameter-validate-cert-hostname"><strong>validate_cert_hostname</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in community.routeros 1.2.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Set to <code>true</code> to validate hostnames in certificates.</p> <p>See also <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-validate-certs"><span class="std std-ref">validate_certs</span></a></strong></code>. Only used when <code><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-tls"><span class="std std-ref">tls=true</span></a></code> and <code><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-validate-certs"><span class="std std-ref">validate_certs=true</span></a></code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-module-parameter-validate-certs"><strong>validate_certs</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in community.routeros 1.2.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Set to <code>false</code> to skip validation of TLS certificates.</p> <p>See also <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-validate-cert-hostname"><span class="std std-ref">validate_cert_hostname</span></a></strong></code>. Only used when <code><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-tls"><span class="std std-ref">tls=true</span></a></code>.</p> <p><strong>Note:</strong> instead of simply deactivating certificate validations to “make things work”, please consider creating your own CA certificate and using it to sign certificates used for your router. You can tell the module about your CA certificate with the <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-ca-path"><span class="std std-ref">ca_path</span></a></strong></code> option.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr>  </table> </section> <section id="attributes"> <h2>Attributes</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Attribute</p></th> <th class="head"><p>Support</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-module-attribute-action-group"><strong>action_group</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-property">Action group:</strong> <strong class="ansible-attribute-support-full">community.routeros.api</strong></p> <p><em class="ansible-option-versionadded">added in community.routeros 2.1.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Use <code>group/community.routeros.api</code> in <code>module_defaults</code> to set defaults for this module.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-module-attribute-check-mode"><strong>check_mode</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-label">Support: </strong><strong class="ansible-attribute-support-none">none</strong></p> </div></td> <td><div class="ansible-option-cell">
<p>Can run in <code>check_mode</code> and return changed status prediction without modifying target.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-module-attribute-diff-mode"><strong>diff_mode</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-label">Support: </strong><strong class="ansible-attribute-support-none">none</strong></p> </div></td> <td><div class="ansible-option-cell">
<p>Will return details on what has changed (or possibly needs changing in <code>check_mode</code>), when in diff mode.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-module-attribute-platform"><strong>platform</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-property">Platform:</strong> <strong class="ansible-attribute-support-full">RouterOS</strong></p> </div></td> <td><div class="ansible-option-cell">
<p>Target OS/families that can be operated against.</p> </div></td> </tr>  </table> </section> <section id="notes"> <h2>Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>
<code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-add"><span class="std std-ref">add</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-remove"><span class="std std-ref">remove</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-update"><span class="std std-ref">update</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-cmd"><span class="std std-ref">cmd</span></a></strong></code>, and <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-module-parameter-query"><span class="std std-ref">query</span></a></strong></code> are mutually exclusive.</li> <li>Use the <a class="reference internal" href="api_modify_module.html#ansible-collections-community-routeros-api-modify-module"><span class="std std-ref">community.routeros.api_modify</span></a> and <a class="reference internal" href="api_find_and_modify_module.html#ansible-collections-community-routeros-api-find-and-modify-module"><span class="std std-ref">community.routeros.api_find_and_modify</span></a> modules for more specific modifications, and the <a class="reference internal" href="api_info_module.html#ansible-collections-community-routeros-api-info-module"><span class="std std-ref">community.routeros.api_info</span></a> module for a more controlled way of returning all entries for a path.</li> </ul> </div> </section> <section id="see-also"> <h2>See Also</h2> <div class="admonition seealso"> <p class="admonition-title">See also</p> <dl class="simple"> <dt><a class="reference internal" href="docsite/quoting.html#ansible-collections-community-routeros-docsite-quoting"><span class="std std-ref">How to quote and unquote commands and arguments</span></a></dt>
<dd>
<p>How to quote and unquote commands and arguments</p> </dd> <dt><a class="reference internal" href="api_facts_module.html#ansible-collections-community-routeros-api-facts-module"><span class="std std-ref">community.routeros.api_facts</span></a></dt>
<dd>
<p>Collect facts from remote devices running MikroTik RouterOS using the API.</p> </dd> <dt><a class="reference internal" href="api_find_and_modify_module.html#ansible-collections-community-routeros-api-find-and-modify-module"><span class="std std-ref">community.routeros.api_find_and_modify</span></a></dt>
<dd>
<p>Find and modify information using the API.</p> </dd> <dt><a class="reference internal" href="api_info_module.html#ansible-collections-community-routeros-api-info-module"><span class="std std-ref">community.routeros.api_info</span></a></dt>
<dd>
<p>Retrieve information from API.</p> </dd> <dt><a class="reference internal" href="api_modify_module.html#ansible-collections-community-routeros-api-modify-module"><span class="std std-ref">community.routeros.api_modify</span></a></dt>
<dd>
<p>Modify data at paths with API.</p> </dd> <dt><a class="reference internal" href="docsite/api-guide.html#ansible-collections-community-routeros-docsite-api-guide"><span class="std std-ref">How to connect to RouterOS devices with the RouterOS API</span></a></dt>
<dd>
<p>How to connect to RouterOS devices with the RouterOS API</p> </dd> </dl> </div> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja">- name: Get example - ip address print
  community.routeros.api:
    hostname: "{{ hostname }}"
    password: "{{ password }}"
    username: "{{ username }}"
    path: "ip address"
  register: ipaddrd_printout

- name: Dump "Get example" output
  ansible.builtin.debug:
    msg: '{{ ipaddrd_printout }}'

- name: Add example - ip address
  community.routeros.api:
    hostname: "{{ hostname }}"
    password: "{{ password }}"
    username: "{{ username }}"
    path: "ip address"
    add: "address=192.168.255.10/24 interface=ether2"

- name: Query example - ".id, address" in "ip address WHERE address == 192.168.255.10/24"
  community.routeros.api:
    hostname: "{{ hostname }}"
    password: "{{ password }}"
    username: "{{ username }}"
    path: "ip address"
    query: ".id address WHERE address == {{ ip2 }}"
  register: queryout

- name: Dump "Query example" output
  ansible.builtin.debug:
    msg: '{{ queryout }}'

- name: Extended query example - ".id,address,network" where address is not 192.168.255.10/24 or is 10.20.36.20/24
  community.routeros.api:
    hostname: "{{ hostname }}"
    password: "{{ password }}"
    username: "{{ username }}"
    path: "ip address"
    extended_query:
      attributes:
        - network
        - address
        - .id
      where:
        - attribute: "network"
          is: "=="
          value: "192.168.255.0"
        - or:
            - attribute: "address"
              is: "!="
              value: "192.168.255.10/24"
            - attribute: "address"
              is: "eq"
              value: "10.20.36.20/24"
        - attribute: "network"
          is: "in"
          value:
             - "10.20.36.0"
             - "192.168.255.0"
  register: extended_queryout

- name: Dump "Extended query example" output
  ansible.builtin.debug:
    msg: '{{ extended_queryout }}'

- name: Update example - ether2 ip address with ".id = *14"
  community.routeros.api:
    hostname: "{{ hostname }}"
    password: "{{ password }}"
    username: "{{ username }}"
    path: "ip address"
    update: &gt;-
        .id=*14
        address=192.168.255.20/24
        comment={{ 'Update 192.168.255.10/24 to 192.168.255.20/24 on ether2' | community.routeros.quote_argument_value }}

- name: Remove example - ether2 ip 192.168.255.20/24 with ".id = *14"
  community.routeros.api:
    hostname: "{{ hostname }}"
    password: "{{ password }}"
    username: "{{ username }}"
    path: "ip address"
    remove: "*14"

- name: Arbitrary command example "/system identity print"
  community.routeros.api:
    hostname: "{{ hostname }}"
    password: "{{ password }}"
    username: "{{ username }}"
    path: "system identity"
    cmd: "print"
  register: arbitraryout

- name: Dump "Arbitrary command example" output
  ansible.builtin.debug:
    msg: '{{ arbitraryout }}'
</pre> </section> <section id="return-values"> <h2>Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values.html#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Key</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-module-return-message"><strong>message</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>All outputs are in list with dictionary elements returned from RouterOS api.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> always</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>[{"address": "1.2.3.4"}, {"address": "2.3.4.5"}]</code></p> </div></td> </tr>  </table> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Nikolay Dachev (@NikolayDachev)</li> </ul> </section> <section id="collection-links"> <h3>Collection links</h3> <ul class="ansible-links"> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.routeros/issues" rel="noopener external" target="_blank">Issue Tracker</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.routeros" rel="noopener external" target="_blank">Repository (Sources)</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://forum.ansible.com/tags/c/help/6/none/routeros" rel="noopener external" target="_blank">Ask for help (RouterOS)</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.routeros/issues/new?assignees=&amp;labels=&amp;template=bug_report.md" rel="noopener external" target="_blank">Submit a bug report</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.routeros/issues/new?assignees=&amp;labels=&amp;template=feature_request.md" rel="noopener external" target="_blank">Request a feature</a></span></li> <li><span><a class="reference internal" href="index.html#communication-for-community-routeros"><span class="std std-ref">Communication</span></a></span></li> </ul> </section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2024 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/community/routeros/api_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/community/routeros/api_module.html</a>
  </p>
</div>
