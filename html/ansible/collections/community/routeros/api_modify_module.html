<section id="community-routeros-api-modify-module-modify-data-at-paths-with-api"> <h1>community.routeros.api_modify module – Modify data at paths with API</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module is part of the <a class="reference external" href="https://galaxy.ansible.com/ui/repo/published/community/routeros/">community.routeros collection</a> (version 2.19.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install community.routeros</code>. You need further requirements to be able to use this module, see <a class="reference internal" href="#ansible-collections-community-routeros-api-modify-module-requirements"><span class="std std-ref">Requirements</span></a> for details.</p> <p>To use it in a playbook, specify: <code>community.routeros.api_modify</code>.</p> </div> <p class="ansible-version-added">New in community.routeros 2.2.0</p>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#attributes" id="id4">Attributes</a></li> <li><a class="reference internal" href="#notes" id="id5">Notes</a></li> <li><a class="reference internal" href="#see-also" id="id6">See Also</a></li> <li><a class="reference internal" href="#examples" id="id7">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id8">Return Values</a></li> </ul>  <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>Allows to modify information for a path using the API.</li> <li>Use the <a class="reference internal" href="api_find_and_modify_module.html#ansible-collections-community-routeros-api-find-and-modify-module"><span class="std std-ref">community.routeros.api_find_and_modify</span></a> module to modify one or multiple entries in a controlled way depending on some search conditions.</li> <li>To make a backup of a path that can be restored with this module, use the <a class="reference internal" href="api_info_module.html#ansible-collections-community-routeros-api-info-module"><span class="std std-ref">community.routeros.api_info</span></a> module.</li> <li>The module ignores dynamic and builtin entries.</li> <li>
<strong>Note</strong> that this module is still heavily in development, and only supports <strong>some</strong> paths. If you want to support new paths, or think you found problems with existing paths, please first <a class="reference external" href="https://github.com/ansible-collections/community.routeros/issues/">create an issue in the community.routeros Issue Tracker</a>.</li> </ul> </section> <section id="requirements"> <h2 id="ansible-collections-community-routeros-api-modify-module-requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>Needs <a class="reference external" href="https://pypi.org/project/ordereddict">ordereddict</a> for Python 2.6</li> <li>Python &gt;= 3.6 (for librouteros)</li> <li>librouteros</li> </ul> </section> <section id="parameters"> <h2>Parameters</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-modify-module-parameter-ca-path"><strong>ca_path</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">path</span></p> <p><em class="ansible-option-versionadded">added in community.routeros 1.2.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>PEM formatted file that contains a CA certificate to be used for certificate validation.</p> <p>See also <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-modify-module-parameter-validate-cert-hostname"><span class="std std-ref">validate_cert_hostname</span></a></strong></code>. Only used when <code><a class="reference internal" href="#ansible-collections-community-routeros-api-modify-module-parameter-tls"><span class="std std-ref">tls=true</span></a></code> and <code><a class="reference internal" href="#ansible-collections-community-routeros-api-modify-module-parameter-validate-certs"><span class="std std-ref">validate_certs=true</span></a></code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-modify-module-parameter-data"><strong>data</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=dictionary</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Data to ensure that is present for this path.</p> <p>Fields not provided will not be modified.</p> <p>If <code>.id</code> appears in an entry, it will be ignored.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-modify-module-parameter-encoding"><strong>encoding</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in community.routeros 2.1.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Use the specified encoding when communicating with the RouterOS device.</p> <p>Default is <code>ASCII</code>. Note that <code>UTF-8</code> requires librouteros 3.2.1 or newer.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"ASCII"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-modify-module-parameter-ensure-order"><strong>ensure_order</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Whether to ensure the same order of the config as present in <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-modify-module-parameter-data"><span class="std std-ref">data</span></a></strong></code>.</p> <p>Requires <code><a class="reference internal" href="#ansible-collections-community-routeros-api-modify-module-parameter-handle-absent-entries"><span class="std std-ref">handle_absent_entries=remove</span></a></code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-modify-module-parameter-force-no-cert"><strong>force_no_cert</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in community.routeros 2.4.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Set to <code>true</code> to connect without a certificate when <code><a class="reference internal" href="#ansible-collections-community-routeros-api-modify-module-parameter-tls"><span class="std std-ref">tls=true</span></a></code>.</p> <p>See also <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-modify-module-parameter-validate-certs"><span class="std std-ref">validate_certs</span></a></strong></code>.</p> <p><strong>Note:</strong> this forces the use of anonymous Diffie-Hellman (ADH) ciphers. The protocol is susceptible to Man-in-the-Middle attacks, because the keys used in the exchange are not authenticated. Instead of simply connecting without a certificate to “make things work” have a look at <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-modify-module-parameter-validate-certs"><span class="std std-ref">validate_certs</span></a></strong></code> and <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-modify-module-parameter-ca-path"><span class="std std-ref">ca_path</span></a></strong></code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-modify-module-parameter-handle-absent-entries"><strong>handle_absent_entries</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>How to handle entries that are present in the current config, but not in <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-modify-module-parameter-data"><span class="std std-ref">data</span></a></strong></code>.</p> <p><code>ignore</code> ignores them.</p> <p><code>remove</code> removes them.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"ignore"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"remove"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-modify-module-parameter-handle-entries-content"><strong>handle_entries_content</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>For a single entry in <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-modify-module-parameter-data"><span class="std std-ref">data</span></a></strong></code>, this describes how to handle fields that are not mentioned in that entry, but appear in the actual config.</p> <p>If <code>ignore</code>, they are not modified.</p> <p>If <code>remove</code>, they are removed. If at least one cannot be removed, the module will fail.</p> <p>If <code>remove_as_much_as_possible</code>, all that can be removed will be removed. The ones that cannot be removed will be kept.</p> <p>Note that <code>remove</code> and <code>remove_as_much_as_possible</code> do not apply to write-only fields.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"ignore"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"remove"</code></li> <li><code>"remove_as_much_as_possible"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-modify-module-parameter-handle-read-only"><strong>handle_read_only</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in community.routeros 2.10.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>How to handle values passed in for read-only fields.</p> <p>If <code>ignore</code>, they are not passed to the API.</p> <p>If <code>validate</code>, the values are not passed for creation, and for updating they are compared to the value returned for the object. If they differ, the module fails.</p> <p>If <code>error</code>, the module will fail if read-only fields are provided.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"ignore"</code></li> <li><code>"validate"</code></li> <li>
<code><strong>"error"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-modify-module-parameter-handle-write-only"><strong>handle_write_only</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in community.routeros 2.10.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>How to handle values passed in for write-only fields.</p> <p>If <code>create_only</code>, they are passed on creation, and ignored for updating.</p> <p>If <code>always_update</code>, they are always passed to the API. This means that if such a value is present, the module will always result in <code>changed</code> since there is no way to validate whether the value actually changed.</p> <p>If <code>error</code>, the module will fail if write-only fields are provided.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"create_only"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"always_update"</code></li> <li><code>"error"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-modify-module-parameter-hostname"><strong>hostname</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>RouterOS hostname API.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-modify-module-parameter-password"><strong>password</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>RouterOS user password.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-modify-module-parameter-path"><strong>path</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Path to query.</p> <p>An example value is <code>ip address</code>. This is equivalent to running modification commands in <code>/ip address</code> in the RouterOS CLI.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"caps-man aaa"</code></li> <li><code>"caps-man access-list"</code></li> <li><code>"caps-man channel"</code></li> <li><code>"caps-man configuration"</code></li> <li><code>"caps-man datapath"</code></li> <li><code>"caps-man manager"</code></li> <li><code>"caps-man manager interface"</code></li> <li><code>"caps-man provisioning"</code></li> <li><code>"caps-man security"</code></li> <li><code>"certificate settings"</code></li> <li><code>"interface bonding"</code></li> <li><code>"interface bridge"</code></li> <li><code>"interface bridge mlag"</code></li> <li><code>"interface bridge port"</code></li> <li><code>"interface bridge port-controller"</code></li> <li><code>"interface bridge port-extender"</code></li> <li><code>"interface bridge settings"</code></li> <li><code>"interface bridge vlan"</code></li> <li><code>"interface detect-internet"</code></li> <li><code>"interface eoip"</code></li> <li><code>"interface ethernet"</code></li> <li><code>"interface ethernet poe"</code></li> <li><code>"interface ethernet switch"</code></li> <li><code>"interface ethernet switch port"</code></li> <li><code>"interface gre"</code></li> <li><code>"interface gre6"</code></li> <li><code>"interface l2tp-server server"</code></li> <li><code>"interface list"</code></li> <li><code>"interface list member"</code></li> <li><code>"interface ovpn-client"</code></li> <li><code>"interface ovpn-server server"</code></li> <li><code>"interface ppp-client"</code></li> <li><code>"interface pppoe-client"</code></li> <li><code>"interface pppoe-server server"</code></li> <li><code>"interface pptp-server server"</code></li> <li><code>"interface sstp-server server"</code></li> <li><code>"interface vlan"</code></li> <li><code>"interface vrrp"</code></li> <li><code>"interface wifi"</code></li> <li><code>"interface wifi aaa"</code></li> <li><code>"interface wifi access-list"</code></li> <li><code>"interface wifi cap"</code></li> <li><code>"interface wifi capsman"</code></li> <li><code>"interface wifi channel"</code></li> <li><code>"interface wifi configuration"</code></li> <li><code>"interface wifi datapath"</code></li> <li><code>"interface wifi interworking"</code></li> <li><code>"interface wifi provisioning"</code></li> <li><code>"interface wifi security"</code></li> <li><code>"interface wifi steering"</code></li> <li><code>"interface wifiwave2"</code></li> <li><code>"interface wifiwave2 aaa"</code></li> <li><code>"interface wifiwave2 access-list"</code></li> <li><code>"interface wifiwave2 cap"</code></li> <li><code>"interface wifiwave2 capsman"</code></li> <li><code>"interface wifiwave2 channel"</code></li> <li><code>"interface wifiwave2 configuration"</code></li> <li><code>"interface wifiwave2 datapath"</code></li> <li><code>"interface wifiwave2 interworking"</code></li> <li><code>"interface wifiwave2 provisioning"</code></li> <li><code>"interface wifiwave2 security"</code></li> <li><code>"interface wifiwave2 steering"</code></li> <li><code>"interface wireguard"</code></li> <li><code>"interface wireguard peers"</code></li> <li><code>"interface wireless"</code></li> <li><code>"interface wireless align"</code></li> <li><code>"interface wireless cap"</code></li> <li><code>"interface wireless security-profiles"</code></li> <li><code>"interface wireless sniffer"</code></li> <li><code>"interface wireless snooper"</code></li> <li><code>"iot modbus"</code></li> <li><code>"ip accounting"</code></li> <li><code>"ip accounting web-access"</code></li> <li><code>"ip address"</code></li> <li><code>"ip arp"</code></li> <li><code>"ip cloud"</code></li> <li><code>"ip cloud advanced"</code></li> <li><code>"ip dhcp-client"</code></li> <li><code>"ip dhcp-client option"</code></li> <li><code>"ip dhcp-relay"</code></li> <li><code>"ip dhcp-server"</code></li> <li><code>"ip dhcp-server config"</code></li> <li><code>"ip dhcp-server lease"</code></li> <li><code>"ip dhcp-server matcher"</code></li> <li><code>"ip dhcp-server network"</code></li> <li><code>"ip dhcp-server option"</code></li> <li><code>"ip dhcp-server option sets"</code></li> <li><code>"ip dns"</code></li> <li><code>"ip dns adlist"</code></li> <li><code>"ip dns static"</code></li> <li><code>"ip firewall address-list"</code></li> <li><code>"ip firewall connection tracking"</code></li> <li><code>"ip firewall filter"</code></li> <li><code>"ip firewall layer7-protocol"</code></li> <li><code>"ip firewall mangle"</code></li> <li><code>"ip firewall nat"</code></li> <li><code>"ip firewall raw"</code></li> <li><code>"ip firewall service-port"</code></li> <li><code>"ip hotspot service-port"</code></li> <li><code>"ip ipsec identity"</code></li> <li><code>"ip ipsec peer"</code></li> <li><code>"ip ipsec policy"</code></li> <li><code>"ip ipsec profile"</code></li> <li><code>"ip ipsec proposal"</code></li> <li><code>"ip ipsec settings"</code></li> <li><code>"ip neighbor discovery-settings"</code></li> <li><code>"ip pool"</code></li> <li><code>"ip proxy"</code></li> <li><code>"ip route"</code></li> <li><code>"ip route rule"</code></li> <li><code>"ip route vrf"</code></li> <li><code>"ip service"</code></li> <li><code>"ip settings"</code></li> <li><code>"ip smb"</code></li> <li><code>"ip socks"</code></li> <li><code>"ip ssh"</code></li> <li><code>"ip tftp settings"</code></li> <li><code>"ip traffic-flow"</code></li> <li><code>"ip traffic-flow ipfix"</code></li> <li><code>"ip traffic-flow target"</code></li> <li><code>"ip upnp"</code></li> <li><code>"ip upnp interfaces"</code></li> <li><code>"ip vrf"</code></li> <li><code>"ipv6 address"</code></li> <li><code>"ipv6 dhcp-client"</code></li> <li><code>"ipv6 dhcp-server"</code></li> <li><code>"ipv6 dhcp-server option"</code></li> <li><code>"ipv6 firewall address-list"</code></li> <li><code>"ipv6 firewall filter"</code></li> <li><code>"ipv6 firewall mangle"</code></li> <li><code>"ipv6 firewall nat"</code></li> <li><code>"ipv6 firewall raw"</code></li> <li><code>"ipv6 nd"</code></li> <li><code>"ipv6 nd prefix"</code></li> <li><code>"ipv6 nd prefix default"</code></li> <li><code>"ipv6 route"</code></li> <li><code>"ipv6 settings"</code></li> <li><code>"mpls"</code></li> <li><code>"mpls interface"</code></li> <li><code>"mpls ldp"</code></li> <li><code>"mpls ldp accept-filter"</code></li> <li><code>"mpls ldp advertise-filter"</code></li> <li><code>"mpls ldp interface"</code></li> <li><code>"port firmware"</code></li> <li><code>"port remote-access"</code></li> <li><code>"ppp aaa"</code></li> <li><code>"ppp profile"</code></li> <li><code>"ppp secret"</code></li> <li><code>"queue interface"</code></li> <li><code>"queue simple"</code></li> <li><code>"queue tree"</code></li> <li><code>"queue type"</code></li> <li><code>"radius"</code></li> <li><code>"radius incoming"</code></li> <li><code>"routing bgp aggregate"</code></li> <li><code>"routing bgp connection"</code></li> <li><code>"routing bgp instance"</code></li> <li><code>"routing bgp network"</code></li> <li><code>"routing bgp peer"</code></li> <li><code>"routing bgp template"</code></li> <li><code>"routing filter"</code></li> <li><code>"routing filter num-list"</code></li> <li><code>"routing filter rule"</code></li> <li><code>"routing filter select-rule"</code></li> <li><code>"routing id"</code></li> <li><code>"routing igmp-proxy"</code></li> <li><code>"routing igmp-proxy interface"</code></li> <li><code>"routing mme"</code></li> <li><code>"routing ospf area"</code></li> <li><code>"routing ospf area range"</code></li> <li><code>"routing ospf instance"</code></li> <li><code>"routing ospf interface-template"</code></li> <li><code>"routing ospf static-neighbor"</code></li> <li><code>"routing pimsm instance"</code></li> <li><code>"routing pimsm interface-template"</code></li> <li><code>"routing rip"</code></li> <li><code>"routing ripng"</code></li> <li><code>"routing rule"</code></li> <li><code>"routing table"</code></li> <li><code>"snmp"</code></li> <li><code>"snmp community"</code></li> <li><code>"system clock"</code></li> <li><code>"system clock manual"</code></li> <li><code>"system health settings"</code></li> <li><code>"system identity"</code></li> <li><code>"system leds settings"</code></li> <li><code>"system logging"</code></li> <li><code>"system logging action"</code></li> <li><code>"system note"</code></li> <li><code>"system ntp client"</code></li> <li><code>"system ntp client servers"</code></li> <li><code>"system ntp server"</code></li> <li><code>"system package update"</code></li> <li><code>"system resource irq rps"</code></li> <li><code>"system routerboard settings"</code></li> <li><code>"system scheduler"</code></li> <li><code>"system script"</code></li> <li><code>"system upgrade mirror"</code></li> <li><code>"system ups"</code></li> <li><code>"system watchdog"</code></li> <li><code>"tool bandwidth-server"</code></li> <li><code>"tool e-mail"</code></li> <li><code>"tool graphing"</code></li> <li><code>"tool graphing interface"</code></li> <li><code>"tool graphing resource"</code></li> <li><code>"tool mac-server"</code></li> <li><code>"tool mac-server mac-winbox"</code></li> <li><code>"tool mac-server ping"</code></li> <li><code>"tool netwatch"</code></li> <li><code>"tool romon"</code></li> <li><code>"tool sms"</code></li> <li><code>"tool sniffer"</code></li> <li><code>"tool traffic-generator"</code></li> <li><code>"user"</code></li> <li><code>"user aaa"</code></li> <li><code>"user group"</code></li> <li><code>"user settings"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-modify-module-parameter-port"><strong>port</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>RouterOS api port. If <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-modify-module-parameter-tls"><span class="std std-ref">tls</span></a></strong></code> is set, port will apply to TLS/SSL connection.</p> <p>Defaults are <code>8728</code> for the HTTP API, and <code>8729</code> for the HTTPS API.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-modify-module-parameter-restrict"><strong>restrict</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=dictionary</span></p> <p><em class="ansible-option-versionadded">added in community.routeros 2.18.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Restrict operation to entries matching the following criteria.</p> <p>This can be useful together with <code><a class="reference internal" href="#ansible-collections-community-routeros-api-modify-module-parameter-handle-absent-entries"><span class="std std-ref">handle_absent_entries=remove</span></a></code> to operate on a subset of the values.</p> <p>For example, for <code><a class="reference internal" href="#ansible-collections-community-routeros-api-modify-module-parameter-path"><span class="std std-ref">path=ip firewall filter</span></a></code>, you can set <code><a class="reference internal" href="#ansible-collections-community-routeros-api-modify-module-parameter-restrict-field"><span class="std std-ref">restrict[].field=chain</span></a></code> and <code><a class="reference internal" href="#ansible-collections-community-routeros-api-modify-module-parameter-restrict-values"><span class="std std-ref">restrict[].values=input</span></a></code> to restrict operation to the input chain, and ignore the forward and output chains.</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-modify-module-parameter-restrict-field"><strong>field</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The field whose values to restrict.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-modify-module-parameter-restrict-invert"><strong>invert</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Invert the condition. This affects <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-modify-module-parameter-restrict-match-disabled"><span class="std std-ref">restrict[].match_disabled</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-modify-module-parameter-restrict-values"><span class="std std-ref">restrict[].values</span></a></strong></code>, and <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-modify-module-parameter-restrict-regex"><span class="std std-ref">restrict[].regex</span></a></strong></code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-modify-module-parameter-restrict-match-disabled"><strong>match_disabled</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Whether disabled or not provided values should match.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-modify-module-parameter-restrict-regex"><strong>regex</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>A regular expression matching values of the field to limit to.</p> <p>Note that all values will be converted to strings before matching.</p> <p>It is not possible to match disabled values with regular expressions. Set <code><a class="reference internal" href="#ansible-collections-community-routeros-api-modify-module-parameter-restrict-match-disabled"><span class="std std-ref">restrict[].match_disabled=true</span></a></code> if you also want to match disabled values.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-modify-module-parameter-restrict-values"><strong>values</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=any</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The values of the field to limit to.</p> <p>Note that the types of the values are important. If you provide a string <code>"0"</code>, and librouteros converts the value returned by the API to the integer <code>0</code>, then this will not match. If you are not sure, better include both variants: both the string and the integer.</p> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-modify-module-parameter-timeout"><strong>timeout</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> <p><em class="ansible-option-versionadded">added in community.routeros 2.3.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Timeout for the request.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>10</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-modify-module-parameter-tls"><strong id="ansible-collections-community-routeros-api-modify-module-parameter-ssl">tls</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: ssl</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>If is set TLS will be used for RouterOS API connection.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-modify-module-parameter-username"><strong>username</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>RouterOS login user.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-modify-module-parameter-validate-cert-hostname"><strong>validate_cert_hostname</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in community.routeros 1.2.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Set to <code>true</code> to validate hostnames in certificates.</p> <p>See also <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-modify-module-parameter-validate-certs"><span class="std std-ref">validate_certs</span></a></strong></code>. Only used when <code><a class="reference internal" href="#ansible-collections-community-routeros-api-modify-module-parameter-tls"><span class="std std-ref">tls=true</span></a></code> and <code><a class="reference internal" href="#ansible-collections-community-routeros-api-modify-module-parameter-validate-certs"><span class="std std-ref">validate_certs=true</span></a></code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-modify-module-parameter-validate-certs"><strong>validate_certs</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in community.routeros 1.2.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Set to <code>false</code> to skip validation of TLS certificates.</p> <p>See also <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-modify-module-parameter-validate-cert-hostname"><span class="std std-ref">validate_cert_hostname</span></a></strong></code>. Only used when <code><a class="reference internal" href="#ansible-collections-community-routeros-api-modify-module-parameter-tls"><span class="std std-ref">tls=true</span></a></code>.</p> <p><strong>Note:</strong> instead of simply deactivating certificate validations to “make things work”, please consider creating your own CA certificate and using it to sign certificates used for your router. You can tell the module about your CA certificate with the <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-modify-module-parameter-ca-path"><span class="std std-ref">ca_path</span></a></strong></code> option.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr>  </table> </section> <section id="attributes"> <h2>Attributes</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Attribute</p></th> <th class="head"><p>Support</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-modify-module-attribute-action-group"><strong>action_group</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-property">Action group:</strong> <strong class="ansible-attribute-support-full">community.routeros.api</strong></p> </div></td> <td><div class="ansible-option-cell">
<p>Use <code>group/community.routeros.api</code> in <code>module_defaults</code> to set defaults for this module.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-modify-module-attribute-check-mode"><strong>check_mode</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-label">Support: </strong><strong class="ansible-attribute-support-full">full</strong></p> </div></td> <td><div class="ansible-option-cell">
<p>Can run in <code>check_mode</code> and return changed status prediction without modifying target.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-modify-module-attribute-diff-mode"><strong>diff_mode</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-label">Support: </strong><strong class="ansible-attribute-support-full">full</strong></p> </div></td> <td><div class="ansible-option-cell">
<p>Will return details on what has changed (or possibly needs changing in <code>check_mode</code>), when in diff mode.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-modify-module-attribute-platform"><strong>platform</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-property">Platform:</strong> <strong class="ansible-attribute-support-full">RouterOS</strong></p> </div></td> <td><div class="ansible-option-cell">
<p>Target OS/families that can be operated against.</p> </div></td> </tr>  </table> </section> <section id="notes"> <h2>Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>If write-only fields are present in the path, the module is <strong>not idempotent</strong> in a strict sense, since it is not able to verify the current value of these fields. The behavior the module should assume can be controlled with the <code><strong><a class="reference internal" href="#ansible-collections-community-routeros-api-modify-module-parameter-handle-write-only"><span class="std std-ref">handle_write_only</span></a></strong></code> option.</li> </ul> </div> </section> <section id="see-also"> <h2>See Also</h2> <div class="admonition seealso"> <p class="admonition-title">See also</p> <dl class="simple"> <dt><a class="reference internal" href="api_module.html#ansible-collections-community-routeros-api-module"><span class="std std-ref">community.routeros.api</span></a></dt>
<dd>
<p>Ansible module for RouterOS API.</p> </dd> <dt><a class="reference internal" href="api_facts_module.html#ansible-collections-community-routeros-api-facts-module"><span class="std std-ref">community.routeros.api_facts</span></a></dt>
<dd>
<p>Collect facts from remote devices running MikroTik RouterOS using the API.</p> </dd> <dt><a class="reference internal" href="api_find_and_modify_module.html#ansible-collections-community-routeros-api-find-and-modify-module"><span class="std std-ref">community.routeros.api_find_and_modify</span></a></dt>
<dd>
<p>Find and modify information using the API.</p> </dd> <dt><a class="reference internal" href="api_info_module.html#ansible-collections-community-routeros-api-info-module"><span class="std std-ref">community.routeros.api_info</span></a></dt>
<dd>
<p>Retrieve information from API.</p> </dd> <dt><a class="reference internal" href="docsite/api-guide.html#ansible-collections-community-routeros-docsite-api-guide"><span class="std std-ref">How to connect to RouterOS devices with the RouterOS API</span></a></dt>
<dd>
<p>How to connect to RouterOS devices with the RouterOS API</p> </dd> </dl> </div> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja">---
- name: Setup DHCP server networks
  # Ensures that we have exactly two DHCP server networks (in the specified order)
  community.routeros.api_modify:
    path: ip dhcp-server network
    handle_absent_entries: remove
    handle_entries_content: remove_as_much_as_possible
    ensure_order: true
    data:
      - address: 192.168.88.0/24
        comment: admin network
        dns-server: 192.168.88.1
        gateway: 192.168.88.1
      - address: 192.168.1.0/24
        comment: customer network 1
        dns-server: 192.168.1.1
        gateway: 192.168.1.1
        netmask: 24

- name: Adjust NAT
  community.routeros.api_modify:
    hostname: "{{ hostname }}"
    password: "{{ password }}"
    username: "{{ username }}"
    path: ip firewall nat
    data:
      - action: masquerade
        chain: srcnat
        comment: NAT to WAN
        out-interface-list: WAN
        # Three ways to unset values:
        #   - nothing after `:`
        #   - "empty" value (null/~/None)
        #   - prepend '!'
        out-interface:
        to-addresses: ~
        '!to-ports':

- name: Block all incoming connections
  community.routeros.api_modify:
    hostname: "{{ hostname }}"
    password: "{{ password }}"
    username: "{{ username }}"
    path: ip firewall filter
    handle_absent_entries: remove
    handle_entries_content: remove_as_much_as_possible
    restrict:
      # Do not touch any chain except the input chain
      - field: chain
        values:
          - input
    data:
      - action: drop
        chain: input
</pre> </section> <section id="return-values"> <h2>Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values.html#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Key</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-modify-module-return-new-data"><strong>new_data</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>A list of all elements for the current path after a change was made.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> always</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>[{".id": "*1", "actual-interface": "bridge", "address": "192.168.1.1/24", "comment": "awesome", "disabled": false, "dynamic": false, "interface": "bridge", "invalid": false, "network": "192.168.1.0"}]</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-routeros-api-modify-module-return-old-data"><strong>old_data</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>A list of all elements for the current path before a change was made.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> always</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>[{".id": "*1", "actual-interface": "bridge", "address": "192.168.88.1/24", "comment": "defconf", "disabled": false, "dynamic": false, "interface": "bridge", "invalid": false, "network": "192.168.88.0"}]</code></p> </div></td> </tr>  </table> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Felix Fontein (@felixfontein)</li> </ul> </section> <section id="collection-links"> <h3>Collection links</h3> <ul class="ansible-links"> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.routeros/issues" rel="noopener external" target="_blank">Issue Tracker</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.routeros" rel="noopener external" target="_blank">Repository (Sources)</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://forum.ansible.com/tags/c/help/6/none/routeros" rel="noopener external" target="_blank">Ask for help (RouterOS)</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.routeros/issues/new?assignees=&amp;labels=&amp;template=bug_report.md" rel="noopener external" target="_blank">Submit a bug report</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.routeros/issues/new?assignees=&amp;labels=&amp;template=feature_request.md" rel="noopener external" target="_blank">Request a feature</a></span></li> <li><span><a class="reference internal" href="index.html#communication-for-community-routeros"><span class="std std-ref">Communication</span></a></span></li> </ul> </section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2024 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/community/routeros/api_modify_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/community/routeros/api_modify_module.html</a>
  </p>
</div>
