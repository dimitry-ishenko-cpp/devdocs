<h1 id="community-crypto-openssl-csr-info-provide-information-of-openssl-certificate-signing-requests-csr">community.crypto.openssl_csr_info – Provide information of OpenSSL Certificate Signing Requests (CSR)</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/community/crypto">community.crypto collection</a> (version 1.9.6).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install community.crypto</code>.</p> <p>To use it in a playbook, specify: <code>community.crypto.openssl_csr_info</code>.</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#see-also" id="id4">See Also</a></li> <li><a class="reference internal" href="#examples" id="id5">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id6">Return Values</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>This module allows one to query information on OpenSSL Certificate Signing Requests (CSR).</li> <li>In case the CSR signature cannot be validated, the module will fail. In this case, all return variables are still returned.</li> <li>It uses the pyOpenSSL or cryptography python library to interact with OpenSSL. If both the cryptography and PyOpenSSL libraries are available (and meet the minimum version requirements) cryptography will be preferred as a backend over PyOpenSSL (unless the backend is forced with <code>select_crypto_backend</code>). Please note that the PyOpenSSL backend was deprecated in Ansible 2.9 and will be removed in community.crypto 2.0.0.</li> </ul>   <h2 id="requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>PyOpenSSL &gt;= 0.15 or cryptography &gt;= 1.3</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="1">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="1">  <b>content</b>  <div> <span>string</span> </div> <div> added in 1.0.0 of community.crypto </div> </td> <td> </td> <td> <div>Content of the CSR file.</div> <div>Either <em>path</em> or <em>content</em> must be specified, but not both.</div> </td> </tr> <tr> <td colspan="1">  <b>path</b>  <div> <span>path</span> </div> </td> <td> </td> <td> <div>Remote absolute path where the CSR file is loaded from.</div> <div>Either <em>path</em> or <em>content</em> must be specified, but not both.</div> </td> </tr> <tr> <td colspan="1">  <b>select_crypto_backend</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>auto</b> ←</div></li> <li>cryptography</li> <li>pyopenssl</li> </ul> </td> <td> <div>Determines which crypto backend to use.</div> <div>The default choice is <code>auto</code>, which tries to use <code>cryptography</code> if available, and falls back to <code>pyopenssl</code>.</div> <div>If set to <code>pyopenssl</code>, will try to use the <a href="https://pypi.org/project/pyOpenSSL/">pyOpenSSL</a> library.</div> <div>If set to <code>cryptography</code>, will try to use the <a href="https://cryptography.io/">cryptography</a> library.</div> <div>Please note that the <code>pyopenssl</code> backend has been deprecated in Ansible 2.9, and will be removed in community.crypto 2.0.0. From that point on, only the <code>cryptography</code> backend will be available.</div> </td> </tr> </table> <br>  <h2 id="see-also">See Also</h2> <div class="admonition seealso"> <p class="admonition-title">See also</p> <dl class="simple"> <dt><a class="reference internal" href="openssl_csr_module.html#ansible-collections-community-crypto-openssl-csr-module"><span class="std std-ref">community.crypto.openssl_csr</span></a></dt>
<dd>
<p>The official documentation on the <strong>community.crypto.openssl_csr</strong> module.</p> </dd> <dt><a class="reference internal" href="openssl_csr_pipe_module.html#ansible-collections-community-crypto-openssl-csr-pipe-module"><span class="std std-ref">community.crypto.openssl_csr_pipe</span></a></dt>
<dd>
<p>The official documentation on the <strong>community.crypto.openssl_csr_pipe</strong> module.</p> </dd> </dl> </div>   <h2 id="examples">Examples</h2> <pre data-language="yaml+jinja">- name: Generate an OpenSSL Certificate Signing Request
  community.crypto.openssl_csr:
    path: /etc/ssl/csr/www.ansible.com.csr
    privatekey_path: /etc/ssl/private/ansible.com.pem
    common_name: www.ansible.com

- name: Get information on the CSR
  community.crypto.openssl_csr_info:
    path: /etc/ssl/csr/www.ansible.com.csr
  register: result

- name: Dump information
  debug:
    var: result
</pre>   <h2 id="return-values">Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values.html#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="documentation-table"> <tr> <th colspan="2">Key</th> <th>Returned</th> <th width="100%">Description</th> </tr> <tr> <td colspan="2">  <b>authority_cert_issuer</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td>success and if the pyOpenSSL backend is <em>not</em> used</td> <td> <div>The CSR's authority cert issuer as a list of general names.</div> <div>Is <code>none</code> if the <code>AuthorityKeyIdentifier</code> extension is not present.</div> <br> <div><b>Sample:</b></div> <div>[DNS:www.ansible.com, IP:1.2.3.4]</div> </td> </tr> <tr> <td colspan="2">  <b>authority_cert_serial_number</b>  <div> <span>integer</span> </div> </td> <td>success and if the pyOpenSSL backend is <em>not</em> used</td> <td> <div>The CSR's authority cert serial number.</div> <div>Is <code>none</code> if the <code>AuthorityKeyIdentifier</code> extension is not present.</div> <br> <div><b>Sample:</b></div> <div>12345</div> </td> </tr> <tr> <td colspan="2">  <b>authority_key_identifier</b>  <div> <span>string</span> </div> </td> <td>success and if the pyOpenSSL backend is <em>not</em> used</td> <td> <div>The CSR's authority key identifier.</div> <div>The identifier is returned in hexadecimal, with <code>:</code> used to separate bytes.</div> <div>Is <code>none</code> if the <code>AuthorityKeyIdentifier</code> extension is not present.</div> <br> <div><b>Sample:</b></div> <div>00:11:22:33:44:55:66:77:88:99:aa:bb:cc:dd:ee:ff:00:11:22:33</div> </td> </tr> <tr> <td colspan="2">  <b>basic_constraints</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td>success</td> <td> <div>Entries in the <code>basic_constraints</code> extension, or <code>none</code> if extension is not present.</div> <br> <div><b>Sample:</b></div> <div>[CA:TRUE, pathlen:1]</div> </td> </tr> <tr> <td colspan="2">  <b>basic_constraints_critical</b>  <div> <span>boolean</span> </div> </td> <td>success</td> <td> <div>Whether the <code>basic_constraints</code> extension is critical.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>extended_key_usage</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td>success</td> <td> <div>Entries in the <code>extended_key_usage</code> extension, or <code>none</code> if extension is not present.</div> <br> <div><b>Sample:</b></div> <div>[Biometric Info, DVCS, Time Stamping]</div> </td> </tr> <tr> <td colspan="2">  <b>extended_key_usage_critical</b>  <div> <span>boolean</span> </div> </td> <td>success</td> <td> <div>Whether the <code>extended_key_usage</code> extension is critical.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>extensions_by_oid</b>  <div> <span>dictionary</span> </div> </td> <td>success</td> <td> <div>Returns a dictionary for every extension OID</div> <br> <div><b>Sample:</b></div> <div>{"1.3.6.1.5.5.7.1.24": { "critical": false, "value": "MAMCAQU="}}</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>critical</b>  <div> <span>boolean</span> </div> </td> <td>success</td> <td> <div>Whether the extension is critical.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>value</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>The Base64 encoded value (in DER format) of the extension</div> <br> <div><b>Sample:</b></div> <div>MAMCAQU=</div> </td> </tr> <tr> <td colspan="2">  <b>key_usage</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>Entries in the <code>key_usage</code> extension, or <code>none</code> if extension is not present.</div> <br> <div><b>Sample:</b></div> <div>[Key Agreement, Data Encipherment]</div> </td> </tr> <tr> <td colspan="2">  <b>key_usage_critical</b>  <div> <span>boolean</span> </div> </td> <td>success</td> <td> <div>Whether the <code>key_usage</code> extension is critical.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>name_constraints_critical</b>  <div> <span>boolean</span> </div> <div>added in 1.1.0 of community.crypto</div> </td> <td>success</td> <td> <div>Whether the <code>name_constraints</code> extension is critical.</div> <div>Is <code>none</code> if extension is not present.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>name_constraints_excluded</b>  <div> <span>list</span> / <span>elements=string</span> </div> <div>added in 1.1.0 of community.crypto</div> </td> <td>success</td> <td> <div>List of excluded subtrees the CA cannot sign certificates for.</div> <div>Is <code>none</code> if extension is not present.</div> <br> <div><b>Sample:</b></div> <div>['email:.com']</div> </td> </tr> <tr> <td colspan="2">  <b>name_constraints_permitted</b>  <div> <span>list</span> / <span>elements=string</span> </div> <div>added in 1.1.0 of community.crypto</div> </td> <td>success</td> <td> <div>List of permitted subtrees to sign certificates for.</div> <br> <div><b>Sample:</b></div> <div>['email:.somedomain.com']</div> </td> </tr> <tr> <td colspan="2">  <b>ocsp_must_staple</b>  <div> <span>boolean</span> </div> </td> <td>success</td> <td> <div>
<code>yes</code> if the OCSP Must Staple extension is present, <code>none</code> otherwise.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>ocsp_must_staple_critical</b>  <div> <span>boolean</span> </div> </td> <td>success</td> <td> <div>Whether the <code>ocsp_must_staple</code> extension is critical.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>public_key</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>CSR's public key in PEM format</div> <br> <div><b>Sample:</b></div> <div>-----BEGIN PUBLIC KEY----- MIICIjANBgkqhkiG9w0BAQEFAAOCAg8A...</div> </td> </tr> <tr> <td colspan="2">  <b>public_key_data</b>  <div> <span>dictionary</span> </div> <div>added in 1.7.0 of community.crypto</div> </td> <td>success</td> <td> <div>Public key data. Depends on the public key's type.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>curve</b>  <div> <span>string</span> </div> </td> <td>When <code>public_key_type=ECC</code>
</td> <td> <div>The curve's name for ECC.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>exponent</b>  <div> <span>integer</span> </div> </td> <td>When <code>public_key_type=RSA</code>
</td> <td> <div>The RSA key's public exponent.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>exponent_size</b>  <div> <span>integer</span> </div> </td> <td>When <code>public_key_type=ECC</code>
</td> <td> <div>The maximum number of bits of a private key. This is basically the bit size of the subgroup used.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>g</b>  <div> <span>integer</span> </div> </td> <td>When <code>public_key_type=DSA</code>
</td> <td> <div>The <code>g</code> value for DSA.</div> <div>This is the element spanning the subgroup of the multiplicative group of the prime field used.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>modulus</b>  <div> <span>integer</span> </div> </td> <td>When <code>public_key_type=RSA</code>
</td> <td> <div>The RSA key's modulus.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>p</b>  <div> <span>integer</span> </div> </td> <td>When <code>public_key_type=DSA</code>
</td> <td> <div>The <code>p</code> value for DSA.</div> <div>This is the prime modulus upon which arithmetic takes place.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>q</b>  <div> <span>integer</span> </div> </td> <td>When <code>public_key_type=DSA</code>
</td> <td> <div>The <code>q</code> value for DSA.</div> <div>This is a prime that divides <code>p - 1</code>, and at the same time the order of the subgroup of the multiplicative group of the prime field used.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>size</b>  <div> <span>integer</span> </div> </td> <td>When <code>public_key_type=RSA</code> or <code>public_key_type=DSA</code>
</td> <td> <div>Bit size of modulus (RSA) or prime number (DSA).</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>x</b>  <div> <span>integer</span> </div> </td> <td>When <code>public_key_type=ECC</code>
</td> <td> <div>The <code>x</code> coordinate for the public point on the elliptic curve.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>y</b>  <div> <span>integer</span> </div> </td> <td>When <code>public_key_type=DSA</code> or <code>public_key_type=ECC</code>
</td> <td> <div>For <code>public_key_type=ECC</code>, this is the <code>y</code> coordinate for the public point on the elliptic curve.</div> <div>For <code>public_key_type=DSA</code>, this is the publicly known group element whose discrete logarithm w.r.t. <code>g</code> is the private key.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>public_key_fingerprints</b>  <div> <span>dictionary</span> </div> </td> <td>success</td> <td> <div>Fingerprints of CSR's public key.</div> <div>For every hash algorithm available, the fingerprint is computed.</div> <br> <div><b>Sample:</b></div> <div>{'sha256': 'd4:b3:aa:6d:c8:04:ce:4e:ba:f6:29:4d:92:a3:94:b0:c2:ff:bd:bf:33:63:11:43:34:0f:51:b0:95:09:2f:63', 'sha512': 'f7:07:4a:f0:b0:f0:e6:8b:95:5f:f9:e6:61:0a:32:68:f1...</div> </td> </tr> <tr> <td colspan="2">  <b>public_key_type</b>  <div> <span>string</span> </div> <div>added in 1.7.0 of community.crypto</div> </td> <td>success</td> <td> <div>The CSR's public key's type.</div> <div>One of <code>RSA</code>, <code>DSA</code>, <code>ECC</code>, <code>Ed25519</code>, <code>X25519</code>, <code>Ed448</code>, or <code>X448</code>.</div> <div>Will start with <code>unknown</code> if the key type cannot be determined.</div> <br> <div><b>Sample:</b></div> <div>RSA</div> </td> </tr> <tr> <td colspan="2">  <b>signature_valid</b>  <div> <span>boolean</span> </div> </td> <td>success</td> <td> <div>Whether the CSR's signature is valid.</div> <div>In case the check returns <code>no</code>, the module will fail.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>subject</b>  <div> <span>dictionary</span> </div> </td> <td>success</td> <td> <div>The CSR's subject as a dictionary.</div> <div>Note that for repeated values, only the last one will be returned.</div> <br> <div><b>Sample:</b></div> <div>{"commonName": "www.example.com", "emailAddress": "test@example.com"}</div> </td> </tr> <tr> <td colspan="2">  <b>subject_alt_name</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td>success</td> <td> <div>Entries in the <code>subject_alt_name</code> extension, or <code>none</code> if extension is not present.</div> <br> <div><b>Sample:</b></div> <div>[DNS:www.ansible.com, IP:1.2.3.4]</div> </td> </tr> <tr> <td colspan="2">  <b>subject_alt_name_critical</b>  <div> <span>boolean</span> </div> </td> <td>success</td> <td> <div>Whether the <code>subject_alt_name</code> extension is critical.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>subject_key_identifier</b>  <div> <span>string</span> </div> </td> <td>success and if the pyOpenSSL backend is <em>not</em> used</td> <td> <div>The CSR's subject key identifier.</div> <div>The identifier is returned in hexadecimal, with <code>:</code> used to separate bytes.</div> <div>Is <code>none</code> if the <code>SubjectKeyIdentifier</code> extension is not present.</div> <br> <div><b>Sample:</b></div> <div>00:11:22:33:44:55:66:77:88:99:aa:bb:cc:dd:ee:ff:00:11:22:33</div> </td> </tr> <tr> <td colspan="2">  <b>subject_ordered</b>  <div> <span>list</span> / <span>elements=list</span> </div> </td> <td>success</td> <td> <div>The CSR's subject as an ordered list of tuples.</div> <br> <div><b>Sample:</b></div> <div>[["commonName", "www.example.com"], ["emailAddress": "test@example.com"]]</div> </td> </tr> </table> <br><br> <h3 id="authors">Authors</h3> <ul class="simple"> <li>Felix Fontein (@felixfontein)</li> <li>Yanis Guenane (@Spredzy)</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2021 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/community/crypto/openssl_csr_info_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/community/crypto/openssl_csr_info_module.html</a>
  </p>
</div>
