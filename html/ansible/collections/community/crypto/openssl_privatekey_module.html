<section id="community-crypto-openssl-privatekey-module-generate-openssl-private-keys"> <h1>community.crypto.openssl_privatekey module – Generate OpenSSL private keys</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module is part of the <a class="reference external" href="https://galaxy.ansible.com/ui/repo/published/community/crypto/">community.crypto collection</a> (version 2.22.1).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install community.crypto</code>. You need further requirements to be able to use this module, see <a class="reference internal" href="#ansible-collections-community-crypto-openssl-privatekey-module-requirements"><span class="std std-ref">Requirements</span></a> for details.</p> <p>To use it in a playbook, specify: <code>community.crypto.openssl_privatekey</code>.</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#attributes" id="id4">Attributes</a></li> <li><a class="reference internal" href="#see-also" id="id5">See Also</a></li> <li><a class="reference internal" href="#examples" id="id6">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id7">Return Values</a></li> </ul>  <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>Keys are generated in PEM format.</li> <li>One can generate <a class="reference external" href="https://en.wikipedia.org/wiki/RSA_%2528cryptosystem%2529">RSA</a>, <a class="reference external" href="https://en.wikipedia.org/wiki/Digital_Signature_Algorithm">DSA</a>, <a class="reference external" href="https://en.wikipedia.org/wiki/Elliptic-curve_cryptography">ECC</a> or <a class="reference external" href="https://en.wikipedia.org/wiki/EdDSA">EdDSA</a> private keys.</li> <li>Please note that the module regenerates private keys if they do not match the module’s options. In particular, if you provide another passphrase (or specify none), change the keysize, etc., the private key will be regenerated. If you are concerned that this could <strong>overwrite your private key</strong>, consider using the <code><strong><a class="reference internal" href="#ansible-collections-community-crypto-openssl-privatekey-module-parameter-backup"><span class="std std-ref">backup</span></a></strong></code> option.</li> <li>The default mode for the private key file will be <code>0600</code> if <code><strong><a class="reference internal" href="#ansible-collections-community-crypto-openssl-privatekey-module-parameter-mode"><span class="std std-ref">mode</span></a></strong></code> is not explicitly set.</li> <li>This module allows one to (re)generate OpenSSL private keys.</li> </ul> </section> <section id="requirements"> <h2 id="ansible-collections-community-crypto-openssl-privatekey-module-requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>cryptography &gt;= 1.2.3 (older versions might work as well)</li> </ul> </section> <section id="parameters"> <h2>Parameters</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-community-crypto-openssl-privatekey-module-parameter-attributes"><strong id="ansible-collections-community-crypto-openssl-privatekey-module-parameter-attr">attributes</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: attr</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The attributes the resulting filesystem object should have.</p> <p>To get supported flags look at the man page for <em>chattr</em> on the target system.</p> <p>This string should contain the attributes in the same order as the one displayed by <em>lsattr</em>.</p> <p>The <code>=</code> operator is assumed as default, otherwise <code>+</code> or <code>-</code> operators need to be included in the string.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-openssl-privatekey-module-parameter-backup"><strong>backup</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Create a backup file including a timestamp so you can get the original private key back if you overwrote it with a new one by accident.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-openssl-privatekey-module-parameter-cipher"><strong>cipher</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The cipher to encrypt the private key. This is only used when <code><strong><a class="reference internal" href="#ansible-collections-community-crypto-openssl-privatekey-module-parameter-passphrase"><span class="std std-ref">passphrase</span></a></strong></code> is provided.</p> <p>Must be <code>auto</code>.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"auto"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-openssl-privatekey-module-parameter-curve"><strong>curve</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Note that not all curves are supported by all versions of <code>cryptography</code>.</p> <p>For maximal interoperability, <code>secp384r1</code> or <code>secp256r1</code> should be used.</p> <p>We use the curve names as defined in the <a class="reference external" href="https://www.iana.org/assignments/tls-parameters/tls-parameters.xhtml#tls-parameters-8">IANA registry for TLS</a>.</p> <p>Please note that all curves except <code>secp224r1</code>, <code>secp256k1</code>, <code>secp256r1</code>, <code>secp384r1</code>, and <code>secp521r1</code> are discouraged for new private keys.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"secp224r1"</code></li> <li><code>"secp256k1"</code></li> <li><code>"secp256r1"</code></li> <li><code>"secp384r1"</code></li> <li><code>"secp521r1"</code></li> <li><code>"secp192r1"</code></li> <li><code>"brainpoolP256r1"</code></li> <li><code>"brainpoolP384r1"</code></li> <li><code>"brainpoolP512r1"</code></li> <li><code>"sect163k1"</code></li> <li><code>"sect163r2"</code></li> <li><code>"sect233k1"</code></li> <li><code>"sect233r1"</code></li> <li><code>"sect283k1"</code></li> <li><code>"sect283r1"</code></li> <li><code>"sect409k1"</code></li> <li><code>"sect409r1"</code></li> <li><code>"sect571k1"</code></li> <li><code>"sect571r1"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-openssl-privatekey-module-parameter-force"><strong>force</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Should the key be regenerated even if it already exists.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-openssl-privatekey-module-parameter-format"><strong>format</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in community.crypto 1.0.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Determines which format the private key is written in. By default, PKCS1 (traditional OpenSSL format) is used for all keys which support it. Please note that not every key can be exported in any format.</p> <p>The value <code>auto</code> selects a format based on the key format. The value <code>auto_ignore</code> does the same, but for existing private key files, it will not force a regenerate when its format is not the automatically selected one for generation.</p> <p>Note that if the format for an existing private key mismatches, the key is <strong>regenerated</strong> by default. To change this behavior, use the <code><strong><a class="reference internal" href="#ansible-collections-community-crypto-openssl-privatekey-module-parameter-format-mismatch"><span class="std std-ref">format_mismatch</span></a></strong></code> option.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"pkcs1"</code></li> <li><code>"pkcs8"</code></li> <li><code>"raw"</code></li> <li><code>"auto"</code></li> <li>
<code><strong>"auto_ignore"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-openssl-privatekey-module-parameter-format-mismatch"><strong>format_mismatch</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in community.crypto 1.0.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Determines behavior of the module if the format of a private key does not match the expected format, but all other parameters are as expected.</p> <p>If set to <code>regenerate</code> (default), generates a new private key.</p> <p>If set to <code>convert</code>, the key will be converted to the new format instead.</p> <p>Only supported by the <code>cryptography</code> backend.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"regenerate"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"convert"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-openssl-privatekey-module-parameter-group"><strong>group</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Name of the group that should own the filesystem object, as would be fed to <em>chown</em>.</p> <p>When left unspecified, it uses the current group of the current user unless you are root, in which case it can preserve the previous ownership.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-openssl-privatekey-module-parameter-mode"><strong>mode</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">any</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The permissions the resulting filesystem object should have.</p> <p>For those used to <em>/usr/bin/chmod</em> remember that modes are actually octal numbers. You must give Ansible enough information to parse them correctly. For consistent results, quote octal numbers (for example, <code>'644'</code> or <code>'1777'</code>) so Ansible receives a string and can do its own conversion from string into number. Adding a leading zero (for example, <code>0755</code>) works sometimes, but can fail in loops and some other circumstances.</p> <p>Giving Ansible a number without following either of these rules will end up with a decimal number which will have unexpected results.</p> <p>As of Ansible 1.8, the mode may be specified as a symbolic mode (for example, <code>u+rwx</code> or <code>u=rw,g=r,o=r</code>).</p> <p>If <code><strong><a class="reference internal" href="#ansible-collections-community-crypto-openssl-privatekey-module-parameter-mode"><span class="std std-ref">mode</span></a></strong></code> is not specified and the destination filesystem object <strong>does not</strong> exist, the default <code>umask</code> on the system will be used when setting the mode for the newly created filesystem object.</p> <p>If <code><strong><a class="reference internal" href="#ansible-collections-community-crypto-openssl-privatekey-module-parameter-mode"><span class="std std-ref">mode</span></a></strong></code> is not specified and the destination filesystem object <strong>does</strong> exist, the mode of the existing filesystem object will be used.</p> <p>Specifying <code><strong><a class="reference internal" href="#ansible-collections-community-crypto-openssl-privatekey-module-parameter-mode"><span class="std std-ref">mode</span></a></strong></code> is the best way to ensure filesystem objects are created with the correct permissions. See CVE-2020-1736 for further details.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-openssl-privatekey-module-parameter-owner"><strong>owner</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Name of the user that should own the filesystem object, as would be fed to <em>chown</em>.</p> <p>When left unspecified, it uses the current user unless you are root, in which case it can preserve the previous ownership.</p> <p>Specifying a numeric username will be assumed to be a user ID and not a username. Avoid numeric usernames to avoid this confusion.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-openssl-privatekey-module-parameter-passphrase"><strong>passphrase</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The passphrase for the private key.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-openssl-privatekey-module-parameter-path"><strong>path</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">path</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Name of the file in which the generated TLS/SSL private key will be written. It will have <code>0600</code> mode if <code><strong><a class="reference internal" href="#ansible-collections-community-crypto-openssl-privatekey-module-parameter-mode"><span class="std std-ref">mode</span></a></strong></code> is not explicitly set.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-openssl-privatekey-module-parameter-regenerate"><strong>regenerate</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in community.crypto 1.0.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Allows to configure in which situations the module is allowed to regenerate private keys. The module will always generate a new key if the destination file does not exist.</p> <p>By default, the key will be regenerated when it does not match the module’s options, except when the key cannot be read or the passphrase does not match. Please note that this <strong>changed</strong> for Ansible 2.10. For Ansible 2.9, the behavior was as if <code>full_idempotence</code> is specified.</p> <p>If set to <code>never</code>, the module will fail if the key cannot be read or the passphrase is not matching, and will never regenerate an existing key.</p> <p>If set to <code>fail</code>, the module will fail if the key does not correspond to the module’s options.</p> <p>If set to <code>partial_idempotence</code>, the key will be regenerated if it does not conform to the module’s options. The key is <strong>not</strong> regenerated if it cannot be read (broken file), the key is protected by an unknown passphrase, or when they key is not protected by a passphrase, but a passphrase is specified.</p> <p>If set to <code>full_idempotence</code>, the key will be regenerated if it does not conform to the module’s options. This is also the case if the key cannot be read (broken file), the key is protected by an unknown passphrase, or when they key is not protected by a passphrase, but a passphrase is specified. Make sure you have a <strong>backup</strong> when using this option!</p> <p>If set to <code>always</code>, the module will always regenerate the key. This is equivalent to setting <code><strong><a class="reference internal" href="#ansible-collections-community-crypto-openssl-privatekey-module-parameter-force"><span class="std std-ref">force</span></a></strong></code> to <code>true</code>.</p> <p>Note that if <code><strong><a class="reference internal" href="#ansible-collections-community-crypto-openssl-privatekey-module-parameter-format-mismatch"><span class="std std-ref">format_mismatch</span></a></strong></code> is set to <code>convert</code> and everything matches except the format, the key will always be converted, except if <code><strong><a class="reference internal" href="#ansible-collections-community-crypto-openssl-privatekey-module-parameter-regenerate"><span class="std std-ref">regenerate</span></a></strong></code> is set to <code>always</code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"never"</code></li> <li><code>"fail"</code></li> <li><code>"partial_idempotence"</code></li> <li>
<code><strong>"full_idempotence"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"always"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-openssl-privatekey-module-parameter-return-content"><strong>return_content</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in community.crypto 1.0.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>If set to <code>true</code>, will return the (current or generated) private key’s content as <code><a class="reference internal" href="#ansible-collections-community-crypto-openssl-privatekey-module-return-privatekey"><span class="std std-ref">privatekey</span></a></code>.</p> <p>Note that especially if the private key is not encrypted, you have to make sure that the returned value is treated appropriately and not accidentally written to logs etc.! Use with care!</p> <p>Use Ansible’s <code>no_log</code> task option to avoid the output being shown. See also <a class="reference external" href="https://docs.ansible.com/ansible/latest/reference_appendices/faq.html#how-do-i-keep-secret-data-in-my-playbook">https://docs.ansible.com/ansible/latest/reference_appendices/faq.html#how-do-i-keep-secret-data-in-my-playbook</a>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-openssl-privatekey-module-parameter-select-crypto-backend"><strong>select_crypto_backend</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Determines which crypto backend to use.</p> <p>The default choice is <code>auto</code>, which tries to use <code>cryptography</code> if available.</p> <p>If set to <code>cryptography</code>, will try to use the <a class="reference external" href="https://cryptography.io/">cryptography</a> library.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"auto"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"cryptography"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-openssl-privatekey-module-parameter-selevel"><strong>selevel</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The level part of the SELinux filesystem object context.</p> <p>This is the MLS/MCS attribute, sometimes known as the <code>range</code>.</p> <p>When set to <code>_default</code>, it will use the <code>level</code> portion of the policy if available.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-openssl-privatekey-module-parameter-serole"><strong>serole</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The role part of the SELinux filesystem object context.</p> <p>When set to <code>_default</code>, it will use the <code>role</code> portion of the policy if available.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-openssl-privatekey-module-parameter-setype"><strong>setype</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The type part of the SELinux filesystem object context.</p> <p>When set to <code>_default</code>, it will use the <code>type</code> portion of the policy if available.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-openssl-privatekey-module-parameter-seuser"><strong>seuser</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The user part of the SELinux filesystem object context.</p> <p>By default it uses the <code>system</code> policy, where applicable.</p> <p>When set to <code>_default</code>, it will use the <code>user</code> portion of the policy if available.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-openssl-privatekey-module-parameter-size"><strong>size</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Size (in bits) of the TLS/SSL key to generate.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>4096</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-openssl-privatekey-module-parameter-state"><strong>state</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Whether the private key should exist or not, taking action if the state is different from what is stated.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"absent"</code></li> <li>
<code><strong>"present"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-openssl-privatekey-module-parameter-type"><strong>type</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The algorithm used to generate the TLS/SSL private key.</p> <p>Note that <code>ECC</code>, <code>X25519</code>, <code>X448</code>, <code>Ed25519</code>, and <code>Ed448</code> require the <code>cryptography</code> backend. <code>X25519</code> needs cryptography 2.5 or newer, while <code>X448</code>, <code>Ed25519</code>, and <code>Ed448</code> require cryptography 2.6 or newer. For <code>ECC</code>, the minimal cryptography version required depends on the <code><strong><a class="reference internal" href="#ansible-collections-community-crypto-openssl-privatekey-module-parameter-curve"><span class="std std-ref">curve</span></a></strong></code> option.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"DSA"</code></li> <li><code>"ECC"</code></li> <li><code>"Ed25519"</code></li> <li><code>"Ed448"</code></li> <li>
<code><strong>"RSA"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"X25519"</code></li> <li><code>"X448"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-openssl-privatekey-module-parameter-unsafe-writes"><strong>unsafe_writes</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Influence when to use atomic operation to prevent data corruption or inconsistent reads from the target filesystem object.</p> <p>By default this module uses atomic operations to prevent data corruption or inconsistent reads from the target filesystem objects, but sometimes systems are configured or just broken in ways that prevent this. One example is docker mounted filesystem objects, which cannot be updated atomically from inside the container and can only be written in an unsafe manner.</p> <p>This option allows Ansible to fall back to unsafe methods of updating filesystem objects when atomic operations fail (however, it doesn’t force Ansible to perform unsafe writes).</p> <p>IMPORTANT! Unsafe writes are subject to race conditions and can lead to data corruption.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr>  </table> </section> <section id="attributes"> <h2>Attributes</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Attribute</p></th> <th class="head"><p>Support</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-openssl-privatekey-module-attribute-check-mode"><strong>check_mode</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-label">Support: </strong><strong class="ansible-attribute-support-full">full</strong></p> </div></td> <td><div class="ansible-option-cell">
<p>Can run in <code>check_mode</code> and return changed status prediction without modifying target.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-openssl-privatekey-module-attribute-diff-mode"><strong>diff_mode</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-label">Support: </strong><strong class="ansible-attribute-support-full">full</strong></p> </div></td> <td><div class="ansible-option-cell">
<p>Will return details on what has changed (or possibly needs changing in <code>check_mode</code>), when in diff mode.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-openssl-privatekey-module-attribute-safe-file-operations"><strong>safe_file_operations</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-label">Support: </strong><strong class="ansible-attribute-support-full">full</strong></p> </div></td> <td><div class="ansible-option-cell">
<p>Uses Ansible’s strict file operation functions to ensure proper permissions and avoid data corruption.</p> </div></td> </tr>  </table> </section> <section id="see-also"> <h2>See Also</h2> <div class="admonition seealso"> <p class="admonition-title">See also</p> <dl class="simple"> <dt><a class="reference internal" href="openssl_privatekey_pipe_module.html#ansible-collections-community-crypto-openssl-privatekey-pipe-module"><span class="std std-ref">community.crypto.openssl_privatekey_pipe</span></a></dt>
<dd>
<p>Generate OpenSSL private keys without disk access.</p> </dd> <dt><a class="reference internal" href="openssl_privatekey_info_module.html#ansible-collections-community-crypto-openssl-privatekey-info-module"><span class="std std-ref">community.crypto.openssl_privatekey_info</span></a></dt>
<dd>
<p>Provide information for OpenSSL private keys.</p> </dd> <dt><a class="reference internal" href="x509_certificate_module.html#ansible-collections-community-crypto-x509-certificate-module"><span class="std std-ref">community.crypto.x509_certificate</span></a></dt>
<dd>
<p>Generate and/or check OpenSSL certificates.</p> </dd> <dt><a class="reference internal" href="x509_certificate_pipe_module.html#ansible-collections-community-crypto-x509-certificate-pipe-module"><span class="std std-ref">community.crypto.x509_certificate_pipe</span></a></dt>
<dd>
<p>Generate and/or check OpenSSL certificates.</p> </dd> <dt><a class="reference internal" href="openssl_csr_module.html#ansible-collections-community-crypto-openssl-csr-module"><span class="std std-ref">community.crypto.openssl_csr</span></a></dt>
<dd>
<p>Generate OpenSSL Certificate Signing Request (CSR).</p> </dd> <dt><a class="reference internal" href="openssl_csr_pipe_module.html#ansible-collections-community-crypto-openssl-csr-pipe-module"><span class="std std-ref">community.crypto.openssl_csr_pipe</span></a></dt>
<dd>
<p>Generate OpenSSL Certificate Signing Request (CSR).</p> </dd> <dt><a class="reference internal" href="openssl_dhparam_module.html#ansible-collections-community-crypto-openssl-dhparam-module"><span class="std std-ref">community.crypto.openssl_dhparam</span></a></dt>
<dd>
<p>Generate OpenSSL Diffie-Hellman Parameters.</p> </dd> <dt><a class="reference internal" href="openssl_pkcs12_module.html#ansible-collections-community-crypto-openssl-pkcs12-module"><span class="std std-ref">community.crypto.openssl_pkcs12</span></a></dt>
<dd>
<p>Generate OpenSSL PKCS#12 archive.</p> </dd> <dt><a class="reference internal" href="openssl_publickey_module.html#ansible-collections-community-crypto-openssl-publickey-module"><span class="std std-ref">community.crypto.openssl_publickey</span></a></dt>
<dd>
<p>Generate an OpenSSL public key from its private key.</p> </dd> </dl> </div> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja">- name: Generate an OpenSSL private key with the default values (4096 bits, RSA)
  community.crypto.openssl_privatekey:
    path: /etc/ssl/private/ansible.com.pem

- name: Generate an OpenSSL private key with the default values (4096 bits, RSA) and a passphrase
  community.crypto.openssl_privatekey:
    path: /etc/ssl/private/ansible.com.pem
    passphrase: ansible
    cipher: auto

- name: Generate an OpenSSL private key with a different size (2048 bits)
  community.crypto.openssl_privatekey:
    path: /etc/ssl/private/ansible.com.pem
    size: 2048

- name: Force regenerate an OpenSSL private key if it already exists
  community.crypto.openssl_privatekey:
    path: /etc/ssl/private/ansible.com.pem
    force: true

- name: Generate an OpenSSL private key with a different algorithm (DSA)
  community.crypto.openssl_privatekey:
    path: /etc/ssl/private/ansible.com.pem
    type: DSA

- name: Generate an OpenSSL private key with elliptic curve cryptography (ECC)
  community.crypto.openssl_privatekey:
    path: /etc/ssl/private/ansible.com.pem
    type: ECC
    curve: secp256r1
</pre> </section> <section id="return-values"> <h2>Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values.html#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Key</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-openssl-privatekey-module-return-backup-file"><strong>backup_file</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Name of backup file created.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> changed and if <code><strong><a class="reference internal" href="#ansible-collections-community-crypto-openssl-privatekey-module-parameter-backup"><span class="std std-ref">backup</span></a></strong></code> is <code>true</code></p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>"/path/to/privatekey.pem.2019-03-09@11:22~"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-openssl-privatekey-module-return-curve"><strong>curve</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Elliptic curve used to generate the TLS/SSL private key.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> changed or success, and <code><strong><a class="reference internal" href="#ansible-collections-community-crypto-openssl-privatekey-module-parameter-type"><span class="std std-ref">type</span></a></strong></code> is <code>ECC</code></p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>"secp256r1"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-openssl-privatekey-module-return-filename"><strong>filename</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Path to the generated TLS/SSL private key file.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> changed or success</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>"/etc/ssl/private/ansible.com.pem"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-openssl-privatekey-module-return-fingerprint"><strong>fingerprint</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The fingerprint of the public key. Fingerprint will be generated for each <code>hashlib.algorithms</code> available.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> changed or success</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>{"md5": "84:75:71:72:8d:04:b5:6c:4d:37:6d:66:83:f5:4c:29", "sha1": "51:cc:7c:68:5d:eb:41:43:88:7e:1a:ae:c7:f8:24:72:ee:71:f6:10", "sha224": "b1:19:a6:6c:14:ac:33:1d:ed:18:50:d3:06:5c:b2:32:91:f1:f1:52:8c:cb:d5:75:e9:f5:9b:46", "sha256": "41:ab:c7:cb:d5:5f:30:60:46:99:ac:d4:00:70:cf:a1:76:4f:24:5d:10:24:57:5d:51:6e:09:97:df:2f:de:c7", "sha384": "85:39:50:4e:de:d9:19:33:40:70:ae:10:ab:59:24:19:51:c3:a2:e4:0b:1c:b1:6e:dd:b3:0c:d9:9e:6a:46:af:da:18:f8:ef:ae:2e:c0:9a:75:2c:9b:b3:0f:3a:5f:3d", "sha512": "fd:ed:5e:39:48:5f:9f:fe:7f:25:06:3f:79:08:cd:ee:a5:e7:b3:3d:13:82:87:1f:84:e1:f5:c7:28:77:53:94:86:56:38:69:f0:d9:35:22:01:1e:a6:60:...:0f:9b"}</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-openssl-privatekey-module-return-privatekey"><strong>privatekey</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in community.crypto 1.0.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>The (current or generated) private key’s content.</p> <p>Will be Base64-encoded if the key is in raw format.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> if <code><strong><a class="reference internal" href="#ansible-collections-community-crypto-openssl-privatekey-module-parameter-state"><span class="std std-ref">state</span></a></strong></code> is <code>present</code> and <code><strong><a class="reference internal" href="#ansible-collections-community-crypto-openssl-privatekey-module-parameter-return-content"><span class="std std-ref">return_content</span></a></strong></code> is <code>true</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-openssl-privatekey-module-return-size"><strong>size</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Size (in bits) of the TLS/SSL private key.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> changed or success</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>4096</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-openssl-privatekey-module-return-type"><strong>type</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Algorithm used to generate the TLS/SSL private key.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> changed or success</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>"RSA"</code></p> </div></td> </tr>  </table> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Yanis Guenane (@Spredzy)</li> <li>Felix Fontein (@felixfontein)</li> </ul> </section> <section id="collection-links"> <h3>Collection links</h3> <ul class="ansible-links"> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.crypto/issues" rel="noopener external" target="_blank">Issue Tracker</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.crypto" rel="noopener external" target="_blank">Repository (Sources)</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://forum.ansible.com/tags/c/help/6/none/crypto" rel="noopener external" target="_blank">Ask for help (crypto)</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://forum.ansible.com/tags/c/help/6/none/acme" rel="noopener external" target="_blank">Ask for help (ACME)</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.crypto/issues/new?assignees=&amp;labels=&amp;template=bug_report.md" rel="noopener external" target="_blank">Submit a bug report</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.crypto/issues/new?assignees=&amp;labels=&amp;template=feature_request.md" rel="noopener external" target="_blank">Request a feature</a></span></li> <li><span><a class="reference internal" href="index.html#communication-for-community-crypto"><span class="std std-ref">Communication</span></a></span></li> </ul> </section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2024 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/community/crypto/openssl_privatekey_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/community/crypto/openssl_privatekey_module.html</a>
  </p>
</div>
