<section id="community-crypto-x509-certificate-pipe-module-generate-and-or-check-openssl-certificates"> <h1>community.crypto.x509_certificate_pipe module – Generate and/or check OpenSSL certificates</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module is part of the <a class="reference external" href="https://galaxy.ansible.com/ui/repo/published/community/crypto/">community.crypto collection</a> (version 2.22.1).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install community.crypto</code>. You need further requirements to be able to use this module, see <a class="reference internal" href="#ansible-collections-community-crypto-x509-certificate-pipe-module-requirements"><span class="std std-ref">Requirements</span></a> for details.</p> <p>To use it in a playbook, specify: <code>community.crypto.x509_certificate_pipe</code>.</p> </div> <p class="ansible-version-added">New in community.crypto 1.3.0</p>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#attributes" id="id4">Attributes</a></li> <li><a class="reference internal" href="#notes" id="id5">Notes</a></li> <li><a class="reference internal" href="#see-also" id="id6">See Also</a></li> <li><a class="reference internal" href="#examples" id="id7">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id8">Return Values</a></li> </ul>  <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>It implements a notion of provider (one of <code>selfsigned</code>, <code>ownca</code>, <code>entrust</code>) for your certificate.</li> <li>It uses the cryptography python library to interact with OpenSSL.</li> <li>The <code>ownca</code> provider is intended for generating an OpenSSL certificate signed with your own CA (Certificate Authority) certificate (self-signed certificate).</li> <li>This module allows one to (re)generate OpenSSL certificates.</li> </ul> </section> <section id="requirements"> <h2 id="ansible-collections-community-crypto-x509-certificate-pipe-module-requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>cryptography &gt;= 1.6 (if using <code>selfsigned</code> or <code>ownca</code> provider)</li> </ul> </section> <section id="parameters"> <h2>Parameters</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-content"><strong>content</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The existing certificate.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-csr-content"><strong>csr_content</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Content of the Certificate Signing Request (CSR) used to generate this certificate.</p> <p>This is mutually exclusive with <code><strong><a class="reference internal" href="#ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-csr-path"><span class="std std-ref">csr_path</span></a></strong></code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-csr-path"><strong>csr_path</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">path</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Path to the Certificate Signing Request (CSR) used to generate this certificate.</p> <p>This is mutually exclusive with <code><strong><a class="reference internal" href="#ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-csr-content"><span class="std std-ref">csr_content</span></a></strong></code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-entrust-api-client-cert-key-path"><strong>entrust_api_client_cert_key_path</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">path</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The path to the private key of the client certificate used to authenticate to the Entrust Certificate Services (ECS) API.</p> <p>This is only used by the <code>entrust</code> provider.</p> <p>This is required if the provider is <code>entrust</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-entrust-api-client-cert-path"><strong>entrust_api_client_cert_path</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">path</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The path to the client certificate used to authenticate to the Entrust Certificate Services (ECS) API.</p> <p>This is only used by the <code>entrust</code> provider.</p> <p>This is required if the provider is <code>entrust</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-entrust-api-key"><strong>entrust_api_key</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The key (password) for authentication to the Entrust Certificate Services (ECS) API.</p> <p>This is only used by the <code>entrust</code> provider.</p> <p>This is required if the provider is <code>entrust</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-entrust-api-specification-path"><strong>entrust_api_specification_path</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">path</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The path to the specification file defining the Entrust Certificate Services (ECS) API configuration.</p> <p>You can use this to keep a local copy of the specification to avoid downloading it every time the module is used.</p> <p>This is only used by the <code>entrust</code> provider.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"https://cloud.entrust.net/EntrustCloud/documentation/cms-api-2.1.0.yaml"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-entrust-api-user"><strong>entrust_api_user</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The username for authentication to the Entrust Certificate Services (ECS) API.</p> <p>This is only used by the <code>entrust</code> provider.</p> <p>This is required if the provider is <code>entrust</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-entrust-cert-type"><strong>entrust_cert_type</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify the type of certificate requested.</p> <p>This is only used by the <code>entrust</code> provider.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"STANDARD_SSL"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"ADVANTAGE_SSL"</code></li> <li><code>"UC_SSL"</code></li> <li><code>"EV_SSL"</code></li> <li><code>"WILDCARD_SSL"</code></li> <li><code>"PRIVATE_SSL"</code></li> <li><code>"PD_SSL"</code></li> <li><code>"CDS_ENT_LITE"</code></li> <li><code>"CDS_ENT_PRO"</code></li> <li><code>"SMIME_ENT"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-entrust-not-after"><strong>entrust_not_after</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The point in time at which the certificate stops being valid.</p> <p>Time can be specified either as relative time or as an absolute timestamp.</p> <p>A valid absolute time format is <code>ASN.1 TIME</code> such as <code>2019-06-18</code>.</p> <p>A valid relative time format is <code>[+-]timespec</code> where timespec can be an integer + <code>[w | d | h | m | s]</code>, such as <code>+365d</code> or <code>+32w1d2h</code>).</p> <p>Time will always be interpreted as UTC.</p> <p>Note that only the date (day, month, year) is supported for specifying the expiry date of the issued certificate.</p> <p>The full date-time is adjusted to EST (GMT -5:00) before issuance, which may result in a certificate with an expiration date one day earlier than expected if a relative time is used.</p> <p>The minimum certificate lifetime is 90 days, and maximum is three years.</p> <p>If this value is not specified, the certificate will stop being valid 365 days the date of issue.</p> <p>This is only used by the <code>entrust</code> provider.</p> <p>Please note that this value is <strong>not</strong> covered by the <code><strong><a class="reference internal" href="#ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-ignore-timestamps"><span class="std std-ref">ignore_timestamps</span></a></strong></code> option.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"+365d"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-entrust-requester-email"><strong>entrust_requester_email</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The email of the requester of the certificate (for tracking purposes).</p> <p>This is only used by the <code>entrust</code> provider.</p> <p>This is required if the provider is <code>entrust</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-entrust-requester-name"><strong>entrust_requester_name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The name of the requester of the certificate (for tracking purposes).</p> <p>This is only used by the <code>entrust</code> provider.</p> <p>This is required if the provider is <code>entrust</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-entrust-requester-phone"><strong>entrust_requester_phone</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The phone number of the requester of the certificate (for tracking purposes).</p> <p>This is only used by the <code>entrust</code> provider.</p> <p>This is required if the provider is <code>entrust</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-force"><strong>force</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Generate the certificate, even if it already exists.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-ignore-timestamps"><strong>ignore_timestamps</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in community.crypto 2.0.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Whether the “not before” and “not after” timestamps should be ignored for idempotency checks.</p> <p>It is better to keep the default value <code>true</code> when using relative timestamps (like <code>+0s</code> for now).</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-ownca-content"><strong>ownca_content</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Content of the CA (Certificate Authority) certificate.</p> <p>This is only used by the <code>ownca</code> provider.</p> <p>This is mutually exclusive with <code><strong><a class="reference internal" href="#ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-ownca-path"><span class="std std-ref">ownca_path</span></a></strong></code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-ownca-create-authority-key-identifier"><strong>ownca_create_authority_key_identifier</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Create a Authority Key Identifier from the CA’s certificate. If the CSR provided a authority key identifier, it is ignored.</p> <p>The Authority Key Identifier is generated from the CA certificate’s Subject Key Identifier, if available. If it is not available, the CA certificate’s public key will be used.</p> <p>This is only used by the <code>ownca</code> provider.</p> <p>Note that this is only supported if the <code>cryptography</code> backend is used!</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-ownca-create-subject-key-identifier"><strong>ownca_create_subject_key_identifier</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Whether to create the Subject Key Identifier (SKI) from the public key.</p> <p>A value of <code>create_if_not_provided</code> (default) only creates a SKI when the CSR does not provide one.</p> <p>A value of <code>always_create</code> always creates a SKI. If the CSR provides one, that one is ignored.</p> <p>A value of <code>never_create</code> never creates a SKI. If the CSR provides one, that one is used.</p> <p>This is only used by the <code>ownca</code> provider.</p> <p>Note that this is only supported if the <code>cryptography</code> backend is used!</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"create_if_not_provided"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"always_create"</code></li> <li><code>"never_create"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-ownca-digest"><strong>ownca_digest</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The digest algorithm to be used for the <code>ownca</code> certificate.</p> <p>This is only used by the <code>ownca</code> provider.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"sha256"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-ownca-not-after"><strong>ownca_not_after</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The point in time at which the certificate stops being valid.</p> <p>Time can be specified either as relative time or as absolute timestamp.</p> <p>Time will always be interpreted as UTC.</p> <p>Valid format is <code>[+-]timespec | ASN.1 TIME</code> where timespec can be an integer + <code>[w | d | h | m | s]</code> (for example <code>+32w1d2h</code>).</p> <p>If this value is not specified, the certificate will stop being valid 10 years from now.</p> <p>Note that this value is <strong>not used to determine whether an existing certificate should be regenerated</strong>. This can be changed by setting the <code><strong><a class="reference internal" href="#ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-ignore-timestamps"><span class="std std-ref">ignore_timestamps</span></a></strong></code> option to <code>false</code>. Please note that you should avoid relative timestamps when setting <code><a class="reference internal" href="#ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-ignore-timestamps"><span class="std std-ref">ignore_timestamps=false</span></a></code>.</p> <p>This is only used by the <code>ownca</code> provider.</p> <p>On macOS 10.15 and onwards, TLS server certificates must have a validity period of 825 days or fewer. Please see <a class="reference external" href="https://support.apple.com/en-us/HT210176">https://support.apple.com/en-us/HT210176</a> for more details.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"+3650d"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-ownca-not-before"><strong>ownca_not_before</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The point in time the certificate is valid from.</p> <p>Time can be specified either as relative time or as absolute timestamp.</p> <p>Time will always be interpreted as UTC.</p> <p>Valid format is <code>[+-]timespec | ASN.1 TIME</code> where timespec can be an integer + <code>[w | d | h | m | s]</code> (for example <code>+32w1d2h</code>).</p> <p>If this value is not specified, the certificate will start being valid from now.</p> <p>Note that this value is <strong>not used to determine whether an existing certificate should be regenerated</strong>. This can be changed by setting the <code><strong><a class="reference internal" href="#ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-ignore-timestamps"><span class="std std-ref">ignore_timestamps</span></a></strong></code> option to <code>false</code>. Please note that you should avoid relative timestamps when setting <code><a class="reference internal" href="#ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-ignore-timestamps"><span class="std std-ref">ignore_timestamps=false</span></a></code>.</p> <p>This is only used by the <code>ownca</code> provider.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"+0s"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-ownca-path"><strong>ownca_path</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">path</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Remote absolute path of the CA (Certificate Authority) certificate.</p> <p>This is only used by the <code>ownca</code> provider.</p> <p>This is mutually exclusive with <code><strong><a class="reference internal" href="#ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-ownca-content"><span class="std std-ref">ownca_content</span></a></strong></code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-ownca-privatekey-content"><strong>ownca_privatekey_content</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Content of the CA (Certificate Authority) private key to use when signing the certificate.</p> <p>This is only used by the <code>ownca</code> provider.</p> <p>This is mutually exclusive with <code><strong><a class="reference internal" href="#ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-ownca-privatekey-path"><span class="std std-ref">ownca_privatekey_path</span></a></strong></code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-ownca-privatekey-passphrase"><strong>ownca_privatekey_passphrase</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The passphrase for the <code><strong><a class="reference internal" href="#ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-ownca-privatekey-path"><span class="std std-ref">ownca_privatekey_path</span></a></strong></code> resp. <code><strong><a class="reference internal" href="#ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-ownca-privatekey-content"><span class="std std-ref">ownca_privatekey_content</span></a></strong></code>.</p> <p>This is only used by the <code>ownca</code> provider.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-ownca-privatekey-path"><strong>ownca_privatekey_path</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">path</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Path to the CA (Certificate Authority) private key to use when signing the certificate.</p> <p>This is only used by the <code>ownca</code> provider.</p> <p>This is mutually exclusive with <code><strong><a class="reference internal" href="#ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-ownca-privatekey-content"><span class="std std-ref">ownca_privatekey_content</span></a></strong></code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-ownca-version"><strong>ownca_version</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The version of the <code>ownca</code> certificate.</p> <p>Nowadays it should almost always be <code>3</code>.</p> <p>This is only used by the <code>ownca</code> provider.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>3</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-privatekey-content"><strong>privatekey_content</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Content of the private key to use when signing the certificate.</p> <p>This is mutually exclusive with <code><strong><a class="reference internal" href="#ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-privatekey-path"><span class="std std-ref">privatekey_path</span></a></strong></code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-privatekey-passphrase"><strong>privatekey_passphrase</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The passphrase for the <code><strong><a class="reference internal" href="#ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-privatekey-path"><span class="std std-ref">privatekey_path</span></a></strong></code> resp. <code><strong><a class="reference internal" href="#ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-privatekey-content"><span class="std std-ref">privatekey_content</span></a></strong></code>.</p> <p>This is required if the private key is password protected.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-privatekey-path"><strong>privatekey_path</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">path</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Path to the private key to use when signing the certificate.</p> <p>This is mutually exclusive with <code><strong><a class="reference internal" href="#ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-privatekey-content"><span class="std std-ref">privatekey_content</span></a></strong></code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-provider"><strong>provider</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Name of the provider to use to generate/retrieve the OpenSSL certificate.</p> <p>The <code>entrust</code> provider requires credentials for the <a class="reference external" href="https://www.entrustdatacard.com/products/categories/ssl-certificates">Entrust Certificate Services</a> (ECS) API.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"entrust"</code></li> <li><code>"ownca"</code></li> <li><code>"selfsigned"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-select-crypto-backend"><strong>select_crypto_backend</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Determines which crypto backend to use.</p> <p>The default choice is <code>auto</code>, which tries to use <code>cryptography</code> if available.</p> <p>If set to <code>cryptography</code>, will try to use the <a class="reference external" href="https://cryptography.io/">cryptography</a> library.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"auto"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"cryptography"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-selfsigned-create-subject-key-identifier"><strong>selfsigned_create_subject_key_identifier</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Whether to create the Subject Key Identifier (SKI) from the public key.</p> <p>A value of <code>create_if_not_provided</code> (default) only creates a SKI when the CSR does not provide one.</p> <p>A value of <code>always_create</code> always creates a SKI. If the CSR provides one, that one is ignored.</p> <p>A value of <code>never_create</code> never creates a SKI. If the CSR provides one, that one is used.</p> <p>This is only used by the <code>selfsigned</code> provider.</p> <p>Note that this is only supported if the <code>cryptography</code> backend is used!</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"create_if_not_provided"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"always_create"</code></li> <li><code>"never_create"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-selfsigned-digest"><strong>selfsigned_digest</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Digest algorithm to be used when self-signing the certificate.</p> <p>This is only used by the <code>selfsigned</code> provider.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"sha256"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-selfsigned-notafter"><strong id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-selfsigned-not-after">selfsigned_not_after</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: selfsigned_notAfter</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The point in time at which the certificate stops being valid.</p> <p>Time can be specified either as relative time or as absolute timestamp.</p> <p>Time will always be interpreted as UTC.</p> <p>Valid format is <code>[+-]timespec | ASN.1 TIME</code> where timespec can be an integer + <code>[w | d | h | m | s]</code> (for example <code>+32w1d2h</code>).</p> <p>If this value is not specified, the certificate will stop being valid 10 years from now.</p> <p>Note that this value is <strong>not used to determine whether an existing certificate should be regenerated</strong>. This can be changed by setting the <code><strong><a class="reference internal" href="#ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-ignore-timestamps"><span class="std std-ref">ignore_timestamps</span></a></strong></code> option to <code>false</code>. Please note that you should avoid relative timestamps when setting <code><a class="reference internal" href="#ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-ignore-timestamps"><span class="std std-ref">ignore_timestamps=false</span></a></code>.</p> <p>This is only used by the <code>selfsigned</code> provider.</p> <p>On macOS 10.15 and onwards, TLS server certificates must have a validity period of 825 days or fewer. Please see <a class="reference external" href="https://support.apple.com/en-us/HT210176">https://support.apple.com/en-us/HT210176</a> for more details.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"+3650d"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-selfsigned-notbefore"><strong id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-selfsigned-not-before">selfsigned_not_before</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: selfsigned_notBefore</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The point in time the certificate is valid from.</p> <p>Time can be specified either as relative time or as absolute timestamp.</p> <p>Time will always be interpreted as UTC.</p> <p>Valid format is <code>[+-]timespec | ASN.1 TIME</code> where timespec can be an integer + <code>[w | d | h | m | s]</code> (for example <code>+32w1d2h</code>).</p> <p>If this value is not specified, the certificate will start being valid from now.</p> <p>Note that this value is <strong>not used to determine whether an existing certificate should be regenerated</strong>. This can be changed by setting the <code><strong><a class="reference internal" href="#ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-ignore-timestamps"><span class="std std-ref">ignore_timestamps</span></a></strong></code> option to <code>false</code>. Please note that you should avoid relative timestamps when setting <code><a class="reference internal" href="#ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-ignore-timestamps"><span class="std std-ref">ignore_timestamps=false</span></a></code>.</p> <p>This is only used by the <code>selfsigned</code> provider.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"+0s"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-selfsigned-version"><strong>selfsigned_version</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Version of the <code>selfsigned</code> certificate.</p> <p>Nowadays it should almost always be <code>3</code>.</p> <p>This is only used by the <code>selfsigned</code> provider.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>3</code></p> </div></td> </tr>  </table> </section> <section id="attributes"> <h2>Attributes</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Attribute</p></th> <th class="head"><p>Support</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-attribute-check-mode"><strong>check_mode</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-label">Support: </strong><strong class="ansible-attribute-support-full">full</strong></p> <p>Currently in check mode, private keys will not be (re-)generated, only the changed status is set. This will change in community.crypto 3.0.0.</p> <p>From community.crypto 3.0.0 on, the module will ignore check mode and always behave as if check mode is not active. If you think this breaks your use-case of this module, please create an issue in the community.crypto repository.</p> </div></td> <td><div class="ansible-option-cell">
<p>Can run in <code>check_mode</code> and return changed status prediction without modifying target.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-attribute-diff-mode"><strong>diff_mode</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-label">Support: </strong><strong class="ansible-attribute-support-full">full</strong></p> </div></td> <td><div class="ansible-option-cell">
<p>Will return details on what has changed (or possibly needs changing in <code>check_mode</code>), when in diff mode.</p> </div></td> </tr>  </table> </section> <section id="notes"> <h2>Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>All ASN.1 TIME values should be specified following the YYYYMMDDHHMMSSZ pattern.</li> <li>Date specified should be UTC. Minutes and seconds are mandatory.</li> <li>For security reason, when you use <code>ownca</code> provider, you should NOT run <a class="reference internal" href="x509_certificate_module.html#ansible-collections-community-crypto-x509-certificate-module"><span class="std std-ref">community.crypto.x509_certificate</span></a> on a target machine, but on a dedicated CA machine. It is recommended not to store the CA private key on the target machine. Once signed, the certificate can be moved to the target machine.</li> <li>For the <code>selfsigned</code> provider, <code><strong><a class="reference internal" href="#ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-csr-path"><span class="std std-ref">csr_path</span></a></strong></code> and <code><strong><a class="reference internal" href="#ansible-collections-community-crypto-x509-certificate-pipe-module-parameter-csr-content"><span class="std std-ref">csr_content</span></a></strong></code> are optional. If not provided, a certificate without any information (Subject, Subject Alternative Names, Key Usage, etc.) is created.</li> </ul> </div> </section> <section id="see-also"> <h2>See Also</h2> <div class="admonition seealso"> <p class="admonition-title">See also</p> <dl class="simple"> <dt><a class="reference internal" href="x509_certificate_module.html#ansible-collections-community-crypto-x509-certificate-module"><span class="std std-ref">community.crypto.x509_certificate</span></a></dt>
<dd>
<p>Generate and/or check OpenSSL certificates.</p> </dd> <dt><a class="reference internal" href="openssl_csr_module.html#ansible-collections-community-crypto-openssl-csr-module"><span class="std std-ref">community.crypto.openssl_csr</span></a></dt>
<dd>
<p>Generate OpenSSL Certificate Signing Request (CSR).</p> </dd> <dt><a class="reference internal" href="openssl_csr_pipe_module.html#ansible-collections-community-crypto-openssl-csr-pipe-module"><span class="std std-ref">community.crypto.openssl_csr_pipe</span></a></dt>
<dd>
<p>Generate OpenSSL Certificate Signing Request (CSR).</p> </dd> <dt><a class="reference internal" href="openssl_dhparam_module.html#ansible-collections-community-crypto-openssl-dhparam-module"><span class="std std-ref">community.crypto.openssl_dhparam</span></a></dt>
<dd>
<p>Generate OpenSSL Diffie-Hellman Parameters.</p> </dd> <dt><a class="reference internal" href="openssl_pkcs12_module.html#ansible-collections-community-crypto-openssl-pkcs12-module"><span class="std std-ref">community.crypto.openssl_pkcs12</span></a></dt>
<dd>
<p>Generate OpenSSL PKCS#12 archive.</p> </dd> <dt><a class="reference internal" href="openssl_privatekey_module.html#ansible-collections-community-crypto-openssl-privatekey-module"><span class="std std-ref">community.crypto.openssl_privatekey</span></a></dt>
<dd>
<p>Generate OpenSSL private keys.</p> </dd> <dt><a class="reference internal" href="openssl_privatekey_pipe_module.html#ansible-collections-community-crypto-openssl-privatekey-pipe-module"><span class="std std-ref">community.crypto.openssl_privatekey_pipe</span></a></dt>
<dd>
<p>Generate OpenSSL private keys without disk access.</p> </dd> <dt><a class="reference internal" href="openssl_publickey_module.html#ansible-collections-community-crypto-openssl-publickey-module"><span class="std std-ref">community.crypto.openssl_publickey</span></a></dt>
<dd>
<p>Generate an OpenSSL public key from its private key.</p> </dd> </dl> </div> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja">- name: Generate a Self Signed OpenSSL certificate
  community.crypto.x509_certificate_pipe:
    provider: selfsigned
    privatekey_path: /etc/ssl/private/ansible.com.pem
    csr_path: /etc/ssl/csr/ansible.com.csr
  register: result
- name: Print the certificate
  ansible.builtin.debug:
    var: result.certificate

# In the following example, both CSR and certificate file are stored on the
# machine where ansible-playbook is executed, while the OwnCA data (certificate,
# private key) are stored on the remote machine.

- name: (1/2) Generate an OpenSSL Certificate with the CSR provided inline
  community.crypto.x509_certificate_pipe:
    provider: ownca
    content: "{{ lookup('ansible.builtin.file', '/etc/ssl/csr/www.ansible.com.crt') }}"
    csr_content: "{{ lookup('ansible.builtin.file', '/etc/ssl/csr/www.ansible.com.csr') }}"
    ownca_cert: /path/to/ca_cert.crt
    ownca_privatekey: /path/to/ca_cert.key
    ownca_privatekey_passphrase: hunter2
  register: result

- name: (2/2) Store certificate
  ansible.builtin.copy:
    dest: /etc/ssl/csr/www.ansible.com.crt
    content: "{{ result.certificate }}"
  delegate_to: localhost
  when: result is changed

# In the following example, the certificate from another machine is signed by
# our OwnCA whose private key and certificate are only available on this
# machine (where ansible-playbook is executed), without having to write
# the certificate file to disk on localhost. The CSR could have been
# provided by community.crypto.openssl_csr_pipe earlier, or also have been
# read from the remote machine.

- name: (1/3) Read certificate's contents from remote machine
  ansible.builtin.slurp:
    src: /etc/ssl/csr/www.ansible.com.crt
  register: certificate_content

- name: (2/3) Generate an OpenSSL Certificate with the CSR provided inline
  community.crypto.x509_certificate_pipe:
    provider: ownca
    content: "{{ certificate_content.content | b64decode }}"
    csr_content: "{{ the_csr }}"
    ownca_cert: /path/to/ca_cert.crt
    ownca_privatekey: /path/to/ca_cert.key
    ownca_privatekey_passphrase: hunter2
  delegate_to: localhost
  register: result

- name: (3/3) Store certificate
  ansible.builtin.copy:
    dest: /etc/ssl/csr/www.ansible.com.crt
    content: "{{ result.certificate }}"
  when: result is changed
</pre> </section> <section id="return-values"> <h2>Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values.html#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Key</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-crypto-x509-certificate-pipe-module-return-certificate"><strong>certificate</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The (current or generated) certificate’s content.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> changed or success</p> </div></td> </tr>  </table> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Yanis Guenane (@Spredzy)</li> <li>Markus Teufelberger (@MarkusTeufelberger)</li> <li>Felix Fontein (@felixfontein)</li> </ul> </section> <section id="collection-links"> <h3>Collection links</h3> <ul class="ansible-links"> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.crypto/issues" rel="noopener external" target="_blank">Issue Tracker</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.crypto" rel="noopener external" target="_blank">Repository (Sources)</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://forum.ansible.com/tags/c/help/6/none/crypto" rel="noopener external" target="_blank">Ask for help (crypto)</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://forum.ansible.com/tags/c/help/6/none/acme" rel="noopener external" target="_blank">Ask for help (ACME)</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.crypto/issues/new?assignees=&amp;labels=&amp;template=bug_report.md" rel="noopener external" target="_blank">Submit a bug report</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.crypto/issues/new?assignees=&amp;labels=&amp;template=feature_request.md" rel="noopener external" target="_blank">Request a feature</a></span></li> <li><span><a class="reference internal" href="index.html#communication-for-community-crypto"><span class="std std-ref">Communication</span></a></span></li> </ul> </section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2024 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/community/crypto/x509_certificate_pipe_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/community/crypto/x509_certificate_pipe_module.html</a>
  </p>
</div>
