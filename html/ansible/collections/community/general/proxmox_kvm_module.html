<section id="community-general-proxmox-kvm-module-management-of-qemu-kvm-virtual-machines-in-proxmox-ve-cluster"> <h1>community.general.proxmox_kvm module – Management of Qemu(KVM) Virtual Machines in Proxmox VE cluster</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module is part of the <a class="reference external" href="https://galaxy.ansible.com/ui/repo/published/community/general/">community.general collection</a> (version 9.5.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install community.general</code>. You need further requirements to be able to use this module, see <a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-requirements"><span class="std std-ref">Requirements</span></a> for details.</p> <p>To use it in a playbook, specify: <code>community.general.proxmox_kvm</code>.</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#attributes" id="id4">Attributes</a></li> <li><a class="reference internal" href="#see-also" id="id5">See Also</a></li> <li><a class="reference internal" href="#examples" id="id6">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id7">Return Values</a></li> </ul>  <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>Allows you to create/delete/stop Qemu(KVM) Virtual Machines in Proxmox VE cluster.</li> <li>Since community.general 4.0.0 on, there are no more default values, see <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-proxmox-default-behavior"><span class="std std-ref">proxmox_default_behavior</span></a></strong></code>.</li> </ul> </section> <section id="requirements"> <h2 id="ansible-collections-community-general-proxmox-kvm-module-requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>proxmoxer</li> <li>requests</li> </ul> </section> <section id="parameters"> <h2>Parameters</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-acpi"><strong>acpi</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify if ACPI should be enabled/disabled.</p> <p>This option has no default unless <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-proxmox-default-behavior"><span class="std std-ref">proxmox_default_behavior</span></a></strong></code> is set to <code>compatibility</code>; then the default is <code>true</code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-agent"><strong>agent</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify if the QEMU Guest Agent should be enabled/disabled.</p> <p>Since community.general 5.5.0, this can also be a string instead of a boolean. This allows to specify values such as <code>enabled=1,fstrim_cloned_disks=1</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-api-host"><strong>api_host</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify the target host of the Proxmox VE cluster.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-api-password"><strong>api_password</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify the password to authenticate with.</p> <p>You can use <a class="reference internal" href="../../environment_variables.html#envvar-PROXMOX_PASSWORD"><code>PROXMOX_PASSWORD</code></a> environment variable.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-api-port"><strong>api_port</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> <p><em class="ansible-option-versionadded">added in community.general 9.1.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify the target port of the Proxmox VE cluster.</p> <p>Uses the <code>PROXMOX_PORT</code> environment variable if not specified.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-api-token-id"><strong>api_token_id</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in community.general 1.3.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify the token ID.</p> <p>Requires <code>proxmoxer&gt;=1.1.0</code> to work.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-api-token-secret"><strong>api_token_secret</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in community.general 1.3.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify the token secret.</p> <p>Requires <code>proxmoxer&gt;=1.1.0</code> to work.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-api-user"><strong>api_user</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify the user to authenticate with.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-archive"><strong>archive</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in community.general 6.5.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify a path to an archive to restore (instead of creating or cloning a VM).</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-args"><strong>args</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Pass arbitrary arguments to kvm.</p> <p>This option is for experts only!</p> <p>If <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-proxmox-default-behavior"><span class="std std-ref">proxmox_default_behavior</span></a></strong></code> is set to <code>compatibility</code>, this option has a default of <code>-serial unix:/var/run/qemu-server/&lt;vmid&gt;.serial,server,nowait</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-autostart"><strong>autostart</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify if the VM should be automatically restarted after crash (currently ignored in PVE API).</p> <p>This option has no default unless <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-proxmox-default-behavior"><span class="std std-ref">proxmox_default_behavior</span></a></strong></code> is set to <code>compatibility</code>; then the default is <code>false</code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-balloon"><strong>balloon</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify the amount of RAM for the VM in MB.</p> <p>Using zero disables the balloon driver.</p> <p>This option has no default unless <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-proxmox-default-behavior"><span class="std std-ref">proxmox_default_behavior</span></a></strong></code> is set to <code>compatibility</code>; then the default is <code>0</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-bios"><strong>bios</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify the BIOS implementation.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"seabios"</code></li> <li><code>"ovmf"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-boot"><strong>boot</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify the boot order -&gt; boot on floppy <code>a</code>, hard disk <code>c</code>, CD-ROM <code>d</code>, or network <code>n</code>.</p> <p>For newer versions of Proxmox VE, use a boot order like <code>order=scsi0;net0;hostpci0</code>.</p> <p>You can combine to set order.</p> <p>This option has no default unless <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-proxmox-default-behavior"><span class="std std-ref">proxmox_default_behavior</span></a></strong></code> is set to <code>compatibility</code>; then the default is <code>cnd</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-bootdisk"><strong>bootdisk</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Enable booting from specified disk. Format <code>(ide|sata|scsi|virtio)\d+</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-cicustom"><strong>cicustom</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in community.general 1.3.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>cloud-init: Specify custom files to replace the automatically generated ones at start.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-cipassword"><strong>cipassword</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in community.general 1.3.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>cloud-init: password of default user to create.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-citype"><strong>citype</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in community.general 1.3.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>cloud-init: Specifies the cloud-init configuration format.</p> <p>The default depends on the configured operating system type (<code>ostype</code>).</p> <p>We use the <code>nocloud</code> format for Linux, and <code>configdrive2</code> for Windows.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"nocloud"</code></li> <li><code>"configdrive2"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-ciuser"><strong>ciuser</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in community.general 1.3.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>cloud-init: username of default user to create.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-clone"><strong>clone</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Name of VM to be cloned. If <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-vmid"><span class="std std-ref">vmid</span></a></strong></code> is set, <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-clone"><span class="std std-ref">clone</span></a></strong></code> can take an arbitrary value but is required for initiating the clone.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-cores"><strong>cores</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify number of cores per socket.</p> <p>This option has no default unless <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-proxmox-default-behavior"><span class="std std-ref">proxmox_default_behavior</span></a></strong></code> is set to <code>compatibility</code>; then the default is <code>1</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-cpu"><strong>cpu</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify emulated CPU type.</p> <p>This option has no default unless <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-proxmox-default-behavior"><span class="std std-ref">proxmox_default_behavior</span></a></strong></code> is set to <code>compatibility</code>; then the default is <code>kvm64</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-cpulimit"><strong>cpulimit</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify if CPU usage will be limited. Value 0 indicates no CPU limit.</p> <p>If the computer has 2 CPUs, it has total of ‘2’ CPU time</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-cpuunits"><strong>cpuunits</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify CPU weight for a VM.</p> <p>You can disable fair-scheduler configuration by setting this to 0</p> <p>This option has no default unless <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-proxmox-default-behavior"><span class="std std-ref">proxmox_default_behavior</span></a></strong></code> is set to <code>compatibility</code>; then the default is <code>1000</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-delete"><strong>delete</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify a list of settings you want to delete.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-description"><strong>description</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify the description for the VM. Only used on the configuration web interface.</p> <p>This is saved as comment inside the configuration file.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-digest"><strong>digest</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify if to prevent changes if current configuration file has different SHA1 digest.</p> <p>This can be used to prevent concurrent modifications.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-efidisk0"><strong>efidisk0</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> <p><em class="ansible-option-versionadded">added in community.general 4.5.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify a hash/dictionary of EFI disk options.</p> <p>Requires <code><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-bios"><span class="std std-ref">bios=ovmf</span></a></code> to be set to be able to use it.</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-efidisk0-efitype"><strong>efitype</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p><code>efitype</code> indicates the size of the EFI disk.</p> <p><code>2m</code> will allow for a 2MB EFI disk, which will be enough to persist boot order and new boot entries.</p> <p><code>4m</code> will allow for a 4MB EFI disk, which will additionally allow to store EFI keys in order to enable Secure Boot</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"2m"</code></li> <li><code>"4m"</code></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-efidisk0-format"><strong>format</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p><code>format</code> is the drive’s backing file’s data format. Please refer to the Proxmox VE Administrator Guide, section Proxmox VE Storage (see <a class="reference external" href="https://pve.proxmox.com/pve-docs/chapter-pvesm.html">https://pve.proxmox.com/pve-docs/chapter-pvesm.html</a> for the latest version, tables 3 to 14) to find out format supported by the provided storage backend.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-efidisk0-pre-enrolled-keys"><strong>pre_enrolled_keys</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p><code>pre_enrolled_keys</code> indicates whether EFI keys for Secure Boot should be enrolled <code>1</code> in the VM firmware upon creation or not (0).</p> <p>If set to <code>1</code>, Secure Boot will also be enabled by default when the VM is created.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-efidisk0-storage"><strong>storage</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p><code>storage</code> is the storage identifier where to create the disk.</p> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-force"><strong>force</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Allow to force stop VM.</p> <p>Can be used with states <code>stopped</code>, <code>restarted</code>, and <code>absent</code>.</p> <p>This option has no default unless <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-proxmox-default-behavior"><span class="std std-ref">proxmox_default_behavior</span></a></strong></code> is set to <code>compatibility</code>; then the default is <code>false</code>.</p> <p>Requires parameter <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-archive"><span class="std std-ref">archive</span></a></strong></code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-format"><strong>format</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Target drive’s backing file’s data format.</p> <p>Used only with clone</p> <p>Use <code><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-format"><span class="std std-ref">format=unspecified</span></a></code> and <code><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-full"><span class="std std-ref">full=false</span></a></code> for a linked clone.</p> <p>Please refer to the Proxmox VE Administrator Guide, section Proxmox VE Storage (see <a class="reference external" href="https://pve.proxmox.com/pve-docs/chapter-pvesm.html">https://pve.proxmox.com/pve-docs/chapter-pvesm.html</a> for the latest version, tables 3 to 14) to find out format supported by the provided storage backend.</p> <p>This option has no default unless <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-proxmox-default-behavior"><span class="std std-ref">proxmox_default_behavior</span></a></strong></code> is set to <code>compatibility</code>; then the default is <code>qcow2</code>. If <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-proxmox-default-behavior"><span class="std std-ref">proxmox_default_behavior</span></a></strong></code> is set to <code>no_defaults</code>, not specifying this option is equivalent to setting it to <code>unspecified</code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"cloop"</code></li> <li><code>"cow"</code></li> <li><code>"qcow"</code></li> <li><code>"qcow2"</code></li> <li><code>"qed"</code></li> <li><code>"raw"</code></li> <li><code>"vmdk"</code></li> <li><code>"unspecified"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-freeze"><strong>freeze</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify if PVE should freeze CPU at startup (use ‘c’ monitor command to start execution).</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-full"><strong>full</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Create a full copy of all disk. This is always done when you clone a normal VM.</p> <p>For VM templates, we try to create a linked clone by default.</p> <p>Used only with clone</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-hookscript"><strong>hookscript</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in community.general 8.1.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Script that will be executed during various steps in the containers lifetime.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-hostpci"><strong>hostpci</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify a hash/dictionary of map host pci devices into guest. <code><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-hostpci"><span class="std std-ref">hostpci='{"key":"value", "key":"value"}'</span></a></code>.</p> <p>Keys allowed are - <code>hostpci[n]</code> where 0 ≤ n ≤ N.</p> <p>Values allowed are - <code>"host="HOSTPCIID[;HOSTPCIID2...]",pcie="1|0",rombar="1|0",x-vga="1|0""</code>.</p> <p>The <code>host</code> parameter is Host PCI device pass through. HOSTPCIID syntax is <code>bus:dev.func</code> (hexadecimal numbers).</p> <p><code>pcie=boolean</code> <code>default=0</code> Choose the PCI-express bus (needs the q35 machine model).</p> <p><code>rombar=boolean</code> <code>default=1</code> Specify whether or not the device’s ROM will be visible in the guest’s memory map.</p> <p><code>x-vga=boolean</code> <code>default=0</code> Enable vfio-vga device support.</p> <p>/!\ This option allows direct access to host hardware. So it is no longer possible to migrate such machines - use with special care.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-hotplug"><strong>hotplug</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Selectively enable hotplug features.</p> <p>This is a comma separated list of hotplug features <code>network</code>, <code>disk</code>, <code>cpu</code>, <code>memory</code>, and <code>usb</code>.</p> <p>Value 0 disables hotplug completely and value 1 is an alias for the default <code>network,disk,usb</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-hugepages"><strong>hugepages</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Enable/disable hugepages memory.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"any"</code></li> <li><code>"2"</code></li> <li><code>"1024"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-ide"><strong>ide</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>A hash/dictionary of volume used as IDE hard disk or CD-ROM. <code><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-ide"><span class="std std-ref">ide='{"key":"value", "key":"value"}'</span></a></code>.</p> <p>Keys allowed are - <code>ide[n]</code> where 0 ≤ n ≤ 3.</p> <p>Values allowed are - <code>"storage:size,format=value"</code>.</p> <p><code>storage</code> is the storage identifier where to create the disk.</p> <p><code>size</code> is the size of the disk in GB.</p> <p><code>format</code> is the drive’s backing file’s data format. <code>qcow2|raw|subvol</code>. Please refer to the Proxmox VE Administrator Guide, section Proxmox VE Storage (see <a class="reference external" href="https://pve.proxmox.com/pve-docs/chapter-pvesm.html">https://pve.proxmox.com/pve-docs/chapter-pvesm.html</a> for the latest version, tables 3 to 14) to find out format supported by the provided storage backend.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-ipconfig"><strong>ipconfig</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> <p><em class="ansible-option-versionadded">added in community.general 1.3.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>cloud-init: Set the IP configuration.</p> <p>A hash/dictionary of network ip configurations. <code><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-ipconfig"><span class="std std-ref">ipconfig='{"key":"value", "key":"value"}'</span></a></code>.</p> <p>Keys allowed are - <code>ipconfig[n]</code> where 0 ≤ n ≤ network interfaces.</p> <p>Values allowed are - <code>"[gw=&lt;GatewayIPv4&gt;] [,gw6=&lt;GatewayIPv6&gt;] [,ip=&lt;IPv4Format/CIDR&gt;] [,ip6=&lt;IPv6Format/CIDR&gt;]"</code>.</p> <p>cloud-init: Specify IP addresses and gateways for the corresponding interface.</p> <p>IP addresses use CIDR notation, gateways are optional but they should be in the same subnet of specified IP address.</p> <p>The special string ‘dhcp’ can be used for IP addresses to use DHCP, in which case no explicit gateway should be provided.</p> <p>For IPv6 the special string ‘auto’ can be used to use stateless autoconfiguration.</p> <p>If cloud-init is enabled and neither an IPv4 nor an IPv6 address is specified, it defaults to using dhcp on IPv4.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-keyboard"><strong>keyboard</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Sets the keyboard layout for VNC server.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-kvm"><strong>kvm</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Enable/disable KVM hardware virtualization.</p> <p>This option has no default unless <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-proxmox-default-behavior"><span class="std std-ref">proxmox_default_behavior</span></a></strong></code> is set to <code>compatibility</code>; then the default is <code>true</code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-localtime"><strong>localtime</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Sets the real time clock to local time.</p> <p>This is enabled by default if ostype indicates a Microsoft OS.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-lock"><strong>lock</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Lock/unlock the VM.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"migrate"</code></li> <li><code>"backup"</code></li> <li><code>"snapshot"</code></li> <li><code>"rollback"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-machine"><strong>machine</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specifies the Qemu machine type.</p> <p>Type =&gt; <code>(pc|pc(-i440fx)?-\d+\.\d+(\.pxe)?|q35|pc-q35-\d+\.\d+(\.pxe)?)</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-memory"><strong>memory</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Memory size in MB for instance.</p> <p>This option has no default unless <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-proxmox-default-behavior"><span class="std std-ref">proxmox_default_behavior</span></a></strong></code> is set to <code>compatibility</code>; then the default is <code>512</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-migrate"><strong>migrate</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in community.general 7.0.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Migrate the VM to <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-node"><span class="std std-ref">node</span></a></strong></code> if it is on another node.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-migrate-downtime"><strong>migrate_downtime</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Sets maximum tolerated downtime (in seconds) for migrations.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-migrate-speed"><strong>migrate_speed</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Sets maximum speed (in MB/s) for migrations.</p> <p>A value of 0 is no limit.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-name"><strong>name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specifies the VM name. Name could be non-unique across the cluster.</p> <p>Required only for <code><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-state"><span class="std std-ref">state=present</span></a></code>.</p> <p>With <code><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-state"><span class="std std-ref">state=present</span></a></code> if <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-vmid"><span class="std std-ref">vmid</span></a></strong></code> not provided and VM with name exists in the cluster then no changes will be made.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-nameservers"><strong>nameservers</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> <p><em class="ansible-option-versionadded">added in community.general 1.3.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>cloud-init: DNS server IP address(es).</p> <p>If unset, PVE host settings are used.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-net"><strong>net</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>A hash/dictionary of network interfaces for the VM. <code><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-net"><span class="std std-ref">net='{"key":"value", "key":"value"}'</span></a></code>.</p> <p>Keys allowed are - <code>net[n]</code> where 0 ≤ n ≤ N.</p> <p>Values allowed are - <code>"model="XX:XX:XX:XX:XX:XX",bridge="value",rate="value",tag="value",firewall="1|0",trunks="vlanid""</code>.</p> <p>Model is one of <code>e1000 e1000-82540em e1000-82544gc e1000-82545em i82551 i82557b i82559er ne2k_isa ne2k_pci pcnet rtl8139 virtio vmxnet3</code>.</p> <p><code>XX:XX:XX:XX:XX:XX</code> should be an unique MAC address. This is automatically generated if not specified.</p> <p>The <code>bridge</code> parameter can be used to automatically add the interface to a bridge device. The Proxmox VE standard bridge is called ‘vmbr0’.</p> <p>Option <code>rate</code> is used to limit traffic bandwidth from and to this interface. It is specified as floating point number, unit is ‘Megabytes per second’.</p> <p>If you specify no bridge, we create a kvm ‘user’ (NATed) network device, which provides DHCP and DNS services.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-newid"><strong>newid</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>VMID for the clone. Used only with clone.</p> <p>If newid is not set, the next available VM ID will be fetched from ProxmoxAPI.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-node"><strong>node</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Proxmox VE node on which to operate.</p> <p>Only required for <code><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-state"><span class="std std-ref">state=present</span></a></code>.</p> <p>For every other states it will be autodiscovered.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-numa"><strong>numa</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>A hash/dictionaries of NUMA topology. <code><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-numa"><span class="std std-ref">numa='{"key":"value", "key":"value"}'</span></a></code>.</p> <p>Keys allowed are - <code>numa[n]</code> where 0 ≤ n ≤ N.</p> <p>Values allowed are - <code>"cpu="&lt;id[-id];...&gt;",hostnodes="&lt;id[-id];...&gt;",memory="number",policy="(bind|interleave|preferred</code>“”).</p> <p><code>cpus</code> CPUs accessing this NUMA node.</p> <p><code>hostnodes</code> Host NUMA nodes to use.</p> <p><code>memory</code> Amount of memory this NUMA node provides.</p> <p><code>policy</code> NUMA allocation policy.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-numa-enabled"><strong>numa_enabled</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Enables NUMA.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-onboot"><strong>onboot</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specifies whether a VM will be started during system bootup.</p> <p>This option has no default unless <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-proxmox-default-behavior"><span class="std std-ref">proxmox_default_behavior</span></a></strong></code> is set to <code>compatibility</code>; then the default is <code>true</code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-ostype"><strong>ostype</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specifies guest operating system. This is used to enable special optimization/features for specific operating systems.</p> <p>The l26 is Linux 2.6/3.X Kernel.</p> <p>This option has no default unless <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-proxmox-default-behavior"><span class="std std-ref">proxmox_default_behavior</span></a></strong></code> is set to <code>compatibility</code>; then the default is <code>l26</code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"other"</code></li> <li><code>"wxp"</code></li> <li><code>"w2k"</code></li> <li><code>"w2k3"</code></li> <li><code>"w2k8"</code></li> <li><code>"wvista"</code></li> <li><code>"win7"</code></li> <li><code>"win8"</code></li> <li><code>"win10"</code></li> <li><code>"win11"</code></li> <li><code>"l24"</code></li> <li><code>"l26"</code></li> <li><code>"solaris"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-parallel"><strong>parallel</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>A hash/dictionary of map host parallel devices. <code><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-parallel"><span class="std std-ref">parallel='{"key":"value", "key":"value"}'</span></a></code>.</p> <p>Keys allowed are - (parallel[n]) where 0 ≤ n ≤ 2.</p> <p>Values allowed are - <code>"/dev/parport\d+|/dev/usb/lp\d+"</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-pool"><strong>pool</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Add the new VM to the specified pool.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-protection"><strong>protection</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Enable/disable the protection flag of the VM. This will enable/disable the remove VM and remove disk operations.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-proxmox-default-behavior"><strong>proxmox_default_behavior</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in community.general 1.3.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>As of community.general 4.0.0, various options no longer have default values. These default values caused problems when users expected different behavior from Proxmox by default or filled options which caused problems when set. - The value <code>compatibility</code> (default before community.general 4.0.0) will ensure that the default values are used when the values are not explicitly specified by the user. The new default is <code>no_defaults</code>, which makes sure these options have no defaults. - This affects the <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-acpi"><span class="std std-ref">acpi</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-autostart"><span class="std std-ref">autostart</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-balloon"><span class="std std-ref">balloon</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-boot"><span class="std std-ref">boot</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-cores"><span class="std std-ref">cores</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-cpu"><span class="std std-ref">cpu</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-cpuunits"><span class="std std-ref">cpuunits</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-force"><span class="std std-ref">force</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-format"><span class="std std-ref">format</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-kvm"><span class="std std-ref">kvm</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-memory"><span class="std std-ref">memory</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-onboot"><span class="std std-ref">onboot</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-ostype"><span class="std std-ref">ostype</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-sockets"><span class="std std-ref">sockets</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-tablet"><span class="std std-ref">tablet</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-template"><span class="std std-ref">template</span></a></strong></code>, and <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-vga"><span class="std std-ref">vga</span></a></strong></code> options. - This option is deprecated and will be removed in community.general 10.0.0.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"compatibility"</code></li> <li>
<code><strong>"no_defaults"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-reboot"><strong>reboot</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Allow reboot. If set to <code>true</code>, the VM exit on reboot.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-revert"><strong>revert</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Revert a pending change.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-sata"><strong>sata</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>A hash/dictionary of volume used as sata hard disk or CD-ROM. <code><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-sata"><span class="std std-ref">sata='{"key":"value", "key":"value"}'</span></a></code>.</p> <p>Keys allowed are - <code>sata[n]</code> where 0 ≤ n ≤ 5.</p> <p>Values allowed are - <code>"storage:size,format=value"</code>.</p> <p><code>storage</code> is the storage identifier where to create the disk.</p> <p><code>size</code> is the size of the disk in GB.</p> <p><code>format</code> is the drive’s backing file’s data format. <code>qcow2|raw|subvol</code>. Please refer to the Proxmox VE Administrator Guide, section Proxmox VE Storage (see <a class="reference external" href="https://pve.proxmox.com/pve-docs/chapter-pvesm.html">https://pve.proxmox.com/pve-docs/chapter-pvesm.html</a> for the latest version, tables 3 to 14) to find out format supported by the provided storage backend.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-scsi"><strong>scsi</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>A hash/dictionary of volume used as SCSI hard disk or CD-ROM. <code><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-scsi"><span class="std std-ref">scsi='{"key":"value", "key":"value"}'</span></a></code>.</p> <p>Keys allowed are - <code>scsi[n]</code> where 0 ≤ n ≤ 13.</p> <p>Values allowed are - <code>"storage:size,format=value"</code>.</p> <p><code>storage</code> is the storage identifier where to create the disk.</p> <p><code>size</code> is the size of the disk in GB.</p> <p><code>format</code> is the drive’s backing file’s data format. <code>qcow2|raw|subvol</code>. Please refer to the Proxmox VE Administrator Guide, section Proxmox VE Storage (see <a class="reference external" href="https://pve.proxmox.com/pve-docs/chapter-pvesm.html">https://pve.proxmox.com/pve-docs/chapter-pvesm.html</a> for the latest version, tables 3 to 14) to find out format supported by the provided storage backend.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-scsihw"><strong>scsihw</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specifies the SCSI controller model.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"lsi"</code></li> <li><code>"lsi53c810"</code></li> <li><code>"virtio-scsi-pci"</code></li> <li><code>"virtio-scsi-single"</code></li> <li><code>"megasas"</code></li> <li><code>"pvscsi"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-searchdomains"><strong>searchdomains</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> <p><em class="ansible-option-versionadded">added in community.general 1.3.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>cloud-init: Sets DNS search domain(s).</p> <p>If unset, PVE host settings are used.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-serial"><strong>serial</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>A hash/dictionary of serial device to create inside the VM. <code>'{"key":"value", "key":"value"}'</code>.</p> <p>Keys allowed are - serial[n](str; required) where 0 ≤ n ≤ 3.</p> <p>Values allowed are - <code>(/dev/.+|socket)</code>.</p> <p>/!\ If you pass through a host serial device, it is no longer possible to migrate such machines - use with special care.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-shares"><strong>shares</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Rets amount of memory shares for auto-ballooning. (0 - 50000).</p> <p>The larger the number is, the more memory this VM gets.</p> <p>The number is relative to weights of all other running VMs.</p> <p>Using 0 disables auto-ballooning, this means no limit.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-skiplock"><strong>skiplock</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Ignore locks</p> <p>Only root is allowed to use this option.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-smbios"><strong>smbios</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specifies SMBIOS type 1 fields.</p> <p>Comma separated, Base64 encoded (optional) SMBIOS properties:</p> <p><code>[base64=&lt;1|0&gt;] [,family=&lt;Base64 encoded string&gt;]</code></p> <p><code>[,manufacturer=&lt;Base64 encoded string&gt;]</code></p> <p><code>[,product=&lt;Base64 encoded string&gt;]</code></p> <p><code>[,serial=&lt;Base64 encoded string&gt;]</code></p> <p><code>[,sku=&lt;Base64 encoded string&gt;]</code></p> <p><code>[,uuid=&lt;UUID&gt;]</code></p> <p><code>[,version=&lt;Base64 encoded string&gt;]</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-snapname"><strong>snapname</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The name of the snapshot. Used only with clone.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-sockets"><strong>sockets</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Sets the number of CPU sockets. (1 - N).</p> <p>This option has no default unless <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-proxmox-default-behavior"><span class="std std-ref">proxmox_default_behavior</span></a></strong></code> is set to <code>compatibility</code>; then the default is <code>1</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-sshkeys"><strong>sshkeys</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in community.general 1.3.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>cloud-init: SSH key to assign to the default user. NOT TESTED with multiple keys but a multi-line value should work.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-startdate"><strong>startdate</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Sets the initial date of the real time clock.</p> <p>Valid format for date are <code>'now'</code> or <code>'2016-09-25T16:01:21'</code> or <code>'2016-09-25'</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-startup"><strong>startup</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Startup and shutdown behavior. <code>[[order=]\d+] [,up=\d+] [,down=\d+]</code>.</p> <p>Order is a non-negative number defining the general startup order.</p> <p>Shutdown in done with reverse ordering.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-state"><strong>state</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Indicates desired state of the instance.</p> <p>If <code>current</code>, the current state of the VM will be fetched. You can access it with <code>results.status</code></p> <p><code>template</code> was added in community.general 8.1.0.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"present"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"started"</code></li> <li><code>"absent"</code></li> <li><code>"stopped"</code></li> <li><code>"restarted"</code></li> <li><code>"current"</code></li> <li><code>"template"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-storage"><strong>storage</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Target storage for full clone.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-tablet"><strong>tablet</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Enables/disables the USB tablet device.</p> <p>This option has no default unless <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-proxmox-default-behavior"><span class="std std-ref">proxmox_default_behavior</span></a></strong></code> is set to <code>compatibility</code>; then the default is <code>false</code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-tags"><strong>tags</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> <p><em class="ansible-option-versionadded">added in community.general 2.3.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>List of tags to apply to the VM instance.</p> <p>Tags must start with <code>[a-z0-9_]</code> followed by zero or more of the following characters <code>[a-z0-9_-+.]</code>.</p> <p>Tags are only available in Proxmox 6+.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-target"><strong>target</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Target node. Only allowed if the original VM is on shared storage.</p> <p>Used only with clone</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-tdf"><strong>tdf</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Enables/disables time drift fix.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-template"><strong>template</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Enables/disables the template.</p> <p>This option has no default unless <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-proxmox-default-behavior"><span class="std std-ref">proxmox_default_behavior</span></a></strong></code> is set to <code>compatibility</code>; then the default is <code>false</code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-timeout"><strong>timeout</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Timeout for operations.</p> <p>When used with <code><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-state"><span class="std std-ref">state=stopped</span></a></code> the option sets a graceful timeout for VM stop after which a VM will be forcefully stopped.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>30</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-tpmstate0"><strong>tpmstate0</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> <p><em class="ansible-option-versionadded">added in community.general 7.1.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>A hash/dictionary of options for the Trusted Platform Module disk.</p> <p>A TPM state disk is required for Windows 11 installations.</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-tpmstate0-storage"><strong>storage</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p><code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-tpmstate0-storage"><span class="std std-ref">tpmstate0.storage</span></a></strong></code> is the storage identifier where to create the disk.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-tpmstate0-version"><strong>version</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The TPM version to use.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"1.2"</code></li> <li>
<code><strong>"2.0"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-update"><strong>update</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>If <code>true</code>, the VM will be updated with new value.</p> <p>Because of the operations of the API and security reasons, I have disabled the update of the following parameters <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-net"><span class="std std-ref">net</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-virtio"><span class="std std-ref">virtio</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-ide"><span class="std std-ref">ide</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-sata"><span class="std std-ref">sata</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-scsi"><span class="std std-ref">scsi</span></a></strong></code>. Per example updating <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-net"><span class="std std-ref">net</span></a></strong></code> update the MAC address and <code>virtio</code> create always new disk… This security feature can be disabled by setting the <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-update-unsafe"><span class="std std-ref">update_unsafe</span></a></strong></code> to <code>true</code>.</p> <p>Update of <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-pool"><span class="std std-ref">pool</span></a></strong></code> is disabled. It needs an additional API endpoint not covered by this module.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-update-unsafe"><strong>update_unsafe</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in community.general 8.4.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>If <code>true</code>, do not enforce limitations on parameters <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-net"><span class="std std-ref">net</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-virtio"><span class="std std-ref">virtio</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-ide"><span class="std std-ref">ide</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-sata"><span class="std std-ref">sata</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-scsi"><span class="std std-ref">scsi</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-efidisk0"><span class="std std-ref">efidisk0</span></a></strong></code>, and <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-tpmstate0"><span class="std std-ref">tpmstate0</span></a></strong></code>. Use this option with caution because an improper configuration might result in a permanent loss of data (e.g. disk recreated).</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-usb"><strong>usb</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> <p><em class="ansible-option-versionadded">added in community.general 9.0.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>A hash/dictionary of USB devices for the VM. <code><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-usb"><span class="std std-ref">usb='{"key":"value", "key":"value"}'</span></a></code>.</p> <p>Keys allowed are - <code>usb[n]</code> where 0 ≤ n ≤ N.</p> <p>Values allowed are - <code>host="value|spice",mapping="value",usb3="1|0"</code>.</p> <p>host is either <code>spice</code> or the USB id/port.</p> <p>Option <code>mapping</code> is the mapped USB device name.</p> <p>Option <code>usb3</code> enables USB 3 support.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-validate-certs"><strong>validate_certs</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>If <code>false</code>, SSL certificates will not be validated.</p> <p>This should only be used on personally controlled sites using self-signed certificates.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-vcpus"><strong>vcpus</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Sets number of hotplugged vcpus.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-vga"><strong>vga</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Select VGA type. If you want to use high resolution modes (&gt;= 1280x1024x16) then you should use option ‘std’ or ‘vmware’.</p> <p>This option has no default unless <code><strong><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-proxmox-default-behavior"><span class="std std-ref">proxmox_default_behavior</span></a></strong></code> is set to <code>compatibility</code>; then the default is <code>std</code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"std"</code></li> <li><code>"cirrus"</code></li> <li><code>"vmware"</code></li> <li><code>"qxl"</code></li> <li><code>"serial0"</code></li> <li><code>"serial1"</code></li> <li><code>"serial2"</code></li> <li><code>"serial3"</code></li> <li><code>"qxl2"</code></li> <li><code>"qxl3"</code></li> <li><code>"qxl4"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-virtio"><strong>virtio</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>A hash/dictionary of volume used as VIRTIO hard disk. <code><a class="reference internal" href="#ansible-collections-community-general-proxmox-kvm-module-parameter-virtio"><span class="std std-ref">virtio='{"key":"value", "key":"value"}'</span></a></code>.</p> <p>Keys allowed are - <code>virtio[n]</code> where 0 ≤ n ≤ 15.</p> <p>Values allowed are - <code>"storage:size,format=value"</code>.</p> <p><code>storage</code> is the storage identifier where to create the disk.</p> <p><code>size</code> is the size of the disk in GB.</p> <p><code>format</code> is the drive’s backing file’s data format. <code>qcow2|raw|subvol</code>. Please refer to the Proxmox VE Administrator Guide, section Proxmox VE Storage (see <a class="reference external" href="https://pve.proxmox.com/pve-docs/chapter-pvesm.html">https://pve.proxmox.com/pve-docs/chapter-pvesm.html</a> for the latest version, tables 3 to 14) to find out format supported by the provided storage backend.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-vmid"><strong>vmid</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specifies the instance ID.</p> <p>If not set the next available ID will be fetched from ProxmoxAPI.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-parameter-watchdog"><strong>watchdog</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Creates a virtual hardware watchdog device.</p> </div></td> </tr>  </table> </section> <section id="attributes"> <h2>Attributes</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Attribute</p></th> <th class="head"><p>Support</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-attribute-action-group"><strong>action_group</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-property">Action group:</strong> <strong class="ansible-attribute-support-full">community.general.proxmox</strong></p> <p><em class="ansible-option-versionadded">added in community.general 9.0.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Use <code>group/community.general.proxmox</code> in <code>module_defaults</code> to set defaults for this module.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-attribute-check-mode"><strong>check_mode</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-label">Support: </strong><strong class="ansible-attribute-support-none">none</strong></p> </div></td> <td><div class="ansible-option-cell">
<p>Can run in <code>check_mode</code> and return changed status prediction without modifying target.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-attribute-diff-mode"><strong>diff_mode</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-label">Support: </strong><strong class="ansible-attribute-support-none">none</strong></p> </div></td> <td><div class="ansible-option-cell">
<p>Will return details on what has changed (or possibly needs changing in <code>check_mode</code>), when in diff mode.</p> </div></td> </tr>  </table> </section> <section id="see-also"> <h2>See Also</h2> <div class="admonition seealso"> <p class="admonition-title">See also</p> <dl class="simple"> <dt><a class="reference internal" href="proxmox_vm_info_module.html#ansible-collections-community-general-proxmox-vm-info-module"><span class="std std-ref">community.general.proxmox_vm_info</span></a></dt>
<dd>
<p>Retrieve information about one or more Proxmox VE virtual machines.</p> </dd> </dl> </div> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja">- name: Create new VM with minimal options
  community.general.proxmox_kvm:
    api_user: root@pam
    api_password: secret
    api_host: helldorado
    name: spynal
    node: sabrewulf

- name: Create a VM from archive (backup)
  community.general.proxmox_kvm:
    api_user: root@pam
    api_password: secret
    api_host: helldorado
    archive: backup-storage:backup/vm/140/2023-03-08T06:41:23Z
    name: spynal

- name: Create new VM with minimal options and given vmid
  community.general.proxmox_kvm:
    api_user: root@pam
    api_password: secret
    api_host: helldorado
    name: spynal
    node: sabrewulf
    vmid: 100

- name: Create new VM with two network interface options
  community.general.proxmox_kvm:
    api_user: root@pam
    api_password: secret
    api_host: helldorado
    name: spynal
    node: sabrewulf
    net:
      net0: 'virtio,bridge=vmbr1,rate=200'
      net1: 'e1000,bridge=vmbr2'

- name: Create new VM with one network interface, three virto hard disk, 4 cores, and 2 vcpus
  community.general.proxmox_kvm:
    api_user: root@pam
    api_password: secret
    api_host: helldorado
    name: spynal
    node: sabrewulf
    net:
      net0: 'virtio,bridge=vmbr1,rate=200'
    virtio:
      virtio0: 'VMs_LVM:10'
      virtio1: 'VMs:2,format=qcow2'
      virtio2: 'VMs:5,format=raw'
    cores: 4
    vcpus: 2

- name: Create VM with 1 10GB SATA disk and an EFI disk, with Secure Boot disabled by default
  community.general.proxmox_kvm:
    api_user: root@pam
    api_password: secret
    api_host: helldorado
    name: spynal
    node: sabrewulf
    sata:
      sata0: 'VMs_LVM:10,format=raw'
    bios: ovmf
    efidisk0:
      storage: VMs_LVM_thin
      format: raw
      efitype: 4m
      pre_enrolled_keys: false

- name: Create VM with 1 10GB SATA disk and an EFI disk, with Secure Boot enabled by default
  community.general.proxmox_kvm:
    api_user: root@pam
    api_password: secret
    api_host: helldorado
    name: spynal
    node: sabrewulf
    sata:
      sata0: 'VMs_LVM:10,format=raw'
    bios: ovmf
    efidisk0:
      storage: VMs_LVM
      format: raw
      efitype: 4m
      pre_enrolled_keys: 1

- name: &gt;
    Clone VM with only source VM name.
    The VM source is spynal.
    The target VM name is zavala
  community.general.proxmox_kvm:
    api_user: root@pam
    api_password: secret
    api_host: helldorado
    clone: spynal
    name: zavala
    node: sabrewulf
    storage: VMs
    format: qcow2
    timeout: 500

- name: &gt;
    Create linked clone VM with only source VM name.
    The VM source is spynal.
    The target VM name is zavala
  community.general.proxmox_kvm:
    api_user: root@pam
    api_password: secret
    api_host: helldorado
    clone: spynal
    name: zavala
    node: sabrewulf
    storage: VMs
    full: false
    format: unspecified
    timeout: 500

- name: Clone VM with source vmid and target newid and raw format
  community.general.proxmox_kvm:
    api_user: root@pam
    api_password: secret
    api_host: helldorado
    clone: arbitrary_name
    vmid: 108
    newid: 152
    name: zavala
    node: sabrewulf
    storage: LVM_STO
    format: raw
    timeout: 300

- name: Create new VM and lock it for snapshot
  community.general.proxmox_kvm:
    api_user: root@pam
    api_password: secret
    api_host: helldorado
    name: spynal
    node: sabrewulf
    lock: snapshot

- name: Create new VM and set protection to disable the remove VM and remove disk operations
  community.general.proxmox_kvm:
    api_user: root@pam
    api_password: secret
    api_host: helldorado
    name: spynal
    node: sabrewulf
    protection: true

- name: Create new VM using cloud-init with a username and password
  community.general.proxmox_kvm:
    node: sabrewulf
    api_user: root@pam
    api_password: secret
    api_host: helldorado
    name: spynal
    ide:
      ide2: 'local:cloudinit,format=qcow2'
    ciuser: mylinuxuser
    cipassword: supersecret
    searchdomains: 'mydomain.internal'
    nameservers: 1.1.1.1
    net:
      net0: 'virtio,bridge=vmbr1,tag=77'
    ipconfig:
      ipconfig0: 'ip=192.168.1.1/24,gw=192.168.1.1'

- name: Create new VM using Cloud-Init with an ssh key
  community.general.proxmox_kvm:
    node: sabrewulf
    api_user: root@pam
    api_password: secret
    api_host: helldorado
    name: spynal
    ide:
      ide2: 'local:cloudinit,format=qcow2'
    sshkeys: 'ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAILJkVm98B71lD5XHfihwcYHE9TVpsJmK1vR1JcaU82L+'
    searchdomains: 'mydomain.internal'
    nameservers:
      - '1.1.1.1'
      - '8.8.8.8'
    net:
      net0: 'virtio,bridge=vmbr1,tag=77'
    ipconfig:
      ipconfig0: 'ip=192.168.1.1/24'

- name: Start VM
  community.general.proxmox_kvm:
    api_user: root@pam
    api_password: secret
    api_host: helldorado
    name: spynal
    node: sabrewulf
    state: started

- name: Stop VM
  community.general.proxmox_kvm:
    api_user: root@pam
    api_password: secret
    api_host: helldorado
    name: spynal
    node: sabrewulf
    state: stopped

- name: Stop VM with force
  community.general.proxmox_kvm:
    api_user: root@pam
    api_password: secret
    api_host: helldorado
    name: spynal
    node: sabrewulf
    state: stopped
    force: true

- name: Restart VM
  community.general.proxmox_kvm:
    api_user: root@pam
    api_password: secret
    api_host: helldorado
    name: spynal
    node: sabrewulf
    state: restarted

- name: Convert VM to template
  community.general.proxmox_kvm:
    api_user: root@pam
    api_password: secret
    api_host: helldorado
    name: spynal
    node: sabrewulf
    state: template

- name: Convert VM to template (stop VM if running)
  community.general.proxmox_kvm:
    api_user: root@pam
    api_password: secret
    api_host: helldorado
    name: spynal
    node: sabrewulf
    state: template
    force: true

- name: Remove VM
  community.general.proxmox_kvm:
    api_user: root@pam
    api_password: secret
    api_host: helldorado
    name: spynal
    node: sabrewulf
    state: absent

- name: Get VM current state
  community.general.proxmox_kvm:
    api_user: root@pam
    api_password: secret
    api_host: helldorado
    name: spynal
    node: sabrewulf
    state: current

- name: Update VM configuration
  community.general.proxmox_kvm:
    api_user: root@pam
    api_password: secret
    api_host: helldorado
    name: spynal
    node: sabrewulf
    cores: 8
    memory: 16384
    update: true

- name: Update VM configuration (incl. unsafe options)
  community.general.proxmox_kvm:
    api_user: root@pam
    api_password: secret
    api_host: helldorado
    name: spynal
    node: sabrewulf
    cores: 8
    memory: 16384
    net:
        net0: virtio,bridge=vmbr1
    update: true
    update_unsafe: true

- name: Delete QEMU parameters
  community.general.proxmox_kvm:
    api_user: root@pam
    api_password: secret
    api_host: helldorado
    name: spynal
    node: sabrewulf
    delete: 'args,template,cpulimit'

- name: Revert a pending change
  community.general.proxmox_kvm:
    api_user: root@pam
    api_password: secret
    api_host: helldorado
    name: spynal
    node: sabrewulf
    revert: 'template,cpulimit'

- name: Migrate VM on second node
  community.general.proxmox_kvm:
    api_user: root@pam
    api_password: secret
    api_host: helldorado
    name: spynal
    node: sabrewulf-2
    migrate: true

- name: Add hookscript to existing VM
  community.general.proxmox_kvm:
    api_user: root@pam
    api_password: secret
    api_host: helldorado
    vmid: 999
    node: sabrewulf
    hookscript: local:snippets/hookscript.pl
    update: true
</pre> </section> <section id="return-values"> <h2>Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values.html#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Key</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-return-msg"><strong>msg</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>A short message</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> always</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>"VM kropta with vmid = 110 is running"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-return-status"><strong>status</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The current virtual machine status.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> success, not clone, not absent, not update</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>"running"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-proxmox-kvm-module-return-vmid"><strong>vmid</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The VM vmid.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> success</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>115</code></p> </div></td> </tr>  </table> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Abdoul Bah (@helldorado) &lt;bahabdoul at gmail.com&gt;</li> </ul> </section> <section id="collection-links"> <h3>Collection links</h3> <ul class="ansible-links"> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.general/issues" rel="noopener external" target="_blank">Issue Tracker</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.general" rel="noopener external" target="_blank">Repository (Sources)</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://forum.ansible.com/c/help/6/none" rel="noopener external" target="_blank">Ask for help</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.general/issues/new?assignees=&amp;labels=&amp;template=bug_report.yml" rel="noopener external" target="_blank">Submit a bug report</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.general/issues/new?assignees=&amp;labels=&amp;template=feature_request.yml" rel="noopener external" target="_blank">Request a feature</a></span></li> <li><span><a class="reference internal" href="index.html#communication-for-community-general"><span class="std std-ref">Communication</span></a></span></li> </ul> </section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2024 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/community/general/proxmox_kvm_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/community/general/proxmox_kvm_module.html</a>
  </p>
</div>
