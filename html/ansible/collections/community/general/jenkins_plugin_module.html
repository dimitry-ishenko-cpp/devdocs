<section id="community-general-jenkins-plugin-module-add-or-remove-jenkins-plugin"> <h1>community.general.jenkins_plugin module – Add or remove Jenkins plugin</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module is part of the <a class="reference external" href="https://galaxy.ansible.com/ui/repo/published/community/general/">community.general collection</a> (version 9.5.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install community.general</code>.</p> <p>To use it in a playbook, specify: <code>community.general.jenkins_plugin</code>.</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#parameters" id="id2">Parameters</a></li> <li><a class="reference internal" href="#attributes" id="id3">Attributes</a></li> <li><a class="reference internal" href="#notes" id="id4">Notes</a></li> <li><a class="reference internal" href="#examples" id="id5">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id6">Return Values</a></li> </ul>  <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>Ansible module which helps to manage Jenkins plugins.</li> </ul> </section> <section id="parameters"> <h2>Parameters</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-community-general-jenkins-plugin-module-parameter-attributes"><strong id="ansible-collections-community-general-jenkins-plugin-module-parameter-attr">attributes</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: attr</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The attributes the resulting filesystem object should have.</p> <p>To get supported flags look at the man page for <em>chattr</em> on the target system.</p> <p>This string should contain the attributes in the same order as the one displayed by <em>lsattr</em>.</p> <p>The <code>=</code> operator is assumed as default, otherwise <code>+</code> or <code>-</code> operators need to be included in the string.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-jenkins-plugin-module-parameter-client-cert"><strong>client_cert</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">path</span></p> </div></td> <td><div class="ansible-option-cell">
<p>PEM formatted certificate chain file to be used for SSL client authentication.</p> <p>This file can also include the key as well, and if the key is included, <code><strong><a class="reference internal" href="#ansible-collections-community-general-jenkins-plugin-module-parameter-client-key"><span class="std std-ref">client_key</span></a></strong></code> is not required.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-jenkins-plugin-module-parameter-client-key"><strong>client_key</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">path</span></p> </div></td> <td><div class="ansible-option-cell">
<p>PEM formatted file that contains your private key to be used for SSL client authentication.</p> <p>If <code><strong><a class="reference internal" href="#ansible-collections-community-general-jenkins-plugin-module-parameter-client-cert"><span class="std std-ref">client_cert</span></a></strong></code> contains both the certificate and key, this option is not required.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-jenkins-plugin-module-parameter-force"><strong>force</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>If <code>yes</code> do not get a cached copy.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-jenkins-plugin-module-parameter-force-basic-auth"><strong>force_basic_auth</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Credentials specified with <code><strong><a class="reference internal" href="#ansible-collections-community-general-jenkins-plugin-module-parameter-url-username"><span class="std std-ref">url_username</span></a></strong></code> and <code><strong><a class="reference internal" href="#ansible-collections-community-general-jenkins-plugin-module-parameter-url-password"><span class="std std-ref">url_password</span></a></strong></code> should be passed in HTTP Header.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-jenkins-plugin-module-parameter-group"><strong>group</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>GID or name of the Jenkins group on the OS.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"jenkins"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-jenkins-plugin-module-parameter-http-agent"><strong>http_agent</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Header to identify as, generally appears in web server logs.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"ansible-httpget"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-jenkins-plugin-module-parameter-jenkins-home"><strong>jenkins_home</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">path</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Home directory of the Jenkins user.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"/var/lib/jenkins"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-jenkins-plugin-module-parameter-latest-plugins-url-segments"><strong>latest_plugins_url_segments</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> <p><em class="ansible-option-versionadded">added in community.general 3.3.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Path inside the <code><strong><a class="reference internal" href="#ansible-collections-community-general-jenkins-plugin-module-parameter-updates-url"><span class="std std-ref">updates_url</span></a></strong></code> to get latest plugins from.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>["latest"]</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-jenkins-plugin-module-parameter-mode"><strong>mode</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">any</span></p> </div></td> <td><div class="ansible-option-cell">
<p>File mode applied on versioned plugins.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"0644"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-jenkins-plugin-module-parameter-name"><strong>name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Plugin name.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-jenkins-plugin-module-parameter-owner"><strong>owner</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>UID or name of the Jenkins user on the OS.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"jenkins"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-jenkins-plugin-module-parameter-selevel"><strong>selevel</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The level part of the SELinux filesystem object context.</p> <p>This is the MLS/MCS attribute, sometimes known as the <code>range</code>.</p> <p>When set to <code>_default</code>, it will use the <code>level</code> portion of the policy if available.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-jenkins-plugin-module-parameter-serole"><strong>serole</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The role part of the SELinux filesystem object context.</p> <p>When set to <code>_default</code>, it will use the <code>role</code> portion of the policy if available.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-jenkins-plugin-module-parameter-setype"><strong>setype</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The type part of the SELinux filesystem object context.</p> <p>When set to <code>_default</code>, it will use the <code>type</code> portion of the policy if available.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-jenkins-plugin-module-parameter-seuser"><strong>seuser</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The user part of the SELinux filesystem object context.</p> <p>By default it uses the <code>system</code> policy, where applicable.</p> <p>When set to <code>_default</code>, it will use the <code>user</code> portion of the policy if available.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-jenkins-plugin-module-parameter-state"><strong>state</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Desired plugin state.</p> <p>If set to <code>latest</code>, the check for new version will be performed every time. This is suitable to keep the plugin up-to-date.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"absent"</code></li> <li>
<code><strong>"present"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"pinned"</code></li> <li><code>"unpinned"</code></li> <li><code>"enabled"</code></li> <li><code>"disabled"</code></li> <li><code>"latest"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-jenkins-plugin-module-parameter-timeout"><strong>timeout</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Server connection timeout in secs.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>30</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-jenkins-plugin-module-parameter-unsafe-writes"><strong>unsafe_writes</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Influence when to use atomic operation to prevent data corruption or inconsistent reads from the target filesystem object.</p> <p>By default this module uses atomic operations to prevent data corruption or inconsistent reads from the target filesystem objects, but sometimes systems are configured or just broken in ways that prevent this. One example is docker mounted filesystem objects, which cannot be updated atomically from inside the container and can only be written in an unsafe manner.</p> <p>This option allows Ansible to fall back to unsafe methods of updating filesystem objects when atomic operations fail (however, it doesn’t force Ansible to perform unsafe writes).</p> <p>IMPORTANT! Unsafe writes are subject to race conditions and can lead to data corruption.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-jenkins-plugin-module-parameter-update-json-url-segment"><strong>update_json_url_segment</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> <p><em class="ansible-option-versionadded">added in community.general 3.3.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>A list of URL segment(s) to retrieve the update center json file from.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>["update-center.json", "updates/update-center.json"]</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-jenkins-plugin-module-parameter-updates-expiration"><strong>updates_expiration</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Number of seconds after which a new copy of the <code>update-center.json</code> file is downloaded. This is used to avoid the need to download the plugin to calculate its checksum when <code><a class="reference internal" href="#ansible-collections-community-general-jenkins-plugin-module-parameter-state"><span class="std std-ref">state=latest</span></a></code> is specified.</p> <p>Set it to <code>0</code> if no cache file should be used. In that case, the plugin file will always be downloaded to calculate its checksum when <code><a class="reference internal" href="#ansible-collections-community-general-jenkins-plugin-module-parameter-state"><span class="std std-ref">state=latest</span></a></code> is specified.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>86400</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-jenkins-plugin-module-parameter-updates-url"><strong>updates_url</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>A list of base URL(s) to retrieve <code>update-center.json</code>, and direct plugin files from.</p> <p>This can be a list since community.general 3.3.0.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>["https://updates.jenkins.io", "http://mirrors.jenkins.io"]</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-jenkins-plugin-module-parameter-url"><strong>url</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>URL of the Jenkins server.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"http://localhost:8080"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-jenkins-plugin-module-parameter-url-password"><strong>url_password</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The password for use in HTTP basic authentication.</p> <p>If the <code><strong><a class="reference internal" href="#ansible-collections-community-general-jenkins-plugin-module-parameter-url-username"><span class="std std-ref">url_username</span></a></strong></code> parameter is not specified, the <code><strong><a class="reference internal" href="#ansible-collections-community-general-jenkins-plugin-module-parameter-url-password"><span class="std std-ref">url_password</span></a></strong></code> parameter will not be used.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-jenkins-plugin-module-parameter-url-username"><strong>url_username</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The username for use in HTTP basic authentication.</p> <p>This parameter can be used without <code><strong><a class="reference internal" href="#ansible-collections-community-general-jenkins-plugin-module-parameter-url-password"><span class="std std-ref">url_password</span></a></strong></code> for sites that allow empty passwords</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-jenkins-plugin-module-parameter-use-gssapi"><strong>use_gssapi</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in ansible-core 2.11</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Use GSSAPI to perform the authentication, typically this is for Kerberos or Kerberos through Negotiate authentication.</p> <p>Requires the Python library <a class="reference external" href="https://github.com/pythongssapi/python-gssapi">gssapi</a> to be installed.</p> <p>Credentials for GSSAPI can be specified with <code><strong><a class="reference internal" href="#ansible-collections-community-general-jenkins-plugin-module-parameter-url-username"><span class="std std-ref">url_username</span></a></strong></code>/<code><strong><a class="reference internal" href="#ansible-collections-community-general-jenkins-plugin-module-parameter-url-password"><span class="std std-ref">url_password</span></a></strong></code> or with the GSSAPI env var <code>KRB5CCNAME</code> that specified a custom Kerberos credential cache.</p> <p>NTLM authentication is <strong>not</strong> supported even if the GSSAPI mech for NTLM has been installed.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-jenkins-plugin-module-parameter-use-proxy"><strong>use_proxy</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>If <code>no</code>, it will not use a proxy, even if one is defined in an environment variable on the target hosts.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-jenkins-plugin-module-parameter-validate-certs"><strong>validate_certs</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>If <code>no</code>, SSL certificates will not be validated.</p> <p>This should only be used on personally controlled sites using self-signed certificates.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-jenkins-plugin-module-parameter-version"><strong>version</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Plugin version number.</p> <p>If this option is specified, all plugin dependencies must be installed manually.</p> <p>It might take longer to verify that the correct version is installed. This is especially true if a specific version number is specified.</p> <p>Quote the version to prevent the value to be interpreted as float. For example if <code>1.20</code> would be unquoted, it would become <code>1.2</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-jenkins-plugin-module-parameter-versioned-plugins-url-segments"><strong>versioned_plugins_url_segments</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> <p><em class="ansible-option-versionadded">added in community.general 3.3.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Path inside the <code><strong><a class="reference internal" href="#ansible-collections-community-general-jenkins-plugin-module-parameter-updates-url"><span class="std std-ref">updates_url</span></a></strong></code> to get specific version of plugins from.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>["download/plugins", "plugins"]</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-jenkins-plugin-module-parameter-with-dependencies"><strong>with_dependencies</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Defines whether to install plugin dependencies.</p> <p>This option takes effect only if the <code><strong><a class="reference internal" href="#ansible-collections-community-general-jenkins-plugin-module-parameter-version"><span class="std std-ref">version</span></a></strong></code> is not defined.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr>  </table> </section> <section id="attributes"> <h2>Attributes</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Attribute</p></th> <th class="head"><p>Support</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-jenkins-plugin-module-attribute-check-mode"><strong>check_mode</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-label">Support: </strong><strong class="ansible-attribute-support-full">full</strong></p> </div></td> <td><div class="ansible-option-cell">
<p>Can run in <code>check_mode</code> and return changed status prediction without modifying target.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-jenkins-plugin-module-attribute-diff-mode"><strong>diff_mode</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-label">Support: </strong><strong class="ansible-attribute-support-none">none</strong></p> </div></td> <td><div class="ansible-option-cell">
<p>Will return details on what has changed (or possibly needs changing in <code>check_mode</code>), when in diff mode.</p> </div></td> </tr>  </table> </section> <section id="notes"> <h2>Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>Plugin installation should be run under root or the same user which owns the plugin files on the disk. Only if the plugin is not installed yet and no version is specified, the API installation is performed which requires only the Web UI credentials.</li> <li>It is necessary to notify the handler or call the <a class="reference internal" href="../../ansible/builtin/service_module.html#ansible-collections-ansible-builtin-service-module"><span class="std std-ref">ansible.builtin.service</span></a> module to restart the Jenkins service after a new plugin was installed.</li> <li>Pinning works only if the plugin is installed and Jenkins service was successfully restarted after the plugin installation.</li> <li>It is not possible to run the module remotely by changing the <code><strong><a class="reference internal" href="#ansible-collections-community-general-jenkins-plugin-module-parameter-url"><span class="std std-ref">url</span></a></strong></code> parameter to point to the Jenkins server. The module must be used on the host where Jenkins runs as it needs direct access to the plugin files.</li> </ul> </div> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja">- name: Install plugin
  community.general.jenkins_plugin:
    name: build-pipeline-plugin

- name: Install plugin without its dependencies
  community.general.jenkins_plugin:
    name: build-pipeline-plugin
    with_dependencies: false

- name: Make sure the plugin is always up-to-date
  community.general.jenkins_plugin:
    name: token-macro
    state: latest

- name: Install specific version of the plugin
  community.general.jenkins_plugin:
    name: token-macro
    version: "1.15"

- name: Pin the plugin
  community.general.jenkins_plugin:
    name: token-macro
    state: pinned

- name: Unpin the plugin
  community.general.jenkins_plugin:
    name: token-macro
    state: unpinned

- name: Enable the plugin
  community.general.jenkins_plugin:
    name: token-macro
    state: enabled

- name: Disable the plugin
  community.general.jenkins_plugin:
    name: token-macro
    state: disabled

- name: Uninstall plugin
  community.general.jenkins_plugin:
    name: build-pipeline-plugin
    state: absent

#
# Example of how to authenticate
#
- name: Install plugin
  community.general.jenkins_plugin:
    name: build-pipeline-plugin
    url_username: admin
    url_password: p4ssw0rd
    url: http://localhost:8888

#
# Example of how to authenticate with serverless deployment
#
- name: Update plugins on ECS Fargate Jenkins instance
  community.general.jenkins_plugin:
    # plugin name and version
    name: ws-cleanup
    version: '0.45'
    # Jenkins home path mounted on ec2-helper VM (example)
    jenkins_home: "/mnt/{{ jenkins_instance }}"
    # matching the UID/GID to one in official Jenkins image
    owner: 1000
    group: 1000
    # Jenkins instance URL and admin credentials
    url: "https://{{ jenkins_instance }}.com/"
    url_username: admin
    url_password: p4ssw0rd
  # make module work from EC2 which has local access
  # to EFS mount as well as Jenkins URL
  delegate_to: ec2-helper
  vars:
    jenkins_instance: foobar

#
# Example of a Play which handles Jenkins restarts during the state changes
#
- name: Jenkins Master play
  hosts: jenkins-master
  vars:
    my_jenkins_plugins:
      token-macro:
        enabled: true
      build-pipeline-plugin:
        version: "1.4.9"
        pinned: false
        enabled: true
  tasks:
    - name: Install plugins without a specific version
      community.general.jenkins_plugin:
        name: "{{ item.key }}"
      register: my_jenkins_plugin_unversioned
      when: &gt;
        'version' not in item.value
      with_dict: "{{ my_jenkins_plugins }}"

    - name: Install plugins with a specific version
      community.general.jenkins_plugin:
        name: "{{ item.key }}"
        version: "{{ item.value['version'] }}"
      register: my_jenkins_plugin_versioned
      when: &gt;
        'version' in item.value
      with_dict: "{{ my_jenkins_plugins }}"

    - name: Initiate the fact
      ansible.builtin.set_fact:
        jenkins_restart_required: false

    - name: Check if restart is required by any of the versioned plugins
      ansible.builtin.set_fact:
        jenkins_restart_required: true
      when: item.changed
      with_items: "{{ my_jenkins_plugin_versioned.results }}"

    - name: Check if restart is required by any of the unversioned plugins
      ansible.builtin.set_fact:
        jenkins_restart_required: true
      when: item.changed
      with_items: "{{ my_jenkins_plugin_unversioned.results }}"

    - name: Restart Jenkins if required
      ansible.builtin.service:
        name: jenkins
        state: restarted
      when: jenkins_restart_required

    - name: Wait for Jenkins to start up
      ansible.builtin.uri:
        url: http://localhost:8080
        status_code: 200
        timeout: 5
      register: jenkins_service_status
      # Keep trying for 5 mins in 5 sec intervals
      retries: 60
      delay: 5
      until: &gt;
         'status' in jenkins_service_status and
         jenkins_service_status['status'] == 200
      when: jenkins_restart_required

    - name: Reset the fact
      ansible.builtin.set_fact:
        jenkins_restart_required: false
      when: jenkins_restart_required

    - name: Plugin pinning
      community.general.jenkins_plugin:
        name: "{{ item.key }}"
        state: "{{ 'pinned' if item.value['pinned'] else 'unpinned'}}"
      when: &gt;
        'pinned' in item.value
      with_dict: "{{ my_jenkins_plugins }}"

    - name: Plugin enabling
      community.general.jenkins_plugin:
        name: "{{ item.key }}"
        state: "{{ 'enabled' if item.value['enabled'] else 'disabled'}}"
      when: &gt;
        'enabled' in item.value
      with_dict: "{{ my_jenkins_plugins }}"
</pre> </section> <section id="return-values"> <h2>Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values.html#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Key</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-jenkins-plugin-module-return-plugin"><strong>plugin</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>plugin name</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> success</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>"build-pipeline-plugin"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-jenkins-plugin-module-return-state"><strong>state</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>state of the target, after execution</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> success</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>"present"</code></p> </div></td> </tr>  </table> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Jiri Tyr (@jtyr)</li> </ul> </section> <section id="collection-links"> <h3>Collection links</h3> <ul class="ansible-links"> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.general/issues" rel="noopener external" target="_blank">Issue Tracker</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.general" rel="noopener external" target="_blank">Repository (Sources)</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://forum.ansible.com/c/help/6/none" rel="noopener external" target="_blank">Ask for help</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.general/issues/new?assignees=&amp;labels=&amp;template=bug_report.yml" rel="noopener external" target="_blank">Submit a bug report</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.general/issues/new?assignees=&amp;labels=&amp;template=feature_request.yml" rel="noopener external" target="_blank">Request a feature</a></span></li> <li><span><a class="reference internal" href="index.html#communication-for-community-general"><span class="std std-ref">Communication</span></a></span></li> </ul> </section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2024 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/community/general/jenkins_plugin_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/community/general/jenkins_plugin_module.html</a>
  </p>
</div>
