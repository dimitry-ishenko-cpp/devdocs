<h1 id="community-general-udm-user-manage-posix-users-on-a-univention-corporate-server">community.general.udm_user – Manage posix users on a univention corporate server</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/community/general">community.general collection</a> (version 3.8.1).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install community.general</code>.</p> <p>To use it in a playbook, specify: <code>community.general.udm_user</code>.</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>This module allows to manage posix users on a univention corporate server (UCS). It uses the python API of the UCS to create a new object or edit it.</li> </ul>   <h2 id="requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>Python &gt;= 2.6</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="1">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="1">  <b>birthday</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Birthday</div> </td> </tr> <tr> <td colspan="1">  <b>city</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>City of users business address.</div> </td> </tr> <tr> <td colspan="1">  <b>country</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Country of users business address.</div> </td> </tr> <tr> <td colspan="1">  <b>department_number</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Department number of users business address.</div> <div>
<br>aliases: departmentNumber</div> </td> </tr> <tr> <td colspan="1">  <b>description</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Description (not gecos)</div> </td> </tr> <tr> <td colspan="1">  <b>display_name</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Display name (not gecos)</div> <div>
<br>aliases: displayName</div> </td> </tr> <tr> <td colspan="1">  <b>email</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> <b>Default:</b><br><div>[""]</div> </td> <td> <div>A list of e-mail addresses.</div> </td> </tr> <tr> <td colspan="1">  <b>employee_number</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Employee number</div> <div>
<br>aliases: employeeNumber</div> </td> </tr> <tr> <td colspan="1">  <b>employee_type</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Employee type</div> <div>
<br>aliases: employeeType</div> </td> </tr> <tr> <td colspan="1">  <b>firstname</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>First name. Required if <code>state=present</code>.</div> </td> </tr> <tr> <td colspan="1">  <b>gecos</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>GECOS</div> </td> </tr> <tr> <td colspan="1">  <b>groups</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> <b>Default:</b><br><div>[]</div> </td> <td> <div>POSIX groups, the LDAP DNs of the groups will be found with the LDAP filter for each group as $GROUP: <code>(&amp;(objectClass=posixGroup</code>(cn=$GROUP))).</div> </td> </tr> <tr> <td colspan="1">  <b>home_share</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Home NFS share. Must be a LDAP DN, e.g. <code>cn=home,cn=shares,ou=school,dc=example,dc=com</code>.</div> <div>
<br>aliases: homeShare</div> </td> </tr> <tr> <td colspan="1">  <b>home_share_path</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Path to home NFS share, inside the homeShare.</div> <div>
<br>aliases: homeSharePath</div> </td> </tr> <tr> <td colspan="1">  <b>home_telephone_number</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> <b>Default:</b><br><div>[]</div> </td> <td> <div>List of private telephone numbers.</div> <div>
<br>aliases: homeTelephoneNumber</div> </td> </tr> <tr> <td colspan="1">  <b>homedrive</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Windows home drive, e.g. <code>"H:"</code>.</div> </td> </tr> <tr> <td colspan="1">  <b>lastname</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Last name. Required if <code>state=present</code>.</div> </td> </tr> <tr> <td colspan="1">  <b>mail_alternative_address</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> <b>Default:</b><br><div>[]</div> </td> <td> <div>List of alternative e-mail addresses.</div> <div>
<br>aliases: mailAlternativeAddress</div> </td> </tr> <tr> <td colspan="1">  <b>mail_home_server</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>FQDN of mail server</div> <div>
<br>aliases: mailHomeServer</div> </td> </tr> <tr> <td colspan="1">  <b>mail_primary_address</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Primary e-mail address</div> <div>
<br>aliases: mailPrimaryAddress</div> </td> </tr> <tr> <td colspan="1">  <b>mobile_telephone_number</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> <b>Default:</b><br><div>[]</div> </td> <td> <div>Mobile phone number</div> <div>
<br>aliases: mobileTelephoneNumber</div> </td> </tr> <tr> <td colspan="1">  <b>organisation</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Organisation</div> <div>
<br>aliases: organization</div> </td> </tr> <tr> <td colspan="1">  <b>ou</b>  <div> <span>string</span> </div> </td> <td> <b>Default:</b><br><div>""</div> </td> <td> <div>Organizational Unit inside the LDAP Base DN, e.g. <code>school</code> for LDAP OU <code>ou=school,dc=example,dc=com</code>.</div> </td> </tr> <tr> <td colspan="1">  <b>overridePWHistory</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Override password history</div> <div>
<br>aliases: override_pw_history</div> </td> </tr> <tr> <td colspan="1">  <b>overridePWLength</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Override password check</div> <div>
<br>aliases: override_pw_length</div> </td> </tr> <tr> <td colspan="1">  <b>pager_telephonenumber</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> <b>Default:</b><br><div>[]</div> </td> <td> <div>List of pager telephone numbers.</div> <div>
<br>aliases: pagerTelephonenumber</div> </td> </tr> <tr> <td colspan="1">  <b>password</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Password. Required if <code>state=present</code>.</div> </td> </tr> <tr> <td colspan="1">  <b>phone</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>List of telephone numbers.</div> </td> </tr> <tr> <td colspan="1">  <b>position</b>  <div> <span>string</span> </div> </td> <td> <b>Default:</b><br><div>""</div> </td> <td> <div>Define the whole position of users object inside the LDAP tree, e.g. <code>cn=employee,cn=users,ou=school,dc=example,dc=com</code>.</div> </td> </tr> <tr> <td colspan="1">  <b>postcode</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Postal code of users business address.</div> </td> </tr> <tr> <td colspan="1">  <b>primary_group</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Primary group. This must be the group LDAP DN.</div> <div>If not specified, it defaults to <code>cn=Domain Users,cn=groups,$LDAP_BASE_DN</code>.</div> <div>
<br>aliases: primaryGroup</div> </td> </tr> <tr> <td colspan="1">  <b>profilepath</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Windows profile directory</div> </td> </tr> <tr> <td colspan="1">  <b>pwd_change_next_login</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>0</li> <li>1</li> </ul> </td> <td> <div>Change password on next login.</div> <div>
<br>aliases: pwdChangeNextLogin</div> </td> </tr> <tr> <td colspan="1">  <b>room_number</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Room number of users business address.</div> <div>
<br>aliases: roomNumber</div> </td> </tr> <tr> <td colspan="1">  <b>samba_privileges</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>Samba privilege, like allow printer administration, do domain join.</div> <div>
<br>aliases: sambaPrivileges</div> </td> </tr> <tr> <td colspan="1">  <b>samba_user_workstations</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>Allow the authentication only on this Microsoft Windows host.</div> <div>
<br>aliases: sambaUserWorkstations</div> </td> </tr> <tr> <td colspan="1">  <b>sambahome</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Windows home path, e.g. <code>'\\$FQDN\$USERNAME'</code>.</div> </td> </tr> <tr> <td colspan="1">  <b>scriptpath</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Windows logon script.</div> </td> </tr> <tr> <td colspan="1">  <b>secretary</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> <b>Default:</b><br><div>[]</div> </td> <td> <div>A list of superiors as LDAP DNs.</div> </td> </tr> <tr> <td colspan="1">  <b>serviceprovider</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> <b>Default:</b><br><div>[""]</div> </td> <td> <div>Enable user for the following service providers.</div> </td> </tr> <tr> <td colspan="1">  <b>shell</b>  <div> <span>string</span> </div> </td> <td> <b>Default:</b><br><div>"/bin/bash"</div> </td> <td> <div>Login shell</div> </td> </tr> <tr> <td colspan="1">  <b>state</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>present</b> ←</div></li> <li>absent</li> </ul> </td> <td> <div>Whether the user is present or not.</div> </td> </tr> <tr> <td colspan="1">  <b>street</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Street of users business address.</div> </td> </tr> <tr> <td colspan="1">  <b>subpath</b>  <div> <span>string</span> </div> </td> <td> <b>Default:</b><br><div>"cn=users"</div> </td> <td> <div>LDAP subpath inside the organizational unit, e.g. <code>cn=teachers,cn=users</code> for LDAP container <code>cn=teachers,cn=users,dc=example,dc=com</code>.</div> </td> </tr> <tr> <td colspan="1">  <b>title</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Title, e.g. <code>Prof.</code>.</div> </td> </tr> <tr> <td colspan="1">  <b>unixhome</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Unix home directory</div> <div>If not specified, it defaults to <code>/home/$USERNAME</code>.</div> </td> </tr> <tr> <td colspan="1">  <b>update_password</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>always</b> ←</div></li> <li>on_create</li> </ul> </td> <td> <div>
<code>always</code> will update passwords if they differ. <code>on_create</code> will only set the password for newly created users.</div> </td> </tr> <tr> <td colspan="1">  <b>userexpiry</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Account expiry date, e.g. <code>1999-12-31</code>.</div> <div>If not specified, it defaults to the current day plus one year.</div> </td> </tr> <tr> <td colspan="1">  <b>username</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>User name</div> <div>
<br>aliases: name</div> </td> </tr> </table> <br>  <h2 id="examples">Examples</h2> <pre data-language="yaml+jinja">- name: Create a user on a UCS
  community.general.udm_user:
    name: FooBar
    password: secure_password
    firstname: Foo
    lastname: Bar

- name: Create a user with the DN C(uid=foo,cn=teachers,cn=users,ou=school,dc=school,dc=example,dc=com)
  community.general.udm_user:
    name: foo
    password: secure_password
    firstname: Foo
    lastname: Bar
    ou: school
    subpath: 'cn=teachers,cn=users'

# or define the position
- name: Create a user with the DN C(uid=foo,cn=teachers,cn=users,ou=school,dc=school,dc=example,dc=com)
  community.general.udm_user:
    name: foo
    password: secure_password
    firstname: Foo
    lastname: Bar
    position: 'cn=teachers,cn=users,ou=school,dc=school,dc=example,dc=com'
</pre>  <h3 id="authors">Authors</h3> <ul class="simple"> <li>Tobias Rüetschi (@keachi)</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2021 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/community/general/udm_user_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/community/general/udm_user_module.html</a>
  </p>
</div>
