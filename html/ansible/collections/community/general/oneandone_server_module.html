<h1 id="community-general-oneandone-server-create-destroy-start-stop-and-reboot-a-1-1-host-server">community.general.oneandone_server – Create, destroy, start, stop, and reboot a 1&amp;1 Host server.</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/community/general">community.general collection</a> (version 3.8.1).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install community.general</code>.</p> <p>To use it in a playbook, specify: <code>community.general.oneandone_server</code>.</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id5">Return Values</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Create, destroy, update, start, stop, and reboot a 1&amp;1 Host server. When the server is created it can optionally wait for it to be ‘running’ before returning.</li> </ul>   <h2 id="requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>1and1</li> <li>python &gt;= 2.6</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="1">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="1">  <b>api_url</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Custom API URL. Overrides the ONEANDONE_API_URL environment variable.</div> </td> </tr> <tr> <td colspan="1">  <b>appliance</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The operating system name or ID for the server. It is required only for 'present' state.</div> </td> </tr> <tr> <td colspan="1">  <b>auth_token</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Authenticating API token provided by 1&amp;1. Overrides the ONEANDONE_AUTH_TOKEN environment variable.</div> </td> </tr> <tr> <td colspan="1">  <b>auto_increment</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li><div>
<b>yes</b> ←</div></li> </ul> </td> <td> <div>When creating multiple servers at once, whether to differentiate hostnames by appending a count after them or substituting the count where there is a %02d or %03d in the hostname string.</div> </td> </tr> <tr> <td colspan="1">  <b>cores_per_processor</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>The number of cores per processor. It must be provided with vcore, ram, and hdds parameters.</div> </td> </tr> <tr> <td colspan="1">  <b>count</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>1</div> </td> <td> <div>The number of servers to create.</div> </td> </tr> <tr> <td colspan="1">  <b>datacenter</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>US</b> ←</div></li> <li>ES</li> <li>DE</li> <li>GB</li> </ul> </td> <td> <div>The datacenter location.</div> </td> </tr> <tr> <td colspan="1">  <b>description</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The description of the server.</div> </td> </tr> <tr> <td colspan="1">  <b>firewall_policy</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The firewall policy name or ID.</div> </td> </tr> <tr> <td colspan="1">  <b>fixed_instance_size</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The instance size name or ID of the server. It is required only for 'present' state, and it is mutually exclusive with vcore, cores_per_processor, ram, and hdds parameters.</div> <div>The available choices are: <code>S</code>, <code>M</code>, <code>L</code>, <code>XL</code>, <code>XXL</code>, <code>3XL</code>, <code>4XL</code>, <code>5XL</code>
</div> </td> </tr> <tr> <td colspan="1">  <b>hdds</b>  <div> <span>list</span> / <span>elements=dictionary</span> </div> </td> <td> </td> <td> <div>A list of hard disks with nested "size" and "is_main" properties. It must be provided with vcore, cores_per_processor, and ram parameters.</div> </td> </tr> <tr> <td colspan="1">  <b>hostname</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The hostname or ID of the server. Only used when state is 'present'.</div> </td> </tr> <tr> <td colspan="1">  <b>load_balancer</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The load balancer name or ID.</div> </td> </tr> <tr> <td colspan="1">  <b>monitoring_policy</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The monitoring policy name or ID.</div> </td> </tr> <tr> <td colspan="1">  <b>private_network</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The private network name or ID.</div> </td> </tr> <tr> <td colspan="1">  <b>ram</b>  <div> <span>float</span> </div> </td> <td> </td> <td> <div>The amount of RAM memory. It must be provided with with vcore, cores_per_processor, and hdds parameters.</div> </td> </tr> <tr> <td colspan="1">  <b>server</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Server identifier (ID or hostname). It is required for all states except 'running' and 'present'.</div> </td> </tr> <tr> <td colspan="1">  <b>server_type</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>cloud</b> ←</div></li> <li>baremetal</li> <li>k8s_node</li> </ul> </td> <td> <div>The type of server to be built.</div> </td> </tr> <tr> <td colspan="1">  <b>ssh_key</b>  <div> <span>raw</span> </div> </td> <td> </td> <td> <div>User's public SSH key (contents, not path).</div> </td> </tr> <tr> <td colspan="1">  <b>state</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>present</b> ←</div></li> <li>absent</li> <li>running</li> <li>stopped</li> </ul> </td> <td> <div>Define a server's state to create, remove, start or stop it.</div> </td> </tr> <tr> <td colspan="1">  <b>vcore</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>The total number of processors. It must be provided with cores_per_processor, ram, and hdds parameters.</div> </td> </tr> <tr> <td colspan="1">  <b>wait</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li><div>
<b>yes</b> ←</div></li> </ul> </td> <td> <div>Wait for the server to be in state 'running' before returning. Also used for delete operation (set to 'false' if you don't want to wait for each individual server to be deleted before moving on with other tasks.)</div> </td> </tr> <tr> <td colspan="1">  <b>wait_interval</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>5</div> </td> <td> <div>Defines the number of seconds to wait when using the wait_for methods</div> </td> </tr> <tr> <td colspan="1">  <b>wait_timeout</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>600</div> </td> <td> <div>how long before wait gives up, in seconds</div> </td> </tr> </table> <br>  <h2 id="examples">Examples</h2> <pre data-language="yaml+jinja">- name: Create three servers and enumerate their names
  community.general.oneandone_server:
    auth_token: oneandone_private_api_key
    hostname: node%02d
    fixed_instance_size: XL
    datacenter: US
    appliance: C5A349786169F140BCBC335675014C08
    auto_increment: true
    count: 3

- name: Create three servers, passing in an ssh_key
  community.general.oneandone_server:
    auth_token: oneandone_private_api_key
    hostname: node%02d
    vcore: 2
    cores_per_processor: 4
    ram: 8.0
    hdds:
      - size: 50
        is_main: false
    datacenter: ES
    appliance: C5A349786169F140BCBC335675014C08
    count: 3
    wait: yes
    wait_timeout: 600
    wait_interval: 10
    ssh_key: SSH_PUBLIC_KEY

- name: Removing server
  community.general.oneandone_server:
    auth_token: oneandone_private_api_key
    state: absent
    server: 'node01'

- name: Starting server
  community.general.oneandone_server:
    auth_token: oneandone_private_api_key
    state: running
    server: 'node01'

- name: Stopping server
  community.general.oneandone_server:
    auth_token: oneandone_private_api_key
    state: stopped
    server: 'node01'
</pre>   <h2 id="return-values">Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values.html#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="documentation-table"> <tr> <th colspan="1">Key</th> <th>Returned</th> <th width="100%">Description</th> </tr> <tr> <td colspan="1">  <b>servers</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td>always</td> <td> <div>Information about each server that was processed</div> <br> <div><b>Sample:</b></div> <div>[{"hostname": "my-server", "id": "server-id"}]</div> </td> </tr> </table> <br><br> <h3 id="authors">Authors</h3> <ul class="simple"> <li>Amel Ajdinovic (@aajdinov)</li> <li>Ethan Devenport (@edevenport)</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2021 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/community/general/oneandone_server_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/community/general/oneandone_server_module.html</a>
  </p>
</div>
