<section id="community-general-pagerduty-alert-module-trigger-acknowledge-or-resolve-pagerduty-incidents"> <h1>community.general.pagerduty_alert module – Trigger, acknowledge or resolve PagerDuty incidents</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module is part of the <a class="reference external" href="https://galaxy.ansible.com/ui/repo/published/community/general/">community.general collection</a> (version 9.5.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install community.general</code>. You need further requirements to be able to use this module, see <a class="reference internal" href="#ansible-collections-community-general-pagerduty-alert-module-requirements"><span class="std std-ref">Requirements</span></a> for details.</p> <p>To use it in a playbook, specify: <code>community.general.pagerduty_alert</code>.</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#attributes" id="id4">Attributes</a></li> <li><a class="reference internal" href="#examples" id="id5">Examples</a></li> </ul>  <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>This module will let you trigger, acknowledge or resolve a PagerDuty incident by sending events</li> </ul> </section> <section id="requirements"> <h2 id="ansible-collections-community-general-pagerduty-alert-module-requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>PagerDuty API access</li> </ul> </section> <section id="parameters"> <h2>Parameters</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-pagerduty-alert-module-parameter-api-key"><strong>api_key</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The pagerduty API key (readonly access), generated on the pagerduty site.</p> <p>Required if <code><a class="reference internal" href="#ansible-collections-community-general-pagerduty-alert-module-parameter-api-version"><span class="std std-ref">api_version=v1</span></a></code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-pagerduty-alert-module-parameter-api-version"><strong>api_version</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in community.general 7.4.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>The API version we want to use to run the module.</p> <p>V1 is more limited with option we can provide to trigger incident.</p> <p>V2 has more variables for example, <code><strong><a class="reference internal" href="#ansible-collections-community-general-pagerduty-alert-module-parameter-severity"><span class="std std-ref">severity</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-general-pagerduty-alert-module-parameter-source"><span class="std std-ref">source</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-general-pagerduty-alert-module-parameter-custom-details"><span class="std std-ref">custom_details</span></a></strong></code>, etc.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"v1"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"v2"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-pagerduty-alert-module-parameter-client"><strong>client</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The name of the monitoring client that is triggering this event.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-pagerduty-alert-module-parameter-client-url"><strong>client_url</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The URL of the monitoring client that is triggering this event.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-pagerduty-alert-module-parameter-component"><strong>component</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in community.general 7.4.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Component of the source machine that is responsible for the event, for example <code>mysql</code> or <code>eth0</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-pagerduty-alert-module-parameter-custom-details"><strong>custom_details</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> <p><em class="ansible-option-versionadded">added in community.general 7.4.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Additional details about the event and affected system.</p> <p>A dictionary with custom keys and values.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-pagerduty-alert-module-parameter-desc"><strong>desc</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>For <code><a class="reference internal" href="#ansible-collections-community-general-pagerduty-alert-module-parameter-state"><span class="std std-ref">state=triggered</span></a></code> - Required. Short description of the problem that led to this trigger. This field (or a truncated version) will be used when generating phone calls, SMS messages and alert emails. It will also appear on the incidents tables in the PagerDuty UI. The maximum length is 1024 characters.</p> <p>For <code><a class="reference internal" href="#ansible-collections-community-general-pagerduty-alert-module-parameter-state"><span class="std std-ref">state=acknowledged</span></a></code> or <code><a class="reference internal" href="#ansible-collections-community-general-pagerduty-alert-module-parameter-state"><span class="std std-ref">state=resolved</span></a></code> - Text that will appear in the incident’s log associated with this event.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"Created via Ansible"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-pagerduty-alert-module-parameter-incident-class"><strong>incident_class</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in community.general 7.4.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>The class/type of the event, for example <code>ping failure</code> or <code>cpu load</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-pagerduty-alert-module-parameter-incident-key"><strong>incident_key</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Identifies the incident to which this <code><strong><a class="reference internal" href="#ansible-collections-community-general-pagerduty-alert-module-parameter-state"><span class="std std-ref">state</span></a></strong></code> should be applied.</p> <p>For <code><a class="reference internal" href="#ansible-collections-community-general-pagerduty-alert-module-parameter-state"><span class="std std-ref">state=triggered</span></a></code> - If there’s no open (i.e. unresolved) incident with this key, a new one will be created. If there’s already an open incident with a matching key, this event will be appended to that incident’s log. The event key provides an easy way to ‘de-dup’ problem reports. If no <code><strong><a class="reference internal" href="#ansible-collections-community-general-pagerduty-alert-module-parameter-incident-key"><span class="std std-ref">incident_key</span></a></strong></code> is provided, then it will be generated by PagerDuty.</p> <p>For <code><a class="reference internal" href="#ansible-collections-community-general-pagerduty-alert-module-parameter-state"><span class="std std-ref">state=acknowledged</span></a></code> or <code><a class="reference internal" href="#ansible-collections-community-general-pagerduty-alert-module-parameter-state"><span class="std std-ref">state=resolved</span></a></code> - This should be the incident_key you received back when the incident was first opened by a trigger event. Acknowledge events referencing resolved or nonexistent incidents will be discarded.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-pagerduty-alert-module-parameter-integration-key"><strong>integration_key</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The GUID of one of your ‘Generic API’ services.</p> <p>This is the ‘integration key’ listed on a ‘Integrations’ tab of PagerDuty service.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-pagerduty-alert-module-parameter-link-text"><strong>link_text</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in community.general 7.4.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>A short description of the link_url.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-pagerduty-alert-module-parameter-link-url"><strong>link_url</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in community.general 7.4.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Relevant link url to the alert. For example, the website or the job link.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-pagerduty-alert-module-parameter-name"><strong>name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>PagerDuty unique subdomain. Obsolete. It is not used with PagerDuty REST v2 API.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-pagerduty-alert-module-parameter-service-id"><strong>service_id</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>ID of PagerDuty service when incidents will be triggered, acknowledged or resolved.</p> <p>Required if <code><a class="reference internal" href="#ansible-collections-community-general-pagerduty-alert-module-parameter-api-version"><span class="std std-ref">api_version=v1</span></a></code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-pagerduty-alert-module-parameter-service-key"><strong>service_key</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The GUID of one of your ‘Generic API’ services. Obsolete. Please use <code><strong><a class="reference internal" href="#ansible-collections-community-general-pagerduty-alert-module-parameter-integration-key"><span class="std std-ref">integration_key</span></a></strong></code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-pagerduty-alert-module-parameter-severity"><strong>severity</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in community.general 7.4.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>The perceived severity of the status the event is describing with respect to the affected system.</p> <p>Required in case of <code><a class="reference internal" href="#ansible-collections-community-general-pagerduty-alert-module-parameter-state"><span class="std std-ref">state=trigger</span></a></code> and <code><a class="reference internal" href="#ansible-collections-community-general-pagerduty-alert-module-parameter-api-version"><span class="std std-ref">api_version=v2</span></a></code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"critical"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"warning"</code></li> <li><code>"error"</code></li> <li><code>"info"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-pagerduty-alert-module-parameter-source"><strong>source</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in community.general 7.4.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>The unique location of the affected system, preferably a hostname or FQDN.</p> <p>Required in case of <code><a class="reference internal" href="#ansible-collections-community-general-pagerduty-alert-module-parameter-state"><span class="std std-ref">state=trigger</span></a></code> and <code><a class="reference internal" href="#ansible-collections-community-general-pagerduty-alert-module-parameter-api-version"><span class="std std-ref">api_version=v2</span></a></code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-pagerduty-alert-module-parameter-state"><strong>state</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Type of event to be sent.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"triggered"</code></li> <li><code>"acknowledged"</code></li> <li><code>"resolved"</code></li> </ul> </div></td> </tr>  </table> </section> <section id="attributes"> <h2>Attributes</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Attribute</p></th> <th class="head"><p>Support</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-pagerduty-alert-module-attribute-check-mode"><strong>check_mode</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-label">Support: </strong><strong class="ansible-attribute-support-full">full</strong></p> </div></td> <td><div class="ansible-option-cell">
<p>Can run in <code>check_mode</code> and return changed status prediction without modifying target.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-pagerduty-alert-module-attribute-diff-mode"><strong>diff_mode</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-label">Support: </strong><strong class="ansible-attribute-support-none">none</strong></p> </div></td> <td><div class="ansible-option-cell">
<p>Will return details on what has changed (or possibly needs changing in <code>check_mode</code>), when in diff mode.</p> </div></td> </tr>  </table> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja">- name: Trigger an incident with just the basic options
  community.general.pagerduty_alert:
    name: companyabc
    integration_key: xxx
    api_key: yourapikey
    service_id: PDservice
    state: triggered
    desc: problem that led to this trigger

- name: Trigger an incident with more options
  community.general.pagerduty_alert:
    integration_key: xxx
    api_key: yourapikey
    service_id: PDservice
    state: triggered
    desc: problem that led to this trigger
    incident_key: somekey
    client: Sample Monitoring Service
    client_url: http://service.example.com

- name: Acknowledge an incident based on incident_key
  community.general.pagerduty_alert:
    integration_key: xxx
    api_key: yourapikey
    service_id: PDservice
    state: acknowledged
    incident_key: somekey
    desc: "some text for incident's log"

- name: Resolve an incident based on incident_key
  community.general.pagerduty_alert:
    integration_key: xxx
    api_key: yourapikey
    service_id: PDservice
    state: resolved
    incident_key: somekey
    desc: "some text for incident's log"

- name: Trigger an v2 incident with just the basic options
  community.general.pagerduty_alert:
    integration_key: xxx
    api_version: v2
    source: My Ansible Script
    state: triggered
    desc: problem that led to this trigger

- name: Trigger an v2 incident with more options
  community.general.pagerduty_alert:
    integration_key: xxx
    api_version: v2
    source: My Ansible Script
    state: triggered
    desc: problem that led to this trigger
    incident_key: somekey
    client: Sample Monitoring Service
    client_url: http://service.example.com
    component: mysql
    incident_class: ping failure
    link_url: https://pagerduty.com
    link_text: PagerDuty

- name: Acknowledge an incident based on incident_key using v2
  community.general.pagerduty_alert:
    api_version: v2
    integration_key: xxx
    incident_key: somekey
    state: acknowledged

- name: Resolve an incident based on incident_key
  community.general.pagerduty_alert:
    api_version: v2
    integration_key: xxx
    incident_key: somekey
    state: resolved
</pre> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Amanpreet Singh (@ApsOps)</li> <li>Xiao Shen (@xshen1)</li> </ul> </section> <section id="collection-links"> <h3>Collection links</h3> <ul class="ansible-links"> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.general/issues" rel="noopener external" target="_blank">Issue Tracker</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.general" rel="noopener external" target="_blank">Repository (Sources)</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://forum.ansible.com/c/help/6/none" rel="noopener external" target="_blank">Ask for help</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.general/issues/new?assignees=&amp;labels=&amp;template=bug_report.yml" rel="noopener external" target="_blank">Submit a bug report</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.general/issues/new?assignees=&amp;labels=&amp;template=feature_request.yml" rel="noopener external" target="_blank">Request a feature</a></span></li> <li><span><a class="reference internal" href="index.html#communication-for-community-general"><span class="std std-ref">Communication</span></a></span></li> </ul> </section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2024 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/community/general/pagerduty_alert_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/community/general/pagerduty_alert_module.html</a>
  </p>
</div>
