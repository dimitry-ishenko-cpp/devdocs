<section id="community-general-redhat-subscription-module-manage-registration-and-subscriptions-to-rhsm-using-subscription-manager"> <h1>community.general.redhat_subscription module – Manage registration and subscriptions to RHSM using subscription-manager</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module is part of the <a class="reference external" href="https://galaxy.ansible.com/ui/repo/published/community/general/">community.general collection</a> (version 9.5.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install community.general</code>. You need further requirements to be able to use this module, see <a class="reference internal" href="#ansible-collections-community-general-redhat-subscription-module-requirements"><span class="std std-ref">Requirements</span></a> for details.</p> <p>To use it in a playbook, specify: <code>community.general.redhat_subscription</code>.</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#attributes" id="id4">Attributes</a></li> <li><a class="reference internal" href="#notes" id="id5">Notes</a></li> <li><a class="reference internal" href="#examples" id="id6">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id7">Return Values</a></li> </ul>  <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>Manage registration and subscription to the Red Hat Subscription Management entitlement platform using the <code>subscription-manager</code> command, registering using D-Bus if possible.</li> </ul> </section> <section id="requirements"> <h2 id="ansible-collections-community-general-redhat-subscription-module-requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>subscription-manager</li> <li>Optionally the <code>dbus</code> Python library; this is usually included in the OS as it is used by <code>subscription-manager</code>.</li> </ul> </section> <section id="parameters"> <h2>Parameters</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-redhat-subscription-module-parameter-activationkey"><strong>activationkey</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>supply an activation key for use with registration</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-redhat-subscription-module-parameter-auto-attach"><strong>auto_attach</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Upon successful registration, auto-consume available subscriptions</p> <p>Please note that the alias <code><strong><span>autosubscribe</span></strong></code> was removed in community.general 9.0.0.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-redhat-subscription-module-parameter-consumer-id"><strong>consumer_id</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>References an existing consumer ID to resume using a previous registration for this system. If the system’s identity certificate is lost or corrupted, this option allows it to resume using its previous identity and subscriptions. The default is to not specify a consumer ID so a new ID is created.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-redhat-subscription-module-parameter-consumer-name"><strong>consumer_name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Name of the system to register, defaults to the hostname</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-redhat-subscription-module-parameter-consumer-type"><strong>consumer_type</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The type of unit to register, defaults to system</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-redhat-subscription-module-parameter-environment"><strong>environment</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Register with a specific environment in the destination org. Used with Red Hat Satellite or Katello</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-redhat-subscription-module-parameter-force-register"><strong>force_register</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Register the system even if it is already registered</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-redhat-subscription-module-parameter-org-id"><strong>org_id</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Organization ID to use in conjunction with activationkey</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-redhat-subscription-module-parameter-password"><strong>password</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>access.redhat.com or Red Hat Satellite or Katello password</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-redhat-subscription-module-parameter-pool"><strong>pool</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify a subscription pool name to consume. Regular expressions accepted. Mutually exclusive with <code><strong><a class="reference internal" href="#ansible-collections-community-general-redhat-subscription-module-parameter-pool-ids"><span class="std std-ref">pool_ids</span></a></strong></code>.</p> <p>Please use <code><strong><a class="reference internal" href="#ansible-collections-community-general-redhat-subscription-module-parameter-pool-ids"><span class="std std-ref">pool_ids</span></a></strong></code> instead: specifying pool IDs is much faster, and it avoids to match new pools that become available for the system and are not explicitly wanted. Also, this option does not support quantities.</p> <p>This option is deprecated for the reasons mentioned above, and it will be removed in community.general 10.0.0.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"^$"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-redhat-subscription-module-parameter-pool-ids"><strong>pool_ids</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=any</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify subscription pool IDs to consume. Prefer over <code><strong><a class="reference internal" href="#ansible-collections-community-general-redhat-subscription-module-parameter-pool"><span class="std std-ref">pool</span></a></strong></code> when possible as it is much faster. A pool ID may be specified as a <code>string</code> - just the pool ID (for example <code>0123456789abcdef0123456789abcdef</code>), or as a <code>dict</code> with the pool ID as the key, and a quantity as the value (for example <code>0123456789abcdef0123456789abcdef: 2</code>. If the quantity is provided, it is used to consume multiple entitlements from a pool (the pool must support this). Mutually exclusive with <code><strong><a class="reference internal" href="#ansible-collections-community-general-redhat-subscription-module-parameter-pool"><span class="std std-ref">pool</span></a></strong></code>.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>[]</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-redhat-subscription-module-parameter-release"><strong>release</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Set a release version</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-redhat-subscription-module-parameter-rhsm-baseurl"><strong>rhsm_baseurl</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify CDN baseurl</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-redhat-subscription-module-parameter-rhsm-repo-ca-cert"><strong>rhsm_repo_ca_cert</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify an alternative location for a CA certificate for CDN</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-redhat-subscription-module-parameter-server-hostname"><strong>server_hostname</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify an alternative Red Hat Subscription Management or Red Hat Satellite or Katello server.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-redhat-subscription-module-parameter-server-insecure"><strong>server_insecure</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Enable or disable https server certificate verification when connecting to <code><strong><a class="reference internal" href="#ansible-collections-community-general-redhat-subscription-module-parameter-server-hostname"><span class="std std-ref">server_hostname</span></a></strong></code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-redhat-subscription-module-parameter-server-port"><strong>server_port</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in community.general 3.3.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify the port when registering to the Red Hat Subscription Management or Red Hat Satellite or Katello server.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-redhat-subscription-module-parameter-server-prefix"><strong>server_prefix</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in community.general 3.3.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify the prefix when registering to the Red Hat Subscription Management or Red Hat Satellite or Katello server.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-redhat-subscription-module-parameter-server-proxy-hostname"><strong>server_proxy_hostname</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify an HTTP proxy hostname.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-redhat-subscription-module-parameter-server-proxy-password"><strong>server_proxy_password</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify a password for HTTP proxy with basic authentication</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-redhat-subscription-module-parameter-server-proxy-port"><strong>server_proxy_port</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify an HTTP proxy port.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-redhat-subscription-module-parameter-server-proxy-scheme"><strong>server_proxy_scheme</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in community.general 6.2.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify an HTTP proxy scheme, for example <code>http</code> or <code>https</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-redhat-subscription-module-parameter-server-proxy-user"><strong>server_proxy_user</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify a user for HTTP proxy with basic authentication</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-redhat-subscription-module-parameter-state"><strong>state</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>whether to register and subscribe (<code>present</code>), or unregister (<code>absent</code>) a system</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"present"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"absent"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-redhat-subscription-module-parameter-syspurpose"><strong>syspurpose</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Set syspurpose attributes in file <code>/etc/rhsm/syspurpose/syspurpose.json</code> and synchronize these attributes with RHSM server. Syspurpose attributes help attach the most appropriate subscriptions to the system automatically. When <code>syspurpose.json</code> file already contains some attributes, then new attributes overwrite existing attributes. When some attribute is not listed in the new list of attributes, the existing attribute will be removed from <code>syspurpose.json</code> file. Unknown attributes are ignored.</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-redhat-subscription-module-parameter-syspurpose-addons"><strong>addons</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Syspurpose attribute addons</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-redhat-subscription-module-parameter-syspurpose-role"><strong>role</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Syspurpose attribute role</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-redhat-subscription-module-parameter-syspurpose-service-level-agreement"><strong>service_level_agreement</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Syspurpose attribute service_level_agreement</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-redhat-subscription-module-parameter-syspurpose-sync"><strong>sync</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>When this option is <code>true</code>, then syspurpose attributes are synchronized with RHSM server immediately. When this option is <code>false</code>, then syspurpose attributes will be synchronized with RHSM server by rhsmcertd daemon.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-redhat-subscription-module-parameter-syspurpose-usage"><strong>usage</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Syspurpose attribute usage</p> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-redhat-subscription-module-parameter-token"><strong>token</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in community.general 6.3.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>sso.redhat.com API access token.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-redhat-subscription-module-parameter-username"><strong>username</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>access.redhat.com or Red Hat Satellite or Katello username</p> </div></td> </tr>  </table> </section> <section id="attributes"> <h2>Attributes</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Attribute</p></th> <th class="head"><p>Support</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-redhat-subscription-module-attribute-check-mode"><strong>check_mode</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-label">Support: </strong><strong class="ansible-attribute-support-none">none</strong></p> </div></td> <td><div class="ansible-option-cell">
<p>Can run in <code>check_mode</code> and return changed status prediction without modifying target.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-redhat-subscription-module-attribute-diff-mode"><strong>diff_mode</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-label">Support: </strong><strong class="ansible-attribute-support-none">none</strong></p> </div></td> <td><div class="ansible-option-cell">
<p>Will return details on what has changed (or possibly needs changing in <code>check_mode</code>), when in diff mode.</p> </div></td> </tr>  </table> </section> <section id="notes"> <h2>Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>The module tries to use the D-Bus <code>rhsm</code> service (part of <code>subscription-manager</code>) to register, starting from community.general 6.5.0: this is done so credentials (username, password, activation keys) can be passed to <code>rhsm</code> in a secure way. <code>subscription-manager</code> itself gets credentials only as arguments of command line parameters, which is <em>not</em> secure, as they can be easily stolen by checking the process listing on the system. Due to limitations of the D-Bus interface of <code>rhsm</code>, the module will <em>not</em> use D-Bus for registration when trying either to register using <code><strong><a class="reference internal" href="#ansible-collections-community-general-redhat-subscription-module-parameter-token"><span class="std std-ref">token</span></a></strong></code>, or when specifying <code><strong><a class="reference internal" href="#ansible-collections-community-general-redhat-subscription-module-parameter-environment"><span class="std std-ref">environment</span></a></strong></code>, or when the system is old (typically RHEL 7 older than 7.4, RHEL 6, and older).</li> <li>In order to register a system, subscription-manager requires either a username and password, or an activationkey and an Organization ID.</li> <li>Since 2.5 values for <code><strong><a class="reference internal" href="#ansible-collections-community-general-redhat-subscription-module-parameter-server-hostname"><span class="std std-ref">server_hostname</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-general-redhat-subscription-module-parameter-server-insecure"><span class="std std-ref">server_insecure</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-general-redhat-subscription-module-parameter-rhsm-baseurl"><span class="std std-ref">rhsm_baseurl</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-general-redhat-subscription-module-parameter-server-proxy-hostname"><span class="std std-ref">server_proxy_hostname</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-general-redhat-subscription-module-parameter-server-proxy-port"><span class="std std-ref">server_proxy_port</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-general-redhat-subscription-module-parameter-server-proxy-user"><span class="std std-ref">server_proxy_user</span></a></strong></code> and <code><strong><a class="reference internal" href="#ansible-collections-community-general-redhat-subscription-module-parameter-server-proxy-password"><span class="std std-ref">server_proxy_password</span></a></strong></code> are no longer taken from the <code>/etc/rhsm/rhsm.conf</code> config file and default to <code>null</code>.</li> <li>It is possible to interact with <code>subscription-manager</code> only as root, so root permissions are required to successfully run this module.</li> <li>Since community.general 6.5.0, credentials (that is, <code><strong><a class="reference internal" href="#ansible-collections-community-general-redhat-subscription-module-parameter-username"><span class="std std-ref">username</span></a></strong></code> and <code><strong><a class="reference internal" href="#ansible-collections-community-general-redhat-subscription-module-parameter-password"><span class="std std-ref">password</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-general-redhat-subscription-module-parameter-activationkey"><span class="std std-ref">activationkey</span></a></strong></code>, or <code><strong><a class="reference internal" href="#ansible-collections-community-general-redhat-subscription-module-parameter-token"><span class="std std-ref">token</span></a></strong></code>) are needed only in case the the system is not registered, or <code><strong><a class="reference internal" href="#ansible-collections-community-general-redhat-subscription-module-parameter-force-register"><span class="std std-ref">force_register</span></a></strong></code> is specified; this makes it possible to use the module to tweak an already registered system, for example attaching pools to it (using <code><strong><a class="reference internal" href="#ansible-collections-community-general-redhat-subscription-module-parameter-pool"><span class="std std-ref">pool</span></a></strong></code>, or <code><strong><a class="reference internal" href="#ansible-collections-community-general-redhat-subscription-module-parameter-pool-ids"><span class="std std-ref">pool_ids</span></a></strong></code>), and modifying the <code>syspurpose</code> attributes (using <code><strong><a class="reference internal" href="#ansible-collections-community-general-redhat-subscription-module-parameter-syspurpose"><span class="std std-ref">syspurpose</span></a></strong></code>).</li> </ul> </div> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja">- name: Register as user (joe_user) with password (somepass) and auto-subscribe to available content.
  community.general.redhat_subscription:
    state: present
    username: joe_user
    password: somepass
    auto_attach: true

- name: Same as above but subscribe to a specific pool by ID.
  community.general.redhat_subscription:
    state: present
    username: joe_user
    password: somepass
    pool_ids: 0123456789abcdef0123456789abcdef

- name: Register and subscribe to multiple pools.
  community.general.redhat_subscription:
    state: present
    username: joe_user
    password: somepass
    pool_ids:
      - 0123456789abcdef0123456789abcdef
      - 1123456789abcdef0123456789abcdef

- name: Same as above but consume multiple entitlements.
  community.general.redhat_subscription:
    state: present
    username: joe_user
    password: somepass
    pool_ids:
      - 0123456789abcdef0123456789abcdef: 2
      - 1123456789abcdef0123456789abcdef: 4

- name: Register and pull existing system data.
  community.general.redhat_subscription:
    state: present
    username: joe_user
    password: somepass
    consumer_id: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx

- name: Register with activationkey and consume subscriptions matching Red Hat Enterprise Server or Red Hat Virtualization
  community.general.redhat_subscription:
    state: present
    activationkey: 1-222333444
    org_id: 222333444
    pool: '^(Red Hat Enterprise Server|Red Hat Virtualization)$'

- name: Update the consumed subscriptions from the previous example (remove Red Hat Virtualization subscription)
  community.general.redhat_subscription:
    state: present
    activationkey: 1-222333444
    org_id: 222333444
    pool: '^Red Hat Enterprise Server$'

- name: Register as user credentials into given environment (against Red Hat Satellite or Katello), and auto-subscribe.
  community.general.redhat_subscription:
    state: present
    username: joe_user
    password: somepass
    environment: Library
    auto_attach: true

- name: Register as user (joe_user) with password (somepass) and a specific release
  community.general.redhat_subscription:
    state: present
    username: joe_user
    password: somepass
    release: 7.4

- name: Register as user (joe_user) with password (somepass), set syspurpose attributes and synchronize them with server
  community.general.redhat_subscription:
    state: present
    username: joe_user
    password: somepass
    auto_attach: true
    syspurpose:
      usage: "Production"
      role: "Red Hat Enterprise Server"
      service_level_agreement: "Premium"
      addons:
        - addon1
        - addon2
      sync: true
</pre> </section> <section id="return-values"> <h2>Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values.html#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Key</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-redhat-subscription-module-return-subscribed-pool-ids"><strong>subscribed_pool_ids</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>List of pool IDs to which system is now subscribed</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> success</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>{"8a85f9815ab905d3015ab928c7005de4": "1"}</code></p> </div></td> </tr>  </table> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Barnaby Court (@barnabycourt)</li> </ul> </section> <section id="collection-links"> <h3>Collection links</h3> <ul class="ansible-links"> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.general/issues" rel="noopener external" target="_blank">Issue Tracker</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.general" rel="noopener external" target="_blank">Repository (Sources)</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://forum.ansible.com/c/help/6/none" rel="noopener external" target="_blank">Ask for help</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.general/issues/new?assignees=&amp;labels=&amp;template=bug_report.yml" rel="noopener external" target="_blank">Submit a bug report</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.general/issues/new?assignees=&amp;labels=&amp;template=feature_request.yml" rel="noopener external" target="_blank">Request a feature</a></span></li> <li><span><a class="reference internal" href="index.html#communication-for-community-general"><span class="std std-ref">Communication</span></a></span></li> </ul> </section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2024 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/community/general/redhat_subscription_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/community/general/redhat_subscription_module.html</a>
  </p>
</div>
