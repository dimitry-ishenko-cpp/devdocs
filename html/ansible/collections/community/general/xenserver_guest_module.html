<section id="community-general-xenserver-guest-module-manages-virtual-machines-running-on-citrix-hypervisor-xenserver-host-or-pool"> <h1>community.general.xenserver_guest module – Manages virtual machines running on Citrix Hypervisor/XenServer host or pool</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module is part of the <a class="reference external" href="https://galaxy.ansible.com/ui/repo/published/community/general/">community.general collection</a> (version 9.5.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install community.general</code>. You need further requirements to be able to use this module, see <a class="reference internal" href="#ansible-collections-community-general-xenserver-guest-module-requirements"><span class="std std-ref">Requirements</span></a> for details.</p> <p>To use it in a playbook, specify: <code>community.general.xenserver_guest</code>.</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#attributes" id="id4">Attributes</a></li> <li><a class="reference internal" href="#notes" id="id5">Notes</a></li> <li><a class="reference internal" href="#examples" id="id6">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id7">Return Values</a></li> </ul>  <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>This module can be used to create new virtual machines from templates or other virtual machines, modify various virtual machine components like network and disk, rename a virtual machine and remove a virtual machine with associated components.</li> </ul> </section> <section id="requirements"> <h2 id="ansible-collections-community-general-xenserver-guest-module-requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>XenAPI</li> </ul> </section> <section id="parameters"> <h2>Parameters</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-cdrom"><strong>cdrom</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>A CD-ROM configuration for the VM.</p> <p>All parameters are case sensitive.</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-cdrom-iso-name"><strong>iso_name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The file name of an ISO image from one of the XenServer ISO Libraries (implies <code><a class="reference internal" href="#ansible-collections-community-general-xenserver-guest-module-parameter-cdrom-type"><span class="std std-ref">cdrom.type=iso</span></a></code>).</p> <p>Required if <code><strong><a class="reference internal" href="#ansible-collections-community-general-xenserver-guest-module-parameter-cdrom-type"><span class="std std-ref">cdrom.type</span></a></strong></code> is set to <code>iso</code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-cdrom-type"><strong>type</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The type of CD-ROM. With <code>none</code> the CD-ROM device will be present but empty.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"none"</code></li> <li><code>"iso"</code></li> </ul> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-custom-params"><strong>custom_params</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Define a list of custom VM params to set on VM.</p> <p>Useful for advanced users familiar with managing VM params through xe CLI.</p> <p>A custom value object takes two fields <code><strong><a class="reference internal" href="#ansible-collections-community-general-xenserver-guest-module-parameter-custom-params-key"><span class="std std-ref">custom_params[].key</span></a></strong></code> and <code><strong><a class="reference internal" href="#ansible-collections-community-general-xenserver-guest-module-parameter-custom-params-value"><span class="std std-ref">custom_params[].value</span></a></strong></code> (see example below).</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-custom-params-key"><strong>key</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>VM param name.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-custom-params-value"><strong>value</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">any</span> / <span class="ansible-option-required">required</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>VM param value.</p> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-disks"><strong id="ansible-collections-community-general-xenserver-guest-module-parameter-disk">disks</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: disk</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>A list of disks to add to VM.</p> <p>All parameters are case sensitive.</p> <p>Removing or detaching existing disks of VM is not supported.</p> <p>New disks are required to have either a <code><strong><a class="reference internal" href="#ansible-collections-community-general-xenserver-guest-module-parameter-disks-size"><span class="std std-ref">disks[].size</span></a></strong></code> or one of <code><strong><span>disks[].size_[tb,gb,mb,kb,b]</span></strong></code> parameters specified.</p> <p>VM needs to be shut down to reconfigure disk size.</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell">    
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-disks-name-label"><strong id="ansible-collections-community-general-xenserver-guest-module-parameter-disk-name">name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: name_label</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Disk name.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-disks-name-desc"><strong id="ansible-collections-community-general-xenserver-guest-module-parameter-disk-name-desc">name_desc</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Disk description.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-disks-size"><strong id="ansible-collections-community-general-xenserver-guest-module-parameter-disk-size">size</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Disk size with unit. Unit must be: <code>b</code>, <code>kb</code>, <code>mb</code>, <code>gb</code>, <code>tb</code>. VM needs to be shut down to reconfigure this parameter.</p> <p>If no unit is specified, size is assumed to be in bytes.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-disks-size-b"><strong id="ansible-collections-community-general-xenserver-guest-module-parameter-disk-size-b">size_b</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Disk size in bytes.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-disks-size-gb"><strong id="ansible-collections-community-general-xenserver-guest-module-parameter-disk-size-gb">size_gb</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Disk size in gigabytes.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-disks-size-kb"><strong id="ansible-collections-community-general-xenserver-guest-module-parameter-disk-size-kb">size_kb</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Disk size in kilobytes.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-disks-size-mb"><strong id="ansible-collections-community-general-xenserver-guest-module-parameter-disk-size-mb">size_mb</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Disk size in megabytes.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-disks-size-tb"><strong id="ansible-collections-community-general-xenserver-guest-module-parameter-disk-size-tb">size_tb</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Disk size in terabytes.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-disks-sr"><strong id="ansible-collections-community-general-xenserver-guest-module-parameter-disk-sr">sr</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Storage Repository to create disk on. If not specified, will use default SR. Cannot be used for moving disk to other SR.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-disks-sr-uuid"><strong id="ansible-collections-community-general-xenserver-guest-module-parameter-disk-sr-uuid">sr_uuid</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>UUID of a SR to create disk on. Use if SR name is not unique.</p> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-folder"><strong>folder</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Destination folder for VM.</p> <p>This parameter is case sensitive.</p> <p>Example:</p> <p>folder: /folder1/folder2</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-force"><strong>force</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Ignore warnings and complete the actions.</p> <p>This parameter is useful for removing VM in running state or reconfiguring VM params that require VM to be shut down.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-hardware"><strong>hardware</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Manage VM’s hardware parameters. VM needs to be shut down to reconfigure these parameters.</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-hardware-memory-mb"><strong>memory_mb</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Amount of memory in MB.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-hardware-num-cpu-cores-per-socket"><strong>num_cpu_cores_per_socket</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Number of Cores Per Socket. <code><strong><a class="reference internal" href="#ansible-collections-community-general-xenserver-guest-module-parameter-hardware-num-cpus"><span class="std std-ref">hardware.num_cpus</span></a></strong></code> has to be a multiple of <code><strong><a class="reference internal" href="#ansible-collections-community-general-xenserver-guest-module-parameter-hardware-num-cpu-cores-per-socket"><span class="std std-ref">hardware.num_cpu_cores_per_socket</span></a></strong></code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-hardware-num-cpus"><strong>num_cpus</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Number of CPUs.</p> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-home-server"><strong>home_server</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Name of a XenServer host that will be a Home Server for the VM.</p> <p>This parameter is case sensitive.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">   
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-pool"><strong id="ansible-collections-community-general-xenserver-guest-module-parameter-host">hostname</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: host, pool</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The hostname or IP address of the XenServer host or XenServer pool master.</p> <p>If the value is not specified in the task, the value of environment variable <code>XENSERVER_HOST</code> will be used instead.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"localhost"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-is-template"><strong>is_template</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Convert VM to template.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-linked-clone"><strong>linked_clone</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Whether to create a Linked Clone from the template, existing VM or snapshot. If no, will create a full copy.</p> <p>This is equivalent to <code>Use storage-level fast disk clone</code> option in XenCenter.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-name-label"><strong id="ansible-collections-community-general-xenserver-guest-module-parameter-name">name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: name_label</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Name of the VM to work with.</p> <p>VMs running on XenServer do not necessarily have unique names. The module will fail if multiple VMs with same name are found.</p> <p>In case of multiple VMs with same name, use <code><strong><a class="reference internal" href="#ansible-collections-community-general-xenserver-guest-module-parameter-uuid"><span class="std std-ref">uuid</span></a></strong></code> to uniquely specify VM to manage.</p> <p>This parameter is case sensitive.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-name-desc"><strong>name_desc</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>VM description.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-networks"><strong id="ansible-collections-community-general-xenserver-guest-module-parameter-network">networks</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: network</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>A list of networks (in the order of the NICs).</p> <p>All parameters are case sensitive.</p> <p>Name is required for new NICs. Other parameters are optional in all cases.</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-networks-gateway"><strong id="ansible-collections-community-general-xenserver-guest-module-parameter-network-gateway">gateway</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Static IPv4 gateway.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-networks-gateway6"><strong id="ansible-collections-community-general-xenserver-guest-module-parameter-network-gateway6">gateway6</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Static IPv6 gateway.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-networks-ip"><strong id="ansible-collections-community-general-xenserver-guest-module-parameter-network-ip">ip</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Static IPv4 address (implies <code><a class="reference internal" href="#ansible-collections-community-general-xenserver-guest-module-parameter-networks-type"><span class="std std-ref">networks[].type=static</span></a></code>). Can include prefix in format <code>&lt;IPv4 address&gt;/&lt;prefix&gt;</code> instead of using <code>netmask</code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-networks-ip6"><strong id="ansible-collections-community-general-xenserver-guest-module-parameter-network-ip6">ip6</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Static IPv6 address (implies <code><a class="reference internal" href="#ansible-collections-community-general-xenserver-guest-module-parameter-networks-type6"><span class="std std-ref">networks[].type6=static</span></a></code>) with prefix in format <code>&lt;IPv6 address&gt;/&lt;prefix&gt;</code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-networks-mac"><strong id="ansible-collections-community-general-xenserver-guest-module-parameter-network-mac">mac</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Customize MAC address of the interface.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell">    
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-networks-name-label"><strong id="ansible-collections-community-general-xenserver-guest-module-parameter-network-name">name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: name_label</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Name of a XenServer network to attach the network interface to.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-networks-netmask"><strong id="ansible-collections-community-general-xenserver-guest-module-parameter-network-netmask">netmask</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Static IPv4 netmask required for <code><strong><a class="reference internal" href="#ansible-collections-community-general-xenserver-guest-module-parameter-networks-ip"><span class="std std-ref">networks[].ip</span></a></strong></code> if prefix is not specified.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-networks-type"><strong id="ansible-collections-community-general-xenserver-guest-module-parameter-network-type">type</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Type of IPv4 assignment. Value <code>none</code> means whatever is default for OS.</p> <p>On some operating systems it could be DHCP configured (e.g. Windows) or unconfigured interface (e.g. Linux).</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"none"</code></li> <li><code>"dhcp"</code></li> <li><code>"static"</code></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-networks-type6"><strong id="ansible-collections-community-general-xenserver-guest-module-parameter-network-type6">type6</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Type of IPv6 assignment. Value <code>none</code> means whatever is default for OS.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"none"</code></li> <li><code>"dhcp"</code></li> <li><code>"static"</code></li> </ul> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell">   
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-pwd"><strong id="ansible-collections-community-general-xenserver-guest-module-parameter-pass">password</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: pass, pwd</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The password to use for connecting to XenServer.</p> <p>If the value is not specified in the task, the value of environment variable <code>XENSERVER_PASSWORD</code> will be used instead.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-state"><strong>state</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify the state VM should be in.</p> <p>If <code><strong><a class="reference internal" href="#ansible-collections-community-general-xenserver-guest-module-parameter-state"><span class="std std-ref">state</span></a></strong></code> is set to <code>present</code> and VM exists, ensure the VM configuration conforms to given parameters.</p> <p>If <code><strong><a class="reference internal" href="#ansible-collections-community-general-xenserver-guest-module-parameter-state"><span class="std std-ref">state</span></a></strong></code> is set to <code>present</code> and VM does not exist, then VM is deployed with given parameters.</p> <p>If <code><strong><a class="reference internal" href="#ansible-collections-community-general-xenserver-guest-module-parameter-state"><span class="std std-ref">state</span></a></strong></code> is set to <code>absent</code> and VM exists, then VM is removed with its associated components.</p> <p>If <code><strong><a class="reference internal" href="#ansible-collections-community-general-xenserver-guest-module-parameter-state"><span class="std std-ref">state</span></a></strong></code> is set to <code>poweredon</code> and VM does not exist, then VM is deployed with given parameters and powered on automatically.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"present"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"absent"</code></li> <li><code>"poweredon"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-state-change-timeout"><strong>state_change_timeout</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>By default, module will wait indefinitely for VM to acquire an IP address if <code><a class="reference internal" href="#ansible-collections-community-general-xenserver-guest-module-parameter-wait-for-ip-address"><span class="std std-ref">wait_for_ip_address=true</span></a></code>.</p> <p>If this parameter is set to positive value, the module will instead wait specified number of seconds for the state change.</p> <p>In case of timeout, module will generate an error message.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>0</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-template-src"><strong id="ansible-collections-community-general-xenserver-guest-module-parameter-template">template</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: template_src</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Name of a template, an existing VM (must be shut down) or a snapshot that should be used to create VM.</p> <p>Templates/VMs/snapshots on XenServer do not necessarily have unique names. The module will fail if multiple templates with same name are found.</p> <p>In case of multiple templates/VMs/snapshots with same name, use <code><strong><a class="reference internal" href="#ansible-collections-community-general-xenserver-guest-module-parameter-template-uuid"><span class="std std-ref">template_uuid</span></a></strong></code> to uniquely specify source template.</p> <p>If VM already exists, this setting will be ignored.</p> <p>This parameter is case sensitive.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-template-uuid"><strong>template_uuid</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>UUID of a template, an existing VM or a snapshot that should be used to create VM.</p> <p>It is required if template name is not unique.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">   
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-username"><strong id="ansible-collections-community-general-xenserver-guest-module-parameter-admin">username</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: admin, user</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The username to use for connecting to XenServer.</p> <p>If the value is not specified in the task, the value of environment variable <code>XENSERVER_USER</code> will be used instead.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"root"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-uuid"><strong>uuid</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>UUID of the VM to manage if known. This is XenServer’s unique identifier.</p> <p>It is required if name is not unique.</p> <p>Please note that a supplied UUID will be ignored on VM creation, as XenServer creates the UUID internally.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-validate-certs"><strong>validate_certs</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Allows connection when SSL certificates are not valid. Set to <code>false</code> when certificates are not trusted.</p> <p>If the value is not specified in the task, the value of environment variable <code>XENSERVER_VALIDATE_CERTS</code> will be used instead.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-parameter-wait-for-ip-address"><strong>wait_for_ip_address</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Wait until XenServer detects an IP address for the VM. If <code><strong><a class="reference internal" href="#ansible-collections-community-general-xenserver-guest-module-parameter-state"><span class="std std-ref">state</span></a></strong></code> is set to <code>absent</code>, this parameter is ignored.</p> <p>This requires XenServer Tools to be preinstalled on the VM to work properly.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr>  </table> </section> <section id="attributes"> <h2>Attributes</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Attribute</p></th> <th class="head"><p>Support</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-attribute-check-mode"><strong>check_mode</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-label">Support: </strong><strong class="ansible-attribute-support-full">full</strong></p> </div></td> <td><div class="ansible-option-cell">
<p>Can run in <code>check_mode</code> and return changed status prediction without modifying target.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-attribute-diff-mode"><strong>diff_mode</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-label">Support: </strong><strong class="ansible-attribute-support-none">none</strong></p> </div></td> <td><div class="ansible-option-cell">
<p>Will return details on what has changed (or possibly needs changing in <code>check_mode</code>), when in diff mode.</p> </div></td> </tr>  </table> </section> <section id="notes"> <h2>Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>Minimal supported version of XenServer is 5.6.</li> <li>Module was tested with XenServer 6.5, 7.1, 7.2, 7.6, Citrix Hypervisor 8.0, XCP-ng 7.6 and 8.0.</li> <li>To acquire XenAPI Python library, just run <code>pip install XenAPI</code> on your Ansible Control Node. The library can also be found inside Citrix Hypervisor/XenServer SDK (downloadable from Citrix website). Copy the XenAPI.py file from the SDK to your Python site-packages on your Ansible Control Node to use it. Latest version of the library can also be acquired from GitHub: <a class="reference external" href="https://raw.githubusercontent.com/xapi-project/xen-api/master/scripts/examples/python/XenAPI/XenAPI.py">https://raw.githubusercontent.com/xapi-project/xen-api/master/scripts/examples/python/XenAPI/XenAPI.py</a>
</li> <li>If no scheme is specified in <code><strong><a class="reference internal" href="#ansible-collections-community-general-xenserver-guest-module-parameter-hostname"><span class="std std-ref">hostname</span></a></strong></code>, module defaults to <code>http://</code> because <code>https://</code> is problematic in most setups. Make sure you are accessing XenServer host in trusted environment or use <code>https://</code> scheme explicitly.</li> <li>To use <code>https://</code> scheme for <code><strong><a class="reference internal" href="#ansible-collections-community-general-xenserver-guest-module-parameter-hostname"><span class="std std-ref">hostname</span></a></strong></code> you have to either import host certificate to your OS certificate store or use <code><a class="reference internal" href="#ansible-collections-community-general-xenserver-guest-module-parameter-validate-certs"><span class="std std-ref">validate_certs=false</span></a></code> which requires XenAPI library from XenServer 7.2 SDK or newer and Python 2.7.9 or newer.</li> <li>Network configuration inside a guest OS, by using <code><strong><a class="reference internal" href="#ansible-collections-community-general-xenserver-guest-module-parameter-networks-type"><span class="std std-ref">networks[].type</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-general-xenserver-guest-module-parameter-networks-ip"><span class="std std-ref">networks[].ip</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-general-xenserver-guest-module-parameter-networks-gateway"><span class="std std-ref">networks[].gateway</span></a></strong></code> etc. parameters, is supported on XenServer 7.0 or newer for Windows guests by using official XenServer Guest agent support for network configuration. The module will try to detect if such support is available and utilize it, else it will use a custom method of configuration via xenstore. Since XenServer Guest agent only support None and Static types of network configuration, where None means DHCP configured interface, <code><strong><a class="reference internal" href="#ansible-collections-community-general-xenserver-guest-module-parameter-networks-type"><span class="std std-ref">networks[].type</span></a></strong></code> and <code><strong><a class="reference internal" href="#ansible-collections-community-general-xenserver-guest-module-parameter-networks-type6"><span class="std std-ref">networks[].type6</span></a></strong></code> values <code>none</code> and <code>dhcp</code> have same effect. More info here: <a class="reference external" href="https://www.citrix.com/community/citrix-developer/citrix-hypervisor-developer/citrix-hypervisor-developing-products/citrix-hypervisor-staticip.html">https://www.citrix.com/community/citrix-developer/citrix-hypervisor-developer/citrix-hypervisor-developing-products/citrix-hypervisor-staticip.html</a>
</li> <li>On platforms without official support for network configuration inside a guest OS, network parameters will be written to xenstore <code>vm-data/networks/&lt;vif_device&gt;</code> key. Parameters can be inspected by using <code>xenstore ls</code> and <code>xenstore read</code> tools on \*nix guests or through WMI interface on Windows guests. They can also be found in VM facts <code>instance.xenstore_data</code> key as returned by the module. It is up to the user to implement a boot time scripts or custom agent that will read the parameters from xenstore and configure network with given parameters. Take note that for xenstore data to become available inside a guest, a VM restart is needed hence module will require VM restart if any parameter is changed. This is a limitation of XenAPI and xenstore. Considering these limitations, network configuration through xenstore is most useful for bootstrapping newly deployed VMs, much less for reconfiguring existing ones. More info here: <a class="reference external" href="https://support.citrix.com/article/CTX226713">https://support.citrix.com/article/CTX226713</a>
</li> </ul> </div> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja">- name: Create a VM from a template
  community.general.xenserver_guest:
    hostname: "{{ xenserver_hostname }}"
    username: "{{ xenserver_username }}"
    password: "{{ xenserver_password }}"
    folder: /testvms
    name: testvm_2
    state: poweredon
    template: CentOS 7
    disks:
    - size_gb: 10
      sr: my_sr
    hardware:
      num_cpus: 6
      num_cpu_cores_per_socket: 3
      memory_mb: 512
    cdrom:
      type: iso
      iso_name: guest-tools.iso
    networks:
    - name: VM Network
      mac: aa:bb:dd:aa:00:14
    wait_for_ip_address: true
  delegate_to: localhost
  register: deploy

- name: Create a VM template
  community.general.xenserver_guest:
    hostname: "{{ xenserver_hostname }}"
    username: "{{ xenserver_username }}"
    password: "{{ xenserver_password }}"
    folder: /testvms
    name: testvm_6
    is_template: true
    disk:
    - size_gb: 10
      sr: my_sr
    hardware:
      memory_mb: 512
      num_cpus: 1
  delegate_to: localhost
  register: deploy

- name: Rename a VM (requires the VM's UUID)
  community.general.xenserver_guest:
    hostname: "{{ xenserver_hostname }}"
    username: "{{ xenserver_username }}"
    password: "{{ xenserver_password }}"
    uuid: 421e4592-c069-924d-ce20-7e7533fab926
    name: new_name
    state: present
  delegate_to: localhost

- name: Remove a VM by UUID
  community.general.xenserver_guest:
    hostname: "{{ xenserver_hostname }}"
    username: "{{ xenserver_username }}"
    password: "{{ xenserver_password }}"
    uuid: 421e4592-c069-924d-ce20-7e7533fab926
    state: absent
  delegate_to: localhost

- name: Modify custom params (boot order)
  community.general.xenserver_guest:
    hostname: "{{ xenserver_hostname }}"
    username: "{{ xenserver_username }}"
    password: "{{ xenserver_password }}"
    name: testvm_8
    state: present
    custom_params:
    - key: HVM_boot_params
      value: { "order": "ndc" }
  delegate_to: localhost

- name: Customize network parameters
  community.general.xenserver_guest:
    hostname: "{{ xenserver_hostname }}"
    username: "{{ xenserver_username }}"
    password: "{{ xenserver_password }}"
    name: testvm_10
    networks:
    - name: VM Network
      ip: 192.168.1.100/24
      gateway: 192.168.1.1
    - type: dhcp
  delegate_to: localhost
</pre> </section> <section id="return-values"> <h2>Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values.html#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Key</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-return-changes"><strong>changes</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Detected or made changes to VM</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> always</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>[{"hardware": ["num_cpus"]}, {"disks_changed": [[], ["size"]]}, {"disks_new": [{"name": "new-disk", "name_desc": "", "position": 2, "size_gb": "4", "vbd_userdevice": "2"}]}, {"cdrom": ["type", "iso_name"]}, {"networks_changed": [["mac"]]}, {"networks_new": [{"name": "Pool-wide network associated with eth2", "position": 1, "vif_device": "1"}]}, "need_poweredoff"]</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-xenserver-guest-module-return-instance"><strong>instance</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Metadata about the VM</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> always</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>{"cdrom": {"type": "none"}, "customization_agent": "native", "disks": [{"name": "testvm_11-0", "name_desc": "", "os_device": "xvda", "size": 42949672960, "sr": "Local storage", "sr_uuid": "0af1245e-bdb0-ba33-1446-57a962ec4075", "vbd_userdevice": "0"}, {"name": "testvm_11-1", "name_desc": "", "os_device": "xvdb", "size": 42949672960, "sr": "Local storage", "sr_uuid": "0af1245e-bdb0-ba33-1446-57a962ec4075", "vbd_userdevice": "1"}], "domid": "56", "folder": "", "hardware": {"memory_mb": 8192, "num_cpu_cores_per_socket": 2, "num_cpus": 4}, "home_server": "", "is_template": false, "name": "testvm_11", "name_desc": "", "networks": [{"gateway": "192.168.0.254", "gateway6": "fc00::fffe", "ip": "192.168.0.200", "ip6": ["fe80:0000:0000:0000:e9cb:625a:32c5:c291", "fc00:0000:0000:0000:0000:0000:0000:0001"], "mac": "ba:91:3a:48:20:76", "mtu": "1500", "name": "Pool-wide network associated with eth1", "netmask": "255.255.255.128", "prefix": "25", "prefix6": "64", "vif_device": "0"}], "other_config": {"base_template_name": "Windows Server 2016 (64-bit)", "import_task": "OpaqueRef:e43eb71c-45d6-5351-09ff-96e4fb7d0fa5", "install-methods": "cdrom", "instant": "true", "mac_seed": "f83e8d8a-cfdc-b105-b054-ef5cb416b77e"}, "platform": {"acpi": "1", "apic": "true", "cores-per-socket": "2", "device_id": "0002", "hpet": "true", "nx": "true", "pae": "true", "timeoffset": "-25200", "vga": "std", "videoram": "8", "viridian": "true", "viridian_reference_tsc": "true", "viridian_time_ref_count": "true"}, "state": "poweredon", "uuid": "e3c0b2d5-5f05-424e-479c-d3df8b3e7cda", "xenstore_data": {"vm-data": ""}}</code></p> </div></td> </tr>  </table> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Bojan Vitnik (@bvitnik)</li> </ul> </section> <section id="collection-links"> <h3>Collection links</h3> <ul class="ansible-links"> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.general/issues" rel="noopener external" target="_blank">Issue Tracker</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.general" rel="noopener external" target="_blank">Repository (Sources)</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://forum.ansible.com/c/help/6/none" rel="noopener external" target="_blank">Ask for help</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.general/issues/new?assignees=&amp;labels=&amp;template=bug_report.yml" rel="noopener external" target="_blank">Submit a bug report</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.general/issues/new?assignees=&amp;labels=&amp;template=feature_request.yml" rel="noopener external" target="_blank">Request a feature</a></span></li> <li><span><a class="reference internal" href="index.html#communication-for-community-general"><span class="std std-ref">Communication</span></a></span></li> </ul> </section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2024 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/community/general/xenserver_guest_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/community/general/xenserver_guest_module.html</a>
  </p>
</div>
