<section id="community-general-ini-file-module-tweak-settings-in-ini-files"> <h1>community.general.ini_file module – Tweak settings in INI files</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module is part of the <a class="reference external" href="https://galaxy.ansible.com/ui/repo/published/community/general/">community.general collection</a> (version 9.5.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install community.general</code>.</p> <p>To use it in a playbook, specify: <code>community.general.ini_file</code>.</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#parameters" id="id2">Parameters</a></li> <li><a class="reference internal" href="#attributes" id="id3">Attributes</a></li> <li><a class="reference internal" href="#notes" id="id4">Notes</a></li> <li><a class="reference internal" href="#examples" id="id5">Examples</a></li> </ul>  <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>Manage (add, remove, change) individual settings in an INI-style file without having to manage the file as a whole with, say, <a class="reference internal" href="../../ansible/builtin/template_module.html#ansible-collections-ansible-builtin-template-module"><span class="std std-ref">ansible.builtin.template</span></a> or <a class="reference internal" href="../../ansible/builtin/assemble_module.html#ansible-collections-ansible-builtin-assemble-module"><span class="std std-ref">ansible.builtin.assemble</span></a>.</li> <li>Adds missing sections if they don’t exist.</li> <li>This module adds missing ending newlines to files to keep in line with the POSIX standard, even when no other modifications need to be applied.</li> </ul> </section> <section id="parameters"> <h2>Parameters</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-ini-file-module-parameter-allow-no-value"><strong>allow_no_value</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Allow option without value and without ‘=’ symbol.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-community-general-ini-file-module-parameter-attributes"><strong id="ansible-collections-community-general-ini-file-module-parameter-attr">attributes</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: attr</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The attributes the resulting filesystem object should have.</p> <p>To get supported flags look at the man page for <em>chattr</em> on the target system.</p> <p>This string should contain the attributes in the same order as the one displayed by <em>lsattr</em>.</p> <p>The <code>=</code> operator is assumed as default, otherwise <code>+</code> or <code>-</code> operators need to be included in the string.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-ini-file-module-parameter-backup"><strong>backup</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Create a backup file including the timestamp information so you can get the original file back if you somehow clobbered it incorrectly.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-ini-file-module-parameter-create"><strong>create</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>If set to <code>false</code>, the module will fail if the file does not already exist.</p> <p>By default it will create the file if it is missing.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-ini-file-module-parameter-exclusive"><strong>exclusive</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in community.general 3.6.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>If set to <code>true</code> (default), all matching <code><strong><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-option"><span class="std std-ref">option</span></a></strong></code> lines are removed when <code><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-state"><span class="std std-ref">state=absent</span></a></code>, or replaced when <code><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-state"><span class="std std-ref">state=present</span></a></code>.</p> <p>If set to <code>false</code>, only the specified <code><strong><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-value"><span class="std std-ref">value</span></a></strong></code>/<code><strong><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-values"><span class="std std-ref">values</span></a></strong></code> are added when <code><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-state"><span class="std std-ref">state=present</span></a></code>, or removed when <code><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-state"><span class="std std-ref">state=absent</span></a></code>, and existing ones are not modified.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-ini-file-module-parameter-follow"><strong>follow</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in community.general 7.1.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>This flag indicates that filesystem links, if they exist, should be followed.</p> <p><code><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-follow"><span class="std std-ref">follow=true</span></a></code> can modify <code><strong><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-path"><span class="std std-ref">path</span></a></strong></code> when combined with parameters such as <code><strong><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-mode"><span class="std std-ref">mode</span></a></strong></code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-ini-file-module-parameter-group"><strong>group</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Name of the group that should own the filesystem object, as would be fed to <em>chown</em>.</p> <p>When left unspecified, it uses the current group of the current user unless you are root, in which case it can preserve the previous ownership.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-ini-file-module-parameter-ignore-spaces"><strong>ignore_spaces</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in community.general 7.5.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Do not change a line if doing so would only add or remove spaces before or after the <code>=</code> symbol.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-ini-file-module-parameter-mode"><strong>mode</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">any</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The permissions the resulting filesystem object should have.</p> <p>For those used to <em>/usr/bin/chmod</em> remember that modes are actually octal numbers. You must give Ansible enough information to parse them correctly. For consistent results, quote octal numbers (for example, <code>'644'</code> or <code>'1777'</code>) so Ansible receives a string and can do its own conversion from string into number. Adding a leading zero (for example, <code>0755</code>) works sometimes, but can fail in loops and some other circumstances.</p> <p>Giving Ansible a number without following either of these rules will end up with a decimal number which will have unexpected results.</p> <p>As of Ansible 1.8, the mode may be specified as a symbolic mode (for example, <code>u+rwx</code> or <code>u=rw,g=r,o=r</code>).</p> <p>If <code><strong><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-mode"><span class="std std-ref">mode</span></a></strong></code> is not specified and the destination filesystem object <strong>does not</strong> exist, the default <code>umask</code> on the system will be used when setting the mode for the newly created filesystem object.</p> <p>If <code><strong><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-mode"><span class="std std-ref">mode</span></a></strong></code> is not specified and the destination filesystem object <strong>does</strong> exist, the mode of the existing filesystem object will be used.</p> <p>Specifying <code><strong><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-mode"><span class="std std-ref">mode</span></a></strong></code> is the best way to ensure filesystem objects are created with the correct permissions. See CVE-2020-1736 for further details.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-ini-file-module-parameter-modify-inactive-option"><strong>modify_inactive_option</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in community.general 8.0.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>By default the module replaces a commented line that matches the given option.</p> <p>Set this option to <code>false</code> to avoid this. This is useful when you want to keep commented example <code>key=value</code> pairs for documentation purposes.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-ini-file-module-parameter-no-extra-spaces"><strong>no_extra_spaces</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Do not insert spaces before and after ‘=’ symbol.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-ini-file-module-parameter-option"><strong>option</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>If set (required for changing a <code><strong><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-value"><span class="std std-ref">value</span></a></strong></code>), this is the name of the option.</p> <p>May be omitted if adding/removing a whole <code><strong><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-section"><span class="std std-ref">section</span></a></strong></code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-ini-file-module-parameter-owner"><strong>owner</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Name of the user that should own the filesystem object, as would be fed to <em>chown</em>.</p> <p>When left unspecified, it uses the current user unless you are root, in which case it can preserve the previous ownership.</p> <p>Specifying a numeric username will be assumed to be a user ID and not a username. Avoid numeric usernames to avoid this confusion.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-community-general-ini-file-module-parameter-path"><strong id="ansible-collections-community-general-ini-file-module-parameter-dest">path</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: dest</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">path</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Path to the INI-style file; this file is created if required.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-ini-file-module-parameter-section"><strong>section</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Section name in INI file. This is added if <code><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-state"><span class="std std-ref">state=present</span></a></code> automatically when a single value is being set.</p> <p>If being omitted, the <code><strong><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-option"><span class="std std-ref">option</span></a></strong></code> will be placed before the first <code><strong><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-section"><span class="std std-ref">section</span></a></strong></code>.</p> <p>Omitting <code><strong><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-section"><span class="std std-ref">section</span></a></strong></code> is also required if the config format does not support sections.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-ini-file-module-parameter-section-has-values"><strong>section_has_values</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=dictionary</span></p> <p><em class="ansible-option-versionadded">added in community.general 8.6.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Among possibly multiple sections of the same name, select the first one that contains matching options and values.</p> <p>With <code><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-state"><span class="std std-ref">state=present</span></a></code>, if a suitable section is not found, a new section will be added, including the required options.</p> <p>With <code><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-state"><span class="std std-ref">state=absent</span></a></code>, at most one <code><strong><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-section"><span class="std std-ref">section</span></a></strong></code> is removed if it contains the values.</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-ini-file-module-parameter-section-has-values-option"><strong>option</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Matching <code><strong><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-section"><span class="std std-ref">section</span></a></strong></code> must contain this option.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-ini-file-module-parameter-section-has-values-value"><strong>value</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Matching <code><strong><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-section-has-values-option"><span class="std std-ref">section_has_values[].option</span></a></strong></code> must have this specific value.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-ini-file-module-parameter-section-has-values-values"><strong>values</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The string value to be associated with an <code><strong><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-section-has-values-option"><span class="std std-ref">section_has_values[].option</span></a></strong></code>.</p> <p>Mutually exclusive with <code><strong><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-section-has-values-value"><span class="std std-ref">section_has_values[].value</span></a></strong></code>.</p> <p><code><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-section-has-values-value"><span class="std std-ref">section_has_values[].value=v</span></a></code> is equivalent to <code><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-section-has-values-values"><span class="std std-ref">section_has_values[].values=[v]</span></a></code>.</p> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-ini-file-module-parameter-selevel"><strong>selevel</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The level part of the SELinux filesystem object context.</p> <p>This is the MLS/MCS attribute, sometimes known as the <code>range</code>.</p> <p>When set to <code>_default</code>, it will use the <code>level</code> portion of the policy if available.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-ini-file-module-parameter-serole"><strong>serole</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The role part of the SELinux filesystem object context.</p> <p>When set to <code>_default</code>, it will use the <code>role</code> portion of the policy if available.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-ini-file-module-parameter-setype"><strong>setype</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The type part of the SELinux filesystem object context.</p> <p>When set to <code>_default</code>, it will use the <code>type</code> portion of the policy if available.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-ini-file-module-parameter-seuser"><strong>seuser</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The user part of the SELinux filesystem object context.</p> <p>By default it uses the <code>system</code> policy, where applicable.</p> <p>When set to <code>_default</code>, it will use the <code>user</code> portion of the policy if available.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-ini-file-module-parameter-state"><strong>state</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>If set to <code>absent</code> and <code><strong><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-exclusive"><span class="std std-ref">exclusive</span></a></strong></code> set to <code>true</code> all matching <code><strong><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-option"><span class="std std-ref">option</span></a></strong></code> lines are removed.</p> <p>If set to <code>absent</code> and <code><strong><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-exclusive"><span class="std std-ref">exclusive</span></a></strong></code> set to <code>false</code> the specified <code><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-option"><span class="std std-ref">option=value</span></a></code> lines are removed, but the other <code><strong><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-option"><span class="std std-ref">option</span></a></strong></code>s with the same name are not touched.</p> <p>If set to <code>present</code> and <code><strong><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-exclusive"><span class="std std-ref">exclusive</span></a></strong></code> set to <code>false</code> the specified <code><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-option"><span class="std std-ref">option=values</span></a></code> lines are added, but the other <code><strong><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-option"><span class="std std-ref">option</span></a></strong></code>s with the same name are not touched.</p> <p>If set to <code>present</code> and <code><strong><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-exclusive"><span class="std std-ref">exclusive</span></a></strong></code> set to <code>true</code> all given <code><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-option"><span class="std std-ref">option=values</span></a></code> lines will be added and the other <code><strong><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-option"><span class="std std-ref">option</span></a></strong></code>s with the same name are removed.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"absent"</code></li> <li>
<code><strong>"present"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-ini-file-module-parameter-unsafe-writes"><strong>unsafe_writes</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Influence when to use atomic operation to prevent data corruption or inconsistent reads from the target filesystem object.</p> <p>By default this module uses atomic operations to prevent data corruption or inconsistent reads from the target filesystem objects, but sometimes systems are configured or just broken in ways that prevent this. One example is docker mounted filesystem objects, which cannot be updated atomically from inside the container and can only be written in an unsafe manner.</p> <p>This option allows Ansible to fall back to unsafe methods of updating filesystem objects when atomic operations fail (however, it doesn’t force Ansible to perform unsafe writes).</p> <p>IMPORTANT! Unsafe writes are subject to race conditions and can lead to data corruption.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-ini-file-module-parameter-value"><strong>value</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The string value to be associated with an <code><strong><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-option"><span class="std std-ref">option</span></a></strong></code>.</p> <p>May be omitted when removing an <code><strong><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-option"><span class="std std-ref">option</span></a></strong></code>.</p> <p>Mutually exclusive with <code><strong><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-values"><span class="std std-ref">values</span></a></strong></code>.</p> <p><code><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-value"><span class="std std-ref">value=v</span></a></code> is equivalent to <code><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-values"><span class="std std-ref">values=[v]</span></a></code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-ini-file-module-parameter-values"><strong>values</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> <p><em class="ansible-option-versionadded">added in community.general 3.6.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>The string value to be associated with an <code><strong><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-option"><span class="std std-ref">option</span></a></strong></code>.</p> <p>May be omitted when removing an <code><strong><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-option"><span class="std std-ref">option</span></a></strong></code>.</p> <p>Mutually exclusive with <code><strong><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-value"><span class="std std-ref">value</span></a></strong></code>.</p> <p><code><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-value"><span class="std std-ref">value=v</span></a></code> is equivalent to <code><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-values"><span class="std std-ref">values=[v]</span></a></code>.</p> </div></td> </tr>  </table> </section> <section id="attributes"> <h2>Attributes</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Attribute</p></th> <th class="head"><p>Support</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-ini-file-module-attribute-check-mode"><strong>check_mode</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-label">Support: </strong><strong class="ansible-attribute-support-full">full</strong></p> </div></td> <td><div class="ansible-option-cell">
<p>Can run in <code>check_mode</code> and return changed status prediction without modifying target.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-general-ini-file-module-attribute-diff-mode"><strong>diff_mode</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-label">Support: </strong><strong class="ansible-attribute-support-full">full</strong></p> </div></td> <td><div class="ansible-option-cell">
<p>Will return details on what has changed (or possibly needs changing in <code>check_mode</code>), when in diff mode.</p> </div></td> </tr>  </table> </section> <section id="notes"> <h2>Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>While it is possible to add an <code><strong><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-option"><span class="std std-ref">option</span></a></strong></code> without specifying a <code><strong><a class="reference internal" href="#ansible-collections-community-general-ini-file-module-parameter-value"><span class="std std-ref">value</span></a></strong></code>, this makes no sense.</li> <li>As of community.general 3.2.0, UTF-8 BOM markers are discarded when reading files.</li> </ul> </div> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja">- name: Ensure "fav=lemonade is in section "[drinks]" in specified file
  community.general.ini_file:
    path: /etc/conf
    section: drinks
    option: fav
    value: lemonade
    mode: '0600'
    backup: true

- name: Ensure "temperature=cold is in section "[drinks]" in specified file
  community.general.ini_file:
    path: /etc/anotherconf
    section: drinks
    option: temperature
    value: cold
    backup: true

- name: Add "beverage=lemon juice" is in section "[drinks]" in specified file
  community.general.ini_file:
    path: /etc/conf
    section: drinks
    option: beverage
    value: lemon juice
    mode: '0600'
    state: present
    exclusive: false

- name: Ensure multiple values "beverage=coke" and "beverage=pepsi" are in section "[drinks]" in specified file
  community.general.ini_file:
    path: /etc/conf
    section: drinks
    option: beverage
    values:
      - coke
      - pepsi
    mode: '0600'
    state: present

- name: Add "beverage=lemon juice" outside a section in specified file
  community.general.ini_file:
    path: /etc/conf
    option: beverage
    value: lemon juice
    state: present

- name: Remove the peer configuration for 10.128.0.11/32
  community.general.ini_file:
    path: /etc/wireguard/wg0.conf
    section: Peer
    section_has_values:
      - option: AllowedIps
        value: 10.128.0.11/32
    mode: '0600'
    state: absent

- name: Add "beverage=lemon juice" outside a section in specified file
  community.general.ini_file:
    path: /etc/conf
    option: beverage
    value: lemon juice
    state: present

- name: Update the public key for peer 10.128.0.12/32
  community.general.ini_file:
    path: /etc/wireguard/wg0.conf
    section: Peer
    section_has_values:
      - option: AllowedIps
        value: 10.128.0.12/32
    option: PublicKey
    value: xxxxxxxxxxxxxxxxxxxx
    mode: '0600'
    state: present

- name: Remove the peer configuration for 10.128.0.11/32
  community.general.ini_file:
    path: /etc/wireguard/wg0.conf
    section: Peer
    section_has_values:
      - option: AllowedIps
        value: 10.4.0.11/32
    mode: '0600'
    state: absent

- name: Update the public key for peer 10.128.0.12/32
  community.general.ini_file:
    path: /etc/wireguard/wg0.conf
    section: Peer
    section_has_values:
      - option: AllowedIps
        value: 10.4.0.12/32
    option: PublicKey
    value: xxxxxxxxxxxxxxxxxxxx
    mode: '0600'
    state: present
</pre> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Jan-Piet Mens (@jpmens)</li> <li>Ales Nosek (@noseka1)</li> </ul> </section> <section id="collection-links"> <h3>Collection links</h3> <ul class="ansible-links"> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.general/issues" rel="noopener external" target="_blank">Issue Tracker</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.general" rel="noopener external" target="_blank">Repository (Sources)</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://forum.ansible.com/c/help/6/none" rel="noopener external" target="_blank">Ask for help</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.general/issues/new?assignees=&amp;labels=&amp;template=bug_report.yml" rel="noopener external" target="_blank">Submit a bug report</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.general/issues/new?assignees=&amp;labels=&amp;template=feature_request.yml" rel="noopener external" target="_blank">Request a feature</a></span></li> <li><span><a class="reference internal" href="index.html#communication-for-community-general"><span class="std std-ref">Communication</span></a></span></li> </ul> </section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2024 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/community/general/ini_file_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/community/general/ini_file_module.html</a>
  </p>
</div>
