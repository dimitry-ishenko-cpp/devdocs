<h1 id="community-general-diy-customize-the-output">community.general.diy – Customize the output</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/community/general">community.general collection</a> (version 3.8.1).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install community.general</code>.</p> <p>To use it in a playbook, specify: <code>community.general.diy</code>.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 0.2.0: </span>of community.general</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id4">Notes</a></li> <li><a class="reference internal" href="#see-also" id="id5">See Also</a></li> <li><a class="reference internal" href="#examples" id="id6">Examples</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Callback plugin that allows you to supply your own custom callback templates to be output.</li> </ul>   <h2 id="requirements">Requirements</h2> <p>The below requirements are needed on the local controller node that executes this callback.</p> <ul class="simple"> <li>set as stdout_callback in configuration</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="1">Parameter</th> <th>Choices/Defaults</th> <th>Configuration</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="1">  <b>check_mode_markers</b>  <div> <span>boolean</span> </div> <div> added in 2.9 of ansible.builtin </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div> ini entries: <p> [defaults]<br>check_mode_markers = no </p> </div> <div> env:ANSIBLE_CHECK_MODE_MARKERS </div> </td> <td> <div>Toggle to control displaying markers when running in check mode.</div> <div>The markers are <code>DRY RUN</code> at the beggining and ending of playbook execution (when calling <code>ansible-playbook --check</code>) and <code>CHECK MODE</code> as a suffix at every play and task that is run in check mode.</div> </td> </tr> <tr> <td colspan="1">  <b>display_failed_stderr</b>  <div> <span>boolean</span> </div> <div> added in 2.7 of ansible.builtin </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div> ini entries: <p> [defaults]<br>display_failed_stderr = no </p> </div> <div> env:ANSIBLE_DISPLAY_FAILED_STDERR </div> </td> <td> <div>Toggle to control whether failed and unreachable tasks are displayed to STDERR (vs. STDOUT)</div> </td> </tr> <tr> <td colspan="1">  <b>display_ok_hosts</b>  <div> <span>boolean</span> </div> <div> added in 2.7 of ansible.builtin </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li><div>
<b>yes</b> ←</div></li> </ul> </td> <td> <div> ini entries: <p> [defaults]<br>display_ok_hosts = yes </p> </div> <div> env:ANSIBLE_DISPLAY_OK_HOSTS </div> </td> <td> <div>Toggle to control displaying 'ok' task/host results in a task</div> </td> </tr> <tr> <td colspan="1">  <b>display_skipped_hosts</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li><div>
<b>yes</b> ←</div></li> </ul> </td> <td> <div> ini entries: <p> [defaults]<br>display_skipped_hosts = yes </p> </div> <div> env:DISPLAY_SKIPPED_HOSTS <div> Removed in: version 2.12 of ansible.builtin <br> Why: environment variables without "ANSIBLE_" prefix are deprecated <br> Alternative: the "ANSIBLE_DISPLAY_SKIPPED_HOSTS" environment variable </div> </div> <div> env:ANSIBLE_DISPLAY_SKIPPED_HOSTS </div> </td> <td> <div>Toggle to control displaying skipped task/host results in a task</div> </td> </tr> <tr> <td colspan="1">  <b>on_any_msg</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>on_any_msg = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_ON_ANY_MSG </div> <div> var: ansible_callback_diy_on_any_msg </div> </td> <td> <div>Output to be used for callback on_any.</div> </td> </tr> <tr> <td colspan="1">  <b>on_any_msg_color</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>on_any_msg_color = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_ON_ANY_MSG_COLOR </div> <div> var: ansible_callback_diy_on_any_msg_color </div> </td> <td> <div>Output color to be used for <em>on_any_msg</em>.</div> <div>Template should render a <a href="#notes">valid color value</a>.</div> </td> </tr> <tr> <td colspan="1">  <b>on_file_diff_msg</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>on_file_diff_msg = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_ON_FILE_DIFF_MSG </div> <div> var: ansible_callback_diy_on_file_diff_msg </div> </td> <td> <div>Output to be used for callback on_file_diff.</div> </td> </tr> <tr> <td colspan="1">  <b>on_file_diff_msg_color</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>on_file_diff_msg_color = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_ON_FILE_DIFF_MSG_COLOR </div> <div> var: ansible_callback_diy_on_file_diff_msg_color </div> </td> <td> <div>Output color to be used for <em>on_file_diff_msg</em>.</div> <div>Template should render a <a href="#notes">valid color value</a>.</div> </td> </tr> <tr> <td colspan="1">  <b>playbook_on_handler_task_start_msg</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>playbook_on_handler_task_start_msg = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_PLAYBOOK_ON_HANDLER_TASK_START_MSG </div> <div> var: ansible_callback_diy_playbook_on_handler_task_start_msg </div> </td> <td> <div>Output to be used for callback playbook_on_handler_task_start.</div> </td> </tr> <tr> <td colspan="1">  <b>playbook_on_handler_task_start_msg_color</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>playbook_on_handler_task_start_msg_color = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_PLAYBOOK_ON_HANDLER_TASK_START_MSG_COLOR </div> <div> var: ansible_callback_diy_playbook_on_handler_task_start_msg_color </div> </td> <td> <div>Output color to be used for <em>playbook_on_handler_task_start_msg</em>.</div> <div>Template should render a <a href="#notes">valid color value</a>.</div> </td> </tr> <tr> <td colspan="1">  <b>playbook_on_include_msg</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>playbook_on_include_msg = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_PLAYBOOK_ON_INCLUDE_MSG </div> <div> var: ansible_callback_diy_playbook_on_include_msg </div> </td> <td> <div>Output to be used for callback playbook_on_include.</div> </td> </tr> <tr> <td colspan="1">  <b>playbook_on_include_msg_color</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>playbook_on_include_msg_color = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_PLAYBOOK_ON_INCLUDE_MSG_COLOR </div> <div> var: ansible_callback_diy_playbook_on_include_msg_color </div> </td> <td> <div>Output color to be used for <em>playbook_on_include_msg</em>.</div> <div>Template should render a <a href="#notes">valid color value</a>.</div> </td> </tr> <tr> <td colspan="1">  <b>playbook_on_no_hosts_matched_msg</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>playbook_on_no_hosts_matched_msg = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_PLAYBOOK_ON_NO_HOSTS_MATCHED_MSG </div> <div> var: ansible_callback_diy_playbook_on_no_hosts_matched_msg </div> </td> <td> <div>Output to be used for callback playbook_on_no_hosts_matched.</div> </td> </tr> <tr> <td colspan="1">  <b>playbook_on_no_hosts_matched_msg_color</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>playbook_on_no_hosts_matched_msg_color = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_PLAYBOOK_ON_NO_HOSTS_MATCHED_MSG_COLOR </div> <div> var: ansible_callback_diy_playbook_on_no_hosts_matched_msg_color </div> </td> <td> <div>Output color to be used for <em>playbook_on_no_hosts_matched_msg</em>.</div> <div>Template should render a <a href="#notes">valid color value</a>.</div> </td> </tr> <tr> <td colspan="1">  <b>playbook_on_no_hosts_remaining_msg</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>playbook_on_no_hosts_remaining_msg = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_PLAYBOOK_ON_NO_HOSTS_REMAINING_MSG </div> <div> var: ansible_callback_diy_playbook_on_no_hosts_remaining_msg </div> </td> <td> <div>Output to be used for callback playbook_on_no_hosts_remaining.</div> </td> </tr> <tr> <td colspan="1">  <b>playbook_on_no_hosts_remaining_msg_color</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>playbook_on_no_hosts_remaining_msg_color = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_PLAYBOOK_ON_NO_HOSTS_REMAINING_MSG_COLOR </div> <div> var: ansible_callback_diy_playbook_on_no_hosts_remaining_msg_color </div> </td> <td> <div>Output color to be used for <em>playbook_on_no_hosts_remaining_msg</em>.</div> <div>Template should render a <a href="#notes">valid color value</a>.</div> </td> </tr> <tr> <td colspan="1">  <b>playbook_on_notify_msg</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>playbook_on_notify_msg = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_PLAYBOOK_ON_NOTIFY_MSG </div> <div> var: ansible_callback_diy_playbook_on_notify_msg </div> </td> <td> <div>Output to be used for callback playbook_on_notify.</div> </td> </tr> <tr> <td colspan="1">  <b>playbook_on_notify_msg_color</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>playbook_on_notify_msg_color = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_PLAYBOOK_ON_NOTIFY_MSG_COLOR </div> <div> var: ansible_callback_diy_playbook_on_notify_msg_color </div> </td> <td> <div>Output color to be used for <em>playbook_on_notify_msg</em>.</div> <div>Template should render a <a href="#notes">valid color value</a>.</div> </td> </tr> <tr> <td colspan="1">  <b>playbook_on_play_start_msg</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>playbook_on_play_start_msg = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_PLAYBOOK_ON_PLAY_START_MSG </div> <div> var: ansible_callback_diy_playbook_on_play_start_msg </div> </td> <td> <div>Output to be used for callback playbook_on_play_start.</div> </td> </tr> <tr> <td colspan="1">  <b>playbook_on_play_start_msg_color</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>playbook_on_play_start_msg_color = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_PLAYBOOK_ON_PLAY_START_MSG_COLOR </div> <div> var: ansible_callback_diy_playbook_on_play_start_msg_color </div> </td> <td> <div>Output color to be used for <em>playbook_on_play_start_msg</em>.</div> <div>Template should render a <a href="#notes">valid color value</a>.</div> </td> </tr> <tr> <td colspan="1">  <b>playbook_on_setup_msg</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>playbook_on_setup_msg = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_PLAYBOOK_ON_SETUP_MSG </div> <div> var: ansible_callback_diy_playbook_on_setup_msg </div> </td> <td> <div>Output to be used for callback playbook_on_setup.</div> </td> </tr> <tr> <td colspan="1">  <b>playbook_on_setup_msg_color</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>playbook_on_setup_msg_color = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_PLAYBOOK_ON_SETUP_MSG_COLOR </div> <div> var: ansible_callback_diy_playbook_on_setup_msg_color </div> </td> <td> <div>Output color to be used for <em>playbook_on_setup_msg</em>.</div> <div>Template should render a <a href="#notes">valid color value</a>.</div> </td> </tr> <tr> <td colspan="1">  <b>playbook_on_start_msg</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>playbook_on_start_msg = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_PLAYBOOK_ON_START_MSG </div> <div> var: ansible_callback_diy_playbook_on_start_msg </div> </td> <td> <div>Output to be used for callback playbook_on_start.</div> </td> </tr> <tr> <td colspan="1">  <b>playbook_on_start_msg_color</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>playbook_on_start_msg_color = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_PLAYBOOK_ON_START_MSG_COLOR </div> <div> var: ansible_callback_diy_playbook_on_start_msg_color </div> </td> <td> <div>Output color to be used for <em>playbook_on_start_msg</em>.</div> <div>Template should render a <a href="#notes">valid color value</a>.</div> </td> </tr> <tr> <td colspan="1">  <b>playbook_on_stats_msg</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>playbook_on_stats_msg = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_PLAYBOOK_ON_STATS_MSG </div> <div> var: ansible_callback_diy_playbook_on_stats_msg </div> </td> <td> <div>Output to be used for callback playbook_on_stats.</div> </td> </tr> <tr> <td colspan="1">  <b>playbook_on_stats_msg_color</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>playbook_on_stats_msg_color = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_PLAYBOOK_ON_STATS_MSG_COLOR </div> <div> var: ansible_callback_diy_playbook_on_stats_msg_color </div> </td> <td> <div>Output color to be used for <em>playbook_on_stats_msg</em>.</div> <div>Template should render a <a href="#notes">valid color value</a>.</div> </td> </tr> <tr> <td colspan="1">  <b>playbook_on_task_start_msg</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>playbook_on_task_start_msg = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_PLAYBOOK_ON_TASK_START_MSG </div> <div> var: ansible_callback_diy_playbook_on_task_start_msg </div> </td> <td> <div>Output to be used for callback playbook_on_task_start.</div> </td> </tr> <tr> <td colspan="1">  <b>playbook_on_task_start_msg_color</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>playbook_on_task_start_msg_color = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_PLAYBOOK_ON_TASK_START_MSG_COLOR </div> <div> var: ansible_callback_diy_playbook_on_task_start_msg_color </div> </td> <td> <div>Output color to be used for <em>playbook_on_task_start_msg</em>.</div> <div>Template should render a <a href="#notes">valid color value</a>.</div> </td> </tr> <tr> <td colspan="1">  <b>playbook_on_vars_prompt_msg</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>playbook_on_vars_prompt_msg = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_PLAYBOOK_ON_VARS_PROMPT_MSG </div> <div> var: ansible_callback_diy_playbook_on_vars_prompt_msg </div> </td> <td> <div>Output to be used for callback playbook_on_vars_prompt.</div> </td> </tr> <tr> <td colspan="1">  <b>playbook_on_vars_prompt_msg_color</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>playbook_on_vars_prompt_msg_color = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_PLAYBOOK_ON_VARS_PROMPT_MSG_COLOR </div> <div> var: ansible_callback_diy_playbook_on_vars_prompt_msg_color </div> </td> <td> <div>Output color to be used for <em>playbook_on_vars_prompt_msg</em>.</div> <div>Template should render a <a href="#notes">valid color value</a>.</div> </td> </tr> <tr> <td colspan="1">  <b>runner_item_on_failed_msg</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>runner_item_on_failed_msg = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_RUNNER_ITEM_ON_FAILED_MSG </div> <div> var: ansible_callback_diy_runner_item_on_failed_msg </div> </td> <td> <div>Output to be used for callback runner_item_on_failed.</div> </td> </tr> <tr> <td colspan="1">  <b>runner_item_on_failed_msg_color</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>runner_item_on_failed_msg_color = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_RUNNER_ITEM_ON_FAILED_MSG_COLOR </div> <div> var: ansible_callback_diy_runner_item_on_failed_msg_color </div> </td> <td> <div>Output color to be used for <em>runner_item_on_failed_msg</em>.</div> <div>Template should render a <a href="#notes">valid color value</a>.</div> </td> </tr> <tr> <td colspan="1">  <b>runner_item_on_ok_msg</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>runner_item_on_ok_msg = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_RUNNER_ITEM_ON_OK_MSG </div> <div> var: ansible_callback_diy_runner_item_on_ok_msg </div> </td> <td> <div>Output to be used for callback runner_item_on_ok.</div> </td> </tr> <tr> <td colspan="1">  <b>runner_item_on_ok_msg_color</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>runner_item_on_ok_msg_color = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_RUNNER_ITEM_ON_OK_MSG_COLOR </div> <div> var: ansible_callback_diy_runner_item_on_ok_msg_color </div> </td> <td> <div>Output color to be used for <em>runner_item_on_ok_msg</em>.</div> <div>Template should render a <a href="#notes">valid color value</a>.</div> </td> </tr> <tr> <td colspan="1">  <b>runner_item_on_skipped_msg</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>runner_item_on_skipped_msg = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_RUNNER_ITEM_ON_SKIPPED_MSG </div> <div> var: ansible_callback_diy_runner_item_on_skipped_msg </div> </td> <td> <div>Output to be used for callback runner_item_on_skipped.</div> </td> </tr> <tr> <td colspan="1">  <b>runner_item_on_skipped_msg_color</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>runner_item_on_skipped_msg_color = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_RUNNER_ITEM_ON_SKIPPED_MSG_COLOR </div> <div> var: ansible_callback_diy_runner_item_on_skipped_msg_color </div> </td> <td> <div>Output color to be used for <em>runner_item_on_skipped_msg</em>.</div> <div>Template should render a <a href="#notes">valid color value</a>.</div> </td> </tr> <tr> <td colspan="1">  <b>runner_on_failed_msg</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>runner_on_failed_msg = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_RUNNER_ON_FAILED_MSG </div> <div> var: ansible_callback_diy_runner_on_failed_msg </div> </td> <td> <div>Output to be used for callback runner_on_failed.</div> </td> </tr> <tr> <td colspan="1">  <b>runner_on_failed_msg_color</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>runner_on_failed_msg_color = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_RUNNER_ON_FAILED_MSG_COLOR </div> <div> var: ansible_callback_diy_runner_on_failed_msg_color </div> </td> <td> <div>Output color to be used for <em>runner_on_failed_msg</em>.</div> <div>Template should render a <a href="#notes">valid color value</a>.</div> </td> </tr> <tr> <td colspan="1">  <b>runner_on_no_hosts_msg</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>runner_on_no_hosts_msg = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_RUNNER_ON_NO_HOSTS_MSG </div> <div> var: ansible_callback_diy_runner_on_no_hosts_msg </div> </td> <td> <div>Output to be used for callback runner_on_no_hosts.</div> </td> </tr> <tr> <td colspan="1">  <b>runner_on_no_hosts_msg_color</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>runner_on_no_hosts_msg_color = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_RUNNER_ON_NO_HOSTS_MSG_COLOR </div> <div> var: ansible_callback_diy_runner_on_no_hosts_msg_color </div> </td> <td> <div>Output color to be used for <em>runner_on_no_hosts_msg</em>.</div> <div>Template should render a <a href="#notes">valid color value</a>.</div> </td> </tr> <tr> <td colspan="1">  <b>runner_on_ok_msg</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>runner_on_ok_msg = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_RUNNER_ON_OK_MSG </div> <div> var: ansible_callback_diy_runner_on_ok_msg </div> </td> <td> <div>Output to be used for callback runner_on_ok.</div> </td> </tr> <tr> <td colspan="1">  <b>runner_on_ok_msg_color</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>runner_on_ok_msg_color = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_RUNNER_ON_OK_MSG_COLOR </div> <div> var: ansible_callback_diy_runner_on_ok_msg_color </div> </td> <td> <div>Output color to be used for <em>runner_on_ok_msg</em>.</div> <div>Template should render a <a href="#notes">valid color value</a>.</div> </td> </tr> <tr> <td colspan="1">  <b>runner_on_skipped_msg</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>runner_on_skipped_msg = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_RUNNER_ON_SKIPPED_MSG </div> <div> var: ansible_callback_diy_runner_on_skipped_msg </div> </td> <td> <div>Output to be used for callback runner_on_skipped.</div> </td> </tr> <tr> <td colspan="1">  <b>runner_on_skipped_msg_color</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>runner_on_skipped_msg_color = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_RUNNER_ON_SKIPPED_MSG_COLOR </div> <div> var: ansible_callback_diy_runner_on_skipped_msg_color </div> </td> <td> <div>Output color to be used for <em>runner_on_skipped_msg</em>.</div> <div>Template should render a <a href="#notes">valid color value</a>.</div> </td> </tr> <tr> <td colspan="1">  <b>runner_on_start_msg</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>runner_on_start_msg = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_RUNNER_ON_START_MSG </div> <div> var: ansible_callback_diy_runner_on_start_msg </div> </td> <td> <div>Output to be used for callback runner_on_start.</div> </td> </tr> <tr> <td colspan="1">  <b>runner_on_start_msg_color</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>runner_on_start_msg_color = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_RUNNER_ON_START_MSG_COLOR </div> <div> var: ansible_callback_diy_runner_on_start_msg_color </div> </td> <td> <div>Output color to be used for <em>runner_on_start_msg</em>.</div> <div>Template should render a <a href="#notes">valid color value</a>.</div> </td> </tr> <tr> <td colspan="1">  <b>runner_on_unreachable_msg</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>runner_on_unreachable_msg = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_RUNNER_ON_UNREACHABLE_MSG </div> <div> var: ansible_callback_diy_runner_on_unreachable_msg </div> </td> <td> <div>Output to be used for callback runner_on_unreachable.</div> </td> </tr> <tr> <td colspan="1">  <b>runner_on_unreachable_msg_color</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>runner_on_unreachable_msg_color = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_RUNNER_ON_UNREACHABLE_MSG_COLOR </div> <div> var: ansible_callback_diy_runner_on_unreachable_msg_color </div> </td> <td> <div>Output color to be used for <em>runner_on_unreachable_msg</em>.</div> <div>Template should render a <a href="#notes">valid color value</a>.</div> </td> </tr> <tr> <td colspan="1">  <b>runner_retry_msg</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>runner_retry_msg = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_RUNNER_RETRY_MSG </div> <div> var: ansible_callback_diy_runner_retry_msg </div> </td> <td> <div>Output to be used for callback runner_retry.</div> </td> </tr> <tr> <td colspan="1">  <b>runner_retry_msg_color</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div> ini entries: <p> [callback_diy]<br>runner_retry_msg_color = None </p> </div> <div> env:ANSIBLE_CALLBACK_DIY_RUNNER_RETRY_MSG_COLOR </div> <div> var: ansible_callback_diy_runner_retry_msg_color </div> </td> <td> <div>Output color to be used for <em>runner_retry_msg</em>.</div> <div>Template should render a <a href="#notes">valid color value</a>.</div> </td> </tr> <tr> <td colspan="1">  <b>show_custom_stats</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div> ini entries: <p> [defaults]<br>show_custom_stats = no </p> </div> <div> env:ANSIBLE_SHOW_CUSTOM_STATS </div> </td> <td> <div>This adds the custom stats set via the set_stats plugin to the play recap</div> </td> </tr> <tr> <td colspan="1">  <b>show_per_host_start</b>  <div> <span>boolean</span> </div> <div> added in 2.9 of ansible.builtin </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div> ini entries: <p> [defaults]<br>show_per_host_start = no </p> </div> <div> env:ANSIBLE_SHOW_PER_HOST_START </div> </td> <td> <div>This adds output that shows when a task is started to execute for each host</div> </td> </tr> <tr> <td colspan="1">  <b>show_task_path_on_failure</b>  <div> <span>boolean</span> </div> <div> added in 2.11 of ansible.builtin </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div> ini entries: <p> [defaults]<br>show_task_path_on_failure = no </p> </div> <div> env:ANSIBLE_SHOW_TASK_PATH_ON_FAILURE </div> </td> <td> <div>When a task fails, display the path to the file containing the failed task and the line number. This information is displayed automatically for every task when running with <code>-vv</code> or greater verbosity.</div> </td> </tr> </table> <br>  <h2 id="notes">Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>Uses the <code>default</code> callback plugin output when a custom callback message(<code>msg</code>) is not provided.</li> <li>Makes the callback event data available via the <code>ansible_callback_diy</code> dictionary, which can be used in the templating context for the options. The dictionary is only available in the templating context for the options. It is not a variable that is available via the other various execution contexts, such as playbook, play, task etc.</li> <li>Options being set by their respective variable input can only be set using the variable if the variable was set in a context that is available to the respective callback. Use the <code>ansible_callback_diy</code> dictionary to see what is available to a callback. Additionally, <code>ansible_callback_diy.top_level_var_names</code> will output the top level variable names available to the callback.</li> <li>Each option value is rendered as a template before being evaluated. This allows for the dynamic usage of an option. For example, <code>"{{ 'yellow' if ansible_callback_diy.result.is_changed else 'bright green' }}"</code>
</li> <li>
<strong>Condition</strong> for all <code>msg</code> options: if value <code>is None or omit</code>, then the option is not being used. <strong>Effect</strong>: use of the <code>default</code> callback plugin for output</li> <li>
<strong>Condition</strong> for all <code>msg</code> options: if value <code>is not None and not omit and length is not greater than 0</code>, then the option is being used without output. <strong>Effect</strong>: suppress output</li> <li>
<strong>Condition</strong> for all <code>msg</code> options: if value <code>is not None and not omit and length is greater than 0</code>, then the option is being used with output. <strong>Effect</strong>: render value as template and output</li> <li>Valid color values: <code>black</code>, <code>bright gray</code>, <code>blue</code>, <code>white</code>, <code>green</code>, <code>bright blue</code>, <code>cyan</code>, <code>bright green</code>, <code>red</code>, <code>bright cyan</code>, <code>purple</code>, <code>bright red</code>, <code>yellow</code>, <code>bright purple</code>, <code>dark gray</code>, <code>bright yellow</code>, <code>magenta</code>, <code>bright magenta</code>, <code>normal</code>
</li> </ul> </div>   <h2 id="see-also">See Also</h2> <div class="admonition seealso"> <p class="admonition-title">See also</p> <dl class="simple"> <dt><a class="reference external" href="../../../plugins/callback/default.html">default – default Ansible screen output</a></dt>
<dd>
<p>The official documentation on the <strong>default</strong> callback plugin.</p> </dd> </dl> </div>   <h2 id="examples">Examples</h2> <pre data-language="yaml+jinja">ansible.cfg: &gt;
  # Enable plugin
  [defaults]
  stdout_callback=community.general.diy

  [callback_diy]
  # Output when playbook starts
  playbook_on_start_msg="DIY output(via ansible.cfg): playbook example: {{ ansible_callback_diy.playbook.file_name }}"
  playbook_on_start_msg_color=yellow

  # Comment out to allow default plugin output
  # playbook_on_play_start_msg="PLAY: starting play {{ ansible_callback_diy.play.name }}"

  # Accept on_skipped_msg or ansible_callback_diy_runner_on_skipped_msg as input vars
  # If neither are supplied, omit the option
  runner_on_skipped_msg="{{ on_skipped_msg | default(ansible_callback_diy_runner_on_skipped_msg) | default(omit) }}"

  # Newline after every callback
  # on_any_msg='{{ " " | join("\n") }}'

playbook.yml: &gt;
  ---
  - name: "Default plugin output: play example"
    hosts: localhost
    gather_facts: no
    tasks:
      - name:  Default plugin output
        ansible.builtin.debug:
          msg: default plugin output

  - name: Override from play vars
    hosts: localhost
    gather_facts: no
    vars:
      ansible_connection: local
      green: "\e[0m\e[38;5;82m"
      yellow: "\e[0m\e[38;5;11m"
      bright_purple: "\e[0m\e[38;5;105m"
      cyan: "\e[0m\e[38;5;51m"
      green_bg_black_fg: "\e[0m\e[48;5;40m\e[38;5;232m"
      yellow_bg_black_fg: "\e[0m\e[48;5;226m\e[38;5;232m"
      purple_bg_white_fg: "\e[0m\e[48;5;57m\e[38;5;255m"
      cyan_bg_black_fg: "\e[0m\e[48;5;87m\e[38;5;232m"
      magenta: "\e[38;5;198m"
      white: "\e[0m\e[38;5;255m"
      ansible_callback_diy_playbook_on_play_start_msg: "\n{{green}}DIY output(via play vars): play example: {{magenta}}{{ansible_callback_diy.play.name}}\n\n"
      ansible_callback_diy_playbook_on_task_start_msg: "DIY output(via play vars): task example: {{ ansible_callback_diy.task.name }}"
      ansible_callback_diy_playbook_on_task_start_msg_color: cyan
      ansible_callback_diy_playbook_on_stats_msg: |+2
                CUSTOM STATS
        ==============================
        {% for key in ansible_callback_diy.stats | sort %}
        {% if ansible_callback_diy.stats[key] %}
        {% if key == 'ok' %}
        {% set color_one = lookup('vars','green_bg_black_fg') %}
        {% set prefix = '      ' %}
        {% set suffix = '     ' %}
        {% set color_two = lookup('vars','green') %}
        {% elif key == 'changed' %}
        {% set color_one = lookup('vars','yellow_bg_black_fg') %}
        {% set prefix = '   ' %}
        {% set suffix = '   ' %}
        {% set color_two = lookup('vars','yellow') %}
        {% elif key == 'processed' %}
        {% set color_one = lookup('vars','purple_bg_white_fg') %}
        {% set prefix = '  ' %}
        {% set suffix = '  ' %}
        {% set color_two = lookup('vars','bright_purple') %}
        {% elif key == 'skipped' %}
        {% set color_one = lookup('vars','cyan_bg_black_fg') %}
        {% set prefix = '   ' %}
        {% set suffix = '   ' %}
        {% set color_two = lookup('vars','cyan') %}
        {% else %}
        {% set color_one = "" %}
        {% set prefix = "" %}
        {% set suffix = "" %}
        {% set color_two = "" %}
        {% endif %}
        {{ color_one }}{{ "%s%s%s" | format(prefix,key,suffix) }}{{ color_two }}: {{ ansible_callback_diy.stats[key] | to_nice_yaml }}
        {% endif %}
        {% endfor %}

    tasks:
      - name: Custom banner with default plugin result output
        ansible.builtin.debug:
          msg: "default plugin output: result example"

      - name: Override from task vars
        ansible.builtin.debug:
          msg: "example {{ two }}"
        changed_when: true
        vars:
          white_fg_red_bg: "\e[0m\e[48;5;1m"
          two: "{{ white_fg_red_bg }}    2    "
          ansible_callback_diy_playbook_on_task_start_msg: "\nDIY output(via task vars): task example: {{ ansible_callback_diy.task.name }}"
          ansible_callback_diy_playbook_on_task_start_msg_color: bright magenta
          ansible_callback_diy_runner_on_ok_msg: "DIY output(via task vars): result example: \n{{ ansible_callback_diy.result.output.msg }}\n"
          ansible_callback_diy_runner_on_ok_msg_color: "{{ 'yellow' if ansible_callback_diy.result.is_changed else 'bright green' }}"

      - name: Suppress output
        ansible.builtin.debug:
          msg: i should not be displayed
        vars:
          ansible_callback_diy_playbook_on_task_start_msg: ""
          ansible_callback_diy_runner_on_ok_msg: ""

      - name: Using alias vars (see ansible.cfg)
        ansible.builtin.debug:
          msg:
        when: False
        vars:
          ansible_callback_diy_playbook_on_task_start_msg: ""
          on_skipped_msg: "DIY output(via task vars): skipped example:\n\e[0m\e[38;5;4m\u25b6\u25b6 {{ ansible_callback_diy.result.task.name }}\n"
          on_skipped_msg_color: white

      - name: Just stdout
        ansible.builtin.command: echo some stdout
        vars:
          ansible_callback_diy_playbook_on_task_start_msg: "\n"
          ansible_callback_diy_runner_on_ok_msg: "{{ ansible_callback_diy.result.output.stdout }}\n"

      - name: Multiline output
        ansible.builtin.debug:
          msg: "{{ multiline }}"
        vars:
          ansible_callback_diy_playbook_on_task_start_msg: "\nDIY output(via task vars): task example: {{ ansible_callback_diy.task.name }}"
          multiline: "line\nline\nline"
          ansible_callback_diy_runner_on_ok_msg: |+2
            some
            {{ ansible_callback_diy.result.output.msg }}
            output

          ansible_callback_diy_playbook_on_task_start_msg_color: bright blue

      - name: Indentation
        ansible.builtin.debug:
          msg: "{{ item.msg }}"
        with_items:
          - { indent: 1, msg: one., color: red }
          - { indent: 2, msg: two.., color: yellow }
          - { indent: 3, msg: three..., color: bright yellow }
        vars:
          ansible_callback_diy_runner_item_on_ok_msg: "{{ ansible_callback_diy.result.output.msg | indent(item.indent, True) }}"
          ansible_callback_diy_runner_item_on_ok_msg_color: "{{ item.color }}"
          ansible_callback_diy_runner_on_ok_msg: "GO!!!"
          ansible_callback_diy_runner_on_ok_msg_color: bright green

      - name: Using lookup and template as file
        ansible.builtin.shell: "echo {% raw %}'output from {{ file_name }}'{% endraw %} &gt; {{ file_name }}"
        vars:
          ansible_callback_diy_playbook_on_task_start_msg: "\nDIY output(via task vars): task example: {{ ansible_callback_diy.task.name }}"
          file_name: diy_file_template_example
          ansible_callback_diy_runner_on_ok_msg: "{{ lookup('template', file_name) }}"

      - name: 'Look at top level vars available to the "runner_on_ok" callback'
        ansible.builtin.debug:
          msg: ''
        vars:
          ansible_callback_diy_playbook_on_task_start_msg: "\nDIY output(via task vars): task example: {{ ansible_callback_diy.task.name }}"
          ansible_callback_diy_runner_on_ok_msg: |+2
            {% for var in (ansible_callback_diy.top_level_var_names|reject('match','vars|ansible_callback_diy.*')) | sort %}
            {{ green }}{{ var }}:
              {{ white }}{{ lookup('vars', var) }}

            {% endfor %}
          ansible_callback_diy_runner_on_ok_msg_color: white

      - name: 'Look at event data available to the "runner_on_ok" callback'
        ansible.builtin.debug:
          msg: ''
        vars:
          ansible_callback_diy_playbook_on_task_start_msg: "\nDIY output(via task vars): task example: {{ ansible_callback_diy.task.name }}"
          ansible_callback_diy_runner_on_ok_msg: |+2
            {% for key in ansible_callback_diy | sort %}
            {{ green }}{{ key }}:
              {{ white }}{{ ansible_callback_diy[key] }}

            {% endfor %}
</pre>  <h3 id="authors">Authors</h3> <ul class="simple"> <li>Trevor Highfill (@theque5t)</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2021 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/community/general/diy_callback.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/community/general/diy_callback.html</a>
  </p>
</div>
