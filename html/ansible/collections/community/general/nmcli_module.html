<h1 id="community-general-nmcli-manage-networking">community.general.nmcli – Manage Networking</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/community/general">community.general collection</a> (version 3.8.1).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install community.general</code>.</p> <p>To use it in a playbook, specify: <code>community.general.nmcli</code>.</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Manage the network devices. Create, modify and manage various connection and device type e.g., ethernet, teams, bonds, vlans etc.</li> <li>On CentOS 8 and Fedora &gt;=29 like systems, the requirements can be met by installing the following packages: NetworkManager.</li> <li>On CentOS 7 and Fedora &lt;=28 like systems, the requirements can be met by installing the following packages: NetworkManager-tui.</li> <li>On Ubuntu and Debian like systems, the requirements can be met by installing the following packages: network-manager</li> <li>On openSUSE, the requirements can be met by installing the following packages: NetworkManager.</li> </ul>   <h2 id="requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>nmcli</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="2">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="2">  <b>ageingtime</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>300</div> </td> <td> <div>This is only used with bridge - [ageing-time &lt;0-1000000&gt;] the Ethernet MAC address aging time, in seconds.</div> </td> </tr> <tr> <td colspan="2">  <b>arp_interval</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>This is only used with bond - ARP interval.</div> </td> </tr> <tr> <td colspan="2">  <b>arp_ip_target</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>This is only used with bond - ARP IP target.</div> </td> </tr> <tr> <td colspan="2">  <b>autoconnect</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li><div>
<b>yes</b> ←</div></li> </ul> </td> <td> <div>Whether the connection should start on boot.</div> <div>Whether the connection profile can be automatically activated</div> </td> </tr> <tr> <td colspan="2">  <b>conn_name</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The name used to call the connection. Pattern is &lt;type&gt;[-&lt;ifname&gt;][-&lt;num&gt;].</div> </td> </tr> <tr> <td colspan="2">  <b>dhcp_client_id</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>DHCP Client Identifier sent to the DHCP server.</div> </td> </tr> <tr> <td colspan="2">  <b>dns4</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>A list of up to 3 dns servers.</div> <div>IPv4 format e.g. to add two IPv4 DNS server addresses, use <code>192.0.2.53 198.51.100.53</code>.</div> </td> </tr> <tr> <td colspan="2">  <b>dns4_ignore_auto</b>  <div> <span>boolean</span> </div> <div> added in 3.2.0 of community.general </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Ignore automatically configured IPv4 name servers.</div> </td> </tr> <tr> <td colspan="2">  <b>dns4_search</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>A list of DNS search domains.</div> </td> </tr> <tr> <td colspan="2">  <b>dns6</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>A list of up to 3 dns servers.</div> <div>IPv6 format e.g. to add two IPv6 DNS server addresses, use <code>2001:4860:4860::8888 2001:4860:4860::8844</code>.</div> </td> </tr> <tr> <td colspan="2">  <b>dns6_ignore_auto</b>  <div> <span>boolean</span> </div> <div> added in 3.2.0 of community.general </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Ignore automatically configured IPv6 name servers.</div> </td> </tr> <tr> <td colspan="2">  <b>dns6_search</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>A list of DNS search domains.</div> </td> </tr> <tr> <td colspan="2">  <b>downdelay</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>This is only used with bond - downdelay.</div> </td> </tr> <tr> <td colspan="2">  <b>egress</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>This is only used with VLAN - VLAN egress priority mapping.</div> </td> </tr> <tr> <td colspan="2">  <b>flags</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>This is only used with VLAN - flags.</div> </td> </tr> <tr> <td colspan="2">  <b>forwarddelay</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>15</div> </td> <td> <div>This is only used with bridge - [forward-delay &lt;2-30&gt;] STP forwarding delay, in seconds.</div> </td> </tr> <tr> <td colspan="2">  <b>gsm</b>  <div> <span>dictionary</span> </div> <div> added in 3.7.0 of community.general </div> </td> <td> </td> <td> <div>The configuration of the GSM connection.</div> <div>Note the list of suboption attributes may vary depending on which version of NetworkManager/nmcli is installed on the host.</div> <div>An up-to-date list of supported attributes can be found here: <a href="https://networkmanager.dev/docs/api/latest/settings-gsm.html">https://networkmanager.dev/docs/api/latest/settings-gsm.html</a>.</div> <div>For instance to use apn, pin, username and password: <code>{apn: provider.apn, pin: 1234, username: apn.username, password: apn.password}</code>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>apn</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The GPRS Access Point Name specifying the APN used when establishing a data session with the GSM-based network.</div> <div>The APN often determines how the user will be billed for their network usage and whether the user has access to the Internet or just a provider-specific walled-garden, so it is important to use the correct APN for the user's mobile broadband plan.</div> <div>The APN may only be composed of the characters a-z, 0-9, ., and - per GSM 03.60 Section 14.9.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>auto-config</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>When <code>true</code>, the settings such as <em>gsm.apn</em>, <em>gsm.username</em>, or <em>gsm.password</em> will default to values that match the network the modem will register to in the Mobile Broadband Provider database.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>device-id</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The device unique identifier (as given by the <code>WWAN</code> management service) which this connection applies to.</div> <div>If given, the connection will only apply to the specified device.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>home-only</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>When <code>true</code>, only connections to the home network will be allowed.</div> <div>Connections to roaming networks will not be made.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>mtu</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>0</div> </td> <td> <div>If non-zero, only transmit packets of the specified size or smaller, breaking larger packets up into multiple Ethernet frames.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>network-id</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The Network ID (GSM LAI format, ie MCC-MNC) to force specific network registration.</div> <div>If the Network ID is specified, NetworkManager will attempt to force the device to register only on the specified network.</div> <div>This can be used to ensure that the device does not roam when direct roaming control of the device is not otherwise possible.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>number</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Legacy setting that used to help establishing PPP data sessions for GSM-based modems.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>password</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The password used to authenticate with the network, if required.</div> <div>Many providers do not require a password, or accept any password.</div> <div>But if a password is required, it is specified here.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>password-flags</b>  <div> <span>integer</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>0</li> <li>1</li> <li>2</li> <li>4</li> </ul> <b>Default:</b><br><div>0</div> </td> <td> <div>NMSettingSecretFlags indicating how to handle the <em>password</em> property.</div> <div>Following choices are allowed: <code>0</code> <b>NONE</b>: The system is responsible for providing and storing this secret (default), <code>1</code> <b>AGENT_OWNED</b>: A user secret agent is responsible for providing and storing this secret; when it is required agents will be asked to retrieve it <code>2</code> <b>NOT_SAVED</b>: This secret should not be saved, but should be requested from the user each time it is needed <code>4</code> <b>NOT_REQUIRED</b>: In situations where it cannot be automatically determined that the secret is required (some VPNs and PPP providers do not require all secrets) this flag indicates that the specific secret is not required.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>pin</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>If the SIM is locked with a PIN it must be unlocked before any other operations are requested.</div> <div>Specify the PIN here to allow operation of the device.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>pin-flags</b>  <div> <span>integer</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>0</li> <li>1</li> <li>2</li> <li>4</li> </ul> <b>Default:</b><br><div>0</div> </td> <td> <div>NMSettingSecretFlags indicating how to handle the <em>gsm.pin</em> property.</div> <div>See <em>gsm.password-flags</em> for NMSettingSecretFlags choices.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>sim-id</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The SIM card unique identifier (as given by the <code>WWAN</code> management service) which this connection applies to.</div> <div>If given, the connection will apply to any device also allowed by <em>gsm.device-id</em> which contains a SIM card matching the given identifier.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>sim-operator-id</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>A MCC/MNC string like <code>310260</code> or <code>21601I</code> identifying the specific mobile network operator which this connection applies to.</div> <div>If given, the connection will apply to any device also allowed by <em>gsm.device-id</em> and <em>gsm.sim-id</em> which contains a SIM card provisioned by the given operator.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>username</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The username used to authenticate with the network, if required.</div> <div>Many providers do not require a username, or accept any username.</div> <div>But if a username is required, it is specified here.</div> </td> </tr> <tr> <td colspan="2">  <b>gw4</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The IPv4 gateway for this interface.</div> <div>Use the format <code>192.0.2.1</code>.</div> <div>This parameter is mutually_exclusive with never_default4 parameter.</div> </td> </tr> <tr> <td colspan="2">  <b>gw4_ignore_auto</b>  <div> <span>boolean</span> </div> <div> added in 3.2.0 of community.general </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Ignore automatically configured IPv4 routes.</div> </td> </tr> <tr> <td colspan="2">  <b>gw6</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The IPv6 gateway for this interface.</div> <div>Use the format <code>2001:db8::1</code>.</div> </td> </tr> <tr> <td colspan="2">  <b>gw6_ignore_auto</b>  <div> <span>boolean</span> </div> <div> added in 3.2.0 of community.general </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Ignore automatically configured IPv6 routes.</div> </td> </tr> <tr> <td colspan="2">  <b>hairpin</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li><div>
<b>yes</b> ←</div></li> </ul> </td> <td> <div>This is only used with 'bridge-slave' - 'hairpin mode' for the slave, which allows frames to be sent back out through the slave the frame was received on.</div> </td> </tr> <tr> <td colspan="2">  <b>hellotime</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>2</div> </td> <td> <div>This is only used with bridge - [hello-time &lt;1-10&gt;] STP hello time, in seconds.</div> </td> </tr> <tr> <td colspan="2">  <b>ifname</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The interface to bind the connection to.</div> <div>The connection will only be applicable to this interface name.</div> <div>A special value of <code>'*'</code> can be used for interface-independent connections.</div> <div>The ifname argument is mandatory for all connection types except bond, team, bridge and vlan.</div> <div>This parameter defaults to <code>conn_name</code> when left unset.</div> </td> </tr> <tr> <td colspan="2">  <b>ignore_unsupported_suboptions</b>  <div> <span>boolean</span> </div> <div> added in 3.6.0 of community.general </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Ignore suboptions which are invalid or unsupported by the version of NetworkManager/nmcli installed on the host.</div> <div>Only <em>wifi</em> and <em>wifi_sec</em> options are currently affected.</div> </td> </tr> <tr> <td colspan="2">  <b>ingress</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>This is only used with VLAN - VLAN ingress priority mapping.</div> </td> </tr> <tr> <td colspan="2">  <b>ip4</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The IPv4 address to this interface.</div> <div>Use the format <code>192.0.2.24/24</code>.</div> <div>If defined and <em>method4</em> is not specified, automatically set <code>ipv4.method</code> to <code>manual</code>.</div> </td> </tr> <tr> <td colspan="2">  <b>ip6</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The IPv6 address to this interface.</div> <div>Use the format <code>abbe::cafe</code>.</div> <div>If defined and <em>method6</em> is not specified, automatically set <code>ipv6.method</code> to <code>manual</code>.</div> </td> </tr> <tr> <td colspan="2">  <b>ip_tunnel_dev</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>This is used with GRE/IPIP/SIT - parent device this GRE/IPIP/SIT tunnel, can use ifname.</div> </td> </tr> <tr> <td colspan="2">  <b>ip_tunnel_input_key</b>  <div> <span>string</span> </div> <div> added in 3.6.0 of community.general </div> </td> <td> </td> <td> <div>The key used for tunnel input packets.</div> <div>Only used when <em>type=gre</em>.</div> </td> </tr> <tr> <td colspan="2">  <b>ip_tunnel_local</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>This is used with GRE/IPIP/SIT - GRE/IPIP/SIT local IP address.</div> </td> </tr> <tr> <td colspan="2">  <b>ip_tunnel_output_key</b>  <div> <span>string</span> </div> <div> added in 3.6.0 of community.general </div> </td> <td> </td> <td> <div>The key used for tunnel output packets.</div> <div>Only used when <em>type=gre</em>.</div> </td> </tr> <tr> <td colspan="2">  <b>ip_tunnel_remote</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>This is used with GRE/IPIP/SIT - GRE/IPIP/SIT destination IP address.</div> </td> </tr> <tr> <td colspan="2">  <b>mac</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>MAC address of the connection.</div> <div>Note this requires a recent kernel feature, originally introduced in 3.15 upstream kernel.</div> </td> </tr> <tr> <td colspan="2">  <b>master</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Master &lt;master (ifname, or connection UUID or conn_name) of bridge, team, bond master connection profile.</div> </td> </tr> <tr> <td colspan="2">  <b>maxage</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>20</div> </td> <td> <div>This is only used with bridge - [max-age &lt;6-42&gt;] STP maximum message age, in seconds.</div> </td> </tr> <tr> <td colspan="2">  <b>may_fail4</b>  <div> <span>boolean</span> </div> <div> added in 3.3.0 of community.general </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li><div>
<b>yes</b> ←</div></li> </ul> </td> <td> <div>If you need <em>ip4</em> configured before <code>network-online.target</code> is reached, set this option to <code>false</code>.</div> </td> </tr> <tr> <td colspan="2">  <b>method4</b>  <div> <span>string</span> </div> <div> added in 2.2.0 of community.general </div> </td> <td> <ul>
<b>Choices:</b> <li>auto</li> <li>link-local</li> <li>manual</li> <li>shared</li> <li>disabled</li> </ul> </td> <td> <div>Configuration method to be used for IPv4.</div> <div>If <em>ip4</em> is set, <code>ipv4.method</code> is automatically set to <code>manual</code> and this parameter is not needed.</div> </td> </tr> <tr> <td colspan="2">  <b>method6</b>  <div> <span>string</span> </div> <div> added in 2.2.0 of community.general </div> </td> <td> <ul>
<b>Choices:</b> <li>ignore</li> <li>auto</li> <li>dhcp</li> <li>link-local</li> <li>manual</li> <li>shared</li> <li>disabled</li> </ul> </td> <td> <div>Configuration method to be used for IPv6</div> <div>If <em>ip6</em> is set, <code>ipv6.method</code> is automatically set to <code>manual</code> and this parameter is not needed.</div> <div>
<code>disabled</code> was added in community.general 3.3.0.</div> </td> </tr> <tr> <td colspan="2">  <b>miimon</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>This is only used with bond - miimon.</div> <div>This parameter defaults to <code>100</code> when unset.</div> </td> </tr> <tr> <td colspan="2">  <b>mode</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>802.3ad</li> <li>active-backup</li> <li>balance-alb</li> <li><div>
<b>balance-rr</b> ←</div></li> <li>balance-tlb</li> <li>balance-xor</li> <li>broadcast</li> </ul> </td> <td> <div>This is the type of device or network connection that you wish to create for a bond or bridge.</div> </td> </tr> <tr> <td colspan="2">  <b>mtu</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>The connection MTU, e.g. 9000. This can't be applied when creating the interface and is done once the interface has been created.</div> <div>Can be used when modifying Team, VLAN, Ethernet (Future plans to implement wifi, gsm, pppoe, infiniband)</div> <div>This parameter defaults to <code>1500</code> when unset.</div> </td> </tr> <tr> <td colspan="2">  <b>never_default4</b>  <div> <span>boolean</span> </div> <div> added in 2.0.0 of community.general </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Set as default route.</div> <div>This parameter is mutually_exclusive with gw4 parameter.</div> </td> </tr> <tr> <td colspan="2">  <b>path_cost</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>100</div> </td> <td> <div>This is only used with 'bridge-slave' - [&lt;1-65535&gt;] - STP port cost for destinations via this slave.</div> </td> </tr> <tr> <td colspan="2">  <b>primary</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>This is only used with bond and is the primary interface name (for "active-backup" mode), this is the usually the 'ifname'.</div> </td> </tr> <tr> <td colspan="2">  <b>priority</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>128</div> </td> <td> <div>This is only used with 'bridge' - sets STP priority.</div> </td> </tr> <tr> <td colspan="2">  <b>route_metric4</b>  <div> <span>integer</span> </div> <div> added in 2.0.0 of community.general </div> </td> <td> </td> <td> <div>Set metric level of ipv4 routes configured on interface.</div> </td> </tr> <tr> <td colspan="2">  <b>routes4</b>  <div> <span>list</span> / <span>elements=string</span> </div> <div> added in 2.0.0 of community.general </div> </td> <td> </td> <td> <div>The list of ipv4 routes.</div> <div>Use the format '192.0.3.0/24 192.0.2.1'</div> </td> </tr> <tr> <td colspan="2">  <b>routing_rules4</b>  <div> <span>list</span> / <span>elements=string</span> </div> <div> added in 3.3.0 of community.general </div> </td> <td> </td> <td> <div>Is the same as in an <code>ip route add</code> command, except always requires specifying a priority.</div> </td> </tr> <tr> <td colspan="2">  <b>runner</b>  <div> <span>string</span> </div> <div> added in 3.4.0 of community.general </div> </td> <td> <ul>
<b>Choices:</b> <li>broadcast</li> <li><div>
<b>roundrobin</b> ←</div></li> <li>activebackup</li> <li>loadbalance</li> <li>lacp</li> </ul> </td> <td> <div>This is the type of device or network connection that you wish to create for a team.</div> </td> </tr> <tr> <td colspan="2">  <b>runner_hwaddr_policy</b>  <div> <span>string</span> </div> <div> added in 3.4.0 of community.general </div> </td> <td> <ul>
<b>Choices:</b> <li>same_all</li> <li>by_active</li> <li>only_active</li> </ul> </td> <td> <div>This defines the policy of how hardware addresses of team device and port devices should be set during the team lifetime.</div> </td> </tr> <tr> <td colspan="2">  <b>slavepriority</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>32</div> </td> <td> <div>This is only used with 'bridge-slave' - [&lt;0-63&gt;] - STP priority of this slave.</div> </td> </tr> <tr> <td colspan="2">  <b>ssid</b>  <div> <span>string</span> </div> <div> added in 3.0.0 of community.general </div> </td> <td> </td> <td> <div>Name of the Wireless router or the access point.</div> </td> </tr> <tr> <td colspan="2">  <b>state</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>absent</li> <li>present</li> </ul> </td> <td> <div>Whether the device should exist or not, taking action if the state is different from what is stated.</div> </td> </tr> <tr> <td colspan="2">  <b>stp</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li><div>
<b>yes</b> ←</div></li> </ul> </td> <td> <div>This is only used with bridge and controls whether Spanning Tree Protocol (STP) is enabled for this bridge.</div> </td> </tr> <tr> <td colspan="2">  <b>type</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>bond</li> <li>bond-slave</li> <li>bridge</li> <li>bridge-slave</li> <li>dummy</li> <li>ethernet</li> <li>generic</li> <li>gre</li> <li>infiniband</li> <li>ipip</li> <li>sit</li> <li>team</li> <li>team-slave</li> <li>vlan</li> <li>vxlan</li> <li>wifi</li> <li>gsm</li> </ul> </td> <td> <div>This is the type of device or network connection that you wish to create or modify.</div> <div>Type <code>dummy</code> is added in community.general 3.5.0.</div> <div>Type <code>generic</code> is added in Ansible 2.5.</div> <div>Type <code>infiniband</code> is added in community.general 2.0.0.</div> <div>Type <code>gsm</code> is added in community.general 3.7.0.</div> </td> </tr> <tr> <td colspan="2">  <b>updelay</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>This is only used with bond - updelay.</div> </td> </tr> <tr> <td colspan="2">  <b>vlandev</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>This is only used with VLAN - parent device this VLAN is on, can use ifname.</div> </td> </tr> <tr> <td colspan="2">  <b>vlanid</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>This is only used with VLAN - VLAN ID in range &lt;0-4095&gt;.</div> </td> </tr> <tr> <td colspan="2">  <b>vxlan_id</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>This is only used with VXLAN - VXLAN ID.</div> </td> </tr> <tr> <td colspan="2">  <b>vxlan_local</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>This is only used with VXLAN - VXLAN local IP address.</div> </td> </tr> <tr> <td colspan="2">  <b>vxlan_remote</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>This is only used with VXLAN - VXLAN destination IP address.</div> </td> </tr> <tr> <td colspan="2">  <b>wifi</b>  <div> <span>dictionary</span> </div> <div> added in 3.5.0 of community.general </div> </td> <td> </td> <td> <div>The configuration of the WiFi connection.</div> <div>Note the list of suboption attributes may vary depending on which version of NetworkManager/nmcli is installed on the host.</div> <div>An up-to-date list of supported attributes can be found here: <a href="https://networkmanager.dev/docs/api/latest/settings-802-11-wireless.html">https://networkmanager.dev/docs/api/latest/settings-802-11-wireless.html</a>.</div> <div>For instance to create a hidden AP mode WiFi connection: <code>{hidden: true, mode: ap}</code>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>ap-isolation</b>  <div> <span>integer</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>-1</li> <li>0</li> <li>1</li> </ul> <b>Default:</b><br><div>-1</div> </td> <td> <div>Configures AP isolation, which prevents communication between wireless devices connected to this AP.</div> <div>This property can be set to a value different from <code>-1</code> only when the interface is configured in AP mode.</div> <div>If set to <code>1</code>, devices are not able to communicate with each other. This increases security because it protects devices against attacks from other clients in the network. At the same time, it prevents devices to access resources on the same wireless networks as file shares, printers, etc.</div> <div>If set to <code>0</code>, devices can talk to each other.</div> <div>When set to <code>-1</code>, the global default is used; in case the global default is unspecified it is assumed to be <code>0</code>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>assigned-mac-address</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The new field for the cloned MAC address.</div> <div>It can be either a hardware address in ASCII representation, or one of the special values <code>preserve</code>, <code>permanent</code>, <code>random</code> or <code>stable</code>.</div> <div>This field replaces the deprecated <em>cloned-mac-address</em> on D-Bus, which can only contain explicit hardware addresses.</div> <div>Note that this property only exists in D-Bus API. libnm and nmcli continue to call this property <em>cloned-mac-address</em>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>band</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>a</li> <li>bg</li> </ul> </td> <td> <div>802.11 frequency band of the network.</div> <div>One of <code>a</code> for 5GHz 802.11a or <code>bg</code> for 2.4GHz 802.11.</div> <div>This will lock associations to the Wi-Fi network to the specific band, so for example, if <code>a</code> is specified, the device will not associate with the same network in the 2.4GHz band even if the network's settings are compatible.</div> <div>This setting depends on specific driver capability and may not work with all drivers.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>bssid</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>If specified, directs the device to only associate with the given access point.</div> <div>This capability is highly driver dependent and not supported by all devices.</div> <div>Note this property does not control the BSSID used when creating an Ad-Hoc network and is unlikely to in the future.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>channel</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>0</div> </td> <td> <div>Wireless channel to use for the Wi-Fi connection.</div> <div>The device will only join (or create for Ad-Hoc networks) a Wi-Fi network on the specified channel.</div> <div>Because channel numbers overlap between bands, this property also requires the <em>band</em> property to be set.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>cloned-mac-address</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>This D-Bus field is deprecated in favor of <em>assigned-mac-address</em> which is more flexible and allows specifying special variants like <code>random</code>.</div> <div>For libnm and nmcli, this field is called <em>cloned-mac-address</em>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>generate-mac-address-mask</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>With <em>cloned-mac-address</em> setting <code>random</code> or <code>stable</code>, by default all bits of the MAC address are scrambled and a locally-administered, unicast MAC address is created. This property allows to specify that certain bits are fixed.</div> <div>Note that the least significant bit of the first MAC address will always be unset to create a unicast MAC address.</div> <div>If the property is <code>null</code>, it is eligible to be overwritten by a default connection setting.</div> <div>If the value is still c(null) or an empty string, the default is to create a locally-administered, unicast MAC address.</div> <div>If the value contains one MAC address, this address is used as mask. The set bits of the mask are to be filled with the current MAC address of the device, while the unset bits are subject to randomization.</div> <div>Setting <code>FE:FF:FF:00:00:00</code> means to preserve the OUI of the current MAC address and only randomize the lower 3 bytes using the <code>random</code> or <code>stable</code> algorithm.</div> <div>If the value contains one additional MAC address after the mask, this address is used instead of the current MAC address to fill the bits that shall not be randomized.</div> <div>For example, a value of <code>FE:FF:FF:00:00:00 68:F7:28:00:00:00</code> will set the OUI of the MAC address to 68:F7:28, while the lower bits are randomized.</div> <div>A value of <code>02:00:00:00:00:00 00:00:00:00:00:00</code> will create a fully scrambled globally-administered, burned-in MAC address.</div> <div>If the value contains more than one additional MAC addresses, one of them is chosen randomly. For example, <code>02:00:00:00:00:00 00:00:00:00:00:00 02:00:00:00:00:00</code> will create a fully scrambled MAC address, randomly locally or globally administered.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>hidden</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>If <code>true</code>, indicates that the network is a non-broadcasting network that hides its SSID. This works both in infrastructure and AP mode.</div> <div>In infrastructure mode, various workarounds are used for a more reliable discovery of hidden networks, such as probe-scanning the SSID. However, these workarounds expose inherent insecurities with hidden SSID networks, and thus hidden SSID networks should be used with caution.</div> <div>In AP mode, the created network does not broadcast its SSID.</div> <div>Note that marking the network as hidden may be a privacy issue for you (in infrastructure mode) or client stations (in AP mode), as the explicit probe-scans are distinctly recognizable on the air.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>mac-address</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>If specified, this connection will only apply to the Wi-Fi device whose permanent MAC address matches.</div> <div>This property does not change the MAC address of the device (for example for MAC spoofing).</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>mac-address-blacklist</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>A list of permanent MAC addresses of Wi-Fi devices to which this connection should never apply.</div> <div>Each MAC address should be given in the standard hex-digits-and-colons notation (for example, <code>00:11:22:33:44:55</code>).</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>mac-address-randomization</b>  <div> <span>integer</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>0</li> <li>1</li> <li>2</li> </ul> <b>Default:</b><br><div>0</div> </td> <td> <div>One of <code>0</code> (never randomize unless the user has set a global default to randomize and the supplicant supports randomization), <code>1</code> (never randomize the MAC address), or <code>2</code> (always randomize the MAC address).</div> <div>This property is deprecated for <em>cloned-mac-address</em>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>mode</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>infrastructure</b> ←</div></li> <li>mesh</li> <li>adhoc</li> <li>ap</li> </ul> </td> <td> <div>Wi-Fi network mode. If blank, <code>infrastructure</code> is assumed.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>mtu</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>0</div> </td> <td> <div>If non-zero, only transmit packets of the specified size or smaller, breaking larger packets up into multiple Ethernet frames.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>powersave</b>  <div> <span>integer</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>0</li> <li>1</li> <li>2</li> <li>3</li> </ul> <b>Default:</b><br><div>0</div> </td> <td> <div>One of <code>2</code> (disable Wi-Fi power saving), <code>3</code> (enable Wi-Fi power saving), <code>1</code> (don't touch currently configure setting) or <code>0</code> (use the globally configured value).</div> <div>All other values are reserved.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>rate</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>0</div> </td> <td> <div>If non-zero, directs the device to only use the specified bitrate for communication with the access point.</div> <div>Units are in Kb/s, so for example <code>5500</code> = 5.5 Mbit/s.</div> <div>This property is highly driver dependent and not all devices support setting a static bitrate.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>tx-power</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>0</div> </td> <td> <div>If non-zero, directs the device to use the specified transmit power.</div> <div>Units are dBm.</div> <div>This property is highly driver dependent and not all devices support setting a static transmit power.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>wake-on-wlan</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>1</div> </td> <td> <div>The NMSettingWirelessWakeOnWLan options to enable. Not all devices support all options.</div> <div>May be any combination of <code>NM_SETTING_WIRELESS_WAKE_ON_WLAN_ANY</code> (<code>0x2</code>), <code>NM_SETTING_WIRELESS_WAKE_ON_WLAN_DISCONNECT</code> (<code>0x4</code>), <code>NM_SETTING_WIRELESS_WAKE_ON_WLAN_MAGIC</code> (<code>0x8</code>), <code>NM_SETTING_WIRELESS_WAKE_ON_WLAN_GTK_REKEY_FAILURE</code> (<code>0x10</code>), <code>NM_SETTING_WIRELESS_WAKE_ON_WLAN_EAP_IDENTITY_REQUEST</code> (<code>0x20</code>), <code>NM_SETTING_WIRELESS_WAKE_ON_WLAN_4WAY_HANDSHAKE</code> (<code>0x40</code>), <code>NM_SETTING_WIRELESS_WAKE_ON_WLAN_RFKILL_RELEASE</code> (<code>0x80</code>), <code>NM_SETTING_WIRELESS_WAKE_ON_WLAN_TCP</code> (<code>0x100</code>) or the special values <code>0x1</code> (to use global settings) and <code>0x8000</code> (to disable management of Wake-on-LAN in NetworkManager).</div> <div>Note the option values' sum must be specified in order to combine multiple options.</div> </td> </tr> <tr> <td colspan="2">  <b>wifi_sec</b>  <div> <span>dictionary</span> </div> <div> added in 3.0.0 of community.general </div> </td> <td> </td> <td> <div>The security configuration of the WiFi connection.</div> <div>Note the list of suboption attributes may vary depending on which version of NetworkManager/nmcli is installed on the host.</div> <div>An up-to-date list of supported attributes can be found here: <a href="https://networkmanager.dev/docs/api/latest/settings-802-11-wireless-security.html">https://networkmanager.dev/docs/api/latest/settings-802-11-wireless-security.html</a>.</div> <div>For instance to use common WPA-PSK auth with a password: <code>{key-mgmt: wpa-psk, psk: my_password}</code>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>auth-alg</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>open</li> <li>shared</li> <li>leap</li> </ul> </td> <td> <div>When WEP is used (that is, if <em>key-mgmt</em> = <code>none</code> or <code>ieee8021x</code>) indicate the 802.11 authentication algorithm required by the AP here.</div> <div>One of <code>open</code> for Open System, <code>shared</code> for Shared Key, or <code>leap</code> for Cisco LEAP.</div> <div>When using Cisco LEAP (that is, if <em>key-mgmt=ieee8021x</em> and <em>auth-alg=leap</em>) the <em>leap-username</em> and <em>leap-password</em> properties must be specified.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>fils</b>  <div> <span>integer</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>0</li> <li>1</li> <li>2</li> <li>3</li> </ul> <b>Default:</b><br><div>0</div> </td> <td> <div>Indicates whether Fast Initial Link Setup (802.11ai) must be enabled for the connection.</div> <div>One of <code>0</code> (use global default value), <code>1</code> (disable FILS), <code>2</code> (enable FILS if the supplicant and the access point support it) or <code>3</code> (enable FILS and fail if not supported).</div> <div>When set to <code>0</code> and no global default is set, FILS will be optionally enabled.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>group</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>wep40</li> <li>wep104</li> <li>tkip</li> <li>ccmp</li> </ul> </td> <td> <div>A list of group/broadcast encryption algorithms which prevents connections to Wi-Fi networks that do not utilize one of the algorithms in the list.</div> <div>For maximum compatibility leave this property empty.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>key-mgmt</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>none</li> <li>ieee8021x</li> <li>owe</li> <li>wpa-psk</li> <li>sae</li> <li>wpa-eap</li> <li>wpa-eap-suite-b-192</li> </ul> </td> <td> <div>Key management used for the connection.</div> <div>One of <code>none</code> (WEP or no password protection), <code>ieee8021x</code> (Dynamic WEP), <code>owe</code> (Opportunistic Wireless Encryption), <code>wpa-psk</code> (WPA2 + WPA3 personal), <code>sae</code> (WPA3 personal only), <code>wpa-eap</code> (WPA2 + WPA3 enterprise) or <code>wpa-eap-suite-b-192</code> (WPA3 enterprise only).</div> <div>This property must be set for any Wi-Fi connection that uses security.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>leap-password</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The login password for legacy LEAP connections (that is, if <em>key-mgmt=ieee8021x</em> and <em>auth-alg=leap</em>).</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>leap-password-flags</b>  <div> <span>list</span> / <span>elements=integer</span> </div> </td> <td> </td> <td> <div>Flags indicating how to handle the <em>leap-password</em> property.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>leap-username</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The login username for legacy LEAP connections (that is, if <em>key-mgmt=ieee8021x</em> and <em>auth-alg=leap</em>).</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>pairwise</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>tkip</li> <li>ccmp</li> </ul> </td> <td> <div>A list of pairwise encryption algorithms which prevents connections to Wi-Fi networks that do not utilize one of the algorithms in the list.</div> <div>For maximum compatibility leave this property empty.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>pmf</b>  <div> <span>integer</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>0</li> <li>1</li> <li>2</li> <li>3</li> </ul> <b>Default:</b><br><div>0</div> </td> <td> <div>Indicates whether Protected Management Frames (802.11w) must be enabled for the connection.</div> <div>One of <code>0</code> (use global default value), <code>1</code> (disable PMF), <code>2</code> (enable PMF if the supplicant and the access point support it) or <code>3</code> (enable PMF and fail if not supported).</div> <div>When set to <code>0</code> and no global default is set, PMF will be optionally enabled.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>proto</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>wpa</li> <li>rsn</li> </ul> </td> <td> <div>List of strings specifying the allowed WPA protocol versions to use.</div> <div>Each element may be <code>wpa</code> (allow WPA) or <code>rsn</code> (allow WPA2/RSN).</div> <div>If not specified, both WPA and RSN connections are allowed.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>psk</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Pre-Shared-Key for WPA networks.</div> <div>For WPA-PSK, it is either an ASCII passphrase of 8 to 63 characters that is (as specified in the 802.11i standard) hashed to derive the actual key, or the key in form of 64 hexadecimal character.</div> <div>The WPA3-Personal networks use a passphrase of any length for SAE authentication.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>psk-flags</b>  <div> <span>list</span> / <span>elements=integer</span> </div> </td> <td> </td> <td> <div>Flags indicating how to handle the <em>psk</em> property.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>wep-key-flags</b>  <div> <span>list</span> / <span>elements=integer</span> </div> </td> <td> </td> <td> <div>Flags indicating how to handle the <em>wep-key0</em>, <em>wep-key1</em>, <em>wep-key2</em>, and <em>wep-key3</em> properties.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>wep-key-type</b>  <div> <span>integer</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>1</li> <li>2</li> </ul> </td> <td> <div>Controls the interpretation of WEP keys.</div> <div>Allowed values are <code>1</code>, in which case the key is either a 10- or 26-character hexadecimal string, or a 5- or 13-character ASCII password; or <code>2</code>, in which case the passphrase is provided as a string and will be hashed using the de-facto MD5 method to derive the actual WEP key.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>wep-key0</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Index 0 WEP key. This is the WEP key used in most networks.</div> <div>See the <em>wep-key-type</em> property for a description of how this key is interpreted.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>wep-key1</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Index 1 WEP key. This WEP index is not used by most networks.</div> <div>See the <em>wep-key-type</em> property for a description of how this key is interpreted.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>wep-key2</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Index 2 WEP key. This WEP index is not used by most networks.</div> <div>See the <em>wep-key-type</em> property for a description of how this key is interpreted.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>wep-key3</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Index 3 WEP key. This WEP index is not used by most networks.</div> <div>See the <em>wep-key-type</em> property for a description of how this key is interpreted.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>wep-tx-keyidx</b>  <div> <span>integer</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>0</li> <li>1</li> <li>2</li> <li>3</li> </ul> <b>Default:</b><br><div>0</div> </td> <td> <div>When static WEP is used (that is, if <em>key-mgmt=none</em>) and a non-default WEP key index is used by the AP, put that WEP key index here.</div> <div>Valid values are <code>0</code> (default key) through <code>3</code>.</div> <div>Note that some consumer access points (like the Linksys WRT54G) number the keys <code>1</code> - <code>4</code>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>wps-method</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>0</div> </td> <td> <div>Flags indicating which mode of WPS is to be used if any.</div> <div>There is little point in changing the default setting as NetworkManager will automatically determine whether it is feasible to start WPS enrollment from the Access Point capabilities.</div> <div>WPS can be disabled by setting this property to a value of <code>1</code>.</div> </td> </tr> <tr> <td colspan="2">  <b>zone</b>  <div> <span>string</span> </div> <div> added in 2.0.0 of community.general </div> </td> <td> </td> <td> <div>The trust level of the connection.</div> <div>When updating this property on a currently activated connection, the change takes effect immediately.</div> </td> </tr> </table> <br>  <h2 id="examples">Examples</h2> <pre data-language="yaml+jinja"># These examples are using the following inventory:
#
# ## Directory layout:
#
# |_/inventory/cloud-hosts
# |           /group_vars/openstack-stage.yml
# |           /host_vars/controller-01.openstack.host.com
# |           /host_vars/controller-02.openstack.host.com
# |_/playbook/library/nmcli.py
# |          /playbook-add.yml
# |          /playbook-del.yml
# ```
#
# ## inventory examples
# ### groups_vars
# ```yml
# ---
# #devops_os_define_network
# storage_gw: "192.0.2.254"
# external_gw: "198.51.100.254"
# tenant_gw: "203.0.113.254"
#
# #Team vars
# nmcli_team:
#   - conn_name: tenant
#     ip4: '{{ tenant_ip }}'
#     gw4: '{{ tenant_gw }}'
#   - conn_name: external
#     ip4: '{{ external_ip }}'
#     gw4: '{{ external_gw }}'
#   - conn_name: storage
#     ip4: '{{ storage_ip }}'
#     gw4: '{{ storage_gw }}'
# nmcli_team_slave:
#   - conn_name: em1
#     ifname: em1
#     master: tenant
#   - conn_name: em2
#     ifname: em2
#     master: tenant
#   - conn_name: p2p1
#     ifname: p2p1
#     master: storage
#   - conn_name: p2p2
#     ifname: p2p2
#     master: external
#
# #bond vars
# nmcli_bond:
#   - conn_name: tenant
#     ip4: '{{ tenant_ip }}'
#     gw4: ''
#     mode: balance-rr
#   - conn_name: external
#     ip4: '{{ external_ip }}'
#     gw4: ''
#     mode: balance-rr
#   - conn_name: storage
#     ip4: '{{ storage_ip }}'
#     gw4: '{{ storage_gw }}'
#     mode: balance-rr
# nmcli_bond_slave:
#   - conn_name: em1
#     ifname: em1
#     master: tenant
#   - conn_name: em2
#     ifname: em2
#     master: tenant
#   - conn_name: p2p1
#     ifname: p2p1
#     master: storage
#   - conn_name: p2p2
#     ifname: p2p2
#     master: external
#
# #ethernet vars
# nmcli_ethernet:
#   - conn_name: em1
#     ifname: em1
#     ip4: '{{ tenant_ip }}'
#     gw4: '{{ tenant_gw }}'
#   - conn_name: em2
#     ifname: em2
#     ip4: '{{ tenant_ip1 }}'
#     gw4: '{{ tenant_gw }}'
#   - conn_name: p2p1
#     ifname: p2p1
#     ip4: '{{ storage_ip }}'
#     gw4: '{{ storage_gw }}'
#   - conn_name: p2p2
#     ifname: p2p2
#     ip4: '{{ external_ip }}'
#     gw4: '{{ external_gw }}'
# ```
#
# ### host_vars
# ```yml
# ---
# storage_ip: "192.0.2.91/23"
# external_ip: "198.51.100.23/21"
# tenant_ip: "203.0.113.77/23"
# ```



## playbook-add.yml example

---
- hosts: openstack-stage
  remote_user: root
  tasks:

  - name: Install needed network manager libs
    ansible.builtin.package:
      name:
        - NetworkManager-libnm
        - nm-connection-editor
        - libsemanage-python
        - policycoreutils-python
      state: present

##### Working with all cloud nodes - Teaming
  - name: Try nmcli add team - conn_name only &amp; ip4 gw4
    community.general.nmcli:
      type: team
      conn_name: '{{ item.conn_name }}'
      ip4: '{{ item.ip4 }}'
      gw4: '{{ item.gw4 }}'
      state: present
    with_items:
      - '{{ nmcli_team }}'

  - name: Try nmcli add teams-slave
    community.general.nmcli:
      type: team-slave
      conn_name: '{{ item.conn_name }}'
      ifname: '{{ item.ifname }}'
      master: '{{ item.master }}'
      state: present
    with_items:
      - '{{ nmcli_team_slave }}'

###### Working with all cloud nodes - Bonding
  - name: Try nmcli add bond - conn_name only &amp; ip4 gw4 mode
    community.general.nmcli:
      type: bond
      conn_name: '{{ item.conn_name }}'
      ip4: '{{ item.ip4 }}'
      gw4: '{{ item.gw4 }}'
      mode: '{{ item.mode }}'
      state: present
    with_items:
      - '{{ nmcli_bond }}'

  - name: Try nmcli add bond-slave
    community.general.nmcli:
      type: bond-slave
      conn_name: '{{ item.conn_name }}'
      ifname: '{{ item.ifname }}'
      master: '{{ item.master }}'
      state: present
    with_items:
      - '{{ nmcli_bond_slave }}'

##### Working with all cloud nodes - Ethernet
  - name: Try nmcli add Ethernet - conn_name only &amp; ip4 gw4
    community.general.nmcli:
      type: ethernet
      conn_name: '{{ item.conn_name }}'
      ip4: '{{ item.ip4 }}'
      gw4: '{{ item.gw4 }}'
      state: present
    with_items:
      - '{{ nmcli_ethernet }}'

## playbook-del.yml example
- hosts: openstack-stage
  remote_user: root
  tasks:

  - name: Try nmcli del team - multiple
    community.general.nmcli:
      conn_name: '{{ item.conn_name }}'
      state: absent
    with_items:
      - conn_name: em1
      - conn_name: em2
      - conn_name: p1p1
      - conn_name: p1p2
      - conn_name: p2p1
      - conn_name: p2p2
      - conn_name: tenant
      - conn_name: storage
      - conn_name: external
      - conn_name: team-em1
      - conn_name: team-em2
      - conn_name: team-p1p1
      - conn_name: team-p1p2
      - conn_name: team-p2p1
      - conn_name: team-p2p2

  - name: Add an Ethernet connection with static IP configuration
    community.general.nmcli:
      conn_name: my-eth1
      ifname: eth1
      type: ethernet
      ip4: 192.0.2.100/24
      gw4: 192.0.2.1
      state: present

  - name: Add an Team connection with static IP configuration
    community.general.nmcli:
      conn_name: my-team1
      ifname: my-team1
      type: team
      ip4: 192.0.2.100/24
      gw4: 192.0.2.1
      state: present
      autoconnect: yes

  - name: Optionally, at the same time specify IPv6 addresses for the device
    community.general.nmcli:
      conn_name: my-eth1
      ifname: eth1
      type: ethernet
      ip4: 192.0.2.100/24
      gw4: 192.0.2.1
      ip6: 2001:db8::cafe
      gw6: 2001:db8::1
      state: present

  - name: Add two IPv4 DNS server addresses
    community.general.nmcli:
      conn_name: my-eth1
      type: ethernet
      dns4:
      - 192.0.2.53
      - 198.51.100.53
      state: present

  - name: Make a profile usable for all compatible Ethernet interfaces
    community.general.nmcli:
      ctype: ethernet
      name: my-eth1
      ifname: '*'
      state: present

  - name: Change the property of a setting e.g. MTU
    community.general.nmcli:
      conn_name: my-eth1
      mtu: 9000
      type: ethernet
      state: present

  - name: Add VxLan
    community.general.nmcli:
      type: vxlan
      conn_name: vxlan_test1
      vxlan_id: 16
      vxlan_local: 192.168.1.2
      vxlan_remote: 192.168.1.5

  - name: Add gre
    community.general.nmcli:
      type: gre
      conn_name: gre_test1
      ip_tunnel_dev: eth0
      ip_tunnel_local: 192.168.1.2
      ip_tunnel_remote: 192.168.1.5

  - name: Add ipip
    community.general.nmcli:
      type: ipip
      conn_name: ipip_test1
      ip_tunnel_dev: eth0
      ip_tunnel_local: 192.168.1.2
      ip_tunnel_remote: 192.168.1.5

  - name: Add sit
    community.general.nmcli:
      type: sit
      conn_name: sit_test1
      ip_tunnel_dev: eth0
      ip_tunnel_local: 192.168.1.2
      ip_tunnel_remote: 192.168.1.5

  - name: Add zone
    community.general.nmcli:
      type: ethernet
      conn_name: my-eth1
      zone: external
      state: present

# nmcli exits with status 0 if it succeeds and exits with a status greater
# than zero when there is a failure. The following list of status codes may be
# returned:
#
#     - 0 Success - indicates the operation succeeded
#     - 1 Unknown or unspecified error
#     - 2 Invalid user input, wrong nmcli invocation
#     - 3 Timeout expired (see --wait option)
#     - 4 Connection activation failed
#     - 5 Connection deactivation failed
#     - 6 Disconnecting device failed
#     - 7 Connection deletion failed
#     - 8 NetworkManager is not running
#     - 9 nmcli and NetworkManager versions mismatch
#     - 10 Connection, device, or access point does not exist.

- name: Create the wifi connection
  community.general.nmcli:
    type: wifi
    conn_name: Brittany
    ifname: wlp4s0
    ssid: Brittany
    wifi_sec:
      key-mgmt: wpa-psk
      psk: my_password
    autoconnect: true
    state: present

- name: Create a hidden AP mode wifi connection
  community.general.nmcli:
    type: wifi
    conn_name: ChocoMaster
    ifname: wlo1
    ssid: ChocoMaster
    wifi:
      hidden: true
      mode: ap
    autoconnect: true
    state: present

- name: Create a gsm connection
  community.general.nmcli:
    type: gsm
    conn_name: my-gsm-provider
    ifname: cdc-wdm0
    gsm:
        apn: my.provider.apn
        username: my-provider-username
        password: my-provider-password
        pin: my-sim-pin
    autoconnect: true
    state: present
</pre>  <h3 id="authors">Authors</h3> <ul class="simple"> <li>Chris Long (@alcamie101)</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2021 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/community/general/nmcli_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/community/general/nmcli_module.html</a>
  </p>
</div>
