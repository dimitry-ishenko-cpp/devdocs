<section id="community-vmware-vmware-vm-inventory-inventory-vmware-guest-inventory-source"> <h1>community.vmware.vmware_vm_inventory inventory – VMware Guest inventory source</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This inventory plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/ui/repo/published/community/vmware/">community.vmware collection</a> (version 4.7.1).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install community.vmware</code>. You need further requirements to be able to use this inventory plugin, see <a class="reference internal" href="#ansible-collections-community-vmware-vmware-vm-inventory-inventory-requirements"><span class="std std-ref">Requirements</span></a> for details.</p> <p>To use it in a playbook, specify: <code>community.vmware.vmware_vm_inventory</code>.</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> </ul>  <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>Get virtual machines as inventory hosts from VMware environment.</li> <li>Uses any file which ends with vmware.yml, vmware.yaml, vmware_vm_inventory.yml, or vmware_vm_inventory.yaml as a YAML configuration file.</li> </ul> </section> <section id="requirements"> <h2 id="ansible-collections-community-vmware-vmware-vm-inventory-inventory-requirements">Requirements</h2> <p>The below requirements are needed on the local controller node that executes this inventory.</p> <ul class="simple"> <li>requests &gt;= 2.3</li> <li>vSphere Automation SDK - For tag feature</li> </ul> </section> <section id="parameters"> <h2>Parameters</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-cache"><strong>cache</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Toggle to enable/disable the caching of the inventory’s source data, requires a cache plugin setup to work.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> <p class="ansible-option-line"><strong class="ansible-option-configuration">Configuration:</strong></p> <ul> <li>
<p>INI entry:</p> <pre data-language="YAML+Jinja">[inventory]
cache = false
</pre> </li> <li>Environment variable: <a class="reference internal" href="../../../reference_appendices/config.html#envvar-ANSIBLE_INVENTORY_CACHE" id="index-0"><code>ANSIBLE_INVENTORY_CACHE</code></a>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-cache-connection"><strong>cache_connection</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Cache connection data or path, read cache plugin documentation for specifics.</p> <p class="ansible-option-line"><strong class="ansible-option-configuration">Configuration:</strong></p> <ul> <li>
<p>INI entries:</p> <pre data-language="YAML+Jinja">[defaults]
fact_caching_connection = VALUE
</pre> <pre data-language="YAML+Jinja">[inventory]
cache_connection = VALUE
</pre> </li> <li>Environment variable: <a class="reference internal" href="../../../reference_appendices/config.html#envvar-ANSIBLE_CACHE_PLUGIN_CONNECTION" id="index-1"><code>ANSIBLE_CACHE_PLUGIN_CONNECTION</code></a>
</li> <li>Environment variable: <a class="reference internal" href="../../../reference_appendices/config.html#envvar-ANSIBLE_INVENTORY_CACHE_CONNECTION" id="index-2"><code>ANSIBLE_INVENTORY_CACHE_CONNECTION</code></a>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-cache-plugin"><strong>cache_plugin</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Cache plugin to use for the inventory’s source data.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"memory"</code></p> <p class="ansible-option-line"><strong class="ansible-option-configuration">Configuration:</strong></p> <ul> <li>
<p>INI entries:</p> <pre data-language="YAML+Jinja">[defaults]
fact_caching = memory
</pre> <pre data-language="YAML+Jinja">[inventory]
cache_plugin = memory
</pre> </li> <li>Environment variable: <a class="reference internal" href="../../../reference_appendices/config.html#envvar-ANSIBLE_CACHE_PLUGIN" id="index-3"><code>ANSIBLE_CACHE_PLUGIN</code></a>
</li> <li>Environment variable: <a class="reference internal" href="../../../reference_appendices/config.html#envvar-ANSIBLE_INVENTORY_CACHE_PLUGIN" id="index-4"><code>ANSIBLE_INVENTORY_CACHE_PLUGIN</code></a>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-cache-prefix"><strong>cache_prefix</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Prefix to use for cache plugin files/tables</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"ansible_inventory_"</code></p> <p class="ansible-option-line"><strong class="ansible-option-configuration">Configuration:</strong></p> <ul> <li>
<p>INI entries:</p> <pre data-language="YAML+Jinja">[defaults]
fact_caching_prefix = ansible_inventory_
</pre> <pre data-language="YAML+Jinja">[inventory]
cache_prefix = ansible_inventory_
</pre> </li> <li>Environment variable: <a class="reference internal" href="../../../reference_appendices/config.html#envvar-ANSIBLE_CACHE_PLUGIN_PREFIX" id="index-5"><code>ANSIBLE_CACHE_PLUGIN_PREFIX</code></a>
</li> <li>Environment variable: <a class="reference internal" href="../../../reference_appendices/config.html#envvar-ANSIBLE_INVENTORY_CACHE_PLUGIN_PREFIX" id="index-6"><code>ANSIBLE_INVENTORY_CACHE_PLUGIN_PREFIX</code></a>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-cache-timeout"><strong>cache_timeout</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Cache duration in seconds</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>3600</code></p> <p class="ansible-option-line"><strong class="ansible-option-configuration">Configuration:</strong></p> <ul> <li>
<p>INI entries:</p> <pre data-language="YAML+Jinja">[defaults]
fact_caching_timeout = 3600
</pre> <pre data-language="YAML+Jinja">[inventory]
cache_timeout = 3600
</pre> </li> <li>Environment variable: <a class="reference internal" href="../../../reference_appendices/config.html#envvar-ANSIBLE_CACHE_PLUGIN_TIMEOUT" id="index-7"><code>ANSIBLE_CACHE_PLUGIN_TIMEOUT</code></a>
</li> <li>Environment variable: <a class="reference internal" href="../../../reference_appendices/config.html#envvar-ANSIBLE_INVENTORY_CACHE_TIMEOUT" id="index-8"><code>ANSIBLE_INVENTORY_CACHE_TIMEOUT</code></a>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-compose"><strong>compose</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Create vars from jinja2 expressions.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>{}</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-filters"><strong>filters</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>This option allows client-side filtering hosts with jinja templating.</p> <p>When server-side filtering is introduced, it should be preferred over this.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>[]</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-groups"><strong>groups</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Add hosts to group based on Jinja2 conditionals.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>{}</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-hostname"><strong>hostname</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Name of vCenter or ESXi server.</p> <p class="ansible-option-line"><strong class="ansible-option-configuration">Configuration:</strong></p> <ul class="simple"> <li>Environment variable: <a class="reference internal" href="../../environment_variables.html#envvar-VMWARE_HOST" id="index-9"><code>VMWARE_HOST</code></a>
</li> <li>Environment variable: <a class="reference internal" href="../../environment_variables.html#envvar-VMWARE_SERVER" id="index-10"><code>VMWARE_SERVER</code></a>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-hostnames"><strong>hostnames</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>A list of templates in order of precedence to compose inventory_hostname.</p> <p>Ignores template if resulted in an empty string or None value.</p> <p>You can use property specified in <code><strong><a class="reference internal" href="#ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-properties"><span class="std std-ref">properties</span></a></strong></code> as variables in the template.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>["config.name + \"_\" + config.uuid"]</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-keyed-groups"><strong>keyed_groups</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Add hosts to group based on the values of a variable.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>[{"key": "config.guestId", "separator": ""}, {"key": "summary.runtime.powerState", "separator": ""}]</code></p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-keyed-groups-default-value"><strong>default_value</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in ansible-core 2.12</em></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The default value when the host variable’s value is an empty string.</p> <p>This option is mutually exclusive with <code><strong><a class="reference internal" href="#ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-keyed-groups-trailing-separator"><span class="std std-ref">keyed_groups[].trailing_separator</span></a></strong></code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-keyed-groups-key"><strong>key</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The key from input dictionary used to generate groups</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-keyed-groups-parent-group"><strong>parent_group</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>parent group for keyed group</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-keyed-groups-prefix"><strong>prefix</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>A keyed group name will start with this prefix</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>""</code></p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-keyed-groups-separator"><strong>separator</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>separator used to build the keyed group name</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"_"</code></p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-keyed-groups-trailing-separator"><strong>trailing_separator</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in ansible-core 2.12</em></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Set this option to <code>False</code> to omit the <code><strong><a class="reference internal" href="#ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-keyed-groups-separator"><span class="std std-ref">keyed_groups[].separator</span></a></strong></code> after the host variable when the value is an empty string.</p> <p>This option is mutually exclusive with <code><strong><a class="reference internal" href="#ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-keyed-groups-default-value"><span class="std std-ref">keyed_groups[].default_value</span></a></strong></code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-leading-separator"><strong>leading_separator</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in ansible-core 2.11</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Use in conjunction with keyed_groups.</p> <p>By default, a keyed group that does not have a prefix or a separator provided will have a name that starts with an underscore.</p> <p>This is because the default prefix is “” and the default separator is “_”.</p> <p>Set this option to False to omit the leading underscore (or other separator) if no prefix is given.</p> <p>If the group name is derived from a mapping the separator is still used to concatenate the items.</p> <p>To not use a separator in the group name at all, set the separator for the keyed group to an empty string instead.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-password"><strong>password</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Password of vSphere user.</p> <p>Accepts vault encrypted variable.</p> <p>Accepts Jinja to template the value</p> <p class="ansible-option-line"><strong class="ansible-option-configuration">Configuration:</strong></p> <ul class="simple"> <li>Environment variable: <a class="reference internal" href="../../environment_variables.html#envvar-VMWARE_PASSWORD" id="index-11"><code>VMWARE_PASSWORD</code></a>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-port"><strong>port</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Port number used to connect to vCenter or ESXi Server.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>443</code></p> <p class="ansible-option-line"><strong class="ansible-option-configuration">Configuration:</strong></p> <ul class="simple"> <li>Environment variable: <a class="reference internal" href="../../environment_variables.html#envvar-VMWARE_PORT" id="index-12"><code>VMWARE_PORT</code></a>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-properties"><strong>properties</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify the list of VMware schema properties associated with the VM.</p> <p>These properties will be populated in hostvars of the given VM.</p> <p>Each value in the list can be a path to a specific property in VM object or a path to a collection of VM objects.</p> <p><code>config.name</code>, <code>config.uuid</code> are required properties if <code><strong><a class="reference internal" href="#ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-hostnames"><span class="std std-ref">hostnames</span></a></strong></code> is set to default.</p> <p><code>config.guestId</code>, <code>summary.runtime.powerState</code> are required if <code><strong><a class="reference internal" href="#ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-keyed-groups"><span class="std std-ref">keyed_groups</span></a></strong></code> is set to default.</p> <p>Please make sure that all the properties that are used in other parameters are included in this options.</p> <p>In addition to VM properties, the following are special values</p> <p>Use <code>customValue</code> to populate virtual machine’s custom attributes. <code>customValue</code> is only supported by vCenter and not by ESXi.</p> <p>Use <code>all</code> to populate all the properties of the virtual machine. The value <code>all</code> is time consuming operation, do not use unless required absolutely.</p> <p>Please refer more VMware guest attributes which can be used as properties <a class="reference external" href="docsite/vmware_scenarios/vmware_inventory_vm_attributes.html">https://docs.ansible.com/ansible/latest/collections/community/vmware/docsite/vmware_scenarios/vmware_inventory_vm_attributes.html</a></p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>["name", "config.cpuHotAddEnabled", "config.cpuHotRemoveEnabled", "config.instanceUuid", "config.hardware.numCPU", "config.template", "config.name", "config.uuid", "guest.hostName", "guest.ipAddress", "guest.guestId", "guest.guestState", "runtime.maxMemoryUsage", "customValue", "summary.runtime.powerState", "config.guestId"]</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-proxy-host"><strong>proxy_host</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Address of a proxy that will receive all HTTPS requests and relay them.</p> <p>The format is a hostname or a IP.</p> <p class="ansible-option-line"><strong class="ansible-option-configuration">Configuration:</strong></p> <ul class="simple"> <li>Environment variable: <a class="reference internal" href="../../environment_variables.html#envvar-VMWARE_PROXY_HOST" id="index-13"><code>VMWARE_PROXY_HOST</code></a>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-proxy-port"><strong>proxy_port</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Port of the HTTP proxy that will receive all HTTPS requests and relay them.</p> <p class="ansible-option-line"><strong class="ansible-option-configuration">Configuration:</strong></p> <ul class="simple"> <li>Environment variable: <a class="reference internal" href="../../environment_variables.html#envvar-VMWARE_PROXY_PORT" id="index-14"><code>VMWARE_PROXY_PORT</code></a>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-resources"><strong>resources</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>A list of resources to limit search scope.</p> <p>Each resource item is represented by exactly one <code>'vim_type_snake_case</code>:<code>list of resource names</code> pair and optional nested <em>resources</em></p> <p>Key name is based on snake case of a vim type name; e.g <code>host_system</code> correspond to <code>vim.HostSystem</code></p> <p>See <a class="reference external" href="https://pubs.vmware.com/vi-sdk/visdk250/ReferenceGuide/index-mo_types.html">VIM Types</a></p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>[]</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-strict"><strong>strict</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>If <code>yes</code> make invalid entries a fatal error, otherwise skip and continue.</p> <p>Since it is possible to use facts in the expressions they might not always be available and we ignore those errors by default.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-subproperties"><strong>subproperties</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=dictionary</span></p> <p><em class="ansible-option-versionadded">added in community.vmware 4.2.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>List of subproperties from an normal property.</p> <p>These subproperties will also populated to the hostvars of the given VM.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>[]</code></p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-subproperties-property"><strong>property</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Name of the Property</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-subproperties-subelements"><strong>subelements</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>List of subelements</p> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-use-extra-vars"><strong>use_extra_vars</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in ansible-core 2.11</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Merge extra vars into the available variables for composition (highest precedence).</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> <p class="ansible-option-line"><strong class="ansible-option-configuration">Configuration:</strong></p> <ul> <li>
<p>INI entry:</p> <pre data-language="YAML+Jinja">[inventory_plugins]
use_extra_vars = false
</pre> </li> <li>Environment variable: <a class="reference internal" href="../../environment_variables.html#envvar-ANSIBLE_INVENTORY_USE_EXTRA_VARS" id="index-15"><code>ANSIBLE_INVENTORY_USE_EXTRA_VARS</code></a>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-username"><strong>username</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Name of vSphere user.</p> <p>Accepts vault encrypted variable.</p> <p>Accepts Jinja to template the value</p> <p class="ansible-option-line"><strong class="ansible-option-configuration">Configuration:</strong></p> <ul class="simple"> <li>Environment variable: <a class="reference internal" href="../../environment_variables.html#envvar-VMWARE_USER" id="index-16"><code>VMWARE_USER</code></a>
</li> <li>Environment variable: <a class="reference internal" href="../../environment_variables.html#envvar-VMWARE_USERNAME" id="index-17"><code>VMWARE_USERNAME</code></a>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-validate-certs"><strong>validate_certs</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Allows connection when SSL certificates are not valid.</p> <p>Set to <code>false</code> when certificates are not trusted.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> <p class="ansible-option-line"><strong class="ansible-option-configuration">Configuration:</strong></p> <ul class="simple"> <li>Environment variable: <a class="reference internal" href="../../environment_variables.html#envvar-VMWARE_VALIDATE_CERTS" id="index-18"><code>VMWARE_VALIDATE_CERTS</code></a>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-with-nested-properties"><strong>with_nested_properties</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>This option transform flatten properties name to nested dictionary.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-with-path"><strong>with_path</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Include virtual machines path.</p> <p>Set this option to a string value to replace root name from <em>‘Datacenters’</em>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-with-sanitized-property-name"><strong>with_sanitized_property_name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>This option allows property name sanitization to create safe property names for use in Ansible.</p> <p>Also, transforms property name to snake case.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-vmware-vmware-vm-inventory-inventory-parameter-with-tags"><strong>with_tags</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Include tags and associated virtual machines.</p> <p>Requires ‘vSphere Automation SDK’ library to be installed on the given controller machine.</p> <p>Please refer following URLs for installation steps</p> <p><a class="reference external" href="https://code.vmware.com/web/sdk/7.0/vsphere-automation-python">https://code.vmware.com/web/sdk/7.0/vsphere-automation-python</a></p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr>  </table> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja"># Sample configuration file for VMware Guest dynamic inventory
    plugin: community.vmware.vmware_vm_inventory
    strict: false
    hostname: 10.65.223.31
    username: administrator@vsphere.local
    password: Esxi@123$%
    validate_certs: false
    with_tags: true

# Sample configuration file for VMware Guest dynamic inventory using Jinja to template the username and password.
    plugin: community.vmware.vmware_vm_inventory
    strict: false
    hostname: 10.65.223.31
    username: '{{ (lookup("file","~/.config/vmware.yaml") | from_yaml).username }}'
    password: '{{ (lookup("file","~/.config/vmware.yaml") | from_yaml).password }}'
    validate_certs: false
    with_tags: true

# Gather minimum set of properties for VMware guest
    plugin: community.vmware.vmware_vm_inventory
    strict: false
    hostname: 10.65.223.31
    username: administrator@vsphere.local
    password: Esxi@123$%
    validate_certs: false
    properties:
    - 'name'
    - 'guest.ipAddress'
    - 'config.name'
    - 'config.uuid'

# Gather subproperties such as the parent (mostly cluster) of an ESXi
    plugin: community.vmware.vmware_vm_inventory
    strict: false
    hostname: 10.65.223.31
    username: administrator@vsphere.local
    password: Esxi@123$%
    validate_certs: false
    properties:
    - 'name'
    - 'guest.ipAddress'
    - 'config.name'
    - 'config.uuid'
    subproperties:
    - property: 'summary.runtime.host'
      subelements:
      - 'name'
      - 'parent.name'

# Create Groups based upon VMware Tools status
    plugin: community.vmware.vmware_vm_inventory
    strict: false
    hostname: 10.65.223.31
    username: administrator@vsphere.local
    password: Esxi@123$%
    validate_certs: false
    properties:
    - 'name'
    - 'config.name'
    - 'guest.toolsStatus'
    - 'guest.toolsRunningStatus'
    hostnames:
    - config.name
    keyed_groups:
    - key: guest.toolsStatus
      separator: ''
    - key: guest.toolsRunningStatus
      separator: ''

# Filter VMs based upon condition
    plugin: community.vmware.vmware_vm_inventory
    strict: false
    hostname: 10.65.223.31
    username: administrator@vsphere.local
    password: Esxi@123$%
    validate_certs: false
    properties:
    - 'runtime.powerState'
    - 'config.name'
    filters:
    - runtime.powerState == "poweredOn"
    hostnames:
    - config.name

# Filter VM's based on OR conditions
    plugin: community.vmware.vmware_vm_inventory
    strict: false
    hostname: 10.65.223.31
    username: administrator@vsphere.local
    password: Esxi@123$%
    validate_certs: false
    properties:
    - 'name'
    - 'config.name'
    - 'guest.ipAddress'
    - 'guest.toolsStatus'
    - 'guest.toolsRunningStatus'
    - 'config.guestFullName'
    - 'config.guestId'
    hostnames:
    - 'config.name'
    filters:
    - config.guestId == "rhel7_64Guest" or config.name == "rhel_20_04_empty"

# Filter VM's based on regex conditions
    plugin: community.vmware.vmware_vm_inventory
    strict: false
    hostname: 10.65.223.31
    username: administrator@vsphere.local
    password: Esxi@123$%
    validate_certs: false
    properties:
    - 'config.name'
    - 'config.guestId'
    - 'guest.ipAddress'
    - 'summary.runtime.powerState'
    filters:
    - guest.ipAddress is defined and (guest.ipAddress is match('192.168.*') or guest.ipAddress is match('192.169.*'))

# Using compose and groups
    plugin: community.vmware.vmware_vm_inventory
    strict: false
    hostname: 10.65.223.31
    username: administrator@vsphere.local
    password: Esxi@123$%
    validate_certs: false
    properties:
    - 'name'
    - 'config.name'
    - 'guest.ipAddress'
    compose:
      # This will populate the IP address of virtual machine if available
      # and will be used while communicating to the given virtual machine
      ansible_host: 'guest.ipAddress'
      composed_var: 'config.name'
      # This will populate a host variable with a string value
      ansible_user: "'admin'"
      ansible_connection: "'ssh'"
    groups:
      VMs: true
    hostnames:
    - config.name

# Use Datacenter, Cluster and Folder value to list VMs
    plugin: community.vmware.vmware_vm_inventory
    strict: false
    hostname: 10.65.200.241
    username: administrator@vsphere.local
    password: Esxi@123$%
    validate_certs: false
    with_tags: true
    resources:
      - datacenter:
        - Asia-Datacenter1
        - Asia-Datacenter2
        resources:
        - compute_resource:
          - Asia-Cluster1
          resources:
          - host_system:
            - Asia-ESXI4
        - folder:
          - dev
          - prod

# Use Category and it's relation with Tag
    plugin: community.vmware.vmware_vm_inventory
    strict: false
    hostname: 10.65.201.128
    username: administrator@vsphere.local
    password: Esxi@123$%
    validate_certs: false
    hostnames:
    - 'config.name'
    properties:
    - 'config.name'
    - 'config.guestId'
    - 'guest.ipAddress'
    - 'summary.runtime.powerState'
    with_tags: true
    keyed_groups:
    - key: tag_category.OS
      prefix: "vmware_tag_os_category_"
      separator: ""
    with_nested_properties: true
    filters:
    - "tag_category.OS is defined and 'Linux' in tag_category.OS"

# customizing hostnames based on VM's FQDN. The second hostnames template acts as a fallback mechanism.
    plugin: community.vmware.vmware_vm_inventory
    strict: false
    hostname: 10.65.223.31
    username: administrator@vsphere.local
    password: Esxi@123$%
    validate_certs: false
    hostnames:
     - 'config.name+"."+guest.ipStack.0.dnsConfig.domainName'
     - 'config.name'
    properties:
      - 'config.name'
      - 'config.guestId'
      - 'guest.hostName'
      - 'guest.ipAddress'
      - 'guest.guestFamily'
      - 'guest.ipStack'

# Select a specific IP address for use by ansible when multiple NICs are present on the VM
    plugin: community.vmware.vmware_vm_inventory
    strict: false
    hostname: 10.65.223.31
    username: administrator@vsphere.local
    password: Esxi@123$%
    validate_certs: false
    compose:
      # Set the IP address used by ansible to one that starts by 10.42. or 10.43.
      ansible_host: &gt;-
        guest.net
        | selectattr('ipAddress')
        | map(attribute='ipAddress')
        | flatten
        | select('match', '^10.42.*|^10.43.*')
        | list
        | first
    properties:
      - guest.net

# Group hosts using Jinja2 conditionals
    plugin: community.vmware.vmware_vm_inventory
    strict: false
    hostname: 10.65.13.37
    username: administrator@vsphere.local
    password: Esxi@123$%
    validate_certs: false
    hostnames:
    - config.name
    properties:
    - 'name'
    - 'config.name'
    - 'config.datastoreUrl'
    groups:
      slow_storage: "'Nas01' in config.datastoreUrl[0].name"
      fast_storage: "'SSD' in config.datastoreUrl[0].name"
</pre> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Abhijeet Kasurde (@Akasurde)</li> </ul> <div class="admonition hint"> <p class="admonition-title">Hint</p> <p>Configuration entries for each entry type have a low to high priority order. For example, a variable that is lower in the list will override a variable that is higher up.</p> </div> </section> <section id="collection-links"> <h3>Collection links</h3> <ul class="ansible-links"> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.vmware/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc" rel="noopener external" target="_blank">Issue Tracker</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.vmware" rel="noopener external" target="_blank">Homepage</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.vmware.git" rel="noopener external" target="_blank">Repository (Sources)</a></span></li> </ul> </section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2024 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/community/vmware/vmware_vm_inventory_inventory.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/community/vmware/vmware_vm_inventory_inventory.html</a>
  </p>
</div>
