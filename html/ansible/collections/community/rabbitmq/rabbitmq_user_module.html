<section id="community-rabbitmq-rabbitmq-user-module-manage-rabbitmq-users"> <h1>community.rabbitmq.rabbitmq_user module – Manage RabbitMQ users</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module is part of the <a class="reference external" href="https://galaxy.ansible.com/ui/repo/published/community/rabbitmq/">community.rabbitmq collection</a> (version 1.3.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install community.rabbitmq</code>.</p> <p>To use it in a playbook, specify: <code>community.rabbitmq.rabbitmq_user</code>.</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#parameters" id="id2">Parameters</a></li> <li><a class="reference internal" href="#examples" id="id3">Examples</a></li> </ul>  <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>Add or remove users to RabbitMQ and assign permissions</li> </ul> </section> <section id="parameters"> <h2>Parameters</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-rabbitmq-rabbitmq-user-module-parameter-configure-priv"><strong>configure_priv</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Regular expression to restrict configure actions on a resource for the specified vhost.</p> <p>By default all actions are restricted.</p> <p>This option will be ignored when permissions option is used.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"^$"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-rabbitmq-rabbitmq-user-module-parameter-force"><strong>force</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Deletes and recreates the user.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-rabbitmq-rabbitmq-user-module-parameter-login-host"><strong>login_host</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in community.rabbitmq 1.3.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Hostname of API.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-rabbitmq-rabbitmq-user-module-parameter-login-password"><strong>login_password</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in community.rabbitmq 1.3.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Login password of the management API.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-rabbitmq-rabbitmq-user-module-parameter-login-port"><strong>login_port</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in community.rabbitmq 1.3.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>login_port of access from API.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"15672"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-rabbitmq-rabbitmq-user-module-parameter-login-protocol"><strong>login_protocol</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in community.rabbitmq 1.3.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify which TCP/IP protocol will be used.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"http"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"https"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-rabbitmq-rabbitmq-user-module-parameter-login-user"><strong>login_user</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in community.rabbitmq 1.3.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Administrator’s username the management API.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-rabbitmq-rabbitmq-user-module-parameter-node"><strong>node</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>erlang node name of the rabbit we wish to configure</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"rabbit"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-rabbitmq-rabbitmq-user-module-parameter-password"><strong>password</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Password of user to add.</p> <p>To change the password of an existing user, you must also specify <code>update_password=always</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-rabbitmq-rabbitmq-user-module-parameter-permissions"><strong>permissions</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>a list of dicts, each dict contains vhost, configure_priv, write_priv, and read_priv, and represents a permission rule for that vhost.</p> <p>This option should be preferable when you care about all permissions of the user.</p> <p>You should use vhost, configure_priv, write_priv, and read_priv options instead if you care about permissions for just some vhosts.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>[]</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-rabbitmq-rabbitmq-user-module-parameter-read-priv"><strong>read_priv</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Regular expression to restrict configure actions on a resource for the specified vhost.</p> <p>By default all actions are restricted.</p> <p>This option will be ignored when permissions option is used.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"^$"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-rabbitmq-rabbitmq-user-module-parameter-state"><strong>state</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify if user is to be added or removed</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"present"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"absent"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-rabbitmq-rabbitmq-user-module-parameter-tags"><strong>tags</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>User tags specified as comma delimited.</p> <p>The suggested tags to use are management, policymaker, monitoring and administrator.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-rabbitmq-rabbitmq-user-module-parameter-topic-permissions"><strong>topic_permissions</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=dictionary</span></p> <p><em class="ansible-option-versionadded">added in community.rabbitmq 1.2.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>A list of dicts, each dict contains vhost, exchange, read_priv and write_priv, and represents a topic permission rule for that vhost.</p> <p>By default vhost is <code>/</code> and exchange is <code>amq.topic</code>.</p> <p>Supported since RabbitMQ 3.7.0. If RabbitMQ is older and topic_permissions are set, the module will fail.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>[]</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-rabbitmq-rabbitmq-user-module-parameter-update-password"><strong>update_password</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p><code>on_create</code> will only set the password for newly created users. <code>always</code> will update passwords if they differ.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"on_create"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"always"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">   
<p class="ansible-option-title" id="ansible-collections-community-rabbitmq-rabbitmq-user-module-parameter-username"><strong id="ansible-collections-community-rabbitmq-rabbitmq-user-module-parameter-name">user</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: username, name</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Name of user to add</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-rabbitmq-rabbitmq-user-module-parameter-vhost"><strong>vhost</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>vhost to apply access privileges.</p> <p>This option will be ignored when permissions option is used.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"/"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-rabbitmq-rabbitmq-user-module-parameter-write-priv"><strong>write_priv</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Regular expression to restrict configure actions on a resource for the specified vhost.</p> <p>By default all actions are restricted.</p> <p>This option will be ignored when permissions option is used.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"^$"</code></p> </div></td> </tr>  </table> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja">- name: |-
    Add user to server and assign full access control on / vhost.
    The user might have permission rules for other vhost but you don't care.
  community.rabbitmq.rabbitmq_user:
    user: joe
    password: changeme
    vhost: /
    configure_priv: .*
    read_priv: .*
    write_priv: .*
    state: present

- name: |-
    Add user to server and assign full access control on / vhost.
    The user doesn't have permission rules for other vhosts
  community.rabbitmq.rabbitmq_user:
    user: joe
    password: changeme
    permissions:
      - vhost: /
        configure_priv: .*
        read_priv: .*
        write_priv: .*
    state: present

- name: |-
    Add user to server and assign some topic permissions on / vhost.
    The user doesn't have topic permission rules for other vhosts
  community.rabbitmq.rabbitmq_user:
    user: joe
    password: changeme
    topic_permissions:
      - vhost: /
        exchange: amq.topic
        read_priv: .*
        write_priv: 'prod\\.logging\\..*'
    state: present

- name: |-
    Add or Update a user using the API
  community.rabbitmq.rabbitmq_user:
    user: joe
    password: changeme
    tags: monitoring
    login_protocol: https
    login_host: localhost
    login_port: 15672
    login_user: admin
    login_password: changeadmin
    permissions:
          - vhost: /
            configure_priv: .*
            read_priv: .*
            write_priv: .*
    topic_permissions:
      - vhost: /
        exchange: amq.topic
        read_priv: .*
        write_priv: 'prod\\.logging\\..*'
    state: present


- name: |-
    Remove a user using the API
  community.rabbitmq.rabbitmq_user:
    user: joe
    password: changeme
    tags: monitoring
    login_protocol: https
    login_host: localhost
    login_port: 15672
    login_user: admin
    login_password: changeadmin
    state: absent
</pre> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Chris Hoffman (@chrishoffman)</li> </ul> </section> <section id="collection-links"> <h3>Collection links</h3> <ul class="ansible-links"> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.rabbitmq/issues" rel="noopener external" target="_blank">Issue Tracker</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.rabbitmq" rel="noopener external" target="_blank">Repository (Sources)</a></span></li> </ul> </section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2024 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/community/rabbitmq/rabbitmq_user_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/community/rabbitmq/rabbitmq_user_module.html</a>
  </p>
</div>
