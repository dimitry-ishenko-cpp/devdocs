<section id="community-grafana-grafana-datasource-module-manage-grafana-datasources"> <h1>community.grafana.grafana_datasource module – Manage Grafana datasources</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module is part of the <a class="reference external" href="https://galaxy.ansible.com/ui/repo/published/community/grafana/">community.grafana collection</a> (version 1.9.1).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install community.grafana</code>.</p> <p>To use it in a playbook, specify: <code>community.grafana.grafana_datasource</code>.</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#parameters" id="id2">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id3">Notes</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id5">Return Values</a></li> </ul>  <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>Create/update/delete Grafana datasources via API.</li> </ul> </section> <section id="parameters"> <h2>Parameters</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-access"><strong>access</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The access mode for this datasource.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"direct"</code></li> <li>
<code><strong>"proxy"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-additional-json-data"><strong>additional_json_data</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Defined data is used for datasource jsonData</p> <p>Data may be overridden by specifically defined parameters (like zabbix_user)</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>{}</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-additional-secure-json-data"><strong>additional_secure_json_data</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Defined data is used for datasource secureJsonData</p> <p>Data may be overridden by specifically defined parameters (like tls_client_cert)</p> <p>Stored as secure data, see <code>enforce_secure_data</code> and notes!</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>{}</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-aws-access-key"><strong>aws_access_key</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>AWS access key for CloudWatch datasource type when <code>aws_auth_type</code> is <code>keys</code></p> <p>Stored as secure data, see <code>enforce_secure_data</code> and notes!</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>""</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-aws-assume-role-arn"><strong>aws_assume_role_arn</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>AWS IAM role arn to assume for CloudWatch datasource type when <code>aws_auth_type</code> is <code>arn</code></p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>""</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-aws-auth-type"><strong>aws_auth_type</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Type for AWS authentication for CloudWatch datasource type (authType of grafana api)</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"keys"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"credentials"</code></li> <li><code>"arn"</code></li> <li><code>"default"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-aws-credentials-profile"><strong>aws_credentials_profile</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Profile for AWS credentials for CloudWatch datasource type when <code>aws_auth_type</code> is <code>credentials</code></p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>""</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-aws-custom-metrics-namespaces"><strong>aws_custom_metrics_namespaces</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Namespaces of Custom Metrics for CloudWatch datasource type</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-aws-default-region"><strong>aws_default_region</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>AWS default region for CloudWatch datasource type</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"ap-northeast-1"</code></li> <li><code>"ap-northeast-2"</code></li> <li><code>"ap-southeast-1"</code></li> <li><code>"ap-southeast-2"</code></li> <li><code>"ap-south-1"</code></li> <li><code>"ca-central-1"</code></li> <li><code>"cn-north-1"</code></li> <li><code>"cn-northwest-1"</code></li> <li><code>"eu-central-1"</code></li> <li><code>"eu-west-1"</code></li> <li><code>"eu-west-2"</code></li> <li><code>"eu-west-3"</code></li> <li><code>"sa-east-1"</code></li> <li>
<code><strong>"us-east-1"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"us-east-2"</code></li> <li><code>"us-gov-west-1"</code></li> <li><code>"us-west-1"</code></li> <li><code>"us-west-2"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-aws-secret-key"><strong>aws_secret_key</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>AWS secret key for CloudWatch datasource type when <code>aws_auth_type</code> is <code>keys</code></p> <p>Stored as secure data, see <code>enforce_secure_data</code> and notes!</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>""</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-azure-client"><strong>azure_client</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The application/client ID for the Azure AD app registration to use for authentication.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-azure-cloud"><strong>azure_cloud</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The national cloud for your Azure account</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"azuremonitor"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"chinaazuremonitor"</code></li> <li><code>"govazuremonitor"</code></li> <li><code>"germanyazuremonitor"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-azure-secret"><strong>azure_secret</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The application client secret for the Azure AD app registration to use for auth</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-azure-tenant"><strong>azure_tenant</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The directory/tenant ID for the Azure AD app registration to use for authentication</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-basic-auth-password"><strong>basic_auth_password</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The datasource basic auth password, when <code>basic auth</code> is <code>true</code>.</p> <p>Stored as secure data, see <code>enforce_secure_data</code> and notes!</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-basic-auth-user"><strong>basic_auth_user</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The datasource basic auth user.</p> <p>Setting this option with basic_auth_password will enable basic auth.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-client-cert"><strong>client_cert</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">path</span></p> </div></td> <td><div class="ansible-option-cell">
<p>PEM formatted certificate chain file to be used for SSL client authentication.</p> <p>This file can also include the key as well, and if the key is included, <em>client_key</em> is not required</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-client-key"><strong>client_key</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">path</span></p> </div></td> <td><div class="ansible-option-cell">
<p>PEM formatted file that contains your private key to be used for SSL client authentication.</p> <p>If <em>client_cert</em> contains both the certificate and key, this option is not required.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-database"><strong>database</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Name of the database for the datasource.</p> <p>This options is required when the <code>ds_type</code> is <code>influxdb</code>, <code>elasticsearch</code> (index name), <code>mysql</code> or <code>postgres</code>.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>""</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-ds-type"><strong>ds_type</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The type of the datasource.</p> <p>Required when <code>state=present</code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"graphite"</code></li> <li><code>"prometheus"</code></li> <li><code>"elasticsearch"</code></li> <li><code>"influxdb"</code></li> <li><code>"opentsdb"</code></li> <li><code>"mysql"</code></li> <li><code>"postgres"</code></li> <li><code>"cloudwatch"</code></li> <li><code>"alexanderzobnin-zabbix-datasource"</code></li> <li><code>"grafana-azure-monitor-datasource"</code></li> <li><code>"sni-thruk-datasource"</code></li> <li><code>"camptocamp-prometheus-alertmanager-datasource"</code></li> <li><code>"loki"</code></li> <li><code>"redis-datasource"</code></li> <li><code>"tempo"</code></li> <li><code>"quickwit-quickwit-datasource"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-ds-url"><strong>ds_url</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The URL of the datasource.</p> <p>Required when <code>state=present</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-enforce-secure-data"><strong>enforce_secure_data</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Secure data is not updated per default (see notes!)</p> <p>To update secure data you have to enable this option!</p> <p>Enabling this, the task will always report changed=True</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-es-version"><strong>es_version</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Elasticsearch version (for <code>ds_type = elasticsearch</code> only)</p> <p>Version 56 is for elasticsearch 5.6+ where you can specify the <code>max_concurrent_shard_requests</code> option.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"2"</code></li> <li><code>"5"</code></li> <li><code>"56"</code></li> <li><code>"60"</code></li> <li><code>"70"</code></li> <li><code>"7.7+"</code></li> <li>
<code><strong>"7.10+"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"8.0+"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-grafana-api-key"><strong>grafana_api_key</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The Grafana API key.</p> <p>If set, <code>url_username</code> and <code>url_password</code> will be ignored.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-interval"><strong>interval</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>For elasticsearch <code>ds_type</code>, this is the index pattern used.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>""</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"Hourly"</code></li> <li><code>"Daily"</code></li> <li><code>"Weekly"</code></li> <li><code>"Monthly"</code></li> <li><code>"Yearly"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-is-default"><strong>is_default</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Make this datasource the default one.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-max-concurrent-shard-requests"><strong>max_concurrent_shard_requests</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Starting with elasticsearch 5.6, you can specify the max concurrent shard per requests.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>256</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-name"><strong>name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The name of the datasource.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-org-id"><strong>org_id</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Grafana organization ID in which the datasource should be created.</p> <p>Not used when <code>grafana_api_key</code> is set, because the <code>grafana_api_key</code> only belongs to one organization.</p> <p>Mutually exclusive with <code>org_name</code>.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>1</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-org-name"><strong>org_name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Grafana organization name in which the datasource should be created.</p> <p>Not used when <code>grafana_api_key</code> is set, because the <code>grafana_api_key</code> only belongs to one organization.</p> <p>Mutually exclusive with <code>org_id</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-password"><strong>password</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The datasource password.</p> <p>Stored as secure data, see <code>enforce_secure_data</code> and notes!</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>""</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-sslmode"><strong>sslmode</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>SSL mode for <code>postgres</code> datasource type.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"disable"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"require"</code></li> <li><code>"verify-ca"</code></li> <li><code>"verify-full"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-state"><strong>state</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Status of the datasource</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"absent"</code></li> <li>
<code><strong>"present"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-time-field"><strong>time_field</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Name of the time field in elasticsearch ds.</p> <p>For example <code>@timestamp</code>.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"@timestamp"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-time-interval"><strong>time_interval</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Minimum group by interval for <code>influxdb</code>, <code>elasticsearch</code> or <code>prometheus</code> datasources.</p> <p>for example <code>&gt;10s</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-tls-ca-cert"><strong>tls_ca_cert</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The TLS CA certificate for self signed certificates.</p> <p>Only used when <code>tls_client_cert</code> and <code>tls_client_key</code> are set.</p> <p>Stored as secure data, see <code>enforce_secure_data</code> and notes!</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-tls-client-cert"><strong>tls_client_cert</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The client TLS certificate.</p> <p>If <code>tls_client_cert</code> and <code>tls_client_key</code> are set, this will enable TLS authentication.</p> <p>Starts with —– BEGIN CERTIFICATE —–</p> <p>Stored as secure data, see <code>enforce_secure_data</code> and notes!</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-tls-client-key"><strong>tls_client_key</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The client TLS private key</p> <p>Starts with —– BEGIN RSA PRIVATE KEY —–</p> <p>Stored as secure data, see <code>enforce_secure_data</code> and notes!</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-tls-skip-verify"><strong>tls_skip_verify</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Skip the TLS datasource certificate verification.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-trends"><strong>trends</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Use trends or not for zabbix datasource type.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-tsdb-resolution"><strong>tsdb_resolution</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The opentsdb time resolution.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"millisecond"</code></li> <li>
<code><strong>"second"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-tsdb-version"><strong>tsdb_version</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The opentsdb version.</p> <p>Use <code>1</code> for &lt;=2.1, <code>2</code> for ==2.2, <code>3</code> for ==2.3.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>1</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>2</code></li> <li><code>3</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-uid"><strong>uid</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The uid of the datasource.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-url"><strong id="ansible-collections-community-grafana-grafana-datasource-module-parameter-grafana-url">url</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: grafana_url</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The Grafana URL.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-url-password"><strong id="ansible-collections-community-grafana-grafana-datasource-module-parameter-grafana-password">url_password</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: grafana_password</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The Grafana password for API authentication.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"admin"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-url-username"><strong id="ansible-collections-community-grafana-grafana-datasource-module-parameter-grafana-user">url_username</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: grafana_user</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The Grafana user for API authentication.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"admin"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-use-proxy"><strong>use_proxy</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>If <code>false</code>, it will not use a proxy, even if one is defined in an environment variable on the target hosts.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-user"><strong>user</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The datasource login user for influxdb datasources.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>""</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-validate-certs"><strong>validate_certs</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>If <code>false</code>, SSL certificates will not be validated.</p> <p>This should only set to <code>false</code> used on personally controlled sites using self-signed certificates.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-with-credentials"><strong>with_credentials</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Whether credentials such as cookies or auth headers should be sent with cross-site requests.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-zabbix-password"><strong>zabbix_password</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Password for Zabbix API</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-parameter-zabbix-user"><strong>zabbix_user</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>User for Zabbix API</p> </div></td> </tr>  </table> </section> <section id="notes"> <h2>Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>Secure data will get encrypted by the Grafana API, thus it can not be compared on subsequent runs. To workaround this, secure data will not be updated after initial creation! To force the secure data update you have to set <em>enforce_secure_data=True</em>.</li> <li>Hint, with the <code>enforce_secure_data</code> always reporting changed=True, you might just do one Task updating the datasource without any secure data and make a separate playbook/task also changing the secure data. This way it will not break any workflow.</li> </ul> </div> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja">---
- name: Create elasticsearch datasource
  community.grafana.grafana_datasource:
    name: "datasource-elastic"
    grafana_url: "https://grafana.company.com"
    grafana_user: "admin"
    grafana_password: "xxxxxx"
    org_id: "1"
    ds_type: "elasticsearch"
    ds_url: "https://elastic.company.com:9200"
    database: "[logstash_]YYYY.MM.DD"
    basic_auth_user: "grafana"
    basic_auth_password: "******"
    time_field: "@timestamp"
    time_interval: "1m"
    interval: "Daily"
    es_version: 56
    max_concurrent_shard_requests: 42
    tls_ca_cert: "/etc/ssl/certs/ca.pem"

- name: Create influxdb datasource
  community.grafana.grafana_datasource:
    name: "datasource-influxdb"
    grafana_url: "https://grafana.company.com"
    grafana_user: "admin"
    grafana_password: "xxxxxx"
    org_id: "1"
    ds_type: "influxdb"
    ds_url: "https://influx.company.com:8086"
    database: "telegraf"
    time_interval: "&gt;10s"
    tls_ca_cert: "/etc/ssl/certs/ca.pem"

- name: Create influxdbv2 datasource using fluxql
  community.grafana.grafana_datasource:
    name: "datasource-influxdb-flux"
    grafana_url: "https://grafana.company.com"
    grafana_user: "admin"
    grafana_password: "xxxxxx"
    org_id: "1"
    ds_type: "influxdb"
    ds_url: "https://influx.company.com:8086"
    additional_json_data:
      version: "Flux"
      organization: "organization"
      defaultBucket: "bucket"
      tlsSkipVerify: false
    additional_secure_json_data:
      token: "token"

- name: Create postgres datasource
  community.grafana.grafana_datasource:
    name: "datasource-postgres"
    grafana_url: "https://grafana.company.com"
    grafana_user: "admin"
    grafana_password: "xxxxxx"
    org_id: "1"
    ds_type: "postgres"
    ds_url: "postgres.company.com:5432"
    database: "db"
    user: "postgres"
    sslmode: "verify-full"
    additional_json_data:
      postgresVersion: 12
      timescaledb: false
    additional_secure_json_data:
      password: "iampgroot"

- name: Create cloudwatch datasource
  community.grafana.grafana_datasource:
    name: "datasource-cloudwatch"
    grafana_url: "https://grafana.company.com"
    grafana_user: "admin"
    grafana_password: "xxxxxx"
    org_id: "1"
    ds_type: "cloudwatch"
    ds_url: "http://monitoring.us-west-1.amazonaws.com"
    aws_auth_type: "keys"
    aws_default_region: "us-west-1"
    aws_access_key: "speakFriendAndEnter"
    aws_secret_key: "mel10n"
    aws_custom_metrics_namespaces: "n1,n2"

- name: grafana - add thruk datasource
  community.grafana.grafana_datasource:
    name: "datasource-thruk"
    grafana_url: "https://grafana.company.com"
    grafana_user: "admin"
    grafana_password: "xxxxxx"
    org_id: "1"
    ds_type: "sni-thruk-datasource"
    ds_url: "https://thruk.company.com/sitename/thruk"
    basic_auth_user: "thruk-user"
    basic_auth_password: "******"

# handle secure data - workflow example
# this will create/update the datasource but dont update the secure data on updates
# so you can assert if all tasks are changed=False
- name: create prometheus datasource
  community.grafana.grafana_datasource:
    name: openshift_prometheus
    ds_type: prometheus
    ds_url: https://openshift-monitoring.company.com
    access: proxy
    tls_skip_verify: true
    additional_json_data:
      httpHeaderName1: "Authorization"
    additional_secure_json_data:
      httpHeaderValue1: "Bearer ihavenogroot"

# in a separate task or even play you then can force to update
# and assert if each datasource is reporting changed=True
- name: update prometheus datasource
  community.grafana.grafana_datasource:
    name: openshift_prometheus
    ds_type: prometheus
    ds_url: https://openshift-monitoring.company.com
    access: proxy
    tls_skip_verify: true
    additional_json_data:
      httpHeaderName1: "Authorization"
    additional_secure_json_data:
      httpHeaderValue1: "Bearer ihavenogroot"
    enforce_secure_data: true
</pre> </section> <section id="return-values"> <h2>Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values.html#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Key</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-grafana-grafana-datasource-module-return-datasource"><strong>datasource</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>datasource created/updated by module</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> changed</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>{"access": "proxy", "basicAuth": false, "database": "test_*", "id": 1035, "isDefault": false, "jsonData": {"esVersion": 5, "timeField": "@timestamp", "timeInterval": "10s"}, "name": "grafana_datasource_test", "orgId": 1, "password": "", "secureJsonFields": {"JustASecureTest": true}, "type": "elasticsearch", "url": "http://elastic.company.com:9200", "user": "", "withCredentials": false}</code></p> </div></td> </tr>  </table> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Thierry Sallé (@seuf)</li> <li>Martin Wang (@martinwangjian)</li> <li>Rémi REY (@rrey)</li> </ul> </section> <section id="collection-links"> <h3>Collection links</h3> <ul class="ansible-links"> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.grafana/issues" rel="noopener external" target="_blank">Issue Tracker</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/grafana" rel="noopener external" target="_blank">Homepage</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.grafana.git" rel="noopener external" target="_blank">Repository (Sources)</a></span></li> </ul> </section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2024 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/community/grafana/grafana_datasource_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/community/grafana/grafana_datasource_module.html</a>
  </p>
</div>
