<section id="community-docker-docker-swarm-service-module-docker-swarm-service"> <h1>community.docker.docker_swarm_service module – docker swarm service</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module is part of the <a class="reference external" href="https://galaxy.ansible.com/ui/repo/published/community/docker/">community.docker collection</a> (version 3.13.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install community.docker</code>. You need further requirements to be able to use this module, see <a class="reference internal" href="#ansible-collections-community-docker-docker-swarm-service-module-requirements"><span class="std std-ref">Requirements</span></a> for details.</p> <p>To use it in a playbook, specify: <code>community.docker.docker_swarm_service</code>.</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#attributes" id="id4">Attributes</a></li> <li><a class="reference internal" href="#notes" id="id5">Notes</a></li> <li><a class="reference internal" href="#examples" id="id6">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id7">Return Values</a></li> </ul>  <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>Manages docker services via a swarm manager node.</li> <li>This modules does not support updating services in a stack.</li> </ul> </section> <section id="requirements"> <h2 id="ansible-collections-community-docker-docker-swarm-service-module-requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>Docker API &gt;= 1.25</li> <li>Docker SDK for Python: Please note that the <a class="reference external" href="https://pypi.org/project/docker-py/">docker-py</a> Python module has been superseded by <a class="reference external" href="https://pypi.org/project/docker/">docker</a> (see <a class="reference external" href="https://github.com/docker/docker-py/issues/1310">here</a> for details). This module does *not* work with docker-py.</li> <li>
<a class="reference external" href="https://docker-py.readthedocs.io/en/stable/">Docker SDK for Python</a> &gt;= 2.0.2</li> <li>Python &gt;= 2.7</li> </ul> </section> <section id="parameters"> <h2>Parameters</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-docker-api-version"><strong id="ansible-collections-community-docker-docker-swarm-service-module-parameter-api-version">api_version</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: docker_api_version</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The version of the Docker API running on the Docker Host.</p> <p>Defaults to the latest version of the API supported by Docker SDK for Python and the docker daemon.</p> <p>If the value is not specified in the task, the value of environment variable <a class="reference internal" href="docsite/scenario_guide.html#envvar-DOCKER_API_VERSION"><code>DOCKER_API_VERSION</code></a> will be used instead. If the environment variable is not set, the default value will be used.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"auto"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-args"><strong>args</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>List arguments to be passed to the container.</p> <p>Corresponds to the <code>ARG</code> parameter of <code>docker service create</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">    
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-tls-ca-cert"><strong id="ansible-collections-community-docker-docker-swarm-service-module-parameter-ca-cert">ca_path</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: ca_cert, tls_ca_cert, cacert_path</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">path</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Use a CA certificate when performing server verification by providing the path to a CA certificate file.</p> <p>If the value is not specified in the task and the environment variable <a class="reference internal" href="docsite/scenario_guide.html#envvar-DOCKER_CERT_PATH"><code>DOCKER_CERT_PATH</code></a> is set, the file <code>ca.pem</code> from the directory specified in the environment variable <a class="reference internal" href="docsite/scenario_guide.html#envvar-DOCKER_CERT_PATH"><code>DOCKER_CERT_PATH</code></a> will be used.</p> <p>This option was called <code><strong><a class="reference internal" href="#ansible-collections-community-docker-docker-swarm-service-module-parameter-ca-cert"><span class="std std-ref">ca_cert</span></a></strong></code> and got renamed to <code><strong><a class="reference internal" href="#ansible-collections-community-docker-docker-swarm-service-module-parameter-ca-path"><span class="std std-ref">ca_path</span></a></strong></code> in community.docker 3.6.0. The old name has been added as an alias and can still be used.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-cap-add"><strong>cap_add</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> <p><em class="ansible-option-versionadded">added in community.docker 2.2.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>List of capabilities to add to the container.</p> <p>Requires API version &gt;= 1.41.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-cap-drop"><strong>cap_drop</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> <p><em class="ansible-option-versionadded">added in community.docker 2.2.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>List of capabilities to drop from the container.</p> <p>Requires API version &gt;= 1.41.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">   
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-tls-client-cert"><strong id="ansible-collections-community-docker-docker-swarm-service-module-parameter-cert-path">client_cert</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: tls_client_cert, cert_path</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">path</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Path to the client’s TLS certificate file.</p> <p>If the value is not specified in the task and the environment variable <a class="reference internal" href="docsite/scenario_guide.html#envvar-DOCKER_CERT_PATH"><code>DOCKER_CERT_PATH</code></a> is set, the file <code>cert.pem</code> from the directory specified in the environment variable <a class="reference internal" href="docsite/scenario_guide.html#envvar-DOCKER_CERT_PATH"><code>DOCKER_CERT_PATH</code></a> will be used.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">   
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-tls-client-key"><strong id="ansible-collections-community-docker-docker-swarm-service-module-parameter-client-key">client_key</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: tls_client_key, key_path</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">path</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Path to the client’s TLS key file.</p> <p>If the value is not specified in the task and the environment variable <a class="reference internal" href="docsite/scenario_guide.html#envvar-DOCKER_CERT_PATH"><code>DOCKER_CERT_PATH</code></a> is set, the file <code>key.pem</code> from the directory specified in the environment variable <a class="reference internal" href="docsite/scenario_guide.html#envvar-DOCKER_CERT_PATH"><code>DOCKER_CERT_PATH</code></a> will be used.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-command"><strong>command</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">any</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Command to execute when the container starts.</p> <p>A command may be either a string or a list or a list of strings.</p> <p>Corresponds to the <code>COMMAND</code> parameter of <code>docker service create</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-configs"><strong>configs</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>List of dictionaries describing the service configs.</p> <p>Corresponds to the <code>--config</code> option of <code>docker service create</code>.</p> <p>Requires API version &gt;= 1.30.</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-configs-config-id"><strong>config_id</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Config’s ID.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-configs-config-name"><strong>config_name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Config’s name as defined at its creation.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-configs-filename"><strong>filename</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Name of the file containing the config. Defaults to the <code><strong><a class="reference internal" href="#ansible-collections-community-docker-docker-swarm-service-module-parameter-configs-config-name"><span class="std std-ref">configs[].config_name</span></a></strong></code> if not specified.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-configs-gid"><strong>gid</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>GID of the config file’s group.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-configs-mode"><strong>mode</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>File access mode inside the container. Must be an octal number (like <code>0644</code> or <code>0444</code>).</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-configs-uid"><strong>uid</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>UID of the config file’s owner.</p> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-container-labels"><strong>container_labels</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Dictionary of key value pairs.</p> <p>Corresponds to the <code>--container-label</code> option of <code>docker service create</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-debug"><strong>debug</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Debug mode</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-dns"><strong>dns</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>List of custom DNS servers.</p> <p>Corresponds to the <code>--dns</code> option of <code>docker service create</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-dns-options"><strong>dns_options</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>List of custom DNS options.</p> <p>Corresponds to the <code>--dns-option</code> option of <code>docker service create</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-dns-search"><strong>dns_search</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>List of custom DNS search domains.</p> <p>Corresponds to the <code>--dns-search</code> option of <code>docker service create</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-docker-url"><strong id="ansible-collections-community-docker-docker-swarm-service-module-parameter-docker-host">docker_host</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: docker_url</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The URL or Unix socket path used to connect to the Docker API. To connect to a remote host, provide the TCP connection string. For example, <code>tcp://192.0.2.23:2376</code>. If TLS is used to encrypt the connection, the module will automatically replace <code>tcp</code> in the connection URL with <code>https</code>.</p> <p>If the value is not specified in the task, the value of environment variable <a class="reference internal" href="docsite/scenario_guide.html#envvar-DOCKER_HOST"><code>DOCKER_HOST</code></a> will be used instead. If the environment variable is not set, the default value will be used.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"unix:///var/run/docker.sock"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-endpoint-mode"><strong>endpoint_mode</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Service endpoint mode.</p> <p>Corresponds to the <code>--endpoint-mode</code> option of <code>docker service create</code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"vip"</code></li> <li><code>"dnsrr"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-env"><strong>env</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">any</span></p> </div></td> <td><div class="ansible-option-cell">
<p>List or dictionary of the service environment variables.</p> <p>If passed a list each items need to be in the format of <code>KEY=VALUE</code>.</p> <p>If passed a dictionary values which might be parsed as numbers, booleans or other types by the YAML parser must be quoted (for example <code>"true"</code>) in order to avoid data loss.</p> <p>Corresponds to the <code>--env</code> option of <code>docker service create</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-env-files"><strong>env_files</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=path</span></p> </div></td> <td><div class="ansible-option-cell">
<p>List of paths to files, present on the target, containing environment variables <code>FOO=BAR</code>.</p> <p>The order of the list is significant in determining the value assigned to a variable that shows up more than once.</p> <p>If variable also present in <code><strong><a class="reference internal" href="#ansible-collections-community-docker-docker-swarm-service-module-parameter-env"><span class="std std-ref">env</span></a></strong></code>, then <code><strong><a class="reference internal" href="#ansible-collections-community-docker-docker-swarm-service-module-parameter-env"><span class="std std-ref">env</span></a></strong></code> value will override.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-force-update"><strong>force_update</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Force update even if no changes require it.</p> <p>Corresponds to the <code>--force</code> option of <code>docker service update</code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-groups"><strong>groups</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>List of additional group names and/or IDs that the container process will run as.</p> <p>Corresponds to the <code>--group</code> option of <code>docker service update</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-healthcheck"><strong>healthcheck</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Configure a check that is run to determine whether or not containers for this service are “healthy”. See the docs for the <a class="reference external" href="https://docs.docker.com/engine/reference/builder/#healthcheck">HEALTHCHECK Dockerfile instruction</a> for details on how healthchecks work.</p> <p><code><strong><a class="reference internal" href="#ansible-collections-community-docker-docker-swarm-service-module-parameter-healthcheck-interval"><span class="std std-ref">healthcheck.interval</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-community-docker-docker-swarm-service-module-parameter-healthcheck-timeout"><span class="std std-ref">healthcheck.timeout</span></a></strong></code>, and <code><strong><a class="reference internal" href="#ansible-collections-community-docker-docker-swarm-service-module-parameter-healthcheck-start-period"><span class="std std-ref">healthcheck.start_period</span></a></strong></code> are specified as durations. They accept duration as a string in a format that look like: <code>5h34m56s</code>, <code>1m30s</code>, and so on. The supported units are <code>us</code>, <code>ms</code>, <code>s</code>, <code>m</code> and <code>h</code>.</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-healthcheck-interval"><strong>interval</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Time between running the check.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-healthcheck-retries"><strong>retries</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Consecutive failures needed to report unhealthy. It accept integer value.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-healthcheck-start-period"><strong>start_period</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Start period for the container to initialize before starting health-retries countdown.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-healthcheck-test"><strong>test</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">any</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Command to run to check health.</p> <p>Must be either a string or a list. If it is a list, the first item must be one of <code>NONE</code>, <code>CMD</code> or <code>CMD-SHELL</code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-healthcheck-timeout"><strong>timeout</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Maximum time to allow one check to run.</p> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-hostname"><strong>hostname</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Container hostname.</p> <p>Corresponds to the <code>--hostname</code> option of <code>docker service create</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-hosts"><strong>hosts</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Dict of host-to-IP mappings, where each host name is a key in the dictionary. Each host name will be added to the container’s /etc/hosts file.</p> <p>Corresponds to the <code>--host</code> option of <code>docker service create</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-image"><strong>image</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Service image path and tag.</p> <p>Corresponds to the <code>IMAGE</code> parameter of <code>docker service create</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-init"><strong>init</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Use an init inside each service container to forward signals and reap processes.</p> <p>Corresponds to the <code>--init</code> option of <code>docker service create</code>.</p> <p>Requires API version &gt;= 1.37.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-labels"><strong>labels</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Dictionary of key value pairs.</p> <p>Corresponds to the <code>--label</code> option of <code>docker service create</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-limits"><strong>limits</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Configures service resource limits.</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-limits-cpus"><strong>cpus</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">float</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Service CPU limit. <code>0</code> equals no limit.</p> <p>Corresponds to the <code>--limit-cpu</code> option of <code>docker service create</code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-limits-memory"><strong>memory</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Service memory limit in format <code>&lt;number&gt;[&lt;unit&gt;]</code>. Number is a positive integer. Unit can be <code>B</code> (byte), <code>K</code> (kibibyte, 1024B), <code>M</code> (mebibyte), <code>G</code> (gibibyte), <code>T</code> (tebibyte), or <code>P</code> (pebibyte).</p> <p><code>0</code> equals no limit.</p> <p>Omitting the unit defaults to bytes.</p> <p>Corresponds to the <code>--limit-memory</code> option of <code>docker service create</code>.</p> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-logging"><strong>logging</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Logging configuration for the service.</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-logging-driver"><strong>driver</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Configure the logging driver for a service.</p> <p>Corresponds to the <code>--log-driver</code> option of <code>docker service create</code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-logging-options"><strong>options</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Options for service logging driver.</p> <p>Corresponds to the <code>--log-opt</code> option of <code>docker service create</code>.</p> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-mode"><strong>mode</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Service replication mode.</p> <p>Service will be removed and recreated when changed.</p> <p>Corresponds to the <code>--mode</code> option of <code>docker service create</code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"replicated"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"global"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-mounts"><strong>mounts</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>List of dictionaries describing the service mounts.</p> <p>Corresponds to the <code>--mount</code> option of <code>docker service create</code>.</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-mounts-driver-config"><strong>driver_config</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Volume driver configuration.</p> <p>Can only be used when <code><a class="reference internal" href="#ansible-collections-community-docker-docker-swarm-service-module-parameter-mounts-type"><span class="std std-ref">mounts[].type=volume</span></a></code>.</p> </div>
</td> </tr> <tr>
<td>


<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-mounts-driver-config-name"><strong>name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>


<div class="ansible-option-cell">
<p>Name of the volume-driver plugin to use for the volume.</p> </div>
</td> </tr> <tr>
<td>


<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-mounts-driver-config-options"><strong>options</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div>
</td> <td>


<div class="ansible-option-cell">
<p>Options as key-value pairs to pass to the driver for this volume.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-mounts-labels"><strong>labels</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Volume labels to apply.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-mounts-no-copy"><strong>no_copy</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Disable copying of data from a container when a volume is created.</p> <p>Can only be used when <code><a class="reference internal" href="#ansible-collections-community-docker-docker-swarm-service-module-parameter-mounts-type"><span class="std std-ref">mounts[].type=volume</span></a></code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-mounts-propagation"><strong>propagation</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The propagation mode to use.</p> <p>Can only be used when <code><a class="reference internal" href="#ansible-collections-community-docker-docker-swarm-service-module-parameter-mounts-type"><span class="std std-ref">mounts[].type=bind</span></a></code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"shared"</code></li> <li><code>"slave"</code></li> <li><code>"private"</code></li> <li><code>"rshared"</code></li> <li><code>"rslave"</code></li> <li><code>"rprivate"</code></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-mounts-readonly"><strong>readonly</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Whether the mount should be read-only.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-mounts-source"><strong>source</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Mount source (for example a volume name or a host path).</p> <p>Must be specified if <code><strong><a class="reference internal" href="#ansible-collections-community-docker-docker-swarm-service-module-parameter-mounts-type"><span class="std std-ref">mounts[].type</span></a></strong></code> is not <code>tmpfs</code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-mounts-target"><strong>target</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Container path.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-mounts-tmpfs-mode"><strong>tmpfs_mode</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>File mode of the tmpfs in octal.</p> <p>Can only be used when <code><a class="reference internal" href="#ansible-collections-community-docker-docker-swarm-service-module-parameter-mounts-type"><span class="std std-ref">mounts[].type=tmpfs</span></a></code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-mounts-tmpfs-size"><strong>tmpfs_size</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Size of the tmpfs mount in format <code>&lt;number&gt;[&lt;unit&gt;]</code>. Number is a positive integer. Unit can be <code>B</code> (byte), <code>K</code> (kibibyte, 1024B), <code>M</code> (mebibyte), <code>G</code> (gibibyte), <code>T</code> (tebibyte), or <code>P</code> (pebibyte).</p> <p>Can only be used when <code><a class="reference internal" href="#ansible-collections-community-docker-docker-swarm-service-module-parameter-mounts-type"><span class="std std-ref">mounts[].type=tmpfs</span></a></code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-mounts-type"><strong>type</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The mount type.</p> <p>Note that <code>npipe</code> is only supported by Docker for Windows. Also note that <code>npipe</code> was added in Ansible 2.9.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"bind"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"volume"</code></li> <li><code>"tmpfs"</code></li> <li><code>"npipe"</code></li> </ul> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-name"><strong>name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Service name.</p> <p>Corresponds to the <code>--name</code> option of <code>docker service create</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-networks"><strong>networks</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=any</span></p> </div></td> <td><div class="ansible-option-cell">
<p>List of the service networks names or dictionaries.</p> <p>When passed dictionaries valid sub-options are <code>name</code>, which is required, and <code>aliases</code> and <code>options</code>.</p> <p>Prior to API version 1.29, updating and removing networks is not supported. If changes are made the service will then be removed and recreated.</p> <p>Corresponds to the <code>--network</code> option of <code>docker service create</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-placement"><strong>placement</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Configures service placement preferences and constraints.</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-placement-constraints"><strong>constraints</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>List of the service constraints.</p> <p>Corresponds to the <code>--constraint</code> option of <code>docker service create</code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-placement-preferences"><strong>preferences</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=dictionary</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>List of the placement preferences as key value pairs.</p> <p>Corresponds to the <code>--placement-pref</code> option of <code>docker service create</code>.</p> <p>Requires API version &gt;= 1.27.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-placement-replicas-max-per-node"><strong>replicas_max_per_node</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> <p><em class="ansible-option-versionadded">added in community.docker 1.3.0</em></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Maximum number of tasks per node.</p> <p>Corresponds to the <code>--replicas_max_per_node</code> option of <code>docker service create</code>.</p> <p>Requires API version &gt;= 1.40</p> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-publish"><strong>publish</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>List of dictionaries describing the service published ports.</p> <p>Corresponds to the <code>--publish</code> option of <code>docker service create</code>.</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-publish-mode"><strong>mode</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>What publish mode to use.</p> <p>Requires API version &gt;= 1.32.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"ingress"</code></li> <li><code>"host"</code></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-publish-protocol"><strong>protocol</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>What protocol to use.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"tcp"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"udp"</code></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-publish-published-port"><strong>published_port</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The port to make externally available.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-publish-target-port"><strong>target_port</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span> / <span class="ansible-option-required">required</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The port inside the container to expose.</p> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-read-only"><strong>read_only</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Mount the containers root filesystem as read only.</p> <p>Corresponds to the <code>--read-only</code> option of <code>docker service create</code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-replicas"><strong>replicas</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Number of containers instantiated in the service. Valid only if <code><a class="reference internal" href="#ansible-collections-community-docker-docker-swarm-service-module-parameter-mode"><span class="std std-ref">mode=replicated</span></a></code>.</p> <p>If set to <code>-1</code>, and service is not present, service replicas will be set to <code>1</code>.</p> <p>If set to <code>-1</code>, and service is present, service replicas will be unchanged.</p> <p>Corresponds to the <code>--replicas</code> option of <code>docker service create</code>.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>-1</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-reservations"><strong>reservations</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Configures service resource reservations.</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-reservations-cpus"><strong>cpus</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">float</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Service CPU reservation. <code>0</code> equals no reservation.</p> <p>Corresponds to the <code>--reserve-cpu</code> option of <code>docker service create</code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-reservations-memory"><strong>memory</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Service memory reservation in format <code>&lt;number&gt;[&lt;unit&gt;]</code>. Number is a positive integer. Unit can be <code>B</code> (byte), <code>K</code> (kibibyte, 1024B), <code>M</code> (mebibyte), <code>G</code> (gibibyte), <code>T</code> (tebibyte), or <code>P</code> (pebibyte).</p> <p><code>0</code> equals no reservation.</p> <p>Omitting the unit defaults to bytes.</p> <p>Corresponds to the <code>--reserve-memory</code> option of <code>docker service create</code>.</p> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-resolve-image"><strong>resolve_image</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>If the current image digest should be resolved from registry and updated if changed.</p> <p>Requires API version &gt;= 1.30.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-restart-config"><strong>restart_config</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Configures if and how to restart containers when they exit.</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-restart-config-condition"><strong>condition</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Restart condition of the service.</p> <p>Corresponds to the <code>--restart-condition</code> option of <code>docker service create</code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"none"</code></li> <li><code>"on-failure"</code></li> <li><code>"any"</code></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-restart-config-delay"><strong>delay</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Delay between restarts.</p> <p>Accepts a a string in a format that look like: <code>5h34m56s</code>, <code>1m30s</code> etc. The supported units are <code>us</code>, <code>ms</code>, <code>s</code>, <code>m</code> and <code>h</code>.</p> <p>Corresponds to the <code>--restart-delay</code> option of <code>docker service create</code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-restart-config-max-attempts"><strong>max_attempts</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Maximum number of service restarts.</p> <p>Corresponds to the <code>--restart-condition</code> option of <code>docker service create</code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-restart-config-window"><strong>window</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Restart policy evaluation window.</p> <p>Accepts a string in a format that look like: <code>5h34m56s</code>, <code>1m30s</code> etc. The supported units are <code>us</code>, <code>ms</code>, <code>s</code>, <code>m</code> and <code>h</code>.</p> <p>Corresponds to the <code>--restart-window</code> option of <code>docker service create</code>.</p> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-rollback-config"><strong>rollback_config</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Configures how the service should be rolled back in case of a failing update.</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-rollback-config-delay"><strong>delay</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Delay between task rollbacks.</p> <p>Accepts a string in a format that look like: <code>5h34m56s</code>, <code>1m30s</code> etc. The supported units are <code>us</code>, <code>ms</code>, <code>s</code>, <code>m</code> and <code>h</code>.</p> <p>Corresponds to the <code>--rollback-delay</code> option of <code>docker service create</code>.</p> <p>Requires API version &gt;= 1.28.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-rollback-config-failure-action"><strong>failure_action</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Action to take in case of rollback failure.</p> <p>Corresponds to the <code>--rollback-failure-action</code> option of <code>docker service create</code>.</p> <p>Requires API version &gt;= 1.28.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"continue"</code></li> <li><code>"pause"</code></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-rollback-config-max-failure-ratio"><strong>max_failure_ratio</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">float</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Fraction of tasks that may fail during a rollback.</p> <p>Corresponds to the <code>--rollback-max-failure-ratio</code> option of <code>docker service create</code>.</p> <p>Requires API version &gt;= 1.28.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-rollback-config-monitor"><strong>monitor</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Duration after each task rollback to monitor for failure.</p> <p>Accepts a string in a format that look like: <code>5h34m56s</code>, <code>1m30s</code> etc. The supported units are <code>us</code>, <code>ms</code>, <code>s</code>, <code>m</code> and <code>h</code>.</p> <p>Corresponds to the <code>--rollback-monitor</code> option of <code>docker service create</code>.</p> <p>Requires API version &gt;= 1.28.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-rollback-config-order"><strong>order</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Specifies the order of operations during rollbacks.</p> <p>Corresponds to the <code>--rollback-order</code> option of <code>docker service create</code>.</p> <p>Requires API version &gt;= 1.29.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-rollback-config-parallelism"><strong>parallelism</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The number of containers to rollback at a time. If set to 0, all containers rollback simultaneously.</p> <p>Corresponds to the <code>--rollback-parallelism</code> option of <code>docker service create</code>.</p> <p>Requires API version &gt;= 1.28.</p> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-secrets"><strong>secrets</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>List of dictionaries describing the service secrets.</p> <p>Corresponds to the <code>--secret</code> option of <code>docker service create</code>.</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-secrets-filename"><strong>filename</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Name of the file containing the secret. Defaults to the <code><strong><a class="reference internal" href="#ansible-collections-community-docker-docker-swarm-service-module-parameter-secrets-secret-name"><span class="std std-ref">secrets[].secret_name</span></a></strong></code> if not specified.</p> <p>Corresponds to the <code>target</code> key of <code>docker service create --secret</code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-secrets-gid"><strong>gid</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>GID of the secret file’s group.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-secrets-mode"><strong>mode</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>File access mode inside the container. Must be an octal number (like <code>0644</code> or <code>0444</code>).</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-secrets-secret-id"><strong>secret_id</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Secret’s ID.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-secrets-secret-name"><strong>secret_name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Secret’s name as defined at its creation.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-secrets-uid"><strong>uid</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>UID of the secret file’s owner.</p> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-ssl-version"><strong>ssl_version</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Provide a valid SSL version number. Default value determined by <a class="reference external" href="https://docs.python.org/3/library/ssl.html">SSL Python module</a>.</p> <p>If the value is not specified in the task, the value of environment variable <a class="reference internal" href="docsite/scenario_guide.html#envvar-DOCKER_SSL_VERSION"><code>DOCKER_SSL_VERSION</code></a> will be used instead.</p> <p><strong>Note:</strong> this option is no longer supported for Docker SDK for Python 7.0.0+. Specifying it with Docker SDK for Python 7.0.0 or newer will lead to an error.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-state"><strong>state</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p><code>absent</code> - A service matching the specified name will be removed and have its tasks stopped.</p> <p><code>present</code> - Asserts the existence of a service matching the name and provided configuration parameters. Unspecified configuration parameters will be set to docker defaults.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"present"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"absent"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-stop-grace-period"><strong>stop_grace_period</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Time to wait before force killing a container.</p> <p>Accepts a duration as a string in a format that look like: <code>5h34m56s</code>, <code>1m30s</code> etc. The supported units are <code>us</code>, <code>ms</code>, <code>s</code>, <code>m</code> and <code>h</code>.</p> <p>Corresponds to the <code>--stop-grace-period</code> option of <code>docker service create</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-stop-signal"><strong>stop_signal</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Override default signal used to stop the container.</p> <p>Corresponds to the <code>--stop-signal</code> option of <code>docker service create</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-sysctls"><strong>sysctls</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> <p><em class="ansible-option-versionadded">added in community.docker 3.10.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Dictionary of key, value pairs.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-timeout"><strong>timeout</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The maximum amount of time in seconds to wait on a response from the API.</p> <p>If the value is not specified in the task, the value of environment variable <a class="reference internal" href="docsite/scenario_guide.html#envvar-DOCKER_TIMEOUT"><code>DOCKER_TIMEOUT</code></a> will be used instead. If the environment variable is not set, the default value will be used.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>60</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-tls"><strong>tls</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Secure the connection to the API by using TLS without verifying the authenticity of the Docker host server. Note that if <code><strong><a class="reference internal" href="#ansible-collections-community-docker-docker-swarm-service-module-parameter-validate-certs"><span class="std std-ref">validate_certs</span></a></strong></code> is set to <code>true</code> as well, it will take precedence.</p> <p>If the value is not specified in the task, the value of environment variable <a class="reference internal" href="docsite/scenario_guide.html#envvar-DOCKER_TLS"><code>DOCKER_TLS</code></a> will be used instead. If the environment variable is not set, the default value will be used.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-tls-hostname"><strong>tls_hostname</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>When verifying the authenticity of the Docker Host server, provide the expected name of the server.</p> <p>If the value is not specified in the task, the value of environment variable <a class="reference internal" href="docsite/scenario_guide.html#envvar-DOCKER_TLS_HOSTNAME"><code>DOCKER_TLS_HOSTNAME</code></a> will be used instead. If the environment variable is not set, the default value will be used.</p> <p>Note that this option had a default value <code>localhost</code> in older versions. It was removed in community.docker 3.0.0.</p> <p><strong>Note:</strong> this option is no longer supported for Docker SDK for Python 7.0.0+. Specifying it with Docker SDK for Python 7.0.0 or newer will lead to an error.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-tty"><strong>tty</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Allocate a pseudo-TTY.</p> <p>Corresponds to the <code>--tty</code> option of <code>docker service create</code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-update-config"><strong>update_config</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Configures how the service should be updated. Useful for configuring rolling updates.</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-update-config-delay"><strong>delay</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Rolling update delay.</p> <p>Accepts a string in a format that look like: <code>5h34m56s</code>, <code>1m30s</code> etc. The supported units are <code>us</code>, <code>ms</code>, <code>s</code>, <code>m</code> and <code>h</code>.</p> <p>Corresponds to the <code>--update-delay</code> option of <code>docker service create</code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-update-config-failure-action"><strong>failure_action</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Action to take in case of container failure.</p> <p>Corresponds to the <code>--update-failure-action</code> option of <code>docker service create</code>.</p> <p>Usage of <code>rollback</code> requires API version &gt;= 1.29.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"continue"</code></li> <li><code>"pause"</code></li> <li><code>"rollback"</code></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-update-config-max-failure-ratio"><strong>max_failure_ratio</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">float</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Fraction of tasks that may fail during an update before the failure action is invoked.</p> <p>Corresponds to the <code>--update-max-failure-ratio</code> option of <code>docker service create</code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-update-config-monitor"><strong>monitor</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Time to monitor updated tasks for failures.</p> <p>Accepts a string in a format that look like: <code>5h34m56s</code>, <code>1m30s</code> etc. The supported units are <code>us</code>, <code>ms</code>, <code>s</code>, <code>m</code> and <code>h</code>.</p> <p>Corresponds to the <code>--update-monitor</code> option of <code>docker service create</code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-update-config-order"><strong>order</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Specifies the order of operations when rolling out an updated task.</p> <p>Corresponds to the <code>--update-order</code> option of <code>docker service create</code>.</p> <p>Requires API version &gt;= 1.29.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-update-config-parallelism"><strong>parallelism</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Rolling update parallelism.</p> <p>Corresponds to the <code>--update-parallelism</code> option of <code>docker service create</code>.</p> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-use-ssh-client"><strong>use_ssh_client</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in community.docker 1.5.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>For SSH transports, use the <code>ssh</code> CLI tool instead of paramiko.</p> <p>Requires Docker SDK for Python 4.4.0 or newer.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-user"><strong>user</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Sets the username or UID used for the specified command.</p> <p>Before Ansible 2.8, the default value for this option was <code>root</code>.</p> <p>The default has been removed so that the user defined in the image is used if no user is specified here.</p> <p>Corresponds to the <code>--user</code> option of <code>docker service create</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-validate-certs"><strong id="ansible-collections-community-docker-docker-swarm-service-module-parameter-tls-verify">validate_certs</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: tls_verify</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Secure the connection to the API by using TLS and verifying the authenticity of the Docker host server.</p> <p>If the value is not specified in the task, the value of environment variable <a class="reference internal" href="docsite/scenario_guide.html#envvar-DOCKER_TLS_VERIFY"><code>DOCKER_TLS_VERIFY</code></a> will be used instead. If the environment variable is not set, the default value will be used.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-parameter-working-dir"><strong>working_dir</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Path to the working directory.</p> <p>Corresponds to the <code>--workdir</code> option of <code>docker service create</code>.</p> </div></td> </tr>  </table> </section> <section id="attributes"> <h2>Attributes</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Attribute</p></th> <th class="head"><p>Support</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-attribute-action-group"><strong>action_group</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-property">Action groups:</strong> <strong class="ansible-attribute-support-full">community.docker.docker</strong>, <strong class="ansible-attribute-support-full">docker</strong></p> </div></td> <td><div class="ansible-option-cell">
<p>Use <code>group/docker</code> or <code>group/community.docker.docker</code> in <code>module_defaults</code> to set defaults for this module.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-attribute-check-mode"><strong>check_mode</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-label">Support: </strong><strong class="ansible-attribute-support-full">full</strong></p> </div></td> <td><div class="ansible-option-cell">
<p>Can run in <code>check_mode</code> and return changed status prediction without modifying target.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-attribute-diff-mode"><strong>diff_mode</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-label">Support: </strong><strong class="ansible-attribute-support-full">full</strong></p> </div></td> <td><div class="ansible-option-cell">
<p>Will return details on what has changed (or possibly needs changing in <code>check_mode</code>), when in diff mode.</p> </div></td> </tr>  </table> </section> <section id="notes"> <h2>Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>Images will only resolve to the latest digest when using Docker API &gt;= 1.30 and Docker SDK for Python &gt;= 3.2.0. When using older versions use <code><a class="reference internal" href="#ansible-collections-community-docker-docker-swarm-service-module-parameter-force-update"><span class="std std-ref">force_update=true</span></a></code> to trigger the swarm to resolve a new image.</li> <li>Connect to the Docker daemon by providing parameters with each task or by defining environment variables. You can define <a class="reference internal" href="docsite/scenario_guide.html#envvar-DOCKER_HOST"><code>DOCKER_HOST</code></a>, <a class="reference internal" href="docsite/scenario_guide.html#envvar-DOCKER_TLS_HOSTNAME"><code>DOCKER_TLS_HOSTNAME</code></a>, <a class="reference internal" href="docsite/scenario_guide.html#envvar-DOCKER_API_VERSION"><code>DOCKER_API_VERSION</code></a>, <a class="reference internal" href="docsite/scenario_guide.html#envvar-DOCKER_CERT_PATH"><code>DOCKER_CERT_PATH</code></a>, <a class="reference internal" href="docsite/scenario_guide.html#envvar-DOCKER_SSL_VERSION"><code>DOCKER_SSL_VERSION</code></a>, <a class="reference internal" href="docsite/scenario_guide.html#envvar-DOCKER_TLS"><code>DOCKER_TLS</code></a>, <a class="reference internal" href="docsite/scenario_guide.html#envvar-DOCKER_TLS_VERIFY"><code>DOCKER_TLS_VERIFY</code></a> and <a class="reference internal" href="docsite/scenario_guide.html#envvar-DOCKER_TIMEOUT"><code>DOCKER_TIMEOUT</code></a>. If you are using docker machine, run the script shipped with the product that sets up the environment. It will set these variables for you. See <a class="reference external" href="https://docs.docker.com/machine/reference/env/">https://docs.docker.com/machine/reference/env/</a> for more details.</li> <li>When connecting to Docker daemon with TLS, you might need to install additional Python packages. For the Docker SDK for Python, version 2.4 or newer, this can be done by installing <code>docker[tls]</code> with <a class="reference internal" href="../../ansible/builtin/pip_module.html#ansible-collections-ansible-builtin-pip-module"><span class="std std-ref">ansible.builtin.pip</span></a>.</li> <li>Note that the Docker SDK for Python only allows to specify the path to the Docker configuration for very few functions. In general, it will use <code>$HOME/.docker/config.json</code> if the <code>DOCKER_CONFIG</code> environment variable is not specified, and use <code>$DOCKER_CONFIG/config.json</code> otherwise.</li> <li>This module uses the <a class="reference external" href="https://docker-py.readthedocs.io/en/stable/">Docker SDK for Python</a> to communicate with the Docker daemon.</li> </ul> </div> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja">- name: Set command and arguments
  community.docker.docker_swarm_service:
    name: myservice
    image: alpine
    command: sleep
    args:
      - "3600"

- name: Set a bind mount
  community.docker.docker_swarm_service:
    name: myservice
    image: alpine
    mounts:
      - source: /tmp/
        target: /remote_tmp/
        type: bind

- name: Set service labels
  community.docker.docker_swarm_service:
    name: myservice
    image: alpine
    labels:
      com.example.description: "Accounting webapp"
      com.example.department: "Finance"

- name: Set environment variables
  community.docker.docker_swarm_service:
    name: myservice
    image: alpine
    env:
      ENVVAR1: envvar1
      ENVVAR2: envvar2
    env_files:
      - envs/common.env
      - envs/apps/web.env

- name: Set fluentd logging
  community.docker.docker_swarm_service:
    name: myservice
    image: alpine
    logging:
      driver: fluentd
      options:
        fluentd-address: "127.0.0.1:24224"
        fluentd-async-connect: "true"
        tag: myservice

- name: Set restart policies
  community.docker.docker_swarm_service:
    name: myservice
    image: alpine
    restart_config:
      condition: on-failure
      delay: 5s
      max_attempts: 3
      window: 120s

- name: Set update config
  community.docker.docker_swarm_service:
    name: myservice
    image: alpine
    update_config:
      parallelism: 2
      delay: 10s
      order: stop-first

- name: Set rollback config
  community.docker.docker_swarm_service:
    name: myservice
    image: alpine
    update_config:
      failure_action: rollback
    rollback_config:
      parallelism: 2
      delay: 10s
      order: stop-first

- name: Set placement preferences
  community.docker.docker_swarm_service:
    name: myservice
    image: alpine:edge
    placement:
      preferences:
        - spread: node.labels.mylabel
      constraints:
        - node.role == manager
        - engine.labels.operatingsystem == ubuntu 14.04
      replicas_max_per_node: 2

- name: Set configs
  community.docker.docker_swarm_service:
    name: myservice
    image: alpine:edge
    configs:
      - config_name: myconfig_name
        filename: "/tmp/config.txt"

- name: Set networks
  community.docker.docker_swarm_service:
    name: myservice
    image: alpine:edge
    networks:
      - mynetwork

- name: Set networks as a dictionary
  community.docker.docker_swarm_service:
    name: myservice
    image: alpine:edge
    networks:
      - name: "mynetwork"
        aliases:
          - "mynetwork_alias"
        options:
          foo: bar

- name: Set secrets
  community.docker.docker_swarm_service:
    name: myservice
    image: alpine:edge
    secrets:
      - secret_name: mysecret_name
        filename: "/run/secrets/secret.txt"

- name: Start service with healthcheck
  community.docker.docker_swarm_service:
    name: myservice
    image: nginx:1.13
    healthcheck:
      # Check if nginx server is healthy by curl'ing the server.
      # If this fails or timeouts, the healthcheck fails.
      test: ["CMD", "curl", "--fail", "http://nginx.host.com"]
      interval: 1m30s
      timeout: 10s
      retries: 3
      start_period: 30s

- name: Configure service resources
  community.docker.docker_swarm_service:
    name: myservice
    image: alpine:edge
    reservations:
      cpus: 0.25
      memory: 20M
    limits:
      cpus: 0.50
      memory: 50M

- name: Remove service
  community.docker.docker_swarm_service:
    name: myservice
    state: absent
</pre> </section> <section id="return-values"> <h2>Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values.html#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Key</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-return-changes"><strong>changes</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>List of changed service attributes if a service has been altered, [] otherwise.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> always</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>["container_labels", "replicas"]</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-return-rebuilt"><strong>rebuilt</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>True if the service has been recreated (removed and created)</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> always</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>true</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-community-docker-docker-swarm-service-module-return-swarm-service"><strong>swarm_service</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Dictionary of variables representing the current state of the service. Matches the module parameters format.</p> <p>Note that facts are not part of registered vars but accessible directly.</p> <p>Note that before Ansible 2.7.9, the return variable was documented as <code>ansible_swarm_service</code>, while the module actually returned a variable called <code>ansible_docker_service</code>. The variable was renamed to <code><a class="reference internal" href="#ansible-collections-community-docker-docker-swarm-service-module-return-swarm-service"><span class="std std-ref">swarm_service</span></a></code> in both code and documentation for Ansible 2.7.9 and Ansible 2.8.0. In Ansible 2.7.x, the old name <code>ansible_docker_service</code> can still be used.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> always</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>{"args": ["3600"], "cap_add": null, "cap_drop": ["ALL"], "command": ["sleep"], "configs": null, "constraints": ["node.role == manager", "engine.labels.operatingsystem == ubuntu 14.04"], "container_labels": null, "dns": null, "dns_options": null, "dns_search": null, "endpoint_mode": null, "env": ["ENVVAR1=envvar1", "ENVVAR2=envvar2"], "force_update": null, "groups": null, "healthcheck": {"interval": 90000000000, "retries": 3, "start_period": 30000000000, "test": ["CMD", "curl", "--fail", "http://nginx.host.com"], "timeout": 10000000000}, "healthcheck_disabled": false, "hostname": null, "hosts": null, "image": "alpine:latest@sha256:b3dbf31b77fd99d9c08f780ce6f5282aba076d70a513a8be859d8d3a4d0c92b8", "labels": {"com.example.department": "Finance", "com.example.description": "Accounting webapp"}, "limit_cpu": 0.5, "limit_memory": 52428800, "log_driver": "fluentd", "log_driver_options": {"fluentd-address": "127.0.0.1:24224", "fluentd-async-connect": "true", "tag": "myservice"}, "mode": "replicated", "mounts": [{"driver_config": null, "labels": null, "no_copy": null, "propagation": null, "readonly": false, "source": "/tmp/", "target": "/remote_tmp/", "tmpfs_mode": null, "tmpfs_size": null, "type": "bind"}], "networks": null, "placement_preferences": [{"spread": "node.labels.mylabel"}], "publish": null, "read_only": null, "replicas": 1, "replicas_max_per_node": 1, "reserve_cpu": 0.25, "reserve_memory": 20971520, "restart_policy": "on-failure", "restart_policy_attempts": 3, "restart_policy_delay": 5000000000, "restart_policy_window": 120000000000, "secrets": null, "stop_grace_period": null, "stop_signal": null, "sysctls": null, "tty": null, "update_delay": 10000000000, "update_failure_action": null, "update_max_failure_ratio": null, "update_monitor": null, "update_order": "stop-first", "update_parallelism": 2, "user": null, "working_dir": null}</code></p> </div></td> </tr>  </table> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Dario Zanzico (@dariko)</li> <li>Jason Witkowski (@jwitko)</li> <li>Hannes Ljungberg (@hannseman)</li> <li>Piotr Wojciechowski (@wojciechowskipiotr)</li> </ul> </section> <section id="collection-links"> <h3>Collection links</h3> <ul class="ansible-links"> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.docker/issues" rel="noopener external" target="_blank">Issue Tracker</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.docker" rel="noopener external" target="_blank">Repository (Sources)</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://forum.ansible.com/tags/c/help/6/none/docker" rel="noopener external" target="_blank">Ask for help (Docker)</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://forum.ansible.com/tags/c/help/6/none/docker-compose" rel="noopener external" target="_blank">Ask for help (Docker Compose)</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://forum.ansible.com/tags/c/help/6/none/docker-swarm" rel="noopener external" target="_blank">Ask for help (Docker Swarm)</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.docker/issues/new?assignees=&amp;labels=&amp;template=bug_report.md" rel="noopener external" target="_blank">Submit a bug report</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/community.docker/issues/new?assignees=&amp;labels=&amp;template=feature_request.md" rel="noopener external" target="_blank">Request a feature</a></span></li> <li><span><a class="reference internal" href="index.html#communication-for-community-docker"><span class="std std-ref">Communication</span></a></span></li> </ul> </section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2024 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/community/docker/docker_swarm_service_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/community/docker/docker_swarm_service_module.html</a>
  </p>
</div>
