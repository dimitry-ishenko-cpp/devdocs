<h1 id="community-google-gce-labels-create-update-or-destroy-gce-labels">community.google.gce_labels – Create, Update or Destroy GCE Labels.</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/community/google">community.google collection</a> (version 1.0.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install community.google</code>.</p> <p>To use it in a playbook, specify: <code>community.google.gce_labels</code>.</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id4">Notes</a></li> <li><a class="reference internal" href="#examples" id="id5">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id6">Return Values</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Create, Update or Destroy GCE Labels on instances, disks, snapshots, etc. When specifying the GCE resource, users may specify the full URL for the resource (its ‘self_link’), or the individual parameters of the resource (type, location, name). Examples for the two options can be seen in the documentation. See <a class="reference external" href="https://cloud.google.com/compute/docs/label-or-tag-resources">https://cloud.google.com/compute/docs/label-or-tag-resources</a> for more information about GCE Labels. Labels are gradually being added to more GCE resources, so this module will need to be updated as new resources are added to the GCE (v1) API.</li> </ul>   <h2 id="requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>python &gt;= 2.6</li> <li>google-api-python-client &gt;= 1.6.2</li> <li>google-auth &gt;= 1.0.0</li> <li>google-auth-httplib2 &gt;= 0.0.2</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="1">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="1">  <b>credentials_file</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The path to the JSON file associated with the service account email.</div> </td> </tr> <tr> <td colspan="1">  <b>labels</b>  <div> <span>dictionary</span> </div> </td> <td> </td> <td> <div>A list of labels (key/value pairs) to add or remove for the resource.</div> </td> </tr> <tr> <td colspan="1">  <b>pem_file</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The path to the PEM file associated with the service account email.</div> <div>This option is deprecated and may be removed in a future release. Use <em>credentials_file</em> instead.</div> </td> </tr> <tr> <td colspan="1">  <b>project_id</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The Google Cloud Platform project ID to use.</div> </td> </tr> <tr> <td colspan="1">  <b>resource_location</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The location of resource (global, us-central1-f, etc.)</div> </td> </tr> <tr> <td colspan="1">  <b>resource_name</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The name of resource.</div> </td> </tr> <tr> <td colspan="1">  <b>resource_type</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The type of resource (instances, disks, snapshots, images)</div> </td> </tr> <tr> <td colspan="1">  <b>resource_url</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The 'self_link' for the resource (instance, disk, snapshot, etc)</div> </td> </tr> <tr> <td colspan="1">  <b>service_account_email</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>service account email</div> </td> </tr> <tr> <td colspan="1">  <b>service_account_permissions</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>service account email</div> </td> </tr> <tr> <td colspan="1">  <b>state</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>present</b> ←</div></li> <li>absent</li> </ul> </td> <td> <div>The state the labels should be in. <code>present</code> or <code>absent</code> are the only valid options.</div> </td> </tr> </table> <br>  <h2 id="notes">Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>Labels support resources such as instances, disks, images, etc. See <a class="reference external" href="https://cloud.google.com/compute/docs/labeling-resources">https://cloud.google.com/compute/docs/labeling-resources</a> for the list of resources available in the GCE v1 API (not alpha or beta).</li> </ul> </div>   <h2 id="examples">Examples</h2> <pre data-language="yaml+jinja">- name: Add labels on an existing instance (using resource_url)
  community.google.gce_labels:
    service_account_email: "{{ service_account_email }}"
    credentials_file: "{{ credentials_file }}"
    project_id: "{{ project_id }}"
    labels:
      webserver-frontend: homepage
      environment: test
      experiment-name: kennedy
    resource_url: https://www.googleapis.com/compute/beta/projects/myproject/zones/us-central1-f/instances/example-instance
    state: present
- name: Add labels on an image (using resource params)
  community.google.gce_labels:
    service_account_email: "{{ service_account_email }}"
    credentials_file: "{{ credentials_file }}"
    project_id: "{{ project_id }}"
    labels:
      webserver-frontend: homepage
      environment: test
      experiment-name: kennedy
    resource_type: images
    resource_location: global
    resource_name: my-custom-image
    state: present
- name: Remove specified labels from the GCE instance
  community.google.gce_labels:
    service_account_email: "{{ service_account_email }}"
    credentials_file: "{{ credentials_file }}"
    project_id: "{{ project_id }}"
    labels:
      environment: prod
      experiment-name: kennedy
    resource_url: https://www.googleapis.com/compute/beta/projects/myproject/zones/us-central1-f/instances/example-instance
    state: absent
</pre>   <h2 id="return-values">Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values.html#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="documentation-table"> <tr> <th colspan="1">Key</th> <th>Returned</th> <th width="100%">Description</th> </tr> <tr> <td colspan="1">  <b>labels</b>  <div> <span>dictionary</span> </div> </td> <td>Always.</td> <td> <div>List of labels that exist on the resource.</div> <br> <div><b>Sample:</b></div> <div>[{'environment': 'test', 'environment-name': 'kennedy', 'webserver-frontend': 'homepage'}]</div> </td> </tr> <tr> <td colspan="1">  <b>resource_location</b>  <div> <span>string</span> </div> </td> <td>Always.</td> <td> <div>The location of the GCE resource.</div> <br> <div><b>Sample:</b></div> <div>us-central1-f</div> </td> </tr> <tr> <td colspan="1">  <b>resource_name</b>  <div> <span>string</span> </div> </td> <td>Always.</td> <td> <div>The name of the GCE resource.</div> <br> <div><b>Sample:</b></div> <div>my-happy-little-instance</div> </td> </tr> <tr> <td colspan="1">  <b>resource_type</b>  <div> <span>string</span> </div> </td> <td>Always.</td> <td> <div>The type of the GCE resource.</div> <br> <div><b>Sample:</b></div> <div>instances</div> </td> </tr> <tr> <td colspan="1">  <b>resource_url</b>  <div> <span>string</span> </div> </td> <td>Always.</td> <td> <div>The 'self_link' of the GCE resource.</div> <br> <div><b>Sample:</b></div> <div>https://www.googleapis.com/compute/beta/projects/myproject/zones/us-central1-f/instances/example-instance</div> </td> </tr> <tr> <td colspan="1">  <b>state</b>  <div> <span>string</span> </div> </td> <td>Always.</td> <td> <div>state of the labels</div> <br> <div><b>Sample:</b></div> <div>present</div> </td> </tr> </table> <br><br> <h3 id="authors">Authors</h3> <ul class="simple"> <li>Eric Johnson (@erjohnso) &lt;<a class="reference external" href="https://docs.ansible.com/cdn-cgi/l/email-protection#dabfa8b0b5b2b4a9b5fcf9e9ede1fcf9efe8e1fcf9eee2e1bdb5b5bdb6bffcf9eeece1b9b5b7">erjohnso<span>@</span>google<span>.</span>com</a>&gt;</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2021 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/community/google/gce_labels_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/community/google/gce_labels_module.html</a>
  </p>
</div>
