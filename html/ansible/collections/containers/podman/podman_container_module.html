<h1 id="containers-podman-podman-container-manage-podman-containers">containers.podman.podman_container – Manage podman containers</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/containers/podman">containers.podman collection</a> (version 1.8.1).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install containers.podman</code>.</p> <p>To use it in a playbook, specify: <code>containers.podman.podman_container</code>.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 1.0.0: </span>of containers.podman</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id5">Return Values</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Start, stop, restart and manage Podman containers</li> </ul>   <h2 id="requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>podman</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="2">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="2">  <b>annotation</b>  <div> <span>dictionary</span> </div> </td> <td> </td> <td> <div>Add an annotation to the container. The format is key value, multiple times.</div> </td> </tr> <tr> <td colspan="2">  <b>authfile</b>  <div> <span>path</span> </div> </td> <td> </td> <td> <div>Path of the authentication file. Default is ``${XDG_RUNTIME_DIR}/containers/auth.json`` (Not available for remote commands) You can also override the default path of the authentication file by setting the ``REGISTRY_AUTH_FILE`` environment variable. ``export REGISTRY_AUTH_FILE=path``</div> </td> </tr> <tr> <td colspan="2">  <b>blkio_weight</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>Block IO weight (relative weight) accepts a weight value between 10 and 1000</div> </td> </tr> <tr> <td colspan="2">  <b>blkio_weight_device</b>  <div> <span>dictionary</span> </div> </td> <td> </td> <td> <div>Block IO weight (relative device weight, format DEVICE_NAME[:]WEIGHT).</div> </td> </tr> <tr> <td colspan="2">  <b>cap_add</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>List of capabilities to add to the container.</div> <div>
<br>aliases: capabilities</div> </td> </tr> <tr> <td colspan="2">  <b>cap_drop</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>List of capabilities to drop from the container.</div> </td> </tr> <tr> <td colspan="2">  <b>cgroup_parent</b>  <div> <span>path</span> </div> </td> <td> </td> <td> <div>Path to cgroups under which the cgroup for the container will be created. If the path is not absolute, the path is considered to be relative to the cgroups path of the init process. Cgroups will be created if they do not already exist.</div> </td> </tr> <tr> <td colspan="2">  <b>cgroupns</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Path to cgroups under which the cgroup for the container will be created.</div> </td> </tr> <tr> <td colspan="2">  <b>cgroups</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Determines whether the container will create CGroups. Valid values are enabled and disabled, which the default being enabled. The disabled option will force the container to not create CGroups, and thus conflicts with CGroup options cgroupns and cgroup-parent.</div> </td> </tr> <tr> <td colspan="2">  <b>cidfile</b>  <div> <span>path</span> </div> </td> <td> </td> <td> <div>Write the container ID to the file</div> </td> </tr> <tr> <td colspan="2">  <b>cmd_args</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>Any additional command options you want to pass to podman command, cmd_args - ['--other-param', 'value'] Be aware module doesn't support idempotency if this is set.</div> </td> </tr> <tr> <td colspan="2">  <b>command</b>  <div> <span>raw</span> </div> </td> <td> </td> <td> <div>Override command of container. Can be a string or a list.</div> </td> </tr> <tr> <td colspan="2">  <b>conmon_pidfile</b>  <div> <span>path</span> </div> </td> <td> </td> <td> <div>Write the pid of the conmon process to a file. conmon runs in a separate process than Podman, so this is necessary when using systemd to restart Podman containers.</div> </td> </tr> <tr> <td colspan="2">  <b>cpu_period</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>Limit the CPU real-time period in microseconds</div> </td> </tr> <tr> <td colspan="2">  <b>cpu_rt_period</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>Limit the CPU real-time period in microseconds. Limit the container's Real Time CPU usage. This flag tell the kernel to restrict the container's Real Time CPU usage to the period you specify.</div> </td> </tr> <tr> <td colspan="2">  <b>cpu_rt_runtime</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>Limit the CPU real-time runtime in microseconds. This flag tells the kernel to limit the amount of time in a given CPU period Real Time tasks may consume.</div> </td> </tr> <tr> <td colspan="2">  <b>cpu_shares</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>CPU shares (relative weight)</div> </td> </tr> <tr> <td colspan="2">  <b>cpus</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Number of CPUs. The default is 0.0 which means no limit.</div> </td> </tr> <tr> <td colspan="2">  <b>cpuset_cpus</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>CPUs in which to allow execution (0-3, 0,1)</div> </td> </tr> <tr> <td colspan="2">  <b>cpuset_mems</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Memory nodes (MEMs) in which to allow execution (0-3, 0,1). Only effective on NUMA systems.</div> </td> </tr> <tr> <td colspan="2">  <b>debug</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Return additional information which can be helpful for investigations.</div> </td> </tr> <tr> <td colspan="2">  <b>detach</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li><div>
<b>yes</b> ←</div></li> </ul> </td> <td> <div>Run container in detach mode</div> </td> </tr> <tr> <td colspan="2">  <b>detach_keys</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Override the key sequence for detaching a container. Format is a single character or ctrl-value</div> </td> </tr> <tr> <td colspan="2">  <b>device</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>Add a host device to the container. The format is &lt;device-on-host&gt;[:&lt;device-on-container&gt;][:&lt;permissions&gt;] (e.g. device /dev/sdc:/dev/xvdc:rwm)</div> </td> </tr> <tr> <td colspan="2">  <b>device_read_bps</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>Limit read rate (bytes per second) from a device (e.g. device-read-bps /dev/sda:1mb)</div> </td> </tr> <tr> <td colspan="2">  <b>device_read_iops</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>Limit read rate (IO per second) from a device (e.g. device-read-iops /dev/sda:1000)</div> </td> </tr> <tr> <td colspan="2">  <b>device_write_bps</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>Limit write rate (bytes per second) to a device (e.g. device-write-bps /dev/sda:1mb)</div> </td> </tr> <tr> <td colspan="2">  <b>device_write_iops</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>Limit write rate (IO per second) to a device (e.g. device-write-iops /dev/sda:1000)</div> </td> </tr> <tr> <td colspan="2">  <b>dns</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>Set custom DNS servers</div> <div>
<br>aliases: dns_servers</div> </td> </tr> <tr> <td colspan="2">  <b>dns_option</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Set custom DNS options</div> <div>
<br>aliases: dns_opts</div> </td> </tr> <tr> <td colspan="2">  <b>dns_search</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Set custom DNS search domains (Use dns_search with '' if you don't wish to set the search domain)</div> <div>
<br>aliases: dns_search_domains</div> </td> </tr> <tr> <td colspan="2">  <b>entrypoint</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Overwrite the default ENTRYPOINT of the image</div> </td> </tr> <tr> <td colspan="2">  <b>env</b>  <div> <span>dictionary</span> </div> </td> <td> </td> <td> <div>Set environment variables. This option allows you to specify arbitrary environment variables that are available for the process that will be launched inside of the container.</div> </td> </tr> <tr> <td colspan="2">  <b>env_file</b>  <div> <span>path</span> </div> </td> <td> </td> <td> <div>Read in a line delimited file of environment variables. Doesn't support idempotency. If users changes the file with environment variables it's on them to recreate the container.</div> </td> </tr> <tr> <td colspan="2">  <b>env_host</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Use all current host environment variables in container. Defaults to false.</div> </td> </tr> <tr> <td colspan="2">  <b>etc_hosts</b>  <div> <span>dictionary</span> </div> </td> <td> </td> <td> <div>Dict of host-to-IP mappings, where each host name is a key in the dictionary. Each host name will be added to the container's ``/etc/hosts`` file.</div> <div>
<br>aliases: add_hosts</div> </td> </tr> <tr> <td colspan="2">  <b>executable</b>  <div> <span>string</span> </div> </td> <td> <b>Default:</b><br><div>"podman"</div> </td> <td> <div>Path to <code>podman</code> executable if it is not in the <code>$PATH</code> on the machine running <code>podman</code>
</div> </td> </tr> <tr> <td colspan="2">  <b>expose</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>Expose a port, or a range of ports (e.g. expose "3300-3310") to set up port redirection on the host system.</div> <div>
<br>aliases: exposed, exposed_ports</div> </td> </tr> <tr> <td colspan="2">  <b>force_restart</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Force restart of container.</div> <div>
<br>aliases: restart</div> </td> </tr> <tr> <td colspan="2">  <b>generate_systemd</b>  <div> <span>dictionary</span> </div> </td> <td> <b>Default:</b><br><div>{}</div> </td> <td> <div>Generate systemd unit file for container.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>container_prefix</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Set the systemd unit name prefix for containers. The default is "container".</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>names</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li><div>
<b>yes</b> ←</div></li> </ul> </td> <td> <div>Use names of the containers for the start, stop, and description in the unit file. Default is true.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>no_header</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Do not generate the header including meta data such as the Podman version and the timestamp. From podman version 3.1.0.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>path</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Specify a path to the directory where unit files will be generated. If it doesn't exist, the directory will be created.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>pod_prefix</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Set the systemd unit name prefix for pods. The default is "pod".</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>restart_policy</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>on-success</li> <li>on-failure</li> <li>on-abnormal</li> <li>on-watchdog</li> <li>on-abort</li> <li>always</li> </ul> </td> <td> <div>Specify a restart policy for the service. The restart-policy must be one of "no", "on-success", "on-failure", "on-abnormal", "on-watchdog", "on-abort", or "always". The default policy is "on-failure".</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>separator</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Set the systemd unit name separator between the name/id of a container/pod and the prefix. The default is "-" (dash).</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>time</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>Override the default stop timeout for the container with the given value.</div> </td> </tr> <tr> <td colspan="2">  <b>gidmap</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>Run the container in a new user namespace using the supplied mapping.</div> </td> </tr> <tr> <td colspan="2">  <b>group_add</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>Add additional groups to run as</div> <div>
<br>aliases: groups</div> </td> </tr> <tr> <td colspan="2">  <b>healthcheck</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Set or alter a healthcheck command for a container.</div> </td> </tr> <tr> <td colspan="2">  <b>healthcheck_interval</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Set an interval for the healthchecks (a value of disable results in no automatic timer setup) (default "30s")</div> </td> </tr> <tr> <td colspan="2">  <b>healthcheck_retries</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>The number of retries allowed before a healthcheck is considered to be unhealthy. The default value is 3.</div> </td> </tr> <tr> <td colspan="2">  <b>healthcheck_start_period</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The initialization time needed for a container to bootstrap. The value can be expressed in time format like 2m3s. The default value is 0s</div> </td> </tr> <tr> <td colspan="2">  <b>healthcheck_timeout</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The maximum time allowed to complete the healthcheck before an interval is considered failed. Like start-period, the value can be expressed in a time format such as 1m22s. The default value is 30s</div> </td> </tr> <tr> <td colspan="2">  <b>hostname</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Container host name. Sets the container host name that is available inside the container.</div> </td> </tr> <tr> <td colspan="2">  <b>http_proxy</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>By default proxy environment variables are passed into the container if set for the podman process. This can be disabled by setting the http_proxy option to false. The environment variables passed in include http_proxy, https_proxy, ftp_proxy, no_proxy, and also the upper case versions of those. Defaults to true</div> </td> </tr> <tr> <td colspan="2">  <b>image</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Repository path (or image name) and tag used to create the container. If an image is not found, the image will be pulled from the registry. If no tag is included, <code>latest</code> will be used.</div> <div>Can also be an image ID. If this is the case, the image is assumed to be available locally.</div> </td> </tr> <tr> <td colspan="2">  <b>image_strict</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Whether to compare images in idempotency by taking into account a full name with registry and namespaces.</div> </td> </tr> <tr> <td colspan="2">  <b>image_volume</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>bind</li> <li>tmpfs</li> <li>ignore</li> </ul> </td> <td> <div>Tells podman how to handle the builtin image volumes. The options are bind, tmpfs, or ignore (default bind)</div> </td> </tr> <tr> <td colspan="2">  <b>init</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Run an init inside the container that forwards signals and reaps processes. The default is false.</div> </td> </tr> <tr> <td colspan="2">  <b>init_path</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Path to the container-init binary.</div> </td> </tr> <tr> <td colspan="2">  <b>interactive</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Keep STDIN open even if not attached. The default is false. When set to true, keep stdin open even if not attached. The default is false.</div> </td> </tr> <tr> <td colspan="2">  <b>ip</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Specify a static IP address for the container, for example '10.88.64.128'. Can only be used if no additional CNI networks to join were specified via 'network:', and if the container is not joining another container's network namespace via 'network container:&lt;name|id&gt;'. The address must be within the default CNI network's pool (default 10.88.0.0/16).</div> </td> </tr> <tr> <td colspan="2">  <b>ipc</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Default is to create a private IPC namespace (POSIX SysV IPC) for the container</div> <div>
<br>aliases: ipc_mode</div> </td> </tr> <tr> <td colspan="2">  <b>kernel_memory</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Kernel memory limit (format &lt;number&gt;[&lt;unit&gt;], where unit = b, k, m or g) Note - idempotency is supported for integers only.</div> </td> </tr> <tr> <td colspan="2">  <b>label</b>  <div> <span>dictionary</span> </div> </td> <td> </td> <td> <div>Add metadata to a container, pass dictionary of label names and values</div> <div>
<br>aliases: labels</div> </td> </tr> <tr> <td colspan="2">  <b>label_file</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Read in a line delimited file of labels</div> </td> </tr> <tr> <td colspan="2">  <b>log_driver</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>k8s-file</li> <li>journald</li> <li>json-file</li> </ul> </td> <td> <div>Logging driver. Used to set the log driver for the container. For example log_driver "k8s-file".</div> </td> </tr> <tr> <td colspan="2">  <b>log_level</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>debug</li> <li>info</li> <li>warn</li> <li>error</li> <li>fatal</li> <li>panic</li> </ul> </td> <td> <div>Logging level for Podman. Log messages above specified level ("debug"|"info"|"warn"|"error"|"fatal"|"panic") (default "error")</div> </td> </tr> <tr> <td colspan="2">  <b>log_opt</b>  <div> <span>dictionary</span> </div> </td> <td> </td> <td> <div>Logging driver specific options. Used to set the path to the container log file.</div> <div>
<br>aliases: log_options</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>max_size</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Specify a max size of the log file (e.g 10mb).</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>path</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Specify a path to the log file (e.g. /var/log/container/mycontainer.json).</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>tag</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Specify a custom log tag for the container.</div> </td> </tr> <tr> <td colspan="2">  <b>mac_address</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Specify a MAC address for the container, for example '92:d0:c6:0a:29:33'. Don't forget that it must be unique within one Ethernet network.</div> </td> </tr> <tr> <td colspan="2">  <b>memory</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Memory limit (format 10k, where unit = b, k, m or g) Note - idempotency is supported for integers only.</div> </td> </tr> <tr> <td colspan="2">  <b>memory_reservation</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Memory soft limit (format 100m, where unit = b, k, m or g) Note - idempotency is supported for integers only.</div> </td> </tr> <tr> <td colspan="2">  <b>memory_swap</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>A limit value equal to memory plus swap. Must be used with the -m (--memory) flag. The swap LIMIT should always be larger than -m (--memory) value. By default, the swap LIMIT will be set to double the value of --memory Note - idempotency is supported for integers only.</div> </td> </tr> <tr> <td colspan="2">  <b>memory_swappiness</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>Tune a container's memory swappiness behavior. Accepts an integer between 0 and 100.</div> </td> </tr> <tr> <td colspan="2">  <b>mount</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Attach a filesystem mount to the container. bind or tmpfs For example mount "type=bind,source=/path/on/host,destination=/path/in/container"</div> </td> </tr> <tr> <td colspan="2">  <b>name</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>Name of the container</div> </td> </tr> <tr> <td colspan="2">  <b>network</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>Set the Network mode for the container * bridge create a network stack on the default bridge * none no networking * container:&lt;name|id&gt; reuse another container's network stack * host use the podman host network stack. * &lt;network-name&gt;|&lt;network-id&gt; connect to a user-defined network * ns:&lt;path&gt; path to a network namespace to join * slirp4netns use slirp4netns to create a user network stack. This is the default for rootless containers</div> <div>
<br>aliases: net, network_mode</div> </td> </tr> <tr> <td colspan="2">  <b>no_hosts</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Do not create /etc/hosts for the container Default is false.</div> </td> </tr> <tr> <td colspan="2">  <b>oom_kill_disable</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Whether to disable OOM Killer for the container or not. Default is false.</div> </td> </tr> <tr> <td colspan="2">  <b>oom_score_adj</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>Tune the host's OOM preferences for containers (accepts -1000 to 1000)</div> </td> </tr> <tr> <td colspan="2">  <b>pid</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Set the PID mode for the container</div> <div>
<br>aliases: pid_mode</div> </td> </tr> <tr> <td colspan="2">  <b>pids_limit</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Tune the container's PIDs limit. Set -1 to have unlimited PIDs for the container.</div> </td> </tr> <tr> <td colspan="2">  <b>pod</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Run container in an existing pod. If you want podman to make the pod for you, preference the pod name with "new:"</div> </td> </tr> <tr> <td colspan="2">  <b>privileged</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Give extended privileges to this container. The default is false.</div> </td> </tr> <tr> <td colspan="2">  <b>publish</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>Publish a container's port, or range of ports, to the host. Format - ip:hostPort:containerPort | ip::containerPort | hostPort:containerPort | containerPort In case of only containerPort is set, the hostPort will chosen randomly by Podman.</div> <div>
<br>aliases: ports, published, published_ports</div> </td> </tr> <tr> <td colspan="2">  <b>publish_all</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Publish all exposed ports to random ports on the host interfaces. The default is false.</div> </td> </tr> <tr> <td colspan="2">  <b>read_only</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Mount the container's root filesystem as read only. Default is false</div> </td> </tr> <tr> <td colspan="2">  <b>read_only_tmpfs</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>If container is running in --read-only mode, then mount a read-write tmpfs on /run, /tmp, and /var/tmp. The default is true</div> </td> </tr> <tr> <td colspan="2">  <b>recreate</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Use with present and started states to force the re-creation of an existing container.</div> </td> </tr> <tr> <td colspan="2">  <b>restart_policy</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Restart policy to follow when containers exit. Restart policy will not take effect if a container is stopped via the podman kill or podman stop commands. Valid values are * no - Do not restart containers on exit * on-failure[:max_retries] - Restart containers when they exit with a non-0 exit code, retrying indefinitely or until the optional max_retries count is hit * always - Restart containers when they exit, regardless of status, retrying indefinitely</div> </td> </tr> <tr> <td colspan="2">  <b>rm</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Automatically remove the container when it exits. The default is false.</div> <div>
<br>aliases: remove, auto_remove</div> </td> </tr> <tr> <td colspan="2">  <b>rootfs</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>If true, the first argument refers to an exploded container on the file system. The default is false.</div> </td> </tr> <tr> <td colspan="2">  <b>secrets</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>Add the named secrets into the container at /run/secrets.</div> </td> </tr> <tr> <td colspan="2">  <b>security_opt</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>Security Options. For example security_opt "seccomp=unconfined"</div> </td> </tr> <tr> <td colspan="2">  <b>shm_size</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Size of /dev/shm. The format is &lt;number&gt;&lt;unit&gt;. number must be greater than 0. Unit is optional and can be b (bytes), k (kilobytes), m(megabytes), or g (gigabytes). If you omit the unit, the system uses bytes. If you omit the size entirely, the system uses 64m</div> </td> </tr> <tr> <td colspan="2">  <b>sig_proxy</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Proxy signals sent to the podman run command to the container process. SIGCHLD, SIGSTOP, and SIGKILL are not proxied. The default is true.</div> </td> </tr> <tr> <td colspan="2">  <b>state</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>absent</li> <li>present</li> <li>stopped</li> <li><div>
<b>started</b> ←</div></li> <li>created</li> </ul> </td> <td> <div>
<em>absent</em> - A container matching the specified name will be stopped and removed.</div> <div>
<em>present</em> - Asserts the existence of a container matching the name and any provided configuration parameters. If no container matches the name, a container will be created. If a container matches the name but the provided configuration does not match, the container will be updated, if it can be. If it cannot be updated, it will be removed and re-created with the requested config. Image version will be taken into account when comparing configuration. Use the recreate option to force the re-creation of the matching container.</div> <div>
<em>started</em> - Asserts there is a running container matching the name and any provided configuration. If no container matches the name, a container will be created and started. Use recreate to always re-create a matching container, even if it is running. Use force_restart to force a matching container to be stopped and restarted.</div> <div>
<em>stopped</em> - Asserts that the container is first <em>present</em>, and then if the container is running moves it to a stopped state.</div> <div>
<em>created</em> - Asserts that the container exists with given configuration. If container doesn't exist, the module creates it and leaves it in 'created' state. If configuration doesn't match or 'recreate' option is set, the container will be recreated</div> </td> </tr> <tr> <td colspan="2">  <b>stop_signal</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>Signal to stop a container. Default is SIGTERM.</div> </td> </tr> <tr> <td colspan="2">  <b>stop_timeout</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>Timeout (in seconds) to stop a container. Default is 10.</div> </td> </tr> <tr> <td colspan="2">  <b>subgidname</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Run the container in a new user namespace using the map with 'name' in the /etc/subgid file.</div> </td> </tr> <tr> <td colspan="2">  <b>subuidname</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Run the container in a new user namespace using the map with 'name' in the /etc/subuid file.</div> </td> </tr> <tr> <td colspan="2">  <b>sysctl</b>  <div> <span>dictionary</span> </div> </td> <td> </td> <td> <div>Configure namespaced kernel parameters at runtime</div> </td> </tr> <tr> <td colspan="2">  <b>systemd</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Run container in systemd mode. The default is true.</div> </td> </tr> <tr> <td colspan="2">  <b>timezone</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Set timezone in container. This flag takes area-based timezones, GMT time, as well as local, which sets the timezone in the container to match the host machine. See /usr/share/zoneinfo/ for valid timezones. Remote connections use local containers.conf for defaults.</div> </td> </tr> <tr> <td colspan="2">  <b>tmpfs</b>  <div> <span>dictionary</span> </div> </td> <td> </td> <td> <div>Create a tmpfs mount. For example tmpfs "/tmp" "rw,size=787448k,mode=1777"</div> </td> </tr> <tr> <td colspan="2">  <b>tty</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Allocate a pseudo-TTY. The default is false.</div> </td> </tr> <tr> <td colspan="2">  <b>uidmap</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>Run the container in a new user namespace using the supplied mapping.</div> </td> </tr> <tr> <td colspan="2">  <b>ulimit</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>Ulimit options</div> <div>
<br>aliases: ulimits</div> </td> </tr> <tr> <td colspan="2">  <b>user</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Sets the username or UID used and optionally the groupname or GID for the specified command.</div> </td> </tr> <tr> <td colspan="2">  <b>userns</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Set the user namespace mode for the container. It defaults to the PODMAN_USERNS environment variable. An empty value means user namespaces are disabled.</div> <div>
<br>aliases: userns_mode</div> </td> </tr> <tr> <td colspan="2">  <b>uts</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Set the UTS mode for the container</div> </td> </tr> <tr> <td colspan="2">  <b>volume</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>Create a bind mount. If you specify, volume /HOST-DIR:/CONTAINER-DIR, podman bind mounts /HOST-DIR in the host to /CONTAINER-DIR in the podman container.</div> <div>
<br>aliases: volumes</div> </td> </tr> <tr> <td colspan="2">  <b>volumes_from</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>Mount volumes from the specified container(s).</div> </td> </tr> <tr> <td colspan="2">  <b>workdir</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Working directory inside the container. The default working directory for running binaries within a container is the root directory (/).</div> <div>
<br>aliases: working_dir</div> </td> </tr> </table> <br>  <h2 id="examples">Examples</h2> <pre data-language="yaml+jinja">- name: Run container
  containers.podman.podman_container:
    name: container
    image: quay.io/bitnami/wildfly
    state: started

- name: Create a data container
  containers.podman.podman_container:
    name: mydata
    image: busybox
    volume:
      - /tmp/data

- name: Re-create a redis container with systemd service file generated in /tmp/
  containers.podman.podman_container:
    name: myredis
    image: redis
    command: redis-server --appendonly yes
    state: present
    recreate: yes
    expose:
      - 6379
    volumes_from:
      - mydata
    generate_systemd:
      path: /tmp/
      restart_policy: always
      time: 120
      names: true
      container_prefix: ainer

- name: Restart a container
  containers.podman.podman_container:
    name: myapplication
    image: redis
    state: started
    restart: yes
    etc_hosts:
        other: "127.0.0.1"
    restart_policy: "no"
    device: "/dev/sda:/dev/xvda:rwm"
    ports:
        - "8080:9000"
        - "127.0.0.1:8081:9001/udp"
    env:
        SECRET_KEY: "ssssh"
        BOOLEAN_KEY: "yes"

- name: Container present
  containers.podman.podman_container:
    name: mycontainer
    state: present
    image: ubuntu:14.04
    command: "sleep 1d"

- name: Stop a container
  containers.podman.podman_container:
    name: mycontainer
    state: stopped

- name: Start 4 load-balanced containers
  containers.podman.podman_container:
    name: "container{{ item }}"
    recreate: yes
    image: someuser/anotherappimage
    command: sleep 1d
  with_sequence: count=4

- name: remove container
  containers.podman.podman_container:
    name: ohno
    state: absent

- name: Writing output
  containers.podman.podman_container:
    name: myservice
    image: busybox
    log_options: path=/var/log/container/mycontainer.json
    log_driver: k8s-file
</pre>   <h2 id="return-values">Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values.html#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="documentation-table"> <tr> <th colspan="1">Key</th> <th>Returned</th> <th width="100%">Description</th> </tr> <tr> <td colspan="1">  <b>container</b>  <div> <span>dictionary</span> </div> </td> <td>always</td> <td> <div>Facts representing the current state of the container. Matches the podman inspection output.</div> <div>Note that facts are part of the registered vars since Ansible 2.8. For compatibility reasons, the facts are also accessible directly as <code>podman_container</code>. Note that the returned fact will be removed in Ansible 2.12.</div> <div>Empty if <code>state</code> is <em>absent</em>.</div> <br> <div><b>Sample:</b></div> <div>{ "AppArmorProfile": "", "Args": [ "sh" ], "BoundingCaps": [ "CAP_CHOWN", ... ], "Config": { "Annotations": { "io.kubernetes.cri-o.ContainerType": "sandbox", "io.kubernetes.cri-o.TTY": "false" }, "AttachStderr": false, "AttachStdin": false, "AttachStdout": false, "Cmd": [ "sh" ], "Domainname": "", "Entrypoint": "", "Env": [ "PATH=/usr/sbin:/usr/bin:/sbin:/bin", "TERM=xterm", "HOSTNAME=", "container=podman" ], "Hostname": "", "Image": "docker.io/library/busybox:latest", "Labels": null, "OpenStdin": false, "StdinOnce": false, "StopSignal": 15, "Tty": false, "User": { "gid": 0, "uid": 0 }, "Volumes": null, "WorkingDir": "/" }, "ConmonPidFile": "...", "Created": "2019-06-17T19:13:09.873858307+03:00", "Dependencies": [], "Driver": "overlay", "EffectiveCaps": [ "CAP_CHOWN", ... ], "ExecIDs": [], "ExitCommand": [ "/usr/bin/podman", "--root", ... ], "GraphDriver": { ... }, "HostConfig": { ... }, "HostnamePath": "...", "HostsPath": "...", "ID": "...", "Image": "...", "ImageName": "docker.io/library/busybox:latest", "IsInfra": false, "LogPath": "/tmp/container/mycontainer.json", "MountLabel": "system_u:object_r:container_file_t:s0:c282,c782", "Mounts": [ ... ], "Name": "myservice", "Namespace": "", "NetworkSettings": { "Bridge": "", ... }, "Path": "sh", "ProcessLabel": "system_u:system_r:container_t:s0:c282,c782", "ResolvConfPath": "...", "RestartCount": 0, "Rootfs": "", "State": { "Dead": false, "Error": "", "ExitCode": 0, "FinishedAt": "2019-06-17T19:13:10.157518963+03:00", "Healthcheck": { "FailingStreak": 0, "Log": null, "Status": "" }, "OOMKilled": false, "OciVersion": "1.0.1-dev", "Paused": false, "Pid": 4083, "Restarting": false, "Running": false, "StartedAt": "2019-06-17T19:13:10.152479729+03:00", "Status": "exited" }, "StaticDir": "..." ... }</div> </td> </tr> </table> <br><br> <h3 id="authors">Authors</h3> <ul class="simple"> <li>Sagi Shnaidman (@sshnaidm)</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2021 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/containers/podman/podman_container_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/containers/podman/podman_container_module.html</a>
  </p>
</div>
