<h1 id="containers-podman-podman-pod-manage-podman-pods">containers.podman.podman_pod – Manage Podman pods</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/containers/podman">containers.podman collection</a> (version 1.8.1).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install containers.podman</code>.</p> <p>To use it in a playbook, specify: <code>containers.podman.podman_pod</code>.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 1.0.0: </span>of containers.podman</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id5">Return Values</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Manage podman pods.</li> </ul>   <h2 id="requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>podman</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="2">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="2">  <b>add_host</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>Add a host to the /etc/hosts file shared between all containers in the pod.</div> </td> </tr> <tr> <td colspan="2">  <b>cgroup_parent</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Path to cgroups under which the cgroup for the pod will be created. If the path is not absolute, he path is considered to be relative to the cgroups path of the init process. Cgroups will be created if they do not already exist.</div> </td> </tr> <tr> <td colspan="2">  <b>debug</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Return additional information which can be helpful for investigations.</div> </td> </tr> <tr> <td colspan="2">  <b>dns</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>Set custom DNS servers in the /etc/resolv.conf file that will be shared between all containers in the pod. A special option, "none" is allowed which disables creation of /etc/resolv.conf for the pod.</div> </td> </tr> <tr> <td colspan="2">  <b>dns_opt</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>Set custom DNS options in the /etc/resolv.conf file that will be shared between all containers in the pod.</div> </td> </tr> <tr> <td colspan="2">  <b>dns_search</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>Set custom DNS search domains in the /etc/resolv.conf file that will be shared between all containers in the pod.</div> </td> </tr> <tr> <td colspan="2">  <b>executable</b>  <div> <span>string</span> </div> </td> <td> <b>Default:</b><br><div>"podman"</div> </td> <td> <div>Path to <code>podman</code> executable if it is not in the <code>$PATH</code> on the machine running <code>podman</code>
</div> </td> </tr> <tr> <td colspan="2">  <b>generate_systemd</b>  <div> <span>dictionary</span> </div> </td> <td> <b>Default:</b><br><div>{}</div> </td> <td> <div>Generate systemd unit file for container.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>container_prefix</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Set the systemd unit name prefix for containers. The default is "container".</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>names</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li><div>
<b>yes</b> ←</div></li> </ul> </td> <td> <div>Use names of the containers for the start, stop, and description in the unit file. Default is true.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>no_header</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Do not generate the header including meta data such as the Podman version and the timestamp. From podman version 3.1.0.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>path</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Specify a path to the directory where unit files will be generated. If it doesn't exist, the directory will be created.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>pod_prefix</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Set the systemd unit name prefix for pods. The default is "pod".</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>restart_policy</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>on-success</li> <li>on-failure</li> <li>on-abnormal</li> <li>on-watchdog</li> <li>on-abort</li> <li>always</li> </ul> </td> <td> <div>Specify a restart policy for the service. The restart-policy must be one of "no", "on-success", "on-failure", "on-abnormal", "on-watchdog", "on-abort", or "always". The default policy is "on-failure".</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>separator</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Set the systemd unit name separator between the name/id of a container/pod and the prefix. The default is "-" (dash).</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>time</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>Override the default stop timeout for the container with the given value.</div> </td> </tr> <tr> <td colspan="2">  <b>hostname</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Set a hostname to the pod</div> </td> </tr> <tr> <td colspan="2">  <b>infra</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Create an infra container and associate it with the pod. An infra container is a lightweight container used to coordinate the shared kernel namespace of a pod. Default is true.</div> </td> </tr> <tr> <td colspan="2">  <b>infra_command</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The command that will be run to start the infra container. Default is "/pause".</div> </td> </tr> <tr> <td colspan="2">  <b>infra_conmon_pidfile</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Write the pid of the infra container's conmon process to a file. As conmon runs in a separate process than Podman, this is necessary when using systemd to manage Podman containers and pods.</div> </td> </tr> <tr> <td colspan="2">  <b>infra_image</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The image that will be created for the infra container. Default is "k8s.gcr.io/pause:3.1".</div> </td> </tr> <tr> <td colspan="2">  <b>infra_name</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The name that will be used for the pod's infra container.</div> </td> </tr> <tr> <td colspan="2">  <b>ip</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Set a static IP for the pod's shared network.</div> </td> </tr> <tr> <td colspan="2">  <b>label</b>  <div> <span>dictionary</span> </div> </td> <td> </td> <td> <div>Add metadata to a pod, pass dictionary of label keys and values.</div> </td> </tr> <tr> <td colspan="2">  <b>label_file</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Read in a line delimited file of labels.</div> </td> </tr> <tr> <td colspan="2">  <b>mac_address</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Set a static MAC address for the pod's shared network.</div> </td> </tr> <tr> <td colspan="2">  <b>name</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>Assign a name to the pod.</div> </td> </tr> <tr> <td colspan="2">  <b>network</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Set network mode for the pod. Supported values are bridge (the default), host (do not create a network namespace, all containers in the pod will use the host's network), or a comma-separated list of the names of CNI networks the pod should join.</div> </td> </tr> <tr> <td colspan="2">  <b>no_hosts</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Disable creation of /etc/hosts for the pod.</div> </td> </tr> <tr> <td colspan="2">  <b>pod_id_file</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Write the pod ID to the file.</div> </td> </tr> <tr> <td colspan="2">  <b>publish</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>Publish a port or range of ports from the pod to the host.</div> <div>
<br>aliases: ports</div> </td> </tr> <tr> <td colspan="2">  <b>recreate</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Use with present and started states to force the re-creation of an existing pod.</div> </td> </tr> <tr> <td colspan="2">  <b>share</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>A comma delimited list of kernel namespaces to share. If none or "" is specified, no namespaces will be shared. The namespaces to choose from are ipc, net, pid, user, uts.</div> </td> </tr> <tr> <td colspan="2">  <b>state</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>created</b> ←</div></li> <li>killed</li> <li>restarted</li> <li>absent</li> <li>started</li> <li>stopped</li> <li>paused</li> <li>unpaused</li> </ul> </td> <td> <div>This variable is set for state</div> </td> </tr> </table> <br>  <h2 id="examples">Examples</h2> <pre data-language="yaml+jinja"># What modules does for example
- podman_pod:
    name: pod1
    state: started
    ports:
      - 4444:5555
</pre>   <h2 id="return-values">Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values.html#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="documentation-table"> <tr> <th colspan="1">Key</th> <th>Returned</th> <th width="100%">Description</th> </tr> <tr> <td colspan="1">  <b>pod</b>  <div> <span>dictionary</span> </div> </td> <td>always</td> <td> <div>Pod inspection results for the given pod built.</div> <br> <div><b>Sample:</b></div> <div>{'Config': {'cgroupParent': '/libpod_parent', 'created': '2020-06-14T15:16:12.230818767+03:00', 'hostname': 'newpod', 'id': 'a5a5c6cdf8c72272fc5c33f787e8d7501e2fa0c1e92b2b602860defdafeeec58', 'infraConfig': {'infraPortBindings': None, 'makeInfraContainer': True}, 'labels': {}, 'lockID': 515, 'name': 'newpod', 'sharesCgroup': True, 'sharesIpc': True, 'sharesNet': True, 'sharesUts': True}, 'Containers': [{'id': 'dc70a947c7ae15198ec38b3c817587584085dee3919cbeb9969e3ab77ba10fd2', 'state': 'configured'}], 'State': {'cgroupPath': '/libpod_parent/a5a5c6cdf8c72272fc5c33f787e8d7501e2fa0c1e92b2b602860defdafeeec58', 'infraContainerID': 'dc70a947c7ae15198ec38b3c817587584085dee3919cbeb9969e3ab77ba10fd2', 'status': 'Created'}}</div> </td> </tr> </table> <br><br> <h3 id="authors">Authors</h3> <ul class="simple"> <li>Sagi Shnaidman (@sshnaidm)</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2021 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/containers/podman/podman_pod_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/containers/podman/podman_pod_module.html</a>
  </p>
</div>
