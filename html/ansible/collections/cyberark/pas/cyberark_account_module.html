<h1 id="cyberark-pas-cyberark-account-module-for-cyberark-account-object-creation-deletion-and-modification-using-pas-web-services-sdk">cyberark.pas.cyberark_account – Module for CyberArk Account object creation, deletion, and modification using PAS Web Services SDK.</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/cyberark/pas">cyberark.pas collection</a> (version 1.0.7).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install cyberark.pas</code>.</p> <p>To use it in a playbook, specify: <code>cyberark.pas.cyberark_account</code>.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.4: </span>of cyberark.pas</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#parameters" id="id2">Parameters</a></li> <li><a class="reference internal" href="#examples" id="id3">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id4">Return Values</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Creates a URI for adding, deleting, modifying a privileged credential within the Cyberark Vault. The request uses the Privileged Account Security Web Services SDK.</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="2">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="2">  <b>address</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The address of the endpoint where the privileged account is located.</div> </td> </tr> <tr> <td colspan="2">  <b>api_base_url</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>A string containing the base URL of the server hosting CyberArk's Privileged Account Security Web Services SDK.</div> <div>Example <a href="#">https://&lt;IIS_Server_Ip&gt;/PasswordVault/api/</a>
</div> </td> </tr> <tr> <td colspan="2">  <b>cyberark_session</b>  <div> <span>dictionary</span> / <span>required</span> </div> </td> <td> </td> <td> <div>Dictionary set by a CyberArk authentication containing the different values to perform actions on a logged-on CyberArk session, please see M(cyberark_authentication) module for an example of cyberark_session.</div> </td> </tr> <tr> <td colspan="2">  <b>identified_by</b>  <div> <span>string</span> </div> </td> <td> <b>Default:</b><br><div>"username,address,platform_id"</div> </td> <td> <div>When an API call is made to Get Accounts, often times the default parameters passed will identify more than one account. This parameter is used to confidently identify a single account when the default query can return multiple results.</div> </td> </tr> <tr> <td colspan="2">  <b>logging_file</b>  <div> <span>string</span> </div> </td> <td> <b>Default:</b><br><div>"/tmp/ansible_cyberark.log"</div> </td> <td> <div>Setting the log file name and location for troubleshooting logs.</div> </td> </tr> <tr> <td colspan="2">  <b>logging_level</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>NOTSET</li> <li>DEBUG</li> <li>INFO</li> </ul> </td> <td> <div>Parameter used to define the level of troubleshooting output to the <code>logging_file</code> value.</div> </td> </tr> <tr> <td colspan="2">  <b>name</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The ObjectID of the account</div> </td> </tr> <tr> <td colspan="2">  <b>new_secret</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The new secret/password to be stored in CyberArk Vault.</div> </td> </tr> <tr> <td colspan="2">  <b>platform_account_properties</b>  <div> <span>dictionary</span> </div> </td> <td> </td> <td> <div>Object containing key-value pairs to associate with the account, as defined by the account platform. These properties are validated against the mandatory and optional properties of the specified platform's definition. Optional properties that do not exist on the account will not be returned here. Internal properties are not returned.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>KEY</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Freeform key value associated to the mandatory or optional property assigned to the specified Platform's definition.</div> <div>
<br>aliases: Port, ExtrPass1Name, database</div> </td> </tr> <tr> <td colspan="2">  <b>platform_id</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The PolicyID of the Platform that is to be managing the account</div> </td> </tr> <tr> <td colspan="2">  <b>remote_machines_access</b>  <div> <span>dictionary</span> </div> </td> <td> </td> <td> <div>Set of parameters for defining PSM endpoint access targets.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>access_restricted_to_remote_machines</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Whether or not to restrict access only to specified remote machines.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>remote_machines</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>List of targets allowed for this account.</div> </td> </tr> <tr> <td colspan="2">  <b>safe</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The safe in the Vault where the privileged account is to be located.</div> </td> </tr> <tr> <td colspan="2">  <b>secret</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The initial password for the creation of the account</div> </td> </tr> <tr> <td colspan="2">  <b>secret_management</b>  <div> <span>dictionary</span> </div> </td> <td> </td> <td> <div>Set of parameters associated with the management of the credential.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>automatic_management_enabled</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Parameter that indicates whether the CPM will manage the password or not.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>management_action</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>change</li> <li>change_immediately</li> <li>reconcile</li> </ul> </td> <td> <div>CPM action flag to be placed on the account object for credential rotation.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>manual_management_reason</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>String value indicating why the CPM will NOT manage the password.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>new_secret</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The actual password value that will be assigned for the CPM action to be taken.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>perform_management_action</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>always</b> ←</div></li> <li>on_create</li> </ul> </td> <td> <div>
<code>always</code> will perform the management action in every action.</div> <div>
<code>on_create</code> will only perform the management action right after the account is created.</div> </td> </tr> <tr> <td colspan="2">  <b>secret_type</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>password</b> ←</div></li> <li>key</li> </ul> </td> <td> <div>The value that identifies what type of account it will be.</div> </td> </tr> <tr> <td colspan="2">  <b>state</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>present</b> ←</div></li> <li>absent</li> </ul> </td> <td> <div>Assert the desired state of the account <code>present</code> to creat or update and account object. Set to <code>absent</code> for deletion of an account object.</div> </td> </tr> <tr> <td colspan="2">  <b>username</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The username associated with the account.</div> </td> </tr> <tr> <td colspan="2">  <b>validate_certs</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li><div>
<b>yes</b> ←</div></li> </ul> </td> <td> <div>If <code>false</code>, SSL certificate chain will not be validated. This should only set to <code>true</code> if you have a root CA certificate installed on each node.</div> </td> </tr> </table> <br>  <h2 id="examples">Examples</h2> <pre data-language="yaml+jinja">collections:
  - cyberark.pas

tasks:

  - name: Logon to CyberArk Vault using PAS Web Services SDK
    cyberark_authentication:
      api_base_url: "http://components.cyberark.local"
      validate_certs: no
      username: "bizdev"
      password: "Cyberark1"

  - name: Creating an Account using the PAS WebServices SDK
    cyberark_account:
      logging_level: DEBUG
      identified_by: "address,username"
      safe: "Test"
      address: "cyberark.local"
      username: "administrator-x"
      platform_id: WinServerLocal
      secret: "@N&amp;Ibl3!"
      platform_account_properties:
          LogonDomain: "cyberark"
          OwnerName: "ansible_user"
      secret_management:
          automatic_management_enabled: true
      state: present
      cyberark_session: "{{ cyberark_session }}"
    register: cyberarkaction

  - name:
      - Rotate credential via reconcile and providing the password to
        bechanged to.
    cyberark_account:
      identified_by: "address,username"
      safe: "Domain_Admins"
      address: "prod.cyberark.local"
      username: "admin"
      platform_id: WinDomain
      platform_account_properties:
          LogonDomain: "PROD"
      secret_management:
          new_secret: "Ama123ah12@#!Xaamdjbdkl@#112"
          management_action: "reconcile"
          automatic_management_enabled: true
      state: present
      cyberark_session: "{{ cyberark_session }}"
    register: reconcileaccount

  - name: Logoff from CyberArk Vault
    cyberark_authentication:
      state: absent
      cyberark_session: "{{ cyberark_session }}"
</pre>   <h2 id="return-values">Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values.html#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="documentation-table"> <tr> <th colspan="3">Key</th> <th>Returned</th> <th width="100%">Description</th> </tr> <tr> <td colspan="3">  <b>changed</b>  <div> <span>boolean</span> </div> </td> <td>always</td> <td> <div>Identify if the playbook run resulted in a change to the account in any way.</div> <br> </td> </tr> <tr> <td colspan="3">  <b>failed</b>  <div> <span>boolean</span> </div> </td> <td>always</td> <td> <div>Whether playbook run resulted in a failure of any kind.</div> <br> </td> </tr> <tr> <td colspan="3">  <b>result</b>  <div> <span>complex</span> </div> </td> <td>success</td> <td> <div>A json dump of the resulting action.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>address</b>  <div> <span>string</span> </div> </td> <td>successful addition and modification</td> <td> <div>The adress of the endpoint where the privileged account is located.</div> <br> <div><b>Sample:</b></div> <div>dev.local</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>createdTime</b>  <div> <span>integer</span> </div> </td> <td>successful addition and modification</td> <td> <div>Timeframe calculation of the timestamp of account creation.</div> <br> <div><b>Sample:</b></div> <div>1567824520</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>id</b>  <div> <span>integer</span> </div> </td> <td>successful addition and modification</td> <td> <div>Internal ObjectID for the account object identified</div> <br> <div><b>Sample:</b></div> <div>25_21</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>name</b>  <div> <span>string</span> </div> </td> <td>successful addition and modification</td> <td> <div>The external ObjectID of the account</div> <br> <div><b>Sample:</b></div> <div>['Operating System-WinServerLocal-cyberark.local-administrator']</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>platformAccountProperties</b>  <div> <span>complex</span> </div> </td> <td>successful addition and modification</td> <td> <div>Object containing key-value pairs to associate with the account, as defined by the account platform.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>KEY VALUE</b>  <div> <span>string</span> </div> </td> <td>successful addition and modification</td> <td> <div>Object containing key-value pairs to associate with the account, as defined by the account platform.</div> <br> <div><b>Sample:</b></div> <div>[{'LogonDomain': 'cyberark'}, {'Port': '22'}]</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>platformId</b>  <div> <span>string</span> </div> </td> <td>successful addition and modification</td> <td> <div>The PolicyID of the Platform that is to be managing the account.</div> <br> <div><b>Sample:</b></div> <div>WinServerLocal</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>safeName</b>  <div> <span>string</span> </div> </td> <td>successful addition and modification</td> <td> <div>The safe in the Vault where the privileged account is to be located.</div> <br> <div><b>Sample:</b></div> <div>Domain_Admins</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>secretManagement</b>  <div> <span>complex</span> </div> </td> <td>successful addition and modification</td> <td> <div>Set of parameters associated with the management of the credential.</div> <br> <div><b>Sample:</b></div> <div>{'automaticManagementEnabled': {'description': ['Parameter that indicates whether the CPM will manage the password or not.'], 'returned': 'successful addition and modification', 'type': 'bool'}, 'lastModifiedTime': {'description': ['Timeframe calculation of the timestamp of account modification.'], 'returned': 'successful addition and modification', 'sample': '1567824520', 'type': 'int'}, 'manualManagementReason': {'description': None, 'returned': 'if <code>automaticManagementEnabled</code> is set to false', 'sample': 'This is a static account', 'type': 'str'}}</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>secretType</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td>successful addition and modification</td> <td> <div>The value that identifies what type of account it will be</div> <br> <div><b>Sample:</b></div> <div>['key', 'password']</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>userName</b>  <div> <span>string</span> </div> </td> <td>successful addition and modification</td> <td> <div>The username associated with the account</div> <br> <div><b>Sample:</b></div> <div>administrator</div> </td> </tr> <tr> <td colspan="3">  <b>status_code</b>  <div> <span>integer</span> </div> </td> <td>success</td> <td> <div>Result HTTP Status code.</div> <br> <div><b>Sample:</b></div> <div>200, 201, -1, 204</div> </td> </tr> </table> <br><br> <h3 id="authors">Authors</h3> <ul class="simple"> <li>CyberArk BizDev (@cyberark-bizdev)</li> <li>Edward Nunez (@enunez-cyberark)</li> <li>James Stutes (@jimmyjamcabd)</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2021 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/cyberark/pas/cyberark_account_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/cyberark/pas/cyberark_account_module.html</a>
  </p>
</div>
