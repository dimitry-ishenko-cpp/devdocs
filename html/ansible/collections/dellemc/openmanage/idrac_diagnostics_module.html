<section id="dellemc-openmanage-idrac-diagnostics-module-run-and-export-idrac-diagnostics"> <h1>dellemc.openmanage.idrac_diagnostics module – Run and Export iDRAC diagnostics</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module is part of the <a class="reference external" href="https://galaxy.ansible.com/ui/repo/published/dellemc/openmanage/">dellemc.openmanage collection</a> (version 9.7.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install dellemc.openmanage</code>. You need further requirements to be able to use this module, see <a class="reference internal" href="#ansible-collections-dellemc-openmanage-idrac-diagnostics-module-requirements"><span class="std std-ref">Requirements</span></a> for details.</p> <p>To use it in a playbook, specify: <code>dellemc.openmanage.idrac_diagnostics</code>.</p> </div> <p class="ansible-version-added">New in dellemc.openmanage 9.0.0</p>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id4">Notes</a></li> <li><a class="reference internal" href="#examples" id="id5">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id6">Return Values</a></li> </ul>  <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>This module allows you to run and export diagnostics on iDRAC.</li> </ul> </section> <section id="requirements"> <h2 id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>python &gt;= 3.9.6</li> </ul> </section> <section id="parameters"> <h2>Parameters</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-parameter-ca-path"><strong>ca_path</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">path</span></p> <p><em class="ansible-option-versionadded">added in dellemc.openmanage 5.0.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>The Privacy Enhanced Mail (PEM) file that contains a CA certificate to be used for the validation.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-parameter-export"><strong>export</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Exports the diagnostics information to the given share.</p> <p>This operation requires <em>share_parameters</em>.</p> <p>When <em>run</em> is <code>true</code> and <em>job_wait</em> is <code>false</code>, only then the run diagnostics job is triggered. <em>export</em> is ignored.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-parameter-idrac-ip"><strong>idrac_ip</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>iDRAC IP Address.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-parameter-idrac-pwd"><strong id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-parameter-idrac-password">idrac_password</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: idrac_pwd</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>iDRAC user password.</p> <p>If the password is not provided, then the environment variable <code>IDRAC_PASSWORD</code> is used.</p> <p>Example: export IDRAC_PASSWORD=password</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-parameter-idrac-port"><strong>idrac_port</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>iDRAC port.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>443</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-parameter-idrac-user"><strong>idrac_user</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>iDRAC username.</p> <p>If the username is not provided, then the environment variable <code>IDRAC_USERNAME</code> is used.</p> <p>Example: export IDRAC_USERNAME=username</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-parameter-job-wait"><strong>job_wait</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Provides the option to wait for job completion.</p> <p>This is applicable when <em>run</em> is <code>true</code> and <em>reboot_type</em> is <code>power_cycle</code>.</p> <p>This is applicable only to run the diagnostics job.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-parameter-job-wait-timeout"><strong>job_wait_timeout</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Time in seconds to wait for job completion.</p> <p>This is applicable when <em>job_wait</em> is <code>true</code>.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>1200</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-parameter-reboot-type"><strong>reboot_type</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>This option provides the choice to reboot the host immediately to run the diagnostics.</p> <p>This is applicable when <em>run</em> is <code>true</code>.</p> <p><code>force</code> Forced graceful shutdown signals the operating system to turn off and wait for ten minutes. If the operating system does not turn off, the iDRAC power cycles the system.</p> <p><code>graceful</code> Graceful shutdown waits for the operating system to turn off and wait for the system to restart.</p> <p><code>power_cycle</code> performs a power cycle for a hard reset on the device.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"force"</code></li> <li>
<code><strong>"graceful"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"power_cycle"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-parameter-resource-id"><strong>resource_id</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Id of the resource.</p> <p>If the value for resource ID is not provided, the module picks the first resource ID available from the list of system resources returned by the iDRAC.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-parameter-run"><strong>run</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Run the diagnostics job on iDRAC.</p> <p>Run the diagnostics job based on the <em>run_mode</em> and save the report in the internal storage. <em>reboot_type</em> is applicable.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-parameter-run-mode"><strong>run_mode</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>This option provides the choices to run the diagnostics.</p> <p><code>express</code> The express diagnostics runs a test package for each server subsystem. However, it does not run the complete set of tests available in the package for each subsystem.</p> <p><code>extended</code> The extended diagnostics run all available tests in each test package for all subsystems.</p> <p><code>long_run</code> The long-run diagnostics runs express and extended tests.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"express"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"extended"</code></li> <li><code>"long_run"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-parameter-scheduled-end-time"><strong>scheduled_end_time</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Run the diagnostic until the specified end date and end time after the <em>scheduled_start_time</em>.</p> <p>The accepted formats are yyyymmddhhmmss and YYYY-MM-DDThh:mm:ss+HH:MM.</p> <p>If the run operation does not complete before the specified end time, then the operation fails.</p> <p>This is applicable when <em>run</em> is <code>True</code> and <em>reboot_type</em> is <code>power_cycle</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-parameter-scheduled-start-time"><strong>scheduled_start_time</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Schedules the job at the specified time.</p> <p>The accepted formats are yyyymmddhhmmss and YYYY-MM-DDThh:mm:ss+HH:MM.</p> <p>This is applicable when <em>run</em> is <code>true</code> and <em>reboot_type</em> is power_cycle.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-parameter-share-parameters"><strong>share_parameters</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Parameters that are required for the export operation of diagnostics.</p> <p><em>share_parameters</em> is required when <em>export</em> is <code>true</code>.</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-parameter-share-parameters-file-name"><strong>file_name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Diagnostics file name for <em>export</em> operation.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-parameter-share-parameters-ignore-certificate-warning"><strong>ignore_certificate_warning</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Ignores the certificate warning while connecting to Share and is only applicable when <em>share_type</em> is <code>https</code>.</p> <p><code>on</code> ignores the certificate warning.</p> <p><code>off</code> does not ignore the certificate warning.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"off"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"on"</code></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-parameter-share-parameters-ip-address"><strong>ip_address</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>IP address of the network share.</p> <p><em>ip_address</em> is required when <em>share_type</em> is <code>nfs</code>, <code>cifs</code>, <code>http</code> or <code>https</code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-parameter-share-parameters-password"><strong>password</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Password of the network share.</p> <p><em>password</em> is required when <em>share_type</em> is <code>cifs</code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-parameter-share-parameters-proxy-password"><strong>proxy_password</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The password of the proxy server.</p> <p><em>proxy_password</em> is only applicable when <em>share_type</em> is <code>http</code> or <code>https</code> and when <em>proxy_support</em> is <code>parameters_proxy</code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-parameter-share-parameters-proxy-port"><strong>proxy_port</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The port of the proxy server.</p> <p><em>proxy_port</em> is only applicable when <em>share_type</em> is <code>http</code> or <code>https</code> and when <em>proxy_support</em> is <code>parameters_proxy</code>.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>80</code></p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-parameter-share-parameters-proxy-server"><strong>proxy_server</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The IP address of the proxy server.</p> <p><em>proxy_server</em> is required when <em>proxy_support</em> is <code>parameters_proxy</code>.</p> <p><em>proxy_server</em> is only applicable when <em>share_type</em> is <code>http</code> or <code>https</code> and when <em>proxy_support</em> is <code>parameters_proxy</code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-parameter-share-parameters-proxy-support"><strong>proxy_support</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Specifies if proxy support must be used or not.</p> <p><code>off</code> does not use proxy settings.</p> <p><code>default_proxy</code> uses the default proxy settings.</p> <p><code>parameters_proxy</code> uses the specified proxy settings. <em>proxy_server</em> is required when <em>proxy_support</em> is <code>parameters_proxy</code>.</p> <p><em>proxy_support</em> is only applicable when <em>share_type</em> is <code>http</code> or <code>https</code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"off"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"default_proxy"</code></li> <li><code>"parameters_proxy"</code></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-parameter-share-parameters-proxy-type"><strong>proxy_type</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The proxy type of the proxy server.</p> <p><code>http</code> to select HTTP proxy.</p> <p><code>socks</code> to select SOCKS proxy.</p> <p><em>proxy_type</em> is only applicable when <em>share_type</em> is <code>http</code> or <code>https</code> and when <em>proxy_support</em> is <code>parameters_proxy</code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"http"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"socks"</code></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-parameter-share-parameters-proxy-username"><strong>proxy_username</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The username of the proxy server.</p> <p><em>proxy_username</em> is only applicable when <em>share_type</em> is <code>http</code> or <code>https</code> and when <em>proxy_support</em> is <code>parameters_proxy</code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-parameter-share-parameters-share-name"><strong>share_name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Network share or local path of the diagnostics file.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-parameter-share-parameters-share-type"><strong>share_type</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Share type of the network share.</p> <p><code>local</code> uses local path for <em>export</em> operation.</p> <p><code>nfs</code> uses NFS share for <em>export</em> operation.</p> <p><code>cifs</code> uses CIFS share for <em>export</em> operation.</p> <p><code>http</code> uses HTTP share for <em>export</em> operation.</p> <p><code>https</code> uses HTTPS share for <em>export</em> operation.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"local"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"nfs"</code></li> <li><code>"cifs"</code></li> <li><code>"http"</code></li> <li><code>"https"</code></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-parameter-share-parameters-username"><strong>username</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Username of the network share.</p> <p><em>username</em> is required when <em>share_type</em> is <code>cifs</code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-parameter-share-parameters-workgroup"><strong>workgroup</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Workgroup of the network share.</p> <p><em>workgroup</em> is applicable only when <em>share_type</em> is <code>cifs</code>.</p> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-parameter-timeout"><strong>timeout</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> <p><em class="ansible-option-versionadded">added in dellemc.openmanage 5.0.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>The socket level timeout in seconds.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>30</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-parameter-validate-certs"><strong>validate_certs</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in dellemc.openmanage 5.0.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>If <code>false</code>, the SSL certificates will not be validated.</p> <p>Configure <code>false</code> only on personally controlled sites where self-signed certificates are used.</p> <p>Prior to collection version <code>5.0.0</code>, the <em>validate_certs</em> is <code>false</code> by default.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-parameter-x-auth-token"><strong>x_auth_token</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in dellemc.openmanage 9.3.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Authentication token.</p> <p>If the x_auth_token is not provided, then the environment variable <code>IDRAC_X_AUTH_TOKEN</code> is used.</p> <p>Example: export IDRAC_X_AUTH_TOKEN=x_auth_token</p> </div></td> </tr>  </table> </section> <section id="notes"> <h2>Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>Run this module from a system that has direct access to Dell iDRAC.</li> <li>This module supports only iDRAC9 and above.</li> <li>This module supports IPv4 and IPv6 addresses.</li> <li>This module supports <code>check_mode</code>.</li> <li>This module requires ‘Dell Diagnostics’ firmware package to be present on the server.</li> <li>When <em>share_type</em> is <code>local</code> for <em>export</em> operation, job_details are not displayed.</li> </ul> </div> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja">---
- name: Run and export the diagnostics to local path
  dellemc.openmanage.idrac_diagnostics:
    hostname: "192.168.0.1"
    username: "username"
    password: "password"
    ca_path: "path/to/ca_file"
    run: true
    export: true
    share_parameters:
      share_type: "local"
      share_path: "/opt/local/diagnostics/"
      file_name: "diagnostics.txt"

- name: Run the diagnostics with power cycle reboot on schedule
  dellemc.openmanage.idrac_diagnostics:
    hostname: "192.168.0.1"
    username: "username"
    password: "password"
    ca_path: "path/to/ca_file"
    run: true
    run_mode: "express"
    reboot_type: "power_cycle"
    scheduled_start_time: 20240101101015

- name: Run and export the diagnostics to HTTPS share
  dellemc.openmanage.idrac_diagnostics:
    hostname: "192.168.0.1"
    username: "username"
    password: "password"
    ca_path: "path/to/ca_file"
    run: true
    export: true
    share_parameters:
      share_type: "HTTPS"
      ignore_certificate_warning: "on"
      share_name: "/share_path/diagnostics_collection_path"
      ip_address: "192.168.0.2"
      file_name: "diagnostics.txt"

- name: Run and export the diagnostics to NFS share
  dellemc.openmanage.idrac_diagnostics:
    hostname: "192.168.0.1"
    username: "username"
    password: "password"
    ca_path: "path/to/ca_file"
    run: true
    export: true
    share_parameters:
      share_type: "NFS"
      share_name: "nfsshare/diagnostics_collection_path/"
      ip_address: "192.168.0.3"
      file_name: "diagnostics.txt"

- name: Export the diagnostics to CIFS share
  dellemc.openmanage.idrac_diagnostics:
    hostname: "192.168.0.1"
    username: "username"
    password: "password"
    ca_path: "path/to/ca_file"
    export: true
    share_parameters:
      share_type: "CIFS"
      share_name: "/cifsshare/diagnostics_collection_path/"
      ip_address: "192.168.0.4"
      file_name: "diagnostics.txt"

- name: Export the diagnostics to HTTPS share via proxy
  dellemc.openmanage.idrac_diagnostics:
    hostname: "192.168.0.1"
    username: "username"
    password: "password"
    ca_path: "path/to/ca_file"
    export: true
    share_parameters:
      share_type: "HTTPS"
      share_name: "/share_path/diagnostics_collection_path"
      ignore_certificate_warning: "on"
      ip_address: "192.168.0.2"
      file_name: "diagnostics.txt"
      proxy_support: parameters_proxy
      proxy_type: http
      proxy_server: "192.168.0.5"
      proxy_port: 1080
      proxy_username: "proxy_user"
      proxy_password: "proxy_password"
</pre> </section> <section id="return-values"> <h2>Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values.html#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Key</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-return-diagnostics-file-path"><strong>diagnostics_file_path</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Returns the full path of the diagnostics file.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> For export operation</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>"/share_path/diagnostics_collection_path/diagnostics.txt"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-return-error-info"><strong>error_info</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Details of the HTTP Error.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> on HTTP error</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>{"error": {"@Message.ExtendedInfo": [{"Message": "A Remote Diagnostic (ePSA) job already exists.", "MessageArgs": [], "MessageArgs@odata.count": 0, "MessageId": "IDRAC.2.9.SYS098", "RelatedProperties": [], "RelatedProperties@odata.count": 0, "Resolution": "A response action is not required if the scheduled start time of the existing Remote Diagnostic (ePSA) job is ok. Else, delete the existing Diagnostics (ePSA) job and recreate another with an appropriate start time.", "Severity": "Informational"}], "code": "Base.1.12.GeneralError", "message": "A general error has occurred. See ExtendedInfo for more information."}}</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-return-job-details"><strong>job_details</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Returns the output for status of the job.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> For run and export operations</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>{"ActualRunningStartTime": "2024-01-10T10:14:31", "ActualRunningStopTime": "2024-01-10T10:26:34", "CompletionTime": "2024-01-10T10:26:34", "Description": "Job Instance", "EndTime": "2024-01-10T10:30:15", "Id": "JID_XXXXXXXXXXXX", "JobState": "Completed", "JobType": "RemoteDiagnostics", "Message": "Job completed successfully.", "MessageArgs": [], "MessageArgs@odata.count": 0, "MessageId": "SYS018", "Name": "Remote Diagnostics", "PercentComplete": 100, "StartTime": "2024-01-10T10:12:15", "TargetSettingsURI": null}</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-diagnostics-module-return-msg"><strong>msg</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Status of the diagnostics operation.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> always</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>"Successfully ran and exported the diagnostics."</code></p> </div></td> </tr>  </table> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Shivam Sharma(@ShivamSh3)</li> </ul> </section> <section id="collection-links"> <h3>Collection links</h3> <ul class="ansible-links"> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/dell/dellemc-openmanage-ansible-modules/issues" rel="noopener external" target="_blank">Issue Tracker</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/dell/dellemc-openmanage-ansible-modules" rel="noopener external" target="_blank">Homepage</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/dell/dellemc-openmanage-ansible-modules/tree/collections" rel="noopener external" target="_blank">Repository (Sources)</a></span></li> </ul> </section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2024 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/dellemc/openmanage/idrac_diagnostics_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/dellemc/openmanage/idrac_diagnostics_module.html</a>
  </p>
</div>
