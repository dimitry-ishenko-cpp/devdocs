<section id="dellemc-openmanage-idrac-reset-module-factory-reset-the-idracs"> <h1>dellemc.openmanage.idrac_reset module – Factory reset the iDRACs</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module is part of the <a class="reference external" href="https://galaxy.ansible.com/ui/repo/published/dellemc/openmanage/">dellemc.openmanage collection</a> (version 9.7.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install dellemc.openmanage</code>. You need further requirements to be able to use this module, see <a class="reference internal" href="#ansible-collections-dellemc-openmanage-idrac-reset-module-requirements"><span class="std std-ref">Requirements</span></a> for details.</p> <p>To use it in a playbook, specify: <code>dellemc.openmanage.idrac_reset</code>.</p> </div> <p class="ansible-version-added">New in dellemc.openmanage 2.1.0</p>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id4">Notes</a></li> <li><a class="reference internal" href="#examples" id="id5">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id6">Return Values</a></li> </ul>  <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>This module resets the iDRAC to factory default settings.</li> </ul> </section> <section id="requirements"> <h2 id="ansible-collections-dellemc-openmanage-idrac-reset-module-requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>python &gt;= 3.9.6</li> </ul> </section> <section id="parameters"> <h2>Parameters</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-reset-module-parameter-ca-path"><strong>ca_path</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">path</span></p> <p><em class="ansible-option-versionadded">added in dellemc.openmanage 5.0.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>The Privacy Enhanced Mail (PEM) file that contains a CA certificate to be used for the validation.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-reset-module-parameter-custom-defaults-buffer"><strong>custom_defaults_buffer</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in dellemc.openmanage 9.2.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>This parameter provides the option to import the buffer input in XML format as a custom default configuration.</p> <p>This option is applicable when <em>reset_to_default</em> is <code>CustomDefaults</code>.</p> <p><em>custom_defaults_buffer</em> is mutually exclusive with <em>custom_defaults_file</em>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-reset-module-parameter-custom-defaults-file"><strong>custom_defaults_file</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in dellemc.openmanage 9.2.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Name of the custom default configuration file in the XML format.</p> <p>This option is applicable when <em>reset_to_default</em> is <code>CustomDefaults</code>.</p> <p><em>custom_defaults_file</em> is mutually exclusive with <em>custom_defaults_buffer</em>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-reset-module-parameter-default-password"><strong>default_password</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in dellemc.openmanage 9.4.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>This parameter is only applied when <em>reset_to_default</em> is <code>All</code> or <code>ResetAllWithRootDefaults</code>.</p> <p>This parameter is required to track LifeCycle status of the server after the reset operation is performed. If this parameter is not provided, then the LifeCycle status is not tracked after the reset operation.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-reset-module-parameter-default-username"><strong>default_username</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in dellemc.openmanage 9.4.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>This parameter is only applied when <em>reset_to_default</em> is <code>All</code> or <code>ResetAllWithRootDefaults</code>.</p> <p>This parameter is required to track LifeCycle status of the server after the reset operation is performed. If this parameter is not provided, then the LifeCycle status is not tracked after the reset operation.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-reset-module-parameter-force-reset"><strong>force_reset</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in dellemc.openmanage 9.2.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>This parameter provides the option to force reset the iDRAC without checking the iDRAC lifecycle controller status.</p> <p>This option is applicable only for iDRAC9.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-reset-module-parameter-idrac-ip"><strong>idrac_ip</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>iDRAC IP Address.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-reset-module-parameter-idrac-pwd"><strong id="ansible-collections-dellemc-openmanage-idrac-reset-module-parameter-idrac-password">idrac_password</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: idrac_pwd</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>iDRAC user password.</p> <p>If the password is not provided, then the environment variable <code>IDRAC_PASSWORD</code> is used.</p> <p>Example: export IDRAC_PASSWORD=password</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-reset-module-parameter-idrac-port"><strong>idrac_port</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>iDRAC port.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>443</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-reset-module-parameter-idrac-user"><strong>idrac_user</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>iDRAC username.</p> <p>If the username is not provided, then the environment variable <code>IDRAC_USERNAME</code> is used.</p> <p>Example: export IDRAC_USERNAME=username</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-reset-module-parameter-job-wait-timeout"><strong>job_wait_timeout</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> <p><em class="ansible-option-versionadded">added in dellemc.openmanage 9.2.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Time in seconds to wait for job completion.</p> <p>This is applicable when <em>wait_for_idrac</em> is <code>true</code>.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>600</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-reset-module-parameter-reset-to-default"><strong>reset_to_default</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in dellemc.openmanage 9.2.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>If this value is not set the default behaviour is to restart the iDRAC.</p> <p><code>All</code> Discards all settings and reset to default credentials.</p> <p><code>ResetAllWithRootDefaults</code> Discards all settings and reset the default username to root and password to the shipping value.</p> <p><code>Default</code> Discards all settings, but preserves user and network settings.</p> <p><code>CustomDefaults</code> All configuration is set to custom defaults.This option is supported on firmware version 7.00.00.00 and newer versions.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"Default"</code></li> <li><code>"All"</code></li> <li><code>"ResetAllWithRootDefaults"</code></li> <li><code>"CustomDefaults"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-reset-module-parameter-timeout"><strong>timeout</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> <p><em class="ansible-option-versionadded">added in dellemc.openmanage 5.0.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>The socket level timeout in seconds.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>30</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-reset-module-parameter-validate-certs"><strong>validate_certs</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in dellemc.openmanage 5.0.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>If <code>false</code>, the SSL certificates will not be validated.</p> <p>Configure <code>false</code> only on personally controlled sites where self-signed certificates are used.</p> <p>Prior to collection version <code>5.0.0</code>, the <em>validate_certs</em> is <code>false</code> by default.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-reset-module-parameter-wait-for-idrac"><strong>wait_for_idrac</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in dellemc.openmanage 9.2.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>This parameter provides the option to wait for the iDRAC to reset and lifecycle controller status to be ready.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-reset-module-parameter-x-auth-token"><strong>x_auth_token</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in dellemc.openmanage 9.3.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Authentication token.</p> <p>If the x_auth_token is not provided, then the environment variable <code>IDRAC_X_AUTH_TOKEN</code> is used.</p> <p>Example: export IDRAC_X_AUTH_TOKEN=x_auth_token</p> </div></td> </tr>  </table> </section> <section id="notes"> <h2>Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>Run this module from a system that has direct access to Dell iDRAC.</li> <li>This module supports both IPv4 and IPv6 address for <em>idrac_ip</em>.</li> <li>This module supports <code>check_mode</code>.</li> <li>If reset_to_default option is not specified, then this module triggers a graceful restart.</li> <li>This module skips the execution if reset options are not supported by the iDRAC.</li> </ul> </div> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja">---
- name: Reset the iDRAC to default and do not wait till the iDRAC is accessible.
  dellemc.openmanage.idrac_reset:
   idrac_ip: "192.168.0.1"
   idrac_user: "user_name"
   idrac_password: "user_password"
   ca_path: "/path/to/ca_cert.pem"
   reset_to_default: "Default"
   wait_for_idrac: false

- name: Reset the iDRAC to All and wait for lifecycle controller status to be ready.
  dellemc.openmanage.idrac_reset:
   idrac_ip: "192.168.0.1"
   idrac_user: "user_name"
   idrac_password: "user_password"
   ca_path: "/path/to/ca_cert.pem"
   reset_to_default: "All"
   wait_for_idrac: true
   default_username: "user_name"
   default_password: "user_password"

- name: Force reset the iDRAC to default.
  dellemc.openmanage.idrac_reset:
   idrac_ip: "192.168.0.1"
   idrac_user: "user_name"
   idrac_password: "user_password"
   ca_path: "/path/to/ca_cert.pem"
   reset_to_default: "Default"
   force_reset: true

- name: Gracefully restart the iDRAC.
  dellemc.openmanage.idrac_reset:
   idrac_ip: "192.168.0.1"
   idrac_user: "user_name"
   idrac_password: "user_password"
   ca_path: "/path/to/ca_cert.pem"

- name: Reset the iDRAC to custom defaults XML and do not wait till the iDRAC is accessible.
  dellemc.openmanage.idrac_reset:
   idrac_ip: "192.168.0.1"
   idrac_user: "user_name"
   idrac_password: "user_password"
   ca_path: "/path/to/ca_cert.pem"
   reset_to_default: "CustomDefaults"
   custom_defaults_file: "/path/to/custom_defaults.xml"

- name: Reset the iDRAC to custom defaults buffer input and do not wait till the iDRAC is accessible.
  dellemc.openmanage.idrac_reset:
   idrac_ip: "192.168.0.1"
   idrac_user: "user_name"
   idrac_password: "user_password"
   ca_path: "/path/to/ca_cert.pem"
   reset_to_default: "CustomDefaults"
   custom_defaults_buffer: "&lt;SystemConfiguration Model=\"PowerEdge R7525\" ServiceTag=\"ABCD123\"&gt;\n&lt;Component FQDD=\"iDRAC.Embedded.1\"&gt;\n
                               &lt;Attribute Name=\"IPMILan.1#Enable\"&gt;Disabled&lt;/Attribute&gt;\n &lt;/Component&gt;\n\n&lt;/SystemConfiguration&gt;"
</pre> </section> <section id="return-values"> <h2>Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values.html#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Key</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-reset-module-return-error-info"><strong>error_info</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Details of the HTTP Error.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> on HTTP error</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>{"error": {"@Message.ExtendedInfo": [{"Message": "Unable to process the request because an error occurred.", "MessageArgs": [], "MessageId": "GEN1234", "RelatedProperties": [], "Resolution": "Retry the operation. If the issue persists, contact your system administrator.", "Severity": "Critical"}], "code": "Base.1.0.GeneralError", "message": "A general error has occurred. See ExtendedInfo for more information."}}</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-reset-module-return-msg"><strong>msg</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Status of the iDRAC reset operation.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> always</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>"Successfully performed iDRAC reset."</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-dellemc-openmanage-idrac-reset-module-return-reset-status"><strong>reset_status</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Details of iDRAC reset operation.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> reset operation is triggered.</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>{"idracreset": {"Data": {"StatusCode": 204}, "Message": "none", "Status": "Success", "StatusCode": 204, "retval": true}}</code></p> </div></td> </tr>  </table> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Felix Stephen (@felixs88)</li> <li>Anooja Vardhineni (@anooja-vardhineni)</li> <li>Lovepreet Singh (@singh-lovepreet1)</li> <li>Abhishek Sinha (@ABHISHEK-SINHA10)</li> </ul> </section> <section id="collection-links"> <h3>Collection links</h3> <ul class="ansible-links"> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/dell/dellemc-openmanage-ansible-modules/issues" rel="noopener external" target="_blank">Issue Tracker</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/dell/dellemc-openmanage-ansible-modules" rel="noopener external" target="_blank">Homepage</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/dell/dellemc-openmanage-ansible-modules/tree/collections" rel="noopener external" target="_blank">Repository (Sources)</a></span></li> </ul> </section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2024 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/dellemc/openmanage/idrac_reset_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/dellemc/openmanage/idrac_reset_module.html</a>
  </p>
</div>
