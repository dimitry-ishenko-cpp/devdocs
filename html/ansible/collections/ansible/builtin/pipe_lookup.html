<h1 id="ansible-builtin-pipe-read-output-from-a-command">ansible.builtin.pipe â€“ read output from a command</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This lookup plugin is part of <code>ansible-core</code> and included in all Ansible installations. In most cases, you can use the short plugin name <code>pipe</code> even without specifying the <code>collections:</code> keyword. However, we recommend you use the FQCN for easy linking to the plugin documentation and to avoid conflicting with other collections that may have the same lookup plugin name.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 0.9: </span>of ansible.builtin</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#parameters" id="id2">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id3">Notes</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id5">Return Values</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Run a command and return the output.</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="1">Parameter</th> <th>Choices/Defaults</th> <th>Configuration</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="1">  <b>_terms</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> </td> <td> <div>command(s) to run.</div> </td> </tr> </table> <br>  <h2 id="notes">Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>Like all lookups this runs on the Ansible controller and is unaffected by other keywords, such as become, so if you need to different permissions you must change the command or run Ansible as another user.</li> <li>Alternatively you can use a shell/command task that runs against localhost and registers the result.</li> <li>Pipe lookup internally invokes Popen with shell=True (this is required and intentional). This type of invocation is considered as security issue if appropriate care is not taken to sanitize any user provided or variable input. It is strongly recommended to pass user input or variable input via quote filter before using with pipe lookup. See example section for this. Read more about this <a class="reference external" href="https://bandit.readthedocs.io/en/latest/plugins/b602_subprocess_popen_with_shell_equals_true.html">Bandit B602 docs</a>
</li> </ul> </div>   <h2 id="examples">Examples</h2> <pre data-language="yaml+jinja">- name: raw result of running date command"
  debug:
    msg: "{{ lookup('pipe', 'date') }}"

- name: Always use quote filter to make sure your variables are safe to use with shell
  debug:
    msg: "{{ lookup('pipe', 'getent passwd ' + myuser | quote ) }}"
</pre>   <h2 id="return-values">Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values.html#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this lookup:</p> <table class="documentation-table"> <tr> <th colspan="1">Key</th> <th>Returned</th> <th width="100%">Description</th> </tr> <tr> <td colspan="1">  <b>_string</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td>success</td> <td> <div>stdout from command</div> <br> </td> </tr> </table> <br><br> <h3 id="authors">Authors</h3> <ul class="simple"> <li>Daniel Hokka Zakrisson (!UNKNOWN) &lt;<a class="reference external" href="https://docs.ansible.com/cdn-cgi/l/email-protection#ddb9bcb3b4b8b1fbfeeeeae6fbfee8efe6fbfee9e5e6b5b2a7bcbefbfee9ebe6beb2b0">daniel<span>@</span>hozac<span>.</span>com</a>&gt;</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2021 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/ansible/builtin/pipe_lookup.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/ansible/builtin/pipe_lookup.html</a>
  </p>
</div>
