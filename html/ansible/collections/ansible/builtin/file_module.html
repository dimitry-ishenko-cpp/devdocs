<section id="ansible-builtin-file-module-manage-files-and-file-properties"> <h1>ansible.builtin.file module – Manage files and file properties</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module is part of <code>ansible-core</code> and included in all Ansible installations. In most cases, you can use the short module name <code>file</code> even without specifying the <a class="reference internal" href="../../../collections_guide/collections_using_playbooks.html#collections-keyword"><span class="std std-ref">collections keyword</span></a>. However, we recommend you use the <a class="reference internal" href="https://docs.ansible.com/ansible/latest/reference_appendices/glossary.html#term-Fully-Qualified-Collection-Name-FQCN"><span class="xref std std-term">Fully Qualified Collection Name (FQCN)</span></a> <code>ansible.builtin.file</code> for easy linking to the module documentation and to avoid conflicting with other collections that may have the same module name.</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#parameters" id="id2">Parameters</a></li> <li><a class="reference internal" href="#attributes" id="id3">Attributes</a></li> <li><a class="reference internal" href="#see-also" id="id4">See Also</a></li> <li><a class="reference internal" href="#examples" id="id5">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id6">Return Values</a></li> </ul>  <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>Set attributes of files, directories, or symlinks and their targets.</li> <li>Alternatively, remove files, symlinks or directories.</li> <li>Many other modules support the same options as the <a class="reference internal" href="#ansible-collections-ansible-builtin-file-module"><span class="std std-ref">ansible.builtin.file</span></a> module - including <a class="reference internal" href="copy_module.html#ansible-collections-ansible-builtin-copy-module"><span class="std std-ref">ansible.builtin.copy</span></a>, <a class="reference internal" href="template_module.html#ansible-collections-ansible-builtin-template-module"><span class="std std-ref">ansible.builtin.template</span></a>, and <a class="reference internal" href="assemble_module.html#ansible-collections-ansible-builtin-assemble-module"><span class="std std-ref">ansible.builtin.assemble</span></a>.</li> <li>For Windows targets, use the <a class="reference internal" href="../windows/win_file_module.html#ansible-collections-ansible-windows-win-file-module"><span class="std std-ref">ansible.windows.win_file</span></a> module instead.</li> </ul> </section> <section id="parameters"> <h2>Parameters</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ansible-builtin-file-module-parameter-access-time"><strong>access_time</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in Ansible 2.7</em></p> </div></td> <td><div class="ansible-option-cell">
<p>This parameter indicates the time the file’s access time should be set to.</p> <p>Should be <code>preserve</code> when no modification is required, <code>YYYYMMDDHHMM.SS</code> when using default time format, or <code>now</code>.</p> <p>Default is <code>None</code> meaning that <code>preserve</code> is the default for <code><a class="reference internal" href="#ansible-collections-ansible-builtin-file-module-parameter-state"><span class="std std-ref">state=[file,directory,link,hard]</span></a></code> and <code>now</code> is default for <code><a class="reference internal" href="#ansible-collections-ansible-builtin-file-module-parameter-state"><span class="std std-ref">state=touch</span></a></code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ansible-builtin-file-module-parameter-access-time-format"><strong>access_time_format</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in Ansible 2.7</em></p> </div></td> <td><div class="ansible-option-cell">
<p>When used with <code><strong><a class="reference internal" href="#ansible-collections-ansible-builtin-file-module-parameter-access-time"><span class="std std-ref">access_time</span></a></strong></code>, indicates the time format that must be used.</p> <p>Based on default Python format (see time.strftime doc).</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"%Y%m%d%H%M.%S"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-ansible-builtin-file-module-parameter-attributes"><strong id="ansible-collections-ansible-builtin-file-module-parameter-attr">attributes</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: attr</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The attributes the resulting filesystem object should have.</p> <p>To get supported flags look at the man page for <em>chattr</em> on the target system.</p> <p>This string should contain the attributes in the same order as the one displayed by <em>lsattr</em>.</p> <p>The <code>=</code> operator is assumed as default, otherwise <code>+</code> or <code>-</code> operators need to be included in the string.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ansible-builtin-file-module-parameter-follow"><strong>follow</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>This flag indicates that filesystem links, if they exist, should be followed.</p> <p><code><a class="reference internal" href="#ansible-collections-ansible-builtin-file-module-parameter-follow"><span class="std std-ref">follow=yes</span></a></code> and <code><a class="reference internal" href="#ansible-collections-ansible-builtin-file-module-parameter-state"><span class="std std-ref">state=link</span></a></code> can modify <code><strong><a class="reference internal" href="#ansible-collections-ansible-builtin-file-module-parameter-src"><span class="std std-ref">src</span></a></strong></code> when combined with parameters such as <code><strong><a class="reference internal" href="#ansible-collections-ansible-builtin-file-module-parameter-mode"><span class="std std-ref">mode</span></a></strong></code>.</p> <p>Previous to Ansible 2.5, this was <code>false</code> by default.</p> <p>While creating a symlink with a non-existent destination, set <code><strong><a class="reference internal" href="#ansible-collections-ansible-builtin-file-module-parameter-follow"><span class="std std-ref">follow</span></a></strong></code> to <code>false</code> to avoid a warning message related to permission issues. The warning message is added to notify the user that we can not set permissions to the non-existent destination.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ansible-builtin-file-module-parameter-force"><strong>force</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Force the creation of the symlinks in two cases: the source file does not exist (but will appear later); the destination exists and is a file (so, we need to unlink the <code><strong><a class="reference internal" href="#ansible-collections-ansible-builtin-file-module-parameter-path"><span class="std std-ref">path</span></a></strong></code> file and create a symlink to the <code><strong><a class="reference internal" href="#ansible-collections-ansible-builtin-file-module-parameter-src"><span class="std std-ref">src</span></a></strong></code> file in place of it).</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ansible-builtin-file-module-parameter-group"><strong>group</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Name of the group that should own the filesystem object, as would be fed to <em>chown</em>.</p> <p>When left unspecified, it uses the current group of the current user unless you are root, in which case it can preserve the previous ownership.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ansible-builtin-file-module-parameter-mode"><strong>mode</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">any</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The permissions the resulting filesystem object should have.</p> <p>For those used to <em>/usr/bin/chmod</em> remember that modes are actually octal numbers. You must give Ansible enough information to parse them correctly. For consistent results, quote octal numbers (for example, <code>'644'</code> or <code>'1777'</code>) so Ansible receives a string and can do its own conversion from string into number. Adding a leading zero (for example, <code>0755</code>) works sometimes, but can fail in loops and some other circumstances.</p> <p>Giving Ansible a number without following either of these rules will end up with a decimal number which will have unexpected results.</p> <p>As of Ansible 1.8, the mode may be specified as a symbolic mode (for example, <code>u+rwx</code> or <code>u=rw,g=r,o=r</code>).</p> <p>If <code><strong><a class="reference internal" href="#ansible-collections-ansible-builtin-file-module-parameter-mode"><span class="std std-ref">mode</span></a></strong></code> is not specified and the destination filesystem object <strong>does not</strong> exist, the default <code>umask</code> on the system will be used when setting the mode for the newly created filesystem object.</p> <p>If <code><strong><a class="reference internal" href="#ansible-collections-ansible-builtin-file-module-parameter-mode"><span class="std std-ref">mode</span></a></strong></code> is not specified and the destination filesystem object <strong>does</strong> exist, the mode of the existing filesystem object will be used.</p> <p>Specifying <code><strong><a class="reference internal" href="#ansible-collections-ansible-builtin-file-module-parameter-mode"><span class="std std-ref">mode</span></a></strong></code> is the best way to ensure filesystem objects are created with the correct permissions. See CVE-2020-1736 for further details.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ansible-builtin-file-module-parameter-modification-time"><strong>modification_time</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in Ansible 2.7</em></p> </div></td> <td><div class="ansible-option-cell">
<p>This parameter indicates the time the file’s modification time should be set to.</p> <p>Should be <code>preserve</code> when no modification is required, <code>YYYYMMDDHHMM.SS</code> when using default time format, or <code>now</code>.</p> <p>Default is None meaning that <code>preserve</code> is the default for <code><a class="reference internal" href="#ansible-collections-ansible-builtin-file-module-parameter-state"><span class="std std-ref">state=[file,directory,link,hard]</span></a></code> and <code>now</code> is default for <code><a class="reference internal" href="#ansible-collections-ansible-builtin-file-module-parameter-state"><span class="std std-ref">state=touch</span></a></code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ansible-builtin-file-module-parameter-modification-time-format"><strong>modification_time_format</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in Ansible 2.7</em></p> </div></td> <td><div class="ansible-option-cell">
<p>When used with <code><strong><a class="reference internal" href="#ansible-collections-ansible-builtin-file-module-parameter-modification-time"><span class="std std-ref">modification_time</span></a></strong></code>, indicates the time format that must be used.</p> <p>Based on default Python format (see time.strftime doc).</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"%Y%m%d%H%M.%S"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ansible-builtin-file-module-parameter-owner"><strong>owner</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Name of the user that should own the filesystem object, as would be fed to <em>chown</em>.</p> <p>When left unspecified, it uses the current user unless you are root, in which case it can preserve the previous ownership.</p> <p>Specifying a numeric username will be assumed to be a user ID and not a username. Avoid numeric usernames to avoid this confusion.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">   
<p class="ansible-option-title" id="ansible-collections-ansible-builtin-file-module-parameter-path"><strong id="ansible-collections-ansible-builtin-file-module-parameter-dest">path</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: dest, name</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">path</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Path to the file being managed.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ansible-builtin-file-module-parameter-recurse"><strong>recurse</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Recursively set the specified file attributes on directory contents.</p> <p>This applies only when <code><strong><a class="reference internal" href="#ansible-collections-ansible-builtin-file-module-parameter-state"><span class="std std-ref">state</span></a></strong></code> is set to <code>directory</code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ansible-builtin-file-module-parameter-selevel"><strong>selevel</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The level part of the SELinux filesystem object context.</p> <p>This is the MLS/MCS attribute, sometimes known as the <code>range</code>.</p> <p>When set to <code>_default</code>, it will use the <code>level</code> portion of the policy if available.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ansible-builtin-file-module-parameter-serole"><strong>serole</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The role part of the SELinux filesystem object context.</p> <p>When set to <code>_default</code>, it will use the <code>role</code> portion of the policy if available.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ansible-builtin-file-module-parameter-setype"><strong>setype</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The type part of the SELinux filesystem object context.</p> <p>When set to <code>_default</code>, it will use the <code>type</code> portion of the policy if available.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ansible-builtin-file-module-parameter-seuser"><strong>seuser</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The user part of the SELinux filesystem object context.</p> <p>By default it uses the <code>system</code> policy, where applicable.</p> <p>When set to <code>_default</code>, it will use the <code>user</code> portion of the policy if available.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ansible-builtin-file-module-parameter-src"><strong>src</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">path</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Path of the file to link to.</p> <p>This applies only to <code><a class="reference internal" href="#ansible-collections-ansible-builtin-file-module-parameter-state"><span class="std std-ref">state=link</span></a></code> and <code><a class="reference internal" href="#ansible-collections-ansible-builtin-file-module-parameter-state"><span class="std std-ref">state=hard</span></a></code>.</p> <p>For <code><a class="reference internal" href="#ansible-collections-ansible-builtin-file-module-parameter-state"><span class="std std-ref">state=link</span></a></code>, this will also accept a non-existing path.</p> <p>Relative paths are relative to the file being created (<code><strong><a class="reference internal" href="#ansible-collections-ansible-builtin-file-module-parameter-path"><span class="std std-ref">path</span></a></strong></code>) which is how the Unix command <code>ln -s SRC DEST</code> treats relative paths.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ansible-builtin-file-module-parameter-state"><strong>state</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>If <code>absent</code>, directories will be recursively deleted, and files or symlinks will be unlinked. In the case of a directory, if <code>diff</code> is declared, you will see the files and folders deleted listed under <code>path_contents</code>. Note that <code>absent</code> will not cause <a class="reference internal" href="#ansible-collections-ansible-builtin-file-module"><span class="std std-ref">ansible.builtin.file</span></a> to fail if the <code><strong><a class="reference internal" href="#ansible-collections-ansible-builtin-file-module-parameter-path"><span class="std std-ref">path</span></a></strong></code> does not exist as the state did not change.</p> <p>If <code>directory</code>, all intermediate subdirectories will be created if they do not exist. Since Ansible 1.7 they will be created with the supplied permissions.</p> <p>If <code>file</code>, with no other options, returns the current state of <code>path</code>.</p> <p>If <code>file</code>, even with other options (such as <code><strong><a class="reference internal" href="#ansible-collections-ansible-builtin-file-module-parameter-mode"><span class="std std-ref">mode</span></a></strong></code>), the file will be modified if it exists but will NOT be created if it does not exist. Set to <code>touch</code> or use the <a class="reference internal" href="copy_module.html#ansible-collections-ansible-builtin-copy-module"><span class="std std-ref">ansible.builtin.copy</span></a> or <a class="reference internal" href="template_module.html#ansible-collections-ansible-builtin-template-module"><span class="std std-ref">ansible.builtin.template</span></a> module if you want to create the file if it does not exist.</p> <p>If <code>hard</code>, the hard link will be created or changed.</p> <p>If <code>link</code>, the symbolic link will be created or changed.</p> <p>If <code>touch</code> (new in 1.4), an empty file will be created if the file does not exist, while an existing file or directory will receive updated file access and modification times (similar to the way <code>touch</code> works from the command line).</p> <p>Default is the current state of the file if it exists, <code>directory</code> if <code><a class="reference internal" href="#ansible-collections-ansible-builtin-file-module-parameter-recurse"><span class="std std-ref">recurse=yes</span></a></code>, or <code>file</code> otherwise.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"absent"</code></li> <li><code>"directory"</code></li> <li><code>"file"</code></li> <li><code>"hard"</code></li> <li><code>"link"</code></li> <li><code>"touch"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ansible-builtin-file-module-parameter-unsafe-writes"><strong>unsafe_writes</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Influence when to use atomic operation to prevent data corruption or inconsistent reads from the target filesystem object.</p> <p>By default this module uses atomic operations to prevent data corruption or inconsistent reads from the target filesystem objects, but sometimes systems are configured or just broken in ways that prevent this. One example is docker mounted filesystem objects, which cannot be updated atomically from inside the container and can only be written in an unsafe manner.</p> <p>This option allows Ansible to fall back to unsafe methods of updating filesystem objects when atomic operations fail (however, it doesn’t force Ansible to perform unsafe writes).</p> <p>IMPORTANT! Unsafe writes are subject to race conditions and can lead to data corruption.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr>  </table> </section> <section id="attributes"> <h2>Attributes</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Attribute</p></th> <th class="head"><p>Support</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ansible-builtin-file-module-attribute-check-mode"><strong>check_mode</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-label">Support: </strong><strong class="ansible-attribute-support-full">full</strong></p> </div></td> <td><div class="ansible-option-cell">
<p>Can run in check_mode and return changed status prediction without modifying target, if not supported the action will be skipped.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ansible-builtin-file-module-attribute-diff-mode"><strong>diff_mode</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-label">Support: </strong><strong class="ansible-attribute-support-partial">partial</strong></p> <p>permissions and ownership will be shown but file contents on absent/touch will not.</p> </div></td> <td><div class="ansible-option-cell">
<p>Will return details on what has changed (or possibly needs changing in check_mode), when in diff mode</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ansible-builtin-file-module-attribute-platform"><strong>platform</strong></p> 
</div></td> <td><div class="ansible-option-cell">
<p><strong class="ansible-attribute-support-property">Platform:</strong> <strong class="ansible-attribute-support-full">posix</strong></p> </div></td> <td><div class="ansible-option-cell">
<p>Target OS/families that can be operated against</p> </div></td> </tr>  </table> </section> <section id="see-also"> <h2>See Also</h2> <div class="admonition seealso"> <p class="admonition-title">See also</p> <dl class="simple"> <dt><a class="reference internal" href="assemble_module.html#ansible-collections-ansible-builtin-assemble-module"><span class="std std-ref">ansible.builtin.assemble</span></a></dt>
<dd>
<p>Assemble configuration files from fragments.</p> </dd> <dt><a class="reference internal" href="copy_module.html#ansible-collections-ansible-builtin-copy-module"><span class="std std-ref">ansible.builtin.copy</span></a></dt>
<dd>
<p>Copy files to remote locations.</p> </dd> <dt><a class="reference internal" href="stat_module.html#ansible-collections-ansible-builtin-stat-module"><span class="std std-ref">ansible.builtin.stat</span></a></dt>
<dd>
<p>Retrieve file or file system status.</p> </dd> <dt><a class="reference internal" href="template_module.html#ansible-collections-ansible-builtin-template-module"><span class="std std-ref">ansible.builtin.template</span></a></dt>
<dd>
<p>Template a file out to a target host.</p> </dd> <dt><a class="reference internal" href="../windows/win_file_module.html#ansible-collections-ansible-windows-win-file-module"><span class="std std-ref">ansible.windows.win_file</span></a></dt>
<dd>
<p>Creates, touches or removes files or directories.</p> </dd> </dl> </div> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja">- name: Change file ownership, group and permissions
  ansible.builtin.file:
    path: /etc/foo.conf
    owner: foo
    group: foo
    mode: '0644'

- name: Give insecure permissions to an existing file
  ansible.builtin.file:
    path: /work
    owner: root
    group: root
    mode: '1777'

- name: Create a symbolic link
  ansible.builtin.file:
    src: /file/to/link/to
    dest: /path/to/symlink
    owner: foo
    group: foo
    state: link

- name: Create two hard links
  ansible.builtin.file:
    src: '/tmp/{{ item.src }}'
    dest: '{{ item.dest }}'
    state: hard
  loop:
    - { src: x, dest: y }
    - { src: z, dest: k }

- name: Touch a file, using symbolic modes to set the permissions (equivalent to 0644)
  ansible.builtin.file:
    path: /etc/foo.conf
    state: touch
    mode: u=rw,g=r,o=r

- name: Touch the same file, but add/remove some permissions
  ansible.builtin.file:
    path: /etc/foo.conf
    state: touch
    mode: u+rw,g-wx,o-rwx

- name: Touch again the same file, but do not change times this makes the task idempotent
  ansible.builtin.file:
    path: /etc/foo.conf
    state: touch
    mode: u+rw,g-wx,o-rwx
    modification_time: preserve
    access_time: preserve

- name: Create a directory if it does not exist
  ansible.builtin.file:
    path: /etc/some_directory
    state: directory
    mode: '0755'

- name: Update modification and access time of given file
  ansible.builtin.file:
    path: /etc/some_file
    state: file
    modification_time: now
    access_time: now

- name: Set access time based on seconds from epoch value
  ansible.builtin.file:
    path: /etc/another_file
    state: file
    access_time: '{{ "%Y%m%d%H%M.%S" | strftime(stat_var.stat.atime) }}'

- name: Recursively change ownership of a directory
  ansible.builtin.file:
    path: /etc/foo
    state: directory
    recurse: yes
    owner: foo
    group: foo

- name: Remove file (delete file)
  ansible.builtin.file:
    path: /etc/foo.txt
    state: absent

- name: Recursively remove directory
  ansible.builtin.file:
    path: /etc/foo
    state: absent
</pre> </section> <section id="return-values"> <h2>Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values.html#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Key</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ansible-builtin-file-module-return-dest"><strong>dest</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Destination file/path, equal to the value passed to <code><strong><a class="reference internal" href="#ansible-collections-ansible-builtin-file-module-parameter-path"><span class="std std-ref">path</span></a></strong></code>.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> <code><a class="reference internal" href="#ansible-collections-ansible-builtin-file-module-parameter-state"><span class="std std-ref">state=touch</span></a></code>, <code><a class="reference internal" href="#ansible-collections-ansible-builtin-file-module-parameter-state"><span class="std std-ref">state=hard</span></a></code>, <code><a class="reference internal" href="#ansible-collections-ansible-builtin-file-module-parameter-state"><span class="std std-ref">state=link</span></a></code></p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>"/path/to/file.txt"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ansible-builtin-file-module-return-path"><strong>path</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Destination file/path, equal to the value passed to <code><strong><a class="reference internal" href="#ansible-collections-ansible-builtin-file-module-parameter-path"><span class="std std-ref">path</span></a></strong></code>.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> <code><a class="reference internal" href="#ansible-collections-ansible-builtin-file-module-parameter-state"><span class="std std-ref">state=absent</span></a></code>, <code><a class="reference internal" href="#ansible-collections-ansible-builtin-file-module-parameter-state"><span class="std std-ref">state=directory</span></a></code>, <code><a class="reference internal" href="#ansible-collections-ansible-builtin-file-module-parameter-state"><span class="std std-ref">state=file</span></a></code></p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>"/path/to/file.txt"</code></p> </div></td> </tr>  </table> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Ansible Core Team</li> <li>Michael DeHaan</li> </ul> </section> <section id="collection-links"> <h3>Collection links</h3> <ul class="ansible-links"> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible/ansible/issues" rel="noopener external" target="_blank">Issue Tracker</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible/ansible" rel="noopener external" target="_blank">Repository (Sources)</a></span></li> <li><span><a class="reference internal" href="index.html#communication-for-ansible-builtin"><span class="std std-ref">Communication</span></a></span></li> </ul> </section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2024 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/ansible/builtin/file_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/ansible/builtin/file_module.html</a>
  </p>
</div>
