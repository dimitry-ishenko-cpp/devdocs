<h1 id="cisco-meraki-meraki-ms-switchport-manage-switchports-on-a-switch-in-the-meraki-cloud">cisco.meraki.meraki_ms_switchport – Manage switchports on a switch in the Meraki cloud</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/cisco/meraki">cisco.meraki collection</a> (version 2.5.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install cisco.meraki</code>.</p> <p>To use it in a playbook, specify: <code>cisco.meraki.meraki_ms_switchport</code>.</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#parameters" id="id2">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id3">Notes</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id5">Return Values</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Allows for management of switchports settings for Meraki MS switches.</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="2">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="2">  <b>access_policy_number</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>Number of the access policy to apply.</div> <div>Only applicable to access port types.</div> </td> </tr> <tr> <td colspan="2">  <b>access_policy_type</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>Open</li> <li>Custom access policy</li> <li>MAC allow list</li> <li>Sticky MAC allow list</li> </ul> </td> <td> <div>Type of access policy to apply to port.</div> </td> </tr> <tr> <td colspan="2">  <b>allowed_vlans</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> <b>Default:</b><br><div>"all"</div> </td> <td> <div>List of VLAN numbers to be allowed on switchport.</div> </td> </tr> <tr> <td colspan="2">  <b>auth_key</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>Authentication key provided by the dashboard. Required if environmental variable <code>MERAKI_KEY</code> is not set.</div> </td> </tr> <tr> <td colspan="2">  <b>enabled</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li><div>
<b>yes</b> ←</div></li> </ul> </td> <td> <div>Whether a switchport should be enabled or disabled.</div> </td> </tr> <tr> <td colspan="2">  <b>host</b>  <div> <span>string</span> </div> </td> <td> <b>Default:</b><br><div>"api.meraki.com"</div> </td> <td> <div>Hostname for Meraki dashboard.</div> <div>Can be used to access regional Meraki environments, such as China.</div> </td> </tr> <tr> <td colspan="2">  <b>internal_error_retry_time</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>60</div> </td> <td> <div>Number of seconds to retry if server returns an internal server error.</div> </td> </tr> <tr> <td colspan="2">  <b>isolation_enabled</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Isolation status of switchport.</div> </td> </tr> <tr> <td colspan="2">  <b>link_negotiation</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>Auto negotiate</b> ←</div></li> <li>100 Megabit (auto)</li> <li>100 Megabit full duplex (forced)</li> </ul> </td> <td> <div>Link speed for the switchport.</div> </td> </tr> <tr> <td colspan="2">  <b>mac_allow_list</b>  <div> <span>dictionary</span> </div> </td> <td> </td> <td> <div>MAC addresses list that are allowed on a port.</div> <div>Only applicable to access port type.</div> <div>Only applicable to access_policy_type "MAC allow list".</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>macs</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>List of MAC addresses to update with based on state option.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>state</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>merged</li> <li><div>
<b>replaced</b> ←</div></li> <li>deleted</li> </ul> </td> <td> <div>The state the configuration should be left in.</div> <div>Merged, MAC addresses provided will be added to the current allow list.</div> <div>Replaced, All MAC addresses are overwritten, only the MAC addresses provided with exist in the allow list.</div> <div>Deleted, Remove the MAC addresses provided from the current allow list.</div> </td> </tr> <tr> <td colspan="2">  <b>name</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Switchport description.</div> <div>
<br>aliases: description</div> </td> </tr> <tr> <td colspan="2">  <b>number</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Port number.</div> </td> </tr> <tr> <td colspan="2">  <b>org_id</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>ID of organization.</div> </td> </tr> <tr> <td colspan="2">  <b>org_name</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Name of organization.</div> <div>
<br>aliases: organization</div> </td> </tr> <tr> <td colspan="2">  <b>output_format</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>snakecase</b> ←</div></li> <li>camelcase</li> </ul> </td> <td> <div>Instructs module whether response keys should be snake case (ex. <code>net_id</code>) or camel case (ex. <code>netId</code>).</div> </td> </tr> <tr> <td colspan="2">  <b>output_level</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>debug</li> <li><div>
<b>normal</b> ←</div></li> </ul> </td> <td> <div>Set amount of debug output during module execution.</div> </td> </tr> <tr> <td colspan="2">  <b>poe_enabled</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li><div>
<b>yes</b> ←</div></li> </ul> </td> <td> <div>Enable or disable Power Over Ethernet on a port.</div> </td> </tr> <tr> <td colspan="2">  <b>rate_limit_retry_time</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>165</div> </td> <td> <div>Number of seconds to retry if rate limiter is triggered.</div> </td> </tr> <tr> <td colspan="2">  <b>rstp_enabled</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li><div>
<b>yes</b> ←</div></li> </ul> </td> <td> <div>Enable or disable Rapid Spanning Tree Protocol on a port.</div> </td> </tr> <tr> <td colspan="2">  <b>serial</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>Serial nubmer of the switch.</div> </td> </tr> <tr> <td colspan="2">  <b>state</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>query</b> ←</div></li> <li>present</li> </ul> </td> <td> <div>Specifies whether a switchport should be queried or modified.</div> </td> </tr> <tr> <td colspan="2">  <b>sticky_mac_allow_list</b>  <div> <span>dictionary</span> </div> </td> <td> </td> <td> <div>MAC addresses list that are allowed on a port.</div> <div>Only applicable to access port type.</div> <div>Only applicable to access_policy_type "Sticky MAC allow list".</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>macs</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>List of MAC addresses to update with based on state option.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>state</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>merged</li> <li><div>
<b>replaced</b> ←</div></li> <li>deleted</li> </ul> </td> <td> <div>The state the configuration should be left in.</div> <div>Merged, MAC addresses provided will be added to the current allow list.</div> <div>Replaced, All MAC addresses are overwritten, only the MAC addresses provided with exist in the allow list.</div> <div>Deleted, Remove the MAC addresses provided from the current allow list.</div> </td> </tr> <tr> <td colspan="2">  <b>sticky_mac_allow_list_limit</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>The number of MAC addresses allowed in the sticky port allow list.</div> <div>Only applicable to access port type.</div> <div>Only applicable to access_policy_type "Sticky MAC allow list".</div> <div>The value must be equal to or greater then the list size of sticky_mac_allow_list. Value will be checked for validity, during processing.</div> </td> </tr> <tr> <td colspan="2">  <b>stp_guard</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>disabled</b> ←</div></li> <li>root guard</li> <li>bpdu guard</li> <li>loop guard</li> </ul> </td> <td> <div>Set state of STP guard.</div> </td> </tr> <tr> <td colspan="2">  <b>tags</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>List of tags to assign to a port.</div> </td> </tr> <tr> <td colspan="2">  <b>timeout</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>30</div> </td> <td> <div>Time to timeout for HTTP requests.</div> </td> </tr> <tr> <td colspan="2">  <b>type</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>access</b> ←</div></li> <li>trunk</li> </ul> </td> <td> <div>Set port type.</div> </td> </tr> <tr> <td colspan="2">  <b>use_https</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li><div>
<b>yes</b> ←</div></li> </ul> </td> <td> <div>If <code>no</code>, it will use HTTP. Otherwise it will use HTTPS.</div> <div>Only useful for internal Meraki developers.</div> </td> </tr> <tr> <td colspan="2">  <b>use_proxy</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>If <code>no</code>, it will not use a proxy, even if one is defined in an environment variable on the target hosts.</div> </td> </tr> <tr> <td colspan="2">  <b>validate_certs</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li><div>
<b>yes</b> ←</div></li> </ul> </td> <td> <div>Whether to validate HTTP certificates.</div> </td> </tr> <tr> <td colspan="2">  <b>vlan</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>VLAN number assigned to port.</div> <div>If a port is of type trunk, the specified VLAN is the native VLAN.</div> </td> </tr> <tr> <td colspan="2">  <b>voice_vlan</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>VLAN number assigned to a port for voice traffic.</div> <div>Only applicable to access port type.</div> <div>Only applicable if voice_vlan_state is set to present.</div> </td> </tr> <tr> <td colspan="2">  <b>voice_vlan_state</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>absent</li> <li><div>
<b>present</b> ←</div></li> </ul> </td> <td> <div>Specifies whether voice vlan configuration should be present or absent.</div> </td> </tr> </table> <br>  <h2 id="notes">Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>More information about the Meraki API can be found at <a class="reference external" href="https://dashboard.meraki.com/api_docs">https://dashboard.meraki.com/api_docs</a>.</li> <li>Some of the options are likely only used for developers within Meraki.</li> <li>As of Ansible 2.9, Meraki modules output keys as snake case. To use camel case, set the <code>ANSIBLE_MERAKI_FORMAT</code> environment variable to <code>camelcase</code>.</li> <li>Ansible’s Meraki modules will stop supporting camel case output in Ansible 2.13. Please update your playbooks.</li> <li>Check Mode downloads the current configuration from the dashboard, then compares changes against this download. Check Mode will report changed if there are differences in the configurations, but does not submit changes to the API for validation of change.</li> </ul> </div>   <h2 id="examples">Examples</h2> <pre data-language="yaml+jinja">- name: Query information about all switchports on a switch
  meraki_switchport:
    auth_key: abc12345
    state: query
    serial: ABC-123
  delegate_to: localhost

- name: Query information about all switchports on a switch
  meraki_switchport:
    auth_key: abc12345
    state: query
    serial: ABC-123
    number: 2
  delegate_to: localhost

- name: Name switchport
  meraki_switchport:
    auth_key: abc12345
    state: present
    serial: ABC-123
    number: 7
    name: Test Port
  delegate_to: localhost

- name: Configure access port with voice VLAN
  meraki_switchport:
    auth_key: abc12345
    state: present
    serial: ABC-123
    number: 7
    enabled: true
    name: Test Port
    tags: desktop
    type: access
    vlan: 10
    voice_vlan: 11
  delegate_to: localhost

- name: Check access port for idempotency
  meraki_switchport:
    auth_key: abc12345
    state: present
    serial: ABC-123
    number: 7
    enabled: true
    name: Test Port
    tags: desktop
    type: access
    vlan: 10
    voice_vlan: 11
  delegate_to: localhost

- name: Configure trunk port with specific VLANs
  meraki_switchport:
    auth_key: abc12345
    state: present
    serial: ABC-123
    number: 7
    enabled: true
    name: Server port
    tags: server
    type: trunk
    allowed_vlans:
      - 10
      - 15
      - 20
  delegate_to: localhost

- name: Configure access port with sticky MAC allow list and limit.
  meraki_switchport:
    auth_key: abc12345
    state: present
    serial: ABC-123
    number: 5
    sticky_mac_allow_limit: 3
    sticky_mac_allow_list:
        macs:
          - aa:aa:bb:bb:cc:cc
          - bb:bb:aa:aa:cc:cc
          - 11:aa:bb:bb:cc:cc
        state: replaced
    delegate_to: localhost

- name: Delete an existing MAC address from the sticky MAC allow list.
  meraki_switchport:
    auth_key: abc12345
    state: present
    serial: ABC-123
    number: 5
    sticky_mac_allow_list:
        macs:
          - aa:aa:bb:bb:cc:cc
        state: deleted
    delegate_to: localhost

- name: Add a MAC address to sticky MAC allow list.
  meraki_switchport:
    auth_key: abc12345
    state: present
    serial: ABC-123
    number: 5
    sticky_mac_allow_list:
        macs:
          - 22:22:bb:bb:cc:cc
        state: merged
    delegate_to: localhost
</pre>   <h2 id="return-values">Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values.html#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="documentation-table"> <tr> <th colspan="2">Key</th> <th>Returned</th> <th width="100%">Description</th> </tr> <tr> <td colspan="2">  <b>data</b>  <div> <span>complex</span> </div> </td> <td>success</td> <td> <div>Information queried or updated switchports.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>access_policy_number</b>  <div> <span>integer</span> </div> </td> <td>success</td> <td> <div>Number of assigned access policy. Only applicable to access ports.</div> <br> <div><b>Sample:</b></div> <div>1234</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>access_policy_type</b>  <div> <span>string</span> </div> </td> <td>success, when assigned</td> <td> <div>Type of access policy assigned to port</div> <br> <div><b>Sample:</b></div> <div>MAC allow list</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>allowed_vlans</b>  <div> <span>string</span> </div> </td> <td>success, when port is set as access</td> <td> <div>List of VLANs allowed on an access port</div> <br> <div><b>Sample:</b></div> <div>all</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>enabled</b>  <div> <span>boolean</span> </div> </td> <td>success</td> <td> <div>Enabled state of port.</div> <br> <div><b>Sample:</b></div> <div>True</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>isolation_enabled</b>  <div> <span>boolean</span> </div> </td> <td>success</td> <td> <div>Port isolation status of port.</div> <br> <div><b>Sample:</b></div> <div>True</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>link_negotiation</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>Link speed for the port.</div> <br> <div><b>Sample:</b></div> <div>Auto negotiate</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>mac_allow_list</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td>success</td> <td> <div>List of MAC addresses currently allowed on a non-sticky port. Used with access_policy_type of MAC allow list.</div> <br> <div><b>Sample:</b></div> <div>['11:aa:bb:bb:cc:cc', '22:aa:bb:bb:cc:cc', '33:aa:bb:bb:cc:cc']</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>name</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>Human friendly description of port.</div> <br> <div><b>Sample:</b></div> <div>Jim Phone Port</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>number</b>  <div> <span>integer</span> </div> </td> <td>success</td> <td> <div>Number of port.</div> <br> <div><b>Sample:</b></div> <div>1</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>poe_enabled</b>  <div> <span>boolean</span> </div> </td> <td>success</td> <td> <div>Power Over Ethernet enabled state of port.</div> <br> <div><b>Sample:</b></div> <div>True</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>port_schedule_id</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>Unique ID of assigned port schedule</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>rstp_enabled</b>  <div> <span>boolean</span> </div> </td> <td>success</td> <td> <div>Enabled or disabled state of Rapid Spanning Tree Protocol (RSTP)</div> <br> <div><b>Sample:</b></div> <div>True</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>sticky_mac_allow_list</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td>success</td> <td> <div>List of MAC addresses currently allowed on a sticky port. Used with access_policy_type of Sticky MAC allow list.</div> <br> <div><b>Sample:</b></div> <div>['11:aa:bb:bb:cc:cc', '22:aa:bb:bb:cc:cc', '33:aa:bb:bb:cc:cc']</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>sticky_mac_allow_list_limit</b>  <div> <span>integer</span> </div> </td> <td>success</td> <td> <div>Number of MAC addresses allowed on a sticky port.</div> <br> <div><b>Sample:</b></div> <div>6</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>stp_guard</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>State of STP guard</div> <br> <div><b>Sample:</b></div> <div>Root Guard</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>tags</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td>success</td> <td> <div>List of tags assigned to port.</div> <br> <div><b>Sample:</b></div> <div>['phone', 'marketing']</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>type</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>Type of switchport.</div> <br> <div><b>Sample:</b></div> <div>trunk</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>udld</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>Alert state of UDLD</div> <br> <div><b>Sample:</b></div> <div>Alert only</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>vlan</b>  <div> <span>integer</span> </div> </td> <td>success</td> <td> <div>VLAN assigned to port.</div> <br> <div><b>Sample:</b></div> <div>10</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>voice_vlan</b>  <div> <span>integer</span> </div> </td> <td>success</td> <td> <div>VLAN assigned to port with voice VLAN enabled devices.</div> <br> <div><b>Sample:</b></div> <div>20</div> </td> </tr> </table> <br><br> <h3 id="authors">Authors</h3> <ul class="simple"> <li>Kevin Breit (@kbreit)</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2021 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/cisco/meraki/meraki_ms_switchport_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/cisco/meraki/meraki_ms_switchport_module.html</a>
  </p>
</div>
