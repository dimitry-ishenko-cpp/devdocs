<h1 id="cisco-meraki-meraki-mx-vlan-manage-vlans-in-the-meraki-cloud">cisco.meraki.meraki_mx_vlan – Manage VLANs in the Meraki cloud</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/cisco/meraki">cisco.meraki collection</a> (version 2.5.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install cisco.meraki</code>.</p> <p>To use it in a playbook, specify: <code>cisco.meraki.meraki_mx_vlan</code>.</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#parameters" id="id2">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id3">Notes</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id5">Return Values</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Create, edit, query, or delete VLANs in a Meraki environment.</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="2">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="2">  <b>appliance_ip</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>IP address of appliance.</div> <div>Address must be within subnet specified in <code>subnet</code> parameter.</div> </td> </tr> <tr> <td colspan="2">  <b>auth_key</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>Authentication key provided by the dashboard. Required if environmental variable <code>MERAKI_KEY</code> is not set.</div> </td> </tr> <tr> <td colspan="2">  <b>dhcp_boot_filename</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Filename to boot from for DHCP boot</div> </td> </tr> <tr> <td colspan="2">  <b>dhcp_boot_next_server</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>DHCP boot option to direct boot clients to the server to load boot file from.</div> </td> </tr> <tr> <td colspan="2">  <b>dhcp_boot_options_enabled</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Enable DHCP boot options</div> </td> </tr> <tr> <td colspan="2">  <b>dhcp_handling</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>Run a DHCP server</li> <li>Relay DHCP to another server</li> <li>Do not respond to DHCP requests</li> <li>none</li> <li>server</li> <li>relay</li> </ul> </td> <td> <div>How to handle DHCP packets on network.</div> </td> </tr> <tr> <td colspan="2">  <b>dhcp_lease_time</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>30 minutes</li> <li>1 hour</li> <li>4 hours</li> <li>12 hours</li> <li>1 day</li> <li>1 week</li> </ul> </td> <td> <div>DHCP lease timer setting</div> </td> </tr> <tr> <td colspan="2">  <b>dhcp_options</b>  <div> <span>list</span> / <span>elements=dictionary</span> </div> </td> <td> </td> <td> <div>List of DHCP option values</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>code</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>DHCP option number.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>type</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>text</li> <li>ip</li> <li>hex</li> <li>integer</li> </ul> </td> <td> <div>Type of value for DHCP option.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>value</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Value for DHCP option.</div> </td> </tr> <tr> <td colspan="2">  <b>dhcp_relay_server_ips</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>IP addresses to forward DHCP packets to.</div> </td> </tr> <tr> <td colspan="2">  <b>dns_nameservers</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Semi-colon delimited list of DNS IP addresses.</div> <div>Specify one of the following options for preprogrammed DNS entries opendns, google_dns, upstream_dns</div> </td> </tr> <tr> <td colspan="2">  <b>fixed_ip_assignments</b>  <div> <span>list</span> / <span>elements=dictionary</span> </div> </td> <td> </td> <td> <div>Static IP address assignments to be distributed via DHCP by MAC address.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>ip</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>IP address for fixed IP assignment binding.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>mac</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>MAC address for fixed IP assignment binding.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>name</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Descriptive name of IP assignment binding.</div> </td> </tr> <tr> <td colspan="2">  <b>host</b>  <div> <span>string</span> </div> </td> <td> <b>Default:</b><br><div>"api.meraki.com"</div> </td> <td> <div>Hostname for Meraki dashboard.</div> <div>Can be used to access regional Meraki environments, such as China.</div> </td> </tr> <tr> <td colspan="2">  <b>internal_error_retry_time</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>60</div> </td> <td> <div>Number of seconds to retry if server returns an internal server error.</div> </td> </tr> <tr> <td colspan="2">  <b>name</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Name of VLAN.</div> <div>
<br>aliases: vlan_name</div> </td> </tr> <tr> <td colspan="2">  <b>net_id</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>ID of network which VLAN is in or should be in.</div> </td> </tr> <tr> <td colspan="2">  <b>net_name</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Name of network which VLAN is in or should be in.</div> <div>
<br>aliases: network</div> </td> </tr> <tr> <td colspan="2">  <b>org_id</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>ID of organization.</div> </td> </tr> <tr> <td colspan="2">  <b>org_name</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Name of organization.</div> <div>
<br>aliases: organization</div> </td> </tr> <tr> <td colspan="2">  <b>output_format</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>snakecase</b> ←</div></li> <li>camelcase</li> </ul> </td> <td> <div>Instructs module whether response keys should be snake case (ex. <code>net_id</code>) or camel case (ex. <code>netId</code>).</div> </td> </tr> <tr> <td colspan="2">  <b>output_level</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>debug</li> <li><div>
<b>normal</b> ←</div></li> </ul> </td> <td> <div>Set amount of debug output during module execution.</div> </td> </tr> <tr> <td colspan="2">  <b>rate_limit_retry_time</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>165</div> </td> <td> <div>Number of seconds to retry if rate limiter is triggered.</div> </td> </tr> <tr> <td colspan="2">  <b>reserved_ip_range</b>  <div> <span>list</span> / <span>elements=dictionary</span> </div> </td> <td> </td> <td> <div>IP address ranges which should be reserve and not distributed via DHCP.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>comment</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Description of IP addresses reservation</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>end</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Last IP address of reserved IP address range, inclusive.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>start</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>First IP address of reserved IP address range, inclusive.</div> </td> </tr> <tr> <td colspan="2">  <b>state</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>absent</li> <li>present</li> <li><div>
<b>query</b> ←</div></li> </ul> </td> <td> <div>Specifies whether object should be queried, created/modified, or removed.</div> </td> </tr> <tr> <td colspan="2">  <b>subnet</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>CIDR notation of network subnet.</div> </td> </tr> <tr> <td colspan="2">  <b>timeout</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>30</div> </td> <td> <div>Time to timeout for HTTP requests.</div> </td> </tr> <tr> <td colspan="2">  <b>use_https</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li><div>
<b>yes</b> ←</div></li> </ul> </td> <td> <div>If <code>no</code>, it will use HTTP. Otherwise it will use HTTPS.</div> <div>Only useful for internal Meraki developers.</div> </td> </tr> <tr> <td colspan="2">  <b>use_proxy</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>If <code>no</code>, it will not use a proxy, even if one is defined in an environment variable on the target hosts.</div> </td> </tr> <tr> <td colspan="2">  <b>validate_certs</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li><div>
<b>yes</b> ←</div></li> </ul> </td> <td> <div>Whether to validate HTTP certificates.</div> </td> </tr> <tr> <td colspan="2">  <b>vlan_id</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>ID number of VLAN.</div> <div>ID should be between 1-4096.</div> </td> </tr> <tr> <td colspan="2">  <b>vpn_nat_subnet</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The translated VPN subnet if VPN and VPN subnet translation are enabled on the VLAN.</div> </td> </tr> </table> <br>  <h2 id="notes">Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>Meraki’s API will return an error if VLANs aren’t enabled on a network. VLANs are returned properly if VLANs are enabled on a network.</li> <li>Some of the options are likely only used for developers within Meraki.</li> <li>Meraki’s API defaults to networks having VLAN support disabled and there is no way to enable VLANs support in the API. VLAN support must be enabled manually.</li> <li>More information about the Meraki API can be found at <a class="reference external" href="https://dashboard.meraki.com/api_docs">https://dashboard.meraki.com/api_docs</a>.</li> <li>Some of the options are likely only used for developers within Meraki.</li> <li>As of Ansible 2.9, Meraki modules output keys as snake case. To use camel case, set the <code>ANSIBLE_MERAKI_FORMAT</code> environment variable to <code>camelcase</code>.</li> <li>Ansible’s Meraki modules will stop supporting camel case output in Ansible 2.13. Please update your playbooks.</li> <li>Check Mode downloads the current configuration from the dashboard, then compares changes against this download. Check Mode will report changed if there are differences in the configurations, but does not submit changes to the API for validation of change.</li> </ul> </div>   <h2 id="examples">Examples</h2> <pre data-language="yaml+jinja">- name: Query all VLANs in a network.
  meraki_vlan:
    auth_key: abc12345
    org_name: YourOrg
    net_name: YourNet
    state: query
  delegate_to: localhost

- name: Query information about a single VLAN by ID.
  meraki_vlan:
    auth_key: abc12345
    org_name: YourOrg
    net_name: YourNet
    vlan_id: 2
    state: query
  delegate_to: localhost

- name: Create a VLAN.
  meraki_vlan:
    auth_key: abc12345
    org_name: YourOrg
    net_name: YourNet
    state: present
    vlan_id: 2
    name: TestVLAN
    subnet: 192.0.1.0/24
    appliance_ip: 192.0.1.1
  delegate_to: localhost

- name: Update a VLAN.
  meraki_vlan:
    auth_key: abc12345
    org_name: YourOrg
    net_name: YourNet
    state: present
    vlan_id: 2
    name: TestVLAN
    subnet: 192.0.1.0/24
    appliance_ip: 192.168.250.2
    fixed_ip_assignments:
      - mac: "13:37:de:ad:be:ef"
        ip: 192.168.250.10
        name: fixed_ip
    reserved_ip_range:
      - start: 192.168.250.10
        end: 192.168.250.20
        comment: reserved_range
    dns_nameservers: opendns
  delegate_to: localhost

- name: Enable DHCP on VLAN with options
  meraki_vlan:
    auth_key: abc123
    state: present
    org_name: YourOrg
    net_name: YourNet
    vlan_id: 2
    name: TestVLAN
    subnet: 192.168.250.0/24
    appliance_ip: 192.168.250.2
    dhcp_handling: server
    dhcp_lease_time: 1 hour
    dhcp_boot_options_enabled: false
    dhcp_options:
      - code: 5
        type: ip
        value: 192.0.1.1
  delegate_to: localhost

- name: Delete a VLAN.
  meraki_vlan:
    auth_key: abc12345
    org_name: YourOrg
    net_name: YourNet
    state: absent
    vlan_id: 2
  delegate_to: localhost
</pre>   <h2 id="return-values">Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values.html#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="documentation-table"> <tr> <th colspan="4">Key</th> <th>Returned</th> <th width="100%">Description</th> </tr> <tr> <td colspan="4">  <b>response</b>  <div> <span>complex</span> </div> </td> <td>success</td> <td> <div>Information about the organization which was created or modified</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="3">  <b>appliance_ip</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>IP address of Meraki appliance in the VLAN</div> <br> <div><b>Sample:</b></div> <div>192.0.1.1</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="3">  <b>dhcp_boot_filename</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>Filename for boot file.</div> <br> <div><b>Sample:</b></div> <div>boot.txt</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="3">  <b>dhcp_boot_next_server</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>DHCP boot option to direct boot clients to the server to load the boot file from.</div> <br> <div><b>Sample:</b></div> <div>192.0.1.2</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="3">  <b>dhcp_boot_options_enabled</b>  <div> <span>boolean</span> </div> </td> <td>success</td> <td> <div>Whether DHCP boot options are enabled.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="3">  <b>dhcp_handling</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>Status of DHCP server on VLAN.</div> <br> <div><b>Sample:</b></div> <div>Run a DHCP server</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="3">  <b>dhcp_lease_time</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>DHCP lease time when server is active.</div> <br> <div><b>Sample:</b></div> <div>1 day</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="3">  <b>dhcp_options</b>  <div> <span>complex</span> </div> </td> <td>success</td> <td> <div>DHCP options.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>code</b>  <div> <span>integer</span> </div> </td> <td>success</td> <td> <div>Code for DHCP option.</div> <div>Integer between 2 and 254.</div> <br> <div><b>Sample:</b></div> <div>43</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>type</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>Type for DHCP option.</div> <div>Choices are <code>text</code>, <code>ip</code>, <code>hex</code>, <code>integer</code>.</div> <br> <div><b>Sample:</b></div> <div>text</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>value</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>Value for the DHCP option.</div> <br> <div><b>Sample:</b></div> <div>192.0.1.2</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="3">  <b>dnsnamservers</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>IP address or Meraki defined DNS servers which VLAN should use by default</div> <br> <div><b>Sample:</b></div> <div>upstream_dns</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="3">  <b>fixed_ip_assignments</b>  <div> <span>complex</span> </div> </td> <td>success</td> <td> <div>List of MAC addresses which have IP addresses assigned.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>macaddress</b>  <div> <span>complex</span> </div> </td> <td>success</td> <td> <div>MAC address which has IP address assigned to it. Key value is the actual MAC address.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td class="elbow-placeholder"> </td> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>ip</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>IP address which is assigned to the MAC address.</div> <br> <div><b>Sample:</b></div> <div>192.0.1.4</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td class="elbow-placeholder"> </td> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>name</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>Descriptive name for binding.</div> <br> <div><b>Sample:</b></div> <div>fixed_ip</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="3">  <b>id</b>  <div> <span>integer</span> </div> </td> <td>success</td> <td> <div>VLAN ID number.</div> <br> <div><b>Sample:</b></div> <div>2</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="3">  <b>name</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>Descriptive name of VLAN.</div> <br> <div><b>Sample:</b></div> <div>TestVLAN</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="3">  <b>networkId</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>ID number of Meraki network which VLAN is associated to.</div> <br> <div><b>Sample:</b></div> <div>N_12345</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="3">  <b>reserved_ip_ranges</b>  <div> <span>complex</span> </div> </td> <td>success</td> <td> <div>List of IP address ranges which are reserved for static assignment.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>comment</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>Description for IP address reservation.</div> <br> <div><b>Sample:</b></div> <div>reserved_range</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>end</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>Last IP address in reservation range.</div> <br> <div><b>Sample:</b></div> <div>192.0.1.10</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>start</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>First IP address in reservation range.</div> <br> <div><b>Sample:</b></div> <div>192.0.1.5</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="3">  <b>subnet</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>CIDR notation IP subnet of VLAN.</div> <br> <div><b>Sample:</b></div> <div>192.0.1.0/24</div> </td> </tr> </table> <br><br> <h3 id="authors">Authors</h3> <ul class="simple"> <li>Kevin Breit (@kbreit)</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2021 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/cisco/meraki/meraki_mx_vlan_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/cisco/meraki/meraki_mx_vlan_module.html</a>
  </p>
</div>
