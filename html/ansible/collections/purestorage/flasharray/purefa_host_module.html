<h1 id="purestorage-flasharray-purefa-host-manage-hosts-on-pure-storage-flasharrays">purestorage.flasharray.purefa_host – Manage hosts on Pure Storage FlashArrays</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/purestorage/flasharray">purestorage.flasharray collection</a> (version 1.11.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install purestorage.flasharray</code>.</p> <p>To use it in a playbook, specify: <code>purestorage.flasharray.purefa_host</code>.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 1.0.0: </span>of purestorage.flasharray</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id4">Notes</a></li> <li><a class="reference internal" href="#examples" id="id5">Examples</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Create, delete or modify hosts on Pure Storage FlashArrays.</li> </ul>   <h2 id="requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>python &gt;= 2.7</li> <li>purestorage &gt;= 1.19</li> <li>py-pure-client &gt;= 1.6.0</li> <li>netaddr</li> <li>requests</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="1">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="1">  <b>api_token</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>FlashArray API token for admin privileged user.</div> </td> </tr> <tr> <td colspan="1">  <b>count</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>Number of hosts to be created in a multiple host creation</div> <div>Only supported from Purity//FA v6.0.0 and higher</div> </td> </tr> <tr> <td colspan="1">  <b>digits</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>1</div> </td> <td> <div>Number of digits to use for multiple host count. This will pad the index number with zeros where necessary</div> <div>Only supported from Purity//FA v6.0.0 and higher</div> <div>Range is between 1 and 10</div> </td> </tr> <tr> <td colspan="1">  <b>fa_url</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>FlashArray management IPv4 address or Hostname.</div> </td> </tr> <tr> <td colspan="1">  <b>host_password</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Sets the host password for CHAP authentication</div> <div>Password length between 12 and 255 characters</div> <div>To clear the username/password pair use <em>clear</em> as the password</div> <div>SETTING A PASSWORD IS NON-IDEMPOTENT</div> </td> </tr> <tr> <td colspan="1">  <b>host_user</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Sets the host user name for CHAP authentication</div> <div>Required with <em>host_password</em>
</div> <div>To clear the username/password pair use <em>clear</em> as the password</div> </td> </tr> <tr> <td colspan="1">  <b>iqn</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>List of IQNs of the host.</div> </td> </tr> <tr> <td colspan="1">  <b>lun</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>LUN ID to assign to volume for host. Must be unique.</div> <div>If not provided the ID will be automatically assigned.</div> <div>Range for LUN ID is 1 to 4095.</div> </td> </tr> <tr> <td colspan="1">  <b>name</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The name of the host.</div> <div>Note that hostnames are case-sensitive however FlashArray hostnames are unique and ignore case - you cannot have <em>hosta</em> and <em>hostA</em>
</div> <div>Multi-host support available from Purity//FA 6.0.0 <b>***NOTE***</b> Manual deletion of individual hosts created using multi-host will cause idempotency to fail</div> <div>Multi-host support only exists for host creation</div> <div>
<br>aliases: host</div> </td> </tr> <tr> <td colspan="1">  <b>nqn</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>List of NQNs of the host.</div> </td> </tr> <tr> <td colspan="1">  <b>personality</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>hpux</li> <li>vms</li> <li>aix</li> <li>esxi</li> <li>solaris</li> <li>hitachi-vsp</li> <li>oracle-vm-server</li> <li>delete</li> <li><div>
 ←</div></li> </ul> </td> <td> <div>Define which operating system the host is. Recommended for ActiveCluster integration.</div> </td> </tr> <tr> <td colspan="1">  <b>preferred_array</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>List of preferred arrays in an ActiveCluster environment.</div> <div>To remove existing preferred arrays from the host, specify <em>delete</em>.</div> </td> </tr> <tr> <td colspan="1">  <b>protocol</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>fc</li> <li>iscsi</li> <li>nvme</li> <li>mixed</li> </ul> </td> <td> <div>Defines the host connection protocol for volumes.</div> <div>DEPRECATED No longer a necessary parameter</div> </td> </tr> <tr> <td colspan="1">  <b>rename</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The name to rename to.</div> <div>Note that hostnames are case-sensitive however FlashArray hostnames are unique and ignore case - you cannot have <em>hosta</em> and <em>hostA</em>
</div> </td> </tr> <tr> <td colspan="1">  <b>start</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>0</div> </td> <td> <div>Number at which to start the multiple host creation index</div> <div>Only supported from Purity//FA v6.0.0 and higher</div> </td> </tr> <tr> <td colspan="1">  <b>state</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>absent</li> <li><div>
<b>present</b> ←</div></li> </ul> </td> <td> <div>Define whether the host should exist or not.</div> <div>When removing host all connected volumes will be disconnected.</div> </td> </tr> <tr> <td colspan="1">  <b>suffix</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Suffix string, if required, for multiple host create</div> <div>Host names will be formed as <em>&lt;name&gt;#I&lt;suffix&gt;</em>, where <em>#</em> is a placeholder for the host index See associated descriptions</div> <div>Only supported from Purity//FA v6.0.0 and higher</div> </td> </tr> <tr> <td colspan="1">  <b>target_password</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Sets the target password for CHAP authentication</div> <div>Password length between 12 and 255 characters</div> <div>To clear the username/password pair use <em>clear</em> as the password</div> <div>SETTING A PASSWORD IS NON-IDEMPOTENT</div> </td> </tr> <tr> <td colspan="1">  <b>target_user</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Sets the target user name for CHAP authentication</div> <div>Required with <em>target_password</em>
</div> <div>To clear the username/password pair use <em>clear</em> as the password</div> </td> </tr> <tr> <td colspan="1">  <b>volume</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Volume name to map to the host.</div> </td> </tr> <tr> <td colspan="1">  <b>wwns</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>List of wwns of the host.</div> </td> </tr> </table> <br>  <h2 id="notes">Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>If specifying <code>lun</code> option ensure host support requested value</li> <li>This module requires the <code>purestorage</code> and <code>py-pure-client</code> Python libraries</li> <li>Additional Python librarues may be required for specific modules.</li> <li>You must set <code>PUREFA_URL</code> and <code>PUREFA_API</code> environment variables if <em>fa_url</em> and <em>api_token</em> arguments are not passed to the module directly</li> </ul> </div>   <h2 id="examples">Examples</h2> <pre data-language="yaml+jinja">- name: Create new AIX host
  purefa_host:
    name: foo
    personality: aix
    fa_url: 10.10.10.2
    api_token: e31060a7-21fc-e277-6240-25983c6c4592

- name: Create 10 hosts with index starting at 10 but padded with 3 digits
  purefa_host:
    name: foo
    personality: vms
    suffix: bar
    count: 10
    start: 10
    digits: 3
    fa_url: 10.10.10.2
    api_token: e31060a7-21fc-e277-6240-25983c6c4592
    state: present

- name: Rename host foo to bar
  purefa_host:
    name: foo
    rename: bar
    fa_url: 10.10.10.2
    api_token: e31060a7-21fc-e277-6240-25983c6c4592

- name: Delete host
  purefa_host:
    name: foo
    fa_url: 10.10.10.2
    api_token: e31060a7-21fc-e277-6240-25983c6c4592
    state: absent

- name: Make host bar with wwn ports
  purefa_host:
    name: bar
    wwns:
    - 00:00:00:00:00:00:00
    - 11:11:11:11:11:11:11
    fa_url: 10.10.10.2
    api_token: e31060a7-21fc-e277-6240-25983c6c4592

- name: Make host bar with iSCSI ports
  purefa_host:
    name: bar
    iqn:
    - iqn.1994-05.com.redhat:7d366003913
    fa_url: 10.10.10.2
    api_token: e31060a7-21fc-e277-6240-25983c6c4592

- name: Make host bar with NVMe ports
  purefa_host:
    name: bar
    nqn:
    - nqn.2014-08.com.vendor:nvme:nvm-subsystem-sn-d78432
    fa_url: 10.10.10.2
    api_token: e31060a7-21fc-e277-6240-25983c6c4592

- name: Make mixed protocol host
  purefa_host:
    name: bar
    nqn:
    - nqn.2014-08.com.vendor:nvme:nvm-subsystem-sn-d78432
    iqn:
    - iqn.1994-05.com.redhat:7d366003914
    wwns:
    - 00:00:00:00:00:00:01
    - 11:11:11:11:11:11:12
    fa_url: 10.10.10.2
    api_token: e31060a7-21fc-e277-6240-25983c6c4592

- name: Map host foo to volume bar as LUN ID 12
  purefa_host:
    name: foo
    volume: bar
    lun: 12
    fa_url: 10.10.10.2
    api_token: e31060a7-21fc-e277-6240-25983c6c4592

- name: Disconnect volume bar from host foo
  purefa_host:
    name: foo
    volume: bar
    state: absent
    fa_url: 10.10.10.2
    api_token: e31060a7-21fc-e277-6240-25983c6c4592

- name: Add preferred arrays to host foo
  purefa_host:
    name: foo
    preferred_array:
    - array1
    - array2
    fa_url: 10.10.10.2
    api_token: e31060a7-21fc-e277-6240-25983c6c4592

- name: Delete preferred arrays from host foo
  purefa_host:
    name: foo
    preferred_array: delete
    fa_url: 10.10.10.2
    api_token: e31060a7-21fc-e277-6240-25983c6c4592

- name: Delete exisitng WWNs from host foo (does not delete host object)
  purefa_host:
    name: foo
    wwns: ""
    fa_url: 10.10.10.2
    api_token: e31060a7-21fc-e277-6240-25983c6c4592

- name: Set CHAP target and host username/password pairs
  purefa_host:
    name: foo
    target_user: user1
    target_password: passwrodpassword
    host_user: user2
    host_password: passwrodpassword
    fa_url: 10.10.10.2
    api_token: e31060a7-21fc-e277-6240-25983c6c4592

- name: Delete CHAP target and host username/password pairs
  purefa_host:
    name: foo
    target_user: user
    target_password: clear
    host_user: user
    host_password: clear
    fa_url: 10.10.10.2
    api_token: e31060a7-21fc-e277-6240-25983c6c4592
</pre>  <h3 id="authors">Authors</h3> <ul class="simple"> <li>Pure Storage Ansible Team (@sdodsley) &lt;<a class="reference external" href="https://docs.ansible.com/cdn-cgi/l/email-protection#32424740571f535c415b505e571f4657535f141101050914110700091411060a094247405741465d405355571411060409515d5f">pure-ansible-team<span>@</span>purestorage<span>.</span>com</a>&gt;</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2021 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/purestorage/flasharray/purefa_host_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/purestorage/flasharray/purefa_host_module.html</a>
  </p>
</div>
