<section id="purestorage-flashblade-purefb-policy-module-manage-flashblade-policies"> <h1>purestorage.flashblade.purefb_policy module – Manage FlashBlade policies</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module is part of the <a class="reference external" href="https://galaxy.ansible.com/ui/repo/published/purestorage/flashblade/">purestorage.flashblade collection</a> (version 1.18.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install purestorage.flashblade</code>. You need further requirements to be able to use this module, see <a class="reference internal" href="#ansible-collections-purestorage-flashblade-purefb-policy-module-requirements"><span class="std std-ref">Requirements</span></a> for details.</p> <p>To use it in a playbook, specify: <code>purestorage.flashblade.purefb_policy</code>.</p> </div> <p class="ansible-version-added">New in purestorage.flashblade 1.0.0</p>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id4">Notes</a></li> <li><a class="reference internal" href="#examples" id="id5">Examples</a></li> </ul>  <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>Manage policies for filesystem, file replica links and object store access.</li> <li>To update an existing snapshot policy rule, you must first delete the original rule and then add the new rule to replace it. Purity’s best-fit will try to ensure that any required snapshots deleted on the deletion of the first rule will be recovered as long replacement rule is added before the snapshot eradication period is exceeded (usuually 24 hours).</li> </ul> </section> <section id="requirements"> <h2 id="ansible-collections-purestorage-flashblade-purefb-policy-module-requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>python &gt;= 2.7</li> <li>purity_fb &gt;= 1.9</li> <li>netaddr</li> <li>pytz</li> <li>urllib3</li> </ul> </section> <section id="parameters"> <h2>Parameters</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-access"><strong>access</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in purestorage.flashblade 1.9.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Specifies access control for the export policy rule</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"root-squash"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"all-squash"</code></li> <li><code>"no-squash"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-account"><strong>account</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in purestorage.flashblade 1.9.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Name of Object Store account policy applies to.</p> <p><strong>Special Case</strong> <em>pure policy</em> is used for the system-wide S3 policies</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-actions"><strong>actions</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> <p><em class="ansible-option-versionadded">added in purestorage.flashblade 1.9.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>List of permissions to grant.</p> <p>System-wide policy rules cannot be deleted or modified</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"s3:*"</code></li> <li><code>"s3:AbortMultipartUpload"</code></li> <li><code>"s3:BypassGovernanceRetention"</code></li> <li><code>"s3:CreateBucket"</code></li> <li><code>"s3:DeleteBucket"</code></li> <li><code>"s3:DeleteObject"</code></li> <li><code>"s3:DeleteObjectVersion"</code></li> <li><code>"s3:ExtendSafemodeRetentionPeriod"</code></li> <li><code>"s3:GetBucketAcl"</code></li> <li><code>"s3:GetBucketLocation"</code></li> <li><code>"s3:GetBucketVersioning"</code></li> <li><code>"s3:GetLifecycleConfiguration"</code></li> <li><code>"s3:GetObject"</code></li> <li><code>"s3:GetObjectAcl"</code></li> <li><code>"s3:GetObjectLegalHold"</code></li> <li><code>"s3:GetObjectLockConfiguration"</code></li> <li><code>"s3:GetObjectRetention"</code></li> <li><code>"s3:GetObjectTagging"</code></li> <li><code>"s3:GetObjectVersion"</code></li> <li><code>"s3:GetObjectVersionTagging"</code></li> <li><code>"s3:ListAllMyBuckets"</code></li> <li><code>"s3:ListBucket"</code></li> <li><code>"s3:ListBucketMultipartUploads"</code></li> <li><code>"s3:ListBucketVersions"</code></li> <li><code>"s3:ListMultipartUploadParts"</code></li> <li><code>"s3:PutBucketVersioning"</code></li> <li><code>"s3:PutLifecycleConfiguration"</code></li> <li><code>"s3:PutObject"</code></li> <li><code>"s3:PutObjectLegalHold"</code></li> <li><code>"s3:PutObjectLockConfiguration"</code></li> <li><code>"s3:PutObjectRetention"</code></li> <li><code>"s3:ResolveSafemodeConflicts"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-anongid"><strong>anongid</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in purestorage.flashblade 1.9.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Any user whose GID is affected by an <em>access</em> of `root_squash` or `all_squash` will have their GID mapped to anongid. The default anongid is null, which means 65534. Use “” to clear.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-anonuid"><strong>anonuid</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in purestorage.flashblade 1.9.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Any user whose UID is affected by an <em>access</em> of `root_squash` or `all_squash` will have their UID mapped to anonuid. The default is null, which means 65534. Use “” to clear.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-api-token"><strong>api_token</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>FlashBlade API token for admin privileged user.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-at"><strong>at</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Provide a time in 12-hour AM/PM format, eg. 11AM</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-atime"><strong>atime</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in purestorage.flashblade 1.9.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>After a read operation has occurred, the inode access time is updated only if any of the following conditions is true; the previous access time is less than the inode modify time, the previous access time is less than the inode change time, or the previous access time is more than 24 hours ago.</p> <p>If set to false, disables the update of inode access times after read operations.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-before-rule"><strong>before_rule</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> <p><em class="ansible-option-versionadded">added in purestorage.flashblade 1.9.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>The index of the client rule to insert or move a client rule before.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-change"><strong>change</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in purestorage.flashblade 1.12.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>The state of the SMB share principals Change access permission.</p> <p>Setting to “” will clear the current setting</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"allow"</code></li> <li><code>"deny"</code></li> <li><code>""</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-client"><strong>client</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in purestorage.flashblade 1.9.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Specifies the clients that will be permitted to access the export.</p> <p>Accepted notation is a single IP address, subnet in CIDR notation, netgroup, or anonymous (*).</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-desc"><strong>desc</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in purestorage.flashblade 1.14.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>A description of an object store policy, optionally specified when the policy is created.</p> <p>Cannot be modified for an existing policy.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>""</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-destroy-snapshots"><strong>destroy_snapshots</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in purestorage.flashblade 1.11.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>This parameter must be set to true in order to modify a policy such that local or remote snapshots would be destroyed.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-disable-warnings"><strong>disable_warnings</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in purestorage.flashblade 1.18.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Disable insecure certificate warnings</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-effect"><strong>effect</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in purestorage.flashblade 1.9.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Allow S3 requests that match all of the <em>actions</em> item selected. Rules are additive.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"allow"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"deny"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-enabled"><strong>enabled</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>State of policy</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-every"><strong>every</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Interval between snapshots in seconds</p> <p>Range available 300 - 31536000 (equates to 5m to 365d)</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-fb-url"><strong>fb_url</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>FlashBlade management IP address or Hostname.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-fileid-32bit"><strong>fileid_32bit</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in purestorage.flashblade 1.9.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Whether the file id is 32 bits or not.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-filesystem"><strong>filesystem</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>List of filesystems to add to a policy on creation</p> <p>To amend policy members use the <em>purestorage.flashblade.purefb_fs</em> module</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-force-delete"><strong>force_delete</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in purestorage.flashblade 1.9.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Force the deletion of a Object Store Access Policy is this has attached users.</p> <p>WARNING This can have undesired side-effects.</p> <p>System-wide policies cannot be deleted</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-full-control"><strong>full_control</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in purestorage.flashblade 1.12.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>The state of the SMB share principals Full Control access permission.</p> <p>Setting to “” will clear the current setting</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"allow"</code></li> <li><code>"deny"</code></li> <li><code>""</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-ignore-enforcement"><strong>ignore_enforcement</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in purestorage.flashblade 1.9.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Certain combinations of actions and other rule elements are inherently ignored if specified together in a rule.</p> <p>If set to true, operations which attempt to set these combinations will fail.</p> <p>If set to false, such operations will instead be allowed.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-interfaces"><strong>interfaces</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> <p><em class="ansible-option-versionadded">added in purestorage.flashblade 1.17.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Specifies which product interfaces the network access policy rule applies to, whether it is permitting or denying access.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"management-ssh"</code></li> <li><code>"management-rest-api"</code></li> <li><code>"management-web-ui"</code></li> <li><code>"snmp"</code></li> <li><code>"local-network-superuser-password-access"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-keep-for"><strong>keep_for</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>How long to keep snapshots for</p> <p>Range available 300 - 31536000 (equates to 5m to 365d)</p> <p>Must not be set less than <em>every</em></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-name"><strong>name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Name of the policy</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-object-resources"><strong>object_resources</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> <p><em class="ansible-option-versionadded">added in purestorage.flashblade 1.9.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>List of bucket names and object paths, with a wildcard (*) to specify objects in a bucket; e.g., bucket1, bucket1/*, bucket2, bucket2/*.</p> <p>System-wide policy rules cannot be deleted or modified</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-permission"><strong>permission</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in purestorage.flashblade 1.9.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Specifies which read-write client access permissions are allowed for the export.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"rw"</code></li> <li>
<code><strong>"ro"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-policy-type"><strong>policy_type</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in purestorage.flashblade 1.9.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Type of policy</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"snapshot"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"access"</code></li> <li><code>"nfs"</code></li> <li><code>"smb_share"</code></li> <li><code>"smb_client"</code></li> <li><code>"network"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-principal"><strong>principal</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in purestorage.flashblade 1.12.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>The user or group who is the subject of this rule, and their domain</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-read"><strong>read</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in purestorage.flashblade 1.12.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>The state of the SMB share principals Read access permission.</p> <p>Setting to “” will clear the current setting</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"allow"</code></li> <li><code>"deny"</code></li> <li><code>""</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-rename"><strong>rename</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in purestorage.flashblade 1.10.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>New name for policy</p> <p>Only applies to NFS and SMB policies</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-replica-link"><strong>replica_link</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>List of filesystem replica links to add to a policy on creation</p> <p>To amend policy members use the <em>purestorage.flashblade.purefb_fs_replica</em> module</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-rule"><strong>rule</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in purestorage.flashblade 1.9.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Name of the rule for the Object Store Access Policy</p> <p>Rules in system wide policies cannot be deleted or modified</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-s3-delimiters"><strong>s3_delimiters</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> <p><em class="ansible-option-versionadded">added in purestorage.flashblade 1.9.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>List of delimiter characters allowed in object list requests.</p> <p>Grants permissions to list ‘folder names’ (prefixes ending in a delimiter) instead of object keys.</p> <p>System-wide policy rules cannot be deleted or modified</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-s3-prefixes"><strong>s3_prefixes</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> <p><em class="ansible-option-versionadded">added in purestorage.flashblade 1.9.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>List of ‘folders’ (object key prefixes) for which object listings may be requested.</p> <p>System-wide policy rules cannot be deleted or modified</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-secure"><strong>secure</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in purestorage.flashblade 1.9.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>If true, this prevents NFS access to client connections coming from non-reserved ports.</p> <p>If false, allows NFS access to client connections coming from non-reserved ports.</p> <p>Applies to NFSv3, NFSv4.1, and auxiliary protocols MOUNT and NLM.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-security"><strong>security</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> <p><em class="ansible-option-versionadded">added in purestorage.flashblade 1.9.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>The security flavors to use for accessing files on this mount point.</p> <p>If the server does not support the requested flavor, the mount operation fails.</p> <p><em>sys</em> trusts the client to specify users identity.</p> <p><em>krb</em> provides cryptographic proof of a users identity in each RPC request.</p> <p><em>krb5i</em> adds integrity checking to krb5, to ensure the data has not been tampered with.</p> <p><em>krb5p</em> adds integrity checking and encryption to krb5.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"sys"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"krb5"</code></li> <li><code>"krb5i"</code></li> <li><code>"krb5p"</code></li> </ul> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>["sys"]</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-smb-encryption"><strong>smb_encryption</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in purestorage.flashblade 1.12.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>The status of SMB encryption in a client policy rule</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"disabled"</code></li> <li>
<code><strong>"optional"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"required"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-source-ips"><strong>source_ips</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> <p><em class="ansible-option-versionadded">added in purestorage.flashblade 1.9.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>List of IPs and subnets from which this rule should allow requests; e.g., 10.20.30.40, 10.20.30.0/24, 2001:DB8:1234:5678::/64.</p> <p>System-wide policy rules cannot be deleted or modified</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-state"><strong>state</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Create or delete policy.</p> <p>Copy is applicable only to Object Store Access Policies Rules</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"absent"</code></li> <li>
<code><strong>"present"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"copy"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-target"><strong>target</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in purestorage.flashblade 1.9.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Name of policy to copy rule to</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-target-rule"><strong>target_rule</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in purestorage.flashblade 1.9.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Name of the rule to copy the exisitng rule to.</p> <p>If not defined the existing rule name is used.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-timezone"><strong>timezone</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Time Zone used for the <em>at</em> parameter</p> <p>If not provided, the module will attempt to get the current local timezone from the server</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-purestorage-flashblade-purefb-policy-module-parameter-user"><strong>user</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in purestorage.flashblade 1.9.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>User in the <em>account</em> that the policy is granted to.</p> </div></td> </tr>  </table> </section> <section id="notes"> <h2>Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>This module requires the <code>purity_fb</code> Python library</li> <li>You must set <code>PUREFB_URL</code> and <code>PUREFB_API</code> environment variables if <em>fb_url</em> and <em>api_token</em> arguments are not passed to the module directly</li> </ul> </div> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja">- name: Create a simple snapshot policy with no rules
  purestorage.flashblade.purefb_policy:
    name: test_policy
    policy_type: snapshot
    fb_url: 10.10.10.2
    api_token: T-9f276a18-50ab-446e-8a0c-666a3529a1b6
- name: Create a snapshot policy and connect to existing filesystems and filesystem replica links
  purestorage.flashblade.purefb_policy:
    name: test_policy_with_members
    policy_type: snapshot
    filesystem:
    - fs1
    - fs2
    replica_link:
    - rl1
    - rl2
    fb_url: 10.10.10.2
    api_token: T-9f276a18-50ab-446e-8a0c-666a3529a1b6
- name: Create a snapshot policy with rules
  purestorage.flashblade.purefb_policy:
    name: test_policy2
    policy_type: snapshot
    at: 11AM
    keep_for: 86400
    every: 86400
    timezone: Asia/Shanghai
    fb_url: 10.10.10.2
    api_token: T-9f276a18-50ab-446e-8a0c-666a3529a1b6
- name: Delete a snapshot policy
  purestorage.flashblade.purefb_policy:
    name: test_policy
    policy_type: snapshot
    state: absent
    fb_url: 10.10.10.2
    api_token: T-9f276a18-50ab-446e-8a0c-666a3529a1b6
- name: Create an empty object store access policy
  purestorage.flashblade.purefb_policy:
    name: test_os_policy
    account: test
    policy_type: access
    fb_url: 10.10.10.2
    api_token: T-9f276a18-50ab-446e-8a0c-666a3529a1b6
- name: Create an empty object store access policy and assign user
  purestorage.flashblade.purefb_policy:
    name: test_os_policy
    account: test
    policy_type: access
    user: fred
    fb_url: 10.10.10.2
    api_token: T-9f276a18-50ab-446e-8a0c-666a3529a1b6
- name: Create a object store access policy with simple rule
  purestorage.flashblade.purefb_policy:
    name: test_os_policy_rule
    policy_type: access
    account: test
    rule: rule1
    actions: "s3:*"
    object_resources: "*"
    fb_url: 10.10.10.2
    api_token: T-9f276a18-50ab-446e-8a0c-666a3529a1b6
- name: Create an empty SMB client policy
  purestorage.flashblade.purefb_policy:
    name: test_smb_client
    policy_type: smb_client
    fb_url: 10.10.10.2
    api_token: T-9f276a18-50ab-446e-8a0c-666a3529a1b6
- name: Create an SMB client policy with a client rule
  purestorage.flashblade.purefb_policy:
    name: test_smb_client
    policy_type: smb_client
    client: "10.0.1.0/24"
    permission: rw
    fb_url: 10.10.10.2
    api_token: T-9f276a18-50ab-446e-8a0c-666a3529a1b6
- name: Create an empty NFS export policy
  purestorage.flashblade.purefb_policy:
    name: test_nfs_export
    policy_type: nfs
    fb_url: 10.10.10.2
    api_token: T-9f276a18-50ab-446e-8a0c-666a3529a1b6
- name: Create an NFS export policy with a client rule
  purestorage.flashblade.purefb_policy:
    name: test_nfs_export
    policy_type: nfs
    atime: true
    client: "10.0.1.0/24"
    secure: true
    security: [sys, krb5]
    permission: rw
    fb_url: 10.10.10.2
    api_token: T-9f276a18-50ab-446e-8a0c-666a3529a1b6
- name: Create a new rule for an existing NFS export policy
  purestorage.flashblade.purefb_policy:
    name: test_nfs_export
    policy_type: nfs
    atime: true
    client: "10.0.2.0/24"
    security: sys
    permission: ro
    fb_url: 10.10.10.2
    api_token: T-9f276a18-50ab-446e-8a0c-666a3529a1b6
- name: Delete a client rule from an NFS export policy
  purestorage.flashblade.purefb_policy:
    name: test_nfs_export
    client: "10.0.1.0/24"
    policy_type: nfs
    state: absent
    fb_url: 10.10.10.2
    api_token: T-9f276a18-50ab-446e-8a0c-666a3529a1b6
- name: Delete an NFS export policy and all associated rules
  purestorage.flashblade.purefb_policy:
    name: test_nfs_export
    state: absent
    policy_type: nfs
    fb_url: 10.10.10.2
    api_token: T-9f276a18-50ab-446e-8a0c-666a3529a1b6
- name: Delete a rule from an object store access policy
  purestorage.flashblade.purefb_policy:
    name: test_os_policy_rule
    account: test
    policy_type: access
    rule: rule1
    state: absent
    fb_url: 10.10.10.2
    api_token: T-9f276a18-50ab-446e-8a0c-666a3529a1b6
- name: Delete a user from an object store access policy
  purestorage.flashblade.purefb_policy:
    name: test_os_policy_rule
    account: test
    user: fred
    policy_type: access
    state: absent
    fb_url: 10.10.10.2
    api_token: T-9f276a18-50ab-446e-8a0c-666a3529a1b6
- name: Delete an object store access policy with attached users (USE WITH CAUTION)
  purestorage.flashblade.purefb_policy:
    name: test_os_policy_rule
    account: test
    policy_type: access
    force_delete: true
    state: absent
    fb_url: 10.10.10.2
    api_token: T-9f276a18-50ab-446e-8a0c-666a3529a1b6
- name: Delete an object store access policy with no attached users
  purestorage.flashblade.purefb_policy:
    name: test_os_policy_rule
    account: test
    policy_type: access
    state: absent
    fb_url: 10.10.10.2
    api_token: T-9f276a18-50ab-446e-8a0c-666a3529a1b6
- name: Copy an object store access policy rule to another exisitng policy
  purestorage.flashblade.purefb_policy:
    name: test_os_policy_rule
    policy_type: access
    account: test
    target: "account2/anotherpolicy"
    target_rule: new_rule1
    state: copy
    fb_url: 10.10.10.2
    api_token: T-9f276a18-50ab-446e-8a0c-666a3529a1b6
- name:  Rename an NFS Export Policy
  purestorage.flashblade.purefb_policy:
    name: old_name
    policy_type: nfs
    rename: new_name
    fb_url: 10.10.10.2
    api_token: T-9f276a18-50ab-446e-8a0c-666a3529a1b6
</pre> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Pure Storage Ansible Team (@sdodsley)</li> </ul> </section> <section id="collection-links"> <h3>Collection links</h3> <ul class="ansible-links"> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/Pure-Storage-Ansible/FlashBlade-Collection/issues" rel="noopener external" target="_blank">Issue Tracker</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/Pure-Storage-Ansible/FlashBlade-Collection" rel="noopener external" target="_blank">Repository (Sources)</a></span></li> </ul> </section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2024 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/purestorage/flashblade/purefb_policy_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/purestorage/flashblade/purefb_policy_module.html</a>
  </p>
</div>
