<section id="kubernetes-core-k8s-inventory-kubernetes-k8s-inventory-source"> <h1>kubernetes.core.k8s inventory – Kubernetes (K8s) inventory source</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This inventory plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/ui/repo/published/kubernetes/core/">kubernetes.core collection</a> (version 3.2.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install kubernetes.core</code>. You need further requirements to be able to use this inventory plugin, see <a class="reference internal" href="#ansible-collections-kubernetes-core-k8s-inventory-requirements"><span class="std std-ref">Requirements</span></a> for details.</p> <p>To use it in a playbook, specify: <code>kubernetes.core.k8s</code>.</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#deprecated" id="id1">DEPRECATED</a></li> <li><a class="reference internal" href="#synopsis" id="id2">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id3">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id4">Parameters</a></li> <li><a class="reference internal" href="#examples" id="id5">Examples</a></li> <li><a class="reference internal" href="#status" id="id6">Status</a></li> </ul>  <section id="deprecated"> <h2>DEPRECATED</h2> <dl class="field-list simple"> <dt class="field-odd">Removed in<span class="colon">:</span>
</dt> <dd class="field-odd">
<p>version 6.0.0</p> </dd> <dt class="field-even">Why<span class="colon">:</span>
</dt> <dd class="field-even">
<p>As discussed in <a class="reference external" href="https://github.com/ansible-collections/kubernetes.core/issues/31">https://github.com/ansible-collections/kubernetes.core/issues/31</a>, we decided to remove the k8s inventory plugin in release 6.0.0.</p> </dd> <dt class="field-odd">Alternative<span class="colon">:</span>
</dt> <dd class="field-odd">
<p>Use <a class="reference internal" href="k8s_info_module.html#ansible-collections-kubernetes-core-k8s-info-module"><span class="std std-ref">kubernetes.core.k8s_info</span></a> and <a class="reference internal" href="../../ansible/builtin/add_host_module.html#ansible-collections-ansible-builtin-add-host-module"><span class="std std-ref">ansible.builtin.add_host</span></a> instead.</p> </dd> </dl> </section> <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>Fetch containers and services for one or more clusters.</li> <li>Groups by cluster name, namespace, namespace_services, namespace_pods, and labels.</li> <li>Uses the kubectl connection plugin to access the Kubernetes cluster.</li> <li>Uses k8s.(yml|yaml) YAML configuration file to set parameter values.</li> </ul> </section> <section id="requirements"> <h2 id="ansible-collections-kubernetes-core-k8s-inventory-requirements">Requirements</h2> <p>The below requirements are needed on the local controller node that executes this inventory.</p> <ul class="simple"> <li>python &gt;= 3.9</li> <li>kubernetes &gt;= 24.2.0</li> <li>PyYAML &gt;= 3.11</li> </ul> </section> <section id="parameters"> <h2>Parameters</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-kubernetes-core-k8s-inventory-parameter-connections"><strong>connections</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Optional list of cluster connection settings. If no connections are provided, the default <em>~/.kube/config</em> and active context will be used, and objects will be returned for all namespaces the active user is authorized to access.</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-kubernetes-core-k8s-inventory-parameter-connections-api-key"><strong>api_key</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Token used to authenticate with the API. Can also be specified via K8S_AUTH_API_KEY environment variable.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-kubernetes-core-k8s-inventory-parameter-connections-ssl-ca-cert"><strong id="ansible-collections-kubernetes-core-k8s-inventory-parameter-connections-ca-cert">ca_cert</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: ssl_ca_cert</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Path to a CA certificate used to authenticate with the API. Can also be specified via K8S_AUTH_SSL_CA_CERT environment variable.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-kubernetes-core-k8s-inventory-parameter-connections-client-cert"><strong id="ansible-collections-kubernetes-core-k8s-inventory-parameter-connections-cert-file">client_cert</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: cert_file</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Path to a certificate used to authenticate with the API. Can also be specified via K8S_AUTH_CERT_FILE environment variable.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-kubernetes-core-k8s-inventory-parameter-connections-key-file"><strong id="ansible-collections-kubernetes-core-k8s-inventory-parameter-connections-client-key">client_key</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: key_file</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Path to a key file used to authenticate with the API. Can also be specified via K8S_AUTH_KEY_FILE environment variable.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-kubernetes-core-k8s-inventory-parameter-connections-context"><strong>context</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The name of a context found in the config file. Can also be specified via K8S_AUTH_CONTEXT environment variable.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-kubernetes-core-k8s-inventory-parameter-connections-host"><strong>host</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Provide a URL for accessing the API. Can also be specified via K8S_AUTH_HOST environment variable.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-kubernetes-core-k8s-inventory-parameter-connections-kubeconfig"><strong>kubeconfig</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Path to an existing Kubernetes config file. If not provided, and no other connection options are provided, the Kubernetes client will attempt to load the default configuration file from <em>~/.kube/config</em>. Can also be specified via K8S_AUTH_KUBECONFIG environment variable.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-kubernetes-core-k8s-inventory-parameter-connections-name"><strong>name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Optional name to assign to the cluster. If not provided, a name is constructed from the server and port.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-kubernetes-core-k8s-inventory-parameter-connections-namespaces"><strong>namespaces</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>List of namespaces. If not specified, will fetch all containers for all namespaces user is authorized to access.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-kubernetes-core-k8s-inventory-parameter-connections-password"><strong>password</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Provide a password for authenticating with the API. Can also be specified via K8S_AUTH_PASSWORD environment variable.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-kubernetes-core-k8s-inventory-parameter-connections-username"><strong>username</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Provide a username for authenticating with the API. Can also be specified via K8S_AUTH_USERNAME environment variable.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-kubernetes-core-k8s-inventory-parameter-connections-verify-ssl"><strong id="ansible-collections-kubernetes-core-k8s-inventory-parameter-connections-validate-certs">validate_certs</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: verify_ssl</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Whether or not to verify the API server’s SSL certificates. Can also be specified via K8S_AUTH_VERIFY_SSL environment variable.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-kubernetes-core-k8s-inventory-parameter-plugin"><strong>plugin</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>token that ensures this is a source file for the ‘k8s’ plugin.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"kubernetes.core.k8s"</code></li> <li><code>"k8s"</code></li> <li><code>"community.kubernetes.k8s"</code></li> </ul> </div></td> </tr>  </table> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja"># File must be named k8s.yaml or k8s.yml

- name: Authenticate with token, and return all pods and services for all namespaces
  plugin: kubernetes.core.k8s
  connections:
    - host: https://192.168.64.4:8443
      api_key: xxxxxxxxxxxxxxxx
      validate_certs: false

- name: Use default config (~/.kube/config) file and active context, and return objects for a specific namespace
  plugin: kubernetes.core.k8s
  connections:
    - namespaces:
        - testing

- name: Use a custom config file, and a specific context.
  plugin: kubernetes.core.k8s
  connections:
    - kubeconfig: /path/to/config
      context: 'awx/192-168-64-4:8443/developer'
</pre> </section> <section id="status"> <h2>Status</h2> <ul class="simple"> <li>This inventory will be removed in version 6.0.0. <em>[deprecated]</em>
</li> <li>For more information see <a class="reference internal" href="#deprecated">DEPRECATED</a>.</li> </ul> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Chris Houseknecht (@chouseknecht)</li> <li>Fabian von Feilitzsch (@fabianvf)</li> </ul> <div class="admonition hint"> <p class="admonition-title">Hint</p> <p>Configuration entries for each entry type have a low to high priority order. For example, a variable that is lower in the list will override a variable that is higher up.</p> </div> </section> <section id="collection-links"> <h3>Collection links</h3> <ul class="ansible-links"> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/kubernetes.core/issues" rel="noopener external" target="_blank">Issue Tracker</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/kubernetes.core" rel="noopener external" target="_blank">Repository (Sources)</a></span></li> </ul> </section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2024 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/kubernetes/core/k8s_inventory.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/kubernetes/core/k8s_inventory.html</a>
  </p>
</div>
