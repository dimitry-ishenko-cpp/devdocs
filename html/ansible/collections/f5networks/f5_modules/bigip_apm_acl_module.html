<h1 id="f5networks-f5-modules-bigip-apm-acl-manage-user-defined-apm-acls">f5networks.f5_modules.bigip_apm_acl – Manage user-defined APM ACLs</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/f5networks/f5_modules">f5networks.f5_modules collection</a> (version 1.12.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install f5networks.f5_modules</code>.</p> <p>To use it in a playbook, specify: <code>f5networks.f5_modules.bigip_apm_acl</code>.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 1.0.0: </span>of f5networks.f5_modules</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#parameters" id="id2">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id3">Notes</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id5">Return Values</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Manage user-defined APM ACLs.</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="2">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="2">  <b>acl_order</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>Specifies a number that indicates the order of this ACL relative to other ACLs.</div> <div>When not set, the device will always place the ACL after the last one created.</div> <div>The lower the number, the higher the ACL will be in the general order, with the lowest number <code>0</code> being the topmost one.</div> <div>Valid range of values is between <code>0</code> and <code>65535</code> inclusive.</div> </td> </tr> <tr> <td colspan="2">  <b>description</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>User created ACL description.</div> </td> </tr> <tr> <td colspan="2">  <b>entries</b>  <div> <span>list</span> / <span>elements=dictionary</span> </div> </td> <td> </td> <td> <div>Access control entries that define the ACL matching and its respective behavior.</div> <div>The order in which the rules are placed as arguments to this parameter determines their order in the ACL, in other words changing the order of the same elements will cause a change on the unit.</div> <div>Changes in the number of rules will always trigger device change. This means user input will take precedence over what is on device.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>action</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>allow</li> <li>reject</li> <li>discard</li> <li>continue</li> </ul> </td> <td> <div>Specifies the action that the access control entry takes when a match for this access control entry is encountered.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>dst_addr</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Specifies the destination IP address for the access control entry.</div> <div>When set to <code>any</code> the ACL will match any destination address, <code>dst_mask</code> is ignored in this case.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>dst_mask</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Optional parameter that specifies the destination network mask for the access control entry.</div> <div>If not specified and <code>dst_addr</code> is not <code>any</code>, the <code>dst_addr</code> is deemed to be host address.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>dst_port</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Specifies the destination port for the access control entry.</div> <div>Can be set to <code>*</code> to indicate all ports.</div> <div>Parameter is mutually exclusive with <code>dst_port_range</code>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>dst_port_range</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Specifies the destination port range for the access control entry.</div> <div>Parameter is mutually exclusive with <code>dst_port_range</code>.</div> <div>To indicate all ports the <code>dst_port</code> parameter must be used and set to <code>*</code>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>host_name</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>This parameter applies to Layer 7 access control entries only.</div> <div>Specifies a host to which the access control entry applies.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>log</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>none</li> <li>packet</li> </ul> </td> <td> <div>Specifies the log level that is logged when actions of this type occur.</div> <div>When <code>none</code> it will log nothing, which is a default action.</div> <div>When <code>packet</code> it will log the matched packet.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>paths</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>This parameter applies to Layer 7 access control entries only.</div> <div>Specifies the path or paths to which the access control entry applies.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>protocol</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>tcp</li> <li>icmp</li> <li>udp</li> <li>all</li> </ul> </td> <td> <div>This parameter applies to Layer 4 access control entries only.</div> <div>Specifies the protocol: <code>tcp</code>, <code>udp</code>, <code>icmp</code> or <code>all</code> protocols, to which the access control entry applies.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>scheme</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>http</li> <li>https</li> <li>any</li> </ul> </td> <td> <div>This parameter applies to Layer 7 access control entries only.</div> <div>Specifies the URI scheme: <code>http</code>, <code>https</code> or <code>any</code> on which the access control entry operates.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>src_addr</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Specifies the source IP address for the access control entry.</div> <div>When set to <code>any</code> the ACL will match any source address, <code>src_mask</code> is ignored in this case.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>src_mask</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Optional parameter that specifies the source network mask for the access control entry.</div> <div>If not specified and <code>src_addr</code> is not <code>any</code>, the <code>src_addr</code> is deemed to be host address.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>src_port</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Specifies the source port for the access control entry.</div> <div>Can be set to <code>*</code> to indicate all ports.</div> <div>Parameter is mutually exclusive with <code>src_port_range</code>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>src_port_range</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Specifies the source port range for the access control entry.</div> <div>Parameter is mutually exclusive with <code>src_port_range</code>.</div> <div>To indicate all ports the <code>src_port</code> parameter must be used and set to <code>*</code>.</div> </td> </tr> <tr> <td colspan="2">  <b>name</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>Specifies the name of the ACL to manage.</div> </td> </tr> <tr> <td colspan="2">  <b>partition</b>  <div> <span>string</span> </div> </td> <td> <b>Default:</b><br><div>"Common"</div> </td> <td> <div>Device partition to manage resources on.</div> </td> </tr> <tr> <td colspan="2">  <b>path_match_case</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Specifies whether alphabetic case is considered when matching paths in an access control entry.</div> </td> </tr> <tr> <td colspan="2">  <b>provider</b>  <div> <span>dictionary</span> </div> <div> added in 1.0.0 of f5networks.f5_modules </div> </td> <td> </td> <td> <div>A dict object containing connection details.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>auth_provider</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Configures the auth provider for to obtain authentication tokens from the remote device.</div> <div>This option is really used when working with BIG-IQ devices.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>no_f5_teem</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>If <code>yes</code>, TEEM telemetry data is not sent to F5.</div> <div>You may omit this option by setting the environment variable <code>F5_TELEMETRY_OFF</code>.</div> <div>Previously used variable <code>F5_TEEM</code> is deprecated as its name was confusing.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>password</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The password for the user account used to connect to the BIG-IP.</div> <div>You may omit this option by setting the environment variable <code>F5_PASSWORD</code>.</div> <div>
<br>aliases: pass, pwd</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>server</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The BIG-IP host.</div> <div>You may omit this option by setting the environment variable <code>F5_SERVER</code>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>server_port</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>443</div> </td> <td> <div>The BIG-IP server port.</div> <div>You may omit this option by setting the environment variable <code>F5_SERVER_PORT</code>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>timeout</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>Specifies the timeout in seconds for communicating with the network device for either connecting or sending commands. If the timeout is exceeded before the operation is completed, the module will error.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>transport</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>rest</b> ←</div></li> </ul> </td> <td> <div>Configures the transport connection to use when connecting to the remote device.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>user</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The username to connect to the BIG-IP with. This user must have administrative privileges on the device.</div> <div>You may omit this option by setting the environment variable <code>F5_USER</code>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>validate_certs</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li><div>
<b>yes</b> ←</div></li> </ul> </td> <td> <div>If <code>no</code>, SSL certificates are not validated. Use this only on personally controlled sites using self-signed certificates.</div> <div>You may omit this option by setting the environment variable <code>F5_VALIDATE_CERTS</code>.</div> </td> </tr> <tr> <td colspan="2">  <b>state</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>present</b> ←</div></li> <li>absent</li> </ul> </td> <td> <div>When <code>state</code> is <code>present</code>, ensures that the ACL exists.</div> <div>When <code>state</code> is <code>absent</code>, ensures that the ACL is removed.</div> </td> </tr> <tr> <td colspan="2">  <b>type</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>static</li> <li>dynamic</li> </ul> </td> <td> <div>Specifies the type of ACL to create.</div> <div>Once the type is set it cannot be changed.</div> </td> </tr> </table> <br>  <h2 id="notes">Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>For more information on using Ansible to manage F5 Networks devices see <a class="reference external" href="https://www.ansible.com/integrations/networks/f5">https://www.ansible.com/integrations/networks/f5</a>.</li> <li>Requires BIG-IP software version &gt;= 12.</li> <li>The F5 modules only manipulate the running configuration of the F5 product. To ensure that BIG-IP specific configuration persists to disk, be sure to include at least one task that uses the <a class="reference internal" href="bigip_config_module.html#ansible-collections-f5networks-f5-modules-bigip-config-module"><span class="std std-ref">f5networks.f5_modules.bigip_config</span></a> module to save the running configuration. Refer to the module’s documentation for the correct usage of the module to save your running configuration.</li> </ul> </div>   <h2 id="examples">Examples</h2> <pre data-language="yaml+jinja">- name: Create a static ACL with L4 entries
  bigip_apm_acl:
    name: L4foo
    acl_order: 0
    type: static
    entries:
      - action: allow
        dst_port: '80'
        dst_addr: '192.168.1.1'
        src_port: '443'
        src_addr: '10.10.10.0'
        src_mask: '255.255.255.128'
        protocol: tcp
      - action: reject
        dst_port: '*'
        dst_addr: '192.168.1.1'
        src_port: '*'
        src_addr: '10.10.10.0'
        src_mask: '255.255.255.128'
        protocol: tcp
        log: packet
    provider:
      password: secret
      server: lb.mydomain.com
      user: admin
  delegate_to: localhost

- name: Create a static ACL with L7 entries
  bigip_apm_acl:
    name: L7foo
    acl_order: 1
    type: static
    path_match_case: no
    entries:
      - action: allow
        host_name: 'foobar.com'
        paths: '/shopfront'
        scheme: https
      - action: reject
        host_name: 'internal_foobar.com'
        paths: '/admin'
        scheme: any
        log: packet
    provider:
      password: secret
      server: lb.mydomain.com
      user: admin
  delegate_to: localhost

- name: Create a static ACL with L7/L4 entries
  bigip_apm_acl:
    name: L7L4foo
    acl_order: 2
    type: static
    path_match_case: no
    entries:
      - action: allow
        host_name: 'foobar.com'
        paths: '/shopfront'
        scheme: https
        dst_port: '8181'
        dst_addr: '192.168.1.1'
        protocol: tcp
      - action: reject
        dst_addr: '192.168.1.1'
        host_name: 'internal_foobar.com'
        paths: '/admin'
        scheme: any
        protocol: all
        log: packet
    provider:
      password: secret
      server: lb.mydomain.com
      user: admin
  delegate_to: localhost

- name: Modify a static ACL entries
  bigip_apm_acl:
    name: L4foo
    entries:
      - action: allow
        dst_port: '80'
        dst_addr: '192.168.1.1'
        src_port: '443'
        src_addr: '10.10.10.0'
        src_mask: '255.255.255.128'
        protocol: tcp
      - action: discard
        dst_port: '*'
        dst_addr: 192.168.1.1
        src_port: '*'
        src_addr: '10.10.10.0'
        src_mask: '255.2155.255.128'
        protocol: all
    provider:
      password: secret
      server: lb.mydomain.com
      user: admin
  delegate_to: localhost

- name: Remove static ACL
  bigip_apm_acl:
    name: L4foo
    state: absent
    provider:
      password: secret
      server: lb.mydomain.com
      user: admin
  delegate_to: localhost
</pre>   <h2 id="return-values">Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values.html#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="documentation-table"> <tr> <th colspan="2">Key</th> <th>Returned</th> <th width="100%">Description</th> </tr> <tr> <td colspan="2">  <b>acl_order</b>  <div> <span>integer</span> </div> </td> <td>changed</td> <td> <div>The order of this ACL relative to other ACLs.</div> <br> <div><b>Sample:</b></div> <div>10</div> </td> </tr> <tr> <td colspan="2">  <b>description</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>The new description of the ACL.</div> <br> <div><b>Sample:</b></div> <div>My ACL</div> </td> </tr> <tr> <td colspan="2">  <b>entries</b>  <div> <span>complex</span> </div> </td> <td>changed</td> <td> <div>Access control entries that define the ACL matching and its respective behavior.</div> <br> <div><b>Sample:</b></div> <div>hash/dictionary of values</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>action</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>Action the access control entry takes when a match for this access control entry is encountered.</div> <br> <div><b>Sample:</b></div> <div>allow</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>dst_addr</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>The destination IP address for the access control entry.</div> <br> <div><b>Sample:</b></div> <div>192.168.0.1</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>dst_mask</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>The destination network mask for the access control entry.</div> <br> <div><b>Sample:</b></div> <div>255.255.255.128</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>dst_port</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>The destination port for the access control entry.</div> <br> <div><b>Sample:</b></div> <div>80</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>dst_port_range</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>The destination port range for the access control entry.</div> <br> <div><b>Sample:</b></div> <div>80-81</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>host_name</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>The host to which the access control entry applies.</div> <br> <div><b>Sample:</b></div> <div>foobar.com</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>log</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>The log level that is logged when actions of this type occur.</div> <br> <div><b>Sample:</b></div> <div>packet</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>paths</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>The path or paths to which the access control entry applies.</div> <br> <div><b>Sample:</b></div> <div>/fooshop</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>protocol</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>The protocol to which the access control entry applies.</div> <br> <div><b>Sample:</b></div> <div>tcp</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>scheme</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>The URI scheme on which the access control entry operates.</div> <br> <div><b>Sample:</b></div> <div>https</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>src_addr</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>The source IP address for the access control entry.</div> <br> <div><b>Sample:</b></div> <div>192.168.0.1</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>src_mask</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>The source network mask for the access control entry.</div> <br> <div><b>Sample:</b></div> <div>255.255.255.128</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>src_port</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>The source port for the access control entry.</div> <br> <div><b>Sample:</b></div> <div>80</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>src_port_range</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>The source port range for the access control entry.</div> <br> <div><b>Sample:</b></div> <div>80-81</div> </td> </tr> <tr> <td colspan="2">  <b>path_match_case</b>  <div> <span>boolean</span> </div> </td> <td>changed</td> <td> <div>Specifies whether alphabetic case is considered when matching paths in an access control entry.</div> <br> <div><b>Sample:</b></div> <div>True</div> </td> </tr> <tr> <td colspan="2">  <b>type</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>The type of ACL to create.</div> <br> <div><b>Sample:</b></div> <div>static</div> </td> </tr> </table> <br><br> <h3 id="authors">Authors</h3> <ul class="simple"> <li>Wojciech Wypior (@wojtek0806)</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2021 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/f5networks/f5_modules/bigip_apm_acl_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/f5networks/f5_modules/bigip_apm_acl_module.html</a>
  </p>
</div>
