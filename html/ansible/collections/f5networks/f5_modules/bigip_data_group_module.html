<section id="f5networks-f5-modules-bigip-data-group-module-manage-data-groups-on-a-big-ip"> <h1>f5networks.f5_modules.bigip_data_group module – Manage data groups on a BIG-IP</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module is part of the <a class="reference external" href="https://galaxy.ansible.com/ui/repo/published/f5networks/f5_modules/">f5networks.f5_modules collection</a> (version 1.31.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install f5networks.f5_modules</code>.</p> <p>To use it in a playbook, specify: <code>f5networks.f5_modules.bigip_data_group</code>.</p> </div> <p class="ansible-version-added">New in f5networks.f5_modules 1.0.0</p>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#parameters" id="id2">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id3">Notes</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> </ul>  <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>Allows for managing data groups on a BIG-IP. Data groups provide a way to store collections of values on a BIG-IP for later use in things such as LTM rules, iRules, and ASM policies.</li> </ul> </section> <section id="parameters"> <h2>Parameters</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-f5networks-f5-modules-bigip-data-group-module-parameter-delete-data-group-file"><strong>delete_data_group_file</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>When <code>true</code>, ensures the remote data group file is deleted.</p> <p>This parameter is only relevant when <code>state</code> is <code>absent</code> and <code>internal</code> is <code>false</code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-f5networks-f5-modules-bigip-data-group-module-parameter-description"><strong>description</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The description of the data group.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-f5networks-f5-modules-bigip-data-group-module-parameter-external-file-name"><strong>external_file_name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>When creating a new data group, this specifies the file name you want to give an external data group file on the BIG-IP.</p> <p>This parameter is ignored when <code>internal</code> is <code>true</code>.</p> <p>This parameter can be used to select an existing data group file to use with an existing external data group.</p> <p>If this value is not provided, it will be given the value specified in <code>name</code> and, therefore, match the name of the data group.</p> <p>This value may only contain letters, numbers, underscores, dashes, or a period.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-f5networks-f5-modules-bigip-data-group-module-parameter-internal"><strong>internal</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The type of this data group.</p> <p>You should only consider setting this value in cases where you know exactly what you are doing, <strong>or</strong>, you are working with a pre-existing internal data group.</p> <p>Be aware that if you deliberately force this parameter to <code>true</code>, and you have a either a large number of records or a large total records size, this large amount of data will be reflected in your BIG-IP configuration. This can lead to <strong>long</strong> system configuration load times due to parsing and verifying the large configuration.</p> <p>When this parameter is <code>true</code>, there is a limit for uploads of either 4 megabytes or 65,000 records, whichever is more restrictive.</p> <p>This value cannot be changed once the data group is created.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-f5networks-f5-modules-bigip-data-group-module-parameter-name"><strong>name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specifies the name of the data group.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-f5networks-f5-modules-bigip-data-group-module-parameter-partition"><strong>partition</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Device partition to manage resources on.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>"Common"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-f5networks-f5-modules-bigip-data-group-module-parameter-provider"><strong>provider</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> <p><em class="ansible-option-versionadded">added in f5networks.f5_modules 1.0.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>A dict object containing connection details.</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-f5networks-f5-modules-bigip-data-group-module-parameter-provider-auth-provider"><strong>auth_provider</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Configures the auth provider for to obtain authentication tokens from the remote device.</p> <p>This option is really used when working with BIG-IQ devices.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-f5networks-f5-modules-bigip-data-group-module-parameter-provider-no-f5-teem"><strong>no_f5_teem</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>If <code>yes</code>, TEEM telemetry data is not sent to F5.</p> <p>You may omit this option by setting the environment variable <code>F5_TELEMETRY_OFF</code>.</p> <p>Previously used variable <code>F5_TEEM</code> is deprecated as its name was confusing.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell">   
<p class="ansible-option-title" id="ansible-collections-f5networks-f5-modules-bigip-data-group-module-parameter-provider-pwd"><strong id="ansible-collections-f5networks-f5-modules-bigip-data-group-module-parameter-provider-pass">password</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: pass, pwd</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The password for the user account used to connect to the BIG-IP or the BIG-IQ.</p> <p>You may omit this option by setting the environment variable <code>F5_PASSWORD</code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-f5networks-f5-modules-bigip-data-group-module-parameter-provider-server"><strong>server</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The BIG-IP host or the BIG-IQ host.</p> <p>You may omit this option by setting the environment variable <code>F5_SERVER</code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-f5networks-f5-modules-bigip-data-group-module-parameter-provider-server-port"><strong>server_port</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The BIG-IP server port.</p> <p>You may omit this option by setting the environment variable <code>F5_SERVER_PORT</code>.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>443</code></p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-f5networks-f5-modules-bigip-data-group-module-parameter-provider-timeout"><strong>timeout</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Specifies the timeout in seconds for communicating with the network device for either connecting or sending commands. If the timeout is exceeded before the operation is completed, the module will error.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-f5networks-f5-modules-bigip-data-group-module-parameter-provider-transport"><strong>transport</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Configures the transport connection to use when connecting to the remote device.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"rest"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-f5networks-f5-modules-bigip-data-group-module-parameter-provider-user"><strong>user</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The username to connect to the BIG-IP or the BIG-IQ. This user must have administrative privileges on the device.</p> <p>You may omit this option by setting the environment variable <code>F5_USER</code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-f5networks-f5-modules-bigip-data-group-module-parameter-provider-validate-certs"><strong>validate_certs</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>If <code>no</code>, SSL certificates are not validated. Use this only on personally controlled sites using self-signed certificates.</p> <p>You may omit this option by setting the environment variable <code>F5_VALIDATE_CERTS</code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-f5networks-f5-modules-bigip-data-group-module-parameter-records"><strong>records</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=any</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specifies the records you want to add to a data group.</p> <p>If you have a large number of records, we recommend you use <code>records_src</code> instead of typing all those records here.</p> <p>The technical limit of either the number of records, or the total size of all records. Varies with the size of the total resources on your system; in particular, RAM.</p> <p>When <code>internal</code> is <code>false</code>, at least one record must be specified in either <code>records</code> or <code>records_src</code>.</p> <p>When <code>type</code> is: <code>ip</code>, <code>address</code>, <code>addr</code> if the addresses use a non-default route domain, they must be explicit about it, meaning they must contain a route domain notation <code>%</code> e.g. 10.10.1.1%11. This is true regardless if the data group resides in a partition or not.</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-f5networks-f5-modules-bigip-data-group-module-parameter-records-key"><strong>key</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The key describing the record in the data group.</p> <p>The key will be used for validation of the <code>type</code> parameter to this module.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-f5networks-f5-modules-bigip-data-group-module-parameter-records-value"><strong>value</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">any</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The value of the key describing the record in the data group.</p> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-f5networks-f5-modules-bigip-data-group-module-parameter-records-src"><strong>records_src</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">path</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Path to a file with records in it.</p> <p>The file should be well-formed. This means it includes records, one per line, that resemble the following format “key separator value”. For example, <code>foo := bar</code>.</p> <p>BIG-IP is strict about this format, but this module is a bit more lax. It will allow you to include arbitrary amounts (including none) of empty space on either side of the separator. For an illustration of this, see the Examples section.</p> <p>Record keys are limited in length to no more than 65520 characters.</p> <p>Values of record keys are limited in length to no more than 65520 characters.</p> <p>The total number of records you can have in your BIG-IP is limited by the memory of the BIG-IP itself.</p> <p>The format of this content is slightly different depending on whether you specify a <code>type</code> of <code>address</code>, <code>integer</code>, or <code>string</code>. See the examples section for examples of the different types of payload formats that are expected in your data group file.</p> <p>When <code>internal</code> is <code>false</code>, at least one record must be specified in either <code>records</code> or <code>records_src</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-f5networks-f5-modules-bigip-data-group-module-parameter-separator"><strong>separator</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>When specifying <code>records_src</code>, this is the string of characters that will be used to break apart entries in the <code>records_src</code> into key/value pairs.</p> <p>By default, the value of this parameter is <code>:=</code>.</p> <p>This value cannot be changed once it is set.</p> <p>This parameter is only relevant when <code>internal</code> is <code>false</code>. It will be ignored otherwise.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>":="</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-f5networks-f5-modules-bigip-data-group-module-parameter-state"><strong>state</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>When <code>state</code> is <code>present</code>, ensures the data group exists.</p> <p>When <code>state</code> is <code>absent</code>, ensures the data group is removed.</p> <p>The use of state in this module refers to the entire data group, not its members.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"present"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"absent"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-f5networks-f5-modules-bigip-data-group-module-parameter-type"><strong>type</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The type of records in this data group.</p> <p>This parameter is important because it causes the BIG-IP to store your data in different ways to optimize access to it. For example, it would be wrong to specify a list of records containing IP addresses, but label them as a <code>string</code> type.</p> <p>This value cannot be changed once the data group is created.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"address"</code></li> <li><code>"addr"</code></li> <li><code>"ip"</code></li> <li>
<code><strong>"string"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"integer"</code></li> <li><code>"int"</code></li> </ul> </div></td> </tr>  </table> </section> <section id="notes"> <h2>Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>This module does NOT support atomic updates of data group members in a type <code>internal</code> data group.</li> <li>Addition/Deletion of data group members in a type <code>external</code> data group should be done through Ansible modules only, if changes are made manually, the Ansible module will not detect those changes.</li> <li>For more information on using Ansible to manage F5 Networks devices see <a class="reference external" href="https://www.ansible.com/integrations/networks/f5">https://www.ansible.com/integrations/networks/f5</a>.</li> <li>Requires BIG-IP software version &gt;= 12.</li> <li>The F5 modules only manipulate the running configuration of the F5 product. To ensure that BIG-IP specific configuration persists to disk, be sure to include at least one task that uses the <a class="reference internal" href="bigip_config_module.html#ansible-collections-f5networks-f5-modules-bigip-config-module"><span class="std std-ref">f5networks.f5_modules.bigip_config</span></a> module to save the running configuration. Refer to the module’s documentation for the correct usage of the module to save your running configuration.</li> </ul> </div> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja">- name: Create a data group of addresses
  bigip_data_group:
    name: foo
    internal: true
    records:
      - key: 0.0.0.0/32
        value: External_NAT
      - key: 10.10.10.10
        value: No_NAT
    type: address
    provider:
      password: secret
      server: lb.mydomain.com
      user: admin
  delegate_to: localhost

- name: Create a data group of strings
  bigip_data_group:
    name: foo
    internal: true
    records:
      - key: caddy
        value: ""
      - key: cafeteria
        value: ""
      - key: cactus
        value: ""
    type: string
    provider:
      password: secret
      server: lb.mydomain.com
      user: admin
  delegate_to: localhost

- name: Create a data group of IP addresses from a file
  bigip_data_group:
    name: foo
    records_src: /path/to/dg-file
    type: address
    provider:
      password: secret
      server: lb.mydomain.com
      user: admin
  delegate_to: localhost

- name: Update an existing internal data group of strings
  bigip_data_group:
    name: foo
    internal: true
    records:
      - key: caddy
        value: ""
      - key: cafeteria
        value: ""
      - key: cactus
        value: ""
    provider:
      password: secret
      server: lb.mydomain.com
      user: admin
  delegate_to: localhost

- name: Show the data format expected for records_content - address 1
  copy:
    dest: /path/to/addresses.txt
    content: |
      network 10.0.0.0 prefixlen 8 := "Network1",
      network 172.16.0.0 prefixlen 12 := "Network2",
      network 192.168.0.0 prefixlen 16 := "Network3",
      network 2402:9400:1000:0:: prefixlen 64 := "Network4",
      host 192.168.20.1 := "Host1",
      host 172.16.1.1 := "Host2",
      host 172.16.1.1 := "Host3",
      host 2001:0db8:85a3:0000:0000:8a2e:0370:7334 := "Host4",
      host 2001:0db8:85a3:0000:0000:8a2e:0370:7334 := "Host5"

- name: Show the data format expected for records_content - address 2
  copy:
    dest: /path/to/addresses.txt
    content: |
      10.0.0.0/8 := "Network1",
      172.16.0.0/12 := "Network2",
      192.168.0.0/16 := "Network3",
      2402:9400:1000:0::/64 := "Network4",
      192.168.20.1 := "Host1",
      172.16.1.1 := "Host2",
      172.16.1.1/32 := "Host3",
      2001:0db8:85a3:0000:0000:8a2e:0370:7334 := "Host4",
      2001:0db8:85a3:0000:0000:8a2e:0370:7334/128 := "Host5"

- name: Show the data format expected for records_content - string
  copy:
    dest: /path/to/strings.txt
    content: |
      a := alpha,
      b := bravo,
      c := charlie,
      x := x-ray,
      y := yankee,
      z := zulu,

- name: Show the data format expected for records_content - integer
  copy:
    dest: /path/to/integers.txt
    content: |
      1 := bar,
      2 := baz,
      3,
      4,
</pre> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Tim Rupp (@caphrim007)</li> <li>Wojciech Wypior (@wojtek0806)</li> <li>Greg Crosby (@crosbygw)</li> </ul> </section> <section id="collection-links"> <h3>Collection links</h3> <ul class="ansible-links"> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/F5Networks/f5-ansible/issues" rel="noopener external" target="_blank">Issue Tracker</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://clouddocs.f5.com/products/orchestration/ansible/devel/" rel="noopener external" target="_blank">Homepage</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/F5Networks/f5-ansible-f5modules" rel="noopener external" target="_blank">Repository (Sources)</a></span></li> </ul> </section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2024 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/f5networks/f5_modules/bigip_data_group_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/f5networks/f5_modules/bigip_data_group_module.html</a>
  </p>
</div>
