<h1 id="f5networks-f5-modules-bigip-apm-network-access-manage-apm-network-access-resource">f5networks.f5_modules.bigip_apm_network_access – Manage APM Network Access resource</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/f5networks/f5_modules">f5networks.f5_modules collection</a> (version 1.12.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install f5networks.f5_modules</code>.</p> <p>To use it in a playbook, specify: <code>f5networks.f5_modules.bigip_apm_network_access</code>.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 1.0.0: </span>of f5networks.f5_modules</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#parameters" id="id2">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id3">Notes</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id5">Return Values</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Manage APM Network Access resource.</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="2">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="2">  <b>allow_local_dns</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Enables local access to DNS servers configured on the client prior to establishing a network access connection.</div> </td> </tr> <tr> <td colspan="2">  <b>allow_local_subnet</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Enables local subnet access and local access to any host or subnet in routes specified in the client routing table.</div> <div>When <code>yes</code> the system does not support integrated IP filtering.</div> </td> </tr> <tr> <td colspan="2">  <b>description</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>User created network access description.</div> </td> </tr> <tr> <td colspan="2">  <b>dns_address_space</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>Specifies a list of domain names describing the target LAN DNS addresses.</div> </td> </tr> <tr> <td colspan="2">  <b>dtls</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>When <code>yes</code> the network access connection uses Datagram Transport Level Security instead of TCP, to provide better throughput for high demand applications like VoIP or streaming video.</div> </td> </tr> <tr> <td colspan="2">  <b>dtls_port</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>Specifies the port number the network access resource uses for secure UDP traffic with DTLS.</div> </td> </tr> <tr> <td colspan="2">  <b>excluded_dns_addresses</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>Specifies the DNS address spaces for which traffic is not forced through the tunnel.</div> </td> </tr> <tr> <td colspan="2">  <b>excluded_ipv4_adresses</b>  <div> <span>list</span> / <span>elements=dictionary</span> </div> </td> <td> </td> <td> <div>Specifies IPV4 address spaces for which traffic is not forced through the tunnel.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>subnet</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The address of subnet in CIDR format, e.g. <code>192.168.1.0/24</code>
</div> <div>Host addresses can be specified without the CIDR mask notation.</div> </td> </tr> <tr> <td colspan="2">  <b>excluded_ipv6_adresses</b>  <div> <span>list</span> / <span>elements=dictionary</span> </div> </td> <td> </td> <td> <div>Specifies IPV6 address spaces for which traffic is not forced through the tunnel.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>subnet</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The address of a subnet in CIDR format, e.g. <code>2001:db8:abcd:8000::/52</code>
</div> <div>Host addresses can be specified without the CIDR mask notation.</div> </td> </tr> <tr> <td colspan="2">  <b>ip_version</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>ipv4</li> <li>ipv4-ipv6</li> </ul> </td> <td> <div>Supported IP version on the network access resource.</div> </td> </tr> <tr> <td colspan="2">  <b>ipv4_address_space</b>  <div> <span>list</span> / <span>elements=dictionary</span> </div> </td> <td> </td> <td> <div>Specifies a list of IPv4 hosts or networks describing the target LAN.</div> <div>This option is mandatory when creating a new resource and <code>split_tunnel</code> is set to <code>yes</code>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>subnet</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The address of subnet in CIDR format, e.g. <code>192.168.1.0/24</code>
</div> <div>Host addresses can be specified without the CIDR mask notation.</div> </td> </tr> <tr> <td colspan="2">  <b>ipv4_lease_pool</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Specifies the IPV4 lease pool resource to use with network access.</div> <div>Referencing a lease pool can be done in the full path format, for example <code>/Common/pool_name</code>.</div> <div>When a lease pool is referenced in full path format, the <code>partition</code> parameter is ignored.</div> </td> </tr> <tr> <td colspan="2">  <b>ipv6_address_space</b>  <div> <span>list</span> / <span>elements=dictionary</span> </div> </td> <td> </td> <td> <div>Specifies a list of IPv6 hosts or networks describing the target LAN.</div> <div>This option is mandatory when creating a new resource and <code>split_tunnel</code> is set to <code>yes</code>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>subnet</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The address of subnet in CIDR format, e.g. <code>2001:db8:abcd:8000::/52</code>
</div> <div>Host addresses can be specified without the CIDR mask notation.</div> </td> </tr> <tr> <td colspan="2">  <b>ipv6_lease_pool</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Specifies the IPV6 lease pool resource to use with network access.</div> <div>Referencing a lease pool can be done in the full path format, for example <code>/Common/pool_name</code>.</div> <div>When a lease pool is referenced in full path format, the <code>partition</code> parameter is ignored.</div> </td> </tr> <tr> <td colspan="2">  <b>name</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>Specifies the name of the APM network access to manage/create.</div> </td> </tr> <tr> <td colspan="2">  <b>partition</b>  <div> <span>string</span> </div> </td> <td> <b>Default:</b><br><div>"Common"</div> </td> <td> <div>Device partition to manage resources on.</div> </td> </tr> <tr> <td colspan="2">  <b>provider</b>  <div> <span>dictionary</span> </div> <div> added in 1.0.0 of f5networks.f5_modules </div> </td> <td> </td> <td> <div>A dict object containing connection details.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>auth_provider</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Configures the auth provider for to obtain authentication tokens from the remote device.</div> <div>This option is really used when working with BIG-IQ devices.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>no_f5_teem</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>If <code>yes</code>, TEEM telemetry data is not sent to F5.</div> <div>You may omit this option by setting the environment variable <code>F5_TELEMETRY_OFF</code>.</div> <div>Previously used variable <code>F5_TEEM</code> is deprecated as its name was confusing.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>password</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The password for the user account used to connect to the BIG-IP.</div> <div>You may omit this option by setting the environment variable <code>F5_PASSWORD</code>.</div> <div>
<br>aliases: pass, pwd</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>server</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The BIG-IP host.</div> <div>You may omit this option by setting the environment variable <code>F5_SERVER</code>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>server_port</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>443</div> </td> <td> <div>The BIG-IP server port.</div> <div>You may omit this option by setting the environment variable <code>F5_SERVER_PORT</code>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>timeout</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>Specifies the timeout in seconds for communicating with the network device for either connecting or sending commands. If the timeout is exceeded before the operation is completed, the module will error.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>transport</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>rest</b> ←</div></li> </ul> </td> <td> <div>Configures the transport connection to use when connecting to the remote device.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>user</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The username to connect to the BIG-IP with. This user must have administrative privileges on the device.</div> <div>You may omit this option by setting the environment variable <code>F5_USER</code>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>validate_certs</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li><div>
<b>yes</b> ←</div></li> </ul> </td> <td> <div>If <code>no</code>, SSL certificates are not validated. Use this only on personally controlled sites using self-signed certificates.</div> <div>You may omit this option by setting the environment variable <code>F5_VALIDATE_CERTS</code>.</div> </td> </tr> <tr> <td colspan="2">  <b>snat_pool</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Specifies the name of a SNAT pool used for implementing selective and intelligent SNATs.</div> <div>When <code>none</code> the system uses no SNAT pool for this network resource.</div> <div>When <code>automap</code> the system uses all of the self IP addresses as the translation addresses for the pool.</div> </td> </tr> <tr> <td colspan="2">  <b>split_tunnel</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Specifies that only the traffic targeted to a specified address space is sent over the network access tunnel.</div> </td> </tr> <tr> <td colspan="2">  <b>state</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>present</b> ←</div></li> <li>absent</li> </ul> </td> <td> <div>When <code>state</code> is <code>present</code>, ensures the ACL exists.</div> <div>When <code>state</code> is <code>absent</code>, ensures the ACL is removed.</div> </td> </tr> </table> <br>  <h2 id="notes">Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>For more information on using Ansible to manage F5 Networks devices see <a class="reference external" href="https://www.ansible.com/integrations/networks/f5">https://www.ansible.com/integrations/networks/f5</a>.</li> <li>Requires BIG-IP software version &gt;= 12.</li> <li>The F5 modules only manipulate the running configuration of the F5 product. To ensure that BIG-IP specific configuration persists to disk, be sure to include at least one task that uses the <a class="reference internal" href="bigip_config_module.html#ansible-collections-f5networks-f5-modules-bigip-config-module"><span class="std std-ref">f5networks.f5_modules.bigip_config</span></a> module to save the running configuration. Refer to the module’s documentation for the correct usage of the module to save your running configuration.</li> </ul> </div>   <h2 id="examples">Examples</h2> <pre data-language="yaml+jinja">- name: Create a split tunnel IPV4 Network Access
  bigip_apm_network_access:
    name: foobar
    ip_version: ipv4
    split_tunnel: yes
    snat_pool: "none"
    ipv4_lease_pool: leasefoo
    ipv4_address_space:
      - subnet: 10.10.1.1
      - subnet: 10.10.2.0/24
    excluded_ipv4_adresses:
      - subnet: 192.168.1.0/24
    provider:
      password: secret
      server: lb.mydomain.com
      user: admin
  delegate_to: localhost

- name: Modify a split tunnel IPV4 Network Access
  bigip_apm_network_access:
    name: foobar
    snat_pool: /Common/poolsnat
    ipv4_address_space:
      - subnet: 172.16.23.0/24
    excluded_ipv4_adresses:
      - subnet: 10.10.2.0/24
    allow_local_subnet: yes
    allow_local_dns: yes
    provider:
      password: secret
      server: lb.mydomain.com
      user: admin
  delegate_to: localhost

- name: Remove Network Access
  bigip_apm_network_access:
    name: foobar
    state: absent
    provider:
      password: secret
      server: lb.mydomain.com
      user: admin
  delegate_to: localhost
</pre>   <h2 id="return-values">Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values.html#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="documentation-table"> <tr> <th colspan="2">Key</th> <th>Returned</th> <th width="100%">Description</th> </tr> <tr> <td colspan="2">  <b>allow_local_dns</b>  <div> <span>boolean</span> </div> </td> <td>changed</td> <td> <div>Enables local access to DNS servers configured on the client.</div> <br> <div><b>Sample:</b></div> <div>True</div> </td> </tr> <tr> <td colspan="2">  <b>allow_local_subnet</b>  <div> <span>boolean</span> </div> </td> <td>changed</td> <td> <div>Enables local subnet access.</div> <br> <div><b>Sample:</b></div> <div>True</div> </td> </tr> <tr> <td colspan="2">  <b>description</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>The new description of Network Access.</div> <br> <div><b>Sample:</b></div> <div>My Access</div> </td> </tr> <tr> <td colspan="2">  <b>dns_address_space</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td>changed</td> <td> <div>Specifies a list of domain names describing the target LAN DNS addresses.</div> <br> <div><b>Sample:</b></div> <div>['internal.net', '*.engnet.org']</div> </td> </tr> <tr> <td colspan="2">  <b>dtls</b>  <div> <span>boolean</span> </div> </td> <td>changed</td> <td> <div>Enables use of DTLS by network access.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>dtls_port</b>  <div> <span>integer</span> </div> </td> <td>changed</td> <td> <div>Specifies the port number the network access resource uses for DTLS.</div> <br> <div><b>Sample:</b></div> <div>4433</div> </td> </tr> <tr> <td colspan="2">  <b>excluded_dns_addresses</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td>changed</td> <td> <div>Specifies the DNS address spaces for which traffic is not forced through the tunnel.</div> <br> <div><b>Sample:</b></div> <div>['foobar.com', 'bazbar.org']</div> </td> </tr> <tr> <td colspan="2">  <b>excluded_ipv4_adresses</b>  <div> <span>complex</span> </div> </td> <td>changed</td> <td> <div>Specifies IPV4 address spaces for which traffic is not forced through the tunnel.</div> <br> <div><b>Sample:</b></div> <div>hash/dictionary of values</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>subnet</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>The host or network address.</div> <br> <div><b>Sample:</b></div> <div>192.168.10.1</div> </td> </tr> <tr> <td colspan="2">  <b>excluded_ipv6_adresses</b>  <div> <span>complex</span> </div> </td> <td>changed</td> <td> <div>Specifies IPV6 address spaces for which traffic is not forced through the tunnel.</div> <br> <div><b>Sample:</b></div> <div>hash/dictionary of values</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>subnet</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>The host or network address.</div> <br> <div><b>Sample:</b></div> <div>2001:DB8:ABCD:0012::0</div> </td> </tr> <tr> <td colspan="2">  <b>ip_version</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>Supported IP version on the network access resource.</div> <br> <div><b>Sample:</b></div> <div>ipv4-ipv6</div> </td> </tr> <tr> <td colspan="2">  <b>ipv4_address_space</b>  <div> <span>complex</span> </div> </td> <td>changed</td> <td> <div>Specifies a list of IPv4 hosts or networks describing the target LAN.</div> <br> <div><b>Sample:</b></div> <div>hash/dictionary of values</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>subnet</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>The host or network address.</div> <br> <div><b>Sample:</b></div> <div>192.168.10.1</div> </td> </tr> <tr> <td colspan="2">  <b>ipv4_lease_pool</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>Specifies a IPV4 lease pool resource to use with network access.</div> <br> <div><b>Sample:</b></div> <div>/Common/leasepoolv4</div> </td> </tr> <tr> <td colspan="2">  <b>ipv6_address_space</b>  <div> <span>complex</span> </div> </td> <td>changed</td> <td> <div>Specifies a list of IPv6 hosts or networks describing the target LAN.</div> <br> <div><b>Sample:</b></div> <div>hash/dictionary of values</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>subnet</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>The host or network address.</div> <br> <div><b>Sample:</b></div> <div>2001:DB8:ABCD:0012::0</div> </td> </tr> <tr> <td colspan="2">  <b>ipv6_lease_pool</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>Specifies a IPV6 lease pool resource to use with network access.</div> <br> <div><b>Sample:</b></div> <div>/Common/leasepoolv6</div> </td> </tr> <tr> <td colspan="2">  <b>snat_pool</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>The name of a SNAT pool used by the network access resource.</div> <br> <div><b>Sample:</b></div> <div>/Common/my-pool</div> </td> </tr> <tr> <td colspan="2">  <b>split_tunnel</b>  <div> <span>boolean</span> </div> </td> <td>changed</td> <td> <div>Enables split tunnel on the network access resource.</div> <br> <div><b>Sample:</b></div> <div>True</div> </td> </tr> </table> <br><br> <h3 id="authors">Authors</h3> <ul class="simple"> <li>Wojciech Wypior (@wojtek0806)</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2021 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/f5networks/f5_modules/bigip_apm_network_access_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/f5networks/f5_modules/bigip_apm_network_access_module.html</a>
  </p>
</div>
