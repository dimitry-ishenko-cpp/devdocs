<h1 id="f5networks-f5-modules-bigip-ucs-manage-upload-installation-and-removal-of-ucs-files">f5networks.f5_modules.bigip_ucs – Manage upload, installation, and removal of UCS files</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/f5networks/f5_modules">f5networks.f5_modules collection</a> (version 1.12.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install f5networks.f5_modules</code>.</p> <p>To use it in a playbook, specify: <code>f5networks.f5_modules.bigip_ucs</code>.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 1.0.0: </span>of f5networks.f5_modules</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#parameters" id="id2">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id3">Notes</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Manage the upload, installation, and removal of UCS files on a BIG-IP system. A user configuration set (UCS) is a backup file that contains BIG-IP configuration data that can be used to fully restore a BIG-IP system in the event of a failure or RMA replacement.</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="2">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="2">  <b>force</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>If <code>yes</code>, the system uploads the file every time and replaces the file on the device. If <code>no</code>, the file is only uploaded if it does not already exist. Generally should only be <code>yes</code> in cases where you believe the image was corrupted during upload.</div> </td> </tr> <tr> <td colspan="2">  <b>include_chassis_level_config</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>During restoration of the UCS file, includes chassis level configuration that is shared among boot volume sets. For example, the cluster default configuration.</div> </td> </tr> <tr> <td colspan="2">  <b>no_license</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Performs a full restore of the UCS file and all the files it contains, with the exception of the license file. The option must be used to restore a UCS on RMA (Returned Materials Authorization) devices.</div> </td> </tr> <tr> <td colspan="2">  <b>no_platform_check</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Bypasses the platform check and allows installation of a UCS that was created using a different platform. By default (without this option), installation of a UCS created from a different platform is not allowed.</div> </td> </tr> <tr> <td colspan="2">  <b>passphrase</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Specifies the passphrase that is necessary to load the specified UCS file.</div> </td> </tr> <tr> <td colspan="2">  <b>provider</b>  <div> <span>dictionary</span> </div> <div> added in 1.0.0 of f5networks.f5_modules </div> </td> <td> </td> <td> <div>A dict object containing connection details.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>auth_provider</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Configures the auth provider for to obtain authentication tokens from the remote device.</div> <div>This option is really used when working with BIG-IQ devices.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>no_f5_teem</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>If <code>yes</code>, TEEM telemetry data is not sent to F5.</div> <div>You may omit this option by setting the environment variable <code>F5_TELEMETRY_OFF</code>.</div> <div>Previously used variable <code>F5_TEEM</code> is deprecated as its name was confusing.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>password</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The password for the user account used to connect to the BIG-IP.</div> <div>You may omit this option by setting the environment variable <code>F5_PASSWORD</code>.</div> <div>
<br>aliases: pass, pwd</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>server</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The BIG-IP host.</div> <div>You may omit this option by setting the environment variable <code>F5_SERVER</code>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>server_port</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>443</div> </td> <td> <div>The BIG-IP server port.</div> <div>You may omit this option by setting the environment variable <code>F5_SERVER_PORT</code>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>timeout</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>Specifies the timeout in seconds for communicating with the network device for either connecting or sending commands. If the timeout is exceeded before the operation is completed, the module will error.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>transport</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>rest</b> ←</div></li> </ul> </td> <td> <div>Configures the transport connection to use when connecting to the remote device.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>user</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The username to connect to the BIG-IP with. This user must have administrative privileges on the device.</div> <div>You may omit this option by setting the environment variable <code>F5_USER</code>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>validate_certs</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li><div>
<b>yes</b> ←</div></li> </ul> </td> <td> <div>If <code>no</code>, SSL certificates are not validated. Use this only on personally controlled sites using self-signed certificates.</div> <div>You may omit this option by setting the environment variable <code>F5_VALIDATE_CERTS</code>.</div> </td> </tr> <tr> <td colspan="2">  <b>reset_trust</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>When specified, the device and trust domain certs and keys are not loaded from the UCS. Instead, a new set is generated.</div> </td> </tr> <tr> <td colspan="2">  <b>state</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>absent</li> <li>installed</li> <li><div>
<b>present</b> ←</div></li> </ul> </td> <td> <div>When <code>installed</code>, ensures the UCS is uploaded and installed on the system. When <code>present</code>, ensures the UCS is uploaded. When <code>absent</code>, the UCS is removed from the system. When <code>installed</code>, the uploading of the UCS is idempotent, however the installation of that configuration is not idempotent.</div> </td> </tr> <tr> <td colspan="2">  <b>ucs</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The path to the UCS file to install. The parameter must be provided if the <code>state</code> is either <code>installed</code> or <code>activated</code>. When <code>state</code> is <code>absent</code>, the full path for this parameter is ignored and only the filename is used to select a UCS for removal. Therefore you could specify <code>/foo/bar/test.ucs</code> and this module would only look for <code>test.ucs</code>.</div> </td> </tr> </table> <br>  <h2 id="notes">Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>Only the most basic checks are performed by this module. Other checks and considerations need to be taken into account. See <a class="reference external" href="https://support.f5.com/kb/en-us/solutions/public/11000/300/sol11318.html">https://support.f5.com/kb/en-us/solutions/public/11000/300/sol11318.html</a>
</li> <li>This module does not handle devices with the FIPS 140 HSM.</li> <li>This module does not handle BIG-IPs systems on the 6400, 6800, 8400, or 8800 hardware platforms.</li> <li>This module does not verify the new or replaced SSH keys from the UCS file are synchronized between the BIG-IP system and the SCCP.</li> <li>This module does not support the ‘rma’ option.</li> <li>This module does not support restoring a UCS archive on a BIG-IP 1500, 3400, 4100, 6400, 6800, or 8400 hardware platforms other than the system from which the backup was created.</li> <li>The UCS restore operation restores the full configuration only if the hostname of the target system matches the hostname on which the UCS archive was created. If the hostname does not match, only the shared configuration is restored. You can ensure hostnames match by using the <code>bigip_hostname</code> Ansible module in a task before using this module.</li> <li>This module does not support re-licensing a BIG-IP restored from a UCS.</li> <li>This module does not support restoring encrypted archives on replacement RMA unit.</li> <li>For more information on using Ansible to manage F5 Networks devices see <a class="reference external" href="https://www.ansible.com/integrations/networks/f5">https://www.ansible.com/integrations/networks/f5</a>.</li> <li>Requires BIG-IP software version &gt;= 12.</li> <li>The F5 modules only manipulate the running configuration of the F5 product. To ensure that BIG-IP specific configuration persists to disk, be sure to include at least one task that uses the <a class="reference internal" href="bigip_config_module.html#ansible-collections-f5networks-f5-modules-bigip-config-module"><span class="std std-ref">f5networks.f5_modules.bigip_config</span></a> module to save the running configuration. Refer to the module’s documentation for the correct usage of the module to save your running configuration.</li> </ul> </div>   <h2 id="examples">Examples</h2> <pre data-language="yaml+jinja">- name: Upload UCS
  bigip_ucs:
    ucs: /root/bigip.localhost.localdomain.ucs
    state: present
    provider:
      server: lb.mydomain.com
      user: admin
      password: secret
  delegate_to: localhost

- name: Install (upload, install) UCS.
  bigip_ucs:
    ucs: /root/bigip.localhost.localdomain.ucs
    state: installed
    provider:
      server: lb.mydomain.com
      user: admin
      password: secret
  delegate_to: localhost

- name: Install (upload, install) UCS without installing the license portion
  bigip_ucs:
    ucs: /root/bigip.localhost.localdomain.ucs
    state: installed
    no_license: yes
    provider:
      server: lb.mydomain.com
      user: admin
      password: secret
  delegate_to: localhost

- name: Install (upload, install) UCS except the license, and bypassing the platform check
  bigip_ucs:
    ucs: /root/bigip.localhost.localdomain.ucs
    state: installed
    no_license: yes
    no_platform_check: yes
    provider:
      server: lb.mydomain.com
      user: admin
      password: secret
  delegate_to: localhost

- name: Install (upload, install) UCS using a passphrase necessary to load the UCS
  bigip_ucs:
    ucs: /root/bigip.localhost.localdomain.ucs
    state: installed
    passphrase: MyPassphrase1234
    provider:
      server: lb.mydomain.com
      user: admin
      password: secret
  delegate_to: localhost

- name: Remove uploaded UCS file
  bigip_ucs:
    ucs: bigip.localhost.localdomain.ucs
    state: absent
    provider:
      server: lb.mydomain.com
      user: admin
      password: secret
  delegate_to: localhost
</pre>  <h3 id="authors">Authors</h3> <ul class="simple"> <li>Tim Rupp (@caphrim007)</li> <li>Wojciech Wypior (@wojtek0806)</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2021 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/f5networks/f5_modules/bigip_ucs_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/f5networks/f5_modules/bigip_ucs_module.html</a>
  </p>
</div>
