<h1 id="f5networks-f5-modules-bigip-selfip-manage-self-ips-on-a-big-ip-system">f5networks.f5_modules.bigip_selfip – Manage Self-IPs on a BIG-IP system</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/f5networks/f5_modules">f5networks.f5_modules collection</a> (version 1.12.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install f5networks.f5_modules</code>.</p> <p>To use it in a playbook, specify: <code>f5networks.f5_modules.bigip_selfip</code>.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 1.0.0: </span>of f5networks.f5_modules</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#parameters" id="id2">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id3">Notes</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id5">Return Values</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Manage Self-IP addresses on a BIG-IP system.</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="2">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="2">  <b>address</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The IP addresses for the new self IP. This value is ignored upon update as addresses themselves cannot be changed after they are created.</div> <div>This value is required when creating new self IPs.</div> </td> </tr> <tr> <td colspan="2">  <b>allow_service</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>Configure port lockdown for the self IP. By default, the self IP has a "default deny" policy. This can be changed to allow TCP and UDP ports, as well as specific protocols. This list should contain <code>protocol</code>:<code>port</code> values.</div> </td> </tr> <tr> <td colspan="2">  <b>description</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Description of the traffic selector.</div> </td> </tr> <tr> <td colspan="2">  <b>fw_enforced_policy</b>  <div> <span>string</span> </div> <div> added in 1.1.0 of f5networks.f5_modules </div> </td> <td> </td> <td> <div>Specifies an AFM policy to attach to Self IP.</div> </td> </tr> <tr> <td colspan="2">  <b>name</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The name of the self IP to create.</div> <div>If this parameter is not specified, it defaults to the value supplied in the <code>address</code> parameter.</div> </td> </tr> <tr> <td colspan="2">  <b>netmask</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The netmask for the self IP. When creating a new self IP, this value is required.</div> </td> </tr> <tr> <td colspan="2">  <b>partition</b>  <div> <span>string</span> </div> </td> <td> <b>Default:</b><br><div>"Common"</div> </td> <td> <div>Device partition to manage resources on. You can set different partitions for self IPs, but the address used may not match any other address used by a self IP. Thus, self IPs are not isolated by partitions as other resources on a BIG-IP are.</div> </td> </tr> <tr> <td colspan="2">  <b>provider</b>  <div> <span>dictionary</span> </div> <div> added in 1.0.0 of f5networks.f5_modules </div> </td> <td> </td> <td> <div>A dict object containing connection details.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>auth_provider</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Configures the auth provider for to obtain authentication tokens from the remote device.</div> <div>This option is really used when working with BIG-IQ devices.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>no_f5_teem</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>If <code>yes</code>, TEEM telemetry data is not sent to F5.</div> <div>You may omit this option by setting the environment variable <code>F5_TELEMETRY_OFF</code>.</div> <div>Previously used variable <code>F5_TEEM</code> is deprecated as its name was confusing.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>password</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The password for the user account used to connect to the BIG-IP.</div> <div>You may omit this option by setting the environment variable <code>F5_PASSWORD</code>.</div> <div>
<br>aliases: pass, pwd</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>server</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The BIG-IP host.</div> <div>You may omit this option by setting the environment variable <code>F5_SERVER</code>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>server_port</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>443</div> </td> <td> <div>The BIG-IP server port.</div> <div>You may omit this option by setting the environment variable <code>F5_SERVER_PORT</code>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>timeout</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>Specifies the timeout in seconds for communicating with the network device for either connecting or sending commands. If the timeout is exceeded before the operation is completed, the module will error.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>transport</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>rest</b> ←</div></li> </ul> </td> <td> <div>Configures the transport connection to use when connecting to the remote device.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>user</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The username to connect to the BIG-IP with. This user must have administrative privileges on the device.</div> <div>You may omit this option by setting the environment variable <code>F5_USER</code>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>validate_certs</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li><div>
<b>yes</b> ←</div></li> </ul> </td> <td> <div>If <code>no</code>, SSL certificates are not validated. Use this only on personally controlled sites using self-signed certificates.</div> <div>You may omit this option by setting the environment variable <code>F5_VALIDATE_CERTS</code>.</div> </td> </tr> <tr> <td colspan="2">  <b>route_domain</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>The route domain id of the system. When creating a new self IP, if this value is not specified, the default value is <code>0</code>.</div> <div>This value cannot be changed after it is set.</div> </td> </tr> <tr> <td colspan="2">  <b>state</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>absent</li> <li><div>
<b>present</b> ←</div></li> </ul> </td> <td> <div>When <code>present</code>, guarantees the self IP exists with the provided attributes.</div> <div>When <code>absent</code>, removes the self IP from the system.</div> </td> </tr> <tr> <td colspan="2">  <b>traffic_group</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The traffic group for the self IP addresses in an active-active, redundant load balancer configuration. When creating a new self IP, if this value is not specified, the default is <code>/Common/traffic-group-local-only</code>.</div> </td> </tr> <tr> <td colspan="2">  <b>vlan</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The VLAN for the new self IPs. When creating a new self IP, this value is required.</div> </td> </tr> </table> <br>  <h2 id="notes">Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>For more information on using Ansible to manage F5 Networks devices see <a class="reference external" href="https://www.ansible.com/integrations/networks/f5">https://www.ansible.com/integrations/networks/f5</a>.</li> <li>Requires BIG-IP software version &gt;= 12.</li> <li>The F5 modules only manipulate the running configuration of the F5 product. To ensure that BIG-IP specific configuration persists to disk, be sure to include at least one task that uses the <a class="reference internal" href="bigip_config_module.html#ansible-collections-f5networks-f5-modules-bigip-config-module"><span class="std std-ref">f5networks.f5_modules.bigip_config</span></a> module to save the running configuration. Refer to the module’s documentation for the correct usage of the module to save your running configuration.</li> </ul> </div>   <h2 id="examples">Examples</h2> <pre data-language="yaml+jinja">- name: Create Self IP
  bigip_selfip:
    address: 10.10.10.10
    name: self1
    netmask: 255.255.255.0
    vlan: vlan1
    provider:
      password: secret
      server: lb.mydomain.com
      user: admin
  delegate_to: localhost

- name: Create Self IP with a Route Domain
  bigip_selfip:
    name: self1
    address: 10.10.10.10
    netmask: 255.255.255.0
    vlan: vlan1
    route_domain: 10
    allow_service: default
    provider:
      server: lb.mydomain.com
      user: admin
      password: secret
  delegate_to: localhost

- name: Delete Self IP
  bigip_selfip:
    name: self1
    state: absent
    provider:
      user: admin
      password: secret
      server: lb.mydomain.com
  delegate_to: localhost

- name: Allow management web UI to be accessed on this Self IP
  bigip_selfip:
    name: self1
    state: absent
    allow_service:
      - tcp:443
    provider:
      password: secret
      server: lb.mydomain.com
      user: admin
  delegate_to: localhost

- name: Allow HTTPS and SSH access to this Self IP
  bigip_selfip:
    name: self1
    state: absent
    allow_service:
      - tcp:443
      - tcp:22
    provider:
      password: secret
      server: lb.mydomain.com
      user: admin
  delegate_to: localhost

- name: Allow all services access to this Self IP
  bigip_selfip:
    name: self1
    state: absent
    allow_service:
      - all
    provider:
      password: secret
      server: lb.mydomain.com
      user: admin
  delegate_to: localhost

- name: Allow only GRE and IGMP protocols access to this Self IP
  bigip_selfip:
    name: self1
    state: absent
    allow_service:
      - gre:0
      - igmp:0
    provider:
      user: admin
      password: secret
      server: lb.mydomain.com
  delegate_to: localhost

- name: Allow all TCP, but no other protocols access to this Self IP
  bigip_selfip:
    name: self1
    state: absent
    allow_service:
      - tcp:0
    provider:
      password: secret
      server: lb.mydomain.com
      user: admin
  delegate_to: localhost
</pre>   <h2 id="return-values">Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values.html#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="documentation-table"> <tr> <th colspan="1">Key</th> <th>Returned</th> <th width="100%">Description</th> </tr> <tr> <td colspan="1">  <b>address</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>The address for the self IP.</div> <br> <div><b>Sample:</b></div> <div>192.0.2.10</div> </td> </tr> <tr> <td colspan="1">  <b>allow_service</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td>changed</td> <td> <div>Services that are allowed via this self IP.</div> <br> <div><b>Sample:</b></div> <div>['igmp:0', 'tcp:22', 'udp:53']</div> </td> </tr> <tr> <td colspan="1">  <b>fw_enforced_policy</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>Specifies an AFM policy to be attached to the self IP.</div> <br> <div><b>Sample:</b></div> <div>/Common/afm-blocking-policy</div> </td> </tr> <tr> <td colspan="1">  <b>name</b>  <div> <span>string</span> </div> </td> <td>created</td> <td> <div>The name of the self IP.</div> <br> <div><b>Sample:</b></div> <div>self1</div> </td> </tr> <tr> <td colspan="1">  <b>netmask</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>The netmask of the self IP.</div> <br> <div><b>Sample:</b></div> <div>255.255.255.0</div> </td> </tr> <tr> <td colspan="1">  <b>traffic_group</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>The traffic group of which the self IP is a member.</div> <br> <div><b>Sample:</b></div> <div>traffic-group-local-only</div> </td> </tr> <tr> <td colspan="1">  <b>vlan</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>The VLAN set on the self IP.</div> <br> <div><b>Sample:</b></div> <div>vlan1</div> </td> </tr> </table> <br><br> <h3 id="authors">Authors</h3> <ul class="simple"> <li>Tim Rupp (@caphrim007)</li> <li>Wojciech Wypior (@wojtek0806)</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2021 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/f5networks/f5_modules/bigip_selfip_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/f5networks/f5_modules/bigip_selfip_module.html</a>
  </p>
</div>
