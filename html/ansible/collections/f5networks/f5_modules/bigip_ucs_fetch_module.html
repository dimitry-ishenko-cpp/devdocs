<h1 id="f5networks-f5-modules-bigip-ucs-fetch-fetches-a-ucs-file-from-remote-nodes">f5networks.f5_modules.bigip_ucs_fetch – Fetches a UCS file from remote nodes</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/f5networks/f5_modules">f5networks.f5_modules collection</a> (version 1.12.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install f5networks.f5_modules</code>.</p> <p>To use it in a playbook, specify: <code>f5networks.f5_modules.bigip_ucs_fetch</code>.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 1.0.0: </span>of f5networks.f5_modules</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#parameters" id="id2">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id3">Notes</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id5">Return Values</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>This module is used for fetching UCS files from remote machines and storing them locally in a file tree, organized by hostname. This module was written to create and transfer UCS files that might not be present, it does not require UCS file to be pre-created. So a missing remote UCS is not an error unless <code>fail_on_missing</code> is set to ‘yes’.</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="2">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="2">  <b>async_timeout</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>150</div> </td> <td> <div>Parameter used when creating new UCS file on a device.</div> <div>The amount of time to wait for the API async interface to complete its task, in seconds.</div> <div>The accepted value range is between <code>150</code> and <code>1800</code> seconds.</div> </td> </tr> <tr> <td colspan="2">  <b>backup</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Creates a backup file including the timestamp information so you can get the original file back if you overwrote it incorrectly.</div> </td> </tr> <tr> <td colspan="2">  <b>create_on_missing</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li><div>
<b>yes</b> ←</div></li> </ul> </td> <td> <div>Creates the UCS based on the value of <code>src</code>, if the file does not already exist on the remote system.</div> </td> </tr> <tr> <td colspan="2">  <b>dest</b>  <div> <span>path</span> </div> </td> <td> </td> <td> <div>A directory to save the UCS file into.</div> <div>This option is mandatory when <code>only_create_file</code> is set to <code>no</code>.</div> </td> </tr> <tr> <td colspan="2">  <b>encryption_password</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Password to use to encrypt the UCS file if desired.</div> </td> </tr> <tr> <td colspan="2">  <b>fail_on_missing</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Make the module fail if the UCS file on the remote system is missing.</div> </td> </tr> <tr> <td colspan="2">  <b>force</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li><div>
<b>yes</b> ←</div></li> </ul> </td> <td> <div>If <code>no</code>, the file is only transferred if the destination does not exist.</div> </td> </tr> <tr> <td colspan="2">  <b>only_create_file</b>  <div> <span>boolean</span> </div> <div> added in 1.12.0 of f5networks.f5_modules </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>If <code>yes</code>, the file is created on device and not downloaded. If the UCS archive exists on device, no change is made and file is not be downloaded.</div> <div>To recreate UCS files left on the device, remove them with <code>bigip_ucs</code> module before running this module with <code>only_create_file</code> set to <code>yes</code>.</div> </td> </tr> <tr> <td colspan="2">  <b>provider</b>  <div> <span>dictionary</span> </div> <div> added in 1.0.0 of f5networks.f5_modules </div> </td> <td> </td> <td> <div>A dict object containing connection details.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>auth_provider</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Configures the auth provider for to obtain authentication tokens from the remote device.</div> <div>This option is really used when working with BIG-IQ devices.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>no_f5_teem</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>If <code>yes</code>, TEEM telemetry data is not sent to F5.</div> <div>You may omit this option by setting the environment variable <code>F5_TELEMETRY_OFF</code>.</div> <div>Previously used variable <code>F5_TEEM</code> is deprecated as its name was confusing.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>password</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The password for the user account used to connect to the BIG-IP.</div> <div>You may omit this option by setting the environment variable <code>F5_PASSWORD</code>.</div> <div>
<br>aliases: pass, pwd</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>server</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The BIG-IP host.</div> <div>You may omit this option by setting the environment variable <code>F5_SERVER</code>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>server_port</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>443</div> </td> <td> <div>The BIG-IP server port.</div> <div>You may omit this option by setting the environment variable <code>F5_SERVER_PORT</code>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>timeout</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>Specifies the timeout in seconds for communicating with the network device for either connecting or sending commands. If the timeout is exceeded before the operation is completed, the module will error.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>transport</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>rest</b> ←</div></li> </ul> </td> <td> <div>Configures the transport connection to use when connecting to the remote device.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>user</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The username to connect to the BIG-IP with. This user must have administrative privileges on the device.</div> <div>You may omit this option by setting the environment variable <code>F5_USER</code>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>validate_certs</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li><div>
<b>yes</b> ←</div></li> </ul> </td> <td> <div>If <code>no</code>, SSL certificates are not validated. Use this only on personally controlled sites using self-signed certificates.</div> <div>You may omit this option by setting the environment variable <code>F5_VALIDATE_CERTS</code>.</div> </td> </tr> <tr> <td colspan="2">  <b>src</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The name of the UCS file to create on the remote server for downloading.</div> <div>The file is retrieved or created in /var/local/ucs/.</div> <div>This option is mandatory when <code>only_create_file</code> is set to <code>yes</code>.</div> </td> </tr> </table> <br>  <h2 id="notes">Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>BIG-IP provides no way to get a checksum of the UCS files on the system via any interface with the possible exception of logging in directly to the box (which would not support appliance mode). Therefore, the best this module can do is check for the existence of the file on disk; no check-summing.</li> <li>If you are using this module with either Ansible Tower or Ansible AWX, you should be aware of how these Ansible products execute jobs in restricted environments. More information can be found here <a class="reference external" href="https://clouddocs.f5.com/products/orchestration/ansible/devel/usage/module-usage-with-tower.html">https://clouddocs.f5.com/products/orchestration/ansible/devel/usage/module-usage-with-tower.html</a>
</li> <li>Some longer running tasks might cause the REST interface on BIG-IP to time out, to avoid this adjust the timers as per this KB article <a class="reference external" href="https://support.f5.com/csp/article/K94602685">https://support.f5.com/csp/article/K94602685</a>
</li> <li>For more information on using Ansible to manage F5 Networks devices see <a class="reference external" href="https://www.ansible.com/integrations/networks/f5">https://www.ansible.com/integrations/networks/f5</a>.</li> <li>Requires BIG-IP software version &gt;= 12.</li> <li>The F5 modules only manipulate the running configuration of the F5 product. To ensure that BIG-IP specific configuration persists to disk, be sure to include at least one task that uses the <a class="reference internal" href="bigip_config_module.html#ansible-collections-f5networks-f5-modules-bigip-config-module"><span class="std std-ref">f5networks.f5_modules.bigip_config</span></a> module to save the running configuration. Refer to the module’s documentation for the correct usage of the module to save your running configuration.</li> </ul> </div>   <h2 id="examples">Examples</h2> <pre data-language="yaml+jinja">- name: Download a new UCS
  bigip_ucs_fetch:
    src: cs_backup.ucs
    dest: /tmp/cs_backup.ucs
    provider:
      server: lb.mydomain.com
      user: admin
      password: secret
  delegate_to: localhost

- name: Only create new UCS, no download
  bigip_ucs_fetch:
    src: cs_backup.ucs
    only_create_file: yes
    provider:
      server: lb.mydomain.com
      user: admin
      password: secret
  delegate_to: localhost

- name: Recreate UCS file left on device - remove file first
  bigip_ucs:
    ucs: cs_backup.ucs
    state: absent
    provider:
      server: lb.mydomain.com
      user: admin
      password: secret
  delegate_to: localhost

- name: Recreate UCS file left on device - create new file
  bigip_ucs_fetch:
    src: cs_backup.ucs
    only_create_file: yes
    provider:
      server: lb.mydomain.com
      user: admin
      password: secret
  delegate_to: localhost
</pre>   <h2 id="return-values">Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values.html#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="documentation-table"> <tr> <th colspan="1">Key</th> <th>Returned</th> <th width="100%">Description</th> </tr> <tr> <td colspan="1">  <b>backup_file</b>  <div> <span>string</span> </div> </td> <td>changed and if backup=yes</td> <td> <div>Name of the backup file.</div> <br> <div><b>Sample:</b></div> <div>/path/to/file.txt.2015-02-12@22:09~</div> </td> </tr> <tr> <td colspan="1">  <b>checksum</b>  <div> <span>string</span> </div> </td> <td>success or changed</td> <td> <div>The SHA1 checksum of the downloaded file.</div> <br> <div><b>Sample:</b></div> <div>7b46bbe4f8ebfee64761b5313855618f64c64109</div> </td> </tr> <tr> <td colspan="1">  <b>dest</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>Location on the ansible host the UCS was saved to.</div> <br> <div><b>Sample:</b></div> <div>/path/to/file.txt</div> </td> </tr> <tr> <td colspan="1">  <b>gid</b>  <div> <span>integer</span> </div> </td> <td>success</td> <td> <div>Group ID of the UCS file, after execution.</div> <br> <div><b>Sample:</b></div> <div>100</div> </td> </tr> <tr> <td colspan="1">  <b>group</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>Group of the UCS file, after execution.</div> <br> <div><b>Sample:</b></div> <div>httpd</div> </td> </tr> <tr> <td colspan="1">  <b>md5sum</b>  <div> <span>string</span> </div> </td> <td>changed or success</td> <td> <div>The MD5 checksum of the downloaded file.</div> <br> <div><b>Sample:</b></div> <div>96cacab4c259c4598727d7cf2ceb3b45</div> </td> </tr> <tr> <td colspan="1">  <b>mode</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>Permissions of the target UCS, after execution.</div> <br> <div><b>Sample:</b></div> <div>420</div> </td> </tr> <tr> <td colspan="1">  <b>owner</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>Owner of the UCS file, after execution.</div> <br> <div><b>Sample:</b></div> <div>httpd</div> </td> </tr> <tr> <td colspan="1">  <b>size</b>  <div> <span>integer</span> </div> </td> <td>success</td> <td> <div>Size of the target UCS, after execution.</div> <br> <div><b>Sample:</b></div> <div>1220</div> </td> </tr> <tr> <td colspan="1">  <b>src</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>Name of the UCS file on the remote BIG-IP to download. If not specified, this is a randomly generated filename.</div> <br> <div><b>Sample:</b></div> <div>cs_backup.ucs</div> </td> </tr> <tr> <td colspan="1">  <b>uid</b>  <div> <span>integer</span> </div> </td> <td>success</td> <td> <div>Owner ID of the UCS file, after execution.</div> <br> <div><b>Sample:</b></div> <div>100</div> </td> </tr> </table> <br><br> <h3 id="authors">Authors</h3> <ul class="simple"> <li>Tim Rupp (@caphrim007)</li> <li>Wojciech Wypior (@wojtek0806)</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2021 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/f5networks/f5_modules/bigip_ucs_fetch_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/f5networks/f5_modules/bigip_ucs_fetch_module.html</a>
  </p>
</div>
