<h1 id="f5networks-f5-modules-bigip-gtm-wide-ip-manages-f5-big-ip-gtm-wide-ip">f5networks.f5_modules.bigip_gtm_wide_ip – Manages F5 BIG-IP GTM Wide IP</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/f5networks/f5_modules">f5networks.f5_modules collection</a> (version 1.12.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install f5networks.f5_modules</code>.</p> <p>To use it in a playbook, specify: <code>f5networks.f5_modules.bigip_gtm_wide_ip</code>.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 1.0.0: </span>of f5networks.f5_modules</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#parameters" id="id2">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id3">Notes</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id5">Return Values</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Manages the F5 BIG-IP GTM (now BIG-IP DNS) Wide IP.</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="2">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="2">  <b>aliases</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>Specifies alternate domain names for the web site content you are load balancing.</div> <div>You can use the same wildcard characters for aliases as you can for actual Wide IP names.</div> </td> </tr> <tr> <td colspan="2">  <b>irules</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>List of rules to be applied.</div> <div>If you want to remove all existing iRules, specify a single empty value; <code>""</code>. See the documentation for an example.</div> </td> </tr> <tr> <td colspan="2">  <b>last_resort_pool</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Specifies which GTM pool for the system to use as the last resort pool for the Wide IP.</div> <div>The valid pools for this parameter are those with the <code>type</code> specified in this module.</div> </td> </tr> <tr> <td colspan="2">  <b>name</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>Wide IP name. This name must be formatted as a fully qualified domain name (FQDN). You can also use the alias <code>wide_ip</code> but this is deprecated and will be removed in a future Ansible version.</div> <div>
<br>aliases: wide_ip</div> </td> </tr> <tr> <td colspan="2">  <b>partition</b>  <div> <span>string</span> </div> </td> <td> <b>Default:</b><br><div>"Common"</div> </td> <td> <div>Device partition to manage resources on.</div> </td> </tr> <tr> <td colspan="2">  <b>persist_cidr_ipv4</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>Specifies a mask used to group IPv4 LDNS addresses. This feature allows one persistence record to be shared by LDNS addresses that match within this mask.</div> </td> </tr> <tr> <td colspan="2">  <b>persist_cidr_ipv6</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>Specifies a mask used to group IPv6 LDNS addresses. This feature allows one persistence record to be shared by LDNS addresses that match within this mask.</div> </td> </tr> <tr> <td colspan="2">  <b>persistence</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>When <code>yes</code>, ensures that when a local DNS makes repetitive requests on behalf of a client, the system reconnects the client to the same resource as previous requests.</div> <div>When <code>no</code>, ensures repetitive requests do not reconnect the client to the same resource.</div> </td> </tr> <tr> <td colspan="2">  <b>persistence_ttl</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>Specifies the time to maintain a connection between an local DNS and a particular virtual server.</div> </td> </tr> <tr> <td colspan="2">  <b>pool_lb_method</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>round-robin</li> <li>ratio</li> <li>topology</li> <li>global-availability</li> </ul> </td> <td> <div>Specifies the load balancing method used to select a pool in this wide IP. This setting is relevant only when multiple pools are configured for a Wide IP.</div> <div>
<br>aliases: lb_method</div> </td> </tr> <tr> <td colspan="2">  <b>pools</b>  <div> <span>list</span> / <span>elements=dictionary</span> </div> </td> <td> </td> <td> <div>The pools you want associated with the Wide IP.</div> <div>If <code>ratio</code> is not provided when creating a new Wide IP, it will default to 1.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>name</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The name of the pool to include.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>order</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>Order of the pool in relation to other pools attached to this Wide IP.</div> <div>Pool order is significant when the Global Availability load balancing method is used.</div> <div>When <code>order</code> is not provided, the module assigns it value of <code>0</code>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>ratio</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>Ratio for the pool.</div> <div>The system uses this number with the Ratio load balancing method.</div> <div>When <code>ratio</code> is not provided, the module assigns it value of <code>0</code>.</div> </td> </tr> <tr> <td colspan="2">  <b>provider</b>  <div> <span>dictionary</span> </div> <div> added in 1.0.0 of f5networks.f5_modules </div> </td> <td> </td> <td> <div>A dict object containing connection details.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>auth_provider</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Configures the auth provider for to obtain authentication tokens from the remote device.</div> <div>This option is really used when working with BIG-IQ devices.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>no_f5_teem</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>If <code>yes</code>, TEEM telemetry data is not sent to F5.</div> <div>You may omit this option by setting the environment variable <code>F5_TELEMETRY_OFF</code>.</div> <div>Previously used variable <code>F5_TEEM</code> is deprecated as its name was confusing.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>password</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The password for the user account used to connect to the BIG-IP.</div> <div>You may omit this option by setting the environment variable <code>F5_PASSWORD</code>.</div> <div>
<br>aliases: pass, pwd</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>server</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The BIG-IP host.</div> <div>You may omit this option by setting the environment variable <code>F5_SERVER</code>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>server_port</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>443</div> </td> <td> <div>The BIG-IP server port.</div> <div>You may omit this option by setting the environment variable <code>F5_SERVER_PORT</code>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>timeout</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>Specifies the timeout in seconds for communicating with the network device for either connecting or sending commands. If the timeout is exceeded before the operation is completed, the module will error.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>transport</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>rest</b> ←</div></li> </ul> </td> <td> <div>Configures the transport connection to use when connecting to the remote device.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>user</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The username to connect to the BIG-IP with. This user must have administrative privileges on the device.</div> <div>You may omit this option by setting the environment variable <code>F5_USER</code>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>validate_certs</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li><div>
<b>yes</b> ←</div></li> </ul> </td> <td> <div>If <code>no</code>, SSL certificates are not validated. Use this only on personally controlled sites using self-signed certificates.</div> <div>You may omit this option by setting the environment variable <code>F5_VALIDATE_CERTS</code>.</div> </td> </tr> <tr> <td colspan="2">  <b>state</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>present</b> ←</div></li> <li>absent</li> <li>disabled</li> <li>enabled</li> </ul> </td> <td> <div>When <code>present</code> or <code>enabled</code>, ensures the Wide IP exists and is enabled.</div> <div>When <code>absent</code>, ensures the Wide IP has been removed.</div> <div>When <code>disabled</code>, ensures the Wide IP exists and is disabled.</div> </td> </tr> <tr> <td colspan="2">  <b>type</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>a</li> <li>aaaa</li> <li>cname</li> <li>mx</li> <li>naptr</li> <li>srv</li> </ul> </td> <td> <div>Specifies the type of Wide IP. GTM Wide IPs need to be keyed by query type in addition to name, because pool members need different attributes depending on the response RDATA they are meant to supply.</div> </td> </tr> </table> <br>  <h2 id="notes">Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>For more information on using Ansible to manage F5 Networks devices see <a class="reference external" href="https://www.ansible.com/integrations/networks/f5">https://www.ansible.com/integrations/networks/f5</a>.</li> <li>Requires BIG-IP software version &gt;= 12.</li> <li>The F5 modules only manipulate the running configuration of the F5 product. To ensure that BIG-IP specific configuration persists to disk, be sure to include at least one task that uses the <a class="reference internal" href="bigip_config_module.html#ansible-collections-f5networks-f5-modules-bigip-config-module"><span class="std std-ref">f5networks.f5_modules.bigip_config</span></a> module to save the running configuration. Refer to the module’s documentation for the correct usage of the module to save your running configuration.</li> </ul> </div>   <h2 id="examples">Examples</h2> <pre data-language="yaml+jinja">- name: Set lb method
  bigip_gtm_wide_ip:
    pool_lb_method: round-robin
    name: my-wide-ip.example.com
    type: a
    provider:
      user: admin
      password: secret
      server: lb.mydomain.com
  delegate_to: localhost

- name: Add iRules to the Wide IP
  bigip_gtm_wide_ip:
    pool_lb_method: round-robin
    name: my-wide-ip.example.com
    type: a
    irules:
      - irule1
      - irule2
    provider:
      user: admin
      password: secret
      server: lb.mydomain.com
  delegate_to: localhost

- name: Remove one iRule from the Virtual Server
  bigip_gtm_wide_ip:
    pool_lb_method: round-robin
    name: my-wide-ip.example.com
    type: a
    irules:
      - irule1
    provider:
      user: admin
      password: secret
      server: lb.mydomain.com
  delegate_to: localhost

- name: Remove all iRules from the Virtual Server
  bigip_gtm_wide_ip:
    pool_lb_method: round-robin
    name: my-wide-ip.example.com
    type: a
    irules: ""
    provider:
      user: admin
      password: secret
      server: lb.mydomain.com
  delegate_to: localhost

- name: Assign a pool with ratio to the Wide IP
  bigip_gtm_wide_ip:
    pool_lb_method: round-robin
    name: my-wide-ip.example.com
    type: a
    pools:
      - name: pool1
        ratio: 100
        order: 2
      - name: pool1
        ratio: 100
        order: 1
    provider:
      user: admin
      password: secret
      server: lb.mydomain.com
  delegate_to: localhost

- name: Assign a pool with persistence to the Wide IP
  bigip_gtm_wide_ip:
    pool_lb_method: round-robin
    name: my-wide-ip.example.com
    type: a
    pools:
      - name: pool1
        persistence: yes
        persist_cidr_ipv4: 24
        persist_cidr_ipv6: 120
        persistence_ttl: 3500
    provider:
      user: admin
      password: secret
      server: lb.mydomain.com
  delegate_to: localhost
</pre>   <h2 id="return-values">Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values.html#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="documentation-table"> <tr> <th colspan="1">Key</th> <th>Returned</th> <th width="100%">Description</th> </tr> <tr> <td colspan="1">  <b>aliases</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td>changed</td> <td> <div>Aliases set on the Wide IP.</div> <br> <div><b>Sample:</b></div> <div>['alias1.foo.com', '*.wildcard.domain']</div> </td> </tr> <tr> <td colspan="1">  <b>irules</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td>changed</td> <td> <div>iRules set on the Wide IP.</div> <br> <div><b>Sample:</b></div> <div>['/Common/irule1', '/Common/irule2']</div> </td> </tr> <tr> <td colspan="1">  <b>lb_method</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>The new load balancing method used by the Wide IP.</div> <br> <div><b>Sample:</b></div> <div>topology</div> </td> </tr> <tr> <td colspan="1">  <b>persist_cidr_ipv4</b>  <div> <span>integer</span> </div> </td> <td>changed</td> <td> <div>Specifies a mask used to group IPv4 LDNS addresses.</div> <br> <div><b>Sample:</b></div> <div>32</div> </td> </tr> <tr> <td colspan="1">  <b>persist_cidr_ipv6</b>  <div> <span>integer</span> </div> </td> <td>changed</td> <td> <div>Specifies a mask used to group IPv6 LDNS addresses.</div> <br> <div><b>Sample:</b></div> <div>128</div> </td> </tr> <tr> <td colspan="1">  <b>persistence</b>  <div> <span>boolean</span> </div> </td> <td>changed</td> <td> <div>Whether pool connections will be persisted.</div> <br> </td> </tr> <tr> <td colspan="1">  <b>persistence_ttl</b>  <div> <span>integer</span> </div> </td> <td>changed</td> <td> <div>Specifies the persistence TTL between an local DNS and a particular virtual server.</div> <br> <div><b>Sample:</b></div> <div>3600</div> </td> </tr> <tr> <td colspan="1">  <b>state</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>The new state of the Wide IP.</div> <br> <div><b>Sample:</b></div> <div>disabled</div> </td> </tr> </table> <br><br> <h3 id="authors">Authors</h3> <ul class="simple"> <li>Tim Rupp (@caphrim007)</li> <li>Wojciech Wypior (@wojtek0806)</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2021 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/f5networks/f5_modules/bigip_gtm_wide_ip_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/f5networks/f5_modules/bigip_gtm_wide_ip_module.html</a>
  </p>
</div>
