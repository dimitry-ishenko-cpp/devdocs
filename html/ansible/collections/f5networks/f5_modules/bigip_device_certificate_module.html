<h1 id="f5networks-f5-modules-bigip-device-certificate-manage-self-signed-device-certificates">f5networks.f5_modules.bigip_device_certificate – Manage self-signed device certificates</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/f5networks/f5_modules">f5networks.f5_modules collection</a> (version 1.12.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install f5networks.f5_modules</code>.</p> <p>To use it in a playbook, specify: <code>f5networks.f5_modules.bigip_device_certificate</code>.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 1.0.0: </span>of f5networks.f5_modules</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#parameters" id="id2">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id3">Notes</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id5">Return Values</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Module used to create and/or renew self-signed device certificates for BIG-IP.</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="2">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="2">  <b>add_to_trusted</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Specified if the certificate should be added to the trusted client and server certificate files.</div> </td> </tr> <tr> <td colspan="2">  <b>cert_name</b>  <div> <span>string</span> </div> </td> <td> <b>Default:</b><br><div>"server.crt"</div> </td> <td> <div>Specifies the full name of the certificate file.</div> <div>If the name is not default <code>server.crt</code>, the module will configure <code>httpd</code> to use them prior to restarting the <code>httpd</code> daemon.</div> </td> </tr> <tr> <td colspan="2">  <b>days_valid</b>  <div> <span>integer</span> / <span>required</span> </div> </td> <td> </td> <td> <div>Specifies the interval for which the self-signed certificate is valid.</div> <div>The maximum value is 25 years: <code>9125</code> days</div> </td> </tr> <tr> <td colspan="2">  <b>force</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>When <code>yes</code>, will update or overwrite the existing certificate when it is not expired on the device.</div> <div>When <code>no</code>, the certificate will only be updated/overwritten if expired.</div> <div>Generally should be <code>yes</code> only in cases where you need to update certificate that is about to expire.</div> <div>This option is also needed when generating a new certificate to replace non-expired one.</div> </td> </tr> <tr> <td colspan="2">  <b>issuer</b>  <div> <span>dictionary</span> </div> </td> <td> </td> <td> <div>Certificate properties, required when generating new certificates.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>common_name</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Specifies the Common Name attribute for the certificate.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>country</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Specifies the Country name attribute for the certificate.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>division</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Specifies the department name attribute for the certificate.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>email</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Specifies the email address of the domain administrator.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>locality</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Specifies the city or town name for the certificate.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>organization</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Specifies the Organization attribute for the certificate.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>state</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Specifies the State or Province attribute for the certificate.</div> </td> </tr> <tr> <td colspan="2">  <b>key_name</b>  <div> <span>string</span> </div> </td> <td> <b>Default:</b><br><div>"server.key"</div> </td> <td> <div>Specifies the full name of the key file.</div> <div>If the name is not default <code>server.key</code>, the module will configure <code>httpd</code> to use them prior to restarting the <code>httpd</code> daemon.</div> </td> </tr> <tr> <td colspan="2">  <b>key_size</b>  <div> <span>integer</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>512</li> <li>1024</li> <li>2048</li> <li>4096</li> </ul> <b>Default:</b><br><div>2048</div> </td> <td> <div>Specifies the desired key size in bits.</div> <div>Mandatory option when generating a new certificate.</div> </td> </tr> <tr> <td colspan="2">  <b>new_cert</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Specified if the module should generate a new certificate.</div> <div>When <code>yes</code>, the device certificate and key will be replaced.</div> </td> </tr> <tr> <td colspan="2">  <b>provider</b>  <div> <span>dictionary</span> </div> <div> added in 1.0.0 of f5networks.f5_modules </div> </td> <td> </td> <td> <div>A dict object containing connection details.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>auth_provider</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Configures the auth provider for to obtain authentication tokens from the remote device.</div> <div>This option is really used when working with BIG-IQ devices.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>no_f5_teem</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>If <code>yes</code>, TEEM telemetry data is not sent to F5.</div> <div>You may omit this option by setting the environment variable <code>F5_TELEMETRY_OFF</code>.</div> <div>Previously used variable <code>F5_TEEM</code> is deprecated as its name was confusing.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>password</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The password for the user account used to connect to the BIG-IP.</div> <div>You may omit this option by setting the environment variable <code>F5_PASSWORD</code>.</div> <div>
<br>aliases: pass, pwd</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>server</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The BIG-IP host.</div> <div>You may omit this option by setting the environment variable <code>F5_SERVER</code>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>server_port</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>22</div> </td> <td> <div>The BIG-IP server port.</div> <div>You may omit this option by setting the environment variable <code>F5_SERVER_PORT</code>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>ssh_keyfile</b>  <div> <span>path</span> </div> </td> <td> </td> <td> <div>Specifies the SSH keyfile to use to authenticate the connection to the remote device. This argument is only used for <em>cli</em> transports.</div> <div>You may omit this option by setting the environment variable <code>ANSIBLE_NET_SSH_KEYFILE</code>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>timeout</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>Specifies the timeout in seconds for communicating with the network device for either connecting or sending commands. If the timeout is exceeded before the operation is completed, the module will error.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>transport</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>cli</b> ←</div></li> </ul> </td> <td> <div>Configures the transport connection to use when connecting to the remote device.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>user</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The username to connect to the BIG-IP with. This user must have administrative privileges on the device.</div> <div>You may omit this option by setting the environment variable <code>F5_USER</code>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>validate_certs</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li><div>
<b>yes</b> ←</div></li> </ul> </td> <td> <div>If <code>no</code>, SSL certificates are not validated. Use this only on personally controlled sites using self-signed certificates.</div> <div>You may omit this option by setting the environment variable <code>F5_VALIDATE_CERTS</code>.</div> </td> </tr> </table> <br>  <h2 id="notes">Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>For more information on using Ansible to manage F5 Networks devices see <a class="reference external" href="https://www.ansible.com/integrations/networks/f5">https://www.ansible.com/integrations/networks/f5</a>.</li> <li>Requires BIG-IP software version &gt;= 12.</li> <li>The F5 modules only manipulate the running configuration of the F5 product. To ensure that BIG-IP specific configuration persists to disk, be sure to include at least one task that uses the <a class="reference internal" href="bigip_config_module.html#ansible-collections-f5networks-f5-modules-bigip-config-module"><span class="std std-ref">f5networks.f5_modules.bigip_config</span></a> module to save the running configuration. Refer to the module’s documentation for the correct usage of the module to save your running configuration.</li> </ul> </div>   <h2 id="examples">Examples</h2> <pre data-language="yaml+jinja">- name: Update expired certificate
  bigip_device_certificate:
    days_valid: 365
    provider:
      password: secret
      server: lb.mydomain.com
      user: admin
      transport: cli
      server_port: 22
  delegate_to: localhost

- name: Update expired certificate non-default names
  bigip_device_certificate:
    days_valid: 60
    cert_name: custom.crt
    key_name: custom.key
    provider:
      password: secret
      server: lb.mydomain.com
      user: admin
      transport: cli
      server_port: 22
  delegate_to: localhost

- name: Force update not expired certificate
  bigip_device_certificate:
    days_valid: 365
    force: yes
    provider:
      password: secret
      server: lb.mydomain.com
      user: admin
      transport: cli
      server_port: 22
  delegate_to: localhost

- name: Create a new certificate to replace expired certificate
  bigip_device_certificate:
    days_valid: 365
    new_cert: yes
    issuer:
      country: US
      state: WA
      common_name: foobar.foo.local
    provider:
      password: secret
      server: lb.mydomain.com
      user: admin
      transport: cli
      server_port: 22
  delegate_to: localhost

- name: Force create a new custom named certificate to replace not expired certificate
  bigip_device_certificate:
    days_valid: 365
    cert_name: custom.crt
    key_name: custom.key
    new_cert: yes
    force: yes
    issuer:
      country: US
      state: WA
      common_name: foobar.foo.local
    key_size: 2048
    provider:
      password: secret
      server: lb.mydomain.com
      user: admin
      transport: cli
      server_port: 22
  delegate_to: localhost
</pre>   <h2 id="return-values">Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values.html#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="documentation-table"> <tr> <th colspan="2">Key</th> <th>Returned</th> <th width="100%">Description</th> </tr> <tr> <td colspan="2">  <b>cert_name</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>The full name of the certificate file.</div> <br> <div><b>Sample:</b></div> <div>common.crt</div> </td> </tr> <tr> <td colspan="2">  <b>days_valid</b>  <div> <span>integer</span> </div> </td> <td>changed</td> <td> <div>The interval for which the self-signed certificate is valid.</div> <br> <div><b>Sample:</b></div> <div>365</div> </td> </tr> <tr> <td colspan="2">  <b>issuer</b>  <div> <span>complex</span> </div> </td> <td>changed</td> <td> <div>Specifies certificate properties.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>common_name</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>The Common Name attribute of the certificate.</div> <br> <div><b>Sample:</b></div> <div>foo.bar.local</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>country</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>The Country name attribute of the certificate.</div> <br> <div><b>Sample:</b></div> <div>US</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>division</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>The department name attribute of the certificate.</div> <br> <div><b>Sample:</b></div> <div>IT</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>email</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>The domain administrator's email address.</div> <br> <div><b>Sample:</b></div> <div>admin@foo.bar.local</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>locality</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>The city or town name attribute of the certificate.</div> <br> <div><b>Sample:</b></div> <div>Seattle</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>organization</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>The Organization attribute of the certificate.</div> <br> <div><b>Sample:</b></div> <div>F5</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>state</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>The State or Province attribute of the certificate.</div> <br> <div><b>Sample:</b></div> <div>WA</div> </td> </tr> <tr> <td colspan="2">  <b>key_name</b>  <div> <span>string</span> </div> </td> <td>changed</td> <td> <div>The full name of the key file.</div> <br> <div><b>Sample:</b></div> <div>common.key</div> </td> </tr> <tr> <td colspan="2">  <b>key_size</b>  <div> <span>integer</span> </div> </td> <td>changed</td> <td> <div>The desired key size in bits.</div> <br> <div><b>Sample:</b></div> <div>2048</div> </td> </tr> </table> <br><br> <h3 id="authors">Authors</h3> <ul class="simple"> <li>Wojciech Wypior (@wojtek0806)</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2021 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/f5networks/f5_modules/bigip_device_certificate_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/f5networks/f5_modules/bigip_device_certificate_module.html</a>
  </p>
</div>
