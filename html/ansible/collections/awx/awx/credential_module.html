<section id="awx-awx-credential-module-create-update-or-destroy-automation-platform-controller-credential"> <h1>awx.awx.credential module – create, update, or destroy Automation Platform Controller credential.</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module is part of the <a class="reference external" href="https://galaxy.ansible.com/ui/repo/published/awx/awx/">awx.awx collection</a> (version 24.6.1).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install awx.awx</code>.</p> <p>To use it in a playbook, specify: <code>awx.awx.credential</code>.</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#parameters" id="id2">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id3">Notes</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> </ul>  <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>Create, update, or destroy Automation Platform Controller credentials. See <a class="reference external" href="https://www.ansible.com/tower">https://www.ansible.com/tower</a> for an overview.</li> </ul> <p>Aliases: tower_credential</p> </section> <section id="parameters"> <h2>Parameters</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-awx-awx-credential-module-parameter-tower-config-file"><strong id="ansible-collections-awx-awx-credential-module-parameter-controller-config-file">controller_config_file</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: tower_config_file</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">path</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Path to the controller config file.</p> <p>If provided, the other locations for config files will not be considered.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-awx-awx-credential-module-parameter-tower-host"><strong id="ansible-collections-awx-awx-credential-module-parameter-controller-host">controller_host</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: tower_host</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>URL to your Automation Platform Controller instance.</p> <p>If value not set, will try environment variable <code>CONTROLLER_HOST</code> and then config files</p> <p>If value not specified by any means, the value of <code>127.0.0.1</code> will be used</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-awx-awx-credential-module-parameter-tower-oauthtoken"><strong id="ansible-collections-awx-awx-credential-module-parameter-controller-oauthtoken">controller_oauthtoken</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: tower_oauthtoken</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">any</span></p> <p><em class="ansible-option-versionadded">added in awx.awx 3.7.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>The OAuth token to use.</p> <p>This value can be in one of two formats.</p> <p>A string which is the token itself. (i.e. bqV5txm97wqJqtkxlMkhQz0pKhRMMX)</p> <p>A dictionary structure as returned by the token module.</p> <p>If value not set, will try environment variable <code>CONTROLLER_OAUTH_TOKEN</code> and then config files</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-awx-awx-credential-module-parameter-tower-password"><strong id="ansible-collections-awx-awx-credential-module-parameter-controller-password">controller_password</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: tower_password</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Password for your controller instance.</p> <p>If value not set, will try environment variable <code>CONTROLLER_PASSWORD</code> and then config files</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-awx-awx-credential-module-parameter-tower-username"><strong id="ansible-collections-awx-awx-credential-module-parameter-controller-username">controller_username</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: tower_username</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Username for your controller instance.</p> <p>If value not set, will try environment variable <code>CONTROLLER_USERNAME</code> and then config files</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-awx-awx-credential-module-parameter-copy-from"><strong>copy_from</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Name or id to copy the credential from.</p> <p>This will copy an existing credential and change any parameters supplied.</p> <p>The new credential name will be the one provided in the name parameter.</p> <p>The organization parameter is not used in this, to facilitate copy from one organization to another.</p> <p>Provide the id or use the lookup plugin to provide the id if multiple credentials share the same name.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-awx-awx-credential-module-parameter-credential-type"><strong>credential_type</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The credential type being created.</p> <p>Can be a built-in credential type such as “Machine”, or a custom credential type such as “My Credential Type”</p> <p>Choices include Amazon Web Services, Ansible Galaxy/Automation Hub API Token, Centrify Vault Credential Provider Lookup, Container Registry, CyberArk Central Credential Provider Lookup, CyberArk Conjur Secret Lookup, Google Compute Engine, GitHub Personal Access Token, GitLab Personal Access Token, GPG Public Key, HashiCorp Vault Secret Lookup, HashiCorp Vault Signed SSH, Insights, Machine, Microsoft Azure Key Vault, Microsoft Azure Resource Manager, Network, OpenShift or Kubernetes API Bearer Token, OpenStack, Red Hat Ansible Automation Platform, Red Hat Satellite 6, Red Hat Virtualization, Source Control, Thycotic DevOps Secrets Vault, Thycotic Secret Server, Vault, VMware vCenter, or a custom credential type</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-awx-awx-credential-module-parameter-description"><strong>description</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The description to use for the credential.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-awx-awx-credential-module-parameter-inputs"><strong>inputs</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Credential inputs where the keys are var names used in templating. Refer to the Automation Platform Controller documentation for example syntax.</p> <p>authorize (use this for net type)</p> <p>authorize_password (password for net credentials that require authorize)</p> <p>client (client or application ID for azure_rm type)</p> <p>security_token (STS token for aws type)</p> <p>secret (secret token for azure_rm type)</p> <p>tenant (tenant ID for azure_rm type)</p> <p>subscription (subscription ID for azure_rm type)</p> <p>domain (domain for openstack type)</p> <p>become_method (become method to use for privilege escalation; some examples are “None”, “sudo”, “su”, “pbrun”)</p> <p>become_username (become username; use “ASK” and launch job to be prompted)</p> <p>become_password (become password; use “ASK” and launch job to be prompted)</p> <p>vault_password (the vault password; use “ASK” and launch job to be prompted)</p> <p>project (project that should use this credential for GCP)</p> <p>host (the host for this credential)</p> <p>username (the username for this credential; ``access_key`` for AWS)</p> <p>password (the password for this credential; ``secret_key`` for AWS, ``api_key`` for RAX)</p> <p>ssh_key_data (SSH private key content; to extract the content from a file path, use the lookup function (see examples))</p> <p>vault_id (the vault identifier; this parameter is only valid if <code>kind</code> is specified as <code>vault</code>.)</p> <p>ssh_key_unlock (unlock password for ssh_key; use “ASK” and launch job to be prompted)</p> <p>gpg_public_key (GPG Public Key used for signature validation)</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-awx-awx-credential-module-parameter-name"><strong>name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The name to use for the credential.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-awx-awx-credential-module-parameter-new-name"><strong>new_name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Setting this option will change the existing name (looked up via the name field.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-awx-awx-credential-module-parameter-organization"><strong>organization</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Organization name, ID, or named URL that should own the credential.</p> <p>This parameter is mutually exclusive with <code>team</code> and <code>user</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-awx-awx-credential-module-parameter-request-timeout"><strong>request_timeout</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">float</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify the timeout Ansible should use in requests to the controller host.</p> <p>Defaults to 10s, but this is handled by the shared module_utils code</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-awx-awx-credential-module-parameter-state"><strong>state</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Desired state of the resource. <code>exists</code> will not modify the resource if it is present.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"present"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"absent"</code></li> <li><code>"exists"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-awx-awx-credential-module-parameter-team"><strong>team</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Team name, ID, or named URL that should own this credential.</p> <p>This parameter is mutually exclusive with <code>organization</code> and <code>user</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-awx-awx-credential-module-parameter-update-secrets"><strong>update_secrets</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p><code>true</code> will always update encrypted values.</p> <p><code>false</code> will only update encrypted values if a change is absolutely known to be needed.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-awx-awx-credential-module-parameter-user"><strong>user</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>User name, ID, or named URL that should own this credential.</p> <p>This parameter is mutually exclusive with <code>organization</code> and <code>team</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-awx-awx-credential-module-parameter-validate-certs"><strong id="ansible-collections-awx-awx-credential-module-parameter-tower-verify-ssl">validate_certs</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: tower_verify_ssl</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Whether to allow insecure connections to AWX.</p> <p>If <code>no</code>, SSL certificates will not be validated.</p> <p>This should only be used on personally controlled sites using self-signed certificates.</p> <p>If value not set, will try environment variable <code>CONTROLLER_VERIFY_SSL</code> and then config files</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr>  </table> </section> <section id="notes"> <h2>Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>Values `inputs` and the other deprecated fields (such as `tenant`) are replacements of existing values. See the last 4 examples for details.</li> <li>If no <em>config_file</em> is provided we will attempt to use the tower-cli library defaults to find your host information.</li> <li>
<em>config_file</em> should be in the following format host=hostname username=username password=password</li> </ul> </div> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja">- name: Add machine credential
  credential:
    name: Team Name
    description: Team Description
    organization: test-org
    credential_type: Machine
    state: present
    controller_config_file: "~/tower_cli.cfg"

- name: Create a valid SCM credential from a private_key file
  credential:
    name: SCM Credential
    organization: Default
    state: present
    credential_type: Source Control
    inputs:
      username: joe
      password: secret
      ssh_key_data: "{{ lookup('file', '/tmp/id_rsa') }}"
      ssh_key_unlock: "passphrase"

- name: Fetch private key
  slurp:
    src: '$HOME/.ssh/aws-private.pem'
  register: aws_ssh_key

- name: Add Credential
  credential:
    name: Workshop Credential
    credential_type: Machine
    organization: Default
    inputs:
      ssh_key_data: "{{ aws_ssh_key['content'] | b64decode }}"
  run_once: true
  delegate_to: localhost

- name: Add Credential with Custom Credential Type
  credential:
    name: Workshop Credential
    credential_type: MyCloudCredential
    organization: Default
    controller_username: admin
    controller_password: ansible
    controller_host: https://localhost

- name: Create a Vault credential (example for notes)
  credential:
    name: Example password
    credential_type: Vault
    organization: Default
    inputs:
      vault_password: 'hello'
      vault_id: 'My ID'

- name: Bad password update (will replace vault_id)
  credential:
    name: Example password
    credential_type: Vault
    organization: Default
    inputs:
      vault_password: 'new_password'

- name: Another bad password update (will replace vault_id)
  credential:
    name: Example password
    credential_type: Vault
    organization: Default
    vault_password: 'new_password'

- name: A safe way to update a password and keep vault_id
  credential:
    name: Example password
    credential_type: Vault
    organization: Default
    inputs:
      vault_password: 'new_password'
      vault_id: 'My ID'

- name: Copy Credential
  credential:
    name: Copy password
    copy_from: Example password
    credential_type: Vault
    organization: Foo
</pre> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Wayne Witzel III (@wwitzel3)</li> </ul> </section> <section id="collection-links"> <h3>Collection links</h3> <ul class="ansible-links"> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible/awx/issues?q=is%3Aissue+label%3Acomponent%3Aawx_collection" rel="noopener external" target="_blank">Issue Tracker</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://www.ansible.com/" rel="noopener external" target="_blank">Homepage</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible/awx" rel="noopener external" target="_blank">Repository (Sources)</a></span></li> </ul> </section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2024 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/awx/awx/credential_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/awx/awx/credential_module.html</a>
  </p>
</div>
