<h1 id="azure-azcollection-azure-rm-adapplication-manage-azure-active-directory-application">azure.azcollection.azure_rm_adapplication – Manage Azure Active Directory application</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/azure/azcollection">azure.azcollection collection</a> (version 1.10.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install azure.azcollection</code>.</p> <p>To use it in a playbook, specify: <code>azure.azcollection.azure_rm_adapplication</code>.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 1.6.0: </span>of azure.azcollection</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id4">Notes</a></li> <li><a class="reference internal" href="#see-also" id="id5">See Also</a></li> <li><a class="reference internal" href="#examples" id="id6">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id7">Return Values</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Manage Azure Active Directory application.</li> </ul>   <h2 id="requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>python &gt;= 2.7</li> <li>The host that executes this module must have the azure.azcollection collection installed via galaxy</li> <li>All python packages listed in collection’s requirements-azure.txt must be installed via pip on the host that executes modules from azure.azcollection</li> <li>Full installation instructions may be found <a class="reference external" href="https://galaxy.ansible.com/azure/azcollection">https://galaxy.ansible.com/azure/azcollection</a>
</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="3">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="3">  <b>ad_user</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Active Directory username. Use when authenticating with an Active Directory user rather than service principal.</div> </td> </tr> <tr> <td colspan="3">  <b>adfs_authority_url</b>  <div> <span>string</span> </div> <div> added in 0.0.1 of azure.azcollection </div> </td> <td> </td> <td> <div>Azure AD authority url. Use when authenticating with Username/password, and has your own ADFS authority.</div> </td> </tr> <tr> <td colspan="3">  <b>allow_guests_sign_in</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>A property on the application to indicate if the application accepts other IDPs or not or partially accepts.</div> </td> </tr> <tr> <td colspan="3">  <b>api_profile</b>  <div> <span>string</span> </div> <div> added in 0.0.1 of azure.azcollection </div> </td> <td> <b>Default:</b><br><div>"latest"</div> </td> <td> <div>Selects an API profile to use when communicating with Azure services. Default value of <code>latest</code> is appropriate for public clouds; future values will allow use with Azure Stack.</div> </td> </tr> <tr> <td colspan="3">  <b>app_id</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Application ID.</div> </td> </tr> <tr> <td colspan="3">  <b>app_roles</b>  <div> <span>list</span> / <span>elements=dictionary</span> </div> </td> <td> </td> <td> <div>Declare the roles you want to associate with your application.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="2">  <b>allowed_member_types</b>  <div> <span>list</span> / <span>elements=string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>Specifies whether this app role can be assigned to users and groups <em>allowed_member_types=User</em>.</div> <div>To other application's <em>allowed_member_types=Application</em>.</div> <div>Or both <code>User</code> and <code>Appplication</code>.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="2">  <b>description</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The description for the app role.</div> <div>This is displayed when the app role is being assigned.</div> <div>if the app role functions as an application permission, during consent experiences.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="2">  <b>display_name</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Display name for the permission that appears in the app role assignment and consent experiences.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="2">  <b>is_enabled</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>When creating or updating an app role, this must be set to true (which is the default).</div> <div>To delete a role, this must first be set to false.</div> <div>At that point, in a subsequent call, this role may be removed.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="2">  <b>value</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Specifies the value to include in the roles claim in ID tokens and access tokens authenticating an assigned user or service principal.</div> <div>Must not exceed 120 characters in length.</div> <div>Allowed characters include !</div> <div>Any other character, including the space character, are not allowed.</div> </td> </tr> <tr> <td colspan="3">  <b>auth_source</b>  <div> <span>string</span> </div> <div> added in 0.0.1 of azure.azcollection </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>auto</b> ←</div></li> <li>cli</li> <li>credential_file</li> <li>env</li> <li>msi</li> </ul> </td> <td> <div>Controls the source of the credentials to use for authentication.</div> <div>Can also be set via the <code>ANSIBLE_AZURE_AUTH_SOURCE</code> environment variable.</div> <div>When set to <code>auto</code> (the default) the precedence is module parameters -&gt; <code>env</code> -&gt; <code>credential_file</code> -&gt; <code>cli</code>.</div> <div>When set to <code>env</code>, the credentials will be read from the environment variables</div> <div>When set to <code>credential_file</code>, it will read the profile from <code>~/.azure/credentials</code>.</div> <div>When set to <code>cli</code>, the credentials will be sources from the Azure CLI profile. <code>subscription_id</code> or the environment variable <code>AZURE_SUBSCRIPTION_ID</code> can be used to identify the subscription ID if more than one is present otherwise the default az cli subscription is used.</div> <div>When set to <code>msi</code>, the host machine must be an azure resource with an enabled MSI extension. <code>subscription_id</code> or the environment variable <code>AZURE_SUBSCRIPTION_ID</code> can be used to identify the subscription ID if the resource is granted access to more than one subscription, otherwise the first subscription is chosen.</div> <div>The <code>msi</code> was added in Ansible 2.6.</div> </td> </tr> <tr> <td colspan="3">  <b>available_to_other_tenants</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>The application can be used from any Azure AD tenants.</div> </td> </tr> <tr> <td colspan="3">  <b>cert_validation_mode</b>  <div> <span>string</span> </div> <div> added in 0.0.1 of azure.azcollection </div> </td> <td> <ul>
<b>Choices:</b> <li>ignore</li> <li>validate</li> </ul> </td> <td> <div>Controls the certificate validation behavior for Azure endpoints. By default, all modules will validate the server certificate, but when an HTTPS proxy is in use, or against Azure Stack, it may be necessary to disable this behavior by passing <code>ignore</code>. Can also be set via credential file profile or the <code>AZURE_CERT_VALIDATION</code> environment variable.</div> </td> </tr> <tr> <td colspan="3">  <b>client_id</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Azure client ID. Use when authenticating with a Service Principal.</div> </td> </tr> <tr> <td colspan="3">  <b>cloud_environment</b>  <div> <span>string</span> </div> <div> added in 0.0.1 of azure.azcollection </div> </td> <td> <b>Default:</b><br><div>"AzureCloud"</div> </td> <td> <div>For cloud environments other than the US public cloud, the environment name (as defined by Azure Python SDK, eg, <code>AzureChinaCloud</code>, <code>AzureUSGovernment</code>), or a metadata discovery endpoint URL (required for Azure Stack). Can also be set via credential file profile or the <code>AZURE_CLOUD_ENVIRONMENT</code> environment variable.</div> </td> </tr> <tr> <td colspan="3">  <b>credential_description</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The description of the password.</div> </td> </tr> <tr> <td colspan="3">  <b>display_name</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The display name of the application.</div> </td> </tr> <tr> <td colspan="3">  <b>end_date</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Date or datetime after which credentials expire(e.g. '2017-12-31').</div> <div>Default value is one year after current time.</div> </td> </tr> <tr> <td colspan="3">  <b>homepage</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The url where users can sign in and use your app.</div> </td> </tr> <tr> <td colspan="3">  <b>identifier_uris</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>Space-separated unique URIs that Azure AD can use for this app.</div> </td> </tr> <tr> <td colspan="3">  <b>key_type</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>AsymmetricX509Cert</b> ←</div></li> <li>Password</li> <li>Symmetric</li> </ul> </td> <td> <div>The type of the key credentials associated with the application.</div> </td> </tr> <tr> <td colspan="3">  <b>key_usage</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>Sign</li> <li><div>
<b>Verify</b> ←</div></li> </ul> </td> <td> <div>The usage of the key credentials associated with the application.</div> </td> </tr> <tr> <td colspan="3">  <b>key_value</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The value for the key credentials associated with the application.</div> </td> </tr> <tr> <td colspan="3">  <b>log_mode</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Parent argument.</div> </td> </tr> <tr> <td colspan="3">  <b>log_path</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Parent argument.</div> </td> </tr> <tr> <td colspan="3">  <b>native_app</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>An application which can be installed on a user's device or computer.</div> </td> </tr> <tr> <td colspan="3">  <b>oauth2_allow_implicit_flow</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Whether to allow implicit grant flow for OAuth2.</div> </td> </tr> <tr> <td colspan="3">  <b>optional_claims</b>  <div> <span>list</span> / <span>elements=dictionary</span> </div> </td> <td> </td> <td> <div>Declare the optional claims for the application.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="2">  <b>additional_properties</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Additional properties of the claim.</div> <div>If a property exists in this collection, it modifies the behavior of the optional claim specified in the name property.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="2">  <b>essential</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>If the value is true, the claim specified by the client is necessary to ensure a smooth authorization experience for the specific task requested by the end user.</div> <div>The default value is false.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="2">  <b>name</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The name of the optional claim.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="2">  <b>source</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The source (directory object) of the claim.</div> <div>There are predefined claims and user-defined claims from extension properties.</div> <div>If the source value is null, the claim is a predefined optional claim.</div> <div>If the source value is user, the value in the name property is the extension property from the user object.</div> </td> </tr> <tr> <td colspan="3">  <b>password</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>App password, aka 'client secret'.</div> </td> </tr> <tr> <td colspan="3">  <b>profile</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Security profile found in ~/.azure/credentials file.</div> </td> </tr> <tr> <td colspan="3">  <b>reply_urls</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>Space-separated URIs to which Azure AD will redirect in response to an OAuth 2.0 request.</div> <div>The value does not need to be a physical endpoint, but must be a valid URI.</div> </td> </tr> <tr> <td colspan="3">  <b>required_resource_accesses</b>  <div> <span>list</span> / <span>elements=dictionary</span> </div> </td> <td> </td> <td> <div>Resource scopes and roles the application requires access to.</div> <div>Should be in manifest json format.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="2">  <b>resource_access</b>  <div> <span>list</span> / <span>elements=dictionary</span> </div> </td> <td> </td> <td> <div>The description of the app role.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td class="elbow-placeholder"></td> <td colspan="1">  <b>id</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The unique identifier for one of the oauth2PermissionScopes or appRole instances that the resource application exposes.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td class="elbow-placeholder"></td> <td colspan="1">  <b>type</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Specifies whether the id property references an oauth2PermissionScopes or an appRole.</div> <div>Possible values are Scope or Role.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="2">  <b>resource_app_id</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The unique identifier for the resource that the application requires access to.</div> <div>This should be equal to the appId declared on the target resource application.</div> </td> </tr> <tr> <td colspan="3">  <b>secret</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Azure client secret. Use when authenticating with a Service Principal.</div> </td> </tr> <tr> <td colspan="3">  <b>start_date</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Date or datetime at which credentials become valid, such as '2017-01-01'.</div> <div>Default value is current time.</div> </td> </tr> <tr> <td colspan="3">  <b>state</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>absent</li> <li><div>
<b>present</b> ←</div></li> </ul> </td> <td> <div>Assert the state of Active Dirctory service principal.</div> <div>Use <code>present</code> to create or update a Password and use <code>absent</code> to delete.</div> </td> </tr> <tr> <td colspan="3">  <b>subscription_id</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Your Azure subscription Id.</div> </td> </tr> <tr> <td colspan="3">  <b>tenant</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The tenant ID.</div> </td> </tr> </table> <br>  <h2 id="notes">Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>For authentication with Azure you can pass parameters, set environment variables, use a profile stored in ~/.azure/credentials, or log in before you run your tasks or playbook with <code>az login</code>.</li> <li>Authentication is also possible using a service principal or Active Directory user.</li> <li>To authenticate via service principal, pass subscription_id, client_id, secret and tenant or set environment variables AZURE_SUBSCRIPTION_ID, AZURE_CLIENT_ID, AZURE_SECRET and AZURE_TENANT.</li> <li>To authenticate via Active Directory user, pass ad_user and password, or set AZURE_AD_USER and AZURE_PASSWORD in the environment.</li> <li>Alternatively, credentials can be stored in ~/.azure/credentials. This is an ini file containing a [default] section and the following keys: subscription_id, client_id, secret and tenant or subscription_id, ad_user and password. It is also possible to add additional profiles. Specify the profile by passing profile or setting AZURE_PROFILE in the environment.</li> </ul> </div>   <h2 id="see-also">See Also</h2> <div class="admonition seealso"> <p class="admonition-title">See also</p> <dl class="simple"> <dt><a class="reference external" href="https://docs.microsoft.com/en-us/cli/azure/authenticate-azure-cli?view=azure-cli-latest">Sign in with Azure CLI</a></dt>
<dd>
<p>How to authenticate using the <code>az login</code> command.</p> </dd> </dl> </div>   <h2 id="examples">Examples</h2> <pre data-language="yaml+jinja">- name: Create ad application
  azure_rm_adapplication:
    tenant: "{{ tenant_id }}"
    display_name: "{{ display_name }}"

- name: Create application with more parameter
  azure_rm_adapplication:
    tenant: "{{ tenant_id }}"
    display_name: "{{ display_name }}"
    available_to_other_tenants: False
    credential_description: "for test"
    end_date: 2021-10-01
    start_date: 2021-05-18
    identifier_uris: fredtest02.com

- name: delete ad application
  azure_rm_adapplication:
    tenant: "{{ tenant_id }}"
    app_id: "{{ app_id }}"
    state: absent
</pre>   <h2 id="return-values">Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values.html#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="documentation-table"> <tr> <th colspan="2">Key</th> <th>Returned</th> <th width="100%">Description</th> </tr> <tr> <td colspan="2">  <b>output</b>  <div> <span>complex</span> </div> </td> <td>awalys</td> <td> <div>Current state of the adapplication.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>app_id</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>The application ID.</div> <br> <div><b>Sample:</b></div> <div>xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>available_to_other_tenants</b>  <div> <span>boolean</span> </div> </td> <td>always</td> <td> <div>The application can be used from any Azure AD tenants.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>display_name</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>Object's display name or its prefix.</div> <br> <div><b>Sample:</b></div> <div>fredAKSCluster</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>homepage</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>The url where users can sign in and use your app.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>identifier_uris</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td>always</td> <td> <div>Space-separated unique URIs that Azure AD can use for this app.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>oauth2_allow_implicit_flow</b>  <div> <span>boolean</span> </div> </td> <td>always</td> <td> <div>Whether to allow implicit grant flow for OAuth2.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>object_id</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>Object ID of the application</div> <br> <div><b>Sample:</b></div> <div>xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>optional_claims</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td>always</td> <td> <div>The optional claims for the application.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>reply_urls</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td>always</td> <td> <div>Space-separated URIs to which Azure AD will redirect in response to an OAuth 2.0 request.</div> <br> </td> </tr> </table> <br><br> <h3 id="authors">Authors</h3> <ul class="simple"> <li>guopeng_lin (@guopenglin) haiyuan_zhang (@haiyuazhang) Fred-sun (@Fred-sun)</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2021 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/azure/azcollection/azure_rm_adapplication_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/azure/azcollection/azure_rm_adapplication_module.html</a>
  </p>
</div>
