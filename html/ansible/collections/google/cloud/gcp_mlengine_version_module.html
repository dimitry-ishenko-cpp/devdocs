<h1 id="google-cloud-gcp-mlengine-version-creates-a-gcp-version">google.cloud.gcp_mlengine_version – Creates a GCP Version</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/google/cloud">google.cloud collection</a> (version 1.0.2).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install google.cloud</code>.</p> <p>To use it in a playbook, specify: <code>google.cloud.gcp_mlengine_version</code>.</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id5">Return Values</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Each version is a trained model deployed in the cloud, ready to handle prediction requests. A model can have multiple versions .</li> </ul>   <h2 id="requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>python &gt;= 2.6</li> <li>requests &gt;= 2.18.4</li> <li>google-auth &gt;= 1.3.0</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="2">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="2">  <b>auth_kind</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>application</li> <li>machineaccount</li> <li>serviceaccount</li> </ul> </td> <td> <div>The type of credential used.</div> </td> </tr> <tr> <td colspan="2">  <b>auto_scaling</b>  <div> <span>dictionary</span> </div> </td> <td> </td> <td> <div>Automatically scale the number of nodes used to serve the model in response to increases and decreases in traffic. Care should be taken to ramp up traffic according to the model's ability to scale or you will start seeing increases in latency and 429 response codes.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>min_nodes</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>The minimum number of nodes to allocate for this mode.</div> </td> </tr> <tr> <td colspan="2">  <b>deployment_uri</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The Cloud Storage location of the trained model used to create the version.</div> </td> </tr> <tr> <td colspan="2">  <b>description</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The description specified for the version when it was created.</div> </td> </tr> <tr> <td colspan="2">  <b>env_type</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Specifies which Ansible environment you're running this module within.</div> <div>This should not be set unless you know what you're doing.</div> <div>This only alters the User Agent string for any API requests.</div> </td> </tr> <tr> <td colspan="2">  <b>framework</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The machine learning framework AI Platform uses to train this version of the model.</div> <div>Some valid choices include: "FRAMEWORK_UNSPECIFIED", "TENSORFLOW", "SCIKIT_LEARN", "XGBOOST"</div> </td> </tr> <tr> <td colspan="2">  <b>is_default</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>If true, this version will be used to handle prediction requests that do not specify a version.</div> <div>
<br>aliases: default</div> </td> </tr> <tr> <td colspan="2">  <b>labels</b>  <div> <span>dictionary</span> </div> </td> <td> </td> <td> <div>One or more labels that you can add, to organize your model versions.</div> </td> </tr> <tr> <td colspan="2">  <b>machine_type</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The type of machine on which to serve the model. Currently only applies to online prediction service.</div> <div>Some valid choices include: "mls1-c1-m2", "mls1-c4-m2"</div> </td> </tr> <tr> <td colspan="2">  <b>manual_scaling</b>  <div> <span>dictionary</span> </div> </td> <td> </td> <td> <div>Manually select the number of nodes to use for serving the model. You should generally use autoScaling with an appropriate minNodes instead, but this option is available if you want more predictable billing. Beware that latency and error rates will increase if the traffic exceeds that capability of the system to serve it based on the selected number of nodes.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>nodes</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>The number of nodes to allocate for this model. These nodes are always up, starting from the time the model is deployed.</div> </td> </tr> <tr> <td colspan="2">  <b>model</b>  <div> <span>dictionary</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The model that this version belongs to.</div> <div>This field represents a link to a Model resource in GCP. It can be specified in two ways. First, you can place a dictionary with key 'name' and value of your resource's name Alternatively, you can add `register: name-of-resource` to a gcp_mlengine_model task and then set this model field to "{{ name-of-resource }}"</div> </td> </tr> <tr> <td colspan="2">  <b>name</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The name specified for the version when it was created.</div> <div>The version name must be unique within the model it is created in.</div> </td> </tr> <tr> <td colspan="2">  <b>prediction_class</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The fully qualified name (module_name.class_name) of a class that implements the Predictor interface described in this reference field. The module containing this class should be included in a package provided to the packageUris field.</div> </td> </tr> <tr> <td colspan="2">  <b>project</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The Google Cloud Platform project to use.</div> </td> </tr> <tr> <td colspan="2">  <b>python_version</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The version of Python used in prediction. If not set, the default version is '2.7'. Python '3.5' is available when runtimeVersion is set to '1.4' and above. Python '2.7' works with all supported runtime versions.</div> <div>Some valid choices include: "2.7", "3.5"</div> </td> </tr> <tr> <td colspan="2">  <b>runtime_version</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The AI Platform runtime version to use for this deployment.</div> </td> </tr> <tr> <td colspan="2">  <b>scopes</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>Array of scopes to be used</div> </td> </tr> <tr> <td colspan="2">  <b>service_account</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Specifies the service account for resource access control.</div> </td> </tr> <tr> <td colspan="2">  <b>service_account_contents</b>  <div> <span>jsonarg</span> </div> </td> <td> </td> <td> <div>The contents of a Service Account JSON file, either in a dictionary or as a JSON string that represents it.</div> </td> </tr> <tr> <td colspan="2">  <b>service_account_email</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>An optional service account email address if machineaccount is selected and the user does not wish to use the default email.</div> </td> </tr> <tr> <td colspan="2">  <b>service_account_file</b>  <div> <span>path</span> </div> </td> <td> </td> <td> <div>The path of a Service Account JSON file if serviceaccount is selected as type.</div> </td> </tr> <tr> <td colspan="2">  <b>state</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>present</b> ←</div></li> <li>absent</li> </ul> </td> <td> <div>Whether the given object should exist in GCP</div> </td> </tr> </table> <br>  <h2 id="examples">Examples</h2> <pre data-language="yaml+jinja">- name: create a model
  google.cloud.gcp_mlengine_model:
    name: model_version
    description: My model
    regions:
    - us-central1
    online_prediction_logging: 'true'
    online_prediction_console_logging: 'true'
    project: "{{ gcp_project }}"
    auth_kind: "{{ gcp_cred_kind }}"
    service_account_file: "{{ gcp_cred_file }}"
    state: present
  register: model

- name: create a version
  google.cloud.gcp_mlengine_version:
    name: "{{ resource_name | replace('-', '_') }}"
    model: "{{ model }}"
    runtime_version: 1.13
    python_version: 3.5
    is_default: 'true'
    deployment_uri: gs://ansible-cloudml-bucket/
    project: test_project
    auth_kind: serviceaccount
    service_account_file: "/tmp/auth.pem"
    state: present
</pre>   <h2 id="return-values">Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values.html#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="documentation-table"> <tr> <th colspan="2">Key</th> <th>Returned</th> <th width="100%">Description</th> </tr> <tr> <td colspan="2">  <b>autoScaling</b>  <div> <span>complex</span> </div> </td> <td>success</td> <td> <div>Automatically scale the number of nodes used to serve the model in response to increases and decreases in traffic. Care should be taken to ramp up traffic according to the model's ability to scale or you will start seeing increases in latency and 429 response codes.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>minNodes</b>  <div> <span>integer</span> </div> </td> <td>success</td> <td> <div>The minimum number of nodes to allocate for this mode.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>createTime</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>The time the version was created.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>deploymentUri</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>The Cloud Storage location of the trained model used to create the version.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>description</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>The description specified for the version when it was created.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>errorMessage</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>The details of a failure or cancellation.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>framework</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>The machine learning framework AI Platform uses to train this version of the model.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>isDefault</b>  <div> <span>boolean</span> </div> </td> <td>success</td> <td> <div>If true, this version will be used to handle prediction requests that do not specify a version.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>labels</b>  <div> <span>dictionary</span> </div> </td> <td>success</td> <td> <div>One or more labels that you can add, to organize your model versions.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>lastUseTime</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>The time the version was last used for prediction.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>machineType</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>The type of machine on which to serve the model. Currently only applies to online prediction service.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>manualScaling</b>  <div> <span>complex</span> </div> </td> <td>success</td> <td> <div>Manually select the number of nodes to use for serving the model. You should generally use autoScaling with an appropriate minNodes instead, but this option is available if you want more predictable billing. Beware that latency and error rates will increase if the traffic exceeds that capability of the system to serve it based on the selected number of nodes.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>nodes</b>  <div> <span>integer</span> </div> </td> <td>success</td> <td> <div>The number of nodes to allocate for this model. These nodes are always up, starting from the time the model is deployed.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>model</b>  <div> <span>dictionary</span> </div> </td> <td>success</td> <td> <div>The model that this version belongs to.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>name</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>The name specified for the version when it was created.</div> <div>The version name must be unique within the model it is created in.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>packageUris</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td>success</td> <td> <div>Cloud Storage paths (gs://…) of packages for custom prediction routines or scikit-learn pipelines with custom code.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>predictionClass</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>The fully qualified name (module_name.class_name) of a class that implements the Predictor interface described in this reference field. The module containing this class should be included in a package provided to the packageUris field.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>pythonVersion</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>The version of Python used in prediction. If not set, the default version is '2.7'. Python '3.5' is available when runtimeVersion is set to '1.4' and above. Python '2.7' works with all supported runtime versions.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>runtimeVersion</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>The AI Platform runtime version to use for this deployment.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>serviceAccount</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>Specifies the service account for resource access control.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>state</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>The state of a version.</div> <br> </td> </tr> </table> <br><br> <h3 id="authors">Authors</h3> <ul class="simple"> <li>Google Inc. (@googlecloudplatform)</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2021 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/google/cloud/gcp_mlengine_version_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/google/cloud/gcp_mlengine_version_module.html</a>
  </p>
</div>
