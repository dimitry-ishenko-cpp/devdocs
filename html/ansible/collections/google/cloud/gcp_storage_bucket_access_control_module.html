<section id="google-cloud-gcp-storage-bucket-access-control-module-creates-a-gcp-bucketaccesscontrol"> <h1>google.cloud.gcp_storage_bucket_access_control module – Creates a GCP BucketAccessControl</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module is part of the <a class="reference external" href="https://galaxy.ansible.com/ui/repo/published/google/cloud/">google.cloud collection</a> (version 1.4.1).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install google.cloud</code>. You need further requirements to be able to use this module, see <a class="reference internal" href="#ansible-collections-google-cloud-gcp-storage-bucket-access-control-module-requirements"><span class="std std-ref">Requirements</span></a> for details.</p> <p>To use it in a playbook, specify: <code>google.cloud.gcp_storage_bucket_access_control</code>.</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id4">Notes</a></li> <li><a class="reference internal" href="#examples" id="id5">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id6">Return Values</a></li> </ul>  <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>The BucketAccessControls resource represents the Access Control Lists (ACLs) for buckets within Google Cloud Storage. ACLs let you specify who has access to your data and to what extent.</li> <li>There are three roles that can be assigned to an entity: READERs can get the bucket, though no acl property will be returned, and list the bucket’s objects. WRITERs are READERs, and they can insert objects into the bucket and delete the bucket’s objects. OWNERs are WRITERs, and they can get the acl property of a bucket, update a bucket, and call all BucketAccessControls methods on the bucket. For more information, see Access Control, with the caveat that this API uses READER, WRITER, and OWNER instead of READ, WRITE, and FULL_CONTROL.</li> </ul> </section> <section id="requirements"> <h2 id="ansible-collections-google-cloud-gcp-storage-bucket-access-control-module-requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>python &gt;= 2.6</li> <li>requests &gt;= 2.18.4</li> <li>google-auth &gt;= 1.3.0</li> </ul> </section> <section id="parameters"> <h2>Parameters</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-google-cloud-gcp-storage-bucket-access-control-module-parameter-access-token"><strong>access_token</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>An OAuth2 access token if credential type is accesstoken.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-google-cloud-gcp-storage-bucket-access-control-module-parameter-auth-kind"><strong>auth_kind</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The type of credential used.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"application"</code></li> <li><code>"machineaccount"</code></li> <li><code>"serviceaccount"</code></li> <li><code>"accesstoken"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-google-cloud-gcp-storage-bucket-access-control-module-parameter-bucket"><strong>bucket</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The name of the bucket.</p> <p>This field represents a link to a Bucket resource in GCP. It can be specified in two ways. First, you can place a dictionary with key ‘name’ and value of your resource’s name Alternatively, you can add `register: name-of-resource` to a gcp_storage_bucket task and then set this bucket field to “{{ name-of-resource }}”</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-google-cloud-gcp-storage-bucket-access-control-module-parameter-entity"><strong>entity</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The entity holding the permission, in one of the following forms: user-userId user-email group-groupId group-email domain-domain project-team-projectId allUsers allAuthenticatedUsers Examples: The user <a class="reference external" href="https://docs.ansible.com/cdn-cgi/l/email-protection#cca0a5b6eaeffffbf7eaeff9fef7eaeff8f4f7a9b4ada1bca0a9eaeff8faf7afa3a1">liz<span>@</span>example<span>.</span>com</a> would be <a class="reference external" href="https://docs.ansible.com/cdn-cgi/l/email-protection#42373127306f2e2b38646171757964617770796461767a79273a232f322e276461767479212d2f">user-liz<span>@</span>example<span>.</span>com</a>.</p> <p>The group <a class="reference external" href="https://docs.ansible.com/cdn-cgi/l/email-protection#06637e676b766a63202535313d202533343d2025323e3d616969616a63617469737675202532303d65696b">example<span>@</span>googlegroups<span>.</span>com</a> would be <a class="reference external" href="https://docs.ansible.com/cdn-cgi/l/email-protection#1f786d706a6f327a677e726f737a393c2c2824393c2a2d24393c2b272478707078737a786d706a6f6c393c2b29247c7072">group-example<span>@</span>googlegroups<span>.</span>com</a>.</p> <p>To refer to all members of the Google Apps for Business domain example.com, the entity would be domain-example.com.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-google-cloud-gcp-storage-bucket-access-control-module-parameter-env-type"><strong>env_type</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specifies which Ansible environment you’re running this module within.</p> <p>This should not be set unless you know what you’re doing.</p> <p>This only alters the User Agent string for any API requests.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-google-cloud-gcp-storage-bucket-access-control-module-parameter-project"><strong>project</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The Google Cloud Platform project to use.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-google-cloud-gcp-storage-bucket-access-control-module-parameter-role"><strong>role</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The access permission for the entity.</p> <p>Some valid choices include: “OWNER”, “READER”, “WRITER”</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-google-cloud-gcp-storage-bucket-access-control-module-parameter-scopes"><strong>scopes</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Array of scopes to be used</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-google-cloud-gcp-storage-bucket-access-control-module-parameter-service-account-contents"><strong>service_account_contents</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">jsonarg</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The contents of a Service Account JSON file, either in a dictionary or as a JSON string that represents it.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-google-cloud-gcp-storage-bucket-access-control-module-parameter-service-account-email"><strong>service_account_email</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>An optional service account email address if machineaccount is selected and the user does not wish to use the default email.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-google-cloud-gcp-storage-bucket-access-control-module-parameter-service-account-file"><strong>service_account_file</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">path</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The path of a Service Account JSON file if serviceaccount is selected as type.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-google-cloud-gcp-storage-bucket-access-control-module-parameter-state"><strong>state</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Whether the given object should exist in GCP</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"present"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"absent"</code></li> </ul> </div></td> </tr>  </table> </section> <section id="notes"> <h2>Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>API Reference: <a class="reference external" href="https://cloud.google.com/storage/docs/json_api/v1/bucketAccessControls">https://cloud.google.com/storage/docs/json_api/v1/bucketAccessControls</a>
</li> <li>Official Documentation: <a class="reference external" href="https://cloud.google.com/storage/docs/access-control/lists">https://cloud.google.com/storage/docs/access-control/lists</a>
</li> <li>for authentication, you can set service_account_file using the <code>GCP_SERVICE_ACCOUNT_FILE</code> env variable.</li> <li>for authentication, you can set service_account_contents using the <code>GCP_SERVICE_ACCOUNT_CONTENTS</code> env variable.</li> <li>For authentication, you can set service_account_email using the <code>GCP_SERVICE_ACCOUNT_EMAIL</code> env variable.</li> <li>For authentication, you can set access_token using the <code>GCP_ACCESS_TOKEN</code> env variable.</li> <li>For authentication, you can set auth_kind using the <code>GCP_AUTH_KIND</code> env variable.</li> <li>For authentication, you can set scopes using the <code>GCP_SCOPES</code> env variable.</li> <li>Environment variables values will only be used if the playbook values are not set.</li> <li>The <em>service_account_email</em> and <em>service_account_file</em> options are mutually exclusive.</li> </ul> </div> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja">- name: create a bucket
  google.cloud.gcp_storage_bucket:
    name: "{{ resource_name }}"
    project: "{{ gcp_project }}"
    auth_kind: "{{ gcp_cred_kind }}"
    service_account_file: "{{ gcp_cred_file }}"
    state: present
  register: bucket

- name: create a bucket access control
  google.cloud.gcp_storage_bucket_access_control:
    bucket: "{{ bucket }}"
    entity: user-alexstephen@google.com
    role: WRITER
    project: test_project
    auth_kind: serviceaccount
    service_account_file: "/tmp/auth.pem"
    state: present
</pre> </section> <section id="return-values"> <h2>Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values.html#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Key</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-google-cloud-gcp-storage-bucket-access-control-module-return-bucket"><strong>bucket</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The name of the bucket.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> success</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-google-cloud-gcp-storage-bucket-access-control-module-return-domain"><strong>domain</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The domain associated with the entity.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> success</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-google-cloud-gcp-storage-bucket-access-control-module-return-email"><strong>email</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The email address associated with the entity.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> success</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-google-cloud-gcp-storage-bucket-access-control-module-return-entity"><strong>entity</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The entity holding the permission, in one of the following forms: user-userId user-email group-groupId group-email domain-domain project-team-projectId allUsers allAuthenticatedUsers Examples: The user <a class="reference external" href="https://docs.ansible.com/cdn-cgi/l/email-protection#137f7a69353020242835302621283530272b28766b727e637f763530272528707c7e">liz<span>@</span>example<span>.</span>com</a> would be <a class="reference external" href="https://docs.ansible.com/cdn-cgi/l/email-protection#41343224336c2d283b676272767a676274737a676275797a2439202c312d24676275777a222e2c">user-liz<span>@</span>example<span>.</span>com</a>.</p> <p>The group <a class="reference external" href="https://docs.ansible.com/cdn-cgi/l/email-protection#395c41585449555c1f1a0a0e021f1a0c0b021f1a0d01025e56565e555c5e4b564c494a1f1a0d0f025a5654">example<span>@</span>googlegroups<span>.</span>com</a> would be <a class="reference external" href="https://docs.ansible.com/cdn-cgi/l/email-protection#1077627f65603d7568717d607c75363323272b363325222b363324282b777f7f777c7577627f656063363324262b737f7d">group-example<span>@</span>googlegroups<span>.</span>com</a>.</p> <p>To refer to all members of the Google Apps for Business domain example.com, the entity would be domain-example.com.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> success</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-google-cloud-gcp-storage-bucket-access-control-module-return-entityid"><strong>entityId</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The ID for the entity.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> success</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-google-cloud-gcp-storage-bucket-access-control-module-return-id"><strong>id</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The ID of the access-control entry.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> success</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-google-cloud-gcp-storage-bucket-access-control-module-return-projectteam"><strong>projectTeam</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">complex</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The project team associated with the entity.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> success</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-google-cloud-gcp-storage-bucket-access-control-module-return-projectteam-projectnumber"><strong>projectNumber</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The project team associated with the entity.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> success</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-google-cloud-gcp-storage-bucket-access-control-module-return-projectteam-team"><strong>team</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The team.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> success</p> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-google-cloud-gcp-storage-bucket-access-control-module-return-role"><strong>role</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The access permission for the entity.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> success</p> </div></td> </tr>  </table> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Google Inc. (@googlecloudplatform)</li> </ul> </section> <section id="collection-links"> <h3>Collection links</h3> <ul class="ansible-links"> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/google.cloud/issues" rel="noopener external" target="_blank">Issue Tracker</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="http://cloud.google.com" rel="noopener external" target="_blank">Homepage</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/google.cloud" rel="noopener external" target="_blank">Repository (Sources)</a></span></li> </ul> </section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2024 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/google/cloud/gcp_storage_bucket_access_control_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/google/cloud/gcp_storage_bucket_access_control_module.html</a>
  </p>
</div>
