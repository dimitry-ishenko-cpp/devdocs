<h1 id="google-cloud-gcp-compute-instance-group-manager-creates-a-gcp-instancegroupmanager">google.cloud.gcp_compute_instance_group_manager – Creates a GCP InstanceGroupManager</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/google/cloud">google.cloud collection</a> (version 1.0.2).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install google.cloud</code>.</p> <p>To use it in a playbook, specify: <code>google.cloud.gcp_compute_instance_group_manager</code>.</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id5">Return Values</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Creates a managed instance group using the information that you specify in the request. After the group is created, it schedules an action to create instances in the group using the specified instance template. This operation is marked as DONE when the group is created even if the instances in the group have not yet been created. You must separately verify the status of the individual instances.</li> <li>A managed instance group can have up to 1000 VM instances per group.</li> </ul>   <h2 id="requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>python &gt;= 2.6</li> <li>requests &gt;= 2.18.4</li> <li>google-auth &gt;= 1.3.0</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="2">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="2">  <b>auth_kind</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>application</li> <li>machineaccount</li> <li>serviceaccount</li> </ul> </td> <td> <div>The type of credential used.</div> </td> </tr> <tr> <td colspan="2">  <b>base_instance_name</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The base instance name to use for instances in this group. The value must be 1-58 characters long. Instances are named by appending a hyphen and a random four-character string to the base instance name.</div> <div>The base instance name must comply with RFC1035.</div> </td> </tr> <tr> <td colspan="2">  <b>description</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>An optional description of this resource. Provide this property when you create the resource.</div> </td> </tr> <tr> <td colspan="2">  <b>env_type</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Specifies which Ansible environment you're running this module within.</div> <div>This should not be set unless you know what you're doing.</div> <div>This only alters the User Agent string for any API requests.</div> </td> </tr> <tr> <td colspan="2">  <b>instance_template</b>  <div> <span>dictionary</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The instance template that is specified for this managed instance group. The group uses this template to create all new instances in the managed instance group.</div> <div>This field represents a link to a InstanceTemplate resource in GCP. It can be specified in two ways. First, you can place a dictionary with key 'selfLink' and value of your resource's selfLink Alternatively, you can add `register: name-of-resource` to a gcp_compute_instance_template task and then set this instance_template field to "{{ name-of-resource }}"</div> </td> </tr> <tr> <td colspan="2">  <b>name</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The name of the managed instance group. The name must be 1-63 characters long, and comply with RFC1035.</div> </td> </tr> <tr> <td colspan="2">  <b>named_ports</b>  <div> <span>list</span> / <span>elements=dictionary</span> </div> </td> <td> </td> <td> <div>Named ports configured for the Instance Groups complementary to this Instance Group Manager.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>name</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The name for this named port. The name must be 1-63 characters long, and comply with RFC1035.</div> </td> </tr> <tr> <td class="elbow-placeholder"></td> <td colspan="1">  <b>port</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>The port number, which can be a value between 1 and 65535.</div> </td> </tr> <tr> <td colspan="2">  <b>project</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The Google Cloud Platform project to use.</div> </td> </tr> <tr> <td colspan="2">  <b>scopes</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>Array of scopes to be used</div> </td> </tr> <tr> <td colspan="2">  <b>service_account_contents</b>  <div> <span>jsonarg</span> </div> </td> <td> </td> <td> <div>The contents of a Service Account JSON file, either in a dictionary or as a JSON string that represents it.</div> </td> </tr> <tr> <td colspan="2">  <b>service_account_email</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>An optional service account email address if machineaccount is selected and the user does not wish to use the default email.</div> </td> </tr> <tr> <td colspan="2">  <b>service_account_file</b>  <div> <span>path</span> </div> </td> <td> </td> <td> <div>The path of a Service Account JSON file if serviceaccount is selected as type.</div> </td> </tr> <tr> <td colspan="2">  <b>state</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>present</b> ←</div></li> <li>absent</li> </ul> </td> <td> <div>Whether the given object should exist in GCP</div> </td> </tr> <tr> <td colspan="2">  <b>target_pools</b>  <div> <span>list</span> / <span>elements=dictionary</span> </div> </td> <td> </td> <td> <div>TargetPool resources to which instances in the instanceGroup field are added. The target pools automatically apply to all of the instances in the managed instance group.</div> </td> </tr> <tr> <td colspan="2">  <b>target_size</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>The target number of running instances for this managed instance group. Deleting or abandoning instances reduces this number. Resizing the group changes this number.</div> </td> </tr> <tr> <td colspan="2">  <b>zone</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The zone the managed instance group resides.</div> </td> </tr> </table> <br>  <h2 id="examples">Examples</h2> <pre data-language="yaml+jinja">- name: create a network
  google.cloud.gcp_compute_network:
    name: network-instancetemplate
    project: "{{ gcp_project }}"
    auth_kind: "{{ gcp_cred_kind }}"
    service_account_file: "{{ gcp_cred_file }}"
    state: present
  register: network

- name: create a address
  google.cloud.gcp_compute_address:
    name: address-instancetemplate
    region: us-west1
    project: "{{ gcp_project }}"
    auth_kind: "{{ gcp_cred_kind }}"
    service_account_file: "{{ gcp_cred_file }}"
    state: present
  register: address

- name: create a instance template
  google.cloud.gcp_compute_instance_template:
    name: "{{ resource_name }}"
    properties:
      disks:
      - auto_delete: 'true'
        boot: 'true'
        initialize_params:
          source_image: projects/ubuntu-os-cloud/global/images/family/ubuntu-1604-lts
      machine_type: n1-standard-1
      network_interfaces:
      - network: "{{ network }}"
        access_configs:
        - name: test-config
          type: ONE_TO_ONE_NAT
          nat_ip: "{{ address }}"
    project: "{{ gcp_project }}"
    auth_kind: "{{ gcp_cred_kind }}"
    service_account_file: "{{ gcp_cred_file }}"
    state: present
  register: instancetemplate

- name: create a instance group manager
  google.cloud.gcp_compute_instance_group_manager:
    name: test_object
    base_instance_name: test1-child
    instance_template: "{{ instancetemplate }}"
    target_size: 3
    zone: us-west1-a
    project: test_project
    auth_kind: serviceaccount
    service_account_file: "/tmp/auth.pem"
    state: present
</pre>   <h2 id="return-values">Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values.html#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="documentation-table"> <tr> <th colspan="2">Key</th> <th>Returned</th> <th width="100%">Description</th> </tr> <tr> <td colspan="2">  <b>baseInstanceName</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>The base instance name to use for instances in this group. The value must be 1-58 characters long. Instances are named by appending a hyphen and a random four-character string to the base instance name.</div> <div>The base instance name must comply with RFC1035.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>creationTimestamp</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>The creation timestamp for this managed instance group in RFC3339 text format.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>currentActions</b>  <div> <span>complex</span> </div> </td> <td>success</td> <td> <div>The list of instance actions and the number of instances in this managed instance group that are scheduled for each of those actions.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>abandoning</b>  <div> <span>integer</span> </div> </td> <td>success</td> <td> <div>The total number of instances in the managed instance group that are scheduled to be abandoned. Abandoning an instance removes it from the managed instance group without deleting it.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>creating</b>  <div> <span>integer</span> </div> </td> <td>success</td> <td> <div>The number of instances in the managed instance group that are scheduled to be created or are currently being created. If the group fails to create any of these instances, it tries again until it creates the instance successfully.</div> <div>If you have disabled creation retries, this field will not be populated; instead, the creatingWithoutRetries field will be populated.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>creatingWithoutRetries</b>  <div> <span>integer</span> </div> </td> <td>success</td> <td> <div>The number of instances that the managed instance group will attempt to create. The group attempts to create each instance only once. If the group fails to create any of these instances, it decreases the group's targetSize value accordingly.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>deleting</b>  <div> <span>integer</span> </div> </td> <td>success</td> <td> <div>The number of instances in the managed instance group that are scheduled to be deleted or are currently being deleted.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>none</b>  <div> <span>integer</span> </div> </td> <td>success</td> <td> <div>The number of instances in the managed instance group that are running and have no scheduled actions.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>recreating</b>  <div> <span>integer</span> </div> </td> <td>success</td> <td> <div>The number of instances in the managed instance group that are scheduled to be recreated or are currently being being recreated.</div> <div>Recreating an instance deletes the existing root persistent disk and creates a new disk from the image that is defined in the instance template.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>refreshing</b>  <div> <span>integer</span> </div> </td> <td>success</td> <td> <div>The number of instances in the managed instance group that are being reconfigured with properties that do not require a restart or a recreate action. For example, setting or removing target pools for the instance.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>restarting</b>  <div> <span>integer</span> </div> </td> <td>success</td> <td> <div>The number of instances in the managed instance group that are scheduled to be restarted or are currently being restarted.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>description</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>An optional description of this resource. Provide this property when you create the resource.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>id</b>  <div> <span>integer</span> </div> </td> <td>success</td> <td> <div>A unique identifier for this resource.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>instanceGroup</b>  <div> <span>dictionary</span> </div> </td> <td>success</td> <td> <div>The instance group being managed.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>instanceTemplate</b>  <div> <span>dictionary</span> </div> </td> <td>success</td> <td> <div>The instance template that is specified for this managed instance group. The group uses this template to create all new instances in the managed instance group.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>name</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>The name of the managed instance group. The name must be 1-63 characters long, and comply with RFC1035.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>namedPorts</b>  <div> <span>complex</span> </div> </td> <td>success</td> <td> <div>Named ports configured for the Instance Groups complementary to this Instance Group Manager.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>name</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>The name for this named port. The name must be 1-63 characters long, and comply with RFC1035.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>port</b>  <div> <span>integer</span> </div> </td> <td>success</td> <td> <div>The port number, which can be a value between 1 and 65535.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>region</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>The region this managed instance group resides (for regional resources).</div> <br> </td> </tr> <tr> <td colspan="2">  <b>targetPools</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td>success</td> <td> <div>TargetPool resources to which instances in the instanceGroup field are added. The target pools automatically apply to all of the instances in the managed instance group.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>targetSize</b>  <div> <span>integer</span> </div> </td> <td>success</td> <td> <div>The target number of running instances for this managed instance group. Deleting or abandoning instances reduces this number. Resizing the group changes this number.</div> <br> </td> </tr> <tr> <td colspan="2">  <b>zone</b>  <div> <span>string</span> </div> </td> <td>success</td> <td> <div>The zone the managed instance group resides.</div> <br> </td> </tr> </table> <br><br> <h3 id="authors">Authors</h3> <ul class="simple"> <li>Google Inc. (@googlecloudplatform)</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2021 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/google/cloud/gcp_compute_instance_group_manager_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/google/cloud/gcp_compute_instance_group_manager_module.html</a>
  </p>
</div>
