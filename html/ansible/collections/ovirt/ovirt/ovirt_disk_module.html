<section id="ovirt-ovirt-ovirt-disk-module-module-to-manage-virtual-machine-and-floating-disks-in-ovirt-rhv"> <h1>ovirt.ovirt.ovirt_disk module – Module to manage Virtual Machine and floating disks in oVirt/RHV</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module is part of the <a class="reference external" href="https://galaxy.ansible.com/ui/repo/published/ovirt/ovirt/">ovirt.ovirt collection</a> (version 3.2.0).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install ovirt.ovirt</code>. You need further requirements to be able to use this module, see <a class="reference internal" href="#ansible-collections-ovirt-ovirt-ovirt-disk-module-requirements"><span class="std std-ref">Requirements</span></a> for details.</p> <p>To use it in a playbook, specify: <code>ovirt.ovirt.ovirt_disk</code>.</p> </div> <p class="ansible-version-added">New in ovirt.ovirt 1.0.0</p>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id4">Notes</a></li> <li><a class="reference internal" href="#examples" id="id5">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id6">Return Values</a></li> </ul>  <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>Module to manage Virtual Machine and floating disks in oVirt/RHV.</li> <li>WARNING: If you are installing the collection from ansible galaxy you need to install ‘qemu-img’ package.</li> </ul> </section> <section id="requirements"> <h2 id="ansible-collections-ovirt-ovirt-ovirt-disk-module-requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>python &gt;= 2.7</li> <li>ovirt-engine-sdk-python &gt;= 4.4.0</li> </ul> </section> <section id="parameters"> <h2>Parameters</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-activate"><strong>activate</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p><em>True</em> if the disk should be activated.</p> <p>When creating disk of Virtual Machine it is set to <em>True</em>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-auth"><strong>auth</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Dictionary with values needed to create HTTP/HTTPS connection to oVirt:</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-auth-ca-file"><strong>ca_file</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>A PEM file containing the trusted CA certificates.</p> <p>The certificate presented by the server will be verified using these CA certificates.</p> <p>If <code>ca_file</code> parameter is not set, system wide CA certificate store is used.</p> <p>Default value is set by <code>OVIRT_CAFILE</code> environment variable.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-auth-compress"><strong>compress</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Flag indicating if compression is used for connection.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-auth-headers"><strong>headers</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Dictionary of HTTP headers to be added to each API call.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-auth-hostname"><strong>hostname</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>A string containing the hostname of the server, usually something like `<em>server.example.com</em>`.</p> <p>Default value is set by <code>OVIRT_HOSTNAME</code> environment variable.</p> <p>Either <code>url</code> or <code>hostname</code> is required.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-auth-insecure"><strong>insecure</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>A boolean flag that indicates if the server TLS certificate and host name should be checked.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-auth-kerberos"><strong>kerberos</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>A boolean flag indicating if Kerberos authentication should be used instead of the default basic authentication.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-auth-password"><strong>password</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The password of the user.</p> <p>Default value is set by <code>OVIRT_PASSWORD</code> environment variable.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-auth-timeout"><strong>timeout</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Number of seconds to wait for response.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-auth-token"><strong>token</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Token to be used instead of login with username/password.</p> <p>Default value is set by <code>OVIRT_TOKEN</code> environment variable.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-auth-url"><strong>url</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>A string containing the API URL of the server, usually something like `<em>https://server.example.com/ovirt-engine/api</em>`.</p> <p>Default value is set by <code>OVIRT_URL</code> environment variable.</p> <p>Either <code>url</code> or <code>hostname</code> is required.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-auth-username"><strong>username</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The name of the user, something like <em>admin@internal</em>.</p> <p>Default value is set by <code>OVIRT_USERNAME</code> environment variable.</p> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-backup"><strong>backup</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in ovirt.ovirt 1.1.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>The backup behavior supported by the disk.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"incremental"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-bootable"><strong>bootable</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p><em>True</em> if the disk should be bootable. By default when disk is created it isn’t bootable.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-content-type"><strong>content_type</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify if the disk is a data disk or ISO image or a one of a the Hosted Engine disk types</p> <p>The Hosted Engine disk content types are available with Engine 4.3+ and Ansible 2.8</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"data"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"iso"</code></li> <li><code>"hosted_engine"</code></li> <li><code>"hosted_engine_sanlock"</code></li> <li><code>"hosted_engine_metadata"</code></li> <li><code>"hosted_engine_configuration"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-description"><strong>description</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Description of the disk image to manage.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-download-image-path"><strong>download_image_path</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Path on a file system where disk should be downloaded.</p> <p>Note that you must have an valid oVirt/RHV engine CA in your system trust store or you must provide it in <code>ca_file</code> parameter.</p> <p>Note that the disk is not downloaded when the file already exists, but you can forcibly download the disk when using <code>force</code> I (true).</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-fetch-nested"><strong>fetch_nested</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>If <em>True</em> the module will fetch additional data from the API.</p> <p>It will fetch IDs of the VMs disks, snapshots, etc. User can configure to fetch other attributes of the nested entities by specifying <code>nested_attributes</code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-force"><strong>force</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Please take a look at <code>image_path</code> documentation to see the correct usage of this parameter.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-format"><strong>format</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify format of the disk.</p> <p>Note that this option isn’t idempotent as it’s not currently possible to change format of the disk via API.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"raw"</code></li> <li>
<code><strong>"cow"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-host"><strong>host</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>When the hypervisor name is specified the newly created disk or an existing disk will refresh its information about the underlying storage( Disk size, Serial, Product ID, Vendor ID …) The specified host will be used for gathering the storage related information. This option is only valid for passthrough disks. This option requires at least the logical_unit.id to be specified</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-id"><strong>id</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>ID of the disk to manage. Either <code>id</code> or <code>name</code>/<code>alias</code> is required.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-image-provider"><strong>image_provider</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>When <code>state</code> is <em>exported</em> disk is exported to given Glance image provider.</p> <p>When <code>state</code> is <em>imported</em> disk is imported from given Glance image provider.</p> <p><code>**IMPORTANT**</code></p> <p>There is no reliable way to achieve idempotency, so every time you specify this parameter the disk is exported, so please handle your playbook accordingly to not export the disk all the time. This option is valid only for template disks.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-interface"><strong>interface</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Driver of the storage interface.</p> <p>It’s required parameter when creating the new disk.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"virtio"</code></li> <li><code>"ide"</code></li> <li><code>"sata"</code></li> <li><code>"virtio_scsi"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-logical-unit"><strong>logical_unit</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Dictionary which describes LUN to be directly attached to VM:</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-logical-unit-address"><strong>address</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Address of the storage server. Used by iSCSI.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-logical-unit-lun-id"><strong>lun_id</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>LUN id.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-logical-unit-password"><strong>password</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>CHAP Password of the user to be used to access storage server. Used by iSCSI.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-logical-unit-port"><strong>port</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Port of the storage server. Used by iSCSI.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-logical-unit-storage-type"><strong>storage_type</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Storage type either <em>fcp</em> or <em>iscsi</em>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-logical-unit-target"><strong>target</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>iSCSI target.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-logical-unit-username"><strong>username</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>CHAP Username to be used to access storage server. Used by iSCSI.</p> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-max-workers"><strong>max_workers</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> <p><em class="ansible-option-versionadded">added in ovirt.ovirt 1.7.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>The number of workers which should be used in the upload/download of the image.</p> <p>The use of multiple workers can speed up the process.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-name"><strong id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-alias">name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: alias</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Name of the disk to manage. Either <code>id</code> or <code>name</code>/<code>alias</code> is required.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-nested-attributes"><strong>nested_attributes</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specifies list of the attributes which should be fetched from the API.</p> <p>This parameter apply only when <code>fetch_nested</code> is <em>true</em>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-openstack-volume-type"><strong>openstack_volume_type</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Name of the openstack volume type. This is valid when working with cinder.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-pass-discard"><strong>pass_discard</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in ovirt.ovirt 1.2.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Defines whether the Virtual Machine passes discard commands to the storage.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-poll-interval"><strong>poll_interval</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Number of the seconds the module waits until another poll request on entity status is sent.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>3</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-profile"><strong>profile</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Disk profile name to be attached to disk. By default profile is chosen by oVirt/RHV engine.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-propagate-errors"><strong>propagate_errors</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in ovirt.ovirt 1.2.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Indicates if disk errors should cause Virtual Machine to be paused or if disk errors should be</p> <p>propagated to the the guest operating system instead.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-quota-id"><strong>quota_id</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Disk quota ID to be used for disk. By default quota is chosen by oVirt/RHV engine.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-read-only"><strong>read_only</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p><em>True</em> if the disk should be read_only. By default when disk is created it isn’t read_only.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-scsi-passthrough"><strong>scsi_passthrough</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in ovirt.ovirt 1.2.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Indicates whether SCSI passthrough is enable and its policy.</p> <p>Setting a value of `filtered`/`unfiltered` will enable SCSI passthrough for a LUN disk with unprivileged/privileged SCSI I/O.</p> <p>To disable SCSI passthrough the value should be set to `disabled`</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"disabled"</code></li> <li><code>"filtered"</code></li> <li><code>"unfiltered"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-shareable"><strong>shareable</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p><em>True</em> if the disk should be shareable. By default when disk is created it isn’t shareable.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-size"><strong>size</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Size of the disk. Size should be specified using IEC standard units. For example 10GiB, 1024MiB, etc.</p> <p>Size can be only increased, not decreased.</p> <p>If the disk is referenced by <code>name</code> and is attached to a VM, make sure to specify <code>vm_name</code>/<code>vm_id</code> to prevent extension of another disk that is not attached to the VM.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-sparse"><strong>sparse</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p><em>True</em> if the disk should be sparse (also known as <em>thin provision</em>). If the parameter is omitted, cow disks will be created as sparse and raw disks as <em>preallocated</em></p> <p>Note that this option isn’t idempotent as it’s not currently possible to change sparseness of the disk via API.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-sparsify"><strong>sparsify</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p><em>True</em> if the disk should be sparsified.</p> <p>Sparsification frees space in the disk image that is not used by its filesystem. As a result, the image will occupy less space on the storage.</p> <p>Note that this parameter isn’t idempotent, as it’s not possible to check if the disk should be or should not be sparsified.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-state"><strong>state</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Should the Virtual Machine disk be present/absent/attached/detached/exported/imported.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"present"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"absent"</code></li> <li><code>"attached"</code></li> <li><code>"detached"</code></li> <li><code>"exported"</code></li> <li><code>"imported"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-storage-domain"><strong>storage_domain</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Storage domain name where disk should be created.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-storage-domains"><strong>storage_domains</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Storage domain names where disk should be copied.</p> <p><code>**IMPORTANT**</code></p> <p>There is no reliable way to achieve idempotency, so every time you specify this parameter the disks are copied, so please handle your playbook accordingly to not copy the disks all the time. This is valid only for VM and floating disks, template disks works as expected.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-timeout"><strong>timeout</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The amount of time in seconds the module should wait for the instance to get into desired state.</p> <p class="ansible-option-line"><strong class="ansible-option-default-bold">Default:</strong> <code>180</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-upload-image-path"><strong id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-image-path">upload_image_path</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: image_path</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Path to disk image, which should be uploaded.</p> <p>Note if <code>size</code> is not specified the size of the disk will be determined by the size of the specified image.</p> <p>Note that currently we support only compatibility version 0.10 of the qcow disk.</p> <p>Note that you must have an valid oVirt/RHV engine CA in your system trust store or you must provide it in <code>ca_file</code> parameter.</p> <p>Note that there is no reliable way to achieve idempotency, so if you want to upload the disk even if the disk with <code>id</code> or <code>name</code> exists, then please use <code>force</code> <em>true</em>. If you will use <code>force</code> <em>false</em>, which is default, then the disk image won’t be uploaded.</p> <p>Note that in order to upload iso the <code>format</code> should be ‘raw’.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-uses-scsi-reservation"><strong>uses_scsi_reservation</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in ovirt.ovirt 1.2.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Defines whether SCSI reservation is enabled for this disk.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-vm-id"><strong>vm_id</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>ID of the Virtual Machine to manage. Either <code>vm_id</code> or <code>vm_name</code> is required if <code>state</code> is <em>attached</em> or <em>detached</em>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-vm-name"><strong>vm_name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Name of the Virtual Machine to manage. Either <code>vm_id</code> or <code>vm_name</code> is required if <code>state</code> is <em>attached</em> or <em>detached</em>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-wait"><strong>wait</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p><code>yes</code> if the module should wait for the entity to get into desired state.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-parameter-wipe-after-delete"><strong>wipe_after_delete</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>If the disk’s Wipe After Delete is enabled, then the disk is first wiped.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr>  </table> </section> <section id="notes"> <h2>Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>In order to use this module you have to install oVirt Python SDK. To ensure it’s installed with correct version you can create the following task: <em>pip: name=ovirt-engine-sdk-python version=4.4.0</em>
</li> </ul> </div> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja"># Examples don't contain auth parameter for simplicity,
# look at ovirt_auth module to see how to reuse authentication:

# Create and attach new disk to VM
- ovirt.ovirt.ovirt_disk:
    name: myvm_disk
    vm_name: rhel7
    size: 10GiB
    format: cow
    interface: virtio
    storage_domain: data

# Attach logical unit to VM rhel7
- ovirt.ovirt.ovirt_disk:
    vm_name: rhel7
    logical_unit:
      target: iqn.2016-08-09.brq.str-01:omachace
      id: 1IET_000d0001
      address: 10.34.63.204
    interface: virtio

# Detach disk from VM
- ovirt.ovirt.ovirt_disk:
    state: detached
    name: myvm_disk
    vm_name: rhel7
    size: 10GiB
    format: cow
    interface: virtio

# Change Disk Name
- ovirt.ovirt.ovirt_disk:
    id: 00000000-0000-0000-0000-000000000000
    storage_domain: data
    name: "new_disk_name"
    vm_name: rhel7

# Upload local image to disk and attach it to vm:
# Since Ansible 2.3
- ovirt.ovirt.ovirt_disk:
    name: mydisk
    vm_name: myvm
    interface: virtio
    size: 10GiB
    format: cow
    image_path: /path/to/mydisk.qcow2
    storage_domain: data

# Download disk to local file system:
# Since Ansible 2.3
- ovirt.ovirt.ovirt_disk:
    id: 7de90f31-222c-436c-a1ca-7e655bd5b60c
    download_image_path: /home/user/mydisk.qcow2

# Export disk as image to Glance domain
# Since Ansible 2.4
- ovirt.ovirt.ovirt_disk:
    id: 7de90f31-222c-436c-a1ca-7e655bd5b60c
    image_provider: myglance
    state: exported

# Defining a specific quota while creating a disk image:
# Since Ansible 2.5
- ovirt.ovirt.ovirt_quotas_info:
    data_center: Default
    name: myquota
  register: quota
- ovirt.ovirt.ovirt_disk:
    name: mydisk
    size: 10GiB
    storage_domain: data
    description: somedescriptionhere
    quota_id: "{{ quota.ovirt_quotas[0]['id'] }}"

# Upload an ISO image
# Since Ansible 2.8
- ovirt.ovirt.ovirt_disk:
    name: myiso
    upload_image_path: /path/to/iso/image
    storage_domain: data
    size: 4 GiB
    wait: true
    bootable: true
    format: raw
    content_type: iso

# Add fiber chanel disk
- name: Create disk
  ovirt.ovirt.ovirt_disk:
    name: fcp_disk
    host: my_host
    logical_unit:
        id: 3600a09803830447a4f244c4657597777
        storage_type: fcp
</pre> </section> <section id="return-values"> <h2>Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values.html#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Key</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-return-disk"><strong>disk</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Dictionary of all the disk attributes. Disk attributes can be found on your oVirt/RHV instance at following url: <a class="reference external" href="http://ovirt.github.io/ovirt-engine-api-model/master/#types/disk">http://ovirt.github.io/ovirt-engine-api-model/master/#types/disk</a>.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> On success if disk is found and <code>vm_id</code> or <code>vm_name</code> wasn’t passed.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-return-disk-attachment"><strong>disk_attachment</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Dictionary of all the disk attachment attributes. Disk attachment attributes can be found on your oVirt/RHV instance at following url: <a class="reference external" href="http://ovirt.github.io/ovirt-engine-api-model/master/#types/disk_attachment">http://ovirt.github.io/ovirt-engine-api-model/master/#types/disk_attachment</a>.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> On success if disk is found and <code>vm_id</code> or <code>vm_name</code> was passed and VM was found.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-ovirt-ovirt-ovirt-disk-module-return-id"><strong>id</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>ID of the managed disk</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> On success if disk is found.</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>"7de90f31-222c-436c-a1ca-7e655bd5b60c"</code></p> </div></td> </tr>  </table> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Ondra Machacek (@machacekondra)</li> <li>Martin Necas (@mnecas)</li> </ul> </section> <section id="collection-links"> <h3>Collection links</h3> <ul class="ansible-links"> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ovirt/ovirt-ansible-collection/issues" rel="noopener external" target="_blank">Issue Tracker</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://www.ovirt.org/" rel="noopener external" target="_blank">Homepage</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ovirt/ovirt-ansible-collection" rel="noopener external" target="_blank">Repository (Sources)</a></span></li> </ul> </section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2024 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/ovirt/ovirt/ovirt_disk_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/ovirt/ovirt/ovirt_disk_module.html</a>
  </p>
</div>
