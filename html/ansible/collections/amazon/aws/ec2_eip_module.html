<section id="amazon-aws-ec2-eip-module-manages-ec2-elastic-ip-eip-addresses"> <h1>amazon.aws.ec2_eip module – manages EC2 elastic IP (EIP) addresses.</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module is part of the <a class="reference external" href="https://galaxy.ansible.com/ui/repo/published/amazon/aws/">amazon.aws collection</a> (version 8.2.1).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install amazon.aws</code>. You need further requirements to be able to use this module, see <a class="reference internal" href="#ansible-collections-amazon-aws-ec2-eip-module-requirements"><span class="std std-ref">Requirements</span></a> for details.</p> <p>To use it in a playbook, specify: <code>amazon.aws.ec2_eip</code>.</p> </div> <p class="ansible-version-added">New in amazon.aws 5.0.0</p>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id4">Notes</a></li> <li><a class="reference internal" href="#examples" id="id5">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id6">Return Values</a></li> </ul>  <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>This module can allocate or release an EIP.</li> <li>This module can associate/disassociate an EIP with instances or network interfaces.</li> <li>This module was originally added to <code>community.aws</code> in release 1.0.0.</li> </ul> </section> <section id="requirements"> <h2 id="ansible-collections-amazon-aws-ec2-eip-module-requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>python &gt;= 3.6</li> <li>boto3 &gt;= 1.26.0</li> <li>botocore &gt;= 1.29.0</li> </ul> </section> <section id="parameters"> <h2>Parameters</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell">    
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ec2-eip-module-parameter-ec2-access-key"><strong id="ansible-collections-amazon-aws-ec2-eip-module-parameter-access-key">access_key</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: aws_access_key_id, aws_access_key, ec2_access_key</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>AWS access key ID.</p> <p>See the AWS documentation for more information about access tokens <a class="reference external" href="https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html#access-keys-and-secret-access-keys">https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html#access-keys-and-secret-access-keys</a>.</p> <p>The <code>AWS_ACCESS_KEY_ID</code>, <code>AWS_ACCESS_KEY</code> or <code>EC2_ACCESS_KEY</code> environment variables may also be used in decreasing order of preference.</p> <p>The <em>aws_access_key</em> and <em>profile</em> options are mutually exclusive.</p> <p>The <em>aws_access_key_id</em> alias was added in release 5.1.0 for consistency with the AWS botocore SDK.</p> <p>The <em>ec2_access_key</em> alias has been deprecated and will be removed in a release after 2024-12-01.</p> <p>Support for the <code>EC2_ACCESS_KEY</code> environment variable has been deprecated and will be removed in a release after 2024-12-01.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ec2-eip-module-parameter-allow-reassociation"><strong>allow_reassociation</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Specify this option to allow an Elastic IP address that is already associated with another network interface or instance to be re-associated with the specified instance or interface.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ec2-eip-module-parameter-aws-ca-bundle"><strong>aws_ca_bundle</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">path</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The location of a CA Bundle to use when validating SSL certificates.</p> <p>The <code>AWS_CA_BUNDLE</code> environment variable may also be used.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ec2-eip-module-parameter-aws-config"><strong>aws_config</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>A dictionary to modify the botocore configuration.</p> <p>Parameters can be found in the AWS documentation <a class="reference external" href="https://botocore.amazonaws.com/v1/documentation/api/latest/reference/config.html#botocore.config.Config">https://botocore.amazonaws.com/v1/documentation/api/latest/reference/config.html#botocore.config.Config</a>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ec2-eip-module-parameter-debug-botocore-endpoint-logs"><strong>debug_botocore_endpoint_logs</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Use a <code>botocore.endpoint</code> logger to parse the unique (rather than total) <code>"resource:action"</code> API calls made during a task, outputing the set to the resource_actions key in the task results. Use the <code>aws_resource_action</code> callback to output to total list made during a playbook.</p> <p>The <code>ANSIBLE_DEBUG_BOTOCORE_LOGS</code> environment variable may also be used.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ec2-eip-module-parameter-device-id"><strong>device_id</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The id of the device for the EIP.</p> <p>Can be an EC2 Instance id or Elastic Network Interface (ENI) id.</p> <p>When specifying an ENI id, <code><strong><a class="reference internal" href="#ansible-collections-amazon-aws-ec2-eip-module-parameter-in-vpc"><span class="std std-ref">in_vpc</span></a></strong></code> must be <code>true</code>.</p> <p>The <code>instance_id</code> alias was removed in release 6.0.0.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">    
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ec2-eip-module-parameter-s3-url"><strong id="ansible-collections-amazon-aws-ec2-eip-module-parameter-aws-endpoint-url">endpoint_url</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: ec2_url, aws_endpoint_url, s3_url</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>URL to connect to instead of the default AWS endpoints. While this can be used to connection to other AWS-compatible services the amazon.aws and community.aws collections are only tested against AWS.</p> <p>The <code>AWS_URL</code> or <code>EC2_URL</code> environment variables may also be used, in decreasing order of preference.</p> <p>The <em>ec2_url</em> and <em>s3_url</em> aliases have been deprecated and will be removed in a release after 2024-12-01.</p> <p>Support for the <code>EC2_URL</code> environment variable has been deprecated and will be removed in a release after 2024-12-01.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ec2-eip-module-parameter-in-vpc"><strong>in_vpc</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Allocate an EIP inside a VPC or not.</p> <p>Required if specifying an ENI with <code><strong><a class="reference internal" href="#ansible-collections-amazon-aws-ec2-eip-module-parameter-device-id"><span class="std std-ref">device_id</span></a></strong></code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ec2-eip-module-parameter-private-ip-address"><strong>private_ip_address</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The primary or secondary private IP address to associate with the Elastic IP address.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ec2-eip-module-parameter-profile"><strong id="ansible-collections-amazon-aws-ec2-eip-module-parameter-aws-profile">profile</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: aws_profile</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>A named AWS profile to use for authentication.</p> <p>See the AWS documentation for more information about named profiles <a class="reference external" href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-profiles.html">https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-profiles.html</a>.</p> <p>The <code>AWS_PROFILE</code> environment variable may also be used.</p> <p>The <em>profile</em> option is mutually exclusive with the <em>aws_access_key</em>, <em>aws_secret_key</em> and <em>security_token</em> options.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ec2-eip-module-parameter-public-ip"><strong id="ansible-collections-amazon-aws-ec2-eip-module-parameter-ip">public_ip</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: ip</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The IP address of a previously allocated EIP.</p> <p>When <code><a class="reference internal" href="#ansible-collections-amazon-aws-ec2-eip-module-parameter-state"><span class="std std-ref">state=present</span></a></code> and device is specified, the EIP is associated with the device.</p> <p>When <code><a class="reference internal" href="#ansible-collections-amazon-aws-ec2-eip-module-parameter-state"><span class="std std-ref">state=absent</span></a></code> and device is specified, the EIP is disassociated from the device.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ec2-eip-module-parameter-public-ipv4-pool"><strong>public_ipv4_pool</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Allocates the new Elastic IP from the provided public IPv4 pool (BYOIP) only applies to newly allocated Elastic IPs, isn’t validated when <code><a class="reference internal" href="#ansible-collections-amazon-aws-ec2-eip-module-parameter-reuse-existing-ip-allowed"><span class="std std-ref">reuse_existing_ip_allowed=true</span></a></code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ec2-eip-module-parameter-purge-tags"><strong>purge_tags</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>If <em>purge_tags=true</em> and <em>tags</em> is set, existing tags will be purged from the resource to match exactly what is defined by <em>tags</em> parameter.</p> <p>If the <em>tags</em> parameter is not set then tags will not be modified, even if <em>purge_tags=True</em>.</p> <p>Tag keys beginning with <code>aws:</code> are reserved by Amazon and can not be modified. As such they will be ignored for the purposes of the <em>purge_tags</em> parameter. See the Amazon documentation for more information <a class="reference external" href="https://docs.aws.amazon.com/general/latest/gr/aws_tagging.html#tag-conventions">https://docs.aws.amazon.com/general/latest/gr/aws_tagging.html#tag-conventions</a>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">   
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ec2-eip-module-parameter-region"><strong id="ansible-collections-amazon-aws-ec2-eip-module-parameter-aws-region">region</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: aws_region, ec2_region</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The AWS region to use.</p> <p>For global services such as IAM, Route53 and CloudFront, <em>region</em> is ignored.</p> <p>The <code>AWS_REGION</code> or <code>EC2_REGION</code> environment variables may also be used.</p> <p>See the Amazon AWS documentation for more information <a class="reference external" href="http://docs.aws.amazon.com/general/latest/gr/rande.html#ec2_region">http://docs.aws.amazon.com/general/latest/gr/rande.html#ec2_region</a>.</p> <p>The <code>ec2_region</code> alias has been deprecated and will be removed in a release after 2024-12-01</p> <p>Support for the <code>EC2_REGION</code> environment variable has been deprecated and will be removed in a release after 2024-12-01.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ec2-eip-module-parameter-release-on-disassociation"><strong>release_on_disassociation</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Whether or not to automatically release the EIP when it is disassociated.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ec2-eip-module-parameter-reuse-existing-ip-allowed"><strong>reuse_existing_ip_allowed</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Reuse an EIP that is not associated to a device (when available), instead of allocating a new one.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">    
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ec2-eip-module-parameter-secret-key"><strong id="ansible-collections-amazon-aws-ec2-eip-module-parameter-aws-secret-access-key">secret_key</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: aws_secret_access_key, aws_secret_key, ec2_secret_key</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>AWS secret access key.</p> <p>See the AWS documentation for more information about access tokens <a class="reference external" href="https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html#access-keys-and-secret-access-keys">https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html#access-keys-and-secret-access-keys</a>.</p> <p>The <code>AWS_SECRET_ACCESS_KEY</code>, <code>AWS_SECRET_KEY</code>, or <code>EC2_SECRET_KEY</code> environment variables may also be used in decreasing order of preference.</p> <p>The <em>secret_key</em> and <em>profile</em> options are mutually exclusive.</p> <p>The <em>aws_secret_access_key</em> alias was added in release 5.1.0 for consistency with the AWS botocore SDK.</p> <p>The <em>ec2_secret_key</em> alias has been deprecated and will be removed in a release after 2024-12-01.</p> <p>Support for the <code>EC2_SECRET_KEY</code> environment variable has been deprecated and will be removed in a release after 2024-12-01.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">     
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ec2-eip-module-parameter-session-token"><strong id="ansible-collections-amazon-aws-ec2-eip-module-parameter-access-token">session_token</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: aws_session_token, security_token, aws_security_token, access_token</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>AWS STS session token for use with temporary credentials.</p> <p>See the AWS documentation for more information about access tokens <a class="reference external" href="https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html#access-keys-and-secret-access-keys">https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html#access-keys-and-secret-access-keys</a>.</p> <p>The <code>AWS_SESSION_TOKEN</code>, <code>AWS_SECURITY_TOKEN</code> or <code>EC2_SECURITY_TOKEN</code> environment variables may also be used in decreasing order of preference.</p> <p>The <em>security_token</em> and <em>profile</em> options are mutually exclusive.</p> <p>Aliases <em>aws_session_token</em> and <em>session_token</em> were added in release 3.2.0, with the parameter being renamed from <em>security_token</em> to <em>session_token</em> in release 6.0.0.</p> <p>The <em>security_token</em>, <em>aws_security_token</em>, and <em>access_token</em> aliases have been deprecated and will be removed in a release after 2024-12-01.</p> <p>Support for the <code>EC2_SECRET_KEY</code> and <code>AWS_SECURITY_TOKEN</code> environment variables has been deprecated and will be removed in a release after 2024-12-01.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ec2-eip-module-parameter-state"><strong>state</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>When <code><a class="reference internal" href="#ansible-collections-amazon-aws-ec2-eip-module-parameter-state"><span class="std std-ref">state=present</span></a></code>, allocate an EIP or associate an existing EIP with a device.</p> <p>When <code><a class="reference internal" href="#ansible-collections-amazon-aws-ec2-eip-module-parameter-state"><span class="std std-ref">state=absent</span></a></code>, disassociate the EIP from the device and optionally release it.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"present"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"absent"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ec2-eip-module-parameter-tag-name"><strong>tag_name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>When <code><a class="reference internal" href="#ansible-collections-amazon-aws-ec2-eip-module-parameter-reuse-existing-ip-allowed"><span class="std std-ref">reuse_existing_ip_allowed=true</span></a></code>, supplement with this option to only reuse an Elastic IP if it is tagged with <code><strong><a class="reference internal" href="#ansible-collections-amazon-aws-ec2-eip-module-parameter-tag-name"><span class="std std-ref">tag_name</span></a></strong></code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ec2-eip-module-parameter-tag-value"><strong>tag_value</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Supplements <code><strong><a class="reference internal" href="#ansible-collections-amazon-aws-ec2-eip-module-parameter-tag-name"><span class="std std-ref">tag_name</span></a></strong></code> but also checks that the value of the tag provided in <code><strong><a class="reference internal" href="#ansible-collections-amazon-aws-ec2-eip-module-parameter-tag-name"><span class="std std-ref">tag_name</span></a></strong></code> matches <code><strong><a class="reference internal" href="#ansible-collections-amazon-aws-ec2-eip-module-parameter-tag-value"><span class="std std-ref">tag_value</span></a></strong></code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ec2-eip-module-parameter-tags"><strong id="ansible-collections-amazon-aws-ec2-eip-module-parameter-resource-tags">tags</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: resource_tags</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>A dictionary representing the tags to be applied to the resource.</p> <p>If the <em>tags</em> parameter is not set then tags will not be modified.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ec2-eip-module-parameter-validate-certs"><strong>validate_certs</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>When set to <code>false</code>, SSL certificates will not be validated for communication with the AWS APIs.</p> <p>Setting <em>validate_certs=false</em> is strongly discouraged, as an alternative, consider setting <em>aws_ca_bundle</em> instead.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr>  </table> </section> <section id="notes"> <h2>Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>There may be a delay between the time the EIP is assigned and when the cloud instance is reachable via the new address. Use wait_for and pause to delay further playbook execution until the instance is reachable, if necessary.</li> <li>This module returns multiple changed statuses on disassociation or release. It returns an overall status based on any changes occurring. It also returns individual changed statuses for disassociation and release.</li> <li>Support for <code><strong><a class="reference internal" href="#ansible-collections-amazon-aws-ec2-eip-module-parameter-tags"><span class="std std-ref">tags</span></a></strong></code> and <code><strong><a class="reference internal" href="#ansible-collections-amazon-aws-ec2-eip-module-parameter-purge-tags"><span class="std std-ref">purge_tags</span></a></strong></code> was added in release 2.1.0.</li> <li>
<strong>Caution:</strong> For modules, environment variables and configuration files are read from the Ansible ‘host’ context and not the ‘controller’ context. As such, files may need to be explicitly copied to the ‘host’. For lookup and connection plugins, environment variables and configuration files are read from the Ansible ‘controller’ context and not the ‘host’ context.</li> <li>The AWS SDK (boto3) that Ansible uses may also read defaults for credentials and other settings, such as the region, from its configuration files in the Ansible ‘host’ context (typically <code>~/.aws/credentials</code>). See <a class="reference external" href="https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html">https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html</a> for more information.</li> </ul> </div> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja"># Note: These examples do not set authentication details, see the AWS Guide for details.

- name: associate an elastic IP with an instance
  amazon.aws.ec2_eip:
    device_id: i-1212f003
    ip: 93.184.216.119

- name: associate an elastic IP with a device
  amazon.aws.ec2_eip:
    device_id: eni-c8ad70f3
    ip: 93.184.216.119

- name: associate an elastic IP with a device and allow reassociation
  amazon.aws.ec2_eip:
    device_id: eni-c8ad70f3
    public_ip: 93.184.216.119
    allow_reassociation: true

- name: disassociate an elastic IP from an instance
  amazon.aws.ec2_eip:
    device_id: i-1212f003
    ip: 93.184.216.119
    state: absent

- name: disassociate an elastic IP with a device
  amazon.aws.ec2_eip:
    device_id: eni-c8ad70f3
    ip: 93.184.216.119
    state: absent

- name: allocate a new elastic IP and associate it with an instance
  amazon.aws.ec2_eip:
    device_id: i-1212f003

- name: allocate a new elastic IP without associating it to anything
  amazon.aws.ec2_eip:
    state: present
  register: eip

- name: output the IP
  ansible.builtin.debug:
    msg: "Allocated IP is {{ eip.public_ip }}"

- name: provision new instances with ec2
  amazon.aws.ec2:
    keypair: mykey
    instance_type: c1.medium
    image: ami-40603AD1
    wait: true
    group: webserver
    count: 3
  register: ec2

- name: associate new elastic IPs with each of the instances
  amazon.aws.ec2_eip:
    device_id: "{{ item }}"
  loop: "{{ ec2.instance_ids }}"

- name: allocate a new elastic IP inside a VPC in us-west-2
  amazon.aws.ec2_eip:
    region: us-west-2
    in_vpc: true
  register: eip

- name: output the IP
  ansible.builtin.debug:
    msg: "Allocated IP inside a VPC is {{ eip.public_ip }}"

- name: allocate eip - reuse unallocated ips (if found) with FREE tag
  amazon.aws.ec2_eip:
    region: us-east-1
    in_vpc: true
    reuse_existing_ip_allowed: true
    tag_name: FREE

- name: allocate eip - reuse unallocated ips if tag reserved is nope
  amazon.aws.ec2_eip:
    region: us-east-1
    in_vpc: true
    reuse_existing_ip_allowed: true
    tag_name: reserved
    tag_value: nope

- name: allocate new eip - from servers given ipv4 pool
  amazon.aws.ec2_eip:
    region: us-east-1
    in_vpc: true
    public_ipv4_pool: ipv4pool-ec2-0588c9b75a25d1a02

- name: allocate eip - from a given pool (if no free addresses where dev-servers tag is dynamic)
  amazon.aws.ec2_eip:
    region: us-east-1
    in_vpc: true
    reuse_existing_ip_allowed: true
    tag_name: dev-servers
    public_ipv4_pool: ipv4pool-ec2-0588c9b75a25d1a02

- name: allocate eip from pool - check if tag reserved_for exists and value is our hostname
  amazon.aws.ec2_eip:
    region: us-east-1
    in_vpc: true
    reuse_existing_ip_allowed: true
    tag_name: reserved_for
    tag_value: "{{ inventory_hostname }}"
    public_ipv4_pool: ipv4pool-ec2-0588c9b75a25d1a02
</pre> </section> <section id="return-values"> <h2>Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values.html#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Key</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ec2-eip-module-return-allocation-id"><strong>allocation_id</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Allocation id of the elastic ip.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> on success</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>"eipalloc-51aa3a6c"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ec2-eip-module-return-public-ip"><strong>public_ip</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>An elastic ip address.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> on success</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>"52.88.159.209"</code></p> </div></td> </tr>  </table> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Rick Mendes (@rickmendes)</li> </ul> </section> <section id="collection-links"> <h3>Collection links</h3> <ul class="ansible-links"> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/amazon.aws/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc" rel="noopener external" target="_blank">Issue Tracker</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/amazon.aws" rel="noopener external" target="_blank">Repository (Sources)</a></span></li> <li><span><a class="reference internal" href="index.html#communication-for-amazon-aws"><span class="std std-ref">Communication</span></a></span></li> </ul> </section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2024 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/amazon/aws/ec2_eip_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/amazon/aws/ec2_eip_module.html</a>
  </p>
</div>
