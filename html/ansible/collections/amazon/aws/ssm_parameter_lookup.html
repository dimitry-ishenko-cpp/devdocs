<section id="amazon-aws-ssm-parameter-lookup-gets-the-value-for-a-ssm-parameter-or-all-parameters-under-a-path"> <h1>amazon.aws.ssm_parameter lookup – gets the value for a SSM parameter or all parameters under a path</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This lookup plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/ui/repo/published/amazon/aws/">amazon.aws collection</a> (version 8.2.1).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install amazon.aws</code>. You need further requirements to be able to use this lookup plugin, see <a class="reference internal" href="#ansible-collections-amazon-aws-ssm-parameter-lookup-requirements"><span class="std std-ref">Requirements</span></a> for details.</p> <p>To use it in a playbook, specify: <code>amazon.aws.ssm_parameter</code>.</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#keyword-parameters" id="id3">Keyword parameters</a></li> <li><a class="reference internal" href="#notes" id="id4">Notes</a></li> <li><a class="reference internal" href="#examples" id="id5">Examples</a></li> </ul>  <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>Get the value for an Amazon Simple Systems Manager parameter or a hierarchy of parameters. The first argument you pass the lookup can either be a parameter name or a hierarchy of parameters. Hierarchies start with a forward slash and end with the parameter name. Up to 5 layers may be specified.</li> <li>If looking up an explicitly listed parameter by name which does not exist then the lookup will generate an error. You can use the <code>default</code> filter to give a default value in this case but must set the <em>on_missing</em> parameter to <code>skip</code> or <code>warn</code>. You must also set the second parameter of the <code>default</code> filter to <code>true</code> (see examples below).</li> <li>When looking up a path for parameters under it a dictionary will be returned for each path. If there is no parameter under that path then the lookup will generate an error.</li> <li>If the lookup fails due to lack of permissions or due to an AWS client error then the aws_ssm will generate an error. If you want to continue in this case then you will have to set up two ansible tasks, one which sets a variable and ignores failures and one which uses the value of that variable with a default. See the examples below.</li> <li>Prior to release 6.0.0 this module was known as <code>aws_ssm</code>, the usage remains the same.</li> </ul> <p>Aliases: aws_ssm</p> </section> <section id="requirements"> <h2 id="ansible-collections-amazon-aws-ssm-parameter-lookup-requirements">Requirements</h2> <p>The below requirements are needed on the local controller node that executes this lookup.</p> <ul class="simple"> <li>python &gt;= 3.6</li> <li>boto3 &gt;= 1.26.0</li> <li>botocore &gt;= 1.29.0</li> </ul> </section> <section id="keyword-parameters"> <h2>Keyword parameters</h2> <p>This describes keyword parameters of the lookup. These are the values <code>key1=value1</code>, <code>key2=value2</code> and so on in the following examples: <code>lookup('amazon.aws.ssm_parameter', key1=value1, key2=value2, ...)</code> and <code>query('amazon.aws.ssm_parameter', key1=value1, key2=value2, ...)</code></p> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell">    
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ssm-parameter-lookup-parameter-ec2-access-key"><strong id="ansible-collections-amazon-aws-ssm-parameter-lookup-parameter-access-key">access_key</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: aws_access_key_id, aws_access_key, ec2_access_key</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>AWS access key ID.</p> <p>See the AWS documentation for more information about access tokens <a class="reference external" href="https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html#access-keys-and-secret-access-keys">https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html#access-keys-and-secret-access-keys</a>.</p> <p>The <em>aws_access_key</em> and <em>profile</em> options are mutually exclusive.</p> <p>The <em>aws_access_key_id</em> alias was added in release 5.1.0 for consistency with the AWS botocore SDK.</p> <p>The <em>ec2_access_key</em> alias has been deprecated and will be removed in a release after 2024-12-01.</p> <p class="ansible-option-line"><strong class="ansible-option-configuration">Configuration:</strong></p> <ul> <li>Environment variable: <a class="reference internal" href="../../environment_variables.html#envvar-AWS_ACCESS_KEY_ID" id="index-0"><code>AWS_ACCESS_KEY_ID</code></a>
</li> <li>Environment variable: <a class="reference internal" href="../../environment_variables.html#envvar-AWS_ACCESS_KEY" id="index-1"><code>AWS_ACCESS_KEY</code></a>
</li> <li>
<p>Environment variable: <a class="reference internal" href="../../environment_variables.html#envvar-EC2_ACCESS_KEY" id="index-2"><code>EC2_ACCESS_KEY</code></a></p> <p>Removed in: major release after 2024-12-01</p> <p>Why: EC2 in the name implied it was limited to EC2 resources. However, it is used for all connections.</p> <p>Alternative: AWS_ACCESS_KEY_ID</p> </li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ssm-parameter-lookup-parameter-bypath"><strong>bypath</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>A boolean to indicate whether the parameter is provided as a hierarchy.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ssm-parameter-lookup-parameter-decrypt"><strong>decrypt</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>A boolean to indicate whether to decrypt the parameter.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ssm-parameter-lookup-parameter-droppath"><strong>droppath</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in amazon.aws 8.2.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Indicates whether to return the parameter name with the searched parameter heirarchy removed.</p> <p>The <code><strong><a class="reference internal" href="#ansible-collections-amazon-aws-ssm-parameter-lookup-parameter-shortnames"><span class="std std-ref">shortnames</span></a></strong></code> and <code><strong><a class="reference internal" href="#ansible-collections-amazon-aws-ssm-parameter-lookup-parameter-droppath"><span class="std std-ref">droppath</span></a></strong></code> options are mutually exclusive.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">   
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ssm-parameter-lookup-parameter-endpoint-url"><strong id="ansible-collections-amazon-aws-ssm-parameter-lookup-parameter-aws-endpoint-url">endpoint_url</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: aws_endpoint_url, endpoint</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>URL to connect to instead of the default AWS endpoints. While this can be used to connection to other AWS-compatible services the amazon.aws and community.aws collections are only tested against AWS.</p> <p>The <em>endpoint</em> alias has been deprecated and will be removed in a release after 2024-12-01.</p> <p class="ansible-option-line"><strong class="ansible-option-configuration">Configuration:</strong></p> <ul> <li>Environment variable: <a class="reference internal" href="../../environment_variables.html#envvar-AWS_URL" id="index-3"><code>AWS_URL</code></a>
</li> <li>
<p>Environment variable: <a class="reference internal" href="../../environment_variables.html#envvar-EC2_URL" id="index-4"><code>EC2_URL</code></a></p> <p>Removed in: major release after 2024-12-01</p> <p>Why: EC2 in the name implied it was limited to EC2 resources. However, it is used for all connections.</p> <p>Alternative: AWS_URL</p> </li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ssm-parameter-lookup-parameter-on-denied"><strong>on_denied</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in amazon.aws 2.0.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Action to take if access to the SSM parameter is denied.</p> <p><code>error</code> will raise a fatal error when access to the SSM parameter is denied.</p> <p><code>skip</code> will silently ignore the denied SSM parameter.</p> <p><code>warn</code> will skip over the denied SSM parameter but issue a warning.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"error"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"skip"</code></li> <li><code>"warn"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ssm-parameter-lookup-parameter-on-missing"><strong>on_missing</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in amazon.aws 2.0.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Action to take if the SSM parameter is missing.</p> <p><code>error</code> will raise a fatal error when the SSM parameter is missing.</p> <p><code>skip</code> will silently ignore the missing SSM parameter.</p> <p><code>warn</code> will skip over the missing SSM parameter but issue a warning.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"error"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"skip"</code></li> <li><code>"warn"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">   
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ssm-parameter-lookup-parameter-profile"><strong id="ansible-collections-amazon-aws-ssm-parameter-lookup-parameter-aws-profile">profile</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: aws_profile, boto_profile</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>A named AWS profile to use for authentication.</p> <p>See the AWS documentation for more information about named profiles <a class="reference external" href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-profiles.html">https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-profiles.html</a>.</p> <p>The <em>profile</em> option is mutually exclusive with the <em>aws_access_key</em>, <em>aws_secret_key</em> and <em>security_token</em> options.</p> <p>The <em>boto_profile</em> alias has been deprecated and will be removed in a release after 2024-12-01.</p> <p class="ansible-option-line"><strong class="ansible-option-configuration">Configuration:</strong></p> <ul class="simple"> <li>Environment variable: <a class="reference internal" href="../../environment_variables.html#envvar-AWS_PROFILE" id="index-5"><code>AWS_PROFILE</code></a>
</li> <li>Environment variable: <a class="reference internal" href="../../environment_variables.html#envvar-AWS_DEFAULT_PROFILE" id="index-6"><code>AWS_DEFAULT_PROFILE</code></a>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ssm-parameter-lookup-parameter-recursive"><strong>recursive</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>A boolean to indicate whether to retrieve all parameters within a hierarchy.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">   
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ssm-parameter-lookup-parameter-region"><strong id="ansible-collections-amazon-aws-ssm-parameter-lookup-parameter-aws-region">region</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: aws_region, ec2_region</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The AWS region to use.</p> <p>See the Amazon AWS documentation for more information <a class="reference external" href="http://docs.aws.amazon.com/general/latest/gr/rande.html#ec2_region">http://docs.aws.amazon.com/general/latest/gr/rande.html#ec2_region</a>.</p> <p class="ansible-option-line"><strong class="ansible-option-configuration">Configuration:</strong></p> <ul> <li>Environment variable: <a class="reference internal" href="../../environment_variables.html#envvar-AWS_REGION" id="index-7"><code>AWS_REGION</code></a>
</li> <li>
<p>Environment variable: <a class="reference internal" href="../../environment_variables.html#envvar-EC2_REGION" id="index-8"><code>EC2_REGION</code></a></p> <p>Removed in: major release after 2024-12-01</p> <p>Why: EC2 in the name implied it was limited to EC2 resources, when it is used for all connections</p> <p>Alternative: AWS_REGION</p> </li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">    
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ssm-parameter-lookup-parameter-secret-key"><strong id="ansible-collections-amazon-aws-ssm-parameter-lookup-parameter-aws-secret-access-key">secret_key</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: aws_secret_access_key, aws_secret_key, ec2_secret_key</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>AWS secret access key.</p> <p>See the AWS documentation for more information about access tokens <a class="reference external" href="https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html#access-keys-and-secret-access-keys">https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html#access-keys-and-secret-access-keys</a>.</p> <p>The <em>secret_key</em> and <em>profile</em> options are mutually exclusive.</p> <p>The <em>aws_secret_access_key</em> alias was added in release 5.1.0 for consistency with the AWS botocore SDK.</p> <p>The <em>ec2_secret_key</em> alias has been deprecated and will be removed in a release after 2024-12-01.</p> <p class="ansible-option-line"><strong class="ansible-option-configuration">Configuration:</strong></p> <ul> <li>Environment variable: <a class="reference internal" href="../../environment_variables.html#envvar-AWS_SECRET_ACCESS_KEY" id="index-9"><code>AWS_SECRET_ACCESS_KEY</code></a>
</li> <li>Environment variable: <a class="reference internal" href="../../environment_variables.html#envvar-AWS_SECRET_KEY" id="index-10"><code>AWS_SECRET_KEY</code></a>
</li> <li>
<p>Environment variable: <a class="reference internal" href="../../environment_variables.html#envvar-EC2_SECRET_KEY" id="index-11"><code>EC2_SECRET_KEY</code></a></p> <p>Removed in: major release after 2024-12-01</p> <p>Why: EC2 in the name implied it was limited to EC2 resources. However, it is used for all connections.</p> <p>Alternative: AWS_SECRET_ACCESS_KEY</p> </li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">     
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ssm-parameter-lookup-parameter-session-token"><strong id="ansible-collections-amazon-aws-ssm-parameter-lookup-parameter-access-token">session_token</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: aws_session_token, security_token, aws_security_token, access_token</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>AWS STS session token for use with temporary credentials.</p> <p>See the AWS documentation for more information about access tokens <a class="reference external" href="https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html#access-keys-and-secret-access-keys">https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html#access-keys-and-secret-access-keys</a>.</p> <p>The <em>security_token</em> and <em>profile</em> options are mutually exclusive.</p> <p>Aliases <em>aws_session_token</em> and <em>session_token</em> were added in release 3.2.0, with the parameter being renamed from <em>security_token</em> to <em>session_token</em> in release 6.0.0.</p> <p>The <em>security_token</em>, <em>aws_security_token</em>, and <em>access_token</em> aliases have been deprecated and will be removed in a release after 2024-12-01.</p> <p class="ansible-option-line"><strong class="ansible-option-configuration">Configuration:</strong></p> <ul> <li>Environment variable: <a class="reference internal" href="../../environment_variables.html#envvar-AWS_SESSION_TOKEN" id="index-12"><code>AWS_SESSION_TOKEN</code></a>
</li> <li>
<p>Environment variable: <a class="reference internal" href="../../environment_variables.html#envvar-AWS_SECURITY_TOKEN" id="index-13"><code>AWS_SECURITY_TOKEN</code></a></p> <p>Removed in: major release after 2024-12-01</p> <p>Why: AWS_SECURITY_TOKEN was used for compatibility with the original boto SDK, support for which has been dropped</p> <p>Alternative: AWS_SESSION_TOKEN</p> </li> <li>
<p>Environment variable: <a class="reference internal" href="../../environment_variables.html#envvar-EC2_SECURITY_TOKEN" id="index-14"><code>EC2_SECURITY_TOKEN</code></a></p> <p>Removed in: major release after 2024-12-01</p> <p>Why: EC2 in the name implied it was limited to EC2 resources. However, it is used for all connections.</p> <p>Alternative: AWS_SESSION_TOKEN</p> </li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-ssm-parameter-lookup-parameter-shortnames"><strong>shortnames</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Indicates whether to return the name only without path if using a parameter hierarchy.</p> <p>The <code><strong><a class="reference internal" href="#ansible-collections-amazon-aws-ssm-parameter-lookup-parameter-shortnames"><span class="std std-ref">shortnames</span></a></strong></code> and <code><strong><a class="reference internal" href="#ansible-collections-amazon-aws-ssm-parameter-lookup-parameter-droppath"><span class="std std-ref">droppath</span></a></strong></code> options are mutually exclusive.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr>  </table> </section> <section id="notes"> <h2>Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>
<strong>Caution:</strong> For modules, environment variables and configuration files are read from the Ansible ‘host’ context and not the ‘controller’ context. As such, files may need to be explicitly copied to the ‘host’. For lookup and connection plugins, environment variables and configuration files are read from the Ansible ‘controller’ context and not the ‘host’ context.</li> <li>The AWS SDK (boto3) that Ansible uses may also read defaults for credentials and other settings, such as the region, from its configuration files in the Ansible ‘host’ context (typically <code>~/.aws/credentials</code>). See <a class="reference external" href="https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html">https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html</a> for more information.</li> </ul> </div> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja"># lookup sample:
- name: lookup ssm parameter store in the current region
  debug: msg="{{ lookup('amazon.aws.aws_ssm', 'Hello' ) }}"

- name: lookup ssm parameter store in specified region
  debug: msg="{{ lookup('amazon.aws.aws_ssm', 'Hello', region='us-east-2' ) }}"

- name: lookup ssm parameter store without decryption
  debug: msg="{{ lookup('amazon.aws.aws_ssm', 'Hello', decrypt=False ) }}"

- name: lookup ssm parameter store using a specified aws profile
  debug: msg="{{ lookup('amazon.aws.aws_ssm', 'Hello', profile='myprofile' ) }}"

- name: lookup ssm parameter store using explicit aws credentials
  debug:
    msg: &gt;-
      {{ lookup('amazon.aws.aws_ssm', 'Hello', access_key=my_aws_access_key, secret_key=my_aws_secret_key, session_token=my_session_token ) }}"

- name: lookup ssm parameter store with all options
  debug: msg="{{ lookup('amazon.aws.aws_ssm', 'Hello', decrypt=false, region='us-east-2', profile='myprofile') }}"

- name: lookup ssm parameter and fail if missing
  debug: msg="{{ lookup('amazon.aws.aws_ssm', 'missing-parameter') }}"

- name: lookup a key which doesn't exist, returning a default ('root')
  debug: msg="{{ lookup('amazon.aws.aws_ssm', 'AdminID', on_missing="skip") | default('root', true) }}"

- name: lookup a key which doesn't exist failing to store it in a fact
  set_fact:
    temp_secret: "{{ lookup('amazon.aws.aws_ssm', '/NoAccess/hiddensecret') }}"
  ignore_errors: true

- name: show fact default to "access failed" if we don't have access
  debug: msg="{{ 'the secret was:' ~ temp_secret | default('could not access secret') }}"

- name: return a dictionary of ssm parameters from a hierarchy path
  debug: msg="{{ lookup('amazon.aws.aws_ssm', '/PATH/to/params', region='ap-southeast-2', bypath=true, recursive=true ) }}"

- name: return a dictionary of ssm parameters from a hierarchy path with shortened names (param instead of /PATH/to/params/foo/bar/param)
  debug: msg="{{ lookup('amazon.aws.aws_ssm', '/PATH/to/params', region='ap-southeast-2', shortnames=true, bypath=true, recursive=true ) }}"

- name: return a dictionary of ssm parameters from a hierarchy path with the heirarchy path dropped (foo/bar/param instead of /PATH/to/params/foo/bar/param)
  debug: msg="{{ lookup('amazon.aws.aws_ssm', '/PATH/to/params', region='ap-southeast-2', droppath=true, bypath=true, recursive=true ) }}"

- name: Iterate over a parameter hierarchy (one iteration per parameter)
  debug: msg='Key contains {{ item.key }} , with value {{ item.value }}'
  loop: "{{ lookup('amazon.aws.aws_ssm', '/demo/', region='ap-southeast-2', bypath=True) | dict2items }}"

- name: Iterate over multiple paths as dictionaries (one iteration per path)
  debug: msg='Path contains {{ item }}'
  loop: "{{ lookup('amazon.aws.aws_ssm', '/demo/', '/demo1/', bypath=True)}}"

- name: lookup ssm parameter warn if access is denied
  debug: msg="{{ lookup('amazon.aws.aws_ssm', 'missing-parameter', on_denied="warn" ) }}"
</pre> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Bill Wang &lt;ozbillwang(at)gmail.com&gt;</li> <li>Marat Bakeev &lt;hawara(at)gmail.com&gt;</li> <li>Michael De La Rue</li> </ul> <div class="admonition hint"> <p class="admonition-title">Hint</p> <p>Configuration entries for each entry type have a low to high priority order. For example, a variable that is lower in the list will override a variable that is higher up.</p> </div> </section> <section id="collection-links"> <h3>Collection links</h3> <ul class="ansible-links"> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/amazon.aws/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc" rel="noopener external" target="_blank">Issue Tracker</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/amazon.aws" rel="noopener external" target="_blank">Repository (Sources)</a></span></li> <li><span><a class="reference internal" href="index.html#communication-for-amazon-aws"><span class="std std-ref">Communication</span></a></span></li> </ul> </section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2024 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/amazon/aws/ssm_parameter_lookup.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/amazon/aws/ssm_parameter_lookup.html</a>
  </p>
</div>
