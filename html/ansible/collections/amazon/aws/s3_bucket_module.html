<section id="amazon-aws-s3-bucket-module-manage-s3-buckets-in-aws-digitalocean-ceph-walrus-fakes3-and-storagegrid"> <h1>amazon.aws.s3_bucket module – Manage S3 buckets in AWS, DigitalOcean, Ceph, Walrus, FakeS3 and StorageGRID</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This module is part of the <a class="reference external" href="https://galaxy.ansible.com/ui/repo/published/amazon/aws/">amazon.aws collection</a> (version 8.2.1).</p> <p>You might already have this collection installed if you are using the <code>ansible</code> package. It is not included in <code>ansible-core</code>. To check whether it is installed, run <code>ansible-galaxy collection list</code>.</p> <p>To install it, use: <code>ansible-galaxy collection install amazon.aws</code>. You need further requirements to be able to use this module, see <a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-requirements"><span class="std std-ref">Requirements</span></a> for details.</p> <p>To use it in a playbook, specify: <code>amazon.aws.s3_bucket</code>.</p> </div> <p class="ansible-version-added">New in amazon.aws 1.0.0</p>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id4">Notes</a></li> <li><a class="reference internal" href="#examples" id="id5">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id6">Return Values</a></li> </ul>  <section id="synopsis"> <h2>Synopsis</h2> <ul class="simple"> <li>Manage S3 buckets.</li> <li>Compatible with AWS, DigitalOcean, Ceph, Walrus, FakeS3 and StorageGRID.</li> <li>When using non-AWS services, <code><strong><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-endpoint-url"><span class="std std-ref">endpoint_url</span></a></strong></code> should be specified.</li> </ul> </section> <section id="requirements"> <h2 id="ansible-collections-amazon-aws-s3-bucket-module-requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>python &gt;= 3.6</li> <li>boto3 &gt;= 1.26.0</li> <li>botocore &gt;= 1.29.0</li> </ul> </section> <section id="parameters"> <h2>Parameters</h2> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Parameter</p></th> <th class="head"><p>Comments</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-accelerate-enabled"><strong>accelerate_enabled</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in amazon.aws 8.1.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Enables Amazon S3 Transfer Acceleration, sent data will be routed to Amazon S3 over an optimized network path.</p> <p>Transfer Acceleration is not available in AWS GovCloud (US).</p> <p>See <a class="reference external" href="https://docs.aws.amazon.com/govcloud-us/latest/UserGuide/govcloud-s3.html#govcloud-S3-diffs">https://docs.aws.amazon.com/govcloud-us/latest/UserGuide/govcloud-s3.html#govcloud-S3-diffs</a>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">    
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-ec2-access-key"><strong id="ansible-collections-amazon-aws-s3-bucket-module-parameter-access-key">access_key</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: aws_access_key_id, aws_access_key, ec2_access_key</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>AWS access key ID.</p> <p>See the AWS documentation for more information about access tokens <a class="reference external" href="https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html#access-keys-and-secret-access-keys">https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html#access-keys-and-secret-access-keys</a>.</p> <p>The <code>AWS_ACCESS_KEY_ID</code>, <code>AWS_ACCESS_KEY</code> or <code>EC2_ACCESS_KEY</code> environment variables may also be used in decreasing order of preference.</p> <p>The <em>aws_access_key</em> and <em>profile</em> options are mutually exclusive.</p> <p>The <em>aws_access_key_id</em> alias was added in release 5.1.0 for consistency with the AWS botocore SDK.</p> <p>The <em>ec2_access_key</em> alias has been deprecated and will be removed in a release after 2024-12-01.</p> <p>Support for the <code>EC2_ACCESS_KEY</code> environment variable has been deprecated and will be removed in a release after 2024-12-01.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-acl"><strong>acl</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in amazon.aws 3.1.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>The canned ACL to apply to the bucket.</p> <p>If your bucket uses the bucket owner enforced setting for S3 Object Ownership, ACLs are disabled and no longer affect permissions.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"private"</code></li> <li><code>"public-read"</code></li> <li><code>"public-read-write"</code></li> <li><code>"authenticated-read"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-aws-ca-bundle"><strong>aws_ca_bundle</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">path</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The location of a CA Bundle to use when validating SSL certificates.</p> <p>The <code>AWS_CA_BUNDLE</code> environment variable may also be used.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-aws-config"><strong>aws_config</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>A dictionary to modify the botocore configuration.</p> <p>Parameters can be found in the AWS documentation <a class="reference external" href="https://botocore.amazonaws.com/v1/documentation/api/latest/reference/config.html#botocore.config.Config">https://botocore.amazonaws.com/v1/documentation/api/latest/reference/config.html#botocore.config.Config</a>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-bucket-key-enabled"><strong>bucket_key_enabled</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in amazon.aws 4.1.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Enable S3 Bucket Keys for SSE-KMS on new objects.</p> <p>See the AWS documentation for more information <a class="reference external" href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/bucket-key.html">https://docs.aws.amazon.com/AmazonS3/latest/userguide/bucket-key.html</a>.</p> <p>Bucket Key encryption is only supported if <code><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-encryption"><span class="std std-ref">encryption=aws:kms</span></a></code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-rgw"><strong id="ansible-collections-amazon-aws-s3-bucket-module-parameter-ceph">ceph</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: rgw</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Enable API compatibility with Ceph RGW.</p> <p>It takes into account the S3 API subset working with Ceph in order to provide the same module behaviour where possible.</p> <p>Requires <code><strong><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-endpoint-url"><span class="std std-ref">endpoint_url</span></a></strong></code> if <code><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-ceph"><span class="std std-ref">ceph=true</span></a></code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-debug-botocore-endpoint-logs"><strong>debug_botocore_endpoint_logs</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Use a <code>botocore.endpoint</code> logger to parse the unique (rather than total) <code>"resource:action"</code> API calls made during a task, outputing the set to the resource_actions key in the task results. Use the <code>aws_resource_action</code> callback to output to total list made during a playbook.</p> <p>The <code>ANSIBLE_DEBUG_BOTOCORE_LOGS</code> environment variable may also be used.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-delete-object-ownership"><strong>delete_object_ownership</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in amazon.aws 2.0.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Delete bucket’s ownership controls.</p> <p>This option cannot be used together with a <code><strong><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-object-ownership"><span class="std std-ref">object_ownership</span></a></strong></code> definition.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-delete-public-access"><strong>delete_public_access</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in amazon.aws 1.3.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Delete public access block configuration from bucket.</p> <p>This option cannot be used together with a <code><strong><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-public-access"><span class="std std-ref">public_access</span></a></strong></code> definition.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-dualstack"><strong>dualstack</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in amazon.aws 6.0.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Enables Amazon S3 Dual-Stack Endpoints, allowing S3 communications using both IPv4 and IPv6.</p> <p>Mutually exclusive with <code><strong><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-endpoint-url"><span class="std std-ref">endpoint_url</span></a></strong></code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-encryption"><strong>encryption</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Describes the default server-side encryption to apply to new objects in the bucket. In order to remove the server-side encryption, the encryption needs to be set to ‘none’ explicitly.</p> <p>Note: Since January 2023 Amazon S3 doesn’t support disabling encryption on S3 buckets.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"none"</code></li> <li><code>"AES256"</code></li> <li><code>"aws:kms"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-encryption-key-id"><strong>encryption_key_id</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>KMS master key ID to use for the default encryption.</p> <p>If not specified then it will default to the AWS provided KMS key.</p> <p>This parameter is only supported if <code><strong><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-encryption"><span class="std std-ref">encryption</span></a></strong></code> is <code>aws:kms</code>.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">    
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-s3-url"><strong id="ansible-collections-amazon-aws-s3-bucket-module-parameter-aws-endpoint-url">endpoint_url</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: ec2_url, aws_endpoint_url, s3_url</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>URL to connect to instead of the default AWS endpoints. While this can be used to connection to other AWS-compatible services the amazon.aws and community.aws collections are only tested against AWS.</p> <p>The <code>AWS_URL</code> or <code>EC2_URL</code> environment variables may also be used, in decreasing order of preference.</p> <p>The <em>ec2_url</em> and <em>s3_url</em> aliases have been deprecated and will be removed in a release after 2024-12-01.</p> <p>Support for the <code>EC2_URL</code> environment variable has been deprecated and will be removed in a release after 2024-12-01.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-force"><strong>force</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>When trying to delete a bucket, delete all keys (including versions and delete markers) in the bucket first (an S3 bucket must be empty for a successful deletion).</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-inventory"><strong>inventory</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Enable S3 Inventory, saving list of the objects and their corresponding metadata on a daily or weekly basis for an S3 bucket.</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-inventory-destination"><strong>destination</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span> / <span class="ansible-option-required">required</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Contains information about where to publish the inventory results.</p> </div>
</td> </tr> <tr>
<td>


<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-inventory-destination-account-id"><strong>account_id</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>


<div class="ansible-option-cell">
<p>The account ID that owns the destination S3 bucket. If no account ID is provided, the owner is not validated before exporting data.</p> </div>
</td> </tr> <tr>
<td>


<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-inventory-destination-bucket"><strong>bucket</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div>
</td> <td>


<div class="ansible-option-cell">
<p>The Amazon Resource Name (ARN) of the bucket where inventory results will be published.</p> </div>
</td> </tr> <tr>
<td>


<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-inventory-destination-format"><strong>format</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div>
</td> <td>


<div class="ansible-option-cell">
<p>Specifies the output format of the inventory results.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"CSV"</code></li> <li><code>"ORC"</code></li> <li><code>"Parquet"</code></li> </ul> </div>
</td> </tr> <tr>
<td>


<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-inventory-destination-prefix"><strong>prefix</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>


<div class="ansible-option-cell">
<p>The prefix that is prepended to all inventory results.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-inventory-filter"><strong>filter</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The prefix that an object must have to be included in the inventory results.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-inventory-id"><strong>id</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The ID used to identify the inventory configuration.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-inventory-included-object-versions"><strong>included_object_versions</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Object versions to include in the inventory list. If set to All, the list includes all the object versions, which adds the version-related fields VersionId, IsLatest, and DeleteMarker to the list. If set to Current, the list does not contain these version-related fields.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"All"</code></li> <li><code>"Current"</code></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-inventory-optional-fields"><strong>optional_fields</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Contains the optional fields that are included in the inventory results.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"Size"</code></li> <li><code>"LastModifiedDate"</code></li> <li><code>"StorageClass"</code></li> <li><code>"ETag"</code></li> <li><code>"IsMultipartUploaded"</code></li> <li><code>"ReplicationStatus"</code></li> <li><code>"EncryptionStatus"</code></li> <li><code>"ObjectLockRetainUntilDate"</code></li> <li><code>"ObjectLockMode"</code></li> <li><code>"ObjectLockLegalHoldStatus"</code></li> <li><code>"IntelligentTieringAccessTier"</code></li> <li><code>"BucketKeyStatus"</code></li> <li><code>"ChecksumAlgorithm"</code></li> <li><code>"ObjectAccessControlList"</code></li> <li><code>"ObjectOwner"</code></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-inventory-schedule"><strong>schedule</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Specifies the schedule for generating inventory results.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"Daily"</code></li> <li><code>"Weekly"</code></li> </ul> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-name"><strong>name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Name of the S3 bucket.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-object-lock-default-retention"><strong>object_lock_default_retention</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> <p><em class="ansible-option-versionadded">added in amazon.aws 8.1.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Default Object Lock configuration that will be applied by default to every new object placed in the specified bucket.</p> <p><code><strong><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-object-lock-enabled"><span class="std std-ref">object_lock_enabled</span></a></strong></code> must be included and set to <code>True</code>.</p> <p>Object lock retention policy can’t be removed.</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-object-lock-default-retention-days"><strong>days</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The number of days that you want to specify for the default retention period.</p> <p>Mutually exclusive with <code><strong><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-object-lock-default-retention-years"><span class="std std-ref">object_lock_default_retention.years</span></a></strong></code>.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-object-lock-default-retention-mode"><strong>mode</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span> / <span class="ansible-option-required">required</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Type of retention modes.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"GOVERNANCE"</code></li> <li><code>"COMPLIANCE"</code></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-object-lock-default-retention-years"><strong>years</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">integer</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The number of years that you want to specify for the default retention period.</p> <p>Mutually exclusive with <code><strong><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-object-lock-default-retention-days"><span class="std std-ref">object_lock_default_retention.days</span></a></strong></code>.</p> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-object-lock-enabled"><strong>object_lock_enabled</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in amazon.aws 5.3.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Whether S3 Object Lock to be enabled.</p> <p>Defaults to <code>false</code> when creating a new bucket.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-object-ownership"><strong>object_ownership</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> <p><em class="ansible-option-versionadded">added in amazon.aws 2.0.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Allow bucket’s ownership controls.</p> <p><code>BucketOwnerEnforced</code> - ACLs are disabled and no longer affect access permissions to your bucket. Requests to set or update ACLs fail. However, requests to read ACLs are supported. Bucket owner has full ownership and control. Object writer no longer has full ownership and control.</p> <p><code>BucketOwnerPreferred</code> - Objects uploaded to the bucket change ownership to the bucket owner if the objects are uploaded with the bucket-owner-full-control canned ACL.</p> <p><code>ObjectWriter</code> - The uploading account will own the object if the object is uploaded with the bucket-owner-full-control canned ACL.</p> <p>This option cannot be used together with a <code><strong><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-delete-object-ownership"><span class="std std-ref">delete_object_ownership</span></a></strong></code> definition.</p> <p><code>BucketOwnerEnforced</code> has been added in version 3.2.0.</p> <p>Note: At the end of April 2023 Amazon updated the default setting to <code>BucketOwnerEnforced</code>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>"BucketOwnerEnforced"</code></li> <li><code>"BucketOwnerPreferred"</code></li> <li><code>"ObjectWriter"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-policy"><strong>policy</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">json</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The JSON policy as a string. Set to the string <code>"null"</code> to force the absence of a policy.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-profile"><strong id="ansible-collections-amazon-aws-s3-bucket-module-parameter-aws-profile">profile</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: aws_profile</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>A named AWS profile to use for authentication.</p> <p>See the AWS documentation for more information about named profiles <a class="reference external" href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-profiles.html">https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-profiles.html</a>.</p> <p>The <code>AWS_PROFILE</code> environment variable may also be used.</p> <p>The <em>profile</em> option is mutually exclusive with the <em>aws_access_key</em>, <em>aws_secret_key</em> and <em>security_token</em> options.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-public-access"><strong>public_access</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> <p><em class="ansible-option-versionadded">added in amazon.aws 1.3.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Configure public access block for S3 bucket.</p> <p>This option cannot be used together with <code><strong><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-delete-public-access"><span class="std std-ref">delete_public_access</span></a></strong></code>.</p> <p>Note: At the end of April 2023 Amazon updated the default settings to block public access by default. While the defaults for this module remain unchanged, it is necessary to explicitly pass the <code><strong><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-public-access"><span class="std std-ref">public_access</span></a></strong></code> parameter to enable public access ACLs.</p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-public-access-block-public-acls"><strong>block_public_acls</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Sets BlockPublicAcls value.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-public-access-block-public-policy"><strong>block_public_policy</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Sets BlockPublicPolicy value.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-public-access-ignore-public-acls"><strong>ignore_public_acls</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Sets IgnorePublicAcls value.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-public-access-restrict-public-buckets"><strong>restrict_public_buckets</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Sets RestrictPublicAcls value.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>false</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>true</code></li> </ul> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-purge-tags"><strong>purge_tags</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>If <em>purge_tags=true</em> and <em>tags</em> is set, existing tags will be purged from the resource to match exactly what is defined by <em>tags</em> parameter.</p> <p>If the <em>tags</em> parameter is not set then tags will not be modified, even if <em>purge_tags=True</em>.</p> <p>Tag keys beginning with <code>aws:</code> are reserved by Amazon and can not be modified. As such they will be ignored for the purposes of the <em>purge_tags</em> parameter. See the Amazon documentation for more information <a class="reference external" href="https://docs.aws.amazon.com/general/latest/gr/aws_tagging.html#tag-conventions">https://docs.aws.amazon.com/general/latest/gr/aws_tagging.html#tag-conventions</a>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">   
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-region"><strong id="ansible-collections-amazon-aws-s3-bucket-module-parameter-aws-region">region</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: aws_region, ec2_region</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>The AWS region to use.</p> <p>For global services such as IAM, Route53 and CloudFront, <em>region</em> is ignored.</p> <p>The <code>AWS_REGION</code> or <code>EC2_REGION</code> environment variables may also be used.</p> <p>See the Amazon AWS documentation for more information <a class="reference external" href="http://docs.aws.amazon.com/general/latest/gr/rande.html#ec2_region">http://docs.aws.amazon.com/general/latest/gr/rande.html#ec2_region</a>.</p> <p>The <code>ec2_region</code> alias has been deprecated and will be removed in a release after 2024-12-01</p> <p>Support for the <code>EC2_REGION</code> environment variable has been deprecated and will be removed in a release after 2024-12-01.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-requester-pays"><strong>requester_pays</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>With Requester Pays buckets, the requester instead of the bucket owner pays the cost of the request and the data download from the bucket.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">    
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-secret-key"><strong id="ansible-collections-amazon-aws-s3-bucket-module-parameter-aws-secret-access-key">secret_key</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: aws_secret_access_key, aws_secret_key, ec2_secret_key</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>AWS secret access key.</p> <p>See the AWS documentation for more information about access tokens <a class="reference external" href="https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html#access-keys-and-secret-access-keys">https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html#access-keys-and-secret-access-keys</a>.</p> <p>The <code>AWS_SECRET_ACCESS_KEY</code>, <code>AWS_SECRET_KEY</code>, or <code>EC2_SECRET_KEY</code> environment variables may also be used in decreasing order of preference.</p> <p>The <em>secret_key</em> and <em>profile</em> options are mutually exclusive.</p> <p>The <em>aws_secret_access_key</em> alias was added in release 5.1.0 for consistency with the AWS botocore SDK.</p> <p>The <em>ec2_secret_key</em> alias has been deprecated and will be removed in a release after 2024-12-01.</p> <p>Support for the <code>EC2_SECRET_KEY</code> environment variable has been deprecated and will be removed in a release after 2024-12-01.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">     
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-session-token"><strong id="ansible-collections-amazon-aws-s3-bucket-module-parameter-access-token">session_token</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: aws_session_token, security_token, aws_security_token, access_token</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>AWS STS session token for use with temporary credentials.</p> <p>See the AWS documentation for more information about access tokens <a class="reference external" href="https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html#access-keys-and-secret-access-keys">https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html#access-keys-and-secret-access-keys</a>.</p> <p>The <code>AWS_SESSION_TOKEN</code>, <code>AWS_SECURITY_TOKEN</code> or <code>EC2_SECURITY_TOKEN</code> environment variables may also be used in decreasing order of preference.</p> <p>The <em>security_token</em> and <em>profile</em> options are mutually exclusive.</p> <p>Aliases <em>aws_session_token</em> and <em>session_token</em> were added in release 3.2.0, with the parameter being renamed from <em>security_token</em> to <em>session_token</em> in release 6.0.0.</p> <p>The <em>security_token</em>, <em>aws_security_token</em>, and <em>access_token</em> aliases have been deprecated and will be removed in a release after 2024-12-01.</p> <p>Support for the <code>EC2_SECRET_KEY</code> and <code>AWS_SECURITY_TOKEN</code> environment variables has been deprecated and will be removed in a release after 2024-12-01.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-state"><strong>state</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Create or remove the S3 bucket.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li>
<code><strong>"present"</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> <li><code>"absent"</code></li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell">  
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-tags"><strong id="ansible-collections-amazon-aws-s3-bucket-module-parameter-resource-tags">tags</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-aliases">aliases: resource_tags</span></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>A dictionary representing the tags to be applied to the resource.</p> <p>If the <em>tags</em> parameter is not set then tags will not be modified.</p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-validate-bucket-name"><strong>validate_bucket_name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> <p><em class="ansible-option-versionadded">added in amazon.aws 3.1.0</em></p> </div></td> <td><div class="ansible-option-cell">
<p>Whether the bucket name should be validated to conform to AWS S3 naming rules.</p> <p>On by default, this may be disabled for S3 backends that do not enforce these rules.</p> <p>See <a class="reference external" href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/bucketnamingrules.html">https://docs.aws.amazon.com/AmazonS3/latest/userguide/bucketnamingrules.html</a>.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-validate-certs"><strong>validate_certs</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>When set to <code>false</code>, SSL certificates will not be validated for communication with the AWS APIs.</p> <p>Setting <em>validate_certs=false</em> is strongly discouraged, as an alternative, consider setting <em>aws_ca_bundle</em> instead.</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li>
<code><strong>true</strong></code> <span class="ansible-option-choices-default-mark">← (default)</span>
</li> </ul> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-parameter-versioning"><strong>versioning</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Whether versioning is enabled or disabled (note that once versioning is enabled, it can only be suspended).</p> <p class="ansible-option-line"><strong class="ansible-option-choices">Choices:</strong></p> <ul class="simple"> <li><code>false</code></li> <li><code>true</code></li> </ul> </div></td> </tr>  </table> </section> <section id="notes"> <h2>Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>If <code>requestPayment</code>, <code>policy</code>, <code>tagging</code> or <code>versioning</code> operations/API aren’t implemented by the endpoint, module doesn’t fail if each parameter satisfies the following condition. <code><strong><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-requester-pays"><span class="std std-ref">requester_pays</span></a></strong></code> is <code>false</code>, <code><strong><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-policy"><span class="std std-ref">policy</span></a></strong></code>, <code><strong><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-tags"><span class="std std-ref">tags</span></a></strong></code>, and <code><strong><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-versioning"><span class="std std-ref">versioning</span></a></strong></code> are <code>None</code>.</li> <li>In release 5.0.0 the <code><strong><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-s3-url"><span class="std std-ref">s3_url</span></a></strong></code> parameter was merged into the <code><strong><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-endpoint-url"><span class="std std-ref">endpoint_url</span></a></strong></code> parameter, <code><strong><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-s3-url"><span class="std std-ref">s3_url</span></a></strong></code> remains as an alias for <code><strong><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-endpoint-url"><span class="std std-ref">endpoint_url</span></a></strong></code>.</li> <li>For Walrus <code><strong><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-endpoint-url"><span class="std std-ref">endpoint_url</span></a></strong></code> should be set to the FQDN of the endpoint with neither scheme nor path.</li> <li>Support for the <code>S3_URL</code> environment variable has been deprecated and will be removed in a release after 2024-12-01, please use the <code><strong><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-endpoint-url"><span class="std std-ref">endpoint_url</span></a></strong></code> parameter or the <a class="reference internal" href="../../environment_variables.html#envvar-AWS_URL"><code>AWS_URL</code></a> environment variable.</li> <li>
<strong>Caution:</strong> For modules, environment variables and configuration files are read from the Ansible ‘host’ context and not the ‘controller’ context. As such, files may need to be explicitly copied to the ‘host’. For lookup and connection plugins, environment variables and configuration files are read from the Ansible ‘controller’ context and not the ‘host’ context.</li> <li>The AWS SDK (boto3) that Ansible uses may also read defaults for credentials and other settings, such as the region, from its configuration files in the Ansible ‘host’ context (typically <code>~/.aws/credentials</code>). See <a class="reference external" href="https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html">https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html</a> for more information.</li> </ul> </div> </section> <section id="examples"> <h2>Examples</h2> <pre data-language="yaml+jinja"># Note: These examples do not set authentication details, see the AWS Guide for details.

# Create a simple S3 bucket
- amazon.aws.s3_bucket:
    name: mys3bucket
    state: present

# Create a simple S3 bucket on Ceph Rados Gateway
- amazon.aws.s3_bucket:
    name: mys3bucket
    endpoint_url: http://your-ceph-rados-gateway-server.xxx
    ceph: true

# Remove an S3 bucket and any keys it contains
- amazon.aws.s3_bucket:
    name: mys3bucket
    state: absent
    force: true

# Create a bucket, add a policy from a file, enable requester pays, enable versioning and tag
- amazon.aws.s3_bucket:
    name: mys3bucket
    policy: "{{ lookup('file','policy.json') }}"
    requester_pays: true
    versioning: true
    tags:
      example: tag1
      another: tag2

# Create a simple DigitalOcean Spaces bucket using their provided regional endpoint
- amazon.aws.s3_bucket:
    name: mydobucket
    endpoint_url: 'https://nyc3.digitaloceanspaces.com'

# Create a bucket with AES256 encryption
- amazon.aws.s3_bucket:
    name: mys3bucket
    state: present
    encryption: "AES256"

# Create a bucket with aws:kms encryption, KMS key
- amazon.aws.s3_bucket:
    name: mys3bucket
    state: present
    encryption: "aws:kms"
    encryption_key_id: "arn:aws:kms:us-east-1:1234/5678example"

# Create a bucket with aws:kms encryption, Bucket key
- amazon.aws.s3_bucket:
    name: mys3bucket
    bucket_key_enabled: true
    encryption: "aws:kms"

# Create a bucket with aws:kms encryption, default key
- amazon.aws.s3_bucket:
    name: mys3bucket
    state: present
    encryption: "aws:kms"

# Create a bucket with public policy block configuration
- amazon.aws.s3_bucket:
    name: mys3bucket
    state: present
    public_access:
      block_public_acls: true
      ignore_public_acls: true
      ## keys == 'false' can be omitted, undefined keys defaults to 'false'
      # block_public_policy: false
      # restrict_public_buckets: false

# Delete public policy block from bucket
- amazon.aws.s3_bucket:
    name: mys3bucket
    state: present
    delete_public_access: true

# Create a bucket with object ownership controls set to ObjectWriter
- amazon.aws.s3_bucket:
    name: mys3bucket
    state: present
    object_ownership: ObjectWriter

# Delete onwership controls from bucket
- amazon.aws.s3_bucket:
    name: mys3bucket
    state: present
    delete_object_ownership: true

# Delete a bucket policy from bucket
- amazon.aws.s3_bucket:
    name: mys3bucket
    state: present
    policy: "null"

# This example grants public-read to everyone on bucket using ACL
- amazon.aws.s3_bucket:
    name: mys3bucket
    state: present
    acl: public-read

# Enable transfer acceleration
- amazon.aws.s3_bucket:
    name: mys3bucket
    state: present
    accelerate_enabled: true

# Default Object Lock retention
- amazon.aws.s3_bucket:
    name: mys3bucket
    state: present
    object_lock_enabled: true
    object_lock_default_retention:
      mode: governance
      days: 1
# Bucket with inventory configuration:
- amazon.aws.s3_bucket:
    name: mys3bucket
    state: present
    inventory:
      - id: mys3bucket-inventory-id
        destination:
          bucket: "arn:aws:s3:::mys3inventorybucket"
        optional_fields:
          - "Size"
        included_object_versions: "All"
        schedule: "Weekly"
</pre> </section> <section id="return-values"> <h2>Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values.html#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="longtable ansible-option-table docutils align-default" style="width: 100%"> <thead> <tr>
<th class="head"><p>Key</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-return-accelerate-enabled"><strong>accelerate_enabled</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>S3 bucket acceleration status.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> <code><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-state"><span class="std std-ref">state=present</span></a></code></p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>true</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-return-acl"><strong>acl</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>S3 bucket’s canned ACL.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> when <code><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-state"><span class="std std-ref">state=present</span></a></code>.</p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>"public-read"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-return-bucket-inventory"><strong>bucket_inventory</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">list</span> / <span class="ansible-option-elements">elements=string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>S3 bucket inventory configuration.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> when <code><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-state"><span class="std std-ref">state=present</span></a></code></p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>[{"Destination": {"S3BucketDestination": {"Bucket": "arn:aws:s3:::9c2a337ba5fd64de777f499441f83093-inventory-target", "Format": "CSV"}}, "Id": "9c2a337ba5fd64de777f499441f83093-inventory-target", "IncludedObjectVersions": "All", "IsEnabled": true, "OptionalFields": [], "Schedule": {"Frequency": "Daily"}}]</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-return-encryption"><strong>encryption</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Server-side encryption of the objects in the S3 bucket.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> when <code><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-state"><span class="std std-ref">state=present</span></a></code></p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>{"SSEAlgorithm": "AES256"}</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-return-name"><strong>name</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Bucket name.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> when <code><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-state"><span class="std std-ref">state=present</span></a></code></p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>"a-testing-bucket-name"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-return-object-lock-default-retention"><strong>object_lock_default_retention</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>S3 bucket’s object lock retention policy.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> when <code><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-state"><span class="std std-ref">state=present</span></a></code></p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>{"Days": 1, "Mode": "GOVERNANCE", "Years": 0}</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-return-object-lock-enabled"><strong>object_lock_enabled</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Whether S3 Object Lock is enabled.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> when <code><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-state"><span class="std std-ref">state=present</span></a></code></p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>false</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-return-object-ownership"><strong>object_ownership</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div></td> <td><div class="ansible-option-cell">
<p>S3 bucket’s ownership controls.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> when <code><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-state"><span class="std std-ref">state=present</span></a></code></p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>"BucketOwnerPreferred"</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-return-policy"><strong>policy</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>S3 bucket’s policy.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> when <code><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-state"><span class="std std-ref">state=present</span></a></code></p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>{"Statement": [{"Action": "s3:GetObject", "Effect": "Allow", "Principal": "*", "Resource": "arn:aws:s3:::2d3ce10a8210d36d6b4d23b822892074complex/*", "Sid": "AddPerm"}], "Version": "2012-10-17"}</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-return-public-access-block"><strong>public_access_block</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Bucket public access block configuration.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> when <code><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-state"><span class="std std-ref">state=present</span></a></code></p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>{"PublicAccessBlockConfiguration": {"BlockPublicAcls": true, "BlockPublicPolicy": true, "IgnorePublicAcls": true, "RestrictPublicBuckets": true}}</code></p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-return-public-access-block-publicaccessblockconfiguration"><strong>PublicAccessBlockConfiguration</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The PublicAccessBlock configuration currently in effect for this Amazon S3 bucket.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> success</p> </div>
</td> </tr> <tr>
<td>


<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-return-public-access-block-publicaccessblockconfiguration-blockpublicacls"><strong>BlockPublicAcls</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>


<div class="ansible-option-cell">
<p>Specifies whether Amazon S3 should block public access control lists (ACLs) for this bucket and objects in this bucket.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> success</p> </div>
</td> </tr> <tr>
<td>


<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-return-public-access-block-publicaccessblockconfiguration-blockpublicpolicy"><strong>BlockPublicPolicy</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>


<div class="ansible-option-cell">
<p>Specifies whether Amazon S3 should block public bucket policies for this bucket.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> success</p> </div>
</td> </tr> <tr>
<td>


<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-return-public-access-block-publicaccessblockconfiguration-ignorepublicacls"><strong>IgnorePublicAcls</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>


<div class="ansible-option-cell">
<p>Specifies whether Amazon S3 should ignore public ACLs for this bucket and objects in this bucket.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> success</p> </div>
</td> </tr> <tr>
<td>


<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-return-public-access-block-publicaccessblockconfiguration-restrictpublicbuckets"><strong>RestrictPublicBuckets</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div>
</td> <td>


<div class="ansible-option-cell">
<p>Specifies whether Amazon S3 should restrict public bucket policies for this bucket.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> success</p> </div>
</td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-return-requester-pays"><strong>requester_pays</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">boolean</span></p> </div></td> <td><div class="ansible-option-cell">
<p>Indicates that the requester was successfully charged for the request.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> when <code><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-state"><span class="std std-ref">state=present</span></a></code></p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>true</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-return-tags"><strong>tags</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>S3 bucket’s tags.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> when <code><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-state"><span class="std std-ref">state=present</span></a></code></p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>{"Tag1": "tag1", "Tag2": "tag2"}</code></p> </div></td> </tr> <tr>
<td><div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-return-versioning"><strong>versioning</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">dictionary</span></p> </div></td> <td><div class="ansible-option-cell">
<p>S3 bucket’s versioning configuration.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> when <code><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-state"><span class="std std-ref">state=present</span></a></code></p> <p class="ansible-option-line ansible-option-sample"><strong class="ansible-option-sample-bold">Sample:</strong> <code>{"MfaDelete": "Disabled", "Versioning": "Enabled"}</code></p> </div></td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-return-versioning-mfadelete"><strong>MfaDelete</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>Specifies whether MFA delete is enabled in the bucket versioning configuration.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> when <code><a class="reference internal" href="#ansible-collections-amazon-aws-s3-bucket-module-parameter-state"><span class="std std-ref">state=presnet</span></a></code> and MfaDelete configured on bucket.</p> </div>
</td> </tr> <tr>
<td>

<div class="ansible-option-cell"> 
<p class="ansible-option-title" id="ansible-collections-amazon-aws-s3-bucket-module-return-versioning-versioning"><strong>Versioning</strong></p> <p class="ansible-option-type-line"><span class="ansible-option-type">string</span></p> </div>
</td> <td>

<div class="ansible-option-cell">
<p>The versioning state of the bucket.</p> <p class="ansible-option-line"><strong class="ansible-option-returned-bold">Returned:</strong> always</p> </div>
</td> </tr>  </table> <section id="authors"> <h3>Authors</h3> <ul class="simple"> <li>Rob White (@wimnat)</li> <li>Aubin Bikouo (@abikouo)</li> </ul> </section> <section id="collection-links"> <h3>Collection links</h3> <ul class="ansible-links"> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/amazon.aws/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc" rel="noopener external" target="_blank">Issue Tracker</a></span></li> <li><span><a aria-role="button" class="ansible-link reference external" href="https://github.com/ansible-collections/amazon.aws" rel="noopener external" target="_blank">Repository (Sources)</a></span></li> <li><span><a class="reference internal" href="index.html#communication-for-amazon-aws"><span class="std std-ref">Communication</span></a></span></li> </ul> </section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2024 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections/amazon/aws/s3_bucket_module.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections/amazon/aws/s3_bucket_module.html</a>
  </p>
</div>
