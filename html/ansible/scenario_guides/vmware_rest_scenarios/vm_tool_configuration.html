<h1 id="vmware-rest-vm-tool-configuration">How to configure the VMware tools of a running virtual machine</h1>  <ul class="simple" id="how-to-configure-the-vmware-tools-of-a-running-virtual-machine"> <li><a class="reference internal" href="#introduction" id="id2">Introduction</a></li> <li><a class="reference internal" href="#scenario-requirements" id="id3">Scenario requirements</a></li> <li>
<p><a class="reference internal" href="#how-to-change-the-upgrade-policy" id="id4">How to change the upgrade policy</a></p> <ul> <li>
<p><a class="reference internal" href="#change-the-upgrade-policy-to-manual" id="id5">Change the upgrade policy to MANUAL</a></p> <ul> <li><a class="reference internal" href="#result" id="id6">Result</a></li> </ul> </li> <li>
<p><a class="reference internal" href="#change-the-upgrade-policy-to-upgrade-at-power-cycle" id="id7">Change the upgrade policy to UPGRADE_AT_POWER_CYCLE</a></p> <ul> <li><a class="reference internal" href="#id1" id="id8">Result</a></li> </ul> </li> </ul> </li> </ul>   <h2 id="introduction">Introduction</h2> <p>This section show you how to collection information from a running virtual machine.</p>   <h2 id="scenario-requirements">Scenario requirements</h2> <p>Youâ€™ve already followed <a class="reference internal" href="run_a_vm.html#vmware-rest-run-a-vm"><span class="std std-ref">How to run a virtual machine</span></a> and your virtual machine runs VMware Tools.</p>   <h2 id="how-to-change-the-upgrade-policy">How to change the upgrade policy</h2>  <h3 id="change-the-upgrade-policy-to-manual">Change the upgrade policy to MANUAL</h3> <p>You can adjust the VMware Tools upgrade policy with the <code>vcenter_vm_tools</code> module.</p> <pre data-language="YAML+Jinja">- name: Change vm-tools upgrade policy to MANUAL
  vmware.vmware_rest.vcenter_vm_tools:
    vm: '{{ test_vm1_info.id }}'
    upgrade_policy: MANUAL
  register: _result
</pre>  <h4 id="result">Result</h4> <pre data-language="YAML+Jinja">{
    "id": null,
    "changed": true
}
</pre>    <h3 id="change-the-upgrade-policy-to-upgrade-at-power-cycle">Change the upgrade policy to UPGRADE_AT_POWER_CYCLE</h3> <pre data-language="YAML+Jinja">- name: Change vm-tools upgrade policy to UPGRADE_AT_POWER_CYCLE
  vmware.vmware_rest.vcenter_vm_tools:
    vm: '{{ test_vm1_info.id }}'
    upgrade_policy: UPGRADE_AT_POWER_CYCLE
  register: _result
</pre>  <h4 id="id1">Result</h4> <pre data-language="YAML+Jinja">{
    "id": null,
    "changed": true
}
</pre><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2021 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/scenario_guides/vmware_rest_scenarios/vm_tool_configuration.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/scenario_guides/vmware_rest_scenarios/vm_tool_configuration.html</a>
  </p>
</div>
