<h1 id="vmware-rest-run-a-vm">How to run a virtual machine</h1>  <ul class="simple" id="how-to-run-a-virtual-machine"> <li><a class="reference internal" href="#introduction" id="id3">Introduction</a></li> <li>
<p><a class="reference internal" href="#power-information" id="id4">Power information</a></p> <ul> <li><a class="reference internal" href="#result" id="id5">Result</a></li> </ul> </li> <li>
<p><a class="reference internal" href="#how-to-start-a-virtual-machine" id="id6">How to start a virtual machine</a></p> <ul> <li><a class="reference internal" href="#id1" id="id7">Result</a></li> </ul> </li> <li>
<p><a class="reference internal" href="#how-to-wait-until-my-virtual-machine-is-ready" id="id8">How to wait until my virtual machine is ready</a></p> <ul> <li><a class="reference internal" href="#id2" id="id9">Result</a></li> </ul> </li> </ul>   <h2 id="introduction">Introduction</h2> <p>This section covers the power management of your virtual machine.</p>   <h2 id="power-information">Power information</h2> <p>Use <code>vcenter_vm_power_info</code> to know the power state of the VM.</p> <pre data-language="YAML+Jinja">- name: Get guest power information
  vmware.vmware_rest.vcenter_vm_power_info:
    vm: '{{ test_vm1_info.id }}'
  register: _result
</pre>  <h3 id="result">Result</h3> <pre data-language="YAML+Jinja">{
    "value": {
        "state": "POWERED_ON"
    },
    "changed": false
}
</pre>    <h2 id="how-to-start-a-virtual-machine">How to start a virtual machine</h2> <p>Use the <code>vcenter_vm_power</code> module to start your VM:</p> <pre data-language="YAML+Jinja">- name: Turn the power of the VM on
  vmware.vmware_rest.vcenter_vm_power:
    state: start
    vm: '{{ test_vm1_info.id }}'
</pre>  <h3 id="id1">Result</h3> <pre data-language="YAML+Jinja">{
    "changed": false
}
</pre>    <h2 id="how-to-wait-until-my-virtual-machine-is-ready">How to wait until my virtual machine is ready</h2> <p>If your virtual machine runs VMware Tools, you can build a loop around the <code>center_vm_tools_info</code> module:</p> <pre data-language="YAML+Jinja">- name: Wait until my VM is ready
  vmware.vmware_rest.vcenter_vm_tools_info:
    vm: '{{ test_vm1_info.id }}'
  register: vm_tools_info
  until:
  - vm_tools_info is not failed
  - vm_tools_info.value.run_state == "RUNNING"
  retries: 60
  delay: 5
</pre>  <h3 id="id2">Result</h3> <pre data-language="YAML+Jinja">{
    "value": {
        "auto_update_supported": false,
        "upgrade_policy": "MANUAL",
        "install_attempt_count": 0,
        "version_status": "UNMANAGED",
        "version_number": 10346,
        "run_state": "RUNNING",
        "version": "10346",
        "install_type": "OPEN_VM_TOOLS"
    },
    "changed": false
}
</pre><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2021 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/scenario_guides/vmware_rest_scenarios/run_a_vm.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/scenario_guides/vmware_rest_scenarios/run_a_vm.html</a>
  </p>
</div>
