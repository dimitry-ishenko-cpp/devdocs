<section id="vars-plugins"> <h1 id="id1">Vars plugins</h1>  <ul class="simple"> <li><a class="reference internal" href="#enabling-vars-plugins" id="id2">Enabling vars plugins</a></li> <li><a class="reference internal" href="#using-vars-plugins" id="id3">Using vars plugins</a></li> <li><a class="reference internal" href="#plugin-list" id="id4">Plugin list</a></li> </ul>  <p>Vars plugins inject additional variable data into Ansible runs that did not come from an inventory source, playbook, or command line. Playbook constructs like ‘host_vars’ and ‘group_vars’ work using vars plugins. For more details about variables in Ansible, see <a class="reference internal" href="../playbook_guide/playbooks_variables.html#playbooks-variables"><span class="std std-ref">Using Variables</span></a>.</p> <p>Vars plugins were partially implemented in Ansible 2.0 and rewritten to be fully implemented starting with Ansible 2.4.</p> <p>The <a class="reference internal" href="../collections/ansible/builtin/host_group_vars_vars.html#host-group-vars-vars"><span class="std std-ref">host_group_vars</span></a> plugin shipped with Ansible enables reading variables from <a class="reference internal" href="../inventory_guide/intro_inventory.html#host-variables"><span class="std std-ref">Assigning a variable to one machine: host variables</span></a> and <a class="reference internal" href="../inventory_guide/intro_inventory.html#group-variables"><span class="std std-ref">Assigning a variable to many machines: group variables</span></a>.</p> <section id="enabling-vars-plugins"> <h2 id="enable-vars">Enabling vars plugins</h2> <p>You can activate a custom vars plugin by either dropping it into a <code>vars_plugins</code> directory adjacent to your play, inside a role, or by putting it in one of the directory sources configured in <a class="reference internal" href="../reference_appendices/config.html#ansible-configuration-settings"><span class="std std-ref">ansible.cfg</span></a>. For a vars plugin to run during inventory build you cannot enable it in a play or role as these are not loaded until later. If they are only going to run at task execution, there are no limitations on where they are provided.</p> <p>Most vars plugins are disabled by default. To enable a vars plugin, set <code>vars_plugins_enabled</code> in the <code>defaults</code> section of <a class="reference internal" href="../reference_appendices/config.html#ansible-configuration-settings"><span class="std std-ref">ansible.cfg</span></a> or set the <code>ANSIBLE_VARS_ENABLED</code> environment variable to the list of vars plugins you want to execute. By default, the <a class="reference internal" href="../collections/ansible/builtin/host_group_vars_vars.html#host-group-vars-vars"><span class="std std-ref">host_group_vars</span></a> plugin shipped with Ansible is enabled.</p> <p>Starting in Ansible 2.10, you can use vars plugins in collections. All vars plugins in collections must be explicitly enabled and must use the fully qualified collection name in the format <code>namespace.collection_name.vars_plugin_name</code>.</p> <pre data-language="yaml">[defaults]
vars_plugins_enabled = host_group_vars,namespace.collection_name.vars_plugin_name
</pre> </section> <section id="using-vars-plugins"> <h2 id="using-vars">Using vars plugins</h2> <p>By default, vars plugins are used on demand automatically after they are enabled.</p> <p>Starting in Ansible 2.10, vars plugins can be made to run at specific times. <code>ansible-inventory</code> does not use these settings, and always loads vars plugins.</p> <p>The global setting <code>RUN_VARS_PLUGINS</code> can be set in <code>ansible.cfg</code> using <code>run_vars_plugins</code> in the <code>defaults</code> section or by the <code>ANSIBLE_RUN_VARS_PLUGINS</code> environment variable. The default option, <code>demand</code>, runs any enabled vars plugins relative to inventory sources whenever variables are demanded by tasks. You can use the option <code>start</code> to run any enabled vars plugins relative to inventory sources after importing that inventory source instead.</p> <p>You can also control vars plugin execution on a per-plugin basis for vars plugins that support the <code>stage</code> option. To run the <a class="reference internal" href="../collections/ansible/builtin/host_group_vars_vars.html#host-group-vars-vars"><span class="std std-ref">host_group_vars</span></a> plugin after importing inventory you can add the following to <a class="reference internal" href="../reference_appendices/config.html#ansible-configuration-settings"><span class="std std-ref">ansible.cfg</span></a>:</p> <pre data-language="ini">[vars_host_group_vars]
stage = inventory
</pre> </section> <section id="plugin-list"> <h2 id="vars-plugin-list">Plugin list</h2> <p>You can use <code>ansible-doc -t vars -l</code> to see the list of available vars plugins. Use <code>ansible-doc -t vars &lt;plugin name&gt;</code> to see plugin-specific documentation and examples.</p> <div class="admonition seealso"> <p class="admonition-title">See also</p> <dl class="simple"> <dt><a class="reference internal" href="cache.html#cache-plugins"><span class="std std-ref">Cache plugins</span></a></dt>
<dd>
<p>Cache plugins</p> </dd> <dt><a class="reference internal" href="lookup.html#lookup-plugins"><span class="std std-ref">Lookup plugins</span></a></dt>
<dd>
<p>Lookup plugins</p> </dd> <dt><a class="reference internal" href="https://docs.ansible.com/ansible/latest/community/communication.html#communication"><span class="std std-ref">Communication</span></a></dt>
<dd>
<p>Got questions? Need help? Want to share your ideas? Visit the Ansible communication guide</p> </dd> </dl> </div> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2024 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/plugins/vars.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/plugins/vars.html</a>
  </p>
</div>
