<h1 id="id1">Callback Plugins</h1>  <ul class="simple" id="callback-plugins"> <li><a class="reference internal" href="#example-callback-plugins" id="id2">Example callback plugins</a></li> <li><a class="reference internal" href="#enabling-callback-plugins" id="id3">Enabling callback plugins</a></li> <li><a class="reference internal" href="#setting-a-callback-plugin-for-ansible-playbook" id="id4">Setting a callback plugin for <code>ansible-playbook</code></a></li> <li><a class="reference internal" href="#setting-a-callback-plugin-for-ad-hoc-commands" id="id5">Setting a callback plugin for ad hoc commands</a></li> <li><a class="reference internal" href="#plugin-list" id="id6">Plugin list</a></li> </ul>  <p>Callback plugins enable adding new behaviors to Ansible when responding to events. By default, callback plugins control most of the output you see when running the command line programs, but can also be used to add additional output, integrate with other tools and marshall the events to a storage backend.</p>  <h2 id="callback-examples">Example callback plugins</h2> <p id="example-callback-plugins">The <a class="reference external" href="https://docs.ansible.com/ansible/2.9/plugins/callback/log_plays.html#log-plays-callback" title="(in Ansible v2.9)"><span class="xref std std-ref">log_plays</span></a> callback is an example of how to record playbook events to a log file, and the <a class="reference external" href="https://docs.ansible.com/ansible/2.9/plugins/callback/mail.html#mail-callback" title="(in Ansible v2.9)"><span class="xref std std-ref">mail</span></a> callback sends email on playbook failures.</p> <p>The <a class="reference external" href="https://docs.ansible.com/ansible/2.9/plugins/callback/say.html#say-callback" title="(in Ansible v2.9)"><span class="xref std std-ref">say</span></a> callback responds with computer synthesized speech in relation to playbook events.</p>   <h2 id="enabling-callbacks">Enabling callback plugins</h2> <p id="enabling-callback-plugins">You can activate a custom callback by either dropping it into a <code>callback_plugins</code> directory adjacent to your play, inside a role, or by putting it in one of the callback directory sources configured in <a class="reference internal" href="../reference_appendices/config.html#ansible-configuration-settings"><span class="std std-ref">ansible.cfg</span></a>.</p> <p>Plugins are loaded in alphanumeric order. For example, a plugin implemented in a file named <code>1_first.py</code> would run before a plugin file named <code>2_second.py</code>.</p> <p>Most callbacks shipped with Ansible are disabled by default and need to be enabled in your <a class="reference internal" href="../reference_appendices/config.html#ansible-configuration-settings"><span class="std std-ref">ansible.cfg</span></a> file in order to function. For example:</p> <pre data-language="ini">#callbacks_enabled = timer, mail, profile_roles, collection_namespace.collection_name.custom_callback
</pre>   <h2 id="setting-a-callback-plugin-for-ansible-playbook">Setting a callback plugin for <code>ansible-playbook</code>
</h2> <p>You can only have one plugin be the main manager of your console output. If you want to replace the default, you should define CALLBACK_TYPE = stdout in the subclass and then configure the stdout plugin in <a class="reference internal" href="../reference_appendices/config.html#ansible-configuration-settings"><span class="std std-ref">ansible.cfg</span></a>. For example:</p> <pre data-language="ini">stdout_callback = dense
</pre> <p>or for my custom callback:</p> <pre data-language="ini">stdout_callback = mycallback
</pre> <p>This only affects <a class="reference internal" href="../cli/ansible-playbook.html#ansible-playbook"><span class="std std-ref">ansible-playbook</span></a> by default.</p>   <h2 id="setting-a-callback-plugin-for-ad-hoc-commands">Setting a callback plugin for ad hoc commands</h2> <p>The <a class="reference internal" href="../cli/ansible.html#ansible"><span class="std std-ref">ansible</span></a> ad hoc command specifically uses a different callback plugin for stdout, so there is an extra setting in <a class="reference internal" href="../reference_appendices/config.html#ansible-configuration-settings"><span class="std std-ref">Ansible Configuration Settings</span></a> you need to add to use the stdout callback defined above:</p> <pre data-language="ini">[defaults]
bin_ansible_callbacks=True
</pre> <p>You can also set this as an environment variable:</p> <pre data-language="shell">export ANSIBLE_LOAD_CALLBACK_PLUGINS=1
</pre>   <h2 id="callback-plugin-list">Plugin list</h2> <p id="plugin-list">You can use <code>ansible-doc -t callback -l</code> to see the list of available plugins. Use <code>ansible-doc -t callback &lt;plugin name&gt;</code> to see specific documents and examples.</p> <div class="admonition seealso"> <p class="admonition-title">See also</p> <dl class="simple"> <dt><a class="reference internal" href="action.html#action-plugins"><span class="std std-ref">Action Plugins</span></a></dt>
<dd>
<p>Ansible Action plugins</p> </dd> <dt><a class="reference internal" href="cache.html#cache-plugins"><span class="std std-ref">Cache Plugins</span></a></dt>
<dd>
<p>Ansible cache plugins</p> </dd> <dt><a class="reference internal" href="connection.html#connection-plugins"><span class="std std-ref">Connection Plugins</span></a></dt>
<dd>
<p>Ansible connection plugins</p> </dd> <dt><a class="reference internal" href="inventory.html#inventory-plugins"><span class="std std-ref">Inventory Plugins</span></a></dt>
<dd>
<p>Ansible inventory plugins</p> </dd> <dt><a class="reference internal" href="shell.html#shell-plugins"><span class="std std-ref">Shell Plugins</span></a></dt>
<dd>
<p>Ansible Shell plugins</p> </dd> <dt><a class="reference internal" href="strategy.html#strategy-plugins"><span class="std std-ref">Strategy Plugins</span></a></dt>
<dd>
<p>Ansible Strategy plugins</p> </dd> <dt><a class="reference internal" href="vars.html#vars-plugins"><span class="std std-ref">Vars Plugins</span></a></dt>
<dd>
<p>Ansible Vars plugins</p> </dd> <dt><a class="reference external" href="https://groups.google.com/forum/#!forum/ansible-devel">User Mailing List</a></dt>
<dd>
<p>Have a question? Stop by the google group!</p> </dd> <dt><a class="reference external" href="https://libera.chat/">irc.libera.chat</a></dt>
<dd>
<p>#ansible IRC chat channel</p> </dd> </dl> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2021 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/plugins/callback.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/plugins/callback.html</a>
  </p>
</div>
