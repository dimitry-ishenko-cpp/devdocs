<section id="callback-plugins"> <h1 id="id1">Callback plugins</h1>  <ul class="simple"> <li><a class="reference internal" href="#example-callback-plugins" id="id2">Example callback plugins</a></li> <li><a class="reference internal" href="#enabling-callback-plugins" id="id3">Enabling callback plugins</a></li> <li><a class="reference internal" href="#setting-a-callback-plugin-for-ansible-playbook" id="id4">Setting a callback plugin for <code>ansible-playbook</code></a></li> <li><a class="reference internal" href="#setting-a-callback-plugin-for-ad-hoc-commands" id="id5">Setting a callback plugin for ad hoc commands</a></li> <li><a class="reference internal" href="#types-of-callback-plugins" id="id6">Types of callback plugins</a></li> <li><a class="reference internal" href="#plugin-list" id="id7">Plugin list</a></li> </ul>  <p>Callback plugins enable adding new behaviors to Ansible when responding to events. By default, callback plugins control most of the output you see when running the command line programs, but can also be used to add additional output, integrate with other tools and marshal the events to a storage backend. If necessary, you can <a class="reference internal" href="https://docs.ansible.com/ansible/latest/dev_guide/developing_plugins.html#developing-callbacks"><span class="std std-ref">create custom callback plugins</span></a>.</p> <section id="example-callback-plugins"> <h2 id="callback-examples">Example callback plugins</h2> <p>The <a class="reference external" href="https://docs.ansible.com/ansible/2.9/plugins/callback/log_plays.html#log-plays-callback" title="(in Ansible v2.9)"><span class="xref std std-ref">log_plays</span></a> callback is an example of how to record playbook events to a log file, and the <a class="reference external" href="https://docs.ansible.com/ansible/2.9/plugins/callback/mail.html#mail-callback" title="(in Ansible v2.9)"><span class="xref std std-ref">mail</span></a> callback sends email on playbook failures.</p> <p>The <a class="reference external" href="https://docs.ansible.com/ansible/2.9/plugins/callback/say.html#say-callback" title="(in Ansible v2.9)"><span class="xref std std-ref">say</span></a> callback responds with a computer-synthesized speech in relation to playbook events.</p> </section> <section id="enabling-callback-plugins"> <h2 id="enabling-callbacks">Enabling callback plugins</h2> <p>You can activate a custom callback, depending on itâ€™s <code>NEEDS_ENABLED</code> property, by either dropping it into one of the callback directory sources configured in <a class="reference internal" href="../reference_appendices/config.html#ansible-configuration-settings"><span class="std std-ref">ansible.cfg</span></a> or in a collection and referencing it in configuration by FQCN.</p> <p>Plugins are loaded in alphanumeric order. For example, a plugin implemented in a file named <code>1_first.py</code> would run before a plugin file named <code>2_second.py</code>.</p> <p>Most callbacks shipped with Ansible are disabled by default and need to be enabled in your <a class="reference internal" href="../reference_appendices/config.html#ansible-configuration-settings"><span class="std std-ref">ansible.cfg</span></a> file in order to function. For example:</p> <pre data-language="ini">#callbacks_enabled = timer, mail, profile_roles, collection_namespace.collection_name.custom_callback
</pre> </section> <section id="setting-a-callback-plugin-for-ansible-playbook"> <h2>Setting a callback plugin for <code>ansible-playbook</code>
</h2> <p>You can only have one plugin be the main manager of your console output. If you want to replace the default, you should define <code>CALLBACK_TYPE = stdout</code> in the subclass and then configure the stdout plugin in <a class="reference internal" href="../reference_appendices/config.html#ansible-configuration-settings"><span class="std std-ref">ansible.cfg</span></a>. For example:</p> <pre data-language="ini">stdout_callback = dense
</pre> <p>or for my custom callback:</p> <pre data-language="ini">stdout_callback = mycallback
</pre> <p>This only affects <a class="reference internal" href="../cli/ansible-playbook.html#ansible-playbook"><span class="std std-ref">ansible-playbook</span></a> by default.</p> </section> <section id="setting-a-callback-plugin-for-ad-hoc-commands"> <h2>Setting a callback plugin for ad hoc commands</h2> <p>The <a class="reference internal" href="../cli/ansible.html#ansible"><span class="std std-ref">ansible</span></a> ad hoc command specifically uses a different callback plugin for stdout, so there is an extra setting in <a class="reference internal" href="../reference_appendices/config.html#ansible-configuration-settings"><span class="std std-ref">Ansible Configuration Settings</span></a> you need to add to use the stdout callback defined above:</p> <pre data-language="ini">[defaults]
bin_ansible_callbacks=True
</pre> <p>You can also set this as an environment variable:</p> <pre data-language="shell">export ANSIBLE_LOAD_CALLBACK_PLUGINS=1
</pre> </section> <section id="types-of-callback-plugins"> <h2 id="callback-plugin-types">Types of callback plugins</h2> <p>There are three types of callback plugins:</p> <dl class="field-list simple"> <dt class="field-odd">stdout callback plugins<span class="colon">:</span>
</dt> <dd class="field-odd">
<p>These plugins handle the main console output. Only one of these can be active.</p> </dd> <dt class="field-even">aggregate callback plugins<span class="colon">:</span>
</dt> <dd class="field-even">
<p>Aggregate callbacks can add additional console output next to a stdout callback. This can be aggregate information at the end of a playbook run, additional per-task output, or anything else.</p> </dd> <dt class="field-odd">notification callback plugins<span class="colon">:</span>
</dt> <dd class="field-odd">
<p>Notification callbacks inform other applications, services, or systems. This can be anything from logging to databases, informing on errors in Instant Messaging applications, or sending emails when a server is unreachable.</p> </dd> </dl> </section> <section id="plugin-list"> <h2 id="callback-plugin-list">Plugin list</h2> <p>You can use <code>ansible-doc -t callback -l</code> to see the list of available plugins. Use <code>ansible-doc -t callback &lt;plugin name&gt;</code> to see plugin-specific documentation and examples.</p> <div class="admonition seealso"> <p class="admonition-title">See also</p> <dl class="simple"> <dt><a class="reference internal" href="action.html#action-plugins"><span class="std std-ref">Action plugins</span></a></dt>
<dd>
<p>Action plugins</p> </dd> <dt><a class="reference internal" href="cache.html#cache-plugins"><span class="std std-ref">Cache plugins</span></a></dt>
<dd>
<p>Cache plugins</p> </dd> <dt><a class="reference internal" href="connection.html#connection-plugins"><span class="std std-ref">Connection plugins</span></a></dt>
<dd>
<p>Connection plugins</p> </dd> <dt><a class="reference internal" href="inventory.html#inventory-plugins"><span class="std std-ref">Inventory plugins</span></a></dt>
<dd>
<p>Inventory plugins</p> </dd> <dt><a class="reference internal" href="shell.html#shell-plugins"><span class="std std-ref">Shell plugins</span></a></dt>
<dd>
<p>Shell plugins</p> </dd> <dt><a class="reference internal" href="strategy.html#strategy-plugins"><span class="std std-ref">Strategy plugins</span></a></dt>
<dd>
<p>Strategy plugins</p> </dd> <dt><a class="reference internal" href="vars.html#vars-plugins"><span class="std std-ref">Vars plugins</span></a></dt>
<dd>
<p>Vars plugins</p> </dd> <dt><a class="reference internal" href="https://docs.ansible.com/ansible/latest/community/communication.html#communication"><span class="std std-ref">Communication</span></a></dt>
<dd>
<p>Got questions? Need help? Want to share your ideas? Visit the Ansible communication guide</p> </dd> </dl> </div> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2024 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/plugins/callback.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/plugins/callback.html</a>
  </p>
</div>
