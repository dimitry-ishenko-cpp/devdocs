<section id="ansible-2-10-porting-guide"> <h1 id="porting-2-10-guide">Ansible 2.10 Porting Guide</h1> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>In Ansible 2.10, many plugins and modules have migrated to Collections on <a class="reference external" href="https://galaxy.ansible.com">Ansible Galaxy</a>. Your playbooks should continue to work without any changes. We recommend you start using the fully-qualified collection name (FQCN) in your playbooks as the explicit and authoritative indicator of which collection to use as some collections may contain duplicate module names. You can search the <a class="reference external" href="https://docs.ansible.com/ansible/2.10/collections/index_module.html">index of all modules</a> to find the collection a module has been relocated to.</p> </div> <p>This section discusses the behavioral changes between Ansible 2.9 and Ansible 2.10.</p> <p>It is intended to assist in updating your playbooks, plugins and other parts of your Ansible infrastructure so they will work with this version of Ansible.</p> <p>We suggest you read this page along with the <a class="reference external" href="https://github.com/ansible-community/ansible-build-data/blob/main/2.10/CHANGELOG-v2.10.rst">Ansible Changelog for 2.10</a> to understand what updates you may need to make.</p> <p>Since 2.10, Ansible consists of two parts:</p> <ul class="simple"> <li>ansible-base, which includes the command line tools with a small selection of plugins and modules, and</li> <li>a <a class="reference external" href="https://github.com/ansible-community/ansible-build-data/blob/main/2.10/ansible.in">set of collections</a>.</li> </ul> <p>The <a class="reference internal" href="porting_guide_base_2.10.html#porting-2-10-guide-base"><span class="std std-ref">Ansible-base 2.10 Porting Guide</span></a> is included in this porting guide. The complete list of porting guides can be found at <a class="reference internal" href="porting_guides.html#porting-guides"><span class="std std-ref">porting guides</span></a>.</p>  <ul class="simple"> <li><a class="reference internal" href="#playbook" id="id64">Playbook</a></li> <li><a class="reference internal" href="#command-line" id="id65">Command Line</a></li> <li><a class="reference internal" href="#deprecated" id="id66">Deprecated</a></li> <li>
<p><a class="reference internal" href="#modules" id="id67">Modules</a></p> <ul> <li><a class="reference internal" href="#noteworthy-module-changes" id="id68">Noteworthy module changes</a></li> </ul> </li> <li>
<p><a class="reference internal" href="#plugins" id="id69">Plugins</a></p> <ul> <li><a class="reference internal" href="#lookup-plugin-names-case-sensitivity" id="id70">Lookup plugin names case-sensitivity</a></li> <li><a class="reference internal" href="#noteworthy-plugin-changes" id="id71">Noteworthy plugin changes</a></li> <li><a class="reference internal" href="#action-plugins-which-execute-modules-should-use-fully-qualified-module-names" id="id72">Action plugins which execute modules should use fully-qualified module names</a></li> </ul> </li> <li><a class="reference internal" href="#porting-custom-scripts" id="id73">Porting custom scripts</a></li> <li>
<p><a class="reference internal" href="#porting-guide-for-v2-10-7" id="id74">Porting Guide for v2.10.7</a></p> <ul> <li><a class="reference internal" href="#breaking-changes" id="id75">Breaking Changes</a></li> <li><a class="reference internal" href="#major-changes" id="id76">Major Changes</a></li> <li><a class="reference internal" href="#deprecated-features" id="id77">Deprecated Features</a></li> </ul> </li> <li>
<p><a class="reference internal" href="#porting-guide-for-v2-10-6" id="id78">Porting Guide for v2.10.6</a></p> <ul> <li><a class="reference internal" href="#id1" id="id79">Major Changes</a></li> </ul> </li> <li>
<p><a class="reference internal" href="#porting-guide-for-v2-10-5" id="id80">Porting Guide for v2.10.5</a></p> <ul> <li><a class="reference internal" href="#id3" id="id81">Breaking Changes</a></li> <li><a class="reference internal" href="#id4" id="id82">Major Changes</a></li> <li><a class="reference internal" href="#id7" id="id83">Deprecated Features</a></li> </ul> </li> <li>
<p><a class="reference internal" href="#porting-guide-for-v2-10-4" id="id84">Porting Guide for v2.10.4</a></p> <ul> <li><a class="reference internal" href="#id9" id="id85">Breaking Changes</a></li> <li><a class="reference internal" href="#id10" id="id86">Major Changes</a></li> <li><a class="reference internal" href="#removed-features" id="id87">Removed Features</a></li> <li><a class="reference internal" href="#id17" id="id88">Deprecated Features</a></li> </ul> </li> <li>
<p><a class="reference internal" href="#porting-guide-for-v2-10-2" id="id89">Porting Guide for v2.10.2</a></p> <ul> <li><a class="reference internal" href="#id20" id="id90">Breaking Changes</a></li> <li><a class="reference internal" href="#id21" id="id91">Major Changes</a></li> <li><a class="reference internal" href="#id24" id="id92">Removed Features</a></li> <li><a class="reference internal" href="#id26" id="id93">Deprecated Features</a></li> </ul> </li> <li>
<p><a class="reference internal" href="#porting-guide-for-v2-10-1" id="id94">Porting Guide for v2.10.1</a></p> <ul> <li><a class="reference internal" href="#id28" id="id95">Major Changes</a></li> <li><a class="reference internal" href="#id29" id="id96">Deprecated Features</a></li> </ul> </li> <li>
<p><a class="reference internal" href="#porting-guide-for-v2-10-0" id="id97">Porting Guide for v2.10.0</a></p> <ul> <li><a class="reference internal" href="#known-issues" id="id98">Known Issues</a></li> <li><a class="reference internal" href="#id31" id="id99">Breaking Changes</a></li> <li><a class="reference internal" href="#id36" id="id100">Major Changes</a></li> <li><a class="reference internal" href="#id45" id="id101">Removed Features</a></li> <li><a class="reference internal" href="#id54" id="id102">Deprecated Features</a></li> </ul> </li> </ul>  <section id="playbook"> <h2>Playbook</h2> <ul class="simple"> <li>Fixed a bug on boolean keywords that made random strings return ‘False’, now they should return an error if they are not a proper boolean Example: <code>diff: yes-</code> was returning <code>False</code>.</li> <li>A new fact, <code>ansible_processor_nproc</code> reflects the number of vcpus available to processes (falls back to the number of vcpus available to the scheduler).</li> </ul> </section> <section id="command-line"> <h2>Command Line</h2> <ul class="simple"> <li>The <code>ansible-galaxy login</code> command has been removed, as the underlying API it used for GitHub auth is being shut down. Publishing roles or collections to Galaxy through <code>ansible-galaxy</code> now requires that a Galaxy API token be passed to the CLI through a token file (default location <code>~/.ansible/galaxy_token</code>) or (insecurely) through the <code>--token</code> argument to <code>ansible-galaxy</code>.</li> </ul> </section> <section id="deprecated"> <h2>Deprecated</h2> <ul class="simple"> <li>Windows Server 2008 and 2008 R2 will no longer be supported or tested in the next Ansible release, see <a class="reference external" href="https://docs.ansible.com/ansible-core/2.15/os_guide/windows_faq.html#are-server-2008-2008-r2-and-windows-7-supported">Are Server 2008, 2008 R2 and Windows 7 supported?</a>.</li> </ul> </section> <section id="modules"> <h2>Modules</h2> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>Links on this page may not point to the most recent versions of modules. We will update them when we can.</p> </div> <ul class="simple"> <li>Version 2.10.0 of ansible-base changed the default mode of file-based tasks to <code>0o600 &amp; ~umask</code> when the user did not specify a <code>mode</code> parameter on file-based tasks. This was in response to a CVE report which we have reconsidered. As a result, the mode change has been reverted in 2.10.1, and mode will now default to <code>0o666 &amp; ~umask</code> as in previous versions of Ansible.</li> <li>If you changed any tasks to specify less restrictive permissions while using 2.10.0, those changes will be unnecessary (but will do no harm) in 2.10.1.</li> <li>To avoid the issue raised in CVE-2020-1736, specify a <code>mode</code> parameter in all file-based tasks that accept it.</li> <li>
<code>dnf</code> and <code>yum</code> - As of version 2.10.1, the <code>dnf</code> module (and <code>yum</code> action when it uses <code>dnf</code>) now correctly validates GPG signatures of packages (CVE-2020-14365). If you see an error such as <code>Failed to validate GPG signature for [package name]</code>, please ensure that you have imported the correct GPG key for the DNF repository and/or package you are using. One way to do this is with the <code>rpm_key</code> module. Although we discourage it, in some cases it may be necessary to disable the GPG check. This can be done by explicitly adding <code>disable_gpg_check: yes</code> in your <code>dnf</code> or <code>yum</code> task.</li> </ul> <section id="noteworthy-module-changes"> <h3>Noteworthy module changes</h3> <ul class="simple"> <li>Ansible modules created with <code>add_file_common_args=True</code> added a number of undocumented arguments which were mostly there to ease implementing certain action plugins. The undocumented arguments <code>src</code>, <code>follow</code>, <code>force</code>, <code>content</code>, <code>backup</code>, <code>remote_src</code>, <code>regexp</code>, <code>delimiter</code>, and <code>directory_mode</code> are now no longer added. Modules relying on these options to be added need to specify them by themselves.</li> <li>Ansible no longer looks for Python modules in the current working directory (typically the <code>remote_user</code>’s home directory) when an Ansible module is run. This is to fix becoming an unprivileged user on OpenBSD and to mitigate any attack vector if the current working directory is writable by a malicious user. Install any Python modules needed to run the Ansible modules on the managed node in a system-wide location or in another directory which is in the <code>remote_user</code>’s <code>$PYTHONPATH</code> and readable by the <code>become_user</code>.</li> </ul> </section> </section> <section id="plugins"> <h2>Plugins</h2> <section id="lookup-plugin-names-case-sensitivity"> <h3>Lookup plugin names case-sensitivity</h3> <ul class="simple"> <li>Prior to Ansible <code>2.10</code> lookup plugin names passed in as an argument to the <code>lookup()</code> function were treated as case-insensitive as opposed to lookups invoked through <code>with_&lt;lookup_name&gt;</code>. <code>2.10</code> brings consistency to <code>lookup()</code> and <code>with_</code> to be both case-sensitive.</li> </ul> </section> <section id="noteworthy-plugin-changes"> <h3>Noteworthy plugin changes</h3> <ul class="simple"> <li>Cache plugins in collections can be used to cache data from inventory plugins. Previously, cache plugins in collections could only be used for fact caching.</li> <li>Some undocumented arguments from <code>FILE_COMMON_ARGUMENTS</code> have been removed; plugins using these, in particular action plugins, need to be adjusted. The undocumented arguments which were removed are <code>src</code>, <code>follow</code>, <code>force</code>, <code>content</code>, <code>backup</code>, <code>remote_src</code>, <code>regexp</code>, <code>delimiter</code>, and <code>directory_mode</code>.</li> </ul> </section> <section id="action-plugins-which-execute-modules-should-use-fully-qualified-module-names"> <h3>Action plugins which execute modules should use fully-qualified module names</h3> <ul class="simple"> <li>Action plugins that call modules should pass explicit, fully-qualified module names to <code>_execute_module()</code> whenever possible (eg, <code>ansible.builtin.file</code> rather than <code>file</code>). This ensures that the task’s collection search order is not consulted to resolve the module. Otherwise, a module from a collection earlier in the search path could be used when not intended.</li> </ul> </section> </section> <section id="porting-custom-scripts"> <h2>Porting custom scripts</h2> <p>No notable changes</p> </section> <section id="porting-guide-for-v2-10-7"> <h2>Porting Guide for v2.10.7</h2> <section id="breaking-changes"> <h3>Breaking Changes</h3> <section id="community-general"> <h4>community.general</h4> <ul class="simple"> <li>utm_proxy_auth_profile - the <code>frontend_cookie_secret</code> return value now contains a placeholder string instead of the module’s <code>frontend_cookie_secret</code> parameter (<a class="reference external" href="https://github.com/ansible-collections/community.general/pull/1736">https://github.com/ansible-collections/community.general/pull/1736</a>).</li> </ul> </section> </section> <section id="major-changes"> <h3>Major Changes</h3> <ul class="simple"> <li>Restricting the version of the community.okd collection to 1.0.0. The previously included version, 1.0.1, had a dependency on kubernetes.core and thus required the installation of an additional collection that was not included in Ansible 2.10. Version 1.0.0 is essentially identical to 1.0.1, except that it uses community.kubernetes, which is included in Ansible 2.10.</li> </ul> <section id="ovirt-ovirt"> <h4>ovirt.ovirt</h4> <ul class="simple"> <li>ovirt_system_option_info - Add new module (<a class="reference external" href="https://github.com/oVirt/ovirt-ansible-collection/pull/206">https://github.com/oVirt/ovirt-ansible-collection/pull/206</a>).</li> </ul> </section> <section id="servicenow-servicenow"> <h4>servicenow.servicenow</h4> <ul class="simple"> <li>add new tests (find with no result, search many)</li> <li>add related tests</li> <li>add support for ServiceNOW table api display_value exclude_reference_link and suppress_pagination_header</li> <li>use new API for pysnow &gt;=0.6.0</li> </ul> </section> </section> <section id="deprecated-features"> <h3>Deprecated Features</h3> <section id="cisco-nxos"> <h4>cisco.nxos</h4> <ul class="simple"> <li>Deprecated <code>nxos_bgp</code> and <code>nxos_bgp_neighbor</code> modules in favor of <code>nxos_bgp_global</code> resource module.</li> </ul> </section> <section id="community-vmware"> <h4>community.vmware</h4> <ul class="simple"> <li>vmware_host_firewall_manager - the creation of new rule with no <code>allowed_ip</code> entry in the <code>allowed_hosts</code> dictionary won’t be allowed after 2.0.0 release.</li> </ul> </section> </section> </section> <section id="porting-guide-for-v2-10-6"> <h2>Porting Guide for v2.10.6</h2> <section id="id1"> <h3>Major Changes</h3> <section id="id2"> <h4>community.general</h4> <ul> <li>
<p>For community.general 2.0.0, the kubevirt modules will be moved to the <a class="reference external" href="https://galaxy.ansible.com/community/kubevirt">community.kubevirt</a> collection. A redirection will be inserted so that users using ansible-base 2.10 or newer do not have to change anything.</p> <p>If you use Ansible 2.9 and explicitly use kubevirt modules from this collection, you will need to adjust your playbooks and roles to use FQCNs starting with <code>community.kubevirt.</code> instead of <code>community.general.</code>, for example replace <code>community.general.kubevirt_vm</code> in a task by <code>community.kubevirt.kubevirt_vm</code>.</p> <p>If you use ansible-base and installed <code>community.general</code> manually and rely on the kubevirt modules, you have to make sure to install the <code>community.kubevirt</code> collection as well. If you are using FQCNs, for example <code>community.general.kubevirt_vm</code> instead of <code>kubevirt_vm</code>, it will continue working, but we still recommend to adjust the FQCNs as well.</p> </li> </ul> </section> <section id="community-network"> <h4>community.network</h4> <ul> <li>
<p>For community.network 2.0.0, the Cisco NSO modules will be moved to the <a class="reference external" href="https://galaxy.ansible.com/cisco/nso">cisco.nso</a> collection. A redirection will be inserted so that users using ansible-base 2.10 or newer do not have to change anything.</p> <p>If you use Ansible 2.9 and explicitly use Cisco NSO modules from this collection, you will need to adjust your playbooks and roles to use FQCNs starting with <code>cisco.nso.</code> instead of <code>community.network.</code>, for example replace <code>community.network.nso_config</code> in a task by <code>cisco.nso.nso_config</code>.</p> <p>If you use ansible-base and installed <code>community.network</code> manually and rely on the Cisco NSO modules, you have to make sure to install the <code>cisco.nso</code> collection as well. If you are using FQCNs, for example <code>community.network.nso_config</code> instead of <code>nso_config</code>, it will continue working, but we still recommend to adjust the FQCNs as well.</p> </li> <li>
<p>For community.network 2.0.0, the FortiOS modules will be moved to the <a class="reference external" href="https://galaxy.ansible.com/ansible-collections/community.fortios">community.fortios</a> collection. A redirection will be inserted so that users using ansible-base 2.10 or newer do not have to change anything.</p> <p>If you use Ansible 2.9 and explicitly use FortiOS modules from this collection, you will need to adjust your playbooks and roles to use FQCNs starting with <code>community.fortios.</code> instead of <code>community.network.</code>, for example replace <code>community.network.fmgr_device</code> in a task by <code>community.fortios.fmgr_device</code>.</p> <p>If you use ansible-base and installed <code>community.network</code> manually and rely on the FortiOS modules, you have to make sure to install the <code>community.fortios</code> collection as well. If you are using FQCNs, for example <code>community.network.fmgr_device</code> instead of <code>fmgr_device</code>, it will continue working, but we still recommend to adjust the FQCNs as well.</p> </li> </ul> </section> <section id="f5networks-f5-modules"> <h4>f5networks.f5_modules</h4> <ul class="simple"> <li>Added async_timeout parameter to bigip_ucs_fetch module to allow customization of module wait for async interface</li> <li>Changed bigip_ucs_fetch module to use asynchronous interface when generating UCS files</li> </ul> </section> </section> </section> <section id="porting-guide-for-v2-10-5"> <h2>Porting Guide for v2.10.5</h2> <section id="id3"> <h3>Breaking Changes</h3> <section id="community-hashi-vault"> <h4>community.hashi_vault</h4> <ul class="simple"> <li>hashi_vault - the <code>VAULT_ADDR</code> environment variable is now checked last for the <code>url</code> parameter. For details on which use cases are impacted, see (<a class="reference external" href="https://github.com/ansible-collections/community.hashi_vault/issues/8">https://github.com/ansible-collections/community.hashi_vault/issues/8</a>).</li> </ul> </section> </section> <section id="id4"> <h3>Major Changes</h3> <section id="id5"> <h4>community.general</h4> <ul> <li>
<p>For community.general 2.0.0, the Google modules will be moved to the <a class="reference external" href="https://galaxy.ansible.com/community/google">community.google</a> collection. A redirection will be inserted so that users using ansible-base 2.10 or newer do not have to change anything.</p> <p>If you use Ansible 2.9 and explicitly use Google modules from this collection, you will need to adjust your playbooks and roles to use FQCNs starting with <code>community.google.</code> instead of <code>community.general.</code>, for example replace <code>community.general.gcpubsub</code> in a task by <code>community.google.gcpubsub</code>.</p> <p>If you use ansible-base and installed <code>community.general</code> manually and rely on the Google modules, you have to make sure to install the <code>community.google</code> collection as well. If you are using FQCNs, for example <code>community.general.gcpubsub</code> instead of <code>gcpubsub</code>, it will continue working, but we still recommend to adjust the FQCNs as well.</p> </li> <li>
<p>For community.general 2.0.0, the OC connection plugin will be moved to the <a class="reference external" href="https://galaxy.ansible.com/community/okd">community.okd</a> collection. A redirection will be inserted so that users using ansible-base 2.10 or newer do not have to change anything.</p> <p>If you use Ansible 2.9 and explicitly use OC connection plugin from this collection, you will need to adjust your playbooks and roles to use FQCNs <code>community.okd.oc</code> instead of <code>community.general.oc</code>.</p> <p>If you use ansible-base and installed <code>community.general</code> manually and rely on the OC connection plugin, you have to make sure to install the <code>community.okd</code> collection as well. If you are using FQCNs, in other words <code>community.general.oc</code> instead of <code>oc</code>, it will continue working, but we still recommend to adjust this FQCN as well.</p> </li> <li>
<p>For community.general 2.0.0, the hashi_vault lookup plugin will be moved to the <a class="reference external" href="https://galaxy.ansible.com/community/hashi_vault">community.hashi_vault</a> collection. A redirection will be inserted so that users using ansible-base 2.10 or newer do not have to change anything.</p> <p>If you use Ansible 2.9 and explicitly use hashi_vault lookup plugin from this collection, you will need to adjust your playbooks and roles to use FQCNs <code>community.hashi_vault.hashi_vault</code> instead of <code>community.general.hashi_vault</code>.</p> <p>If you use ansible-base and installed <code>community.general</code> manually and rely on the hashi_vault lookup plugin, you have to make sure to install the <code>community.hashi_vault</code> collection as well. If you are using FQCNs, in other words <code>community.general.hashi_vault</code> instead of <code>hashi_vault</code>, it will continue working, but we still recommend to adjust this FQCN as well.</p> </li> </ul> </section> <section id="netbox-netbox"> <h4>netbox.netbox</h4> <ul class="simple"> <li>nb_inventory - Add <code>dns_name</code> option that adds <code>dns_name</code> to the host when <code>True</code> and device has a primary IP address. (#394)</li> <li>nb_inventory - Add <code>status</code> as a <code>group_by</code> option. (398)</li> <li>nb_inventory - Move around <code>extracted_primary_ip</code> to allow for <code>config_context</code> or <code>custom_field</code> to overwrite. (#377)</li> <li>nb_inventory - Services are now a list of integers due to NetBox 2.10 changes. (#396)</li> <li>nb_lookup - Allow ID to be passed in and use <code>.get</code> instead of <code>.filter</code>. (#376)</li> <li>nb_lookup - Allow <code>api_endpoint</code> and <code>token</code> to be found through env. (#391)</li> </ul> </section> </section> <section id="id7"> <h3>Deprecated Features</h3> <section id="community-aws"> <h4>community.aws</h4> <ul class="simple"> <li>ec2_vpc_igw_info - After 2022-06-22 the <code>convert_tags</code> parameter default value will change from <code>False</code> to <code>True</code> to match the collection standard behavior (<a class="reference external" href="https://github.com/ansible-collections/community.aws/pull/318">https://github.com/ansible-collections/community.aws/pull/318</a>).</li> </ul> </section> <section id="community-docker"> <h4>community.docker</h4> <ul class="simple"> <li>docker_container - currently <code>published_ports</code> can contain port mappings next to the special value <code>all</code>, in which case the port mappings are ignored. This behavior is deprecated for community.docker 2.0.0, at which point it will either be forbidden, or this behavior will be properly implemented similar to how the Docker CLI tool handles this (<a class="reference external" href="https://github.com/ansible-collections/community.docker/issues/8">https://github.com/ansible-collections/community.docker/issues/8</a>, <a class="reference external" href="https://github.com/ansible-collections/community.docker/pull/60">https://github.com/ansible-collections/community.docker/pull/60</a>).</li> </ul> </section> <section id="id8"> <h4>community.hashi_vault</h4> <ul class="simple"> <li>hashi_vault - <code>VAULT_ADDR</code> environment variable for option <code>url</code> will have its precedence lowered in 1.0.0; use <code>ANSIBLE_HASHI_VAULT_ADDR</code> to intentionally override a config value (<a class="reference external" href="https://github.com/ansible-collections/community.hashi_vault/issues/8">https://github.com/ansible-collections/community.hashi_vault/issues/8</a>).</li> <li>hashi_vault - <code>VAULT_AUTH_METHOD</code> environment variable for option <code>auth_method</code> will be removed in 2.0.0, use <code>ANSIBLE_HASHI_VAULT_AUTH_METHOD</code> instead (<a class="reference external" href="https://github.com/ansible-collections/community.hashi_vault/issues/17">https://github.com/ansible-collections/community.hashi_vault/issues/17</a>).</li> <li>hashi_vault - <code>VAULT_ROLE_ID</code> environment variable for option <code>role_id</code> will be removed in 2.0.0, use <code>ANSIBLE_HASHI_VAULT_ROLE_ID</code> instead (<a class="reference external" href="https://github.com/ansible-collections/community.hashi_vault/issues/20">https://github.com/ansible-collections/community.hashi_vault/issues/20</a>).</li> <li>hashi_vault - <code>VAULT_SECRET_ID</code> environment variable for option <code>secret_id</code> will be removed in 2.0.0, use <code>ANSIBLE_HASHI_VAULT_SECRET_ID</code> instead (<a class="reference external" href="https://github.com/ansible-collections/community.hashi_vault/issues/20">https://github.com/ansible-collections/community.hashi_vault/issues/20</a>).</li> <li>hashi_vault - <code>VAULT_TOKEN_FILE</code> environment variable for option <code>token_file</code> will be removed in 2.0.0, use <code>ANSIBLE_HASHI_VAULT_TOKEN_FILE</code> instead (<a class="reference external" href="https://github.com/ansible-collections/community.hashi_vault/issues/15">https://github.com/ansible-collections/community.hashi_vault/issues/15</a>).</li> <li>hashi_vault - <code>VAULT_TOKEN_PATH</code> environment variable for option <code>token_path</code> will be removed in 2.0.0, use <code>ANSIBLE_HASHI_VAULT_TOKEN_PATH</code> instead (<a class="reference external" href="https://github.com/ansible-collections/community.hashi_vault/issues/15">https://github.com/ansible-collections/community.hashi_vault/issues/15</a>).</li> </ul> </section> </section> </section> <section id="porting-guide-for-v2-10-4"> <h2>Porting Guide for v2.10.4</h2> <section id="id9"> <h3>Breaking Changes</h3> <section id="community-hrobot"> <h4>community.hrobot</h4> <ul class="simple"> <li>firewall - now requires the <a class="reference external" href="https://pypi.org/project/ipaddress/">ipaddress</a> library (<a class="reference external" href="https://github.com/ansible-collections/community.hrobot/pull/2">https://github.com/ansible-collections/community.hrobot/pull/2</a>).</li> </ul> </section> </section> <section id="id10"> <h3>Major Changes</h3> <section id="id11"> <h4>community.general</h4> <ul> <li>
<p>For community.general 2.0.0, the Hetzner Robot modules will be moved to the <a class="reference external" href="https://galaxy.ansible.com/community/hrobot">community.hrobot</a> collection. A redirection will be inserted so that users using ansible-base 2.10 or newer do not have to change anything.</p> <p>If you use Ansible 2.9 and explicitly use Hetzner Robot modules from this collection, you will need to adjust your playbooks and roles to use FQCNs starting with <code>community.hrobot.</code> instead of <code>community.general.hetzner_</code>, for example replace <code>community.general.hetzner_firewall_info</code> in a task by <code>community.hrobot.firewall_info</code>.</p> <p>If you use ansible-base and installed <code>community.general</code> manually and rely on the Hetzner Robot modules, you have to make sure to install the <code>community.hrobot</code> collection as well. If you are using FQCNs, that is <code>community.general.hetzner_failover_ip</code> instead of <code>hetzner_failover_ip</code>, it will continue working, but we still recommend to adjust the FQCNs as well.</p> </li> <li>
<p>For community.general 2.0.0, the <code>docker</code> modules and plugins will be moved to the <a class="reference external" href="https://galaxy.ansible.com/community/docker">community.docker</a> collection. A redirection will be inserted so that users using ansible-base 2.10 or newer do not have to change anything.</p> <p>If you use Ansible 2.9 and explicitly use <code>docker</code> content from this collection, you will need to adjust your playbooks and roles to use FQCNs starting with <code>community.docker.</code> instead of <code>community.general.</code>, for example replace <code>community.general.docker_container</code> in a task by <code>community.docker.docker_container</code>.</p> <p>If you use ansible-base and installed <code>community.general</code> manually and rely on the <code>docker</code> content, you have to make sure to install the <code>community.docker</code> collection as well. If you are using FQCNs, that is <code>community.general.docker_container</code> instead of <code>docker_container</code>, it will continue working, but we still recommend to adjust the FQCNs as well.</p> </li> <li>
<p>For community.general 2.0.0, the <code>postgresql</code> modules and plugins will be moved to the <a class="reference external" href="https://galaxy.ansible.com/community/postgresql">community.postgresql</a> collection. A redirection will be inserted so that users using ansible-base 2.10 or newer do not have to change anything.</p> <p>If you use Ansible 2.9 and explicitly use <code>postgresql</code> content from this collection, you will need to adjust your playbooks and roles to use FQCNs starting with <code>community.postgresql.</code> instead of <code>community.general.</code>, for example replace <code>community.general.postgresql_info</code> in a task by <code>community.postgresql.postgresql_info</code>.</p> <p>If you use ansible-base and installed <code>community.general</code> manually and rely on the <code>postgresql</code> content, you have to make sure to install the <code>community.postgresql</code> collection as well. If you are using FQCNs, that is <code>community.general.postgresql_info</code> instead of <code>postgresql_info</code>, it will continue working, but we still recommend to adjust the FQCNs as well.</p> </li> <li>The community.general collection no longer depends on the ansible.posix collection (<a class="reference external" href="https://github.com/ansible-collections/community.general/pull/1157">https://github.com/ansible-collections/community.general/pull/1157</a>).</li> </ul> </section> <section id="id14"> <h4>community.network</h4> <ul> <li>
<p>For community.network 2.0.0, the <code>routeros</code> modules and plugins will be moved to the <a class="reference external" href="https://galaxy.ansible.com/community/routeros">community.routeros</a> collection. A redirection will be inserted so that users using ansible-base 2.10 or newer do not have to change anything.</p> <p>If you use Ansible 2.9 and explicitly use <code>routeros</code> content from this collection, you will need to adjust your playbooks and roles to use FQCNs starting with <code>community.routeros.</code> instead of <code>community.network.routeros_</code>, for example replace <code>community.network.routeros_api</code> in a task by <code>community.routeros.api</code>.</p> <p>If you use ansible-base and installed <code>community.network</code> manually and rely on the <code>routeros</code> content, you have to make sure to install the <code>community.routeros</code> collection as well. If you are using FQCNs, that is <code>community.network.routeros_command</code> instead of <code>routeros_command</code>, it will continue working, but we still recommend to adjust the FQCNs as well.</p> </li> <li>In community.network 2.0.0, the <code>fortimanager</code> httpapi plugin will be removed and replaced by a redirect to the corresponding plugin in the fortios.fortimanager collection. For Ansible 2.10 and ansible-base 2.10 users, this means that it will continue to work assuming that collection is installed. For Ansible 2.9 users, this means that they have to adjust the FQCN from <code>community.network.fortimanager</code> to <code>fortios.fortimanager.fortimanager</code> (<a class="reference external" href="https://github.com/ansible-collections/community.network/pull/151">https://github.com/ansible-collections/community.network/pull/151</a>).</li> </ul> </section> <section id="id15"> <h4>community.okd</h4> <ul class="simple"> <li>Add custom k8s module, integrate better Molecule tests (<a class="reference external" href="https://github.com/ansible-collections/community.okd/pull/7">https://github.com/ansible-collections/community.okd/pull/7</a>).</li> <li>Add downstream build scripts to build redhat.openshift (<a class="reference external" href="https://github.com/ansible-collections/community.okd/pull/20">https://github.com/ansible-collections/community.okd/pull/20</a>).</li> <li>Add openshift connection plugin, update inventory plugin to use it (<a class="reference external" href="https://github.com/ansible-collections/community.okd/pull/18">https://github.com/ansible-collections/community.okd/pull/18</a>).</li> <li>Add openshift_process module for template rendering and optional application of rendered resources (<a class="reference external" href="https://github.com/ansible-collections/community.okd/pull/44">https://github.com/ansible-collections/community.okd/pull/44</a>).</li> <li>Add openshift_route module for creating routes from services (<a class="reference external" href="https://github.com/ansible-collections/community.okd/pull/40">https://github.com/ansible-collections/community.okd/pull/40</a>).</li> <li>Initial content migration from community.kubernetes (<a class="reference external" href="https://github.com/ansible-collections/community.okd/pull/3">https://github.com/ansible-collections/community.okd/pull/3</a>).</li> <li>openshift_auth - new module (migrated from k8s_auth in community.kubernetes) (<a class="reference external" href="https://github.com/ansible-collections/community.okd/pull/33">https://github.com/ansible-collections/community.okd/pull/33</a>).</li> </ul> </section> </section> <section id="removed-features"> <h3>Removed Features</h3> <section id="id16"> <h4>community.docker</h4> <ul class="simple"> <li>docker_container - no longer returns <code>ansible_facts</code> (<a class="reference external" href="https://github.com/ansible-collections/community.docker/pull/1">https://github.com/ansible-collections/community.docker/pull/1</a>).</li> <li>docker_container - the default of <code>networks_cli_compatible</code> changed to <code>true</code> (<a class="reference external" href="https://github.com/ansible-collections/community.docker/pull/1">https://github.com/ansible-collections/community.docker/pull/1</a>).</li> <li>docker_container - the unused option <code>trust_image_content</code> has been removed (<a class="reference external" href="https://github.com/ansible-collections/community.docker/pull/1">https://github.com/ansible-collections/community.docker/pull/1</a>).</li> <li>docker_image - <code>state=build</code> has been removed. Use <code>present</code> instead (<a class="reference external" href="https://github.com/ansible-collections/community.docker/pull/1">https://github.com/ansible-collections/community.docker/pull/1</a>).</li> <li>docker_image - the <code>container_limits</code>, <code>dockerfile</code>, <code>http_timeout</code>, <code>nocache</code>, <code>rm</code>, <code>path</code>, <code>buildargs</code>, <code>pull</code> have been removed. Use the corresponding suboptions of <code>build</code> instead (<a class="reference external" href="https://github.com/ansible-collections/community.docker/pull/1">https://github.com/ansible-collections/community.docker/pull/1</a>).</li> <li>docker_image - the <code>force</code> option has been removed. Use the more specific <code>force_*</code> options instead (<a class="reference external" href="https://github.com/ansible-collections/community.docker/pull/1">https://github.com/ansible-collections/community.docker/pull/1</a>).</li> <li>docker_image - the <code>source</code> option is now mandatory (<a class="reference external" href="https://github.com/ansible-collections/community.docker/pull/1">https://github.com/ansible-collections/community.docker/pull/1</a>).</li> <li>docker_image - the <code>use_tls</code> option has been removed. Use <code>tls</code> and <code>validate_certs</code> instead (<a class="reference external" href="https://github.com/ansible-collections/community.docker/pull/1">https://github.com/ansible-collections/community.docker/pull/1</a>).</li> <li>docker_image - the default of the <code>build.pull</code> option changed to <code>false</code> (<a class="reference external" href="https://github.com/ansible-collections/community.docker/pull/1">https://github.com/ansible-collections/community.docker/pull/1</a>).</li> <li>docker_image_facts - this alias is on longer available, use <code>docker_image_info</code> instead (<a class="reference external" href="https://github.com/ansible-collections/community.docker/pull/1">https://github.com/ansible-collections/community.docker/pull/1</a>).</li> <li>docker_network - no longer returns <code>ansible_facts</code> (<a class="reference external" href="https://github.com/ansible-collections/community.docker/pull/1">https://github.com/ansible-collections/community.docker/pull/1</a>).</li> <li>docker_network - the <code>ipam_options</code> option has been removed. Use <code>ipam_config</code> instead (<a class="reference external" href="https://github.com/ansible-collections/community.docker/pull/1">https://github.com/ansible-collections/community.docker/pull/1</a>).</li> <li>docker_service - no longer returns <code>ansible_facts</code> (<a class="reference external" href="https://github.com/ansible-collections/community.docker/pull/1">https://github.com/ansible-collections/community.docker/pull/1</a>).</li> <li>docker_swarm - <code>state=inspect</code> has been removed. Use <code>docker_swarm_info</code> instead (<a class="reference external" href="https://github.com/ansible-collections/community.docker/pull/1">https://github.com/ansible-collections/community.docker/pull/1</a>).</li> <li>docker_swarm_service - the <code>constraints</code> option has been removed. Use <code>placement.constraints</code> instead (<a class="reference external" href="https://github.com/ansible-collections/community.docker/pull/1">https://github.com/ansible-collections/community.docker/pull/1</a>).</li> <li>docker_swarm_service - the <code>limit_cpu</code> and <code>limit_memory</code> options has been removed. Use the corresponding suboptions in <code>limits</code> instead (<a class="reference external" href="https://github.com/ansible-collections/community.docker/pull/1">https://github.com/ansible-collections/community.docker/pull/1</a>).</li> <li>docker_swarm_service - the <code>log_driver</code> and <code>log_driver_options</code> options has been removed. Use the corresponding suboptions in <code>logging</code> instead (<a class="reference external" href="https://github.com/ansible-collections/community.docker/pull/1">https://github.com/ansible-collections/community.docker/pull/1</a>).</li> <li>docker_swarm_service - the <code>reserve_cpu</code> and <code>reserve_memory</code> options has been removed. Use the corresponding suboptions in <code>reservations</code> instead (<a class="reference external" href="https://github.com/ansible-collections/community.docker/pull/1">https://github.com/ansible-collections/community.docker/pull/1</a>).</li> <li>docker_swarm_service - the <code>restart_policy</code>, <code>restart_policy_attempts</code>, <code>restart_policy_delay</code> and <code>restart_policy_window</code> options has been removed. Use the corresponding suboptions in <code>restart_config</code> instead (<a class="reference external" href="https://github.com/ansible-collections/community.docker/pull/1">https://github.com/ansible-collections/community.docker/pull/1</a>).</li> <li>docker_swarm_service - the <code>update_delay</code>, <code>update_parallelism</code>, <code>update_failure_action</code>, <code>update_monitor</code>, <code>update_max_failure_ratio</code> and <code>update_order</code> options has been removed. Use the corresponding suboptions in <code>update_config</code> instead (<a class="reference external" href="https://github.com/ansible-collections/community.docker/pull/1">https://github.com/ansible-collections/community.docker/pull/1</a>).</li> <li>docker_volume - no longer returns <code>ansible_facts</code> (<a class="reference external" href="https://github.com/ansible-collections/community.docker/pull/1">https://github.com/ansible-collections/community.docker/pull/1</a>).</li> <li>docker_volume - the <code>force</code> option has been removed. Use <code>recreate</code> instead (<a class="reference external" href="https://github.com/ansible-collections/community.docker/pull/1">https://github.com/ansible-collections/community.docker/pull/1</a>).</li> </ul> </section> </section> <section id="id17"> <h3>Deprecated Features</h3> <section id="id18"> <h4>community.general</h4> <ul class="simple"> <li>django_manage - the parameter <code>liveserver</code> relates to a no longer maintained third-party module for django. It is now deprecated, and will be remove in community.general 3.0.0 (<a class="reference external" href="https://github.com/ansible-collections/community.general/pull/1154">https://github.com/ansible-collections/community.general/pull/1154</a>).</li> <li>proxmox - the default of the new <code>proxmox_default_behavior</code> option will change from <code>compatibility</code> to <code>no_defaults</code> in community.general 4.0.0. Set the option to an explicit value to avoid a deprecation warning (<a class="reference external" href="https://github.com/ansible-collections/community.general/pull/850">https://github.com/ansible-collections/community.general/pull/850</a>).</li> <li>proxmox_kvm - the default of the new <code>proxmox_default_behavior</code> option will change from <code>compatibility</code> to <code>no_defaults</code> in community.general 4.0.0. Set the option to an explicit value to avoid a deprecation warning (<a class="reference external" href="https://github.com/ansible-collections/community.general/pull/850">https://github.com/ansible-collections/community.general/pull/850</a>).</li> <li>syspatch - deprecate the redundant <code>apply</code> argument (<a class="reference external" href="https://github.com/ansible-collections/community.general/pull/360">https://github.com/ansible-collections/community.general/pull/360</a>).</li> </ul> </section> <section id="id19"> <h4>community.network</h4> <ul class="simple"> <li>Deprecate connection=local support for network platforms using persistent framework (<a class="reference external" href="https://github.com/ansible-collections/community.network/pull/120">https://github.com/ansible-collections/community.network/pull/120</a>).</li> </ul> </section> </section> </section> <section id="porting-guide-for-v2-10-2"> <h2>Porting Guide for v2.10.2</h2> <section id="id20"> <h3>Breaking Changes</h3> <section id="ansible-base"> <h4>Ansible-base</h4> <ul class="simple"> <li>ansible-galaxy login command has been removed (see <a class="reference external" href="https://github.com/ansible/ansible/issues/71560">https://github.com/ansible/ansible/issues/71560</a>)</li> </ul> </section> </section> <section id="id21"> <h3>Major Changes</h3> <section id="id22"> <h4>f5networks.f5_modules</h4> <ul class="simple"> <li>Add phone home Teem integration into all modules, functionality can be disabled by setting up F5_TEEM environment variable or no_f5_teem provider parameter</li> </ul> </section> <section id="id23"> <h4>ovirt.ovirt</h4> <ul class="simple"> <li>cluster_upgrade - Migrate role (<a class="reference external" href="https://github.com/oVirt/ovirt-ansible-collection/pull/94">https://github.com/oVirt/ovirt-ansible-collection/pull/94</a>).</li> <li>disaster_recovery - Migrate role (<a class="reference external" href="https://github.com/oVirt/ovirt-ansible-collection/pull/134">https://github.com/oVirt/ovirt-ansible-collection/pull/134</a>).</li> <li>engine_setup - Migrate role (<a class="reference external" href="https://github.com/oVirt/ovirt-ansible-collection/pull/69">https://github.com/oVirt/ovirt-ansible-collection/pull/69</a>).</li> <li>hosted_engine_setup - Migrate role (<a class="reference external" href="https://github.com/oVirt/ovirt-ansible-collection/pull/106">https://github.com/oVirt/ovirt-ansible-collection/pull/106</a>).</li> <li>image_template - Migrate role (<a class="reference external" href="https://github.com/oVirt/ovirt-ansible-collection/pull/95">https://github.com/oVirt/ovirt-ansible-collection/pull/95</a>).</li> <li>infra - Migrate role (<a class="reference external" href="https://github.com/oVirt/ovirt-ansible-collection/pull/92">https://github.com/oVirt/ovirt-ansible-collection/pull/92</a>).</li> <li>manageiq - Migrate role (<a class="reference external" href="https://github.com/oVirt/ovirt-ansible-collection/pull/97">https://github.com/oVirt/ovirt-ansible-collection/pull/97</a>).</li> <li>repositories - Migrate role (<a class="reference external" href="https://github.com/oVirt/ovirt-ansible-collection/pull/96">https://github.com/oVirt/ovirt-ansible-collection/pull/96</a>).</li> <li>shutdown_env - Migrate role (<a class="reference external" href="https://github.com/oVirt/ovirt-ansible-collection/pull/112">https://github.com/oVirt/ovirt-ansible-collection/pull/112</a>).</li> <li>vm_infra - Migrate role (<a class="reference external" href="https://github.com/oVirt/ovirt-ansible-collection/pull/93">https://github.com/oVirt/ovirt-ansible-collection/pull/93</a>).</li> </ul> </section> </section> <section id="id24"> <h3>Removed Features</h3> <section id="id25"> <h4>f5networks.f5_modules</h4> <ul class="simple"> <li>Removed arp_state parameter from the bigip_virtual_address module</li> </ul> </section> </section> <section id="id26"> <h3>Deprecated Features</h3> <section id="id27"> <h4>cisco.nxos</h4> <ul class="simple"> <li>Deprecated <code>nxos_interface_ospf</code> in favor of <code>nxos_ospf_interfaces</code> Resource Module.</li> </ul> </section> </section> </section> <section id="porting-guide-for-v2-10-1"> <h2>Porting Guide for v2.10.1</h2> <section id="id28"> <h3>Major Changes</h3> <section id="community-kubernetes"> <h4>community.kubernetes</h4> <ul class="simple"> <li>k8s - Add support for template parameter (<a class="reference external" href="https://github.com/ansible-collections/community.kubernetes/pull/230">https://github.com/ansible-collections/community.kubernetes/pull/230</a>).</li> <li>k8s_* - Add support for vaulted kubeconfig and src (<a class="reference external" href="https://github.com/ansible-collections/community.kubernetes/pull/193">https://github.com/ansible-collections/community.kubernetes/pull/193</a>).</li> </ul> </section> </section> <section id="id29"> <h3>Deprecated Features</h3> <section id="id30"> <h4>cisco.nxos</h4> <ul class="simple"> <li>Deprecated <code>nxos_smu</code> in favor of <code>nxos_rpm</code> module.</li> <li>The <code>nxos_ospf_vrf</code> module is deprecated by <code>nxos_ospfv2</code> and <code>nxos_ospfv3</code> Resource Modules.</li> </ul> </section> </section> </section> <section id="porting-guide-for-v2-10-0"> <h2>Porting Guide for v2.10.0</h2> <section id="known-issues"> <h3>Known Issues</h3> <ul class="simple"> <li>Due to a limitation in pip, you cannot <code>pip install --upgrade</code> from ansible-2.9 or earlier to ansible-2.10 or higher. Instead, you must explicitly use <code>pip uninstall ansible</code> before pip installing the new version. If you attempt to upgrade Ansible with pip without first uninstalling, the installer warns you to uninstall first.</li> <li>The individual collections that make up the ansible-2.10.0 package can be viewed independently. However, they are not currently listed by ansible-galaxy. To view these collections with ansible-galaxy, explicitly specify where ansible has installed the collections – <code>COLLECTION_INSTALL=$(python -c 'import ansible, os.path ; print("%s/../ansible_collections" % os.path.dirname(ansible.__file__))') ansible-galaxy collection list -p "$COLLECTION_INSTALL"</code>.</li> <li>
<p>These fortios modules are not automatically redirected from their 2.9.x names to the new 2.10.x names within collections. You must modify your playbooks to use fully qualified collection names for them. You can use the documentation (<a class="reference external" href="https://docs.ansible.com/ansible/2.10/collections/fortinet/fortios/">https://docs.ansible.com/ansible/2.10/collections/fortinet/fortios/</a>) for the <code>fortinet.fortios</code> collection to determine what the fully qualified collection names are.</p> <ul> <li>fortios_address</li> <li>fortios_config</li> <li>fortios_firewall_DoS_policy</li> <li>fortios_firewall_DoS_policy6</li> <li>fortios_ipv4_policy</li> <li>fortios_switch_controller_802_1X_settings</li> <li>fortios_switch_controller_security_policy_802_1X</li> <li>fortios_system_firmware_upgrade</li> <li>fortios_system_nd_proxy</li> <li>fortios_webfilter</li> </ul> </li> </ul> <section id="community-grafana"> <h4>community.grafana</h4> <ul class="simple"> <li>grafana_datasource doesn’t set password correctly (#113)</li> </ul> </section> </section> <section id="id31"> <h3>Breaking Changes</h3> <ul class="simple"> <li>cisco.nxos.nxos_igmp_interface - no longer supports the deprecated <code>oif_prefix</code> and <code>oif_source</code> options. These have been superseded by <code>oif_ps</code>.</li> <li>community.grafana.grafana_dashboard - the parameter <code>message</code> is renamed to <code>commit_message</code> since <code>message</code> is used by Ansible Core engine internally.</li> <li>purestorage.flashblade.purefb_fs - no longer supports the deprecated <code>nfs</code> option. This has been superseded by <code>nfsv3</code>.</li> </ul> <section id="amazon-aws"> <h4>amazon.aws</h4> <ul class="simple"> <li>aws_s3 - can now delete versioned buckets even when they are not empty - set mode to delete to delete a versioned bucket and everything in it.</li> </ul> </section> <section id="ansible-windows"> <h4>ansible.windows</h4> <ul class="simple"> <li>setup - Make sure <code>ansible_date_time.epoch</code> is seconds since EPOCH in UTC to mirror the POSIX facts. The <code>ansible_date_time.epoch_local</code> contains seconds since EPOCH in the local timezone for backwards compatibility</li> <li>setup - Will now add the IPv6 scope on link local addresses for <code>ansible_ip_addresses</code>
</li> <li>setup - <code>ansible_processor</code> will now return the index before the other values to match the POSIX fact behaviour</li> <li>win_find - No longer filters by size on directories, this feature had a lot of bugs, slowed down the module, and not a supported scenario with the <code>find</code> module.</li> <li>
<dl class="simple"> <dt>
<code>win_find - module has been refactored to better match the behaviour of the find module. Here is what has changed:</code> </dt>
<dd>
<ul> <li>When the directory specified by <code>paths</code> does not exist or is a file, it will no longer fail and will just warn the user</li> <li>Junction points are no longer reported as <code>islnk</code>, use <code>isjunction</code> to properly report these files. This behaviour matches the win_stat module</li> <li>Directories no longer return a <code>size</code>, this matches the <code>stat</code> and <code>find</code> behaviour and has been removed due to the difficulties in correctly reporting the size of a directory</li> </ul> </dd> </dl> </li> <li>win_user - Change idempotency checks for <code>description</code> to be case sensitive</li> <li>win_user - Change idempotency checks for <code>fullname</code> to be case sensitive</li> </ul> </section> <section id="cisco-meraki"> <h4>cisco.meraki</h4> <ul class="simple"> <li>meraki_device - Changed tags from string to list</li> <li>meraki_device - Removed serial_lldp_cdp parameter</li> <li>meraki_device - Removed serial_uplink parameter</li> <li>meraki_intrusion_prevention - Rename whitedlisted_rules to allowed_rules</li> <li>meraki_mx_l3_firewall - Rule responses are now in a <code>rules</code> list</li> <li>meraki_mx_l7_firewall - Rename blacklisted_countries to blocked_countries</li> <li>meraki_mx_l7_firewall - Rename whitelisted_countries to allowed_countries</li> <li>meraki_network - Local and remote status page settings cannot be set during network creation</li> <li>meraki_network - <code>disableRemoteStatusPage</code> response is now <code>remote_status_page_enabled</code>
</li> <li>meraki_network - <code>disable_my_meraki_com</code> response is now <code>local_status_page_enabled</code>
</li> <li>meraki_network - <code>disable_my_meraki</code> has been deprecated</li> <li>meraki_network - <code>enable_my_meraki</code> is now called <code>local_status_page_enabled</code>
</li> <li>meraki_network - <code>enable_remote_status_page</code> is now called <code>remote_status_page_enabled</code>
</li> <li>meraki_network - <code>enabled</code> response for VLAN status is now <code>vlans_enabled</code>
</li> <li>meraki_network - <code>tags</code> and <code>type</code> now return a list</li> <li>meraki_snmp - peer_ips is now a list</li> <li>meraki_switchport - <code>access_policy_number</code> is now an int and not a string</li> <li>meraki_switchport - <code>tags</code> is now a list and not a string</li> <li>meraki_webhook - Querying test status now uses state of query.</li> </ul> </section> <section id="id32"> <h4>community.general</h4> <ul class="simple"> <li>The environment variable for the auth context for the oc.py connection plugin has been corrected (K8S_CONTEXT). It was using an initial lowercase k by mistake. (<a class="reference external" href="https://github.com/ansible-collections/community.general/pull/377">https://github.com/ansible-collections/community.general/pull/377</a>).</li> <li>bigpanda - the parameter <code>message</code> was renamed to <code>deployment_message</code> since <code>message</code> is used by Ansible Core engine internally.</li> <li>cisco_spark - the module option <code>message</code> was renamed to <code>msg</code>, as <code>message</code> is used internally in Ansible Core engine (<a class="reference external" href="https://github.com/ansible/ansible/issues/39295">https://github.com/ansible/ansible/issues/39295</a>)</li> <li>datadog - the parameter <code>message</code> was renamed to <code>notification_message</code> since <code>message</code> is used by Ansible Core engine internally.</li> <li>docker_container - no longer passes information on non-anonymous volumes or binds as <code>Volumes</code> to the Docker daemon. This increases compatibility with the <code>docker</code> CLI program. Note that if you specify <code>volumes: strict</code> in <code>comparisons</code>, this could cause existing containers created with docker_container from Ansible 2.9 or earlier to restart.</li> <li>docker_container - support for port ranges was adjusted to be more compatible to the <code>docker</code> command line utility: a one-port container range combined with a multiple-port host range will no longer result in only the first host port be used, but the whole range being passed to Docker so that a free port in that range will be used.</li> <li>hashi_vault lookup - now returns the latest version when using the KV v2 secrets engine. Previously, it returned all versions of the secret which required additional steps to extract and filter the desired version.</li> <li>log_plays callback - add missing information to the logs generated by the callback plugin. This changes the log message format (<a class="reference external" href="https://github.com/ansible-collections/community.general/pull/442">https://github.com/ansible-collections/community.general/pull/442</a>).</li> <li>pkgng - passing <code>name: *</code> with <code>state: absent</code> will no longer remove every installed package from the system. It is now a noop. (<a class="reference external" href="https://github.com/ansible-collections/community.general/pull/569">https://github.com/ansible-collections/community.general/pull/569</a>).</li> <li>pkgng - passing <code>name: *</code> with <code>state: latest</code> or <code>state: present</code> will no longer install every package from the configured package repositories. Instead, <code>name: *, state: latest</code> will upgrade all already-installed packages, and <code>name: *, state: present</code> is a noop. (<a class="reference external" href="https://github.com/ansible-collections/community.general/pull/569">https://github.com/ansible-collections/community.general/pull/569</a>).</li> </ul> </section> <section id="id33"> <h4>community.network</h4> <ul class="simple"> <li>routeros_facts - allow multiple addresses and neighbors per interface. This makes <code>ansible_net_neighbors</code> a list instead of a dict (<a class="reference external" href="https://github.com/ansible-collections/community.network/pull/6">https://github.com/ansible-collections/community.network/pull/6</a>).</li> </ul> </section> <section id="id34"> <h4>community.vmware</h4> <ul class="simple"> <li>vmware_datastore_maintenancemode - now returns <code>datastore_status</code> instead of Ansible internal key <code>results</code>.</li> <li>vmware_guest_custom_attributes - does not require VM name which was a required parameter for releases prior to Ansible 2.10.</li> <li>vmware_guest_find - the <code>datacenter</code> option has been removed.</li> <li>vmware_host_kernel_manager - now returns <code>host_kernel_status</code> instead of Ansible internal key <code>results</code>.</li> <li>vmware_host_ntp - now returns <code>host_ntp_status</code> instead of Ansible internal key <code>results</code>.</li> <li>vmware_host_service_manager - now returns <code>host_service_status</code> instead of Ansible internal key <code>results</code>.</li> <li>vmware_tag - now returns <code>tag_status</code> instead of Ansible internal key <code>results</code>.</li> <li>vmware_vmkernel - the options <code>ip_address</code> and <code>subnet_mask</code> have been removed; use the suboptions <code>ip_address</code> and <code>subnet_mask</code> of the <code>network</code> option instead.</li> </ul> </section> <section id="community-windows"> <h4>community.windows</h4> <ul class="simple"> <li>win_pester - no longer runs all <code>*.ps1</code> file in the directory specified due to it executing potentially unknown scripts. It will follow the default behaviour of only running tests for files that are like <code>*.tests.ps1</code> which is built into Pester itself.</li> </ul> </section> <section id="community-zabbix"> <h4>community.zabbix</h4> <ul class="simple"> <li>zabbix_javagateway - options <code>javagateway_pidfile</code>, <code>javagateway_listenip</code>, <code>javagateway_listenport</code> and <code>javagateway_startpollers</code> renamed to <code>zabbix_javagateway_xyz</code> (see <a class="reference external" href="https://github.com/ansible-collections/community.zabbix/blob/main/docs/UPGRADE.md">UPGRADE.md</a>).</li> </ul> </section> <section id="id35"> <h4>netbox.netbox</h4> <ul> <li>Change <code>ip-addresses</code> key in netbox inventory plugin to <code>ip_addresses</code> (<a class="reference external" href="https://github.com/netbox-community/ansible_modules/issues/139">https://github.com/netbox-community/ansible_modules/issues/139</a>)</li> <li>Changed <code>group</code> to <code>tenant_group</code> in <code>netbox_tenant.py</code> (<a class="reference external" href="https://github.com/netbox-community/ansible_modules/issues/9">https://github.com/netbox-community/ansible_modules/issues/9</a>)</li> <li>Changed <code>role</code> to <code>prefix_role</code> in <code>netbox_prefix.py</code> (<a class="reference external" href="https://github.com/netbox-community/ansible_modules/issues/9">https://github.com/netbox-community/ansible_modules/issues/9</a>)</li> <li>Module failures when required fields aren’t provided (<a class="reference external" href="https://github.com/netbox-community/ansible_modules/issues/24">https://github.com/netbox-community/ansible_modules/issues/24</a>)</li> <li>Renamed <code>netbox_interface</code> to <code>netbox_device_interface</code> (<a class="reference external" href="https://github.com/netbox-community/ansible_modules/issues/9">https://github.com/netbox-community/ansible_modules/issues/9</a>)</li> <li>This version has a few breaking changes due to new namespace and collection name. I felt it necessary to change the name of the lookup plugin and inventory plugin just not to have a non descriptive namespace call to use them. Below is an example: <code>netbox.netbox.netbox</code> would be used for both inventory plugin and lookup plugin, but in different contexts so no collision will arise, but confusion will. I renamed the lookup plugin to <code>nb_lookup</code> so it will be used with the FQCN <code>netbox.netbox.nb_lookup</code>. The inventory plugin will now be called within an inventory file by <code>netbox.netbox.nb_inventory</code>
</li> <li>
<p>To pass in integers through Ansible Jinja filters for a key in <code>data</code> that requires querying an endpoint is now done by making it a dictionary with an <code>id</code> key. The previous behavior was to just pass in an integer and it was converted when normalizing the data, but some people may have names that are all integers and those were being converted erroneously so we made the decision to change the method to convert to an integer for the NetBox API.</p> <pre data-language="YAML+Jinja">tasks:
  - name: Create device within NetBox with only required information
    netbox_device:
      netbox_url: http://netbox-demo.org:32768
      netbox_token: 0123456789abcdef0123456789abcdef01234567
      data:
        name: Test66
        device_type:
          id: "{{ some_jinja_variable }}"
        device_role: Core Switch
        site: Test Site
        status: Staged
      state: present
</pre> </li> <li>
<code>pynetbox</code> changed to using <code>requests.Session()</code> to manage the HTTP session which broke passing in <code>ssl_verify</code> when building the NetBox API client. This PR makes <code>pynetbox 5.0.4+</code> the new required version of <code>pynetbox</code> for the Ansible modules and lookup plugin. (<a class="reference external" href="https://github.com/netbox-community/ansible_modules/pull/269">https://github.com/netbox-community/ansible_modules/pull/269</a>)</li> </ul> </section> <section id="theforeman-foreman"> <h4>theforeman.foreman</h4> <ul class="simple"> <li>
<p>All modules were renamed to drop the <code>foreman_</code> and <code>katello_</code> prefixes. Additionally to the prefix removal, the following modules were further ranamed:</p> <ul> <li>katello_upload to content_upload</li> <li>katello_sync to repository_sync</li> <li>katello_manifest to subscription_manifest</li> <li>foreman_search_facts to resource_info</li> <li>foreman_ptable to partition_table</li> <li>foreman_model to hardware_model</li> <li>foreman_environment to puppet_environment</li> </ul> </li> </ul> </section> </section> <section id="id36"> <h3>Major Changes</h3> <section id="id37"> <h4>Ansible-base</h4> <ul class="simple"> <li>Both ansible-doc and ansible-console’s help command will error for modules and plugins whose return documentation cannot be parsed as YAML. All modules and plugins passing <code>ansible-test sanity --test yamllint</code> will not be affected by this.</li> <li>Collections may declare a list of supported/tested Ansible versions for the collection. A warning is issued if a collection does not support the Ansible version that loads it (can also be configured as silent or a fatal error). Collections that do not declare supported Ansible versions do not issue a warning/error.</li> <li>Plugin routing allows collections to declare deprecation, redirection targets, and removals for all plugin types.</li> <li>Plugins that import module_utils and other ansible namespaces that have moved to collections should continue to work unmodified.</li> <li>Routing data built into Ansible 2.10 ensures that 2.9 content should work unmodified on 2.10. Formerly included modules and plugins that were moved to collections are still accessible by their original unqualified names, so long as their destination collections are installed.</li> <li>When deprecations are done in code, they to specify a <code>collection_name</code> so that deprecation warnings can mention which collection - or ansible-base - is deprecating a feature. This affects all <code>Display.deprecated()</code> or <code>AnsibleModule.deprecate()</code> or <code>Ansible.Basic.Deprecate()</code> calls, and <code>removed_in_version</code>/<code>removed_at_date</code> or <code>deprecated_aliases</code> in module argument specs.</li> <li>ansible-test now uses a different <code>default</code> test container for Ansible Collections</li> </ul> </section> <section id="id38"> <h4>amazon.aws</h4> <ul class="simple"> <li>ec2 module_utils - The <code>AWSRetry</code> decorator no longer catches <code>NotFound</code> exceptions by default. <code>NotFound</code> exceptions need to be explicitly added using <code>catch_extra_error_codes</code>. Some AWS modules may see an increase in transient failures due to AWS’’s eventual consistency model.</li> </ul> </section> <section id="ansible-netcommon"> <h4>ansible.netcommon</h4> <ul class="simple"> <li>Add libssh connection plugin and refactor network_cli (<a class="reference external" href="https://github.com/ansible-collections/ansible.netcommon/pull/30">https://github.com/ansible-collections/ansible.netcommon/pull/30</a>)</li> </ul> </section> <section id="ansible-posix"> <h4>ansible.posix</h4> <ul class="simple"> <li>Bootstrap Collection (<a class="reference external" href="https://github.com/ansible-collections/ansible.posix/pull/1">https://github.com/ansible-collections/ansible.posix/pull/1</a>).</li> </ul> </section> <section id="id39"> <h4>cisco.meraki</h4> <ul class="simple"> <li>Rewrite requests method for version 1.0 API and improved readability</li> <li>meraki_mr_rf_profile - Configure wireless RF profiles.</li> <li>meraki_mr_settings - Configure network settings for wireless.</li> <li>meraki_ms_l3_interface - New module</li> <li>meraki_ms_ospf - Configure OSPF.</li> </ul> </section> <section id="id40"> <h4>community.general</h4> <ul class="simple"> <li>docker_container - the <code>network_mode</code> option will be set by default to the name of the first network in <code>networks</code> if at least one network is given and <code>networks_cli_compatible</code> is <code>true</code> (will be default from community.general 2.0.0 on). Set to an explicit value to avoid deprecation warnings if you specify networks and set <code>networks_cli_compatible</code> to <code>true</code>. The current default (not specifying it) is equivalent to the value <code>default</code>.</li> <li>docker_container - the module has a new option, <code>container_default_behavior</code>, whose default value will change from <code>compatibility</code> to <code>no_defaults</code>. Set to an explicit value to avoid deprecation warnings.</li> <li>gitlab_user - no longer requires <code>name</code>, <code>email</code> and <code>password</code> arguments when <code>state=absent</code>.</li> </ul> </section> <section id="id41"> <h4>community.grafana</h4> <ul class="simple"> <li>Add changelog management for ansible 2.10 (#112)</li> <li>grafana_datasource ; adding additional_json_data param</li> </ul> </section> <section id="id42"> <h4>community.kubernetes</h4> <ul class="simple"> <li>Add changelog and fragments and document changelog process (<a class="reference external" href="https://github.com/ansible-collections/community.kubernetes/pull/131">https://github.com/ansible-collections/community.kubernetes/pull/131</a>).</li> <li>helm - New module for managing Helm charts (<a class="reference external" href="https://github.com/ansible-collections/community.kubernetes/pull/61">https://github.com/ansible-collections/community.kubernetes/pull/61</a>).</li> <li>helm_info - New module for retrieving Helm chart information (<a class="reference external" href="https://github.com/ansible-collections/community.kubernetes/pull/61">https://github.com/ansible-collections/community.kubernetes/pull/61</a>).</li> <li>helm_plugin - new module to manage Helm plugins (<a class="reference external" href="https://github.com/ansible-collections/community.kubernetes/pull/154">https://github.com/ansible-collections/community.kubernetes/pull/154</a>).</li> <li>helm_plugin_info - new modules to gather information about Helm plugins (<a class="reference external" href="https://github.com/ansible-collections/community.kubernetes/pull/154">https://github.com/ansible-collections/community.kubernetes/pull/154</a>).</li> <li>helm_repository - New module for managing Helm repositories (<a class="reference external" href="https://github.com/ansible-collections/community.kubernetes/pull/61">https://github.com/ansible-collections/community.kubernetes/pull/61</a>).</li> <li>k8s - Inventory source migrated from Ansible 2.9 to Kubernetes collection.</li> <li>k8s - Lookup plugin migrated from Ansible 2.9 to Kubernetes collection.</li> <li>k8s - Module migrated from Ansible 2.9 to Kubernetes collection.</li> <li>k8s_auth - Module migrated from Ansible 2.9 to Kubernetes collection.</li> <li>k8s_config_resource_name - Filter plugin migrated from Ansible 2.9 to Kubernetes collection.</li> <li>k8s_exec - New module for executing commands on pods through Kubernetes API (<a class="reference external" href="https://github.com/ansible-collections/community.kubernetes/pull/14">https://github.com/ansible-collections/community.kubernetes/pull/14</a>).</li> <li>k8s_exec - Return rc for the command executed (<a class="reference external" href="https://github.com/ansible-collections/community.kubernetes/pull/158">https://github.com/ansible-collections/community.kubernetes/pull/158</a>).</li> <li>k8s_info - Module migrated from Ansible 2.9 to Kubernetes collection.</li> <li>k8s_log - New module for retrieving pod logs (<a class="reference external" href="https://github.com/ansible-collections/community.kubernetes/pull/16">https://github.com/ansible-collections/community.kubernetes/pull/16</a>).</li> <li>k8s_scale - Module migrated from Ansible 2.9 to Kubernetes collection.</li> <li>k8s_service - Module migrated from Ansible 2.9 to Kubernetes collection.</li> <li>kubectl - Connection plugin migrated from Ansible 2.9 to Kubernetes collection.</li> <li>openshift - Inventory source migrated from Ansible 2.9 to Kubernetes collection.</li> </ul> </section> <section id="community-libvirt"> <h4>community.libvirt</h4> <ul class="simple"> <li>added generic libvirt inventory plugin</li> <li>removed libvirt_lxc inventory script</li> </ul> </section> <section id="dellemc-os10"> <h4>dellemc.os10</h4> <ul class="simple"> <li>New role os10_aaa - Facilitates the configuration of Authentication Authorization and Accounting (AAA), TACACS and RADIUS server.</li> <li>New role os10_acl - Facilitates the configuration of Access Control lists.</li> <li>New role os10_bfd - Facilitates the configuration of BFD global attributes.</li> <li>New role os10_bgp - Facilitates the configuration of border gateway protocol (BGP) attributes.</li> <li>New role os10_copy_config - This role pushes the backup running configuration into a OS10 device.</li> <li>New role os10_dns - Facilitates the configuration of domain name service (DNS).</li> <li>New role os10_ecmp - Facilitates the configuration of equal cost multi-path (ECMP) for IPv4.</li> <li>New role os10_fabric_summary Facilitates to get show system information of all the OS10 switches in the fabric.</li> <li>New role os10_flow_monitor Facilitates the configuration of ACL flow-based monitoring attributes.</li> <li>New role os10_image_upgrade Facilitates installation of OS10 software images.</li> <li>New role os10_interface Facilitates the configuration of interface attributes.</li> <li>New role os10_lag Facilitates the configuration of link aggregation group (LAG) attributes.</li> <li>New role os10_lldp Facilitates the configuration of link layer discovery protocol (LLDP) attributes at global and interface level.</li> <li>New role os10_logging Facilitates the configuration of global logging attributes and logging servers.</li> <li>New role os10_network_validation Facilitates validation of wiring connection, BGP neighbors, MTU between neighbors and VLT pair.</li> <li>New role os10_ntp Facilitates the configuration of network time protocol (NTP) attributes.</li> <li>New role os10_prefix_list Facilitates the configuration of IP prefix-list.</li> <li>New role os10_qos Facilitates the configuration of quality of service attributes including policy-map and class-map.</li> <li>New role os10_raguard Facilitates the configuration of IPv6 RA Guard attributes.</li> <li>New role os10_route_map Facilitates the configuration of route-map attributes.</li> <li>New role os10_snmp Facilitates the configuration of global SNMP attributes.</li> <li>New role os10_system Facilitates the configuration of hostname and hashing algorithm.</li> <li>New role os10_template The role takes the raw string input from the CLI of OS10 device, and returns a structured text in the form of a Python dictionary.</li> <li>New role os10_uplink Facilitates the configuration of uplink attributes like uplink-state group.</li> <li>New role os10_users Facilitates the configuration of global system user attributes.</li> <li>New role os10_vlan Facilitates the configuration of virtual LAN (VLAN) attributes.</li> <li>New role os10_vlt Facilitates the configuration of virtual link trunking (VLT).</li> <li>New role os10_vrf Facilitates the configuration of virtual routing and forwarding (VRF).</li> <li>New role os10_vrrp Facilitates the configuration of virtual router redundancy protocol (VRRP) attributes.</li> <li>New role os10_vxlan Facilitates the configuration of virtual extensible LAN (VXLAN) attributes.</li> <li>New role os10_xstp Facilitates the configuration of xSTP attributes.</li> </ul> </section> <section id="id43"> <h4>f5networks.f5_modules</h4> <ul class="simple"> <li>Broke apart bigip_device_auth_radius to implement radius server configuration in bigip_device_auth_server module. Refer to module documentation for usage details</li> <li>Remove redundant parameters in f5_provider to fix disparity between documentation and module parameters</li> </ul> </section> <section id="gluster-gluster"> <h4>gluster.gluster</h4> <ul class="simple"> <li>geo_rep - Added the independent module of geo rep with other gluster modules (<a class="reference external" href="https://github.com/gluster/gluster-ansible-collection/pull/2">https://github.com/gluster/gluster-ansible-collection/pull/2</a>).</li> </ul> </section> <section id="id44"> <h4>ovirt.ovirt</h4> <ul class="simple"> <li>ovirt_disk - Add backup (<a class="reference external" href="https://github.com/oVirt/ovirt-ansible-collection/pull/57">https://github.com/oVirt/ovirt-ansible-collection/pull/57</a>).</li> <li>ovirt_disk - Support direct upload/download (<a class="reference external" href="https://github.com/oVirt/ovirt-ansible-collection/pull/35">https://github.com/oVirt/ovirt-ansible-collection/pull/35</a>).</li> <li>ovirt_host - Add ssh_port (<a class="reference external" href="https://github.com/oVirt/ovirt-ansible-collection/pull/60">https://github.com/oVirt/ovirt-ansible-collection/pull/60</a>).</li> <li>ovirt_vm_os_info - Creation of module (<a class="reference external" href="https://github.com/oVirt/ovirt-ansible-collection/pull/26">https://github.com/oVirt/ovirt-ansible-collection/pull/26</a>).</li> </ul> </section> <section id="purestorage-flasharray"> <h4>purestorage.flasharray</h4> <ul class="simple"> <li>purefa_console - manage Console Lock setting for the FlashArray</li> <li>purefa_endpoint - manage VMware protocol-endpoints on the FlashArray</li> <li>purefa_eula - sign, or resign, FlashArray EULA</li> <li>purefa_inventory - get hardware inventory information from a FlashArray</li> <li>purefa_network - manage the physical and virtual network settings on the FlashArray</li> <li>purefa_pgsched - manage protection group snapshot and replication schedules on the FlashArray</li> <li>purefa_pod - manage ActiveCluster pods in FlashArrays</li> <li>purefa_pod_replica - manage ActiveDR pod replica links in FlashArrays</li> <li>purefa_proxy - manage the phonehome HTTPS proxy setting for the FlashArray</li> <li>purefa_smis - manage SMI-S settings on the FlashArray</li> <li>purefa_subnet - manage network subnets on the FlashArray</li> <li>purefa_timeout - manage the GUI idle timeout on the FlashArray</li> <li>purefa_vlan - manage VLAN interfaces on the FlashArray</li> <li>purefa_vnc - manage VNC for installed applications on the FlashArray</li> <li>purefa_volume_tags - manage volume tags on the FlashArray</li> </ul> </section> <section id="purestorage-flashblade"> <h4>purestorage.flashblade</h4> <ul class="simple"> <li>purefb_alert - manage alert email settings on a FlashBlade</li> <li>purefb_bladename - manage FlashBlade name</li> <li>purefb_bucket_replica - manage bucket replica links on a FlashBlade</li> <li>purefb_connect - manage connections between FlashBlades</li> <li>purefb_dns - manage DNS settings on a FlashBlade</li> <li>purefb_fs_replica - manage filesystem replica links on a FlashBlade</li> <li>purefb_inventory - get information about the hardware inventory of a FlashBlade</li> <li>purefb_ntp - manage the NTP settings for a FlashBlade</li> <li>purefb_phonehome - manage the phone home settings for a FlashBlade</li> <li>purefb_policy - manage the filesystem snapshot policies for a FlashBlade</li> <li>purefb_proxy - manage the phone home HTTP proxy settings for a FlashBlade</li> <li>purefb_remote_cred - manage the Object Store Remote Credentials on a FlashBlade</li> <li>purefb_snmp_agent - modify the FlashBlade SNMP Agent</li> <li>purefb_snmp_mgr - manage SNMP Managers on a FlashBlade</li> <li>purefb_target - manage remote S3-capable targets for a FlashBlade</li> <li>purefb_user - manage local <code>pureuser</code> account password on a FlashBlade</li> </ul> </section> </section> <section id="id45"> <h3>Removed Features</h3> <section id="id46"> <h4>Ansible-base</h4> <ul class="simple"> <li>core - remove support for <code>check_invalid_arguments</code> in <code>AnsibleModule</code>, <code>AzureModule</code> and <code>UTMModule</code>.</li> </ul> </section> <section id="id47"> <h4>ansible.netcommon</h4> <ul class="simple"> <li>module_utils.network.common.utils.ComplexDict has been removed</li> </ul> </section> <section id="id48"> <h4>ansible.windows</h4> <ul class="simple"> <li>win_stat - removed the deprecated <code>get_md55</code> option and <code>md5</code> return value.</li> </ul> </section> <section id="community-crypto"> <h4>community.crypto</h4> <ul class="simple"> <li>The <code>letsencrypt</code> module has been removed. Use <code>acme_certificate</code> instead.</li> </ul> </section> <section id="id49"> <h4>community.general</h4> <ul class="simple"> <li>conjur_variable lookup - has been moved to the <code>cyberark.conjur</code> collection. A redirection is active, which will be removed in version 2.0.0 (<a class="reference external" href="https://github.com/ansible-collections/community.general/pull/570">https://github.com/ansible-collections/community.general/pull/570</a>).</li> <li>core - remove support for <code>check_invalid_arguments</code> in <code>UTMModule</code>.</li> <li>digital_ocean_* - all DigitalOcean modules have been moved to the <code>community.digitalocean</code> collection. A redirection is active, which will be removed in version 2.0.0 (<a class="reference external" href="https://github.com/ansible-collections/community.general/pull/622">https://github.com/ansible-collections/community.general/pull/622</a>).</li> <li>infini_* - all infinidat modules have been moved to the <code>infinidat.infinibox</code> collection. A redirection is active, which will be removed in version 2.0.0 (<a class="reference external" href="https://github.com/ansible-collections/community.general/pull/607">https://github.com/ansible-collections/community.general/pull/607</a>).</li> <li>logicmonitor - the module has been removed in 1.0.0 since it is unmaintained and the API used by the module has been turned off in 2017 (<a class="reference external" href="https://github.com/ansible-collections/community.general/issues/539">https://github.com/ansible-collections/community.general/issues/539</a>, <a class="reference external" href="https://github.com/ansible-collections/community.general/pull/541">https://github.com/ansible-collections/community.general/pull/541</a>).</li> <li>logicmonitor_facts - the module has been removed in 1.0.0 since it is unmaintained and the API used by the module has been turned off in 2017 (<a class="reference external" href="https://github.com/ansible-collections/community.general/issues/539">https://github.com/ansible-collections/community.general/issues/539</a>, <a class="reference external" href="https://github.com/ansible-collections/community.general/pull/541">https://github.com/ansible-collections/community.general/pull/541</a>).</li> <li>mysql_* - all MySQL modules have been moved to the <code>community.mysql</code> collection. A redirection is active, which will be removed in version 2.0.0 (<a class="reference external" href="https://github.com/ansible-collections/community.general/pull/633">https://github.com/ansible-collections/community.general/pull/633</a>).</li> <li>pacman - Removed deprecated <code>recurse</code> option, use <code>extra_args=--recursive</code> instead</li> <li>proxysql_* - all ProxySQL modules have been moved to the <code>community.proxysql</code> collection. A redirection is active, which will be removed in version 2.0.0 (<a class="reference external" href="https://github.com/ansible-collections/community.general/pull/624">https://github.com/ansible-collections/community.general/pull/624</a>).</li> </ul> </section> <section id="id50"> <h4>community.network</h4> <ul class="simple"> <li>onyx - all onyx modules and plugins have been moved to the mellanox.onyx collection. Redirects have been added that will be removed in community.network 2.0.0 (<a class="reference external" href="https://github.com/ansible-collections/community.network/pull/83">https://github.com/ansible-collections/community.network/pull/83</a>).</li> </ul> </section> <section id="id51"> <h4>community.vmware</h4> <ul class="simple"> <li>vmware_guest_find - Removed deprecated <code>datacenter</code> option</li> <li>vmware_portgroup - removed ‘inbound_policy’, and ‘rolling_order’ deprecated options.</li> <li>vmware_vmkernel - Removed deprecated <code>ip_address</code> option; use sub-option ip_address in the network option instead</li> <li>vmware_vmkernel - Removed deprecated <code>subnet_mask</code> option; use sub-option subnet_mask in the network option instead</li> </ul> </section> <section id="id52"> <h4>community.windows</h4> <ul class="simple"> <li>win_disk_image - removed the deprecated return value <code>mount_path</code> in favor of <code>mount_paths</code>.</li> <li>win_psexec - removed the deprecated <code>extra_opts</code> option.</li> </ul> </section> <section id="id53"> <h4>f5networks.f5_modules</h4> <ul class="simple"> <li>Remove _bigip_iapplx_package alias</li> <li>Remove _bigip_security_address_list alias</li> <li>Remove _bigip_security_port_list alias</li> <li>Remove _bigip_traffic_group alias</li> <li>Remove bigip_appsvcs_extension module</li> <li>Remove bigip_asm_policy module</li> </ul> </section> </section> <section id="id54"> <h3>Deprecated Features</h3> <ul class="simple"> <li>The vyos.vyos.vyos_static_route module has been deprecated and will be removed in a later release; use vyos.vyos.vyos_static_routes instead.</li> </ul> <section id="id55"> <h4>Ansible-base</h4> <ul class="simple"> <li>Using the DefaultCallback without the correspodning doc_fragment or copying the documentation.</li> <li>hash_behaviour - Deprecate <code>hash_behaviour</code> for future removal.</li> <li>script inventory plugin - The ‘cache’ option is deprecated and will be removed in 2.12. Its use has been removed from the plugin since it has never had any effect.</li> </ul> </section> <section id="id56"> <h4>amazon.aws</h4> <ul class="simple"> <li>All AWS Modules - <code>aws_access_key</code>, <code>aws_secret_key</code> and <code>security_token</code> will be made mutually exclusive with <code>profile</code> after 2022-06-01.</li> <li>cloudformation - The <code>template_format</code> option had no effect since Ansible 2.3 and will be removed after 2022-06-01</li> <li>cloudformation - the <code>template_format</code> option has been deprecated and will be removed in a later release. It has been ignored by the module since Ansible 2.3.</li> <li>data_pipeline - The <code>version</code> option had no effect and will be removed in after 2022-06-01</li> <li>ec2 - in a later release, the <code>group</code> and <code>group_id</code> options will become mutually exclusive. Currently <code>group_id</code> is ignored if you pass both.</li> <li>ec2_ami - The <code>no_device</code> alias <code>NoDevice</code> has been deprecated and will be removed after 2022-06-01</li> <li>ec2_ami - The <code>virtual_name</code> alias <code>VirtualName</code> has been deprecated and will be removed after 2022-06-01</li> <li>ec2_eip - The <code>wait_timeout</code> option had no effect and will be removed after 2022-06-01</li> <li>ec2_key - The <code>wait_timeout</code> option had no effect and will be removed after 2022-06-01</li> <li>ec2_key - The <code>wait</code> option had no effect and will be removed after 2022-06-01</li> <li>ec2_key - the <code>wait_timeout</code> option has been deprecated and will be removed in a later release. It has had no effect since Ansible 2.5.</li> <li>ec2_key - the <code>wait</code> option has been deprecated and will be removed in a later release. It has had no effect since Ansible 2.5.</li> <li>ec2_lc - The <code>associate_public_ip_address</code> option had no effect and will be removed after 2022-06-01</li> <li>ec2_tag - deprecate the <code>list</code> option in favor of ec2_tag_info</li> <li>ec2_tag - support for <code>list</code> as a state has been deprecated and will be removed in a later release. The <code>ec2_tag_info</code> can be used to fetch the tags on an EC2 resource.</li> </ul> </section> <section id="id57"> <h4>ansible.windows</h4> <ul class="simple"> <li>win_domain_computer - Deprecated the undocumented <code>log_path</code> option. This option will be removed in a major release after <code>2022-07-01</code>.</li> <li>win_domain_controller - the <code>log_path</code> option has been deprecated and will be removed in a later release. This was undocumented and only related to debugging information for module development.</li> <li>win_package - the <code>ensure</code> alias for the <code>state</code> option has been deprecated and will be removed in a later release. Please use <code>state</code> instead of <code>ensure</code>.</li> <li>win_package - the <code>productid</code> alias for the <code>product_id</code> option has been deprecated and will be removed in a later release. Please use <code>product_id</code> instead of <code>productid</code>.</li> <li>win_package - the <code>username</code> and <code>password</code> options has been deprecated and will be removed in a later release. The same functionality can be done by using <code>become: yes</code> and <code>become_flags: logon_type=new_credentials logon_flags=netcredentials_only</code> on the task.</li> <li>win_regedit - Deprecated using forward slashes as a path separator, use backslashes to avoid ambiguity between a forward slash in the key name or a forward slash as a path separator. This feature will be removed in a major release after <code>2021-07-01</code>.</li> </ul> </section> <section id="id58"> <h4>community.aws</h4> <ul class="simple"> <li>cloudformation - The <code>template_format</code> option had no effect since Ansible 2.3 and will be removed after 2022-06-01</li> <li>data_pipeline - The <code>version</code> option had no effect and will be removed after 2022-06-01</li> <li>data_pipeline - the <code>version</code> option has been deprecated and will be removed in a later release. It has always been ignored by the module.</li> <li>ec2_eip - The <code>wait_timeout</code> option had no effect and will be removed after 2022-06-01</li> <li>ec2_eip - the <code>wait_timeout</code> option has been deprecated and will be removed in a later release. It has had no effect since Ansible 2.3.</li> <li>ec2_key - The <code>wait_timeout</code> option had no effect and will be removed after 2022-06-01</li> <li>ec2_key - The <code>wait</code> option had no effect and will be removed after 2022-06-01</li> <li>ec2_lc - The <code>associate_public_ip_address</code> option had no effect and will be removed after 2022-06-01</li> <li>ec2_lc - the <code>associate_public_ip_address</code> option has been deprecated and will be removed after a later release. It has always been ignored by the module.</li> <li>elb_network_lb - The current default value of the <code>state</code> option has been deprecated and will change from absent to present after 2022-06-01</li> <li>elb_network_lb - in a later release, the default behaviour for the <code>state</code> option will change from <code>absent</code> to <code>present</code>. To maintain the existing behavior explicitly set state to <code>absent</code>.</li> <li>iam_managed_policy - The <code>fail_on_delete</code> option had no effect and will be removed after 2022-06-01</li> <li>iam_managed_policy - the <code>fail_on_delete</code> option has been deprecated and will be removed after a later release. It has always been ignored by the module.</li> <li>iam_policy - The <code>policy_document</code> will be removed after 2022-06-01. To maintain the existing behavior use the <code>policy_json</code> option and read the file with the <code>lookup</code> plugin.</li> <li>iam_policy - The default value of <code>skip_duplicates</code> will change after 2022-06-01 from <code>true</code> to <code>false</code>.</li> <li>iam_policy - in a later release, the default value for the <code>skip_duplicates</code> option will change from <code>true</code> to <code>false</code>. To maintain the existing behavior explicitly set it to <code>true</code>.</li> <li>iam_policy - the <code>policy_document</code> option has been deprecated and will be removed after a later release. To maintain the existing behavior use the <code>policy_json</code> option and read the file with the <code>lookup</code> plugin.</li> <li>iam_role - The default value of the purge_policies has been deprecated and will change from true to false after 2022-06-01</li> <li>iam_role - in a later release, the <code>purge_policies</code> option (also know as <code>purge_policy</code>) default value will change from <code>true</code> to <code>false</code>
</li> <li>s3_lifecycle - The <code>requester_pays</code> option had no effect and will be removed after 2022-06-01</li> <li>s3_lifecycle - the <code>requester_pays</code> option has been deprecated and will be removed after a later release. It has always been ignored by the module.</li> <li>s3_sync - The <code>retries</code> option had no effect and will be removed after 2022-06-01</li> <li>s3_sync - the <code>retries</code> option has been deprecated and will be removed after 2022-06-01. It has always been ignored by the module.</li> </ul> </section> <section id="id59"> <h4>community.crypto</h4> <ul class="simple"> <li>openssl_csr - all values for the <code>version</code> option except <code>1</code> are deprecated. The value 1 denotes the current only standardized CSR version.</li> </ul> </section> <section id="id60"> <h4>community.general</h4> <ul class="simple"> <li>The ldap_attr module has been deprecated and will be removed in a later release; use ldap_attrs instead.</li> <li>airbrake_deployment - Add deprecation notice for <code>token</code> parameter and v2 api deploys. This feature will be removed in community.general 3.0.0.</li> <li>clc_aa_policy - The <code>wait</code> option had no effect and will be removed in community.general 3.0.0.</li> <li>clc_aa_policy - the <code>wait</code> parameter will be removed. It has always been ignored by the module.</li> <li>docker_container - the <code>trust_image_content</code> option is now deprecated and will be removed in community.general 3.0.0. It has never been used by the module.</li> <li>docker_container - the <code>trust_image_content</code> option will be removed. It has always been ignored by the module.</li> <li>docker_container - the default of <code>container_default_behavior</code> will change from <code>compatibility</code> to <code>no_defaults</code> in community.general 3.0.0. Set the option to an explicit value to avoid a deprecation warning.</li> <li>docker_container - the default value for <code>network_mode</code> will change in community.general 3.0.0, provided at least one network is specified and <code>networks_cli_compatible</code> is <code>true</code>. See porting guide, module documentation or deprecation warning for more details.</li> <li>docker_stack - Return values <code>out</code> and <code>err</code> have been deprecated and will be removed in community.general 3.0.0. Use <code>stdout</code> and <code>stderr</code> instead.</li> <li>docker_stack - the return values <code>err</code> and <code>out</code> have been deprecated. Use <code>stdout</code> and <code>stderr</code> from now on instead.</li> <li>helm - Put <code>helm</code> module to deprecated. New implementation is available in community.kubernetes collection.</li> <li>redfish_config - Deprecate <code>bios_attribute_name</code> and <code>bios_attribute_value</code> in favor of new <code>bios_attributes`</code> option.</li> <li>redfish_config - the <code>bios_attribute_name</code> and <code>bios_attribute_value</code> options will be removed. To maintain the existing behavior use the <code>bios_attributes</code> option instead.</li> <li>redfish_config and redfish_command - the behavior to select the first System, Manager, or Chassis resource to modify when multiple are present will be removed. Use the new <code>resource_id</code> option to specify target resource to modify.</li> <li>redfish_config, redfish_command - Behavior to modify the first System, Manager, or Chassis resource when multiple are present is deprecated. Use the new <code>resource_id</code> option to specify target resource to modify.</li> <li>xbps - the <code>force</code> option never had any effect. It is now deprecated, and will be removed in 3.0.0 (<a class="reference external" href="https://github.com/ansible-collections/community.general/pull/568">https://github.com/ansible-collections/community.general/pull/568</a>).</li> </ul> </section> <section id="id61"> <h4>community.vmware</h4> <ul class="simple"> <li>The vmware_dns_config module has been deprecated and will be removed in a later release; use vmware_host_dns instead.</li> <li>vca - vca_fw, vca_nat, vca_app are deprecated since these modules rely on deprecated part of Pyvcloud library.</li> <li>vmware_dns_config - Deprecate in favor of new module vmware_host_dns.</li> <li>vmware_guest - deprecate specifying CDROM configuration as a dict, instead use a list.</li> <li>vmware_tag_info - in a later release, the module will not return <code>tag_facts</code> since it does not return multiple tags with the same name and different category id. To maintain the existing behavior use <code>tag_info</code> which is a list of tag metadata.</li> </ul> </section> <section id="id62"> <h4>community.zabbix</h4> <ul class="simple"> <li>zabbix_proxy (module) - deprecates <code>interface</code> sub-options <code>type</code> and <code>main</code> when proxy type is set to passive through <code>status=passive</code>. Make sure these suboptions are removed from your playbook as they were never supported by Zabbix in the first place.</li> </ul> </section> <section id="id63"> <h4>f5networks.f5_modules</h4> <ul class="simple"> <li>Deprecated bigip_appsvcs_extension module</li> <li>Deprecated bigip_device_facts module name</li> <li>Deprecated bigiq_device_facts module name</li> </ul> </section> </section> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2024 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/porting_guides/porting_guide_2.10.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/porting_guides/porting_guide_2.10.html</a>
  </p>
</div>
