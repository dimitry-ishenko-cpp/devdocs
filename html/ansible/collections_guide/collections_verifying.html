<section id="verifying-collections"> <h1 id="collections-verifying">Verifying collections</h1> <section id="verifying-collections-with-ansible-galaxy"> <h2>Verifying collections with <code>ansible-galaxy</code>
</h2> <p>Once installed, you can verify that the content of the installed collection matches the content of the collection on the server. This feature expects that the collection is installed in one of the configured collection paths and that the collection exists on one of the configured galaxy servers.</p> <pre data-language="bash">ansible-galaxy collection verify my_namespace.my_collection
</pre> <p>The output of the <code>ansible-galaxy collection verify</code> command is quiet if it is successful. If a collection has been modified, the altered files are listed under the collection name.</p> <pre data-language="bash">ansible-galaxy collection verify my_namespace.my_collection
Collection my_namespace.my_collection contains modified content in the following files:
my_namespace.my_collection
    plugins/inventory/my_inventory.py
    plugins/modules/my_module.py
</pre> <p>You can use the <code>-vvv</code> flag to display additional information, such as the version and path of the installed collection, the URL of the remote collection used for validation, and successful verification output.</p> <pre data-language="bash">ansible-galaxy collection verify my_namespace.my_collection -vvv
...
Verifying 'my_namespace.my_collection:1.0.0'.
Installed collection found at '/path/to/ansible_collections/my_namespace/my_collection/'
Remote collection found at 'https://galaxy.ansible.com/download/my_namespace-my_collection-1.0.0.tar.gz'
Successfully verified that checksums for 'my_namespace.my_collection:1.0.0' match the remote collection
</pre> <p>If you have a pre-release or non-latest version of a collection installed you should include the specific version to verify. If the version is omitted, the installed collection is verified against the latest version available on the server.</p> <pre data-language="bash">ansible-galaxy collection verify my_namespace.my_collection:1.0.0
</pre> <p>In addition to the <code>namespace.collection_name:version</code> format, you can provide the collections to verify in a <code>requirements.yml</code> file. Dependencies listed in <code>requirements.yml</code> are not included in the <code>verify</code> process and should be verified separately.</p> <pre data-language="bash">ansible-galaxy collection verify -r requirements.yml
</pre> <p>Verifying against <code>tar.gz</code> files is not supported. If your <code>requirements.yml</code> contains paths to tar files or URLs for installation, you can use the <code>--ignore-errors</code> flag to ensure that all collections using the <code>namespace.name</code> format in the file are processed.</p> </section> <section id="verifying-signed-collections"> <h2 id="verify-signed-collections">Verifying signed collections</h2> <p>If a collection has been signed by a <a class="reference internal" href="https://docs.ansible.com/ansible/latest/reference_appendices/glossary.html#term-Distribution-server"><span class="xref std std-term">distribution server</span></a>, the server will provide ASCII armored, detached signatures to verify the authenticity of the MANIFEST.json before using it to verify the collection’s contents. This option is not available on all distribution servers. See <a class="reference internal" href="https://docs.ansible.com/ansible/latest/dev_guide/developing_collections_distributing.html#distributing-collections"><span class="std std-ref">Distributing collections</span></a> for a table listing the servers that support collection signing. See <a class="reference internal" href="collections_installing.html#installing-signed-collections"><span class="std std-ref">Installing collections with signature verification</span></a> for how to verify a signed collection when you install it.</p> <p>To verify a signed installed collection:</p> <pre data-language="bash">ansible-galaxy collection verify my_namespace.my_collection  --keyring ~/.ansible/pubring.kbx
</pre> <p>Use the <code>--signature</code> option to verify collection name(s) provided on the CLI with an additional signature. This option can be used multiple times to provide multiple signatures.</p> <pre data-language="bash">ansible-galaxy collection verify my_namespace.my_collection --signature https://examplehost.com/detached_signature.asc --signature file:///path/to/local/detached_signature.asc --keyring ~/.ansible/pubring.kbx
</pre> <p>Optionally, you can verify a collection signature with a <code>requirements.yml</code> file.</p> <pre data-language="bash">ansible-galaxy collection verify -r requirements.yml --keyring ~/.ansible/pubring.kbx
</pre> <p>When a collection is installed from a distribution server, the signatures provided by the server to verify the collection’s authenticity are saved alongside the installed collections. This data is used to verify the internal consistency of the collection without querying the distribution server again when the <code>--offline</code> option is provided.</p> <pre data-language="bash">ansible-galaxy collection verify my_namespace.my_collection --offline --keyring ~/.ansible/pubring.kbx
</pre> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2024 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/collections_guide/collections_verifying.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/collections_guide/collections_verifying.html</a>
  </p>
</div>
