<section id="working-with-network-connection-options"> <h1 id="network-connection-options">Working with network connection options</h1> <p>Network modules can support multiple connection protocols, such as <code>ansible.netcommon.network_cli</code>, <code>ansible.netcommon.netconf</code>, and <code>ansible.netcommon.httpapi</code>. These connections include some common options you can set to control how the connection to your network device behaves.</p> <p>Common options are:</p> <ul class="simple"> <li>
<code>become</code> and <code>become_method</code> as described in <a class="reference internal" href="network_differences.html#privilege-escalation"><span class="std std-ref">Privilege Escalation: enable mode, become, and authorize</span></a>.</li> <li>
<code>network_os</code> - set to match your network platform you are communicating with. See the <a class="reference internal" href="../user_guide/platform_index.html#platform-options"><span class="std std-ref">platform-specific</span></a> pages.</li> <li>
<code>remote_user</code> as described in <a class="reference internal" href="../../inventory_guide/connection_details.html#connection-set-user"><span class="std std-ref">Setting a remote user</span></a>.</li> <li>Timeout options - <code>persistent_command_timeout</code>, <code>persistent_connect_timeout</code>, and <code>timeout</code>.</li> </ul> <section id="setting-timeout-options"> <h2 id="timeout-options">Setting timeout options</h2> <p>When communicating with a remote device, you have control over how long Ansible maintains the connection to that device, as well as how long Ansible waits for a command to complete on that device. Each of these options can be set as variables in your playbook files, environment variables, or settings in your <a class="reference internal" href="../../reference_appendices/config.html#ansible-configuration-settings"><span class="std std-ref">ansible.cfg file</span></a>.</p> <p>For example, the three options for controlling the connection timeout are as follows.</p> <p>Using vars (per task):</p> <pre data-language="yaml">- name: save running-config
  cisco.ios.ios_command:
    commands: copy running-config startup-config
  vars:
    ansible_command_timeout: 30
</pre> <p>Using the environment variable:</p> <pre data-language="bash">$export ANSIBLE_PERSISTENT_COMMAND_TIMEOUT=30
</pre> <p>Using the global configuration (in <code>ansible.cfg</code>)</p> <pre data-language="ini">[persistent_connection]
command_timeout = 30
</pre> <p>See <a class="reference internal" href="../../playbook_guide/playbooks_variables.html#ansible-variable-precedence"><span class="std std-ref">Variable precedence: Where should I put a variable?</span></a> for details on the relative precedence of each of these variables. See the individual connection type to understand each option.</p> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2012&ndash;2018 Michael DeHaan<br>&copy; 2018&ndash;2024 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/network/getting_started/network_connection_options.html" class="_attribution-link">https://docs.ansible.com/ansible/latest/network/getting_started/network_connection_options.html</a>
  </p>
</div>
