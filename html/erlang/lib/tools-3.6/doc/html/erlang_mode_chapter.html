<div class="innertube"> <h1 id="The Erlang mode for Emacs">3 The Erlang mode for Emacs</h1> <h2 id="purpose" class="title-link"> <div class="title-name">3.1 Purpose</div>  </h2> <p>The purpose of this user guide is to introduce you to the Erlang mode for Emacs and gives some relevant background information of the functions and features. See also <code><a href="erlang.el.html">Erlang mode reference manual</a></code> The purpose of the Erlang mode itself is to facilitate the developing process for the Erlang programmer.</p> <h2 id="pre-requisites" class="title-link"> <div class="title-name">3.2 Pre-requisites</div>  </h2> <p>Basic knowledge of Emacs and Erlang/OTP. </p> <h2 id="elisp" class="title-link"> <div class="title-name">3.3 Elisp</div>  </h2> <p>There are two Elisp modules included in this tool package for Emacs. There is erlang.el that defines the actual erlang mode and there is erlang-start.el that makes some nice initializations.</p> <h2 id="setup-on-unix" class="title-link"> <div class="title-name">3.4 Setup on UNIX</div>  </h2> <p>To set up the Erlang Emacs mode on a UNIX systems, edit/create the file <code>.emacs</code> in the your home directory.</p> <p>Below is a complete example of what should be added to a user's <code>.emacs</code> provided that OTP is installed in the directory <code>/usr/local/otp</code>: </p> <pre data-language="erlang">(setq load-path (cons  "/usr/local/otp/lib/tools-&lt;ToolsVer&gt;/emacs"
load-path))
(setq erlang-root-dir "/usr/local/otp")
(setq exec-path (cons "/usr/local/otp/bin" exec-path))
(require 'erlang-start)</pre> <h2 id="setup-on-windows-" class="title-link"> <div class="title-name">3.5 Setup on Windows </div>  </h2> <p>To set up the Erlang Emacs mode on a Windows systems, edit/create the file <code>.emacs</code>, the location of the file depends on the configuration of the system. If the <strong>HOME</strong> environment variable is set, Emacs will look for the <code>.emacs</code> file in the directory indicated by the <strong>HOME</strong> variable. If <strong>HOME</strong> is not set, Emacs will look for the <code>.emacs</code> file in <code>C:\</code>.</p> <p>Below is a complete example of what should be added to a user's <code>.emacs</code> provided that OTP is installed in the directory <code>C:\Program Files\erl&lt;Ver&gt;</code>: </p> <pre data-language="erlang">(setq load-path (cons  "C:/Program Files/erl&lt;Ver&gt;/lib/tools-&lt;ToolsVer&gt;/emacs"
load-path))
(setq erlang-root-dir "C:/Program Files/erl&lt;Ver&gt;")
(setq exec-path (cons "C:/Program Files/erl&lt;Ver&gt;/bin" exec-path))
(require 'erlang-start)</pre> <div class="note"> <div class="label">Note</div> <div class="content">

<p>In .emacs, the slash character "/" can be used as path separator. But if you decide to use the backslash character "\", please not that you must use double backslashes, since they are treated as escape characters by Emacs.</p> </div> </div> <h2 id="indentation" class="title-link"> <div class="title-name">3.6 Indentation</div>  </h2> <p>The "Oxford Advanced Learners Dictionary of Current English" says the following about the word "indent":</p> <div class="quote">

<p>"start (a line of print or writing) farther from the margin than the others".</p> </div> <p>The Erlang mode does, of course, provide this feature. The layout used is based on the common use of the language.</p> <p>It is strongly recommended to use this feature and avoid to indent lines in a nonstandard way. Some motivations are:</p> <ul> <li>Code using the same layout is easy to read and maintain. </li> <li>Since several features of Erlang mode is based on the standard layout they might not work correctly if a nonstandard layout is used. </li> </ul> <p>The indentation features can be used to reindent large sections of a file. If some lines use nonstandard indentation they will be reindented.</p> <h2 id="editing" class="title-link"> <div class="title-name">3.7 Editing</div>  </h2> <ul> <li> <strong><code>M-x erlang-mode RET</code></strong> - This command activates the Erlang major mode for the current buffer. When this mode is active the mode line contain the word "Erlang".</li> </ul> <p>When the Erlang mode is correctly installed, it is automatically activated when a file ending in <code>.erl</code> or <code>.hrl</code> is opened in Emacs.</p> <p>When a file is saved the name in the <code>-module().</code> line is checked against the file name. Should they mismatch Emacs can change the module specifier so that it matches the file name. By default, the user is asked before the change is performed.</p> <p>An "electric" command is a character that in addition to just inserting the character performs some type of action. For example the ";" character is typed in a situation where is ends a function clause a new function header is generated. The electric commands are as follows: </p> <ul> <li> <strong><code>erlang-electric-comma</code></strong> - Insert a comma character and possibly a new indented line. </li> <li> <strong><code>erlang-electric-semicolon</code></strong> - Insert a semicolon character and possibly a prototype for the next line.</li> <li> <strong><code>erlang-electric-gt</code></strong> - "Insert a '&gt;'-sign and possible a new indented line.</li> </ul> <p>To disable all electric commands set the variable <code>erlang-electric-commands</code> to the empty list. In short, place the following line in your <code>.emacs</code>-file:</p> <pre data-language="erlang">(setq erlang-electric-commands '())</pre> <h2 id="syntax-highlighting" class="title-link"> <div class="title-name">3.8 Syntax highlighting</div>  </h2> <p>It is possible for Emacs to use colors when displaying a buffer. By "syntax highlighting", we mean that syntactic components, for example keywords and function names, will be colored.</p> <p>The basic idea of syntax highlighting is to make the structure of a program clearer. For example, the highlighting will make it easier to spot simple bugs. Have not you ever written a variable in lower-case only? With syntax highlighting a variable will colored while atoms will be shown with the normal text color.</p> <h2 id="tags" class="title-link"> <div class="title-name">3.9 Tags</div>  </h2> <p>Tags is a standard Emacs package used to record information about source files in large development projects. In addition to listing the files of a project, a tags file normally contains information about all functions and variables that are defined. By far, the most useful command of the tags system is its ability to find the definition of functions in any file in the project. However the Tags system is not limited to this feature, for example, it is possible to do a text search in all files in a project, or to perform a project-wide search and replace.</p> <p>In order to use the Tags system a file named <code>TAGS</code> must be created. The file can be seen as a database over all functions, records, and macros in all files in the project. The <code>TAGS</code> file can be created using two different methods for Erlang. The first is the standard Emacs utility "etags", the second is by using the Erlang module <code>tags</code>.</p> <h2 id="etags" class="title-link"> <div class="title-name">3.10 Etags</div>  </h2> <p><code>etags</code> is a program that is part of the Emacs distribution. It is normally executed from a command line, like a unix shell or a DOS box.</p> <p>The <code>etags</code> program of fairly modern versions of Emacs and XEmacs has native support for Erlang. To check if your version does include this support, issue the command <code>etags --help</code> at a the command line prompt. At the end of the help text there is a list of supported languages. Unless Erlang is a member of this list I suggest that you should upgrade to a newer version of Emacs.</p> <p>As seen in the help text -- unless you have not upgraded your Emacs yet (well, what are you waiting around here for? Off you go and upgrade!) -- <code>etags</code> associate the file extensions <code>.erl</code> and <code>.hrl</code> with Erlang.</p> <p>Basically, the <code>etags</code> utility is ran using the following form:</p> <pre data-language="erlang">etags file1.erl file2.erl</pre> <p>This will create a file named <code>TAGS</code> in the current directory.</p> <p>The <code>etags</code> utility can also read a list of files from its standard input by supplying a single dash in place of the file names. This feature is useful when a project consists of a large number of files. The standard UNIX command <code>find</code> can be used to generate the list of files, e.g:</p> <pre data-language="erlang">find . -name "*.[he]rl" -print | etags -</pre> <p>The above line will create a <code>TAGS</code> file covering all the Erlang source files in the current directory, and in the subdirectories below.</p> <p>Please see the GNU Emacs Manual and the etags man page for more info.</p> <h2 id="shell" class="title-link"> <div class="title-name">3.11 Shell</div>  </h2> <p>The look and feel on an Erlang shell inside Emacs should be the same as in a normal Erlang shell. There is just one major difference, the cursor keys will actually move the cursor around just like in any normal Emacs buffer. The command line history can be accessed by the following commands: </p> <ul> <li> <strong><code>C-up</code></strong> or <strong><code>M-p</code></strong> (<code>comint-previous-input</code>) - Move to the previous line in the input history.</li> <li> <strong><code>C-down</code></strong> or <strong><code>M-n</code></strong> (<code>comint-next-input</code>) - Move to the next line in the input history.</li> </ul> <p>If the Erlang shell buffer would be killed the command line history is saved to a file. The command line history is automatically retrieved when a new Erlang shell is started.</p> <h2 id="compilation" class="title-link"> <div class="title-name">3.12 Compilation</div>  </h2> <p>The classic edit-compile-bugfix cycle for Erlang is to edit the source file in an editor, save it to a file and switch to an Erlang shell. In the shell the compilation command is given. Should the compilation fail you have to bring out the editor and locate the correct line.</p> <p>With the Erlang editing mode the entire edit-compile-bugfix cycle can be performed without leaving Emacs. Emacs can order Erlang to compile a file and it can parse the error messages to automatically place the point on the erroneous lines.</p> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010&ndash;2023 Ericsson AB<br>Licensed under the Apache License, Version 2.0.<br>
    
  </p>
</div>
