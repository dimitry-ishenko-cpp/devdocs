<div class="innertube"> <h1 id="Definition of Instrumentation Functions">11 Definition of Instrumentation Functions</h1> <p>The section <strong>Definition of Instrumentation Functions</strong> describes the user defined functions, which the agent calls at different times. </p> <h2 id="variable-instrumentation" class="title-link"> <div class="title-name">11.1 Variable Instrumentation</div>  </h2> <p>For scalar variables, a function <code>f(Operation, ...)</code> must be defined. </p> <p>The <code>Operation</code> can be <code>new</code>, <code>delete</code>, <code>get</code>, <code>is_set_ok</code>, <code>set</code>, or <code>undo</code>. </p> <p>In case of an error, all instrumentation functions may return either an SNMPv1 or an SNMPv2 error code. If it returns an SNMPv2 code, it is converted into an SNMPv1 code before it is sent to a SNMPv1 manager. It is recommended to use the SNMPv2 error codes for all instrumentation functions, as these provide more details. See <code><a href="snmp_app_a.html">Appendix A</a></code> for a description of error code conversions. </p> <h3 id="f-new-[,-extraargs]-" class="title-link"> <div class="title-name">f(new [, ExtraArgs])</div>  </h3> <p>The function <code>f(new [, ExtraArgs])</code> is called for each variable in the MIB when the MIB is loaded into the agent. This makes it possible to perform necessary initialization. </p> <p>This function is optional. The return value is discarded.</p> <h3 id="f-delete-[,-extraargs]-" class="title-link"> <div class="title-name">f(delete [, ExtraArgs])</div>  </h3> <p>The function <code>f(delete [, ExtraArgs])</code> is called for each object in an MIB when the MIB is unloaded from the agent. This makes it possible to perform necessary clean-up. </p> <p>This function is optional. The return value is discarded.</p> <h3 id="f-get-[,-extraargs]-" class="title-link"> <div class="title-name">f(get [, ExtraArgs])</div>  </h3> <p>The function <code>f(get [, ExtraArgs])</code> is called when a get-request or a get-next request refers to the variable. </p> <p>This function is mandatory. </p> <h4>Valid Return Values</h4> <ul> <li> <code>{value, Value}</code>. The <code>Value</code> must be of correct type, length and within ranges, otherwise <code>genErr</code> is returned in the response PDU. If the object is an enumerated integer, the symbolic enum value may be used as an atom. If the object is of type BITS, the return value shall be an integer or a list of bits that are set. </li> <li> <code>{noValue, noSuchName}</code>(SNMPv1) </li> <li> <code>{noValue, noSuchObject | noSuchInstance}</code>(SNMPv2) </li> <li> <code>genErr</code>. Used if an error occurred. Note, this should be an internal processing error, e.g. a caused by a programming fault somewhere. If the variable does not exist, use <code>{noValue, noSuchName}</code> or <code>{noValue, noSuchInstance}</code>. </li> </ul> <h3 id="f-is_set_ok,-newvalue-[,-extraargs]-" class="title-link"> <div class="title-name">f(is_set_ok, NewValue [, ExtraArgs])</div>  </h3> <p>The function <code>f(is_set_ok, NewValue [, ExtraArgs])</code> is called in phase one of the set-request processing so that the new value can be checked for inconsistencies. </p> <p><code>NewValue</code> is guaranteed to be of the correct type, length and within ranges, as specified in the MIB. If the object is an enumerated integer or of type BITS, the integer value is used. </p> <p>This function is optional. </p> <p>If this function is called, it will be called again, either with <code>undo</code> or with <code>set</code> as first argument. </p> <h4>Valid return values</h4> <ul> <li><code>noError</code></li> <li> <code>badValue | noSuchName | genErr</code>(SNMPv1) </li> <li> <code>noAccess | noCreation | inconsistentValue | resourceUnavailable | inconsistentName | genErr</code>(SNMPv2)</li> </ul> <h3 id="f-undo,-newvalue-[,-extraargs]-" class="title-link"> <div class="title-name">f(undo, NewValue [, ExtraArgs])</div>  </h3> <p>If an error occurred, this function is called after the <code>is_set_ok</code> function is called. If <code>set</code> is called for this object, <code>undo</code> is not called. </p> <p><code>NewValue</code> is guaranteed to be of the correct type, length and within ranges, as specified in the MIB. If the object is an enumerated integer or of type BITS, the integer value is used. </p> <p>This function is optional. </p> <h4>Valid return values</h4> <ul> <li><code>noError</code></li> <li> <code>genErr</code>(SNMPv1) </li> <li> <code>undoFailed | genErr</code>(SNMPv2)</li> </ul> <h3 id="f-set,-newvalue-[,-extraargs]-" class="title-link"> <div class="title-name">f(set, NewValue [, ExtraArgs])</div>  </h3> <p>This function is called to perform the set in phase two of the set-request processing. It is only called if the corresponding <code>is_set_ok</code> function is present and returns <code>noError</code>. </p> <p><code>NewValue</code> is guaranteed to be of the correct type, length and within ranges, as specified in the MIB. If the object is an enumerated integer or of type BITS, the integer value is used. </p> <p>This function is mandatory. </p> <h4>Valid return values</h4> <ul> <li><code>noError</code></li> <li> <code>genErr</code>(SNMPv1) </li> <li> <code>commitFailed | undoFailed | genErr</code>(SNMPv2)</li> </ul> <h2 id="table-instrumentation" class="title-link"> <div class="title-name">11.2 Table Instrumentation</div>  </h2> <p>For tables, a <code>f(Operation, ...)</code> function should be defined (the function shown is exemplified with <code>f</code>). </p> <p>The <code>Operation</code> can be <code>new</code>, <code>delete</code>, <code>get</code>, <code>next</code>, <code>is_set_ok</code>, <code>undo</code> or <code>set</code>. </p> <p>In case of an error, all instrumentation functions may return either an SNMPv1 or an SNMPv2 error code. If it returns an SNMPv2 code, it is converted into an SNMPv1 code before it is sent to a SNMPv1 manager. It is recommended to use the SNMPv2 error codes for all instrumentation functions, as these provide more details. See <code><a href="snmp_app_a.html">Appendix A</a></code> for a description of error code conversions.</p> <h3 id="f-new-[,-extraargs]-" class="title-link"> <div class="title-name">f(new [, ExtraArgs])</div>  </h3> <p>The function <code>f(new [, ExtraArgs])</code> is called for each object in an MIB when the MIB is loaded into the agent. This makes it possible to perform the necessary initialization. </p> <p>This function is optional. The return value is discarded.</p> <h3 id="f-delete-[,-extraargs]-" class="title-link"> <div class="title-name">f(delete [, ExtraArgs])</div>  </h3> <p>The function <code>f(delete [, ExtraArgs])</code> is called for each object in an MIB when the MIB is unloaded from the agent. This makes it possible to perform any necessary clean-up. </p> <p>This function is optional. The return value is discarded.</p> <h3 id="f-get,-rowindex,-cols-[,-extraargs]-" class="title-link"> <div class="title-name">f(get, RowIndex, Cols [, ExtraArgs])</div>  </h3> <p>The function <code>f(get, RowIndex, Cols [, ExtraArgs])</code> is called when a get-request refers to a table. </p> <p>This function is mandatory. </p> <h4>Arguments</h4> <ul> <li> <code>RowIndex</code> is a list of integers which define the key values for the row. The <code>RowIndex</code> is the list representation (list of integers) which follow the <code>Cols</code> integer in the OBJECT IDENTIFIER. </li> <li> <code>Cols</code> is a list of integers which represent the column numbers. The <code>Cols</code> are sorted by increasing value and are guaranteed to be valid column numbers.</li> </ul> <h4>Valid Return Values</h4> <ul> <li> <p>A list with as many elements as the <code>Cols</code> list, where each element is the value of the corresponding column. Each element can be:</p> <ul> <li> <code>{value, Value}</code>. The <code>Value</code> must be of correct type, length and within ranges, otherwise <code>genErr</code> is returned in the response PDU. If the object is an enumerated integer, the symbolic enum value may be used (as an atom). If the object is of type BITS, the return value shall be an integer or a list of bits that are set. </li> <li> <code>{noValue, noSuchName}</code>(SNMPv1) </li> <li> <code>{noValue, noSuchObject | noSuchInstance}</code>(SNMPv2) </li> </ul> </li> <li> <code>{noValue, Error}</code>. If the row does not exist, because all columns have <code>{noValue, Error}</code>), the single tuple <code>{noValue, Error}</code> can be returned. This is a shorthand for a list with all elements <code>{noValue, Error}</code>. </li> <li> <code>genErr</code>. Used if an error occurred. Note that this should be an internal processing error, e.g. a caused by a programming fault somewhere. If some column does not exist, use <code>{noValue, noSuchName}</code> or <code>{noValue, noSuchInstance}</code>. </li> </ul> <h3 id="f-get_next,-rowindex,-cols-[,-extraargs]-" class="title-link"> <div class="title-name">f(get_next, RowIndex, Cols [, ExtraArgs])</div>  </h3> <p>The function <code>f(get_next, RowIndex, Cols [, ExtraArgs])</code> is called when a get-next- or a get-bulk-request refers to the table. </p> <p>The <code>RowIndex</code> argument may refer to an existing row or a non-existing row, or it may be unspecified. The <code>Cols</code> list may refer to inaccessible columns or non-existing columns. For each column in the <code>Cols</code> list, the corresponding next instance is determined, and the last part of its OBJECT IDENTIFIER and its value is returned. </p> <p>This function is mandatory. </p> <h4>Arguments</h4> <ul> <li> <code>RowIndex</code> is a list of integers (possibly empty) that defines the key values for a row. The <code>RowIndex</code> is the list representation (list of integers), which follow the <code>Cols</code> integer in the OBJECT IDENTIFIER. </li> <li> <code>Cols</code> is a list of integers, greater than or equal to zero, which represents the column numbers.</li> </ul> <h4>Valid Return Values</h4> <ul> <li> <p>A list with as many elements as the <code>Cols</code> list Each element can be:</p> <ul> <li> <code>{NextOid, NextValue}</code>, where <code>NextOid</code> is the lexicographic next OBJECT IDENTIFIER for the corresponding column. This should be specified as the OBJECT IDENTIFIER part following the table entry. This means that the first integer is the column number and the rest is a specification of the keys. <code>NextValue</code> is the value of this element. </li> <li> <code>endOfTable</code> if there are no accessible elements after this one. </li> </ul> </li> <li> <code>{genErr, Column}</code> where <code>Column</code> denotes the column that caused the error. <code>Column</code> must be one of the columns in the <code>Cols</code> list. Note that this should be an internal processing error, e.g. a caused by a programming fault somewhere. If some column does not exist, you must return the next accessible element (or <code>endOfTable</code>). </li> </ul> <h3 id="f-is_set_ok,-rowindex,-cols-[,-extraargs]-" class="title-link"> <div class="title-name">f(is_set_ok, RowIndex, Cols [, ExtraArgs])</div>  </h3> <p>The function <code>f(is_set_ok, RowIndex, Cols [, ExtraArgs])</code> is called in phase one of the set-request processing so that new values can be checked for inconsistencies. </p> <p>If the function is called, it will be called again with <code>undo</code>, or with <code>set</code> as first argument. </p> <p>This function is optional. </p> <h4>Arguments</h4> <ul> <li> <code>RowIndex</code> is a list of integers which define the key values for the row. The <code>RowIndex</code> is the list representation (list of integers) which follow the <code>Cols</code> integer in the OBJECT IDENTIFIER. </li> <li> <code>Cols</code> is a list of <code>{Column, NewValue}</code>, where <code>Column</code> is an integer, and <code>NewValue</code> is guaranteed to be of the correct type, length and within ranges, as specified in the MIB. If the object is an enumerated integer or of type BITS, the integer value is used. The list is sorted by <code>Column</code> (increasing) and each <code>Column</code> is guaranteed to be a valid column number.</li> </ul> <h4>Valid Return Values</h4> <ul> <li><code>{noError, 0}</code></li> <li> <code>{Error, Column}</code>, where <code>Error</code> is the same as for <code>is_set_ok</code> for variables, and <code>Column</code> denotes the faulty column. <code>Column</code> must be one of the columns in the <code>Cols</code> list.</li> </ul> <h3 id="f-undo,-rowindex,-cols-[,-extraargs]-" class="title-link"> <div class="title-name">f(undo, RowIndex, Cols [, ExtraArgs])</div>  </h3> <p>If an error occurs, The function <code>f(undo, RowIndex, Cols [, ExtraArgs])</code> is called after the <code>is_set_ok</code> function. If <code>set</code> is called for this object, <code>undo</code> is not called. </p> <p>This function is optional. </p> <h4>Arguments</h4> <ul> <li> <code>RowIndex</code> is a list of integers which define the key values for the row. The <code>RowIndex</code> is the list representation (list of integers) which follow the <code>Cols</code> integer in the OBJECT IDENTIFIER. </li> <li> <code>Cols</code> is a list of <code>{Column, NewValue}</code>, where <code>Column</code> is an integer, and <code>NewValue</code> is guaranteed to be of the correct type, length and within ranges, as specified in the MIB. If the object is an enumerated integer or of type BITS, the integer value is used. The list is sorted by <code>Column</code> (increasing) and each <code>Column</code> is guaranteed to be a valid column number. </li> </ul> <h4>Valid Return Values</h4> <ul> <li><code>{noError, 0}</code></li> <li> <code>{Error, Column}</code> where <code>Error</code> is the same as for <code>undo</code> for variables, and <code>Column</code> denotes the faulty column. <code>Column</code> must be one of the columns in the <code>Cols</code> list. </li> </ul> <h3 id="f-set,-rowindex,-cols-[,-extraargs]-" class="title-link"> <div class="title-name">f(set, RowIndex, Cols [, ExtraArgs])</div>  </h3> <p>The function <code>f(set, RowIndex, Cols [, ExtraArgs])</code> is called to perform the set in phase two of the set-request processing. It is only called if the corresponding <code>is_set_ok</code> function did not exist, or returned <code>{noError, 0}</code>. </p> <p>This function is mandatory. </p> <h4>Arguments</h4> <ul> <li> <code>RowIndex</code> is a list of integers that define the key values for the row. The <code>RowIndex</code> is the list representation (list of integers) which follow the <code>Cols</code> integer in the OBJECT IDENTIFIER. </li> <li> <code>Cols</code> is a list of <code>{Column, NewValue}</code>, where <code>Column</code> is an integer, and <code>NewValue</code> is guaranteed to be of the correct type, length and within ranges, as specified in the MIB. If the object is an enumerated integer or of type BITS, the integer value is used. The list is sorted by <code>Column</code> (increasing) and each <code>Column</code> is guaranteed to be a valid column number. </li> </ul> <h4>Valid Return Values</h4> <ul> <li><code>{noError, 0}</code></li> <li> <code>{Error, Column}</code> where <code>Error</code> is the same as <code>set</code> for variables, and <code>Column</code> denotes the faulty column. <code>Column</code> must be one of the columns in the <code>Cols</code> list.</li> </ul> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010&ndash;2023 Ericsson AB<br>Licensed under the Apache License, Version 2.0.<br>
    
  </p>
</div>
