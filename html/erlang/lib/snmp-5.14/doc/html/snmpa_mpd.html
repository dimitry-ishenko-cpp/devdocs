  <div class="innertube"> <h2 id="module" class="title-link"> <div class="title-name">Module</div>  </h2> <div class="REFBODY module-body">snmpa_mpd</div> </div> <div class="innertube"> <h2 id="module-summary" class="title-link"> <div class="title-name">Module Summary</div>  </h2> <div class="REFBODY module-summary-body">Message Processing and Dispatch module for the SNMP agent</div> </div> <section class="description"><div class="innertube"> <h2 id="description" class="title-link"> <div class="title-name">Description</div>  </h2> <div class="REFBODY description-body" id="init">

<p>The module <code>snmpa_mpd</code> implements the version independent Message Processing and Dispatch functionality in SNMP for the agent. It is supposed to be used from a Network Interface process (<code><a href="snmp_agent_netif.html">Definition of Agent Net if</a></code>). </p>  </div> </div></section> <section class="innertube"><h2 id="data-types" class="title-link"> data types  </h2> <div class="REFBODY rb-3"> <p>See the <code><a href="snmpa_conf.html#types"> data types in snmpa_conf</a></code>.</p> </div></section> <div class="innertube"><h2 id="export" class="title-link"> <div class="title-name">Exports</div>  </h2></div> <div class="exports-body"> <article class="func"><div class="bold_code func-head"><h3 id="init-1" class="title-link">  <div class="title-name">init(Vsns) -&gt; mpd_state()</div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>Vsns = [Vsn]</code><br> </div> <div class="REFTYPES rt-4"> <code>Vsn = v1 | v2 | v3</code><br> </div> </div> <div class="REFBODY rb-7" id="process_packet"> <p>This function can be called from the net_if process at start-up. The options list defines which versions to use. </p> <p>It also initializes some SNMP counters. </p>  </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="process_packet-5" class="title-link">  <div class="title-name">process_packet(Packet, From, State, NoteStore, Log) -&gt; {ok, Vsn, Pdu, PduMS, ACMData} | {discarded, Reason} | {discovery, DiscoPacket}</div> <div class="title-since"><span class="since">OTP 17.3</span></div> </h3></div> <div class="bold_code func-head"><h3 id="process_packet-6" class="title-link">  <div class="title-name">process_packet(Packet, From, LocalEngineID, State, NoteStore, Log) -&gt; {ok, Vsn, Pdu, PduMS, ACMData} | {discarded, Reason} | {discovery, DiscoPacket}</div> <div class="title-since"><span class="since">OTP R14B</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>Packet = binary()</code><br> </div> <div class="REFTYPES rt-4"> <code>From = {TDomain, TAddr}</code><br> </div> <div class="REFTYPES rt-4"> <code>TDomain = transportDomainUdpIpv4 | transportDomainUdpIpv6</code><br> </div> <div class="REFTYPES rt-4"> <code>TAddr = {IpAddr, IpPort}</code><br> </div> <div class="REFTYPES rt-4"> <code>LocalEngineID = string()</code><br> </div> <div class="REFTYPES rt-4"> <code>IpAddr = inet:ip_address()</code><br> </div> <div class="REFTYPES rt-4"> <code>IpPort = inet:port_number()</code><br> </div> <div class="REFTYPES rt-4"> <code>State = mpd_state()</code><br> </div> <div class="REFTYPES rt-4"> <code>NoteStore = pid()</code><br> </div> <div class="REFTYPES rt-4"> <code>Log = snmp_log()</code><br> </div> <div class="REFTYPES rt-4"> <code>Vsn = 'version-1' | 'version-2' | 'version-3'</code><br> </div> <div class="REFTYPES rt-4"> <code>Pdu = #pdu</code><br> </div> <div class="REFTYPES rt-4"> <code>PduMs = integer()</code><br> </div> <div class="REFTYPES rt-4"> <code>ACMData = acm_data()</code><br> </div> <div class="REFTYPES rt-4"> <code>Reason = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>DiscoPacket = binary()</code><br> </div> </div> <div class="REFBODY rb-7" id="generate_response_msg"> <p>Processes an incoming packet. Performs authentication and decryption as necessary. The return values should be passed to the agent.</p> <div class="note"> <div class="label">Note</div> <div class="content">

<p>Note that the use of the LocalEngineID argument is only intended for special cases, if the agent is to "emulate" multiple EngineIDs! By default, the agent uses the value of <code>SnmpEngineID</code> (see SNMP-FRAMEWORK-MIB). </p> </div> </div>  </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="generate_response_msg-5" class="title-link">  <div class="title-name">generate_response_msg(Vsn, RePdu, Type, ACMData, Log) -&gt; {ok, Packet} | {discarded, Reason}</div> <div class="title-since"><span class="since">OTP R14B</span></div> </h3></div> <div class="bold_code func-head"><h3 id="generate_response_msg-6" class="title-link">  <div class="title-name">generate_response_msg(Vsn, RePdu, Type, ACMData, LocalEngineID, Log) -&gt; {ok, Packet} | {discarded, Reason}</div> <div class="title-since"><span class="since">OTP R14B</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>Vsn = 'version-1' | 'version-2' | 'version-3'</code><br> </div> <div class="REFTYPES rt-4"> <code>RePdu = #pdu</code><br> </div> <div class="REFTYPES rt-4"> <code>Type = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>ACMData = acm_data()</code><br> </div> <div class="REFTYPES rt-4"> <code>LocalEngineID = string()</code><br> </div> <div class="REFTYPES rt-4"> <code>Packet = binary()</code><br> </div> </div> <div class="REFBODY rb-7" id="generate_msg"> <p>Generates a possibly encrypted response packet to be sent to the network. <code>Type</code> is the <code>#pdu.type</code> of the original request.</p> <div class="note"> <div class="label">Note</div> <div class="content">

<p>Note that the use of the LocalEngineID argument is only intended for special cases, if the agent is to "emulate" multiple EngineIDs! By default, the agent uses the value of <code>SnmpEngineID</code> (see SNMP-FRAMEWORK-MIB). </p> </div> </div>  </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="generate_msg-5" class="title-link">  <div class="title-name">generate_msg(Vsn, NoteStore, Pdu, MsgData, To) -&gt; {ok, PacketsAndAddresses} | {discarded, Reason}</div> <div class="title-since"><span class="since">OTP R14B</span></div> </h3></div> <div class="bold_code func-head"><h3 id="generate_msg-6" class="title-link">  <div class="title-name">generate_msg(Vsn, NoteStore, Pdu, MsgData, LocalEngineID, To) -&gt; {ok, PacketsAndAddresses} | {discarded, Reason}</div> <div class="title-since"><span class="since">OTP R14B</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>Vsn = 'version-1' | 'version-2' | 'version-3'</code><br> </div> <div class="REFTYPES rt-4"> <code>NoteStore = pid()</code><br> </div> <div class="REFTYPES rt-4"> <code>Pdu = #pdu</code><br> </div> <div class="REFTYPES rt-4"> <code>MsgData = msg_data()</code><br> </div> <div class="REFTYPES rt-4"> <code>LocalEngineID = string()</code><br> </div> <div class="REFTYPES rt-4"> <code>To = [dest_addrs()]</code><br> </div> <div class="REFTYPES rt-4"> <code>PacketsAndAddresses = [{TDomain, TAddress, Packet}]</code><br> </div> <div class="REFTYPES rt-4"> <code>TDomain = snmpUDPDomain</code><br> </div> <div class="REFTYPES rt-4"> <code>TAddress = {Ip, Udp}</code><br> </div> <div class="REFTYPES rt-4"> <code>Ip = {integer(), integer(), integer(), integer()}</code><br> </div> <div class="REFTYPES rt-4"> <code>Udp = integer()</code><br> </div> <div class="REFTYPES rt-4"> <code>Packet = binary()</code><br> </div> </div> <div class="REFBODY rb-7" id="process_taddrs"> <p>Generates a possibly encrypted request packet to be sent to the network. </p> <p><code>MsgData</code> is the message specific data used in the SNMP message. This value is received in a <code><a href="snmp_agent_netif.html#im_send_pdu">send_pdu</a></code> or <code><a href="snmp_agent_netif.html#im_send_pdu_req"> send_pdu_req</a></code> message from the agent. In SNMPv1 and SNMPv2c, this message data is the community string. In SNMPv3, it is the context information.</p> <p> <code>To</code> is a list of destination addresses and their corresponding security parameters. This value is received in the same message from the agent and then transformed through <code><a href="#process_taddrs">process_taddrs</a></code> before passed to this function.</p> <div class="note"> <div class="label">Note</div> <div class="content">

<p>Note that the use of the LocalEngineID argument is only intended for special cases, if the agent is to "emulate" multiple EngineIDs! By default, the agent uses the value of <code>SnmpEngineID</code> (see SNMP-FRAMEWORK-MIB). </p> </div> </div>  </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="process_taddrs-1" class="title-link">  <div class="title-name">process_taddrs(TDests) -&gt; Dests</div> <div class="title-since"><span class="since">OTP 17.3</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>TDests = [TDest]</code><br> </div> <div class="REFTYPES rt-4"> <code>TDest = {{TDomain, TAddr}, SecData} | {TDomain, TAddr}</code><br> </div> <div class="REFTYPES rt-4"> <code>TDomain = term() % Not at tuple</code><br> </div> <div class="REFTYPES rt-4"> <code>TAddr = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>SecData = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>Dests = [Dest]</code><br> </div> <div class="REFTYPES rt-4"> <code>Dest = {{Domain, Addr}, SecData} | {Domain, Addr}</code><br> </div> <div class="REFTYPES rt-4"> <code>Domain = transportDomain()</code><br> </div> <div class="REFTYPES rt-4"> <code>Addr = transportAddress() % Depends on Domain</code><br> </div> </div> <div class="REFBODY rb-7" id="discarded_pdu"> <p>Transforms addresses from internal MIB format to one more useful to <code><a href="snmp_agent_netif.html">Agent Net if</a></code>. </p> <p>See also <code><a href="#generate_msg">generate_msg.</a></code> </p>  </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="discarded_pdu-1" class="title-link">  <div class="title-name">discarded_pdu(Variable) -&gt; void()</div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>Variable = atom()</code><br> </div> </div> <div class="REFBODY rb-7"> <p>Increments the variable associated with a discarded pdu. This function can be used when the net_if process receives a <code>discarded_pdu</code> message from the agent. </p> </div> </div></article> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010&ndash;2023 Ericsson AB<br>Licensed under the Apache License, Version 2.0.<br>
    
  </p>
</div>
