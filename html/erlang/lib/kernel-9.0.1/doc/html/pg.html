  <div class="innertube"> <h2 id="module" class="title-link"> <div class="title-name">Module</div>  </h2> <div class="REFBODY module-body">pg</div> </div> <div class="innertube"> <h2 id="module-summary" class="title-link"> <div class="title-name">Module Summary</div>  </h2> <div class="REFBODY module-summary-body">Distributed named process groups.</div> <h2 id="since" class="title-link"> <div class="title-name">Since</div>  </h2> <div class="REFBODY module-since"> Module pg was introduced in OTP 23.0. </div> </div> <section class="description"><div class="innertube"> <h2 id="description" class="title-link"> <div class="title-name">Description</div>  </h2> <div class="REFBODY description-body">

<p>This module implements process groups. A message can be sent to one, some, or all group members.</p> <p>Up until OTP 17 there used to exist an experimental <code>pg</code> module in <code>stdlib</code>. This <code>pg</code> module is not the same module as that experimental <code>pg</code> module, and only share the same module name.</p> <p>A group of processes can be accessed by a common name. For example, if there is a group named <code>foobar</code>, there can be a set of processes (which can be located on different nodes) that are all members of the group <code>foobar</code>. There are no special functions for sending a message to the group. Instead, client functions are to be written with the functions <code><a href="#get_members-1">get_members/1</a></code> and <code><a href="#get_local_members-1">get_local_members/1</a></code> to determine which processes are members of the group. Then the message can be sent to one or more group members.</p> <p>If a member terminates, it is automatically removed from the group.</p> <p>A process may join multiple groups. It may join the same group multiple times. It is only allowed to join processes running on local node. </p> <p>Process Groups implement strong eventual consistency. Process Groups membership view may temporarily diverge. For example, when processes on <code>node1</code> and <code>node2</code> join concurrently, <code>node3</code> and <code>node4</code> may receive updates in a different order.</p> <p> Membership view is not transitive. If <code>node1</code> is not directly connected to <code>node2</code>, they will not see each other groups. But if both are connected to <code>node3</code>, <code>node3</code> will have the full view. </p> <p>Groups are automatically created when any process joins, and are removed when all processes leave the group. Non-existing group is considered empty (containing no processes).</p> <p>Process groups can be organised into multiple scopes. Scopes are completely independent of each other. A process may join any number of groups in any number of scopes. Scopes are designed to decouple single mesh into a set of overlay networks, reducing amount of traffic required to propagate group membership information. Default scope <code>pg</code> is started automatically when <code><span>kernel(6)</span></code> is configured to do so. </p> <div class="note"> <div class="label">Note</div> <div class="content">

<p> Scope name is used to register process locally, and to name an ETS table. If there is another process registered under this name, or another ETS table exists, scope fails to start.</p> <p>Local membership is not preserved if scope process exits and restarts.</p> <p>A scope can be kept local-only by using a scope name that is unique cluster-wide, e.g. the node name:</p> <dl>  <dd><code>pg:start_link(node()).</code></dd> </dl> </div> </div> </div> </div></section> <div class="innertube"> <h2 id="data-types" class="title-link"> <div class="title-name">Data Types</div>  </h2> <article class="data-types-body"><h3 id="type-group" class="title-link data-type-name">  <div class="title-name"> <code><a name="type-group">group()</a> = any()</code><br> </div> </h3> <div class="data-type-desc"><div class="REFBODY rb-7"><p>The identifier of a process group.</p></div></div></article> </div> <div class="innertube"><h2 id="export" class="title-link"> <div class="title-name">Exports</div>  </h2></div> <div class="exports-body"> <article class="func"><h3 id="start_link-0" class="bold_code title-link func-head">  <code>start_link() -&gt; {ok, <code>pid()</code>} | {error, <code>any()</code>}</code><div class="title-since"><span class="since">OTP 23.0</span></div> </h3> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Starts the default <code>pg</code> scope within supervision tree. Kernel may be configured to do it automatically, see <code><span>kernel(6)</span></code> configuration manual.</p> </div></div></article><article class="func"><h3 id="start-1" class="bold_code title-link func-head">  <code>start(Scope :: <code>atom()</code>) -&gt; {ok, <code>pid()</code>} | {error, <code>any()</code>}</code><div class="title-since"><span class="since">OTP 23.0</span></div> </h3> <h3 id="start_link-1" class="bold_code title-link func-head">  <code>start_link(Scope :: <code>atom()</code>) -&gt; {ok, <code>pid()</code>} | {error, <code>any()</code>}</code><div class="title-since"><span class="since">OTP 23.0</span></div> </h3> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Starts additional scope.</p> </div></div></article><article class="func"><h3 id="join-2" class="bold_code title-link func-head">  <code>join(Group :: <code><a href="#type-group">group()</a></code>, PidOrPids :: <code>pid()</code> | [<code>pid()</code>]) -&gt; ok</code><div class="title-since"><span class="since">OTP 23.0</span></div> </h3> <h3 id="join-3" class="bold_code title-link func-head">  <pre data-language="erlang"><code>join(Scope :: <code>atom()</code>,
 Group :: <code><a href="#type-group">group()</a></code>,
 PidOrPids :: <code>pid()</code> | [<code>pid()</code>]) -&gt;
 ok</code></pre>
<div class="title-since"><span class="since">OTP 23.0</span></div> </h3> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Joins single process or multiple processes to the group <code>Group</code>. A process can join a group many times and must then leave the group the same number of times.</p> <p><code>PidOrPids</code> may contain the same process multiple times.</p> </div></div></article><article class="func"><h3 id="leave-2" class="bold_code title-link func-head">  <code>leave(Group :: <code><a href="#type-group">group()</a></code>, PidOrPids :: <code>pid()</code> | [<code>pid()</code>]) -&gt; ok</code><div class="title-since"><span class="since">OTP 23.0</span></div> </h3> <h3 id="leave-3" class="bold_code title-link func-head">  <pre data-language="erlang"><code>leave(Scope :: <code>atom()</code>,
 Group :: <code><a href="#type-group">group()</a></code>,
 PidOrPids :: <code>pid()</code> | [<code>pid()</code>]) -&gt;
 ok | not_joined</code></pre>
<div class="title-since"><span class="since">OTP 23.0</span></div> </h3> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Makes the process <code>PidOrPids</code> leave the group <code>Group</code>. If the process is not a member of the group, <code>not_joined</code> is returned.</p> <p>When list of processes is passed as <code>PidOrPids</code>, function returns <code>not_joined</code> only when all processes of the list are not joined.</p> </div></div></article><article class="func"><h3 id="monitor_scope-0" class="bold_code title-link func-head">  <code>monitor_scope() -&gt; {<code>reference()</code>, #{<code><a href="#type-group">group()</a></code> =&gt; [<code>pid()</code>]}}</code><div class="title-since"><span class="since">OTP 25.1</span></div> </h3> <h3 id="monitor_scope-1" class="bold_code title-link func-head">  <pre data-language="erlang"><code>monitor_scope(Scope :: <code>atom()</code>) -&gt;
 {<code>reference()</code>, #{<code><a href="#type-group">group()</a></code> =&gt; [<code>pid()</code>]}}</code></pre>
<div class="title-since"><span class="since">OTP 25.1</span></div> </h3> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Subscribes the caller to updates from the specified scope. Returns content of the entire scope and a reference to match the upcoming notifications.</p> <p>Whenever any group membership changes, an update message is sent to the subscriber:</p> <pre data-language="erlang">{Ref, join, Group, [JoinPid1, JoinPid2]}</pre> <pre data-language="erlang">{Ref, leave, Group, [LeavePid1]}</pre> </div></div></article><article class="func"><h3 id="monitor-1" class="bold_code title-link func-head">  <code>monitor(Group :: <code><a href="#type-group">group()</a></code>) -&gt; {<code>reference()</code>, [<code>pid()</code>]}</code><div class="title-since"><span class="since">OTP 25.1</span></div> </h3> <h3 id="monitor-2" class="bold_code title-link func-head">  <pre data-language="erlang"><code>monitor(Scope :: <code>atom()</code>, Group :: <code><a href="#type-group">group()</a></code>) -&gt;
 {<code>reference()</code>, [<code>pid()</code>]}</code></pre>
<div class="title-since"><span class="since">OTP 25.1</span></div> </h3> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Subscribes the caller to updates for the specified group. Returns list of processes currently in the group, and a reference to match the upcoming notifications.</p> <p>See <code><a href="#monitor_scope-0">monitor_scope/0</a></code> for the update message structure.</p> </div></div></article><article class="func"><h3 id="demonitor-1" class="bold_code title-link func-head">  <code>demonitor(Ref :: <code>reference()</code>) -&gt; ok | false</code><div class="title-since"><span class="since">OTP 25.1</span></div> </h3> <h3 id="demonitor-2" class="bold_code title-link func-head">  <code>demonitor(Scope :: <code>atom()</code>, Ref :: <code>reference()</code>) -&gt; ok | false</code><div class="title-since"><span class="since">OTP 25.1</span></div> </h3> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Unsubscribes the caller from updates (scope or group). Flushes all outstanding updates that were already in the message queue of the calling process.</p> </div></div></article><article class="func"><h3 id="get_local_members-1" class="bold_code title-link func-head">  <code>get_local_members(Group :: <code><a href="#type-group">group()</a></code>) -&gt; [<code>pid()</code>]</code><div class="title-since"><span class="since">OTP 23.0</span></div> </h3> <h3 id="get_local_members-2" class="bold_code title-link func-head">  <code>get_local_members(Scope :: <code>atom()</code>, Group :: <code><a href="#type-group">group()</a></code>) -&gt; [<code>pid()</code>]</code><div class="title-since"><span class="since">OTP 23.0</span></div> </h3> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Returns all processes running on the local node in the group <code>Group</code>. Processes are returned in no specific order. This function is optimised for speed. </p> </div></div></article><article class="func"><h3 id="get_members-1" class="bold_code title-link func-head">  <code>get_members(Group :: <code><a href="#type-group">group()</a></code>) -&gt; [<code>pid()</code>]</code><div class="title-since"><span class="since">OTP 23.0</span></div> </h3> <h3 id="get_members-2" class="bold_code title-link func-head">  <code>get_members(Scope :: <code>atom()</code>, Group :: <code><a href="#type-group">group()</a></code>) -&gt; [<code>pid()</code>]</code><div class="title-since"><span class="since">OTP 23.0</span></div> </h3> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Returns all processes in the group <code>Group</code>. Processes are returned in no specific order. This function is optimised for speed.</p> </div></div></article><article class="func"><h3 id="which_groups-0" class="bold_code title-link func-head">  <code>which_groups() -&gt; [Group :: <code><a href="#type-group">group()</a></code>]</code><div class="title-since"><span class="since">OTP 23.0</span></div> </h3> <h3 id="which_groups-1" class="bold_code title-link func-head">  <code>which_groups(Scope :: <code>atom()</code>) -&gt; [Group :: <code><a href="#type-group">group()</a></code>]</code><div class="title-since"><span class="since">OTP 23.0</span></div> </h3> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Returns a list of all known groups.</p> </div></div></article> </div> <section class="innertube"><h2 id="see-also" class="title-link"> <div class="title-name">See Also</div>  </h2> <div class="REFBODY rb-3"> <p><code><span>kernel(6)</span></code></p> </div></section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010&ndash;2023 Ericsson AB<br>Licensed under the Apache License, Version 2.0.<br>
    
  </p>
</div>
