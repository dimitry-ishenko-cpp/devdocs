  <div class="innertube"> <h2 id="module" class="title-link"> <div class="title-name">Module</div>  </h2> <div class="REFBODY module-body">os</div> </div> <div class="innertube"> <h2 id="module-summary" class="title-link"> <div class="title-name">Module Summary</div>  </h2> <div class="REFBODY module-summary-body">Operating system-specific functions.</div> </div> <section class="description"><div class="innertube"> <h2 id="description" class="title-link"> <div class="title-name">Description</div>  </h2> <div class="REFBODY description-body">

<p>The functions in this module are operating system-specific. Careless use of these functions results in programs that will only run on a specific platform. On the other hand, with careful use, these functions can be of help in enabling a program to run on most platforms.</p> <div class="note"> <div class="label">Note</div> <div class="content">

<p>The functions in this module will raise a <code>badarg</code> exception if their arguments contain invalid characters according to the description in the "Data Types" section.</p> </div> </div> </div> </div></section> <div class="innertube"> <h2 id="data-types" class="title-link"> <div class="title-name">Data Types</div>  </h2> <article class="data-types-body"><h3 id="type-env_var_name" class="title-link data-type-name">  <div class="title-name"> <code><a name="type-env_var_name">env_var_name()</a> = nonempty_string()</code><br> </div> </h3> <div class="data-type-desc"><div class="REFBODY rb-7"> <p>A string containing valid characters on the specific OS for environment variable names using <code><a href="file.html#native_name_encoding-0">file:native_name_encoding()</a></code> encoding. Null characters (integer value zero) are not allowed. On Unix, <code>=</code> characters are not allowed. On Windows, a <code>=</code> character is only allowed as the very first character in the string. </p> </div></div></article> <article class="data-types-body"><h3 id="type-env_var_value" class="title-link data-type-name">  <div class="title-name"> <code><a name="type-env_var_value">env_var_value()</a> = string()</code><br> </div> </h3> <div class="data-type-desc"><div class="REFBODY rb-7"> <p>A string containing valid characters on the specific OS for environment variable values using <code><a href="file.html#native_name_encoding-0">file:native_name_encoding()</a></code> encoding. Null characters (integer value zero) are not allowed. </p> </div></div></article> <article class="data-types-body"><h3 id="type-env_var_name_value" class="title-link data-type-name">  <div class="title-name"> <code><a name="type-env_var_name_value">env_var_name_value()</a> = nonempty_string()</code><br> </div> </h3> <div class="data-type-desc"><div class="REFBODY rb-7"> <p> Assuming that environment variables has been correctly set, a strings containing valid characters on the specific OS for environment variable names and values using <code><a href="file.html#native_name_encoding-0">file:native_name_encoding()</a></code> encoding. The first <code>=</code> characters appearing in the string separates environment variable name (on the left) from environment variable value (on the right). </p> </div></div></article> <article class="data-types-body"><h3 id="type-os_command" class="title-link data-type-name">  <div class="title-name"> <code><a name="type-os_command">os_command()</a> = atom() | io_lib:chars()</code><br> </div> </h3> <div class="data-type-desc"><div class="REFBODY rb-7"> <p>All characters needs to be valid characters on the specific OS using <code><a href="file.html#native_name_encoding-0">file:native_name_encoding()</a></code> encoding. Null characters (integer value zero) are not allowed. </p> </div></div></article> <article class="data-types-body"><h3 id="type-os_command_opts" class="title-link data-type-name">  <div class="title-name"> <code><a name="type-os_command_opts">os_command_opts()</a> = #{max_size =&gt; integer() &gt;= 0 | infinity}</code><br> </div> </h3> <div class="data-type-desc"><div class="REFBODY rb-7"> <p>Options for <code><a href="#cmd-2">os:cmd/2</a></code></p> <dl> <dt class="title-link"><strong><code>max_size</code></strong></dt> <dd> <p>The maximum size of the data returned by the <code>os:cmd/2</code> call. See the <code><a href="#cmd-2">os:cmd/2</a></code> documentation for more details.</p> </dd> </dl> </div></div></article> </div> <div class="innertube"><h2 id="export" class="title-link"> <div class="title-name">Exports</div>  </h2></div> <div class="exports-body"> <article class="func"><h3 id="cmd-1" class="bold_code title-link func-head">  <code>cmd(Command) -&gt; <code>string()</code></code> </h3> <h3 id="cmd-2" class="bold_code title-link func-head">  <code>cmd(Command, Options) -&gt; <code>string()</code></code><div class="title-since"><span class="since">OTP 20.2.3</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Command = <a href="#type-os_command">os_command()</a></code></div> <div class="REFTYPES rt-1"><code>Options = <a href="#type-os_command_opts">os_command_opts()</a></code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Executes <code>Command</code> in a command shell of the target OS, captures the standard output and standard error of the command, and returns this result as a string.</p> <p><strong>Examples:</strong></p> <pre data-language="erlang">LsOut = os:cmd("ls"), % on unix platform
DirOut = os:cmd("dir"), % on Win32 platform</pre> <p>Notice that in some cases, standard output of a command when called from another program (for example, <code>os:cmd/1</code>) can differ, compared with the standard output of the command when called directly from an OS command shell.</p> <p><code>os:cmd/2</code> was added in kernel-5.5 (OTP-20.2.1). It makes it possible to pass an options map as the second argument in order to control the behaviour of <code>os:cmd</code>. The possible options are: </p> <dl> <dt class="title-link"><strong><code>max_size</code></strong></dt> <dd> <p>The maximum size of the data returned by the <code>os:cmd</code> call. This option is a safety feature that should be used when the command executed can return a very large, possibly infinite, result.</p> <pre data-language="erlang">&gt; os:cmd("cat /dev/zero", #{ max_size =&gt; 20 }).
[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]</pre> </dd> </dl> </div></div></article><article class="func"><h3 id="env-0" class="bold_code title-link func-head">  <code>env() -&gt; [{<code><a href="#type-env_var_name">env_var_name()</a></code>, <code><a href="#type-env_var_value">env_var_value()</a></code>}]</code><div class="title-since"><span class="since">OTP 24.0</span></div> </h3> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Returns a list of all environment variables. Each environment variable is expressed as a tuple <code>{VarName,Value}</code>, where <code>VarName</code> is the name of the variable and <code>Value</code> its value.</p> <p>If Unicode filename encoding is in effect (see the <code>erl manual page</code>), the strings can contain characters with codepoints &gt; 255.</p> </div></div></article><article class="func"><h3 id="find_executable-1" class="bold_code title-link func-head">  <code>find_executable(Name) -&gt; Filename | false</code> </h3> <h3 id="find_executable-2" class="bold_code title-link func-head">  <code>find_executable(Name, Path) -&gt; Filename | false</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Name = Path = Filename = string()</code></div>   </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>These two functions look up an executable program, with the specified name and a search path, in the same way as the underlying OS. <code>find_executable/1</code> uses the current execution path (that is, the environment variable <code>PATH</code> on Unix and Windows).</p> <p><code>Path</code>, if specified, is to conform to the syntax of execution paths on the OS. Returns the absolute filename of the executable program <code>Name</code>, or <code>false</code> if the program is not found.</p> </div></div></article><article class="func"><h3 id="getenv-0" class="bold_code title-link func-head">  <code>getenv() -&gt; [<code><a href="#type-env_var_name_value">env_var_name_value()</a></code>]</code> </h3> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Returns a list of all environment variables. Each environment variable is expressed as a single string on the format <code>"VarName=Value"</code>, where <code>VarName</code> is the name of the variable and <code>Value</code> its value.</p> <p>If Unicode filename encoding is in effect (see the <code>erl manual page</code>), the strings can contain characters with codepoints &gt; 255.</p> <p>Consider using <code><a href="#env-0">env/0</a></code> for a nicer 2-tuple format.</p> </div></div></article><article class="func"><h3 id="getenv-1" class="bold_code title-link func-head">  <code>getenv(VarName) -&gt; Value | false</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>VarName = <a href="#type-env_var_name">env_var_name()</a></code></div> <div class="REFTYPES rt-1"><code>Value = <a href="#type-env_var_value">env_var_value()</a></code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Returns the <code>Value</code> of the environment variable <code>VarName</code>, or <code>false</code> if the environment variable is undefined.</p> <p>If Unicode filename encoding is in effect (see the <code>erl manual page</code>), the strings <code>VarName</code> and <code>Value</code> can contain characters with codepoints &gt; 255.</p> </div></div></article><article class="func"><h3 id="getenv-2" class="bold_code title-link func-head">  <code>getenv(VarName, DefaultValue) -&gt; Value</code><div class="title-since"><span class="since">OTP 18.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>VarName = <a href="#type-env_var_name">env_var_name()</a></code></div> <div class="REFTYPES rt-1"><code>DefaultValue = Value = <a href="#type-env_var_value">env_var_value()</a></code></div>  </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Returns the <code>Value</code> of the environment variable <code>VarName</code>, or <code>DefaultValue</code> if the environment variable is undefined.</p> <p>If Unicode filename encoding is in effect (see the <code>erl manual page</code>), the strings <code>VarName</code> and <code>Value</code> can contain characters with codepoints &gt; 255.</p> </div></div></article><article class="func"><h3 id="getpid-0" class="bold_code title-link func-head">  <code>getpid() -&gt; Value</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Value = string()</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Returns the process identifier of the current Erlang emulator in the format most commonly used by the OS environment. Returns <code>Value</code> as a string containing the (usually) numerical identifier for a process. On Unix, this is typically the return value of the <code>getpid()</code> system call. On Windows, the process id as returned by the <code>GetCurrentProcessId()</code> system call is used.</p> </div></div></article><article class="func"><h3 id="putenv-2" class="bold_code title-link func-head">  <code>putenv(VarName, Value) -&gt; true</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>VarName = <a href="#type-env_var_name">env_var_name()</a></code></div> <div class="REFTYPES rt-1"><code>Value = <a href="#type-env_var_value">env_var_value()</a></code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Sets a new <code>Value</code> for environment variable <code>VarName</code>.</p> <p>If Unicode filename encoding is in effect (see the <code>erl manual page</code>), the strings <code>VarName</code> and <code>Value</code> can contain characters with codepoints &gt; 255.</p> <p>On Unix platforms, the environment is set using UTF-8 encoding if Unicode filename translation is in effect. On Windows, the environment is set using wide character interfaces.</p> </div></div></article><article class="func"><h3 id="set_signal-2" class="bold_code title-link func-head">  <code>set_signal(Signal, Option) -&gt; ok</code><div class="title-since"><span class="since">OTP 20.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><pre><code>Signal = 
 sighup | sigquit | sigabrt | sigalrm | sigterm | sigusr1 |
 sigusr2 | sigchld | sigstop | sigtstp</code></pre></div> <div class="REFTYPES rt-1"><code>Option = default | handle | ignore</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Enables or disables OS signals.</p> <p>Each signal my be set to one of the following options:</p> <dl> <dt class="title-link"><strong><code>ignore</code></strong></dt> <dd> This signal will be ignored. </dd> <dt class="title-link"><strong><code>default</code></strong></dt> <dd> This signal will use the default signal handler for the operating system. </dd> <dt class="title-link"><strong><code>handle</code></strong></dt> <dd> This signal will notify <code><span>erl_signal_server</span></code> when it is received by the Erlang runtime system. </dd> </dl> </div></div></article><article class="func"><h3 id="system_time-0" class="bold_code title-link func-head">  <code>system_time() -&gt; <code>integer()</code></code><div class="title-since"><span class="since">OTP 18.0</span></div> </h3> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Returns the current <code>OS system time</code> in <code>native</code> <code>time unit</code>.</p> <div class="note"> <div class="label">Note</div> <div class="content">

<p>This time is <strong>not</strong> a monotonically increasing time.</p> </div> </div> </div></div></article><article class="func"><h3 id="system_time-1" class="bold_code title-link func-head">  <code>system_time(Unit) -&gt; <code>integer()</code></code><div class="title-since"><span class="since">OTP 18.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Unit = erlang:time_unit()</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Returns the current <code>OS system time</code> converted into the <code>Unit</code> passed as argument.</p> <p>Calling <code>os:system_time(Unit)</code> is equivalent to <code>erlang:convert_time_unit</code>(<code><a href="#system_time-0">os:system_time()</a></code><code>, native, Unit)</code>.</p> <div class="note"> <div class="label">Note</div> <div class="content">

<p>This time is <strong>not</strong> a monotonically increasing time.</p> </div> </div> </div></div></article><article class="func"><h3 id="timestamp-0" class="bold_code title-link func-head">  <code>timestamp() -&gt; Timestamp</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Timestamp = erlang:timestamp()</code></div> <div class="REFBODY rb-1">Timestamp = {MegaSecs, Secs, MicroSecs}</div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Returns the current <code>OS system time</code> in the same format as <code>erlang:timestamp/0</code>. The tuple can be used together with function <code>calendar:now_to_universal_time/1</code> or <code>calendar:now_to_local_time/1</code> to get calendar time. Using the calendar time, together with the <code>MicroSecs</code> part of the return tuple from this function, allows you to log time stamps in high resolution and consistent with the time in the rest of the OS.</p> <p>Example of code formatting a string in format "DD Mon YYYY HH:MM:SS.mmmmmm", where DD is the day of month, Mon is the textual month name, YYYY is the year, HH:MM:SS is the time, and mmmmmm is the microseconds in six positions:</p> <pre data-language="erlang">-module(print_time).
-export([format_utc_timestamp/0]).
format_utc_timestamp() -&gt;
    TS = {_,_,Micro} = os:timestamp(),
    {{Year,Month,Day},{Hour,Minute,Second}} =
calendar:now_to_universal_time(TS),
    Mstr = element(Month,{"Jan","Feb","Mar","Apr","May","Jun","Jul",
    "Aug","Sep","Oct","Nov","Dec"}),
    io_lib:format("~2w ~s ~4w ~2w:~2..0w:~2..0w.~6..0w",
    [Day,Mstr,Year,Hour,Minute,Second,Micro]).</pre> <p>This module can be used as follows:</p> <pre data-language="erlang">
1&gt; <code>io:format("~s~n",[print_time:format_utc_timestamp()]).</code>
29 Apr 2009  9:55:30.051711</pre> <p>OS system time can also be retrieved by <code><a href="#system_time-0">system_time/0</a></code> and <code><a href="#system_time-1">system_time/1</a></code>.</p> </div></div></article><article class="func"><h3 id="perf_counter-0" class="bold_code title-link func-head">  <code>perf_counter() -&gt; Counter</code><div class="title-since"><span class="since">OTP 19.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Counter = integer()</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Returns the current performance counter value in <code>perf_counter</code> <code>time unit</code>. This is a highly optimized call that might not be traceable. </p> </div></div></article><article class="func"><h3 id="perf_counter-1" class="bold_code title-link func-head">  <code>perf_counter(Unit) -&gt; <code>integer()</code></code><div class="title-since"><span class="since">OTP 19.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Unit = erlang:time_unit()</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Returns a performance counter that can be used as a very fast and high resolution timestamp. This counter is read directly from the hardware or operating system with the same guarantees. This means that two consecutive calls to the function are not guaranteed to be monotonic, though it most likely will be. The performance counter will be converted to the resolution passed as an argument.</p> <pre data-language="erlang">1&gt; <code>T1 = os:perf_counter(1000),receive after 10000 -&gt; ok end,T2 = os:perf_counter(1000).</code>
176525861
2&gt; <code>T2 - T1.</code>
10004</pre> </div></div></article><article class="func"><h3 id="type-0" class="bold_code title-link func-head">  <code>type() -&gt; {Osfamily, Osname}</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Osfamily = unix | win32</code></div> <div class="REFTYPES rt-1"><code>Osname = atom()</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Returns the <code>Osfamily</code> and, in some cases, the <code>Osname</code> of the current OS.</p> <p>On Unix, <code>Osname</code> has the same value as <code>uname -s</code> returns, but in lower case. For example, on Solaris 1 and 2, it is <code>sunos</code>.</p> <p>On Windows, <code>Osname</code> is <code>nt</code>.</p> <div class="note"> <div class="label">Note</div> <div class="content">

<p>Think twice before using this function. Use module <code>filename</code> if you want to inspect or build filenames in a portable way. Avoid matching on atom <code>Osname</code>.</p> </div> </div> </div></div></article><article class="func"><h3 id="unsetenv-1" class="bold_code title-link func-head">  <code>unsetenv(VarName) -&gt; true</code><div class="title-since"><span class="since">OTP R16B03</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>VarName = <a href="#type-env_var_name">env_var_name()</a></code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Deletes the environment variable <code>VarName</code>.</p> <p>If Unicode filename encoding is in effect (see the <code>erl manual page</code>), the string <code>VarName</code> can contain characters with codepoints &gt; 255.</p> </div></div></article><article class="func"><h3 id="version-0" class="bold_code title-link func-head">  <code>version() -&gt; VersionString | {Major, Minor, Release}</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>VersionString = string()</code></div> <div class="REFTYPES rt-1"><code>Major = Minor = Release = integer() &gt;= 0</code></div>   </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Returns the OS version. On most systems, this function returns a tuple, but a string is returned instead if the system has versions that cannot be expressed as three numbers.</p> <div class="note"> <div class="label">Note</div> <div class="content">

<p>Think twice before using this function. If you still need to use it, always <code>call os:type()</code> first.</p> </div> </div> </div></div></article> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010&ndash;2023 Ericsson AB<br>Licensed under the Apache License, Version 2.0.<br>
    
  </p>
</div>
