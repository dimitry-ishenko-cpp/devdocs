  <div class="innertube"> <h2 id="module" class="title-link"> <div class="title-name">Module</div>  </h2> <div class="REFBODY module-body">timer</div> </div> <div class="innertube"> <h2 id="module-summary" class="title-link"> <div class="title-name">Module Summary</div>  </h2> <div class="REFBODY module-summary-body">Timer functions.</div> </div> <section class="description"><div class="innertube"> <h2 id="description" class="title-link"> <div class="title-name">Description</div>  </h2> <div class="REFBODY description-body">

<p>This module provides useful functions related to time. Unless otherwise stated, time is always measured in <strong>milliseconds</strong>. All timer functions return immediately, regardless of work done by another process.</p> <p>Successful evaluations of the timer functions give return values containing a timer reference, denoted <code>TRef</code>. By using <code><a href="#cancel-1">cancel/1</a></code>, the returned reference can be used to cancel any requested action. A <code>TRef</code> is an Erlang term, which contents must not be changed.</p> <p>The time-outs are not exact, but are <strong>at least</strong> as long as requested.</p> <p>Creating timers using <code>erlang:send_after/3</code> and <code>erlang:start_timer/3</code> is more efficient than using the timers provided by this module. However, the timer module has been improved in OTP 25, making it more efficient and less susceptible to being overloaded. See <code>the Timer Module section in the Efficiency Guide</code>.</p> </div> </div></section> <div class="innertube"> <h2 id="data-types" class="title-link"> <div class="title-name">Data Types</div>  </h2> <article class="data-types-body"><h3 id="type-time" class="title-link data-type-name">  <div class="title-name"> <code><a name="type-time">time()</a> = integer() &gt;= 0</code><br> </div> </h3> <div class="data-type-desc"><div class="REFBODY rb-7"><p>Time in milliseconds.</p></div></div></article> <article class="data-types-body"><h3 id="type-tref" class="title-link data-type-name">  <div class="title-name"> <code><a name="type-tref">tref()</a></code><br> </div> </h3> <div class="data-type-desc"><div class="REFBODY rb-7"><p>A timer reference.</p></div></div></article> </div> <div class="innertube"><h2 id="export" class="title-link"> <div class="title-name">Exports</div>  </h2></div> <div class="exports-body"> <article class="func"><h3 id="apply_after-4" class="bold_code title-link func-head">  <pre data-language="erlang"><code>apply_after(Time, Module, Function, Arguments) -&gt;
 {ok, TRef} | {error, Reason}</code></pre> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Time = <a href="#type-time">time()</a></code></div> <div class="REFTYPES rt-1"><code>Module = module()</code></div> <div class="REFTYPES rt-1"><code>Function = atom()</code></div> <div class="REFTYPES rt-1"><code>Arguments = [term()]</code></div> <div class="REFTYPES rt-1"><code>TRef = <a href="#type-tref">tref()</a></code></div> <div class="REFTYPES rt-1"><code>Reason = term()</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Evaluates <code>spawn(Module, Function, Arguments)</code> after <code>Time</code> milliseconds.</p> <p>Returns <code>{ok, TRef}</code> or <code>{error, Reason}</code>.</p> </div></div></article><article class="func"><h3 id="apply_interval-4" class="bold_code title-link func-head">  <pre data-language="erlang"><code>apply_interval(Time, Module, Function, Arguments) -&gt;
 {ok, TRef} | {error, Reason}</code></pre> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Time = <a href="#type-time">time()</a></code></div> <div class="REFTYPES rt-1"><code>Module = module()</code></div> <div class="REFTYPES rt-1"><code>Function = atom()</code></div> <div class="REFTYPES rt-1"><code>Arguments = [term()]</code></div> <div class="REFTYPES rt-1"><code>TRef = <a href="#type-tref">tref()</a></code></div> <div class="REFTYPES rt-1"><code>Reason = term()</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Evaluates <code>spawn(Module, Function, Arguments)</code> repeatedly at intervals of <code>Time</code>, irrespective of whether a previously spawned process has finished or not.</p> <div class="warning"> <div class="label">Warning</div> <div class="content">

<p>If the execution time of the spawned process is, on average, greater than the given <code>Time</code>, multiple such processes will run at the same time. With long execution times, short intervals, and many interval timers running, this may even lead to exceeding the number of allowed processes. As an extreme example, consider <code>[timer:apply_interval(1, timer, sleep, [1000]) || _ &lt;- lists:seq(1, 1000)]</code>, that is, 1,000 interval timers executing a process that takes 1s to complete, started in intervals of 1ms, which would result in 1,000,000 processes running at the same time, far more than a node started with default settings allows (see the <code>System Limits section in the Effiency Guide</code>).</p> </div> </div> <p>Returns <code>{ok, TRef}</code> or <code>{error, Reason}</code>.</p> </div></div></article><article class="func"><h3 id="apply_repeatedly-4" class="bold_code title-link func-head">  <pre data-language="erlang"><code>apply_repeatedly(Time, Module, Function, Arguments) -&gt;
 {ok, TRef} | {error, Reason}</code></pre>
<div class="title-since"><span class="since">OTP 26.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Time = <a href="#type-time">time()</a></code></div> <div class="REFTYPES rt-1"><code>Module = module()</code></div> <div class="REFTYPES rt-1"><code>Function = atom()</code></div> <div class="REFTYPES rt-1"><code>Arguments = [term()]</code></div> <div class="REFTYPES rt-1"><code>TRef = <a href="#type-tref">tref()</a></code></div> <div class="REFTYPES rt-1"><code>Reason = term()</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Evaluates <code>spawn(Module, Function, Arguments)</code> repeatedly at intervals of <code>Time</code>, waiting for the spawned process to finish before starting the next.</p> <p>If the execution time of the spawned process is greater than the given <code>Time</code>, the next process is spawned immediately after the one currently running has finished. Assuming that execution times of the spawned processes performing the applies on average are smaller than <code>Time</code>, the amount of applies made over a large amount of time will be the same even if some individual execution times are larger than <code>Time</code>. The system will try to catch up as soon as possible. For example, if one apply takes <code>2.5*Time</code>, the following two applies will be made immediately one after the other in sequence.</p> <p>Returns <code>{ok, TRef}</code> or <code>{error, Reason}</code>.</p> </div></div></article><article class="func"><h3 id="cancel-1" class="bold_code title-link func-head">  <code>cancel(TRef) -&gt; {ok, cancel} | {error, Reason}</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>TRef = <a href="#type-tref">tref()</a></code></div> <div class="REFTYPES rt-1"><code>Reason = term()</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Cancels a previously requested time-out. <code>TRef</code> is a unique timer reference returned by the related timer function.</p> <p>Returns <code>{ok, cancel}</code>, or <code>{error, Reason}</code> when <code>TRef</code> is not a timer reference.</p> </div></div></article><article class="func"><h3 id="exit_after-2" class="bold_code title-link func-head">  <code>exit_after(Time, Reason1) -&gt; {ok, TRef} | {error, Reason2}</code> </h3> <h3 id="exit_after-3" class="bold_code title-link func-head">  <code>exit_after(Time, Target, Reason1) -&gt; {ok, TRef} | {error, Reason2}</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Time = <a href="#type-time">time()</a></code></div> <div class="REFTYPES rt-1"><code>Target = pid() | (RegName :: atom())</code></div> <div class="REFTYPES rt-1"><code>TRef = <a href="#type-tref">tref()</a></code></div> <div class="REFTYPES rt-1"><code>Reason1 = Reason2 = term()</code></div>  </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p><code>exit_after/2</code> is the same as <code>exit_after(Time, self(), Reason1)</code>.</p> <p><code>exit_after/3</code> sends an exit signal with reason <code>Reason1</code> to <code>Target</code>, which can be a local process identifier or an atom of a registered name. Returns <code>{ok, TRef}</code> or <code>{error, Reason2}</code>.</p> </div></div></article><article class="func"><h3 id="hms-3" class="bold_code title-link func-head">  <code>hms(Hours, Minutes, Seconds) -&gt; MilliSeconds</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Hours = Minutes = Seconds = MilliSeconds = integer() &gt;= 0</code></div>    </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Returns the number of milliseconds in <code>Hours + Minutes + Seconds</code>.</p> </div></div></article><article class="func"><h3 id="hours-1" class="bold_code title-link func-head">  <code>hours(Hours) -&gt; MilliSeconds</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Hours = MilliSeconds = integer() &gt;= 0</code></div>  </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Returns the number of milliseconds in <code>Hours</code>.</p> </div></div></article><article class="func"><h3 id="kill_after-1" class="bold_code title-link func-head">  <code>kill_after(Time) -&gt; {ok, TRef} | {error, Reason2}</code> </h3> <h3 id="kill_after-2" class="bold_code title-link func-head">  <code>kill_after(Time, Target) -&gt; {ok, TRef} | {error, Reason2}</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Time = <a href="#type-time">time()</a></code></div> <div class="REFTYPES rt-1"><code>Target = pid() | (RegName :: atom())</code></div> <div class="REFTYPES rt-1"><code>TRef = <a href="#type-tref">tref()</a></code></div> <div class="REFTYPES rt-1"><code>Reason2 = term()</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p><code>kill_after/1</code> is the same as <code>exit_after(Time, self(), kill)</code>.</p> <p><code>kill_after/2</code> is the same as <code>exit_after(Time, Target, kill)</code>.</p> </div></div></article><article class="func"><h3 id="minutes-1" class="bold_code title-link func-head">  <code>minutes(Minutes) -&gt; MilliSeconds</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Minutes = MilliSeconds = integer() &gt;= 0</code></div>  </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Returns the number of milliseconds in <code>Minutes</code>.</p> </div></div></article><article class="func"><h3 id="now_diff-2" class="bold_code title-link func-head">  <code>now_diff(T2, T1) -&gt; Tdiff</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>T1 = T2 = erlang:timestamp()</code></div>  <div class="REFTYPES rt-1"><code>Tdiff = integer()</code></div> <div class="REFBODY rb-1">In microseconds</div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Calculates the time difference <code>Tdiff = T2 - T1</code> in <strong>microseconds</strong>, where <code>T1</code> and <code>T2</code> are time-stamp tuples on the same format as returned from <code> erlang:timestamp/0</code> or <code> os:timestamp/0</code>.</p> </div></div></article><article class="func"><h3 id="seconds-1" class="bold_code title-link func-head">  <code>seconds(Seconds) -&gt; MilliSeconds</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Seconds = MilliSeconds = integer() &gt;= 0</code></div>  </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Returns the number of milliseconds in <code>Seconds</code>.</p> </div></div></article><article class="func"><h3 id="send_after-2" class="bold_code title-link func-head">  <code>send_after(Time, Message) -&gt; {ok, TRef} | {error, Reason}</code> </h3> <h3 id="send_after-3" class="bold_code title-link func-head">  <pre data-language="erlang"><code>send_after(Time, Destination, Message) -&gt;
 {ok, TRef} | {error, Reason}</code></pre> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Time = <a href="#type-time">time()</a></code></div> <div class="REFTYPES rt-1"><pre><code>Destination = 
 pid() |
 (RegName :: atom()) |
 {RegName :: atom(), Node :: node()}</code></pre></div> <div class="REFTYPES rt-1"><code>Message = term()</code></div> <div class="REFTYPES rt-1"><code>TRef = <a href="#type-tref">tref()</a></code></div> <div class="REFTYPES rt-1"><code>Reason = term()</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <dl> <dt class="title-link"><strong><code>send_after/3</code></strong></dt> <dd> <p>Evaluates <code>Destination ! Message</code> after <code>Time</code> milliseconds. (<code>Destination</code> can be a remote or local process identifier, an atom of a registered name or a tuple <code>{RegName, Node}</code> for a registered name at another node.)</p> <p>Returns <code>{ok, TRef}</code> or <code>{error, Reason}</code>.</p> <p>See also <code> the Timer Module section in the Efficiency Guide</code>.</p> </dd> <dt class="title-link"><strong><code>send_after/2</code></strong></dt> <dd> <p>Same as <code>send_after(Time, self(), Message)</code>.</p> </dd> </dl> </div></div></article><article class="func"><h3 id="send_interval-2" class="bold_code title-link func-head">  <code>send_interval(Time, Message) -&gt; {ok, TRef} | {error, Reason}</code> </h3> <h3 id="send_interval-3" class="bold_code title-link func-head">  <pre data-language="erlang"><code>send_interval(Time, Destination, Message) -&gt;
 {ok, TRef} | {error, Reason}</code></pre> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Time = <a href="#type-time">time()</a></code></div> <div class="REFTYPES rt-1"><pre><code>Destination = 
 pid() |
 (RegName :: atom()) |
 {RegName :: atom(), Node :: node()}</code></pre></div> <div class="REFTYPES rt-1"><code>Message = term()</code></div> <div class="REFTYPES rt-1"><code>TRef = <a href="#type-tref">tref()</a></code></div> <div class="REFTYPES rt-1"><code>Reason = term()</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <dl> <dt class="title-link"><strong><code>send_interval/3</code></strong></dt> <dd> <p>Evaluates <code>Destination ! Message</code> repeatedly after <code>Time</code> milliseconds. (<code>Destination</code> can be a remote or local process identifier, an atom of a registered name or a tuple <code>{RegName, Node}</code> for a registered name at another node.)</p> <p>Returns <code>{ok, TRef}</code> or <code>{error, Reason}</code>.</p> </dd> <dt class="title-link"><strong><code>send_interval/2</code></strong></dt> <dd> <p>Same as <code>send_interval(Time, self(), Message)</code>.</p> </dd> </dl> </div></div></article><article class="func"><h3 id="sleep-1" class="bold_code title-link func-head">  <code>sleep(Time) -&gt; ok</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Time = timeout()</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Suspends the process calling this function for <code>Time</code> milliseconds and then returns <code>ok</code>, or suspends the process forever if <code>Time</code> is the atom <code>infinity</code>. Naturally, this function does <strong>not</strong> return immediately.</p> <div class="note"> <div class="label">Note</div> <div class="content">

<p>Before OTP 25, <code>timer:sleep/1</code> did not accept integer timeout values greater than <code>16#ffffffff</code>, that is, <code>2^32-1</code>. Since OTP 25, arbitrarily high integer values are accepted.</p> </div> </div> </div></div></article><article class="func"><h3 id="start-0" class="bold_code title-link func-head">  <code>start() -&gt; ok</code> </h3> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Starts the timer server. Normally, the server does not need to be started explicitly. It is started dynamically if it is needed. This is useful during development, but in a target system the server is to be started explicitly. Use configuration parameters for <code>Kernel</code> for this.</p> </div></div></article><article class="func"><h3 id="tc-1" class="bold_code title-link func-head">  <code>tc(Fun) -&gt; {Time, Value}</code><div class="title-since"><span class="since">OTP R14B03</span></div> </h3> <h3 id="tc-2" class="bold_code title-link func-head">  <code>tc(Fun, Arguments) -&gt; {Time, Value}</code><div class="title-since"><span class="since">OTP R14B</span></div> </h3> <h3 id="tc-3" class="bold_code title-link func-head">  <code>tc(Module, Function, Arguments) -&gt; {Time, Value}</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Module = module()</code></div> <div class="REFTYPES rt-1"><code>Function = atom()</code></div> <div class="REFTYPES rt-1"><code>Arguments = [term()]</code></div> <div class="REFTYPES rt-1"><code>Time = integer()</code></div> <div class="REFTYPES rt-1"><code>Value = term()</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <dl> <dt class="title-link"><strong><code>tc/3</code></strong></dt> <dd> <p>Calls function <code>timer:tc(Module, Function, Arguments, microsecond)</code>.</p> </dd> <dt class="title-link"><strong><code>tc/2</code></strong></dt> <dd> <p>Calls function <code>timer:tc(Fun, Arguments, microsecond)</code>.</p> </dd> <dt class="title-link"><strong><code>tc/1</code></strong></dt> <dd> <p>Calls function <code>timer:tc(Fun, microsecond)</code>.</p> </dd> </dl> </div></div></article><article class="func"><h3 id="tc-2" class="bold_code title-link func-head">  <code>tc(Fun, TimeUnit) -&gt; {Time, Value}</code><div class="title-since"><span class="since">OTP 26.0</span></div> </h3> <h3 id="tc-3" class="bold_code title-link func-head">  <code>tc(Fun, Arguments, TimeUnit) -&gt; {Time, Value}</code><div class="title-since"><span class="since">OTP 26.0</span></div> </h3> <h3 id="tc-4" class="bold_code title-link func-head">  <code>tc(Module, Function, Arguments, TimeUnit) -&gt; {Time, Value}</code><div class="title-since"><span class="since">OTP 26.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Module = module()</code></div> <div class="REFTYPES rt-1"><code>Function = atom()</code></div> <div class="REFTYPES rt-1"><code>Arguments = [term()]</code></div> <div class="REFTYPES rt-1"><code>TimeUnit = erlang:time_unit()</code></div> <div class="REFTYPES rt-1"><code>Time = integer()</code></div> <div class="REFBODY rb-1">In the specified <code>TimeUnit</code> </div> <div class="REFTYPES rt-1"><code>Value = term()</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <dl> <dt class="title-link"><strong><code>tc/4</code></strong></dt> <dd> <p>Evaluates <code>apply(Module, Function, Arguments)</code> and measures the elapsed real time as reported by <code> erlang:monotonic_time/0</code>.</p> <p>Returns <code>{Time, Value}</code>, where <code>Time</code> is the elapsed real time in the specified <code>TimeUnit</code>, and <code>Value</code> is what is returned from the apply.</p> </dd> <dt class="title-link"><strong><code>tc/3</code></strong></dt> <dd> <p>Evaluates <code>apply(Fun, Arguments)</code>. Otherwise the same as <code>tc/4</code>.</p> </dd> <dt class="title-link"><strong><code>tc/2</code></strong></dt> <dd> <p>Evaluates <code>Fun()</code>. Otherwise the same as <code>tc/3</code>.</p> </dd> </dl> </div></div></article> </div> <section class="innertube"><h2 id="examples" class="title-link"> <div class="title-name">Examples</div>  </h2> <div class="REFBODY rb-3"> <p><strong>Example 1</strong></p> <p>The following example shows how to print "Hello World!" in 5 seconds:</p> <pre data-language="erlang">
1&gt; <code>timer:apply_after(5000, io, format, ["~nHello World!~n", []]).</code>
{ok,TRef}
Hello World!</pre> <p><strong>Example 2</strong></p> <p>The following example shows a process performing a certain action, and if this action is not completed within a certain limit, the process is killed:</p> <pre data-language="erlang">Pid = spawn(mod, fun, [foo, bar]),
%% If pid is not finished in 10 seconds, kill him
{ok, R} = timer:kill_after(timer:seconds(10), Pid),
...
%% We change our mind...
timer:cancel(R),
...</pre> </div></section> <section class="innertube"><h2 id="notes" class="title-link"> <div class="title-name">Notes</div>  </h2> <div class="REFBODY rb-3"> <p>A timer can always be removed by calling <code><a href="#cancel-1">cancel/1</a></code>.</p> <p>An interval timer, that is, a timer created by evaluating any of the functions <code><a href="#apply_interval-4">apply_interval/4</a></code>, <code><a href="#send_interval-3">send_interval/3</a></code>, and <code><a href="#send_interval-2">send_interval/2</a></code> is linked to the process to which the timer performs its task.</p> <p>A one-shot timer, that is, a timer created by evaluating any of the functions <code><a href="#apply_after-4">apply_after/4</a></code>, <code><a href="#send_after-3">send_after/3</a></code>, <code><a href="#send_after-2">send_after/2</a></code>, <code><a href="#exit_after-3">exit_after/3</a></code>, <code><a href="#exit_after-2">exit_after/2</a></code>, <code><a href="#kill_after-2">kill_after/2</a></code>, and <code><a href="#kill_after-1">kill_after/1</a></code> is not linked to any process. Hence, such a timer is removed only when it reaches its time-out, or if it is explicitly removed by a call to <code><a href="#cancel-1">cancel/1</a></code>.</p> </div></section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010&ndash;2023 Ericsson AB<br>Licensed under the Apache License, Version 2.0.<br>
    
  </p>
</div>
