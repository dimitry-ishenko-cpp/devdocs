<div class="innertube"> <h1 id="DTrace and Erlang/OTP">2 DTrace and Erlang/OTP</h1> <h2 id="history" class="title-link"> <div class="title-name">2.1 History</div>  </h2> <p> The first implementation of DTrace probes for the Erlang virtual machine was presented at the <code><a href="http://www.erlang.org/euc/08/">2008 Erlang User Conference</a></code>. That work, based on the Erlang/OTP R12 release, was discontinued due to what appears to be miscommunication with the original developers. </p> <p> Several users have created Erlang port drivers, linked-in drivers, or NIFs that allow Erlang code to try to activate a probe, e.g. <code>foo_module:dtrace_probe("message goes here!")</code>. </p> <h2 id="goals" class="title-link"> <div class="title-name">2.2 Goals</div>  </h2> <ul> <li> Annotate as much of the Erlang VM as is practical. </li> <li> The initial goal is to trace file I/O operations. </li> <li> Support all platforms that implement DTrace: OS X, Solaris, and (I hope) FreeBSD and NetBSD. </li> <li> To the extent that it's practical, support SystemTap on Linux via DTrace provider compatibility. </li> <li> Allow Erlang code to supply annotations. </li> </ul> <h2 id="supported-platforms" class="title-link"> <div class="title-name">2.3 Supported platforms</div>  </h2> <ul> <li> OS X 10.6.x / Snow Leopard, OS X 10.7.x / Lion and probably newer versions. </li> <li> Solaris 10. I have done limited testing on Solaris 11 and OpenIndiana release 151a, and both appear to work. </li> <li> FreeBSD 9.0 and 10.0. </li> <li> Linux via SystemTap compatibility. Please see <code><a href="systemtap.html">$ERL_TOP/HOWTO/SYSTEMTAP.md</a></code> for more details. </li> </ul> <p> Just add the <code>--with-dynamic-trace=dtrace</code> option to your command when you run the <code>configure</code> script. If you are using systemtap, the configure option is <code>--with-dynamic-trace=systemtap</code> </p> <h2 id="status" class="title-link"> <div class="title-name">2.4 Status</div>  </h2> <p> As of R15B01, the dynamic trace code is included in the OTP source distribution, although it's considered experimental. The main development of the dtrace code still happens outside of Ericsson, but there is no need to fetch a patched version of the OTP source to get the basic functionality. </p> <h2 id="dtrace-probe-specifications" class="title-link"> <div class="title-name">2.5 DTrace probe specifications</div>  </h2> <p> Probe specifications can be found in <code>erts/emulator/beam/erlang_dtrace.d</code>, and a few example scripts can be found under <code>lib/runtime_tools/examples/</code>. </p> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010&ndash;2023 Ericsson AB<br>Licensed under the Apache License, Version 2.0.<br>
    
  </p>
</div>
