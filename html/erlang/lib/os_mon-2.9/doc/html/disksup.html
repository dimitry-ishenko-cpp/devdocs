  <div class="innertube"> <h2 id="module" class="title-link"> <div class="title-name">Module</div>  </h2> <div class="REFBODY module-body">disksup</div> </div> <div class="innertube"> <h2 id="module-summary" class="title-link"> <div class="title-name">Module Summary</div>  </h2> <div class="REFBODY module-summary-body">A Disk Supervisor Process</div> </div> <section class="description"><div class="innertube"> <h2 id="description" class="title-link"> <div class="title-name">Description</div>  </h2> <div class="REFBODY description-body">

<p><code>disksup</code> is a process which supervises the available disk space in the system. It is part of the OS_Mon application, see <code><span>os_mon(6)</span></code>. Available for Unix and Windows.</p> <p>Periodically checks the disks. For each disk or partition which uses more than a certain amount of the available space, the alarm <code>{{disk_almost_full, MountedOn}, []}</code> is set.</p> <dl> <dt class="title-link"><strong>On Unix</strong></dt> <dd> <p>All (locally) mounted disks are checked, including the swap disk if it is present.</p> </dd> <dt class="title-link"><strong>On WIN32</strong></dt> <dd> <p>All logical drives of type "FIXED_DISK" are checked.</p> </dd> </dl> <p>Alarms are reported to the SASL alarm handler, see <code>alarm_handler(3)</code>. To set an alarm, <code>alarm_handler:set_alarm(Alarm)</code> is called where <code>Alarm</code> is the alarm specified above.</p> <p>The alarms are cleared automatically when the alarm cause is no longer valid.</p> </div> </div></section> <div class="innertube"> <h2 id="data-types" class="title-link"> <div class="title-name">Data Types</div>  </h2> <article class="data-types-body"><div class="data-type-name"><div class="bold_code bc-8"><h3 id="type-time" class="title-link">  <div class="title-name">time()</div> </h3></div></div> <div class="data-type-desc"><div class="REFBODY rb-7"> <p>Supported units:</p> <dl> <dt class="title-link"><strong><code>integer() &gt;= 1</code></strong></dt> <dd> <p>The time interval in minutes.</p> </dd> <dt class="title-link"><strong><code>{TimeUnit, Time}</code></strong></dt> <dd> <p> The time interval <code>Time</code> in a time unit specified by <code>TimeUnit</code> where <code>TimeUnit</code> is of the type <code>erlang:time_unit()</code> and <code>Time</code> is a positive integer. The time interval needs to be at least one millisecond long. </p> </dd> </dl> </div></div></article> </div> <section class="innertube"><h2 id="configuration" class="title-link"> <div class="title-name">Configuration</div>  </h2> <div class="REFBODY rb-3"> <p>The following configuration parameters can be used to change the default values for time interval and threshold:</p> <dl> <dt class="title-link"><strong> <code>disk_space_check_interval =</code><code><a href="#type-time">time()</a></code> </strong></dt> <dd> <p>The time interval for the periodic disk space check. The default is 30 minutes.</p> </dd> <dt class="title-link"><strong><code>disk_almost_full_threshold = float()</code></strong></dt> <dd> <p>The threshold, as percentage of total disk space, for how much disk can be utilized before the <code>disk_almost_full</code> alarm is set. The default is 0.80 (80%).</p> </dd> <dt class="title-link"><strong><code>disksup_posix_only = bool()</code></strong></dt> <dd> <p>Specifies whether the <code>disksup</code> helper process should only use POSIX conformant commands (<code>true</code>) or not. The default is <code>false</code>. Setting this parameter to <code>true</code> can be necessary on embedded systems with stripped-down versions of Unix tools like <code>df</code>. The returned disk data and alarms can be different when using this option.</p> <p>The parameter is ignored on platforms that are known to not be POSIX compatible (Windows and SunOS).</p> </dd> </dl> <p>See <code>config(4)</code> for information about how to change the value of configuration parameters.</p> </div></section> <div class="innertube"><h2 id="export" class="title-link"> <div class="title-name">Exports</div>  </h2></div> <div class="exports-body"> <article class="func"><div class="bold_code func-head"><h3 id="get_disk_data-0" class="title-link">  <div class="title-name">get_disk_data() -&gt; [DiskData]</div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>DiskData = {Id, TotalKiB, Capacity}</code><br> </div> <div class="REFTYPES rt-4"> <code>Id = string()</code><br> </div> <div class="REFTYPES rt-4"> <code>TotalKiB = int()</code><br> </div> <div class="REFTYPES rt-4"> <code>Capacity = int()</code><br> </div> </div> <div class="REFBODY rb-7"> <p>Returns the result of the latest disk check. <code>Id</code> is a string that identifies the disk or partition. <code>TotalKiB</code> is the total size of the disk or partition in kibibytes. <code>Capacity</code> is the percentage of disk space used.</p> <p>The function is asynchronous in the sense that it does not invoke a disk check, but returns the latest available value.</p> <p>Returns <code>[{"none",0,0}]</code> if <code>disksup</code> is not available.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="get_disk_info-0" class="title-link">  <div class="title-name">get_disk_info() -&gt; [DiskData]</div> <div class="title-since"><span class="since">OTP 26.0</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>DiskData = {Id, TotalKiB, AvailableKiB, Capacity}</code><br> </div> <div class="REFTYPES rt-4"> <code>Id = string()</code><br> </div> <div class="REFTYPES rt-4"> <code>TotalKiB = int()</code><br> </div> <div class="REFTYPES rt-4"> <code>AvailableKiB = int()</code><br> </div> <div class="REFTYPES rt-4"> <code>Capacity = int()</code><br> </div> </div> <div class="REFBODY rb-7"> <p>Immediately fetches total space, available space and capacity for local disks. <code>Id</code> is a string that identifies the disk or partition. <code>TotalKiB</code> is the total size of the disk or partition in kibibytes. <code>AvailableKiB</code> is the disk space used in kibibytes. <code>Capacity</code> is the percentage of disk space used.</p> <p>Returns <code>[{"none",0,0,0}]</code> if <code>disksup</code> is not available.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="get_disk_info-1" class="title-link">  <div class="title-name">get_disk_info(Path) -&gt; DiskData</div> <div class="title-since"><span class="since">OTP 26.0</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>DiskData = [{Id, TotalKiB, AvailableKiB, Capacity}]</code><br> </div> <div class="REFTYPES rt-4"> <code>Id = string()</code><br> </div> <div class="REFTYPES rt-4"> <code>TotalKiB = int()</code><br> </div> <div class="REFTYPES rt-4"> <code>AvailableKiB = int()</code><br> </div> <div class="REFTYPES rt-4"> <code>Capacity = int()</code><br> </div> </div> <div class="REFBODY rb-7"> <p>Immediately fetches total space, available space and capacity for a path. <code>Id</code> is a string that identifies the disk or partition. <code>TotalKiB</code> is the total size of the disk or partition in kibibytes. <code>AvailableKiB</code> is the disk space used in kibibytes. <code>Capacity</code> is the percentage of disk space used.</p> <p>Returns <code>[{Path,0,0,0}]</code> if the <code>Path</code> is invalid or space can't be determined. Returns <code>[{"none",0,0,0}]</code> if <code>disksup</code> is not available.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="get_check_interval-0" class="title-link">  <div class="title-name">get_check_interval() -&gt; MS</div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>MS = int()</code><br> </div> </div> <div class="REFBODY rb-7"> <p>Returns the time interval, in milliseconds, for the periodic disk space check.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="set_check_interval-1" class="title-link">  <div class="title-name">set_check_interval(Time) -&gt; ok</div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>Time = <a href="#type-time">time()</a></code><br> </div> </div> <div class="REFBODY rb-7"> <p>Changes the time interval for the periodic disk space check.</p> <p>The change will take effect after the next disk space check and is non-persist. That is, in case of a process restart, this value is forgotten and the default value will be used. See <code><a href="#config">Configuration</a></code> above.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="get_almost_full_threshold-0" class="title-link">  <div class="title-name">get_almost_full_threshold() -&gt; Percent</div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>Percent = int()</code><br> </div> </div> <div class="REFBODY rb-7"> <p>Returns the threshold, in percent, for disk space utilization.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="set_almost_full_threshold-1" class="title-link">  <div class="title-name">set_almost_full_threshold(Float) -&gt; ok</div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>Float = float(), 0=&lt;Float=&lt;1</code><br> </div> </div> <div class="REFBODY rb-7"> <p>Changes the threshold, given as a float, for disk space utilization.</p> <p>The change will take effect during the next disk space check and is non-persist. That is, in case of a process restart, this value is forgotten and the default value will be used. See <code><a href="#config">Configuration</a></code> above.</p> </div> </div></article> </div> <section class="innertube"><h2 id="see-also" class="title-link"> <div class="title-name">See Also</div>  </h2> <div class="REFBODY rb-3"> <p><code>alarm_handler(3)</code>, <code><span>os_mon(3)</span></code></p> </div></section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010&ndash;2023 Ericsson AB<br>Licensed under the Apache License, Version 2.0.<br>
    
  </p>
</div>
