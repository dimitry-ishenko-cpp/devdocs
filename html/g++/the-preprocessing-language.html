<h1 class="section" id="The-preprocessing-language-1">1.4 The preprocessing language</h1> <div class="section-level-extent" id="The-preprocessing-language">        <p>After tokenization, the stream of tokens may simply be passed straight to the compiler’s parser. However, if it contains any operations in the <em class="dfn">preprocessing language</em>, it will be transformed first. This stage corresponds roughly to the standard’s “translation phase 4” and is what most people think of as the preprocessor’s job. </p> <p>The preprocessing language consists of <em class="dfn">directives</em> to be executed and <em class="dfn">macros</em> to be expanded. Its primary capabilities are: </p> <ul class="itemize mark-bullet"> <li>Inclusion of header files. These are files of declarations that can be substituted into your program. </li>
<li>Macro expansion. You can define <em class="dfn">macros</em>, which are abbreviations for arbitrary fragments of C code. The preprocessor will replace the macros with their definitions throughout the program. Some macros are automatically defined for you. </li>
<li>Conditional compilation. You can include or exclude parts of the program according to various conditions. </li>
<li>Line control. If you use a program to combine or rearrange source files into an intermediate file which is then compiled, you can use line control to inform the compiler where each source line originally came from. </li>
<li>Diagnostics. You can detect problems at compile time and issue errors or warnings. </li>
</ul> <p>There are a few more, less useful, features. </p> <p>Except for expansion of predefined macros, all these operations are triggered with <em class="dfn">preprocessing directives</em>. Preprocessing directives are lines in your program that start with ‘<samp class="samp">#</samp>’. Whitespace is allowed before and after the ‘<samp class="samp">#</samp>’. The ‘<samp class="samp">#</samp>’ is followed by an identifier, the <em class="dfn">directive name</em>. It specifies the operation to perform. Directives are commonly referred to as ‘<samp class="samp">#<var class="var">name</var></samp>’ where <var class="var">name</var> is the directive name. For example, ‘<samp class="samp">#define</samp>’ is the directive that defines a macro. </p> <p>The ‘<samp class="samp">#</samp>’ which begins a directive cannot come from a macro expansion. Also, the directive name is not macro expanded. Thus, if <code class="code">foo</code> is defined as a macro expanding to <code class="code">define</code>, that does not make ‘<samp class="samp">#foo</samp>’ a valid preprocessing directive. </p> <p>The set of valid directive names is fixed. Programs cannot define new preprocessing directives. </p> <p>Some directives require arguments; these make up the rest of the directive line and must be separated from the directive name by whitespace. For example, ‘<samp class="samp">#define</samp>’ must be followed by a macro name and the intended expansion of the macro. </p> <p>A preprocessing directive cannot cover more than one line. The line may, however, be continued with backslash-newline, or by a block comment which extends past the end of the line. In either case, when the directive is processed, the continuations have already been merged with the first line to make one long line. </p> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Free Software Foundation<br>Licensed under the GNU Free Documentation License, Version 1.3.<br>
    <a href="https://gcc.gnu.org/onlinedocs/gcc-14.2.0/cpp/The-preprocessing-language.html" class="_attribution-link">https://gcc.gnu.org/onlinedocs/gcc-14.2.0/cpp/The-preprocessing-language.html</a>
  </p>
</div>
