<h1 class="subsection" id="If-1">4.2.2 If</h1> <div class="subsection-level-extent" id="If">    <p>The ‘<samp class="samp">#if</samp>’ directive allows you to test the value of an arithmetic expression, rather than the mere existence of one macro. Its syntax is </p> <div class="example smallexample"> <div class="group"><pre class="example-preformatted" data-language="cpp">#if <var class="var">expression</var>

<var class="var">controlled text</var>

#endif /* <var class="var">expression</var> */</pre></div>
</div> <p><var class="var">expression</var> is a C expression of integer type, subject to stringent restrictions. It may contain </p> <ul class="itemize mark-bullet"> <li>Integer constants. </li>
<li>Character constants, which are interpreted as they would be in normal code. </li>
<li>Arithmetic operators for addition, subtraction, multiplication, division, bitwise operations, shifts, comparisons, and logical operations (<code class="code">&amp;&amp;</code> and <code class="code">||</code>). The latter two obey the usual short-circuiting rules of standard C. </li>
<li>Macros. All macros in the expression are expanded before actual computation of the expression’s value begins. </li>
<li>Uses of the <code class="code">defined</code> operator, which lets you check whether macros are defined in the middle of an ‘<samp class="samp">#if</samp>’. </li>
<li>Identifiers that are not macros, which are all considered to be the number zero. This allows you to write <code class="code">#if MACRO</code> instead of <code class="code">#ifdef MACRO</code>, if you know that MACRO, when defined, will always have a nonzero value. Function-like macros used without their function call parentheses are also treated as zero. <p>In some contexts this shortcut is undesirable. The <samp class="option">-Wundef</samp> option causes GCC to warn whenever it encounters an identifier which is not a macro in an ‘<samp class="samp">#if</samp>’. </p>
</li>
</ul> <p>The preprocessor does not know anything about types in the language. Therefore, <code class="code">sizeof</code> operators are not recognized in ‘<samp class="samp">#if</samp>’, and neither are <code class="code">enum</code> constants. They will be taken as identifiers which are not macros, and replaced by zero. In the case of <code class="code">sizeof</code>, this is likely to cause the expression to be invalid. </p> <p>The preprocessor calculates the value of <var class="var">expression</var>. It carries out all calculations in the widest integer type known to the compiler; on most machines supported by GCC this is 64 bits. This is not the same rule as the compiler uses to calculate the value of a constant expression, and may give different results in some cases. If the value comes out to be nonzero, the ‘<samp class="samp">#if</samp>’ succeeds and the <var class="var">controlled text</var> is included; otherwise it is skipped. </p> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Free Software Foundation<br>Licensed under the GNU Free Documentation License, Version 1.3.<br>
    <a href="https://gcc.gnu.org/onlinedocs/gcc-14.2.0/cpp/If.html" class="_attribution-link">https://gcc.gnu.org/onlinedocs/gcc-14.2.0/cpp/If.html</a>
  </p>
</div>
