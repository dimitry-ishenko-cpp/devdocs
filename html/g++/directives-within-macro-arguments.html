<h1 class="section" id="Directives-Within-Macro-Arguments-1">3.9 Directives Within Macro Arguments</h1> <div class="section-level-extent" id="Directives-Within-Macro-Arguments">     <p>Occasionally it is convenient to use preprocessor directives within the arguments of a macro. The C and C++ standards declare that behavior in these cases is undefined. GNU CPP processes arbitrary directives within macro arguments in exactly the same way as it would have processed the directive were the function-like macro invocation not present. </p> <p>If, within a macro invocation, that macro is redefined, then the new definition takes effect in time for argument pre-expansion, but the original definition is still used for argument replacement. Here is a pathological example: </p> <div class="example smallexample"> <pre class="example-preformatted" data-language="cpp">#define f(x) x x
f (1
#undef f
#define f 2
f)</pre>
</div> <p>which expands to </p> <div class="example smallexample"> <pre class="example-preformatted" data-language="cpp">1 2 1 2</pre>
</div> <p>with the semantics described above. </p> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Free Software Foundation<br>Licensed under the GNU Free Documentation License, Version 1.3.<br>
    <a href="https://gcc.gnu.org/onlinedocs/gcc-14.2.0/cpp/Directives-Within-Macro-Arguments.html" class="_attribution-link">https://gcc.gnu.org/onlinedocs/gcc-14.2.0/cpp/Directives-Within-Macro-Arguments.html</a>
  </p>
</div>
