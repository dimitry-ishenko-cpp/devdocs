<h1 class="section" id="Function_002dlike-Macros-1">3.2 Function-like Macros</h1> <div class="section-level-extent" id="Function_002dlike-Macros">     <p>You can also define macros whose use looks like a function call. These are called <em class="dfn">function-like macros</em>. To define a function-like macro, you use the same ‘<samp class="samp">#define</samp>’ directive, but you put a pair of parentheses immediately after the macro name. For example, </p> <div class="example smallexample"> <pre class="example-preformatted" data-language="cpp">#define lang_init()  c_init()
lang_init()
     → c_init()</pre>
</div> <p>A function-like macro is only expanded if its name appears with a pair of parentheses after it. If you write just the name, it is left alone. This can be useful when you have a function and a macro of the same name, and you wish to use the function sometimes. </p> <div class="example smallexample"> <pre class="example-preformatted" data-language="cpp">extern void foo(void);
#define foo() /* <span class="r">optimized inline version</span> */
…
  foo();
  funcptr = foo;</pre>
</div> <p>Here the call to <code class="code">foo()</code> will use the macro, but the function pointer will get the address of the real function. If the macro were to be expanded, it would cause a syntax error. </p> <p>If you put spaces between the macro name and the parentheses in the macro definition, that does not define a function-like macro, it defines an object-like macro whose expansion happens to begin with a pair of parentheses. </p> <div class="example smallexample"> <pre class="example-preformatted" data-language="cpp">#define lang_init ()    c_init()
lang_init()
     → () c_init()()</pre>
</div> <p>The first two pairs of parentheses in this expansion come from the macro. The third is the pair that was originally after the macro invocation. Since <code class="code">lang_init</code> is an object-like macro, it does not consume those parentheses. </p> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Free Software Foundation<br>Licensed under the GNU Free Documentation License, Version 1.3.<br>
    <a href="https://gcc.gnu.org/onlinedocs/gcc-14.2.0/cpp/Function_002dlike-Macros.html" class="_attribution-link">https://gcc.gnu.org/onlinedocs/gcc-14.2.0/cpp/Function_002dlike-Macros.html</a>
  </p>
</div>
