<h1>Risky Tests</h1> <p>PHPUnit can perform the additional checks documented below while it executes the tests.</p> <div class="section" id="useless-tests"> <h2>Useless Tests</h2> <p>PHPUnit is by default strict about tests that do not test anything. This check can be disabled by using the <code class="docutils literal"><span class="pre">--dont-report-useless-tests</span></code> option on the <a class="reference internal" href="textui.html#textui-clioptions"><span class="std std-ref">command line</span></a> or by setting <code class="docutils literal"><span class="pre">beStrictAboutTestsThatDoNotTestAnything="false"</span></code> in PHPUnit’s <a class="reference internal" href="configuration.html#appendixes-configuration"><span class="std std-ref">configuration file</span></a>.</p> <p>A test that does not perform an assertion will be marked as risky when this check is enabled. Expectations on mock objects count as an assertion.</p> </div> <div class="section" id="unintentionally-covered-code"> <h2>Unintentionally Covered Code</h2> <p>PHPUnit can be strict about unintentionally covered code. This check can be enabled by using the <code class="docutils literal"><span class="pre">--strict-coverage</span></code> option on the <a class="reference internal" href="textui.html#textui-clioptions"><span class="std std-ref">command line</span></a> or by setting <code class="docutils literal"><span class="pre">beStrictAboutCoversAnnotation="true"</span></code> in PHPUnit’s <a class="reference internal" href="configuration.html#appendixes-configuration"><span class="std std-ref">configuration file</span></a>.</p> <p>A test that is annotated with <a class="reference internal" href="annotations.html#appendixes-annotations-covers"><span class="std std-ref">@covers</span></a> and executes code that is not listed using a <a class="reference internal" href="annotations.html#appendixes-annotations-covers"><span class="std std-ref">@covers</span></a> or <a class="reference internal" href="annotations.html#appendixes-annotations-uses"><span class="std std-ref">@uses</span></a> annotation will be marked as risky when this check is enabled.</p> <p>Furthermore, by setting <code class="docutils literal"><span class="pre">forceCoversAnnotation="true"</span></code> in PHPUnit’s <a class="reference internal" href="configuration.html#appendixes-configuration"><span class="std std-ref">configuration file</span></a>, a test can be marked as risky when it does not have a <a class="reference internal" href="annotations.html#appendixes-annotations-covers"><span class="std std-ref">@covers</span></a> annotation.</p> </div> <div class="section" id="output-during-test-execution"> <h2>Output During Test Execution</h2> <p>PHPUnit can be strict about output during tests. This check can be enabled by using the <code class="docutils literal"><span class="pre">--disallow-test-output</span></code> option on the <a class="reference internal" href="textui.html#textui-clioptions"><span class="std std-ref">command line</span></a> or by setting <code class="docutils literal"><span class="pre">beStrictAboutOutputDuringTests="true"</span></code> in PHPUnit’s <a class="reference internal" href="configuration.html#appendixes-configuration"><span class="std std-ref">configuration file</span></a>.</p> <p>A test that emits output, for instance by invoking print in either the test code or the tested code, will be marked as risky when this check is enabled.</p> </div> <div class="section" id="test-execution-timeout"> <h2>Test Execution Timeout</h2> <p>A time limit can be enforced for the execution of a test if the <code class="docutils literal"><span class="pre">PHP_Invoker</span></code> package is installed and the <code class="docutils literal"><span class="pre">pcntl</span></code> extension is available. The enforcing of this time limit can be enabled by using the <code class="docutils literal"><span class="pre">--enforce-time-limit</span></code> option on the <a class="reference internal" href="textui.html#textui-clioptions"><span class="std std-ref">command line</span></a> or by setting <code class="docutils literal"><span class="pre">enforceTimeLimit="true"</span></code> in PHPUnit’s <a class="reference internal" href="configuration.html#appendixes-configuration"><span class="std std-ref">configuration file</span></a>.</p> <p>A test annotated with <code class="docutils literal"><span class="pre">@large</span></code> will fail if it takes longer than 60 seconds to execute. This timeout is configurable via the <code class="docutils literal"><span class="pre">timeoutForLargeTests</span></code> attribute in the <a class="reference internal" href="configuration.html#appendixes-configuration"><span class="std std-ref">configuration file</span></a>.</p> <p>A test annotated with <code class="docutils literal"><span class="pre">@medium</span></code> will fail if it takes longer than 10 seconds to execute. This timeout is configurable via the <code class="docutils literal"><span class="pre">timeoutForMediumTests</span></code> attribute in the configuration <a class="reference internal" href="configuration.html#appendixes-configuration"><span class="std std-ref">configuration file</span></a>.</p> <p>A test annotated with <code class="docutils literal"><span class="pre">@small</span></code> will fail if it takes longer than 1 second to execute. This timeout is configurable via the <code class="docutils literal"><span class="pre">timeoutForSmallTests</span></code> attribute in the <a class="reference internal" href="configuration.html#appendixes-configuration"><span class="std std-ref">configuration file</span></a>.</p> <div class="admonition-note admonition"> <p class="first admonition-title">Note</p> <p class="last">Tests need to be explicitly annotated by either <code class="docutils literal"><span class="pre">@small</span></code>, <code class="docutils literal"><span class="pre">@medium</span></code>, or <code class="docutils literal"><span class="pre">@large</span></code> to enable run time limits.</p> </div> </div> <div class="section" id="global-state-manipulation"> <h2>Global State Manipulation</h2> <p>PHPUnit can be strict about tests that manipulate global state. This check can be enabled by using the <code class="docutils literal"><span class="pre">--strict-global-state</span></code> option on the <a class="reference internal" href="textui.html#textui-clioptions"><span class="std std-ref">command line</span></a> or by setting <code class="docutils literal"><span class="pre">beStrictAboutChangesToGlobalState="true"</span></code> in PHPUnit’s <a class="reference internal" href="configuration.html#appendixes-configuration"><span class="std std-ref">configuration file</span></a>.</p> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2020 Sebastian Bergmann<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>
    <a href="https://phpunit.readthedocs.io/en/9.5/risky-tests.html" class="_attribution-link">https://phpunit.readthedocs.io/en/9.5/risky-tests.html</a>
  </p>
</div>
