<h1 id="command-push">  Command: push </h1> <blockquote class="alert alert-warning" role="alert"> <p><strong>Important:</strong> The <code>terraform push</code> command is deprecated, and only works with <a href="https://www.terraform.io/docs/enterprise-legacy/index.html">the legacy version of Terraform Enterprise</a>. In the current version of Terraform Enterprise, you can upload configurations using the API. See <a href="https://www.terraform.io/docs/enterprise/run/api.html">the docs about API-driven runs</a> for more details.</p> </blockquote> <p>The <code>terraform push</code> command uploads your Terraform configuration to be managed by HashiCorp's <a href="https://www.hashicorp.com/products/terraform/">Terraform Enterprise</a>. Terraform Enterprise can automatically run Terraform for you, save all state transitions, save plans, and keep a history of all Terraform runs.</p> <p>This makes it significantly easier to use Terraform as a team: team members modify the Terraform configurations locally and continue to use normal version control. When the Terraform configurations are ready to be run, they are pushed to Terraform Enterprise, and any member of your team can run Terraform with the push of a button.</p> <p>Terraform Enterprise can also be used to set ACLs on who can run Terraform, and a future update of Terraform Enterprise will allow parallel Terraform runs and automatically perform infrastructure locking so only one run is modifying the same infrastructure at a time.</p> <blockquote class="alert alert-warning" role="alert"> <p>When using this command, it is important to match your local Terraform version with the version selected for the target workspace in Terraform Enterprise, since otherwise the uploaded configuration archive may not be compatible with the remote Terraform process.</p> </blockquote> <h2 id="usage">  Usage </h2> <p>Usage: <code>terraform push [options] [path]</code></p> <p>The <code>path</code> argument is the same as for the <a href="apply.html">apply</a> command.</p> <p>The command-line flags are all optional. The list of available flags are:</p> <ul> <li>
<p><a href="#atlas-address-lt-url-gt-"><code>-atlas-address=&lt;url&gt;</code></a> - An alternate address to an instance. Defaults to <code>https://atlas.hashicorp.com</code>.</p> </li> <li>
<p><a href="#upload-modules-true"><code>-upload-modules=true</code></a> - If true (default), then the <a href="../modules/index.html">modules</a> being used are all locked at their current checkout and uploaded completely. This prevents Terraform Enterprise from running <code>terraform get</code> for you.</p> </li> <li>
<p><a href="#name-lt-name-gt-"><code>-name=&lt;name&gt;</code></a> - Name of the infrastructure configuration in Terraform Enterprise. The format of this is: "username/name" so that you can upload configurations not just to your account but to other accounts and organizations. This setting can also be set in the configuration in the <a href="https://www.terraform.io/docs/configuration/terraform-enterprise.html">Terraform Enterprise section</a>.</p> </li> <li>
<p><a href="#no-color"><code>-no-color</code></a> - Disables output with coloring</p> </li> <li>
<p><a href="#overwrite-foo"><code>-overwrite=foo</code></a> - Marks a specific variable to be updated. Normally, if a variable is already set Terraform will not send the local value (even if it is different). This forces it to send the local value to Terraform Enterprise. This flag can be repeated multiple times.</p> </li> <li>
<p><a href="#token-lt-token-gt-"><code>-token=&lt;token&gt;</code></a> - Terraform Enterprise API token to use to authorize the upload. If blank or unspecified, the <code>ATLAS_TOKEN</code> environment variable will be used.</p> </li> <li>
<p><a href="#var-39-foo-bar-39-"><code>-var='foo=bar'</code></a> - Set the value of a variable for the Terraform configuration.</p> </li> <li>
<p><a href="#var-file-foo"><code>-var-file=foo</code></a> - Set the value of variables using a variable file. This flag can be used multiple times.</p> </li> <li>
<p><a href="#vcs-true"><code>-vcs=true</code></a> - If true (default), then Terraform will detect if a VCS is in use, such as Git, and will only upload files that are committed to version control. If no version control system is detected, Terraform will upload all files in <code>path</code> (parameter to the command).</p> </li> </ul> <h2 id="packaged-files">  Packaged Files </h2> <p>The files that are uploaded and packaged with a <code>push</code> are all the files in the <code>path</code> given as the parameter to the command, recursively. By default (unless <code>-vcs=false</code> is specified), Terraform will automatically detect when a VCS such as Git is being used, and in that case will only upload the files that are committed. Because of this built-in intelligence, you don't have to worry about excluding folders such as ".git" or ".hg" usually.</p> <p>If Terraform doesn't detect a VCS, it will upload all files.</p> <p>The reason Terraform uploads all of these files is because Terraform cannot know what is and isn't being used for provisioning, so it uploads all the files to be safe. To exclude certain files, specify the <code>-exclude</code> flag when pushing, or specify the <code>exclude</code> parameter in the <a href="https://www.terraform.io/docs/configuration/terraform-enterprise.html">Terraform Enterprise configuration section</a>.</p> <p>Terraform also includes in the package all of the modules that were installed during the most recent <code>terraform init</code> or <code>terraform get</code> command. Since the details of how modules are cached in the filesystem vary between Terraform versions, it is important to use the same version of Terraform both locally (when running <code>terraform init</code> and then <code>terraform push</code>) and in your remote Terraform Enterprise workspace.</p> <h2 id="terraform-variables">  Terraform Variables </h2> <p>When you <code>push</code>, Terraform will automatically set the local values of your Terraform variables on Terraform Enterprise. The values are only set if they don't already exist. If you want to force push a certain variable value to update it, use the <code>-overwrite</code> flag.</p> <p>All the variable values stored are encrypted and secured using <a href="https://www.vaultproject.io">Vault</a>. We blogged about the <a href="https://www.hashicorp.com/blog/how-atlas-uses-vault-for-managing-secrets.html">architecture of our secure storage system</a> if you want more detail.</p> <p>The variable values can be updated using the <code>-overwrite</code> flag or via the <a href="https://www.hashicorp.com/products/terraform/">Terraform Enterprise website</a>. An example of updating just a single variable <code>foo</code> is shown below:</p> <pre data-language="shell">$ terraform push -var 'foo=bar' -overwrite foo
</pre>
<p>Both the <code>-var</code> and <code>-overwrite</code> flag are required. The <code>-var</code> flag sets the value locally (the exact same process as commands such as apply or plan), and the <code>-overwrite</code> flag tells the push command to update Terraform Enterprise.</p> <h2 id="remote-state-requirement">  Remote State Requirement </h2> <blockquote class="alert alert-warning" role="alert"> <p><strong>Important:</strong> This section only refers to the legacy version of Terraform Enterprise. The current version of Terraform Enterprise always manages its own state, and does not support arbitrary remote state backends.</p> </blockquote> <p><code>terraform push</code> requires that <a href="../state/remote.html">remote state</a> is enabled. The reasoning for this is simple: <code>terraform push</code> sends your configuration to be managed remotely. For it to keep the state in sync and for you to be able to easily access that state, remote state must be enabled instead of juggling local files.</p> <p>While <code>terraform push</code> sends your configuration to be managed by Terraform Enterprise, the remote state backend <em>does not</em> have to be Terraform Enterprise. It can be anything as long as it is accessible by the public internet, since Terraform Enterprise will need to be able to communicate to it.</p> <p><strong>Warning:</strong> The credentials for accessing the remote state will be sent up to Terraform Enterprise as well. Therefore, we recommend you use access keys that are restricted if possible.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2018 HashiCorp</br>Licensed under the MPL 2.0 License.<br>
    <a href="https://www.terraform.io/docs/commands/push.html" class="_attribution-link">https://www.terraform.io/docs/commands/push.html</a>
  </p>
</div>
