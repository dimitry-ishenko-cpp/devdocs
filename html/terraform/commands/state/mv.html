<h1 id="command-state-mv">  Command: state mv </h1> <p>The <code>terraform state mv</code> command is used to move items in a <a href="../../state/index.html">Terraform state</a>. This command can move single resources, single instances of a resource, entire modules, and more. This command can also move items to a completely different state file, enabling efficient refactoring.</p> <h2 id="usage">  Usage </h2> <p>Usage: <code>terraform state mv [options] SOURCE DESTINATION</code></p> <p>This command will move an item matched by the address given to the destination address. This command can also move to a destination address in a completely different state file.</p> <p>This can be used for simple resource renaming, moving items to and from a module, moving entire modules, and more. And because this command can also move data to a completely new state, it can also be used for refactoring one configuration into multiple separately managed Terraform configurations.</p> <p>This command will output a backup copy of the state prior to saving any changes. The backup cannot be disabled. Due to the destructive nature of this command, backups are required.</p> <p>If you're moving an item to a different state file, a backup will be created for each state file.</p> <p>This command requires a source and destination address of the item to move. Addresses are in <a href="addressing.html">resource addressing format</a>.</p> <p>The command-line flags are all optional. The list of available flags are:</p> <ul> <li>
<p><a href="#backup-path"><code>-backup=path</code></a> - Path where Terraform should write the backup for the original state. This can't be disabled. If not set, Terraform will write it to the same path as the statefile with a ".backup" extension.</p> </li> <li>
<p><a href="#backup-out-path"><code>-backup-out=path</code></a> - Path where Terraform should write the backup for the destination state. This can't be disabled. If not set, Terraform will write it to the same path as the destination state file with a backup extension. This only needs to be specified if -state-out is set to a different path than -state.</p> </li> <li>
<p><a href="#state-path"><code>-state=path</code></a> - Path to the source state file to read from. Defaults to the configured backend, or "terraform.tfstate".</p> </li> <li>
<p><a href="#state-out-path"><code>-state-out=path</code></a> - Path to the destination state file to write to. If this isn't specified the source state file will be used. This can be a new or existing path.</p> </li> </ul> <h2 id="example-rename-a-resource">  Example: Rename a Resource </h2> <p>The example below renames a single resource:</p> <pre>$ terraform state mv aws_instance.foo aws_instance.bar
</pre>
<h2 id="example-move-a-resource-into-a-module">  Example: Move a Resource Into a Module </h2> <p>The example below moves a resource into a module. The module will be created if it doesn't exist.</p> <pre>$ terraform state mv aws_instance.foo module.web
</pre>
<h2 id="example-move-a-module-into-a-module">  Example: Move a Module Into a Module </h2> <p>The example below moves a module into another module.</p> <pre>$ terraform state mv module.foo module.parent.module.foo
</pre>
<h2 id="example-move-a-module-to-another-state">  Example: Move a Module to Another State </h2> <p>The example below moves a module into another state file. This removes the module from the original state file and adds it to the destination. The source and destination are the same meaning we're keeping the same name.</p> <pre>$ terraform state mv -state-out=other.tfstate \
    module.web module.web
</pre><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2018 HashiCorp</br>Licensed under the MPL 2.0 License.<br>
    <a href="https://www.terraform.io/docs/commands/state/mv.html" class="_attribution-link">https://www.terraform.io/docs/commands/state/mv.html</a>
  </p>
</div>
