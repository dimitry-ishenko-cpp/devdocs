<h1 id="aws_ecr_repository_policy">  aws_ecr_repository_policy </h1> <p>Provides an ECR repository policy.</p> <p>Note that currently only one policy may be applied to a repository.</p> <blockquote class="alert alert-warning" role="alert"> <p><strong>NOTE on ECR Availability</strong>: The EC2 Container Registry is not yet rolled out in all regions - available regions are listed <a href="https://docs.aws.amazon.com/general/latest/gr/rande.html#ecr_region">the AWS Docs</a>.</p> </blockquote> <h2 id="example-usage">  Example Usage </h2> <pre data-language="ruby">resource "aws_ecr_repository" "foo" {
  name = "bar"
}

resource "aws_ecr_repository_policy" "foopolicy" {
  repository = "${aws_ecr_repository.foo.name}"

  policy = &lt;&lt;EOF
{
    "Version": "2008-10-17",
    "Statement": [
        {
            "Sid": "new policy",
            "Effect": "Allow",
            "Principal": "*",
            "Action": [
                "ecr:GetDownloadUrlForLayer",
                "ecr:BatchGetImage",
                "ecr:BatchCheckLayerAvailability",
                "ecr:PutImage",
                "ecr:InitiateLayerUpload",
                "ecr:UploadLayerPart",
                "ecr:CompleteLayerUpload",
                "ecr:DescribeRepositories",
                "ecr:GetRepositoryPolicy",
                "ecr:ListImages",
                "ecr:DeleteRepository",
                "ecr:BatchDeleteImage",
                "ecr:SetRepositoryPolicy",
                "ecr:DeleteRepositoryPolicy"
            ]
        }
    ]
}
EOF
}
</pre>
<h2 id="argument-reference">  Argument Reference </h2> <p>The following arguments are supported:</p> <ul> <li>
<a href="#repository"><code>repository</code></a> - (Required) Name of the repository to apply the policy. </li> <li>
<a href="#policy"><code>policy</code></a> - (Required) The policy document. This is a JSON formatted string. </li> </ul> <h2 id="attributes-reference">  Attributes Reference </h2> <p>In addition to all arguments above, the following attributes are exported:</p> <ul> <li>
<a href="#repository-1"><code>repository</code></a> - The name of the repository. </li> <li>
<a href="#registry_id"><code>registry_id</code></a> - The registry ID where the repository was created. </li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2018 HashiCorp</br>Licensed under the MPL 2.0 License.<br>
    <a href="https://www.terraform.io/docs/providers/aws/r/ecr_repository_policy.html" class="_attribution-link">https://www.terraform.io/docs/providers/aws/r/ecr_repository_policy.html</a>
  </p>
</div>
