<h1 id="module-usage">  Module Usage </h1> <p>Using child modules in Terraform is very similar to defining resources:</p> <pre data-language="shell">module "consul" {
  source  = "hashicorp/consul/aws"
  servers = 3
}
</pre>
<p>You can view the full documentation for configuring modules in the <a href="../configuration/modules.html">Module Configuration</a> section.</p> <p>In modules we only specify a name, rather than a name and a type as for resources. This name is used elsewhere in the configuration to reference the module and its outputs.</p> <p>The source tells Terraform what to create. In this example, we instantiate the <a href="https://registry.terraform.io/modules/hashicorp/consul/aws">Consul module for AWS</a> from the <a href="https://registry.terraform.io">Terraform Registry</a>. Other source types are supported, as described in the following section.</p> <p>Just like a resource, a module's configuration can be deleted to destroy the resources belonging to the module.</p> <h2 id="source">  Source </h2> <p>The only required configuration key for a module is the <code>source</code> parameter. The value of this tells Terraform where to download the module's source code. Terraform comes with support for a variety of module sources.</p> <p>We recommend using modules from the public <a href="../registry/index.html">Terraform Registry</a> or from <a href="https://www.terraform.io/docs/enterprise/registry/index.html">Terraform Enterprise's private module registry</a>. These sources support version constraints for a more reliable experience, and provide a searchable marketplace for finding the modules you need.</p> <p>Registry modules are specified using a simple slash-separated path like the <code>hashicorp/consul/aws</code> path used in the above example. The full source string for each registry module can be found from the registry website.</p> <p>Terraform also supports modules in local directories, identified by a relative path starting with either <code>./</code> or <code>../</code>. Such local modules are useful to organize code in more complex repositories, and are described in more detail in <a href="create.html"><em>Creating Modules</em></a>.</p> <p>Finally, Terraform can download modules directly from various storage providers and version control systems. These sources do not support versioning and other registry benefits, but can be convenient for getting started when already available within an organization. The full list of available sources are documented in <a href="sources.html">the module sources documentation</a>.</p> <p>When a configuration uses modules, they must first be installed by running <a href="../commands/init.html"><code>terraform init</code></a>:</p> <pre data-language="shell">$ terraform init
</pre>
<p>This command will download any modules that haven't been updated already, as well as performing other Terraform working directory initialization such as installing providers.</p> <p>By default the command will not check for available updates to already-installed modules, but you can use the <code>-upgrade</code> option to check for available upgrades. When version constraints are specified (as described in the following section) a newer version will be used only if it is within the given constraint.</p> <h2 id="module-versions">  Module Versions </h2> <p>We recommend explicitly constraining the acceptable version numbers for each external module to avoid unexpected or unwanted changes.</p> <p>Use the <code>version</code> attribute in the <code>module</code> block to specify versions:</p> <pre data-language="shell">module "consul" {
  source  = "hashicorp/consul/aws"
  version = "0.0.5"

  servers = 3
}
</pre>
<p>The <code>version</code> attribute value may either be a single explicit version or a version constraint expression. Constraint expressions use the following syntax to specify a <em>range</em> of versions that are acceptable:</p> <ul> <li>
<a href="#gt-1-2-0"><code>&gt;= 1.2.0</code></a>: version 1.2.0 or newer </li> <li>
<a href="#lt-1-2-0"><code>&lt;= 1.2.0</code></a>: version 1.2.0 or older </li> <li>
<a href="#gt-1-2-0-1"><code>~&gt; 1.2.0</code></a>: any non-beta version <code>&gt;= 1.2.0</code> and <code>&lt; 1.3.0</code>, e.g. <code>1.2.X</code> </li> <li>
<a href="#gt-1-2"><code>~&gt; 1.2</code></a>: any non-beta version <code>&gt;= 1.2.0</code> and <code>&lt; 2.0.0</code>, e.g. <code>1.X.Y</code> </li> <li>
<a href="#gt-1-0-0-lt-2-0-0"><code>&gt;= 1.0.0, &lt;= 2.0.0</code></a>: any version between 1.0.0 and 2.0.0 inclusive </li> </ul> <p>When depending on third-party modules, references to specific versions are recommended since this ensures that updates only happen when convenient to you.</p> <p>For modules maintained within your organization, a version range strategy may be appropriate if a semantic versioning methodology is used consistently or if there is a well-defined release process that avoids unwanted updates.</p> <p>Version constraints are supported only for modules installed from a module registry, such as the <a href="https://registry.terraform.io/">Terraform Registry</a> or <a href="https://www.terraform.io/docs/enterprise/registry/index.html">Terraform Enterprise's private module registry</a>. Other module sources can provide their own versioning mechanisms within the source string itself, or might not support versions at all. In particular, modules sourced from local file paths do not support <code>version</code>; since they're loaded from the same source repository, they always share the same version as their caller.</p> <h2 id="configuration">  Configuration </h2> <p>The arguments used in a <code>module</code> block, such as the <code>servers</code> parameter above, correspond to <a href="../configuration/variables.html">variables</a> within the module itself. You can therefore discover all the available variables for a module by inspecting the source of it.</p> <p>The special arguments <code>source</code>, <code>version</code> and <code>providers</code> are exceptions. These are used for special purposes by Terraform and should therefore not be used as variable names within a module.</p> <h2 id="outputs">  Outputs </h2> <p>Modules encapsulate their resources. A resource in one module cannot directly depend on resources or attributes in other modules, unless those are exported through <a href="../configuration/outputs.html">outputs</a>. These outputs can be referenced in other places in your configuration, for example:</p> <pre data-language="ruby">resource "aws_instance" "client" {
  ami               = "ami-408c7f28"
  instance_type     = "t1.micro"
  availability_zone = "${module.consul.server_availability_zone}"
}
</pre>
<p>This is deliberately very similar to accessing resource attributes. Instead of referencing a resource attribute, however, the expression in this case references an output of the module.</p> <p>Just like with resources, interpolation expressions can create implicit dependencies on resources and other modules. Since modules encapsulate other resources, however, the dependency is not on the module as a whole but rather on the <code>server_availability_zone</code> output specifically, which allows Terraform to work on resources in different modules concurrently rather than waiting for the entire module to be complete before proceeding.</p> <h2 id="providers-within-modules">  Providers within Modules </h2> <p>In a configuration with multiple modules, there are some special considerations for how resources are associated with provider configurations.</p> <p>While in principle <code>provider</code> blocks can appear in any module, it is recommended that they be placed only in the <em>root</em> module of a configuration, since this approach allows users to configure providers just once and re-use them across all descendent modules.</p> <p>Each resource in the configuration must be associated with one provider configuration, which may either be within the same module as the resource or be passed from the parent module. Providers can be passed down to descendent modules in two ways: either <em>implicitly</em> through inheritance, or <em>explicitly</em> via the <code>providers</code> argument within a <code>module</code> block. These two options are discussed in more detail in the following sections.</p> <p>In all cases it is recommended to keep explicit provider configurations only in the root module and pass them (whether implicitly or explicitly) down to descendent modules. This avoids the provider configurations from being "lost" when descendent modules are removed from the configuration. It also allows the user of a configuration to determine which providers require credentials by inspecting only the root module.</p> <p>Provider configurations are used for all operations on associated resources, including destroying remote objects and refreshing state. Terraform retains, as part of its state, a reference to the provider configuration that was most recently used to apply changes to each resource. When a <code>resource</code> block is removed from the configuration, this record in the state is used to locate the appropriate configuration because the resource's <code>provider</code> argument (if any) is no longer present in the configuration.</p> <p>As a consequence, it is required that all resources created for a particular provider configuration must be destroyed before that provider configuration is removed, unless the related resources are re-configured to use a different provider configuration first.</p> <h3 id="implicit-provider-inheritance">  Implicit Provider Inheritance </h3> <p>For convenience in simple configurations, a child module automatically inherits default (un-aliased) provider configurations from its parent. This means that explicit <code>provider</code> blocks appear only in the root module, and downstream modules can simply declare resources for that provider and have them automatically associated with the root provider configurations.</p> <p>For example, the root module might contain only a <code>provider</code> block and a <code>module</code> block to instantiate a child module:</p> <pre data-language="ruby">provider "aws" {
  region = "us-west-1"
}

module "child" {
  source = "./child"
}
</pre>
<p>The child module can then use any resource from this provider with no further provider configuration required:</p> <pre data-language="ruby">resource "aws_s3_bucket" "example" {
  bucket = "provider-inherit-example"
}
</pre>
<p>This approach is recommended in the common case where only a single configuration is needed for each provider across the entire configuration.</p> <p>In more complex situations there may be <a href="../configuration/providers.html#multiple-provider-instances">multiple provider instances</a>, or a child module may need to use different provider settings than its parent. For such situations, it's necessary to pass providers explicitly as we will see in the next section.</p> <h2 id="passing-providers-explicitly">  Passing Providers Explicitly </h2> <p>When child modules each need a different configuration of a particular provider, or where the child module requires a different provider configuration than its parent, the <code>providers</code> argument within a <code>module</code> block can be used to define explicitly which provider configs are made available to the child module. For example:</p> <pre data-language="ruby"># The default "aws" configuration is used for AWS resources in the root
# module where no explicit provider instance is selected.
provider "aws" {
  region = "us-west-1"
}

# A non-default, or "aliased" configuration is also defined for a different
# region.
provider "aws" {
  alias  = "usw2"
  region = "us-west-2"
}

# An example child module is instantiated with the _aliased_ configuration,
# so any AWS resources it defines will use the us-west-2 region.
module "example" {
  source    = "./example"
  providers = {
    aws = "aws.usw2"
  }
}
</pre>
<p>The <code>providers</code> argument within a <code>module</code> block is similar to the <code>provider</code> argument within a resource as described for <a href="../configuration/providers.html#multiple-provider-instances">multiple provider instances</a>, but is a map rather than a single string because a module may contain resources from many different providers.</p> <p>Once the <code>providers</code> argument is used in a <code>module</code> block, it overrides all of the default inheritance behavior, so it is necessary to enumerate mappings for <em>all</em> of the required providers. This is to avoid confusion and surprises that may result when mixing both implicit and explicit provider passing.</p> <p>Additional provider configurations (those with the <code>alias</code> argument set) are <em>never</em> inherited automatically by child modules, and so must always be passed explicitly using the <code>providers</code> map. For example, a module that configures connectivity between networks in two AWS regions is likely to need both a source and a destination region. In that case, the root module may look something like this:</p> <pre data-language="ruby">provider "aws" {
  alias  = "usw1"
  region = "us-west-1"
}

provider "aws" {
  alias  = "usw2"
  region = "us-west-2"
}

module "tunnel" {
  source    = "./tunnel"
  providers = {
    aws.src = "aws.usw1"
    aws.dst = "aws.usw2"
  }
}
</pre>
<p>In the <code>providers</code> map, the keys are provider names as expected by the child module, while the values are the names of corresponding configurations in the <em>current</em> module. The subdirectory <code>./tunnel</code> must then contain <em>proxy configuration blocks</em> like the following, to declare that it requires configurations to be passed with these from the <code>providers</code> block in the parent's <code>module</code> block:</p> <pre data-language="ruby">provider "aws" {
  alias = "src"
}

provider "aws" {
  alias = "dst"
}
</pre>
<p>Each resource should then have its own <code>provider</code> attribute set to either <code>"aws.src"</code> or <code>"aws.dst"</code> to choose which of the two provider instances to use.</p> <p>At this time it is required to write an explicit proxy configuration block even for default (un-aliased) provider configurations when they will be passed via an explicit <code>providers</code> block:</p> <pre data-language="ruby">provider "aws" {
}
</pre>
<p>If such a block is not present, the child module will behave as if it has no configurations of this type at all, which may cause input prompts to supply any required provider configuration arguments. This limitation will be addressed in a future version of Terraform.</p> <h2 id="multiple-instances-of-a-module">  Multiple Instances of a Module </h2> <p>A particular module source can be instantiated multiple times:</p> <pre data-language="ruby"># my_buckets.tf

module "assets_bucket" {
  source = "./publish_bucket"
  name   = "assets"
}

module "media_bucket" {
  source = "./publish_bucket"
  name   = "media"
}
</pre>
<pre data-language="ruby"># publish_bucket/bucket-and-cloudfront.tf

variable "name" {} # this is the input parameter of the module

resource "aws_s3_bucket" "example" {
  # ...
}

resource "aws_iam_user" "deploy_user" {
  # ...
}
</pre>
<p>This example defines a local child module in the <code>./publish_bucket</code> subdirectory. That module has configuration to create an S3 bucket. The module wraps the bucket and all the other implementation details required to configure a bucket.</p> <p>We can then instantiate the module multiple times in our configuration by giving each instance a unique name -- here <code>module "assets_bucket"</code> and <code>module "media_bucket"</code> -- whilst specifying the same <code>source</code> value.</p> <p>Resources from child modules are prefixed with <code>module.&lt;module-instance-name&gt;</code> when displayed in plan output and elsewhere in the UI. For example, the <code>./publish_bucket</code> module contains <code>aws_s3_bucket.example</code>, and so the two instances of this module produce S3 bucket resources with <a href="../internals/resource-addressing.html"><em>resource addresses</em></a> <code>module.assets_bucket.aws_s3_bucket.example</code> and <code>module.media_bucket.aws_s3_bucket.example</code> respectively. These full addresses are used within the UI and on the command line, but are not valid within interpolation expressions due to the encapsulation behavior described above.</p> <p>When refactoring an existing configuration to introduce modules, moving resource blocks between modules causes Terraform to see the new location as an entirely separate resource to the old. Always check the execution plan after performing such actions to ensure that no resources are surprisingly deleted.</p> <p>Each instance of a module may optionally have different providers passed to it using the <code>providers</code> argument described above. This can be useful in situations where, for example, a duplicated set of resources must be created across several regions or datacenters.</p> <h2 id="summarizing-modules-in-the-ui">  Summarizing Modules in the UI </h2> <p>By default, commands such as the <a href="../commands/plan.html">plan command</a> and <a href="../commands/graph.html">graph command</a> will show each resource in a nested module to represent the full scope of the configuration. For more complex configurations, the <code>-module-depth</code> option may be useful to summarize some or all of the modules as single objects.</p> <p>For example, with a configuration similar to what we've built above, the default graph output looks like the following:</p> <p><img alt="Terraform Expanded Module Graph" src="data:image/png;base64,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"></p> <p>If we instead set <code>-module-depth=0</code>, the graph will look like this:</p> <p><img alt="Terraform Module Graph" src="data:image/png;base64,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"></p> <p>Other commands work similarly with modules. Note that <code>-module-depth</code> only affects how modules are presented in the UI; it does not affect how modules and their contained resources are processed by Terraform operations.</p> <h2 id="tainting-resources-within-a-module">  Tainting resources within a module </h2> <p>The <a href="../commands/taint.html">taint command</a> can be used to <em>taint</em> specific resources within a module:</p> <pre data-language="shell">$ terraform taint -module=salt_master aws_instance.salt_master
</pre>
<p>It is not possible to taint an entire module. Instead, each resource within the module must be tainted separately.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2018 HashiCorp</br>Licensed under the MPL 2.0 License.<br>
    <a href="https://www.terraform.io/docs/modules/usage.html" class="_attribution-link">https://www.terraform.io/docs/modules/usage.html</a>
  </p>
</div>
