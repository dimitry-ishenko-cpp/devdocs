<h1 id="input-variable-configuration">  Input Variable Configuration </h1> <p>Input variables serve as parameters for a Terraform module.</p> <p>When used in the root module of a configuration, variables can be set from CLI arguments and environment variables. For <a href="modules.html"><em>child</em> modules</a>, they allow values to pass from parent to child.</p> <p>Input variable usage is introduced in the Getting Started guide section <a href="https://www.terraform.io/intro/getting-started/variables.html"><em>Input Variables</em></a>.</p> <p>This page assumes you're familiar with the <a href="syntax.html">configuration syntax</a> already.</p> <h2 id="example">  Example </h2> <p>Input variables can be defined as follows:</p> <pre data-language="ruby">variable "key" {
  type = "string"
}

variable "images" {
  type = "map"

  default = {
    us-east-1 = "image-1234"
    us-west-2 = "image-4567"
  }
}

variable "zones" {
  default = ["us-east-1a", "us-east-1b"]
}
</pre>
<h2 id="description">  Description </h2> <p>The <code>variable</code> block configures a single input variable for a Terraform module. Each block declares a single variable.</p> <p>The name given in the block header is used to assign a value to the variable via the CLI and to reference the variable elsewhere in the configuration.</p> <p>Within the block body (between <code>{ }</code>) is configuration for the variable, which accepts the following arguments:</p> <ul> <li>
<p><a href="#type"><code>type</code></a> (Optional) - If set this defines the type of the variable. Valid values are <code>string</code>, <code>list</code>, and <code>map</code>. If this field is omitted, the variable type will be inferred based on <code>default</code>. If no <code>default</code> is provided, the type is assumed to be <code>string</code>.</p> </li> <li>
<p><a href="#default"><code>default</code></a> (Optional) - This sets a default value for the variable. If no default is provided, Terraform will raise an error if a value is not provided by the caller. The default value can be of any of the supported data types, as described below. If <code>type</code> is also set, the given value must be of the specified type.</p> </li> <li>
<p><a href="#description-1"><code>description</code></a> (Optional) - A human-friendly description for the variable. This is primarily for documentation for users using your Terraform configuration. When a module is published in <a href="https://registry.terraform.io/">Terraform Registry</a>, the given description is shown as part of the documentation.</p> </li> </ul> <p>The name of a variable can be any valid identifier. However, due to the interpretation of <a href="modules.html">module configuration blocks</a>, the names <code>source</code>, <code>version</code> and <code>providers</code> are reserved for Terraform's own use and are thus not recommended for any module intended to be used as a child module.</p> <p>The default value of an input variable must be a <em>literal</em> value, containing no interpolation expressions. To assign a name to an expression so that it may be re-used within a module, use <a href="locals.html">Local Values</a> instead.</p> <h3 id="strings">  Strings </h3> <p>String values are simple and represent a basic key to value mapping where the key is the variable name. An example is:</p> <pre data-language="ruby">variable "key" {
  type    = "string"
  default = "value"
}
</pre>
<p>A multi-line string value can be provided using heredoc syntax.</p> <pre data-language="ruby">variable "long_key" {
  type = "string"
  default = &lt;&lt;EOF
This is a long key.
Running over several lines.
EOF
}
</pre>
<p>Terraform performs automatic conversion from string values to numeric and boolean values based on context, so in practice string variables may be used to set arguments of any primitive type. For boolean values in particular there are some caveats, described under <a href="#booleans"><em>Booleans</em></a> below.</p> <h3 id="maps">  Maps </h3> <p>A map value is a lookup table from string keys to string values. This is useful for selecting a value based on some other provided value.</p> <p>A common use of maps is to create a table of machine images per region, as follows:</p> <pre data-language="ruby">variable "images" {
  type    = "map"
  default = {
    "us-east-1" = "image-1234"
    "us-west-2" = "image-4567"
  }
}
</pre>
<h3 id="lists">  Lists </h3> <p>A list value is an ordered sequence of strings indexed by integers starting with zero. For example:</p> <pre data-language="ruby">variable "users" {
  type    = "list"
  default = ["admin", "ubuntu"]
}
</pre>
<h3 id="booleans">  Booleans </h3> <p>Although Terraform can automatically convert between boolean and string values, there are some subtle implications of these conversions that should be completely understood when using boolean values with input variables.</p> <p>It is recommended for now to specify boolean values for variables as the strings <code>"true"</code> and <code>"false"</code>, to avoid some caveats in the conversion process. A future version of Terraform will properly support boolean values and so relying on the current behavior could result in backwards-incompatibilities at that time.</p> <p>For a configuration such as the following:</p> <pre data-language="ruby">variable "active" {
  default = false
}
</pre>
<p>The false is converted to a string <code>"0"</code> when running Terraform.</p> <p>Then, depending on where you specify overrides, the behavior can differ:</p> <ul> <li>
<p>Variables with boolean values in a <code>tfvars</code> file will likewise be converted to "0" and "1" values.</p> </li> <li>
<p>Variables specified via the <code>-var</code> command line flag will be literal strings "true" and "false", so care should be taken to explicitly use "0" or "1".</p> </li> <li>
<p>Variables specified with the <code>TF_VAR_</code> environment variables will be literal string values, just like <code>-var</code>.</p> </li> </ul> <p>A future version of Terraform will fully support first-class boolean types which will make the behavior of booleans consistent as you would expect. This may break some of the above behavior.</p> <p>When passing boolean-like variables as parameters to resource configurations that expect boolean values, they are converted consistently:</p> <ul> <li>"1" and "true" become <code>true</code> </li> <li>"0" and "false" become <code>false</code> </li> </ul> <p>The behavior of conversion in <em>this</em> direction (string to boolean) will <em>not</em> change in future Terraform versions. Therefore, using these string values rather than literal booleans is recommended when using input variables.</p> <h2 id="environment-variables">  Environment Variables </h2> <p>Environment variables can be used to set the value of an input variable in the root module. The name of the environment variable must be <code>TF_VAR_</code> followed by the variable name, and the value is the value of the variable.</p> <p>For example, given the configuration below:</p> <pre data-language="ruby">variable "image" {}
</pre>
<p>The variable can be set via an environment variable:</p> <pre data-language="shell">$ TF_VAR_image=foo terraform apply
</pre>
<p>Maps and lists can be specified using environment variables as well using <a href="syntax.html#HCL">HCL</a> syntax in the value.</p> <p>For a list variable like so:</p> <pre data-language="ruby">variable "somelist" {
  type = "list"
}
</pre>
<p>The variable could be set like so:</p> <pre data-language="shell">$ TF_VAR_somelist='["ami-abc123", "ami-bcd234"]' terraform plan
</pre>
<p>Similarly, for a map declared like:</p> <pre data-language="ruby">variable "somemap" {
  type = "map"
}
</pre>
<p>The value can be set like this:</p> <pre data-language="shell">$ TF_VAR_somemap='{foo = "bar", baz = "qux"}' terraform plan
</pre>
<h2 id="variable-files">  Variable Files </h2> <p>Values for the input variables of a root module can be gathered in <em>variable definition files</em> and passed together using the <code>-var-file=FILE</code> option.</p> <p>For all files which match <code>terraform.tfvars</code> or <code>*.auto.tfvars</code> present in the current directory, Terraform automatically loads them to populate variables. If the file is located somewhere else, you can pass the path to the file using the <code>-var-file</code> flag. It is recommended to name such files with names ending in <code>.tfvars</code>.</p> <p>Variables files use HCL or JSON syntax to define variable values. Strings, lists or maps may be set in the same manner as the default value in a <code>variable</code> block in Terraform configuration. For example:</p> <pre data-language="ruby">foo = "bar"
xyz = "abc"

somelist = [
  "one",
  "two",
]

somemap = {
  foo = "bar"
  bax = "qux"
}
</pre>
<p>The <code>-var-file</code> flag can be used multiple times per command invocation:</p> <pre data-language="shell">$ terraform apply -var-file=foo.tfvars -var-file=bar.tfvars
</pre>
<blockquote class="alert alert-info" role="alert"> <p><strong>Note</strong>: Variable files are evaluated in the order in which they are specified on the command line. If a particular variable is defined in more than one variable file, the last value specified is effective.</p> </blockquote> <h3 id="variable-merging">  Variable Merging </h3> <p>When multiple values are provided for the same input variable, map values are merged while all other values are overriden by the last definition.</p> <p>For example, if you define a variable twice on the command line:</p> <pre data-language="shell">$ terraform apply -var foo=bar -var foo=baz
</pre>
<p>Then the value of <code>foo</code> will be <code>baz</code>, since it was the last definition seen.</p> <p>However, for maps, the values are merged:</p> <pre data-language="shell">$ terraform apply -var 'foo={quux="bar"}' -var 'foo={bar="baz"}'
</pre>
<p>The resulting value of <code>foo</code> will be:</p> <pre data-language="shell">{
  quux = "bar"
  bar = "baz"
}
</pre>
<p>There is no way currently to unset map values in Terraform. Whenever a map is modified either via variable input or being passed into a module, the values are always merged.</p> <h3 id="variable-precedence">  Variable Precedence </h3> <p>Both these files have the variable <code>baz</code> defined:</p> <p><em>foo.tfvars</em></p> <pre data-language="ruby">baz = "foo"
</pre>
<p><em>bar.tfvars</em></p> <pre data-language="ruby">baz = "bar"
</pre>
<p>When they are passed in the following order:</p> <pre data-language="shell">$ terraform apply -var-file=foo.tfvars -var-file=bar.tfvars
</pre>
<p>The result will be that <code>baz</code> will contain the value <code>bar</code> because <code>bar.tfvars</code> has the last definition loaded.</p> <p>Definition files passed using the <code>-var-file</code> flag will always be evaluated after those in the working directory.</p> <p>Values passed within definition files or with <code>-var</code> will take precedence over <code>TF_VAR_</code> environment variables, as environment variables are considered defaults.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2018 HashiCorp</br>Licensed under the MPL 2.0 License.<br>
    <a href="https://www.terraform.io/docs/configuration/variables.html" class="_attribution-link">https://www.terraform.io/docs/configuration/variables.html</a>
  </p>
</div>
