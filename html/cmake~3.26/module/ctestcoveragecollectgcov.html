<h1 id="module:CTestCoverageCollectGCOV">CTestCoverageCollectGCOV</h1> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.2.</span></p> </div> <p>This module provides the <code>ctest_coverage_collect_gcov</code> function.</p> <p>This function runs gcov on all .gcda files found in the binary tree and packages the resulting .gcov files into a tar file. This tarball also contains the following:</p> <ul class="simple"> <li>
<em>data.json</em> defines the source and build directories for use by CDash.</li> <li>
<em>Labels.json</em> indicates any <a class="reference internal" href="../prop_sf/labels.html#prop_sf:LABELS" title="LABELS" id="index-0-prop_sf:LABELS"><code>LABELS</code></a> that have been set on the source files.</li> <li>The <em>uncovered</em> directory holds any uncovered files found by <a class="reference internal" href="../variable/ctest_extra_coverage_glob.html#variable:CTEST_EXTRA_COVERAGE_GLOB" title="CTEST_EXTRA_COVERAGE_GLOB" id="index-0-variable:CTEST_EXTRA_COVERAGE_GLOB"><code>CTEST_EXTRA_COVERAGE_GLOB</code></a>.</li> </ul> <p>After generating this tar file, it can be sent to CDash for display with the <a class="reference internal" href="../command/ctest_submit.html#command:ctest_submit" title="ctest_submit" id="index-0-command:ctest_submit"><code>ctest_submit(CDASH_UPLOAD)</code></a> command.</p> <dl class="cmake command"> <dt class="sig sig-object cmake" id="command:ctest_coverage_collect_gcov">
<code>ctest_coverage_collect_gcov</code> </dt> <dd>
<pre data-language="none">ctest_coverage_collect_gcov(TARBALL &lt;tarfile&gt;
  [SOURCE &lt;source_dir&gt;][BUILD &lt;build_dir&gt;]
  [GCOV_COMMAND &lt;gcov_command&gt;]
  [GCOV_OPTIONS &lt;options&gt;...]
  )
</pre> <p>Run gcov and package a tar file for CDash. The options are:</p> <dl> <dt>
<code>TARBALL &lt;tarfile&gt;</code> </dt>
<dd>
<p>Specify the location of the <code>.tar</code> file to be created for later upload to CDash. Relative paths will be interpreted with respect to the top-level build directory.</p> </dd> <dt>
<code>TARBALL_COMPRESSION &lt;option&gt;</code> </dt>
<dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3.18.</span></p> </div> <p>Specify a compression algorithm for the <code>TARBALL</code> data file. Using this option reduces the size of the data file before it is submitted to CDash. <code>&lt;option&gt;</code> must be one of <code>GZIP</code>, <code>BZIP2</code>, <code>XZ</code>, <code>ZSTD</code>, <code>FROM_EXT</code>, or an expression that CMake evaluates as <code>FALSE</code>. The default value is <code>BZIP2</code>.</p> <p>If <code>FROM_EXT</code> is specified, the resulting file will be compressed based on the file extension of the <code>&lt;tarfile&gt;</code> (i.e. <code>.tar.gz</code> will use <code>GZIP</code> compression). File extensions that will produce compressed output include <code>.tar.gz</code>, <code>.tgz</code>, <code>.tar.bzip2</code>, <code>.tbz</code>, <code>.tar.xz</code>, and <code>.txz</code>.</p> </dd> <dt>
<code>SOURCE &lt;source_dir&gt;</code> </dt>
<dd>
<p>Specify the top-level source directory for the build. Default is the value of <a class="reference internal" href="../variable/ctest_source_directory.html#variable:CTEST_SOURCE_DIRECTORY" title="CTEST_SOURCE_DIRECTORY" id="index-0-variable:CTEST_SOURCE_DIRECTORY"><code>CTEST_SOURCE_DIRECTORY</code></a>.</p> </dd> <dt>
<code>BUILD &lt;build_dir&gt;</code> </dt>
<dd>
<p>Specify the top-level build directory for the build. Default is the value of <a class="reference internal" href="../variable/ctest_binary_directory.html#variable:CTEST_BINARY_DIRECTORY" title="CTEST_BINARY_DIRECTORY" id="index-0-variable:CTEST_BINARY_DIRECTORY"><code>CTEST_BINARY_DIRECTORY</code></a>.</p> </dd> <dt>
<code>GCOV_COMMAND &lt;gcov_command&gt;</code> </dt>
<dd>
<p>Specify the full path to the <code>gcov</code> command on the machine. Default is the value of <a class="reference internal" href="../variable/ctest_coverage_command.html#variable:CTEST_COVERAGE_COMMAND" title="CTEST_COVERAGE_COMMAND" id="index-0-variable:CTEST_COVERAGE_COMMAND"><code>CTEST_COVERAGE_COMMAND</code></a>.</p> </dd> <dt>
<code>GCOV_OPTIONS &lt;options&gt;...</code> </dt>
<dd>
<p>Specify options to be passed to gcov. The <code>gcov</code> command is run as <code>gcov &lt;options&gt;... -o &lt;gcov-dir&gt; &lt;file&gt;.gcda</code>. If not specified, the default option is just <code>-b -x</code>.</p> </dd> <dt>
<code>GLOB</code> </dt>
<dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3.6.</span></p> </div> <p>Recursively search for .gcda files in build_dir rather than determining search locations by reading TargetDirectories.txt.</p> </dd> <dt>
<code>DELETE</code> </dt>
<dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3.6.</span></p> </div> <p>Delete coverage files after they've been packaged into the .tar.</p> </dd> <dt>
<code>QUIET</code> </dt>
<dd>
<p>Suppress non-error messages that otherwise would have been printed out by this function.</p> </dd> </dl> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.3: </span>Added support for the <a class="reference internal" href="../variable/ctest_custom_coverage_exclude.html#variable:CTEST_CUSTOM_COVERAGE_EXCLUDE" title="CTEST_CUSTOM_COVERAGE_EXCLUDE" id="index-0-variable:CTEST_CUSTOM_COVERAGE_EXCLUDE"><code>CTEST_CUSTOM_COVERAGE_EXCLUDE</code></a> variable.</p> </div> </dd>
</dl>  <div class="_attribution">
  <p class="_attribution-p">
    &copy; 2000&ndash;2023 Kitware, Inc. and Contributors<br>Licensed under the BSD 3-clause License.<br>
    <a href="https://cmake.org/cmake/help/v3.26/module/CTestCoverageCollectGCOV.html" class="_attribution-link">https://cmake.org/cmake/help/v3.26/module/CTestCoverageCollectGCOV.html</a>
  </p>
</div>
