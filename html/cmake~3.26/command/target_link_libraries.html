<h1 id="command:target_link_libraries">target_link_libraries</h1>   <ul> <li><a class="reference internal" href="#overview" id="id3">Overview</a></li> <li><a class="reference internal" href="#libraries-for-a-target-and-or-its-dependents" id="id4">Libraries for a Target and/or its Dependents</a></li> <li><a class="reference internal" href="#libraries-for-both-a-target-and-its-dependents" id="id5">Libraries for both a Target and its Dependents</a></li> <li><a class="reference internal" href="#libraries-for-a-target-and-or-its-dependents-legacy" id="id6">Libraries for a Target and/or its Dependents (Legacy)</a></li> <li><a class="reference internal" href="#libraries-for-dependents-only-legacy" id="id7">Libraries for Dependents Only (Legacy)</a></li> <li>
<p><a class="reference internal" href="#linking-object-libraries" id="id8">Linking Object Libraries</a></p> <ul> <li><a class="reference internal" href="#linking-object-libraries-via-target-objects" id="id9">Linking Object Libraries via <code>$&lt;TARGET_OBJECTS&gt;</code></a></li> </ul> </li> <li><a class="reference internal" href="#cyclic-dependencies-of-static-libraries" id="id10">Cyclic Dependencies of Static Libraries</a></li> <li><a class="reference internal" href="#creating-relocatable-packages" id="id11">Creating Relocatable Packages</a></li> <li><a class="reference internal" href="#see-also" id="id12">See Also</a></li> </ul>
  <p>Specify libraries or flags to use when linking a given target and/or its dependents. <a class="reference internal" href="../manual/cmake-buildsystem.7.html#target-usage-requirements"><span class="std std-ref">Usage requirements</span></a> from linked library targets will be propagated. Usage requirements of a target's dependencies affect compilation of its own sources.</p>  <h2>Overview</h2> <p>This command has several signatures as detailed in subsections below. All of them have the general form</p> <pre data-language="cmake">target_link_libraries(&lt;target&gt; ... &lt;item&gt;... ...)
</pre> <p>The named <code>&lt;target&gt;</code> must have been created by a command such as <a class="reference internal" href="add_executable.html#command:add_executable" title="add_executable" id="index-0-command:add_executable"><code>add_executable()</code></a> or <a class="reference internal" href="add_library.html#command:add_library" title="add_library" id="index-0-command:add_library"><code>add_library()</code></a> and must not be an <a class="reference internal" href="../manual/cmake-buildsystem.7.html#alias-targets"><span class="std std-ref">ALIAS target</span></a>. If policy <a class="reference internal" href="../policy/cmp0079.html#policy:CMP0079" title="CMP0079" id="index-0-policy:CMP0079"><code>CMP0079</code></a> is not set to <code>NEW</code> then the target must have been created in the current directory. Repeated calls for the same <code>&lt;target&gt;</code> append items in the order called.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.13: </span>The <code>&lt;target&gt;</code> doesn't have to be defined in the same directory as the <code>target_link_libraries</code> call.</p> </div> <p>Each <code>&lt;item&gt;</code> may be:</p> <ul> <li>
<p><strong>A library target name</strong>: The generated link line will have the full path to the linkable library file associated with the target. The buildsystem will have a dependency to re-link <code>&lt;target&gt;</code> if the library file changes.</p> <p>The named target must be created by <a class="reference internal" href="add_library.html#command:add_library" title="add_library" id="index-1-command:add_library"><code>add_library()</code></a> within the project or as an <a class="reference internal" href="../manual/cmake-buildsystem.7.html#imported-targets"><span class="std std-ref">IMPORTED library</span></a>. If it is created within the project an ordering dependency will automatically be added in the build system to make sure the named library target is up-to-date before the <code>&lt;target&gt;</code> links.</p> <p>If an imported library has the <a class="reference internal" href="../prop_tgt/imported_no_soname.html#prop_tgt:IMPORTED_NO_SONAME" title="IMPORTED_NO_SONAME" id="index-0-prop_tgt:IMPORTED_NO_SONAME"><code>IMPORTED_NO_SONAME</code></a> target property set, CMake may ask the linker to search for the library instead of using the full path (e.g. <code>/usr/lib/libfoo.so</code> becomes <code>-lfoo</code>).</p> <p>The full path to the target's artifact will be quoted/escaped for the shell automatically.</p> </li> <li>
<p><strong>A full path to a library file</strong>: The generated link line will normally preserve the full path to the file. The buildsystem will have a dependency to re-link <code>&lt;target&gt;</code> if the library file changes.</p> <p>There are some cases where CMake may ask the linker to search for the library (e.g. <code>/usr/lib/libfoo.so</code> becomes <code>-lfoo</code>), such as when a shared library is detected to have no <code>SONAME</code> field. See policy <a class="reference internal" href="../policy/cmp0060.html#policy:CMP0060" title="CMP0060" id="index-0-policy:CMP0060"><code>CMP0060</code></a> for discussion of another case.</p> <p>If the library file is in a macOS framework, the <code>Headers</code> directory of the framework will also be processed as a <a class="reference internal" href="../manual/cmake-buildsystem.7.html#target-usage-requirements"><span class="std std-ref">usage requirement</span></a>. This has the same effect as passing the framework directory as an include directory.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.8: </span>On <a class="reference internal" href="../manual/cmake-generators.7.html#visual-studio-generators"><span class="std std-ref">Visual Studio Generators</span></a> for VS 2010 and above, library files ending in <code>.targets</code> will be treated as MSBuild targets files and imported into generated project files. This is not supported by other generators.</p> </div> <p>The full path to the library file will be quoted/escaped for the shell automatically.</p> </li> <li>
<p><strong>A plain library name</strong>: The generated link line will ask the linker to search for the library (e.g. <code>foo</code> becomes <code>-lfoo</code> or <code>foo.lib</code>).</p> <p>The library name/flag is treated as a command-line string fragment and will be used with no extra quoting or escaping.</p> </li> <li>
<p><strong>A link flag</strong>: Item names starting with <code>-</code>, but not <code>-l</code> or <code>-framework</code>, are treated as linker flags. Note that such flags will be treated like any other library link item for purposes of transitive dependencies, so they are generally safe to specify only as private link items that will not propagate to dependents.</p> <p>Link flags specified here are inserted into the link command in the same place as the link libraries. This might not be correct, depending on the linker. Use the <a class="reference internal" href="../prop_tgt/link_options.html#prop_tgt:LINK_OPTIONS" title="LINK_OPTIONS" id="index-0-prop_tgt:LINK_OPTIONS"><code>LINK_OPTIONS</code></a> target property or <a class="reference internal" href="target_link_options.html#command:target_link_options" title="target_link_options" id="index-0-command:target_link_options"><code>target_link_options()</code></a> command to add link flags explicitly. The flags will then be placed at the toolchain-defined flag position in the link command.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.13: </span><a class="reference internal" href="../prop_tgt/link_options.html#prop_tgt:LINK_OPTIONS" title="LINK_OPTIONS" id="index-1-prop_tgt:LINK_OPTIONS"><code>LINK_OPTIONS</code></a> target property and <a class="reference internal" href="target_link_options.html#command:target_link_options" title="target_link_options" id="index-1-command:target_link_options"><code>target_link_options()</code></a> command. For earlier versions of CMake, use <a class="reference internal" href="../prop_tgt/link_flags.html#prop_tgt:LINK_FLAGS" title="LINK_FLAGS" id="index-0-prop_tgt:LINK_FLAGS"><code>LINK_FLAGS</code></a> property instead.</p> </div> <p>The link flag is treated as a command-line string fragment and will be used with no extra quoting or escaping.</p> </li> <li>
<p><strong>A generator expression</strong>: A <code>$&lt;...&gt;</code> <a class="reference internal" href="../manual/cmake-generator-expressions.7.html#manual:cmake-generator-expressions(7)" title="cmake-generator-expressions(7)" id="index-0-manual:cmake-generator-expressions(7)"><code>generator expression</code></a> may evaluate to any of the above items or to a <a class="reference internal" href="../manual/cmake-language.7.html#cmake-language-lists"><span class="std std-ref">semicolon-separated list</span></a> of them. If the <code>...</code> contains any <code>;</code> characters, e.g. after evaluation of a <code>${list}</code> variable, be sure to use an explicitly quoted argument <code>"$&lt;...&gt;"</code> so that this command receives it as a single <code>&lt;item&gt;</code>.</p> <p>Additionally, a generator expression may be used as a fragment of any of the above items, e.g. <code>foo$&lt;1:_d&gt;</code>.</p> <p>Note that generator expressions will not be used in OLD handling of policy <a class="reference internal" href="../policy/cmp0003.html#policy:CMP0003" title="CMP0003" id="index-0-policy:CMP0003"><code>CMP0003</code></a> or policy <a class="reference internal" href="../policy/cmp0004.html#policy:CMP0004" title="CMP0004" id="index-0-policy:CMP0004"><code>CMP0004</code></a>.</p> </li> <li>A <code>debug</code>, <code>optimized</code>, or <code>general</code> keyword immediately followed by another <code>&lt;item&gt;</code>. The item following such a keyword will be used only for the corresponding build configuration. The <code>debug</code> keyword corresponds to the <code>Debug</code> configuration (or to configurations named in the <a class="reference internal" href="../prop_gbl/debug_configurations.html#prop_gbl:DEBUG_CONFIGURATIONS" title="DEBUG_CONFIGURATIONS" id="index-0-prop_gbl:DEBUG_CONFIGURATIONS"><code>DEBUG_CONFIGURATIONS</code></a> global property if it is set). The <code>optimized</code> keyword corresponds to all other configurations. The <code>general</code> keyword corresponds to all configurations, and is purely optional. Higher granularity may be achieved for per-configuration rules by creating and linking to <a class="reference internal" href="../manual/cmake-buildsystem.7.html#imported-targets"><span class="std std-ref">IMPORTED library targets</span></a>. These keywords are interpreted immediately by this command and therefore have no special meaning when produced by a generator expression.</li> </ul> <p>Items containing <code>::</code>, such as <code>Foo::Bar</code>, are assumed to be <a class="reference internal" href="../manual/cmake-buildsystem.7.html#imported-targets"><span class="std std-ref">IMPORTED</span></a> or <a class="reference internal" href="../manual/cmake-buildsystem.7.html#alias-targets"><span class="std std-ref">ALIAS</span></a> library target names and will cause an error if no such target exists. See policy <a class="reference internal" href="../policy/cmp0028.html#policy:CMP0028" title="CMP0028" id="index-0-policy:CMP0028"><code>CMP0028</code></a>.</p> <p>See the <a class="reference internal" href="../manual/cmake-buildsystem.7.html#manual:cmake-buildsystem(7)" title="cmake-buildsystem(7)" id="index-0-manual:cmake-buildsystem(7)"><code>cmake-buildsystem(7)</code></a> manual for more on defining buildsystem properties.</p>   <h2>Libraries for a Target and/or its Dependents</h2> <pre data-language="cmake">target_link_libraries(&lt;target&gt;
                      &lt;PRIVATE|PUBLIC|INTERFACE&gt; &lt;item&gt;...
                     [&lt;PRIVATE|PUBLIC|INTERFACE&gt; &lt;item&gt;...]...)
</pre> <p>The <code>PUBLIC</code>, <code>PRIVATE</code> and <code>INTERFACE</code> <a class="reference internal" href="../manual/cmake-buildsystem.7.html#target-usage-requirements"><span class="std std-ref">scope</span></a> keywords can be used to specify both the link dependencies and the link interface in one command.</p> <p>Libraries and targets following <code>PUBLIC</code> are linked to, and are made part of the link interface. Libraries and targets following <code>PRIVATE</code> are linked to, but are not made part of the link interface. Libraries following <code>INTERFACE</code> are appended to the link interface and are not used for linking <code>&lt;target&gt;</code>.</p>   <h2>Libraries for both a Target and its Dependents</h2> <pre data-language="cmake">target_link_libraries(&lt;target&gt; &lt;item&gt;...)
</pre> <p>Library dependencies are transitive by default with this signature. When this target is linked into another target then the libraries linked to this target will appear on the link line for the other target too. This transitive "link interface" is stored in the <a class="reference internal" href="../prop_tgt/interface_link_libraries.html#prop_tgt:INTERFACE_LINK_LIBRARIES" title="INTERFACE_LINK_LIBRARIES" id="index-0-prop_tgt:INTERFACE_LINK_LIBRARIES"><code>INTERFACE_LINK_LIBRARIES</code></a> target property and may be overridden by setting the property directly. When <a class="reference internal" href="../policy/cmp0022.html#policy:CMP0022" title="CMP0022" id="index-0-policy:CMP0022"><code>CMP0022</code></a> is not set to <code>NEW</code>, transitive linking is built in but may be overridden by the <a class="reference internal" href="../prop_tgt/link_interface_libraries.html#prop_tgt:LINK_INTERFACE_LIBRARIES" title="LINK_INTERFACE_LIBRARIES" id="index-0-prop_tgt:LINK_INTERFACE_LIBRARIES"><code>LINK_INTERFACE_LIBRARIES</code></a> property. Calls to other signatures of this command may set the property making any libraries linked exclusively by this signature private.</p>   <h2>Libraries for a Target and/or its Dependents (Legacy)</h2> <pre data-language="cmake">target_link_libraries(&lt;target&gt;
                      &lt;LINK_PRIVATE|LINK_PUBLIC&gt; &lt;lib&gt;...
                     [&lt;LINK_PRIVATE|LINK_PUBLIC&gt; &lt;lib&gt;...]...)
</pre> <p>The <code>LINK_PUBLIC</code> and <code>LINK_PRIVATE</code> modes can be used to specify both the link dependencies and the link interface in one command.</p> <p>This signature is for compatibility only. Prefer the <code>PUBLIC</code> or <code>PRIVATE</code> keywords instead.</p> <p>Libraries and targets following <code>LINK_PUBLIC</code> are linked to, and are made part of the <a class="reference internal" href="../prop_tgt/interface_link_libraries.html#prop_tgt:INTERFACE_LINK_LIBRARIES" title="INTERFACE_LINK_LIBRARIES" id="index-1-prop_tgt:INTERFACE_LINK_LIBRARIES"><code>INTERFACE_LINK_LIBRARIES</code></a>. If policy <a class="reference internal" href="../policy/cmp0022.html#policy:CMP0022" title="CMP0022" id="index-1-policy:CMP0022"><code>CMP0022</code></a> is not <code>NEW</code>, they are also made part of the <a class="reference internal" href="../prop_tgt/link_interface_libraries.html#prop_tgt:LINK_INTERFACE_LIBRARIES" title="LINK_INTERFACE_LIBRARIES" id="index-1-prop_tgt:LINK_INTERFACE_LIBRARIES"><code>LINK_INTERFACE_LIBRARIES</code></a>. Libraries and targets following <code>LINK_PRIVATE</code> are linked to, but are not made part of the <a class="reference internal" href="../prop_tgt/interface_link_libraries.html#prop_tgt:INTERFACE_LINK_LIBRARIES" title="INTERFACE_LINK_LIBRARIES" id="index-2-prop_tgt:INTERFACE_LINK_LIBRARIES"><code>INTERFACE_LINK_LIBRARIES</code></a> (or <a class="reference internal" href="../prop_tgt/link_interface_libraries.html#prop_tgt:LINK_INTERFACE_LIBRARIES" title="LINK_INTERFACE_LIBRARIES" id="index-2-prop_tgt:LINK_INTERFACE_LIBRARIES"><code>LINK_INTERFACE_LIBRARIES</code></a>).</p>   <h2>Libraries for Dependents Only (Legacy)</h2> <pre data-language="cmake">target_link_libraries(&lt;target&gt; LINK_INTERFACE_LIBRARIES &lt;item&gt;...)
</pre> <p>The <code>LINK_INTERFACE_LIBRARIES</code> mode appends the libraries to the <a class="reference internal" href="../prop_tgt/interface_link_libraries.html#prop_tgt:INTERFACE_LINK_LIBRARIES" title="INTERFACE_LINK_LIBRARIES" id="index-3-prop_tgt:INTERFACE_LINK_LIBRARIES"><code>INTERFACE_LINK_LIBRARIES</code></a> target property instead of using them for linking. If policy <a class="reference internal" href="../policy/cmp0022.html#policy:CMP0022" title="CMP0022" id="index-2-policy:CMP0022"><code>CMP0022</code></a> is not <code>NEW</code>, then this mode also appends libraries to the <a class="reference internal" href="../prop_tgt/link_interface_libraries.html#prop_tgt:LINK_INTERFACE_LIBRARIES" title="LINK_INTERFACE_LIBRARIES" id="index-3-prop_tgt:LINK_INTERFACE_LIBRARIES"><code>LINK_INTERFACE_LIBRARIES</code></a> and its per-configuration equivalent.</p> <p>This signature is for compatibility only. Prefer the <code>INTERFACE</code> mode instead.</p> <p>Libraries specified as <code>debug</code> are wrapped in a generator expression to correspond to debug builds. If policy <a class="reference internal" href="../policy/cmp0022.html#policy:CMP0022" title="CMP0022" id="index-3-policy:CMP0022"><code>CMP0022</code></a> is not <code>NEW</code>, the libraries are also appended to the <a class="reference internal" href="#" title="LINK_INTERFACE_LIBRARIES_&lt;CONFIG&gt;" id="index-0-prop_tgt:LINK_INTERFACE_LIBRARIES_&lt;CONFIG&gt;"><code>LINK_INTERFACE_LIBRARIES_DEBUG</code></a> property (or to the properties corresponding to configurations listed in the <a class="reference internal" href="../prop_gbl/debug_configurations.html#prop_gbl:DEBUG_CONFIGURATIONS" title="DEBUG_CONFIGURATIONS" id="index-1-prop_gbl:DEBUG_CONFIGURATIONS"><code>DEBUG_CONFIGURATIONS</code></a> global property if it is set). Libraries specified as <code>optimized</code> are appended to the <a class="reference internal" href="../prop_tgt/interface_link_libraries.html#prop_tgt:INTERFACE_LINK_LIBRARIES" title="INTERFACE_LINK_LIBRARIES" id="index-4-prop_tgt:INTERFACE_LINK_LIBRARIES"><code>INTERFACE_LINK_LIBRARIES</code></a> property. If policy <a class="reference internal" href="../policy/cmp0022.html#policy:CMP0022" title="CMP0022" id="index-4-policy:CMP0022"><code>CMP0022</code></a> is not <code>NEW</code>, they are also appended to the <a class="reference internal" href="../prop_tgt/link_interface_libraries.html#prop_tgt:LINK_INTERFACE_LIBRARIES" title="LINK_INTERFACE_LIBRARIES" id="index-4-prop_tgt:LINK_INTERFACE_LIBRARIES"><code>LINK_INTERFACE_LIBRARIES</code></a> property. Libraries specified as <code>general</code> (or without any keyword) are treated as if specified for both <code>debug</code> and <code>optimized</code>.</p>   <h2>Linking Object Libraries</h2> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.12.</span></p> </div> <p><a class="reference internal" href="../manual/cmake-buildsystem.7.html#object-libraries"><span class="std std-ref">Object Libraries</span></a> may be used as the <code>&lt;target&gt;</code> (first) argument of <code>target_link_libraries</code> to specify dependencies of their sources on other libraries. For example, the code</p> <pre data-language="cmake">add_library(A SHARED a.c)
target_compile_definitions(A PUBLIC A)

add_library(obj OBJECT obj.c)
target_compile_definitions(obj PUBLIC OBJ)
target_link_libraries(obj PUBLIC A)
</pre> <p>compiles <code>obj.c</code> with <code>-DA -DOBJ</code> and establishes usage requirements for <code>obj</code> that propagate to its dependents.</p> <p>Normal libraries and executables may link to <a class="reference internal" href="../manual/cmake-buildsystem.7.html#object-libraries"><span class="std std-ref">Object Libraries</span></a> to get their objects and usage requirements. Continuing the above example, the code</p> <pre data-language="cmake">add_library(B SHARED b.c)
target_link_libraries(B PUBLIC obj)
</pre> <p>compiles <code>b.c</code> with <code>-DA -DOBJ</code>, creates shared library <code>B</code> with object files from <code>b.c</code> and <code>obj.c</code>, and links <code>B</code> to <code>A</code>. Furthermore, the code</p> <pre data-language="cmake">add_executable(main main.c)
target_link_libraries(main B)
</pre> <p>compiles <code>main.c</code> with <code>-DA -DOBJ</code> and links executable <code>main</code> to <code>B</code> and <code>A</code>. The object library's usage requirements are propagated transitively through <code>B</code>, but its object files are not.</p> <p><a class="reference internal" href="../manual/cmake-buildsystem.7.html#object-libraries"><span class="std std-ref">Object Libraries</span></a> may "link" to other object libraries to get usage requirements, but since they do not have a link step nothing is done with their object files. Continuing from the above example, the code:</p> <pre data-language="cmake">add_library(obj2 OBJECT obj2.c)
target_link_libraries(obj2 PUBLIC obj)

add_executable(main2 main2.c)
target_link_libraries(main2 obj2)
</pre> <p>compiles <code>obj2.c</code> with <code>-DA -DOBJ</code>, creates executable <code>main2</code> with object files from <code>main2.c</code> and <code>obj2.c</code>, and links <code>main2</code> to <code>A</code>.</p> <p>In other words, when <a class="reference internal" href="../manual/cmake-buildsystem.7.html#object-libraries"><span class="std std-ref">Object Libraries</span></a> appear in a target's <a class="reference internal" href="../prop_tgt/interface_link_libraries.html#prop_tgt:INTERFACE_LINK_LIBRARIES" title="INTERFACE_LINK_LIBRARIES" id="index-5-prop_tgt:INTERFACE_LINK_LIBRARIES"><code>INTERFACE_LINK_LIBRARIES</code></a> property they will be treated as <a class="reference internal" href="../manual/cmake-buildsystem.7.html#interface-libraries"><span class="std std-ref">Interface Libraries</span></a>, but when they appear in a target's <a class="reference internal" href="../prop_tgt/link_libraries.html#prop_tgt:LINK_LIBRARIES" title="LINK_LIBRARIES" id="index-0-prop_tgt:LINK_LIBRARIES"><code>LINK_LIBRARIES</code></a> property their object files will be included in the link too.</p>  <h3 id="id1">Linking Object Libraries via <code>$&lt;TARGET_OBJECTS&gt;</code>
</h3> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.21.</span></p> </div> <p>The object files associated with an object library may be referenced by the <a class="reference internal" href="../manual/cmake-generator-expressions.7.html#genex:TARGET_OBJECTS" title="TARGET_OBJECTS" id="index-0-genex:TARGET_OBJECTS"><code>$&lt;TARGET_OBJECTS&gt;</code></a> generator expression. Such object files are placed on the link line <em>before</em> all libraries, regardless of their relative order. Additionally, an ordering dependency will be added to the build system to make sure the object library is up-to-date before the dependent target links. For example, the code</p> <pre data-language="cmake">add_library(obj3 OBJECT obj3.c)
target_compile_definitions(obj3 PUBLIC OBJ3)

add_executable(main3 main3.c)
target_link_libraries(main3 PRIVATE a3 $&lt;TARGET_OBJECTS:obj3&gt; b3)
</pre> <p>links executable <code>main3</code> with object files from <code>main3.c</code> and <code>obj3.c</code> followed by the <code>a3</code> and <code>b3</code> libraries. <code>main3.c</code> is <em>not</em> compiled with usage requirements from <code>obj3</code>, such as <code>-DOBJ3</code>.</p> <p>This approach can be used to achieve transitive inclusion of object files in link lines as usage requirements. Continuing the above example, the code</p> <pre data-language="cmake">add_library(iface_obj3 INTERFACE)
target_link_libraries(iface_obj3 INTERFACE obj3 $&lt;TARGET_OBJECTS:obj3&gt;)
</pre> <p>creates an interface library <code>iface_obj3</code> that forwards the <code>obj3</code> usage requirements and adds the <code>obj3</code> object files to dependents' link lines. The code</p> <pre data-language="cmake">add_executable(use_obj3 use_obj3.c)
target_link_libraries(use_obj3 PRIVATE iface_obj3)
</pre> <p>compiles <code>use_obj3.c</code> with <code>-DOBJ3</code> and links executable <code>use_obj3</code> with object files from <code>use_obj3.c</code> and <code>obj3.c</code>.</p> <p>This also works transitively through a static library. Since a static library does not link, it does not consume the object files from object libraries referenced this way. Instead, the object files become transitive link dependencies of the static library. Continuing the above example, the code</p> <pre data-language="cmake">add_library(static3 STATIC static3.c)
target_link_libraries(static3 PRIVATE iface_obj3)

add_executable(use_static3 use_static3.c)
target_link_libraries(use_static3 PRIVATE static3)
</pre> <p>compiles <code>static3.c</code> with <code>-DOBJ3</code> and creates <code>libstatic3.a</code> using only its own object file. <code>use_static3.c</code> is compiled <em>without</em> <code>-DOBJ3</code> because the usage requirement is not transitive through the private dependency of <code>static3</code>. However, the link dependencies of <code>static3</code> are propagated, including the <code>iface_obj3</code> reference to <code>$&lt;TARGET_OBJECTS:obj3&gt;</code>. The <code>use_static3</code> executable is created with object files from <code>use_static3.c</code> and <code>obj3.c</code>, and linked to library <code>libstatic3.a</code>.</p> <p>When using this approach, it is the project's responsibility to avoid linking multiple dependent binaries to <code>iface_obj3</code>, because they will all get the <code>obj3</code> object files on their link lines.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>Referencing <a class="reference internal" href="../manual/cmake-generator-expressions.7.html#genex:TARGET_OBJECTS" title="TARGET_OBJECTS" id="index-1-genex:TARGET_OBJECTS"><code>$&lt;TARGET_OBJECTS&gt;</code></a> in <code>target_link_libraries</code> calls worked in versions of CMake prior to 3.21 for some cases, but was not fully supported:</p> <ul class="simple"> <li>It did not place the object files before libraries on link lines.</li> <li>It did not add an ordering dependency on the object library.</li> <li>It did not work in Xcode with multiple architectures.</li> </ul> </div>    <h2>Cyclic Dependencies of Static Libraries</h2> <p>The library dependency graph is normally acyclic (a DAG), but in the case of mutually-dependent <code>STATIC</code> libraries CMake allows the graph to contain cycles (strongly connected components). When another target links to one of the libraries, CMake repeats the entire connected component. For example, the code</p> <pre data-language="cmake">add_library(A STATIC a.c)
add_library(B STATIC b.c)
target_link_libraries(A B)
target_link_libraries(B A)
add_executable(main main.c)
target_link_libraries(main A)
</pre> <p>links <code>main</code> to <code>A B A B</code>. While one repetition is usually sufficient, pathological object file and symbol arrangements can require more. One may handle such cases by using the <a class="reference internal" href="../prop_tgt/link_interface_multiplicity.html#prop_tgt:LINK_INTERFACE_MULTIPLICITY" title="LINK_INTERFACE_MULTIPLICITY" id="index-0-prop_tgt:LINK_INTERFACE_MULTIPLICITY"><code>LINK_INTERFACE_MULTIPLICITY</code></a> target property or by manually repeating the component in the last <code>target_link_libraries</code> call. However, if two archives are really so interdependent they should probably be combined into a single archive, perhaps by using <a class="reference internal" href="../manual/cmake-buildsystem.7.html#object-libraries"><span class="std std-ref">Object Libraries</span></a>.</p>   <h2>Creating Relocatable Packages</h2> <p>Note that it is not advisable to populate the <a class="reference internal" href="../prop_tgt/interface_link_libraries.html#prop_tgt:INTERFACE_LINK_LIBRARIES" title="INTERFACE_LINK_LIBRARIES" id="index-7-prop_tgt:INTERFACE_LINK_LIBRARIES"><code>INTERFACE_LINK_LIBRARIES</code></a> of a target with absolute paths to dependencies. That would hard-code into installed packages the library file paths for dependencies <strong>as found on the machine the package was made on</strong>.</p> <p>See the <a class="reference internal" href="../manual/cmake-packages.7.html#creating-relocatable-packages"><span class="std std-ref">Creating Relocatable Packages</span></a> section of the <a class="reference internal" href="../manual/cmake-packages.7.html#manual:cmake-packages(7)" title="cmake-packages(7)" id="index-0-manual:cmake-packages(7)"><code>cmake-packages(7)</code></a> manual for discussion of additional care that must be taken when specifying usage requirements while creating packages for redistribution.</p>   <h2>See Also</h2> <ul class="simple"> <li><a class="reference internal" href="target_compile_definitions.html#command:target_compile_definitions" title="target_compile_definitions" id="index-0-command:target_compile_definitions"><code>target_compile_definitions()</code></a></li> <li><a class="reference internal" href="target_compile_features.html#command:target_compile_features" title="target_compile_features" id="index-0-command:target_compile_features"><code>target_compile_features()</code></a></li> <li><a class="reference internal" href="target_compile_options.html#command:target_compile_options" title="target_compile_options" id="index-0-command:target_compile_options"><code>target_compile_options()</code></a></li> <li><a class="reference internal" href="target_include_directories.html#command:target_include_directories" title="target_include_directories" id="index-0-command:target_include_directories"><code>target_include_directories()</code></a></li> <li><a class="reference internal" href="target_link_directories.html#command:target_link_directories" title="target_link_directories" id="index-0-command:target_link_directories"><code>target_link_directories()</code></a></li> <li><a class="reference internal" href="target_link_options.html#command:target_link_options" title="target_link_options" id="index-2-command:target_link_options"><code>target_link_options()</code></a></li> <li><a class="reference internal" href="target_precompile_headers.html#command:target_precompile_headers" title="target_precompile_headers" id="index-0-command:target_precompile_headers"><code>target_precompile_headers()</code></a></li> <li><a class="reference internal" href="target_sources.html#command:target_sources" title="target_sources" id="index-0-command:target_sources"><code>target_sources()</code></a></li> </ul>   <div class="_attribution">
  <p class="_attribution-p">
    &copy; 2000&ndash;2023 Kitware, Inc. and Contributors<br>Licensed under the BSD 3-clause License.<br>
    <a href="https://cmake.org/cmake/help/v3.26/command/target_link_libraries.html" class="_attribution-link">https://cmake.org/cmake/help/v3.26/command/target_link_libraries.html</a>
  </p>
</div>
