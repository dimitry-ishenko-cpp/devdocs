<h1 id="command:add_custom_target">add_custom_target</h1> <p>Add a target with no output so it will always be built.</p> <pre data-language="cmake">add_custom_target(Name [ALL] [command1 [args1...]]
                  [COMMAND command2 [args2...] ...]
                  [DEPENDS depend depend depend ... ]
                  [BYPRODUCTS [files...]]
                  [WORKING_DIRECTORY dir]
                  [COMMENT comment]
                  [JOB_POOL job_pool]
                  [VERBATIM] [USES_TERMINAL]
                  [COMMAND_EXPAND_LISTS]
                  [SOURCES src1 [src2...]])
</pre> <p>Adds a target with the given name that executes the given commands. The target has no output file and is <em>always considered out of date</em> even if the commands try to create a file with the name of the target. Use the <a class="reference internal" href="add_custom_command.html#command:add_custom_command" title="add_custom_command" id="index-0-command:add_custom_command"><code>add_custom_command()</code></a> command to generate a file with dependencies. By default nothing depends on the custom target. Use the <a class="reference internal" href="add_dependencies.html#command:add_dependencies" title="add_dependencies" id="index-0-command:add_dependencies"><code>add_dependencies()</code></a> command to add dependencies to or from other targets.</p> <p>The options are:</p> <dl> <dt>
<code>ALL</code> </dt>
<dd>
<p>Indicate that this target should be added to the default build target so that it will be run every time (the command cannot be called <code>ALL</code>).</p> </dd> <dt>
<code>BYPRODUCTS</code> </dt>
<dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3.2.</span></p> </div> <p>Specify the files the command is expected to produce but whose modification time may or may not be updated on subsequent builds. If a byproduct name is a relative path it will be interpreted relative to the build tree directory corresponding to the current source directory. Each byproduct file will be marked with the <a class="reference internal" href="../prop_sf/generated.html#prop_sf:GENERATED" title="GENERATED" id="index-0-prop_sf:GENERATED"><code>GENERATED</code></a> source file property automatically.</p> <p><em>See policy</em> <a class="reference internal" href="../policy/cmp0058.html#policy:CMP0058" title="CMP0058" id="index-0-policy:CMP0058"><code>CMP0058</code></a> <em>for the motivation behind this feature.</em></p> <p>Explicit specification of byproducts is supported by the <a class="reference internal" href="https://cmake.org/cmake/help/v3.26/generator/Ninja.html#generator:Ninja" title="Ninja" id="index-0-generator:Ninja"><code>Ninja</code></a> generator to tell the <code>ninja</code> build tool how to regenerate byproducts when they are missing. It is also useful when other build rules (e.g. custom commands) depend on the byproducts. Ninja requires a build rule for any generated file on which another rule depends even if there are order-only dependencies to ensure the byproducts will be available before their dependents build.</p> <p>The <a class="reference internal" href="../manual/cmake-generators.7.html#makefile-generators"><span class="std std-ref">Makefile Generators</span></a> will remove <code>BYPRODUCTS</code> and other <a class="reference internal" href="../prop_sf/generated.html#prop_sf:GENERATED" title="GENERATED" id="index-1-prop_sf:GENERATED"><code>GENERATED</code></a> files during <code>make clean</code>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.20: </span>Arguments to <code>BYPRODUCTS</code> may use a restricted set of <a class="reference internal" href="../manual/cmake-generator-expressions.7.html#manual:cmake-generator-expressions(7)" title="cmake-generator-expressions(7)" id="index-0-manual:cmake-generator-expressions(7)"><code>generator expressions</code></a>. <a class="reference internal" href="../manual/cmake-generator-expressions.7.html#target-dependent-queries"><span class="std std-ref">Target-dependent expressions</span></a> are not permitted.</p> </div> </dd> <dt>
<code>COMMAND</code> </dt>
<dd>
<p>Specify the command-line(s) to execute at build time. If more than one <code>COMMAND</code> is specified they will be executed in order, but <em>not</em> necessarily composed into a stateful shell or batch script. (To run a full script, use the <a class="reference internal" href="configure_file.html#command:configure_file" title="configure_file" id="index-0-command:configure_file"><code>configure_file()</code></a> command or the <a class="reference internal" href="file.html#command:file" title="file" id="index-0-command:file"><code>file(GENERATE)</code></a> command to create it, and then specify a <code>COMMAND</code> to launch it.)</p> <p>If <code>COMMAND</code> specifies an executable target name (created by the <a class="reference internal" href="add_executable.html#command:add_executable" title="add_executable" id="index-0-command:add_executable"><code>add_executable()</code></a> command), it will automatically be replaced by the location of the executable created at build time if either of the following is true:</p> <ul> <li>The target is not being cross-compiled (i.e. the <a class="reference internal" href="../variable/cmake_crosscompiling.html#variable:CMAKE_CROSSCOMPILING" title="CMAKE_CROSSCOMPILING" id="index-0-variable:CMAKE_CROSSCOMPILING"><code>CMAKE_CROSSCOMPILING</code></a> variable is not set to true).</li> <li>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3.6: </span>The target is being cross-compiled and an emulator is provided (i.e. its <a class="reference internal" href="../prop_tgt/crosscompiling_emulator.html#prop_tgt:CROSSCOMPILING_EMULATOR" title="CROSSCOMPILING_EMULATOR" id="index-0-prop_tgt:CROSSCOMPILING_EMULATOR"><code>CROSSCOMPILING_EMULATOR</code></a> target property is set). In this case, the contents of <a class="reference internal" href="../prop_tgt/crosscompiling_emulator.html#prop_tgt:CROSSCOMPILING_EMULATOR" title="CROSSCOMPILING_EMULATOR" id="index-1-prop_tgt:CROSSCOMPILING_EMULATOR"><code>CROSSCOMPILING_EMULATOR</code></a> will be prepended to the command before the location of the target executable.</p> </div> </li> </ul> <p>If neither of the above conditions are met, it is assumed that the command name is a program to be found on the <code>PATH</code> at build time.</p> <p>Arguments to <code>COMMAND</code> may use <a class="reference internal" href="../manual/cmake-generator-expressions.7.html#manual:cmake-generator-expressions(7)" title="cmake-generator-expressions(7)" id="index-1-manual:cmake-generator-expressions(7)"><code>generator expressions</code></a>. Use the <a class="reference internal" href="../manual/cmake-generator-expressions.7.html#genex:TARGET_FILE" title="TARGET_FILE" id="index-0-genex:TARGET_FILE"><code>TARGET_FILE</code></a> generator expression to refer to the location of a target later in the command line (i.e. as a command argument rather than as the command to execute).</p> <p>Whenever one of the following target based generator expressions are used as a command to execute or is mentioned in a command argument, a target-level dependency will be added automatically so that the mentioned target will be built before this custom target (see policy <a class="reference internal" href="../policy/cmp0112.html#policy:CMP0112" title="CMP0112" id="index-0-policy:CMP0112"><code>CMP0112</code></a>).</p>  <ul class="simple"> <li><code>TARGET_FILE</code></li> <li><code>TARGET_LINKER_FILE</code></li> <li><code>TARGET_SONAME_FILE</code></li> <li><code>TARGET_PDB_FILE</code></li> </ul>  <p>The command and arguments are optional and if not specified an empty target will be created.</p> </dd> <dt>
<code>COMMENT</code> </dt>
<dd>
<p>Display the given message before the commands are executed at build time.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.26: </span>Arguments to <code>COMMENT</code> may use <a class="reference internal" href="../manual/cmake-generator-expressions.7.html#manual:cmake-generator-expressions(7)" title="cmake-generator-expressions(7)" id="index-2-manual:cmake-generator-expressions(7)"><code>generator expressions</code></a>.</p> </div> </dd> <dt>
<code>DEPENDS</code> </dt>
<dd>
<p>Reference files and outputs of custom commands created with <a class="reference internal" href="add_custom_command.html#command:add_custom_command" title="add_custom_command" id="index-1-command:add_custom_command"><code>add_custom_command()</code></a> command calls in the same directory (<code>CMakeLists.txt</code> file). They will be brought up to date when the target is built.</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.16: </span>A target-level dependency is added if any dependency is a byproduct of a target or any of its build events in the same directory to ensure the byproducts will be available before this target is built.</p> </div> <p>Use the <a class="reference internal" href="add_dependencies.html#command:add_dependencies" title="add_dependencies" id="index-1-command:add_dependencies"><code>add_dependencies()</code></a> command to add dependencies on other targets.</p> </dd> <dt>
<code>COMMAND_EXPAND_LISTS</code> </dt>
<dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3.8.</span></p> </div> <p>Lists in <code>COMMAND</code> arguments will be expanded, including those created with <a class="reference internal" href="../manual/cmake-generator-expressions.7.html#manual:cmake-generator-expressions(7)" title="cmake-generator-expressions(7)" id="index-3-manual:cmake-generator-expressions(7)"><code>generator expressions</code></a>, allowing <code>COMMAND</code> arguments such as <code>${CC} "-I$&lt;JOIN:$&lt;TARGET_PROPERTY:foo,INCLUDE_DIRECTORIES&gt;,;-I&gt;" foo.cc</code> to be properly expanded.</p> </dd> <dt>
<code>JOB_POOL</code> </dt>
<dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3.15.</span></p> </div> <p>Specify a <a class="reference internal" href="../prop_gbl/job_pools.html#prop_gbl:JOB_POOLS" title="JOB_POOLS" id="index-0-prop_gbl:JOB_POOLS"><code>pool</code></a> for the <a class="reference internal" href="https://cmake.org/cmake/help/v3.26/generator/Ninja.html#generator:Ninja" title="Ninja" id="index-1-generator:Ninja"><code>Ninja</code></a> generator. Incompatible with <code>USES_TERMINAL</code>, which implies the <code>console</code> pool. Using a pool that is not defined by <a class="reference internal" href="../prop_gbl/job_pools.html#prop_gbl:JOB_POOLS" title="JOB_POOLS" id="index-1-prop_gbl:JOB_POOLS"><code>JOB_POOLS</code></a> causes an error by ninja at build time.</p> </dd> <dt>
<code>SOURCES</code> </dt>
<dd>
<p>Specify additional source files to be included in the custom target. Specified source files will be added to IDE project files for convenience in editing even if they have no build rules.</p> </dd> <dt>
<code>VERBATIM</code> </dt>
<dd>
<p>All arguments to the commands will be escaped properly for the build tool so that the invoked command receives each argument unchanged. Note that one level of escapes is still used by the CMake language processor before <code>add_custom_target</code> even sees the arguments. Use of <code>VERBATIM</code> is recommended as it enables correct behavior. When <code>VERBATIM</code> is not given the behavior is platform specific because there is no protection of tool-specific special characters.</p> </dd> <dt>
<code>USES_TERMINAL</code> </dt>
<dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3.2.</span></p> </div> <p>The command will be given direct access to the terminal if possible. With the <a class="reference internal" href="https://cmake.org/cmake/help/v3.26/generator/Ninja.html#generator:Ninja" title="Ninja" id="index-2-generator:Ninja"><code>Ninja</code></a> generator, this places the command in the <code>console</code> <a class="reference internal" href="../prop_gbl/job_pools.html#prop_gbl:JOB_POOLS" title="JOB_POOLS" id="index-2-prop_gbl:JOB_POOLS"><code>pool</code></a>.</p> </dd> <dt>
<code>WORKING_DIRECTORY</code> </dt>
<dd>
<p>Execute the command with the given current working directory. If it is a relative path it will be interpreted relative to the build tree directory corresponding to the current source directory.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.13: </span>Arguments to <code>WORKING_DIRECTORY</code> may use <a class="reference internal" href="../manual/cmake-generator-expressions.7.html#manual:cmake-generator-expressions(7)" title="cmake-generator-expressions(7)" id="index-4-manual:cmake-generator-expressions(7)"><code>generator expressions</code></a>.</p> </div> </dd> </dl>  <h2>Ninja Multi-Config</h2> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.20: </span><code>add_custom_target</code> supports the <a class="reference internal" href="https://cmake.org/cmake/help/v3.26/generator/Ninja%20Multi-Config.html#generator:Ninja%20Multi-Config" title="Ninja Multi-Config" id="index-0-generator:Ninja Multi-Config"><code>Ninja Multi-Config</code></a> generator's cross-config capabilities. See the generator documentation for more information.</p> </div>   <h2>See Also</h2> <ul class="simple"> <li><a class="reference internal" href="add_custom_command.html#command:add_custom_command" title="add_custom_command" id="index-2-command:add_custom_command"><code>add_custom_command()</code></a></li> </ul>   <div class="_attribution">
  <p class="_attribution-p">
    &copy; 2000&ndash;2023 Kitware, Inc. and Contributors<br>Licensed under the BSD 3-clause License.<br>
    <a href="https://cmake.org/cmake/help/v3.26/command/add_custom_target.html" class="_attribution-link">https://cmake.org/cmake/help/v3.26/command/add_custom_target.html</a>
  </p>
</div>
