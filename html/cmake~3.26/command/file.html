<h1 id="command:file">file</h1> <p>File manipulation command.</p> <p>This command is dedicated to file and path manipulation requiring access to the filesystem.</p> <p>For other path manipulation, handling only syntactic aspects, have a look at <a class="reference internal" href="cmake_path.html#command:cmake_path" title="cmake_path" id="index-0-command:cmake_path"><code>cmake_path()</code></a> command.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>The sub-commands <a class="reference internal" href="#relative-path">RELATIVE_PATH</a>, <a class="reference internal" href="#to-cmake-path">TO_CMAKE_PATH</a> and <a class="reference internal" href="#to-native-path">TO_NATIVE_PATH</a> has been superseded, respectively, by sub-commands <a class="reference internal" href="cmake_path.html#cmake-path-relative-path"><span class="std std-ref">RELATIVE_PATH</span></a>, <a class="reference internal" href="cmake_path.html#cmake-path-to-cmake-path-list"><span class="std std-ref">CONVERT ... TO_CMAKE_PATH_LIST</span></a> and <a class="reference internal" href="cmake_path.html#cmake-path-to-native-path-list"><span class="std std-ref">CONVERT ... TO_NATIVE_PATH_LIST</span></a> of <a class="reference internal" href="cmake_path.html#command:cmake_path" title="cmake_path" id="index-1-command:cmake_path"><code>cmake_path()</code></a> command.</p> </div>  <h2>Synopsis</h2> <pre class="literal-block"><a class="reference internal" href="#reading">Reading</a>
  file(<a class="reference internal" href="#read">READ</a> &lt;filename&gt; &lt;out-var&gt; [...])
  file(<a class="reference internal" href="#strings">STRINGS</a> &lt;filename&gt; &lt;out-var&gt; [...])
  file(<a class="reference internal" href="#hash">&lt;HASH&gt;</a> &lt;filename&gt; &lt;out-var&gt;)
  file(<a class="reference internal" href="#timestamp">TIMESTAMP</a> &lt;filename&gt; &lt;out-var&gt; [...])
  file(<a class="reference internal" href="#get-runtime-dependencies">GET_RUNTIME_DEPENDENCIES</a> [...])

<a class="reference internal" href="#writing">Writing</a>
  file({<a class="reference internal" href="#write">WRITE</a> | <a class="reference internal" href="#append">APPEND</a>} &lt;filename&gt; &lt;content&gt;...)
  file({<a class="reference internal" href="#touch">TOUCH</a> | <a class="reference internal" href="#touch-nocreate">TOUCH_NOCREATE</a>} [&lt;file&gt;...])
  file(<a class="reference internal" href="#generate">GENERATE</a> OUTPUT &lt;output-file&gt; [...])
  file(<a class="reference internal" href="#configure">CONFIGURE</a> OUTPUT &lt;output-file&gt; CONTENT &lt;content&gt; [...])

<a class="reference internal" href="#filesystem">Filesystem</a>
  file({<a class="reference internal" href="#glob">GLOB</a> | <a class="reference internal" href="#glob-recurse">GLOB_RECURSE</a>} &lt;out-var&gt; [...] [&lt;globbing-expr&gt;...])
  file(<a class="reference internal" href="#make-directory">MAKE_DIRECTORY</a> [&lt;dir&gt;...])
  file({<a class="reference internal" href="#remove">REMOVE</a> | <a class="reference internal" href="#remove-recurse">REMOVE_RECURSE</a> } [&lt;files&gt;...])
  file(<a class="reference internal" href="#rename">RENAME</a> &lt;oldname&gt; &lt;newname&gt; [...])
  file(<a class="reference internal" href="#copy-file">COPY_FILE</a> &lt;oldname&gt; &lt;newname&gt; [...])
  file({<a class="reference internal" href="#copy">COPY</a> | <a class="reference internal" href="#install">INSTALL</a>} &lt;file&gt;... DESTINATION &lt;dir&gt; [...])
  file(<a class="reference internal" href="#size">SIZE</a> &lt;filename&gt; &lt;out-var&gt;)
  file(<a class="reference internal" href="#read-symlink">READ_SYMLINK</a> &lt;linkname&gt; &lt;out-var&gt;)
  file(<a class="reference internal" href="#create-link">CREATE_LINK</a> &lt;original&gt; &lt;linkname&gt; [...])
  file(<a class="reference internal" href="#chmod">CHMOD</a> &lt;files&gt;... &lt;directories&gt;... PERMISSIONS &lt;permissions&gt;... [...])
  file(<a class="reference internal" href="#chmod-recurse">CHMOD_RECURSE</a> &lt;files&gt;... &lt;directories&gt;... PERMISSIONS &lt;permissions&gt;... [...])

<a class="reference internal" href="#path-conversion">Path Conversion</a>
  file(<a class="reference internal" href="#real-path">REAL_PATH</a> &lt;path&gt; &lt;out-var&gt; [BASE_DIRECTORY &lt;dir&gt;] [EXPAND_TILDE])
  file(<a class="reference internal" href="#relative-path">RELATIVE_PATH</a> &lt;out-var&gt; &lt;directory&gt; &lt;file&gt;)
  file({<a class="reference internal" href="#to-cmake-path">TO_CMAKE_PATH</a> | <a class="reference internal" href="#to-native-path">TO_NATIVE_PATH</a>} &lt;path&gt; &lt;out-var&gt;)

<a class="reference internal" href="#transfer">Transfer</a>
  file(<a class="reference internal" href="#download">DOWNLOAD</a> &lt;url&gt; [&lt;file&gt;] [...])
  file(<a class="reference internal" href="#upload">UPLOAD</a> &lt;file&gt; &lt;url&gt; [...])

<a class="reference internal" href="#locking">Locking</a>
  file(<a class="reference internal" href="#lock">LOCK</a> &lt;path&gt; [...])

<a class="reference internal" href="#archiving">Archiving</a>
  file(<a class="reference internal" href="#archive-create">ARCHIVE_CREATE</a> OUTPUT &lt;archive&gt; PATHS &lt;paths&gt;... [...])
  file(<a class="reference internal" href="#archive-extract">ARCHIVE_EXTRACT</a> INPUT &lt;archive&gt; [...])</pre>   <h2>Reading</h2> <pre data-language="cmake">file(READ &lt;filename&gt; &lt;variable&gt;
     [OFFSET &lt;offset&gt;] [LIMIT &lt;max-in&gt;] [HEX])
</pre> <p>Read content from a file called <code>&lt;filename&gt;</code> and store it in a <code>&lt;variable&gt;</code>. Optionally start from the given <code>&lt;offset&gt;</code> and read at most <code>&lt;max-in&gt;</code> bytes. The <code>HEX</code> option causes data to be converted to a hexadecimal representation (useful for binary data). If the <code>HEX</code> option is specified, letters in the output (<code>a</code> through <code>f</code>) are in lowercase.</p> <pre data-language="cmake">file(STRINGS &lt;filename&gt; &lt;variable&gt; [&lt;options&gt;...])
</pre> <p>Parse a list of ASCII strings from <code>&lt;filename&gt;</code> and store it in <code>&lt;variable&gt;</code>. Binary data in the file are ignored. Carriage return (<code>\r</code>, CR) characters are ignored. The options are:</p> <dl> <dt>
<code>LENGTH_MAXIMUM &lt;max-len&gt;</code> </dt>
<dd>
<p>Consider only strings of at most a given length.</p> </dd> <dt>
<code>LENGTH_MINIMUM &lt;min-len&gt;</code> </dt>
<dd>
<p>Consider only strings of at least a given length.</p> </dd> <dt>
<code>LIMIT_COUNT &lt;max-num&gt;</code> </dt>
<dd>
<p>Limit the number of distinct strings to be extracted.</p> </dd> <dt>
<code>LIMIT_INPUT &lt;max-in&gt;</code> </dt>
<dd>
<p>Limit the number of input bytes to read from the file.</p> </dd> <dt>
<code>LIMIT_OUTPUT &lt;max-out&gt;</code> </dt>
<dd>
<p>Limit the number of total bytes to store in the <code>&lt;variable&gt;</code>.</p> </dd> <dt>
<code>NEWLINE_CONSUME</code> </dt>
<dd>
<p>Treat newline characters (<code>\n</code>, LF) as part of string content instead of terminating at them.</p> </dd> <dt>
<code>NO_HEX_CONVERSION</code> </dt>
<dd>
<p>Intel Hex and Motorola S-record files are automatically converted to binary while reading unless this option is given.</p> </dd> <dt>
<code>REGEX &lt;regex&gt;</code> </dt>
<dd>
<p>Consider only strings that match the given regular expression, as described under <a class="reference internal" href="string.html#regex-specification"><span class="std std-ref">string(REGEX)</span></a>.</p> </dd> <dt>
<code>ENCODING &lt;encoding-type&gt;</code> </dt>
<dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3.1.</span></p> </div> <p>Consider strings of a given encoding. Currently supported encodings are: <code>UTF-8</code>, <code>UTF-16LE</code>, <code>UTF-16BE</code>, <code>UTF-32LE</code>, <code>UTF-32BE</code>. If the <code>ENCODING</code> option is not provided and the file has a Byte Order Mark, the <code>ENCODING</code> option will be defaulted to respect the Byte Order Mark.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.2: </span>Added the <code>UTF-16LE</code>, <code>UTF-16BE</code>, <code>UTF-32LE</code>, <code>UTF-32BE</code> encodings.</p> </div> </dd> </dl> <p>For example, the code</p> <pre data-language="cmake">file(STRINGS myfile.txt myfile)
</pre> <p>stores a list in the variable <code>myfile</code> in which each item is a line from the input file.</p> <pre data-language="cmake">file(&lt;HASH&gt; &lt;filename&gt; &lt;variable&gt;)
</pre> <p>Compute a cryptographic hash of the content of <code>&lt;filename&gt;</code> and store it in a <code>&lt;variable&gt;</code>. The supported <code>&lt;HASH&gt;</code> algorithm names are those listed by the <a class="reference internal" href="string.html#supported-hash-algorithms"><span class="std std-ref">string(&lt;HASH&gt;)</span></a> command.</p> <pre data-language="cmake">file(TIMESTAMP &lt;filename&gt; &lt;variable&gt; [&lt;format&gt;] [UTC])
</pre> <p>Compute a string representation of the modification time of <code>&lt;filename&gt;</code> and store it in <code>&lt;variable&gt;</code>. Should the command be unable to obtain a timestamp variable will be set to the empty string ("").</p> <p>See the <a class="reference internal" href="string.html#command:string" title="string" id="index-0-command:string"><code>string(TIMESTAMP)</code></a> command for documentation of the <code>&lt;format&gt;</code> and <code>UTC</code> options.</p> <pre data-language="cmake">file(GET_RUNTIME_DEPENDENCIES
  [RESOLVED_DEPENDENCIES_VAR &lt;deps_var&gt;]
  [UNRESOLVED_DEPENDENCIES_VAR &lt;unresolved_deps_var&gt;]
  [CONFLICTING_DEPENDENCIES_PREFIX &lt;conflicting_deps_prefix&gt;]
  [EXECUTABLES [&lt;executable_files&gt;...]]
  [LIBRARIES [&lt;library_files&gt;...]]
  [MODULES [&lt;module_files&gt;...]]
  [DIRECTORIES [&lt;directories&gt;...]]
  [BUNDLE_EXECUTABLE &lt;bundle_executable_file&gt;]
  [PRE_INCLUDE_REGEXES [&lt;regexes&gt;...]]
  [PRE_EXCLUDE_REGEXES [&lt;regexes&gt;...]]
  [POST_INCLUDE_REGEXES [&lt;regexes&gt;...]]
  [POST_EXCLUDE_REGEXES [&lt;regexes&gt;...]]
  [POST_INCLUDE_FILES [&lt;files&gt;...]]
  [POST_EXCLUDE_FILES [&lt;files&gt;...]]
  )
</pre> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.16.</span></p> </div> <p>Recursively get the list of libraries depended on by the given files.</p> <p>Please note that this sub-command is not intended to be used in project mode. It is intended for use at install time, either from code generated by the <a class="reference internal" href="install.html#command:install" title="install" id="index-0-command:install"><code>install(RUNTIME_DEPENDENCY_SET)</code></a> command, or from code provided by the project via <a class="reference internal" href="install.html#command:install" title="install" id="index-1-command:install"><code>install(CODE)</code></a> or <a class="reference internal" href="install.html#command:install" title="install" id="index-2-command:install"><code>install(SCRIPT)</code></a>. For example:</p> <pre data-language="cmake">install(CODE [[
  file(GET_RUNTIME_DEPENDENCIES
    # ...
    )
  ]])
</pre> <p>The arguments are as follows:</p> <dl class="simple"> <dt>
<code>RESOLVED_DEPENDENCIES_VAR &lt;deps_var&gt;</code> </dt>
<dd>
<p>Name of the variable in which to store the list of resolved dependencies.</p> </dd> <dt>
<code>UNRESOLVED_DEPENDENCIES_VAR &lt;unresolved_deps_var&gt;</code> </dt>
<dd>
<p>Name of the variable in which to store the list of unresolved dependencies. If this variable is not specified, and there are any unresolved dependencies, an error is issued.</p> </dd> <dt>
<code>CONFLICTING_DEPENDENCIES_PREFIX &lt;conflicting_deps_prefix&gt;</code> </dt>
<dd>
<p>Variable prefix in which to store conflicting dependency information. Dependencies are conflicting if two files with the same name are found in two different directories. The list of filenames that conflict are stored in <code>&lt;conflicting_deps_prefix&gt;_FILENAMES</code>. For each filename, the list of paths that were found for that filename are stored in <code>&lt;conflicting_deps_prefix&gt;_&lt;filename&gt;</code>.</p> </dd> <dt>
<code>EXECUTABLES &lt;executable_files&gt;</code> </dt>
<dd>
<p>List of executable files to read for dependencies. These are executables that are typically created with <a class="reference internal" href="add_executable.html#command:add_executable" title="add_executable" id="index-0-command:add_executable"><code>add_executable()</code></a>, but they do not have to be created by CMake. On Apple platforms, the paths to these files determine the value of <code>@executable_path</code> when recursively resolving the libraries. Specifying any kind of library (<code>STATIC</code>, <code>MODULE</code>, or <code>SHARED</code>) here will result in undefined behavior.</p> </dd> <dt>
<code>LIBRARIES &lt;library_files&gt;</code> </dt>
<dd>
<p>List of library files to read for dependencies. These are libraries that are typically created with <a class="reference internal" href="add_library.html#command:add_library" title="add_library" id="index-0-command:add_library"><code>add_library(SHARED)</code></a>, but they do not have to be created by CMake. Specifying <code>STATIC</code> libraries, <code>MODULE</code> libraries, or executables here will result in undefined behavior.</p> </dd> <dt>
<code>MODULES &lt;module_files&gt;</code> </dt>
<dd>
<p>List of loadable module files to read for dependencies. These are modules that are typically created with <a class="reference internal" href="add_library.html#command:add_library" title="add_library" id="index-1-command:add_library"><code>add_library(MODULE)</code></a>, but they do not have to be created by CMake. They are typically used by calling <code>dlopen()</code> at runtime rather than linked at link time with <code>ld -l</code>. Specifying <code>STATIC</code> libraries, <code>SHARED</code> libraries, or executables here will result in undefined behavior.</p> </dd> <dt>
<code>DIRECTORIES &lt;directories&gt;</code> </dt>
<dd>
<p>List of additional directories to search for dependencies. On Linux platforms, these directories are searched if the dependency is not found in any of the other usual paths. If it is found in such a directory, a warning is issued, because it means that the file is incomplete (it does not list all of the directories that contain its dependencies). On Windows platforms, these directories are searched if the dependency is not found in any of the other search paths, but no warning is issued, because searching other paths is a normal part of Windows dependency resolution. On Apple platforms, this argument has no effect.</p> </dd> <dt>
<code>BUNDLE_EXECUTABLE &lt;bundle_executable_file&gt;</code> </dt>
<dd>
<p>Executable to treat as the "bundle executable" when resolving libraries. On Apple platforms, this argument determines the value of <code>@executable_path</code> when recursively resolving libraries for <code>LIBRARIES</code> and <code>MODULES</code> files. It has no effect on <code>EXECUTABLES</code> files. On other platforms, it has no effect. This is typically (but not always) one of the executables in the <code>EXECUTABLES</code> argument which designates the "main" executable of the package.</p> </dd> </dl> <p>The following arguments specify filters for including or excluding libraries to be resolved. See below for a full description of how they work.</p> <dl> <dt>
<code>PRE_INCLUDE_REGEXES &lt;regexes&gt;</code> </dt>
<dd>
<p>List of pre-include regexes through which to filter the names of not-yet-resolved dependencies.</p> </dd> <dt>
<code>PRE_EXCLUDE_REGEXES &lt;regexes&gt;</code> </dt>
<dd>
<p>List of pre-exclude regexes through which to filter the names of not-yet-resolved dependencies.</p> </dd> <dt>
<code>POST_INCLUDE_REGEXES &lt;regexes&gt;</code> </dt>
<dd>
<p>List of post-include regexes through which to filter the names of resolved dependencies.</p> </dd> <dt>
<code>POST_EXCLUDE_REGEXES &lt;regexes&gt;</code> </dt>
<dd>
<p>List of post-exclude regexes through which to filter the names of resolved dependencies.</p> </dd> <dt>
<code>POST_INCLUDE_FILES &lt;files&gt;</code> </dt>
<dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3.21.</span></p> </div> <p>List of post-include filenames through which to filter the names of resolved dependencies. Symlinks are resolved when attempting to match these filenames.</p> </dd> <dt>
<code>POST_EXCLUDE_FILES &lt;files&gt;</code> </dt>
<dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3.21.</span></p> </div> <p>List of post-exclude filenames through which to filter the names of resolved dependencies. Symlinks are resolved when attempting to match these filenames.</p> </dd> </dl> <p>These arguments can be used to exclude unwanted system libraries when resolving the dependencies, or to include libraries from a specific directory. The filtering works as follows:</p> <ol class="arabic simple"> <li>If the not-yet-resolved dependency matches any of the <code>PRE_INCLUDE_REGEXES</code>, steps 2 and 3 are skipped, and the dependency resolution proceeds to step 4.</li> <li>If the not-yet-resolved dependency matches any of the <code>PRE_EXCLUDE_REGEXES</code>, dependency resolution stops for that dependency.</li> <li>Otherwise, dependency resolution proceeds.</li> <li>
<code>file(GET_RUNTIME_DEPENDENCIES)</code> searches for the dependency according to the linking rules of the platform (see below).</li> <li>If the dependency is found, and its full path matches one of the <code>POST_INCLUDE_REGEXES</code> or <code>POST_INCLUDE_FILES</code>, the full path is added to the resolved dependencies, and <code>file(GET_RUNTIME_DEPENDENCIES)</code> recursively resolves that library's own dependencies. Otherwise, resolution proceeds to step 6.</li> <li>If the dependency is found, but its full path matches one of the <code>POST_EXCLUDE_REGEXES</code> or <code>POST_EXCLUDE_FILES</code>, it is not added to the resolved dependencies, and dependency resolution stops for that dependency.</li> <li>If the dependency is found, and its full path does not match either <code>POST_INCLUDE_REGEXES</code>, <code>POST_INCLUDE_FILES</code>, <code>POST_EXCLUDE_REGEXES</code>, or <code>POST_EXCLUDE_FILES</code>, the full path is added to the resolved dependencies, and <code>file(GET_RUNTIME_DEPENDENCIES)</code> recursively resolves that library's own dependencies.</li> </ol> <p>Different platforms have different rules for how dependencies are resolved. These specifics are described here.</p> <p>On Linux platforms, library resolution works as follows:</p> <ol class="arabic simple"> <li>If the depending file does not have any <code>RUNPATH</code> entries, and the library exists in one of the depending file's <code>RPATH</code> entries, or its parents', in that order, the dependency is resolved to that file.</li> <li>Otherwise, if the depending file has any <code>RUNPATH</code> entries, and the library exists in one of those entries, the dependency is resolved to that file.</li> <li>Otherwise, if the library exists in one of the directories listed by <code>ldconfig</code>, the dependency is resolved to that file.</li> <li>Otherwise, if the library exists in one of the <code>DIRECTORIES</code> entries, the dependency is resolved to that file. In this case, a warning is issued, because finding a file in one of the <code>DIRECTORIES</code> means that the depending file is not complete (it does not list all the directories from which it pulls dependencies).</li> <li>Otherwise, the dependency is unresolved.</li> </ol> <p>On Windows platforms, library resolution works as follows:</p> <ol class="arabic"> <li>
<p>The dependent DLL name is converted to lowercase. Windows DLL names are case-insensitive, and some linkers mangle the case of the DLL dependency names. However, this makes it more difficult for <code>PRE_INCLUDE_REGEXES</code>, <code>PRE_EXCLUDE_REGEXES</code>, <code>POST_INCLUDE_REGEXES</code>, and <code>POST_EXCLUDE_REGEXES</code> to properly filter DLL names - every regex would have to check for both uppercase and lowercase letters. For example:</p> <pre data-language="cmake">file(GET_RUNTIME_DEPENDENCIES
  # ...
  PRE_INCLUDE_REGEXES "^[Mm][Yy][Ll][Ii][Bb][Rr][Aa][Rr][Yy]\\.[Dd][Ll][Ll]$"
  )
</pre> <p>Converting the DLL name to lowercase allows the regexes to only match lowercase names, thus simplifying the regex. For example:</p> <pre data-language="cmake">file(GET_RUNTIME_DEPENDENCIES
  # ...
  PRE_INCLUDE_REGEXES "^mylibrary\\.dll$"
  )
</pre> <p>This regex will match <code>mylibrary.dll</code> regardless of how it is cased, either on disk or in the depending file. (For example, it will match <code>mylibrary.dll</code>, <code>MyLibrary.dll</code>, and <code>MYLIBRARY.DLL</code>.)</p> <p>Please note that the directory portion of any resolved DLLs retains its casing and is not converted to lowercase. Only the filename portion is converted.</p> </li> <li>(<strong>Not yet implemented</strong>) If the depending file is a Windows Store app, and the dependency is listed as a dependency in the application's package manifest, the dependency is resolved to that file.</li> <li>Otherwise, if the library exists in the same directory as the depending file, the dependency is resolved to that file.</li> <li>Otherwise, if the library exists in either the operating system's <code>system32</code> directory or the <code>Windows</code> directory, in that order, the dependency is resolved to that file.</li> <li>Otherwise, if the library exists in one of the directories specified by <code>DIRECTORIES</code>, in the order they are listed, the dependency is resolved to that file. In this case, a warning is not issued, because searching other directories is a normal part of Windows library resolution.</li> <li>Otherwise, the dependency is unresolved.</li> </ol> <p>On Apple platforms, library resolution works as follows:</p> <ol class="arabic simple"> <li>If the dependency starts with <code>@executable_path/</code>, and an <code>EXECUTABLES</code> argument is in the process of being resolved, and replacing <code>@executable_path/</code> with the directory of the executable yields an existing file, the dependency is resolved to that file.</li> <li>Otherwise, if the dependency starts with <code>@executable_path/</code>, and there is a <code>BUNDLE_EXECUTABLE</code> argument, and replacing <code>@executable_path/</code> with the directory of the bundle executable yields an existing file, the dependency is resolved to that file.</li> <li>Otherwise, if the dependency starts with <code>@loader_path/</code>, and replacing <code>@loader_path/</code> with the directory of the depending file yields an existing file, the dependency is resolved to that file.</li> <li>Otherwise, if the dependency starts with <code>@rpath/</code>, and replacing <code>@rpath/</code> with one of the <code>RPATH</code> entries of the depending file yields an existing file, the dependency is resolved to that file. Note that <code>RPATH</code> entries that start with <code>@executable_path/</code> or <code>@loader_path/</code> also have these items replaced with the appropriate path.</li> <li>Otherwise, if the dependency is an absolute file that exists, the dependency is resolved to that file.</li> <li>Otherwise, the dependency is unresolved.</li> </ol> <p>This function accepts several variables that determine which tool is used for dependency resolution:</p> <dl class="cmake variable"> <dt class="sig sig-object cmake" id="variable:CMAKE_GET_RUNTIME_DEPENDENCIES_PLATFORM">
<code>CMAKE_GET_RUNTIME_DEPENDENCIES_PLATFORM</code> </dt> <dd>
<p>Determines which operating system and executable format the files are built for. This could be one of several values:</p> <ul class="simple"> <li><code>linux+elf</code></li> <li><code>windows+pe</code></li> <li><code>macos+macho</code></li> </ul> <p>If this variable is not specified, it is determined automatically by system introspection.</p> </dd>
</dl> <dl class="cmake variable"> <dt class="sig sig-object cmake" id="variable:CMAKE_GET_RUNTIME_DEPENDENCIES_TOOL">
<code>CMAKE_GET_RUNTIME_DEPENDENCIES_TOOL</code> </dt> <dd>
<p>Determines the tool to use for dependency resolution. It could be one of several values, depending on the value of <a class="reference internal" href="#variable:CMAKE_GET_RUNTIME_DEPENDENCIES_PLATFORM" title="CMAKE_GET_RUNTIME_DEPENDENCIES_PLATFORM" id="index-0-variable:CMAKE_GET_RUNTIME_DEPENDENCIES_PLATFORM"><code>CMAKE_GET_RUNTIME_DEPENDENCIES_PLATFORM</code></a>:</p> <table class="docutils align-default"> <thead> <tr>
<th class="head"><p><code>CMAKE_GET_RUNTIME_DEPENDENCIES_PLATFORM</code></p></th> <th class="head"><p><code>CMAKE_GET_RUNTIME_DEPENDENCIES_TOOL</code></p></th> </tr> </thead>  <tr>
<td><p><code>linux+elf</code></p></td> <td><p><code>objdump</code></p></td> </tr> <tr>
<td><p><code>windows+pe</code></p></td> <td><p><code>dumpbin</code></p></td> </tr> <tr>
<td><p><code>windows+pe</code></p></td> <td><p><code>objdump</code></p></td> </tr> <tr>
<td><p><code>macos+macho</code></p></td> <td><p><code>otool</code></p></td> </tr>  </table> <p>If this variable is not specified, it is determined automatically by system introspection.</p> </dd>
</dl> <dl class="cmake variable"> <dt class="sig sig-object cmake" id="variable:CMAKE_GET_RUNTIME_DEPENDENCIES_COMMAND">
<code>CMAKE_GET_RUNTIME_DEPENDENCIES_COMMAND</code> </dt> <dd>
<p>Determines the path to the tool to use for dependency resolution. This is the actual path to <code>objdump</code>, <code>dumpbin</code>, or <code>otool</code>.</p> <p>If this variable is not specified, it is determined by the value of <code>CMAKE_OBJDUMP</code> if set, else by system introspection.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.18: </span>Use <code>CMAKE_OBJDUMP</code> if set.</p> </div> </dd>
</dl>   <h2>Writing</h2> <pre data-language="cmake">file(WRITE &lt;filename&gt; &lt;content&gt;...)
file(APPEND &lt;filename&gt; &lt;content&gt;...)
</pre> <p>Write <code>&lt;content&gt;</code> into a file called <code>&lt;filename&gt;</code>. If the file does not exist, it will be created. If the file already exists, <code>WRITE</code> mode will overwrite it and <code>APPEND</code> mode will append to the end. Any directories in the path specified by <code>&lt;filename&gt;</code> that do not exist will be created.</p> <p>If the file is a build input, use the <a class="reference internal" href="configure_file.html#command:configure_file" title="configure_file" id="index-0-command:configure_file"><code>configure_file()</code></a> command to update the file only when its content changes.</p> <pre data-language="cmake">file(TOUCH [&lt;files&gt;...])
file(TOUCH_NOCREATE [&lt;files&gt;...])
</pre> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.12.</span></p> </div> <p>Create a file with no content if it does not yet exist. If the file already exists, its access and/or modification will be updated to the time when the function call is executed.</p> <p>Use TOUCH_NOCREATE to touch a file if it exists but not create it. If a file does not exist it will be silently ignored.</p> <p>With TOUCH and TOUCH_NOCREATE the contents of an existing file will not be modified.</p> <pre data-language="cmake">file(GENERATE OUTPUT output-file
     &lt;INPUT input-file|CONTENT content&gt;
     [CONDITION expression] [TARGET target]
     [NO_SOURCE_PERMISSIONS | USE_SOURCE_PERMISSIONS |
      FILE_PERMISSIONS &lt;permissions&gt;...]
     [NEWLINE_STYLE [UNIX|DOS|WIN32|LF|CRLF] ])
</pre> <p>Generate an output file for each build configuration supported by the current <a class="reference internal" href="../manual/cmake-generators.7.html#manual:cmake-generators(7)" title="cmake-generators(7)" id="index-0-manual:cmake-generators(7)"><code>CMake Generator</code></a>. Evaluate <a class="reference internal" href="../manual/cmake-generator-expressions.7.html#manual:cmake-generator-expressions(7)" title="cmake-generator-expressions(7)" id="index-0-manual:cmake-generator-expressions(7)"><code>generator expressions</code></a> from the input content to produce the output content. The options are:</p> <dl> <dt>
<code>CONDITION &lt;condition&gt;</code> </dt>
<dd>
<p>Generate the output file for a particular configuration only if the condition is true. The condition must be either <code>0</code> or <code>1</code> after evaluating generator expressions.</p> </dd> <dt>
<code>CONTENT &lt;content&gt;</code> </dt>
<dd>
<p>Use the content given explicitly as input.</p> </dd> <dt>
<code>INPUT &lt;input-file&gt;</code> </dt>
<dd>
<p>Use the content from a given file as input.</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.10: </span>A relative path is treated with respect to the value of <a class="reference internal" href="../variable/cmake_current_source_dir.html#variable:CMAKE_CURRENT_SOURCE_DIR" title="CMAKE_CURRENT_SOURCE_DIR" id="index-0-variable:CMAKE_CURRENT_SOURCE_DIR"><code>CMAKE_CURRENT_SOURCE_DIR</code></a>. See policy <a class="reference internal" href="../policy/cmp0070.html#policy:CMP0070" title="CMP0070" id="index-0-policy:CMP0070"><code>CMP0070</code></a>.</p> </div> </dd> <dt>
<code>OUTPUT &lt;output-file&gt;</code> </dt>
<dd>
<p>Specify the output file name to generate. Use generator expressions such as <a class="reference internal" href="../manual/cmake-generator-expressions.7.html#genex:CONFIG" title="CONFIG" id="index-0-genex:CONFIG"><code>$&lt;CONFIG&gt;</code></a> to specify a configuration-specific output file name. Multiple configurations may generate the same output file only if the generated content is identical. Otherwise, the <code>&lt;output-file&gt;</code> must evaluate to an unique name for each configuration.</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.10: </span>A relative path (after evaluating generator expressions) is treated with respect to the value of <a class="reference internal" href="../variable/cmake_current_binary_dir.html#variable:CMAKE_CURRENT_BINARY_DIR" title="CMAKE_CURRENT_BINARY_DIR" id="index-0-variable:CMAKE_CURRENT_BINARY_DIR"><code>CMAKE_CURRENT_BINARY_DIR</code></a>. See policy <a class="reference internal" href="../policy/cmp0070.html#policy:CMP0070" title="CMP0070" id="index-1-policy:CMP0070"><code>CMP0070</code></a>.</p> </div> </dd> <dt>
<code>TARGET &lt;target&gt;</code> </dt>
<dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3.19.</span></p> </div> <p>Specify which target to use when evaluating generator expressions that require a target for evaluation (e.g. <a class="reference internal" href="../manual/cmake-generator-expressions.7.html#genex:COMPILE_FEATURES" title="COMPILE_FEATURES" id="index-0-genex:COMPILE_FEATURES"><code>$&lt;COMPILE_FEATURES:...&gt;</code></a>, <a class="reference internal" href="../manual/cmake-generator-expressions.7.html#genex:TARGET_PROPERTY" title="TARGET_PROPERTY" id="index-0-genex:TARGET_PROPERTY"><code>$&lt;TARGET_PROPERTY:prop&gt;</code></a>).</p> </dd> <dt>
<code>NO_SOURCE_PERMISSIONS</code> </dt>
<dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3.20.</span></p> </div> <p>The generated file permissions default to the standard 644 value (-rw-r--r--).</p> </dd> <dt>
<code>USE_SOURCE_PERMISSIONS</code> </dt>
<dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3.20.</span></p> </div> <p>Transfer the file permissions of the <code>INPUT</code> file to the generated file. This is already the default behavior if none of the three permissions-related keywords are given (<code>NO_SOURCE_PERMISSIONS</code>, <code>USE_SOURCE_PERMISSIONS</code> or <code>FILE_PERMISSIONS</code>). The <code>USE_SOURCE_PERMISSIONS</code> keyword mostly serves as a way of making the intended behavior clearer at the call site. It is an error to specify this option without <code>INPUT</code>.</p> </dd> <dt>
<code>FILE_PERMISSIONS &lt;permissions&gt;...</code> </dt>
<dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3.20.</span></p> </div> <p>Use the specified permissions for the generated file.</p> </dd> <dt>
<code>NEWLINE_STYLE &lt;style&gt;</code> </dt>
<dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3.20.</span></p> </div> <p>Specify the newline style for the generated file. Specify <code>UNIX</code> or <code>LF</code> for <code>\n</code> newlines, or specify <code>DOS</code>, <code>WIN32</code>, or <code>CRLF</code> for <code>\r\n</code> newlines.</p> </dd> </dl> <p>Exactly one <code>CONTENT</code> or <code>INPUT</code> option must be given. A specific <code>OUTPUT</code> file may be named by at most one invocation of <code>file(GENERATE)</code>. Generated files are modified and their timestamp updated on subsequent cmake runs only if their content is changed.</p> <p>Note also that <code>file(GENERATE)</code> does not create the output file until the generation phase. The output file will not yet have been written when the <code>file(GENERATE)</code> command returns, it is written only after processing all of a project's <code>CMakeLists.txt</code> files.</p> <pre data-language="cmake">file(CONFIGURE OUTPUT output-file
     CONTENT content
     [ESCAPE_QUOTES] [@ONLY]
     [NEWLINE_STYLE [UNIX|DOS|WIN32|LF|CRLF] ])
</pre> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.18.</span></p> </div> <p>Generate an output file using the input given by <code>CONTENT</code> and substitute variable values referenced as <code>@VAR@</code> or <code>${VAR}</code> contained therein. The substitution rules behave the same as the <a class="reference internal" href="configure_file.html#command:configure_file" title="configure_file" id="index-1-command:configure_file"><code>configure_file()</code></a> command. In order to match <a class="reference internal" href="configure_file.html#command:configure_file" title="configure_file" id="index-2-command:configure_file"><code>configure_file()</code></a>'s behavior, generator expressions are not supported for both <code>OUTPUT</code> and <code>CONTENT</code>.</p> <p>The arguments are:</p> <dl class="simple"> <dt>
<code>OUTPUT &lt;output-file&gt;</code> </dt>
<dd>
<p>Specify the output file name to generate. A relative path is treated with respect to the value of <a class="reference internal" href="../variable/cmake_current_binary_dir.html#variable:CMAKE_CURRENT_BINARY_DIR" title="CMAKE_CURRENT_BINARY_DIR" id="index-1-variable:CMAKE_CURRENT_BINARY_DIR"><code>CMAKE_CURRENT_BINARY_DIR</code></a>. <code>&lt;output-file&gt;</code> does not support generator expressions.</p> </dd> <dt>
<code>CONTENT &lt;content&gt;</code> </dt>
<dd>
<p>Use the content given explicitly as input. <code>&lt;content&gt;</code> does not support generator expressions.</p> </dd> <dt>
<code>ESCAPE_QUOTES</code> </dt>
<dd>
<p>Escape any substituted quotes with backslashes (C-style).</p> </dd> <dt>
<code>@ONLY</code> </dt>
<dd>
<p>Restrict variable replacement to references of the form <code>@VAR@</code>. This is useful for configuring scripts that use <code>${VAR}</code> syntax.</p> </dd> <dt>
<code>NEWLINE_STYLE &lt;style&gt;</code> </dt>
<dd>
<p>Specify the newline style for the output file. Specify <code>UNIX</code> or <code>LF</code> for <code>\n</code> newlines, or specify <code>DOS</code>, <code>WIN32</code>, or <code>CRLF</code> for <code>\r\n</code> newlines.</p> </dd> </dl>   <h2>Filesystem</h2> <pre data-language="cmake">file(GLOB &lt;variable&gt;
     [LIST_DIRECTORIES true|false] [RELATIVE &lt;path&gt;] [CONFIGURE_DEPENDS]
     [&lt;globbing-expressions&gt;...])
file(GLOB_RECURSE &lt;variable&gt; [FOLLOW_SYMLINKS]
     [LIST_DIRECTORIES true|false] [RELATIVE &lt;path&gt;] [CONFIGURE_DEPENDS]
     [&lt;globbing-expressions&gt;...])
</pre> <p>Generate a list of files that match the <code>&lt;globbing-expressions&gt;</code> and store it into the <code>&lt;variable&gt;</code>. Globbing expressions are similar to regular expressions, but much simpler. If <code>RELATIVE</code> flag is specified, the results will be returned as relative paths to the given path.</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.6: </span>The results will be ordered lexicographically.</p> </div> <p>On Windows and macOS, globbing is case-insensitive even if the underlying filesystem is case-sensitive (both filenames and globbing expressions are converted to lowercase before matching). On other platforms, globbing is case-sensitive.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.3: </span>By default <code>GLOB</code> lists directories - directories are omitted in result if <code>LIST_DIRECTORIES</code> is set to false.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.12: </span>If the <code>CONFIGURE_DEPENDS</code> flag is specified, CMake will add logic to the main build system check target to rerun the flagged <code>GLOB</code> commands at build time. If any of the outputs change, CMake will regenerate the build system.</p> </div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>We do not recommend using GLOB to collect a list of source files from your source tree. If no CMakeLists.txt file changes when a source is added or removed then the generated build system cannot know when to ask CMake to regenerate. The <code>CONFIGURE_DEPENDS</code> flag may not work reliably on all generators, or if a new generator is added in the future that cannot support it, projects using it will be stuck. Even if <code>CONFIGURE_DEPENDS</code> works reliably, there is still a cost to perform the check on every rebuild.</p> </div> <p>Examples of globbing expressions include:</p> <pre data-language="none">*.cxx      - match all files with extension cxx
*.vt?      - match all files with extension vta,...,vtz
f[3-5].txt - match files f3.txt, f4.txt, f5.txt
</pre> <p>The <code>GLOB_RECURSE</code> mode will traverse all the subdirectories of the matched directory and match the files. Subdirectories that are symlinks are only traversed if <code>FOLLOW_SYMLINKS</code> is given or policy <a class="reference internal" href="../policy/cmp0009.html#policy:CMP0009" title="CMP0009" id="index-0-policy:CMP0009"><code>CMP0009</code></a> is not set to <code>NEW</code>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.3: </span>By default <code>GLOB_RECURSE</code> omits directories from result list - setting <code>LIST_DIRECTORIES</code> to true adds directories to result list. If <code>FOLLOW_SYMLINKS</code> is given or policy <a class="reference internal" href="../policy/cmp0009.html#policy:CMP0009" title="CMP0009" id="index-1-policy:CMP0009"><code>CMP0009</code></a> is not set to <code>NEW</code> then <code>LIST_DIRECTORIES</code> treats symlinks as directories.</p> </div> <p>Examples of recursive globbing include:</p> <pre data-language="none">/dir/*.py  - match all python files in /dir and subdirectories
</pre> <pre data-language="cmake">file(MAKE_DIRECTORY [&lt;directories&gt;...])
</pre> <p>Create the given directories and their parents as needed.</p> <pre data-language="cmake">file(REMOVE [&lt;files&gt;...])
file(REMOVE_RECURSE [&lt;files&gt;...])
</pre> <p>Remove the given files. The <code>REMOVE_RECURSE</code> mode will remove the given files and directories, also non-empty directories. No error is emitted if a given file does not exist. Relative input paths are evaluated with respect to the current source directory.</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.15: </span>Empty input paths are ignored with a warning. Previous versions of CMake interpreted empty strings as a relative path with respect to the current directory and removed its contents.</p> </div> <pre data-language="cmake">file(RENAME &lt;oldname&gt; &lt;newname&gt;
     [RESULT &lt;result&gt;]
     [NO_REPLACE])
</pre> <p>Move a file or directory within a filesystem from <code>&lt;oldname&gt;</code> to <code>&lt;newname&gt;</code>, replacing the destination atomically.</p> <p>The options are:</p> <dl> <dt>
<code>RESULT &lt;result&gt;</code> </dt>
<dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3.21.</span></p> </div> <p>Set <code>&lt;result&gt;</code> variable to <code>0</code> on success or an error message otherwise. If <code>RESULT</code> is not specified and the operation fails, an error is emitted.</p> </dd> <dt>
<code>NO_REPLACE</code> </dt>
<dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3.21.</span></p> </div> <p>If the <code>&lt;newname&gt;</code> path already exists, do not replace it. If <code>RESULT &lt;result&gt;</code> is used, the result variable will be set to <code>NO_REPLACE</code>. Otherwise, an error is emitted.</p> </dd> </dl> <pre data-language="cmake">file(COPY_FILE &lt;oldname&gt; &lt;newname&gt;
     [RESULT &lt;result&gt;]
     [ONLY_IF_DIFFERENT]
     [INPUT_MAY_BE_RECENT])
</pre> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.21.</span></p> </div> <p>Copy a file from <code>&lt;oldname&gt;</code> to <code>&lt;newname&gt;</code>. Directories are not supported. Symlinks are ignored and <code>&lt;oldfile&gt;</code>'s content is read and written to <code>&lt;newname&gt;</code> as a new file.</p> <p>The options are:</p> <dl> <dt>
<code>RESULT &lt;result&gt;</code> </dt>
<dd>
<p>Set <code>&lt;result&gt;</code> variable to <code>0</code> on success or an error message otherwise. If <code>RESULT</code> is not specified and the operation fails, an error is emitted.</p> </dd> <dt>
<code>ONLY_IF_DIFFERENT</code> </dt>
<dd>
<p>If the <code>&lt;newname&gt;</code> path already exists, do not replace it if the file's contents are already the same as <code>&lt;oldname&gt;</code> (this avoids updating <code>&lt;newname&gt;</code>'s timestamp).</p> </dd> <dt>
<code>INPUT_MAY_BE_RECENT</code> </dt>
<dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3.26.</span></p> </div> <p>Tell CMake that the input file may have been recently created. This is meaningful only on Windows, where files may be inaccessible for a short time after they are created. With this option, if permission is denied, CMake will retry reading the input a few times.</p> </dd> </dl> <p>This sub-command has some similarities to <a class="reference internal" href="configure_file.html#command:configure_file" title="configure_file" id="index-3-command:configure_file"><code>configure_file()</code></a> with the <code>COPYONLY</code> option. An important difference is that <a class="reference internal" href="configure_file.html#command:configure_file" title="configure_file" id="index-4-command:configure_file"><code>configure_file()</code></a> creates a dependency on the source file, so CMake will be re-run if it changes. The <code>file(COPY_FILE)</code> sub-command does not create such a dependency.</p> <p>See also the <code>file(COPY)</code> sub-command just below which provides further file-copying capabilities.</p> <pre data-language="cmake">file(&lt;COPY|INSTALL&gt; &lt;files&gt;... DESTINATION &lt;dir&gt;
     [NO_SOURCE_PERMISSIONS | USE_SOURCE_PERMISSIONS]
     [FILE_PERMISSIONS &lt;permissions&gt;...]
     [DIRECTORY_PERMISSIONS &lt;permissions&gt;...]
     [FOLLOW_SYMLINK_CHAIN]
     [FILES_MATCHING]
     [[PATTERN &lt;pattern&gt; | REGEX &lt;regex&gt;]
      [EXCLUDE] [PERMISSIONS &lt;permissions&gt;...]] [...])
</pre> <div class="admonition note"> <p class="admonition-title">Note</p> <p>For a simple file copying operation, the <code>file(COPY_FILE)</code> sub-command just above may be easier to use.</p> </div> <p>The <code>COPY</code> signature copies files, directories, and symlinks to a destination folder. Relative input paths are evaluated with respect to the current source directory, and a relative destination is evaluated with respect to the current build directory. Copying preserves input file timestamps, and optimizes out a file if it exists at the destination with the same timestamp. Copying preserves input permissions unless explicit permissions or <code>NO_SOURCE_PERMISSIONS</code> are given (default is <code>USE_SOURCE_PERMISSIONS</code>).</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.15: </span>If <code>FOLLOW_SYMLINK_CHAIN</code> is specified, <code>COPY</code> will recursively resolve the symlinks at the paths given until a real file is found, and install a corresponding symlink in the destination for each symlink encountered. For each symlink that is installed, the resolution is stripped of the directory, leaving only the filename, meaning that the new symlink points to a file in the same directory as the symlink. This feature is useful on some Unix systems, where libraries are installed as a chain of symlinks with version numbers, with less specific versions pointing to more specific versions. <code>FOLLOW_SYMLINK_CHAIN</code> will install all of these symlinks and the library itself into the destination directory. For example, if you have the following directory structure:</p> </div> <ul class="simple"> <li><code>/opt/foo/lib/libfoo.so.1.2.3</code></li> <li><code>/opt/foo/lib/libfoo.so.1.2 -&gt; libfoo.so.1.2.3</code></li> <li><code>/opt/foo/lib/libfoo.so.1 -&gt; libfoo.so.1.2</code></li> <li><code>/opt/foo/lib/libfoo.so -&gt; libfoo.so.1</code></li> </ul> <p>and you do:</p> <pre data-language="cmake">file(COPY /opt/foo/lib/libfoo.so DESTINATION lib FOLLOW_SYMLINK_CHAIN)
</pre> <p>This will install all of the symlinks and <code>libfoo.so.1.2.3</code> itself into <code>lib</code>.</p> <p>See the <a class="reference internal" href="install.html#command:install" title="install" id="index-3-command:install"><code>install(DIRECTORY)</code></a> command for documentation of permissions, <code>FILES_MATCHING</code>, <code>PATTERN</code>, <code>REGEX</code>, and <code>EXCLUDE</code> options. Copying directories preserves the structure of their content even if options are used to select a subset of files.</p> <p>The <code>INSTALL</code> signature differs slightly from <code>COPY</code>: it prints status messages, and <code>NO_SOURCE_PERMISSIONS</code> is default.</p> <p>Installation scripts generated by the <a class="reference internal" href="install.html#command:install" title="install" id="index-4-command:install"><code>install()</code></a> command use this signature (with some undocumented options for internal use).</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.22: </span>The environment variable <a class="reference internal" href="../envvar/cmake_install_mode.html#envvar:CMAKE_INSTALL_MODE" title="CMAKE_INSTALL_MODE" id="index-0-envvar:CMAKE_INSTALL_MODE"><code>CMAKE_INSTALL_MODE</code></a> can override the default copying behavior of <a class="reference internal" href="#command:file" title="file" id="index-0-command:file"><code>file(INSTALL)</code></a>.</p> </div> <pre data-language="cmake">file(SIZE &lt;filename&gt; &lt;variable&gt;)
</pre> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.14.</span></p> </div> <p>Determine the file size of the <code>&lt;filename&gt;</code> and put the result in <code>&lt;variable&gt;</code> variable. Requires that <code>&lt;filename&gt;</code> is a valid path pointing to a file and is readable.</p> <pre data-language="cmake">file(READ_SYMLINK &lt;linkname&gt; &lt;variable&gt;)
</pre> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.14.</span></p> </div> <p>This subcommand queries the symlink <code>&lt;linkname&gt;</code> and stores the path it points to in the result <code>&lt;variable&gt;</code>. If <code>&lt;linkname&gt;</code> does not exist or is not a symlink, CMake issues a fatal error.</p> <p>Note that this command returns the raw symlink path and does not resolve a relative path. The following is an example of how to ensure that an absolute path is obtained:</p> <pre data-language="cmake">set(linkname "/path/to/foo.sym")
file(READ_SYMLINK "${linkname}" result)
if(NOT IS_ABSOLUTE "${result}")
  get_filename_component(dir "${linkname}" DIRECTORY)
  set(result "${dir}/${result}")
endif()
</pre> <pre data-language="cmake">file(CREATE_LINK &lt;original&gt; &lt;linkname&gt;
     [RESULT &lt;result&gt;] [COPY_ON_ERROR] [SYMBOLIC])
</pre> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.14.</span></p> </div> <p>Create a link <code>&lt;linkname&gt;</code> that points to <code>&lt;original&gt;</code>. It will be a hard link by default, but providing the <code>SYMBOLIC</code> option results in a symbolic link instead. Hard links require that <code>original</code> exists and is a file, not a directory. If <code>&lt;linkname&gt;</code> already exists, it will be overwritten.</p> <p>The <code>&lt;result&gt;</code> variable, if specified, receives the status of the operation. It is set to <code>0</code> upon success or an error message otherwise. If <code>RESULT</code> is not specified and the operation fails, a fatal error is emitted.</p> <p>Specifying <code>COPY_ON_ERROR</code> enables copying the file as a fallback if creating the link fails. It can be useful for handling situations such as <code>&lt;original&gt;</code> and <code>&lt;linkname&gt;</code> being on different drives or mount points, which would make them unable to support a hard link.</p> <pre data-language="cmake">file(CHMOD &lt;files&gt;... &lt;directories&gt;...
    [PERMISSIONS &lt;permissions&gt;...]
    [FILE_PERMISSIONS &lt;permissions&gt;...]
    [DIRECTORY_PERMISSIONS &lt;permissions&gt;...])
</pre> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.19.</span></p> </div> <p>Set the permissions for the <code>&lt;files&gt;...</code> and <code>&lt;directories&gt;...</code> specified. Valid permissions are <code>OWNER_READ</code>, <code>OWNER_WRITE</code>, <code>OWNER_EXECUTE</code>, <code>GROUP_READ</code>, <code>GROUP_WRITE</code>, <code>GROUP_EXECUTE</code>, <code>WORLD_READ</code>, <code>WORLD_WRITE</code>, <code>WORLD_EXECUTE</code>, <code>SETUID</code>, <code>SETGID</code>.</p> <p>Valid combination of keywords are:</p> <dl class="simple"> <dt>
<code>PERMISSIONS</code> </dt>
<dd>
<p>All items are changed.</p> </dd> <dt>
<code>FILE_PERMISSIONS</code> </dt>
<dd>
<p>Only files are changed.</p> </dd> <dt>
<code>DIRECTORY_PERMISSIONS</code> </dt>
<dd>
<p>Only directories are changed.</p> </dd> <dt>
<code>PERMISSIONS and FILE_PERMISSIONS</code> </dt>
<dd>
<p><code>FILE_PERMISSIONS</code> overrides <code>PERMISSIONS</code> for files.</p> </dd> <dt>
<code>PERMISSIONS and DIRECTORY_PERMISSIONS</code> </dt>
<dd>
<p><code>DIRECTORY_PERMISSIONS</code> overrides <code>PERMISSIONS</code> for directories.</p> </dd> <dt>
<code>FILE_PERMISSIONS and DIRECTORY_PERMISSIONS</code> </dt>
<dd>
<p>Use <code>FILE_PERMISSIONS</code> for files and <code>DIRECTORY_PERMISSIONS</code> for directories.</p> </dd> </dl> <pre data-language="cmake">file(CHMOD_RECURSE &lt;files&gt;... &lt;directories&gt;...
     [PERMISSIONS &lt;permissions&gt;...]
     [FILE_PERMISSIONS &lt;permissions&gt;...]
     [DIRECTORY_PERMISSIONS &lt;permissions&gt;...])
</pre> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.19.</span></p> </div> <p>Same as <a class="reference internal" href="#chmod">CHMOD</a>, but change the permissions of files and directories present in the <code>&lt;directories&gt;...</code> recursively.</p>   <h2>Path Conversion</h2> <pre data-language="cmake">file(REAL_PATH &lt;path&gt; &lt;out-var&gt; [BASE_DIRECTORY &lt;dir&gt;] [EXPAND_TILDE])
</pre> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.19.</span></p> </div> <p>Compute the absolute path to an existing file or directory with symlinks resolved.</p> <dl> <dt>
<code>BASE_DIRECTORY &lt;dir&gt;</code> </dt>
<dd>
<p>If the provided <code>&lt;path&gt;</code> is a relative path, it is evaluated relative to the given base directory <code>&lt;dir&gt;</code>. If no base directory is provided, the default base directory will be <a class="reference internal" href="../variable/cmake_current_source_dir.html#variable:CMAKE_CURRENT_SOURCE_DIR" title="CMAKE_CURRENT_SOURCE_DIR" id="index-1-variable:CMAKE_CURRENT_SOURCE_DIR"><code>CMAKE_CURRENT_SOURCE_DIR</code></a>.</p> </dd> <dt>
<code>EXPAND_TILDE</code> </dt>
<dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3.21.</span></p> </div> <p>If the <code>&lt;path&gt;</code> is <code>~</code> or starts with <code>~/</code>, the <code>~</code> is replaced by the user's home directory. The path to the home directory is obtained from environment variables. On Windows, the <code>USERPROFILE</code> environment variable is used, falling back to the <code>HOME</code> environment variable if <code>USERPROFILE</code> is not defined. On all other platforms, only <code>HOME</code> is used.</p> </dd> </dl> <pre data-language="cmake">file(RELATIVE_PATH &lt;variable&gt; &lt;directory&gt; &lt;file&gt;)
</pre> <p>Compute the relative path from a <code>&lt;directory&gt;</code> to a <code>&lt;file&gt;</code> and store it in the <code>&lt;variable&gt;</code>.</p> <pre data-language="cmake">file(TO_CMAKE_PATH "&lt;path&gt;" &lt;variable&gt;)
file(TO_NATIVE_PATH "&lt;path&gt;" &lt;variable&gt;)
</pre> <p>The <code>TO_CMAKE_PATH</code> mode converts a native <code>&lt;path&gt;</code> into a cmake-style path with forward-slashes (<code>/</code>). The input can be a single path or a system search path like <code>$ENV{PATH}</code>. A search path will be converted to a cmake-style list separated by <code>;</code> characters.</p> <p>The <code>TO_NATIVE_PATH</code> mode converts a cmake-style <code>&lt;path&gt;</code> into a native path with platform-specific slashes (<code>\</code> on Windows hosts and <code>/</code> elsewhere).</p> <p>Always use double quotes around the <code>&lt;path&gt;</code> to be sure it is treated as a single argument to this command.</p>   <h2>Transfer</h2> <pre data-language="cmake">file(DOWNLOAD &lt;url&gt; [&lt;file&gt;] [&lt;options&gt;...])
file(UPLOAD   &lt;file&gt; &lt;url&gt; [&lt;options&gt;...])
</pre> <p>The <code>DOWNLOAD</code> subcommand downloads the given <code>&lt;url&gt;</code> to a local <code>&lt;file&gt;</code>. The <code>UPLOAD</code> mode uploads a local <code>&lt;file&gt;</code> to a given <code>&lt;url&gt;</code>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.19: </span>If <code>&lt;file&gt;</code> is not specified for <code>file(DOWNLOAD)</code>, the file is not saved. This can be useful if you want to know if a file can be downloaded (for example, to check that it exists) without actually saving it anywhere.</p> </div> <p>Options to both <code>DOWNLOAD</code> and <code>UPLOAD</code> are:</p> <dl> <dt>
<code>INACTIVITY_TIMEOUT &lt;seconds&gt;</code> </dt>
<dd>
<p>Terminate the operation after a period of inactivity.</p> </dd> <dt>
<code>LOG &lt;variable&gt;</code> </dt>
<dd>
<p>Store a human-readable log of the operation in a variable.</p> </dd> <dt>
<code>SHOW_PROGRESS</code> </dt>
<dd>
<p>Print progress information as status messages until the operation is complete.</p> </dd> <dt>
<code>STATUS &lt;variable&gt;</code> </dt>
<dd>
<p>Store the resulting status of the operation in a variable. The status is a <code>;</code> separated list of length 2. The first element is the numeric return value for the operation, and the second element is a string value for the error. A <code>0</code> numeric error means no error in the operation.</p> </dd> <dt>
<code>TIMEOUT &lt;seconds&gt;</code> </dt>
<dd>
<p>Terminate the operation after a given total time has elapsed.</p> </dd> <dt>
<code>USERPWD &lt;username&gt;:&lt;password&gt;</code> </dt>
<dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3.7.</span></p> </div> <p>Set username and password for operation.</p> </dd> <dt>
<code>HTTPHEADER &lt;HTTP-header&gt;</code> </dt>
<dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3.7.</span></p> </div> <p>HTTP header for operation. Suboption can be repeated several times.</p> </dd> <dt>
<code>NETRC &lt;level&gt;</code> </dt>
<dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3.11.</span></p> </div> <p>Specify whether the .netrc file is to be used for operation. If this option is not specified, the value of the <a class="reference internal" href="../variable/cmake_netrc.html#variable:CMAKE_NETRC" title="CMAKE_NETRC" id="index-0-variable:CMAKE_NETRC"><code>CMAKE_NETRC</code></a> variable will be used instead. Valid levels are:</p> <dl class="simple"> <dt>
<code>IGNORED</code> </dt>
<dd>
<p>The .netrc file is ignored. This is the default.</p> </dd> <dt>
<code>OPTIONAL</code> </dt>
<dd>
<p>The .netrc file is optional, and information in the URL is preferred. The file will be scanned to find which ever information is not specified in the URL.</p> </dd> <dt>
<code>REQUIRED</code> </dt>
<dd>
<p>The .netrc file is required, and information in the URL is ignored.</p> </dd> </dl> </dd> <dt>
<code>NETRC_FILE &lt;file&gt;</code> </dt>
<dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3.11.</span></p> </div> <p>Specify an alternative .netrc file to the one in your home directory, if the <code>NETRC</code> level is <code>OPTIONAL</code> or <code>REQUIRED</code>. If this option is not specified, the value of the <a class="reference internal" href="../variable/cmake_netrc_file.html#variable:CMAKE_NETRC_FILE" title="CMAKE_NETRC_FILE" id="index-0-variable:CMAKE_NETRC_FILE"><code>CMAKE_NETRC_FILE</code></a> variable will be used instead.</p> </dd> <dt>
<code>TLS_VERIFY &lt;ON|OFF&gt;</code> </dt>
<dd>
<p>Specify whether to verify the server certificate for <code>https://</code> URLs. The default is to <em>not</em> verify. If this option is not specified, the value of the <a class="reference internal" href="../variable/cmake_tls_verify.html#variable:CMAKE_TLS_VERIFY" title="CMAKE_TLS_VERIFY" id="index-0-variable:CMAKE_TLS_VERIFY"><code>CMAKE_TLS_VERIFY</code></a> variable will be used instead.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.18: </span>Added support to <code>file(UPLOAD)</code>.</p> </div> </dd> <dt>
<code>TLS_CAINFO &lt;file&gt;</code> </dt>
<dd>
<p>Specify a custom Certificate Authority file for <code>https://</code> URLs. If this option is not specified, the value of the <a class="reference internal" href="../variable/cmake_tls_cainfo.html#variable:CMAKE_TLS_CAINFO" title="CMAKE_TLS_CAINFO" id="index-0-variable:CMAKE_TLS_CAINFO"><code>CMAKE_TLS_CAINFO</code></a> variable will be used instead.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.18: </span>Added support to <code>file(UPLOAD)</code>.</p> </div> </dd> </dl> <p>For <code>https://</code> URLs CMake must be built with OpenSSL support. <code>TLS/SSL</code> certificates are not checked by default. Set <code>TLS_VERIFY</code> to <code>ON</code> to check certificates.</p> <p>Additional options to <code>DOWNLOAD</code> are:</p> <p><code>EXPECTED_HASH ALGO=&lt;value&gt;</code></p>  <p>Verify that the downloaded content hash matches the expected value, where <code>ALGO</code> is one of the algorithms supported by <code>file(&lt;HASH&gt;)</code>. If the file already exists and matches the hash, the download is skipped. If the file already exists and does not match the hash, the file is downloaded again. If after download the file does not match the hash, the operation fails with an error. It is an error to specify this option if <code>DOWNLOAD</code> is not given a <code>&lt;file&gt;</code>.</p>  <dl> <dt>
<code>EXPECTED_MD5 &lt;value&gt;</code> </dt>
<dd>
<p>Historical short-hand for <code>EXPECTED_HASH MD5=&lt;value&gt;</code>. It is an error to specify this if <code>DOWNLOAD</code> is not given a <code>&lt;file&gt;</code>.</p> </dd> <dt>
<code>RANGE_START &lt;value&gt;</code> </dt>
<dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3.24.</span></p> </div> <p>Offset of the start of the range in file in bytes. Could be omitted to download up to the specified <code>RANGE_END</code>.</p> </dd> <dt>
<code>RANGE_END &lt;value&gt;</code> </dt>
<dd>
<div class="versionadded"> <p><span class="versionmodified added">New in version 3.24.</span></p> </div> <p>Offset of the end of the range in file in bytes. Could be omitted to download everything from the specified <code>RANGE_START</code> to the end of file.</p> </dd> </dl>   <h2>Locking</h2> <pre data-language="cmake">file(LOCK &lt;path&gt; [DIRECTORY] [RELEASE]
     [GUARD &lt;FUNCTION|FILE|PROCESS&gt;]
     [RESULT_VARIABLE &lt;variable&gt;]
     [TIMEOUT &lt;seconds&gt;])
</pre> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.2.</span></p> </div> <p>Lock a file specified by <code>&lt;path&gt;</code> if no <code>DIRECTORY</code> option present and file <code>&lt;path&gt;/cmake.lock</code> otherwise. File will be locked for scope defined by <code>GUARD</code> option (default value is <code>PROCESS</code>). <code>RELEASE</code> option can be used to unlock file explicitly. If option <code>TIMEOUT</code> is not specified CMake will wait until lock succeed or until fatal error occurs. If <code>TIMEOUT</code> is set to <code>0</code> lock will be tried once and result will be reported immediately. If <code>TIMEOUT</code> is not <code>0</code> CMake will try to lock file for the period specified by <code>&lt;seconds&gt;</code> value. Any errors will be interpreted as fatal if there is no <code>RESULT_VARIABLE</code> option. Otherwise result will be stored in <code>&lt;variable&gt;</code> and will be <code>0</code> on success or error message on failure.</p> <p>Note that lock is advisory - there is no guarantee that other processes will respect this lock, i.e. lock synchronize two or more CMake instances sharing some modifiable resources. Similar logic applied to <code>DIRECTORY</code> option - locking parent directory doesn't prevent other <code>LOCK</code> commands to lock any child directory or file.</p> <p>Trying to lock file twice is not allowed. Any intermediate directories and file itself will be created if they not exist. <code>GUARD</code> and <code>TIMEOUT</code> options ignored on <code>RELEASE</code> operation.</p>   <h2>Archiving</h2> <pre data-language="cmake">file(ARCHIVE_CREATE OUTPUT &lt;archive&gt;
  PATHS &lt;paths&gt;...
  [FORMAT &lt;format&gt;]
  [COMPRESSION &lt;compression&gt; [COMPRESSION_LEVEL &lt;compression-level&gt;]]
  [MTIME &lt;mtime&gt;]
  [VERBOSE])
</pre> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.18.</span></p> </div> <p>Creates the specified <code>&lt;archive&gt;</code> file with the files and directories listed in <code>&lt;paths&gt;</code>. Note that <code>&lt;paths&gt;</code> must list actual files or directories, wildcards are not supported.</p> <p>Use the <code>FORMAT</code> option to specify the archive format. Supported values for <code>&lt;format&gt;</code> are <code>7zip</code>, <code>gnutar</code>, <code>pax</code>, <code>paxr</code>, <code>raw</code> and <code>zip</code>. If <code>FORMAT</code> is not given, the default format is <code>paxr</code>.</p> <p>Some archive formats allow the type of compression to be specified. The <code>7zip</code> and <code>zip</code> archive formats already imply a specific type of compression. The other formats use no compression by default, but can be directed to do so with the <code>COMPRESSION</code> option. Valid values for <code>&lt;compression&gt;</code> are <code>None</code>, <code>BZip2</code>, <code>GZip</code>, <code>XZ</code>, and <code>Zstd</code>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.19: </span>The compression level can be specified with the <code>COMPRESSION_LEVEL</code> option. The <code>&lt;compression-level&gt;</code> should be between 0-9, with the default being 0. The <code>COMPRESSION</code> option must be present when <code>COMPRESSION_LEVEL</code> is given.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.26: </span>The <code>&lt;compression-level&gt;</code> of the <code>Zstd</code> algorithm can be set between 0-19.</p> </div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>With <code>FORMAT</code> set to <code>raw</code> only one file will be compressed with the compression type specified by <code>COMPRESSION</code>.</p> </div> <p>The <code>VERBOSE</code> option enables verbose output for the archive operation.</p> <p>To specify the modification time recorded in tarball entries, use the <code>MTIME</code> option.</p> <pre data-language="cmake">file(ARCHIVE_EXTRACT INPUT &lt;archive&gt;
  [DESTINATION &lt;dir&gt;]
  [PATTERNS &lt;patterns&gt;...]
  [LIST_ONLY]
  [VERBOSE]
  [TOUCH])
</pre> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.18.</span></p> </div> <p>Extracts or lists the content of the specified <code>&lt;archive&gt;</code>.</p> <p>The directory where the content of the archive will be extracted to can be specified using the <code>DESTINATION</code> option. If the directory does not exist, it will be created. If <code>DESTINATION</code> is not given, the current binary directory will be used.</p> <p>If required, you may select which files and directories to list or extract from the archive using the specified <code>&lt;patterns&gt;</code>. Wildcards are supported. If the <code>PATTERNS</code> option is not given, the entire archive will be listed or extracted.</p> <p><code>LIST_ONLY</code> will list the files in the archive rather than extract them.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.24: </span>The <code>TOUCH</code> option gives extracted files a current local timestamp instead of extracting file timestamps from the archive.</p> </div> <p>With <code>VERBOSE</code>, the command will produce verbose output.</p>   <div class="_attribution">
  <p class="_attribution-p">
    &copy; 2000&ndash;2023 Kitware, Inc. and Contributors<br>Licensed under the BSD 3-clause License.<br>
    <a href="https://cmake.org/cmake/help/v3.26/command/file.html" class="_attribution-link">https://cmake.org/cmake/help/v3.26/command/file.html</a>
  </p>
</div>
