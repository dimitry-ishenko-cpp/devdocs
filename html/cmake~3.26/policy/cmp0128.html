<h1 id="policy:CMP0128">CMP0128</h1> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.22.</span></p> </div> <p>When this policy is set to <code>NEW</code>:</p> <ul class="simple"> <li>
<a class="reference internal" href="#" title="&lt;LANG&gt;_EXTENSIONS" id="index-0-prop_tgt:&lt;LANG&gt;_EXTENSIONS"><code>&lt;LANG&gt;_EXTENSIONS</code></a> is initialized to <a class="reference internal" href="#" title="CMAKE_&lt;LANG&gt;_EXTENSIONS" id="index-0-variable:CMAKE_&lt;LANG&gt;_EXTENSIONS"><code>CMAKE_&lt;LANG&gt;_EXTENSIONS</code></a> if set, otherwise falling back to <a class="reference internal" href="#" title="CMAKE_&lt;LANG&gt;_EXTENSIONS_DEFAULT" id="index-0-variable:CMAKE_&lt;LANG&gt;_EXTENSIONS_DEFAULT"><code>CMAKE_&lt;LANG&gt;_EXTENSIONS_DEFAULT</code></a>.</li> <li>Extensions are correctly enabled/disabled if <a class="reference internal" href="#" title="&lt;LANG&gt;_STANDARD" id="index-0-prop_tgt:&lt;LANG&gt;_STANDARD"><code>&lt;LANG&gt;_STANDARD</code></a> is unset or satisfied by the default.</li> <li>Standard mode-affecting flags aren't added unless necessary to achieve the specified mode.</li> </ul> <p>The <code>OLD</code> behavior:</p> <ul class="simple"> <li>Initializes <a class="reference internal" href="#" title="&lt;LANG&gt;_EXTENSIONS" id="index-1-prop_tgt:&lt;LANG&gt;_EXTENSIONS"><code>&lt;LANG&gt;_EXTENSIONS</code></a> to <a class="reference internal" href="#" title="CMAKE_&lt;LANG&gt;_EXTENSIONS" id="index-1-variable:CMAKE_&lt;LANG&gt;_EXTENSIONS"><code>CMAKE_&lt;LANG&gt;_EXTENSIONS</code></a> if set, otherwise falling back to <code>ON</code>.</li> <li>Always adds a flag if <a class="reference internal" href="#" title="&lt;LANG&gt;_STANDARD" id="index-1-prop_tgt:&lt;LANG&gt;_STANDARD"><code>&lt;LANG&gt;_STANDARD</code></a> is set and <a class="reference internal" href="#" title="&lt;LANG&gt;_STANDARD_REQUIRED" id="index-0-prop_tgt:&lt;LANG&gt;_STANDARD_REQUIRED"><code>&lt;LANG&gt;_STANDARD_REQUIRED</code></a> is <code>OFF</code>.</li> <li>
<p>If <a class="reference internal" href="#" title="&lt;LANG&gt;_STANDARD" id="index-2-prop_tgt:&lt;LANG&gt;_STANDARD"><code>&lt;LANG&gt;_STANDARD</code></a> is unset:</p> <ul> <li>Doesn't disable extensions even if <a class="reference internal" href="#" title="&lt;LANG&gt;_EXTENSIONS" id="index-2-prop_tgt:&lt;LANG&gt;_EXTENSIONS"><code>&lt;LANG&gt;_EXTENSIONS</code></a> is <code>OFF</code>.</li> <li>Fails to enable extensions if <a class="reference internal" href="#" title="&lt;LANG&gt;_EXTENSIONS" id="index-3-prop_tgt:&lt;LANG&gt;_EXTENSIONS"><code>&lt;LANG&gt;_EXTENSIONS</code></a> is <code>ON</code> except for the <code>IAR</code> compiler.</li> </ul> </li> </ul> <p>Code may need to be updated for the <code>NEW</code> behavior in the following cases:</p> <ul> <li>
<p>If a standard mode flag previously overridden by CMake's and not used during compiler detection now takes effect due to CMake no longer adding one as the default detected is appropriate.</p> <p>Such code should be converted to either:</p> <ul class="simple"> <li>Use <a class="reference internal" href="#" title="&lt;LANG&gt;_STANDARD" id="index-3-prop_tgt:&lt;LANG&gt;_STANDARD"><code>&lt;LANG&gt;_STANDARD</code></a> and <a class="reference internal" href="#" title="&lt;LANG&gt;_EXTENSIONS" id="index-4-prop_tgt:&lt;LANG&gt;_EXTENSIONS"><code>&lt;LANG&gt;_EXTENSIONS</code></a> instead of manually adding flags.</li> <li>Or ensure the manually-specified flags are used during compiler detection.</li> </ul> </li> <li>
<p>If extensions were disabled without <a class="reference internal" href="#" title="&lt;LANG&gt;_STANDARD" id="index-4-prop_tgt:&lt;LANG&gt;_STANDARD"><code>&lt;LANG&gt;_STANDARD</code></a> being set CMake previously wouldn't actually disable extensions.</p> <p>Such code should be updated to not disable extensions if they are required.</p> </li> <li>
<p>If extensions were enabled/disabled when <a class="reference internal" href="#" title="&lt;LANG&gt;_STANDARD" id="index-5-prop_tgt:&lt;LANG&gt;_STANDARD"><code>&lt;LANG&gt;_STANDARD</code></a> was satisfied by the compiler's default CMake previously wouldn't actually enable/disable extensions.</p> <p>Such code should be updated to set the correct extensions mode.</p> </li> </ul> <p>If compiler flags affecting the standard mode are used during compiler detection (for example in <a class="reference internal" href="../manual/cmake-toolchains.7.html#manual:cmake-toolchains(7)" title="cmake-toolchains(7)" id="index-0-manual:cmake-toolchains(7)"><code>a toolchain file</code></a> using <a class="reference internal" href="#" title="CMAKE_&lt;LANG&gt;_FLAGS_INIT" id="index-0-variable:CMAKE_&lt;LANG&gt;_FLAGS_INIT"><code>CMAKE_&lt;LANG&gt;_FLAGS_INIT</code></a>) then they will affect the detected default <a class="reference internal" href="#" title="CMAKE_&lt;LANG&gt;_STANDARD_DEFAULT" id="index-0-variable:CMAKE_&lt;LANG&gt;_STANDARD_DEFAULT"><code>standard</code></a> and <a class="reference internal" href="#" title="CMAKE_&lt;LANG&gt;_EXTENSIONS_DEFAULT" id="index-1-variable:CMAKE_&lt;LANG&gt;_EXTENSIONS_DEFAULT"><code>extensions</code></a>.</p> <p>Unlike many policies, CMake version 3.26.0-rc3 does <em>not</em> warn when the policy is not set and simply uses the <code>OLD</code> behavior. Use the <a class="reference internal" href="../command/cmake_policy.html#command:cmake_policy" title="cmake_policy" id="index-0-command:cmake_policy"><code>cmake_policy()</code></a> command to set it to <code>OLD</code> or <code>NEW</code> explicitly. See documentation of the <a class="reference internal" href="#" title="CMAKE_POLICY_WARNING_CMP&lt;NNNN&gt;" id="index-0-variable:CMAKE_POLICY_WARNING_CMP&lt;NNNN&gt;"><code>CMAKE_POLICY_WARNING_CMP0128</code></a> variable to control the warning.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>The <code>OLD</code> behavior of a policy is <a class="reference internal" href="../manual/cmake-policies.7.html#manual:cmake-policies(7)" title="cmake-policies(7)" id="index-0-manual:cmake-policies(7)"><code>deprecated by definition</code></a> and may be removed in a future version of CMake.</p> </div>  <div class="_attribution">
  <p class="_attribution-p">
    &copy; 2000&ndash;2023 Kitware, Inc. and Contributors<br>Licensed under the BSD 3-clause License.<br>
    <a href="https://cmake.org/cmake/help/v3.26/policy/CMP0128.html" class="_attribution-link">https://cmake.org/cmake/help/v3.26/policy/CMP0128.html</a>
  </p>
</div>
