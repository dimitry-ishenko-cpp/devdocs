<h1 id="policy:CMP0116">CMP0116</h1> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.20.</span></p> </div> <p>Ninja generators transform <code>DEPFILE</code> s from <a class="reference internal" href="../command/add_custom_command.html#command:add_custom_command" title="add_custom_command" id="index-0-command:add_custom_command"><code>add_custom_command()</code></a>.</p> <p>In CMake 3.19 and below, files given to the <code>DEPFILE</code> argument of <a class="reference internal" href="../command/add_custom_command.html#command:add_custom_command" title="add_custom_command" id="index-1-command:add_custom_command"><code>add_custom_command()</code></a> were passed directly to Ninja's <code>depfile</code> variable without any path resolution. This meant that if <a class="reference internal" href="../command/add_custom_command.html#command:add_custom_command" title="add_custom_command" id="index-2-command:add_custom_command"><code>add_custom_command()</code></a> was called from a subdirectory (created by <a class="reference internal" href="../command/add_subdirectory.html#command:add_subdirectory" title="add_subdirectory" id="index-0-command:add_subdirectory"><code>add_subdirectory()</code></a>), the <code>DEPFILE</code> argument would have to be either an absolute path or a path relative to <a class="reference internal" href="../variable/cmake_binary_dir.html#variable:CMAKE_BINARY_DIR" title="CMAKE_BINARY_DIR" id="index-0-variable:CMAKE_BINARY_DIR"><code>CMAKE_BINARY_DIR</code></a>, rather than <a class="reference internal" href="../variable/cmake_current_binary_dir.html#variable:CMAKE_CURRENT_BINARY_DIR" title="CMAKE_CURRENT_BINARY_DIR" id="index-0-variable:CMAKE_CURRENT_BINARY_DIR"><code>CMAKE_CURRENT_BINARY_DIR</code></a>. In addition, no transformation was done on the file listed in <code>DEPFILE</code>, which meant that the paths within the <code>DEPFILE</code> had the same restrictions.</p> <p>Starting with CMake 3.20, the <code>DEPFILE</code> argument is relative to <a class="reference internal" href="../variable/cmake_current_binary_dir.html#variable:CMAKE_CURRENT_BINARY_DIR" title="CMAKE_CURRENT_BINARY_DIR" id="index-1-variable:CMAKE_CURRENT_BINARY_DIR"><code>CMAKE_CURRENT_BINARY_DIR</code></a> (unless it is absolute), and the paths in the <code>DEPFILE</code> are also relative to <a class="reference internal" href="../variable/cmake_current_binary_dir.html#variable:CMAKE_CURRENT_BINARY_DIR" title="CMAKE_CURRENT_BINARY_DIR" id="index-2-variable:CMAKE_CURRENT_BINARY_DIR"><code>CMAKE_CURRENT_BINARY_DIR</code></a>. CMake automatically transforms the paths in the <code>DEPFILE</code> (unless they are absolute) after the custom command is run. The file listed in <code>DEPFILE</code> is not modified in any way. Instead, CMake writes the transformation to its own internal file, and passes this internal file to Ninja's <code>depfile</code> variable. This transformation happens regardless of whether or not <code>DEPFILE</code> is relative, and regardless of whether or not <a class="reference internal" href="../command/add_custom_command.html#command:add_custom_command" title="add_custom_command" id="index-3-command:add_custom_command"><code>add_custom_command()</code></a> is called from a subdirectory.</p> <p>The <code>OLD</code> behavior for this policy is to pass the <code>DEPFILE</code> to Ninja unaltered. The <code>NEW</code> behavior for this policy is to transform the <code>DEPFILE</code> after running the custom command. The status of <code>CMP0116</code> is recorded at the time of the custom command's creation, and you can have custom commands in the same directory with different values for <code>CMP0116</code> by setting the policy before each custom command.</p> <p>This policy was introduced in CMake version 3.20. Unlike most policies, CMake version 3.26.0-rc3 does <em>not</em> warn by default when this policy is not set (unless <code>DEPFILE</code> is used in a subdirectory) and simply uses <code>OLD</code> behavior. See documentation of the <a class="reference internal" href="#" title="CMAKE_POLICY_WARNING_CMP&lt;NNNN&gt;" id="index-0-variable:CMAKE_POLICY_WARNING_CMP&lt;NNNN&gt;"><code>CMAKE_POLICY_WARNING_CMP0116</code></a> variable to control the warning.</p>  <div class="_attribution">
  <p class="_attribution-p">
    &copy; 2000&ndash;2023 Kitware, Inc. and Contributors<br>Licensed under the BSD 3-clause License.<br>
    <a href="https://cmake.org/cmake/help/v3.26/policy/CMP0116.html" class="_attribution-link">https://cmake.org/cmake/help/v3.26/policy/CMP0116.html</a>
  </p>
</div>
