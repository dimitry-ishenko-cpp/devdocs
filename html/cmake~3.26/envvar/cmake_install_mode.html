<h1 id="envvar:CMAKE_INSTALL_MODE">CMAKE_INSTALL_MODE</h1> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.22.</span></p> </div> <p>This is a CMake <a class="reference internal" href="../manual/cmake-language.7.html#cmake-language-environment-variables"><span class="std std-ref">Environment Variable</span></a>. Its initial value is taken from the calling process environment.</p> <p>The <code>CMAKE_INSTALL_MODE</code> environment variable allows users to operate CMake in an alternate mode of <a class="reference internal" href="../command/file.html#command:file" title="file" id="index-0-command:file"><code>file(INSTALL)</code></a> and <a class="reference internal" href="../command/install.html#command:install" title="install" id="index-0-command:install"><code>install()</code></a>.</p> <p>The default behavior for an installation is to copy a source file from a source directory into a destination directory. This environment variable however allows the user to override this behavior, causing CMake to create symbolic links instead.</p>  <h2>Usage Scenarios</h2> <p>Installing symbolic links rather than copying files can help in the following ways:</p> <ul class="simple"> <li>Conserving storage space because files do not have to be duplicated on disk.</li> <li>Changes to the source of the symbolic link are seen at the install destination without having to re-run the install step.</li> <li>Editing through the link at the install destination will modify the source of the link. This may be useful when dealing with CMake project hierarchies, i.e. using <a class="reference internal" href="../module/externalproject.html#module:ExternalProject" title="ExternalProject" id="index-0-module:ExternalProject"><code>ExternalProject</code></a> and consistent source navigation and refactoring is desired across projects.</li> </ul>   <h2>Allowed Values</h2> <p>The following values are allowed for <code>CMAKE_INSTALL_MODE</code>:</p> <dl class="simple"> <dt>
<code>COPY, empty or unset</code> </dt>
<dd>
<p>Duplicate the file at its destination. This is the default behavior.</p> </dd> <dt>
<code>ABS_SYMLINK</code> </dt>
<dd>
<p>Create an <em>absolute</em> symbolic link to the source file at the destination. Halt with an error if the link cannot be created.</p> </dd> <dt>
<code>ABS_SYMLINK_OR_COPY</code> </dt>
<dd>
<p>Like <code>ABS_SYMLINK</code> but fall back to silently copying if the symlink couldn't be created.</p> </dd> <dt>
<code>REL_SYMLINK</code> </dt>
<dd>
<p>Create a <em>relative</em> symbolic link to the source file at the destination. Halt with an error if the link cannot be created.</p> </dd> <dt>
<code>REL_SYMLINK_OR_COPY</code> </dt>
<dd>
<p>Like <code>REL_SYMLINK</code> but fall back to silently copying if the symlink couldn't be created.</p> </dd> <dt>
<code>SYMLINK</code> </dt>
<dd>
<p>Try as if through <code>REL_SYMLINK</code> and fall back to <code>ABS_SYMLINK</code> if the referenced file cannot be expressed using a relative path. Halt with an error if the link cannot be created.</p> </dd> <dt>
<code>SYMLINK_OR_COPY</code> </dt>
<dd>
<p>Like <code>SYMLINK</code> but fall back to silently copying if the symlink couldn't be created.</p> </dd> </dl> <div class="admonition note"> <p class="admonition-title">Note</p> <p>A symbolic link consists of a reference file path rather than contents of its own, hence there are two ways to express the relation, either by a <em>relative</em> or an <em>absolute</em> path.</p> </div>   <h2>When To Set The Environment Variable</h2> <p>For the environment variable to take effect, it must be set during the correct build phase(s).</p> <ul class="simple"> <li>If the project calls <a class="reference internal" href="../command/file.html#command:file" title="file" id="index-1-command:file"><code>file(INSTALL)</code></a> directly, the environment variable must be set during the configuration phase.</li> <li>In order to apply to <a class="reference internal" href="../command/install.html#command:install" title="install" id="index-1-command:install"><code>install()</code></a>, the environment variable must be set during installation. This could be during a build if using the <code>install</code> or <code>package</code> build targets, or separate from the build when invoking an install or running <a class="reference internal" href="../manual/cpack.1.html#manual:cpack(1)" title="cpack(1)" id="index-0-manual:cpack(1)"><code>cpack</code></a> from the command line.</li> <li>When using <a class="reference internal" href="../module/externalproject.html#module:ExternalProject" title="ExternalProject" id="index-1-module:ExternalProject"><code>ExternalProject</code></a>, it might be required during the build phase, since the external project's own configure, build and install steps will execute during the main project's build phase.</li> </ul> <p>Given the above, it is recommended to set the environment variable consistently across all phases (configure, build and install).</p>   <h2>Caveats</h2> <p>Use this environment variable with caution. The following highlights some points to be considered:</p> <ul class="simple"> <li>
<code>CMAKE_INSTALL_MODE</code> only affects files, not directories.</li> <li>Symbolic links are not available on all platforms.</li> <li>The way this environment variable interacts with the install step of <a class="reference internal" href="../module/externalproject.html#module:ExternalProject" title="ExternalProject" id="index-2-module:ExternalProject"><code>ExternalProject</code></a> is more complex. For further details, see that module's documentation.</li> <li>A symbolic link ties the destination to the source in a persistent way. Writing to either of the two affects both file system objects. This is in contrast to normal install behavior which only copies files as they were at the time the install was performed, with no enduring relationship between the source and destination of the install.</li> <li>Combining <code>CMAKE_INSTALL_MODE</code> with <a class="reference internal" href="../prop_tgt/ios_install_combined.html#prop_tgt:IOS_INSTALL_COMBINED" title="IOS_INSTALL_COMBINED" id="index-0-prop_tgt:IOS_INSTALL_COMBINED"><code>IOS_INSTALL_COMBINED</code></a> is not supported.</li> <li>Changing <code>CMAKE_INSTALL_MODE</code> from what it was on a previous run can lead to unexpected results. Moving from a non-symlinking mode to a symlinking mode will discard any previous file at the destination, but the reverse is not true. Once a symlink exists at the destination, even if you switch to a non-symlink mode, the symlink will continue to exist at the destination and will not be replaced by an actual file.</li> </ul>   <div class="_attribution">
  <p class="_attribution-p">
    &copy; 2000&ndash;2023 Kitware, Inc. and Contributors<br>Licensed under the BSD 3-clause License.<br>
    <a href="https://cmake.org/cmake/help/v3.26/envvar/CMAKE_INSTALL_MODE.html" class="_attribution-link">https://cmake.org/cmake/help/v3.26/envvar/CMAKE_INSTALL_MODE.html</a>
  </p>
</div>
