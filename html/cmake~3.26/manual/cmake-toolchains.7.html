<h1 id="manual:cmake-toolchains(7)">cmake-toolchains(7)</h1>   <ul> <li><a class="reference internal" href="#introduction" id="id9">Introduction</a></li> <li><a class="reference internal" href="#languages" id="id10">Languages</a></li> <li><a class="reference internal" href="#variables-and-properties" id="id11">Variables and Properties</a></li> <li><a class="reference internal" href="#toolchain-features" id="id12">Toolchain Features</a></li> <li>
<p><a class="reference internal" href="#cross-compiling" id="id13">Cross Compiling</a></p> <ul> <li><a class="reference internal" href="#cross-compiling-for-linux" id="id14">Cross Compiling for Linux</a></li> <li><a class="reference internal" href="#cross-compiling-for-the-cray-linux-environment" id="id15">Cross Compiling for the Cray Linux Environment</a></li> <li><a class="reference internal" href="#cross-compiling-using-clang" id="id16">Cross Compiling using Clang</a></li> <li><a class="reference internal" href="#cross-compiling-for-qnx" id="id17">Cross Compiling for QNX</a></li> <li><a class="reference internal" href="#cross-compiling-for-windows-ce" id="id18">Cross Compiling for Windows CE</a></li> <li><a class="reference internal" href="#cross-compiling-for-windows-10-universal-applications" id="id19">Cross Compiling for Windows 10 Universal Applications</a></li> <li><a class="reference internal" href="#cross-compiling-for-windows-phone" id="id20">Cross Compiling for Windows Phone</a></li> <li><a class="reference internal" href="#cross-compiling-for-windows-store" id="id21">Cross Compiling for Windows Store</a></li> <li><a class="reference internal" href="#cross-compiling-for-adsp-sharc-blackfin" id="id22">Cross Compiling for ADSP SHARC/Blackfin</a></li> <li>
<p><a class="reference internal" href="#cross-compiling-for-android" id="id23">Cross Compiling for Android</a></p> <ul> <li><a class="reference internal" href="#cross-compiling-for-android-with-the-ndk" id="id24">Cross Compiling for Android with the NDK</a></li> <li><a class="reference internal" href="#cross-compiling-for-android-with-a-standalone-toolchain" id="id25">Cross Compiling for Android with a Standalone Toolchain</a></li> <li><a class="reference internal" href="#cross-compiling-for-android-with-nvidia-nsight-tegra-visual-studio-edition" id="id26">Cross Compiling for Android with NVIDIA Nsight Tegra Visual Studio Edition</a></li> </ul> </li> <li>
<p><a class="reference internal" href="#cross-compiling-for-ios-tvos-or-watchos" id="id27">Cross Compiling for iOS, tvOS, or watchOS</a></p> <ul> <li><a class="reference internal" href="#code-signing" id="id28">Code Signing</a></li> <li><a class="reference internal" href="#switching-between-device-and-simulator" id="id29">Switching Between Device and Simulator</a></li> </ul> </li> </ul> </li> </ul>
   <h2>Introduction</h2> <p>CMake uses a toolchain of utilities to compile, link libraries and create archives, and other tasks to drive the build. The toolchain utilities available are determined by the languages enabled. In normal builds, CMake automatically determines the toolchain for host builds based on system introspection and defaults. In cross-compiling scenarios, a toolchain file may be specified with information about compiler and utility paths.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.19: </span>One may use <a class="reference internal" href="cmake-presets.7.html#manual:cmake-presets(7)" title="cmake-presets(7)" id="index-0-manual:cmake-presets(7)"><code>cmake-presets(7)</code></a> to specify toolchain files.</p> </div>   <h2>Languages</h2> <p>Languages are enabled by the <a class="reference internal" href="../command/project.html#command:project" title="project" id="index-0-command:project"><code>project()</code></a> command. Language-specific built-in variables, such as <a class="reference internal" href="#" title="CMAKE_&lt;LANG&gt;_COMPILER" id="index-0-variable:CMAKE_&lt;LANG&gt;_COMPILER"><code>CMAKE_CXX_COMPILER</code></a>, <a class="reference internal" href="#" title="CMAKE_&lt;LANG&gt;_COMPILER_ID" id="index-0-variable:CMAKE_&lt;LANG&gt;_COMPILER_ID"><code>CMAKE_CXX_COMPILER_ID</code></a> etc are set by invoking the <a class="reference internal" href="../command/project.html#command:project" title="project" id="index-1-command:project"><code>project()</code></a> command. If no project command is in the top-level CMakeLists file, one will be implicitly generated. By default the enabled languages are <code>C</code> and <code>CXX</code>:</p> <pre data-language="cmake">project(C_Only C)
</pre> <p>A special value of <code>NONE</code> can also be used with the <a class="reference internal" href="../command/project.html#command:project" title="project" id="index-2-command:project"><code>project()</code></a> command to enable no languages:</p> <pre data-language="cmake">project(MyProject NONE)
</pre> <p>The <a class="reference internal" href="../command/enable_language.html#command:enable_language" title="enable_language" id="index-0-command:enable_language"><code>enable_language()</code></a> command can be used to enable languages after the <a class="reference internal" href="../command/project.html#command:project" title="project" id="index-3-command:project"><code>project()</code></a> command:</p> <pre data-language="cmake">enable_language(CXX)
</pre> <p>When a language is enabled, CMake finds a compiler for that language, and determines some information, such as the vendor and version of the compiler, the target architecture and bitwidth, the location of corresponding utilities etc.</p> <p>The <a class="reference internal" href="../prop_gbl/enabled_languages.html#prop_gbl:ENABLED_LANGUAGES" title="ENABLED_LANGUAGES" id="index-0-prop_gbl:ENABLED_LANGUAGES"><code>ENABLED_LANGUAGES</code></a> global property contains the languages which are currently enabled.</p>   <h2>Variables and Properties</h2> <p>Several variables relate to the language components of a toolchain which are enabled:</p> <dl class="simple"> <dt>
 <a class="reference internal" href="#" title="CMAKE_&lt;LANG&gt;_COMPILER" id="index-1-variable:CMAKE_&lt;LANG&gt;_COMPILER"><code>CMAKE_&lt;LANG&gt;_COMPILER</code></a>
</dt>
<dd>
<p>The full path to the compiler used for <code>&lt;LANG&gt;</code></p> </dd> <dt>
 <a class="reference internal" href="#" title="CMAKE_&lt;LANG&gt;_COMPILER_ID" id="index-1-variable:CMAKE_&lt;LANG&gt;_COMPILER_ID"><code>CMAKE_&lt;LANG&gt;_COMPILER_ID</code></a>
</dt>
<dd>
<p>The compiler identifier used by CMake</p> </dd> <dt>
 <a class="reference internal" href="#" title="CMAKE_&lt;LANG&gt;_COMPILER_VERSION" id="index-0-variable:CMAKE_&lt;LANG&gt;_COMPILER_VERSION"><code>CMAKE_&lt;LANG&gt;_COMPILER_VERSION</code></a>
</dt>
<dd>
<p>The version of the compiler.</p> </dd> <dt>
 <a class="reference internal" href="#" title="CMAKE_&lt;LANG&gt;_FLAGS" id="index-0-variable:CMAKE_&lt;LANG&gt;_FLAGS"><code>CMAKE_&lt;LANG&gt;_FLAGS</code></a>
</dt>
<dd>
<p>The variables and the configuration-specific equivalents contain flags that will be added to the compile command when compiling a file of a particular language.</p> </dd> </dl> <p>CMake needs a way to determine which compiler to use to invoke the linker. This is determined by the <a class="reference internal" href="../prop_sf/language.html#prop_sf:LANGUAGE" title="LANGUAGE" id="index-0-prop_sf:LANGUAGE"><code>LANGUAGE</code></a> property of source files of the <a class="reference internal" href="cmake-buildsystem.7.html#manual:cmake-buildsystem(7)" title="cmake-buildsystem(7)" id="index-0-manual:cmake-buildsystem(7)"><code>target</code></a>, and in the case of static libraries, the <code>LANGUAGE</code> of the dependent libraries. The choice CMake makes may be overridden with the <a class="reference internal" href="../prop_tgt/linker_language.html#prop_tgt:LINKER_LANGUAGE" title="LINKER_LANGUAGE" id="index-0-prop_tgt:LINKER_LANGUAGE"><code>LINKER_LANGUAGE</code></a> target property.</p>   <h2>Toolchain Features</h2> <p>CMake provides the <a class="reference internal" href="../command/try_compile.html#command:try_compile" title="try_compile" id="index-0-command:try_compile"><code>try_compile()</code></a> command and wrapper macros such as <a class="reference internal" href="../module/checkcxxsourcecompiles.html#module:CheckCXXSourceCompiles" title="CheckCXXSourceCompiles" id="index-0-module:CheckCXXSourceCompiles"><code>CheckCXXSourceCompiles</code></a>, <a class="reference internal" href="../module/checkcxxsymbolexists.html#module:CheckCXXSymbolExists" title="CheckCXXSymbolExists" id="index-0-module:CheckCXXSymbolExists"><code>CheckCXXSymbolExists</code></a> and <a class="reference internal" href="../module/checkincludefile.html#module:CheckIncludeFile" title="CheckIncludeFile" id="index-0-module:CheckIncludeFile"><code>CheckIncludeFile</code></a> to test capability and availability of various toolchain features. These APIs test the toolchain in some way and cache the result so that the test does not have to be performed again the next time CMake runs.</p> <p>Some toolchain features have built-in handling in CMake, and do not require compile-tests. For example, <a class="reference internal" href="../prop_tgt/position_independent_code.html#prop_tgt:POSITION_INDEPENDENT_CODE" title="POSITION_INDEPENDENT_CODE" id="index-0-prop_tgt:POSITION_INDEPENDENT_CODE"><code>POSITION_INDEPENDENT_CODE</code></a> allows specifying that a target should be built as position-independent code, if the compiler supports that feature. The <a class="reference internal" href="#" title="&lt;LANG&gt;_VISIBILITY_PRESET" id="index-0-prop_tgt:&lt;LANG&gt;_VISIBILITY_PRESET"><code>&lt;LANG&gt;_VISIBILITY_PRESET</code></a> and <a class="reference internal" href="../prop_tgt/visibility_inlines_hidden.html#prop_tgt:VISIBILITY_INLINES_HIDDEN" title="VISIBILITY_INLINES_HIDDEN" id="index-0-prop_tgt:VISIBILITY_INLINES_HIDDEN"><code>VISIBILITY_INLINES_HIDDEN</code></a> target properties add flags for hidden visibility, if supported by the compiler.</p>   <h2 id="cross-compiling-toolchain">Cross Compiling</h2> <p>If <a class="reference internal" href="cmake.1.html#manual:cmake(1)" title="cmake(1)" id="index-0-manual:cmake(1)"><code>cmake(1)</code></a> is invoked with the command line parameter <a class="reference internal" href="cmake.1.html#cmdoption-cmake-toolchain"><code>--toolchain path/to/file</code></a> or <a class="reference internal" href="cmake.1.html#cmdoption-cmake-D"><code>-DCMAKE_TOOLCHAIN_FILE=path/to/file</code></a>, the file will be loaded early to set values for the compilers. The <a class="reference internal" href="../variable/cmake_crosscompiling.html#variable:CMAKE_CROSSCOMPILING" title="CMAKE_CROSSCOMPILING" id="index-0-variable:CMAKE_CROSSCOMPILING"><code>CMAKE_CROSSCOMPILING</code></a> variable is set to true when CMake is cross-compiling.</p> <p>Note that using the <a class="reference internal" href="../variable/cmake_source_dir.html#variable:CMAKE_SOURCE_DIR" title="CMAKE_SOURCE_DIR" id="index-0-variable:CMAKE_SOURCE_DIR"><code>CMAKE_SOURCE_DIR</code></a> or <a class="reference internal" href="../variable/cmake_binary_dir.html#variable:CMAKE_BINARY_DIR" title="CMAKE_BINARY_DIR" id="index-0-variable:CMAKE_BINARY_DIR"><code>CMAKE_BINARY_DIR</code></a> variables inside a toolchain file is typically undesirable. The toolchain file is used in contexts where these variables have different values when used in different places (e.g. as part of a call to <a class="reference internal" href="../command/try_compile.html#command:try_compile" title="try_compile" id="index-1-command:try_compile"><code>try_compile()</code></a>). In most cases, where there is a need to evaluate paths inside a toolchain file, the more appropriate variable to use would be <a class="reference internal" href="../variable/cmake_current_list_dir.html#variable:CMAKE_CURRENT_LIST_DIR" title="CMAKE_CURRENT_LIST_DIR" id="index-0-variable:CMAKE_CURRENT_LIST_DIR"><code>CMAKE_CURRENT_LIST_DIR</code></a>, since it always has an unambiguous, predictable value.</p>  <h3>Cross Compiling for Linux</h3> <p>A typical cross-compiling toolchain for Linux has content such as:</p> <pre data-language="cmake">set(CMAKE_SYSTEM_NAME Linux)
set(CMAKE_SYSTEM_PROCESSOR arm)

set(CMAKE_SYSROOT /home/devel/rasp-pi-rootfs)
set(CMAKE_STAGING_PREFIX /home/devel/stage)

set(tools /home/devel/gcc-4.7-linaro-rpi-gnueabihf)
set(CMAKE_C_COMPILER ${tools}/bin/arm-linux-gnueabihf-gcc)
set(CMAKE_CXX_COMPILER ${tools}/bin/arm-linux-gnueabihf-g++)

set(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM NEVER)
set(CMAKE_FIND_ROOT_PATH_MODE_LIBRARY ONLY)
set(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE ONLY)
set(CMAKE_FIND_ROOT_PATH_MODE_PACKAGE ONLY)
</pre> <p>Where:</p> <dl class="simple"> <dt>
 <a class="reference internal" href="../variable/cmake_system_name.html#variable:CMAKE_SYSTEM_NAME" title="CMAKE_SYSTEM_NAME" id="index-0-variable:CMAKE_SYSTEM_NAME"><code>CMAKE_SYSTEM_NAME</code></a>
</dt>
<dd>
<p>is the CMake-identifier of the target platform to build for.</p> </dd> <dt>
 <a class="reference internal" href="../variable/cmake_system_processor.html#variable:CMAKE_SYSTEM_PROCESSOR" title="CMAKE_SYSTEM_PROCESSOR" id="index-0-variable:CMAKE_SYSTEM_PROCESSOR"><code>CMAKE_SYSTEM_PROCESSOR</code></a>
</dt>
<dd>
<p>is the CMake-identifier of the target architecture.</p> </dd> <dt>
 <a class="reference internal" href="../variable/cmake_sysroot.html#variable:CMAKE_SYSROOT" title="CMAKE_SYSROOT" id="index-0-variable:CMAKE_SYSROOT"><code>CMAKE_SYSROOT</code></a>
</dt>
<dd>
<p>is optional, and may be specified if a sysroot is available.</p> </dd> <dt>
 <a class="reference internal" href="../variable/cmake_staging_prefix.html#variable:CMAKE_STAGING_PREFIX" title="CMAKE_STAGING_PREFIX" id="index-0-variable:CMAKE_STAGING_PREFIX"><code>CMAKE_STAGING_PREFIX</code></a>
</dt>
<dd>
<p>is also optional. It may be used to specify a path on the host to install to. The <a class="reference internal" href="../variable/cmake_install_prefix.html#variable:CMAKE_INSTALL_PREFIX" title="CMAKE_INSTALL_PREFIX" id="index-0-variable:CMAKE_INSTALL_PREFIX"><code>CMAKE_INSTALL_PREFIX</code></a> is always the runtime installation location, even when cross-compiling.</p> </dd> <dt>
 <a class="reference internal" href="#" title="CMAKE_&lt;LANG&gt;_COMPILER" id="index-2-variable:CMAKE_&lt;LANG&gt;_COMPILER"><code>CMAKE_&lt;LANG&gt;_COMPILER</code></a>
</dt>
<dd>
<p>variable may be set to full paths, or to names of compilers to search for in standard locations. For toolchains that do not support linking binaries without custom flags or scripts one may set the <a class="reference internal" href="../variable/cmake_try_compile_target_type.html#variable:CMAKE_TRY_COMPILE_TARGET_TYPE" title="CMAKE_TRY_COMPILE_TARGET_TYPE" id="index-0-variable:CMAKE_TRY_COMPILE_TARGET_TYPE"><code>CMAKE_TRY_COMPILE_TARGET_TYPE</code></a> variable to <code>STATIC_LIBRARY</code> to tell CMake not to try to link executables during its checks.</p> </dd> </dl> <p>CMake <code>find_*</code> commands will look in the sysroot, and the <a class="reference internal" href="../variable/cmake_find_root_path.html#variable:CMAKE_FIND_ROOT_PATH" title="CMAKE_FIND_ROOT_PATH" id="index-0-variable:CMAKE_FIND_ROOT_PATH"><code>CMAKE_FIND_ROOT_PATH</code></a> entries by default in all cases, as well as looking in the host system root prefix. Although this can be controlled on a case-by-case basis, when cross-compiling, it can be useful to exclude looking in either the host or the target for particular artifacts. Generally, includes, libraries and packages should be found in the target system prefixes, whereas executables which must be run as part of the build should be found only on the host and not on the target. This is the purpose of the <code>CMAKE_FIND_ROOT_PATH_MODE_*</code> variables.</p>   <h3 id="cray-cross-compile">Cross Compiling for the Cray Linux Environment</h3> <p>Cross compiling for compute nodes in the Cray Linux Environment can be done without needing a separate toolchain file. Specifying <code>-DCMAKE_SYSTEM_NAME=CrayLinuxEnvironment</code> on the CMake command line will ensure that the appropriate build settings and search paths are configured. The platform will pull its configuration from the current environment variables and will configure a project to use the compiler wrappers from the Cray Programming Environment's <code>PrgEnv-*</code> modules if present and loaded.</p> <p>The default configuration of the Cray Programming Environment is to only support static libraries. This can be overridden and shared libraries enabled by setting the <code>CRAYPE_LINK_TYPE</code> environment variable to <code>dynamic</code>.</p> <p>Running CMake without specifying <a class="reference internal" href="../variable/cmake_system_name.html#variable:CMAKE_SYSTEM_NAME" title="CMAKE_SYSTEM_NAME" id="index-1-variable:CMAKE_SYSTEM_NAME"><code>CMAKE_SYSTEM_NAME</code></a> will run the configure step in host mode assuming a standard Linux environment. If not overridden, the <code>PrgEnv-*</code> compiler wrappers will end up getting used, which if targeting the either the login node or compute node, is likely not the desired behavior. The exception to this would be if you are building directly on a NID instead of cross-compiling from a login node. If trying to build software for a login node, you will need to either first unload the currently loaded <code>PrgEnv-*</code> module or explicitly tell CMake to use the system compilers in <code>/usr/bin</code> instead of the Cray wrappers. If instead targeting a compute node is desired, just specify the <a class="reference internal" href="../variable/cmake_system_name.html#variable:CMAKE_SYSTEM_NAME" title="CMAKE_SYSTEM_NAME" id="index-2-variable:CMAKE_SYSTEM_NAME"><code>CMAKE_SYSTEM_NAME</code></a> as mentioned above.</p>   <h3>Cross Compiling using Clang</h3> <p>Some compilers such as Clang are inherently cross compilers. The <a class="reference internal" href="#" title="CMAKE_&lt;LANG&gt;_COMPILER_TARGET" id="index-0-variable:CMAKE_&lt;LANG&gt;_COMPILER_TARGET"><code>CMAKE_&lt;LANG&gt;_COMPILER_TARGET</code></a> can be set to pass a value to those supported compilers when compiling:</p> <pre data-language="cmake">set(CMAKE_SYSTEM_NAME Linux)
set(CMAKE_SYSTEM_PROCESSOR arm)

set(triple arm-linux-gnueabihf)

set(CMAKE_C_COMPILER clang)
set(CMAKE_C_COMPILER_TARGET ${triple})
set(CMAKE_CXX_COMPILER clang++)
set(CMAKE_CXX_COMPILER_TARGET ${triple})
</pre> <p>Similarly, some compilers do not ship their own supplementary utilities such as linkers, but provide a way to specify the location of the external toolchain which will be used by the compiler driver. The <a class="reference internal" href="#" title="CMAKE_&lt;LANG&gt;_COMPILER_EXTERNAL_TOOLCHAIN" id="index-0-variable:CMAKE_&lt;LANG&gt;_COMPILER_EXTERNAL_TOOLCHAIN"><code>CMAKE_&lt;LANG&gt;_COMPILER_EXTERNAL_TOOLCHAIN</code></a> variable can be set in a toolchain file to pass the path to the compiler driver.</p>   <h3>Cross Compiling for QNX</h3> <p>As the Clang compiler the QNX QCC compile is inherently a cross compiler. And the <a class="reference internal" href="#" title="CMAKE_&lt;LANG&gt;_COMPILER_TARGET" id="index-1-variable:CMAKE_&lt;LANG&gt;_COMPILER_TARGET"><code>CMAKE_&lt;LANG&gt;_COMPILER_TARGET</code></a> can be set to pass a value to those supported compilers when compiling:</p> <pre data-language="cmake">set(CMAKE_SYSTEM_NAME QNX)

set(arch gcc_ntoarmv7le)

set(CMAKE_C_COMPILER qcc)
set(CMAKE_C_COMPILER_TARGET ${arch})
set(CMAKE_CXX_COMPILER QCC)
set(CMAKE_CXX_COMPILER_TARGET ${arch})

set(CMAKE_SYSROOT $ENV{QNX_TARGET})
</pre>   <h3>Cross Compiling for Windows CE</h3> <p>Cross compiling for Windows CE requires the corresponding SDK being installed on your system. These SDKs are usually installed under <code>C:/Program Files (x86)/Windows CE Tools/SDKs</code>.</p> <p>A toolchain file to configure a Visual Studio generator for Windows CE may look like this:</p> <pre data-language="cmake">set(CMAKE_SYSTEM_NAME WindowsCE)

set(CMAKE_SYSTEM_VERSION 8.0)
set(CMAKE_SYSTEM_PROCESSOR arm)

set(CMAKE_GENERATOR_TOOLSET CE800) # Can be omitted for 8.0
set(CMAKE_GENERATOR_PLATFORM SDK_AM335X_SK_WEC2013_V310)
</pre> <p>The <a class="reference internal" href="../variable/cmake_generator_platform.html#variable:CMAKE_GENERATOR_PLATFORM" title="CMAKE_GENERATOR_PLATFORM" id="index-0-variable:CMAKE_GENERATOR_PLATFORM"><code>CMAKE_GENERATOR_PLATFORM</code></a> tells the generator which SDK to use. Further <a class="reference internal" href="../variable/cmake_system_version.html#variable:CMAKE_SYSTEM_VERSION" title="CMAKE_SYSTEM_VERSION" id="index-0-variable:CMAKE_SYSTEM_VERSION"><code>CMAKE_SYSTEM_VERSION</code></a> tells the generator what version of Windows CE to use. Currently version 8.0 (Windows Embedded Compact 2013) is supported out of the box. Other versions may require one to set <a class="reference internal" href="../variable/cmake_generator_toolset.html#variable:CMAKE_GENERATOR_TOOLSET" title="CMAKE_GENERATOR_TOOLSET" id="index-0-variable:CMAKE_GENERATOR_TOOLSET"><code>CMAKE_GENERATOR_TOOLSET</code></a> to the correct value.</p>   <h3>Cross Compiling for Windows 10 Universal Applications</h3> <p>A toolchain file to configure a Visual Studio generator for a Windows 10 Universal Application may look like this:</p> <pre data-language="cmake">set(CMAKE_SYSTEM_NAME WindowsStore)
set(CMAKE_SYSTEM_VERSION 10.0)
</pre> <p>A Windows 10 Universal Application targets both Windows Store and Windows Phone. Specify the <a class="reference internal" href="../variable/cmake_system_version.html#variable:CMAKE_SYSTEM_VERSION" title="CMAKE_SYSTEM_VERSION" id="index-1-variable:CMAKE_SYSTEM_VERSION"><code>CMAKE_SYSTEM_VERSION</code></a> variable to be <code>10.0</code> to build with the latest available Windows 10 SDK. Specify a more specific version (e.g. <code>10.0.10240.0</code> for RTM) to build with the corresponding SDK.</p>   <h3>Cross Compiling for Windows Phone</h3> <p>A toolchain file to configure a Visual Studio generator for Windows Phone may look like this:</p> <pre data-language="cmake">set(CMAKE_SYSTEM_NAME WindowsPhone)
set(CMAKE_SYSTEM_VERSION 8.1)
</pre>   <h3>Cross Compiling for Windows Store</h3> <p>A toolchain file to configure a Visual Studio generator for Windows Store may look like this:</p> <pre data-language="cmake">set(CMAKE_SYSTEM_NAME WindowsStore)
set(CMAKE_SYSTEM_VERSION 8.1)
</pre>   <h3 id="id1">Cross Compiling for ADSP SHARC/Blackfin</h3> <p>Cross-compiling for ADSP SHARC or Blackfin can be configured by setting the <a class="reference internal" href="../variable/cmake_system_name.html#variable:CMAKE_SYSTEM_NAME" title="CMAKE_SYSTEM_NAME" id="index-3-variable:CMAKE_SYSTEM_NAME"><code>CMAKE_SYSTEM_NAME</code></a> variable to <code>ADSP</code> and the <a class="reference internal" href="../variable/cmake_system_processor.html#variable:CMAKE_SYSTEM_PROCESSOR" title="CMAKE_SYSTEM_PROCESSOR" id="index-1-variable:CMAKE_SYSTEM_PROCESSOR"><code>CMAKE_SYSTEM_PROCESSOR</code></a> variable to the "part number", excluding the <code>ADSP-</code> prefix, for example, <code>21594</code>, <code>SC589</code>, etc. This value is case insensitive.</p> <p>CMake will automatically search for CCES or VDSP++ installs in their default install locations and select the most recent version found. CCES will be selected over VDSP++ if both are installed. Custom install paths can be set via the <a class="reference internal" href="../variable/cmake_adsp_root.html#variable:CMAKE_ADSP_ROOT" title="CMAKE_ADSP_ROOT" id="index-0-variable:CMAKE_ADSP_ROOT"><code>CMAKE_ADSP_ROOT</code></a> variable or the <a class="reference internal" href="../envvar/adsp_root.html#envvar:ADSP_ROOT" title="ADSP_ROOT" id="index-0-envvar:ADSP_ROOT"><code>ADSP_ROOT</code></a> environment variable.</p> <p>The compiler (<code>cc21k</code> vs. <code>ccblkfn</code>) is selected automatically based on the <a class="reference internal" href="../variable/cmake_system_processor.html#variable:CMAKE_SYSTEM_PROCESSOR" title="CMAKE_SYSTEM_PROCESSOR" id="index-2-variable:CMAKE_SYSTEM_PROCESSOR"><code>CMAKE_SYSTEM_PROCESSOR</code></a> value provided.</p>   <h3 id="id2">Cross Compiling for Android</h3> <p>A toolchain file may configure cross-compiling for Android by setting the <a class="reference internal" href="../variable/cmake_system_name.html#variable:CMAKE_SYSTEM_NAME" title="CMAKE_SYSTEM_NAME" id="index-4-variable:CMAKE_SYSTEM_NAME"><code>CMAKE_SYSTEM_NAME</code></a> variable to <code>Android</code>. Further configuration is specific to the Android development environment to be used.</p> <p>For <a class="reference internal" href="cmake-generators.7.html#visual-studio-generators"><span class="std std-ref">Visual Studio Generators</span></a>, CMake expects <a class="reference internal" href="#cross-compiling-for-android-with-nvidia-nsight-tegra-visual-studio-edition"><span class="std std-ref">NVIDIA Nsight Tegra Visual Studio Edition</span></a> or the <a class="reference internal" href="#cross-compiling-for-android-with-the-ndk"><span class="std std-ref">Visual Studio tools for Android</span></a> to be installed. See those sections for further configuration details.</p> <p>For <a class="reference internal" href="cmake-generators.7.html#makefile-generators"><span class="std std-ref">Makefile Generators</span></a> and the <a class="reference internal" href="https://cmake.org/cmake/help/v3.26/generator/Ninja.html#generator:Ninja" title="Ninja" id="index-0-generator:Ninja"><code>Ninja</code></a> generator, CMake expects one of these environments:</p> <ul class="simple"> <li><a class="reference internal" href="#cross-compiling-for-android-with-the-ndk"><span class="std std-ref">NDK</span></a></li> <li><a class="reference internal" href="#cross-compiling-for-android-with-a-standalone-toolchain"><span class="std std-ref">Standalone Toolchain</span></a></li> </ul> <p>CMake uses the following steps to select one of the environments:</p> <ul class="simple"> <li>If the <a class="reference internal" href="../variable/cmake_android_ndk.html#variable:CMAKE_ANDROID_NDK" title="CMAKE_ANDROID_NDK" id="index-0-variable:CMAKE_ANDROID_NDK"><code>CMAKE_ANDROID_NDK</code></a> variable is set, the NDK at the specified location will be used.</li> <li>Else, if the <a class="reference internal" href="../variable/cmake_android_standalone_toolchain.html#variable:CMAKE_ANDROID_STANDALONE_TOOLCHAIN" title="CMAKE_ANDROID_STANDALONE_TOOLCHAIN" id="index-0-variable:CMAKE_ANDROID_STANDALONE_TOOLCHAIN"><code>CMAKE_ANDROID_STANDALONE_TOOLCHAIN</code></a> variable is set, the Standalone Toolchain at the specified location will be used.</li> <li>Else, if the <a class="reference internal" href="../variable/cmake_sysroot.html#variable:CMAKE_SYSROOT" title="CMAKE_SYSROOT" id="index-1-variable:CMAKE_SYSROOT"><code>CMAKE_SYSROOT</code></a> variable is set to a directory of the form <code>&lt;ndk&gt;/platforms/android-&lt;api&gt;/arch-&lt;arch&gt;</code>, the <code>&lt;ndk&gt;</code> part will be used as the value of <a class="reference internal" href="../variable/cmake_android_ndk.html#variable:CMAKE_ANDROID_NDK" title="CMAKE_ANDROID_NDK" id="index-1-variable:CMAKE_ANDROID_NDK"><code>CMAKE_ANDROID_NDK</code></a> and the NDK will be used.</li> <li>Else, if the <a class="reference internal" href="../variable/cmake_sysroot.html#variable:CMAKE_SYSROOT" title="CMAKE_SYSROOT" id="index-2-variable:CMAKE_SYSROOT"><code>CMAKE_SYSROOT</code></a> variable is set to a directory of the form <code>&lt;standalone-toolchain&gt;/sysroot</code>, the <code>&lt;standalone-toolchain&gt;</code> part will be used as the value of <a class="reference internal" href="../variable/cmake_android_standalone_toolchain.html#variable:CMAKE_ANDROID_STANDALONE_TOOLCHAIN" title="CMAKE_ANDROID_STANDALONE_TOOLCHAIN" id="index-1-variable:CMAKE_ANDROID_STANDALONE_TOOLCHAIN"><code>CMAKE_ANDROID_STANDALONE_TOOLCHAIN</code></a> and the Standalone Toolchain will be used.</li> <li>Else, if a cmake variable <code>ANDROID_NDK</code> is set it will be used as the value of <a class="reference internal" href="../variable/cmake_android_ndk.html#variable:CMAKE_ANDROID_NDK" title="CMAKE_ANDROID_NDK" id="index-2-variable:CMAKE_ANDROID_NDK"><code>CMAKE_ANDROID_NDK</code></a>, and the NDK will be used.</li> <li>Else, if a cmake variable <code>ANDROID_STANDALONE_TOOLCHAIN</code> is set, it will be used as the value of <a class="reference internal" href="../variable/cmake_android_standalone_toolchain.html#variable:CMAKE_ANDROID_STANDALONE_TOOLCHAIN" title="CMAKE_ANDROID_STANDALONE_TOOLCHAIN" id="index-2-variable:CMAKE_ANDROID_STANDALONE_TOOLCHAIN"><code>CMAKE_ANDROID_STANDALONE_TOOLCHAIN</code></a>, and the Standalone Toolchain will be used.</li> <li>Else, if an environment variable <code>ANDROID_NDK_ROOT</code> or <code>ANDROID_NDK</code> is set, it will be used as the value of <a class="reference internal" href="../variable/cmake_android_ndk.html#variable:CMAKE_ANDROID_NDK" title="CMAKE_ANDROID_NDK" id="index-3-variable:CMAKE_ANDROID_NDK"><code>CMAKE_ANDROID_NDK</code></a>, and the NDK will be used.</li> <li>Else, if an environment variable <code>ANDROID_STANDALONE_TOOLCHAIN</code> is set then it will be used as the value of <a class="reference internal" href="../variable/cmake_android_standalone_toolchain.html#variable:CMAKE_ANDROID_STANDALONE_TOOLCHAIN" title="CMAKE_ANDROID_STANDALONE_TOOLCHAIN" id="index-3-variable:CMAKE_ANDROID_STANDALONE_TOOLCHAIN"><code>CMAKE_ANDROID_STANDALONE_TOOLCHAIN</code></a>, and the Standalone Toolchain will be used.</li> <li>Else, an error diagnostic will be issued that neither the NDK or Standalone Toolchain can be found.</li> </ul> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.20: </span>If an Android NDK is selected, its version number is reported in the <a class="reference internal" href="../variable/cmake_android_ndk_version.html#variable:CMAKE_ANDROID_NDK_VERSION" title="CMAKE_ANDROID_NDK_VERSION" id="index-0-variable:CMAKE_ANDROID_NDK_VERSION"><code>CMAKE_ANDROID_NDK_VERSION</code></a> variable.</p> </div>  <h4 id="id3">Cross Compiling for Android with the NDK</h4> <p>A toolchain file may configure <a class="reference internal" href="cmake-generators.7.html#makefile-generators"><span class="std std-ref">Makefile Generators</span></a>, <a class="reference internal" href="cmake-generators.7.html#ninja-generators"><span class="std std-ref">Ninja Generators</span></a>, or <a class="reference internal" href="cmake-generators.7.html#visual-studio-generators"><span class="std std-ref">Visual Studio Generators</span></a> to target Android for cross-compiling.</p> <p>Configure use of an Android NDK with the following variables:</p> <dl class="simple"> <dt>
 <a class="reference internal" href="../variable/cmake_system_name.html#variable:CMAKE_SYSTEM_NAME" title="CMAKE_SYSTEM_NAME" id="index-5-variable:CMAKE_SYSTEM_NAME"><code>CMAKE_SYSTEM_NAME</code></a>
</dt>
<dd>
<p>Set to <code>Android</code>. Must be specified to enable cross compiling for Android.</p> </dd> <dt>
 <a class="reference internal" href="../variable/cmake_system_version.html#variable:CMAKE_SYSTEM_VERSION" title="CMAKE_SYSTEM_VERSION" id="index-2-variable:CMAKE_SYSTEM_VERSION"><code>CMAKE_SYSTEM_VERSION</code></a>
</dt>
<dd>
<p>Set to the Android API level. If not specified, the value is determined as follows:</p> <ul class="simple"> <li>If the <a class="reference internal" href="../variable/cmake_android_api.html#variable:CMAKE_ANDROID_API" title="CMAKE_ANDROID_API" id="index-0-variable:CMAKE_ANDROID_API"><code>CMAKE_ANDROID_API</code></a> variable is set, its value is used as the API level.</li> <li>If the <a class="reference internal" href="../variable/cmake_sysroot.html#variable:CMAKE_SYSROOT" title="CMAKE_SYSROOT" id="index-3-variable:CMAKE_SYSROOT"><code>CMAKE_SYSROOT</code></a> variable is set, the API level is detected from the NDK directory structure containing the sysroot.</li> <li>Otherwise, the latest API level available in the NDK is used.</li> </ul> </dd> <dt>
 <a class="reference internal" href="../variable/cmake_android_arch_abi.html#variable:CMAKE_ANDROID_ARCH_ABI" title="CMAKE_ANDROID_ARCH_ABI" id="index-0-variable:CMAKE_ANDROID_ARCH_ABI"><code>CMAKE_ANDROID_ARCH_ABI</code></a>
</dt>
<dd>
<p>Set to the Android ABI (architecture). If not specified, this variable will default to the first supported ABI in the list of <code>armeabi</code>, <code>armeabi-v7a</code> and <code>arm64-v8a</code>. The <a class="reference internal" href="../variable/cmake_android_arch.html#variable:CMAKE_ANDROID_ARCH" title="CMAKE_ANDROID_ARCH" id="index-0-variable:CMAKE_ANDROID_ARCH"><code>CMAKE_ANDROID_ARCH</code></a> variable will be computed from <code>CMAKE_ANDROID_ARCH_ABI</code> automatically. Also see the <a class="reference internal" href="../variable/cmake_android_arm_mode.html#variable:CMAKE_ANDROID_ARM_MODE" title="CMAKE_ANDROID_ARM_MODE" id="index-0-variable:CMAKE_ANDROID_ARM_MODE"><code>CMAKE_ANDROID_ARM_MODE</code></a> and <a class="reference internal" href="../variable/cmake_android_arm_neon.html#variable:CMAKE_ANDROID_ARM_NEON" title="CMAKE_ANDROID_ARM_NEON" id="index-0-variable:CMAKE_ANDROID_ARM_NEON"><code>CMAKE_ANDROID_ARM_NEON</code></a> variables.</p> </dd> <dt>
 <a class="reference internal" href="../variable/cmake_android_ndk.html#variable:CMAKE_ANDROID_NDK" title="CMAKE_ANDROID_NDK" id="index-4-variable:CMAKE_ANDROID_NDK"><code>CMAKE_ANDROID_NDK</code></a>
</dt>
<dd>
<p>Set to the absolute path to the Android NDK root directory. If not specified, a default for this variable will be chosen as specified <a class="reference internal" href="#cross-compiling-for-android"><span class="std std-ref">above</span></a>.</p> </dd> <dt>
 <a class="reference internal" href="../variable/cmake_android_ndk_deprecated_headers.html#variable:CMAKE_ANDROID_NDK_DEPRECATED_HEADERS" title="CMAKE_ANDROID_NDK_DEPRECATED_HEADERS" id="index-0-variable:CMAKE_ANDROID_NDK_DEPRECATED_HEADERS"><code>CMAKE_ANDROID_NDK_DEPRECATED_HEADERS</code></a>
</dt>
<dd>
<p>Set to a true value to use the deprecated per-api-level headers instead of the unified headers. If not specified, the default will be false unless using a NDK that does not provide unified headers.</p> </dd> <dt>
 <a class="reference internal" href="../variable/cmake_android_ndk_toolchain_version.html#variable:CMAKE_ANDROID_NDK_TOOLCHAIN_VERSION" title="CMAKE_ANDROID_NDK_TOOLCHAIN_VERSION" id="index-0-variable:CMAKE_ANDROID_NDK_TOOLCHAIN_VERSION"><code>CMAKE_ANDROID_NDK_TOOLCHAIN_VERSION</code></a>
</dt>
<dd>
<p>On NDK r19 or above, this variable must be unset or set to <code>clang</code>. On NDK r18 or below, set this to the version of the NDK toolchain to be selected as the compiler. If not specified, the default will be the latest available GCC toolchain.</p> </dd> <dt>
 <a class="reference internal" href="../variable/cmake_android_stl_type.html#variable:CMAKE_ANDROID_STL_TYPE" title="CMAKE_ANDROID_STL_TYPE" id="index-0-variable:CMAKE_ANDROID_STL_TYPE"><code>CMAKE_ANDROID_STL_TYPE</code></a>
</dt>
<dd>
<p>Set to specify which C++ standard library to use. If not specified, a default will be selected as described in the variable documentation.</p> </dd> </dl> <p>The following variables will be computed and provided automatically:</p> <dl class="simple"> <dt>
 <a class="reference internal" href="#" title="CMAKE_&lt;LANG&gt;_ANDROID_TOOLCHAIN_PREFIX" id="index-0-variable:CMAKE_&lt;LANG&gt;_ANDROID_TOOLCHAIN_PREFIX"><code>CMAKE_&lt;LANG&gt;_ANDROID_TOOLCHAIN_PREFIX</code></a>
</dt>
<dd>
<p>The absolute path prefix to the binutils in the NDK toolchain.</p> </dd> <dt>
 <a class="reference internal" href="#" title="CMAKE_&lt;LANG&gt;_ANDROID_TOOLCHAIN_SUFFIX" id="index-0-variable:CMAKE_&lt;LANG&gt;_ANDROID_TOOLCHAIN_SUFFIX"><code>CMAKE_&lt;LANG&gt;_ANDROID_TOOLCHAIN_SUFFIX</code></a>
</dt>
<dd>
<p>The host platform suffix of the binutils in the NDK toolchain.</p> </dd> </dl> <p>For example, a toolchain file might contain:</p> <pre data-language="cmake">set(CMAKE_SYSTEM_NAME Android)
set(CMAKE_SYSTEM_VERSION 21) # API level
set(CMAKE_ANDROID_ARCH_ABI arm64-v8a)
set(CMAKE_ANDROID_NDK /path/to/android-ndk)
set(CMAKE_ANDROID_STL_TYPE gnustl_static)
</pre> <p>Alternatively one may specify the values without a toolchain file:</p> <pre data-language="console">$ cmake ../src \
  -DCMAKE_SYSTEM_NAME=Android \
  -DCMAKE_SYSTEM_VERSION=21 \
  -DCMAKE_ANDROID_ARCH_ABI=arm64-v8a \
  -DCMAKE_ANDROID_NDK=/path/to/android-ndk \
  -DCMAKE_ANDROID_STL_TYPE=gnustl_static
</pre>   <h4 id="id4">Cross Compiling for Android with a Standalone Toolchain</h4> <p>A toolchain file may configure <a class="reference internal" href="cmake-generators.7.html#makefile-generators"><span class="std std-ref">Makefile Generators</span></a> or the <a class="reference internal" href="https://cmake.org/cmake/help/v3.26/generator/Ninja.html#generator:Ninja" title="Ninja" id="index-1-generator:Ninja"><code>Ninja</code></a> generator to target Android for cross-compiling using a standalone toolchain.</p> <p>Configure use of an Android standalone toolchain with the following variables:</p> <dl class="simple"> <dt>
 <a class="reference internal" href="../variable/cmake_system_name.html#variable:CMAKE_SYSTEM_NAME" title="CMAKE_SYSTEM_NAME" id="index-6-variable:CMAKE_SYSTEM_NAME"><code>CMAKE_SYSTEM_NAME</code></a>
</dt>
<dd>
<p>Set to <code>Android</code>. Must be specified to enable cross compiling for Android.</p> </dd> <dt>
 <a class="reference internal" href="../variable/cmake_android_standalone_toolchain.html#variable:CMAKE_ANDROID_STANDALONE_TOOLCHAIN" title="CMAKE_ANDROID_STANDALONE_TOOLCHAIN" id="index-4-variable:CMAKE_ANDROID_STANDALONE_TOOLCHAIN"><code>CMAKE_ANDROID_STANDALONE_TOOLCHAIN</code></a>
</dt>
<dd>
<p>Set to the absolute path to the standalone toolchain root directory. A <code>${CMAKE_ANDROID_STANDALONE_TOOLCHAIN}/sysroot</code> directory must exist. If not specified, a default for this variable will be chosen as specified <a class="reference internal" href="#cross-compiling-for-android"><span class="std std-ref">above</span></a>.</p> </dd> <dt>
 <a class="reference internal" href="../variable/cmake_android_arm_mode.html#variable:CMAKE_ANDROID_ARM_MODE" title="CMAKE_ANDROID_ARM_MODE" id="index-1-variable:CMAKE_ANDROID_ARM_MODE"><code>CMAKE_ANDROID_ARM_MODE</code></a>
</dt>
<dd>
<p>When the standalone toolchain targets ARM, optionally set this to <code>ON</code> to target 32-bit ARM instead of 16-bit Thumb. See variable documentation for details.</p> </dd> <dt>
 <a class="reference internal" href="../variable/cmake_android_arm_neon.html#variable:CMAKE_ANDROID_ARM_NEON" title="CMAKE_ANDROID_ARM_NEON" id="index-1-variable:CMAKE_ANDROID_ARM_NEON"><code>CMAKE_ANDROID_ARM_NEON</code></a>
</dt>
<dd>
<p>When the standalone toolchain targets ARM v7, optionally set thisto <code>ON</code> to target ARM NEON devices. See variable documentation for details.</p> </dd> </dl> <p>The following variables will be computed and provided automatically:</p> <dl class="simple"> <dt>
 <a class="reference internal" href="../variable/cmake_system_version.html#variable:CMAKE_SYSTEM_VERSION" title="CMAKE_SYSTEM_VERSION" id="index-3-variable:CMAKE_SYSTEM_VERSION"><code>CMAKE_SYSTEM_VERSION</code></a>
</dt>
<dd>
<p>The Android API level detected from the standalone toolchain.</p> </dd> <dt>
 <a class="reference internal" href="../variable/cmake_android_arch_abi.html#variable:CMAKE_ANDROID_ARCH_ABI" title="CMAKE_ANDROID_ARCH_ABI" id="index-1-variable:CMAKE_ANDROID_ARCH_ABI"><code>CMAKE_ANDROID_ARCH_ABI</code></a>
</dt>
<dd>
<p>The Android ABI detected from the standalone toolchain.</p> </dd> <dt>
 <a class="reference internal" href="#" title="CMAKE_&lt;LANG&gt;_ANDROID_TOOLCHAIN_PREFIX" id="index-1-variable:CMAKE_&lt;LANG&gt;_ANDROID_TOOLCHAIN_PREFIX"><code>CMAKE_&lt;LANG&gt;_ANDROID_TOOLCHAIN_PREFIX</code></a>
</dt>
<dd>
<p>The absolute path prefix to the <code>binutils</code> in the standalone toolchain.</p> </dd> <dt>
 <a class="reference internal" href="#" title="CMAKE_&lt;LANG&gt;_ANDROID_TOOLCHAIN_SUFFIX" id="index-1-variable:CMAKE_&lt;LANG&gt;_ANDROID_TOOLCHAIN_SUFFIX"><code>CMAKE_&lt;LANG&gt;_ANDROID_TOOLCHAIN_SUFFIX</code></a>
</dt>
<dd>
<p>The host platform suffix of the <code>binutils</code> in the standalone toolchain.</p> </dd> </dl> <p>For example, a toolchain file might contain:</p> <pre data-language="cmake">set(CMAKE_SYSTEM_NAME Android)
set(CMAKE_ANDROID_STANDALONE_TOOLCHAIN /path/to/android-toolchain)
</pre> <p>Alternatively one may specify the values without a toolchain file:</p> <pre data-language="console">$ cmake ../src \
  -DCMAKE_SYSTEM_NAME=Android \
  -DCMAKE_ANDROID_STANDALONE_TOOLCHAIN=/path/to/android-toolchain
</pre>   <h4 id="id5">Cross Compiling for Android with NVIDIA Nsight Tegra Visual Studio Edition</h4> <p>A toolchain file to configure one of the <a class="reference internal" href="cmake-generators.7.html#visual-studio-generators"><span class="std std-ref">Visual Studio Generators</span></a> to build using NVIDIA Nsight Tegra targeting Android may look like this:</p> <pre data-language="cmake">set(CMAKE_SYSTEM_NAME Android)
</pre> <p>The <a class="reference internal" href="../variable/cmake_generator_toolset.html#variable:CMAKE_GENERATOR_TOOLSET" title="CMAKE_GENERATOR_TOOLSET" id="index-1-variable:CMAKE_GENERATOR_TOOLSET"><code>CMAKE_GENERATOR_TOOLSET</code></a> may be set to select the Nsight Tegra "Toolchain Version" value.</p> <p>See also target properties:</p> <ul class="simple"> <li><a class="reference internal" href="../prop_tgt/android_ant_additional_options.html#prop_tgt:ANDROID_ANT_ADDITIONAL_OPTIONS" title="ANDROID_ANT_ADDITIONAL_OPTIONS" id="index-0-prop_tgt:ANDROID_ANT_ADDITIONAL_OPTIONS"><code>ANDROID_ANT_ADDITIONAL_OPTIONS</code></a></li> <li><a class="reference internal" href="../prop_tgt/android_api_min.html#prop_tgt:ANDROID_API_MIN" title="ANDROID_API_MIN" id="index-0-prop_tgt:ANDROID_API_MIN"><code>ANDROID_API_MIN</code></a></li> <li><a class="reference internal" href="../prop_tgt/android_api.html#prop_tgt:ANDROID_API" title="ANDROID_API" id="index-0-prop_tgt:ANDROID_API"><code>ANDROID_API</code></a></li> <li><a class="reference internal" href="../prop_tgt/android_arch.html#prop_tgt:ANDROID_ARCH" title="ANDROID_ARCH" id="index-0-prop_tgt:ANDROID_ARCH"><code>ANDROID_ARCH</code></a></li> <li><a class="reference internal" href="../prop_tgt/android_assets_directories.html#prop_tgt:ANDROID_ASSETS_DIRECTORIES" title="ANDROID_ASSETS_DIRECTORIES" id="index-0-prop_tgt:ANDROID_ASSETS_DIRECTORIES"><code>ANDROID_ASSETS_DIRECTORIES</code></a></li> <li><a class="reference internal" href="../prop_tgt/android_gui.html#prop_tgt:ANDROID_GUI" title="ANDROID_GUI" id="index-0-prop_tgt:ANDROID_GUI"><code>ANDROID_GUI</code></a></li> <li><a class="reference internal" href="../prop_tgt/android_jar_dependencies.html#prop_tgt:ANDROID_JAR_DEPENDENCIES" title="ANDROID_JAR_DEPENDENCIES" id="index-0-prop_tgt:ANDROID_JAR_DEPENDENCIES"><code>ANDROID_JAR_DEPENDENCIES</code></a></li> <li><a class="reference internal" href="../prop_tgt/android_jar_directories.html#prop_tgt:ANDROID_JAR_DIRECTORIES" title="ANDROID_JAR_DIRECTORIES" id="index-0-prop_tgt:ANDROID_JAR_DIRECTORIES"><code>ANDROID_JAR_DIRECTORIES</code></a></li> <li><a class="reference internal" href="../prop_tgt/android_java_source_dir.html#prop_tgt:ANDROID_JAVA_SOURCE_DIR" title="ANDROID_JAVA_SOURCE_DIR" id="index-0-prop_tgt:ANDROID_JAVA_SOURCE_DIR"><code>ANDROID_JAVA_SOURCE_DIR</code></a></li> <li><a class="reference internal" href="../prop_tgt/android_native_lib_dependencies.html#prop_tgt:ANDROID_NATIVE_LIB_DEPENDENCIES" title="ANDROID_NATIVE_LIB_DEPENDENCIES" id="index-0-prop_tgt:ANDROID_NATIVE_LIB_DEPENDENCIES"><code>ANDROID_NATIVE_LIB_DEPENDENCIES</code></a></li> <li><a class="reference internal" href="../prop_tgt/android_native_lib_directories.html#prop_tgt:ANDROID_NATIVE_LIB_DIRECTORIES" title="ANDROID_NATIVE_LIB_DIRECTORIES" id="index-0-prop_tgt:ANDROID_NATIVE_LIB_DIRECTORIES"><code>ANDROID_NATIVE_LIB_DIRECTORIES</code></a></li> <li><a class="reference internal" href="../prop_tgt/android_process_max.html#prop_tgt:ANDROID_PROCESS_MAX" title="ANDROID_PROCESS_MAX" id="index-0-prop_tgt:ANDROID_PROCESS_MAX"><code>ANDROID_PROCESS_MAX</code></a></li> <li><a class="reference internal" href="../prop_tgt/android_proguard_config_path.html#prop_tgt:ANDROID_PROGUARD_CONFIG_PATH" title="ANDROID_PROGUARD_CONFIG_PATH" id="index-0-prop_tgt:ANDROID_PROGUARD_CONFIG_PATH"><code>ANDROID_PROGUARD_CONFIG_PATH</code></a></li> <li><a class="reference internal" href="../prop_tgt/android_proguard.html#prop_tgt:ANDROID_PROGUARD" title="ANDROID_PROGUARD" id="index-0-prop_tgt:ANDROID_PROGUARD"><code>ANDROID_PROGUARD</code></a></li> <li><a class="reference internal" href="../prop_tgt/android_secure_props_path.html#prop_tgt:ANDROID_SECURE_PROPS_PATH" title="ANDROID_SECURE_PROPS_PATH" id="index-0-prop_tgt:ANDROID_SECURE_PROPS_PATH"><code>ANDROID_SECURE_PROPS_PATH</code></a></li> <li><a class="reference internal" href="../prop_tgt/android_skip_ant_step.html#prop_tgt:ANDROID_SKIP_ANT_STEP" title="ANDROID_SKIP_ANT_STEP" id="index-0-prop_tgt:ANDROID_SKIP_ANT_STEP"><code>ANDROID_SKIP_ANT_STEP</code></a></li> <li><a class="reference internal" href="../prop_tgt/android_stl_type.html#prop_tgt:ANDROID_STL_TYPE" title="ANDROID_STL_TYPE" id="index-0-prop_tgt:ANDROID_STL_TYPE"><code>ANDROID_STL_TYPE</code></a></li> </ul>    <h3 id="id6">Cross Compiling for iOS, tvOS, or watchOS</h3> <p>For cross-compiling to iOS, tvOS, or watchOS, the <a class="reference internal" href="https://cmake.org/cmake/help/v3.26/generator/Xcode.html#generator:Xcode" title="Xcode" id="index-0-generator:Xcode"><code>Xcode</code></a> generator is recommended. The <a class="reference internal" href="https://cmake.org/cmake/help/v3.26/generator/Unix%20Makefiles.html#generator:Unix%20Makefiles" title="Unix Makefiles" id="index-0-generator:Unix Makefiles"><code>Unix Makefiles</code></a> or <a class="reference internal" href="https://cmake.org/cmake/help/v3.26/generator/Ninja.html#generator:Ninja" title="Ninja" id="index-2-generator:Ninja"><code>Ninja</code></a> generators can also be used, but they require the project to handle more areas like target CPU selection and code signing.</p> <p>Any of the three systems can be targeted by setting the <a class="reference internal" href="../variable/cmake_system_name.html#variable:CMAKE_SYSTEM_NAME" title="CMAKE_SYSTEM_NAME" id="index-7-variable:CMAKE_SYSTEM_NAME"><code>CMAKE_SYSTEM_NAME</code></a> variable to a value from the table below. By default, the latest Device SDK is chosen. As for all Apple platforms, a different SDK (e.g. a simulator) can be selected by setting the <a class="reference internal" href="../variable/cmake_osx_sysroot.html#variable:CMAKE_OSX_SYSROOT" title="CMAKE_OSX_SYSROOT" id="index-0-variable:CMAKE_OSX_SYSROOT"><code>CMAKE_OSX_SYSROOT</code></a> variable, although this should rarely be necessary (see <a class="reference internal" href="#switching-between-device-and-simulator"><span class="std std-ref">Switching Between Device and Simulator</span></a> below). A list of available SDKs can be obtained by running <code>xcodebuild -showsdks</code>.</p> <table class="docutils align-default"> <thead> <tr>
<th class="head"><p>OS</p></th> <th class="head"><p>CMAKE_SYSTEM_NAME</p></th> <th class="head"><p>Device SDK (default)</p></th> <th class="head"><p>Simulator SDK</p></th> </tr> </thead>  <tr>
<td><p>iOS</p></td> <td><p>iOS</p></td> <td><p>iphoneos</p></td> <td><p>iphonesimulator</p></td> </tr> <tr>
<td><p>tvOS</p></td> <td><p>tvOS</p></td> <td><p>appletvos</p></td> <td><p>appletvsimulator</p></td> </tr> <tr>
<td><p>watchOS</p></td> <td><p>watchOS</p></td> <td><p>watchos</p></td> <td><p>watchsimulator</p></td> </tr>  </table> <p>For example, to create a CMake configuration for iOS, the following command is sufficient:</p> <pre data-language="console">cmake .. -GXcode -DCMAKE_SYSTEM_NAME=iOS
</pre> <p>Variable <a class="reference internal" href="../variable/cmake_osx_architectures.html#variable:CMAKE_OSX_ARCHITECTURES" title="CMAKE_OSX_ARCHITECTURES" id="index-0-variable:CMAKE_OSX_ARCHITECTURES"><code>CMAKE_OSX_ARCHITECTURES</code></a> can be used to set architectures for both device and simulator. Variable <a class="reference internal" href="../variable/cmake_osx_deployment_target.html#variable:CMAKE_OSX_DEPLOYMENT_TARGET" title="CMAKE_OSX_DEPLOYMENT_TARGET" id="index-0-variable:CMAKE_OSX_DEPLOYMENT_TARGET"><code>CMAKE_OSX_DEPLOYMENT_TARGET</code></a> can be used to set an iOS/tvOS/watchOS deployment target.</p> <p>Next configuration will install fat 5 architectures iOS library and add the <code>-miphoneos-version-min=9.3</code>/<code>-mios-simulator-version-min=9.3</code> flags to the compiler:</p> <pre data-language="console">$ cmake -S. -B_builds -GXcode \
    -DCMAKE_SYSTEM_NAME=iOS \
    "-DCMAKE_OSX_ARCHITECTURES=armv7;armv7s;arm64;i386;x86_64" \
    -DCMAKE_OSX_DEPLOYMENT_TARGET=9.3 \
    -DCMAKE_INSTALL_PREFIX=`pwd`/_install \
    -DCMAKE_XCODE_ATTRIBUTE_ONLY_ACTIVE_ARCH=NO \
    -DCMAKE_IOS_INSTALL_COMBINED=YES
</pre> <p>Example:</p> <pre data-language="cmake"># CMakeLists.txt
cmake_minimum_required(VERSION 3.14)
project(foo)
add_library(foo foo.cpp)
install(TARGETS foo DESTINATION lib)
</pre> <p>Install:</p> <pre data-language="console">$ cmake --build _builds --config Release --target install
</pre> <p>Check library:</p> <pre data-language="console">$ lipo -info _install/lib/libfoo.a
Architectures in the fat file: _install/lib/libfoo.a are: i386 armv7 armv7s x86_64 arm64
</pre> <pre data-language="console">$ otool -l _install/lib/libfoo.a | grep -A2 LC_VERSION_MIN_IPHONEOS
      cmd LC_VERSION_MIN_IPHONEOS
  cmdsize 16
  version 9.3
</pre>  <h4>Code Signing</h4> <p>Some build artifacts for the embedded Apple platforms require mandatory code signing. If the <a class="reference internal" href="https://cmake.org/cmake/help/v3.26/generator/Xcode.html#generator:Xcode" title="Xcode" id="index-1-generator:Xcode"><code>Xcode</code></a> generator is being used and code signing is required or desired, the development team ID can be specified via the <code>CMAKE_XCODE_ATTRIBUTE_DEVELOPMENT_TEAM</code> CMake variable. This team ID will then be included in the generated Xcode project. By default, CMake avoids the need for code signing during the internal configuration phase (i.e compiler ID and feature detection).</p>   <h4 id="id7">Switching Between Device and Simulator</h4> <p>When configuring for any of the embedded platforms, one can target either real devices or the simulator. Both have their own separate SDK, but CMake only supports specifying a single SDK for the configuration phase. This means the developer must select one or the other at configuration time. When using the <a class="reference internal" href="https://cmake.org/cmake/help/v3.26/generator/Xcode.html#generator:Xcode" title="Xcode" id="index-2-generator:Xcode"><code>Xcode</code></a> generator, this is less of a limitation because Xcode still allows you to build for either a device or a simulator, even though configuration was only performed for one of the two. From within the Xcode IDE, builds are performed for the selected "destination" platform. When building from the command line, the desired sdk can be specified directly by passing a <code>-sdk</code> option to the underlying build tool (<code>xcodebuild</code>). For example:</p> <pre data-language="console">$ cmake --build ... -- -sdk iphonesimulator
</pre> <p>Please note that checks made during configuration were performed against the configure-time SDK and might not hold true for other SDKs. Commands like <a class="reference internal" href="../command/find_package.html#command:find_package" title="find_package" id="index-0-command:find_package"><code>find_package()</code></a>, <a class="reference internal" href="../command/find_library.html#command:find_library" title="find_library" id="index-0-command:find_library"><code>find_library()</code></a>, etc. store and use details only for the configured SDK/platform, so they can be problematic if wanting to switch between device and simulator builds. You can follow the next rules to make device + simulator configuration work:</p> <ul class="simple"> <li>Use explicit <code>-l</code> linker flag, e.g. <code>target_link_libraries(foo PUBLIC "-lz")</code>
</li> <li>Use explicit <code>-framework</code> linker flag, e.g. <code>target_link_libraries(foo PUBLIC "-framework CoreFoundation")</code>
</li> <li>Use <a class="reference internal" href="../command/find_package.html#command:find_package" title="find_package" id="index-1-command:find_package"><code>find_package()</code></a> only for libraries installed with <a class="reference internal" href="../variable/cmake_ios_install_combined.html#variable:CMAKE_IOS_INSTALL_COMBINED" title="CMAKE_IOS_INSTALL_COMBINED" id="index-0-variable:CMAKE_IOS_INSTALL_COMBINED"><code>CMAKE_IOS_INSTALL_COMBINED</code></a> feature</li> </ul>     <div class="_attribution">
  <p class="_attribution-p">
    &copy; 2000&ndash;2023 Kitware, Inc. and Contributors<br>Licensed under the BSD 3-clause License.<br>
    <a href="https://cmake.org/cmake/help/v3.26/manual/cmake-toolchains.7.html" class="_attribution-link">https://cmake.org/cmake/help/v3.26/manual/cmake-toolchains.7.html</a>
  </p>
</div>
