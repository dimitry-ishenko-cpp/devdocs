<h1 id="class-Zlib::GzipFile" class="class"> class Zlib::GzipFile </h1>
<dl class="meta">
<dt>Parent:</dt>
<dd class="meta-parent"><a href="../object.html">Object</a></dd>
</dl> <section class="description"> <p><a href="gzipfile.html"><code>Zlib::GzipFile</code></a> is an abstract class for handling a gzip formatted compressed file. The operations are defined in the subclasses, <a href="gzipreader.html"><code>Zlib::GzipReader</code></a> for reading, and <a href="gzipwriter.html"><code>Zlib::GzipWriter</code></a> for writing.</p> <p><a href="gzipreader.html"><code>GzipReader</code></a> should be used by associating an <a href="../io.html"><code>IO</code></a>, or IO-like, object.</p> <h2 id="class-Zlib::GzipFile-label-Method+Catalogue">
<a href="../method.html"><code>Method</code></a> Catalogue</h2> <ul>
<li> <p><a href="gzipfile.html#method-c-wrap"><code>::wrap</code></a></p> </li>
<li> <p>::open (<a href="gzipreader.html#method-c-open"><code>Zlib::GzipReader::open</code></a> and <a href="gzipwriter.html#method-c-open"><code>Zlib::GzipWriter::open</code></a>)</p> </li>
<li> <p><a href="gzipfile.html#method-i-close"><code>close</code></a></p> </li>
<li> <p><a href="gzipfile.html#method-i-closed-3F"><code>closed?</code></a></p> </li>
<li> <p><a href="gzipfile.html#method-i-comment"><code>comment</code></a></p> </li>
<li> <p>comment= (<a href="gzipwriter.html#method-i-comment-3D"><code>Zlib::GzipWriter#comment=</code></a>)</p> </li>
<li> <p><a href="gzipfile.html#method-i-crc"><code>crc</code></a></p> </li>
<li> <p>eof? (<a href="gzipreader.html#method-i-eof-3F"><code>Zlib::GzipReader#eof?</code></a>)</p> </li>
<li> <p><a href="gzipfile.html#method-i-finish"><code>finish</code></a></p> </li>
<li> <p><a href="gzipfile.html#method-i-level"><code>level</code></a></p> </li>
<li> <p>lineno (<a href="gzipreader.html#method-i-lineno"><code>Zlib::GzipReader#lineno</code></a>)</p> </li>
<li> <p>lineno= (<a href="gzipreader.html#method-i-lineno-3D"><code>Zlib::GzipReader#lineno=</code></a>)</p> </li>
<li> <p><a href="gzipfile.html#method-i-mtime"><code>mtime</code></a></p> </li>
<li> <p>mtime= (<a href="gzipwriter.html#method-i-mtime-3D"><code>Zlib::GzipWriter#mtime=</code></a>)</p> </li>
<li> <p><a href="gzipfile.html#method-i-orig_name"><code>orig_name</code></a></p> </li>
<li> <p><a href="gzipfile.html#method-i-orig_name"><code>orig_name</code></a> (<a href="gzipwriter.html#method-i-orig_name-3D"><code>Zlib::GzipWriter#orig_name=</code></a>)</p> </li>
<li> <p><a href="gzipfile.html#method-i-os_code"><code>os_code</code></a></p> </li>
<li> <p>path (when the underlying <a href="../io.html"><code>IO</code></a> supports path)</p> </li>
<li> <p><a href="gzipfile.html#method-i-sync"><code>sync</code></a></p> </li>
<li> <p><a href="gzipfile.html#method-i-sync-3D"><code>sync=</code></a></p> </li>
<li> <p><a href="gzipfile.html#method-i-to_io"><code>to_io</code></a></p> </li>
</ul> <p>(due to internal structure, documentation may appear under <a href="gzipreader.html"><code>Zlib::GzipReader</code></a> or <a href="gzipwriter.html"><code>Zlib::GzipWriter</code></a>)</p> </section> <section id="5Buntitled-5D" class="documentation-section"> <section id="public-class-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Public Class Methods</h3> </header> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-wrap"> <span class="method-callseq"> Zlib::GzipReader.wrap(io, ...) { |gz| ... } </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> Zlib::GzipWriter.wrap(io, ...) { |gz| ... } </span> </div> </div> <div class="method-description">
<div class="method-source-code" id="wrap-source"> <pre class="c" data-language="c">static VALUE
rb_gzfile_s_wrap(int argc, VALUE *argv, VALUE klass)
{
    return gzfile_wrap(argc, argv, klass, 0);
}</pre> </div> <p>Creates a <a href="gzipreader.html"><code>GzipReader</code></a> or <a href="gzipwriter.html"><code>GzipWriter</code></a> associated with <code>io</code>, passing in any necessary extra options, and executes the block with the newly created object just like <a href="../file.html#method-c-open"><code>File.open</code></a>.</p> <p>The <a href="gzipfile.html"><code>GzipFile</code></a> object will be closed automatically after executing the block. If you want to keep the associated <a href="../io.html"><code>IO</code></a> object open, you may call <a href="gzipfile.html#method-i-finish"><code>Zlib::GzipFile#finish</code></a> method in the block.</p>  </div> </div> </section> <section id="public-instance-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Public Instance Methods</h3> </header> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-close"> <span class="method-name">close</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="close-source"> <pre class="c" data-language="c">static VALUE
rb_gzfile_close(VALUE obj)
{
    struct gzfile *gz;
    VALUE io;

    TypedData_Get_Struct(obj, struct gzfile, &amp;gzfile_data_type, gz);
    if (!ZSTREAM_IS_READY(&amp;gz-&gt;z)) {
        return Qnil;
    }
    io = gz-&gt;io;
    gzfile_close(gz, 1);
    return io;
}</pre> </div> <p>Closes the <a href="gzipfile.html"><code>GzipFile</code></a> object. This method calls close method of the associated <a href="../io.html"><code>IO</code></a> object. Returns the associated <a href="../io.html"><code>IO</code></a> object.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-closed-3F"> <span class="method-name">closed?</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="closed-3F-source"> <pre class="c" data-language="c">static VALUE
rb_gzfile_closed_p(VALUE obj)
{
    struct gzfile *gz;
    TypedData_Get_Struct(obj, struct gzfile, &amp;gzfile_data_type, gz);
    return NIL_P(gz-&gt;io) ? Qtrue : Qfalse;
}</pre> </div> <p>Same as <a href="../io.html#method-i-closed-3F"><code>IO#closed?</code></a></p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-comment"> <span class="method-name">comment</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="comment-source"> <pre class="c" data-language="c">static VALUE
rb_gzfile_comment(VALUE obj)
{
    VALUE str = get_gzfile(obj)-&gt;comment;
    if (!NIL_P(str)) {
        str = rb_str_dup(str);
    }
    return str;
}</pre> </div> <p>Returns comments recorded in the gzip file header, or nil if the comments is not present.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-crc"> <span class="method-name">crc</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="crc-source"> <pre class="c" data-language="c">static VALUE
rb_gzfile_crc(VALUE obj)
{
    return rb_uint2inum(get_gzfile(obj)-&gt;crc);
}</pre> </div> <p>Returns CRC value of the uncompressed data.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-finish"> <span class="method-name">finish</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="finish-source"> <pre class="c" data-language="c">static VALUE
rb_gzfile_finish(VALUE obj)
{
    struct gzfile *gz = get_gzfile(obj);
    VALUE io;

    io = gz-&gt;io;
    gzfile_close(gz, 0);
    return io;
}</pre> </div> <p>Closes the <a href="gzipfile.html"><code>GzipFile</code></a> object. Unlike <a href="gzipfile.html#method-i-close"><code>Zlib::GzipFile#close</code></a>, this method never calls the close method of the associated <a href="../io.html"><code>IO</code></a> object. Returns the associated <a href="../io.html"><code>IO</code></a> object.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-level"> <span class="method-name">level</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="level-source"> <pre class="c" data-language="c">static VALUE
rb_gzfile_level(VALUE obj)
{
    return INT2FIX(get_gzfile(obj)-&gt;level);
}</pre> </div> <p>Returns compression level.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-mtime"> <span class="method-name">mtime</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="mtime-source"> <pre class="c" data-language="c">static VALUE
rb_gzfile_mtime(VALUE obj)
{
    return rb_time_new(get_gzfile(obj)-&gt;mtime, (time_t)0);
}</pre> </div> <p>Returns last modification time recorded in the gzip file header.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-orig_name"> <span class="method-name">orig_name</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="orig_name-source"> <pre class="c" data-language="c">static VALUE
rb_gzfile_orig_name(VALUE obj)
{
    VALUE str = get_gzfile(obj)-&gt;orig_name;
    if (!NIL_P(str)) {
        str = rb_str_dup(str);
    }
    return str;
}</pre> </div> <p>Returns original filename recorded in the gzip file header, or <code>nil</code> if original filename is not present.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-os_code"> <span class="method-name">os_code</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="os_code-source"> <pre class="c" data-language="c">static VALUE
rb_gzfile_os_code(VALUE obj)
{
    return INT2FIX(get_gzfile(obj)-&gt;os_code);
}</pre> </div> <p>Returns OS code number recorded in the gzip file header.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-sync"> <span class="method-name">sync</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="sync-source"> <pre class="c" data-language="c">static VALUE
rb_gzfile_sync(VALUE obj)
{
    return (get_gzfile(obj)-&gt;z.flags &amp; GZFILE_FLAG_SYNC) ? Qtrue : Qfalse;
}</pre> </div> <p>Same as <a href="../io.html#method-i-sync"><code>IO#sync</code></a></p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-sync-3D"> <span class="method-callseq"> sync = flag </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="sync-3D-source"> <pre class="c" data-language="c">static VALUE
rb_gzfile_set_sync(VALUE obj, VALUE mode)
{
    struct gzfile *gz = get_gzfile(obj);

    if (RTEST(mode)) {
        gz-&gt;z.flags |= GZFILE_FLAG_SYNC;
    }
    else {
        gz-&gt;z.flags &amp;= ~GZFILE_FLAG_SYNC;
    }
    return mode;
}</pre> </div> <p>Same as <a href="../io.html"><code>IO</code></a>. If flag is <code>true</code>, the associated <a href="../io.html"><code>IO</code></a> object must respond to the <code>flush</code> method. While <code>sync</code> mode is <code>true</code>, the compression ratio decreases sharply.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-to_io"> <span class="method-name">to_io</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="to_io-source"> <pre class="c" data-language="c">static VALUE
rb_gzfile_to_io(VALUE obj)
{
    return get_gzfile(obj)-&gt;io;
}</pre> </div> <p>Same as <a href="../io.html"><code>IO</code></a>.</p>  </div> </div> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    Ruby Core &copy; 1993&ndash;2022 Yukihiro Matsumoto<br>Licensed under the Ruby License.<br>Ruby Standard Library &copy; contributors<br>Licensed under their own licenses.<br>
    
  </p>
</div>
