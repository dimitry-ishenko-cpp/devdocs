<h1 id="class-ENV" class="class"> class ENV </h1>
<dl class="meta">
<dt>Parent:</dt>
<dd class="meta-parent"><a href="object.html">Object</a></dd>
</dl> <section class="description"> <p>ENV is a hash-like accessor for environment variables.</p> <h3 id="class-ENV-label-Interaction+with+the+Operating+System">Interaction with the Operating System</h3> <p>The ENV object interacts with the operating system’s environment variables:</p> <ul>
<li> <p>When you get the value for a name in ENV, the value is retrieved from among the current environment variables.</p> </li>
<li> <p>When you create or set a name-value pair in ENV, the name and value are immediately set in the environment variables.</p> </li>
<li> <p>When you delete a name-value pair in ENV, it is immediately deleted from the environment variables.</p> </li>
</ul> <h3 id="class-ENV-label-Names+and+Values">Names and Values</h3> <p>Generally, a name or value is a <a href="string.html"><code>String</code></a>.</p> <h4 id="class-ENV-label-Valid+Names+and+Values">Valid Names and Values</h4> <p>Each name or value must be one of the following:</p> <ul>
<li> <p>A <a href="string.html"><code>String</code></a>.</p> </li>
<li> <p>An object that responds to #to_str by returning a <a href="string.html"><code>String</code></a>, in which case that <a href="string.html"><code>String</code></a> will be used as the name or value.</p> </li>
</ul> <h4 id="class-ENV-label-Invalid+Names+and+Values">Invalid Names and Values</h4> <p>A new name:</p> <ul>
<li> <p>May not be the empty string:</p> <pre class="ruby" data-language="ruby">ENV[''] = '0'
# Raises Errno::EINVAL (Invalid argument - ruby_setenv())
</pre> </li>
<li> <p>May not contain character <code>"="</code>:</p> <pre class="ruby" data-language="ruby">ENV['='] = '0'
# Raises Errno::EINVAL (Invalid argument - ruby_setenv(=))
</pre> </li>
</ul> <p>A new name or value:</p> <ul>
<li> <p>May not be a non-String that does not respond to #to_str:</p> <pre class="ruby" data-language="ruby">ENV['foo'] = Object.new
# Raises TypeError (no implicit conversion of Object into String)
ENV[Object.new] = '0'
# Raises TypeError (no implicit conversion of Object into String)
</pre> </li>
<li> <p>May not contain the NUL character <code>"\0"</code>:</p> <pre class="ruby" data-language="ruby">ENV['foo'] = "\0"
# Raises ArgumentError (bad environment variable value: contains null byte)
ENV["\0"] == '0'
# Raises ArgumentError (bad environment variable name: contains null byte)
</pre> </li>
<li> <p>May not have an ASCII-incompatible encoding such as UTF-16LE or ISO-2022-JP:</p> <pre class="ruby" data-language="ruby">ENV['foo'] = '0'.force_encoding(Encoding::ISO_2022_JP)
# Raises ArgumentError (bad environment variable name: ASCII incompatible encoding: ISO-2022-JP)
ENV["foo".force_encoding(Encoding::ISO_2022_JP)] = '0'
# Raises ArgumentError (bad environment variable name: ASCII incompatible encoding: ISO-2022-JP)
</pre> </li>
</ul> <h3 id="class-ENV-label-About+Ordering">About Ordering</h3> <p>ENV enumerates its name/value pairs in the order found in the operating system’s environment variables. Therefore the ordering of ENV content is OS-dependent, and may be indeterminate.</p> <p>This will be seen in:</p> <ul>
<li> <p>A <a href="hash.html"><code>Hash</code></a> returned by an ENV method.</p> </li>
<li> <p>An <a href="enumerator.html"><code>Enumerator</code></a> returned by an ENV method.</p> </li>
<li> <p>An <a href="array.html"><code>Array</code></a> returned by <a href="env.html#method-c-keys"><code>ENV.keys</code></a>, <a href="env.html#method-c-values"><code>ENV.values</code></a>, or <a href="env.html#method-c-to_a"><code>ENV.to_a</code></a>.</p> </li>
<li> <p>The <a href="string.html"><code>String</code></a> returned by <a href="env.html#method-c-inspect"><code>ENV.inspect</code></a>.</p> </li>
<li> <p>The <a href="array.html"><code>Array</code></a> returned by <a href="env.html#method-c-shift"><code>ENV.shift</code></a>.</p> </li>
<li> <p>The name returned by <a href="env.html#method-c-key"><code>ENV.key</code></a>.</p> </li>
</ul> <h3 id="class-ENV-label-About+the+Examples">About the Examples</h3> <p>Some methods in ENV return ENV itself. Typically, there are many environment variables. It’s not useful to display a large ENV in the examples here, so most example snippets begin by resetting the contents of ENV:</p> <ul>
<li> <p><a href="env.html#method-c-replace"><code>ENV.replace</code></a> replaces ENV with a new collection of entries.</p> </li>
<li> <p><a href="env.html#method-c-clear"><code>ENV.clear</code></a> empties ENV.</p> </li>
</ul> <h2 id="class-ENV-label-What-27s+Here">What’s Here</h2> <p>First, what’s elsewhere. Class ENV:</p> <ul>
<li> <p>Inherits from <a href="object.html#class-Object-label-What-27s+Here">class Object</a>.</p> </li>
<li> <p>Extends <a href="enumerable.html#module-Enumerable-label-What-27s+Here">module Enumerable</a>,</p> </li>
</ul> <p>Here, class ENV provides methods that are useful for:</p> <ul>
<li> <p><a href="env.html#class-ENV-label-Methods+for+Querying">Querying</a></p> </li>
<li> <p><a href="env.html#class-ENV-label-Methods+for+Assigning">Assigning</a></p> </li>
<li> <p><a href="env.html#class-ENV-label-Methods+for+Deleting">Deleting</a></p> </li>
<li> <p><a href="env.html#class-ENV-label-Methods+for+Iterating">Iterating</a></p> </li>
<li> <p><a href="env.html#class-ENV-label-Methods+for+Converting">Converting</a></p> </li>
<li> <p><a href="env.html#class-ENV-label-More+Methods">And more .…</a></p> </li>
</ul> <h3 id="class-ENV-label-Methods+for+Querying">Methods for Querying</h3> <ul>
<li> <p><a href="env.html#method-c-5B-5D"><code>::[]</code></a>: Returns the value for the given environment variable name if it exists:</p> </li>
<li> <p><a href="env.html#method-c-empty-3F"><code>::empty?</code></a>: Returns whether ENV is empty.</p> </li>
<li> <p><a href="env.html#method-c-has_value-3F"><code>::has_value?</code></a>, <a href="env.html#method-c-value-3F"><code>::value?</code></a>: Returns whether the given value is in ENV.</p> </li>
<li> <p><a href="env.html#method-c-include-3F"><code>::include?</code></a>, <a href="env.html#method-c-has_key-3F"><code>::has_key?</code></a>, <a href="env.html#method-c-key-3F"><code>::key?</code></a>, <a href="env.html#method-c-member-3F"><code>::member?</code></a>: Returns whether the given name is in ENV.</p> </li>
<li> <p><a href="env.html#method-c-key"><code>::key</code></a>: Returns the name of the first entry with the given value.</p> </li>
<li> <p><a href="env.html#method-c-size"><code>::size</code></a>, <a href="env.html#method-c-length"><code>::length</code></a>: Returns the number of entries.</p> </li>
<li> <p><a href="env.html#method-c-value-3F"><code>::value?</code></a>: Returns whether any entry has the given value.</p> </li>
</ul> <h3 id="class-ENV-label-Methods+for+Assigning">Methods for Assigning</h3> <ul>
<li> <p><a href="env.html#method-c-5B-5D-3D"><code>::[]=</code></a>, <a href="env.html#method-c-store"><code>::store</code></a>: Creates, updates, or deletes the named environment variable.</p> </li>
<li> <p><a href="env.html#method-c-clear"><code>::clear</code></a>: Removes every environment variable; returns ENV:</p> </li>
<li> <p><a href="env.html#method-c-update"><code>::update</code></a>, <a href="env.html#method-c-merge-21"><code>::merge!</code></a>: Adds to ENV each key/value pair in the given hash.</p> </li>
<li> <p><a href="env.html#method-c-replace"><code>::replace</code></a>: Replaces the entire content of the ENV with the name/value pairs in the given hash.</p> </li>
</ul> <h3 id="class-ENV-label-Methods+for+Deleting">Methods for Deleting</h3> <ul>
<li> <p><a href="env.html#method-c-delete"><code>::delete</code></a>: Deletes the named environment variable name if it exists.</p> </li>
<li> <p><a href="env.html#method-c-delete_if"><code>::delete_if</code></a>: Deletes entries selected by the block.</p> </li>
<li> <p><a href="env.html#method-c-keep_if"><code>::keep_if</code></a>: Deletes entries not selected by the block.</p> </li>
<li> <p><a href="env.html#method-c-reject-21"><code>::reject!</code></a>: Similar to delete_if, but returns <code>nil</code> if no change was made.</p> </li>
<li> <p><a href="env.html#method-c-select-21"><code>::select!</code></a>, <a href="env.html#method-c-filter-21"><code>::filter!</code></a>: Deletes entries selected by the block.</p> </li>
<li> <p><a href="env.html#method-c-shift"><code>::shift</code></a>: Removes and returns the first entry.</p> </li>
</ul> <h3 id="class-ENV-label-Methods+for+Iterating">Methods for Iterating</h3> <ul>
<li> <p><a href="env.html#method-c-each"><code>::each</code></a>, <a href="env.html#method-c-each_pair"><code>::each_pair</code></a>: Calls the block with each name/value pair.</p> </li>
<li> <p><a href="env.html#method-c-each_key"><code>::each_key</code></a>: Calls the block with each name.</p> </li>
<li> <p><a href="env.html#method-c-each_value"><code>::each_value</code></a>: Calls the block with each value.</p> </li>
</ul> <h3 id="class-ENV-label-Methods+for+Converting">Methods for Converting</h3> <ul>
<li> <p><a href="env.html#method-c-assoc"><code>::assoc</code></a>: Returns a 2-element array containing the name and value of the named environment variable if it exists:</p> </li>
<li> <p><a href="env.html#method-c-clone"><code>::clone</code></a>: Returns ENV (and issues a warning).</p> </li>
<li> <p><a href="env.html#method-c-except"><code>::except</code></a>: Returns a hash of all name/value pairs except those given.</p> </li>
<li> <p><a href="env.html#method-c-fetch"><code>::fetch</code></a>: Returns the value for the given name.</p> </li>
<li> <p><a href="env.html#method-c-inspect"><code>::inspect</code></a>: Returns the contents of ENV as a string.</p> </li>
<li> <p><a href="env.html#method-c-invert"><code>::invert</code></a>: Returns a hash whose keys are the ENV values, and whose values are the corresponding ENV names.</p> </li>
<li> <p><a href="env.html#method-c-keys"><code>::keys</code></a>: Returns an array of all names.</p> </li>
<li> <p><a href="env.html#method-c-rassoc"><code>::rassoc</code></a>: Returns the name and value of the first found entry that has the given value.</p> </li>
<li> <p><a href="env.html#method-c-reject"><code>::reject</code></a>: Returns a hash of those entries not rejected by the block.</p> </li>
<li> <p><a href="env.html#method-c-select"><code>::select</code></a>, <a href="env.html#method-c-filter"><code>::filter</code></a>: Returns a hash of name/value pairs selected by the block.</p> </li>
<li> <p><a href="env.html#method-c-slice"><code>::slice</code></a>: Returns a hash of the given names and their corresponding values.</p> </li>
<li> <p><a href="env.html#method-c-to_a"><code>::to_a</code></a>: Returns the entries as an array of 2-element Arrays.</p> </li>
<li> <p><a href="env.html#method-c-to_h"><code>::to_h</code></a>: Returns a hash of entries selected by the block.</p> </li>
<li> <p><a href="env.html#method-c-to_hash"><code>::to_hash</code></a>: Returns a hash of all entries.</p> </li>
<li> <p><a href="env.html#method-c-to_s"><code>::to_s</code></a>: Returns the string <code>'ENV'</code>.</p> </li>
<li> <p><a href="env.html#method-c-values"><code>::values</code></a>: Returns all values as an array.</p> </li>
<li> <p><a href="env.html#method-c-values_at"><code>::values_at</code></a>: Returns an array of the values for the given name.</p> </li>
</ul> <h3 id="class-ENV-label-More+Methods">More Methods</h3> <ul>
<li> <p><a href="env.html#method-c-dup"><code>::dup</code></a>: Raises an exception.</p> </li>
<li> <p><a href="env.html#method-c-freeze"><code>::freeze</code></a>: Raises an exception.</p> </li>
<li> <p><a href="env.html#method-c-rehash"><code>::rehash</code></a>: Returns <code>nil</code>, without modifying ENV.</p> </li>
</ul> </section> <section id="5Buntitled-5D" class="documentation-section"> <section id="public-class-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Public Class Methods</h3> </header> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-5B-5D"> <span class="method-callseq"> ENV[name] → value </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="5B-5D-source"> <pre class="c" data-language="c">static VALUE
rb_f_getenv(VALUE obj, VALUE name)
{
    const char *nam = env_name(name);
    VALUE env = getenv_with_lock(nam);
    return env;
}</pre> </div> <p>Returns the value for the environment variable <code>name</code> if it exists:</p> <pre class="ruby" data-language="ruby">ENV['foo'] = '0'
ENV['foo'] # =&gt; "0"
</pre> <p>Returns <code>nil</code> if the named variable does not exist.</p> <p>Raises an exception if <code>name</code> is invalid. See <a href="env.html#class-ENV-label-Invalid+Names+and+Values">Invalid Names and Values</a>.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-5B-5D-3D"> <span class="method-callseq"> ENV[name] = value → value </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> store(name, value) → value </span> </div> </div> <div class="method-description">
<div class="method-source-code" id="5B-5D-3D-source"> <pre class="c" data-language="c">static VALUE
env_aset_m(VALUE obj, VALUE nm, VALUE val)
{
    return env_aset(nm, val);
}</pre> </div> <p>Creates, updates, or deletes the named environment variable, returning the value. Both <code>name</code> and <code>value</code> may be instances of <a href="string.html"><code>String</code></a>. See <a href="env.html#class-ENV-label-Valid+Names+and+Values">Valid Names and Values</a>.</p> <ul>
<li> <p>If the named environment variable does not exist:</p> <ul>
<li> <p>If <code>value</code> is <code>nil</code>, does nothing.</p> <pre class="ruby" data-language="ruby">ENV.clear
ENV['foo'] = nil # =&gt; nil
ENV.include?('foo') # =&gt; false
ENV.store('bar', nil) # =&gt; nil
ENV.include?('bar') # =&gt; false
</pre> </li>
<li> <p>If <code>value</code> is not <code>nil</code>, creates the environment variable with <code>name</code> and <code>value</code>:</p> <pre class="ruby" data-language="ruby"># Create 'foo' using ENV.[]=.
ENV['foo'] = '0' # =&gt; '0'
ENV['foo'] # =&gt; '0'
# Create 'bar' using ENV.store.
ENV.store('bar', '1') # =&gt; '1'
ENV['bar'] # =&gt; '1'
</pre> </li>
</ul> </li>
<li> <p>If the named environment variable exists:</p> <ul>
<li> <p>If <code>value</code> is not <code>nil</code>, updates the environment variable with value <code>value</code>:</p> <pre class="ruby" data-language="ruby"># Update 'foo' using ENV.[]=.
ENV['foo'] = '2' # =&gt; '2'
ENV['foo'] # =&gt; '2'
# Update 'bar' using ENV.store.
ENV.store('bar', '3') # =&gt; '3'
ENV['bar'] # =&gt; '3'
</pre> </li>
<li> <p>If <code>value</code> is <code>nil</code>, deletes the environment variable:</p> <pre class="ruby" data-language="ruby"># Delete 'foo' using ENV.[]=.
ENV['foo'] = nil # =&gt; nil
ENV.include?('foo') # =&gt; false
# Delete 'bar' using ENV.store.
ENV.store('bar', nil) # =&gt; nil
ENV.include?('bar') # =&gt; false
</pre> </li>
</ul> </li>
</ul> <p>Raises an exception if <code>name</code> or <code>value</code> is invalid. See <a href="env.html#class-ENV-label-Invalid+Names+and+Values">Invalid Names and Values</a>.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-assoc"> <span class="method-callseq"> assoc(name) → [name, value] or nil </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="assoc-source"> <pre class="c" data-language="c">static VALUE
env_assoc(VALUE env, VALUE key)
{
    const char *s = env_name(key);
    VALUE e = getenv_with_lock(s);

    if (!NIL_P(e)) {
        return rb_assoc_new(key, e);
    }
    else {
        return Qnil;
    }
}</pre> </div> <p>Returns a 2-element <a href="array.html"><code>Array</code></a> containing the name and value of the environment variable for <code>name</code> if it exists:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1')
ENV.assoc('foo') # =&gt; ['foo', '0']
</pre> <p>Returns <code>nil</code> if <code>name</code> is a valid <a href="string.html"><code>String</code></a> and there is no such environment variable.</p> <p>Returns <code>nil</code> if <code>name</code> is the empty <a href="string.html"><code>String</code></a> or is a <a href="string.html"><code>String</code></a> containing character <code>'='</code>.</p> <p>Raises an exception if <code>name</code> is a <a href="string.html"><code>String</code></a> containing the NUL character <code>"\0"</code>:</p> <pre class="ruby" data-language="ruby">ENV.assoc("\0") # Raises ArgumentError (bad environment variable name: contains null byte)
</pre> <p>Raises an exception if <code>name</code> has an encoding that is not ASCII-compatible:</p> <pre class="ruby" data-language="ruby">ENV.assoc("\xa1\xa1".force_encoding(Encoding::UTF_16LE))
# Raises ArgumentError (bad environment variable name: ASCII incompatible encoding: UTF-16LE)
</pre> <p>Raises an exception if <code>name</code> is not a String:</p> <pre class="ruby" data-language="ruby">ENV.assoc(Object.new) # TypeError (no implicit conversion of Object into String)
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-clear"> <span class="method-callseq"> clear → ENV </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="clear-source"> <pre class="c" data-language="c">static VALUE
env_clear(VALUE _)
{
    return rb_env_clear();
}</pre> </div> <p>Removes every environment variable; returns ENV:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1')
ENV.size # =&gt; 2
ENV.clear # =&gt; ENV
ENV.size # =&gt; 0
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-clone"> <span class="method-callseq"> clone(freeze: nil) # raises TypeError </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="clone-source"> <pre class="c" data-language="c">static VALUE
env_clone(int argc, VALUE *argv, VALUE obj)
{
    if (argc) {
        VALUE opt;
        if (rb_scan_args(argc, argv, "0:", &amp;opt) &lt; argc) {
            rb_get_freeze_opt(1, &amp;opt);
        }
    }

    rb_raise(rb_eTypeError, "Cannot clone ENV, use ENV.to_h to get a copy of ENV as a hash");
}</pre> </div> <p>Raises <a href="typeerror.html"><code>TypeError</code></a>, because <a href="env.html"><code>ENV</code></a> is a wrapper for the process-wide environment variables and a clone is useless. Use to_h to get a copy of <a href="env.html"><code>ENV</code></a> data as a hash.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-delete"> <span class="method-callseq"> delete(name) → value </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> delete(name) { |name| block } → value </span> </div> <div class="method-heading"> <span class="method-callseq"> delete(missing_name) → nil </span> </div> <div class="method-heading"> <span class="method-callseq"> delete(missing_name) { |name| block } → block_value </span> </div> </div> <div class="method-description">
<div class="method-source-code" id="delete-source"> <pre class="c" data-language="c">static VALUE
env_delete_m(VALUE obj, VALUE name)
{
    VALUE val;

    val = env_delete(name);
    if (NIL_P(val) &amp;&amp; rb_block_given_p()) val = rb_yield(name);
    return val;
}</pre> </div> <p>Deletes the environment variable with <code>name</code> if it exists and returns its value:</p> <pre class="ruby" data-language="ruby">ENV['foo'] = '0'
ENV.delete('foo') # =&gt; '0'
</pre> <p>If a block is not given and the named environment variable does not exist, returns <code>nil</code>.</p> <p>If a block given and the environment variable does not exist, yields <code>name</code> to the block and returns the value of the block:</p> <pre class="ruby" data-language="ruby">ENV.delete('foo') { |name| name * 2 } # =&gt; "foofoo"
</pre> <p>If a block given and the environment variable exists, deletes the environment variable and returns its value (ignoring the block):</p> <pre class="ruby" data-language="ruby">ENV['foo'] = '0'
ENV.delete('foo') { |name| raise 'ignored' } # =&gt; "0"
</pre> <p>Raises an exception if <code>name</code> is invalid. See <a href="env.html#class-ENV-label-Invalid+Names+and+Values">Invalid Names and Values</a>.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-delete_if"> <span class="method-callseq"> delete_if { |name, value| block } → ENV </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> delete_if → an_enumerator </span> </div> </div> <div class="method-description">
<div class="method-source-code" id="delete_if-source"> <pre class="c" data-language="c">static VALUE
env_delete_if(VALUE ehash)
{
    RETURN_SIZED_ENUMERATOR(ehash, 0, 0, rb_env_size);
    env_reject_bang(ehash);
    return envtbl;
}</pre> </div> <p>Yields each environment variable name and its value as a 2-element <a href="array.html"><code>Array</code></a>, deleting each environment variable for which the block returns a truthy value, and returning <a href="env.html"><code>ENV</code></a> (regardless of whether any deletions):</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1', 'baz' =&gt; '2')
ENV.delete_if { |name, value| name.start_with?('b') } # =&gt; ENV
ENV # =&gt; {"foo"=&gt;"0"}
ENV.delete_if { |name, value| name.start_with?('b') } # =&gt; ENV
</pre> <p>Returns an <a href="enumerator.html"><code>Enumerator</code></a> if no block given:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1', 'baz' =&gt; '2')
e = ENV.delete_if # =&gt; #&lt;Enumerator: {"bar"=&gt;"1", "baz"=&gt;"2", "foo"=&gt;"0"}:delete_if!&gt;
e.each { |name, value| name.start_with?('b') } # =&gt; ENV
ENV # =&gt; {"foo"=&gt;"0"}
e.each { |name, value| name.start_with?('b') } # =&gt; ENV
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-dup"> <span class="method-callseq"> dup # raises TypeError </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="dup-source"> <pre class="c" data-language="c">static VALUE
env_dup(VALUE obj)
{
    rb_raise(rb_eTypeError, "Cannot dup ENV, use ENV.to_h to get a copy of ENV as a hash");
}</pre> </div> <p>Raises <a href="typeerror.html"><code>TypeError</code></a>, because <a href="env.html"><code>ENV</code></a> is a singleton object. Use to_h to get a copy of <a href="env.html"><code>ENV</code></a> data as a hash.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-each"> <span class="method-callseq"> each { |name, value| block } → ENV </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> each → an_enumerator </span> </div> <div class="method-heading"> <span class="method-callseq"> each_pair { |name, value| block } → ENV </span> </div> <div class="method-heading"> <span class="method-callseq"> each_pair → an_enumerator </span> </div> </div> <div class="method-description">
<div class="method-source-code" id="each-source"> <pre class="c" data-language="c">static VALUE
env_each_pair(VALUE ehash)
{
    long i;

    RETURN_SIZED_ENUMERATOR(ehash, 0, 0, rb_env_size);

    VALUE ary = rb_ary_new();

    ENV_LOCK();
    {
        char **env = GET_ENVIRON(environ);

        while (*env) {
            char *s = strchr(*env, '=');
            if (s) {
                rb_ary_push(ary, env_str_new(*env, s-*env));
                rb_ary_push(ary, env_str_new2(s+1));
            }
            env++;
        }
        FREE_ENVIRON(environ);
    }
    ENV_UNLOCK();

    if (rb_block_pair_yield_optimizable()) {
        for (i=0; i&lt;RARRAY_LEN(ary); i+=2) {
            rb_yield_values(2, RARRAY_AREF(ary, i), RARRAY_AREF(ary, i+1));
        }
    }
    else {
        for (i=0; i&lt;RARRAY_LEN(ary); i+=2) {
            rb_yield(rb_assoc_new(RARRAY_AREF(ary, i), RARRAY_AREF(ary, i+1)));
        }
    }

    return ehash;
}</pre> </div> <p>Yields each environment variable name and its value as a 2-element Array:</p> <pre class="ruby" data-language="ruby">h = {}
ENV.each_pair { |name, value| h[name] = value } # =&gt; ENV
h # =&gt; {"bar"=&gt;"1", "foo"=&gt;"0"}
</pre> <p>Returns an <a href="enumerator.html"><code>Enumerator</code></a> if no block given:</p> <pre class="ruby" data-language="ruby">h = {}
e = ENV.each_pair # =&gt; #&lt;Enumerator: {"bar"=&gt;"1", "foo"=&gt;"0"}:each_pair&gt;
e.each { |name, value| h[name] = value } # =&gt; ENV
h # =&gt; {"bar"=&gt;"1", "foo"=&gt;"0"}
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-each_key"> <span class="method-callseq"> each_key { |name| block } → ENV </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> each_key → an_enumerator </span> </div> </div> <div class="method-description">
<div class="method-source-code" id="each_key-source"> <pre class="c" data-language="c">static VALUE
env_each_key(VALUE ehash)
{
    VALUE keys;
    long i;

    RETURN_SIZED_ENUMERATOR(ehash, 0, 0, rb_env_size);
    keys = env_keys(FALSE);
    for (i=0; i&lt;RARRAY_LEN(keys); i++) {
        rb_yield(RARRAY_AREF(keys, i));
    }
    return ehash;
}</pre> </div> <p>Yields each environment variable name:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1') # =&gt; ENV
names = []
ENV.each_key { |name| names.push(name) } # =&gt; ENV
names # =&gt; ["bar", "foo"]
</pre> <p>Returns an <a href="enumerator.html"><code>Enumerator</code></a> if no block given:</p> <pre class="ruby" data-language="ruby">e = ENV.each_key # =&gt; #&lt;Enumerator: {"bar"=&gt;"1", "foo"=&gt;"0"}:each_key&gt;
names = []
e.each { |name| names.push(name) } # =&gt; ENV
names # =&gt; ["bar", "foo"]
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-each_pair"> <span class="method-callseq"> each { |name, value| block } → ENV </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> each → an_enumerator </span> </div> <div class="method-heading"> <span class="method-callseq"> each_pair { |name, value| block } → ENV </span> </div> <div class="method-heading"> <span class="method-callseq"> each_pair → an_enumerator </span> </div> </div> <div class="method-description">
<div class="method-source-code" id="each_pair-source"> <pre class="c" data-language="c">static VALUE
env_each_pair(VALUE ehash)
{
    long i;

    RETURN_SIZED_ENUMERATOR(ehash, 0, 0, rb_env_size);

    VALUE ary = rb_ary_new();

    ENV_LOCK();
    {
        char **env = GET_ENVIRON(environ);

        while (*env) {
            char *s = strchr(*env, '=');
            if (s) {
                rb_ary_push(ary, env_str_new(*env, s-*env));
                rb_ary_push(ary, env_str_new2(s+1));
            }
            env++;
        }
        FREE_ENVIRON(environ);
    }
    ENV_UNLOCK();

    if (rb_block_pair_yield_optimizable()) {
        for (i=0; i&lt;RARRAY_LEN(ary); i+=2) {
            rb_yield_values(2, RARRAY_AREF(ary, i), RARRAY_AREF(ary, i+1));
        }
    }
    else {
        for (i=0; i&lt;RARRAY_LEN(ary); i+=2) {
            rb_yield(rb_assoc_new(RARRAY_AREF(ary, i), RARRAY_AREF(ary, i+1)));
        }
    }

    return ehash;
}</pre> </div> <p>Yields each environment variable name and its value as a 2-element Array:</p> <pre class="ruby" data-language="ruby">h = {}
ENV.each_pair { |name, value| h[name] = value } # =&gt; ENV
h # =&gt; {"bar"=&gt;"1", "foo"=&gt;"0"}
</pre> <p>Returns an <a href="enumerator.html"><code>Enumerator</code></a> if no block given:</p> <pre class="ruby" data-language="ruby">h = {}
e = ENV.each_pair # =&gt; #&lt;Enumerator: {"bar"=&gt;"1", "foo"=&gt;"0"}:each_pair&gt;
e.each { |name, value| h[name] = value } # =&gt; ENV
h # =&gt; {"bar"=&gt;"1", "foo"=&gt;"0"}
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-each_value"> <span class="method-callseq"> each_value { |value| block } → ENV </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> each_value → an_enumerator </span> </div> </div> <div class="method-description">
<div class="method-source-code" id="each_value-source"> <pre class="c" data-language="c">static VALUE
env_each_value(VALUE ehash)
{
    VALUE values;
    long i;

    RETURN_SIZED_ENUMERATOR(ehash, 0, 0, rb_env_size);
    values = env_values();
    for (i=0; i&lt;RARRAY_LEN(values); i++) {
        rb_yield(RARRAY_AREF(values, i));
    }
    return ehash;
}</pre> </div> <p>Yields each environment variable value:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1') # =&gt; ENV
values = []
ENV.each_value { |value| values.push(value) } # =&gt; ENV
values # =&gt; ["1", "0"]
</pre> <p>Returns an <a href="enumerator.html"><code>Enumerator</code></a> if no block given:</p> <pre class="ruby" data-language="ruby">e = ENV.each_value # =&gt; #&lt;Enumerator: {"bar"=&gt;"1", "foo"=&gt;"0"}:each_value&gt;
values = []
e.each { |value| values.push(value) } # =&gt; ENV
values # =&gt; ["1", "0"]
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-empty-3F"> <span class="method-callseq"> empty? → true or false </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="empty-3F-source"> <pre class="c" data-language="c">static VALUE
env_empty_p(VALUE _)
{
    bool empty = true;

    ENV_LOCK();
    {
        char **env = GET_ENVIRON(environ);
        if (env[0] != 0) {
            empty = false;
        }
        FREE_ENVIRON(environ);
    }
    ENV_UNLOCK();

    return RBOOL(empty);
}</pre> </div> <p>Returns <code>true</code> when there are no environment variables, <code>false</code> otherwise:</p> <pre class="ruby" data-language="ruby">ENV.clear
ENV.empty? # =&gt; true
ENV['foo'] = '0'
ENV.empty? # =&gt; false
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-except"> <span class="method-callseq"> except(*keys) → a_hash </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="except-source"> <pre class="c" data-language="c">static VALUE
env_except(int argc, VALUE *argv, VALUE _)
{
    int i;
    VALUE key, hash = env_to_hash();

    for (i = 0; i &lt; argc; i++) {
        key = argv[i];
        rb_hash_delete(hash, key);
    }

    return hash;
}</pre> </div> <p>Returns a hash except the given keys from <a href="env.html"><code>ENV</code></a> and their values.</p> <pre class="ruby" data-language="ruby">ENV                       #=&gt; {"LANG"=&gt;"en_US.UTF-8", "TERM"=&gt;"xterm-256color", "HOME"=&gt;"/Users/rhc"}
ENV.except("TERM","HOME") #=&gt; {"LANG"=&gt;"en_US.UTF-8"}
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-fetch"> <span class="method-callseq"> fetch(name) → value </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> fetch(name, default) → value </span> </div> <div class="method-heading"> <span class="method-callseq"> fetch(name) { |name| block } → value </span> </div> </div> <div class="method-description">
<div class="method-source-code" id="fetch-source"> <pre class="c" data-language="c">static VALUE
env_fetch(int argc, VALUE *argv, VALUE _)
{
    VALUE key;
    long block_given;
    const char *nam;
    VALUE env;

    rb_check_arity(argc, 1, 2);
    key = argv[0];
    block_given = rb_block_given_p();
    if (block_given &amp;&amp; argc == 2) {
        rb_warn("block supersedes default value argument");
    }
    nam = env_name(key);
    env = getenv_with_lock(nam);

    if (NIL_P(env)) {
        if (block_given) return rb_yield(key);
        if (argc == 1) {
            rb_key_err_raise(rb_sprintf("key not found: \"%"PRIsVALUE"\"", key), envtbl, key);
        }
        return argv[1];
    }
    return env;
}</pre> </div> <p>If <code>name</code> is the name of an environment variable, returns its value:</p> <pre class="ruby" data-language="ruby">ENV['foo'] = '0'
ENV.fetch('foo') # =&gt; '0'
</pre> <p>Otherwise if a block is given (but not a default value), yields <code>name</code> to the block and returns the block’s return value:</p> <pre class="ruby" data-language="ruby">ENV.fetch('foo') { |name| :need_not_return_a_string } # =&gt; :need_not_return_a_string
</pre> <p>Otherwise if a default value is given (but not a block), returns the default value:</p> <pre class="ruby" data-language="ruby">ENV.delete('foo')
ENV.fetch('foo', :default_need_not_be_a_string) # =&gt; :default_need_not_be_a_string
</pre> <p>If the environment variable does not exist and both default and block are given, issues a warning (“warning: block supersedes default value argument”), yields <code>name</code> to the block, and returns the block’s return value:</p> <pre class="ruby" data-language="ruby">ENV.fetch('foo', :default) { |name| :block_return } # =&gt; :block_return
</pre> <p>Raises <a href="keyerror.html"><code>KeyError</code></a> if <code>name</code> is valid, but not found, and neither default value nor block is given:</p> <pre class="ruby" data-language="ruby">ENV.fetch('foo') # Raises KeyError (key not found: "foo")
</pre> <p>Raises an exception if <code>name</code> is invalid. See <a href="env.html#class-ENV-label-Invalid+Names+and+Values">Invalid Names and Values</a>.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-filter"> <span class="method-callseq"> select { |name, value| block } → hash of name/value pairs </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> select → an_enumerator </span> </div> <div class="method-heading"> <span class="method-callseq"> filter { |name, value| block } → hash of name/value pairs </span> </div> <div class="method-heading"> <span class="method-callseq"> filter → an_enumerator </span> </div> </div> <div class="method-description">
<div class="method-source-code" id="filter-source"> <pre class="c" data-language="c">static VALUE
env_select(VALUE ehash)
{
    VALUE result;
    VALUE keys;
    long i;

    RETURN_SIZED_ENUMERATOR(ehash, 0, 0, rb_env_size);
    result = rb_hash_new();
    keys = env_keys(FALSE);
    for (i = 0; i &lt; RARRAY_LEN(keys); ++i) {
        VALUE key = RARRAY_AREF(keys, i);
        VALUE val = rb_f_getenv(Qnil, key);
        if (!NIL_P(val)) {
            if (RTEST(rb_yield_values(2, key, val))) {
                rb_hash_aset(result, key, val);
            }
        }
    }
    RB_GC_GUARD(keys);

    return result;
}</pre> </div> <p>Yields each environment variable name and its value as a 2-element <a href="array.html"><code>Array</code></a>, returning a <a href="hash.html"><code>Hash</code></a> of the names and values for which the block returns a truthy value:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1', 'baz' =&gt; '2')
ENV.select { |name, value| name.start_with?('b') } # =&gt; {"bar"=&gt;"1", "baz"=&gt;"2"}
ENV.filter { |name, value| name.start_with?('b') } # =&gt; {"bar"=&gt;"1", "baz"=&gt;"2"}
</pre> <p>Returns an <a href="enumerator.html"><code>Enumerator</code></a> if no block given:</p> <pre class="ruby" data-language="ruby">e = ENV.select # =&gt; #&lt;Enumerator: {"bar"=&gt;"1", "baz"=&gt;"2", "foo"=&gt;"0"}:select&gt;
e.each { |name, value | name.start_with?('b') } # =&gt; {"bar"=&gt;"1", "baz"=&gt;"2"}
e = ENV.filter # =&gt; #&lt;Enumerator: {"bar"=&gt;"1", "baz"=&gt;"2", "foo"=&gt;"0"}:filter&gt;
e.each { |name, value | name.start_with?('b') } # =&gt; {"bar"=&gt;"1", "baz"=&gt;"2"}
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-filter-21"> <span class="method-callseq"> select! { |name, value| block } → ENV or nil </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> select! → an_enumerator </span> </div> <div class="method-heading"> <span class="method-callseq"> filter! { |name, value| block } → ENV or nil </span> </div> <div class="method-heading"> <span class="method-callseq"> filter! → an_enumerator </span> </div> </div> <div class="method-description">
<div class="method-source-code" id="filter-21-source"> <pre class="c" data-language="c">static VALUE
env_select_bang(VALUE ehash)
{
    VALUE keys;
    long i;
    int del = 0;

    RETURN_SIZED_ENUMERATOR(ehash, 0, 0, rb_env_size);
    keys = env_keys(FALSE);
    RBASIC_CLEAR_CLASS(keys);
    for (i=0; i&lt;RARRAY_LEN(keys); i++) {
        VALUE val = rb_f_getenv(Qnil, RARRAY_AREF(keys, i));
        if (!NIL_P(val)) {
            if (!RTEST(rb_yield_values(2, RARRAY_AREF(keys, i), val))) {
                env_delete(RARRAY_AREF(keys, i));
                del++;
            }
        }
    }
    RB_GC_GUARD(keys);
    if (del == 0) return Qnil;
    return envtbl;
}</pre> </div> <p>Yields each environment variable name and its value as a 2-element <a href="array.html"><code>Array</code></a>, deleting each entry for which the block returns <code>false</code> or <code>nil</code>, and returning <a href="env.html"><code>ENV</code></a> if any deletions made, or <code>nil</code> otherwise:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1', 'baz' =&gt; '2')
ENV.select! { |name, value| name.start_with?('b') } # =&gt; ENV
ENV # =&gt; {"bar"=&gt;"1", "baz"=&gt;"2"}
ENV.select! { |name, value| true } # =&gt; nil

ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1', 'baz' =&gt; '2')
ENV.filter! { |name, value| name.start_with?('b') } # =&gt; ENV
ENV # =&gt; {"bar"=&gt;"1", "baz"=&gt;"2"}
ENV.filter! { |name, value| true } # =&gt; nil
</pre> <p>Returns an <a href="enumerator.html"><code>Enumerator</code></a> if no block given:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1', 'baz' =&gt; '2')
e = ENV.select! # =&gt; #&lt;Enumerator: {"bar"=&gt;"1", "baz"=&gt;"2"}:select!&gt;
e.each { |name, value| name.start_with?('b') } # =&gt; ENV
ENV # =&gt; {"bar"=&gt;"1", "baz"=&gt;"2"}
e.each { |name, value| true } # =&gt; nil

ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1', 'baz' =&gt; '2')
e = ENV.filter! # =&gt; #&lt;Enumerator: {"bar"=&gt;"1", "baz"=&gt;"2"}:filter!&gt;
e.each { |name, value| name.start_with?('b') } # =&gt; ENV
ENV # =&gt; {"bar"=&gt;"1", "baz"=&gt;"2"}
e.each { |name, value| true } # =&gt; nil
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-freeze"> <span class="method-callseq"> freeze </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="freeze-source"> <pre class="c" data-language="c">static VALUE
env_freeze(VALUE self)
{
    rb_raise(rb_eTypeError, "cannot freeze ENV");
    UNREACHABLE_RETURN(self);
}</pre> </div> <p>Raises an exception:</p> <pre class="ruby" data-language="ruby">ENV.freeze # Raises TypeError (cannot freeze ENV)
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-has_key-3F"> <span class="method-callseq"> include?(name) → true or false </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> has_key?(name) → true or false </span> </div> <div class="method-heading"> <span class="method-callseq"> member?(name) → true or false </span> </div> <div class="method-heading"> <span class="method-callseq"> key?(name) → true or false </span> </div> </div> <div class="method-description">
<div class="method-source-code" id="has_key-3F-source"> <pre class="c" data-language="c">static VALUE
env_has_key(VALUE env, VALUE key)
{
    const char *s = env_name(key);
    return RBOOL(has_env_with_lock(s));
}</pre> </div> <p>Returns <code>true</code> if there is an environment variable with the given <code>name</code>:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1')
ENV.include?('foo') # =&gt; true
</pre> <p>Returns <code>false</code> if <code>name</code> is a valid <a href="string.html"><code>String</code></a> and there is no such environment variable:</p> <pre class="ruby" data-language="ruby">ENV.include?('baz') # =&gt; false
</pre> <p>Returns <code>false</code> if <code>name</code> is the empty <a href="string.html"><code>String</code></a> or is a <a href="string.html"><code>String</code></a> containing character <code>'='</code>:</p> <pre class="ruby" data-language="ruby">ENV.include?('') # =&gt; false
ENV.include?('=') # =&gt; false
</pre> <p>Raises an exception if <code>name</code> is a <a href="string.html"><code>String</code></a> containing the NUL character <code>"\0"</code>:</p> <pre class="ruby" data-language="ruby">ENV.include?("\0") # Raises ArgumentError (bad environment variable name: contains null byte)
</pre> <p>Raises an exception if <code>name</code> has an encoding that is not ASCII-compatible:</p> <pre class="ruby" data-language="ruby">ENV.include?("\xa1\xa1".force_encoding(Encoding::UTF_16LE))
# Raises ArgumentError (bad environment variable name: ASCII incompatible encoding: UTF-16LE)
</pre> <p>Raises an exception if <code>name</code> is not a String:</p> <pre class="ruby" data-language="ruby">ENV.include?(Object.new) # TypeError (no implicit conversion of Object into String)
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-has_value-3F"> <span class="method-callseq"> value?(value) → true or false </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> has_value?(value) → true or false </span> </div> </div> <div class="method-description">
<div class="method-source-code" id="has_value-3F-source"> <pre class="c" data-language="c">static VALUE
env_has_value(VALUE dmy, VALUE obj)
{
    obj = rb_check_string_type(obj);
    if (NIL_P(obj)) return Qnil;

    VALUE ret = Qfalse;

    ENV_LOCK();
    {
        char **env = GET_ENVIRON(environ);
        while (*env) {
            char *s = strchr(*env, '=');
            if (s++) {
                long len = strlen(s);
                if (RSTRING_LEN(obj) == len &amp;&amp; strncmp(s, RSTRING_PTR(obj), len) == 0) {
                    ret = Qtrue;
                    break;
                }
            }
            env++;
        }
        FREE_ENVIRON(environ);
    }
    ENV_UNLOCK();

    return ret;
}</pre> </div> <p>Returns <code>true</code> if <code>value</code> is the value for some environment variable name, <code>false</code> otherwise:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1')
ENV.value?('0') # =&gt; true
ENV.has_value?('0') # =&gt; true
ENV.value?('2') # =&gt; false
ENV.has_value?('2') # =&gt; false
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-include-3F"> <span class="method-callseq"> include?(name) → true or false </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> has_key?(name) → true or false </span> </div> <div class="method-heading"> <span class="method-callseq"> member?(name) → true or false </span> </div> <div class="method-heading"> <span class="method-callseq"> key?(name) → true or false </span> </div> </div> <div class="method-description">
<div class="method-source-code" id="include-3F-source"> <pre class="c" data-language="c">static VALUE
env_has_key(VALUE env, VALUE key)
{
    const char *s = env_name(key);
    return RBOOL(has_env_with_lock(s));
}</pre> </div> <p>Returns <code>true</code> if there is an environment variable with the given <code>name</code>:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1')
ENV.include?('foo') # =&gt; true
</pre> <p>Returns <code>false</code> if <code>name</code> is a valid <a href="string.html"><code>String</code></a> and there is no such environment variable:</p> <pre class="ruby" data-language="ruby">ENV.include?('baz') # =&gt; false
</pre> <p>Returns <code>false</code> if <code>name</code> is the empty <a href="string.html"><code>String</code></a> or is a <a href="string.html"><code>String</code></a> containing character <code>'='</code>:</p> <pre class="ruby" data-language="ruby">ENV.include?('') # =&gt; false
ENV.include?('=') # =&gt; false
</pre> <p>Raises an exception if <code>name</code> is a <a href="string.html"><code>String</code></a> containing the NUL character <code>"\0"</code>:</p> <pre class="ruby" data-language="ruby">ENV.include?("\0") # Raises ArgumentError (bad environment variable name: contains null byte)
</pre> <p>Raises an exception if <code>name</code> has an encoding that is not ASCII-compatible:</p> <pre class="ruby" data-language="ruby">ENV.include?("\xa1\xa1".force_encoding(Encoding::UTF_16LE))
# Raises ArgumentError (bad environment variable name: ASCII incompatible encoding: UTF-16LE)
</pre> <p>Raises an exception if <code>name</code> is not a String:</p> <pre class="ruby" data-language="ruby">ENV.include?(Object.new) # TypeError (no implicit conversion of Object into String)
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-inspect"> <span class="method-callseq"> inspect → a_string </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="inspect-source"> <pre class="c" data-language="c">static VALUE
env_inspect(VALUE _)
{
    VALUE i;
    VALUE str = rb_str_buf_new2("{");

    ENV_LOCK();
    {
        char **env = GET_ENVIRON(environ);
        while (*env) {
            char *s = strchr(*env, '=');

            if (env != environ) {
                rb_str_buf_cat2(str, ", ");
            }
            if (s) {
                rb_str_buf_cat2(str, "\"");
                rb_str_buf_cat(str, *env, s-*env);
                rb_str_buf_cat2(str, "\"=&gt;");
                i = rb_inspect(rb_str_new2(s+1));
                rb_str_buf_append(str, i);
            }
            env++;
        }
        FREE_ENVIRON(environ);
    }
    ENV_UNLOCK();

    rb_str_buf_cat2(str, "}");

    return str;
}</pre> </div> <p>Returns the contents of the environment as a String:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1')
ENV.inspect # =&gt; "{\"bar\"=&gt;\"1\", \"foo\"=&gt;\"0\"}"
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-invert"> <span class="method-callseq"> invert → hash of value/name pairs </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="invert-source"> <pre class="c" data-language="c">static VALUE
env_invert(VALUE _)
{
    return rb_hash_invert(env_to_hash());
}</pre> </div> <p>Returns a <a href="hash.html"><code>Hash</code></a> whose keys are the <a href="env.html"><code>ENV</code></a> values, and whose values are the corresponding <a href="env.html"><code>ENV</code></a> names:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1')
ENV.invert # =&gt; {"1"=&gt;"bar", "0"=&gt;"foo"}
</pre> <p>For a duplicate <a href="env.html"><code>ENV</code></a> value, overwrites the hash entry:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '0')
ENV.invert # =&gt; {"0"=&gt;"foo"}
</pre> <p>Note that the order of the <a href="env.html"><code>ENV</code></a> processing is OS-dependent, which means that the order of overwriting is also OS-dependent. See <a href="env.html#class-ENV-label-About+Ordering">About Ordering</a>.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-keep_if"> <span class="method-callseq"> keep_if { |name, value| block } → ENV </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> keep_if → an_enumerator </span> </div> </div> <div class="method-description">
<div class="method-source-code" id="keep_if-source"> <pre class="c" data-language="c">static VALUE
env_keep_if(VALUE ehash)
{
    RETURN_SIZED_ENUMERATOR(ehash, 0, 0, rb_env_size);
    env_select_bang(ehash);
    return envtbl;
}</pre> </div> <p>Yields each environment variable name and its value as a 2-element <a href="array.html"><code>Array</code></a>, deleting each environment variable for which the block returns <code>false</code> or <code>nil</code>, and returning ENV:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1', 'baz' =&gt; '2')
ENV.keep_if { |name, value| name.start_with?('b') } # =&gt; ENV
ENV # =&gt; {"bar"=&gt;"1", "baz"=&gt;"2"}
</pre> <p>Returns an <a href="enumerator.html"><code>Enumerator</code></a> if no block given:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1', 'baz' =&gt; '2')
e = ENV.keep_if # =&gt; #&lt;Enumerator: {"bar"=&gt;"1", "baz"=&gt;"2", "foo"=&gt;"0"}:keep_if&gt;
e.each { |name, value| name.start_with?('b') } # =&gt; ENV
ENV # =&gt; {"bar"=&gt;"1", "baz"=&gt;"2"}
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-key"> <span class="method-callseq"> key(value) → name or nil </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="key-source"> <pre class="c" data-language="c">static VALUE
env_key(VALUE dmy, VALUE value)
{
    SafeStringValue(value);
    VALUE str = Qnil;

    ENV_LOCK();
    {
        char **env = GET_ENVIRON(environ);
        while (*env) {
            char *s = strchr(*env, '=');
            if (s++) {
                long len = strlen(s);
                if (RSTRING_LEN(value) == len &amp;&amp; strncmp(s, RSTRING_PTR(value), len) == 0) {
                    str = env_str_new(*env, s-*env-1);
                    break;
                }
            }
            env++;
        }
        FREE_ENVIRON(environ);
    }
    ENV_UNLOCK();

    return str;
}</pre> </div> <p>Returns the name of the first environment variable with <code>value</code>, if it exists:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '0')
ENV.key('0') # =&gt; "foo"
</pre> <p>The order in which environment variables are examined is OS-dependent. See <a href="env.html#class-ENV-label-About+Ordering">About Ordering</a>.</p> <p>Returns <code>nil</code> if there is no such value.</p> <p>Raises an exception if <code>value</code> is invalid:</p> <pre class="ruby" data-language="ruby">ENV.key(Object.new) # raises TypeError (no implicit conversion of Object into String)
</pre> <p>See <a href="env.html#class-ENV-label-Invalid+Names+and+Values">Invalid Names and Values</a>.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-key-3F"> <span class="method-callseq"> include?(name) → true or false </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> has_key?(name) → true or false </span> </div> <div class="method-heading"> <span class="method-callseq"> member?(name) → true or false </span> </div> <div class="method-heading"> <span class="method-callseq"> key?(name) → true or false </span> </div> </div> <div class="method-description">
<div class="method-source-code" id="key-3F-source"> <pre class="c" data-language="c">static VALUE
env_has_key(VALUE env, VALUE key)
{
    const char *s = env_name(key);
    return RBOOL(has_env_with_lock(s));
}</pre> </div> <p>Returns <code>true</code> if there is an environment variable with the given <code>name</code>:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1')
ENV.include?('foo') # =&gt; true
</pre> <p>Returns <code>false</code> if <code>name</code> is a valid <a href="string.html"><code>String</code></a> and there is no such environment variable:</p> <pre class="ruby" data-language="ruby">ENV.include?('baz') # =&gt; false
</pre> <p>Returns <code>false</code> if <code>name</code> is the empty <a href="string.html"><code>String</code></a> or is a <a href="string.html"><code>String</code></a> containing character <code>'='</code>:</p> <pre class="ruby" data-language="ruby">ENV.include?('') # =&gt; false
ENV.include?('=') # =&gt; false
</pre> <p>Raises an exception if <code>name</code> is a <a href="string.html"><code>String</code></a> containing the NUL character <code>"\0"</code>:</p> <pre class="ruby" data-language="ruby">ENV.include?("\0") # Raises ArgumentError (bad environment variable name: contains null byte)
</pre> <p>Raises an exception if <code>name</code> has an encoding that is not ASCII-compatible:</p> <pre class="ruby" data-language="ruby">ENV.include?("\xa1\xa1".force_encoding(Encoding::UTF_16LE))
# Raises ArgumentError (bad environment variable name: ASCII incompatible encoding: UTF-16LE)
</pre> <p>Raises an exception if <code>name</code> is not a String:</p> <pre class="ruby" data-language="ruby">ENV.include?(Object.new) # TypeError (no implicit conversion of Object into String)
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-keys"> <span class="method-callseq"> keys → array of names </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="keys-source"> <pre class="c" data-language="c">static VALUE
env_f_keys(VALUE _)
{
    return env_keys(FALSE);
}</pre> </div> <p>Returns all variable names in an Array:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1')
ENV.keys # =&gt; ['bar', 'foo']
</pre> <p>The order of the names is OS-dependent. See <a href="env.html#class-ENV-label-About+Ordering">About Ordering</a>.</p> <p>Returns the empty <a href="array.html"><code>Array</code></a> if <a href="env.html"><code>ENV</code></a> is empty.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-length"> <span class="method-callseq"> length → an_integer </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> size → an_integer </span> </div> </div> <div class="method-description">
<div class="method-source-code" id="length-source"> <pre class="c" data-language="c">static VALUE
env_size(VALUE _)
{
    return INT2FIX(env_size_with_lock());
}</pre> </div> <p>Returns the count of environment variables:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1')
ENV.length # =&gt; 2
ENV.size # =&gt; 2
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-member-3F"> <span class="method-callseq"> include?(name) → true or false </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> has_key?(name) → true or false </span> </div> <div class="method-heading"> <span class="method-callseq"> member?(name) → true or false </span> </div> <div class="method-heading"> <span class="method-callseq"> key?(name) → true or false </span> </div> </div> <div class="method-description">
<div class="method-source-code" id="member-3F-source"> <pre class="c" data-language="c">static VALUE
env_has_key(VALUE env, VALUE key)
{
    const char *s = env_name(key);
    return RBOOL(has_env_with_lock(s));
}</pre> </div> <p>Returns <code>true</code> if there is an environment variable with the given <code>name</code>:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1')
ENV.include?('foo') # =&gt; true
</pre> <p>Returns <code>false</code> if <code>name</code> is a valid <a href="string.html"><code>String</code></a> and there is no such environment variable:</p> <pre class="ruby" data-language="ruby">ENV.include?('baz') # =&gt; false
</pre> <p>Returns <code>false</code> if <code>name</code> is the empty <a href="string.html"><code>String</code></a> or is a <a href="string.html"><code>String</code></a> containing character <code>'='</code>:</p> <pre class="ruby" data-language="ruby">ENV.include?('') # =&gt; false
ENV.include?('=') # =&gt; false
</pre> <p>Raises an exception if <code>name</code> is a <a href="string.html"><code>String</code></a> containing the NUL character <code>"\0"</code>:</p> <pre class="ruby" data-language="ruby">ENV.include?("\0") # Raises ArgumentError (bad environment variable name: contains null byte)
</pre> <p>Raises an exception if <code>name</code> has an encoding that is not ASCII-compatible:</p> <pre class="ruby" data-language="ruby">ENV.include?("\xa1\xa1".force_encoding(Encoding::UTF_16LE))
# Raises ArgumentError (bad environment variable name: ASCII incompatible encoding: UTF-16LE)
</pre> <p>Raises an exception if <code>name</code> is not a String:</p> <pre class="ruby" data-language="ruby">ENV.include?(Object.new) # TypeError (no implicit conversion of Object into String)
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-merge-21"> <span class="method-callseq"> update → ENV </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> update(*hashes) → ENV </span> </div> <div class="method-heading"> <span class="method-callseq"> update(*hashes) { |name, env_val, hash_val| block } → ENV </span> </div> <div class="method-heading"> <span class="method-callseq"> merge! → ENV </span> </div> <div class="method-heading"> <span class="method-callseq"> merge!(*hashes) → ENV </span> </div> <div class="method-heading"> <span class="method-callseq"> merge!(*hashes) { |name, env_val, hash_val| block } → ENV </span> </div> </div> <div class="method-description">
<div class="method-source-code" id="merge-21-source"> <pre class="c" data-language="c">static VALUE
env_update(int argc, VALUE *argv, VALUE env)
{
    rb_foreach_func *func = rb_block_given_p() ?
        env_update_block_i : env_update_i;
    for (int i = 0; i &lt; argc; ++i) {
        VALUE hash = argv[i];
        if (env == hash) continue;
        hash = to_hash(hash);
        rb_hash_foreach(hash, func, 0);
    }
    return env;
}</pre> </div> <p>Adds to <a href="env.html"><code>ENV</code></a> each key/value pair in the given <code>hash</code>; returns ENV:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1')
ENV.merge!('baz' =&gt; '2', 'bat' =&gt; '3') # =&gt; {"bar"=&gt;"1", "bat"=&gt;"3", "baz"=&gt;"2", "foo"=&gt;"0"}
</pre> <p>Deletes the <a href="env.html"><code>ENV</code></a> entry for a hash value that is <code>nil</code>:</p> <pre class="ruby" data-language="ruby">ENV.merge!('baz' =&gt; nil, 'bat' =&gt; nil) # =&gt; {"bar"=&gt;"1", "foo"=&gt;"0"}
</pre> <p>For an already-existing name, if no block given, overwrites the <a href="env.html"><code>ENV</code></a> value:</p> <pre class="ruby" data-language="ruby">ENV.merge!('foo' =&gt; '4') # =&gt; {"bar"=&gt;"1", "foo"=&gt;"4"}
</pre> <p>For an already-existing name, if block given, yields the name, its <a href="env.html"><code>ENV</code></a> value, and its hash value; the block’s return value becomes the new name:</p> <pre class="ruby" data-language="ruby">ENV.merge!('foo' =&gt; '5') { |name, env_val, hash_val | env_val + hash_val } # =&gt; {"bar"=&gt;"1", "foo"=&gt;"45"}
</pre> <p>Raises an exception if a name or value is invalid (see <a href="env.html#class-ENV-label-Invalid+Names+and+Values">Invalid Names and Values</a>);</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1')
ENV.merge!('foo' =&gt; '6', :bar =&gt; '7', 'baz' =&gt; '9') # Raises TypeError (no implicit conversion of Symbol into String)
ENV # =&gt; {"bar"=&gt;"1", "foo"=&gt;"6"}
ENV.merge!('foo' =&gt; '7', 'bar' =&gt; 8, 'baz' =&gt; '9') # Raises TypeError (no implicit conversion of Integer into String)
ENV # =&gt; {"bar"=&gt;"1", "foo"=&gt;"7"}
</pre> <p>Raises an exception if the block returns an invalid name: (see <a href="env.html#class-ENV-label-Invalid+Names+and+Values">Invalid Names and Values</a>):</p> <pre class="ruby" data-language="ruby">ENV.merge!('bat' =&gt; '8', 'foo' =&gt; '9') { |name, env_val, hash_val | 10 } # Raises TypeError (no implicit conversion of Integer into String)
ENV # =&gt; {"bar"=&gt;"1", "bat"=&gt;"8", "foo"=&gt;"7"}
</pre> <p>Note that for the exceptions above, hash pairs preceding an invalid name or value are processed normally; those following are ignored.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-rassoc"> <span class="method-callseq"> rassoc(value) → [name, value] or nil </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="rassoc-source"> <pre class="c" data-language="c">static VALUE
env_rassoc(VALUE dmy, VALUE obj)
{
    obj = rb_check_string_type(obj);
    if (NIL_P(obj)) return Qnil;

    VALUE result = Qnil;

    ENV_LOCK();
    {
        char **env = GET_ENVIRON(environ);

        while (*env) {
            const char *p = *env;
            char *s = strchr(p, '=');
            if (s++) {
                long len = strlen(s);
                if (RSTRING_LEN(obj) == len &amp;&amp; strncmp(s, RSTRING_PTR(obj), len) == 0) {
                    result = rb_assoc_new(rb_str_new(p, s-p-1), obj);
                    break;
                }
            }
            env++;
        }
        FREE_ENVIRON(environ);
    }
    ENV_UNLOCK();

    return result;
}</pre> </div> <p>Returns a 2-element <a href="array.html"><code>Array</code></a> containing the name and value of the <strong>first</strong> <strong>found</strong> environment variable that has value <code>value</code>, if one exists:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '0')
ENV.rassoc('0') # =&gt; ["bar", "0"]
</pre> <p>The order in which environment variables are examined is OS-dependent. See <a href="env.html#class-ENV-label-About+Ordering">About Ordering</a>.</p> <p>Returns <code>nil</code> if there is no such environment variable.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-rehash"> <span class="method-callseq"> rehash → nil </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="rehash-source"> <pre class="c" data-language="c">static VALUE
env_none(VALUE _)
{
    return Qnil;
}</pre> </div> <p>(Provided for compatibility with <a href="hash.html"><code>Hash</code></a>.)</p> <p>Does not modify <a href="env.html"><code>ENV</code></a>; returns <code>nil</code>.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-reject"> <span class="method-callseq"> reject { |name, value| block } → hash of name/value pairs </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> reject → an_enumerator </span> </div> </div> <div class="method-description">
<div class="method-source-code" id="reject-source"> <pre class="c" data-language="c">static VALUE
env_reject(VALUE _)
{
    return rb_hash_delete_if(env_to_hash());
}</pre> </div> <p>Yields each environment variable name and its value as a 2-element <a href="array.html"><code>Array</code></a>. Returns a <a href="hash.html"><code>Hash</code></a> whose items are determined by the block. When the block returns a truthy value, the name/value pair is added to the return <a href="hash.html"><code>Hash</code></a>; otherwise the pair is ignored:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1', 'baz' =&gt; '2')
ENV.reject { |name, value| name.start_with?('b') } # =&gt; {"foo"=&gt;"0"}
</pre> <p>Returns an <a href="enumerator.html"><code>Enumerator</code></a> if no block given:</p> <pre class="ruby" data-language="ruby">e = ENV.reject
e.each { |name, value| name.start_with?('b') } # =&gt; {"foo"=&gt;"0"}
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-reject-21"> <span class="method-callseq"> reject! { |name, value| block } → ENV or nil </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> reject! → an_enumerator </span> </div> </div> <div class="method-description">
<div class="method-source-code" id="reject-21-source"> <pre class="c" data-language="c">static VALUE
env_reject_bang(VALUE ehash)
{
    VALUE keys;
    long i;
    int del = 0;

    RETURN_SIZED_ENUMERATOR(ehash, 0, 0, rb_env_size);
    keys = env_keys(FALSE);
    RBASIC_CLEAR_CLASS(keys);
    for (i=0; i&lt;RARRAY_LEN(keys); i++) {
        VALUE val = rb_f_getenv(Qnil, RARRAY_AREF(keys, i));
        if (!NIL_P(val)) {
            if (RTEST(rb_yield_values(2, RARRAY_AREF(keys, i), val))) {
                env_delete(RARRAY_AREF(keys, i));
                del++;
            }
        }
    }
    RB_GC_GUARD(keys);
    if (del == 0) return Qnil;
    return envtbl;
}</pre> </div> <p>Similar to <a href="env.html#method-c-delete_if"><code>ENV.delete_if</code></a>, but returns <code>nil</code> if no changes were made.</p> <p>Yields each environment variable name and its value as a 2-element <a href="array.html"><code>Array</code></a>, deleting each environment variable for which the block returns a truthy value, and returning <a href="env.html"><code>ENV</code></a> (if any deletions) or <code>nil</code> (if not):</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1', 'baz' =&gt; '2')
ENV.reject! { |name, value| name.start_with?('b') } # =&gt; ENV
ENV # =&gt; {"foo"=&gt;"0"}
ENV.reject! { |name, value| name.start_with?('b') } # =&gt; nil
</pre> <p>Returns an <a href="enumerator.html"><code>Enumerator</code></a> if no block given:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1', 'baz' =&gt; '2')
e = ENV.reject! # =&gt; #&lt;Enumerator: {"bar"=&gt;"1", "baz"=&gt;"2", "foo"=&gt;"0"}:reject!&gt;
e.each { |name, value| name.start_with?('b') } # =&gt; ENV
ENV # =&gt; {"foo"=&gt;"0"}
e.each { |name, value| name.start_with?('b') } # =&gt; nil
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-replace"> <span class="method-callseq"> replace(hash) → ENV </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="replace-source"> <pre class="c" data-language="c">static VALUE
env_replace(VALUE env, VALUE hash)
{
    VALUE keys;
    long i;

    keys = env_keys(TRUE);
    if (env == hash) return env;
    hash = to_hash(hash);
    rb_hash_foreach(hash, env_replace_i, keys);

    for (i=0; i&lt;RARRAY_LEN(keys); i++) {
        env_delete(RARRAY_AREF(keys, i));
    }
    RB_GC_GUARD(keys);
    return env;
}</pre> </div> <p>Replaces the entire content of the environment variables with the name/value pairs in the given <code>hash</code>; returns <a href="env.html"><code>ENV</code></a>.</p> <p>Replaces the content of <a href="env.html"><code>ENV</code></a> with the given pairs:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1') # =&gt; ENV
ENV.to_hash # =&gt; {"bar"=&gt;"1", "foo"=&gt;"0"}
</pre> <p>Raises an exception if a name or value is invalid (see <a href="env.html#class-ENV-label-Invalid+Names+and+Values">Invalid Names and Values</a>):</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', :bar =&gt; '1') # Raises TypeError (no implicit conversion of Symbol into String)
ENV.replace('foo' =&gt; '0', 'bar' =&gt; 1) # Raises TypeError (no implicit conversion of Integer into String)
ENV.to_hash # =&gt; {"bar"=&gt;"1", "foo"=&gt;"0"}
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-select"> <span class="method-callseq"> select { |name, value| block } → hash of name/value pairs </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> select → an_enumerator </span> </div> <div class="method-heading"> <span class="method-callseq"> filter { |name, value| block } → hash of name/value pairs </span> </div> <div class="method-heading"> <span class="method-callseq"> filter → an_enumerator </span> </div> </div> <div class="method-description">
<div class="method-source-code" id="select-source"> <pre class="c" data-language="c">static VALUE
env_select(VALUE ehash)
{
    VALUE result;
    VALUE keys;
    long i;

    RETURN_SIZED_ENUMERATOR(ehash, 0, 0, rb_env_size);
    result = rb_hash_new();
    keys = env_keys(FALSE);
    for (i = 0; i &lt; RARRAY_LEN(keys); ++i) {
        VALUE key = RARRAY_AREF(keys, i);
        VALUE val = rb_f_getenv(Qnil, key);
        if (!NIL_P(val)) {
            if (RTEST(rb_yield_values(2, key, val))) {
                rb_hash_aset(result, key, val);
            }
        }
    }
    RB_GC_GUARD(keys);

    return result;
}</pre> </div> <p>Yields each environment variable name and its value as a 2-element <a href="array.html"><code>Array</code></a>, returning a <a href="hash.html"><code>Hash</code></a> of the names and values for which the block returns a truthy value:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1', 'baz' =&gt; '2')
ENV.select { |name, value| name.start_with?('b') } # =&gt; {"bar"=&gt;"1", "baz"=&gt;"2"}
ENV.filter { |name, value| name.start_with?('b') } # =&gt; {"bar"=&gt;"1", "baz"=&gt;"2"}
</pre> <p>Returns an <a href="enumerator.html"><code>Enumerator</code></a> if no block given:</p> <pre class="ruby" data-language="ruby">e = ENV.select # =&gt; #&lt;Enumerator: {"bar"=&gt;"1", "baz"=&gt;"2", "foo"=&gt;"0"}:select&gt;
e.each { |name, value | name.start_with?('b') } # =&gt; {"bar"=&gt;"1", "baz"=&gt;"2"}
e = ENV.filter # =&gt; #&lt;Enumerator: {"bar"=&gt;"1", "baz"=&gt;"2", "foo"=&gt;"0"}:filter&gt;
e.each { |name, value | name.start_with?('b') } # =&gt; {"bar"=&gt;"1", "baz"=&gt;"2"}
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-select-21"> <span class="method-callseq"> select! { |name, value| block } → ENV or nil </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> select! → an_enumerator </span> </div> <div class="method-heading"> <span class="method-callseq"> filter! { |name, value| block } → ENV or nil </span> </div> <div class="method-heading"> <span class="method-callseq"> filter! → an_enumerator </span> </div> </div> <div class="method-description">
<div class="method-source-code" id="select-21-source"> <pre class="c" data-language="c">static VALUE
env_select_bang(VALUE ehash)
{
    VALUE keys;
    long i;
    int del = 0;

    RETURN_SIZED_ENUMERATOR(ehash, 0, 0, rb_env_size);
    keys = env_keys(FALSE);
    RBASIC_CLEAR_CLASS(keys);
    for (i=0; i&lt;RARRAY_LEN(keys); i++) {
        VALUE val = rb_f_getenv(Qnil, RARRAY_AREF(keys, i));
        if (!NIL_P(val)) {
            if (!RTEST(rb_yield_values(2, RARRAY_AREF(keys, i), val))) {
                env_delete(RARRAY_AREF(keys, i));
                del++;
            }
        }
    }
    RB_GC_GUARD(keys);
    if (del == 0) return Qnil;
    return envtbl;
}</pre> </div> <p>Yields each environment variable name and its value as a 2-element <a href="array.html"><code>Array</code></a>, deleting each entry for which the block returns <code>false</code> or <code>nil</code>, and returning <a href="env.html"><code>ENV</code></a> if any deletions made, or <code>nil</code> otherwise:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1', 'baz' =&gt; '2')
ENV.select! { |name, value| name.start_with?('b') } # =&gt; ENV
ENV # =&gt; {"bar"=&gt;"1", "baz"=&gt;"2"}
ENV.select! { |name, value| true } # =&gt; nil

ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1', 'baz' =&gt; '2')
ENV.filter! { |name, value| name.start_with?('b') } # =&gt; ENV
ENV # =&gt; {"bar"=&gt;"1", "baz"=&gt;"2"}
ENV.filter! { |name, value| true } # =&gt; nil
</pre> <p>Returns an <a href="enumerator.html"><code>Enumerator</code></a> if no block given:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1', 'baz' =&gt; '2')
e = ENV.select! # =&gt; #&lt;Enumerator: {"bar"=&gt;"1", "baz"=&gt;"2"}:select!&gt;
e.each { |name, value| name.start_with?('b') } # =&gt; ENV
ENV # =&gt; {"bar"=&gt;"1", "baz"=&gt;"2"}
e.each { |name, value| true } # =&gt; nil

ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1', 'baz' =&gt; '2')
e = ENV.filter! # =&gt; #&lt;Enumerator: {"bar"=&gt;"1", "baz"=&gt;"2"}:filter!&gt;
e.each { |name, value| name.start_with?('b') } # =&gt; ENV
ENV # =&gt; {"bar"=&gt;"1", "baz"=&gt;"2"}
e.each { |name, value| true } # =&gt; nil
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-shift"> <span class="method-callseq"> shift → [name, value] or nil </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="shift-source"> <pre class="c" data-language="c">static VALUE
env_shift(VALUE _)
{
    VALUE result = Qnil;
    VALUE key = Qnil;

    ENV_LOCK();
    {
        char **env = GET_ENVIRON(environ);
        if (*env) {
            const char *p = *env;
            char *s = strchr(p, '=');
            if (s) {
                key = env_str_new(p, s-p);
                VALUE val = env_str_new2(getenv(RSTRING_PTR(key)));
                result = rb_assoc_new(key, val);
            }
        }
        FREE_ENVIRON(environ);
    }
    ENV_UNLOCK();

    if (!NIL_P(key)) {
        env_delete(key);
    }

    return result;
}</pre> </div> <p>Removes the first environment variable from <a href="env.html"><code>ENV</code></a> and returns a 2-element <a href="array.html"><code>Array</code></a> containing its name and value:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1')
ENV.to_hash # =&gt; {'bar' =&gt; '1', 'foo' =&gt; '0'}
ENV.shift # =&gt; ['bar', '1']
ENV.to_hash # =&gt; {'foo' =&gt; '0'}
</pre> <p>Exactly which environment variable is “first” is OS-dependent. See <a href="env.html#class-ENV-label-About+Ordering">About Ordering</a>.</p> <p>Returns <code>nil</code> if the environment is empty.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-size"> <span class="method-callseq"> length → an_integer </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> size → an_integer </span> </div> </div> <div class="method-description">
<div class="method-source-code" id="size-source"> <pre class="c" data-language="c">static VALUE
env_size(VALUE _)
{
    return INT2FIX(env_size_with_lock());
}</pre> </div> <p>Returns the count of environment variables:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1')
ENV.length # =&gt; 2
ENV.size # =&gt; 2
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-slice"> <span class="method-callseq"> slice(*names) → hash of name/value pairs </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="slice-source"> <pre class="c" data-language="c">static VALUE
env_slice(int argc, VALUE *argv, VALUE _)
{
    int i;
    VALUE key, value, result;

    if (argc == 0) {
        return rb_hash_new();
    }
    result = rb_hash_new_with_size(argc);

    for (i = 0; i &lt; argc; i++) {
        key = argv[i];
        value = rb_f_getenv(Qnil, key);
        if (value != Qnil)
            rb_hash_aset(result, key, value);
    }

    return result;
}</pre> </div> <p>Returns a <a href="hash.html"><code>Hash</code></a> of the given <a href="env.html"><code>ENV</code></a> names and their corresponding values:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1', 'baz' =&gt; '2', 'bat' =&gt; '3')
ENV.slice('foo', 'baz') # =&gt; {"foo"=&gt;"0", "baz"=&gt;"2"}
ENV.slice('baz', 'foo') # =&gt; {"baz"=&gt;"2", "foo"=&gt;"0"}
</pre> <p>Raises an exception if any of the <code>names</code> is invalid (see <a href="env.html#class-ENV-label-Invalid+Names+and+Values">Invalid Names and Values</a>):</p> <pre class="ruby" data-language="ruby">ENV.slice('foo', 'bar', :bat) # Raises TypeError (no implicit conversion of Symbol into String)
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-store"> <span class="method-callseq"> ENV[name] = value → value </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> store(name, value) → value </span> </div> </div> <div class="method-description">
<div class="method-source-code" id="store-source"> <pre class="c" data-language="c">static VALUE
env_aset_m(VALUE obj, VALUE nm, VALUE val)
{
    return env_aset(nm, val);
}</pre> </div> <p>Creates, updates, or deletes the named environment variable, returning the value. Both <code>name</code> and <code>value</code> may be instances of <a href="string.html"><code>String</code></a>. See <a href="env.html#class-ENV-label-Valid+Names+and+Values">Valid Names and Values</a>.</p> <ul>
<li> <p>If the named environment variable does not exist:</p> <ul>
<li> <p>If <code>value</code> is <code>nil</code>, does nothing.</p> <pre class="ruby" data-language="ruby">ENV.clear
ENV['foo'] = nil # =&gt; nil
ENV.include?('foo') # =&gt; false
ENV.store('bar', nil) # =&gt; nil
ENV.include?('bar') # =&gt; false
</pre> </li>
<li> <p>If <code>value</code> is not <code>nil</code>, creates the environment variable with <code>name</code> and <code>value</code>:</p> <pre class="ruby" data-language="ruby"># Create 'foo' using ENV.[]=.
ENV['foo'] = '0' # =&gt; '0'
ENV['foo'] # =&gt; '0'
# Create 'bar' using ENV.store.
ENV.store('bar', '1') # =&gt; '1'
ENV['bar'] # =&gt; '1'
</pre> </li>
</ul> </li>
<li> <p>If the named environment variable exists:</p> <ul>
<li> <p>If <code>value</code> is not <code>nil</code>, updates the environment variable with value <code>value</code>:</p> <pre class="ruby" data-language="ruby"># Update 'foo' using ENV.[]=.
ENV['foo'] = '2' # =&gt; '2'
ENV['foo'] # =&gt; '2'
# Update 'bar' using ENV.store.
ENV.store('bar', '3') # =&gt; '3'
ENV['bar'] # =&gt; '3'
</pre> </li>
<li> <p>If <code>value</code> is <code>nil</code>, deletes the environment variable:</p> <pre class="ruby" data-language="ruby"># Delete 'foo' using ENV.[]=.
ENV['foo'] = nil # =&gt; nil
ENV.include?('foo') # =&gt; false
# Delete 'bar' using ENV.store.
ENV.store('bar', nil) # =&gt; nil
ENV.include?('bar') # =&gt; false
</pre> </li>
</ul> </li>
</ul> <p>Raises an exception if <code>name</code> or <code>value</code> is invalid. See <a href="env.html#class-ENV-label-Invalid+Names+and+Values">Invalid Names and Values</a>.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-to_a"> <span class="method-callseq"> to_a → array of 2-element arrays </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="to_a-source"> <pre class="c" data-language="c">static VALUE
env_to_a(VALUE _)
{
    VALUE ary = rb_ary_new();

    ENV_LOCK();
    {
        char **env = GET_ENVIRON(environ);
        while (*env) {
            char *s = strchr(*env, '=');
            if (s) {
                rb_ary_push(ary, rb_assoc_new(env_str_new(*env, s-*env),
                                              env_str_new2(s+1)));
            }
            env++;
        }
        FREE_ENVIRON(environ);
    }
    ENV_UNLOCK();

    return ary;
}</pre> </div> <p>Returns the contents of <a href="env.html"><code>ENV</code></a> as an <a href="array.html"><code>Array</code></a> of 2-element Arrays, each of which is a name/value pair:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1')
ENV.to_a # =&gt; [["bar", "1"], ["foo", "0"]]
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-to_h"> <span class="method-callseq"> to_h → hash of name/value pairs </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> to_h {|name, value| block } → hash of name/value pairs </span> </div> </div> <div class="method-description">
<div class="method-source-code" id="to_h-source"> <pre class="c" data-language="c">static VALUE
env_to_h(VALUE _)
{
    VALUE hash = env_to_hash();
    if (rb_block_given_p()) {
        hash = rb_hash_to_h_block(hash);
    }
    return hash;
}</pre> </div> <p>With no block, returns a <a href="hash.html"><code>Hash</code></a> containing all name/value pairs from ENV:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1')
ENV.to_h # =&gt; {"bar"=&gt;"1", "foo"=&gt;"0"}
</pre> <p>With a block, returns a <a href="hash.html"><code>Hash</code></a> whose items are determined by the block. Each name/value pair in <a href="env.html"><code>ENV</code></a> is yielded to the block. The block must return a 2-element <a href="array.html"><code>Array</code></a> (name/value pair) that is added to the return <a href="hash.html"><code>Hash</code></a> as a key and value:</p> <pre class="ruby" data-language="ruby">ENV.to_h { |name, value| [name.to_sym, value.to_i] } # =&gt; {:bar=&gt;1, :foo=&gt;0}
</pre> <p>Raises an exception if the block does not return an Array:</p> <pre class="ruby" data-language="ruby">ENV.to_h { |name, value| name } # Raises TypeError (wrong element type String (expected array))
</pre> <p>Raises an exception if the block returns an <a href="array.html"><code>Array</code></a> of the wrong size:</p> <pre class="ruby" data-language="ruby">ENV.to_h { |name, value| [name] } # Raises ArgumentError (element has wrong array length (expected 2, was 1))
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-to_hash"> <span class="method-callseq"> to_hash → hash of name/value pairs </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="to_hash-source"> <pre class="c" data-language="c">static VALUE
env_f_to_hash(VALUE _)
{
    return env_to_hash();
}</pre> </div> <p>Returns a <a href="hash.html"><code>Hash</code></a> containing all name/value pairs from ENV:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1')
ENV.to_hash # =&gt; {"bar"=&gt;"1", "foo"=&gt;"0"}
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-to_s"> <span class="method-callseq"> to_s → "ENV" </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="to_s-source"> <pre class="c" data-language="c">static VALUE
env_to_s(VALUE _)
{
    return rb_usascii_str_new2("ENV");
}</pre> </div> <p>Returns <a href="string.html"><code>String</code></a> ‘ENV’:</p> <pre class="ruby" data-language="ruby">ENV.to_s # =&gt; "ENV"
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-update"> <span class="method-callseq"> update → ENV </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> update(*hashes) → ENV </span> </div> <div class="method-heading"> <span class="method-callseq"> update(*hashes) { |name, env_val, hash_val| block } → ENV </span> </div> <div class="method-heading"> <span class="method-callseq"> merge! → ENV </span> </div> <div class="method-heading"> <span class="method-callseq"> merge!(*hashes) → ENV </span> </div> <div class="method-heading"> <span class="method-callseq"> merge!(*hashes) { |name, env_val, hash_val| block } → ENV </span> </div> </div> <div class="method-description">
<div class="method-source-code" id="update-source"> <pre class="c" data-language="c">static VALUE
env_update(int argc, VALUE *argv, VALUE env)
{
    rb_foreach_func *func = rb_block_given_p() ?
        env_update_block_i : env_update_i;
    for (int i = 0; i &lt; argc; ++i) {
        VALUE hash = argv[i];
        if (env == hash) continue;
        hash = to_hash(hash);
        rb_hash_foreach(hash, func, 0);
    }
    return env;
}</pre> </div> <p>Adds to <a href="env.html"><code>ENV</code></a> each key/value pair in the given <code>hash</code>; returns ENV:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1')
ENV.merge!('baz' =&gt; '2', 'bat' =&gt; '3') # =&gt; {"bar"=&gt;"1", "bat"=&gt;"3", "baz"=&gt;"2", "foo"=&gt;"0"}
</pre> <p>Deletes the <a href="env.html"><code>ENV</code></a> entry for a hash value that is <code>nil</code>:</p> <pre class="ruby" data-language="ruby">ENV.merge!('baz' =&gt; nil, 'bat' =&gt; nil) # =&gt; {"bar"=&gt;"1", "foo"=&gt;"0"}
</pre> <p>For an already-existing name, if no block given, overwrites the <a href="env.html"><code>ENV</code></a> value:</p> <pre class="ruby" data-language="ruby">ENV.merge!('foo' =&gt; '4') # =&gt; {"bar"=&gt;"1", "foo"=&gt;"4"}
</pre> <p>For an already-existing name, if block given, yields the name, its <a href="env.html"><code>ENV</code></a> value, and its hash value; the block’s return value becomes the new name:</p> <pre class="ruby" data-language="ruby">ENV.merge!('foo' =&gt; '5') { |name, env_val, hash_val | env_val + hash_val } # =&gt; {"bar"=&gt;"1", "foo"=&gt;"45"}
</pre> <p>Raises an exception if a name or value is invalid (see <a href="env.html#class-ENV-label-Invalid+Names+and+Values">Invalid Names and Values</a>);</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1')
ENV.merge!('foo' =&gt; '6', :bar =&gt; '7', 'baz' =&gt; '9') # Raises TypeError (no implicit conversion of Symbol into String)
ENV # =&gt; {"bar"=&gt;"1", "foo"=&gt;"6"}
ENV.merge!('foo' =&gt; '7', 'bar' =&gt; 8, 'baz' =&gt; '9') # Raises TypeError (no implicit conversion of Integer into String)
ENV # =&gt; {"bar"=&gt;"1", "foo"=&gt;"7"}
</pre> <p>Raises an exception if the block returns an invalid name: (see <a href="env.html#class-ENV-label-Invalid+Names+and+Values">Invalid Names and Values</a>):</p> <pre class="ruby" data-language="ruby">ENV.merge!('bat' =&gt; '8', 'foo' =&gt; '9') { |name, env_val, hash_val | 10 } # Raises TypeError (no implicit conversion of Integer into String)
ENV # =&gt; {"bar"=&gt;"1", "bat"=&gt;"8", "foo"=&gt;"7"}
</pre> <p>Note that for the exceptions above, hash pairs preceding an invalid name or value are processed normally; those following are ignored.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-value-3F"> <span class="method-callseq"> value?(value) → true or false </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> has_value?(value) → true or false </span> </div> </div> <div class="method-description">
<div class="method-source-code" id="value-3F-source"> <pre class="c" data-language="c">static VALUE
env_has_value(VALUE dmy, VALUE obj)
{
    obj = rb_check_string_type(obj);
    if (NIL_P(obj)) return Qnil;

    VALUE ret = Qfalse;

    ENV_LOCK();
    {
        char **env = GET_ENVIRON(environ);
        while (*env) {
            char *s = strchr(*env, '=');
            if (s++) {
                long len = strlen(s);
                if (RSTRING_LEN(obj) == len &amp;&amp; strncmp(s, RSTRING_PTR(obj), len) == 0) {
                    ret = Qtrue;
                    break;
                }
            }
            env++;
        }
        FREE_ENVIRON(environ);
    }
    ENV_UNLOCK();

    return ret;
}</pre> </div> <p>Returns <code>true</code> if <code>value</code> is the value for some environment variable name, <code>false</code> otherwise:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1')
ENV.value?('0') # =&gt; true
ENV.has_value?('0') # =&gt; true
ENV.value?('2') # =&gt; false
ENV.has_value?('2') # =&gt; false
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-values"> <span class="method-callseq"> values → array of values </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="values-source"> <pre class="c" data-language="c">static VALUE
env_f_values(VALUE _)
{
    return env_values();
}</pre> </div> <p>Returns all environment variable values in an Array:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1')
ENV.values # =&gt; ['1', '0']
</pre> <p>The order of the values is OS-dependent. See <a href="env.html#class-ENV-label-About+Ordering">About Ordering</a>.</p> <p>Returns the empty <a href="array.html"><code>Array</code></a> if <a href="env.html"><code>ENV</code></a> is empty.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-values_at"> <span class="method-callseq"> values_at(*names) → array of values </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="values_at-source"> <pre class="c" data-language="c">static VALUE
env_values_at(int argc, VALUE *argv, VALUE _)
{
    VALUE result;
    long i;

    result = rb_ary_new();
    for (i=0; i&lt;argc; i++) {
        rb_ary_push(result, rb_f_getenv(Qnil, argv[i]));
    }
    return result;
}</pre> </div> <p>Returns an <a href="array.html"><code>Array</code></a> containing the environment variable values associated with the given names:</p> <pre class="ruby" data-language="ruby">ENV.replace('foo' =&gt; '0', 'bar' =&gt; '1', 'baz' =&gt; '2')
ENV.values_at('foo', 'baz') # =&gt; ["0", "2"]
</pre> <p>Returns <code>nil</code> in the <a href="array.html"><code>Array</code></a> for each name that is not an <a href="env.html"><code>ENV</code></a> name:</p> <pre class="ruby" data-language="ruby">ENV.values_at('foo', 'bat', 'bar', 'bam') # =&gt; ["0", nil, "1", nil]
</pre> <p>Returns an empty <a href="array.html"><code>Array</code></a> if no names given.</p> <p>Raises an exception if any name is invalid. See <a href="env.html#class-ENV-label-Invalid+Names+and+Values">Invalid Names and Values</a>.</p>  </div> </div> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    Ruby Core &copy; 1993&ndash;2022 Yukihiro Matsumoto<br>Licensed under the Ruby License.<br>Ruby Standard Library &copy; contributors<br>Licensed under their own licenses.<br>
    
  </p>
</div>
