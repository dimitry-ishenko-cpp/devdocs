<h1 id="class-RubyVM::AbstractSyntaxTree::Node" class="class"> class RubyVM::AbstractSyntaxTree::Node </h1>
<dl class="meta">
<dt>Parent:</dt>
<dd class="meta-parent"><a href="../../object.html">Object</a></dd>
</dl> <section class="description"> <p><a href="node.html"><code>RubyVM::AbstractSyntaxTree::Node</code></a> instances are created by parse methods in <a href="../abstractsyntaxtree.html"><code>RubyVM::AbstractSyntaxTree</code></a>.</p> <p>This class is MRI specific.</p> </section> <section id="5Buntitled-5D" class="documentation-section"> <section id="public-instance-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Public Instance Methods</h3> </header> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-all_tokens"> <span class="method-callseq"> all_tokens → array </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="all_tokens-source"> <pre class="ruby" data-language="ruby"># File ast.rb, line 206
def all_tokens
  Primitive.ast_node_all_tokens
end</pre> </div> <p>Returns all tokens for the input script regardless the receiver node. Returns <code>nil</code> if <code>keep_tokens</code> is not enabled when parse method is called.</p> <pre class="ruby" data-language="ruby">root = RubyVM::AbstractSyntaxTree.parse("x = 1 + 2", keep_tokens: true)
root.all_tokens # =&gt; [[0, :tIDENTIFIER, "x", [1, 0, 1, 1]], [1, :tSP, " ", [1, 1, 1, 2]], ...]
root.children[-1].all_tokens # =&gt; [[0, :tIDENTIFIER, "x", [1, 0, 1, 1]], [1, :tSP, " ", [1, 1, 1, 2]], ...]
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-children"> <span class="method-callseq"> children → array </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="children-source"> <pre class="ruby" data-language="ruby"># File ast.rb, line 217
def children
  Primitive.ast_node_children
end</pre> </div> <p>Returns AST nodes under this one. Each kind of node has different children, depending on what kind of node it is.</p> <p>The returned array may contain other nodes or <code>nil</code>.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-first_column"> <span class="method-callseq"> first_column → integer </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="first_column-source"> <pre class="ruby" data-language="ruby"># File ast.rb, line 149
def first_column
  Primitive.ast_node_first_column
end</pre> </div> <p>The column number in the source code where this AST’s text began.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-first_lineno"> <span class="method-callseq"> first_lineno → integer </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="first_lineno-source"> <pre class="ruby" data-language="ruby"># File ast.rb, line 141
def first_lineno
  Primitive.ast_node_first_lineno
end</pre> </div> <p>The line number in the source code where this AST’s text began.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-inspect"> <span class="method-callseq"> inspect → string </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="inspect-source"> <pre class="ruby" data-language="ruby"># File ast.rb, line 225
def inspect
  Primitive.ast_node_inspect
end</pre> </div> <p>Returns debugging information about this node as a string.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-last_column"> <span class="method-callseq"> last_column → integer </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="last_column-source"> <pre class="ruby" data-language="ruby"># File ast.rb, line 165
def last_column
  Primitive.ast_node_last_column
end</pre> </div> <p>The column number in the source code where this AST’s text ended.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-last_lineno"> <span class="method-callseq"> last_lineno → integer </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="last_lineno-source"> <pre class="ruby" data-language="ruby"># File ast.rb, line 157
def last_lineno
  Primitive.ast_node_last_lineno
end</pre> </div> <p>The line number in the source code where this AST’s text ended.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-node_id"> <span class="method-callseq"> node_id → integer </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="node_id-source"> <pre class="ruby" data-language="ruby"># File ast.rb, line 236
def node_id
  Primitive.ast_node_node_id
end</pre> </div> <p>Returns an internal <a href="node.html#method-i-node_id"><code>node_id</code></a> number. Note that this is an API for ruby internal use, debugging, and research. Do not use this for any other purpose. The compatibility is not guaranteed.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-pretty_print"> <span class="method-name">pretty_print</span><span class="method-args">(q)</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="pretty_print-source"> <pre class="ruby" data-language="ruby"># File lib/pp.rb, line 592
def pretty_print(q)
  q.group(1, "(#{type}@#{first_lineno}:#{first_column}-#{last_lineno}:#{last_column}", ")") {
    case type
    when :SCOPE
      pretty_print_children(q, %w"tbl args body")
    when :ARGS
      pretty_print_children(q, %w[pre_num pre_init opt first_post post_num post_init rest kw kwrest block])
    when :DEFN
      pretty_print_children(q, %w[mid body])
    when :ARYPTN
      pretty_print_children(q, %w[const pre rest post])
    when :HSHPTN
      pretty_print_children(q, %w[const kw kwrest])
    else
      pretty_print_children(q)
    end
  }
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-pretty_print_children"> <span class="method-name">pretty_print_children</span><span class="method-args">(q, names = [])</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="pretty_print_children-source"> <pre class="ruby" data-language="ruby"># File lib/pp.rb, line 579
def pretty_print_children(q, names = [])
  children.zip(names) do |c, n|
    if n
      q.breakable
      q.text "#{n}:"
    end
    q.group(2) do
      q.breakable
      q.pp c
    end
  end
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-script_lines"> <span class="method-callseq"> script_lines → array </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="script_lines-source"> <pre class="ruby" data-language="ruby"># File ast.rb, line 248
def script_lines
  Primitive.ast_node_script_lines
end</pre> </div> <p>Returns the original source code as an array of lines.</p> <p>Note that this is an API for ruby internal use, debugging, and research. Do not use this for any other purpose. The compatibility is not guaranteed.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-source"> <span class="method-callseq"> source → string </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="source-source"> <pre class="ruby" data-language="ruby"># File ast.rb, line 264
def source
  lines = script_lines
  if lines
    lines = lines[first_lineno - 1 .. last_lineno - 1]
    lines[-1] = lines[-1].byteslice(0...last_column)
    lines[0] = lines[0].byteslice(first_column..-1)
    lines.join
  else
    nil
  end
end</pre> </div> <p>Returns the code fragment that corresponds to this AST.</p> <p>Note that this is an API for ruby internal use, debugging, and research. Do not use this for any other purpose. The compatibility is not guaranteed.</p> <p>Also note that this API may return an incomplete code fragment that does not parse; for example, a here document following an expression may be dropped.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-tokens"> <span class="method-callseq"> tokens → array </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="tokens-source"> <pre class="ruby" data-language="ruby"># File ast.rb, line 185
def tokens
  return nil unless all_tokens

  all_tokens.each_with_object([]) do |token, a|
    loc = token.last
    if ([first_lineno, first_column] &lt;=&gt; [loc[0], loc[1]]) &lt;= 0 &amp;&amp;
       ([last_lineno, last_column]   &lt;=&gt; [loc[2], loc[3]]) &gt;= 0
       a &lt;&lt; token
    end
  end
end</pre> </div> <p>Returns tokens corresponding to the location of the node. Returns <code>nil</code> if <code>keep_tokens</code> is not enabled when parse method is called.</p> <pre class="ruby" data-language="ruby">root = RubyVM::AbstractSyntaxTree.parse("x = 1 + 2", keep_tokens: true)
root.tokens # =&gt; [[0, :tIDENTIFIER, "x", [1, 0, 1, 1]], [1, :tSP, " ", [1, 1, 1, 2]], ...]
root.tokens.map{_1[2]}.join # =&gt; "x = 1 + 2"
</pre> <p>Token is an array of:</p> <ul>
<li> <p>id</p> </li>
<li> <p>token type</p> </li>
<li> <p>source code text</p> </li>
<li> <p>location [ <a href="node.html#method-i-first_lineno"><code>first_lineno</code></a>, <a href="node.html#method-i-first_column"><code>first_column</code></a>, <a href="node.html#method-i-last_lineno"><code>last_lineno</code></a>, <a href="node.html#method-i-last_column"><code>last_column</code></a> ]</p> </li>
</ul>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-type"> <span class="method-callseq"> type → symbol </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="type-source"> <pre class="ruby" data-language="ruby"># File ast.rb, line 133
def type
  Primitive.ast_node_type
end</pre> </div> <p>Returns the type of this node as a symbol.</p> <pre class="ruby" data-language="ruby">root = RubyVM::AbstractSyntaxTree.parse("x = 1 + 2")
root.type # =&gt; :SCOPE
lasgn = root.children[2]
lasgn.type # =&gt; :LASGN
call = lasgn.children[1]
call.type # =&gt; :OPCALL
</pre>  </div> </div> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    Ruby Core &copy; 1993&ndash;2022 Yukihiro Matsumoto<br>Licensed under the Ruby License.<br>Ruby Standard Library &copy; contributors<br>Licensed under their own licenses.<br>
    
  </p>
</div>
