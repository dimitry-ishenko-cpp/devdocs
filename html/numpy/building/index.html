<section id="building-from-source"> <h1 id="id1">Building from source</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>If you are only trying to install NumPy, we recommend using binaries - see <a class="reference external" href="https://numpy.org/install">Installation</a> for details on that.</p> </div> <p>Building NumPy from source requires setting up system-level dependencies (compilers, BLAS/LAPACK libraries, etc.) first, and then invoking a build. The build may be done in order to install NumPy for local usage, develop NumPy itself, or build redistributable binary packages. And it may be desired to customize aspects of how the build is done. This guide will cover all these aspects. In addition, it provides background information on how the NumPy build works, and links to up-to-date guides for generic Python build &amp; packaging documentation that is relevant.</p> <section id="system-level-dependencies"> <h2 id="system-level">System-level dependencies</h2> <p>NumPy uses compiled code for speed, which means you need compilers and some other system-level (i.e, non-Python / non-PyPI) dependencies to build it on your system.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>If you are using Conda, you can skip the steps in this section - with the exception of installing compilers for Windows or the Apple Developer Tools for macOS. All other dependencies will be installed automatically by the <code>mamba env create -f environment.yml</code> command.</p> </div> <div class="sd-tab-set docutils"> <input checked id="sd-tab-item-0" name="sd-tab-set-0" type="radio"> <label class="sd-tab-label" data-sync-group="tab" data-sync-id="linux" for="sd-tab-item-0"> Linux</label><div class="sd-tab-content docutils"> <p>If you want to use the system Python and <code>pip</code>, you will need:</p> <ul class="simple"> <li>C and C++ compilers (typically GCC).</li> <li>Python header files (typically a package named <code>python3-dev</code> or <code>python3-devel</code>)</li> <li>BLAS and LAPACK libraries. <a class="reference external" href="https://github.com/OpenMathLib/OpenBLAS/">OpenBLAS</a> is the NumPy default; other variants include Apple Accelerate, <a class="reference external" href="https://software.intel.com/en-us/intel-mkl">MKL</a>, <a class="reference external" href="http://math-atlas.sourceforge.net/">ATLAS</a> and <a class="reference external" href="https://www.netlib.org/lapack/index.html">Netlib</a> (or “Reference”) BLAS and LAPACK.</li> <li>
<code>pkg-config</code> for dependency detection.</li> <li>A Fortran compiler is needed only for running the <code>f2py</code> tests. The instructions below include a Fortran compiler, however you can safely leave it out.</li> </ul> <div class="sd-tab-set docutils"> <input checked id="sd-tab-item-3" name="sd-tab-set-1" type="radio"> <label class="sd-tab-label" for="sd-tab-item-3"> Debian/Ubuntu Linux</label><div class="sd-tab-content docutils"> <p>To install NumPy build requirements, you can do:</p> <pre data-language="python">sudo apt install -y gcc g++ gfortran libopenblas-dev liblapack-dev pkg-config python3-pip python3-dev
</pre> <p>Alternatively, you can do:</p> <pre data-language="python">sudo apt build-dep numpy
</pre> <p>This command installs whatever is needed to build NumPy, with the advantage that new dependencies or updates to required versions are handled by the package managers.</p> </div> <input id="sd-tab-item-4" name="sd-tab-set-1" type="radio"> <label class="sd-tab-label" for="sd-tab-item-4"> Fedora</label><div class="sd-tab-content docutils"> <p>To install NumPy build requirements, you can do:</p> <pre data-language="python">sudo dnf install gcc-gfortran python3-devel openblas-devel lapack-devel pkgconfig
</pre> <p>Alternatively, you can do:</p> <pre data-language="python">sudo dnf builddep numpy
</pre> <p>This command installs whatever is needed to build NumPy, with the advantage that new dependencies or updates to required versions are handled by the package managers.</p> </div> <input id="sd-tab-item-5" name="sd-tab-set-1" type="radio"> <label class="sd-tab-label" for="sd-tab-item-5"> CentOS/RHEL</label><div class="sd-tab-content docutils"> <p>To install NumPy build requirements, you can do:</p> <pre data-language="python">sudo yum install gcc-gfortran python3-devel openblas-devel lapack-devel pkgconfig
</pre> <p>Alternatively, you can do:</p> <pre data-language="python">sudo yum-builddep numpy
</pre> <p>This command installs whatever is needed to build NumPy, with the advantage that new dependencies or updates to required versions are handled by the package managers.</p> </div> <input id="sd-tab-item-6" name="sd-tab-set-1" type="radio"> <label class="sd-tab-label" for="sd-tab-item-6"> Arch</label><div class="sd-tab-content docutils"> <p>To install NumPy build requirements, you can do:</p> <pre data-language="python">sudo pacman -S gcc-fortran openblas pkgconf
</pre> </div> </div> </div> <input id="sd-tab-item-1" name="sd-tab-set-0" type="radio"> <label class="sd-tab-label" data-sync-group="tab" data-sync-id="macos" for="sd-tab-item-1"> macOS</label><div class="sd-tab-content docutils"> <p>Install Apple Developer Tools. An easy way to do this is to <a class="reference external" href="https://blog.teamtreehouse.com/introduction-to-the-mac-os-x-command-line">open a terminal window</a>, enter the command:</p> <pre data-language="python">xcode-select --install
</pre> <p>and follow the prompts. Apple Developer Tools includes Git, the Clang C/C++ compilers, and other development utilities that may be required.</p> <p>Do <em>not</em> use the macOS system Python. Instead, install Python with <a class="reference external" href="https://www.python.org/downloads/">the python.org installer</a> or with a package manager like Homebrew, MacPorts or Fink.</p> <p>On macOS &gt;=13.3, the easiest build option is to use Accelerate, which is already installed and will be automatically used by default.</p> <p>On older macOS versions you need a different BLAS library, most likely OpenBLAS, plus pkg-config to detect OpenBLAS. These are easiest to install with <a class="reference external" href="https://brew.sh/">Homebrew</a>:</p> <pre data-language="python">brew install openblas pkg-config gfortran
</pre> </div> <input id="sd-tab-item-2" name="sd-tab-set-0" type="radio"> <label class="sd-tab-label" data-sync-group="tab" data-sync-id="windows" for="sd-tab-item-2"> Windows</label><div class="sd-tab-content docutils"> <p>On Windows, the use of a Fortran compiler is more tricky than on other platforms, because MSVC does not support Fortran, and gfortran and MSVC can’t be used together. If you don’t need to run the <code>f2py</code> tests, simply using MSVC is easiest. Otherwise, you will need one of these sets of compilers:</p> <ol class="arabic simple"> <li>MSVC + Intel Fortran (<code>ifort</code>)</li> <li>Intel compilers (<code>icc</code>, <code>ifort</code>)</li> <li>Mingw-w64 compilers (<code>gcc</code>, <code>g++</code>, <code>gfortran</code>)</li> </ol> <p>Compared to macOS and Linux, building NumPy on Windows is a little more difficult, due to the need to set up these compilers. It is not possible to just call a one-liner on the command prompt as you would on other platforms.</p> <p>First, install Microsoft Visual Studio - the 2019 Community Edition or any newer version will work (see the <a class="reference external" href="https://visualstudio.microsoft.com/downloads/">Visual Studio download site</a>). This is needed even if you use the MinGW-w64 or Intel compilers, in order to ensure you have the Windows Universal C Runtime (the other components of Visual Studio are not needed when using Mingw-w64, and can be deselected if desired, to save disk space).</p> <div class="sd-tab-set docutils"> <input checked id="sd-tab-item-7" name="sd-tab-set-2" type="radio"> <label class="sd-tab-label" for="sd-tab-item-7"> MSVC</label><div class="sd-tab-content docutils"> <p>The MSVC installer does not put the compilers on the system path, and the install location may change. To query the install location, MSVC comes with a <code>vswhere.exe</code> command-line utility. And to make the C/C++ compilers available inside the shell you are using, you need to run a <code>.bat</code> file for the correct bitness and architecture (e.g., for 64-bit Intel CPUs, use <code>vcvars64.bat</code>).</p> <p>For detailed guidance, see <a class="reference external" href="https://learn.microsoft.com/en-us/cpp/build/building-on-the-command-line?view=msvc-170">Use the Microsoft C++ toolset from the command line</a>.</p> </div> <input id="sd-tab-item-8" name="sd-tab-set-2" type="radio"> <label class="sd-tab-label" for="sd-tab-item-8"> Intel</label><div class="sd-tab-content docutils"> <p>Similar to MSVC, the Intel compilers are designed to be used with an activation script (<code>Intel\oneAPI\setvars.bat</code>) that you run in the shell you are using. This makes the compilers available on the path. For detailed guidance, see <a class="reference external" href="https://www.intel.com/content/www/us/en/docs/oneapi-hpc-toolkit/get-started-guide-windows/2023-1/overview.html">Get Started with the Intel® oneAPI HPC Toolkit for Windows</a>.</p> </div> <input id="sd-tab-item-9" name="sd-tab-set-2" type="radio"> <label class="sd-tab-label" for="sd-tab-item-9"> MinGW-w64</label><div class="sd-tab-content docutils"> <p>There are several sources of binaries for MinGW-w64. We recommend the RTools versions, which can be installed with Chocolatey (see Chocolatey install instructions <a class="reference external" href="https://chocolatey.org/install">here</a>):</p> <pre data-language="python">choco install rtools -y --no-progress --force --version=4.0.0.20220206
</pre> </div> </div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>Compilers should be on the system path (i.e., the <code>PATH</code> environment variable should contain the directory in which the compiler executables can be found) in order to be found, with the exception of MSVC which will be found automatically if and only if there are no other compilers on the <code>PATH</code>. You can use any shell (e.g., Powershell, <code>cmd</code> or Git Bash) to invoke a build. To check that this is the case, try invoking a Fortran compiler in the shell you use (e.g., <code>gfortran
--version</code> or <code>ifort --version</code>).</p> </div> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>When using a conda environment it is possible that the environment creation will not work due to an outdated Fortran compiler. If that happens, remove the <code>compilers</code> entry from <code>environment.yml</code> and try again. The Fortran compiler should be installed as described in this section.</p> </div> </div> </div> </section> <section id="building-numpy-from-source"> <h2>Building NumPy from source</h2> <p>If you want to only install NumPy from source once and not do any development work, then the recommended way to build and install is to use <code>pip</code>. Otherwise, conda is recommended.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>If you don’t have a conda installation yet, we recommend using <a class="reference external" href="https://github.com/conda-forge/miniforge#mambaforge">Mambaforge</a>; any conda flavor will work though.</p> </div> <section id="building-from-source-to-use-numpy"> <h3>Building from source to use NumPy</h3> <div class="sd-tab-set docutils"> <input checked id="sd-tab-item-10" name="sd-tab-set-3" type="radio"> <label class="sd-tab-label" data-sync-group="tab" data-sync-id="conda" for="sd-tab-item-10"> Conda env</label><div class="sd-tab-content docutils"> <p>If you are using a conda environment, <code>pip</code> is still the tool you use to invoke a from-source build of NumPy. It is important to always use the <code>--no-build-isolation</code> flag to the <code>pip install</code> command, to avoid building against a <code>numpy</code> wheel from PyPI. In order for that to work you must first install the remaining build dependencies into the conda environment:</p> <pre data-language="python"># Either install all NumPy dev dependencies into a fresh conda environment
mamba env create -f environment.yml

# Or, install only the required build dependencies
mamba install python numpy cython compilers openblas meson-python pkg-config

# To build the latest stable release:
pip install numpy --no-build-isolation --no-binary numpy

# To build a development version, you need a local clone of the NumPy git repository:
git clone https://github.com/numpy/numpy.git
cd numpy
git submodule update --init
pip install . --no-build-isolation
</pre> </div> <input id="sd-tab-item-11" name="sd-tab-set-3" type="radio"> <label class="sd-tab-label" data-sync-group="tab" data-sync-id="pip" for="sd-tab-item-11"> Virtual env or system Python</label><div class="sd-tab-content docutils"> <pre data-language="python"># To build the latest stable release:
pip install numpy --no-binary numpy

# To build a development version, you need a local clone of the NumPy git repository:
git clone https://github.com/numpy/numpy.git
cd numpy
git submodule update --init
pip install .
</pre> </div> </div> </section> <section id="building-from-source-for-numpy-development"> <h3 id="the-spin-interface">Building from source for NumPy development</h3> <p>If you want to build from source in order to work on NumPy itself, first clone the NumPy repository:</p> <pre data-language="python">git clone https://github.com/numpy/numpy.git
cd numpy
git submodule update --init
</pre> <p>Then you want to do the following:</p> <ol class="arabic simple"> <li>Create a dedicated development environment (virtual environment or conda environment),</li> <li>Install all needed dependencies (<em>build</em>, and also <em>test</em>, <em>doc</em> and <em>optional</em> dependencies),</li> <li>Build NumPy with the <code>spin</code> developer interface.</li> </ol> <p>Step (3) is always the same, steps (1) and (2) are different between conda and virtual environments:</p> <div class="sd-tab-set docutils"> <input checked id="sd-tab-item-12" name="sd-tab-set-4" type="radio"> <label class="sd-tab-label" data-sync-group="tab" data-sync-id="conda" for="sd-tab-item-12"> Conda env</label><div class="sd-tab-content docutils"> <p>To create a <code>numpy-dev</code> development environment with every required and optional dependency installed, run:</p> <pre data-language="python">mamba env create -f environment.yml
mamba activate numpy-dev
</pre> </div> <input id="sd-tab-item-13" name="sd-tab-set-4" type="radio"> <label class="sd-tab-label" data-sync-group="tab" data-sync-id="pip" for="sd-tab-item-13"> Virtual env or system Python</label><div class="sd-tab-content docutils"> <div class="admonition note"> <p class="admonition-title">Note</p> <p>There are many tools to manage virtual environments, like <code>venv</code>, <code>virtualenv</code>/<code>virtualenvwrapper</code>, <code>pyenv</code>/<code>pyenv-virtualenv</code>, Poetry, PDM, Hatch, and more. Here we use the basic <code>venv</code> tool that is part of the Python stdlib. You can use any other tool; all we need is an activated Python environment.</p> </div> <p>Create and activate a virtual environment in a new directory named <code>venv</code> ( note that the exact activation command may be different based on your OS and shell - see <a class="reference external" href="https://docs.python.org/3/library/venv.html#how-venvs-work">“How venvs work”</a> in the <code>venv</code> docs).</p> <div class="sd-tab-set docutils"> <input checked id="sd-tab-item-14" name="sd-tab-set-5" type="radio"> <label class="sd-tab-label" data-sync-group="tab" data-sync-id="linux" for="sd-tab-item-14"> Linux</label><div class="sd-tab-content docutils"> <pre data-language="python">python -m venv venv
source venv/bin/activate
</pre> </div> <input id="sd-tab-item-15" name="sd-tab-set-5" type="radio"> <label class="sd-tab-label" data-sync-group="tab" data-sync-id="macos" for="sd-tab-item-15"> macOS</label><div class="sd-tab-content docutils"> <pre data-language="python">python -m venv venv
source venv/bin/activate
</pre> </div> <input id="sd-tab-item-16" name="sd-tab-set-5" type="radio"> <label class="sd-tab-label" data-sync-group="tab" data-sync-id="windows" for="sd-tab-item-16"> Windows</label><div class="sd-tab-content docutils"> <pre data-language="python">python -m venv venv
.\venv\Scripts\activate
</pre> </div> </div> <p>Then install the Python-level dependencies from PyPI with:</p> <pre data-language="python">python -m pip install -r requirements/all_requirements.txt
</pre> </div> </div> <p>To build NumPy in an activated development environment, run:</p> <pre data-language="python">spin build
</pre> <p>This will install NumPy inside the repository (by default in a <code>build-install</code> directory). You can then run tests (<code>spin test</code>), drop into IPython (<code>spin ipython</code>), or take other development steps like build the html documentation or running benchmarks. The <code>spin</code> interface is self-documenting, so please see <code>spin --help</code> and <code>spin &lt;subcommand&gt; --help</code> for detailed guidance.</p> <div class="admonition-ide-support-editable-installs admonition" id="meson-editable-installs"> <p class="admonition-title">IDE support &amp; editable installs</p> <p>While the <code>spin</code> interface is our recommended way of working on NumPy, it has one limitation: because of the custom install location, NumPy installed using <code>spin</code> will not be recognized automatically within an IDE (e.g., for running a script via a “run” button, or setting breakpoints visually). This will work better with an <em>in-place build</em> (or “editable install”).</p> <p>Editable installs are supported. It is important to understand that <strong>you may use either an editable install or ``spin`` in a given repository clone, but not both</strong>. If you use editable installs, you have to use <code>pytest</code> and other development tools directly instead of using <code>spin</code>.</p> <p>To use an editable install, ensure you start from a clean repository (run <code>git clean -xdf</code> if you’ve built with <code>spin</code> before) and have all dependencies set up correctly as described higher up on this page. Then do:</p> <pre data-language="python"># Note: the --no-build-isolation is important!
pip install -e . --no-build-isolation

# To run the tests for, e.g., the `numpy.linalg` module:
pytest numpy/linalg
</pre> <p>When making changes to NumPy code, including to compiled code, there is no need to manually rebuild or reinstall. NumPy is automatically rebuilt each time NumPy is imported by the Python interpreter; see the <a class="reference external" href="https://mesonbuild.com/meson-python/">meson-python</a> documentation on editable installs for more details on how that works under the hood.</p> <p>When you run <code>git clean -xdf</code>, which removes the built extension modules, remember to also uninstall NumPy with <code>pip uninstall numpy</code>.</p> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>Note that editable installs are fundamentally incomplete installs. Their only guarantee is that <code>import numpy</code> works - so they are suitable for working on NumPy itself, and for working on pure Python packages that depend on NumPy. Headers, entrypoints, and other such things may not be available from an editable install.</p> </div> </div> </section> </section> <section id="customizing-builds"> <h2>Customizing builds</h2>  <ul> <li class="toctree-l1"><a class="reference internal" href="compilers_and_options.html">Compiler selection and customizing a build</a></li> <li class="toctree-l1"><a class="reference internal" href="blas_lapack.html">BLAS and LAPACK</a></li> <li class="toctree-l1"><a class="reference internal" href="cross_compilation.html">Cross compilation</a></li> <li class="toctree-l1"><a class="reference internal" href="redistributable_binaries.html">Building redistributable binaries</a></li> </ul>  </section> <section id="background-information"> <h2>Background information</h2>  <ul> <li class="toctree-l1"><a class="reference internal" href="understanding_meson.html">Understanding Meson</a></li> <li class="toctree-l1"><a class="reference internal" href="introspecting_a_build.html">Introspecting build steps</a></li> <li class="toctree-l1"><a class="reference internal" href="distutils_equivalents.html">Meson and <code>distutils</code> ways of doing things</a></li> </ul>  </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2024 NumPy Developers<br>Licensed under the 3-clause BSD License.<br>
    <a href="https://numpy.org/doc/2.0/building/index.html" class="_attribution-link">https://numpy.org/doc/2.0/building/index.html</a>
  </p>
</div>
