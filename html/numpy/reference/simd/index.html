<section id="cpu-simd-optimizations"> <h1 id="numpysimd">CPU/SIMD optimizations</h1> <p>NumPy comes with a flexible working mechanism that allows it to harness the SIMD features that CPUs own, in order to provide faster and more stable performance on all popular platforms. Currently, NumPy supports the X86, IBM/Power, ARM7 and ARM8 architectures.</p> <p>The optimization process in NumPy is carried out in three layers:</p> <ul class="simple"> <li>Code is <em>written</em> using the universal intrinsics which is a set of types, macros and functions that are mapped to each supported instruction-sets by using guards that will enable use of the them only when the compiler recognizes them. This allow us to generate multiple kernels for the same functionality, in which each generated kernel represents a set of instructions that related one or multiple certain CPU features. The first kernel represents the minimum (baseline) CPU features, and the other kernels represent the additional (dispatched) CPU features.</li> <li>At <em>compile</em> time, CPU build options are used to define the minimum and additional features to support, based on user choice and compiler support. The appropriate intrinsics are overlaid with the platform / architecture intrinsics, and multiple kernels are compiled.</li> <li>At <em>runtime import</em>, the CPU is probed for the set of supported CPU features. A mechanism is used to grab the pointer to the most appropriate kernel, and this will be the one called for the function.</li> </ul> <div class="admonition note"> <p class="admonition-title">Note</p> <p>NumPy community had a deep discussion before implementing this work, please check <a class="reference external" href="https://numpy.org/neps/nep-0038-SIMD-optimizations.html">NEP-38</a> for more clarification.</p> </div>  <ul> <li class="toctree-l1">
<a class="reference internal" href="build-options.html">CPU build options</a><ul> <li class="toctree-l2"><a class="reference internal" href="build-options.html#description">Description</a></li> <li class="toctree-l2">
<a class="reference internal" href="build-options.html#quick-start">Quick start</a><ul> <li class="toctree-l3"><a class="reference internal" href="build-options.html#i-am-building-numpy-for-my-local-use">I am building NumPy for my local use</a></li> <li class="toctree-l3"><a class="reference internal" href="build-options.html#i-do-not-want-to-support-the-old-processors-of-the-x86-architecture">I do not want to support the old processors of the x86 architecture</a></li> <li class="toctree-l3"><a class="reference internal" href="build-options.html#i-m-facing-the-same-case-above-but-with-ppc64-architecture">Iâ€™m facing the same case above but with ppc64 architecture</a></li> <li class="toctree-l3"><a class="reference internal" href="build-options.html#having-issues-with-avx512-features">Having issues with AVX512 features?</a></li> </ul> </li> <li class="toctree-l2">
<a class="reference internal" href="build-options.html#supported-features">Supported features</a><ul> <li class="toctree-l3"><a class="reference internal" href="build-options.html#on-x86">On x86</a></li> <li class="toctree-l3"><a class="reference internal" href="build-options.html#on-ibm-power-big-endian">On IBM/POWER big-endian</a></li> <li class="toctree-l3"><a class="reference internal" href="build-options.html#on-ibm-power-little-endian">On IBM/POWER little-endian</a></li> <li class="toctree-l3"><a class="reference internal" href="build-options.html#on-armv7-a32">On ARMv7/A32</a></li> <li class="toctree-l3"><a class="reference internal" href="build-options.html#on-armv8-a64">On ARMv8/A64</a></li> <li class="toctree-l3"><a class="reference internal" href="build-options.html#on-ibm-zsystem-s390x">On IBM/ZSYSTEM(S390X)</a></li> </ul> </li> <li class="toctree-l2"><a class="reference internal" href="build-options.html#special-options">Special options</a></li> <li class="toctree-l2"><a class="reference internal" href="build-options.html#behaviors">Behaviors</a></li> <li class="toctree-l2">
<a class="reference internal" href="build-options.html#platform-differences">Platform differences</a><ul> <li class="toctree-l3"><a class="reference internal" href="build-options.html#on-x86-intel-compiler">On x86::Intel Compiler</a></li> <li class="toctree-l3"><a class="reference internal" href="build-options.html#on-x86-microsoft-visual-c-c">On x86::Microsoft Visual C/C++</a></li> </ul> </li> <li class="toctree-l2"><a class="reference internal" href="build-options.html#build-report">Build report</a></li> <li class="toctree-l2"><a class="reference internal" href="build-options.html#runtime-dispatch">Runtime dispatch</a></li> <li class="toctree-l2"><a class="reference internal" href="build-options.html#tracking-dispatched-functions">Tracking dispatched functions</a></li> </ul> </li> <li class="toctree-l1">
<a class="reference internal" href="how-it-works.html">How does the CPU dispatcher work?</a><ul> <li class="toctree-l2"><a class="reference internal" href="how-it-works.html#configuration">1- Configuration</a></li> <li class="toctree-l2"><a class="reference internal" href="how-it-works.html#discovering-the-environment">2- Discovering the environment</a></li> <li class="toctree-l2"><a class="reference internal" href="how-it-works.html#validating-the-requested-optimizations">3- Validating the requested optimizations</a></li> <li class="toctree-l2"><a class="reference internal" href="how-it-works.html#generating-the-main-configuration-header">4- Generating the main configuration header</a></li> <li class="toctree-l2"><a class="reference internal" href="how-it-works.html#dispatch-able-sources-and-configuration-statements">5- Dispatch-able sources and configuration statements</a></li> </ul> </li> </ul>  </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2024 NumPy Developers<br>Licensed under the 3-clause BSD License.<br>
    <a href="https://numpy.org/doc/2.0/reference/simd/index.html" class="_attribution-link">https://numpy.org/doc/2.0/reference/simd/index.html</a>
  </p>
</div>
