<h1>numpy.testing.assert_array_almost_equal</h1> <dl class="py function"> <dt class="sig sig-object py" id="numpy.testing.assert_array_almost_equal"> <span class="sig-prename descclassname">testing.</span><span class="sig-name descname">assert_array_almost_equal</span><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">y</span></em>, <em class="sig-param"><span class="n">decimal</span><span class="o">=</span><span class="default_value">6</span></em>, <em class="sig-param"><span class="n">err_msg</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/numpy/numpy/blob/v1.23.0/numpy/testing/_private/utils.py#L938-L1048"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Raises an AssertionError if two objects are not equal up to desired precision.</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>It is recommended to use one of <a class="reference internal" href="numpy.testing.assert_allclose.html#numpy.testing.assert_allclose" title="numpy.testing.assert_allclose"><code>assert_allclose</code></a>, <a class="reference internal" href="numpy.testing.assert_array_almost_equal_nulp.html#numpy.testing.assert_array_almost_equal_nulp" title="numpy.testing.assert_array_almost_equal_nulp"><code>assert_array_almost_equal_nulp</code></a> or <a class="reference internal" href="numpy.testing.assert_array_max_ulp.html#numpy.testing.assert_array_max_ulp" title="numpy.testing.assert_array_max_ulp"><code>assert_array_max_ulp</code></a> instead of this function for more consistent floating point comparisons.</p> </div> <p>The test verifies identical shapes and that the elements of <code>actual</code> and <code>desired</code> satisfy.</p>  <p><code>abs(desired-actual) &lt; 1.5 * 10**(-decimal)</code></p>  <p>That is a looser test than originally documented, but agrees with what the actual implementation did up to rounding vagaries. An exception is raised at shape mismatch or conflicting values. In contrast to the standard usage in numpy, NaNs are compared like numbers, no assertion is raised if both objects have NaNs in the same positions.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters</dt> <dd class="field-odd">
<dl class="simple"> <dt>
<strong>x</strong><span class="classifier">array_like</span>
</dt>
<dd>
<p>The actual object to check.</p> </dd> <dt>
<strong>y</strong><span class="classifier">array_like</span>
</dt>
<dd>
<p>The desired, expected object.</p> </dd> <dt>
<strong>decimal</strong><span class="classifier">int, optional</span>
</dt>
<dd>
<p>Desired precision, default is 6.</p> </dd> <dt>
<strong>err_msg</strong><span class="classifier">str, optional</span>
</dt>
<dd>
<p>The error message to be printed in case of failure.</p> </dd> <dt>
<strong>verbose</strong><span class="classifier">bool, optional</span>
</dt>
<dd>
<p>If True, the conflicting values are appended to the error message.</p> </dd> </dl> </dd> <dt class="field-even">Raises</dt> <dd class="field-even">
<dl class="simple"> <dt>AssertionError</dt>
<dd>
<p>If actual and desired are not equal up to specified precision.</p> </dd> </dl> </dd> </dl> <div class="admonition seealso"> <p class="admonition-title">See also</p> <dl class="simple"> <dt><a class="reference internal" href="numpy.testing.assert_allclose.html#numpy.testing.assert_allclose" title="numpy.testing.assert_allclose"><code>assert_allclose</code></a></dt>
<dd>
<p>Compare two array_like objects for equality with desired relative and/or absolute precision.</p> </dd> <dt>
<a class="reference internal" href="numpy.testing.assert_array_almost_equal_nulp.html#numpy.testing.assert_array_almost_equal_nulp" title="numpy.testing.assert_array_almost_equal_nulp"><code>assert_array_almost_equal_nulp</code></a>, <a class="reference internal" href="numpy.testing.assert_array_max_ulp.html#numpy.testing.assert_array_max_ulp" title="numpy.testing.assert_array_max_ulp"><code>assert_array_max_ulp</code></a>, <a class="reference internal" href="numpy.testing.assert_equal.html#numpy.testing.assert_equal" title="numpy.testing.assert_equal"><code>assert_equal</code></a>
</dt>
 </dl> </div> <h4 class="rubric">Examples</h4> <p>the first assert does not raise an exception</p> <pre data-language="python">&gt;&gt;&gt; np.testing.assert_array_almost_equal([1.0,2.333,np.nan],
...                                      [1.0,2.333,np.nan])
</pre> <pre data-language="python">&gt;&gt;&gt; np.testing.assert_array_almost_equal([1.0,2.33333,np.nan],
...                                      [1.0,2.33339,np.nan], decimal=5)
Traceback (most recent call last):
    ...
AssertionError:
Arrays are not almost equal to 5 decimals

Mismatched elements: 1 / 3 (33.3%)
Max absolute difference: 6.e-05
Max relative difference: 2.57136612e-05
 x: array([1.     , 2.33333,     nan])
 y: array([1.     , 2.33339,     nan])
</pre> <pre data-language="python">&gt;&gt;&gt; np.testing.assert_array_almost_equal([1.0,2.33333,np.nan],
...                                      [1.0,2.33333, 5], decimal=5)
Traceback (most recent call last):
    ...
AssertionError:
Arrays are not almost equal to 5 decimals

x and y nan location mismatch:
 x: array([1.     , 2.33333,     nan])
 y: array([1.     , 2.33333, 5.     ])
</pre> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2022 NumPy Developers<br>Licensed under the 3-clause BSD License.<br>
    <a href="https://numpy.org/doc/1.23/reference/generated/numpy.testing.assert_array_almost_equal.html" class="_attribution-link">https://numpy.org/doc/1.23/reference/generated/numpy.testing.assert_array_almost_equal.html</a>
  </p>
</div>
