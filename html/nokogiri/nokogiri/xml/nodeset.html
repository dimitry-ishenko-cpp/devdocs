<h1 id="class-Nokogiri::XML::NodeSet" class="class"> class Nokogiri::XML::NodeSet </h1>
<dl class="meta">
<dt>Parent:</dt>
<dd class="meta-parent"><a href="https://nokogiri.org/rdoc/Object.html">Object</a></dd>
<dt>Included modules:</dt>
<dd class="meta-includes"><a class="include" href="searchable.html">Nokogiri::XML::Searchable</a></dd>
</dl> <section class="description"> <p>A <a href="nodeset.html"><code>NodeSet</code></a> contains a list of <a href="node.html"><code>Nokogiri::XML::Node</code></a> objects. Typically a <a href="nodeset.html"><code>NodeSet</code></a> is return as a result of searching a <a href="document.html"><code>Document</code></a> via <a href="searchable.html#method-i-css"><code>Nokogiri::XML::Searchable#css</code></a> or <a href="searchable.html#method-i-xpath"><code>Nokogiri::XML::Searchable#xpath</code></a></p> </section> <section id="5Buntitled-5D" class="documentation-section"> <section class="constants-list"> <header> <h3>Constants</h3> </header> <dl> <dt id="LOOKS_LIKE_XPATH">LOOKS_LIKE_XPATH </dt> <dd> <div class="mixin-from"> Included from <a href="searchable.html">Nokogiri::XML::Searchable</a> </div> <p>Regular expression used by <a href="searchable.html#method-i-search"><code>Searchable#search</code></a> to determine if a query string is <a href="../css.html"><code>CSS</code></a> or <a href="xpath.html"><code>XPath</code></a></p> </dd> </dl> </section> <section class="attribute-method-details"> <header> <h3>Attributes</h3> </header> <div class="method-detail"> <div class="method-heading attribute-method-heading" id="attribute-i-document"> <span class="method-name">document</span><span class="attribute-access-type">[RW]</span> </div> <div class="method-description"> <p>The <a href="document.html"><code>Document</code></a> this <a href="nodeset.html"><code>NodeSet</code></a> is associated with</p> </div> </div> </section> <section id="public-class-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Public Class Methods</h3> </header> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-new"> <span class="method-name">new</span><span class="method-args">(document, list = []) { |self| ... }</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="new-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 20
def initialize(document, list = [])
  @document = document
  document.decorate(self)
  list.each { |x| self &lt;&lt; x }
  yield self if block_given?
end</pre> </div> <p>Create a <a href="nodeset.html"><code>NodeSet</code></a> with <code>document</code> defaulting to <code>list</code></p>  </div> </div> </section> <section id="public-instance-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Public Instance Methods</h3> </header> <div class="method-detail method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-25"> <span class="method-callseq"> search *paths, [namespace-bindings, xpath-variable-bindings, custom-handler-class] </span> </div> </div>  <div class="aliases"> Alias for: <a href="nodeset.html#method-i-at">at</a> </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-26"> <span class="method-callseq"> &amp;(node_set) </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="26-source"> <pre class="c" data-language="c">static VALUE
intersection(VALUE self, VALUE rb_other)
{
  xmlNodeSetPtr node_set, other ;
  xmlNodeSetPtr intersection;

  if (!rb_obj_is_kind_of(rb_other, cNokogiriXmlNodeSet)) {
    rb_raise(rb_eArgError, "node_set must be a Nokogiri::XML::NodeSet");
  }

  Data_Get_Struct(self, xmlNodeSet, node_set);
  Data_Get_Struct(rb_other, xmlNodeSet, other);

  intersection = xmlXPathIntersection(node_set, other);
  return noko_xml_node_set_wrap(intersection, rb_iv_get(self, "@document"));
}</pre> </div> <p>Set Intersection — Returns a new <a href="nodeset.html"><code>NodeSet</code></a> containing nodes common to the two NodeSets.</p>  </div> </div> <div class="method-detail method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-2B"> <span class="method-name">+</span><span class="method-args">(p1)</span> </div> </div>  <div class="aliases"> Alias for: <a href="nodeset.html#method-i-7C">|</a> </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-2D"> <span class="method-callseq"> -(node_set) </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="2D-source"> <pre class="c" data-language="c">static VALUE
minus(VALUE self, VALUE rb_other)
{
  xmlNodeSetPtr node_set, other;
  xmlNodeSetPtr new;
  int j ;

  if (!rb_obj_is_kind_of(rb_other, cNokogiriXmlNodeSet)) {
    rb_raise(rb_eArgError, "node_set must be a Nokogiri::XML::NodeSet");
  }

  Data_Get_Struct(self, xmlNodeSet, node_set);
  Data_Get_Struct(rb_other, xmlNodeSet, other);

  new = xmlXPathNodeSetMerge(NULL, node_set);
  for (j = 0 ; j &lt; other-&gt;nodeNr ; ++j) {
    xpath_node_set_del(new, other-&gt;nodeTab[j]);
  }

  return noko_xml_node_set_wrap(new, rb_iv_get(self, "@document"));
}</pre> </div> <p>Difference - returns a new <a href="nodeset.html"><code>NodeSet</code></a> that is a copy of this <a href="nodeset.html"><code>NodeSet</code></a>, removing each item that also appears in <code>node_set</code></p>  </div> </div> <div class="method-detail method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-3C-3C"> <span class="method-name">&lt;&lt;</span><span class="method-args">(p1)</span> </div> </div>  <div class="aliases"> Alias for: <a href="nodeset.html#method-i-push">push</a> </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-3D-3D"> <span class="method-name">==</span><span class="method-args">(other)</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="3D-3D-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 393
def ==(other)
  return false unless other.is_a?(Nokogiri::XML::NodeSet)
  return false unless length == other.length

  each_with_index do |node, i|
    return false unless node == other[i]
  end
  true
end</pre> </div> <p>Equality – Two NodeSets are equal if the contain the same number of elements and if each element is equal to the corresponding element in the other <a href="nodeset.html"><code>NodeSet</code></a></p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-5B-5D"> <span class="method-callseq"> [index] → Node or nil </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> [start, length] → NodeSet or nil </span> </div> <div class="method-heading"> <span class="method-callseq"> [range] → NodeSet or nil </span> </div> </div> <div class="method-description">
<div class="method-source-code" id="5B-5D-source"> <pre class="c" data-language="c">static VALUE
slice(int argc, VALUE *argv, VALUE self)
{
  VALUE arg ;
  long beg, len ;
  xmlNodeSetPtr node_set;

  Data_Get_Struct(self, xmlNodeSet, node_set);

  if (argc == 2) {
    beg = NUM2LONG(argv[0]);
    len = NUM2LONG(argv[1]);
    if (beg &lt; 0) {
      beg += node_set-&gt;nodeNr ;
    }
    return subseq(self, beg, len);
  }

  if (argc != 1) {
    rb_scan_args(argc, argv, "11", NULL, NULL);
  }
  arg = argv[0];

  if (FIXNUM_P(arg)) {
    return index_at(self, FIX2LONG(arg));
  }

  /* if arg is Range */
  switch (rb_range_beg_len(arg, &amp;beg, &amp;len, (long)node_set-&gt;nodeNr, 0)) {
    case Qfalse:
      break;
    case Qnil:
      return Qnil;
    default:
      return subseq(self, beg, len);
  }

  return index_at(self, NUM2LONG(arg));
}</pre> </div> <p><a href="element.html"><code>Element</code></a> reference - returns the node at <code>index</code>, or returns a <a href="nodeset.html"><code>NodeSet</code></a> containing nodes starting at <code>start</code> and continuing for <code>length</code> elements, or returns a <a href="nodeset.html"><code>NodeSet</code></a> containing nodes specified by <code>range</code>. Negative <code>indices</code> count backward from the end of the <code>node_set</code> (-1 is the last node). Returns nil if the <code>index</code> (or <code>start</code>) are out of range.</p>  </div> <div class="aliases"> Also aliased as: <a href="nodeset.html#method-i-slice">slice</a> </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-add_class"> <span class="method-name">add_class</span><span class="method-args">(name)</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="add_class-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 139
def add_class(name)
  each do |el|
    el.add_class(name)
  end
  self
end</pre> </div> <p>Add the class attribute <code>name</code> to all <a href="node.html"><code>Node</code></a> objects in the <a href="nodeset.html"><code>NodeSet</code></a>.</p> <p>See <a href="node.html#method-i-add_class"><code>Nokogiri::XML::Node#add_class</code></a> for more information.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-after"> <span class="method-name">after</span><span class="method-args">(datum)</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="after-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 69
def after(datum)
  last.after(datum)
end</pre> </div> <p>Insert <code>datum</code> after the last <a href="node.html"><code>Node</code></a> in this <a href="nodeset.html"><code>NodeSet</code></a></p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-append_class"> <span class="method-name">append_class</span><span class="method-args">(name)</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="append_class-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 151
def append_class(name)
  each do |el|
    el.append_class(name)
  end
  self
end</pre> </div> <p>Append the class attribute <code>name</code> to all <a href="node.html"><code>Node</code></a> objects in the <a href="nodeset.html"><code>NodeSet</code></a>.</p> <p>See <a href="node.html#method-i-append_class"><code>Nokogiri::XML::Node#append_class</code></a> for more information.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-at"> <span class="method-callseq"> search *paths, [namespace-bindings, xpath-variable-bindings, custom-handler-class] </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="at-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 119
def at(*args)
  if args.length == 1 &amp;&amp; args.first.is_a?(Numeric)
    return self[args.first]
  end

  super(*args)
end</pre> </div> <p>Search this object for <code>paths</code>, and return only the first result. <code>paths</code> must be one or more <a href="xpath.html"><code>XPath</code></a> or <a href="../css.html"><code>CSS</code></a> queries.</p> <p>See <a href="searchable.html#method-i-search"><code>Searchable#search</code></a> for more information.</p> <p>Or, if passed an integer, index into the NodeSet:</p> <pre class="ruby" data-language="ruby">node_set.at(3) # same as node_set[3]
</pre> <div class="method-calls-super"> Calls superclass method <a href="searchable.html#method-i-at"><code>Nokogiri::XML::Searchable#at</code></a> </div>  </div> <div class="aliases"> Also aliased as: <a href="nodeset.html#method-i-25">%</a> </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-attr"> <span class="method-name">attr</span><span class="method-args">(key, value = nil) { |node| ... }</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="attr-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 203
def attr(key, value = nil, &amp;block)
  unless key.is_a?(Hash) || (key &amp;&amp; (value || block))
    return first&amp;.attribute(key)
  end

  hash = key.is_a?(Hash) ? key : { key =&gt; value }

  hash.each do |k, v|
    each do |node|
      node[k] = v || yield(node)
    end
  end

  self
end</pre> </div> <p>Set attributes on each <a href="node.html"><code>Node</code></a> in the <a href="nodeset.html"><code>NodeSet</code></a>, or get an attribute from the first <a href="node.html"><code>Node</code></a> in the <a href="nodeset.html"><code>NodeSet</code></a>.</p> <p>To get an attribute from the first <a href="node.html"><code>Node</code></a> in a NodeSet:</p> <pre class="ruby" data-language="ruby">node_set.attr("href") # =&gt; "https://www.nokogiri.org"
</pre> <p>Note that an empty <a href="nodeset.html"><code>NodeSet</code></a> will return nil when <code>#attr</code> is called as a getter.</p> <p>To set an attribute on each node, <code>key</code> can either be an attribute name, or a Hash of attribute names and values. When called as a setter, <code>#attr</code> returns the <a href="nodeset.html"><code>NodeSet</code></a>.</p> <p>If <code>key</code> is an attribute name, then either <code>value</code> or <code>block</code> must be passed.</p> <p>If <code>key</code> is a Hash then attributes will be set for each key/value pair:</p> <pre class="ruby" data-language="ruby">node_set.attr("href" =&gt; "https://www.nokogiri.org", "class" =&gt; "member")
</pre> <p>If <code>value</code> is passed, it will be used as the attribute value for all nodes:</p> <pre class="ruby" data-language="ruby">node_set.attr("href", "https://www.nokogiri.org")
</pre> <p>If <code>block</code> is passed, it will be called on each <a href="node.html"><code>Node</code></a> object in the <a href="nodeset.html"><code>NodeSet</code></a> and the return value used as the attribute value for that node:</p> <pre class="ruby" data-language="ruby">node_set.attr("class") { |node| node.name }
</pre>  </div> <div class="aliases"> Also aliased as: <a href="nodeset.html#method-i-set">set</a>, <a href="nodeset.html#method-i-attribute">attribute</a> </div> </div> <div class="method-detail method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-attribute"> <span class="method-name">attribute</span><span class="method-args">(key, value = nil, &amp;block)</span> </div> </div>  <div class="aliases"> Alias for: <a href="nodeset.html#method-i-attr">attr</a> </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-before"> <span class="method-name">before</span><span class="method-args">(datum)</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="before-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 63
def before(datum)
  first.before(datum)
end</pre> </div> <p>Insert <code>datum</code> before the first <a href="node.html"><code>Node</code></a> in this <a href="nodeset.html"><code>NodeSet</code></a></p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-children"> <span class="method-name">children</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="children-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 406
def children
  node_set = NodeSet.new(document)
  each do |node|
    node.children.each { |n| node_set.push(n) }
  end
  node_set
end</pre> </div> <p>Returns a new <a href="nodeset.html"><code>NodeSet</code></a> containing all the children of all the nodes in the <a href="nodeset.html"><code>NodeSet</code></a></p>  </div> </div> <div class="method-detail method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-clone"> <span class="method-callseq"> dup </span> </div> </div>  <div class="aliases"> Alias for: <a href="nodeset.html#method-i-dup">dup</a> </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-css"> <span class="method-callseq"> css *rules, [namespace-bindings, custom-pseudo-class] </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="css-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 83
def css(*args)
  rules, handler, ns, _ = extract_params(args)
  paths = css_rules_to_xpath(rules, ns)

  inject(NodeSet.new(document)) do |set, node|
    set + xpath_internal(node, paths, handler, ns, nil)
  end
end</pre> </div> <p>Search this node set for <a href="../css.html"><code>CSS</code></a> <code>rules</code>. <code>rules</code> must be one or more <a href="../css.html"><code>CSS</code></a> selectors. For example:</p> <p>For more information see <a href="searchable.html#method-i-css"><code>Nokogiri::XML::Searchable#css</code></a></p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-deconstruct"> <span class="method-callseq"> deconstruct() → Array </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="deconstruct-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 440
def deconstruct
  to_a
end</pre> </div> <p>Returns the members of this <a href="nodeset.html"><code>NodeSet</code></a> as an array, to use in pattern matching.</p> <p>⚡ This is an experimental feature, available since v1.14.0</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-delete"> <span class="method-callseq"> delete(node) </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="delete-source"> <pre class="c" data-language="c">static VALUE
delete (VALUE self, VALUE rb_node)
{
  xmlNodeSetPtr node_set;
  xmlNodePtr node;

  Check_Node_Set_Node_Type(rb_node);

  Data_Get_Struct(self, xmlNodeSet, node_set);
  Noko_Node_Get_Struct(rb_node, xmlNode, node);

  if (xmlXPathNodeSetContains(node_set, node)) {
    xpath_node_set_del(node_set, node);
    return rb_node;
  }
  return Qnil ;
}</pre> </div> <p>Delete <code>node</code> from the Nodeset, if it is a member. Returns the deleted node if found, otherwise returns nil.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-dup"> <span class="method-callseq"> dup </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="dup-source"> <pre class="c" data-language="c">static VALUE
duplicate(VALUE self)
{
  xmlNodeSetPtr node_set;
  xmlNodeSetPtr dupl;

  Data_Get_Struct(self, xmlNodeSet, node_set);

  dupl = xmlXPathNodeSetMerge(NULL, node_set);

  return noko_xml_node_set_wrap(dupl, rb_iv_get(self, "@document"));
}</pre> </div> <p>Duplicate this <a href="nodeset.html"><code>NodeSet</code></a>. Note that the Nodes contained in the <a href="nodeset.html"><code>NodeSet</code></a> are not duplicated (similar to how Array and other Enumerable classes work).</p>  </div> <div class="aliases"> Also aliased as: <a href="nodeset.html#method-i-clone">clone</a> </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-each"> <span class="method-name">each</span><span class="method-args">() { |self| ... }</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="each-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 231
def each
  return to_enum unless block_given?

  0.upto(length - 1) do |x|
    yield self[x]
  end
  self
end</pre> </div> <p>Iterate over each node, yielding to <code>block</code></p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-empty-3F"> <span class="method-name">empty?</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="empty-3F-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 45
def empty?
  length == 0
end</pre> </div> <p>Is this <a href="nodeset.html"><code>NodeSet</code></a> empty?</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-filter"> <span class="method-name">filter</span><span class="method-args">(expr)</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="filter-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 130
def filter(expr)
  find_all { |node| node.matches?(expr) }
end</pre> </div> <p>Filter this list for nodes that match <code>expr</code></p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-first"> <span class="method-name">first</span><span class="method-args">(n = nil)</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="first-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 29
def first(n = nil)
  return self[0] unless n

  list = []
  [n, length].min.times { |i| list &lt;&lt; self[i] }
  list
end</pre> </div> <p>Get the first element of the <a href="nodeset.html"><code>NodeSet</code></a>.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-include-3F"> <span class="method-callseq"> include?(node) </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="include-3F-source"> <pre class="c" data-language="c">static VALUE
include_eh(VALUE self, VALUE rb_node)
{
  xmlNodeSetPtr node_set;
  xmlNodePtr node;

  Check_Node_Set_Node_Type(rb_node);

  Data_Get_Struct(self, xmlNodeSet, node_set);
  Noko_Node_Get_Struct(rb_node, xmlNode, node);

  return (xmlXPathNodeSetContains(node_set, node) ? Qtrue : Qfalse);
}</pre> </div> <p>Returns true if any member of node set equals <code>node</code>.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-index"> <span class="method-name">index</span><span class="method-args">(node = nil) { |member| ... }</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="index-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 51
def index(node = nil)
  if node
    warn("given block not used") if block_given?
    each_with_index { |member, j| return j if member == node }
  elsif block_given?
    each_with_index { |member, j| return j if yield(member) }
  end
  nil
end</pre> </div> <p>Returns the index of the first node in self that is == to <code>node</code> or meets the given block. Returns nil if no match is found.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-inner_html"> <span class="method-name">inner_html</span><span class="method-args">(*args)</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="inner_html-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 260
def inner_html(*args)
  collect { |j| j.inner_html(*args) }.join("")
end</pre> </div> <p>Get the inner html of all contained <a href="node.html"><code>Node</code></a> objects</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-inner_text"> <span class="method-name">inner_text</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="inner_text-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 253
def inner_text
  collect(&amp;:inner_text).join("")
end</pre> </div> <p>Get the inner text of all contained <a href="node.html"><code>Node</code></a> objects</p> <p>Note: This joins the text of all <a href="node.html"><code>Node</code></a> objects in the NodeSet:</p> <pre class="ruby" data-language="ruby">doc = Nokogiri::XML('&lt;xml&gt;&lt;a&gt;&lt;d&gt;foo&lt;/d&gt;&lt;d&gt;bar&lt;/d&gt;&lt;/a&gt;&lt;/xml&gt;')
doc.css('d').text # =&gt; "foobar"
</pre> <p>Instead, if you want to return the text of all nodes in the NodeSet:</p> <pre class="ruby" data-language="ruby">doc.css('d').map(&amp;:text) # =&gt; ["foo", "bar"]
</pre> <p>See <a href="node.html#method-i-content"><code>Nokogiri::XML::Node#content</code></a> for more information.</p>  </div> <div class="aliases"> Also aliased as: <a href="nodeset.html#method-i-text">text</a> </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-inspect"> <span class="method-name">inspect</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="inspect-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 427
def inspect
  "[#{map(&amp;:inspect).join(", ")}]"
end</pre> </div> <p>Return a nicely formated string representation</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-last"> <span class="method-name">last</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="last-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 39
def last
  self[-1]
end</pre> </div> <p>Get the last element of the <a href="nodeset.html"><code>NodeSet</code></a>.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-length"> <span class="method-callseq"> length </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="length-source"> <pre class="c" data-language="c">static VALUE
length(VALUE self)
{
  xmlNodeSetPtr node_set;

  Data_Get_Struct(self, xmlNodeSet, node_set);

  return node_set ? INT2NUM(node_set-&gt;nodeNr) : INT2NUM(0);
}</pre> </div> <p>Get the length of the node set</p>  </div> <div class="aliases"> Also aliased as: <a href="nodeset.html#method-i-size">size</a> </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-pop"> <span class="method-name">pop</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="pop-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 374
def pop
  return nil if length == 0

  delete(last)
end</pre> </div> <p>Removes the last element from set and returns it, or <code>nil</code> if the set is empty</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-push"> <span class="method-callseq"> push(node) </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="push-source"> <pre class="c" data-language="c">static VALUE
push(VALUE self, VALUE rb_node)
{
  xmlNodeSetPtr node_set;
  xmlNodePtr node;

  Check_Node_Set_Node_Type(rb_node);

  Data_Get_Struct(self, xmlNodeSet, node_set);
  Noko_Node_Get_Struct(rb_node, xmlNode, node);

  xmlXPathNodeSetAdd(node_set, node);

  return self;
}</pre> </div> <p>Append <code>node</code> to the <a href="nodeset.html"><code>NodeSet</code></a>.</p>  </div> <div class="aliases"> Also aliased as: <a href="nodeset.html#method-i-3C-3C">&lt;&lt;</a> </div> </div> <div class="method-detail method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-remove"> <span class="method-callseq"> unlink </span> </div> </div>  <div class="aliases"> Alias for: <a href="nodeset.html#method-i-unlink">unlink</a> </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-remove_attr"> <span class="method-name">remove_attr</span><span class="method-args">(name)</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="remove_attr-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 223
def remove_attr(name)
  each { |el| el.delete(name) }
  self
end</pre> </div> <p>Remove the attributed named <code>name</code> from all <a href="node.html"><code>Node</code></a> objects in the <a href="nodeset.html"><code>NodeSet</code></a></p>  </div> <div class="aliases"> Also aliased as: <a href="nodeset.html#method-i-remove_attribute">remove_attribute</a> </div> </div> <div class="method-detail method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-remove_attribute"> <span class="method-name">remove_attribute</span><span class="method-args">(name)</span> </div> </div>  <div class="aliases"> Alias for: <a href="nodeset.html#method-i-remove_attr">remove_attr</a> </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-remove_class"> <span class="method-name">remove_class</span><span class="method-args">(name = nil)</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="remove_class-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 163
def remove_class(name = nil)
  each do |el|
    el.remove_class(name)
  end
  self
end</pre> </div> <p>Remove the class attribute <code>name</code> from all <a href="node.html"><code>Node</code></a> objects in the <a href="nodeset.html"><code>NodeSet</code></a>.</p> <p>See <a href="node.html#method-i-remove_class"><code>Nokogiri::XML::Node#remove_class</code></a> for more information.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-reverse"> <span class="method-name">reverse</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="reverse-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 417
def reverse
  node_set = NodeSet.new(document)
  (length - 1).downto(0) do |x|
    node_set.push(self[x])
  end
  node_set
end</pre> </div> <p>Returns a new <a href="nodeset.html"><code>NodeSet</code></a> containing all the nodes in the <a href="nodeset.html"><code>NodeSet</code></a> in reverse order</p>  </div> </div> <div class="method-detail method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-set"> <span class="method-name">set</span><span class="method-args">(key, value = nil, &amp;block)</span> </div> </div>  <div class="aliases"> Alias for: <a href="nodeset.html#method-i-attr">attr</a> </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-shift"> <span class="method-name">shift</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="shift-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 383
def shift
  return nil if length == 0

  delete(first)
end</pre> </div> <p>Returns the first element of the <a href="nodeset.html"><code>NodeSet</code></a> and removes it. Returns <code>nil</code> if the set is empty.</p>  </div> </div> <div class="method-detail method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-size"> <span class="method-callseq"> length </span> </div> </div>  <div class="aliases"> Alias for: <a href="nodeset.html#method-i-length">length</a> </div> </div> <div class="method-detail method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-slice"> <span class="method-callseq"> slice(index) → Node or nil </span> </div> <div class="method-heading"> <span class="method-callseq"> slice(start, length) → NodeSet or nil </span> </div> <div class="method-heading"> <span class="method-callseq"> slice(range) → NodeSet or nil </span> </div> </div> <div class="method-description"> <p><a href="element.html"><code>Element</code></a> reference - returns the node at <code>index</code>, or returns a <a href="nodeset.html"><code>NodeSet</code></a> containing nodes starting at <code>start</code> and continuing for <code>length</code> elements, or returns a <a href="nodeset.html"><code>NodeSet</code></a> containing nodes specified by <code>range</code>. Negative <code>indices</code> count backward from the end of the <code>node_set</code> (-1 is the last node). Returns nil if the <code>index</code> (or <code>start</code>) are out of range.</p> </div> <div class="aliases"> Alias for: <a href="nodeset.html#method-i-5B-5D">[]</a> </div> </div> <div class="method-detail method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-text"> <span class="method-name">text</span><span class="method-args">()</span> </div> </div>  <div class="aliases"> Alias for: <a href="nodeset.html#method-i-inner_text">inner_text</a> </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-to_a"> <span class="method-callseq"> to_a </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="to_a-source"> <pre class="c" data-language="c">static VALUE
to_array(VALUE self)
{
  xmlNodeSetPtr node_set ;
  VALUE list;
  int i;

  Data_Get_Struct(self, xmlNodeSet, node_set);

  list = rb_ary_new2(node_set-&gt;nodeNr);
  for (i = 0; i &lt; node_set-&gt;nodeNr; i++) {
    VALUE elt = noko_xml_node_wrap_node_set_result(node_set-&gt;nodeTab[i], self);
    rb_ary_push(list, elt);
  }

  return list;
}</pre> </div> <p>Return this list as an Array</p>  </div> <div class="aliases"> Also aliased as: <a href="nodeset.html#method-i-to_ary">to_ary</a> </div> </div> <div class="method-detail method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-to_ary"> <span class="method-callseq"> to_a </span> </div> </div>  <div class="aliases"> Alias for: <a href="nodeset.html#method-i-to_a">to_a</a> </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-to_html"> <span class="method-name">to_html</span><span class="method-args">(*args)</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="to_html-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 341
def to_html(*args)
  if Nokogiri.jruby?
    options = args.first.is_a?(Hash) ? args.shift : {}
    options[:save_with] ||= Node::SaveOptions::DEFAULT_HTML
    args.insert(0, options)
  end
  if empty?
    encoding = (args.first.is_a?(Hash) ? args.first[:encoding] : nil)
    encoding ||= document.encoding
    encoding.nil? ? "" : "".encode(encoding)
  else
    map { |x| x.to_html(*args) }.join
  end
end</pre> </div> <p>Convert this <a href="nodeset.html"><code>NodeSet</code></a> to <a href="../html4.html"><code>HTML</code></a></p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-to_s"> <span class="method-name">to_s</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="to_s-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 335
def to_s
  map(&amp;:to_s).join
end</pre> </div> <p>Convert this <a href="nodeset.html"><code>NodeSet</code></a> to a string.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-to_xhtml"> <span class="method-name">to_xhtml</span><span class="method-args">(*args)</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="to_xhtml-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 358
def to_xhtml(*args)
  map { |x| x.to_xhtml(*args) }.join
end</pre> </div> <p>Convert this <a href="nodeset.html"><code>NodeSet</code></a> to XHTML</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-to_xml"> <span class="method-name">to_xml</span><span class="method-args">(*args)</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="to_xml-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 364
def to_xml(*args)
  map { |x| x.to_xml(*args) }.join
end</pre> </div> <p>Convert this <a href="nodeset.html"><code>NodeSet</code></a> to <a href="../xml.html"><code>XML</code></a></p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-unlink"> <span class="method-callseq"> unlink </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="unlink-source"> <pre class="c" data-language="c">static VALUE
unlink_nodeset(VALUE self)
{
  xmlNodeSetPtr node_set;
  int j, nodeNr ;

  Data_Get_Struct(self, xmlNodeSet, node_set);

  nodeNr = node_set-&gt;nodeNr ;
  for (j = 0 ; j &lt; nodeNr ; j++) {
    if (! NOKOGIRI_NAMESPACE_EH(node_set-&gt;nodeTab[j])) {
      VALUE node ;
      xmlNodePtr node_ptr;
      node = noko_xml_node_wrap(Qnil, node_set-&gt;nodeTab[j]);
      rb_funcall(node, rb_intern("unlink"), 0); /* modifies the C struct out from under the object */
      Noko_Node_Get_Struct(node, xmlNode, node_ptr);
      node_set-&gt;nodeTab[j] = node_ptr ;
    }
  }
  return self ;
}</pre> </div> <p>Unlink this <a href="nodeset.html"><code>NodeSet</code></a> and all <a href="node.html"><code>Node</code></a> objects it contains from their current context.</p>  </div> <div class="aliases"> Also aliased as: <a href="nodeset.html#method-i-remove">remove</a> </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-wrap"> <span class="method-callseq"> wrap(markup) → self </span> <a class="method-click-advice">Show source</a> </div> <div class="method-heading"> <span class="method-callseq"> wrap(node) → self </span> </div> </div> <div class="method-description">
<div class="method-source-code" id="wrap-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 328
def wrap(node_or_tags)
  map { |node| node.wrap(node_or_tags) }
  self
end</pre> </div> <p>Wrap each member of this <a href="nodeset.html"><code>NodeSet</code></a> with the node parsed from <code>markup</code> or a dup of the <code>node</code>.</p> <dl class="rdoc-list label-list"> <dt>Parameters </dt>  </dl> <ul> <li> <p><strong>markup</strong> (String) Markup that is parsed, once per member of the <a href="nodeset.html"><code>NodeSet</code></a>, and used as the wrapper. Each node’s parent, if it exists, is used as the context node for parsing; otherwise the associated document is used. If the parsed fragment has multiple roots, the first root node is used as the wrapper.</p> </li> <li> <p><strong>node</strong> (<a href="node.html"><code>Nokogiri::XML::Node</code></a>) An element that is ‘#dup`ed and used as the wrapper.</p> </li> </ul> <dl class="rdoc-list label-list"> <dt>Returns </dt> <dd> <p><code>self</code>, to support chaining.</p> </dd> </dl> <p>⚠ Note that if a <code>String</code> is passed, the markup will be parsed <strong>once per node</strong> in the <a href="nodeset.html"><code>NodeSet</code></a>. You can avoid this overhead in cases where you know exactly the wrapper you wish to use by passing a <code>Node</code> instead.</p> <p>Also see <a href="node.html#method-i-wrap"><code>Node#wrap</code></a></p> <p><strong>Example</strong> with a <code>String</code> argument:</p> <pre class="ruby" data-language="ruby">doc = Nokogiri::HTML5(&lt;&lt;~HTML)
  &lt;html&gt;&lt;body&gt;
    &lt;a&gt;a&lt;/a&gt;
    &lt;a&gt;b&lt;/a&gt;
    &lt;a&gt;c&lt;/a&gt;
    &lt;a&gt;d&lt;/a&gt;
  &lt;/body&gt;&lt;/html&gt;
HTML
doc.css("a").wrap("&lt;div&gt;&lt;/div&gt;")
doc.to_html
# =&gt; &lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;
#      &lt;div&gt;&lt;a&gt;a&lt;/a&gt;&lt;/div&gt;
#      &lt;div&gt;&lt;a&gt;b&lt;/a&gt;&lt;/div&gt;
#      &lt;div&gt;&lt;a&gt;c&lt;/a&gt;&lt;/div&gt;
#      &lt;div&gt;&lt;a&gt;d&lt;/a&gt;&lt;/div&gt;
#    &lt;/body&gt;&lt;/html&gt;
</pre> <p><strong>Example</strong> with a <code>Node</code> argument</p> <p>💡 Note that this is faster than the equivalent call passing a <code>String</code> because it avoids having to reparse the wrapper markup for each node.</p> <pre class="ruby" data-language="ruby">doc = Nokogiri::HTML5(&lt;&lt;~HTML)
  &lt;html&gt;&lt;body&gt;
    &lt;a&gt;a&lt;/a&gt;
    &lt;a&gt;b&lt;/a&gt;
    &lt;a&gt;c&lt;/a&gt;
    &lt;a&gt;d&lt;/a&gt;
  &lt;/body&gt;&lt;/html&gt;
HTML
doc.css("a").wrap(doc.create_element("div"))
doc.to_html
# =&gt; &lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;
#      &lt;div&gt;&lt;a&gt;a&lt;/a&gt;&lt;/div&gt;
#      &lt;div&gt;&lt;a&gt;b&lt;/a&gt;&lt;/div&gt;
#      &lt;div&gt;&lt;a&gt;c&lt;/a&gt;&lt;/div&gt;
#      &lt;div&gt;&lt;a&gt;d&lt;/a&gt;&lt;/div&gt;
#    &lt;/body&gt;&lt;/html&gt;
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-xpath"> <span class="method-callseq"> xpath *paths, [namespace-bindings, variable-bindings, custom-handler-class] </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="xpath-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/node_set.rb, line 99
def xpath(*args)
  paths, handler, ns, binds = extract_params(args)

  inject(NodeSet.new(document)) do |set, node|
    set + xpath_internal(node, paths, handler, ns, binds)
  end
end</pre> </div> <p>Search this node set for <a href="xpath.html"><code>XPath</code></a> <code>paths</code>. <code>paths</code> must be one or more <a href="xpath.html"><code>XPath</code></a> queries.</p> <p>For more information see <a href="searchable.html#method-i-xpath"><code>Nokogiri::XML::Searchable#xpath</code></a></p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-7C"> <span class="method-callseq"> |(node_set) </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="7C-source"> <pre class="c" data-language="c">static VALUE
rb_xml_node_set_union(VALUE rb_node_set, VALUE rb_other)
{
  xmlNodeSetPtr c_node_set, c_other;
  xmlNodeSetPtr c_new_node_set;

  if (!rb_obj_is_kind_of(rb_other, cNokogiriXmlNodeSet)) {
    rb_raise(rb_eArgError, "node_set must be a Nokogiri::XML::NodeSet");
  }

  Data_Get_Struct(rb_node_set, xmlNodeSet, c_node_set);
  Data_Get_Struct(rb_other, xmlNodeSet, c_other);

  c_new_node_set = xmlXPathNodeSetMerge(NULL, c_node_set);
  c_new_node_set = xmlXPathNodeSetMerge(c_new_node_set, c_other);

  return noko_xml_node_set_wrap(c_new_node_set, rb_iv_get(rb_node_set, "@document"));
}</pre> </div> <p>Returns a new set built by merging the set and the elements of the given set.</p>  </div> <div class="aliases"> Also aliased as: <a href="nodeset.html#method-i-2B">+</a> </div> </div> </section> </section> <section id="Searching+via+XPath+or+CSS+Queries" class="documentation-section"> <header class="documentation-section-title"> <h2 id="Searching+via+XPath+or+CSS+Queries"> Searching via XPath or CSS Queries </h2> <span class="section-click-top"> <a href="#top">↑ top</a> </span> </header> <section id="public-instance-Searching+via+XPath+or+CSS+Queries-method-details" class="method-section"> <header> <h3>Public Instance Methods</h3> </header> <div class="method-detail method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-2F"> <span class="method-name">/</span><span class="method-args">(*args)</span> </div> </div> <div class="method-description"> <div class="mixin-from"> Included from <a href="searchable.html">Nokogiri::XML::Searchable</a> </div> </div> <div class="aliases"> Alias for: <a href="searchable.html#method-i-search">search</a> </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-3E"> <span class="method-callseq"> &gt;(selector) → NodeSet </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="3E-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/searchable.rb, line 196
def &gt;(selector) # rubocop:disable Naming/BinaryOperatorParameterName
  ns = (document.root&amp;.namespaces || {})
  xpath(CSS.xpath_for(selector, prefix: "./", ns: ns).first)
end</pre> </div> <div class="mixin-from"> Included from <a href="searchable.html">Nokogiri::XML::Searchable</a> </div> <p>Search this node’s immediate children using <a href="../css.html"><code>CSS</code></a> selector <code>selector</code></p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-at_css"> <span class="method-callseq"> at_css(*rules, [namespace-bindings, custom-pseudo-class]) </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="at_css-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/searchable.rb, line 140
def at_css(*args)
  css(*args).first
end</pre> </div> <div class="mixin-from"> Included from <a href="searchable.html">Nokogiri::XML::Searchable</a> </div> <p>Search this object for <a href="../css.html"><code>CSS</code></a> <code>rules</code>, and return only the first match. <code>rules</code> must be one or more <a href="../css.html"><code>CSS</code></a> selectors.</p> <p>See <a href="searchable.html#method-i-css"><code>Searchable#css</code></a> for more information.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-at_xpath"> <span class="method-callseq"> at_xpath(*paths, [namespace-bindings, variable-bindings, custom-handler-class]) </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="at_xpath-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/searchable.rb, line 188
def at_xpath(*args)
  xpath(*args).first
end</pre> </div> <div class="mixin-from"> Included from <a href="searchable.html">Nokogiri::XML::Searchable</a> </div> <p>Search this node for <a href="xpath.html"><code>XPath</code></a> <code>paths</code>, and return only the first match. <code>paths</code> must be one or more <a href="xpath.html"><code>XPath</code></a> queries.</p> <p>See <a href="searchable.html#method-i-xpath"><code>Searchable#xpath</code></a> for more information.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-search"> <span class="method-callseq"> search(*paths, [namespace-bindings, xpath-variable-bindings, custom-handler-class]) </span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="search-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/searchable.rb, line 51
def search(*args)
  paths, handler, ns, binds = extract_params(args)

  xpaths = paths.map(&amp;:to_s).map do |path|
    LOOKS_LIKE_XPATH.match?(path) ? path : xpath_query_from_css_rule(path, ns)
  end.flatten.uniq

  xpath(*(xpaths + [ns, handler, binds].compact))
end</pre> </div> <div class="mixin-from"> Included from <a href="searchable.html">Nokogiri::XML::Searchable</a> </div> <p>Search this object for <code>paths</code>. <code>paths</code> must be one or more <a href="xpath.html"><code>XPath</code></a> or <a href="../css.html"><code>CSS</code></a> queries:</p> <pre class="ruby" data-language="ruby">node.search("div.employee", ".//title")
</pre> <p>A hash of namespace bindings may be appended:</p> <pre class="ruby" data-language="ruby">node.search('.//bike:tire', {'bike' =&gt; 'http://schwinn.com/'})
node.search('bike|tire', {'bike' =&gt; 'http://schwinn.com/'})
</pre> <p>For <a href="xpath.html"><code>XPath</code></a> queries, a hash of variable bindings may also be appended to the namespace bindings. For example:</p> <pre class="ruby" data-language="ruby">node.search('.//address[@domestic=$value]', nil, {:value =&gt; 'Yes'})
</pre> <p>💡 Custom <a href="xpath.html"><code>XPath</code></a> functions and <a href="../css.html"><code>CSS</code></a> pseudo-selectors may also be defined. To define custom functions create a class and implement the function you want to define. The first argument to the method will be the current matching <a href="nodeset.html"><code>NodeSet</code></a>. Any other arguments are ones that you pass in. Note that this class may appear anywhere in the argument list. For example:</p> <pre class="ruby" data-language="ruby">handler = Class.new {
  def regex node_set, regex
    node_set.find_all { |node| node['some_attribute'] =~ /#{regex}/ }
  end
}.new
node.search('.//title[regex(., "\w+")]', 'div.employee:regex("[0-9]+")', handler)
</pre> <p>See <a href="searchable.html#method-i-xpath"><code>Searchable#xpath</code></a> and <a href="searchable.html#method-i-css"><code>Searchable#css</code></a> for further usage help.</p>  </div> <div class="aliases"> Also aliased as: <a href="searchable.html#method-i-2F">/</a> </div> </div> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2008&ndash;2023 by Mike Dalessio, Aaron Patterson, Yoko Harada, Akinori MUSHA, John Shahid,<br>Karol Bucek, Sam Ruby, Craig Barnes, Stephen Checkoway, Lars Kanis, Sergio Arbeo,<br>Timothy Elliott, Nobuyoshi Nakada, Charles Nutter, Patrick MahoneyLicensed under the MIT License.<br>
    <a href="https://nokogiri.org/rdoc/Nokogiri/XML/NodeSet.html" class="_attribution-link">https://nokogiri.org/rdoc/Nokogiri/XML/NodeSet.html</a>
  </p>
</div>
