<h1 id="class-Nokogiri::XML::ParseOptions" class="class"> class Nokogiri::XML::ParseOptions </h1>
<dl class="meta">
<dt>Parent:</dt>
<dd class="meta-parent"><a href="https://nokogiri.org/rdoc/Object.html">Object</a></dd>
</dl> <section class="description"> <p>Options that control the parsing behavior for <a href="document.html"><code>XML::Document</code></a>, <a href="documentfragment.html"><code>XML::DocumentFragment</code></a>, <a href="../html4/document.html"><code>HTML4::Document</code></a>, <a href="../html4/documentfragment.html"><code>HTML4::DocumentFragment</code></a>, <a href="../xslt/stylesheet.html"><code>XSLT::Stylesheet</code></a>, and <a href="schema.html"><code>XML::Schema</code></a>.</p> <p>These options directly expose libxml2‚Äôs parse options, which are all boolean in the sense that an option is ‚Äúon‚Äù or ‚Äúoff‚Äù.</p> <p>üí° Note that <a href="../html5.html"><code>HTML5</code></a> parsing has a separate, orthogonal set of options due to the nature of the <a href="../html5.html"><code>HTML5</code></a> specification. See <a href="../html5.html"><code>Nokogiri::HTML5</code></a>.</p> <p>‚ö† Not all parse options are supported on JRuby. <a href="../../nokogiri.html"><code>Nokogiri</code></a> will attempt to invoke the equivalent behavior in Xerces/NekoHTML on JRuby when it‚Äôs possible.</p> <h2 id="class-Nokogiri::XML::ParseOptions-label-Setting+and+unsetting+parse+options">Setting and unsetting parse options </h2> <p>You can build your own combinations of parse options by using any of the following methods:</p> <dl class="rdoc-list label-list"> <dt> <a href="parseoptions.html"><code>ParseOptions</code></a> method chaining </dt> <dd> <p>Every option has an equivalent method in lowercase. You can chain these methods together to set various combinations.</p> <pre class="ruby" data-language="ruby"># Set the HUGE &amp; PEDANTIC options
po = Nokogiri::XML::ParseOptions.new.huge.pedantic
doc = Nokogiri::XML::Document.parse(xml, nil, nil, po)
</pre> <p>Every option has an equivalent <code>no{option}</code> method in lowercase. You can call these methods on an instance of <a href="parseoptions.html"><code>ParseOptions</code></a> to unset the option.</p> <pre class="ruby" data-language="ruby"># Set the HUGE &amp; PEDANTIC options
po = Nokogiri::XML::ParseOptions.new.huge.pedantic

# later we want to modify the options
po.nohuge # Unset the HUGE option
po.nopedantic # Unset the PEDANTIC option
</pre> <p>üí° Note that some options begin with ‚Äúno‚Äù leading to the logical but perhaps unintuitive double negative:</p> <pre class="ruby" data-language="ruby">po.nocdata # Set the NOCDATA parse option
po.nonocdata # Unset the NOCDATA parse option
</pre> <p>üí° Note that negation is not available for <a href="parseoptions.html#STRICT"><code>STRICT</code></a>, which is itself a negation of all other features.</p> </dd> <dt>Using Ruby Blocks </dt> <dd> <p>Most parsing methods will accept a block for configuration of parse options, and we recommend chaining the setter methods:</p> <pre class="ruby" data-language="ruby">doc = Nokogiri::XML::Document.parse(xml) { |config| config.huge.pedantic }
</pre> </dd> <dt> <a href="parseoptions.html"><code>ParseOptions</code></a> constants </dt> <dd> <p>You can also use the constants declared under <a href="parseoptions.html"><code>Nokogiri::XML::ParseOptions</code></a> to set various combinations. They are bits in a bitmask, and so can be combined with bitwise operators:</p> <pre class="ruby" data-language="ruby">po = Nokogiri::XML::ParseOptions.new(Nokogiri::XML::ParseOptions::HUGE | Nokogiri::XML::ParseOptions::PEDANTIC)
doc = Nokogiri::XML::Document.parse(xml, nil, nil, po)
</pre> </dd> </dl> </section> <section id="5Buntitled-5D" class="documentation-section"> <section class="constants-list"> <header> <h3>Constants</h3> </header> <dl> <dt id="BIG_LINES">BIG_LINES </dt> <dd> <p>Support line numbers up to <code>long int</code> (default is a <code>short int</code>). On by default for for <a href="document.html"><code>XML::Document</code></a>, <a href="documentfragment.html"><code>XML::DocumentFragment</code></a>, <a href="../html4/document.html"><code>HTML4::Document</code></a>, <a href="../html4/documentfragment.html"><code>HTML4::DocumentFragment</code></a>, <a href="../xslt/stylesheet.html"><code>XSLT::Stylesheet</code></a>, and <a href="schema.html"><code>XML::Schema</code></a>.</p> </dd> <dt id="COMPACT">COMPACT </dt> <dd> <p>Compact small text nodes. Off by default.</p> <p>‚ö† No modification of the DOM tree is allowed after parsing. libxml2 may crash if you try to modify the tree.</p> </dd> <dt id="DEFAULT_HTML">DEFAULT_HTML </dt> <dd> <p>The options mask used by default used for parsing <a href="../html4/document.html"><code>HTML4::Document</code></a> and <a href="../html4/documentfragment.html"><code>HTML4::DocumentFragment</code></a></p> </dd> <dt id="DEFAULT_SCHEMA">DEFAULT_SCHEMA </dt> <dd> <p>The options mask used by default used for parsing <a href="schema.html"><code>XML::Schema</code></a></p> </dd> <dt id="DEFAULT_XML">DEFAULT_XML </dt> <dd> <p>The options mask used by default for parsing <a href="document.html"><code>XML::Document</code></a> and <a href="documentfragment.html"><code>XML::DocumentFragment</code></a></p> </dd> <dt id="DEFAULT_XSLT">DEFAULT_XSLT </dt> <dd> <p>The options mask used by default used for parsing <a href="../xslt/stylesheet.html"><code>XSLT::Stylesheet</code></a></p> </dd> <dt id="DTDATTR">DTDATTR </dt> <dd> <p>Default <a href="dtd.html"><code>DTD</code></a> attributes. On by default for <a href="../xslt/stylesheet.html"><code>XSLT::Stylesheet</code></a>.</p> </dd> <dt id="DTDLOAD">DTDLOAD </dt> <dd> <p>Load external subsets. On by default for <a href="../xslt/stylesheet.html"><code>XSLT::Stylesheet</code></a>.</p> <p>‚ö† <strong>It is UNSAFE to set this option</strong> when parsing untrusted documents.</p> </dd> <dt id="DTDVALID">DTDVALID </dt> <dd> <p>Validate with the <a href="dtd.html"><code>DTD</code></a>. Off by default.</p> </dd> <dt id="HUGE">HUGE </dt> <dd> <p>Relax any hardcoded limit from the parser. Off by default.</p> <p>‚ö† There may be a performance penalty when this option is set.</p> </dd> <dt id="NOBASEFIX">NOBASEFIX </dt> <dd> <p>Do not fixup XInclude xml:base uris. Off by default</p> </dd> <dt id="NOBLANKS">NOBLANKS </dt> <dd> <p>Remove blank nodes. Off by default.</p> </dd> <dt id="NOCDATA">NOCDATA </dt> <dd> <p>Merge <a href="cdata.html"><code>CDATA</code></a> as text nodes. On by default for <a href="../xslt/stylesheet.html"><code>XSLT::Stylesheet</code></a>.</p> </dd> <dt id="NODICT">NODICT </dt> <dd> <p>Do not reuse the context dictionary. Off by default.</p> </dd> <dt id="NOENT">NOENT </dt> <dd> <p>Substitute entities. Off by default.</p> <p>‚ö† This option enables entity substitution, contrary to what the name implies.</p> <p>‚ö† <strong>It is UNSAFE to set this option</strong> when parsing untrusted documents.</p> </dd> <dt id="NOERROR">NOERROR </dt> <dd> <p>Suppress error reports. On by default for <a href="../html4/document.html"><code>HTML4::Document</code></a> and <a href="../html4/documentfragment.html"><code>HTML4::DocumentFragment</code></a></p> </dd> <dt id="NONET">NONET </dt> <dd> <p>Forbid network access. On by default for <a href="document.html"><code>XML::Document</code></a>, <a href="documentfragment.html"><code>XML::DocumentFragment</code></a>, <a href="../html4/document.html"><code>HTML4::Document</code></a>, <a href="../html4/documentfragment.html"><code>HTML4::DocumentFragment</code></a>, <a href="../xslt/stylesheet.html"><code>XSLT::Stylesheet</code></a>, and <a href="schema.html"><code>XML::Schema</code></a>.</p> <p>‚ö† <strong>It is UNSAFE to unset this option</strong> when parsing untrusted documents.</p> </dd> <dt id="NOWARNING">NOWARNING </dt> <dd> <p>Suppress warning reports. On by default for <a href="../html4/document.html"><code>HTML4::Document</code></a> and <a href="../html4/documentfragment.html"><code>HTML4::DocumentFragment</code></a></p> </dd> <dt id="NOXINCNODE">NOXINCNODE </dt> <dd> <p>Do not generate XInclude START/END nodes. Off by default.</p> </dd> <dt id="NSCLEAN">NSCLEAN </dt> <dd> <p>Remove redundant namespaces declarations. Off by default.</p> </dd> <dt id="OLD10">OLD10 </dt> <dd> <p>Parse using XML-1.0 before update 5. Off by default</p> </dd> <dt id="PEDANTIC">PEDANTIC </dt> <dd> <p>Enable pedantic error reporting. Off by default.</p> </dd> <dt id="RECOVER">RECOVER </dt> <dd> <p>Recover from errors. On by default for <a href="document.html"><code>XML::Document</code></a>, <a href="documentfragment.html"><code>XML::DocumentFragment</code></a>, <a href="../html4/document.html"><code>HTML4::Document</code></a>, <a href="../html4/documentfragment.html"><code>HTML4::DocumentFragment</code></a>, <a href="../xslt/stylesheet.html"><code>XSLT::Stylesheet</code></a>, and <a href="schema.html"><code>XML::Schema</code></a>.</p> </dd> <dt id="SAX1">SAX1 </dt> <dd> <p>Use the <a href="parseoptions.html#SAX1"><code>SAX1</code></a> interface internally. Off by default.</p> </dd> <dt id="STRICT">STRICT </dt> <dd> <p>Strict parsing</p> </dd> <dt id="XINCLUDE">XINCLUDE </dt> <dd> <p>Implement XInclude substitution. Off by default.</p> </dd> </dl> </section> <section class="attribute-method-details"> <header> <h3>Attributes</h3> </header> <div class="method-detail"> <div class="method-heading attribute-method-heading" id="attribute-i-options"> <span class="method-name">options</span><span class="attribute-access-type">[RW]</span> </div>  </div> <div class="method-detail"> <div class="method-heading attribute-method-heading" id="attribute-i-to_i"> <span class="method-name">to_i</span><span class="attribute-access-type">[RW]</span> </div>  </div> </section> <section id="public-class-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Public Class Methods</h3> </header> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-new"> <span class="method-name">new</span><span class="method-args">(options = STRICT)</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="new-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/parse_options.rb, line 165
def initialize(options = STRICT)
  @options = options
end</pre> </div>  </div> </div> </section> <section id="public-instance-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Public Instance Methods</h3> </header> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-3D-3D"> <span class="method-name">==</span><span class="method-args">(other)</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="3D-3D-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/parse_options.rb, line 198
def ==(other)
  other.to_i == to_i
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-inspect"> <span class="method-name">inspect</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="inspect-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/parse_options.rb, line 204
def inspect
  options = []
  self.class.constants.each do |k|
    options &lt;&lt; k.downcase if send(:"#{k.downcase}?")
  end
  super.sub(/&gt;$/, " " + options.join(", ") + "&gt;")
end</pre> </div> <div class="method-calls-super"> Calls superclass method </div>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-strict"> <span class="method-name">strict</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="strict-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/parse_options.rb, line 189
def strict
  @options &amp;= ~RECOVER
  self
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-strict-3F"> <span class="method-name">strict?</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="strict-3F-source"> <pre class="ruby" data-language="ruby"># File lib/nokogiri/xml/parse_options.rb, line 194
def strict?
  @options &amp; RECOVER == STRICT
end</pre> </div>  </div> </div> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2008&ndash;2023 by Mike Dalessio, Aaron Patterson, Yoko Harada, Akinori MUSHA, John Shahid,<br>Karol Bucek, Sam Ruby, Craig Barnes, Stephen Checkoway, Lars Kanis, Sergio Arbeo,<br>Timothy Elliott, Nobuyoshi Nakada, Charles Nutter, Patrick MahoneyLicensed under the MIT License.<br>
    <a href="https://nokogiri.org/rdoc/Nokogiri/XML/ParseOptions.html" class="_attribution-link">https://nokogiri.org/rdoc/Nokogiri/XML/ParseOptions.html</a>
  </p>
</div>
