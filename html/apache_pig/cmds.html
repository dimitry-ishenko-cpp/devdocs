<h1>Shell and Utility Commands</h1> <div id="front-matter"> <div id="minitoc-area"> <ul class="minitoc"> <li> <a href="#shell-cmds">Shell Commands</a> <ul class="minitoc"> <li> <a href="#fs">fs</a> </li> <li> <a href="#sh">sh</a> </li> </ul> </li> <li> <a href="#utillity-cmds">Utility Commands</a> <ul class="minitoc"> <li> <a href="#clear">clear</a> </li> <li> <a href="#exec">exec</a> </li> <li> <a href="#help">help</a> </li> <li> <a href="#history">history</a> </li> <li> <a href="#kill">kill</a> </li> <li> <a href="#quit">quit</a> </li> <li> <a href="#run">run</a> </li> <li> <a href="#set">set</a> </li> </ul> </li> </ul> </div> </div>    <h2 id="shell-cmds">Shell Commands</h2> <div class="section">  <h3 id="fs">fs</h3> <p>Invokes any FsShell command from within a Pig script or the Grunt shell.</p>  <h4 id="Syntax">Syntax </h4> <table class="ForrestTable"> <tr> <td colspan="1" rowspan="1"> <p>fs subcommand subcommand_parameters </p> </td> </tr> </table>  <h4 id="Terms">Terms</h4> <table class="ForrestTable"> <tr> <td colspan="1" rowspan="1"> <p>subcommand</p> </td> <td colspan="1" rowspan="1"> <p>The FsShell command.</p> </td> </tr> <tr> <td colspan="1" rowspan="1"> <p>subcommand_parameters</p> </td> <td colspan="1" rowspan="1"> <p>The FsShell command parameters.</p> </td> </tr> </table>  <h4 id="Usage">Usage</h4> <p>Use the fs command to invoke any FsShell command from within a Pig script or Grunt shell. The fs command greatly extends the set of supported file system commands and the capabilities supported for existing commands such as ls that will now support globing. For a complete list of FsShell commands, see <a href="http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/FileSystemShell.html">File System Shell Guide</a> </p>  <h4 id="Examples">Examples</h4> <p>In these examples a directory is created, a file is copied, a file is listed.</p> <pre class="code">
fs -mkdir /tmp
fs -copyFromLocal file-x file-y
fs -ls file-y
</pre>  <h3 id="sh">sh</h3> <p>Invokes any sh shell command from within a Pig script or the Grunt shell.</p>  <h4 id="Syntax-N1008E">Syntax </h4> <table class="ForrestTable"> <tr> <td colspan="1" rowspan="1"> <p>sh subcommand subcommand_parameters </p> </td> </tr> </table>  <h4 id="Terms-N100A2">Terms</h4> <table class="ForrestTable"> <tr> <td colspan="1" rowspan="1"> <p>subcommand</p> </td> <td colspan="1" rowspan="1"> <p>The sh shell command.</p> </td> </tr> <tr> <td colspan="1" rowspan="1"> <p>subcommand_parameters</p> </td> <td colspan="1" rowspan="1"> <p>The sh shell command parameters.</p> </td> </tr> </table>  <h4 id="Usage-N100D2">Usage</h4> <p>Use the sh command to invoke any sh shell command from within a Pig script or Grunt shell.</p> <p> Note that only real programs can be run form the sh command. Commands such as cd are not programs but part of the shell environment and as such cannot be executed unless the user invokes the shell explicitly, like "bash cd". </p>  <h4 id="Example">Example</h4> <p>In this example the ls command is invoked.</p> <pre class="code">
grunt&gt; sh ls 
bigdata.conf 
nightly.conf 
..... 
grunt&gt; 
</pre> </div>   <h2 id="utillity-cmds">Utility Commands</h2> <div class="section">  <h3 id="clear">clear</h3> <p>Clear the screen of Pig grunt shell and position the cursor at top of the screen.</p>  <h4 id="Syntax-N10102">Syntax </h4> <table class="ForrestTable"> <tr> <td colspan="1" rowspan="1"> <p>clear</p> </td> </tr> </table>  <h4 id="Terms-N10117">Terms</h4> <table class="ForrestTable"> <tr> <td colspan="1" rowspan="1"> <p>key</p> </td> <td colspan="1" rowspan="1"> <p>Description.</p> </td> </tr> <tr> <td colspan="1" rowspan="1"> <p>none</p> </td> <td colspan="1" rowspan="1"> <p>no parameters</p> </td> </tr> </table>  <h4 id="Example-N10146">Example</h4> <p>In this example the clear command clean up Pig grunt shell.</p> <pre class="code">
grunt&gt; clear</pre>  <h3 id="exec">exec</h3> <p>Run a Pig script.</p>  <h4 id="Syntax-N10160">Syntax</h4> <table class="ForrestTable"> <tr> <td colspan="1" rowspan="1"> <p>exec [–param param_name = param_value] [–param_file file_name] [script] </p> </td> </tr> </table>  <h4 id="Terms-N10174">Terms</h4> <table class="ForrestTable"> <tr> <td colspan="1" rowspan="1"> <p>–param param_name = param_value</p> </td> <td colspan="1" rowspan="1"> <p>See <a href="cont.html#Parameter-Sub">Parameter Substitution</a>.</p> </td> </tr> <tr> <td colspan="1" rowspan="1"> <p>–param_file file_name</p> </td> <td colspan="1" rowspan="1"> <p>See <a href="cont.html#Parameter-Sub">Parameter Substitution</a>. </p> </td> </tr> <tr> <td colspan="1" rowspan="1"> <p>script</p> </td> <td colspan="1" rowspan="1"> <p>The name of a Pig script.</p> </td> </tr> </table>  <h4 id="Usage-N101BE">Usage</h4> <p>Use the exec command to run a Pig script with no interaction between the script and the Grunt shell (batch mode). Aliases defined in the script are not available to the shell; however, the files produced as the output of the script and stored on the system are visible after the script is run. Aliases defined via the shell are not available to the script. </p> <p>With the exec command, store statements will not trigger execution; rather, the entire script is parsed before execution starts. Unlike the run command, exec does not change the command history or remembers the handles used inside the script. Exec without any parameters can be used in scripts to force execution up to the point in the script where the exec occurs. </p>  <p id="exec-debug">For comparison, see the <a href="#run">run</a> command. Both the exec and run commands are useful for debugging because you can modify a Pig script in an editor and then rerun the script in the Grunt shell without leaving the shell. Also, both commands promote Pig script modularity as they allow you to reuse existing components.</p>  <h4 id="Examples-N101D3">Examples</h4> <p>In this example the script is displayed and run.</p> <pre class="code">
grunt&gt; cat myscript.pig
a = LOAD 'student' AS (name, age, gpa);
b = LIMIT a 3;
DUMP b;

grunt&gt; exec myscript.pig
(alice,20,2.47)
(luke,18,4.00)
(holly,24,3.27)
</pre> <p>In this example parameter substitution is used with the exec command.</p> <pre class="code">
grunt&gt; cat myscript.pig
a = LOAD 'student' AS (name, age, gpa);
b = ORDER a BY name;

STORE b into '$out';

grunt&gt; exec –param out=myoutput myscript.pig
</pre> <p>In this example multiple parameters are specified.</p> <pre class="code">
grunt&gt; exec –param p1=myparam1 –param p2=myparam2 myscript.pig
</pre>  <h3 id="help">help</h3> <p>Prints a list of Pig commands or properties.</p>  <h4 id="Syntax-N101FB">Syntax</h4> <table class="ForrestTable"> <tr> <td colspan="1" rowspan="1"> <p>-help [properties] </p> </td> </tr> </table>  <h4 id="Terms-N1020F">Terms</h4> <table class="ForrestTable"> <tr> <td colspan="1" rowspan="1"> <p>properties</p> </td> <td colspan="1" rowspan="1"> <p>List Pig properties.</p> </td> </tr> </table>  <h4 id="Usage-N1022B">Usage</h4> <p>The help command prints a list of Pig commands or properties.</p>  <h4 id="Example-N10234">Example</h4> <p>Use "-help" to get a list of commands.</p> <pre class="code">
$ pig -help

Apache Pig version 0.8.0-dev (r987348)
compiled Aug 19 2010, 16:38:44

USAGE: Pig [options] [-] : Run interactively in grunt shell.
       Pig [options] -e[xecute] cmd [cmd ...] : Run cmd(s).
       Pig [options] [-f[ile]] file : Run cmds found in file.
  options include:
    -4, -log4jconf - Log4j configuration file, overrides log conf
    -b, -brief - Brief logging (no timestamps)
    -c, -check - Syntax check
<em>etc …</em>
</pre> <p>Use "-help properties" to get a list of properties.</p> <pre class="code">
$ pig -help properties

The following properties are supported:
    Logging:
        verbose=true|false; default is false. This property is the same as -v switch
        brief=true|false; default is false. This property is the same as -b switch
        debug=OFF|ERROR|WARN|INFO|DEBUG; default is INFO. This property is the same as -d switch
        aggregate.warning=true|false; default is true. If true, prints count of warnings
            of each type rather than logging each warning.
<em>etc …</em>
</pre>  <h3 id="history">history</h3> <p>Display the list of statements used so far.</p>  <h4 id="Syntax-N10259">Syntax</h4> <table class="ForrestTable"> <tr> <td colspan="1" rowspan="1"> <p>history [-n]</p> </td> </tr> </table>  <h4 id="Terms-N1026E">Terms</h4> <table class="ForrestTable"> <tr> <td colspan="1" rowspan="1"> <p>key</p> </td> <td colspan="1" rowspan="1"> <p>Description.</p> </td> </tr> <tr> <td colspan="1" rowspan="1"> <p>-n</p> </td> <td colspan="1" rowspan="1"> <p>Omit line numbers in the list.</p> </td> </tr> </table>  <h4 id="Usage-N1029E">Usage</h4> <p>The history command shows the statements used so far.</p>  <h4 id="Example-N102A7">Example</h4> <p>In this example the history command shows all the statements with line numbers and without them.</p> <pre class="code">
grunt&gt; a = LOAD 'student' AS (name, age, gpa);
grunt&gt; b = order a by name;
grunt&gt; history
1 a = LOAD 'student' AS (name, age, gpa);
2 b = order a by name;

grunt&gt; c = order a by name;
grunt&gt; history -n
a = LOAD 'student' AS (name, age, gpa);
b = order a by name;
c = order a by name;</pre>  <h3 id="kill">kill</h3> <p>Kills a job.</p>  <h4 id="Syntax-N102C1">Syntax</h4> <table class="ForrestTable"> <tr> <td colspan="1" rowspan="1"> <p>kill jobid</p> </td> </tr> </table>  <h4 id="Terms-N102D5">Terms</h4> <table class="ForrestTable"> <tr> <td colspan="1" rowspan="1"> <p>jobid</p> </td> <td colspan="1" rowspan="1"> <p>The job id.</p> </td> </tr> </table>  <h4 id="Usage-N102F1">Usage</h4> <p>Use the kill command to kill a Pig job based on the job id.</p> <p>The kill command will attempt to kill any MapReduce jobs associated with the Pig job. Under certain conditions, however, this may fail; for example, when a Pig job is killed and does not have a chance to call its shutdown procedures.</p>  <h4 id="Example-N102FE">Example</h4> <p>In this example the job with id job_0001 is killed.</p> <pre class="code">
grunt&gt; kill job_0001
</pre>  <h3 id="quit">quit</h3> <p>Quits from the Pig grunt shell.</p>  <h4 id="Syntax-N10317">Syntax</h4> <table class="ForrestTable"> <tr> <td colspan="1" rowspan="1"> <p>exit</p> </td> </tr> </table>  <h4 id="Terms-N1032B">Terms</h4> <table class="ForrestTable"> <tr> <td colspan="1" rowspan="1"> <p>none</p> </td> <td colspan="1" rowspan="1"> <p>no parameters</p> </td> </tr> </table>  <h4 id="Usage-N10347">Usage</h4> <p>The quit command enables you to quit or exit the Pig grunt shell.</p>  <h4 id="Example-N10350">Example</h4> <p>In this example the quit command exits the Pig grunt shall.</p> <pre class="code">
grunt&gt; quit
</pre>  <h3 id="run">run</h3> <p>Run a Pig script.</p>  <h4 id="Syntax-N1036A">Syntax</h4> <table class="ForrestTable"> <tr> <td colspan="1" rowspan="1"> <p>run [–param param_name = param_value] [–param_file file_name] script </p> </td> </tr> </table>  <h4 id="Terms-N1037E">Terms</h4> <table class="ForrestTable"> <tr> <td colspan="1" rowspan="1"> <p>–param param_name = param_value</p> </td> <td colspan="1" rowspan="1"> <p>See <a href="cont.html#Parameter-Sub">Parameter Substitution</a>.</p> </td> </tr> <tr> <td colspan="1" rowspan="1"> <p>–param_file file_name</p> </td> <td colspan="1" rowspan="1"> <p>See <a href="cont.html#Parameter-Sub">Parameter Substitution</a>. </p> </td> </tr> <tr> <td colspan="1" rowspan="1"> <p>script</p> </td> <td colspan="1" rowspan="1"> <p>The name of a Pig script.</p> </td> </tr> </table>  <h4 id="Usage-N103C8">Usage</h4> <p>Use the run command to run a Pig script that can interact with the Grunt shell (interactive mode). The script has access to aliases defined externally via the Grunt shell. The Grunt shell has access to aliases defined within the script. All commands from the script are visible in the command history. </p> <p>With the run command, every store triggers execution. The statements from the script are put into the command history and all the aliases defined in the script can be referenced in subsequent statements after the run command has completed. Issuing a run command on the grunt command line has basically the same effect as typing the statements manually. </p> <p>For comparison, see the <a href="#exec">exec</a> command. Both the run and exec commands are useful for debugging because you can modify a Pig script in an editor and then rerun the script in the Grunt shell without leaving the shell. Also, both commands promote Pig script modularity as they allow you to reuse existing components.</p>  <h4 id="Example-N103DC">Example</h4> <p>In this example the script interacts with the results of commands issued via the Grunt shell.</p> <pre class="code">
grunt&gt; cat myscript.pig
b = ORDER a BY name;
c = LIMIT b 10;

grunt&gt; a = LOAD 'student' AS (name, age, gpa);

grunt&gt; run myscript.pig

grunt&gt; d = LIMIT c 3;

grunt&gt; DUMP d;
(alice,20,2.47)
(alice,27,1.95)
(alice,36,2.27)
</pre> <p>In this example parameter substitution is used with the run command.</p> <pre class="code">
grunt&gt; a = LOAD 'student' AS (name, age, gpa);

grunt&gt; cat myscript.pig
b = ORDER a BY name;
STORE b into '$out';

grunt&gt; run –param out=myoutput myscript.pig
</pre>  <h3 id="set">set</h3> <p>Shows/Assigns values to keys used in Pig.</p>  <h4 id="Syntax-N103FC">Syntax</h4> <table class="ForrestTable"> <tr> <td colspan="1" rowspan="1"> <p>set [key 'value']</p> </td> </tr> </table>  <h4 id="Terms-N10410">Terms</h4> <table class="ForrestTable"> <tr> <td colspan="1" rowspan="1"> <p>key</p> </td> <td colspan="1" rowspan="1"> <p>Key (see table). Case sensitive.</p> </td> </tr> <tr> <td colspan="1" rowspan="1"> <p>value</p> </td> <td colspan="1" rowspan="1"> <p>Value for key (see table). Case sensitive.</p> </td> </tr> </table>  <h4 id="Usage-N10440">Usage</h4> <p>Use the set command to assign values to keys, as shown in the table. All keys and their corresponding values (for Pig and Hadoop) are case sensitive. If set command is used without key/value pair argument, Pig prints all the configurations and system properties.</p> <table class="ForrestTable"> <tr> <td colspan="1" rowspan="1"> <p>Key </p> </td> <td colspan="1" rowspan="1"> <p>Value </p> </td> <td colspan="1" rowspan="1"> <p>Description </p> </td> </tr> <tr> <td colspan="1" rowspan="1"> <p>default_parallel</p> </td> <td colspan="1" rowspan="1"> <p>a whole number </p> </td> <td colspan="1" rowspan="1"> <p>Sets the number of reducers for all MapReduce jobs generated by Pig (see <a href="perf.html#parallel">Use the Parallel Features</a>).</p> </td> </tr> <tr> <td colspan="1" rowspan="1"> <p>debug </p> </td> <td colspan="1" rowspan="1"> <p>on/off </p> </td> <td colspan="1" rowspan="1"> <p>Turns debug-level logging on or off. </p> </td> </tr> <tr> <td colspan="1" rowspan="1"> <p>job.name </p> </td> <td colspan="1" rowspan="1"> <p>Single-quoted string that contains the job name.</p> </td> <td colspan="1" rowspan="1"> <p>Sets user-specified name for the job </p> </td> </tr> <tr> <td colspan="1" rowspan="1"> <p>job.priority </p> </td> <td colspan="1" rowspan="1"> <p>Acceptable values (case insensitive): very_low, low, normal, high, very_high </p> </td> <td colspan="1" rowspan="1"> <p>Sets the priority of a Pig job.</p> </td> </tr> <tr> <td colspan="1" rowspan="1"> <p>stream.skippath</p> </td> <td colspan="1" rowspan="1"> <p>String that contains the path.</p> </td> <td colspan="1" rowspan="1"> <p>For streaming, sets the path from which not to ship data (see <a href="basic.html#define-udfs">DEFINE (UDFs, streaming)</a> and <a href="basic.html#autoship"> About Auto-Ship</a>).</p> </td> </tr> </table>  <p> All Pig and Hadoop properties can be set, either in the Pig script or via the Grunt command line. </p>  <h4 id="Examples-N10500">Examples</h4> <p>In this example key value pairs are set at the command line.</p> <pre class="code">
grunt&gt; SET debug 'on'
grunt&gt; SET job.name 'my job'
grunt&gt; SET default_parallel 100
</pre> <p>In this example default_parallel is set in the Pig script; all MapReduce jobs that get launched will use 20 reducers.</p> <pre class="code">
SET default_parallel 20;
A = LOAD 'myfile.txt' USING PigStorage() AS (t, u, v);
B = GROUP A BY t;
C = FOREACH B GENERATE group, COUNT(A.t) as mycount;
D = ORDER C BY mycount;
STORE D INTO 'mysortedcount' USING PigStorage();
</pre> <p>In this example multiple key value pairs are set in the Pig script. These key value pairs are put in job-conf by Pig (making the pairs available to Pig and Hadoop). This is a script-wide setting; if a key value is defined multiple times in the script the last value will take effect and will be set for all jobs generated by the script. </p> <pre class="code">
...
SET mapred.map.tasks.speculative.execution false; 
SET pig.logfile mylogfile.log; 
SET my.arbitrary.key my.arbitary.value; 
...
</pre> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2007&ndash;2017 Apache Software Foundation<br>Licensed under the Apache Software License version 2.0.<br>
    <a href="https://pig.apache.org/docs/r0.17.0/cmds.html" class="_attribution-link">https://pig.apache.org/docs/r0.17.0/cmds.html</a>
  </p>
</div>
