<div class="Box-sc-g0xbh4-0 goytIH">
<h1 class="components__StyledHeading-sc-13rww2g-0 components__h1-sc-13rww2g-1 cZjJlu jMmFmb components__StyledHeading-sc-13rww2g-0 cZjJlu">folders</h1>
<div class="Box-sc-g0xbh4-0 iLGAbu">Folder Structures Used by npm</div>
</div>


<h3 id="description" class="components__StyledHeading-sc-13rww2g-0 components__h3-sc-13rww2g-3 cZjJlu Nafes components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#description" aria-label="Description permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ">Description</a></h3> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">npm puts various things on your computer. That's its job.</p> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">This document will tell you what it puts where.</p> <h4 id="tldr" class="components__StyledHeading-sc-13rww2g-0 components__h4-sc-13rww2g-4 cZjJlu fUELCx components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#tldr" aria-label="tl;dr permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ">tl;dr</a></h4> <ul class="components__UnorderedList-sc-13rww2g-10 fqlkab"> <li>Local install (default): puts stuff in <code class="code__InlineCode-sc-izuaam-0 lnAgdq">./node_modules</code> of the current package root.</li> <li>Global install (with <code class="code__InlineCode-sc-izuaam-0 lnAgdq">-g</code>): puts stuff in /usr/local or wherever node is installed.</li> <li>Install it <strong>locally</strong> if you're going to <code class="code__InlineCode-sc-izuaam-0 lnAgdq">require()</code> it.</li> <li>Install it <strong>globally</strong> if you're going to run it on the command line.</li> <li>If you need both, then install it in both places, or use <code class="code__InlineCode-sc-izuaam-0 lnAgdq">npm link</code>.</li> </ul> <h4 id="prefix-configuration" class="components__StyledHeading-sc-13rww2g-0 components__h4-sc-13rww2g-4 cZjJlu fUELCx components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#prefix-configuration" aria-label="prefix Configuration permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ">prefix Configuration</a></h4> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">The <a class="Link__StyledLink-sc-14289xe-0 kIxRcv" href="../using-npm/config.html#prefix"><code class="code__InlineCode-sc-izuaam-0 lnAgdq">prefix</code> config</a> defaults to the location where node is installed. On most systems, this is <code class="code__InlineCode-sc-izuaam-0 lnAgdq">/usr/local</code>. On Windows, it's <code class="code__InlineCode-sc-izuaam-0 lnAgdq">%AppData%\npm</code>. On Unix systems, it's one level up, since node is typically installed at <code class="code__InlineCode-sc-izuaam-0 lnAgdq">{prefix}/bin/node</code> rather than <code class="code__InlineCode-sc-izuaam-0 lnAgdq">{prefix}/node.exe</code>.</p> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">When the <code class="code__InlineCode-sc-izuaam-0 lnAgdq">global</code> flag is set, npm installs things into this prefix. When it is not set, it uses the root of the current package, or the current working directory if not in a package already.</p> <h4 id="node-modules" class="components__StyledHeading-sc-13rww2g-0 components__h4-sc-13rww2g-4 cZjJlu fUELCx components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#node-modules" aria-label="Node Modules permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ">Node Modules</a></h4> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">Packages are dropped into the <code class="code__InlineCode-sc-izuaam-0 lnAgdq">node_modules</code> folder under the <code class="code__InlineCode-sc-izuaam-0 lnAgdq">prefix</code>. When installing locally, this means that you can <code class="code__InlineCode-sc-izuaam-0 lnAgdq">require("packagename")</code> to load its main module, or <code class="code__InlineCode-sc-izuaam-0 lnAgdq">require("packagename/lib/path/to/sub/module")</code> to load other modules.</p> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">Global installs on Unix systems go to <code class="code__InlineCode-sc-izuaam-0 lnAgdq">{prefix}/lib/node_modules</code>. Global installs on Windows go to <code class="code__InlineCode-sc-izuaam-0 lnAgdq">{prefix}/node_modules</code> (that is, no <code class="code__InlineCode-sc-izuaam-0 lnAgdq">lib</code> folder.)</p> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">Scoped packages are installed the same way, except they are grouped together in a sub-folder of the relevant <code class="code__InlineCode-sc-izuaam-0 lnAgdq">node_modules</code> folder with the name of that scope prefix by the @ symbol, e.g. <code class="code__InlineCode-sc-izuaam-0 lnAgdq">npm install @myorg/package</code> would place the package in <code class="code__InlineCode-sc-izuaam-0 lnAgdq">{prefix}/node_modules/@myorg/package</code>. See <a class="Link__StyledLink-sc-14289xe-0 kIxRcv" href="../using-npm/scope.html"><code class="code__InlineCode-sc-izuaam-0 lnAgdq">scope</code></a> for more details.</p> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">If you wish to <code class="code__InlineCode-sc-izuaam-0 lnAgdq">require()</code> a package, then install it locally.</p> <h4 id="executables" class="components__StyledHeading-sc-13rww2g-0 components__h4-sc-13rww2g-4 cZjJlu fUELCx components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#executables" aria-label="Executables permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ">Executables</a></h4> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">When in global mode, executables are linked into <code class="code__InlineCode-sc-izuaam-0 lnAgdq">{prefix}/bin</code> on Unix, or directly into <code class="code__InlineCode-sc-izuaam-0 lnAgdq">{prefix}</code> on Windows. Ensure that path is in your terminal's <code class="code__InlineCode-sc-izuaam-0 lnAgdq">PATH</code> environment to run them.</p> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">When in local mode, executables are linked into <code class="code__InlineCode-sc-izuaam-0 lnAgdq">./node_modules/.bin</code> so that they can be made available to scripts run through npm. (For example, so that a test runner will be in the path when you run <code class="code__InlineCode-sc-izuaam-0 lnAgdq">npm test</code>.)</p> <h4 id="man-pages" class="components__StyledHeading-sc-13rww2g-0 components__h4-sc-13rww2g-4 cZjJlu fUELCx components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#man-pages" aria-label="Man Pages permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ">Man Pages</a></h4> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">When in global mode, man pages are linked into <code class="code__InlineCode-sc-izuaam-0 lnAgdq">{prefix}/share/man</code>.</p> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">When in local mode, man pages are not installed.</p> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">Man pages are not installed on Windows systems.</p> <h4 id="cache" class="components__StyledHeading-sc-13rww2g-0 components__h4-sc-13rww2g-4 cZjJlu fUELCx components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#cache" aria-label="Cache permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ">Cache</a></h4> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">See <a class="Link__StyledLink-sc-14289xe-0 kIxRcv" href="../commands/npm-cache.html"><code class="code__InlineCode-sc-izuaam-0 lnAgdq">npm cache</code></a>. Cache files are stored in <code class="code__InlineCode-sc-izuaam-0 lnAgdq">~/.npm</code> on Posix, or <code class="code__InlineCode-sc-izuaam-0 lnAgdq">%LocalAppData%/npm-cache</code> on Windows.</p> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">This is controlled by the <a class="Link__StyledLink-sc-14289xe-0 kIxRcv" href="../using-npm/config.html#cache"><code class="code__InlineCode-sc-izuaam-0 lnAgdq">cache</code> config</a> param.</p> <h4 id="temp-files" class="components__StyledHeading-sc-13rww2g-0 components__h4-sc-13rww2g-4 cZjJlu fUELCx components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#temp-files" aria-label="Temp Files permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ">Temp Files</a></h4> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">Temporary files are stored by default in the folder specified by the <a class="Link__StyledLink-sc-14289xe-0 kIxRcv" href="../using-npm/config.html#tmp"><code class="code__InlineCode-sc-izuaam-0 lnAgdq">tmp</code> config</a>, which defaults to the TMPDIR, TMP, or TEMP environment variables, or <code class="code__InlineCode-sc-izuaam-0 lnAgdq">/tmp</code> on Unix and <code class="code__InlineCode-sc-izuaam-0 lnAgdq">c:\windows\temp</code> on Windows.</p> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">Temp files are given a unique folder under this root for each run of the program, and are deleted upon successful exit.</p> <h3 id="more-information" class="components__StyledHeading-sc-13rww2g-0 components__h3-sc-13rww2g-3 cZjJlu Nafes components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#more-information" aria-label="More Information permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ">More Information</a></h3> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">When installing locally, npm first tries to find an appropriate <code class="code__InlineCode-sc-izuaam-0 lnAgdq">prefix</code> folder. This is so that <code class="code__InlineCode-sc-izuaam-0 lnAgdq">npm install foo@1.2.3</code> will install to the sensible root of your package, even if you happen to have <code class="code__InlineCode-sc-izuaam-0 lnAgdq">cd</code>ed into some other folder.</p> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">Starting at the $PWD, npm will walk up the folder tree checking for a folder that contains either a <code class="code__InlineCode-sc-izuaam-0 lnAgdq">package.json</code> file, or a <code class="code__InlineCode-sc-izuaam-0 lnAgdq">node_modules</code> folder. If such a thing is found, then that is treated as the effective "current directory" for the purpose of running npm commands. (This behavior is inspired by and similar to git's .git-folder seeking logic when running git commands in a working dir.)</p> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">If no package root is found, then the current folder is used.</p> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">When you run <code class="code__InlineCode-sc-izuaam-0 lnAgdq">npm install foo@1.2.3</code>, then the package is loaded into the cache, and then unpacked into <code class="code__InlineCode-sc-izuaam-0 lnAgdq">./node_modules/foo</code>. Then, any of foo's dependencies are similarly unpacked into <code class="code__InlineCode-sc-izuaam-0 lnAgdq">./node_modules/foo/node_modules/...</code>.</p> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">Any bin files are symlinked to <code class="code__InlineCode-sc-izuaam-0 lnAgdq">./node_modules/.bin/</code>, so that they may be found by npm scripts when necessary.</p> <h4 id="global-installation" class="components__StyledHeading-sc-13rww2g-0 components__h4-sc-13rww2g-4 cZjJlu fUELCx components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#global-installation" aria-label="Global Installation permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ">Global Installation</a></h4> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">If the <a class="Link__StyledLink-sc-14289xe-0 kIxRcv" href="../using-npm/config.html#global"><code class="code__InlineCode-sc-izuaam-0 lnAgdq">global</code> config</a> is set to true, then npm will install packages "globally".</p> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">For global installation, packages are installed roughly the same way, but using the folders described above.</p> <h4 id="cycles-conflicts-and-folder-parsimony" class="components__StyledHeading-sc-13rww2g-0 components__h4-sc-13rww2g-4 cZjJlu fUELCx components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#cycles-conflicts-and-folder-parsimony" aria-label="Cycles, Conflicts, and Folder Parsimony permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ">Cycles, Conflicts, and Folder Parsimony</a></h4> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">Cycles are handled using the property of node's module system that it walks up the directories looking for <code class="code__InlineCode-sc-izuaam-0 lnAgdq">node_modules</code> folders. So, at every stage, if a package is already installed in an ancestor <code class="code__InlineCode-sc-izuaam-0 lnAgdq">node_modules</code> folder, then it is not installed at the current location.</p> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">Consider the case above, where <code class="code__InlineCode-sc-izuaam-0 lnAgdq">foo -&gt; bar -&gt; baz</code>. Imagine if, in addition to that, baz depended on bar, so you'd have: <code class="code__InlineCode-sc-izuaam-0 lnAgdq">foo -&gt; bar -&gt; baz -&gt; bar -&gt; baz ...</code>. However, since the folder structure is: <code class="code__InlineCode-sc-izuaam-0 lnAgdq">foo/node_modules/bar/node_modules/baz</code>, there's no need to put another copy of bar into <code class="code__InlineCode-sc-izuaam-0 lnAgdq">.../baz/node_modules</code>, since when baz calls <code class="code__InlineCode-sc-izuaam-0 lnAgdq">require("bar")</code>, it will get the copy that is installed in <code class="code__InlineCode-sc-izuaam-0 lnAgdq">foo/node_modules/bar</code>.</p> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">This shortcut is only used if the exact same version would be installed in multiple nested <code class="code__InlineCode-sc-izuaam-0 lnAgdq">node_modules</code> folders. It is still possible to have <code class="code__InlineCode-sc-izuaam-0 lnAgdq">a/node_modules/b/node_modules/a</code> if the two "a" packages are different versions. However, without repeating the exact same package multiple times, an infinite regress will always be prevented.</p> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">Another optimization can be made by installing dependencies at the highest level possible, below the localized "target" folder (hoisting). Since version 3, npm hoists dependencies by default.</p> <h4 id="example" class="components__StyledHeading-sc-13rww2g-0 components__h4-sc-13rww2g-4 cZjJlu fUELCx components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#example" aria-label="Example permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ">Example</a></h4> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">Consider this dependency graph:</p> <div class="Box-sc-g0xbh4-0 eUKtPS"><div style="color:#393A34;background-color:#f6f8fa" class="Box-sc-g0xbh4-0 bdVWRk">
<div class="Box-sc-g0xbh4-0 kFQlqn"><pre class="Box-sc-g0xbh4-0 bfdbXb prism-code language-bash" tabindex="0" data-language="javascript">foo
+-- blerg@1.2.5
+-- bar@1.2.3
|   +-- blerg@1.x (latest=1.3.7)
|   +-- baz@2.x
|   |   `-- quux@3.x
|   |       `-- bar@1.2.3 (cycle)
|   `-- asdf@*
`-- baz@1.2.3
    `-- quux@3.x
        `-- bar</pre></div>
</div></div> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">In this case, we might expect a folder structure like this (with all dependencies hoisted to the highest level possible):</p> <div class="Box-sc-g0xbh4-0 eUKtPS"><div style="color:#393A34;background-color:#f6f8fa" class="Box-sc-g0xbh4-0 bdVWRk">
<div class="Box-sc-g0xbh4-0 kFQlqn"><pre class="Box-sc-g0xbh4-0 bfdbXb prism-code language-bash" tabindex="0" data-language="javascript">foo
+-- node_modules
    +-- blerg (1.2.5) &lt;---[A]
    +-- bar (1.2.3) &lt;---[B]
    |   +-- node_modules
    |       +-- baz (2.0.2) &lt;---[C]
    +-- asdf (2.3.4)
    +-- baz (1.2.3) &lt;---[D]
    +-- quux (3.2.0) &lt;---[E]</pre></div>
</div></div> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">Since foo depends directly on <code class="code__InlineCode-sc-izuaam-0 lnAgdq">bar@1.2.3</code> and <code class="code__InlineCode-sc-izuaam-0 lnAgdq">baz@1.2.3</code>, those are installed in foo's <code class="code__InlineCode-sc-izuaam-0 lnAgdq">node_modules</code> folder.</p> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">Even though the latest copy of blerg is 1.3.7, foo has a specific dependency on version 1.2.5. So, that gets installed at [A]. Since the parent installation of blerg satisfies bar's dependency on <code class="code__InlineCode-sc-izuaam-0 lnAgdq">blerg@1.x</code>, it does not install another copy under [B].</p> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">Bar [B] also has dependencies on baz and asdf. Because it depends on <code class="code__InlineCode-sc-izuaam-0 lnAgdq">baz@2.x</code>, it cannot re-use the <code class="code__InlineCode-sc-izuaam-0 lnAgdq">baz@1.2.3</code> installed in the parent <code class="code__InlineCode-sc-izuaam-0 lnAgdq">node_modules</code> folder [D], and must install its own copy [C]. In order to minimize duplication, npm hoists dependencies to the top level by default, so asdf is installed under [A].</p> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">Underneath bar, the <code class="code__InlineCode-sc-izuaam-0 lnAgdq">baz -&gt; quux -&gt; bar</code> dependency creates a cycle. However, because bar is already in quux's ancestry [B], it does not unpack another copy of bar into that folder. Likewise, quux's [E] folder tree is empty, because its dependency on bar is satisfied by the parent folder copy installed at [B].</p> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">For a graphical breakdown of what is installed where, use <code class="code__InlineCode-sc-izuaam-0 lnAgdq">npm ls</code>.</p> <h4 id="publishing" class="components__StyledHeading-sc-13rww2g-0 components__h4-sc-13rww2g-4 cZjJlu fUELCx components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#publishing" aria-label="Publishing permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ">Publishing</a></h4> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">Upon publishing, npm will look in the <code class="code__InlineCode-sc-izuaam-0 lnAgdq">node_modules</code> folder. If any of the items there are not in the <code class="code__InlineCode-sc-izuaam-0 lnAgdq">bundleDependencies</code> array, then they will not be included in the package tarball.</p> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">This allows a package maintainer to install all of their dependencies (and dev dependencies) locally, but only re-publish those items that cannot be found elsewhere. See <a class="Link__StyledLink-sc-14289xe-0 kIxRcv" href="package-json.html"><code class="code__InlineCode-sc-izuaam-0 lnAgdq">package.json</code></a> for more information.</p> <h3 id="see-also" class="components__StyledHeading-sc-13rww2g-0 components__h3-sc-13rww2g-3 cZjJlu Nafes components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#see-also" aria-label="See also permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ">See also</a></h3> <ul class="components__UnorderedList-sc-13rww2g-10 fqlkab"> <li><a class="Link__StyledLink-sc-14289xe-0 kIxRcv" href="package-json.html">package.json</a></li> <li><a class="Link__StyledLink-sc-14289xe-0 kIxRcv" href="../commands/npm-install.html">npm install</a></li> <li><a class="Link__StyledLink-sc-14289xe-0 kIxRcv" href="../commands/npm-pack.html">npm pack</a></li> <li><a class="Link__StyledLink-sc-14289xe-0 kIxRcv" href="../commands/npm-cache.html">npm cache</a></li> <li><a class="Link__StyledLink-sc-14289xe-0 kIxRcv" href="../commands/npm-config.html">npm config</a></li> <li><a class="Link__StyledLink-sc-14289xe-0 kIxRcv" href="npmrc.html">npmrc</a></li> <li><a class="Link__StyledLink-sc-14289xe-0 kIxRcv" href="../using-npm/config.html">config</a></li> <li><a class="Link__StyledLink-sc-14289xe-0 kIxRcv" href="../commands/npm-publish.html">npm publish</a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; npm, Inc. and Contributors<br>Licensed under the npm License.<br>npm is a trademark of npm, Inc.<br>
    <a href="https://docs.npmjs.com/cli/v10/configuring-npm/folders" class="_attribution-link">https://docs.npmjs.com/cli/v10/configuring-npm/folders</a>
  </p>
</div>
