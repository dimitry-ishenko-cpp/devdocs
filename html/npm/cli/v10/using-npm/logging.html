<div class="Box-sc-g0xbh4-0 goytIH">
<h1 class="components__StyledHeading-sc-13rww2g-0 components__h1-sc-13rww2g-1 cZjJlu jMmFmb components__StyledHeading-sc-13rww2g-0 cZjJlu">Logging</h1>
<div class="Box-sc-g0xbh4-0 iLGAbu">Why, What &amp; How We Log</div>
</div>


<h3 id="description" class="components__StyledHeading-sc-13rww2g-0 components__h3-sc-13rww2g-3 cZjJlu Nafes components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#description" aria-label="Description permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ">Description</a></h3> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">The <code class="code__InlineCode-sc-izuaam-0 lnAgdq">npm</code> CLI has various mechanisms for showing different levels of information back to end-users for certain commands, configurations &amp; environments.</p> <h3 id="setting-log-file-location" class="components__StyledHeading-sc-13rww2g-0 components__h3-sc-13rww2g-3 cZjJlu Nafes components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#setting-log-file-location" aria-label="Setting Log File Location permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ">Setting Log File Location</a></h3> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">All logs are written to a debug log, with the path to that file printed if the execution of a command fails.</p> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">The default location of the logs directory is a directory named <code class="code__InlineCode-sc-izuaam-0 lnAgdq">_logs</code> inside the npm cache. This can be changed with the <code class="code__InlineCode-sc-izuaam-0 lnAgdq">logs-dir</code> config option.</p> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">For example, if you wanted to write all your logs to the current working directory, you could run: <code class="code__InlineCode-sc-izuaam-0 lnAgdq">npm install --logs-dir=.</code>. This is especially helpful in debugging a specific <code class="code__InlineCode-sc-izuaam-0 lnAgdq">npm</code> issue as you can run a command multiple times with different config values and then diff all the log files.</p> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">Log files will be removed from the <code class="code__InlineCode-sc-izuaam-0 lnAgdq">logs-dir</code> when the number of log files exceeds <code class="code__InlineCode-sc-izuaam-0 lnAgdq">logs-max</code>, with the oldest logs being deleted first.</p> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">To turn off logs completely set <code class="code__InlineCode-sc-izuaam-0 lnAgdq">--logs-max=0</code>.</p> <h3 id="setting-log-levels" class="components__StyledHeading-sc-13rww2g-0 components__h3-sc-13rww2g-3 cZjJlu Nafes components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#setting-log-levels" aria-label="Setting Log Levels permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ">Setting Log Levels</a></h3> <h4 id="loglevel" class="components__StyledHeading-sc-13rww2g-0 components__h4-sc-13rww2g-4 cZjJlu fUELCx components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#loglevel" aria-label="loglevel permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ"><code class="code__InlineCode-sc-izuaam-0 lnAgdq">loglevel</code></a></h4> <p class="components__Paragraph-sc-13rww2g-11 cevAMF"><code class="code__InlineCode-sc-izuaam-0 lnAgdq">loglevel</code> is a global argument/config that can be set to determine the type of information to be displayed.</p> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">The default value of <code class="code__InlineCode-sc-izuaam-0 lnAgdq">loglevel</code> is <code class="code__InlineCode-sc-izuaam-0 lnAgdq">"notice"</code> but there are several levels/types of logs available, including:</p> <ul class="components__UnorderedList-sc-13rww2g-10 fqlkab"> <li><code class="code__InlineCode-sc-izuaam-0 lnAgdq">"silent"</code></li> <li><code class="code__InlineCode-sc-izuaam-0 lnAgdq">"error"</code></li> <li><code class="code__InlineCode-sc-izuaam-0 lnAgdq">"warn"</code></li> <li><code class="code__InlineCode-sc-izuaam-0 lnAgdq">"notice"</code></li> <li><code class="code__InlineCode-sc-izuaam-0 lnAgdq">"http"</code></li> <li><code class="code__InlineCode-sc-izuaam-0 lnAgdq">"info"</code></li> <li><code class="code__InlineCode-sc-izuaam-0 lnAgdq">"verbose"</code></li> <li><code class="code__InlineCode-sc-izuaam-0 lnAgdq">"silly"</code></li> </ul> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">All logs pertaining to a level proceeding the current setting will be shown.</p> <h5 id="aliases" class="components__StyledHeading-sc-13rww2g-0 components__h5-sc-13rww2g-5 cZjJlu iILySJ components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#aliases" aria-label="Aliases permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ">Aliases</a></h5> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">The log levels listed above have various corresponding aliases, including:</p> <ul class="components__UnorderedList-sc-13rww2g-10 fqlkab"> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">-d</code>: <code class="code__InlineCode-sc-izuaam-0 lnAgdq">--loglevel info</code>
</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">--dd</code>: <code class="code__InlineCode-sc-izuaam-0 lnAgdq">--loglevel verbose</code>
</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">--verbose</code>: <code class="code__InlineCode-sc-izuaam-0 lnAgdq">--loglevel verbose</code>
</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">--ddd</code>: <code class="code__InlineCode-sc-izuaam-0 lnAgdq">--loglevel silly</code>
</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">-q</code>: <code class="code__InlineCode-sc-izuaam-0 lnAgdq">--loglevel warn</code>
</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">--quiet</code>: <code class="code__InlineCode-sc-izuaam-0 lnAgdq">--loglevel warn</code>
</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">-s</code>: <code class="code__InlineCode-sc-izuaam-0 lnAgdq">--loglevel silent</code>
</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">--silent</code>: <code class="code__InlineCode-sc-izuaam-0 lnAgdq">--loglevel silent</code>
</li> </ul> <h4 id="foreground-scripts" class="components__StyledHeading-sc-13rww2g-0 components__h4-sc-13rww2g-4 cZjJlu fUELCx components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#foreground-scripts" aria-label="foreground-scripts permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ"><code class="code__InlineCode-sc-izuaam-0 lnAgdq">foreground-scripts</code></a></h4> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">The <code class="code__InlineCode-sc-izuaam-0 lnAgdq">npm</code> CLI began hiding the output of lifecycle scripts for <code class="code__InlineCode-sc-izuaam-0 lnAgdq">npm install</code> as of <code class="code__InlineCode-sc-izuaam-0 lnAgdq">v7</code>. Notably, this means you will not see logs/output from packages that may be using "install scripts" to display information back to you or from your own project's scripts defined in <code class="code__InlineCode-sc-izuaam-0 lnAgdq">package.json</code>. If you'd like to change this behavior &amp; log this output you can set <code class="code__InlineCode-sc-izuaam-0 lnAgdq">foreground-scripts</code> to <code class="code__InlineCode-sc-izuaam-0 lnAgdq">true</code>.</p> <h3 id="timing-information" class="components__StyledHeading-sc-13rww2g-0 components__h3-sc-13rww2g-3 cZjJlu Nafes components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#timing-information" aria-label="Timing Information permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ">Timing Information</a></h3> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">The <a class="Link__StyledLink-sc-14289xe-0 kIxRcv" href="config.html#timing"><code class="code__InlineCode-sc-izuaam-0 lnAgdq">--timing</code> config</a> can be set which does a few things:</p> <ol class="components__UnorderedList-sc-13rww2g-10-ol cjGnIx"> <li>Always shows the full path to the debug log regardless of command exit status</li> <li>Write timing information to a process specific timing file in the cache or <code class="code__InlineCode-sc-izuaam-0 lnAgdq">logs-dir</code>
</li> <li>Output timing information to the terminal</li> </ol> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">This file contains a <code class="code__InlineCode-sc-izuaam-0 lnAgdq">timers</code> object where the keys are an identifier for the portion of the process being timed and the value is the number of milliseconds it took to complete.</p> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">Sometimes it is helpful to get timing information without outputting anything to the terminal. For example, the performance might be affected by writing to the terminal. In this case you can use <code class="code__InlineCode-sc-izuaam-0 lnAgdq">--timing --silent</code> which will still write the timing file, but not output anything to the terminal while running.</p> <h3 id="registry-response-headers" class="components__StyledHeading-sc-13rww2g-0 components__h3-sc-13rww2g-3 cZjJlu Nafes components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#registry-response-headers" aria-label="Registry Response Headers permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ">Registry Response Headers</a></h3> <h4 id="npm-notice" class="components__StyledHeading-sc-13rww2g-0 components__h4-sc-13rww2g-4 cZjJlu fUELCx components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#npm-notice" aria-label="npm-notice permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ"><code class="code__InlineCode-sc-izuaam-0 lnAgdq">npm-notice</code></a></h4> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">The <code class="code__InlineCode-sc-izuaam-0 lnAgdq">npm</code> CLI reads from &amp; logs any <code class="code__InlineCode-sc-izuaam-0 lnAgdq">npm-notice</code> headers that are returned from the configured registry. This mechanism can be used by third-party registries to provide useful information when network-dependent requests occur.</p> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">This header is not cached, and will not be logged if the request is served from the cache.</p> <h3 id="logs-and-sensitive-information" class="components__StyledHeading-sc-13rww2g-0 components__h3-sc-13rww2g-3 cZjJlu Nafes components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#logs-and-sensitive-information" aria-label="Logs and Sensitive Information permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ">Logs and Sensitive Information</a></h3> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">The <code class="code__InlineCode-sc-izuaam-0 lnAgdq">npm</code> CLI makes a best effort to redact the following from terminal output and log files:</p> <ul class="components__UnorderedList-sc-13rww2g-10 fqlkab"> <li>Passwords inside basic auth URLs</li> <li>npm tokens</li> </ul> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">However, this behavior should not be relied on to keep all possible sensitive information redacted. If you are concerned about secrets in your log file or terminal output, you can use <code class="code__InlineCode-sc-izuaam-0 lnAgdq">--loglevel=silent</code> and <code class="code__InlineCode-sc-izuaam-0 lnAgdq">--logs-max=0</code> to ensure no logs are written to your terminal or filesystem.</p> <h3 id="see-also" class="components__StyledHeading-sc-13rww2g-0 components__h3-sc-13rww2g-3 cZjJlu Nafes components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#see-also" aria-label="See also permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ">See also</a></h3> <ul class="components__UnorderedList-sc-13rww2g-10 fqlkab"> <li><a class="Link__StyledLink-sc-14289xe-0 kIxRcv" href="config.html">config</a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; npm, Inc. and Contributors<br>Licensed under the npm License.<br>npm is a trademark of npm, Inc.<br>
    <a href="https://docs.npmjs.com/cli/v10/using-npm/logging" class="_attribution-link">https://docs.npmjs.com/cli/v10/using-npm/logging</a>
  </p>
</div>
