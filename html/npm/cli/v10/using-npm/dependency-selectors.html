<div class="Box-sc-g0xbh4-0 goytIH">
<h1 class="components__StyledHeading-sc-13rww2g-0 components__h1-sc-13rww2g-1 cZjJlu jMmFmb components__StyledHeading-sc-13rww2g-0 cZjJlu">Dependency Selector Syntax &amp; Querying</h1>
<div class="Box-sc-g0xbh4-0 iLGAbu">Dependency Selector Syntax &amp; Querying</div>
</div>


<h3 id="description" class="components__StyledHeading-sc-13rww2g-0 components__h3-sc-13rww2g-3 cZjJlu Nafes components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#description" aria-label="Description permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ">Description</a></h3> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">The <a class="Link__StyledLink-sc-14289xe-0 kIxRcv" href="../commands/npm-query.html"><code class="code__InlineCode-sc-izuaam-0 lnAgdq">npm query</code></a> command exposes a new dependency selector syntax (informed by &amp; respecting many aspects of the <a href="https://dev.w3.org/csswg/selectors4/#relational" class="Link__StyledLink-sc-14289xe-0 kIxRcv">CSS Selectors 4 Spec</a>) which:</p> <ul class="components__UnorderedList-sc-13rww2g-10 fqlkab"> <li>Standardizes the shape of, &amp; querying of, dependency graphs with a robust object model, metadata &amp; selector syntax</li> <li>Leverages existing, known language syntax &amp; operators from CSS to make disparate package information broadly accessible</li> <li>Unlocks the ability to answer complex, multi-faceted questions about dependencies, their relationships &amp; associative metadata</li> <li>Consolidates redundant logic of similar query commands in <code class="code__InlineCode-sc-izuaam-0 lnAgdq">npm</code> (ex. <code class="code__InlineCode-sc-izuaam-0 lnAgdq">npm fund</code>, <code class="code__InlineCode-sc-izuaam-0 lnAgdq">npm ls</code>, <code class="code__InlineCode-sc-izuaam-0 lnAgdq">npm outdated</code>, <code class="code__InlineCode-sc-izuaam-0 lnAgdq">npm audit</code> ...)</li> </ul> <h3 id="dependency-selector-syntax-v100" class="components__StyledHeading-sc-13rww2g-0 components__h3-sc-13rww2g-3 cZjJlu Nafes components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#dependency-selector-syntax-v100" aria-label="Dependency Selector Syntax v1.0.0 permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ">Dependency Selector Syntax <code class="code__InlineCode-sc-izuaam-0 lnAgdq">v1.0.0</code></a></h3> <h4 id="overview" class="components__StyledHeading-sc-13rww2g-0 components__h4-sc-13rww2g-4 cZjJlu fUELCx components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#overview" aria-label="Overview: permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ">Overview:</a></h4> <ul class="components__UnorderedList-sc-13rww2g-10 fqlkab"> <li>there is no "type" or "tag" selectors (ex. <code class="code__InlineCode-sc-izuaam-0 lnAgdq">div, h1, a</code>) as a dependency/target is the only type of <code class="code__InlineCode-sc-izuaam-0 lnAgdq">Node</code> that can be queried</li> <li>the term "dependencies" is in reference to any <code class="code__InlineCode-sc-izuaam-0 lnAgdq">Node</code> found in a <code class="code__InlineCode-sc-izuaam-0 lnAgdq">tree</code> returned by <code class="code__InlineCode-sc-izuaam-0 lnAgdq">Arborist</code>
</li> </ul> <h4 id="combinators" class="components__StyledHeading-sc-13rww2g-0 components__h4-sc-13rww2g-4 cZjJlu fUELCx components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#combinators" aria-label="Combinators permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ">Combinators</a></h4> <ul class="components__UnorderedList-sc-13rww2g-10 fqlkab"> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">&gt;</code> direct descendant/child</li> <li>
 any descendant/child</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">~</code> sibling</li> </ul> <h4 id="selectors" class="components__StyledHeading-sc-13rww2g-0 components__h4-sc-13rww2g-4 cZjJlu fUELCx components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#selectors" aria-label="Selectors permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ">Selectors</a></h4> <ul class="components__UnorderedList-sc-13rww2g-10 fqlkab"> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">*</code> universal selector</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">#&lt;name&gt;</code> dependency selector (equivalent to <code class="code__InlineCode-sc-izuaam-0 lnAgdq">[name="..."]</code>)</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">#&lt;name&gt;@&lt;version&gt;</code> (equivalent to <code class="code__InlineCode-sc-izuaam-0 lnAgdq">[name=&lt;name&gt;]:semver(&lt;version&gt;)</code>)</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">,</code> selector list delimiter</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">.</code> dependency type selector</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">:</code> pseudo selector</li> </ul> <h4 id="dependency-type-selectors" class="components__StyledHeading-sc-13rww2g-0 components__h4-sc-13rww2g-4 cZjJlu fUELCx components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#dependency-type-selectors" aria-label="Dependency Type Selectors permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ">Dependency Type Selectors</a></h4> <ul class="components__UnorderedList-sc-13rww2g-10 fqlkab"> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">.prod</code> dependency found in the <code class="code__InlineCode-sc-izuaam-0 lnAgdq">dependencies</code> section of <code class="code__InlineCode-sc-izuaam-0 lnAgdq">package.json</code>, or is a child of said dependency</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">.dev</code> dependency found in the <code class="code__InlineCode-sc-izuaam-0 lnAgdq">devDependencies</code> section of <code class="code__InlineCode-sc-izuaam-0 lnAgdq">package.json</code>, or is a child of said dependency</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">.optional</code> dependency found in the <code class="code__InlineCode-sc-izuaam-0 lnAgdq">optionalDependencies</code> section of <code class="code__InlineCode-sc-izuaam-0 lnAgdq">package.json</code>, or has <code class="code__InlineCode-sc-izuaam-0 lnAgdq">"optional": true</code> set in its entry in the <code class="code__InlineCode-sc-izuaam-0 lnAgdq">peerDependenciesMeta</code> section of <code class="code__InlineCode-sc-izuaam-0 lnAgdq">package.json</code>, or a child of said dependency</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">.peer</code> dependency found in the <code class="code__InlineCode-sc-izuaam-0 lnAgdq">peerDependencies</code> section of <code class="code__InlineCode-sc-izuaam-0 lnAgdq">package.json</code>
</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">.workspace</code> dependency found in the <a class="Link__StyledLink-sc-14289xe-0 kIxRcv" href="https://docs.npmjs.com/cli/v8/using-npm/workspaces"><code class="code__InlineCode-sc-izuaam-0 lnAgdq">workspaces</code></a> section of <code class="code__InlineCode-sc-izuaam-0 lnAgdq">package.json</code>
</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">.bundled</code> dependency found in the <code class="code__InlineCode-sc-izuaam-0 lnAgdq">bundleDependencies</code> section of <code class="code__InlineCode-sc-izuaam-0 lnAgdq">package.json</code>, or is a child of said dependency</li> </ul> <h4 id="pseudo-selectors" class="components__StyledHeading-sc-13rww2g-0 components__h4-sc-13rww2g-4 cZjJlu fUELCx components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#pseudo-selectors" aria-label="Pseudo Selectors permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ">Pseudo Selectors</a></h4> <ul class="components__UnorderedList-sc-13rww2g-10 fqlkab"> <li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:not" class="Link__StyledLink-sc-14289xe-0 kIxRcv"><code class="code__InlineCode-sc-izuaam-0 lnAgdq">:not(&lt;selector&gt;)</code></a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:has" class="Link__StyledLink-sc-14289xe-0 kIxRcv"><code class="code__InlineCode-sc-izuaam-0 lnAgdq">:has(&lt;selector&gt;)</code></a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:is" class="Link__StyledLink-sc-14289xe-0 kIxRcv"><code class="code__InlineCode-sc-izuaam-0 lnAgdq">:is(&lt;selector list&gt;)</code></a></li> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:root" class="Link__StyledLink-sc-14289xe-0 kIxRcv"><code class="code__InlineCode-sc-izuaam-0 lnAgdq">:root</code></a> matches the root node/dependency</li> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:scope" class="Link__StyledLink-sc-14289xe-0 kIxRcv"><code class="code__InlineCode-sc-izuaam-0 lnAgdq">:scope</code></a> matches node/dependency it was queried against</li> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:empty" class="Link__StyledLink-sc-14289xe-0 kIxRcv"><code class="code__InlineCode-sc-izuaam-0 lnAgdq">:empty</code></a> when a dependency has no dependencies</li> <li>
<a class="Link__StyledLink-sc-14289xe-0 kIxRcv" href="https://docs.npmjs.com/cli/v8/configuring-npm/package-json#private"><code class="code__InlineCode-sc-izuaam-0 lnAgdq">:private</code></a> when a dependency is private</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">:link</code> when a dependency is linked (for instance, workspaces or packages manually <a class="Link__StyledLink-sc-14289xe-0 kIxRcv" href="https://docs.npmjs.com/cli/v8/commands/npm-link"><code class="code__InlineCode-sc-izuaam-0 lnAgdq">linked</code></a>
</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">:deduped</code> when a dependency has been deduped (note that this does <em>not</em> always mean the dependency has been hoisted to the root of node_modules)</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">:overridden</code> when a dependency has been overridden</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">:extraneous</code> when a dependency exists but is not defined as a dependency of any node</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">:invalid</code> when a dependency version is out of its ancestors specified range</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">:missing</code> when a dependency is not found on disk</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">:semver(&lt;spec&gt;, [selector], [function])</code> match a valid <a href="https://github.com/npm/node-semver" class="Link__StyledLink-sc-14289xe-0 kIxRcv"><code class="code__InlineCode-sc-izuaam-0 lnAgdq">node-semver</code></a> version or range to a selector</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">:path(&lt;path&gt;)</code> <a href="https://www.npmjs.com/package/glob" class="Link__StyledLink-sc-14289xe-0 kIxRcv">glob</a> matching based on dependencies path relative to the project</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">:type(&lt;type&gt;)</code> <a href="https://github.com/npm/npm-package-arg#result-object" class="Link__StyledLink-sc-14289xe-0 kIxRcv">based on currently recognized types</a>
</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">:outdated(&lt;type&gt;)</code> when a dependency is outdated</li> </ul> <h5 id="semverspec-selector-function" class="components__StyledHeading-sc-13rww2g-0 components__h5-sc-13rww2g-5 cZjJlu iILySJ components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#semverspec-selector-function" aria-label=":semver(&lt;spec&gt;, [selector], [function]) permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ"><code class="code__InlineCode-sc-izuaam-0 lnAgdq">:semver(&lt;spec&gt;, [selector], [function])</code></a></h5> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">The <code class="code__InlineCode-sc-izuaam-0 lnAgdq">:semver()</code> pseudo selector allows comparing fields from each node's <code class="code__InlineCode-sc-izuaam-0 lnAgdq">package.json</code> using <a href="https://github.com/npm/node-semver#readme" class="Link__StyledLink-sc-14289xe-0 kIxRcv">semver</a> methods. It accepts up to 3 parameters, all but the first of which are optional.</p> <ul class="components__UnorderedList-sc-13rww2g-10 fqlkab"> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">spec</code> a semver version or range</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">selector</code> an attribute selector for each node (default <code class="code__InlineCode-sc-izuaam-0 lnAgdq">[version]</code>)</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">function</code> a semver method to apply, one of: <code class="code__InlineCode-sc-izuaam-0 lnAgdq">satisfies</code>, <code class="code__InlineCode-sc-izuaam-0 lnAgdq">intersects</code>, <code class="code__InlineCode-sc-izuaam-0 lnAgdq">subset</code>, <code class="code__InlineCode-sc-izuaam-0 lnAgdq">gt</code>, <code class="code__InlineCode-sc-izuaam-0 lnAgdq">gte</code>, <code class="code__InlineCode-sc-izuaam-0 lnAgdq">gtr</code>, <code class="code__InlineCode-sc-izuaam-0 lnAgdq">lt</code>, <code class="code__InlineCode-sc-izuaam-0 lnAgdq">lte</code>, <code class="code__InlineCode-sc-izuaam-0 lnAgdq">ltr</code>, <code class="code__InlineCode-sc-izuaam-0 lnAgdq">eq</code>, <code class="code__InlineCode-sc-izuaam-0 lnAgdq">neq</code> or the special function <code class="code__InlineCode-sc-izuaam-0 lnAgdq">infer</code> (default <code class="code__InlineCode-sc-izuaam-0 lnAgdq">infer</code>)</li> </ul> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">When the special <code class="code__InlineCode-sc-izuaam-0 lnAgdq">infer</code> function is used the <code class="code__InlineCode-sc-izuaam-0 lnAgdq">spec</code> and the actual value from the node are compared. If both are versions, according to <code class="code__InlineCode-sc-izuaam-0 lnAgdq">semver.valid()</code>, <code class="code__InlineCode-sc-izuaam-0 lnAgdq">eq</code> is used. If both values are ranges, according to <code class="code__InlineCode-sc-izuaam-0 lnAgdq">!semver.valid()</code>, <code class="code__InlineCode-sc-izuaam-0 lnAgdq">intersects</code> is used. If the values are mixed types <code class="code__InlineCode-sc-izuaam-0 lnAgdq">satisfies</code> is used.</p> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">Some examples:</p> <ul class="components__UnorderedList-sc-13rww2g-10 fqlkab"> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">:semver(^1.0.0)</code> returns every node that has a <code class="code__InlineCode-sc-izuaam-0 lnAgdq">version</code> satisfied by the provided range <code class="code__InlineCode-sc-izuaam-0 lnAgdq">^1.0.0</code>
</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">:semver(16.0.0, :attr(engines, [node]))</code> returns every node which has an <code class="code__InlineCode-sc-izuaam-0 lnAgdq">engines.node</code> property satisfying the version <code class="code__InlineCode-sc-izuaam-0 lnAgdq">16.0.0</code>
</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">:semver(1.0.0, [version], lt)</code> every node with a <code class="code__InlineCode-sc-izuaam-0 lnAgdq">version</code> less than <code class="code__InlineCode-sc-izuaam-0 lnAgdq">1.0.0</code>
</li> </ul> <h5 id="outdatedtype" class="components__StyledHeading-sc-13rww2g-0 components__h5-sc-13rww2g-5 cZjJlu iILySJ components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#outdatedtype" aria-label=":outdated(&lt;type&gt;) permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ"><code class="code__InlineCode-sc-izuaam-0 lnAgdq">:outdated(&lt;type&gt;)</code></a></h5> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">The <code class="code__InlineCode-sc-izuaam-0 lnAgdq">:outdated</code> pseudo selector retrieves data from the registry and returns information about which of your dependencies are outdated. The type parameter may be one of the following:</p> <ul class="components__UnorderedList-sc-13rww2g-10 fqlkab"> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">any</code> (default) a version exists that is greater than the current one</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">in-range</code> a version exists that is greater than the current one, and satisfies at least one if its dependents</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">out-of-range</code> a version exists that is greater than the current one, does not satisfy at least one of its dependents</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">major</code> a version exists that is a semver major greater than the current one</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">minor</code> a version exists that is a semver minor greater than the current one</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">patch</code> a version exists that is a semver patch greater than the current one</li> </ul> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">In addition to the filtering performed by the pseudo selector, some extra data is added to the resulting objects. The following data can be found under the <code class="code__InlineCode-sc-izuaam-0 lnAgdq">queryContext</code> property of each node.</p> <ul class="components__UnorderedList-sc-13rww2g-10 fqlkab"> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">versions</code> an array of every available version of the given node</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">outdated.inRange</code> an array of objects, each with a <code class="code__InlineCode-sc-izuaam-0 lnAgdq">from</code> and <code class="code__InlineCode-sc-izuaam-0 lnAgdq">versions</code>, where <code class="code__InlineCode-sc-izuaam-0 lnAgdq">from</code> is the on-disk location of the node that depends on the current node and <code class="code__InlineCode-sc-izuaam-0 lnAgdq">versions</code> is an array of all available versions that satisfies that dependency. This is only populated if <code class="code__InlineCode-sc-izuaam-0 lnAgdq">:outdated(in-range)</code> is used.</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">outdated.outOfRange</code> an array of objects, identical in shape to <code class="code__InlineCode-sc-izuaam-0 lnAgdq">inRange</code>, but where the <code class="code__InlineCode-sc-izuaam-0 lnAgdq">versions</code> array is every available version that does not satisfy the dependency. This is only populated if <code class="code__InlineCode-sc-izuaam-0 lnAgdq">:outdated(out-of-range)</code> is used.</li> </ul> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">Some examples:</p> <ul class="components__UnorderedList-sc-13rww2g-10 fqlkab"> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">:root &gt; :outdated(major)</code> returns every direct dependency that has a new semver major release</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">.prod:outdated(in-range)</code> returns production dependencies that have a new release that satisfies at least one of its edges in</li> </ul> <h4 id="attribute-selectors" class="components__StyledHeading-sc-13rww2g-0 components__h4-sc-13rww2g-4 cZjJlu fUELCx components__StyledHeading-sc-13rww2g-0 cZjJlu">
<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Attribute_selectors" class="Link__StyledLink-sc-14289xe-0 kIxRcv">Attribute Selectors</a>
</h4> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">The attribute selector evaluates the key/value pairs in <code class="code__InlineCode-sc-izuaam-0 lnAgdq">package.json</code> if they are <code class="code__InlineCode-sc-izuaam-0 lnAgdq">String</code>s.</p> <ul class="components__UnorderedList-sc-13rww2g-10 fqlkab"> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">[]</code> attribute selector (ie. existence of attribute)</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">[attribute=value]</code> attribute value is equivalant...</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">[attribute~=value]</code> attribute value contains word...</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">[attribute*=value]</code> attribute value contains string...</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">[attribute|=value]</code> attribute value is equal to or starts with...</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">[attribute^=value]</code> attribute value starts with...</li> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">[attribute$=value]</code> attribute value ends with...</li> </ul> <h4 id="array--object-attribute-selectors" class="components__StyledHeading-sc-13rww2g-0 components__h4-sc-13rww2g-4 cZjJlu fUELCx components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#array--object-attribute-selectors" aria-label="Array &amp; Object Attribute Selectors permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ"><code class="code__InlineCode-sc-izuaam-0 lnAgdq">Array</code> &amp; <code class="code__InlineCode-sc-izuaam-0 lnAgdq">Object</code> Attribute Selectors</a></h4> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">The generic <code class="code__InlineCode-sc-izuaam-0 lnAgdq">:attr()</code> pseudo selector standardizes a pattern which can be used for attribute selection of <code class="code__InlineCode-sc-izuaam-0 lnAgdq">Object</code>s, <code class="code__InlineCode-sc-izuaam-0 lnAgdq">Array</code>s or <code class="code__InlineCode-sc-izuaam-0 lnAgdq">Arrays</code> of <code class="code__InlineCode-sc-izuaam-0 lnAgdq">Object</code>s accessible via <code class="code__InlineCode-sc-izuaam-0 lnAgdq">Arborist</code>'s <code class="code__InlineCode-sc-izuaam-0 lnAgdq">Node.package</code> metadata. This allows for iterative attribute selection beyond top-level <code class="code__InlineCode-sc-izuaam-0 lnAgdq">String</code> evaluation. The last argument passed to <code class="code__InlineCode-sc-izuaam-0 lnAgdq">:attr()</code> must be an <code class="code__InlineCode-sc-izuaam-0 lnAgdq">attribute</code> selector or a nested <code class="code__InlineCode-sc-izuaam-0 lnAgdq">:attr()</code>. See examples below:</p> <h4 id="objects" class="components__StyledHeading-sc-13rww2g-0 components__h4-sc-13rww2g-4 cZjJlu fUELCx components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#objects" aria-label="Objects permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ"><code class="code__InlineCode-sc-izuaam-0 lnAgdq">Objects</code></a></h4> <div class="Box-sc-g0xbh4-0 eUKtPS"><div style="color:#393A34;background-color:#f6f8fa" class="Box-sc-g0xbh4-0 bdVWRk">
<div class="Box-sc-g0xbh4-0 kFQlqn"><pre class="Box-sc-g0xbh4-0 bfdbXb prism-code language-css" tabindex="0" data-language="javascript">/* return dependencies that have a `scripts.test` containing `"tap"` */
*: attr(scripts, [test~=tap]);</pre></div>
</div></div> <h4 id="nested-objects" class="components__StyledHeading-sc-13rww2g-0 components__h4-sc-13rww2g-4 cZjJlu fUELCx components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#nested-objects" aria-label="Nested Objects permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ">Nested <code class="code__InlineCode-sc-izuaam-0 lnAgdq">Objects</code></a></h4> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">Nested objects are expressed as sequential arguments to <code class="code__InlineCode-sc-izuaam-0 lnAgdq">:attr()</code>.</p> <div class="Box-sc-g0xbh4-0 eUKtPS"><div style="color:#393A34;background-color:#f6f8fa" class="Box-sc-g0xbh4-0 bdVWRk">
<div class="Box-sc-g0xbh4-0 kFQlqn"><pre class="Box-sc-g0xbh4-0 bfdbXb prism-code language-css" tabindex="0" data-language="javascript">/* return dependencies that have a testling config for opera browsers */
*: attr(testling, browsers, [~=opera]);</pre></div>
</div></div> <h4 id="arrays" class="components__StyledHeading-sc-13rww2g-0 components__h4-sc-13rww2g-4 cZjJlu fUELCx components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#arrays" aria-label="Arrays permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ"><code class="code__InlineCode-sc-izuaam-0 lnAgdq">Arrays</code></a></h4> <p class="components__Paragraph-sc-13rww2g-11 cevAMF"><code class="code__InlineCode-sc-izuaam-0 lnAgdq">Array</code>s specifically uses a special/reserved <code class="code__InlineCode-sc-izuaam-0 lnAgdq">.</code> character in place of a typical attribute name. <code class="code__InlineCode-sc-izuaam-0 lnAgdq">Arrays</code> also support exact <code class="code__InlineCode-sc-izuaam-0 lnAgdq">value</code> matching when a <code class="code__InlineCode-sc-izuaam-0 lnAgdq">String</code> is passed to the selector.</p> <h5 id="example-of-an-array-attribute-selection" class="components__StyledHeading-sc-13rww2g-0 components__h5-sc-13rww2g-5 cZjJlu iILySJ components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#example-of-an-array-attribute-selection" aria-label="Example of an Array Attribute Selection: permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ">Example of an <code class="code__InlineCode-sc-izuaam-0 lnAgdq">Array</code> Attribute Selection:</a></h5> <div class="Box-sc-g0xbh4-0 eUKtPS"><div style="color:#393A34;background-color:#f6f8fa" class="Box-sc-g0xbh4-0 bdVWRk">
<div class="Box-sc-g0xbh4-0 kFQlqn"><pre class="Box-sc-g0xbh4-0 bfdbXb prism-code language-css" tabindex="0" data-language="javascript">/* removes the distinction between properties &amp; arrays */
/* ie. we'd have to check the property &amp; iterate to match selection */
*:attr([keywords^=react])
*:attr(contributors, :attr([name~=Jordan]))</pre></div>
</div></div> <h5 id="example-of-an-array-matching-directly-to-a-value" class="components__StyledHeading-sc-13rww2g-0 components__h5-sc-13rww2g-5 cZjJlu iILySJ components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#example-of-an-array-matching-directly-to-a-value" aria-label="Example of an Array matching directly to a value: permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ">Example of an <code class="code__InlineCode-sc-izuaam-0 lnAgdq">Array</code> matching directly to a value:</a></h5> <div class="Box-sc-g0xbh4-0 eUKtPS"><div style="color:#393A34;background-color:#f6f8fa" class="Box-sc-g0xbh4-0 bdVWRk">
<div class="Box-sc-g0xbh4-0 kFQlqn"><pre class="Box-sc-g0xbh4-0 bfdbXb prism-code language-css" tabindex="0" data-language="javascript">/* return dependencies that have the exact keyword "react" */
/* this is equivalent to `*:keywords([value="react"])` */
*: attr([keywords=react]);</pre></div>
</div></div> <h5 id="example-of-an-array-of-objects" class="components__StyledHeading-sc-13rww2g-0 components__h5-sc-13rww2g-5 cZjJlu iILySJ components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#example-of-an-array-of-objects" aria-label="Example of an Array of Objects: permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ">Example of an <code class="code__InlineCode-sc-izuaam-0 lnAgdq">Array</code> of <code class="code__InlineCode-sc-izuaam-0 lnAgdq">Object</code>s:</a></h5> <div class="Box-sc-g0xbh4-0 eUKtPS"><div style="color:#393A34;background-color:#f6f8fa" class="Box-sc-g0xbh4-0 bdVWRk">
<div class="Box-sc-g0xbh4-0 kFQlqn"><pre class="Box-sc-g0xbh4-0 bfdbXb prism-code language-css" tabindex="0" data-language="javascript">/* returns */
*: attr(contributors, [email=ruyadorno @github.com]);</pre></div>
</div></div> <h3 id="groups" class="components__StyledHeading-sc-13rww2g-0 components__h3-sc-13rww2g-3 cZjJlu Nafes components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#groups" aria-label="Groups permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ">Groups</a></h3> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">Dependency groups are defined by the package relationships to their ancestors (ie. the dependency types that are defined in <code class="code__InlineCode-sc-izuaam-0 lnAgdq">package.json</code>). This approach is user-centric as the ecosystem has been taught to think about dependencies in these groups first-and-foremost. Dependencies are allowed to be included in multiple groups (ex. a <code class="code__InlineCode-sc-izuaam-0 lnAgdq">prod</code> dependency may also be a <code class="code__InlineCode-sc-izuaam-0 lnAgdq">dev</code> dependency (in that it's also required by another <code class="code__InlineCode-sc-izuaam-0 lnAgdq">dev</code> dependency) &amp; may also be <code class="code__InlineCode-sc-izuaam-0 lnAgdq">bundled</code> - a selector for that type of dependency would look like: <code class="code__InlineCode-sc-izuaam-0 lnAgdq">*.prod.dev.bundled</code>).</p> <ul class="components__UnorderedList-sc-13rww2g-10 fqlkab"> <li><code class="code__InlineCode-sc-izuaam-0 lnAgdq">.prod</code></li> <li><code class="code__InlineCode-sc-izuaam-0 lnAgdq">.dev</code></li> <li><code class="code__InlineCode-sc-izuaam-0 lnAgdq">.optional</code></li> <li><code class="code__InlineCode-sc-izuaam-0 lnAgdq">.peer</code></li> <li><code class="code__InlineCode-sc-izuaam-0 lnAgdq">.bundled</code></li> <li><code class="code__InlineCode-sc-izuaam-0 lnAgdq">.workspace</code></li> </ul> <p class="components__Paragraph-sc-13rww2g-11 cevAMF">Please note that currently <code class="code__InlineCode-sc-izuaam-0 lnAgdq">workspace</code> deps are always <code class="code__InlineCode-sc-izuaam-0 lnAgdq">prod</code> dependencies. Additionally the <code class="code__InlineCode-sc-izuaam-0 lnAgdq">.root</code> dependency is also considered a <code class="code__InlineCode-sc-izuaam-0 lnAgdq">prod</code> dependency.</p> <h3 id="programmatic-usage" class="components__StyledHeading-sc-13rww2g-0 components__h3-sc-13rww2g-3 cZjJlu Nafes components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#programmatic-usage" aria-label="Programmatic Usage permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ">Programmatic Usage</a></h3> <ul class="components__UnorderedList-sc-13rww2g-10 fqlkab"> <li>
<code class="code__InlineCode-sc-izuaam-0 lnAgdq">Arborist</code>'s <code class="code__InlineCode-sc-izuaam-0 lnAgdq">Node</code> Class has a <code class="code__InlineCode-sc-izuaam-0 lnAgdq">.querySelectorAll()</code> method <ul class="components__UnorderedList-sc-13rww2g-10 fqlkab"> <li>this method will return a filtered, flattened dependency Arborist <code class="code__InlineCode-sc-izuaam-0 lnAgdq">Node</code> list based on a valid query selector</li> </ul> </li> </ul> <div class="Box-sc-g0xbh4-0 eUKtPS"><div style="color:#393A34;background-color:#f6f8fa" class="Box-sc-g0xbh4-0 bdVWRk">
<div class="Box-sc-g0xbh4-0 kFQlqn"><pre class="Box-sc-g0xbh4-0 bfdbXb prism-code language-js" tabindex="0" data-language="javascript">const Arborist = require("@npmcli/arborist");
const arb = new Arborist({});</pre></div>
</div></div> <div class="Box-sc-g0xbh4-0 eUKtPS"><div style="color:#393A34;background-color:#f6f8fa" class="Box-sc-g0xbh4-0 bdVWRk">
<div class="Box-sc-g0xbh4-0 kFQlqn"><pre class="Box-sc-g0xbh4-0 bfdbXb prism-code language-js" tabindex="0" data-language="javascript">// root-level
arb.loadActual().then(async (tree) =&gt; {
  // query all production dependencies
  const results = await tree.querySelectorAll(".prod");
  console.log(results);
});</pre></div>
</div></div> <div class="Box-sc-g0xbh4-0 eUKtPS"><div style="color:#393A34;background-color:#f6f8fa" class="Box-sc-g0xbh4-0 bdVWRk">
<div class="Box-sc-g0xbh4-0 kFQlqn"><pre class="Box-sc-g0xbh4-0 bfdbXb prism-code language-js" tabindex="0" data-language="javascript">// iterative
arb.loadActual().then(async (tree) =&gt; {
  // query for the deduped version of react
  const results = await tree.querySelectorAll("#react:not(:deduped)");
  // query the deduped react for git deps
  const deps = await results[0].querySelectorAll(":type(git)");
  console.log(deps);
});</pre></div>
</div></div> <h2 id="see-also" class="components__StyledHeading-sc-13rww2g-0 components__h2-sc-13rww2g-2 cZjJlu cYFMoP components__StyledHeading-sc-13rww2g-0 cZjJlu"><a href="#see-also" aria-label="See Also permalink" class="Link__StyledLink-sc-14289xe-0 hysCUZ">See Also</a></h2> <ul class="components__UnorderedList-sc-13rww2g-10 fqlkab"> <li><a class="Link__StyledLink-sc-14289xe-0 kIxRcv" href="../commands/npm-query.html">npm query</a></li> <li><a href="https://npm.im/@npmcli/arborist" class="Link__StyledLink-sc-14289xe-0 kIxRcv">@npmcli/arborist</a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; npm, Inc. and Contributors<br>Licensed under the npm License.<br>npm is a trademark of npm, Inc.<br>
    <a href="https://docs.npmjs.com/cli/v10/using-npm/dependency-selectors" class="_attribution-link">https://docs.npmjs.com/cli/v10/using-npm/dependency-selectors</a>
  </p>
</div>
