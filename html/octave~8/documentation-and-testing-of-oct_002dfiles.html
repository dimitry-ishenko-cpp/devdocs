<div class="subsection" id="Documentation-and-Testing-of-Oct_002dFiles">   <h1 class="subsection">A.1.13 Documentation and Testing of Oct-Files</h1> <p>The documentation for an oct-file is contained in the fourth string parameter of the <code><span class="nolinebreak">DEFUN_DLD</span></code> macro. This string can be formatted in the same manner as the help strings for user functions, however there are some issues that are particular to the formatting of help strings within oct-files. </p> <p>The major issue is that the help string will typically be longer than a single line of text, and so the formatting of long multi-line help strings needs to be taken into account. There are several possible solutions, but the most common is illustrated in the following example, </p> <pre class="example" data-language="matlab">DEFUN_DLD (do_what_i_want, args, nargout,
  "-*- texinfo -*-\n\
@deftypefn {} {} do_what_i_say (@var{n})\n\
A function that does what the user actually wants rather\n\
than what they requested.\n\
@end deftypefn")
{
…
}</pre> <p>where each line of text is terminated by <code>\n\</code> which is an embedded newline in the string together with a C++ string continuation character. Note that the final <code>\</code> must be the last character on the line. </p> <p>Octave also includes the ability to embed test and demonstration code for a function within the code itself (see <a href="test-and-demo-functions.html">Test and Demo Functions</a>). This can be used from within oct-files (or in fact any file) with certain provisos. First, the test and demo functions of Octave look for <code>%!</code> as the first two characters of a line to identify test and demonstration code. This is a requirement for oct-files as well. In addition, the test and demonstration code must be wrapped in a comment block to avoid it being interpreted by the compiler. Finally, the Octave test and demonstration code must have access to the original source code of the oct-file—not just the compiled code—as the tests are stripped from the compiled code. An example in an oct-file might be </p> <pre class="example" data-language="matlab">/*
%!assert (sin ([1,2]), [sin(1),sin(2)])
%!error (sin ())
%!error (sin (1,1))
*/</pre> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1996–2023 The Octave Project Developers<br>Permission is granted to make and distribute verbatim copies of this manual provided the copyright notice and this permission notice are preserved on all copies.<br/>Permission is granted to copy and distribute modified versions of this manual under the conditions for verbatim copying, provided that the entire resulting derived work is distributed under the terms of a permission notice identical to this one.</br>Permission is granted to copy and distribute translations of this manual into another language, under the above conditions for modified versions.<br>
    <a href="https://docs.octave.org/v8.1.0/Documentation-and-Testing-of-Oct_002dFiles.html" class="_attribution-link">https://docs.octave.org/v8.1.0/Documentation-and-Testing-of-Oct_002dFiles.html</a>
  </p>
</div>
