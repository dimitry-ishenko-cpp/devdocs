<div class="subsection" id="Making-Java-Classes-Available">   <h1 class="subsection">A.4.1 Making Java Classes Available</h1>        <p>Java finds classes by searching a <var>classpath</var> which is a list of Java archive files and/or directories containing class files. In Octave the <var>classpath</var> is composed of two parts: </p> <ul> <li> the <var>static classpath</var> is initialized once at startup of the JVM, and </li>
<li> the <var>dynamic classpath</var> which can be modified at runtime. </li>
</ul> <p>Octave searches the <var>static classpath</var> first, and then the <var>dynamic classpath</var>. Classes appearing in the <var>static classpath</var>, as well as in the <var>dynamic classpath</var>, will therefore be found in the <var>static classpath</var> and loaded from this location. Classes which will be used frequently, or must be available to all users, should be added to the <var>static classpath</var>. The <var>static classpath</var> is populated once from the contents of a plain text file named <samp>javaclasspath.txt</samp> (or <samp>classpath.txt</samp> historically) when the Java Virtual Machine starts. This file contains one line for each individual classpath to be added to the <var>static classpath</var>. These lines can identify directories containing class files, or Java archives with complete class file hierarchies. Comment lines starting with a ‘<samp>#</samp>’ or a ‘<samp>%</samp>’ character are ignored. </p> <p>The search rules for the file <samp>javaclasspath.txt</samp> (or <samp>classpath.txt</samp>) are: </p> <ul> <li> First, Octave tries to locate it in the current directory (where Octave was started from). If such a file is found, it is read and defines the initial <var>static classpath</var>. Thus, it is possible to define a static classpath on a ’per Octave invocation’ basis. </li>
<li> Next, Octave searches in the user’s home directory. If a file <samp>javaclasspath.txt</samp> exists here, its contents are appended to the static classpath (if any). Thus, it is possible to build an initial static classpath on a ’per user’ basis. </li>
<li> Finally, Octave looks for a <samp>javaclasspath.txt</samp> in the m-file directory where Octave Java functions live. This is where the function <samp>javaclasspath.m</samp> resides, usually something like <samp><code><span class="nolinebreak">OCTAVE_HOME</span></code>/share/octave/<code><span class="nolinebreak">OCTAVE_VERSION</span></code>/m/java/</samp>. You can find this directory by executing the command <pre class="example" data-language="matlab">which javaclasspath</pre> <p>If this file exists here, its contents are also appended to the <var>static classpath</var>. Note that the archives and class directories defined in this last step will affect all users. </p>
</li>
</ul> <p>Classes which are used only by a specific script should be placed in the <var>dynamic classpath</var>. This portion of the classpath can be modified at runtime using the <code>javaaddpath</code> and <code>javarmpath</code> functions. </p> <p>Example: </p> <pre class="example" data-language="matlab">octave&gt; base_path = "C:/Octave/java_files";

octave&gt; # add two JAR archives to the dynamic classpath
octave&gt; javaaddpath ([base_path, "/someclasses.jar"]);
octave&gt; javaaddpath ([base_path, "/moreclasses.jar"]);

octave&gt; # check the dynamic classpath
octave&gt; p = javaclasspath;
octave&gt; disp (p{1});
C:/Octave/java_files/someclasses.jar
octave&gt; disp (p{2});
C:/Octave/java_files/moreclasses.jar

octave&gt; # remove the first element from the classpath
octave&gt; javarmpath ([base_path, "/someclasses.jar"]);
octave&gt; p = javaclasspath;
octave&gt; disp (p{1});
C:/Octave/java_files/moreclasses.jar

octave&gt; # provoke an error
octave&gt; disp (p{2});
error: A(I): Index exceeds matrix dimension.</pre> <p>Another way to add files to the <var>dynamic classpath</var> exclusively for your user account is to use the file <samp>.octaverc</samp> which is stored in your home directory. All Octave commands in this file are executed each time you start a new instance of Octave. The following example adds the directory <samp>octave</samp> to Octave’s search path and the archive <samp>myclasses.jar</samp> in this directory to the Java search path. </p> <pre class="example" data-language="matlab"># contents of .octaverc:
addpath ("~/octave");
javaaddpath ("~/octave/myclasses.jar");</pre> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1996–2023 The Octave Project Developers<br>Permission is granted to make and distribute verbatim copies of this manual provided the copyright notice and this permission notice are preserved on all copies.<br/>Permission is granted to copy and distribute modified versions of this manual under the conditions for verbatim copying, provided that the entire resulting derived work is distributed under the terms of a permission notice identical to this one.</br>Permission is granted to copy and distribute translations of this manual into another language, under the above conditions for modified versions.<br>
    <a href="https://docs.octave.org/v8.1.0/Making-Java-Classes-Available.html" class="_attribution-link">https://docs.octave.org/v8.1.0/Making-Java-Classes-Available.html</a>
  </p>
</div>
