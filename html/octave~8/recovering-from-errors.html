<div class="subsection" id="Recovering-From-Errors">   <h1 class="subsection">12.1.3 Recovering From Errors</h1> <p>Octave provides several ways of recovering from errors. There are <code>try</code>/<code>catch</code> blocks, <code>unwind_protect</code>/<code>unwind_protect_cleanup</code> blocks, and finally the <code>onCleanup</code> command. </p> <p>The <code>onCleanup</code> command associates an ordinary Octave variable (the trigger) with an arbitrary function (the action). Whenever the Octave variable ceases to exist—whether due to a function return, an error, or simply because the variable has been removed with <code>clear</code>—then the assigned function is executed. </p> <p>The function can do anything necessary for cleanup such as closing open file handles, printing an error message, or restoring global variables to their initial values. The last example is a very convenient idiom for Octave code. For example: </p> <pre class="example" data-language="matlab">function rand42
  old_state = rand ("state");
  restore_state = onCleanup (@() rand ("state", old_state));
  rand ("state", 42);
  …
endfunction  # rand generator state restored by onCleanup</pre> <dl class="def"> <dt id="index-onCleanup">
<span class="category">: </span><span><em><var>obj</var> =</em> <strong>onCleanup</strong> <em>(<var>function</var>)</em><a href="#index-onCleanup" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Create a special object that executes a given function upon destruction. </p> <p>If the object is copied to multiple variables (or cell or struct array elements) or returned from a function, <var>function</var> will be executed after clearing the last copy of the object. Note that if multiple local onCleanup variables are created, the order in which they are called is unspecified. For similar functionality See <a href="the-unwind_005fprotect-statement.html">The unwind_protect Statement</a>. </p>
</dd>
</dl> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1996–2023 The Octave Project Developers<br>Permission is granted to make and distribute verbatim copies of this manual provided the copyright notice and this permission notice are preserved on all copies.<br/>Permission is granted to copy and distribute modified versions of this manual under the conditions for verbatim copying, provided that the entire resulting derived work is distributed under the terms of a permission notice identical to this one.</br>Permission is granted to copy and distribute translations of this manual into another language, under the above conditions for modified versions.<br>
    <a href="https://docs.octave.org/v8.1.0/Recovering-From-Errors.html" class="_attribution-link">https://docs.octave.org/v8.1.0/Recovering-From-Errors.html</a>
  </p>
</div>
