<div class="subsection" id="Temporary-Files">   <h1 class="subsection">14.2.17 Temporary Files</h1> <p>Sometimes one needs to write data to a file that is only temporary. This is most commonly used when an external program launched from within Octave needs to access data. When Octave exits all temporary files will be deleted, so this step need not be executed manually. </p> <dl class="def"> <dt id="index-mkstemp">
<span class="category">: </span><span><em>[<var>fid</var>, <var>name</var>, <var>msg</var>] =</em> <strong>mkstemp</strong> <em>("<var>template</var>")</em><a href="#index-mkstemp" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-mkstemp-1">
<span class="category">: </span><span><em>[<var>fid</var>, <var>name</var>, <var>msg</var>] =</em> <strong>mkstemp</strong> <em>("<var>template</var>", <var>delete</var>)</em><a href="#index-mkstemp-1" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Return the file descriptor <var>fid</var> corresponding to a new temporary file with a unique name created from <var>template</var>. </p> <p>The last six characters of <var>template</var> must be <code>"XXXXXX"</code> and these are replaced with a string that makes the filename unique. The file is then created with mode read/write and permissions that are system dependent (on GNU/Linux systems, the permissions will be 0600 for versions of glibc 2.0.7 and later). The file is opened in binary mode and with the <code><span class="nolinebreak">O_EXCL</span></code> flag. </p> <p>If the optional argument <var>delete</var> is supplied and is true, the file will be deleted automatically when Octave exits. </p> <p>If successful, <var>fid</var> is a valid file ID, <var>name</var> is the name of the file, and <var>msg</var> is an empty string. Otherwise, <var>fid</var> is -1, <var>name</var> is empty, and <var>msg</var> contains a system-dependent error message. </p> <p><strong>See also:</strong> <a href="#XREFtempname">tempname</a>, <a href="#XREFtempdir">tempdir</a>, <a href="#XREFP_005ftmpdir">P_tmpdir</a>, <a href="#XREFtmpfile">tmpfile</a>, <a href="opening-and-closing-files.html#XREFfopen">fopen</a>. </p>
</dd>
</dl> <dl class="def"> <dt id="index-tmpfile">
<span class="category">: </span><span><em>[<var>fid</var>, <var>msg</var>] =</em> <strong>tmpfile</strong> <em>()</em><a href="#index-tmpfile" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Return the file ID corresponding to a new temporary file with a unique name. </p> <p>The file is opened in binary read/write (<code>"w+b"</code>) mode and will be deleted automatically when it is closed or when Octave exits. </p> <p>If successful, <var>fid</var> is a valid file ID and <var>msg</var> is an empty string. Otherwise, <var>fid</var> is -1 and <var>msg</var> contains a system-dependent error message. </p> <p><strong>See also:</strong> <a href="#XREFtempname">tempname</a>, <a href="#XREFmkstemp">mkstemp</a>, <a href="#XREFtempdir">tempdir</a>, <a href="#XREFP_005ftmpdir">P_tmpdir</a>. </p>
</dd>
</dl> <dl class="def"> <dt id="index-tempname">
<span class="category">: </span><span><em><var>fname</var> =</em> <strong>tempname</strong> <em>()</em><a href="#index-tempname" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-tempname-1">
<span class="category">: </span><span><em><var>fname</var> =</em> <strong>tempname</strong> <em>(<var>dir</var>)</em><a href="#index-tempname-1" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-tempname-2">
<span class="category">: </span><span><em><var>fname</var> =</em> <strong>tempname</strong> <em>(<var>dir</var>, <var>prefix</var>)</em><a href="#index-tempname-2" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Return a unique temporary filename as a string. </p> <p>If <var>prefix</var> is omitted, a value of <code>"oct-"</code> is used. </p> <p>If <var>dir</var> is also omitted, the default directory for temporary files (<code>P_tmpdir</code>) is used. If <var>dir</var> is provided, it must exist, otherwise the default directory for temporary files is used. </p> <p>Programming Note: Because the named file is not opened by <code>tempname</code>, it is possible, though relatively unlikely, that it will not be available by the time your program attempts to open it. If this is a concern, see <a href="#XREFtmpfile"><code>tmpfile</code></a>. </p> <p><strong>See also:</strong> <a href="#XREFmkstemp">mkstemp</a>, <a href="#XREFtempdir">tempdir</a>, <a href="#XREFP_005ftmpdir">P_tmpdir</a>, <a href="#XREFtmpfile">tmpfile</a>. </p>
</dd>
</dl> <dl class="def"> <dt id="index-tempdir">
<span class="category">: </span><span><em><var>dir</var> =</em> <strong>tempdir</strong> <em>()</em><a href="#index-tempdir" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Return the name of the host system’s directory for temporary files. </p> <p>The directory name is taken first from the environment variable <code>TMPDIR</code>. If that does not exist, the environment variable <code>TMP</code> (and on Windows platforms also with higher priority the environment variable <code>TEMP</code>) is checked. If none of those are set, the system default returned by <code>P_tmpdir</code> is used. </p> <p><strong>See also:</strong> <a href="#XREFP_005ftmpdir">P_tmpdir</a>, <a href="#XREFtempname">tempname</a>, <a href="#XREFmkstemp">mkstemp</a>, <a href="#XREFtmpfile">tmpfile</a>. </p>
</dd>
</dl> <dl class="def"> <dt id="index-P_005ftmpdir">
<span class="category">: </span><span><em><var>sys_tmpdir</var> =</em> <strong>P_tmpdir</strong> <em>()</em><a href="#index-P_005ftmpdir" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Return the name of the host system’s <strong>default</strong> directory for temporary files. </p> <p>Programming Note: The value returned by <code>P_tmpdir</code> is always the default location. This value may not agree with that returned from <code>tempdir</code> if the user has overridden the default with the <code>TMPDIR</code> environment variable. </p> <p><strong>See also:</strong> <a href="#XREFtempdir">tempdir</a>, <a href="#XREFtempname">tempname</a>, <a href="#XREFmkstemp">mkstemp</a>, <a href="#XREFtmpfile">tmpfile</a>. </p>
</dd>
</dl> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1996–2023 The Octave Project Developers<br>Permission is granted to make and distribute verbatim copies of this manual provided the copyright notice and this permission notice are preserved on all copies.<br/>Permission is granted to copy and distribute modified versions of this manual under the conditions for verbatim copying, provided that the entire resulting derived work is distributed under the terms of a permission notice identical to this one.</br>Permission is granted to copy and distribute translations of this manual into another language, under the above conditions for modified versions.<br>
    <a href="https://docs.octave.org/v8.1.0/Temporary-Files.html" class="_attribution-link">https://docs.octave.org/v8.1.0/Temporary-Files.html</a>
  </p>
</div>
