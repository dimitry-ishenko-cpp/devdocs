<div class="section" id="Breakpoints">   <h1 class="section">13.3 Breakpoints</h1> <p>Breakpoints can be set in any m-file function by using the <code>dbstop</code> function. </p> <dl class="def"> <dt id="index-dbstop">
<span class="category">: </span><span> <strong>dbstop</strong> <em><var>fcn</var></em><a href="#index-dbstop" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-dbstop-1">
<span class="category">: </span><span> <strong>dbstop</strong> <em><var>fcn</var> <var>line</var></em><a href="#index-dbstop-1" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-dbstop-2">
<span class="category">: </span><span> <strong>dbstop</strong> <em><var>fcn</var> <var>line1</var> <var>line2</var> …</em><a href="#index-dbstop-2" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-dbstop-3">
<span class="category">: </span><span> <strong>dbstop</strong> <em><var>line1</var> …</em><a href="#index-dbstop-3" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-dbstop-4">
<span class="category">: </span><span> <strong>dbstop</strong> <em>in <var>fcn</var></em><a href="#index-dbstop-4" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-dbstop-5">
<span class="category">: </span><span> <strong>dbstop</strong> <em>in <var>fcn</var> at <var>line</var></em><a href="#index-dbstop-5" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-dbstop-6">
<span class="category">: </span><span> <strong>dbstop</strong> <em>in <var>fcn</var> at <var>line</var> if "<var>condition</var>"</em><a href="#index-dbstop-6" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-dbstop-7">
<span class="category">: </span><span> <strong>dbstop</strong> <em>in <var>class</var> at <var>method</var></em><a href="#index-dbstop-7" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-dbstop-8">
<span class="category">: </span><span> <strong>dbstop</strong> <em>if <var>event</var></em><a href="#index-dbstop-8" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-dbstop-9">
<span class="category">: </span><span> <strong>dbstop</strong> <em>if <var>event</var> <var>ID</var></em><a href="#index-dbstop-9" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-dbstop-10">
<span class="category">: </span><span> <strong>dbstop</strong> <em>(<var>bp_struct</var>)</em><a href="#index-dbstop-10" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-dbstop-11">
<span class="category">: </span><span><em><var>rline</var> =</em> <strong>dbstop</strong> <em>…</em><a href="#index-dbstop-11" class="copiable-anchor"> ¶</a></span>
</dt> <dd> <p>Set breakpoints for the built-in debugger. </p> <p><var>fcn</var> is the name of a function on the current <code>path</code>. When already in debug mode the <var>fcn</var> argument can be omitted and the current function will be used. Breakpoints at subfunctions are set with the scope operator ‘<samp>&gt;</samp>’. For example, If <samp>file.m</samp> has a subfunction <code>fcn2</code>, then a breakpoint in <code>fcn2</code> can be specified by <code>file&gt;fcn2</code>. </p> <p><var>line</var> is the line number at which to break. If <var>line</var> is not specified, it defaults to the first executable line in the file <samp>fcn.m</samp>. Multiple lines can be specified in a single command; when function syntax is used, the lines may also be passed as a single vector argument (<code>[<var>line1</var>, <var>line2</var>, …]</code>). </p> <p><var>condition</var> is any Octave expression that can be evaluated in the code context that exists at the breakpoint. When the breakpoint is encountered, <var>condition</var> will be evaluated, and execution will stop if <var>condition</var> is true. If <var>condition</var> cannot be evaluated, for example because it refers to an undefined variable, an error will be thrown. Expressions with side effects (such as <code>y++ &gt; 1</code>) will alter variables, and should generally be avoided. Conditions containing quotes (‘<samp>"</samp>’, ‘<samp>'</samp>’) or comment characters (‘<samp>#</samp>’, ‘<samp>%</samp>’) must be enclosed in quotes. (This does not apply to conditions entered from the editor’s context menu.) For example: </p> <pre class="example" data-language="matlab">dbstop in axis at 246 if 'any (opt == "x")'</pre> <p>The form specifying <var>event</var> does not cause a specific breakpoint at a given function and line number. Instead it causes debug mode to be entered when certain unexpected events are encountered. Possible values are </p> <dl compact> <dt><span><code>error</code></span></dt> <dd>
<p>Stop when an error is reported. This is equivalent to specifying both <code>debug_on_error (true)</code> and <code>debug_on_interrupt (true)</code>. </p> </dd> <dt><span><code>caught error</code></span></dt> <dd>
<p>Stop when an error is caught by a try-catch block (not yet implemented). </p> </dd> <dt><span><code>interrupt</code></span></dt> <dd>
<p>Stop when an interrupt (<kbd>Ctrl-C</kbd>) occurs. </p> </dd> <dt><span><code>naninf</code></span></dt> <dd>
<p>Stop when code returns a non-finite value (not yet implemented). </p> </dd> <dt><span><code>warning</code></span></dt> <dd><p>Stop when a warning is reported. This is equivalent to specifying <code>debug_on_warning (true)</code>. </p></dd> </dl> <p>The events <code>error</code>, <code>caught error</code>, and <code>warning</code> can all be followed by a string specifying an error ID or warning ID. If that is done, only errors with the specified ID will cause execution to stop. To stop on one of a set of IDs, multiple <code>dbstop</code> commands must be issued. </p> <p>Breakpoints and events can be removed using the <code>dbclear</code> command with the same syntax. </p> <p>It is possible to save all breakpoints and restore them at once by issuing the commands <code>bp_state = dbstatus; …; dbstop (bp_state)</code>. </p> <p>The optional output <var>rline</var> is the real line number where the breakpoint was set. This can differ from the specified line if the line is not executable. For example, if a breakpoint attempted on a blank line then Octave will set the real breakpoint at the next executable line. </p> <p>When a file is re-parsed, such as when it is modified outside the GUI, all breakpoints within the file are cleared. </p> <p><strong>See also:</strong> <a href="#XREFdbclear">dbclear</a>, <a href="#XREFdbstatus">dbstatus</a>, <a href="debug-mode.html#XREFdbstep">dbstep</a>, <a href="entering-debug-mode.html#XREFdebug_005fon_005ferror">debug_on_error</a>, <a href="entering-debug-mode.html#XREFdebug_005fon_005fwarning">debug_on_warning</a>, <a href="entering-debug-mode.html#XREFdebug_005fon_005finterrupt">debug_on_interrupt</a>. </p>
</dd>
</dl> <p>Breakpoints in class methods are also supported (e.g., <code>dbstop ("@class/method")</code>). However, breakpoints cannot be set in built-in functions (e.g., <code>sin</code>, etc.) or dynamically loaded functions (i.e., oct-files). </p> <p>To set a breakpoint immediately upon entering a function use line number 1, or omit the line number entirely and just give the function name. When setting the breakpoint Octave will ignore the leading comment block, and the breakpoint will be set on the first executable statement in the function. For example: </p> <pre class="example" data-language="matlab">dbstop ("asind", 1)
⇒ 29</pre> <p>Note that the return value of <code>29</code> means that the breakpoint was effectively set to line 29. The status of breakpoints in a function can be queried with <code>dbstatus</code>. </p> <dl class="def"> <dt id="index-dbstatus">
<span class="category">: </span><span> <strong>dbstatus</strong><a href="#index-dbstatus" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-dbstatus-1">
<span class="category">: </span><span> <strong>dbstatus</strong> <em><var>fcn</var></em><a href="#index-dbstatus-1" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-dbstatus-2">
<span class="category">: </span><span><em><var>bp_list</var> =</em> <strong>dbstatus</strong> <em>…</em><a href="#index-dbstatus-2" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Report the location of active breakpoints. </p> <p>When called with no input or output arguments, print the list of all functions with breakpoints and the line numbers where those breakpoints are set. </p> <p>If a function name <var>fcn</var> is specified then only report breakpoints for the named function and its subfunctions. </p> <p>The optional return argument <var>bp_list</var> is a struct array with the following fields: </p> <dl compact> <dt><span>name</span></dt> <dd>
<p>The name of the function with a breakpoint. A subfunction, say <code>fcn2</code> within an m-file, say <samp>file.m</samp>, is specified as <code>file&gt;fcn2</code>. </p> </dd> <dt><span>file</span></dt> <dd>
<p>The name of the m-file where the function code is located. </p> </dd> <dt><span>line</span></dt> <dd>
<p>The line number with the breakpoint. </p> </dd> <dt><span>cond</span></dt> <dd><p>The condition that must be satisfied for the breakpoint to be active, or the empty string for unconditional breakpoints. </p></dd> </dl> <p>If <code>dbstop if error</code> is true but no explicit IDs are specified, the return value will have an empty field called <code>"errs"</code>. If IDs are specified, the <code>errs</code> field will have one row per ID. If <code>dbstop if error</code> is false, there is no <code>"errs"</code> field. The <code>"warn"</code> field is set similarly by <code>dbstop if warning</code>. </p> <p><strong>See also:</strong> <a href="#XREFdbstop">dbstop</a>, <a href="#XREFdbclear">dbclear</a>, <a href="debug-mode.html#XREFdbwhere">dbwhere</a>, <a href="debug-mode.html#XREFdblist">dblist</a>, <a href="call-stack.html#XREFdbstack">dbstack</a>. </p>
</dd>
</dl> <p>Reusing the previous example, <code>dbstatus ("asind")</code> will return 29. The breakpoints listed can then be cleared with the <code>dbclear</code> function. </p> <dl class="def"> <dt id="index-dbclear">
<span class="category">: </span><span> <strong>dbclear</strong> <em><var>fcn</var></em><a href="#index-dbclear" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-dbclear-1">
<span class="category">: </span><span> <strong>dbclear</strong> <em><var>fcn</var> <var>line</var></em><a href="#index-dbclear-1" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-dbclear-2">
<span class="category">: </span><span> <strong>dbclear</strong> <em><var>fcn</var> <var>line1</var> <var>line2</var> …</em><a href="#index-dbclear-2" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-dbclear-3">
<span class="category">: </span><span> <strong>dbclear</strong> <em><var>line</var> …</em><a href="#index-dbclear-3" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-dbclear-4">
<span class="category">: </span><span> <strong>dbclear</strong> <em>all</em><a href="#index-dbclear-4" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-dbclear-5">
<span class="category">: </span><span> <strong>dbclear</strong> <em>in <var>fcn</var></em><a href="#index-dbclear-5" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-dbclear-6">
<span class="category">: </span><span> <strong>dbclear</strong> <em>in <var>fcn</var> at <var>line</var></em><a href="#index-dbclear-6" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-dbclear-7">
<span class="category">: </span><span> <strong>dbclear</strong> <em>if <var>event</var></em><a href="#index-dbclear-7" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-dbclear-8">
<span class="category">: </span><span> <strong>dbclear</strong> <em>("<var>fcn</var>")</em><a href="#index-dbclear-8" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-dbclear-9">
<span class="category">: </span><span> <strong>dbclear</strong> <em>("<var>fcn</var>", <var>line</var>)</em><a href="#index-dbclear-9" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-dbclear-10">
<span class="category">: </span><span> <strong>dbclear</strong> <em>("<var>fcn</var>", <var>line1</var>, <var>line2</var>, …)</em><a href="#index-dbclear-10" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-dbclear-11">
<span class="category">: </span><span> <strong>dbclear</strong> <em>("<var>fcn</var>", <var>line1</var>, …)</em><a href="#index-dbclear-11" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-dbclear-12">
<span class="category">: </span><span> <strong>dbclear</strong> <em>(<var>line</var>, …)</em><a href="#index-dbclear-12" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-dbclear-13">
<span class="category">: </span><span> <strong>dbclear</strong> <em>("all")</em><a href="#index-dbclear-13" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Delete a breakpoint at line number <var>line</var> in the function <var>fcn</var>. </p> <p>Arguments are </p> <dl compact> <dt><span><var>fcn</var></span></dt> <dd>
<p>Function name as a string variable. When already in debug mode this argument can be omitted and the current function will be used. </p> </dd> <dt><span><var>line</var></span></dt> <dd>
<p>Line number from which to remove a breakpoint. Multiple lines may be given as separate arguments or as a vector. </p> </dd> <dt><span><var>event</var></span></dt> <dd><p>An event such as <code>error</code>, <code>interrupt</code>, or <code>warning</code> (see <a href="#XREFdbstop"><code>dbstop</code></a> for details). </p></dd> </dl> <p>When called without a line number specification all breakpoints in the named function are cleared. </p> <p>If the requested line is not a breakpoint no action is performed. </p> <p>The special keyword <code>"all"</code> will clear all breakpoints from all files. </p> <p><strong>See also:</strong> <a href="#XREFdbstop">dbstop</a>, <a href="#XREFdbstatus">dbstatus</a>, <a href="debug-mode.html#XREFdbwhere">dbwhere</a>. </p>
</dd>
</dl> <p>A breakpoint may also be set in a subfunction. For example, if a file contains the functions </p> <pre class="example" data-language="matlab">function y = func1 (x)
  y = func2 (x);
endfunction
function y = func2 (x)
  y = x + 1;
endfunction</pre> <p>then a breakpoint can be set at the start of the subfunction directly with </p> <pre class="example" data-language="matlab">dbstop func1&gt;func2
⇒ 5</pre> <p>Note that ‘<samp>&gt;</samp>’ is the character that distinguishes subfunctions from the m-file containing them. </p> <p>Another simple way of setting a breakpoint in an Octave script is the use of the <code>keyboard</code> function. </p> <dl class="def"> <dt id="index-keyboard">
<span class="category">: </span><span> <strong>keyboard</strong> <em>()</em><a href="#index-keyboard" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-keyboard-1">
<span class="category">: </span><span> <strong>keyboard</strong> <em>("<var>prompt</var>")</em><a href="#index-keyboard-1" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Stop m-file execution and enter debug mode. </p> <p>When the <code>keyboard</code> function is executed, Octave prints a prompt and waits for user input. The input strings are then evaluated and the results are printed. This makes it possible to examine the values of variables within a function, and to assign new values if necessary. To leave the prompt and return to normal execution type ‘<samp>return</samp>’ or ‘<samp>dbcont</samp>’. The <code>keyboard</code> function does not return an exit status. </p> <p>If <code>keyboard</code> is invoked without arguments, a default prompt of ‘<samp>debug&gt; </samp>’ is used. </p> <p><strong>See also:</strong> <a href="#XREFdbstop">dbstop</a>, <a href="leaving-debug-mode.html#XREFdbcont">dbcont</a>, <a href="leaving-debug-mode.html#XREFdbquit">dbquit</a>. </p>
</dd>
</dl> <p>The <code>keyboard</code> function is placed in a script at the point where the user desires that the execution be stopped. It automatically sets the running script into the debug mode. </p> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1996–2023 The Octave Project Developers<br>Permission is granted to make and distribute verbatim copies of this manual provided the copyright notice and this permission notice are preserved on all copies.<br/>Permission is granted to copy and distribute modified versions of this manual under the conditions for verbatim copying, provided that the entire resulting derived work is distributed under the terms of a permission notice identical to this one.</br>Permission is granted to copy and distribute translations of this manual into another language, under the above conditions for modified versions.<br>
    <a href="https://docs.octave.org/v8.1.0/Breakpoints.html" class="_attribution-link">https://docs.octave.org/v8.1.0/Breakpoints.html</a>
  </p>
</div>
