<div class="subsection" id="Catching-Errors">   <h1 class="subsection">12.1.2 Catching Errors</h1> <p>When an error occurs, it can be detected and handled using the <code>try</code> statement as described in <a href="the-try-statement.html">The try Statement</a>. As an example, the following piece of code counts the number of errors that occurs during a <code>for</code> loop. </p> <pre class="example" data-language="matlab">number_of_errors = 0;
for n = 1:100
  try
    …
  catch
    number_of_errors++;
  end_try_catch
endfor</pre> <p>The above example treats all errors the same. In many situations it can however be necessary to discriminate between errors, and take different actions depending on the error. The <code>lasterror</code> function returns a structure containing information about the last error that occurred. As an example, the code above could be changed to count the number of errors related to the ‘<samp>*</samp>’ operator. </p> <pre class="example" data-language="matlab">number_of_errors = 0;
for n = 1:100
  try
    …
  catch
    msg = lasterror.message;
    if (strfind (msg, "operator *"))
      number_of_errors++;
    endif
  end_try_catch
endfor</pre> <p>Alternatively, the output of the <code>lasterror</code> function can be found in a variable indicated immediately after the <code>catch</code> keyword, as in the example below showing how to redirect an error as a warning: </p> <pre class="example" data-language="matlab">try
  …
catch err
  warning(err.identifier, err.message);
  …
end_try_catch</pre> <dl class="def"> <dt id="index-lasterror">
<span class="category">: </span><span><em><var>lasterr</var> =</em> <strong>lasterror</strong> <em>()</em><a href="#index-lasterror" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-lasterror-1">
<span class="category">: </span><span> <strong>lasterror</strong> <em>(<var>err</var>)</em><a href="#index-lasterror-1" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-lasterror-2">
<span class="category">: </span><span> <strong>lasterror</strong> <em>("reset")</em><a href="#index-lasterror-2" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Query or set the last error message structure. </p> <p>When called without arguments, return a structure containing the last error message and other information related to this error. The elements of the structure are: </p> <dl compact> <dt><span><code>message</code></span></dt> <dd>
<p>The text of the last error message </p> </dd> <dt><span><code>identifier</code></span></dt> <dd>
<p>The message identifier of this error message </p> </dd> <dt><span><code>stack</code></span></dt> <dd>
<p>A structure containing information on where the message occurred. This may be an empty structure if the information cannot be obtained. The fields of the structure are: </p> <dl compact> <dt><span><code>file</code></span></dt> <dd>
<p>The name of the file where the error occurred </p> </dd> <dt><span><code>name</code></span></dt> <dd>
<p>The name of function in which the error occurred </p> </dd> <dt><span><code>line</code></span></dt> <dd>
<p>The line number at which the error occurred </p> </dd> <dt><span><code>column</code></span></dt> <dd><p>An optional field with the column number at which the error occurred </p></dd> </dl> </dd> </dl> <p>The last error structure may be set by passing a scalar structure, <var>err</var>, as input. Any fields of <var>err</var> that match those above are set while any unspecified fields are initialized with default values. </p> <p>If <code>lasterror</code> is called with the argument <code>"reset"</code>, all fields are set to their default values. </p> <p><strong>See also:</strong> <a href="#XREFlasterr">lasterr</a>, <a href="raising-errors.html#XREFerror">error</a>, <a href="issuing-warnings.html#XREFlastwarn">lastwarn</a>. </p>
</dd>
</dl> <dl class="def"> <dt id="index-lasterr">
<span class="category">: </span><span><em>[<var>msg</var>, <var>msgid</var>] =</em> <strong>lasterr</strong> <em>()</em><a href="#index-lasterr" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-lasterr-1">
<span class="category">: </span><span> <strong>lasterr</strong> <em>(<var>msg</var>)</em><a href="#index-lasterr-1" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-lasterr-2">
<span class="category">: </span><span> <strong>lasterr</strong> <em>(<var>msg</var>, <var>msgid</var>)</em><a href="#index-lasterr-2" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Query or set the last error message. </p> <p>When called without input arguments, return the last error message and message identifier. </p> <p>With one argument, set the last error message to <var>msg</var>. </p> <p>With two arguments, also set the last message identifier. </p> <p><strong>See also:</strong> <a href="#XREFlasterror">lasterror</a>, <a href="raising-errors.html#XREFerror">error</a>, <a href="issuing-warnings.html#XREFlastwarn">lastwarn</a>. </p>
</dd>
</dl> <p>The next example counts indexing errors. The errors are caught using the field identifier of the structure returned by the function <code>lasterror</code>. </p> <pre class="example" data-language="matlab">number_of_errors = 0;
for n = 1:100
  try
    …
  catch
    id = lasterror.identifier;
    if (strcmp (id, "Octave:invalid-indexing"))
      number_of_errors++;
    endif
  end_try_catch
endfor</pre> <p>The functions distributed with Octave can issue one of the following errors. </p>  <dl compact> <dt><span><code>Octave:bad-alloc</code></span></dt> <dd>
<p>Indicates that memory couldn’t be allocated. </p> </dd> <dt><span><code>Octave:invalid-context</code></span></dt> <dd>
<p>Indicates the error was generated by an operation that cannot be executed in the scope from which it was called. For example, the function <code>print_usage ()</code> when called from the Octave prompt raises this error. </p> </dd> <dt><span><code>Octave:invalid-fun-call</code></span></dt> <dd>
<p>Indicates that a function was called in an incorrect way, e.g., wrong number of input arguments. </p> </dd> <dt><span><code>Octave:invalid-indexing</code></span></dt> <dd>
<p>Indicates that a data-type was indexed incorrectly, e.g., real-value index for arrays, nonexistent field of a structure. </p> </dd> <dt><span><code>Octave:invalid-input-arg</code></span></dt> <dd>
<p>Indicates that a function was called with invalid input arguments. </p> </dd> <dt><span><code>Octave:undefined-function</code></span></dt> <dd>
<p>Indicates a call to a function that is not defined. The function may exist but Octave is unable to find it in the search path. </p> </dd> </dl> <p>When an error has been handled it is possible to raise it again. This can be useful when an error needs to be detected, but the program should still abort. This is possible using the <code>rethrow</code> function. The previous example can now be changed to count the number of errors related to the ‘<samp>*</samp>’ operator, but still abort if another kind of error occurs. </p> <pre class="example" data-language="matlab">number_of_errors = 0;
for n = 1:100
  try
    …
  catch
    msg = lasterror.message;
    if (strfind (msg, "operator *"))
      number_of_errors++;
    else
      rethrow (lasterror);
    endif
  end_try_catch
endfor</pre> <dl class="def"> <dt id="index-rethrow">
<span class="category">: </span><span> <strong>rethrow</strong> <em>(<var>err</var>)</em><a href="#index-rethrow" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Reissue a previous error as defined by <var>err</var>. </p> <p><var>err</var> is a structure that must contain at least the <code>"message"</code> and <code>"identifier"</code> fields. <var>err</var> can also contain a field <code>"stack"</code> that gives information on the assumed location of the error. Typically <var>err</var> is returned from <code>lasterror</code>. </p> <p><strong>See also:</strong> <a href="#XREFlasterror">lasterror</a>, <a href="#XREFlasterr">lasterr</a>, <a href="raising-errors.html#XREFerror">error</a>. </p>
</dd>
</dl> <dl class="def"> <dt id="index-errno">
<span class="category">: </span><span><em><var>err</var> =</em> <strong>errno</strong> <em>()</em><a href="#index-errno" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-errno-1">
<span class="category">: </span><span><em><var>err</var> =</em> <strong>errno</strong> <em>(<var>val</var>)</em><a href="#index-errno-1" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-errno-2">
<span class="category">: </span><span><em><var>err</var> =</em> <strong>errno</strong> <em>(<var>name</var>)</em><a href="#index-errno-2" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Query or set the system-dependent variable errno. </p> <p>When called with no inputs, return the current value of errno. </p> <p>When called with a numeric input <var>val</var>, set the current value of errno to the specified value. The previous value of errno is returned as <var>err</var>. </p> <p>When called with a character string <var>name</var>, return the numeric value of errno which corresponds to the specified error code. If <var>name</var> is not a recognized error code then -1 is returned. </p> <p><strong>See also:</strong> <a href="#XREFerrno_005flist">errno_list</a>. </p>
</dd>
</dl> <dl class="def"> <dt id="index-errno_005flist">
<span class="category">: </span><span><em><var>S</var> =</em> <strong>errno_list</strong> <em>()</em><a href="#index-errno_005flist" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Return a structure containing the system-dependent errno values. </p> <p><strong>See also:</strong> <a href="#XREFerrno">errno</a>. </p>
</dd>
</dl> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1996–2023 The Octave Project Developers<br>Permission is granted to make and distribute verbatim copies of this manual provided the copyright notice and this permission notice are preserved on all copies.<br/>Permission is granted to copy and distribute modified versions of this manual under the conditions for verbatim copying, provided that the entire resulting derived work is distributed under the terms of a permission notice identical to this one.</br>Permission is granted to copy and distribute translations of this manual into another language, under the above conditions for modified versions.<br>
    <a href="https://docs.octave.org/v8.1.0/Catching-Errors.html" class="_attribution-link">https://docs.octave.org/v8.1.0/Catching-Errors.html</a>
  </p>
</div>
