<div class="section" id="Creating-Packages">   <h1 class="section">37.4 Creating Packages</h1> <p>Internally a package is simply a gzipped tar file that contains a top level directory of any given name. This directory will in the following be referred to as <code>package</code> and may contain the following files: </p> <dl compact> <dt><span><code>package/CITATION</code></span></dt> <dd>
<p>This is am optional file describing instructions on how to cite the package for publication. It will be displayed verbatim by the function <code>citation</code>. </p> </dd> <dt><span><code>package/COPYING</code></span></dt> <dd>
<p>This is a required file containing the license of the package. No restrictions is made on the license in general. If however the package contains dynamically linked functions the license must be compatible with the GNU General Public License. </p> </dd> <dt><span><code>package/DESCRIPTION</code></span></dt> <dd>
<p>This is a required file containing information about the package. See <a href="the-description-file.html">The DESCRIPTION File</a>, for details on this file. </p> </dd> <dt><span><code>package/ChangeLog</code></span></dt> <dd>
<p>This is an optional file describing all the changes made to the package source files. </p> </dd> <dt><span><code>package/INDEX</code></span></dt> <dd>
<p>This is an optional file describing the functions provided by the package. If this file is not given then one with be created automatically from the functions in the package and the <code>Categories</code> keyword in the <samp>DESCRIPTION</samp> file. See <a href="the-index-file.html">The INDEX File</a>, for details on this file. </p> </dd> <dt><span><code>package/NEWS</code></span></dt> <dd>
<p>This is an optional file describing all user-visible changes worth mentioning. As this file increases on size, old entries can be moved into <samp>package/ONEWS</samp>. </p> </dd> <dt><span><code>package/ONEWS</code></span></dt> <dd>
<p>This is an optional file describing old entries from the <samp>NEWS</samp> file. </p>  
</dd> <dt><span><code>package/PKG_ADD</code></span></dt> <dd>
<p>An optional file that includes commands that are run when the package is added to the users path. Note that <code><span class="nolinebreak">PKG_ADD</span></code> directives in the source code of the package will also be added to this file by the Octave package manager. Note that symbolic links are to be avoided in packages, as symbolic links do not exist on some file systems, and so a typical use for this file is the replacement of the symbolic link </p> <pre class="example" data-language="matlab">ln -s foo.oct bar.oct</pre> <p>with an autoload directive like </p> <pre class="example" data-language="matlab">autoload ('bar', which ('foo'));</pre> <p>See <a href="pkg_005fadd-and-pkg_005fdel-directives.html">PKG_ADD and PKG_DEL Directives</a>, for details on <code><span class="nolinebreak">PKG_ADD</span></code> directives. </p>  
</dd> <dt><span><code>package/PKG_DEL</code></span></dt> <dd>
<p>An optional file that includes commands that are run when the package is removed from the users path. Note that <code><span class="nolinebreak">PKG_DEL</span></code> directives in the source code of the package will also be added to this file by the Octave package manager. See <a href="pkg_005fadd-and-pkg_005fdel-directives.html">PKG_ADD and PKG_DEL Directives</a>, for details on <code><span class="nolinebreak">PKG_DEL</span></code> directives. </p> </dd> <dt><span><code>package/pre_install.m</code></span></dt> <dd>
<p>This is an optional function that is run prior to the installation of a package. This function is called with a single argument, a struct with fields names after the data in the <samp>DESCRIPTION</samp>, and the paths where the package functions will be installed. </p> </dd> <dt><span><code>package/post_install.m</code></span></dt> <dd>
<p>This is an optional function that is run after the installation of a package. This function is called with a single argument, a struct with fields names after the data in the <samp>DESCRIPTION</samp>, and the paths where the package functions were installed. </p> </dd> <dt><span><code>package/on_uninstall.m</code></span></dt> <dd><p>This is an optional function that is run prior to the removal of a package. This function is called with a single argument, a struct with fields names after the data in the <samp>DESCRIPTION</samp>, the paths where the package functions are installed, and whether the package is currently loaded. </p></dd> </dl> <p>Besides the above mentioned files, a package can also contain one or more of the following directories: </p> <dl compact> <dt><span><code>package/inst</code></span></dt> <dd>
<p>An optional directory containing any files that are directly installed by the package. Typically this will include any <code>m</code>-files. </p> </dd> <dt><span><code>package/src</code></span></dt> <dd>
<p>An optional directory containing code that must be built prior to the packages installation. The Octave package manager will execute <samp>./configure</samp> in this directory if this script exists, and will then call <code>make</code> if a file <samp>Makefile</samp> exists in this directory. <code>make install</code> will however not be called. The environment variables <code>MKOCTFILE</code>, <code><span class="nolinebreak">OCTAVE_CONFIG</span></code>, and <code>OCTAVE</code> will be set to the full paths of the programs <code>mkoctfile</code>, <code>octave-config</code>, and <code>octave</code>, respectively, of the correct version when <code>configure</code> and <code>make</code> are called. If a file called <code>FILES</code> exists all files listed there will be copied to the <code>inst</code> directory, so they also will be installed. If the <code>FILES</code> file doesn’t exist, <samp>src/*.m</samp> and <samp>src/*.oct</samp> will be copied to the <code>inst</code> directory. </p> </dd> <dt><span><code>package/doc</code></span></dt> <dd>
<p>An optional directory containing documentation for the package. The files in this directory will be directly installed in a sub-directory of the installed package for future reference. </p> </dd> <dt><span><code>package/bin</code></span></dt> <dd><p>An optional directory containing files that will be added to the Octave <code><span class="nolinebreak">EXEC_PATH</span></code> when the package is loaded. This might contain external scripts, etc., called by functions within the package. </p></dd> </dl> <ul class="section-toc"> <li><a href="the-description-file.html" accesskey="1">The DESCRIPTION File</a></li> <li><a href="the-index-file.html" accesskey="2">The INDEX File</a></li> <li><a href="pkg_005fadd-and-pkg_005fdel-directives.html" accesskey="3">PKG_ADD and PKG_DEL Directives</a></li> <li><a href="missing-components.html" accesskey="4">Missing Components</a></li> </ul> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1996–2023 The Octave Project Developers<br>Permission is granted to make and distribute verbatim copies of this manual provided the copyright notice and this permission notice are preserved on all copies.<br/>Permission is granted to copy and distribute modified versions of this manual under the conditions for verbatim copying, provided that the entire resulting derived work is distributed under the terms of a permission notice identical to this one.</br>Permission is granted to copy and distribute translations of this manual into another language, under the above conditions for modified versions.<br>
    <a href="https://docs.octave.org/v8.1.0/Creating-Packages.html" class="_attribution-link">https://docs.octave.org/v8.1.0/Creating-Packages.html</a>
  </p>
</div>
