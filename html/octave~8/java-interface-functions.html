<div class="subsection" id="Java-Interface-Functions">   <h1 class="subsection">A.4.4 Java Interface Functions</h1> <p>The following functions are the core of the Java Interface. They provide a way to create a Java object, get and set its data fields, and call Java methods which return results to Octave. </p>   <dl class="def"> <dt id="index-javaObject">
<span class="category">: </span><span><em><var>jobj</var> =</em> <strong>javaObject</strong> <em>(<var>classname</var>)</em><a href="#index-javaObject" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-javaObject-1">
<span class="category">: </span><span><em><var>jobj</var> =</em> <strong>javaObject</strong> <em>(<var>classname</var>, <var>arg1</var>, …)</em><a href="#index-javaObject-1" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Create a Java object of class <var>classsname</var>, by calling the class constructor with the arguments <var>arg1</var>, … </p> <p>The first example below creates an uninitialized object, while the second example supplies an initial argument to the constructor. </p> <pre class="example" data-language="matlab">x = javaObject ("java.lang.StringBuffer")
x = javaObject ("java.lang.StringBuffer", "Initial string")</pre> <p><strong>See also:</strong> <a href="#XREFjavaMethod">javaMethod</a>, <a href="#XREFjavaArray">javaArray</a>. </p>
</dd>
</dl>  <dl class="def"> <dt id="index-javaArray">
<span class="category">: </span><span><em><var>jary</var> =</em> <strong>javaArray</strong> <em>(<var>classname</var>, <var>sz</var>)</em><a href="#index-javaArray" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-javaArray-1">
<span class="category">: </span><span><em><var>jary</var> =</em> <strong>javaArray</strong> <em>(<var>classname</var>, <var>m</var>, <var>n</var>, …)</em><a href="#index-javaArray-1" class="copiable-anchor"> ¶</a></span>
</dt> <dd> <p>Create a Java array of size <var>sz</var> with elements of class <var>classname</var>. </p> <p><var>classname</var> may be a Java object representing a class or a string containing the fully qualified class name. The size of the object may also be specified with individual integer arguments <var>m</var>, <var>n</var>, etc. </p> <p>The generated array is uninitialized. All elements are set to null if <var>classname</var> is a reference type, or to a default value (usually 0) if <var>classname</var> is a primitive type. </p> <p>Sample code: </p> <pre class="example" data-language="matlab">jary = javaArray ("java.lang.String", 2, 2);
jary(1,1) = "Hello";</pre> <p><strong>See also:</strong> <a href="#XREFjavaObject">javaObject</a>. </p>
</dd>
</dl> <p>There are many different variable types in Octave, but only ones created through <code>javaObject</code> can use Java functions. Before using Java with an unknown object the type can be checked with <code>isjava</code>. </p> <dl class="def"> <dt id="index-isjava">
<span class="category">: </span><span><em><var>tf</var> =</em> <strong>isjava</strong> <em>(<var>x</var>)</em><a href="#index-isjava" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Return true if <var>x</var> is a Java object. </p> <p><strong>See also:</strong> <a href="built_002din-data-types.html#XREFclass">class</a>, <a href="data-types.html#XREFtypeinfo">typeinfo</a>, <a href="built_002din-data-types.html#XREFisa">isa</a>, <a href="#XREFjavaObject">javaObject</a>. </p>
</dd>
</dl> <p>Once an object has been created it is natural to find out what fields the object has, and to read (get) and write (set) them. </p>  <p>In Octave the <code>fieldnames</code> function for structures has been overloaded to return the fields of a Java object. For example: </p> <pre class="example" data-language="matlab">dobj = javaObject ("java.lang.Double", pi);
fieldnames (dobj)
⇒
{
  [1,1] = public static final double java.lang.Double.POSITIVE_INFINITY
  [1,2] = public static final double java.lang.Double.NEGATIVE_INFINITY
  [1,3] = public static final double java.lang.Double.NaN
  [1,4] = public static final double java.lang.Double.MAX_VALUE
  [1,5] = public static final double java.lang.Double.MIN_NORMAL
  [1,6] = public static final double java.lang.Double.MIN_VALUE
  [1,7] = public static final int java.lang.Double.MAX_EXPONENT
  [1,8] = public static final int java.lang.Double.MIN_EXPONENT
  [1,9] = public static final int java.lang.Double.SIZE
  [1,10] = public static final java.lang.Class java.lang.Double.TYPE
}</pre>  <p>The analogy of objects with structures is carried over into reading and writing object fields. To read a field the object is indexed with the ‘<samp>.</samp>’ operator from structures. This is the preferred method for reading fields, but Octave also provides a function interface to read fields with <code>java_get</code>. An example of both styles is shown below. </p> <pre class="example" data-language="matlab">dobj = javaObject ("java.lang.Double", pi);
dobj.MAX_VALUE
⇒  1.7977e+308
java_get ("java.lang.Float", "MAX_VALUE")
⇒  3.4028e+38</pre> <dl class="def"> <dt id="index-java_005fget">
<span class="category">: </span><span><em><var>val</var> =</em> <strong>java_get</strong> <em>(<var>obj</var>, <var>name</var>)</em><a href="#index-java_005fget" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Get the value of the field <var>name</var> of the Java object <var>obj</var>. </p> <p>For static fields, <var>obj</var> can be a string representing the fully qualified name of the corresponding class. </p> <p>When <var>obj</var> is a regular Java object, structure-like indexing can be used as a shortcut syntax. For instance, the following two statements are equivalent </p> <pre class="example" data-language="matlab">java_get (x, "field1")
  x.field1</pre> <p><strong>See also:</strong> <a href="#XREFjava_005fset">java_set</a>, <a href="#XREFjavaMethod">javaMethod</a>, <a href="#XREFjavaObject">javaObject</a>. </p>
</dd>
</dl>  <dl class="def"> <dt id="index-java_005fset">
<span class="category">: </span><span><em><var>obj</var> =</em> <strong>java_set</strong> <em>(<var>obj</var>, <var>name</var>, <var>val</var>)</em><a href="#index-java_005fset" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Set the value of the field <var>name</var> of the Java object <var>obj</var> to <var>val</var>. </p> <p>For static fields, <var>obj</var> can be a string representing the fully qualified named of the corresponding Java class. </p> <p>When <var>obj</var> is a regular Java object, structure-like indexing can be used as a shortcut syntax. For instance, the following two statements are equivalent </p> <pre class="example" data-language="matlab">java_set (x, "field1", val)
  x.field1 = val</pre> <p><strong>See also:</strong> <a href="#XREFjava_005fget">java_get</a>, <a href="#XREFjavaMethod">javaMethod</a>, <a href="#XREFjavaObject">javaObject</a>. </p>
</dd>
</dl>  <p>To see what functions can be called with an object use <code>methods</code>. For example, using the previously created <var>dobj</var>: </p> <pre class="example" data-language="matlab">methods (dobj)
⇒
Methods for class java.lang.Double:
boolean equals(java.lang.Object)
java.lang.String toString(double)
java.lang.String toString()
…</pre> <p>To call a method of an object the same structure indexing operator ‘<samp>.</samp>’ is used. Octave also provides a functional interface to calling the methods of an object through <code>javaMethod</code>. An example showing both styles is shown below. </p> <pre class="example" data-language="matlab">dobj = javaObject ("java.lang.Double", pi);
dobj.equals (3)
⇒  0
javaMethod ("equals", dobj, pi)
⇒  1</pre>  <dl class="def"> <dt id="index-javaMethod">
<span class="category">: </span><span><em><var>ret</var> =</em> <strong>javaMethod</strong> <em>(<var>methodname</var>, <var>obj</var>)</em><a href="#index-javaMethod" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-javaMethod-1">
<span class="category">: </span><span><em><var>ret</var> =</em> <strong>javaMethod</strong> <em>(<var>methodname</var>, <var>obj</var>, <var>arg1</var>, …)</em><a href="#index-javaMethod-1" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Invoke the method <var>methodname</var> on the Java object <var>obj</var> with the arguments <var>arg1</var>, …. </p> <p>For static methods, <var>obj</var> can be a string representing the fully qualified name of the corresponding class. </p> <p>When <var>obj</var> is a regular Java object, structure-like indexing can be used as a shortcut syntax. For instance, the two following statements are equivalent </p> <pre class="example" data-language="matlab">ret = javaMethod ("method1", x, 1.0, "a string")
  ret = x.method1 (1.0, "a string")</pre> <p><code>javaMethod</code> returns the result of the method invocation. </p> <p><strong>See also:</strong> <a href="creating-a-class.html#XREFmethods">methods</a>, <a href="#XREFjavaObject">javaObject</a>. </p>
</dd>
</dl> <p>The following three functions are used to display and modify the class path used by the Java Virtual Machine. This is entirely separate from Octave’s <code>PATH</code> variable and is used by the JVM to find the correct code to execute. </p>      <dl class="def"> <dt id="index-javaclasspath">
<span class="category">: </span><span> <strong>javaclasspath</strong> <em>()</em><a href="#index-javaclasspath" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-javaclasspath-1">
<span class="category">: </span><span><em><var>dpath</var> =</em> <strong>javaclasspath</strong> <em>()</em><a href="#index-javaclasspath-1" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-javaclasspath-2">
<span class="category">: </span><span><em>[<var>dpath</var>, <var>spath</var>] =</em> <strong>javaclasspath</strong> <em>()</em><a href="#index-javaclasspath-2" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-javaclasspath-3">
<span class="category">: </span><span><em><var>clspath</var> =</em> <strong>javaclasspath</strong> <em>(<var>what</var>)</em><a href="#index-javaclasspath-3" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Return the class path of the Java virtual machine in the form of a cell array of strings. </p> <p>If called with no inputs: </p> <ul> <li> If no output is requested, the dynamic and static classpaths are printed to the standard output. </li>
<li> If one output value <var>dpath</var> is requested, the result is the dynamic classpath. </li>
<li> If two output values<var>dpath</var> and <var>spath</var> are requested, the first variable will contain the dynamic classpath and the second will contain the static classpath. </li>
</ul> <p>If called with a single input parameter <var>what</var>: </p> <dl compact> <dt><span><code>"-dynamic"</code></span></dt> <dd>
<p>Return the dynamic classpath. </p> </dd> <dt><span><code>"-static"</code></span></dt> <dd>
<p>Return the static classpath. </p> </dd> <dt><span><code>"-all"</code></span></dt> <dd><p>Return both the static and dynamic classpath in a single cellstr. </p></dd> </dl> <p><strong>See also:</strong> <a href="#XREFjavaaddpath">javaaddpath</a>, <a href="#XREFjavarmpath">javarmpath</a>. </p>
</dd>
</dl>      <dl class="def"> <dt id="index-javaaddpath-1">
<span class="category">: </span><span> <strong>javaaddpath</strong> <em>(<var>clspath</var>)</em><a href="#index-javaaddpath-1" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-javaaddpath-2">
<span class="category">: </span><span> <strong>javaaddpath</strong> <em>(<var>clspath1</var>, …)</em><a href="#index-javaaddpath-2" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-javaaddpath-3">
<span class="category">: </span><span> <strong>javaaddpath</strong> <em>({<var>clspath1</var>, …})</em><a href="#index-javaaddpath-3" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-javaaddpath-4">
<span class="category">: </span><span> <strong>javaaddpath</strong> <em>(…, "-end")</em><a href="#index-javaaddpath-4" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Add <var>clspath</var> to the beginning of the dynamic class path of the Java virtual machine. </p> <p><var>clspath</var> may either be a directory where <samp>.class</samp> files are found, or a <samp>.jar</samp> file containing Java classes. Multiple paths may be added at once by specifying additional arguments, or by using a cell array of strings. </p> <p>If the final argument is <code>"-end"</code>, append the new element to the end of the current classpath. </p> <p><strong>See also:</strong> <a href="#XREFjavarmpath">javarmpath</a>, <a href="#XREFjavaclasspath">javaclasspath</a>. </p>
</dd>
</dl>   <dl class="def"> <dt id="index-javarmpath">
<span class="category">: </span><span> <strong>javarmpath</strong> <em>(<var>clspath</var>)</em><a href="#index-javarmpath" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-javarmpath-1">
<span class="category">: </span><span> <strong>javarmpath</strong> <em>(<var>clspath1</var>, …)</em><a href="#index-javarmpath-1" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-javarmpath-2">
<span class="category">: </span><span> <strong>javarmpath</strong> <em>({<var>clspath1</var>, …})</em><a href="#index-javarmpath-2" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Remove <var>clspath</var> from the dynamic class path of the Java virtual machine. </p> <p><var>clspath</var> may either be a directory where <samp>.class</samp> files are found, or a <samp>.jar</samp> file containing Java classes. Multiple paths may be removed at once by specifying additional arguments, or by using a cell array of strings. </p> <p><strong>See also:</strong> <a href="#XREFjavaaddpath">javaaddpath</a>, <a href="#XREFjavaclasspath">javaclasspath</a>. </p>
</dd>
</dl> <p>The following functions provide information and control over the interface between Octave and the Java Virtual Machine. </p> <dl class="def"> <dt id="index-javachk">
<span class="category">: </span><span><em><var>msg</var> =</em> <strong>javachk</strong> <em>(<var>feature</var>)</em><a href="#index-javachk" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-javachk-1">
<span class="category">: </span><span><em><var>msg</var> =</em> <strong>javachk</strong> <em>(<var>feature</var>, <var>caller</var>)</em><a href="#index-javachk-1" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Check for the presence of the Java <var>feature</var> in the current session. Return an error structure if <var>feature</var> is not available, not enabled, or not recognized. </p> <p>Possible recognized features are: </p> <dl compact> <dt><span><code>"awt"</code></span></dt> <dd>
<p>Abstract Window Toolkit for GUIs. </p> </dd> <dt><span><code>"desktop"</code></span></dt> <dd>
<p>Interactive desktop is running. </p> </dd> <dt><span><code>"jvm"</code></span></dt> <dd>
<p>Java Virtual Machine. </p> </dd> <dt><span><code>"swing"</code></span></dt> <dd><p>Swing components for lightweight GUIs. </p></dd> </dl> <p>If <var>feature</var> is not supported, a scalar struct with field <code>"message"</code> and <code>"identifier"</code> is returned. The field <code>"message"</code> contains an error message mentioning <var>feature</var> as well as the optional user-specified <var>caller</var>. This structure is suitable for passing in to the <code>error</code> function. </p> <p>If <var>feature</var> is supported and available, an empty struct array is returned with fields <code>"message"</code> and <code>"identifier"</code>. </p> <p><code>javachk</code> determines if specific Java features are available in an Octave session. This function is provided for scripts which may alter their behavior based on the availability of Java or specific Java runtime features. </p> <p>Compatibility Note: The feature <code>"desktop"</code> is never available since Octave has no Java-based desktop. </p> <p><strong>See also:</strong> <a href="#XREFusejava">usejava</a>, <a href="raising-errors.html#XREFerror">error</a>. </p>
</dd>
</dl> <dl class="def"> <dt id="index-usejava">
<span class="category">: </span><span><em><var>tf</var> =</em> <strong>usejava</strong> <em>(<var>feature</var>)</em><a href="#index-usejava" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Return true if the Java element <var>feature</var> is available. </p> <p>Possible features are: </p> <dl compact> <dt><span><code>"awt"</code></span></dt> <dd>
<p>Abstract Window Toolkit for GUIs. </p> </dd> <dt><span><code>"desktop"</code></span></dt> <dd>
<p>Interactive desktop is running. </p> </dd> <dt><span><code>"jvm"</code></span></dt> <dd>
<p>Java Virtual Machine. </p> </dd> <dt><span><code>"swing"</code></span></dt> <dd><p>Swing components for lightweight GUIs. </p></dd> </dl> <p><code>usejava</code> determines if specific Java features are available in an Octave session. This function is provided for scripts which may alter their behavior based on the availability of Java. The feature <code>"desktop"</code> always returns <code>false</code> as Octave has no Java-based desktop. Other features may be available if Octave was compiled with the Java Interface and Java is installed. </p> <p><strong>See also:</strong> <a href="#XREFjavachk">javachk</a>. </p>
</dd>
</dl>  <dl class="def"> <dt id="index-javamem">
<span class="category">: </span><span> <strong>javamem</strong> <em>()</em><a href="#index-javamem" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-javamem-1">
<span class="category">: </span><span><em><var>jmem</var> =</em> <strong>javamem</strong> <em>()</em><a href="#index-javamem-1" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Show the current memory usage of the Java virtual machine (JVM) and run the garbage collector. </p> <p>When no return argument is given the info is printed to the screen. Otherwise, the output cell array <var>jmem</var> contains Maximum, Total, and Free memory (in bytes). </p> <p>All Java-based routines are run in the JVM’s shared memory pool, a dedicated and separate part of memory claimed by the JVM from your computer’s total memory (which comprises physical RAM and virtual memory / swap space on hard disk). </p> <p>The maximum allowable memory usage can be configured using the file <samp>java.opts</samp>. The directory where this file resides is determined by the environment variable <code><span class="nolinebreak">OCTAVE_JAVA_DIR</span></code>. If unset, the directory where <samp>javaaddpath.m</samp> resides is used instead (typically <samp><code><span class="nolinebreak">OCTAVE_HOME</span></code>/share/octave/<code><span class="nolinebreak">OCTAVE_VERSION</span></code>/m/java/</samp>). </p> <p><samp>java.opts</samp> is a plain text file with one option per line. The default initial memory size and default maximum memory size (which are both system dependent) can be overridden like so: </p> <p>-Xms64m </p> <p>-Xmx512m </p> <p>(in megabytes in this example). You can adapt these values to your own requirements if your system has limited available physical memory or if you get Java memory errors. </p> <p><code>"Total memory"</code> is what the operating system has currently assigned to the JVM and depends on actual and active memory usage. <code>"Free memory"</code> is self-explanatory. During operation of Java-based Octave functions the amount of Total and Free memory will vary, due to Java’s own cleaning up and your operating system’s memory management. </p>
</dd>
</dl> <dl class="def"> <dt id="index-java_005fmatrix_005fautoconversion">
<span class="category">: </span><span><em><var>val</var> =</em> <strong>java_matrix_autoconversion</strong> <em>()</em><a href="#index-java_005fmatrix_005fautoconversion" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-java_005fmatrix_005fautoconversion-1">
<span class="category">: </span><span><em><var>old_val</var> =</em> <strong>java_matrix_autoconversion</strong> <em>(<var>new_val</var>)</em><a href="#index-java_005fmatrix_005fautoconversion-1" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-java_005fmatrix_005fautoconversion-2">
<span class="category">: </span><span><em><var>old_val</var> =</em> <strong>java_matrix_autoconversion</strong> <em>(<var>new_val</var>, "local")</em><a href="#index-java_005fmatrix_005fautoconversion-2" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Query or set the internal variable that controls whether Java arrays are automatically converted to Octave matrices. </p> <p>The default value is false. </p> <p>When called from inside a function with the <code>"local"</code> option, the variable is changed locally for the function and any subroutines it calls. The original variable value is restored when exiting the function. </p> <p><strong>See also:</strong> <a href="#XREFjava_005funsigned_005fautoconversion">java_unsigned_autoconversion</a>, <a href="#XREFdebug_005fjava">debug_java</a>. </p>
</dd>
</dl> <dl class="def"> <dt id="index-java_005funsigned_005fautoconversion">
<span class="category">: </span><span><em><var>val</var> =</em> <strong>java_unsigned_autoconversion</strong> <em>()</em><a href="#index-java_005funsigned_005fautoconversion" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-java_005funsigned_005fautoconversion-1">
<span class="category">: </span><span><em><var>old_val</var> =</em> <strong>java_unsigned_autoconversion</strong> <em>(<var>new_val</var>)</em><a href="#index-java_005funsigned_005fautoconversion-1" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-java_005funsigned_005fautoconversion-2">
<span class="category">: </span><span><em><var>old_val</var> =</em> <strong>java_unsigned_autoconversion</strong> <em>(<var>new_val</var>, "local")</em><a href="#index-java_005funsigned_005fautoconversion-2" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Query or set the internal variable that controls how integer classes are converted when <code>java_matrix_autoconversion</code> is enabled. </p> <p>When enabled, Java arrays of class Byte or Integer are converted to matrices of class uint8 or uint32 respectively. The default value is true. </p> <p>When called from inside a function with the <code>"local"</code> option, the variable is changed locally for the function and any subroutines it calls. The original variable value is restored when exiting the function. </p> <p><strong>See also:</strong> <a href="#XREFjava_005fmatrix_005fautoconversion">java_matrix_autoconversion</a>, <a href="#XREFdebug_005fjava">debug_java</a>. </p>
</dd>
</dl> <dl class="def"> <dt id="index-debug_005fjava">
<span class="category">: </span><span><em><var>val</var> =</em> <strong>debug_java</strong> <em>()</em><a href="#index-debug_005fjava" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-debug_005fjava-1">
<span class="category">: </span><span><em><var>old_val</var> =</em> <strong>debug_java</strong> <em>(<var>new_val</var>)</em><a href="#index-debug_005fjava-1" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-debug_005fjava-2">
<span class="category">: </span><span><em><var>old_val</var> =</em> <strong>debug_java</strong> <em>(<var>new_val</var>, "local")</em><a href="#index-debug_005fjava-2" class="copiable-anchor"> ¶</a></span>
</dt> <dd>
<p>Query or set the internal variable that determines whether extra debugging information regarding the initialization of the JVM and any Java exceptions is printed. </p> <p>When called from inside a function with the <code>"local"</code> option, the variable is changed locally for the function and any subroutines it calls. The original variable value is restored when exiting the function. </p> <p><strong>See also:</strong> <a href="#XREFjava_005fmatrix_005fautoconversion">java_matrix_autoconversion</a>, <a href="#XREFjava_005funsigned_005fautoconversion">java_unsigned_autoconversion</a>. </p>
</dd>
</dl> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1996–2023 The Octave Project Developers<br>Permission is granted to make and distribute verbatim copies of this manual provided the copyright notice and this permission notice are preserved on all copies.<br/>Permission is granted to copy and distribute modified versions of this manual under the conditions for verbatim copying, provided that the entire resulting derived work is distributed under the terms of a permission notice identical to this one.</br>Permission is granted to copy and distribute translations of this manual into another language, under the above conditions for modified versions.<br>
    <a href="https://docs.octave.org/v8.1.0/Java-Interface-Functions.html" class="_attribution-link">https://docs.octave.org/v8.1.0/Java-Interface-Functions.html</a>
  </p>
</div>
