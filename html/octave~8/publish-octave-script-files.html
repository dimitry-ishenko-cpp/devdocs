<div class="subsection" id="Publish-Octave-Script-Files">   <h1 class="subsection">11.11.1 Publish Octave Script Files</h1> <p>The function <code>publish</code> provides a dynamic possibility to document your script file. Unlike static documentation, <code>publish</code> runs the script file, saves any figures and output while running the script, and presents them alongside static documentation in a desired output format. The static documentation can make use of <a href="publishing-markup.html">Publishing Markup</a> to enhance and customize the output. </p> <dl class="def"> <dt id="index-publish">
<span class="category">: </span><span> <strong>publish</strong> <em>(<var>file</var>)</em><a href="#index-publish" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-publish-1">
<span class="category">: </span><span> <strong>publish</strong> <em>(<var>file</var>, <var>output_format</var>)</em><a href="#index-publish-1" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-publish-2">
<span class="category">: </span><span> <strong>publish</strong> <em>(<var>file</var>, <var>option1</var>, <var>value1</var>, …)</em><a href="#index-publish-2" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-publish-3">
<span class="category">: </span><span> <strong>publish</strong> <em>(<var>file</var>, <var>options</var>)</em><a href="#index-publish-3" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-publish-4">
<span class="category">: </span><span><em><var>output_file</var> =</em> <strong>publish</strong> <em>(<var>file</var>, …)</em><a href="#index-publish-4" class="copiable-anchor"> ¶</a></span>
</dt> <dd> <p>Generate a report from the Octave script file <var>file</var> in one of several output formats. </p> <p>The generated reports interpret Publishing Markup in section comments, which is explained in detail in the GNU Octave manual. Section comments are comment blocks that start with a line with double comment character. </p> <p>Assume the following example, using some Publishing Markup, to be the contents of the script file <samp>pub_example.m</samp>: </p> <pre class="example" data-language="matlab">## Headline title
#
# Some *bold*, _italic_, or |monospaced| Text with
# a &lt;https://www.octave.org link to *GNU Octave*&gt;.
##

# "Real" Octave commands to be evaluated
sombrero ()

%% MATLAB comment style ('%') is supported as well
%
% * Bulleted list item 1
% * Bulleted list item 2
%
% # Numbered list item 1
% # Numbered list item 2</pre> <p>To publish this script file, type <code>publish ("pub_example.m")</code>. </p> <p>When called with one input argument, a HTML report is generated in a subdirectory <samp>html</samp> relative to the current working directory. Any Octave commands in <samp>pub_example.m</samp> are evaluated in a separate context and any figures created while executing the script file are included in the report. </p> <p>Using <code>publish (<var>file</var>, <var>output_format</var>)</code> is equivalent to the function call using a structure </p> <pre class="example" data-language="matlab">options.format = output_format;
publish (file, options)</pre> <p>which is described below. The same holds for using option/value pairs </p> <pre class="example" data-language="matlab">options.option1 = value1;
publish (file, options)</pre> <p>The structure <var>options</var> can have the following field names. If a field name is not specified, the default value is used: </p> <ul> <li> ‘<samp>format</samp>’ — Output format of the published script file, one of <p>‘<samp>html</samp>’ (default), ‘<samp>doc</samp>’, ‘<samp>latex</samp>’, ‘<samp>ppt</samp>’, ‘<samp>pdf</samp>’, or ‘<samp>xml</samp>’. </p> <p>The output formats ‘<samp>doc</samp>’, ‘<samp>ppt</samp>’, and ‘<samp>xml</samp>’ are not currently supported. To generate a ‘<samp>doc</samp>’ report, open a generated ‘<samp>html</samp>’ report with your office suite. </p> <p>In Octave custom formats are supported by implementing all callback subfunctions in a function file named ‘<samp>__publish_&lt;custom format&gt;_output__.m</samp>’. To obtain a template for the HTML format type: </p> <pre class="example" data-language="matlab">edit (fullfile (fileparts (which ("publish")), ...
      "private", "__publish_html_output__.m"))</pre> </li>
<li> ‘<samp>outputDir</samp>’ — Full path of the directory where the generated report will be located. If no directory is given, the report is generated in a subdirectory <samp>html</samp> relative to the current working directory. </li>
<li> ‘<samp>stylesheet</samp>’ — Not supported, only for <small>MATLAB</small> compatibility. </li>
<li> ‘<samp>createThumbnail</samp>’ — Not supported, only for <small>MATLAB</small> compatibility. </li>
<li> ‘<samp>figureSnapMethod</samp>’ — Not supported, only for <small>MATLAB</small> compatibility. </li>
<li> ‘<samp>imageFormat</samp>’ — Desired format for any images produced while evaluating the code. The allowed image formats depend on the output format: <ul> <li> ‘<samp>html</samp>’, ‘<samp>xml</samp>’ — ‘<samp>png</samp>’ (default), any image format supported by Octave </li>
<li> ‘<samp>latex</samp>’ — ‘<samp>epsc2</samp>’ (default), any image format supported by Octave </li>
<li> ‘<samp>pdf</samp>’ — ‘<samp>jpg</samp>’ (default) or ‘<samp>bmp</samp>’, note <small>MATLAB</small> uses ‘<samp>bmp</samp>’ as default </li>
<li> ‘<samp>doc</samp>’ or ‘<samp>ppt</samp>’ — ‘<samp>png</samp>’ (default), ‘<samp>jpg</samp>’, ‘<samp>bmp</samp>’, or ‘<samp>tiff</samp>’ </li>
</ul> </li>
<li> ‘<samp>maxWidth</samp>’ and ‘<samp>maxHeight</samp>’ — Maximum width (height) of the produced images in pixels. An empty value means no restriction. Both values must be set in order for the option to work properly. <p>‘<samp>[]</samp>’ (default), integer value ≥ 0 </p> </li>
<li> ‘<samp>useNewFigure</samp>’ — Use a new figure window for figures created by the evaluated code. This avoids side effects with already opened figure windows. <p>‘<samp>true</samp>’ (default) or ‘<samp>false</samp>’ </p> </li>
<li> ‘<samp>evalCode</samp>’ — Evaluate code of the Octave source file <p>‘<samp>true</samp>’ (default) or ‘<samp>false</samp>’ </p> </li>
<li> ‘<samp>catchError</samp>’ — Catch errors while evaluating code and continue <p>‘<samp>true</samp>’ (default) or ‘<samp>false</samp>’ </p> </li>
<li> ‘<samp>codeToEvaluate</samp>’ — Octave commands that should be evaluated prior to publishing the script file. These Octave commands do not appear in the generated report. </li>
<li> ‘<samp>maxOutputLines</samp>’ — Maximum number of output lines from code evaluation which are included in output. <p>‘<samp>Inf</samp>’ (default) or integer value &gt; 0 </p> </li>
<li> ‘<samp>showCode</samp>’ — Show the evaluated Octave commands in the generated report <p>‘<samp>true</samp>’ (default) or ‘<samp>false</samp>’ </p>
</li>
</ul> <p>The option output <var>output_file</var> is a string with path and file name of the generated report. </p> <p><strong>See also:</strong> <a href="#XREFgrabcode">grabcode</a>. </p>
</dd>
</dl> <p>The counterpart to <code>publish</code> is <code>grabcode</code>: </p> <dl class="def"> <dt id="index-grabcode">
<span class="category">: </span><span> <strong>grabcode</strong> <em><var>filename</var></em><a href="#index-grabcode" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-grabcode-1">
<span class="category">: </span><span> <strong>grabcode</strong> <em><var>url</var></em><a href="#index-grabcode-1" class="copiable-anchor"> ¶</a></span>
</dt> <dt id="index-grabcode-2">
<span class="category">: </span><span><em><var>code_str</var> =</em> <strong>grabcode</strong> <em>(…)</em><a href="#index-grabcode-2" class="copiable-anchor"> ¶</a></span>
</dt> <dd> <p>Grab the code from a report created by the <code>publish</code> function. </p> <p>The grabbed code inside the published report must be enclosed by the strings ‘<samp>##### SOURCE BEGIN #####</samp>’ and ‘<samp>##### SOURCE END #####</samp>’. The <code>publish</code> function creates this format automatically. </p> <p>If no return value is requested the code is saved to a temporary file and opened in the default editor. NOTE: The temporary file must be saved to a new filename or the code will be lost. </p> <p>If an output is requested the grabbed code will be returned as string <var>code_str</var>. </p> <p>Example: </p> <pre class="example" data-language="matlab">publish ("my_script.m");
grabcode ("html/my_script.html");</pre> <p>The example above publishes <samp>my_script.m</samp> to the default location <samp>html/my_script.html</samp>. Next, the published Octave script is grabbed to edit its content in a new temporary file. </p> <p><strong>See also:</strong> <a href="#XREFpublish">publish</a>. </p>
</dd>
</dl> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1996–2023 The Octave Project Developers<br>Permission is granted to make and distribute verbatim copies of this manual provided the copyright notice and this permission notice are preserved on all copies.<br/>Permission is granted to copy and distribute modified versions of this manual under the conditions for verbatim copying, provided that the entire resulting derived work is distributed under the terms of a permission notice identical to this one.</br>Permission is granted to copy and distribute translations of this manual into another language, under the above conditions for modified versions.<br>
    <a href="https://docs.octave.org/v8.1.0/Publish-Octave-Script-Files.html" class="_attribution-link">https://docs.octave.org/v8.1.0/Publish-Octave-Script-Files.html</a>
  </p>
</div>
