<h1 class="caption">Data.Text.Unsafe</h1>
<div class="_haskell-api">
<table class="info">
<tr>
<th valign="top">Copyright</th>
<td>(c) 2009 2010 2011 Bryan O'Sullivan</td>
</tr>
<tr>
<th>License</th>
<td>BSD-style</td>
</tr>
<tr>
<th>Maintainer</th>
<td>bos@serpentine.com</td>
</tr>
<tr>
<th>Portability</th>
<td>portable</td>
</tr>
<tr>
<th>Safe Haskell</th>
<td>Safe-Inferred</td>
</tr>
<tr>
<th>Language</th>
<td>Haskell2010</td>
</tr>
</table>
<div id="description">
<h4 class="caption">Description</h4>
<p>A module containing unsafe <code><a href="data-text.html#t:Text" title="Data.Text">Text</a></code> operations, for very very careful use in heavily tested code.</p>
</div>
<p class="src"><a id="v:inlineInterleaveST" class="def">inlineInterleaveST</a> :: <a href="../base-4.17.0.0/control-monad-st-safe.html#t:ST" title="Control.Monad.ST.Safe">ST</a> s a -&gt; <a href="../base-4.17.0.0/control-monad-st-safe.html#t:ST" title="Control.Monad.ST.Safe">ST</a> s a <a href="https://downloads.haskell.org/~ghc/9.4.2/docs/libraries/text-2.0.1/src/Data.Text.Internal.Unsafe.html#inlineInterleaveST" class="link">Source</a> </p>
<p>Allow an <code><a href="../base-4.17.0.0/control-monad-st-safe.html#t:ST" title="Control.Monad.ST.Safe">ST</a></code> computation to be deferred lazily. When passed an action of type <code><a href="../base-4.17.0.0/control-monad-st-safe.html#t:ST" title="Control.Monad.ST.Safe">ST</a></code> <code>s</code> <code>a</code>, the action will only be performed when the value of <code>a</code> is demanded.</p>
<p>This function is identical to the normal unsafeInterleaveST, but is inlined and hence faster.</p>
<p><em>Note</em>: This operation is highly unsafe, as it can introduce externally visible non-determinism into an <code><a href="../base-4.17.0.0/control-monad-st-safe.html#t:ST" title="Control.Monad.ST.Safe">ST</a></code> action.</p>
<p class="src"><a id="v:inlinePerformIO" class="def">inlinePerformIO</a> :: <a href="../base-4.17.0.0/system-io.html#t:IO" title="System.IO">IO</a> a -&gt; a <a href="https://downloads.haskell.org/~ghc/9.4.2/docs/libraries/text-2.0.1/src/Data.Text.Internal.Unsafe.html#inlinePerformIO" class="link">Source</a> </p>
<p>Just like unsafePerformIO, but we inline it. Big performance gains as it exposes lots of things to further inlining. <em>Very unsafe</em>. In particular, you should do no memory allocation inside an <code><a href="data-text-unsafe.html#v:inlinePerformIO" title="Data.Text.Unsafe">inlinePerformIO</a></code> block.</p>
<p class="src"><a id="v:unsafeDupablePerformIO" class="def">unsafeDupablePerformIO</a> :: <a href="../base-4.17.0.0/system-io.html#t:IO" title="System.IO">IO</a> a -&gt; a <a href="https://downloads.haskell.org/~ghc/9.4.2/docs/libraries/base-4.17.0.0/src/GHC.IO.Unsafe.html#unsafeDupablePerformIO" class="link">Source</a> </p>
<p>This version of <code><a href="../base-4.17.0.0/system-io-unsafe.html#v:unsafePerformIO" title="System.IO.Unsafe">unsafePerformIO</a></code> is more efficient because it omits the check that the IO is only being performed by a single thread. Hence, when you use <code><a href="data-text-unsafe.html#v:unsafeDupablePerformIO" title="Data.Text.Unsafe">unsafeDupablePerformIO</a></code>, there is a possibility that the IO action may be performed multiple times (on a multiprocessor), and you should therefore ensure that it gives the same results each time. It may even happen that one of the duplicated IO actions is only run partially, and then interrupted in the middle without an exception being raised. Therefore, functions like <code><a href="../base-4.17.0.0/control-exception.html#v:bracket" title="Control.Exception">bracket</a></code> cannot be used safely within <code><a href="data-text-unsafe.html#v:unsafeDupablePerformIO" title="Data.Text.Unsafe">unsafeDupablePerformIO</a></code>.</p>
<p><span class="version">Since: base-4.4.0.0</span></p>
<p class="src">data <a id="t:Iter" class="def">Iter</a> <a href="https://downloads.haskell.org/~ghc/9.4.2/docs/libraries/text-2.0.1/src/Data.Text.Unsafe.html#Iter" class="link">Source</a> </p>
<div class="subs constructors">
<h4 class="caption">Constructors</h4>
<table><tr>
<td class="src">
<a id="v:Iter" class="def">Iter</a> !<a href="../base-4.17.0.0/data-char.html#t:Char" title="Data.Char">Char</a> !<a href="../base-4.17.0.0/data-int.html#t:Int" title="Data.Int">Int</a>
</td>
<td class="doc empty"> </td>
</tr></table>
</div>
<div class="subs instances">
<h5 class="instances details-toggle-control details-toggle" data-details-id="i:Iter">Instances</h5>
<details id="i:Iter" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table>
<tr>
<td class="src clearfix">
 <a href="../base-4.17.0.0/text-show.html#t:Show" title="Text.Show">Show</a> <a href="data-text-unsafe.html#t:Iter" title="Data.Text.Unsafe">Iter</a> <a href="https://downloads.haskell.org/~ghc/9.4.2/docs/libraries/text-2.0.1/src/Data.Text.Unsafe.html#line-69" class="link">Source</a> </td>
<td class="doc empty"> </td>
</tr>
<tr><td colspan="2"><details id="i:id:Iter:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="data-text-unsafe.html">Data.Text.Unsafe</a></p> <div class="subs methods">
<h4 class="caption">Methods</h4>
<p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.17.0.0/data-int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="data-text-unsafe.html#t:Iter" title="Data.Text.Unsafe">Iter</a> -&gt; <a href="../base-4.17.0.0/text-show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="https://downloads.haskell.org/~ghc/9.4.2/docs/libraries/base-4.17.0.0/src/GHC.Show.html#showsPrec" class="link">Source</a> </p>
<p class="src"><a href="#v:show">show</a> :: <a href="data-text-unsafe.html#t:Iter" title="Data.Text.Unsafe">Iter</a> -&gt; <a href="../base-4.17.0.0/data-string.html#t:String" title="Data.String">String</a> <a href="https://downloads.haskell.org/~ghc/9.4.2/docs/libraries/base-4.17.0.0/src/GHC.Show.html#show" class="link">Source</a> </p>
<p class="src"><a href="#v:showList">showList</a> :: [<a href="data-text-unsafe.html#t:Iter" title="Data.Text.Unsafe">Iter</a>] -&gt; <a href="../base-4.17.0.0/text-show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="https://downloads.haskell.org/~ghc/9.4.2/docs/libraries/base-4.17.0.0/src/GHC.Show.html#showList" class="link">Source</a> </p>
</div></details></td></tr>
</table></details>
</div>
<p class="src"><a id="v:iter" class="def">iter</a> :: <a href="data-text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../base-4.17.0.0/data-int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="data-text-unsafe.html#t:Iter" title="Data.Text.Unsafe">Iter</a> <a href="https://downloads.haskell.org/~ghc/9.4.2/docs/libraries/text-2.0.1/src/Data.Text.Unsafe.html#iter" class="link">Source</a> </p>
<p><span class="complexity">O(1)</span> Iterate (unsafely) one step forwards through a UTF-8 array, returning the current character and the delta to add to give the next offset to iterate at.</p>
<p class="src"><a id="v:iterArray" class="def">iterArray</a> :: <a href="data-text-array.html#t:Array" title="Data.Text.Array">Array</a> -&gt; <a href="../base-4.17.0.0/data-int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="data-text-unsafe.html#t:Iter" title="Data.Text.Unsafe">Iter</a> <a href="https://downloads.haskell.org/~ghc/9.4.2/docs/libraries/text-2.0.1/src/Data.Text.Unsafe.html#iterArray" class="link">Source</a> </p>
<p><span class="version">Since: text-2.0</span></p>
<p class="src"><a id="v:iter_" class="def">iter_</a> :: <a href="data-text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../base-4.17.0.0/data-int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.17.0.0/data-int.html#t:Int" title="Data.Int">Int</a> <a href="https://downloads.haskell.org/~ghc/9.4.2/docs/libraries/text-2.0.1/src/Data.Text.Unsafe.html#iter_" class="link">Source</a> </p>
<p><span class="complexity">O(1)</span> Iterate one step through a UTF-8 array, returning the delta to add to give the next offset to iterate at.</p>
<p class="src"><a id="v:reverseIter" class="def">reverseIter</a> :: <a href="data-text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../base-4.17.0.0/data-int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="data-text-unsafe.html#t:Iter" title="Data.Text.Unsafe">Iter</a> <a href="https://downloads.haskell.org/~ghc/9.4.2/docs/libraries/text-2.0.1/src/Data.Text.Unsafe.html#reverseIter" class="link">Source</a> </p>
<p><span class="complexity">O(1)</span> Iterate one step backwards through a UTF-8 array, returning the current character and the delta to add (i.e. a negative number) to give the next offset to iterate at.</p>
<p class="src"><a id="v:reverseIterArray" class="def">reverseIterArray</a> :: <a href="data-text-array.html#t:Array" title="Data.Text.Array">Array</a> -&gt; <a href="../base-4.17.0.0/data-int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="data-text-unsafe.html#t:Iter" title="Data.Text.Unsafe">Iter</a> <a href="https://downloads.haskell.org/~ghc/9.4.2/docs/libraries/text-2.0.1/src/Data.Text.Unsafe.html#reverseIterArray" class="link">Source</a> </p>
<p><span class="version">Since: text-2.0</span></p>
<p class="src"><a id="v:reverseIter_" class="def">reverseIter_</a> :: <a href="data-text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../base-4.17.0.0/data-int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.17.0.0/data-int.html#t:Int" title="Data.Int">Int</a> <a href="https://downloads.haskell.org/~ghc/9.4.2/docs/libraries/text-2.0.1/src/Data.Text.Unsafe.html#reverseIter_" class="link">Source</a> </p>
<p><span class="complexity">O(1)</span> Iterate one step backwards through a UTF-8 array, returning the delta to add (i.e. a negative number) to give the next offset to iterate at.</p>
<p><span class="version">Since: text-1.1.1.0</span></p>
<p class="src"><a id="v:unsafeHead" class="def">unsafeHead</a> :: <a href="data-text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../base-4.17.0.0/data-char.html#t:Char" title="Data.Char">Char</a> <a href="https://downloads.haskell.org/~ghc/9.4.2/docs/libraries/text-2.0.1/src/Data.Text.Unsafe.html#unsafeHead" class="link">Source</a> </p>
<p><span class="complexity">O(1)</span> A variant of <code><a href="../base-4.17.0.0/ghc-list.html#v:head" title="GHC.List">head</a></code> for non-empty <code><a href="data-text.html#t:Text" title="Data.Text">Text</a></code>. <code><a href="data-text-unsafe.html#v:unsafeHead" title="Data.Text.Unsafe">unsafeHead</a></code> omits the check for the empty case, so there is an obligation on the programmer to provide a proof that the <code><a href="data-text.html#t:Text" title="Data.Text">Text</a></code> is non-empty.</p>
<p class="src"><a id="v:unsafeTail" class="def">unsafeTail</a> :: <a href="data-text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="data-text.html#t:Text" title="Data.Text">Text</a> <a href="https://downloads.haskell.org/~ghc/9.4.2/docs/libraries/text-2.0.1/src/Data.Text.Unsafe.html#unsafeTail" class="link">Source</a> </p>
<p><span class="complexity">O(1)</span> A variant of <code><a href="../base-4.17.0.0/ghc-list.html#v:tail" title="GHC.List">tail</a></code> for non-empty <code><a href="data-text.html#t:Text" title="Data.Text">Text</a></code>. <code><a href="data-text-unsafe.html#v:unsafeTail" title="Data.Text.Unsafe">unsafeTail</a></code> omits the check for the empty case, so there is an obligation on the programmer to provide a proof that the <code><a href="data-text.html#t:Text" title="Data.Text">Text</a></code> is non-empty.</p>
<p class="src"><a id="v:lengthWord8" class="def">lengthWord8</a> :: <a href="data-text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../base-4.17.0.0/data-int.html#t:Int" title="Data.Int">Int</a> <a href="https://downloads.haskell.org/~ghc/9.4.2/docs/libraries/text-2.0.1/src/Data.Text.Unsafe.html#lengthWord8" class="link">Source</a> </p>
<p><span class="complexity">O(1)</span> Return the length of a <code><a href="data-text.html#t:Text" title="Data.Text">Text</a></code> in units of <code>Word8</code>. This is useful for sizing a target array appropriately before using <code>unsafeCopyToPtr</code>.</p>
<p><span class="version">Since: text-2.0</span></p>
<p class="src"><a id="v:takeWord8" class="def">takeWord8</a> :: <a href="../base-4.17.0.0/data-int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="data-text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="data-text.html#t:Text" title="Data.Text">Text</a> <a href="https://downloads.haskell.org/~ghc/9.4.2/docs/libraries/text-2.0.1/src/Data.Text.Unsafe.html#takeWord8" class="link">Source</a> </p>
<p><span class="complexity">O(1)</span> Unchecked take of <code>k</code> <code>Word8</code>s from the front of a <code><a href="data-text.html#t:Text" title="Data.Text">Text</a></code>.</p>
<p><span class="version">Since: text-2.0</span></p>
<p class="src"><a id="v:dropWord8" class="def">dropWord8</a> :: <a href="../base-4.17.0.0/data-int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="data-text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="data-text.html#t:Text" title="Data.Text">Text</a> <a href="https://downloads.haskell.org/~ghc/9.4.2/docs/libraries/text-2.0.1/src/Data.Text.Unsafe.html#dropWord8" class="link">Source</a> </p>
<p><span class="complexity">O(1)</span> Unchecked drop of <code>k</code> <code>Word8</code>s from the front of a <code><a href="data-text.html#t:Text" title="Data.Text">Text</a></code>.</p>
<p><span class="version">Since: text-2.0</span></p>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; The University of Glasgow and others<br>Licensed under a BSD-style license (see top of the page).<br>
    <a href="https://downloads.haskell.org/~ghc/9.4.2/docs/libraries/text-2.0.1/Data-Text-Unsafe.html" class="_attribution-link">https://downloads.haskell.org/~ghc/9.4.2/docs/libraries/text-2.0.1/Data-Text-Unsafe.html</a>
  </p>
</div>
