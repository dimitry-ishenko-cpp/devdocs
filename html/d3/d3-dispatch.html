<h1 dir="auto" id="d3-dispatch">
d3-dispatch</h1> <p dir="auto">Dispatching is a convenient mechanism for separating concerns with loosely-coupled code: register named callbacks and then call them with arbitrary arguments. A variety of D3 components, such as <a href="d3-drag.html">d3-drag</a>, use this mechanism to emit events to listeners. Think of this like Node’s <a href="https://nodejs.org/api/events.html" rel="nofollow">EventEmitter</a>, except every listener has a well-defined name so it’s easy to remove or replace them.</p> <p dir="auto">For example, to create a dispatch for <em>start</em> and <em>end</em> events:</p> <pre data-language="javascript">const dispatch = d3.dispatch("start", "end");</pre> <p dir="auto">You can then register callbacks for these events using <a href="#dispatch_on"><em>dispatch</em>.on</a>:</p> <pre data-language="javascript">dispatch.on("start", callback1);
dispatch.on("start.foo", callback2);
dispatch.on("end", callback3);</pre> <p dir="auto">Then, you can invoke all the <em>start</em> callbacks using <a href="#dispatch_call"><em>dispatch</em>.call</a> or <a href="#dispatch_apply"><em>dispatch</em>.apply</a>:</p> <pre data-language="javascript">dispatch.call("start");</pre> <p dir="auto">Like <em>function</em>.call, you may also specify the <code>this</code> context and any arguments:</p> <pre data-language="javascript">dispatch.call("start", {about: "I am a context object"}, "I am an argument");</pre> <p dir="auto">Want a more involved example? See how to use <a href="http://bl.ocks.org/mbostock/5872848" rel="nofollow">d3-dispatch for coordinated views</a>.</p> <h2 dir="auto" id="installing">
Installing</h2> <p dir="auto">If you use npm, <code>npm install d3-dispatch</code>. You can also download the <a href="https://github.com/d3/d3-dispatch/releases/latest">latest release on GitHub</a>. For vanilla HTML in modern browsers, import d3-dispatch from Skypack:</p> <pre data-language="markup">&lt;script type="module"&gt;

import {dispatch} from "https://cdn.skypack.dev/d3-dispatch@3";

const d = dispatch("start", "end");

&lt;/script&gt;</pre> <p dir="auto">For legacy environments, you can load d3-dispatch’s UMD bundle from an npm-based CDN such as jsDelivr; a <code>d3</code> global is exported:</p> <pre data-language="markup">&lt;script src="https://cdn.jsdelivr.net/npm/d3-dispatch@3"&gt;&lt;/script&gt;
&lt;script&gt;

const d = d3.dispatch("start", "end");

&lt;/script&gt;</pre> <p dir="auto"><a href="https://observablehq.com/collection/@d3/d3-dispatch" rel="nofollow">Try d3-dispatch in your browser.</a></p> <h2 dir="auto" id="api-reference">
API Reference</h2> <h6 dir="auto" id="dispatch"> d3.<b>dispatch</b>(<i>types…</i>) · <a href="https://github.com/d3/d3-dispatch/blob/master/src/dispatch.js" class="source">Source</a>
</h6> <p dir="auto">Creates a new dispatch for the specified event <em>types</em>. Each <em>type</em> is a string, such as <code>"start"</code> or <code>"end"</code>.</p> <h6 dir="auto" id="dispatch_on"> <em>dispatch</em>.<b>on</b>(<i>typenames</i>[, <i>callback</i>]) · <a href="https://github.com/d3/d3-dispatch/blob/master/src/dispatch.js" class="source">Source</a>
</h6> <p dir="auto">Adds, removes or gets the <em>callback</em> for the specified <em>typenames</em>. If a <em>callback</em> function is specified, it is registered for the specified (fully-qualified) <em>typenames</em>. If a callback was already registered for the given <em>typenames</em>, the existing callback is removed before the new callback is added.</p> <p dir="auto">The specified <em>typenames</em> is a string, such as <code>start</code> or <code>end.foo</code>. The type may be optionally followed by a period (<code>.</code>) and a name; the optional name allows multiple callbacks to be registered to receive events of the same type, such as <code>start.foo</code> and <code>start.bar</code>. To specify multiple typenames, separate typenames with spaces, such as <code>start end</code> or <code>start.foo start.bar</code>.</p> <p dir="auto">To remove all callbacks for a given name <code>foo</code>, say <code>dispatch.on(".foo", null)</code>.</p> <p dir="auto">If <em>callback</em> is not specified, returns the current callback for the specified <em>typenames</em>, if any. If multiple typenames are specified, the first matching callback is returned.</p> <h6 dir="auto" id="dispatch_copy"> <em>dispatch</em>.<b>copy</b>() · <a href="https://github.com/d3/d3-dispatch/blob/master/src/dispatch.js" class="source">Source</a>
</h6> <p dir="auto">Returns a copy of this dispatch object. Changes to this dispatch do not affect the returned copy and <i>vice versa</i>.</p> <h6 dir="auto" id="dispatch_call"> <em>dispatch</em>.<b>call</b>(<i>type</i>[, <i>that</i>[, <i>arguments…</i>]]) · <a href="https://github.com/d3/d3-dispatch/blob/master/src/dispatch.js" class="source">Source</a>
</h6> <p dir="auto">Like <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/call" rel="nofollow"><em>function</em>.call</a>, invokes each registered callback for the specified <em>type</em>, passing the callback the specified <em>arguments</em>, with <em>that</em> as the <code>this</code> context. See <a href="#dispatch_apply"><em>dispatch</em>.apply</a> for more information.</p> <h6 dir="auto" id="dispatch_apply"> <em>dispatch</em>.<b>apply</b>(<i>type</i>[, <i>that</i>[, <i>arguments</i>]]) · <a href="https://github.com/d3/d3-dispatch/blob/master/src/dispatch.js" class="source">Source</a>
</h6> <p dir="auto">Like <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/call" rel="nofollow"><em>function</em>.apply</a>, invokes each registered callback for the specified <em>type</em>, passing the callback the specified <em>arguments</em>, with <em>that</em> as the <code>this</code> context. For example, if you wanted to dispatch your <em>custom</em> callbacks after handling a native <em>click</em> event, while preserving the current <code>this</code> context and arguments, you could say:</p> <pre data-language="javascript">selection.on("click", function() {
  dispatch.apply("custom", this, arguments);
});</pre> <p dir="auto">You can pass whatever arguments you want to callbacks; most commonly, you might create an object that represents an event, or pass the current datum (<em>d</em>) and index (<em>i</em>). See <a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/Call" rel="nofollow">function.call</a> and <a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/Apply" rel="nofollow">function.apply</a> for further information.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010&ndash;2023 Michael Bostock<br>Licensed under the BSD License.<br>
    <a href="https://github.com/d3/d3-dispatch" class="_attribution-link">https://github.com/d3/d3-dispatch</a>
  </p>
</div>
