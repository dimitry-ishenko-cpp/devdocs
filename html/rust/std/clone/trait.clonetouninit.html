<h1 class="main-heading">Trait CloneToUninit</h1>
<pre class="rust item-decl" data-language="rust">pub unsafe trait CloneToUninit {
    // Required method
    unsafe fn clone_to_uninit(&amp;self, dst: *mut u8);
}</pre>
<span class="item-info"><div class="stab unstable">
<span class="emoji">ðŸ”¬</span><span>This is a nightly-only experimental API. (<code>clone_to_uninit</code> <a href="https://github.com/rust-lang/rust/issues/126799">#126799</a>)</span>
</div></span><p>A generalization of <a href="trait.clone.html" title="trait std::clone::Clone"><code>Clone</code></a> to dynamically-sized types stored in arbitrary containers.</p> <p>This trait is implemented for all types implementing <a href="trait.clone.html" title="trait std::clone::Clone"><code>Clone</code></a>, and also <a href="../primitive.slice.html" title="primitive slice">slices</a> of all such types. You may also implement this trait to enable cloning trait objects and custom DSTs (structures containing dynamically-sized fields).</p> <h2 id="safety">Safety</h2> <p>Implementations must ensure that when <code>.clone_to_uninit(dst)</code> returns normally rather than panicking, it always leaves <code>*dst</code> initialized as a valid value of type <code>Self</code>.</p> <h2 id="see-also">See also</h2> <ul> <li>
<a href="trait.clone.html#method.clone_from" title="method std::clone::Clone::clone_from"><code>Clone::clone_from</code></a> is a safe function which may be used instead when <code>Self</code> is a <a href="../marker/trait.sized.html" title="trait std::marker::Sized"><code>Sized</code></a> and the destination is already initialized; it may be able to reuse allocations owned by the destination.</li> <li>
<a href="../borrow/trait.toowned.html"><code>ToOwned</code></a>, which allocates a new destination container.</li> </ul> <h3 id="required-methods" class="section-header">Required Methods</h3>
<div class="methods">
<summary><section id="tymethod.clone_to_uninit" class="method"><a class="src rightside" href="https://doc.rust-lang.org/src/core/clone.rs.html#269">Source</a><pre class="code-header" data-language="rust">unsafe fn clone_to_uninit(&amp;self, dst: *mut u8)</pre></section><span class="item-info"><div class="stab unstable">
<span class="emoji">ðŸ”¬</span><span>This is a nightly-only experimental API. (<code>clone_to_uninit</code> <a href="https://github.com/rust-lang/rust/issues/126799">#126799</a>)</span>
</div></span></summary><div class="docblock">
<p>Performs copy-assignment from <code>self</code> to <code>dst</code>.</p> <p>This is analogous to <code>std::ptr::write(dst.cast(), self.clone())</code>, except that <code>self</code> may be a dynamically-sized type (<a href="../marker/trait.sized.html" title="trait std::marker::Sized"><code>!Sized</code></a>).</p> <p>Before this function is called, <code>dst</code> may point to uninitialized memory. After this function is called, <code>dst</code> will point to initialized memory; it will be sound to create a <code>&amp;Self</code> reference from the pointer with the <a href="../ptr/fn.metadata.html" title="fn std::ptr::metadata">pointer metadata</a> from <code>self</code>.</p> <h5 id="safety-1">Safety</h5> <p>Behavior is undefined if any of the following conditions are violated:</p> <ul> <li>
<code>dst</code> must be <a href="../ptr/index.html#safety" title="mod std::ptr">valid</a> for writes for <code>std::mem::size_of_val(self)</code> bytes.</li> <li>
<code>dst</code> must be properly aligned to <code>std::mem::align_of_val(self)</code>.</li> </ul> <h5 id="panics">Panics</h5> <p>This function may panic. (For example, it might panic if memory allocation for a clone of a value owned by <code>self</code> fails.) If the call panics, then <code>*dst</code> should be treated as uninitialized memory; it must not be read or dropped, because even if it was previously valid, it may have been partially overwritten.</p> <p>The caller may also need to take care to deallocate the allocation pointed to by <code>dst</code>, if applicable, to avoid a memory leak, and may need to take other precautions to ensure soundness in the presence of unwinding.</p> <p>Implementors should avoid leaking values by, upon unwinding, dropping all component values that might have already been created. (For example, if a <code>[Foo]</code> of length 3 is being cloned, and the second of the three calls to <code>Foo::clone()</code> unwinds, then the first <code>Foo</code> cloned should be dropped.)</p> </div>
</div>
<h3 id="implementors" class="section-header">Implementors</h3>
<div id="implementors-list">
<section id="impl-CloneToUninit-for-str" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/src/core/clone.rs.html#293">Source</a><pre class="code-header" data-language="rust">impl CloneToUninit for str</pre></section><section id="impl-CloneToUninit-for-CStr" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/src/core/clone.rs.html#303">Source</a><pre class="code-header" data-language="rust">impl CloneToUninit for CStr</pre></section><section id="impl-CloneToUninit-for-OsStr" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/src/std/ffi/os_str.rs.html#1282-1289">Source</a><pre class="code-header" data-language="rust">impl CloneToUninit for OsStr</pre></section><section id="impl-CloneToUninit-for-Path" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/src/std/path.rs.html#3175-3182">Source</a><pre class="code-header" data-language="rust">impl CloneToUninit for Path</pre></section><section id="impl-CloneToUninit-for-%5BT%5D" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/src/core/clone.rs.html#282">Source</a><pre class="code-header" data-language="rust">impl&lt;T&gt; CloneToUninit for [T]where
    T: Clone,</pre></section><section id="impl-CloneToUninit-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/src/core/clone.rs.html#273">Source</a><pre class="code-header" data-language="rust">impl&lt;T&gt; CloneToUninit for Twhere
    T: Clone,</pre></section>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010 The Rust Project Developers<br>Licensed under the Apache License, Version 2.0 or the MIT license, at your option.<br>
    <a href="https://doc.rust-lang.org/std/clone/trait.CloneToUninit.html" class="_attribution-link">https://doc.rust-lang.org/std/clone/trait.CloneToUninit.html</a>
  </p>
</div>
