  <div class="innertube"> <h2 id="module" class="title-link"> <div class="title-name">Module</div>  </h2> <div class="REFBODY module-body">ssh_client_key_api</div> </div> <div class="innertube"> <h2 id="module-summary" class="title-link"> <div class="title-name">Module Summary</div>  </h2> <div class="REFBODY module-summary-body"> -behaviour(ssh_client_key_api). </div> <h2 id="since" class="title-link"> <div class="title-name">Since</div>  </h2> <div class="REFBODY module-since"> Module ssh_client_key_api was introduced in OTP R16B. </div> </div> <section class="description"><div class="innertube"> <h2 id="description" class="title-link"> <div class="title-name">Description</div>  </h2> <div class="REFBODY description-body">

<p>Behavior describing the API for public key handling of an SSH client. By implementing the callbacks defined in this behavior, the public key handling of an SSH client can be customized. By default the <code>ssh</code> application implements this behavior with help of the standard OpenSSH files, see the <code><span> ssh(6)</span></code> application manual.</p> </div> </div></section> <div class="innertube"> <h2 id="data-types" class="title-link"> <div class="title-name">Data Types</div>  </h2> <article class="data-types-body"><h3 id="type-client_key_cb_options" class="title-link data-type-name">  <div class="title-name"> <pre data-language="erlang"><code><a name="type-client_key_cb_options">client_key_cb_options(T)</a> = 
 [{key_cb_private, [T]} | <a href="ssh.html#type-client_option">ssh:client_option()</a>]</code></pre>
<br> </div> </h3> <div class="data-type-desc"><div class="REFBODY rb-7"> <p>Options provided to <code><a href="ssh.html#connect-3">ssh:connect/[3,4]</a></code>. </p> <p>The option list given in the <code><a href="ssh.html#type-key_cb_common_option">key_cb</a></code> option is available with the key <code>key_cb_private</code>. </p> </div></div></article> </div> <div class="innertube"><h2 id="export" class="title-link"> <div class="title-name">Exports</div>  </h2></div> <div class="exports-body"> <article class="func"><div class="bold_code func-head"><h3 id="Module:add_host_key-3" class="title-link">  <div class="title-name">Module:add_host_key(HostNames, PublicHostKey, ConnectOptions) -&gt; ok | {error, Reason}</div> <div class="title-since"><span class="since">OTP R16B</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>HostNames = string()</code><br> </div> <div class="REFBODY rb-6">Description of the host that owns the <code>PublicHostKey</code>.</div> <div class="REFTYPES rt-4"> <code>PublicHostKey = public_key:public_key()</code><br> </div> <div class="REFBODY rb-6">Of ECDSA keys, only the Normally an RSA, DSA or ECDSA public key, but handling of other public keys can be added.</div> <div class="REFTYPES rt-4"> <code>ConnectOptions = <a href="#type-client_key_cb_options">client_key_cb_options()</a></code><br> </div> </div> <div class="REFBODY rb-7"> <p>This function is retired in favour for <code>Module:add_host_key/4</code> which is the preferred API function. The calling SSH application will still try the <code>add_host_key/3</code> if the call to <code>add_host_key/4</code> failed. </p> <p>Adds a host key to the set of trusted host keys.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="Module:add_host_key-4" class="title-link">  <div class="title-name">Module:add_host_key(Host, Port, PublicHostKey, ConnectOptions) -&gt; ok | {error, Reason}</div> <div class="title-since"><span class="since">OTP R16B</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>Host = inet:ip_address() | inet:hostname() | [ inet:ip_address() | inet:hostname() ]</code><br> </div> <div class="REFBODY rb-6">The host that owns the <code>PublicHostKey</code>. One or more IP addresses or hostnames.</div> <div class="REFTYPES rt-4"> <code>Port = inet:port_number()</code><br> </div> <div class="REFBODY rb-6">The Port number of the Host.</div> <div class="REFTYPES rt-4"> <code>PublicHostKey = public_key:public_key()</code><br> </div> <div class="REFBODY rb-6">Of ECDSA keys, only the Normally an RSA, DSA or ECDSA public key, but handling of other public keys can be added.</div> <div class="REFTYPES rt-4"> <code>ConnectOptions = <a href="#type-client_key_cb_options">client_key_cb_options()</a></code><br> </div> </div> <div class="REFBODY rb-7"> <p>Adds a host key to the set of trusted host keys.</p> <p>This function is preferred to the old <code>Module:add_host_key/3</code> since it also uses the peer host port number and may return an error message.</p> <p>The OTP/SSH application first calls this function in the callback module, and then the old <code>Module:add_host_key/3</code> for compatibility.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="Module:is_host_key-4" class="title-link">  <div class="title-name">Module:is_host_key(Key, Host, Algorithm, ConnectOptions) -&gt; Result</div> <div class="title-since"><span class="since">OTP R16B</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>Key = public_key:public_key()</code><br> </div> <div class="REFBODY rb-6">Normally an RSA, DSA or ECDSA public key, but handling of other public keys can be added.</div> <div class="REFTYPES rt-4"> <code>Host = string()</code><br> </div> <div class="REFBODY rb-6">Description of the host.</div> <div class="REFTYPES rt-4"> <code>Algorithm = <a href="ssh.html#type-pubkey_alg">ssh:pubkey_alg()</a></code><br> </div> <div class="REFBODY rb-6">Host key algorithm.</div> <div class="REFTYPES rt-4"> <code>ConnectOptions = <a href="#type-client_key_cb_options">client_key_cb_options()</a></code><br> </div> <div class="REFTYPES rt-4"> <code>Result = boolean()</code><br> </div> </div> <div class="REFBODY rb-7"> <p>This function is retired in favour for <code>Module:is_host_key/5</code> which is the preferred API function. The calling SSH application will still try the <code>is_host_key/4</code> if the call to <code>is_host_key/5</code> failed. </p> <p>Checks if a host key is trusted.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="Module:is_host_key-5" class="title-link">  <div class="title-name">Module:is_host_key(Key, Host, Port, Algorithm, ConnectOptions) -&gt; Result</div> <div class="title-since"><span class="since">OTP 23.0</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>Key = public_key:public_key()</code><br> </div> <div class="REFBODY rb-6">Normally an RSA, DSA or ECDSA public key, but handling of other public keys can be added.</div> <div class="REFTYPES rt-4"> <code>Host = inet:ip_address() | inet:hostname() | [ inet:ip_address() | inet:hostname() ]</code><br> </div> <div class="REFBODY rb-6">Description of the host with one or more IP addresses or hostnames.</div> <div class="REFTYPES rt-4"> <code>Port = inet:port_number()</code><br> </div> <div class="REFBODY rb-6">The Port number of the host.</div> <div class="REFTYPES rt-4"> <code>Algorithm = <a href="ssh.html#type-pubkey_alg">ssh:pubkey_alg()</a></code><br> </div> <div class="REFBODY rb-6">Host key algorithm.</div> <div class="REFTYPES rt-4"> <code>ConnectOptions = <a href="#type-client_key_cb_options">client_key_cb_options()</a></code><br> </div> <div class="REFTYPES rt-4"> <code>Result = boolean() | {error, Error::term()}</code><br> </div> <div class="REFBODY rb-6">The exact error message depends on the actual callback module. The Error message makes the connection to fail, and is returned from e.g ssh:connect/3.</div> </div> <div class="REFBODY rb-7"> <p>Checks if a host key is trusted.</p> <p>This function is preferred to the old <code>Module:is_host_key/4</code> since it also uses the peer host port number and may return an error message.</p> <p>The OTP/SSH application first calls this function in the callback module, and then the old <code>Module:is_host_key/4</code> for compatibility.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="Module:user_key-2" class="title-link">  <div class="title-name">Module:user_key(Algorithm, ConnectOptions) -&gt; Result</div> <div class="title-since"><span class="since">OTP R16B</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>Algorithm = <a href="ssh.html#type-pubkey_alg">ssh:pubkey_alg()</a></code><br> </div> <div class="REFBODY rb-6">Host key algorithm.</div> <div class="REFTYPES rt-4"> <code>ConnectOptions = <a href="#type-client_key_cb_options">client_key_cb_options()</a></code><br> </div> <div class="REFTYPES rt-4"> <code>Result = {ok, public_key:private_key()} | {ok, {ssh2_pubkey, PubKeyBlob :: binary()}} | {error, term()}</code><br> </div> </div> <div class="REFBODY rb-7"> <p>Fetches the users <strong>public key</strong> matching the <code>Algorithm</code>. Some key callback modules may return <code>{ssh2_pubkey, PubKeyBlob :: binary()}</code>.</p> <div class="note"> <div class="label">Note</div> <div class="content">

<p>The private key contains the public key.</p>
</div> </div> </div> </div></article> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010&ndash;2023 Ericsson AB<br>Licensed under the Apache License, Version 2.0.<br>
    
  </p>
</div>
