  <div class="innertube"> <h2 id="module" class="title-link"> <div class="title-name">Module</div>  </h2> <div class="REFBODY module-body">ssh_sftp</div> </div> <div class="innertube"> <h2 id="module-summary" class="title-link"> <div class="title-name">Module Summary</div>  </h2> <div class="REFBODY module-summary-body">SFTP client.</div> </div> <section class="description"><div class="innertube"> <h2 id="description" class="title-link"> <div class="title-name">Description</div>  </h2> <div class="REFBODY description-body">

<p>This module implements an SSH FTP (SFTP) client. SFTP is a secure, encrypted file transfer service available for SSH.</p> </div> </div></section> <div class="innertube"> <h2 id="data-types" class="title-link"> <div class="title-name">Data Types</div>  </h2> <article class="data-types-body"><h3 id="type-sftp_option" class="title-link data-type-name">  <div class="title-name"> <pre data-language="erlang"><code><a name="type-sftp_option">sftp_option()</a> = 
 {timeout, timeout()} |
 {sftp_vsn, integer() &gt;= 1} |
 {window_size, integer() &gt;= 1} |
 {packet_size, integer() &gt;= 1}</code></pre>
<br> </div> </h3> </article> <h3 id="Error cause" class="title-link"> <div class="title-name">Error cause</div>  </h3> <article class="data-types-body"><h3 id="type-reason" class="title-link data-type-name">  <div class="title-name"> <code><a name="type-reason">reason()</a> = atom() | string() | tuple()</code><br> </div> </h3> <div class="data-type-desc"><div class="REFBODY rb-7"> <p>A description of the reason why an operation failed.</p> <p>The <code>atom()</code> value is formed from the sftp error codes in the protocol-level responses as defined in <code><a href="https://tools.ietf.org/html/draft-ietf-secsh-filexfer-13#page-49">draft-ietf-secsh-filexfer-13</a></code> section 9.1. The codes are named as <code>SSH_FX_*</code> which are transformed into lowercase of the star-part. E.g. the error code <code>SSH_FX_NO_SUCH_FILE</code> will cause the <code>reason()</code> to be <code>no_such_file</code>. </p> <p>The <code>string()</code> reason is the error information from the server in case of an exit-signal. If that information is empty, the reason is the exit signal name. </p> <p>The <code>tuple()</code> reason are other errors like for example <code>{exit_status,1}</code>. </p> </div></div></article> <h3 id="Crypto operations for open_tar" class="title-link"> <div class="title-name">Crypto operations for open_tar</div>  </h3> <article class="data-types-body"><h3 id="type-tar_crypto_spec" class="title-link data-type-name">  <div class="title-name"> <code><a name="type-tar_crypto_spec">tar_crypto_spec()</a> = <a href="#type-encrypt_spec">encrypt_spec()</a> | <a href="#type-decrypt_spec">decrypt_spec()</a></code><br> <code><a name="type-encrypt_spec">encrypt_spec()</a> = {<a href="#type-init_fun">init_fun()</a>, <a href="#type-crypto_fun">crypto_fun()</a>, <a href="#type-final_fun">final_fun()</a>}</code><br> <code><a name="type-decrypt_spec">decrypt_spec()</a> = {<a href="#type-init_fun">init_fun()</a>, <a href="#type-crypto_fun">crypto_fun()</a>}</code><br> </div> </h3> <div class="data-type-desc"><div class="REFBODY rb-7"> <p>Specifies the encryption or decryption applied to tar files when using <code><a href="#open_tar-3">open_tar/3</a></code> or <code><a href="#open_tar-4">open_tar/4</a></code>. </p> <p>The encryption or decryption is applied to the generated stream of bytes prior to sending the resulting stream to the SFTP server. </p> <p>For code examples see Section <code><a href="using_ssh.html#example-with-encryption">Example with encryption</a></code> in the ssh Users Guide. </p> </div></div></article> <article class="data-types-body"><h3 id="type-init_fun" class="title-link data-type-name">  <div class="title-name"> <pre data-language="erlang"><code><a name="type-init_fun">init_fun()</a> = 
 fun(() -&gt; {ok, <a href="#type-crypto_state">crypto_state()</a>}) |
 fun(() -&gt; {ok, <a href="#type-crypto_state">crypto_state()</a>, <a href="#type-chunk_size">chunk_size()</a>})</code></pre>
<br> <code><a name="type-chunk_size">chunk_size()</a> = undefined | integer() &gt;= 1</code><br> <code><a name="type-crypto_state">crypto_state()</a> = any()</code><br> </div> </h3> <div class="data-type-desc"><div class="REFBODY rb-7"> <p>The <code>init_fun()</code> in the <code><a href="#type-tar_crypto_spec">tar_crypto_spec</a></code> is applied once prior to any other <code>crypto</code> operation. The intention is that this function initiates the encryption or decryption for example by calling <code>crypto:crypto_init/4</code> or similar. The <code>crypto_state()</code> is the state such a function may return. </p> <p>If the selected cipher needs to have the input data partitioned into blocks of a certain size, the <code>init_fun()</code> should return the second form of return value with the <code>chunk_size()</code> set to the block size. If the <code>chunk_size()</code> is <code>undefined</code>, the size of the <code>PlainBin</code>s varies, because this is intended for stream crypto, whereas a fixed <code>chunk_size()</code> is intended for block crypto. A <code>chunk_size()</code> can be changed in the return from the <code>crypto_fun()</code>. The value can be changed between <code>pos_integer()</code> and <code>undefined</code>. </p> </div></div></article> <article class="data-types-body"><h3 id="type-crypto_fun" class="title-link data-type-name">  <div class="title-name"> <pre data-language="erlang"><code><a name="type-crypto_fun">crypto_fun()</a> = 
 fun((TextIn :: binary(), <a href="#type-crypto_state">crypto_state()</a>) -&gt; <a href="#type-crypto_result">crypto_result()</a>)</code></pre>
<br> <pre data-language="erlang"><code><a name="type-crypto_result">crypto_result()</a> = 
 {ok, TextOut :: binary(), <a href="#type-crypto_state">crypto_state()</a>} |
 {ok, TextOut :: binary(), <a href="#type-crypto_state">crypto_state()</a>, <a href="#type-chunk_size">chunk_size()</a>}</code></pre>
<br> </div> </h3> <div class="data-type-desc"><div class="REFBODY rb-7"> <p>The initial <code>crypto_state()</code> returned from the <code><a href="#type-init_fun">init_fun()</a></code> is folded into repeated applications of the <code>crypto_fun()</code> in the <code><a href="#type-tar_crypto_spec">tar_crypto_spec</a></code>. The binary returned from that fun is sent to the remote SFTP server and the new <code>crypto_state()</code> is used in the next call of the <code>crypto_fun()</code>. </p> <p>If the <code>crypto_fun()</code> reurns a <code>chunk_size()</code>, that value is as block size for further blocks in calls to <code>crypto_fun()</code>. </p> </div></div></article> <article class="data-types-body"><h3 id="type-final_fun" class="title-link data-type-name">  <div class="title-name"> <pre data-language="erlang"><code><a name="type-final_fun">final_fun()</a> = 
 fun((FinalTextIn :: binary(), <a href="#type-crypto_state">crypto_state()</a>) -&gt;
 {ok, FinalTextOut :: binary()})</code></pre>
<br> </div> </h3> <div class="data-type-desc"><div class="REFBODY rb-7"> <p>If doing encryption, the <code>final_fun()</code> in the <code><a href="#type-tar_crypto_spec">tar_crypto_spec</a></code> is applied to the last piece of data. The <code>final_fun()</code> is responsible for padding (if needed) and encryption of that last piece. </p> </div></div></article> </div> <div class="innertube"><h2 id="export" class="title-link"> <div class="title-name">Exports</div>  </h2></div> <div class="exports-body"> <article class="func"><h3 id="apread-4" class="bold_code title-link func-head">  <code>apread(ChannelPid, Handle, Position, Len) -&gt; {async, N} | Error</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>ChannelPid = pid()</code></div> <div class="REFTYPES rt-1"><code>Handle = term()</code></div> <div class="REFTYPES rt-1"><code>Position = Len = integer()</code></div>  <div class="REFTYPES rt-1"><code>Error = {error, <a href="#type-reason">reason()</a>}</code></div> <div class="REFTYPES rt-1"><code>N = term()</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>The <code>apread/4</code> function reads from a specified position, combining the <code><a href="#position-3">position/3</a></code> and <code><a href="#aread-3">aread/3</a></code> functions.</p> </div></div></article><article class="func"><h3 id="apwrite-4" class="bold_code title-link func-head">  <code>apwrite(ChannelPid, Handle, Position, Data) -&gt; {async, N} | Error</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>ChannelPid = pid()</code></div> <div class="REFTYPES rt-1"><code>Handle = term()</code></div> <div class="REFTYPES rt-1"><code>Position = integer()</code></div> <div class="REFTYPES rt-1"><code>Data = binary()</code></div> <div class="REFTYPES rt-1"><code>Error = {error, <a href="#type-reason">reason()</a>}</code></div> <div class="REFTYPES rt-1"><code>N = term()</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>The <code>apwrite/4</code> function writes to a specified position, combining the <code><a href="#position-3">position/3</a></code> and <code><a href="#awrite-3">awrite/3</a></code> functions.</p> </div></div></article><article class="func"><h3 id="aread-3" class="bold_code title-link func-head">  <code>aread(ChannelPid, Handle, Len) -&gt; {async, N} | Error</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>ChannelPid = pid()</code></div> <div class="REFTYPES rt-1"><code>Handle = term()</code></div> <div class="REFTYPES rt-1"><code>Len = integer()</code></div> <div class="REFTYPES rt-1"><code>Error = {error, <a href="#type-reason">reason()</a>}</code></div> <div class="REFTYPES rt-1"><code>N = term()</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Reads from an open file, without waiting for the result. If the handle is valid, the function returns <code>{async, N}</code>, where <code>N</code> is a term guaranteed to be unique between calls of <code>aread</code>. The actual data is sent as a message to the calling process. This message has the form <code>{async_reply, N, Result}</code>, where <code>Result</code> is the result from the read, either <code>{ok, Data}</code>, <code>eof</code>, or <code>{error, reason()}</code>.</p> </div></div></article><article class="func"><h3 id="awrite-3" class="bold_code title-link func-head">  <code>awrite(ChannelPid, Handle, Data) -&gt; {async, N} | Error</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>ChannelPid = pid()</code></div> <div class="REFTYPES rt-1"><code>Handle = term()</code></div> <div class="REFTYPES rt-1"><code>Data = binary()</code></div> <div class="REFTYPES rt-1"><code>Error = {error, <a href="#type-reason">reason()</a>}</code></div> <div class="REFTYPES rt-1"><code>N = term()</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Writes to an open file, without waiting for the result. If the handle is valid, the function returns <code>{async, N}</code>, where <code>N</code> is a term guaranteed to be unique between calls of <code>awrite</code>. The result of the <code>write</code> operation is sent as a message to the calling process. This message has the form <code>{async_reply, N, Result}</code>, where <code>Result</code> is the result from the write, either <code>ok</code>, or <code>{error, reason()}</code>.</p> </div></div></article><article class="func"><h3 id="close-2" class="bold_code title-link func-head">  <code>close(ChannelPid, Handle) -&gt; ok | Error</code> </h3> <h3 id="close-3" class="bold_code title-link func-head">  <code>close(ChannelPid, Handle, Timeout) -&gt; ok | Error</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>ChannelPid = pid()</code></div> <div class="REFTYPES rt-1"><code>Handle = term()</code></div> <div class="REFTYPES rt-1"><code>Timeout = timeout()</code></div> <div class="REFTYPES rt-1"><code>Error = {error, <a href="#type-reason">reason()</a>}</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Closes a handle to an open file or directory on the server.</p> </div></div></article><article class="func"><h3 id="delete-2" class="bold_code title-link func-head">  <code>delete(ChannelPid, Name) -&gt; ok | Error</code> </h3> <h3 id="delete-3" class="bold_code title-link func-head">  <code>delete(ChannelPid, Name, Timeout) -&gt; ok | Error</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>ChannelPid = pid()</code></div> <div class="REFTYPES rt-1"><code>Name = string()</code></div> <div class="REFTYPES rt-1"><code>Timeout = timeout()</code></div> <div class="REFTYPES rt-1"><code>Error = {error, <a href="#type-reason">reason()</a>}</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Deletes the file specified by <code>Name</code>. </p> </div></div></article><article class="func"><h3 id="del_dir-2" class="bold_code title-link func-head">  <code>del_dir(ChannelPid, Name) -&gt; ok | Error</code> </h3> <h3 id="del_dir-3" class="bold_code title-link func-head">  <code>del_dir(ChannelPid, Name, Timeout) -&gt; ok | Error</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>ChannelPid = pid()</code></div> <div class="REFTYPES rt-1"><code>Name = string()</code></div> <div class="REFTYPES rt-1"><code>Timeout = timeout()</code></div> <div class="REFTYPES rt-1"><code>Error = {error, <a href="#type-reason">reason()</a>}</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Deletes a directory specified by <code>Name</code>. The directory must be empty before it can be successfully deleted. </p> </div></div></article><article class="func"><h3 id="list_dir-2" class="bold_code title-link func-head">  <code>list_dir(ChannelPid, Path) -&gt; {ok, FileNames} | Error</code> </h3> <h3 id="list_dir-3" class="bold_code title-link func-head">  <code>list_dir(ChannelPid, Path, Timeout) -&gt; {ok, FileNames} | Error</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>ChannelPid = pid()</code></div> <div class="REFTYPES rt-1"><code>Path = string()</code></div> <div class="REFTYPES rt-1"><code>Timeout = timeout()</code></div> <div class="REFTYPES rt-1"><code>FileNames = [FileName]</code></div> <div class="REFTYPES rt-1"><code>FileName = string()</code></div> <div class="REFTYPES rt-1"><code>Error = {error, <a href="#type-reason">reason()</a>}</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Lists the given directory on the server, returning the filenames as a list of strings.</p> </div></div></article><article class="func"><h3 id="make_dir-2" class="bold_code title-link func-head">  <code>make_dir(ChannelPid, Name) -&gt; ok | Error</code> </h3> <h3 id="make_dir-3" class="bold_code title-link func-head">  <code>make_dir(ChannelPid, Name, Timeout) -&gt; ok | Error</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>ChannelPid = pid()</code></div> <div class="REFTYPES rt-1"><code>Name = string()</code></div> <div class="REFTYPES rt-1"><code>Timeout = timeout()</code></div> <div class="REFTYPES rt-1"><code>Error = {error, <a href="#type-reason">reason()</a>}</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Creates a directory specified by <code>Name</code>. <code>Name</code> must be a full path to a new directory. The directory can only be created in an existing directory.</p> </div></div></article><article class="func"><h3 id="make_symlink-3" class="bold_code title-link func-head">  <code>make_symlink(ChannelPid, Name, Target) -&gt; ok | Error</code> </h3> <h3 id="make_symlink-4" class="bold_code title-link func-head">  <code>make_symlink(ChannelPid, Name, Target, Timeout) -&gt; ok | Error</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>ChannelPid = pid()</code></div> <div class="REFTYPES rt-1"><code>Name = Target = string()</code></div>  <div class="REFTYPES rt-1"><code>Timeout = timeout()</code></div> <div class="REFTYPES rt-1"><code>Error = {error, <a href="#type-reason">reason()</a>}</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Creates a symbolic link pointing to <code>Target</code> with the name <code>Name</code>. </p> </div></div></article><article class="func"><h3 id="open-3" class="bold_code title-link func-head">  <code>open(ChannelPid, Name, Mode) -&gt; {ok, Handle} | Error</code> </h3> <h3 id="open-4" class="bold_code title-link func-head">  <code>open(ChannelPid, Name, Mode, Timeout) -&gt; {ok, Handle} | Error</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>ChannelPid = pid()</code></div> <div class="REFTYPES rt-1"><code>Name = string()</code></div> <div class="REFTYPES rt-1"><code>Mode = [read | write | append | binary | raw]</code></div> <div class="REFTYPES rt-1"><code>Timeout = timeout()</code></div> <div class="REFTYPES rt-1"><code>Handle = term()</code></div> <div class="REFTYPES rt-1"><code>Error = {error, <a href="#type-reason">reason()</a>}</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Opens a file on the server and returns a handle, which can be used for reading or writing.</p> </div></div></article><article class="func"><h3 id="opendir-2" class="bold_code title-link func-head">  <code>opendir(ChannelPid, Path) -&gt; {ok, Handle} | Error</code> </h3> <h3 id="opendir-3" class="bold_code title-link func-head">  <code>opendir(ChannelPid, Path, Timeout) -&gt; {ok, Handle} | Error</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>ChannelPid = pid()</code></div> <div class="REFTYPES rt-1"><code>Path = string()</code></div> <div class="REFTYPES rt-1"><code>Timeout = timeout()</code></div> <div class="REFTYPES rt-1"><code>Handle = term()</code></div> <div class="REFTYPES rt-1"><code>Error = {error, <a href="#type-reason">reason()</a>}</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Opens a handle to a directory on the server. The handle can be used for reading directory contents.</p> </div></div></article><article class="func"><h3 id="open_tar-3" class="bold_code title-link func-head">  <code>open_tar(ChannelPid, Path, Mode) -&gt; {ok, Handle} | Error</code><div class="title-since"><span class="since">OTP 17.4</span></div> </h3> <h3 id="open_tar-4" class="bold_code title-link func-head">  <code>open_tar(ChannelPid, Path, Mode, Timeout) -&gt; {ok, Handle} | Error</code><div class="title-since"><span class="since">OTP 17.4</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>ChannelPid = pid()</code></div> <div class="REFTYPES rt-1"><code>Path = string()</code></div> <div class="REFTYPES rt-1"><code>Mode = [read | write | {crypto, <a href="#type-tar_crypto_spec">tar_crypto_spec()</a>}]</code></div> <div class="REFTYPES rt-1"><code>Timeout = timeout()</code></div> <div class="REFTYPES rt-1"><code>Handle = term()</code></div> <div class="REFTYPES rt-1"><code>Error = {error, <a href="#type-reason">reason()</a>}</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Opens a handle to a tar file on the server, associated with <code>ChannelPid</code>. The handle can be used for remote tar creation and extraction. The actual writing and reading is performed by calls to <code>erl_tar:add/3,4</code> and <code>erl_tar:extract/2</code>. Note: The <code>erl_tar:init/3</code> function should not be called, that one is called by this open_tar function. </p> <p>For code examples see Section <code><a href="using_ssh.html#sftp-client-with-tar-compression">SFTP Client with TAR Compression</a></code> in the ssh Users Guide. </p> <p>The <code>crypto</code> mode option is explained in the data types section above, see <code><a href="#Crypto%20operations%20for%20open_tar">Crypto operations for open_tar</a></code>. Encryption is assumed if the <code>Mode</code> contains <code>write</code>, and decryption if the <code>Mode</code> contains <code>read</code>. </p> </div></div></article><article class="func"><h3 id="position-3" class="bold_code title-link func-head">  <pre data-language="erlang"><code>position(ChannelPid, Handle, Location) -&gt;
 {ok, NewPosition} | Error</code></pre> </h3> <h3 id="position-4" class="bold_code title-link func-head">  <pre data-language="erlang"><code>position(ChannelPid, Handle, Location, Timeout) -&gt;
 {ok, NewPosition} | Error</code></pre> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>ChannelPid = pid()</code></div> <div class="REFTYPES rt-1"><code>Handle = term()</code></div> <div class="REFTYPES rt-1"><pre><code>Location = 
 Offset |
 {bof, Offset} |
 {cur, Offset} |
 {eof, Offset} |
 bof | cur | eof</code></pre></div> <div class="REFTYPES rt-1"><code>Timeout = timeout()</code></div> <div class="REFTYPES rt-1"><code>Offset = NewPosition = integer()</code></div>  <div class="REFTYPES rt-1"><code>Error = {error, <a href="#type-reason">reason()</a>}</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Sets the file position of the file referenced by <code>Handle</code>. Returns <code>{ok, NewPosition}</code> (as an absolute offset) if successful, otherwise <code>{error, reason()}</code>. <code>Location</code> is one of the following:</p> <dl> <dt class="title-link"><strong><code>Offset</code></strong></dt> <dd> <p>The same as <code>{bof, Offset}</code>.</p> </dd> <dt class="title-link"><strong><code>{bof, Offset}</code></strong></dt> <dd> <p>Absolute offset.</p> </dd> <dt class="title-link"><strong><code>{cur, Offset}</code></strong></dt> <dd> <p>Offset from the current position.</p> </dd> <dt class="title-link"><strong><code>{eof, Offset}</code></strong></dt> <dd> <p>Offset from the end of file.</p> </dd> <dt class="title-link"><strong><code>bof | cur | eof</code></strong></dt> <dd> <p>The same as eariler with <code>Offset</code> 0, that is, <code>{bof, 0} | {cur, 0} | {eof, 0}</code>. </p> </dd> </dl> </div></div></article><article class="func"><h3 id="pread-4" class="bold_code title-link func-head">  <pre data-language="erlang"><code>pread(ChannelPid, Handle, Position, Len) -&gt;
 {ok, Data} | eof | Error</code></pre> </h3> <h3 id="pread-5" class="bold_code title-link func-head">  <pre data-language="erlang"><code>pread(ChannelPid, Handle, Position, Len, Timeout) -&gt;
 {ok, Data} | eof | Error</code></pre> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>ChannelPid = pid()</code></div> <div class="REFTYPES rt-1"><code>Handle = term()</code></div> <div class="REFTYPES rt-1"><code>Position = Len = integer()</code></div>  <div class="REFTYPES rt-1"><code>Timeout = timeout()</code></div> <div class="REFTYPES rt-1"><code>Data = string() | binary()</code></div> <div class="REFTYPES rt-1"><code>Error = {error, <a href="#type-reason">reason()</a>}</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>The <code>pread/3,4</code> function reads from a specified position, combining the <code><a href="#position-3">position/3</a></code> and <code><a href="#read-3">read/3,4</a></code> functions.</p> </div></div></article><article class="func"><h3 id="pwrite-4" class="bold_code title-link func-head">  <code>pwrite(ChannelPid, Handle, Position, Data) -&gt; ok | Error</code> </h3> <h3 id="pwrite-5" class="bold_code title-link func-head">  <code>pwrite(ChannelPid, Handle, Position, Data, Timeout) -&gt; ok | Error</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>ChannelPid = pid()</code></div> <div class="REFTYPES rt-1"><code>Handle = term()</code></div> <div class="REFTYPES rt-1"><code>Position = integer()</code></div> <div class="REFTYPES rt-1"><code>Data = iolist()</code></div> <div class="REFTYPES rt-1"><code>Timeout = timeout()</code></div> <div class="REFTYPES rt-1"><code>Error = {error, <a href="#type-reason">reason()</a>}</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>The <code>pwrite/3,4</code> function writes to a specified position, combining the <code><a href="#position-3">position/3</a></code> and <code><a href="#write-3">write/3,4</a></code> functions.</p> </div></div></article><article class="func"><h3 id="read-3" class="bold_code title-link func-head">  <code>read(ChannelPid, Handle, Len) -&gt; {ok, Data} | eof | Error</code> </h3> <h3 id="read-4" class="bold_code title-link func-head">  <code>read(ChannelPid, Handle, Len, Timeout) -&gt; {ok, Data} | eof | Error</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>ChannelPid = pid()</code></div> <div class="REFTYPES rt-1"><code>Handle = term()</code></div> <div class="REFTYPES rt-1"><code>Len = integer()</code></div> <div class="REFTYPES rt-1"><code>Timeout = timeout()</code></div> <div class="REFTYPES rt-1"><code>Data = string() | binary()</code></div> <div class="REFTYPES rt-1"><code>Error = {error, <a href="#type-reason">reason()</a>}</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Reads <code>Len</code> bytes from the file referenced by <code>Handle</code>. Returns <code>{ok, Data}</code>, <code>eof</code>, or <code>{error, reason()}</code>. If the file is opened with <code>binary</code>, <code>Data</code> is a binary, otherwise it is a string.</p> <p>If the file is read past <code>eof</code>, only the remaining bytes are read and returned. If no bytes are read, <code>eof</code> is returned.</p> </div></div></article><article class="func"><h3 id="read_file-2" class="bold_code title-link func-head">  <code>read_file(ChannelPid, File) -&gt; {ok, Data} | Error</code> </h3> <h3 id="read_file-3" class="bold_code title-link func-head">  <code>read_file(ChannelPid, File, Timeout) -&gt; {ok, Data} | Error</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>ChannelPid = pid()</code></div> <div class="REFTYPES rt-1"><code>File = string()</code></div> <div class="REFTYPES rt-1"><code>Data = binary()</code></div> <div class="REFTYPES rt-1"><code>Timeout = timeout()</code></div> <div class="REFTYPES rt-1"><code>Error = {error, <a href="#type-reason">reason()</a>}</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Reads a file from the server, and returns the data in a binary.</p> </div></div></article><article class="func"><h3 id="read_file_info-2" class="bold_code title-link func-head">  <code>read_file_info(ChannelPid, Name) -&gt; {ok, FileInfo} | Error</code> </h3> <h3 id="read_file_info-3" class="bold_code title-link func-head">  <pre data-language="erlang"><code>read_file_info(ChannelPid, Name, Timeout) -&gt;
 {ok, FileInfo} | Error</code></pre> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>ChannelPid = pid()</code></div> <div class="REFTYPES rt-1"><code>Name = string()</code></div> <div class="REFTYPES rt-1"><code>Timeout = timeout()</code></div> <div class="REFTYPES rt-1"><code>FileInfo = file:file_info()</code></div> <div class="REFTYPES rt-1"><code>Error = {error, <a href="#type-reason">reason()</a>}</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Returns a <code>file_info</code> record from the file system object specified by <code>Name</code> or <code>Handle</code>. See <code>file:read_file_info/2</code> for information about the record. </p> <p> Depending on the underlying OS:es links might be followed and info on the final file, directory etc is returned. See <code><a href="#read_link_info-2">read_link_info/2</a></code> on how to get information on links instead. </p> </div></div></article><article class="func"><h3 id="read_link-2" class="bold_code title-link func-head">  <code>read_link(ChannelPid, Name) -&gt; {ok, Target} | Error</code> </h3> <h3 id="read_link-3" class="bold_code title-link func-head">  <code>read_link(ChannelPid, Name, Timeout) -&gt; {ok, Target} | Error</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>ChannelPid = pid()</code></div> <div class="REFTYPES rt-1"><code>Name = Target = string()</code></div>  <div class="REFTYPES rt-1"><code>Timeout = timeout()</code></div> <div class="REFTYPES rt-1"><code>Error = {error, <a href="#type-reason">reason()</a>}</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Reads the link target from the symbolic link specified by <code>name</code>. </p> </div></div></article><article class="func"><h3 id="read_link_info-2" class="bold_code title-link func-head">  <code>read_link_info(ChannelPid, Name) -&gt; {ok, FileInfo} | Error</code> </h3> <h3 id="read_link_info-3" class="bold_code title-link func-head">  <pre data-language="erlang"><code>read_link_info(ChannelPid, Name, Timeout) -&gt;
 {ok, FileInfo} | Error</code></pre> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>ChannelPid = pid()</code></div> <div class="REFTYPES rt-1"><code>Name = string()</code></div> <div class="REFTYPES rt-1"><code>FileInfo = file:file_info()</code></div> <div class="REFTYPES rt-1"><code>Timeout = timeout()</code></div> <div class="REFTYPES rt-1"><code>Error = {error, <a href="#type-reason">reason()</a>}</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Returns a <code>file_info</code> record from the symbolic link specified by <code>Name</code> or <code>Handle</code>. See <code>file:read_link_info/2</code> for information about the record. </p> </div></div></article><article class="func"><h3 id="rename-3" class="bold_code title-link func-head">  <code>rename(ChannelPid, OldName, NewName) -&gt; ok | Error</code> </h3> <h3 id="rename-4" class="bold_code title-link func-head">  <code>rename(ChannelPid, OldName, NewName, Timeout) -&gt; ok | Error</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>ChannelPid = pid()</code></div> <div class="REFTYPES rt-1"><code>OldName = NewName = string()</code></div>  <div class="REFTYPES rt-1"><code>Timeout = timeout()</code></div> <div class="REFTYPES rt-1"><code>Error = {error, <a href="#type-reason">reason()</a>}</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Renames a file named <code>OldName</code> and gives it the name <code>NewName</code>. </p> </div></div></article><article class="func"><div class="bold_code func-head"><h3 id="start_channel-1" class="title-link">  <div class="title-name">start_channel(ConnectionRef) -&gt;</div> </h3></div> <div class="bold_code func-head"><h3 id="start_channel-2" class="title-link">  <div class="title-name">start_channel(ConnectionRef, SftpOptions) -&gt; {ok, ChannelPid} | Error</div> </h3></div> <div class="bold_code func-head"><h3 id="start_channel-1" class="title-link">  <div class="title-name">start_channel(Host) -&gt;</div> </h3></div> <div class="bold_code func-head"><h3 id="start_channel-2" class="title-link">  <div class="title-name">start_channel(Host, Options) -&gt;</div> </h3></div> <div class="bold_code func-head"><h3 id="start_channel-3" class="title-link">  <div class="title-name">start_channel(Host, Port, Options) -&gt;</div> </h3></div> <div class="bold_code func-head"><h3 id="start_channel-1" class="title-link">  <div class="title-name">start_channel(TcpSocket) -&gt;</div> </h3></div> <div class="bold_code func-head"><h3 id="start_channel-2" class="title-link">  <div class="title-name">start_channel(TcpSocket, Options) -&gt; {ok, ChannelPid, ConnectionRef} | Error</div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>Host = ssh:host()</code><br> </div> <div class="REFTYPES rt-4"> <code>Port = inet:port_number()</code><br> </div> <div class="REFTYPES rt-4"> <code>TcpSocket = ssh:open_socket()</code><br> </div> <div class="REFTYPES rt-4"> <code>Options = [ <a href="#type-sftp_option">sftp_option()</a> | ssh:client_option() ]</code><br> </div> <div class="REFTYPES rt-4"> <code>SftpOptions = [ <a href="#type-sftp_option">sftp_option()</a> ]</code><br> </div> <div class="REFTYPES rt-4"> <code>ChannelPid = pid()</code><br> </div> <div class="REFTYPES rt-4"> <code>ConnectionRef = ssh:connection_ref()</code><br> </div> <div class="REFTYPES rt-4"> <code>Error = {error, <a href="#type-reason">reason()</a>}</code><br> </div> </div> <div class="REFBODY rb-7"> <p>If no connection reference is provided, a connection is set up, and the new connection is returned. An SSH channel process is started to handle the communication with the SFTP server. The returned <code>pid</code> for this process is to be used as input to all other API functions in this module.</p> <p>Options:</p> <dl> <dt class="title-link"><strong><code>{timeout, timeout()}</code></strong></dt> <dd> <p>There are two ways to set a timeout for the underlying ssh connection:</p> <ul> <li>If the connection timeout option <code>connect_timeout</code> is set, that value is used also for the negotiation timeout and this option (<code>timeout</code>) is ignored.</li> <li>Otherwise, this option (<code>timeout</code>) is used as the negotiation timeout only and there is no connection timeout set</li> </ul> <p>The value defaults to <code>infinity</code>.</p> </dd> <dt class="title-link"><strong> <code>{sftp_vsn, integer()}</code> </strong></dt> <dd> <p> Desired SFTP protocol version. The actual version is the minimum of the desired version and the maximum supported versions by the SFTP server. </p> </dd> </dl> <p>All other options are directly passed to <code><a href="ssh.html">ssh:connect/3</a></code> or ignored if a connection is already provided.</p> </div> </div></article><article class="func"><h3 id="stop_channel-1" class="bold_code title-link func-head">  <code>stop_channel(ChannelPid) -&gt; ok</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>ChannelPid = pid()</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Stops an SFTP channel. Does not close the SSH connection. Use <code><a href="ssh.html#close-1">ssh:close/1</a></code> to close it.</p> </div></div></article><article class="func"><h3 id="write-3" class="bold_code title-link func-head">  <code>write(ChannelPid, Handle, Data) -&gt; ok | Error</code> </h3> <h3 id="write-4" class="bold_code title-link func-head">  <code>write(ChannelPid, Handle, Data, Timeout) -&gt; ok | Error</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>ChannelPid = pid()</code></div> <div class="REFTYPES rt-1"><code>Handle = term()</code></div> <div class="REFTYPES rt-1"><code>Data = iodata()</code></div> <div class="REFTYPES rt-1"><code>Timeout = timeout()</code></div> <div class="REFTYPES rt-1"><code>Error = {error, <a href="#type-reason">reason()</a>}</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Writes <code>data</code> to the file referenced by <code>Handle</code>. The file is to be opened with <code>write</code> or <code>append</code> flag. Returns <code>ok</code> if successful or <code>{error, reason()}</code> otherwise.</p> </div></div></article><article class="func"><h3 id="write_file-3" class="bold_code title-link func-head">  <code>write_file(ChannelPid, File, Data) -&gt; ok | Error</code> </h3> <h3 id="write_file-4" class="bold_code title-link func-head">  <code>write_file(ChannelPid, File, Data, Timeout) -&gt; ok | Error</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>ChannelPid = pid()</code></div> <div class="REFTYPES rt-1"><code>File = string()</code></div> <div class="REFTYPES rt-1"><code>Data = iodata()</code></div> <div class="REFTYPES rt-1"><code>Timeout = timeout()</code></div> <div class="REFTYPES rt-1"><code>Error = {error, <a href="#type-reason">reason()</a>}</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Writes a file to the server. The file is created if it does not exist but overwritten if it exists.</p> </div></div></article><article class="func"><h3 id="write_file_info-3" class="bold_code title-link func-head">  <code>write_file_info(ChannelPid, Name, FileInfo) -&gt; ok | Error</code> </h3> <h3 id="write_file_info-4" class="bold_code title-link func-head">  <code>write_file_info(ChannelPid, Name, FileInfo, Timeout) -&gt; ok | Error</code> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>ChannelPid = pid()</code></div> <div class="REFTYPES rt-1"><code>Name = string()</code></div> <div class="REFTYPES rt-1"><code>FileInfo = file:file_info()</code></div> <div class="REFTYPES rt-1"><code>Timeout = timeout()</code></div> <div class="REFTYPES rt-1"><code>Error = {error, <a href="#type-reason">reason()</a>}</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Writes file information from a <code>file_info</code> record to the file specified by <code>Name</code>. See <code>file:write_file_info/[2,3]</code> for information about the record. </p> </div></div></article> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010&ndash;2023 Ericsson AB<br>Licensed under the Apache License, Version 2.0.<br>
    
  </p>
</div>
