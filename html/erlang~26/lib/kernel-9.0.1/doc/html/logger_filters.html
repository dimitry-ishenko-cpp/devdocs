  <div class="innertube"> <h2 id="module" class="title-link"> <div class="title-name">Module</div>  </h2> <div class="REFBODY module-body">logger_filters</div> </div> <div class="innertube"> <h2 id="module-summary" class="title-link"> <div class="title-name">Module Summary</div>  </h2> <div class="REFBODY module-summary-body">Filters to use with Logger.</div> <h2 id="since" class="title-link"> <div class="title-name">Since</div>  </h2> <div class="REFBODY module-since"> Module logger_filters was introduced in OTP 21.0. </div> </div> <section class="description"><div class="innertube"> <h2 id="description" class="title-link"> <div class="title-name">Description</div>  </h2> <div class="REFBODY description-body">

<p>All functions exported from this module can be used as primary or handler filters. See <code><a href="logger.html#add_primary_filter-2"> logger:add_primary_filter/2</a></code> and <code><a href="logger.html#add_handler_filter-3"> logger:add_handler_filter/3</a></code> for more information about how filters are added.</p> <p>Filters are removed with <code><a href="logger.html#remove_primary_filter-1"> logger:remove_primary_filter/1</a></code> and <code><a href="logger.html#remove_handler_filter-2"> logger:remove_handler_filter/2</a></code>.</p> </div> </div></section> <div class="innertube"><h2 id="export" class="title-link"> <div class="title-name">Exports</div>  </h2></div> <div class="exports-body"> <article class="func"><h3 id="domain-2" class="bold_code title-link func-head">  <code>domain(LogEvent, Extra) -&gt; <code><a href="logger.html#type-filter_return">logger:filter_return()</a></code></code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>LogEvent = <a href="logger.html#type-log_event">logger:log_event()</a></code></div> <div class="REFTYPES rt-1"><code>Extra = {Action, Compare, MatchDomain}</code></div> <div class="REFTYPES rt-1"><code>Action = log | stop</code></div> <div class="REFTYPES rt-1"><code>Compare = super | sub | equal | not_equal | undefined</code></div> <div class="REFTYPES rt-1"><code>MatchDomain = [atom()]</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>This filter provides a way of filtering log events based on a <code>domain</code> field in <code>Metadata</code>. This field is optional, and the purpose of using it is to group log events from, for example, a specific functional area. This allows filtering or other specialized treatment in a Logger handler.</p> <p>A domain field must be a list of atoms, creating smaller and more specialized domains as the list grows longer. The greatest domain is <code>[]</code>, which comprises all possible domains.</p> <p>For example, consider the following domains:</p> <pre data-language="erlang">
D1 = [otp]
D2 = [otp, sasl]</pre> <p><code>D1</code> is the greatest of the two, and is said to be a super-domain of <code>D2</code>. <code>D2</code> is a sub-domain <code>D1</code>. Both <code>D1</code> and <code>D2</code> are sub-domains of <code>[]</code>.</p> <p>The above domains are used for logs originating from Erlang/OTP. D1 specifies that the log event comes from Erlang/OTP in general, and D2 indicates that the log event is a so called <code><a href="logger_chapter.html#sasl_reports">SASL report</a></code>.</p> <p>The <code>Extra</code> parameter to the <code>domain/2</code> function is specified when adding the filter via <code><a href="logger.html#add_primary_filter-2"> logger:add_primary_filter/2</a></code> or <code><a href="logger.html#add_handler_filter-3"> logger:add_handler_filter/3</a></code>.</p> <p>The filter compares the value of the <code>domain</code> field in the log event's metadata (<code>Domain</code>) against <code>MatchDomain</code>. The filter matches if the value of <code>Compare</code> is:</p> <dl> <dt class="title-link"><strong><code>sub</code></strong></dt> <dd> <p>and <code>Domain</code> is equal to or a sub-domain of <code>MatchDomain</code>, that is, if <code>MatchDomain</code> is a prefix of <code>Domain</code>.</p> </dd> <dt class="title-link"><strong><code>super</code></strong></dt> <dd> <p>and <code>Domain</code> is equal to or a super-domain of <code>MatchDomain</code>, that is, if <code>Domain</code> is a prefix of <code>MatchDomain</code>.</p> </dd> <dt class="title-link"><strong><code>equal</code></strong></dt> <dd> <p>and <code>Domain</code> is equal to <code>MatchDomain</code>.</p> </dd> <dt class="title-link"><strong><code>not_equal</code></strong></dt> <dd> <p>and <code>Domain</code> differs from <code>MatchDomain</code>, or if there is no domain field in metadata.</p> </dd> <dt class="title-link"><strong><code>undefined</code></strong></dt> <dd> <p>and there is no domain field in metadata. In this case <code>MatchDomain</code> must be set to <code>[]</code>.</p> </dd> </dl> <p>If the filter matches and <code>Action</code> is <code>log</code>, the log event is allowed. If the filter matches and <code>Action</code> is <code>stop</code>, the log event is stopped.</p> <p>If the filter does not match, it returns <code>ignore</code>, meaning that other filters, or the value of the configuration parameter <code>filter_default</code>, decide if the event is allowed or not.</p> <p>Log events that do not contain any domain field, match only when <code>Compare</code> is equal to <code>undefined</code> or <code>not_equal</code>.</p> <p>Example: stop all events with domain <code>[otp, sasl | _]</code></p> <pre data-language="erlang">logger:set_handler_config(h1, filter_default, log). % this is the default
Filter = {fun logger_filters:domain/2, {stop, sub, [otp, sasl]}}.
logger:add_handler_filter(h1, no_sasl, Filter).
ok</pre> </div></div></article><article class="func"><h3 id="level-2" class="bold_code title-link func-head">  <code>level(LogEvent, Extra) -&gt; <code><a href="logger.html#type-filter_return">logger:filter_return()</a></code></code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>LogEvent = <a href="logger.html#type-log_event">logger:log_event()</a></code></div> <div class="REFTYPES rt-1"><code>Extra = {Action, Operator, MatchLevel}</code></div> <div class="REFTYPES rt-1"><code>Action = log | stop</code></div> <div class="REFTYPES rt-1"><code>Operator = neq | eq | lt | gt | lteq | gteq</code></div> <div class="REFTYPES rt-1"><code>MatchLevel = <a href="logger.html#type-level">logger:level()</a></code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>This filter provides a way of filtering log events based on the log level. It matches log events by comparing the log level with a specified <code>MatchLevel</code></p> <p>The <code>Extra</code> parameter is specified when adding the filter via <code><a href="logger.html#add_primary_filter-2"> logger:add_primary_filter/2</a></code> or <code><a href="logger.html#add_handler_filter-3"> logger:add_handler_filter/3</a></code>.</p> <p>The filter compares the value of the event's log level (<code>Level</code>) to <code>MatchLevel</code> by calling <code><a href="logger.html#compare_levels-2"> logger:compare_levels(Level, MatchLevel)</a></code>. The filter matches if the value of <code>Operator</code> is:</p> <dl> <dt class="title-link"><strong><code>neq</code></strong></dt> <dd><p>and the compare function returns <code>lt</code> or <code>gt</code>.</p></dd> <dt class="title-link"><strong><code>eq</code></strong></dt> <dd><p>and the compare function returns <code>eq</code>.</p></dd> <dt class="title-link"><strong><code>lt</code></strong></dt> <dd><p>and the compare function returns <code>lt</code>.</p></dd> <dt class="title-link"><strong><code>gt</code></strong></dt> <dd><p>and the compare function returns <code>gt</code>.</p></dd> <dt class="title-link"><strong><code>lteq</code></strong></dt> <dd><p>and the compare function returns <code>lt</code> or <code>eq</code>.</p></dd> <dt class="title-link"><strong><code>gteq</code></strong></dt> <dd><p>and the compare function returns <code>gt</code> or <code>eq</code>.</p></dd> </dl> <p>If the filter matches and <code>Action</code> is <code>log</code>, the log event is allowed. If the filter matches and <code>Action</code> is <code>stop</code>, the log event is stopped.</p> <p>If the filter does not match, it returns <code>ignore</code>, meaning that other filters, or the value of the configuration parameter <code>filter_default</code>, will decide if the event is allowed or not.</p> <p>Example: only allow debug level log events</p> <pre data-language="erlang">logger:set_handler_config(h1, filter_default, stop).
Filter = {fun logger_filters:level/2, {log, eq, debug}}.
logger:add_handler_filter(h1, debug_only, Filter).
ok</pre> </div></div></article><article class="func"><h3 id="progress-2" class="bold_code title-link func-head">  <code>progress(LogEvent, Extra) -&gt; <code><a href="logger.html#type-filter_return">logger:filter_return()</a></code></code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>LogEvent = <a href="logger.html#type-log_event">logger:log_event()</a></code></div> <div class="REFTYPES rt-1"><code>Extra = log | stop</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>This filter matches all progress reports from <code>supervisor</code> and <code>application_controller</code>.</p> <p>If <code>Extra</code> is <code>log</code>, the progress reports are allowed. If <code>Extra</code> is <code>stop</code>, the progress reports are stopped.</p> <p>The filter returns <code>ignore</code> for all other log events.</p> </div></div></article><article class="func"><h3 id="remote_gl-2" class="bold_code title-link func-head">  <code>remote_gl(LogEvent, Extra) -&gt; <code><a href="logger.html#type-filter_return">logger:filter_return()</a></code></code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>LogEvent = <a href="logger.html#type-log_event">logger:log_event()</a></code></div> <div class="REFTYPES rt-1"><code>Extra = log | stop</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>This filter matches all events originating from a process that has its group leader on a remote node.</p> <p>If <code>Extra</code> is <code>log</code>, the matching events are allowed. If <code>Extra</code> is <code>stop</code>, the matching events are stopped.</p> <p>The filter returns <code>ignore</code> for all other log events.</p> </div></div></article> </div> <section class="innertube"><h2 id="see-also" class="title-link"> <div class="title-name">See Also</div>  </h2> <div class="REFBODY rb-3"> <p> <code><a href="logger.html">logger(3)</a></code> </p> </div></section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010&ndash;2023 Ericsson AB<br>Licensed under the Apache License, Version 2.0.<br>
    
  </p>
</div>
