  <div class="innertube"> <h2 id="module" class="title-link"> <div class="title-name">Module</div>  </h2> <div class="REFBODY module-body">logger</div> </div> <div class="innertube"> <h2 id="module-summary" class="title-link"> <div class="title-name">Module Summary</div>  </h2> <div class="REFBODY module-summary-body">API module for Logger, the standard logging facility in Erlang/OTP.</div> <h2 id="since" class="title-link"> <div class="title-name">Since</div>  </h2> <div class="REFBODY module-since"> Module logger was introduced in OTP 21.0. </div> </div> <section class="description"><div class="innertube"> <h2 id="description" class="title-link"> <div class="title-name">Description</div>  </h2> <div class="REFBODY description-body">

<p>This module implements the main API for logging in Erlang/OTP. To create a log event, use the <code><a href="#logging_API">API functions</a></code> or the log <code><a href="#macros">macros</a></code>, for example:</p> <pre data-language="erlang">?LOG_ERROR("error happened because: ~p", [Reason]).   % With macro
logger:error("error happened because: ~p", [Reason]). % Without macro</pre> <p>To configure the Logger backend, use <code><span>Kernel configuration parameters</span></code> or <code><a href="#configuration_API">configuration functions</a></code> in the Logger API.</p> <p>By default, the Kernel application installs one log handler at system start. This handler is named <code>default</code>. It receives and processes standard log events produced by the Erlang runtime system, standard behaviours and different Erlang/OTP applications. The log events are by default printed to the terminal.</p> <p>If you want your systems logs to be printed to a file instead, you must configure the default handler to do so. The simplest way is to include the following in your <code><a href="config.html">sys.config</a></code>:</p> <pre data-language="erlang">[{kernel,
  [{logger,
    [{handler, default, logger_std_h,
      #{config =&gt; #{file =&gt; "path/to/file.log"}}}]}]}].</pre> <p> For more information about: </p> <ul> <li>the Logger facility in general, see the <code><a href="logger_chapter.html">User's Guide</a></code>.</li> <li>how to configure Logger, see the <code><a href="logger_chapter.html#configuration">Configuration</a></code> section in the User's Guide.</li> <li>the built-in handlers, see <code><a href="logger_std_h.html">logger_std_h</a></code> and <code><a href="logger_disk_log_h.html">logger_disk_log_h</a></code>.</li> <li>the built-in formatter, see <code><a href="logger_formatter.html">logger_formatter</a></code>.</li> <li>built-in filters, see <code><a href="logger_filters.html">logger_filters</a></code>.</li> </ul> <div class="note"> <div class="label">Note</div> <div class="content">

<p>Since Logger is new in Erlang/OTP 21.0, we do reserve the right to introduce changes to the Logger API and functionality in patches following this release. These changes might or might not be backwards compatible with the initial version.</p> </div> </div> </div> </div></section> <div class="innertube"> <h2 id="data-types" class="title-link"> <div class="title-name">Data Types</div>  </h2> <article class="data-types-body"><h3 id="type-filter" class="title-link data-type-name">  <div class="title-name"> <pre data-language="erlang"><code><a name="type-filter">filter()</a> = 
 {fun((<a href="#type-log_event">log_event()</a>, <a href="#type-filter_arg">filter_arg()</a>) -&gt; <a href="#type-filter_return">filter_return()</a>),
 <a href="#type-filter_arg">filter_arg()</a>}</code></pre>
<br> </div> </h3> <div class="data-type-desc"><div class="REFBODY rb-7"> <p>A filter which can be installed as a handler filter, or as a primary filter in Logger.</p> </div></div></article> <article class="data-types-body"><h3 id="type-filter_arg" class="title-link data-type-name">  <div class="title-name"> <code><a name="type-filter_arg">filter_arg()</a> = term()</code><br> </div> </h3> <div class="data-type-desc"><div class="REFBODY rb-7"> <p>The second argument to the filter fun.</p> </div></div></article> <article class="data-types-body"><h3 id="type-filter_id" class="title-link data-type-name">  <div class="title-name"> <code><a name="type-filter_id">filter_id()</a> = atom()</code><br> </div> </h3> <div class="data-type-desc"><div class="REFBODY rb-7"> <p>A unique identifier for a filter.</p> </div></div></article> <article class="data-types-body"><h3 id="type-filter_return" class="title-link data-type-name">  <div class="title-name"> <code><a name="type-filter_return">filter_return()</a> = stop | ignore | <a href="#type-log_event">log_event()</a></code><br> </div> </h3> <div class="data-type-desc"><div class="REFBODY rb-7"> <p>The return value from the filter fun.</p> </div></div></article> <article class="data-types-body"><h3 id="type-formatter_config" class="title-link data-type-name">  <div class="title-name"> <code><a name="type-formatter_config">formatter_config()</a> = #{atom() =&gt; term()}</code><br> </div> </h3> <div class="data-type-desc"><div class="REFBODY rb-7"> <p>Configuration data for the formatter. See <code><a href="logger_formatter.html"> logger_formatter(3)</a></code> for an example of a formatter implementation.</p> </div></div></article> <article class="data-types-body"><h3 id="type-handler_config" class="title-link data-type-name">  <div class="title-name"> <pre data-language="erlang"><code><a name="type-handler_config">handler_config()</a> = 
 #{id =&gt; <a href="#type-handler_id">handler_id()</a>,
 config =&gt; term(),
 level =&gt; <a href="#type-level">level()</a> | all | none,
 module =&gt; module(),
 filter_default =&gt; log | stop,
 filters =&gt; [{<a href="#type-filter_id">filter_id()</a>, <a href="#type-filter">filter()</a>}],
 formatter =&gt; {module(), <a href="#type-formatter_config">formatter_config()</a>}}</code></pre>
<br> </div> </h3> <div class="data-type-desc"><div class="REFBODY rb-7"> <p>Handler configuration data for Logger. The following default values apply:</p> <ul> <li><code>level =&gt; all</code></li> <li><code>filter_default =&gt; log</code></li> <li><code>filters =&gt; []</code></li> <li> <code>formatter =&gt; {logger_formatter, DefaultFormatterConfig</code>}</li> </ul> <p>In addition to these, the following fields are automatically inserted by Logger, values taken from the two first parameters to <code><a href="#add_handler-3">add_handler/3</a></code>:</p> <ul> <li><code>id =&gt; HandlerId</code></li> <li><code>module =&gt; Module</code></li> </ul> <p>These are read-only and cannot be changed in runtime.</p> <p>Handler specific configuration data is inserted by the handler callback itself, in a sub structure associated with the field named <code>config</code>. See the <code><a href="logger_std_h.html">logger_std_h(3)</a></code> and <code><a href="logger_disk_log_h.html">logger_disk_log_h(3)</a></code> manual pages for information about the specific configuration for these handlers.</p> <p>See the <code><a href="logger_formatter.html#type-config"> logger_formatter(3)</a></code> manual page for information about the default configuration for this formatter.</p> </div></div></article> <article class="data-types-body"><h3 id="type-handler_id" class="title-link data-type-name">  <div class="title-name"> <code><a name="type-handler_id">handler_id()</a> = atom()</code><br> </div> </h3> <div class="data-type-desc"><div class="REFBODY rb-7"> <p>A unique identifier for a handler instance.</p> </div></div></article> <article class="data-types-body"><h3 id="type-level" class="title-link data-type-name">  <div class="title-name"> <pre data-language="erlang"><code><a name="type-level">level()</a> = 
 emergency | alert | critical | error | warning | notice |
 info | debug</code></pre>
<br> </div> </h3> <div class="data-type-desc"><div class="REFBODY rb-7"> <p>The severity level for the message to be logged.</p> </div></div></article> <article class="data-types-body"><h3 id="type-log_event" class="title-link data-type-name">  <div class="title-name"> <pre data-language="erlang"><code><a name="type-log_event">log_event()</a> = 
 #{level := <a href="#type-level">level()</a>,
 msg :=
 {io:format(), [term()]} |
 {report, <a href="#type-report">report()</a>} |
 {string, unicode:chardata()},
 meta := <a href="#type-metadata">metadata()</a>}</code></pre>
<br> </div> </h3> </article> <article class="data-types-body"><h3 id="type-metadata" class="title-link data-type-name">  <div class="title-name"> <pre data-language="erlang"><code><a name="type-metadata">metadata()</a> = 
 #{pid =&gt; pid(),
 gl =&gt; pid(),
 time =&gt; <a href="#type-timestamp">timestamp()</a>,
 mfa =&gt; {module(), atom(), integer() &gt;= 0},
 file =&gt; <a href="file.html#type-filename">file:filename()</a>,
 line =&gt; integer() &gt;= 0,
 domain =&gt; [atom()],
 report_cb =&gt; <a href="#type-report_cb">report_cb()</a>,
 atom() =&gt; term()}</code></pre>
<br> </div> </h3> <div class="data-type-desc"><div class="REFBODY rb-7"> <p>Metadata for the log event.</p> <p>Logger adds the following metadata to each log event:</p> <ul> <li><code>pid =&gt; self()</code></li> <li><code>gl =&gt; group_leader()</code></li> <li><code>time =&gt; logger:timestamp()</code></li> </ul> <p>When a log macro is used, Logger also inserts location information:</p> <ul> <li><code>mfa =&gt; {?MODULE, ?FUNCTION_NAME, ?FUNCTION_ARITY}</code></li> <li><code>file =&gt; ?FILE</code></li> <li><code>line =&gt; ?LINE</code></li> </ul> <p>You can add custom metadata, either by:</p> <ul> <li>specifying a map as the last parameter to any of the log macros or the logger API functions.</li> <li>setting process metadata with <code><a href="#set_process_metadata-1"> set_process_metadata/1</a></code> or <code><a href="#update_process_metadata-1"> update_process_metadata/1</a></code>.</li> <li>setting primary metadata with <code><a href="#set_primary_config-1"> set_primary_config/1</a></code> or through the kernel configuration parameter <code><span> logger_metadata</span></code> </li> </ul> <div class="note"> <div class="label">Note</div> <div class="content">

<p>When adding custom metadata, make sure not to use any of the keys mentioned above as that may cause a lot of confusion about the log events.</p> </div> </div> <p>Logger merges all the metadata maps before forwarding the log event to the handlers. If the same keys occur, values from the log call overwrite process metadata, which overwrites the primary metadata, which in turn overwrite values set by Logger.</p> <p>The following custom metadata keys have special meaning:</p> <dl> <dt class="title-link"><strong><code>domain</code></strong></dt> <dd> <p>The value associated with this key is used by filters for grouping log events originating from, for example, specific functional areas. See <code><a href="logger_filters.html#domain-2"> logger_filters:domain/2</a></code> for a description of how this field can be used.</p> </dd> <dt class="title-link"><strong><code>report_cb</code></strong></dt> <dd> <p>If the log message is specified as a <code><a href="#type-report">report()</a></code>, the <code>report_cb</code> key can be associated with a fun (report callback) that converts the report to a format string and arguments, or directly to a string. See the type definition of <code><a href="#type-report_cb">report_cb()</a></code>, and section <code><a href="logger_chapter.html#log_message">Log Message</a></code> in the User's Guide for more information about report callbacks.</p> </dd> </dl> </div></div></article> <article class="data-types-body"><h3 id="type-msg_fun" class="title-link data-type-name">  <div class="title-name"> <pre data-language="erlang"><code><a name="type-msg_fun">msg_fun()</a> = 
 fun((term()) -&gt;
 <a href="#type-msg_fun_return">msg_fun_return()</a> | {<a href="#type-msg_fun_return">msg_fun_return()</a>, <a href="#type-metadata">metadata()</a>})</code></pre>
<br> </div> </h3> </article> <article class="data-types-body"><h3 id="type-msg_fun_return" class="title-link data-type-name">  <div class="title-name"> <pre data-language="erlang"><code><a name="type-msg_fun_return">msg_fun_return()</a> = 
 {io:format(), [term()]} |
 <a href="#type-report">report()</a> |
 unicode:chardata() |
 ignore</code></pre>
<br> </div> </h3> </article> <article class="data-types-body"><h3 id="type-olp_config" class="title-link data-type-name">  <div class="title-name"> <pre data-language="erlang"><code><a name="type-olp_config">olp_config()</a> = 
 #{sync_mode_qlen =&gt; integer() &gt;= 0,
 drop_mode_qlen =&gt; integer() &gt;= 1,
 flush_qlen =&gt; integer() &gt;= 1,
 burst_limit_enable =&gt; boolean(),
 burst_limit_max_count =&gt; integer() &gt;= 1,
 burst_limit_window_time =&gt; integer() &gt;= 1,
 overload_kill_enable =&gt; boolean(),
 overload_kill_qlen =&gt; integer() &gt;= 1,
 overload_kill_mem_size =&gt; integer() &gt;= 1,
 overload_kill_restart_after =&gt; integer() &gt;= 0 | infinity}</code></pre>
<br> </div> </h3> </article> <article class="data-types-body"><h3 id="type-primary_config" class="title-link data-type-name">  <div class="title-name"> <pre data-language="erlang"><code><a name="type-primary_config">primary_config()</a> = 
 #{level =&gt; <a href="#type-level">level()</a> | all | none,
 metadata =&gt; <a href="#type-metadata">metadata()</a>,
 filter_default =&gt; log | stop,
 filters =&gt; [{<a href="#type-filter_id">filter_id()</a>, <a href="#type-filter">filter()</a>}]}</code></pre>
<br> </div> </h3> <div class="data-type-desc"><div class="REFBODY rb-7"> <p>Primary configuration data for Logger. The following default values apply:</p> <ul> <li><code>level =&gt; info</code></li> <li><code>filter_default =&gt; log</code></li> <li><code>filters =&gt; []</code></li> </ul> </div></div></article> <article class="data-types-body"><h3 id="type-report" class="title-link data-type-name">  <div class="title-name"> <code><a name="type-report">report()</a> = map() | [{atom(), term()}]</code><br> </div> </h3> </article> <article class="data-types-body"><h3 id="type-report_cb" class="title-link data-type-name">  <div class="title-name"> <pre data-language="erlang"><code><a name="type-report_cb">report_cb()</a> = 
 fun((<a href="#type-report">report()</a>) -&gt; {io:format(), [term()]}) |
 fun((<a href="#type-report">report()</a>, <a href="#type-report_cb_config">report_cb_config()</a>) -&gt; unicode:chardata())</code></pre>
<br> </div> </h3> <div class="data-type-desc"><div class="REFBODY rb-7"> <p>A fun which converts a <code><a href="#type-report">report() </a></code> to a format string and arguments, or directly to a string. See section <code><a href="logger_chapter.html#log_message">Log Message</a></code> in the User's Guide for more information.</p> </div></div></article> <article class="data-types-body"><h3 id="type-report_cb_config" class="title-link data-type-name">  <div class="title-name"> <pre data-language="erlang"><code><a name="type-report_cb_config">report_cb_config()</a> = 
 #{depth := integer() &gt;= 1 | unlimited,
 chars_limit := integer() &gt;= 1 | unlimited,
 single_line := boolean()}</code></pre>
<br> </div> </h3> </article> <article class="data-types-body"><h3 id="type-timestamp" class="title-link data-type-name">  <div class="title-name"> <code><a name="type-timestamp">timestamp()</a> = integer()</code><br> </div> </h3> <div class="data-type-desc"><div class="REFBODY rb-7"> <p>A timestamp produced with <code><a href="#timestamp-0"> logger:timestamp()</a></code>.</p> </div></div></article> </div> <section class="innertube"><h2 id="macros" class="title-link"> <div class="title-name">Macros</div>  </h2> <div class="REFBODY rb-3"> <p>The following macros are defined in <code>logger.hrl</code>, which is included in a module with the directive</p> <pre data-language="erlang">-include_lib("kernel/include/logger.hrl").</pre> <ul> <li><code>?LOG_EMERGENCY(StringOrReport[,Metadata])</code></li> <li><code>?LOG_EMERGENCY(FunOrFormat,Args[,Metadata])</code></li> <li><code>?LOG_ALERT(StringOrReport[,Metadata])</code></li> <li><code>?LOG_ALERT(FunOrFormat,Args[,Metadata])</code></li> <li><code>?LOG_CRITICAL(StringOrReport[,Metadata])</code></li> <li><code>?LOG_CRITICAL(FunOrFormat,Args[,Metadata])</code></li> <li><code>?LOG_ERROR(StringOrReport[,Metadata])</code></li> <li><code>?LOG_ERROR(FunOrFormat,Args[,Metadata])</code></li> <li><code>?LOG_WARNING(StringOrReport[,Metadata])</code></li> <li><code>?LOG_WARNING(FunOrFormat,Args[,Metadata])</code></li> <li><code>?LOG_NOTICE(StringOrReport[,Metadata])</code></li> <li><code>?LOG_NOTICE(FunOrFormat,Args[,Metadata])</code></li> <li><code>?LOG_INFO(StringOrReport[,Metadata])</code></li> <li><code>?LOG_INFO(FunOrFormat,Args[,Metadata])</code></li> <li><code>?LOG_DEBUG(StringOrReport[,Metadata])</code></li> <li><code>?LOG_DEBUG(FunOrFormat,Args[,Metadata])</code></li> <li><code>?LOG(Level,StringOrReport[,Metadata])</code></li> <li><code>?LOG(Level,FunOrFormat,Args[,Metadata])</code></li> </ul> <p>All macros expand to a call to Logger, where <code>Level</code> is taken from the macro name, or from the first argument in the case of the <code>?LOG</code> macro. Location data is added to the metadata as described under the <code><a href="#type-metadata">metadata()</a></code> type definition.</p> <p>The call is wrapped in a case statement and will be evaluated only if <code>Level</code> is equal to or below the configured log level.</p> </div></section> <section class="innertube"><h2 id="logging-api-functions" class="title-link"> <div class="title-name">Logging API functions</div>  </h2> </section><div class="innertube"><h2 id="export" class="title-link"> <div class="title-name">Exports</div>  </h2></div> <div class="exports-body"> <article class="func"><div class="bold_code func-head"><h3 id="emergency-1" class="title-link">  <div class="title-name">emergency(StringOrReport[,Metadata])</div> <div class="title-since"><span class="since">OTP 21.0</span></div> </h3></div> <div class="bold_code func-head"><h3 id="emergency-2" class="title-link">  <div class="title-name">emergency(Format,Args[,Metadata])</div> <div class="title-since"><span class="since">OTP 21.0</span></div> </h3></div> <div class="bold_code func-head"><h3 id="emergency-2" class="title-link">  <div class="title-name">emergency(Fun,FunArgs[,Metadata])</div> <div class="title-since"><span class="since">OTP 21.0</span></div> </h3></div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Equivalent to <code><a href="#log-2">log(emergency,...)</a></code>.</p> </div></div></article><article class="func"><div class="bold_code func-head"><h3 id="alert-1" class="title-link">  <div class="title-name">alert(StringOrReport[,Metadata])</div> <div class="title-since"><span class="since">OTP 21.0</span></div> </h3></div> <div class="bold_code func-head"><h3 id="alert-2" class="title-link">  <div class="title-name">alert(Format,Args[,Metadata])</div> <div class="title-since"><span class="since">OTP 21.0</span></div> </h3></div> <div class="bold_code func-head"><h3 id="alert-2" class="title-link">  <div class="title-name">alert(Fun,FunArgs[,Metadata])</div> <div class="title-since"><span class="since">OTP 21.0</span></div> </h3></div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Equivalent to <code><a href="#log-2">log(alert,...)</a></code>.</p> </div></div></article><article class="func"><div class="bold_code func-head"><h3 id="critical-1" class="title-link">  <div class="title-name">critical(StringOrReport[,Metadata])</div> <div class="title-since"><span class="since">OTP 21.0</span></div> </h3></div> <div class="bold_code func-head"><h3 id="critical-2" class="title-link">  <div class="title-name">critical(Format,Args[,Metadata])</div> <div class="title-since"><span class="since">OTP 21.0</span></div> </h3></div> <div class="bold_code func-head"><h3 id="critical-2" class="title-link">  <div class="title-name">critical(Fun,FunArgs[,Metadata])</div> <div class="title-since"><span class="since">OTP 21.0</span></div> </h3></div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Equivalent to <code><a href="#log-2">log(critical,...)</a></code>.</p> </div></div></article><article class="func"><div class="bold_code func-head"><h3 id="error-1" class="title-link">  <div class="title-name">error(StringOrReport[,Metadata])</div> <div class="title-since"><span class="since">OTP 21.0</span></div> </h3></div> <div class="bold_code func-head"><h3 id="error-2" class="title-link">  <div class="title-name">error(Format,Args[,Metadata])</div> <div class="title-since"><span class="since">OTP 21.0</span></div> </h3></div> <div class="bold_code func-head"><h3 id="error-2" class="title-link">  <div class="title-name">error(Fun,FunArgs[,Metadata])</div> <div class="title-since"><span class="since">OTP 21.0</span></div> </h3></div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Equivalent to <code><a href="#log-2">log(error,...)</a></code>.</p> </div></div></article><article class="func"><div class="bold_code func-head"><h3 id="warning-1" class="title-link">  <div class="title-name">warning(StringOrReport[,Metadata])</div> <div class="title-since"><span class="since">OTP 21.0</span></div> </h3></div> <div class="bold_code func-head"><h3 id="warning-2" class="title-link">  <div class="title-name">warning(Format,Args[,Metadata])</div> <div class="title-since"><span class="since">OTP 21.0</span></div> </h3></div> <div class="bold_code func-head"><h3 id="warning-2" class="title-link">  <div class="title-name">warning(Fun,FunArgs[,Metadata])</div> <div class="title-since"><span class="since">OTP 21.0</span></div> </h3></div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Equivalent to <code><a href="#log-2">log(warning,...)</a></code>.</p> </div></div></article><article class="func"><div class="bold_code func-head"><h3 id="notice-1" class="title-link">  <div class="title-name">notice(StringOrReport[,Metadata])</div> <div class="title-since"><span class="since">OTP 21.0</span></div> </h3></div> <div class="bold_code func-head"><h3 id="notice-2" class="title-link">  <div class="title-name">notice(Format,Args[,Metadata])</div> <div class="title-since"><span class="since">OTP 21.0</span></div> </h3></div> <div class="bold_code func-head"><h3 id="notice-2" class="title-link">  <div class="title-name">notice(Fun,FunArgs[,Metadata])</div> <div class="title-since"><span class="since">OTP 21.0</span></div> </h3></div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Equivalent to <code><a href="#log-2">log(notice,...)</a></code>.</p> </div></div></article><article class="func"><div class="bold_code func-head"><h3 id="info-1" class="title-link">  <div class="title-name">info(StringOrReport[,Metadata])</div> <div class="title-since"><span class="since">OTP 21.0</span></div> </h3></div> <div class="bold_code func-head"><h3 id="info-2" class="title-link">  <div class="title-name">info(Format,Args[,Metadata])</div> <div class="title-since"><span class="since">OTP 21.0</span></div> </h3></div> <div class="bold_code func-head"><h3 id="info-2" class="title-link">  <div class="title-name">info(Fun,FunArgs[,Metadata])</div> <div class="title-since"><span class="since">OTP 21.0</span></div> </h3></div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Equivalent to <code><a href="#log-2">log(info,...)</a></code>.</p> </div></div></article><article class="func"><div class="bold_code func-head"><h3 id="debug-1" class="title-link">  <div class="title-name">debug(StringOrReport[,Metadata])</div> <div class="title-since"><span class="since">OTP 21.0</span></div> </h3></div> <div class="bold_code func-head"><h3 id="debug-2" class="title-link">  <div class="title-name">debug(Format,Args[,Metadata])</div> <div class="title-since"><span class="since">OTP 21.0</span></div> </h3></div> <div class="bold_code func-head"><h3 id="debug-2" class="title-link">  <div class="title-name">debug(Fun,FunArgs[,Metadata])</div> <div class="title-since"><span class="since">OTP 21.0</span></div> </h3></div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Equivalent to <code><a href="#log-2">log(debug,...)</a></code>.</p> </div></div></article><article class="func"><h3 id="log-2" class="bold_code title-link func-head">  <code>log(Level, StringOrReport) -&gt; ok</code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <h3 id="log-3" class="bold_code title-link func-head">  <code>log(Level, StringOrReport, Metadata) -&gt; ok</code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <h3 id="log-3" class="bold_code title-link func-head">  <code>log(Level, Format, Args) -&gt; ok</code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <h3 id="log-3" class="bold_code title-link func-head">  <code>log(Level, Fun, FunArgs) -&gt; ok</code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <h3 id="log-4" class="bold_code title-link func-head">  <code>log(Level, Format, Args, Metadata) -&gt; ok</code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <h3 id="log-4" class="bold_code title-link func-head">  <code>log(Level, Fun, FunArgs, Metadata) -&gt; ok</code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Level = <a href="#type-level">level()</a></code></div> <div class="REFTYPES rt-1"><code>StringOrReport = unicode:chardata() | <a href="#type-report">report()</a></code></div> <div class="REFTYPES rt-1"><code>Format = io:format()</code></div> <div class="REFTYPES rt-1"><code>Args = [term()]</code></div> <div class="REFTYPES rt-1"><code>Fun = <a href="#type-msg_fun">msg_fun()</a></code></div> <div class="REFTYPES rt-1"><code>FunArgs = term()</code></div> <div class="REFTYPES rt-1"><code>Metadata = <a href="#type-metadata">metadata()</a></code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Create a log event at the given <code><a href="logger_chapter.html#log_level">log level</a></code>, with the given <code><a href="logger_chapter.html#log_message">message</a></code> to be logged and <code><a href="logger_chapter.html#metadata"><strong>metadata</strong></a></code>. Examples:</p> <pre data-language="erlang">%% A plain string
logger:log(info, "Hello World").
%% A plain string with metadata
logger:log(debug, "Hello World", #{ meta =&gt; data }).
%% A format string with arguments
logger:log(warning, "The roof is on ~ts",[Cause]).
%% A report
logger:log(warning, #{ what =&gt; roof, cause =&gt; Cause }).</pre> <p>The message and metadata can either be given directly in the arguments, or returned from a fun. Passing a fun instead of the message/metadata directly is useful in scenarios when the message/metadata is very expensive to compute. This is because the fun is only evaluated when the message/metadata is actually needed, which may be not at all if the log event is not to be logged. Examples:</p> <pre data-language="erlang">%% A plain string with expensive metadata
logger:info(fun([]) -&gt; {"Hello World", #{ meta =&gt; expensive() }} end,[]).
%% An expensive report
logger:debug(fun(What) -&gt; #{ what =&gt; What, cause =&gt; expensive() } end,roof).
%% A plain string with expensive metadata and normal metadata
logger:debug(fun([]) -&gt; {"Hello World", #{ meta =&gt; expensive() }} end,[],
             #{ meta =&gt; data }).</pre> <p>When metadata is given both as an argument and returned from the fun they are merged. If equal keys exists the values are taken from the metadata returned by the fun.</p> </div></div></article> </div> <section class="innertube"><h2 id="configuration-api-functions" class="title-link"> <div class="title-name">Configuration API functions</div>  </h2> </section><div class="innertube"><h2 id="export" class="title-link"> <div class="title-name">Exports</div>  </h2></div> <div class="exports-body"> <article class="func"><h3 id="add_handler-3" class="bold_code title-link func-head">  <code>add_handler(HandlerId, Module, Config) -&gt; ok | {error, <code>term()</code>}</code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>HandlerId = <a href="#type-handler_id">handler_id()</a></code></div> <div class="REFTYPES rt-1"><code>Module = module()</code></div> <div class="REFTYPES rt-1"><code>Config = <a href="#type-handler_config">handler_config()</a></code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Add a handler with the given configuration.</p> <p><code>HandlerId</code> is a unique identifier which must be used in all subsequent calls referring to this handler.</p> </div></div></article><article class="func"><h3 id="add_handler_filter-3" class="bold_code title-link func-head">  <pre data-language="erlang"><code>add_handler_filter(HandlerId, FilterId, Filter) -&gt;
 ok | {error, <code>term()</code>}</code></pre>
<div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>HandlerId = <a href="#type-handler_id">handler_id()</a></code></div> <div class="REFTYPES rt-1"><code>FilterId = <a href="#type-filter_id">filter_id()</a></code></div> <div class="REFTYPES rt-1"><code>Filter = <a href="#type-filter">filter()</a></code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Add a filter to the specified handler.</p> <p>The filter fun is called with the log event as the first parameter, and the specified <code>filter_args()</code> as the second parameter.</p> <p>The return value of the fun specifies if a log event is to be discarded or forwarded to the handler callback:</p> <dl> <dt class="title-link"><strong><code>log_event()</code></strong></dt> <dd> <p>The filter <strong>passed</strong>. The next handler filter, if any, is applied. If no more filters exist for this handler, the log event is forwarded to the handler callback.</p> </dd> <dt class="title-link"><strong><code>stop</code></strong></dt> <dd> <p>The filter <strong>did not pass</strong>, and the log event is immediately discarded.</p> </dd> <dt class="title-link"><strong><code>ignore</code></strong></dt> <dd> <p>The filter has no knowledge of the log event. The next handler filter, if any, is applied. If no more filters exist for this handler, the value of the <code>filter_default</code> configuration parameter for the handler specifies if the log event shall be discarded or forwarded to the handler callback.</p> </dd> </dl> <p>See section <code><a href="logger_chapter.html#filters">Filters</a></code> in the User's Guide for more information about filters.</p> <p>Some built-in filters exist. These are defined in <code><a href="logger_filters.html">logger_filters(3)</a></code>.</p> </div></div></article><article class="func"><h3 id="add_handlers-1" class="bold_code title-link func-head">  <code>add_handlers(Application) -&gt; ok | {error, <code>term()</code>}</code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Application = atom()</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Reads the application configuration parameter <code>logger</code> and calls <code>add_handlers/1</code> with its contents.</p> </div></div></article><article class="func"><h3 id="add_handlers-1" class="bold_code title-link func-head">  <code>add_handlers(HandlerConfig) -&gt; ok | {error, <code>term()</code>}</code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>HandlerConfig = [config_handler()]</code></div> <div class="REFTYPES rt-2"> <pre><code>config_handler() = 
 {handler, <a href="#type-handler_id">handler_id()</a>, module(), <a href="#type-handler_config">handler_config()</a>}</code></pre>
<br> </div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>This function should be used by custom Logger handlers to make configuration consistent no matter which handler the system uses. Normal usage is to add a call to <code>logger:add_handlers/1</code> just after the processes that the handler needs are started, and pass the application's <code>logger</code> configuration as the argument. For example:</p> <pre data-language="erlang">-behaviour(application).
start(_, []) -&gt;
    case supervisor:start_link({local, my_sup}, my_sup, []) of
        {ok, Pid} -&gt;
            ok = logger:add_handlers(my_app),
            {ok, Pid, []};
        Error -&gt; Error
     end.</pre> <p>This reads the <code>logger</code> configuration parameter from the <code>my_app</code> application and starts the configured handlers. The contents of the configuration use the same rules as the <code><a href="logger_chapter.html#handler-configuration">logger handler configuration</a></code>. </p> <p>If the handler is meant to replace the default handler, the Kernel's default handler have to be disabled before the new handler is added. A <code>sys.config</code> file that disables the Kernel handler and adds a custom handler could look like this:</p> <pre data-language="erlang">[{kernel,
  [{logger,
    %% Disable the default Kernel handler
    [{handler, default, undefined}]}]},
 {my_app,
  [{logger,
    %% Enable this handler as the default
    [{handler, default, my_handler, #{}}]}]}].</pre> </div></div></article><article class="func"><h3 id="add_primary_filter-2" class="bold_code title-link func-head">  <code>add_primary_filter(FilterId, Filter) -&gt; ok | {error, <code>term()</code>}</code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>FilterId = <a href="#type-filter_id">filter_id()</a></code></div> <div class="REFTYPES rt-1"><code>Filter = <a href="#type-filter">filter()</a></code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Add a primary filter to Logger.</p> <p>The filter fun is called with the log event as the first parameter, and the specified <code>filter_args()</code> as the second parameter.</p> <p>The return value of the fun specifies if a log event is to be discarded or forwarded to the handlers:</p> <dl> <dt class="title-link"><strong><code>log_event()</code></strong></dt> <dd> <p>The filter <strong>passed</strong>. The next primary filter, if any, is applied. If no more primary filters exist, the log event is forwarded to the handler part of Logger, where handler filters are applied.</p> </dd> <dt class="title-link"><strong><code>stop</code></strong></dt> <dd> <p>The filter <strong>did not pass</strong>, and the log event is immediately discarded.</p> </dd> <dt class="title-link"><strong><code>ignore</code></strong></dt> <dd> <p>The filter has no knowledge of the log event. The next primary filter, if any, is applied. If no more primary filters exist, the value of the primary <code>filter_default</code> configuration parameter specifies if the log event shall be discarded or forwarded to the handler part.</p> </dd> </dl> <p>See section <code><a href="logger_chapter.html#filters"> Filters</a></code> in the User's Guide for more information about filters.</p> <p>Some built-in filters exist. These are defined in <code><a href="logger_filters.html">logger_filters(3)</a></code>.</p> </div></div></article><article class="func"><h3 id="get_config-0" class="bold_code title-link func-head">  <pre data-language="erlang"><code>get_config() -&gt;
 #{primary =&gt; <code><a href="#type-primary_config">primary_config()</a></code>,
 handlers =&gt; [<code><a href="#type-handler_config">handler_config()</a></code>],
 proxy =&gt; <code><a href="#type-olp_config">olp_config()</a></code>,
 module_levels =&gt;
 [{<code>module()</code>, <code><a href="#type-level">level()</a></code> | all | none}]}</code></pre>
<div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Look up all current Logger configuration, including primary, handler, and proxy configuration, and module level settings.</p> </div></div></article><article class="func"><h3 id="get_handler_config-0" class="bold_code title-link func-head">  <code>get_handler_config() -&gt; [Config]</code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Config = <a href="#type-handler_config">handler_config()</a></code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Look up the current configuration for all handlers.</p> </div></div></article><article class="func"><h3 id="get_handler_config-1" class="bold_code title-link func-head">  <code>get_handler_config(HandlerId) -&gt; {ok, Config} | {error, <code>term()</code>}</code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>HandlerId = <a href="#type-handler_id">handler_id()</a></code></div> <div class="REFTYPES rt-1"><code>Config = <a href="#type-handler_config">handler_config()</a></code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Look up the current configuration for the given handler.</p> </div></div></article><article class="func"><h3 id="get_handler_ids-0" class="bold_code title-link func-head">  <code>get_handler_ids() -&gt; [HandlerId]</code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>HandlerId = <a href="#type-handler_id">handler_id()</a></code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Look up the identities for all installed handlers.</p> </div></div></article><article class="func"><h3 id="get_primary_config-0" class="bold_code title-link func-head">  <code>get_primary_config() -&gt; Config</code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Config = <a href="#type-primary_config">primary_config()</a></code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Look up the current primary configuration for Logger.</p> </div></div></article><article class="func"><h3 id="get_proxy_config-0" class="bold_code title-link func-head">  <code>get_proxy_config() -&gt; Config</code><div class="title-since"><span class="since">OTP 21.3</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Config = <a href="#type-olp_config">olp_config()</a></code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Look up the current configuration for the Logger proxy.</p> <p>For more information about the proxy, see section <code><a href="logger_chapter.html#proxy">Logger Proxy</a></code> in the Kernel User's Guide.</p> </div></div></article><article class="func"><h3 id="get_module_level-0" class="bold_code title-link func-head">  <code>get_module_level() -&gt; [{Module, Level}]</code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Module = module()</code></div> <div class="REFTYPES rt-1"><code>Level = <a href="#type-level">level()</a> | all | none</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Look up all current module levels. Returns a list containing one <code>{Module,Level}</code> element for each module for which the module level was previously set with <code><a href="#set_module_level-2"> set_module_level/2</a></code>.</p> </div></div></article><article class="func"><h3 id="get_module_level-1" class="bold_code title-link func-head">  <code>get_module_level(Modules) -&gt; [{Module, Level}]</code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Modules = [Module] | Module</code></div> <div class="REFTYPES rt-1"><code>Module = module()</code></div> <div class="REFTYPES rt-1"><code>Level = <a href="#type-level">level()</a> | all | none</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Look up the current level for the given modules. Returns a list containing one <code>{Module,Level}</code> element for each of the given modules for which the module level was previously set with <code><a href="#set_module_level-2"> set_module_level/2</a></code>.</p> </div></div></article><article class="func"><h3 id="get_process_metadata-0" class="bold_code title-link func-head">  <code>get_process_metadata() -&gt; Meta | undefined</code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Meta = <a href="#type-metadata">metadata()</a></code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Retrieve data set with <code><a href="#set_process_metadata-1"> set_process_metadata/1</a></code> or <code><a href="#update_process_metadata-1"> update_process_metadata/1</a></code>.</p> </div></div></article><article class="func"><h3 id="i-0" class="bold_code title-link func-head">  <code>i() -&gt; ok</code><div class="title-since"><span class="since">OTP 21.3</span></div> </h3> <h3 id="i-1" class="bold_code title-link func-head">  <code>i(What) -&gt; ok</code><div class="title-since"><span class="since">OTP 21.3</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>What = primary | handlers | proxy | modules | <a href="#type-handler_id">handler_id()</a></code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Pretty print the Logger configuration.</p> </div></div></article><article class="func"><h3 id="remove_handler-1" class="bold_code title-link func-head">  <code>remove_handler(HandlerId) -&gt; ok | {error, <code>term()</code>}</code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>HandlerId = <a href="#type-handler_id">handler_id()</a></code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Remove the handler identified by <code>HandlerId</code>.</p> </div></div></article><article class="func"><h3 id="remove_handler_filter-2" class="bold_code title-link func-head">  <code>remove_handler_filter(HandlerId, FilterId) -&gt; ok | {error, <code>term()</code>}</code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>HandlerId = <a href="#type-handler_id">handler_id()</a></code></div> <div class="REFTYPES rt-1"><code>FilterId = <a href="#type-filter_id">filter_id()</a></code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Remove the filter identified by <code>FilterId</code> from the handler identified by <code>HandlerId</code>.</p> </div></div></article><article class="func"><h3 id="remove_primary_filter-1" class="bold_code title-link func-head">  <code>remove_primary_filter(FilterId) -&gt; ok | {error, <code>term()</code>}</code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>FilterId = <a href="#type-filter_id">filter_id()</a></code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Remove the primary filter identified by <code>FilterId</code> from Logger.</p> </div></div></article><article class="func"><h3 id="set_application_level-2" class="bold_code title-link func-head">  <pre data-language="erlang"><code>set_application_level(Application, Level) -&gt;
 ok | {error, not_loaded}</code></pre>
<div class="title-since"><span class="since">OTP 21.1</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Application = atom()</code></div> <div class="REFTYPES rt-1"><code>Level = <a href="#type-level">level()</a> | all | none</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Set the log level for all the modules of the specified application.</p> <p>This function is a convenience function that calls <code><a href="#set_module_level-2">logger:set_module_level/2</a></code> for each module associated with an application.</p> </div></div></article><article class="func"><h3 id="set_handler_config-2" class="bold_code title-link func-head">  <code>set_handler_config(HandlerId, Config) -&gt; ok | {error, <code>term()</code>}</code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>HandlerId = <a href="#type-handler_id">handler_id()</a></code></div> <div class="REFTYPES rt-1"><code>Config = <a href="#type-handler_config">handler_config()</a></code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Set configuration data for the specified handler. This overwrites the current handler configuration.</p> <p>To modify the existing configuration, use <code><a href="#update_handler_config-2"> update_handler_config/2</a></code>, or, if a more complex merge is needed, read the current configuration with <code><a href="#get_handler_config-1">get_handler_config/1 </a></code>, then do the merge before writing the new configuration back with this function.</p> <p>If a key is removed compared to the current configuration, and the key is known by Logger, the default value is used. If it is a custom key, then it is up to the handler implementation if the value is removed or a default value is inserted.</p> </div></div></article><article class="func"><h3 id="set_handler_config-3" class="bold_code title-link func-head">  <code>set_handler_config(HandlerId, Key :: level, Level) -&gt; Return</code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <h3 id="set_handler_config-3" class="bold_code title-link func-head">  <pre data-language="erlang"><code>set_handler_config(HandlerId,
 Key :: filter_default,
 FilterDefault) -&gt;
 Return</code></pre>
<div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <h3 id="set_handler_config-3" class="bold_code title-link func-head">  <code>set_handler_config(HandlerId, Key :: filters, Filters) -&gt; Return</code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <h3 id="set_handler_config-3" class="bold_code title-link func-head">  <pre data-language="erlang"><code>set_handler_config(HandlerId, Key :: formatter, Formatter) -&gt;
 Return</code></pre>
<div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <h3 id="set_handler_config-3" class="bold_code title-link func-head">  <code>set_handler_config(HandlerId, Key :: config, Config) -&gt; Return</code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>HandlerId = <a href="#type-handler_id">handler_id()</a></code></div> <div class="REFTYPES rt-1"><code>Level = <a href="#type-level">level()</a> | all | none</code></div> <div class="REFTYPES rt-1"><code>FilterDefault = log | stop</code></div> <div class="REFTYPES rt-1"><code>Filters = [{<a href="#type-filter_id">filter_id()</a>, <a href="#type-filter">filter()</a>}]</code></div> <div class="REFTYPES rt-1"><code>Formatter = {module(), <a href="#type-formatter_config">formatter_config()</a>}</code></div> <div class="REFTYPES rt-1"><code>Config = term()</code></div> <div class="REFTYPES rt-1"><code>Return = ok | {error, term()}</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Add or update configuration data for the specified handler. If the given <code>Key</code> already exists, its associated value will be changed to the given value. If it does not exist, it will be added.</p> <p>If the value is incomplete, which for example can be the case for the <code>config</code> key, it is up to the handler implementation how the unspecified parts are set. For all handlers in the Kernel application, unspecified data for the <code>config</code> key is set to default values. To update only specified data, and keep the existing configuration for the rest, use <code><a href="#update_handler_config-3"> update_handler_config/3</a></code>.</p> <p>See the definition of the <code><a href="#type-handler_config"> handler_config()</a></code> type for more information about the different parameters.</p> </div></div></article><article class="func"><h3 id="set_primary_config-1" class="bold_code title-link func-head">  <code>set_primary_config(Config) -&gt; ok | {error, <code>term()</code>}</code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Config = <a href="#type-primary_config">primary_config()</a></code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Set primary configuration data for Logger. This overwrites the current configuration.</p> <p>To modify the existing configuration, use <code><a href="#update_primary_config-1"> update_primary_config/1</a></code>, or, if a more complex merge is needed, read the current configuration with <code><a href="#get_primary_config-0">get_primary_config/0 </a></code>, then do the merge before writing the new configuration back with this function.</p> <p>If a key is removed compared to the current configuration, the default value is used.</p> </div></div></article><article class="func"><h3 id="set_primary_config-2" class="bold_code title-link func-head">  <code>set_primary_config(Key :: level, Level) -&gt; ok | {error, <code>term()</code>}</code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <h3 id="set_primary_config-2" class="bold_code title-link func-head">  <pre data-language="erlang"><code>set_primary_config(Key :: filter_default, FilterDefault) -&gt;
 ok | {error, <code>term()</code>}</code></pre>
<div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <h3 id="set_primary_config-2" class="bold_code title-link func-head">  <pre data-language="erlang"><code>set_primary_config(Key :: filters, Filters) -&gt;
 ok | {error, <code>term()</code>}</code></pre>
<div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <h3 id="set_primary_config-2" class="bold_code title-link func-head">  <code>set_primary_config(Key :: metadata, Meta) -&gt; ok | {error, <code>term()</code>}</code><div class="title-since"><span class="since">OTP 24.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Level = <a href="#type-level">level()</a> | all | none</code></div> <div class="REFTYPES rt-1"><code>FilterDefault = log | stop</code></div> <div class="REFTYPES rt-1"><code>Filters = [{<a href="#type-filter_id">filter_id()</a>, <a href="#type-filter">filter()</a>}]</code></div> <div class="REFTYPES rt-1"><code>Meta = <a href="#type-metadata">metadata()</a></code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Add or update primary configuration data for Logger. If the given <code>Key</code> already exists, its associated value will be changed to the given value. If it does not exist, it will be added.</p> </div></div></article><article class="func"><h3 id="set_proxy_config-1" class="bold_code title-link func-head">  <code>set_proxy_config(Config) -&gt; ok | {error, <code>term()</code>}</code><div class="title-since"><span class="since">OTP 21.3</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Config = <a href="#type-olp_config">olp_config()</a></code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Set configuration data for the Logger proxy. This overwrites the current proxy configuration. Keys that are not specified in the <code>Config</code> map gets default values.</p> <p>To modify the existing configuration, use <code><a href="#update_proxy_config-1"> update_proxy_config/1</a></code>, or, if a more complex merge is needed, read the current configuration with <code><a href="#get_proxy_config-0">get_proxy_config/0 </a></code>, then do the merge before writing the new configuration back with this function.</p> <p>For more information about the proxy, see section <code><a href="logger_chapter.html#proxy">Logger Proxy</a></code> in the Kernel User's Guide.</p> </div></div></article><article class="func"><h3 id="set_module_level-2" class="bold_code title-link func-head">  <code>set_module_level(Modules, Level) -&gt; ok | {error, <code>term()</code>}</code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Modules = [module()] | module()</code></div> <div class="REFTYPES rt-1"><code>Level = <a href="#type-level">level()</a> | all | none</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Set the log level for the specified modules.</p> <p>The log level for a module overrides the primary log level of Logger for log events originating from the module in question. Notice, however, that it does not override the level configuration for any handler.</p> <p>For example: Assume that the primary log level for Logger is <code>info</code>, and there is one handler, <code>h1</code>, with level <code>info</code> and one handler, <code>h2</code>, with level <code>debug</code>.</p> <p>With this configuration, no debug messages will be logged, since they are all stopped by the primary log level.</p> <p>If the level for <code>mymodule</code> is now set to <code>debug</code>, then debug events from this module will be logged by the handler <code>h2</code>, but not by handler <code>h1</code>.</p> <p>Debug events from other modules are still not logged.</p> <p>To change the primary log level for Logger, use <code><a href="#set_primary_config-2"> set_primary_config(level, Level)</a></code>.</p> <p>To change the log level for a handler, use <code><a href="#set_handler_config-3"> set_handler_config(HandlerId, level, Level) </a></code>.</p> <div class="note"> <div class="label">Note</div> <div class="content">

<p>The originating module for a log event is only detected if the key <code>mfa</code> exists in the metadata, and is associated with <code>{Module, Function, Arity}</code>. When log macros are used, this association is automatically added to all log events. If an API function is called directly, without using a macro, the logging client must explicitly add this information if module levels shall have any effect.</p> </div> </div> </div></div></article><article class="func"><h3 id="set_process_metadata-1" class="bold_code title-link func-head">  <code>set_process_metadata(Meta) -&gt; ok</code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Meta = <a href="#type-metadata">metadata()</a></code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Set metadata which Logger shall automatically insert in all log events produced on the current process.</p> <p>Location data produced by the log macros, and/or metadata given as argument to the log call (API function or macro), are merged with the process metadata. If the same keys occur, values from the metadata argument to the log call overwrite values from the process metadata, which in turn overwrite values from the location data.</p> <p>Subsequent calls to this function overwrites previous data set. To update existing data instead of overwriting it, see <code><a href="#update_process_metadata-1"> update_process_metadata/1</a></code>.</p> </div></div></article><article class="func"><h3 id="unset_application_level-1" class="bold_code title-link func-head">  <pre data-language="erlang"><code>unset_application_level(Application) -&gt;
 ok | {error, {not_loaded, Application}}</code></pre>
<div class="title-since"><span class="since">OTP 21.1</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Application = atom()</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Unset the log level for all the modules of the specified application.</p> <p>This function is a utility function that calls <code><a href="#unset_module_level-1">logger:unset_module_level/2</a></code> for each module associated with an application.</p> </div></div></article><article class="func"><h3 id="unset_module_level-0" class="bold_code title-link func-head">  <code>unset_module_level() -&gt; ok</code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Remove module specific log settings. After this, the primary log level is used for all modules.</p> </div></div></article><article class="func"><h3 id="unset_module_level-1" class="bold_code title-link func-head">  <code>unset_module_level(Modules) -&gt; ok</code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Modules = [module()] | module()</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Remove module specific log settings. After this, the primary log level is used for the specified modules.</p> </div></div></article><article class="func"><h3 id="unset_process_metadata-0" class="bold_code title-link func-head">  <code>unset_process_metadata() -&gt; ok</code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Delete data set with <code><a href="#set_process_metadata-1"> set_process_metadata/1</a></code> or <code><a href="#update_process_metadata-1"> update_process_metadata/1</a></code>.</p> </div></div></article><article class="func"><h3 id="update_formatter_config-2" class="bold_code title-link func-head">  <pre data-language="erlang"><code>update_formatter_config(HandlerId, FormatterConfig) -&gt;
 ok | {error, <code>term()</code>}</code></pre>
<div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>HandlerId = <a href="#type-handler_id">handler_id()</a></code></div> <div class="REFTYPES rt-1"><code>FormatterConfig = <a href="#type-formatter_config">formatter_config()</a></code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Update the formatter configuration for the specified handler.</p> <p>The new configuration is merged with the existing formatter configuration.</p> <p>To overwrite the existing configuration without any merge, use</p> <pre data-language="erlang">
<code><a href="#set_handler_config-3">set_handler_config(HandlerId, formatter, {FormatterModule, FormatterConfig})</a></code>.</pre> </div></div></article><article class="func"><h3 id="update_formatter_config-3" class="bold_code title-link func-head">  <pre data-language="erlang"><code>update_formatter_config(HandlerId, Key, Value) -&gt;
 ok | {error, <code>term()</code>}</code></pre>
<div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>HandlerId = <a href="#type-handler_id">handler_id()</a></code></div> <div class="REFTYPES rt-1"><code>Key = atom()</code></div> <div class="REFTYPES rt-1"><code>Value = term()</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Update the formatter configuration for the specified handler.</p> <p>This is equivalent to</p> <pre data-language="erlang">
<code><a href="#update_formatter_config-2">update_formatter_config(HandlerId, #{Key =&gt; Value})</a></code></pre> </div></div></article><article class="func"><h3 id="update_handler_config-2" class="bold_code title-link func-head">  <code>update_handler_config(HandlerId, Config) -&gt; ok | {error, <code>term()</code>}</code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>HandlerId = <a href="#type-handler_id">handler_id()</a></code></div> <div class="REFTYPES rt-1"><code>Config = <a href="#type-handler_config">handler_config()</a></code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Update configuration data for the specified handler. This function behaves as if it was implemented as follows:</p> <pre data-language="erlang">{ok, {_, Old}} = logger:get_handler_config(HandlerId),
logger:set_handler_config(HandlerId, maps:merge(Old, Config)).</pre> <p>To overwrite the existing configuration without any merge, use <code><a href="#set_handler_config-2">set_handler_config/2 </a></code>.</p> </div></div></article><article class="func"><h3 id="update_handler_config-3" class="bold_code title-link func-head">  <code>update_handler_config(HandlerId, Key :: level, Level) -&gt; Return</code><div class="title-since"><span class="since">OTP 21.2</span></div> </h3> <h3 id="update_handler_config-3" class="bold_code title-link func-head">  <pre data-language="erlang"><code>update_handler_config(HandlerId,
 Key :: filter_default,
 FilterDefault) -&gt;
 Return</code></pre>
<div class="title-since"><span class="since">OTP 21.2</span></div> </h3> <h3 id="update_handler_config-3" class="bold_code title-link func-head">  <pre data-language="erlang"><code>update_handler_config(HandlerId, Key :: filters, Filters) -&gt;
 Return</code></pre>
<div class="title-since"><span class="since">OTP 21.2</span></div> </h3> <h3 id="update_handler_config-3" class="bold_code title-link func-head">  <pre data-language="erlang"><code>update_handler_config(HandlerId, Key :: formatter, Formatter) -&gt;
 Return</code></pre>
<div class="title-since"><span class="since">OTP 21.2</span></div> </h3> <h3 id="update_handler_config-3" class="bold_code title-link func-head">  <code>update_handler_config(HandlerId, Key :: config, Config) -&gt; Return</code><div class="title-since"><span class="since">OTP 21.2</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>HandlerId = <a href="#type-handler_id">handler_id()</a></code></div> <div class="REFTYPES rt-1"><code>Level = <a href="#type-level">level()</a> | all | none</code></div> <div class="REFTYPES rt-1"><code>FilterDefault = log | stop</code></div> <div class="REFTYPES rt-1"><code>Filters = [{<a href="#type-filter_id">filter_id()</a>, <a href="#type-filter">filter()</a>}]</code></div> <div class="REFTYPES rt-1"><code>Formatter = {module(), <a href="#type-formatter_config">formatter_config()</a>}</code></div> <div class="REFTYPES rt-1"><code>Config = term()</code></div> <div class="REFTYPES rt-1"><code>Return = ok | {error, term()}</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Add or update configuration data for the specified handler. If the given <code>Key</code> already exists, its associated value will be changed to the given value. If it does not exist, it will be added.</p> <p>If the value is incomplete, which for example can be the case for the <code>config</code> key, it is up to the handler implementation how the unspecified parts are set. For all handlers in the Kernel application, unspecified data for the <code>config</code> key is not changed. To reset unspecified data to default values, use <code><a href="#set_handler_config-3"> set_handler_config/3</a></code>.</p> <p>See the definition of the <code><a href="#type-handler_config"> handler_config()</a></code> type for more information about the different parameters.</p> </div></div></article><article class="func"><h3 id="update_primary_config-1" class="bold_code title-link func-head">  <code>update_primary_config(Config) -&gt; ok | {error, <code>term()</code>}</code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Config = <a href="#type-primary_config">primary_config()</a></code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Update primary configuration data for Logger. This function behaves as if it was implemented as follows:</p> <pre data-language="erlang">Old = logger:get_primary_config(),
logger:set_primary_config(maps:merge(Old, Config)).</pre> <p>To overwrite the existing configuration without any merge, use <code><a href="#set_primary_config-1">set_primary_config/1 </a></code>.</p> </div></div></article><article class="func"><h3 id="update_process_metadata-1" class="bold_code title-link func-head">  <code>update_process_metadata(Meta) -&gt; ok</code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Meta = <a href="#type-metadata">metadata()</a></code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Set or update metadata to use when logging from current process</p> <p>If process metadata exists for the current process, this function behaves as if it was implemented as follows:</p> <pre data-language="erlang">logger:set_process_metadata(maps:merge(logger:get_process_metadata(), Meta)).</pre> <p>If no process metadata exists, the function behaves as <code><a href="#set_process_metadata-1"> set_process_metadata/1 </a></code>.</p> </div></div></article><article class="func"><h3 id="update_proxy_config-1" class="bold_code title-link func-head">  <code>update_proxy_config(Config) -&gt; ok | {error, <code>term()</code>}</code><div class="title-since"><span class="since">OTP 21.3</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Config = <a href="#type-olp_config">olp_config()</a></code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Update configuration data for the Logger proxy. This function behaves as if it was implemented as follows:</p> <pre data-language="erlang">Old = logger:get_proxy_config(),
logger:set_proxy_config(maps:merge(Old, Config)).</pre> <p>To overwrite the existing configuration without any merge, use <code><a href="#set_proxy_config-1">set_proxy_config/1 </a></code>.</p> <p>For more information about the proxy, see section <code><a href="logger_chapter.html#proxy">Logger Proxy</a></code> in the Kernel User's Guide.</p> </div></div></article> </div> <section class="innertube"><h2 id="miscellaneous-api-functions" class="title-link"> <div class="title-name">Miscellaneous API functions</div>  </h2> </section><div class="innertube"><h2 id="export" class="title-link"> <div class="title-name">Exports</div>  </h2></div> <div class="exports-body"> <article class="func"><h3 id="compare_levels-2" class="bold_code title-link func-head">  <code>compare_levels(Level1, Level2) -&gt; eq | gt | lt</code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Level1 = Level2 = <a href="#type-level">level()</a> | all | none</code></div>  </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Compare the severity of two log levels. Returns <code>gt</code> if <code>Level1</code> is more severe than <code>Level2</code>, <code>lt</code> if <code>Level1</code> is less severe, and <code>eq</code> if the levels are equal.</p> </div></div></article><article class="func"><h3 id="format_report-1" class="bold_code title-link func-head">  <code>format_report(Report) -&gt; FormatArgs</code><div class="title-since"><span class="since">OTP 21.0</span></div> </h3> <div class="REFBODY fun-types"> <h4 id="types" class="func-types-title">Types</h4> <div class="REFTYPES rt-1"><code>Report = <a href="#type-report">report()</a></code></div> <div class="REFTYPES rt-1"><code>FormatArgs = {io:format(), [term()]}</code></div> </div> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Convert a log message on report form to <code>{Format, Args}</code>. This is the default report callback used by <code><a href="logger_formatter.html"> logger_formatter(3)</a></code> when no custom report callback is found. See section <code><a href="logger_chapter.html#log_message">Log Message</a></code> in the Kernel User's Guide for information about report callbacks and valid forms of log messages.</p> <p>The function produces lines of <code>Key: Value</code> from key-value lists. Strings are printed with <code>~ts</code> and other terms with <code>~tp</code>.</p> <p>If <code>Report</code> is a map, it is converted to a key-value list before formatting as such.</p> </div></div></article><article class="func"><h3 id="timestamp-0" class="bold_code title-link func-head">  <code>timestamp() -&gt; <code><a href="#type-timestamp">timestamp()</a></code></code><div class="title-since"><span class="since">OTP 21.3</span></div> </h3> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Return a timestamp that can be inserted as the <code>time</code> field in the meta data for a log event. It is produced with <code> os:system_time(microsecond)</code>.</p> <p>Notice that Logger automatically inserts a timestamp in the meta data unless it already exists. This function is exported for the rare case when the timestamp must be taken at a different point in time than when the log event is issued.</p> </div></div></article><article class="func"><h3 id="reconfigure-0" class="bold_code title-link func-head">  <code>reconfigure() -&gt; ok | {error, <code>term()</code>}</code><div class="title-since"><span class="since">OTP 24.2</span></div> </h3> <div class="exports-tube"><div class="REFBODY rb-7"> <p>Reconfigure Logger using updated <code>kernel</code> configuration that was set after <code>kernel</code> application was loaded.</p> <p>Beware, that this is meant to be run only by the build tools, not manually during application lifetime, as this may cause missing log entries.</p> </div></div></article> </div> <section class="innertube"><h2 id="handler-callback-functions" class="title-link"> <div class="title-name">Handler Callback Functions</div>  </h2> <div class="REFBODY rb-3">  <p id="handler_callback_functions">The following functions are to be exported from a handler callback module.</p> </div></section><div class="innertube"><h2 id="export" class="title-link"> <div class="title-name">Exports</div>  </h2></div> <div class="exports-body"> <article class="func"><div class="bold_code func-head"><h3 id="HModule:adding_handler-1" class="title-link">  <div class="title-name">HModule:adding_handler(Config1) -&gt; {ok, Config2} | {error, Reason}</div> <div class="title-since"><span class="since">OTP 21.0</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>Config1 = Config2 = <a href="#type-handler_config">handler_config()</a></code><br> </div> <div class="REFTYPES rt-4"> <code>Reason = term()</code><br> </div> </div> <div class="REFBODY rb-7"> <p>This callback function is optional.</p> <p>The function is called on a temporary process when a new handler is about to be added. The purpose is to verify the configuration and initiate all resources needed by the handler.</p> <p>The handler identity is associated with the <code>id</code> key in <code>Config1</code>.</p> <p>If everything succeeds, the callback function can add possible default values or internal state values to the configuration, and return the adjusted map in <code>{ok,Config2}</code>.</p> <p>If the configuration is faulty, or if the initiation fails, the callback function must return <code>{error,Reason}</code>.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="HModule:changing_config-3" class="title-link">  <div class="title-name">HModule:changing_config(SetOrUpdate, OldConfig, NewConfig) -&gt; {ok, Config} | {error, Reason}</div> <div class="title-since"><span class="since">OTP 21.2</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>SetOrUpdate = set | update</code><br> </div> <div class="REFTYPES rt-4"> <code>OldConfig = NewConfig = Config = <a href="#type-handler_config">handler_config()</a></code><br> </div> <div class="REFTYPES rt-4"> <code>Reason = term()</code><br> </div> </div> <div class="REFBODY rb-7"> <p>This callback function is optional.</p> <p>The function is called on a temporary process when the configuration for a handler is about to change. The purpose is to verify and act on the new configuration.</p> <p><code>OldConfig</code> is the existing configuration and <code>NewConfig</code> is the new configuration.</p> <p>The handler identity is associated with the <code>id</code> key in <code>OldConfig</code>.</p> <p><code>SetOrUpdate</code> has the value <code>set</code> if the configuration change originates from a call to <code><a href="#set_handler_config-2"> set_handler_config/2,3</a></code>, and <code>update</code> if it originates from <code><a href="#update_handler_config-2"> update_handler_config/2,3</a></code>. The handler can use this parameter to decide how to update the value of the <code>config</code> field, that is, the handler specific configuration data. Typically, if <code>SetOrUpdate</code> equals <code>set</code>, values that are not specified must be given their default values. If <code>SetOrUpdate</code> equals <code>update</code>, the values found in <code>OldConfig</code> must be used instead.</p> <p>If everything succeeds, the callback function must return a possibly adjusted configuration in <code>{ok,Config}</code>.</p> <p>If the configuration is faulty, the callback function must return <code>{error,Reason}</code>.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="HModule:filter_config-1" class="title-link">  <div class="title-name">HModule:filter_config(Config) -&gt; FilteredConfig</div> <div class="title-since"><span class="since">OTP 21.2</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>Config = FilteredConfig = <a href="#type-handler_config">handler_config()</a></code><br> </div> </div> <div class="REFBODY rb-7"> <p>This callback function is optional.</p> <p>The function is called when one of the Logger API functions for fetching the handler configuration is called, for example <code><a href="#get_handler_config-1"> logger:get_handler_config/1</a></code>.</p> <p>It allows the handler to remove internal data fields from its configuration data before it is returned to the caller.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="HModule:log-2" class="title-link">  <div class="title-name">HModule:log(LogEvent, Config) -&gt; void()</div> <div class="title-since"><span class="since">OTP 21.0</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>LogEvent = <a href="#type-log_event">log_event()</a></code><br> </div> <div class="REFTYPES rt-4"> <code>Config = <a href="#type-handler_config">handler_config()</a></code><br> </div> </div> <div class="REFBODY rb-7"> <p>This callback function is mandatory.</p> <p>The function is called when all primary filters and all handler filters for the handler in question have passed for the given log event. It is called on the client process, that is, the process that issued the log event.</p> <p>The handler identity is associated with the <code>id</code> key in <code>Config</code>.</p> <p>The handler must log the event.</p> <p>The return value from this function is ignored by Logger.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="HModule:removing_handler-1" class="title-link">  <div class="title-name">HModule:removing_handler(Config) -&gt; ok</div> <div class="title-since"><span class="since">OTP 21.0</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>Config = <a href="#type-handler_config">handler_config()</a></code><br> </div> </div> <div class="REFBODY rb-7"> <p>This callback function is optional.</p> <p>The function is called on a temporary process when a handler is about to be removed. The purpose is to release all resources used by the handler.</p> <p>The handler identity is associated with the <code>id</code> key in <code>Config</code>.</p> <p>The return value is ignored by Logger.</p> </div> </div></article> </div> <section class="innertube"><h2 id="formatter-callback-functions" class="title-link"> <div class="title-name">Formatter Callback Functions</div>  </h2> <div class="REFBODY rb-3">  <p id="formatter_callback_functions">The following functions are to be exported from a formatter callback module.</p> </div></section><div class="innertube"><h2 id="export" class="title-link"> <div class="title-name">Exports</div>  </h2></div> <div class="exports-body"> <article class="func"><div class="bold_code func-head"><h3 id="FModule:check_config-1" class="title-link">  <div class="title-name">FModule:check_config(FConfig) -&gt; ok | {error, Reason}</div> <div class="title-since"><span class="since">OTP 21.0</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>FConfig = <a href="#type-formatter_config">formatter_config()</a></code><br> </div> <div class="REFTYPES rt-4"> <code>Reason = term()</code><br> </div> </div> <div class="REFBODY rb-7"> <p>This callback function is optional.</p> <p>The function is called by a Logger when formatter configuration is set or modified. The formatter must validate the given configuration and return <code>ok</code> if it is correct, and <code>{error,Reason}</code> if it is faulty.</p> <p>The following Logger API functions can trigger this callback:</p> <ul> <li><code><a href="logger.html#add_handler-3"> logger:add_handler/3</a></code></li> <li><code><a href="logger.html#set_handler_config-2"> logger:set_handler_config/2,3</a></code></li> <li><code><a href="logger.html#update_handler_config-2"> logger:update_handler_config/2,3</a></code></li> <li><code><a href="logger.html#update_formatter_config-2"> logger:update_formatter_config/2</a></code></li> </ul> <p>See <code><a href="logger_formatter.html"> logger_formatter(3)</a></code> for an example implementation. <code>logger_formatter</code> is the default formatter used by Logger.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="FModule:format-2" class="title-link">  <div class="title-name">FModule:format(LogEvent, FConfig) -&gt; FormattedLogEntry</div> <div class="title-since"><span class="since">OTP 21.0</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>LogEvent = <a href="#type-log_event">log_event()</a></code><br> </div> <div class="REFTYPES rt-4"> <code>FConfig = <a href="#type-formatter_config">formatter_config()</a></code><br> </div> <div class="REFTYPES rt-4"> <code>FormattedLogEntry = unicode:chardata()</code><br> </div> </div> <div class="REFBODY rb-7"> <p>This callback function is mandatory.</p> <p>The function can be called by a log handler to convert a log event term to a printable string. The returned value can, for example, be printed as a log entry to the console or a file using <code> io:put_chars/1,2</code>.</p> <p>See <code><a href="logger_formatter.html"> logger_formatter(3)</a></code> for an example implementation. <code>logger_formatter</code> is the default formatter used by Logger.</p> </div> </div></article> </div> <section class="innertube"><h2 id="see-also" class="title-link"> <div class="title-name">See Also</div>  </h2> <div class="REFBODY rb-3"> <p> <code><a href="config.html">config(4)</a></code>, <code>erlang(3)</code>, <code>io(3)</code>, <code><a href="logger_disk_log_h.html">logger_disk_log_h(3)</a></code>, <code><a href="logger_filters.html">logger_filters(3)</a></code>, <code><a href="logger_formatter.html">logger_formatter(3)</a></code>, <code><a href="logger_std_h.html">logger_std_h(3)</a></code>, <code>unicode(3)</code> </p> </div></section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010&ndash;2023 Ericsson AB<br>Licensed under the Apache License, Version 2.0.<br>
    
  </p>
</div>
