  <div class="innertube"> <h2 id="module" class="title-link"> <div class="title-name">Module</div>  </h2> <div class="REFBODY module-body">snmpm_user</div> </div> <div class="innertube"> <h2 id="module-summary" class="title-link"> <div class="title-name">Module Summary</div>  </h2> <div class="REFBODY module-summary-body">Behaviour module for the SNMP manager user.</div> </div> <section class="description"><div class="innertube"> <h2 id="description" class="title-link"> <div class="title-name">Description</div>  </h2> <div class="REFBODY description-body" id="types">

<p>This module defines the behaviour of the manager user. A <code>snmpm_user</code> compliant module must export the following functions: </p> <ul> <li> <p>handle_error/3</p> </li> <li> <p>handle_agent/4</p> </li> <li> <p>handle_pdu/4</p> </li> <li> <p>handle_trap/3</p> </li> <li> <p>handle_inform/3</p> </li> <li> <p>handle_report/3</p> </li> <li> <p>handle_invalid_result/2</p> </li> </ul> <p>The semantics of them and their exact signatures are explained below. </p> <p>Some of the function has no defined return value (<code>void()</code>), they can of course return anything. But the functions that do have specified return value(s) <strong>must</strong> adhere to this. None of the functions can use exit of throw to return. </p> <p>If the manager is not configured to use any particular transport domain, the behaviour <code>handle_agent/4</code> will for backwards copmpatibility reasons be called with the old <code>IpAddr</code> and <code>PortNumber</code> arguments</p>  </div> </div></section> <section class="innertube"><h2 id="data-types" class="title-link"> data types  </h2> <div class="REFBODY rb-3" id="handle_error"> <pre data-language="erlang">snmp_gen_info() = {ErrorStatus :: atom(), 
                   ErrorIndex  :: pos_integer(), 
                   Varbinds    :: [snmp:varbind()]}
snmp_v1_trap_info() :: {Enteprise :: snmp:oid(), 
                        Generic   :: integer(), 
                        Spec      :: integer(), 
                        Timestamp :: integer(), 
                        Varbinds  :: [snmp:varbind()]}</pre>  </div></section> <div class="innertube"><h2 id="export" class="title-link"> <div class="title-name">Exports</div>  </h2></div> <div class="exports-body"> <article class="func"><div class="bold_code func-head"><h3 id="handle_error-3" class="title-link">  <div class="title-name">handle_error(ReqId, Reason, UserData) -&gt; void()</div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>ReqId = netif | integer()</code><br> </div> <div class="REFTYPES rt-4"> <code>Reason = {unexpected_pdu, SnmpInfo} | {invalid_sec_info, SecInfo, SnmpInfo} | {empty_message, Addr, Port} | term()</code><br> </div> <div class="REFTYPES rt-4"> <code>SnmpInfo = snmp_gen_info()</code><br> </div> <div class="REFTYPES rt-4"> <code>SecInfo = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>Addr = ip_address()</code><br> </div> <div class="REFTYPES rt-4"> <code>Port = integer()</code><br> </div> <div class="REFTYPES rt-4"> <code>UserData = term()</code><br> </div> </div> <div class="REFBODY rb-7" id="handle_agent"> <p>This function is called when the manager needs to communicate an "asynchronous" error to the user: e.g. failure to send an asynchronous message (i.e. encoding error), a received message was discarded due to security error, the manager failed to generate a response message to a received inform-request, or when receiving an unexpected PDU from an agent (could be an expired async request). </p> <p>If <code>ReqId</code> is less then 0, it means that this information was not available to the manager (that info was never retrieved before the message was discarded). </p> <p>For <code>SnmpInfo</code> see handle_agent below.</p> <p>Note that there is a special case when the value of <code>ReqId</code> has the value of the atom <code>netif</code>. This means that the NetIF process has suffered a "fatal" error and been restarted. With possible loss of traffic! </p>  </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="handle_agent-5" class="title-link">  <div class="title-name">handle_agent(Domain, Addr, Type, SnmpInfo, UserData) -&gt; Reply</div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>Domain = transportDomainUdpIpv4 | transportDomainUdpIpv6</code><br> </div> <div class="REFTYPES rt-4"> <code>Addr = {inet:ip_address(), inet:port_number()}</code><br> </div> <div class="REFTYPES rt-4"> <code>Type = pdu | trap | report | inform</code><br> </div> <div class="REFTYPES rt-4"> <code>SnmpInfo = SnmpPduInfo | SnmpTrapInfo | SnmpReportInfo | SnmpInformInfo</code><br> </div> <div class="REFTYPES rt-4"> <code>SnmpPduInfo = snmp_gen_info()</code><br> </div> <div class="REFTYPES rt-4"> <code>SnmpTrapInfo = snmp_v1_trap_info()</code><br> </div> <div class="REFTYPES rt-4"> <code>SnmpReportInfo = snmp_gen_info()</code><br> </div> <div class="REFTYPES rt-4"> <code>SnmpInformInfo = snmp_gen_info()</code><br> </div> <div class="REFTYPES rt-4"> <code>UserData = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>Reply = ignore | {register, UserId, TargetName, AgentConfig}</code><br> </div> <div class="REFTYPES rt-4"> <code>UserId = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>TargetName = target_name()</code><br> </div> <div class="REFTYPES rt-4"> <code>AgentConfig = [agent_config()]</code><br> </div> </div> <div class="REFBODY rb-7" id="handle_pdu"> <p>This function is called when a message is received from an unknown agent.</p> <p>Note that this will always be the default user that is called.</p> <p>For more info about the <code>agent_config()</code>, see <code><a href="snmpm.html#register_agent">register_agent</a></code>.</p> <p>The arguments <code>Type</code> and <code>SnmpInfo</code> relates in the following way: </p> <ul> <li> <p><code>pdu</code> - <code>SnmpPduInfo</code> (see <code><a href="#handle_pdu">handle_pdu</a></code> for more info).</p> </li> <li> <p><code>trap</code> - <code>SnmpTrapInfo</code> (see <code><a href="#handle_trap">handle_trap</a></code> for more info).</p> </li> <li> <p><code>report</code> - <code>SnmpReportInfo</code> (see <code><a href="#handle_report">handle_report</a></code> for more info).</p> </li> <li> <p><code>inform</code> - <code>SnmpInformInfo</code> (see <code><a href="#handle_inform">handle_inform</a></code> for more info).</p> </li> </ul> <p>The only user which would return <code>{register, UserId, TargetName, AgentConfig}</code> is the <strong>default user</strong>.</p>  </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="handle_pdu-4" class="title-link">  <div class="title-name">handle_pdu(TargetName, ReqId, SnmpPduInfo, UserData) -&gt; void()</div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>TargetName = target_name()</code><br> </div> <div class="REFTYPES rt-4"> <code>ReqId = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>SnmpPduInfo = snmp_gen_info()</code><br> </div> <div class="REFTYPES rt-4"> <code>UserData = term()</code><br> </div> </div> <div class="REFBODY rb-7" id="handle_trap"> <p>Handle the reply to an asynchronous request, such as <code><a href="snmpm.html#async_get2">async_get</a></code>, <code><a href="snmpm.html#async_get_next2">async_get_next</a></code> or <code><a href="snmpm.html#async_set2">async_set</a></code>.</p> <p>It could also be a late reply to a synchronous request.</p> <p><code>ReqId</code> is returned by the asynchronous request function.</p>  </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="handle_trap-3" class="title-link">  <div class="title-name">handle_trap(TargetName, SnmpTrapInfo, UserData) -&gt; Reply</div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>TargetName = TargetName2 = target_name()</code><br> </div> <div class="REFTYPES rt-4"> <code>SnmpTrapInfo = snmp_v1_trap_info() | snmp_gen_info()</code><br> </div> <div class="REFTYPES rt-4"> <code>UserData = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>Reply = ignore | unregister | {register, UserId, TargetName2, AgentConfig}</code><br> </div> <div class="REFTYPES rt-4"> <code>UserId = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>AgentConfig = [agent_config()]</code><br> </div> </div> <div class="REFBODY rb-7" id="handle_inform"> <p>Handle a trap/notification message from an agent.</p> <p>For more info about the <code>agent_config()</code>, see <code><a href="snmpm.html#register_agent">register_agent</a></code></p> <p>The only user which would return <code>{register, UserId, TargetName2, agent_info()}</code> is the <strong>default user</strong>.</p>  </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="handle_inform-3" class="title-link">  <div class="title-name">handle_inform(TargetName, SnmpInformInfo, UserData) -&gt; Reply</div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>TargetName = TargetName2 = target_name()</code><br> </div> <div class="REFTYPES rt-4"> <code>SnmpInformInfo = snmp_gen_info()</code><br> </div> <div class="REFTYPES rt-4"> <code>UserData = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>Reply = ignore | no_reply | unregister | {register, UserId, TargetName2, AgentConfig}</code><br> </div> <div class="REFTYPES rt-4"> <code>UserId = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>AgentConfig = [agent_config()]</code><br> </div> </div> <div class="REFBODY rb-7" id="handle_report"> <p>Handle a inform message.</p> <p>For more info about the <code>agent_config()</code>, see <code><a href="snmpm.html#register_agent">register_agent</a></code></p> <p>The only user which would return <code>{register, UserId, TargetName2, AgentConfig}</code> is the <strong>default user</strong>.</p> <p>If the <code><a href="snmp_config.html#manager_irb">inform request behaviour</a></code> configuration option is set to <code>user</code> or <code>{user, integer()}</code>, the response (acknowledgment) to this inform-request will be sent when this function returns.</p>  </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="handle_report-3" class="title-link">  <div class="title-name">handle_report(TargetName, SnmpReportInfo, UserData) -&gt; Reply</div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>TargetName = TargetName2 = target_name()</code><br> </div> <div class="REFTYPES rt-4"> <code>Addr = ip_address()</code><br> </div> <div class="REFTYPES rt-4"> <code>Port = integer()</code><br> </div> <div class="REFTYPES rt-4"> <code>SnmpReportInfo = snmp_gen_info()</code><br> </div> <div class="REFTYPES rt-4"> <code>UserData = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>Reply = ignore | unregister | {register, UserId, TargetName2, AgentConfig}</code><br> </div> <div class="REFTYPES rt-4"> <code>UserId = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>AgentConfig = [agent_config()]</code><br> </div> </div> <div class="REFBODY rb-7" id="handle_invalid_result"> <p>Handle a report message.</p> <p>For more info about the <code>agent_config()</code>, see <code><a href="snmpm.html#register_agent">register_agent</a></code></p> <p>The only user which would return <code>{register, UserId, TargetName2, AgentConfig}</code> is the <strong>default user</strong>.</p>  </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="handle_invalid_result-2" class="title-link">  <div class="title-name">handle_invalid_result(IN, OUT) -&gt; void()</div> <div class="title-since"><span class="since">OTP R16B03</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>IN = {Func, Args}</code><br> </div> <div class="REFTYPES rt-4"> <code>Func = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>Args = list()</code><br> </div> <div class="REFTYPES rt-4"> <code>OUT = {crash, CrashInfo} | {result, InvalidResult}</code><br> </div> <div class="REFTYPES rt-4"> <code>CrashInfo = {ErrorType, Error, Stacktrace}</code><br> </div> <div class="REFTYPES rt-4"> <code>ErrorType = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>Error = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>Stacktrace = list()</code><br> </div> <div class="REFTYPES rt-4"> <code>InvalidResult = term()</code><br> </div> </div> <div class="REFBODY rb-7"> <p>If <strong>any</strong> of the <strong>other</strong> callback functions crashes (exit, throw or a plain crash) or return an invalid result (if a valid return has been specified), this function is called. The purpose is to allow the user handle this error (for instance to issue an error report).</p> <p><code>IN</code> reprecents the function called (and its arguments). <code>OUT</code> represents the unexpected/invalid result. </p> </div> </div></article> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010&ndash;2023 Ericsson AB<br>Licensed under the Apache License, Version 2.0.<br>
    
  </p>
</div>
