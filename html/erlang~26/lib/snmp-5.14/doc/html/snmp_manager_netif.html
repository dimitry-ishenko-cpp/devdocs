<div class="innertube"> <h1 id="Definition of Manager Net if">13 Definition of Manager Net if</h1>  <div class="doc-image-wrapper">  <p class="doc-image-caption">Figure 13.1: The Purpose of Manager Net if</p> </div> <p>The Network Interface (Net If) process delivers SNMP PDUs to the manager server, and receives SNMP PDUs from the manager server. The most common behaviour of a Net if process is that is receives request PDU from the manager server, encodes the PDU into bytes and transmits the bytes onto the network to an agent. When the reply from the agent is received by the Net if process, which it decodes into an SNMP PDU, which it sends to the manager server. </p> <p>However, that simple behaviour can be modified in numerous ways. For example, the Net if process can apply some kind of encrypting/decrypting scheme on the bytes. </p> <p>The snmp application provides two different modules, <code>snmpm_net_if</code> (the default) and <code>snmpm_net_if_mt</code>, both uses UDP as the transport protocol i.e the transport domains <code>transportDomainUdpIpv4</code> and/or <code>transportDomainUdpIpv6</code>. The difference between the two modules is that the latter is "multi-threaded", i.e. for each message/request a new process is created that processes the message/request and then exits. </p> <p>There is a <code>server</code> config option, <code><a href="snmp_config.html#manager_server_nis">netif_sup</a></code> that enables "active" Net If supervision. This is very simple mechanism. The (supervising) process simply sends a <code><a href="#im_ping">ping</a></code> message and expects a <code><a href="#om_pong">pong</a></code> message response (within a specific time). The interval between each <code>ping/pong</code> exchange is user configurable. As is the time that is allowed for the <code><a href="#om_pong">pong</a></code> message to arrive. Both the NetIf module(s) provided with the app supports active supervision. If a NetIf module/process is used which do not implement this, then the server cannot be configured with active supervision. </p> <p>It is also possible to write your own Net if process and this section describes how to do that.</p> <h2 id="mandatory-functions" class="title-link"> <div class="title-name">13.1 Mandatory Functions</div>  </h2> <p>A Net If process must implement the SNMP manager <code><a href="snmpm_network_interface.html">network interface behaviour</a></code>. </p> <h2 id="messages" class="title-link"> <div class="title-name">13.2 Messages</div>  </h2> <p>The section <strong>Messages</strong> describes mandatory (with exception for the ping/pong messages) messages, which Net If must send to the manager server process. </p> <p>In this section a <code>Domain</code> field is the transport domain i.e one of <code>transportDomainUdpIpv4</code> or <code>transportDomainUdpIpv6</code>, and an <code>Addr</code> field is an <code>{</code><code>IpAddr</code><code>,IpPort}</code> tuple.</p> <h3 id="outgoing-messages" class="title-link"> <div class="title-name">Outgoing Messages</div>  </h3> <p>Net if must send the following message when it receives an SNMP PDU from the network that is aimed for the MasterAgent: </p> <pre data-language="erlang">
Server ! {snmp_pdu, Pdu, Domain, Addr}
      </pre> <ul> <li> <p><code>Pdu</code> is an SNMP PDU record, as defined in <code>snmp_types.hrl</code>, with the SNMP request.</p> </li> <li> <p><code>Domain</code> is the source transport domain. </p> </li> <li> <p><code>Addr</code> is the source address. </p> </li> </ul> <pre data-language="erlang">
Server ! {snmp_trap, Trap, Domain, Addr}
      </pre> <ul> <li> <p><code>Trap</code> is either an SNMP pdu record or an trappdu record, as defined in <code>snmp_types.hrl</code>, with the SNMP request.</p> </li> <li> <p><code>Domain</code> is the source transport domain. </p> </li> <li> <p><code>Addr</code> is the source address. </p> </li> </ul> <pre data-language="erlang">
Server ! {snmp_inform, Ref, Pdu, PduMS, Domain, Addr}
      </pre> <ul> <li> <p><code>Ref</code> is either the atom <code>ignore</code> or something that can be used to identify the inform-request (e.g. request-id). <code>ignore</code> is used if the response (acknowledgment) to the inform-request has already been sent (this means that the server will not make the call to the <code><a href="snmpm_network_interface.html#inform_response">inform_response</a></code> function). See the <code><a href="snmp_config.html#manager_irb">inform request behaviour</a></code> configuration option for more info.</p> </li> <li> <p><code>Pdu</code> is an SNMP PDU record, as defined in <code>snmp_types.hrl</code>, with the SNMP request.</p> </li> <li> <p><code>Domain</code> is the source transport domain. </p> </li> <li> <p><code>Addr</code> is the source address. </p> </li> </ul> <pre data-language="erlang">
Server ! {snmp_report, Data, Domain, Addr}
      </pre> <ul> <li> <p><code>Data</code> is either <code>{ok, Pdu}</code> or <code>{error, ReqId, ReasonInfo, Pdu}</code>. Which one is used depends on the return value from the MPD <code><a href="snmpm_mpd.html#process_msg">process_msg</a></code> function. If the MsgData is <code>ok</code>, the first is used, and if it is <code>{error, ReqId, Reason}</code> the latter is used.</p> </li> <li> <p><code>Pdu</code> is an SNMP PDU record, as defined in <code>snmp_types.hrl</code>, with the SNMP request.</p> </li> <li> <p><code>ReqId</code> is an integer.</p> </li> <li> <p><code>ReasonInfo</code> is a term().</p> </li> <li> <p><code>Domain</code> is the source transport domain. </p> </li> <li> <p><code>Addr</code> is the source address. </p> </li> </ul>  <pre id="om_pong" data-language="erlang">
Supervisor ! {pong, self()}
      </pre> <ul> <li> <p><code>Supervisor</code> is the process that sent the <code><a href="#im_ping">ping</a></code> message (see below). </p> </li> </ul> <h3 id="incoming-messages" class="title-link"> <div class="title-name">Incoming Messages</div>  </h3> <p>This section describes the incoming messages which a Net If process may choose to respond to. </p> <ul> <li>  <p id="im_ping"><code>{ping, Supervisor}</code></p> <p>This message is sent to the Net If process by a process that has been configured to perfor "active supervision" of the Net If process. The Net If process should respond immediately with a <code><a href="#om_pong">pong</a></code> message. </p> <ul> <li> <p><code>Supervisor</code> is a <code>pid()</code>. </p> </li> </ul> </li> </ul> <h2 id="notes" class="title-link"> <div class="title-name">13.3 Notes</div>  </h2> <p>Since the Net if process is responsible for encoding and decoding of SNMP messages, it must also update the relevant counters in the SNMP group in MIB-II. It can use the functions in the module <code>snmpm_mpd</code> for this purpose (refer to the Reference Manual, section <code>snmp</code>, module <code>snmpm_mpd</code> for more details). </p> <p>There are also some useful functions for encoding and decoding of SNMP messages in the module <code>snmp_pdus</code>. </p> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010&ndash;2023 Ericsson AB<br>Licensed under the Apache License, Version 2.0.<br>
    
  </p>
</div>
