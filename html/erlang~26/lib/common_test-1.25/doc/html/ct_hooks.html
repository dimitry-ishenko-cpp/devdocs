  <div class="innertube"> <h2 id="module" class="title-link"> <div class="title-name">Module</div>  </h2> <div class="REFBODY module-body">ct_hooks</div> </div> <div class="innertube"> <h2 id="module-summary" class="title-link"> <div class="title-name">Module Summary</div>  </h2> <div class="REFBODY module-summary-body">A callback interface on top of Common Test.</div> <h2 id="since" class="title-link"> <div class="title-name">Since</div>  </h2> <div class="REFBODY module-since"> Module ct_hooks was introduced in OTP R14B02. </div> </div> <section class="description"><div class="innertube"> <h2 id="description" class="title-link"> <div class="title-name">Description</div>  </h2> <div class="REFBODY description-body">

<p>The <strong>Common Test Hook (CTH)</strong> framework allows extensions of the default behavior of <code>Common Test</code> by callbacks before and after all test suite calls. It is intended for advanced users of <code>Common Test</code> who want to abstract out behavior that is common to multiple test suites. </p> <p>In brief, CTH allows you to:</p> <ul> <li><p>Manipulate the runtime configuration before each suite configuration call.</p></li> <li><p>Manipulate the return of all suite configuration calls and by extension the result of the test themselves.</p></li> </ul> <p>The following sections describe the mandatory and optional CTH functions that <code>Common Test</code> calls during test execution. For more details, see section <code><a href="ct_hooks_chapter.html">Common Test Hooks</a></code> in the User's Guide.</p> <p>For information about how to add a CTH to your suite, see section <code><a href="ct_hooks_chapter.html#installing">Installing a CTH</a></code> in the User's Guide.</p> <div class="note"> <div class="label">Note</div> <div class="content">

<p>For a minimal example of a CTH, see section <code><a href="ct_hooks_chapter.html#example">Example CTH</a></code> in the User's Guide.</p>
</div> </div> </div> </div></section> <section class="innertube"><h2 id="callback-functions" class="title-link"> <div class="title-name">Callback Functions</div>  </h2> <div class="REFBODY rb-3"> <p>The following functions define the callback interface for a CTH.</p> </div></section><div class="innertube"><h2 id="export" class="title-link"> <div class="title-name">Exports</div>  </h2></div> <div class="exports-body"> <article class="func"><div class="bold_code func-head"><h3 id="Module:init-2" class="title-link">  <div class="title-name">Module:init(Id, Opts) -&gt; {ok, State} | {ok, State, Priority}</div> <div class="title-since"><span class="since">OTP R14B02</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>Id = reference() | term()</code><br> </div> <div class="REFTYPES rt-4"> <code>Opts = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>State = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>Priority = integer()</code><br> </div> </div> <div class="REFBODY rb-7"> <p>MANDATORY</p> <p>This function is always called before any other callback function. Use it to initiate any common state. It is to return a state for this CTH.</p> <p><code>Id</code> is either the return value of <code><a href="#Module:id-1">ct_hooks:id/1</a></code>, or a <code>reference</code> (created using <code>erlang:make_ref/0</code> in ERTS) if <code><a href="#Module:id-1">ct_hooks:id/1</a></code> is not implemented.</p> <p><code>Priority</code> is the relative priority of this hook. Hooks with a lower priority are executed first. If no priority is specified, it is set to <code>0</code>.</p> <p>For details about when <code>init</code> is called, see section <code><a href="ct_hooks_chapter.html#scope">CTH Scope</a></code> in the User's Guide.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="Module:post_groups-2" class="title-link">  <div class="title-name">Module:post_groups(SuiteName, GroupDefs) -&gt; NewGroupDefs</div> <div class="title-since"><span class="since">OTP 21.3.8</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>SuiteName = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>GroupDefs = NewGroupDefs = [Group]</code><br> </div> <div class="REFTYPES rt-4"> <code>Group = {GroupName,Properties,GroupsAndTestCases}</code><br> </div> <div class="REFTYPES rt-4"> <code>GroupName = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>Properties = [parallel | sequence | Shuffle | {GroupRepeatType,N}]</code><br> </div> <div class="REFTYPES rt-4"> <code>GroupsAndTestCases = [Group | {group,GroupName} | TestCase | {testcase,TestCase,TCRepeatProps}]</code><br> </div> <div class="REFTYPES rt-4"> <code>TestCase = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>TCRepeatProps = [{repeat,N} | {repeat_until_ok,N} | {repeat_until_fail,N}]</code><br> </div> <div class="REFTYPES rt-4"> <code>Shuffle = shuffle | {shuffle,Seed}</code><br> </div> <div class="REFTYPES rt-4"> <code>Seed = {integer(),integer(),integer()}</code><br> </div> <div class="REFTYPES rt-4"> <code>GroupRepeatType = repeat | repeat_until_all_ok | repeat_until_all_fail | repeat_until_any_ok | repeat_until_any_fail</code><br> </div> <div class="REFTYPES rt-4"> <code>N = integer() | forever</code><br> </div> </div> <div class="REFBODY rb-7"> <p>OPTIONAL</p> <p>This function is called after <code><a href="ct_suite.html#Module:groups-0">groups/0</a></code>. It is used to modify the test group definitions, for instance to add or remove groups or change group properties.</p> <p><code>GroupDefs</code> is what <code><a href="ct_suite.html#Module:groups-0">groups/0</a></code> returned, that is, a list of group definitions.</p> <p><code>NewGroupDefs</code> is the possibly modified version of this list.</p> <p>This function is called only if the CTH is added before <code>init_per_suite</code> is run. For details, see section <code><a href="ct_hooks_chapter.html#scope">CTH Scope</a></code> in the User's Guide.</p> <p>Notice that for CTHs that are installed by means of the <code><a href="ct_suite.html#Module:suite-0">suite/0</a></code> function, <code>post_groups/2</code> is called before the <code><a href="#Module:init-2">init/2</a></code> hook function. However, for CTHs that are installed by means of the CT start flag, the <code><a href="#Module:init-2">init/2</a></code> function is called first.</p> <div class="note"> <div class="label">Note</div> <div class="content">

<p>Prior to each test execution, Common Test does a simulated test run in order to count test suites, groups and cases for logging purposes. This causes the <code>post_groups/2</code> hook function to always be called twice. For this reason, side effects are best avoided in this callback.</p> </div> </div> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="Module:post_all-3" class="title-link">  <div class="title-name">Module:post_all(SuiteName, Return, GroupDefs) -&gt; NewReturn</div> <div class="title-since"><span class="since">OTP 21.3.8</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>SuiteName = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>Return = NewReturn = Tests | {skip,Reason}</code><br> </div> <div class="REFTYPES rt-4"> <code>Tests = [TestCase | {testcase,TestCase,TCRepeatProps} | {group,GroupName} | {group,GroupName,Properties} | {group,GroupName,Properties,SubGroups}]</code><br> </div> <div class="REFTYPES rt-4"> <code>TestCase = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>TCRepeatProps = [{repeat,N} | {repeat_until_ok,N} | {repeat_until_fail,N}]</code><br> </div> <div class="REFTYPES rt-4"> <code>GroupName = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>Properties = GroupProperties | default</code><br> </div> <div class="REFTYPES rt-4"> <code>SubGroups = [{GroupName,Properties} | {GroupName,Properties,SubGroups}]</code><br> </div> <div class="REFTYPES rt-4"> <code>Shuffle = shuffle | {shuffle,Seed}</code><br> </div> <div class="REFTYPES rt-4"> <code>Seed = {integer(),integer(),integer()}</code><br> </div> <div class="REFTYPES rt-4"> <code>GroupRepeatType = repeat | repeat_until_all_ok | repeat_until_all_fail | repeat_until_any_ok | repeat_until_any_fail</code><br> </div> <div class="REFTYPES rt-4"> <code>N = integer() | forever</code><br> </div> <div class="REFTYPES rt-4"> <code>GroupDefs = NewGroupDefs = [Group]</code><br> </div> <div class="REFTYPES rt-4"> <code>Group = {GroupName,GroupProperties,GroupsAndTestCases}</code><br> </div> <div class="REFTYPES rt-4"> <code>GroupProperties = [parallel | sequence | Shuffle | {GroupRepeatType,N}]</code><br> </div> <div class="REFTYPES rt-4"> <code>GroupsAndTestCases = [Group | {group,GroupName} | TestCase]</code><br> </div> <div class="REFTYPES rt-4"> <code>Reason = term()</code><br> </div> </div> <div class="REFBODY rb-7"> <p>OPTIONAL</p> <p>This function is called after <code><a href="ct_suite.html#Module:all-0">all/0</a></code>. It is used to modify the set of test cases and test group to be executed, for instance to add or remove test cases and groups, change group properties, or even skip all tests in the suite.</p> <p><code>Return</code> is what <code><a href="ct_suite.html#Module:all-0">all/0</a></code> returned, that is, a list of test cases and groups to be executed, or a tuple <code>{skip,Reason}</code>.</p> <p><code>GroupDefs</code> is what <code><a href="ct_suite.html#Module:groups-0">groups/0</a></code> or the <code>post_groups/2</code> hook returned, that is, a list of group definitions.</p> <p><code>NewReturn</code> is the possibly modified version of <code>Return</code>.</p> <p>This function is called only if the CTH is added before <code>init_per_suite</code> is run. For details, see section <code><a href="ct_hooks_chapter.html#scope">CTH Scope</a></code> in the User's Guide.</p> <p>Notice that for CTHs that are installed by means of the <code><a href="ct_suite.html#Module:suite-0">suite/0</a></code> function, <code>post_all/2</code> is called before the <code><a href="#Module:init-2">init/2</a></code> hook function. However, for CTHs that are installed by means of the CT start flag, the <code><a href="#Module:init-2">init/2</a></code> function is called first.</p> <div class="note"> <div class="label">Note</div> <div class="content">

<p>Prior to each test execution, Common Test does a simulated test run in order to count test suites, groups and cases for logging purposes. This causes the <code>post_all/3</code> hook function to always be called twice. For this reason, side effects are best avoided in this callback.</p> </div> </div> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="Module:pre_init_per_suite-3" class="title-link">  <div class="title-name">Module:pre_init_per_suite(SuiteName, InitData, CTHState) -&gt; Result</div> <div class="title-since"><span class="since">OTP R14B02</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>SuiteName = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>InitData = Config | SkipOrFail</code><br> </div> <div class="REFTYPES rt-4"> <code>Config = NewConfig = [{Key,Value}]</code><br> </div> <div class="REFTYPES rt-4"> <code>CTHState = NewCTHState = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>Result = {Return, NewCTHState}</code><br> </div> <div class="REFTYPES rt-4"> <code>Return = NewConfig | SkipOrFail</code><br> </div> <div class="REFTYPES rt-4"> <code>SkipOrFail = {fail, Reason} | {skip, Reason}</code><br> </div> <div class="REFTYPES rt-4"> <code>Key = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>Value = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>Reason = term()</code><br> </div> </div> <div class="REFBODY rb-7"> <p>OPTIONAL</p> <p>This function is called before <code><a href="ct_suite.html#Module:init_per_suite-1">init_per_suite</a></code> if it exists. It typically contains initialization/logging that must be done before <code>init_per_suite</code> is called. If <code>{skip,Reason}</code> or <code>{fail,Reason}</code> is returned, <code>init_per_suite</code> and all test cases of the suite are skipped and <code>Reason</code> printed in the overview log of the suite.</p> <p><code>SuiteName</code> is the name of the suite to be run.</p> <p><code>InitData</code> is the original configuration list of the test suite, or a <code>SkipOrFail</code> tuple if a previous CTH has returned this.</p> <p><code>CTHState</code> is the current internal state of the CTH.</p> <p><code>Return</code> is the result of the <code>init_per_suite</code> function. If it is <code>{skip,Reason}</code> or <code>{fail,Reason}</code>, <code><a href="ct_suite.html#Module:init_per_suite-1">init_per_suite</a></code> is never called, instead the initiation is considered to be skipped or failed, respectively. If a <code>NewConfig</code> list is returned, <code><a href="ct_suite.html#Module:init_per_suite-1">init_per_suite</a></code> is called with that <code>NewConfig</code> list. For more details, see section <code><a href="ct_hooks_chapter.html#pre">Pre Hooks</a></code> in the User's Guide.</p> <p>This function is called only if the CTH is added before <code>init_per_suite is run</code>. For details, see section <code><a href="ct_hooks_chapter.html#scope">CTH Scope</a></code> in the User's Guide.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="Module:post_init_per_suite-4" class="title-link">  <div class="title-name">Module:post_init_per_suite(SuiteName, Config, Return, CTHState) -&gt; Result</div> <div class="title-since"><span class="since">OTP R14B02</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>SuiteName = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>Config = [{Key,Value}]</code><br> </div> <div class="REFTYPES rt-4"> <code>Return = NewReturn = Config | SkipOrFail | term()</code><br> </div> <div class="REFTYPES rt-4"> <code>SkipOrFail = {fail, Reason} | {skip, Reason} | term()</code><br> </div> <div class="REFTYPES rt-4"> <code>CTHState = NewCTHState = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>Result = {NewReturn, NewCTHState}</code><br> </div> <div class="REFTYPES rt-4"> <code>Key = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>Value = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>Reason = term()</code><br> </div> </div> <div class="REFBODY rb-7"> <p>OPTIONAL</p> <p>This function is called after <code><a href="ct_suite.html#Module:init_per_suite-1">init_per_suite</a></code> if it exists. It typically contains extra checks to ensure that all the correct dependencies are started correctly.</p> <p><code>Return</code> is what <code><a href="ct_suite.html#Module:init_per_suite-1">init_per_suite</a></code> returned, that is, <code>{fail,Reason}</code>, <code>{skip,Reason}</code>, a <code>Config</code> list, or a term describing how <code><a href="ct_suite.html#Module:init_per_suite-1">init_per_suite</a></code> failed.</p> <p><code>NewReturn</code> is the possibly modified return value of <code><a href="ct_suite.html#Module:init_per_suite-1">init_per_suite</a></code>. To recover from a failure in <code><a href="ct_suite.html#Module:init_per_suite-1">init_per_suite</a></code>, return <code>ConfigList</code> with the <code>tc_status</code> element removed. For more details, see <code><a href="ct_hooks_chapter.html#post"> Post Hooks</a></code> in section "Manipulating Tests" in the User's Guide.</p> <p><code>CTHState</code> is the current internal state of the CTH.</p> <p>This function is called only if the CTH is added before or in <code>init_per_suite</code>. For details, see section <code><a href="ct_hooks_chapter.html#scope">CTH Scope</a></code> in the User's Guide.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="Module:pre_init_per_group-4" class="title-link">  <div class="title-name">Module:pre_init_per_group(SuiteName, GroupName, InitData, CTHState) -&gt; Result</div> <div class="title-since"><span class="since">OTP 19.3</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>SuiteName = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>GroupName = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>InitData = Config | SkipOrFail</code><br> </div> <div class="REFTYPES rt-4"> <code>Config = NewConfig = [{Key,Value}]</code><br> </div> <div class="REFTYPES rt-4"> <code>CTHState = NewCTHState = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>Result = {NewConfig | SkipOrFail, NewCTHState}</code><br> </div> <div class="REFTYPES rt-4"> <code>SkipOrFail = {fail,Reason} | {skip, Reason}</code><br> </div> <div class="REFTYPES rt-4"> <code>Key = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>Value = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>Reason = term()</code><br> </div> </div> <div class="REFBODY rb-7"> <p>OPTIONAL</p> <p>This function is called before <code><a href="ct_suite.html#Module:init_per_group-2">init_per_group</a></code> if it exists. It behaves the same way as <code><a href="ct_hooks.html#Module:pre_init_per_suite-3">pre_init_per_suite</a></code>, but for function <code><a href="ct_suite.html#Module:init_per_group-2">init_per_group</a></code> instead.</p> <p>If <code>Module:pre_init_per_group/4</code> is not exported, common_test will attempt to call <code>Module:pre_init_per_group(GroupName, InitData, CTHState)</code> instead. This is for backwards compatibility.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="Module:post_init_per_group-5" class="title-link">  <div class="title-name">Module:post_init_per_group(SuiteName, GroupName, Config, Return, CTHState) -&gt; Result</div> <div class="title-since"><span class="since">OTP 19.3</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>SuiteName = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>GroupName = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>Config = [{Key,Value}]</code><br> </div> <div class="REFTYPES rt-4"> <code>Return = NewReturn = Config | SkipOrFail | term()</code><br> </div> <div class="REFTYPES rt-4"> <code>SkipOrFail = {fail,Reason} | {skip, Reason}</code><br> </div> <div class="REFTYPES rt-4"> <code>CTHState = NewCTHState = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>Result = {NewReturn, NewCTHState}</code><br> </div> <div class="REFTYPES rt-4"> <code>Key = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>Value = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>Reason = term()</code><br> </div> </div> <div class="REFBODY rb-7"> <p>OPTIONAL</p> <p>This function is called after <code><a href="ct_suite.html#Module:init_per_group-2">init_per_group</a></code> if it exists. It behaves the same way as <code><a href="ct_hooks.html#Module:post_init_per_suite-4">post_init_per_suite</a></code>, but for function <code><a href="ct_suite.html#Module:init_per_group-2">init_per_group</a></code> instead.</p> <p>If <code>Module:post_init_per_group/5</code> is not exported, common_test will attempt to call <code>Module:post_init_per_group(GroupName, Config, Return, CTHState)</code> instead. This is for backwards compatibility.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="Module:pre_init_per_testcase-4" class="title-link">  <div class="title-name">Module:pre_init_per_testcase(SuiteName, TestcaseName, InitData, CTHState) -&gt; Result</div> <div class="title-since"><span class="since">OTP 19.3</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>SuiteName = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>TestcaseName = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>InitData = Config | SkipOrFail</code><br> </div> <div class="REFTYPES rt-4"> <code>Config = NewConfig = [{Key,Value}]</code><br> </div> <div class="REFTYPES rt-4"> <code>CTHState = NewCTHState = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>Result = {NewConfig | SkipOrFail, NewCTHState}</code><br> </div> <div class="REFTYPES rt-4"> <code>SkipOrFail = {fail,Reason} | {skip, Reason}</code><br> </div> <div class="REFTYPES rt-4"> <code>Key = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>Value = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>Reason = term()</code><br> </div> </div> <div class="REFBODY rb-7"> <p>OPTIONAL</p> <p>This function is called before <code><a href="ct_suite.html#Module:init_per_testcase-2">init_per_testcase</a></code> if it exists. It behaves the same way as <code><a href="ct_hooks.html#Module:pre_init_per_suite-3">pre_init_per_suite</a></code>, but for function <code><a href="ct_suite.html#Module:init_per_testcase-2">init_per_testcase</a></code> instead.</p> <p>If <code>Module:pre_init_per_testcase/4</code> is not exported, common_test will attempt to call <code>Module:pre_init_per_testcase(TestcaseName, InitData, CTHState)</code> instead. This is for backwards compatibility.</p> <p>CTHs cannot be added here right now. That feature may be added in a later release, but it would right now break backwards compatibility.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="Module:post_init_per_testcase-5" class="title-link">  <div class="title-name">Module:post_init_per_testcase(SuiteName, TestcaseName, Config, Return, CTHState) -&gt; Result</div> <div class="title-since"><span class="since">OTP 19.3</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>SuiteName = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>TestcaseName = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>Config = [{Key,Value}]</code><br> </div> <div class="REFTYPES rt-4"> <code>Return = NewReturn = Config | SkipOrFail | term()</code><br> </div> <div class="REFTYPES rt-4"> <code>SkipOrFail = {fail,Reason} | {skip, Reason}</code><br> </div> <div class="REFTYPES rt-4"> <code>CTHState = NewCTHState = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>Result = {NewReturn, NewCTHState}</code><br> </div> <div class="REFTYPES rt-4"> <code>Key = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>Value = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>Reason = term()</code><br> </div> </div> <div class="REFBODY rb-7"> <p>OPTIONAL</p> <p>This function is called after <code><a href="ct_suite.html#Module:init_per_testcase-2">init_per_testcase</a></code> if it exists. It behaves the same way as <code><a href="ct_hooks.html#Module:post_init_per_suite-4">post_init_per_suite</a></code>, but for function <code><a href="ct_suite.html#Module:init_per_testcase-2">init_per_testcase</a></code> instead.</p> <p>If <code>Module:post_init_per_testcase/5</code> is not exported, common_test will attempt to call <code>Module:post_init_per_testcase(TestcaseName, Config, Return, CTHState)</code> instead. This is for backwards compatibility.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="Module:pre_end_per_testcase-4" class="title-link">  <div class="title-name">Module:pre_end_per_testcase(SuiteName, TestcaseName, EndData, CTHState) -&gt; Result</div> <div class="title-since"><span class="since">OTP 19.3</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>SuiteName = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>TestcaseName = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>EndData = Config</code><br> </div> <div class="REFTYPES rt-4"> <code>Config = NewConfig = [{Key,Value}]</code><br> </div> <div class="REFTYPES rt-4"> <code>CTHState = NewCTHState = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>Result = {NewConfig, NewCTHState}</code><br> </div> <div class="REFTYPES rt-4"> <code>Key = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>Value = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>Reason = term()</code><br> </div> </div> <div class="REFBODY rb-7"> <p>OPTIONAL</p> <p>This function is called before <code><a href="ct_suite.html#Module:end_per_testcase-2">end_per_testcase</a></code> if it exists. It behaves the same way as <code><a href="ct_hooks.html#Module:pre_end_per_suite-3">pre_end_per_suite</a></code>, but for function <code><a href="ct_suite.html#Module:end_per_testcase-2">end_per_testcase</a></code> instead.</p> <p>This function cannot change the result of the test case by returning skip or fail tuples, but it may insert items in <code>Config</code> that can be read in <code>end_per_testcase/2</code> or in <code>post_end_per_testcase/5</code>.</p> <p>If <code>Module:pre_end_per_testcase/4</code> is not exported, common_test will attempt to call <code>Module:pre_end_per_testcase(TestcaseName, EndData, CTHState)</code> instead. This is for backwards compatibility.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="Module:post_end_per_testcase-5" class="title-link">  <div class="title-name">Module:post_end_per_testcase(SuiteName, TestcaseName, Config, Return, CTHState) -&gt; Result</div> <div class="title-since"><span class="since">OTP 19.3</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>SuiteName = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>TestcaseName = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>Config = [{Key,Value}]</code><br> </div> <div class="REFTYPES rt-4"> <code>Return = NewReturn = Config | SkipOrFail | term()</code><br> </div> <div class="REFTYPES rt-4"> <code>SkipOrFail = {fail,Reason} | {skip, Reason}</code><br> </div> <div class="REFTYPES rt-4"> <code>CTHState = NewCTHState = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>Result = {NewReturn, NewCTHState}</code><br> </div> <div class="REFTYPES rt-4"> <code>Key = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>Value = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>Reason = term()</code><br> </div> </div> <div class="REFBODY rb-7"> <p>OPTIONAL</p> <p>This function is called after <code><a href="ct_suite.html#Module:end_per_testcase-2">end_per_testcase</a></code> if it exists. It behaves the same way as <code><a href="ct_hooks.html#Module:post_end_per_suite-4">post_end_per_suite</a></code>, but for function <code><a href="ct_suite.html#Module:end_per_testcase-2">end_per_testcase</a></code> instead.</p> <p>If <code>Module:post_end_per_testcase/5</code> is not exported, common_test will attempt to call <code>Module:post_end_per_testcase(TestcaseName, Config, Return, CTHState)</code> instead. This is for backwards compatibility.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="Module:pre_end_per_group-4" class="title-link">  <div class="title-name">Module:pre_end_per_group(SuiteName, GroupName, EndData, CTHState) -&gt; Result</div> <div class="title-since"><span class="since">OTP 19.3</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>SuiteName = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>GroupName = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>EndData = Config | SkipOrFail</code><br> </div> <div class="REFTYPES rt-4"> <code>Config = NewConfig = [{Key,Value}]</code><br> </div> <div class="REFTYPES rt-4"> <code>CTHState = NewCTHState = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>Result = {NewConfig | SkipOrFail, NewCTHState}</code><br> </div> <div class="REFTYPES rt-4"> <code>SkipOrFail = {fail,Reason} | {skip, Reason}</code><br> </div> <div class="REFTYPES rt-4"> <code>Key = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>Value = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>Reason = term()</code><br> </div> </div> <div class="REFBODY rb-7"> <p>OPTIONAL</p> <p>This function is called before <code><a href="ct_suite.html#Module:end_per_group-2">end_per_group</a></code> if it exists. It behaves the same way as <code><a href="ct_hooks.html#Module:pre_init_per_suite-3">pre_init_per_suite</a></code>, but for function <code><a href="ct_suite.html#Module:end_per_group-2">end_per_group</a></code> instead.</p> <p>If <code>Module:pre_end_per_group/4</code> is not exported, common_test will attempt to call <code>Module:pre_end_per_group(GroupName, EndData, CTHState)</code> instead. This is for backwards compatibility.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="Module:post_end_per_group-5" class="title-link">  <div class="title-name">Module:post_end_per_group(SuiteName, GroupName, Config, Return, CTHState) -&gt; Result</div> <div class="title-since"><span class="since">OTP 19.3</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>SuiteName = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>GroupName = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>Config = [{Key,Value}]</code><br> </div> <div class="REFTYPES rt-4"> <code>Return = NewReturn = Config | SkipOrFail | term()</code><br> </div> <div class="REFTYPES rt-4"> <code>SkipOrFail = {fail,Reason} | {skip, Reason}</code><br> </div> <div class="REFTYPES rt-4"> <code>CTHState = NewCTHState = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>Result = {NewReturn, NewCTHState}</code><br> </div> <div class="REFTYPES rt-4"> <code>Key = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>Value = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>Reason = term()</code><br> </div> </div> <div class="REFBODY rb-7"> <p>OPTIONAL</p> <p>This function is called after <code><a href="ct_suite.html#Module:end_per_group-2">end_per_group</a></code> if it exists. It behaves the same way as <code><a href="ct_hooks.html#Module:post_init_per_suite-4">post_init_per_suite</a></code>, but for function <code><a href="ct_suite.html#Module:end_per_group-2">end_per_group</a></code> instead.</p> <p>If <code>Module:post_end_per_group/5</code> is not exported, common_test will attempt to call <code>Module:post_end_per_group(GroupName, Config, Return, CTHState)</code> instead. This is for backwards compatibility.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="Module:pre_end_per_suite-3" class="title-link">  <div class="title-name">Module:pre_end_per_suite(SuiteName, EndData, CTHState) -&gt; Result</div> <div class="title-since"><span class="since">OTP R14B02</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>SuiteName = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>EndData = Config | SkipOrFail</code><br> </div> <div class="REFTYPES rt-4"> <code>Config = NewConfig = [{Key,Value}]</code><br> </div> <div class="REFTYPES rt-4"> <code>CTHState = NewCTHState = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>Result = {NewConfig | SkipOrFail, NewCTHState}</code><br> </div> <div class="REFTYPES rt-4"> <code>SkipOrFail = {fail,Reason} | {skip, Reason}</code><br> </div> <div class="REFTYPES rt-4"> <code>Key = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>Value = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>Reason = term()</code><br> </div> </div> <div class="REFBODY rb-7"> <p>OPTIONAL</p> <p>This function is called before <code><a href="ct_suite.html#Module:end_per_suite-1">end_per_suite</a></code> if it exists. It behaves the same way as <code><a href="ct_hooks.html#Module:pre_init_per_suite-3">pre_init_per_suite</a></code>, but for function <code><a href="ct_suite.html#Module:end_per_suite-1">end_per_suite</a></code> instead.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="Module:post_end_per_suite-4" class="title-link">  <div class="title-name">Module:post_end_per_suite(SuiteName, Config, Return, CTHState) -&gt; Result</div> <div class="title-since"><span class="since">OTP R14B02</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>SuiteName = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>Config = [{Key,Value}]</code><br> </div> <div class="REFTYPES rt-4"> <code>Return = NewReturn = Config | SkipOrFail | term()</code><br> </div> <div class="REFTYPES rt-4"> <code>SkipOrFail = {fail,Reason} | {skip, Reason}</code><br> </div> <div class="REFTYPES rt-4"> <code>CTHState = NewCTHState = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>Result = {NewReturn, NewCTHState}</code><br> </div> <div class="REFTYPES rt-4"> <code>Key = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>Value = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>Reason = term()</code><br> </div> </div> <div class="REFBODY rb-7"> <p>OPTIONAL</p> <p>This function is called after <code><a href="ct_suite.html#Module:end_per_suite-1">end_per_suite</a></code> if it exists. It behaves the same way as <code><a href="ct_hooks.html#Module:post_init_per_suite-4">post_init_per_suite</a></code>, but for function <code><a href="ct_suite.html#Module:end_per_suite-1">end_per_suite</a></code> instead.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="Module:on_tc_fail-4" class="title-link">  <div class="title-name">Module:on_tc_fail(SuiteName, TestName, Reason, CTHState) -&gt; NewCTHState</div> <div class="title-since"><span class="since">OTP 19.3</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>SuiteName = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>TestName = init_per_suite | end_per_suite | {init_per_group,GroupName} | {end_per_group,GroupName} | {FuncName,GroupName} | FuncName</code><br> </div> <div class="REFTYPES rt-4"> <code>FuncName = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>GroupName = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>Reason = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>CTHState = NewCTHState = term()</code><br> </div> </div> <div class="REFBODY rb-7"> <p>OPTIONAL</p> <p>This function is called whenever a test case (or configuration function) fails. It is called after the post function is called for the failed test case, that is:</p> <ul> <li><p>If <code>init_per_suite</code> fails, this function is called after <code><a href="#Module:post_init_per_suite-4">post_init_per_suite</a></code>.</p></li> <li><p>If a test case fails, this function is called after <code><a href="#Module:post_end_per_testcase-5">post_end_per_testcase</a></code>.</p></li> </ul> <p>If the failed test case belongs to a test case group, the first argument is a tuple <code>{FuncName,GroupName}</code>, otherwise only the function name.</p> <p>The data that comes with <code>Reason</code> follows the same format as <code><a href="event_handler_chapter.html#failreason">FailReason</a></code> in event <code><a href="event_handler_chapter.html#tc_done">tc_done</a></code>. For details, see section <code><a href="event_handler_chapter.html#events">Event Handling</a></code> in the User's Guide.</p> <p>If <code>Module:on_tc_fail/4</code> is not exported, common_test will attempt to call <code>Module:on_tc_fail(TestName, Reason, CTHState)</code> instead. This is for backwards compatibility.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="Module:on_tc_skip-4" class="title-link">  <div class="title-name">Module:on_tc_skip(SuiteName, TestName, Reason, CTHState) -&gt; NewCTHState</div> <div class="title-since"><span class="since">OTP 19.3</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>SuiteName = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>TestName = init_per_suite | end_per_suite | {init_per_group,GroupName} | {end_per_group,GroupName} | {FuncName,GroupName} | FuncName</code><br> </div> <div class="REFTYPES rt-4"> <code>FuncName = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>GroupName = atom()</code><br> </div> <div class="REFTYPES rt-4"> <code>Reason = {tc_auto_skip | tc_user_skip, term()}</code><br> </div> <div class="REFTYPES rt-4"> <code>CTHState = NewCTHState = term()</code><br> </div> </div> <div class="REFBODY rb-7"> <p>OPTIONAL</p> <p>This function is called whenever a test case (or configuration function) is skipped. It is called after the post function is called for the skipped test case, that is:</p> <ul> <li><p>If <code>init_per_group</code> is skipped, this function is called after <code><a href="#Module:post_init_per_group-5">post_init_per_group</a></code>.</p></li> <li><p>If a test case is skipped, this function is called after <code><a href="#Module:post_end_per_testcase-5">post_end_per_testcase</a></code>.</p></li> </ul> <p>If the skipped test case belongs to a test case group, the first argument is a tuple <code>{FuncName,GroupName}</code>, otherwise only the function name.</p> <p>The data that comes with <code>Reason</code> follows the same format as events <code><a href="event_handler_chapter.html#tc_auto_skip">tc_auto_skip</a></code> and <code><a href="event_handler_chapter.html#tc_user_skip">tc_user_skip</a></code> For details, see section <code><a href="event_handler_chapter.html#events">Event Handling</a></code> in the User's Guide.</p> <p>If <code>Module:on_tc_skip/4</code> is not exported, common_test will attempt to call <code>Module:on_tc_skip(TestName, Reason, CTHState)</code> instead. This is for backwards compatibility.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="Module:terminate-1" class="title-link">  <div class="title-name">Module:terminate(CTHState)</div> <div class="title-since"><span class="since">OTP R14B02</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>CTHState = term()</code><br> </div> </div> <div class="REFBODY rb-7"> <p>OPTIONAL</p> <p>This function is called at the end of a CTH <code><a href="ct_hooks_chapter.html#scope">scope</a></code>.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="Module:id-1" class="title-link">  <div class="title-name">Module:id(Opts) -&gt; Id</div> <div class="title-since"><span class="since">OTP R14B02</span></div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>Opts = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>Id = term()</code><br> </div> </div> <div class="REFBODY rb-7"> <p>OPTIONAL</p> <p>The <code>Id</code> identifies a CTH instance uniquely. If two CTHs return the same <code>Id</code>, the second CTH is ignored and subsequent calls to the CTH are only made to the first instance. For details, see section <code><a href="ct_hooks_chapter.html#installing">Installing a CTH</a></code> in the User's Guide.</p> <p>This function is <strong>not</strong> to have any side effects, as it can be called multiple times by <code>Common Test</code>.</p> <p>If not implemented, the CTH acts as if this function returned a call to <code>make_ref/0</code>.</p> </div> </div></article> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010&ndash;2023 Ericsson AB<br>Licensed under the Apache License, Version 2.0.<br>
    
  </p>
</div>
