  <div class="innertube"> <h2 id="module" class="title-link"> <div class="title-name">Module</div>  </h2> <div class="REFBODY module-body">httpd_util</div> </div> <div class="innertube"> <h2 id="module-summary" class="title-link"> <div class="title-name">Module Summary</div>  </h2> <div class="REFBODY module-summary-body">Miscellaneous utility functions to be used when implementing Erlang web server API modules.</div> </div> <section class="description"><div class="innertube"> <h2 id="description" class="title-link"> <div class="title-name">Description</div>  </h2> <div class="REFBODY description-body" id="convert_request_date">

<p>This module provides the Erlang web server API module programmer with miscellaneous utility functions.</p> <div class="note"> <div class="label">Note</div> <div class="content">

<p>Note the module is only recommended for using with httpd - for other cases it should be considered as deprecated.</p>
</div> </div>  </div> </div></section> <div class="innertube"><h2 id="export" class="title-link"> <div class="title-name">Exports</div>  </h2></div> <div class="exports-body"> <article class="func"><div class="bold_code func-head"><h3 id="convert_request_date-1" class="title-link">  <div class="title-name">convert_request_date(DateString) -&gt; ErlDate|bad_date</div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>DateString = string()</code><br> </div> <div class="REFTYPES rt-4"> <code>ErlDate = calendar:datetime()</code><br> </div> </div> <div class="REFBODY rb-7"> <p><code>convert_request_date/1</code> converts <code>DateString</code> to the Erlang date format. <code>DateString</code> must be in one of the three date formats defined in <code><a href="http://www.ietf.org/rfc/rfc2616.txt">RFC 2616</a></code>.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="create_etag-1" class="title-link">  <div class="title-name">create_etag(FileInfo) -&gt; Etag</div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>FileInfo = file_info()</code><br> </div> <div class="REFTYPES rt-4"> <code>Etag = string()</code><br> </div> </div> <div class="REFBODY rb-7"> <p><code>create_etag/1</code> calculates the Etag for a file from its size and time for last modification. <code>FileInfo</code> is a record defined in <code>kernel/include/file.hrl</code>.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="day-1" class="title-link">  <div class="title-name">day(NthDayOfWeek) -&gt; DayOfWeek</div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>NthDayOfWeek = 1-7</code><br> </div> <div class="REFTYPES rt-4"> <code>DayOfWeek = string()</code><br> </div> </div> <div class="REFBODY rb-7"> <p><code>day/1</code> converts the day of the week (<code>NthDayOfWeek</code>) from an integer (1-7) to an abbreviated string, that is:</p> <p>1 = "Mon", 2 = "Tue", ..., 7 = "Sat".</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="lookup-2" class="title-link">  <div class="title-name">lookup(ETSTable,Key) -&gt; Result</div> </h3></div> <div class="bold_code func-head"><h3 id="lookup-3" class="title-link">  <div class="title-name">lookup(ETSTable,Key,Undefined) -&gt; Result</div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>ETSTable = ets_table()</code><br> </div> <div class="REFTYPES rt-4"> <code>Key = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>Result = term() | undefined | Undefined</code><br> </div> <div class="REFTYPES rt-4"> <code>Undefined = term()</code><br> </div> </div> <div class="REFBODY rb-7"> <p><code>lookup</code> extracts <code>{Key,Value}</code> tuples from <code>ETSTable</code> and returns the <code>Value</code> associated with <code>Key</code>. If <code>ETSTable</code> is of type <code>bag</code>, only the first <code>Value</code> associated with <code>Key</code> is returned. <code>lookup/2</code> returns <code>undefined</code> and <code>lookup/3</code> returns <code>Undefined</code> if no <code>Value</code> is found.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="lookup_mime-2" class="title-link">  <div class="title-name">lookup_mime(ConfigDB,Suffix)</div> </h3></div> <div class="bold_code func-head"><h3 id="lookup_mime-3" class="title-link">  <div class="title-name">lookup_mime(ConfigDB,Suffix,Undefined) -&gt; MimeType</div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>ConfigDB = ets_table()</code><br> </div> <div class="REFTYPES rt-4"> <code>Suffix = string()</code><br> </div> <div class="REFTYPES rt-4"> <code>MimeType = string() | undefined | Undefined</code><br> </div> <div class="REFTYPES rt-4"> <code>Undefined = term()</code><br> </div> </div> <div class="REFBODY rb-7"> <p><code>lookup_mime</code> returns the MIME type associated with a specific file suffix as specified in the file <code>mime.types</code> (located in the config directory).</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="lookup_mime_default-2" class="title-link">  <div class="title-name">lookup_mime_default(ConfigDB,Suffix)</div> </h3></div> <div class="bold_code func-head"><h3 id="lookup_mime_default-3" class="title-link">  <div class="title-name">lookup_mime_default(ConfigDB,Suffix,Undefined) -&gt; MimeType</div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>ConfigDB = ets_table()</code><br> </div> <div class="REFTYPES rt-4"> <code>Suffix = string()</code><br> </div> <div class="REFTYPES rt-4"> <code>MimeType = string() | undefined | Undefined</code><br> </div> <div class="REFTYPES rt-4"> <code>Undefined = term()</code><br> </div> </div> <div class="REFBODY rb-7"> <p><code>lookup_mime_default</code> returns the MIME type associated with a specific file suffix as specified in the <code>mime.types</code> file (located in the config directory). If no appropriate association is found, the value of <code>DefaultType</code> is returned.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="message-3" class="title-link">  <div class="title-name">message(StatusCode,PhraseArgs,ConfigDB) -&gt; Message</div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>StatusCode = 301 | 400 | 403 | 404 | 500 | 501 | 504</code><br> </div> <div class="REFTYPES rt-4"> <code>PhraseArgs = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>ConfigDB = ets_table</code><br> </div> <div class="REFTYPES rt-4"> <code>Message = string()</code><br> </div> </div> <div class="REFBODY rb-7"> <p><code>message/3</code> returns an informative HTTP 1.1 status string in HTML. Each <code>StatusCode</code> requires a specific <code>PhraseArgs</code>: </p> <dl> <dt class="title-link"><strong><code>301</code></strong></dt> <dd><p><code>string()</code>: A URL pointing at the new document position.</p></dd> <dt class="title-link"><strong><code>400 | 401 | 500</code></strong></dt> <dd><p><code>none</code> (no <code>PhraseArgs</code>).</p></dd> <dt class="title-link"><strong><code>403 | 404</code></strong></dt> <dd> <p><code>string()</code>: A <code>Request-URI</code> as described in <code><a href="http://www.ietf.org/rfc/rfc2616.txt">RFC 2616</a></code>.</p> </dd> <dt class="title-link"><strong><code>501</code></strong></dt> <dd><p><code>{Method,RequestURI,HTTPVersion}</code>: The HTTP <code>Method</code>, <code>Request-URI</code>, and <code>HTTP-Version</code> as defined in RFC 2616.</p></dd> <dt class="title-link"><strong><code>504</code></strong></dt> <dd><p><code>string()</code>: A string describing why the service was unavailable.</p></dd> </dl> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="month-1" class="title-link">  <div class="title-name">month(NthMonth) -&gt; Month</div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>NthMonth = 1-12</code><br> </div> <div class="REFTYPES rt-4"> <code>Month = string()</code><br> </div> </div> <div class="REFBODY rb-7"> <p><code>month/1</code> converts the month <code>NthMonth</code> as an integer (1-12) to an abbreviated string, that is: </p> <p>1 = "Jan", 2 = "Feb", ..., 12 = "Dec".</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="multi_lookup-2" class="title-link">  <div class="title-name">multi_lookup(ETSTable,Key) -&gt; Result</div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>ETSTable = ets_table()</code><br> </div> <div class="REFTYPES rt-4"> <code>Key = term()</code><br> </div> <div class="REFTYPES rt-4"> <code>Result = [term()]</code><br> </div> </div> <div class="REFBODY rb-7"> <p><code>multi_lookup</code> extracts all <code>{Key,Value}</code> tuples from an <code>ETSTable</code> and returns <strong>all</strong> <code>Values</code> associated with <code>Key</code> in a list.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="reason_phrase-1" class="title-link">  <div class="title-name">reason_phrase(StatusCode) -&gt; Description</div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>StatusCode = 100 | 200 | 201 | 202 | 204 | 205 | 206 | 300 | 301 | 302 | 303 | 304 | 308 | 400 | 401 | 402 | 403 | 404 | 405 | 406 | 410 | 411 | 412 | 413 | 414 | 415 | 416 | 417 | 500 | 501 | 502 | 503 | 504 | 505</code><br> </div> <div class="REFTYPES rt-4"> <code>Description = string()</code><br> </div> </div> <div class="REFBODY rb-7"> <p><code>reason_phrase</code> returns <code>Description</code> of an HTTP 1.1 <code>StatusCode</code>, for example, 200 is "OK" and 201 is "Created". For more information, see <code><a href="http://www.ietf.org/rfc/rfc2616.txt">RFC 2616</a></code>.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="rfc1123_date-0" class="title-link">  <div class="title-name">rfc1123_date() -&gt; RFC1123Date</div> </h3></div> <div class="bold_code func-head"><h3 id="rfc1123_date-1" class="title-link">  <div class="title-name">rfc1123_date(Date) -&gt; RFC1123Date</div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>Date = calendar:datetime()</code><br> </div> <div class="REFTYPES rt-4"> <code>RFC1123Date = string()</code><br> </div> </div> <div class="REFBODY rb-7"> <p><code>rfc1123_date/0</code> returns the current date in RFC 1123 format. <code>rfc_date/1</code> converts the date in the Erlang format to the RFC 1123 date format.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="split-3" class="title-link">  <div class="title-name">split(String,RegExp,N) -&gt; SplitRes</div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>String = RegExp = string()</code><br> </div> <div class="REFTYPES rt-4"> <code>SplitRes = {ok, FieldList} | {error, errordesc()}</code><br> </div> <div class="REFTYPES rt-4"> <code>Fieldlist = [string()]</code><br> </div> <div class="REFTYPES rt-4"> <code>N = integer</code><br> </div> </div> <div class="REFBODY rb-7"> <p><code>split/3</code> splits <code>String</code> in <code>N</code> chunks using <code>RegExp</code>. <code>split/3</code> is equivalent to <code>regexp:split/2</code> with the exception that <code>N</code> defines the maximum number of fields in <code>FieldList</code>.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="split_script_path-1" class="title-link">  <div class="title-name">split_script_path(RequestLine) -&gt; Split</div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>RequestLine = string()</code><br> </div> <div class="REFTYPES rt-4"> <code>Split = not_a_script | {Path, PathInfo, QueryString}</code><br> </div> <div class="REFTYPES rt-4"> <code>Path = QueryString = PathInfo = string()</code><br> </div> </div> <div class="REFBODY rb-7"> <p><code>split_script_path/1</code> is equivalent to <code>split_path/1</code> with one exception. If the longest possible path is not a regular, accessible, and executable file, then <code>not_a_script</code> is returned.</p> </div> </div></article><article class="func"><div class="bold_code func-head"><h3 id="split_path-1" class="title-link">  <div class="title-name">split_path(RequestLine) -&gt; {Path,QueryStringOrPathInfo}</div> </h3></div> <div class="exports-tube"> <div class="REFBODY rb-5"> <h2 id="types" class="func-types-title">Types</h2> <div class="REFTYPES rt-4"> <code>RequestLine = Path = QueryStringOrPathInfo = string()</code><br> </div> </div> <div class="REFBODY rb-7"> <p><code>split_path/1</code> splits <code>RequestLine</code> in a file reference (<code>Path</code>), and a <code>QueryString</code> or a <code>PathInfo</code> string as specified in <code><a href="http://www.ietf.org/rfc/rfc2616.txt">RFC 2616</a></code>. A <code>QueryString</code> is isolated from <code>Path</code> with a question mark (<code>?</code>) and <code>PathInfo</code> with a slash (/). In the case of a <code>QueryString</code>, everything before <code>?</code> is a <code>Path</code> and everything after <code>?</code> is a <code>QueryString</code>. In the case of a <code>PathInfo</code>, <code>RequestLine</code> is scanned from left-to-right on the hunt for longest possible <code>Path</code> being a file or a directory. Everything after the longest possible <code>Path</code>, isolated with a <code>/</code>, is regarded as <code>PathInfo</code></p> </div> </div></article> </div> <section class="innertube"><h2 id="see-also" class="title-link"> see also  </h2> <div class="REFBODY rb-3"> <p><code><a href="httpd">httpd(3)</a></code></p> </div></section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010&ndash;2023 Ericsson AB<br>Licensed under the Apache License, Version 2.0.<br>
    
  </p>
</div>
