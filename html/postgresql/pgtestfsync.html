<h1>pg_test_fsync</h1> <p>pg_test_fsync â€” determine fastest <code class="varname">wal_sync_method</code> for PostgreSQL</p>   <h2>Synopsis</h2> <div class="cmdsynopsis"> <p id="id-1.9.5.10.4.1"><code class="command">pg_test_fsync</code> [<code>option</code>...]</p> </div>  <div class="refsect1" id="id-1.9.5.10.5"> <h2>Description</h2> <p>pg_test_fsync is intended to give you a reasonable idea of what the fastest <a class="xref" href="runtime-config-wal.html#GUC-WAL-SYNC-METHOD">wal_sync_method</a> is on your specific system, as well as supplying diagnostic information in the event of an identified I/O problem. However, differences shown by pg_test_fsync might not make any significant difference in real database throughput, especially since many database servers are not speed-limited by their write-ahead logs. pg_test_fsync reports average file sync operation time in microseconds for each <code class="literal">wal_sync_method</code>, which can also be used to inform efforts to optimize the value of <a class="xref" href="runtime-config-wal.html#GUC-COMMIT-DELAY">commit_delay</a>.</p> </div> <div class="refsect1" id="id-1.9.5.10.6"> <h2>Options</h2> <p>pg_test_fsync accepts the following command-line options:</p> <div class="variablelist"> <dl class="variablelist"> <dt>
<code class="option">-f</code><code class="option">--filename</code>
</dt> <dd> <p>Specifies the file name to write test data in. This file should be in the same file system that the <code class="filename">pg_wal</code> directory is or will be placed in. (<code class="filename">pg_wal</code> contains the WAL files.) The default is <code class="filename">pg_test_fsync.out</code> in the current directory.</p> </dd> <dt>
<code class="option">-s</code><code class="option">--secs-per-test</code>
</dt> <dd> <p>Specifies the number of seconds for each test. The more time per test, the greater the test's accuracy, but the longer it takes to run. The default is 5 seconds, which allows the program to complete in under 2 minutes.</p> </dd> <dt>
<code class="option">-V</code><code class="option">--version</code>
</dt> <dd> <p>Print the pg_test_fsync version and exit.</p> </dd> <dt>
<code class="option">-?</code><code class="option">--help</code>
</dt> <dd> <p>Show help about pg_test_fsync command line arguments, and exit.</p> </dd> </dl> </div> </div> <div class="refsect1" id="id-1.9.5.10.7"> <h2>Environment</h2> <p>The environment variable <code class="envar">PG_COLOR</code> specifies whether to use color in diagnostic messages. Possible values are <code class="literal">always</code>, <code class="literal">auto</code> and <code class="literal">never</code>.</p> </div> <div class="refsect1" id="id-1.9.5.10.8"> <h2>See Also</h2>
<span class="simplelist"><a class="xref" href="app-postgres.html" title="postgres">postgres</a></span> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1996&ndash;2023 The PostgreSQL Global Development Group<br>Licensed under the PostgreSQL License.<br>
    <a href="https://www.postgresql.org/docs/16/pgtestfsync.html" class="_attribution-link">https://www.postgresql.org/docs/16/pgtestfsync.html</a>
  </p>
</div>
