<h1>66.4. Two-Phase Transactions </h1>    <p>PostgreSQL supports a two-phase commit (2PC) protocol that allows multiple distributed systems to work together in a transactional manner. The commands are <code class="command">PREPARE TRANSACTION</code>, <code class="command">COMMIT PREPARED</code> and <code class="command">ROLLBACK PREPARED</code>. Two-phase transactions are intended for use by external transaction management systems. PostgreSQL follows the features and model proposed by the X/Open XA standard, but does not implement some less often used aspects.</p> <p>When the user executes <code class="command">PREPARE TRANSACTION</code>, the only possible next commands are <code class="command">COMMIT PREPARED</code> or <code class="command">ROLLBACK PREPARED</code>. In general, this prepared state is intended to be of very short duration, but external availability issues might mean transactions stay in this state for an extended interval. Short-lived prepared transactions are stored only in shared memory and WAL. Transactions that span checkpoints are recorded in the <code class="filename">pg_twophase</code> directory. Transactions that are currently prepared can be inspected using <a class="link" href="view-pg-prepared-xacts.html" title="52.16.Â pg_prepared_xacts"><code class="structname">pg_prepared_xacts</code></a>.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1996&ndash;2024 The PostgreSQL Global Development Group<br>Licensed under the PostgreSQL License.<br>
    <a href="https://www.postgresql.org/docs/17/two-phase.html" class="_attribution-link">https://www.postgresql.org/docs/17/two-phase.html</a>
  </p>
</div>
