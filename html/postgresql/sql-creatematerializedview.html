<h1>CREATE MATERIALIZED VIEW</h1> <p>CREATE MATERIALIZED VIEW — define a new materialized view</p>   <h2>Synopsis</h2> <pre data-language="sql">
CREATE MATERIALIZED VIEW [ IF NOT EXISTS ] table_name
    [ (column_name [, ...] ) ]
    [ USING method ]
    [ WITH ( storage_parameter [= value] [, ... ] ) ]
    [ TABLESPACE tablespace_name ]
    AS query
    [ WITH [ NO ] DATA ]
</pre>  <div class="refsect1" id="id-1.9.3.71.5"> <h2>Description</h2> <p><code class="command">CREATE MATERIALIZED VIEW</code> defines a materialized view of a query. The query is executed and used to populate the view at the time the command is issued (unless <code class="command">WITH NO DATA</code> is used) and may be refreshed later using <code class="command">REFRESH MATERIALIZED VIEW</code>.</p> <p><code class="command">CREATE MATERIALIZED VIEW</code> is similar to <code class="command">CREATE TABLE AS</code>, except that it also remembers the query used to initialize the view, so that it can be refreshed later upon demand. A materialized view has many of the same properties as a table, but there is no support for temporary materialized views.</p> <p><code class="command">CREATE MATERIALIZED VIEW</code> requires <code class="literal">CREATE</code> privilege on the schema used for the materialized view.</p> </div> <div class="refsect1" id="id-1.9.3.71.6"> <h2>Parameters</h2> <div class="variablelist"> <dl class="variablelist"> <dt><code class="literal">IF NOT EXISTS</code></dt> <dd> <p>Do not throw an error if a materialized view with the same name already exists. A notice is issued in this case. Note that there is no guarantee that the existing materialized view is anything like the one that would have been created.</p> </dd> <dt><code>table_name</code></dt> <dd> <p>The name (optionally schema-qualified) of the materialized view to be created. The name must be distinct from the name of any other relation (table, sequence, index, view, materialized view, or foreign table) in the same schema.</p> </dd> <dt><code>column_name</code></dt> <dd> <p>The name of a column in the new materialized view. If column names are not provided, they are taken from the output column names of the query.</p> </dd> <dt><code class="literal">USING method</code></dt> <dd> <p>This optional clause specifies the table access method to use to store the contents for the new materialized view; the method needs be an access method of type <code class="literal">TABLE</code>. See <a class="xref" href="tableam.html" title="Chapter 61. Table Access Method Interface Definition">Chapter 61</a> for more information. If this option is not specified, the default table access method is chosen for the new materialized view. See <a class="xref" href="runtime-config-client.html#GUC-DEFAULT-TABLE-ACCESS-METHOD">default_table_access_method</a> for more information.</p> </dd> <dt><code class="literal">WITH ( storage_parameter [= value] [, ... ] )</code></dt> <dd> <p>This clause specifies optional storage parameters for the new materialized view; see <a class="xref" href="sql-createtable.html#SQL-CREATETABLE-STORAGE-PARAMETERS" title="Storage Parameters">Storage Parameters</a> in the <a class="xref" href="sql-createtable.html" title="CREATE TABLE">CREATE TABLE</a> documentation for more information. All parameters supported for <code class="literal">CREATE TABLE</code> are also supported for <code class="literal">CREATE MATERIALIZED VIEW</code>. See <a class="xref" href="sql-createtable.html" title="CREATE TABLE">CREATE TABLE</a> for more information.</p> </dd> <dt><code class="literal">TABLESPACE tablespace_name</code></dt> <dd> <p>The <code>tablespace_name</code> is the name of the tablespace in which the new materialized view is to be created. If not specified, <a class="xref" href="runtime-config-client.html#GUC-DEFAULT-TABLESPACE">default_tablespace</a> is consulted.</p> </dd> <dt><code>query</code></dt> <dd> <p>A <a class="link" href="sql-select.html" title="SELECT"><code class="command">SELECT</code></a>, <a class="link" href="sql-select.html#SQL-TABLE" title="TABLE Command"><code class="command">TABLE</code></a>, or <a class="link" href="sql-values.html" title="VALUES"><code class="command">VALUES</code></a> command. This query will run within a security-restricted operation; in particular, calls to functions that themselves create temporary tables will fail. Also, while the query is running, the <a class="xref" href="runtime-config-client.html#GUC-SEARCH-PATH">search_path</a> is temporarily changed to <code class="literal">pg_catalog, pg_temp</code>.</p> </dd> <dt><code class="literal">WITH [ NO ] DATA</code></dt> <dd> <p>This clause specifies whether or not the materialized view should be populated at creation time. If not, the materialized view will be flagged as unscannable and cannot be queried until <code class="command">REFRESH MATERIALIZED VIEW</code> is used.</p> </dd> </dl> </div> </div> <div class="refsect1" id="id-1.9.3.71.7"> <h2>Compatibility</h2> <p><code class="command">CREATE MATERIALIZED VIEW</code> is a PostgreSQL extension.</p> </div> <div class="refsect1" id="id-1.9.3.71.8"> <h2>See Also</h2>
<span class="simplelist"><a class="xref" href="sql-altermaterializedview.html" title="ALTER MATERIALIZED VIEW">ALTER MATERIALIZED VIEW</a>, <a class="xref" href="sql-createtableas.html" title="CREATE TABLE AS">CREATE TABLE AS</a>, <a class="xref" href="sql-createview.html" title="CREATE VIEW">CREATE VIEW</a>, <a class="xref" href="sql-dropmaterializedview.html" title="DROP MATERIALIZED VIEW">DROP MATERIALIZED VIEW</a>, <a class="xref" href="sql-refreshmaterializedview.html" title="REFRESH MATERIALIZED VIEW">REFRESH MATERIALIZED VIEW</a></span> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1996&ndash;2024 The PostgreSQL Global Development Group<br>Licensed under the PostgreSQL License.<br>
    <a href="https://www.postgresql.org/docs/17/sql-creatematerializedview.html" class="_attribution-link">https://www.postgresql.org/docs/17/sql-creatematerializedview.html</a>
  </p>
</div>
