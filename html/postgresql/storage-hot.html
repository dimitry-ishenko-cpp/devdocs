<h1>65.7. Heap-Only Tuples (HOT) </h1>    <p>To allow for high concurrency, PostgreSQL uses <a class="link" href="mvcc-intro.html" title="13.1. Introduction">multiversion concurrency control</a> (MVCC) to store rows. However, MVCC has some downsides for update queries. Specifically, updates require new versions of rows to be added to tables. This can also require new index entries for each updated row, and removal of old versions of rows and their index entries can be expensive.</p> <p>To help reduce the overhead of updates, PostgreSQL has an optimization called heap-only tuples (HOT). This optimization is possible when:</p>  <ul> <li> <p>The update does not modify any columns referenced by the table's indexes, not including summarizing indexes. The only summarizing index method in the core PostgreSQL distribution is <a class="link" href="brin.html" title="64.5. BRIN Indexes">BRIN</a>.</p> </li> <li> <p>There is sufficient free space on the page containing the old row for the updated row.</p> </li> </ul>  <p>In such cases, heap-only tuples provide two optimizations:</p>  <ul> <li> <p>New index entries are not needed to represent updated rows, however, summary indexes may still need to be updated.</p> </li> <li> <p>When a row is updated multiple times, row versions other than the oldest and the newest can be completely removed during normal operation, including <code class="command">SELECT</code>s, instead of requiring periodic vacuum operations. (Indexes always refer to the <a class="link" href="storage-page-layout.html" title="65.6. Database Page Layout">page item identifier</a> of the original row version. The tuple data associated with that row version is removed, and its item identifier is converted to a redirect that points to the oldest version that may still be visible to some concurrent transaction. Intermediate row versions that are no longer visible to anyone are completely removed, and the associated page item identifiers are made available for reuse.)</p> </li> </ul>  <p>You can increase the likelihood of sufficient page space for HOT updates by decreasing a table's <a class="link" href="sql-createtable.html#RELOPTION-FILLFACTOR"><code class="literal">fillfactor</code></a>. If you don't, HOT updates will still happen because new rows will naturally migrate to new pages and existing pages with sufficient free space for new row versions. The system view <a class="link" href="monitoring-stats.html#MONITORING-PG-STAT-ALL-TABLES-VIEW" title="27.2.19. pg_stat_all_tables">pg_stat_all_tables</a> allows monitoring of the occurrence of HOT and non-HOT updates.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1996&ndash;2024 The PostgreSQL Global Development Group<br>Licensed under the PostgreSQL License.<br>
    <a href="https://www.postgresql.org/docs/17/storage-hot.html" class="_attribution-link">https://www.postgresql.org/docs/17/storage-hot.html</a>
  </p>
</div>
