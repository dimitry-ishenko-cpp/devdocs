<h1>ALTER PUBLICATION</h1> <p>ALTER PUBLICATION â€” change the definition of a publication</p>   <h2>Synopsis</h2> <pre data-language="sql">
ALTER PUBLICATION name ADD publication_object [, ...]
ALTER PUBLICATION name SET publication_object [, ...]
ALTER PUBLICATION name DROP publication_object [, ...]
ALTER PUBLICATION name SET ( publication_parameter [= value] [, ... ] )
ALTER PUBLICATION name OWNER TO { new_owner | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER PUBLICATION name RENAME TO new_name

where publication_object is one of:

    TABLE [ ONLY ] table_name [ * ] [ ( column_name [, ... ] ) ] [ WHERE ( expression ) ] [, ... ]
    TABLES IN SCHEMA { schema_name | CURRENT_SCHEMA } [, ... ]
</pre>  <div class="refsect1" id="id-1.9.3.25.5"> <h2>Description</h2> <p>The command <code class="command">ALTER PUBLICATION</code> can change the attributes of a publication.</p> <p>The first three variants change which tables/schemas are part of the publication. The <code class="literal">SET</code> clause will replace the list of tables/schemas in the publication with the specified list; the existing tables/schemas that were present in the publication will be removed. The <code class="literal">ADD</code> and <code class="literal">DROP</code> clauses will add and remove one or more tables/schemas from the publication. Note that adding tables/schemas to a publication that is already subscribed to will require an <code class="literal">ALTER SUBSCRIPTION ... REFRESH PUBLICATION</code> action on the subscribing side in order to become effective. Note also that <code class="literal">DROP TABLES IN SCHEMA</code> will not drop any schema tables that were specified using <a class="link" href="sql-createpublication.html#SQL-CREATEPUBLICATION-FOR-TABLE"><code class="literal">FOR TABLE</code></a>/ <code class="literal">ADD TABLE</code>, and the combination of <code class="literal">DROP</code> with a <code class="literal">WHERE</code> clause is not allowed.</p> <p>The fourth variant of this command listed in the synopsis can change all of the publication properties specified in <a class="xref" href="sql-createpublication.html" title="CREATE PUBLICATION">CREATE PUBLICATION</a>. Properties not mentioned in the command retain their previous settings.</p> <p>The remaining variants change the owner and the name of the publication.</p> <p>You must own the publication to use <code class="command">ALTER PUBLICATION</code>. Adding a table to a publication additionally requires owning that table. The <code class="literal">ADD TABLES IN SCHEMA</code> and <code class="literal">SET TABLES IN SCHEMA</code> to a publication requires the invoking user to be a superuser. To alter the owner, you must be able to <code class="literal">SET ROLE</code> to the new owning role, and that role must have <code class="literal">CREATE</code> privilege on the database. Also, the new owner of a <a class="link" href="sql-createpublication.html#SQL-CREATEPUBLICATION-FOR-ALL-TABLES"><code class="literal">FOR ALL TABLES</code></a> or <a class="link" href="sql-createpublication.html#SQL-CREATEPUBLICATION-FOR-TABLES-IN-SCHEMA"><code class="literal">FOR TABLES IN SCHEMA</code></a> publication must be a superuser. However, a superuser can change the ownership of a publication regardless of these restrictions.</p> <p>Adding/Setting any schema when the publication also publishes a table with a column list, and vice versa is not supported.</p> </div> <div class="refsect1" id="id-1.9.3.25.6"> <h2>Parameters</h2> <div class="variablelist"> <dl class="variablelist"> <dt><code>name</code></dt> <dd> <p>The name of an existing publication whose definition is to be altered.</p> </dd> <dt><code>table_name</code></dt> <dd> <p>Name of an existing table. If <code class="literal">ONLY</code> is specified before the table name, only that table is affected. If <code class="literal">ONLY</code> is not specified, the table and all its descendant tables (if any) are affected. Optionally, <code class="literal">*</code> can be specified after the table name to explicitly indicate that descendant tables are included.</p> <p>Optionally, a column list can be specified. See <a class="xref" href="sql-createpublication.html" title="CREATE PUBLICATION">CREATE PUBLICATION</a> for details. Note that a subscription having several publications in which the same table has been published with different column lists is not supported. See <a class="xref" href="logical-replication-col-lists.html#LOGICAL-REPLICATION-COL-LIST-COMBINING" title="Warning: Combining Column Lists from Multiple Publications">Warning: Combining Column Lists from Multiple Publications</a> for details of potential problems when altering column lists.</p> <p>If the optional <code class="literal">WHERE</code> clause is specified, rows for which the <code>expression</code> evaluates to false or null will not be published. Note that parentheses are required around the expression. The <code>expression</code> is evaluated with the role used for the replication connection.</p> </dd> <dt><code>schema_name</code></dt> <dd> <p>Name of an existing schema.</p> </dd> <dt><code class="literal">SET ( publication_parameter [= value] [, ... ] )</code></dt> <dd> <p>This clause alters publication parameters originally set by <a class="xref" href="sql-createpublication.html" title="CREATE PUBLICATION">CREATE PUBLICATION</a>. See there for more information.</p> </dd> <dt><code>new_owner</code></dt> <dd> <p>The user name of the new owner of the publication.</p> </dd> <dt><code>new_name</code></dt> <dd> <p>The new name for the publication.</p> </dd> </dl> </div> </div> <div class="refsect1" id="id-1.9.3.25.7"> <h2>Examples</h2> <p>Change the publication to publish only deletes and updates:</p> <pre data-language="sql">
ALTER PUBLICATION noinsert SET (publish = 'update, delete');
</pre> <p>Add some tables to the publication:</p> <pre data-language="sql">
ALTER PUBLICATION mypublication ADD TABLE users (user_id, firstname), departments;
</pre> <p>Change the set of columns published for a table:</p> <pre data-language="sql">
ALTER PUBLICATION mypublication SET TABLE users (user_id, firstname, lastname), TABLE departments;
</pre> <p>Add schemas <code class="structname">marketing</code> and <code class="structname">sales</code> to the publication <code class="structname">sales_publication</code>:</p> <pre data-language="sql">
ALTER PUBLICATION sales_publication ADD TABLES IN SCHEMA marketing, sales;
</pre> <p>Add tables <code class="structname">users</code>, <code class="structname">departments</code> and schema <code class="structname">production</code> to the publication <code class="structname">production_publication</code>:</p> <pre data-language="sql">
ALTER PUBLICATION production_publication ADD TABLE users, departments, TABLES IN SCHEMA production;
</pre> </div> <div class="refsect1" id="id-1.9.3.25.8"> <h2>Compatibility</h2> <p><code class="command">ALTER PUBLICATION</code> is a PostgreSQL extension.</p> </div> <div class="refsect1" id="id-1.9.3.25.9"> <h2>See Also</h2>
<span class="simplelist"><a class="xref" href="sql-createpublication.html" title="CREATE PUBLICATION">CREATE PUBLICATION</a>, <a class="xref" href="sql-droppublication.html" title="DROP PUBLICATION">DROP PUBLICATION</a>, <a class="xref" href="sql-createsubscription.html" title="CREATE SUBSCRIPTION">CREATE SUBSCRIPTION</a>, <a class="xref" href="sql-altersubscription.html" title="ALTER SUBSCRIPTION">ALTER SUBSCRIPTION</a></span> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1996&ndash;2023 The PostgreSQL Global Development Group<br>Licensed under the PostgreSQL License.<br>
    <a href="https://www.postgresql.org/docs/16/sql-alterpublication.html" class="_attribution-link">https://www.postgresql.org/docs/16/sql-alterpublication.html</a>
  </p>
</div>
