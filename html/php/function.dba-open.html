  <div id="layout"> <div id="layout-content"><div id="function.dba-open" class="refentry"> <div class="refnamediv"> <h1 class="refname">dba_open</h1> <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p>
<p class="refpurpose"><span class="refname">dba_open</span> â€” <span class="dc-title">Open database</span></p> </div> <div class="refsect1 description" id="refsect1-function.dba-open-description"> <h3 class="title">Description</h3> <pre class="methodsynopsis dc-description" data-language="php">dba_open(
 string $path,
 string $mode,
 ?string $handler = null,
 int $permission = 0644,
 int $map_size = 0,
 ?int $flags = null
): resource|false</pre> <p class="para rdfs-comment"> <span class="function"><strong>dba_open()</strong></span> establishes a database instance for <code class="parameter">path</code> with <code class="parameter">mode</code> using <code class="parameter">handler</code>. </p> </div> <div class="refsect1 parameters" id="refsect1-function.dba-open-parameters"> <h3 class="title">Parameters</h3> 
<dl> <dt> <code class="parameter">path</code>
</dt> <dd> <p class="para"> Commonly a regular path in your filesystem. </p> </dd> <dt> <code class="parameter">mode</code>
</dt> <dd> <p class="para"> It is <code class="literal">r</code> for read access, <code class="literal">w</code> for read/write access to an already existing database, <code class="literal">c</code> for read/write access and database creation if it doesn't currently exist, and <code class="literal">n</code> for create, truncate and read/write access. The database is created in BTree mode, other modes (like Hash or Queue) are not supported. </p> <p class="para"> Additionally you can set the database lock method with the next char. Use <code class="literal">l</code> to lock the database with a <var class="filename">.lck</var> file or <code class="literal">d</code> to lock the databasefile itself. It is important that all of your applications do this consistently. </p> <p class="para"> If you want to test the access and do not want to wait for the lock you can add <code class="literal">t</code> as third character. When you are absolutely sure that you do not require database locking you can do so by using <code class="literal">-</code> instead of <code class="literal">l</code> or <code class="literal">d</code>. When none of <code class="literal">d</code>, <code class="literal">l</code> or <code class="literal">-</code> is used, dba will lock on the database file as it would with <code class="literal">d</code>. </p> <blockquote class="note">
<p><strong class="note">Note</strong>: </p>
<p class="para"> There can only be one writer for one database file. When you use dba on a web server and more than one request requires write operations they can only be done one after another. Also read during write is not allowed. The dba extension uses locks to prevent this. See the following table: </p>
<table class="doctable table"> <caption><strong>DBA locking</strong></caption> <thead> <tr> <th>already open</th> <th>
<code class="parameter">mode</code> = "rl"</th> <th>
<code class="parameter">mode</code> = "rlt"</th> <th>
<code class="parameter">mode</code> = "wl"</th> <th>
<code class="parameter">mode</code> = "wlt"</th> <th>
<code class="parameter">mode</code> = "rd"</th> <th>
<code class="parameter">mode</code> = "rdt"</th> <th>
<code class="parameter">mode</code> = "wd"</th> <th>
<code class="parameter">mode</code> = "wdt"</th> </tr> </thead> <tbody class="tbody"> <tr> <td>not open</td> <td>ok</td> <td>ok</td> <td>ok</td> <td>ok</td> <td>ok</td> <td>ok</td> <td>ok</td> <td>ok</td> </tr> <tr> <td>
<code class="parameter">mode</code> = "rl"</td> <td>ok</td> <td>ok</td> <td>wait</td> <td>false</td> <td>illegal</td> <td>illegal</td> <td>illegal</td> <td>illegal</td> </tr> <tr> <td>
<code class="parameter">mode</code> = "wl"</td> <td>wait</td> <td>false</td> <td>wait</td> <td>false</td> <td>illegal</td> <td>illegal</td> <td>illegal</td> <td>illegal</td> </tr> <tr> <td>
<code class="parameter">mode</code> = "rd"</td> <td>illegal</td> <td>illegal</td> <td>illegal</td> <td>illegal</td> <td>ok</td> <td>ok</td> <td>wait</td> <td>false</td> </tr> <tr> <td>
<code class="parameter">mode</code> = "wd"</td> <td>illegal</td> <td>illegal</td> <td>illegal</td> <td>illegal</td> <td>wait</td> <td>false</td> <td>wait</td> <td>false</td> </tr> </tbody> </table> <ul class="simplelist"> <li class="member">ok: the second call will be successful.</li> <li class="member">wait: the second call waits until <span class="function"><a href="function.dba-close.html" class="function">dba_close()</a></span> is called for the first.</li> <li class="member">false: the second call returns false.</li> <li class="member">illegal: you must not mix <code class="literal">"l"</code> and <code class="literal">"d"</code> modifiers for <code class="parameter">mode</code> parameter.</li> </ul> </blockquote> </dd> <dt> <code class="parameter">handler</code>
</dt> <dd> <p class="para"> The name of the <a href="https://www.php.net/manual/en/dba.requirements.php" class="link">handler</a> which shall be used for accessing <code class="parameter">path</code>. It is passed all optional parameters given to <span class="function"><strong>dba_open()</strong></span> and can act on behalf of them. If <code class="parameter">handler</code> is <strong><code>null</code></strong>, then the default handler is invoked. </p> </dd> <dt> <code class="parameter">permission</code>
</dt> <dd> <p class="para"> Optional <span class="type">int</span> parameter which is passed to the driver. It has the same meaning as the <code class="parameter">permissions</code> parameter of <span class="function"><a href="function.chmod.html" class="function">chmod()</a></span>, and defaults to <code class="literal">0644</code>. </p> <p class="para"> The <code class="literal">db1</code>, <code class="literal">db2</code>, <code class="literal">db3</code>, <code class="literal">db4</code>, <code class="literal">dbm</code>, <code class="literal">gdbm</code>, <code class="literal">ndbm</code>, and <code class="literal">lmdb</code> drivers support the <code class="parameter">permission</code> parameter. </p> </dd> <dt> <code class="parameter">map_size</code>
</dt> <dd> <p class="para"> Optional <span class="type">int</span> parameter which is passed to the driver. Its value should be a multiple of the page size of the OS, or zero, to use the default map size. </p> <p class="para"> Only the <code class="literal">lmdb</code> driver accepts the <code class="parameter">map_size</code> parameter. </p> </dd> <dt> <code class="parameter">flags</code>
</dt> <dd> <p class="para"> Flags to pass to the database drivers. If <strong><code>null</code></strong> the default flags will be provided. Currently, only the LMDB driver supports the following flags <strong><code>DBA_LMDB_USE_SUB_DIR</code></strong> and <strong><code>DBA_LMDB_NO_SUB_DIR</code></strong>. </p> </dd> </dl> </div> <div class="refsect1 returnvalues" id="refsect1-function.dba-open-returnvalues"> <h3 class="title">Return Values</h3> <p class="para"> Returns a positive handle on success or <strong><code>false</code></strong> on failure. </p> </div> <div class="refsect1 errors" id="refsect1-function.dba-open-errors"> <h3 class="title">Errors/Exceptions</h3> <p class="para"> <strong><code>false</code></strong> is returned and an <strong><code>E_WARNING</code></strong> level error is issued when <code class="parameter">handler</code> is <strong><code>null</code></strong>, but there is no default handler. </p> </div> <div class="refsect1 changelog" id="refsect1-function.dba-open-changelog"> <h3 class="title">Changelog</h3> <table class="doctable informaltable"> <thead> <tr> <th>Version</th> <th>Description</th> </tr> </thead> <tbody class="tbody"> <tr> <td>8.2.0</td> <td> <code class="parameter">flags</code> is added. </td> </tr> <tr> <td>8.2.0</td> <td> <code class="parameter">handler</code> is now nullable. </td> </tr> <tr> <td>7.3.14, 7.4.2</td> <td> The <code class="literal">lmdb</code> driver now supports an additional <code class="parameter">map_size</code> parameter. </td> </tr> </tbody> </table> </div> <div class="refsect1 seealso" id="refsect1-function.dba-open-seealso"> <h3 class="title">See Also</h3> 
<ul class="simplelist"> <li class="member"><span class="function"><a href="function.dba-popen.html" class="function" rel="rdfs-seeAlso">dba_popen()</a> - Open database persistently</span></li> <li class="member"><span class="function"><a href="function.dba-close.html" class="function" rel="rdfs-seeAlso">dba_close()</a> - Close a DBA database</span></li> </ul> </div> </div></div>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1997&ndash;2023 The PHP Documentation Group<br>Licensed under the Creative Commons Attribution License v3.0 or later.<br>
    <a href="https://www.php.net/manual/en/function.dba-open.php" class="_attribution-link">https://www.php.net/manual/en/function.dba-open.php</a>
  </p>
</div>
