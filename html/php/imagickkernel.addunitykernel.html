  <div id="layout"> <div id="layout-content"><div id="imagickkernel.addunitykernel" class="refentry"> <div class="refnamediv"> <h1 class="refname">ImagickKernel::addUnityKernel</h1> <p class="verinfo">(PECL imagick &gt;= 3.3.0)</p>
<p class="refpurpose"><span class="refname">ImagickKernel::addUnityKernel</span> â€” <span class="dc-title">Adds a Unity Kernel to the kernel list</span></p> </div> <div class="refsect1 description" id="refsect1-imagickkernel.addunitykernel-description"> <h3 class="title">Description</h3> <pre class="methodsynopsis dc-description" data-language="php">public ImagickKernel::addUnityKernel(float $scale): void</pre> <p class="para rdfs-comment"> Adds a given amount of the 'Unity' Convolution Kernel to the given pre-scaled and normalized Kernel. This in effect adds that amount of the original image into the resulting convolution kernel. The resulting effect is to convert the defined kernels into blended soft-blurs, unsharp kernels or into sharpening kernels. </p> </div> <div class="refsect1 parameters" id="refsect1-imagickkernel.addunitykernel-parameters"> <h3 class="title">Parameters</h3> <p class="para">This function has no parameters.</p> </div> <div class="refsect1 returnvalues" id="refsect1-imagickkernel.addunitykernel-returnvalues"> <h3 class="title">Return Values</h3>  </div> <div class="refsect1 examples" id="refsect1-imagickkernel.addunitykernel-examples"> <h3 class="title">Examples</h3> 
<div class="example" id="example-3108"> <p><strong>Example #1 <span class="function"><strong>ImagickKernel::addUnityKernel()</strong></span></strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php



    function renderKernelTable($matrix) {
        $output = "&lt;table class='infoTable'&gt;";
    
        foreach ($matrix as $row) {
            $output .= "&lt;tr&gt;";
            foreach ($row as $cell) {
                $output .= "&lt;td style='text-align:left'&gt;";
                if ($cell === false) {
                    $output .= "false";
                }
                else {
                    $output .= round($cell, 3);
                }
                $output .= "&lt;/td&gt;";
            }
            $output .= "&lt;/tr&gt;";
        }
    
        $output .= "&lt;/table&gt;";
    
        return $output;
    }

    $matrix = [
        [-1, 0, -1],
        [ 0, 4,  0],
        [-1, 0, -1],
    ];

    $kernel = \ImagickKernel::fromMatrix($matrix);
    $kernel-&gt;scale(1, \Imagick::NORMALIZE_KERNEL_VALUE);
    $output = "Before adding unity kernel: &lt;br/&gt;";
    $output .= renderKernelTable($kernel-&gt;getMatrix());
    $kernel-&gt;addUnityKernel(0.5);
    $output .= "After adding unity kernel: &lt;br/&gt;";
    $output .= renderKernelTable($kernel-&gt;getMatrix());
    
    
    $kernel-&gt;scale(1, \Imagick::NORMALIZE_KERNEL_VALUE);
    $output .= "After renormalizing kernel: &lt;br/&gt;";
    $output .= renderKernelTable($kernel-&gt;getMatrix());

    echo $output;

?&gt;</pre> </div> </div> <div class="example" id="example-3109"> <p><strong>Example #2 <span class="function"><strong>ImagickKernel::addUnityKernel()</strong></span></strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
function addUnityKernel($imagePath) {

    $matrix = [
        [-1, 0, -1],
        [ 0, 4,  0],
        [-1, 0, -1],
    ];

    $kernel = ImagickKernel::fromMatrix($matrix);

    $kernel-&gt;scale(4, \Imagick::NORMALIZE_KERNEL_VALUE);
    $kernel-&gt;addUnityKernel(0.5);


    $imagick = new \Imagick(realpath($imagePath));
    $imagick-&gt;filter($kernel);
    header("Content-Type: image/jpg");
    echo $imagick-&gt;getImageBlob();

}

?&gt;</pre> </div> </div> </div> </div></div>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1997&ndash;2024 The PHP Documentation Group<br>Licensed under the Creative Commons Attribution License v3.0 or later.<br>
    <a href="https://www.php.net/manual/en/imagickkernel.addunitykernel.php" class="_attribution-link">https://www.php.net/manual/en/imagickkernel.addunitykernel.php</a>
  </p>
</div>
