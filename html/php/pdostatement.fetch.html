  <div id="layout"> <div id="layout-content"><div id="pdostatement.fetch" class="refentry"> <div class="refnamediv"> <h1 class="refname">PDOStatement::fetch</h1> <p class="verinfo">(PHP 5 &gt;= 5.1.0, PHP 7, PHP 8, PECL pdo &gt;= 0.1.0)</p>
<p class="refpurpose"><span class="refname">PDOStatement::fetch</span> â€” <span class="dc-title"> Fetches the next row from a result set </span></p> </div> <div class="refsect1 description" id="refsect1-pdostatement.fetch-description"> <h3 class="title">Description</h3> <pre class="methodsynopsis dc-description" data-language="php">public PDOStatement::fetch(int $mode = PDO::FETCH_DEFAULT, int $cursorOrientation = PDO::FETCH_ORI_NEXT, int $cursorOffset = 0): mixed</pre> <p class="para rdfs-comment"> Fetches a row from a result set associated with a PDOStatement object. The <code class="parameter">mode</code> parameter determines how PDO returns the row. </p> </div> <div class="refsect1 parameters" id="refsect1-pdostatement.fetch-parameters"> <h3 class="title">Parameters</h3> 
<dl> <dt> <code class="parameter">mode</code>
</dt> <dd> <p class="para"> Controls how the next row will be returned to the caller. This value must be one of the <code class="literal">PDO::FETCH_*</code> constants, defaulting to value of <code class="literal">PDO::ATTR_DEFAULT_FETCH_MODE</code> (which defaults to <code class="literal">PDO::FETCH_BOTH</code>). </p>
<ul class="itemizedlist"> <li class="listitem"><p class="para"> <code class="literal">PDO::FETCH_ASSOC</code>: returns an array indexed by column name as returned in your result set </p></li> <li class="listitem"><p class="para"> <code class="literal">PDO::FETCH_BOTH</code> (default): returns an array indexed by both column name and 0-indexed column number as returned in your result set </p></li> <li class="listitem"><p class="para"> <code class="literal">PDO::FETCH_BOUND</code>: returns <strong><code>true</code></strong> and assigns the values of the columns in your result set to the PHP variables to which they were bound with the <span class="methodname"><a href="pdostatement.bindcolumn.html" class="methodname">PDOStatement::bindColumn()</a></span> method </p></li> <li class="listitem"><p class="para"> <code class="literal">PDO::FETCH_CLASS</code>: returns a new instance of the requested class, mapping the columns of the result set to named properties in the class, and calling the constructor afterwards, unless <code class="literal">PDO::FETCH_PROPS_LATE</code> is also given. If <code class="parameter">mode</code> includes PDO::FETCH_CLASSTYPE (e.g. <code class="literal">PDO::FETCH_CLASS |
         PDO::FETCH_CLASSTYPE</code>) then the name of the class is determined from a value of the first column. </p></li> <li class="listitem"><p class="para"> <code class="literal">PDO::FETCH_INTO</code>: updates an existing instance of the requested class, mapping the columns of the result set to named properties in the class </p></li> <li class="listitem"><p class="para"> <code class="literal">PDO::FETCH_LAZY</code>: combines <code class="literal">PDO::FETCH_BOTH</code> and <code class="literal">PDO::FETCH_OBJ</code>, and is returning a <span class="classname"><a href="class.pdorow.html" class="classname">PDORow</a></span> object which is creating the object property names as they are accessed. </p></li> <li class="listitem"><p class="para"> <code class="literal">PDO::FETCH_NAMED</code>: returns an array with the same form as <code class="literal">PDO::FETCH_ASSOC</code>, except that if there are multiple columns with the same name, the value referred to by that key will be an array of all the values in the row that had that column name </p></li> <li class="listitem"><p class="para"> <code class="literal">PDO::FETCH_NUM</code>: returns an array indexed by column number as returned in your result set, starting at column 0 </p></li> <li class="listitem"><p class="para"> <code class="literal">PDO::FETCH_OBJ</code>: returns an anonymous object with property names that correspond to the column names returned in your result set </p></li> <li class="listitem"><p class="para"> <code class="literal">PDO::FETCH_PROPS_LATE</code>: when used with <code class="literal">PDO::FETCH_CLASS</code>, the constructor of the class is called before the properties are assigned from the respective column values. </p></li> </ul> </dd> <dt> <code class="parameter">cursorOrientation</code>
</dt> <dd> <p class="para"> For a PDOStatement object representing a scrollable cursor, this value determines which row will be returned to the caller. This value must be one of the <code class="literal">PDO::FETCH_ORI_*</code> constants, defaulting to <code class="literal">PDO::FETCH_ORI_NEXT</code>. To request a scrollable cursor for your PDOStatement object, you must set the <code class="literal">PDO::ATTR_CURSOR</code> attribute to <code class="literal">PDO::CURSOR_SCROLL</code> when you prepare the SQL statement with <span class="methodname"><a href="pdo.prepare.html" class="methodname">PDO::prepare()</a></span>. </p> </dd> <dt> <code class="parameter">cursorOffset</code>
</dt> <dd> <p class="para"> For a PDOStatement object representing a scrollable cursor for which the <code class="parameter">cursorOrientation</code> parameter is set to <code class="literal">PDO::FETCH_ORI_ABS</code>, this value specifies the absolute number of the row in the result set that shall be fetched. </p> <p class="para"> For a PDOStatement object representing a scrollable cursor for which the <code class="parameter">cursorOrientation</code> parameter is set to <code class="literal">PDO::FETCH_ORI_REL</code>, this value specifies the row to fetch relative to the cursor position before <span class="methodname"><strong>PDOStatement::fetch()</strong></span> was called. </p> </dd> </dl> </div> <div class="refsect1 returnvalues" id="refsect1-pdostatement.fetch-returnvalues"> <h3 class="title">Return Values</h3> <p class="para"> The return value of this function on success depends on the fetch type. In all cases, <strong><code>false</code></strong> is returned on failure or if there are no more rows. </p> </div> <div class="refsect1 errors" id="refsect1-pdostatement.fetch-errors"> <h3 class="title">Errors/Exceptions</h3> <p class="para"> Emits an error with level <strong><code>E_WARNING</code></strong> if the attribute <strong><code>PDO::ATTR_ERRMODE</code></strong> is set to <strong><code>PDO::ERRMODE_WARNING</code></strong>. </p> <p class="para"> Throws a <span class="classname"><a href="class.pdoexception.html" class="classname">PDOException</a></span> if the attribute <strong><code>PDO::ATTR_ERRMODE</code></strong> is set to <strong><code>PDO::ERRMODE_EXCEPTION</code></strong>. </p> </div> <div class="refsect1 examples" id="refsect1-pdostatement.fetch-examples"> <h3 class="title">Examples</h3> 
<div class="example" id="example-3236">
<p><strong>Example #1 Fetching rows using different fetch styles</strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
$sth = $dbh-&gt;prepare("SELECT name, colour FROM fruit");
$sth-&gt;execute();

/* Exercise PDOStatement::fetch styles */
print "PDO::FETCH_ASSOC: ";
print "Return next row as an array indexed by column name\n";
$result = $sth-&gt;fetch(PDO::FETCH_ASSOC);
print_r($result);
print "\n";

print "PDO::FETCH_BOTH: ";
print "Return next row as an array indexed by both column name and number\n";
$result = $sth-&gt;fetch(PDO::FETCH_BOTH);
print_r($result);
print "\n";

print "PDO::FETCH_LAZY: ";
print "Return next row as a PDORow object with column names as properties\n";
$result = $sth-&gt;fetch(PDO::FETCH_LAZY);
print_r($result);
print "\n";

print "PDO::FETCH_OBJ: ";
print "Return next row as an anonymous object with column names as properties\n";
$result = $sth-&gt;fetch(PDO::FETCH_OBJ);
print $result-&gt;name;
print "\n";
?&gt;</pre> </div> <div class="example-contents"><p>The above example will output:</p></div> <div class="example-contents screen"> <div class="cdata"><pre>
PDO::FETCH_ASSOC: Return next row as an array indexed by column name
Array
(
    [name] =&gt; apple
    [colour] =&gt; red
)

PDO::FETCH_BOTH: Return next row as an array indexed by both column name and number
Array
(
    [name] =&gt; banana
    [0] =&gt; banana
    [colour] =&gt; yellow
    [1] =&gt; yellow
)

PDO::FETCH_LAZY: Return next row as a PDORow object with column names as properties
PDORow Object
(
    [name] =&gt; orange
    [colour] =&gt; orange
)

PDO::FETCH_OBJ: Return next row as an anonymous object with column names as properties
kiwi
</pre></div> </div> </div> <div class="example" id="example-3239">
<p><strong>Example #2 Fetching rows with a scrollable cursor</strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
function readDataForwards($dbh) {
    $sql = 'SELECT hand, won, bet FROM mynumbers ORDER BY BET';
    $stmt = $dbh-&gt;prepare($sql, array(PDO::ATTR_CURSOR =&gt; PDO::CURSOR_SCROLL));
    $stmt-&gt;execute();
    while ($row = $stmt-&gt;fetch(PDO::FETCH_NUM, PDO::FETCH_ORI_NEXT)) {
        $data = $row[0] . "\t" . $row[1] . "\t" . $row[2] . "\n";
        print $data;
    }
}
function readDataBackwards($dbh) {
    $sql = 'SELECT hand, won, bet FROM mynumbers ORDER BY bet';
    $stmt = $dbh-&gt;prepare($sql, array(PDO::ATTR_CURSOR =&gt; PDO::CURSOR_SCROLL));
    $stmt-&gt;execute();
    $row = $stmt-&gt;fetch(PDO::FETCH_NUM, PDO::FETCH_ORI_LAST);
    do {
        $data = $row[0] . "\t" . $row[1] . "\t" . $row[2] . "\n";
        print $data;
    } while ($row = $stmt-&gt;fetch(PDO::FETCH_NUM, PDO::FETCH_ORI_PRIOR));
}

print "Reading forwards:\n";
readDataForwards($conn);

print "Reading backwards:\n";
readDataBackwards($conn);
?&gt;</pre> </div> <div class="example-contents"><p>The above example will output:</p></div> <div class="example-contents screen"> <div class="cdata"><pre>
Reading forwards:
21    10    5
16    0     5
19    20    10

Reading backwards:
19    20    10
16    0     5
21    10    5
</pre></div> </div> </div> <div class="example" id="example-3242">
<p><strong>Example #3 Construction order</strong></p> <div class="example-contents"><p> When objects are fetched via <code class="literal">PDO::FETCH_CLASS</code> the object properties are assigned first, and then the constructor of the class is invoked. If <code class="literal">PDO::FETCH_PROPS_LATE</code> is also given, this order is reversed, i.e. first the constructor is called, and afterwards the properties are assigned. </p></div> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
class Person
{
    private $name;

    public function __construct()
    {
        $this-&gt;tell();
    }

    public function tell()
    {
        if (isset($this-&gt;name)) {
            echo "I am {$this-&gt;name}.\n";
        } else {
            echo "I don't have a name yet.\n";
        }
    }
}

$sth = $dbh-&gt;query("SELECT * FROM people");
$sth-&gt;setFetchMode(PDO::FETCH_CLASS, 'Person');
$person = $sth-&gt;fetch();
$person-&gt;tell();
$sth-&gt;setFetchMode(PDO::FETCH_CLASS|PDO::FETCH_PROPS_LATE, 'Person');
$person = $sth-&gt;fetch();
$person-&gt;tell();
?&gt;</pre> </div> <div class="example-contents"><p>The above example will output something similar to:</p></div> <div class="example-contents screen"> <div class="cdata"><pre>
I am Alice.
I am Alice.
I don't have a name yet.
I am Bob.
</pre></div> </div> </div> </div> <div class="refsect1 seealso" id="refsect1-pdostatement.fetch-seealso"> <h3 class="title">See Also</h3> 
<ul class="simplelist"> <li class="member"><span class="methodname"><a href="pdo.prepare.html" class="methodname" rel="rdfs-seeAlso">PDO::prepare()</a> - Prepares a statement for execution and returns a statement object</span></li> <li class="member"><span class="methodname"><a href="pdostatement.execute.html" class="methodname" rel="rdfs-seeAlso">PDOStatement::execute()</a> - Executes a prepared statement</span></li> <li class="member"><span class="methodname"><a href="pdostatement.fetchall.html" class="methodname" rel="rdfs-seeAlso">PDOStatement::fetchAll()</a> - Fetches the remaining rows from a result set</span></li> <li class="member"><span class="methodname"><a href="pdostatement.fetchcolumn.html" class="methodname" rel="rdfs-seeAlso">PDOStatement::fetchColumn()</a> - Returns a single column from the next row of a result set</span></li> <li class="member"><span class="methodname"><a href="pdostatement.fetchobject.html" class="methodname" rel="rdfs-seeAlso">PDOStatement::fetchObject()</a> - Fetches the next row and returns it as an object</span></li> <li class="member"><span class="methodname"><a href="pdostatement.setfetchmode.html" class="methodname" rel="rdfs-seeAlso">PDOStatement::setFetchMode()</a> - Set the default fetch mode for this statement</span></li> </ul> </div> </div></div>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1997&ndash;2023 The PHP Documentation Group<br>Licensed under the Creative Commons Attribution License v3.0 or later.<br>
    <a href="https://www.php.net/manual/en/pdostatement.fetch.php" class="_attribution-link">https://www.php.net/manual/en/pdostatement.fetch.php</a>
  </p>
</div>
