  <div id="layout"> <div id="layout-content">
<div id="class.eventbase" class="reference"> <h1 class="title">The EventBase class</h1>   <h2 class="title">Introduction</h2>
<p class="verinfo">(PECL event &gt;= 1.2.6-beta)</p> <p class="para"> <span class="classname"><strong class="classname">EventBase</strong></span> class represents libevent's event base structure. It holds a set of events and can poll to determine which events are active. </p> <p class="para"> Each event base has a <em>method</em> , or a <em>backend</em> that it uses to determine which events are ready. The recognized methods are: <code class="literal">select</code> , <code class="literal">poll</code> , <code class="literal">epoll</code> , <code class="literal">kqueue</code> , <code class="literal">devpoll</code> , <code class="literal">evport</code> and <code class="literal">win32</code> . </p> <p class="para"> To configure event base to use, or avoid specific backend <span class="classname"><a href="class.eventconfig.html" class="classname">EventConfig</a></span> class can be used. </p> <div class="warning">
<strong class="warning">Warning</strong> <p class="para"> Do <em>NOT</em> destroy the <span class="classname"><strong class="classname">EventBase</strong></span> object as long as resources of the associated <code class="literal">Event</code> objects are not released. Otherwise, it will lead to unpredictable results! </p> </div>   <h2 class="title">Class synopsis</h2> <div class="classsynopsis">  <div class="classsynopsisinfo"> <span class="ooclass"> <span class="modifier">final</span> <span class="modifier">class</span> <strong class="classname">EventBase</strong> </span> {</div> <div class="classsynopsisinfo classsynopsisinfo_comment">/* Constants */</div> <div class="fieldsynopsis"> <span class="modifier">const</span> <span class="type"><a href="language.types.integer.html" class="type int">int</a></span> <var class="fieldsynopsis_varname"><a href="class.eventbase.html#eventbase.constants.loop-once"><var class="varname">LOOP_ONCE</var></a></var><span class="initializer"> = 1</span>;</div> <div class="fieldsynopsis">
<span class="modifier">const</span> <span class="type"><a href="language.types.integer.html" class="type int">int</a></span> <var class="fieldsynopsis_varname"><a href="class.eventbase.html#eventbase.constants.loop-nonblock"><var class="varname">LOOP_NONBLOCK</var></a></var><span class="initializer"> = 2</span>;</div> <div class="fieldsynopsis">
<span class="modifier">const</span> <span class="type"><a href="language.types.integer.html" class="type int">int</a></span> <var class="fieldsynopsis_varname"><a href="class.eventbase.html#eventbase.constants.nolock"><var class="varname">NOLOCK</var></a></var><span class="initializer"> = 1</span>;</div> <div class="fieldsynopsis">
<span class="modifier">const</span> <span class="type"><a href="language.types.integer.html" class="type int">int</a></span> <var class="fieldsynopsis_varname"><a href="class.eventbase.html#eventbase.constants.startup-iocp"><var class="varname">STARTUP_IOCP</var></a></var><span class="initializer"> = 4</span>;</div> <div class="fieldsynopsis">
<span class="modifier">const</span> <span class="type"><a href="language.types.integer.html" class="type int">int</a></span> <var class="fieldsynopsis_varname"><a href="class.eventbase.html#eventbase.constants.no-cache-time"><var class="varname">NO_CACHE_TIME</var></a></var><span class="initializer"> = 8</span>;</div> <div class="fieldsynopsis">
<span class="modifier">const</span> <span class="type"><a href="language.types.integer.html" class="type int">int</a></span> <var class="fieldsynopsis_varname"><a href="class.eventbase.html#eventbase.constants.epoll-use-changelist"><var class="varname">EPOLL_USE_CHANGELIST</var></a></var><span class="initializer"> = 16</span>;</div> <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div> <pre class="methodsynopsis dc-description" data-language="php">public __construct( EventConfig $cfg  = ?)</pre> <pre class="methodsynopsis dc-description" data-language="php">public dispatch(): void</pre> <pre class="methodsynopsis dc-description" data-language="php">public exit( float $timeout  = ?): bool</pre> <pre class="methodsynopsis dc-description" data-language="php">public free(): void</pre> <pre class="methodsynopsis dc-description" data-language="php">public getFeatures(): int</pre> <pre class="methodsynopsis dc-description" data-language="php">public getMethod(): string</pre> <pre class="methodsynopsis dc-description" data-language="php">public getTimeOfDayCached(): float</pre> <pre class="methodsynopsis dc-description" data-language="php">public gotExit(): bool</pre> <pre class="methodsynopsis dc-description" data-language="php">public gotStop(): bool</pre> <pre class="methodsynopsis dc-description" data-language="php">public loop( int $flags  = ?): bool</pre> <pre class="methodsynopsis dc-description" data-language="php">public priorityInit( int $n_priorities ): bool</pre> <pre class="methodsynopsis dc-description" data-language="php">public reInit(): bool</pre> <pre class="methodsynopsis dc-description" data-language="php">public stop(): bool</pre> }</div>   <h2 class="title">Predefined Constants</h2> <dl> <dt id="eventbase.constants.loop-once"> <strong><code><a href="class.eventbase.html#eventbase.constants.loop-once">EventBase::LOOP_ONCE</a></code></strong> </dt> <dd> <p class="para"> Flag used with <span class="methodname"><a href="eventbase.loop.html" class="methodname">EventBase::loop()</a></span> method which means: "block until libevent has an active event, then exit once all active events have had their callbacks run". </p> </dd> <dt id="eventbase.constants.loop-nonblock"> <strong><code><a href="class.eventbase.html#eventbase.constants.loop-nonblock">EventBase::LOOP_NONBLOCK</a></code></strong> </dt> <dd> <p class="para"> Flag used with <span class="methodname"><a href="eventbase.loop.html" class="methodname">EventBase::loop()</a></span> method which means: "do not block: see which events are ready now, run the callbacks of the highest-priority ones, then exit". </p> </dd> <dt id="eventbase.constants.nolock"> <strong><code><a href="class.eventbase.html#eventbase.constants.nolock">EventBase::NOLOCK</a></code></strong> </dt> <dd> <p class="para"> Configuration flag. Do not allocate a lock for the event base, even if we have locking set up". </p> </dd> <dt id="eventbase.constants.startup-iocp"> <strong><code><a href="class.eventbase.html#eventbase.constants.startup-iocp">EventBase::STARTUP_IOCP</a></code></strong> </dt> <dd> <p class="para"> Windows-only configuration flag. Enables the IOCP dispatcher at startup. </p> </dd> <dt id="eventbase.constants.no-cache-time"> <strong><code><a href="class.eventbase.html#eventbase.constants.no-cache-time">EventBase::NO_CACHE_TIME</a></code></strong> </dt> <dd> <p class="para"> Configuration flag. Instead of checking the current time every time the event loop is ready to run timeout callbacks, check after each timeout callback. </p> </dd> <dt id="eventbase.constants.epoll-use-changelist"> <strong><code><a href="class.eventbase.html#eventbase.constants.epoll-use-changelist">EventBase::EPOLL_USE_CHANGELIST</a></code></strong> </dt> <dd> <p class="para"> If we are using the <code class="literal">epoll</code> backend, this flag says that it is safe to use Libevent's internal change-list code to batch up adds and deletes in order to try to do as few syscalls as possible. </p> <p class="para"> Setting this flag can make code run faster, but it may trigger a Linux bug: it is not safe to use this flag if one has any fds cloned by dup(), or its variants. Doing so will produce strange and hard-to-diagnose bugs. </p> <p class="para"> This flag can also be activated by settnig the <code class="literal">EVENT_EPOLL_USE_CHANGELIST</code> environment variable. </p> <p class="para"> This flag has no effect if one winds up using a backend other than <code class="literal">epoll</code> . </p> </dd> </dl>   <h2>Table of Contents</h2>
<ul class="chunklist chunklist_reference">
<li>
<a href="eventbase.construct.html">EventBase::__construct</a> — Constructs EventBase object</li>
<li>
<a href="eventbase.dispatch.html">EventBase::dispatch</a> — Dispatch pending events</li>
<li>
<a href="eventbase.exit.html">EventBase::exit</a> — Stop dispatching events</li>
<li>
<a href="eventbase.free.html">EventBase::free</a> — Free resources allocated for this event base</li>
<li>
<a href="eventbase.getfeatures.html">EventBase::getFeatures</a> — Returns bitmask of features supported</li>
<li>
<a href="eventbase.getmethod.html">EventBase::getMethod</a> — Returns event method in use</li>
<li>
<a href="eventbase.gettimeofdaycached.html">EventBase::getTimeOfDayCached</a> — Returns the current event base time</li>
<li>
<a href="eventbase.gotexit.html">EventBase::gotExit</a> — Checks if the event loop was told to exit</li>
<li>
<a href="eventbase.gotstop.html">EventBase::gotStop</a> — Checks if the event loop was told to exit</li>
<li>
<a href="eventbase.loop.html">EventBase::loop</a> — Dispatch pending events</li>
<li>
<a href="eventbase.priorityinit.html">EventBase::priorityInit</a> — Sets number of priorities per event base</li>
<li>
<a href="eventbase.reinit.html">EventBase::reInit</a> — Re-initialize event base(after a fork)</li>
<li>
<a href="eventbase.stop.html">EventBase::stop</a> — Tells event_base to stop dispatching events</li>
</ul> </div> </div>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1997&ndash;2024 The PHP Documentation Group<br>Licensed under the Creative Commons Attribution License v3.0 or later.<br>
    <a href="https://www.php.net/manual/en/class.eventbase.php" class="_attribution-link">https://www.php.net/manual/en/class.eventbase.php</a>
  </p>
</div>
