  <div id="layout"> <div id="layout-content"><div id="imagick.subimagematch" class="refentry"> <div class="refnamediv"> <h1 class="refname">Imagick::subImageMatch</h1> <p class="verinfo">(PECL imagick 3 &gt;= 3.3.0)</p>
<p class="refpurpose"><span class="refname">Imagick::subImageMatch</span> â€” <span class="dc-title">Searches for a subimage in the current image and returns a similarity image</span></p> </div> <div class="refsect1 description" id="refsect1-imagick.subimagematch-description"> <h3 class="title">Description</h3> <pre class="methodsynopsis dc-description" data-language="php">public Imagick::subImageMatch(Imagick $Imagick, array &amp;$offset = ?, float &amp;$similarity = ?): Imagick</pre> <p class="para rdfs-comment"> Searches for a subimage in the current image and returns a similarity image such that an exact match location is completely white and if none of the pixels match, black, otherwise some gray level in-between. You can also pass in the optional parameters bestMatch and similarity. After calling the function similarity will be set to the 'score' of the similarity between the subimage and the matching position in the larger image, bestMatch will contain an associative array with elements x, y, width, height that describe the matching region. </p> </div> <div class="refsect1 parameters" id="refsect1-imagick.subimagematch-parameters"> <h3 class="title">Parameters</h3> <dl> <dt><code class="parameter">Imagick</code></dt>  <dt><code class="parameter">offset</code></dt>  <dt><code class="parameter">similarity</code></dt> <dd> <p class="para"> A new image that displays the amount of similarity at each pixel. </p> </dd> </dl> </div> <div class="refsect1 returnvalues" id="refsect1-imagick.subimagematch-returnvalues"> <h3 class="title">Return Values</h3>  </div> <div class="refsect1 examples" id="refsect1-imagick.subimagematch-examples"> <h3 class="title">Examples</h3> 
<div class="example" id="example-3018"> <p><strong>Example #1 <span class="function"><strong>Imagick::subImageMatch()</strong></span></strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
function subImageMatch($imagePath) {
    $imagick = new \Imagick(realpath($imagePath));
    $imagick2 = clone $imagick;
    $imagick2-&gt;cropimage(40, 40, 250, 110);
    $imagick2-&gt;vignetteimage(0, 1, 3, 3);

    $similarity = null;
    $bestMatch = null;
    $comparison = $imagick-&gt;subImageMatch($imagick2, $bestMatch, $similarity);

    $comparison-&gt;setImageFormat('png');
    header("Content-Type: image/png");
    echo $imagick-&gt;getImageBlob();
}

?&gt;</pre> </div> </div> </div> </div></div>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1997&ndash;2024 The PHP Documentation Group<br>Licensed under the Creative Commons Attribution License v3.0 or later.<br>
    <a href="https://www.php.net/manual/en/imagick.subimagematch.php" class="_attribution-link">https://www.php.net/manual/en/imagick.subimagematch.php</a>
  </p>
</div>
