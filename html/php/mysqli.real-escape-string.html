  <div id="layout"> <div id="layout-content"><div id="mysqli.real-escape-string" class="refentry"> <div class="refnamediv"> <h1 class="refname">mysqli::real_escape_string</h1> <h1 class="refname">mysqli_real_escape_string</h1> <p class="verinfo">(PHP 5, PHP 7, PHP 8)</p>
<p class="refpurpose"><span class="refname">mysqli::real_escape_string</span> -- <span class="refname">mysqli_real_escape_string</span> â€” <span class="dc-title">Escapes special characters in a string for use in an SQL statement, taking into account the current charset of the connection</span></p> </div> <div class="refsect1 description" id="refsect1-mysqli.real-escape-string-description"> <h3 class="title">Description</h3> <p class="para">Object-oriented style</p> <pre class="methodsynopsis dc-description" data-language="php">public mysqli::real_escape_string(string $string): string</pre> <p class="para rdfs-comment">Procedural style</p> <pre class="methodsynopsis dc-description" data-language="php">mysqli_real_escape_string(mysqli $mysql, string $string): string</pre> <p class="para rdfs-comment"> This function is used to create a legal SQL string that you can use in an SQL statement. The given string is encoded to produce an escaped SQL string, taking into account the current character set of the connection. </p> <div class="caution">
<strong class="caution">Caution</strong> <h1 class="title">Security: the default character set</h1> <p class="para"> The character set must be set either at the server level, or with the API function <span class="function"><a href="mysqli.set-charset.html" class="function">mysqli_set_charset()</a></span> for it to affect <span class="function"><strong>mysqli_real_escape_string()</strong></span>. See the concepts section on <a href="https://www.php.net/manual/en/mysqlinfo.concepts.charset.php" class="link">character sets</a> for more information. </p> </div> </div> <div class="refsect1 parameters" id="refsect1-mysqli.real-escape-string-parameters"> <h3 class="title">Parameters</h3> 
<dl> <dt> <code class="parameter">mysql</code>
</dt> <dd> <p class="para">Procedural style only: A <span class="classname"><a href="class.mysqli.html" class="classname">mysqli</a></span> object returned by <span class="function"><a href="function.mysqli-connect.html" class="function">mysqli_connect()</a></span> or <span class="function"><a href="mysqli.init.html" class="function">mysqli_init()</a></span> </p>
</dd> <dt> <code class="parameter">string</code>
</dt> <dd> <p class="para"> The string to be escaped. </p> <p class="para"> Characters encoded are <code class="literal">NUL (ASCII 0)</code>, <code class="literal">\n</code>, <code class="literal">\r</code>, <code class="literal">\</code>, <code class="literal">'</code>, <code class="literal">"</code>, and <kbd class="keycombo"><kbd class="keycap">CTRL</kbd>+<kbd class="keycap">Z</kbd></kbd>. </p> </dd> </dl> </div> <div class="refsect1 returnvalues" id="refsect1-mysqli.real-escape-string-returnvalues"> <h3 class="title">Return Values</h3> <p class="para"> Returns an escaped string. </p> </div> <div class="refsect1 examples" id="refsect1-mysqli.real-escape-string-examples"> <h3 class="title">Examples</h3> <div class="example" id="example-4460"> <p><strong>Example #1 <span class="methodname"><strong>mysqli::real_escape_string()</strong></span> example</strong></p> <div class="example-contents"><p>Object-oriented style</p></div> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php

mysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT);
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

$city = "'s-Hertogenbosch";

/* this query with escaped $city will work */
$query = sprintf("SELECT CountryCode FROM City WHERE name='%s'",
    $mysqli-&gt;real_escape_string($city));
$result = $mysqli-&gt;query($query);
printf("Select returned %d rows.\n", $result-&gt;num_rows);

/* this query will fail, because we didn't escape $city */
$query = sprintf("SELECT CountryCode FROM City WHERE name='%s'", $city);
$result = $mysqli-&gt;query($query);</pre> </div> <div class="example-contents"><p>Procedural style</p></div> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php

mysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT);
$mysqli = mysqli_connect("localhost", "my_user", "my_password", "world");

$city = "'s-Hertogenbosch";

/* this query with escaped $city will work */
$query = sprintf("SELECT CountryCode FROM City WHERE name='%s'",
    mysqli_real_escape_string($mysqli, $city));
$result = mysqli_query($mysqli, $query);
printf("Select returned %d rows.\n", mysqli_num_rows($result));

/* this query will fail, because we didn't escape $city */
$query = sprintf("SELECT CountryCode FROM City WHERE name='%s'", $city);
$result = mysqli_query($mysqli, $query);</pre> </div> <div class="example-contents"><p>The above examples will output something similar to:</p></div> <div class="example-contents screen"> <div class="cdata"><pre>
Select returned 1 rows.

Fatal error: Uncaught mysqli_sql_exception: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 's-Hertogenbosch'' at line 1 in...
</pre></div> </div> </div> </div> <div class="refsect1 seealso" id="refsect1-mysqli.real-escape-string-seealso"> <h3 class="title">See Also</h3> 
<ul class="simplelist"> <li class="member"><span class="function"><a href="mysqli.set-charset.html" class="function" rel="rdfs-seeAlso">mysqli_set_charset()</a> - Sets the client character set</span></li> </ul> </div> </div></div>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1997&ndash;2023 The PHP Documentation Group<br>Licensed under the Creative Commons Attribution License v3.0 or later.<br>
    <a href="https://www.php.net/manual/en/mysqli.real-escape-string.php" class="_attribution-link">https://www.php.net/manual/en/mysqli.real-escape-string.php</a>
  </p>
</div>
