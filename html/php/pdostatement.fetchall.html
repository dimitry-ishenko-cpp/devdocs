  <div id="layout"> <div id="layout-content"><div id="pdostatement.fetchall" class="refentry"> <div class="refnamediv"> <h1 class="refname">PDOStatement::fetchAll</h1> <p class="verinfo">(PHP 5 &gt;= 5.1.0, PHP 7, PHP 8, PECL pdo &gt;= 0.1.0)</p>
<p class="refpurpose"><span class="refname">PDOStatement::fetchAll</span> â€” <span class="dc-title"> Fetches the remaining rows from a result set </span></p> </div> <div class="refsect1 description" id="refsect1-pdostatement.fetchall-description"> <h3 class="title">Description</h3> <pre class="methodsynopsis dc-description" data-language="php">public PDOStatement::fetchAll(int $mode = PDO::FETCH_DEFAULT): array</pre> <pre class="methodsynopsis dc-description" data-language="php">public PDOStatement::fetchAll(int $mode = PDO::FETCH_COLUMN, int $column): array</pre> <pre class="methodsynopsis dc-description" data-language="php">public PDOStatement::fetchAll(int $mode = PDO::FETCH_CLASS, string $class, ?array $constructorArgs): array</pre> <pre class="methodsynopsis dc-description" data-language="php">public PDOStatement::fetchAll(int $mode = PDO::FETCH_FUNC, callable $callback): array</pre> </div> <div class="refsect1 parameters" id="refsect1-pdostatement.fetchall-parameters"> <h3 class="title">Parameters</h3> 
<dl> <dt><code class="parameter">mode</code></dt> <dd> <p class="para"> Controls the contents of the returned array as documented in <span class="methodname"><a href="pdostatement.fetch.html" class="methodname">PDOStatement::fetch()</a></span>. Defaults to value of <strong><code><a href="https://www.php.net/manual/en/pdo.constants.php#pdo.constants.attr-default-fetch-mode">PDO::ATTR_DEFAULT_FETCH_MODE</a></code></strong> (which defaults to <strong><code><a href="https://www.php.net/manual/en/pdo.constants.php#pdo.constants.fetch-both">PDO::FETCH_BOTH</a></code></strong>) </p> <p class="para"> To return an array consisting of all values of a single column from the result set, specify <strong><code><a href="https://www.php.net/manual/en/pdo.constants.php#pdo.constants.fetch-column">PDO::FETCH_COLUMN</a></code></strong>. You can specify which column you want with the <code class="parameter">column</code> parameter. </p> <p class="para"> To index the resulting array by a certain column's value (instead of consecutive numbers), put this column's name first in the column list in SQL, and use <strong><code><a href="https://www.php.net/manual/en/pdo.constants.php#pdo.constants.fetch-unique">PDO::FETCH_UNIQUE</a></code></strong>. This column must contain only unique values or some data will be lost. </p> <p class="para"> To group results in the form of a 3-dimensional array indexed by values of a specified column, put this column's name first in the column list in SQL and use <strong><code><a href="https://www.php.net/manual/en/pdo.constants.php#pdo.constants.fetch-group">PDO::FETCH_GROUP</a></code></strong>. </p> <p class="para"> To group results in the form of a 2-dimensional array use bitwise-OR <strong><code><a href="https://www.php.net/manual/en/pdo.constants.php#pdo.constants.fetch-group">PDO::FETCH_GROUP</a></code></strong> with <strong><code><a href="https://www.php.net/manual/en/pdo.constants.php#pdo.constants.fetch-column">PDO::FETCH_COLUMN</a></code></strong>. The results will be grouped by the first column, with the array element's value being a list array of the corresponding entries from the second column. </p> </dd> </dl> The following are dynamic parameters that are depending on the fetch mode. They can't be used with named parameters. <dl> <dt><code class="parameter">column</code></dt> <dd> <p class="para"> Used with <strong><code><a href="https://www.php.net/manual/en/pdo.constants.php#pdo.constants.fetch-column">PDO::FETCH_COLUMN</a></code></strong>. Returns the indicated 0-indexed column. </p> </dd> <dt><code class="parameter">class</code></dt> <dd> <p class="para"> Used with <strong><code><a href="https://www.php.net/manual/en/pdo.constants.php#pdo.constants.fetch-class">PDO::FETCH_CLASS</a></code></strong>. Returns instances of the specified class, mapping the columns of each row to named properties in the class. </p> </dd> <dt><code class="parameter">constructorArgs</code></dt> <dd> <p class="para"> Arguments of custom class constructor when the <code class="parameter">mode</code> parameter is <strong><code><a href="https://www.php.net/manual/en/pdo.constants.php#pdo.constants.fetch-class">PDO::FETCH_CLASS</a></code></strong>. </p> </dd> <dt><code class="parameter">callback</code></dt> <dd> <p class="para"> Used with <strong><code><a href="https://www.php.net/manual/en/pdo.constants.php#pdo.constants.fetch-func">PDO::FETCH_FUNC</a></code></strong>. Returns the results of calling the specified function, using each row's columns as parameters in the call. </p> </dd> </dl> </div> <div class="refsect1 returnvalues" id="refsect1-pdostatement.fetchall-returnvalues"> <h3 class="title">Return Values</h3> <p class="para"> <span class="methodname"><strong>PDOStatement::fetchAll()</strong></span> returns an array containing all of the remaining rows in the result set. The array represents each row as either an array of column values or an object with properties corresponding to each column name. An empty array is returned if there are zero results to fetch. </p> <p class="para"> Using this method to fetch large result sets will result in a heavy demand on system and possibly network resources. Rather than retrieving all of the data and manipulating it in PHP, consider using the database server to manipulate the result sets. For example, use the WHERE and ORDER BY clauses in SQL to restrict results before retrieving and processing them with PHP. </p> </div> <div class="refsect1 errors" id="refsect1-pdostatement.fetchall-errors"> <h3 class="title">Errors/Exceptions</h3> <p class="para"> Emits an error with level <strong><code><a href="https://www.php.net/manual/en/errorfunc.constants.php#constant.e-warning">E_WARNING</a></code></strong> if the attribute <strong><code><a href="https://www.php.net/manual/en/pdo.constants.php#pdo.constants.attr-errmode">PDO::ATTR_ERRMODE</a></code></strong> is set to <strong><code><a href="https://www.php.net/manual/en/pdo.constants.php#pdo.constants.errmode-warning">PDO::ERRMODE_WARNING</a></code></strong>. </p> <p class="para"> Throws a <span class="classname"><a href="class.pdoexception.html" class="classname">PDOException</a></span> if the attribute <strong><code><a href="https://www.php.net/manual/en/pdo.constants.php#pdo.constants.attr-errmode">PDO::ATTR_ERRMODE</a></code></strong> is set to <strong><code><a href="https://www.php.net/manual/en/pdo.constants.php#pdo.constants.errmode-exception">PDO::ERRMODE_EXCEPTION</a></code></strong>. </p> </div> <div class="refsect1 changelog" id="refsect1-pdostatement.fetchall-changelog"> <h3 class="title">Changelog</h3> <table class="doctable informaltable"> <thead> <tr> <th>Version</th> <th>Description</th> </tr> </thead> <tbody class="tbody"> <tr> <td>8.0.0</td> <td> This method always returns an <span class="type"><a href="language.types.array.html" class="type array">array</a></span> now, while previously <strong><code><a href="https://www.php.net/manual/en/reserved.constants.php#constant.false">false</a></code></strong> may have been returned on failure. </td> </tr> </tbody> </table> </div> <div class="refsect1 examples" id="refsect1-pdostatement.fetchall-examples"> <h3 class="title">Examples</h3> 
<div class="example" id="example-1097">
<p><strong>Example #1 Fetch all remaining rows in a result set</strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
$sth = $dbh-&gt;prepare("SELECT name, colour FROM fruit");
$sth-&gt;execute();

/* Fetch all of the remaining rows in the result set */
print "Fetch all of the remaining rows in the result set:\n";
$result = $sth-&gt;fetchAll();
print_r($result);
?&gt;</pre> </div> <div class="example-contents"><p>The above example will output something similar to:</p></div> <div class="example-contents screen"> <div class="examplescode">
<pre class="examplescode">Fetch all of the remaining rows in the result set:
Array
(
    [0] =&gt; Array
        (
            [name] =&gt; apple
            [0] =&gt; apple
            [colour] =&gt; red
            [1] =&gt; red
        )

    [1] =&gt; Array
        (
            [name] =&gt; pear
            [0] =&gt; pear
            [colour] =&gt; green
            [1] =&gt; green
        )

    [2] =&gt; Array
        (
            [name] =&gt; watermelon
            [0] =&gt; watermelon
            [colour] =&gt; pink
            [1] =&gt; pink
        )

)</pre> </div> </div> </div> <div class="example" id="example-1098">
<p><strong>Example #2 Fetching all values of a single column from a result set</strong></p> <div class="example-contents"><p> The following example demonstrates how to return all of the values of a single column from a result set, even though the SQL statement itself may return multiple columns per row. </p></div> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
$sth = $dbh-&gt;prepare("SELECT name, colour FROM fruit");
$sth-&gt;execute();

/* Fetch all of the values of the first column */
$result = $sth-&gt;fetchAll(PDO::FETCH_COLUMN, 0);
var_dump($result);
?&gt;</pre> </div> <div class="example-contents"><p>The above example will output something similar to:</p></div> <div class="example-contents screen"> <div class="examplescode">
<pre class="examplescode">Array(3)
(
    [0] =&gt;
    string(5) =&gt; apple
    [1] =&gt;
    string(4) =&gt; pear
    [2] =&gt;
    string(10) =&gt; watermelon
)</pre> </div> </div> </div> <div class="example" id="example-1099">
<p><strong>Example #3 Grouping all values by a single column</strong></p> <div class="example-contents"><p> The following example demonstrates how to return an associative array grouped by the values of the specified column in the result set. The array contains three keys: values <code class="literal">apple</code> and <code class="literal">pear</code> are returned as arrays that contain two different colours, while <code class="literal">watermelon</code> is returned as an array that contains only one colour. </p></div> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
$insert = $dbh-&gt;prepare("INSERT INTO fruit(name, colour) VALUES (?, ?)");
$insert-&gt;execute(array('apple', 'green'));
$insert-&gt;execute(array('pear', 'yellow'));

$sth = $dbh-&gt;prepare("SELECT name, colour FROM fruit");
$sth-&gt;execute();

/* Group values by the first column */
var_dump($sth-&gt;fetchAll(PDO::FETCH_COLUMN|PDO::FETCH_GROUP));
?&gt;</pre> </div> <div class="example-contents"><p>The above example will output something similar to:</p></div> <div class="example-contents screen"> <div class="examplescode">
<pre class="examplescode">array(3) {
  ["apple"]=&gt;
  array(2) {
    [0]=&gt;
    string(5) "green"
    [1]=&gt;
    string(3) "red"
  }
  ["pear"]=&gt;
  array(2) {
    [0]=&gt;
    string(5) "green"
    [1]=&gt;
    string(6) "yellow"
  }
  ["watermelon"]=&gt;
  array(1) {
    [0]=&gt;
    string(5) "pink"
  }
}</pre> </div> </div> </div> <div class="example" id="example-1100">
<p><strong>Example #4 Instantiating a class for each result</strong></p> <div class="example-contents"><p> The following example demonstrates the behaviour of the <strong><code><a href="https://www.php.net/manual/en/pdo.constants.php#pdo.constants.fetch-class">PDO::FETCH_CLASS</a></code></strong> fetch style. </p></div> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
class fruit {
    public $name;
    public $colour;
}

$sth = $dbh-&gt;prepare("SELECT name, colour FROM fruit");
$sth-&gt;execute();

$result = $sth-&gt;fetchAll(PDO::FETCH_CLASS, "fruit");
var_dump($result);
?&gt;</pre> </div> <div class="example-contents"><p>The above example will output something similar to:</p></div> <div class="example-contents screen"> <div class="examplescode">
<pre class="examplescode">array(3) {
  [0]=&gt;
  object(fruit)#1 (2) {
    ["name"]=&gt;
    string(5) "apple"
    ["colour"]=&gt;
    string(5) "green"
  }
  [1]=&gt;
  object(fruit)#2 (2) {
    ["name"]=&gt;
    string(4) "pear"
    ["colour"]=&gt;
    string(6) "yellow"
  }
  [2]=&gt;
  object(fruit)#3 (2) {
    ["name"]=&gt;
    string(10) "watermelon"
    ["colour"]=&gt;
    string(4) "pink"
  }
  [3]=&gt;
  object(fruit)#4 (2) {
    ["name"]=&gt;
    string(5) "apple"
    ["colour"]=&gt;
    string(3) "red"
  }
  [4]=&gt;
  object(fruit)#5 (2) {
    ["name"]=&gt;
    string(4) "pear"
    ["colour"]=&gt;
    string(5) "green"
  }
}</pre> </div> </div> </div> <div class="example" id="example-1101">
<p><strong>Example #5 Calling a function for each result</strong></p> <div class="example-contents"><p> The following example demonstrates the behaviour of the <strong><code><a href="https://www.php.net/manual/en/pdo.constants.php#pdo.constants.fetch-func">PDO::FETCH_FUNC</a></code></strong> fetch style. </p></div> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
function fruit($name, $colour) {
    return "{$name}: {$colour}";
}

$sth = $dbh-&gt;prepare("SELECT name, colour FROM fruit");
$sth-&gt;execute();

$result = $sth-&gt;fetchAll(PDO::FETCH_FUNC, "fruit");
var_dump($result);
?&gt;</pre> </div> <div class="example-contents"><p>The above example will output something similar to:</p></div> <div class="example-contents screen"> <div class="examplescode">
<pre class="examplescode">array(3) {
  [0]=&gt;
  string(12) "apple: green"
  [1]=&gt;
  string(12) "pear: yellow"
  [2]=&gt;
  string(16) "watermelon: pink"
  [3]=&gt;
  string(10) "apple: red"
  [4]=&gt;
  string(11) "pear: green"
}</pre> </div> </div> </div> </div> <div class="refsect1 seealso" id="refsect1-pdostatement.fetchall-seealso"> <h3 class="title">See Also</h3> 
<ul class="simplelist"> <li><span class="methodname"><a href="pdo.query.html" class="methodname" rel="rdfs-seeAlso">PDO::query()</a> - Prepares and executes an SQL statement without placeholders</span></li> <li><span class="methodname"><a href="pdostatement.fetch.html" class="methodname" rel="rdfs-seeAlso">PDOStatement::fetch()</a> - Fetches the next row from a result set</span></li> <li><span class="methodname"><a href="pdostatement.fetchcolumn.html" class="methodname" rel="rdfs-seeAlso">PDOStatement::fetchColumn()</a> - Returns a single column from the next row of a result set</span></li> <li><span class="methodname"><a href="pdo.prepare.html" class="methodname" rel="rdfs-seeAlso">PDO::prepare()</a> - Prepares a statement for execution and returns a statement object</span></li> <li><span class="methodname"><a href="pdostatement.setfetchmode.html" class="methodname" rel="rdfs-seeAlso">PDOStatement::setFetchMode()</a> - Set the default fetch mode for this statement</span></li> </ul> </div> </div></div>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1997&ndash;2024 The PHP Documentation Group<br>Licensed under the Creative Commons Attribution License v3.0 or later.<br>
    <a href="https://www.php.net/manual/en/pdostatement.fetchall.php" class="_attribution-link">https://www.php.net/manual/en/pdostatement.fetchall.php</a>
  </p>
</div>
