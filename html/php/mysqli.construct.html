  <div id="layout"> <div id="layout-content"><div id="mysqli.construct" class="refentry"> <div class="refnamediv"> <h1 class="refname">mysqli::__construct</h1> <h1 class="refname">mysqli::connect</h1> <h1 class="refname">mysqli_connect</h1> <p class="verinfo">(PHP 5, PHP 7, PHP 8)</p>
<p class="refpurpose"><span class="refname">mysqli::__construct</span> -- <span class="refname">mysqli::connect</span> -- <span class="refname">mysqli_connect</span> â€” <span class="dc-title">Open a new connection to the MySQL server</span></p> </div> <div class="refsect1 description" id="refsect1-mysqli.construct-description"> <h3 class="title">Description</h3> <p class="para">Object-oriented style</p> <div class="constructorsynopsis dc-description"> <span class="modifier">public</span> <span class="methodname"><strong>mysqli::__construct</strong></span>(<br> <span class="methodparam"><span class="type">?</span><span class="type"><span class="type">string</span></span> <code class="parameter">$hostname</code><span class="initializer"> = <strong><code>null</code></strong></span></span>,<br> <span class="methodparam"><span class="type">?</span><span class="type"><span class="type">string</span></span> <code class="parameter">$username</code><span class="initializer"> = <strong><code>null</code></strong></span></span>,<br> <span class="methodparam"><span class="type">?</span><span class="type"><span class="type">string</span></span> <code class="parameter">$password</code><span class="initializer"> = <strong><code>null</code></strong></span></span>,<br> <span class="methodparam"><span class="type">?</span><span class="type"><span class="type">string</span></span> <code class="parameter">$database</code><span class="initializer"> = <strong><code>null</code></strong></span></span>,<br> <span class="methodparam"><span class="type">?</span><span class="type"><span class="type">int</span></span> <code class="parameter">$port</code><span class="initializer"> = <strong><code>null</code></strong></span></span>,<br> <span class="methodparam"><span class="type">?</span><span class="type"><span class="type">string</span></span> <code class="parameter">$socket</code><span class="initializer"> = <strong><code>null</code></strong></span></span><br>)</div> <pre class="methodsynopsis dc-description" data-language="php">public mysqli::connect(
 ?string $hostname = null,
 ?string $username = null,
 ?string $password = null,
 ?string $database = null,
 ?int $port = null,
 ?string $socket = null
): bool</pre> <p class="para rdfs-comment">Procedural style</p> <pre class="methodsynopsis dc-description" data-language="php">mysqli_connect(
 ?string $hostname = null,
 ?string $username = null,
 ?string $password = null,
 ?string $database = null,
 ?int $port = null,
 ?string $socket = null
): mysqli|false</pre> <p class="para rdfs-comment"> Opens a connection to the MySQL Server. </p> </div> <div class="refsect1 parameters" id="refsect1-mysqli.construct-parameters"> <h3 class="title">Parameters</h3> 
<dl> <dt> <code class="parameter">hostname</code>
</dt> <dd> <p class="para"> Can be either a host name or an IP address. When passing <strong><code>null</code></strong>, the value is retrieved from <a href="https://www.php.net/manual/en/mysqli.configuration.php#ini.mysqli.default-host" class="link">mysqli.default_host</a>. When possible, pipes will be used instead of the TCP/IP protocol. The TCP/IP protocol is used if a host name and port number are provided together e.g. <code class="literal">localhost:3308</code>. </p> <p class="para"> Prepending host by <code class="literal">p:</code> opens a persistent connection. <span class="function"><a href="mysqli.change-user.html" class="function">mysqli_change_user()</a></span> is automatically called on connections opened from the connection pool. </p> </dd> <dt> <code class="parameter">username</code>
</dt> <dd> <p class="para"> The MySQL username or <strong><code>null</code></strong> to assume the username based on the <a href="https://www.php.net/manual/en/mysqli.configuration.php#ini.mysqli.default-user" class="link">mysqli.default_user</a> ini option. </p> </dd> <dt> <code class="parameter">password</code>
</dt> <dd> <p class="para"> The MySQL password or <strong><code>null</code></strong> to assume the password based on the <a href="https://www.php.net/manual/en/mysqli.configuration.php#ini.mysqli.default-pw" class="link">mysqli.default_pw</a> ini option. </p> </dd> <dt> <code class="parameter">database</code>
</dt> <dd> <p class="para"> The default database to be used when performing queries or <strong><code>null</code></strong>. </p> </dd> <dt> <code class="parameter">port</code>
</dt> <dd> <p class="para"> The port number to attempt to connect to the MySQL server or <strong><code>null</code></strong> to assume the port based on the <a href="https://www.php.net/manual/en/mysqli.configuration.php#ini.mysqli.default-port" class="link">mysqli.default_port</a> ini option. </p> </dd> <dt> <code class="parameter">socket</code>
</dt> <dd> <p class="para"> The socket or named pipe that should be used or <strong><code>null</code></strong> to assume the socket based on the <a href="https://www.php.net/manual/en/mysqli.configuration.php#ini.mysqli.default-socket" class="link">mysqli.default_socket</a> ini option. </p> <blockquote class="note">
<p><strong class="note">Note</strong>: </p>
<p class="para"> Specifying the <code class="parameter">socket</code> parameter will not explicitly determine the type of connection to be used when connecting to the MySQL server. How the connection is made to the MySQL database is determined by the <code class="parameter">hostname</code> parameter. </p> </blockquote> </dd> </dl> </div> <div class="refsect1 returnvalues" id="refsect1-mysqli.construct-returnvalues"> <h3 class="title">Return Values</h3> <p class="para"> <span class="function"><a href="function.mysqli-connect.html" class="function">mysqli_connect()</a></span> returns an object which represents the connection to a MySQL Server, or <strong><code>false</code></strong> on failure. </p> <p class="para"> <span class="methodname"><a href="function.mysqli-connect.html" class="methodname">mysqli::connect()</a></span> returns <strong><code>true</code></strong> on success or <strong><code>false</code></strong> on failure. Prior to PHP 8.1.0, returns <strong><code>null</code></strong> on success. </p> </div> <div class="refsect1 errors" id="refsect1-mysqli.construct-errors"> <h3 class="title">Errors/Exceptions</h3> <p class="para"> If mysqli error reporting is enabled (<strong><code>MYSQLI_REPORT_ERROR</code></strong>) and the requested operation fails, a warning is generated. If, in addition, the mode is set to <strong><code>MYSQLI_REPORT_STRICT</code></strong>, a <span class="classname"><a href="class.mysqli-sql-exception.html" class="classname">mysqli_sql_exception</a></span> is thrown instead.</p> </div> <div class="refsect1 changelog" id="refsect1-mysqli.construct-changelog"> <h3 class="title">Changelog</h3> 
<table class="doctable informaltable"> <thead> <tr> <th>Version</th> <th>Description</th> </tr> </thead> <tbody class="tbody"> <tr> <td>8.1.0</td> <td> <span class="methodname"><a href="function.mysqli-connect.html" class="methodname">mysqli::connect()</a></span> now returns <strong><code>true</code></strong> instead of <strong><code>null</code></strong> on success. </td> </tr> <tr> <td>7.4.0</td> <td> All parameters are now nullable. </td> </tr> </tbody> </table> </div> <div class="refsect1 examples" id="refsect1-mysqli.construct-examples"> <h3 class="title">Examples</h3> <div class="example" id="example-4382"> <p><strong>Example #1 <span class="methodname"><strong>mysqli::__construct()</strong></span> example</strong></p> <div class="example-contents"><p>Object-oriented style</p></div> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php

/* You should enable error reporting for mysqli before attempting to make a connection */
mysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT);

$mysqli = new mysqli('localhost', 'my_user', 'my_password', 'my_db');

/* Set the desired charset after establishing a connection */
$mysqli-&gt;set_charset('utf8mb4');

printf("Success... %s\n", $mysqli-&gt;host_info);</pre> </div> <div class="example-contents"><p>Procedural style</p></div> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php

/* You should enable error reporting for mysqli before attempting to make a connection */
mysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT);

$mysqli = mysqli_connect('localhost', 'my_user', 'my_password', 'my_db');

/* Set the desired charset after establishing a connection */
mysqli_set_charset($mysqli, 'utf8mb4');

printf("Success... %s\n", mysqli_get_host_info($mysqli));</pre> </div> <div class="example-contents"><p>The above examples will output something similar to:</p></div> <div class="example-contents screen"> <div class="cdata"><pre>
Success... localhost via TCP/IP
</pre></div> </div> </div> <div class="example" id="example-4385"> <p><strong>Example #2 Extending mysqli class</strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php

class FooMysqli extends mysqli {
    public function __construct($host, $user, $pass, $db, $port, $socket, $charset) {
        mysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT);
        parent::__construct($host, $user, $pass, $db, $port, $socket);
        $this-&gt;set_charset($charset);
    }
}

$db = new FooMysqli('localhost', 'my_user', 'my_password', 'my_db', 3306, null, 'utf8mb4');</pre> </div> </div> <div class="example" id="example-4388"> <p><strong>Example #3 Manual error handling</strong></p> <div class="example-contents"><p>If error reporting is disabled, the developer is responsible for checking and handling failures</p></div> <div class="example-contents"><p>Object-oriented style</p></div> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php

error_reporting(0);
mysqli_report(MYSQLI_REPORT_OFF);
$mysqli = new mysqli('localhost', 'my_user', 'my_password', 'my_db');
if ($mysqli-&gt;connect_errno) {
    throw new RuntimeException('mysqli connection error: ' . $mysqli-&gt;connect_error);
}

/* Set the desired charset after establishing a connection */
$mysqli-&gt;set_charset('utf8mb4');
if ($mysqli-&gt;errno) {
    throw new RuntimeException('mysqli error: ' . $mysqli-&gt;error);
}</pre> </div> <div class="example-contents"><p>Procedural style</p></div> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php

error_reporting(0);
mysqli_report(MYSQLI_REPORT_OFF);
$mysqli = mysqli_connect('localhost', 'my_user', 'my_password', 'my_db');
if (mysqli_connect_errno()) {
    throw new RuntimeException('mysqli connection error: ' . mysqli_connect_error());
}

/* Set the desired charset after establishing a connection */
mysqli_set_charset($mysqli, 'utf8mb4');
if (mysqli_errno($mysqli)) {
    throw new RuntimeException('mysqli error: ' . mysqli_error($mysqli));
}</pre> </div> </div> </div> <div class="refsect1 notes" id="refsect1-mysqli.construct-notes"> <h3 class="title">Notes</h3> <blockquote class="note">
<p><strong class="note">Note</strong>: </p>
<p class="para">MySQLnd always assumes the server default charset. This charset is sent during connection hand-shake/authentication, which mysqlnd will use.</p>
<p class="para">Libmysqlclient uses the default charset set in the <var class="filename">my.cnf</var> or by an explicit call to <span class="function"><a href="mysqli.options.html" class="function">mysqli_options()</a></span> prior to calling <span class="function"><a href="mysqli.real-connect.html" class="function">mysqli_real_connect()</a></span>, but after <span class="function"><a href="mysqli.init.html" class="function">mysqli_init()</a></span>.</p>
</blockquote> <blockquote class="note">
<p><strong class="note">Note</strong>: </p>
<p class="para"> Object-oriented style only: If the connection fails, an object is still returned. To check whether the connection failed, use either the <span class="function"><a href="mysqli.connect-error.html" class="function">mysqli_connect_error()</a></span> function or the <a href="mysqli.connect-error.html" class="link">mysqli-&gt;connect_error</a> property as in the preceding examples. </p> </blockquote> <blockquote class="note">
<p><strong class="note">Note</strong>: </p>
<p class="para"> If it is necessary to set options, such as the connection timeout, <span class="function"><a href="mysqli.real-connect.html" class="function">mysqli_real_connect()</a></span> must be used instead. </p> </blockquote> <blockquote class="note">
<p><strong class="note">Note</strong>: </p>
<p class="para"> Calling the constructor with no parameters is the same as calling <span class="function"><a href="mysqli.init.html" class="function">mysqli_init()</a></span>. </p> </blockquote> <blockquote class="note">
<p><strong class="note">Note</strong>: </p>
<p class="para"> Error "Can't create TCP/IP socket (10106)" usually means that the <a href="https://www.php.net/manual/en/ini.core.php#ini.variables-order" class="link">variables_order</a> configure directive doesn't contain character <code class="literal">E</code>. On Windows, if the environment is not copied the <code class="literal">SYSTEMROOT</code> environment variable won't be available and PHP will have problems loading Winsock. </p> </blockquote> </div> <div class="refsect1 seealso" id="refsect1-mysqli.construct-seealso"> <h3 class="title">See Also</h3> 
<ul class="simplelist"> <li class="member"><span class="function"><a href="mysqli.real-connect.html" class="function" rel="rdfs-seeAlso">mysqli_real_connect()</a> - Opens a connection to a mysql server</span></li> <li class="member"><span class="function"><a href="mysqli.options.html" class="function" rel="rdfs-seeAlso">mysqli_options()</a> - Set options</span></li> <li class="member"><span class="function"><a href="mysqli.connect-errno.html" class="function" rel="rdfs-seeAlso">mysqli_connect_errno()</a> - Returns the error code from last connect call</span></li> <li class="member"><span class="function"><a href="mysqli.connect-error.html" class="function" rel="rdfs-seeAlso">mysqli_connect_error()</a> - Returns a description of the last connection error</span></li> <li class="member"><span class="function"><a href="mysqli.close.html" class="function" rel="rdfs-seeAlso">mysqli_close()</a> - Closes a previously opened database connection</span></li> </ul> </div> </div></div>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1997&ndash;2023 The PHP Documentation Group<br>Licensed under the Creative Commons Attribution License v3.0 or later.<br>
    <a href="https://www.php.net/manual/en/mysqli.construct.php" class="_attribution-link">https://www.php.net/manual/en/mysqli.construct.php</a>
  </p>
</div>
