  <div id="layout"> <div id="layout-content"><div id="function.curl-share-setopt" class="refentry"> <div class="refnamediv"> <h1 class="refname">curl_share_setopt</h1> <p class="verinfo">(PHP 5 &gt;= 5.5.0, PHP 7, PHP 8)</p>
<p class="refpurpose"><span class="refname">curl_share_setopt</span> â€” <span class="dc-title">Set an option for a cURL share handle</span></p> </div> <div class="refsect1 description" id="refsect1-function.curl-share-setopt-description"> <h3 class="title">Description</h3> <pre class="methodsynopsis dc-description" data-language="php">curl_share_setopt(CurlShareHandle $share_handle, int $option, mixed $value): bool</pre> <p class="para rdfs-comment"> Sets an option on the given cURL share handle. </p> </div> <div class="refsect1 parameters" id="refsect1-function.curl-share-setopt-parameters"> <h3 class="title">Parameters</h3> <dl> <dt> <code class="parameter">share_handle</code> </dt> <dd> <p class="para">A cURL share handle returned by <span class="function"><a href="function.curl-share-init.html" class="function">curl_share_init()</a></span>.</p>
</dd> <dt> <code class="parameter">option</code>
</dt> <dd> 
<table class="doctable informaltable"> <thead> <tr> <th>Option</th> <th>Description</th> </tr> </thead> <tbody class="tbody"> <tr> <td style="vertical-align: top;"><strong><code>CURLSHOPT_SHARE</code></strong></td> <td style="vertical-align: top;"> Specifies a type of data that should be shared. </td> </tr> <tr> <td style="vertical-align: top;"><strong><code>CURLSHOPT_UNSHARE</code></strong></td> <td style="vertical-align: top;"> Specifies a type of data that will be no longer shared. </td> </tr> </tbody> </table> </dd> <dt> <code class="parameter">value</code>
</dt> <dd> 
<table class="doctable informaltable"> <thead> <tr> <th>Value</th> <th>Description</th> </tr> </thead> <tbody class="tbody"> <tr> <td style="vertical-align: top;"><strong><code>CURL_LOCK_DATA_COOKIE</code></strong></td> <td style="vertical-align: top;"> Shares cookie data. </td> </tr> <tr> <td style="vertical-align: top;"><strong><code>CURL_LOCK_DATA_DNS</code></strong></td> <td style="vertical-align: top;"> Shares DNS cache. Note that when you use cURL multi handles, all handles added to the same multi handle will share DNS cache by default. </td> </tr> <tr> <td style="vertical-align: top;"><strong><code>CURL_LOCK_DATA_SSL_SESSION</code></strong></td> <td style="vertical-align: top;"> Shares SSL session IDs, reducing the time spent on the SSL handshake when reconnecting to the same server. Note that SSL session IDs are reused within the same handle by default. </td> </tr> </tbody> </table> </dd> </dl> </div> <div class="refsect1 returnvalues" id="refsect1-function.curl-share-setopt-returnvalues"> <h3 class="title">Return Values</h3> <p class="para"> Returns <strong><code>true</code></strong> on success or <strong><code>false</code></strong> on failure. </p> </div> <div class="refsect1 changelog" id="refsect1-function.curl-share-setopt-changelog"> <h3 class="title">Changelog</h3> <table class="doctable informaltable"> <thead> <tr> <th>Version</th> <th>Description</th> </tr> </thead> <tbody class="tbody"> <tr> <td>8.0.0</td> <td> <code class="parameter">share_handle</code> expects a <span class="classname"><a href="class.curlsharehandle.html" class="classname">CurlShareHandle</a></span> instance now; previously, a <span class="type">resource</span> was expected. </td> </tr> </tbody> </table> </div> <div class="refsect1 examples" id="refsect1-function.curl-share-setopt-examples"> <h3 class="title">Examples</h3> 
<div class="example" id=""> <p><strong>Example #1 <span class="function"><strong>curl_share_setopt()</strong></span> example</strong></p> <div class="example-contents"><p> This example will create a cURL share handle, add two cURL handles to it, and then run them with cookie data sharing. </p></div> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
// Create cURL share handle and set it to share cookie data
$sh = curl_share_init();
curl_share_setopt($sh, CURLSHOPT_SHARE, CURL_LOCK_DATA_COOKIE);

// Initialize the first cURL handle and assign the share handle to it
$ch1 = curl_init("http://example.com/");
curl_setopt($ch1, CURLOPT_SHARE, $sh);

// Execute the first cURL handle
curl_exec($ch1);

// Initialize the second cURL handle and assign the share handle to it
$ch2 = curl_init("http://php.net/");
curl_setopt($ch2, CURLOPT_SHARE, $sh);

// Execute the second cURL handle
//  all cookies from $ch1 handle are shared with $ch2 handle
curl_exec($ch2);

// Close the cURL share handle
curl_share_close($sh);

// Close the cURL handles
curl_close($ch1);
curl_close($ch2);
?&gt;</pre> </div> </div> </div> </div></div>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1997&ndash;2023 The PHP Documentation Group<br>Licensed under the Creative Commons Attribution License v3.0 or later.<br>
    <a href="https://www.php.net/manual/en/function.curl-share-setopt.php" class="_attribution-link">https://www.php.net/manual/en/function.curl-share-setopt.php</a>
  </p>
</div>
