<h1>Deploying Wagtail</h1> <section id="on-your-server"> <h2>On your server</h2> <p>Wagtail is straightforward to deploy on modern Linux-based distributions, and should run with any of the combinations detailed in Django’s <a class="reference external" href="https://docs.djangoproject.com/en/stable/howto/deployment/" title="(in Django v4.1)"><span class="xref myst">deployment documentation</span></a>. See the section on <a class="reference internal" href="performance.html"><span class="doc std std-doc">performance</span></a> for the non-Python services we recommend.</p> </section> <section id="on-divio-cloud"> <h2>On Divio Cloud</h2> <p><a class="reference external" href="https://www.divio.com/">Divio Cloud</a> is a Dockerised cloud hosting platform for Python/Django that allows you to launch and deploy Wagtail projects in minutes. With a free account, you can create a Wagtail project. Choose from a:</p> <ul class="simple"> <li>
<a class="reference external" href="https://www.divio.com/wagtail/">site based on the Wagtail Bakery project</a>, or</li> <li>
<a class="reference external" href="https://control.divio.com/control/project/create">brand new Wagtail project</a> (see the <a class="reference external" href="https://docs.divio.com/en/latest/introduction/wagtail/">how to get started notes</a>).</li> </ul> <p>Divio Cloud also hosts a <a class="reference external" href="https://www.divio.com/wagtail/">live Wagtail Bakery demo</a> (no account required).</p> </section> <section id="on-pythonanywhere"> <h2>On PythonAnywhere</h2> <p><a class="reference external" href="https://www.pythonanywhere.com/">PythonAnywhere</a> is a Platform-as-a-Service (PaaS) focused on Python hosting and development. It allows developers to quickly develop, host, and scale applications in a cloud environment. Starting with a free plan they also provide MySQL and PostgreSQL databases as well as very flexible and affordable paid plans, so there’s all you need to host a Wagtail site. To get quickly up and running you may use the <a class="reference external" href="https://github.com/texperience/wagtail-pythonanywhere-quickstart">wagtail-pythonanywhere-quickstart</a>.</p> </section> <section id="on-google-cloud"> <h2>On Google Cloud</h2> <p><a class="reference external" href="https://cloud.google.com">Google Cloud</a> is an Infrastructure-as-a-Service (IaaS) that offers multiple managed products, supported by Python client libraries, to help you build, deploy, and monitor your applications. You can deploy Wagtail, or any Django application, in a number of ways, including on <a class="reference external" href="https://www.youtube.com/watch?v=uD9PTag2-PQ">App Engine</a> or <a class="reference external" href="https://codelabs.developers.google.com/codelabs/cloud-run-wagtail/#0">Cloud Run</a>.</p> </section> <section id="on-alwaysdata"> <h2>On alwaysdata</h2> <p><a class="reference external" href="https://www.alwaysdata.com/">alwaysdata</a> is a Platform-as-a-Service (PaaS) providing Public and Private Cloud offers. Starting with a free plan they provide MySQL/PostgreSQL databases, emails, free SSL certificates, included backups, etc.</p> <p>To get your Wagtail application running you may:</p> <ul class="simple"> <li><a class="reference external" href="https://www.alwaysdata.com/en/marketplace/wagtail/">Install Wagtail from alwaysdata Marketplace</a></li> <li><a class="reference external" href="https://help.alwaysdata.com/en/languages/python/django/">Configure a Django application</a></li> </ul> </section> <section id="on-other-paass-and-iaass"> <h2>On other PAASs and IAASs</h2> <p>We know of Wagtail sites running on <a class="reference external" href="https://spapas.github.io/2014/02/13/wagtail-tutorial/">Heroku</a>, Digital Ocean and elsewhere. If you have successfully installed Wagtail on your platform or infrastructure, please <a class="reference internal" href="../contributing/index.html"><span class="doc std std-doc">contribute</span></a> your notes to this documentation!</p> </section> <section id="deployment-tips"> <h2 id="id1">Deployment tips</h2> <section id="static-files"> <h3>Static files</h3> <p>As with all Django projects, static files are only served by the Django application server during development, when running through the <code>manage.py runserver</code> command. In production, these need to be handled separately at the web server level. See <a class="reference external" href="https://docs.djangoproject.com/en/stable/howto/static-files/deployment/" title="(in Django v4.1)"><span class="xref myst">Django’s documentation on deploying static files</span></a>.</p> <p>The JavaScript and CSS files used by the Wagtail admin frequently change between releases of Wagtail - it’s important to avoid serving outdated versions of these files due to browser or server-side caching, as this can cause hard-to-diagnose issues. We recommend enabling <a class="reference external" href="https://docs.djangoproject.com/en/stable/ref/contrib/staticfiles/#django.contrib.staticfiles.storage.ManifestStaticFilesStorage" title="(in Django v4.1)"><span class="xref myst">ManifestStaticFilesStorage</span></a> in the <code>STATICFILES_STORAGE</code> setting - this ensures that different versions of files are assigned distinct URLs.</p> </section> <section id="user-uploaded-files"> <h3>User Uploaded Files</h3> <p>Wagtail follows <a class="reference external" href="https://docs.djangoproject.com/en/stable/topics/files/" title="(in Django v4.1)"><span class="xref myst">Django’s conventions for managing uploaded files</span></a>. So by default, Wagtail uses Django’s built-in <code>FileSystemStorage</code> class which stores files on your site’s server, in the directory specified by the <code>MEDIA_ROOT</code> setting. Alternatively, Wagtail can be configured to store uploaded images and documents on a cloud storage service such as Amazon S3; this is done through the <a class="reference external" href="https://docs.djangoproject.com/en/stable/ref/settings/#std:setting-DEFAULT_FILE_STORAGE">DEFAULT_FILE_STORAGE</a> setting in conjunction with an add-on package such as <a class="reference external" href="https://django-storages.readthedocs.io/">django-storages</a>.</p> <p>When using <code>FileSystemStorage</code>, image urls are constructed starting from the path specified by the <code>MEDIA_URL</code>. In most cases, you should configure your web server to serve image files directly (without passing through Django/Wagtail). When using one of the cloud storage backends, images urls go directly to the cloud storage file url. If you would like to serve your images from a separate asset server or CDN, you can <a class="reference internal" href="images/image_serve_view.html#image-serve-view-redirect-action"><span class="std std-ref">configure the image serve view</span></a> to redirect instead.</p> <p>Document serving is controlled by the <a class="reference internal" href="../reference/settings.html#wagtaildocs-serve-method"><span class="std std-ref">WAGTAILDOCS_SERVE_METHOD</span></a> method. When using <code>FileSystemStorage</code>, documents are stored in a <code>documents</code> subdirectory within your site’s <code>MEDIA_ROOT</code>. If all your documents are public, you can set the <code>WAGTAILDOCS_SERVE_METHOD</code> to <code>direct</code> and configure your web server to serve the files itself. However, if you use Wagtail’s <span class="xref myst">Collection Privacy settings</span> to restrict access to some or all of your documents, you may or may not want to configure your web server to serve the documents directly. The default setting is <code>redirect</code> which allows Wagtail to perform any configured privacy checks before offloading serving the actual document to your web server or CDN. This means that Wagtail constructs document links that pass through Wagtail, but the final url in the user’s browser is served directly by your web server. If a user bookmarks this url, they will be able to access the file without passing through Wagtail’s privacy checks. If this is not acceptable, you may want to set the <code>WAGTAILDOCS_SERVE_METHOD</code> to <code>serve_view</code> and configure your web server so it will not serve document files itself. If you are serving documents from the cloud and need to enforce privacy settings, you should make sure the documents are not publicly accessible using the cloud service’s file url.</p> </section> <section id="cloud-storage"> <h3>Cloud storage</h3> <p>Be aware that setting up remote storage will not entirely offload file handling tasks from the application server - some Wagtail functionality requires files to be read back by the application server. In particular, original image files need to be read back whenever a new resized rendition is created, and documents may be configured to be served through a Django view in order to enforce permission checks (see <a class="reference internal" href="../reference/settings.html#wagtaildocs-serve-method"><span class="std std-ref">WAGTAILDOCS_SERVE_METHOD</span></a>).</p> <p>Note that the django-storages Amazon S3 backends (<code>storages.backends.s3boto.S3BotoStorage</code> and <code>storages.backends.s3boto3.S3Boto3Storage</code>) <strong>do not correctly handle duplicate filenames</strong> in their default configuration. When using these backends, <code>AWS_S3_FILE_OVERWRITE</code> must be set to <code>False</code>.</p> <p>If you are also serving Wagtail’s static files from remote storage (using Django’s <a class="reference external" href="https://docs.djangoproject.com/en/stable/ref/settings/#std:setting-STATICFILES_STORAGE">STATICFILES_STORAGE</a> setting), you’ll need to ensure that it is configured to serve <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS">CORS HTTP headers</a>, as current browsers will reject remotely-hosted font files that lack a valid header. For Amazon S3, refer to the documentation <a class="reference external" href="https://docs.aws.amazon.com/AmazonS3/latest/user-guide/set-permissions.html">Setting Bucket and Object Access Permissions</a>, or (for the <code>storages.backends.s3boto.S3Boto3Storage</code> backend only) add the following to your Django settings:</p> <pre data-language="python">AWS_S3_OBJECT_PARAMETERS = {
    "ACL": "public-read"
}
</pre> <p>The <code>ACL</code> parameter accepts a list of predefined configurations for Amazon S3. For more information, refer to the documentation <a class="reference external" href="https://docs.aws.amazon.com/AmazonS3/latest/dev/acl-overview.html#canned-acl">Canned ACL</a>.</p> <p>For Google Cloud Storage, create a <code>cors.json</code> configuration:</p> <pre data-language="json">[
    {
        "origin": ["*"],
        "responseHeader": ["Content-Type"],
        "method": ["GET"],
        "maxAgeSeconds": 3600
    }
]
</pre> <p>Then, apply this CORS configuration to the storage bucket:</p> <pre data-language="sh">gsutil cors set cors.json gs://$GS_BUCKET_NAME
</pre> <p>For other storage services, refer to your provider’s documentation, or the documentation for the Django storage backend library you’re using.</p> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2014-present Torchbox Ltd and individual contributors.<br>All rights are reserved.<br>Licensed under the BSD License.<br>
    <a href="https://docs.wagtail.org/en/stable/advanced_topics/deploying.html" class="_attribution-link">https://docs.wagtail.org/en/stable/advanced_topics/deploying.html</a>
  </p>
</div>
