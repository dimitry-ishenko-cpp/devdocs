<h1 class="title">Start a RethinkDB server</h1> <div class="alg-content">
<blockquote class="infobox ">
<p><strong>Want to start instances of RethinkDB on system startup?</strong> See <a href="../start-on-startup/index.html">Start RethinkDB at system startup</a> to learn how to set up RethinkDB with <code class="language-plaintext highlighter-rouge">init.d</code> or <code class="language-plaintext highlighter-rouge">systemd</code>.</p> </blockquote> <p>This document describes how to start RethinkDB from the command line in several configurations, from a single instance on one machine to multiple instances on multiple machines.</p> <div class="toc">  <ul id="markdown-toc"> <li><a href="#starting-the-server" id="markdown-toc-starting-the-server">Starting the server</a></li> <li><a href="#multiple-rethinkdb-instances-on-a-single-machine" id="markdown-toc-multiple-rethinkdb-instances-on-a-single-machine">Multiple RethinkDB instances on a single machine</a></li> <li><a href="#a-rethinkdb-cluster-using-multiple-machines" id="markdown-toc-a-rethinkdb-cluster-using-multiple-machines">A RethinkDB cluster using multiple machines</a></li> <li><a href="#troubleshooting" id="markdown-toc-troubleshooting">Troubleshooting</a></li> </ul> </div> <p><img src="https://d33wubrfki0l68.cloudfront.net/f9310a343eda5434422d17ff2f0235f0033e0543/1e5ee/assets/images/docs/api_illustrations/cluster.png" class="api_command_illustration"></p> <h2 id="starting-the-server">Starting the server</h2> <p>To start the first RethinkDB instance, run this command in your terminal:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">$ rethinkdb
info: Creating directory /home/user/rethinkdb_data
info: Listening for intracluster connections on port 29015
info: Listening for client driver connections on port 28015
info: Listening for administrative HTTP connections on port 8080
info: Server ready
</pre></div></div> <p>Note the port numbers you can use to access RethinkDB:</p> <ul> <li>Use the intracluster port (<code class="language-plaintext highlighter-rouge">29015</code> by default) to connect other nodes in the cluster to this node.</li> <li>Point your browser to the HTTP connections port (<code class="language-plaintext highlighter-rouge">8080</code> by default) to access the web interface.</li> </ul> <blockquote class="infobox ">
<p>For a complete list of options that can be passed to RethinkDB on the command line, read <a href="../cli-options/index.html">RethinkDB command line options</a> or type <code class="language-plaintext highlighter-rouge">rethinkdb --help</code> at the terminal prompt.</p> </blockquote> <h2 id="multiple-rethinkdb-instances-on-a-single-machine">Multiple RethinkDB instances on a single machine</h2> <p>Adding a node to a RethinkDB cluster is as easy as starting a new RethinkDB process and pointing it to an existing node in the cluster. Everything else is handled by the system without any additional effort required from the user.</p> <p>Now start the second RethinkDB instance on the same machine:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">$ rethinkdb --port-offset 1 --directory rethinkdb_data2 --join localhost:29015
info: Creating directory /home/user/rethinkdb_data2
info: Listening for intracluster connections on port 29016
info: Attempting connection to 1 peer...
info: Connected to server "Chaosknight" e6bfec5c-861e-4a8c-8eed-604cc124b714
info: Listening for client driver connections on port 28016
info: Listening for administrative HTTP connections on port 8081
info: Server ready
</pre></div></div> <p><strong>You now have a RethinkDB cluster!</strong> Try pointing your browser to <code class="language-plaintext highlighter-rouge">localhost:8080</code> or <code class="language-plaintext highlighter-rouge">localhost:8081</code> to access the web interface. If you click on the “Servers” tab at the top, you should see both servers in the cluster.</p> <p>You can also point the client drivers to <code class="language-plaintext highlighter-rouge">localhost:28015</code> or <code class="language-plaintext highlighter-rouge">localhost:28016</code> to start running queries (it doesn’t matter which node you use—the cluster will automatically route all commands to appropriate nodes).</p> <p>Note the command line parameters we used to start the second node:</p> <ul> <li>
<code class="language-plaintext highlighter-rouge">--port-offset</code>—increment all ports by 1 so the two nodes don’t try to use the same ports on one machine.</li> <li>
<code class="language-plaintext highlighter-rouge">--directory</code>—use a different data directory so the two nodes don’t try to access the same files.</li> <li>
<code class="language-plaintext highlighter-rouge">--join</code>—tell our new RethinkDB instance to connect to another instance (in this case, <code class="language-plaintext highlighter-rouge">localhost:29015</code>).</li> </ul> <p>For a complete list of options that can be passed to RethinkDB on the command line, read <a href="../cli-options/index.html">RethinkDB command line options</a>, or type <code class="language-plaintext highlighter-rouge">rethinkdb --help</code> at the terminal prompt.</p> <blockquote class="infobox ">
<p><strong>Having trouble accessing the web interface?</strong> Try restarting both of your RethinkDB instances with an additional <code class="language-plaintext highlighter-rouge">--bind all</code> parameter.</p> </blockquote> <p>In production, you’d likely want to specify options via configuration files rather than command line options; read the <a href="../config-file/index.html">configuration file</a> documentation for details on the format and available options. Also, you’d want your RethinkDB instances to come online at system startup. See <a href="../start-on-startup/index.html">Start RethinkDB at system startup</a> to learn how to set up RethinkDB with <code class="language-plaintext highlighter-rouge">init.d</code> or <code class="language-plaintext highlighter-rouge">systemd</code>.</p> <blockquote class="infobox ">
<p><strong>Want to connect a third node?</strong> You can join it with either of the two existing nodes in the cluster.</p> </blockquote> <h2 id="a-rethinkdb-cluster-using-multiple-machines">A RethinkDB cluster using multiple machines</h2> <p>Starting a cluster on multiple machines or VMs is even easier than starting it on a single machine, because you don’t have to worry about port and directory conflicts.</p> <p>First, start RethinkDB on the first machine:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">$ rethinkdb --bind all
</pre></div></div> <p>Then start RethinkDB on the second machine:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="">$ rethinkdb --join IP_OF_FIRST_MACHINE:29015 --bind all
</pre></div></div> <p><strong>You now have a RethinkDB cluster!</strong></p> <p>Note that by default, RethinkDB only opens connections bound to <code class="language-plaintext highlighter-rouge">localhost</code> in order to prevent unauthorized clients on the network from connecting to the server. The <code class="language-plaintext highlighter-rouge">--bind all</code> option allows connections from anywhere on the network. It works well if the network is protected.</p> <p>If your network is open to the internet, you should take additional precautions. See the <a href="../security/index.html">security page</a> for more details.</p> <h2 id="troubleshooting">Troubleshooting</h2> <blockquote class="infobox ">
<p><strong>Seeing a ‘received invalid clustering header’ message?</strong> RethinkDB uses three ports to operate—the HTTP web UI port, the client drivers port, and the intracluster traffic port. You can connect the browser to the web UI port to administer the cluster right from your browser, and connect the client drivers to the client driver port to run queries from your application. If you’re running a cluster, different RethinkDB nodes communicate with each other via the intracluster traffic port.</p> <p>The message <code class="language-plaintext highlighter-rouge">received invalid clustering header</code> means there is a port mismatch, and something is connecting to the wrong port. For example, it’s common to get this message if you accidentally point the browser or connect the client drivers to the intracluster traffic port.</p> </blockquote> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; RethinkDB contributors<br>Licensed under the Creative Commons Attribution-ShareAlike 3.0 Unported License.<br>
    <a href="https://rethinkdb.com/docs/start-a-server/" class="_attribution-link">https://rethinkdb.com/docs/start-a-server/</a>
  </p>
</div>
