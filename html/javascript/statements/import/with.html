<header><h1>Import attributes</h1></header><div class="section-content">
<div class="notecard note" id="sect1"> <p><strong>Note:</strong> A previous version of this proposal used the <code>assert</code> keyword instead of <code>with</code>. The assertion feature is now non-standard. Check the <a href="#browser_compatibility">browser compatibility table</a> for details.</p> </div> <p>The <strong>import attributes</strong> feature instructs the runtime about how a module should be loaded, including the behavior of module resolution, fetching, parsing, and evaluation. It's supported in <a href="../import.html"><code>import</code></a> declarations, <a href="../export.html#re-exporting_aggregating"><code>export...from</code></a> declarations, and dynamic <a href="../../operators/import.html"><code>import()</code></a>.</p>
</div>
<section aria-labelledby="syntax"><h2 id="syntax">Syntax</h2>
<div class="section-content">
<p>Attributes can be attached to any kind of <code>import</code>/<code>export from</code> statement, including default import, namespace import, etc. They follow the module specifier string and are prefixed by the <code>with</code> keyword.</p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="XNjF36vhnHMYMJkS2vePvWw29bk+IWCzMHxCIncJI3M=" data-language="js"><span class="token keyword">import</span> <span class="token punctuation">{</span> names <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"module-name"</span> <span class="token keyword">with</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> names <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"module-name"</span> <span class="token keyword">with</span> <span class="token punctuation">{</span> <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">"data"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> names <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"module-name"</span> <span class="token keyword">with</span> <span class="token punctuation">{</span> <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">"data"</span><span class="token punctuation">,</span> <span class="token literal-property property">key2</span><span class="token operator">:</span> <span class="token string">"data2"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> names <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"module-name"</span> <span class="token keyword">with</span> <span class="token punctuation">{</span> <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">"data"</span><span class="token punctuation">,</span> <span class="token literal-property property">key2</span><span class="token operator">:</span> <span class="token string">"data2"</span><span class="token punctuation">,</span> <span class="token comment">/* …, */</span> <span class="token literal-property property">keyN</span><span class="token operator">:</span> <span class="token string">"dataN"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span> names <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"module-name"</span> <span class="token keyword">with</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> names <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"module-name"</span> <span class="token keyword">with</span> <span class="token punctuation">{</span> <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">"data"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> names <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"module-name"</span> <span class="token keyword">with</span> <span class="token punctuation">{</span> <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">"data"</span><span class="token punctuation">,</span> <span class="token literal-property property">key2</span><span class="token operator">:</span> <span class="token string">"data2"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> names <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"module-name"</span> <span class="token keyword">with</span> <span class="token punctuation">{</span> <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">"data"</span><span class="token punctuation">,</span> <span class="token literal-property property">key2</span><span class="token operator">:</span> <span class="token string">"data2"</span><span class="token punctuation">,</span> <span class="token comment">/* …, */</span> <span class="token literal-property property">keyN</span><span class="token operator">:</span> <span class="token string">"dataN"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</pre>
</div>
</div></section><section aria-labelledby="parameters"><h3 id="parameters">Parameters</h3>
<div class="section-content"><dl> <dt id="keyn"><a href="#keyn"><code>keyN</code></a></dt> <dd> <p>An attribute key. Can be an identifier or a string literal. All keys must be unique and must be known to the runtime.</p> </dd> <dt id="datan"><a href="#datan"><code>"dataN"</code></a></dt> <dd> <p>An attribute value. Must be a string literal.</p> </dd> </dl></div></section><section aria-labelledby="description"><h2 id="description">Description</h2>
<div class="section-content">
<p>Import attributes tell the runtime how a particular module should be loaded.</p> <p>The primary use case is to load non-JS modules, such as JSON modules and CSS modules. Consider the following statement:</p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="t+nOoFZ+kJBxr5XS+gzaeFwyTFwFjleTvxQoIMfslFQ=" data-language="js"><span class="token keyword">import</span> data <span class="token keyword">from</span> <span class="token string">"https://example.com/data.json"</span><span class="token punctuation">;</span>
</pre>
</div> <p>On the web, each import statement results in a HTTP request. The response is then prepared into a JavaScript value and made available to the program by the runtime. For example, the response may look like this:</p> <div class="code-example">
<div class="example-header"><span class="language-name">http</span></div>
<pre data-signature="kihIIHRcwsLjEAArnP/xiloyZ7vUSZkaswLFq+BQq8E=" data-language="http"><span class="token response-status"><span class="token http-version property">HTTP/1.1</span> <span class="token status-code number">200</span> <span class="token reason-phrase string">OK</span></span>
<span class="token header"><span class="token header-name keyword">Content-Type</span><span class="token punctuation">:</span> <span class="token header-value">application/json; charset=utf-8</span></span>
...
{"name":"John"}
</pre>
</div> <p>Modules are identified and parsed only according to their served <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types">MIME type</a> — the file extension in the URL cannot be used to identify a file's type. In this case, the MIME type is <code>application/json</code>, which tells the browser that the file is JSON and must be parsed as JSON. If, for some reason (e.g. the server is hijacked or bogus), the MIME type in the server response is set to <code>text/javascript</code> (for JavaScript source), then the file would be parsed and executed as code. If the "JSON" file actually contains malicious code, the <code>import</code> declaration would unintentionally execute external code, posing a serious security threat.</p> <p>Import attributes fix this problem by allowing the author to explicitly specify how a module should be validated. For example, the import statement above, which lacks an attribute, would actually fail:</p> <pre data-language="plain">Failed to load module script: Expected a JavaScript module script but the server responded with a MIME type of "application/json". Strict MIME type checking is enforced for module scripts per HTML spec.
</pre> <p>Instead, you must provide an attribute to tell the runtime that this file must contain JSON. To validate the module's type (via MIME type), you use the attribute key called <code>type</code>. To validate that the module is a JSON module, the value is <code>"json"</code>.</p> <div class="notecard note" id="sect2"> <p><strong>Note:</strong> The actual <code>type</code> attribute value does not correspond directly to the MIME type. It's separately specified by the <a href="https://html.spec.whatwg.org/multipage/webappapis.html#module-type-allowed" target="_blank">HTML specification</a>.</p> </div> <p>Therefore, the code above should be re-written as:</p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="l0pJKUGJKua5AmwIqLCWHsO87QROXPOrRn5vJIHJ348=" data-language="js"><span class="token keyword">import</span> data <span class="token keyword">from</span> <span class="token string">"https://example.com/data.json"</span> <span class="token keyword">with</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"json"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</pre>
</div> <p>The <code>type</code> attribute changes how the module is fetched (the browser sends the request with <code><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept"><code>Accept</code></a>: application/json</code> header), but does <em>not</em> change how the module is parsed or evaluated. The runtime already knows to parse the module as JSON given the response MIME type. It only uses the attribute to do <em>after-the-fact</em> checking that the <code>data.json</code> module is, in fact, a JSON module. For example, if the response header changes to <code>Content-Type: text/javascript</code> instead, the program will fail with a similar error as above.</p> <p>The specification explicitly calls out <code>type: "json"</code> to be supported — if a module is asserted to be <code>type: "json"</code> and the runtime does not fail this import, then it must be parsed as JSON. However, there's no behavior requirement otherwise: for imports without a <code>type: "json"</code> attribute, the runtime may still parse it as JSON if security is not an issue in this environment. Browsers, on the other hand, implicitly assume that the module is JavaScript, and fail if the module is not JavaScript (for example, JSON). This ensures that module types are always strictly validated and prevents any security risks. In reality, non-browser runtimes such as Node and Deno align with browser semantics and enforce <code>type</code> for JSON modules.</p> <p>The <code>type</code> attribute also supports other module types. For example, the HTML spec also defines the <code>css</code> type, which imports a <a href="https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleSheet"><code>CSSStyleSheet</code></a> object:</p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="fQWGwoT15YolmJbQsJK9SuXfx/ivkT2AXiChXfPv8QA=" data-language="js"><span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">"https://example.com/styles.css"</span> <span class="token keyword">with</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"css"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</pre>
</div> <p>The attributes syntax is designed to be extensible — although only <code>type</code> is specified by the language, the runtime can read and process other attributes. An attribute can change the runtime's behavior at every stage of the module loading process:</p> <ul> <li>Resolution: the attribute is part of the module specifier (the string in the <code>from</code> clause). Therefore, given the same string path, different attributes may lead to entirely different modules being loaded. For example, <a href="https://devblogs.microsoft.com/typescript/announcing-typescript-5-3/#stable-support-resolution-mode-in-import-types" target="_blank">TypeScript supports the <code>resolution-mode</code> attribute</a>. <div class="code-example">
<div class="example-header"><span class="language-name">ts</span></div>
<pre data-signature="6lx+37CmmY/drLH1j5J6kLxd3VmeHd1NHlIdlgcviOE=" data-language="ts"><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> TypeFromRequire <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"pkg"</span> <span class="token keyword">with</span> <span class="token punctuation">{</span> <span class="token string-property property">"resolution-mode"</span><span class="token operator">:</span> <span class="token string">"require"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</pre>
</div> </li> <li>Fetching: for example, CSS modules are fetched with the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request/destination"><code>destination</code></a> set to <code>"style"</code>, and JSON modules are fetched with <code>destination: "json"</code>. This means given the same destination URL, the server may still return different content.</li> <li>Parsing and evaluation: the runtime may use the attribute to determine how to parse and evaluate the module.</li> </ul> <p>However, you cannot use unknown attributes — the runtime throws an error if it encounters an unknown attribute.</p>
</div></section><section aria-labelledby="examples"><h2 id="examples">Examples</h2>
</section><section aria-labelledby="importing_json_modules_with_the_type_attribute"><h3 id="importing_json_modules_with_the_type_attribute">Importing JSON modules with the type attribute</h3>
<div class="section-content">
<p>In <code>data.json</code>:</p> <div class="code-example">
<div class="example-header"><span class="language-name">json</span></div>
<pre data-signature="uC+7TkFO1qnc00AQGPryGCZiib9eMANp4oIxaPfvz/4=" data-language="json"><span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"John"</span>
<span class="token punctuation">}</span>
</pre>
</div> <p>In <code>index.html</code>:</p> <div class="code-example">
<div class="example-header"><span class="language-name">html</span></div>
<pre data-signature="qEp9xGIz/xwirJ8bc3RfIM6Qx5niU1ASthtDzhjRI8Y=" data-language="html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">doctype</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en-US<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
      <span class="token keyword">import</span> data <span class="token keyword">from</span> <span class="token string">"./data.json"</span> <span class="token keyword">with</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"json"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> p <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      p<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">name: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</pre>
</div> <p>Start a local HTTP server (see <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules#troubleshooting">troubleshooting</a>) and go to the <code>index.html</code> page. You should see <code>John</code> on the page.</p> <div class="notecard note" id="sect3"> <p><strong>Note:</strong> JSON modules only have one default export. You cannot do named imports from them (like <code>import { name } from "data.json"</code>).</p> </div>
</div></section><h2 id="specifications">Specifications</h2>
<div class="notecard warning">
<strong>No specification found</strong><p>No specification data found for <code>javascript.statements.import.import_attributes</code>.<br><a href="#on-github">Check for problems with this page</a> or contribute a missing <code>spec_url</code> to <a href="https://github.com/mdn/browser-compat-data">mdn/browser-compat-data</a>. Also make sure the specification is included in <a href="https://github.com/w3c/browser-specs">w3c/browser-specs</a>.</p>
</div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
<th colspan="2">Server</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Opera</th>
<th>Safari</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
<th>WebView Android</th>
<th>Deno</th>
<th>Node.js</th>
</tr>
</thead>
<tbody>
<tr>
<th><code>with</code></th>
<td class="bc-supports-yes">123</td>
<td class="bc-supports-yes">123</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">109</td>
<td class="bc-supports-yes">17.2</td>
<td class="bc-supports-yes">123</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">82</td>
<td class="bc-supports-yes">17.2</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">123</td>
<td class="bc-supports-yes">1.37</td>
<td class="bc-supports-yes">20.10.0</td>
</tr>
<tr>
<th><code>type_css</code></th>
<td class="bc-supports-yes">123</td>
<td class="bc-supports-yes">123</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">109</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">123</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">82</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">123</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
</tr>
<tr>
<th><code>type_json</code></th>
<td class="bc-supports-yes">123</td>
<td class="bc-supports-yes">123</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">109</td>
<td class="bc-supports-yes">17.2</td>
<td class="bc-supports-yes">123</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">82</td>
<td class="bc-supports-yes">17.2</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">123</td>
<td class="bc-supports-yes">1.37</td>
<td class="bc-supports-yes">20.10.0</td>
</tr>
</tbody>
</table></div>
<section aria-labelledby="see_also"><h2 id="see_also">See also</h2>
<div class="section-content"><ul> <li><a href="../import.html"><code>import</code></a></li> <li><a href="../export.html"><code>export</code></a></li> <li><a href="../../operators/import.html"><code>import()</code></a></li> <li><a href="https://github.com/tc39/proposal-import-attributes" target="_blank">Import attributes proposal</a></li> <li><a href="https://github.com/tc39/proposal-json-modules" target="_blank">JSON modules proposal</a></li> </ul></div></section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import/with" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import/with</a>
  </p>
</div>
