<div class="sphx-glr-download-link-note admonition note"> <p class="admonition-title">Note</p> <p>Click <a class="reference internal" href="#sphx-glr-download-auto-examples-inspection-plot-permutation-importance-py"><span class="std std-ref">here</span></a> to download the full example code or to run this example in your browser via Binder</p> </div> <section class="sphx-glr-example-title" id="permutation-importance-vs-random-forest-feature-importance-mdi"> <h1 id="sphx-glr-auto-examples-inspection-plot-permutation-importance-py">Permutation Importance vs Random Forest Feature Importance (MDI)</h1> <p>In this example, we will compare the impurity-based feature importance of <a class="reference internal" href="../../modules/generated/sklearn.ensemble.randomforestclassifier.html#sklearn.ensemble.RandomForestClassifier" title="sklearn.ensemble.RandomForestClassifier"><code>RandomForestClassifier</code></a> with the permutation importance on the titanic dataset using <a class="reference internal" href="../../modules/generated/sklearn.inspection.permutation_importance.html#sklearn.inspection.permutation_importance" title="sklearn.inspection.permutation_importance"><code>permutation_importance</code></a>. We will show that the impurity-based feature importance can inflate the importance of numerical features.</p> <p>Furthermore, the impurity-based feature importance of random forests suffers from being computed on statistics derived from the training dataset: the importances can be high even for features that are not predictive of the target variable, as long as the model has the capacity to use them to overfit.</p> <p>This example shows how to use Permutation Importances as an alternative that can mitigate those limitations.</p> <aside class="topic"> <p class="topic-title">References:</p> <ul class="simple"> <li><a class="reference external" href="https://doi.org/10.1023/A:1010933404324">L. Breiman, “Random Forests”, Machine Learning, 45(1), 5-32, 2001.</a></li> </ul> </aside> <pre data-language="python">import numpy as np
</pre> <section id="data-loading-and-feature-engineering"> <h2>Data Loading and Feature Engineering</h2> <p>Let’s use pandas to load a copy of the titanic dataset. The following shows how to apply separate preprocessing on numerical and categorical features.</p> <p>We further include two random variables that are not correlated in any way with the target variable (<code>survived</code>):</p> <ul class="simple"> <li>
<code>random_num</code> is a high cardinality numerical variable (as many unique values as records).</li> <li>
<code>random_cat</code> is a low cardinality categorical variable (3 possible values).</li> </ul> <pre data-language="python">from sklearn.datasets import fetch_openml
from sklearn.model_selection import train_test_split

X, y = fetch_openml("titanic", version=1, as_frame=True, return_X_y=True)
rng = np.random.RandomState(seed=42)
X["random_cat"] = rng.randint(3, size=X.shape[0])
X["random_num"] = rng.randn(X.shape[0])

categorical_columns = ["pclass", "sex", "embarked", "random_cat"]
numerical_columns = ["age", "sibsp", "parch", "fare", "random_num"]

X = X[categorical_columns + numerical_columns]
X_train, X_test, y_train, y_test = train_test_split(X, y, stratify=y, random_state=42)
</pre> <p>We define a predictive model based on a random forest. Therefore, we will make the following preprocessing steps:</p> <ul class="simple"> <li>use <a class="reference internal" href="../../modules/generated/sklearn.preprocessing.ordinalencoder.html#sklearn.preprocessing.OrdinalEncoder" title="sklearn.preprocessing.OrdinalEncoder"><code>OrdinalEncoder</code></a> to encode the categorical features;</li> <li>use <a class="reference internal" href="../../modules/generated/sklearn.impute.simpleimputer.html#sklearn.impute.SimpleImputer" title="sklearn.impute.SimpleImputer"><code>SimpleImputer</code></a> to fill missing values for numerical features using a mean strategy.</li> </ul> <pre data-language="python">from sklearn.ensemble import RandomForestClassifier
from sklearn.impute import SimpleImputer
from sklearn.compose import ColumnTransformer
from sklearn.pipeline import Pipeline
from sklearn.preprocessing import OrdinalEncoder

categorical_encoder = OrdinalEncoder(
    handle_unknown="use_encoded_value", unknown_value=-1, encoded_missing_value=-1
)
numerical_pipe = SimpleImputer(strategy="mean")

preprocessing = ColumnTransformer(
    [
        ("cat", categorical_encoder, categorical_columns),
        ("num", numerical_pipe, numerical_columns),
    ],
    verbose_feature_names_out=False,
)

rf = Pipeline(
    [
        ("preprocess", preprocessing),
        ("classifier", RandomForestClassifier(random_state=42)),
    ]
)
rf.fit(X_train, y_train)
</pre> <div class="output_subarea output_html rendered_html output_result"> <div id="sk-container-id-29" class="sk-top-container">
<div class="sk-text-repr-fallback">
<pre>Pipeline(steps=[('preprocess',
                 ColumnTransformer(transformers=[('cat',
                                                  OrdinalEncoder(encoded_missing_value=-1,
                                                                 handle_unknown='use_encoded_value',
                                                                 unknown_value=-1),
                                                  ['pclass', 'sex', 'embarked',
                                                   'random_cat']),
                                                 ('num', SimpleImputer(),
                                                  ['age', 'sibsp', 'parch',
                                                   'fare', 'random_num'])],
                                   verbose_feature_names_out=False)),
                ('classifier', RandomForestClassifier(random_state=42))])</pre>
<b>In a Jupyter environment, please rerun this cell to show the HTML representation or trust the notebook. <br>On GitHub, the HTML representation is unable to render, please try loading this page with nbviewer.org.</b>
</div>
<div class="sk-container" hidden><div class="sk-item sk-dashed-wrapped">
<div class="sk-label-container"><div class="sk-label sk-toggleable">
<input class="sk-toggleable__control sk-hidden--visually" id="sk-estimator-id-138" type="checkbox"><label for="sk-estimator-id-138" class="sk-toggleable__label sk-toggleable__label-arrow">Pipeline</label><div class="sk-toggleable__content"><pre>Pipeline(steps=[('preprocess',
                 ColumnTransformer(transformers=[('cat',
                                                  OrdinalEncoder(encoded_missing_value=-1,
                                                                 handle_unknown='use_encoded_value',
                                                                 unknown_value=-1),
                                                  ['pclass', 'sex', 'embarked',
                                                   'random_cat']),
                                                 ('num', SimpleImputer(),
                                                  ['age', 'sibsp', 'parch',
                                                   'fare', 'random_num'])],
                                   verbose_feature_names_out=False)),
                ('classifier', RandomForestClassifier(random_state=42))])</pre></div>
</div></div>
<div class="sk-serial">
<div class="sk-item sk-dashed-wrapped">
<div class="sk-label-container"><div class="sk-label sk-toggleable">
<input class="sk-toggleable__control sk-hidden--visually" id="sk-estimator-id-139" type="checkbox"><label for="sk-estimator-id-139" class="sk-toggleable__label sk-toggleable__label-arrow">preprocess: ColumnTransformer</label><div class="sk-toggleable__content"><pre>ColumnTransformer(transformers=[('cat',
                                 OrdinalEncoder(encoded_missing_value=-1,
                                                handle_unknown='use_encoded_value',
                                                unknown_value=-1),
                                 ['pclass', 'sex', 'embarked', 'random_cat']),
                                ('num', SimpleImputer(),
                                 ['age', 'sibsp', 'parch', 'fare',
                                  'random_num'])],
                  verbose_feature_names_out=False)</pre></div>
</div></div>
<div class="sk-parallel">
<div class="sk-parallel-item"><div class="sk-item">
<div class="sk-label-container"><div class="sk-label sk-toggleable">
<input class="sk-toggleable__control sk-hidden--visually" id="sk-estimator-id-140" type="checkbox"><label for="sk-estimator-id-140" class="sk-toggleable__label sk-toggleable__label-arrow">cat</label><div class="sk-toggleable__content"><pre>['pclass', 'sex', 'embarked', 'random_cat']</pre></div>
</div></div>
<div class="sk-serial"><div class="sk-item"><div class="sk-estimator sk-toggleable">
<input class="sk-toggleable__control sk-hidden--visually" id="sk-estimator-id-141" type="checkbox"><label for="sk-estimator-id-141" class="sk-toggleable__label sk-toggleable__label-arrow">OrdinalEncoder</label><div class="sk-toggleable__content"><pre>OrdinalEncoder(encoded_missing_value=-1, handle_unknown='use_encoded_value',
               unknown_value=-1)</pre></div>
</div></div></div>
</div></div>
<div class="sk-parallel-item"><div class="sk-item">
<div class="sk-label-container"><div class="sk-label sk-toggleable">
<input class="sk-toggleable__control sk-hidden--visually" id="sk-estimator-id-142" type="checkbox"><label for="sk-estimator-id-142" class="sk-toggleable__label sk-toggleable__label-arrow">num</label><div class="sk-toggleable__content"><pre>['age', 'sibsp', 'parch', 'fare', 'random_num']</pre></div>
</div></div>
<div class="sk-serial"><div class="sk-item"><div class="sk-estimator sk-toggleable">
<input class="sk-toggleable__control sk-hidden--visually" id="sk-estimator-id-143" type="checkbox"><label for="sk-estimator-id-143" class="sk-toggleable__label sk-toggleable__label-arrow">SimpleImputer</label><div class="sk-toggleable__content"><pre>SimpleImputer()</pre></div>
</div></div></div>
</div></div>
</div>
</div>
<div class="sk-item"><div class="sk-estimator sk-toggleable">
<input class="sk-toggleable__control sk-hidden--visually" id="sk-estimator-id-144" type="checkbox"><label for="sk-estimator-id-144" class="sk-toggleable__label sk-toggleable__label-arrow">RandomForestClassifier</label><div class="sk-toggleable__content"><pre>RandomForestClassifier(random_state=42)</pre></div>
</div></div>
</div>
</div></div>
</div> </div> <br> <br></section> <section id="accuracy-of-the-model"> <h2>Accuracy of the Model</h2> <p>Prior to inspecting the feature importances, it is important to check that the model predictive performance is high enough. Indeed there would be little interest of inspecting the important features of a non-predictive model.</p> <p>Here one can observe that the train accuracy is very high (the forest model has enough capacity to completely memorize the training set) but it can still generalize well enough to the test set thanks to the built-in bagging of random forests.</p> <p>It might be possible to trade some accuracy on the training set for a slightly better accuracy on the test set by limiting the capacity of the trees (for instance by setting <code>min_samples_leaf=5</code> or <code>min_samples_leaf=10</code>) so as to limit overfitting while not introducing too much underfitting.</p> <p>However let’s keep our high capacity random forest model for now so as to illustrate some pitfalls with feature importance on variables with many unique values.</p> <pre data-language="python">print(f"RF train accuracy: {rf.score(X_train, y_train):.3f}")
print(f"RF test accuracy: {rf.score(X_test, y_test):.3f}")
</pre> <pre data-language="none">RF train accuracy: 1.000
RF test accuracy: 0.814
</pre> </section> <section id="tree-s-feature-importance-from-mean-decrease-in-impurity-mdi"> <h2>Tree’s Feature Importance from Mean Decrease in Impurity (MDI)</h2> <p>The impurity-based feature importance ranks the numerical features to be the most important features. As a result, the non-predictive <code>random_num</code> variable is ranked as one of the most important features!</p> <p>This problem stems from two limitations of impurity-based feature importances:</p> <ul class="simple"> <li>impurity-based importances are biased towards high cardinality features;</li> <li>impurity-based importances are computed on training set statistics and therefore do not reflect the ability of feature to be useful to make predictions that generalize to the test set (when the model has enough capacity).</li> </ul> <p>The bias towards high cardinality features explains why the <code>random_num</code> has a really large importance in comparison with <code>random_cat</code> while we would expect both random features to have a null importance.</p> <p>The fact that we use training set statistics explains why both the <code>random_num</code> and <code>random_cat</code> features have a non-null importance.</p> <pre data-language="python">import pandas as pd

feature_names = rf[:-1].get_feature_names_out()

mdi_importances = pd.Series(
    rf[-1].feature_importances_, index=feature_names
).sort_values(ascending=True)
</pre> <pre data-language="python">ax = mdi_importances.plot.barh()
ax.set_title("Random Forest Feature Importances (MDI)")
ax.figure.tight_layout()
</pre> <img src="data:image/png;base64,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" srcset="../../_images/sphx_glr_plot_permutation_importance_001.png" alt="Random Forest Feature Importances (MDI)" class="sphx-glr-single-img"><p>As an alternative, the permutation importances of <code>rf</code> are computed on a held out test set. This shows that the low cardinality categorical feature, <code>sex</code> and <code>pclass</code> are the most important feature. Indeed, permuting the values of these features will lead to most decrease in accuracy score of the model on the test set.</p> <p>Also note that both random features have very low importances (close to 0) as expected.</p> <pre data-language="python">from sklearn.inspection import permutation_importance

result = permutation_importance(
    rf, X_test, y_test, n_repeats=10, random_state=42, n_jobs=2
)

sorted_importances_idx = result.importances_mean.argsort()
importances = pd.DataFrame(
    result.importances[sorted_importances_idx].T,
    columns=X.columns[sorted_importances_idx],
)
ax = importances.plot.box(vert=False, whis=10)
ax.set_title("Permutation Importances (test set)")
ax.axvline(x=0, color="k", linestyle="--")
ax.set_xlabel("Decrease in accuracy score")
ax.figure.tight_layout()
</pre> <img src="data:image/png;base64,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" srcset="../../_images/sphx_glr_plot_permutation_importance_002.png" alt="Permutation Importances (test set)" class="sphx-glr-single-img"><p>It is also possible to compute the permutation importances on the training set. This reveals that <code>random_num</code> and <code>random_cat</code> get a significantly higher importance ranking than when computed on the test set. The difference between those two plots is a confirmation that the RF model has enough capacity to use that random numerical and categorical features to overfit.</p> <pre data-language="python">result = permutation_importance(
    rf, X_train, y_train, n_repeats=10, random_state=42, n_jobs=2
)

sorted_importances_idx = result.importances_mean.argsort()
importances = pd.DataFrame(
    result.importances[sorted_importances_idx].T,
    columns=X.columns[sorted_importances_idx],
)
ax = importances.plot.box(vert=False, whis=10)
ax.set_title("Permutation Importances (train set)")
ax.axvline(x=0, color="k", linestyle="--")
ax.set_xlabel("Decrease in accuracy score")
ax.figure.tight_layout()
</pre> <img src="data:image/png;base64,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" srcset="../../_images/sphx_glr_plot_permutation_importance_003.png" alt="Permutation Importances (train set)" class="sphx-glr-single-img"><p>We can further retry the experiment by limiting the capacity of the trees to overfit by setting <code>min_samples_leaf</code> at 20 data points.</p> <pre data-language="python">rf.set_params(classifier__min_samples_leaf=20).fit(X_train, y_train)
</pre> <div class="output_subarea output_html rendered_html output_result"> <div id="sk-container-id-30" class="sk-top-container">
<div class="sk-text-repr-fallback">
<pre>Pipeline(steps=[('preprocess',
                 ColumnTransformer(transformers=[('cat',
                                                  OrdinalEncoder(encoded_missing_value=-1,
                                                                 handle_unknown='use_encoded_value',
                                                                 unknown_value=-1),
                                                  ['pclass', 'sex', 'embarked',
                                                   'random_cat']),
                                                 ('num', SimpleImputer(),
                                                  ['age', 'sibsp', 'parch',
                                                   'fare', 'random_num'])],
                                   verbose_feature_names_out=False)),
                ('classifier',
                 RandomForestClassifier(min_samples_leaf=20, random_state=42))])</pre>
<b>In a Jupyter environment, please rerun this cell to show the HTML representation or trust the notebook. <br>On GitHub, the HTML representation is unable to render, please try loading this page with nbviewer.org.</b>
</div>
<div class="sk-container" hidden><div class="sk-item sk-dashed-wrapped">
<div class="sk-label-container"><div class="sk-label sk-toggleable">
<input class="sk-toggleable__control sk-hidden--visually" id="sk-estimator-id-145" type="checkbox"><label for="sk-estimator-id-145" class="sk-toggleable__label sk-toggleable__label-arrow">Pipeline</label><div class="sk-toggleable__content"><pre>Pipeline(steps=[('preprocess',
                 ColumnTransformer(transformers=[('cat',
                                                  OrdinalEncoder(encoded_missing_value=-1,
                                                                 handle_unknown='use_encoded_value',
                                                                 unknown_value=-1),
                                                  ['pclass', 'sex', 'embarked',
                                                   'random_cat']),
                                                 ('num', SimpleImputer(),
                                                  ['age', 'sibsp', 'parch',
                                                   'fare', 'random_num'])],
                                   verbose_feature_names_out=False)),
                ('classifier',
                 RandomForestClassifier(min_samples_leaf=20, random_state=42))])</pre></div>
</div></div>
<div class="sk-serial">
<div class="sk-item sk-dashed-wrapped">
<div class="sk-label-container"><div class="sk-label sk-toggleable">
<input class="sk-toggleable__control sk-hidden--visually" id="sk-estimator-id-146" type="checkbox"><label for="sk-estimator-id-146" class="sk-toggleable__label sk-toggleable__label-arrow">preprocess: ColumnTransformer</label><div class="sk-toggleable__content"><pre>ColumnTransformer(transformers=[('cat',
                                 OrdinalEncoder(encoded_missing_value=-1,
                                                handle_unknown='use_encoded_value',
                                                unknown_value=-1),
                                 ['pclass', 'sex', 'embarked', 'random_cat']),
                                ('num', SimpleImputer(),
                                 ['age', 'sibsp', 'parch', 'fare',
                                  'random_num'])],
                  verbose_feature_names_out=False)</pre></div>
</div></div>
<div class="sk-parallel">
<div class="sk-parallel-item"><div class="sk-item">
<div class="sk-label-container"><div class="sk-label sk-toggleable">
<input class="sk-toggleable__control sk-hidden--visually" id="sk-estimator-id-147" type="checkbox"><label for="sk-estimator-id-147" class="sk-toggleable__label sk-toggleable__label-arrow">cat</label><div class="sk-toggleable__content"><pre>['pclass', 'sex', 'embarked', 'random_cat']</pre></div>
</div></div>
<div class="sk-serial"><div class="sk-item"><div class="sk-estimator sk-toggleable">
<input class="sk-toggleable__control sk-hidden--visually" id="sk-estimator-id-148" type="checkbox"><label for="sk-estimator-id-148" class="sk-toggleable__label sk-toggleable__label-arrow">OrdinalEncoder</label><div class="sk-toggleable__content"><pre>OrdinalEncoder(encoded_missing_value=-1, handle_unknown='use_encoded_value',
               unknown_value=-1)</pre></div>
</div></div></div>
</div></div>
<div class="sk-parallel-item"><div class="sk-item">
<div class="sk-label-container"><div class="sk-label sk-toggleable">
<input class="sk-toggleable__control sk-hidden--visually" id="sk-estimator-id-149" type="checkbox"><label for="sk-estimator-id-149" class="sk-toggleable__label sk-toggleable__label-arrow">num</label><div class="sk-toggleable__content"><pre>['age', 'sibsp', 'parch', 'fare', 'random_num']</pre></div>
</div></div>
<div class="sk-serial"><div class="sk-item"><div class="sk-estimator sk-toggleable">
<input class="sk-toggleable__control sk-hidden--visually" id="sk-estimator-id-150" type="checkbox"><label for="sk-estimator-id-150" class="sk-toggleable__label sk-toggleable__label-arrow">SimpleImputer</label><div class="sk-toggleable__content"><pre>SimpleImputer()</pre></div>
</div></div></div>
</div></div>
</div>
</div>
<div class="sk-item"><div class="sk-estimator sk-toggleable">
<input class="sk-toggleable__control sk-hidden--visually" id="sk-estimator-id-151" type="checkbox"><label for="sk-estimator-id-151" class="sk-toggleable__label sk-toggleable__label-arrow">RandomForestClassifier</label><div class="sk-toggleable__content"><pre>RandomForestClassifier(min_samples_leaf=20, random_state=42)</pre></div>
</div></div>
</div>
</div></div>
</div> </div> <br> <br><p>Observing the accuracy score on the training and testing set, we observe that the two metrics are very similar now. Therefore, our model is not overfitting anymore. We can then check the permutation importances with this new model.</p> <pre data-language="python">print(f"RF train accuracy: {rf.score(X_train, y_train):.3f}")
print(f"RF test accuracy: {rf.score(X_test, y_test):.3f}")
</pre> <pre data-language="none">RF train accuracy: 0.810
RF test accuracy: 0.832
</pre> <pre data-language="python">train_result = permutation_importance(
    rf, X_train, y_train, n_repeats=10, random_state=42, n_jobs=2
)
test_results = permutation_importance(
    rf, X_test, y_test, n_repeats=10, random_state=42, n_jobs=2
)
sorted_importances_idx = train_result.importances_mean.argsort()
</pre> <pre data-language="python">train_importances = pd.DataFrame(
    train_result.importances[sorted_importances_idx].T,
    columns=X.columns[sorted_importances_idx],
)
test_importances = pd.DataFrame(
    test_results.importances[sorted_importances_idx].T,
    columns=X.columns[sorted_importances_idx],
)
</pre> <pre data-language="python">for name, importances in zip(["train", "test"], [train_importances, test_importances]):
    ax = importances.plot.box(vert=False, whis=10)
    ax.set_title(f"Permutation Importances ({name} set)")
    ax.set_xlabel("Decrease in accuracy score")
    ax.axvline(x=0, color="k", linestyle="--")
    ax.figure.tight_layout()
</pre> <ul class="sphx-glr-horizontal"> <li><img src="data:image/png;base64,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" srcset="../../_images/sphx_glr_plot_permutation_importance_004.png" alt="Permutation Importances (train set)" class="sphx-glr-multi-img"></li> <li><img src="data:image/png;base64,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" srcset="../../_images/sphx_glr_plot_permutation_importance_005.png" alt="Permutation Importances (test set)" class="sphx-glr-multi-img"></li> </ul> <p>Now, we can observe that on both sets, the <code>random_num</code> and <code>random_cat</code> features have a lower importance compared to the overfitting random forest. However, the conclusions regarding the importance of the other features are still valid.</p> <p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes 4.791 seconds)</p> <div class="sphx-glr-footer sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-examples-inspection-plot-permutation-importance-py"> <div class="binder-badge docutils container"> <a class="reference external image-reference" href="https://mybinder.org/v2/gh/scikit-learn/scikit-learn/1.1.X?urlpath=lab/tree/notebooks/auto_examples/inspection/plot_permutation_importance.ipynb"><img alt="Launch binder" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTA5IiBoZWlnaHQ9IjIwIj48bGluZWFyR3JhZGllbnQgaWQ9ImIiIHgyPSIwIiB5Mj0iMTAwJSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjYmJiIiBzdG9wLW9wYWNpdHk9Ii4xIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLW9wYWNpdHk9Ii4xIi8+PC9saW5lYXJHcmFkaWVudD48Y2xpcFBhdGggaWQ9ImEiPjxyZWN0IHdpZHRoPSIxMDkiIGhlaWdodD0iMjAiIHJ4PSIzIiBmaWxsPSIjZmZmIi8+PC9jbGlwUGF0aD48ZyBjbGlwLXBhdGg9InVybCgjYSkiPjxwYXRoIGZpbGw9IiM1NTUiIGQ9Ik0wIDBoNjR2MjBIMHoiLz48cGF0aCBmaWxsPSIjNTc5YWNhIiBkPSJNNjQgMGg0NXYyMEg2NHoiLz48cGF0aCBmaWxsPSJ1cmwoI2IpIiBkPSJNMCAwaDEwOXYyMEgweiIvPjwvZz48ZyBmaWxsPSIjZmZmIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iRGVqYVZ1IFNhbnMsVmVyZGFuYSxHZW5ldmEsc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMTAiPjxpbWFnZSB4PSI1IiB5PSIzIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHhsaW5rOmhyZWY9ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBRmtBQUFCWkNBTUFBQUJpMVhpZEFBQUI4bEJNVkVYLy8vOVhtc3JtWllIMW9sSlhtc3Ixb2xKWG1zcm1aWUgxb2xKWG1zcjFvbEpYbXNybVpZSDFvbEwxb2xKWG1zcjFvbEpYbXNybVpZSDFvbEwxb2xKWG1zcm1aWUgxb2xKWG1zcjFvbEwxb2xKWG1zcm1aWUgxb2xMMW9sSlhtc3JtWllIMW9sTDFvbEwwbkZmMW9sSlhtc3JtWllIMW9sSlhtc3E4ZFpiMW9sSlhtc3JtWllIMW9sSlhtc3BYbXNwWG1zcjFvbEwxb2xKWG1zcm1aWUgxb2xKWG1zcjFvbEwxb2xKWG1zcm1aWUgxb2xMMW9sTGVhSVZYbXNybVpZSDFvbEwxb2xMMW9sSlhtc3JtWllIMW9sTG5hMzFYbXNyMW9sSlhtc3Ixb2xKWG1zcm1aWUgxb2xMcW9WcjFvbEpYbXNyMW9sSlhtc3JtWllIMW9sTDFvbEtrZmFQb2JYdnZpR2FiZ2FkWG1zcVRoS3VvZktIbVo0RG9ibnIxb2xKWG1zcjFvbEpYbXNwWG1zcjFvbEpYbXNyZlo0VHVoV24xb2xMMW9sSlhtc3FCaTdYMW9sSlhtc3BabXNsYm1NaGJtc2RlbXNWZmw4Wmdtc05pbThKcGs4RjBtN1I0bTdGNW5MQjZqYmg3amJpRGlyT0VpYk9HbkthTWhxK1BuYUNWZzZxV2c2cWVnS2FmZjZXaG5wS29mS0d0bm9teGVaeTNub0c2ZFppK24zdkNjcFBEY3BQR24zYkxiNC9NYjQ3VWJJclZhNHJZb0dqZGFJYmVhSVhob1dIbVpZSG9iWHZwY0hqcWRIWHJlSExyb1Zyc2ZHL3VoR251aDJid2oySHhrMTd5bDF2em1sanptMWowbmxYMW9sTDNBSlhXQUFBQWJYUlNUbE1BRUJBUUh4OGdJQ0F1TGpBd01EdzlQVUJBUUVwUVVGQlhWMWhnWUdCa2NIQndjWGw4Z0lDQWdvaUlrSkNRbEppY25KMmdvS0NtcUsrd3NMQzR1c0RBd01qUDBORFExTmJXM056ZzRPRGk1KzN2OFBEdzgvVDA5UFgyOXZiMzkvZjUrZnI3Ky96OC9QejkvdjcremN6Q3hnQUFCQzVKUkVGVWVBSE4xdWwzazBVVUJ2Q2IxQ1RWcG1wYWl0QUdTTFNwU3VLQ0xXcGJUS05KRkdsY1NNQUZGNjNpVW1SY2NORzZnTGJ1eGtYVTY2SkFVZWYvOUxTcG1YbnlMcjNUNUFPL3J6bDV6ajEzN3AxMzZCSVN5NDRmS0pYdUdOL2QxOVBVZlllTzY3Wm5xdGYyS0gzM0lkMXBzWG9GZFczMHNQWjFzTXZzMkQwNjBBSHF3czRGSGVKb2pMWnFudzUzY21mdmcrWFI4bUMwT0VqdXhyWEVrWDV5ZGVWSkxWSWxWMGUxMFBYazVrN2RZZUh1N0NqMWorNDl1S2c3dUxVNjF0R0x3MWxxMjd1Z1FZbGNsSEM0Ymd2N1ZRK1RBeWo1WmMvVWpzUHZzMXNkNWNXcnlXT2J0dldUMkVQYTRydG5XVzNKa3BqZ2dFcGJPc1ByN0Y3RXlOZXd0cEJJc2xBN3A0M0hDc253b29YVEVjM1VtUG1DTm41bHJxVEp4eTZuUm1jYXZHWlZ0LzNEYTJwRDVOSHZzT0hKQ3JkYzFHMnIzRElUcFU3eWljN3cvN1J4bmpjMGt0NUdDNGRqaXYyU3ozRmIyaUVaZzQxL2Rkc0ZEb3l1WXJJa21GZWh6MEhSMnRoUGdRcU15UVliMk90QjBXeHNaM0JlRzMrd3BSYjF2emwyVVlCb2c4RmZHaHR0RktqdEFjbG5aWXJSbzlyeUc5dUcvRlpRVTRBRWc4WkU5TGpHTXpUbXFLWFBMbmxXVm5JbFFRVHZ4SmY4aXA3VmdqWmp5VlByancxdGU1b3RNN1JtUDd4bStzSzJHdjlJOEdpKytCUmJFa1I5RUJ3OHpSVWNLeHdwNzN4a2FMaXFRYitrR2R1SlROSEc3MnpjVzlMb0pncVF4cFAzL1RqLy9jM3lCMHRxemFtbDA1LytvckhMa3NWTys5NWtYNy83cWdKdm5qbHJmcjJHZ3N5eDBlb3k5dVB6TjVTUGQ4NmFYZ2dPc0VLVzJQcno3ZHUzVklEMy90enMvc1NSczJ3N292VkhLdGpyWDJwZDdaTWxUeEFZZkJBTDlqaUR3ZkxrcTU1VG03aWZoTWxUR1B5Q0FzN1JGUmhuNDdKbmxjQjlSTTVUOTdBU3VaWEljVk51VURJbmRwRGJkc2ZycXNPcHBlWGw1WStYVktkakZDVGgrekdhVnVqMGQ5enkwNVBQSzNRekJhbXhkd3RUQ3J6eWcvMlJ2ZjJFc3RVam9yZEd3YS9reDltU0pMcjhtTEx0Q1c4SEhHSmMyUjVoUzIxOUlpRjZQblR1c09xY01sNTdnbTBaOGthbktNQVFnMHFTeXVaZm43ekl0c2JHeU85UWxueFkwZUN1RDFYTDJ5cy9Nc3JRaGx0RTdVZzB1Rk96dWZKRkUyUHhCby9ZQXg4WFBQZER3V04wTXJEUllJWkYwbVNNS0NOSGdhSVZGb0JiTm9MSjd0RVFES3hHRjBrY0xRaW1vakNab3B2ME9rTk95V0NDZzlYTVZBaTdBUkp6UWRNMlFVaDBnbUJvempjM1NrZzZkU0JScURHWVNVT3U2NlpnK0kyZk5acy9NMy9mL0dybC9YbnlGMUd3M1ZLQ2V6MFBONUlVZkZMcXZnVU40QzBxTnFZczVZaFBMK2FWWllERTRJcFVrNTdvU0ZuSm00RnlDcXFPRTBqaFkyU015TEZvbzU2enlvNmJlY09TNVVWRGRqN1ZpaDB6cCt0Y01od1JwQmVMeXF0SWpsSktBSVpTYkk4U0dTRjNrMHBBM21SNXRIdXdQRm9hN043cmVvcTJicUNzQWsxSHFDdTV1dkkxbjZKdVJYSStTMU1jbzU0WW1ZVHdjbjZBZWljK2tzc1hpOFhwWEM0VjN0Ny9BRHVUTkthUUpkU2NBQUFBQUVsRlRrU3VRbUNDIi8+IDx0ZXh0IHg9IjQxNSIgeT0iMTUwIiBmaWxsPSIjMDEwMTAxIiBmaWxsLW9wYWNpdHk9Ii4zIiB0cmFuc2Zvcm09InNjYWxlKC4xKSIgdGV4dExlbmd0aD0iMzcwIj5sYXVuY2g8L3RleHQ+PHRleHQgeD0iNDE1IiB5PSIxNDAiIHRyYW5zZm9ybT0ic2NhbGUoLjEpIiB0ZXh0TGVuZ3RoPSIzNzAiPmxhdW5jaDwvdGV4dD48dGV4dCB4PSI4NTUiIHk9IjE1MCIgZmlsbD0iIzAxMDEwMSIgZmlsbC1vcGFjaXR5PSIuMyIgdHJhbnNmb3JtPSJzY2FsZSguMSkiIHRleHRMZW5ndGg9IjM1MCI+YmluZGVyPC90ZXh0Pjx0ZXh0IHg9Ijg1NSIgeT0iMTQwIiB0cmFuc2Zvcm09InNjYWxlKC4xKSIgdGV4dExlbmd0aD0iMzUwIj5iaW5kZXI8L3RleHQ+PC9nPiA8L3N2Zz4=" width="150px"></a> </div> <div class="sphx-glr-download sphx-glr-download-python docutils container"> <p><a class="reference download internal" download="" href="https://scikit-learn.org/1.1/_downloads/3c3c738275484acc54821615bf72894a/plot_permutation_importance.py"><code>Download Python source code: plot_permutation_importance.py</code></a></p> </div> <div class="sphx-glr-download sphx-glr-download-jupyter docutils container"> <p><a class="reference download internal" download="" href="https://scikit-learn.org/1.1/_downloads/f99bb35c32eb8028063a1428c3999b84/plot_permutation_importance.ipynb"><code>Download Jupyter notebook: plot_permutation_importance.ipynb</code></a></p> </div> </div>  </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2007&ndash;2022 The scikit-learn developers<br>Licensed under the 3-clause BSD License.<br>
    <a href="https://scikit-learn.org/1.1/auto_examples/inspection/plot_permutation_importance.html" class="_attribution-link">https://scikit-learn.org/1.1/auto_examples/inspection/plot_permutation_importance.html</a>
  </p>
</div>
