<div class="sphx-glr-download-link-note admonition note"> <p class="admonition-title">Note</p> <p>Click <a class="reference internal" href="#sphx-glr-download-auto-examples-compose-plot-compare-reduction-py"><span class="std std-ref">here</span></a> to download the full example code or to run this example in your browser via Binder</p> </div> <section class="sphx-glr-example-title" id="selecting-dimensionality-reduction-with-pipeline-and-gridsearchcv"> <h1 id="sphx-glr-auto-examples-compose-plot-compare-reduction-py">Selecting dimensionality reduction with Pipeline and GridSearchCV</h1> <p>This example constructs a pipeline that does dimensionality reduction followed by prediction with a support vector classifier. It demonstrates the use of <code>GridSearchCV</code> and <code>Pipeline</code> to optimize over different classes of estimators in a single CV run â€“ unsupervised <code>PCA</code> and <code>NMF</code> dimensionality reductions are compared to univariate feature selection during the grid search.</p> <p>Additionally, <code>Pipeline</code> can be instantiated with the <code>memory</code> argument to memoize the transformers within the pipeline, avoiding to fit again the same transformers over and over.</p> <p>Note that the use of <code>memory</code> to enable caching becomes interesting when the fitting of a transformer is costly.</p> <section id="illustration-of-pipeline-and-gridsearchcv"> <h2>Illustration of <code>Pipeline</code> and <code>GridSearchCV</code>
</h2> <pre data-language="python"># Authors: Robert McGibbon, Joel Nothman, Guillaume Lemaitre

import numpy as np
import matplotlib.pyplot as plt
from sklearn.datasets import load_digits
from sklearn.model_selection import GridSearchCV
from sklearn.pipeline import Pipeline
from sklearn.svm import LinearSVC
from sklearn.decomposition import PCA, NMF
from sklearn.feature_selection import SelectKBest, chi2

pipe = Pipeline(
    [
        # the reduce_dim stage is populated by the param_grid
        ("reduce_dim", "passthrough"),
        ("classify", LinearSVC(dual=False, max_iter=10000)),
    ]
)

N_FEATURES_OPTIONS = [2, 4, 8]
C_OPTIONS = [1, 10, 100, 1000]
param_grid = [
    {
        "reduce_dim": [PCA(iterated_power=7), NMF()],
        "reduce_dim__n_components": N_FEATURES_OPTIONS,
        "classify__C": C_OPTIONS,
    },
    {
        "reduce_dim": [SelectKBest(chi2)],
        "reduce_dim__k": N_FEATURES_OPTIONS,
        "classify__C": C_OPTIONS,
    },
]
reducer_labels = ["PCA", "NMF", "KBest(chi2)"]

grid = GridSearchCV(pipe, n_jobs=1, param_grid=param_grid)
X, y = load_digits(return_X_y=True)
grid.fit(X, y)

mean_scores = np.array(grid.cv_results_["mean_test_score"])
# scores are in the order of param_grid iteration, which is alphabetical
mean_scores = mean_scores.reshape(len(C_OPTIONS), -1, len(N_FEATURES_OPTIONS))
# select score for best C
mean_scores = mean_scores.max(axis=0)
bar_offsets = np.arange(len(N_FEATURES_OPTIONS)) * (len(reducer_labels) + 1) + 0.5

plt.figure()
COLORS = "bgrcmyk"
for i, (label, reducer_scores) in enumerate(zip(reducer_labels, mean_scores)):
    plt.bar(bar_offsets + i, reducer_scores, label=label, color=COLORS[i])

plt.title("Comparing feature reduction techniques")
plt.xlabel("Reduced number of features")
plt.xticks(bar_offsets + len(reducer_labels) / 2, N_FEATURES_OPTIONS)
plt.ylabel("Digit classification accuracy")
plt.ylim((0, 1))
plt.legend(loc="upper left")

plt.show()
</pre> <img src="data:image/png;base64,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" srcset="../../_images/sphx_glr_plot_compare_reduction_001.png" alt="Comparing feature reduction techniques" class="sphx-glr-single-img"></section> <section id="caching-transformers-within-a-pipeline"> <h2>Caching transformers within a <code>Pipeline</code>
</h2>  <p>It is sometimes worthwhile storing the state of a specific transformer since it could be used again. Using a pipeline in <code>GridSearchCV</code> triggers such situations. Therefore, we use the argument <code>memory</code> to enable caching.</p> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>Note that this example is, however, only an illustration since for this specific case fitting PCA is not necessarily slower than loading the cache. Hence, use the <code>memory</code> constructor parameter when the fitting of a transformer is costly.</p> </div>  <pre data-language="python">from joblib import Memory
from shutil import rmtree

# Create a temporary folder to store the transformers of the pipeline
location = "cachedir"
memory = Memory(location=location, verbose=10)
cached_pipe = Pipeline(
    [("reduce_dim", PCA()), ("classify", LinearSVC(dual=False, max_iter=10000))],
    memory=memory,
)

# This time, a cached pipeline will be used within the grid search


# Delete the temporary cache before exiting
memory.clear(warn=False)
rmtree(location)
</pre> <p>The <code>PCA</code> fitting is only computed at the evaluation of the first configuration of the <code>C</code> parameter of the <code>LinearSVC</code> classifier. The other configurations of <code>C</code> will trigger the loading of the cached <code>PCA</code> estimator data, leading to save processing time. Therefore, the use of caching the pipeline using <code>memory</code> is highly beneficial when fitting a transformer is costly.</p> <p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes 3.938 seconds)</p> <div class="sphx-glr-footer sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-examples-compose-plot-compare-reduction-py"> <div class="binder-badge docutils container"> <a class="reference external image-reference" href="https://mybinder.org/v2/gh/scikit-learn/scikit-learn/1.1.X?urlpath=lab/tree/notebooks/auto_examples/compose/plot_compare_reduction.ipynb"><img alt="Launch binder" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTA5IiBoZWlnaHQ9IjIwIj48bGluZWFyR3JhZGllbnQgaWQ9ImIiIHgyPSIwIiB5Mj0iMTAwJSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjYmJiIiBzdG9wLW9wYWNpdHk9Ii4xIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLW9wYWNpdHk9Ii4xIi8+PC9saW5lYXJHcmFkaWVudD48Y2xpcFBhdGggaWQ9ImEiPjxyZWN0IHdpZHRoPSIxMDkiIGhlaWdodD0iMjAiIHJ4PSIzIiBmaWxsPSIjZmZmIi8+PC9jbGlwUGF0aD48ZyBjbGlwLXBhdGg9InVybCgjYSkiPjxwYXRoIGZpbGw9IiM1NTUiIGQ9Ik0wIDBoNjR2MjBIMHoiLz48cGF0aCBmaWxsPSIjNTc5YWNhIiBkPSJNNjQgMGg0NXYyMEg2NHoiLz48cGF0aCBmaWxsPSJ1cmwoI2IpIiBkPSJNMCAwaDEwOXYyMEgweiIvPjwvZz48ZyBmaWxsPSIjZmZmIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iRGVqYVZ1IFNhbnMsVmVyZGFuYSxHZW5ldmEsc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMTAiPjxpbWFnZSB4PSI1IiB5PSIzIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHhsaW5rOmhyZWY9ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBRmtBQUFCWkNBTUFBQUJpMVhpZEFBQUI4bEJNVkVYLy8vOVhtc3JtWllIMW9sSlhtc3Ixb2xKWG1zcm1aWUgxb2xKWG1zcjFvbEpYbXNybVpZSDFvbEwxb2xKWG1zcjFvbEpYbXNybVpZSDFvbEwxb2xKWG1zcm1aWUgxb2xKWG1zcjFvbEwxb2xKWG1zcm1aWUgxb2xMMW9sSlhtc3JtWllIMW9sTDFvbEwwbkZmMW9sSlhtc3JtWllIMW9sSlhtc3E4ZFpiMW9sSlhtc3JtWllIMW9sSlhtc3BYbXNwWG1zcjFvbEwxb2xKWG1zcm1aWUgxb2xKWG1zcjFvbEwxb2xKWG1zcm1aWUgxb2xMMW9sTGVhSVZYbXNybVpZSDFvbEwxb2xMMW9sSlhtc3JtWllIMW9sTG5hMzFYbXNyMW9sSlhtc3Ixb2xKWG1zcm1aWUgxb2xMcW9WcjFvbEpYbXNyMW9sSlhtc3JtWllIMW9sTDFvbEtrZmFQb2JYdnZpR2FiZ2FkWG1zcVRoS3VvZktIbVo0RG9ibnIxb2xKWG1zcjFvbEpYbXNwWG1zcjFvbEpYbXNyZlo0VHVoV24xb2xMMW9sSlhtc3FCaTdYMW9sSlhtc3BabXNsYm1NaGJtc2RlbXNWZmw4Wmdtc05pbThKcGs4RjBtN1I0bTdGNW5MQjZqYmg3amJpRGlyT0VpYk9HbkthTWhxK1BuYUNWZzZxV2c2cWVnS2FmZjZXaG5wS29mS0d0bm9teGVaeTNub0c2ZFppK24zdkNjcFBEY3BQR24zYkxiNC9NYjQ3VWJJclZhNHJZb0dqZGFJYmVhSVhob1dIbVpZSG9iWHZwY0hqcWRIWHJlSExyb1Zyc2ZHL3VoR251aDJid2oySHhrMTd5bDF2em1sanptMWowbmxYMW9sTDNBSlhXQUFBQWJYUlNUbE1BRUJBUUh4OGdJQ0F1TGpBd01EdzlQVUJBUUVwUVVGQlhWMWhnWUdCa2NIQndjWGw4Z0lDQWdvaUlrSkNRbEppY25KMmdvS0NtcUsrd3NMQzR1c0RBd01qUDBORFExTmJXM056ZzRPRGk1KzN2OFBEdzgvVDA5UFgyOXZiMzkvZjUrZnI3Ky96OC9QejkvdjcremN6Q3hnQUFCQzVKUkVGVWVBSE4xdWwzazBVVUJ2Q2IxQ1RWcG1wYWl0QUdTTFNwU3VLQ0xXcGJUS05KRkdsY1NNQUZGNjNpVW1SY2NORzZnTGJ1eGtYVTY2SkFVZWYvOUxTcG1YbnlMcjNUNUFPL3J6bDV6ajEzN3AxMzZCSVN5NDRmS0pYdUdOL2QxOVBVZlllTzY3Wm5xdGYyS0gzM0lkMXBzWG9GZFczMHNQWjFzTXZzMkQwNjBBSHF3czRGSGVKb2pMWnFudzUzY21mdmcrWFI4bUMwT0VqdXhyWEVrWDV5ZGVWSkxWSWxWMGUxMFBYazVrN2RZZUh1N0NqMWorNDl1S2c3dUxVNjF0R0x3MWxxMjd1Z1FZbGNsSEM0Ymd2N1ZRK1RBeWo1WmMvVWpzUHZzMXNkNWNXcnlXT2J0dldUMkVQYTRydG5XVzNKa3BqZ2dFcGJPc1ByN0Y3RXlOZXd0cEJJc2xBN3A0M0hDc253b29YVEVjM1VtUG1DTm41bHJxVEp4eTZuUm1jYXZHWlZ0LzNEYTJwRDVOSHZzT0hKQ3JkYzFHMnIzRElUcFU3eWljN3cvN1J4bmpjMGt0NUdDNGRqaXYyU3ozRmIyaUVaZzQxL2Rkc0ZEb3l1WXJJa21GZWh6MEhSMnRoUGdRcU15UVliMk90QjBXeHNaM0JlRzMrd3BSYjF2emwyVVlCb2c4RmZHaHR0RktqdEFjbG5aWXJSbzlyeUc5dUcvRlpRVTRBRWc4WkU5TGpHTXpUbXFLWFBMbmxXVm5JbFFRVHZ4SmY4aXA3VmdqWmp5VlByancxdGU1b3RNN1JtUDd4bStzSzJHdjlJOEdpKytCUmJFa1I5RUJ3OHpSVWNLeHdwNzN4a2FMaXFRYitrR2R1SlROSEc3MnpjVzlMb0pncVF4cFAzL1RqLy9jM3lCMHRxemFtbDA1LytvckhMa3NWTys5NWtYNy83cWdKdm5qbHJmcjJHZ3N5eDBlb3k5dVB6TjVTUGQ4NmFYZ2dPc0VLVzJQcno3ZHUzVklEMy90enMvc1NSczJ3N292VkhLdGpyWDJwZDdaTWxUeEFZZkJBTDlqaUR3ZkxrcTU1VG03aWZoTWxUR1B5Q0FzN1JGUmhuNDdKbmxjQjlSTTVUOTdBU3VaWEljVk51VURJbmRwRGJkc2ZycXNPcHBlWGw1WStYVktkakZDVGgrekdhVnVqMGQ5enkwNVBQSzNRekJhbXhkd3RUQ3J6eWcvMlJ2ZjJFc3RVam9yZEd3YS9reDltU0pMcjhtTEx0Q1c4SEhHSmMyUjVoUzIxOUlpRjZQblR1c09xY01sNTdnbTBaOGthbktNQVFnMHFTeXVaZm43ekl0c2JHeU85UWxueFkwZUN1RDFYTDJ5cy9Nc3JRaGx0RTdVZzB1Rk96dWZKRkUyUHhCby9ZQXg4WFBQZER3V04wTXJEUllJWkYwbVNNS0NOSGdhSVZGb0JiTm9MSjd0RVFES3hHRjBrY0xRaW1vakNab3B2ME9rTk95V0NDZzlYTVZBaTdBUkp6UWRNMlFVaDBnbUJvempjM1NrZzZkU0JScURHWVNVT3U2NlpnK0kyZk5acy9NMy9mL0dybC9YbnlGMUd3M1ZLQ2V6MFBONUlVZkZMcXZnVU40QzBxTnFZczVZaFBMK2FWWllERTRJcFVrNTdvU0ZuSm00RnlDcXFPRTBqaFkyU015TEZvbzU2enlvNmJlY09TNVVWRGRqN1ZpaDB6cCt0Y01od1JwQmVMeXF0SWpsSktBSVpTYkk4U0dTRjNrMHBBM21SNXRIdXdQRm9hN043cmVvcTJicUNzQWsxSHFDdTV1dkkxbjZKdVJYSStTMU1jbzU0WW1ZVHdjbjZBZWljK2tzc1hpOFhwWEM0VjN0Ny9BRHVUTkthUUpkU2NBQUFBQUVsRlRrU3VRbUNDIi8+IDx0ZXh0IHg9IjQxNSIgeT0iMTUwIiBmaWxsPSIjMDEwMTAxIiBmaWxsLW9wYWNpdHk9Ii4zIiB0cmFuc2Zvcm09InNjYWxlKC4xKSIgdGV4dExlbmd0aD0iMzcwIj5sYXVuY2g8L3RleHQ+PHRleHQgeD0iNDE1IiB5PSIxNDAiIHRyYW5zZm9ybT0ic2NhbGUoLjEpIiB0ZXh0TGVuZ3RoPSIzNzAiPmxhdW5jaDwvdGV4dD48dGV4dCB4PSI4NTUiIHk9IjE1MCIgZmlsbD0iIzAxMDEwMSIgZmlsbC1vcGFjaXR5PSIuMyIgdHJhbnNmb3JtPSJzY2FsZSguMSkiIHRleHRMZW5ndGg9IjM1MCI+YmluZGVyPC90ZXh0Pjx0ZXh0IHg9Ijg1NSIgeT0iMTQwIiB0cmFuc2Zvcm09InNjYWxlKC4xKSIgdGV4dExlbmd0aD0iMzUwIj5iaW5kZXI8L3RleHQ+PC9nPiA8L3N2Zz4=" width="150px"></a> </div> <div class="sphx-glr-download sphx-glr-download-python docutils container"> <p><a class="reference download internal" download="" href="https://scikit-learn.org/1.1/_downloads/f30499f1e20a3d5f0f83bb90cd6ff348/plot_compare_reduction.py"><code>Download Python source code: plot_compare_reduction.py</code></a></p> </div> <div class="sphx-glr-download sphx-glr-download-jupyter docutils container"> <p><a class="reference download internal" download="" href="https://scikit-learn.org/1.1/_downloads/e38f4849bd47832b7b365f2fa9d31dd6/plot_compare_reduction.ipynb"><code>Download Jupyter notebook: plot_compare_reduction.ipynb</code></a></p> </div> </div>  </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2007&ndash;2022 The scikit-learn developers<br>Licensed under the 3-clause BSD License.<br>
    <a href="https://scikit-learn.org/1.1/auto_examples/compose/plot_compare_reduction.html" class="_attribution-link">https://scikit-learn.org/1.1/auto_examples/compose/plot_compare_reduction.html</a>
  </p>
</div>
