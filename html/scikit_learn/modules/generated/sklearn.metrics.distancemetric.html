<section id="sklearn-metrics-distancemetric"> <h1>sklearn.metrics.DistanceMetric</h1> <dl class="py class"> <dt class="sig sig-object py" id="sklearn.metrics.DistanceMetric"> <em class="property">class</em><span class="sig-prename descclassname">sklearn.metrics.</span><span class="sig-name descname">DistanceMetric</span>
</dt> <dd>
<p>DistanceMetric class</p> <p>This class provides a uniform interface to fast distance metric functions. The various metrics can be accessed via the <a class="reference internal" href="#sklearn.metrics.DistanceMetric.get_metric" title="sklearn.metrics.DistanceMetric.get_metric"><code>get_metric</code></a> class method and the metric string identifier (see below).</p> <h4 class="rubric">Examples</h4> <pre data-language="python">&gt;&gt;&gt; from sklearn.metrics import DistanceMetric
&gt;&gt;&gt; dist = DistanceMetric.get_metric('euclidean')
&gt;&gt;&gt; X = [[0, 1, 2],
         [3, 4, 5]]
&gt;&gt;&gt; dist.pairwise(X)
array([[ 0.        ,  5.19615242],
       [ 5.19615242,  0.        ]])
</pre> <p>Available Metrics</p> <p>The following lists the string metric identifiers and the associated distance metric classes:</p> <p><strong>Metrics intended for real-valued vector spaces:</strong></p> <table class="docutils align-default">  <tr>
<td><p>identifier</p></td> <td><p>class name</p></td> <td><p>args</p></td> <td><p>distance function</p></td> </tr> <tr>
<td><p>“euclidean”</p></td> <td><p>EuclideanDistance</p></td> <td>
<ul class="simple"> <li> </ul> </td> <td><p><code>sqrt(sum((x - y)^2))</code></p></td> </tr> <tr>
<td><p>“manhattan”</p></td> <td><p>ManhattanDistance</p></td> <td>
<ul class="simple"> <li> </ul> </td> <td><p><code>sum(|x - y|)</code></p></td> </tr> <tr>
<td><p>“chebyshev”</p></td> <td><p>ChebyshevDistance</p></td> <td>
<ul class="simple"> <li> </ul> </td> <td><p><code>max(|x - y|)</code></p></td> </tr> <tr>
<td><p>“minkowski”</p></td> <td><p>MinkowskiDistance</p></td> <td><p>p, w</p></td> <td><p><code>sum(w * |x - y|^p)^(1/p)</code></p></td> </tr> <tr>
<td><p>“wminkowski”</p></td> <td><p>WMinkowskiDistance</p></td> <td><p>p, w</p></td> <td><p><code>sum(|w * (x - y)|^p)^(1/p)</code></p></td> </tr> <tr>
<td><p>“seuclidean”</p></td> <td><p>SEuclideanDistance</p></td> <td><p>V</p></td> <td><p><code>sqrt(sum((x - y)^2 / V))</code></p></td> </tr> <tr>
<td><p>“mahalanobis”</p></td> <td><p>MahalanobisDistance</p></td> <td><p>V or VI</p></td> <td><p><code>sqrt((x - y)' V^-1 (x - y))</code></p></td> </tr>  </table> <div class="deprecated"> <p><span class="versionmodified deprecated">Deprecated since version 1.1: </span><code>WMinkowskiDistance</code> is deprecated in version 1.1 and will be removed in version 1.3. Use <code>MinkowskiDistance</code> instead. Note that in <code>MinkowskiDistance</code>, the weights are applied to the absolute differences already raised to the p power. This is different from <code>WMinkowskiDistance</code> where weights are applied to the absolute differences before raising to the p power. The deprecation aims to remain consistent with SciPy 1.8 convention.</p> </div> <p><strong>Metrics intended for two-dimensional vector spaces:</strong> Note that the haversine distance metric requires data in the form of [latitude, longitude] and both inputs and outputs are in units of radians.</p> <table class="docutils align-default">  <tr>
<td><p>identifier</p></td> <td><p>class name</p></td> <td><p>distance function</p></td> </tr> <tr>
<td><p>“haversine”</p></td> <td><p>HaversineDistance</p></td> <td><p><code>2 arcsin(sqrt(sin^2(0.5*dx) + cos(x1)cos(x2)sin^2(0.5*dy)))</code></p></td> </tr>  </table> <p><strong>Metrics intended for integer-valued vector spaces:</strong> Though intended for integer-valued vectors, these are also valid metrics in the case of real-valued vectors.</p> <table class="docutils align-default">  <tr>
<td><p>identifier</p></td> <td><p>class name</p></td> <td><p>distance function</p></td> </tr> <tr>
<td><p>“hamming”</p></td> <td><p>HammingDistance</p></td> <td><p><code>N_unequal(x, y) / N_tot</code></p></td> </tr> <tr>
<td><p>“canberra”</p></td> <td><p>CanberraDistance</p></td> <td><p><code>sum(|x - y| / (|x| + |y|))</code></p></td> </tr> <tr>
<td><p>“braycurtis”</p></td> <td><p>BrayCurtisDistance</p></td> <td><p><code>sum(|x - y|) / (sum(|x|) + sum(|y|))</code></p></td> </tr>  </table> <p><strong>Metrics intended for boolean-valued vector spaces:</strong> Any nonzero entry is evaluated to “True”. In the listings below, the following abbreviations are used:</p>  <ul class="simple"> <li>N : number of dimensions</li> <li>NTT : number of dims in which both values are True</li> <li>NTF : number of dims in which the first value is True, second is False</li> <li>NFT : number of dims in which the first value is False, second is True</li> <li>NFF : number of dims in which both values are False</li> <li>NNEQ : number of non-equal dimensions, NNEQ = NTF + NFT</li> <li>NNZ : number of nonzero dimensions, NNZ = NTF + NFT + NTT</li> </ul>  <table class="docutils align-default">  <tr>
<td><p>identifier</p></td> <td><p>class name</p></td> <td><p>distance function</p></td> </tr> <tr>
<td><p>“jaccard”</p></td> <td><p>JaccardDistance</p></td> <td><p>NNEQ / NNZ</p></td> </tr> <tr>
<td><p>“matching”</p></td> <td><p>MatchingDistance</p></td> <td><p>NNEQ / N</p></td> </tr> <tr>
<td><p>“dice”</p></td> <td><p>DiceDistance</p></td> <td><p>NNEQ / (NTT + NNZ)</p></td> </tr> <tr>
<td><p>“kulsinski”</p></td> <td><p>KulsinskiDistance</p></td> <td><p>(NNEQ + N - NTT) / (NNEQ + N)</p></td> </tr> <tr>
<td><p>“rogerstanimoto”</p></td> <td><p>RogersTanimotoDistance</p></td> <td><p>2 * NNEQ / (N + NNEQ)</p></td> </tr> <tr>
<td><p>“russellrao”</p></td> <td><p>RussellRaoDistance</p></td> <td><p>(N - NTT) / N</p></td> </tr> <tr>
<td><p>“sokalmichener”</p></td> <td><p>SokalMichenerDistance</p></td> <td><p>2 * NNEQ / (N + NNEQ)</p></td> </tr> <tr>
<td><p>“sokalsneath”</p></td> <td><p>SokalSneathDistance</p></td> <td><p>NNEQ / (NNEQ + 0.5 * NTT)</p></td> </tr>  </table> <p><strong>User-defined distance:</strong></p> <table class="docutils align-default">  <tr>
<td><p>identifier</p></td> <td><p>class name</p></td> <td><p>args</p></td> </tr> <tr>
<td><p>“pyfunc”</p></td> <td><p>PyFuncDistance</p></td> <td><p>func</p></td> </tr>  </table> <p>Here <code>func</code> is a function which takes two one-dimensional numpy arrays, and returns a distance. Note that in order to be used within the BallTree, the distance must be a true metric: i.e. it must satisfy the following properties</p> <ol class="arabic simple"> <li>Non-negativity: d(x, y) &gt;= 0</li> <li>Identity: d(x, y) = 0 if and only if x == y</li> <li>Symmetry: d(x, y) = d(y, x)</li> <li>Triangle Inequality: d(x, y) + d(y, z) &gt;= d(x, z)</li> </ol> <p>Because of the Python object overhead involved in calling the python function, this will be fairly slow, but it will have the same scaling as other distances.</p> <h4 class="rubric">Methods</h4> <table class="autosummary longtable docutils align-default">  <tr>
<td><p><a class="reference internal" href="#sklearn.metrics.DistanceMetric.dist_to_rdist" title="sklearn.metrics.DistanceMetric.dist_to_rdist"><code>dist_to_rdist</code></a></p></td> <td><p>Convert the true distance to the rank-preserving surrogate distance.</p></td> </tr> <tr>
<td><p><a class="reference internal" href="#sklearn.metrics.DistanceMetric.get_metric" title="sklearn.metrics.DistanceMetric.get_metric"><code>get_metric</code></a></p></td> <td><p>Get the given distance metric from the string identifier.</p></td> </tr> <tr>
<td><p><a class="reference internal" href="#sklearn.metrics.DistanceMetric.pairwise" title="sklearn.metrics.DistanceMetric.pairwise"><code>pairwise</code></a></p></td> <td><p>Compute the pairwise distances between X and Y</p></td> </tr> <tr>
<td><p><a class="reference internal" href="#sklearn.metrics.DistanceMetric.rdist_to_dist" title="sklearn.metrics.DistanceMetric.rdist_to_dist"><code>rdist_to_dist</code></a></p></td> <td><p>Convert the rank-preserving surrogate distance to the distance.</p></td> </tr>  </table> <dl class="py method"> <dt class="sig sig-object py" id="sklearn.metrics.DistanceMetric.dist_to_rdist"> <span class="sig-name descname">dist_to_rdist</span><span class="sig-paren">(</span><span class="sig-paren">)</span>
</dt> <dd>
<p>Convert the true distance to the rank-preserving surrogate distance.</p> <p>The surrogate distance is any measure that yields the same rank as the distance, but is more efficient to compute. For example, the rank-preserving surrogate distance of the Euclidean metric is the squared-euclidean distance.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters<span class="colon">:</span>
</dt> <dd class="field-odd">
<dl class="simple"> <dt>
<strong>dist</strong><span class="classifier">double</span>
</dt>
<dd>
<p>True distance.</p> </dd> </dl> </dd> <dt class="field-even">Returns<span class="colon">:</span>
</dt> <dd class="field-even">
<dl class="simple"> <dt>double</dt>
<dd>
<p>Surrogate distance.</p> </dd> </dl> </dd> </dl> </dd>
</dl> <dl class="py method"> <dt class="sig sig-object py" id="sklearn.metrics.DistanceMetric.get_metric"> <span class="sig-name descname">get_metric</span><span class="sig-paren">(</span><span class="sig-paren">)</span>
</dt> <dd>
<p>Get the given distance metric from the string identifier.</p> <p>See the docstring of DistanceMetric for a list of available metrics.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters<span class="colon">:</span>
</dt> <dd class="field-odd">
<dl class="simple"> <dt>
<strong>metric</strong><span class="classifier">str or class name</span>
</dt>
<dd>
<p>The distance metric to use</p> </dd> <dt><strong>**kwargs</strong></dt>
<dd>
<p>additional arguments will be passed to the requested metric</p> </dd> </dl> </dd> </dl> </dd>
</dl> <dl class="py method"> <dt class="sig sig-object py" id="sklearn.metrics.DistanceMetric.pairwise"> <span class="sig-name descname">pairwise</span><span class="sig-paren">(</span><span class="sig-paren">)</span>
</dt> <dd>
<p>Compute the pairwise distances between X and Y</p> <p>This is a convenience routine for the sake of testing. For many metrics, the utilities in scipy.spatial.distance.cdist and scipy.spatial.distance.pdist will be faster.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters<span class="colon">:</span>
</dt> <dd class="field-odd">
<dl class="simple"> <dt>
<strong>X</strong><span class="classifier">array-like</span>
</dt>
<dd>
<p>Array of shape (Nx, D), representing Nx points in D dimensions.</p> </dd> <dt>
<strong>Y</strong><span class="classifier">array-like (optional)</span>
</dt>
<dd>
<p>Array of shape (Ny, D), representing Ny points in D dimensions. If not specified, then Y=X.</p> </dd> </dl> </dd> <dt class="field-even">Returns<span class="colon">:</span>
</dt> <dd class="field-even">
<dl class="simple"> <dt>
<strong>dist</strong><span class="classifier">ndarray</span>
</dt>
<dd>
<p>The shape (Nx, Ny) array of pairwise distances between points in X and Y.</p> </dd> </dl> </dd> </dl> </dd>
</dl> <dl class="py method"> <dt class="sig sig-object py" id="sklearn.metrics.DistanceMetric.rdist_to_dist"> <span class="sig-name descname">rdist_to_dist</span><span class="sig-paren">(</span><span class="sig-paren">)</span>
</dt> <dd>
<p>Convert the rank-preserving surrogate distance to the distance.</p> <p>The surrogate distance is any measure that yields the same rank as the distance, but is more efficient to compute. For example, the rank-preserving surrogate distance of the Euclidean metric is the squared-euclidean distance.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters<span class="colon">:</span>
</dt> <dd class="field-odd">
<dl class="simple"> <dt>
<strong>rdist</strong><span class="classifier">double</span>
</dt>
<dd>
<p>Surrogate distance.</p> </dd> </dl> </dd> <dt class="field-even">Returns<span class="colon">:</span>
</dt> <dd class="field-even">
<dl class="simple"> <dt>double</dt>
<dd>
<p>True distance.</p> </dd> </dl> </dd> </dl> </dd>
</dl> </dd>
</dl> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2007&ndash;2022 The scikit-learn developers<br>Licensed under the 3-clause BSD License.<br>
    <a href="https://scikit-learn.org/1.1/modules/generated/sklearn.metrics.DistanceMetric.html" class="_attribution-link">https://scikit-learn.org/1.1/modules/generated/sklearn.metrics.DistanceMetric.html</a>
  </p>
</div>
