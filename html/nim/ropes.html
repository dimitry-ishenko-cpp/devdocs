<h1 class="title">ropes</h1>  <p class="module-desc">This module contains support for a <span id="rope_1">rope</span> data type. Ropes can represent very long strings efficiently; especially concatenation is done in O(1) instead of O(n). They are essentially concatenation trees that are only flattened when converting to a native Nim string. The empty string is represented by <code>nil</code>. Ropes are immutable and subtrees can be shared without copying. Leaves can be cached for better memory efficiency at the cost of runtime efficiency.</p>  <h2 id="6">Imports</h2> <dl> <a href="streams.html">streams</a> </dl>  <h2 id="7">Types</h2> <dl>  <dt><pre id="Rope">Rope = ref RopeObj</pre></dt> <dd> empty rope is represented by nil <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/ropes.nim#L32" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/ropes.nim#L32" target="_blank">Edit</a> </dd> </dl>  <h2 id="12">Procs</h2> <dl>  <dt><pre id="len%2CRope" data-language="nim">proc len(a: Rope): int {...}{.gcsafe, extern: "nro$1", raises: [], tags: [].}</pre></dt> <dd> The rope's length. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/ropes.nim#L46" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/ropes.nim#L46" target="_blank">Edit</a> </dd>  <dt><pre id="rope%2Cstring" data-language="nim">proc rope(s: string = ""): Rope {...}{.gcsafe, extern: "nro$1Str", raises: [],
                                  tags: [].}</pre></dt> <dd> Converts a string to a rope. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var r = rope("I'm a rope")
doAssert $r == "I'm a rope"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/ropes.nim#L128" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/ropes.nim#L128" target="_blank">Edit</a> </dd>  <dt><pre id="rope%2CBiggestInt" data-language="nim">proc rope(i: BiggestInt): Rope {...}{.gcsafe, extern: "nro$1BiggestInt", raises: [],
                                 tags: [].}</pre></dt> <dd> Converts an int to a rope. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var r = rope(429)
doAssert $r == "429"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/ropes.nim#L146" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/ropes.nim#L146" target="_blank">Edit</a> </dd>  <dt><pre id="rope%2CBiggestFloat" data-language="nim">proc rope(f: BiggestFloat): Rope {...}{.gcsafe, extern: "nro$1BiggestFloat",
                                   raises: [], tags: [].}</pre></dt> <dd> Converts a float to a rope. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var r = rope(4.29)
doAssert $r == "4.29"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/ropes.nim#L153" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/ropes.nim#L153" target="_blank">Edit</a> </dd>  <dt><pre id="enableCache" data-language="nim">proc enableCache() {...}{.gcsafe, extern: "nro$1", raises: [], tags: [].}</pre></dt> <dd> Enables the caching of leaves. This reduces the memory footprint at the cost of runtime efficiency. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/ropes.nim#L160" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/ropes.nim#L160" target="_blank">Edit</a> </dd>  <dt><pre id="disableCache" data-language="nim">proc disableCache() {...}{.gcsafe, extern: "nro$1", raises: [], tags: [].}</pre></dt> <dd> The cache is discarded and disabled. The GC will reuse its used memory. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/ropes.nim#L165" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/ropes.nim#L165" target="_blank">Edit</a> </dd>  <dt><pre id="%26%2CRope%2CRope" data-language="nim">proc `&amp;`(a, b: Rope): Rope {...}{.gcsafe, extern: "nroConcRopeRope", raises: [],
                             tags: [].}</pre></dt> <dd> The concatenation operator for ropes. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var
  r1 = rope("Hello, ")
  r2 = rope("Nim!")

let r = r1 &amp; r2
doAssert $r == "Hello, Nim!"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/ropes.nim#L170" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/ropes.nim#L170" target="_blank">Edit</a> </dd>  <dt><pre id="%26%2CRope%2Cstring" data-language="nim">proc `&amp;`(a: Rope; b: string): Rope {...}{.gcsafe, extern: "nroConcRopeStr",
                                     raises: [], tags: [].}</pre></dt> <dd> The concatenation operator for ropes. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var
  r1 = rope("Hello, ")
  r2 = "Nim!"

let r = r1 &amp; r2
doAssert $r == "Hello, Nim!"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/ropes.nim#L189" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/ropes.nim#L189" target="_blank">Edit</a> </dd>  <dt><pre id="%26%2Cstring%2CRope" data-language="nim">proc `&amp;`(a: string; b: Rope): Rope {...}{.gcsafe, extern: "nroConcStrRope",
                                     raises: [], tags: [].}</pre></dt> <dd> The concatenation operator for ropes. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var
  r1 = "Hello, "
  r2 = rope("Nim!")

let r = r1 &amp; r2
doAssert $r == "Hello, Nim!"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/ropes.nim#L200" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/ropes.nim#L200" target="_blank">Edit</a> </dd>  <dt><pre id="%26%2CopenArray%5BRope%5D" data-language="nim">proc `&amp;`(a: openArray[Rope]): Rope {...}{.gcsafe, extern: "nroConcOpenArray",
                                     raises: [], tags: [].}</pre></dt> <dd> The concatenation operator for an openarray of ropes. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">let s = @[rope("Hello, "), rope("Nim"), rope("!")]
let r = &amp;s
doAssert $r == "Hello, Nim!"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/ropes.nim#L211" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/ropes.nim#L211" target="_blank">Edit</a> </dd>  <dt><pre id="add%2CRope%2CRope" data-language="nim">proc add(a: var Rope; b: Rope) {...}{.gcsafe, extern: "nro$1Rope", raises: [],
                                 tags: [].}</pre></dt> <dd> Adds <code>b</code> to the rope <code>a</code>. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var
  r1 = rope("Hello, ")
  r2 = rope("Nim!")

r1.add(r2)
doAssert $r1 == "Hello, Nim!"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/ropes.nim#L219" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/ropes.nim#L219" target="_blank">Edit</a> </dd>  <dt><pre id="add%2CRope%2Cstring" data-language="nim">proc add(a: var Rope; b: string) {...}{.gcsafe, extern: "nro$1Str", raises: [],
                                   tags: [].}</pre></dt> <dd> Adds <code>b</code> to the rope <code>a</code>. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var
  r1 = rope("Hello, ")
  r2 = "Nim!"

r1.add(r2)
doAssert $r1 == "Hello, Nim!"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/ropes.nim#L230" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/ropes.nim#L230" target="_blank">Edit</a> </dd>  <dt><pre id="%5B%5D%2CRope%2Cint" data-language="nim">proc `[]`(r: Rope; i: int): char {...}{.gcsafe, extern: "nroCharAt", raises: [],
                                   tags: [].}</pre></dt> <dd> Returns the character at position <code>i</code> in the rope <code>r</code>. This is quite expensive! Worst-case: O(n). If <code>i &gt;= r.len</code>, <code>\0</code> is returned. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">let r1 = rope("Hello, Nim!")

doAssert r1[0] == 'H'
doAssert r1[7] == 'N'
doAssert r1[22] == '\0'

let r2 = rope("Hello") &amp; rope(", Nim!")

doAssert r2[0] == 'H'
doAssert r2[7] == 'N'
doAssert r2[22] == '\0'</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/ropes.nim#L241" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/ropes.nim#L241" target="_blank">Edit</a> </dd>  <dt><pre id="write%2CFile%2CRope" data-language="nim">proc write(f: File; r: Rope) {...}{.gcsafe, extern: "nro$1", raises: [IOError],
                               tags: [WriteIOEffect].}</pre></dt> <dd> Writes a rope to a file. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/ropes.nim#L297" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/ropes.nim#L297" target="_blank">Edit</a> </dd>  <dt><pre id="write%2CStream%2CRope" data-language="nim">proc write(s: Stream; r: Rope) {...}{.gcsafe, extern: "nroWriteStream",
                                 raises: [IOError, OSError],
                                 tags: [WriteIOEffect].}</pre></dt> <dd> Writes a rope to a stream. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/ropes.nim#L301" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/ropes.nim#L301" target="_blank">Edit</a> </dd>  <dt><pre id="%24%2CRope" data-language="nim">proc `$`(r: Rope): string {...}{.gcsafe, extern: "nroToString", raises: [], tags: [].}</pre></dt> <dd> Converts a rope back to a string. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/ropes.nim#L305" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/ropes.nim#L305" target="_blank">Edit</a> </dd>  <dt><pre id="%25%2Cstring%2CopenArray%5BRope%5D" data-language="nim">proc `%`(frmt: string; args: openArray[Rope]): Rope {...}{.gcsafe,
    extern: "nroFormat", raises: [ValueError], tags: [].}</pre></dt> <dd> <code>%</code> substitution operator for ropes. Does not support the <code>$identifier</code> nor <code>${identifier}</code> notations. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">let r1 = "$1 $2 $3" % [rope("Nim"), rope("is"), rope("a great language")]
doAssert $r1 == "Nim is a great language"

let r2 = "$# $# $#" % [rope("Nim"), rope("is"), rope("a great language")]
doAssert $r2 == "Nim is a great language"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/ropes.nim#L310" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/ropes.nim#L310" target="_blank">Edit</a> </dd>  <dt><pre id="addf%2CRope%2Cstring%2CopenArray%5BRope%5D" data-language="nim">proc addf(c: var Rope; frmt: string; args: openArray[Rope]) {...}{.gcsafe,
    extern: "nro$1", raises: [ValueError], tags: [].}</pre></dt> <dd> Shortcut for <code>add(c, frmt % args)</code>. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var r = rope("Dash: ")
r.addf "$1 $2 $3", [rope("Nim"), rope("is"), rope("a great language")]
doAssert $r == "Dash: Nim is a great language"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/ropes.nim#L360" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/ropes.nim#L360" target="_blank">Edit</a> </dd>  <dt><pre id="equalsFile%2CRope%2CFile" data-language="nim">proc equalsFile(r: Rope; f: File): bool {...}{.gcsafe, extern: "nro$1File",
    raises: [IOError], tags: [ReadIOEffect].}</pre></dt> <dd> Returns true if the contents of the file <code>f</code> equal <code>r</code>. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/ropes.nim#L373" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/ropes.nim#L373" target="_blank">Edit</a> </dd>  <dt><pre id="equalsFile%2CRope%2Cstring" data-language="nim">proc equalsFile(r: Rope; filename: string): bool {...}{.gcsafe, extern: "nro$1Str",
    raises: [IOError], tags: [ReadIOEffect].}</pre></dt> <dd> Returns true if the contents of the file <code>f</code> equal <code>r</code>. If <code>f</code> does not exist, false is returned. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/ropes.nim#L402" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/ropes.nim#L402" target="_blank">Edit</a> </dd> </dl>  <h2 id="15">Iterators</h2> <dl>  <dt><pre id="leaves.i%2CRope" data-language="nim">iterator leaves(r: Rope): string {...}{.raises: [], tags: [].}</pre></dt> <dd> Iterates over any leaf string in the rope <code>r</code>. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">let r = rope("Hello") &amp; rope(", Nim!")
let s = ["Hello", ", Nim!"]
var index = 0
for leave in r.leaves:
  doAssert leave == s[index]
  inc index</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/ropes.nim#L271" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/ropes.nim#L271" target="_blank">Edit</a> </dd>  <dt><pre id="items.i%2CRope" data-language="nim">iterator items(r: Rope): char {...}{.raises: [], tags: [].}</pre></dt> <dd> Iterates over any character in the rope <code>r</code>. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/ropes.nim#L292" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/ropes.nim#L292" target="_blank">Edit</a> </dd> </dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2006&ndash;2021 Andreas Rumpf<br>Licensed under the MIT License.<br>
    <a href="https://nim-lang.org/docs/ropes.html" class="_attribution-link">https://nim-lang.org/docs/ropes.html</a>
  </p>
</div>
