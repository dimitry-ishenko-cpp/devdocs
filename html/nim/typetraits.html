<h1 class="title">typetraits</h1>  
<p>This module defines compile-time reflection procs for working with types.</p> <p>Unstable API.</p>  <h2 id="6">Imports</h2> <dl> <a href="since.html">since</a>, <a href="macros.html">macros</a> </dl>  <h2 id="7">Types</h2> <dl>  <dt><pre id="StaticParam" data-language="nim">StaticParam[value] = object</pre></dt> <dd> used to wrap a static value in <code>genericParams</code> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/typetraits.nim#L96" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/typetraits.nim#L96" target="_blank">Edit</a> </dd> </dl>  <h2 id="12">Procs</h2> <dl>  <dt><pre id="name%2Ctypedesc" data-language="nim">proc name(t: typedesc): string {...}{.magic: "TypeTrait".}</pre></dt> <dd> <p>Returns the name of the given type.</p> <p>Alias for system.`$`(t) since Nim v0.20.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/typetraits.nim#L18" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/typetraits.nim#L18" target="_blank">Edit</a> </dd>  <dt><pre id="arity%2Ctypedesc" data-language="nim">proc arity(t: typedesc): int {...}{.magic: "TypeTrait".}</pre></dt> <dd> Returns the arity of the given type. This is the number of "type" components or the number of generic parameters a given type <code>t</code> has. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">assert arity(seq[string]) == 1
assert arity(array[3, int]) == 2
assert arity((int, int, float, string)) == 4</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/typetraits.nim#L23" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/typetraits.nim#L23" target="_blank">Edit</a> </dd>  <dt><pre id="genericHead%2Ctypedesc" data-language="nim">proc genericHead(t: typedesc): typedesc {...}{.magic: "TypeTrait".}</pre></dt> <dd> <p>Accepts an instantiated generic type and returns its uninstantiated form. A compile-time error will be produced if the supplied type is not generic.</p> <p>See also:</p> <ul class="simple">
<li><a href="#stripGenericParams,typedesc">stripGenericParams</a></li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">type
  Foo[T] = object
  FooInst = Foo[int]
  Foo2 = genericHead(FooInst)
doAssert Foo2 is Foo and Foo is Foo2
doAssert genericHead(Foo[seq[string]]) is Foo
doAssert not compiles(genericHead(int))

type Generic = concept f
  type _ = genericHead(typeof(f))
proc bar(a: Generic): typeof(a) = a
doAssert bar(Foo[string].default) == Foo[string]()
doAssert not compiles bar(string.default)

when false: # these don't work yet
  doAssert genericHead(Foo[int])[float] is Foo[float]
  doAssert seq[int].genericHead is seq</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/typetraits.nim#L31" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/typetraits.nim#L31" target="_blank">Edit</a> </dd>  <dt><pre id="stripGenericParams%2Ctypedesc" data-language="nim">proc stripGenericParams(t: typedesc): typedesc {...}{.magic: "TypeTrait".}</pre></dt> <dd> This trait is similar to <a href="#genericHead,typedesc">genericHead</a>, but instead of producing error for non-generic types, it will just return them unmodified. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/typetraits.nim#L58" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/typetraits.nim#L58" target="_blank">Edit</a> </dd>  <dt><pre id="supportsCopyMem%2Ctypedesc" data-language="nim">proc supportsCopyMem(t: typedesc): bool {...}{.magic: "TypeTrait".}</pre></dt> <dd> <p>This trait returns true if the type <code>t</code> is safe to use for <span id="copymem_1">copyMem</span>.</p> <p>Other languages name a type like these <span id="blob_1">blob</span>.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/typetraits.nim#L63" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/typetraits.nim#L63" target="_blank">Edit</a> </dd>  <dt><pre id="isNamedTuple%2Ctypedesc" data-language="nim">proc isNamedTuple(T: typedesc): bool {...}{.magic: "TypeTrait".}</pre></dt> <dd> Return true for named tuples, false for any other type. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/typetraits.nim#L69" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/typetraits.nim#L69" target="_blank">Edit</a> </dd>  <dt><pre id="distinctBase%2Ctypedesc" data-language="nim">proc distinctBase(T: typedesc): typedesc {...}{.magic: "TypeTrait".}</pre></dt> <dd> Returns base type for distinct types, works only for distinct types. compile time error otherwise <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/typetraits.nim#L72" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/typetraits.nim#L72" target="_blank">Edit</a> </dd>  <dt><pre id="tupleLen%2Ctypedesc%5B%5D" data-language="nim">proc tupleLen(T: typedesc[tuple]): int {...}{.magic: "TypeTrait".}</pre></dt> <dd> Return number of elements of <code>T</code> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/typetraits.nim#L84" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/typetraits.nim#L84" target="_blank">Edit</a> </dd> </dl>  <h2 id="18">Templates</h2> <dl>  <dt><pre id="distinctBase.t%2CT" data-language="nim">template distinctBase[T](a: T): untyped</pre></dt> <dd> overload for values <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">type MyInt = distinct int
doAssert 12.MyInt.distinctBase == 12</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/typetraits.nim#L77" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/typetraits.nim#L77" target="_blank">Edit</a> </dd>  <dt><pre id="tupleLen.t" data-language="nim">template tupleLen(t: tuple): int</pre></dt> <dd> Return number of elements of <code>t</code> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/typetraits.nim#L87" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/typetraits.nim#L87" target="_blank">Edit</a> </dd>  <dt><pre id="get.t%2Ctypedesc%5B%5D%2Cstaticint" data-language="nim">template get(T: typedesc[tuple]; i: static int): untyped</pre></dt> <dd> Return <code>i</code>th element of <code>T</code> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/typetraits.nim#L91" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/typetraits.nim#L91" target="_blank">Edit</a> </dd>  <dt><pre id="elementType.t%2Cuntyped" data-language="nim">template elementType(a: untyped): typedesc</pre></dt> <dd> return element type of <code>a</code>, which can be any iterable (over which you can iterate) <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">iterator myiter(n: int): auto =
  for i in 0..&lt;n: yield i
doAssert elementType(@[1,2]) is int
doAssert elementType("asdf") is char
doAssert elementType(myiter(3)) is int</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/typetraits.nim#L100" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/typetraits.nim#L100" target="_blank">Edit</a> </dd>  <dt><pre id="genericParams.t%2Ctypedesc" data-language="nim">template genericParams(T: typedesc): untyped</pre></dt> <dd> return tuple of generic params for generic <code>T</code> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">type Foo[T1, T2] = object
doAssert genericParams(Foo[float, string]) is (float, string)
type Bar[N: static float, T] = object
doAssert genericParams(Bar[1.0, string]) is (StaticParam[1.0], string)
doAssert genericParams(Bar[1.0, string]).get(0).value == 1.0
doAssert genericParams(seq[Bar[2.0, string]]).get(0) is Bar[2.0, string]
var s: seq[Bar[3.0, string]]
doAssert genericParams(typeof(s)) is (Bar[3.0, string],)

# NOTE: For the builtin array type, the index generic param will
#       **always** become a range type after it's bound to a variable.
doAssert genericParams(array[10, int]) is (StaticParam[10], int)
var a: array[10, int]
doAssert genericParams(typeof(a)) is (range[0..9], int)</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/typetraits.nim#L168" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/typetraits.nim#L168" target="_blank">Edit</a> </dd> </dl>  <h2 id="19">Exports</h2> <dl> <a href="dollars.html#%24,int"><span class="Identifier">$</span></a>, <a href="dollars.html#%24,cstring"><span class="Identifier">$</span></a>, <a href="dollars.html#%24,array%5BIDX,T%5D"><span class="Identifier">$</span></a>, <a href="dollars.html#%24,seq%5BT%5D"><span class="Identifier">$</span></a>, <a href="dollars.html#%24,char"><span class="Identifier">$</span></a>, <a href="dollars.html#%24,int64"><span class="Identifier">$</span></a>, <a href="dollars.html#%24,Enum"><span class="Identifier">$</span></a>, <a href="dollars.html#%24,openArray%5BT%5D"><span class="Identifier">$</span></a>, <a href="dollars.html#%24,set%5BT%5D"><span class="Identifier">$</span></a>, <a href="dollars.html#%24,T"><span class="Identifier">$</span></a>, <a href="dollars.html#%24,bool"><span class="Identifier">$</span></a>, <a href="dollars.html#%24,typedesc"><span class="Identifier">$</span></a>, <a href="dollars.html#%24,HSlice%5BT,U%5D"><span class="Identifier">$</span></a>, <a href="dollars.html#%24,string"><span class="Identifier">$</span></a>, <a href="dollars.html#%24,uint64"><span class="Identifier">$</span></a>, <a href="dollars.html#%24,float"><span class="Identifier">$</span></a>, <a href="widestrs.html#%24,WideCString,int,int"><span class="Identifier">$</span></a>, <a href="widestrs.html#%24,WideCString"><span class="Identifier">$</span></a> </dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2006&ndash;2021 Andreas Rumpf<br>Licensed under the MIT License.<br>
    <a href="https://nim-lang.org/docs/typetraits.html" class="_attribution-link">https://nim-lang.org/docs/typetraits.html</a>
  </p>
</div>
