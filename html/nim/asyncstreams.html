<h1 class="title">std/asyncstreams</h1> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/asyncstreams.nim#L1" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncstreams.nim#L1" target="_blank">Edit</a>  <p class="module-desc">Unstable API.</p>  <h2 id="6">Imports</h2> <dl> <a href="asyncfutures.html">asyncfutures</a>, <a href="deques.html">deques</a> </dl>   <h2 id="7">Types</h2> <dl> <div id="FutureStream"> <dt><pre data-language="nim">FutureStream[T] = ref object
  error*: ref Exception</pre></dt> <dd> Special future that acts as a queue. Its API is still experimental and so is subject to change. <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/asyncstreams.nim#L20" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncstreams.nim#L20" target="_blank">Edit</a> </dd> </div> </dl>   <h2 id="12">Procs</h2> <dl> <div id="callback=-procs-all"> <div id="callback=,FutureStream[T],proc(FutureStream[T])"> <dt><pre data-language="nim">proc callback=[T](future: FutureStream[T];
                  cb: proc (future: FutureStream[T]) {.closure, ...gcsafe.})</pre></dt> <dd> <p>Sets the callback proc to be called when data was placed inside the future stream.</p> <p>The callback is also called when the future is completed. So you should use <code><span class="Identifier">finished</span></code> to check whether data is available.</p> <p>If the future stream already has data or is finished then <code><span class="Identifier">cb</span></code> will be called immediately.</p> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/asyncstreams.nim#L60" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncstreams.nim#L60" target="_blank">Edit</a> </dd> </div> </div> <div id="complete-procs-all"> <div id="complete,FutureStream[T]"> <dt><pre data-language="nim">proc complete[T](future: FutureStream[T])</pre></dt> <dd> Completes a <code><span class="Identifier">FutureStream</span></code> signalling the end of data. <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/asyncstreams.nim#L45" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncstreams.nim#L45" target="_blank">Edit</a> </dd> </div> </div> <div id="fail-procs-all"> <div id="fail,FutureStream[T],ref.Exception"> <dt><pre data-language="nim">proc fail[T](future: FutureStream[T]; error: ref Exception)</pre></dt> <dd> Completes <code><span class="Identifier">future</span></code> with <code><span class="Identifier">error</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/asyncstreams.nim#L52" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncstreams.nim#L52" target="_blank">Edit</a> </dd> </div> </div> <div id="failed-procs-all"> <div id="failed,FutureStream[T]"> <dt><pre data-language="nim">proc failed[T](future: FutureStream[T]): bool</pre></dt> <dd> Determines whether <code><span class="Identifier">future</span></code> completed with an error. <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/asyncstreams.nim#L81" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncstreams.nim#L81" target="_blank">Edit</a> </dd> </div> </div> <div id="finished-procs-all"> <div id="finished,FutureStream[T]"> <dt><pre data-language="nim">proc finished[T](future: FutureStream[T]): bool</pre></dt> <dd> Check if a <code><span class="Identifier">FutureStream</span></code> is finished. <code><span class="Identifier">true</span></code> value means that no more data will be placed inside the stream <em>and</em> that there is no data waiting to be retrieved. <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/asyncstreams.nim#L75" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncstreams.nim#L75" target="_blank">Edit</a> </dd> </div> </div> <div id="len-procs-all"> <div id="len,FutureStream[T]"> <dt><pre data-language="nim">proc len[T](future: FutureStream[T]): int</pre></dt> <dd> Returns the amount of data pieces inside the stream. <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/asyncstreams.nim#L145" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncstreams.nim#L145" target="_blank">Edit</a> </dd> </div> </div> <div id="newFutureStream-procs-all"> <div id="newFutureStream,string"> <dt><pre data-language="nim">proc newFutureStream[T](fromProc = "unspecified"): FutureStream[T]</pre></dt> <dd> Create a new <code><span class="Identifier">FutureStream</span></code>. This future's callback is activated when two events occur:<ul class="simple">
<li>New data is written into the future stream.</li> <li>The future stream is completed (this means that no more data will be written).</li> </ul> <p>Specifying <code><span class="Identifier">fromProc</span></code>, which is a string specifying the name of the proc that this future belongs to, is a good habit as it helps with debugging.</p> <p><strong>Note:</strong> The API of FutureStream is still new and so has a higher likelihood of changing in the future.</p> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/asyncstreams.nim#L29" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncstreams.nim#L29" target="_blank">Edit</a> </dd> </div> </div> <div id="read-procs-all"> <div id="read,FutureStream[T]"> <dt><pre data-language="nim">proc read[T](future: FutureStream[T]): owned(Future[(bool, T)])</pre></dt> <dd> <p>Returns a future that will complete when the <code><span class="Identifier">FutureStream</span></code> has data placed into it. The future will be completed with the oldest value stored inside the stream. The return value will also determine whether data was retrieved, <code><span class="Identifier">false</span></code> means that the future stream was completed and no data was retrieved.</p> <p>This function will remove the data that was returned from the underlying <code><span class="Identifier">FutureStream</span></code>.</p> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/asyncstreams.nim#L100" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncstreams.nim#L100" target="_blank">Edit</a> </dd> </div> </div> <div id="write-procs-all"> <div id="write,FutureStream[T],T"> <dt><pre data-language="nim">proc write[T](future: FutureStream[T]; value: T): Future[void]</pre></dt> <dd> <p>Writes the specified value inside the specified future stream.</p> <p>This will raise <code><span class="Identifier">ValueError</span></code> if <code><span class="Identifier">future</span></code> is finished.</p> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/asyncstreams.nim#L85" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncstreams.nim#L85" target="_blank">Edit</a> </dd> </div> </div> </dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2006&ndash;2024 Andreas Rumpf<br>Licensed under the MIT License.<br>
    <a href="https://nim-lang.org/docs/asyncstreams.html" class="_attribution-link">https://nim-lang.org/docs/asyncstreams.html</a>
  </p>
</div>
