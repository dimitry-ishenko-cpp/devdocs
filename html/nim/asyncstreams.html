<h1 class="title">asyncstreams</h1>  <p class="module-desc">Unstable API.</p>  <h2 id="6">Imports</h2> <dl> <a href="asyncfutures.html">asyncfutures</a>, <a href="deques.html">deques</a> </dl>  <h2 id="7">Types</h2> <dl>  <dt><pre id="FutureStream" data-language="nim">FutureStream[T] = ref object
  queue: Deque[T]
  finished: bool
  cb: proc () {...}{.closure, gcsafe.}
  error*: ref Exception</pre></dt> <dd> Special future that acts as a queue. Its API is still experimental and so is subject to change. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncstreams.nim#L17" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncstreams.nim#L17" target="_blank">Edit</a> </dd> </dl>  <h2 id="12">Procs</h2> <dl>  <dt><pre id="newFutureStream%2Cstring" data-language="nim">proc newFutureStream[T](fromProc = "unspecified"): FutureStream[T]</pre></dt> <dd> Create a new <code>FutureStream</code>. This future's callback is activated when two events occur:<ul class="simple">
<li>New data is written into the future stream.</li> <li>The future stream is completed (this means that no more data will be written).</li> </ul> <p>Specifying <code>fromProc</code>, which is a string specifying the name of the proc that this future belongs to, is a good habit as it helps with debugging.</p> <p><strong>Note:</strong> The API of FutureStream is still new and so has a higher likelihood of changing in the future.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncstreams.nim#L26" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncstreams.nim#L26" target="_blank">Edit</a> </dd>  <dt><pre id="complete%2CFutureStream%5BT%5D" data-language="nim">proc complete[T](future: FutureStream[T])</pre></dt> <dd> Completes a <code>FutureStream</code> signalling the end of data. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncstreams.nim#L42" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncstreams.nim#L42" target="_blank">Edit</a> </dd>  <dt><pre id="fail%2CFutureStream%5BT%5D%2Cref.Exception" data-language="nim">proc fail[T](future: FutureStream[T]; error: ref Exception)</pre></dt> <dd> Completes <code>future</code> with <code>error</code>. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncstreams.nim#L49" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncstreams.nim#L49" target="_blank">Edit</a> </dd>  <dt><pre id="callback%3D%2CFutureStream%5BT%5D%2Cproc%28FutureStream%5BT%5D%29" data-language="nim">proc callback=[T](future: FutureStream[T];
                  cb: proc (future: FutureStream[T]) {...}{.closure, gcsafe.})</pre></dt> <dd> <p>Sets the callback proc to be called when data was placed inside the future stream.</p> <p>The callback is also called when the future is completed. So you should use <code>finished</code> to check whether data is available.</p> <p>If the future stream already has data or is finished then <code>cb</code> will be called immediately.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncstreams.nim#L57" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncstreams.nim#L57" target="_blank">Edit</a> </dd>  <dt><pre id="finished%2CFutureStream%5BT%5D" data-language="nim">proc finished[T](future: FutureStream[T]): bool</pre></dt> <dd> Check if a <code>FutureStream</code> is finished. <code>true</code> value means that no more data will be placed inside the stream <em>and</em> that there is no data waiting to be retrieved. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncstreams.nim#L72" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncstreams.nim#L72" target="_blank">Edit</a> </dd>  <dt><pre id="failed%2CFutureStream%5BT%5D" data-language="nim">proc failed[T](future: FutureStream[T]): bool</pre></dt> <dd> Determines whether <code>future</code> completed with an error. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncstreams.nim#L78" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncstreams.nim#L78" target="_blank">Edit</a> </dd>  <dt><pre id="write%2CFutureStream%5BT%5D%2CT" data-language="nim">proc write[T](future: FutureStream[T]; value: T): Future[void]</pre></dt> <dd> <p>Writes the specified value inside the specified future stream.</p> <p>This will raise <code>ValueError</code> if <code>future</code> is finished.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncstreams.nim#L82" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncstreams.nim#L82" target="_blank">Edit</a> </dd>  <dt><pre id="read%2CFutureStream%5BT%5D" data-language="nim">proc read[T](future: FutureStream[T]): owned(Future[(bool, T)])</pre></dt> <dd> <p>Returns a future that will complete when the <code>FutureStream</code> has data placed into it. The future will be completed with the oldest value stored inside the stream. The return value will also determine whether data was retrieved, <code>false</code> means that the future stream was completed and no data was retrieved.</p> <p>This function will remove the data that was returned from the underlying <code>FutureStream</code>.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncstreams.nim#L97" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncstreams.nim#L97" target="_blank">Edit</a> </dd>  <dt><pre id="len%2CFutureStream%5BT%5D" data-language="nim">proc len[T](future: FutureStream[T]): int</pre></dt> <dd> Returns the amount of data pieces inside the stream. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncstreams.nim#L142" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncstreams.nim#L142" target="_blank">Edit</a> </dd> </dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2006&ndash;2021 Andreas Rumpf<br>Licensed under the MIT License.<br>
    <a href="https://nim-lang.org/docs/asyncstreams.html" class="_attribution-link">https://nim-lang.org/docs/asyncstreams.html</a>
  </p>
</div>
