<h1 class="title">std/json</h1> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L1" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L1" target="_blank">Edit</a>  <p class="module-desc">This module implements a simple high performance <span id="json_1">JSON</span> parser. JSON (JavaScript Object Notation) is a lightweight data-interchange format that is easy for humans to read and write (unlike XML). It is easy for machines to parse and generate. JSON is based on a subset of the JavaScript Programming Language, Standard ECMA-262 3rd Edition - December 1999. </p>
<h2 id="see-also">See also</h2>
<ul class="simple">
<li><a href="parsejson.html">std/parsejson</a></li> <li><a href="jsonutils.html">std/jsonutils</a></li> <li><a href="marshal.html">std/marshal</a></li> <li><a href="jscore.html">std/jscore</a></li> </ul> <h2 id="overview">Overview</h2> <h3 id="overview-parsing-json">Parsing JSON</h3>
<p>JSON often arrives into your program (via an API or a file) as a <code><span class="Identifier">string</span></code>. The first step is to change it from its serialized form into a nested object structure called a <code><span class="Identifier">JsonNode</span></code>.</p> <p>The <code><span class="Identifier">parseJson</span></code> procedure takes a string containing JSON and returns a <code><span class="Identifier">JsonNode</span></code> object. This is an object variant and it is either a <code><span class="Identifier">JObject</span></code>, <code><span class="Identifier">JArray</span></code>, <code><span class="Identifier">JString</span></code>, <code><span class="Identifier">JInt</span></code>, <code><span class="Identifier">JFloat</span></code>, <code><span class="Identifier">JBool</span></code> or <code><span class="Identifier">JNull</span></code>. You check the kind of this object variant by using the <code><span class="Identifier">kind</span></code> accessor.</p> <p>For a <code><span class="Identifier">JsonNode</span></code> who's kind is <code><span class="Identifier">JObject</span></code>, you can access its fields using the <code><span class="Punctuation">[</span><span class="Punctuation">]</span></code> operator. The following example shows how to do this:</p> 
<pre class="listing" data-language="nim">import std/json

let jsonNode = parseJson("""{"key": 3.14}""")

doAssert jsonNode.kind == JObject
doAssert jsonNode["key"].kind == JFloat</pre> <h3 id="overview-reading-values">Reading values</h3>
<p>Once you have a <code><span class="Identifier">JsonNode</span></code>, retrieving the values can then be achieved by using one of the helper procedures, which include:</p> <ul class="simple">
<li><code><span class="Identifier">getInt</span></code></li> <li><code><span class="Identifier">getFloat</span></code></li> <li><code><span class="Identifier">getStr</span></code></li> <li><code><span class="Identifier">getBool</span></code></li> </ul> <p>To retrieve the value of <code><span class="StringLit">"key"</span></code> you can do the following:</p> 
<pre class="listing" data-language="nim">import std/json

let jsonNode = parseJson("""{"key": 3.14}""")

doAssert jsonNode["key"].getFloat() == 3.14</pre> <p><strong>Important:</strong> The <code><span class="Punctuation">[</span><span class="Punctuation">]</span></code> operator will raise an exception when the specified field does not exist.</p> <h3 id="overview-handling-optional-keys">Handling optional keys</h3>
<p>By using the <code><span class="Punctuation">{</span><span class="Punctuation">}</span></code> operator instead of <code><span class="Punctuation">[</span><span class="Punctuation">]</span></code>, it will return <code><span class="Keyword">nil</span></code> when the field is not found. The <code><span class="Identifier">get</span></code>-family of procedures will return a type's default value when called on <code><span class="Keyword">nil</span></code>.</p> 
<pre class="listing" data-language="nim">import std/json

let jsonNode = parseJson("{}")

doAssert jsonNode{"nope"}.getInt() == 0
doAssert jsonNode{"nope"}.getFloat() == 0
doAssert jsonNode{"nope"}.getStr() == ""
doAssert jsonNode{"nope"}.getBool() == false</pre> <h3 id="overview-using-default-values">Using default values</h3>
<p>The <code><span class="Identifier">get</span></code>-family helpers also accept an additional parameter which allow you to fallback to a default value should the key's values be <code><span class="Identifier">null</span></code>:</p> 
<pre class="listing" data-language="nim">import std/json

let jsonNode = parseJson("""{"key": 3.14, "key2": null}""")

doAssert jsonNode["key"].getFloat(6.28) == 3.14
doAssert jsonNode["key2"].getFloat(3.14) == 3.14
doAssert jsonNode{"nope"}.getFloat(3.14) == 3.14 # note the {}</pre> <h3 id="overview-unmarshalling">Unmarshalling</h3>
<p>In addition to reading dynamic data, Nim can also unmarshal JSON directly into a type with the <code><span class="Identifier">to</span></code> macro.</p> <p>Note: Use <a href="options.html#Option">Option</a> for keys sometimes missing in json responses, and backticks around keys with a reserved keyword as name.</p> 
<pre class="listing" data-language="nim">import std/json
import std/options

type
  User = object
    name: string
    age: int
    `type`: Option[string]

let userJson = parseJson("""{ "name": "Nim", "age": 12 }""")
let user = to(userJson, User)
if user.`type`.isSome():
  assert user.`type`.get() != "robot"</pre> <h2 id="creating-json">Creating JSON</h2>
<p>This module can also be used to comfortably create JSON using the <code><span class="Operator">%*</span></code> operator:</p> 
<pre class="listing" data-language="nim">import std/json

var hisName = "John"
let herAge = 31
var j = %*
  [
    { "name": hisName, "age": 30 },
    { "name": "Susan", "age": herAge }
  ]

var j2 = %* {"name": "Isaac", "books": ["Robot Dreams"]}
j2["details"] = %* {"age":35, "pi":3.1415}
echo j2</pre> <p>See also: std/jsonutils for hookable json serialization/deserialization of arbitrary types.</p> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">import std/json
## Note: for JObject, key ordering is preserved, unlike in some languages,
## this is convenient for some use cases. Example:
type Foo = object
  a1, a2, a0, a3, a4: int
doAssert $(%* Foo()) == """{"a1":0,"a2":0,"a0":0,"a3":0,"a4":0}"""</pre>  <h2 id="6">Imports</h2> <dl> <a href="hashes.html">hashes</a>, <a href="tables.html">tables</a>, <a href="strutils.html">strutils</a>, <a href="lexbase.html">lexbase</a>, <a href="streams.html">streams</a>, <a href="macros.html">macros</a>, <a href="parsejson.html">parsejson</a>, <a href="options.html">options</a>, <a href="since.html">since</a> </dl>   <h2 id="7">Types</h2> <dl> <div id="JsonNode"> <dt><pre>JsonNode = ref JsonNodeObj</pre></dt> <dd> JSON node <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L194" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L194" target="_blank">Edit</a> </dd> </div> <div id="JsonNodeKind"> <dt><pre data-language="nim">JsonNodeKind = enum
  JNull, JBool, JInt, JFloat, JString, JObject, JArray</pre></dt> <dd> possible JSON node types <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L185" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L185" target="_blank">Edit</a> </dd> </div> <div id="JsonNodeObj"> <dt><pre data-language="nim">JsonNodeObj {.acyclic.} = object
  case kind*: JsonNodeKind
  of JString:
    str*: string
  of JInt:
    num*: BiggestInt
  of JFloat:
    fnum*: float
  of JBool:
    bval*: bool
  of JNull:
    nil
  of JObject:
    fields*: OrderedTable[string, JsonNode]
  of JArray:
    elems*: seq[JsonNode]</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L195" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L195" target="_blank">Edit</a> </dd> </div> </dl>   <h2 id="12">Procs</h2> <dl> <div id="$-procs-all"> <div id="$,JsonNode"> <dt><pre data-language="nim">proc `$`(node: JsonNode): string {....raises: [], tags: [], forbids: [].}</pre></dt> <dd> Converts <code><span class="Identifier">node</span></code> to its JSON Representation on one line. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L824" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L824" target="_blank">Edit</a> </dd> </div> </div> <div id="%-procs-all"> <div id="%,bool"> <dt><pre data-language="nim">proc `%`(b: bool): JsonNode {....raises: [], tags: [], forbids: [].}</pre></dt> <dd> Generic constructor for JSON data. Creates a new <code><span class="Identifier">JBool</span> <span class="Identifier">JsonNode</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L354" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L354" target="_blank">Edit</a> </dd> </div> <div id="%,openArray[tuple[string,JsonNode]]"> <dt><pre data-language="nim">proc `%`(keyVals: openArray[tuple[key: string, val: JsonNode]]): JsonNode {.
    ...raises: [], tags: [], forbids: [].}</pre></dt> <dd> Generic constructor for JSON data. Creates a new <code><span class="Identifier">JObject</span> <span class="Identifier">JsonNode</span></code> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L358" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L358" target="_blank">Edit</a> </dd> </div> <div id="%,BiggestInt"> <dt><pre data-language="nim">proc `%`(n: BiggestInt): JsonNode {....raises: [], tags: [], forbids: [].}</pre></dt> <dd> Generic constructor for JSON data. Creates a new <code><span class="Identifier">JInt</span> <span class="Identifier">JsonNode</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L337" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L337" target="_blank">Edit</a> </dd> </div> <div id="%,BiggestUInt"> <dt><pre data-language="nim">proc `%`(n: BiggestUInt): JsonNode {....raises: [], tags: [], forbids: [].}</pre></dt> <dd> Generic constructor for JSON data. Creates a new <code><span class="Identifier">JInt</span> <span class="Identifier">JsonNode</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L330" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L330" target="_blank">Edit</a> </dd> </div> <div id="%,float"> <dt><pre data-language="nim">proc `%`(n: float): JsonNode {....raises: [], tags: [], forbids: [].}</pre></dt> <dd> Generic constructor for JSON data. Creates a new <code><span class="Identifier">JFloat</span> <span class="Identifier">JsonNode</span></code>. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">assert $(%[NaN, Inf, -Inf, 0.0, -0.0, 1.0, 1e-2]) == """["nan","inf","-inf",0.0,-0.0,1.0,0.01]"""
assert (%NaN).kind == JString
assert (%0.0).kind == JFloat</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L341" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L341" target="_blank">Edit</a> </dd> </div> <div id="%,int"> <dt><pre data-language="nim">proc `%`(n: int): JsonNode {....raises: [], tags: [], forbids: [].}</pre></dt> <dd> Generic constructor for JSON data. Creates a new <code><span class="Identifier">JInt</span> <span class="Identifier">JsonNode</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L326" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L326" target="_blank">Edit</a> </dd> </div> <div id="%,uint"> <dt><pre data-language="nim">proc `%`(n: uint): JsonNode {....raises: [], tags: [], forbids: [].}</pre></dt> <dd> Generic constructor for JSON data. Creates a new <code><span class="Identifier">JInt</span> <span class="Identifier">JsonNode</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L319" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L319" target="_blank">Edit</a> </dd> </div> <div id="%_2"> <dt><pre data-language="nim">proc `%`(o: enum): JsonNode</pre></dt> <dd> Construct a JsonNode that represents the specified enum value as a string. Creates a new <code><span class="Identifier">JString</span> <span class="Identifier">JsonNode</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L411" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L411" target="_blank">Edit</a> </dd> </div> <div id="%,ref."> <dt><pre data-language="nim">proc `%`(o: ref object): JsonNode</pre></dt> <dd> Generic constructor for JSON data. Creates a new <code><span class="Identifier">JObject</span> <span class="Identifier">JsonNode</span></code> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L404" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L404" target="_blank">Edit</a> </dd> </div> <div id="%,string"> <dt><pre data-language="nim">proc `%`(s: string): JsonNode {....raises: [], tags: [], forbids: [].}</pre></dt> <dd> Generic constructor for JSON data. Creates a new <code><span class="Identifier">JString</span> <span class="Identifier">JsonNode</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L315" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L315" target="_blank">Edit</a> </dd> </div> <div id="%,T"> <dt><pre data-language="nim">proc `%`[T: object](o: T): JsonNode</pre></dt> <dd> Construct JsonNode from tuples and objects. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L399" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L399" target="_blank">Edit</a> </dd> </div> <div id="%,openArray[T]"> <dt><pre data-language="nim">proc `%`[T](elements: openArray[T]): JsonNode</pre></dt> <dd> Generic constructor for JSON data. Creates a new <code><span class="Identifier">JArray</span> <span class="Identifier">JsonNode</span></code> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L366" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L366" target="_blank">Edit</a> </dd> </div> <div id="%,Option[T]"> <dt><pre data-language="nim">proc `%`[T](opt: Option[T]): JsonNode</pre></dt> <dd> Generic constructor for JSON data. Creates a new <code><span class="Identifier">JNull</span> <span class="Identifier">JsonNode</span></code> if <code><span class="Identifier">opt</span></code> is empty, otherwise it delegates to the underlying value. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L376" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L376" target="_blank">Edit</a> </dd> </div> <div id="%"> <dt><pre data-language="nim">proc `%`[T](table: Table[string, T] | OrderedTable[string, T]): JsonNode</pre></dt> <dd> Generic constructor for JSON data. Creates a new <code><span class="Identifier">JObject</span> <span class="Identifier">JsonNode</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L371" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L371" target="_blank">Edit</a> </dd> </div> </div> <div id="==-procs-all"> <div id="==,JsonNode,JsonNode"> <dt><pre data-language="nim">proc `==`(a, b: JsonNode): bool {.noSideEffect, ...raises: [], tags: [RootEffect],
                                  forbids: [].}</pre></dt> <dd> Check two nodes for equality <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L447" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L447" target="_blank">Edit</a> </dd> </div> </div> <div id="[]-procs-all"> <div id="[],JsonNode,BackwardsIndex"> <dt><pre data-language="nim">proc `[]`(node: JsonNode; index: BackwardsIndex): JsonNode {.inline, ...raises: [],
    tags: [], forbids: [].}</pre></dt> <dd> <p>Gets the node at <code><span class="Identifier">array</span><span class="Operator">.</span><span class="Identifier">len</span><span class="Operator">-</span><span class="Identifier">i</span></code> in an array through the <code><span class="Operator">^</span></code> operator.</p> <p>i.e. <code><span class="Identifier">j</span><span class="Punctuation">[</span><span class="Operator">^</span><span class="Identifier">i</span><span class="Punctuation">]</span></code> is a shortcut for <code><span class="Identifier">j</span><span class="Punctuation">[</span><span class="Identifier">j</span><span class="Operator">.</span><span class="Identifier">len</span><span class="Operator">-</span><span class="Identifier">i</span><span class="Punctuation">]</span></code>.</p> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">let
  j = parseJson("[1,2,3,4,5]")

doAssert j[^1].getInt == 5
doAssert j[^2].getInt == 4</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L534" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L534" target="_blank">Edit</a> </dd> </div> <div id="[],JsonNode,int"> <dt><pre data-language="nim">proc `[]`(node: JsonNode; index: int): JsonNode {.inline, ...raises: [], tags: [],
    forbids: [].}</pre></dt> <dd> Gets the node at <code><span class="Identifier">index</span></code> in an Array. Result is undefined if <code><span class="Identifier">index</span></code> is out of bounds, but as long as array bound checks are enabled it will result in an exception. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L526" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L526" target="_blank">Edit</a> </dd> </div> <div id="[],JsonNode,string"> <dt><pre data-language="nim">proc `[]`(node: JsonNode; name: string): JsonNode {.inline, ...raises: [KeyError],
    tags: [], forbids: [].}</pre></dt> <dd> Gets a field from a <code><span class="Identifier">JObject</span></code>, which must not be nil. If the value at <code><span class="Identifier">name</span></code> does not exist, raises KeyError. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L517" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L517" target="_blank">Edit</a> </dd> </div> <div id="[],JsonNode,HSlice[U,V]"> <dt><pre data-language="nim">proc `[]`[U, V](a: JsonNode; x: HSlice[U, V]): JsonNode</pre></dt> <dd> <p>Slice operation for JArray.</p> <p>Returns the inclusive range <code><span class="Punctuation">[</span><span class="Identifier">a</span><span class="Punctuation">[</span><span class="Identifier">x</span><span class="Operator">.</span><span class="Identifier">a</span><span class="Punctuation">]</span><span class="Punctuation">,</span> <span class="Identifier">a</span><span class="Punctuation">[</span><span class="Identifier">x</span><span class="Operator">.</span><span class="Identifier">b</span><span class="Punctuation">]</span><span class="Punctuation">]</span></code>:</p> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">import std/json
let arr = %[0,1,2,3,4,5]
doAssert arr[2..4] == %[2,3,4]
doAssert arr[2..^2] == %[2,3,4]
doAssert arr[^4..^2] == %[2,3,4]</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L547" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L547" target="_blank">Edit</a> </dd> </div> </div> <div id="[]=-procs-all"> <div id="[]=,JsonNode,string,JsonNode"> <dt><pre data-language="nim">proc `[]=`(obj: JsonNode; key: string; val: JsonNode) {.inline, ...raises: [],
    tags: [], forbids: [].}</pre></dt> <dd> Sets a field from a <code><span class="Identifier">JObject</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L394" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L394" target="_blank">Edit</a> </dd> </div> </div> <div id="add-procs-all"> <div id="add,JsonNode,JsonNode"> <dt><pre data-language="nim">proc add(father, child: JsonNode) {....raises: [], tags: [], forbids: [].}</pre></dt> <dd> Adds <code><span class="Identifier">child</span></code> to a JArray node <code><span class="Identifier">father</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L305" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L305" target="_blank">Edit</a> </dd> </div> <div id="add,JsonNode,string,JsonNode"> <dt><pre data-language="nim">proc add(obj: JsonNode; key: string; val: JsonNode) {....raises: [], tags: [],
    forbids: [].}</pre></dt> <dd> Sets a field from a <code><span class="Identifier">JObject</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L310" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L310" target="_blank">Edit</a> </dd> </div> </div> <div id="contains-procs-all"> <div id="contains,JsonNode,string"> <dt><pre data-language="nim">proc contains(node: JsonNode; key: string): bool {....raises: [], tags: [],
    forbids: [].}</pre></dt> <dd> Checks if <code><span class="Identifier">key</span></code> exists in <code><span class="Identifier">node</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L570" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L570" target="_blank">Edit</a> </dd> </div> <div id="contains,JsonNode,JsonNode"> <dt><pre data-language="nim">proc contains(node: JsonNode; val: JsonNode): bool {....raises: [],
    tags: [RootEffect], forbids: [].}</pre></dt> <dd> Checks if <code><span class="Identifier">val</span></code> exists in array <code><span class="Identifier">node</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L575" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L575" target="_blank">Edit</a> </dd> </div> </div> <div id="copy-procs-all"> <div id="copy,JsonNode"> <dt><pre data-language="nim">proc copy(p: JsonNode): JsonNode {....raises: [], tags: [], forbids: [].}</pre></dt> <dd> Performs a deep copy of <code><span class="Identifier">p</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L636" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L636" target="_blank">Edit</a> </dd> </div> </div> <div id="delete-procs-all"> <div id="delete,JsonNode,string"> <dt><pre data-language="nim">proc delete(obj: JsonNode; key: string) {....raises: [KeyError], tags: [],
    forbids: [].}</pre></dt> <dd> Deletes <code><span class="Identifier">obj</span><span class="Punctuation">[</span><span class="Identifier">key</span><span class="Punctuation">]</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L629" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L629" target="_blank">Edit</a> </dd> </div> </div> <div id="escapeJson-procs-all"> <div id="escapeJson,string"> <dt><pre data-language="nim">proc escapeJson(s: string): string {....raises: [], tags: [], forbids: [].}</pre></dt> <dd> Converts a string <code><span class="Identifier">s</span></code> to its JSON representation with quotes. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L700" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L700" target="_blank">Edit</a> </dd> </div> <div id="escapeJson,string,string"> <dt><pre data-language="nim">proc escapeJson(s: string; result: var string) {....raises: [], tags: [],
    forbids: [].}</pre></dt> <dd> Converts a string <code><span class="Identifier">s</span></code> to its JSON representation with quotes. Appends to <code><span class="Identifier">result</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L693" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L693" target="_blank">Edit</a> </dd> </div> </div> <div id="escapeJsonUnquoted-procs-all"> <div id="escapeJsonUnquoted,string"> <dt><pre data-language="nim">proc escapeJsonUnquoted(s: string): string {....raises: [], tags: [], forbids: [].}</pre></dt> <dd> Converts a string <code><span class="Identifier">s</span></code> to its JSON representation without quotes. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L688" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L688" target="_blank">Edit</a> </dd> </div> <div id="escapeJsonUnquoted,string,string"> <dt><pre data-language="nim">proc escapeJsonUnquoted(s: string; result: var string) {....raises: [], tags: [],
    forbids: [].}</pre></dt> <dd> Converts a string <code><span class="Identifier">s</span></code> to its JSON representation without quotes. Appends to <code><span class="Identifier">result</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L671" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L671" target="_blank">Edit</a> </dd> </div> </div> <div id="getBiggestInt-procs-all"> <div id="getBiggestInt,JsonNode,BiggestInt"> <dt><pre data-language="nim">proc getBiggestInt(n: JsonNode; default: BiggestInt = 0): BiggestInt {.
    ...raises: [], tags: [], forbids: [].}</pre></dt> <dd> <p>Retrieves the BiggestInt value of a <code><span class="Identifier">JInt</span> <span class="Identifier">JsonNode</span></code>.</p> <p>Returns <code><span class="Identifier">default</span></code> if <code><span class="Identifier">n</span></code> is not a <code><span class="Identifier">JInt</span></code>, or if <code><span class="Identifier">n</span></code> is nil.</p> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L265" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L265" target="_blank">Edit</a> </dd> </div> </div> <div id="getBool-procs-all"> <div id="getBool,JsonNode,bool"> <dt><pre data-language="nim">proc getBool(n: JsonNode; default: bool = false): bool {....raises: [], tags: [],
    forbids: [].}</pre></dt> <dd> <p>Retrieves the bool value of a <code><span class="Identifier">JBool</span> <span class="Identifier">JsonNode</span></code>.</p> <p>Returns <code><span class="Identifier">default</span></code> if <code><span class="Identifier">n</span></code> is not a <code><span class="Identifier">JBool</span></code>, or if <code><span class="Identifier">n</span></code> is nil.</p> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L282" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L282" target="_blank">Edit</a> </dd> </div> </div> <div id="getElems-procs-all"> <div id="getElems,JsonNode,seq[JsonNode]"> <dt><pre data-language="nim">proc getElems(n: JsonNode; default: seq[JsonNode] = @[]): seq[JsonNode] {.
    ...raises: [], tags: [], forbids: [].}</pre></dt> <dd> <p>Retrieves the array of a <code><span class="Identifier">JArray</span> <span class="Identifier">JsonNode</span></code>.</p> <p>Returns <code><span class="Identifier">default</span></code> if <code><span class="Identifier">n</span></code> is not a <code><span class="Identifier">JArray</span></code>, or if <code><span class="Identifier">n</span></code> is nil.</p> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L298" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L298" target="_blank">Edit</a> </dd> </div> </div> <div id="getFields-procs-all"> <div id="getFields,JsonNode"> <dt><pre data-language="nim">proc getFields(n: JsonNode; default = initOrderedTable[string, JsonNode](2)): OrderedTable[
    string, JsonNode] {....raises: [], tags: [], forbids: [].}</pre></dt> <dd> <p>Retrieves the key, value pairs of a <code><span class="Identifier">JObject</span> <span class="Identifier">JsonNode</span></code>.</p> <p>Returns <code><span class="Identifier">default</span></code> if <code><span class="Identifier">n</span></code> is not a <code><span class="Identifier">JObject</span></code>, or if <code><span class="Identifier">n</span></code> is nil.</p> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L289" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L289" target="_blank">Edit</a> </dd> </div> </div> <div id="getFloat-procs-all"> <div id="getFloat,JsonNode,float"> <dt><pre data-language="nim">proc getFloat(n: JsonNode; default: float = 0.0): float {....raises: [], tags: [],
    forbids: [].}</pre></dt> <dd> <p>Retrieves the float value of a <code><span class="Identifier">JFloat</span> <span class="Identifier">JsonNode</span></code>.</p> <p>Returns <code><span class="Identifier">default</span></code> if <code><span class="Identifier">n</span></code> is not a <code><span class="Identifier">JFloat</span></code> or <code><span class="Identifier">JInt</span></code>, or if <code><span class="Identifier">n</span></code> is nil.</p> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L272" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L272" target="_blank">Edit</a> </dd> </div> </div> <div id="getInt-procs-all"> <div id="getInt,JsonNode,int"> <dt><pre data-language="nim">proc getInt(n: JsonNode; default: int = 0): int {....raises: [], tags: [],
    forbids: [].}</pre></dt> <dd> <p>Retrieves the int value of a <code><span class="Identifier">JInt</span> <span class="Identifier">JsonNode</span></code>.</p> <p>Returns <code><span class="Identifier">default</span></code> if <code><span class="Identifier">n</span></code> is not a <code><span class="Identifier">JInt</span></code>, or if <code><span class="Identifier">n</span></code> is nil.</p> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L258" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L258" target="_blank">Edit</a> </dd> </div> </div> <div id="getOrDefault-procs-all"> <div id="getOrDefault,JsonNode,string"> <dt><pre data-language="nim">proc getOrDefault(node: JsonNode; key: string): JsonNode {....raises: [], tags: [],
    forbids: [].}</pre></dt> <dd> Gets a field from a <code><span class="Identifier">node</span></code>. If <code><span class="Identifier">node</span></code> is nil or not an object or value at <code><span class="Identifier">key</span></code> does not exist, returns nil <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L608" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L608" target="_blank">Edit</a> </dd> </div> </div> <div id="getStr-procs-all"> <div id="getStr,JsonNode,string"> <dt><pre data-language="nim">proc getStr(n: JsonNode; default: string = ""): string {....raises: [], tags: [],
    forbids: [].}</pre></dt> <dd> <p>Retrieves the string value of a <code><span class="Identifier">JString</span> <span class="Identifier">JsonNode</span></code>.</p> <p>Returns <code><span class="Identifier">default</span></code> if <code><span class="Identifier">n</span></code> is not a <code><span class="Identifier">JString</span></code>, or if <code><span class="Identifier">n</span></code> is nil.</p> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L251" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L251" target="_blank">Edit</a> </dd> </div> </div> <div id="hash-procs-all"> <div id="hash,JsonNode"> <dt><pre data-language="nim">proc hash(n: JsonNode): Hash {.noSideEffect, ...raises: [Exception],
                               tags: [RootEffect], forbids: [].}</pre></dt> <dd> Compute the hash for a JSON node <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L485" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L485" target="_blank">Edit</a> </dd> </div> <div id="hash,OrderedTable[string,JsonNode]"> <dt><pre data-language="nim">proc hash(n: OrderedTable[string, JsonNode]): Hash {.noSideEffect,
    ...raises: [Exception], tags: [RootEffect], forbids: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L483" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L483" target="_blank">Edit</a> </dd> </div> </div> <div id="hasKey-procs-all"> <div id="hasKey,JsonNode,string"> <dt><pre data-language="nim">proc hasKey(node: JsonNode; key: string): bool {....raises: [], tags: [],
    forbids: [].}</pre></dt> <dd> Checks if <code><span class="Identifier">key</span></code> exists in <code><span class="Identifier">node</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L565" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L565" target="_blank">Edit</a> </dd> </div> </div> <div id="len-procs-all"> <div id="len,JsonNode"> <dt><pre data-language="nim">proc len(n: JsonNode): int {....raises: [], tags: [], forbids: [].}</pre></dt> <dd> If <code><span class="Identifier">n</span></code> is a <code><span class="Identifier">JArray</span></code>, it returns the number of elements. If <code><span class="Identifier">n</span></code> is a <code><span class="Identifier">JObject</span></code>, it returns the number of pairs. Else it returns 0. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L508" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L508" target="_blank">Edit</a> </dd> </div> </div> <div id="newJArray-procs-all"> <div id="newJArray"> <dt><pre data-language="nim">proc newJArray(): JsonNode {....raises: [], tags: [], forbids: [].}</pre></dt> <dd> Creates a new <code><span class="Identifier">JArray</span> <span class="Identifier">JsonNode</span></code> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L247" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L247" target="_blank">Edit</a> </dd> </div> </div> <div id="newJBool-procs-all"> <div id="newJBool,bool"> <dt><pre data-language="nim">proc newJBool(b: bool): JsonNode {....raises: [], tags: [], forbids: [].}</pre></dt> <dd> Creates a new <code><span class="Identifier">JBool</span> <span class="Identifier">JsonNode</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L235" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L235" target="_blank">Edit</a> </dd> </div> </div> <div id="newJFloat-procs-all"> <div id="newJFloat,float"> <dt><pre data-language="nim">proc newJFloat(n: float): JsonNode {....raises: [], tags: [], forbids: [].}</pre></dt> <dd> Creates a new <code><span class="Identifier">JFloat</span> <span class="Identifier">JsonNode</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L231" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L231" target="_blank">Edit</a> </dd> </div> </div> <div id="newJInt-procs-all"> <div id="newJInt,BiggestInt"> <dt><pre data-language="nim">proc newJInt(n: BiggestInt): JsonNode {....raises: [], tags: [], forbids: [].}</pre></dt> <dd> Creates a new <code><span class="Identifier">JInt</span> <span class="Identifier">JsonNode</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L227" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L227" target="_blank">Edit</a> </dd> </div> </div> <div id="newJNull-procs-all"> <div id="newJNull"> <dt><pre data-language="nim">proc newJNull(): JsonNode {....raises: [], tags: [], forbids: [].}</pre></dt> <dd> Creates a new <code><span class="Identifier">JNull</span> <span class="Identifier">JsonNode</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L239" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L239" target="_blank">Edit</a> </dd> </div> </div> <div id="newJObject-procs-all"> <div id="newJObject"> <dt><pre data-language="nim">proc newJObject(): JsonNode {....raises: [], tags: [], forbids: [].}</pre></dt> <dd> Creates a new <code><span class="Identifier">JObject</span> <span class="Identifier">JsonNode</span></code> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L243" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L243" target="_blank">Edit</a> </dd> </div> </div> <div id="newJString-procs-all"> <div id="newJString,string"> <dt><pre data-language="nim">proc newJString(s: string): JsonNode {....raises: [], tags: [], forbids: [].}</pre></dt> <dd> Creates a new <code><span class="Identifier">JString</span> <span class="Identifier">JsonNode</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L216" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L216" target="_blank">Edit</a> </dd> </div> </div> <div id="parseFile-procs-all"> <div id="parseFile,string"> <dt><pre data-language="nim">proc parseFile(filename: string): JsonNode {.
    ...raises: [IOError, OSError, JsonParsingError, ValueError],
    tags: [ReadIOEffect, WriteIOEffect], forbids: [].}</pre></dt> <dd> Parses <code><span class="Identifier">file</span></code> into a <code><span class="Identifier">JsonNode</span></code>. If <code><span class="Identifier">file</span></code> contains extra data, it will raise <code><span class="Identifier">JsonParsingError</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L1049" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L1049" target="_blank">Edit</a> </dd> </div> </div> <div id="parseJson-procs-all"> <div id="parseJson,string"> <dt><pre data-language="nim">proc parseJson(buffer: string; rawIntegers = false; rawFloats = false): JsonNode {.
    ...raises: [IOError, OSError, JsonParsingError, ValueError],
    tags: [ReadIOEffect, WriteIOEffect], forbids: [].}</pre></dt> <dd> Parses JSON from <code><span class="Identifier">buffer</span></code>. If <code><span class="Identifier">buffer</span></code> contains extra data, it will raise <code><span class="Identifier">JsonParsingError</span></code>. If <code><span class="Identifier">rawIntegers</span></code> is true, integer literals will not be converted to a <code><span class="Identifier">JInt</span></code> field but kept as raw numbers via <code><span class="Identifier">JString</span></code>. If <code><span class="Identifier">rawFloats</span></code> is true, floating point literals will not be converted to a <code><span class="Identifier">JFloat</span></code> field but kept as raw numbers via <code><span class="Identifier">JString</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L1040" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L1040" target="_blank">Edit</a> </dd> </div> <div id="parseJson,Stream,string"> <dt><pre data-language="nim">proc parseJson(s: Stream; filename: string = ""; rawIntegers = false;
               rawFloats = false): JsonNode {.
    ...raises: [IOError, OSError, IOError, OSError, JsonParsingError, ValueError],
    tags: [ReadIOEffect, WriteIOEffect], forbids: [].}</pre></dt> <dd> Parses from a stream <code><span class="Identifier">s</span></code> into a <code><span class="Identifier">JsonNode</span></code>. <code><span class="Identifier">filename</span></code> is only needed for nice error messages. If <code><span class="Identifier">s</span></code> contains extra data, it will raise <code><span class="Identifier">JsonParsingError</span></code>. This closes the stream <code><span class="Identifier">s</span></code> after it's done. If <code><span class="Identifier">rawIntegers</span></code> is true, integer literals will not be converted to a <code><span class="Identifier">JInt</span></code> field but kept as raw numbers via <code><span class="Identifier">JString</span></code>. If <code><span class="Identifier">rawFloats</span></code> is true, floating point literals will not be converted to a <code><span class="Identifier">JFloat</span></code> field but kept as raw numbers via <code><span class="Identifier">JString</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L949" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L949" target="_blank">Edit</a> </dd> </div> </div> <div id="pretty-procs-all"> <div id="pretty,JsonNode,int"> <dt><pre data-language="nim">proc pretty(node: JsonNode; indent = 2): string {....raises: [], tags: [],
    forbids: [].}</pre></dt> <dd> <p>Returns a JSON Representation of <code><span class="Identifier">node</span></code>, with indentation and on multiple lines.</p> <p>Similar to prettyprint in Python.</p> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">let j = %* {"name": "Isaac", "books": ["Robot Dreams"],
            "details": {"age": 35, "pi": 3.1415}}
doAssert pretty(j) == """
{
  "name": "Isaac",
  "books": [
    "Robot Dreams"
  ],
  "details": {
    "age": 35,
    "pi": 3.1415
  }
}"""</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L802" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L802" target="_blank">Edit</a> </dd> </div> </div> <div id="to-procs-all"> <div id="to,JsonNode,typedesc[T]"> <dt><pre data-language="nim">proc to[T](node: JsonNode; t: typedesc[T]): T</pre></dt> <dd> <p><span id="unmarshals_1">Unmarshals</span> the specified node into the object type specified.</p> <p>Known limitations:</p> <ul class="simple">
<li>Heterogeneous arrays are not supported.</li> <li>Sets in object variants are not supported.</li> <li>Not nil annotations are not supported.</li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">let jsonNode = parseJson("""
      {
        "person": {
          "name": "Nimmer",
          "age": 21
        },
        "list": [1, 2, 3, 4]
      }
    """)

type
  Person = object
    name: string
    age: int

  Data = object
    person: Person
    list: seq[int]

var data = to(jsonNode, Data)
doAssert data.person.name == "Nimmer"
doAssert data.person.age == 21
doAssert data.list == @[1, 2, 3, 4]</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L1331" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L1331" target="_blank">Edit</a> </dd> </div> </div> <div id="toUgly-procs-all"> <div id="toUgly,string,JsonNode"> <dt><pre data-language="nim">proc toUgly(result: var string; node: JsonNode) {....raises: [], tags: [],
    forbids: [].}</pre></dt> <dd> <p>Converts <code><span class="Identifier">node</span></code> to its JSON Representation, without regard for human readability. Meant to improve <code><span class="Operator">$</span></code> string conversion performance.</p> <p>JSON representation is stored in the passed <code><span class="Identifier">result</span></code></p> <p>This provides higher efficiency than the <code><span class="Identifier">pretty</span></code> procedure as it does <strong>not</strong> attempt to format the resulting JSON to make it human readable.</p> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L705" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L705" target="_blank">Edit</a> </dd> </div> </div> <div id="{}-procs-all"> <div id="{},JsonNode,varargs[int]"> <dt><pre data-language="nim">proc `{}`(node: JsonNode; index: varargs[int]): JsonNode {....raises: [], tags: [],
    forbids: [].}</pre></dt> <dd> Traverses the node and gets the given value. If any of the indexes do not exist, returns <code><span class="Keyword">nil</span></code>. Also returns <code><span class="Keyword">nil</span></code> if one of the intermediate data structures is not an array. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L598" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L598" target="_blank">Edit</a> </dd> </div> <div id="{},JsonNode,string"> <dt><pre data-language="nim">proc `{}`(node: JsonNode; key: string): JsonNode {....raises: [], tags: [],
    forbids: [].}</pre></dt> <dd> Gets a field from a <code><span class="Identifier">node</span></code>. If <code><span class="Identifier">node</span></code> is nil or not an object or value at <code><span class="Identifier">key</span></code> does not exist, returns nil <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L614" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L614" target="_blank">Edit</a> </dd> </div> <div id="{},JsonNode,varargs[string]"> <dt><pre data-language="nim">proc `{}`(node: JsonNode; keys: varargs[string]): JsonNode {....raises: [],
    tags: [], forbids: [].}</pre></dt> <dd> <p>Traverses the node and gets the given value. If any of the keys do not exist, returns <code><span class="Keyword">nil</span></code>. Also returns <code><span class="Keyword">nil</span></code> if one of the intermediate data structures is not an object.</p> <p>This proc can be used to create tree structures on the fly (sometimes called <span id="autovivification_1">autovivification</span>): </p> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var myjson = %* {"parent": {"child": {"grandchild": 1}}}
doAssert myjson{"parent", "child", "grandchild"} == newJInt(1)</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L580" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L580" target="_blank">Edit</a> </dd> </div> </div> <div id="{}=-procs-all"> <div id="{}=,JsonNode,varargs[string],JsonNode"> <dt><pre data-language="nim">proc `{}=`(node: JsonNode; keys: varargs[string]; value: JsonNode) {.
    ...raises: [KeyError], tags: [], forbids: [].}</pre></dt> <dd> Traverses the node and tries to set the value at the given location to <code><span class="Identifier">value</span></code>. If any of the keys are missing, they are added. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L619" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L619" target="_blank">Edit</a> </dd> </div> </div> </dl>   <h2 id="15">Iterators</h2> <dl> <div id="items-iterators-all"> <div id="items.i,JsonNode"> <dt><pre data-language="nim">iterator items(node: JsonNode): JsonNode {....raises: [], tags: [], forbids: [].}</pre></dt> <dd> Iterator for the items of <code><span class="Identifier">node</span></code>. <code><span class="Identifier">node</span></code> has to be a JArray. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L829" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L829" target="_blank">Edit</a> </dd> </div> </div> <div id="keys-iterators-all"> <div id="keys.i,JsonNode"> <dt><pre data-language="nim">iterator keys(node: JsonNode): string {....raises: [], tags: [], forbids: [].}</pre></dt> <dd> Iterator for the keys in <code><span class="Identifier">node</span></code>. <code><span class="Identifier">node</span></code> has to be a JObject. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L848" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L848" target="_blank">Edit</a> </dd> </div> </div> <div id="mitems-iterators-all"> <div id="mitems.i,JsonNode"> <dt><pre data-language="nim">iterator mitems(node: var JsonNode): var JsonNode {....raises: [], tags: [],
    forbids: [].}</pre></dt> <dd> Iterator for the items of <code><span class="Identifier">node</span></code>. <code><span class="Identifier">node</span></code> has to be a JArray. Items can be modified. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L835" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L835" target="_blank">Edit</a> </dd> </div> </div> <div id="mpairs-iterators-all"> <div id="mpairs.i,JsonNode"> <dt><pre data-language="nim">iterator mpairs(node: var JsonNode): tuple[key: string, val: var JsonNode] {.
    ...raises: [], tags: [], forbids: [].}</pre></dt> <dd> Iterator for the child elements of <code><span class="Identifier">node</span></code>. <code><span class="Identifier">node</span></code> has to be a JObject. Values can be modified <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L854" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L854" target="_blank">Edit</a> </dd> </div> </div> <div id="pairs-iterators-all"> <div id="pairs.i,JsonNode"> <dt><pre data-language="nim">iterator pairs(node: JsonNode): tuple[key: string, val: JsonNode] {....raises: [],
    tags: [], forbids: [].}</pre></dt> <dd> Iterator for the child elements of <code><span class="Identifier">node</span></code>. <code><span class="Identifier">node</span></code> has to be a JObject. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L842" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L842" target="_blank">Edit</a> </dd> </div> </div> <div id="parseJsonFragments-iterators-all"> <div id="parseJsonFragments.i,Stream,string"> <dt><pre data-language="nim">iterator parseJsonFragments(s: Stream; filename: string = "";
                            rawIntegers = false; rawFloats = false): JsonNode {.
    ...raises: [IOError, OSError, IOError, OSError, JsonParsingError, ValueError],
    tags: [ReadIOEffect, WriteIOEffect], forbids: [].}</pre></dt> <dd> Parses from a stream <code><span class="Identifier">s</span></code> into <code><span class="Identifier">JsonNodes</span></code>. <code><span class="Identifier">filename</span></code> is only needed for nice error messages. The JSON fragments are separated by whitespace. This can be substantially faster than the comparable loop <code><span class="Keyword">for</span> <span class="Identifier">x</span> <span class="Keyword">in</span> <span class="Identifier">splitWhitespace</span><span class="Punctuation">(</span><span class="Identifier">s</span><span class="Punctuation">)</span><span class="Punctuation">:</span> <span class="Keyword">yield</span> <span class="Identifier">parseJson</span><span class="Punctuation">(</span><span class="Identifier">x</span><span class="Punctuation">)</span></code>. This closes the stream <code><span class="Identifier">s</span></code> after it's done. If <code><span class="Identifier">rawIntegers</span></code> is true, integer literals will not be converted to a <code><span class="Identifier">JInt</span></code> field but kept as raw numbers via <code><span class="Identifier">JString</span></code>. If <code><span class="Identifier">rawFloats</span></code> is true, floating point literals will not be converted to a <code><span class="Identifier">JFloat</span></code> field but kept as raw numbers via <code><span class="Identifier">JString</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L929" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L929" target="_blank">Edit</a> </dd> </div> </div> </dl>   <h2 id="17">Macros</h2> <dl> <div id="%*-macros-all"> <div id="%*.m,untyped"> <dt><pre data-language="nim">macro `%*`(x: untyped): untyped</pre></dt> <dd> Convert an expression to a JsonNode directly, without having to specify <code><span class="Operator">%</span></code> for every element. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L442" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L442" target="_blank">Edit</a> </dd> </div> </div> <div id="isRefSkipDistinct-macros-all"> <div id="isRefSkipDistinct.m,typed"> <dt><pre data-language="nim">macro isRefSkipDistinct(arg: typed): untyped</pre></dt> <dd> internal only, do not use <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L1071" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L1071" target="_blank">Edit</a> </dd> </div> </div> </dl>   <h2 id="18">Templates</h2> <dl> <div id="%-templates-all"> <div id="%.t,JsonNode"> <dt><pre data-language="nim">template `%`(j: JsonNode): JsonNode</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/pure/json.nim#L364" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/json.nim#L364" target="_blank">Edit</a> </dd> </div> </div> </dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2006&ndash;2024 Andreas Rumpf<br>Licensed under the MIT License.<br>
    <a href="https://nim-lang.org/docs/json.html" class="_attribution-link">https://nim-lang.org/docs/json.html</a>
  </p>
</div>
