<h1 class="title">hashes</h1>  <p class="module-desc">This module implements efficient computations of hash values for diverse Nim types. All the procs are based on these two building blocks:</p>
<ul class="simple">
<li>
<a href="#!&amp;,Hash,int">!&amp; proc</a> used to start or mix a hash value, and</li> <li>
<a href="#!%24,Hash">!$ proc</a> used to <em>finish</em> the hash value.</li> </ul> <p>If you want to implement hash procs for your custom types, you will end up writing the following kind of skeleton of code:</p> <pre class="listing" data-language="nim">proc hash(x: Something): Hash =
  ## Computes a Hash from `x`.
  var h: Hash = 0
  # Iterate over parts of `x`.
  for xAtom in x:
    # Mix the atom with the partial hash.
    h = h !&amp; xAtom
  # Finish the hash.
  result = !$h</pre>
<p>If your custom types contain fields for which there already is a hash proc, like for example objects made up of <code>strings</code>, you can simply hash together the hash value of the individual fields:</p> <pre class="listing" data-language="nim">proc hash(x: Something): Hash =
  ## Computes a Hash from `x`.
  var h: Hash = 0
  h = h !&amp; hash(x.foo)
  h = h !&amp; hash(x.bar)
  result = !$h</pre>
<p><strong>See also:</strong></p> <ul class="simple">
<li>
<a href="md5.html">md5 module</a> for MD5 checksum algorithm</li> <li>
<a href="base64.html">base64 module</a> for a base64 encoder and decoder</li> <li>
<a href="sha1.html">std/sha1 module</a> for a sha1 encoder and decoder</li> <li>
<a href="tables.html">tables module</a> for hash tables</li> </ul>  <h2 id="6">Imports</h2> <dl> <a href="since.html">since</a> </dl>  <h2 id="7">Types</h2> <dl>  <dt><pre id="Hash">Hash = int</pre></dt> <dd> A hash value. Hash tables using these values should always have a size of a power of two and can use the <code>and</code> operator instead of <code>mod</code> for truncation of the hash value. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/hashes.nim#L50" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/hashes.nim#L50" target="_blank">Edit</a> </dd> </dl>  <h2 id="12">Procs</h2> <dl>  <dt><pre id="%21%26%2CHash%2Cint" data-language="nim">proc `!&amp;`(h: Hash; val: int): Hash {...}{.inline, raises: [], tags: [].}</pre></dt> <dd> <p>Mixes a hash value <code>h</code> with <code>val</code> to produce a new hash value.</p> <p>This is only needed if you need to implement a hash proc for a new datatype.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/hashes.nim#L54" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/hashes.nim#L54" target="_blank">Edit</a> </dd>  <dt><pre id="%21%24%2CHash" data-language="nim">proc `!$`(h: Hash): Hash {...}{.inline, raises: [], tags: [].}</pre></dt> <dd> <p>Finishes the computation of the hash value.</p> <p>This is only needed if you need to implement a hash proc for a new datatype.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/hashes.nim#L65" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/hashes.nim#L65" target="_blank">Edit</a> </dd>  <dt><pre id="hashWangYi1" data-language="nim">proc hashWangYi1(x: int64 | uint64 | Hash): Hash {...}{.inline.}</pre></dt> <dd> Wang Yi's hash_v1 for 8B int. <a href="https://github.com/rurban/smhasher">https://github.com/rurban/smhasher</a> has more details. This passed all scrambling tests in Spring 2019 and is simple. NOTE: It's ok to define <code>proc(x: int16): Hash = hashWangYi1(Hash(x))</code>. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/hashes.nim#L109" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/hashes.nim#L109" target="_blank">Edit</a> </dd>  <dt><pre id="hashData%2Cpointer%2Cint" data-language="nim">proc hashData(data: pointer; size: int): Hash {...}{.raises: [], tags: [].}</pre></dt> <dd> Hashes an array of bytes of size <code>size</code>. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/hashes.nim#L138" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/hashes.nim#L138" target="_blank">Edit</a> </dd>  <dt><pre id="hash%2Cpointer" data-language="nim">proc hash(x: pointer): Hash {...}{.inline, raises: [], tags: [].}</pre></dt> <dd> Efficient hashing of pointers. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/hashes.nim#L157" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/hashes.nim#L157" target="_blank">Edit</a> </dd>  <dt><pre id="hash%2CT" data-language="nim">proc hash[T: proc](x: T): Hash {...}{.inline.}</pre></dt> <dd> Efficient hashing of proc vars. Closures are supported too. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/hashes.nim#L173" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/hashes.nim#L173" target="_blank">Edit</a> </dd>  <dt><pre id="hashIdentity%2CT" data-language="nim">proc hashIdentity[T: Ordinal | enum](x: T): Hash {...}{.inline.}</pre></dt> <dd> The identity hash. I.e. <code>hashIdentity(x) = x</code>. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/hashes.nim#L180" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/hashes.nim#L180" target="_blank">Edit</a> </dd>  <dt><pre id="hash%2CT_2" data-language="nim">proc hash[T: Ordinal | enum](x: T): Hash {...}{.inline.}</pre></dt> <dd> Efficient hashing of integers. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/hashes.nim#L189" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/hashes.nim#L189" target="_blank">Edit</a> </dd>  <dt><pre id="hash%2Cfloat" data-language="nim">proc hash(x: float): Hash {...}{.inline, raises: [], tags: [].}</pre></dt> <dd> Efficient hashing of floats. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/hashes.nim#L193" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/hashes.nim#L193" target="_blank">Edit</a> </dd>  <dt><pre id="hash%2Cstring" data-language="nim">proc hash(x: string): Hash {...}{.raises: [], tags: [].}</pre></dt> <dd> <p>Efficient hashing of strings.</p> <p>See also:</p> <ul class="simple">
<li><a href="#hashIgnoreStyle,string">hashIgnoreStyle</a></li> <li><a href="#hashIgnoreCase,string">hashIgnoreCase</a></li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">doAssert hash("abracadabra") != hash("AbracadabrA")</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/hashes.nim#L285" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/hashes.nim#L285" target="_blank">Edit</a> </dd>  <dt><pre id="hash%2Ccstring" data-language="nim">proc hash(x: cstring): Hash {...}{.raises: [], tags: [].}</pre></dt> <dd> Efficient hashing of null-terminated strings. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">doAssert hash(cstring"abracadabra") == hash("abracadabra")
doAssert hash(cstring"AbracadabrA") == hash("AbracadabrA")
doAssert hash(cstring"abracadabra") != hash(cstring"AbracadabrA")</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/hashes.nim#L305" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/hashes.nim#L305" target="_blank">Edit</a> </dd>  <dt><pre id="hash%2Cstring%2Cint%2Cint" data-language="nim">proc hash(sBuf: string; sPos, ePos: int): Hash {...}{.raises: [], tags: [].}</pre></dt> <dd> <p>Efficient hashing of a string buffer, from starting position <code>sPos</code> to ending position <code>ePos</code> (included).</p> <p><code>hash(myStr, 0, myStr.high)</code> is equivalent to <code>hash(myStr)</code>.</p> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var a = "abracadabra"
doAssert hash(a, 0, 3) == hash(a, 7, 10)</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/hashes.nim#L326" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/hashes.nim#L326" target="_blank">Edit</a> </dd>  <dt><pre id="hashIgnoreStyle%2Cstring" data-language="nim">proc hashIgnoreStyle(x: string): Hash {...}{.raises: [], tags: [].}</pre></dt> <dd> <p>Efficient hashing of strings; style is ignored.</p> <p><strong>Note:</strong> This uses different hashing algorithm than <code>hash(string)</code>.</p> <p>See also:</p> <ul class="simple">
<li><a href="#hashIgnoreCase,string">hashIgnoreCase</a></li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">doAssert hashIgnoreStyle("aBr_aCa_dAB_ra") == hashIgnoreStyle("abracadabra")
doAssert hashIgnoreStyle("abcdefghi") != hash("abcdefghi")</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/hashes.nim#L343" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/hashes.nim#L343" target="_blank">Edit</a> </dd>  <dt><pre id="hashIgnoreStyle%2Cstring%2Cint%2Cint" data-language="nim">proc hashIgnoreStyle(sBuf: string; sPos, ePos: int): Hash {...}{.raises: [], tags: [].}</pre></dt> <dd> <p>Efficient hashing of a string buffer, from starting position <code>sPos</code> to ending position <code>ePos</code> (included); style is ignored.</p> <p><strong>Note:</strong> This uses different hashing algorithm than <code>hash(string)</code>.</p> <p><code>hashIgnoreStyle(myBuf, 0, myBuf.high)</code> is equivalent to <code>hashIgnoreStyle(myBuf)</code>.</p> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var a = "ABracada_b_r_a"
doAssert hashIgnoreStyle(a, 0, 3) == hashIgnoreStyle(a, 7, a.high)</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/hashes.nim#L368" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/hashes.nim#L368" target="_blank">Edit</a> </dd>  <dt><pre id="hashIgnoreCase%2Cstring" data-language="nim">proc hashIgnoreCase(x: string): Hash {...}{.raises: [], tags: [].}</pre></dt> <dd> <p>Efficient hashing of strings; case is ignored.</p> <p><strong>Note:</strong> This uses different hashing algorithm than <code>hash(string)</code>.</p> <p>See also:</p> <ul class="simple">
<li><a href="#hashIgnoreStyle,string">hashIgnoreStyle</a></li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">doAssert hashIgnoreCase("ABRAcaDABRA") == hashIgnoreCase("abRACAdabra")
doAssert hashIgnoreCase("abcdefghi") != hash("abcdefghi")</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/hashes.nim#L393" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/hashes.nim#L393" target="_blank">Edit</a> </dd>  <dt><pre id="hashIgnoreCase%2Cstring%2Cint%2Cint" data-language="nim">proc hashIgnoreCase(sBuf: string; sPos, ePos: int): Hash {...}{.raises: [], tags: [].}</pre></dt> <dd> <p>Efficient hashing of a string buffer, from starting position <code>sPos</code> to ending position <code>ePos</code> (included); case is ignored.</p> <p><strong>Note:</strong> This uses different hashing algorithm than <code>hash(string)</code>.</p> <p><code>hashIgnoreCase(myBuf, 0, myBuf.high)</code> is equivalent to <code>hashIgnoreCase(myBuf)</code>.</p> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var a = "ABracadabRA"
doAssert hashIgnoreCase(a, 0, 3) == hashIgnoreCase(a, 7, 10)</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/hashes.nim#L412" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/hashes.nim#L412" target="_blank">Edit</a> </dd>  <dt><pre id="hash%2CT_3" data-language="nim">proc hash[T: tuple](x: T): Hash</pre></dt> <dd> Efficient hashing of tuples. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/hashes.nim#L433" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/hashes.nim#L433" target="_blank">Edit</a> </dd>  <dt><pre id="hash%2CopenArray%5BA%5D" data-language="nim">proc hash[A](x: openArray[A]): Hash</pre></dt> <dd> Efficient hashing of arrays and sequences. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/hashes.nim#L440" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/hashes.nim#L440" target="_blank">Edit</a> </dd>  <dt><pre id="hash%2CopenArray%5BA%5D%2Cint%2Cint" data-language="nim">proc hash[A](aBuf: openArray[A]; sPos, ePos: int): Hash</pre></dt> <dd> <p>Efficient hashing of portions of arrays and sequences, from starting position <code>sPos</code> to ending position <code>ePos</code> (included).</p> <p><code>hash(myBuf, 0, myBuf.high)</code> is equivalent to <code>hash(myBuf)</code>.</p> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">let a = [1, 2, 5, 1, 2, 6]
doAssert hash(a, 0, 1) == hash(a, 3, 4)</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/hashes.nim#L454" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/hashes.nim#L454" target="_blank">Edit</a> </dd>  <dt><pre id="hash%2Cset%5BA%5D" data-language="nim">proc hash[A](x: set[A]): Hash</pre></dt> <dd> Efficient hashing of sets. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/hashes.nim#L478" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/hashes.nim#L478" target="_blank">Edit</a> </dd> </dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2006&ndash;2021 Andreas Rumpf<br>Licensed under the MIT License.<br>
    <a href="https://nim-lang.org/docs/hashes.html" class="_attribution-link">https://nim-lang.org/docs/hashes.html</a>
  </p>
</div>
