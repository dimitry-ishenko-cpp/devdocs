<h1 class="title">Nim maintenance script</h1> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/doc/koch.md#L1" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/doc/koch.md#L1" target="_blank">Edit</a>  
<blockquote class="markdown-quote"><p>"A great chef is an artist that I truly respect" -- Robert Stack.</p></blockquote> <h2 id="introduction">Introduction</h2>
<p>The <span id="koch_1">koch</span> program is Nim's maintenance script. It is a replacement for make and shell scripting with the advantage that it is much more portable. The word <em>koch</em> means <em>cook</em> in German. <code><span class="program">koch</span></code> is used mainly to build the Nim compiler, but it can also be used for other tasks. This document describes the supported commands and their options.</p> <h2 id="commands">Commands</h2> <h3 id="commands-boot-command">boot command</h3>
<p>The <span id="boot_1">boot</span> command bootstraps the compiler, and it accepts different options:</p> <div class="option-list">
<div class="option-list-item odd">
<div class="option-list-label"><code><span class="option">-d:release</span></code></div>
<div class="option-list-description">By default a debug version is created, passing this option will force a release build, which is much faster and should be preferred unless you are debugging the compiler.</div>
</div> <div class="option-list-item">
<div class="option-list-label"><code><span class="option">-d:nimUseLinenoise</span></code></div>
<div class="option-list-description">Use the linenoise library for interactive mode (not needed on Windows).</div>
</div> <div class="option-list-item odd">
<div class="option-list-label"><code><span class="option">-d:leanCompiler</span></code></div>
<div class="option-list-description">Produce a compiler without JS codegen or documentation generator in order to use less RAM for bootstrapping.</div>
</div> </div>
<p>After compilation is finished you will hopefully end up with the nim compiler in the <code><span class="Identifier">bin</span></code> directory. You can add Nim's <code><span class="Identifier">bin</span></code> directory to your <code><span class="Operator">$</span><span class="Identifier">PATH</span></code> or use the install command to place it where it will be found.</p> <h3 id="commands-csource-command">csource command</h3>
<p>The <span id="csource_1">csource</span> command builds the C sources for installation. It accepts the same options as you would pass to the <a href="koch.html#commands-boot-command">boot command</a>.</p> <h3 id="commands-temp-command">temp command</h3>
<p>The temp command builds the Nim compiler but with a different final name (<code><span class="program">nim_temp</span></code>), so it doesn't overwrite your normal compiler. You can use this command to test different options, the same you would issue for the <a href="#commands-boot-command">boot command</a>.</p> <h3 id="commands-test-command">test command</h3>
<p>The <span id="test_1">test</span> command can also be invoked with the alias <code>tests</code>. This command will compile and run <code>testament/tester.nim</code>, which is the main driver of Nim's test suite. You can pass options to the <code>test</code> command, they will be forwarded to the tester. See its source code for available options.</p> <h3 id="commands-web-command">web command</h3>
<p>The <span id="web_1">web</span> command converts the documentation in the <code><span class="Identifier">doc</span></code> directory from rst to HTML. It also repeats the same operation but places the result in the <code>web/upload</code> which can be used to update the website at <a href="https://nim-lang.org">https://nim-lang.org</a>.</p> <p>By default, the documentation will be built in parallel using the number of available CPU cores. If any documentation build sub-commands fail, they will be rerun in serial fashion so that meaningful error output can be gathered for inspection. The <code>--parallelBuild:n</code> switch or configuration option can be used to force a specific number of parallel jobs or run everything serially from the start (<code><span class="Identifier">n</span> <span class="Operator">==</span> <span class="DecNumber">1</span></code>).</p> <h3 id="commands-pdf-command">pdf command</h3>
<p>The <span id="pdf_1">pdf</span> command builds PDF versions of Nim documentation: Manual, Tutorial and a few other documents. To run it one needs to <a href="https://www.latex-project.org/get">install Latex/xelatex</a> first. </p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2006&ndash;2024 Andreas Rumpf<br>Licensed under the MIT License.<br>
    <a href="https://nim-lang.org/docs/koch.html" class="_attribution-link">https://nim-lang.org/docs/koch.html</a>
  </p>
</div>
