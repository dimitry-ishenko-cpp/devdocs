<h1 class="title">concepts</h1> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/compiler/concepts.nim#L1" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/compiler/concepts.nim#L1" target="_blank">Edit</a>  <p class="module-desc">New styled concepts for Nim. See <a href="https://github.com/nim-lang/RFCs/issues/168">https://github.com/nim-lang/RFCs/issues/168</a> for details. Note this is a first implementation and only the "Concept matching" section has been implemented. </p>
<h2 id="code-dealing-with-concept-declarations">Code dealing with Concept declarations</h2> <h2 id="concept-matching">Concept matching</h2>  <h2 id="6">Imports</h2> <dl> <a href="ast.html">ast</a>, <a href="astalgo.html">astalgo</a>, <a href="semdata.html">semdata</a>, <a href="lookups.html">lookups</a>, <a href="lineinfos.html">lineinfos</a>, <a href="idents.html">idents</a>, <a href="msgs.html">msgs</a>, <a href="renderer.html">renderer</a>, <a href="types.html">types</a> </dl>   <h2 id="12">Procs</h2> <dl> <div id="conceptMatch-procs-all"> <div id="conceptMatch,PContext,PType,PType,TypeMapping,PType"> <dt><pre data-language="nim">proc conceptMatch(c: PContext; concpt, arg: PType; bindings: var TypeMapping;
                  invocation: PType): bool {....raises: [KeyError, Exception],
    tags: [ReadDirEffect, RootEffect], forbids: [].}</pre></dt> <dd> Entry point from sigmatch. 'concpt' is the concept we try to match (here still a PType but we extract its AST via 'concpt.n.lastSon'). 'arg' is the type that might fulfill the concept's requirements. If so, we return true and fill the 'bindings' with pairs of (typeVar, instance) pairs. ('typeVar' is usually simply written as a generic 'T'.) 'invocation' can be nil for atomic concepts. For non-atomic concepts, it contains the <code><span class="Identifier">C</span><span class="Punctuation">[</span><span class="Identifier">S</span><span class="Punctuation">,</span> <span class="Identifier">T</span><span class="Punctuation">]</span></code> parent type that we look for. We need this because we need to store bindings for 'S' and 'T' inside 'bindings' on a successful match. It is very important that we do not add any bindings at all on an unsuccessful match! <a href="https://github.com/nim-lang/Nim/tree/version-2-2/compiler/concepts.nim#L312" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/compiler/concepts.nim#L312" target="_blank">Edit</a> </dd> </div> </div> <div id="semConceptDeclaration-procs-all"> <div id="semConceptDeclaration,PContext,PNode"> <dt><pre data-language="nim">proc semConceptDeclaration(c: PContext; n: PNode): PNode {....raises: [KeyError,
    Exception, ValueError, OSError, IOError, ERecoverableError], tags: [
    RootEffect, ReadDirEffect, WriteIOEffect, ReadIOEffect, ReadEnvEffect],
    forbids: [].}</pre></dt> <dd> Semantic checking for the concept declaration. Runs when we process the concept itself, not its matching process. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/compiler/concepts.nim#L58" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/compiler/concepts.nim#L58" target="_blank">Edit</a> </dd> </div> </div> </dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2006&ndash;2024 Andreas Rumpf<br>Licensed under the MIT License.<br>
    <a href="https://nim-lang.org/docs/compiler/concepts.html" class="_attribution-link">https://nim-lang.org/docs/compiler/concepts.html</a>
  </p>
</div>
